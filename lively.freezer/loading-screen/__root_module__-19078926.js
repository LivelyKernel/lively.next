System.register([],function(ya,wb){return{execute:function(){function Ab(g,d,k){k=k||0;var e=[];if(g<=d)for(0>=k&&(k=-k||1);g<=d;g+=k)e.push(g);else for(0<=k&&(k=-k||-1);g>=d;g+=k)e.push(g);return e}function ac(g,d){for(var k=Array(g);0<g;)k[--g]=d;return k}function Ob(g,d){for(var k=Array(g);0<g;)k[--g]=d(g);return k}function kd(g,d,k){for(var e=[],h=0;h<g.length;h++){var n=g[h];d.call(k,n)&&e.push(n)}return e}function Cc(g,d){var k;g.find(function(e,h){return k=d(e,h)});return k}function qd(g,
d){return g.filter(function(k){return!!k[d]})}function Dc(g,d,k){"string"===typeof d&&(d=new RegExp(d,"i"));return Eb.filter(g,Eb.filter.test.bind(d))}function Ic(g,d){return Eb.filter(g,function(k,e){return!!d[e]})}function Qc(g,d,k){return Eb.filter(g,function(e,h){return!d.call(k,e,h)})}function Bd(g,d){return Eb.filter(g,function(k){return!k[d]})}function ne(g,d){return Eb.filter(g,function(k){return k!==d})}function ve(g,d){return Eb.filter(g,function(k){return-1===d.indexOf(k)})}function Wd(g,
d){if(!g.length)return g;var k=[g[0]];if(d)for(d=1;d<g.length;d++){var e=g[d];e!==k[k.length]&&k.push(e)}else for(d=1;d<g.length;d++)e=g[d],-1===k.indexOf(e)&&k.push(e);return k}function Ub(g,d,k){for(var e=g.slice(),h=e.length;h--;)for(var n=g[h],b=h+1;b<e.length;b++)d.call(k,n,e[b])&&e.splice(b--,1);return e}function wc(g,d){for(var k={},e=[],h=0;h<g.length;h++){var n=g[h];k[n[d]]||(k[n[d]]=!0,e.push(n))}return e}function od(g){return Eb.filter(g,Boolean)}function Tb(g){for(var d=0,k=0,e=g.length;d<
e;)g.hasOwnProperty(d)&&(g[k++]=g[d]),d++;for(;k++<e;)g.pop();return g}function xd(g,d,k){return g.forEach(d,k)}function Fd(){var g=Array.from(arguments),d=g.shift(),k="function"===typeof Eb.last(g)?g.pop():function(h){return h},e=[d].concat(g).map(function(h){return Array.from(h)});return d.map(function(h,n){return k(Eb.pluck(e,n),n)})}function ic(g,d){if("number"===typeof d){if(0>=d)return g;d--}return g.reduce(function(k,e){return k.concat(Array.isArray(e)?ic(e,d):[e])},[])}function rc(g,d,k){for(var e=
[],h=0;h<g.length;h++)e.push.apply(e,d.call(k,g[h],h));return e}function Gb(g,d){return g.reduce(function(k,e){0<k.length&&k.push(d);k.push(e);return k},[])}function oc(g,d){return Eb.interpose(g,d)}function Hc(g,d,k){return g.map(d,k)}function ad(g,d,k,e,h,n,b,c){return g.map(function(l){return l[d](k,e,h,n,b,c)})}function dd(g,d){return g.map(function(k){return k[d]})}function ec(g,d,k,e){return g.reduce(d,k,e)}function jb(g,d,k,e){return g.reduceRight(d,k,e)}function yb(g,d,k){return g.some(d,
k)}function Ja(g,d,k){return g.every(d,k)}function Ta(g,d){var k=g.length;if(!d||k!==d.length)return!1;for(var e=0;e<k;e++){if(g[e]&&d[e]&&g[e].equals&&d[e].equals)if(g[e].equals(d[e]))continue;else return!1;if(g[e]!=d[e])return!1}return!0}function Ka(g,d){var k=g.length;if(!d||k!==d.length)return!1;for(var e=0;e<k;e++)if(!Eb.objectEquals(g[e],d[e]))return!1;return!0}function Fa(g,d){if(d)for(d=1;d<g.length;d++){if(g[d-1]<g[d])return!1}else for(d=1;d<g.length;d++)if(g[d-1]>g[d])return!1;return!0}
function Xa(g,d){return g.sort(d)}function Ib(g,d,k){return Eb.pluck(g.map(function(e,h){return{value:e,criteria:d.call(k,e,h)}}).sort(function(e,h){e=e.criteria;h=h.criteria;return e<h?-1:e>h?1:0}),"value")}function jc(g,d){return Eb.sortBy(g,function(k){return k[d]})}function lb(g){return g.reverse()}function tb(g){return g.slice().reverse()}function nb(g,d,k){k=k||String;return g.map(function(e){return k(e).match(d)})}function Y(g){return g[0]}function Ba(g){return g[g.length-1]}function P(g,d){return Eb.filter(Eb.uniq(g),
function(k){return-1<d.indexOf(k)})}function na(g,d){g=g.slice();for(var k=0;k<d.length;k++){var e=d[k];-1===g.indexOf(e)&&g.push(e)}return g}function Sa(g,d,k){g.splice(k,0,d)}function hb(g,d){g.splice(d,1)}function cc(g,d){var k=g.indexOf(d);0<=k&&Eb.removeAt(g,k);return d}function Uc(g,d){g.push.apply(g,d);return g}function Xb(g,d,k){g.splice.apply(g,[k,0].concat(d))}function Db(g,d){g.includes(d)||g.push(d)}function vd(g,d,k){g.splice(k,1,d)}function bd(g){g.length=0;return g}function cb(g,d){for(var k=
0;k<g.length;k++)if(!d.includes(g[k]))return!1;return!0}function xb(g,d,k,e){k=k||Eb.NullFunction;e=e||Eb.GLOBAL;d=d||function(h,n,b){n.call(e,h,b)};return g.reduceRight(function(h,n,b){return function(){d.call(e,h,n,b)}},k)()}function Bc(g,d,k,e,h,n){e=e||function(){};return g.clone().reverse().reduce(function(b,c,l){return function(){d.call(h||Eb.GLOBAL,c,l);n&&0!==l%n?b():b.delay(k)}},e)()}function mb(){var g=Array.from(arguments),d=g.shift(),k=d.length,e=!1;if(1===g.length){var h=g[0].progressBar;
var n=g[0].iterator;var b=g[0].labelFunction;var c=g[0].whenDone;var l=g[0].context}else h=g[0],n=g[1],b=g[2],c=g[3],l=g[4];l||(l="undefined"!==typeof window?window:global);b||(b=function(a){return a});h||(e=!0,h=(g=("undefined"!==typeof window?window:global).lively&&lively.morphic&&lively.morphic.World.current())?g.addProgressBar():{value:null,label:null,remove:function(){}});h.value=0;d.reduceRight(function(a,f,m){return function(){try{h.value=m/k,b&&(h.label=b.call(l,f,m)),n.call(l,f,m)}catch(q){console.error("Error in forEachShowingProgress at %s (%s)\n%s\n%s",
m,f,q,q.stack)}Eb.delay(a,0)}},function(){h.value=1;e&&function(){h.remove()}.delay(0);c&&c.call(l)})();return d}function Ec(g,d,k){0>d&&(d=g.length+d);0>k&&(k=g.length+k);var e=g[d];g[d]=g[k];g[k]=e;return g}function Ac(g,d){d=d||1;return g.slice(d).concat(g.slice(0,d))}function ab(g,d,k){return Eb.Group.fromArray(g,d,k)}function La(g,d){return Eb.groupBy(g,function(k){return k[d]})}function gb(g,d,k){d=d||function(n){return n};var e=[],h=[];g.forEach(function(n,b){(d.call(k,n,b)?e:h).push(n)});
return[e,h]}function Va(g,d,k){function e(n,b){if(!b.length)return[n,[]];var c=b[0];b=b.slice(1);var l=n.concat([c]);if(d.call(k,l))return e(l,b);n=e(n,b);return[n[0],[c].concat(n[1])]}function h(n,b){if(!b.length)return n;b=e([],b);if(!b[0].length)throw Error("Batchify constrained does not ensure consumption of at least one item per batch!");return h(n.concat([b[0]]),b[1])}return h([],g)}function tc(g,d){d=d||1;return Eb.range(0,Math.ceil(g.length/d)-1).map(function(k){return g.slice(k*d,k*d+d)},
g)}function ia(g,d){for(var k=g.map(function(b,c){return b[d[c]]}),e=d.slice(),h=g.length;h--;0<=h){var n=e[h]+1;if(g[h][n]){e[h]=n;break}else if(0===h){e=void 0;break}else e[h]=0}return[k,e]}function va(g){for(var d=g.reduce(function(n,b){return n*b.length},1),k=g.map(function(n){return 0}),e=Array(d),h=0;h<d;h++)k=Eb.combinationsPick(g,k),e[h]=k[0],k=k[1];return e}function qb(g,d){return g.slice(0,d)}function I(g,d){return g.slice(d)}function pa(g,d,k){for(var e=0;e<g.length&&d.call(k,g[e],e);e++);
return g.slice(0,e)}function Oa(g,d,k){for(var e=0;e<g.length&&d.call(k,g[e],e);e++);return g.slice(e)}function ub(g){for(var d=Eb.range(0,g.length-1),k=Array(g.length),e=0;e<g.length;e++){var h=d.splice(Math.round(Math.random()*(d.length-1)),1);k[h]=g[e]}return k}function Wb(g,d,k){d=d||function(h){return h};var e;g.reduce(function(h,n,b){b=d.call(k,n,b);if("number"!==typeof b||b<=h)return h;e=n;return b},-Infinity);return e}function Jb(g,d,k){d=d||function(e){return e};return Eb.max(g,function(e,
h){return-d.call(k,e,h)})}function yc(g){for(var d=0,k=0;k<g.length;k++)d+=g[k];return d}function Jc(g,d){return g.reduce(function(k,e){return e===d?k+1:k},0)}function Hd(g){return g.length}function Ge(g,d){if("undefined"===typeof d||"number"===typeof d){var k=d||Math.ceil(Math.log(g.length)/Math.log(2)+1),e=Math.ceil(Math.round(g.length/k));return Eb.range(0,k-1).map(function(h){return g.slice(h*e,(h+1)*e)})}if(d instanceof Array)return g.reduce(function(h,n){if(n<d[1])return h[0].push(n),h;for(var b=
1;b<d.length;b++)if(n>=d[b]&&(!d[b+1]||n<=d[b+1]))return h[b].push(n),h;throw Error("Histogram creation: Cannot group data "+n+" into thresholds "+d);},Eb.range(1,d.length).map(function(){return[]}))}function Dd(g){return[].concat(g)}function ae(g){return Eb.from(g)}function ie(g,d,k){return g.forEach(d,k)}function Fe(g,d,k){return g.every(d,k)}function Tc(g,d,k){return g.some(d,k)}function ee(g,d,k){return g.map(d,k)}function he(g,d,k){return Eb.filter(g,d,k)}function gf(g,d,k,e){e&&(k=k.bind(e));
return g.reduce(k,d)}function jf(g,d,k){function e(b,c){if(!n&&(b||c)){n=!0;try{k(b,h)}catch(l){console.error("Error in mapAsyncSeries - callback invocation error:\n"+(l.stack||l))}}}var h=[],n=!1;return g.reduceRight(function(b,c,l){if(!n)return function(a,f){if(a)return e(a);0<l&&h.push(f);try{d(c,l,Eb.once(b))}catch(m){e(m)}}},function(b,c){h.push(c);e(b,!0)})()}function Rf(g,d,k,e){function h(){for(;f<d.parallel&&a<g.length;)m[a++]()}function n(q,r){if(!(-1<c.indexOf(q)||(c.push(q),f--,l)))if(!r&&
c.length<g.length)h();else{l=!0;try{e&&e(r,b)}catch(u){console.error("Error in mapAsync - main callback invocation error:\n"+(u.stack||u))}}}"function"===typeof d&&(e=k,k=d,d=null);d=d||{};if(!g.length)return e&&e(null,[]);d.parallel||(d.parallel=Infinity);var b=[],c=[],l=!1,a=0,f=0,m=g.map(function(q,r){return function(){f++;try{k(q,r,Eb.once(function(u,v){b[r]=u||v;n(r,u)}))}catch(u){n(r,u)}}});return h()}function Zb(){return function(){}}function pg(){return function(g){return g}}function lg(){return function(){return null}}
function qg(){return function(){return!1}}function Re(){return function(){return!0}}function Ha(){return function(){throw Error("Not yet implemented");}}function Ya(g){var d=[],k;for(k in g)g.__lookupGetter__(k)||"function"!==typeof g[k]||d.push(k);return d}function Bb(g){var d=[],k;for(k in g)!g.__lookupGetter__(k)&&g.hasOwnProperty(k)&&"function"===typeof g[k]&&d.push(k);return d}function V(g){if(g.superclass)return[];var d=g.toString();g="";var k=d.match(/(?:\(([^\)]*)\)|([^\(\)-+!]+))\s*=>/);
k?g=k[1]||k[2]||"":(d=d.match(/^[\s\(]*function[^(]*\(([^)]*)\)/))&&d[1]&&(g=d[1]);return g.replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",").map(function(e){return e.trim()}).filter(function(e){return!!e})}function Da(g){var d="";g.declaredClass?d+=g.declaredClass+">>":g.declaredObject&&(d+=g.declaredObject+".");return d+(g.methodName||g.displayName||g.name||"anonymous")}function fb(g){g=String(g).replace(/^function[^\{]+\{\s*/,"").replace(/\}$/,"").trim();for(var d=
g.split(/\n|\r/),k,e=0;e<d.length;e++){var h=d[e].match(/^(\s+)[^\s]/);h&&(void 0===k||h[1].length<k.length)&&(k=h[1])}return k?g.replace(new RegExp("^"+k,"gm"),""):g}function rb(g){var d=Date.now();g();return Date.now()-d}function lc(g,d){for(var k=Date.now(),e=0;e<d;e++)g();return(Date.now()-k)/d}function gc(g,d){var k=Array.prototype.slice.call(arguments),e=k.shift();d=1E3*k.shift();return setTimeout(function(){return e.apply(e,k)},d)}function Lc(g,d){var k,e,h,n,b,c,l=Nc.debounce(d,function(){b=
n=!1});return function(){k=this;e=arguments;h||(h=setTimeout(function(){h=null;b&&g.apply(k,e);l()},d));n?b=!0:c=g.apply(k,e);l();n=!0;return c}}function Sc(g,d,k){var e;return function(){var h=this,n=arguments;k&&!e&&d.apply(h,n);clearTimeout(e);e=setTimeout(function(){e=null;k||d.apply(h,n)},g)}}function Mc(g,d,k){var e=Nc._throttledByName;return e[g]?e[g]:e[g]=Nc.throttle(function(){Nc.debounceNamed(g,d,function(){delete e[g]})();return k.apply(this,arguments)},d)}function Ae(g,d,k,e){var h=Nc._debouncedByName;
return h[g]?h[g]:h[g]=Nc.debounce(d,function(){delete h[g];return k.apply(this,arguments)},e)}function rf(g,d){var k=Nc._queues,e=k[g]||(k[g]={_workerActive:!1,worker:d,tasks:[],drain:null,push:function(h){e.tasks.push(h);e._workerActive||e.activateWorker()},pushAll:function(h){h.forEach(function(n){e.tasks.push(n)});e._workerActive||e.activateWorker()},pushNoActivate:function(h){e.tasks.push(h)},handleError:function(h){h&&console.error("Error in queue: "+h)},activateWorker:function(){function h(c){e.handleError(c);
e.activateWorker()}var n=e.tasks,b=e._workerActive;if(0===n.length)b&&(e._workerActive=!1,"function"===typeof e.drain&&e.drain()),delete k[g];else{b||(e._workerActive=!0);try{e.worker(n.shift(),h)}catch(c){h(c)}}}});return e}function Ze(g,d,k){function e(){a&&clearTimeout(a);c=!0;delete n[g]}function h(f){c||(e(),b.callbacks.forEach(function(m){try{m.apply(null,f)}catch(q){console.error("Error when invoking callbacks in queueUntil ["+g+"]:\n"+String(q.stack||q))}}))}var n=Nc._queueUntilCallbacks,
b=n[g];if(b)return b;var c=!1,l=!1;if(k)var a=setTimeout(function(){c||h([Error("timeout")])},k);b=n[g]={callbacks:[],cancel:function(){l=!0;e()},whenDone:function(f){b.callbacks.push(f);return b}};setTimeout(function(){if(!l)try{d(function(){h(arguments)})}catch(f){h([f])}},0);return b}function Eg(){var g=Array.prototype.slice,d=g.call(arguments),k=Nc._composeAsyncDefaultEndCallback,e=k,h,n,b=new Promise(function(c,l){h=c;n=l});return d.reverse().reduce(function(c,l,a){var f=!1;return function(){function m(){f=
!0;var u=g.call(arguments),v=u.shift();v?(e(v),n(v)):c.apply(null,u)}var q=g.call(arguments);if(e===k&&a===d.length-1){for(;q.length&&"function"!==typeof q[q.length-1];)q.pop();"function"===typeof q[q.length-1]&&(e=q.pop())}if("function"===typeof l)try{var r=l.apply(this,q.concat([m]));r&&"function"===typeof r.then&&"function"===typeof r.catch&&r.then(function(u){return m(null,u)}).catch(function(u){return m(u)})}catch(u){console.error("composeAsync: ",u.stack||u),f||(e(u),n(u))}else l&&"function"===
typeof l.then&&"function"===typeof l.catch?l.then(function(u){m(null,u)}).catch(function(u){m(u)}):(q=Error("Invalid argument to composeAsync: "+l),e(q),n(q));return b}},function(){var c=g.call(arguments);e.apply(null,[null].concat(c));h(c[0])})}function He(){return Array.prototype.slice.call(arguments).reverse().reduce(function(g,d){return function(){return g(d.apply(this,arguments))}},function(g){return g})}function Cg(g){return function(){var d=Array.prototype.slice.call(arguments);d=[d[1],d[0]].concat(d.slice(2));
return g.apply(null,d)}}function Ji(g){g=g||function(){};return function(){var d=Nc.arr.from(arguments);g.apply(null,[null].concat(d))}}function Pg(g,d,k){var e=Date.now(),h=50;k||(k=d,d=g,g=void 0);(function b(){if(d())return k();if(g){var c=Date.now()-e;c=g-c;if(0>=c)return k(Error("timeout"));c<h&&(h=c)}setTimeout(b,h)})()}function ek(g,d,k){function e(b,c,l,a){if(n.length){var f=null;b=n.indexOf(b);-1<b&&n.splice(b,1);l?(n.length=0,f=Error("in waitForAll at"+("number"===typeof c?" "+c:"")+": \n"+
(l.stack||String(l)))):a&&(h[c]=a);n.length||setTimeout(function(){k(f,h)},0)}}k||(k=d,d=g,g=null);g=g||{};var h=d.map(function(){return null});if(d.length){var n=Array.prototype.slice.call(d);d.forEach(function(b,c){try{b(function(){var l=Array.prototype.slice.call(arguments),a=l.shift();e(b,c,a,l)})}catch(l){e(b,c,l,null)}});g.timeout&&setTimeout(function(){if(n.length){var b=h.map(function(c,l){return null===c&&l}).filter(function(c){return"number"===typeof c}).join(", ");e(null,null,Error("waitForAll timed out, functions at "+
b+" not done"),null)}},g.timeout)}else k(null,h)}function Cf(g,d,k,e){function h(){return g.apply(this,n.concat(Array.prototype.slice.call(arguments)))}if(1>=arguments.length)return arguments[0];var n=Array.prototype.slice.call(arguments);g=n.shift();h.isWrapper=!0;h.originalFunction=g;return h}function Ai(g,d){var k=function(){var e=Array.prototype.slice.call(arguments);e=d.isWrapper?e:[g.bind(this)].concat(e);return d.apply(this,e)};k.isWrapper=!0;k.originalFunction=g;return k}function Eh(g){for(;g.originalFunction;)g=
g.originalFunction;return g}function hj(g){var d=[];do d.push(g),g=g.originalFunction;while(g);return d}function zj(g,d,k){k.originalFunction=g[d];var e=g.hasOwnProperty(d);g[d]=function(){e?g[d]=k.originalFunction:delete g[d];return k.apply(this,arguments)};return g}function yj(g){if(g){if("function"!==typeof g)throw Error("once() expecting a function");var d=!1,k;return function(){if(d)return k;d=!0;return k=g.apply(this,arguments)}}}function bl(){var g=!1;return Array.prototype.slice.call(arguments).map(function(d){return function(){if(!g)return g=
!0,d.apply(this,arguments)}})}function cl(g,d){var k=Array.prototype.slice.call(arguments),e=Nc._eitherNameRegistry;g=k.shift();var h=e[g]||(e[g]={wasCalled:!1,callsLeft:0});h.callsLeft++;return function(){h.callsLeft--;0>=h.callsLeft&&delete e[g];if(!h.wasCalled)return h.wasCalled=!0,d.apply(this,arguments)}}function Rj(g){return eval(g)}function Tj(g){return Nc.evalJS("("+g.toString()+");")}function Fh(g,d){return Nc.Closure.fromFunction(g,d).recreateFunc()}function im(g,d,k,e){var h=k||g.name;
if(!h)throw Error("Function that wants to be a script needs a name: "+this);k=Object.getPrototypeOf(d);var n={this:d};e&&(n=Nc.objectMerge([n,e]));k&&k[h]&&(n.$super=Nc.Closure.fromFunction(function(){try{return Object.getPrototypeOf(d)[h].apply(d,arguments)}catch(b){return"undefined"!==typeof $world?$world.logError(b,"Error in $super call"):console.error("Error in $super call: "+b+"\n"+b.stack),null}},{obj:d,name:h}).recreateFunc());return Nc.addToObject(Nc.asScript(g,n),d,h)}function Ne(g,d,k){g.displayName=
k;var e=d.attributeConnections?d.attributeConnections.filter(function(h){return"update"===h.getSourceAttrName()}):[];e&&e.forEach(function(h){h.disconnect()});d[k]=g;typeof d&&(g.declaredObject=Nc.safeToString(d));"undefined"!==typeof lively&&d&&lively.Tracing&&lively.Tracing.stackTracingEnabled&&lively.Tracing.instrumentMethod(d,k,{declaredObject:Nc.safeToString(d)});e&&e.forEach(function(h){h.connect()});return g}function Em(g,d){return Nc.Closure.fromFunction(g,d||{}).recreateFunc()}function Hb(g,
d,k){g.hasLivelyClosure&&(g.livelyClosure.funcProperties[d]=k)}function Kb(g){return g.hasLivelyClosure?g.livelyClosure.varMapping:g.isWrapper?g.originalFunction.varMapping:g.varMapping?g.varMapping:{}}function Gd(g,d,k){g[d]=k;g.hasLivelyClosure&&(g.livelyClosure.funcProperties[d]=k)}function Ad(g){for(var d=[],k=g.prototype;k;)d=Object.keys(k).reduce(function(e,h){"function"===typeof k[h]&&-1===e.indexOf(h)&&e.push(h);return e},d),k=Object.getPrototypeOf(k);return d}function sf(g){return Object.keys(g.prototype).filter(function(d){return"function"===
typeof g.prototype[d]})}function Tf(g,d){var k=function(e){var h=Array.prototype.slice.call(arguments);h.shift();try{return e.apply(g,h)}catch(n){if("undefined"!==typeof lively&&lively.morphic&&lively.morphic.World&&lively.morphic.World.current())throw lively.morphic.World.current().logError(n),n;d?console.warn("ERROR: %s.%s(%s): err: %s %s",g,d,h,n,n.stack||""):console.warn("ERROR: %s %s",n,n.stack||"");throw n;}};k.methodName="$logErrorsAdvice";k=Nc.wrap(g,k);k.originalFunction=g;k.methodName="$logErrorsWrapper";
return k}function qi(g,d){var k=function(e){var h=Array.prototype.slice.call(arguments);h.shift();try{var n=e.apply(g,h)}catch(b){throw console.warn("failed to load "+d+": "+b),"undefined"!==typeof lively&&lively.lang.Execution&&lively.lang.Execution.showStack(),b;}console.log("completed "+d);return n};k.methodName="$logCompletionAdvice::"+d;k=Nc.wrap(g,k);k.methodName="$logCompletionWrapper::"+d;k.originalFunction=g;return k}function Fl(g,d){var k=function(h){var n=Array.prototype.slice.call(arguments);
n.shift();e=h.apply(g,n);d?console.warn("%s(%s) -> %s",Nc.qualifiedMethodName(g),n,e):console.log("%s(%s) -> %s",Nc.qualifiedMethodName(g),n,e);return e};k.methodName="$logCallsAdvice::"+Nc.qualifiedMethodName(g);var e=Nc.wrap(g,k);e.originalFunction=g;e.methodName="$logCallsWrapper::"+Nc.qualifiedMethodName(g);return e}function zp(g,d){return Nc.wrap(g,function(k){var e=Array.prototype.slice.call(arguments);e.shift();d.push(e);e=k.apply(g,e);d.pop();return e})}function Ap(){try{throw Error();}catch(g){return String(g.stack).split(/\n/).slice(2).map(function(d){return d.replace(/^\s*at\s*([^\s]+).*/,
"$1")}).join("\n")}}function Iq(g){if(g&&Array.isArray(g))return"["+g.map(Iq)+"]";if("string"!==typeof g)return String(g);g=String(g);g=g.replace(/\n/g,"\\n\\\n");g=g.replace(/(")/g,"\\$1");return'"'+g+'"'}function Ki(g){return Array.isArray(g)}function Cm(g){return g&&1==g.nodeType}function gm(g){return g instanceof Function}function hm(g){return"boolean"===typeof g}function yo(g){return"string"===typeof g}function Kn(g){return"number"===typeof g}function jn(g){return"undefined"===typeof g}function Ln(g){return g instanceof
RegExp}function Bk(g){return"object"===typeof g}function ck(g){if(!g)return!0;switch(typeof g){case "string":case "number":case "boolean":return!0}return!1}function dk(g){for(var d in g)if(g.hasOwnProperty(d))return!1;return!0}function dl(g,d){if(g===d)return!0;if(!g||!d)return g==d;if(Array.isArray(g))return yd.arrayDeepEquals(g,d);switch(g.constructor){case String:case Date:case Boolean:case Number:return g==d}if("function"===typeof g.isEqualNode)return g.isEqualNode(d);if("function"===typeof g.equals)return g.equals(d);
var k=[],e;for(e in g)if(k.push(e),"function"!==typeof g[e]&&!dl(g[e],d[e]))return!1;for(e in d)if(-1===k.indexOf(e)&&"function"!==typeof d[e]&&!dl(d[e],g[e]))return!1;return!0}function Sj(g){return g?Object.keys(g).map(function(d){return g[d]}):[]}function rk(g,d){for(var k={},e=0;e<d.length;e++)k[d[e]]=g[d[e]];return k}function kn(g,d){g=g||{};g=yd.getOwnPropertyDescriptors(g);for(var k=0;k<d.length;k++)d[k]in g&&delete g[d[k]];return Object.defineProperties({},g)}function el(g,d,k,e){d=yd.functionFromString(d);
return yd.asScriptOf(d,g,k,e)}function fl(g,d){for(var k=null,e=1;e<arguments.length;e++)if("string"===typeof arguments[e])k=arguments[e],g.categories||(g.categories={}),g.categories[k]||(g.categories[k]=[]),k=g.categories[k];else{d=arguments[e];for(var h in d){var n=d.__lookupGetter__(h),b=d.__lookupSetter__(h);n&&g.__defineGetter__(h,n);b&&g.__defineSetter__(h,b);n||b||(n=d[h],g[h]=n,k&&k.push(h),"function"===typeof n&&(n.displayName||(n.displayName=h),"undefined"!==typeof lively&&lively.Module&&
lively.Module.current&&(n.sourceModule=lively.Module.current())))}}return g}function Ck(g){if(yd.isPrimitive(g))return g;if(Array.isArray(g))return Array.prototype.slice.call(g);var d={},k;for(k in g)g.hasOwnProperty(k)&&(d[k]=g[k]);return d}function Ak(g,d,k){for(var e={},h=0;h<d.length;h++)d[h]in g&&(e[d[h]]=k?k(d[h],g[d[h]]):g[d[h]]);return e}function Yf(g,d,k){d=d||{};k=k||0;if(d.customPrinter){var e=d._ignoreSignal||(d._ignoreSignal={}),h=d.customPrinter(g,e,function(q){return Yf(q,d,k+1)});
if(h!==e)return h}if(!g)return yd.print(g);if("function"===typeof g)return d.printFunctionSource?String(g):"function"+(g.name?" "+g.name:"")+"("+yd.argumentNames(g).join(",")+") {/*...*/}";switch(g.constructor){case String:case Boolean:case RegExp:case Number:return yd.print(g)}if("function"===typeof g.serializeExpr)return g.serializeExpr();var n=g&&Array.isArray(g);e=n?"[":"{";h=n?"]":"}";if(d.maxDepth&&k>=d.maxDepth)return e+"/*...*/"+h;var b=[];if(n)b=g.map(function(q){return Yf(q,d,k+1)});else for(var c=
Object.keys(g).sort(function(q,r){var u="function"===typeof g[q];return u===("function"===typeof g[r])?q<r?-1:q>r?1:0:u?1:-1}),l=0;l<c.length;l++){if(l>(d.maxNumberOfKeys||Infinity)){c=c.length-l;b.push("..."+c+" hidden "+(1<c?"entries":"entry")+"...");break}var a=c[l];n&&Yf(g[a],d,k+1);var f=Yf(g[a],d,k+1);b.push((d.escapeKeys?JSON.stringify(a):a)+": "+f)}if(0===b.length)return e+h;c=b.join(", ");l=(!n||d.newLineInArrays)&&(!d.minLengthForNewLine||c.length>=d.minLengthForNewLine);var m=yd.indent("",
d.indent||"  ",k);a=yd.indent("",d.indent||"  ",k+1);f=l&&!n?"\n"+a:"";n=l&&!n?"\n"+m:"";l&&(c=b.join(","+(l?"\n"+a:"")));return e+f+c+n+h}function Ti(g){return 1<arguments.length?Ti(Array.prototype.slice.call(arguments)):Array.isArray(g[0])?Array.prototype.concat.apply([],g):g.reduce(function(d,k){for(var e in k)k.hasOwnProperty(e)&&(d[e]=k[e]);return d},{})}function Dm(g,d){if(!g)return d;if(!d)return g;if(Array.isArray(g)){if(!Array.isArray(d))return d;var k=g.map(function(e,h){return Dm(e,d[h])});
d.length>g.length&&(k=k.concat(d.slice(g.length)));return k}return"object"!==typeof g||"object"!==typeof d?d:Object.keys(g).concat(Object.keys(d)).reduce(function(e,h){e[h]=g[h]?d[h]?"object"!==typeof g[h]||"object"!==typeof d[h]?d[h]:Dm(g[h],d[h]):g[h]:d[h];return e},{})}function mn(g,d){d=[];for(var k in g){var e=g[k],h=e.hasOwnProperty("before")?e.before:e.before=[];e=e.hasOwnProperty("after")?e.after:e.after=[];for(var n=h.length;n--;){var b=h[n],c=g[b];c?(c.hasOwnProperty("after")||(c.after=
[]),c.after.push(k)):(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(k+" requires to be initialized before "+b+" but that property cannot be found.")),h.splice(n,1))}for(h=e.length;h--;)n=e[h],g[n]||(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(k+" requires to be initialized after "+n+" but that property cannot be found.")),e.splice(h,1));d.push(k)}k=[];e=[];for(h=d.length+1;d.length;){if(h===d.length)throw Error("Circular dependencies in handler order, could not resolve properties "+
d.map(function(l){var a=g[l].before,f=g[l].after;if(!(a&&a.length||f&&f.length))return"";l+="\n";a&&a.length&&(l+="  - before "+a.join(",")+"\n");f&&f.length&&(l+="  - after "+f.join(",")+"\n");return l}).join(""));h=d.length;n=[];for(b=d.length;b--;)c=d[b],yd.isSubset(g[c].after,e)&&(d.splice(b,1),e.push(c),n.push(c));k.push(n)}return yd.flatten(k,1)}function Pn(g){return Object.create(g)}function Nn(g,d){for(var k=[];g;)g.hasOwnProperty(d)&&k.unshift(g[d]),g=Object.getPrototypeOf(g);return k}function zo(g,
d){return yd.merge(yd.valuesInPropertyHierarchy(g,d))}function On(g){if(!g||"object"!==typeof g||g instanceof RegExp)return g;var d=Array.isArray(g)?Array(g.length):{},k;for(k in g)g.hasOwnProperty(k)&&(d[k]=On(g[k]));return d}function Gl(g){return null===g?"null":"undefined"===typeof g?"undefined":g.constructor.name}function Ao(g){function d(e,h,n,b){if(e.constructor.name===h){k+=n;if(e.length||Object.keys(e).length)k+="...";k+=b}}if(!yd.isMutableType(g))return yd.safeToString(g);if("Object"!==g.constructor.name&&
!Array.isArray(g)&&g.constructor.name)return g.constructor.name?g.constructor.name:Object.prototype.toString.call(g).split(" ")[1].split("]")[0];var k="";d(g,"Object","{","}");d(g,"Array","[","]");return k}function Mn(g){return-1===["null","undefined","Boolean","Number","String"].indexOf(yd.typeStringOf(g))}function Dk(g){try{return(g?g.toString():String(g)).replace("\n","")}catch(d){return"<error printing object>"}}function js(g){switch(typeof g){case "string":return new String(g);case "boolean":return new Boolean(g);
case "number":return new Number(g);default:return g}}function Fm(g,d){d=void 0===d?"_":d;var k=1;do var e=d+"-"+k++;while(e in g);return e}function nn(){return sc.formatFromArray(Array.prototype.slice.call(arguments))}function ln(g){function d(q,r){return""+q}function k(q,r){return q.toString()}function e(q,r){return sc.inspectObject(q)}var h=g.shift();h||console.log("Error in Strings>>formatFromArray, first arg is undefined");var n={s:d,d:k,i:k,f:function(q,r,u){return-1<u?q.toFixed(u):q.toString()},
o:e},b=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/;h=function(q){for(var r=[],u=b.exec(q);u;u=b.exec(q)){var v=u[8]||u[5];v=v in n?n[v]:e;var y=u[3]?parseInt(u[3]):"."==u[4]?-1:0;r.push(q.substr(0,"%"==u[0][0]?u.index:u.index+1));r.push({appender:v,precision:y});q=q.substr(u.index+u[0].length)}q&&r.push(q.toString());return r}(h);for(var c="",l=0,a=0;a<h.length;++a){var f=h[a];if(f&&"object"==typeof f){var m=g[l++];c+=(f.appender||d)(m,c,f.precision)}else c+=""+f}return c}function Bm(g,
d,k){if(!k||0>=k)return g;for(var e="";0<k;)k--,e+=d;return sc.lines(g).map(function(h){return e+h}).join("\n")}function gl(g,d){d||(d="  ");return sc.min(g.match(new RegExp("^("+d+")*","gm")).map(function(k){return Math.floor(k.length/d.length)}))}function Gm(g,d,k){d||(d="  ");k||(k=0);var e=sc.minIndent(g,d);if(e===k)return g;if(e<k)return sc.indent(g,d,k-e);var h=d.repeat(e-k);return sc.lines(g).map(function(n){return n.slice(h.length)}).join("\n")}function Ek(g){return'"'+g.replace(/"/g,'\\"')+
'"'}function Nf(g){if(g&&Array.isArray(g))return"["+g.map(Nf)+"]";if("string"!==typeof g)return String(g);g=String(g);g=g.replace(/\n/g,"\\n\\\n");g=g.replace(/(")/g,"\\$1");return'"'+g+'"'}function sa(g,d){d=d||0;return g.reduce(function(k,e){return k+(Array.isArray(e)?sa(e,d+1):sc.indent(e+"\n","  ",d))},"")}function za(g,d,k){return k?" ".repeat(d)+g:g+" ".repeat(d)}function ib(g,d){function k(c){return n?!1:b?!0:d&&Array.isArray(d.align)&&"right"===d.align[c]}var e=[],h=d&&d.separator||" ",n=
!d||!d.align||"left"===d.align,b=d&&"right"===d.align;g.forEach(function(c){c.forEach(function(l,a){void 0===e[a]&&(e[a]=0);e[a]=Math.max(e[a],String(l).length)})});return g.map(function(c){return c.map(function(l,a){l=String(l);return sc.pad(l,e[a]-l.length,k(a))}).join(h)}).join("\n")}function Ra(g,d,k,e){function h(b,c,l){n[c]=e.repeat(b)+d(l,b);l=k(l,b);var a=c+1;if(!l||!l.length)return a;var f=a,m=l.length-1;l.forEach(function(q,r){a=h(b+1,a,q);q=m===r;var u=n[f].split(""),v=b*e.length+e.length;
for(r=b*e.length+1;r<v;r++)u[r]="-";q&&(u[b*e.length]="\\");n[f]=u.join("");q||n.slice(f,a).forEach(function(y,z){y=y.split("");y[b*e.length]="|";n[f+z]=y.join("")});f=a});return a}var n=[];e=e||"  ";h(0,0,g);return n.join("\n")}function Sb(g){return g.split("")}function Pb(g){return g.split(/\n\r?/)}function dc(g,d){var k=d?d.sep:"\n\n";return d&&d.keepEmptyLines?g.split("\n").concat("").reduce(function(e,h){var n=e[0];e=e[1];/^\s*$/.test(e)===/^\s*$/.test(h)?e+="\n"+h:(e.length&&n.push(e),e=h);
return[n,e]},[[],""])[0]:g.split(new RegExp(k+"+"))}function hc(g){return sc.lines(g).compact()}function Xc(g,d){return g.split(d||/\s+/).filter(function(k){return!/^\s*$/.test(k)})}function Qe(g,d){d=d||{};var k=d.cellSplitter||/\s+/,e=/^\s*$/;d=d.hasOwnProperty("convertTypes")?!!d.convertTypes:!0;g=sc.lines(g);for(var h=[],n=0;n<g.length;n++){var b=sc.tokens(g[n],k);d&&(b=b.map(function(c){if(c.match(e))return c;var l=Number(c);if(!isNaN(l))return l;l=new Date(c);return isNaN(+l)?c.trim():l}));
0<b.length&&h.push(b)}return h}function Ue(g){if("undefined"===typeof document)throw Error("Cannot unescapeCharacterEntities");var d=document.createElement("div");d.innerHTML=g;return d.textContent}function Dg(g,d){return(g=g.trim().match(/([^?#]*)(#.*)?$/))?g[1].split(d||"&").inject({},function(k,e){if((e=e.split("="))[0]){var h=decodeURIComponent(e.shift());e=1<e.length?e.join("="):e[0];void 0!=e&&(e=decodeURIComponent(e));h in k?(Array.isArray(k[h])||(k[h]=[k[h]]),k[h].push(e)):k[h]=e}return k}):
{}}function zf(g){return btoa(encodeURIComponent(g).replace(/%([0-9A-F]{2})/g,function(d,k){return String.fromCharCode("0x"+k)}))}function Vg(g){return decodeURIComponent(atob(g).split("").map(function(d){return"%"+("00"+d.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function ej(g){var d=g.match(sc.urlStartRe),k=(d=d?d[0]:null)?g.slice(d.length):g;do g=k,k=g.replace(sc.pathDoubleDotRe,"");while(k!=g);k=k.replace(sc.pathDoubleSlashRe,"$1/");k=k.replace(sc.pathDotRe,"/");d&&(k=d+k);return k}function Jj(){return sc.normalizePath(Array.prototype.slice.call(arguments).reduce(function(g,
d){return"string"===typeof d?g.replace(/\/*$/,"")+"/"+d.replace(/^\/*/,""):g}))}function zk(){return sc.newUUIDTemplate.replace(sc.newUUIDRe,sc.newUUIDReplacer).toUpperCase()}function Jq(g,d){return"data:"+(d||"text/plain")+";base64,"+sc.base64EncodeUnicode(g)}function Nt(g){var d=0,k=g.length;if(0==k)return d;for(var e=0;e<k;e++){var h=g.charCodeAt(e);d=(d<<5)-d+h;d&=d}return d}function Bo(g){function d(l,a,f,m,q,r){a=b(b(a,l),b(m,r));return b(a<<q|a>>>32-q,f)}function k(l,a,f,m,q,r,u){return d(a&
f|~a&m,l,a,q,r,u)}function e(l,a,f,m,q,r,u){return d(a&m|f&~m,l,a,q,r,u)}function h(l,a,f,m,q,r,u){return d(f^(a|~m),l,a,q,r,u)}function n(l,a){var f=l[0],m=l[1],q=l[2],r=l[3];f=k(f,m,q,r,a[0],7,-680876936);r=k(r,f,m,q,a[1],12,-389564586);q=k(q,r,f,m,a[2],17,606105819);m=k(m,q,r,f,a[3],22,-1044525330);f=k(f,m,q,r,a[4],7,-176418897);r=k(r,f,m,q,a[5],12,1200080426);q=k(q,r,f,m,a[6],17,-1473231341);m=k(m,q,r,f,a[7],22,-45705983);f=k(f,m,q,r,a[8],7,1770035416);r=k(r,f,m,q,a[9],12,-1958414417);q=k(q,r,
f,m,a[10],17,-42063);m=k(m,q,r,f,a[11],22,-1990404162);f=k(f,m,q,r,a[12],7,1804603682);r=k(r,f,m,q,a[13],12,-40341101);q=k(q,r,f,m,a[14],17,-1502002290);m=k(m,q,r,f,a[15],22,1236535329);f=e(f,m,q,r,a[1],5,-165796510);r=e(r,f,m,q,a[6],9,-1069501632);q=e(q,r,f,m,a[11],14,643717713);m=e(m,q,r,f,a[0],20,-373897302);f=e(f,m,q,r,a[5],5,-701558691);r=e(r,f,m,q,a[10],9,38016083);q=e(q,r,f,m,a[15],14,-660478335);m=e(m,q,r,f,a[4],20,-405537848);f=e(f,m,q,r,a[9],5,568446438);r=e(r,f,m,q,a[14],9,-1019803690);
q=e(q,r,f,m,a[3],14,-187363961);m=e(m,q,r,f,a[8],20,1163531501);f=e(f,m,q,r,a[13],5,-1444681467);r=e(r,f,m,q,a[2],9,-51403784);q=e(q,r,f,m,a[7],14,1735328473);m=e(m,q,r,f,a[12],20,-1926607734);f=d(m^q^r,f,m,a[5],4,-378558);r=d(f^m^q,r,f,a[8],11,-2022574463);q=d(r^f^m,q,r,a[11],16,1839030562);m=d(q^r^f,m,q,a[14],23,-35309556);f=d(m^q^r,f,m,a[1],4,-1530992060);r=d(f^m^q,r,f,a[4],11,1272893353);q=d(r^f^m,q,r,a[7],16,-155497632);m=d(q^r^f,m,q,a[10],23,-1094730640);f=d(m^q^r,f,m,a[13],4,681279174);r=d(f^
m^q,r,f,a[0],11,-358537222);q=d(r^f^m,q,r,a[3],16,-722521979);m=d(q^r^f,m,q,a[6],23,76029189);f=d(m^q^r,f,m,a[9],4,-640364487);r=d(f^m^q,r,f,a[12],11,-421815835);q=d(r^f^m,q,r,a[15],16,530742520);m=d(q^r^f,m,q,a[2],23,-995338651);f=h(f,m,q,r,a[0],6,-198630844);r=h(r,f,m,q,a[7],10,1126891415);q=h(q,r,f,m,a[14],15,-1416354905);m=h(m,q,r,f,a[5],21,-57434055);f=h(f,m,q,r,a[12],6,1700485571);r=h(r,f,m,q,a[3],10,-1894986606);q=h(q,r,f,m,a[10],15,-1051523);m=h(m,q,r,f,a[1],21,-2054922799);f=h(f,m,q,r,a[8],
6,1873313359);r=h(r,f,m,q,a[15],10,-30611744);q=h(q,r,f,m,a[6],15,-1560198380);m=h(m,q,r,f,a[13],21,1309151649);f=h(f,m,q,r,a[4],6,-145523070);r=h(r,f,m,q,a[11],10,-1120210379);q=h(q,r,f,m,a[2],15,718787259);m=h(m,q,r,f,a[9],21,-343485551);l[0]=b(f,l[0]);l[1]=b(m,l[1]);l[2]=b(q,l[2]);l[3]=b(r,l[3])}var b=function(l,a){var f=(l&65535)+(a&65535);return(l>>16)+(a>>16)+(f>>16)<<16|f&65535},c="0123456789abcdef".split("");return function(l){for(var a=l.length,f=0;f<a;f++){for(var m=f,q=l[f],r="",u=0;4>
u;u++)r+=c[q>>8*u+4&15]+c[q>>8*u&15];l[m]=r}return l.join("")}(function(l){var a=l.length,f=[1732584193,-271733879,-1732584194,271733878],m;for(m=64;m<=a;m+=64){var q,r=l.substring(m-64,m),u=[];for(q=0;64>q;q+=4)u[q>>2]=r.charCodeAt(q)+(r.charCodeAt(q+1)<<8)+(r.charCodeAt(q+2)<<16)+(r.charCodeAt(q+3)<<24);n(f,u)}l=l.substring(m-64);q=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];r=l.length;for(m=0;m<r;m++)q[m>>2]|=l.charCodeAt(m)<<(m%4<<3);q[m>>2]|=128<<(m%4<<3);if(55<m)for(n(f,q),m=16;m--;)q[m]=0;q[14]=8*a;
n(f,q);return f}(g))}function ks(g,d){var k=[];g.replace(d,function(e,h){k.push({match:e,start:h,end:h+e.length})});return k}function Qn(g,d,k){function e(b,c){if(c.constructor!==RegExp){if(0===b.indexOf(c))return{match:c,rest:b.slice(c.length)};for(var l=0;l<c.length;l++)if(c[l]!=b[l])return{match:null,pos:l};return{match:null}}return(c=sc.reMatches(b,c))&&c.length&&0===c[0].start?{match:c[0].match,rest:b.slice(c[0].end)}:{match:null}}function h(b){var c=sc.reMatches(b,/__\//g),l=sc.reMatches(b,
/\/__/g);if(c.length!==l.length)throw Error("pattern invalid: "+b+" cannot be split into __/.../__ embedded RegExps\nstarts: "+JSON.stringify(c)+"\nvs ends:\n"+JSON.stringify(l));var a=0;return c.reduce(function(f,m,q){var r=l[q];q=f.pop();m=m.start-a;r=r.end-a;var u;var v=u=3;q=[q.slice(0,m),q.slice(m+u,r-v),q.slice(r)];q[0].length&&(f.push(q[0]),a+=q[0].length);try{q[1].length&&(f.push(new RegExp(q[1])),a+=q[1].length+3+3)}catch(y){throw Error("Cannot create pattern re from: "+sc.inspectObject(q));
}q[2].length&&f.push(q[2]);return f},[b])}function n(b,c){c=h(c);a:{for(var l=b,a=0,f=0;f<c.length;f++){var m=c[f];l=e(l,m);if(!l.match){c={matched:!1,pos:a+(l.pos||0),pattern:m};break a}a+=l.match.length;l=l.rest}c=l.length?{matched:!1,pos:a}:{matched:!0}}if(c.matched)return c;c.error=b.slice(0,c.pos)+"<--UNMATCHED--\x3e"+b.slice(c.pos);return c}k=k||{};k.normalizeWhiteSpace&&(g=g.replace(/\s+/g," "));k.ignoreIndent&&(g=g.replace(/^\s+/gm,""),d=d.replace(/^\s+/gm,""));return g==d?{matched:!0}:n(g,
d)}function Ot(g,d,k){g=g.slice(d);return"string"===typeof k?(g=g.indexOf(k),-1===g?null:g+d):k.constructor===RegExp?(d=sc.reMatches(g,k),d[0]?d[0].start:null):null}function Pt(g,d,k){g=g.slice(0,d);return"string"===typeof k?(g=g.lastIndexOf(k),-1===g?null:g):k.constructor===RegExp?(g=sc.reMatches(g,k),sc.last(g)?sc.last(g).start:null):null}function uv(g){var d=sc.lineRanges(g);return function(k){for(var e=0;e<d.length;e++){var h=d[e];if(k>=h[0]&&k<h[1])return e}return-1}}function vv(g){return function(d){return sc.lineRanges(g)[d]}}
function wv(g){for(var d=0,k=sc.lines(g),e=[],h=0;h<k.length;h++)g=d+k[h].length+1,e.push([d,g]),d=g;return e}function Qt(g,d){var k=g.length;if(0===k)return-1;for(var e=0;;){var h=e+Math.floor((k-e)/2),n=$jscomp.makeIterator(g[h]),b=n.next().value;n=n.next().value;if(d<b){if(0===h)break;k=h}else if(d>n)e=h;else return h}return-1}function Rt(g,d,k){k=void 0===k?0:k;g=this.substring(k||0).search(d);return 0<=g?g+(k||0):g}function ls(g,d,k){k=void 0===k?g.length:k;d=d.global?d:new RegExp(d.source,"g"+
(d.ignoreCase?"i":"")+(d.multiLine?"m":""));g=this.substring(0,k+1);k=-1;for(var e=0,h;null!=(h=d.exec(g));)k=h.index,d.lastIndex=++e;return k}function St(g,d){return"undefined"===typeof JsDiff?"diff not supported":JsDiff.convertChangesToXML(JsDiff.diffWordsWithSpace(g,d))}function Tt(g){return""==g}function Co(g){g=g[0];return"A"===g||"E"===g||"I"===g||"O"===g||"U"===g||"a"===g||"e"===g||"i"===g||"o"===g||"u"===g||!1}function Rn(g,d){var k=parseFloat(g);return isNaN(k)?g:k.toFixed(d)}function ms(g){return g.length?
g.charAt(0).toUpperCase()+g.slice(1):g}function Kq(g){return g.split(" ").map(sc.capitalize).join("")}function Lq(g){var d=g.split("-"),k=d.length;if(1==k)return d[0];g="-"==g.charAt(0)?d[0].charAt(0).toUpperCase()+d[0].substring(1):d[0];for(var e=1;e<k;e++)g+=d[e].charAt(0).toUpperCase()+d[e].substring(1);return g}function Sn(g,d,k){d=d||30;k=void 0===k?"...":k;return g.length>d?g.slice(0,d-k.length)+k:String(g)}function Fk(g,d,k){d=d||30;return g.length>d?(void 0===k?"...":k)+g.slice(-d):String(g)}
function Mq(g){return g.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function Do(g){return g.slice(0,g.length-1)+String.fromCharCode(g.charCodeAt(g.length-1)+1)}function Bp(g){return g.charCodeAt(0)-48}function Ut(g,d){for(var k=[],e=0;e<g.length;e++){k[e]=[];for(var h=0;h<d.length;h++)k[e][h]=0}for(e=0;e<g.length;e++)k[e][0]=0;for(e=1;e<g.length;e++)for(h=1;h<d.length;h++)k[e][h]=g[e-1]==d[h-1]?k[e-1][h-1]+1:0;for(var n=h=e=-1,b=0;b<g.length;b++)for(var c=0;c<d.length;c++){var l=
k[b][c];e<l&&(e=l,h=b-l,n=c-l)}return{length:e,indexA:h,indexB:n,string:0<e?g.slice(h,h+e):""}}function Vt(g,d){return"insert"===d.action?g.slice(0,d.start)+d.lines.join("\n")+g.slice(d.start):"remove"===d.action?g.slice(0,d.start)+g.slice(d.end):g}function ns(g,d){return d.reduce(function(k,e){return sc.applyChange(g,e)},g)}function os(g,d){if(0===g.length)return d.length;if(0===d.length)return g.length;var k;if(g.length>d.length){var e=g;g=d;d=e}var h=Array(g.length+1);for(e=0;e<=g.length;e++)h[e]=
e;for(e=1;e<=d.length;e++){var n=e;for(k=1;k<=g.length;k++){var b=d[e-1]===g[k-1]?h[k-1]:Math.min(h[k-1]+1,Math.min(n+1,h[k]+1));h[k-1]=n;n=b}h[g.length]=n}return h[g.length]}function ps(g,d){g=g||0;return Math.round(Math.random()*((d||100)-g)+g)}function qs(g){return Math.floor(Math.random()*g)}function xv(g){if(1E3>g)return String(Math.round(100*g)/100)+"B";g/=1024;return 1E3>g?String(Math.round(100*g)/100)+"KB":String(Math.round(g/1024*100)/100)+"MB"}function yv(g){return g.reduce(function(d,k){return d+
k},0)/g.length}function zv(g,d,k){return(g-d)/k+d}function Wt(g){var d=g.sort(function(k,e){return e-k});g=g.length;return 0===g%2?.5*(d[g/2-1]+d[g/2]):d[(g-1)/2]}function Nq(g,d,k,e){e=e||0;if(d<k)var h=k;else h=d,d=k;return 0<=h-g+e&&0>=d-g-e}function Av(g,d,k){return Math.max(d,Math.min(k,g))}function rs(g){return g.sort(function(d,k){return d-k})}function Oq(g,d){d=d||"px";if((g=g.match(/([0-9\.]+)\s*(.*)/))&&g[1]){var k=parseFloat(g[1]);return xf.convertLength(k,g[2],d)}}function ss(g){if(!isFinite(g))return 0;
for(var d=1,k=0;Math.round(g*d)/d!==g;)d*=10,k++;return k}function Hm(g,d){d=1/d;return Math.round(g*d)/d}function Im(g,d,k,e){var h=xf.roundTo(g,k);return Math.abs(g-h)<d/2?h:e?g:h+(g-(g<h?h-d/2:h+d/2))*k/(k-d)}function sk(g){return 180*g/Math.PI%360}function Wg(g){return g/180*Math.PI}function Eo(g,d,k){d=void 0===d?5:d;k=void 0===k?3E4:k;g=Math.min(k,d*Math.pow(2,g));return Math.min(k,d+Math.random()*(3*(g/2+Math.round(g/2*Math.random()))-d))}function Tn(g,d,k){return d+g*(k-d)}function ts(g,d){var k=
[],e;for(e in g)(g.__lookupGetter__(e)||"function"!==typeof g[e])&&(d?d(e,g):1)&&k.push(e);return k}function Xt(g,d){return Object.getOwnPropertyNames(g).reduce(function(k,e){(d?d(g,e):1)&&k.push(e);return k},[])}function Cp(g){var d=[],k;for(k in g)g.hasOwnProperty(k)&&(g.__lookupGetter__(k)||"function"!==g[k])&&d.push(k);return d}function Yt(g,d,k){var e=[],h;for(h in g)if(g.hasOwnProperty(h)){var n=g[h];"function"!==n&&e.push(d.call(k||this,h,n))}return e}function Dp(g,d){for(var k in g)if(g[k]===
d)return k}function Ep(g){var d=[],k;for(k in g)d.push(g[k]);return d}function Zt(g){var d=[],k;for(k in g)g.hasOwnProperty(k)&&d.push(g[k]);return d}function $t(g,d){for(var k in g)if(d(g,k))return!0;return!1}function Bv(g,d){var k=[],e;for(e in g)(d?d(g,e):1)&&k.push(e);return k}function Un(g){return Object.keys(g).sort().join("").hashCode()}function Fp(g,d,k){return Vn.dateFormat(g,d,k)}function Fo(g,d){return d&&d instanceof Date&&d.getTime()===g.getTime()}function Pq(g,d,k){k=void 0===k?{}:k;
if(!(d instanceof Date)||d<g)return"";if(d===g)return"now";var e="min",h="sec",n="hour",b="day",c=Math.round((d-g)/1E3);g=c%60;d=Math.floor(c/60)%60;var l=Math.floor(c/60/60)%24;c=Math.floor(c/60/60/24);var a=[];0<c&&(a.push(c),1<c&&(b+="s"),a.push(b));if(k.forceHours||0<l&&2>c)a.push(l),1<l&&(n+="s"),a.push(n);if(k.forceMinutes||0<d&&3>l&&0===c)a.push(d),1<d&&(e+="s"),a.push(e);if(k.forceSeconds||0<g&&3>d&&0===l&&0===c)a.push(g),1<g&&(h+="s"),a.push(h);return a.join(" ")}function Kf(g){return"function"===
typeof g?Kf.convertCallbackFun(g):Promise.resolve(g)}function au(g,d){return new Promise(function(k){return setTimeout(k,g,d)})}function Qq(g,d){return new Promise(function(k,e){return setTimeout(e,g,d)})}function us(g,d){return new Promise(function(k,e){var h=!1;setTimeout(function(){return!h&&(h=!0)&&e(Error("Promise timed out"))},g);d.then(function(n){return!h&&(h=!0)&&k(n)},function(n){return!h&&(h=!0)&&e(n)})})}function vs(g){var d=Date.now();return Promise.resolve(g).then(function(){return Date.now()-
d})}function Cv(g,d,k){"function"===typeof g&&(d=g,g=void 0);return new Promise(function(e,h){var n=!1,b=!1,c,l,a=setInterval(function(){if(n)clearInterval(a),delete Af.waitForClosures[a];else{try{l=d()}catch(f){c=f}if(l||c||b)return n=!0,clearInterval(a),delete Af.waitForClosures[a],c?h(c):b?"undefined"===typeof k?h(Error("timeout")):e(k):e(l)}},10);Af.waitForClosures[a]=a;"number"===typeof g&&setTimeout(function(){return b=!0},g)})}function Dv(){var g,d,k=new Promise(function(e,h){g=e;d=h});return{resolve:g,
reject:d,promise:k}}function ws(g){return function(){var d=Array.from(arguments),k=this;return new Promise(function(e,h){d.push(function(n,b){return n?h(n):e(b)});g.apply(k,d)})}}function Go(g){return function(){var d=Array.from(arguments),k=this;return new Promise(function(e,h){d.push(function(){var n=Array.from(arguments),b=n.shift();return b?h(b):e(n)});g.apply(k,d)})}}function Ev(g,d,k,e,h){var n=g.shift();if(n)try{Promise.resolve(n(d,k)).then(function(b){return Ev(g,b,k,e,h)}).catch(function(b){h(b)})}catch(b){h(b)}else e(d)}
function bu(g){return new Promise(function(d,k){return Af._chainResolveNext(g.slice(),void 0,{},d,k)})}function Gp(g,d){return Promise.resolve(g).then(function(k){try{d()}catch(e){console.error("Error in promise finally: "+e.stack||e)}return k}).catch(function(k){try{d()}catch(e){console.error("Error in promise finally: "+e.stack||e)}throw k;})}function cu(g,d){function k(){d--;try{var f=b++;g[f]().then(function(m){d++;h[f]=m;0===--c?l():e()}).catch(function(m){return a(m)})}catch(m){a(m)}}function e(){for(;!n&&
0<c&&b<g.length&&0<d;)k()}d=void 0===d?Infinity:d;if(!g.length)return Promise.resolve([]);var h=[],n=null,b=0,c=g.length,l,a;return new Promise(function(f,m){l=function(){return f(h)};a=function(q){return m(n=q)};e()})}function Xg(g,d){if(g instanceof Xg)return g;if(!(this instanceof Xg))return new Xg(g,d);this.setSplitter(d||".");this.fromPath(g)}function Rq(g){var d={},k;for(k in g)d[k]=g[k].slice();return d}function xs(g,d){var k={},e;for(e in g)if(!d.includes(e)){k[e]=[];for(var h=g[e],n=0;n<
h.length;n++){var b=h[n];d.includes(b)||k[e].push(b)}}return k}function Fv(g,d,k,e){k=void 0===k?[]:k;e=void 0===e?Infinity:e;if(!Array.isArray(g[d]))return[];for(var h=[],n={},b={},c=0;c<k.length;c++)b[k[c]]=!0;d=g[d].slice();c={};for(var l=d.length;l--;){var a=d[l];a in b?d.splice(l,1):c[a]=1}if(k)for(;0!==d.length;)for(k=0;k<d.length;k++)if(a=d.shift(),!(a in n||a in b)&&(l=c[a]||0,!(l>e)&&(h.push(a),n[a]=!0,a=g[a])))for(var f=0;f<a.length;f++){var m=a[f];m in n||m in c||(c[m]=l+1,d.push(m))}return h}
function du(g,d,k,e){e=void 0===e?Infinity:e;k&&(g=ei.without(g,k));d=[d];k=0;for(var h={};d.length&&k++<e;){var n=d.shift();if(!h[n]){var b=g[n]||[];h[n]=b;d.push.apply(d,$jscomp.arrayFromIterable(b))}}return h}function eu(g){var d={},k;for(k in g)for(var e=g[k],h=0;h<e.length;h++){var n=e[h];d[n]?d[n].push(k):d[n]=[k]}return d}function Sq(g,d){d=[];var k={},e={},h={};for(f in g){k.hasOwnProperty(f)||(k[f]=!0,d.push(f));var n=g[f],b={};if(n){e[f]=[];n=$jscomp.makeIterator(n);for(var c=n.next();!c.done;c=
n.next())if(c=c.value,!b.hasOwnProperty(c)&&f!==c){var l=h[c]||(h[c]=[]);l.includes(f)||l.push(f);b[c]=!0;e[f].push(c);k.hasOwnProperty(c)||(k[c]=!0,d.push(c))}}}for(g=[];d.length;){k=Infinity;var a=[];b=[];n=[];for(c=0;c<d.length;c++){var f=d[c];l=e[f]||[];l.length>k||(l.length!==k||l.some(function(m){return a.includes(m)})?(k=l.length,a=[f],b=[c],n=(h[f]||[]).slice()):(a.push(f),b.push(c),n.push.apply(n,$jscomp.arrayFromIterable(h[f]||[]))))}for(c=b.length;c--;)f=d[b[c]],h[f]=[],d.splice(b[c],1);
k=$jscomp.makeIterator(n);for(f=k.next();!f.done;f=k.next())f=f.value,e[f]=e[f].filter(function(m){return!a.includes(m)});g.push(a)}return g}function fu(g,d,k,e,h,n){function b(a){-1<c.indexOf(a)||(e=g.call(n,e,a,l++),c=c.concat([a]),ei.withoutAll(d[a]||[],c).forEach(function(f){return b(f)}))}var c=h||[],l=0;b(k);return e}function Tq(g){g=void 0===g?10:g;for(var d={},k=ei.range(1,g).map(String),e=0;e<k.length;e++){var h=Math.floor(Math.random()*g);d[k[e]]=ei.shuffle(k).slice(0,h)}return d}function Hp(g){return Array.isArray(g)&&
2<=g.length&&g[0]<=g[1]}function Ho(g){return g.sort(eh.compare)}function gu(g,d){return g[0]<d[0]?g[1]<d[0]?-3:g[1]===d[0]?-2:-1:g[0]===d[0]?g[1]===d[1]?0:g[1]<d[1]?-1:1:-1*gu(d,g)}function Wn(g,d,k){switch(this.compare(g,d)){case -3:case 3:return null;case 0:return k&&k(g,d,g),g;case 2:case 1:var e=g;g=d;d=e;case -2:case -1:return e=[g[0],Math.max(g[1],d[1])],k&&k(g,d,e),e;default:throw Error("Interval compare failed");}}function Xn(g,d){for(var k=[],e=g.length;0<e;){var h=g.shift();e--;for(var n=
0;n<e;n++){var b=eh.coalesce(h,g[n],d);b&&(h=b,g.splice(n,1),e--,n--)}k.push(h)}return this.sort(k)}function hl(g,d,k){for(var e=[];0<g.length;){var h=g.shift(),n=d.map(function(b){b=eh.compare(h,b);return-1===b||0===b||1===b});e.push(k(h,n[0]));e.push(h)}return e}function ys(g,d,k,e,h,n){n=n||eh.GLOBAL;k=this.sort(k);for(var b,c=[];b=k.shift();)if(!(b[1]<g)){b[0]<g&&(b=Array.prototype.slice.call(b),b[0]=g);var l=d<b[0]?d:b[0];g<l&&c.push(e.call(n,[g,l],!0));d<b[1]&&(b=Array.prototype.slice.call(b),
b[1]=d);if(b[0]===b[1]){var a;h&&(a=c.slice(-1)[0])&&h.call(n,a,b,a)}else c.push(e.call(n,b,!1));g=b[1];if(g>=d)break}g<d&&c.push(e.call(n,[g,d],!0));return c}function Uq(g,d,k){return eh.intervalsInRangeDo(g,d,eh.coalesceOverlapping(Array.prototype.slice.call(k)),function(e,h){return h?e:null}).filter(Boolean)}function Vq(g,d){var k=0,e,h;return d.map(function(n){for(;h=g[k];)if(h[0]<n[0])k++;else break;if(h&&h[0]===n[0]){for(e=k;h=g[e];)if(h[1]<n[1])e++;else break;if(h&&h[1]===n[1])return eh.range(k,
e)}return[]})}function Io(g,d,k){k=k||0;k+d>g.length&&(k-=k+d-g.length);return{array:g,from:k,to:k+d}}function Kj(g){return g.array.slice(g.from,g.to)}function Wq(g,d){return d<g.from||d>=g.to?null:d-g.from}function il(g,d){return 0>d||d>g.to-g.from?null:g.from+d}function Xq(g,d){if(!(d in g.array))return null;var k=0;d<g.from&&(k=-g.from+d);d>=g.to&&(k=d-g.to+1);return 0===k?g:Jm.create(g.array,g.to-g.from,g.from+k)}function Ip(g,d,k){return(g=g[d])?g[k]:void 0}function U(g,d,k,e){(g=g[d])&&(g[k]=
e);return e}function ra(g,d){return g[d]}function $a(g,d,k){return g[d]=k}function ob(g,d){return g.reduce(function(k,e){k.push(e[d]);return k},[])}function Vb(g,d,k){return g.map(function(e,h){return e[d]?e[d]=k[h]:void 0})}function qc(g,d,k){for(var e=Array(g);0<g;)e[--g]=vg.arrayWithN(d,k);return e}function ld(g,d,k,e){for(var h=Array(g),n=0;n<g;n++){h[n]=Array(d);for(var b=0;b<d;b++)h[n][b]=k.call(e||this,n,b)}return h}function Xd(g,d,k){g.forEach(function(e,h){e.forEach(function(n,b){d.call(k||
this,n,h,b)})})}function je(g,d,k){var e=Array(g.length);g.forEach(function(h,n){e[n]=Array(h.length);h.forEach(function(b,c){e[n][c]=d.call(k||this,b,n,c)})});return e}function $e(g){for(var d=g[0],k=Array(g.length-1),e=1;e<g.length;e++)for(var h=k[e-1]={},n=0;n<d.length;n++)h[d[n]]=g[e][n];return k}function mf(g,d){Array.isArray(g)||(g=[g]);var k=[[]],e=k[0],h=g.reduce(function(n,b){return n.concat([Object.keys(b).reduce(function(c,l){var a=e.indexOf(l);-1===a&&(a=e.length,e.push(l));c[a]=b[l];
return c},[])])},[]);d=1===arguments.length?null:d;h.forEach(function(n){for(var b=0;b<e.length;b++)n[b]||(n[b]=d)});return k.concat(h)}function xe(g,d,k,e,h){e=void 0===e?{i:0}:e;h=void 0===h?0:h;var n=e.i++;d(g,n,h);(k(g,n,h)||[]).forEach(function(b){return xe(b,d,k,e,h+1)})}function bf(g,d,k,e,h){e=void 0===e?{i:0}:e;h=void 0===h?0:h;var n=e.i++;(k(g,n,h)||[]).forEach(function(b){return bf(b,d,k,e,h)});d(g,n,h)}function ij(g,d,k){if(d(g))return g;if((g=k(g))&&g.length)for(var e=0;e<g.length;e++){var h=
ij(g[e],d,k);if(h)return h}}function Th(g,d,k){var e=[];d(g)&&e.push(g);return e.concat(sj.flatten((k(g)||[]).map(function(h){return Th(h,d,k)})))}function Yg(g,d,k,e){e=void 0===e?0:e;return[d(g,e)].concat(sj.flatten((k(g)||[]).map(function(h){return Yg(h,d,k,e+1)})))}function jl(g,d,k,e){e=void 0===e?0:e;var h=(k(g)||[]).map(function(n){return jl(n,d,k,e+1)});return d(g,h,e)}function cg(g){var d=[{name:"send",args:["msg","callback"]},{name:"listen",args:["messenger","callback"]},{name:"close",args:["messenger",
"callback"]},{name:"isOnline",args:[]}],k=d.map(function(b){return b.name}).concat("id sendHeartbeat heartbeatInterval ignoreUnknownMessages allowConcurrentSends sendTimeout services".split(" "));d.forEach(function(b){if(!g[b.name])throw b="message implementation needs function "+b.name+"("+b.args.join(",")+")",Error(b);});d=g.sendHeartbeat&&(g.heartbeatInterval||1E3);var e=g.hasOwnProperty("ignoreUnknownMessages")?g.ignoreUnknownMessages:!1,h={_outgoing:[],_inflight:[],_id:g.id||fk.newUUID(),_ignoreUnknownMessages:e,
_services:{},_messageCounter:0,_messageResponseCallbacks:{},_whenOnlineCallbacks:[],_statusWatcherProc:null,_startHeartbeatProcessProc:null,_listenInProgress:null,_heartbeatInterval:d,_status:fk.OFFLINE,_runWhenOnlineCallbacks:function(){var b=h._whenOnlineCallbacks.slice();h._whenOnlineCallbacks=[];b.forEach(function(c){try{c.call(null,null,h)}catch(l){console.error("error in _runWhenOnlineCallbacks: %s",l)}})},_ensureStatusWatcher:function(){h._statusWatcherProc||(h._statusWatcherProc=setInterval(function(){h.isOnline()&&
h._whenOnlineCallbacks.length&&h._runWhenOnlineCallbacks();var b=h._status;h._status=h.isOnline()?fk.ONLINE:fk.OFFLINE;h._status!==fk.ONLINE&&h._statusWatcherProc&&h.reconnect();if(h._status!==b&&h.onStatusChange)h.onStatusChange()},20))},_addMissingData:function(b){if(!b.target)throw Error("Message needs target!");if(!b.action)throw Error("Message needs action!");b.data||(b.data=null);b.messageId||(b.messageId=fk.newUUID());b.sender=h.id();b.messageIndex=h._messageCounter++;return b},_queueSend:function(b,
c){if(c&&"function"!==typeof c)throw Error("Expecing a when send callback, got: "+c);h._outgoing.push([b,c])},_deliverMessageQueue:function(){function b(a){if(-1!==h._inflight.indexOf(a)){var f=a[0],m=a[1];m&&(h._messageResponseCallbacks[f.messageId]=m);g.send.call(h,f,function(q){fk.remove(h._inflight,a);q&&c(q,a);h._deliverMessageQueue()})}}function c(a,f){var m=f[1];delete h._messageResponseCallbacks[f[0].messageId];console.error(a);m&&m(a)}if(g.allowConcurrentSends||!h._inflight.length){var l=
h._outgoing.shift();l&&(h._inflight.push(l),h.isOnline()?b(l):h.whenOnline(function(){b(l)}),function(a){"number"===typeof g.sendTimeout&&setTimeout(function(){-1!==h._inflight.indexOf(a)&&(fk.remove(h._inflight,a),c(Error("Timeout sending message"),a),h._deliverMessageQueue())},g.sendTimeout)}(l),g.allowConcurrentSends&&h._outgoing.length&&h._deliverMessageQueue())}},_startHeartbeatProcess:function(){h._startHeartbeatProcessProc||(h._startHeartbeatProcessProc=setTimeout(function(){g.sendHeartbeat.call(h,
function(b,c){h._startHeartbeatProcessProc=null;h._startHeartbeatProcess()})},h._heartbeatInterval))},id:function(){return h._id},isOnline:function(){return g.isOnline.call(h)},heartbeatEnabled:function(){return"number"===typeof h._heartbeatInterval},listen:function(b){if(!h._listenInProgress)return h._listenInProgress=!0,h._ensureStatusWatcher(),g.listen.call(h,function(c){h._listenInProgress=null;b&&b(c);h.heartbeatEnabled()&&h._startHeartbeatProcess()})},reconnect:function(){if(h._status!==fk.ONLINE)return h.listen(),
h},send:function(b,c){h._addMissingData(b);h._queueSend(b,c);h._deliverMessageQueue();return b},sendTo:function(b,c,l,a){return h.send({target:b,action:c,data:l},a)},onMessage:function(b){h.emit("message",b);if(b.inResponseTo){var c=h._messageResponseCallbacks[b.inResponseTo];c&&!b.expectMoreResponses&&delete h._messageResponseCallbacks[b.inResponseTo];c&&c(null,b)}else if(c=h._services[b.action])try{c.call(null,b,h)}catch(l){c=String(l.stack||l),console.error("Error invoking service: "+c),h.answer(b,
{error:c})}else h._ignoreUnknownMessages||h.answer(b,{error:String(Error("messageNotUnderstood: "+b.action))})},answer:function(b,c,l,a){"function"===typeof l&&(a=l,l=!1);b={target:b.sender,action:b.action+"Result",inResponseTo:b.messageId,data:c};l&&(b.expectMoreResponses=!0);return h.send(b,a)},close:function(b){clearInterval(h._statusWatcherProc);h._statusWatcherProc=null;g.close.call(h,function(c){h._status=fk.OFFLINE;b&&b(c)});return h},whenOnline:function(b){h._whenOnlineCallbacks.push(b);h.isOnline()&&
h._runWhenOnlineCallbacks();return h},outgoingMessages:function(){return fk.pluck(h._inflight.concat(h._outgoing),0)},addServices:function(b){Object.assign(h._services,b);return h}};g.services&&h.addServices(g.services);fk.makeEmitter(h);for(var n in g)-1===k.indexOf(n)&&g.hasOwnProperty(n)&&(h[n]=g[n]);return h}function Ef(g,d,k){k||(k=d,d=g,g=null);g=g||{};var e=g.args||[];g=wg.create(g);g.run.apply(g,[d].concat(e).concat(k));return g}function on(g){g=g||{};g.useMessenger=!0;var d=g.workerId||wg.newUUID(),
k=wg.messengerCreate({sendTimeout:5E3,send:function(e,h){k.worker.postMessage(e);h()},listen:function(e){var h=k.worker=wg.isNodejs?wg.NodejsWorker.create(g):wg.BrowserWorker.create(g);h.on("message",function(n){k.onMessage(n)});h.on("ready",function(){wg.NodejsWorker.debug&&console.log("WORKER READY!!!")});h.on("close",function(){wg.NodejsWorker.debug&&console.log("WORKER CLOSED...!!!")});h.once("ready",e)},close:function(e){return k.worker.ready?k.sendTo(d,"close",{},function(h,n){(h=h||n.data.error)&&
console.error("Error in worker messenger close: "+h.stack||h);if(h)e(h);else{var b=!1;k.worker.once("close",function(){b=!0});wg.waitFor(1E3,function(){return!!b},e)}}):e(null)},isOnline:function(){return k.worker&&k.worker.ready}});Object.assign(k,{eval:function(e,h){k.sendTo(d,"remoteEval",{expr:e},function(n,b){h(n,b?b.data.result:null)})},run:function(){var e=Array.prototype.slice.call(arguments),h=e.shift(),n=e.pop();if("function"!==typeof h)throw Error("run: no function that should run in worker passed");
if("function"!==typeof n)throw Error("run: no callback passed");return k.sendTo(d,"run",{func:String(h),args:e},function(b,c){n(b||c.data.error,c?c.data.result:null)})}});k.listen();return k}function Jp(){if(!cd.isNode||cd.GLOBAL.lively||cd.GLOBAL.lively)if(cd.livelyLang._prevLivelyGlobal=cd.GLOBAL.lively,cd.GLOBAL.lively||(cd.GLOBAL.lively={}),cd.GLOBAL.lively.lang)for(var g in cd.livelyLang)cd.GLOBAL.lively.lang[g]=cd.livelyLang[g];else cd.GLOBAL.lively.lang=cd.livelyLang}function Hl(g){if(!g)return g;
if(Array.isArray(g))return cd.createChain(cd.arr,g);if("Date"===g.constructor.name)return cd.createChain(cd.date,g);switch(typeof g){case "string":return cd.createChain(cd.string,g);case "object":return cd.createChain(cd.obj,g);case "function":return cd.createChain(cd.fun,g);case "number":return cd.createChain(cd.num,g)}throw Error("Chain for object "+g+" ("+g.constructor.name+") no supported");}function hu(){cd.isNode||(cd.livelyLang._prevLivelyGlobal?delete cd.GLOBAL.lively.lang:delete cd.GLOBAL.lively);
return cd.livelyLang}function Il(){Object.assign(cd.livelyLang,{worker:cd.worker,messenger:cd.messenger,events:cd.events,tree:cd.tree,grid:cd.grid,arrayProjection:cd.arrayProjection,interval:cd.interval,graph:cd.graph,date:cd.date,properties:cd.properties,obj:cd.obj,arr:cd.arr,fun:cd.fun,num:cd.num,string:cd.string,Closure:cd.Closure,promise:cd.promise,Path:cd.Path,Group:cd.Group});cd.globalInterfaceSpec.forEach(function(g){if("installMethods"===g.action){var d=cd.Path(g.target);d.isIn(cd.GLOBAL)||
d.set(cd.GLOBAL,{},!0);var k=cd.Path(g.sources[0]);g.methods.forEach(function(e){cd.installProperty(k.concat([e]),d.concat([e]))});g.alias&&g.alias.forEach(function(e){cd.installProperty(k.concat([e[1]]),d.concat([e[0]]))})}else if("installObject"===g.action)d=cd.Path(g.target),g=cd.Path(g.source).get(cd.livelyLang),d.set(cd.GLOBAL,g,!0);else throw Error("Cannot deal with global setup action: "+g.action);})}function Gv(){cd.globalInterfaceSpec.forEach(function(g){if("installMethods"===g.action){var d=
cd.Path(g.target),k=cd.Path(g.source).get(cd.livelyLang),e=d.get(cd.GLOBAL);e&&(g.methods.filter(function(h){return k===e[h]}).forEach(function(h){delete e[h]}),g.alias&&g.alias.filter(function(h){return k===e[h]}).forEach(function(h){delete e[h[0]]}))}else if("installObject"===g.action)d=cd.Path(g.target),d.del(cd.GLOBAL);else throw Error("Cannot deal with global setup action: "+g.action);})}function Hv(g){return function(d,k,e,h){null==e&&(e=g);null==h&&(h=e);null==k&&(k=xh.unit(d));var n=xh.unit(d);
if(n===k)return d;var b=xh.unitLess(d);"px"!==xh.unit(e)&&console.warn("Parameter fromContext must resolve to a value in pixel units.");"px"!==xh.unit(h)&&console.warn("Parameter toContext must resolve to a value in pixel units.");if("px"!==n)if("em"===n)b=xh.unitLess(d)*xh.unitLess(e);else if("rem"===n)b=xh.unitLess(d)*xh.unitLess(g);else if("ex"===n)b=xh.unitLess(d)*xh.unitLess(e)*2;else return"ch"===n||"vw"===n||"vh"===n||"vmin"===n?console.warn(n+" units can't be reliably converted; Returning original value."):
console.warn(n+" is an unknown or unsupported length unit; Returning original value."),d;e=b;if("px"!==k)if("em"===k)e=b/xh.unitLess(h);else if("rem"===k)e=b/xh.unitLess(g);else if("ex"===k)e=b/xh.unitLess(h)/2;else return"ch"===k||"vw"===k||"vh"===k||"vmin"===k?console.warn(k+" units can't be reliably converted; Returning original value."):console.warn(k+" is an unknown or unsupported length unit; Returning original value."),d;return parseFloat(e.toFixed(5))+k}}function ox(g){return Number(xh.parseCssLength(g,
"px").slice(0,-2))}function Gk(g,d,k,e){if("number"===typeof g){var h=g;g=d;d=e}else h=g.x,g=g.y,k=d.x-h,d=d.y-g;return new md.Rectangle(h,g,k,d)}function fh(g,d){return new md.Point(g,d)}function pn(g){return(g=g.match(iS))?{scheme:g[1],auth:g[2],host:g[3],port:g[4],path:g[5]}:null}function iu(g){var d="";g.scheme&&(d+=g.scheme+":");d+="//";g.auth&&(d+=g.auth+"@");g.host&&(d+=g.host);g.port&&(d+=":"+g.port);g.path&&(d+=g.path);return d}function px(g){var d=g,k=pn(g);if(k){if(!k.path)return g;d=k.path}g=
kl.isAbsolute(d);d=d.split(/\/+/);for(var e,h=0,n=d.length-1;0<=n;n--)e=d[n],"."===e?d.splice(n,1):".."===e?h++:0<h&&(""===e?(d.splice(n+1,h),h=0):(d.splice(n,2),h--));d=d.join("/");""===d&&(d=g?"/":".");return k?(k.path=d,iu(k)):d}function Kp(g,d){""===g&&(g=".");""===d&&(d=".");var k=pn(d),e=pn(g);e&&(g=e.path||"/");if(k&&!k.scheme)return e&&(k.scheme=e.scheme),iu(k);if(k||d.match(D5))return d;if(e&&!e.host&&!e.path)return e.host=d,iu(e);g="/"===d.charAt(0)?d:px(g.replace(/\/+$/,"")+"/"+d);return e?
(e.path=g,iu(e)):g}function XB(g){return g}function jL(g){return Aj(g)?"$"+g:g}function fF(g){return Aj(g)?g.slice(1):g}function Aj(g){if(!g)return!1;var d=g.length;if(9>d||95!==g.charCodeAt(d-1)||95!==g.charCodeAt(d-2)||111!==g.charCodeAt(d-3)||116!==g.charCodeAt(d-4)||111!==g.charCodeAt(d-5)||114!==g.charCodeAt(d-6)||112!==g.charCodeAt(d-7)||95!==g.charCodeAt(d-8)||95!==g.charCodeAt(d-9))return!1;for(d-=10;0<=d;d--)if(36!==g.charCodeAt(d))return!1;return!0}function jm(g,d){return g===d?0:null===
g?1:null===d?-1:g>d?1:-1}function Uj(){(this||km)._array=[];(this||km)._set=qx?new Map:Object.create(null)}function ju(){(this||Lp)._array=[];(this||Lp)._sorted=!0;(this||Lp)._last={generatedLine:-1,generatedColumn:0}}function lm(g){g||(g={});(this||gh)._file=Hk.getArg(g,"file",null);(this||gh)._sourceRoot=Hk.getArg(g,"sourceRoot",null);(this||gh)._skipValidation=Hk.getArg(g,"skipValidation",!1);(this||gh)._sources=new gF;(this||gh)._names=new gF;(this||gh)._mappings=new E5;(this||gh)._sourcesContents=
null}function rx(g,d,k,e,h,n){var b=Math.floor((d-g)/2)+g,c=h(k,e[b],!0);return 0===c?b:0<c?1<d-b?rx(b,d,k,e,h,n):n==hF.LEAST_UPPER_BOUND?d<e.length?d:-1:b:1<b-g?rx(g,b,k,e,h,n):n==hF.LEAST_UPPER_BOUND?b:0>g?-1:g}function sx(g,d,k){var e=g[d];g[d]=g[k];g[k]=e}function ri(g,d,k,e){if(k<e){var h=k-1;sx(g,Math.round(k+Math.random()*(e-k)),e);for(var n=g[e],b=k;b<e;b++)0>=d(g[b],n)&&(h+=1,sx(g,h,b));sx(g,h+1,b);h+=1;ri(g,d,k,h-1);ri(g,d,h+1,e)}}function Zh(g,d){var k=g;"string"===typeof g&&(k=tf.parseSourceMapInput(g));
return null!=k.sections?new Jl(k,d):new ll(k,d)}function ll(g,d){var k=g;"string"===typeof g&&(k=tf.parseSourceMapInput(g));g=tf.getArg(k,"version");var e=tf.getArg(k,"sources"),h=tf.getArg(k,"names",[]),n=tf.getArg(k,"sourceRoot",null),b=tf.getArg(k,"sourcesContent",null),c=tf.getArg(k,"mappings");k=tf.getArg(k,"file",null);if(g!=(this||be)._version)throw Error("Unsupported version: "+g);n&&(n=tf.normalize(n));e=e.map(String).map(tf.normalize).map(function(l){return n&&tf.isAbsolute(n)&&tf.isAbsolute(l)?
tf.relative(n,l):l});(this||be)._names=Bz.fromArray(h.map(String),!0);(this||be)._sources=Bz.fromArray(e,!0);(this||be)._absoluteSources=(this||be)._sources.toArray().map(function(l){return tf.computeSourceURL(n,l,d)});(this||be).sourceRoot=n;(this||be).sourcesContent=b;(this||be)._mappings=c;(this||be)._sourceMapURL=d;(this||be).file=k}function YB(){(this||be).generatedLine=0;(this||be).generatedColumn=0;(this||be).source=null;(this||be).originalLine=null;(this||be).originalColumn=null;(this||be).name=
null}function Jl(g,d){var k=g;"string"===typeof g&&(k=tf.parseSourceMapInput(g));g=tf.getArg(k,"version");k=tf.getArg(k,"sections");if(g!=(this||be)._version)throw Error("Unsupported version: "+g);(this||be)._sources=new Bz;(this||be)._names=new Bz;var e={line:-1,column:0};(this||be)._sections=k.map(function(h){if(h.url)throw Error("Support for url field in sections not implemented.");var n=tf.getArg(h,"offset"),b=tf.getArg(n,"line"),c=tf.getArg(n,"column");if(b<e.line||b===e.line&&c<e.column)throw Error("Section offsets must be ordered and non-overlapping.");
e=n;return{generatedOffset:{generatedLine:b+1,generatedColumn:c+1},consumer:new Zh(tf.getArg(h,"map"),d)}})}function Km(g,d,k,e,h){(this||Uh).children=[];(this||Uh).sourceContents={};(this||Uh).line=null==g?null:g;(this||Uh).column=null==d?null:d;(this||Uh).source=null==k?null:k;(this||Uh).name=null==h?null:h;(this||Uh).$$$isSourceNode$$$=!0;null!=e&&this.add(e)}function mg(g,d){d=void 0===d?{}:d;var k=Object.assign({indent:{style:"  ",base:0,adjustMultilineComment:!1,optsIndent:d&&d.format&&d.format.indent||
{}},quotes:"double"},Jo.obj.dissoc(d&&d.format||{},["indent"]));d=Object.assign({format:k,comment:!1},Jo.obj.dissoc(d,["format"]));return Jo.es.generate(g,d)}function si(g,d){for(var k=65536,e=0;e<d.length;e+=2){k+=d[e];if(k>g)return!1;k+=d[e+1];if(k>=g)return!0}}function mm(g,d){return 65>g?36===g:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&F5.test(String.fromCharCode(g)):!1===d?!1:si(g,jS)}function ti(g,d){return 48>g?36===g:58>g?!0:65>g?!1:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&G5.test(String.fromCharCode(g)):
!1===d?!1:si(g,jS)||si(g,H5)}function Lm(g,d){return new li(g,{beforeExpr:!0,binop:d})}function uc(g,d){void 0===d&&(d={});d.keyword=g;return iF[g]=new li(g,d)}function Vj(g,d){return 10===g||13===g||!d&&(8232===g||8233===g)}function Mm(g){return new RegExp("^(?:"+g.replace(/ /g,"|")+")$")}function Mp(g,d){for(var k=1,e=0;;){Iv.lastIndex=e;var h=Iv.exec(g);if(h&&h.index<d)++k,e=h.index+h[0].length;else return new Cz(k,d-e)}}function ku(g){var d={},k;for(k in ZB)d[k]=g&&jF.call(g,k)?g[k]:ZB[k];"latest"===
d.ecmaVersion?d.ecmaVersion=1E8:null==d.ecmaVersion?(!kS&&"object"===typeof console&&console.warn&&(kS=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),d.ecmaVersion=11):2015<=d.ecmaVersion&&(d.ecmaVersion-=2009);null==d.allowReserved&&(d.allowReserved=5>d.ecmaVersion);if(lS(d.onToken)){var e=d.onToken;d.onToken=function(h){return e.push(h)}}lS(d.onComment)&&(d.onComment=tx(d,d.onComment));return d}function tx(g,
d){return function(k,e,h,n,b,c){k={type:k?"Block":"Line",value:e,start:h,end:n};g.locations&&(k.loc=new ux(this,b,c));g.ranges&&(k.range=[h,n]);d.push(k)}}function Yn(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function Yq(g,d,k,e){g.type=d;g.end=k;this.options.locations&&(g.loc.end=e);this.options.ranges&&(g.range[1]=k);return g}function lu(g){g=mS[g]={binary:Mm(I5[g]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:Mm("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:Mm(J5[g])}};g.nonBinary.Script_Extensions=g.nonBinary.Script;g.nonBinary.gc=g.nonBinary.General_Category;g.nonBinary.sc=g.nonBinary.Script;g.nonBinary.scx=g.nonBinary.Script_Extensions}function Jv(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function Dz(g){return 36===g||40<=g&&43>=g||46===g||63===g||91<=g&&94>=g||123<=g&&125>=g}function vx(g){return 65<=g&&90>=g||97<=g&&122>=g||95===g}function Ez(g){return vx(g)||Zq(g)}function Zq(g){return 48<=
g&&57>=g}function wx(g){return 48<=g&&57>=g||65<=g&&70>=g||97<=g&&102>=g}function zs(g){return 65<=g&&70>=g?10+(g-65):97<=g&&102>=g?10+(g-97):g-48}function Kv(g){return"function"!==typeof BigInt?null:BigInt(g.replace(/_/g,""))}function $q(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function hh(g){return"string"===typeof g?function(d){return d===g}:g?g:function(){return!0}}function Ko(g,d){d=Object.create(d||se);for(var k in g)d[k]=
g[k];return d}function Ik(g,d,k){k(g,d)}function qn(g,d,k){}function Kl(g){return"\u2716"===g.name}function mu(){}function ar(g){return 14>g&&8<g||32===g||160===g||Vj(g)}function ta(g,d,k,e){var h=[];e=e||pe.walk.make(pe.custom.withMemberExpression);Object.keys(pe.walk.base).forEach(function(n){var b=e[n];e[n]=function(c,l,a){pe.arr.pushIfNotIncluded(h,c);return b(c,l,a)}});e.Property=function(n,b,c){pe.arr.pushIfNotIncluded(h,n);c(n.key,b,"Expression");c(n.value,b,"Expression")};e.LabeledStatement=
function(n,b,c){n.label&&c(n.label,b,"Expression");c(n.body,b,"Statement")};pe.walk.findNodeAround(g,d,k,e);return h}function Lo(g,d){function k(h){return null===h?null:e[h.type](h,k)}var e=pe.obj.extend({Program:function(h,n){return{start:h.start,end:h.end,type:"Program",body:h.body.map(n),source:h.source,astIndex:h.astIndex}},FunctionDeclaration:function(h,n){return{start:h.start,end:h.end,type:"FunctionDeclaration",id:n(h.id),params:h.params.map(n),body:n(h.body),source:h.source,astIndex:h.astIndex}},
BlockStatement:function(h,n){return{start:h.start,end:h.end,type:"BlockStatement",body:h.body.map(n),source:h.source,astIndex:h.astIndex}},ExpressionStatement:function(h,n){return{start:h.start,end:h.end,type:"ExpressionStatement",expression:n(h.expression),source:h.source,astIndex:h.astIndex}},CallExpression:function(h,n){return{start:h.start,end:h.end,type:"CallExpression",callee:n(h.callee),arguments:h.arguments.map(n),source:h.source,astIndex:h.astIndex}},MemberExpression:function(h,n){return{start:h.start,
end:h.end,type:"MemberExpression",object:n(h.object),property:n(h.property),computed:h.computed,source:h.source,astIndex:h.astIndex}},NewExpression:function(h,n){return{start:h.start,end:h.end,type:"NewExpression",callee:n(h.callee),arguments:h.arguments.map(n),source:h.source,astIndex:h.astIndex}},VariableDeclaration:function(h,n){return{start:h.start,end:h.end,type:"VariableDeclaration",declarations:h.declarations.map(n),kind:h.kind,source:h.source,astIndex:h.astIndex}},VariableDeclarator:function(h,
n){return{start:h.start,end:h.end,type:"VariableDeclarator",id:n(h.id),init:n(h.init),source:h.source,astIndex:h.astIndex}},FunctionExpression:function(h,n){return{start:h.start,end:h.end,type:"FunctionExpression",id:n(h.id),params:h.params.map(n),body:n(h.body),source:h.source,astIndex:h.astIndex}},IfStatement:function(h,n){return{start:h.start,end:h.end,type:"IfStatement",test:n(h.test),consequent:n(h.consequent),alternate:n(h.alternate),source:h.source,astIndex:h.astIndex}},ConditionalExpression:function(h,
n){return{start:h.start,end:h.end,type:"ConditionalExpression",test:n(h.test),consequent:n(h.consequent),alternate:n(h.alternate),source:h.source,astIndex:h.astIndex}},SwitchStatement:function(h,n){return{start:h.start,end:h.end,type:"SwitchStatement",discriminant:n(h.discriminant),cases:h.cases.map(n),source:h.source,astIndex:h.astIndex}},SwitchCase:function(h,n){return{start:h.start,end:h.end,type:"SwitchCase",test:n(h.test),consequent:h.consequent.map(n),source:h.source,astIndex:h.astIndex}},BreakStatement:function(h,
n){return{start:h.start,end:h.end,type:"BreakStatement",label:h.label,source:h.source,astIndex:h.astIndex}},ContinueStatement:function(h,n){return{start:h.start,end:h.end,type:"ContinueStatement",label:h.label,source:h.source,astIndex:h.astIndex}},TryStatement:function(h,n){return{start:h.start,end:h.end,type:"TryStatement",block:n(h.block),handler:n(h.handler),finalizer:n(h.finalizer),guardedHandlers:h.guardedHandlers.map(n),source:h.source,astIndex:h.astIndex}},CatchClause:function(h,n){return{start:h.start,
end:h.end,type:"CatchClause",param:n(h.param),guard:n(h.guard),body:n(h.body),source:h.source,astIndex:h.astIndex}},ThrowStatement:function(h,n){return{start:h.start,end:h.end,type:"ThrowStatement",argument:n(h.argument),source:h.source,astIndex:h.astIndex}},ForStatement:function(h,n){return{start:h.start,end:h.end,type:"ForStatement",init:n(h.init),test:n(h.test),update:n(h.update),body:n(h.body),source:h.source,astIndex:h.astIndex}},ForInStatement:function(h,n){return{start:h.start,end:h.end,type:"ForInStatement",
left:n(h.left),right:n(h.right),body:n(h.body),source:h.source,astIndex:h.astIndex}},WhileStatement:function(h,n){return{start:h.start,end:h.end,type:"WhileStatement",test:n(h.test),body:n(h.body),source:h.source,astIndex:h.astIndex}},DoWhileStatement:function(h,n){return{start:h.start,end:h.end,type:"DoWhileStatement",test:n(h.test),body:n(h.body),source:h.source,astIndex:h.astIndex}},WithStatement:function(h,n){return{start:h.start,end:h.end,type:"WithStatement",object:n(h.object),body:n(h.body),
source:h.source,astIndex:h.astIndex}},UnaryExpression:function(h,n){return{start:h.start,end:h.end,type:"UnaryExpression",argument:n(h.argument),operator:h.operator,prefix:h.prefix,source:h.source,astIndex:h.astIndex}},BinaryExpression:function(h,n){return{start:h.start,end:h.end,type:"BinaryExpression",left:n(h.left),operator:h.operator,right:n(h.right),source:h.source,astIndex:h.astIndex}},LogicalExpression:function(h,n){return{start:h.start,end:h.end,type:"LogicalExpression",left:n(h.left),operator:h.operator,
right:n(h.right),source:h.source,astIndex:h.astIndex}},AssignmentExpression:function(h,n){return{start:h.start,end:h.end,type:"AssignmentExpression",left:n(h.left),operator:h.operator,right:n(h.right),source:h.source,astIndex:h.astIndex}},UpdateExpression:function(h,n){return{start:h.start,end:h.end,type:"UpdateExpression",argument:n(h.argument),operator:h.operator,prefix:h.prefix,source:h.source,astIndex:h.astIndex}},ReturnStatement:function(h,n){return{start:h.start,end:h.end,type:"ReturnStatement",
argument:n(h.argument),source:h.source,astIndex:h.astIndex}},Identifier:function(h,n){return{start:h.start,end:h.end,type:"Identifier",name:h.name,source:h.source,astIndex:h.astIndex}},Literal:function(h,n){return{start:h.start,end:h.end,type:"Literal",value:h.value,raw:h.raw,source:h.source,astIndex:h.astIndex}},ObjectExpression:function(h,n){return{start:h.start,end:h.end,type:"ObjectExpression",properties:h.properties.map(function(b){return{key:n(b.key),value:n(b.value),kind:b.kind}}),source:h.source,
astIndex:h.astIndex}},ArrayExpression:function(h,n){return{start:h.start,end:h.end,type:"ArrayExpression",elements:h.elements.map(n),source:h.source,astIndex:h.astIndex}},SequenceExpression:function(h,n){return{start:h.start,end:h.end,type:"SequenceExpression",expressions:h.expressions.map(n),source:h.source,astIndex:h.astIndex}},EmptyStatement:function(h,n){return{start:h.start,end:h.end,type:"EmptyStatement",source:h.source,astIndex:h.astIndex}},ThisExpression:function(h,n){return{start:h.start,
end:h.end,type:"ThisExpression",source:h.source,astIndex:h.astIndex}},DebuggerStatement:function(h,n){return{start:h.start,end:h.end,type:"DebuggerStatement",source:h.source,astIndex:h.astIndex}},LabeledStatement:function(h,n){return{start:h.start,end:h.end,type:"LabeledStatement",label:h.label,body:n(h.body),source:h.source,astIndex:h.astIndex}}},d||{});return k(g)}function gk(g,d,k){if(!d)return[];g=pe.findNodesIncluding(g,d.start);var e=g.indexOf(d);g=g.slice(0,e);g=pe.arr.detect(g.reverse(),function(h){return Array.isArray(h.body)}).body;
if(!k)return pe.arr.without(g,d);d=g.indexOf(d);return"before"===k?g.slice(0,d):g.slice(d+1)}function Zn(g,d,k){g.astIndex||null!=k&&!k||pe.addAstIndex(g);var e=null;pe.withMozillaAstDo(g,null,function(h,n,b){e||n.astIndex<d||(n.astIndex===d?e=n:h())});return e}function br(g,d,k){k||(k=d,d=g,g=null);g||(g={});d.astIndex||pe.addAstIndex(d);var e,h=!1,n="EmptyStatement BlockStatement ExpressionStatement IfStatement LabeledStatement BreakStatement ContinueStatement WithStatement SwitchStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration".split(" ");
pe.withMozillaAstDo(d,{},function(b,c,l,a){if(!(h||c.astIndex<k.astIndex)){if(c===k||c.astIndex===k.astIndex)if(h=!0,g.asPath)e=a;else{c=pe.Path(a);do e=c.get(d),c=c.slice(0,c.size()-1);while(-1==n.indexOf(e.type)&&0<c.size())}!h&&b()}});return e}function Id(g){pe.withMozillaAstDo(g,{index:0},function(d,k,e){d();k.astIndex=e.index++});return g}function Be(g,d){"string"===typeof g&&(d=g,g=xg.parse(g));d&&xg.AllNodesVisitor.run(g,function(k,e,h){return!k.source&&(k.source=d.slice(k.start,k.end))});
return g}function Ma(g,d){d=void 0===d?{}:d;var k=xg.parse("("+g+")",d);xg.AllNodesVisitor.run(k,function(e,h,n){if(!e._positionFixed){e._positionFixed=!0;if(e.start||0===e.start)e.start+=-1,e.end+=-1;d.addSource&&!e.source&&(e.source=g.slice(e.start,e.end))}});return k.body[0].expression}function Bj(g,d){d=d||{};d.ecmaVersion=d.ecmaVersion||11;d.sourceType=d.sourceType||"module";d.plugins=d.plugins||{};d.plugins.jsx=d.plugins.hasOwnProperty("jsx")?d.plugins.jsx:!0;d.plugins.asyncawait=d.plugins.hasOwnProperty("asyncawait")?
d.plugins.asyncawait:{inAsyncFunction:!0};d.plugins.objectSpread=d.plugins.hasOwnProperty("objectSpread")?d.plugins.objectSpread:!0;var k;"LabeledStatement"===d.type&&(k="$={"+g+"}");try{var e=xg.parse(k||g,d);k?e=null:d.addSource&&xg.addSource(e,g)}catch(n){var h=n}h&&void 0!==h.raisedAt?(k&&(h.pos-=3,h.raisedAt-=3,h.loc.column-=3),k=""+g.slice(h.raisedAt-20,h.raisedAt),k=k+"<-error->"+g.slice(h.raisedAt,h.raisedAt+20),d.verbose&&console.log("parse error: "+k),h.parseErrorSource=k):h&&d.verbose&&
console.log(""+h+h.stack);e||(e=xg.loose.parse(g,d),d.addSource&&xg.addSource(e,g),e.isFuzzy=!0,e.parseError=h);return e}function Bi(g,d){function k(m){m=h(e(m));b.allComments=m.comments}function e(m){n.forEach(function(q){var r=xg.arr.detect(xg.nodesAt(q.start,b).reverse(),function(u){return"BlockStatement"===u.type||"Program"===u.type});r||(r=b);r.comments||(r.comments=[]);r.comments.push(q);m.nodesWithComments.push(r)});return m}function h(m){m.nodesWithComments.forEach(function(q){xg.arr.clone(q.comments).reduce(function(r,
u){if(u.isBlock)return r.lastComment=null,r;if(!r.lastComment)return r.lastComment=u,r;var v=r.lastComment;if(xg.arr.detect(q.body,function(z){return z.start>=v.end&&z.end<=u.start}))return r.lastComment=u,r;var y=g.slice(v.end,u.start);if(/[\n\r][\n\r]+/.test(y))return r.lastComment=u,r;v.text+="\n"+u.text;v.end=u.end;xg.arr.remove(q.comments,u);xg.arr.remove(m.comments,u);return r},{lastComment:null})});return m}d=d||{};d.ecmaVersion=d.ecmaVersion||11;d.allowAwaitOutsideFunction=!0;d.sourceType=
d.sourceType||"module";d.hasOwnProperty("allowImportExportEverywhere")||(d.allowImportExportEverywhere=!0);d.plugins=d.plugins||{};d.plugins.jsx=d.plugins.hasOwnProperty("jsx")?d.plugins.jsx:!0;d.plugins.asyncawait=d.plugins.hasOwnProperty("asyncawait")?d.plugins.asyncawait:{inAsyncFunction:!0};d.plugins.objectSpread=d.plugins.hasOwnProperty("objectSpread")?d.plugins.objectSpread:!0;if(d.withComments){delete d.withComments;var n=[];d.onComment=function(m,q,r,u,v,y){n.push({isBlock:m,text:q,node:null,
start:r,end:u,line:v,column:y})}}try{var b=xg.acorn.parse(g,d)}catch(m){if("undefined"!==typeof SyntaxError&&m instanceof SyntaxError&&m.loc){var c=g.split("\n"),l=m,a=l.loc;d=a.line;a=a.column;var f=l.pos;c=c[d-1];l="Syntax error at line "+d+" column "+a+" (index "+f+') "'+l.message+'"\nsource: '+c.slice(0,a)+"<--SyntaxError--\x3e"+c.slice(a);l=new SyntaxError(l);l.loc={line:d,column:a};l.pos=f;throw l;}throw m;}d.addSource&&xg.addSource(b,g);d.addAstIndex&&!b.hasOwnProperty("astIndex")&&xg.addAstIndex(b);
b&&n&&k({ast:b,comments:n,nodesWithComments:[]});return b}function cr(g){return ke.identifierRe.test(g)&&-1===g.indexOf("-")}function nu(g){return"this"===g?{type:"ThisExpression"}:{name:String(g),type:"Identifier"}}function xx(g){return{type:"Literal",value:g}}function ou(g){return{type:"ExpressionStatement",expression:g}}function Np(g){return{type:"ReturnStatement",argument:g}}function mi(){return{type:"EmptyStatement"}}function $n(g,d,k){return{left:g,right:k,operator:d,type:"BinaryExpression"}}
function tj(g,d,k){for(var e=[],h=2;h<arguments.length;++h)e[h-2]=arguments[h];h=g.arrow;var n=g.id,b=g.expression,c=g.generator;d=void 0===d?[]:d;d=d.map(function(l){return"string"===typeof l?ke.id(l):l});return{type:(h?"Arrow":"")+"FunctionExpression",id:n?"string"===typeof n?ke.id(n):n:void 0,params:d,body:b&&1===e.length?e[0]:{body:e,type:"BlockStatement"},expression:b||!1,generator:c||!1}}function rn(g,d){for(var k=[],e=1;e<arguments.length;++e)k[e-1]=arguments[e];"string"===typeof g&&(g=ke.id(g));
return{type:"CallExpression",callee:g,arguments:k}}function Nm(g,d,k){"string"===typeof g&&(g={name:g,type:"Identifier"});return{type:"VariableDeclaration",kind:k||"var",declarations:[{type:"VariableDeclarator",id:g,init:d}]}}function As(g,d,k){"string"===typeof g&&(g=ke.id(g));"string"===typeof d?(k||ke.isIdentifier(d)||(k=!0),d=k?ke.literal(d):ke.id(d)):"number"===typeof d?(d=ke.literal(d),k=!0):"Literal"===d.type&&(k=!0);return{type:"MemberExpression",computed:!!k,object:g,property:d}}function Jk(g,
d){for(var k=[],e=1;e<arguments.length;++e)k[e-1]=arguments[e];return k.reduce(function(h,n){return ke.member(h,n)},"object"===typeof g?g:ke.id(g))}function Lv(g,d){return{type:"AssignmentExpression",operator:"=",right:d?"string"===typeof d?ke.id(d):d:ke.id("undefined"),left:"string"===typeof g?ke.id(g):g}}function ml(g){for(var d=[],k=0;k<arguments.length;++k)d[k-0]=arguments[k];return{body:Array.isArray(d[0])?d[0]:d,type:"BlockStatement"}}function tk(g){for(var d=[],k=0;k<arguments.length;++k)d[k-
0]=arguments[k];return Object.assign(ke.block.apply(ke,$jscomp.arrayFromIterable(d)),{sourceType:"module",type:"Program"})}function dr(g,d,k,e){for(var h=[],n=3;n<arguments.length;++n)h[n-3]=arguments[n];Array.isArray(k)||(h.unshift(k),k=null);return{block:ke.block(h),finalizer:k?ke.block(k):null,handler:{body:ke.block(d),param:ke.id(g),type:"CatchClause"},type:"TryStatement"}}function Bs(g,d){return{type:"Property",key:g,computed:"Identifier"!==g.type,shorthand:!1,value:d}}function yx(g){for(var d=
[],k=0;k<g.length;k+=2){var e=g[k];"string"===typeof e&&(e=ke.id(e));d.push(ke.prop(e,g[k+1]))}return{properties:d,type:"ObjectExpression"}}function zx(g,d,k){d=void 0===d?ke.block():d;k=void 0===k?ke.block():k;return{consequent:d,alternate:k,test:g,type:"IfStatement"}}function Fz(g,d,k){return{type:"ForInStatement",left:"string"===typeof g?ke.varDecl(g):g,right:"string"===typeof d?ke.id(d):d,body:k}}function oh(g,d,k){d=void 0===d?ke.id("undefined"):d;k=void 0===k?ke.id("undefined"):k;return{consequent:d,
alternate:k,test:g,type:"ConditionalExpression"}}function Gz(g,d,k){return{operator:g,left:d,right:k,type:"LogicalExpression"}}function Mv(g){var d=new hd.ScopeVisitor,k=d.newScope(g,null);d.accept(g,k,[]);return k}function er(g,d){return hd.withMozillaAstDo(g,[],function(k,e,h){e.start<=d&&d<=e.end&&(h.push(e),k());return h})}function Hz(g,d){return hd.tree.filter(hd.scopes(g),function(k){k=k.node;var e=k.start,h=k.end;"FunctionDeclaration"===k.type&&(e=k.params.length?k.params[0].start:k.body.start,
h=k.body.end);return e<=d&&d<=h},function(k){return k.subScopes})}function Op(g,d){return hd.arr.last(hd.scopesAtIndex(g,d))}function ao(g,d){return hd.arr.filter(hd.nodesAt(g,d),function(k){return"Program"===k.type||"FunctionDeclaration"===k.type||"FunctionExpression"===k.type})}function Pp(g){return hd.withMozillaAstDo(g,{root:g,result:[]},function(d,k,e){e.result.push(k);if(k!==e.root&&("Program"===k.type||"FunctionDeclaration"===k.type||"FunctionExpression"===k.type))return e;d();return e}).result}
function sn(g,d,k){k=void 0===k?[]:k;d&&g.node.id&&g.node.id.name&&k.push(g.node.id);hd.helpers.declIds(g.params,k);for(d=0;d<g.funcDecls.length;d++){var e=g.funcDecls[d].id;e&&k.push(e)}hd.helpers.varDeclIds(g,k);k.push.apply(k,$jscomp.arrayFromIterable(g.catches));for(d=0;d<g.classDecls.length;d++)(e=g.classDecls[d].id)&&k.push(e);k.push.apply(k,$jscomp.arrayFromIterable(g.importSpecifiers));return hd.arr.compact(k)}function Kk(g,d){for(var k=[],e=$jscomp.makeIterator(hd.declarationsOfScope(g,!0)),
h=e.next();!h.done;h=e.next())k.push(h.value.name);d&&hd._findJsLintGlobalDeclarations("Program"===g.node.type?g.node:g.node.body,k);return k}function Iz(g,d){d=void 0===d?[]:d;if(!g||!g.comments)return d;g=$jscomp.makeIterator(g.comments);for(var k=g.next();!k.done;k=g.next())if(k=k.value.text.trim(),k.startsWith("global")){k=$jscomp.makeIterator(k.replace(hd.globalDeclRe,"").split(","));for(var e=k.next();!e.done;e=k.next())d.push(e.value.trim())}return d}function nl(g){return hd.FindToplevelFuncDeclVisitor.run(g)}
function uj(g,d){if(0==d.length)return[null,null];var k=$jscomp.makeIterator(d);d=k.next().value;k=$jscomp.arrayFromIterator(k);var e=d.decls||hd.declarationsWithIdsOfScope(d);d.decls=e;return e.find(function(h){h=$jscomp.makeIterator(h);h.next();return h.next().value.name==g})||uj(g,k)}function Nv(g){function d(e,h){var n=[e].concat(h);e.refs.forEach(function(b){var c=$jscomp.makeIterator(hd.resolveReference(b.name,n)),l=c.next().value;c=c.next().value;k.set(b,{decl:l,declId:c,ref:b})});e.subScopes.forEach(function(b){return d(b,
n)})}if(g.referencesResolvedSafely)return g;var k=g.resolvedRefMap||(g.resolvedRefMap=new Map);d(g,[]);g.referencesResolvedSafely=!0;return g}function fr(g,d){d=$jscomp.makeIterator(d.resolvedRefMap.values());for(var k=d.next();!k.done;k=d.next()){k=k.value;var e=k.ref,h=e.end;if(e.start<=g&&g<=h)return k}}function pu(g,d){function k(b){var c=hd._declaredVarNames(b,e);return hd.arr.filter(b.subScopes.map(k).reduce(function(l,a){return l.concat(a)},b.refs),function(l){return-1===c.indexOf(l.name)})}
d=d||{};d.withComments=!0;"string"===typeof g&&(g=hd.parse(g,d));g=hd.scopes(g);var e=!!d.jslintGlobalComment;d=hd._declaredVarNames(g,e);var h=g.refs.concat(hd.arr.flatten(g.subScopes.map(k))),n=hd.arr.withoutAll(h.map(function(b){return b.name}),d);return{scope:g,varDecls:g.varDecls,funcDecls:hd.arr.filter(g.funcDecls,function(b){return b.id}),classDecls:hd.arr.filter(g.classDecls,function(b){return b.id}),declaredNames:d,undeclaredNames:n,refs:h,thisRefs:g.thisRefs}}function Cs(g,d){g=hd.topLevelDeclsAndRefs(g,
d);var k=g.declaredNames.concat(hd.knownGlobals);return hd.arr.filter(g.refs,function(e){return-1===k.indexOf(e.name)})}function Om(g,d,k,e){if(!d&&!g)throw Error("Need at least ast or code");d=d||hd.stringify(g);g=g&&g.loc?g:hd.parse(d,{locations:!0});return hd.withMozillaAstDo(g,[],function(h,n,b){k.every(function(c){return hd.num.between(c,n.loc.start.line,n.loc.end.line)})&&(hd.arr.pushIfNotIncluded(b,n),h());return b})}function Mo(g,d,k,e){k=void 0===k?!0:k;e=void 0===e?{refs:[],decls:[]}:e;
if("this"===d)return e.refs.push.apply(e.refs,$jscomp.arrayFromIterable(g.thisRefs)),e;var h=hd.__varDeclIdsFor(g,d);if(!k&&h.length)return e;k=$jscomp.makeIterator(g.refs);for(var n=k.next();!n.done;n=k.next())n=n.value,n.name===d&&e.refs.push(n);e.decls.push.apply(e.decls,$jscomp.arrayFromIterable(h));g=$jscomp.makeIterator(g.subScopes);for(h=g.next();!h.done;h=g.next())Mo(h.value,d,!1,e);return e}function qu(g,d,k){var e=null;hd.arr.detect(hd.scopesAtIndex(g,k).reverse(),function(h){h=hd.declarationsOfScope(h,
!0);var n=hd.arr.pluck(h,"name").indexOf(d);if(-1===n)return!1;e=h[n];return!0});return e}function Ax(g,d){d="string"===typeof d?hd.parse(d):d;return hd.custom.findNodesIncluding(d,g)}function Lk(g,d,k){var e=hd.nodesAt(d.start,g).reverse().find(function(n){return hd.arr.include(hd._stmtTypes,n.type)});if(k&&k.asPath){d=new hd.BaseVisitor;var h;d.accept=hd.fun.wrap(d.accept,function(n,b,c,l){if(b===e)throw h=l,Error("stop search");return n(b,c,l)});try{d.accept(g,{},[])}catch(n){}return h}return e}
function Qp(g){var d=[];g=g.node.body||[];for(var k=0;k<g.length;k++){var e=g[k];if("ImportDeclaration"===e.type)if(0===e.specifiers.length)d.push({local:null,imported:null,fromModule:e.source.value,node:e});else{var h=e.source?e.source.value:"unknown module";d.push.apply(d,$jscomp.arrayFromIterable(e.specifiers.map(function(n){return{local:n.local?n.local.name:null,imported:"ImportNamespaceSpecifier"===n.type?"*":"ImportDefaultSpecifier"===n.type?"default":"ImportSpecifier"===n.type?n.imported.name:
null,fromModule:h,node:e}})))}}return d}function Jz(g,d){(void 0===d?0:d)&&hd.resolveReferences(g);d=[];for(var k={},e=$jscomp.makeIterator(g.exportDecls),h=e.next();!h.done;k={$jscomp$loop$prop$node$2526:k.$jscomp$loop$prop$node$2526},h=e.next()){k.$jscomp$loop$prop$node$2526=h.value;var n=hd.statementOf(g.node,k.$jscomp$loop$prop$node$2526);if(n){var b=n.source?n.source.value:null;"ExportAllDeclaration"===n.type?d.push({local:null,exported:"*",imported:"*",fromModule:b,node:k.$jscomp$loop$prop$node$2526,
type:"all"}):"ExportDefaultDeclaration"===n.type?hd.helpers.isDeclaration(n.declaration)?d.push({local:n.declaration.id?n.declaration.id.name:null,exported:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:k.$jscomp$loop$prop$node$2526,decl:n.declaration,declId:n.declaration.id}):"Identifier"===n.declaration.type?(h=g.resolvedRefMap.get(n.declaration)||{},d.push({local:n.declaration.name,exported:"default",
fromModule:null,node:k.$jscomp$loop$prop$node$2526,type:"id",decl:h.decl,declId:h.declId})):d.push({local:null,exported:"default",fromModule:null,node:k.$jscomp$loop$prop$node$2526,type:"expr",decl:n.declaration,declId:n.declaration}):n.specifiers&&n.specifiers.length?d.push.apply(d,$jscomp.arrayFromIterable(n.specifiers.map(function(c){return function(l){if(b){var a=c.$jscomp$loop$prop$node$2526;var f=l.exported}else l.local&&(a=(f=g.resolvedRefMap.get(l.local))?f.decl:null,f=f?f.declId:null);return{local:!b&&
l.local?l.local.name:null,exported:l.exported?l.exported.name:null,imported:b&&l.local?l.local.name:null,fromModule:b||null,type:"id",node:c.$jscomp$loop$prop$node$2526,decl:a,declId:f}}}(k)))):n.declaration&&n.declaration.declarations?d.push.apply(d,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(c){return function(l){return{local:l.id?l.id.name:"default",exported:l.id?l.id.name:"default",type:n.declaration.kind,fromModule:null,node:c.$jscomp$loop$prop$node$2526,decl:l,declId:l.id}}}(k)))):
n.declaration&&d.push({local:n.declaration.id?n.declaration.id.name:"default",exported:n.declaration.id?n.declaration.id.name:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:k.$jscomp$loop$prop$node$2526,decl:n.declaration,declId:n.declaration.id})}}return hd.arr.uniqBy(d,function(c,l){return c.local==l.local&&c.exported==l.exported&&c.fromModule==l.fromModule})}function ru(g){return(new No.ObjectSpreadTransformer).accept(g,
{},[])}function Kz(g,d){if(g.start===d.start&&g.end===d.end)return 0;if(g.end<=d.start)return-1;if(g.start>=d.end||g.start<=d.start&&g.end>=d.end)return 1;if(d.start<=g.start&&d.end>=g.end)return-1;throw Error("Comparing nodes");}function bo(g,d,k){k="object"===typeof k?k:{changes:[],source:k};var e=!1,h=k.changes.reduce(function(b,c){if(b.end<c.pos)return b;var l=c.pos<b.start;e=e||c.pos>=b.start&&c.pos<=b.end;if("add"===c.type)return{start:l?b.start+c.string.length:b.start,end:b.end+c.string.length};
if("del"===c.type)return{start:l?b.start-c.length:b.start,end:b.end-c.length};throw Error("Cannot deal with change "+Cd.obj.inspect(c));},{start:g.start,end:g.end}),n=k.source;g=d(g,n.slice(h.start,h.end),e);g="string"===typeof g?g:Array.isArray(g)?g.map(Cd._node2string).join("\n"+Cd._findIndentAt(n,h.start)):g=Cd._node2string(g);h=[{type:"del",pos:h.start,length:h.end-h.start},{type:"add",pos:h.start,string:g}];return{changes:k.changes.concat(h),source:Cd._applyChanges(h,n)}}function su(g,d){g=g.sort(function(h,
n){return Cd._compareNodesForReplacement(h.target,n.target)});d="object"===typeof d?d:{changes:[],source:d};for(var k=0;k<g.length;k++){var e=g[k];d=Cd.replaceNode(e.target,e.replacementFunc,d)}return d}function tu(g,d,k,e){e="object"===typeof g?g:null;g="string"===typeof g?g:e.source||Cd._node2string(e);return Cd.replaceNode(d,k,g)}function Lz(g,d){d=void 0===d?[]:d;d.push.apply(d,$jscomp.arrayFromIterable(g.varDecls));g=$jscomp.makeIterator(g.subScopes);for(var k=g.next();!k.done;k=g.next())Lz(k.value,
d);return d}function Mz(g){var d="object"===typeof g?g:Cd.parse(g);g="string"===typeof g?g:d.source||Cd._node2string(d);d=Cd.scopes(d);var k=Cd.__findVarDecls(d);d=[];k=$jscomp.makeIterator(k);for(var e=k.next();!e.done;e=k.next())d.push({target:e.value,replacementFunc:function(h,n,b){b&&(h=Cd.parse(n).body[0]);return h.declarations.map(function(c){return{type:"VariableDeclaration",kind:"var",declarations:[c]}})}});return Cd.replaceNodes(d,g)}function Bx(g){var d="object"===typeof g?g:Cd.parse(g);
g="string"===typeof g?g:d.source||Cd._node2string(d);d=Cd.scopes(d);var k=Cd.__findVarDecls(d);d=[];k=$jscomp.makeIterator(k);for(var e=k.next();!e.done;e=k.next())d.push({target:e.value,replacementFunc:function(h,n,b){b&&(h=Cd.parse(n).body[0]);n=[];h=$jscomp.makeIterator(h.declarations);for(b=h.next();!b.done;b=h.next()){var c=b.value;b={type:"Identifier",name:"__temp"};n.push({type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:b,init:c.init}]});c=$jscomp.makeIterator(Cd.helpers.objPropertiesAsList(c.id,
[],!1));for(var l=c.next();!l.done;l=c.next())l=l.value.key,n.push(Cd.varDecl(l[l.length-2],Cd.memberChain.apply(Cd,[b.name].concat($jscomp.arrayFromIterable(l))),"var"))}return n}});return Cd.replaceNodes(d,g)}function gr(g,d){d=d||{};var k=Cd.parse(g,d),e=Cd.arr.last(k.body);if("ExpressionStatement"!==e.type)return d.asAST?k:g;k.body.splice(k.body.length-1,1,Cd.returnStmt(e.expression));return d.asAST?k:Cd.stringify(k)}function hr(g,d){d=d||{};g=Cd.returnLastStatement(g,d);return d.asAST?Cd.program(Cd.funcExpr.apply(Cd,
[{id:d.id||void 0},[]].concat($jscomp.arrayFromIterable(g.body)))):"function"+(d.id?" "+d.id:"")+"() {\n"+g+"\n}"}function Ds(g,d){"string"===typeof g&&(g=Cd.parse(g));d=d||{};var k="Program"===g.type,e=d.startFuncNode||Cd.id("__start_execution");d=d.endFuncNode||Cd.id("__end_execution");var h=Cd.topLevelFuncDecls(g),n=g.body,b=[];h.forEach(function(c){var l=c.node;Cd.Path(c.path).set(g,Cd.exprStmt(l.id));b.push(l)});n.unshift(Cd.exprStmt(Cd.funcCall(e)));e=Cd.arr.last(n);"ExpressionStatement"===
e.type?(n.pop(),n.push(Cd.exprStmt(Cd.funcCall(d,Cd.id("null"),e.expression)))):"VariableDeclaration"===e.type&&"Identifier"===Cd.arr.last(e.declarations).id.type?n.push(Cd.exprStmt(Cd.funcCall(d,Cd.id("null"),Cd.arr.last(e.declarations).id))):n.push(Cd.exprStmt(Cd.funcCall(d,Cd.id("null"),Cd.id("undefined"))));b.push(Cd.tryStmt.apply(Cd,["err",[Cd.exprStmt(Cd.funcCall(d,Cd.id("err"),Cd.id("undefined")))]].concat($jscomp.arrayFromIterable(n))));return k?Cd.program.apply(Cd,$jscomp.arrayFromIterable(b)):
Cd.block.apply(Cd,$jscomp.arrayFromIterable(b))}function Oo(g){if(!Cd.isProbablySingleExpressionRe.test(g)||30<g.split("\n").length)return g;try{var d=Cd.fuzzyParse(g);1===d.body.length&&("FunctionDeclaration"===d.body[0].type||"BlockStatement"===d.body[0].type&&"LabeledStatement"===d.body[0].body[0].type)&&(g="("+g.replace(/;\s*$/,"")+")")}catch(k){"undefined"!==typeof $world?$world.logError(k):console.error("Eval preprocess error: %s",k.stack||k)}return g}function Nz(g,d){var k=cf.statementOf(g,
d,{asPath:!0}).slice(0,-2);k=cf.Path(k).get(g);return k.comments&&k.comments.length?cf.chain(cf.extractComments(g)).reversed().detect(function(e){return e.followingNode===d}).value():null}function Pm(g,d){function k(r){return cf.arr.detect(r.node.body,function(u){return u.start>r.comment.end})}function e(r){return{type:"unknown",comment:r.comment.text}}function h(r){r=cf.Path(r.path.slice(0,-1)).get(f);return{name:r.id?r.id.name:"<error: no name for function>",args:cf.arr.pluck(r.params,"name")}}
function n(r){for(var u=cf.Path(r.path.slice(0,-2)).get(f),v=u.key?u.key.name:"<error: no name for method>",y=r.path.slice(),z="<error: no object found for method>";y.length&&"init"!==cf.arr.last(y);)y.pop();y.length&&(z=cf.Path(y.slice(0,-1).concat(["id","name"])).get(f));if(cf.string.startsWith(z,"<error")){for(y=r.path.slice();y.length&&"right"!==cf.arr.last(y);)y.pop();y.length&&(z=cf.Path(y.slice(0,-1).concat(["left"])).get(f),z=m.slice(z.start,z.end))}cf.string.startsWith(z,"<error")&&(y=r.path.slice(),
(r=(r=cf.Path(y.slice(0,-6)).get(f))&&"CallExpression"===r.type&&r.arguments[0])&&(z=m.slice(r.start,r.end)));return{name:v,args:cf.arr.pluck(u.value.params,"name"),objectName:z}}function b(r){r=cf.Path(r.path.slice(0,-1)).get(f);if("FunctionExpression"!==r.type&&"FunctionDeclaration"!==r.type)return{};var u=cf.statementOf(f,r);if("ExpressionStatement"!==u.type||"AssignmentExpression"!==u.expression.type)return{};var v=m.slice(u.expression.left.object.start,u.expression.left.object.end);return{name:m.slice(u.expression.left.property.start,
u.expression.left.property.end),objectName:v,args:cf.arr.pluck(r.params,"name")}}function c(r){var u=r.path.slice(0,-3);var v=cf.Path(u).get(f);if(v&&"Property"===v.type){var y=cf.arr.pluck(v.value.callee.params,"name");var z=v.key?v.key.name:"<error: no name for method>"}z||(u=r.path.slice(0,-2),(v=cf.Path(u).get(f))&&"Property"===v.type&&(y=cf.arr.pluck(v.value.params,"name"),z=v.key?v.key.name:"<error: no name for method>"));z||(z="<error: no name for method>",y=[],u=r.path);v=cf.arr.clone(u);
for(r="<error: no object found for method>";v.length&&"init"!==cf.arr.last(v);)v.pop();v.length&&(r=cf.Path(v.slice(0,-1).concat(["id","name"])).get(f));if(cf.string.startsWith(r,"<error")){for(v=cf.arr.clone(u);v.length&&"right"!==cf.arr.last(v);)v.pop();v.length&&(r=cf.Path(v.slice(0,-1).concat(["left"])).get(f),r=m.slice(r.start,r.end))}cf.string.startsWith(r,"<error")&&(v=cf.arr.clone(u),(u=(u=cf.Path(v.slice(0,-4)).get(f))&&"CallExpression"===u.type&&u.arguments[0])&&(r=m.slice(u.start,u.end)));
return{name:z,args:y,objectName:r}}function l(r){return r&&"VariableDeclaration"===r.type&&1===r.declarations.length}function a(r){return"AssignmentExpression"!==r.type?!1:"ObjectExpression"===r.right.type?!0:"AssignmentExpression"===r.right.type?a(r.right):!1}var f="string"===typeof g?cf.parse(g,{withComments:!0}):g,m=d||("string"===typeof g?g:cf.stringify(g)),q=cf.arr.sortBy(function(r){var u=[],v=new cf.Visitor;v.accept=cf.fun.wrap(v.accept,function(y,z,A,C){z.comments&&cf.arr.pushAll(u,z.comments.map(function(G){return{path:C,
comment:G,node:z}}));return y(z,A,C)});v.accept(r,u,[]);return u}(f),function(r){return r.comment.start});return q.map(function(r,u){if(cf.arr.equals(r.path.slice(-2),["value","body"]))return cf.obj.merge([r,r.comment,{type:"method",comment:r.comment.text},n(r)]);var v=r.path.slice(-5);cf.arr.removeAt(v,1);if(cf.arr.equals(v,["properties","value","callee","body"]))return cf.obj.merge([r,r.comment,{type:"method",comment:r.comment.text},c(r)]);if((v=cf.Path(r.path.slice(0,-1)).get(f))&&"FunctionDeclaration"===
v.type)return cf.obj.merge([r,r.comment,{type:"function",comment:r.comment.text},h(r)]);if(cf.arr.equals(r.path.slice(-2),["right","body"]))return cf.obj.merge([r,r.comment,{type:"method",comment:r.comment.text},b(r)]);v=k(r);return v?(u=q[u+1])&&u.comment.start<=v.start?cf.obj.merge([r,r.comment,{followingNode:v},e(r)]):l(v)&&("ObjectExpression"===v.declarations[0].init.type||a(v.declarations[0].init))?cf.obj.merge([r,r.comment,{followingNode:v},{type:"object",comment:r.comment.text},{name:v.declarations[0].id.name}]):
l(v)?cf.obj.merge([r,r.comment,{followingNode:v},{type:"var",comment:r.comment.text},{name:v.declarations[0].id.name}]):cf.obj.merge([r,r.comment,{followingNode:v},e(r)]):cf.obj.merge([r,r.comment,{followingNode:v},e(r)])})}function ir(g,d){d=d||Qg.obj.merge({hideOneLiners:!1},d);"string"===typeof g&&(g=Qg.parse(g,{addSource:!0}));for(var k=[],e=$jscomp.makeIterator("Program"===g.type?g.body:g.body.body),h=e.next();!h.done;h=e.next()){h=h.value;h=Qg.unwrapExport(h);var n=Qg.functionWrapper(h,d)||
Qg.varDefs(h)||Qg.funcDef(h)||Qg.es6ClassDef(h)||Qg.someObjectExpressionCall(h);if(n){if(d.hideOneLiners)if(g.loc)n=Qg.arr.filter(n,function(c){return!c.node.loc||c.node.loc.start.line!==c.node.loc.end.line});else if(g.source){h=[];n=$jscomp.makeIterator(n);for(var b=n.next();!b.done;b=n.next())b=b.value,(b.parent&&h.includes(b.parent)||(b.node.source||"").includes("\n"))&&h.push(b);n=h}k.push.apply(k,$jscomp.arrayFromIterable(n))}}return k}function Es(g){return Qg.arr.flatmap(g,function(d){return d?
"Identifier"===d.type?[d]:"RestElement"===d.type?[d.argument]:"ObjectPattern"===d.type?Es(Qg.arr.pluck(d.properties,"value")):"ArrayPattern"===d.type?Es(d.elements):[]:[]})}function co(g){return uf.isValidIdentifierRe.test(g)}function nm(){return"undefined"!==typeof System?System.global:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof Global?Global:"undefined"!==typeof self?self:function(){return this}()}function uu(g,d){d=String(d).match(/function\s*[a-zA-Z0-9_$]*\s*\(([^\)]*)\)/);
return g+"("+(d&&d[1]||"")+")"}function Fs(g){return g===g||g===Array||g===Function||g===String||g===Boolean||g===Date||g===RegExp||g===Number||g===Promise?!0:g instanceof Function&&(void 0!==g.superclass||void 0!==g._superclass)}function vu(g,d){return g.map(function(k){return k[d]})}function Mk(g){if(Symbol.keyFor(g))return'Symbol.for("'+Symbol.keyFor(g)+'")';if(Rg.knownSymbols.get(g))return Rg.knownSymbols.get(g);String(g).match(Rg.symMatcher);return String(g)}function Ov(g){if(!g)return String(g);
if(Array.isArray(g))return"["+g.map(Ov).join(",")+"]";if("symbol"===typeof g)return Rg.printSymbol(g);try{return String(g)}catch(d){throw Error("Cannot print object: "+d.stack);}}function jr(g,d){d=void 0===d?{}:d;var k=g.value,e=g.isPromise,h=g.promisedValue,n=g.promiseStatus;return g.isError||k instanceof Error?(d=String(k),(h=k.stack||"")&&k.message!==k.stack&&(h=String(h),0===h.indexOf(d)&&(h=h.slice(d.length)),d+="\n"+h),d):e?(g=Rg.string.print(n),d="pending"===n?void 0:jr({value:h},d),"Promise({status: "+
g+", "+(void 0===k?"":"value: "+d)+"})"):k instanceof Promise?'Promise({status: "unknown"})':d.inspect?Rg.printInspectEvalValue(k,d.inspectDepth||2):String(k)}function Cx(g,d){var k="";return Promise.resolve().then(function(){var e=d.lastIndexOf(".");0<=e?(k=d.slice(e+1),d=d.slice(0,e)):(k=d,d='(typeof window === "undefined" ? global : window)');return g(d)}).then(function(e){return{evalResult:e,startLetters:k,code:d}})}function Nk(g,d,k){g=uh.getObjectForCompletion(g,d).then(function(e){var h=e.evalResult;
e={completions:uh.descriptorsOfObjAndProtoProperties(h&&h.isEvalResult?h.value:h),startLetters:e.startLetters,code:e.code};h&&h.isPromise&&("fulfilled"===h.promiseStatus?e.promiseResolvedCompletions=uh.descriptorsOfObjAndProtoProperties(h.promisedValue):"rejected"===h.promiseStatus&&(e.promiseRejectedCompletions=uh.descriptorsOfObjAndProtoProperties(h.promisedValue)));return e});"function"===typeof k&&g.then(function(e){return k(null,e)}).catch(function(e){return k(e)});return g}function Gs(g,d,k){d||
(d={type:"Identifier",name:"__rec"});k=Object.assign({ignoreUndeclaredExcept:null,includeRefs:null,excludeRefs:k&&k.exclude||[],includeDecls:null,excludeDecls:k&&k.exclude||[],recordDefRanges:!1,es6ExportFuncId:null,es6ImportFuncId:null,captureObj:d,moduleExportFunc:{name:k&&k.es6ExportFuncId||"_moduleExport",type:"Identifier"},moduleImportFunc:{name:k&&k.es6ImportFuncId||"_moduleImport",type:"Identifier"},declarationWrapper:void 0,classTransform:function(h){return h}},k);d=g;if(k.ignoreUndeclaredExcept){var e=
$b.topLevelDeclsAndRefs(g);k.excludeRefs=$b.arr.withoutAll(e.undeclaredNames,k.ignoreUndeclaredExcept).concat(k.excludeRefs);k.excludeDecls=$b.arr.withoutAll(e.undeclaredNames,k.ignoreUndeclaredExcept).concat(k.excludeDecls)}k.excludeRefs=k.excludeRefs.concat(k.captureObj.name);k.excludeDecls=k.excludeDecls.concat(k.captureObj.name);k.recordDefRanges&&$b.computeDefRanges(d,k);k.excludeRefs=k.excludeRefs.concat($b.additionalIgnoredRefs(g,k));k.excludeDecls=k.excludeDecls.concat($b.additionalIgnoredDecls(g,
k));d=$b.fixDefaultAsyncFunctionExportForRegeneratorBug(d,k);k.es6ExportFuncId&&(k.excludeRefs.push(k.es6ExportFuncId),k.excludeRefs.push(k.es6ImportFuncId),d=$b.es6ModuleTransforms(d,k));d=$b.replaceRefs(d,k);d=$b.replaceVarDecls(d,k);d=$b.clearEmptyExports(d,k);d=$b.replaceClassDecls(d,k);d=$b.splitExportDeclarations(d,k);d=$b.insertCapturesForExportDeclarations(d,k);d=$b.insertCapturesForImportDeclarations(d,k);d=$b.insertDeclarationsForExports(d,k);d=$b.putFunctionDeclsInFront(d,k);return d=$b.transformImportMeta(d,
k)}function wu(g,d,k){k=Object.assign({captureObj:d||{type:"Identifier",name:"__rec"},exclude:[],declarationWrapper:void 0},k);d=$b.Path("body.0.expression").get(g);if("System"!==d.callee.object.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+$b.stringify(g).slice(0,300)+"...");if("register"!==d.callee.property.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+$b.stringify(g).slice(0,
300)+"...");d=$b.Path("arguments.1.body.body").get(d);var e=$b.arr.last(d);if("ReturnStatement"!==e.type)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at return statement: "+$b.stringify(g).slice(0,300)+"...");var h=e.argument.properties.find(function(n){return"setters"===n.key.name});if(!h)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding setters: "+$b.stringify(g).slice(0,300)+
"...");e=e.argument.properties.find(function(n){return"execute"===n.key.name});if(!e)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding execute: "+$b.stringify(g).slice(0,300)+"...");h.value.elements.forEach(function(n){n.params[0]=$b.assign(n.params[0],$b.nodes.objectLiteral({}));n.body.body=n.body.body.map(function(b){if("ExpressionStatement"!==b.type||"AssignmentExpression"!==b.expression.type||"Identifier"!==b.expression.left.type||
$b.arr.include(k.exclude,b.expression.left.name))return b;var c=b.expression.left;b=k.declarationWrapper?$b.declarationWrapperCall(k.declarationWrapper,null,$b.literal(c.name),$b.literal("var"),b.expression,k.captureObj,k):b.expression;return $b.exprStmt($b.assign($b.member(k.captureObj,c),b))})});(h=e.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===k.captureObj.name}))||(h=e.value.body.body.find(function(n){return"VariableDeclaration"===
n.type&&n.declarations[0].id&&n.declarations[0].id.name===k.captureObj.name}));h&&($b.arr.remove(e.value.body.body,h),$b.arr.pushAt(d,h,d.length-1));k.sourceAccessorName&&((h=e.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===k.sourceAccessorName}))||(h=e.value.body.body.find(function(n){return"VariableDeclaration"===n.type&&n.declarations[0].id&&n.declarations[0].id.name===k.sourceAccessorName})),h&&($b.arr.remove(e.value.body.body,
h),$b.arr.pushAt(d,h,d.length-1)));return g}function xu(g,d){var k=$b.stringify(d.captureObj),e=0;g.body=g.body.reduce(function(h,n){var b=[n],c="",l=!1;if("ExportNamedDeclaration"===n.type){if(n.source){var a=n.specifiers.map(function(f){return[f.local.name,f.exported.name]});c="import { "+a.map(function(f){var m=$jscomp.makeIterator(f);f=m.next().value;m=m.next().value;return f===m?m:f+" as "+m}).join(",")+" } from "+n.source.raw+";\n";l="export { "+a.map(function(f){f=$jscomp.makeIterator(f);f.next();
return f.next().value}).join(",")+" };\n"}else n.declaration?(a=n.declaration.declarations||[],a=a.map(function(f){return[f.id.name,f.id.name]})):a=n.specifiers.map(function(f){return[f.exported.name,f.local.name]});l&&(b=[],c+=l);b=b.concat($b.parse(c+a.map(function(f){var m=$jscomp.makeIterator(f);f=m.next().value;m=m.next().value;return k+"."+f+" = "+m+";\n"+(k+"."+m+" = "+m+";\n")}).join("\n")))}"ExportAllDeclaration"===n.type&&(e++,b=b.concat($b.parse("\n       import * as __captured"+e+"__ from "+
n.source.raw+";\n       Object.assign("+k+", __captured"+e+"__);\n      ")));return h.concat(b)},[]);return g}function Oz(g){(this||Dx).__wrapped__=g;(this||Dx).__actions__=[];(this||Dx).__dir__=1;(this||Dx).__filtered__=!1;(this||Dx).__iteratees__=[];(this||Dx).__takeCount__=4294967295;(this||Dx).__views__=[]}function Ex(g,d){(this||$B).__wrapped__=g;(this||$B).__actions__=[];(this||$B).__chain__=!!d;(this||$B).__index__=0;(this||$B).__values__=void 0}function kr(g){if(K5(g)&&!L5(g)&&!(g instanceof
M5)){if(g instanceof nS)return g;if(N5.call(g,"__wrapped__"))return O5(g)}return new nS(g)}function Hs(g,d,k,e,h,n,b,c,l,a){function f(){for(var z=arguments.length,A=Array(z),C=z;C--;)A[C]=arguments[C];if(u)var G=P5(f),F=Q5(A,G);e&&(A=R5(A,e,h,u));n&&(A=S5(A,n,b,u));z-=F;if(u&&z<a)return C=T5(A,G),U5(g,d,Hs,f.placeholder,k,A,C,c,l,a-z);C=q?k:this||kF;G=r?C[g]:g;z=A.length;c?A=V5(A,c):v&&1<z&&A.reverse();m&&l<z&&(A.length=l);(this||kF)&&(this||kF)!==W5&&(this||kF)instanceof f&&(G=y||oS(G));return G.apply(C,
A)}var m=d&128,q=d&1,r=d&2,u=d&24,v=d&512,y=r?void 0:oS(g);return f}function lr(g){return g&&g.__esModule?g:{default:g}}function aC(g){if(Array.isArray(g)){for(var d=0,k=Array(g.length);d<g.length;d++)k[d]=g[d];return k}return Array.from(g)}function lF(g){var d=null;"string"===typeof g.version&&/^7\./.test(g.version)&&(d=Object.getPrototypeOf(g),!d||Object.prototype.hasOwnProperty.call(d,"version")&&Object.prototype.hasOwnProperty.call(d,"transform")&&Object.prototype.hasOwnProperty.call(d,"template")&&
Object.prototype.hasOwnProperty.call(d,"types")||(d=null));return Object.assign({},d,g)}function Ll(g,d){d=void 0===d?"__lvVarRecorder":d;Ci.ensureJSXPlugin();"function"===typeof g&&(g=String(g));if(lively.FreezerRuntime)return g.split(d+".").join("");g="string"===typeof g?Ci.parseFunction(g):g;g=Ci.ReplaceVisitor.run(g,function(k){return"MemberExpression"===k.type&&"Identifier"===k.object.type&&k.object.name===d?k.property:k});return Ci.stringify(g)}function yu(g){if("undefined"===typeof babel)return console.warn("[lively.freezer] Skipped async/await transpilation because babel not loaded."),
g;Ci.ensureJSXPlugin();Ci.ensureOptionalCatchBinding();Ci.ensureImportMeta();g=babel.transform(g,{sourceMap:void 0,inputSourceMap:void 0,babelrc:!1,presets:[["es2015",{modules:!1}]],plugins:["transform-exponentiation-operator","transform-async-to-generator","syntax-object-rest-spread","transform-object-rest-spread"],code:!0,ast:!1}).code;g=g.replace(/\}\)\.call\(undefined\);$/,"}).call(this)");g.startsWith("(function")&&g.endsWith(");")&&(g=g.slice(1,-2));return g}function mr(g,d){g=Ff.transform.transformSingleExpression(g);
g=Ff.parse(g,{withComments:!0});d=Ff.processInlineCodeTransformOptions(g,d);var k=Ff.query.topLevelDeclsAndRefs(g),e=k.classDecls,h=k.funcDecls;k=k.varDecls;var n={};d.hasOwnProperty("evalId")&&(n.evalId=d.evalId);d.sourceAccessorName&&(n.sourceAccessorName=d.sourceAccessorName);[].concat($jscomp.arrayFromIterable(e),$jscomp.arrayFromIterable(h)).forEach(function(l){return l["x-lively-object-meta"]=Object.assign({},n,{start:l.start,end:l.end})});k.forEach(function(l){return l.declarations.forEach(function(a){return a["x-lively-object-meta"]=
Object.assign({},n,{start:a.start,end:a.end})})});g=Ff.transform.objectSpreadTransform(g);!d.topLevelVarRecorder&&d.topLevelVarRecorderName&&(e=Ff.getGlobal(),d.topLevelVarRecorder="GLOBAL"===d.topLevelVarRecorderName?Ff.getGlobal():Ff.Path(d.topLevelVarRecorderName).get(e));if(d.topLevelVarRecorder){e=(d.dontTransform||[]).concat(["arguments"]);h=d.recordGlobals?null:Ff.arr.withoutAll(Object.keys(d.topLevelVarRecorder),e);k=Ff.id(d.varRecorderName||"__lvVarRecorder");var b=void 0;if(d.declarationWrapperName||
"function"===typeof d.declarationCallback){var c=d.declarationWrapperName||Ff.defaultDeclarationWrapperName;d.declarationWrapper=Ff.member(Ff.id(d.varRecorderName||"__lvVarRecorder"),Ff.literal(c),!0);d.declarationCallback&&(d.topLevelVarRecorder[c]=d.declarationCallback)}if(d.hasOwnProperty("transformES6Classes")?d.transformES6Classes:1)b={currentModuleAccessor:d.currentModuleAccessor,classHolder:k,functionNode:Ff.member(k,Ff.defaultClassToFunctionConverterName),declarationWrapper:d.declarationWrapper,
evalId:d.evalId,sourceAccessorName:d.sourceAccessorName,transform:d.classTransform};g=Ff.capturing.rewriteToCaptureTopLevelVariables(g,k,{es6ImportFuncId:d.es6ImportFuncId,es6ExportFuncId:d.es6ExportFuncId,ignoreUndeclaredExcept:h,exclude:e,declarationWrapper:d.declarationWrapper||void 0,classToFunction:b,evalId:d.evalId,sourceAccessorName:d.sourceAccessorName,keepTopLevelVarDecls:d.keepTopLevelVarDecls})}d.wrapInStartEndCall&&(g=Ff.transform.wrapInStartEndCall(g,{startFuncNode:d.startFuncNode,endFuncNode:d.endFuncNode}));
g=Ff.stringify(g);d.jsx&&(g=Ff.es5Transpilation(g));d.sourceURL&&(g+="\n//# sourceURL="+d.sourceURL.replace(/\s/g,"_"));return g}function Po(g,d){d=void 0===d?{}:d;if(!d.topLevelVarRecorder)return g;if("function"===typeof d.declarationCallback||d.declarationWrapperName){var k=d.declarationWrapperName||Ff.defaultDeclarationWrapperName;d.declarationWrapper=Ff.member(Ff.id(d.varRecorderName),Ff.literal(k),!0);d.declarationCallback&&(d.topLevelVarRecorder[k]=d.declarationCallback)}g=Ff.parse(g);k=(d.dontTransform||
[]).concat(["arguments"]);d.recordGlobals||Ff.arr.withoutAll(Object.keys(d.topLevelVarRecorder),k);d=Ff.capturing.rewriteToRegisterModuleToCaptureSetters(g,Ff.id(d.varRecorderName||"__lvVarRecorder"),Object.assign({exclude:k},d));return Ff.stringify(d)}function Ok(g,d,k){"function"===typeof d&&2===arguments.length&&(k=d,d=null);var e=new Uf.EvalResult,h=!1,n=!1;d=Uf._normalizeEvalOptions(d);var b=Uf.promise.deferred(),c=d.topLevelVarRecorder||Uf.getGlobal(),l=g;d.wrapInStartEndCall&&(c[Uf.startEvalFunctionName]&&
console.warn(e.addWarning("startEvalFunctionName "+Uf.startEvalFunctionName+" already exists in recorder!")),c[Uf.endEvalFunctionName]&&console.warn(e.addWarning("endEvalFunctionName "+Uf.endEvalFunctionName+" already exists in recorder!")),c[Uf.startEvalFunctionName]=function(){if(h)console.warn(e.addWarning("onEvalStartCalled multiple times!"));else if(h=!0,"function"===typeof d.onStartEval)d.onStartEval()},c[Uf.endEvalFunctionName]=function(m,q){n?console.warn(e.addWarning("onEvalEndCalled multiple times!")):
(n=!0,Uf.finishEval(m,q,e,d,c,b,k))});try{g=Uf.evalCodeTransform(g,d),d.header&&(g=d.header+g),d.footer&&(g+=d.footer),d.transpiler&&(g=d.transpiler(g,d.transpilerOptions))}catch(m){console.warn(e.addWarning("lively.vm evalCodeTransform not working: "+m))}try{"undefined"!==typeof $world&&$world.get("log")&&($world.get("log").textString=g);var a=Uf._eval.call(d.context,g,d.topLevelVarRecorder,d.originalSource||l)}catch(m){var f=m}if(d.wrapInStartEndCall){if(f&&!n)c[Uf.endEvalFunctionName](f,void 0)}else Uf.finishEval(f,
f||a,e,d,c,b,k);return d.sync?e:b.promise}function Qo(g,d){d=Object.assign(d||{},{sync:!0});return Uf.runEval(g,d)}function nr(g){if(void 0===g){if("undefined"===typeof System)return null;g=System}var d=g.get("@lively-env");d||g.set("@lively-env",g.newModule({options:{}}));d=d.options;if(!d)throw Error("@lively-env registered read-only");d.emitter||Object.assign(d,{emitter:g["__lively.notifications_emitter"]||(g["__lively.notifications_emitter"]=Pz({},{maxListenerLimit:1E4})),notifications:g["__lively.notifications_notifications"]||
(g["__lively.notifications_notifications"]=[])});return{emitter:d.emitter,notifications:d.notifications}}function ol(g,d,k){nr(k).emitter.on(g,d);return d}function Qm(g,d,k,e){d=void 0===d?{}:d;k=void 0===k?Date.now():k;d=Object.assign({type:g,time:k},d);k=nr(e);e=k.emitter;k=k.notifications;e.emit(g,d);e.isLogging&&(g=d.type+" ".repeat(Math.max(0,32-d.type.length)),console.log(g+" "+Yf(d,{maxDepth:2})));e.isRecording&&(k.push(d),k.limit&&k.splice(0,k.length-k.limit));return d}function Qz(g,d,k){nr(k).emitter.removeListener(g,
d);return d}function Wj(g,d,k){k=Object.assign({targetModule:null,parentModule:null,es6Transpile:!0,transpiler:null,transpilerOptions:null,format:"esm"},k);g.debug&&console.log("[lively.module] runEval: "+d.slice(0,100).replace(/\n/mg," ")+"...");var e=k,h=e.format,n=e.targetModule;n=g.decanonicalize(n||"*scratch*",e.parentModule);k.targetModule=n;h&&((e=g.getConfig().meta[n])||(e={}),e[n]||(e[n]={}),e[n].format||(e[n].format=h,g.config(e)));h=g.get("@lively-env").moduleEnv(n);e=h.recorder;var b=
h.recorderName,c=h.dontTransform,l=ih.getEs6Transpiler(g,k,h),a="var _moduleExport = "+b+"._moduleExport,\n    _moduleImport = "+(b+"._moduleImport;\n");k=Object.assign({waitForPromise:!0,sync:!1,evalId:k.evalId||h.nextEvalId(),sourceAccessorName:(k.hasOwnProperty("embedOriginalCode")?k.embedOriginalCode:1)?"__lvOriginalCode":void 0,originalSource:d},k,{header:a,recordGlobals:!0,dontTransform:c,varRecorderName:b,topLevelVarRecorder:e,sourceURL:k.sourceURL||k.targetModule,context:k.context||e,wrapInStartEndCall:!0,
es6ExportFuncId:"_moduleExport",es6ImportFuncId:"_moduleImport",transpiler:l,declarationWrapperName:h.varDefinitionCallbackName,currentModuleAccessor:ih.funcCall(ih.member(ih.funcCall(ih.member(ih.member("__lvVarRecorder","System"),"get"),ih.literal("@lively-env")),"moduleEnv"),ih.literal(k.targetModule))});if(!k.sync&&!k.importsEnsured&&ih.hasUnimportedImports(g,d,n))return ih.ensureImportsAreImported(g,d,n).catch(function(f){return null}).then(function(f){return Wj(g,f,Object.assign({},k,{importsEnsured:!0}))});
if(!h.record()){if(!k.sync&&!k._moduleImported)return g.import(n).catch(function(f){return null}).then(function(){return Wj(g,d,Object.assign({},k,{_moduleImported:!0}))});h.ensureRecord()}if(k.es6Transpile&&k.transpiler instanceof Promise)if(k.sync||k._transpilerLoaded)console.warn("[lively.vm] sync eval requested but transpiler is not yet loaded, will continue without transpilation!"),k.transpiler=null;else return k.transpiler.catch(function(f){return console.error(f)}).then(function(f){return Wj(g,
d,Object.assign({},k,{transpiler:f,_transpilerLoaded:!0}))});g.debug&&console.log("[lively.module] runEval in module "+n+" started");ih.emit("lively.vm/doitrequest",{code:d,waitForPromise:k.waitForPromise,targetModule:k.targetModule},Date.now(),g);g.get("@lively-env").evaluationStart(n);n=ih.vmRunEval(d,k);return k.sync?ih.evalEnd(g,d,k,n):Promise.resolve(n).then(function(f){return ih.evalEnd(g,d,k,f)})}function Ro(g,d){var k=d=Object.assign({format:"esm",System:null,targetModule:null},d),e=k.format,
h=k.System;k=k.targetModule;h||"undefined"===typeof System||(h=System);return!h&&k?Promise.reject(Error("options to runEval have targetModule but cannot find system loader!")):k&&["esm","es6","register"].includes(e)?Cj.esmEval.runEval(h,g,d):Cj.globalEval.runEval(g,d)}function Rm(g,d){return Cj.globalEval.syncEval(g,d)}function Rz(g){return te.withSuperclasses(g).slice(1)}function Rp(g){var d=[];do d.push(g),g=g[te.superclassSymbol];while(g&&g.name);return d.map(function(k){return k.name}).join("->")}
function zu(g){for(var d=[];g;)d.push(g),g=g[te.superclassSymbol];return d}function or(g,d){do if(g===d)return!0;while(g=g[te.superclassSymbol]);return!1}function pr(g,d){if(g.constructor===d&&g.__proto__===d.prototype)return g;g.constructor=d;g.__proto__=d.prototype;return g}function Au(g){return g&&"function"===typeof g}function Pv(g){var d=te.RuntimeSourceDescriptor.for(g),k=d.ast;d=d.type;if("ClassDeclaration"!==d)throw Error("Expected class but got "+d);return te.Path("body.body").get(k).map(function(e){var h=
e.static,n=e.kind;e=e.key;var b=e.value;e=e.name||b;b=te.isOverridden(g,e);var c=h?g:g.prototype;c="get"===n?c.__lookupGetter__(e):"set"===n?c.__lookupSetter__(e):c[e];return{static:h,name:e,value:c,kind:n,owner:g,overridden:b}})}function Is(g){return te.runtimeNonStaticMembers(g).concat(te.runtimeNonStaticMembers(g))}function Qv(g){var d=te.obj.getOwnPropertyDescriptors(g);return te.arr.withoutAll(Object.keys(d),["prototype","name","length","toString"]).map(function(k){var e=d[k],h="function"===
typeof e.value?"method":"get"in e?"get":"set"in e?"set":"unknown";return{static:!0,name:k,value:"method"===h?e.value:"get"===h?e.get:"set"===h?e.set:null,kind:h,owner:g}})}function Js(g){return te.arr.uniq(te.arr.flatmap(te.arr.without(te.withSuperclasses(g),Object),function(d){return te.runtimeStaticClassMembers(d)}))}function Bu(g){var d=Mh.propertiesAndSettingsInHierarchyOf(g),k=d.properties;d=d.propertySettings;g[Mh.propertiesAndSettingsCacheSym]={properties:k,order:Mh.obj.sortKeysWithBeforeAndAfterConstraints(k),
propertySettings:d,classHierarchy:Mh.getClassHierarchy(g)};k&&"object"===typeof k?Mh.prepareClassForProperties(g,d,k):console.warn("Class "+g.name+" indicates it has managed properties but its properties accessor ("+(Mh.defaultPropertiesKey+") does not return a valid property descriptor map"))}function qr(g,d){d!==g.constructor&&(g.constructor=d,df.setPrototypeOf(g,d.prototype))}function Ks(g,d){d=d?"function"===typeof d?d:d.value?d.value:Object:Object;var k=g&&g[df.superclassSymbol];k&&k===d||(df.ensureInitializeStub(d),
g[df.superclassSymbol]=d,df.setPrototypeOf(g.prototype,d.prototype),d!==Object&&df.setPrototypeOf(g,d));return d}function Nb(g,d,k,e,h,n,b){k=void 0===k?[]:k;e=void 0===e?[]:e;h=void 0===h?{}:h;var c=g.name,l=c&&h.hasOwnProperty(c)&&h[c];h=l&&l[df.superclassSymbol];l&&"function"===typeof l&&h||(l=g);df.setSuperclass(l,d);df.installMethods(l,k,e);l[df.objMetaSymbol]=b;n&&(g=n.package(),b=l[df.moduleMetaSymbol],h=Date.now(),l[df.moduleMetaSymbol]={package:g?{name:g.name,version:g.version}:{},pathInPackage:g?
n.pathInPackage():n.id,lastChange:b&&b.lastChange&&h<=b.lastChange?b.lastChange+1:h,lastSuperclassChange:0},d&&d.referencedAs&&(l.hasOwnProperty(df.moduleSubscribeToToplevelChangesSym)&&n.unsubscribeFromToplevelDefinitionChanges(l[df.moduleSubscribeToToplevelChangesSym]),l[df.moduleSubscribeToToplevelChangesSym]=n.subscribeToToplevelDefinitionChanges(function(a,f){if(a===d.referencedAs){a=f&&f[df.moduleMetaSymbol];var m=l[df.moduleMetaSymbol];if(a){if(a.lastChange===m.lastSuperclassChange)return;
m.lastSuperclassChange=a.lastChange}df.setSuperclass(l,f);df.installMethods(l,k,e);df.prepareClassForManagedPropertiesAfterCreation(l)}})));l.toString=function(){var a=String(this.prototype[df.initializeSymbol]).match(df.constructorArgMatcher),f=this[df.superclassSymbol];return"class "+this.name+" "+(f?"extends "+f.name:"")+" {\n  constructor"+((a?a[0]:"()")+" { /*...*/ }\n}")};df.prepareClassForManagedPropertiesAfterCreation(l);return l}function Ce(g){g=new $c.Color(g);return{red:g.red()/255,green:g.green()/
255,blue:g.blue()/255,alpha:g.alpha()}}function uk(g,d,k,e,h){"function"!==typeof k||"undefined"!==typeof e&&"object"!==typeof e||(h=e,e="call",h||(h={}),h.updater||(h.updater=function(l,a){return l(null,a)}));var n=g.getConnectionPoints&&g.getConnectionPoints()||g.connections,b=(n=n&&n[d])&&n.map&&lively.morphic&&lively.morphic.GeometryConnection||n&&n.connectionClassType&&lively.Class.forName(n.connectionClassType)||Zf.AttributeConnection;"function"===typeof h&&(console.warn("Directly passing a converter function to connect() is deprecated! Use spec object instead!"),
h={converter:h});n&&(h=Zf.obj.merge(n,h));b=new b(g,d,k,e,h);var c=b.getExistingConnection();if(c)return c.resetSpec(),c.init(g,d,k,e,h),c;h=b.connect();if("function"===typeof g.onConnect)g.onConnect(d,k,e);n&&n.updateOnConnect&&b.update(g[d]);return h}function Sp(g,d,k,e){"function"!==typeof k||"undefined"!==typeof e&&"object"!==typeof e||(e="call");if(g.attributeConnections){for(var h=$jscomp.makeIterator(g.attributeConnections.slice()),n=h.next();!n.done;n=h.next())n=n.value,n.getSourceAttrName()==
d&&n.getTargetObj()===k&&n.getTargetMethodName()==e&&n.disconnect();if("function"==typeof g.onDisconnect)g.onDisconnect(d,k,e)}}function Rv(g){for(var d;g.attributeConnections&&(d=g.attributeConnections[0]);)d.disconnect()}function So(g,d,k,e,h){"function"!==typeof k||"undefined"!==typeof e&&"object"!==typeof e?h=h||{}:(h=e,e="call",h=h||{},h.updater||(h.updater=function(n,b){return n(null,b)}));h=h||{};h.removeAfterUpdate=!0;return Zf.connect(g,d,k,e,h)}function hk(g,d,k){var e=g.attributeConnections;
if(e){g=g[d];for(var h=0,n=e.length;h<n;h++){var b=e[h];b.getSourceAttrName()==d&&b.update(k,g)}}}function Sv(g,d,k,e){if(null!=g[d])k[e](g[d]);else Zf.connect(g,d,k,e,{removeAfterUpdate:!0})}function Tv(g,d,k,e){for(var h={key:d.pop(),whenDefined:function(n){Zf.callWhenNotNull(n,this.key,k,e)}};0<d.length;)h={key:d.pop(),next:h,whenDefined:function(n){Zf.callWhenNotNull(n,this.key,this.next,"whenDefined")}};h.whenDefined(g)}function jj(g,d){var k=!1;d||"function"!==typeof g||(d=g,k=!0);if(k){g=Zf.AttributeConnection.prototype;
g.isActive||(g.isActive=0);g.isActive++;try{var e=d()}finally{g.isActive--,0>=g.isActive&&delete g.isActive}}else{k=g.sourceObj;var h=g.sourceAttribute,n=g.targetObj,b=g.targetAttribute;g=n&&b?function(c){return c.getSourceAttrName()===h&&n===c.getTargetObj()&&b===c.getTargetMethodName()}:function(c){return c.getSourceAttrName()===h};(g=k.attributeConnections&&k.attributeConnections.filter(g))&&Zf.arr.invoke(g,"activate");try{e=d()}finally{g&&Zf.arr.invoke(g,"deactivate")}}return e}function ik(g){if(null==
g)return!0;g=typeof g;return"boolean"===g||"number"===g||"string"===g?!0:!1}function Li(g){return g.constructor[fi.classNameProp]||g.constructor.name}function Ls(g){if(g&&g.constructor){var d=fi.getClassName(g);if(d){if(g=g.constructor[fi.moduleMetaInClassProp],"Object"!==d||g)return g&&(delete g.lastChange,delete g.lastSuperclassChange),{className:d,module:g}}else console.warn("Cannot serialize class info of anonymous class of instance "+g)}}function To(g){var d=g.module;if(d){var k=d.pathInPackage;
if(d.package&&d.package.name&&"no group"!==d.package.name){var e=System.decanonicalize(d.package.name.replace(/\/*$/,"/"));k=fi.string.joinPath(e,k)}e=System.get("@lively-env");if(d=e.moduleEnv(k)||e.moduleEnv(d.pathInPackage))return d.recorder[g.className];console.warn("Trying to deserialize instance of class "+g.className+" but the module "+k+" is not yet loaded")}return System.global[g.className]}function hf(g,d,k){d=void 0===d?function(a){return a}:d;k=void 0===k?{}:k;var e=new yh.ExpressionSerializer,
h=k,n=k.isMorph?k.propertiesAndPropertySettings().order:[];n=n.length?n:yh.obj.keys(g);for(var b=$jscomp.makeIterator(n),c=b.next();!c.done;c=b.next()){c=c.value;var l=g[c];if("_env"===c||"env"===c||"__connections__"===c||"__refs__"===c)return;yh.obj.isString(l)&&e.isSerializedExpression(l)&&(l=e.deserializeExpr(l));["borderColor","borderWidth","borderStyle","borderRadius"].includes(c)&&(l=hf(l,d));l&&l._id&&(l=d(hf(l,d)));h[c]=l}g.submorphs&&(h.submorphs=g.submorphs.map(function(a){return hf(a,d)}));
if(k)for(e=$jscomp.makeIterator(n.filter(function(a){return!!g[a]})),c=e.next();!c.done;c=e.next())n=c.value,k[n]=h[n];if(g.__refs__)for(k=$jscomp.makeIterator(g.__refs__),e=k.next();!e.done;e=k.next())n=$jscomp.makeIterator(e.value),e=n.next().value,n=n.next().value,yh.Path(e).set(h,yh.Path(n).get(h));if(g.__connections__)for(k=$jscomp.makeIterator(g.__connections__),e=k.next();!e.done;e=k.next())e=e.value,yh.connect(yh.Path(e.pathToSource).get(h),e.sourceAttrName,yh.Path(e.pathToTarget).get(h),
e.targetMethodName,Object.assign({},yh.obj.select(e,["garbageCollect","converterString","updaterString","varMapping"])));return h}function om(g,d){var k=d=void 0===d?{}:d,e=void 0===k.keepFunctions?!0:k.keepFunctions,h=void 0===k.skipAttributes?[]:k.skipAttributes,n=void 0===k.keepConnections?!0:k.keepConnections,b=void 0===k.asExpression?!1:k.asExpression;d=void 0===k.root?!0:k.root;var c=void 0===k.path?"":k.path,l=void 0===k.skipUnchangedFromDefault?!1:k.skipUnchangedFromDefault,a=void 0===k.nestedExpressions?
{}:k.nestedExpressions,f=void 0===k.objToPath?new WeakMap:k.objToPath,m=void 0===k.objRefs?[]:k.objRefs;k=void 0===k.connections?[]:k.connections;var q={skipAttributes:h,skipUnchangedFromDefault:l,root:!1,keepFunctions:e,asExpression:b,nestedExpressions:a,connections:k,objRefs:m,objToPath:f,keepConnections:n};if(f.has(g))return m.push([c,f.get(g)]),null;f.set(g,c);b&&(e=!1);var r=new yh.ExpressionSerializer,u=function(wa,D){try{if(D=D.__serialize__(),b){var Q=yh.string.newUUID();a[Q]=D;D=Q}else D=
D.__expr__?r.exprStringEncode(D):D}catch(J){console.log("[export to JSON] failed converting "+wa+" to serialized expression")}return D},v={};f.set(g,c);n&&g.attributeConnections&&k.push.apply(k,$jscomp.arrayFromIterable(g.attributeConnections));g.isText&&(v.textAndAttributes=g.textAndAttributes.map(function(wa,D){return wa&&wa.isMorph?om(wa,Object.assign({},q,{path:c?c+".textAndAttributes."+D:"textAndAttributes."+D})):wa}));g.submorphs&&0<g.submorphs.length&&(v.submorphs=g.submorphs.map(function(wa,
D){return om(wa,Object.assign({},q,{path:c?c+".submorphs."+D:"submorphs."+D}))}).filter(Boolean));var y={};for(L in g.spec(l)){y.$jscomp$loop$prop$name$2531=L;l=g[y.$jscomp$loop$prop$name$2531];!l||"object"!==typeof l||Array.isArray(l)||l.isMorph||f.set(l,c?c+"."+y.$jscomp$loop$prop$name$2531:y.$jscomp$loop$prop$name$2531);if("submorphs"!==y.$jscomp$loop$prop$name$2531&&!h.includes(y.$jscomp$loop$prop$name$2531))if("metadata"===y.$jscomp$loop$prop$name$2531&&yh.Path("commit.__serialize__").get(l))v[y.$jscomp$loop$prop$name$2531]=
Object.assign({},l,{commit:u(y.$jscomp$loop$prop$name$2531+".commit",l.commit)});else if(["borderColor","borderWidth","borderStyle","borderRadius"].includes(y.$jscomp$loop$prop$name$2531)){for(var z={},A=$jscomp.makeIterator(["top","left","right","bottom"]),C=A.next();!C.done;C=A.next()){C=C.value;var G=l[C];if(G&&G.__serialize__&&(G=G.__serialize__())&&G.__expr__)if(b){var F=yh.string.newUUID();a[F]=G;G=F}else G=r.exprStringEncode(G);z[C]=G}v[y.$jscomp$loop$prop$name$2531]=z}else if(l&&l.isMorph)v[y.$jscomp$loop$prop$name$2531]=
om(l,Object.assign({},q,{path:c?c+"."+y.$jscomp$loop$prop$name$2531:y.$jscomp$loop$prop$name$2531}));else if(l&&l.__serialize__)v[y.$jscomp$loop$prop$name$2531]=u(y.$jscomp$loop$prop$name$2531,l);else if(Array.isArray(l))v[y.$jscomp$loop$prop$name$2531]=l.map(function(wa){return function(D,Q){return D&&D.isMorph?om(D,Object.assign({},q,{path:c?c+"."+wa.$jscomp$loop$prop$name$2531+"."+Q:wa.$jscomp$loop$prop$name$2531+"."+Q})):D&&D.__serialize__?u(wa.$jscomp$loop$prop$name$2531+"."+Q,D):D}}(y));else{if(l&&
!yh.obj.isString(l)&&!yh.obj.isNumber(l)&&0<yh.properties.allOwnPropertiesOrFunctions(l).length)for(var N in l)l[N]&&l[N].isMorph&&(l[N]=om(l[N],Object.assign({},q,{path:c?c+"."+y.$jscomp$loop$prop$name$2531+"."+N:y.$jscomp$loop$prop$name$2531+"."+N})));v[y.$jscomp$loop$prop$name$2531]=l}y={$jscomp$loop$prop$name$2531:y.$jscomp$loop$prop$name$2531}}g.isText&&delete v.textString;b||(v._id=g._id);e?(v.type=g.constructor,Object.keys(g).forEach(function(wa){return"function"===typeof g[wa]&&(v[wa]=g[wa])})):
(v.styleSheets&&(v.styleSheets=[]),v.type=yh.getSerializableClassMeta(g));if(n&&d){var L=[];N=$jscomp.makeIterator(k);for(e=N.next();!e.done;e=N.next())A=e=e.value,h=A.sourceAttrName,n=A.targetMethodName,z=A.targetObj,k=A.updaterString,y=A.converterString,l=A.garbageCollect,A=f.get(A.sourceObj),z=f.get(z),"string"===typeof A&&"string"===typeof z?L.push({pathToSource:A,pathToTarget:z,garbageCollect:l,updaterString:k,converterString:y,sourceAttrName:h,targetMethodName:n,varMapping:{properties:yh.properties}}):
console.log("skipping:",e);b||(v.__connections__=L)}if(b&&d){d="morph("+yh.obj.inspect(v)+")";var W={"lively.morphic":["morph"]},la;for(la in a)d=d.replace('"'+la+'"',a[la].__expr__),Object.entries(a[la].bindings||{}).forEach(function(wa){var D=$jscomp.makeIterator(wa);wa=D.next().value;D=D.next().value;W[wa]=W[wa]?yh.arr.uniq([].concat($jscomp.arrayFromIterable(W[wa]),$jscomp.arrayFromIterable(D))):D});return{__expr__:d,bindings:W}}d&&(v.__refs__=m);return v}function Ms(g){var d={},k;for(k in g)d[k]=
Oe.referencesOfId(g,k);return d}function Uv(g){return g&&g.__ref__}function Uo(g,d){var k={};return Oe.referencesOfId((k[g.id]=g.currentSnapshot,k),g.id,d)}function tn(g,d,k){g=g[d];d=[];for(var e in g.props){var h=g.props[e]||{},n=h.value;h=h.verbatim;Array.isArray(n)?d.push.apply(d,$jscomp.arrayFromIterable(Oe.referencesInArray(n,k&&e))):!h&&n&&Oe.isReference(n)&&d.push(k?{key:e,id:n.id}:n.id)}if(g.hasOwnProperty("entries"))for(e=0;e<g.entries.length;e++)n=g.entries[e],Array.isArray(n)?d.push.apply(d,
$jscomp.arrayFromIterable(Oe.referencesInArray(n,k&&n))):n&&Oe.isReference(n)&&d.push(k?{key:n,id:n.id}:n.id);return d}function eo(g,d){for(var k=[],e=0;e<g.length;e++){var h=g[e];Array.isArray(h)?k.push.apply(k,$jscomp.arrayFromIterable(eo(h,d?d+"["+e+"]":void 0))):h&&Oe.isReference(h)&&k.push(d?{key:d+"["+e+"]",id:h.id}:h.id)}return k}function Sz(g,d){return(g[d][Oe.ClassHelper.classMetaForSerializationProp]||{}).module||{}}function bC(g,d){return Oe.referencesOfId(g,d).map(function(k){return k+
":"+Oe.classNameOfId(g,k)})}function Fx(g,d){return(g[d][Oe.ClassHelper.classMetaForSerializationProp]||{}).className||"Object"}function cC(g,d,k,e){function h(u,v,y){if(!f)if(50<y)alert(""+l);else if(u===v)l.push(u),f=l.slice();else if(!a[u]){a[u]=!0;l.push(u);u=Oe.referencesOfId(g,u);for(var z=0;z<u.length;z++)h(u[z],v,y+1);l.pop()}}e=void 0===e?{}:e;var n=void 0===e.showPath?!0:e.showPath,b=e.hasOwnProperty("showClassNames")?e.showClassNames:!n,c=e.hasOwnProperty("showPropNames")?e.showPropNames:
n;e=e.hasOwnProperty("hideId")?e.hideId:n;var l=[],a={},f;h(d,k,0);if(!f)return null;if(!b&&!c)return f;d=[];for(k=0;k<f.length-1;k++){var m=f[k],q=f[k+1],r=[];e||r.push(m);b&&r.push((g[m][Oe.ClassHelper.classMetaForSerializationProp]||{}).className||"Object");c&&(m=Oe.referencesOfId(g,m,!0).find(function(u){return u.id===q})||{key:"????"},r.push(m.key));d.push(r.join(":"))}n&&(d="."+d.join("."));return d}function dC(g,d,k){k=k.replace(/^\./,"");k=k.replace(/\[([^\]])+\]/g,".$1");k=Oe.Path(k).parts();
var e=g[d];for(d=0;;){if(1E3<d++)throw"stop";var h=k.shift();if(!h)break;if(!e.props||!e.props[h])throw Error("Property "+h+" not found for ref "+JSON.stringify(e));e=e.props[h].value;if(!e)throw Error("Property "+h+" has no value");for(;Array.isArray(e);)e=e[k.shift()];if(!e||!e.__ref__)return e;e=g[e.id]}return e}function eC(g,d,k,e){k=k.replace(/^\./,"");k=k.replace(/\[([^\]])+\]/g,".$1");k=Oe.Path(k).parts();g=g[d];d=k.shift();if(!g.props||!g.props[d])throw Error("Property "+d+" not found for ref "+
JSON.stringify(g));var h=(g.props[d]||{}).value;if(!h)throw Error("Property "+d+" has no value");if(k.length){var n=Oe.Path(k).get(h);Oe.Path(k).set(h,e(g,d,n))}else g.props[d].value=e(g,d,h)}function rr(g,d){var k=Oe.arr.withoutAll(Object.keys(d),g),e=k.filter(function(n){if("AttributeConnection"===Oe.classNameOfId(d,n))return d[n].props.garbageCollect.value}),h=Oe.referenceGraph(Oe.obj.dissoc(Object.assign({},d),e));g.forEach(function(n){n=Oe.graph.subgraphReachableBy(h,n);for(var b=k.length;b--;)k[b]in
n&&k.splice(b,1)});k.forEach(function(n){return delete d[n]});return k}function Tz(g){var d={},k;for(k in g){d.$jscomp$loop$prop$id$819$2533=k;if("AttributeConnection"===Oe.classNameOfId(g,d.$jscomp$loop$prop$id$819$2533)){var e=g[d.$jscomp$loop$prop$id$819$2533];if(!g[Oe.Path("props.targetObj.value.id").get(e)]){if(e=g[Oe.Path("props.sourceObj.value.id").get(e)])e.props.attributeConnections.value=e.props.attributeConnections.value.filter(function(h){return function(n){return n.id!=h.$jscomp$loop$prop$id$819$2533}}(d));
delete g[d.$jscomp$loop$prop$id$819$2533]}}d={$jscomp$loop$prop$id$819$2533:d.$jscomp$loop$prop$id$819$2533}}}function Tp(g,d){d=void 0===d?Oe.defaultExprSerializer:d;g.snapshot&&(g=g.snapshot);for(var k=[],e=0,h=Object.keys(g);e<h.length;e++){var n=g[h[e]];if(n.__expr__)(n=d.requiredModulesOf__expr__(n.__expr__))&&k.push.apply(k,$jscomp.arrayFromIterable(n));else{var b=Oe.ClassHelper.sourceModulesInObjRef(n);b&&b.length&&k.push.apply(k,$jscomp.arrayFromIterable(b.map(function(a){return(a.package&&
a.package.name||"")+"/"+a.pathInPackage})));if(n.props)for(var c in n.props){b=n.props[c].value;if("string"===typeof b){var l=d.requiredModulesOf__expr__(b);l&&k.push.apply(k,$jscomp.arrayFromIterable(l))}Oe.obj.isArray(b)&&b.forEach(function(a){"string"===typeof a&&(a=d.requiredModulesOf__expr__(a))&&k.push.apply(k,$jscomp.arrayFromIterable(a))})}}}return k=Oe.arr.uniq(k)}function fC(){throw Error("setTimeout has not been defined");}function Ig(){throw Error("clearTimeout has not been defined");
}function gC(g){if(Vv===setTimeout)return setTimeout(g,0);if((Vv===fC||!Vv)&&setTimeout)return Vv=setTimeout,setTimeout(g,0);try{return Vv(g,0)}catch(d){try{return Vv.call(null,g,0)}catch(k){return Vv.call(this||Uz,g,0)}}}function mF(){Vz&&Gx&&(Vz=!1,Gx.length?Cu=Gx.concat(Cu):nF=-1,Cu.length&&Ns())}function Ns(){if(!Vz){var g=gC(mF);Vz=!0;for(var d=Cu.length;d;){Gx=Cu;for(Cu=[];++nF<d;)Gx&&Gx[nF].run();nF=-1;d=Cu.length}Gx=null;Vz=!1;(function(k){if(Wv===clearTimeout)return clearTimeout(k);if((Wv===
Ig||!Wv)&&clearTimeout)return Wv=clearTimeout,clearTimeout(k);try{Wv(k)}catch(e){try{return Wv.call(null,k)}catch(h){return Wv.call(this||Uz,k)}}})(g)}}function hC(g,d){(this||Uz).fun=g;(this||Uz).array=d}function un(){}function fo(){if(pS)return qS;pS=!0;return qS={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16}}function Xv(){if(rS)return sS;rS=!0;var g=Nh;return sS="object"===typeof g&&g.env&&g.env.NODE_DEBUG&&/\bsemver\b/i.test(g.env.NODE_DEBUG)?
function(d){for(var k=[],e=0;e<arguments.length;++e)k[e-0]=arguments[e];return console.error.apply(console,["SEMVER"].concat($jscomp.arrayFromIterable(k)))}:function(){}}function Yv(){if(tS)return Os;tS=!0;var g=fo().MAX_SAFE_COMPONENT_LENGTH,d=Xv();Os=Os={};var k=Os.re=[],e=Os.src=[],h=Os.t={},n=0,b=function(c,l,a){var f=n++;d(f,l);h[c]=f;e[f]=l;k[f]=new RegExp(l,a?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*");b("NUMERICIDENTIFIERLOOSE","[0-9]+");b("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");
b("MAINVERSION","("+e[h.NUMERICIDENTIFIER]+")\\.("+(e[h.NUMERICIDENTIFIER]+")\\.(")+(e[h.NUMERICIDENTIFIER]+")"));b("MAINVERSIONLOOSE","("+e[h.NUMERICIDENTIFIERLOOSE]+")\\.("+(e[h.NUMERICIDENTIFIERLOOSE]+")\\.(")+(e[h.NUMERICIDENTIFIERLOOSE]+")"));b("PRERELEASEIDENTIFIER","(?:"+e[h.NUMERICIDENTIFIER]+"|"+e[h.NONNUMERICIDENTIFIER]+")");b("PRERELEASEIDENTIFIERLOOSE","(?:"+e[h.NUMERICIDENTIFIERLOOSE]+"|"+e[h.NONNUMERICIDENTIFIER]+")");b("PRERELEASE","(?:-("+e[h.PRERELEASEIDENTIFIER]+"(?:\\."+e[h.PRERELEASEIDENTIFIER]+
")*))");b("PRERELEASELOOSE","(?:-?("+e[h.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+e[h.PRERELEASEIDENTIFIERLOOSE]+")*))");b("BUILDIDENTIFIER","[0-9A-Za-z-]+");b("BUILD","(?:\\+("+e[h.BUILDIDENTIFIER]+"(?:\\."+e[h.BUILDIDENTIFIER]+")*))");b("FULLPLAIN","v?"+e[h.MAINVERSION]+e[h.PRERELEASE]+"?"+e[h.BUILD]+"?");b("FULL","^"+e[h.FULLPLAIN]+"$");b("LOOSEPLAIN","[v=\\s]*"+e[h.MAINVERSIONLOOSE]+e[h.PRERELEASELOOSE]+"?"+e[h.BUILD]+"?");b("LOOSE","^"+e[h.LOOSEPLAIN]+"$");b("GTLT","((?:<|>)?=?)");b("XRANGEIDENTIFIERLOOSE",
e[h.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*");b("XRANGEIDENTIFIER",e[h.NUMERICIDENTIFIER]+"|x|X|\\*");b("XRANGEPLAIN","[v=\\s]*("+e[h.XRANGEIDENTIFIER]+")(?:\\.("+(e[h.XRANGEIDENTIFIER]+")(?:\\.(")+(e[h.XRANGEIDENTIFIER]+")(?:")+(e[h.PRERELEASE]+")?"+e[h.BUILD]+"?)?)?"));b("XRANGEPLAINLOOSE","[v=\\s]*("+e[h.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+(e[h.XRANGEIDENTIFIERLOOSE]+")(?:\\.(")+(e[h.XRANGEIDENTIFIERLOOSE]+")(?:")+(e[h.PRERELEASELOOSE]+")?"+e[h.BUILD]+"?)?)?"));b("XRANGE","^"+e[h.GTLT]+"\\s*"+e[h.XRANGEPLAIN]+
"$");b("XRANGELOOSE","^"+e[h.GTLT]+"\\s*"+e[h.XRANGEPLAINLOOSE]+"$");b("COERCE","(^|[^\\d])(\\d{1,"+g+"})(?:\\.(\\d{1,"+(g+"}))?(?:\\.(\\d{1,")+(g+"}))?(?:$|[^\\d])"));b("COERCERTL",e[h.COERCE],!0);b("LONETILDE","(?:~>?)");b("TILDETRIM","(\\s*)"+e[h.LONETILDE]+"\\s+",!0);Os.tildeTrimReplace="$1~";b("TILDE","^"+e[h.LONETILDE]+e[h.XRANGEPLAIN]+"$");b("TILDELOOSE","^"+e[h.LONETILDE]+e[h.XRANGEPLAINLOOSE]+"$");b("LONECARET","(?:\\^)");b("CARETTRIM","(\\s*)"+e[h.LONECARET]+"\\s+",!0);Os.caretTrimReplace=
"$1^";b("CARET","^"+e[h.LONECARET]+e[h.XRANGEPLAIN]+"$");b("CARETLOOSE","^"+e[h.LONECARET]+e[h.XRANGEPLAINLOOSE]+"$");b("COMPARATORLOOSE","^"+e[h.GTLT]+"\\s*("+e[h.LOOSEPLAIN]+")$|^$");b("COMPARATOR","^"+e[h.GTLT]+"\\s*("+e[h.FULLPLAIN]+")$|^$");b("COMPARATORTRIM","(\\s*)"+e[h.GTLT]+"\\s*("+e[h.LOOSEPLAIN]+"|"+e[h.XRANGEPLAIN]+")",!0);Os.comparatorTrimReplace="$1$2$3";b("HYPHENRANGE","^\\s*("+e[h.XRANGEPLAIN]+")\\s+-\\s+("+(e[h.XRANGEPLAIN]+")\\s*$"));b("HYPHENRANGELOOSE","^\\s*("+e[h.XRANGEPLAINLOOSE]+
")\\s+-\\s+("+(e[h.XRANGEPLAINLOOSE]+")\\s*$"));b("STAR","(<|>)?=?\\s*\\*");b("GTE0","^\\s*>=\\s*0.0.0\\s*$");b("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");return Os}function Wz(){if(uS)return vS;uS=!0;var g=["includePrerelease","loose","rtl"];return vS=function(d){return d?"object"!==typeof d?{loose:!0}:g.filter(function(k){return d[k]}).reduce(function(k,e){k[e]=!0;return k},{}):{}}}function Hx(){if(wS)return xS;wS=!0;var g=/^[0-9]+$/,d=function(k,e){var h=g.test(k),n=g.test(e);h&&n&&(k=+k,e=+e);return k===
e?0:h&&!n?-1:n&&!h?1:k<e?-1:1};return xS={compareIdentifiers:d,rcompareIdentifiers:function(k,e){return d(e,k)}}}function Ml(){if(yS)return zS;yS=!0;var g=Xv(),d=fo(),k=d.MAX_LENGTH,e=d.MAX_SAFE_INTEGER;d=Yv();var h=d.re,n=d.t,b=Wz(),c=Hx().compareIdentifiers,l=function(a,f){f=b(f);if(a instanceof l){if(a.loose===!!f.loose&&a.includePrerelease===!!f.includePrerelease)return a;a=a.version}else if("string"!==typeof a)throw new TypeError("Invalid Version: "+a);if(a.length>k)throw new TypeError("version is longer than "+
k+" characters");g("SemVer",a,f);this.options=f;this.loose=!!f.loose;this.includePrerelease=!!f.includePrerelease;f=a.trim().match(f.loose?h[n.LOOSE]:h[n.FULL]);if(!f)throw new TypeError("Invalid Version: "+a);this.raw=a;this.major=+f[1];this.minor=+f[2];this.patch=+f[3];if(this.major>e||0>this.major)throw new TypeError("Invalid major version");if(this.minor>e||0>this.minor)throw new TypeError("Invalid minor version");if(this.patch>e||0>this.patch)throw new TypeError("Invalid patch version");this.prerelease=
f[4]?f[4].split(".").map(function(m){if(/^[0-9]+$/.test(m)){var q=+m;if(0<=q&&q<e)return q}return m}):[];this.build=f[5]?f[5].split("."):[];this.format()};l.prototype.format=function(){this.version=this.major+"."+this.minor+"."+this.patch;this.prerelease.length&&(this.version+="-"+this.prerelease.join("."));return this.version};l.prototype.toString=function(){return this.version};l.prototype.compare=function(a){g("SemVer.compare",this.version,this.options,a);if(!(a instanceof l)){if("string"===typeof a&&
a===this.version)return 0;a=new l(a,this.options)}return a.version===this.version?0:this.compareMain(a)||this.comparePre(a)};l.prototype.compareMain=function(a){a instanceof l||(a=new l(a,this.options));return c(this.major,a.major)||c(this.minor,a.minor)||c(this.patch,a.patch)};l.prototype.comparePre=function(a){a instanceof l||(a=new l(a,this.options));if(this.prerelease.length&&!a.prerelease.length)return-1;if(!this.prerelease.length&&a.prerelease.length)return 1;if(!this.prerelease.length&&!a.prerelease.length)return 0;
var f=0;do{var m=this.prerelease[f],q=a.prerelease[f];g("prerelease compare",f,m,q);if(void 0===m&&void 0===q)return 0;if(void 0===q)return 1;if(void 0===m)return-1;if(m!==q)return c(m,q)}while(++f)};l.prototype.compareBuild=function(a){a instanceof l||(a=new l(a,this.options));var f=0;do{var m=this.build[f],q=a.build[f];g("prerelease compare",f,m,q);if(void 0===m&&void 0===q)return 0;if(void 0===q)return 1;if(void 0===m)return-1;if(m!==q)return c(m,q)}while(++f)};l.prototype.inc=function(a,f){switch(a){case "premajor":this.minor=
this.patch=this.prerelease.length=0;this.major++;this.inc("pre",f);break;case "preminor":this.patch=this.prerelease.length=0;this.minor++;this.inc("pre",f);break;case "prepatch":this.prerelease.length=0;this.inc("patch",f);this.inc("pre",f);break;case "prerelease":0===this.prerelease.length&&this.inc("patch",f);this.inc("pre",f);break;case "major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++;this.patch=this.minor=0;this.prerelease=[];break;case "minor":0===this.patch&&
0!==this.prerelease.length||this.minor++;this.patch=0;this.prerelease=[];break;case "patch":0===this.prerelease.length&&this.patch++;this.prerelease=[];break;case "pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(a=this.prerelease.length;0<=--a;)"number"===typeof this.prerelease[a]&&(this.prerelease[a]++,a=-2);-1===a&&this.prerelease.push(0)}f&&(this.prerelease[0]===f?isNaN(this.prerelease[1])&&(this.prerelease=[f,0]):this.prerelease=[f,0]);break;default:throw Error("invalid increment argument: "+
a);}this.format();this.raw=this.version;return this};return zS=l}function Zv(){if(AS)return BS;AS=!0;var g=fo().MAX_LENGTH,d=Yv(),k=d.re,e=d.t,h=Ml(),n=Wz();return BS=function(b,c){c=n(c);if(b instanceof h)return b;if("string"!==typeof b||b.length>g||!(c.loose?k[e.LOOSE]:k[e.FULL]).test(b))return null;try{return new h(b,c)}catch(l){return null}}}function kL(){if(CS)return DS;CS=!0;var g=Zv();return DS=function(d,k){return(d=g(d,k))?d.version:null}}function oF(){if(ES)return FS;ES=!0;var g=Ml();return FS=
function(d,k,e,h){"string"===typeof e&&(h=e,e=void 0);try{return(new g(d,e)).inc(k,h).version}catch(n){return null}}}function Vo(){if(GS)return HS;GS=!0;var g=Ml();return HS=function(d,k,e){return(new g(d,e)).compare(new g(k,e))}}function Oh(){if(IS)return JS;IS=!0;var g=Vo();return JS=function(d,k,e){return 0===g(d,k,e)}}function go(){if(KS)return LS;KS=!0;var g=Zv(),d=Oh();return LS=function(k,e){if(d(k,e))return null;k=g(k);e=g(e);var h=k.prerelease.length||e.prerelease.length,n=h?"pre":"",b;for(b in k)if(("major"===
b||"minor"===b||"patch"===b)&&k[b]!==e[b])return n+b;return h?"prerelease":""}}function vn(){if(MS)return NS;MS=!0;var g=Ml();return NS=function(d,k){return(new g(d,k)).major}}function Xz(){if(OS)return PS;OS=!0;var g=Zv();return PS=function(d,k){return(d=g(d,k))&&d.prerelease.length?d.prerelease:null}}function Lb(){if(QS)return RS;QS=!0;var g=Vo();return RS=function(d,k,e){return g(k,d,e)}}function pm(){if(SS)return TS;SS=!0;var g=Ml();return TS=function(d,k,e){d=new g(d,e);k=new g(k,e);return d.compare(k)||
d.compareBuild(k)}}function $v(){if(US)return VS;US=!0;var g=pm();return VS=function(d,k){return d.sort(function(e,h){return g(h,e,k)})}}function aw(){if(WS)return XS;WS=!0;var g=Vo();return XS=function(d,k,e){return 0<g(d,k,e)}}function Sm(){if(YS)return ZS;YS=!0;var g=Vo();return ZS=function(d,k,e){return 0>g(d,k,e)}}function Yz(){if($S)return aT;$S=!0;var g=Vo();return aT=function(d,k,e){return 0<=g(d,k,e)}}function Ix(){if(bT)return cT;bT=!0;var g=Vo();return cT=function(d,k,e){return 0!==g(d,
k,e)}}function iC(){if(dT)return eT;dT=!0;var g=Vo();return eT=function(d,k,e){return 0>=g(d,k,e)}}function jC(){if(fT)return gT;fT=!0;var g=Oh(),d=Ix(),k=aw(),e=Yz(),h=Sm(),n=iC();return gT=function(b,c,l,a){switch(c){case "===":return"object"===typeof b&&(b=b.version),"object"===typeof l&&(l=l.version),b===l;case "!==":return"object"===typeof b&&(b=b.version),"object"===typeof l&&(l=l.version),b!==l;case "":case "=":case "==":return g(b,l,a);case "!=":return d(b,l,a);case ">":return k(b,l,a);case ">=":return e(b,
l,a);case "<":return h(b,l,a);case "<=":return n(b,l,a);default:throw new TypeError("Invalid operator: "+c);}}}function bw(){if(hT)return iT;hT=!0;var g=Ml(),d=Zv(),k=Yv(),e=k.re,h=k.t;return iT=function(n,b){if(n instanceof g)return n;"number"===typeof n&&(n=String(n));if("string"!==typeof n)return null;b=b||{};var c=null;if(b.rtl){for(var l;(l=e[h.COERCERTL].exec(n))&&(!c||c.index+c[0].length!==n.length);)c&&l.index+l[0].length===c.index+c[0].length||(c=l),e[h.COERCERTL].lastIndex=l.index+l[1].length+
l[2].length;e[h.COERCERTL].lastIndex=-1}else c=n.match(e[h.COERCE]);return null===c?null:d(c[2]+"."+(c[3]||"0")+"."+(c[4]||"0"),b)}}function Gh(g){var d=this;d instanceof Gh||(d=new Gh);d.tail=null;d.head=null;d.length=0;if(g&&"function"===typeof g.forEach)g.forEach(function(h){d.push(h)});else if(0<arguments.length)for(var k=0,e=arguments.length;k<e;k++)d.push(arguments[k]);return d}function Up(g,d,k,e){if(!(this instanceof Up))return new Up(g,d,k,e);this.list=e;this.value=g;d?(d.next=this,this.prev=
d):this.prev=null;k?(k.prev=this,this.next=k):this.next=null}function ho(){if(jT)return lL;jT=!0;var g=function(F,N){var L=this;N=k(N);if(F instanceof g)return F.loose===!!N.loose&&F.includePrerelease===!!N.includePrerelease?F:new g(F.raw,N);if(F instanceof e)return this.raw=F.value,this.set=[[F]],this.format(),this;this.options=N;this.loose=!!N.loose;this.includePrerelease=!!N.includePrerelease;this.raw=F;this.set=F.split(/\s*\|\|\s*/).map(function(W){return L.parseRange(W.trim())}).filter(function(W){return W.length});
if(!this.set.length)throw new TypeError("Invalid SemVer Range: "+F);if(1<this.set.length)if(F=this.set[0],this.set=this.set.filter(function(W){return"<0.0.0-0"!==W[0].value}),0===this.set.length)this.set=[F];else if(1<this.set.length)for(F=$jscomp.makeIterator(this.set),N=F.next();!N.done;N=F.next())if(N=N.value,1===N.length&&""===N[0].value){this.set=[N];break}this.format()};g.prototype.format=function(){return this.range=this.set.map(function(F){return F.join(" ").trim()}).join("||").trim()};g.prototype.toString=
function(){return this.range};g.prototype.parseRange=function(F){var N=this;F=F.trim();var L="parseRange:"+Object.keys(this.options).join(",")+":"+F,W=d.get(L);if(W)return W;W=this.options.loose;F=F.replace(W?c[l.HYPHENRANGELOOSE]:c[l.HYPHENRANGE],G(this.options.includePrerelease));h("hyphen replace",F);F=F.replace(c[l.COMPARATORTRIM],a);h("comparator trim",F,c[l.COMPARATORTRIM]);F=F.replace(c[l.TILDETRIM],f);F=F.replace(c[l.CARETTRIM],m);F=F.split(/\s+/).join(" ");var la=W?c[l.COMPARATORLOOSE]:c[l.COMPARATOR];
W=F.split(" ").map(function(D){var Q=D;D=N.options;h("comp",Q,D);Q=y(Q,D);h("caret",Q);Q=u(Q,D);h("tildes",Q);Q=A(Q,D);h("xrange",Q);h("replaceStars",Q,D);Q=Q.trim().replace(c[l.STAR],"");h("stars",Q);return Q}).join(" ").split(/\s+/).map(function(D){var Q=N.options;h("replaceGTE0",D,Q);return D.trim().replace(c[Q.includePrerelease?l.GTE0PRE:l.GTE0],"")}).filter(this.options.loose?function(D){return!!D.match(la)}:function(){return!0}).map(function(D){return new e(D,N.options)});F=new Map;W=$jscomp.makeIterator(W);
for(var wa=W.next();!wa.done;wa=W.next()){wa=wa.value;if("<0.0.0-0"===wa.value)return[wa];F.set(wa.value,wa)}1<F.size&&F.has("")&&F.delete("");F=[].concat($jscomp.arrayFromIterable(F.values()));d.set(L,F);return F};g.prototype.intersects=function(F,N){if(!(F instanceof g))throw new TypeError("a Range is required");return this.set.some(function(L){return q(L,N)&&F.set.some(function(W){return q(W,N)&&L.every(function(la){return W.every(function(wa){return la.intersects(wa,N)})})})})};g.prototype.test=
function(F){if(!F)return!1;if("string"===typeof F)try{F=new n(F,this.options)}catch(D){return!1}for(var N=0;N<this.set.length;N++){a:{var L=this.set[N];for(var W=F,la=this.options,wa=0;wa<L.length;wa++)if(!L[wa].test(W)){L=!1;break a}if(W.prerelease.length&&!la.includePrerelease){for(la=0;la<L.length;la++)if(h(L[la].semver),L[la].semver!==e.ANY&&0<L[la].semver.prerelease.length&&(wa=L[la].semver,wa.major===W.major&&wa.minor===W.minor&&wa.patch===W.patch)){L=!0;break a}L=!1}else L=!0}if(L)return!0}return!1};
lL=g;var d=new X5({max:1E3}),k=Wz(),e=Ui(),h=Xv(),n=Ml(),b=Yv(),c=b.re,l=b.t,a=b.comparatorTrimReplace,f=b.tildeTrimReplace,m=b.caretTrimReplace,q=function(F,N){var L=!0;F=F.slice();for(var W=F.pop();L&&F.length;)L=F.every(function(la){return W.intersects(la,N)}),W=F.pop();return L},r=function(F){return!F||"x"===F.toLowerCase()||"*"===F},u=function(F,N){return F.trim().split(/\s+/).map(function(L){return v(L,N)}).join(" ")},v=function(F,N){return F.replace(N.loose?c[l.TILDELOOSE]:c[l.TILDE],function(L,
W,la,wa,D){h("tilde",F,L,W,la,wa,D);r(W)?L="":r(la)?L=">="+W+".0.0 <"+(+W+1)+".0.0-0":r(wa)?L=">="+W+"."+la+".0 <"+W+"."+(+la+1)+".0-0":D?(h("replaceTilde pr",D),L=">="+W+"."+la+"."+wa+"-"+D+" <"+W+"."+(+la+1)+".0-0"):L=">="+W+"."+la+"."+wa+" <"+W+"."+(+la+1)+".0-0";h("tilde return",L);return L})},y=function(F,N){return F.trim().split(/\s+/).map(function(L){return z(L,N)}).join(" ")},z=function(F,N){h("caret",F,N);var L=N.includePrerelease?"-0":"";return F.replace(N.loose?c[l.CARETLOOSE]:c[l.CARET],
function(W,la,wa,D,Q){h("caret",F,W,la,wa,D,Q);r(la)?W="":r(wa)?W=">="+la+".0.0"+L+" <"+(+la+1)+".0.0-0":r(D)?W="0"===la?">="+la+"."+wa+".0"+L+" <"+la+"."+(+wa+1)+".0-0":">="+la+"."+wa+".0"+L+" <"+(+la+1)+".0.0-0":Q?(h("replaceCaret pr",Q),W="0"===la?"0"===wa?">="+la+"."+wa+"."+D+"-"+Q+" <"+la+"."+wa+"."+(+D+1)+"-0":">="+la+"."+wa+"."+D+"-"+Q+" <"+la+"."+(+wa+1)+".0-0":">="+la+"."+wa+"."+D+"-"+Q+" <"+(+la+1)+".0.0-0"):(h("no pr"),W="0"===la?"0"===wa?">="+la+"."+wa+"."+D+L+" <"+la+"."+wa+"."+(+D+1)+
"-0":">="+la+"."+wa+"."+D+L+" <"+la+"."+(+wa+1)+".0-0":">="+la+"."+wa+"."+D+" <"+(+la+1)+".0.0-0");h("caret return",W);return W})},A=function(F,N){h("replaceXRanges",F,N);return F.split(/\s+/).map(function(L){return C(L,N)}).join(" ")},C=function(F,N){F=F.trim();return F.replace(N.loose?c[l.XRANGELOOSE]:c[l.XRANGE],function(L,W,la,wa,D,Q){h("xRange",F,L,W,la,wa,D,Q);var J=r(la),O=J||r(wa);D=O||r(D);"="===W&&D&&(W="");Q=N.includePrerelease?"-0":"";J?L=">"===W||"<"===W?"<0.0.0-0":"*":W&&D?(O&&(wa=0),
D=0,">"===W?(W=">=",O?(la=+la+1,wa=0):wa=+wa+1,D=0):"<="===W&&(W="<",O?la=+la+1:wa=+wa+1),"<"===W&&(Q="-0"),L=W+la+"."+wa+"."+D+Q):O?L=">="+la+".0.0"+Q+" <"+(+la+1)+".0.0-0":D&&(L=">="+la+"."+wa+".0"+Q+" <"+la+"."+(+wa+1)+".0-0");h("xRange return",L);return L})},G=function(F){return function(N,L,W,la,wa,D,Q,J,O,ja,X,ha,bb){L=r(W)?"":r(la)?">="+W+".0.0"+(F?"-0":""):r(wa)?">="+W+"."+la+".0"+(F?"-0":""):D?">="+L:">="+L+(F?"-0":"");J=r(O)?"":r(ja)?"<"+(+O+1)+".0.0-0":r(X)?"<"+O+"."+(+ja+1)+".0-0":ha?
"<="+O+"."+ja+"."+X+"-"+ha:F?"<"+O+"."+ja+"."+(+X+1)+"-0":"<="+J;return(L+" "+J).trim()}};return lL}function Ui(){if(kT)return mL;kT=!0;var g=Symbol("SemVer ANY"),d=function(f,m){m=k(m);if(f instanceof d){if(f.loose===!!m.loose)return f;f=f.value}c("comparator",f,m);this.options=m;this.loose=!!m.loose;this.parse(f);this.value=this.semver===g?"":this.operator+this.semver.version;c("comp",this)};d.prototype.parse=function(f){var m=f.match(this.options.loose?h[n.COMPARATORLOOSE]:h[n.COMPARATOR]);if(!m)throw new TypeError("Invalid comparator: "+
f);this.operator=void 0!==m[1]?m[1]:"";"="===this.operator&&(this.operator="");this.semver=m[2]?new l(m[2],this.options.loose):g};d.prototype.toString=function(){return this.value};d.prototype.test=function(f){c("Comparator.test",f,this.options.loose);if(this.semver===g||f===g)return!0;if("string"===typeof f)try{f=new l(f,this.options)}catch(m){return!1}return b(f,this.operator,this.semver,this.options)};d.prototype.intersects=function(f,m){if(!(f instanceof d))throw new TypeError("a Comparator is required");
m&&"object"===typeof m||(m={loose:!!m,includePrerelease:!1});if(""===this.operator)return""===this.value?!0:(new a(f.value,m)).test(this.value);if(""===f.operator)return""===f.value?!0:(new a(this.value,m)).test(f.semver);var q=(">="===this.operator||">"===this.operator)&&(">="===f.operator||">"===f.operator),r=("<="===this.operator||"<"===this.operator)&&("<="===f.operator||"<"===f.operator),u=this.semver.version===f.semver.version,v=(">="===this.operator||"<="===this.operator)&&(">="===f.operator||
"<="===f.operator),y=b(this.semver,"<",f.semver,m)&&(">="===this.operator||">"===this.operator)&&("<="===f.operator||"<"===f.operator);f=b(this.semver,">",f.semver,m)&&("<="===this.operator||"<"===this.operator)&&(">="===f.operator||">"===f.operator);return q||r||u&&v||y||f};$jscomp.global.Object.defineProperties(d,{ANY:{configurable:!0,enumerable:!0,get:function(){return g}}});mL=d;var k=Wz(),e=Yv(),h=e.re,n=e.t,b=jC(),c=Xv(),l=Ml(),a=ho();return mL}function Wo(){if(lT)return mT;lT=!0;var g=ho();
return mT=function(d,k,e){try{k=new g(k,e)}catch(h){return!1}return k.test(d)}}function qm(){if(nT)return oT;nT=!0;var g=Ml(),d=ho();return oT=function(k,e,h){var n=null,b=null,c=null;try{c=new d(e,h)}catch(l){return null}k.forEach(function(l){!c.test(l)||n&&-1!==b.compare(l)||(n=l,b=new g(n,h))});return n}}function nL(){if(pT)return qT;pT=!0;var g=ho();return qT=function(d,k){try{return(new g(d,k)).range||"*"}catch(e){return null}}}function Zg(){if(rT)return sT;rT=!0;var g=Zv();return sT=function(d,
k){return(d=g(d.trim().replace(/^[=v]+/,""),k))?d.version:null}}function kC(){if(tT)return uT;tT=!0;var g=Ml();return uT=function(d,k){return(new g(d,k)).minor}}function oL(){if(vT)return wT;vT=!0;var g=Ml();return wT=function(d,k){return(new g(d,k)).patch}}function pL(){if(xT)return yT;xT=!0;var g=Vo();return yT=function(d,k){return g(d,k,!0)}}function Jx(){if(zT)return AT;zT=!0;var g=pm();return AT=function(d,k){return d.sort(function(e,h){return g(e,h,k)})}}function lC(){if(BT)return CT;BT=!0;
var g=ho();return CT=function(d,k){return(new g(d,k)).set.map(function(e){return e.map(function(h){return h.value}).join(" ").trim().split(" ")})}}function Xo(){if(DT)return ET;DT=!0;var g=Ml(),d=ho();return ET=function(k,e,h){var n=null,b=null,c=null;try{c=new d(e,h)}catch(l){return null}k.forEach(function(l){!c.test(l)||n&&1!==b.compare(l)||(n=l,b=new g(n,h))});return n}}function ph(){if(FT)return GT;FT=!0;var g=Ml(),d=ho(),k=aw();return GT=function(e,h){e=new d(e,h);h=new g("0.0.0");if(e.test(h))return h;
h=new g("0.0.0-0");if(e.test(h))return h;h=null;for(var n={},b=0;b<e.set.length;n={$jscomp$loop$prop$setMin$2535:n.$jscomp$loop$prop$setMin$2535},++b){var c=e.set[b];n.$jscomp$loop$prop$setMin$2535=null;c.forEach(function(l){return function(a){var f=new g(a.semver.version);switch(a.operator){case ">":0===f.prerelease.length?f.patch++:f.prerelease.push(0),f.raw=f.format();case "":case ">=":if(!l.$jscomp$loop$prop$setMin$2535||k(f,l.$jscomp$loop$prop$setMin$2535))l.$jscomp$loop$prop$setMin$2535=f;break;
case "<":case "<=":break;default:throw Error("Unexpected operation: "+a.operator);}}}(n));!n.$jscomp$loop$prop$setMin$2535||h&&!k(h,n.$jscomp$loop$prop$setMin$2535)||(h=n.$jscomp$loop$prop$setMin$2535)}return h&&e.test(h)?h:null}}function mC(){if(HT)return IT;HT=!0;var g=Ml(),d=Ui(),k=d.ANY,e=ho(),h=Wo(),n=aw(),b=Sm(),c=iC(),l=Yz();return IT=function(a,f,m,q){a=new g(a,q);f=new e(f,q);switch(m){case ">":var r=n;m=c;var u=b;var v=">";var y=">=";break;case "<":r=b;m=l;u=n;v="<";y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');
}if(h(a,f,q))return!1;for(var z={},A=0;A<f.set.length;z={$jscomp$loop$prop$high$2537:z.$jscomp$loop$prop$high$2537,$jscomp$loop$prop$low$2538:z.$jscomp$loop$prop$low$2538},++A){var C=f.set[A];z.$jscomp$loop$prop$high$2537=null;z.$jscomp$loop$prop$low$2538=null;C.forEach(function(G){return function(F){F.semver===k&&(F=new d(">=0.0.0"));G.$jscomp$loop$prop$high$2537=G.$jscomp$loop$prop$high$2537||F;G.$jscomp$loop$prop$low$2538=G.$jscomp$loop$prop$low$2538||F;r(F.semver,G.$jscomp$loop$prop$high$2537.semver,
q)?G.$jscomp$loop$prop$high$2537=F:u(F.semver,G.$jscomp$loop$prop$low$2538.semver,q)&&(G.$jscomp$loop$prop$low$2538=F)}}(z));if(z.$jscomp$loop$prop$high$2537.operator===v||z.$jscomp$loop$prop$high$2537.operator===y||(!z.$jscomp$loop$prop$low$2538.operator||z.$jscomp$loop$prop$low$2538.operator===v)&&m(a,z.$jscomp$loop$prop$low$2538.semver)||z.$jscomp$loop$prop$low$2538.operator===y&&u(a,z.$jscomp$loop$prop$low$2538.semver))return!1}return!0}}function Zz(){if(JT)return KT;JT=!0;var g=mC();return KT=
function(d,k,e){return g(d,k,">",e)}}function Ps(){if(LT)return MT;LT=!0;var g=mC();return MT=function(d,k,e){return g(d,k,"<",e)}}function qL(){if(NT)return OT;NT=!0;var g=ho();return OT=function(d,k,e){d=new g(d,e);k=new g(k,e);return d.intersects(k)}}function Kx(){if(PT)return QT;PT=!0;var g=Wo(),d=Vo();return QT=function(k,e,h){var n=[],b=null,c=null;k=k.sort(function(f,m){return d(f,m,h)});for(var l=$jscomp.makeIterator(k),a=l.next();!a.done;a=l.next())a=a.value,g(a,e,h)?(c=a,b||(b=a)):(c&&n.push([b,
c]),b=c=null);b&&n.push([b,null]);b=[];n=$jscomp.makeIterator(n);for(c=n.next();!c.done;c=n.next())l=$jscomp.makeIterator(c.value),c=l.next().value,l=l.next().value,c===l?b.push(c):l||c!==k[0]?l?c===k[0]?b.push("<="+l):b.push(c+" - "+l):b.push(">="+c):b.push("*");k=b.join(" || ");return k.length<("string"===typeof e.raw?e.raw:String(e)).length?k:e}}function Lx(){if(RT)return ST;RT=!0;var g=ho(),d=Ui().ANY,k=Wo(),e=Vo(),h=function(c,l,a){if(c===l)return!0;if(1===c.length&&c[0].semver===d)return 1===
l.length&&l[0].semver===d;var f=new Set,m,q,r=$jscomp.makeIterator(c);for(c=r.next();!c.done;c=r.next())c=c.value,">"===c.operator||">="===c.operator?m=n(m,c,a):"<"===c.operator||"<="===c.operator?q=b(q,c,a):f.add(c.semver);if(1<f.size)return null;if(m&&q){var u=e(m.semver,q.semver,a);if(0<u||0===u&&(">="!==m.operator||"<="!==q.operator))return null}for(c=$jscomp.makeIterator(f).next();!c.done;){u=c.value;if(m&&!k(u,String(m),a)||q&&!k(u,String(q),a))return null;m=$jscomp.makeIterator(l);for(c=m.next();!c.done;c=
m.next())if(!k(u,String(c.value),a))return!1;return!0}l=$jscomp.makeIterator(l);for(c=l.next();!c.done;c=l.next()){c=c.value;var v=v||">"===c.operator||">="===c.operator;var y=y||"<"===c.operator||"<="===c.operator;if(m)if(">"===c.operator||">="===c.operator){if(f=n(m,c,a),f===c&&f!==m)return!1}else if(">="===m.operator&&!k(m.semver,String(c),a))return!1;if(q)if("<"===c.operator||"<="===c.operator){if(f=b(q,c,a),f===c&&f!==q)return!1}else if("<="===q.operator&&!k(q.semver,String(c),a))return!1;if(!c.operator&&
(q||m)&&0!==u)return!1}return m&&y&&!q&&0!==u||q&&v&&!m&&0!==u?!1:!0},n=function(c,l,a){if(!c)return l;a=e(c.semver,l.semver,a);return 0<a?c:0>a?l:">"===l.operator&&">="===c.operator?l:c},b=function(c,l,a){if(!c)return l;a=e(c.semver,l.semver,a);return 0>a?c:0<a?l:"<"===l.operator&&"<="===c.operator?l:c};return ST=function(c,l,a){if(c===l)return!0;c=new g(c,a);l=new g(l,a);var f=!1;c=$jscomp.makeIterator(c.set);var m=c.next();a:for(;!m.done;m=c.next()){m=m.value;for(var q=$jscomp.makeIterator(l.set),
r=q.next();!r.done;r=q.next())if(r=h(m,r.value,a),f=f||null!==r,r)continue a;if(f)return!1}return!0}}function Nl(g){g=Object.assign({plugins:Xe.allPlugins,reinitializeIds:!1,skipMigrations:!0},g);if(g.reinitializeIds&&"function"!==typeof g.reinitializeIds)throw Error("serializer option 'reinitializeIds' needs to be a function(id, ref) => id");return g}function Vi(g,d){d=Xe.normalizeOptions(d);var k=d.objPool||new Xe.ObjectPool(d);d=">="+Xe.serializerVersion.replace(Xe.majorAndMinorVersionRe,"");g=
k.snapshotObject(g);Xe.removeUnreachableObjects([g.id],g.snapshot);Xe.clearDanglingConnections(g.snapshot);g.requiredVersion=d;return g}function Qs(g,d){d=Xe.normalizeOptions(d);var k=g.requiredVersion;k&&!Xe.semver.satisfies(Xe.serializerVersion,k)&&console.warn("[lively.serializer deserialization] snapshot requires version "+(k+" but serializer has incompatible version ")+(Xe.serializerVersion+". Deserialization might fail...!"));return(d.objPool||new Xe.ObjectPool(d)).resolveFromSnapshotAndId(g)}
function Mx(g,d,k){function e(){var c=Xe.deserialize(g,k);Xe.runMigrations(n,"objectConverter",g,h);return c}k=Xe.normalizeOptions(k);d.length&&(k.skipMigrations=!1);var h=k.objPool||(k.objPool=new Xe.ObjectPool(k));d=Xe.normalizeMigrations(d);var n=d.after,b;Xe.runMigrations(d.before,"snapshotConverter",g,h);"function"===typeof k.onDeserializationStart&&(b=k.onDeserializationStart(g,k));return b instanceof Promise?b.then(e):e()}function Nx(g,d){return Xe.deserialize(Xe.serialize(g,d),d)}function pF(g){return"[object Array]"===
Y5.call(g)}function kf(g,d,k){(this||rL).type=Number(g);(this||rL).vNode=d;(this||rL).patch=k}function Vp(g,d){var k=g.vnode;k||(k=g.vnode=g.render(d));if(!(Z5(k)||$5(k)||a6(k)))throw Error("thunk did not return a valid node");return k}function Ox(g,d){var k;for(k in g){if(!(k in d)){var e=e||{};e[k]=void 0}var h=g[k],n=d[k];if(h!==n)if(TT(h)&&TT(n))if(zh(n)!==zh(h))e=e||{},e[k]=n;else if(b6(n))e=e||{},e[k]=n;else{if(h=Ox(h,n))e=e||{},e[k]=h}else e=e||{},e[k]=n}for(var b in d)b in g||(e=e||{},e[b]=
d[b]);return e}function zh(g){if(Object.getPrototypeOf)return Object.getPrototypeOf(g);if(g.__proto__)return g.__proto__;if(g.constructor)return g.constructor.prototype}function nC(g,d){var k={a:g};Yo(g,d,k,0);return k}function Yo(g,d,k,e){if(g!==d){var h=k[e],n=!1;if(qF(g)||qF(d))Du(g,d,k,e);else if(null==d)rF(g)||(oC(g,k,e),Px(g,k,e),h=k[e]),h=Zo(h,new Lj(Lj.REMOVE,g,d));else if(Qx(d))if(Qx(g))if(g.tagName===d.tagName&&g.namespace===d.namespace&&g.key===d.key){var b=c6(g.properties,d.properties);
b&&(h=Zo(h,new Lj(Lj.PROPS,g,b)));b=e;var c=g.children;d=d.children;var l=sF(d),a=l.keys,f=l.free;if(f.length===d.length)d={children:d,moves:null};else{l=sF(c);var m=l.keys;if(l.free.length===c.length)d={children:d,moves:null};else{l=[];for(var q=0,r=f.length,u=0,v=0;v<c.length;v++){var y=c[v];y.key?a.hasOwnProperty(y.key)?(y=a[y.key],l.push(d[y])):(u++,l.push(null)):q<r?(y=f[q++],l.push(d[y])):(u++,l.push(null))}f=q>=f.length?d.length:f[q];for(q=0;q<d.length;q++)r=d[q],r.key?m.hasOwnProperty(r.key)||
l.push(r):q>=f&&l.push(r);m=l.slice();f=0;q=[];r=[];for(y=0;y<d.length;){var z=d[y];for(v=m[f];null===v&&m.length;)q.push($z(m,f,null)),v=m[f];v&&v.key===z.key?(f++,y++):z.key?(v&&v.key?a[v.key]!==y+1?(q.push($z(m,f,v.key)),(v=m[f])&&v.key===z.key?f++:r.push({key:z.key,to:y})):r.push({key:z.key,to:y}):r.push({key:z.key,to:y}),y++):v&&v.key&&q.push($z(m,f,v.key))}for(;f<m.length;)v=m[f],q.push($z(m,f,v&&v.key));d=q.length!==u||r.length?{children:l,moves:{removes:q,inserts:r}}:{children:l,moves:null}}}a=
d.children;l=c.length;u=a.length;l=l>u?l:u;for(u=0;u<l;u++)m=c[u],f=a[u],b+=1,m?Yo(m,f,k,b):f&&(h=Zo(h,new Lj(Lj.INSERT,null,f))),Qx(m)&&m.count&&(b+=m.count);d.moves&&(h=Zo(h,new Lj(Lj.ORDER,g,d.moves)))}else h=Zo(h,new Lj(Lj.VNODE,g,d)),n=!0;else h=Zo(h,new Lj(Lj.VNODE,g,d)),n=!0;else UT(d)?UT(g)?g.text!==d.text&&(h=Zo(h,new Lj(Lj.VTEXT,g,d))):(h=Zo(h,new Lj(Lj.VTEXT,g,d)),n=!0):rF(d)&&(rF(g)||(n=!0),h=Zo(h,new Lj(Lj.WIDGET,g,d)));h&&(k[e]=h);n&&(oC(g,k,e),Px(g,k,e))}}function Px(g,d,k){if(rF(g))"function"===
typeof g.destroy&&(d[k]=Zo(d[k],new Lj(Lj.REMOVE,g,null)));else if(Qx(g)&&(g.hasWidgets||g.hasThunks)){g=g.children;for(var e=g.length,h=0;h<e;h++){var n=g[h];k+=1;Px(n,d,k);Qx(n)&&n.count&&(k+=n.count)}}else qF(g)&&Du(g,null,d,k)}function Du(g,d,k,e){g=d6(g,d);g=nC(g.a,g.b);a:{for(h in g)if("a"!==h){var h=!0;break a}h=!1}h&&(k[e]=new Lj(Lj.THUNK,null,g))}function oC(g,d,k){if(Qx(g)){if(g.hooks){var e=d[k],h=Lj.PROPS,n=g.hooks,b={},c;for(c in n)b[c]=void 0;d[k]=Zo(e,new Lj(h,g,b))}if(g.descendantHooks||
g.hasThunks)for(g=g.children,e=g.length,h=0;h<e;h++)n=g[h],k+=1,oC(n,d,k),Qx(n)&&n.count&&(k+=n.count)}else qF(g)&&Du(g,null,d,k)}function $z(g,d,k){g.splice(d,1);return{from:d,key:k}}function sF(g){for(var d={},k=[],e=g.length,h=0;h<e;h++){var n=g[h];n.key?d[n.key]=h:k.push(h)}return{keys:d,free:k}}function Zo(g,d){return g?(e6(g)?g.push(d):g=[g,d],g):d}function pC(g,d,k,e){if(e)if(e=e[d],VT(e))e.unhook&&e.unhook(g,d,k);else if("attributes"===d)for(var h in e)g.removeAttribute(h);else if("style"===
d)for(var n in e)g.style[n]="";else g[d]="string"===typeof e?"":null}function tF(g){if(Object.getPrototypeOf)return Object.getPrototypeOf(g);if(g.__proto__)return g.__proto__;if(g.constructor)return g.constructor.prototype}function uF(g,d){var k=d?d.document||WT:WT,e=d?d.warn:null;g=f6(g).a;if(g6(g))return g.init();if(h6(g))return k.createTextNode(g.text);if(!i6(g))return e&&e("Item is not a valid virtual dom node",g),null;k=null===g.namespace?k.createElement(g.tagName):k.createElementNS(g.namespace,
g.tagName);j6(k,g.properties);g=g.children;for(e=0;e<g.length;e++){var h=uF(g[e],d);h&&k.appendChild(h)}return k}function Pk(g,d,k,e,h){e=e||{};if(g){vF(k,h,h)&&(e[h]=g);var n=d.children;if(n){g=g.childNodes;for(var b=0;b<d.children.length;b++){h+=1;var c=n[b]||k6,l=h+(c.count||0);vF(k,h,l)&&Pk(g[b],c,k,e,h);h=l}}}return e}function vF(g,d,k){if(0===g.length)return!1;for(var e=0,h=g.length-1,n,b;e<=h;){n=(h+e)/2>>0;b=g[n];if(e===h)return b>=d&&b<=k;if(b<d)e=n+1;else if(b>k)h=n-1;else return!0}return!1}
function Tm(g,d){return g>d?1:-1}function Rs(g,d){"function"===typeof d.destroy&&l6(d)&&d.destroy(g)}function wF(g,d,k){k=k||{};k.patch=k.patch&&k.patch!==wF?k.patch:sL;k.render=k.render||m6;return k.patch(g,d,k)}function sL(g,d,k){var e=[];for(h in d)"a"!==h&&e.push(Number(h));if(0===e.length)return g;var h=n6(g,d.a,e);var n=g.ownerDocument;k.document||n===o6||(k.document=n);for(n=0;n<e.length;n++){var b=e[n];var c=h[b],l=d[b],a=k;if(c)if(p6(l))for(var f=0;f<l.length;f++)b=XT(l[f],c,a),c===g&&(g=
b);else b=XT(l,c,a),c===g&&(g=b)}return g}function aA(g,d,k,e,h){(this||Ss).tagName=g;(this||Ss).properties=d||q6;(this||Ss).children=k||r6;(this||Ss).key=null!=e?String(e):void 0;(this||Ss).namespace="string"===typeof h?h:null;g=k&&k.length||0;e=0;var n=h=!1,b=!1,c;for(a in d)if(d.hasOwnProperty(a)){var l=d[a];s6(l)&&l.unhook&&(c||(c={}),c[a]=l)}for(d=0;d<g;d++){var a=k[d];t6(a)?(e+=a.count||0,!h&&a.hasWidgets&&(h=!0),!n&&a.hasThunks&&(n=!0),b||!a.hooks&&!a.descendantHooks||(b=!0)):!h&&u6(a)?"function"===
typeof a.destroy&&(h=!0):!n&&v6(a)&&(n=!0)}(this||Ss).count=g+e;(this||Ss).hasWidgets=h;(this||Ss).hasThunks=n;(this||Ss).hooks=c;(this||Ss).descendantHooks=b}function qC(g){(this||w6).text=String(g)}function bA(g){if(!(this instanceof bA))return new bA(g);this.value=g}function Rx(g){if(!(this instanceof Rx))return new Rx(g);this.value=g}function rC(g,d,k,e){if("string"===typeof g)d.push(new YT(g));else if("number"===typeof g)d.push(new YT(String(g)));else if(xF(g))d.push(g);else if(ZT(g))for(var h=
0;h<g.length;h++)rC(g[h],d,k,e);else if(null!==g&&void 0!==g)throw d={tagName:k,properties:e},k=Error(),k.type="virtual-hyperscript.unexpected.virtual-element",k.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+sC(g)+".\nThe parent vnode is:\n"+sC(d),k.foreignObject=g,k.parentVnode=d,k;}function xF(g){return x6(g)||y6(g)||z6(g)||A6(g)}function sC(g){try{return JSON.stringify(g,null,"    ")}catch(d){return String(g)}}function tC(g,d){if(3===
g.nodeType)return new $T(g.nodeValue);if(1===g.nodeType||9===g.nodeType){var k="http://www.w3.org/1999/xhtml"!==g.namespaceURI?g.namespaceURI:null,e=d&&g.getAttribute(d)?g.getAttribute(d):null,h=g.tagName;var n,b={};if(g.hasAttributes()){if(g.namespaceURI&&"http://www.w3.org/1999/xhtml"!==g.namespaceURI)var c=g.namespaceURI;for(var l=0;l<g.attributes.length;l++){if("style"==g.attributes[l].name){var a=g.style;var f={};for(n=0;n<a.length;++n){var m=a.item(n);f[m]=String(a[m]);-1<f[m].indexOf("url")&&
(f[m]=f[m].replace(/"/g,""))}a="style";m=n=void 0}else c?(n=g.attributes[l],a=n.name,f=n.value,n=B6[n.name]||"",m=void 0):(n=void 0,f=g.attributes[l],a=aU[f.name]?aU[f.name]:f.name,0===a.indexOf("data-")||0===a.indexOf("aria-")?(f=f.value,n=!0):f=f.value,m=n||!1,n=void 0);n?b[a]={namespace:n,value:f}:m?(b.attributes||(b.attributes={}),b.attributes[a]=f):b[a]=f}}c=[];for(l=0;l<g.childNodes.length;l++)c.push(tC(g.childNodes[l],d));return new C6(h,b,c,e,k)}return new $T("")}function Sx(g){var d={};qh.addFill(g,
d);qh.addTransform(g,d);qh.addTransformOrigin(g,d);qh.addDisplay(g,d);qh.addExtentStyle(g,d);qh.addBorder(g,d);qh.addBorderRadius(g,d);qh.addShadowStyle(g,d);g.grayscale&&(d.filter=(d.filter||"")+" grayscale("+100*g.grayscale+"%)");g.blur&&(d.filter=(d.filter||"")+" blur("+g.blur+"px)");null!=g.opacity&&(d.opacity=g.opacity);g.draggable&&!g.isWorld&&(d["touch-action"]="none");return d}function uC(g,d){var k=g.position,e=g.origin,h=g.scale,n=g.rotation,b=g.flipped,c=g.tilted,l=g.perspective,a=g.owner,
f=Math.round(k.x-e.x-(g._skipWrapping&&a?a.borderWidthLeft:0));k=Math.round(k.y-e.y-(g._skipWrapping&&a?a.borderWidthTop:0));if(g=g.renderOnGPU||g.dropShadow&&!g.dropShadow.fast||0<g.grayscale)d.willChange="transform";a&&a.isText||g?d.transform="translate("+f+"px, "+k+"px)":(d.transform="",d.top=k+"px",d.left=f+"px");d.transform+=" rotate("+n.toFixed(2)+"rad) scale("+h.toFixed(5)+","+h.toFixed(5)+")";l&&(d.perspective=l+"px");b&&(d.transform+=" rotateY("+180*b+"deg)");c&&(d.transform+=" rotateX("+
180*c+"deg)")}function Tx(g,d){var k=g.width;g=g.height;d.width=k||1;d.height=g||1;d.viewBox=[0,0,k||1,g||1].join(" ");return d}function sr(g){var d="";if(0<g.length){var k=g[0];var e=k.position;var h=e.y;e=e.x;d+="M "+e+" "+h+" "}for(var n=1;n<g.length-1;n++){var b=g[n],c=b.position,l=c.x;c=c.y;var a=b,f=a.controlPoints.previous;d=a.isSmooth?d+("C "+(e+k.controlPoints.next.x)+" "+(h+k.controlPoints.next.y)+" "+(l+f.x)+" "+(c+f.y)+" "+l+" "+c+" "):d+("L "+l+" "+c+" ");k=b;e=l;h=c}0<g.length&&(b=g[g.length-
1].position,n=b.x,b=b.y,g=g[g.length-1],l=g.controlPoints.previous,d=g.isSmooth?d+("C "+(e+k.controlPoints.next.x)+" "+(h+k.controlPoints.next.y)+" "+(n+l.x)+" "+(b+l.y)+" "+n+" "+b):d+("L "+n+" "+b));return d}function cw(g,d){var k=g.id,e=g.vertices,h=g.fill,n=g.borderColor,b=g.borderWidth;e.length&&(d.d=qh.getSvgVertices(e));qh.addSvgBorderStyle(g,d);d["stroke-width"]=b.valueOf();d.fill=h?h.isGradient?"url(#gradient-fill"+k+")":h.toString():"transparent";d.stroke=n.valueOf().isGradient?"url(#gradient-borderColor"+
k+")":n.valueOf().toString();return d}function dw(g){var d=g.reactsToPointer,k=g.nativeCursor,e=g.clipMode,h=Zd.styleProps(g);g=g._animationQueue.maskedProps("css");"backgroundImage"in g&&delete h.background;"visible"!==e&&(h.overflow=e,h["-webkit-overflow-scrolling"]="touch",h["overflow-anchor"]="none");Object.assign(h,g);h.position="absolute";h["pointer-events"]=d?"auto":"none";h.cursor=k;return h}function Eu(g,d){this.morph=g;this.type=d}function gi(g,d){d={animation:new Zd.Animation(g),key:g.id,
id:g.id,attributes:{},className:(g.hideScrollbars?g.styleClasses.concat("hiddenScrollbar"):g.styleClasses).join(" "),draggable:!1,"morph-after-render-hook":new Zd.MorphAfterRenderHook(g,d)};d.attributes["touch-action"]=Zd.bowser.ios&&g.draggable&&!g.isWorld?"none":Zd.bowser.ios&&"visible"!=g.clipMode&&!g.isWorld?"auto":"manipulation";return d}function cA(g){var d=new Zd.SvgAnimation(g,"svg"),k={};Zd.addSvgAttributes(g,k);Object.assign(k,g._animationQueue.maskedProps("svg"));return{animation:d,attributes:k}}
function Ux(g){var d=new Zd.SvgAnimation(g,"path"),k={mask:0!==g.drawnProportion?"url(#mask"+g.id+")":""};Zd.addPathAttributes(g,k);Object.assign(k,g._animationQueue.maskedProps("path"));return{animation:d,attributes:k}}function dA(g,d,k){var e=k=k.valueOf(),h=e.bounds,n=e.focus,b=e.vector;e=e.stops;var c=d.x;d=d.y;g={namespace:"http://www.w3.org/2000/svg",attributes:{id:"gradient-"+g,gradientUnits:"userSpaceOnUse",r:"50%"}};b&&(g.attributes.gradientTransform="rotate("+Zd.num.toDegrees(b.extent().theta())+
", "+c/2+", "+d/2+")");n&&h&&(b=h.width,h=h.height,g.attributes.gradientTransform="matrix(\n"+b/c+", 0, 0, "+h/d+",\n"+(c/2-b/c*(c/2)+n.x*c-c/2)+",\n"+(d/2-h/d*(d/2)+n.y*d-d/2)+")");return Zd.h(k.type,g,e.map(function(l){return Zd.h("stop",{namespace:"http://www.w3.org/2000/svg",attributes:{offset:100*l.offset+"%","stop-opacity":l.color.a,"stop-color":l.color.withA(1).toString()}})}))}function Vx(g,d){d=void 0===d?g.env.renderer:d;return Zd.createNode(g.render(d),d.domEnvironment)}function Di(g,d){var k=
d.renderMap.get(g),e=d.getNodeForMorph(g);if(e&&k){var h=d.render(g),n=Zd.diff(k,h);if(g=d.renderMap.get(g.owner))g=g.children[0].children,k=g.indexOf(k),g[k]=h,Zd.patch(e,n)}}function Rd(g,d){if(g.needsRerender()){var k=!1,e=d.domNode,h=d.renderMap.get(g)||e&&(k=!0)&&Zd.parser(e)||d.render(g),n=d.render(g);k&&(h.key=n.key);k=Zd.diff(h,n);e=e||(d.domNode=Zd.createNode(h,d.domEnvironment));e.parentNode||Zd.initDOMState(d,g);Zd.patch(e,k);d.renderFixedMorphs(n.fixedMorphs,g)}}function Wx(g,d,k){return(((1-
3*k+3*d)*g+(3*k-6*d))*g+3*d)*g}function td(g){return g}function $o(g){return Ie.obj.isFunction(g)?g:Ie.Bezier.apply(Ie,$jscomp.arrayFromIterable(eval("(["+g.match(/\((.*)\)/)[1]+"])")))}function Ts(g){var d=0,k=0;do d+=g.offsetTop||0,k+=g.offsetLeft||0,g=g.offsetParent;while(g);return{top:d,left:k}}function vj(){return System.get("@system-env").browser?ng.createDOMEnvironment_browser():ng.createDOMEnvironment_node()}function Fu(){return ng._defaultEnv||(ng._defaultEnv=System.get("@system-env").browser?
new ng.DomEnvironment(window,document,function(){}):ng.createDOMEnvironment())}function nc(g,d,k){g=void 0===g?"lively-css":g;k=void 0===k?document:k;var e=k.getElementById(g);return e?ng.setCSSDef(e,d,k):ng.addCSSDef(g,d,k)}function tr(g,d,k,e){k=void 0===k?document:k;e=void 0===e?!0:e;var h=k.getElementById(g),n=!1;return h?e&&h.getAttribute("href")!==d?(h.setAttribute("href",d),h.onload=function(){return n=!0},ng.promise.waitFor(3E4,function(){return!!n&&h})):Promise.resolve():(h=k.createElement("link"),
h.type="text/css",h.rel="stylesheet",h.setAttribute("id",g),h.setAttribute("href",d),h.onload=function(){return n=!0},k.head.appendChild(h),ng.promise.waitFor(3E4,function(){return!!n&&h}))}function aa(g,d){return Array.isArray(g)?g.reduce(function(k,e){return aa(e,k)},d):"string"===typeof g?d.filter(function(k){return k.path()!==g&&k.name()!==g}):g instanceof RegExp?d.filter(function(k){return!g.test(k.path())&&!g.test(k.name())}):"function"===typeof g?d.filter(function(k){return!g(k)}):d}function p(g){g=
$jscomp.makeIterator(g.split("?"));g.next();var d=g.next().value;g={};if(!d)return g;if(d=d.split("&"))for(var k=0;k<d.length;k++){var e=d[k].split("="),h=e[0],n=!0;if(1<e.length)if(n=decodeURIComponent(e.slice(1).join("=")),"undefined"===n)n=void 0;else if(n.match(/^(true|false|null|[0-9"[{].*)$/))try{n=JSON.parse(n)}catch(b){"["===n[0]&&(n=n.slice(1,-1).split(","))}g[h]=n}return g}function t(g){return Object.keys(g).map(function(d){return d+"="+encodeURIComponent(String(g[d]))}).join("&")}function w(g){var d=
g;do g=d,d=g.replace(Pe.pathDoubleDotRe,"");while(d!=g);d=d.replace(Pe.pathDoubleSlashRe,"$1/");return d=d.replace(Pe.pathDotRe,"/")}function x(g,d){var k=g.match(Pe.urlRe),e=d.match(Pe.urlRe),h=!0;if(k&&!e||!k&&e)h=!1;if(k&&e){var n=k[1];var b=k[2];var c=e[1];var l=e[2];n!==c?h=!1:b!==l?h=!1:(g=k[3],d=e[3])}if(!h)throw Error("[relativePathBetween] incompatible paths: "+g+" vs. "+d);g=Pe.withRelativePartsResolved(g);d=Pe.withRelativePartsResolved(d);if(g==d)return"";k=Pe._relativePathBetween_checkPathes(d,
g);if(!k)throw Error("pathname differs in relativePathFrom "+g+" vs "+d);return k}function B(g,d){return Pe.withRelativePartsResolved(g.replace(Pe.slashEndRe,"")+"/"+d.replace(Pe.slashStartRe,""))}function E(g){return g.startsWith("/")?g.replace(Pe.slashEndRe,"").split("/").slice(0,-1).join("/")+"/":""}function K(g){var d=[];for(g=Pe.parent(g);g&&(d.unshift(g),g=Pe.parent(g),"/"!==g););return d}function T(g,d){if(!g)throw Error("lively.resource resource constructor: expects url but got "+g);if(g.isResource)return g;
g=String(g);for(var k=0;k<Pe.extensions.length;k++)if(Pe.extensions[k].matches(g))return new Pe.extensions[k].resourceClass(g,d);throw Error("Cannot find resource type for url "+g);}function ka(g,d,k){var e,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){switch(c.nextAddress){case 1:return e=T(g,k).asDirectory(),c.yield(e.ensureExistance(),2);case 2:n=c.forIn(d);case 3:if(null==(h=n.getNext())){c.jumpTo(5);break}if(!d.hasOwnProperty(h)){c.jumpTo(3);break}b=e.join(h);return"object"===
typeof d[h]?c.yield(ka(b,d[h],k),9):c.yield(b.write(d[h]),8);case 8:c.jumpTo(7);break;case 9:case 7:c.jumpTo(3);break;case 5:return c.return(e)}})}function ma(g){var d=g.name;Pe.extensions=Pe.extensions.filter(function(k){return k.name!==d}).concat(g)}function Ea(g){var d="string"===typeof g?g:g.name;Pe.extensions=Pe.extensions.filter(function(k){return k.name!==d})}function Za(g,d){var k=void 0===g.useProxy?!0:g.useProxy,e=void 0===g.useCors?!0:g.useCors,h=g.url,n=g.onLoad,b=g.headers,c=g.onProgress,
l=new XMLHttpRequest,a=$f.promise.deferred();l.open("PUT",h);k&&(Object.assign(b,{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":h}),h=g.proxyDomain||$f.defaultOrigin());for(var f in b)l.setRequestHeader(f,b[f]);l.upload.addEventListener("progress",c);l.responseType="json";l.onload=function(){n(l.response);a.resolve(l)};e&&(l.withCredentials=!0);l.send(d);return a.promise}function vb(g,d,k){d=void 0===d?"infinity":d;var e,h,n,b,c,l,a,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(g.dirList(d,
k),2);case 2:e=v.yieldResult,h={},n=$jscomp.makeIterator(e),b=n.next();case 3:if(b.done){v.jumpTo(5);break}c=b.value;if(c.isDirectory()){l={};v.jumpTo(6);break}return v.yield(c.read(),7);case 7:l=v.yieldResult;case 6:a=l;f=c.asFile().relativePathFrom(g).split("/");m=h;q=$jscomp.makeIterator(f.slice(0,-1));for(r=q.next();!r.done;r=q.next())u=r.value,m[u]||(m[u]={}),m=m[u];m[f[f.length-1]]=a;b=n.next();v.jumpTo(3);break;case 5:return v.return(h)}})}function sb(g){var d,k,e,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return d=document.head,k=d.namespaceURI,e=Sg.newUUID(),h=document.createElementNS(k,"script"),h.setAttribute("type","module"),d.appendChild(h),h.innerText="import m from '"+g+"'; window['"+e+"'] = m;",h.setAttributeNS(null,"async",!0),b.yield(Sg.waitFor(3E4,function(){return window[e]}),2);n=b.yieldResult;delete window[e];h.remove();return b.return(n)})}function Qb(g,d){var k=document.head,e=k.namespaceURI;return new Promise(function(h,n){var b=document.createElementNS(e,"script");b.setAttribute("type",
"text/ecmascript");k.appendChild(b);b.setAttributeNS(null,"id",g);"http://www.w3.org/2000/svg"===b.namespaceURI?b.setAttributeNS("http://www.w3.org/1999/xlink","href",g):b.setAttribute("src",g);b.onload=h;b.onerror=n;b.setAttributeNS(null,"async",!0)})}function pc(){var g,d,k,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){switch(h.nextAddress){case 1:if("fetch"in System.global&&"Headers"in System.global)return h.return(Promise.resolve());g=System.decanonicalize("lively.resources");
if(System.get("@system-env").node){h.setCatchFinallyBlocks(5);d=System._nodeRequire("fetch-ponyfill");h.leaveTryBlock(3);break}return h.yield(System.import("fetch-ponyfill",g),4);case 4:d=h.yieldResult;h.jumpTo(3);break;case 5:return h.enterCatchBlock(),h.yield(System.normalize("fetch-ponyfill",g),7);case 7:return k=h.yieldResult.replace("file://",""),h.yield(System.import(k),8);case 8:e=h.yieldResult,d=e.default;case 3:Object.assign(System.global,d()),h.jumpToEnd()}})}function Rb(g,d){d||(d="undefined"!==
typeof document?document.location.search:"");d=(d=d.trim())&&"?"!==d?Ah.parseQuery(d):{};g.endsWith(".json")?(d.file=g,delete d.name):(delete d.file,d.name=g);return"/worlds/load?"+Ah.stringifyQuery(d)}function xc(g){Object.assign(Ah.nameToClassMapping,g)}function Gc(g,d){g=void 0===g?{}:g;d=void 0===d?{restore:!1}:d;var k=Ah.nameToClassMapping.default;g.type&&("function"===typeof g.type&&(k=g.type),"object"===typeof g.type?k=Ah.locateClass(g.type):"string"===typeof g.type&&(k=Ah.nameToClassMapping[g.type.toLowerCase()]||
k));var e={};return d.restore?(new k((e[Symbol.for("lively-instance-restorer")]=!0,e))).initFromJSON(g):new k(g)}function Vc(g){return("function"===typeof g?g[Symbol.for("__LivelyClassName__")]:"string"===typeof g?g.toLowerCase():"")+"_"+Ah.string.newUUID().replace(/-/g,"_")}function Kc(g,d){if("string"===typeof g)return g;if(!g||"object"!==typeof g)return null;switch(d){case "ios":return g.ios||g.mac;case "mac":return g.mac||g.ios;case "win":case "windows":case "windowsphone":return g.win||g.windows;
case "linux":return g.linux||g.win||g.windows;case "chromeos":return g.chromeos||g.linux||g.win||g.windows;case "android":return g.android||g.linux||g.win||g.windows;default:return g.linux||g.win||g.windows}}function rd(g,d,k,e){e=void 0===e?k.name:e;(g[d]=io.fun.wrap(g[d],k)).hookFunc=k;k.hookName=e}function Yd(g,d,k){for(var e=[],h=g[d];h;)e.push(h),h=h.originalFunction;h="string"===typeof k?e.find(function(n){return n.hookFunc&&n.hookFunc.hookName===k}):e.find(function(n){return n.hookFunc===k});
if(!h)return!1;io.arr.remove(e,h);g[d]=e.reduceRight(function(n,b){return io.fun.wrap(n,b.hookFunc||b)});return!0}function sd(g,d,k){for(g=g[d];g;){if(g.hookFunc&&("string"===typeof k&&g.hookFunc.hookName===k||g.hookFunc===k))return!0;g=g.originalFunction}return!1}function ed(g){if(g.loads){var d=g.loads;return Gu.arr.uniq(Object.keys(Gu.loadedModules(g)).concat(Object.keys(d))).reduce(function(k,e){var h=d[e]?d[e].depMap:{};k[e]=Object.keys(h).map(function(n){var b=h[n];return"@empty"===b?b+"/"+
n:b});return k},{})}return Object.keys(g._loader.moduleRecords).reduce(function(k,e){k[e]=g._loader.moduleRecords[e].dependencies.filter(Boolean).map(function(h){return h.name});return k},{})}function le(g,d,k,e,h){var n=g.get("@lively-env").pendingExportChanges;(g=Um.module(g,d).record())&&(k in g.exports||h)&&((n[d]||(n[d]={}))[k]=e)}function Sd(g,d){var k=g.get("@lively-env").pendingExportChanges[d];k&&(Um.clearPendingModuleExportChanges(g,d),Um.updateModuleExports(g,d,k))}function Md(g,d,k,e,
h){var n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){switch(c.nextAddress){case 1:c.setCatchFinallyBlocks(2);g.debug&&console.log("[module change] "+d+" "+k.slice(0,50).replace(/\n/g,"")+" "+e);if(!e||"es6"===e||"esm"===e||"register"===e||"defined"===e)return c.yield(Wi.moduleSourceChangeEsm(g,d,k,h),8);if("global"!==e)throw Error("moduleSourceChange is not supported for module "+d+" with format "+e);return c.yield(Wi.moduleSourceChangeGlobal(g,d,k,h),7);case 7:n=c.yieldResult;
c.jumpTo(5);break;case 8:n=c.yieldResult;case 5:return Wi.emit("lively.modules/modulechanged",{module:d,newSource:k,options:h},Date.now(),g),c.return(n);case 2:throw b=c.enterCatchBlock(),Wi.emit("lively.modules/modulechanged",{module:d,newSource:k,error:b,options:h},Date.now(),g),b;}})}function ce(g){return/\.js/i.test(g)}function Je(g){return Ol.isJsFile(g)?g.replace(/\/[^\/]*$/,""):g.replace(/\/$/,"")}function re(g){return/^[^:\\]+:\/\//.test(g)}function Ve(g){var d=g.match(/^([^:]+:\/\/)(.*)/);
if(!d)return g;g=d[1];var k=d=d[2];do d=k,k=d.replace(/\/[^\/]+\/\.\./,"");while(k!=d);k=k.replace(/(^|[^:])[\/]+/g,"$1/");k=k.replace(/\/\.\//g,"/");return g+k}function dg(g,d,k){k=void 0===k?!1:k;var e=me.classHolder.PackageRegistry.ofSystem(g),h=e.allPackageURLs();g=k?d:me.normalizePackageURL(g,d,h);return{pkg:e.findPackageWithURL(g),url:g,allPackageURLs:h,registry:e}}function ui(g,d,k){g=me.lookupPackage(g,d,void 0===k?!1:k);d=g.url;k=g.registry;return g.pkg||k.addPackageAt(d,"devPackageDirs")}
function vi(g,d,k){g=me.lookupPackage(g,d,void 0===k?!1:k);if(k=g.pkg)return k;throw Error("[getPackage] package "+d+" (as "+g.url+") not found");}function Hh(g,d,k){return me.getPackage(g,k).updateConfig(d)}function ag(g,d){return Promise.resolve(me.ensurePackage(g,d)).then(function(k){return k.import()})}function kj(g,d){return(g=me.lookupPackage(g,d).pkg)?g.remove():null}function Mi(g,d,k){return me.getPackage(g,d).reload(k)}function Vm(g,d,k){return Promise.resolve(me.ensurePackage(g,d)).then(function(e){return e.register(k)})}
function ur(g){return me.Package.allPackages(g).map(function(d){return d.asSpec()})}function Wm(g,d){g="string"===typeof g?Oc.parse(g):g;d.scope=Oc.query.resolveReferences(Oc.query.scopes(g));return Oc.ClassReplaceVisitor.run(g,d)}function vr(g,d,k){k=wn.ensureParent(g,d);var e=g.System._nodeRequire("module");d.startsWith(".")&&(d=wn.relative(g,d));return e._load(d,k)}function wr(g,d,k){k=wn.ensureParent(g,d);var e=g.System._nodeRequire("module");d.startsWith(".")&&(d=wn.relative(g,d));return e._resolveFilename(d,
k)}function xn(g,d,k){var e=fe.livelySystemEnv(g);d=g.decanonicalize(d,k);return e.loadedModules[d]||(e.loadedModules[d]=new fe.ModuleInterface(g,d))}function Fg(g,d,k){k=void 0===k?!1:k;var e=fe.livelySystemEnv(g);return(k?d:g.normalizeSync(d))in e.loadedModules}function Ni(g,d,k){k=void 0===k?!1:k;var e,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){fe.livelySystemEnv(g);e=k?d:g.normalizeSync(d);if(fe.isModuleLoaded(g,e,!0))return b.return(!0);h=fe.Package.forModuleId(g,
e);return h&&"no group"!==h.name?b.yield(h.hasResource(e),3):(n=g.resource(e).exists(),b.jumpTo(2))}2!=b.nextAddress&&(n=b.yieldResult);return b.return(n)})}function wi(){return Nd.exceptions}function rm(g){return Nd.exceptions=g}function eA(g,d,k,e,h){d=String(d);g=e.sourceAccessorName;var n=e.recorder,b=e.recorderName,c=e.dontTransform,l=e.varDefinitionCallbackName,a=void 0===e.embedOriginalCode?!0:e.embedOriginalCode;g=a?g:void 0;e={topLevelVarRecorder:n,varRecorderName:b,sourceAccessorName:g,
dontTransform:c,jsx:k.endsWith(".jsx"),recordGlobals:!0,keepPreviouslyDeclaredValues:!0,declarationWrapperName:l,evalId:e.nextEvalId(),classTransform:Nd.classToFunctionTransform,currentModuleAccessor:Nd.funcCall(Nd.member(Nd.funcCall(Nd.member(Nd.member("__lvVarRecorder","System"),"get"),Nd.literal("@lively-env")),"moduleEnv"),Nd.literal(k))};n=h?'console.log("[lively.modules] executing module '+k+'");\n':"";c="";"System.global"===b?delete e.declarationWrapperName:(n+='SystemJS.get("@lively-env").evaluationStart("'+
k+'");\nvar '+(b+' = SystemJS.get("@lively-env").moduleEnv("'+k+'").recorder;\n')+(a?"\nvar "+g+" = "+JSON.stringify(d)+";\n":""),c+='\nSystemJS.get("@lively-env").evaluationEnd("'+k+'");');try{var f=n+Nd.evalCodeTransform(d,e)+c;h&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=f);return{source:f,options:e}}catch(m){return console.error("Error in prepareCodeForCustomCompile of "+k+" "+m.stack),{source:d,options:e}}}function Xx(g,d,k,e,h,n){d=
String(d);g=Object.assign({},h,{classTransform:Nd.classToFunctionTransform,topLevelVarRecorder:e.recorder,varRecorderName:e.recorderName,dontTransform:e.dontTransform,recordGlobals:!0,declarationWrapperName:e.varDefinitionCallbackName,currentModuleAccessor:Nd.funcCall(Nd.member(Nd.funcCall(Nd.member(Nd.member("__lvVarRecorder","System"),"get"),Nd.literal("@lively-env")),"moduleEnv"),Nd.literal(k))});try{var b=Nd.evalCodeTransformOfSystemRegisterSetters(d,g);n&&"undefined"!==typeof $world&&$world.get("log")&&
$world.get("log").isText&&($world.get("log").textString+=b);return b}catch(c){return console.error("Error in prepareTranslatedCodeForSetterCapture",c.stack),d}}function Gg(g,d){return g.translate(d).then(function(k){var e=Nd.parse(k).body.find(function(n){return n.expression&&"CallExpression"===n.expression.type&&"register"===n.expression.callee.property.name});if(!e)throw Error("Cannot find register call in translated source of "+d.name);var h=e.expression;e=h.arguments[0].elements.map(function(n){return n.value});
h=h.arguments[1];k=k.slice(h.start,h.end);k=eval('var __moduleName = "'+d.name+'";('+k+");\n//# sourceURL="+d.name+"\n");g.debug&&"undefined"!==$world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=k);return{localDeps:e,declare:k}})}function Qk(g,d){return g.translate(d).then(function(k){return{translated:k}})}function Xm(g){Nd.isHookInstalled(g,"translate","lively_modules_translate_hook")||Nd.installHook(g,"translate",function(d,k){return Nd.customTranslate.call(g,d,
k)},"lively_modules_translate_hook")}function ew(g){Nd.removeHook(g,"translate","lively_modules_translate_hook")}function yF(g){g.resource=eg.resource;eg.isHookInstalled(g,"fetch",eg.fetchResource)&&eg.removeHook(g,"fetch","fetchResource");eg.installHook(g,"fetch",eg.fetchResource);eg.isHookInstalled(g,"resource","livelyProtocol")&&eg.removeHook(g,"fetch","livelyProtocol");eg.installHook(g,"resource",eg.livelyProtocol)}function tL(g){eg.removeHook(g,"fetch","fetchResource");eg.removeHook(g,"resource",
"livelyProtocol");delete g.resource}function zF(g){fd.isHookInstalled(g,"normalize","normalizeHook")||fd.installHook(g,"normalize",fd.normalizeHook,"normalizeHook");fd.isHookInstalled(g,"decanonicalize","decanonicalizeHook")||fd.installHook(g,"decanonicalize",fd.decanonicalizeHook,"decanonicalizeHook");fd.isHookInstalled(g,"normalizeSync","decanonicalizeHook")||fd.installHook(g,"normalizeSync",fd.decanonicalizeHook,"decanonicalizeHook");fd.isHookInstalled(g,"newModule","newModule_volatile")||fd.installHook(g,
"newModule",fd.newModule_volatile,"newModule_volatile");fd.isHookInstalled(g,"instantiate","instantiate_triggerOnLoadCallbacks")||fd.installHook(g,"instantiate",fd.instantiate_triggerOnLoadCallbacks,"instantiate_triggerOnLoadCallbacks");fd.isHookInstalled(g,"locate","locateHook")||fd.installHook(g,"locate",fd.locateHook,"locateHook")}function AF(g){fd.removeHook(g,"normalize","normalizeHook");fd.removeHook(g,"decanonicalize","decanonicalizeHook");fd.removeHook(g,"normalizeSync","decanonicalizeHook");
fd.removeHook(g,"newModule","newModule_volatile");fd.removeHook(g,"instantiate","instantiate_triggerOnLoadCallbacks");fd.removeHook(g,"locate","locateHook")}function BF(g){return{moduleEnv:function(d){return fd.classHolder.module(g,d)},get itself(){return g.get(g.decanonicalize("lively.modules/index.js"))},evaluationStart:function(d){fd.classHolder.module(g,d).evaluationStart()},evaluationEnd:function(d){fd.classHolder.module(g,d).evaluationEnd()},dumpConfig:function(){return JSON.stringify({baseURL:g.baseURL,
transpiler:g.transpiler,defaultJSExtensions:g.defaultJSExtensions,map:g.map,meta:g.meta,packages:g.packages,paths:g.paths,packageConfigPaths:g.packageConfigPaths},null,2)},get packageRegistry(){return g["__lively.modules__packageRegistry"]},set packageRegistry(d){g["__lively.modules__packageRegistry"]=d},packages:g["__lively.modules__packages"]||(g["__lively.modules__packages"]={}),loadedModules:g["__lively.modules__loadedModules"]||(g["__lively.modules__loadedModules"]={}),pendingExportChanges:g["__lively.modules__pendingExportChanges"]||
(g["__lively.modules__pendingExportChanges"]={}),notifications:g["__lively.modules__notifications"]||(g["__lively.modules__notifications"]=[]),notificationSubscribers:g["__lively.modules__notificationSubscribers"]||(g["__lively.modules__notificationSubscribers"]={}),options:g["__lively.modules__options"]||(g["__lively.modules__options"]=fd.obj.deepCopy(fd.defaultOptions)),onLoadCallbacks:g["__lively.modules__onLoadCallbacks"]||(g["__lively.modules__onLoadCallbacks"]=[]),modulePackageMapCache:g["__lively.modules__modulePackageMapCache"]}}
function Yx(g,d){return g&&"string"!==typeof g?g:fd.systems()[g]||(fd.systems()[g]=fd.makeSystem(d))}function Zx(g){g=g&&"string"!==typeof g?fd.nameOfSystem(g):g;delete fd.systems()[g]}function CF(g,d){g.trace=!0;d=d||{};var k=d.hasOwnProperty("useModuleTranslationCache")?d.useModuleTranslationCache:!fd.urlQuery().noModuleCache;g.useModuleTranslationCache=k;g.set("@lively-env",g.newModule(fd.livelySystemEnv(g)));"undefined"!==typeof fd.WorkerGlobalScope&&g.set("@system-env",g.newModule(Object.assign({},
g.get("@system-env"),{browser:!0,worker:!0,location:fd.location})));(k="undefined"!==typeof fd.process&&fd.process.versions&&fd.process.versions.electron)&&g.set("@system-env",g.newModule(Object.assign({electron:k},g.get("@system-env"))));fd.wrapResource(g);fd.wrapModuleLoad(g);fd.wrapModuleResolution(g);k&&(k=["electron"].reduce(function(e,h){e[h]="@node/"+h;return e},{}),d.map=fd.obj.merge(k,d.map));fd.isNode&&(k="addons assert buffer child_process cluster console crypto dgram dns domain events fs http https module net os path punycode querystring readline repl stream stringdecoder timers tls tty url util v8 vm zlib constants".split(" ").reduce(function(e,
h){e[h]="@node/"+h;return e},{}),d.map=fd.obj.merge(k,d.map));d.packageConfigPaths=d.packageConfigPaths||["./node_modules/*/package.json"];d.transpiler||"traceur"!==g.transpiler||(k=fd.GLOBAL.System,"lively.transpiler"===k.transpiler?(g.set("lively.transpiler",k.get("lively.transpiler")),g._loader.transpilerPromise=k._loader.transpilerPromise,g.config({transpiler:"lively.transpiler",babelOptions:Object.assign(k.babelOptions||{},d.babelOptions)})):g.config({map:{"plugin-babel":k.map["plugin-babel"],
"systemjs-babel-build":k.map["systemjs-babel-build"]},transpiler:k.transpiler,babelOptions:Object.assign(k.babelOptions||{},d.babelOptions)}));g.config(d);return g}function DF(g){g=fd.getSystem(g);return JSON.stringify({baseURL:g.baseURL,transpiler:g.transpiler,defaultJSExtensions:g.defaultJSExtensions,defaultExtension:g.defaultExtension,map:g.map,meta:g.meta,packages:g.packages,paths:g.paths,packageConfigPaths:g.packageConfigPaths,bundles:g.bundles},null,2)}function EF(g,d,k){var e=g.decanonicalize(d);
if(g.get(e))try{k(fd.classHolder.module(g,e))}catch(h){console.error(h)}else g.get("@lively-env").onLoadCallbacks.push({moduleName:d,resolved:!1,callback:k})}function FF(g){return g.get("@lively-env").loadedModules}function GF(g){var d=g.loads?Object.keys(g.loads):Object.keys(g._loader.moduleRecords);return fd.arr.uniq(d.concat(Object.keys(fd.loadedModules(g))))}function uL(g,d,k){return Promise.all(fd.obj.values(fd.loadedModules(g)).map(function(e){return e.search(d,k)})).then(function(e){return fd.arr.flatten(e,
1)})}function vC(g,d,k,e){d=void 0===d?{maxDepth:0,excludes:[]}:d;k=void 0===k?{}:k;e=void 0===e?0:e;var h,n,b,c,l,a,f,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:h=d;n=h.maxDepth;b=h.excludes;if(0<n&&e>n)return z.return(k);z.setCatchFinallyBlocks(2);c=JSON;l=c.parse;return z.yield(pl.resource(g).join("package.json").read(),4);case 4:a=l.call(c,z.yieldResult);f=a.name+"@"+a.version;if(k[f]||b.includes(a.name))return z.return(k);k[f]=Object.assign({url:g},
pl.obj.select(a,["name","version","dependencies","devDependencies","main"]));z.leaveTryBlock(3);break;case 2:return z.enterCatchBlock(),z.return(k);case 3:return z.setCatchFinallyBlocks(5),z.yield(pl.resource(g).join("node_modules").dirList(1),7);case 7:m=z.yieldResult;z.leaveTryBlock(6);break;case 5:return z.enterCatchBlock(),z.return(k);case 6:q=$jscomp.makeIterator(m),r=q.next();case 8:if(r.done){z.jumpTo(10);break}v=u=r.value;y=v.url;return z.yield(vC(y,d,k,e+1),11);case 11:k=z.yieldResult;r=
q.next();z.jumpTo(8);break;case 10:return z.return(k)}})}function HF(g,d){var k=Object.assign({},g.dependencies,{},g.devDependencies);return Object.keys(k).reduce(function(e,h){var n=k[h],b=pl.obj.values(d).find(function(l){var a=l.version;return l.name===h&&lively.modules.semver.satisfies(a,n)})||{},c=b.name;b=b.version;e[h]=c?c+"@"+b:void 0;return e},{})}function IF(g){function d(h,n){var b=h+"@"+n;if(b in e)return e[b];var c=k.find(function(a){var f=a.version;return a.name===h&&lively.modules.semver.satisfies(f,
n)})||{},l=c.name;c=c.version;return e[b]=l?l+"@"+c:void 0}var k=pl.obj.values(g),e={};return Object.keys(g).reduce(function(h,n){var b=g[n],c=Object.assign({},b.dependencies,{},b.devDependencies);h[n]=Object.keys(c).map(function(l){return d(l,c[l])}).filter(function(l){return!!l});return h},{})}function JF(g,d){Fc.defaultSystem=g;d&&(Fc.GLOBAL.System=g);return g}function KF(){Fc._wrapModuleResolution(Fc.defaultSystem)}function LF(){Fc._unwrapModuleResolution(Fc.defaultSystem)}function MF(){return Object.keys(Fc.requireMap())}
function wC(g){return Fc._module(Fc.defaultSystem,g)}function NF(g,d){return Fc._isModuleLoaded(Fc.defaultSystem,g,d)}function OF(g,d){return Fc._doesModuleExist(Fc.defaultSystem,g,d)}function PF(){return Fc._printSystemConfig(Fc.defaultSystem)}function QF(g,d){return Fc._whenLoaded(Fc.defaultSystem,g,d)}function RF(g){return Fc._importPackage(Fc.defaultSystem,g)}function SF(g,d){return Fc._registerPackage(Fc.defaultSystem,g,d)}function TF(g){return Fc._removePackage(Fc.defaultSystem,g)}function UF(g,
d){return Fc._reloadPackage(Fc.defaultSystem,g,d)}function VF(){return Fc.getPackageSpecs(Fc.defaultSystem)}function WF(g,d){return Fc._getPackage(Fc.defaultSystem,g,void 0===d?!1:d)}function XF(g){return Fc.Package.forModuleId(Fc.defaultSystem,g)}function YF(g){return Fc._ensurePackage(Fc.defaultSystem,g)}function ZF(g,d){return Fc._applyPackageConfig(Fc.defaultSystem,g,d)}function $F(g,d){return Fc._lookupPackage(Fc.defaultSystem,g,void 0===d?!1:d)}function aG(g,d,k){return Fc._moduleSourceChange(Fc.defaultSystem,
g,d,k)}function bG(){return Fc.computeRequireMap(Fc.defaultSystem)}function cG(g,d){return Fc._isHookInstalled(Fc.defaultSystem,g,d)}function dG(g,d){return Fc._installHook(Fc.defaultSystem,g,d)}function eG(g,d){return Fc._removeHook(Fc.defaultSystem,g,d)}function fG(){Fc._wrapModuleLoad(Fc.defaultSystem)}function gG(){Fc._unwrapModuleLoad(Fc.defaultSystem)}function vL(g){return g&&g.__ref__}function xC(g,d){return ge.serialize(g,ge.normalizeOptions(d))}function yC(g,d){d=void 0===d?{}:d;return ge.deserializeWithMigrations(g,
d.migrations||ge.migrations,ge.normalizeOptions(d))}function wL(g){var d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(d=ge,k=d.loadMorphFromSnapshot,e.yield(g.readJson(),2)):e.return(k.call(d,e.yieldResult))})}function xL(g,d,k){g=void 0===g?ge.MorphicEnv.default().world:g;var e,h,n,b,c,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:e=k||{};h=void 0===e.showIndicator?!0:e.showIndicator;n=void 0===
e.changeName?!0:e.changeName;b=void 0===e.changeBrowserURL?!0:e.changeBrowserURL;d||(c=ge.resource(document.location.href),l=c.name(),d=c.join("../"+l.replace(/\.[^\.]+/,"-world.json")).withRelativePartsResolved());"string"===typeof d&&(d=ge.resource(d));n&&(g.name=d.nameWithoutExt());b&&(a=encodeURI(k.pathForBrowserHistory||ge.pathForBrowserHistory(d.path())),window.location.pathname!==a&&window.history.pushState({},"lively.next",a));if(!h){u.jumpTo(2);break}return u.yield(System.import("lively.components/loading-indicator.js"),
3);case 3:return m=u.yieldResult,q=m.LoadingIndicator,f=q.open("string"===typeof h?h:"Snapshotting..."),u.yield(f.whenRendered(),4);case 4:return u.yield(ge.promise.delay(100),2);case 2:return u.setFinallyBlock(6),u.yield(ge.createMorphSnapshot(g,k),8);case 8:return r=u.yieldResult,f.label="Uploading...",u.yield(f.whenRendered(),9);case 9:return u.return(d.writeJson(r));case 6:u.enterFinallyBlock(),f&&f.remove(),u.leaveFinallyBlock(0)}})}function hG(g){return ge.deserializeMorph(ge.serializeMorph(g),
{migrations:ge.migrations,reinitializeIds:!0})}function $x(g,d){d=void 0===d?{}:d;var k,e,h,n,b,c,l,a,f,m,q,r,u,v,y,z,A,C,G,F,N,L,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(la){switch(la.nextAddress){case 1:System.get("@system-env");k=d;e=void 0===k.addPreview?!1:k.addPreview;h=void 0===k.previewWidth?100:k.previewWidth;n=void 0===k.previewHeight?100:k.previewHeight;b=void 0===k.previewType?"png":k.previewType;c=void 0===k.testLoad?!0:k.testLoad;l=void 0===k.addPackages?!0:k.addPackages;
a=void 0===k.ignoreMorphs?[]:k.ignoreMorphs;f=void 0===k.frozenSnapshot?!1:k.frozenSnapshot;m=ge.serializeMorph(g,{frozenSnapshot:f});if(!l){la.jumpTo(2);break}return la.yield(ge.findRequiredPackagesOfSnapshot(m),3);case 3:q=la.yieldResult,r=q.packages,u=q.depMap,m.packages=r,m.packageDepMap=u;case 2:if(!e){la.jumpTo(4);break}return la.yield(System.import("lively.morphic/rendering/morph-to-image.js"),5);case 5:return v=la.yieldResult,y=v.renderMorphToDataURI,z=h||g.width,A=n||g.height,C=b||"png",
la.setCatchFinallyBlocks(6),G=m,la.yield(y(g,{width:z,height:A,type:C,ignoreMorphs:[]}),8);case 8:G.preview=la.yieldResult;la.leaveTryBlock(4);break;case 6:return F=la.enterCatchBlock(),console.error("Error generating morph preview: "+F),N=m,la.yield(y(ge.morph({fill:g.fill,width:z,height:A}),{width:z,height:A,type:C,ignoreMorphs:a}),9);case 9:N.preview=la.yieldResult;case 4:m.preview||(m.preview="");if(!c){la.jumpTo(10);break}la.setCatchFinallyBlocks(11);return la.yield(ge.loadMorphFromSnapshot(m,
{highlightBuggyMorphs:!0,rootObject:g}),13);case 13:L=la.yieldResult;if(!L||!L.isMorph)throw Error("reloading snapshot does not create a morph!");la.leaveTryBlock(10);break;case 11:throw W=la.enterCatchBlock(),Error("Error snapshotting morph: Cannot recreate morph from snapshot!\n"+W.stack);case 10:return la.return(m)}})}function Us(g,d){return ge.deserializeMorph(g,Object.assign({reinitializeIds:!0,ignoreClassNotFound:!1,onDeserializationStart:ge.loadPackagesAndModulesOfSnapshot,migrations:ge.migrations},
d))}function bU(g,d){var k,e,h,n,b,c,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:if(!g.isDirectory())return c=d,l=g.name(),a.yield(g.read(),9);k=d[g.name()]={};return a.yield(g.dirList(),4);case 4:e=a.yieldResult,h=$jscomp.makeIterator(e),n=h.next();case 5:if(n.done)return a.return(d);b=n.value;return a.yield(bU(b,k),6);case 6:n=h.next();a.jumpTo(5);break;case 9:return c[l]=a.yieldResult,a.return(d)}})}function cU(g,d){d=void 0===d?[]:d;var k=[];if(g.hasOwnProperty("package.json")){var e=
d.slice(1).reduceRight(function(n,b){return n.join(b)},ge.resource(d[0])).url;k.push({files:g,url:e,requiredPackages:g.requiredPackages})}for(var h in g)"object"===typeof g[h]&&k.push.apply(k,$jscomp.arrayFromIterable(cU(g[h],d.concat(h))));return k}function yL(g){var d=ge.findPackagesInFileSpec(g.packages),k={};g=g.packageDepMap;if(!g)return d;d=$jscomp.makeIterator(d);for(var e=d.next();!e.done;e=d.next())e=e.value,k[e.url]=e;return ge.arr.flatten(ge.graph.sortByReference(g)).map(function(h){return k[h]})}
function zC(g){var d,k,e,h,n,b,c,l,a,f,m,q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:if(!g.packagesToRegister){A.jumpTo(2);break}d=$jscomp.makeIterator(g.packagesToRegister);k=d.next();case 3:if(k.done){A.jumpTo(2);break}e=k.value;A.setCatchFinallyBlocks(6);return A.yield(ge.registerPackage(e),8);case 8:A.leaveTryBlock(4);break;case 6:A.enterCatchBlock(),console.error("Failed to register package "+e);case 4:k=d.next();A.jumpTo(3);break;case 2:if(!g.packages){A.jumpTo(9);
break}h=ge.packagesOfSnapshot(g);n=$jscomp.makeIterator(h);b=n.next();case 10:if(b.done){A.jumpTo(9);break}l=c=b.value;a=l.files;f=l.url;if(q=(m=ge.lookupPackage(f))&&m.pkg){r=q.version;u=JSON.parse(a["package.json"]);v=u.version;try{if(v&&r&&ge.semver.lte(v,r,!0)){console.log("[load morph] Package "+f+" is loaded in version "+r+(" which is newer than "+v+". Will NOT load older variant."));A.jumpTo(11);break}}catch(C){console.warn("Error in package version comparison: ",C)}}return A.yield(ge.createFiles(f,
a),13);case 13:return A.yield(ge.ensurePackage(f),14);case 14:return q=A.yieldResult,A.yield(q.reload({forgetEnv:!1,forgetDeps:!1}),15);case 15:return A.yield(System.import("lively.classes/object-classes.js"),16);case 16:y=A.yieldResult,z=y.default,ge.objectScriptingEnabled=!!z,ge.objectScriptingEnabled&&z.withId(q.name);case 11:b=n.next();A.jumpTo(10);break;case 9:return A.yield(Promise.all(ge.requiredModulesOfSnapshot(g).map(function(C){return(System.get(C)?null:System.import(C)).catch(function(G){return console.error("Error loading "+
C,G)})})),0)}})}function iG(g){var d,k,e,h,n,b,c,l,a,f,m,q,r,u,v,y,z,A,C,G,F,N,L,W,la,wa,D,Q,J,O,ja,X,ha,bb,pb,oa,ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qa){switch(qa.nextAddress){case 1:d={},k=g.snapshot,e=[],h={},n=!0,b={},c={},a=qa.forIn(k);case 2:if(null==(l=a.getNext())){qa.jumpTo(4);break}f=k[l]["lively.serializer-class-info"];if(!(f&&f.module&&f.module.package)){qa.jumpTo(5);break}m=ge.getPackage(f.module.package.name);if(!m.address.startsWith("local://")){qa.jumpTo(5);
break}return qa.yield(System.import("lively.classes/object-classes.js"),7);case 7:return q=qa.yieldResult,c.$jscomp$loop$prop$ObjectPackage$2542=q.default,qa.yield(System.import("lively.classes/util.js"),8);case 8:r=qa.yieldResult,u=r.withSuperclasses,ge.objectScriptingEnabled=!!c.$jscomp$loop$prop$ObjectPackage$2542,v=c.$jscomp$loop$prop$ObjectPackage$2542.forSystemPackage(m),y=v.objectModule.systemModule._recorder[f.className],z=u(y),z.forEach(function(Ga){return function(ua){(ua=Ga.$jscomp$loop$prop$ObjectPackage$2542.lookupPackageForClass(ua))&&
e.push(ua.systemPackage)}}(c));case 5:if(A=k[l].props.metadata)if(C=void 0,A.value&&A.value.__ref__?(G=k[A.value.id],G.props.externalPackages&&(C=G.props.externalPackages.value)):C=A.externalPackages,C)for(n=!0,F=0;F<C.length;F++)h[C[F]]=!0;c={$jscomp$loop$prop$ObjectPackage$2542:c.$jscomp$loop$prop$ObjectPackage$2542};qa.jumpTo(2);break;case 4:n&&(g.packagesToRegister=Object.keys(h)),N=[],L=$jscomp.makeIterator(e),W=L.next();case 9:if(W.done)return e=[].concat($jscomp.arrayFromIterable(N),$jscomp.arrayFromIterable(e)),
qa.yield(Promise.all(e.map(function(Ga){var ua,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){if(1==M.nextAddress)return ua=ge.resource(Ga.address).asDirectory(),M.yield(ge.resourceToJSON(ua,{}),2);H=M.yieldResult;d[ua.parent().url]||(d[ua.parent().url]={});Object.assign(d[ua.parent().url],H);b[Ga.url]||(b[Ga.url]=[]);M.jumpToEnd()})})),16);la=W.value;wa=$jscomp.makeIterator(la.modules());D=wa.next();case 12:if(D.done){W=L.next();qa.jumpTo(9);break}Q=D.value;if(Q.id.endsWith(".json")){qa.jumpTo(13);
break}J=$jscomp;O=J.makeIterator;return qa.yield(Q.imports(),15);case 15:for(ja=O.call(J,qa.yieldResult),X=ja.next();!X.done;X=ja.next())if(bb=ha=X.value,pb=bb.fromModule,oa=ge.module(pb).package())ba=oa.config,ba.lively&&ba.lively.isObjectPackage&&(N.push(oa),b[la.url]?ge.arr.pushIfNotIncluded(b[la.url],oa.url):b[la.url]=[oa.url]);case 13:D=wa.next();qa.jumpTo(12);break;case 16:return qa.return({packages:d,depMap:b})}})}function jG(){zL=!0;for(var g,d,k=AC.length;k;){d=AC;AC=[];for(g=-1;++g<k;)d[g]();
k=AC.length}zL=!1}function fA(g,d,k){var e=k[k.length-1];g===e.element&&(k.pop(),e=k[k.length-1]);k=e.element;e=e.index;Array.isArray(k)?k.push(g):e===d.length-2?(d=d.pop(),k[d]=g):d.push(g)}function Xi(){Xi.init.call(this)}function kG(g){if("function"!=typeof g)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof g);}function dU(g,d,k,e){var h,n,b;if(kG(k),void 0===(n=g._events)?(n=g._events=Object.create(null),g._eventsCount=0):(void 0!==n.newListener&&(g.emit("newListener",
d,k.listener?k.listener:k),n=g._events),b=n[d]),void 0===b)n[d]=k,++g._eventsCount;else if("function"==typeof b?b=n[d]=e?[k,b]:[b,k]:e?b.unshift(k):b.push(k),0<(h=void 0===g._maxListeners?Xi.defaultMaxListeners:g._maxListeners)&&b.length>h&&!b.warned)b.warned=!0,k=Error("Possible EventEmitter memory leak detected. "+b.length+" "+String(d)+" listeners added. Use emitter.setMaxListeners() to increase limit"),k.name="MaxListenersExceededWarning",k.emitter=g,k.type=d,k.count=b.length,console&&console.warn&&
console.warn(k);return g}function D6(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function eU(g,d,k){g={fired:!1,wrapFn:void 0,target:g,type:d,listener:k};d=D6.bind(g);return d.listener=k,g.wrapFn=d,d}function fU(g,d,k){g=g._events;if(void 0===g)return[];d=g[d];if(void 0===d)k=[];else if("function"==typeof d)k=k?[d.listener||d]:[d];else if(k)for(k=Array(d.length),
g=0;g<k.length;++g)k[g]=d[g].listener||d[g];else k=gU(d,d.length);return k}function hU(g){var d=this._events;if(void 0!==d){g=d[g];if("function"==typeof g)return 1;if(void 0!==g)return g.length}return 0}function gU(g,d){for(var k=Array(d),e=0;e<d;++e)k[e]=g[e];return k}function gA(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function fw(){this._store={}}function BC(g){this._store=new fw;if(g&&Array.isArray(g))for(var d=0,k=g.length;d<k;d++)this.add(g[d])}function ql(g){var d;if(!g||
"object"!==typeof g)return g;if(Array.isArray(g)){var k=[];var e=0;for(d=g.length;e<d;e++)k[e]=ql(g[e]);return k}if(g instanceof Date)return g.toISOString();if("undefined"!==typeof ArrayBuffer&&g instanceof ArrayBuffer||"undefined"!==typeof Blob&&g instanceof Blob)return g instanceof ArrayBuffer?"function"===typeof g.slice?g=g.slice(0):(e=new ArrayBuffer(g.byteLength),k=new Uint8Array(e),g=new Uint8Array(g),k.set(g),g=e):(e=g.size,k=g.type,g="function"===typeof g.slice?g.slice(0,e,k):g.webkitSlice(0,
e,k)),g;k=Object.getPrototypeOf(g);null===k?k=!0:(k=k.constructor,k="function"==typeof k&&k instanceof k&&iU.call(k)==E6);if(!k)return g;k={};for(e in g)Object.prototype.hasOwnProperty.call(g,e)&&(d=ql(g[e]),"undefined"!==typeof d&&(k[e]=d));return k}function jU(g){var d=!1;return hA(function(k){if(d)throw Error("once called more than once");d=!0;g.apply(this,k)})}function kU(g){return hA(function(d){d=ql(d);var k=this,e="function"===typeof d[d.length-1]?d.pop():!1,h=new Promise(function(n,b){var c;
try{var l=jU(function(a,f){a?b(a):n(f)});d.push(l);(c=g.apply(k,d))&&"function"===typeof c.then&&n(c)}catch(a){b(a)}});e&&h.then(function(n){e(null,n)},e);return h})}function F6(g,d,k){if(g.constructor.listeners("debug").length){for(var e=["api",g.name,d],h=0;h<k.length-1;h++)e.push(k[h]);g.constructor.emit("debug",e);var n=k[k.length-1];k[k.length-1]=function(b,c){var l=["api",g.name,d];l=l.concat(b?["error",b]:["success",c]);g.constructor.emit("debug",l);n(b,c)}}}function Rk(g,d){return kU(hA(function(k){if(this._closed)return Promise.reject(Error("database is closed"));
if(this._destroyed)return Promise.reject(Error("database is destroyed"));var e=this;F6(e,g,k);return this.taskqueue.isReady?d.apply(this,k):new Promise(function(h,n){e.taskqueue.addTask(function(b){b?n(b):h(e[g].apply(e,k))})})}))}function CC(g,d){for(var k={},e=0,h=d.length;e<h;e++){var n=d[e];n in g&&(k[n]=g[n])}return k}function lU(g){return g}function G6(g){return[{ok:g}]}function mU(g,d,k){function e(){var r=[];f.forEach(function(u){u.docs.forEach(function(v){r.push({id:u.id,docs:[v]})})});k(null,
{results:r})}function h(){if(!(q>=m.length)){var r=m.slice(q,Math.min(q+6,m.length));n(r,q);q+=r.length}}function n(r,u){r.forEach(function(v,y){var z=u+y;y=c.get(v);var A=CC(y[0],["atts_since","attachments"]);A.open_revs=y.map(function(G){return G.rev});A.open_revs=A.open_revs.filter(lU);var C=lU;0===A.open_revs.length&&(delete A.open_revs,C=G6);["revs","attachments","binary","ajax","latest"].forEach(function(G){G in d&&(A[G]=d[G])});g.get(v,A,function(G,F){G=G?[{error:G}]:C(F);f[z]={id:v,docs:G};
++a===l&&e();h()})})}var b=d.docs,c=new ap;b.forEach(function(r){c.has(r.id)?c.get(r.id).push(r):c.set(r.id,[r])});var l=c.size,a=0,f=Array(l),m=[];c.forEach(function(r,u){m.push(u)});var q=0;h()}function H6(g){DC&&addEventListener("storage",function(d){g.emit(d.key)})}function iA(){jo.EventEmitter.call(this);this._listeners={};H6(this)}function Wp(g){if("undefined"!==typeof console&&"function"===typeof console[g]){var d=Array.prototype.slice.call(arguments,1);console[g].apply(console,d)}}function I6(g){var d=
0;g||(d=2E3);g=parseInt(g,10)||0;d=parseInt(d,10);d=d!==d||d<=g?(g||1)<<1:d+1;6E5<d&&(g=3E5,d=6E5);return~~((d-g)*Math.random()+g)}function AL(g,d){Wp("info","The above "+g+" is totally normal. "+d)}function lj(g,d,k){Error.call(this,k);this.status=g;this.name=d;this.message=k;this.error=!0}function vh(g,d){function k(e){for(var h in g)"function"!==typeof g[h]&&(this[h]=g[h]);void 0!==e&&(this.reason=e)}k.prototype=lj.prototype;return new k(d)}function jA(g){if("object"!==typeof g){var d=g;g=nU;g.data=
d}"error"in g&&"conflict"===g.error&&(g.name="conflict",g.status=409);"name"in g||(g.name=g.error||"unknown");"status"in g||(g.status=500);"message"in g||(g.message=g.message||g.reason);return g}function BL(g){var d={},k=g.filter&&"function"===typeof g.filter;d.query=g.query_params;return function(e){e.doc||(e.doc={});var h;if(h=k)try{h=!(0,g.filter)(e.doc,d)}catch(b){h=vh(lG,"Filter function threw: "+b.toString())}if("object"===typeof h)return h;if(h)return!1;if(!g.include_docs)delete e.doc;else if(!g.attachments)for(var n in e.doc._attachments)e.doc._attachments.hasOwnProperty(n)&&
(e.doc._attachments[n].stub=!0);return!0}}function mG(g){for(var d=[],k=0,e=g.length;k<e;k++)d=d.concat(g[k]);return d}function oU(g){var d;g?"string"!==typeof g?d=vh(pU):/^_/.test(g)&&!/^_(design|local)/.test(g)&&(d=vh(J6)):d=vh(K6);if(d)throw d;}function Vs(g){return"boolean"===typeof g._remote?g._remote:"function"===typeof g.type?(Wp("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===g.type()):!1}function CL(g){if(!g)return null;var d=g.split("/");return 2===
d.length?d:1===d.length?[g,g]:null}function qU(g){return(g=CL(g))?g.join("/"):null}function rU(g){g=L6.exec(g);for(var d={},k=14;k--;){var e=sU[k],h=g[k]||"",n=-1!==["user","password"].indexOf(e);d[e]=n?decodeURIComponent(h):h}d.queryKey={};d[sU[12]].replace(M6,function(b,c,l){c&&(d.queryKey[c]=l)});return d}function DL(g,d){var k=[],e=[],h;for(h in d)d.hasOwnProperty(h)&&(k.push(h),e.push(d[h]));k.push(g);return Function.apply(null,k).apply(null,e)}function nG(g,d,k){return new Promise(function(e,
h){g.get(d,function(n,b){if(n){if(404!==n.status)return h(n);b={}}n=b._rev;b=k(b);if(!b)return e({updated:!1,rev:n});b._id=d;b._rev=n;e(N6(g,b,k))})})}function N6(g,d,k){return g.put(d).then(function(e){return{updated:!0,rev:e.rev}},function(e){if(409!==e.status)throw e;return nG(g,d._id,k)})}function EL(g,d){g=g||[];d=d||{};try{return new Blob(g,d)}catch(h){if("TypeError"!==h.name)throw h;for(var k=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:
"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),e=0;e<g.length;e+=1)k.append(g[e]);return k.getBlob(d.type)}}function FL(g,d){for(var k=g.length,e=new ArrayBuffer(k),h=new Uint8Array(e),n=0;n<k;n++)h[n]=g.charCodeAt(n);return EL([e],{type:d})}function GL(g,d){return FL(atob(g),d)}function tU(g,d){var k=new FileReader,e="function"===typeof k.readAsBinaryString;k.onloadend=function(h){var n=h.target.result||"";if(e)return d(n);h="";n=new Uint8Array(n);for(var b=n.byteLength,c=
0;c<b;c++)h+=String.fromCharCode(n[c]);d(h)};e?k.readAsBinaryString(g):k.readAsArrayBuffer(g)}function uU(g,d){tU(g,function(k){d(k)})}function HL(g,d){uU(g,function(k){d(btoa(k))})}function O6(g,d){var k=new FileReader;k.onloadend=function(e){e=e.target.result||new ArrayBuffer(0);d(e)};k.readAsArrayBuffer(g)}function P6(g,d,k){return g.webkitSlice?g.webkitSlice(d,k):g.slice(d,k)}function Q6(g,d,k,e,h){if(0<k||e<d.size)d=P6(d,k,e);O6(d,function(n){g.append(n);h()})}function R6(g,d,k,e,h){if(0<k||
e<d.length)d=d.substring(k,e);g.appendBinary(d);h()}function IL(g,d){function k(){S6(h)}function e(){var q=f.end(!0);q=btoa(q);d(q);f.destroy()}function h(){var q=a*c,r=q+c;a++;a<l?m(f,g,q,r,k):m(f,g,q,r,e)}var n="string"===typeof g,b=n?g.length:g.size,c=Math.min(32768,b),l=Math.ceil(b/c),a=0,f=n?new oG:new oG.ArrayBuffer,m=n?R6:Q6;h()}function vU(g,d){g=ql(g);if(!d)return wU.v4().replace(/-/g,"").toLowerCase();delete g._rev_tree;return oG.hash(JSON.stringify(g))}function ay(g){g=g.rev_tree.slice();
for(var d;d=g.pop();){var k=d.ids,e=k[2];d=d.pos;if(e.length){k=0;for(var h=e.length;k<h;k++)g.push({pos:d+1,ids:e[k]})}else if(e=!!k[1].deleted,k=k[0],!n||(c!==e?c:b!==d?b<d:n<k)){var n=k;var b=d;var c=e}}return b+"-"+n}function by(g,d){g=g.slice();for(var k;k=g.pop();){var e=k.pos,h=k.ids,n=h[2];k=d(0===n.length,e,h[0],k.ctx,h[1]);h=0;for(var b=n.length;h<b;h++)g.push({pos:e+1,ids:n[h],ctx:k})}}function T6(g,d){return g.pos-d.pos}function JL(g){var d=[];by(g,function(e,h,n,b,c){e&&d.push({rev:h+
"-"+n,pos:h,opts:c})});d.sort(T6).reverse();g=0;for(var k=d.length;g<k;g++)delete d[g].pos;return d}function KL(g){var d=ay(g);g=JL(g.rev_tree);for(var k=[],e=0,h=g.length;e<h;e++){var n=g[e];n.rev===d||n.opts.deleted||k.push(n.rev)}return k}function U6(g){var d=[];by(g.rev_tree,function(k,e,h,n,b){"available"!==b.status||k||(d.push(e+"-"+h),b.status="missing")});return d}function xU(g){var d=[];g=g.slice();for(var k;k=g.pop();){var e=k.pos,h=k.ids,n=h[0],b=h[1];h=h[2];var c=0===h.length;k=k.history?
k.history.slice():[];k.push({id:n,opts:b});c&&d.push({pos:e+1-k.length,ids:k});n=0;for(b=h.length;n<b;n++)g.push({pos:e+1,ids:h[n],history:k})}return d.reverse()}function V6(g,d){return g.pos-d.pos}function yU(g,d){for(var k,e,h=g.length;d<h;d++){var n=g[d];n=[n.id,n.opts,[]];e?(e[2].push(n),e=n):k=e=n}return k}function W6(g,d){return g[0]<d[0]?-1:1}function zU(g,d){d=[{tree1:g,tree2:d}];for(var k=!1;0<d.length;){var e=d.pop(),h=e.tree1;e=e.tree2;if(h[1].status||e[1].status)h[1].status="available"===
h[1].status||"available"===e[1].status?"available":"missing";for(var n=0;n<e[2].length;n++)if(h[2][0]){for(var b=!1,c=0;c<h[2].length;c++)h[2][c][0]===e[2][n][0]&&(d.push({tree1:h[2][c],tree2:e[2][n]}),b=!0);if(!b){k="new_branch";b=h[2];c=e[2][n];for(var l,a=b,f=c,m=W6,q=0,r=a.length;q<r;)l=q+r>>>1,0>m(a[l],f)?q=l+1:r=l;b.splice(q,0,c)}}else k="new_leaf",h[2][0]=e[2][n]}return{conflicts:k,tree:g}}function AU(g,d,k){var e=[],h=!1,n=!1;if(!g.length)return{tree:[d],conflicts:"new_leaf"};for(var b=0,
c=g.length;b<c;b++){var l=g[b];if(l.pos===d.pos&&l.ids[0]===d.ids[0])n=zU(l.ids,d.ids),e.push({pos:l.pos,ids:n.tree}),h=h||n.conflicts,n=!0;else if(!0!==k){var a=l.pos<d.pos?l:d,f=l.pos<d.pos?d:l,m=[],q=[];for(q.push({ids:a.ids,diff:f.pos-a.pos,parent:null,parentIdx:null});0<q.length;){var r=q.pop();if(0===r.diff)r.ids[0]===f.ids[0]&&m.push(r);else for(var u=r.ids[2],v=0,y=u.length;v<y;v++)q.push({ids:u[v],diff:r.diff-1,parent:r.ids,parentIdx:v})}(m=m[0])?(n=zU(m.ids,f.ids),m.parent[2][m.parentIdx]=
n.tree,e.push({pos:a.pos,ids:a.ids}),h=h||n.conflicts,n=!0):e.push(l)}else e.push(l)}n||e.push(d);e.sort(V6);return{tree:e,conflicts:h||"internal_node"}}function X6(g,d){g=xU(g);for(var k,e,h=0,n=g.length;h<n;h++){var b=g[h],c=b.ids;if(c.length>d){k||(k={});var l=c.length-d;var a={pos:b.pos+l,ids:yU(c,l)};for(var f=0;f<l;f++)k[b.pos+f+"-"+c[f].id]=!0}else a={pos:b.pos,ids:yU(c,0)};e=e?AU(e,a,!0).tree:[a]}k&&by(e,function(m,q,r){delete k[q+"-"+r]});return{tree:e,revs:k?Object.keys(k):[]}}function BU(g,
d,k){g=AU(g,d);k=X6(g.tree,k);return{tree:k.tree,stemmedRevs:k.revs,conflicts:g.conflicts}}function Y6(g){return g.ids}function Hu(g,d){d||(d=ay(g));d=d.substring(d.indexOf("-")+1);g=g.rev_tree.map(Y6);for(var k;k=g.pop();){if(k[0]===d)return!!k[1].deleted;g=g.concat(k[2])}}function cy(g){return/^_local/.test(g)}function Z6(g,d){for(var k=d.rev_tree.slice(),e;e=k.pop();){var h=e.pos,n=e.ids,b=n[0],c=n[1];n=n[2];var l=0===n.length;e=e.history?e.history.slice():[];e.push({id:b,pos:h,opts:c});if(l)for(c=
0,l=e.length;c<l;c++){var a=e[c];if(a.pos+"-"+a.id===g)return h+"-"+b}b=0;for(c=n.length;b<c;b++)k.push({pos:h+1,ids:n[b],history:e})}throw Error("Unable to resolve latest revision for id "+d.id+", rev "+g);}function EC(g,d,k){function e(){h.cancel()}jo.EventEmitter.call(this);var h=this;this.db=g;d=d?ql(d):{};var n=d.complete=jU(function(c,l){c?(l=h,0<("listenerCount"in l?l.listenerCount("error"):jo.EventEmitter.listenerCount(l,"error"))&&h.emit("error",c)):h.emit("complete",l);h.removeAllListeners();
g.removeListener("destroyed",e)});k&&(h.on("complete",function(c){k(null,c)}),h.on("error",k));g.once("destroyed",e);d.onChange=function(c,l,a){if(!h.isCancelled)try{h.emit("change",c,l,a)}catch(f){Wp("error",'Error in .on("change", function):',f)}};var b=new Promise(function(c,l){d.complete=function(a,f){a?l(a):c(f)}});h.once("cancel",function(){g.removeListener("destroyed",e);d.complete(null,{status:"cancelled"})});this.then=b.then.bind(b);this["catch"]=b["catch"].bind(b);this.then(function(c){n(null,
c)},n);g.taskqueue.isReady?h.validateChanges(d):g.taskqueue.addTask(function(c){c?d.complete(c):h.isCancelled?h.emit("cancel"):h.validateChanges(d)})}function $6(g,d,k){var e=[{rev:g._rev}];"all_docs"===k.style&&(e=JL(d.rev_tree).map(function(h){return{rev:h.rev}}));e={id:d.id,changes:e,doc:g};Hu(d,g._rev)&&(e.deleted=!0);k.conflicts&&(e.doc._conflicts=KL(d),e.doc._conflicts.length||delete e.doc._conflicts);return e}function LL(g,d){return function(k,e){k||e[0]&&e[0].error?(k=k||e[0],k.docId=d,g(k)):
g(null,e.length?e[0]:e)}}function a7(g){for(var d=0;d<g.length;d++){var k=g[d];if(k._deleted)delete k._attachments;else if(k._attachments)for(var e=Object.keys(k._attachments),h=0;h<e.length;h++){var n=e[h];k._attachments[n]=CC(k._attachments[n],"data digest content_type length revpos stub".split(" "))}}}function b7(g,d){var k=g._id;var e=d._id;k=k<e?-1:k>e?1:0;if(0!==k)return k;g=g._revisions?g._revisions.start:0;d=d._revisions?d._revisions.start:0;return g<d?-1:g>d?1:0}function c7(g){var d={},k=
[];by(g,function(e,h,n,b){h=h+"-"+n;e&&(d[h]=0);void 0!==b&&k.push({from:b,to:h});return h});k.reverse();k.forEach(function(e){d[e.from]=void 0===d[e.from]?1+d[e.to]:Math.min(d[e.from],1+d[e.to])});return d}function d7(g){var d="limit"in g?g.keys.slice(g.skip,g.limit+g.skip):0<g.skip?g.keys.slice(g.skip):g.keys;g.keys=d;g.skip=0;delete g.limit;g.descending&&(d.reverse(),g.descending=!1)}function CU(g){var d=g._compactionQueue[0],k=d.opts,e=d.callback;g.get("_local/compaction").catch(function(){return!1}).then(function(h){h&&
h.last_seq&&(k.last_seq=h.last_seq);g._compact(k,function(n,b){n?e(n):e(null,b);Ws(function(){g._compactionQueue.shift();g._compactionQueue.length&&CU(g)})})})}function Dj(){jo.EventEmitter.call(this);for(var g in Dj.prototype)"function"===typeof this[g]&&(this[g]=this[g].bind(this))}function FC(){this.failed=this.isReady=!1;this.queue=[]}function e7(g,d){var k=g.match(/([a-z-]*):\/\/(.*)/);if(k)return{name:/https?/.test(k[1])?k[1]+"://"+k[2]:k[2],adapter:k[1]};var e=rh.adapters,h=rh.preferredAdapters;
k=rh.prefix;d=d.adapter;if(!d)for(var n=0;n<h.length;++n)if(d=h[n],"idb"===d&&"websql"in e&&DC&&localStorage["_pouch__websqldb_"+k+g])Wp("log",'PouchDB is downgrading "'+g+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');else break;e=e[d];return{name:(e&&"use_prefix"in e?e.use_prefix:1)?k+g:g,adapter:d}}function f7(g){function d(e){g.removeListener("closed",k);e||g.constructor.emit("destroyed",g.name)}function k(){g.removeListener("destroyed",d);g.constructor.emit("unref",
g)}g.once("destroyed",d);g.once("closed",k);g.constructor.emit("ref",g)}function rh(g,d){if(!(this instanceof rh))return new rh(g,d);var k=this;d=d||{};g&&"object"===typeof g&&(d=g,g=d.name,delete d.name);void 0===d.deterministic_revs&&(d.deterministic_revs=!0);this.__opts=d=ql(d);k.auto_compaction=d.auto_compaction;k.prefix=rh.prefix;if("string"!==typeof g)throw Error("Missing/invalid DB name");var e=e7((d.prefix||"")+g,d);d.name=e.name;d.adapter=d.adapter||e.adapter;k.name=g;k._adapter=d.adapter;
rh.emit("debug",["adapter","Picked adapter: ",d.adapter]);if(!rh.adapters[d.adapter]||!rh.adapters[d.adapter].valid())throw Error("Invalid Adapter: "+d.adapter);Dj.call(k);k.taskqueue=new FC;k.adapter=d.adapter;rh.adapters[d.adapter].call(k,d,function(h){if(h)return k.taskqueue.fail(h);f7(k);k.emit("created",k);rh.emit("created",k.name);k.taskqueue.ready(k)})}function DU(g,d){for(var k=0,e=d.length;k<e&&(g=g[d[k]],g);k++);return g}function EU(g){for(var d=[],k="",e=0,h=g.length;e<h;e++){var n=g[e];
"."===n?0<e&&"\\"===g[e-1]?k=k.substring(0,k.length-1)+".":(d.push(k),k=""):k+=n}d.push(k);return d}function g7(g){return g[Object.keys(g)[0]]}function GC(g){var d={};g.forEach(function(k){Object.keys(k).forEach(function(e){var h=k[e];"object"!==typeof h&&(h={$eq:h});if(-1<FU.indexOf(e))d[e]=h instanceof Array?h.map(function(b){return GC([b])}):GC([h]);else{var n=d[e]=d[e]||{};Object.keys(h).forEach(function(b){var c=h[b];"$gt"===b||"$gte"===b?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$gte?
"$gte"===b?c>n.$gte&&(n.$gte=c):c>=n.$gte&&(delete n.$gte,n.$gt=c):"undefined"!==typeof n.$gt?"$gte"===b?c>n.$gt&&(delete n.$gt,n.$gte=c):c>n.$gt&&(n.$gt=c):n[b]=c):"$lt"===b||"$lte"===b?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$lte?"$lte"===b?c<n.$lte&&(n.$lte=c):c<=n.$lte&&(delete n.$lte,n.$lt=c):"undefined"!==typeof n.$lt?"$lte"===b?c<n.$lt&&(delete n.$lt,n.$lte=c):c<n.$lt&&(n.$lt=c):n[b]=c):"$ne"===b?"$ne"in n?n.$ne.push(c):n.$ne=[c]:"$eq"===b?(delete n.$gt,delete n.$gte,delete n.$lt,
delete n.$lte,delete n.$ne,n.$eq=c):n[b]=c})}})});return d}function GU(g){for(var d in g){if(Array.isArray(g))for(var k in g)g[k].$and&&(g[k]=GC(g[k].$and));var e=g[d];"object"===typeof e&&GU(e)}return g}function HU(g,d){for(var k in g){"$and"===k&&(d=!0);var e=g[k];"object"===typeof e&&(d=HU(e,d))}return d}function h7(g){var d=ql(g);g=!1;HU(d,!1)&&(d=GU(d),"$and"in d&&(d=GC(d.$and)),g=!0);["$or","$nor"].forEach(function(b){b in d&&d[b].forEach(function(c){for(var l=Object.keys(c),a=0;a<l.length;a++){var f=
l[a],m=c[f];if("object"!==typeof m||null===m)c[f]={$eq:m}}})});"$not"in d&&(d.$not=GC([d.$not]));for(var k=Object.keys(d),e=0;e<k.length;e++){var h=k[e],n=d[h];"object"!==typeof n||null===n?n={$eq:n}:"$ne"in n&&!g&&(n.$ne=[n.$ne]);d[h]=n}return d}function Pl(g,d){if(g===d)return 0;g=dy(g);d=dy(d);var k=ML(g),e=ML(d);if(0!==k-e)return k-e;switch(typeof g){case "number":return g-d;case "boolean":return g<d?-1:1;case "string":return g===d?0:g>d?1:-1}if(Array.isArray(g))a:{k=Math.min(g.length,d.length);
for(e=0;e<k;e++){var h=Pl(g[e],d[e]);if(0!==h){g=h;break a}}g=g.length===d.length?0:g.length>d.length?1:-1}else a:{k=Object.keys(g);e=Object.keys(d);h=Math.min(k.length,e.length);for(var n=0;n<h;n++){var b=Pl(k[n],e[n]);if(0!==b){g=b;break a}b=Pl(g[k[n]],d[e[n]]);if(0!==b){g=b;break a}}g=k.length===e.length?0:k.length>e.length?1:-1}return g}function dy(g){switch(typeof g){case "undefined":return null;case "number":if(Infinity===g||-Infinity===g||isNaN(g))return null;break;case "object":var d=g;if(Array.isArray(g)){var k=
g.length;g=Array(k);for(var e=0;e<k;e++)g[e]=dy(d[e])}else{if(g instanceof Date)return g.toJSON();if(null!==g)for(k in g={},d)d.hasOwnProperty(k)&&(e=d[k],"undefined"!==typeof e&&(g[k]=dy(e)))}}return g}function i7(g){if(null!==g)switch(typeof g){case "boolean":return g?1:0;case "number":if(0===g)g="1";else{var d=g.toExponential().split(/e\+?/),k=parseInt(d[1],10);g=0>g;k=((g?-k:k)- -324).toString();for(var e="",h=3-k.length;e.length<h;)e+="0";k=(g?"0":"2")+(""+(e+k));d=Math.abs(parseFloat(d[0]));
g&&(d=10-d);g=d.toFixed(20);g=g.replace(/\.?0+$/,"");g=k+=""+g}return g;case "string":return g.replace(/\u0002/g,"\u0002\u0002").replace(/\u0001/g,"\u0001\u0002").replace(/\u0000/g,"\u0001\u0001");case "object":var n=Array.isArray(g);d=n?g:Object.keys(g);k=-1;e=d.length;h="";if(n)for(;++k<e;)h+=xr(d[k]);else for(;++k<e;)n=d[k],h+=xr(n)+xr(g[n]);return h}return""}function xr(g){g=dy(g);return ML(g)+""+i7(g)+"\x00"}function ML(g){var d=["boolean","number","string","object"].indexOf(typeof g);if(~d)return null===
g?1:Array.isArray(g)?5:3>d?d+2:d+3;if(Array.isArray(g))return 5}function j7(g){function d(k){return g.map(function(e){e=Object.keys(e)[0];e=EU(e);return DU(k,e)})}return function(k,e){var h=d(k.doc),n=d(e.doc);h=Pl(h,n);if(0!==h)return h;k=k.doc._id;e=e.doc._id;return k<e?-1:k>e?1:0}}function k7(g,d,k){g=g.filter(function(h){return kA(h.doc,d.selector,k)});if(d.sort){var e=j7(d.sort);g=g.sort(e);"string"!==typeof d.sort[0]&&"desc"===g7(d.sort[0])&&(g=g.reverse())}if("limit"in d||"skip"in d)e=d.skip||
0,g=g.slice(e,("limit"in d?d.limit:g.length)+e);return g}function kA(g,d,k){return k.every(function(e){var h=d[e],n=EU(e),b=DU(g,n);return-1<FU.indexOf(e)?l7(e,h,g):NL(h,g,n,b)})}function NL(g,d,k,e){return g?"object"===typeof g?Object.keys(g).every(function(h){var n=g[h];if(!IU[h])throw Error('unknown operator "'+h+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return IU[h](d,n,k,e)}):g===e:!0}function l7(g,d,
k){return"$or"===g?d.some(function(e){return kA(k,e,Object.keys(e))}):"$not"===g?!kA(k,d,Object.keys(d)):!d.find(function(e){return kA(k,e,Object.keys(e))})}function HC(g){return"undefined"!==typeof g&&null!==g}function ey(g){return"undefined"!==typeof g}function JU(g,d){return d.some(function(k){return g instanceof Array?-1<g.indexOf(k):g===k})}function m7(g,d){return d.every(function(k){return-1<g.indexOf(k)})}function n7(g,d){switch(d){case "null":return null===g;case "boolean":return"boolean"===
typeof g;case "number":return"number"===typeof g;case "string":return"string"===typeof g;case "array":return g instanceof Array;case "object":return"[object Object]"==={}.toString.call(g)}throw Error(d+" not supported as a type.Please use one of object, string, array, number, boolean or null.");}function o7(g,d){if(g.selector&&g.filter&&"_selector"!==g.filter)return d(Error('selector invalid for filter "'+("string"===typeof g.filter?g.filter:"function")+'"'));d()}function p7(g){g.view&&!g.filter&&
(g.filter="_view");g.selector&&!g.filter&&(g.filter="_selector");g.filter&&"string"===typeof g.filter&&("_view"===g.filter?g.view=qU(g.view):g.filter=qU(g.filter))}function q7(g,d){return d.filter&&"string"===typeof d.filter&&!d.doc_ids&&!Vs(g.db)}function r7(g,d){var k=d.complete;if("_view"===d.filter){if(!d.view||"string"!==typeof d.view){var e=vh(lG,"`view` filter parameter not found or invalid.");return k(e)}var h=CL(d.view);g.db.get("_design/"+h[0],function(b,c){if(g.isCancelled)return k(null,
{status:"cancelled"});if(b)return k(jA(b));b=c&&c.views&&c.views[h[1]]&&c.views[h[1]].map;if(!b)return k(vh(yr,c.views?"missing json key: "+h[1]:"missing json key: views"));c=['return function(doc) {\n  "use strict";\n  var emitted = false;\n  var emit = function (a, b) {\n    emitted = true;\n  };',"  var view = "+b+";","  view(doc);\n  if (emitted) {\n    return true;\n  }\n};"].join("\n");c=DL(c,{});d.filter=c;g.doChanges(d)})}else if(d.selector)d.filter=function(b){var c=d.selector;if("object"!==
typeof c)throw Error("Selector error: expected a JSON object");c=h7(c);return(b=k7([{doc:b}],{selector:c},Object.keys(c)))&&1===b.length},g.doChanges(d);else{var n=CL(d.filter);g.db.get("_design/"+n[0],function(b,c){if(g.isCancelled)return k(null,{status:"cancelled"});if(b)return k(jA(b));b=c&&c.filters&&c.filters[n[1]];if(!b)return k(vh(yr,c&&c.filters?"missing json key: "+n[1]:"missing json key: filters"));d.filter=DL('"use strict";\nreturn '+b+";",{});g.doChanges(d)})}}function KU(g){return g.reduce(function(d,
k){d[k]=!0;return d},{})}function LU(g){if(!/^\d+-/.test(g))return vh(MU);var d=g.indexOf("-"),k=g.substring(0,d);g=g.substring(d+1);return{prefix:parseInt(k,10),id:g}}function NU(g,d,k){k||(k={deterministic_revs:!0});var e={status:"available"};g._deleted&&(e.deleted=!0);if(d){g._id||(g._id=pG());var h=vU(g,k.deterministic_revs);if(g._rev){d=LU(g._rev);if(d.error)return d;g._rev_tree=[{pos:d.prefix,ids:[d.id,{status:"missing"},[[h,e,[]]]]}];var n=d.prefix+1}else g._rev_tree=[{pos:1,ids:[h,e,[]]}],
n=1}else{if(g._revisions){h=g._revisions;n=h.start-h.ids.length+1;h=h.ids;d=[h[0],e,[]];k=1;for(var b=h.length;k<b;k++)d=[h[k],{status:"missing"},[d]];g._rev_tree=[{pos:n,ids:d}];n=g._revisions.start;h=g._revisions.ids[0]}if(!g._rev_tree){d=LU(g._rev);if(d.error)return d;n=d.prefix;h=d.id;g._rev_tree=[{pos:n,ids:[h,e,[]]}]}}oU(g._id);g._rev=n+"-"+h;e={metadata:{},data:{}};for(var c in g)if(Object.prototype.hasOwnProperty.call(g,c)){if((n="_"===c[0])&&!s7[c])throw g=vh(OU,c),g.message=OU.message+": "+
c,g;n&&!t7[c]?e.metadata[c.slice(1)]=g[c]:e.data[c]=g[c]}return e}function u7(g,d,k){try{var e=atob(g.data)}catch(h){e={error:vh(PU,"Attachment is not a valid base64 string")}}if(e.error)return k(e.error);g.length=e.length;g.data="blob"===d?FL(e,g.content_type):"base64"===d?btoa(e):e;IL(e,function(h){g.digest="md5-"+h;k()})}function v7(g,d,k){IL(g.data,function(e){g.digest="md5-"+e;g.length=g.data.size||g.data.length||0;"binary"===d?uU(g.data,function(h){g.data=h;k()}):"base64"===d?HL(g.data,function(h){g.data=
h;k()}):k()})}function w7(g,d,k){if(g.stub)return k();"string"===typeof g.data?u7(g,d,k):v7(g,d,k)}function x7(g,d,k){function e(){h++;g.length===h&&(n?k(n):k())}if(!g.length)return k();var h=0,n;g.forEach(function(b){function c(m){n=m;a++;a===l.length&&e()}var l=b.data&&b.data._attachments?Object.keys(b.data._attachments):[],a=0;if(!l.length)return e();for(var f in b.data._attachments)b.data._attachments.hasOwnProperty(f)&&w7(b.data._attachments[f],d,c)})}function y7(g,d,k,e,h,n,b,c,l){g=g||1E3;
var a=c.new_edits,f=new ap,m=0,q=d.length;d.forEach(function(r,u){if(r._id&&cy(r._id))k[r._deleted?"_removeLocal":"_putLocal"](r,{ctx:h},function(y,z){n[u]=y||z;++m===q&&l&&l()});else{var v=r.metadata.id;f.has(v)?(q--,f.get(v).push([r,u])):f.set(v,[[r,u]])}});f.forEach(function(r,u){function v(){++z<r.length?y():++m===q&&l&&l()}function y(){var A=r[z],C=A[0];A=A[1];if(e.has(u)){var G=g,F=e.get(u);b:{var N=C.metadata.rev;var L=F.rev_tree.slice();var W=N.split("-");N=parseInt(W[0],10);W=W[1];for(var la;la=
L.pop();){if(la.pos===N&&la.ids[0]===W){L=!0;break b}for(var wa=la.ids[2],D=0,Q=wa.length;D<Q;D++)L.push({pos:la.pos+1,ids:wa[D]})}L=!1}L&&!a?(n[A]=C,v()):(W=F.winningRev||ay(F),L="deleted"in F?F.deleted:Hu(F,W),N="deleted"in C.metadata?C.metadata.deleted:Hu(C.metadata),la=/^1-/.test(C.metadata.rev),L&&!N&&a&&la&&(la=C.data,la._rev=W,la._id=C.metadata.id,C=NU(la,a)),W=BU(F.rev_tree,C.metadata.rev_tree[0],G),a&&(L&&N&&"new_leaf"!==W.conflicts||!L&&"new_leaf"!==W.conflicts||L&&!N&&"new_branch"===W.conflicts)?
(C=vh(lA),n[A]=C,v()):(G=C.metadata.rev,C.metadata.rev_tree=W.tree,C.stemmedRevs=W.stemmedRevs||[],F.rev_map&&(C.metadata.rev_map=F.rev_map),F=ay(C.metadata),N=Hu(C.metadata,F),L=L===N?0:L<N?-1:1,G=G===F?N:Hu(C.metadata,G),b(C,F,N,G,!0,L,A,v)))}else F=BU([],C.metadata.rev_tree[0],g),C.metadata.rev_tree=F.tree,C.stemmedRevs=F.stemmedRevs||[],F=ay(C.metadata),G=Hu(C.metadata,F),"was_delete"in c&&G?(n[A]=vh(yr,"deleted"),v()):a&&"missing"===C.metadata.rev_tree[0].ids[1].status?(C=vh(lA),n[A]=C,v()):
b(C,F,G,G,!1,G?0:1,A,v)}var z=0;y()})}function Xs(g){return function(d){var k="unknown_error";d.target&&d.target.error&&(k=d.target.error.name||d.target.error.message);g(vh(OL,k,d.type))}}function PL(g,d,k){try{var e=JSON.stringify(g)}catch(h){e=QU.stringify(g)}return{data:e,winningRev:d,deletedOrLocal:k?"1":"0",seq:g.seq,id:g.id}}function fy(g){if(!g)return null;var d=g.data;try{var k=JSON.parse(d)}catch(e){k=QU.parse(d)}k.winningRev=g.winningRev;k.deleted="1"===g.deletedOrLocal;k.seq=g.seq;return k}
function qG(g){if(!g)return g;var d=g._doc_id_rev.lastIndexOf(":");g._id=g._doc_id_rev.substring(0,d-1);g._rev=g._doc_id_rev.substring(d+1);delete g._doc_id_rev;return g}function RU(g,d,k,e){k?g?"string"!==typeof g?e(g):e(GL(g,d)):e(EL([""],{type:d})):g?"string"!==typeof g?tU(g,function(h){e(btoa(h))}):e(g):e("")}function SU(g,d,k,e){function h(c,l){var a=c._attachments[l];c=a.digest;k.objectStore("attach-store").get(c).onsuccess=function(f){a.body=f.target.result.body;++b===n.length&&e&&e()}}var n=
Object.keys(g._attachments||{});if(!n.length)return e&&e();var b=0;n.forEach(function(c){d.attachments&&d.include_docs?h(g,c):(g._attachments[c].stub=!0,++b===n.length&&e&&e())})}function QL(g,d){return Promise.all(g.map(function(k){if(k.doc&&k.doc._attachments){var e=Object.keys(k.doc._attachments);return Promise.all(e.map(function(h){var n=k.doc._attachments[h];if("body"in n){var b=n.body,c=n.content_type;return new Promise(function(l){RU(b,c,d,function(a){k.doc._attachments[h]=mA(CC(n,["digest",
"content_type"]),{data:a});l()})})}}))}}))}function TU(g,d,k){function e(){h.length&&h.forEach(function(a){c.index("digestSeq").count(IDBKeyRange.bound(a+"::",a+"::\uffff",!1,!1)).onsuccess=function(f){f.target.result||b.delete(a)}})}var h=[],n=k.objectStore("by-sequence"),b=k.objectStore("attach-store"),c=k.objectStore("attach-seq-store"),l=g.length;g.forEach(function(a){n.index("_doc_id_rev").getKey(d+"::"+a).onsuccess=function(f){f=f.target.result;"number"!==typeof f?(l--,l||e()):(n.delete(f),
c.index("seq").openCursor(IDBKeyRange.only(f)).onsuccess=function(m){if(m=m.target.result){var q=m.value.digestSeq.split("::")[0];h.push(q);c.delete(m.primaryKey);m.continue()}else l--,l||e()})}})}function zr(g,d,k){try{return{txn:g.transaction(d,k)}}catch(e){return{error:e}}}function z7(g,d,k,e,h,n){function b(){var pb=zr(h,"document-store by-sequence attach-store local-store attach-seq-store meta-store".split(" "),"readwrite");if(pb.error)return n(pb.error);G=pb.txn;G.onabort=Xs(n);G.ontimeout=
Xs(n);G.oncomplete=m;F=G.objectStore("document-store");N=G.objectStore("by-sequence");L=G.objectStore("attach-store");W=G.objectStore("attach-seq-store");la=G.objectStore("meta-store");la.get("meta-store").onsuccess=function(oa){D=oa.target.result;a()};r(function(oa){if(oa)return bb=!0,n(oa);f()})}function c(){O=!0;a()}function l(){y7(g.revs_limit,C,e,ha,G,X,u,k,c)}function a(){D&&O&&(D.docCount+=ja,la.put(D))}function f(){function pb(ua){(ua=fy(ua.target.result))&&ha.set(ua.id,ua);++oa===C.length&&
l()}if(C.length)for(var oa=0,ba=0,qa=C.length;ba<qa;ba++){var Ga=C[ba];Ga._id&&cy(Ga._id)?++oa===C.length&&l():F.get(Ga.metadata.id).onsuccess=pb}}function m(){bb||(IC.notify(e._meta.name),n(null,X))}function q(pb,oa){L.get(pb).onsuccess=function(ba){ba.target.result?oa():(ba=vh(A7,"unknown stub attachment with digest "+pb),ba.status=412,oa(ba))}}function r(pb){var oa=[];C.forEach(function(Ga){Ga.data&&Ga.data._attachments&&Object.keys(Ga.data._attachments).forEach(function(ua){ua=Ga.data._attachments[ua];
ua.stub&&oa.push(ua.digest)})});if(!oa.length)return pb();var ba=0,qa;oa.forEach(function(Ga){q(Ga,function(ua){ua&&!qa&&(qa=ua);++ba===oa.length&&pb(qa)})})}function u(pb,oa,ba,qa,Ga,ua,H,M){pb.metadata.winningRev=oa;pb.metadata.deleted=ba;var R=pb.data;R._id=pb.metadata.id;R._rev=pb.metadata.rev;qa&&(R._deleted=!0);if(R._attachments&&Object.keys(R._attachments).length)return y(pb,oa,ba,Ga,H,M);ja+=ua;a();v(pb,oa,ba,Ga,H,M)}function v(pb,oa,ba,qa,Ga,ua){function H(Aa){var db=pb.stemmedRevs||[];qa&&
e.auto_compaction&&(db=db.concat(U6(pb.metadata)));db&&db.length&&TU(db,pb.metadata.id,G);ca.seq=Aa.target.result;Aa=PL(ca,oa,ba);F.put(Aa).onsuccess=M}function M(){X[Ga]={ok:!0,id:ca.id,rev:ca.rev};ha.set(pb.metadata.id,pb.metadata);z(pb,ca.seq,ua)}var R=pb.data,ca=pb.metadata;R._doc_id_rev=ca.id+"::"+ca.rev;delete R._id;delete R._rev;var Z=N.put(R);Z.onsuccess=H;Z.onerror=function(Aa){Aa.preventDefault();Aa.stopPropagation();N.index("_doc_id_rev").getKey(R._doc_id_rev).onsuccess=function(db){N.put(R,
db.target.result).onsuccess=H}}}function y(pb,oa,ba,qa,Ga,ua){function H(){R===ca.length&&v(pb,oa,ba,qa,Ga,ua)}function M(){R++;H()}var R=0,ca=Object.keys(pb.data._attachments);ca.forEach(function(Z){Z=pb.data._attachments[Z];if(Z.stub)R++,H();else{var Aa=Z.data;delete Z.data;Z.revpos=parseInt(oa,10);A(Z.digest,Aa,M)}})}function z(pb,oa,ba){function qa(){++ua===H.length&&ba()}function Ga(R){R=W.put({seq:oa,digestSeq:pb.data._attachments[R].digest+"::"+oa});R.onsuccess=qa;R.onerror=function(ca){ca.preventDefault();
ca.stopPropagation();qa()}}var ua=0,H=Object.keys(pb.data._attachments||{});if(!H.length)return ba();for(var M=0;M<H.length;M++)Ga(H[M])}function A(pb,oa,ba){L.count(pb).onsuccess=function(qa){if(qa.target.result)return ba();L.put({digest:pb,body:oa}).onsuccess=ba}}var C=d.docs,G,F,N,L,W,la,wa,D;d=0;for(var Q=C.length;d<Q;d++){var J=C[d];J._id&&cy(J._id)||(J=C[d]=NU(J,k.new_edits,g),J.error&&!wa&&(wa=J))}if(wa)return n(wa);var O=!1,ja=0,X=Array(C.length),ha=new ap,bb=!1;x7(C,e._meta.blobSupport?"blob":
"base64",function(pb){if(pb)return n(pb);b()})}function UU(g,d,k,e,h){function n(q){f=q.target.result;a&&h(a,f,m)}function b(q){a=q.target.result;f&&h(a,f,m)}function c(){if(!a.length)return h();var q=a[a.length-1];if(d&&d.upper)try{var r=IDBKeyRange.bound(q,d.upper,!0,d.upperOpen)}catch(u){if("DataError"===u.name&&0===u.code)return h()}else r=IDBKeyRange.lowerBound(q,!0);d=r;f=a=null;g.getAll(d,e).onsuccess=n;g.getAllKeys(d,e).onsuccess=b}function l(q){q=q.target.result;if(!q)return h();h([q.key],
[q.value],q)}-1===e&&(e=1E3);var a,f;if("function"===typeof g.getAll&&"function"===typeof g.getAllKeys&&1<e&&!k){var m={"continue":c};g.getAll(d,e).onsuccess=n;g.getAllKeys(d,e).onsuccess=b}else k?g.openCursor(d,"prev").onsuccess=l:g.openCursor(d).onsuccess=l}function B7(g,d,k){if("function"===typeof g.getAll)g.getAll(d).onsuccess=k;else{var e=[];g.openCursor(d).onsuccess=function(h){(h=h.target.result)?(e.push(h.value),h.continue()):k({target:{result:e}})}}}function C7(g,d,k){var e=Array(g.length),
h=0;g.forEach(function(n,b){d.get(n).onsuccess=function(c){e[b]=c.target.result?c.target.result:{key:n,error:"not_found"};h++;h===g.length&&k(g,e,{})}})}function D7(g,d,k,e,h){try{if(g&&d)return h?IDBKeyRange.bound(d,g,!k,!1):IDBKeyRange.bound(g,d,!1,!k);if(g)return h?IDBKeyRange.upperBound(g):IDBKeyRange.lowerBound(g);if(d)return h?IDBKeyRange.lowerBound(d,!k):IDBKeyRange.upperBound(d,!k);if(e)return IDBKeyRange.only(e)}catch(n){return{error:n}}return null}function E7(g,d,k){function e(L,W){L.openCursor(null,
"prev").onsuccess=function(la){la=la.target.result;var wa=void 0;la&&la.key&&(wa=la.key);return W({target:{result:[wa]}})}}function h(L,W,la){C.get(L.id+"::"+la).onsuccess=function(wa){W.doc=qG(wa.target.result)||{};g.conflicts&&(wa=KL(L),wa.length&&(W.doc._conflicts=wa));SU(W.doc,g,A)}}function n(L){for(var W=0,la=L.length;W<la&&G.length!==u;W++){var wa=L[W];if(wa.error&&q)G.push(wa);else{var D=fy(wa);wa=D.winningRev;var Q={id:D.id,key:D.id,value:{rev:wa}};D.deleted?q&&(G.push(Q),Q.value.deleted=
!0,Q.doc=null):0>=r--&&(G.push(Q),g.include_docs&&h(D,Q,wa))}}}function b(L,W,la){la&&(n(W),G.length<u&&la.continue())}function c(L){L=L.target.result;g.descending&&(L=L.reverse());n(L)}function l(){var L={total_rows:F,offset:g.skip,rows:G};g.update_seq&&void 0!==N&&(L.update_seq=N);k(null,L)}var a="startkey"in g?g.startkey:!1,f="endkey"in g?g.endkey:!1,m="key"in g?g.key:!1,q="keys"in g?g.keys:!1,r=g.skip||0,u="number"===typeof g.limit?g.limit:-1,v=!1!==g.inclusive_end,y,z;if(!q&&(z=(y=D7(a,f,v,m,
g.descending))&&y.error)&&("DataError"!==z.name||0!==z.code))return k(vh(OL,z.name,z.message));a=["document-store","by-sequence","meta-store"];g.attachments&&a.push("attach-store");d=zr(d,a,"readonly");if(d.error)return k(d.error);var A=d.txn;A.oncomplete=function(){g.attachments?QL(G,g.binary).then(l):l()};A.onabort=Xs(k);d=A.objectStore("document-store");a=A.objectStore("by-sequence");f=A.objectStore("meta-store");var C=a.index("_doc_id_rev"),G=[],F,N;f.get("meta-store").onsuccess=function(L){F=
L.target.result.docCount};g.update_seq&&e(a,function(L){L.target.result&&0<L.target.result.length&&(N=L.target.result[0])});if(!z&&0!==u){if(q)return C7(g.keys,d,b);if(-1===u)return B7(d,y,c);UU(d,y,g.descending,u+r,b)}}function F7(g){return(new Promise(function(d){var k=EL([""]);k=g.objectStore("detect-blob-support").put(k,"key");k.onsuccess=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),h=navigator.userAgent.match(/Edge\//);d(h||!e||43<=parseInt(e[1],10))};k.onerror=g.onabort=function(e){e.preventDefault();
e.stopPropagation();d(!1)}})).catch(function(){return!1})}function G7(g,d){g.objectStore("document-store").index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(k){d(k.target.result)}}function H7(g,d,k,e){try{g(d,k)}catch(h){e.emit("error",h)}}function VU(){!RL&&SL.length&&(RL=!0,SL.shift()())}function I7(g,d,k){SL.push(function(){g(function(e,h){H7(d,e,h,k);RL=!1;Ws(function(){VU()})})});VU()}function J7(g,d,k,e){function h(A,C,G,F){if(G.seq!==C)return F();if(G.winningRev===A._rev)return F(G,
A);z.get(A._id+"::"+G.winningRev).onsuccess=function(N){F(G,qG(N.target.result))}}function n(A,C,G){if(l&&!l.has(A._id))return G();var F=u.get(A._id);if(F)return h(A,C,F,G);y.get(A._id).onsuccess=function(N){F=fy(N.target.result);u.set(A._id,F);h(A,C,F,G)}}function b(){g.complete(null,{results:m,last_seq:a})}g=ql(g);if(g.continuous){var c=k+":"+pG();IC.addListener(k,c,d,g);IC.notify(k);return{cancel:function(){IC.removeListener(k,c)}}}var l=g.doc_ids&&new JC(g.doc_ids);g.since=g.since||0;var a=g.since,
f="limit"in g?g.limit:-1;0===f&&(f=1);var m=[],q=0,r=BL(g),u=new ap;d=["document-store","by-sequence"];g.attachments&&d.push("attach-store");e=zr(e,d,"readonly");if(e.error)return g.complete(e.error);var v=e.txn;v.onabort=Xs(g.complete);v.oncomplete=function(){!g.continuous&&g.attachments?QL(m).then(b):b()};e=v.objectStore("by-sequence");var y=v.objectStore("document-store");var z=e.index("_doc_id_rev");d=g.since&&!g.descending?IDBKeyRange.lowerBound(g.since,!0):null;UU(e,d,g.descending,f,function(A,
C,G){function F(wa,D){var Q=g.processChange(D,wa,g);a=Q.seq=wa.seq;wa=r(Q);if("object"===typeof wa)return Promise.reject(wa);if(!wa)return Promise.resolve();q++;g.return_docs&&m.push(Q);return g.attachments&&g.include_docs?new Promise(function(J){SU(D,g,v,function(){QL([Q],g.binary).then(function(){J(Q)})})}):Promise.resolve(Q)}function N(){for(var wa=[],D=0,Q=L.length;D<Q&&q!==f;D++){var J=L[D];J&&wa.push(F(W[D],J))}Promise.all(wa).then(function(O){for(var ja=0,X=O.length;ja<X;ja++)if(O[ja])g.onChange(O[ja])}).catch(g.complete);
q!==f&&G.continue()}if(G&&A.length){var L=Array(A.length),W=Array(A.length),la=0;C.forEach(function(wa,D){wa=qG(wa);n(wa,A[D],function(Q,J){W[D]=Q;L[D]=J;++la===A.length&&N()})})}})}function WU(g,d){var k=this;I7(function(e){K7(k,g,e)},d,k.constructor)}function K7(g,d,k){function e(q){var r=q.createObjectStore("document-store",{keyPath:"id"});q.createObjectStore("by-sequence",{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0});q.createObjectStore("attach-store",{keyPath:"digest"});
q.createObjectStore("meta-store",{keyPath:"id",autoIncrement:!1});q.createObjectStore("detect-blob-support");r.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1});q.createObjectStore("local-store",{keyPath:"_id"});q=q.createObjectStore("attach-seq-store",{autoIncrement:!0});q.createIndex("seq","seq");q.createIndex("digestSeq","digestSeq",{unique:!0})}function h(q,r){var u=q.objectStore("document-store");u.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1});u.openCursor().onsuccess=function(v){if(v=
v.target.result){var y=v.value,z=Hu(y);y.deletedOrLocal=z?"1":"0";u.put(y);v.continue()}else r()}}function n(q,r){var u=q.objectStore("local-store"),v=q.objectStore("document-store"),y=q.objectStore("by-sequence");v.openCursor().onsuccess=function(z){var A=z.target.result;if(A){var C=A.value;z=C.id;var G=cy(z);C=ay(C);if(G){var F=z+"::"+C;G=z+"::";C=z+"::~";z=y.index("_doc_id_rev");G=IDBKeyRange.bound(G,C,!1,!1);var N=z.openCursor(G);N.onsuccess=function(L){(N=L.target.result)?(L=N.value,L._doc_id_rev===
F&&u.put(L),y.delete(N.primaryKey),N.continue()):(v.delete(A.primaryKey),A.continue())}}else A.continue()}else r&&r()}}function b(q){q=q.createObjectStore("attach-seq-store",{autoIncrement:!0});q.createIndex("seq","seq");q.createIndex("digestSeq","digestSeq",{unique:!0})}function c(q,r){var u=q.objectStore("by-sequence"),v=q.objectStore("attach-store"),y=q.objectStore("attach-seq-store");v.count().onsuccess=function(z){if(!z.target.result)return r();u.openCursor().onsuccess=function(A){A=A.target.result;
if(!A)return r();for(var C=A.value,G=A.primaryKey,F=Object.keys(C._attachments||{}),N={},L=0;L<F.length;L++)N[C._attachments[F[L]].digest]=!0;C=Object.keys(N);for(L=0;L<C.length;L++)y.put({seq:G,digestSeq:C[L]+"::"+G});A.continue()}}}function l(q){function r(y){return y.data?fy(y):(y.deleted="1"===y.deletedOrLocal,y)}var u=q.objectStore("by-sequence"),v=q.objectStore("document-store");v.openCursor().onsuccess=function(y){function z(){var G=PL(C,C.winningRev,C.deleted);v.put(G).onsuccess=function(){A.continue()}}
var A=y.target.result;if(A){var C=r(A.value);C.winningRev=C.winningRev||ay(C);if(C.seq)return z();(function(){var G=C.id+"::",F=C.id+"::\uffff",N=0;u.index("_doc_id_rev").openCursor(IDBKeyRange.bound(G,F)).onsuccess=function(L){L=L.target.result;if(!L)return C.seq=N,z();var W=L.primaryKey;W>N&&(N=W);L.continue()}})()}}}var a=d.name,f=null;g._meta=null;g._remote=!1;g.type=function(){return"idb"};g._id=kU(function(q){q(null,g._meta.instanceId)});g._bulkDocs=function(q,r,u){z7(d,q,r,g,f,u)};g._get=function(q,
r,u){function v(){u(A,{doc:y,metadata:z,ctx:C})}var y,z,A,C=r.ctx;if(!C){var G=zr(f,["document-store","by-sequence","attach-store"],"readonly");if(G.error)return u(G.error);C=G.txn}C.objectStore("document-store").get(q).onsuccess=function(F){z=fy(F.target.result);if(!z)return A=vh(yr,"missing"),v();if(r.rev)var N=r.latest?Z6(r.rev,z):r.rev;else if(N=z.winningRev,Hu(z))return A=vh(yr,"deleted"),v();F=C.objectStore("by-sequence");N=z.id+"::"+N;F.index("_doc_id_rev").get(N).onsuccess=function(L){(y=
L.target.result)&&(y=qG(y));if(!y)return A=vh(yr,"missing"),v();v()}}};g._getAttachment=function(q,r,u,v,y){if(v.ctx)q=v.ctx;else{q=zr(f,["document-store","by-sequence","attach-store"],"readonly");if(q.error)return y(q.error);q=q.txn}r=u.digest;var z=u.content_type;q.objectStore("attach-store").get(r).onsuccess=function(A){RU(A.target.result.body,z,v.binary,function(C){y(null,C)})}};g._info=function(q){var r,u,v=zr(f,["meta-store","by-sequence"],"readonly");if(v.error)return q(v.error);v=v.txn;v.objectStore("meta-store").get("meta-store").onsuccess=
function(y){u=y.target.result.docCount};v.objectStore("by-sequence").openCursor(null,"prev").onsuccess=function(y){r=(y=y.target.result)?y.key:0};v.oncomplete=function(){q(null,{doc_count:u,update_seq:r,idb_attachment_format:g._meta.blobSupport?"binary":"base64"})}};g._allDocs=function(q,r){E7(q,f,r)};g._changes=function(q){return J7(q,g,a,f)};g._close=function(q){f.close();nA.delete(a);q()};g._getRevisionTree=function(q,r){var u=zr(f,["document-store"],"readonly");if(u.error)return r(u.error);u.txn.objectStore("document-store").get(q).onsuccess=
function(v){(v=fy(v.target.result))?r(null,v.rev_tree):r(vh(yr))}};g._doCompaction=function(q,r,u){var v=zr(f,["document-store","by-sequence","attach-store","attach-seq-store"],"readwrite");if(v.error)return u(v.error);var y=v.txn;y.objectStore("document-store").get(q).onsuccess=function(z){z=fy(z.target.result);by(z.rev_tree,function(G,F,N,L,W){-1!==r.indexOf(F+"-"+N)&&(W.status="missing")});TU(r,q,y);var A=z.winningRev,C=z.deleted;y.objectStore("document-store").put(PL(z,A,C))};y.onabort=Xs(u);
y.oncomplete=function(){u()}};g._getLocal=function(q,r){var u=zr(f,["local-store"],"readonly");if(u.error)return r(u.error);q=u.txn.objectStore("local-store").get(q);q.onerror=Xs(r);q.onsuccess=function(v){(v=v.target.result)?(delete v._doc_id_rev,r(null,v)):r(vh(yr))}};g._putLocal=function(q,r,u){"function"===typeof r&&(u=r,r={});delete q._revisions;var v=q._rev,y=q._id;q._rev=v?"0-"+(parseInt(v.split("-")[1],10)+1):"0-1";var z=r.ctx,A;if(!z){z=zr(f,["local-store"],"readwrite");if(z.error)return u(z.error);
z=z.txn;z.onerror=Xs(u);z.oncomplete=function(){A&&u(null,A)}}var C=z.objectStore("local-store");v?(y=C.get(y),y.onsuccess=function(G){(G=G.target.result)&&G._rev===v?C.put(q).onsuccess=function(){A={ok:!0,id:q._id,rev:q._rev};r.ctx&&u(null,A)}:u(vh(lA))}):(y=C.add(q),y.onerror=function(G){u(vh(lA));G.preventDefault();G.stopPropagation()},y.onsuccess=function(){A={ok:!0,id:q._id,rev:q._rev};r.ctx&&u(null,A)})};g._removeLocal=function(q,r,u){"function"===typeof r&&(u=r,r={});var v=r.ctx;if(!v){v=zr(f,
["local-store"],"readwrite");if(v.error)return u(v.error);v=v.txn;v.oncomplete=function(){y&&u(null,y)}}var y,z=q._id,A=v.objectStore("local-store");v=A.get(z);v.onerror=Xs(u);v.onsuccess=function(C){(C=C.target.result)&&C._rev===q._rev?(A.delete(z),y={ok:!0,id:z,rev:"0-0"},r.ctx&&u(null,y)):u(vh(yr))}};g._destroy=function(q,r){IC.removeAllListeners(a);(q=TL.get(a))&&q.result&&(q.result.close(),nA.delete(a));q=indexedDB.deleteDatabase(a);q.onsuccess=function(){TL.delete(a);DC&&a in localStorage&&
delete localStorage[a];r(null,{ok:!0})};q.onerror=Xs(r)};var m=nA.get(a);if(m)return f=m.idb,g._meta=m.global,Ws(function(){k(null,g)});m=indexedDB.open(a,5);TL.set(a,m);m.onupgradeneeded=function(q){function r(){var A=y[z-1];z++;A&&A(v,r)}var u=q.target.result;if(1>q.oldVersion)return e(u);var v=q.currentTarget.transaction;3>q.oldVersion&&u.createObjectStore("local-store",{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0});4>q.oldVersion&&b(u);var y=[h,n,c,l],z=q.oldVersion;r()};
m.onsuccess=function(q){function r(){"undefined"!==typeof C&&y&&(g._meta={name:a,instanceId:G,blobSupport:C},nA.set(a,{idb:f,global:g._meta}),k(null,g))}function u(){if("undefined"!==typeof A&&"undefined"!==typeof z){var F=a+"_id";F in z?G=z[F]:z[F]=G=pG();z.docCount=A;v.objectStore("meta-store").put(z)}}f=q.target.result;f.onversionchange=function(){f.close();nA.delete(a)};f.onabort=function(F){Wp("error","Database has a global failure",F.target.error);f.close();nA.delete(a)};var v=f.transaction(["meta-store",
"detect-blob-support","document-store"],"readwrite"),y=!1,z,A,C,G;v.objectStore("meta-store").get("meta-store").onsuccess=function(F){z=F.target.result||{id:"meta-store"};u()};G7(v,function(F){A=F;u()});UL||(UL=F7(v));UL.then(function(F){C=F;r()});v.oncomplete=function(){y=!0;r()};v.onabort=Xs(k)};m.onerror=function(q){(q=q.target.error&&q.target.error.message)?-1!==q.indexOf("stored database is a higher version")&&(q=Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):
q="Failed to open indexedDB, are you in private browsing mode?";Wp("error",q);k(vh(OL,q))}}function L7(g,d){return new Promise(function(k,e){function h(){l++;g[a++]().then(b,c)}function n(){if(++f===m)q?e(q):k();else for(;l<d&&a<m;)h()}function b(){l--;n()}function c(r){l--;q=q||r;n()}for(var l=0,a=0,f=0,m=g.length,q;l<d&&a<m;)h()})}function VL(g){var d=(g=g.doc||g.ok)&&g._attachments;d&&Object.keys(d).forEach(function(k){k=d[k];k.data=GL(k.data,k.content_type)})}function gy(g){return/^_design/.test(g)?
"_design/"+encodeURIComponent(g.slice(8)):/^_local/.test(g)?"_local/"+encodeURIComponent(g.slice(7)):encodeURIComponent(g)}function XU(g){return g._attachments&&Object.keys(g._attachments)?Promise.all(Object.keys(g._attachments).map(function(d){var k=g._attachments[d];if(k.data&&"string"!==typeof k.data)return(new Promise(function(e){HL(k.data,e)})).then(function(e){k.data=e})})):Promise.resolve()}function M7(g,d){if(d.prefix){var k=rU(d.prefix).protocol;k="http"===k||"https"===k}else k=!1;k&&(g=
d.name.substr(d.prefix.length),g=d.prefix.replace(/\/?$/,"/")+encodeURIComponent(g));d=rU(g);if(d.user||d.password)d.auth={username:d.user,password:d.password};g=d.path.replace(/(^\/|\/$)/g,"").split("/");d.db=g.pop();-1===d.db.indexOf("%")&&(d.db=encodeURIComponent(d.db));d.path=g.join("/");return d}function rl(g,d){return rG(g,g.db+"/"+d)}function rG(g,d){return g.protocol+"://"+g.host+(g.port?":"+g.port:"")+"/"+g.path+(g.path?"/":"")+d}function sG(g){return"?"+Object.keys(g).map(function(d){return d+
"="+encodeURIComponent(g[d])}).join("&")}function N7(g){var d="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",k=-1!==d.indexOf("msie"),e=-1!==d.indexOf("trident");d=-1!==d.indexOf("edge");g=!("method"in g)||"GET"===g.method;return(k||e||d)&&g}function WL(g,d){function k(m,q){return Rk(m,hA(function(r){h().then(function(){return q.apply(this,r)}).catch(function(u){r.pop()(u)})})).bind(b)}function e(m,q,r){var u={};q=q||{};q.headers=q.headers||new oA;q.headers.get("Content-Type")||
q.headers.set("Content-Type","application/json");q.headers.get("Accept")||q.headers.set("Accept","application/json");return a(m,q).then(function(v){u.ok=v.ok;u.status=v.status;return v.json()}).then(function(v){u.data=v;if(!u.ok){u.data.status=u.status;v=jA(u.data);if(r)return r(v);throw v;}Array.isArray(u.data)&&(u.data=u.data.map(function(y){return y.error||y.missing?jA(y):y}));if(r)r(null,u.data);else return u})}function h(){if(g.skip_setup)return Promise.resolve();if(f)return f;f=e(l).catch(function(m){return m&&
m.status&&404===m.status?(AL(404,"PouchDB is just detecting if the remote exists."),e(l,{method:"PUT"})):Promise.reject(m)}).catch(function(m){return m&&m.status&&412===m.status?!0:Promise.reject(m)});f.catch(function(){f=null});return f}function n(m){return m.split("/").map(encodeURIComponent).join("/")}var b=this,c=M7(g.name,g),l=rl(c,"");g=ql(g);var a=function(m,q){q=q||{};q.headers=q.headers||new oA;q.credentials="include";if(g.auth||c.auth){var r=g.auth||c.auth;r=btoa(unescape(encodeURIComponent(r.username+
":"+r.password)));q.headers.set("Authorization","Basic "+r)}var u=g.headers||{};Object.keys(u).forEach(function(v){q.headers.append(v,u[v])});N7(q)&&(m+=(-1===m.indexOf("?")?"?":"&")+"_nonce="+Date.now());return(g.fetch||YU)(m,q)},f;Ws(function(){d(null,b)});b._remote=!0;b.type=function(){return"http"};b.id=k("id",function(m){a(rG(c,"")).then(function(q){return q.json()}).catch(function(){return{}}).then(function(q){q=q&&q.uuid?q.uuid+c.db:rl(c,"");m(null,q)})});b.compact=k("compact",function(m,q){"function"===
typeof m&&(q=m,m={});m=ql(m);e(rl(c,"_compact"),{method:"POST"}).then(function(){function r(){b.info(function(u,v){v&&!v.compact_running?q(null,{ok:!0}):setTimeout(r,m.interval||200)})}r()})});b.bulkGet=Rk("bulkGet",function(m,q){function r(A){var C={};m.revs&&(C.revs=!0);m.attachments&&(C.attachments=!0);m.latest&&(C.latest=!0);e(rl(c,"_bulk_get"+sG(C)),{method:"POST",body:JSON.stringify({docs:m.docs})}).then(function(G){m.attachments&&m.binary&&G.data.results.forEach(function(F){F.docs.forEach(VL)});
A(null,G.data)}).catch(A)}function u(){function A(W){return function(la,wa){F[W]=wa.results;++G===C&&q(null,{results:mG(F)})}}for(var C=Math.ceil(m.docs.length/50),G=0,F=Array(C),N=0;N<C;N++){var L=CC(m,["revs","attachments","binary","latest"]);L.docs=m.docs.slice(50*N,Math.min(m.docs.length,50*(N+1)));mU(v,L,A(N))}}var v=this,y=rG(c,""),z=XL[y];"boolean"!==typeof z?r(function(A,C){A?(XL[y]=!1,AL(A.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),u()):(XL[y]=!0,q(null,
C))}):z?r(q):u()});b._info=function(m){h().then(function(){return a(rl(c,""))}).then(function(q){return q.json()}).then(function(q){q.host=rl(c,"");m(null,q)}).catch(m)};b.fetch=function(m,q){return h().then(function(){var r="/"===m.substring(0,1)?rG(c,m.substring(1)):rl(c,m);return a(r,q)})};b.get=k("get",function(m,q,r){function u(z){function A(F){var N=C[F];F=gy(z._id)+"/"+n(F)+"?rev="+z._rev;return a(rl(c,F)).then(function(L){return"buffer"in L?L.buffer():L.blob()}).then(function(L){if(q.binary){var W=
Object.getOwnPropertyDescriptor(L.__proto__,"type");if(!W||W.set)L.type=N.content_type;return L}return new Promise(function(la){HL(L,la)})}).then(function(L){delete N.stub;delete N.length;N.data=L})}var C=z._attachments,G=C&&Object.keys(C);if(C&&G.length)return G=G.map(function(F){return function(){return A(F)}}),L7(G,5)}function v(z){return Array.isArray(z)?Promise.all(z.map(function(A){if(A.ok)return u(A.ok)})):u(z)}"function"===typeof q&&(r=q,q={});q=ql(q);var y={};q.revs&&(y.revs=!0);q.revs_info&&
(y.revs_info=!0);q.latest&&(y.latest=!0);q.open_revs&&("all"!==q.open_revs&&(q.open_revs=JSON.stringify(q.open_revs)),y.open_revs=q.open_revs);q.rev&&(y.rev=q.rev);q.conflicts&&(y.conflicts=q.conflicts);q.update_seq&&(y.update_seq=q.update_seq);m=gy(m);y=rl(c,m+sG(y));e(y).then(function(z){return Promise.resolve().then(function(){if(q.attachments)return v(z.data)}).then(function(){r(null,z.data)})}).catch(function(z){z.docId=m;r(z)})});b.remove=k("remove",function(m,q,r,u){"string"===typeof q?(m=
{_id:m,_rev:q},"function"===typeof r&&(u=r,r={})):"function"===typeof q?(u=q,r={}):(u=r,r=q);q=m._rev||r.rev;q=rl(c,gy(m._id))+"?rev="+q;e(q,{method:"DELETE"},u).catch(u)});b.getAttachment=k("getAttachment",function(m,q,r,u){"function"===typeof r&&(u=r,r={});r=r.rev?"?rev="+r.rev:"";m=rl(c,gy(m))+"/"+n(q)+r;var v;a(m,{method:"GET"}).then(function(y){v=y.headers.get("content-type");if(y.ok)return"undefined"===typeof tG||tG.browser||"function"!==typeof y.buffer?y.blob():y.buffer();throw y;}).then(function(y){"undefined"===
typeof tG||tG.browser||(y.type=v);u(null,y)}).catch(function(y){u(y)})});b.removeAttachment=k("removeAttachment",function(m,q,r,u){m=rl(c,gy(m)+"/"+n(q))+"?rev="+r;e(m,{method:"DELETE"},u).catch(u)});b.putAttachment=k("putAttachment",function(m,q,r,u,v,y){"function"===typeof v&&(y=v,v=u,u=r,r=null);m=gy(m)+"/"+n(q);m=rl(c,m);r&&(m+="?rev="+r);if("string"===typeof u){try{var z=atob(u)}catch(A){return y(vh(PU,"Attachment is not a valid base64 string"))}u=z?FL(z,v):""}e(m,{headers:new oA({"Content-Type":v}),
method:"PUT",body:u},y).catch(y)});b._bulkDocs=function(m,q,r){m.new_edits=q.new_edits;h().then(function(){return Promise.all(m.docs.map(XU))}).then(function(){return e(rl(c,"_bulk_docs"),{method:"POST",body:JSON.stringify(m)},r)}).catch(r)};b._put=function(m,q,r){h().then(function(){return XU(m)}).then(function(){return e(rl(c,gy(m._id)),{method:"PUT",body:JSON.stringify(m)})}).then(function(u){r(null,u.data)}).catch(function(u){u.docId=m&&m._id;r(u)})};b.allDocs=k("allDocs",function(m,q){"function"===
typeof m&&(q=m,m={});m=ql(m);var r={},u="GET";m.conflicts&&(r.conflicts=!0);m.update_seq&&(r.update_seq=!0);m.descending&&(r.descending=!0);m.include_docs&&(r.include_docs=!0);m.attachments&&(r.attachments=!0);m.key&&(r.key=JSON.stringify(m.key));m.start_key&&(m.startkey=m.start_key);m.startkey&&(r.startkey=JSON.stringify(m.startkey));m.end_key&&(m.endkey=m.end_key);m.endkey&&(r.endkey=JSON.stringify(m.endkey));"undefined"!==typeof m.inclusive_end&&(r.inclusive_end=!!m.inclusive_end);"undefined"!==
typeof m.limit&&(r.limit=m.limit);"undefined"!==typeof m.skip&&(r.skip=m.skip);r=sG(r);if("undefined"!==typeof m.keys){u="POST";var v={keys:m.keys}}e(rl(c,"_all_docs"+r),{method:u,body:JSON.stringify(v)}).then(function(y){m.include_docs&&m.attachments&&m.binary&&y.data.rows.forEach(VL);q(null,y.data)}).catch(q)});b._changes=function(m){var q="batch_size"in m?m.batch_size:25;m=ql(m);!m.continuous||"heartbeat"in m||(m.heartbeat=1E4);var r="timeout"in m?m.timeout:3E4;"timeout"in m&&m.timeout&&5E3>r-
m.timeout&&(r=m.timeout+5E3);"heartbeat"in m&&m.heartbeat&&5E3>r-m.heartbeat&&(r=m.heartbeat+5E3);var u={};"timeout"in m&&m.timeout&&(u.timeout=m.timeout);var v="undefined"!==typeof m.limit?m.limit:!1,y=v;m.style&&(u.style=m.style);if(m.include_docs||m.filter&&"function"===typeof m.filter)u.include_docs=!0;m.attachments&&(u.attachments=!0);m.continuous&&(u.feed="longpoll");m.seq_interval&&(u.seq_interval=m.seq_interval);m.conflicts&&(u.conflicts=!0);m.descending&&(u.descending=!0);m.update_seq&&(u.update_seq=
!0);"heartbeat"in m&&m.heartbeat&&(u.heartbeat=m.heartbeat);m.filter&&"string"===typeof m.filter&&(u.filter=m.filter);m.view&&"string"===typeof m.view&&(u.filter="_view",u.view=m.view);if(m.query_params&&"object"===typeof m.query_params)for(var z in m.query_params)m.query_params.hasOwnProperty(z)&&(u[z]=m.query_params[z]);var A="GET";if(m.doc_ids){u.filter="_doc_ids";A="POST";var C={doc_ids:m.doc_ids}}else m.selector&&(u.filter="_selector",A="POST",C={selector:m.selector});var G=new O7,F,N=function(la,
wa){if(!m.aborted){u.since=la;"object"===typeof u.since&&(u.since=JSON.stringify(u.since));m.descending?v&&(u.limit=y):u.limit=!v||y>q?q:y;var D=rl(c,"_changes"+sG(u)),Q={signal:G.signal,method:A,body:JSON.stringify(C)};F=la;m.aborted||h().then(function(){return e(D,Q,wa)}).catch(wa)}},L={results:[]},W=function(la,wa){if(!m.aborted){var D=0;if(wa&&wa.results){D=wa.results.length;L.last_seq=wa.last_seq;var Q=null,J=null;"number"===typeof wa.pending&&(Q=wa.pending);if("string"===typeof L.last_seq||
"number"===typeof L.last_seq)J=L.last_seq;wa.results=wa.results.filter(function(O){y--;var ja=BL(m)(O);ja&&(m.include_docs&&m.attachments&&m.binary&&VL(O),m.return_docs&&L.results.push(O),m.onChange(O,Q,J));return ja})}else if(la){m.aborted=!0;m.complete(la);return}wa&&wa.last_seq&&(F=wa.last_seq);la=v&&0>=y||wa&&D<q||m.descending;(!m.continuous||v&&0>=y)&&la?m.complete(null,L):Ws(function(){N(F,W)})}};N(m.since||0,W);return{cancel:function(){m.aborted=!0;G.abort()}}};b.revsDiff=k("revsDiff",function(m,
q,r){"function"===typeof q&&(r=q);e(rl(c,"_revs_diff"),{method:"POST",body:JSON.stringify(m)},r).catch(r)});b._close=function(m){m()};b._destroy=function(m,q){e(rl(c,""),{method:"DELETE"}).then(function(r){q(null,r)}).catch(function(r){404===r.status?q(null,{ok:!0}):q(r)})}}function hy(g){this.status=400;this.name="query_parse_error";this.message=g;this.error=!0;try{Error.captureStackTrace(this,hy)}catch(d){}}function uG(g){this.status=404;this.name="not_found";this.message=g;this.error=!0;try{Error.captureStackTrace(this,
uG)}catch(d){}}function vG(g){this.status=500;this.name="invalid_value";this.message=g;this.error=!0;try{Error.captureStackTrace(this,vG)}catch(d){}}function ZU(g,d){d&&g.then(function(k){Ws(function(){d(null,k)})},function(k){Ws(function(){d(k)})});return g}function P7(g){return hA(function(d){var k=d.pop();d=g.apply(this,d);"function"===typeof k&&ZU(d,k);return d})}function Q7(g,d){return g.then(function(k){return d().then(function(){return k})},function(k){return d().then(function(){throw k;})})}
function YL(g,d){return function(){var k=arguments,e=this;return g.add(function(){return d.apply(e,k)})}}function $U(g){g=new JC(g);var d=Array(g.size),k=-1;g.forEach(function(e){d[++k]=e});return d}function ZL(g){var d=Array(g.size),k=-1;g.forEach(function(e,h){d[++k]=h});return d}function aV(g){return new vG("builtin "+g+" function requires map values to be numbers or number arrays")}function $L(g){for(var d=0,k=0,e=g.length;k<e;k++){var h=g[k];if("number"!==typeof h)if(Array.isArray(h)){d="number"===
typeof d?[d]:d;for(var n=0,b=h.length;n<b;n++){var c=h[n];if("number"!==typeof c)throw aV("_sum");"undefined"===typeof d[n]?d.push(c):d[n]+=c}}else throw aV("_sum");else"number"===typeof d?d+=h:d[0]+=h}return d}function bV(g,d){return DL("return ("+g.replace(/;\s*$/,"")+");",{emit:d,sum:$L,log:R7,isArray:S7,toJSON:T7})}function KC(){this.promise=new Promise(function(g){g()})}function cV(g){if(!g)return"undefined";switch(typeof g){case "function":return g.toString();case "string":return g.toString();
default:return JSON.stringify(g)}}function U7(g,d){return cV(g)+cV(d)+"undefined"}function dV(g,d,k,e,h,n){var b=U7(k,e);if(!h){var c=g._cachedViews=g._cachedViews||{};if(c[b])return c[b]}var l=g.info().then(function(a){var f=a.db_name+"-mrview-"+(h?"temp":oG.hash(b));return nG(g,"_local/"+n,function(m){m.views=m.views||{};var q=d;-1===q.indexOf("/")&&(q=d+"/"+d);q=m.views[q]=m.views[q]||{};if(!q[f])return q[f]=!0,m}).then(function(){return g.registerDependentDatabase(f).then(function(m){m=m.db;m.auto_compaction=
!0;var q={name:f,db:m,sourceDB:g,adapter:g.adapter,mapFun:k,reduceFun:e};return q.db.get("_local/lastSeq").catch(function(r){if(404!==r.status)throw r;}).then(function(r){q.seq=r?r.seq:0;if(c)q.db.once("destroyed",function(){delete c[b]});return q})})})});c&&(c[b]=l);return l}function aM(g){return-1===g.indexOf("/")?[g,g]:g.split("/")}function V7(g){return 1===g.length&&/^1-/.test(g[0].rev)}function eV(g,d){try{g.emit("error",d)}catch(k){Wp("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),
Wp("error",d)}}function fV(g,d){var k=Object.keys(d._attachments);return Promise.all(k.map(function(e){return g.getAttachment(d._id,e,{rev:d._rev})}))}function W7(g,d,k){var e=Vs(d)&&!Vs(g),h=Object.keys(k._attachments);return e?g.get(k._id).then(function(n){return Promise.all(h.map(function(b){return n._attachments&&n._attachments[b]&&n._attachments[b].digest===k._attachments[b].digest?g.getAttachment(n._id,b):d.getAttachment(k._id,b)}))}).catch(function(n){if(404!==n.status)throw n;return fV(d,
k)}):fV(d,k)}function X7(g){var d=[];Object.keys(g).forEach(function(k){g[k].missing.forEach(function(e){d.push({id:k,rev:e})})});return{docs:d,revs:!0,latest:!0}}function Y7(g,d,k,e){function h(c){return g.allDocs({keys:c,include_docs:!0,conflicts:!0}).then(function(l){if(e.cancelled)throw Error("cancelled");l.rows.forEach(function(a){var f;(f=a.deleted||!a.doc||!/^1-/.test(a.value.rev))||(f=a.doc,f=f._attachments&&0<Object.keys(f._attachments).length);f||(f=a.doc,f=f._conflicts&&0<f._conflicts.length);
f||(a.doc._conflicts&&delete a.doc._conflicts,n.push(a.doc),delete k[a.id])})})}k=ql(k);var n=[],b=!0;return Promise.resolve().then(function(){var c=Object.keys(k).filter(function(l){l=k[l].missing;return 1===l.length&&/^1-/.test(l[0])});if(0<c.length)return h(c)}).then(function(){var c=X7(k);if(c.docs.length)return g.bulkGet(c).then(function(l){if(e.cancelled)throw Error("cancelled");return Promise.all(l.results.map(function(a){return Promise.all(a.docs.map(function(f){var m=f.ok;f.error&&(b=!1);
return m&&m._attachments?W7(d,g,m).then(function(q){var r=Object.keys(m._attachments);q.forEach(function(u,v){v=m._attachments[r[v]];delete v.stub;delete v.length;v.data=u});return m}):m}))})).then(function(a){n=n.concat(mG(a).filter(Boolean))})})}).then(function(){return{ok:b,docs:n}})}function bM(g,d,k,e,h){return g.get(d).catch(function(n){if(404===n.status)return"http"!==g.adapter&&"https"!==g.adapter||AL(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:e,_id:d,history:[],
replicator:"pouchdb",version:1};throw n;}).then(function(n){if(!h.cancelled&&n.last_seq!==k)return n.history=(n.history||[]).filter(function(b){return b.session_id!==e}),n.history.unshift({last_seq:k,session_id:e}),n.history=n.history.slice(0,5),n.version=1,n.replicator="pouchdb",n.session_id=e,n.last_seq=k,g.put(n).catch(function(b){if(409===b.status)return bM(g,d,k,e,h);throw b;})})}function LC(g,d,k,e,h){this.src=g;this.target=d;this.id=k;this.returnValue=e;this.opts=h||{}}function gV(g,d){var k=
g[0],e=g.slice(1),h=d[0],n=d.slice(1);return k&&0!==d.length?cM(k.session_id,d)?{last_seq:k.last_seq,history:g}:cM(h.session_id,e)?{last_seq:h.last_seq,history:n}:gV(e,n):{last_seq:0,history:[]}}function cM(g,d){var k=d[0],e=d.slice(1);return g&&0!==d.length?g===k.session_id?!0:cM(g,e):!1}function hV(g){return"number"===typeof g.status&&4===Math.floor(g.status/100)}function Z7(g,d,k,e){if(!1===g.retry)d.emit("error",k),d.removeAllListeners();else{"function"!==typeof g.back_off_function&&(g.back_off_function=
I6);d.emit("requestError",k);if("active"===d.state||"pending"===d.state){d.emit("paused",k);d.state="stopped";var h=function(){g.current_back_off=0};d.once("paused",function(){d.removeListener("active",h)});d.once("active",h)}g.current_back_off=g.current_back_off||0;g.current_back_off=g.back_off_function(g.current_back_off);setTimeout(e,g.current_back_off)}}function $7(g){return Object.keys(g).sort(Pl).reduce(function(d,k){d[k]=g[k];return d},{})}function a8(g,d,k){var e=k.doc_ids?k.doc_ids.sort(Pl):
"",h=k.filter?k.filter.toString():"",n="",b="",c="";k.selector&&(c=JSON.stringify(k.selector));k.filter&&k.query_params&&(n=JSON.stringify($7(k.query_params)));k.filter&&"_view"===k.filter&&(b=k.view.toString());return Promise.all([g.id(),d.id()]).then(function(l){var a=l[0]+l[1]+h+b+n+e+c;return new Promise(function(f){IL(a,f)})}).then(function(l){l=l.replace(/\//g,".").replace(/\+/g,"_");return"_local/"+l})}function iV(g,d,k,e,h){function n(){return bb?Promise.resolve():a8(g,d,k).then(function(qa){ha=
qa;bb=new LC(g,d,ha,e,!1===k.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===k.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===k.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0})})}function b(){pb=[];if(0!==F.docs.length){var qa=F.docs;return d.bulkDocs({docs:qa,new_edits:!1},{timeout:k.timeout}).then(function(Ga){if(e.cancelled)throw r(),Error("cancelled");var ua=Object.create(null);
Ga.forEach(function(H){H.error&&(ua[H.id]=H)});Ga=Object.keys(ua).length;h.doc_write_failures+=Ga;h.docs_written+=qa.length-Ga;qa.forEach(function(H){var M=ua[H._id];if(M)if(h.errors.push(M),H=(M.name||"").toLowerCase(),"unauthorized"===H||"forbidden"===H)e.emit("denied",ql(M));else throw M;else pb.push(H)})},function(Ga){h.doc_write_failures+=qa.length;throw Ga;})}}function c(){if(F.error)throw Error("There was a problem getting docs.");h.last_seq=wa=F.seq;var qa=ql(h);pb.length&&(qa.docs=pb,"number"===
typeof F.pending&&(qa.pending=F.pending,delete F.pending),e.emit("change",qa));L=!0;return bb.writeCheckpoint(F.seq,oa).then(function(){L=!1;if(e.cancelled)throw r(),Error("cancelled");F=void 0;z()}).catch(function(Ga){C(Ga);throw Ga;})}function l(){var qa={};F.changes.forEach(function(Ga){"_user/"!==Ga.id&&(qa[Ga.id]=Ga.changes.map(function(ua){return ua.rev}))});return d.revsDiff(qa).then(function(Ga){if(e.cancelled)throw r(),Error("cancelled");F.diffs=Ga})}function a(){return Y7(g,d,F.diffs,e).then(function(qa){F.error=
!qa.ok;qa.docs.forEach(function(Ga){delete F.diffs[Ga._id];h.docs_read++;F.docs.push(Ga)})})}function f(){e.cancelled||F||(0===G.length?m(!0):(F=G.shift(),l().then(a).then(b).then(c).then(f).catch(function(qa){q("batch processing terminated with error",qa)})))}function m(qa){if(0===N.changes.length){if(0===G.length&&!F){if(D&&ba.live||W)e.state="pending",e.emit("paused");W&&r()}}else if(qa||W||N.changes.length>=Q){G.push(N);N={seq:0,changes:[],docs:[]};if("pending"===e.state||"stopped"===e.state)e.state=
"active",e.emit("active");f()}}function q(qa,Ga){la||(Ga.message||(Ga.message=qa),h.ok=!1,h.status="aborting",G=[],N={seq:0,changes:[],docs:[]},r(Ga))}function r(qa){if(!la){if(e.cancelled&&(h.status="cancelled",L))return;h.status=h.status||"complete";h.end_time=(new Date).toISOString();h.last_seq=wa;la=!0;if(qa){qa=vh(qa);qa.result=h;var Ga=(qa.name||"").toLowerCase();"unauthorized"===Ga||"forbidden"===Ga?(e.emit("error",qa),e.removeAllListeners()):Z7(k,e,qa,function(){iV(g,d,k,e)})}else e.emit("complete",
h),e.removeAllListeners()}}function u(qa,Ga,ua){if(e.cancelled)return r();"number"===typeof Ga&&(N.pending=Ga);BL(k)(qa)&&(N.seq=qa.seq||ua,N.changes.push(qa),Ws(function(){m(0===G.length&&ba.live)}))}function v(qa){O=!1;if(e.cancelled)return r();if(0<qa.results.length)ba.since=qa.results[qa.results.length-1].seq,z(),m(!0);else{var Ga=function(){D?(ba.live=!0,z()):W=!0;m(!0)};F||0!==qa.results.length?Ga():(L=!0,bb.writeCheckpoint(qa.last_seq,oa).then(function(){L=!1;h.last_seq=wa=qa.last_seq;Ga()}).catch(C))}}
function y(qa){O=!1;if(e.cancelled)return r();q("changes rejected",qa)}function z(){function qa(){ua.cancel()}function Ga(){e.removeListener("cancel",qa)}if(!O&&!W&&G.length<J){O=!0;e._changes&&(e.removeListener("cancel",e._abortChanges),e._changes.cancel());e.once("cancel",qa);var ua=g.changes(ba).on("change",u);ua.then(Ga,Ga);ua.then(v).catch(y);k.retry&&(e._changes=ua,e._abortChanges=qa)}}function A(){n().then(function(){if(e.cancelled)r();else return bb.getCheckpoint().then(function(qa){wa=qa;
ba={since:wa,limit:Q,batch_size:Q,style:"all_docs",doc_ids:ja,selector:X,return_docs:!0};k.filter&&("string"!==typeof k.filter?ba.include_docs=!0:ba.filter=k.filter);"heartbeat"in k&&(ba.heartbeat=k.heartbeat);"timeout"in k&&(ba.timeout=k.timeout);k.query_params&&(ba.query_params=k.query_params);k.view&&(ba.view=k.view);z()})}).catch(function(qa){q("getCheckpoint rejected with ",qa)})}function C(qa){L=!1;q("writeCheckpoint completed with error",qa)}var G=[],F,N={seq:0,changes:[],docs:[]},L=!1,W=!1,
la=!1,wa=0,D=k.continuous||k.live||!1,Q=k.batch_size||100,J=k.batches_limit||10,O=!1,ja=k.doc_ids,X=k.selector,ha,bb,pb=[],oa=pG();h=h||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var ba={};e.ready(g,d);e.cancelled?r():(e._addedListeners||(e.once("cancel",r),"function"===typeof k.complete&&(e.once("error",k.complete),e.once("complete",function(qa){k.complete(null,qa)})),e._addedListeners=!0),"undefined"===typeof k.since?A():n().then(function(){L=
!0;return bb.writeCheckpoint(k.since,oa)}).then(function(){L=!1;e.cancelled?r():(wa=k.since,A())}).catch(C))}function wG(){jo.EventEmitter.call(this);this.cancelled=!1;this.state="pending";var g=this,d=new Promise(function(k,e){g.once("complete",k);g.once("error",e)});g.then=function(k,e){return d.then(k,e)};g.catch=function(k){return d.catch(k)};g.catch(function(){})}function xG(g,d){var k=d.PouchConstructor;return"string"===typeof g?new k(g,d):g}function dM(g,d,k,e){"function"===typeof k&&(e=k,
k={});"undefined"===typeof k&&(k={});if(k.doc_ids&&!Array.isArray(k.doc_ids))throw vh(lG,"`doc_ids` filter parameter is not a list.");k.complete=e;k=ql(k);k.continuous=k.continuous||k.live;k.retry="retry"in k?k.retry:!1;k.PouchConstructor=k.PouchConstructor||this;e=new wG(k);g=xG(g,k);d=xG(d,k);iV(g,d,k,e);return e}function b8(g,d,k,e){"function"===typeof k&&(e=k,k={});"undefined"===typeof k&&(k={});k=ql(k);k.PouchConstructor=k.PouchConstructor||this;g=xG(g,k);d=xG(d,k);return new eM(g,d,k,e)}function eM(g,
d,k,e){function h(C){u.emit("change",{direction:"pull",change:C})}function n(C){u.emit("change",{direction:"push",change:C})}function b(C){u.emit("denied",{direction:"push",doc:C})}function c(C){u.emit("denied",{direction:"pull",doc:C})}function l(){u.pushPaused=!0;u.pullPaused&&u.emit("paused")}function a(){u.pullPaused=!0;u.pushPaused&&u.emit("paused")}function f(){u.pushPaused=!1;u.pullPaused&&u.emit("active",{direction:"push"})}function m(){u.pullPaused=!1;u.pushPaused&&u.emit("active",{direction:"pull"})}
function q(C){return function(G,F){var N="denied"===G&&(F===c||F===b),L="paused"===G&&(F===a||F===l),W="active"===G&&(F===m||F===f);if("change"===G&&(F===h||F===n)||N||L||W)G in z||(z[G]={}),z[G][C]=!0,2===Object.keys(z[G]).length&&u.removeAllListeners(G)}}function r(C,G,F){if(-1==C.listeners(G).indexOf(F))C.on(G,F)}var u=this;this.canceled=!1;var v=k.push?mA({},k,k.push):k,y=k.pull?mA({},k,k.pull):k;this.push=dM(g,d,v);this.pull=dM(d,g,y);this.pullPaused=this.pushPaused=!0;var z={};k.live&&(this.push.on("complete",
u.pull.cancel.bind(u.pull)),this.pull.on("complete",u.push.cancel.bind(u.push)));this.on("newListener",function(C){"change"===C?(r(u.pull,"change",h),r(u.push,"change",n)):"denied"===C?(r(u.pull,"denied",c),r(u.push,"denied",b)):"active"===C?(r(u.pull,"active",m),r(u.push,"active",f)):"paused"===C&&(r(u.pull,"paused",a),r(u.push,"paused",l))});this.on("removeListener",function(C){"change"===C?(u.pull.removeListener("change",h),u.push.removeListener("change",n)):"denied"===C?(u.pull.removeListener("denied",
c),u.push.removeListener("denied",b)):"active"===C?(u.pull.removeListener("active",m),u.push.removeListener("active",f)):"paused"===C&&(u.pull.removeListener("paused",a),u.push.removeListener("paused",l))});this.pull.on("removeListener",q("pull"));this.push.on("removeListener",q("push"));var A=Promise.all([this.push,this.pull]).then(function(C){C={push:C[0],pull:C[1]};u.emit("complete",C);e&&e(null,C);u.removeAllListeners();return C},function(C){u.cancel();e?e(C):u.emit("error",C);u.removeAllListeners();
if(e)throw C;});this.then=function(C,G){return A.then(C,G)};this.catch=function(C){return A.catch(C)}}function gw(){this._store={}}function MC(g){this._store=new gw;if(g&&Array.isArray(g))for(var d=0,k=g.length;d<k;d++)this.add(g[d])}function c8(){pA&&iy&&(pA=!1,iy.length?hw=iy.concat(hw):NC=-1,hw.length&&jV())}function jV(){if(!pA){fM=!1;pA=!0;for(var g=hw.length,d=setTimeout(c8);g;){iy=hw;for(hw=[];iy&&++NC<g;)iy[NC].run();NC=-1;g=hw.length}iy=null;NC=-1;pA=!1;clearTimeout(d)}}function kV(g,d){this.fun=
g;this.array=d}function mj(g,d,k){Error.call(this,k);this.status=g;this.name=d;this.message=k;this.error=!0}function jy(g){return g.call.bind(g)}function OC(g,d){if("object"!=typeof g)return!1;try{return d(g),!0}catch(k){return!1}}function lV(g){return ko&&bp?void 0!==Xp(g):mV(g)||nV(g)||oV(g)||pV(g)||qV(g)||rV(g)||sV(g)||tV(g)||uV(g)||vV(g)||wV(g)}function mV(g){return ko&&bp?"Uint8Array"===Xp(g):"[object Uint8Array]"===Xj(g)||d8(g)&&void 0!==g.buffer}function nV(g){return ko&&bp?"Uint8ClampedArray"===
Xp(g):"[object Uint8ClampedArray]"===Xj(g)}function oV(g){return ko&&bp?"Uint16Array"===Xp(g):"[object Uint16Array]"===Xj(g)}function pV(g){return ko&&bp?"Uint32Array"===Xp(g):"[object Uint32Array]"===Xj(g)}function qV(g){return ko&&bp?"Int8Array"===Xp(g):"[object Int8Array]"===Xj(g)}function rV(g){return ko&&bp?"Int16Array"===Xp(g):"[object Int16Array]"===Xj(g)}function sV(g){return ko&&bp?"Int32Array"===Xp(g):"[object Int32Array]"===Xj(g)}function tV(g){return ko&&bp?"Float32Array"===Xp(g):"[object Float32Array]"===
Xj(g)}function uV(g){return ko&&bp?"Float64Array"===Xp(g):"[object Float64Array]"===Xj(g)}function vV(g){return ko&&bp?"BigInt64Array"===Xp(g):"[object BigInt64Array]"===Xj(g)}function wV(g){return ko&&bp?"BigUint64Array"===Xp(g):"[object BigUint64Array]"===Xj(g)}function yG(g){return"[object Map]"===Xj(g)}function zG(g){return"[object Set]"===Xj(g)}function AG(g){return"[object WeakMap]"===Xj(g)}function gM(g){return"[object WeakSet]"===Xj(g)}function BG(g){return"[object ArrayBuffer]"===Xj(g)}function xV(g){return"undefined"!=
typeof ArrayBuffer&&(BG.working?BG(g):g instanceof ArrayBuffer)}function CG(g){return"[object DataView]"===Xj(g)}function yV(g){return"undefined"!=typeof DataView&&(CG.working?CG(g):g instanceof DataView)}function DG(g){return"[object SharedArrayBuffer]"===Xj(g)}function zV(g){return"undefined"!=typeof SharedArrayBuffer&&(DG.working?DG(g):g instanceof SharedArrayBuffer)}function AV(g){return OC(g,e8)}function BV(g){return OC(g,f8)}function CV(g){return OC(g,g8)}function DV(g){return EV&&OC(g,h8)}
function FV(g){return hM&&OC(g,i8)}function iw(g,d){var k={seen:[],stylize:j8};return 3<=arguments.length&&(k.depth=arguments[2]),4<=arguments.length&&(k.colors=arguments[3]),iM(d)?k.showHidden=d:d&&Jg._extend(k,d),ky(k.showHidden)&&(k.showHidden=!1),ky(k.depth)&&(k.depth=2),ky(k.colors)&&(k.colors=!1),ky(k.customInspect)&&(k.customInspect=!0),k.colors&&(k.stylize=k8),EG(k,g,k.depth)}function k8(g,d){return(d=iw.styles[d])?"\u001b["+iw.colors[d][0]+"m"+g+"\u001b["+iw.colors[d][1]+"m":g}function j8(g,
d){return g}function EG(g,d,k){if(g.customInspect&&d&&FG(d.inspect)&&d.inspect!==Jg.inspect&&(!d.constructor||d.constructor.prototype!==d)){var e=d.inspect(k,g);return GG(e)||(e=EG(g,e,k)),e}var h=function(a,f){if(ky(f))return a.stylize("undefined","undefined");if(GG(f))return f="'"+JSON.stringify(f).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",a.stylize(f,"string");if(GV(f))return a.stylize(""+f,"number");if(iM(f))return a.stylize(""+f,"boolean");if(null===f)return a.stylize("null",
"null")}(g,d);if(h)return h;h=Object.keys(d);var n=function(a){var f={};return a.forEach(function(m,q){f[m]=!0}),f}(h);if(g.showHidden&&(h=Object.getOwnPropertyNames(d)),PC(d)&&(0<=h.indexOf("message")||0<=h.indexOf("description")))return jM(d);if(0===h.length){if(FG(d))return g.stylize("[Function"+(d.name?": "+d.name:"")+"]","special");if(QC(d))return g.stylize(RegExp.prototype.toString.call(d),"regexp");if(HG(d))return g.stylize(Date.prototype.toString.call(d),"date");if(PC(d))return jM(d)}var b=
"",c=!1,l=["{","}"];(HV(d)&&(c=!0,l=["[","]"]),FG(d))&&(b=" [Function"+(d.name?": "+d.name:"")+"]");return QC(d)&&(b=" "+RegExp.prototype.toString.call(d)),HG(d)&&(b=" "+Date.prototype.toUTCString.call(d)),PC(d)&&(b=" "+jM(d)),0!==h.length||c&&0!=d.length?0>k?QC(d)?g.stylize(RegExp.prototype.toString.call(d),"regexp"):g.stylize("[Object]","special"):(g.seen.push(d),e=c?function(a,f,m,q,r){for(var u=[],v=0,y=f.length;v<y;++v)Object.prototype.hasOwnProperty.call(f,String(v))?u.push(kM(a,f,m,q,String(v),
!0)):u.push("");return r.forEach(function(z){z.match(/^\d+$/)||u.push(kM(a,f,m,q,z,!0))}),u}(g,d,k,n,h):h.map(function(a){return kM(g,d,k,n,a,c)}),g.seen.pop(),function(a,f,m){var q=0;return 60<a.reduce(function(r,u){return q++,0<=u.indexOf("\n")&&q++,r+u.replace(/\u001b\[\d\d?m/g,"").length+1},0)?m[0]+(""===f?"":f+"\n ")+" "+a.join(",\n  ")+" "+m[1]:m[0]+f+" "+a.join(", ")+" "+m[1]}(e,b,l)):l[0]+b+l[1]}function jM(g){return"["+Error.prototype.toString.call(g)+"]"}function kM(g,d,k,e,h,n){var b,c,
l;if((l=Object.getOwnPropertyDescriptor(d,h)||{value:d[h]}).get?c=l.set?g.stylize("[Getter/Setter]","special"):g.stylize("[Getter]","special"):l.set&&(c=g.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(e,h)||(b="["+h+"]"),c||(0>g.seen.indexOf(l.value)?-1<(c=null===k?EG(g,l.value,null):EG(g,l.value,k-1)).indexOf("\n")&&(c=n?c.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+c.split("\n").map(function(a){return"   "+a}).join("\n")):c=g.stylize("[Circular]","special")),
ky(b)){if(n&&h.match(/^\d+$/))return c;(b=JSON.stringify(""+h)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(b=b.substr(1,b.length-2),b=g.stylize(b,"name")):(b=b.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),b=g.stylize(b,"string"))}return b+": "+c}function HV(g){return Array.isArray(g)}function iM(g){return"boolean"==typeof g}function GV(g){return"number"==typeof g}function GG(g){return"string"==typeof g}function ky(g){return void 0===g}function QC(g){return qA(g)&&"[object RegExp]"===
Object.prototype.toString.call(g)}function qA(g){return"object"==typeof g&&null!==g}function HG(g){return qA(g)&&"[object Date]"===Object.prototype.toString.call(g)}function PC(g){return qA(g)&&("[object Error]"===Object.prototype.toString.call(g)||g instanceof Error)}function FG(g){return"function"==typeof g}function lM(g){return 10>g?"0"+g.toString(10):g.toString(10)}function l8(){var g=new Date,d=[lM(g.getHours()),lM(g.getMinutes()),lM(g.getSeconds())].join(":");return[g.getDate(),m8[g.getMonth()],
d].join(" ")}function n8(g,d){if(!g){var k=Error("Promise was rejected with a falsy value");k.reason=g;g=k}return d(g)}function IV(g){var d=g.length;if(0<d%4)throw Error("Invalid string. Length must be a multiple of 4");g=g.indexOf("=");return-1===g&&(g=d),[g,g===d?0:4-g%4]}function o8(g,d,k){for(var e,h=[],n=d;n<k;n+=3)d=(g[n]<<16&16711680)+(g[n+1]<<8&65280)+(255&g[n+2]),h.push(Ys[(e=d)>>18&63]+Ys[e>>12&63]+Ys[e>>6&63]+Ys[63&e]);return h.join("")}function Iu(g){if(2147483647<g)throw new RangeError('The value "'+
g+'" is invalid for option "size"');g=new Uint8Array(g);return Object.setPrototypeOf(g,$d.prototype),g}function $d(g,d,k){if("number"==typeof g){if("string"==typeof d)throw new TypeError('The "string" argument must be of type string. Received type number');return mM(g)}return JV(g,d,k)}function JV(g,d,k){if("string"==typeof g)return function(h,n){"string"==typeof n&&""!==n||(n="utf8");if(!$d.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var b=0|KV(h,n),c=Iu(b);h=c.write(h,n);h!==b&&(c=
c.slice(0,h));return c}(g,d);if(ArrayBuffer.isView(g))return nM(g);if(null==g)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(Ju(g,ArrayBuffer)||g&&Ju(g.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(Ju(g,SharedArrayBuffer)||g&&Ju(g.buffer,SharedArrayBuffer)))return p8(g,d,k);if("number"==typeof g)throw new TypeError('The "value" argument must not be of type number. Received type number');
var e=g.valueOf&&g.valueOf();if(null!=e&&e!==g)return $d.from(e,d,k);if(e=function(h){if($d.isBuffer(h)){var n=0|oM(h.length),b=Iu(n);return 0===b.length||h.copy(b,0,0,n),b}if(void 0!==h.length)return(n="number"!=typeof h.length)||(n=h.length,n=n!=n),n?Iu(0):nM(h);if("Buffer"===h.type&&Array.isArray(h.data))return nM(h.data)}(g))return e;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof g[Symbol.toPrimitive])return $d.from(g[Symbol.toPrimitive]("string"),d,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof g);}function LV(g){if("number"!=typeof g)throw new TypeError('"size" argument must be of type number');if(0>g)throw new RangeError('The value "'+g+'" is invalid for option "size"');}function mM(g){return LV(g),Iu(0>g?0:0|oM(g))}function nM(g){for(var d=0>g.length?0:0|oM(g.length),k=Iu(d),e=0;e<d;e+=1)k[e]=255&g[e];return k}function p8(g,d,k){if(0>d||g.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<d+(k||0))throw new RangeError('"length" is outside of buffer bounds');
var e;return e=void 0===d&&void 0===k?new Uint8Array(g):void 0===k?new Uint8Array(g,d):new Uint8Array(g,d,k),Object.setPrototypeOf(e,$d.prototype),e}function oM(g){if(2147483647<=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return 0|g}function KV(g,d){if($d.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||Ju(g,ArrayBuffer))return g.byteLength;if("string"!=typeof g)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof g);var k=g.length,e=2<arguments.length&&!0===arguments[2];if(!e&&0===k)return 0;for(var h=!1;;)switch(d){case "ascii":case "latin1":case "binary":return k;case "utf8":case "utf-8":return pM(g).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*k;case "hex":return k>>>1;case "base64":return MV(g).length;default:if(h)return e?-1:pM(g).length;d=(""+d).toLowerCase();h=!0}}function q8(g,d,k){var e=!1;if(((void 0===d||0>d)&&(d=0),d>this.length)||((void 0===k||k>this.length)&&
(k=this.length),0>=k)||(k>>>=0)<=(d>>>=0))return"";for(g||(g="utf8");;)switch(g){case "hex":g=this.length;(!d||0>d)&&(d=0);(!k||0>k||k>g)&&(k=g);for(g="";d<k;++d)g+=r8[this[d]];return g;case "utf8":case "utf-8":return NV(this,d,k);case "ascii":g="";for(k=Math.min(this.length,k);d<k;++d)g+=String.fromCharCode(127&this[d]);return g;case "latin1":case "binary":g="";for(k=Math.min(this.length,k);d<k;++d)g+=String.fromCharCode(this[d]);return g;case "base64":return 0===d&&k===this.length?qM.fromByteArray(this):
qM.fromByteArray(this.slice(d,k));case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=this.slice(d,k);k="";for(g=0;g<d.length;g+=2)k+=String.fromCharCode(d[g]+256*d[g+1]);return k;default:if(e)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase();e=!0}}function ly(g,d,k){var e=g[d];g[d]=g[k];g[k]=e}function OV(g,d,k,e,h){if(0===g.length)return-1;"string"==typeof k?(e=k,k=0):2147483647<k?k=2147483647:-2147483648>k&&(k=-2147483648);var n=k=+k;if(n!=n&&(k=h?0:g.length-1),0>k&&(k=g.length+
k),k>=g.length){if(h)return-1;k=g.length-1}else if(0>k){if(!h)return-1;k=0}if("string"==typeof d&&(d=$d.from(d,e)),$d.isBuffer(d))return 0===d.length?-1:PV(g,d,k,e,h);if("number"==typeof d)return d&=255,"function"==typeof Uint8Array.prototype.indexOf?h?Uint8Array.prototype.indexOf.call(g,d,k):Uint8Array.prototype.lastIndexOf.call(g,d,k):PV(g,[d],k,e,h);throw new TypeError("val must be string, number or Buffer");}function PV(g,d,k,e,h){function n(a,f){return 1===b?a[f]:a.readUInt16BE(f*b)}var b=1,
c=g.length,l=d.length;if(void 0!==e&&("ucs2"===(e=String(e).toLowerCase())||"ucs-2"===e||"utf16le"===e||"utf-16le"===e)){if(2>g.length||2>d.length)return-1;b=2;c/=2;l/=2;k/=2}if(h)for(e=-1;k<c;k++)if(n(g,k)===n(d,-1===e?0:k-e)){if(-1===e&&(e=k),k-e+1===l)return e*b}else-1!==e&&(k-=k-e),e=-1;else for(k+l>c&&(k=c-l);0<=k;k--){c=!0;for(e=0;e<l;e++)if(n(g,k+e)!==n(d,e)){c=!1;break}if(c)return k}return-1}function QV(g,d,k,e){for(var h=[],n=0;n<d.length;++n)h.push(255&d.charCodeAt(n));return IG(h,g,k,e)}
function NV(g,d,k){k=Math.min(g.length,k);for(var e=[];d<k;){var h,n,b=g[d],c=null,l=239<b?4:223<b?3:191<b?2:1;if(d+l<=k)switch(l){case 1:128>b&&(c=b);break;case 2:128==(192&(h=g[d+1]))&&127<(n=(31&b)<<6|63&h)&&(c=n);break;case 3:h=g[d+1];var a=g[d+2];128==(192&h)&&128==(192&a)&&2047<(n=(15&b)<<12|(63&h)<<6|63&a)&&(55296>n||57343<n)&&(c=n);break;case 4:h=g[d+1];a=g[d+2];var f=g[d+3];128==(192&h)&&128==(192&a)&&128==(192&f)&&65535<(n=(15&b)<<18|(63&h)<<12|(63&a)<<6|63&f)&&1114112>n&&(c=n)}null===c?
(c=65533,l=1):65535<c&&(c-=65536,e.push(c>>>10&1023|55296),c=56320|1023&c);e.push(c);d+=l}g=e.length;if(4096>=g)e=String.fromCharCode.apply(String,e);else{k="";for(h=0;h<g;)k+=String.fromCharCode.apply(String,e.slice(h,h+=4096));e=k}return e}function Ql(g,d,k){if(0!=g%1||0>g)throw new RangeError("offset is not uint");if(g+d>k)throw new RangeError("Trying to access beyond buffer length");}function lo(g,d,k,e,h,n){if(!$d.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');
if(d>h||d<n)throw new RangeError('"value" argument is out of bounds');if(k+e>g.length)throw new RangeError("Index out of range");}function RV(g,d,k,e,h,n){if(k+e>g.length)throw new RangeError("Index out of range");if(0>k)throw new RangeError("Index out of range");}function SV(g,d,k,e,h){return d=+d,k>>>=0,h||RV(g,0,k,4),rA.write(g,d,k,e,23,4),k+4}function TV(g,d,k,e,h){return d=+d,k>>>=0,h||RV(g,0,k,8),rA.write(g,d,k,e,52,8),k+8}function pM(g,d){var k;d=d||1/0;for(var e=g.length,h=null,n=[],b=0;b<
e;++b){if(55295<(k=g.charCodeAt(b))&&57344>k){if(!h){if(56319<k){-1<(d-=3)&&n.push(239,191,189);continue}if(b+1===e){-1<(d-=3)&&n.push(239,191,189);continue}h=k;continue}if(56320>k){-1<(d-=3)&&n.push(239,191,189);h=k;continue}k=65536+(h-55296<<10|k-56320)}else h&&-1<(d-=3)&&n.push(239,191,189);if(h=null,128>k){if(0>--d)break;n.push(k)}else if(2048>k){if(0>(d-=2))break;n.push(k>>6|192,63&k|128)}else if(65536>k){if(0>(d-=3))break;n.push(k>>12|224,k>>6&63|128,63&k|128)}else{if(!(1114112>k))throw Error("Invalid code point");
if(0>(d-=4))break;n.push(k>>18|240,k>>12&63|128,k>>6&63|128,63&k|128)}}return n}function MV(g){return qM.toByteArray(function(d){if(2>(d=(d=d.split("=")[0]).trim().replace(s8,"")).length)return"";for(;0!=d.length%4;)d+="=";return d}(g))}function IG(g,d,k,e){for(var h=0;h<e&&!(h+k>=d.length||h>=g.length);++h)d[h+k]=g[h];return h}function Ju(g,d){return g instanceof d||null!=g&&null!=g.constructor&&null!=g.constructor.name&&g.constructor.name===d.name}function UV(g,d){for(var k in g)d[k]=g[k]}function my(g,
d,k){return Zs(g,d,k)}function RC(g){switch(this.encoding=function(d){var k=function(e){if(!e)return"utf8";for(var h;;)switch(e){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return e;default:if(h)return;e=(""+e).toLowerCase();h=!0}}(d);if("string"!=typeof k&&(rM.isEncoding===VV||!VV(d)))throw Error("Unknown encoding: "+d);return k||d}(g),this.encoding){case "utf16le":this.text=
t8;this.end=u8;g=4;break;case "utf8":this.fillLast=v8;g=4;break;case "base64":this.text=w8;this.end=x8;g=3;break;default:return this.write=y8,this.end=z8,void 0}this.lastTotal=this.lastNeed=0;this.lastChar=rM.allocUnsafe(g)}function sM(g){return 127>=g?0:6==g>>5?2:14==g>>4?3:30==g>>3?4:2==g>>6?-1:-2}function v8(g){var d=this.lastTotal-this.lastNeed;a:if(128!=(192&g[0]))var k=(this.lastNeed=0,"\ufffd");else{if(1<this.lastNeed&&1<g.length){if(128!=(192&g[1])){k=(this.lastNeed=1,"\ufffd");break a}if(2<
this.lastNeed&&2<g.length&&128!=(192&g[2])){k=(this.lastNeed=2,"\ufffd");break a}}k=void 0}return void 0!==k?k:this.lastNeed<=g.length?(g.copy(this.lastChar,d,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(g.copy(this.lastChar,d,0,g.length),this.lastNeed-=g.length,void 0)}function t8(g,d){if(0==(g.length-d)%2){if(d=g.toString("utf16le",d)){var k=d.charCodeAt(d.length-1);if(55296<=k&&56319>=k)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=
g[g.length-1],d.slice(0,-1)}return d}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",d,g.length-1)}function u8(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):g}function w8(g,d){var k=(g.length-d)%3;return 0===k?g.toString("base64",d):(this.lastNeed=3-k,this.lastTotal=3,1===k?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",
d,g.length-k))}function x8(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function y8(g){return g.toString(this.encoding)}function z8(g){return g&&g.length?this.write(g):""}function Yp(g,d,k){k||(k=Error);var e=function(h,n,b){return b.call(this,"string"==typeof d?d:d(h,n,b))||this};$jscomp.inherits(e,k);e.prototype.name=k.name;e.prototype.code=g;WV[g]=e}function XV(g,d){if(Array.isArray(g)){var k=g.length;return g=g.map(function(e){return String(e)}),
2<k?"one of "+d+" "+g.slice(0,k-1).join(", ")+", or "+g[k-1]:2===k?"one of "+d+" "+g[0]+" or "+g[1]:"of "+d+" "+g[0]}return"of "+d+" "+String(g)}function tM(g){try{if(!uM.localStorage)return!1}catch(d){return!1}g=uM.localStorage[g];return null!=g&&"true"===String(g).toLowerCase()}function YV(g,d){var k=Object.keys(g);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(g);d&&(e=e.filter(function(h){return Object.getOwnPropertyDescriptor(g,h).enumerable}));k.push.apply(k,e)}return k}
function A8(g,d){for(var k=0;k<d.length;k++){var e=d[k];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(g,e.key,e)}}function ZV(g,d){vM(g,d);JG(g)}function JG(g){g._writableState&&!g._writableState.emitClose||g._readableState&&!g._readableState.emitClose||g.emit("close")}function vM(g,d){g.emit("error",d)}function B8(){}function jw(g,d,k){return d in g?Object.defineProperty(g,d,{value:k,enumerable:!0,configurable:!0,writable:!0}):g[d]=k,g}function kw(g,
d){return{value:g,done:d}}function C8(g){var d=g[lw];if(null!==d){var k=g[ny].read();null!==k&&(g[oy]=null,g[lw]=null,g[py]=null,d(kw(k,!1)))}}function D8(g){$V.nextTick(C8,g)}function aW(){function g(oa,ba,qa){z=z||SC();oa=oa||{};"boolean"!=typeof qa&&(qa=ba instanceof z);this.objectMode=!!oa.objectMode;qa&&(this.objectMode=this.objectMode||!!oa.readableObjectMode);this.highWaterMark=Q(this,oa,"readableHighWaterMark",qa);this.buffer=new D;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=
null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==oa.emitClose;this.autoDestroy=!!oa.autoDestroy;this.destroyed=!1;this.defaultEncoding=oa.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;oa.encoding&&(W||(W=sA.StringDecoder),this.decoder=new W(oa.encoding),this.encoding=oa.encoding)}function d(oa){if(z=z||SC(),!(this instanceof
d))return new d(oa);this._readableState=new g(oa,this,this instanceof z);this.readable=!0;oa&&("function"==typeof oa.read&&(this._read=oa.read),"function"==typeof oa.destroy&&(this._destroy=oa.destroy));C.call(this)}function k(oa,ba,qa,Ga,ua){L("readableAddChunk",ba);var H,M=oa._readableState;if(null===ba)M.reading=!1,function(R,ca){if(L("onEofChunk"),!ca.ended){if(ca.decoder){var Z=ca.decoder.end();Z&&Z.length&&(ca.buffer.push(Z),ca.length+=ca.objectMode?1:Z.length)}ca.ended=!0;ca.sync?n(R):(ca.needReadable=
!1,ca.emittedReadable||(ca.emittedReadable=!0,b(R)))}}(oa,M);else if(ua||(H=function(R,ca){var Z;var Aa=ca;G.isBuffer(Aa)||Aa instanceof F||"string"==typeof ca||void 0===ca||R.objectMode||(Z=new O("chunk",["string","Buffer","Uint8Array"],ca));return Z}(M,ba)),H)bb(oa,H);else if(M.objectMode||ba&&0<ba.length)if("string"==typeof ba||M.objectMode||Object.getPrototypeOf(ba)===G.prototype||(ba=G.from(ba)),Ga)M.endEmitted?bb(oa,new ha):e(oa,M,ba,!0);else if(M.ended)bb(oa,new ja);else{if(M.destroyed)return!1;
M.reading=!1;M.decoder&&!qa?(ba=M.decoder.write(ba),M.objectMode||0!==ba.length?e(oa,M,ba,!1):c(oa,M)):e(oa,M,ba,!1)}else Ga||(M.reading=!1,c(oa,M));return!M.ended&&(M.length<M.highWaterMark||0===M.length)}function e(oa,ba,qa,Ga){ba.flowing&&0===ba.length&&!ba.sync?(ba.awaitDrain=0,oa.emit("data",qa)):(ba.length+=ba.objectMode?1:qa.length,Ga?ba.buffer.unshift(qa):ba.buffer.push(qa),ba.needReadable&&n(oa));c(oa,ba)}function h(oa,ba){if(0>=oa||0===ba.length&&ba.ended)oa=0;else if(ba.objectMode)oa=1;
else if(oa!=oa)oa=ba.flowing&&ba.length?ba.buffer.head.data.length:ba.length;else{if(oa>ba.highWaterMark){var qa=oa;var Ga=(1073741824<=qa?qa=1073741824:(qa--,qa|=qa>>>1,qa|=qa>>>2,qa|=qa>>>4,qa|=qa>>>8,qa|=qa>>>16,qa++),qa);ba.highWaterMark=Ga}oa=oa<=ba.length?oa:ba.ended?ba.length:(ba.needReadable=!0,0)}return oa}function n(oa){var ba=oa._readableState;L("emitReadable",ba.needReadable,ba.emittedReadable);ba.needReadable=!1;ba.emittedReadable||(L("emitReadable",ba.flowing),ba.emittedReadable=!0,
A.nextTick(b,oa))}function b(oa){var ba=oa._readableState;L("emitReadable_",ba.destroyed,ba.length,ba.ended);ba.destroyed||!ba.length&&!ba.ended||(oa.emit("readable"),ba.emittedReadable=!1);ba.needReadable=!ba.flowing&&!ba.ended&&ba.length<=ba.highWaterMark;q(oa)}function c(oa,ba){ba.readingMore||(ba.readingMore=!0,A.nextTick(l,oa,ba))}function l(oa,ba){for(;!ba.reading&&!ba.ended&&(ba.length<ba.highWaterMark||ba.flowing&&0===ba.length);){var qa=ba.length;if(L("maybeReadMore read 0"),oa.read(0),qa===
ba.length)break}ba.readingMore=!1}function a(oa){var ba=oa._readableState;ba.readableListening=0<oa.listenerCount("readable");ba.resumeScheduled&&!ba.paused?ba.flowing=!0:0<oa.listenerCount("data")&&oa.resume()}function f(oa){L("readable nexttick read 0");oa.read(0)}function m(oa,ba){L("resume",ba.reading);ba.reading||oa.read(0);ba.resumeScheduled=!1;oa.emit("resume");q(oa);ba.flowing&&!ba.reading&&oa.read(0)}function q(oa){var ba=oa._readableState;for(L("flow",ba.flowing);ba.flowing&&null!==oa.read(););
}function r(oa,ba){return 0===ba.length?null:(ba.objectMode?qa=ba.buffer.shift():!oa||oa>=ba.length?(qa=ba.decoder?ba.buffer.join(""):1===ba.buffer.length?ba.buffer.first():ba.buffer.concat(ba.length),ba.buffer.clear()):qa=ba.buffer.consume(oa,ba.decoder),qa);var qa}function u(oa){var ba=oa._readableState;L("endReadable",ba.endEmitted);ba.endEmitted||(ba.ended=!0,A.nextTick(v,ba,oa))}function v(oa,ba){if(L("endReadableNT",oa.endEmitted,oa.length),!oa.endEmitted&&0===oa.length&&(oa.endEmitted=!0,ba.readable=
!1,ba.emit("end"),oa.autoDestroy))oa=ba._writableState,(!oa||oa.autoDestroy&&oa.finished)&&ba.destroy()}function y(oa,ba){for(var qa=0,Ga=oa.length;qa<Ga;qa++)if(oa[qa]===ba)return qa;return-1}if(bW)return wM;bW=!0;var z,A=Nh;wM=d;d.ReadableState=g;$s.EventEmitter;var C=KG,G=$g.Buffer,F=E8.Uint8Array||function(){},N=Jg;var L=N&&N.debuglog?N.debuglog("stream"):function(){};var W,la,wa,D=F8;N=cW;var Q=dW.getHighWaterMark,J=Ar.codes,O=J.ERR_INVALID_ARG_TYPE,ja=J.ERR_STREAM_PUSH_AFTER_EOF,X=J.ERR_METHOD_NOT_IMPLEMENTED,
ha=J.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;jh(d,C);var bb=N.errorOrDestroy,pb=["error","close","destroy","pause","resume"];Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(oa){this._readableState&&(this._readableState.destroyed=oa)}});d.prototype.destroy=N.destroy;d.prototype._undestroy=N.undestroy;d.prototype._destroy=function(oa,ba){ba(oa)};d.prototype.push=function(oa,ba){var qa,Ga=this._readableState;
return Ga.objectMode?qa=!0:"string"==typeof oa&&((ba=ba||Ga.defaultEncoding)!==Ga.encoding&&(oa=G.from(oa,ba),ba=""),qa=!0),k(this,oa,ba,!1,qa)};d.prototype.unshift=function(oa){return k(this,oa,null,!0,!1)};d.prototype.isPaused=function(){return!1===this._readableState.flowing};d.prototype.setEncoding=function(oa){W||(W=sA.StringDecoder);oa=new W(oa);this._readableState.decoder=oa;this._readableState.encoding=this._readableState.decoder.encoding;for(var ba=this._readableState.buffer.head,qa="";null!==
ba;)qa+=oa.write(ba.data),ba=ba.next;return this._readableState.buffer.clear(),""!==qa&&this._readableState.buffer.push(qa),this._readableState.length=qa.length,this};return d.prototype.read=function(oa){L("read",oa);oa=parseInt(oa,10);var ba=this._readableState,qa=oa;if(0!==oa&&(ba.emittedReadable=!1),0===oa&&ba.needReadable&&((0!==ba.highWaterMark?ba.length>=ba.highWaterMark:0<ba.length)||ba.ended))return L("read: emitReadable",ba.length,ba.ended),0===ba.length&&ba.ended?u(this):n(this),null;if(0===
(oa=h(oa,ba))&&ba.ended)return 0===ba.length&&u(this),null;var Ga,ua=ba.needReadable;return L("need readable",ua),(0===ba.length||ba.length-oa<ba.highWaterMark)&&L("length less than watermark",ua=!0),ba.ended||ba.reading?L("reading or ended",!1):ua&&(L("do read"),ba.reading=!0,ba.sync=!0,0===ba.length&&(ba.needReadable=!0),this._read(ba.highWaterMark),ba.sync=!1,ba.reading||(oa=h(qa,ba))),null===(Ga=0<oa?r(oa,ba):null)?(ba.needReadable=ba.length<=ba.highWaterMark,oa=0):(ba.length-=oa,ba.awaitDrain=
0),0===ba.length&&(ba.ended||(ba.needReadable=!0),qa!==oa&&ba.ended&&u(this)),null!==Ga&&this.emit("data",Ga),Ga},d.prototype._read=function(oa){bb(this,new X("_read()"))},d.prototype.pipe=function(oa,ba){function qa(da,ea){L("onunpipe");da===Z&&ea&&!1===ea.hasUnpiped&&(ea.hasUnpiped=!0,L("cleanup"),oa.removeListener("close",M),oa.removeListener("finish",R),oa.removeListener("drain",db),oa.removeListener("error",H),oa.removeListener("unpipe",qa),Z.removeListener("end",Ga),Z.removeListener("end",ca),
Z.removeListener("data",ua),S=!0,!Aa.awaitDrain||oa._writableState&&!oa._writableState.needDrain||db())}function Ga(){L("onend");oa.end()}function ua(da){L("ondata");da=oa.write(da);L("dest.write",da);!1===da&&((1===Aa.pipesCount&&Aa.pipes===oa||1<Aa.pipesCount&&-1!==y(Aa.pipes,oa))&&!S&&(L("false write response, pause",Aa.awaitDrain),Aa.awaitDrain++),Z.pause())}function H(da){L("onerror",da);ca();oa.removeListener("error",H);0===oa.listeners("error").length&&bb(oa,da)}function M(){oa.removeListener("finish",
R);ca()}function R(){L("onfinish");oa.removeListener("close",M);ca()}function ca(){L("unpipe");Z.unpipe(oa)}var Z=this,Aa=this._readableState;switch(Aa.pipesCount){case 0:Aa.pipes=oa;break;case 1:Aa.pipes=[Aa.pipes,oa];break;default:Aa.pipes.push(oa)}Aa.pipesCount+=1;L("pipe count=%d opts=%j",Aa.pipesCount,ba);ba=ba&&!1===ba.end||oa===A.stdout||oa===A.stderr?ca:Ga;Aa.endEmitted?A.nextTick(ba):Z.once("end",ba);oa.on("unpipe",qa);var db=function(da){return function(){var ea=da._readableState;L("pipeOnDrain",
ea.awaitDrain);ea.awaitDrain&&ea.awaitDrain--;0===ea.awaitDrain&&da.listeners("data").length&&(ea.flowing=!0,q(da))}}(Z);oa.on("drain",db);var S=!1;return Z.on("data",ua),function(da,ea,Pa){if("function"==typeof da.prependListener)return da.prependListener(ea,Pa);da._events&&da._events[ea]?Array.isArray(da._events[ea])?da._events[ea].unshift(Pa):da._events[ea]=[Pa,da._events[ea]]:da.on(ea,Pa)}(oa,"error",H),oa.once("close",M),oa.once("finish",R),oa.emit("pipe",Z),Aa.flowing||(L("pipe resume"),Z.resume()),
oa},d.prototype.unpipe=function(oa){var ba=this._readableState,qa={hasUnpiped:!1};if(0===ba.pipesCount)return this;if(1===ba.pipesCount)return oa&&oa!==ba.pipes||(oa||(oa=ba.pipes),ba.pipes=null,ba.pipesCount=0,ba.flowing=!1,oa&&oa.emit("unpipe",this,qa)),this;if(!oa){oa=ba.pipes;qa=ba.pipesCount;ba.pipes=null;ba.pipesCount=0;ba.flowing=!1;for(ba=0;ba<qa;ba++)oa[ba].emit("unpipe",this,{hasUnpiped:!1});return this}var Ga=y(ba.pipes,oa);return-1===Ga||(ba.pipes.splice(Ga,1),--ba.pipesCount,1===ba.pipesCount&&
(ba.pipes=ba.pipes[0]),oa.emit("unpipe",this,qa)),this},d.prototype.on=function(oa,ba){ba=C.prototype.on.call(this,oa,ba);var qa=this._readableState;return"data"===oa?(qa.readableListening=0<this.listenerCount("readable"),!1!==qa.flowing&&this.resume()):"readable"===oa&&(qa.endEmitted||qa.readableListening||(qa.readableListening=qa.needReadable=!0,qa.flowing=!1,qa.emittedReadable=!1,L("on readable",qa.length,qa.reading),qa.length?n(this):qa.reading||A.nextTick(f,this))),ba},d.prototype.addListener=
d.prototype.on,d.prototype.removeListener=function(oa,ba){ba=C.prototype.removeListener.call(this,oa,ba);return"readable"===oa&&A.nextTick(a,this),ba},d.prototype.removeAllListeners=function(oa){var ba=C.prototype.removeAllListeners.apply(this,arguments);return"readable"!==oa&&void 0!==oa||A.nextTick(a,this),ba},d.prototype.resume=function(){var oa=this._readableState;oa.flowing||(L("resume"),oa.flowing=!oa.readableListening,oa.resumeScheduled||(oa.resumeScheduled=!0,A.nextTick(m,this,oa)));return oa.paused=
!1,this},d.prototype.pause=function(){return L("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(L("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},d.prototype.wrap=function(oa){var ba=this,qa=this._readableState,Ga=!1,ua;for(ua in oa.on("end",function(){if(L("wrapped end"),qa.decoder&&!qa.ended){var H=qa.decoder.end();H&&H.length&&ba.push(H)}ba.push(null)}),oa.on("data",function(H){(L("wrapped data"),qa.decoder&&
(H=qa.decoder.write(H)),qa.objectMode&&null==H)||(qa.objectMode||H&&H.length)&&(ba.push(H)||(Ga=!0,oa.pause()))}),oa)void 0===this[ua]&&"function"==typeof oa[ua]&&(this[ua]=function(H){return function(){return oa[H].apply(oa,arguments)}}(ua));for(ua=0;ua<pb.length;ua++)oa.on(pb[ua],this.emit.bind(this,pb[ua]));return this._read=function(H){L("wrapped _read",H);Ga&&(Ga=!1,oa.resume())},this},"function"==typeof Symbol&&(d.prototype[Symbol.asyncIterator]=function(){return void 0===la&&(la=G8),la(this)}),
Object.defineProperty(d.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(d.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(d.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(oa){this._readableState&&(this._readableState.flowing=oa)}}),d._fromList=r,Object.defineProperty(d.prototype,
"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(d.from=function(oa,ba){return void 0===wa&&(wa=eW),wa(d,oa,ba)}),wM}function H8(){function g(J){var O=this;this.entry=this.next=null;this.finish=function(){var ja=O.entry;for(O.entry=null;ja;){var X=ja.callback;J.pendingcb--;X(void 0);ja=ja.next}J.corkedRequestsFree.next=O;!0}}function d(){}function k(J,O,ja){f=f||SC();J=J||{};"boolean"!=typeof ja&&(ja=O instanceof f);this.objectMode=!!J.objectMode;
ja&&(this.objectMode=this.objectMode||!!J.writableObjectMode);this.highWaterMark=A(this,J,"writableHighWaterMark",ja);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==J.decodeStrings;this.defaultEncoding=J.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(X){!function(ha,bb){var pb=ha._writableState,oa=pb.sync,ba=pb.writecb;if("function"!=typeof ba)throw new N;
(function(qa){qa.writing=!1;qa.writecb=null;qa.length-=qa.writelen;qa.writelen=0}(pb),bb)?!function(qa,Ga,ua,H,M){--Ga.pendingcb;ua?(m.nextTick(M,H),m.nextTick(a,qa,Ga),qa._writableState.errorEmitted=!0,Q(qa,H)):(M(H),qa._writableState.errorEmitted=!0,Q(qa,H),a(qa,Ga))}(ha,pb,oa,bb,ba):((bb=c(pb)||ha.destroyed)||pb.corked||pb.bufferProcessing||!pb.bufferedRequest||b(ha,pb),oa?m.nextTick(n,ha,pb,bb,ba):n(ha,pb,bb,ba))}(O,X)};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=
null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==J.emitClose;this.autoDestroy=!!J.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function e(J){var O=this instanceof(f=f||SC());if(!O&&!y.call(e,this))return new e(J);this._writableState=new k(J,this,O);this.writable=!0;J&&("function"==typeof J.write&&(this._write=J.write),"function"==typeof J.writev&&(this._writev=J.writev),"function"==typeof J.destroy&&(this._destroy=J.destroy),"function"==
typeof J.final&&(this._final=J.final));r.call(this)}function h(J,O,ja,X,ha,bb,pb){O.writelen=X;O.writecb=pb;O.writing=!0;O.sync=!0;O.destroyed?O.onwrite(new W("write")):ja?J._writev(ha,O.onwrite):J._write(ha,bb,O.onwrite);O.sync=!1}function n(J,O,ja,X){ja||(0===O.length&&O.needDrain&&(O.needDrain=!1,J.emit("drain")),!0);O.pendingcb--;X();a(J,O)}function b(J,O){O.bufferProcessing=!0;var ja=O.bufferedRequest;if(J._writev&&ja&&ja.next){var X=Array(O.bufferedRequestCount),ha=O.corkedRequestsFree;ha.entry=
ja;for(var bb=0,pb=!0;ja;)X[bb]=ja,ja.isBuf||(pb=!1),ja=ja.next,bb+=1;X.allBuffers=pb;h(J,O,!0,O.length,X,"",ha.finish);O.pendingcb++;O.lastBufferedRequest=null;ha.next?(O.corkedRequestsFree=ha.next,ha.next=null):O.corkedRequestsFree=new g(O);O.bufferedRequestCount=0}else{for(;ja&&(X=ja.chunk,h(J,O,!1,O.objectMode?1:X.length,X,ja.encoding,ja.callback),ja=ja.next,O.bufferedRequestCount--,!O.writing););null===ja&&(O.lastBufferedRequest=null)}O.bufferedRequest=ja;O.bufferProcessing=!1}function c(J){return J.ending&&
0===J.length&&null===J.bufferedRequest&&!J.finished&&!J.writing}function l(J,O){J._final(function(ja){O.pendingcb--;ja&&Q(J,ja);O.prefinished=!0;J.emit("prefinish");a(J,O)})}function a(J,O){var ja=c(O),X;if(X=ja)O.prefinished||O.finalCalled||("function"!=typeof J._final||O.destroyed?(O.prefinished=!0,J.emit("prefinish")):(O.pendingcb++,O.finalCalled=!0,m.nextTick(l,J,O))),X=(!0,0===O.pendingcb&&(O.finished=!0,J.emit("finish"),O.autoDestroy));X&&(O=J._readableState,(!O||O.autoDestroy&&O.endEmitted)&&
J.destroy());return ja}if(fW)return xM;fW=!0;var f,m=Nh;xM=e;e.WritableState=k;var q={deprecate:gW},r=KG,u=$g.Buffer,v=I8.Uint8Array||function(){},y,z=cW,A=dW.getHighWaterMark,C=Ar.codes,G=C.ERR_INVALID_ARG_TYPE,F=C.ERR_METHOD_NOT_IMPLEMENTED,N=C.ERR_MULTIPLE_CALLBACK,L=C.ERR_STREAM_CANNOT_PIPE,W=C.ERR_STREAM_DESTROYED,la=C.ERR_STREAM_NULL_VALUES,wa=C.ERR_STREAM_WRITE_AFTER_END,D=C.ERR_UNKNOWN_ENCODING,Q=z.errorOrDestroy;return jh(e,r),k.prototype.getBuffer=function(){for(var J=this.bufferedRequest,
O=[];J;)O.push(J),J=J.next;return O},function(){try{Object.defineProperty(k.prototype,"buffer",{get:q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(J){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(e,Symbol.hasInstance,{value:function(J){return!!y.call(this,J)||this===e&&J&&J._writableState instanceof
k}})):y=function(J){return J instanceof this},e.prototype.pipe=function(){Q(this,new L)},e.prototype.write=function(J,O,ja){var X,ha=this._writableState,bb=!1,pb=!ha.objectMode&&(X=J,u.isBuffer(X)||X instanceof v);return pb&&!u.isBuffer(J)&&(J=u.from(J)),"function"==typeof O&&(ja=O,O=null),pb?O="buffer":O||(O=ha.defaultEncoding),"function"!=typeof ja&&(ja=d),ha.ending?function(oa,ba){var qa=new wa;Q(oa,qa);m.nextTick(ba,qa)}(this,ja):(pb||function(oa,ba,qa,Ga){var ua;return null===qa?ua=new la:"string"==
typeof qa||ba.objectMode||(ua=new G("chunk",["string","Buffer"],qa)),!ua||(Q(oa,ua),m.nextTick(Ga,ua),!1)}(this,ha,J,ja))&&(ha.pendingcb++,bb=function(oa,ba,qa,Ga,ua,H){if(!qa){var M=Ga;ba.objectMode||!1===ba.decodeStrings||"string"!=typeof M||(M=u.from(M,ua));Ga!==M&&(qa=!0,ua="buffer",Ga=M)}var R=ba.objectMode?1:Ga.length;ba.length+=R;(M=ba.length<ba.highWaterMark)||(ba.needDrain=!0);ba.writing||ba.corked?(oa=ba.lastBufferedRequest,ba.lastBufferedRequest={chunk:Ga,encoding:ua,isBuf:qa,callback:H,
next:null},oa?oa.next=ba.lastBufferedRequest:ba.bufferedRequest=ba.lastBufferedRequest,ba.bufferedRequestCount+=1):h(oa,ba,!1,R,Ga,ua,H);return M}(this,ha,pb,J,O,ja)),bb},e.prototype.cork=function(){this._writableState.corked++},e.prototype.uncork=function(){var J=this._writableState;J.corked&&(J.corked--,J.writing||J.corked||J.bufferProcessing||!J.bufferedRequest||b(this,J))},e.prototype.setDefaultEncoding=function(J){if("string"==typeof J&&(J=J.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((J+
"").toLowerCase())))throw new D(J);return this._writableState.defaultEncoding=J,this},Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),e.prototype._write=function(J,O,ja){ja(new F("_write()"))},e.prototype._writev=null,e.prototype.end=function(J,O,ja){var X=this._writableState;
"function"==typeof J?(ja=J,J=null,O=null):"function"==typeof O&&(ja=O,O=null);null!=J&&this.write(J,O);X.corked&&(X.corked=1,this.uncork());X.ending||(J=ja,X.ending=!0,a(this,X),J&&(X.finished?m.nextTick(J):this.once("finish",J)),X.ended=!0,this.writable=!1);return this},Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&
this._writableState.destroyed},set:function(J){this._writableState&&(this._writableState.destroyed=J)}}),e.prototype.destroy=z.destroy,e.prototype._undestroy=z.undestroy,e.prototype._destroy=function(J,O){O(J)},xM}function SC(){function g(a){if(!(this instanceof g))return new g(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||
e.nextTick(k,this)}function k(a){a.end()}if(hW)return yM;hW=!0;var e=Nh,h=Object.keys||function(a){var f=[],m;for(m in a)f.push(m);return f};yM=g;var n=aW(),b=H8();jh(g,n);h=h(b.prototype);for(var c=0;c<h.length;c++){var l=h[c];g.prototype[l]||(g.prototype[l]=b.prototype[l])}return Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&
this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),
yM}function J8(){}function iW(g,d){var k=Object.keys(g);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(g);d&&(e=e.filter(function(h){return Object.getOwnPropertyDescriptor(g,h).enumerable}));k.push.apply(k,e)}return k}function K8(g,d){for(var k=0;k<d.length;k++){var e=d[k];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(g,e.key,e)}}function jW(g,d){zM(g,d);LG(g)}function LG(g){g._writableState&&!g._writableState.emitClose||g._readableState&&
!g._readableState.emitClose||g.emit("close")}function zM(g,d){g.emit("error",d)}function mw(g,d,k){return d in g?Object.defineProperty(g,d,{value:k,enumerable:!0,configurable:!0,writable:!0}):g[d]=k,g}function nw(g,d){return{value:g,done:d}}function L8(g){var d=g[ow];if(null!==d){var k=g[qy].read();null!==k&&(g[ry]=null,g[ow]=null,g[sy]=null,d(nw(k,!1)))}}function M8(g){kW.nextTick(L8,g)}function N8(){function g(oa,ba,qa){z=z||MG();oa=oa||{};"boolean"!=typeof qa&&(qa=ba instanceof z);this.objectMode=
!!oa.objectMode;qa&&(this.objectMode=this.objectMode||!!oa.readableObjectMode);this.highWaterMark=Q(this,oa,"readableHighWaterMark",qa);this.buffer=new D;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==oa.emitClose;this.autoDestroy=!!oa.autoDestroy;this.destroyed=!1;this.defaultEncoding=oa.defaultEncoding||
"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;oa.encoding&&(W||(W=sA.StringDecoder),this.decoder=new W(oa.encoding),this.encoding=oa.encoding)}function d(oa){if(z=z||MG(),!(this instanceof d))return new d(oa);this._readableState=new g(oa,this,this instanceof z);this.readable=!0;oa&&("function"==typeof oa.read&&(this._read=oa.read),"function"==typeof oa.destroy&&(this._destroy=oa.destroy));C.call(this)}function k(oa,ba,qa,Ga,ua){L("readableAddChunk",ba);var H,M=oa._readableState;
if(null===ba)M.reading=!1,function(R,ca){if(L("onEofChunk"),!ca.ended){if(ca.decoder){var Z=ca.decoder.end();Z&&Z.length&&(ca.buffer.push(Z),ca.length+=ca.objectMode?1:Z.length)}ca.ended=!0;ca.sync?n(R):(ca.needReadable=!1,ca.emittedReadable||(ca.emittedReadable=!0,b(R)))}}(oa,M);else if(ua||(H=function(R,ca){var Z;var Aa=ca;G.isBuffer(Aa)||Aa instanceof F||"string"==typeof ca||void 0===ca||R.objectMode||(Z=new O("chunk",["string","Buffer","Uint8Array"],ca));return Z}(M,ba)),H)bb(oa,H);else if(M.objectMode||
ba&&0<ba.length)if("string"==typeof ba||M.objectMode||Object.getPrototypeOf(ba)===G.prototype||(ba=G.from(ba)),Ga)M.endEmitted?bb(oa,new ha):e(oa,M,ba,!0);else if(M.ended)bb(oa,new ja);else{if(M.destroyed)return!1;M.reading=!1;M.decoder&&!qa?(ba=M.decoder.write(ba),M.objectMode||0!==ba.length?e(oa,M,ba,!1):c(oa,M)):e(oa,M,ba,!1)}else Ga||(M.reading=!1,c(oa,M));return!M.ended&&(M.length<M.highWaterMark||0===M.length)}function e(oa,ba,qa,Ga){ba.flowing&&0===ba.length&&!ba.sync?(ba.awaitDrain=0,oa.emit("data",
qa)):(ba.length+=ba.objectMode?1:qa.length,Ga?ba.buffer.unshift(qa):ba.buffer.push(qa),ba.needReadable&&n(oa));c(oa,ba)}function h(oa,ba){if(0>=oa||0===ba.length&&ba.ended)oa=0;else if(ba.objectMode)oa=1;else if(oa!=oa)oa=ba.flowing&&ba.length?ba.buffer.head.data.length:ba.length;else{if(oa>ba.highWaterMark){var qa=oa;var Ga=(1073741824<=qa?qa=1073741824:(qa--,qa|=qa>>>1,qa|=qa>>>2,qa|=qa>>>4,qa|=qa>>>8,qa|=qa>>>16,qa++),qa);ba.highWaterMark=Ga}oa=oa<=ba.length?oa:ba.ended?ba.length:(ba.needReadable=
!0,0)}return oa}function n(oa){var ba=oa._readableState;L("emitReadable",ba.needReadable,ba.emittedReadable);ba.needReadable=!1;ba.emittedReadable||(L("emitReadable",ba.flowing),ba.emittedReadable=!0,A.nextTick(b,oa))}function b(oa){var ba=oa._readableState;L("emitReadable_",ba.destroyed,ba.length,ba.ended);ba.destroyed||!ba.length&&!ba.ended||(oa.emit("readable"),ba.emittedReadable=!1);ba.needReadable=!ba.flowing&&!ba.ended&&ba.length<=ba.highWaterMark;q(oa)}function c(oa,ba){ba.readingMore||(ba.readingMore=
!0,A.nextTick(l,oa,ba))}function l(oa,ba){for(;!ba.reading&&!ba.ended&&(ba.length<ba.highWaterMark||ba.flowing&&0===ba.length);){var qa=ba.length;if(L("maybeReadMore read 0"),oa.read(0),qa===ba.length)break}ba.readingMore=!1}function a(oa){var ba=oa._readableState;ba.readableListening=0<oa.listenerCount("readable");ba.resumeScheduled&&!ba.paused?ba.flowing=!0:0<oa.listenerCount("data")&&oa.resume()}function f(oa){L("readable nexttick read 0");oa.read(0)}function m(oa,ba){L("resume",ba.reading);ba.reading||
oa.read(0);ba.resumeScheduled=!1;oa.emit("resume");q(oa);ba.flowing&&!ba.reading&&oa.read(0)}function q(oa){var ba=oa._readableState;for(L("flow",ba.flowing);ba.flowing&&null!==oa.read(););}function r(oa,ba){return 0===ba.length?null:(ba.objectMode?qa=ba.buffer.shift():!oa||oa>=ba.length?(qa=ba.decoder?ba.buffer.join(""):1===ba.buffer.length?ba.buffer.first():ba.buffer.concat(ba.length),ba.buffer.clear()):qa=ba.buffer.consume(oa,ba.decoder),qa);var qa}function u(oa){var ba=oa._readableState;L("endReadable",
ba.endEmitted);ba.endEmitted||(ba.ended=!0,A.nextTick(v,ba,oa))}function v(oa,ba){if(L("endReadableNT",oa.endEmitted,oa.length),!oa.endEmitted&&0===oa.length&&(oa.endEmitted=!0,ba.readable=!1,ba.emit("end"),oa.autoDestroy))oa=ba._writableState,(!oa||oa.autoDestroy&&oa.finished)&&ba.destroy()}function y(oa,ba){for(var qa=0,Ga=oa.length;qa<Ga;qa++)if(oa[qa]===ba)return qa;return-1}if(lW)return AM;lW=!0;var z,A=Nh;AM=d;d.ReadableState=g;$s.EventEmitter;var C=KG,G=$g.Buffer,F=O8.Uint8Array||function(){},
N=Jg;var L=N&&N.debuglog?N.debuglog("stream"):function(){};var W,la,wa,D=P8;N=mW;var Q=nW.getHighWaterMark,J=Ar.codes,O=J.ERR_INVALID_ARG_TYPE,ja=J.ERR_STREAM_PUSH_AFTER_EOF,X=J.ERR_METHOD_NOT_IMPLEMENTED,ha=J.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;jh(d,C);var bb=N.errorOrDestroy,pb=["error","close","destroy","pause","resume"];Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(oa){this._readableState&&
(this._readableState.destroyed=oa)}});d.prototype.destroy=N.destroy;d.prototype._undestroy=N.undestroy;d.prototype._destroy=function(oa,ba){ba(oa)};d.prototype.push=function(oa,ba){var qa,Ga=this._readableState;return Ga.objectMode?qa=!0:"string"==typeof oa&&((ba=ba||Ga.defaultEncoding)!==Ga.encoding&&(oa=G.from(oa,ba),ba=""),qa=!0),k(this,oa,ba,!1,qa)};d.prototype.unshift=function(oa){return k(this,oa,null,!0,!1)};d.prototype.isPaused=function(){return!1===this._readableState.flowing};d.prototype.setEncoding=
function(oa){W||(W=sA.StringDecoder);oa=new W(oa);this._readableState.decoder=oa;this._readableState.encoding=this._readableState.decoder.encoding;for(var ba=this._readableState.buffer.head,qa="";null!==ba;)qa+=oa.write(ba.data),ba=ba.next;return this._readableState.buffer.clear(),""!==qa&&this._readableState.buffer.push(qa),this._readableState.length=qa.length,this};return d.prototype.read=function(oa){L("read",oa);oa=parseInt(oa,10);var ba=this._readableState,qa=oa;if(0!==oa&&(ba.emittedReadable=
!1),0===oa&&ba.needReadable&&((0!==ba.highWaterMark?ba.length>=ba.highWaterMark:0<ba.length)||ba.ended))return L("read: emitReadable",ba.length,ba.ended),0===ba.length&&ba.ended?u(this):n(this),null;if(0===(oa=h(oa,ba))&&ba.ended)return 0===ba.length&&u(this),null;var Ga,ua=ba.needReadable;return L("need readable",ua),(0===ba.length||ba.length-oa<ba.highWaterMark)&&L("length less than watermark",ua=!0),ba.ended||ba.reading?L("reading or ended",!1):ua&&(L("do read"),ba.reading=!0,ba.sync=!0,0===ba.length&&
(ba.needReadable=!0),this._read(ba.highWaterMark),ba.sync=!1,ba.reading||(oa=h(qa,ba))),null===(Ga=0<oa?r(oa,ba):null)?(ba.needReadable=ba.length<=ba.highWaterMark,oa=0):(ba.length-=oa,ba.awaitDrain=0),0===ba.length&&(ba.ended||(ba.needReadable=!0),qa!==oa&&ba.ended&&u(this)),null!==Ga&&this.emit("data",Ga),Ga},d.prototype._read=function(oa){bb(this,new X("_read()"))},d.prototype.pipe=function(oa,ba){function qa(da,ea){L("onunpipe");da===Z&&ea&&!1===ea.hasUnpiped&&(ea.hasUnpiped=!0,L("cleanup"),oa.removeListener("close",
M),oa.removeListener("finish",R),oa.removeListener("drain",db),oa.removeListener("error",H),oa.removeListener("unpipe",qa),Z.removeListener("end",Ga),Z.removeListener("end",ca),Z.removeListener("data",ua),S=!0,!Aa.awaitDrain||oa._writableState&&!oa._writableState.needDrain||db())}function Ga(){L("onend");oa.end()}function ua(da){L("ondata");da=oa.write(da);L("dest.write",da);!1===da&&((1===Aa.pipesCount&&Aa.pipes===oa||1<Aa.pipesCount&&-1!==y(Aa.pipes,oa))&&!S&&(L("false write response, pause",Aa.awaitDrain),
Aa.awaitDrain++),Z.pause())}function H(da){L("onerror",da);ca();oa.removeListener("error",H);0===oa.listeners("error").length&&bb(oa,da)}function M(){oa.removeListener("finish",R);ca()}function R(){L("onfinish");oa.removeListener("close",M);ca()}function ca(){L("unpipe");Z.unpipe(oa)}var Z=this,Aa=this._readableState;switch(Aa.pipesCount){case 0:Aa.pipes=oa;break;case 1:Aa.pipes=[Aa.pipes,oa];break;default:Aa.pipes.push(oa)}Aa.pipesCount+=1;L("pipe count=%d opts=%j",Aa.pipesCount,ba);ba=ba&&!1===
ba.end||oa===A.stdout||oa===A.stderr?ca:Ga;Aa.endEmitted?A.nextTick(ba):Z.once("end",ba);oa.on("unpipe",qa);var db=function(da){return function(){var ea=da._readableState;L("pipeOnDrain",ea.awaitDrain);ea.awaitDrain&&ea.awaitDrain--;0===ea.awaitDrain&&da.listeners("data").length&&(ea.flowing=!0,q(da))}}(Z);oa.on("drain",db);var S=!1;return Z.on("data",ua),function(da,ea,Pa){if("function"==typeof da.prependListener)return da.prependListener(ea,Pa);da._events&&da._events[ea]?Array.isArray(da._events[ea])?
da._events[ea].unshift(Pa):da._events[ea]=[Pa,da._events[ea]]:da.on(ea,Pa)}(oa,"error",H),oa.once("close",M),oa.once("finish",R),oa.emit("pipe",Z),Aa.flowing||(L("pipe resume"),Z.resume()),oa},d.prototype.unpipe=function(oa){var ba=this._readableState,qa={hasUnpiped:!1};if(0===ba.pipesCount)return this;if(1===ba.pipesCount)return oa&&oa!==ba.pipes||(oa||(oa=ba.pipes),ba.pipes=null,ba.pipesCount=0,ba.flowing=!1,oa&&oa.emit("unpipe",this,qa)),this;if(!oa){oa=ba.pipes;qa=ba.pipesCount;ba.pipes=null;
ba.pipesCount=0;ba.flowing=!1;for(ba=0;ba<qa;ba++)oa[ba].emit("unpipe",this,{hasUnpiped:!1});return this}var Ga=y(ba.pipes,oa);return-1===Ga||(ba.pipes.splice(Ga,1),--ba.pipesCount,1===ba.pipesCount&&(ba.pipes=ba.pipes[0]),oa.emit("unpipe",this,qa)),this},d.prototype.on=function(oa,ba){ba=C.prototype.on.call(this,oa,ba);var qa=this._readableState;return"data"===oa?(qa.readableListening=0<this.listenerCount("readable"),!1!==qa.flowing&&this.resume()):"readable"===oa&&(qa.endEmitted||qa.readableListening||
(qa.readableListening=qa.needReadable=!0,qa.flowing=!1,qa.emittedReadable=!1,L("on readable",qa.length,qa.reading),qa.length?n(this):qa.reading||A.nextTick(f,this))),ba},d.prototype.addListener=d.prototype.on,d.prototype.removeListener=function(oa,ba){ba=C.prototype.removeListener.call(this,oa,ba);return"readable"===oa&&A.nextTick(a,this),ba},d.prototype.removeAllListeners=function(oa){var ba=C.prototype.removeAllListeners.apply(this,arguments);return"readable"!==oa&&void 0!==oa||A.nextTick(a,this),
ba},d.prototype.resume=function(){var oa=this._readableState;oa.flowing||(L("resume"),oa.flowing=!oa.readableListening,oa.resumeScheduled||(oa.resumeScheduled=!0,A.nextTick(m,this,oa)));return oa.paused=!1,this},d.prototype.pause=function(){return L("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(L("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},d.prototype.wrap=function(oa){var ba=this,qa=this._readableState,
Ga=!1,ua;for(ua in oa.on("end",function(){if(L("wrapped end"),qa.decoder&&!qa.ended){var H=qa.decoder.end();H&&H.length&&ba.push(H)}ba.push(null)}),oa.on("data",function(H){(L("wrapped data"),qa.decoder&&(H=qa.decoder.write(H)),qa.objectMode&&null==H)||(qa.objectMode||H&&H.length)&&(ba.push(H)||(Ga=!0,oa.pause()))}),oa)void 0===this[ua]&&"function"==typeof oa[ua]&&(this[ua]=function(H){return function(){return oa[H].apply(oa,arguments)}}(ua));for(ua=0;ua<pb.length;ua++)oa.on(pb[ua],this.emit.bind(this,
pb[ua]));return this._read=function(H){L("wrapped _read",H);Ga&&(Ga=!1,oa.resume())},this},"function"==typeof Symbol&&(d.prototype[Symbol.asyncIterator]=function(){return void 0===la&&(la=Q8),la(this)}),Object.defineProperty(d.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(d.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(d.prototype,
"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(oa){this._readableState&&(this._readableState.flowing=oa)}}),d._fromList=r,Object.defineProperty(d.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(d.from=function(oa,ba){return void 0===wa&&(wa=eW),wa(d,oa,ba)}),AM}function oW(){function g(J){var O=this;this.entry=this.next=null;this.finish=function(){var ja=O.entry;for(O.entry=
null;ja;){var X=ja.callback;J.pendingcb--;X(void 0);ja=ja.next}J.corkedRequestsFree.next=O;!0}}function d(){}function k(J,O,ja){f=f||MG();J=J||{};"boolean"!=typeof ja&&(ja=O instanceof f);this.objectMode=!!J.objectMode;ja&&(this.objectMode=this.objectMode||!!J.writableObjectMode);this.highWaterMark=A(this,J,"writableHighWaterMark",ja);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==J.decodeStrings;this.defaultEncoding=J.defaultEncoding||
"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(X){!function(ha,bb){var pb=ha._writableState,oa=pb.sync,ba=pb.writecb;if("function"!=typeof ba)throw new N;(function(qa){qa.writing=!1;qa.writecb=null;qa.length-=qa.writelen;qa.writelen=0}(pb),bb)?!function(qa,Ga,ua,H,M){--Ga.pendingcb;ua?(m.nextTick(M,H),m.nextTick(a,qa,Ga),qa._writableState.errorEmitted=!0,Q(qa,H)):(M(H),qa._writableState.errorEmitted=!0,Q(qa,H),a(qa,Ga))}(ha,pb,oa,bb,
ba):((bb=c(pb)||ha.destroyed)||pb.corked||pb.bufferProcessing||!pb.bufferedRequest||b(ha,pb),oa?m.nextTick(n,ha,pb,bb,ba):n(ha,pb,bb,ba))}(O,X)};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==J.emitClose;this.autoDestroy=!!J.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function e(J){var O=this instanceof(f=f||MG());if(!O&&!y.call(e,this))return new e(J);this._writableState=
new k(J,this,O);this.writable=!0;J&&("function"==typeof J.write&&(this._write=J.write),"function"==typeof J.writev&&(this._writev=J.writev),"function"==typeof J.destroy&&(this._destroy=J.destroy),"function"==typeof J.final&&(this._final=J.final));r.call(this)}function h(J,O,ja,X,ha,bb,pb){O.writelen=X;O.writecb=pb;O.writing=!0;O.sync=!0;O.destroyed?O.onwrite(new W("write")):ja?J._writev(ha,O.onwrite):J._write(ha,bb,O.onwrite);O.sync=!1}function n(J,O,ja,X){ja||(0===O.length&&O.needDrain&&(O.needDrain=
!1,J.emit("drain")),!0);O.pendingcb--;X();a(J,O)}function b(J,O){O.bufferProcessing=!0;var ja=O.bufferedRequest;if(J._writev&&ja&&ja.next){var X=Array(O.bufferedRequestCount),ha=O.corkedRequestsFree;ha.entry=ja;for(var bb=0,pb=!0;ja;)X[bb]=ja,ja.isBuf||(pb=!1),ja=ja.next,bb+=1;X.allBuffers=pb;h(J,O,!0,O.length,X,"",ha.finish);O.pendingcb++;O.lastBufferedRequest=null;ha.next?(O.corkedRequestsFree=ha.next,ha.next=null):O.corkedRequestsFree=new g(O);O.bufferedRequestCount=0}else{for(;ja&&(X=ja.chunk,
h(J,O,!1,O.objectMode?1:X.length,X,ja.encoding,ja.callback),ja=ja.next,O.bufferedRequestCount--,!O.writing););null===ja&&(O.lastBufferedRequest=null)}O.bufferedRequest=ja;O.bufferProcessing=!1}function c(J){return J.ending&&0===J.length&&null===J.bufferedRequest&&!J.finished&&!J.writing}function l(J,O){J._final(function(ja){O.pendingcb--;ja&&Q(J,ja);O.prefinished=!0;J.emit("prefinish");a(J,O)})}function a(J,O){var ja=c(O),X;if(X=ja)O.prefinished||O.finalCalled||("function"!=typeof J._final||O.destroyed?
(O.prefinished=!0,J.emit("prefinish")):(O.pendingcb++,O.finalCalled=!0,m.nextTick(l,J,O))),X=(!0,0===O.pendingcb&&(O.finished=!0,J.emit("finish"),O.autoDestroy));X&&(O=J._readableState,(!O||O.autoDestroy&&O.endEmitted)&&J.destroy());return ja}if(pW)return BM;pW=!0;var f,m=Nh;BM=e;e.WritableState=k;var q={deprecate:gW},r=KG,u=$g.Buffer,v=R8.Uint8Array||function(){},y,z=mW,A=nW.getHighWaterMark,C=Ar.codes,G=C.ERR_INVALID_ARG_TYPE,F=C.ERR_METHOD_NOT_IMPLEMENTED,N=C.ERR_MULTIPLE_CALLBACK,L=C.ERR_STREAM_CANNOT_PIPE,
W=C.ERR_STREAM_DESTROYED,la=C.ERR_STREAM_NULL_VALUES,wa=C.ERR_STREAM_WRITE_AFTER_END,D=C.ERR_UNKNOWN_ENCODING,Q=z.errorOrDestroy;return jh(e,r),k.prototype.getBuffer=function(){for(var J=this.bufferedRequest,O=[];J;)O.push(J),J=J.next;return O},function(){try{Object.defineProperty(k.prototype,"buffer",{get:q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(J){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&
"function"==typeof Function.prototype[Symbol.hasInstance]?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(e,Symbol.hasInstance,{value:function(J){return!!y.call(this,J)||this===e&&J&&J._writableState instanceof k}})):y=function(J){return J instanceof this},e.prototype.pipe=function(){Q(this,new L)},e.prototype.write=function(J,O,ja){var X,ha=this._writableState,bb=!1,pb=!ha.objectMode&&(X=J,u.isBuffer(X)||X instanceof v);return pb&&!u.isBuffer(J)&&(J=u.from(J)),"function"==typeof O&&
(ja=O,O=null),pb?O="buffer":O||(O=ha.defaultEncoding),"function"!=typeof ja&&(ja=d),ha.ending?function(oa,ba){var qa=new wa;Q(oa,qa);m.nextTick(ba,qa)}(this,ja):(pb||function(oa,ba,qa,Ga){var ua;return null===qa?ua=new la:"string"==typeof qa||ba.objectMode||(ua=new G("chunk",["string","Buffer"],qa)),!ua||(Q(oa,ua),m.nextTick(Ga,ua),!1)}(this,ha,J,ja))&&(ha.pendingcb++,bb=function(oa,ba,qa,Ga,ua,H){if(!qa){var M=Ga;ba.objectMode||!1===ba.decodeStrings||"string"!=typeof M||(M=u.from(M,ua));Ga!==M&&
(qa=!0,ua="buffer",Ga=M)}var R=ba.objectMode?1:Ga.length;ba.length+=R;(M=ba.length<ba.highWaterMark)||(ba.needDrain=!0);ba.writing||ba.corked?(oa=ba.lastBufferedRequest,ba.lastBufferedRequest={chunk:Ga,encoding:ua,isBuf:qa,callback:H,next:null},oa?oa.next=ba.lastBufferedRequest:ba.bufferedRequest=ba.lastBufferedRequest,ba.bufferedRequestCount+=1):h(oa,ba,!1,R,Ga,ua,H);return M}(this,ha,pb,J,O,ja)),bb},e.prototype.cork=function(){this._writableState.corked++},e.prototype.uncork=function(){var J=this._writableState;
J.corked&&(J.corked--,J.writing||J.corked||J.bufferProcessing||!J.bufferedRequest||b(this,J))},e.prototype.setDefaultEncoding=function(J){if("string"==typeof J&&(J=J.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((J+"").toLowerCase())))throw new D(J);return this._writableState.defaultEncoding=J,this},Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),
Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),e.prototype._write=function(J,O,ja){ja(new F("_write()"))},e.prototype._writev=null,e.prototype.end=function(J,O,ja){var X=this._writableState;"function"==typeof J?(ja=J,J=null,O=null):"function"==typeof O&&(ja=O,O=null);null!=J&&this.write(J,O);X.corked&&(X.corked=1,this.uncork());X.ending||(J=ja,X.ending=!0,a(this,X),J&&(X.finished?m.nextTick(J):this.once("finish",
J)),X.ended=!0,this.writable=!1);return this},Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(J){this._writableState&&(this._writableState.destroyed=J)}}),e.prototype.destroy=z.destroy,e.prototype._undestroy=z.undestroy,e.prototype._destroy=function(J,O){O(J)},BM}function MG(){function g(a){if(!(this instanceof
g))return new g(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||e.nextTick(k,this)}function k(a){a.end()}if(qW)return CM;qW=!0;var e=Nh,h=Object.keys||function(a){var f=[],m;for(m in a)f.push(m);return f};CM=g;var n=N8(),b=oW();jh(g,n);h=h(b.prototype);for(var c=0;c<h.length;c++){var l=h[c];g.prototype[l]||(g.prototype[l]=
b.prototype[l])}return Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==
this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),CM}function S8(g,d){var k=this._transformState;k.transforming=!1;var e=k.writecb;if(null===e)return this.emit("error",new T8);k.writechunk=null;k.writecb=null;null!=d&&this.push(d);e(g);g=this._readableState;g.reading=!1;(g.needReadable||g.length<
g.highWaterMark)&&this._read(g.highWaterMark)}function at(g){if(!(this instanceof at))return new at(g);NG.call(this,g);this._transformState={afterTransform:S8.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;g&&("function"==typeof g.transform&&(this._transform=g.transform),"function"==typeof g.flush&&(this._flush=g.flush));this.on("prefinish",U8)}function U8(){var g=this;"function"!=typeof this._flush||
this._readableState.destroyed?rW(this,null,null):this._flush(function(d,k){rW(g,d,k)})}function rW(g,d,k){if(d)return g.emit("error",d);if(null!=k&&g.push(k),g._writableState.length)throw new V8;if(g._transformState.transforming)throw new W8;return g.push(null)}function TC(g){if(!(this instanceof TC))return new TC(g);sW.call(this,g)}function tW(g){if(g)throw g;}function X8(g,d,k,e){e=function(b){var c=!1;return function(){c||(c=!0,b.apply(void 0,arguments))}}(e);var h=!1;g.on("close",function(){h=
!0});void 0===DM&&(DM=EM);DM(g,{readable:d,writable:k},function(b){if(b)return e(b);h=!0;e()});var n=!1;return function(b){if(!h&&!n)return n=!0,g.setHeader&&"function"==typeof g.abort?g.abort():"function"==typeof g.destroy?g.destroy():(e(b||new Y8("pipe")),void 0)}}function uW(g){g()}function Z8(g,d){return g.pipe(d)}function Zp(){FM.call(this||GM)}function OG(){}function Ku(g){vW.call(this);this._block=PG.allocUnsafe(g);this._blockSize=g;this._blockOffset=0;this._length=[0,0,0,0];this._finalized=
!1}function tA(){wW.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878}function QG(g,d){return g<<d|g>>>32-d}function Ym(g,d,k,e,h,n,b){return QG(g+(d&k|~d&e)+h+n|0,b)+d|0}function Zm(g,d,k,e,h,n,b){return QG(g+(d&e|k&~e)+h+n|0,b)+d|0}function $m(g,d,k,e,h,n,b){return QG(g+(d^k^e)+h+n|0,b)+d|0}function an(g,d,k,e,h,n,b){return QG(g+(k^(d|~e))+h+n|0,b)+d|0}function uA(){xW.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;
this._e=3285377520}function $p(g,d){return g<<d|g>>>32-d}function Lu(g,d){(this||Ej)._block=yW.alloc(g);(this||Ej)._finalSize=d;(this||Ej)._blockSize=g;(this||Ej)._len=0}function vA(){this.init();(this||ah)._w=$8;zW.call(this||ah,64,56)}function UC(){this.init();(this||Yi)._w=a9;AW.call(this||Yi,64,56)}function VC(){this.init();(this||Zi)._w=b9;BW.call(this||Zi,64,56)}function RG(){this.init();(this||Rl)._w=c9;d9.call(this||Rl,64,56)}function wA(){this.init();(this||oe)._w=e9;CW.call(this||oe,128,
112)}function Sl(g,d){return g>>>0<d>>>0?1:0}function SG(){this.init();(this||Ei)._w=f9;g9.call(this||Ei,128,112)}function Tl(g){DW.call(this||jk);(this||jk).hashMode="string"==typeof g;(this||jk).hashMode?(this||jk)[g]=(this||jk)._finalOrDigest:(this||jk).final=(this||jk)._finalOrDigest;(this||jk)._final&&((this||jk).__final=(this||jk)._final,(this||jk)._final=null);(this||jk)._decoder=null;(this||jk)._encoding=null}function TG(g){EW.call(this,"digest");this._hash=g}function UG(g,d){FW.call(this,
"digest");"string"==typeof d&&(d=ty.from(d));this._alg=g;this._key=d;64<d.length?d=g(d):64>d.length&&(d=ty.concat([d,h9],64));g=this._ipad=ty.allocUnsafe(64);for(var k=this._opad=ty.allocUnsafe(64),e=0;64>e;e++)g[e]=54^d[e],k[e]=92^d[e];this._hash=[g]}function WC(g,d){GW.call(this,"digest");"string"==typeof d&&(d=XC.from(d));var k="sha512"===g||"sha384"===g?128:64;(this._alg=g,this._key=d,d.length>k)?d=("rmd160"===g?new HM:IM(g)).update(d).digest():d.length<k&&(d=XC.concat([d,i9],k));for(var e=this._ipad=
XC.allocUnsafe(k),h=this._opad=XC.allocUnsafe(k),n=0;n<k;n++)e[n]=54^d[n],h[n]=92^d[n];this._hash="rmd160"===g?new HM:IM(g);this._hash.update(e)}function HW(g,d){if("string"!=typeof g&&!j9.isBuffer(g))throw new TypeError(d+" must be a buffer or string");}function IW(g,d,k){var e=function(l){function a(f){return k9(l).update(f).digest()}return"rmd160"===l||"ripemd160"===l?function(f){return(new l9).update(f).digest()}:"md5"===l?m9:a}(g),h="sha512"===g||"sha384"===g?128:64;d.length>h?d=e(d):d.length<
h&&(d=Br.concat([d,n9],h));for(var n=Br.allocUnsafe(h+VG[g]),b=Br.allocUnsafe(h+VG[g]),c=0;c<h;c++)n[c]=54^d[c],b[c]=92^d[c];d=Br.allocUnsafe(h+k+4);n.copy(d,0,0,h);(this||Cr).ipad1=d;(this||Cr).ipad2=n;(this||Cr).opad=b;(this||Cr).alg=g;(this||Cr).blocksize=h;(this||Cr).hash=e;(this||Cr).size=VG[g]}function JW(g,d,k,e,h){return YC.importKey("raw",g,{name:"PBKDF2"},!1,["deriveBits"]).then(function(n){return YC.deriveBits({name:"PBKDF2",salt:d,iterations:k,hash:{name:h}},n,e<<3)}).then(function(n){return xA.from(n)})}
function KW(g,d){if(!g)throw Error(d||"Assertion failed");}function cp(g){this.options=g;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=Array(this.blockSize);this.bufferOff=0}function o9(){this.tmp=Array(2);this.keys=null}function aq(g){LW.call(this,g);var d=new o9;this._desState=d;this.deriveKeys(d,g.key)}function p9(g){q9.equal(g.length,8,"Invalid IV length");this.iv=Array(8);for(var d=0;d<this.iv.length;d++)this.iv[d]=g[d]}function r9(g,d){s9.equal(d.length,24,"Invalid key length");
var k=d.slice(0,8),e=d.slice(8,16);d=d.slice(16,24);this.ciphers="encrypt"===g?[pw.create({type:"encrypt",key:k}),pw.create({type:"decrypt",key:e}),pw.create({type:"encrypt",key:d})]:[pw.create({type:"decrypt",key:d}),pw.create({type:"encrypt",key:e}),pw.create({type:"decrypt",key:k})]}function bt(g){MW.call(this,g);this._edeState=new r9(this.type,this.options.key)}function WG(g){NW.call(this||XG);var d=g.mode.toLowerCase(),k=ZC[d];var e=g.decrypt?"decrypt":"encrypt";var h=g.key;uy.isBuffer(h)||(h=
uy.from(h));"des-ede"!==d&&"des-ede-cbc"!==d||(h=uy.concat([h,h.slice(0,8)]));g=g.iv;uy.isBuffer(g)||(g=uy.from(g));(this||XG)._des=k.create({key:h,iv:g,type:e})}function OW(g,d,k){var e=d.length,h=t9(d,g._cache);return g._cache=g._cache.slice(e),g._prev=$C.concat([g._prev,k?d:h]),h}function u9(g){return g._prev=g._cipher.encryptBlock(g._prev),g._prev}function JM(g){YG.isBuffer(g)||(g=YG.from(g));for(var d=g.length/4|0,k=Array(d),e=0;e<d;e++)k[e]=g.readUInt32BE(4*e);return k}function KM(g){for(;0<
g.length;g++)g[0]=0}function PW(g,d,k,e,h){var n=k[0],b=k[1],c=k[2];k=k[3];var l=g[0]^d[0],a=g[1]^d[1],f=g[2]^d[2];g=g[3]^d[3];for(var m=4,q=1;q<h;q++){var r=n[l>>>24]^b[a>>>16&255]^c[f>>>8&255]^k[255&g]^d[m++];var u=n[a>>>24]^b[f>>>16&255]^c[g>>>8&255]^k[255&l]^d[m++];var v=n[f>>>24]^b[g>>>16&255]^c[l>>>8&255]^k[255&a]^d[m++];var y=n[g>>>24]^b[l>>>16&255]^c[a>>>8&255]^k[255&f]^d[m++];l=r;a=u;f=v;g=y}return r=(e[l>>>24]<<24|e[a>>>16&255]<<16|e[f>>>8&255]<<8|e[255&g])^d[m++],u=(e[a>>>24]<<24|e[f>>>
16&255]<<16|e[g>>>8&255]<<8|e[255&l])^d[m++],v=(e[f>>>24]<<24|e[g>>>16&255]<<16|e[l>>>8&255]<<8|e[255&a])^d[m++],y=(e[g>>>24]<<24|e[l>>>16&255]<<16|e[a>>>8&255]<<8|e[255&f])^d[m++],[r>>>0,u>>>0,v>>>0,y>>>0]}function bq(g){(this||cq)._key=JM(g);this._reset()}function QW(g){var d=yA.allocUnsafe(16);return d.writeUInt32BE(g[0]>>>0,0),d.writeUInt32BE(g[1]>>>0,4),d.writeUInt32BE(g[2]>>>0,8),d.writeUInt32BE(g[3]>>>0,12),d}function aD(g){(this||sm).h=g;(this||sm).state=yA.alloc(16,0);(this||sm).cache=yA.allocUnsafe(0)}
function qw(g,d,k,e){RW.call(this||Kg);var h=mo.alloc(4,0);(this||Kg)._cipher=new v9.AES(d);var n=(this||Kg)._cipher.encryptBlock(h);(this||Kg)._ghash=new SW(n);d=this||Kg;h=k;if(12===h.length)d=(d._finID=mo.concat([h,mo.from([0,0,0,1])]),mo.concat([h,mo.from([0,0,0,2])]));else{k=new SW(n);n=h.length;var b=n%16;k.update(h);b&&(b=16-b,k.update(mo.alloc(b,0)));k.update(mo.alloc(8,0));h=8*n;n=mo.alloc(8);n.writeUIntBE(h,0,8);k.update(n);d._finID=k.state;d=mo.from(d._finID);d=(w9(d),d)}(this||Kg)._prev=
mo.from(d);(this||Kg)._cache=mo.allocUnsafe(0);(this||Kg)._secCache=mo.allocUnsafe(0);(this||Kg)._decrypt=e;(this||Kg)._alen=0;(this||Kg)._len=0;(this||Kg)._mode=g;(this||Kg)._authTag=null;(this||Kg)._called=!1}function bD(g,d,k,e){TW.call(this||Dr);(this||Dr)._cipher=new x9.AES(d);(this||Dr)._prev=LM.from(k);(this||Dr)._cache=LM.allocUnsafe(0);(this||Dr)._secCache=LM.allocUnsafe(0);(this||Dr)._decrypt=e;(this||Dr)._mode=g}function cD(g,d,k){UW.call(this||Fi);(this||Fi)._cache=new ZG;(this||Fi)._last=
void 0;(this||Fi)._cipher=new y9.AES(d);(this||Fi)._prev=zA.from(k);(this||Fi)._mode=g;(this||Fi)._autopadding=!0}function ZG(){(this||Fi).cache=zA.allocUnsafe(0)}function VW(g,d,k){g=WW[g.toLowerCase()];if(!g)throw new TypeError("invalid suite type");if("string"==typeof k&&(k=zA.from(k)),"GCM"!==g.mode&&k.length!==g.iv)throw new TypeError("invalid iv length "+k.length);if("string"==typeof d&&(d=zA.from(d)),d.length!==g.key/8)throw new TypeError("invalid key length "+d.length);return"stream"===g.type?
new z9(g.module,d,k,!0):"auth"===g.type?new A9(g.module,d,k,!0):new cD(g.module,d,k)}function dD(g,d,k){XW.call(this||nj);(this||nj)._cache=new $G;(this||nj)._cipher=new B9.AES(d);(this||nj)._prev=Mu.from(k);(this||nj)._mode=g;(this||nj)._autopadding=!0}function $G(){(this||nj).cache=Mu.allocUnsafe(0)}function YW(g,d,k){g=ZW[g.toLowerCase()];if(!g)throw new TypeError("invalid suite type");if("string"==typeof d&&(d=Mu.from(d)),d.length!==g.key/8)throw new TypeError("invalid key length "+d.length);
if("string"==typeof k&&(k=Mu.from(k)),"GCM"!==g.mode&&k.length!==g.iv)throw new TypeError("invalid iv length "+k.length);return"stream"===g.type?new C9(g.module,d,k):"auth"===g.type?new D9(g.module,d,k):new dD(g.module,d,k)}function MM(g,d,k){if(g=g.toLowerCase(),rw[g])return NM.createCipheriv(g,d,k);if(Nu[g])return new $W({key:d,iv:k,mode:g});throw new TypeError("invalid suite type");}function OM(g,d,k){if(g=g.toLowerCase(),rw[g])return NM.createDecipheriv(g,d,k);if(Nu[g])return new $W({key:d,iv:k,
mode:g,decrypt:!0});throw new TypeError("invalid suite type");}function sw(g){(this||aH).rand=g}function tw(g){(this||aX).rand=g||new E9.Rand}function PM(g){if(null!==QM)var d=QM;else{d=[2];for(var k=1,e=3;1048576>e;e+=2){for(var h=Math.ceil(Math.sqrt(e)),n=0;n<k&&d[n]<=h&&0!=e%d[n];n++);k!==n&&d[n]<=h||(d[k++]=e)}d=(QM=d,d)}for(k=0;k<d.length;k++)if(0===g.modn(d[k]))return 0===g.cmpn(d[k]);return!0}function RM(g){var d=bn.mont(g);return 0===SM.toRed(d).redPow(g.subn(1)).fromRed().cmpn(1)}function eD(g,
d){if(16>g)return new bn(2===d||5===d?[140,123]:[140,39]);var k,e;for(d=new bn(d);;){for(k=new bn(F9(Math.ceil(g/8)));k.bitLength()>g;)k.ishrn(1);if(k.isEven()&&k.iadd(G9),k.testn(1)||k.iadd(SM),d.cmp(SM)){if(!d.cmp(H9))for(;k.mod(I9).cmp(J9);)k.iadd(bX)}else for(;k.mod(K9).cmp(L9);)k.iadd(bX);if(PM(e=k.shrn(1))&&PM(k)&&RM(e)&&RM(k)&&cX.test(e)&&cX.test(k))return k}}function M9(g,d){return d=d||"utf8",ct.isBuffer(g)||(g=new ct(g,d)),(this||$h)._pub=new dq(g),this||$h}function N9(g,d){return d=d||
"utf8",ct.isBuffer(g)||(g=new ct(g,d)),(this||$h)._priv=new dq(g),this||$h}function Er(g,d,k){this.setGenerator(d);(this||$h).__prime=new dq(g);(this||$h)._prime=dq.mont((this||$h).__prime);(this||$h)._primeLen=g.length;(this||$h)._pub=void 0;(this||$h)._priv=void 0;(this||$h)._primeCode=void 0;k?((this||$h).setPublicKey=M9,(this||$h).setPrivateKey=N9):(this||$h)._primeCode=8}function bH(g,d){g=new ct(g.toArray());return d?g.toString(d):g}function cH(g,d){var k=dX(d);var e=k.toRed(uw.mont(d.modulus)).redPow(new uw(d.publicExponent)).fromRed();
k=k.invm(d.modulus);var h=d.modulus.byteLength();g=(uw.mont(d.modulus),(new uw(g)).mul(e).umod(d.modulus));var n=g.toRed(uw.mont(d.prime1)),b=g.toRed(uw.mont(d.prime2));e=d.coefficient;var c=d.prime1;g=d.prime2;n=n.redPow(d.exponent1);b=b.redPow(d.exponent2);n=n.fromRed();b=b.fromRed();e=n.isub(b).imul(e).umod(c);return e.imul(g),b.iadd(e),new O9(b.imul(k).umod(d.modulus).toArray(!1,h))}function dX(g){for(var d=g.modulus.byteLength(),k=new uw(eX(d));0<=k.cmp(g.modulus)||!k.umod(g.prime1)||!k.umod(g.prime2);)k=
new uw(eX(d));return k}function fX(g){return 1===g.length?"0"+g:g}function gX(g){for(var d="",k=0;k<g.length;k++)d+=fX(g[k].toString(16));return d}function vy(g,d){if(g instanceof vy)return g;this._importDER(g,d)||(P9(g.r&&g.s,"Signature without r or s"),this.r=new dH(g.r,16),this.s=new dH(g.s,16),void 0===g.recoveryParam?this.recoveryParam=null:this.recoveryParam=g.recoveryParam)}function Q9(){this.place=0}function TM(g,d){var k=g[d.place++];if(!(128&k))return k;k&=15;for(var e=0,h=0,n=d.place;h<
k;h++,n++)e<<=8,e|=g[n];return d.place=n,e}function hX(g){for(var d=0,k=g.length-1;!(g[d]||128&g[d+1])&&d<k;)d++;return 0===d?g:g.slice(d)}function UM(g,d){if(128>d)return g.push(d),void 0;var k=1+(Math.log(d)/Math.LN2>>>3);for(g.push(128|k);--k;)g.push(d>>>(k<<3)&255);g.push(d)}function iX(g){return(g>>>24|g>>>8&65280|g<<8&16711680|(255&g)<<24)>>>0}function jX(g){return 1===g.length?"0"+g:g}function kX(g){return 7===g.length?"0"+g:6===g.length?"00"+g:5===g.length?"000"+g:4===g.length?"0000"+g:3===
g.length?"00000"+g:2===g.length?"000000"+g:1===g.length?"0000000"+g:g}function eH(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}function eq(){if(!(this instanceof eq))return new eq;lX.call(this);this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,
4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];this.k=R9;this.W=Array(160)}function Fr(){if(!(this instanceof Fr))return new Fr;mX.call(this);this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];this.k=S9;this.W=Array(64)}function dt(){if(!(this instanceof dt))return new dt;nX.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.W=Array(80)}function Ou(){if(!(this instanceof
Ou))return new Ou;oX.call(this);this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}function Pu(){if(!(this instanceof Pu))return new Pu;pX.call(this);this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}function et(){if(!(this instanceof et))return new et;qX.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];
this.endian="little"}function rX(g,d,k,e){return 15>=g?d^k^e:31>=g?d&k|~d&e:47>=g?(d|~k)^e:63>=g?d&e|k&~e:d^(k|~e)}function AA(g,d,k){if(!(this instanceof AA))return new AA(g,d,k);this.Hash=g;this.blockSize=g.blockSize/8;this.outSize=g.outSize/8;this.outer=this.inner=null;this._init(T9.toArray(d,k))}function Qu(g){if(!(this instanceof Qu))return new Qu(g);this.hash=g.hash;this.predResist=!!g.predResist;this.outLen=this.hash.outSize;this.minEntropy=g.minEntropy||this.hash.hmacStrength;this.V=this.K=
this.reseedInterval=this._reseed=null;var d=wy.toArray(g.entropy,g.entropyEnc||"hex"),k=wy.toArray(g.nonce,g.nonceEnc||"hex");g=wy.toArray(g.pers,g.persEnc||"hex");sX(d.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._init(d,k,g)}function Gr(g,d){this.type=g;this.p=new xy(d.p,16);this.red=d.prime?xy.red(d.prime):xy.mont(this.p);this.zero=(new xy(0)).toRed(this.red);this.one=(new xy(1)).toRed(this.red);this.two=(new xy(2)).toRed(this.red);this.n=d.n&&new xy(d.n,
16);this.g=d.g&&this.pointFromJSON(d.g,d.gRed);this._wnafT1=Array(4);this._wnafT2=Array(4);this._wnafT3=Array(4);this._wnafT4=Array(4);this._bitLength=this.n?this.n.bitLength():0;g=this.n&&this.p.div(this.n);!g||0<g.cmpn(100)?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function fq(g,d){this.curve=g;this.type=d;this.precomputed=null}function gq(g){BA.call(this,"short",g);this.a=(new kk(g.a,16)).toRed(this.red);this.b=(new kk(g.b,16)).toRed(this.red);this.tinv=this.two.redInvm();
this.zeroA=0===this.a.fromRed().cmpn(0);this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3);this.endo=this._getEndomorphism(g);this._endoWnafT1=Array(4);this._endoWnafT2=Array(4)}function Ul(g,d,k,e){BA.BasePoint.call(this,g,"affine");null===d&&null===k?(this.x=null,this.y=null,this.inf=!0):(this.x=new kk(d,16),this.y=new kk(k,16),e&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),
this.inf=!1)}function tm(g,d,k,e){BA.BasePoint.call(this,g,"jacobian");null===d&&null===k&&null===e?(this.x=this.curve.one,this.y=this.curve.one,this.z=new kk(0)):(this.x=new kk(d,16),this.y=new kk(k,16),this.z=new kk(e,16));this.x.red||(this.x=this.x.toRed(this.curve.red));this.y.red||(this.y=this.y.toRed(this.curve.red));this.z.red||(this.z=this.z.toRed(this.curve.red));this.zOne=this.z===this.curve.one}function CA(g){fH.call(this,"mont",g);this.a=(new DA(g.a,16)).toRed(this.red);this.b=(new DA(g.b,
16)).toRed(this.red);this.i4=(new DA(4)).toRed(this.red).redInvm();this.two=(new DA(2)).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two))}function Vl(g,d,k){fH.BasePoint.call(this,g,"projective");null===d&&null===k?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new DA(d,16),this.z=new DA(k,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}function ft(g){this.extended=this.mOneA=(this.twisted=1!=(0|g.a))&&-1==(0|g.a);gH.call(this,
"edwards",g);this.a=(new Ru(g.a,16)).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=(new Ru(g.c,16)).toRed(this.red);this.c2=this.c.redSqr();this.d=(new Ru(g.d,16)).toRed(this.red);this.dd=this.d.redAdd(this.d);U9(!this.twisted||0===this.c.fromRed().cmpn(1));this.oneC=1==(0|g.c)}function wj(g,d,k,e,h){gH.BasePoint.call(this,g,"projective");null===d&&null===k&&null===e?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Ru(d,16),
this.y=new Ru(k,16),this.z=e?new Ru(e,16):this.curve.one,this.t=h&&new Ru(h,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}function tX(g){"short"===g.type?this.curve=new VM.short(g):"edwards"===
g.type?this.curve=new VM.edwards(g):this.curve=new VM.mont(g);this.g=this.curve.g;this.n=this.curve.n;this.hash=g.hash;uX(this.g.validate(),"Invalid curve");uX(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function vw(g,d){Object.defineProperty(WM,g,{configurable:!0,enumerable:!0,get:function(){var k=new tX(d);return Object.defineProperty(WM,g,{configurable:!0,enumerable:!0,value:k}),k}})}function Wl(g,d){this.ec=g;this.pub=this.priv=null;d.priv&&this._importPrivate(d.priv,d.privEnc);
d.pub&&this._importPublic(d.pub,d.pubEnc)}function hq(g){if(!(this instanceof hq))return new hq(g);"string"==typeof g&&(vX(XM.hasOwnProperty(g),"Unknown curve "+g),g=XM[g]);g instanceof XM.PresetCurve&&(g={curve:g});this.curve=g.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=g.curve.g;this.g.precompute(g.curve.n.bitLength()+1);this.hash=g.hash||g.curve.hash}function sl(g,d){this.eddsa=g;this._secret=wX(d.secret);g.isPoint(d.pub)?this._pub=d.pub:this._pubBytes=wX(d.pub)}
function ww(g,d){this.eddsa=g;"object"!=typeof d&&(d=V9(d));Array.isArray(d)&&(d={R:d.slice(0,g.encodingLength),S:d.slice(g.encodingLength)});W9(d.R&&d.S,"Signature without R or S");g.isPoint(d.R)&&(this._R=d.R);d.S instanceof X9&&(this._S=d.S);this._Rencoded=Array.isArray(d.R)?d.R:d.Rencoded;this._Sencoded=Array.isArray(d.S)?d.S:d.Sencoded}function no(g){if(Y9("ed25519"===g,"only tested with ed25519 so far"),!(this instanceof no))return new no(g);this.curve=g=Z9[g].curve;this.g=g.g;this.g.precompute(g.n.bitLength()+
1);this.pointClass=g.point().constructor;this.encodingLength=Math.ceil(g.n.bitLength()/8);this.hash=$9.sha512}function iq(g){(this||tl)._reporterState={obj:null,path:[],options:g||{},errors:[]}}function EA(g,d){(this||tl).path=g;this.rethrow(d)}function xX(){function g(n,b){if(e.call(this||rg,b),!h.isBuffer(n))return this.error("Input not Buffer"),void 0;(this||rg).base=n;(this||rg).offset=0;(this||rg).length=n.length}function d(n,b){if(Array.isArray(n))(this||rg).length=0,(this||rg).value=n.map(function(c){return c instanceof
d||(c=new d(c,b)),(this||rg).length+=c.length,c},this||rg);else if("number"==typeof n){if(!(0<=n&&255>=n))return b.error("non-byte EncoderBuffer value");(this||rg).value=n;(this||rg).length=1}else if("string"==typeof n)(this||rg).value=n,(this||rg).length=h.byteLength(n);else{if(!h.isBuffer(n))return b.error("Unsupported type: "+typeof n);(this||rg).value=n;(this||rg).length=n.length}}if(yX)return hH;yX=!0;var k=jh,e=fD().Reporter,h=$g.Buffer;return k(g,e),hH.DecoderBuffer=g,g.prototype.save=function(){return{offset:(this||
rg).offset,reporter:e.prototype.save.call(this||rg)}},g.prototype.restore=function(n){var b=new g((this||rg).base);return b.offset=n.offset,b.length=(this||rg).offset,(this||rg).offset=n.offset,e.prototype.restore.call(this||rg,n.reporter),b},g.prototype.isEmpty=function(){return(this||rg).offset===(this||rg).length},g.prototype.readUInt8=function(n){return(this||rg).offset+1<=(this||rg).length?(this||rg).base.readUInt8((this||rg).offset++,!0):this.error(n||"DecoderBuffer overrun")},g.prototype.skip=
function(n,b){if(!((this||rg).offset+n<=(this||rg).length))return this.error(b||"DecoderBuffer overrun");b=new g((this||rg).base);return b._reporterState=(this||rg)._reporterState,b.offset=(this||rg).offset,b.length=(this||rg).offset+n,(this||rg).offset+=n,b},g.prototype.raw=function(n){return(this||rg).base.slice(n?n.offset:(this||rg).offset,(this||rg).length)},hH.EncoderBuffer=d,d.prototype.join=function(n,b){return n||(n=new h((this||rg).length)),b||(b=0),0===(this||rg).length||(Array.isArray((this||
rg).value)?(this||rg).value.forEach(function(c){c.join(n,b);b+=c.length}):("number"==typeof(this||rg).value?n[b]=(this||rg).value:"string"==typeof(this||rg).value?n.write((this||rg).value,b):h.isBuffer((this||rg).value)&&(this||rg).value.copy(n,b),b+=(this||rg).length)),n},hH}function fD(){if(zX)return YM;zX=!0;var g=YM;return g.Reporter=AX.Reporter,g.DecoderBuffer=xX().DecoderBuffer,g.EncoderBuffer=xX().EncoderBuffer,g.Node=function(){function d(a,f){var m={};(this||Of)._baseState=m;m.enc=a;m.parent=
f||null;m.children=null;m.tag=null;m.args=null;m.reverseArgs=null;m.choice=null;m.optional=!1;m.any=!1;m.obj=!1;m.use=null;m.useDecoder=null;m.key=null;m.default=null;m.explicit=null;m.implicit=null;m.contains=null;m.parent||(m.children=[],this._wrap())}if(BX)return ZM;BX=!0;var k=fD().Reporter,e=fD().EncoderBuffer,h=fD().DecoderBuffer,n=jq,b="seq seqof set setof objid bool gentime utctime null_ enum int objDesc bitstr bmpstr charstr genstr graphstr ia5str iso646str numstr octstr printstr t61str unistr utf8str videostr".split(" "),
c="key obj use optional explicit implicit def choice any contains".split(" ").concat(b);ZM=d;var l="enc parent children tag args reverseArgs choice optional any obj use alteredUse key default explicit implicit contains".split(" ");return d.prototype.clone=function(){var a=(this||Of)._baseState,f={};l.forEach(function(q){f[q]=a[q]});var m=new (this||Of).constructor(f.parent);return m._baseState=f,m},d.prototype._wrap=function(){var a=(this||Of)._baseState;c.forEach(function(f){(this||Of)[f]=function(){var m=
new (this||Of).constructor(this||Of);return a.children.push(m),m[f].apply(m,arguments)}},this||Of)},d.prototype._init=function(a){var f=(this||Of)._baseState;n(null===f.parent);a.call(this||Of);f.children=f.children.filter(function(m){return m._baseState.parent===(this||Of)},this||Of);n.equal(f.children.length,1,"Root node can have only one child")},d.prototype._useArgs=function(a){var f=(this||Of)._baseState,m=a.filter(function(q){return q instanceof(this||Of).constructor},this||Of);a=a.filter(function(q){return!(q instanceof
(this||Of).constructor)},this||Of);0!==m.length&&(n(null===f.children),f.children=m,m.forEach(function(q){q._baseState.parent=this||Of},this||Of));0!==a.length&&(n(null===f.args),f.args=a,f.reverseArgs=a.map(function(q){if("object"!=typeof q||q.constructor!==Object)return q;var r={};return Object.keys(q).forEach(function(u){u==(0|u)&&(u|=0);r[q[u]]=u}),r}))},"_peekTag _decodeTag _use _decodeStr _decodeObjid _decodeTime _decodeNull _decodeInt _decodeBool _decodeList _encodeComposite _encodeStr _encodeObjid _encodeTime _encodeNull _encodeInt _encodeBool".split(" ").forEach(function(a){d.prototype[a]=
function(){throw Error(a+" not implemented for encoding: "+(this||Of)._baseState.enc);}}),b.forEach(function(a){d.prototype[a]=function(){var f=(this||Of)._baseState,m=Array.prototype.slice.call(arguments);return n(null===f.tag),f.tag=a,this._useArgs(m),this||Of}}),d.prototype.use=function(a){n(a);var f=(this||Of)._baseState;return n(null===f.use),f.use=a,this||Of},d.prototype.optional=function(){return(this||Of)._baseState.optional=!0,this||Of},d.prototype.def=function(a){var f=(this||Of)._baseState;
return n(null===f.default),f.default=a,f.optional=!0,this||Of},d.prototype.explicit=function(a){var f=(this||Of)._baseState;return n(null===f.explicit&&null===f.implicit),f.explicit=a,this||Of},d.prototype.implicit=function(a){var f=(this||Of)._baseState;return n(null===f.explicit&&null===f.implicit),f.implicit=a,this||Of},d.prototype.obj=function(){var a=(this||Of)._baseState,f=Array.prototype.slice.call(arguments);return a.obj=!0,0!==f.length&&this._useArgs(f),this||Of},d.prototype.key=function(a){var f=
(this||Of)._baseState;return n(null===f.key),f.key=a,this||Of},d.prototype.any=function(){return(this||Of)._baseState.any=!0,this||Of},d.prototype.choice=function(a){var f=(this||Of)._baseState;return n(null===f.choice),f.choice=a,this._useArgs(Object.keys(a).map(function(m){return a[m]})),this||Of},d.prototype.contains=function(a){var f=(this||Of)._baseState;return n(null===f.use),f.contains=a,this||Of},d.prototype._decode=function(a,f){var m=(this||Of)._baseState;if(null===m.parent)return a.wrapResult(m.children[0]._decode(a,
f));var q,r=m.default,u=!0,v=null;if(null!==m.key&&(v=a.enterKey(m.key)),m.optional){var y=null;if(null!==m.explicit?y=m.explicit:null!==m.implicit?y=m.implicit:null!==m.tag&&(y=m.tag),null!==y||m.any){if(u=this._peekTag(a,y,m.any),a.isError(u))return u}else{var z=a.save();try{null===m.choice?this._decodeGeneric(m.tag,a,f):this._decodeChoice(a,f),u=!0}catch(C){u=!1}a.restore(z)}}if(m.obj&&u&&(q=a.enterObject()),u){if(null!==m.explicit){y=this._decodeTag(a,m.explicit);if(a.isError(y))return y;a=y}y=
a.offset;if(null===m.use&&null===m.choice){m.any&&(z=a.save());var A=this._decodeTag(a,null!==m.implicit?m.implicit:m.tag,m.any);if(a.isError(A))return A;m.any?r=a.raw(z):a=A}if(f&&f.track&&null!==m.tag&&f.track(a.path(),y,a.length,"tagged"),f&&f.track&&null!==m.tag&&f.track(a.path(),a.offset,a.length,"content"),r=m.any?r:null===m.choice?this._decodeGeneric(m.tag,a,f):this._decodeChoice(a,f),a.isError(r))return r;(m.any||null!==m.choice||null===m.children||m.children.forEach(function(C){C._decode(a,
f)}),!m.contains||"octstr"!==m.tag&&"bitstr"!==m.tag)||(r=new h(r),r=this._getUse(m.contains,a._reporterState.obj)._decode(r,f))}return m.obj&&u&&(r=a.leaveObject(q)),null===m.key||null===r&&!0!==u?null!==v&&a.exitKey(v):a.leaveKey(v,m.key,r),r},d.prototype._decodeGeneric=function(a,f,m){var q=(this||Of)._baseState;return"seq"===a||"set"===a?null:"seqof"===a||"setof"===a?this._decodeList(f,a,q.args[0],m):/str$/.test(a)?this._decodeStr(f,a,m):"objid"===a&&q.args?this._decodeObjid(f,q.args[0],q.args[1],
m):"objid"===a?this._decodeObjid(f,null,null,m):"gentime"===a||"utctime"===a?this._decodeTime(f,a,m):"null_"===a?this._decodeNull(f,m):"bool"===a?this._decodeBool(f,m):"objDesc"===a?this._decodeStr(f,a,m):"int"===a||"enum"===a?this._decodeInt(f,q.args&&q.args[0],m):null!==q.use?this._getUse(q.use,f._reporterState.obj)._decode(f,m):f.error("unknown tag: "+a)},d.prototype._getUse=function(a,f){var m=(this||Of)._baseState;return m.useDecoder=this._use(a,f),n(null===m.useDecoder._baseState.parent),m.useDecoder=
m.useDecoder._baseState.children[0],m.implicit!==m.useDecoder._baseState.implicit&&(m.useDecoder=m.useDecoder.clone(),m.useDecoder._baseState.implicit=m.implicit),m.useDecoder},d.prototype._decodeChoice=function(a,f){var m=(this||Of)._baseState,q=null,r=!1;return Object.keys(m.choice).some(function(u){var v=a.save(),y=m.choice[u];try{var z=y._decode(a,f);if(a.isError(z))return!1;q={type:u,value:z};r=!0}catch(A){return a.restore(v),!1}return!0},this||Of),r?q:a.error("Choice not matched")},d.prototype._createEncoderBuffer=
function(a){return new e(a,(this||Of).reporter)},d.prototype._encode=function(a,f,m){var q=(this||Of)._baseState;if(null===q.default||q.default!==a)if(a=this._encodeValue(a,f,m),void 0!==a&&!this._skipDefault(a,f,m))return a},d.prototype._encodeValue=function(a,f,m){var q=(this||Of)._baseState;if(null===q.parent)return q.children[0]._encode(a,f||new k);var r=null;if((this||Of).reporter=f,q.optional&&void 0===a){if(null===q.default)return;a=q.default}var u=null,v=!1;if(q.any)r=this._createEncoderBuffer(a);
else if(q.choice)r=this._encodeChoice(a,f);else if(q.contains)u=this._getUse(q.contains,m)._encode(a,f),v=!0;else if(q.children)u=q.children.map(function(z){if("null_"===z._baseState.tag)return z._encode(null,f,a);if(null===z._baseState.key)return f.error("Child should have a key");var A=f.enterKey(z._baseState.key);if("object"!=typeof a)return f.error("Child expected, but input is not object");z=z._encode(a[z._baseState.key],f,a);return f.leaveKey(A),z},this||Of).filter(function(z){return z}),u=
this._createEncoderBuffer(u);else if("seqof"===q.tag||"setof"===q.tag){if(!q.args||1!==q.args.length)return f.error("Too many args for : "+q.tag);if(!Array.isArray(a))return f.error("seqof/setof, but data is not Array");u=this.clone();u._baseState.implicit=null;u=this._createEncoderBuffer(a.map(function(z){return this._getUse((this||Of)._baseState.args[0],a)._encode(z,f)},u))}else null!==q.use?r=this._getUse(q.use,m)._encode(a,f):(u=this._encodePrimitive(q.tag,a),v=!0);if(!q.any&&null===q.choice){m=
null!==q.implicit?q.implicit:q.tag;var y=null===q.implicit?"universal":"context";null===m?null===q.use&&f.error("Tag could be omitted only for .use()"):null===q.use&&(r=this._encodeComposite(m,v,y,u))}return null!==q.explicit&&(r=this._encodeComposite(q.explicit,!1,"context",r)),r},d.prototype._encodeChoice=function(a,f){var m=(this||Of)._baseState,q=m.choice[a.type];return q||n(!1,a.type+" not found in "+JSON.stringify(Object.keys(m.choice))),q._encode(a.value,f)},d.prototype._encodePrimitive=function(a,
f){var m=(this||Of)._baseState;if(/str$/.test(a))return this._encodeStr(f,a);if("objid"===a&&m.args)return this._encodeObjid(f,m.reverseArgs[0],m.args[1]);if("objid"===a)return this._encodeObjid(f,null,null);if("gentime"===a||"utctime"===a)return this._encodeTime(f,a);if("null_"===a)return this._encodeNull();if("int"===a||"enum"===a)return this._encodeInt(f,m.args&&m.reverseArgs[0]);if("bool"===a)return this._encodeBool(f);if("objDesc"===a)return this._encodeStr(f,a);throw Error("Unsupported tag: "+
a);},d.prototype._isNumstr=function(a){return/^[0-9 ]*$/.test(a)},d.prototype._isPrintstr=function(a){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(a)},ZM}(),YM}function CX(){if(DX)return $M;DX=!0;var g=$M;return g._reverse=function(d){var k={};return Object.keys(d).forEach(function(e){(0|e)==e&&(e|=0);k[d[e]]=e}),k},g.der=function(){if(EX)return xw;EX=!0;var d=CX();return xw.tagClass={0:"universal",1:"application",2:"context",3:"private"},xw.tagClassByName=d._reverse(xw.tagClass),xw.tag={0:"end",
1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},xw.tagByName=d._reverse(xw.tag),xw}(),$M}function FX(){function g(a){(this||yw).enc="der";(this||yw).name=a.name;(this||yw).entity=a;(this||yw).tree=new d;(this||yw).tree._init(a.body)}
function d(a){b.Node.call(this||yw,"der",a)}function k(a,f){var m=a.readUInt8(f);if(a.isError(m))return m;var q=l.tagClass[m>>6],r=0==(32&m);if(31==(31&m)){var u=m;for(m=0;128==(128&u);){if(u=a.readUInt8(f),a.isError(u))return u;m<<=7;m|=127&u}}else m&=31;return{cls:q,primitive:r,tag:m,tagStr:l.tag[m]}}function e(a,f,m){var q=a.readUInt8(m);if(a.isError(q))return q;if(!f&&128===q)return null;if(0==(128&q))return q;f=127&q;if(4<f)return a.error("length octect is too long");for(var r=q=0;r<f;r++){q<<=
8;var u=a.readUInt8(m);if(a.isError(u))return u;q|=u}return q}if(GX)return aN;GX=!0;var h=jh,n=iH(),b=n.base,c=n.bignum,l=n.constants.der;return aN=g,g.prototype.decode=function(a,f){return a instanceof b.DecoderBuffer||(a=new b.DecoderBuffer(a,f)),(this||yw).tree._decode(a,f)},h(d,b.Node),d.prototype._peekTag=function(a,f,m){if(a.isEmpty())return!1;var q=a.save(),r=k(a,'Failed to peek tag: "'+f+'"');return a.isError(r)?r:(a.restore(q),r.tag===f||r.tagStr===f||r.tagStr+"of"===f||m)},d.prototype._decodeTag=
function(a,f,m){var q=k(a,'Failed to decode tag of "'+f+'"');if(a.isError(q))return q;var r=e(a,q.primitive,'Failed to get length of "'+f+'"');if(a.isError(r))return r;if(!m&&q.tag!==f&&q.tagStr!==f&&q.tagStr+"of"!==f)return a.error('Failed to match tag: "'+f+'"');if(q.primitive||null!==r)return a.skip(r,'Failed to match body of: "'+f+'"');m=a.save();q=this._skipUntilEnd(a,'Failed to skip indefinite length body: "'+(this||yw).tag+'"');return a.isError(q)?q:(r=a.offset-m.offset,a.restore(m),a.skip(r,
'Failed to match body of: "'+f+'"'))},d.prototype._skipUntilEnd=function(a,f){for(;;){var m=k(a,f);if(a.isError(m))return m;var q,r=e(a,m.primitive,f);if(a.isError(r))return r;if(q=m.primitive||null!==r?a.skip(r):this._skipUntilEnd(a,f),a.isError(q))return q;if("end"===m.tagStr)break}},d.prototype._decodeList=function(a,f,m,q){for(f=[];!a.isEmpty();){var r=this._peekTag(a,"end");if(a.isError(r))return r;var u=m.decode(a,"der",q);if(a.isError(u)&&r)break;f.push(u)}return f},d.prototype._decodeStr=
function(a,f){if("bitstr"===f)return f=a.readUInt8(),a.isError(f)?f:{unused:f,data:a.raw()};if("bmpstr"===f){f=a.raw();if(1==f.length%2)return a.error("Decoding of string type: bmpstr length mismatch");a="";for(var m=0;m<f.length/2;m++)a+=String.fromCharCode(f.readUInt16BE(2*m));return a}return"numstr"===f?(f=a.raw().toString("ascii"),this._isNumstr(f)?f:a.error("Decoding of string type: numstr unsupported characters")):"octstr"===f||"objDesc"===f?a.raw():"printstr"===f?(f=a.raw().toString("ascii"),
this._isPrintstr(f)?f:a.error("Decoding of string type: printstr unsupported characters")):/str$/.test(f)?a.raw().toString():a.error("Decoding of string type: "+f+" unsupported")},d.prototype._decodeObjid=function(a,f,m){for(var q=[],r=0;!a.isEmpty();){var u=a.readUInt8();r<<=7;r|=127&u;0==(128&u)&&(q.push(r),r=0)}128&u&&q.push(r);a=q[0]/40|0;r=q[0]%40;if(m=m?q:[a,r].concat(q.slice(1)),f)q=f[m.join(" ")],void 0===q&&(q=f[m.join(".")]),void 0!==q&&(m=q);return m},d.prototype._decodeTime=function(a,
f){var m=a.raw().toString();if("gentime"===f){a=0|m.slice(0,4);f=0|m.slice(4,6);var q=0|m.slice(6,8),r=0|m.slice(8,10),u=0|m.slice(10,12);m=0|m.slice(12,14)}else{if("utctime"!==f)return a.error("Decoding "+f+" time is not supported yet");a=0|m.slice(0,2);f=0|m.slice(2,4);q=0|m.slice(4,6);r=0|m.slice(6,8);u=0|m.slice(8,10);m=0|m.slice(10,12);a=70>a?2E3+a:1900+a}return Date.UTC(a,f-1,q,r,u,m,0)},d.prototype._decodeNull=function(a){return null},d.prototype._decodeBool=function(a){var f=a.readUInt8();
return a.isError(f)?f:0!==f},d.prototype._decodeInt=function(a,f){a=a.raw();a=new c(a);return f&&(a=f[a.toString(10)]||a),a},d.prototype._use=function(a,f){return"function"==typeof a&&(a=a(f)),a._getDecoder("der").tree},aN}function a$(){if(HX)return bN;HX=!0;var g=bN;return g.der=FX(),g.pem=function(){function d(n){h.call(this||cN,n);(this||cN).enc="pem"}if(IX)return dN;IX=!0;var k=jh,e=$g.Buffer,h=FX();return k(d,h),dN=d,d.prototype.decode=function(n,b){n=n.toString().split(/[\r\n]+/g);for(var c=
b.label.toUpperCase(),l=/^-----(BEGIN|END) ([^-]+)-----$/,a=-1,f=-1,m=0;m<n.length;m++){var q=n[m].match(l);if(null!==q&&q[2]===c){if(-1!==a){if("END"!==q[1])break;f=m;break}if("BEGIN"!==q[1])break;a=m}}if(-1===a||-1===f)throw Error("PEM section not found for: "+c);n=n.slice(a+1,f).join("");n.replace(/[^a-z0-9\+\/=]+/gi,"");n=new e(n,"base64");return h.prototype.decode.call(this||cN,n,b)},dN}(),bN}function JX(){function g(l){(this||ul).enc="der";(this||ul).name=l.name;(this||ul).entity=l;(this||ul).tree=
new d;(this||ul).tree._init(l.body)}function d(l){b.Node.call(this||ul,"der",l)}function k(l){return 10>l?"0"+l:l}if(KX)return eN;KX=!0;var e=jh,h=$g.Buffer,n=iH(),b=n.base,c=n.constants.der;return eN=g,g.prototype.encode=function(l,a){return(this||ul).tree._encode(l,a).join()},e(d,b.Node),d.prototype._encodeComposite=function(l,a,f,m){var q;a:{var r=l;l=(this||ul).reporter;"seqof"===r?r="seq":"setof"===r&&(r="set");if(c.tagByName.hasOwnProperty(r))r=c.tagByName[r];else if("number"!=typeof r||(0|
r)!==r){f=l.error("Unknown tag: "+r);break a}31<=r?f=l.error("Multi-octet tag encoding unsupported"):(a||(r|=32),f=r|c.tagClassByName[f||"universal"]<<6)}if(128>m.length)return(q=new h(2))[0]=f,q[1]=m.length,this._createEncoderBuffer([q,m]);l=1;for(a=m.length;256<=a;a>>=8)l++;(q=new h(2+l))[0]=f;q[1]=128|l;a=1+l;for(f=m.length;0<f;a--,f>>=8)q[a]=255&f;return this._createEncoderBuffer([q,m])},d.prototype._encodeStr=function(l,a){if("bitstr"===a)return this._createEncoderBuffer([0|l.unused,l.data]);
if("bmpstr"===a){a=new h(2*l.length);for(var f=0;f<l.length;f++)a.writeUInt16BE(l.charCodeAt(f),2*f);return this._createEncoderBuffer(a)}return"numstr"===a?this._isNumstr(l)?this._createEncoderBuffer(l):(this||ul).reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===a?this._isPrintstr(l)?this._createEncoderBuffer(l):(this||ul).reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):
/str$/.test(a)||"objDesc"===a?this._createEncoderBuffer(l):(this||ul).reporter.error("Encoding of string type: "+a+" unsupported")},d.prototype._encodeObjid=function(l,a,f){if("string"==typeof l){if(!a)return(this||ul).reporter.error("string objid given, but no values map found");if(!a.hasOwnProperty(l))return(this||ul).reporter.error("objid not found in values map");l=a[l].split(/[\s\.]+/g);for(a=0;a<l.length;a++)l[a]|=0}else if(Array.isArray(l))for(l=l.slice(),a=0;a<l.length;a++)l[a]|=0;if(!Array.isArray(l))return(this||
ul).reporter.error("objid() should be either array or string, got: "+JSON.stringify(l));if(!f){if(40<=l[1])return(this||ul).reporter.error("Second objid identifier OOB");l.splice(0,2,40*l[0]+l[1])}var m=0;for(a=0;a<l.length;a++)for(f=l[a],m++;128<=f;f>>=7)m++;m=new h(m);var q=m.length-1;for(a=l.length-1;0<=a;a--)for(f=l[a],m[q--]=127&f;0<(f>>=7);)m[q--]=128|127&f;return this._createEncoderBuffer(m)},d.prototype._encodeTime=function(l,a){var f;l=new Date(l);return"gentime"===a?f=[k(l.getFullYear()),
k(l.getUTCMonth()+1),k(l.getUTCDate()),k(l.getUTCHours()),k(l.getUTCMinutes()),k(l.getUTCSeconds()),"Z"].join(""):"utctime"===a?f=[k(l.getFullYear()%100),k(l.getUTCMonth()+1),k(l.getUTCDate()),k(l.getUTCHours()),k(l.getUTCMinutes()),k(l.getUTCSeconds()),"Z"].join(""):(this||ul).reporter.error("Encoding "+a+" time is not supported yet"),this._encodeStr(f,"octstr")},d.prototype._encodeNull=function(){return this._createEncoderBuffer("")},d.prototype._encodeInt=function(l,a){if("string"==typeof l){if(!a)return(this||
ul).reporter.error("String int or enum given, but no values map");if(!a.hasOwnProperty(l))return(this||ul).reporter.error("Values map doesn't contain: "+JSON.stringify(l));l=a[l]}"number"==typeof l||h.isBuffer(l)||(a=l.toArray(),!l.sign&&128&a[0]&&a.unshift(0),l=new h(a));if(h.isBuffer(l)){var f=l.length;0===l.length&&f++;f=new h(f);return l.copy(f),0===l.length&&(f[0]=0),this._createEncoderBuffer(f)}if(128>l)return this._createEncoderBuffer(l);if(256>l)return this._createEncoderBuffer([0,l]);f=1;
for(a=l;256<=a;a>>=8)f++;for(a=(f=Array(f)).length-1;0<=a;a--)f[a]=255&l,l>>=8;return 128&f[0]&&f.unshift(0),this._createEncoderBuffer(new h(f))},d.prototype._encodeBool=function(l){return this._createEncoderBuffer(l?255:0)},d.prototype._use=function(l,a){return"function"==typeof l&&(l=l(a)),l._getEncoder("der").tree},d.prototype._skipDefault=function(l,a,f){var m=(this||ul)._baseState;if(null===m.default)return!1;l=l.join();if(void 0===m.defaultBuffer&&(m.defaultBuffer=this._encodeValue(m.default,
a,f).join()),l.length!==m.defaultBuffer.length)return!1;for(a=0;a<l.length;a++)if(l[a]!==m.defaultBuffer[a])return!1;return!0},eN}function b$(){if(LX)return fN;LX=!0;var g=fN;return g.der=JX(),g.pem=function(){function d(h){e.call(this||gN,h);(this||gN).enc="pem"}if(MX)return hN;MX=!0;var k=jh,e=JX();return k(d,e),hN=d,d.prototype.encode=function(h,n){h=e.prototype.encode.call(this||gN,h).toString("base64");for(var b=["-----BEGIN "+n.label+"-----"],c=0;c<h.length;c+=64)b.push(h.slice(c,c+64));return b.push("-----END "+
n.label+"-----"),b.join("\n")},hN}(),fN}function iH(){if(NX)return iN;NX=!0;var g=iN;return g.bignum=Sk,g.define=function(){function d(h,n){(this||dp).name=h;(this||dp).body=n;(this||dp).decoders={};(this||dp).encoders={}}if(OX)return jN;OX=!0;var k=iH(),e=jh;return jN.define=function(h,n){return new d(h,n)},d.prototype._createNamed=function(h){try{var n=yy.runInThisContext("(function "+(this||dp).name+"(entity) {\n  this._initNamed(entity);\n})")}catch(b){n=function(c){this._initNamed(c)}}return e(n,
h),n.prototype._initNamed=function(b){h.call(this||dp,b)},new n(this||dp)},d.prototype._getDecoder=function(h){return h=h||"der",(this||dp).decoders.hasOwnProperty(h)||((this||dp).decoders[h]=this._createNamed(k.decoders[h])),(this||dp).decoders[h]},d.prototype.decode=function(h,n,b){return this._getDecoder(n).decode(h,b)},d.prototype._getEncoder=function(h){return h=h||"der",(this||dp).encoders.hasOwnProperty(h)||((this||dp).encoders[h]=this._createNamed(k.encoders[h])),(this||dp).encoders[h]},d.prototype.encode=
function(h,n,b){return this._getEncoder(n).encode(h,b)},jN}().define,g.base=fD(),g.constants=CX(),g.decoders=a$(),g.encoders=b$(),iN}function FA(g){var d;"object"!=typeof g||kN.isBuffer(g)||(d=g.passphrase,g=g.key);"string"==typeof g&&(g=kN.from(g));var k=d;g=g.toString();var e=g.match(c$);if(e){var h="aes"+e[1],n=jH.from(e[2],"hex");var b=jH.from(e[3].replace(/[\r\n]/g,""),"base64");e=gD(k,n.slice(0,8),parseInt(e[1],10)).key;k=[];h=ep.createDecipheriv(h,e,n);k.push(h.update(b));k.push(h.final());
b=jH.concat(k)}else b=g.match(d$),b=new jH(b[2].replace(/[\r\n]/g,""),"base64");g=g.match(e$)[1];switch(g){case "CERTIFICATE":var c=oo.certificate.decode(b,"der").tbsCertificate.subjectPublicKeyInfo;case "PUBLIC KEY":switch(c||(c=oo.PublicKey.decode(b,"der")),d=c.algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return oo.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case "1.2.840.10045.2.1":return c.subjectPrivateKey=c.subjectPublicKey,{type:"ec",data:c};case "1.2.840.10040.4.1":return c.algorithm.params.pub_key=
oo.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.params};default:throw Error("unknown key id "+d);}case "ENCRYPTED PRIVATE KEY":k=oo.EncryptedPrivateKey.decode(b,"der"),b=d,h=k.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(k.algorithm.decrypt.kde.kdeparams.iters.toString(),10),c=f$[k.algorithm.decrypt.cipher.algo.join(".")],g=k.algorithm.decrypt.cipher.iv,d=k.subjectPrivateKey,k=parseInt(c.split("-")[1],10)/8,b=g$.pbkdf2Sync(b,h,n,k,"sha1"),c=h$.createDecipheriv(c,
b,g),g=[],b=(g.push(c.update(d)),g.push(c.final()),kN.concat(g));case "PRIVATE KEY":switch(d=(c=oo.PrivateKey.decode(b,"der")).algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return oo.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case "1.2.840.10045.2.1":return{curve:c.algorithm.curve,privateKey:oo.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case "1.2.840.10040.4.1":return c.algorithm.params.priv_key=oo.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.params};
default:throw Error("unknown key id "+d);}case "RSA PUBLIC KEY":return oo.RSAPublicKey.decode(b,"der");case "RSA PRIVATE KEY":return oo.RSAPrivateKey.decode(b,"der");case "DSA PRIVATE KEY":return{type:"dsa",params:oo.DSAPrivateKey.decode(b,"der")};case "EC PRIVATE KEY":return{curve:(b=oo.ECPrivateKey.decode(b,"der")).parameters.value,privateKey:b.privateKey};default:throw Error("unknown key type "+g);}}function PX(g,d,k,e){if((g=new cn(g.toArray())).length<d.byteLength()){var h=new cn(d.byteLength()-
g.length);h.fill(0);g=cn.concat([h,g])}h=k.length;k=(k=lN(k,d)).mod(d);k=new cn(k.toArray());k.length<d.byteLength()&&(d=new cn(d.byteLength()-k.length),d.fill(0),k=cn.concat([d,k]));d=k;k=new cn(h);k.fill(1);h=new cn(h);return h.fill(0),h=zy(e,h).update(k).update(new cn([0])).update(g).update(d).digest(),k=zy(e,h).update(k).digest(),{k:h=zy(e,h).update(k).update(new cn([1])).update(g).update(d).digest(),v:zy(e,h).update(k).digest()}}function lN(g,d){var k=new kH(g);g=(g.length<<3)-d.bitLength();
return 0<g&&k.ishrn(g),k}function QX(g,d,k){var e;do{for(e=new cn(0);8*e.length<g.bitLength();)d.v=zy(k,d.k).update(d.v).digest(),e=cn.concat([e,d.v]);e=lN(e,g);d.k=zy(k,d.k).update(d.v).update(new cn([0])).digest();d.v=zy(k,d.k).update(d.v).digest()}while(-1!==e.cmp(g));return e}function RX(g,d){if(0>=g.cmpn(0))throw Error("invalid sig");if(g.cmp(d)>=d)throw Error("invalid sig");}function hD(g){lH.Writable.call(this||lk);g=Ay[g];if(!g)throw Error("Unknown message digest");(this||lk)._hashType=g.hash;
(this||lk)._hash=SX(g.hash);(this||lk)._tag=g.id;(this||lk)._signType=g.sign}function iD(g){lH.Writable.call(this||lk);g=Ay[g];if(!g)throw Error("Unknown message digest");(this||lk)._hash=SX(g.hash);(this||lk)._tag=g.id;(this||lk)._signType=g.sign}function TX(g){return new hD(g)}function UX(g){return new iD(g)}function By(g){(this||vl).curveType=fp[g];(this||vl).curveType||((this||vl).curveType={name:g});(this||vl).curve=new i$.ec((this||vl).curveType.name);(this||vl).keys=void 0}function mN(g,d,
k){Array.isArray(g)||(g=g.toArray());g=new Su(g);k&&g.length<k&&(k=new Su(k-g.length),k.fill(0),g=Su.concat([k,g]));return d?g.toString(d):g}function VX(){throw Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11");}function WX(g,d){if("number"!=typeof g||g!=g)throw new TypeError("offset must be a number");if(g>XX||0>g)throw new TypeError("offset must be a uint32");if(g>YX||g>d)throw new RangeError("offset out of range");}function ZX(g,
d,k){if("number"!=typeof g||g!=g)throw new TypeError("size must be a number");if(g>XX||0>g)throw new TypeError("size must be a uint32");if(g+d>k||g>YX)throw new RangeError("buffer too small");}function $X(g,d,k,e){return nN.browser?(k=new Uint8Array(g.buffer,d,k),oN.getRandomValues(k),e?(nN.nextTick(function(){e(null,g)}),void 0):g):e?(aY(k,function(h,n){if(h)return e(h);n.copy(g,d);e(null,g)}),void 0):(aY(k).copy(g,d),g)}function j$(g){var d=[];g.replace(/[a-fA-F0-9]{2}/g,function(k){d.push(parseInt(k,
16))});return d}function mH(g){return g&&g.__esModule?g:{default:g}}function bY(g,d){g=g||[];d=d||{};try{return new Blob(g,d)}catch(h){if("TypeError"!==h.name)throw h;for(var k=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),e=0;e<g.length;e+=1)k.append(g[e]);return k.getBlob(d.type)}}function cY(g){for(var d=g.length,k=new ArrayBuffer(d),e=new Uint8Array(k),h=0;h<d;h++)e[h]=g.charCodeAt(h);
return k}function dY(g,d){return bY([cY(g)],{type:d})}function eY(g,d){var k=new FileReader,e="function"===typeof k.readAsBinaryString;k.onloadend=function(h){var n=h.target.result||"";if(e)return d(n);h="";n=new Uint8Array(n);for(var b=n.byteLength,c=0;c<b;c++)h+=String.fromCharCode(n[c]);d(h)};e?k.readAsBinaryString(g):k.readAsArrayBuffer(g)}function fY(g,d){eY(g,function(k){d(k)})}function k$(g,d,k){return g.webkitSlice?g.webkitSlice(d,k):g.slice(d,k)}function l$(g,d,k,e,h){if(0<k||e<d.size)d=
k$(d,k,e);gY.readAsArrayBuffer(d,function(n){g.append(n);h()})}function m$(g,d,k,e,h){if(0<k||e<d.length)d=d.substring(k,e);g.appendBinary(d);h()}function nH(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function jD(g){var d;if(!g||"object"!==typeof g)return g;if(Array.isArray(g)){var k=[];var e=0;for(d=g.length;e<d;e++)k[e]=jD(g[e]);return k}if(g instanceof Date)return g.toISOString();if("undefined"!==typeof ArrayBuffer&&g instanceof ArrayBuffer||"undefined"!==typeof Blob&&g instanceof
Blob)return g instanceof ArrayBuffer?"function"===typeof g.slice?g=g.slice(0):(e=new ArrayBuffer(g.byteLength),k=new Uint8Array(e),g=new Uint8Array(g),k.set(g),g=e):(e=g.size,k=g.type,g="function"===typeof g.slice?g.slice(0,e,k):g.webkitSlice(0,e,k)),g;k=Object.getPrototypeOf(g);null===k?k=!0:(k=k.constructor,k="function"==typeof k&&k instanceof k&&hY.call(k)==n$);if(!k)return g;k={};for(e in g)Object.prototype.hasOwnProperty.call(g,e)&&(d=jD(g[e]),"undefined"!==typeof d&&(k[e]=d));return k}function iY(g){var d=
!1;return pN(function(k){if(d)throw Error("once called more than once");d=!0;g.apply(this,k)})}function jY(g){return pN(function(d){d=jD(d);var k=this,e="function"===typeof d[d.length-1]?d.pop():!1,h=new Promise(function(n,b){var c;try{var l=iY(function(a,f){a?b(a):n(f)});d.push(l);(c=g.apply(k,d))&&"function"===typeof c.then&&n(c)}catch(a){b(a)}});e&&h.then(function(n){e(null,n)},e);return h})}function o$(g,d,k){if(g.constructor.listeners("debug").length){for(var e=["api",g.name,d],h=0;h<k.length-
1;h++)e.push(k[h]);g.constructor.emit("debug",e);var n=k[k.length-1];k[k.length-1]=function(b,c){var l=["api",g.name,d];l=l.concat(b?["error",b]:["success",c]);g.constructor.emit("debug",l);n(b,c)}}}function qN(g,d){for(var k={},e=0,h=d.length;e<h;e++){var n=d[e];n in g&&(k[n]=g[n])}return k}function kY(g){return g}function p$(g){return[{ok:g}]}function q$(g){oH&&addEventListener("storage",function(d){g.emit(d.key)})}function GA(){pH.call(this);this._listeners={};q$(this)}function rN(g){if("undefined"!==
typeof console&&"function"===typeof console[g]){var d=Array.prototype.slice.call(arguments,1);console[g].apply(console,d)}}function lY(g){if(!g)return null;var d=g.split("/");return 2===d.length?d:1===d.length?[g,g]:null}function mY(g,d,k){return new Promise(function(e,h){g.get(d,function(n,b){if(n){if(404!==n.status)return h(n);b={}}n=b._rev;b=k(b);if(!b)return e({updated:!1,rev:n});b._id=d;b._rev=n;e(r$(g,b,k))})})}function r$(g,d,k){return g.put(d).then(function(e){return{updated:!0,rev:e.rev}},
function(e){if(409!==e.status)throw e;return mY(g,d._id,k)})}function nY(g){var d=g.length;if(0<d%4)throw Error("Invalid string. Length must be a multiple of 4");g=g.indexOf("=");-1===g&&(g=d);return[g,g===d?0:4-g%4]}function s$(g,d,k){for(var e=[],h=d;h<k;h+=3)d=(g[h]<<16&16711680)+(g[h+1]<<8&65280)+(g[h+2]&255),e.push(gt[d>>18&63]+gt[d>>12&63]+gt[d>>6&63]+gt[d&63]);return e.join("")}function Tu(g){if(g>sN)throw new RangeError('The value "'+g+'" is invalid for option "size"');g=new Uint8Array(g);
Object.setPrototypeOf(g,Od.prototype);return g}function Od(g,d,k){if("number"===typeof g){if("string"===typeof d)throw new TypeError('The "string" argument must be of type string. Received type number');return tN(g)}return oY(g,d,k)}function oY(g,d,k){if("string"===typeof g){var e=d;if("string"!==typeof e||""===e)e="utf8";if(!Od.isEncoding(e))throw new TypeError("Unknown encoding: "+e);d=pY(g,e)|0;k=Tu(d);g=k.write(g,e);g!==d&&(k=k.slice(0,g));return k}if(ArrayBuffer.isView(g))return ht(g,Uint8Array)?
(g=new Uint8Array(g),g=qY(g.buffer,g.byteOffset,g.byteLength)):g=uN(g),g;if(null==g)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(ht(g,ArrayBuffer)||g&&ht(g.buffer,ArrayBuffer)||"undefined"!==typeof SharedArrayBuffer&&(ht(g,SharedArrayBuffer)||g&&ht(g.buffer,SharedArrayBuffer)))return qY(g,d,k);if("number"===typeof g)throw new TypeError('The "value" argument must not be of type number. Received type number');
e=g.valueOf&&g.valueOf();if(null!=e&&e!==g)return Od.from(e,d,k);if(e=t$(g))return e;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof g[Symbol.toPrimitive])return Od.from(g[Symbol.toPrimitive]("string"),d,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);}function rY(g){if("number"!==typeof g)throw new TypeError('"size" argument must be of type number');if(0>g)throw new RangeError('The value "'+
g+'" is invalid for option "size"');}function tN(g){rY(g);return Tu(0>g?0:vN(g)|0)}function uN(g){for(var d=0>g.length?0:vN(g.length)|0,k=Tu(d),e=0;e<d;e+=1)k[e]=g[e]&255;return k}function qY(g,d,k){if(0>d||g.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<d+(k||0))throw new RangeError('"length" is outside of buffer bounds');g=void 0===d&&void 0===k?new Uint8Array(g):void 0===k?new Uint8Array(g,d):new Uint8Array(g,d,k);Object.setPrototypeOf(g,Od.prototype);
return g}function t$(g){if(Od.isBuffer(g)){var d=vN(g.length)|0,k=Tu(d);if(0===k.length)return k;g.copy(k,0,0,d);return k}if(void 0!==g.length)return(d="number"!==typeof g.length)||(d=g.length,d=d!==d),d?Tu(0):uN(g);if("Buffer"===g.type&&Array.isArray(g.data))return uN(g.data)}function vN(g){if(g>=sN)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+sN.toString(16)+" bytes");return g|0}function pY(g,d){if(Od.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||ht(g,ArrayBuffer))return g.byteLength;
if("string"!==typeof g)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);var k=g.length,e=2<arguments.length&&!0===arguments[2];if(!e&&0===k)return 0;for(var h=!1;;)switch(d){case "ascii":case "latin1":case "binary":return k;case "utf8":case "utf-8":return wN(g).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*k;case "hex":return k>>>1;case "base64":return qH.toByteArray(sY(g)).length;default:if(h)return e?
-1:wN(g).length;d=(""+d).toLowerCase();h=!0}}function u$(g,d,k){var e=!1;if(void 0===d||0>d)d=0;if(d>this.length)return"";if(void 0===k||k>this.length)k=this.length;if(0>=k)return"";k>>>=0;d>>>=0;if(k<=d)return"";for(g||(g="utf8");;)switch(g){case "hex":g=this.length;if(!d||0>d)d=0;if(!k||0>k||k>g)k=g;for(g="";d<k;++d)g+=v$[this[d]];return g;case "utf8":case "utf-8":return tY(this,d,k);case "ascii":g="";for(k=Math.min(this.length,k);d<k;++d)g+=String.fromCharCode(this[d]&127);return g;case "latin1":case "binary":g=
"";for(k=Math.min(this.length,k);d<k;++d)g+=String.fromCharCode(this[d]);return g;case "base64":return d=0===d&&k===this.length?qH.fromByteArray(this):qH.fromByteArray(this.slice(d,k)),d;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=this.slice(d,k);k="";for(g=0;g<d.length-1;g+=2)k+=String.fromCharCode(d[g]+256*d[g+1]);return k;default:if(e)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase();e=!0}}function Cy(g,d,k){var e=g[d];g[d]=g[k];g[k]=e}function uY(g,d,k,e,h){if(0===
g.length)return-1;"string"===typeof k?(e=k,k=0):2147483647<k?k=2147483647:-2147483648>k&&(k=-2147483648);k=+k;k!==k&&(k=h?0:g.length-1);0>k&&(k=g.length+k);if(k>=g.length){if(h)return-1;k=g.length-1}else if(0>k)if(h)k=0;else return-1;"string"===typeof d&&(d=Od.from(d,e));if(Od.isBuffer(d))return 0===d.length?-1:vY(g,d,k,e,h);if("number"===typeof d)return d&=255,"function"===typeof Uint8Array.prototype.indexOf?h?Uint8Array.prototype.indexOf.call(g,d,k):Uint8Array.prototype.lastIndexOf.call(g,d,k):
vY(g,[d],k,e,h);throw new TypeError("val must be string, number or Buffer");}function vY(g,d,k,e,h){function n(a,f){return 1===b?a[f]:a.readUInt16BE(f*b)}var b=1,c=g.length,l=d.length;if(void 0!==e&&(e=String(e).toLowerCase(),"ucs2"===e||"ucs-2"===e||"utf16le"===e||"utf-16le"===e)){if(2>g.length||2>d.length)return-1;b=2;c/=2;l/=2;k/=2}if(h)for(e=-1;k<c;k++)if(n(g,k)===n(d,-1===e?0:k-e)){if(-1===e&&(e=k),k-e+1===l)return e*b}else-1!==e&&(k-=k-e),e=-1;else for(k+l>c&&(k=c-l);0<=k;k--){c=!0;for(e=0;e<
l;e++)if(n(g,k+e)!==n(d,e)){c=!1;break}if(c)return k}return-1}function tY(g,d,k){k=Math.min(g.length,k);for(var e=[];d<k;){var h=g[d],n=null,b=239<h?4:223<h?3:191<h?2:1;if(d+b<=k)switch(b){case 1:128>h&&(n=h);break;case 2:var c=g[d+1];128===(c&192)&&(h=(h&31)<<6|c&63,127<h&&(n=h));break;case 3:c=g[d+1];var l=g[d+2];128===(c&192)&&128===(l&192)&&(h=(h&15)<<12|(c&63)<<6|l&63,2047<h&&(55296>h||57343<h)&&(n=h));break;case 4:c=g[d+1];l=g[d+2];var a=g[d+3];128===(c&192)&&128===(l&192)&&128===(a&192)&&(h=
(h&15)<<18|(c&63)<<12|(l&63)<<6|a&63,65535<h&&1114112>h&&(n=h))}null===n?(n=65533,b=1):65535<n&&(n-=65536,e.push(n>>>10&1023|55296),n=56320|n&1023);e.push(n);d+=b}g=e.length;if(g<=wY)e=String.fromCharCode.apply(String,e);else{k="";for(d=0;d<g;)k+=String.fromCharCode.apply(String,e.slice(d,d+=wY));e=k}return e}function Xl(g,d,k){if(0!==g%1||0>g)throw new RangeError("offset is not uint");if(g+d>k)throw new RangeError("Trying to access beyond buffer length");}function po(g,d,k,e,h,n){if(!Od.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');
if(d>h||d<n)throw new RangeError('"value" argument is out of bounds');if(k+e>g.length)throw new RangeError("Index out of range");}function xY(g,d,k,e,h,n){if(k+e>g.length)throw new RangeError("Index out of range");if(0>k)throw new RangeError("Index out of range");}function yY(g,d,k,e,h){d=+d;k>>>=0;h||xY(g,d,k,4);HA.write(g,d,k,e,23,4);return k+4}function zY(g,d,k,e,h){d=+d;k>>>=0;h||xY(g,d,k,8);HA.write(g,d,k,e,52,8);return k+8}function sY(g){g=g.split("=")[0];g=g.trim().replace(w$,"");if(2>g.length)return"";
for(;0!==g.length%4;)g+="=";return g}function wN(g,d){d=d||Infinity;for(var k,e=g.length,h=null,n=[],b=0;b<e;++b){k=g.charCodeAt(b);if(55295<k&&57344>k){if(!h){if(56319<k){-1<(d-=3)&&n.push(239,191,189);continue}else if(b+1===e){-1<(d-=3)&&n.push(239,191,189);continue}h=k;continue}if(56320>k){-1<(d-=3)&&n.push(239,191,189);h=k;continue}k=(h-55296<<10|k-56320)+65536}else h&&-1<(d-=3)&&n.push(239,191,189);h=null;if(128>k){if(0>--d)break;n.push(k)}else if(2048>k){if(0>(d-=2))break;n.push(k>>6|192,k&
63|128)}else if(65536>k){if(0>(d-=3))break;n.push(k>>12|224,k>>6&63|128,k&63|128)}else if(1114112>k){if(0>(d-=4))break;n.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw Error("Invalid code point");}return n}function rH(g,d,k,e){for(var h=0;h<e&&!(h+k>=d.length||h>=g.length);++h)d[h+k]=g[h];return h}function ht(g,d){return g instanceof d||null!=g&&null!=g.constructor&&null!=g.constructor.name&&g.constructor.name===d.name}function zw(g){if("object"!==typeof g||null===g)throw new TypeError("First argument must be an abstract-leveldown compliant store");
(this||Uu).db=g;(this||Uu)._ended=!1;(this||Uu)._nexting=!1}function Hr(g){if("object"!==typeof g||null===g)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||wl).db=g;(this||wl)._operations=[];(this||wl)._written=!1}function Mj(g){(this||gp).status="new";(this||gp).supports=x$(g,{status:!0})}function AY(g,d){var k={},e;for(e in d)if(y$.call(d,e)){var h=d[e];-1!==z$.indexOf(e)&&(h=g._serializeKey(h));k[e]=h}return k}function IA(g,d){BY.call(this||Ir,g);(this||
Ir)._options=d;(this||Ir)._iterator=null;(this||Ir)._operations=[]}function Dy(g){CY.call(this||Yl,g.supports||{});A$.forEach(function(d){"function"!==typeof g[d]||(this||Yl).supports.additionalMethods[d]||((this||Yl).supports.additionalMethods[d]=!0)},this||Yl);(this||Yl)._db=g;(this||Yl)._operations=[];DY(this||Yl)}function B$(g){EY.concat("iterator").forEach(function(d){g["_"+d]=function(){return(this||Yl)._db[d].apply((this||Yl)._db,arguments)}});Object.keys(g.supports.additionalMethods).forEach(function(d){g[d]=
function(){return(this||Yl)._db[d].apply((this||Yl)._db,arguments)}})}function DY(g){EY.forEach(function(d){g["_"+d]=function(){(this||Yl)._operations.push({method:d,args:arguments})}});Object.keys(g.supports.additionalMethods).forEach(function(d){g[d]=function(){(this||Yl)._operations.push({method:d,args:arguments})}});g._iterator=function(d){d=new FY(g,d);(this||Yl)._operations.push({iterator:d});return d}}function GY(){if(HY)return IY;HY=!0;return IY=$s.EventEmitter}function JA(){function g(e,
h,n){n||(n=Error);var b=function(c,l,a){return n.call(this,"string"===typeof h?h:h(c,l,a))||this};$jscomp.inherits(b,n);b.prototype.name=n.name;b.prototype.code=e;k[e]=b}function d(e,h){if(Array.isArray(e)){var n=e.length;e=e.map(function(b){return String(b)});return 2<n?"one of "+h+" "+e.slice(0,n-1).join(", ")+", or "+e[n-1]:2===n?"one of "+h+" "+e[0]+" or "+e[1]:"of "+h+" "+e[0]}return"of "+h+" "+String(e)}if(JY)return xN;JY=!0;var k={};g("ERR_INVALID_OPT_VALUE",function(e,h){return'The value "'+
h+'" is invalid for option "'+e+'"'},TypeError);g("ERR_INVALID_ARG_TYPE",function(e,h,n){var b;if(b="string"===typeof h)b="not "===h.substr(0,4);b?(b="must not be",h=h.replace(/^not /,"")):b="must be";var c=void 0;if(void 0===c||c>e.length)c=e.length;" argument"===e.substring(c-9,c)?e="The "+e+" "+b+" "+d(h,"type"):(c=void 0,"number"!==typeof c&&(c=0),c=c+1>e.length?!1:-1!==e.indexOf(".",c),e='The "'+e+'" '+(c?"property":"argument")+" "+b+" "+d(h,"type"));return e+(". Received type "+typeof n)},TypeError);
g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");g("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});g("ERR_STREAM_PREMATURE_CLOSE","Premature close");g("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});g("ERR_MULTIPLE_CALLBACK","Callback called multiple times");g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");g("ERR_STREAM_WRITE_AFTER_END","write after end");g("ERR_STREAM_NULL_VALUES","May not write null values to stream",
TypeError);g("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");xN.codes=k;return xN}function yN(g){try{if(!zN.localStorage)return!1}catch(d){return!1}g=zN.localStorage[g];return null==g?!1:"true"===String(g).toLowerCase()}function KY(g,d){for(var k in g)d[k]=g[k]}function Ey(g,d,k){return it(g,d,k)}function C$(g){if(!g)return"utf8";for(var d;;)switch(g){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";
case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return g;default:if(d)return;g=(""+g).toLowerCase();d=!0}}function kD(g){var d=C$(g);if("string"!==typeof d&&(AN.isEncoding===LY||!LY(g)))throw Error("Unknown encoding: "+g);this.encoding=d||g;switch(this.encoding){case "utf16le":this.text=D$;this.end=E$;g=4;break;case "utf8":this.fillLast=F$;g=4;break;case "base64":this.text=G$;this.end=H$;g=3;break;default:this.write=I$;this.end=J$;return}this.lastTotal=this.lastNeed=
0;this.lastChar=AN.allocUnsafe(g)}function BN(g){return 127>=g?0:6===g>>5?2:14===g>>4?3:30===g>>3?4:2===g>>6?-1:-2}function K$(g,d,k){var e=d.length-1;if(e<k)return 0;var h=BN(d[e]);if(0<=h)return 0<h&&(g.lastNeed=h-1),h;if(--e<k||-2===h)return 0;h=BN(d[e]);if(0<=h)return 0<h&&(g.lastNeed=h-2),h;if(--e<k||-2===h)return 0;h=BN(d[e]);return 0<=h?(0<h&&(2===h?h=0:g.lastNeed=h-3),h):0}function F$(g){var d=this.lastTotal-this.lastNeed;a:if(128!==(g[0]&192)){this.lastNeed=0;var k="\ufffd"}else{if(1<this.lastNeed&&
1<g.length){if(128!==(g[1]&192)){this.lastNeed=1;k="\ufffd";break a}if(2<this.lastNeed&&2<g.length&&128!==(g[2]&192)){this.lastNeed=2;k="\ufffd";break a}}k=void 0}if(void 0!==k)return k;if(this.lastNeed<=g.length)return g.copy(this.lastChar,d,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,d,0,g.length);this.lastNeed-=g.length}function D$(g,d){if(0===(g.length-d)%2){if(d=g.toString("utf16le",d)){var k=d.charCodeAt(d.length-1);if(55296<=k&&56319>=k)return this.lastNeed=
2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],d.slice(0,-1)}return d}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=g[g.length-1];return g.toString("utf16le",d,g.length-1)}function E$(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):g}function G$(g,d){var k=(g.length-d)%3;if(0===k)return g.toString("base64",d);this.lastNeed=3-k;this.lastTotal=3;1===k?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=
g[g.length-2],this.lastChar[1]=g[g.length-1]);return g.toString("base64",d,g.length-k)}function H$(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function I$(g){return g.toString(this.encoding)}function J$(g){return g&&g.length?this.write(g):""}function CN(){function g(h){var n=!1;return function(){if(!n){n=!0;for(var b=arguments.length,c=Array(b),l=0;l<b;l++)c[l]=arguments[l];h.apply(this,c)}}}function d(){}function k(h,n,b){if("function"===
typeof n)return k(h,null,n);n||(n={});b=g(b||d);var c=n.readable||!1!==n.readable&&h.readable,l=n.writable||!1!==n.writable&&h.writable,a=function(){h.writable||m()},f=h._writableState&&h._writableState.finished,m=function(){l=!1;f=!0;c||b.call(h)},q=h._readableState&&h._readableState.endEmitted,r=function(){c=!1;q=!0;l||b.call(h)},u=function(z){b.call(h,z)},v=function(){var z;if(c&&!q)return h._readableState&&h._readableState.ended||(z=new e),b.call(h,z);if(l&&!f)return h._writableState&&h._writableState.ended||
(z=new e),b.call(h,z)},y=function(){h.req.on("finish",m)};if(h.setHeader&&"function"===typeof h.abort)if(h.on("complete",m),h.on("abort",v),h.req)y();else h.on("request",y);else l&&!h._writableState&&(h.on("end",a),h.on("close",a));h.on("end",r);h.on("finish",m);if(!1!==n.error)h.on("error",u);h.on("close",v);return function(){h.removeListener("complete",m);h.removeListener("abort",v);h.removeListener("request",y);h.req&&h.req.removeListener("finish",m);h.removeListener("end",a);h.removeListener("close",
a);h.removeListener("finish",m);h.removeListener("end",r);h.removeListener("error",u);h.removeListener("close",v)}}if(MY)return NY;MY=!0;var e=JA().codes.ERR_STREAM_PREMATURE_CLOSE;return NY=k}function L$(){if(OY)return PY;OY=!0;return PY=function(){throw Error("Readable.from is not available in the browser");}}function M$(){function g(c,l){var a=Object.keys(c);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(c);l&&(f=f.filter(function(m){return Object.getOwnPropertyDescriptor(c,
m).enumerable}));a.push.apply(a,f)}return a}function d(c){for(var l=1;l<arguments.length;l++){var a=null!=arguments[l]?arguments[l]:{};l%2?g(Object(a),!0).forEach(function(f){var m=a[f];f in c?Object.defineProperty(c,f,{value:m,enumerable:!0,configurable:!0,writable:!0}):c[f]=m}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach(function(f){Object.defineProperty(c,f,Object.getOwnPropertyDescriptor(a,f))})}return c}function k(c,l){for(var a=
0;a<l.length;a++){var f=l[a];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(c,f.key,f)}}function e(c,l,a){l&&k(c.prototype,l);a&&k(c,a);return c}if(QY)return RY;QY=!0;var h=$g.Buffer,n=SY.inspect,b=n&&n.custom||"inspect";return RY=function(){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.tail=this.head=null;this.length=0}e(c,[{key:"push",value:function(l){l={data:l,next:null};0<this.length?this.tail.next=
l:this.head=l;this.tail=l;++this.length}},{key:"unshift",value:function(l){l={data:l,next:this.head};0===this.length&&(this.tail=l);this.head=l;++this.length}},{key:"shift",value:function(){if(0!==this.length){var l=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return l}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(l){if(0===this.length)return"";for(var a=this.head,f=""+a.data;a=a.next;)f+=l+a.data;return f}},
{key:"concat",value:function(l){if(0===this.length)return h.alloc(0);l=h.allocUnsafe(l>>>0);for(var a=this.head,f=0;a;)h.prototype.copy.call(a.data,l,f),f+=a.data.length,a=a.next;return l}},{key:"consume",value:function(l,a){l<this.head.data.length?(a=this.head.data.slice(0,l),this.head.data=this.head.data.slice(l)):a=l===this.head.data.length?this.shift():a?this._getString(l):this._getBuffer(l);return a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(l){var a=
this.head,f=1,m=a.data;for(l-=m.length;a=a.next;){var q=a.data,r=l>q.length?q.length:l;m=r===q.length?m+q:m+q.slice(0,l);l-=r;if(0===l){r===q.length?(++f,this.head=a.next?a.next:this.tail=null):(this.head=a,a.data=q.slice(r));break}++f}this.length-=f;return m}},{key:"_getBuffer",value:function(l){var a=h.allocUnsafe(l),f=this.head,m=1;f.data.copy(a);for(l-=f.data.length;f=f.next;){var q=f.data,r=l>q.length?q.length:l;q.copy(a,a.length-l,0,r);l-=r;if(0===l){r===q.length?(++m,this.head=f.next?f.next:
this.tail=null):(this.head=f,f.data=q.slice(r));break}++m}this.length-=m;return a}},{key:b,value:function(l,a){return n(this,d({},a,{depth:0,customInspect:!1}))}}]);return c}()}function TY(){function g(h,n){k(h,n);d(h)}function d(h){h._writableState&&!h._writableState.emitClose||h._readableState&&!h._readableState.emitClose||h.emit("close")}function k(h,n){h.emit("error",n)}if(UY)return VY;UY=!0;var e=Nh;return VY={destroy:function(h,n){var b=this,c=this._writableState&&this._writableState.destroyed;
if(this._readableState&&this._readableState.destroyed||c)return n?n(h):h&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(k,this,h)):e.nextTick(k,this,h)),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(h||null,function(l){!n&&l?b._writableState?b._writableState.errorEmitted?e.nextTick(d,b):(b._writableState.errorEmitted=!0,e.nextTick(g,b,l)):e.nextTick(g,b,l):
n?(e.nextTick(d,b),n(l)):e.nextTick(d,b)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(h,
n){var b=h._readableState,c=h._writableState;b&&b.autoDestroy||c&&c.autoDestroy?h.destroy(n):h.emit("error",n)}}}function WY(){if(XY)return YY;XY=!0;var g=JA().codes.ERR_INVALID_OPT_VALUE;return YY={getHighWaterMark:function(d,k,e,h){k=null!=k.highWaterMark?k.highWaterMark:h?k[e]:null;if(null!=k){if(!isFinite(k)||Math.floor(k)!==k||0>k)throw new g(h?e:"highWaterMark",k);return Math.floor(k)}return d.objectMode?16:16384}}}function ZY(){function g(J){var O=this;this.entry=this.next=null;this.finish=
function(){var ja=O.entry;for(O.entry=null;ja;){var X=ja.callback;J.pendingcb--;X(void 0);ja=ja.next}J.corkedRequestsFree.next=O}}function d(){}function k(J,O,ja){m=m||KA();J=J||{};"boolean"!==typeof ja&&(ja=O instanceof m);this.objectMode=!!J.objectMode;ja&&(this.objectMode=this.objectMode||!!J.writableObjectMode);this.highWaterMark=z(this,J,"writableHighWaterMark",ja);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==J.decodeStrings;this.defaultEncoding=
J.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(X){var ha=O._writableState,bb=ha.sync,pb=ha.writecb;if("function"!==typeof pb)throw new F;ha.writing=!1;ha.writecb=null;ha.length-=ha.writelen;ha.writelen=0;X?(--ha.pendingcb,bb?(f.nextTick(pb,X),f.nextTick(a,O,ha),O._writableState.errorEmitted=!0,D(O,X)):(pb(X),O._writableState.errorEmitted=!0,D(O,X),a(O,ha))):((X=c(ha)||O.destroyed)||ha.corked||ha.bufferProcessing||!ha.bufferedRequest||
b(O,ha),bb?f.nextTick(n,O,ha,X,pb):n(O,ha,X,pb))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==J.emitClose;this.autoDestroy=!!J.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function e(J){m=m||KA();var O=this instanceof m;if(!O&&!Q.call(e,this))return new e(J);this._writableState=new k(J,this,O);this.writable=!0;J&&("function"===typeof J.write&&(this._write=
J.write),"function"===typeof J.writev&&(this._writev=J.writev),"function"===typeof J.destroy&&(this._destroy=J.destroy),"function"===typeof J.final&&(this._final=J.final));r.call(this)}function h(J,O,ja,X,ha,bb,pb){O.writelen=X;O.writecb=pb;O.writing=!0;O.sync=!0;if(O.destroyed)O.onwrite(new L("write"));else ja?J._writev(ha,O.onwrite):J._write(ha,bb,O.onwrite);O.sync=!1}function n(J,O,ja,X){!ja&&0===O.length&&O.needDrain&&(O.needDrain=!1,J.emit("drain"));O.pendingcb--;X();a(J,O)}function b(J,O){O.bufferProcessing=
!0;var ja=O.bufferedRequest;if(J._writev&&ja&&ja.next){var X=Array(O.bufferedRequestCount),ha=O.corkedRequestsFree;ha.entry=ja;for(var bb=0,pb=!0;ja;)X[bb]=ja,ja.isBuf||(pb=!1),ja=ja.next,bb+=1;X.allBuffers=pb;h(J,O,!0,O.length,X,"",ha.finish);O.pendingcb++;O.lastBufferedRequest=null;ha.next?(O.corkedRequestsFree=ha.next,ha.next=null):O.corkedRequestsFree=new g(O);O.bufferedRequestCount=0}else{for(;ja&&(X=ja.chunk,h(J,O,!1,O.objectMode?1:X.length,X,ja.encoding,ja.callback),ja=ja.next,O.bufferedRequestCount--,
!O.writing););null===ja&&(O.lastBufferedRequest=null)}O.bufferedRequest=ja;O.bufferProcessing=!1}function c(J){return J.ending&&0===J.length&&null===J.bufferedRequest&&!J.finished&&!J.writing}function l(J,O){J._final(function(ja){O.pendingcb--;ja&&D(J,ja);O.prefinished=!0;J.emit("prefinish");a(J,O)})}function a(J,O){var ja=c(O);ja&&(O.prefinished||O.finalCalled||("function"!==typeof J._final||O.destroyed?(O.prefinished=!0,J.emit("prefinish")):(O.pendingcb++,O.finalCalled=!0,f.nextTick(l,J,O))),0===
O.pendingcb&&(O.finished=!0,J.emit("finish"),O.autoDestroy&&(O=J._readableState,(!O||O.autoDestroy&&O.endEmitted)&&J.destroy())));return ja}if($Y)return DN;$Y=!0;var f=Nh;DN=e;var m;e.WritableState=k;var q={deprecate:N$},r=GY(),u=$g.Buffer,v=O$.Uint8Array||function(){},y=TY(),z=WY().getHighWaterMark,A=JA().codes,C=A.ERR_INVALID_ARG_TYPE,G=A.ERR_METHOD_NOT_IMPLEMENTED,F=A.ERR_MULTIPLE_CALLBACK,N=A.ERR_STREAM_CANNOT_PIPE,L=A.ERR_STREAM_DESTROYED,W=A.ERR_STREAM_NULL_VALUES,la=A.ERR_STREAM_WRITE_AFTER_END,
wa=A.ERR_UNKNOWN_ENCODING,D=y.errorOrDestroy;Fj(e,r);k.prototype.getBuffer=function(){for(var J=this.bufferedRequest,O=[];J;)O.push(J),J=J.next;return O};(function(){try{Object.defineProperty(k.prototype,"buffer",{get:q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(J){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var Q=Function.prototype[Symbol.hasInstance];
Object.defineProperty(e,Symbol.hasInstance,{value:function(J){return Q.call(this,J)?!0:this!==e?!1:J&&J._writableState instanceof k}})}else Q=function(J){return J instanceof this};e.prototype.pipe=function(){D(this,new N)};e.prototype.write=function(J,O,ja){var X=this._writableState,ha=!1,bb;if(bb=!X.objectMode)bb=J,bb=u.isBuffer(bb)||bb instanceof v;bb&&!u.isBuffer(J)&&(J=u.from(J));"function"===typeof O&&(ja=O,O=null);bb?O="buffer":O||(O=X.defaultEncoding);"function"!==typeof ja&&(ja=d);if(X.ending)X=
ja,ja=new la,D(this,ja),f.nextTick(X,ja);else{var pb;if(!(pb=bb)){pb=J;var oa=ja,ba;null===pb?ba=new W:"string"===typeof pb||X.objectMode||(ba=new C("chunk",["string","Buffer"],pb));ba?(D(this,ba),f.nextTick(oa,ba),pb=!1):pb=!0}pb&&(X.pendingcb++,ha=bb,ha||(ba=J,X.objectMode||!1===X.decodeStrings||"string"!==typeof ba||(ba=u.from(ba,O)),J!==ba&&(ha=!0,O="buffer",J=ba)),bb=X.objectMode?1:J.length,X.length+=bb,ba=X.length<X.highWaterMark,ba||(X.needDrain=!0),X.writing||X.corked?(bb=X.lastBufferedRequest,
X.lastBufferedRequest={chunk:J,encoding:O,isBuf:ha,callback:ja,next:null},bb?bb.next=X.lastBufferedRequest:X.bufferedRequest=X.lastBufferedRequest,X.bufferedRequestCount+=1):h(this,X,!1,bb,J,O,ja),ha=ba)}return ha};e.prototype.cork=function(){this._writableState.corked++};e.prototype.uncork=function(){var J=this._writableState;J.corked&&(J.corked--,J.writing||J.corked||J.bufferProcessing||!J.bufferedRequest||b(this,J))};e.prototype.setDefaultEncoding=function(J){"string"===typeof J&&(J=J.toLowerCase());
if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((J+"").toLowerCase())))throw new wa(J);this._writableState.defaultEncoding=J;return this};Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});e.prototype._write=function(J,O,ja){ja(new G("_write()"))};
e.prototype._writev=null;e.prototype.end=function(J,O,ja){var X=this._writableState;"function"===typeof J?(ja=J,O=J=null):"function"===typeof O&&(ja=O,O=null);null!==J&&void 0!==J&&this.write(J,O);X.corked&&(X.corked=1,this.uncork());if(!X.ending){J=ja;X.ending=!0;a(this,X);if(J)if(X.finished)f.nextTick(J);else this.once("finish",J);X.ended=!0;this.writable=!1}return this};Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(e.prototype,
"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(J){this._writableState&&(this._writableState.destroyed=J)}});e.prototype.destroy=y.destroy;e.prototype._undestroy=y.undestroy;e.prototype._destroy=function(J,O){O(J)};return DN}function KA(){function g(a){if(!(this instanceof g))return new g(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===
a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||e.nextTick(k,this)}function k(a){a.end()}if(aZ)return EN;aZ=!0;var e=Nh,h=Object.keys||function(a){var f=[],m;for(m in a)f.push(m);return f};EN=g;var n=bZ(),b=ZY();Fj(g,n);h=h(b.prototype);for(var c=0;c<h.length;c++){var l=h[c];g.prototype[l]||(g.prototype[l]=b.prototype[l])}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});
Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&
void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}});return EN}function P$(){function g(z,A,C){A in z?Object.defineProperty(z,A,{value:C,enumerable:!0,configurable:!0,writable:!0}):z[A]=C;return z}function d(z,A){return{value:z,done:A}}function k(z){var A=z[l];if(null!==A){var C=z[u].read();null!==C&&(z[q]=null,z[l]=null,z[a]=null,A(d(C,!1)))}}function e(z){n.nextTick(k,z)}function h(z,A){return function(C,G){z.then(function(){if(A[m])C(d(void 0,!0));
else A[r](C,G)},G)}}if(cZ)return dZ;cZ=!0;var n=Nh,b,c=CN(),l=Symbol("lastResolve"),a=Symbol("lastReject"),f=Symbol("error"),m=Symbol("ended"),q=Symbol("lastPromise"),r=Symbol("handlePromise"),u=Symbol("stream"),v=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((b={get stream(){return this[u]},next:function(){var z=this,A=this[f];if(null!==A)return Promise.reject(A);if(this[m])return Promise.resolve(d(void 0,!0));if(this[u].destroyed)return new Promise(function(C,G){n.nextTick(function(){z[f]?
G(z[f]):C(d(void 0,!0))})});if(A=this[q])A=new Promise(h(A,this));else{A=this[u].read();if(null!==A)return Promise.resolve(d(A,!1));A=new Promise(this[r])}return this[q]=A}},g(b,Symbol.asyncIterator,function(){return this}),g(b,"return",function(){var z=this;return new Promise(function(A,C){z[u].destroy(null,function(G){G?C(G):A(d(void 0,!0))})})}),b),v);return dZ=function(z){var A,C=Object.create(y,(A={},g(A,u,{value:z,writable:!0}),g(A,l,{value:null,writable:!0}),g(A,a,{value:null,writable:!0}),
g(A,f,{value:null,writable:!0}),g(A,m,{value:z._readableState.endEmitted,writable:!0}),g(A,r,{value:function(G,F){var N=C[u].read();N?(C[q]=null,C[l]=null,C[a]=null,G(d(N,!1))):(C[l]=G,C[a]=F)},writable:!0}),A));C[q]=null;c(z,function(G){if(G&&"ERR_STREAM_PREMATURE_CLOSE"!==G.code){var F=C[a];null!==F&&(C[q]=null,C[l]=null,C[a]=null,F(G));C[f]=G}else G=C[l],null!==G&&(C[q]=null,C[l]=null,C[a]=null,G(d(void 0,!0))),C[m]=!0});z.on("readable",e.bind(null,C));return C}}function bZ(){function g(qa,Ga,
ua){if("function"===typeof qa.prependListener)return qa.prependListener(Ga,ua);if(qa._events&&qa._events[Ga])Array.isArray(qa._events[Ga])?qa._events[Ga].unshift(ua):qa._events[Ga]=[ua,qa._events[Ga]];else qa.on(Ga,ua)}function d(qa,Ga,ua){G=G||KA();qa=qa||{};"boolean"!==typeof ua&&(ua=Ga instanceof G);this.objectMode=!!qa.objectMode;ua&&(this.objectMode=this.objectMode||!!qa.readableObjectMode);this.highWaterMark=D(this,qa,"readableHighWaterMark",ua);this.buffer=new wa;this.length=0;this.pipes=null;
this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==qa.emitClose;this.autoDestroy=!!qa.autoDestroy;this.destroyed=!1;this.defaultEncoding=qa.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;qa.encoding&&(ha||(ha=FN.StringDecoder),this.decoder=new ha(qa.encoding),this.encoding=qa.encoding)}function k(qa){G=
G||KA();if(!(this instanceof k))return new k(qa);this._readableState=new d(qa,this,this instanceof G);this.readable=!0;qa&&("function"===typeof qa.read&&(this._read=qa.read),"function"===typeof qa.destroy&&(this._destroy=qa.destroy));F.call(this)}function e(qa,Ga,ua,H,M){la("readableAddChunk",Ga);var R=qa._readableState;if(null===Ga)R.reading=!1,la("onEofChunk"),R.ended||(R.decoder&&(Ga=R.decoder.end())&&Ga.length&&(R.buffer.push(Ga),R.length+=R.objectMode?1:Ga.length),R.ended=!0,R.sync?b(qa):(R.needReadable=
!1,R.emittedReadable||(R.emittedReadable=!0,c(qa))));else{if(!M){M=Ga;var ca;N.isBuffer(M)||M instanceof L||"string"===typeof M||void 0===M||R.objectMode||(ca=new J("chunk",["string","Buffer","Uint8Array"],M));var Z=ca}if(Z)oa(qa,Z);else if(R.objectMode||Ga&&0<Ga.length)if("string"===typeof Ga||R.objectMode||Object.getPrototypeOf(Ga)===N.prototype||(Ga=N.from(Ga)),H)R.endEmitted?oa(qa,new X):h(qa,R,Ga,!0);else if(R.ended)oa(qa,new O);else{if(R.destroyed)return!1;R.reading=!1;R.decoder&&!ua?(Ga=R.decoder.write(Ga),
R.objectMode||0!==Ga.length?h(qa,R,Ga,!1):l(qa,R)):h(qa,R,Ga,!1)}else H||(R.reading=!1,l(qa,R))}return!R.ended&&(R.length<R.highWaterMark||0===R.length)}function h(qa,Ga,ua,H){Ga.flowing&&0===Ga.length&&!Ga.sync?(Ga.awaitDrain=0,qa.emit("data",ua)):(Ga.length+=Ga.objectMode?1:ua.length,H?Ga.buffer.unshift(ua):Ga.buffer.push(ua),Ga.needReadable&&b(qa));l(qa,Ga)}function n(qa,Ga){if(0>=qa||0===Ga.length&&Ga.ended)return 0;if(Ga.objectMode)return 1;if(qa!==qa)return Ga.flowing&&Ga.length?Ga.buffer.head.data.length:
Ga.length;if(qa>Ga.highWaterMark){var ua=qa;1073741824<=ua?ua=1073741824:(ua--,ua|=ua>>>1,ua|=ua>>>2,ua|=ua>>>4,ua|=ua>>>8,ua|=ua>>>16,ua++);Ga.highWaterMark=ua}return qa<=Ga.length?qa:Ga.ended?Ga.length:(Ga.needReadable=!0,0)}function b(qa){var Ga=qa._readableState;la("emitReadable",Ga.needReadable,Ga.emittedReadable);Ga.needReadable=!1;Ga.emittedReadable||(la("emitReadable",Ga.flowing),Ga.emittedReadable=!0,C.nextTick(c,qa))}function c(qa){var Ga=qa._readableState;la("emitReadable_",Ga.destroyed,
Ga.length,Ga.ended);Ga.destroyed||!Ga.length&&!Ga.ended||(qa.emit("readable"),Ga.emittedReadable=!1);Ga.needReadable=!Ga.flowing&&!Ga.ended&&Ga.length<=Ga.highWaterMark;u(qa)}function l(qa,Ga){Ga.readingMore||(Ga.readingMore=!0,C.nextTick(a,qa,Ga))}function a(qa,Ga){for(;!Ga.reading&&!Ga.ended&&(Ga.length<Ga.highWaterMark||Ga.flowing&&0===Ga.length);){var ua=Ga.length;la("maybeReadMore read 0");qa.read(0);if(ua===Ga.length)break}Ga.readingMore=!1}function f(qa){return function(){var Ga=qa._readableState;
la("pipeOnDrain",Ga.awaitDrain);Ga.awaitDrain&&Ga.awaitDrain--;0===Ga.awaitDrain&&qa.listeners("data").length&&(Ga.flowing=!0,u(qa))}}function m(qa){var Ga=qa._readableState;Ga.readableListening=0<qa.listenerCount("readable");Ga.resumeScheduled&&!Ga.paused?Ga.flowing=!0:0<qa.listenerCount("data")&&qa.resume()}function q(qa){la("readable nexttick read 0");qa.read(0)}function r(qa,Ga){la("resume",Ga.reading);Ga.reading||qa.read(0);Ga.resumeScheduled=!1;qa.emit("resume");u(qa);Ga.flowing&&!Ga.reading&&
qa.read(0)}function u(qa){var Ga=qa._readableState;for(la("flow",Ga.flowing);Ga.flowing&&null!==qa.read(););}function v(qa,Ga){if(0===Ga.length)return null;Ga.objectMode?qa=Ga.buffer.shift():!qa||qa>=Ga.length?(qa=Ga.decoder?Ga.buffer.join(""):1===Ga.buffer.length?Ga.buffer.first():Ga.buffer.concat(Ga.length),Ga.buffer.clear()):qa=Ga.buffer.consume(qa,Ga.decoder);return qa}function y(qa){var Ga=qa._readableState;la("endReadable",Ga.endEmitted);Ga.endEmitted||(Ga.ended=!0,C.nextTick(z,Ga,qa))}function z(qa,
Ga){la("endReadableNT",qa.endEmitted,qa.length);qa.endEmitted||0!==qa.length||(qa.endEmitted=!0,Ga.readable=!1,Ga.emit("end"),qa.autoDestroy&&(qa=Ga._writableState,(!qa||qa.autoDestroy&&qa.finished)&&Ga.destroy()))}function A(qa,Ga){for(var ua=0,H=qa.length;ua<H;ua++)if(qa[ua]===Ga)return ua;return-1}if(eZ)return GN;eZ=!0;var C=Nh;GN=k;var G;k.ReadableState=d;var F=GY(),N=$g.Buffer,L=Q$.Uint8Array||function(){},W=SY;var la=W&&W.debuglog?W.debuglog("stream"):function(){};var wa=M$();W=TY();var D=WY().getHighWaterMark,
Q=JA().codes,J=Q.ERR_INVALID_ARG_TYPE,O=Q.ERR_STREAM_PUSH_AFTER_EOF,ja=Q.ERR_METHOD_NOT_IMPLEMENTED,X=Q.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,ha,bb,pb;Fj(k,F);var oa=W.errorOrDestroy,ba=["error","close","destroy","pause","resume"];Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(qa){this._readableState&&(this._readableState.destroyed=qa)}});k.prototype.destroy=W.destroy;k.prototype._undestroy=
W.undestroy;k.prototype._destroy=function(qa,Ga){Ga(qa)};k.prototype.push=function(qa,Ga){var ua=this._readableState;if(ua.objectMode)var H=!0;else"string"===typeof qa&&(Ga=Ga||ua.defaultEncoding,Ga!==ua.encoding&&(qa=N.from(qa,Ga),Ga=""),H=!0);return e(this,qa,Ga,!1,H)};k.prototype.unshift=function(qa){return e(this,qa,null,!0,!1)};k.prototype.isPaused=function(){return!1===this._readableState.flowing};k.prototype.setEncoding=function(qa){ha||(ha=FN.StringDecoder);qa=new ha(qa);this._readableState.decoder=
qa;this._readableState.encoding=this._readableState.decoder.encoding;for(var Ga=this._readableState.buffer.head,ua="";null!==Ga;)ua+=qa.write(Ga.data),Ga=Ga.next;this._readableState.buffer.clear();""!==ua&&this._readableState.buffer.push(ua);this._readableState.length=ua.length;return this};k.prototype.read=function(qa){la("read",qa);qa=parseInt(qa,10);var Ga=this._readableState,ua=qa;0!==qa&&(Ga.emittedReadable=!1);if(0===qa&&Ga.needReadable&&((0!==Ga.highWaterMark?Ga.length>=Ga.highWaterMark:0<
Ga.length)||Ga.ended))return la("read: emitReadable",Ga.length,Ga.ended),0===Ga.length&&Ga.ended?y(this):b(this),null;qa=n(qa,Ga);if(0===qa&&Ga.ended)return 0===Ga.length&&y(this),null;var H=Ga.needReadable;la("need readable",H);if(0===Ga.length||Ga.length-qa<Ga.highWaterMark)H=!0,la("length less than watermark",H);Ga.ended||Ga.reading?la("reading or ended",!1):H&&(la("do read"),Ga.reading=!0,Ga.sync=!0,0===Ga.length&&(Ga.needReadable=!0),this._read(Ga.highWaterMark),Ga.sync=!1,Ga.reading||(qa=n(ua,
Ga)));H=0<qa?v(qa,Ga):null;null===H?(Ga.needReadable=Ga.length<=Ga.highWaterMark,qa=0):(Ga.length-=qa,Ga.awaitDrain=0);0===Ga.length&&(Ga.ended||(Ga.needReadable=!0),ua!==qa&&Ga.ended&&y(this));null!==H&&this.emit("data",H);return H};k.prototype._read=function(qa){oa(this,new ja("_read()"))};k.prototype.pipe=function(qa,Ga){function ua(Pa,kb){la("onunpipe");Pa===db&&kb&&!1===kb.hasUnpiped&&(kb.hasUnpiped=!0,la("cleanup"),qa.removeListener("close",ca),qa.removeListener("finish",Z),qa.removeListener("drain",
da),qa.removeListener("error",R),qa.removeListener("unpipe",ua),db.removeListener("end",H),db.removeListener("end",Aa),db.removeListener("data",M),ea=!0,!S.awaitDrain||qa._writableState&&!qa._writableState.needDrain||da())}function H(){la("onend");qa.end()}function M(Pa){la("ondata");Pa=qa.write(Pa);la("dest.write",Pa);!1===Pa&&((1===S.pipesCount&&S.pipes===qa||1<S.pipesCount&&-1!==A(S.pipes,qa))&&!ea&&(la("false write response, pause",S.awaitDrain),S.awaitDrain++),db.pause())}function R(Pa){la("onerror",
Pa);Aa();qa.removeListener("error",R);0===qa.listeners("error").length&&oa(qa,Pa)}function ca(){qa.removeListener("finish",Z);Aa()}function Z(){la("onfinish");qa.removeListener("close",ca);Aa()}function Aa(){la("unpipe");db.unpipe(qa)}var db=this,S=this._readableState;switch(S.pipesCount){case 0:S.pipes=qa;break;case 1:S.pipes=[S.pipes,qa];break;default:S.pipes.push(qa)}S.pipesCount+=1;la("pipe count=%d opts=%j",S.pipesCount,Ga);Ga=Ga&&!1===Ga.end||qa===C.stdout||qa===C.stderr?Aa:H;if(S.endEmitted)C.nextTick(Ga);
else db.once("end",Ga);qa.on("unpipe",ua);var da=f(db);qa.on("drain",da);var ea=!1;db.on("data",M);g(qa,"error",R);qa.once("close",ca);qa.once("finish",Z);qa.emit("pipe",db);S.flowing||(la("pipe resume"),db.resume());return qa};k.prototype.unpipe=function(qa){var Ga=this._readableState,ua={hasUnpiped:!1};if(0===Ga.pipesCount)return this;if(1===Ga.pipesCount){if(qa&&qa!==Ga.pipes)return this;qa||(qa=Ga.pipes);Ga.pipes=null;Ga.pipesCount=0;Ga.flowing=!1;qa&&qa.emit("unpipe",this,ua);return this}if(!qa){qa=
Ga.pipes;ua=Ga.pipesCount;Ga.pipes=null;Ga.pipesCount=0;Ga.flowing=!1;for(Ga=0;Ga<ua;Ga++)qa[Ga].emit("unpipe",this,{hasUnpiped:!1});return this}var H=A(Ga.pipes,qa);if(-1===H)return this;Ga.pipes.splice(H,1);--Ga.pipesCount;1===Ga.pipesCount&&(Ga.pipes=Ga.pipes[0]);qa.emit("unpipe",this,ua);return this};k.prototype.on=function(qa,Ga){Ga=F.prototype.on.call(this,qa,Ga);var ua=this._readableState;"data"===qa?(ua.readableListening=0<this.listenerCount("readable"),!1!==ua.flowing&&this.resume()):"readable"!==
qa||ua.endEmitted||ua.readableListening||(ua.readableListening=ua.needReadable=!0,ua.flowing=!1,ua.emittedReadable=!1,la("on readable",ua.length,ua.reading),ua.length?b(this):ua.reading||C.nextTick(q,this));return Ga};k.prototype.addListener=k.prototype.on;k.prototype.removeListener=function(qa,Ga){Ga=F.prototype.removeListener.call(this,qa,Ga);"readable"===qa&&C.nextTick(m,this);return Ga};k.prototype.removeAllListeners=function(qa){var Ga=F.prototype.removeAllListeners.apply(this,arguments);"readable"!==
qa&&void 0!==qa||C.nextTick(m,this);return Ga};k.prototype.resume=function(){var qa=this._readableState;qa.flowing||(la("resume"),qa.flowing=!qa.readableListening,qa.resumeScheduled||(qa.resumeScheduled=!0,C.nextTick(r,this,qa)));qa.paused=!1;return this};k.prototype.pause=function(){la("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(la("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};k.prototype.wrap=function(qa){var Ga=
this,ua=this._readableState,H=!1;qa.on("end",function(){la("wrapped end");if(ua.decoder&&!ua.ended){var R=ua.decoder.end();R&&R.length&&Ga.push(R)}Ga.push(null)});qa.on("data",function(R){la("wrapped data");ua.decoder&&(R=ua.decoder.write(R));ua.objectMode&&(null===R||void 0===R)||!(ua.objectMode||R&&R.length)||Ga.push(R)||(H=!0,qa.pause())});for(var M in qa)void 0===this[M]&&"function"===typeof qa[M]&&(this[M]=function(R){return function(){return qa[R].apply(qa,arguments)}}(M));for(M=0;M<ba.length;M++)qa.on(ba[M],
this.emit.bind(this,ba[M]));this._read=function(R){la("wrapped _read",R);H&&(H=!1,qa.resume())};return this};"function"===typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){void 0===bb&&(bb=P$());return bb(this)});Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(k.prototype,
"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(qa){this._readableState&&(this._readableState.flowing=qa)}});k._fromList=v;Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(k.from=function(qa,Ga){void 0===pb&&(pb=L$());return pb(k,qa,Ga)});return GN}function fZ(){function g(f,m){var q=this._transformState;q.transforming=!1;var r=q.writecb;if(null===r)return this.emit("error",
new b);q.writechunk=null;q.writecb=null;null!=m&&this.push(m);r(f);f=this._readableState;f.reading=!1;(f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}function d(f){if(!(this instanceof d))return new d(f);a.call(this,f);this._transformState={afterTransform:g.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;f&&("function"===typeof f.transform&&(this._transform=f.transform),
"function"===typeof f.flush&&(this._flush=f.flush));this.on("prefinish",k)}function k(){var f=this;"function"!==typeof this._flush||this._readableState.destroyed?e(this,null,null):this._flush(function(m,q){e(f,m,q)})}function e(f,m,q){if(m)return f.emit("error",m);null!=q&&f.push(q);if(f._writableState.length)throw new l;if(f._transformState.transforming)throw new c;return f.push(null)}if(gZ)return HN;gZ=!0;HN=d;var h=JA().codes,n=h.ERR_METHOD_NOT_IMPLEMENTED,b=h.ERR_MULTIPLE_CALLBACK,c=h.ERR_TRANSFORM_ALREADY_TRANSFORMING,
l=h.ERR_TRANSFORM_WITH_LENGTH_0,a=KA();Fj(d,a);d.prototype.push=function(f,m){this._transformState.needTransform=!1;return a.prototype.push.call(this,f,m)};d.prototype._transform=function(f,m,q){q(new n("_transform()"))};d.prototype._write=function(f,m,q){var r=this._transformState;r.writecb=q;r.writechunk=f;r.writeencoding=m;r.transforming||(f=this._readableState,(r.needTransform||f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark))};d.prototype._read=function(f){f=this._transformState;
null===f.writechunk||f.transforming?f.needTransform=!0:(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform))};d.prototype._destroy=function(f,m){a.prototype._destroy.call(this,f,function(q){m(q)})};return HN}function LA(g,d){if(!((this||Jr)instanceof LA))return new LA(g,d);d=d||{};hZ.call(this||Jr,R$(d,{objectMode:!0}));(this||Jr)._iterator=g;(this||Jr)._options=d;this.on("end",(this||Jr).destroy.bind(this||Jr,null,null))}function iZ(g,d,k){d&&"string"!=typeof d&&(d=d.message||
d.name);S$(this||Tk,{type:g,name:g,cause:"string"!=typeof d?d:k,message:d},"ewr")}function IN(g,d){Error.call(this||Tk);Error.captureStackTrace&&Error.captureStackTrace(this||Tk,(this||Tk).constructor);iZ.call(this||Tk,"CustomError",g,d)}function T$(g,d,k){var e=function(h,n){iZ.call(this||Tk,d,h,n);"FilesystemError"==d&&((this||Tk).code=(this||Tk).cause.code,(this||Tk).path=(this||Tk).cause.path,(this||Tk).errno=(this||Tk).cause.errno,(this||Tk).message=(g.errno[(this||Tk).cause.errno]?g.errno[(this||
Tk).cause.errno].description:(this||Tk).cause.message)+((this||Tk).cause.path?" ["+(this||Tk).cause.path+"]":""));Error.call(this||Tk);Error.captureStackTrace&&Error.captureStackTrace(this||Tk,e)};e.prototype=k?new k:new IN;return e}function lD(g){(this||Uk).db=(this||Uk)._levelup=g;(this||Uk).batch=g.db.batch();(this||Uk).ops=[];(this||Uk).length=0}function jZ(g,d){if(null==g)throw new TypeError("Cannot convert first argument to object");for(var k=Object(g),e=1;e<arguments.length;e++){var h=arguments[e];
if(null!=h)for(var n=Object.keys(Object(h)),b=0,c=n.length;b<c;b++){var l=n[b],a=Object.getOwnPropertyDescriptor(h,l);void 0!==a&&a.enumerable&&(k[l]=h[l])}}return k}function kZ(){function g(l){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(l)}function d(l){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||
Object.getPrototypeOf(a)})(l)}function k(l,a){return(k=Object.setPrototypeOf||function(f,m){return f.__proto__=m,f})(l,a)}function e(l,a,f){f||(f=Error);f=function(m){function q(r,u,v){if(!(this instanceof q))throw new TypeError("Cannot call a class as a function");!0;r=d(q).call(this,"string"==typeof a?a:a(r,u,v));if(!r||"object"!==g(r)&&"function"!=typeof r){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");r=this}return r.code=l,r}return!function(r,
u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(u&&u.prototype,{constructor:{value:r,writable:!0,configurable:!0}});u&&k(r,u)}(q,m),q}(f);c[l]=f}function h(l,a){if(Array.isArray(l)){var f=l.length;return l=l.map(function(m){return String(m)}),2<f?"one of ".concat(a," ").concat(l.slice(0,f-1).join(", "),", or ")+l[f-1]:2===f?"one of ".concat(a," ").concat(l[0]," or ").concat(l[1]):"of ".concat(a," ").concat(l[0])}return"of ".concat(a,
" ").concat(String(l))}if(lZ)return JN;lZ=!0;var n,b,c={};return e("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),e("ERR_INVALID_ARG_TYPE",function(l,a,f){var m;if(void 0===n&&(n=KN()),n("string"==typeof l,"'name' must be a string"),"string"==typeof a&&"not "===a.substr(0,4)?(m="must not be",a=a.replace(/^not /,"")):m="must be",function(r,u,v){return(void 0===v||v>r.length)&&(v=r.length),r.substring(v-u.length,v)===u}(l," argument"))l="The ".concat(l," ").concat(m," ").concat(h(a,
"type"));else{var q=function(r,u,v){return"number"!=typeof v&&(v=0),!(v+u.length>r.length)&&-1!==r.indexOf(u,v)}(l,".")?"property":"argument";l='The "'.concat(l,'" ').concat(q," ").concat(m," ").concat(h(a,"type"))}return l+=". Received type ".concat(g(f))},TypeError),e("ERR_INVALID_ARG_VALUE",function(l,a){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===b&&(b=Jg);var m=b.inspect(a);return 128<m.length&&(m="".concat(m.slice(0,128),"...")),"The argument '".concat(l,
"' ").concat(f,". Received ").concat(m)},TypeError),e("ERR_INVALID_RETURN_VALUE",function(l,a,f){var m;return m=f&&f.constructor&&f.constructor.name?"instance of ".concat(f.constructor.name):"type ".concat(g(f)),"Expected ".concat(l,' to be returned from the "').concat(a,'"')+" function but got ".concat(m,".")},TypeError),e("ERR_MISSING_ARGS",function(){for(var l=arguments.length,a=Array(l),f=0;f<l;f++)a[f]=arguments[f];void 0===n&&(n=KN());n(0<a.length,"At least one arg needs to be specified");l=
"The ";f=a.length;switch(a=a.map(function(m){return'"'.concat(m,'"')}),f){case 1:l+="".concat(a[0]," argument");break;case 2:l+="".concat(a[0]," and ").concat(a[1]," arguments");break;default:l+=a.slice(0,f-1).join(", "),l+=", and ".concat(a[f-1]," arguments")}return"".concat(l," must be specified")},TypeError),JN.codes=c,JN}function U$(){function g(F,N){for(var L=0;L<N.length;L++){var W=N[L];W.enumerable=W.enumerable||!1;W.configurable=!0;"value"in W&&(W.writable=!0);Object.defineProperty(F,W.key,
W)}}function d(F,N){return!N||"object"!==l(N)&&"function"!=typeof N?k(F):N}function k(F){if(void 0===F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function e(F){var N="function"==typeof Map?new Map:void 0;return(e=function(L){function W(){return n(L,arguments,c(this).constructor)}if(null===L||(la=L,-1===Function.toString.call(la).indexOf("[native code]")))return L;var la;if("function"!=typeof L)throw new TypeError("Super expression must either be null or a function");
if(void 0!==N){if(N.has(L))return N.get(L);N.set(L,W)}return W.prototype=Object.create(L.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),b(W,L)})(F)}function h(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(F){return!1}}function n(F,N,L){return(n=h()?Reflect.construct:function(W,la,wa){var D=[null];D.push.apply(D,
la);W=new (Function.bind.apply(W,D));return wa&&b(W,wa.prototype),W}).apply(null,arguments)}function b(F,N){return(b=Object.setPrototypeOf||function(L,W){return L.__proto__=W,L})(F,N)}function c(F){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)})(F)}function l(F){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(N){return typeof N}:function(N){return N&&"function"==typeof Symbol&&N.constructor===Symbol&&N!==
Symbol.prototype?"symbol":typeof N})(F)}function a(F,N,L){return(void 0===L||L>F.length)&&(L=F.length),F.substring(L-N.length,L)===N}function f(F){var N=Object.keys(F),L=Object.create(Object.getPrototypeOf(F));return N.forEach(function(W){L[W]=F[W]}),Object.defineProperty(L,"message",{value:F.message}),L}function m(F){return u(F,{compact:!1,customInspect:!1,depth:1E3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function q(F,N,L){var W="",la="",wa=0,D="",Q=!1,
J=m(F),O=J.split("\n"),ja=m(N).split("\n"),X=0,ha="";if("strictEqual"===L&&"object"===l(F)&&"object"===l(N)&&null!==F&&null!==N&&(L="strictEqualObject"),1===O.length&&1===ja.length&&O[0]!==ja[0]){var bb=O[0].length+ja[0].length;if(10>=bb){if(!("object"===l(F)&&null!==F||"object"===l(N)&&null!==N||0===F&&0===N))return"".concat(G[L],"\n\n")+"".concat(O[0]," !== ").concat(ja[0],"\n")}else if("strictEqualObject"!==L&&bb<(r.stderr&&r.stderr.isTTY?r.stderr.columns:80)){for(;O[0][X]===ja[0][X];)X++;2<X&&
(ha="\n  ".concat(function(qa,Ga){if(Ga=Math.floor(Ga),0==qa.length||0==Ga)return"";var ua=qa.length*Ga;for(Ga=Math.floor(Math.log(Ga)/Math.log(2));Ga;)qa+=qa,Ga--;return qa+qa.substring(0,ua-qa.length)}(" ",X),"^"),X=0)}}F=O[O.length-1];for(N=ja[ja.length-1];F===N&&(2>X++?D="\n  ".concat(F).concat(D):W=F,O.pop(),ja.pop(),0!==O.length&&0!==ja.length);)F=O[O.length-1],N=ja[ja.length-1];F=Math.max(O.length,ja.length);if(0===F){W=J.split("\n");if(30<W.length)for(W[26]="".concat(y,"...").concat(C);27<
W.length;)W.pop();return"".concat(G.notIdentical,"\n\n").concat(W.join("\n"),"\n")}3<X&&(D="\n".concat(y,"...").concat(C).concat(D),Q=!0);""!==W&&(D="\n  ".concat(W).concat(D),W="");J=0;L=G[L]+"\n".concat(z,"+ actual").concat(C," ").concat(A,"- expected").concat(C);N=" ".concat(y,"...").concat(C," Lines skipped");for(X=0;X<F;X++){bb=X-wa;if(O.length<X+1)1<bb&&2<X&&(4<bb?(la+="\n".concat(y,"...").concat(C),Q=!0):3<bb&&(la+="\n  ".concat(ja[X-2]),J++),la+="\n  ".concat(ja[X-1]),J++),wa=X,W+="\n".concat(A,
"-").concat(C," ").concat(ja[X]),J++;else if(ja.length<X+1)1<bb&&2<X&&(4<bb?(la+="\n".concat(y,"...").concat(C),Q=!0):3<bb&&(la+="\n  ".concat(O[X-2]),J++),la+="\n  ".concat(O[X-1]),J++),wa=X,la+="\n".concat(z,"+").concat(C," ").concat(O[X]),J++;else{var pb=ja[X],oa=O[X],ba=oa!==pb&&(!a(oa,",")||oa.slice(0,-1)!==pb);ba&&a(pb,",")&&pb.slice(0,-1)===oa&&(ba=!1,oa+=",");ba?(1<bb&&2<X&&(4<bb?(la+="\n".concat(y,"...").concat(C),Q=!0):3<bb&&(la+="\n  ".concat(O[X-2]),J++),la+="\n  ".concat(O[X-1]),J++),
wa=X,la+="\n".concat(z,"+").concat(C," ").concat(oa),W+="\n".concat(A,"-").concat(C," ").concat(pb),J+=2):(la+=W,W="",1!==bb&&0!==X||(la+="\n  ".concat(oa),J++))}if(20<J&&X<F-2)return"".concat(L).concat(N,"\n").concat(la,"\n").concat(y,"...").concat(C).concat(W,"\n")+"".concat(y,"...").concat(C)}return"".concat(L).concat(Q?N:"","\n").concat(la).concat(W).concat(D).concat(ha)}if(mZ)return nZ;mZ=!0;var r=Nh,u=Jg.inspect,v=kZ().codes.ERR_INVALID_ARG_TYPE,y="",z="",A="",C="",G={deepStrictEqual:"Expected values to be strictly deep-equal:",
strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',
notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};return nZ=function(F){function N(W){if(!(this instanceof N))throw new TypeError("Cannot call a class as a function");if(!0,"object"!==l(W)||null===W)throw new v("options","Object",W);var la=W.message,wa=W.operator,D=W.stackStartFn,Q=W.actual;W=W.expected;var J=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=la)var O=d(this,c(N).call(this,String(la)));else if(r.stderr&&r.stderr.isTTY&&
(r.stderr&&r.stderr.getColorDepth&&1!==r.stderr.getColorDepth()?(y="\u001b[34m",z="\u001b[32m",C="\u001b[39m",A="\u001b[31m"):(y="",z="",C="",A="")),"object"===l(Q)&&null!==Q&&"object"===l(W)&&null!==W&&"stack"in Q&&Q instanceof Error&&"stack"in W&&W instanceof Error&&(Q=f(Q),W=f(W)),"deepStrictEqual"===wa||"strictEqual"===wa)O=d(this,c(N).call(this,q(Q,W,wa)));else if("notDeepStrictEqual"===wa||"notStrictEqual"===wa){O=G[wa];var ja=m(Q).split("\n");if("notStrictEqual"===wa&&"object"===l(Q)&&null!==
Q&&(O=G.notStrictEqualObject),30<ja.length)for(ja[26]="".concat(y,"...").concat(C);27<ja.length;)ja.pop();O=1===ja.length?d(this,c(N).call(this,"".concat(O," ").concat(ja[0]))):d(this,c(N).call(this,"".concat(O,"\n\n").concat(ja.join("\n"),"\n")))}else{O=m(Q);ja="";var X=G[wa];"notDeepEqual"===wa||"notEqual"===wa?1024<(O="".concat(G[wa],"\n\n").concat(O)).length&&(O="".concat(O.slice(0,1021),"...")):(ja="".concat(m(W)),512<O.length&&(O="".concat(O.slice(0,509),"...")),512<ja.length&&(ja="".concat(ja.slice(0,
509),"...")),"deepEqual"===wa||"equal"===wa?O="".concat(X,"\n\n").concat(O,"\n\nshould equal\n\n"):ja=" ".concat(wa," ").concat(ja));O=d(this,c(N).call(this,"".concat(O).concat(ja)))}return Error.stackTraceLimit=J,O.generatedMessage=!la,Object.defineProperty(k(O),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),O.code="ERR_ASSERTION",O.actual=Q,O.expected=W,O.operator=wa,Error.captureStackTrace&&Error.captureStackTrace(k(O),D),O.stack,O.name="AssertionError",
d(O)}var L;return!function(W,la){if("function"!=typeof la&&null!==la)throw new TypeError("Super expression must either be null or a function");W.prototype=Object.create(la&&la.prototype,{constructor:{value:W,writable:!0,configurable:!0}});la&&b(W,la)}(N,F),L=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:u.custom,value:function(W,la){return u(this,function(wa){for(var D=1;D<arguments.length;D++){var Q=null!=arguments[D]?arguments[D]:
{},J=Object.keys(Q);"function"==typeof Object.getOwnPropertySymbols&&(J=J.concat(Object.getOwnPropertySymbols(Q).filter(function(O){return Object.getOwnPropertyDescriptor(Q,O).enumerable})));J.forEach(function(O){var ja=Q[O];O in wa?Object.defineProperty(wa,O,{value:ja,enumerable:!0,configurable:!0,writable:!0}):wa[O]=ja})}return wa}({},la,{customInspect:!1,depth:0}))}}],g(N.prototype,L),N}(e(Error))}function oZ(g,d){if(!(g=function(k){if(Array.isArray(k))return k}(g)||function(k,e){var h=[],n=!0,
b=!1,c=void 0;try{for(var l,a=k[Symbol.iterator]();!(n=(l=a.next()).done)&&(h.push(l.value),!e||h.length!==e);n=!0);}catch(f){b=!0,c=f}finally{try{n||null==a.return||a.return()}finally{if(b)throw c;}}return h}(g,d)))throw new TypeError("Invalid attempt to destructure non-iterable instance");return g}function Kr(g){return(Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?
"symbol":typeof d})(g)}function LN(g){return g.call.bind(g)}function V$(g){if(0===g.length||10<g.length)return!0;for(var d=0;d<g.length;d++){var k=g.charCodeAt(d);if(48>k||57<k)return!0}return 10===g.length&&g>=Math.pow(2,32)}function sH(g){return Object.keys(g).filter(V$).concat(tH(g).filter(Object.prototype.propertyIsEnumerable.bind(g)))}function pZ(g,d){if(g===d)return 0;for(var k=g.length,e=d.length,h=0,n=Math.min(k,e);h<n;++h)if(g[h]!==d[h]){k=g[h];e=d[h];break}return k<e?-1:e<k?1:0}function kq(g,
d,k,e){if(g===d)return 0!==g||!k||qZ(g,d);if(k){if("object"!==Kr(g))return"number"==typeof g&&MN(g)&&MN(d);if("object"!==Kr(d)||null===g||null===d||Object.getPrototypeOf(g)!==Object.getPrototypeOf(d))return!1}else{if(null===g||"object"!==Kr(g))return(null===d||"object"!==Kr(d))&&g==d;if(null===d||"object"!==Kr(d))return!1}var h=rZ(g);if(h!==rZ(d))return!1;if(Array.isArray(g)){if(g.length!==d.length)return!1;h=sH(g);var n=sH(d);return h.length===n.length&&mD(g,d,k,e,1,h)}if("[object Object]"===h&&
(!uH(g)&&uH(d)||!vH(g)&&vH(d)))return!1;if(sZ(g)){if(!sZ(d)||Date.prototype.getTime.call(g)!==Date.prototype.getTime.call(d))return!1}else if(tZ(g)){if(!tZ(d)||(W$?g.source!==d.source||g.flags!==d.flags:RegExp.prototype.toString.call(g)!==RegExp.prototype.toString.call(d)))return!1}else if(X$(g)||g instanceof Error){if(g.message!==d.message||g.name!==d.name)return!1}else{if(Y$(g)){if(k||!Z$(g)&&!$$(g)){if(!function(b,c){return b.byteLength===c.byteLength&&0===pZ(new Uint8Array(b.buffer,b.byteOffset,
b.byteLength),new Uint8Array(c.buffer,c.byteOffset,c.byteLength))}(g,d))return!1}else if(!function(b,c){if(b.byteLength!==c.byteLength)return!1;for(var l=0;l<b.byteLength;l++)if(b[l]!==c[l])return!1;return!0}(g,d))return!1;h=sH(g);n=sH(d);return h.length===n.length&&mD(g,d,k,e,0,h)}if(vH(g))return!(!vH(d)||g.size!==d.size)&&mD(g,d,k,e,2);if(uH(g))return!(!uH(d)||g.size!==d.size)&&mD(g,d,k,e,3);if(aaa(g)){if(g.byteLength!==d.byteLength||0!==pZ(new Uint8Array(g),new Uint8Array(d)))return!1}else if(baa(g)&&
!function(b,c){return uZ(b)?uZ(c)&&qZ(Number.prototype.valueOf.call(b),Number.prototype.valueOf.call(c)):vZ(b)?vZ(c)&&String.prototype.valueOf.call(b)===String.prototype.valueOf.call(c):wZ(b)?wZ(c)&&Boolean.prototype.valueOf.call(b)===Boolean.prototype.valueOf.call(c):xZ(b)?xZ(c)&&BigInt.prototype.valueOf.call(b)===BigInt.prototype.valueOf.call(c):caa(c)&&Symbol.prototype.valueOf.call(b)===Symbol.prototype.valueOf.call(c)}(g,d))return!1}return mD(g,d,k,e,0)}function yZ(g,d){return d.filter(function(k){return wH(g,
k)})}function mD(g,d,k,e,h,n){if(5===arguments.length){n=Object.keys(g);var b=Object.keys(d);if(n.length!==b.length)return!1}for(var c=0;c<n.length;c++)if(!nD(d,n[c]))return!1;if(k&&5===arguments.length)if(b=tH(g),0!==b.length){var l=0;for(c=0;c<b.length;c++){var a=b[c];if(wH(g,a)){if(!wH(d,a))return!1;n.push(a);l++}else if(wH(d,a))return!1}c=tH(d);if(b.length!==c.length&&yZ(d,c).length!==l)return!1}else if(b=tH(d),0!==b.length&&0!==yZ(d,b).length)return!1;if(0===n.length&&(0===h||1===h&&0===g.length||
0===g.size))return!0;if(void 0===e)e={val1:new Map,val2:new Map,position:0};else{b=e.val1.get(g);if(void 0!==b&&(l=e.val2.get(d),void 0!==l))return b===l;e.position++}e.val1.set(g,e.position);e.val2.set(d,e.position);b=daa(g,d,k,n,e,h);return e.val1.delete(g),e.val2.delete(d),b}function zZ(g,d,k,e){for(var h=xH(g),n=0;n<h.length;n++){var b=h[n];if(kq(d,b,k,e))return g.delete(b),!0}return!1}function AZ(g){switch(Kr(g)){case "undefined":return null;case "object":return;case "symbol":return!1;case "string":g=
+g;case "number":if(MN(g))return!1}return!0}function BZ(g,d,k,e,h,n){for(var b=xH(g),c=0;c<b.length;c++){var l=b[c];if(kq(k,l,h,n)&&kq(e,d.get(l),h,n))return g.delete(l),!0}return!1}function daa(g,d,k,e,h,n){var b=0;if(2===n){if(!function(c,l,a,f){for(var m=null,q=xH(c),r=0;r<q.length;r++){var u=q[r];if("object"===Kr(u)&&null!==u)null===m&&(m=new Set),m.add(u);else if(!l.has(u)){if(a)return!1;var v=c,y=l,z=AZ(u);if(null!=z?!z:!y.has(z)||v.has(z))return!1;null===m&&(m=new Set);m.add(u)}}if(null!==
m){l=xH(l);for(q=0;q<l.length;q++)if(r=l[q],"object"===Kr(r)&&null!==r){if(!zZ(m,r,a,f))return!1}else if(!a&&!c.has(r)&&!zZ(m,r,a,f))return!1;return 0===m.size}return!0}(g,d,k,h))return!1}else if(3===n){if(!function(c,l,a,f){for(var m=null,q=CZ(c),r=0;r<q.length;r++){var u=oZ(q[r],2),v=u[0],y=u[1];if("object"===Kr(v)&&null!==v)null===m&&(m=new Set),m.add(v);else if(u=l.get(v),void 0===u&&!l.has(v)||!kq(y,u,a,f)){if(a)return!1;u=c;var z=l,A=f,C=AZ(v);if(null!=C)u=C;else{var G=z.get(C);u=!(void 0===
G&&!z.has(C)||!kq(y,G,!1,A))&&!u.has(C)&&kq(y,G,!1,A)}if(!u)return!1;null===m&&(m=new Set);m.add(v)}}if(null!==m){l=CZ(l);for(q=0;q<l.length;q++)if(r=oZ(l[q],2),r=(v=r[0],r[1]),"object"===Kr(v)&&null!==v){if(!BZ(m,c,v,r,a,f))return!1}else if(!(a||c.has(v)&&kq(c.get(v),r,!1,f)||BZ(m,c,v,r,!1,f)))return!1;return 0===m.size}return!0}(g,d,k,h))return!1}else if(1===n)for(;b<g.length;b++){if(!nD(g,b)){if(nD(d,b))return!1;for(e=Object.keys(g);b<e.length;b++)if(n=e[b],!nD(d,n)||!kq(g[n],d[n],k,h))return!1;
return e.length===Object.keys(d).length}if(!nD(d,b)||!kq(g[b],d[b],k,h))return!1}for(b=0;b<e.length;b++)if(n=e[b],!kq(g[n],d[n],k,h))return!1;return!0}function KN(){function g(O){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ja){return typeof ja}:function(ja){return ja&&"function"==typeof Symbol&&ja.constructor===Symbol&&ja!==Symbol.prototype?"symbol":typeof ja})(O)}function d(){r=DZ.isDeepEqual;u=DZ.isDeepStrictEqual}function k(O){if(O.message instanceof Error)throw O.message;
throw new F(O);}function e(O,ja,X,ha){if(!X){var bb=!1;if(0===ja)bb=!0,ha="No value argument passed to `assert.ok()`";else if(ha instanceof Error)throw ha;O=new F({actual:X,expected:!0,message:ha,operator:"==",stackStartFn:O});throw O.generatedMessage=bb,O;}}function h(){for(var O=arguments.length,ja=Array(O),X=0;X<O;X++)ja[X]=arguments[X];e.apply(void 0,[h,ja.length].concat(ja))}function n(O,ja,X,ha){if("function"!=typeof ja){if(W(ja))return ja.test(O);if(2===arguments.length)throw new z("expected",
["Function","RegExp"],ja);if("object"!==g(O)||null===O){var bb=new F({actual:O,expected:ja,message:X,operator:"deepStrictEqual",stackStartFn:ha});throw bb.operator=ha.name,bb;}var pb=Object.keys(ja);if(ja instanceof Error)pb.push("name","message");else if(0===pb.length)throw new A("error",ja,"may not be an empty object");return void 0===r&&d(),pb.forEach(function(oa){if(!("string"==typeof O[oa]&&W(ja[oa])&&ja[oa].test(O[oa])||oa in O&&u(O[oa],ja[oa]))){if(!X){oa=new J(O,pb);var ba=new J(ja,pb,O);
oa=new F({actual:oa,expected:ba,operator:"deepStrictEqual",stackStartFn:ha});throw oa.actual=O,oa.expected=ja,oa.operator=ha.name,oa;}k({actual:O,expected:ja,message:X,operator:ha.name,stackStartFn:ha})}}),!0}return void 0!==ja.prototype&&O instanceof ja||!Error.isPrototypeOf(ja)&&!0===ja.call({},O)}function b(O){if("function"!=typeof O)throw new z("fn","Function",O);try{O()}catch(ja){return ja}return Q}function c(O){return L(O)||null!==O&&"object"===g(O)&&"function"==typeof O.then&&"function"==typeof O.catch}
function l(O){return Promise.resolve().then(function(){var ja;if("function"==typeof O){if(!c(ja=O()))throw new C("instance of Promise","promiseFn",ja);}else{if(!c(O))throw new z("promiseFn",["Function","Promise"],O);ja=O}return Promise.resolve().then(function(){return ja}).then(function(){return Q}).catch(function(X){return X})})}function a(O,ja,X,ha){if("string"==typeof X){if(4===arguments.length)throw new z("error",["Object","Error","Function","RegExp"],X);if("object"===g(ja)&&null!==ja){if(ja.message===
X)throw new y("error/message",'The error message "'.concat(ja.message,'" is identical to the message.'));}else if(ja===X)throw new y("error/message",'The error "'.concat(ja,'" is identical to the message.'));ha=X;X=void 0}else if(null!=X&&"object"!==g(X)&&"function"!=typeof X)throw new z("error",["Object","Error","Function","RegExp"],X);if(ja===Q){var bb="";X&&X.name&&(bb+=" (".concat(X.name,")"));bb+=ha?": ".concat(ha):".";k({actual:void 0,expected:X,operator:O.name,message:"Missing expected ".concat("rejects"===
O.name?"rejection":"exception").concat(bb),stackStartFn:O})}if(X&&!n(ja,X,ha,O))throw ja;}function f(O,ja,X,ha){if(ja!==Q){if("string"==typeof X&&(ha=X,X=void 0),!X||n(ja,X))ha=ha?": ".concat(ha):".",k({actual:ja,expected:X,operator:O.name,message:"Got unwanted ".concat("doesNotReject"===O.name?"rejection":"exception").concat(ha,"\n")+'Actual message: "'.concat(ja&&ja.message,'"'),stackStartFn:O});throw ja;}}function m(){for(var O=arguments.length,ja=Array(O),X=0;X<O;X++)ja[X]=arguments[X];e.apply(void 0,
[m,ja.length].concat(ja))}if(EZ)return NN;EZ=!0;var q=Nh,r,u,v=kZ().codes,y=v.ERR_AMBIGUOUS_ARGUMENT,z=v.ERR_INVALID_ARG_TYPE,A=v.ERR_INVALID_ARG_VALUE,C=v.ERR_INVALID_RETURN_VALUE,G=v.ERR_MISSING_ARGS,F=U$(),N=Jg.inspect;v=Jg.types;var L=v.isPromise,W=v.isRegExp;v=Object.assign?Object.assign:eaa.assign;var la=Object.is?Object.is:FZ,wa=!1,D=NN=h,Q={};D.fail=function oa(ja,X,ha,bb,pb){var ba=arguments.length;if(0===ba)var qa="Failed";else 1===ba?(ha=ja,ja=void 0):(!1===wa&&(wa=!0,(q.emitWarning?q.emitWarning:
console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===ba&&(bb="!="));if(ha instanceof Error)throw ha;ba={actual:ja,expected:X,operator:void 0===bb?"fail":bb,stackStartFn:pb||oa};void 0!==ha&&(ba.message=ha);ba=new F(ba);throw qa&&(ba.message=qa,ba.generatedMessage=!0),ba;};D.AssertionError=F;D.ok=h;D.equal=function pb(X,ha,bb){if(2>arguments.length)throw new G("actual",
"expected");X!=ha&&k({actual:X,expected:ha,message:bb,operator:"==",stackStartFn:pb})};D.notEqual=function oa(ha,bb,pb){if(2>arguments.length)throw new G("actual","expected");ha==bb&&k({actual:ha,expected:bb,message:pb,operator:"!=",stackStartFn:oa})};D.deepEqual=function ba(bb,pb,oa){if(2>arguments.length)throw new G("actual","expected");void 0===r&&d();r(bb,pb)||k({actual:bb,expected:pb,message:oa,operator:"deepEqual",stackStartFn:ba})};D.notDeepEqual=function qa(pb,oa,ba){if(2>arguments.length)throw new G("actual",
"expected");void 0===r&&d();r(pb,oa)&&k({actual:pb,expected:oa,message:ba,operator:"notDeepEqual",stackStartFn:qa})};D.deepStrictEqual=function Ga(oa,ba,qa){if(2>arguments.length)throw new G("actual","expected");void 0===r&&d();u(oa,ba)||k({actual:oa,expected:ba,message:qa,operator:"deepStrictEqual",stackStartFn:Ga})};D.notDeepStrictEqual=function ua(ba,qa,Ga){if(2>arguments.length)throw new G("actual","expected");void 0===r&&d();u(ba,qa)&&k({actual:ba,expected:qa,message:Ga,operator:"notDeepStrictEqual",
stackStartFn:ua})};D.strictEqual=function H(qa,Ga,ua){if(2>arguments.length)throw new G("actual","expected");la(qa,Ga)||k({actual:qa,expected:Ga,message:ua,operator:"strictEqual",stackStartFn:H})};D.notStrictEqual=function M(Ga,ua,H){if(2>arguments.length)throw new G("actual","expected");la(Ga,ua)&&k({actual:Ga,expected:ua,message:H,operator:"notStrictEqual",stackStartFn:M})};var J=function R(ua,H,M){var ca=this;if(!(this instanceof R))throw new TypeError("Cannot call a class as a function");!0;H.forEach(function(Z){Z in
ua&&(void 0!==M&&"string"==typeof M[Z]&&W(ua[Z])&&ua[Z].test(M[Z])?ca[Z]=M[Z]:ca[Z]=ua[Z])})};return D.throws=function M(H){for(var R=arguments.length,ca=Array(1<R?R-1:0),Z=1;Z<R;Z++)ca[Z-1]=arguments[Z];a.apply(void 0,[M,b(H)].concat(ca))},D.rejects=function R(M){for(var ca=arguments.length,Z=Array(1<ca?ca-1:0),Aa=1;Aa<ca;Aa++)Z[Aa-1]=arguments[Aa];return l(M).then(function(db){return a.apply(void 0,[R,db].concat(Z))})},D.doesNotThrow=function ca(R){for(var Z=arguments.length,Aa=Array(1<Z?Z-1:0),
db=1;db<Z;db++)Aa[db-1]=arguments[db];f.apply(void 0,[ca,b(R)].concat(Aa))},D.doesNotReject=function Z(ca){for(var Aa=arguments.length,db=Array(1<Aa?Aa-1:0),S=1;S<Aa;S++)db[S-1]=arguments[S];return l(ca).then(function(da){return f.apply(void 0,[Z,da].concat(db))})},D.ifError=function Aa(Z){if(null!=Z){var db="ifError got unwanted exception: ";"object"===g(Z)&&"string"==typeof Z.message?0===Z.message.length&&Z.constructor?db+=Z.constructor.name:db+=Z.message:db+=N(Z);db=new F({actual:Z,expected:null,
operator:"ifError",message:db,stackStartFn:Aa});Z=Z.stack;if("string"==typeof Z){Z=Z.split("\n");Z.shift();for(var S=db.stack.split("\n"),da=0;da<Z.length;da++){var ea=S.indexOf(Z[da]);if(-1!==ea){S=S.slice(0,ea);break}}db.stack="".concat(S.join("\n"),"\n").concat(Z.join("\n"))}throw db;}},D.strict=v(m,D,{equal:D.strictEqual,deepEqual:D.deepStrictEqual,notEqual:D.notStrictEqual,notDeepEqual:D.notDeepStrictEqual}),D.strict.strict=D.strict,NN}function oj(g,d,k){if(!((this||kh)instanceof oj))return new oj(g,
d,k);var e=this||kh;yH.call(this||kh);this.setMaxListeners(Infinity);"function"===typeof d&&(k=d,d={});d=d||{};if(!g||"object"!==typeof g){g=new faa("First argument must be an abstract-leveldown compliant store");if("function"===typeof k)return zH.nextTick(k,g);throw g;}gaa.strictEqual(typeof g.status,"string",".status required, old abstract-leveldown");(this||kh).options=MA(d);(this||kh)._db=g;(this||kh).db=new GZ(g);this.open(k||function(h){h&&e.emit("error",h)});(this||kh).supports=haa((this||
kh).db.supports,{status:!1,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0});Object.keys((this||kh).supports.additionalMethods).forEach(function(h){null==(this||kh)[h]&&((this||kh)[h]=function(){return(this||kh).db[h].apply((this||kh).db,arguments)})},this||kh)}function oD(g,d){if(!g._isOpening()&&!g.isOpen())return zH.nextTick(d,new HZ("Database is not open")),!0}function jt(g,d){return Object.hasOwnProperty.call(g,d)&&d}function iaa(g){return g}function AH(g){return g}function ON(g){return void 0===
g||null===g||PN.isBuffer(g)}function yn(g){if(!((this||Vu)instanceof yn))return new yn(g);(this||Vu).opts=g||{};(this||Vu).encodings=QN}function jaa(g){return g.toString((this||Gf).encoding)}function kaa(g){(this||Gf).charReceived=g.length%2;(this||Gf).charLength=(this||Gf).charReceived?2:0}function laa(g){(this||Gf).charReceived=g.length%3;(this||Gf).charLength=(this||Gf).charReceived?3:0}function IZ(){function g(z,A,C){(this||lh).chunk=z;(this||lh).encoding=A;(this||lh).callback=C}function d(z,
A){var C=NA();z=z||{};var G=z.highWaterMark,F=z.objectMode?16:16384;(this||lh).highWaterMark=G||0===G?G:F;(this||lh).objectMode=!!z.objectMode;A instanceof C&&((this||lh).objectMode=(this||lh).objectMode||!!z.writableObjectMode);(this||lh).highWaterMark=~~(this||lh).highWaterMark;(this||lh).needDrain=!1;(this||lh).ending=!1;(this||lh).ended=!1;(this||lh).finished=!1;(this||lh).decodeStrings=!1!==z.decodeStrings;(this||lh).defaultEncoding=z.defaultEncoding||"utf8";(this||lh).length=0;(this||lh).writing=
!1;(this||lh).corked=0;(this||lh).sync=!0;(this||lh).bufferProcessing=!1;(this||lh).onwrite=function(N){a(A,N)};(this||lh).writecb=null;(this||lh).writelen=0;(this||lh).buffer=[];(this||lh).pendingcb=0;(this||lh).prefinished=!1;(this||lh).errorEmitted=!1}function k(z){var A=NA();if(!((this||lh)instanceof k||(this||lh)instanceof A))return new k(z);(this||lh)._writableState=new d(z,this||lh);(this||lh).writable=!0;y.call(this||lh)}function e(z,A,C){var G=Error("write after end");z.emit("error",G);r.nextTick(function(){C(G)})}
function h(z,A,C,G){var F=!0;if(!(v.isBuffer(C)||v.isString(C)||v.isNullOrUndefined(C)||A.objectMode)){var N=new TypeError("Invalid non-string/buffer chunk");z.emit("error",N);r.nextTick(function(){G(N)});F=!1}return F}function n(z,A,C,G,F){var N=G;!A.objectMode&&!1!==A.decodeStrings&&v.isString(C)&&(C=new u(C,N));v.isBuffer(C)&&(G="buffer");N=A.objectMode?1:C.length;A.length+=N;var L=A.length<A.highWaterMark;L||(A.needDrain=!0);A.writing||A.corked?A.buffer.push(new g(C,G,F)):b(z,A,!1,N,C,G,F);return L}
function b(z,A,C,G,F,N,L){A.writelen=G;A.writecb=L;A.writing=!0;A.sync=!0;C?z._writev(F,A.onwrite):z._write(F,N,A.onwrite);A.sync=!1}function c(z,A,C,G,F){C?r.nextTick(function(){A.pendingcb--;F(G)}):(A.pendingcb--,F(G));z._writableState.errorEmitted=!0;z.emit("error",G)}function l(z){z.writing=!1;z.writecb=null;z.length-=z.writelen;z.writelen=0}function a(z,A){var C=z._writableState,G=C.sync,F=C.writecb;l(C);if(A)c(z,C,G,A,F);else{var N=C.ending&&0===C.length&&!C.finished&&!C.writing;N||C.corked||
C.bufferProcessing||!C.buffer.length||m(z,C);G?r.nextTick(function(){f(z,C,N,F)}):f(z,C,N,F)}}function f(z,A,C,G){!C&&0===A.length&&A.needDrain&&(A.needDrain=!1,z.emit("drain"));A.pendingcb--;G();q(z,A)}function m(z,A){A.bufferProcessing=!0;if(z._writev&&1<A.buffer.length){for(var C=[],G=0;G<A.buffer.length;G++)C.push(A.buffer[G].callback);A.pendingcb++;b(z,A,!0,A.length,A.buffer,"",function(L){for(var W=0;W<C.length;W++)A.pendingcb--,C[W](L)});A.buffer=[]}else{for(G=0;G<A.buffer.length;G++){var F=
A.buffer[G],N=F.chunk;b(z,A,!1,A.objectMode?1:N.length,N,F.encoding,F.callback);if(A.writing){G++;break}}G<A.buffer.length?A.buffer=A.buffer.slice(G):A.buffer.length=0}A.bufferProcessing=!1}function q(z,A){var C=A.ending&&0===A.length&&!A.finished&&!A.writing;C&&(0===A.pendingcb?(A.prefinished||(A.prefinished=!0,z.emit("prefinish")),A.finished=!0,z.emit("finish")):A.prefinished||(A.prefinished=!0,z.emit("prefinish")));return C}if(JZ)return RN;JZ=!0;var r=Nh;RN=k;var u=$g.Buffer;k.WritableState=d;
var v=Vk;v.inherits=Fj;var y=Fy;v.inherits(k,y);k.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))};k.prototype.write=function(z,A,C){var G=(this||lh)._writableState,F=!1;v.isFunction(A)&&(C=A,A=null);v.isBuffer(z)?A="buffer":A||(A=G.defaultEncoding);v.isFunction(C)||(C=function(){});G.ended?e(this||lh,G,C):h(this||lh,G,z,C)&&(G.pendingcb++,F=n(this||lh,G,z,A,C));return F};k.prototype.cork=function(){(this||lh)._writableState.corked++};k.prototype.uncork=function(){var z=
(this||lh)._writableState;z.corked&&(z.corked--,z.writing||z.corked||z.finished||z.bufferProcessing||!z.buffer.length||m(this||lh,z))};k.prototype._write=function(z,A,C){C(Error("not implemented"))};k.prototype._writev=null;k.prototype.end=function(z,A,C){var G=(this||lh)._writableState;v.isFunction(z)?(C=z,A=z=null):v.isFunction(A)&&(C=A,A=null);v.isNullOrUndefined(z)||this.write(z,A);G.corked&&(G.corked=1,this.uncork());if(!G.ending&&!G.finished){z=this||lh;G.ending=!0;q(z,G);if(C)if(G.finished)r.nextTick(C);
else z.once("finish",C);G.ended=!0}};return RN}function NA(){function g(c){if(!((this||Lr)instanceof g))return new g(c);n.call(this||Lr,c);b.call(this||Lr,c);c&&!1===c.readable&&((this||Lr).readable=!1);c&&!1===c.writable&&((this||Lr).writable=!1);(this||Lr).allowHalfOpen=!0;c&&!1===c.allowHalfOpen&&((this||Lr).allowHalfOpen=!1);this.once("end",d)}function d(){(this||Lr).allowHalfOpen||(this||Lr)._writableState.ended||k.nextTick((this||Lr).end.bind(this||Lr))}if(KZ)return SN;KZ=!0;var k=Nh;SN=g;var e=
Object.keys||function(c){var l=[],a;for(a in c)l.push(a);return l},h=Vk;h.inherits=Fj;var n=LZ(),b=IZ();h.inherits(g,n);(function(c,l){for(var a=0,f=c.length;a<f;a++)l(c[a],a)})(e(b.prototype),function(c){g.prototype[c]||(g.prototype[c]=b.prototype[c])});return SN}function LZ(){function g(F,N){var L=NA();F=F||{};var W=F.highWaterMark,la=F.objectMode?16:16384;(this||We).highWaterMark=W||0===W?W:la;(this||We).highWaterMark=~~(this||We).highWaterMark;(this||We).buffer=[];(this||We).length=0;(this||We).pipes=
null;(this||We).pipesCount=0;(this||We).flowing=null;(this||We).ended=!1;(this||We).endEmitted=!1;(this||We).reading=!1;(this||We).sync=!0;(this||We).needReadable=!1;(this||We).emittedReadable=!1;(this||We).readableListening=!1;(this||We).objectMode=!!F.objectMode;N instanceof L&&((this||We).objectMode=(this||We).objectMode||!!F.readableObjectMode);(this||We).defaultEncoding=F.defaultEncoding||"utf8";(this||We).ranOut=!1;(this||We).awaitDrain=0;(this||We).readingMore=!1;(this||We).decoder=null;(this||
We).encoding=null;F.encoding&&(C||(C=TN.StringDecoder),(this||We).decoder=new C(F.encoding),(this||We).encoding=F.encoding)}function d(F){NA();if(!((this||We)instanceof d))return new d(F);(this||We)._readableState=new g(F,this||We);(this||We).readable=!0;z.call(this||We)}function k(F,N,L,W,la){var wa=L;var D=null;A.isBuffer(wa)||A.isString(wa)||A.isNullOrUndefined(wa)||N.objectMode||(D=new TypeError("Invalid non-string/buffer chunk"));(wa=D)?F.emit("error",wa):A.isNullOrUndefined(L)?(N.reading=!1,
N.ended||(N.decoder&&!N.ended&&(L=N.decoder.end())&&L.length&&(N.buffer.push(L),N.length+=N.objectMode?1:L.length),N.ended=!0,h(F))):N.objectMode||L&&0<L.length?N.ended&&!la?(L=Error("stream.push() after EOF"),F.emit("error",L)):N.endEmitted&&la?(L=Error("stream.unshift() after end event"),F.emit("error",L)):(!N.decoder||la||W||(L=N.decoder.write(L)),la||(N.reading=!1),N.flowing&&0===N.length&&!N.sync?(F.emit("data",L),F.read(0)):(N.length+=N.objectMode?1:L.length,la?N.buffer.unshift(L):N.buffer.push(L),
N.needReadable&&h(F)),b(F,N)):la||(N.reading=!1);return!N.ended&&(N.needReadable||N.length<N.highWaterMark||0===N.length)}function e(F,N){if(0===N.length&&N.ended)return 0;if(N.objectMode)return 0===F?0:1;if(isNaN(F)||A.isNull(F))return N.flowing&&N.buffer.length?N.buffer[0].length:N.length;if(0>=F)return 0;if(F>N.highWaterMark){var L=F;if(8388608<=L)L=8388608;else{L--;for(var W=1;32>W;W<<=1)L|=L>>W;L++}N.highWaterMark=L}if(F>N.length){if(N.ended)return N.length;N.needReadable=!0;return 0}return F}
function h(F){var N=F._readableState;N.needReadable=!1;N.emittedReadable||(G("emitReadable",N.flowing),N.emittedReadable=!0,N.sync?r.nextTick(function(){n(F)}):n(F))}function n(F){G("emit readable");F.emit("readable");a(F)}function b(F,N){N.readingMore||(N.readingMore=!0,r.nextTick(function(){for(var L=N.length;!N.reading&&!N.flowing&&!N.ended&&N.length<N.highWaterMark&&(G("maybeReadMore read 0"),F.read(0),L!==N.length);)L=N.length;N.readingMore=!1}))}function c(F){return function(){var N=F._readableState;
G("pipeOnDrain",N.awaitDrain);N.awaitDrain&&N.awaitDrain--;0===N.awaitDrain&&y.listenerCount(F,"data")&&(N.flowing=!0,a(F))}}function l(F,N){N.resumeScheduled||(N.resumeScheduled=!0,r.nextTick(function(){N.resumeScheduled=!1;F.emit("resume");a(F);N.flowing&&!N.reading&&F.read(0)}))}function a(F){var N=F._readableState;G("flow",N.flowing);if(N.flowing){do var L=F.read();while(null!==L&&N.flowing)}}function f(F,N){var L=N.buffer,W=N.length,la=!!N.decoder;N=!!N.objectMode;if(0===L.length)return null;
if(0===W)W=null;else if(N)W=L.shift();else if(!F||F>=W)W=la?L.join(""):v.concat(L,W),L.length=0;else if(F<L[0].length)N=L[0],W=N.slice(0,F),L[0]=N.slice(F);else if(F===L[0].length)W=L.shift();else{W=la?"":new v(F);for(var wa=0,D=0,Q=L.length;D<Q&&wa<F;D++){N=L[0];var J=Math.min(F-wa,N.length);la?W+=N.slice(0,J):N.copy(W,wa,0,J);J<N.length?L[0]=N.slice(J):L.shift();wa+=J}}return W}function m(F){var N=F._readableState;if(0<N.length)throw Error("endReadable called on non-empty stream");N.endEmitted||
(N.ended=!0,r.nextTick(function(){N.endEmitted||0!==N.length||(N.endEmitted=!0,F.readable=!1,F.emit("end"))}))}function q(F,N){for(var L=0,W=F.length;L<W;L++)N(F[L],L)}if(MZ)return UN;MZ=!0;var r=Nh;UN=d;var u=maa,v=$g.Buffer;d.ReadableState=g;var y=$s.EventEmitter;y.listenerCount||(y.listenerCount=function(F,N){return F.listeners(N).length});var z=Fy,A=Vk;A.inherits=Fj;var C,G=naa;G=G&&G.debuglog?G.debuglog("stream"):function(){};A.inherits(d,z);d.prototype.push=function(F,N){var L=(this||We)._readableState;
A.isString(F)&&!L.objectMode&&(N=N||L.defaultEncoding,N!==L.encoding&&(F=new v(F,N),N=""));return k(this||We,L,F,N,!1)};d.prototype.unshift=function(F){return k(this||We,(this||We)._readableState,F,"",!0)};d.prototype.setEncoding=function(F){C||(C=TN.StringDecoder);(this||We)._readableState.decoder=new C(F);(this||We)._readableState.encoding=F;return this||We};d.prototype.read=function(F){G("read",F);var N=(this||We)._readableState,L=F;if(!A.isNumber(F)||0<F)N.emittedReadable=!1;if(0===F&&N.needReadable&&
(N.length>=N.highWaterMark||N.ended))return G("read: emitReadable",N.length,N.ended),0===N.length&&N.ended?m(this||We):h(this||We),null;F=e(F,N);if(0===F&&N.ended)return 0===N.length&&m(this||We),null;var W=N.needReadable;G("need readable",W);if(0===N.length||N.length-F<N.highWaterMark)W=!0,G("length less than watermark",W);if(N.ended||N.reading)W=!1,G("reading or ended",W);W&&(G("do read"),N.reading=!0,N.sync=!0,0===N.length&&(N.needReadable=!0),this._read(N.highWaterMark),N.sync=!1);W&&!N.reading&&
(F=e(L,N));W=0<F?f(F,N):null;A.isNull(W)&&(N.needReadable=!0,F=0);N.length-=F;0!==N.length||N.ended||(N.needReadable=!0);L!==F&&N.ended&&0===N.length&&m(this||We);A.isNull(W)||this.emit("data",W);return W};d.prototype._read=function(F){this.emit("error",Error("not implemented"))};d.prototype.pipe=function(F,N){function L(bb){G("onunpipe");bb===ja&&la()}function W(){G("onend");F.end()}function la(){G("cleanup");F.removeListener("close",Q);F.removeListener("finish",J);F.removeListener("drain",ha);F.removeListener("error",
D);F.removeListener("unpipe",L);ja.removeListener("end",W);ja.removeListener("end",la);ja.removeListener("data",wa);!X.awaitDrain||F._writableState&&!F._writableState.needDrain||ha()}function wa(bb){G("ondata");!1===F.write(bb)&&(G("false write response, pause",ja._readableState.awaitDrain),ja._readableState.awaitDrain++,ja.pause())}function D(bb){G("onerror",bb);O();F.removeListener("error",D);0===y.listenerCount(F,"error")&&F.emit("error",bb)}function Q(){F.removeListener("finish",J);O()}function J(){G("onfinish");
F.removeListener("close",Q);O()}function O(){G("unpipe");ja.unpipe(F)}var ja=this||We,X=(this||We)._readableState;switch(X.pipesCount){case 0:X.pipes=F;break;case 1:X.pipes=[X.pipes,F];break;default:X.pipes.push(F)}X.pipesCount+=1;G("pipe count=%d opts=%j",X.pipesCount,N);N=N&&!1===N.end||F===r.stdout||F===r.stderr?la:W;if(X.endEmitted)r.nextTick(N);else ja.once("end",N);F.on("unpipe",L);var ha=c(ja);F.on("drain",ha);ja.on("data",wa);if(F._events&&F._events.error)u(F._events.error)?F._events.error.unshift(D):
F._events.error=[D,F._events.error];else F.on("error",D);F.once("close",Q);F.once("finish",J);F.emit("pipe",ja);X.flowing||(G("pipe resume"),ja.resume());return F};d.prototype.unpipe=function(F){var N=(this||We)._readableState;if(0===N.pipesCount)return this||We;if(1===N.pipesCount){if(F&&F!==N.pipes)return this||We;F||(F=N.pipes);N.pipes=null;N.pipesCount=0;N.flowing=!1;F&&F.emit("unpipe",this||We);return this||We}if(!F){F=N.pipes;var L=N.pipesCount;N.pipes=null;N.pipesCount=0;N.flowing=!1;for(var W=
0;W<L;W++)F[W].emit("unpipe",this||We);return this||We}a:{W=N.pipes;L=0;for(var la=W.length;L<la;L++)if(W[L]===F){W=L;break a}W=-1}if(-1===W)return this||We;N.pipes.splice(W,1);--N.pipesCount;1===N.pipesCount&&(N.pipes=N.pipes[0]);F.emit("unpipe",this||We);return this||We};d.prototype.on=function(F,N){N=z.prototype.on.call(this||We,F,N);"data"===F&&!1!==(this||We)._readableState.flowing&&this.resume();if("readable"===F&&(this||We).readable&&(F=(this||We)._readableState,!F.readableListening))if(F.readableListening=
!0,F.emittedReadable=!1,F.needReadable=!0,F.reading)F.length&&h(this||We);else{var L=this||We;r.nextTick(function(){G("readable nexttick read 0");L.read(0)})}return N};d.prototype.addListener=d.prototype.on;d.prototype.resume=function(){var F=(this||We)._readableState;F.flowing||(G("resume"),F.flowing=!0,F.reading||(G("resume read 0"),this.read(0)),l(this||We,F));return this||We};d.prototype.pause=function(){G("call pause flowing=%j",(this||We)._readableState.flowing);!1!==(this||We)._readableState.flowing&&
(G("pause"),(this||We)._readableState.flowing=!1,this.emit("pause"));return this||We};d.prototype.wrap=function(F){var N=(this||We)._readableState,L=!1,W=this||We;F.on("end",function(){G("wrapped end");if(N.decoder&&!N.ended){var wa=N.decoder.end();wa&&wa.length&&W.push(wa)}W.push(null)});F.on("data",function(wa){G("wrapped data");N.decoder&&(wa=N.decoder.write(wa));wa&&(N.objectMode||wa.length)&&!W.push(wa)&&(L=!0,F.pause())});for(var la in F)A.isFunction(F[la])&&A.isUndefined((this||We)[la])&&((this||
We)[la]=function(wa){return function(){return F[wa].apply(F,arguments)}}(la));q(["error","close","destroy","pause","resume"],function(wa){F.on(wa,W.emit.bind(W,wa))});W._read=function(wa){G("wrapped _read",wa);L&&(L=!1,F.resume())};return W};d._fromList=f;return UN}function NZ(){function g(n,b){(this||Zl).afterTransform=function(c,l){var a=b._transformState;a.transforming=!1;var f=a.writecb;f?(a.writechunk=null,a.writecb=null,h.isNullOrUndefined(l)||b.push(l),f&&f(c),c=b._readableState,c.reading=
!1,(c.needReadable||c.length<c.highWaterMark)&&b._read(c.highWaterMark),c=void 0):c=b.emit("error",Error("no writecb in Transform class"));return c};(this||Zl).needTransform=!1;(this||Zl).transforming=!1;(this||Zl).writecb=null;(this||Zl).writechunk=null}function d(n){if(!((this||Zl)instanceof d))return new d(n);e.call(this||Zl,n);(this||Zl)._transformState=new g(n,this||Zl);var b=this||Zl;(this||Zl)._readableState.needReadable=!0;(this||Zl)._readableState.sync=!1;this.once("prefinish",function(){h.isFunction((this||
Zl)._flush)?this._flush(function(c){k(b,c)}):k(b)})}function k(n,b){if(b)return n.emit("error",b);b=n._transformState;if(n._writableState.length)throw Error("calling transform done when ws.length != 0");if(b.transforming)throw Error("calling transform done when still transforming");return n.push(null)}if(OZ)return VN;OZ=!0;VN=d;var e=NA(),h=Vk;h.inherits=Fj;h.inherits(d,e);d.prototype.push=function(n,b){(this||Zl)._transformState.needTransform=!1;return e.prototype.push.call(this||Zl,n,b)};d.prototype._transform=
function(n,b,c){throw Error("not implemented");};d.prototype._write=function(n,b,c){var l=(this||Zl)._transformState;l.writecb=c;l.writechunk=n;l.writeencoding=b;l.transforming||(n=(this||Zl)._readableState,(l.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark))};d.prototype._read=function(n){n=(this||Zl)._transformState;h.isNull(n.writechunk)||!n.writecb||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};
return VN}function oaa(){function g(e){if(!((this||PZ)instanceof g))return new g(e);d.call(this||PZ,e)}if(QZ)return WN;QZ=!0;WN=g;var d=NZ(),k=Vk;k.inherits=Fj;k.inherits(g,d);g.prototype._transform=function(e,h,n){n(null,e)};return WN}function pD(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function paa(g){var d={},k;for(k in g)d[k]=g[k];return d}function qaa(g,d,k){g.open(function(){});return{apply:function(e,h,n){h=h||{};for(var b=[],c=-1,l=e.length;++c<l;){var a=e[c],f=a,m=a.prefix;
m&&m.options&&(f.keyEncoding=f.keyEncoding||m.options.keyEncoding,f.valueEncoding=f.valueEncoding||m.options.valueEncoding);f=a;m=a.prefix;m="function"===typeof m.prefix?m.prefix():m;f.prefix=m;b.push({key:d.encode([a.prefix,k.encodeKey(a.key,h,a)]),value:"del"!==a.type&&k.encodeValue(a.value,h,a),type:a.type})}g.db.batch(b,h,n)},get:function(e,h,n,b){n.asBuffer=k.valueAsBuffer(n);return g.db.get(d.encode([h,k.encodeKey(e,n,void 0)]),n,function(c,l){c?b(c):b(null,k.decodeValue(l,n))})},createDecoder:function(e){return function(h,
n){return{key:k.decodeKey(d.decode(h)[1],e),value:k.decodeValue(n,e)}}},isClosed:function(){return g.isClosed()},close:function(e){return g.close(e)},iterator:function(e){var h=paa(e||{}),n=e.prefix||[];raa.toLtgt(e,h,function(b){return d.encode([n,k.encodeKey(b,h,{})])},d.lowerBound,d.upperBound);h.prefix=null;h.keyAsBuffer=h.valueAsBuffer=!1;"number"!==typeof h.limit&&(h.limit=-1);h.keyAsBuffer=d.buffer;h.valueAsBuffer=k.valueAsBuffer(h);return function(b){return{next:function(c){return b.next(c)},
end:function(c){b.end(c)}}}(g.db.iterator(h))}}}function XN(){Error.call(this)}function Aw(g,d){if(!(this instanceof Aw))return new Aw(g,d);RZ.call(this,{objectMode:!0,highWaterMark:g.highWaterMark});this._waiting=!1;this._options=g;this._makeData=d}function OA(g){SZ.call(this||Wu,g);(this||Wu)._destroyed=!1}function saa(g,d,k){k(null,g)}function YN(g){return function(d,k,e){"function"==typeof d&&(e=k,k=d,d={});"function"!=typeof k&&(k=saa);"function"!=typeof e&&(e=null);return g(d,k,e)}}function Gi(g){this._capacity=
TZ(g);this._front=this._length=0;if(UZ(g)){for(var d=g.length,k=0;k<d;++k)this[k]=g[k];this._length=d}}function TZ(g){if("number"!==typeof g)if(UZ(g))g=g.length;else return 16;g=Math.min(Math.max(16,g),1073741824);g=(g>>>0)-1;g|=g>>1;g|=g>>2;g|=g>>4;g|=g>>8;return(g|g>>16)+1}function ZN(g){g=g.rev_tree.slice();for(var d;d=g.pop();){var k=d.ids,e=k[2];d=d.pos;if(e.length){k=0;for(var h=e.length;k<h;k++)g.push({pos:d+1,ids:e[k]})}else if(e=!!k[1].deleted,k=k[0],!n||(c!==e?c:b!==d?b<d:n<k)){var n=k;
var b=d;var c=e}}return b+"-"+n}function BH(g,d){g=g.slice();for(var k;k=g.pop();){var e=k.pos,h=k.ids,n=h[2];k=d(0===n.length,e,h[0],k.ctx,h[1]);h=0;for(var b=n.length;h<b;h++)g.push({pos:e+1,ids:n[h],ctx:k})}}function taa(g,d){return g.pos-d.pos}function VZ(g){var d=[];BH(g,function(e,h,n,b,c){e&&d.push({rev:h+"-"+n,pos:h,opts:c})});d.sort(taa).reverse();g=0;for(var k=d.length;g<k;g++)delete d[g].pos;return d}function WZ(g){var d=[];g=g.slice();for(var k;k=g.pop();){var e=k.pos,h=k.ids,n=h[0],b=
h[1];h=h[2];var c=0===h.length;k=k.history?k.history.slice():[];k.push({id:n,opts:b});c&&d.push({pos:e+1-k.length,ids:k});n=0;for(b=h.length;n<b;n++)g.push({pos:e+1,ids:h[n],history:k})}return d.reverse()}function uaa(g,d){return g.pos-d.pos}function XZ(g,d){for(var k,e,h=g.length;d<h;d++){var n=g[d];n=[n.id,n.opts,[]];e?(e[2].push(n),e=n):k=e=n}return k}function vaa(g,d){return g[0]<d[0]?-1:1}function YZ(g,d){d=[{tree1:g,tree2:d}];for(var k=!1;0<d.length;){var e=d.pop(),h=e.tree1;e=e.tree2;if(h[1].status||
e[1].status)h[1].status="available"===h[1].status||"available"===e[1].status?"available":"missing";for(var n=0;n<e[2].length;n++)if(h[2][0]){for(var b=!1,c=0;c<h[2].length;c++)h[2][c][0]===e[2][n][0]&&(d.push({tree1:h[2][c],tree2:e[2][n]}),b=!0);if(!b){k="new_branch";b=h[2];c=e[2][n];for(var l,a=b,f=c,m=vaa,q=0,r=a.length;q<r;)l=q+r>>>1,0>m(a[l],f)?q=l+1:r=l;b.splice(q,0,c)}}else k="new_leaf",h[2][0]=e[2][n]}return{conflicts:k,tree:g}}function ZZ(g,d,k){var e=[],h=!1,n=!1;if(!g.length)return{tree:[d],
conflicts:"new_leaf"};for(var b=0,c=g.length;b<c;b++){var l=g[b];if(l.pos===d.pos&&l.ids[0]===d.ids[0])n=YZ(l.ids,d.ids),e.push({pos:l.pos,ids:n.tree}),h=h||n.conflicts,n=!0;else if(!0!==k){var a=l.pos<d.pos?l:d,f=l.pos<d.pos?d:l,m=[],q=[];for(q.push({ids:a.ids,diff:f.pos-a.pos,parent:null,parentIdx:null});0<q.length;){var r=q.pop();if(0===r.diff)r.ids[0]===f.ids[0]&&m.push(r);else for(var u=r.ids[2],v=0,y=u.length;v<y;v++)q.push({ids:u[v],diff:r.diff-1,parent:r.ids,parentIdx:v})}(m=m[0])?(n=YZ(m.ids,
f.ids),m.parent[2][m.parentIdx]=n.tree,e.push({pos:a.pos,ids:a.ids}),h=h||n.conflicts,n=!0):e.push(l)}else e.push(l)}n||e.push(d);e.sort(uaa);return{tree:e,conflicts:h||"internal_node"}}function waa(g,d){g=WZ(g);for(var k,e,h=0,n=g.length;h<n;h++){var b=g[h],c=b.ids;if(c.length>d){k||(k={});var l=c.length-d;var a={pos:b.pos+l,ids:XZ(c,l)};for(var f=0;f<l;f++)k[b.pos+f+"-"+c[f].id]=!0}else a={pos:b.pos,ids:XZ(c,0)};e=e?ZZ(e,a,!0).tree:[a]}k&&BH(e,function(m,q,r){delete k[q+"-"+r]});return{tree:e,revs:k?
Object.keys(k):[]}}function xaa(g){return g.ids}function $Z(g){return g.reduce(function(d,k){d[k]=!0;return d},{})}function a_(g){if(!/^\d+-/.test(g))return hp.createError(hp.INVALID_REV);var d=g.indexOf("-"),k=g.substring(0,d);g=g.substring(d+1);return{prefix:parseInt(k,10),id:g}}function b_(g,d,k){k||(k={deterministic_revs:!0});var e={status:"available"};g._deleted&&(e.deleted=!0);if(d){g._id||(g._id=Gy.uuid());var h=Gy.rev(g,k.deterministic_revs);if(g._rev){d=a_(g._rev);if(d.error)return d;g._rev_tree=
[{pos:d.prefix,ids:[d.id,{status:"missing"},[[h,e,[]]]]}];var n=d.prefix+1}else g._rev_tree=[{pos:1,ids:[h,e,[]]}],n=1}else{if(g._revisions){h=g._revisions;n=h.start-h.ids.length+1;h=h.ids;d=[h[0],e,[]];k=1;for(var b=h.length;k<b;k++)d=[h[k],{status:"missing"},[d]];g._rev_tree=[{pos:n,ids:d}];n=g._revisions.start;h=g._revisions.ids[0]}if(!g._rev_tree){d=a_(g._rev);if(d.error)return d;n=d.prefix;h=d.id;g._rev_tree=[{pos:n,ids:[h,e,[]]}]}}Gy.invalidIdError(g._id);g._rev=n+"-"+h;e={metadata:{},data:{}};
for(var c in g)if(Object.prototype.hasOwnProperty.call(g,c)){if((n="_"===c[0])&&!yaa[c])throw g=hp.createError(hp.DOC_VALIDATION,c),g.message=hp.DOC_VALIDATION.message+": "+c,g;n&&!zaa[c]?e.metadata[c.slice(1)]=g[c]:e.data[c]=g[c]}return e}function Aaa(g,d,k){try{var e=qD.atob(g.data)}catch(h){e={error:hp.createError(hp.BAD_ARG,"Attachment is not a valid base64 string")}}if(e.error)return k(e.error);g.length=e.length;g.data="blob"===d?qD.binaryStringToBlobOrBuffer(e,g.content_type):"base64"===d?qD.btoa(e):
e;c_.binaryMd5(e,function(h){g.digest="md5-"+h;k()})}function Baa(g,d,k){c_.binaryMd5(g.data,function(e){g.digest="md5-"+e;g.length=g.data.size||g.data.length||0;"binary"===d?qD.blobOrBufferToBinaryString(g.data,function(h){g.data=h;k()}):"base64"===d?qD.blobOrBufferToBase64(g.data,function(h){g.data=h;k()}):k()})}function Caa(g,d,k){if(g.stub)return k();"string"===typeof g.data?Aaa(g,d,k):Baa(g,d,k)}function d_(g,d,k,e,h,n,b,c){if(qo.revExists(d.rev_tree,k.metadata.rev)&&!c)return e[h]=k,n();var l=
d.winningRev||qo.winningRev(d),a="deleted"in d?d.deleted:qo.isDeleted(d,l),f="deleted"in k.metadata?k.metadata.deleted:qo.isDeleted(k.metadata),m=/^1-/.test(k.metadata.rev);a&&!f&&c&&m&&(m=k.data,m._rev=l,m._id=k.metadata.id,k=b_(m,c));g=qo.merge(d.rev_tree,k.metadata.rev_tree[0],g);if(c&&(a&&f&&"new_leaf"!==g.conflicts||!a&&"new_leaf"!==g.conflicts||a&&!f&&"new_branch"===g.conflicts))return k=hp.createError(hp.REV_CONFLICT),e[h]=k,n();e=k.metadata.rev;k.metadata.rev_tree=g.tree;k.stemmedRevs=g.stemmedRevs||
[];d.rev_map&&(k.metadata.rev_map=d.rev_map);d=qo.winningRev(k.metadata);c=qo.isDeleted(k.metadata,d);a=a===c?0:a<c?-1:1;e=e===d?c:qo.isDeleted(k.metadata,e);b(k,d,c,e,!0,a,h,n)}function rD(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function e_(g,d){g=new Uint8Array(g);return sD.blob([g],{type:d})}function Daa(g,d){sD.readAsBinaryString(g,d)}function f_(g,d){d=d.prefix()[0];g=g._cache;var k=g.get(d);k||(k=new Mr.Map,g.set(d,k));return k}function Hy(){this._batch=[];this._cache=
new Mr.Map}function $N(g){return"winningRev"in g?g.winningRev:tD.winningRev(g)}function Eaa(g,d,k){var e=g.content_type;return new Promise(function(h,n){d.binaryStore.get(g.digest,function(b,c){if(b){if("NotFoundError"!==b.name)return n(b);b=k.binary?sD.binaryStringToBlobOrBuffer("",e):""}else b=k.binary?e_(c,e):c.toString("base64");delete g.stub;delete g.length;g.data=b;h()})})}function aO(g,d,k){var e=[];g.forEach(function(h){h.doc&&h.doc._attachments&&Object.keys(h.doc._attachments).forEach(function(n){n=
h.doc._attachments[n];"data"in n||e.push(n)})});return Promise.all(e.map(function(h){return Eaa(h,d,k)}))}function bO(g){(this||Iy).db=g;(this||Iy)._ended=!1;(this||Iy)._nexting=!1}function Bw(g){(this||Nj)._db=g;(this||Nj)._operations=[];(this||Nj)._written=!1}function zn(g){if(!arguments.length||void 0===g)throw Error("constructor requires at least a location argument");if("string"!=typeof g)throw Error("constructor requires a location string argument");(this||vk).location=g;(this||vk).status="new"}
function ip(g,d,k,e,h,n){this._color=g;this.key=d;this.value=k;this.left=e;this.right=h;this._count=n}function kt(g){return new ip(g._color,g.key,g.value,g.left,g.right,g._count)}function Cw(g,d){return new ip(g,d.key,d.value,d.left,d.right,d._count)}function Oj(g){g._count=1+(g.left?g.left._count:0)+(g.right?g.right._count:0)}function PA(g,d){this._compare=g;this.root=d}function cO(g,d){if(d.left){var k=cO(g,d.left);if(k)return k}if(k=g(d.key,d.value))return k;if(d.right)return cO(g,d.right)}function dO(g,
d,k,e){if(0>=d(g,e.key)){if(e.left){var h=dO(g,d,k,e.left);if(h)return h}if(h=k(e.key,e.value))return h}if(e.right)return dO(g,d,k,e.right)}function eO(g,d,k,e,h){var n=k(g,h.key),b=k(d,h.key);if(0>=n&&(h.left&&(n=eO(g,d,k,e,h.left))||0<b&&(n=e(h.key,h.value))))return n;if(0<b&&h.right)return eO(g,d,k,e,h.right)}function jp(g,d){this.tree=g;this._stack=d}function g_(g,d){g.key=d.key;g.value=d.value;g.left=d.left;g.right=d.right;g._color=d._color;g._count=d._count}function Faa(g,d){return g<d?-1:g>
d?1:0}function h_(g,d){for(var k in g)d[k]=g[k]}function QA(g,d,k){return Xu(g,d,k)}function Gaa(g){return 0<kp.compare(g,(this||Se)._end)}function Haa(g){return 0<=kp.compare(g,(this||Se)._end)}function Iaa(g){return 0>kp.compare(g,(this||Se)._end)}function Jaa(g){return 0>=kp.compare(g,(this||Se)._end)}function CH(g,d){i_.call(this||Se,g);(this||Se)._limit=d.limit;-1===(this||Se)._limit&&((this||Se)._limit=Infinity);g=g._store[g._location];(this||Se).keyAsBuffer=!1!==d.keyAsBuffer;(this||Se).valueAsBuffer=
!1!==d.valueAsBuffer;(this||Se)._reverse=d.reverse;(this||Se)._options=d;(this||Se)._done=0;(this||Se)._reverse?((this||Se)._incr="prev",(this||Se)._start=kp.upperBound(d),(this||Se)._end=kp.lowerBound(d),"undefined"===typeof(this||Se)._start?(this||Se)._tree=g.end:kp.upperBoundInclusive(d)?(this||Se)._tree=g.le((this||Se)._start):(this||Se)._tree=g.lt((this||Se)._start),(this||Se)._end&&(kp.lowerBoundInclusive(d)?(this||Se)._test=Haa:(this||Se)._test=Gaa)):((this||Se)._incr="next",(this||Se)._start=
kp.lowerBound(d),(this||Se)._end=kp.upperBound(d),"undefined"===typeof(this||Se)._start?(this||Se)._tree=g.begin:kp.lowerBoundInclusive(d)?(this||Se)._tree=g.ge((this||Se)._start):(this||Se)._tree=g.gt((this||Se)._start),(this||Se)._end&&(kp.upperBoundInclusive(d)?(this||Se)._test=Jaa:(this||Se)._test=Iaa))}function ro(g){if(!((this||Se)instanceof ro))return new ro(g);j_.call(this||Se,"string"===typeof g?g:"");(this||Se)._location=(this||Se).location?"$"+(this||Se).location:"_tree";(this||Se)._store=
(this||Se).location?RA:this||Se;(this||Se)._store[(this||Se)._location]=(this||Se)._store[(this||Se)._location]||Kaa(kp.compare)}function k_(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function fO(g,d){g=Laa.assign({db:Maa},g);Naa.call(this,g,d)}function gO(g){g&&(g.__serialize__=function(){return{__expr__:'({type: "'+g.type+'", name: "'+g.name+'", _id: "'+g._id+'"})'}});return g}function uD(g){var d,k,e,h,n,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress){if(!g||bg.obj.isEmpty(g))return l.return(!1);if(g&&g._rev)return l.return(g);d=g;k=d.type;e=d.name;h=d._id;l.setFinallyBlock(2);n=Object;b=n.assign;c=g;return l.yield(bg.MorphicDB.default.fetchCommit(k,e,h),4)}2!=l.nextAddress&&b.call(n,c,l.yieldResult);l.enterFinallyBlock();return l.return(g)})}function DH(g){return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:return g.label="loading System Elements",g.progress=0,g.status="core elements...",
d.yield(Ed.resource("styleguide://System/buttons/light").read(),2);case 2:return g.progress=.2,g.status="top bar...",d.yield(Ed.resource("styleguide://SystemIDE/lively top bar master").read(),3);case 3:return g.progress=.4,g.status="scene graph...",d.yield(Ed.resource("styleguide://SystemIDE/styling side bar master").read(),4);case 4:return g.progress=.6,g.status="styling palette...",d.yield(Ed.resource("styleguide://SystemIDE/scene graph side bar master").read(),5);case 5:return g.progress=.8,g.status=
"world loader...",d.yield(Ed.resource("styleguide://partial freezing/project browser").read(),6);case 6:return g.progress=1,d.yield(Ed.promise.delay(500),0)}})}function hO(g){delete Ed.fetchedSnapshots[g]}function Oaa(g,d){var k={};d.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,h,n){h&&(k[h]=n)});return k}function Paa(g){g=String(g);if(!(100<g.length)&&(g=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(g))){var d=parseFloat(g[1]);
switch((g[2]||"ms").toLowerCase()){case "years":case "year":case "yrs":case "yr":case "y":return d*Qaa;case "days":case "day":case "d":return d*vD;case "hours":case "hour":case "hrs":case "hr":case "h":return 36E5*d;case "minutes":case "minute":case "mins":case "min":case "m":return 6E4*d;case "seconds":case "second":case "secs":case "sec":case "s":return 1E3*d;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return d}}}function EH(g,d,k){if(!(g<d))return g<1.5*d?Math.floor(g/
d)+" "+k:Math.ceil(g/d)+" "+k+"s"}function Raa(g){var d=0,k;for(k in g)d=(d<<5)-d+g.charCodeAt(k),d|=0;return Ih.colors[Math.abs(d)%Ih.colors.length]}function iO(g){function d(){if(d.enabled){var e=+new Date;d.diff=e-(k||e);d.prev=k;k=d.curr=e;var h=Array(arguments.length);for(e=0;e<h.length;e++)h[e]=arguments[e];h[0]=Ih.coerce(h[0]);"string"!==typeof h[0]&&h.unshift("%O");var n=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,function(b,c){if("%%"===b)return b;n++;c=Ih.formatters[c];"function"===typeof c&&(b=
c.call(d,h[n]),h.splice(n,1),n--);return b});Ih.formatArgs.call(d,h);(d.log||Ih.log||console.log.bind(console)).apply(d,h)}}var k;d.namespace=g;d.enabled=Ih.enabled(g);d.useColors=Ih.useColors();d.color=Raa(g);d.destroy=Saa;"function"===typeof Ih.init&&Ih.init(d);Ih.instances.push(d);return d}function Saa(){var g=Ih.instances.indexOf(this||Taa);return-1!==g?(Ih.instances.splice(g,1),!0):!1}function l_(){try{var g=dn.storage.debug}catch(d){}!g&&"undefined"!==typeof jO&&"env"in jO&&(g=jO.env.DEBUG);
return g}function lp(g){if(g){for(var d in lp.prototype)g[d]=lp.prototype[d];return g}}function kO(g,d){if(!g)return g;if(m_(g)){var k={_placeholder:!0,num:d.length};d.push(g);return k}if(lO(g)){k=Array(g.length);for(var e=0;e<g.length;e++)k[e]=kO(g[e],d);return k}if("object"===typeof g&&!(g instanceof Date)){k={};for(e in g)k[e]=kO(g[e],d);return k}return g}function mO(g,d){if(!g)return g;if(g&&g._placeholder)return d[g.num];if(lO(g))for(var k=0;k<g.length;k++)g[k]=mO(g[k],d);else if("object"===
typeof g)for(k in g)g[k]=mO(g[k],d);return g}function n_(){}function o_(g){var d=""+g.type;if(pj.BINARY_EVENT===g.type||pj.BINARY_ACK===g.type)d+=g.attachments+"-";g.nsp&&"/"!==g.nsp&&(d+=g.nsp+",");null!=g.id&&(d+=g.id);if(null!=g.data){try{var k=JSON.stringify(g.data)}catch(e){k=!1}if(!1!==k)d+=k;else return Uaa}nO("encoded %j as %s",g,d);return d}function Vaa(g,d){oO.removeBlobs(g,function(k){var e=oO.deconstructPacket(k);k=o_(e.packet);e=e.buffers;e.unshift(k);d(e)})}function FH(){(this||um).reconstructor=
null}function pO(g){(this||um).reconPack=g;(this||um).buffers=[]}function GH(g){if(!g||"object"!==typeof g)return!1;if(Waa(g)){for(var d=0,k=g.length;d<k;d++)if(GH(g[d]))return!0;return!1}if("function"===typeof qO&&qO.isBuffer&&qO.isBuffer(g)||"function"===typeof ArrayBuffer&&g instanceof ArrayBuffer||Xaa&&g instanceof Blob||Yaa&&g instanceof File)return!0;if(g.toJSON&&"function"===typeof g.toJSON&&1===arguments.length)return GH(g.toJSON(),!0);for(d in g)if(Object.prototype.hasOwnProperty.call(g,
d)&&GH(g[d]))return!0;return!1}function Zaa(){}function p_(g){return g.map(function(d){if(d.buffer instanceof ArrayBuffer){var k=d.buffer;if(d.byteLength!==k.byteLength){var e=new Uint8Array(d.byteLength);e.set(new Uint8Array(k,d.byteOffset,d.byteLength));k=e.buffer}return k}return d})}function q_(g,d){d=d||{};var k=new SA;p_(g).forEach(function(e){k.append(e)});return d.type?k.getBlob(d.type):k.getBlob()}function r_(g,d){return new Blob(p_(g),d||{})}function s_(g){for(var d=[],k=0,e=g.length,h,n;k<
e;)h=g.charCodeAt(k++),55296<=h&&56319>=h&&k<e?(n=g.charCodeAt(k++),56320==(n&64512)?d.push(((h&1023)<<10)+(n&1023)+65536):(d.push(h),k--)):d.push(h);return d}function t_(g,d){if(55296<=g&&57343>=g){if(d)throw Error("Lone surrogate U+"+g.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function TA(){if(Dw>=HH)throw Error("Invalid byte index");var g=IH[Dw]&255;Dw++;if(128==(g&192))return g&63;throw Error("Invalid continuation byte");}function $aa(g){if(Dw>HH)throw Error("Invalid byte index");
if(Dw==HH)return!1;var d=IH[Dw]&255;Dw++;if(0==(d&128))return d;if(192==(d&224)){var k=TA();d=(d&31)<<6|k;if(128<=d)return d;throw Error("Invalid continuation byte");}if(224==(d&240)){k=TA();var e=TA();d=(d&15)<<12|k<<6|e;if(2048<=d)return t_(d,g)?d:65533;throw Error("Invalid continuation byte");}if(240==(d&248)&&(k=TA(),e=TA(),g=TA(),d=(d&7)<<18|k<<12|e<<6|g,65536<=d&&1114111>=d))return d;throw Error("Invalid UTF-8 detected");}function aba(g,d,k){if(!d)return xi.encodeBase64Packet(g,k);var e=new FileReader;
e.onload=function(){xi.encodePacket({type:g.type,data:e.result},d,!0,k)};return e.readAsArrayBuffer(g.data)}function rO(g,d,k){var e=Array(g.length);k=bba(g.length,k);for(var h=function(b,c,l){d(c,function(a,f){e[b]=f;l(a,e)})},n=0;n<g.length;n++)h(n,g[n],k)}function sO(g){var d="";do d=u_[g%64]+d,g=Math.floor(g/64);while(0<g);return d}function tO(){var g=sO(+new Date);return g!==v_?(w_=0,v_=g):g+"."+sO(w_++)}function lt(g){(this||Vh).path=g.path;(this||Vh).hostname=g.hostname;(this||Vh).port=g.port;
(this||Vh).secure=g.secure;(this||Vh).query=g.query;(this||Vh).timestampParam=g.timestampParam;(this||Vh).timestampRequests=g.timestampRequests;(this||Vh).readyState="";(this||Vh).agent=g.agent||!1;(this||Vh).socket=g.socket;(this||Vh).enablesXDR=g.enablesXDR;(this||Vh).withCredentials=g.withCredentials;(this||Vh).pfx=g.pfx;(this||Vh).key=g.key;(this||Vh).passphrase=g.passphrase;(this||Vh).cert=g.cert;(this||Vh).ca=g.ca;(this||Vh).ciphers=g.ciphers;(this||Vh).rejectUnauthorized=g.rejectUnauthorized;
(this||Vh).forceNode=g.forceNode;(this||Vh).isReactNative=g.isReactNative;(this||Vh).extraHeaders=g.extraHeaders;(this||Vh).localAddress=g.localAddress}function mt(g){var d=g&&g.forceBase64;if(!cba||d)(this||ni).supportsBinary=!1;x_.call(this||ni,g)}function y_(){}function UA(g){z_.call(this||qe,g);(this||qe).requestTimeout=g.requestTimeout;(this||qe).extraHeaders=g.extraHeaders;if("undefined"!==typeof location){var d="https:"===location.protocol,k=location.port;k||(k=d?443:80);(this||qe).xd="undefined"!==
typeof location&&g.hostname!==location.hostname||k!==g.port;(this||qe).xs=g.secure!==d}}function xl(g){(this||qe).method=g.method||"GET";(this||qe).uri=g.uri;(this||qe).xd=!!g.xd;(this||qe).xs=!!g.xs;(this||qe).async=!1!==g.async;(this||qe).data=void 0!==g.data?g.data:null;(this||qe).agent=g.agent;(this||qe).isBinary=g.isBinary;(this||qe).supportsBinary=g.supportsBinary;(this||qe).enablesXDR=g.enablesXDR;(this||qe).withCredentials=g.withCredentials;(this||qe).requestTimeout=g.requestTimeout;(this||
qe).pfx=g.pfx;(this||qe).key=g.key;(this||qe).passphrase=g.passphrase;(this||qe).cert=g.cert;(this||qe).ca=g.ca;(this||qe).ciphers=g.ciphers;(this||qe).rejectUnauthorized=g.rejectUnauthorized;(this||qe).extraHeaders=g.extraHeaders;this.create()}function A_(){for(var g in xl.requests)xl.requests.hasOwnProperty(g)&&xl.requests[g].abort()}function dba(){}function VA(g){uO.call(this||ai,g);(this||ai).query=(this||ai).query||{};JH||(JH=B_.___eio=B_.___eio||[]);(this||ai).index=JH.length;var d=this||ai;
JH.push(function(k){d.onData(k)});(this||ai).query.j=(this||ai).index;"function"===typeof addEventListener&&addEventListener("beforeunload",function(){d.script&&(d.script.onerror=dba)},!1)}function lq(g){g&&g.forceBase64&&((this||Pf).supportsBinary=!1);(this||Pf).perMessageDeflate=g.perMessageDeflate;(this||Pf).usingBrowserWebSocket=KH&&!g.forceNode;(this||Pf).protocols=g.protocols;(this||Pf).usingBrowserWebSocket||(WA=C_);vO.call(this||Pf,g)}function bi(g,d){if(!((this||gd)instanceof bi))return new bi(g,
d);d=d||{};g&&"object"===typeof g&&(d=g,g=null);g?(g=D_(g),d.hostname=g.host,d.secure="https"===g.protocol||"wss"===g.protocol,d.port=g.port,g.query&&(d.query=g.query)):d.host&&(d.hostname=D_(d.host).host);(this||gd).secure=null!=d.secure?d.secure:"undefined"!==typeof location&&"https:"===location.protocol;d.hostname&&!d.port&&(d.port=(this||gd).secure?"443":"80");(this||gd).agent=d.agent||!1;(this||gd).hostname=d.hostname||("undefined"!==typeof location?location.hostname:"localhost");(this||gd).port=
d.port||("undefined"!==typeof location&&location.port?location.port:(this||gd).secure?443:80);(this||gd).query=d.query||{};"string"===typeof(this||gd).query&&((this||gd).query=eba.decode((this||gd).query));(this||gd).upgrade=!1!==d.upgrade;(this||gd).path=(d.path||"/engine.io").replace(/\/$/,"")+"/";(this||gd).forceJSONP=!!d.forceJSONP;(this||gd).jsonp=!1!==d.jsonp;(this||gd).forceBase64=!!d.forceBase64;(this||gd).enablesXDR=!!d.enablesXDR;(this||gd).withCredentials=!1!==d.withCredentials;(this||
gd).timestampParam=d.timestampParam||"t";(this||gd).timestampRequests=d.timestampRequests;(this||gd).transports=d.transports||["polling","websocket"];(this||gd).transportOptions=d.transportOptions||{};(this||gd).readyState="";(this||gd).writeBuffer=[];(this||gd).prevBufferLen=0;(this||gd).policyPort=d.policyPort||843;(this||gd).rememberUpgrade=d.rememberUpgrade||!1;(this||gd).binaryType=null;(this||gd).onlyBinaryUpgrades=d.onlyBinaryUpgrades;(this||gd).perMessageDeflate=!1!==d.perMessageDeflate?d.perMessageDeflate||
{}:!1;!0===(this||gd).perMessageDeflate&&((this||gd).perMessageDeflate={});(this||gd).perMessageDeflate&&null==(this||gd).perMessageDeflate.threshold&&((this||gd).perMessageDeflate.threshold=1024);(this||gd).pfx=d.pfx||null;(this||gd).key=d.key||null;(this||gd).passphrase=d.passphrase||null;(this||gd).cert=d.cert||null;(this||gd).ca=d.ca||null;(this||gd).ciphers=d.ciphers||null;(this||gd).rejectUnauthorized=void 0===d.rejectUnauthorized?!0:d.rejectUnauthorized;(this||gd).forceNode=!!d.forceNode;(this||
gd).isReactNative="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();if("undefined"===typeof self||(this||gd).isReactNative)d.extraHeaders&&0<Object.keys(d.extraHeaders).length&&((this||gd).extraHeaders=d.extraHeaders),d.localAddress&&((this||gd).localAddress=d.localAddress);(this||gd).id=null;(this||gd).upgrades=null;(this||gd).pingInterval=null;(this||gd).pingTimeout=null;(this||gd).pingIntervalTimer=null;(this||gd).pingTimeoutTimer=
null;this.open()}function mk(g,d,k){(this||De).io=g;(this||De).nsp=d;(this||De).json=this||De;(this||De).ids=0;(this||De).acks={};(this||De).receiveBuffer=[];(this||De).sendBuffer=[];(this||De).connected=!1;(this||De).disconnected=!0;(this||De).flags={};k&&k.query&&((this||De).query=k.query);(this||De).io.autoConnect&&this.open()}function XA(g){g=g||{};(this||An).ms=g.min||100;(this||An).max=g.max||1E4;(this||An).factor=g.factor||2;(this||An).jitter=0<g.jitter&&1>=g.jitter?g.jitter:0;(this||An).attempts=
0}function yi(g,d){if(!((this||zd)instanceof yi))return new yi(g,d);g&&"object"===typeof g&&(d=g,g=void 0);d=d||{};d.path=d.path||"/socket.io";(this||zd).nsps={};(this||zd).subs=[];(this||zd).opts=d;this.reconnection(!1!==d.reconnection);this.reconnectionAttempts(d.reconnectionAttempts||Infinity);this.reconnectionDelay(d.reconnectionDelay||1E3);this.reconnectionDelayMax(d.reconnectionDelayMax||5E3);this.randomizationFactor(d.randomizationFactor||.5);(this||zd).backoff=new fba({min:this.reconnectionDelay(),
max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==d.timeout?2E4:d.timeout);(this||zd).readyState="closed";(this||zd).uri=g;(this||zd).connecting=[];(this||zd).lastPing=null;(this||zd).encoding=!1;(this||zd).packetBuffer=[];g=d.parser||gba;(this||zd).encoder=new g.Encoder;(this||zd).decoder=new g.Decoder;(this||zd).autoConnect=!1!==d.autoConnect;(this||zd).autoConnect&&this.open()}function E_(g,d){"object"===typeof g&&(d=g,g=void 0);d=d||{};g=hba(g);var k=g.source,
e=g.id,h=g.path;h=wD[e]&&h in wD[e].nsps;d.forceNew||d["force new connection"]||!1===d.multiplex||h?(F_("ignoring socket cache for %s",k),k=G_(k,d)):(wD[e]||(F_("new io instance for %s",k),wD[e]=G_(k,d)),k=wD[e]);g.query&&!d.query&&(d.query=g.query);return k.socket(g.path,d)}function Jy(g,d){d=void 0===d?{}:d;var k=d.l2lClient;if(!k)throw Error("lively.shell client side runCommand needs opts.l2lClient!");Lf.ClientCommand.installLively2LivelyServices(k);k=new Lf.ClientCommand(k);k.spawn(Object.assign({command:g},
Lf.obj.dissoc(d,["l2lClient"])));return k}function xD(g){return Lf.dirCache[g.trackerId]?Lf.dirCache[g.trackerId]:Promise.resolve().then(function(){var d,k,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(g.sendToAndWait(g.trackerId,"lively.shell.info",{}),2);d=h.yieldResult;k=d.data;e=k.defaultDirectory;return h.return(Lf.dirCache[g.trackerId]=e)})})}function yD(g){var d,k,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(g.sendToAndWait(g.trackerId,
"lively.shell.env",{}),2);d=h.yieldResult;k=d.data;e=k.env;return h.return(e)})}function LH(g,d){d=(d=void 0===d?{}:d)||{};var k=Lf.runCommand('cat "'+g+'"',d);return k.whenDone().then(function(){if(k.exitCode)throw Error("Read "+g+" failed: "+k.stderr);return k.output})}function MH(g,d,k){!k&&d&&d.content&&(k=d,d=k.content);var e=Lf.runCommand('tee "'+g+'"',Object.assign({stdin:d||""},k));return e.whenDone().then(function(){if(e.exitCode)throw Error("Write "+g+" failed: "+e.stderr);return e})}function NH(g,
d){d=void 0===d?{}:d;return Ph._runCommand(g,Object.assign({l2lClient:Ph.L2LClient.ensure(Ph.defaultConnection)},d))}function OH(){return Ph._defaultDirectory(Ph.L2LClient.ensure(Ph.defaultConnection))}function wO(){return Ph._env(Ph.L2LClient.ensure(Ph.defaultConnection))}function xO(g){function d(){0<e.length&&k.push(e);e=""}for(var k=[],e="",h="normal",n=0,b;b=g[n];n++)if("normal"===h&&/\s/.test(b))d();else{if('"'===b||"'"===b){if("normal"===h){h=b;continue}if(h===b){h="normal";continue}}"\\"===
b&&h===g[n+1]&&(n++,b=g[n]);e+=b}d();return k}function yO(g,d,k){var e=k=void 0===k?{}:k,h=e.exclusions,n=void 0===e.fileTypes?[]:e.fileTypes,b=void 0===e.sizeLimit?"+1M":e.sizeLimit;k=void 0===e.charsBefore?80:e.charsBefore;e=void 0===e.charsAfter?80:e.charsAfter;h||(h=Ph.defaultGrepExclusions);h=(h=[h.length?"-iname "+h.map(JSON.stringify).join(" -o -iname "):"",b?"-size "+b:""].filter(Boolean).join(" -o "))?"\\( "+h+" \\) -prune -o":"";n=(n=n.length?"-iname "+n.map(JSON.stringify).join(" -o -iname "):
"")?"-a \\( "+n+" \\)":"";b='find %s %s -type f %s -a -print0 | xargs -0 grep -IinH -o ".\\{0,%s\\}%s.\\{0,%s\\}" '.replace(/([\(\);])/g,"\\$1");g=Ph.string.format(b,d,h,n,k,g,e);var c=Ph.runCommand(g);c.whenDone().then(function(l){var a=l.exitCode;a&&1!==a||(c.results=l.stdout.split("\n").map(function(f){f=f.match(/(.*):([0-9]+):(.*)/);if(!f)return null;var m=$jscomp.makeIterator(f);m.next();f=m.next().value;var q=m.next().value;m=m.next().value;return{filename:f,lineno:Number(q)-1,match:m}}).filter(Boolean))});
return c}function PH(g,d){var k,e,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return k=wh.fileInfoCommandString(g,d),e=wh.runCommand(k,d),c.yield(e.whenDone(),2);if(h=0!=e.exitCode?e.output:null)throw h;n=$jscomp.makeIterator(wh.parseDirectoryListFromLs(e.stdout,d.rootDirectory||"."));b=n.next().value;return c.return(b)})}function zO(g,d){return wh.string.lines(g).map(function(k){return k.trim().length?(new wh.FileInfo(d)).readFromDirectoryListLine(k):
null}).filter(Boolean)}function QH(g,d){var k,e,h,n,b,c,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){k=Object.assign({findFilesGroup:"default-find-files-process"},d);e=k.findFilesGroup;h=k.rootDirectory;b=n=wh.findFilesProcesses[e]||(wh.findFilesProcesses[e]={promiseState:null,commands:[]});c=b.commands;l=b.promiseState;l||(n.promiseState=l=wh.promise.deferred());a=wh.findFilesCommandString(g,d);c.forEach(function(q){return q.kill()});f=wh.runCommand(a,d);c.push(f);f.whenDone().then(function(){wh.arr.remove(c,
f);if(c.some(function(r){return r.startTime>f.startTime}))console.log("[findFiles] command "+f+" exited but a newer findFiles command was started for group "+e+", discarding output");else{var q=0!=f.exitCode?f.output:null;q&&console.warn(q);q=q?[]:wh.parseDirectoryListFromLs(f.stdout,h)||[];l.resolve(q);Object.assign(n,{promiseState:null,commands:[]})}}).catch(function(q){return console.error(q)});return m.return(l.promise)})}function AO(g){function d(k){return Array.prototype.concat.apply([k],k.children?
k.children.map(d):[])}return d(g).map(function(k){var e=k.fullPath.replace(/^\//,"");return{fileName:e,path:e,rootDirectory:"./",isDirectory:k.isDirectory,isLink:void 0,lastModified:void 0,linkCount:void 0,mode:void 0,size:void 0,group:void 0,user:void 0}})}function BO(g){return[]}function RH(g,d){d=void 0===d?{}:d;var k,e,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return k=d.morphicDB||de.MorphicDB.default,b.yield(k.load("part","string"===typeof g?
g:g.name,d,"string"===typeof g?void 0:g),2);case 2:e=b.yieldResult;if(!e.isWindow||!e.targetMorph){b.jumpTo(3);break}h=e.targetMorph;return b.yield(de.ensureCommitInfo(e.metadata&&e.metadata.commit),4);case 4:(n=b.yieldResult)&&h.changeMetaData("commit",n,!0,!1);case 3:return b.return(e)}})}function CO(g,d,k,e,h,n){var b,c,l,a,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:v.setCatchFinallyBlocks(2);if(g.isMorph){v.jumpTo(4);break}if("function"!==
typeof g.beforePublish){v.jumpTo(5);break}return v.yield(g.beforePublish(d,g),5);case 4:b=[],g.withAllSubmorphsDo(function(y){"function"===typeof y.beforePublish&&b.push(y)}),c=$jscomp.makeIterator(b),l=c.next();case 8:if(l.done){v.jumpTo(5);break}a=l.value;return v.yield(a.beforePublish(),9);case 9:l=c.next();v.jumpTo(8);break;case 5:v.leaveTryBlock(3);break;case 2:f=v.enterCatchBlock(),m="Error in beforePublish of "+g+"\n"+f.stack,"function"===typeof g.world&&g.world()?g.world().logError(Error(m)):
console.error(m);case 3:return q=Object.assign({previewWidth:100,previewHeight:100,previewType:"png"},k),r=k.morphicDB||de.MorphicDB.default,v.yield(r.snapshotAndCommit("part",d,g,q,e,h,n),12);case 12:return u=v.yieldResult,de.emit("lively.partsbin/partpublished",u),v.return(u)}})}function zD(g,d){d=void 0===d?{}:d;var k,e,h,n,b,c,l,a,f,m,q,r,u,v,y,z,A,C,G,F,N,L,W,la,wa,D,Q,J,O,ja,X,ha,bb,pb,oa,ba,qa,Ga,ua,H,M,R,ca,Z,Aa,db,S,da,ea,Pa,kb,vc,mc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Yb){switch(Yb.nextAddress){case 1:return k=
d,e=void 0===k.showPublishDialog?!0:k.showPublishDialog,h=void 0===k.notifications?!0:k.notifications,n=void 0===k.loadingIndicator?!0:k.loadingIndicator,b=void 0===k.preferWindow?!0:k.preferWindow,a=g,f=g.world()||g.env.world,m=g.name,q=[],r="",Yb.yield(de.ensureCommitInfo(de.Path("metadata.commit").get(g)||de.Path("metadata.commit").get(a)),2);case 2:u=Yb.yieldResult;v=d.morphicDB||de.MorphicDB.default;u||(u={type:"part",name:g.name,author:f.getCurrentUser(),tags:[],description:"no description"});
if(!e){u&&(y=u,m=y.name,q=y.tags,r=y.description);Yb.jumpTo(3);break}z=f;A=z.openPrompt;return Yb.yield(de.loadPart("publish part dialog"),5);case 5:return Yb.yield(A.call(z,Yb.yieldResult,{part:g}),4);case 4:C=Yb.yieldResult;G=C.db;F=C.commit;if(!F)return Yb.return(null);G&&(d.morphicDB=v=G);N=F;m=N.name;q=N.tags;r=N.description;case 3:if(!n){Yb.jumpTo(6);break}L=$world.execCommand("open loading indicator","saving "+m+"...");return Yb.yield(de.promise.delay(80),6);case 6:Yb.setCatchFinallyBlocks(8,
9);W="HEAD";la=u?u.name:g.name;if(la===m){wa=u?u._id:void 0;Yb.jumpTo(11);break}return Yb.yield(v.exists("part",m),12);case 12:D=Yb.yieldResult;Q=D.exists;J=D.commitId;if(!Q){Yb.jumpTo(13);break}return Yb.yield(f.confirm('A part "'+m+'" already exists, overwrite?'),14);case 14:O=Yb.yieldResult;if(!O)return Yb.return(null);wa=J;case 13:a.name=m;case 11:return b&&!g.isWindow&&(ja=g.getWindow())&&ja.targetMorph===g&&(g=ja,l=ja.metadata,c=!0),X={author:g.world().getCurrentUser(),message:"published",tags:q,
description:r},Yb.yield(de.savePart(g,m,d,X,W,wa),15);case 15:ha=Yb.yieldResult;if(!c){Yb.jumpTo(16);break}if(a.metadata)return pb=a.metadata,Yb.yield(de.ensureCommitInfo(ja.metadata.commit),20);bb=a;return Yb.yield(de.ensureCommitInfo(ja.metadata.commit),19);case 19:bb.metadata={commit:Yb.yieldResult};Yb.jumpTo(18);break;case 20:pb.commit=Yb.yieldResult;case 18:ja.metadata=l;case 16:return h&&g.setStatusMessage("saved part "+m),Yb.return(ha);case 9:Yb.enterFinallyBlock();L&&L.remove();Yb.leaveFinallyBlock(0);
break;case 8:oa=Yb.enterCatchBlock();ba=$jscomp.makeIterator(oa.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[]);ba.next();ba.next();qa=ba.next().value;Ga=ba.next().value;if(!qa||!Ga){Yb.jumpTo(21);break}ua=$jscomp;H=ua.makeIterator;return Yb.yield(v.log(Ga,1,!0),22);case 22:return M=H.call(ua,Yb.yieldResult),ca=R=M.next().value,Z=ca.author,Aa=Z.name,db=ca.timestamp,S='The current version of part "'+m+'" is not the most recent!\nA newer version by '+
(Aa+" was saved on ")+(de.date.format(new Date(db),"yyyy-mm-dd HH:MM")+". Overwrite?"),Yb.yield(f.confirm(["Version Mismatch\n",{},S,{fontWeight:"normal",fontSize:16}]),23);case 23:da=Yb.yieldResult;if(!da)return Yb.return(null);ea=de.obj.dissoc(R,["preview"]);a.changeMetaData("commit",ea,!0,!1);return Yb.return(zD(a,Object.assign({},d,{morphicDB:v,showPublishDialog:!1})));case 21:Pa=$jscomp.makeIterator(oa.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but no version entry exists/)||
[]);Pa.next();Pa.next();kb=Pa.next().value;if(!kb){Yb.jumpTo(24);break}vc="Part "+m+" no longer exist in the object database.\nDo you still want to publish it?";return Yb.yield(f.confirm(vc),25);case 25:mc=Yb.yieldResult;if(!mc)return Yb.return(null);a.changeMetaData("commit",null,!0,!1);return Yb.return(zD(a,Object.assign({},d,{morphicDB:v,showPublishDialog:!1})));case 24:throw console.error(oa),h&&f.logError("Error saving part: "+oa),oa;}})}function DO(g){g=void 0===g?{}:g;var d,k,e,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==
c.nextAddress)return d=g.morphicDB||de.MorphicDB.default,c.yield(d.latestCommits("part"),2);if(3!=c.nextAddress)return k=c.yieldResult,e=k.map(function(l){return{isListItem:!0,string:l.name,value:l}}),c.yield($world.filterableListPrompt("Select part to load",e,{fuzzy:!0}),3);h=c.yieldResult;n=$jscomp.makeIterator(h.selected);b=n.next().value;return c.return(b?de.loadPart(b):null)})}function EO(g){var d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield($world.prompt("Enter part name to publish object under",
{input:g.name||"part-name",historyId:"lively.partsbin-partname-publish-to-folder-input-hist"}),2);d=k.yieldResult;if(!d)throw"canceled";return k.return(de.saveObjectToPartsbinFolder(g,d,{previewWidth:g.width,previewHeight:g.height}))})}function FO(g,d,k){k=void 0===k?{}:k;var e,h,n,b,c,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:k=Object.assign({preferWindow:!0},k);k.preferWindow&&(g=(e=g.getWindow())&&e.targetMorph===g?e:g);q.setCatchFinallyBlocks(2);
if(g.isMorph){q.jumpTo(4);break}if("function"!==typeof g.beforePublish){q.jumpTo(5);break}return q.yield(g.beforePublish(d,g),5);case 4:h=[],g.withAllSubmorphsDo(function(r){"function"===typeof r.beforePublish&&h.push(r)}),n=$jscomp.makeIterator(h),b=n.next();case 8:if(b.done){q.jumpTo(5);break}c=b.value;return q.yield(c.beforePublish(),9);case 9:b=n.next();q.jumpTo(8);break;case 5:q.leaveTryBlock(3);break;case 2:l=q.enterCatchBlock(),a="Error in beforePublish of "+g+"\n"+l.stack,"function"===typeof g.world&&
g.world()?g.world().logError(Error(a)):console.error(a);case 3:return q.yield(de.resource(k.partsbinFolder).ensureExistance(),12);case 12:return f=de.resource(k.partsbinFolder).join(d+".json"),q.yield(de.createMorphSnapshot(g,k),13);case 13:return m=q.yieldResult,q.yield(f.write(JSON.stringify(m,null,2)),14);case 14:return q.return({partName:d,url:f.url})}})}function SH(g,d){d=void 0===d?{}:d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(de.loadPart(g,d))})}function GO(g){var d=
{type:"input",extent:de.pt(420,24),fixedWidth:!0,fixedHeight:!0,padding:de.Rectangle.inset(4,4),border:{color:de.Color.gray,width:1}};return Object.assign(de.morph({extent:de.pt(420,24),layout:new de.VerticalLayout({resizeSubmorphs:!0,spacing:3}),submorphs:[Object.assign({},d,{name:"name input",placeholder:"name"}),Object.assign({},d,{name:"type input",placeholder:"type"}),Object.assign({},d,{name:"timestamp input",placeholder:"timestamp"}),{layout:new de.VerticalLayout({resizeSubmorphs:!0,spacing:3}),
submorphs:[Object.assign({},d,{name:"author.name input",placeholder:"author name"}),Object.assign({},d,{name:"author.email input",placeholder:"author email"}),Object.assign({},d,{name:"author.realm input",placeholder:"author realm"})]},Object.assign({},d,{name:"tags input",placeholder:"tags"}),Object.assign({},d,{height:70,name:"description input",type:"text"}),Object.assign({},d,{height:70,name:"message input",type:"text"}),Object.assign({},d,{height:70,name:"metadata input",type:"text"}),{layout:new de.HorizontalLayout({spacing:3,
direction:"centered"}),submorphs:[{type:"button",name:"ok button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}],name:"commit editor",get ui(){return{metadataInput:this.get("metadata input"),messageInput:this.get("message input"),descriptionInput:this.get("description input"),tagsInput:this.get("tags input"),authorRealmInput:this.get("author.realm input"),authorEmailInput:this.get("author.email input"),authorNameInput:this.get("author.name input"),timestampInput:this.get("timestamp input"),
typeInput:this.get("type input"),nameInput:this.get("name input"),cancelButton:this.get("cancel button"),okButton:this.get("ok button")}},set commit(k){this._commit=k;var e=k.type,h=k.timestamp,n=k.author,b=k.tags,c=k.description,l=k.metadata,a=this.ui,f=a.typeInput,m=a.timestampInput,q=a.authorNameInput,r=a.authorEmailInput,u=a.authorRealmInput,v=a.tagsInput,y=a.descriptionInput,z=a.messageInput,A=a.metadataInput;a.nameInput.input=k.name;f.input=e;m.input=String(new Date(h));q.input=n.name;r.input=
n.email;u.input=n.realm;v.input=b.join(" ");y.textString=c;z.textString="";A.textString=l?JSON.stringify(l,null,2):""},get commit(){var k=this._commit;if(!k)throw Error("commit editor does not have a _commit object");var e=this.ui,h=e.authorNameInput,n=e.authorEmailInput,b=e.authorRealmInput,c=e.tagsInput,l=e.descriptionInput,a=e.messageInput,f=e.metadataInput,m=e.nameInput.input;e=e.typeInput.input;if(k.name!==m)throw Error("name does not match _commit.name: "+m+" vs "+k.name);if(k.type!==e)throw Error("type does not match _commit.type: "+
e+" vs "+k.type);k.author.name=h.input;k.author.email=n.input;k.author.realm=b.input;k.tags=c.input.split(" ").map(function(q){return q.trim()}).filter(Boolean);k.description=l.textString;k.message=a.textString;k.metadata=f.textString?JSON.parse(f.textString):null;return k},onLoad:function(){de.connect(this.ui.okButton,"fire",this,"accept");de.connect(this.ui.cancelButton,"fire",this,"cancel")},accept:function(){},cancel:function(){}}),g)}function TH(g,d,k){var e,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){e=
g.isResource?g:ef.resource(System.decanonicalize(g));h=e.nameWithoutExt();return n.return(ef.loadWorldFromDB(h,void 0,d,k))})}function UH(g,d,k){var e,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return e=ef.MorphicDB.default,b.yield(e.load("world",void 0,k,g),2);h=b.yieldResult;n="undefined"!==typeof document?document.location.search:"";k=Object.assign({pathForBrowserHistory:ef.pathForBrowserHistory(h.name,n)},k);return b.return(ef.loadWorld(h,d,k))})}function VH(g,
d,k,e){var h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return h=ef.MorphicDB.default,c.yield(h.load("world",g,e,void 0,d||void 0),2);n=c.yieldResult;b="undefined"!==typeof document?document.location.search:"";e=Object.assign({pathForBrowserHistory:ef.pathForBrowserHistory(g,b)},e);return c.return(ef.loadWorld(n,k,e))})}function WH(g,d,k){k=void 0===k?{}:k;var e,h,n,b,c,l,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:e=
k;h=e.env;n=void 0===e.verbose?!0:e.verbose;b=void 0===e.localconfig?!0:e.localconfig;c=void 0===e.l2l?!0:e.l2l;l=void 0===e.shell?!0:e.shell;a=void 0===e.worldLoadDialog?!1:e.worldLoadDialog;f=void 0===e.showUserFlap?"undefined"===typeof g.showsUserFlap?!0:g.showsUserFlap:e.showUserFlap;h=h||(d?d.env:ef.MorphicEnv.default());m=h.domEnv.document||document;q=m.getElementById("dom-loading-indicator");y.setCatchFinallyBlocks(2,3);if(!(r=c)){y.jumpTo(5);break}return y.yield(ef.setupLively2Lively(g),6);
case 6:r=y.yieldResult;case 5:u=r;if(!u||!l){y.jumpTo(7);break}return y.yield(ef.setupLivelyShell({l2lClient:u}),7);case 7:n&&q&&(q.style.display="");if(!b){y.jumpTo(9);break}return y.yield(ef.loadLocalConfig(),10);case 10:case 9:return y.yield(h.setWorld(g),11);case 11:a&&g.execCommand("load world");k.pathForBrowserHistory&&window.history.pushState({},"lively.next",k.pathForBrowserHistory);g.showsUserFlap=f;if(d)d.onUnload();ef.emit("world/loaded",g);return y.return(g);case 3:y.enterFinallyBlock();
q&&(q.style.display="none");y.leaveFinallyBlock(0);break;case 2:v=y.enterCatchBlock();console.error("Error loading world: ",v);if(!d){y.jumpTo(12);break}return y.yield(h.setWorld(d),13);case 13:d.showError(v);case 12:throw v;}})}function YA(g,d){var k,e,h,n,b,c,l,a,f,m,q,r,u,v,y,z,A,C,G,F,N,L,W,la,wa,D,Q,J,O,ja,X,ha,bb,pb,oa,ba,qa,Ga,ua,H,M,R,ca,Z,Aa,db,S,da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){switch(ea.nextAddress){case 1:return d=Object.assign({showSaveDialog:!0,useExpectedCommit:!0,
errorOnMissingExpectedCommit:!1,confirmOverwrite:!0},d),k=g.name,e=[],h="",ea.yield(ef.ensureCommitInfo(ef.Path("metadata.commit").get(g)),2);case 2:n=ea.yieldResult;b=d.morphicdb||ef.MorphicDB.default;c="";l="db";if(!d.showSaveDialog){n&&(a=n,k=a.name,e=a.tags,h=a.description);ea.jumpTo(3);break}return ea.yield(ef.resource("part://SystemDialogs/save world dialog").read(),4);case 4:return f=ea.yieldResult,ea.yield(g.openPrompt(f,{targetWorld:g}),5);case 5:if(m=ea.yieldResult,q=m.commit,r=m.db,u=m.mode,
v=m.filePath,r&&(b=r),l=u,c=v,y=q||{},k=y.name,e=y.tags,h=y.description,!k)return ea.return(null);case 3:return z=$world.execCommand("open loading indicator","saving "+k+"..."),ea.yield(ef.promise.delay(80),6);case 6:if("json"!=l){ea.jumpTo(7);break}A=ef.resource(System.baseURL).join(c).withRelativePartsResolved();return ea.yield(A.exists(),8);case 8:return ea.yieldResult?(z.visible=!1,ea.yield($world.confirm(["File Conflict\n",{},"The file you want to save the world to\n",{fontSize:15,fontWeight:"normal"},
A.url,{textStyle:"italic",fontSize:15,fontWeight:"normal"},"\n already exists. Overwrite?",{fontSize:15,fontWeight:"normal"}],{lineWrapping:!1}),12)):ea.yield(A.ensureExistance(),10);case 12:C=ea.yieldResult;if(!C)return z.remove(),ea.return();z.visible=!0;case 10:return g.changeMetaData("file",c,!1,!1),ea.yield(ef.createMorphSnapshot(g),13);case 13:return G=ea.yieldResult,ea.yield(A.writeJson(G),14);case 14:return F=JSON.stringify(G),N=c.replace(".json",".br.json"),L=ef,W=L.resource,ea.yield(ef.defaultDirectory(ef.ShellClientResource.defaultL2lClient),
16);case 16:return ea.yield(W.call(L,ea.yieldResult+"/..").join(N).withRelativePartsResolved().brotli(F),15);case 15:return ef.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(k).read(),z.remove(),g.setStatusMessage("saved world "+k+" to file: "+A.url),ea.return();case 7:ea.setCatchFinallyBlocks(17,18);la={previewWidth:200,previewHeight:200,previewType:"png",ignoreMorphs:[z]};wa="HEAD";D=n?n.name:g.name;if(!d.useExpectedCommit){ea.jumpTo(20);break}if(D===k||!d.confirmOverwrite){Q=
n?n._id:void 0;ea.jumpTo(20);break}return ea.yield(b.exists("world",k),22);case 22:J=ea.yieldResult;O=J.exists;ja=J.commitId;if(!O){ea.jumpTo(23);break}return ea.yield(g.confirm('A world "'+k+'" already exists, overwrite?',{styleClasses:["Halo"],fill:ef.Color.rgba(0,0,0,.8)}),24);case 24:X=ea.yieldResult;if(!X)return ea.return(null);Q=ja;case 23:g.name=k;case 20:return ha={author:g.getCurrentUser(),message:"world save",tags:e,description:h},ea.yield(b.snapshotAndCommit("world",k,g,la,ha,wa,Q),25);
case 25:return bb=ea.yieldResult,window.history&&(pb=ef.pathForBrowserHistory(k),window.history.pushState({},"lively.next",pb)),ef.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(k).read(),g.setStatusMessage("saved world "+k),g.get("world-list")&&g.get("world-list").onWorldSaved(k),ea.return(bb);case 18:ea.enterFinallyBlock();z.remove();ea.leaveFinallyBlock(0);break;case 17:oa=ea.enterCatchBlock();if(oa.message.includes("but no version entry exists")&&!d.errorOnMissingExpectedCommit)return ea.return(YA(g,
Object.assign({},d,{morphicdb:b,useExpectedCommit:!1,showSaveDialog:!1})));ba=$jscomp.makeIterator(oa.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[]);ba.next();ba.next();qa=ba.next().value;Ga=ba.next().value;if(!qa||!Ga){ea.jumpTo(26);break}ua=$jscomp;H=ua.makeIterator;return ea.yield(b.log(Ga,1,!0),27);case 27:M=H.call(ua,ea.yieldResult);R=M.next().value;ca=!0;if(!d.confirmOverwrite){ea.jumpTo(28);break}Z=R;Aa=Z.author;db=Aa.name;
S=Z.timestamp;da="The current version of world "+k+" is not the most recent!\nA newer version by "+(db+" was saved on ")+(ef.date.format(new Date(S),"yyyy-mm-dd HH:MM")+". Overwrite?");return ea.yield(g.confirm(["Version Conflict\n",null,da,{fontSize:16,fontWeight:"normal"}],{width:600}),29);case 29:ca=ea.yieldResult;case 28:if(!ca)return ea.return(null);g.changeMetaData("commit",ef.obj.dissoc(R,["preview"]),!0,!1);return ea.return(YA(g,Object.assign({},d,{morphicdb:b,showSaveDialog:!1})));case 26:console.error(oa),
g.logError("Error saving world: "+oa),ea.jumpTo(18)}})}function HO(g,d){var k=g.row;g=g.column;var e=d.row;d=d.column;return k<e?-2:k===e?g<d?-1:g===d?0:1:2}function nt(g,d){return 0>Yj.comparePosition(g,d)}function ZA(g,d){return 0>=Yj.comparePosition(g,d)}function ot(g,d){return 0===Yj.comparePosition(g,d)}function $A(g,d){return Yj.lessPosition(g,d)?g:d}function aB(g,d){return Yj.lessPosition(g,d)?d:g}function IO(g,d){if(!g||!d)return g==d;var k=!0,e={},h;for(h in g)if(e[h]=!0,!d.hasOwnProperty(h)||
g[h]!==d[h]){k=!1;break}if(k)for(var n in d)if(!(e[n]||g.hasOwnProperty(n)&&g[n]===d[n])){k=!1;break}return k}function XH(g,d,k,e,h){h=void 0===h?"":h;var n="string"!==typeof g,b="string"!==typeof k;if(n||b){var c=[];n?c.push(g,d):c.push(g+h,d);b?c.push(k,e):c.push(k+h,e);return c}return!d&&!e||d==e?[g+h+k,d]:d&&e?yg.shallowEquals(d,e)?[g+h+k,d]:[g+h,d,k,e]:[g+h,d,k,e]}function YH(g,d){d=void 0===d?"":d;if(2>=g.length)return g;var k=[],e=$jscomp.makeIterator(g),h=e.next().value,n=e.next().value;for(e=
2;e<g.length;e+=2)n=yg.concatAttributePair(h,n,g[e],g[e+1],d),2>=n.length?(h=n[0],n=n[1]):(k.push.apply(k,$jscomp.arrayFromIterable(n.slice(0,-2))),n=$jscomp.makeIterator(n.slice(-2)),h=n.next().value,n=n.next().value);k.push(h,n);return k}function ZH(g,d){for(var k=0,e=0;e<g.length;e+=2){var h=g[e],n=k+("string"===typeof h?h.length:1);if(n<d)k=n;else{if(k===d)return[g.slice(0,e),g.slice(e)];if(n===d)return[g.slice(0,e+2),g.slice(e+2)];if("string"!==typeof h)throw Error("Assuming text is a string for splitting it, got "+
h+" instead!");var b=g[e+1],c=d-k;n=[].concat($jscomp.arrayFromIterable(g.slice(0,e)),[h.slice(0,c),b]);g=h.length===c?g.slice(e+2):[h.slice(d-k),b].concat($jscomp.arrayFromIterable(g.slice(e+2)));return[n,g]}}return[g,[]]}function $H(g,d){var k=g;g=0;for(var e=[],h=0;h<d.length;h++){var n=$jscomp.makeIterator(yg.splitTextAndAttributesAt(k,d[h]-g));k=n.next().value;n=n.next().value;e.push(k);for(var b=0;b<k.length;b+=2)g+="string"===typeof k[b]?k[b].length:1;k=n}e.push(k);return e}function aI(g,d,
k){k=void 0===k?!1:k;if(!g.length||2===g.length&&""==g[0])return k?d:d.slice();if(!d.length||2===d.length&&""==d[0])return k?g:g.slice();g=k?g:g.slice();for(k=0;k<d.length;k+=2)g.push(d[k],d[k+1]);return g}function bI(g,d,k){var e=d.start;d=d.end;if(yg.eqPosition(e,d))return null;yg.lessPosition(d,e)&&(d=$jscomp.makeIterator([d,e]),e=d.next().value,d=d.next().value);var h=e;e=h.row;var n=h.column;h=d;d=h.row;h=h.column;var b=g.getLine(e),c=b.textAndAttributes,l=0;n=$jscomp.makeIterator(yg.splitTextAndAttributesAt(c,
n));g=n.next().value;n=n.next().value;c.length=0;yg.textAndAttributesDo(g,function(m,q){l+="string"===typeof m?m.length:1;c.push(m,q)});if(e===d){var a=$jscomp.makeIterator(yg.splitTextAndAttributesAt(n,h-l));n=a.next().value;a=a.next().value}yg.textAndAttributesDo(n,function(m,q){return c.push(m,k(b,q))});e===d&&yg.textAndAttributesDo(a,function(m,q){return c.push(m,q)});b._textAttributes=null;b.textAndAttributes=yg.joinTextAttributes(c);if(e!==d){a={};for(e+=1;e<d;a={$jscomp$loop$prop$textAndAttributes$1421$2557:a.$jscomp$loop$prop$textAndAttributes$1421$2557},
e++)b=b.nextLine(),a.$jscomp$loop$prop$textAndAttributes$1421$2557=b.textAndAttributes,g=a.$jscomp$loop$prop$textAndAttributes$1421$2557.slice(),a.$jscomp$loop$prop$textAndAttributes$1421$2557.length=0,yg.textAndAttributesDo(g,function(m){return function(q,r){return m.$jscomp$loop$prop$textAndAttributes$1421$2557.push(q,k(b,r))}}(a)),b._textAttributes=null,b.textAndAttributes=yg.joinTextAttributes(a.$jscomp$loop$prop$textAndAttributes$1421$2557);b=b.nextLine();var f=b.textAndAttributes;e=$jscomp.makeIterator(yg.splitTextAndAttributesAt(f,
h));a=e.next().value;e=e.next().value;f.length=0;yg.textAndAttributesDo(a,function(m,q){return f.push(m,k(b,q))});yg.textAndAttributesDo(e,function(m,q){return f.push(m,q)});b._textAttributes=null;b.textAndAttributes=yg.joinTextAttributes(f)}}function cI(g,d){var k=g.column;g=g.row;var e=[],h=[];d=$jscomp.makeIterator(yg.splitTextAndAttributesIntoLines(d));for(var n=d.next();!n.done;n=d.next()){n=n.value;for(var b=0;b<n.length;b+=2){var c=n[b];c=k+("string"===typeof c?c.length:1);e.push({start:{row:g,
column:k},end:{row:g,column:c}});h.push(n[b],n[b+1]);k=c}k=0;g++}return{ranges:e,textAndAttributes:h}}function AD(g,d){d=void 0===d?"\n":d;if(!g.length)return[];for(var k=[],e=[],h=0;h<g.length;h+=2){var n=g[h],b=g[h+1];if("string"!==typeof n)e.push(n,b);else for(;n.length;){var c=n.indexOf(d);if(-1===c){e.push(n,b);break}0<c&&e.push(n.slice(0,c),b);k.push(e);n=n.slice(c+1);e=[]}}e.length?k.push(e):(e=$jscomp.makeIterator(g.slice(-2)),g=e.next().value,e=e.next().value,"string"===typeof g&&g.endsWith(d)&&
k.push(["",e]));return k}function dI(g,d){d=void 0===d?g.textAndAttributesInRange(g.selection.range):d;var k=new g.constructor(Object.assign({},g.defaultTextStyle,{width:g.width,textAndAttributes:d}));d=k.textRenderer.directRenderTextLayerFn(k);g=k.textRenderer.directRenderLineFn(k);d=d();var e=System.global&&System.global.getComputedStyle?System.global.getComputedStyle(d):null;e&&(d.ownerDocument.body.appendChild(d),d.style.whiteSpace=e.whiteSpace,d.style.overflowWrap=e.overflowWrap,d.style.wordBreak=
e.wordBreak,d.style.minWidth=e.minWidth,d.parentNode.removeChild(d));k=$jscomp.makeIterator(k.document.lines);for(e=k.next();!e.done;e=k.next())d.appendChild(g(e.value));return d.outerHTML}function Yu(g){return g?g.replace(/^\s+|\s+$/g,""):""}function JO(g,d){var k=g&&"string"===typeof g.type,e=k?g:d,h;for(h in g){var n=g[h];Array.isArray(n)?n.forEach(function(b){JO(b,e)}):n&&"object"===typeof n&&JO(n,e)}k&&Object.defineProperty(g,"parent",{configurable:!0,writable:!0,enumerable:!1,value:d||null});
return g}function eI(g){(this||iba).options=g||{}}function Wk(g){g=g||{};H_.call(this||Ew,g);(this||Ew).indentation=g.indent}function Ky(g){throw new RangeError(jba[g]);}function I_(g,d){var k=g.split("@"),e="";1<k.length&&(e=k[0]+"@",g=k[1]);g=g.replace(kba,".").split(".");k=[];for(var h=g.length;h--;)k[h]=d(g[h]);d=k.join(".");return e+d}function J_(g){for(var d=[],k=0,e=g.length;k<e;){var h=g.charCodeAt(k++);if(55296<=h&&56319>=h&&k<e){var n=g.charCodeAt(k++);56320==(64512&n)?d.push(((1023&h)<<
10)+(1023&n)+65536):(d.push(h),k--)}else d.push(h)}return d}function mq(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function BD(g,d,k){if(g&&pt.isObject(g)&&g instanceof mq)return g;var e=new mq;return e.parse(g,d,k),e}function qt(g){if("string"!=typeof g)throw new TypeError("Path must be a string. Received "+JSON.stringify(g));}function K_(g,d){for(var k,e="",h=0,n=-1,b=0,c=0;c<=g.length;++c){if(c<
g.length)k=g.charCodeAt(c);else{if(47===k)break;k=47}if(47===k){if(n!==c-1&&1!==b)if(n!==c-1&&2===b){if(2>e.length||2!==h||46!==e.charCodeAt(e.length-1)||46!==e.charCodeAt(e.length-2))if(2<e.length){if(n=e.lastIndexOf("/"),n!==e.length-1){-1===n?(e="",h=0):h=(e=e.slice(0,n)).length-1-e.lastIndexOf("/");n=c;b=0;continue}}else if(2===e.length||1===e.length){e="";h=0;n=c;b=0;continue}d&&(0<e.length?e+="/..":e="..",h=2)}else 0<e.length?e+="/"+g.slice(n+1,c):e=g.slice(n+1,c),h=c-n-1;n=c;b=0}else 46===
k&&-1!==b?++b:b=-1}return e}function KO(g,d){try{return decodeURIComponent(g.join(""))}catch(e){}if(1===g.length)return g;d=d||1;var k=g.slice(0,d);g=g.slice(d);return Array.prototype.concat.call([],KO(k),KO(g))}function LO(){return Array.prototype.reduce.call(arguments,function(g,d){return lba.resolve(g,d)})}function L_(g){return"\\"===mba.sep?g.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):g}function CD(g){return nba(g.replace(/\+/g,"%2B"))}function fI(g,d,k){oba.nextTick(function(){g(d,k)})}function bB(g,
d){try{return JSON.parse(g.replace(/^\)\]\}'/,""))}catch(k){throw k.sourceMapData=d,k;}}function M_(g,d,k){d=CD(d);try{return String(g(d))}catch(e){throw e.sourceMapData=k,e;}}function N_(g,d,k,e){try{var h=O_(g,d)}catch(n){return fI(e,n)}if(!h||h.map)return fI(e,null,h);g=CD(h.url);k(g,function(n,b){if(n)return n.sourceMapData=h,e(n);h.map=String(b);try{h.map=bB(h.map,h)}catch(c){return e(c)}e(null,h)})}function P_(g,d,k){g=O_(g,d);if(!g||g.map)return g;g.map=M_(k,g.url,g);g.map=bB(g.map,g);return g}
function O_(g,d){d=L_(d);g=(g=g.match(pba))?g[1]||g[2]||"":null;if(!g)return null;var k=g.match(qba);if(k){var e=k[1]||"text/plain",h=k[2]||"";k=k[3]||"";d={sourceMappingURL:g,url:null,sourcesRelativeTo:d,map:k};if(!rba.test(e)){var n=Error("Unuseful data uri mime type: "+e);n.sourceMapData=d;throw n;}try{if(";base64"===h)if("undefined"===typeof TextDecoder||"undefined"===typeof Uint8Array)n=Q_(k);else{var b=Q_(k),c=b.length,l=new Uint8Array(c);for(g=0;g<c;g++)l[g]=b.charCodeAt(g);n=(new TextDecoder(sba,
{fatal:!0})).decode(l)}else n=decodeURIComponent(k);d.map=bB(n,d)}catch(a){throw a.sourceMapData=d,a;}return d}n=LO(d,g);return{sourceMappingURL:g,url:n,sourcesRelativeTo:n,map:null}}function R_(g,d,k,e,h){"function"===typeof e&&(h=e,e={});var n=g.sources?g.sources.length:0,b={sourcesResolved:[],sourcesContent:[]};if(0===n)fI(h,null,b);else{var c=function(){n--;0===n&&h(null,b)};S_(g,d,e,function(l,a,f){b.sourcesResolved[f]=l;"string"===typeof a?(b.sourcesContent[f]=a,fI(c,null)):(l=CD(l),k(l,function(m,
q){b.sourcesContent[f]=m?m:String(q);c()}))})}}function T_(g,d,k,e){var h={sourcesResolved:[],sourcesContent:[]};if(!g.sources||0===g.sources.length)return h;S_(g,d,e,function(n,b,c){h.sourcesResolved[c]=n;if(null!==k)if("string"===typeof b)h.sourcesContent[c]=b;else{n=CD(n);try{h.sourcesContent[c]=String(k(n))}catch(l){h.sourcesContent[c]=l}}});return h}function S_(g,d,k,e){k=k||{};d=L_(d);for(var h,n,b=0,c=g.sources.length;b<c;b++)h=null,"string"===typeof k.sourceRoot?h=k.sourceRoot:"string"===
typeof g.sourceRoot&&!1!==k.sourceRoot&&(h=g.sourceRoot),h=null===h||""===h?LO(d,g.sources[b]):LO(d,h.replace(tba,"/"),g.sources[b]),n=(g.sourcesContent||[])[b],e(h,n,b)}function $l(g){U_.call(this||MO,g)}function gI(g){if(g&&g.isListItem&&"string"===typeof g.string)return g;if(!g||!g.isListItem)return{isListItem:!0,string:String(g),value:g};var d=g.string||g.label||"no item.string";g.string=d&&"string"!==typeof d?Array.isArray(d)?d.map(function(k,e){return 0==e%2?String(k):""}).join(""):String(d):
String(d);return g}function hI(g){var d=g.filePath,k=g.worldName,e=g.commit,h=g.loadingIndicator,n=g.progress,b=void 0===g.logError?function(F){return console.log(F)}:g.logError,c,l,a,f,m,q,r,u,v,y,z,A,C,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:return F.setCatchFinallyBlocks(2),c=JSON.parse(localStorage.getItem("lively.load-config")||'{"lively.lang":"dynamic","lively.ast":"dynamic","lively.source-transform":"dynamic","lively.classes":"dynamic","lively.vm":"dynamic","lively.modules":"dynamic","lively.user":"dynamic","lively.storage":"dynamic","lively.morphic":"dynamic"}'),
n.opacity=0,n.hasFixedPosition=!0,n.openInWorld(),n.bottomCenter=h.topCenter,F.yield(Td.polyfills(),4);case 4:return l=$world.env,Td.doBootstrap?F.yield(Td.bootstrapLivelySystem(h,n,c),8):F.yield(Td.fastPrepLivelySystem(h),7);case 7:F.jumpTo(6);break;case 8:case 6:return h.label="Loading lively.2lively...",F.yield(lively.modules.registerPackage("lively.2lively"),9);case 9:Td.askBeforeQuit&&window.addEventListener("beforeunload",function(N){return N.returnValue="Really?"},!0);if("dynamic"!=c["lively.morphic"]||
Td.fastLoad){a=lively.morphic;F.jumpTo(10);break}h.label="Loading lively.morphic...";return F.yield(lively.modules.importPackage("lively.morphic"),11);case 11:a=F.yieldResult,n.finishPackage({packageName:"lively.morphic",loaded:!0});case 10:h.label="Loading world...";window.onresize=null;window.loadCompiledFrozenPart=lively.modules.module("lively.morphic/partsbin.js")._recorder.loadPart;lively.FreezerRuntime=!1;f=document.location;window.worldLoadingIndicator=h;F.setCatchFinallyBlocks(12);m={verbose:!0,
localconfig:!0,l2l:!0,shell:!0};if(e)return F.yield(a.World.loadFromCommit(e,void 0,Object.assign({},m,{browserURL:"/worlds/load?name="+e.name})),15);if(k)return"__newWorld__"==k?Object.values(c).every(function(N){return"frozen"==N})||Td.fastLoad?F.yield(lively.modules.module("lively.ide/world.js").recorder,27):F.yield(lively.modules.System.import("lively.ide/world.js"),25):F.yield(a.World.loadFromDB(k,void 0,void 0,Object.assign({},m,{browserURL:"/worlds/load?name="+k.replace(/\.json($|\?)/,"")})),
15);if(!d){F.jumpTo(15);break}return F.yield(a.World.loadFromResource(Td.resource(System.baseURL).join(d),void 0,Object.assign({},m,{browserURL:"/worlds/load?file="+d})),15);case 25:return u=F.yieldResult,q=u.LivelyWorld,F.yield(lively.modules.System.import("lively.morphic/world-loading.js"),26);case 26:v=F.yieldResult;r=v.loadWorld;F.jumpTo(24);break;case 27:return y=F.yieldResult,q=y.LivelyWorld,F.yield(lively.modules.module("lively.morphic/world-loading.js").recorder,28);case 28:z=F.yieldResult,
r=z.loadWorld;case 24:return F.yield(r(new q({openNewProjectPrompt:!0})),15);case 15:F.leaveTryBlock(13,2);break;case 12:A=F.enterCatchBlock(2),window.__loadError__=A;case 13:return n.finishPackage({packageName:"world",loaded:!0}),n.fadeIntoBack(),window.addEventListener("popstate",function(N){document.location==f&&document.location.reload()}),Td.worldLoaded=!0,F.yield($world.whenReady(),31);case 31:return h.remove(),F.yield(l.renderer.worldMorph.whenRendered(),32);case 32:"dynamic"!=c["lively.morphic"]||
Td.fastLoad||(l.renderer.clear(),l.fontMetric.uninstall(),l.eventDispatcher.uninstall());F.leaveTryBlock(0);break;case 2:throw C=F.enterCatchBlock(),C.originalErr&&(C=C.originalErr),G=C.message,C.stack!==C.message&&(G+=C.stack.includes(C.message)?C.stack.replace(C.message,"\n"):C.stack),b(G),C;}})}ya({$:Kf,B:mg,D:xu,F:Db,G:ab,H:kd,J:Fe,K:Ub,M:ic,N:Lq,O:Ba,P:Xg,Q:To,R:yo,S:Fd,U:Tp,V:iG,W:cc,X:Vi,Z:zC,_:NH,a:tn,a$:Rv,a2:Gk,a3:fh,aG:Us,aU:Ro,aV:Li,aW:DH,aY:Sp,ab:Gc,af:SH,ag:RH,ah:YA,aj:So,au:uk,av:hk,
aw:Nb,b:Uv,bB:Bj,bE:co,bF:Ma,bK:qr,bN:Rb,bP:jj,bQ:yj,bU:function(g){g=void 0===g?document.body:g;var d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){nq.default().world||(d=window.$world=window.$$world=new Zu({name:V_.name,extent:fh(window.innerWidth,window.innerHeight)}),nq.default().setWorldRenderedOn(d,g,window.prerenderNode));window.$world.dontRecordChangesWhile(function(){var e=Qs(V_,{reinitializeIds:function(h){return h}});if(e.isWorld)e.position=fh(0,0),nq.default().setWorldRenderedOn(e,
g,window.prerenderNode),"elastic"===e.resizePolicy&&e.execCommand("resize to fit window");else try{g!=document.body?(new window.ResizeObserver(function(h){return e.execCommand("resize on client",h[0])})).observe(g):window.onresize=lively.FreezerRuntime.resizeHandler=function(){return e.execCommand("resize on client")},e.openInWorld(fh(0,0)),e.execCommand("resize on client",g)}catch(h){e.position=fh(0,0)}});k.jumpToEnd()})},bo:Hl,bq:zk,bt:Rm,bx:ka,c:Fx,e:yu,f:rr,g:$x,h:He,i:P,j:Ll,k:wC,l:Wm,m:Sz,n:Ab,
o:od,p:Bi,q:kn,r:T,s:xC,t:su,u:Wd,v:Sj,w:ve,x:Mv,y:Gs,z:ru});var cB=lively.FreezerRuntime.recorderFor("lively.lang/closure.js");cB.evalJS=Rj;cB.parameterRegex=/function[^\(]*\(([^\)]*)\)|\(?([^\)=]*)\)?\s*=>/;var zi=function(g,d,k,e){this.originalFunc=g;this.varMapping=d||{};this.setFuncSource(k||g);this.setFuncProperties(g||e)};zi.fromFunction=function(g,d){return new this(g,d||{})};zi.fromSource=function(g,d){return new this(null,d||{},g)};zi.prototype.setFuncSource=function(g){return this.source=
g="undefined"!==typeof lively&&lively.sourceTransform&&"function"===typeof lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder?lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder(g):String(g)};zi.prototype.getFuncSource=function(){return this.source||this.setFuncSource(this.originalFunc)};zi.prototype.hasFuncSource=function(){return this.source&&!0};zi.prototype.getFunc=function(){return this.originalFunc||this.recreateFunc()};zi.prototype.getFuncProperties=function(){return this.funcProperties||
(this.funcProperties={})};zi.prototype.setFuncProperties=function(g){var d=this.getFuncProperties(),k;for(k in g)g.hasOwnProperty(k)&&(d[k]=g[k])};zi.prototype.lookup=function(g){return this.varMapping[g]};zi.prototype.parameterNames=function(g){return"undefined"!==typeof lively&&lively.ast&&lively.ast.parseFunction?(lively.ast.parseFunction(g).params||[]).map(function(d){return"Identifier"===d.type?d.name:d.left&&"Identifier"===d.left.type?d.left.name:null}).filter(Boolean):(g=cB.parameterRegex.exec(g))?
(g[1]||g[2]||"").split(",").map(function(d){return d.trim()}):[]};zi.prototype.firstParameter=function(g){return this.parameterNames(g)[0]||null};zi.prototype.recreateFunc=function(){return this.recreateFuncFromSource(this.getFuncSource(),this.originalFunc)};zi.prototype.recreateFuncFromSource=function(g,d){d=[];var k="$super"===this.firstParameter(g);for(e in this.varMapping)this.varMapping.hasOwnProperty(e)&&"this"!=e&&d.push("var "+e+" = this.varMapping."+e+";\n");var e="";0<d.length&&(e+=d.join("\n"));
k&&(e+="(function superWrapperForClosure() { return ");e+="("+g+")";k&&(e+=".apply(this, [$super.bind(this)].concat(Array.from(arguments))) })");try{var h=cB.evalJS.call(this,e)||this.couldNotCreateFunc(e);this.addFuncProperties(h);return this.originalFunc=h}catch(n){throw g="Cannot create function "+n+" src: "+e,console.error(g),Error(g);}};zi.prototype.addFuncProperties=function(g){var d=this.getFuncProperties(),k;for(k in d)d.hasOwnProperty(k)&&(g[k]=d[k]);this.addClosureInformation(g)};zi.prototype.couldNotCreateFunc=
function(g){var d="Could not recreate closure from source: \n"+g;console.error(d);return function(){throw Error(d);}};zi.prototype.asFunction=function(){return this.recreateFunc()};zi.prototype.addClosureInformation=function(g){g.hasLivelyClosure=!0;g.livelyClosure=this;return g};$jscomp.global.Object.defineProperties(zi.prototype,{isLivelyClosure:{configurable:!0,enumerable:!0,get:function(){return!0}},doNotSerialize:{configurable:!0,enumerable:!0,get:function(){return["originalFunc"]}}});ya("bv",
zi);cB.Closure=zi;cB.default=zi;var Fw=lively.FreezerRuntime.recorderFor("lively.lang/Group.js");Fw.groupBy=ab;var vm=function(){};vm.fromArray=function(g,d,k){for(var e=new Fw.Group,h=0,n=g.length;h<n;h++){var b=d.call(k,g[h],h);Fw.Group.prototype.hasOwnProperty(b)&&(b="_"+b);e[b]||(e[b]=[]);e[b].push(g[h])}return e};vm.prototype.toArray=function(){return this.reduceGroups(function(g,d,k){return g.concat([k])},[])};vm.prototype.forEach=function(g,d){var k=this;Object.keys(k).forEach(function(e){k[e].forEach(g.bind(d,
e))});return k};vm.prototype.forEachGroup=function(g,d){var k=this;Object.keys(k).forEach(function(e){g.call(d,e,k[e])});return k};vm.prototype.map=function(g,d){var k=new Fw.Group;this.forEachGroup(function(e,h){k[e]=h.map(g.bind(d,e))});return k};vm.prototype.mapGroups=function(g,d){var k=new Fw.Group;this.forEachGroup(function(e,h){k[e]=g.call(d,e,h)});return k};vm.prototype.keys=function(){return Object.keys(this)};vm.prototype.reduceGroups=function(g,d,k){this.forEachGroup(function(e,h){d=g.call(k,
d,e,h)});return d};vm.prototype.count=function(){return this.reduceGroups(function(g,d,k){g[d]=k.length;return g},{})};$jscomp.global.Object.defineProperties(vm,{by:{configurable:!0,enumerable:!0,get:function(){return Fw.groupBy}}});Fw.Group=vm;Fw.default=vm;var Eb=lively.FreezerRuntime.recorderFor("lively.lang/array.js");Eb.range=Ab;Eb.withN=ac;Eb.genN=Ob;Eb.filter=kd;Eb.findAndGet=Cc;Eb.filterByKey=qd;Eb.grep=Dc;Eb.mask=Ic;Eb.reject=Qc;Eb.rejectByKey=Bd;Eb.without=ne;Eb.withoutAll=ve;Eb.uniq=Wd;
Eb.uniqBy=Ub;Eb.uniqByKey=wc;Eb.compact=od;Eb.mutableCompact=Tb;Eb.forEach=xd;Eb.zip=Fd;Eb.flatten=ic;Eb.flatmap=rc;Eb.interpose=Gb;Eb.delimWith=oc;Eb.map=Hc;Eb.invoke=ad;Eb.pluck=dd;Eb.reduce=ec;Eb.reduceRight=jb;Eb.some=yb;Eb.every=Ja;Eb.equals=Ta;Eb.deepEquals=Ka;Eb.isSorted=Fa;Eb.sort=Xa;Eb.sortBy=Ib;Eb.sortByKey=jc;Eb.reverse=lb;Eb.reversed=tb;Eb.reMatches=nb;Eb.first=Y;Eb.last=Ba;Eb.intersect=P;Eb.union=na;Eb.pushAt=Sa;Eb.removeAt=hb;Eb.remove=cc;Eb.pushAll=Uc;Eb.pushAllAt=Xb;Eb.pushIfNotIncluded=
Db;Eb.replaceAt=vd;Eb.clear=bd;Eb.isSubset=cb;Eb.doAndContinue=xb;Eb.nestedDelay=Bc;Eb.forEachShowingProgress=mb;Eb.swap=Ec;Eb.rotate=Ac;Eb.groupBy=ab;Eb.groupByKey=La;Eb.partition=gb;Eb.batchify=Va;Eb.toTuples=tc;Eb.combinationsPick=ia;Eb.combinations=va;Eb.take=qb;Eb.drop=I;Eb.takeWhile=pa;Eb.dropWhile=Oa;Eb.shuffle=ub;Eb.max=Wb;Eb.min=Jb;Eb.sum=yc;Eb.count=Jc;Eb.size=Hd;Eb.histogram=Ge;Eb.clone=Dd;Eb.toArray=ae;Eb.each=ie;Eb.all=Fe;Eb.any=Tc;Eb.collect=ee;Eb.findAll=he;Eb.inject=gf;Eb.mapAsyncSeries=
jf;Eb.mapAsync=Rf;Eb.objectEquals=dl;Eb.delay=gc;Eb.once=yj;Eb.NullFunction=lg;Eb.Group=vm;Eb.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;Eb.features={from:!!Array.from,filter:!!Array.prototype.filter,find:!!Array.prototype.find,findIndex:!!Array.prototype.findIndex,includes:!!Array.prototype.includes};Eb.from=Eb.features.from?Array.from:function(g){if(!g)return[];if(Array.isArray(g))return g;if(g.toArray)return g.toArray();for(var d=g.length,k=Array(d);d--;)k[d]=
g[d];return k};Eb.detect=Eb.features.find?function(g,d,k){return g.find(d,k)}:function(g,d,k){for(var e,h=0,n=g.length;h<n;h++)if(e=g[h],d.call(k,e,h))return e};Eb.findIndex=Eb.features.findIndex?function(g,d,k){return g.findIndex(d,k)}:function(g,d,k){var e=-1;return g.find(function(h,n){e=n;return d.call(h,k)})?e:-1};Eb.isArray=Array.isArray;Eb.includes=Eb.features.includes?function(g,d){return g.includes(d)}:function(g,d){return-1!==g.indexOf(d)};Eb.include=Eb.includes;Eb.permutations=function(){function g(d,
k){return d.length?Eb.flatmap(d,function(e,h){return g(d.slice(0,h).concat(d.slice(h+1)),k.concat([e]))}):[k]}return function(d){return g(d,[])}}();Eb.features.from||(Array.from=Eb.from);Eb.features.filter||(Array.prototype.filter=function(g,d){return Eb.filter(this,g,d)});Eb.features.find||(Array.prototype.find=function(g,d){return Eb.detect(this,g,d)});Eb.features.findIndex||(Array.prototype.findIndex=function(g,d){return Eb.findIndex(this,g,d)});Eb.features.includes||(Array.prototype.includes=
function(g){return Eb.includes(this,g)});var NO=Eb.from,OO=Eb.detect,PO=Eb.findIndex,QO=ya("d",Eb.isArray),RO=Eb.includes,SO=Eb.include,TO=Eb.permutations;Eb.range=Ab;Eb.range=Ab;Eb.from=NO;Eb.from=NO;Eb.withN=ac;Eb.withN=ac;Eb.genN=Ob;Eb.genN=Ob;Eb.filter=kd;Eb.filter=kd;Eb.detect=OO;Eb.detect=OO;Eb.findIndex=PO;Eb.findIndex=PO;Eb.findAndGet=Cc;Eb.findAndGet=Cc;Eb.filterByKey=qd;Eb.filterByKey=qd;Eb.grep=Dc;Eb.grep=Dc;Eb.mask=Ic;Eb.mask=Ic;Eb.reject=Qc;Eb.reject=Qc;Eb.rejectByKey=Bd;Eb.rejectByKey=
Bd;Eb.without=ne;Eb.without=ne;Eb.withoutAll=ve;Eb.withoutAll=ve;Eb.uniq=Wd;Eb.uniq=Wd;Eb.uniqBy=Ub;Eb.uniqBy=Ub;Eb.uniqByKey=wc;Eb.uniqByKey=wc;Eb.compact=od;Eb.compact=od;Eb.mutableCompact=Tb;Eb.mutableCompact=Tb;Eb.forEach=xd;Eb.forEach=xd;Eb.zip=Fd;Eb.zip=Fd;Eb.flatten=ic;Eb.flatten=ic;Eb.flatmap=rc;Eb.flatmap=rc;Eb.interpose=Gb;Eb.interpose=Gb;Eb.delimWith=oc;Eb.delimWith=oc;Eb.map=Hc;Eb.map=Hc;Eb.invoke=ad;Eb.invoke=ad;Eb.pluck=dd;Eb.pluck=dd;Eb.reduce=ec;Eb.reduce=ec;Eb.reduceRight=jb;Eb.reduceRight=
jb;Eb.isArray=QO;Eb.isArray=QO;Eb.includes=RO;Eb.includes=RO;Eb.include=SO;Eb.include=SO;Eb.some=yb;Eb.some=yb;Eb.every=Ja;Eb.every=Ja;Eb.equals=Ta;Eb.equals=Ta;Eb.deepEquals=Ka;Eb.deepEquals=Ka;Eb.isSorted=Fa;Eb.isSorted=Fa;Eb.sort=Xa;Eb.sort=Xa;Eb.sortBy=Ib;Eb.sortBy=Ib;Eb.sortByKey=jc;Eb.sortByKey=jc;Eb.reverse=lb;Eb.reverse=lb;Eb.reversed=tb;Eb.reversed=tb;Eb.reMatches=nb;Eb.reMatches=nb;Eb.first=Y;Eb.first=Y;Eb.last=Ba;Eb.last=Ba;Eb.intersect=P;Eb.intersect=P;Eb.union=na;Eb.union=na;Eb.pushAt=
Sa;Eb.pushAt=Sa;Eb.removeAt=hb;Eb.removeAt=hb;Eb.remove=cc;Eb.remove=cc;Eb.pushAll=Uc;Eb.pushAll=Uc;Eb.pushAllAt=Xb;Eb.pushAllAt=Xb;Eb.pushIfNotIncluded=Db;Eb.pushIfNotIncluded=Db;Eb.replaceAt=vd;Eb.replaceAt=vd;Eb.clear=bd;Eb.clear=bd;Eb.isSubset=cb;Eb.isSubset=cb;Eb.doAndContinue=xb;Eb.doAndContinue=xb;Eb.nestedDelay=Bc;Eb.nestedDelay=Bc;Eb.forEachShowingProgress=mb;Eb.forEachShowingProgress=mb;Eb.swap=Ec;Eb.swap=Ec;Eb.rotate=Ac;Eb.rotate=Ac;Eb.groupBy=ab;Eb.groupBy=ab;Eb.groupByKey=La;Eb.groupByKey=
La;Eb.partition=gb;Eb.partition=gb;Eb.batchify=Va;Eb.batchify=Va;Eb.toTuples=tc;Eb.toTuples=tc;Eb.permutations=TO;Eb.permutations=TO;Eb.combinationsPick=ia;Eb.combinationsPick=ia;Eb.combinations=va;Eb.combinations=va;Eb.take=qb;Eb.take=qb;Eb.drop=I;Eb.drop=I;Eb.takeWhile=pa;Eb.takeWhile=pa;Eb.dropWhile=Oa;Eb.dropWhile=Oa;Eb.shuffle=ub;Eb.shuffle=ub;Eb.max=Wb;Eb.max=Wb;Eb.min=Jb;Eb.min=Jb;Eb.sum=yc;Eb.sum=yc;Eb.count=Jc;Eb.count=Jc;Eb.size=Hd;Eb.size=Hd;Eb.histogram=Ge;Eb.histogram=Ge;Eb.clone=Dd;
Eb.clone=Dd;Eb.toArray=ae;Eb.toArray=ae;Eb.each=ie;Eb.each=ie;Eb.all=Fe;Eb.all=Fe;Eb.any=Tc;Eb.any=Tc;Eb.collect=ee;Eb.collect=ee;Eb.findAll=he;Eb.findAll=he;Eb.inject=gf;Eb.inject=gf;Eb.mapAsyncSeries=jf;Eb.mapAsyncSeries=jf;Eb.mapAsync=Rf;Eb.mapAsync=Rf;var Te=Object.freeze({__proto__:null,range:Ab,from:NO,withN:ac,genN:Ob,filter:kd,detect:OO,findIndex:PO,findAndGet:Cc,filterByKey:qd,grep:Dc,mask:Ic,reject:Qc,rejectByKey:Bd,without:ne,withoutAll:ve,uniq:Wd,uniqBy:Ub,uniqByKey:wc,compact:od,mutableCompact:Tb,
forEach:xd,zip:Fd,flatten:ic,flatmap:rc,interpose:Gb,delimWith:oc,map:Hc,invoke:ad,pluck:dd,reduce:ec,reduceRight:jb,isArray:QO,includes:RO,include:SO,some:yb,every:Ja,equals:Ta,deepEquals:Ka,isSorted:Fa,sort:Xa,sortBy:Ib,sortByKey:jc,reverse:lb,reversed:tb,reMatches:nb,first:Y,last:Ba,intersect:P,union:na,pushAt:Sa,removeAt:hb,remove:cc,pushAll:Uc,pushAllAt:Xb,pushIfNotIncluded:Db,replaceAt:vd,clear:bd,isSubset:cb,doAndContinue:xb,nestedDelay:Bc,forEachShowingProgress:mb,swap:Ec,rotate:Ac,groupBy:ab,
groupByKey:La,partition:gb,batchify:Va,toTuples:tc,permutations:TO,combinationsPick:ia,combinations:va,take:qb,drop:I,takeWhile:pa,dropWhile:Oa,shuffle:ub,max:Wb,min:Jb,sum:yc,count:Jc,size:Hd,histogram:Ge,clone:Dd,toArray:ae,each:ie,all:Fe,any:Tc,collect:ee,findAll:he,inject:gf,mapAsyncSeries:jf,mapAsync:Rf});ya("a6",Te);var Nc=lively.FreezerRuntime.recorderFor("lively.lang/function.js");Nc.Empty=Zb;Nc.K=pg;Nc.Null=lg;Nc.False=qg;Nc.True=Re;Nc.notYetImplemented=Ha;Nc.all=Ya;Nc.own=Bb;Nc.argumentNames=
V;Nc.qualifiedMethodName=Da;Nc.extractBody=fb;Nc.timeToRun=rb;Nc.timeToRunN=lc;Nc.delay=gc;Nc.throttle=Lc;Nc.debounce=Sc;Nc.throttleNamed=Mc;Nc.debounceNamed=Ae;Nc.createQueue=rf;Nc.workerWithCallbackQueue=Ze;Nc._composeAsyncDefaultEndCallback=function(g,d){g&&console.error("lively.lang.composeAsync error",g)};Nc.composeAsync=Eg;Nc.compose=He;Nc.flip=Cg;Nc.withNull=Ji;Nc.waitFor=Pg;Nc.waitForAll=ek;Nc.curry=Cf;Nc.wrap=Ai;Nc.getOriginal=Eh;Nc.wrapperChain=hj;Nc.replaceMethodForOneCall=zj;Nc.once=yj;
Nc.either=bl;Nc.eitherNamed=cl;Nc.evalJS=Rj;Nc.fromString=Tj;Nc.asScript=Fh;Nc.asScriptOf=im;Nc.addToObject=Ne;Nc.binds=Em;Nc.setLocalVarValue=Hb;Nc.getVarMapping=Kb;Nc.setProperty=Gd;Nc.functionNames=Ad;Nc.localFunctionNames=sf;Nc.logErrors=Tf;Nc.logCompletion=qi;Nc.logCalls=Fl;Nc.traceCalls=zp;Nc.webkitStack=Ap;Nc.objectMerge=Ti;Nc.safeToString=Dk;Nc.Closure=zi;Nc.arr=Te;Nc._throttledByName={};Nc._debouncedByName={};Nc._queues={};Nc._queueUntilCallbacks={};Nc._eitherNameRegistry={};Nc.Empty=Zb;
Nc.Empty=Zb;Nc.K=pg;Nc.K=pg;Nc.Null=lg;Nc.Null=lg;Nc.False=qg;Nc.False=qg;Nc.True=Re;Nc.True=Re;Nc.notYetImplemented=Ha;Nc.notYetImplemented=Ha;Nc.withNull=Ji;Nc.withNull=Ji;Nc.all=Ya;Nc.all=Ya;Nc.own=Bb;Nc.own=Bb;Nc.argumentNames=V;Nc.argumentNames=V;Nc.qualifiedMethodName=Da;Nc.qualifiedMethodName=Da;Nc.extractBody=fb;Nc.extractBody=fb;Nc.timeToRun=rb;Nc.timeToRun=rb;Nc.timeToRunN=lc;Nc.timeToRunN=lc;Nc.delay=gc;Nc.delay=gc;Nc.throttle=Lc;Nc.throttle=Lc;Nc.debounce=Sc;Nc.debounce=Sc;Nc.throttleNamed=
Mc;Nc.throttleNamed=Mc;Nc.debounceNamed=Ae;Nc.debounceNamed=Ae;Nc.createQueue=rf;Nc.createQueue=rf;Nc.workerWithCallbackQueue=Ze;Nc.workerWithCallbackQueue=Ze;Nc.composeAsync=Eg;Nc.composeAsync=Eg;Nc.compose=He;Nc.compose=He;Nc.waitFor=Pg;Nc.waitFor=Pg;Nc.waitForAll=ek;Nc.waitForAll=ek;Nc.flip=Cg;Nc.flip=Cg;Nc.curry=Cf;Nc.curry=Cf;Nc.wrap=Ai;Nc.wrap=Ai;Nc.binds=Em;Nc.binds=Em;Nc.getOriginal=Eh;Nc.getOriginal=Eh;Nc.wrapperChain=hj;Nc.wrapperChain=hj;Nc.replaceMethodForOneCall=zj;Nc.replaceMethodForOneCall=
zj;Nc.once=yj;Nc.once=yj;Nc.either=bl;Nc.either=bl;Nc.eitherNamed=cl;Nc.eitherNamed=cl;Nc.evalJS=Rj;Nc.evalJS=Rj;Nc.fromString=Tj;Nc.fromString=Tj;Nc.asScript=Fh;Nc.asScript=Fh;Nc.asScriptOf=im;Nc.asScriptOf=im;Nc.addToObject=Ne;Nc.addToObject=Ne;Nc.setLocalVarValue=Hb;Nc.setLocalVarValue=Hb;Nc.getVarMapping=Kb;Nc.getVarMapping=Kb;Nc.setProperty=Gd;Nc.setProperty=Gd;Nc.functionNames=Ad;Nc.functionNames=Ad;Nc.localFunctionNames=sf;Nc.localFunctionNames=sf;Nc.logErrors=Tf;Nc.logErrors=Tf;Nc.logCompletion=
qi;Nc.logCompletion=qi;Nc.logCalls=Fl;Nc.logCalls=Fl;Nc.traceCalls=zp;Nc.traceCalls=zp;Nc.webkitStack=Ap;Nc.webkitStack=Ap;var Xk=Object.freeze({__proto__:null,Empty:Zb,K:pg,Null:lg,False:qg,True:Re,notYetImplemented:Ha,withNull:Ji,all:Ya,own:Bb,argumentNames:V,qualifiedMethodName:Da,extractBody:fb,timeToRun:rb,timeToRunN:lc,delay:gc,throttle:Lc,debounce:Sc,throttleNamed:Mc,debounceNamed:Ae,createQueue:rf,workerWithCallbackQueue:Ze,composeAsync:Eg,compose:He,waitFor:Pg,waitForAll:ek,flip:Cg,curry:Cf,
wrap:Ai,binds:Em,getOriginal:Eh,wrapperChain:hj,replaceMethodForOneCall:zj,once:yj,either:bl,eitherNamed:cl,evalJS:Rj,fromString:Tj,asScript:Fh,asScriptOf:im,addToObject:Ne,setLocalVarValue:Hb,getVarMapping:Kb,setProperty:Gd,functionNames:Ad,localFunctionNames:sf,logErrors:Tf,logCompletion:qi,logCalls:Fl,traceCalls:zp,webkitStack:Ap});ya("ax",Xk);var yd=lively.FreezerRuntime.recorderFor("lively.lang/object.js");yd.print=Iq;yd.indent=function(g,d,k){if(!k||0>=k)return g;for(;0<k;)k--,g=d+g;return g};
yd.isArray=Ki;yd.isElement=Cm;yd.isFunction=gm;yd.isBoolean=hm;yd.isString=yo;yd.isNumber=Kn;yd.isUndefined=jn;yd.isRegExp=Ln;yd.isObject=Bk;yd.isPrimitive=ck;yd.isEmpty=dk;yd.equals=dl;yd.values=Sj;yd.select=rk;yd.dissoc=kn;yd.addScript=el;yd.extend=fl;yd.clone=Ck;yd.extract=Ak;yd.inspect=Yf;yd.merge=Ti;yd.deepMerge=Dm;yd.sortKeysWithBeforeAndAfterConstraints=mn;yd.inherit=Pn;yd.valuesInPropertyHierarchy=Nn;yd.mergePropertyInHierarchy=zo;yd.deepCopy=On;yd.typeStringOf=Gl;yd.shortPrintStringOf=Ao;
yd.isMutableType=Mn;yd.safeToString=Dk;yd.asObject=js;yd.newKeyIn=Fm;yd.functionFromString=Tj;yd.asScriptOf=im;yd.argumentNames=V;yd.arrayDeepEquals=Ka;yd.isSubset=cb;yd.flatten=ic;yd.getOwnPropertyDescriptors="function"===typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:function(g){var d={},k;for(k in g)Object.prototype.hasOwnProperty.call(g,k)&&Object.defineProperty(d,k,{configurable:!0,enumerable:!0,writable:!0,value:Object.getOwnPropertyDescriptor(g,k)});return d};yd.keys=
Object.keys;var UO=yd.keys,VO=yd.getOwnPropertyDescriptors;yd.isArray=Ki;yd.isArray=Ki;yd.isElement=Cm;yd.isElement=Cm;yd.isFunction=gm;yd.isFunction=gm;yd.isBoolean=hm;yd.isBoolean=hm;yd.isString=yo;yd.isString=yo;yd.isNumber=Kn;yd.isNumber=Kn;yd.isUndefined=jn;yd.isUndefined=jn;yd.isRegExp=Ln;yd.isRegExp=Ln;yd.isObject=Bk;yd.isObject=Bk;yd.isPrimitive=ck;yd.isPrimitive=ck;yd.isEmpty=dk;yd.isEmpty=dk;yd.equals=dl;yd.equals=dl;yd.keys=UO;yd.keys=UO;yd.values=Sj;yd.values=Sj;yd.select=rk;yd.select=
rk;yd.dissoc=kn;yd.dissoc=kn;yd.addScript=el;yd.addScript=el;yd.extend=fl;yd.extend=fl;yd.clone=Ck;yd.clone=Ck;yd.extract=Ak;yd.extract=Ak;yd.inspect=Yf;yd.inspect=Yf;yd.merge=Ti;yd.merge=Ti;yd.deepMerge=Dm;yd.deepMerge=Dm;yd.inherit=Pn;yd.inherit=Pn;yd.valuesInPropertyHierarchy=Nn;yd.valuesInPropertyHierarchy=Nn;yd.mergePropertyInHierarchy=zo;yd.mergePropertyInHierarchy=zo;yd.sortKeysWithBeforeAndAfterConstraints=mn;yd.sortKeysWithBeforeAndAfterConstraints=mn;yd.deepCopy=On;yd.deepCopy=On;yd.typeStringOf=
Gl;yd.typeStringOf=Gl;yd.shortPrintStringOf=Ao;yd.shortPrintStringOf=Ao;yd.isMutableType=Mn;yd.isMutableType=Mn;yd.safeToString=Dk;yd.safeToString=Dk;yd.asObject=js;yd.asObject=js;yd.newKeyIn=Fm;yd.newKeyIn=Fm;yd.getOwnPropertyDescriptors=VO;yd.getOwnPropertyDescriptors=VO;var lf=Object.freeze({__proto__:null,isArray:Ki,isElement:Cm,isFunction:gm,isBoolean:hm,isString:yo,isNumber:Kn,isUndefined:jn,isRegExp:Ln,isObject:Bk,isPrimitive:ck,isEmpty:dk,equals:dl,keys:UO,values:Sj,select:rk,dissoc:kn,addScript:el,
extend:fl,clone:Ck,extract:Ak,inspect:Yf,merge:Ti,deepMerge:Dm,inherit:Pn,valuesInPropertyHierarchy:Nn,mergePropertyInHierarchy:zo,sortKeysWithBeforeAndAfterConstraints:mn,deepCopy:On,typeStringOf:Gl,shortPrintStringOf:Ao,isMutableType:Mn,safeToString:Dk,asObject:js,newKeyIn:Fm,getOwnPropertyDescriptors:VO});ya("a8",lf);var sc=lively.FreezerRuntime.recorderFor("lively.lang/string.js");sc.format=nn;sc.formatFromArray=ln;sc.indent=Bm;sc.minIndent=gl;sc.changeIndent=Gm;sc.quote=Ek;sc.print=Nf;sc.printNested=
sa;sc.pad=za;sc.printTable=ib;sc.printTree=Ra;sc.toArray=Sb;sc.lines=Pb;sc.paragraphs=dc;sc.nonEmptyLines=hc;sc.tokens=Xc;sc.tableize=Qe;sc.unescapeCharacterEntities=Ue;sc.toQueryParams=Dg;sc.base64EncodeUnicode=zf;sc.base64DecodeUnicode=Vg;sc.normalizePath=ej;sc.joinPath=Jj;sc.newUUID=zk;sc.createDataURI=Jq;sc.hashCode=Nt;sc.md5=Bo;sc.reMatches=ks;sc.stringMatch=Qn;sc.peekRight=Ot;sc.peekLeft=Pt;sc.lineIndexComputer=uv;sc.lineNumberToIndexesComputer=vv;sc.lineRanges=wv;sc.findLineWithIndexInLineRanges=
Qt;sc.regexIndexOf=Rt;sc.regexLastIndexOf=ls;sc.diff=St;sc.empty=Tt;sc.startsWithVowel=Co;sc.withDecimalPrecision=Rn;sc.capitalize=ms;sc.camelCaseString=Kq;sc.camelize=Lq;sc.truncate=Sn;sc.truncateLeft=Fk;sc.regExpEscape=Mq;sc.succ=Do;sc.digitValue=Bp;sc.longestCommonSubstring=Ut;sc.applyChange=Vt;sc.applyChanges=ns;sc.levenshtein=os;sc.inspectObject=Yf;sc.min=Jb;sc.last=Ba;sc.features={repeat:!!String.prototype.repeat,includes:!!String.prototype.includes,startsWith:!!String.prototype.startsWith,
endsWith:!!String.prototype.endsWith};sc.pathDotRe=/\/\.\//g;sc.pathDoubleDotRe=/\/[^\/]+\/\.\./;sc.pathDoubleSlashRe=/(^|[^:])[\/]+/g;sc.urlStartRe=/^[a-z0-9-_\.]+:\/\//;sc.newUUIDTemplate="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";sc.newUUIDRe=/[xy]/g;sc.newUUIDReplacer=function(g){var d=16*Math.random()|0;return("x"==g?d:d&3|8).toString(16)};sc.includes=sc.features.includes?function(g,d){return g.includes(d)}:function(g,d){return-1<g.indexOf(d)};sc.include=sc.includes;sc.startsWith=sc.features.startsWith?
function(g,d){return g.startsWith(d)}:function(g,d){return 0===g.indexOf(d)};sc.endsWith=sc.features.endsWith?function(g,d){return g.endsWith(d)}:function(g,d){var k=g.length-d.length;return 0<=k&&g.lastIndexOf(d)===k};sc.times=sc.features.repeat?function(g,d){return g.repeat(d)}:function(g,d){return 1>d?"":Array(d+1).join(g)};var WO=sc.includes,XO=sc.include,YO=sc.startsWith,ZO=sc.endsWith,$O=sc.times;sc.format=nn;sc.format=nn;sc.formatFromArray=ln;sc.formatFromArray=ln;sc.indent=Bm;sc.indent=Bm;
sc.minIndent=gl;sc.minIndent=gl;sc.changeIndent=Gm;sc.changeIndent=Gm;sc.quote=Ek;sc.quote=Ek;sc.print=Nf;sc.print=Nf;sc.printNested=sa;sc.printNested=sa;sc.pad=za;sc.pad=za;sc.printTable=ib;sc.printTable=ib;sc.printTree=Ra;sc.printTree=Ra;sc.toArray=Sb;sc.toArray=Sb;sc.lines=Pb;sc.lines=Pb;sc.paragraphs=dc;sc.paragraphs=dc;sc.nonEmptyLines=hc;sc.nonEmptyLines=hc;sc.tokens=Xc;sc.tokens=Xc;sc.tableize=Qe;sc.tableize=Qe;sc.unescapeCharacterEntities=Ue;sc.unescapeCharacterEntities=Ue;sc.base64EncodeUnicode=
zf;sc.base64EncodeUnicode=zf;sc.base64DecodeUnicode=Vg;sc.base64DecodeUnicode=Vg;sc.toQueryParams=Dg;sc.toQueryParams=Dg;sc.normalizePath=ej;sc.normalizePath=ej;sc.joinPath=Jj;sc.joinPath=Jj;sc.newUUID=zk;sc.newUUID=zk;sc.createDataURI=Jq;sc.createDataURI=Jq;sc.hashCode=Nt;sc.hashCode=Nt;sc.md5=Bo;sc.md5=Bo;sc.reMatches=ks;sc.reMatches=ks;sc.stringMatch=Qn;sc.stringMatch=Qn;sc.peekRight=Ot;sc.peekRight=Ot;sc.peekLeft=Pt;sc.peekLeft=Pt;sc.lineIndexComputer=uv;sc.lineIndexComputer=uv;sc.lineNumberToIndexesComputer=
vv;sc.lineNumberToIndexesComputer=vv;sc.findLineWithIndexInLineRanges=Qt;sc.findLineWithIndexInLineRanges=Qt;sc.regexIndexOf=Rt;sc.regexIndexOf=Rt;sc.regexLastIndexOf=ls;sc.regexLastIndexOf=ls;sc.lineRanges=wv;sc.lineRanges=wv;sc.diff=St;sc.diff=St;sc.empty=Tt;sc.empty=Tt;sc.includes=WO;sc.includes=WO;sc.include=XO;sc.include=XO;sc.startsWith=YO;sc.startsWith=YO;sc.startsWithVowel=Co;sc.startsWithVowel=Co;sc.endsWith=ZO;sc.endsWith=ZO;sc.withDecimalPrecision=Rn;sc.withDecimalPrecision=Rn;sc.capitalize=
ms;sc.capitalize=ms;sc.camelCaseString=Kq;sc.camelCaseString=Kq;sc.camelize=Lq;sc.camelize=Lq;sc.truncate=Sn;sc.truncate=Sn;sc.truncateLeft=Fk;sc.truncateLeft=Fk;sc.regExpEscape=Mq;sc.regExpEscape=Mq;sc.succ=Do;sc.succ=Do;sc.digitValue=Bp;sc.digitValue=Bp;sc.times=$O;sc.times=$O;sc.longestCommonSubstring=Ut;sc.longestCommonSubstring=Ut;sc.applyChange=Vt;sc.applyChange=Vt;sc.applyChanges=ns;sc.applyChanges=ns;sc.levenshtein=os;sc.levenshtein=os;var Hg=Object.freeze({__proto__:null,format:nn,formatFromArray:ln,
indent:Bm,minIndent:gl,changeIndent:Gm,quote:Ek,print:Nf,printNested:sa,pad:za,printTable:ib,printTree:Ra,toArray:Sb,lines:Pb,paragraphs:dc,nonEmptyLines:hc,tokens:Xc,tableize:Qe,unescapeCharacterEntities:Ue,base64EncodeUnicode:zf,base64DecodeUnicode:Vg,toQueryParams:Dg,normalizePath:ej,joinPath:Jj,newUUID:zk,createDataURI:Jq,hashCode:Nt,md5:Bo,reMatches:ks,stringMatch:Qn,peekRight:Ot,peekLeft:Pt,lineIndexComputer:uv,lineNumberToIndexesComputer:vv,findLineWithIndexInLineRanges:Qt,regexIndexOf:Rt,
regexLastIndexOf:ls,lineRanges:wv,diff:St,empty:Tt,includes:WO,include:XO,startsWith:YO,startsWithVowel:Co,endsWith:ZO,withDecimalPrecision:Rn,capitalize:ms,camelCaseString:Kq,camelize:Lq,truncate:Sn,truncateLeft:Fk,regExpEscape:Mq,succ:Do,digitValue:Bp,times:$O,longestCommonSubstring:Ut,applyChange:Vt,applyChanges:ns,levenshtein:os});ya("a7",Hg);var xf=lively.FreezerRuntime.recorderFor("lively.lang/number.js");xf.random=ps;xf.randomSmallerInteger=qs;xf.humanReadableByteSize=xv;xf.average=yv;xf.averageInc=
zv;xf.median=Wt;xf.between=Nq;xf.clamp=Av;xf.sort=rs;xf.parseLength=Oq;xf.precision=ss;xf.roundTo=Hm;xf.detent=Im;xf.toDegrees=sk;xf.toRadians=Wg;xf.backoff=Eo;xf.interpolate=Tn;xf.normalRandom=function(g,d){var k,e=!1;return function(h,n){if(e)return e=!1,k*n+h;do{var b=2*Math.random()-1;var c=2*Math.random()-1;var l=b*b+c*c}while(1<=l||0==l);l=Math.sqrt(-2*Math.log(l)/l);k=c*l;e=!0;return h+n*b*l}}();xf.convertLength=function(){function g(d,k){if("cm"===k)return d;if("mm"===k)return.1*d;if("in"===
k)return 2.54*d;if("px"===k)return d*g(1/96,"in");if("pt"===k)return d*g(1/72,"in");if("pc"===k)return d*g(12,"pt")}return function n(k,e,h){return e===h?k:"cm"===h?g(k,e):"cm"===e?k/g(1,h):n(n(k,e,"cm"),"cm",h)}}();var aP=xf.normalRandom,bP=xf.convertLength;xf.random=ps;xf.random=ps;xf.normalRandom=aP;xf.normalRandom=aP;xf.randomSmallerInteger=qs;xf.randomSmallerInteger=qs;xf.humanReadableByteSize=xv;xf.humanReadableByteSize=xv;xf.average=yv;xf.average=yv;xf.averageInc=zv;xf.averageInc=zv;xf.median=
Wt;xf.median=Wt;xf.between=Nq;xf.between=Nq;xf.sort=rs;xf.sort=rs;xf.parseLength=Oq;xf.parseLength=Oq;xf.convertLength=bP;xf.convertLength=bP;xf.roundTo=Hm;xf.roundTo=Hm;xf.detent=Im;xf.detent=Im;xf.toDegrees=sk;xf.toDegrees=sk;xf.toRadians=Wg;xf.toRadians=Wg;xf.backoff=Eo;xf.backoff=Eo;xf.interpolate=Tn;xf.interpolate=Tn;xf.clamp=Av;xf.clamp=Av;xf.precision=ss;xf.precision=ss;var wk=Object.freeze({__proto__:null,random:ps,normalRandom:aP,randomSmallerInteger:qs,humanReadableByteSize:xv,average:yv,
averageInc:zv,median:Wt,between:Nq,sort:rs,parseLength:Oq,convertLength:bP,roundTo:Hm,detent:Im,toDegrees:sk,toRadians:Wg,backoff:Eo,interpolate:Tn,clamp:Av,precision:ss});ya("at",wk);var Oi=lively.FreezerRuntime.recorderFor("lively.lang/properties.js");Oi.all=ts;Oi.allOwnPropertiesOrFunctions=Xt;Oi.own=Cp;Oi.forEachOwn=Yt;Oi.nameFor=Dp;Oi.values=Ep;Oi.ownValues=Zt;Oi.any=$t;Oi.allProperties=Bv;Oi.hash=Un;Oi.all=ts;Oi.all=ts;Oi.allOwnPropertiesOrFunctions=Xt;Oi.allOwnPropertiesOrFunctions=Xt;Oi.own=
Cp;Oi.own=Cp;Oi.forEachOwn=Yt;Oi.forEachOwn=Yt;Oi.nameFor=Dp;Oi.nameFor=Dp;Oi.values=Ep;Oi.values=Ep;Oi.ownValues=Zt;Oi.ownValues=Zt;Oi.any=$t;Oi.any=$t;Oi.allProperties=Bv;Oi.allProperties=Bv;Oi.hash=Un;Oi.hash=Un;var mp=Object.freeze({__proto__:null,all:ts,allOwnPropertiesOrFunctions:Xt,own:Cp,forEachOwn:Yt,nameFor:Dp,values:Ep,ownValues:Zt,any:$t,allProperties:Bv,hash:Un});ya("a_",mp);var Vn=lively.FreezerRuntime.recorderFor("lively.lang/date.js");Vn.format=Fp;Vn.equals=Fo;Vn.relativeTo=Pq;Vn.dateFormat=
function(){var g=function(){var d=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,k=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,e=/[^-+\dA-Z]/g,h=function(n,b){n=String(n);for(b=b||2;n.length<b;)n="0"+n;return n};return function(n,b,c){var l=g;1!=arguments.length||"[object String]"!=Object.prototype.toString.call(n)||/\d/.test(n)||(b=n,n=void 0);n=n?new Date(n):new Date;if(isNaN(n))throw SyntaxError("invalid date");
b=String(l.masks[b]||b||l.masks.default);"UTC:"==b.slice(0,4)&&(b=b.slice(4),c=!0);var a=c?"getUTC":"get",f=n[a+"Date"](),m=n[a+"Day"](),q=n[a+"Month"](),r=n[a+"FullYear"](),u=n[a+"Hours"](),v=n[a+"Minutes"](),y=n[a+"Seconds"]();a=n[a+"Milliseconds"]();var z=c?0:n.getTimezoneOffset(),A={d:f,dd:h(f),ddd:l.i18n.dayNames[m],dddd:l.i18n.dayNames[m+7],m:q+1,mm:h(q+1),mmm:l.i18n.monthNames[q],mmmm:l.i18n.monthNames[q+12],yy:String(r).slice(2),yyyy:r,h:u%12||12,hh:h(u%12||12),H:u,HH:h(u),M:v,MM:h(v),s:y,
ss:h(y),l:h(a,3),L:h(99<a?Math.round(a/10):a),t:12>u?"a":"p",tt:12>u?"am":"pm",T:12>u?"A":"P",TT:12>u?"AM":"PM",Z:c?"UTC":(String(n).match(k)||[""]).pop().replace(e,""),o:(0<z?"-":"+")+h(100*Math.floor(Math.abs(z)/60)+Math.abs(z)%60,4),S:["th","st","nd","rd"][3<f%10?0:(10!=f%100-f%10)*f%10]};return b.replace(d,function(C){return C in A?A[C]:C.slice(1,C.length-1)})}}();g.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",
shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};g.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")};return g}();var cP=Vn.dateFormat;Vn.format=
Fp;Vn.format=Fp;Vn.equals=Fo;Vn.equals=Fo;Vn.relativeTo=Pq;Vn.relativeTo=Pq;Vn.dateFormat=cP;Vn.dateFormat=cP;var rt=Object.freeze({__proto__:null,format:Fp,equals:Fo,relativeTo:Pq,dateFormat:cP});ya("a5",rt);var Af=lively.FreezerRuntime.recorderFor("lively.lang/promise.js");Af.promise=Kf;Af.delay=au;Af.delayReject=Qq;Af.timeout=us;Af.timeToRun=vs;Af.clearPendingWaitFors=function(){Object.kets(Af.waitForClosures).forEach(function(g){delete Af.waitForClosures[g];clearInterval(g)})};Af.waitFor=Cv;Af.deferred=
Dv;Af.convertCallbackFun=ws;Af.convertCallbackFunWithManyArgs=Go;Af._chainResolveNext=Ev;Af.chain=bu;Af.promise_finally=Gp;Af.parallel=cu;Af.newUUID=zk;Af.pushIfNotIncluded=Db;Af.removeAt=hb;Af.waitForClosures={};Object.assign(Af.promise,{delay:Af.delay,delayReject:Af.delayReject,timeout:Af.timeout,waitFor:Af.waitFor,deferred:Af.deferred,convertCallbackFun:Af.convertCallbackFun,convertCallbackFunWithManyArgs:Af.convertCallbackFunWithManyArgs,chain:Af.chain,finally:Af.promise_finally,parallel:Af.parallel});
Af.promise=Kf;Af.promise=Kf;Af.delay=au;Af.delay=au;Af.delayReject=Qq;Af.delayReject=Qq;Af.timeout=us;Af.timeout=us;Af.timeToRun=vs;Af.timeToRun=vs;Af.waitFor=Cv;Af.waitFor=Cv;Af.deferred=Dv;Af.deferred=Dv;Af.convertCallbackFun=ws;Af.convertCallbackFun=ws;Af.convertCallbackFunWithManyArgs=Go;Af.convertCallbackFunWithManyArgs=Go;Af.chain=bu;Af.chain=bu;Af.finally=Gp;Af.promise_finally=Gp;Af.parallel=cu;Af.parallel=cu;Af.default=Kf;var st=lively.FreezerRuntime.recorderFor("lively.lang/Path.js");st.Path=
Xg;st.inspect=Yf;Object.assign(st.Path.prototype,{get isPathAccessor(){return!0},fromPath:function(g){"string"===typeof g&&""!==g&&g!==this.splitter?(this._parts=g.split(this.splitter),this._path=g):Array.isArray(g)?(this._parts=[].concat(g),this._path=g.join(this.splitter)):(this._parts=[],this._path="");return this},setSplitter:function(g){g&&(this.splitter=g);return this},map:function(g){this._mapper=g;return this},parts:function(){return this._parts},size:function(){return this._parts.length},
slice:function(g,d){return st.Path(this.parts().slice(g,d))},normalizePath:function(){return this._path},isRoot:function(g){return 0===this._parts.length},isIn:function(g){return this.isRoot()?!0:(g=this.get(g,-1))&&g.hasOwnProperty(this._parts[this._parts.length-1])},equals:function(g){return g&&g.isPathAccessor&&this.parts().equals(g.parts())},isParentPathOf:function(g){g=g&&g.isPathAccessor?g:st.Path(g);var d=this.parts();g=g.parts();for(var k=0;k<d.length;k++)if(d[k]!=g[k])return!1;return!0},
relativePathTo:function(g){g=st.Path(g);return this.isParentPathOf(g)?g.slice(this.size(),g.size()):void 0},del:function(g){if(this.isRoot())return!1;for(var d=0;d<this._parts.length-1;d++){var k=this._parts[d];if(g.hasOwnProperty(k))g=g[k];else return!1}return delete g[this._parts[this._parts.length-1]]},withParentAndKeyDo:function(g,d,k){if(this.isRoot())return k(null,null);for(var e=0;e<this._parts.length-1;e++){var h=this._parts[e];if(!g.hasOwnProperty(h)||"object"!==typeof g[h]&&"function"!==
typeof g[h])if(d)g=g[h]={};else return k(null,h);else g=g[h]}return k(g,this._parts[this._parts.length-1])},set:function(g,d,k){return this.withParentAndKeyDo(g,k,function(e,h){return e?e[h]=d:void 0})},defineProperty:function(g,d,k){return this.withParentAndKeyDo(g,k,function(e,h){return e?Object.defineProperty(e,h,d):void 0})},get:function(g,d){var k=this;return(d?this._parts.slice(0,d):this._parts).reduce(function(e,h){return e?k._mapper?k._mapper(h,e[h]):e[h]:e},g)},concat:function(g,d){return st.Path(this.parts().concat(st.Path(g,
d).parts()))},toString:function(){return this.normalizePath()},serializeExpr:function(){return"lively.lang.Path("+st.inspect(this.parts())+")"},watch:function(g){if(g&&!this.isRoot()){var d=g.target,k=this.get(d,-1),e=this.parts().slice(-1)[0],h="propertyWatcher$"+e,n=k&&k.hasOwnProperty(h),b=g.uninstall,c=g.haltWhenChanged,l=g.showStack,a=k.__lookupGetter__(e),f=k.__lookupSetter__(e);d&&e&&k&&(b?n&&(delete k[e],k[e]=k[h],delete k[h]):n||(a||f?console.log(k+'["'+e+'"] is a getter/setter, watching not support'):
(k[h]=k[e],k.__defineSetter__(e,function(m){var q=k[h];if(g.onSet)g.onSet(m,q);q=k+"."+e+" changed: "+q+" -> "+m;l&&(q+="\n"+("undefined"!==typeof lively?lively.printStack():console.trace()));g.verbose&&console.log(q);if(c)debugger;return k[h]=m}),k.__defineGetter__(e,function(){if(g.onGet)g.onGet(k[h]);return k[h]}),console.log("Watcher for "+k+"."+e+" installed"))))}},debugFunctionWrapper:function(g){var d=g.target,k=this.get(d,-1),e=this.parts().slice(-1)[0],h=void 0===g.haltWhenChanged?!0:g.haltWhenChanged,
n=k&&e&&k[e],b=n&&n.isDebugFunctionWrapper;d&&e&&n&&k&&(g.uninstall?b&&(k[e]=k[e].debugTargetFunction,console.log("Uninstalled debugFunctionWrapper for "+k+"."+e)):b?console.log("debugFunctionWrapper for "+k+"."+e+" already installed"):(g=k[e]=n.wrap(function(c){var l=Array.from(arguments);if(h)debugger;return l.shift().apply(k,l)}),g.isDebugFunctionWrapper=!0,g.debugTargetFunction=n,console.log("debugFunctionWrapper for "+k+"."+e+" installed")))}});st.default=Xg;var ei=lively.FreezerRuntime.recorderFor("lively.lang/graph.js");
ei.clone=Rq;ei.without=xs;ei.hull=Fv;ei.subgraphReachableBy=du;ei.invert=eu;ei.sortByReference=Sq;ei.reduce=fu;ei.random=Tq;ei.range=Ab;ei.shuffle=ub;ei.withoutAll=ve;ei.flatten=ic;ei.uniq=Wd;ei.values=Sj;ei.clone=Rq;ei.clone=Rq;ei.without=xs;ei.without=xs;ei.hull=Fv;ei.hull=Fv;ei.subgraphReachableBy=du;ei.subgraphReachableBy=du;ei.invert=eu;ei.invert=eu;ei.sortByReference=Sq;ei.sortByReference=Sq;ei.reduce=fu;ei.reduce=fu;ei.random=Tq;ei.random=Tq;var $u=Object.freeze({__proto__:null,clone:Rq,without:xs,
hull:Fv,subgraphReachableBy:du,invert:eu,sortByReference:Sq,reduce:fu,random:Tq}),eh=lively.FreezerRuntime.recorderFor("lively.lang/interval.js");eh.isInterval=Hp;eh.sort=Ho;eh.compare=gu;eh.coalesce=Wn;eh.coalesceOverlapping=Xn;eh.mergeOverlapping=hl;eh.intervalsInRangeDo=ys;eh.intervalsInbetween=Uq;eh.mapToMatchingIndexes=Vq;eh.benchmark=function(){function g(d,k,e){return d.name+" "+eh.timeToRunN(function(){return d.apply(null,k,1E5)},e)+"ms"}return["Friday, 20. July 2012:\ncoalesceOverlapping: 0.0003ms\nintervalsInbetween: 0.002ms\nmapToMatchingIndexes: 0.02ms",
"vs.\n"+new Date+":",g(eh.coalesceOverlapping,[[[9,10],[1,8],[3,7],[15,20],[14,21]]],1E5),g(eh.intervalsInbetween,[0,10,[[8,10],[0,2],[3,5]]],1E5),g(eh.mapToMatchingIndexes,[eh.range(0,1E3).map(function(d){return[d,d+1]}),[[4,8],[500,504],[900,1004]]],1E3)].join("\n")};eh.range=Ab;eh.timeToRunN=lc;eh.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;eh.isInterval=Hp;eh.isInterval=Hp;eh.sort=Ho;eh.sort=Ho;eh.compare=gu;eh.compare=gu;eh.coalesce=Wn;eh.coalesce=
Wn;eh.coalesceOverlapping=Xn;eh.coalesceOverlapping=Xn;eh.mergeOverlapping=hl;eh.mergeOverlapping=hl;eh.intervalsInRangeDo=ys;eh.intervalsInRangeDo=ys;eh.intervalsInbetween=Uq;eh.intervalsInbetween=Uq;eh.mapToMatchingIndexes=Vq;eh.mapToMatchingIndexes=Vq;var iI=Object.freeze({__proto__:null,isInterval:Hp,sort:Ho,compare:gu,coalesce:Wn,coalesceOverlapping:Xn,mergeOverlapping:hl,intervalsInRangeDo:ys,intervalsInbetween:Uq,mapToMatchingIndexes:Vq}),Jm=lively.FreezerRuntime.recorderFor("lively.lang/array-projection.js");
Jm.create=Io;Jm.toArray=Kj;Jm.originalToProjectedIndex=Wq;Jm.projectedToOriginalIndex=il;Jm.transformToIncludeIndex=Xq;Jm.create=Io;Jm.create=Io;Jm.toArray=Kj;Jm.toArray=Kj;Jm.originalToProjectedIndex=Wq;Jm.originalToProjectedIndex=Wq;Jm.projectedToOriginalIndex=il;Jm.projectedToOriginalIndex=il;Jm.transformToIncludeIndex=Xq;Jm.transformToIncludeIndex=Xq;var jI=Object.freeze({__proto__:null,create:Io,toArray:Kj,originalToProjectedIndex:Wq,projectedToOriginalIndex:il,transformToIncludeIndex:Xq}),vg=
lively.FreezerRuntime.recorderFor("lively.lang/grid.js");vg.get=Ip;vg.set=U;vg.getRow=ra;vg.setRow=$a;vg.getCol=ob;vg.setCol=Vb;vg.create=qc;vg.mapCreate=ld;vg.forEach=Xd;vg.map=je;vg.toObjects=$e;vg.tableFromObjects=mf;vg.benchmark=function(){var g=[],d=vg.create(1E3,200,1);var k=vg.timeToRunN(function(){vg.forEach(d,function(h){})},10);g.push("forEach: "+k.toFixed(2)+"ms");k=vg.timeToRunN(function(){vg.map(d,function(h,n,b){return n+b+Math.round(100*Math.random())})},10);g.push("map: "+k.toFixed(2)+
"ms");var e=vg.create(1E3,2E3);k=vg.timeToRunN(function(){e=Array(1E3);for(var h=0;1E3>h;h++)e[h]=Array(2E3);vg.forEach(d,function(n,b,c){e[b][c]=b+c+Math.round(100*Math.random())})},10);g.push("map with forEach: "+k+"ms");g.push("--= 2012-09-22 =--\nforEach: 14.9ms\nmap: 19.8ms\nmap with forEach: 38.7ms\n");return g.join("\n")};vg.arrayWithN=ac;vg.timeToRunN=lc;vg.get=Ip;vg.get=Ip;vg.set=U;vg.set=U;vg.getRow=ra;vg.getRow=ra;vg.setRow=$a;vg.setRow=$a;vg.getCol=ob;vg.getCol=ob;vg.setCol=Vb;vg.setCol=
Vb;vg.create=qc;vg.create=qc;vg.mapCreate=ld;vg.mapCreate=ld;vg.forEach=Xd;vg.forEach=Xd;vg.map=je;vg.map=je;vg.toObjects=$e;vg.toObjects=$e;vg.tableFromObjects=mf;vg.tableFromObjects=mf;var dB=Object.freeze({__proto__:null,get:Ip,set:U,getRow:ra,setRow:$a,getCol:ob,setCol:Vb,create:qc,mapCreate:ld,forEach:Xd,map:je,toObjects:$e,tableFromObjects:mf}),sj=lively.FreezerRuntime.recorderFor("lively.lang/tree.js");sj.prewalk=xe;sj.postwalk=bf;sj.find=ij;sj.filter=Th;sj.map=Yg;sj.mapTree=jl;sj.flatten=
ic;sj.detect=sj.find;var dP=sj.detect;sj.prewalk=xe;sj.prewalk=xe;sj.postwalk=bf;sj.postwalk=bf;sj.find=ij;sj.find=ij;sj.detect=dP;sj.detect=dP;sj.filter=Th;sj.filter=Th;sj.map=Yg;sj.map=Yg;sj.mapTree=jl;sj.mapTree=jl;var av=Object.freeze({__proto__:null,prewalk:xe,postwalk:bf,find:ij,detect:dP,filter:Th,map:Yg,mapTree:jl});ya("a4",av);var tt=lively.FreezerRuntime.recorderFor("lively.lang/events.js");tt.isNode="undefined"!==typeof tt.process&&tt.process.versions&&tt.process.versions.node;tt.makeEmitter=
tt.isNode?function(g,d){if(g.on&&g.removeListener)return g;var k="undefined"!==typeof System?System._nodeRequire("events"):tt.require("events");Object.assign(g,k.EventEmitter.prototype);k.EventEmitter.call(g);d&&d.maxListenerLimit&&g.setMaxListeners(d.maxListenerLimit);return g}:function(g){if(g.on&&g.removeListener)return g;g.listeners={};g.on=function(d,k){k&&(g.listeners[d]||(g.listeners[d]=[]),g.listeners[d].push(k))};g.once=function(d,k){function e(){g.removeListener(d,e);k.apply(this,arguments)}
if(k)g.on(d,e)};g.removeListener=function(d,k){g.listeners[d]&&(g.listeners[d]=g.listeners[d].filter(function(e){return e!==k}))};g.removeAllListeners=function(d){g.listeners[d]&&(g.listeners[d]=[])};g.emit=function(){var d=Array.prototype.slice.call(arguments),k=d.shift();(k=g.listeners[k])&&k.length&&k.forEach(function(e){try{e.apply(null,d)}catch(h){console.error("Error in event handler: %s",h.stack||String(h))}})};return g};var Pz=tt.makeEmitter;tt.makeEmitter=Pz;tt.makeEmitter=Pz;var Ly=Object.freeze({__proto__:null,
makeEmitter:Pz}),fk=lively.FreezerRuntime.recorderFor("lively.lang/messenger.js");fk.create=cg;fk.remove=cc;fk.pluck=dd;fk.makeEmitter=Pz;fk.newUUID=zk;fk.OFFLINE="offline";fk.ONLINE="online";fk.CONNECTING="connecting";fk.create=cg;fk.create=cg;var kI=Object.freeze({__proto__:null,create:cg}),wg=lively.FreezerRuntime.recorderFor("lively.lang/worker.js");wg.fork=Ef;wg.create=on;wg.makeEmitter=Pz;wg.newUUID=zk;wg.waitFor=Pg;wg.messengerCreate=cg;wg.Closure=zi;wg.isNodejs="undefined"!==typeof require&&
"undefined"!==typeof process;wg.WorkerSetup={loadDependenciesBrowser:function(g){importScripts.apply("undefined"!==typeof self?self:this,g.scriptsToLoad||[])},loadDependenciesNodejs:function(g){(global.lively||(global.lively={})).lang=require(require("path").join(g.libLocation,"index"))},initBrowserGlobals:function(g){remoteWorker.send=function(d){postMessage(d)};g="undefined"!==typeof self?self:this;g=g.Global=g;g.window=g;g.console=g.console||function(){var d={};["log","error","warn"].forEach(function(k){d[k]=
function(){for(var e=arguments[0],h=1;h<arguments.length;h++)e=e.replace("%s",arguments[h]);remoteWorker.send({type:k,message:["[",k.toUpperCase(),"] ",e].join("")})}});return d}()},initOnMessageHandler:function(g){function d(k){k=k.data.data?k.data:k;if(remoteWorker.messenger)remoteWorker.messenger.onMessage(k);else"close"==k.action&&(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())}if(remoteWorker.on)remoteWorker.on("message",d);else remoteWorker.onmessage=d},initWorkerInterface:function(g){remoteWorker.callStringifiedFunction=
function(d,k,e){try{var h=eval("("+d+")")}catch(c){e(Error("Cannot create function from string: "+c.stack||c));return}d=h.length===k.length+1;var n=lively.lang.fun.once(function(c,l){remoteWorker.isBusy=!1;e(c,l)});remoteWorker.isBusy=!0;d&&k.push(n);try{var b=h.apply(remoteWorker,k.concat([n]))}catch(c){n(c,null);return}d||n(null,b)};remoteWorker.httpRequest=function(d){if(d.url){var k=new XMLHttpRequest,e=d.method||"GET";k.onreadystatechange=function(){4===k.readyState&&d.done&&d.done(k)};k.open(e,
d.url);k.send()}else console.log("Error, httpRequest needs url")};remoteWorker.terminateIfNotBusyIn=function(d){setTimeout(function(){remoteWorker.isBusy?remoteWorker.terminateIfNotBusyIn(d):(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())},d)}},initWorkerMessenger:function(g){if(!g.useMessenger)return null;if(!lively.lang.messenger)throw Error("worker.create requires messenger.js to be loaded!");if(!lively.lang.events)throw Error("worker.create requires events.js to be loaded!");
return remoteWorker.messenger=lively.lang.messenger.create({services:{remoteEval:function(d,k){try{var e=eval(d.data.expr)}catch(h){e=h.stack||h}k.answer(d,{result:String(e)})},run:function(d,k){var e=d.data.func,h=d.data.args;e?remoteWorker.callStringifiedFunction(e,h,function(n,b){k.answer(d,{error:n?String(n):null,result:b})}):k.answer(d,{error:"no funcString"})},close:function(d,k){k.answer(d,{status:"OK"});remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}},isOnline:function(){return!0},
send:function(d,k){remoteWorker.send(d);k()},listen:function(d){d()},close:function(d){remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}})}};wg.BrowserWorker={create:function(g){g=g||{};if(!g.libLocation&&!g.scriptsToLoad){var d=document.querySelector('script[src$="worker.js"]');if(!d)throw Error('Cannot find library path to start worker. Use worker.create({libLocation: "..."}) to explicitly define the path!');g.libLocation=d.src.replace(/worker.js$/,"")}d=String(function(){self.onmessage=
function(k){if("setup"!==k.data.action)throw Error("expected setup to be first message but got "+JSON.stringify(k.data));k=k.data.options||{};initBrowserGlobals(k);loadDependenciesBrowser(k);initOnMessageHandler(k);initWorkerInterface(k);initWorkerMessenger(k);postMessage({workerReady:!0})};__FUNCTIONDECLARATIONS__}).split("__lvVarRecorder.").join("").replace("__FUNCTIONDECLARATIONS__",[wg.WorkerSetup.initBrowserGlobals,wg.WorkerSetup.loadDependenciesBrowser,wg.WorkerSetup.initOnMessageHandler,wg.WorkerSetup.initWorkerInterface,
wg.WorkerSetup.initWorkerMessenger].join("\n"));d="("+wg.Closure.fromSource(d).getFuncSource()+")();";d=new Worker(function(k){try{var e=new Blob([k],{type:"text/javascript"})}catch(h){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,e=new BlobBuilder,e.append(k),e=e.getBlob()}return("undefined"!==typeof webkitURL?webkitURL:URL).createObjectURL(e)}(d));(function(k,e){wg.makeEmitter(e);k.scriptsToLoad||(k.scriptsToLoad="base.js events.js object.js collection.js function.js string.js number.js date.js messenger.js worker.js".split(" ").map(function(n){return k.libLocation+
n}));var h=Object.keys(k).reduce(function(n,b){"function"!==typeof k[b]&&(n[b]=k[b]);return n},{});e.onmessage=function(n){void 0!==n.data.workerReady?(e.ready=!!n.data.workerReady,e.ready?e.emit("ready"):e.emit("close")):e.emit("message",n.data)};e.errors=[];e.onerror=function(n){console.error(n);e.errors.push(n);e.emit("error",n)};e.postMessage({action:"setup",options:h})})(g,d);return d}};wg.NodejsWorker={debug:!1,initCodeFileCreated:!1,create:function(g){g=g||{};var d,k=wg.makeEmitter({ready:!1,
errors:[],postMessage:function(e){d?k.ready?d.send(e):k.emit("error",Error("nodejs worker process not ready or already closed")):k.emit("error",Error("nodejs worker process not yet created"))}});wg.NodejsWorker.startWorker(g,function(e,h){e?(k.ready=!1,k.emit("error",e)):(d=h,d.on("message",function(n){wg.NodejsWorker.debug&&console.log("[WORKER PARENT] got message:",n);k.emit("message",n)}),d.on("close",function(){console.log("[WORKER PARENT] worker closed");k.emit("close")}),d.on("error",function(n){console.log("[WORKER PARENT] error ",
n);k.errors.push(n);k.emit("error",n)}),k.ready=!0,k.emit("ready"))});return k},workerSetupFunction:function(){var g=process;console.log("[WORKER] Starting init");g.on("message",function(d){if("setup"!==d.action)throw Error("expected setup to be first message but got "+JSON.stringify(d.data));g.removeAllListeners("message");d=d.data.options||{};console.log("[WORKER] running setup with options",d);loadDependenciesNodejs(d);initOnMessageHandler(d);initWorkerInterface(d);initWorkerMessenger(d);g.send({workerReady:!0})});
__FUNCTIONDECLARATIONS__},ensureInitCodeFile:function(g,d,k){var e=require("path"),h=require("os"),n=require("fs");h=e.join(h.tmpDir(),"lively-nodejs-workers/");var b=e.join(h,"nodejs-worker-init.js");wg.NodejsWorker.initCodeFileCreated?n.exists(b,function(c){c?k(null,b):wg.NodejsWorker.createWorkerCodeFile(g,b,d,k)}):wg.NodejsWorker.createWorkerCodeFile(g,b,d,k)},createWorkerCodeFile:function(g,d,k,e){g=require("path");var h=require("fs"),n=require("child_process").exec;n("mkdir -p "+g.dirname(d),
function(b,c,l){b?e(Error(["[WORKER PARENT] Could not create worker temp dir:",c,l].join("\n"))):h.writeFile(d,k,function(a){wg.NodejsWorker.debug&&console.log("worker code file %s created",d);wg.NodejsWorker.initCodeFileCreated=!0;e(a,d)})})},startWorker:function(g,d){var k=require("util"),e=require("child_process").fork,h=String(wg.NodejsWorker.workerSetupFunction).replace("__FUNCTIONDECLARATIONS__",[wg.WorkerSetup.loadDependenciesNodejs,wg.WorkerSetup.initOnMessageHandler,wg.WorkerSetup.initWorkerInterface,
wg.WorkerSetup.initWorkerMessenger].join("\n"));k=k.format("(%s)();\n",h);wg.NodejsWorker.ensureInitCodeFile(g,k,function(n,b){if(n)return d(n);var c=e(b,{});wg.NodejsWorker.debug&&console.log("worker forked");c.on("message",function(l){"pong"===l.action?console.log("[WORKER pong] ",l):"log"===l.action&&console.log("[Message from WORKER] ",l.data)});c.once("message",function(l){wg.NodejsWorker.debug&&console.log("worker setup done");d(null,c,l)});c.on("close",function(){wg.NodejsWorker.debug&&console.log("[WORKER PARENT] worker closed")});
c.send({action:"setup",data:{options:g}});global.WORKER=c})}};wg.fork=Ef;wg.fork=Ef;wg.create=on;wg.create=on;var lI=Object.freeze({__proto__:null,fork:Ef,create:on}),cd=lively.FreezerRuntime.recorderFor("lively.lang/index.js");cd.createLivelyLangObject=function(){return{chain:cd.chain,noConflict:cd.noConflict,installGlobals:cd.installGlobals,uninstallGlobals:cd.uninstallGlobals,globalInterfaceSpec:cd.globalInterfaceSpec,toString:function(){return"[object lively.lang]"}}};cd.globalInstall=Jp;cd.chain=
Hl;cd.createChain=function(g,d){return Object.keys(g).reduce(function(k,e){k[e]=function(){var h=Array.prototype.slice.call(arguments);h=g[e].apply(null,[d].concat(h));return cd.chain(h)};return k},{value:function(){return d}})};cd.noConflict=hu;cd.installGlobals=Il;cd.installProperty=function(g,d){if(!g.isIn(cd.livelyLang))throw d=Error("property not provided by lively.lang: "+g),console.error(d.stack||d),d;g=g.get(cd.livelyLang);if("function"===typeof g&&"prototype"===d.slice(-2,-1).toString()){var k=
g;g=function(){var e=Array.prototype.slice.call(arguments);e.unshift(this);return k.apply(null,e)};g.toString=function(){return k.toString()}}d.set(cd.GLOBAL,g,!0)};cd.uninstallGlobals=Gv;cd.string=Hg;cd.num=wk;cd.fun=Xk;cd.Closure=zi;cd.arr=Te;cd.obj=lf;cd.properties=mp;cd.date=rt;cd.promise=Kf;cd.Path=Xg;cd.graph=$u;cd.interval=iI;cd.arrayProjection=jI;cd.Group=vm;cd.grid=dB;cd.tree=av;cd.events=Ly;cd.messenger=kI;cd.worker=lI;cd.worker=lI;cd.worker=lI;cd.messenger=kI;cd.messenger=kI;cd.events=
Ly;cd.events=Ly;cd.tree=av;cd.tree=av;cd.grid=dB;cd.grid=dB;cd.arrayProjection=jI;cd.arrayProjection=jI;cd.interval=iI;cd.interval=iI;cd.graph=$u;cd.graph=$u;cd.date=rt;cd.date=rt;cd.properties=mp;cd.properties=mp;cd.obj=lf;cd.obj=lf;cd.arr=Te;cd.arr=Te;cd.fun=Xk;cd.fun=Xk;cd.num=wk;cd.num=wk;cd.string=Hg;cd.string=Hg;cd.Closure=zi;cd.Closure=zi;cd.promise=Kf;cd.promise=Kf;cd.Path=Xg;cd.Path=Xg;cd.Group=vm;cd.Group=vm;cd.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:
"undefined"!==typeof self?self:void 0;cd.isNode="undefined"!==typeof cd.process&&cd.process.env&&"function"===typeof cd.process.exit;cd.globalInterfaceSpec=[{action:"installMethods",target:"Array",sources:["arr"],methods:["from","genN","range","withN"]},{action:"installMethods",target:"Array.prototype",sources:["arr"],methods:"all any batchify clear clone collect compact delimWith detect doAndContinue each equals filterByKey findAll first flatten forEachShowingProgress grep groupBy groupByKey histogram include inject intersect invoke last mapAsync mapAsyncSeries mask max min mutableCompact nestedDelay partition pluck pushAll pushAllAt pushAt pushIfNotIncluded reMatches reject rejectByKey remove removeAt replaceAt rotate shuffle size sortBy sortByKey sum swap toArray toTuples union uniq uniqBy without withoutAll zip".split(" "),
alias:[["select","filter"]]},{action:"installMethods",target:"Date",sources:["date"],methods:[]},{action:"installMethods",target:"Date.prototype",sources:["date"],methods:["equals","format","relativeTo"]},{action:"installMethods",target:"Function",sources:["fun"],methods:["fromString"]},{action:"installMethods",target:"Function.prototype",sources:["fun"],methods:"addToObject argumentNames asScript asScriptOf binds curry delay functionNames localFunctionNames getOriginal getVarMapping logCalls logCompletion logErrors qualifiedMethodName setProperty traceCalls wrap".split(" ")},
{action:"installMethods",target:"Number",sources:["num"],methods:[]},{action:"installMethods",target:"Number.prototype",sources:["num"],methods:["detent","randomSmallerInteger","roundTo","toDegrees","toRadians"]},{action:"installMethods",target:"Object",sources:["obj"],methods:"addScript clone deepCopy extend inherit isArray isBoolean isElement isEmpty isFunction isNumber isObject isRegExp isString isUndefined merge mergePropertyInHierarchy values valuesInPropertyHierarchy".split(" ")},{action:"installMethods",
target:"Object.prototype",sources:["obj"],methods:[]},{action:"installMethods",target:"String.prototype",sources:["string"],methods:"camelize capitalize digitValue empty hashCode include pad regExpEscape startsWithVowel succ times toArray toQueryParams truncate".split(" ")},{action:"installObject",target:"Numbers",source:"num",methods:"average between convertLength humanReadableByteSize median normalRandom parseLength random sort".split(" ")},{action:"installObject",target:"Properties",source:"properties",
methods:"all allOwnPropertiesOrFunctions allProperties any forEachOwn hash nameFor own ownValues values".split(" ")},{action:"installObject",target:"Strings",source:"string",methods:"camelCaseString createDataURI diff format formatFromArray indent lineIndexComputer lines md5 newUUID nonEmptyLines pad paragraphs peekLeft peekRight print printNested printTable printTree quote reMatches stringMatch tableize tokens unescapeCharacterEntities withDecimalPrecision".split(" ")},{action:"installObject",target:"Objects",
source:"obj",methods:"asObject equals inspect isMutableType safeToString shortPrintStringOf typeStringOf".split(" ")},{action:"installObject",target:"Functions",source:"fun",methods:"all compose composeAsync createQueue debounce debounceNamed either extractBody flip notYetImplemented once own throttle throttleNamed timeToRun timeToRunN waitFor workerWithCallbackQueue wrapperChain".split(" ")},{action:"installObject",target:"Grid",source:"grid"},{action:"installObject",target:"Interval",source:"interval"},
{action:"installObject",target:"lively.ArrayProjection",source:"arrayProjection"},{action:"installObject",target:"lively.Closure",source:"Closure"},{action:"installObject",target:"lively.Grouping",source:"Group"},{action:"installObject",target:"lively.PropertyPath",source:"Path"},{action:"installObject",target:"lively.Worker",source:"worker"},{action:"installObject",target:"lively.Class",source:"classHelper"}];var mI=cd.createLivelyLangObject();cd.livelyLang=mI;cd.livelyLang=mI;cd.livelyLang=mI;cd.globalInstall=
Jp;cd.globalInstall=Jp;cd.chain=Hl;cd.chain=Hl;cd.noConflict=hu;cd.noConflict=hu;cd.installGlobals=Il;cd.installGlobals=Il;cd.uninstallGlobals=Gv;cd.uninstallGlobals=Gv;var W_=Object.freeze({__proto__:null,worker:lI,messenger:kI,events:Ly,tree:av,grid:dB,arrayProjection:jI,interval:iI,graph:$u,date:rt,properties:mp,obj:lf,arr:Te,fun:Xk,num:wk,string:Hg,Closure:zi,promise:Kf,Path:Xg,Group:vm,livelyLang:mI,globalInstall:Jp,chain:Hl,noConflict:hu,installGlobals:Il,uninstallGlobals:Gv}),xh=lively.FreezerRuntime.recorderFor("lively.graphics/convert-css-length.js");
xh.parseUnit=function(g,d){d||(d=[0,""]);g=String(g);var k=parseFloat(g,10);d[0]=k;d[1]=g.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return d};xh.unit=function(g){return xh.parseUnit(g)[1]};xh.unitLess=function(g){return xh.parseUnit(g)[0]};xh.genericCssLengthParser=Hv;xh.cssLengthToPixels=ox;xh.baseFontSize="16px";if(System.get("@system-env").browser)try{xh.newBaseFontSize=xh.genericCssLengthParser(xh.baseFontSize)(window.getComputedStyle(document.body).fontSize),xh.newBaseFontSize&&"NaN"!==xh.newBaseFontSize.slice(0,
3)&&(xh.baseFontSize=xh.newBaseFontSize)}catch(g){}xh.genericCssLengthParser=Hv;xh.genericCssLengthParser=Hv;var eP=xh.genericCssLengthParser(xh.baseFontSize);xh.parseCssLength=eP;xh.parseCssLength=eP;xh.parseCssLength=eP;xh.cssLengthToPixels=ox;xh.cssLengthToPixels=ox;var md=lively.FreezerRuntime.recorderFor("lively.graphics/geometry-2d.js");md.rect=Gk;md.pt=fh;md.num=wk;md.string=Hg;md.grid=dB;md.cssLengthToPixels=ox;var Bf=function(g,d){this.x=g||0;this.y=d||0};Bf.ensure=function(g){return g instanceof
md.Point?g:new md.Point(g.x,g.y)};Bf.polar=function(g,d){return new md.Point(g*Math.cos(d),g*Math.sin(d))};Bf.random=function(g){return new md.Point(md.num.randomSmallerInteger(g.x),md.num.randomSmallerInteger(g.y))};Bf.fromLiteral=function(g){return md.pt(g.x,g.y)};Bf.fromTuple=function(g){return md.pt(g[0],g[1])};Bf.prototype.getX=function(){return this.x};Bf.prototype.getY=function(){return this.y};Bf.prototype.toFixed=function(g){return new md.Point(this.x.toFixed(g),this.y.toFixed(g))};Bf.prototype.addPt=
function(g){return new md.Point(this.x+g.x,this.y+g.y)};Bf.prototype.addXY=function(g,d){return new md.Point(this.x+g,this.y+d)};Bf.prototype.midPt=function(g){return new md.Point((this.x+g.x)/2,(this.y+g.y)/2)};Bf.prototype.subPt=function(g){return new md.Point(this.x-g.x,this.y-g.y)};Bf.prototype.subXY=function(g,d){return new md.Point(this.x-g,this.y-d)};Bf.prototype.scaleBy=function(g,d){return new md.Point(this.x*g,this.y*(d||g))};Bf.prototype.scaleByPt=function(g){return new md.Point(this.x*
g.x,this.y*g.y)};Bf.prototype.negated=function(){return new md.Point(-this.x,-this.y)};Bf.prototype.inverted=function(){return new md.Point(1/this.x,1/this.y)};Bf.prototype.invertedSafely=function(){return new md.Point(this.x&&1/this.x,this.y&&1/this.y)};Bf.prototype.lessPt=function(g){return this.x<g.x&&this.y<g.y};Bf.prototype.leqPt=function(g){return this.x<=g.x&&this.y<=g.y};Bf.prototype.eqPt=function(g){return this.x==g.x&&this.y==g.y};Bf.prototype.equals=function(g){return this.x==g.x&&this.y==
g.y};Bf.prototype.withX=function(g){return md.pt(g,this.y)};Bf.prototype.withY=function(g){return md.pt(this.x,g)};Bf.prototype.copy=function(){return new md.Point(this.x,this.y)};Bf.prototype.minPt=function(g,d){d||(d=new md.Point(0,0));d.x=Math.min(this.x,g.x);d.y=Math.min(this.y,g.y);return d};Bf.prototype.maxPt=function(g,d){d||(d=new md.Point(0,0));d.x=Math.max(this.x,g.x);d.y=Math.max(this.y,g.y);return d};Bf.prototype.random=function(){return md.Point.random(this)};Bf.prototype.normalized=
function(){var g=this.r();return md.pt(this.x/g,this.y/g)};Bf.prototype.fastNormalized=function(){var g=this.fastR();return md.pt(this.x/g,this.y/g)};Bf.prototype.dotProduct=function(g){return this.x*g.x+this.y*g.y};Bf.prototype.matrixTransform=function(g,d){var k=g.a*this.x+g.c*this.y+g.e;g=g.b*this.x+g.d*this.y+g.f;return d?Object.assign(d,{x:k,y:g}):md.pt(k,g)};Bf.prototype.matrixTransformDirection=function(g,d){var k=g.a*this.x+g.c*this.y;g=g.b*this.x+g.d*this.y;return d?Object.assign(d,{x:k,
y:g}):md.pt(k,g)};Bf.prototype.griddedBy=function(g){return md.pt(this.x-this.x%g.x,this.y-this.y%g.y)};Bf.prototype.roundTo=function(g){return new md.Point(md.num.roundTo(this.x,g),md.num.roundTo(this.y,g))};Bf.prototype.dist=function(g){var d=this.x-g.x;g=this.y-g.y;return Math.sqrt(d*d+g*g)};Bf.prototype.distSquared=function(g){var d=this.x-g.x;g=this.y-g.y;return d*d+g*g};Bf.prototype.nearestPointOnLineBetween=function(g,d){if(g.x==d.x)return md.pt(g.x,this.y);if(g.y==d.y)return md.pt(this.x,
g.y);var k=g.x;g=g.y;var e=d.x-k;d=d.y-g;var h=((this.y-g)/e+(this.x-k)/d)/(e/d+d/e);return md.pt(k+h*e,g+h*d)};Bf.prototype.interpolate=function(g,d,k){return void 0===k||k?md.pt(md.num.interpolate(g,this.x,d.x),md.num.interpolate(g,this.y,d.y)):md.Point.polar(md.num.interpolate(g,this.r(),d.r()),md.num.interpolate(g,this.theta(),d.theta()))};Bf.prototype.r=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};Bf.prototype.fastR=function(){for(var g=this.x*this.x+this.y*this.y,d=17,k=0;6>k;k++)d=
(d+g/d)/2;return d};Bf.prototype.theta=function(){return Math.atan2(this.y,this.x)};Bf.prototype.asRectangle=function(){return new md.Rectangle(this.x,this.y,0,0)};Bf.prototype.extent=function(g){return new md.Rectangle(this.x,this.y,g.x,g.y)};Bf.prototype.extentAsRectangle=function(){return new md.Rectangle(0,0,this.x,this.y)};Bf.prototype.lineTo=function(g){return new md.Line(this,g)};Bf.prototype.toTuple=function(){return[this.x,this.y]};Bf.prototype.toLiteral=function(){return{x:this.x,y:this.y}};
Bf.prototype.toString=function(g){return void 0===g||g?md.string.format("pt(%1.f,%1.f)",this.x,this.y):md.string.format("pt(%10.d,%10.d)",this.x,this.y)};Bf.prototype.inspect=function(){return JSON.stringify(this)};Bf.prototype.__serialize__=function(){return{__expr__:this.toString(!1),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}};$jscomp.global.Object.defineProperties(Bf.prototype,{isPoint:{configurable:!0,enumerable:!0,get:function(){return!0}}});ya("al",Bf);md.Point=Bf;var Pd=function(g,
d,k,e){this.x=g||0;this.y=d||0;this.width=k||0;this.height=e||0};Pd.fromAny=function(g,d){return md.rect(g.minPt(d),g.maxPt(d))};Pd.fromLiteral=function(g){return new md.Rectangle(g.x,g.y,g.width,g.height)};Pd.fromTuple=function(g){return new md.Rectangle(g[0],g[1],g[2],g[3])};Pd.unionPts=function(g){for(var d=g[0],k=g[0],e=1;e<g.length;e++)d=d.minPt(g[e]),k=k.maxPt(g[e]);return md.rect(d,k)};Pd.ensure=function(g){return g instanceof md.Rectangle?g:new md.Rectangle(g.x,g.y,g.width,g.height)};Pd.fromElement=
function(g){if("function"===typeof g.getBoundingClientRect){var d=g.getBoundingClientRect();return md.rect(d.left,d.top,d.width,d.height)}if("http://www.w3.org/1999/xhtml"==g.namespaceURI){d=md.cssLengthToPixels(g.style.left||"0px");var k=md.cssLengthToPixels(g.style.top||"0px"),e=md.cssLengthToPixels(g.style.width||"0px");g=md.cssLengthToPixels(g.style.hieght||"0px");return new md.Rectangle(d,k,e,g)}if("http://www.w3.org/2000/svg"==g.namespaceURI)return new md.Rectangle(g.x.baseVal.value,g.y.baseVal.value,
g.width.baseVal.value,g.height.baseVal.value);throw Error("Cannot create Rectangle from "+g);};Pd.inset=function(g,d,k,e){void 0===d&&(d=g);void 0===k&&(k=g);void 0===e&&(e=d);return new md.Rectangle(g,d,k-g,e-d)};Pd.prototype.getX=function(){return this.x};Pd.prototype.getY=function(){return this.y};Pd.prototype.getWidth=function(){return this.width};Pd.prototype.getHeight=function(){return this.height};Pd.prototype.copy=function(){return new md.Rectangle(this.x,this.y,this.width,this.height)};Pd.prototype.toFixed=
function(g){return new md.Rectangle(this.x.toFixed(g),this.y.toFixed(g),this.width.toFixed(g),this.height.toFixed(g))};Pd.prototype.withWidth=function(g){return new md.Rectangle(this.x,this.y,g,this.height)};Pd.prototype.withHeight=function(g){return new md.Rectangle(this.x,this.y,this.width,g)};Pd.prototype.withX=function(g){return new md.Rectangle(g,this.y,this.width,this.height)};Pd.prototype.withY=function(g){return new md.Rectangle(this.x,g,this.width,this.height)};Pd.prototype.withExtent=function(g){return new md.Rectangle(this.x,
this.y,g.x,g.y)};Pd.prototype.withTopLeft=function(g){return md.Rectangle.fromAny(g,this.bottomRight())};Pd.prototype.withTopRight=function(g){return md.Rectangle.fromAny(this.bottomLeft(),g)};Pd.prototype.withBottomRight=function(g){return md.Rectangle.fromAny(g,this.topLeft())};Pd.prototype.withBottomLeft=function(g){return md.Rectangle.fromAny(g,this.topRight())};Pd.prototype.withLeftCenter=function(g){return new md.Rectangle(g.x,this.y,this.width+(this.x-g.x),this.height)};Pd.prototype.withRightCenter=
function(g){return new md.Rectangle(this.x,this.y,g.x-this.x,this.height)};Pd.prototype.withTopCenter=function(g){return new md.Rectangle(this.x,g.y,this.width,this.height+(this.y-g.y))};Pd.prototype.withBottomCenter=function(g){return new md.Rectangle(this.x,this.y,this.width,g.y-this.y)};Pd.prototype.withCenter=function(g){return new md.Rectangle(g.x-this.width/2,g.y-this.height/2,this.width,this.height)};Pd.prototype.insetBy=function(g){return new md.Rectangle(this.x+g,this.y+g,this.width-2*g,
this.height-2*g)};Pd.prototype.insetByPt=function(g){return new md.Rectangle(this.x+g.x,this.y+g.y,this.width-2*g.x,this.height-2*g.y)};Pd.prototype.grid=function(g,d){var k=this.width/d,e=this.height/g;return md.grid.mapCreate(g,d,function(h,n){return new md.Rectangle(k*n,e*h,k,e)})};Pd.prototype.divide=function(g){var d=this;return g.map(function(k){return md.rect(d.x+d.width*k.x,d.y+d.height*k.y,d.width*k.width,d.height*k.height)})};Pd.prototype.toTuple=function(){return[this.x,this.y,this.width,
this.height]};Pd.prototype.lineTo=function(g){var d=this.center(),k=g.center();k=d.lineTo(k);d=this.lineIntersection(k)[0];g=g.lineIntersection(k)[0];return d&&g&&d.lineTo(g)};Pd.prototype.equals=function(g){return g?this.x==g.x&&this.y==g.y&&this.width==g.width&&this.height==g.height:!1};Pd.prototype.inspect=function(){return JSON.stringify(this)};Pd.prototype.topLeft=function(){return new md.Point(this.x,this.y)};Pd.prototype.topRight=function(){return new md.Point(this.maxX(),this.y)};Pd.prototype.bottomRight=
function(){return new md.Point(this.maxX(),this.maxY())};Pd.prototype.bottomLeft=function(){return new md.Point(this.x,this.maxY())};Pd.prototype.leftCenter=function(){return new md.Point(this.x,this.center().y)};Pd.prototype.rightCenter=function(){return new md.Point(this.maxX(),this.center().y)};Pd.prototype.topCenter=function(){return new md.Point(this.center().x,this.y)};Pd.prototype.bottomCenter=function(){return new md.Point(this.center().x,this.maxY())};Pd.prototype.extent=function(){return new md.Point(this.width,
this.height)};Pd.prototype.center=function(){return new md.Point(this.x+this.width/2,this.y+this.height/2)};Pd.prototype.topEdge=function(){return new md.Line(this.topLeft(),this.topRight())};Pd.prototype.bottomEdge=function(){return new md.Line(this.bottomLeft(),this.bottomRight())};Pd.prototype.leftEdge=function(){return new md.Line(this.topLeft(),this.bottomLeft())};Pd.prototype.rightEdge=function(){return new md.Line(this.topRight(),this.bottomRight())};Pd.prototype.edges=function(){return[this.topEdge(),
this.rightEdge(),this.bottomEdge(),this.leftEdge()]};Pd.prototype.allPoints=function(){for(var g=this.x,d=this.y,k=this.width,e=this.height,h=[],n=d;n<d+e;n++)for(var b=g;b<g+k;b++)h.push(md.pt(b,n));return h};Pd.prototype.isNonEmpty=function(g){return 0<this.width&&0<this.height};Pd.prototype.containsRect=function(g){return this.x<=g.x&&this.y<=g.y&&g.maxX()<=this.maxX()&&g.maxY()<=this.maxY()};Pd.prototype.intersects=function(g){return this.intersection(g).isNonEmpty()};Pd.prototype.containsPoint=
function(g){return this.x<=g.x&&g.x<=this.x+this.width&&this.y<=g.y&&g.y<=this.y+this.height};Pd.prototype.translatedBy=function(g){return new md.Rectangle(this.x+g.x,this.y+g.y,this.width,this.height)};Pd.prototype.scaleByRect=function(g){return new md.Rectangle(this.x+g.x*this.width,this.y+g.y*this.height,g.width*this.width,g.height*this.height)};Pd.prototype.scaleRectIn=function(g){return new md.Rectangle((this.x-g.x)/g.width,(this.y-g.y)/g.height,this.width/g.width,this.height/g.height)};Pd.prototype.scaleRectTo=
function(g){var d,k;this.width>this.height?k=this.width:d=this.height;g=k?g.width/k:g.height/d;return this.withExtent(this.extent().scaleBy(g)).withCenter(this.center())};Pd.prototype.expandBy=function(g){return this.insetBy(0-g)};Pd.prototype.translateForInclusion=function(g){var d=g.x,k=g.y,e=d+g.width,h=k+g.height;e>this.right()&&(d-=e-this.right());h>this.bottom()&&(k-=h-this.bottom());d<this.x&&(d=this.x);k<this.y&&(k=this.y);return md.rect(d,k,g.width,g.height)};Pd.prototype.transformRectForInclusion=
function(g){var d=this.topLeft().maxPt(g.topLeft());g=d.addPt(g.extent());g=this.bottomRight().minPt(g);return md.rect(d,g)};Pd.prototype.insetByRect=function(g){return new md.Rectangle(this.x+g.left(),this.y+g.top(),this.width-(g.left()+g.right()),this.height-(g.top()+g.bottom()))};Pd.prototype.outsetByRect=function(g){return new md.Rectangle(this.x-g.left(),this.y-g.top(),this.width+(g.left()+g.right()),this.height+(g.top()+g.bottom()))};Pd.prototype.interpolate=function(g,d){var k=this.topLeft(),
e=this.bottomRight(),h=d.topLeft();d=d.bottomRight();return md.Rectangle.fromAny(k.interpolate(g,h),e.interpolate(g,d))};Pd.prototype.intersection=function(g){var d=Math.max(this.x,g.x),k=Math.max(this.y,g.y);return new md.Rectangle(d,k,Math.min(this.x+this.width,g.x+g.width)-d,Math.min(this.y+this.height,g.y+g.height)-k)};Pd.prototype.union=function(g){return md.rect(this.topLeft().minPt(g.topLeft()),this.bottomRight().maxPt(g.bottomRight()))};Pd.prototype.lineIntersection=function(g){return this.edges().map(function(d){return d.intersection(g)}).filter(function(d){return!!d})};
Pd.prototype.dist=function(g){var d=this.closestPointToPt(g.center());g=g.closestPointToPt(d);return d.dist(g)};Pd.prototype.relativeToAbsPoint=function(g){return new md.Point(this.x+this.width*g.x,this.y+this.height*g.y)};Pd.prototype.closestPointToPt=function(g){return md.pt(Math.min(Math.max(this.x,g.x),this.maxX()),Math.min(Math.max(this.y,g.y),this.maxY()))};Pd.prototype.maxX=function(){return this.x+this.width};Pd.prototype.maxY=function(){return this.y+this.height};Pd.prototype.realWidth=function(){return 0>
this.x?-this.x+this.width:this.width};Pd.prototype.realHeight=function(){return 0>this.y?-this.y+this.height:this.height};Pd.prototype.area=function(){return(0>this.width&&0>this.height?-1:1)*this.width*this.height};Pd.prototype.randomPoint=function(){return md.Point.random(md.pt(this.width,this.height)).addPt(this.topLeft())};Pd.prototype.constrainPt=function(g){return g.maxPt(this.topLeft()).minPt(this.bottomRight())};Pd.prototype.left=function(){return this.x};Pd.prototype.right=function(){return this.maxX()};
Pd.prototype.top=function(){return this.y};Pd.prototype.bottom=function(){return this.maxY()};Pd.prototype.toInsetTuple=function(){return[this.left(),this.top(),this.right(),this.bottom()]};Pd.prototype.toAttributeValue=function(g){g=.01;var d=[this.left()];this.top()===this.bottom()&&this.left()===this.right()?this.top()===this.left()&&d.push(this.top()):d=d.concat([this.top(),this.right(),this.bottom()]);return d.invoke("roundTo",g||.01)};Pd.prototype.toLiteral=function(){return{x:this.x,y:this.y,
width:this.width,height:this.height}};Pd.prototype.partNamed=function(g){return this[g].call(this)};Pd.prototype.withPartNamed=function(g,d){return this[this.setterName(g)].call(this,d)};Pd.prototype.setterName=function(g){return"with"+g[0].toUpperCase()+g.slice(1)};Pd.prototype.partNameNear=function(g,d,k){g=this.partNameNearest(g,d);return d.dist(this.partNamed(g))<k?g:null};Pd.prototype.partNameNearest=function(g,d){for(var k=1E99,e,h=0;h<g.length;h++){e=g[h];var n=d.dist(this.partNamed(e));if(n<
k){var b=e;k=n}}return b};Pd.prototype.toString=function(){return md.string.format("rect(%s,%s,%s,%s)",this.x,this.y,this.width,this.height)};Pd.prototype.__serialize__=function(){return{__expr__:this.toString(),bindings:{"lively.graphics/geometry-2d.js":["rect"]}}};$jscomp.global.Object.defineProperties(Pd.prototype,{corners:{configurable:!0,enumerable:!0,get:function(){return["topLeft","topRight","bottomRight","bottomLeft"]}},sides:{configurable:!0,enumerable:!0,get:function(){return["leftCenter",
"rightCenter","topCenter","bottomCenter"]}},isRectangle:{configurable:!0,enumerable:!0,get:function(){return!0}}});ya("a1",Pd);md.Rectangle=Pd;var qj=function(g,d,k){g?g instanceof md.Point?(d=d||0,void 0===k&&(k=md.pt(1,1)),this.a=this.ensureNumber(k.x*Math.cos(d)),this.b=this.ensureNumber(k.y*Math.sin(d)),this.c=this.ensureNumber(k.x*-Math.sin(d)),this.d=this.ensureNumber(k.y*Math.cos(d)),this.e=this.ensureNumber(g.x),this.f=this.ensureNumber(g.y),1<this.a&&(this.a=Math.round(this.a*Math.pow(10,
2))/Math.pow(10,2)),1<this.d&&(this.d=Math.round(this.d*Math.pow(10,2))/Math.pow(10,2))):this.fromMatrix(g):(this.a=this.d=1,this.b=this.c=this.e=this.f=0)};qj.prototype.copy=function(){return new md.Transform(this)};qj.prototype.fromMatrix=function(g){this.a=this.ensureNumber(g.a);this.b=this.ensureNumber(g.b);this.c=this.ensureNumber(g.c);this.d=this.ensureNumber(g.d);this.e=this.ensureNumber(g.e);this.f=this.ensureNumber(g.f)};qj.prototype.getRotation=function(){var g=md.num.toDegrees(Math.atan2(-this.c,
this.a));return Math.abs(g)<this.eps?0:g};qj.prototype.getScale=function(){var g=this.a,d=this.c;g=Math.sqrt(g*g+d*d);return Math.abs(g-1)<this.eps?1:g};qj.prototype.getScalePoint=function(){var g=this.a,d=this.b,k=this.c,e=this.d,h=Math.atan2(-k,g);return md.pt(Math.sqrt(g*g+k*k),Math.abs(d)>Math.abs(e)?d/Math.sin(h):e/Math.cos(h))};qj.prototype.getTranslation=function(){return md.pt(this.e,this.f)};qj.prototype.isTranslation=function(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d};qj.prototype.toSVGAttributeValue=
function(){var g=this.getTranslation();g="translate("+g.x+","+g.y+")";var d=this.getRotation(),k=this.getScalePoint();0!=d&&(g+=" rotate("+this.getRotation()+")");if(1!=k.x||1!=k.y)g+=" scale("+k.x+","+k.y+")";return g};qj.prototype.toCSSValue=function(g){var d="",k=this.getTranslation();d+="translate("+k.x.toFixed(2)+"px,"+k.y.toFixed(2)+"px)";if(g){k=g.width/2;var e=g.height/2;d+=" translate("+k.toFixed(2)+"px,"+e.toFixed(2)+"px)"}0!=this.getRotation()&&(d+=" rotate("+this.getRotation().toFixed(2)+
"deg)");g&&(k=g.width/2,e=g.height/2,d+=" translate("+(-1*k).toFixed(2)+"px,"+(-1*e).toFixed(2)+"px)");g=this.getScalePoint();if(1!=g.x||1!=g.y)d+=" scale("+g.x.toFixed(2)+","+g.y.toFixed(2)+")";return d};qj.prototype.toCSSTransformString=function(){var g=this.getRotation(),d=this.getScale();return"translate("+this.e+"px,"+this.f+"px) rotate("+g+"deg) scale("+d+","+d+")"};qj.prototype.toString=function(){return this.toCSSTransformString()};qj.prototype.toMatrix=function(){return this.copy()};qj.prototype.transformPoint=
function(g,d){return g.matrixTransform(this,d)};qj.prototype.transformDirection=function(g,d){return g.matrixTransformDirection(this,d)};qj.prototype.matrixTransformForMinMax=function(g,d,k){var e=this.a*g.x+this.c*g.y+this.e;g=this.b*g.x+this.d*g.y+this.f;e>k.x&&(k.x=e);g>k.y&&(k.y=g);e<d.x&&(d.x=e);g<d.y&&(d.y=g)};qj.prototype.transformRectToRect=function(g){var d=md.pt(Infinity,Infinity),k=md.pt(-Infinity,-Infinity);this.matrixTransformForMinMax(g.topLeft(),d,k);this.matrixTransformForMinMax(g.bottomRight(),
d,k);this.isTranslation()||(this.matrixTransformForMinMax(g.topRight(),d,k),this.matrixTransformForMinMax(g.bottomLeft(),d,k));return md.rect(d,k)};qj.prototype.preConcatenate=function(g){var d=this.matrix_||this.toMatrix();this.a=g.a*d.a+g.c*d.b;this.b=g.b*d.a+g.d*d.b;this.c=g.a*d.c+g.c*d.d;this.d=g.b*d.c+g.d*d.d;this.e=g.a*d.e+g.c*d.f+g.e;this.f=g.b*d.e+g.d*d.f+g.f;this.matrix_=this.toMatrix();return this};qj.prototype.invert=function(){var g=this.copy(),d=1/(g.a*g.d-g.c*g.b);this.a=g.d*d;this.b=
-g.b*d;this.c=-g.c*d;this.d=g.a*d;this.e=(g.c*g.f-g.e*g.d)*d;this.f=-(g.a*g.f-g.b*g.e)*d;return this};qj.prototype.inverse=function(){var g=this.matrix_||this.toMatrix();g=new this.constructor(g);g.invert();return g};qj.prototype.ensureNumber=function(g){if(isNaN(g))throw Error("not a number");return g};qj.prototype.__serialize__=function(){return{__expr__:"new Transform({a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", e: "+this.e+", f: "+this.f+"})",bindings:{"lively.graphics/geometry-2d.js":["Transform"]}}};
$jscomp.global.Object.defineProperties(qj.prototype,{exp:{configurable:!0,enumerable:!0,get:function(){return 1E-4}},isTransform:{configurable:!0,enumerable:!0,get:function(){return!0}}});md.Transform=qj;var yl=function(g,d){this.start=g;this.end=d};yl.fromCoords=function(g,d,k,e){return new md.Line(md.pt(g,d),md.pt(k,e))};yl.prototype.withStart=function(g){return new md.Line(g,this.end)};yl.prototype.withEnd=function(g){return new md.Line(this.start,g)};yl.prototype.sampleN=function(g){g=g||10;for(var d=
this.end.subPt(this.start).scaleBy(1/g),k=[],e=0;e<=g;e++)k.push(this.start.addPt(d.scaleBy(e)));return k};yl.prototype.sample=function(g){return this.sampleN(this.length()/g)};yl.prototype.length=function(){return this.start.dist(this.end)};yl.prototype.equals=function(g){return g?this.start.eqPt(g.start)&&this.end.eqPt(g.end):!1};yl.prototype.distanceFromLine=function(g){var d=this.start.x,k=this.start.y,e=this.end.x,h=this.end.y;return Math.abs((h-k)*g.x-(e-d)*g.y+e*k-h*d)/Math.sqrt(Math.pow(h-
k,2)+Math.pow(e-d,2))};yl.prototype.includesPoint=function(g,d){var k=this.start.x,e=this.start.y,h=this.end.x,n=this.end.y,b=g.x;g=g.y;var c=0===(h-k)*(g-e)-(b-k)*(n-e);if(d||!c)return c;d=Math.min(e,n);c=Math.max(k,h);e=Math.max(e,n);return Math.min(k,h)<=b&&b<=c&&d<=g&&g<=e};yl.prototype.intersection=function(g,d){var k=this.start,e=this.end,h=g.start,n=g.end;g=k.x;k=k.y;var b=e.x;e=e.y;var c=h.x;h=h.y;var l=n.x;n=n.y;var a=((g*e-k*b)*(c-l)-(g-b)*(c*n-h*l))/((g-b)*(h-n)-(k-e)*(c-l)),f=((g*e-k*
b)*(h-n)-(k-e)*(c*n-h*l))/((g-b)*(h-n)-(k-e)*(c-l));return Infinity!==a&&Infinity!==f&&(d||md.num.between(a,g,b,1E-4)&&md.num.between(f,k,e,1E-4)&&md.num.between(a,c,l,1E-4)&&md.num.between(f,h,n,1E-4))?md.pt(a,f):null};yl.prototype.perpendicularLine=function(g,d,k){g=void 0===g?0:g;d=void 0===d?1:d;k=void 0===k?"cc":k;var e=this.start,h=this.toVector();g=e.addPt(h.scaleBy(g));k=h.theta()+("cc"===k?-1:1)*Math.PI/2;return new md.Line(g,g.addPt(md.Point.polar(d,k)))};yl.prototype.toVector=function(){return this.end.subPt(this.start)};
yl.prototype.toString=function(){return md.string.format("Line((%s,%s), (%s,%s))",this.start.x,this.start.y,this.end.x,this.end.y)};yl.prototype.__serialize__=function(){return{__expr__:"Line.fromCoords("+this.start.x+", "+this.start.y+", "+this.end.x+", "+this.end.y+")",bindings:{"lively.graphics/geometry-2d.js":["Line"]}}};$jscomp.global.Object.defineProperties(yl.prototype,{isLine:{configurable:!0,enumerable:!0,get:function(){return!0}}});md.Line=yl;md.rect=Gk;md.rect=Gk;md.pt=fh;md.pt=fh;var uba=
Object.freeze({__proto__:null,Point:Bf,Rectangle:Pd,Transform:qj,Line:yl,rect:Gk,pt:fh}),X_=lively.FreezerRuntime.recorderFor("lively.ast/generated/estree-visitor.js"),Kd=function(){};Kd.prototype.accept=function(g,d,k){if(!g)throw Error("Undefined AST node in Visitor.accept:\n  "+k.join(".")+"\n  "+g);if(!g.type)throw Error("Strangee AST node without type in Visitor.accept:\n  "+k.join(".")+"\n  "+JSON.stringify(g));switch(g.type){case "Node":return this.visitNode(g,d,k);case "SourceLocation":return this.visitSourceLocation(g,
d,k);case "Position":return this.visitPosition(g,d,k);case "Program":return this.visitProgram(g,d,k);case "Function":return this.visitFunction(g,d,k);case "Statement":return this.visitStatement(g,d,k);case "Directive":return this.visitDirective(g,d,k);case "SwitchCase":return this.visitSwitchCase(g,d,k);case "CatchClause":return this.visitCatchClause(g,d,k);case "VariableDeclarator":return this.visitVariableDeclarator(g,d,k);case "Expression":return this.visitExpression(g,d,k);case "Property":return this.visitProperty(g,
d,k);case "Pattern":return this.visitPattern(g,d,k);case "Super":return this.visitSuper(g,d,k);case "SpreadElement":return this.visitSpreadElement(g,d,k);case "TemplateElement":return this.visitTemplateElement(g,d,k);case "Class":return this.visitClass(g,d,k);case "ClassBody":return this.visitClassBody(g,d,k);case "MethodDefinition":return this.visitMethodDefinition(g,d,k);case "ModuleDeclaration":return this.visitModuleDeclaration(g,d,k);case "ModuleSpecifier":return this.visitModuleSpecifier(g,
d,k);case "JSXEmptyExpression":return this.visitJSXEmptyExpression(g,d,k);case "JSXExpressionContainer":return this.visitJSXExpressionContainer(g,d,k);case "JSXSpreadChild":return this.visitJSXSpreadChild(g,d,k);case "JSXBoundaryElement":return this.visitJSXBoundaryElement(g,d,k);case "JSXAttribute":return this.visitJSXAttribute(g,d,k);case "JSXText":return this.visitJSXText(g,d,k);case "JSXOpeningFragment":return this.visitJSXOpeningFragment(g,d,k);case "JSXClosingFragment":return this.visitJSXClosingFragment(g,
d,k);case "Identifier":return this.visitIdentifier(g,d,k);case "Literal":return this.visitLiteral(g,d,k);case "ExpressionStatement":return this.visitExpressionStatement(g,d,k);case "BlockStatement":return this.visitBlockStatement(g,d,k);case "EmptyStatement":return this.visitEmptyStatement(g,d,k);case "DebuggerStatement":return this.visitDebuggerStatement(g,d,k);case "WithStatement":return this.visitWithStatement(g,d,k);case "ReturnStatement":return this.visitReturnStatement(g,d,k);case "LabeledStatement":return this.visitLabeledStatement(g,
d,k);case "BreakStatement":return this.visitBreakStatement(g,d,k);case "ContinueStatement":return this.visitContinueStatement(g,d,k);case "IfStatement":return this.visitIfStatement(g,d,k);case "SwitchStatement":return this.visitSwitchStatement(g,d,k);case "ThrowStatement":return this.visitThrowStatement(g,d,k);case "TryStatement":return this.visitTryStatement(g,d,k);case "WhileStatement":return this.visitWhileStatement(g,d,k);case "DoWhileStatement":return this.visitDoWhileStatement(g,d,k);case "ForStatement":return this.visitForStatement(g,
d,k);case "ForInStatement":return this.visitForInStatement(g,d,k);case "Declaration":return this.visitDeclaration(g,d,k);case "ThisExpression":return this.visitThisExpression(g,d,k);case "ArrayExpression":return this.visitArrayExpression(g,d,k);case "ObjectExpression":return this.visitObjectExpression(g,d,k);case "FunctionExpression":return this.visitFunctionExpression(g,d,k);case "UnaryExpression":return this.visitUnaryExpression(g,d,k);case "UpdateExpression":return this.visitUpdateExpression(g,
d,k);case "BinaryExpression":return this.visitBinaryExpression(g,d,k);case "AssignmentExpression":return this.visitAssignmentExpression(g,d,k);case "LogicalExpression":return this.visitLogicalExpression(g,d,k);case "MemberExpression":return this.visitMemberExpression(g,d,k);case "ConditionalExpression":return this.visitConditionalExpression(g,d,k);case "CallExpression":return this.visitCallExpression(g,d,k);case "NewExpression":return this.visitNewExpression(g,d,k);case "SequenceExpression":return this.visitSequenceExpression(g,
d,k);case "ArrowFunctionExpression":return this.visitArrowFunctionExpression(g,d,k);case "YieldExpression":return this.visitYieldExpression(g,d,k);case "TemplateLiteral":return this.visitTemplateLiteral(g,d,k);case "TaggedTemplateExpression":return this.visitTaggedTemplateExpression(g,d,k);case "AssignmentProperty":return this.visitAssignmentProperty(g,d,k);case "ObjectPattern":return this.visitObjectPattern(g,d,k);case "ArrayPattern":return this.visitArrayPattern(g,d,k);case "RestElement":return this.visitRestElement(g,
d,k);case "AssignmentPattern":return this.visitAssignmentPattern(g,d,k);case "ClassExpression":return this.visitClassExpression(g,d,k);case "MetaProperty":return this.visitMetaProperty(g,d,k);case "ImportDeclaration":return this.visitImportDeclaration(g,d,k);case "ImportSpecifier":return this.visitImportSpecifier(g,d,k);case "ImportDefaultSpecifier":return this.visitImportDefaultSpecifier(g,d,k);case "ImportNamespaceSpecifier":return this.visitImportNamespaceSpecifier(g,d,k);case "ExportNamedDeclaration":return this.visitExportNamedDeclaration(g,
d,k);case "ExportSpecifier":return this.visitExportSpecifier(g,d,k);case "AnonymousDefaultExportedFunctionDeclaration":return this.visitAnonymousDefaultExportedFunctionDeclaration(g,d,k);case "AnonymousDefaultExportedClassDeclaration":return this.visitAnonymousDefaultExportedClassDeclaration(g,d,k);case "ExportDefaultDeclaration":return this.visitExportDefaultDeclaration(g,d,k);case "ExportAllDeclaration":return this.visitExportAllDeclaration(g,d,k);case "AwaitExpression":return this.visitAwaitExpression(g,
d,k);case "JSXMemberExpression":return this.visitJSXMemberExpression(g,d,k);case "JSXNamespacedName":return this.visitJSXNamespacedName(g,d,k);case "JSXOpeningElement":return this.visitJSXOpeningElement(g,d,k);case "JSXClosingElement":return this.visitJSXClosingElement(g,d,k);case "JSXSpreadAttribute":return this.visitJSXSpreadAttribute(g,d,k);case "JSXElement":return this.visitJSXElement(g,d,k);case "JSXFragment":return this.visitJSXFragment(g,d,k);case "ImportExpression":return this.visitImportExpression(g,
d,k);case "RegExpLiteral":return this.visitRegExpLiteral(g,d,k);case "FunctionBody":return this.visitFunctionBody(g,d,k);case "FunctionDeclaration":return this.visitFunctionDeclaration(g,d,k);case "VariableDeclaration":return this.visitVariableDeclaration(g,d,k);case "ForOfStatement":return this.visitForOfStatement(g,d,k);case "ClassDeclaration":return this.visitClassDeclaration(g,d,k);case "JSXIdentifier":return this.visitJSXIdentifier(g,d,k);case "BigIntLiteral":return this.visitBigIntLiteral(g,
d,k)}throw Error("No visit function in AST visitor Visitor for:\n  "+k.join(".")+"\n  "+JSON.stringify(g));};Kd.prototype.visitNode=function(g,d,k){return g};Kd.prototype.visitSourceLocation=function(g,d,k){g.start=this.accept(g.start,d,k.concat(["start"]));g.end=this.accept(g.end,d,k.concat(["end"]));return g};Kd.prototype.visitPosition=function(g,d,k){return g};Kd.prototype.visitProgram=function(g,d,k){for(var e=[],h=0;h<g.body.length;h++){var n=g.body[h];n=n?this.accept(n,d,k.concat(["body",h])):
n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.body=e;return g};Kd.prototype.visitFunction=function(g,d,k){g.id&&(g.id=this.accept(g.id,d,k.concat(["id"])));for(var e=[],h=0;h<g.params.length;h++){var n=g.params[h];n=n?this.accept(n,d,k.concat(["params",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.params=e;g.body=this.accept(g.body,d,k.concat(["body"]));return g};Kd.prototype.visitStatement=function(g,d,k){return g};Kd.prototype.visitDirective=function(g,d,k){g.expression=this.accept(g.expression,
d,k.concat(["expression"]));return g};Kd.prototype.visitSwitchCase=function(g,d,k){g.test&&(g.test=this.accept(g.test,d,k.concat(["test"])));for(var e=[],h=0;h<g.consequent.length;h++){var n=g.consequent[h];n=n?this.accept(n,d,k.concat(["consequent",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.consequent=e;return g};Kd.prototype.visitCatchClause=function(g,d,k){g.param&&(g.param=this.accept(g.param,d,k.concat(["param"])));g.body=this.accept(g.body,d,k.concat(["body"]));return g};Kd.prototype.visitVariableDeclarator=
function(g,d,k){g.id=this.accept(g.id,d,k.concat(["id"]));g.init&&(g.init=this.accept(g.init,d,k.concat(["init"])));return g};Kd.prototype.visitExpression=function(g,d,k){return g};Kd.prototype.visitProperty=function(g,d,k){g.key=this.accept(g.key,d,k.concat(["key"]));g.value=this.accept(g.value,d,k.concat(["value"]));return g};Kd.prototype.visitPattern=function(g,d,k){return g};Kd.prototype.visitSuper=function(g,d,k){return g};Kd.prototype.visitSpreadElement=function(g,d,k){g.argument=this.accept(g.argument,
d,k.concat(["argument"]));return g};Kd.prototype.visitTemplateElement=function(g,d,k){return g};Kd.prototype.visitClass=function(g,d,k){g.id&&(g.id=this.accept(g.id,d,k.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,d,k.concat(["superClass"])));g.body=this.accept(g.body,d,k.concat(["body"]));return g};Kd.prototype.visitClassBody=function(g,d,k){for(var e=[],h=0;h<g.body.length;h++){var n=g.body[h];n=n?this.accept(n,d,k.concat(["body",h])):n;Array.isArray(n)?e.push.apply(e,n):
e.push(n)}g.body=e;return g};Kd.prototype.visitMethodDefinition=function(g,d,k){g.key=this.accept(g.key,d,k.concat(["key"]));g.value=this.accept(g.value,d,k.concat(["value"]));return g};Kd.prototype.visitModuleDeclaration=function(g,d,k){return g};Kd.prototype.visitModuleSpecifier=function(g,d,k){g.local=this.accept(g.local,d,k.concat(["local"]));return g};Kd.prototype.visitJSXEmptyExpression=function(g,d,k){return g};Kd.prototype.visitJSXExpressionContainer=function(g,d,k){g.expression=this.accept(g.expression,
d,k.concat(["expression"]));return g};Kd.prototype.visitJSXSpreadChild=function(g,d,k){g.expression=this.accept(g.expression,d,k.concat(["expression"]));return g};Kd.prototype.visitJSXBoundaryElement=function(g,d,k){g.name=this.accept(g.name,d,k.concat(["name"]));return g};Kd.prototype.visitJSXAttribute=function(g,d,k){g.name=this.accept(g.name,d,k.concat(["name"]));g.value&&(g.value=this.accept(g.value,d,k.concat(["value"])));return g};Kd.prototype.visitJSXText=function(g,d,k){return g};Kd.prototype.visitJSXOpeningFragment=
function(g,d,k){return g};Kd.prototype.visitJSXClosingFragment=function(g,d,k){return g};Kd.prototype.visitIdentifier=function(g,d,k){return g};Kd.prototype.visitLiteral=function(g,d,k){return g};Kd.prototype.visitExpressionStatement=function(g,d,k){g.expression=this.accept(g.expression,d,k.concat(["expression"]));return g};Kd.prototype.visitBlockStatement=function(g,d,k){for(var e=[],h=0;h<g.body.length;h++){var n=g.body[h];n=n?this.accept(n,d,k.concat(["body",h])):n;Array.isArray(n)?e.push.apply(e,
n):e.push(n)}g.body=e;return g};Kd.prototype.visitEmptyStatement=function(g,d,k){return g};Kd.prototype.visitDebuggerStatement=function(g,d,k){return g};Kd.prototype.visitWithStatement=function(g,d,k){g.object=this.accept(g.object,d,k.concat(["object"]));g.body=this.accept(g.body,d,k.concat(["body"]));return g};Kd.prototype.visitReturnStatement=function(g,d,k){g.argument&&(g.argument=this.accept(g.argument,d,k.concat(["argument"])));return g};Kd.prototype.visitLabeledStatement=function(g,d,k){g.label=
this.accept(g.label,d,k.concat(["label"]));g.body=this.accept(g.body,d,k.concat(["body"]));return g};Kd.prototype.visitBreakStatement=function(g,d,k){g.label&&(g.label=this.accept(g.label,d,k.concat(["label"])));return g};Kd.prototype.visitContinueStatement=function(g,d,k){g.label&&(g.label=this.accept(g.label,d,k.concat(["label"])));return g};Kd.prototype.visitIfStatement=function(g,d,k){g.test=this.accept(g.test,d,k.concat(["test"]));g.consequent=this.accept(g.consequent,d,k.concat(["consequent"]));
g.alternate&&(g.alternate=this.accept(g.alternate,d,k.concat(["alternate"])));return g};Kd.prototype.visitSwitchStatement=function(g,d,k){g.discriminant=this.accept(g.discriminant,d,k.concat(["discriminant"]));for(var e=[],h=0;h<g.cases.length;h++){var n=g.cases[h];n=n?this.accept(n,d,k.concat(["cases",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.cases=e;return g};Kd.prototype.visitThrowStatement=function(g,d,k){g.argument=this.accept(g.argument,d,k.concat(["argument"]));return g};Kd.prototype.visitTryStatement=
function(g,d,k){g.block=this.accept(g.block,d,k.concat(["block"]));g.handler&&(g.handler=this.accept(g.handler,d,k.concat(["handler"])));g.finalizer&&(g.finalizer=this.accept(g.finalizer,d,k.concat(["finalizer"])));return g};Kd.prototype.visitWhileStatement=function(g,d,k){g.test=this.accept(g.test,d,k.concat(["test"]));g.body=this.accept(g.body,d,k.concat(["body"]));return g};Kd.prototype.visitDoWhileStatement=function(g,d,k){g.body=this.accept(g.body,d,k.concat(["body"]));g.test=this.accept(g.test,
d,k.concat(["test"]));return g};Kd.prototype.visitForStatement=function(g,d,k){g.init&&(g.init=this.accept(g.init,d,k.concat(["init"])));g.test&&(g.test=this.accept(g.test,d,k.concat(["test"])));g.update&&(g.update=this.accept(g.update,d,k.concat(["update"])));g.body=this.accept(g.body,d,k.concat(["body"]));return g};Kd.prototype.visitForInStatement=function(g,d,k){g.left=this.accept(g.left,d,k.concat(["left"]));g.right=this.accept(g.right,d,k.concat(["right"]));g.body=this.accept(g.body,d,k.concat(["body"]));
return g};Kd.prototype.visitDeclaration=function(g,d,k){return g};Kd.prototype.visitThisExpression=function(g,d,k){return g};Kd.prototype.visitArrayExpression=function(g,d,k){if(g.elements){for(var e=[],h=0;h<g.elements.length;h++){var n=g.elements[h];n=n?this.accept(n,d,k.concat(["elements",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.elements=e}return g};Kd.prototype.visitObjectExpression=function(g,d,k){for(var e=[],h=0;h<g.properties.length;h++){var n=g.properties[h];n=n?this.accept(n,
d,k.concat(["properties",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.properties=e;return g};Kd.prototype.visitFunctionExpression=function(g,d,k){g.id&&(g.id=this.accept(g.id,d,k.concat(["id"])));for(var e=[],h=0;h<g.params.length;h++){var n=g.params[h];n=n?this.accept(n,d,k.concat(["params",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.params=e;g.body=this.accept(g.body,d,k.concat(["body"]));return g};Kd.prototype.visitUnaryExpression=function(g,d,k){g.argument=this.accept(g.argument,
d,k.concat(["argument"]));return g};Kd.prototype.visitUpdateExpression=function(g,d,k){g.argument=this.accept(g.argument,d,k.concat(["argument"]));return g};Kd.prototype.visitBinaryExpression=function(g,d,k){g.left=this.accept(g.left,d,k.concat(["left"]));g.right=this.accept(g.right,d,k.concat(["right"]));return g};Kd.prototype.visitAssignmentExpression=function(g,d,k){g.left=this.accept(g.left,d,k.concat(["left"]));g.right=this.accept(g.right,d,k.concat(["right"]));return g};Kd.prototype.visitLogicalExpression=
function(g,d,k){g.left=this.accept(g.left,d,k.concat(["left"]));g.right=this.accept(g.right,d,k.concat(["right"]));return g};Kd.prototype.visitMemberExpression=function(g,d,k){g.object=this.accept(g.object,d,k.concat(["object"]));g.property=this.accept(g.property,d,k.concat(["property"]));return g};Kd.prototype.visitConditionalExpression=function(g,d,k){g.test=this.accept(g.test,d,k.concat(["test"]));g.alternate=this.accept(g.alternate,d,k.concat(["alternate"]));g.consequent=this.accept(g.consequent,
d,k.concat(["consequent"]));return g};Kd.prototype.visitCallExpression=function(g,d,k){g.callee=this.accept(g.callee,d,k.concat(["callee"]));for(var e=[],h=0;h<g.arguments.length;h++){var n=g.arguments[h];n=n?this.accept(n,d,k.concat(["arguments",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.arguments=e;return g};Kd.prototype.visitNewExpression=function(g,d,k){g.callee=this.accept(g.callee,d,k.concat(["callee"]));for(var e=[],h=0;h<g.arguments.length;h++){var n=g.arguments[h];n=n?this.accept(n,
d,k.concat(["arguments",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.arguments=e;return g};Kd.prototype.visitSequenceExpression=function(g,d,k){for(var e=[],h=0;h<g.expressions.length;h++){var n=g.expressions[h];n=n?this.accept(n,d,k.concat(["expressions",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.expressions=e;return g};Kd.prototype.visitArrowFunctionExpression=function(g,d,k){g.body=this.accept(g.body,d,k.concat(["body"]));g.id&&(g.id=this.accept(g.id,d,k.concat(["id"])));for(var e=
[],h=0;h<g.params.length;h++){var n=g.params[h];n=n?this.accept(n,d,k.concat(["params",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.params=e;return g};Kd.prototype.visitYieldExpression=function(g,d,k){g.argument&&(g.argument=this.accept(g.argument,d,k.concat(["argument"])));return g};Kd.prototype.visitTemplateLiteral=function(g,d,k){for(var e=[],h=0;h<g.quasis.length;h++){var n=g.quasis[h];n=n?this.accept(n,d,k.concat(["quasis",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.quasis=
e;e=[];for(h=0;h<g.expressions.length;h++)n=(n=g.expressions[h])?this.accept(n,d,k.concat(["expressions",h])):n,Array.isArray(n)?e.push.apply(e,n):e.push(n);g.expressions=e;return g};Kd.prototype.visitTaggedTemplateExpression=function(g,d,k){g.tag=this.accept(g.tag,d,k.concat(["tag"]));g.quasi=this.accept(g.quasi,d,k.concat(["quasi"]));return g};Kd.prototype.visitAssignmentProperty=function(g,d,k){g.value=this.accept(g.value,d,k.concat(["value"]));g.key=this.accept(g.key,d,k.concat(["key"]));return g};
Kd.prototype.visitObjectPattern=function(g,d,k){for(var e=[],h=0;h<g.properties.length;h++){var n=g.properties[h];n=n?this.accept(n,d,k.concat(["properties",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.properties=e;return g};Kd.prototype.visitArrayPattern=function(g,d,k){if(g.elements){for(var e=[],h=0;h<g.elements.length;h++){var n=g.elements[h];n=n?this.accept(n,d,k.concat(["elements",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.elements=e}return g};Kd.prototype.visitRestElement=
function(g,d,k){g.argument=this.accept(g.argument,d,k.concat(["argument"]));return g};Kd.prototype.visitAssignmentPattern=function(g,d,k){g.left=this.accept(g.left,d,k.concat(["left"]));g.right=this.accept(g.right,d,k.concat(["right"]));return g};Kd.prototype.visitClassExpression=function(g,d,k){g.id&&(g.id=this.accept(g.id,d,k.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,d,k.concat(["superClass"])));g.body=this.accept(g.body,d,k.concat(["body"]));return g};Kd.prototype.visitMetaProperty=
function(g,d,k){g.meta=this.accept(g.meta,d,k.concat(["meta"]));g.property=this.accept(g.property,d,k.concat(["property"]));return g};Kd.prototype.visitImportDeclaration=function(g,d,k){for(var e=[],h=0;h<g.specifiers.length;h++){var n=g.specifiers[h];n=n?this.accept(n,d,k.concat(["specifiers",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.specifiers=e;g.source=this.accept(g.source,d,k.concat(["source"]));return g};Kd.prototype.visitImportSpecifier=function(g,d,k){g.imported=this.accept(g.imported,
d,k.concat(["imported"]));g.local=this.accept(g.local,d,k.concat(["local"]));return g};Kd.prototype.visitImportDefaultSpecifier=function(g,d,k){g.local=this.accept(g.local,d,k.concat(["local"]));return g};Kd.prototype.visitImportNamespaceSpecifier=function(g,d,k){g.local=this.accept(g.local,d,k.concat(["local"]));return g};Kd.prototype.visitExportNamedDeclaration=function(g,d,k){g.declaration&&(g.declaration=this.accept(g.declaration,d,k.concat(["declaration"])));for(var e=[],h=0;h<g.specifiers.length;h++){var n=
g.specifiers[h];n=n?this.accept(n,d,k.concat(["specifiers",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.specifiers=e;g.source&&(g.source=this.accept(g.source,d,k.concat(["source"])));return g};Kd.prototype.visitExportSpecifier=function(g,d,k){g.exported=this.accept(g.exported,d,k.concat(["exported"]));g.local=this.accept(g.local,d,k.concat(["local"]));return g};Kd.prototype.visitAnonymousDefaultExportedFunctionDeclaration=function(g,d,k){g.id&&(g.id=this.accept(g.id,d,k.concat(["id"])));
for(var e=[],h=0;h<g.params.length;h++){var n=g.params[h];n=n?this.accept(n,d,k.concat(["params",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.params=e;g.body=this.accept(g.body,d,k.concat(["body"]));return g};Kd.prototype.visitAnonymousDefaultExportedClassDeclaration=function(g,d,k){g.id&&(g.id=this.accept(g.id,d,k.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,d,k.concat(["superClass"])));g.body=this.accept(g.body,d,k.concat(["body"]));return g};Kd.prototype.visitExportDefaultDeclaration=
function(g,d,k){g.declaration=this.accept(g.declaration,d,k.concat(["declaration"]));return g};Kd.prototype.visitExportAllDeclaration=function(g,d,k){g.source=this.accept(g.source,d,k.concat(["source"]));return g};Kd.prototype.visitAwaitExpression=function(g,d,k){g.argument=this.accept(g.argument,d,k.concat(["argument"]));return g};Kd.prototype.visitJSXMemberExpression=function(g,d,k){g.object=this.accept(g.object,d,k.concat(["object"]));g.property=this.accept(g.property,d,k.concat(["property"]));
return g};Kd.prototype.visitJSXNamespacedName=function(g,d,k){g.namespace=this.accept(g.namespace,d,k.concat(["namespace"]));g.name=this.accept(g.name,d,k.concat(["name"]));return g};Kd.prototype.visitJSXOpeningElement=function(g,d,k){for(var e=[],h=0;h<g.attributes.length;h++){var n=g.attributes[h];n=n?this.accept(n,d,k.concat(["attributes",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.attributes=e;g.name=this.accept(g.name,d,k.concat(["name"]));return g};Kd.prototype.visitJSXClosingElement=
function(g,d,k){g.name=this.accept(g.name,d,k.concat(["name"]));return g};Kd.prototype.visitJSXSpreadAttribute=function(g,d,k){g.argument=this.accept(g.argument,d,k.concat(["argument"]));return g};Kd.prototype.visitJSXElement=function(g,d,k){g.openingElement=this.accept(g.openingElement,d,k.concat(["openingElement"]));for(var e=[],h=0;h<g.children.length;h++){var n=g.children[h];n=n?this.accept(n,d,k.concat(["children",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.children=e;g.closingElement&&
(g.closingElement=this.accept(g.closingElement,d,k.concat(["closingElement"])));return g};Kd.prototype.visitJSXFragment=function(g,d,k){g.openingFragment=this.accept(g.openingFragment,d,k.concat(["openingFragment"]));for(var e=[],h=0;h<g.children.length;h++){var n=g.children[h];n=n?this.accept(n,d,k.concat(["children",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.children=e;g.closingFragment=this.accept(g.closingFragment,d,k.concat(["closingFragment"]));return g};Kd.prototype.visitImportExpression=
function(g,d,k){g.source=this.accept(g.source,d,k.concat(["source"]));return g};Kd.prototype.visitRegExpLiteral=function(g,d,k){return g};Kd.prototype.visitFunctionBody=function(g,d,k){for(var e=[],h=0;h<g.body.length;h++){var n=g.body[h];n=n?this.accept(n,d,k.concat(["body",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.body=e;return g};Kd.prototype.visitFunctionDeclaration=function(g,d,k){g.id=this.accept(g.id,d,k.concat(["id"]));for(var e=[],h=0;h<g.params.length;h++){var n=g.params[h];
n=n?this.accept(n,d,k.concat(["params",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.params=e;g.body=this.accept(g.body,d,k.concat(["body"]));return g};Kd.prototype.visitVariableDeclaration=function(g,d,k){for(var e=[],h=0;h<g.declarations.length;h++){var n=g.declarations[h];n=n?this.accept(n,d,k.concat(["declarations",h])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}g.declarations=e;return g};Kd.prototype.visitForOfStatement=function(g,d,k){g.left=this.accept(g.left,d,k.concat(["left"]));
g.right=this.accept(g.right,d,k.concat(["right"]));g.body=this.accept(g.body,d,k.concat(["body"]));return g};Kd.prototype.visitClassDeclaration=function(g,d,k){g.id=this.accept(g.id,d,k.concat(["id"]));g.superClass&&(g.superClass=this.accept(g.superClass,d,k.concat(["superClass"])));g.body=this.accept(g.body,d,k.concat(["body"]));return g};Kd.prototype.visitJSXIdentifier=function(g,d,k){return g};Kd.prototype.visitBigIntLiteral=function(g,d,k){return g};ya("bD",Kd);X_.Visitor=Kd;X_.default=Kd;var Lg=
lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitors.js");Lg.obj=lf;Lg.Path=Xg;Lg.Visitor=Kd;var eB=function(){return Lg.Visitor.apply(this,arguments)||this};$jscomp.inherits(eB,Lg.Visitor);eB.prototype.accept=function(g,d,k){var e=k.map(function(n){return"string"===typeof n?"."+n:"["+n+"]"}).join(""),h=[];k=Lg.Visitor.prototype.accept.call(this,g,{index:d.index,tree:h},k);d.tree.push({node:g,path:e,index:d.index++,children:h});return k};Lg.PrinterVisitor=eB;var xj=function(){return Lg.Visitor.apply(this,
arguments)||this};$jscomp.inherits(xj,Lg.Visitor);xj.prototype.recordNotEqual=function(g,d,k,e){k.comparisons.errors.push({node1:g,node2:d,path:k.completePath,msg:e})};xj.prototype.compareType=function(g,d,k){return this.compareField("type",g,d,k)};xj.prototype.compareField=function(g,d,k,e){k=Lg.Path(e.completePath.join(".")).get(k);if(d&&k&&d[g]===k[g]||d&&"*"===d[g]||k&&"*"===k[g])return!0;var h=e.completePath.join(".")+"."+g;this.recordNotEqual(d,k,e,d?k?h+" is not equal: "+d[g]+" vs. "+k[g]:
"node2 not defined but node1 ("+h+") is: "+d[g]:"node1 on "+h+" not defined");return!1};xj.prototype.accept=function(g,d,k,e){var h=Lg.Path(e.join(".")).get(d);if("*"!==g&&"*"!==h&&(k={completePath:e,comparisons:k.comparisons},this.compareType(g,d,k)))this["visit"+g.type](g,d,k,e)};xj.prototype.visitFunction=function(g,d,k,e){g.generator&&this.compareField("generator",g,d,k);g.expression&&this.compareField("expression",g,d,k);return Lg.Visitor.prototype.visitFunction.call(this,g,d,k,e)};xj.prototype.visitSwitchStatement=
function(g,d,k,e){g.lexical&&this.compareField("lexical",g,d,k);return Lg.Visitor.prototype.visitSwitchStatement.call(this,g,d,k,e)};xj.prototype.visitForInStatement=function(g,d,k,e){g.each&&this.compareField("each",g,d,k);return Lg.Visitor.prototype.visitForInStatement.call(this,g,d,k,e)};xj.prototype.visitFunctionDeclaration=function(g,d,k,e){g.generator&&this.compareField("generator",g,d,k);g.expression&&this.compareField("expression",g,d,k);return Lg.Visitor.prototype.visitFunctionDeclaration.call(this,
g,d,k,e)};xj.prototype.visitVariableDeclaration=function(g,d,k,e){this.compareField("kind",g,d,k);return Lg.Visitor.prototype.visitVariableDeclaration.call(this,g,d,k,e)};xj.prototype.visitUnaryExpression=function(g,d,k,e){this.compareField("operator",g,d,k);g.prefix&&this.compareField("prefix",g,d,k);return Lg.Visitor.prototype.visitUnaryExpression.call(this,g,d,k,e)};xj.prototype.visitBinaryExpression=function(g,d,k,e){this.compareField("operator",g,d,k);return Lg.Visitor.prototype.visitBinaryExpression.call(this,
g,d,k,e)};xj.prototype.visitAssignmentExpression=function(g,d,k,e){this.compareField("operator",g,d,k);return Lg.Visitor.prototype.visitAssignmentExpression.call(this,g,d,k,e)};xj.prototype.visitUpdateExpression=function(g,d,k,e){this.compareField("operator",g,d,k);g.prefix&&this.compareField("prefix",g,d,k);return Lg.Visitor.prototype.visitUpdateExpression.call(this,g,d,k,e)};xj.prototype.visitLogicalExpression=function(g,d,k,e){this.compareField("operator",g,d,k);return Lg.Visitor.prototype.visitLogicalExpression.call(this,
g,d,k,e)};xj.prototype.visitMemberExpression=function(g,d,k,e){g.computed&&this.compareField("computed",g,d,k);return Lg.Visitor.prototype.visitMemberExpression.call(this,g,d,k,e)};xj.prototype.visitComprehensionBlock=function(g,d,k,e){g.each&&this.compareField("each",g,d,k);return Lg.Visitor.prototype.visitComprehensionBlock.call(this,g,d,k,e)};xj.prototype.visitIdentifier=function(g,d,k,e){this.compareField("name",g,d,k);return Lg.Visitor.prototype.visitIdentifier.call(this,g,d,k,e)};xj.prototype.visitLiteral=
function(g,d,k,e){this.compareField("value",g,d,k);return Lg.Visitor.prototype.visitLiteral.call(this,g,d,k,e)};xj.prototype.visitClassDeclaration=function(g,d,k,e){this.compareField("id",g,d,k);g.superClass&&this.compareField("superClass",g,d,k);this.compareField("body",g,d,k);return Lg.Visitor.prototype.visitClassDeclaration.call(this,g,d,k,e)};xj.prototype.visitClassBody=function(g,d,k,e){this.compareField("body",g,d,k);return Lg.Visitor.prototype.visitClassBody.call(this,g,d,k,e)};xj.prototype.visitMethodDefinition=
function(g,d,k,e){this.compareField("static",g,d,k);this.compareField("computed",g,d,k);this.compareField("kind",g,d,k);this.compareField("key",g,d,k);this.compareField("value",g,d,k);return Lg.Visitor.prototype.visitMethodDefinition.call(this,g,d,k,e)};Lg.ComparisonVisitor=xj;var Hi=function(){return Lg.Visitor.apply(this,arguments)||this};$jscomp.inherits(Hi,Lg.Visitor);Hi.prototype.newScope=function(g,d){g={node:g,varDecls:[],varDeclPaths:[],funcDecls:[],funcDeclPaths:[],classDecls:[],classDeclPaths:[],
classExprs:[],classExprPaths:[],methodDecls:[],methodDeclPaths:[],importSpecifiers:[],importSpecifierPaths:[],exportDecls:[],exportDeclPaths:[],refs:[],thisRefs:[],params:[],catches:[],subScopes:[],resolvedRefMap:new Map};d&&d.subScopes.push(g);return g};Hi.prototype.visitVariableDeclaration=function(g,d,k){d.varDecls.push(g);d.varDeclPaths.push(k);return Lg.Visitor.prototype.visitVariableDeclaration.call(this,g,d,k)};Hi.prototype.visitVariableDeclarator=function(g,d,k){g.init&&(g.init=this.accept(g.init,
d,k.concat(["init"])));return g};Hi.prototype.visitFunction=function(g,d,k){var e=this,h=this.newScope(g,d);g.params.forEach(function(n,b){"AssignmentPattern"===n.type&&e.accept(n.right,h,k.concat("params",b,"right"))});h.params=Array.prototype.slice.call(g.params);return h};Hi.prototype.visitFunctionDeclaration=function(g,d,k){var e=this.visitFunction(g,d,k);d.funcDecls.push(g);d.funcDeclPaths.push(k);var h=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,b,c){b=h.accept(b,e,k.concat(["defaults",
c]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));g.rest&&(g.rest=h.accept(g.rest,e,k.concat(["rest"])));g.body=h.accept(g.body,e,k.concat(["body"]));g.loc&&(g.loc=h.accept(g.loc,e,k.concat(["loc"])));return g};Hi.prototype.visitFunctionExpression=function(g,d,k){var e=this.visitFunction(g,d,k),h=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,b,c){b=h.accept(b,e,k.concat(["defaults",c]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));g.rest&&(g.rest=h.accept(g.rest,
e,k.concat(["rest"])));g.body=h.accept(g.body,e,k.concat(["body"]));g.loc&&(g.loc=h.accept(g.loc,e,k.concat(["loc"])));return g};Hi.prototype.visitArrowFunctionExpression=function(g,d,k){var e=this.visitFunction(g,d,k),h=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,b,c){b=h.accept(b,e,k.concat(["defaults",c]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));g.rest&&(g.rest=h.accept(g.rest,e,k.concat(["rest"])));g.body=h.accept(g.body,e,k.concat(["body"]));g.loc&&(g.loc=h.accept(g.loc,
e,k.concat(["loc"])));return g};Hi.prototype.visitIdentifier=function(g,d,k){d.refs.push(g);return Lg.Visitor.prototype.visitIdentifier.call(this,g,d,k)};Hi.prototype.visitMemberExpression=function(g,d,k){g.object=this.accept(g.object,d,k.concat(["object"]));g.computed&&(g.property=this.accept(g.property,d,k.concat(["property"])));return g};Hi.prototype.visitProperty=function(g,d,k){g.computed&&(g.key=this.accept(g.key,d,k.concat(["key"])));g.value=this.accept(g.value,d,k.concat(["value"]));return g};
Hi.prototype.visitThisExpression=function(g,d,k){d.thisRefs.push(g);return Lg.Visitor.prototype.visitThisExpression.call(this,g,d,k)};Hi.prototype.visitTryStatement=function(g,d,k){g.block=this.accept(g.block,d,k.concat(["block"]));g.handler&&(g.handler=this.accept(g.handler,d,k.concat(["handler"])),d.catches.push(g.handler.param));g.finalizer&&(g.finalizer=this.accept(g.finalizer,d,k.concat(["finalizer"])));return g};Hi.prototype.visitLabeledStatement=function(g,d,k){g.body=this.accept(g.body,d,
k.concat(["body"]));return g};Hi.prototype.visitClassDeclaration=function(g,d,k){d.classDecls.push(g);d.classDeclPaths.push(k);g.superClass&&(g.superClass=this.accept(g.superClass,d,k.concat(["superClass"])));g.body=this.accept(g.body,d,k.concat(["body"]));return g};Hi.prototype.visitClassExpression=function(g,d,k){g.id&&(d.classExprs.push(g),d.classExprPaths.push(k));g.superClass&&(g.superClass=this.accept(g.superClass,d,k.concat(["superClass"])));g.body=this.accept(g.body,d,k.concat(["body"]));
return g};Hi.prototype.visitMethodDefinition=function(g,d,k){g.value=this.accept(g.value,d,k.concat(["value"]));return g};Hi.prototype.visitMetaProperty=function(g,d,k){return g};Hi.prototype.visitBreakStatement=function(g,d,k){return g};Hi.prototype.visitContinueStatement=function(g,d,k){return g};Hi.prototype.visitImportSpecifier=function(g,d,k){d.importSpecifiers.push(g.local);d.importSpecifierPaths.push(k);return g};Hi.prototype.visitImportDefaultSpecifier=function(g,d,k){d.importSpecifiers.push(g.local);
d.importSpecifierPaths.push(k);return g};Hi.prototype.visitImportNamespaceSpecifier=function(g,d,k){d.importSpecifiers.push(g.local);d.importSpecifierPaths.push(k);return g};Hi.prototype.visitExportSpecifier=function(g,d,k){g.local=this.accept(g.local,d,k.concat(["local"]));return g};Hi.prototype.visitExportNamedDeclaration=function(g,d,k){d.exportDecls.push(g);d.exportDeclPaths.push(k);g.source||Lg.Visitor.prototype.visitExportNamedDeclaration.call(this,g,d,k);return g};Hi.prototype.visitExportDefaultDeclaration=
function(g,d,k){d.exportDecls.push(g);d.exportDeclPaths.push(k);return Lg.Visitor.prototype.visitExportDefaultDeclaration.call(this,g,d,k)};Hi.prototype.visitExportAllDeclaration=function(g,d,k){d.exportDecls.push(g);d.exportDeclPaths.push(k);return Lg.Visitor.prototype.visitExportAllDeclaration.call(this,g,d,k)};Lg.ScopeVisitor=Hi;Lg.BaseVisitor=Kd;Lg.Visitor=Kd;Lg.PrinterVisitor=eB;Lg.PrinterVisitor=eB;Lg.ComparisonVisitor=xj;Lg.ComparisonVisitor=xj;Lg.ScopeVisitor=Hi;Lg.ScopeVisitor=Hi;var Qf=
"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,fP={};(function k(d){function e(A){var C={},G;for(G in A)if(A.hasOwnProperty(G)){var F=A[G];C[G]="object"===typeof F&&null!==F?e(F):F}return C}function h(A,C){var G;var F=A.length;for(G=0;F;){var N=F>>>1;var L=G+N;C(A[L])?F=N:(G=L+1,F-=N+1)}return G}function n(A,C){(this||Qf).parent=A;(this||Qf).key=C}function b(A,C,G,F){(this||Qf).node=A;(this||Qf).path=C;(this||Qf).wrap=G;(this||Qf).ref=F}function c(){}function l(A){return null==
A?!1:"object"===typeof A&&"string"===typeof A.type}function a(A,C){for(var G=A.length-1;0<=G;--G)if(A[G].node===C)return!0;return!1}function f(A,C){return(new c).traverse(A,C)}function m(A,C){var G=h(C,function(F){return F.range[0]>A.range[0]});A.extendedRange=[A.range[0],A.range[1]];G!==C.length&&(A.extendedRange[1]=C[G].range[0]);--G;0<=G&&(A.extendedRange[0]=C[G].range[1]);return A}var q={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",
ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",
ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",
ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",
ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};var r={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],
BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],
DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter",
"body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],
ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],
VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};var u={};var v={};var y={};var z={Break:u,Skip:v,Remove:y};n.prototype.replace=function(A){(this||Qf).parent[(this||Qf).key]=A};n.prototype.remove=function(){if(Array.isArray((this||Qf).parent))return(this||Qf).parent.splice((this||Qf).key,1),!0;this.replace(null);return!1};c.prototype.path=function(){function A(la,wa){if(Array.isArray(wa))for(G=
0,F=wa.length;G<F;++G)la.push(wa[G]);else la.push(wa)}var C,G,F;if(!(this||Qf).__current.path)return null;var N=[];var L=2;for(C=(this||Qf).__leavelist.length;L<C;++L){var W=(this||Qf).__leavelist[L];A(N,W.path)}A(N,(this||Qf).__current.path);return N};c.prototype.type=function(){return this.current().type||(this||Qf).__current.wrap};c.prototype.parents=function(){var A;var C=[];var G=1;for(A=(this||Qf).__leavelist.length;G<A;++G)C.push((this||Qf).__leavelist[G].node);return C};c.prototype.current=
function(){return(this||Qf).__current.node};c.prototype.__execute=function(A,C){var G=void 0;var F=(this||Qf).__current;(this||Qf).__current=C;(this||Qf).__state=null;A&&(G=A.call(this||Qf,C.node,(this||Qf).__leavelist[(this||Qf).__leavelist.length-1].node));(this||Qf).__current=F;return G};c.prototype.notify=function(A){(this||Qf).__state=A};c.prototype.skip=function(){this.notify(v)};c.prototype["break"]=function(){this.notify(u)};c.prototype.remove=function(){this.notify(y)};c.prototype.__initialize=
function(A,C){(this||Qf).visitor=C;(this||Qf).root=A;(this||Qf).__worklist=[];(this||Qf).__leavelist=[];(this||Qf).__current=null;(this||Qf).__state=null;(this||Qf).__fallback=null;"iteration"===C.fallback?(this||Qf).__fallback=Object.keys:"function"===typeof C.fallback&&((this||Qf).__fallback=C.fallback);(this||Qf).__keys=r;C.keys&&((this||Qf).__keys=Object.assign(Object.create((this||Qf).__keys),C.keys))};c.prototype.traverse=function(A,C){var G,F,N;this.__initialize(A,C);var L={};var W=(this||
Qf).__worklist;var la=(this||Qf).__leavelist;W.push(new b(A,null,null,null));for(la.push(new b(null,null,null,null));W.length;)if(A=W.pop(),A===L){A=la.pop();var wa=this.__execute(C.leave,A);if((this||Qf).__state===u||wa===u)break}else if(A.node){wa=this.__execute(C.enter,A);if((this||Qf).__state===u||wa===u)break;W.push(L);la.push(A);if((this||Qf).__state!==v&&wa!==v){wa=A.node;var D=wa.type||A.wrap;var Q=(this||Qf).__keys[D];if(!Q)if((this||Qf).__fallback)Q=this.__fallback(wa);else throw Error("Unknown node type "+
D+".");for(G=Q.length;0<=--G;){var J=Q[G];if(N=wa[J])if(Array.isArray(N))for(F=N.length;0<=--F;){if(N[F]&&!a(la,N[F])){if(D!==q.ObjectExpression&&D!==q.ObjectPattern||"properties"!==Q[G])if(l(N[F]))A=new b(N[F],[J,F],null,null);else continue;else A=new b(N[F],[J,F],"Property",null);W.push(A)}}else l(N)&&!a(la,N)&&W.push(new b(N,J,null,null))}}}};c.prototype.replace=function(A,C){function G(X){if(X.ref.remove()){var ha=X.ref.key;var bb=X.ref.parent;for(X=la.length;X--;){var pb=la[X];if(pb.ref&&pb.ref.parent===
bb){if(pb.ref.key<ha)break;--pb.ref.key}}}}var F,N,L;this.__initialize(A,C);var W={};var la=(this||Qf).__worklist;var wa=(this||Qf).__leavelist;var D={root:A};var Q=new b(A,null,null,new n(D,"root"));la.push(Q);for(wa.push(Q);la.length;)if(Q=la.pop(),Q===W){Q=wa.pop();var J=this.__execute(C.leave,Q);void 0!==J&&J!==u&&J!==v&&J!==y&&Q.ref.replace(J);(this||Qf).__state!==y&&J!==y||G(Q);if((this||Qf).__state===u||J===u)break}else{J=this.__execute(C.enter,Q);void 0!==J&&J!==u&&J!==v&&J!==y&&(Q.ref.replace(J),
Q.node=J);if((this||Qf).__state===y||J===y)G(Q),Q.node=null;if((this||Qf).__state===u||J===u)break;if(A=Q.node)if(la.push(W),wa.push(Q),(this||Qf).__state!==v&&J!==v){J=A.type||Q.wrap;var O=(this||Qf).__keys[J];if(!O)if((this||Qf).__fallback)O=this.__fallback(A);else throw Error("Unknown node type "+J+".");for(F=O.length;0<=--F;){var ja=O[F];if(L=A[ja])if(Array.isArray(L))for(N=L.length;0<=--N;){if(L[N]){if(J!==q.ObjectExpression&&J!==q.ObjectPattern||"properties"!==O[F])if(l(L[N]))Q=new b(L[N],[ja,
N],null,new n(L,N));else continue;else Q=new b(L[N],[ja,N],"Property",new n(L,N));la.push(Q)}}else l(L)&&la.push(new b(L,ja,null,new n(A,ja)))}}}return D.root};d.Syntax=q;d.traverse=f;d.replace=function(A,C){return(new c).replace(A,C)};d.attachComments=function(A,C,G){var F=[],N;if(!A.range)throw Error("attachComments needs range information");if(!G.length){if(C.length){var L=0;for(N=C.length;L<N;L+=1)G=e(C[L]),G.extendedRange=[0,A.range[0]],F.push(G);A.leadingComments=F}return A}L=0;for(N=C.length;L<
N;L+=1)F.push(m(e(C[L]),G));var W=0;f(A,{enter:function(la){for(var wa;W<F.length;){wa=F[W];if(wa.extendedRange[1]>la.range[0])break;wa.extendedRange[1]===la.range[0]?(la.leadingComments||(la.leadingComments=[]),la.leadingComments.push(wa),F.splice(W,1)):W+=1}if(W===F.length)return z.Break;if(F[W].extendedRange[0]>la.range[1])return z.Skip}});W=0;f(A,{leave:function(la){for(var wa;W<F.length;){wa=F[W];if(la.range[1]<wa.extendedRange[0])break;la.range[1]===wa.extendedRange[0]?(la.trailingComments||
(la.trailingComments=[]),la.trailingComments.push(wa),F.splice(W,1)):W+=1}if(W===F.length)return z.Break;if(F[W].extendedRange[0]>la.range[1])return z.Skip}});return A};d.VisitorKeys=r;d.VisitorOption=z;d.Controller=c;d.cloneEnvironment=function(){return k({})};return d})(fP);var Y_={};(function(){function d(e){if(null==e)return!1;switch(e.type){case "BlockStatement":case "BreakStatement":case "ContinueStatement":case "DebuggerStatement":case "DoWhileStatement":case "EmptyStatement":case "ExpressionStatement":case "ForInStatement":case "ForStatement":case "IfStatement":case "LabeledStatement":case "ReturnStatement":case "SwitchStatement":case "ThrowStatement":case "TryStatement":case "VariableDeclaration":case "WhileStatement":case "WithStatement":return!0}return!1}
function k(e){switch(e.type){case "IfStatement":return null!=e.alternate?e.alternate:e.consequent;case "LabeledStatement":case "ForStatement":case "ForInStatement":case "WhileStatement":case "WithStatement":return e.body}return null}Y_={isExpression:function(e){if(null==e)return!1;switch(e.type){case "ArrayExpression":case "AssignmentExpression":case "BinaryExpression":case "CallExpression":case "ConditionalExpression":case "FunctionExpression":case "Identifier":case "Literal":case "LogicalExpression":case "MemberExpression":case "NewExpression":case "ObjectExpression":case "SequenceExpression":case "ThisExpression":case "UnaryExpression":case "UpdateExpression":return!0}return!1},
isStatement:d,isIterationStatement:function(e){if(null==e)return!1;switch(e.type){case "DoWhileStatement":case "ForInStatement":case "ForStatement":case "WhileStatement":return!0}return!1},isSourceElement:function(e){return d(e)||null!=e&&"FunctionDeclaration"===e.type},isProblematicIfStatement:function(e){if("IfStatement"!==e.type||null==e.alternate)return!1;e=e.consequent;do{if("IfStatement"===e.type&&null==e.alternate)return!0;e=k(e)}while(e);return!1},trailingStatement:k}})();var vba=Y_,Z_={};
(function(){function d(f){if(65535>=f)return String.fromCharCode(f);var m=String.fromCharCode(Math.floor((f-65536)/1024)+55296);f=String.fromCharCode((f-65536)%1024+56320);return m+f}var k;var e=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var h=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var n=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/;
var b=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
var c=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];var l=Array(128);for(k=0;128>k;++k)l[k]=97<=k&&122>=k||65<=k&&90>=k||36===k||95===k;var a=Array(128);for(k=0;128>k;++k)a[k]=97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||36===k||95===k;Z_={isDecimalDigit:function(f){return 48<=f&&57>=f},isHexDigit:function(f){return 48<=f&&57>=f||97<=f&&102>=f||65<=f&&70>=f},isOctalDigit:function(f){return 48<=f&&55>=f},isWhiteSpace:function(f){return 32===f||9===f||11===f||12===
f||160===f||5760<=f&&0<=c.indexOf(f)},isLineTerminator:function(f){return 10===f||13===f||8232===f||8233===f},isIdentifierStartES5:function(f){return 128>f?l[f]:e.test(d(f))},isIdentifierPartES5:function(f){return 128>f?a[f]:h.test(d(f))},isIdentifierStartES6:function(f){return 128>f?l[f]:n.test(d(f))},isIdentifierPartES6:function(f){return 128>f?a[f]:b.test(d(f))}}})();var $_=Z_,a0={};(function(){function d(l,a){return a||"yield"!==l?k(l,a):!1}function k(l,a){if(a)a:switch(l){case "implements":case "interface":case "package":case "private":case "protected":case "public":case "static":case "let":a=
!0;break a;default:a=!1}if(a)return!0;switch(l.length){case 2:return"if"===l||"in"===l||"do"===l;case 3:return"var"===l||"for"===l||"new"===l||"try"===l;case 4:return"this"===l||"else"===l||"case"===l||"void"===l||"with"===l||"enum"===l;case 5:return"while"===l||"break"===l||"catch"===l||"throw"===l||"const"===l||"yield"===l||"class"===l||"super"===l;case 6:return"return"===l||"typeof"===l||"delete"===l||"switch"===l||"export"===l||"import"===l;case 7:return"default"===l||"finally"===l||"extends"===
l;case 8:return"function"===l||"continue"===l||"debugger"===l;case 10:return"instanceof"===l;default:return!1}}function e(l,a){return"null"===l||"true"===l||"false"===l||d(l,a)}function h(l,a){return"null"===l||"true"===l||"false"===l||k(l,a)}function n(l){var a;if(0===l.length)return!1;var f=l.charCodeAt(0);if(!c.isIdentifierStartES5(f))return!1;var m=1;for(a=l.length;m<a;++m)if(f=l.charCodeAt(m),!c.isIdentifierPartES5(f))return!1;return!0}function b(l){var a;if(0===l.length)return!1;var f=c.isIdentifierStartES6;
var m=0;for(a=l.length;m<a;++m){var q=l.charCodeAt(m);if(55296<=q&&56319>=q){++m;if(m>=a)return!1;var r=l.charCodeAt(m);if(!(56320<=r&&57343>=r))return!1;q=1024*(q-55296)+(r-56320)+65536}if(!f(q))return!1;f=c.isIdentifierPartES6}return!0}var c=$_;a0={isKeywordES5:d,isKeywordES6:k,isReservedWordES5:e,isReservedWordES6:h,isRestrictedWord:function(l){return"eval"===l||"arguments"===l},isIdentifierNameES5:n,isIdentifierNameES6:b,isIdentifierES5:function(l,a){return n(l)&&!e(l,a)},isIdentifierES6:function(l,
a){return b(l)&&!h(l,a)}}})();var wba=a0,DD={};DD.ast=vba;DD.code=$_;DD.keyword=wba;var kl={getArg:function(d,k,e){if(k in d)return d[k];if(3===arguments.length)return e;throw Error('"'+k+'" is a required argument.');}},iS=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,D5=/^data:.+,.+$/;kl.urlParse=pn;kl.urlGenerate=iu;kl.normalize=px;kl.join=Kp;kl.isAbsolute=function(d){return"/"===d.charAt(0)||iS.test(d)};kl.relative=function(d,k){""===d&&(d=".");d=d.replace(/\/$/,"");for(var e=
0;0!==k.indexOf(d+"/");){var h=d.lastIndexOf("/");if(0>h)return k;d=d.slice(0,h);if(d.match(/^([^\/]+:\/)?\/*$/))return k;++e}return Array(e+1).join("../")+k.substr(d.length+1)};var b0=!("__proto__"in Object.create(null));kl.toSetString=b0?XB:jL;kl.fromSetString=b0?XB:fF;kl.compareByOriginalPositions=function(d,k,e){var h=jm(d.source,k.source);if(0!==h)return h;h=d.originalLine-k.originalLine;if(0!==h)return h;h=d.originalColumn-k.originalColumn;if(0!==h||e)return h;h=d.generatedColumn-k.generatedColumn;
if(0!==h)return h;h=d.generatedLine-k.generatedLine;return 0!==h?h:jm(d.name,k.name)};kl.compareByGeneratedPositionsDeflated=function(d,k,e){var h=d.generatedLine-k.generatedLine;if(0!==h)return h;h=d.generatedColumn-k.generatedColumn;if(0!==h||e)return h;h=jm(d.source,k.source);if(0!==h)return h;h=d.originalLine-k.originalLine;if(0!==h)return h;h=d.originalColumn-k.originalColumn;return 0!==h?h:jm(d.name,k.name)};kl.compareByGeneratedPositionsInflated=function(d,k){var e=d.generatedLine-k.generatedLine;
if(0!==e)return e;e=d.generatedColumn-k.generatedColumn;if(0!==e)return e;e=jm(d.source,k.source);if(0!==e)return e;e=d.originalLine-k.originalLine;if(0!==e)return e;e=d.originalColumn-k.originalColumn;return 0!==e?e:jm(d.name,k.name)};kl.parseSourceMapInput=function(d){return JSON.parse(d.replace(/^\)]}'[^\n]*\n/,""))};kl.computeSourceURL=function(d,k,e){k=k||"";d&&("/"!==d[d.length-1]&&"/"!==k[0]&&(d+="/"),k=d+k);if(e){d=pn(e);if(!d)throw Error("sourceMapURL could not be parsed");d.path&&(e=d.path.lastIndexOf("/"),
0<=e&&(d.path=d.path.substring(0,e+1)));k=Kp(iu(d),k)}return px(k)};var nI={},c0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");nI.encode=function(d){if(0<=d&&d<c0.length)return c0[d];throw new TypeError("Must be between 0 and 63: "+d);};nI.decode=function(d){return 65<=d&&90>=d?d-65:97<=d&&122>=d?d-97+26:48<=d&&57>=d?d-48+52:43==d?62:47==d?63:-1};var fB={encode:function(d){var k="",e=0>d?(-d<<1)+1:d<<1;do d=e&31,e>>>=5,0<e&&(d|=32),k+=nI.encode(d);while(0<e);return k},
decode:function(d,k,e){var h=d.length,n=0,b=0;do{if(k>=h)throw Error("Expected more digits in base 64 VLQ value.");var c=nI.decode(d.charCodeAt(k++));if(-1===c)throw Error("Invalid base64 digit: "+d.charAt(k-1));var l=!!(c&32);c&=31;n+=c<<b;b+=5}while(l);d=n>>1;e.value=1===(n&1)?-d:d;e.rest=k}},km="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,gP=kl,hP=Object.prototype.hasOwnProperty,qx="undefined"!==typeof Map;Uj.fromArray=function(d,k){for(var e=new Uj,h=0,n=d.length;h<
n;h++)e.add(d[h],k);return e};Uj.prototype.size=function(){return qx?(this||km)._set.size:Object.getOwnPropertyNames((this||km)._set).length};Uj.prototype.add=function(d,k){var e=qx?d:gP.toSetString(d),h=qx?this.has(d):hP.call((this||km)._set,e),n=(this||km)._array.length;h&&!k||(this||km)._array.push(d);h||(qx?(this||km)._set.set(d,n):(this||km)._set[e]=n)};Uj.prototype.has=function(d){if(qx)return(this||km)._set.has(d);d=gP.toSetString(d);return hP.call((this||km)._set,d)};Uj.prototype.indexOf=
function(d){if(qx){var k=(this||km)._set.get(d);if(0<=k)return k}else if(k=gP.toSetString(d),hP.call((this||km)._set,k))return(this||km)._set[k];throw Error('"'+d+'" is not in the set.');};Uj.prototype.at=function(d){if(0<=d&&d<(this||km)._array.length)return(this||km)._array[d];throw Error("No element indexed by "+d);};Uj.prototype.toArray=function(){return(this||km)._array.slice()};var Lp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,d0=kl;ju.prototype.unsortedForEach=
function(d,k){(this||Lp)._array.forEach(d,k)};ju.prototype.add=function(d){var k=(this||Lp)._last,e=k.generatedLine,h=d.generatedLine,n=k.generatedColumn,b=d.generatedColumn;h>e||h==e&&b>=n||0>=d0.compareByGeneratedPositionsInflated(k,d)?(this||Lp)._last=d:(this||Lp)._sorted=!1;(this||Lp)._array.push(d)};ju.prototype.toArray=function(){(this||Lp)._sorted||((this||Lp)._array.sort(d0.compareByGeneratedPositionsInflated),(this||Lp)._sorted=!0);return(this||Lp)._array};var gh="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Hk=kl,gF=Uj,E5=ju;lm.prototype._version=3;lm.fromSourceMap=function(d){var k=d.sourceRoot,e=new lm({file:d.file,sourceRoot:k});d.eachMapping(function(h){var n={generated:{line:h.generatedLine,column:h.generatedColumn}};null!=h.source&&(n.source=h.source,null!=k&&(n.source=Hk.relative(k,n.source)),n.original={line:h.originalLine,column:h.originalColumn},null!=h.name&&(n.name=h.name));e.addMapping(n)});d.sources.forEach(function(h){var n=h;null!==k&&
(n=Hk.relative(k,h));e._sources.has(n)||e._sources.add(n);n=d.sourceContentFor(h);null!=n&&e.setSourceContent(h,n)});return e};lm.prototype.addMapping=function(d){var k=Hk.getArg(d,"generated"),e=Hk.getArg(d,"original",null),h=Hk.getArg(d,"source",null);d=Hk.getArg(d,"name",null);(this||gh)._skipValidation||this._validateMapping(k,e,h,d);null!=h&&(h=String(h),(this||gh)._sources.has(h)||(this||gh)._sources.add(h));null!=d&&(d=String(d),(this||gh)._names.has(d)||(this||gh)._names.add(d));(this||gh)._mappings.add({generatedLine:k.line,
generatedColumn:k.column,originalLine:null!=e&&e.line,originalColumn:null!=e&&e.column,source:h,name:d})};lm.prototype.setSourceContent=function(d,k){null!=(this||gh)._sourceRoot&&(d=Hk.relative((this||gh)._sourceRoot,d));null!=k?((this||gh)._sourcesContents||((this||gh)._sourcesContents=Object.create(null)),(this||gh)._sourcesContents[Hk.toSetString(d)]=k):(this||gh)._sourcesContents&&(delete (this||gh)._sourcesContents[Hk.toSetString(d)],0===Object.keys((this||gh)._sourcesContents).length&&((this||
gh)._sourcesContents=null))};lm.prototype.applySourceMap=function(d,k,e){var h=k;if(null==k){if(null==d.file)throw Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');h=d.file}var n=(this||gh)._sourceRoot;null!=n&&(h=Hk.relative(n,h));var b=new gF,c=new gF;(this||gh)._mappings.unsortedForEach(function(l){if(l.source===h&&null!=l.originalLine){var a=d.originalPositionFor({line:l.originalLine,column:l.originalColumn});
null!=a.source&&(l.source=a.source,null!=e&&(l.source=Hk.join(e,l.source)),null!=n&&(l.source=Hk.relative(n,l.source)),l.originalLine=a.line,l.originalColumn=a.column,null!=a.name&&(l.name=a.name))}a=l.source;null==a||b.has(a)||b.add(a);l=l.name;null==l||c.has(l)||c.add(l)},this||gh);(this||gh)._sources=b;(this||gh)._names=c;d.sources.forEach(function(l){var a=d.sourceContentFor(l);null!=a&&(null!=e&&(l=Hk.join(e,l)),null!=n&&(l=Hk.relative(n,l)),this.setSourceContent(l,a))},this||gh)};lm.prototype._validateMapping=
function(d,k,e,h){if(k&&"number"!==typeof k.line&&"number"!==typeof k.column)throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(d&&"line"in d&&"column"in d&&0<d.line&&0<=d.column&&!k&&!e&&!h||d&&"line"in d&&"column"in d&&k&&"line"in k&&"column"in k&&0<d.line&&0<=d.column&&0<k.line&&0<=k.column&&
e))throw Error("Invalid mapping: "+JSON.stringify({generated:d,source:e,original:k,name:h}));};lm.prototype._serializeMappings=function(){for(var d=0,k=1,e=0,h=0,n=0,b=0,c="",l,a,f,m=(this||gh)._mappings.toArray(),q=0,r=m.length;q<r;q++){a=m[q];l="";if(a.generatedLine!==k)for(d=0;a.generatedLine!==k;)l+=";",k++;else if(0<q){if(!Hk.compareByGeneratedPositionsInflated(a,m[q-1]))continue;l+=","}l+=fB.encode(a.generatedColumn-d);d=a.generatedColumn;null!=a.source&&(f=(this||gh)._sources.indexOf(a.source),
l+=fB.encode(f-b),b=f,l+=fB.encode(a.originalLine-1-h),h=a.originalLine-1,l+=fB.encode(a.originalColumn-e),e=a.originalColumn,null!=a.name&&(a=(this||gh)._names.indexOf(a.name),l+=fB.encode(a-n),n=a));c+=l}return c};lm.prototype._generateSourcesContent=function(d,k){return d.map(function(e){if(!(this||gh)._sourcesContents)return null;null!=k&&(e=Hk.relative(k,e));e=Hk.toSetString(e);return Object.prototype.hasOwnProperty.call((this||gh)._sourcesContents,e)?(this||gh)._sourcesContents[e]:null},this||
gh)};lm.prototype.toJSON=function(){var d={version:(this||gh)._version,sources:(this||gh)._sources.toArray(),names:(this||gh)._names.toArray(),mappings:this._serializeMappings()};null!=(this||gh)._file&&(d.file=(this||gh)._file);null!=(this||gh)._sourceRoot&&(d.sourceRoot=(this||gh)._sourceRoot);(this||gh)._sourcesContents&&(d.sourcesContent=this._generateSourcesContent(d.sources,d.sourceRoot));return d};lm.prototype.toString=function(){return JSON.stringify(this.toJSON())};var hF={GREATEST_LOWER_BOUND:1,
LEAST_UPPER_BOUND:2,search:function(d,k,e,h){if(0===k.length)return-1;d=rx(-1,k.length,d,k,e,h||hF.GREATEST_LOWER_BOUND);if(0>d)return-1;for(;0<=d-1&&0===e(k[d],k[d-1],!0);)--d;return d}},be="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,tf=kl,iP=hF,Bz=Uj,ED=function(d,k){ri(d,k,0,d.length-1)};Zh.fromSourceMap=function(d,k){return ll.fromSourceMap(d,k)};Zh.prototype._version=3;Zh.prototype.__generatedMappings=null;Object.defineProperty(Zh.prototype,"_generatedMappings",
{configurable:!0,enumerable:!0,get:function(){(this||be).__generatedMappings||this._parseMappings((this||be)._mappings,(this||be).sourceRoot);return(this||be).__generatedMappings}});Zh.prototype.__originalMappings=null;Object.defineProperty(Zh.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){(this||be).__originalMappings||this._parseMappings((this||be)._mappings,(this||be).sourceRoot);return(this||be).__originalMappings}});Zh.prototype._charIsMappingSeparator=function(d,
k){d=d.charAt(k);return";"===d||","===d};Zh.prototype._parseMappings=function(d,k){throw Error("Subclasses must implement _parseMappings");};Zh.GENERATED_ORDER=1;Zh.ORIGINAL_ORDER=2;Zh.GREATEST_LOWER_BOUND=1;Zh.LEAST_UPPER_BOUND=2;Zh.prototype.eachMapping=function(d,k,e){k=k||null;switch(e||Zh.GENERATED_ORDER){case Zh.GENERATED_ORDER:e=(this||be)._generatedMappings;break;case Zh.ORIGINAL_ORDER:e=(this||be)._originalMappings;break;default:throw Error("Unknown order of iteration.");}var h=(this||be).sourceRoot;
e.map(function(n){var b=null===n.source?null:(this||be)._sources.at(n.source);b=tf.computeSourceURL(h,b,(this||be)._sourceMapURL);return{source:b,generatedLine:n.generatedLine,generatedColumn:n.generatedColumn,originalLine:n.originalLine,originalColumn:n.originalColumn,name:null===n.name?null:(this||be)._names.at(n.name)}},this||be).forEach(d,k)};Zh.prototype.allGeneratedPositionsFor=function(d){var k=tf.getArg(d,"line"),e={source:tf.getArg(d,"source"),originalLine:k,originalColumn:tf.getArg(d,"column",
0)};e.source=this._findSourceIndex(e.source);if(0>e.source)return[];var h=[];e=this._findMapping(e,(this||be)._originalMappings,"originalLine","originalColumn",tf.compareByOriginalPositions,iP.LEAST_UPPER_BOUND);if(0<=e){var n=(this||be)._originalMappings[e];if(void 0===d.column)for(k=n.originalLine;n&&n.originalLine===k;)h.push({line:tf.getArg(n,"generatedLine",null),column:tf.getArg(n,"generatedColumn",null),lastColumn:tf.getArg(n,"lastGeneratedColumn",null)}),n=(this||be)._originalMappings[++e];
else for(d=n.originalColumn;n&&n.originalLine===k&&n.originalColumn==d;)h.push({line:tf.getArg(n,"generatedLine",null),column:tf.getArg(n,"generatedColumn",null),lastColumn:tf.getArg(n,"lastGeneratedColumn",null)}),n=(this||be)._originalMappings[++e]}return h};ll.prototype=Object.create(Zh.prototype);ll.prototype.consumer=Zh;ll.prototype._findSourceIndex=function(d){var k=d;null!=(this||be).sourceRoot&&(k=tf.relative((this||be).sourceRoot,k));if((this||be)._sources.has(k))return(this||be)._sources.indexOf(k);
for(k=0;k<(this||be)._absoluteSources.length;++k)if((this||be)._absoluteSources[k]==d)return k;return-1};ll.fromSourceMap=function(d,k){var e=Object.create(ll.prototype),h=e._names=Bz.fromArray(d._names.toArray(),!0),n=e._sources=Bz.fromArray(d._sources.toArray(),!0);e.sourceRoot=d._sourceRoot;e.sourcesContent=d._generateSourcesContent(e._sources.toArray(),e.sourceRoot);e.file=d._file;e._sourceMapURL=k;e._absoluteSources=e._sources.toArray().map(function(q){return tf.computeSourceURL(e.sourceRoot,
q,k)});d=d._mappings.toArray().slice();for(var b=e.__generatedMappings=[],c=e.__originalMappings=[],l=0,a=d.length;l<a;l++){var f=d[l],m=new YB;m.generatedLine=f.generatedLine;m.generatedColumn=f.generatedColumn;f.source&&(m.source=n.indexOf(f.source),m.originalLine=f.originalLine,m.originalColumn=f.originalColumn,f.name&&(m.name=h.indexOf(f.name)),c.push(m));b.push(m)}ED(e.__originalMappings,tf.compareByOriginalPositions);return e};ll.prototype._version=3;Object.defineProperty(ll.prototype,"sources",
{get:function(){return(this||be)._absoluteSources.slice()}});ll.prototype._parseMappings=function(d,k){k=1;for(var e=0,h=0,n=0,b=0,c=0,l=d.length,a=0,f={},m={},q=[],r=[],u,v,y,z,A;a<l;)if(";"===d.charAt(a))k++,a++,e=0;else if(","===d.charAt(a))a++;else{u=new YB;u.generatedLine=k;for(z=a;z<l&&!this._charIsMappingSeparator(d,z);z++);v=d.slice(a,z);if(y=f[v])a+=v.length;else{for(y=[];a<z;)fB.decode(d,a,m),A=m.value,a=m.rest,y.push(A);if(2===y.length)throw Error("Found a source, but no line and column");
if(3===y.length)throw Error("Found a source and line, but no column");f[v]=y}u.generatedColumn=e+y[0];e=u.generatedColumn;1<y.length&&(u.source=b+y[1],b+=y[1],u.originalLine=h+y[2],h=u.originalLine,u.originalLine+=1,u.originalColumn=n+y[3],n=u.originalColumn,4<y.length&&(u.name=c+y[4],c+=y[4]));r.push(u);"number"===typeof u.originalLine&&q.push(u)}ED(r,tf.compareByGeneratedPositionsDeflated);(this||be).__generatedMappings=r;ED(q,tf.compareByOriginalPositions);(this||be).__originalMappings=q};ll.prototype._findMapping=
function(d,k,e,h,n,b){if(0>=d[e])throw new TypeError("Line must be greater than or equal to 1, got "+d[e]);if(0>d[h])throw new TypeError("Column must be greater than or equal to 0, got "+d[h]);return iP.search(d,k,n,b)};ll.prototype.computeColumnSpans=function(){for(var d=0;d<(this||be)._generatedMappings.length;++d){var k=(this||be)._generatedMappings[d];if(d+1<(this||be)._generatedMappings.length){var e=(this||be)._generatedMappings[d+1];if(k.generatedLine===e.generatedLine){k.lastGeneratedColumn=
e.generatedColumn-1;continue}}k.lastGeneratedColumn=Infinity}};ll.prototype.originalPositionFor=function(d){var k={generatedLine:tf.getArg(d,"line"),generatedColumn:tf.getArg(d,"column")};d=this._findMapping(k,(this||be)._generatedMappings,"generatedLine","generatedColumn",tf.compareByGeneratedPositionsDeflated,tf.getArg(d,"bias",Zh.GREATEST_LOWER_BOUND));if(0<=d&&(d=(this||be)._generatedMappings[d],d.generatedLine===k.generatedLine)){k=tf.getArg(d,"source",null);null!==k&&(k=(this||be)._sources.at(k),
k=tf.computeSourceURL((this||be).sourceRoot,k,(this||be)._sourceMapURL));var e=tf.getArg(d,"name",null);null!==e&&(e=(this||be)._names.at(e));return{source:k,line:tf.getArg(d,"originalLine",null),column:tf.getArg(d,"originalColumn",null),name:e}}return{source:null,line:null,column:null,name:null}};ll.prototype.hasContentsOfAllSources=function(){return(this||be).sourcesContent?(this||be).sourcesContent.length>=(this||be)._sources.size()&&!(this||be).sourcesContent.some(function(d){return null==d}):
!1};ll.prototype.sourceContentFor=function(d,k){if(!(this||be).sourcesContent)return null;var e=this._findSourceIndex(d);if(0<=e)return(this||be).sourcesContent[e];null!=(this||be).sourceRoot&&(d=tf.relative((this||be).sourceRoot,d));var h;if(null!=(this||be).sourceRoot&&(h=tf.urlParse((this||be).sourceRoot))){e=d.replace(/^file:\/\//,"");if("file"==h.scheme&&(this||be)._sources.has(e))return(this||be).sourcesContent[(this||be)._sources.indexOf(e)];if((!h.path||"/"==h.path)&&(this||be)._sources.has("/"+
d))return(this||be).sourcesContent[(this||be)._sources.indexOf("/"+d)]}if(k)return null;throw Error('"'+d+'" is not in the SourceMap.');};ll.prototype.generatedPositionFor=function(d){var k=tf.getArg(d,"source");k=this._findSourceIndex(k);if(0>k)return{line:null,column:null,lastColumn:null};k={source:k,originalLine:tf.getArg(d,"line"),originalColumn:tf.getArg(d,"column")};d=this._findMapping(k,(this||be)._originalMappings,"originalLine","originalColumn",tf.compareByOriginalPositions,tf.getArg(d,"bias",
Zh.GREATEST_LOWER_BOUND));return 0<=d&&(d=(this||be)._originalMappings[d],d.source===k.source)?{line:tf.getArg(d,"generatedLine",null),column:tf.getArg(d,"generatedColumn",null),lastColumn:tf.getArg(d,"lastGeneratedColumn",null)}:{line:null,column:null,lastColumn:null}};Jl.prototype=Object.create(Zh.prototype);Jl.prototype.constructor=Zh;Jl.prototype._version=3;Object.defineProperty(Jl.prototype,"sources",{get:function(){for(var d=[],k=0;k<(this||be)._sections.length;k++)for(var e=0;e<(this||be)._sections[k].consumer.sources.length;e++)d.push((this||
be)._sections[k].consumer.sources[e]);return d}});Jl.prototype.originalPositionFor=function(d){var k={generatedLine:tf.getArg(d,"line"),generatedColumn:tf.getArg(d,"column")},e=iP.search(k,(this||be)._sections,function(h,n){var b=h.generatedLine-n.generatedOffset.generatedLine;return b?b:h.generatedColumn-n.generatedOffset.generatedColumn});return(e=(this||be)._sections[e])?e.consumer.originalPositionFor({line:k.generatedLine-(e.generatedOffset.generatedLine-1),column:k.generatedColumn-(e.generatedOffset.generatedLine===
k.generatedLine?e.generatedOffset.generatedColumn-1:0),bias:d.bias}):{source:null,line:null,column:null,name:null}};Jl.prototype.hasContentsOfAllSources=function(){return(this||be)._sections.every(function(d){return d.consumer.hasContentsOfAllSources()})};Jl.prototype.sourceContentFor=function(d,k){for(var e=0;e<(this||be)._sections.length;e++){var h=(this||be)._sections[e].consumer.sourceContentFor(d,!0);if(h)return h}if(k)return null;throw Error('"'+d+'" is not in the SourceMap.');};Jl.prototype.generatedPositionFor=
function(d){for(var k=0;k<(this||be)._sections.length;k++){var e=(this||be)._sections[k];if(-1!==e.consumer._findSourceIndex(tf.getArg(d,"source"))){var h=e.consumer.generatedPositionFor(d);if(h)return{line:h.line+(e.generatedOffset.generatedLine-1),column:h.column+(e.generatedOffset.generatedLine===h.line?e.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}};Jl.prototype._parseMappings=function(d,k){(this||be).__generatedMappings=[];(this||be).__originalMappings=[];for(d=0;d<(this||
be)._sections.length;d++){k=(this||be)._sections[d];for(var e=k.consumer._generatedMappings,h=0;h<e.length;h++){var n=e[h],b=k.consumer._sources.at(n.source);b=tf.computeSourceURL(k.consumer.sourceRoot,b,(this||be)._sourceMapURL);(this||be)._sources.add(b);b=(this||be)._sources.indexOf(b);var c=null;n.name&&(c=k.consumer._names.at(n.name),(this||be)._names.add(c),c=(this||be)._names.indexOf(c));n={source:b,generatedLine:n.generatedLine+(k.generatedOffset.generatedLine-1),generatedColumn:n.generatedColumn+
(k.generatedOffset.generatedLine===n.generatedLine?k.generatedOffset.generatedColumn-1:0),originalLine:n.originalLine,originalColumn:n.originalColumn,name:c};(this||be).__generatedMappings.push(n);"number"===typeof n.originalLine&&(this||be).__originalMappings.push(n)}}ED((this||be).__generatedMappings,tf.compareByGeneratedPositionsDeflated);ED((this||be).__originalMappings,tf.compareByOriginalPositions)};var Uh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,oI=kl,
xba=/(\r?\n)/;Km.fromStringWithSourceMap=function(d,k,e){function h(q,r){if(null===q||void 0===q.source)n.add(r);else{var u=e?oI.join(e,q.source):q.source;n.add(new Km(q.originalLine,q.originalColumn,u,r,q.name))}}var n=new Km,b=d.split(xba),c=0,l=function(){var q=c<b.length?b[c++]:void 0,r=(c<b.length?b[c++]:void 0)||"";return q+r},a=1,f=0,m=null;k.eachMapping(function(q){if(null!==m)if(a<q.generatedLine)h(m,l()),a++,f=0;else{var r=b[c]||"",u=r.substr(0,q.generatedColumn-f);b[c]=r.substr(q.generatedColumn-
f);f=q.generatedColumn;h(m,u);m=q;return}for(;a<q.generatedLine;)n.add(l()),a++;f<q.generatedColumn&&(r=b[c]||"",n.add(r.substr(0,q.generatedColumn)),b[c]=r.substr(q.generatedColumn),f=q.generatedColumn);m=q},this||Uh);c<b.length&&(m&&h(m,l()),n.add(b.splice(c).join("")));k.sources.forEach(function(q){var r=k.sourceContentFor(q);null!=r&&(null!=e&&(q=oI.join(e,q)),n.setSourceContent(q,r))});return n};Km.prototype.add=function(d){if(Array.isArray(d))d.forEach(function(k){this.add(k)},this||Uh);else if(d.$$$isSourceNode$$$||
"string"===typeof d)d&&(this||Uh).children.push(d);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+d);return this||Uh};Km.prototype.prepend=function(d){if(Array.isArray(d))for(var k=d.length-1;0<=k;k--)this.prepend(d[k]);else if(d.$$$isSourceNode$$$||"string"===typeof d)(this||Uh).children.unshift(d);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+d);return this||Uh};Km.prototype.walk=function(d){for(var k,
e=0,h=(this||Uh).children.length;e<h;e++)k=(this||Uh).children[e],k.$$$isSourceNode$$$?k.walk(d):""!==k&&d(k,{source:(this||Uh).source,line:(this||Uh).line,column:(this||Uh).column,name:(this||Uh).name})};Km.prototype.join=function(d){var k,e=(this||Uh).children.length;if(0<e){var h=[];for(k=0;k<e-1;k++)h.push((this||Uh).children[k]),h.push(d);h.push((this||Uh).children[k]);(this||Uh).children=h}return this||Uh};Km.prototype.replaceRight=function(d,k){var e=(this||Uh).children[(this||Uh).children.length-
1];e.$$$isSourceNode$$$?e.replaceRight(d,k):"string"===typeof e?(this||Uh).children[(this||Uh).children.length-1]=e.replace(d,k):(this||Uh).children.push("".replace(d,k));return this||Uh};Km.prototype.setSourceContent=function(d,k){(this||Uh).sourceContents[oI.toSetString(d)]=k};Km.prototype.walkSourceContents=function(d){for(var k=0,e=(this||Uh).children.length;k<e;k++)(this||Uh).children[k].$$$isSourceNode$$$&&(this||Uh).children[k].walkSourceContents(d);var h=Object.keys((this||Uh).sourceContents);
k=0;for(e=h.length;k<e;k++)d(oI.fromSetString(h[k]),(this||Uh).sourceContents[h[k]])};Km.prototype.toString=function(){var d="";this.walk(function(k){d+=k});return d};Km.prototype.toStringWithSourceMap=function(d){var k="",e=1,h=0,n=new lm(d),b=!1,c=null,l=null,a=null,f=null;this.walk(function(m,q){k+=m;null!==q.source&&null!==q.line&&null!==q.column?(c===q.source&&l===q.line&&a===q.column&&f===q.name||n.addMapping({source:q.source,original:{line:q.line,column:q.column},generated:{line:e,column:h},
name:q.name}),c=q.source,l=q.line,a=q.column,f=q.name,b=!0):b&&(n.addMapping({generated:{line:e,column:h}}),c=null,b=!1);for(var r=0,u=m.length;r<u;r++)10===m.charCodeAt(r)?(e++,h=0,r+1===u?(c=null,b=!1):b&&n.addMapping({source:q.source,original:{line:q.line,column:q.column},generated:{line:e,column:h},name:q.name})):h++});this.walkSourceContents(function(m,q){n.setSourceContent(m,q)});return{code:k,map:n}};var zl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,en=
{};(function(){function d(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function k(S,
da){var ea="";for(da|=0;0<da;da>>>=1,S+=S)da&1&&(ea+=S);return ea}function e(S){var da=S.length;return da&&R.code.isLineTerminator(S.charCodeAt(da-1))}function h(S,da){for(var ea in da)da.hasOwnProperty(ea)&&(S[ea]=da[ea]);return S}function n(S,da){function ea(vc){return"object"===typeof vc&&vc instanceof Object&&!(vc instanceof RegExp)}var Pa;for(Pa in da)if(da.hasOwnProperty(Pa)){var kb=da[Pa];ea(kb)?ea(S[Pa])?n(S[Pa],kb):S[Pa]=n({},kb):S[Pa]=kb}return S}function b(S,da){return 8232===(S&-2)?(da?
"u":"\\u")+(8232===S?"2028":"2029"):10===S||13===S?(da?"":"\\")+(10===S?"n":"r"):String.fromCharCode(S)}function c(S,da){if(8===S)return"\\b";if(12===S)return"\\f";if(9===S)return"\\t";var ea=S.toString(16).toUpperCase();return D||255<S?"\\u"+"0000".slice(ea.length)+ea:0!==S||R.code.isDecimalDigit(da)?11===S?"\\x0B":"\\x"+"00".slice(ea.length)+ea:"\\0"}function l(S){if(92===S)return"\\\\";if(10===S)return"\\n";if(13===S)return"\\r";if(8232===S)return"\\u2028";if(8233===S)return"\\u2029";throw Error("Incorrectly classified character");
}function a(S){var da,ea="";var Pa=0;for(da=S.length;Pa<da;++Pa){var kb=S[Pa];ea+=Array.isArray(kb)?a(kb):kb}return ea}function f(S,da){if(!ua)return Array.isArray(S)?a(S):S;if(null==da){if(S instanceof W)return S;da={}}return null==da.loc?new W(null,null,ua,S,da.name||null):new W(da.loc.start.line,da.loc.start.column,!0===ua?da.loc.source||null:ua,S,da.name||null)}function m(){return ha?ha:" "}function q(S,da){var ea=f(S).toString();if(0===ea.length)return[da];var Pa=f(da).toString();if(0===Pa.length)return[S];
ea=ea.charCodeAt(ea.length-1);Pa=Pa.charCodeAt(0);return(43===ea||45===ea)&&ea===Pa||R.code.isIdentifierPartES5(ea)&&R.code.isIdentifierPartES5(Pa)||47===ea&&105===Pa?[S,m(),da]:R.code.isWhiteSpace(ea)||R.code.isLineTerminator(ea)||R.code.isWhiteSpace(Pa)||R.code.isLineTerminator(Pa)?[S,da]:[S,ha,da]}function r(S){var da=la;la+=wa;S(la);la=da}function u(S,da){if("Line"===S.type){if(e(S.value))return"//"+S.value;da="//"+S.value;M||(da+="\n");return da}if(qa.format.indent.adjustMultilineComment&&/[\n\r]/.test(S.value)){var ea,
Pa;S=("/*"+S.value+"*/").split(/\r\n|[\r\n]/);var kb=Number.MAX_VALUE;var vc=1;for(ea=S.length;vc<ea;++vc){var mc=S[vc];for(Pa=0;Pa<mc.length&&R.code.isWhiteSpace(mc.charCodeAt(Pa));)++Pa;kb>Pa&&(kb=Pa)}"undefined"!==typeof da?(mc=la,"*"===S[1][kb]&&(da+=" "),la=da):(kb&1&&--kb,mc=la);vc=1;for(ea=S.length;vc<ea;++vc)da=f([la,S[vc].slice(kb)]),S[vc]=ua?da.join(""):da;la=mc;return S.join("\n")}return"/*"+S.value+"*/"}function v(S,da){var ea;if(S.leadingComments&&0<S.leadingComments.length){var Pa=da;
if(M){var kb=S.leadingComments[0];da=[];var vc=kb.extendedRange;var mc=kb.range;var Yb=H.substring(vc[0],mc[0]);var ud=(Yb.match(/\n/g)||[]).length;0<ud?(da.push(k("\n",ud)),da.push([la,u(kb)])):(da.push(Yb),da.push(u(kb)));ud=mc;Yb=1;for(ea=S.leadingComments.length;Yb<ea;Yb++)kb=S.leadingComments[Yb],mc=kb.range,ud=H.substring(ud[1],mc[0]),ud=(ud.match(/\n/g)||[]).length,da.push(k("\n",ud)),da.push([la,u(kb)]),ud=mc;Yb=H.substring(mc[1],vc[1]);ud=(Yb.match(/\n/g)||[]).length;da.push(k("\n",ud))}else for(kb=
S.leadingComments[0],da=[],oa&&S.type===ca.Program&&0===S.body.length&&da.push("\n"),da.push(u(kb)),e(f(da).toString())||da.push("\n"),Yb=1,ea=S.leadingComments.length;Yb<ea;++Yb)kb=S.leadingComments[Yb],kb=[u(kb)],e(f(kb).toString())||kb.push("\n"),da.push([la,kb]);da.push([la,Pa])}if(S.trailingComments)if(M)kb=S.trailingComments[0],vc=kb.extendedRange,mc=kb.range,Yb=H.substring(vc[0],mc[0]),ud=(Yb.match(/\n/g)||[]).length,0<ud?(da.push(k("\n",ud)),da.push([la,u(kb)])):(da.push(Yb),da.push(u(kb)));
else{Pa=!e(f(da).toString());Yb=f([la,da,wa]).toString();for(ea=Yb.length-1;0<=ea&&!R.code.isLineTerminator(Yb.charCodeAt(ea));--ea);vc=k(" ",Yb.length-1-ea);Yb=0;for(ea=S.trailingComments.length;Yb<ea;++Yb)kb=S.trailingComments[Yb],Pa?(da=0===Yb?[da,wa]:[da,vc],da.push(u(kb,vc))):da=[da,[la,u(kb)]],Yb===ea-1||e(f(da).toString())||(da=[da,"\n"])}return da}function y(S,da,ea){for(var Pa=0;S<da;S++)"\n"===H[S]&&Pa++;for(S=1;S<Pa;S++)ea.push(X)}function z(S,da,ea){return da<ea?["(",S,")"]:S}function A(S){var da;
var ea=S.split(/\r\n|\n/);S=1;for(da=ea.length;S<da;S++)ea[S]=X+la+ea[S];return ea}function C(){}function G(S){return f(S.name,S)}function F(S,da){return S.async?"async"+(da?m():ha):""}function N(S){return S.generator&&!qa.moz.starlessGenerator?"*"+ha:""}function L(S){var da=S.value,ea="";da.async&&(ea+=F(da,!S.computed));da.generator&&(ea+=N(da)?"*":"");return ea}var W,la,wa,D,Q,J,O,ja,X,ha,bb,pb,oa,ba,qa,Ga,ua,H,M;var R=DD;var ca=fP.Syntax;var Z={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,
LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,OptionalChaining:16,Call:17,New:18,TaggedTemplate:19,Member:20,Primary:21};var Aa={"||":Z.LogicalOR,"&&":Z.LogicalAND,"|":Z.BitwiseOR,"^":Z.BitwiseXOR,"&":Z.BitwiseAND,"==":Z.Equality,"!=":Z.Equality,"===":Z.Equality,"!==":Z.Equality,is:Z.Equality,isnt:Z.Equality,"<":Z.Relational,">":Z.Relational,"<=":Z.Relational,">=":Z.Relational,
"in":Z.Relational,"instanceof":Z.Relational,"<<":Z.BitwiseSHIFT,">>":Z.BitwiseSHIFT,">>>":Z.BitwiseSHIFT,"+":Z.Additive,"-":Z.Additive,"*":Z.Multiplicative,"%":Z.Multiplicative,"/":Z.Multiplicative,"**":Z.Exponentiation};C.prototype.maybeBlock=function(S,da){var ea,Pa=this||zl;var kb=!qa.comment||!S.leadingComments;if(S.type===ca.BlockStatement&&kb)return[ha,this.generateStatement(S,da)];if(S.type===ca.EmptyStatement&&kb)return";";r(function(){ea=[X,[la,Pa.generateStatement(S,da)]]});return ea};C.prototype.maybeBlockSuffix=
function(S,da){var ea=e(f(da).toString());return S.type!==ca.BlockStatement||qa.comment&&S.leadingComments||ea?ea?[da,la]:[da,X,la]:[da,ha]};C.prototype.generatePattern=function(S,da,ea){return S.type===ca.Identifier?G(S):this.generateExpression(S,da,ea)};C.prototype.generateFunctionParams=function(S){var da;var ea=!1;if(S.type!==ca.ArrowFunctionExpression||S.rest||S.defaults&&0!==S.defaults.length||1!==S.params.length||S.params[0].type!==ca.Identifier){var Pa=S.type===ca.ArrowFunctionExpression?
[F(S,!1)]:[];Pa.push("(");S.defaults&&(ea=!0);var kb=0;for(da=S.params.length;kb<da;++kb)ea&&S.defaults[kb]?Pa.push(this.generateAssignment(S.params[kb],S.defaults[kb],"=",Z.Assignment,7)):Pa.push(this.generatePattern(S.params[kb],Z.Assignment,7)),kb+1<da&&Pa.push(","+ha);S.rest&&(S.params.length&&Pa.push(","+ha),Pa.push("..."),Pa.push(G(S.rest)));Pa.push(")")}else Pa=[F(S,!0),G(S.params[0])];return Pa};C.prototype.generateFunctionBody=function(S){var da=this.generateFunctionParams(S);S.type===ca.ArrowFunctionExpression&&
(da.push(ha),da.push("=>"));S.expression?(da.push(ha),S=this.generateExpression(S.body,Z.Assignment,7),"{"===S.toString().charAt(0)&&(S=["(",S,")"]),da.push(S)):da.push(this.maybeBlock(S.body,9));return da};C.prototype.generateIterationForStatement=function(S,da,ea){var Pa=["for"+(da.await?m()+"await":"")+ha+"("],kb=this||zl;r(function(){da.left.type===ca.VariableDeclaration?r(function(){Pa.push(da.left.kind+m());Pa.push(kb.generateStatement(da.left.declarations[0],0))}):Pa.push(kb.generateExpression(da.left,
Z.Call,7));Pa=q(Pa,S);Pa=[q(Pa,kb.generateExpression(da.right,Z.Assignment,7)),")"]});Pa.push(this.maybeBlock(da.body,ea));return Pa};C.prototype.generatePropertyKey=function(S,da){var ea=[];da&&ea.push("[");ea.push(this.generateExpression(S,Z.Assignment,7));da&&ea.push("]");return ea};C.prototype.generateAssignment=function(S,da,ea,Pa,kb){Z.Assignment<Pa&&(kb|=1);return z([this.generateExpression(S,Z.Call,kb),ha+ea+ha,this.generateExpression(da,Z.Assignment,kb)],Z.Assignment,Pa)};C.prototype.semicolon=
function(S){return!pb&&S&32?"":";"};C.Statement={BlockStatement:function(S,da){var ea,Pa,kb=["{",X],vc=this||zl;r(function(){0===S.body.length&&M&&(ea=S.range,2<ea[1]-ea[0]&&(Pa=H.substring(ea[0]+1,ea[1]-1),"\n"===Pa[0]&&(kb=["{"]),kb.push(Pa)));var mc;var Yb=1;da&8&&(Yb|=16);var ud=0;for(mc=S.body.length;ud<mc;++ud){M&&(0===ud&&(S.body[0].leadingComments&&(ea=S.body[0].leadingComments[0].extendedRange,Pa=H.substring(ea[0],ea[1]),"\n"===Pa[0]&&(kb=["{"])),S.body[0].leadingComments||y(S.range[0],S.body[0].range[0],
kb)),0<ud&&(S.body[ud-1].trailingComments||S.body[ud].leadingComments||y(S.body[ud-1].range[1],S.body[ud].range[0],kb)));ud===mc-1&&(Yb|=32);var id=S.body[ud].leadingComments&&M?vc.generateStatement(S.body[ud],Yb):[la,vc.generateStatement(S.body[ud],Yb)];kb.push(id);e(f(id).toString())||(M&&ud<mc-1?S.body[ud+1].leadingComments||kb.push(X):kb.push(X));M&&ud===mc-1&&(S.body[ud].trailingComments||y(S.body[ud].range[1],S.range[1],kb))}});kb.push([la,"}"]);return kb},BreakStatement:function(S,da){return S.label?
"break "+S.label.name+this.semicolon(da):"break"+this.semicolon(da)},ContinueStatement:function(S,da){return S.label?"continue "+S.label.name+this.semicolon(da):"continue"+this.semicolon(da)},ClassBody:function(S,da){var ea=["{",X],Pa=this||zl;r(function(kb){var vc;var mc=0;for(vc=S.body.length;mc<vc;++mc)ea.push(kb),ea.push(Pa.generateExpression(S.body[mc],Z.Sequence,7)),mc+1<vc&&ea.push(X)});e(f(ea).toString())||ea.push(X);ea.push(la);ea.push("}");return ea},ClassDeclaration:function(S,da){da=["class"];
S.id&&(da=q(da,this.generateExpression(S.id,Z.Sequence,7)));if(S.superClass){var ea=q("extends",this.generateExpression(S.superClass,Z.Unary,7));da=q(da,ea)}da.push(ha);da.push(this.generateStatement(S.body,33));return da},DirectiveStatement:function(S,da){if(qa.raw&&S.raw)return S.raw+this.semicolon(da);S=S.directive;var ea;var Pa="double"===O?'"':"'";var kb=0;for(ea=S.length;kb<ea;++kb){var vc=S.charCodeAt(kb);if(39===vc){Pa='"';break}else if(34===vc){Pa="'";break}else 92===vc&&++kb}return Pa+S+
Pa+this.semicolon(da)},DoWhileStatement:function(S,da){var ea=q("do",this.maybeBlock(S.body,1));ea=this.maybeBlockSuffix(S.body,ea);return q(ea,["while"+ha+"(",this.generateExpression(S.test,Z.Sequence,7),")"+this.semicolon(da)])},CatchClause:function(S,da){var ea,Pa=this||zl;r(function(){if(S.param){if(ea=["catch"+ha+"(",Pa.generateExpression(S.param,Z.Sequence,7),")"],S.guard){var kb=Pa.generateExpression(S.guard,Z.Sequence,7);ea.splice(2,0," if ",kb)}}else ea=["catch"]});ea.push(this.maybeBlock(S.body,
1));return ea},DebuggerStatement:function(S,da){return"debugger"+this.semicolon(da)},EmptyStatement:function(S,da){return";"},ExportDefaultDeclaration:function(S,da){var ea=["export"];var Pa=da&32?33:1;ea=q(ea,"default");return ea=C.Statement.hasOwnProperty(S.declaration.type)?q(ea,this.generateStatement(S.declaration,Pa)):q(ea,this.generateExpression(S.declaration,Z.Assignment,7)+this.semicolon(da))},ExportNamedDeclaration:function(S,da){var ea=["export"],Pa=this||zl;var kb=da&32?33:1;if(S.declaration)return q(ea,
this.generateStatement(S.declaration,kb));S.specifiers&&(0===S.specifiers.length?ea=q(ea,"{"+ha+"}"):S.specifiers[0].type===ca.ExportBatchSpecifier?ea=q(ea,this.generateExpression(S.specifiers[0],Z.Sequence,7)):(ea=q(ea,"{"),r(function(vc){var mc;ea.push(X);var Yb=0;for(mc=S.specifiers.length;Yb<mc;++Yb)ea.push(vc),ea.push(Pa.generateExpression(S.specifiers[Yb],Z.Sequence,7)),Yb+1<mc&&ea.push(","+X)}),e(f(ea).toString())||ea.push(X),ea.push(la+"}")),S.source?ea=q(ea,["from"+ha,this.generateExpression(S.source,
Z.Sequence,7),this.semicolon(da)]):ea.push(this.semicolon(da)));return ea},ExportAllDeclaration:function(S,da){return["export"+ha,"*"+ha,"from"+ha,this.generateExpression(S.source,Z.Sequence,7),this.semicolon(da)]},ExpressionStatement:function(S,da){function ea(Yb){if("class"!==Yb.slice(0,5))return!1;Yb=Yb.charCodeAt(5);return 123===Yb||R.code.isWhiteSpace(Yb)||R.code.isLineTerminator(Yb)}function Pa(Yb){if("function"!==Yb.slice(0,8))return!1;Yb=Yb.charCodeAt(8);return 40===Yb||R.code.isWhiteSpace(Yb)||
42===Yb||R.code.isLineTerminator(Yb)}function kb(Yb){var ud;if("async"!==Yb.slice(0,5)||!R.code.isWhiteSpace(Yb.charCodeAt(5)))return!1;var id=6;for(ud=Yb.length;id<ud&&R.code.isWhiteSpace(Yb.charCodeAt(id));++id);if(id===ud||"function"!==Yb.slice(id,id+8))return!1;Yb=Yb.charCodeAt(id+8);return 40===Yb||R.code.isWhiteSpace(Yb)||42===Yb||R.code.isLineTerminator(Yb)}var vc=[this.generateExpression(S.expression,Z.Sequence,7)];var mc=f(vc).toString();123===mc.charCodeAt(0)||ea(mc)||Pa(mc)||kb(mc)||ba&&
da&16&&S.expression.type===ca.Literal&&"string"===typeof S.expression.value?vc=["(",vc,")"+this.semicolon(da)]:vc.push(this.semicolon(da));return vc},ImportDeclaration:function(S,da){var ea=this||zl;if(0===S.specifiers.length)return["import",ha,this.generateExpression(S.source,Z.Sequence,7),this.semicolon(da)];var Pa=["import"];var kb=0;S.specifiers[kb].type===ca.ImportDefaultSpecifier&&(Pa=q(Pa,[this.generateExpression(S.specifiers[kb],Z.Sequence,7)]),++kb);S.specifiers[kb]&&(0!==kb&&Pa.push(","),
S.specifiers[kb].type===ca.ImportNamespaceSpecifier?Pa=q(Pa,[ha,this.generateExpression(S.specifiers[kb],Z.Sequence,7)]):(Pa.push(ha+"{"),1===S.specifiers.length-kb?(Pa.push(ha),Pa.push(this.generateExpression(S.specifiers[kb],Z.Sequence,7)),Pa.push(ha+"}"+ha)):(r(function(vc){var mc;Pa.push(X);var Yb=kb;for(mc=S.specifiers.length;Yb<mc;++Yb)Pa.push(vc),Pa.push(ea.generateExpression(S.specifiers[Yb],Z.Sequence,7)),Yb+1<mc&&Pa.push(","+X)}),e(f(Pa).toString())||Pa.push(X),Pa.push(la+"}"+ha))));return Pa=
q(Pa,["from"+ha,this.generateExpression(S.source,Z.Sequence,7),this.semicolon(da)])},VariableDeclarator:function(S,da){da=da&1?7:6;return S.init?[this.generateExpression(S.id,Z.Assignment,da),ha,"=",ha,this.generateExpression(S.init,Z.Assignment,da)]:this.generatePattern(S.id,Z.Assignment,da)},VariableDeclaration:function(S,da){function ea(){vc=S.declarations[0];qa.comment&&vc.leadingComments?(Yb.push("\n"),Yb.push([la,mc.generateStatement(vc,ud)])):(Yb.push(m()),Yb.push(mc.generateStatement(vc,ud)));
Pa=1;for(kb=S.declarations.length;Pa<kb;++Pa)vc=S.declarations[Pa],qa.comment&&vc.leadingComments?(Yb.push(","+X),Yb.push([la,mc.generateStatement(vc,ud)])):(Yb.push(","+ha),Yb.push(mc.generateStatement(vc,ud)))}var Pa,kb,vc,mc=this||zl;var Yb=[S.kind];var ud=da&1?1:0;1<S.declarations.length?r(ea):ea();Yb.push(this.semicolon(da));return Yb},ThrowStatement:function(S,da){return[q("throw",this.generateExpression(S.argument,Z.Sequence,7)),this.semicolon(da)]},TryStatement:function(S,da){var ea;da=["try",
this.maybeBlock(S.block,1)];da=this.maybeBlockSuffix(S.block,da);if(S.handlers){var Pa=0;for(ea=S.handlers.length;Pa<ea;++Pa)if(da=q(da,this.generateStatement(S.handlers[Pa],1)),S.finalizer||Pa+1!==ea)da=this.maybeBlockSuffix(S.handlers[Pa].body,da)}else{var kb=S.guardedHandlers||[];Pa=0;for(ea=kb.length;Pa<ea;++Pa)if(da=q(da,this.generateStatement(kb[Pa],1)),S.finalizer||Pa+1!==ea)da=this.maybeBlockSuffix(kb[Pa].body,da);if(S.handler)if(Array.isArray(S.handler))for(Pa=0,ea=S.handler.length;Pa<ea;++Pa){if(da=
q(da,this.generateStatement(S.handler[Pa],1)),S.finalizer||Pa+1!==ea)da=this.maybeBlockSuffix(S.handler[Pa].body,da)}else da=q(da,this.generateStatement(S.handler,1)),S.finalizer&&(da=this.maybeBlockSuffix(S.handler.body,da))}S.finalizer&&(da=q(da,["finally",this.maybeBlock(S.finalizer,1)]));return da},SwitchStatement:function(S,da){var ea,Pa,kb=this||zl;r(function(){ea=["switch"+ha+"(",kb.generateExpression(S.discriminant,Z.Sequence,7),")"+ha+"{"+X]});if(S.cases){var vc=1;var mc=0;for(Pa=S.cases.length;mc<
Pa;++mc)mc===Pa-1&&(vc|=32),da=[la,this.generateStatement(S.cases[mc],vc)],ea.push(da),e(f(da).toString())||ea.push(X)}ea.push([la,"}"]);return ea},SwitchCase:function(S,da){var ea,Pa,kb,vc,mc,Yb=this||zl;r(function(){ea=S.test?[q("case",Yb.generateExpression(S.test,Z.Sequence,7)),":"]:["default:"];kb=0;(vc=S.consequent.length)&&S.consequent[0].type===ca.BlockStatement&&(Pa=Yb.maybeBlock(S.consequent[0],1),ea.push(Pa),kb=1);kb===vc||e(f(ea).toString())||ea.push(X);for(mc=1;kb<vc;++kb)kb===vc-1&&da&
32&&(mc|=32),Pa=[la,Yb.generateStatement(S.consequent[kb],mc)],ea.push(Pa),kb+1===vc||e(f(Pa).toString())||ea.push(X)});return ea},IfStatement:function(S,da){var ea=this||zl;r(function(){kb=["if"+ha+"(",ea.generateExpression(S.test,Z.Sequence,7),")"]});var Pa=1;da&32&&(Pa|=32);if(S.alternate){kb.push(this.maybeBlock(S.consequent,1));var kb=this.maybeBlockSuffix(S.consequent,kb);kb=S.alternate.type===ca.IfStatement?q(kb,["else ",this.generateStatement(S.alternate,Pa)]):q(kb,q("else",this.maybeBlock(S.alternate,
Pa)))}else kb.push(this.maybeBlock(S.consequent,Pa));return kb},ForStatement:function(S,da){var ea,Pa=this||zl;r(function(){ea=["for"+ha+"("];S.init?S.init.type===ca.VariableDeclaration?ea.push(Pa.generateStatement(S.init,0)):(ea.push(Pa.generateExpression(S.init,Z.Sequence,6)),ea.push(";")):ea.push(";");S.test&&(ea.push(ha),ea.push(Pa.generateExpression(S.test,Z.Sequence,7)));ea.push(";");S.update&&(ea.push(ha),ea.push(Pa.generateExpression(S.update,Z.Sequence,7)));ea.push(")")});ea.push(this.maybeBlock(S.body,
da&32?33:1));return ea},ForInStatement:function(S,da){return this.generateIterationForStatement("in",S,da&32?33:1)},ForOfStatement:function(S,da){return this.generateIterationForStatement("of",S,da&32?33:1)},LabeledStatement:function(S,da){return[S.label.name+":",this.maybeBlock(S.body,da&32?33:1)]},Program:function(S,da){var ea;var Pa=S.body.length;da=[oa&&0<Pa?"\n":""];var kb=17;for(ea=0;ea<Pa;++ea){oa||ea!==Pa-1||(kb|=32);M&&(0===ea&&(S.body[0].leadingComments||y(S.range[0],S.body[ea].range[0],
da)),0<ea&&(S.body[ea-1].trailingComments||S.body[ea].leadingComments||y(S.body[ea-1].range[1],S.body[ea].range[0],da)));var vc=[la,this.generateStatement(S.body[ea],kb)];da.push(vc);ea+1<Pa&&!e(f(vc).toString())&&(M?S.body[ea+1].leadingComments||da.push(X):da.push(X));M&&ea===Pa-1&&(S.body[ea].trailingComments||y(S.body[ea].range[1],S.range[1],da))}return da},FunctionDeclaration:function(S,da){return[F(S,!0),"function",N(S)||m(),S.id?G(S.id):"",this.generateFunctionBody(S)]},ReturnStatement:function(S,
da){return S.argument?[q("return",this.generateExpression(S.argument,Z.Sequence,7)),this.semicolon(da)]:["return"+this.semicolon(da)]},WhileStatement:function(S,da){var ea,Pa=this||zl;r(function(){ea=["while"+ha+"(",Pa.generateExpression(S.test,Z.Sequence,7),")"]});ea.push(this.maybeBlock(S.body,da&32?33:1));return ea},WithStatement:function(S,da){var ea,Pa=this||zl;r(function(){ea=["with"+ha+"(",Pa.generateExpression(S.object,Z.Sequence,7),")"]});ea.push(this.maybeBlock(S.body,da&32?33:1));return ea}};
h(C.prototype,C.Statement);C.Expression={SequenceExpression:function(S,da,ea){var Pa;Z.Sequence<da&&(ea|=1);var kb=[];var vc=0;for(Pa=S.expressions.length;vc<Pa;++vc)kb.push(this.generateExpression(S.expressions[vc],Z.Assignment,ea)),vc+1<Pa&&kb.push(","+ha);return z(kb,Z.Sequence,da)},AssignmentExpression:function(S,da,ea){return this.generateAssignment(S.left,S.right,S.operator,da,ea)},ArrowFunctionExpression:function(S,da,ea){return z(this.generateFunctionBody(S),Z.ArrowFunction,da)},ConditionalExpression:function(S,
da,ea){Z.Conditional<da&&(ea|=1);return z([this.generateExpression(S.test,Z.LogicalOR,ea),ha+"?"+ha,this.generateExpression(S.consequent,Z.Assignment,ea),ha+":"+ha,this.generateExpression(S.alternate,Z.Assignment,ea)],Z.Conditional,da)},LogicalExpression:function(S,da,ea){return this.BinaryExpression(S,da,ea)},BinaryExpression:function(S,da,ea){var Pa=Aa[S.operator];var kb="**"===S.operator?Z.Postfix:Pa;var vc="**"===S.operator?Pa:Pa+1;Pa<da&&(ea|=1);kb=this.generateExpression(S.left,kb,ea);var mc=
kb.toString();mc=47===mc.charCodeAt(mc.length-1)&&R.code.isIdentifierPartES5(S.operator.charCodeAt(0))?[kb,m(),S.operator]:q(kb,S.operator);kb=this.generateExpression(S.right,vc,ea);"/"===S.operator&&"/"===kb.toString().charAt(0)||"<"===S.operator.slice(-1)&&"!--"===kb.toString().slice(0,3)?(mc.push(m()),mc.push(kb)):mc=q(mc,kb);return"in"!==S.operator||ea&1?z(mc,Pa,da):["(",mc,")"]},CallExpression:function(S,da,ea){var Pa;var kb=[this.generateExpression(S.callee,Z.Call,3)];S.optional&&kb.push("?.");
kb.push("(");var vc=0;for(Pa=S.arguments.length;vc<Pa;++vc)kb.push(this.generateExpression(S.arguments[vc],Z.Assignment,7)),vc+1<Pa&&kb.push(","+ha);kb.push(")");return ea&2?z(kb,Z.Call,da):["(",kb,")"]},ChainExpression:function(S,da,ea){Z.OptionalChaining<da&&(ea|=2);S=this.generateExpression(S.expression,Z.OptionalChaining,ea);return z(S,Z.OptionalChaining,da)},NewExpression:function(S,da,ea){var Pa=S.arguments.length;var kb=q("new",this.generateExpression(S.callee,Z.New,ea&4&&!bb&&0===Pa?5:1));
if(!(ea&4)||bb||0<Pa){kb.push("(");for(ea=0;ea<Pa;++ea)kb.push(this.generateExpression(S.arguments[ea],Z.Assignment,7)),ea+1<Pa&&kb.push(","+ha);kb.push(")")}return z(kb,Z.New,da)},MemberExpression:function(S,da,ea){var Pa=[this.generateExpression(S.object,Z.Call,ea&2?3:1)];S.computed?(S.optional&&Pa.push("?."),Pa.push("["),Pa.push(this.generateExpression(S.property,Z.Sequence,ea&2?7:5)),Pa.push("]")):(S.optional||S.object.type!==ca.Literal||"number"!==typeof S.object.value||(ea=f(Pa).toString(),
0>ea.indexOf(".")&&!/[eExX]/.test(ea)&&R.code.isDecimalDigit(ea.charCodeAt(ea.length-1))&&!(2<=ea.length&&48===ea.charCodeAt(0))&&Pa.push(" ")),Pa.push(S.optional?"?.":"."),Pa.push(G(S.property)));return z(Pa,Z.Member,da)},MetaProperty:function(S,da,ea){ea=[];ea.push("string"===typeof S.meta?S.meta:G(S.meta));ea.push(".");ea.push("string"===typeof S.property?S.property:G(S.property));return z(ea,Z.Member,da)},UnaryExpression:function(S,da,ea){var Pa=this.generateExpression(S.argument,Z.Unary,7);if(""===
ha)ea=q(S.operator,Pa);else if(ea=[S.operator],2<S.operator.length)ea=q(ea,Pa);else{S=f(ea).toString();var kb=S.charCodeAt(S.length-1);S=Pa.toString().charCodeAt(0);((43===kb||45===kb)&&kb===S||R.code.isIdentifierPartES5(kb)&&R.code.isIdentifierPartES5(S))&&ea.push(m());ea.push(Pa)}return z(ea,Z.Unary,da)},YieldExpression:function(S,da,ea){ea=S.delegate?"yield*":"yield";S.argument&&(ea=q(ea,this.generateExpression(S.argument,Z.Yield,7)));return z(ea,Z.Yield,da)},AwaitExpression:function(S,da,ea){S=
q(S.all?"await*":"await",this.generateExpression(S.argument,Z.Await,7));return z(S,Z.Await,da)},UpdateExpression:function(S,da,ea){return S.prefix?z([S.operator,this.generateExpression(S.argument,Z.Unary,7)],Z.Unary,da):z([this.generateExpression(S.argument,Z.Postfix,7),S.operator],Z.Postfix,da)},FunctionExpression:function(S,da,ea){da=[F(S,!0),"function"];S.id?(da.push(N(S)||m()),da.push(G(S.id))):da.push(N(S)||ha);da.push(this.generateFunctionBody(S));return da},ArrayPattern:function(S,da,ea){return this.ArrayExpression(S,
da,ea,!0)},ArrayExpression:function(S,da,ea,Pa){var kb=this||zl;if(!S.elements.length)return"[]";var vc=Pa?!1:1<S.elements.length;var mc=["[",vc?X:""];r(function(Yb){var ud;var id=0;for(ud=S.elements.length;id<ud;++id)S.elements[id]?(mc.push(vc?Yb:""),mc.push(kb.generateExpression(S.elements[id],Z.Assignment,7))):(vc&&mc.push(Yb),id+1===ud&&mc.push(",")),id+1<ud&&mc.push(","+(vc?X:ha))});vc&&!e(f(mc).toString())&&mc.push(X);mc.push(vc?la:"");mc.push("]");return mc},RestElement:function(S,da,ea){return"..."+
this.generatePattern(S.argument)},ClassExpression:function(S,da,ea){da=["class"];S.id&&(da=q(da,this.generateExpression(S.id,Z.Sequence,7)));S.superClass&&(ea=q("extends",this.generateExpression(S.superClass,Z.Unary,7)),da=q(da,ea));da.push(ha);da.push(this.generateStatement(S.body,33));return da},MethodDefinition:function(S,da,ea){da=S["static"]?["static"+ha]:[];S="get"===S.kind||"set"===S.kind?[q(S.kind,this.generatePropertyKey(S.key,S.computed)),this.generateFunctionBody(S.value)]:[L(S),this.generatePropertyKey(S.key,
S.computed),this.generateFunctionBody(S.value)];return q(da,S)},Property:function(S,da,ea){return"get"===S.kind||"set"===S.kind?[S.kind,m(),this.generatePropertyKey(S.key,S.computed),this.generateFunctionBody(S.value)]:S.shorthand?"AssignmentPattern"===S.value.type?this.AssignmentPattern(S.value,Z.Sequence,7):this.generatePropertyKey(S.key,S.computed):S.method?[L(S),this.generatePropertyKey(S.key,S.computed),this.generateFunctionBody(S.value)]:[this.generatePropertyKey(S.key,S.computed),":"+ha,this.generateExpression(S.value,
Z.Assignment,7)]},ObjectExpression:function(S,da,ea){var Pa,kb,vc=this||zl;if(!S.properties.length)return"{}";var mc=1<S.properties.length;r(function(){kb=vc.generateExpression(S.properties[0],Z.Sequence,7)});if(!mc&&!/[\r\n]/g.test(f(kb).toString()))return["{",ha,kb,ha,"}"];r(function(Yb){var ud;Pa=["{",X,Yb,kb];if(mc){Pa.push(","+X);var id=1;for(ud=S.properties.length;id<ud;++id)Pa.push(Yb),Pa.push(vc.generateExpression(S.properties[id],Z.Sequence,7)),id+1<ud&&Pa.push(","+X)}});e(f(Pa).toString())||
Pa.push(X);Pa.push(la);Pa.push("}");return Pa},AssignmentPattern:function(S,da,ea){return this.generateAssignment(S.left,S.right,"=",da,ea)},ObjectPattern:function(S,da,ea){var Pa=this||zl;if(!S.properties.length)return"{}";var kb=!1;if(1===S.properties.length){var vc=S.properties[0];vc.type===ca.Property&&vc.value.type!==ca.Identifier&&(kb=!0)}else for(da=0,ea=S.properties.length;da<ea;++da)if(vc=S.properties[da],vc.type===ca.Property&&!vc.shorthand){kb=!0;break}var mc=["{",kb?X:""];r(function(Yb){var ud;
var id=0;for(ud=S.properties.length;id<ud;++id)mc.push(kb?Yb:""),mc.push(Pa.generateExpression(S.properties[id],Z.Sequence,7)),id+1<ud&&mc.push(","+(kb?X:ha))});kb&&!e(f(mc).toString())&&mc.push(X);mc.push(kb?la:"");mc.push("}");return mc},ThisExpression:function(S,da,ea){return"this"},Super:function(S,da,ea){return"super"},Identifier:function(S,da,ea){return G(S)},ImportDefaultSpecifier:function(S,da,ea){return G(S.id||S.local)},ImportNamespaceSpecifier:function(S,da,ea){da=["*"];(S=S.id||S.local)&&
da.push(ha+"as"+m()+G(S));return da},ImportSpecifier:function(S,da,ea){da=S.imported;ea=[da.name];(S=S.local)&&S.name!==da.name&&ea.push(m()+"as"+m()+G(S));return ea},ExportSpecifier:function(S,da,ea){da=S.local;ea=[da.name];(S=S.exported)&&S.name!==da.name&&ea.push(m()+"as"+m()+G(S));return ea},Literal:function(S,da,ea){if(S.hasOwnProperty("raw")&&Ga&&qa.raw)try{var Pa=Ga(S.raw).body[0].expression;if(Pa.type===ca.Literal&&Pa.value===S.value)return S.raw}catch(id){}if(S.regex)return"/"+S.regex.pattern+
"/"+S.regex.flags;if(null===S.value)return"null";if("string"===typeof S.value){S=S.value;da="";var kb=0,vc=0,mc;ea=0;for(Pa=S.length;ea<Pa;++ea){var Yb=S.charCodeAt(ea);if(39===Yb)++kb;else if(34===Yb)++vc;else if(47===Yb&&D)da+="\\";else if(R.code.isLineTerminator(Yb)||92===Yb){da+=l(Yb);continue}else if(!R.code.isIdentifierPartES5(Yb)&&(D&&32>Yb||!D&&!ja&&(32>Yb||126<Yb))){da+=c(Yb,S.charCodeAt(ea+1));continue}da+=String.fromCharCode(Yb)}var ud=(mc=!("double"===O||"auto"===O&&vc<kb))?"'":'"';if(mc?
kb:vc){S=da;da=ud;ea=0;for(Pa=S.length;ea<Pa;++ea){Yb=S.charCodeAt(ea);if(39===Yb&&mc||34===Yb&&!mc)da+="\\";da+=String.fromCharCode(Yb)}S=da+ud}else S=ud+da+ud;return S}if("number"===typeof S.value){S=S.value;if(S!==S)throw Error("Numeric literal whose value is NaN");if(0>S||0===S&&0>1/S)throw Error("Numeric literal whose value is negative");if(S===1/0)S=D?"null":Q?"1e400":"1e+400";else{da=""+S;if(Q&&!(3>da.length)){ea=da.indexOf(".");D||48!==da.charCodeAt(0)||1!==ea||(ea=0,da=da.slice(1));Pa=da;
da=da.replace("e+","e");Yb=0;0<(kb=Pa.indexOf("e"))&&(Yb=+Pa.slice(kb+1),Pa=Pa.slice(0,kb));0<=ea&&(Yb-=Pa.length-ea-1,Pa=+(Pa.slice(0,ea)+Pa.slice(ea+1))+"");for(kb=0;48===Pa.charCodeAt(Pa.length+kb-1);)--kb;0!==kb&&(Yb-=kb,Pa=Pa.slice(0,kb));0!==Yb&&(Pa+="e"+Yb);(Pa.length<da.length||J&&1E12<S&&Math.floor(S)===S&&(Pa="0x"+S.toString(16)).length<da.length)&&+Pa===S&&(da=Pa)}S=da}return S}if("boolean"===typeof S.value)return S.value?"true":"false";S=S.value;da=S.toString();if(S.source)if(ea=da.match(/\/([^/]*)$/)){ea=
ea[1];da="";mc=vc=!1;Pa=0;for(Yb=S.source.length;Pa<Yb;++Pa)kb=S.source.charCodeAt(Pa),mc?(da+=b(kb,mc),mc=!1):(vc?93===kb&&(vc=!1):47===kb?da+="\\":91===kb&&(vc=!0),da+=b(kb,mc),mc=92===kb);S="/"+da+"/"+ea}else S=da;else S=da;return S},GeneratorExpression:function(S,da,ea){return this.ComprehensionExpression(S,da,ea)},ComprehensionExpression:function(S,da,ea){var Pa,kb,vc=this||zl;var mc=S.type===ca.GeneratorExpression?["("]:["["];if(qa.moz.comprehensionExpressionStartsWithAssignment){var Yb=this.generateExpression(S.body,
Z.Assignment,7);mc.push(Yb)}S.blocks&&r(function(){Pa=0;for(kb=S.blocks.length;Pa<kb;++Pa)Yb=vc.generateExpression(S.blocks[Pa],Z.Sequence,7),0<Pa||qa.moz.comprehensionExpressionStartsWithAssignment?mc=q(mc,Yb):mc.push(Yb)});S.filter&&(mc=q(mc,"if"+ha),Yb=this.generateExpression(S.filter,Z.Sequence,7),mc=q(mc,["(",Yb,")"]));qa.moz.comprehensionExpressionStartsWithAssignment||(Yb=this.generateExpression(S.body,Z.Assignment,7),mc=q(mc,Yb));mc.push(S.type===ca.GeneratorExpression?")":"]");return mc},
ComprehensionBlock:function(S,da,ea){da=S.left.type===ca.VariableDeclaration?[S.left.kind,m(),this.generateStatement(S.left.declarations[0],0)]:this.generateExpression(S.left,Z.Call,7);da=q(da,S.of?"of":"in");da=q(da,this.generateExpression(S.right,Z.Sequence,7));return["for"+ha+"(",da,")"]},SpreadElement:function(S,da,ea){return["...",this.generateExpression(S.argument,Z.Assignment,7)]},TaggedTemplateExpression:function(S,da,ea){var Pa=3;ea&2||(Pa=1);S=[this.generateExpression(S.tag,Z.Call,Pa),this.generateExpression(S.quasi,
Z.Primary,4)];return z(S,Z.TaggedTemplate,da)},TemplateElement:function(S,da,ea){return S.value.raw},TemplateLiteral:function(S,da,ea){var Pa;da=["`"];ea=0;for(Pa=S.quasis.length;ea<Pa;++ea)da.push(this.generateExpression(S.quasis[ea],Z.Primary,7)),ea+1<Pa&&(da.push("${"+ha),da.push(this.generateExpression(S.expressions[ea],Z.Sequence,7)),da.push(ha+"}"));da.push("`");return da},ModuleSpecifier:function(S,da,ea){return this.Literal(S,da,ea)},ImportExpression:function(S,da,ea){return z(["import(",
this.generateExpression(S.source,Z.Assignment,7),")"],Z.Call,da)}};h(C.prototype,C.Expression);C.prototype.generateExpression=function(S,da,ea){var Pa=S.type||ca.Property;if(qa.verbatim&&S.hasOwnProperty(qa.verbatim))return Pa=S[qa.verbatim],"string"===typeof Pa?ea=z(A(Pa),Z.Sequence,da):(ea=A(Pa.content),Pa=null!=Pa.precedence?Pa.precedence:Z.Sequence,ea=z(ea,Pa,da)),f(ea,S);da=this[Pa](S,da,ea);qa.comment&&(da=v(S,da));return f(da,S)};C.prototype.generateStatement=function(S,da){da=this[S.type](S,
da);qa.comment&&(da=v(S,da));var ea=f(da).toString();S.type!==ca.Program||oa||""!==X||"\n"!==ea.charAt(ea.length-1)||(da=ua?f(da).replaceRight(/\s+$/,""):ea.replace(/\s+$/,""));return f(da,S)};var db=d().format;en.version="2.0.0";en.generate=function(S,da){var ea=d();null!=da?("string"===typeof da.indent&&(ea.format.indent.style=da.indent),"number"===typeof da.base&&(ea.format.indent.base=da.base),da=n(ea,da),wa=da.format.indent.style,la="string"===typeof da.base?da.base:k(wa,da.format.indent.base)):
(da=ea,wa=da.format.indent.style,la=k(wa,da.format.indent.base));D=da.format.json;Q=da.format.renumber;J=D?!1:da.format.hexadecimal;O=D?"double":da.format.quotes;ja=da.format.escapeless;X=da.format.newline;ha=da.format.space;da.format.compact&&(X=ha=wa=la="");bb=da.format.parentheses;pb=da.format.semicolons;oa=da.format.safeConcatenation;ba=da.directive;Ga=D?null:da.parse;ua=da.sourceMap;H=da.sourceCode;M=da.format.preserveBlankLines&&null!==H;qa=da;ua&&(W=en.browser?zl.sourceMap.SourceNode:Km);ea=
new C;if(C.Statement.hasOwnProperty(S.type))S=ea.generateStatement(S,1);else if(C.Expression.hasOwnProperty(S.type))S=ea.generateExpression(S,Z.Sequence,7);else throw Error("Unknown node type: "+S.type);if(!ua)return S={code:S.toString(),map:null},da.sourceMapWithCode?S:S.code;S=S.toStringWithSourceMap({file:da.file,sourceRoot:da.sourceMapRoot});da.sourceContent&&S.map.setSourceContent(da.sourceMap,da.sourceContent);return da.sourceMapWithCode?S:S.map.toString()};en.attachComments=fP.attachComments;
en.Precedence=n({},Z);en.browser=!1;en.FORMAT_MINIFY={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1};en.FORMAT_DEFAULTS=db})();var yba=Object.freeze({__proto__:null,"default":en,FORMAT_DEFAULTS:en.FORMAT_DEFAULTS,FORMAT_MINIFY:en.FORMAT_MINIFY,Precedence:en.Precedence,attachComments:en.attachComments,browser:en.browser,generate:en.generate,version:en.version}),Jo=lively.FreezerRuntime.recorderFor("lively.ast/lib/stringify.js");
Jo.stringify=mg;Jo.obj=lf;Jo.escodegen=yba;Jo.es=Jo.escodegen.escodegen||Jo.escodegen;var gB=Jo.es;Jo.escodegen=gB;Jo.es=gB;Jo.default=mg;var jP={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},
zba={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this","5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},
Aba=/^in(stanceof)?$/,kP="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
e0="\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",
F5=new RegExp("["+kP+"]"),G5=new RegExp("["+kP+e0+"]");kP=e0=null;var jS=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,
2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,
3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],H5=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,
2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,
787719,239],li=function(d,k){void 0===k&&(k={});this.label=d;this.keyword=k.keyword;this.beforeExpr=!!k.beforeExpr;this.startsExpr=!!k.startsExpr;this.isLoop=!!k.isLoop;this.isAssign=!!k.isAssign;this.prefix=!!k.prefix;this.postfix=!!k.postfix;this.binop=k.binop||null;this.updateContext=null},oq={beforeExpr:!0},np={startsExpr:!0},iF={},Na={num:new li("num",np),regexp:new li("regexp",np),string:new li("string",np),name:new li("name",np),eof:new li("eof"),bracketL:new li("[",{beforeExpr:!0,startsExpr:!0}),
bracketR:new li("]"),braceL:new li("{",{beforeExpr:!0,startsExpr:!0}),braceR:new li("}"),parenL:new li("(",{beforeExpr:!0,startsExpr:!0}),parenR:new li(")"),comma:new li(",",oq),semi:new li(";",oq),colon:new li(":",oq),dot:new li("."),question:new li("?",oq),questionDot:new li("?."),arrow:new li("=>",oq),template:new li("template"),invalidTemplate:new li("invalidTemplate"),ellipsis:new li("...",oq),backQuote:new li("`",np),dollarBraceL:new li("${",{beforeExpr:!0,startsExpr:!0}),eq:new li("=",{beforeExpr:!0,
isAssign:!0}),assign:new li("_=",{beforeExpr:!0,isAssign:!0}),incDec:new li("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new li("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Lm("||",1),logicalAND:Lm("&&",2),bitwiseOR:Lm("|",3),bitwiseXOR:Lm("^",4),bitwiseAND:Lm("&",5),equality:Lm("==/!=/===/!==",6),relational:Lm("</>/<=/>=",7),bitShift:Lm("<</>>/>>>",8),plusMin:new li("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Lm("%",10),star:Lm("*",10),slash:Lm("/",10),starstar:new li("**",
{beforeExpr:!0}),coalesce:Lm("??",1),_break:uc("break"),_case:uc("case",oq),_catch:uc("catch"),_continue:uc("continue"),_debugger:uc("debugger"),_default:uc("default",oq),_do:uc("do",{isLoop:!0,beforeExpr:!0}),_else:uc("else",oq),_finally:uc("finally"),_for:uc("for",{isLoop:!0}),_function:uc("function",np),_if:uc("if"),_return:uc("return",oq),_switch:uc("switch"),_throw:uc("throw",oq),_try:uc("try"),_var:uc("var"),_const:uc("const"),_while:uc("while",{isLoop:!0}),_with:uc("with"),_new:uc("new",{beforeExpr:!0,
startsExpr:!0}),_this:uc("this",np),_super:uc("super",np),_class:uc("class",np),_extends:uc("extends",oq),_export:uc("export"),_import:uc("import",np),_null:uc("null",np),_true:uc("true",np),_false:uc("false",np),_in:uc("in",{beforeExpr:!0,binop:7}),_instanceof:uc("instanceof",{beforeExpr:!0,binop:7}),_typeof:uc("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:uc("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:uc("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},so=/\r\n?|\n|\u2028|\u2029/,
Iv=new RegExp(so.source,"g"),lP=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,pq=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,f0=Object.prototype,jF=f0.hasOwnProperty,Bba=f0.toString,lS=Array.isArray||function(d){return"[object Array]"===Bba.call(d)},Cz=function(d,k){this.line=d;this.column=k};Cz.prototype.offset=function(d){return new Cz(this.line,this.column+d)};var ux=function(d,k,e){this.start=k;this.end=e;null!==d.sourceFile&&(this.source=d.sourceFile)},ZB={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,
onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},kS=!1,Zj=function(d,k,e){this.options=d=ku(d);this.sourceFile=d.sourceFile;this.keywords=Mm(zba[6<=d.ecmaVersion?6:"module"===d.sourceType?"5module":5]);var h="";!0!==d.allowReserved&&(h=jP[6<=d.ecmaVersion?6:5===d.ecmaVersion?5:3],"module"===
d.sourceType&&(h+=" await"));this.reservedWords=Mm(h);h=(h?h+" ":"")+jP.strict;this.reservedWordsStrict=Mm(h);this.reservedWordsStrictBind=Mm(h+" "+jP.strictBind);this.input=String(k);this.containsEsc=!1;e?(this.pos=e,this.lineStart=this.input.lastIndexOf("\n",e-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(so).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=Na.eof;this.value=null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=
this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===d.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports={};0===this.pos&&d.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null},Gw={inFunction:{configurable:!0},
inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};Zj.prototype.parse=function(){var d=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(d)};Gw.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};Gw.inGenerator.get=function(){return 0<(this.currentVarScope().flags&8)};Gw.inAsync.get=function(){return 0<(this.currentVarScope().flags&
4)};Gw.allowSuper.get=function(){return 0<(this.currentThisScope().flags&64)};Gw.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};Gw.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Gw.inNonArrowFunction.get=function(){return 0<(this.currentThisScope().flags&2)};Zj.extend=function(){for(var d=[],k=arguments.length;k--;)d[k]=arguments[k];k=this;for(var e=0;e<d.length;e++)k=d[e](k);return k};Zj.parse=function(d,k){return(new this(k,
d)).parse()};Zj.parseExpressionAt=function(d,k,e){d=new this(e,d,k);d.nextToken();return d.parseExpression()};Zj.tokenizer=function(d,k){return new this(k,d)};Object.defineProperties(Zj.prototype,Gw);var Bn=Zj.prototype,Cba=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Bn.strictDirective=function(d){for(;;){pq.lastIndex=d;d+=pq.exec(this.input)[0].length;var k=Cba.exec(this.input.slice(d));if(!k)return!1;if("use strict"===(k[1]||k[2])){pq.lastIndex=d+k[0].length;d=pq.exec(this.input);k=d.index+
d[0].length;var e=this.input.charAt(k);return";"===e||"}"===e||so.test(d[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(e)||"!"===e&&"="===this.input.charAt(k+1))}d+=k[0].length;pq.lastIndex=d;d+=pq.exec(this.input)[0].length;";"===this.input[d]&&d++}};Bn.eat=function(d){return this.type===d?(this.next(),!0):!1};Bn.isContextual=function(d){return this.type===Na.name&&this.value===d&&!this.containsEsc};Bn.eatContextual=function(d){if(!this.isContextual(d))return!1;this.next();return!0};Bn.expectContextual=function(d){this.eatContextual(d)||
this.unexpected()};Bn.canInsertSemicolon=function(){return this.type===Na.eof||this.type===Na.braceR||so.test(this.input.slice(this.lastTokEnd,this.start))};Bn.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};Bn.semicolon=function(){this.eat(Na.semi)||this.insertSemicolon()||this.unexpected()};Bn.afterTrailingComma=function(d,k){if(this.type===d){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,
this.lastTokStartLoc);k||this.next();return!0}};Bn.expect=function(d){this.eat(d)||this.unexpected()};Bn.unexpected=function(d){this.raise(null!=d?d:this.start,"Unexpected token")};Bn.checkPatternErrors=function(d,k){d&&(-1<d.trailingComma&&this.raiseRecoverable(d.trailingComma,"Comma is not permitted after the rest element"),d=k?d.parenthesizedAssign:d.parenthesizedBind,-1<d&&this.raiseRecoverable(d,"Parenthesized pattern"))};Bn.checkExpressionErrors=function(d,k){if(!d)return!1;var e=d.shorthandAssign;
d=d.doubleProto;if(!k)return 0<=e||0<=d;0<=e&&this.raise(e,"Shorthand property assignments are valid only in destructuring patterns");0<=d&&this.raiseRecoverable(d,"Redefinition of __proto__ property")};Bn.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Bn.isSimpleAssignTarget=function(d){return"ParenthesizedExpression"===
d.type?this.isSimpleAssignTarget(d.expression):"Identifier"===d.type||"MemberExpression"===d.type};var mh=Zj.prototype;mh.parseTopLevel=function(d){var k={};d.body||(d.body=[]);for(;this.type!==Na.eof;){var e=this.parseStatement(null,!0,k);d.body.push(e)}if(this.inModule)for(k=0,e=Object.keys(this.undefinedExports);k<e.length;k+=1){var h=e[k];this.raiseRecoverable(this.undefinedExports[h].start,"Export '"+h+"' is not defined")}this.adaptDirectivePrologue(d.body);this.next();d.sourceType=this.options.sourceType;
return this.finishNode(d,"Program")};var mP={kind:"loop"},Dba={kind:"switch"};mh.isLet=function(d){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;pq.lastIndex=this.pos;var k=pq.exec(this.input);k=this.pos+k[0].length;var e=this.input.charCodeAt(k);if(91===e)return!0;if(d)return!1;if(123===e)return!0;if(mm(e,!0)){for(d=k+1;ti(this.input.charCodeAt(d),!0);)++d;d=this.input.slice(k,d);if(!Aba.test(d))return!0}return!1};mh.isAsyncFunction=function(){if(8>this.options.ecmaVersion||!this.isContextual("async"))return!1;
pq.lastIndex=this.pos;var d=pq.exec(this.input);d=this.pos+d[0].length;return!so.test(this.input.slice(this.pos,d))&&"function"===this.input.slice(d,d+8)&&(d+8===this.input.length||!ti(this.input.charAt(d+8)))};mh.parseStatement=function(d,k,e){var h=this.type,n=this.startNode();if(this.isLet(d)){h=Na._var;var b="let"}switch(h){case Na._break:case Na._continue:return this.parseBreakContinueStatement(n,h.keyword);case Na._debugger:return this.parseDebuggerStatement(n);case Na._do:return this.parseDoStatement(n);
case Na._for:return this.parseForStatement(n);case Na._function:return d&&(this.strict||"if"!==d&&"label"!==d)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(n,!1,!d);case Na._class:return d&&this.unexpected(),this.parseClass(n,!0);case Na._if:return this.parseIfStatement(n);case Na._return:return this.parseReturnStatement(n);case Na._switch:return this.parseSwitchStatement(n);case Na._throw:return this.parseThrowStatement(n);case Na._try:return this.parseTryStatement(n);
case Na._const:case Na._var:return b=b||this.value,d&&"var"!==b&&this.unexpected(),this.parseVarStatement(n,b);case Na._while:return this.parseWhileStatement(n);case Na._with:return this.parseWithStatement(n);case Na.braceL:return this.parseBlock(!0,n);case Na.semi:return this.parseEmptyStatement(n);case Na._export:case Na._import:if(10<this.options.ecmaVersion&&h===Na._import&&(pq.lastIndex=this.pos,d=pq.exec(this.input),d=this.input.charCodeAt(this.pos+d[0].length),40===d||46===d))return this.parseExpressionStatement(n,
this.parseExpression());this.options.allowImportExportEverywhere||(k||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return h===Na._import?this.parseImport(n):this.parseExport(n,e);default:if(this.isAsyncFunction())return d&&this.unexpected(),this.next(),this.parseFunctionStatement(n,!0,!d);k=this.value;e=this.parseExpression();return h===Na.name&&"Identifier"===
e.type&&this.eat(Na.colon)?this.parseLabeledStatement(n,k,e,d):this.parseExpressionStatement(n,e)}};mh.parseBreakContinueStatement=function(d,k){var e="break"===k;this.next();this.eat(Na.semi)||this.insertSemicolon()?d.label=null:this.type!==Na.name?this.unexpected():(d.label=this.parseIdent(),this.semicolon());for(var h=0;h<this.labels.length;++h){var n=this.labels[h];if(null==d.label||n.name===d.label.name){if(null!=n.kind&&(e||"loop"===n.kind))break;if(d.label&&e)break}}h===this.labels.length&&
this.raise(d.start,"Unsyntactic "+k);return this.finishNode(d,e?"BreakStatement":"ContinueStatement")};mh.parseDebuggerStatement=function(d){this.next();this.semicolon();return this.finishNode(d,"DebuggerStatement")};mh.parseDoStatement=function(d){this.next();this.labels.push(mP);d.body=this.parseStatement("do");this.labels.pop();this.expect(Na._while);d.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat(Na.semi):this.semicolon();return this.finishNode(d,"DoWhileStatement")};mh.parseForStatement=
function(d){this.next();var k=9<=this.options.ecmaVersion&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(mP);this.enterScope(0);this.expect(Na.parenL);if(this.type===Na.semi)return-1<k&&this.unexpected(k),this.parseFor(d,null);var e=this.isLet();if(this.type===Na._var||this.type===Na._const||e){var h=this.startNode();e=e?"let":this.value;this.next();this.parseVar(h,!0,e);this.finishNode(h,"VariableDeclaration");
if((this.type===Na._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===h.declarations.length)return 9<=this.options.ecmaVersion&&(this.type===Na._in?-1<k&&this.unexpected(k):d.await=-1<k),this.parseForIn(d,h);-1<k&&this.unexpected(k);return this.parseFor(d,h)}h=new Yn;e=this.parseExpression(!0,h);if(this.type===Na._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return 9<=this.options.ecmaVersion&&(this.type===Na._in?-1<k&&this.unexpected(k):d.await=-1<k),this.toAssignable(e,
!1,h),this.checkLValPattern(e),this.parseForIn(d,e);this.checkExpressionErrors(h,!0);-1<k&&this.unexpected(k);return this.parseFor(d,e)};mh.parseFunctionStatement=function(d,k,e){this.next();return this.parseFunction(d,FD|(e?0:nP),!1,k)};mh.parseIfStatement=function(d){this.next();d.test=this.parseParenExpression();d.consequent=this.parseStatement("if");d.alternate=this.eat(Na._else)?this.parseStatement("if"):null;return this.finishNode(d,"IfStatement")};mh.parseReturnStatement=function(d){this.inFunction||
this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(Na.semi)||this.insertSemicolon()?d.argument=null:(d.argument=this.parseExpression(),this.semicolon());return this.finishNode(d,"ReturnStatement")};mh.parseSwitchStatement=function(d){this.next();d.discriminant=this.parseParenExpression();d.cases=[];this.expect(Na.braceL);this.labels.push(Dba);this.enterScope(0);for(var k,e=!1;this.type!==Na.braceR;)if(this.type===Na._case||this.type===
Na._default){var h=this.type===Na._case;k&&this.finishNode(k,"SwitchCase");d.cases.push(k=this.startNode());k.consequent=[];this.next();h?k.test=this.parseExpression():(e&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),e=!0,k.test=null);this.expect(Na.colon)}else k||this.unexpected(),k.consequent.push(this.parseStatement(null));this.exitScope();k&&this.finishNode(k,"SwitchCase");this.next();this.labels.pop();return this.finishNode(d,"SwitchStatement")};mh.parseThrowStatement=
function(d){this.next();so.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");d.argument=this.parseExpression();this.semicolon();return this.finishNode(d,"ThrowStatement")};var Eba=[];mh.parseTryStatement=function(d){this.next();d.block=this.parseBlock();d.handler=null;if(this.type===Na._catch){var k=this.startNode();this.next();if(this.eat(Na.parenL)){k.param=this.parseBindingAtom();var e="Identifier"===k.param.type;this.enterScope(e?32:
0);this.checkLValPattern(k.param,e?4:2);this.expect(Na.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),k.param=null,this.enterScope(0);k.body=this.parseBlock(!1);this.exitScope();d.handler=this.finishNode(k,"CatchClause")}d.finalizer=this.eat(Na._finally)?this.parseBlock():null;d.handler||d.finalizer||this.raise(d.start,"Missing catch or finally clause");return this.finishNode(d,"TryStatement")};mh.parseVarStatement=function(d,k){this.next();this.parseVar(d,!1,k);this.semicolon();return this.finishNode(d,
"VariableDeclaration")};mh.parseWhileStatement=function(d){this.next();d.test=this.parseParenExpression();this.labels.push(mP);d.body=this.parseStatement("while");this.labels.pop();return this.finishNode(d,"WhileStatement")};mh.parseWithStatement=function(d){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();d.object=this.parseParenExpression();d.body=this.parseStatement("with");return this.finishNode(d,"WithStatement")};mh.parseEmptyStatement=function(d){this.next();return this.finishNode(d,
"EmptyStatement")};mh.parseLabeledStatement=function(d,k,e,h){for(var n=0,b=this.labels;n<b.length;n+=1)b[n].name===k&&this.raise(e.start,"Label '"+k+"' is already declared");n=this.type.isLoop?"loop":this.type===Na._switch?"switch":null;for(b=this.labels.length-1;0<=b;b--){var c=this.labels[b];if(c.statementStart===d.start)c.statementStart=this.start,c.kind=n;else break}this.labels.push({name:k,kind:n,statementStart:this.start});d.body=this.parseStatement(h?-1===h.indexOf("label")?h+"label":h:"label");
this.labels.pop();d.label=e;return this.finishNode(d,"LabeledStatement")};mh.parseExpressionStatement=function(d,k){d.expression=k;this.semicolon();return this.finishNode(d,"ExpressionStatement")};mh.parseBlock=function(d,k,e){void 0===d&&(d=!0);void 0===k&&(k=this.startNode());k.body=[];this.expect(Na.braceL);for(d&&this.enterScope(0);this.type!==Na.braceR;){var h=this.parseStatement(null);k.body.push(h)}e&&(this.strict=!1);this.next();d&&this.exitScope();return this.finishNode(k,"BlockStatement")};
mh.parseFor=function(d,k){d.init=k;this.expect(Na.semi);d.test=this.type===Na.semi?null:this.parseExpression();this.expect(Na.semi);d.update=this.type===Na.parenR?null:this.parseExpression();this.expect(Na.parenR);d.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(d,"ForStatement")};mh.parseForIn=function(d,k){var e=this.type===Na._in;this.next();"VariableDeclaration"===k.type&&null!=k.declarations[0].init&&(!e||8>this.options.ecmaVersion||this.strict||"var"!==
k.kind||"Identifier"!==k.declarations[0].id.type)&&this.raise(k.start,(e?"for-in":"for-of")+" loop variable declaration may not have an initializer");d.left=k;d.right=e?this.parseExpression():this.parseMaybeAssign();this.expect(Na.parenR);d.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(d,e?"ForInStatement":"ForOfStatement")};mh.parseVar=function(d,k,e){d.declarations=[];for(d.kind=e;;){var h=this.startNode();this.parseVarId(h,e);this.eat(Na.eq)?h.init=this.parseMaybeAssign(k):
"const"!==e||this.type===Na._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===h.id.type||k&&(this.type===Na._in||this.isContextual("of"))?h.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected();d.declarations.push(this.finishNode(h,"VariableDeclarator"));if(!this.eat(Na.comma))break}return d};mh.parseVarId=function(d,k){d.id=this.parseBindingAtom();this.checkLValPattern(d.id,"var"===k?1:2,!1)};var FD=1,nP=2;mh.parseFunction=
function(d,k,e,h){this.initFunction(d);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!h)this.type===Na.star&&k&nP&&this.unexpected(),d.generator=this.eat(Na.star);8<=this.options.ecmaVersion&&(d.async=!!h);k&FD&&(d.id=k&4&&this.type!==Na.name?null:this.parseIdent(),!d.id||k&nP||this.checkLValSimple(d.id,this.strict||d.generator||d.async?this.treatFunctionsAsVar?1:2:3));h=this.yieldPos;var n=this.awaitPos,b=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|
(d.async?4:0)|(d.generator?8:0));k&FD||(d.id=this.type===Na.name?this.parseIdent():null);this.parseFunctionParams(d);this.parseFunctionBody(d,e,!1);this.yieldPos=h;this.awaitPos=n;this.awaitIdentPos=b;return this.finishNode(d,k&FD?"FunctionDeclaration":"FunctionExpression")};mh.parseFunctionParams=function(d){this.expect(Na.parenL);d.params=this.parseBindingList(Na.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};mh.parseClass=function(d,k){this.next();var e=this.strict;
this.strict=!0;this.parseClassId(d,k);this.parseClassSuper(d);var h=this.startNode(),n=!1;h.body=[];for(this.expect(Na.braceL);this.type!==Na.braceR;){var b=this.parseClassElement(null!==d.superClass);b&&(h.body.push(b),"MethodDefinition"===b.type&&"constructor"===b.kind&&(n&&this.raise(b.start,"Duplicate constructor in the same class"),n=!0))}this.strict=e;this.next();d.body=this.finishNode(h,"ClassBody");return this.finishNode(d,k?"ClassDeclaration":"ClassExpression")};mh.parseClassElement=function(d){var k=
this;if(this.eat(Na.semi))return null;var e=this.startNode(),h=function(l,a){void 0===a&&(a=!1);var f=k.start,m=k.startLoc;if(!k.eatContextual(l))return!1;if(!(k.type===Na.parenL||a&&k.canInsertSemicolon()))return!0;e.key&&k.unexpected();e.computed=!1;e.key=k.startNodeAt(f,m);e.key.name=l;k.finishNode(e.key,"Identifier");return!1};e.kind="method";e.static=h("static");var n=this.eat(Na.star),b=!1;n||(8<=this.options.ecmaVersion&&h("async",!0)?(b=!0,n=9<=this.options.ecmaVersion&&this.eat(Na.star)):
h("get")?e.kind="get":h("set")&&(e.kind="set"));e.key||this.parsePropertyName(e);h=e.key;var c=!1;e.computed||e.static||!("Identifier"===h.type&&"constructor"===h.name||"Literal"===h.type&&"constructor"===h.value)?e.static&&"Identifier"===h.type&&"prototype"===h.name&&this.raise(h.start,"Classes may not have a static property named prototype"):("method"!==e.kind&&this.raise(h.start,"Constructor can't have get/set modifier"),n&&this.raise(h.start,"Constructor can't be a generator"),b&&this.raise(h.start,
"Constructor can't be an async method"),e.kind="constructor",c=d);this.parseClassMethod(e,n,b,c);"get"===e.kind&&0!==e.value.params.length&&this.raiseRecoverable(e.value.start,"getter should have no params");"set"===e.kind&&1!==e.value.params.length&&this.raiseRecoverable(e.value.start,"setter should have exactly one param");"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params");return e};mh.parseClassMethod=function(d,
k,e,h){d.value=this.parseMethod(k,e,h);return this.finishNode(d,"MethodDefinition")};mh.parseClassId=function(d,k){this.type===Na.name?(d.id=this.parseIdent(),k&&this.checkLValSimple(d.id,2,!1)):(!0===k&&this.unexpected(),d.id=null)};mh.parseClassSuper=function(d){d.superClass=this.eat(Na._extends)?this.parseExprSubscripts():null};mh.parseExport=function(d,k){this.next();if(this.eat(Na.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(d.exported=this.parseIdent(!0),this.checkExport(k,
d.exported.name,this.lastTokStart)):d.exported=null),this.expectContextual("from"),this.type!==Na.string&&this.unexpected(),d.source=this.parseExprAtom(),this.semicolon(),this.finishNode(d,"ExportAllDeclaration");if(this.eat(Na._default)){this.checkExport(k,"default",this.lastTokStart);var e;this.type===Na._function||(e=this.isAsyncFunction())?(k=this.startNode(),this.next(),e&&this.next(),d.declaration=this.parseFunction(k,FD|4,!1,e)):this.type===Na._class?(e=this.startNode(),d.declaration=this.parseClass(e,
"nullableID")):(d.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(d,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())d.declaration=this.parseStatement(null),"VariableDeclaration"===d.declaration.type?this.checkVariableExport(k,d.declaration.declarations):this.checkExport(k,d.declaration.id.name,d.declaration.id.start),d.specifiers=[],d.source=null;else{d.declaration=null;d.specifiers=this.parseExportSpecifiers(k);if(this.eatContextual("from"))this.type!==
Na.string&&this.unexpected(),d.source=this.parseExprAtom();else{e=0;for(k=d.specifiers;e<k.length;e+=1){var h=k[e];this.checkUnreserved(h.local);this.checkLocalExport(h.local)}d.source=null}this.semicolon()}return this.finishNode(d,"ExportNamedDeclaration")};mh.checkExport=function(d,k,e){d&&(jF.call(d,k)&&this.raiseRecoverable(e,"Duplicate export '"+k+"'"),d[k]=!0)};mh.checkPatternExport=function(d,k){var e=k.type;if("Identifier"===e)this.checkExport(d,k.name,k.start);else if("ObjectPattern"===e)for(e=
0,k=k.properties;e<k.length;e+=1)this.checkPatternExport(d,k[e]);else if("ArrayPattern"===e)for(e=0,k=k.elements;e<k.length;e+=1){var h=k[e];h&&this.checkPatternExport(d,h)}else"Property"===e?this.checkPatternExport(d,k.value):"AssignmentPattern"===e?this.checkPatternExport(d,k.left):"RestElement"===e?this.checkPatternExport(d,k.argument):"ParenthesizedExpression"===e&&this.checkPatternExport(d,k.expression)};mh.checkVariableExport=function(d,k){if(d)for(var e=0;e<k.length;e+=1)this.checkPatternExport(d,
k[e].id)};mh.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};mh.parseExportSpecifiers=function(d){var k=[],e=!0;for(this.expect(Na.braceL);!this.eat(Na.braceR);){if(e)e=!1;else if(this.expect(Na.comma),this.afterTrailingComma(Na.braceR))break;var h=this.startNode();h.local=this.parseIdent(!0);h.exported=this.eatContextual("as")?this.parseIdent(!0):
h.local;this.checkExport(d,h.exported.name,h.exported.start);k.push(this.finishNode(h,"ExportSpecifier"))}return k};mh.parseImport=function(d){this.next();this.type===Na.string?(d.specifiers=Eba,d.source=this.parseExprAtom()):(d.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),d.source=this.type===Na.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(d,"ImportDeclaration")};mh.parseImportSpecifiers=function(){var d=[],k=!0;if(this.type===Na.name){var e=
this.startNode();e.local=this.parseIdent();this.checkLValSimple(e.local,2);d.push(this.finishNode(e,"ImportDefaultSpecifier"));if(!this.eat(Na.comma))return d}if(this.type===Na.star)return k=this.startNode(),this.next(),this.expectContextual("as"),k.local=this.parseIdent(),this.checkLValSimple(k.local,2),d.push(this.finishNode(k,"ImportNamespaceSpecifier")),d;for(this.expect(Na.braceL);!this.eat(Na.braceR);){if(k)k=!1;else if(this.expect(Na.comma),this.afterTrailingComma(Na.braceR))break;e=this.startNode();
e.imported=this.parseIdent(!0);this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported);this.checkLValSimple(e.local,2);d.push(this.finishNode(e,"ImportSpecifier"))}return d};mh.adaptDirectivePrologue=function(d){for(var k=0;k<d.length&&this.isDirectiveCandidate(d[k]);++k)d[k].directive=d[k].expression.raw.slice(1,-1)};mh.isDirectiveCandidate=function(d){return"ExpressionStatement"===d.type&&"Literal"===d.expression.type&&"string"===typeof d.expression.value&&
('"'===this.input[d.start]||"'"===this.input[d.start])};var Nr=Zj.prototype;Nr.toAssignable=function(d,k,e){if(6<=this.options.ecmaVersion&&d)switch(d.type){case "Identifier":this.inAsync&&"await"===d.name&&this.raise(d.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;case "ObjectExpression":d.type="ObjectPattern";e&&this.checkPatternErrors(e,!0);e=0;for(var h=d.properties;e<h.length;e+=
1){var n=h[e];this.toAssignable(n,k);"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token")}break;case "Property":"init"!==d.kind&&this.raise(d.key.start,"Object pattern can't contain getter or setter");this.toAssignable(d.value,k);break;case "ArrayExpression":d.type="ArrayPattern";e&&this.checkPatternErrors(e,!0);this.toAssignableList(d.elements,k);break;case "SpreadElement":d.type="RestElement";this.toAssignable(d.argument,
k);"AssignmentPattern"===d.argument.type&&this.raise(d.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==d.operator&&this.raise(d.left.end,"Only '=' operator can be used for specifying default value.");d.type="AssignmentPattern";delete d.operator;this.toAssignable(d.left,k);break;case "ParenthesizedExpression":this.toAssignable(d.expression,k,e);break;case "ChainExpression":this.raiseRecoverable(d.start,"Optional chaining cannot appear in left-hand side");
break;case "MemberExpression":if(!k)break;default:this.raise(d.start,"Assigning to rvalue")}else e&&this.checkPatternErrors(e,!0);return d};Nr.toAssignableList=function(d,k){for(var e=d.length,h=0;h<e;h++){var n=d[h];n&&this.toAssignable(n,k)}e&&(e=d[e-1],6===this.options.ecmaVersion&&k&&e&&"RestElement"===e.type&&"Identifier"!==e.argument.type&&this.unexpected(e.argument.start));return d};Nr.parseSpread=function(d){var k=this.startNode();this.next();k.argument=this.parseMaybeAssign(!1,d);return this.finishNode(k,
"SpreadElement")};Nr.parseRestBinding=function(){var d=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==Na.name&&this.unexpected();d.argument=this.parseBindingAtom();return this.finishNode(d,"RestElement")};Nr.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case Na.bracketL:var d=this.startNode();this.next();d.elements=this.parseBindingList(Na.bracketR,!0,!0);return this.finishNode(d,"ArrayPattern");case Na.braceL:return this.parseObj(!0)}return this.parseIdent()};
Nr.parseBindingList=function(d,k,e){for(var h=[],n=!0;!this.eat(d);)if(n?n=!1:this.expect(Na.comma),k&&this.type===Na.comma)h.push(null);else if(e&&this.afterTrailingComma(d))break;else if(this.type===Na.ellipsis){k=this.parseRestBinding();this.parseBindingListItem(k);h.push(k);this.type===Na.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(d);break}else{var b=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(b);h.push(b)}return h};
Nr.parseBindingListItem=function(d){return d};Nr.parseMaybeDefault=function(d,k,e){e=e||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat(Na.eq))return e;d=this.startNodeAt(d,k);d.left=e;d.right=this.parseMaybeAssign();return this.finishNode(d,"AssignmentPattern")};Nr.checkLValSimple=function(d,k,e){void 0===k&&(k=0);var h=0!==k;switch(d.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(d.name)&&this.raiseRecoverable(d.start,(h?"Binding ":"Assigning to ")+d.name+
" in strict mode");h&&(2===k&&"let"===d.name&&this.raiseRecoverable(d.start,"let is disallowed as a lexically bound name"),e&&(jF.call(e,d.name)&&this.raiseRecoverable(d.start,"Argument name clash"),e[d.name]=!0),5!==k&&this.declareName(d.name,k,d.start));break;case "ChainExpression":this.raiseRecoverable(d.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":h&&this.raiseRecoverable(d.start,"Binding member expression");break;case "ParenthesizedExpression":return h&&
this.raiseRecoverable(d.start,"Binding parenthesized expression"),this.checkLValSimple(d.expression,k,e);default:this.raise(d.start,(h?"Binding":"Assigning to")+" rvalue")}};Nr.checkLValPattern=function(d,k,e){void 0===k&&(k=0);switch(d.type){case "ObjectPattern":var h=0;for(d=d.properties;h<d.length;h+=1)this.checkLValInnerPattern(d[h],k,e);break;case "ArrayPattern":h=0;for(d=d.elements;h<d.length;h+=1){var n=d[h];n&&this.checkLValInnerPattern(n,k,e)}break;default:this.checkLValSimple(d,k,e)}};Nr.checkLValInnerPattern=
function(d,k,e){void 0===k&&(k=0);switch(d.type){case "Property":this.checkLValInnerPattern(d.value,k,e);break;case "AssignmentPattern":this.checkLValPattern(d.left,k,e);break;case "RestElement":this.checkLValPattern(d.argument,k,e);break;default:this.checkLValPattern(d,k,e)}};var Bh=Zj.prototype;Bh.checkPropClash=function(d,k,e){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===d.type||6<=this.options.ecmaVersion&&(d.computed||d.method||d.shorthand))){var h=d.key;switch(h.type){case "Identifier":var n=
h.name;break;case "Literal":n=String(h.value);break;default:return}d=d.kind;6<=this.options.ecmaVersion?"__proto__"===n&&"init"===d&&(k.proto&&(e?0>e.doubleProto&&(e.doubleProto=h.start):this.raiseRecoverable(h.start,"Redefinition of __proto__ property")),k.proto=!0):(n="$"+n,(e=k[n])?("init"===d?this.strict&&e.init||e.get||e.set:e.init||e[d])&&this.raiseRecoverable(h.start,"Redefinition of property"):e=k[n]={init:!1,get:!1,set:!1},e[d]=!0)}};Bh.parseExpression=function(d,k){var e=this.start,h=this.startLoc,
n=this.parseMaybeAssign(d,k);if(this.type===Na.comma){e=this.startNodeAt(e,h);for(e.expressions=[n];this.eat(Na.comma);)e.expressions.push(this.parseMaybeAssign(d,k));return this.finishNode(e,"SequenceExpression")}return n};Bh.parseMaybeAssign=function(d,k,e){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(d);this.exprAllowed=!1}var h=!1,n=-1,b=-1;k?(n=k.parenthesizedAssign,b=k.trailingComma,k.parenthesizedAssign=k.trailingComma=-1):(k=new Yn,h=!0);var c=this.start,l=this.startLoc;
if(this.type===Na.parenL||this.type===Na.name)this.potentialArrowAt=this.start;var a=this.parseMaybeConditional(d,k);e&&(a=e.call(this,a,c,l));if(this.type.isAssign)return e=this.startNodeAt(c,l),e.operator=this.value,this.type===Na.eq&&(a=this.toAssignable(a,!1,k)),h||(k.parenthesizedAssign=k.trailingComma=k.doubleProto=-1),k.shorthandAssign>=a.start&&(k.shorthandAssign=-1),this.type===Na.eq?this.checkLValPattern(a):this.checkLValSimple(a),e.left=a,this.next(),e.right=this.parseMaybeAssign(d),this.finishNode(e,
"AssignmentExpression");h&&this.checkExpressionErrors(k,!0);-1<n&&(k.parenthesizedAssign=n);-1<b&&(k.trailingComma=b);return a};Bh.parseMaybeConditional=function(d,k){var e=this.start,h=this.startLoc,n=this.parseExprOps(d,k);return this.checkExpressionErrors(k)?n:this.eat(Na.question)?(k=this.startNodeAt(e,h),k.test=n,k.consequent=this.parseMaybeAssign(),this.expect(Na.colon),k.alternate=this.parseMaybeAssign(d),this.finishNode(k,"ConditionalExpression")):n};Bh.parseExprOps=function(d,k){var e=this.start,
h=this.startLoc,n=this.parseMaybeUnary(k,!1);return this.checkExpressionErrors(k)?n:n.start===e&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,e,h,-1,d)};Bh.parseExprOp=function(d,k,e,h,n){var b=this.type.binop;if(null!=b&&(!n||this.type!==Na._in)&&b>h){var c=this.type===Na.logicalOR||this.type===Na.logicalAND,l=this.type===Na.coalesce;l&&(b=Na.logicalAND.binop);var a=this.value;this.next();var f=this.start,m=this.startLoc;b=this.parseExprOp(this.parseMaybeUnary(null,!1),f,m,b,n);d=this.buildBinary(k,
e,d,b,a,c||l);(c&&this.type===Na.coalesce||l&&(this.type===Na.logicalOR||this.type===Na.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(d,k,e,h,n)}return d};Bh.buildBinary=function(d,k,e,h,n,b){d=this.startNodeAt(d,k);d.left=e;d.operator=n;d.right=h;return this.finishNode(d,b?"LogicalExpression":"BinaryExpression")};Bh.parseMaybeUnary=function(d,k){var e=this.start,h=this.startLoc;if(this.isContextual("await")&&
(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var n=this.parseAwait();k=!0}else if(this.type.prefix){n=this.startNode();var b=this.type===Na.incDec;n.operator=this.value;n.prefix=!0;this.next();n.argument=this.parseMaybeUnary(null,!0);this.checkExpressionErrors(d,!0);b?this.checkLValSimple(n.argument):this.strict&&"delete"===n.operator&&"Identifier"===n.argument.type?this.raiseRecoverable(n.start,"Deleting local variable in strict mode"):k=!0;n=this.finishNode(n,b?"UpdateExpression":
"UnaryExpression")}else{n=this.parseExprSubscripts(d);if(this.checkExpressionErrors(d))return n;for(;this.type.postfix&&!this.canInsertSemicolon();)d=this.startNodeAt(e,h),d.operator=this.value,d.prefix=!1,d.argument=n,this.checkLValSimple(n),this.next(),n=this.finishNode(d,"UpdateExpression")}return!k&&this.eat(Na.starstar)?this.buildBinary(e,h,n,this.parseMaybeUnary(null,!1),"**",!1):n};Bh.parseExprSubscripts=function(d){var k=this.start,e=this.startLoc,h=this.parseExprAtom(d);if("ArrowFunctionExpression"===
h.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return h;k=this.parseSubscripts(h,k,e);d&&"MemberExpression"===k.type&&(d.parenthesizedAssign>=k.start&&(d.parenthesizedAssign=-1),d.parenthesizedBind>=k.start&&(d.parenthesizedBind=-1));return k};Bh.parseSubscripts=function(d,k,e,h){for(var n=8<=this.options.ecmaVersion&&"Identifier"===d.type&&"async"===d.name&&this.lastTokEnd===d.end&&!this.canInsertSemicolon()&&5===d.end-d.start&&this.potentialArrowAt===d.start,b=!1;;){var c=this.parseSubscript(d,
k,e,h,n,b);c.optional&&(b=!0);if(c===d||"ArrowFunctionExpression"===c.type)return b&&(d=this.startNodeAt(k,e),d.expression=c,c=this.finishNode(d,"ChainExpression")),c;d=c}};Bh.parseSubscript=function(d,k,e,h,n,b){var c=11<=this.options.ecmaVersion,l=c&&this.eat(Na.questionDot);h&&l&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var a=this.eat(Na.bracketL);if(a||l&&this.type!==Na.parenL&&this.type!==Na.backQuote||this.eat(Na.dot))k=this.startNodeAt(k,
e),k.object=d,k.property=a?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),k.computed=!!a,a&&this.expect(Na.bracketR),c&&(k.optional=l),d=this.finishNode(k,"MemberExpression");else if(!h&&this.eat(Na.parenL)){h=new Yn;b=this.yieldPos;var f=this.awaitPos,m=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;a=this.parseExprList(Na.parenR,8<=this.options.ecmaVersion,!1,h);if(n&&!l&&!this.canInsertSemicolon()&&this.eat(Na.arrow))return this.checkPatternErrors(h,
!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=b,this.awaitPos=f,this.awaitIdentPos=m,this.parseArrowExpression(this.startNodeAt(k,e),a,!0);this.checkExpressionErrors(h,!0);this.yieldPos=b||this.yieldPos;this.awaitPos=f||this.awaitPos;this.awaitIdentPos=m||this.awaitIdentPos;k=this.startNodeAt(k,e);k.callee=d;k.arguments=a;c&&(k.optional=l);d=this.finishNode(k,"CallExpression")}else this.type===
Na.backQuote&&((l||b)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),c=this.startNodeAt(k,e),c.tag=d,c.quasi=this.parseTemplate({isTagged:!0}),d=this.finishNode(c,"TaggedTemplateExpression"));return d};Bh.parseExprAtom=function(d){this.type===Na.slash&&this.readRegexp();var k=this.potentialArrowAt===this.start;switch(this.type){case Na._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),k=this.startNode(),this.next(),
this.type!==Na.parenL||this.allowDirectSuper||this.raise(k.start,"super() call outside constructor of a subclass"),this.type!==Na.dot&&this.type!==Na.bracketL&&this.type!==Na.parenL&&this.unexpected(),this.finishNode(k,"Super");case Na._this:return k=this.startNode(),this.next(),this.finishNode(k,"ThisExpression");case Na.name:d=this.start;var e=this.startLoc,h=this.containsEsc,n=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!h&&"async"===n.name&&!this.canInsertSemicolon()&&this.eat(Na._function))return this.parseFunction(this.startNodeAt(d,
e),0,!1,!0);if(k&&!this.canInsertSemicolon()){if(this.eat(Na.arrow))return this.parseArrowExpression(this.startNodeAt(d,e),[n],!1);if(8<=this.options.ecmaVersion&&"async"===n.name&&this.type===Na.name&&!h)return n=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(Na.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(d,e),[n],!0)}return n;case Na.regexp:return d=this.value,k=this.parseLiteral(d.value),k.regex={pattern:d.pattern,flags:d.flags},k;case Na.num:case Na.string:return this.parseLiteral(this.value);
case Na._null:case Na._true:case Na._false:return k=this.startNode(),k.value=this.type===Na._null?null:this.type===Na._true,k.raw=this.type.keyword,this.next(),this.finishNode(k,"Literal");case Na.parenL:return e=this.start,k=this.parseParenAndDistinguishExpression(k),d&&(0>d.parenthesizedAssign&&!this.isSimpleAssignTarget(k)&&(d.parenthesizedAssign=e),0>d.parenthesizedBind&&(d.parenthesizedBind=e)),k;case Na.bracketL:return k=this.startNode(),this.next(),k.elements=this.parseExprList(Na.bracketR,
!0,!0,d),this.finishNode(k,"ArrayExpression");case Na.braceL:return this.parseObj(!1,d);case Na._function:return k=this.startNode(),this.next(),this.parseFunction(k,0);case Na._class:return this.parseClass(this.startNode(),!1);case Na._new:return this.parseNew();case Na.backQuote:return this.parseTemplate();case Na._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};Bh.parseExprImport=function(){var d=this.startNode();this.containsEsc&&
this.raiseRecoverable(this.start,"Escape sequence in keyword import");var k=this.parseIdent(!0);switch(this.type){case Na.parenL:return this.parseDynamicImport(d);case Na.dot:return d.meta=k,this.parseImportMeta(d);default:this.unexpected()}};Bh.parseDynamicImport=function(d){this.next();d.source=this.parseMaybeAssign();if(!this.eat(Na.parenR)){var k=this.start;this.eat(Na.comma)&&this.eat(Na.parenR)?this.raiseRecoverable(k,"Trailing comma is not allowed in import()"):this.unexpected(k)}return this.finishNode(d,
"ImportExpression")};Bh.parseImportMeta=function(d){this.next();var k=this.containsEsc;d.property=this.parseIdent(!0);"meta"!==d.property.name&&this.raiseRecoverable(d.property.start,"The only valid meta property for import is 'import.meta'");k&&this.raiseRecoverable(d.start,"'import.meta' must not contain escaped characters");"module"!==this.options.sourceType&&this.raiseRecoverable(d.start,"Cannot use 'import.meta' outside a module");return this.finishNode(d,"MetaProperty")};Bh.parseLiteral=function(d){var k=
this.startNode();k.value=d;k.raw=this.input.slice(this.start,this.end);110===k.raw.charCodeAt(k.raw.length-1)&&(k.bigint=k.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(k,"Literal")};Bh.parseParenExpression=function(){this.expect(Na.parenL);var d=this.parseExpression();this.expect(Na.parenR);return d};Bh.parseParenAndDistinguishExpression=function(d){var k=this.start,e=this.startLoc,h=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var n=this.start,b=
this.startLoc,c=[],l=!0,a=!1,f=new Yn,m=this.yieldPos,q=this.awaitPos;for(this.awaitPos=this.yieldPos=0;this.type!==Na.parenR;)if(l?l=!1:this.expect(Na.comma),h&&this.afterTrailingComma(Na.parenR,!0)){a=!0;break}else if(this.type===Na.ellipsis){var r=this.start;c.push(this.parseParenItem(this.parseRestBinding()));this.type===Na.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else c.push(this.parseMaybeAssign(!1,f,this.parseParenItem));h=this.start;l=this.startLoc;
this.expect(Na.parenR);if(d&&!this.canInsertSemicolon()&&this.eat(Na.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=m,this.awaitPos=q,this.parseParenArrowList(k,e,c);c.length&&!a||this.unexpected(this.lastTokStart);r&&this.unexpected(r);this.checkExpressionErrors(f,!0);this.yieldPos=m||this.yieldPos;this.awaitPos=q||this.awaitPos;1<c.length?(d=this.startNodeAt(n,b),d.expressions=c,this.finishNodeAt(d,"SequenceExpression",h,l)):d=c[0]}else d=this.parseParenExpression();
return this.options.preserveParens?(k=this.startNodeAt(k,e),k.expression=d,this.finishNode(k,"ParenthesizedExpression")):d};Bh.parseParenItem=function(d){return d};Bh.parseParenArrowList=function(d,k,e){return this.parseArrowExpression(this.startNodeAt(d,k),e)};var Fba=[];Bh.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var d=this.startNode(),k=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Na.dot))return d.meta=k,k=this.containsEsc,
d.property=this.parseIdent(!0),"target"!==d.property.name&&this.raiseRecoverable(d.property.start,"The only valid meta property for new is 'new.target'"),k&&this.raiseRecoverable(d.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(d.start,"'new.target' can only be used in functions"),this.finishNode(d,"MetaProperty");k=this.start;var e=this.startLoc,h=this.type===Na._import;d.callee=this.parseSubscripts(this.parseExprAtom(),k,e,!0);h&&"ImportExpression"===
d.callee.type&&this.raise(k,"Cannot use new with import()");this.eat(Na.parenL)?d.arguments=this.parseExprList(Na.parenR,8<=this.options.ecmaVersion,!1):d.arguments=Fba;return this.finishNode(d,"NewExpression")};Bh.parseTemplateElement=function(d){d=d.isTagged;var k=this.startNode();this.type===Na.invalidTemplate?(d||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),k.value={raw:this.value,cooked:null}):k.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,
"\n"),cooked:this.value};this.next();k.tail=this.type===Na.backQuote;return this.finishNode(k,"TemplateElement")};Bh.parseTemplate=function(d){void 0===d&&(d={});d=d.isTagged;void 0===d&&(d=!1);var k=this.startNode();this.next();k.expressions=[];var e=this.parseTemplateElement({isTagged:d});for(k.quasis=[e];!e.tail;)this.type===Na.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Na.dollarBraceL),k.expressions.push(this.parseExpression()),this.expect(Na.braceR),k.quasis.push(e=
this.parseTemplateElement({isTagged:d}));this.next();return this.finishNode(k,"TemplateLiteral")};Bh.isAsyncProp=function(d){return!d.computed&&"Identifier"===d.key.type&&"async"===d.key.name&&(this.type===Na.name||this.type===Na.num||this.type===Na.string||this.type===Na.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===Na.star)&&!so.test(this.input.slice(this.lastTokEnd,this.start))};Bh.parseObj=function(d,k){var e=this.startNode(),h=!0,n={};e.properties=[];for(this.next();!this.eat(Na.braceR);){if(h)h=
!1;else if(this.expect(Na.comma),5<=this.options.ecmaVersion&&this.afterTrailingComma(Na.braceR))break;var b=this.parseProperty(d,k);d||this.checkPropClash(b,n,k);e.properties.push(b)}return this.finishNode(e,d?"ObjectPattern":"ObjectExpression")};Bh.parseProperty=function(d,k){var e=this.startNode(),h;if(9<=this.options.ecmaVersion&&this.eat(Na.ellipsis)){if(d)return e.argument=this.parseIdent(!1),this.type===Na.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(e,
"RestElement");this.type===Na.parenL&&k&&(0>k.parenthesizedAssign&&(k.parenthesizedAssign=this.start),0>k.parenthesizedBind&&(k.parenthesizedBind=this.start));e.argument=this.parseMaybeAssign(!1,k);this.type===Na.comma&&k&&0>k.trailingComma&&(k.trailingComma=this.start);return this.finishNode(e,"SpreadElement")}if(6<=this.options.ecmaVersion){e.method=!1;e.shorthand=!1;if(d||k){var n=this.start;var b=this.startLoc}d||(h=this.eat(Na.star))}var c=this.containsEsc;this.parsePropertyName(e);if(!d&&!c&&
8<=this.options.ecmaVersion&&!h&&this.isAsyncProp(e)){var l=!0;h=9<=this.options.ecmaVersion&&this.eat(Na.star);this.parsePropertyName(e,k)}else l=!1;this.parsePropertyValue(e,d,h,l,n,b,k,c);return this.finishNode(e,"Property")};Bh.parsePropertyValue=function(d,k,e,h,n,b,c,l){(e||h)&&this.type===Na.colon&&this.unexpected();this.eat(Na.colon)?(d.value=k?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,c),d.kind="init"):6<=this.options.ecmaVersion&&this.type===Na.parenL?(k&&
this.unexpected(),d.kind="init",d.method=!0,d.value=this.parseMethod(e,h)):k||l||!(5<=this.options.ecmaVersion)||d.computed||"Identifier"!==d.key.type||"get"!==d.key.name&&"set"!==d.key.name||this.type===Na.comma||this.type===Na.braceR||this.type===Na.eq?6<=this.options.ecmaVersion&&!d.computed&&"Identifier"===d.key.type?((e||h)&&this.unexpected(),this.checkUnreserved(d.key),"await"!==d.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),d.kind="init",k?d.value=this.parseMaybeDefault(n,b,this.copyNode(d.key)):
this.type===Na.eq&&c?(0>c.shorthandAssign&&(c.shorthandAssign=this.start),d.value=this.parseMaybeDefault(n,b,this.copyNode(d.key))):d.value=this.copyNode(d.key),d.shorthand=!0):this.unexpected():((e||h)&&this.unexpected(),d.kind=d.key.name,this.parsePropertyName(d),d.value=this.parseMethod(!1),d.value.params.length!==("get"===d.kind?0:1)?(k=d.value.start,"get"===d.kind?this.raiseRecoverable(k,"getter should have no params"):this.raiseRecoverable(k,"setter should have exactly one param")):"set"===
d.kind&&"RestElement"===d.value.params[0].type&&this.raiseRecoverable(d.value.params[0].start,"Setter cannot use rest params"))};Bh.parsePropertyName=function(d){if(6<=this.options.ecmaVersion){if(this.eat(Na.bracketL))return d.computed=!0,d.key=this.parseMaybeAssign(),this.expect(Na.bracketR),d.key;d.computed=!1}return d.key=this.type===Na.num||this.type===Na.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};Bh.initFunction=function(d){d.id=null;6<=this.options.ecmaVersion&&
(d.generator=d.expression=!1);8<=this.options.ecmaVersion&&(d.async=!1)};Bh.parseMethod=function(d,k,e){var h=this.startNode(),n=this.yieldPos,b=this.awaitPos,c=this.awaitIdentPos;this.initFunction(h);6<=this.options.ecmaVersion&&(h.generator=d);8<=this.options.ecmaVersion&&(h.async=!!k);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(k?4:0)|(h.generator?8:0)|64|(e?128:0));this.expect(Na.parenL);h.params=this.parseBindingList(Na.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();
this.parseFunctionBody(h,!1,!0);this.yieldPos=n;this.awaitPos=b;this.awaitIdentPos=c;return this.finishNode(h,"FunctionExpression")};Bh.parseArrowExpression=function(d,k,e){var h=this.yieldPos,n=this.awaitPos,b=this.awaitIdentPos;this.enterScope((e?4:0)|18);this.initFunction(d);8<=this.options.ecmaVersion&&(d.async=!!e);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;d.params=this.toAssignableList(k,!0);this.parseFunctionBody(d,!0,!1);this.yieldPos=h;this.awaitPos=n;this.awaitIdentPos=b;return this.finishNode(d,
"ArrowFunctionExpression")};Bh.parseFunctionBody=function(d,k,e){var h=this.strict,n=!1;if(k&&this.type!==Na.braceL)d.body=this.parseMaybeAssign(),d.expression=!0,this.checkParams(d,!1);else{var b=7<=this.options.ecmaVersion&&!this.isSimpleParamList(d.params);(!h||b)&&(n=this.strictDirective(this.end))&&b&&this.raiseRecoverable(d.start,"Illegal 'use strict' directive in function with non-simple parameter list");b=this.labels;this.labels=[];n&&(this.strict=!0);this.checkParams(d,!h&&!n&&!k&&!e&&this.isSimpleParamList(d.params));
this.strict&&d.id&&this.checkLValSimple(d.id,5);d.body=this.parseBlock(!1,void 0,n&&!h);d.expression=!1;this.adaptDirectivePrologue(d.body.body);this.labels=b}this.exitScope()};Bh.isSimpleParamList=function(d){for(var k=0;k<d.length;k+=1)if("Identifier"!==d[k].type)return!1;return!0};Bh.checkParams=function(d,k){var e={},h=0;for(d=d.params;h<d.length;h+=1)this.checkLValInnerPattern(d[h],1,k?null:e)};Bh.parseExprList=function(d,k,e,h){for(var n=[],b=!0;!this.eat(d);){if(b)b=!1;else if(this.expect(Na.comma),
k&&this.afterTrailingComma(d))break;if(e&&this.type===Na.comma)var c=null;else this.type===Na.ellipsis?(c=this.parseSpread(h),h&&this.type===Na.comma&&0>h.trailingComma&&(h.trailingComma=this.start)):c=this.parseMaybeAssign(!1,h);n.push(c)}return n};Bh.checkUnreserved=function(d){var k=d.start,e=d.end;d=d.name;this.inGenerator&&"yield"===d&&this.raiseRecoverable(k,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&"await"===d&&this.raiseRecoverable(k,"Cannot use 'await' as identifier inside an async function");
this.keywords.test(d)&&this.raise(k,"Unexpected keyword '"+d+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(k,e).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(d)||(this.inAsync||"await"!==d||this.raiseRecoverable(k,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(k,"The keyword '"+d+"' is reserved"))};Bh.parseIdent=function(d,k){k=this.startNode();this.type===Na.name?k.name=this.value:this.type.keyword?(k.name=this.type.keyword,
"class"!==k.name&&"function"!==k.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!d);this.finishNode(k,"Identifier");d||(this.checkUnreserved(k),"await"!==k.name||this.awaitIdentPos||(this.awaitIdentPos=k.start));return k};Bh.parseYield=function(d){this.yieldPos||(this.yieldPos=this.start);var k=this.startNode();this.next();this.type===Na.semi||this.canInsertSemicolon()||this.type!==Na.star&&!this.type.startsExpr?
(k.delegate=!1,k.argument=null):(k.delegate=this.eat(Na.star),k.argument=this.parseMaybeAssign(d));return this.finishNode(k,"YieldExpression")};Bh.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var d=this.startNode();this.next();d.argument=this.parseMaybeUnary(null,!0);return this.finishNode(d,"AwaitExpression")};var pI=Zj.prototype;pI.raise=function(d,k){var e=Mp(this.input,d);k+=" ("+e.line+":"+e.column+")";k=new SyntaxError(k);k.pos=d;k.loc=e;k.raisedAt=this.pos;throw k;};pI.raiseRecoverable=
pI.raise;pI.curPosition=function(){if(this.options.locations)return new Cz(this.curLine,this.pos-this.lineStart)};var Hw=Zj.prototype,Gba=function(d){this.flags=d;this.var=[];this.lexical=[];this.functions=[]};Hw.enterScope=function(d){this.scopeStack.push(new Gba(d))};Hw.exitScope=function(){this.scopeStack.pop()};Hw.treatFunctionsAsVarInScope=function(d){return d.flags&2||!this.inModule&&d.flags&1};Hw.declareName=function(d,k,e){var h=!1;if(2===k)k=this.currentScope(),h=-1<k.lexical.indexOf(d)||
-1<k.functions.indexOf(d)||-1<k.var.indexOf(d),k.lexical.push(d),this.inModule&&k.flags&1&&delete this.undefinedExports[d];else if(4===k)this.currentScope().lexical.push(d);else if(3===k)k=this.currentScope(),h=this.treatFunctionsAsVar?-1<k.lexical.indexOf(d):-1<k.lexical.indexOf(d)||-1<k.var.indexOf(d),k.functions.push(d);else for(k=this.scopeStack.length-1;0<=k;--k){var n=this.scopeStack[k];if(-1<n.lexical.indexOf(d)&&!(n.flags&32&&n.lexical[0]===d)||!this.treatFunctionsAsVarInScope(n)&&-1<n.functions.indexOf(d)){h=
!0;break}n.var.push(d);this.inModule&&n.flags&1&&delete this.undefinedExports[d];if(n.flags&3)break}h&&this.raiseRecoverable(e,"Identifier '"+d+"' has already been declared")};Hw.checkLocalExport=function(d){-1===this.scopeStack[0].lexical.indexOf(d.name)&&-1===this.scopeStack[0].var.indexOf(d.name)&&(this.undefinedExports[d.name]=d)};Hw.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Hw.currentVarScope=function(){for(var d=this.scopeStack.length-1;;d--){var k=this.scopeStack[d];
if(k.flags&3)return k}};Hw.currentThisScope=function(){for(var d=this.scopeStack.length-1;;d--){var k=this.scopeStack[d];if(k.flags&3&&!(k.flags&16))return k}};var Iw=function(d,k,e){this.type="";this.start=k;this.end=0;d.options.locations&&(this.loc=new ux(d,e));d.options.directSourceFile&&(this.sourceFile=d.options.directSourceFile);d.options.ranges&&(this.range=[k,0])},GD=Zj.prototype;GD.startNode=function(){return new Iw(this,this.start,this.startLoc)};GD.startNodeAt=function(d,k){return new Iw(this,
d,k)};GD.finishNode=function(d,k){return Yq.call(this,d,k,this.lastTokEnd,this.lastTokEndLoc)};GD.finishNodeAt=function(d,k,e,h){return Yq.call(this,d,k,e,h)};GD.copyNode=function(d){var k=new Iw(this,d.start,this.startLoc),e;for(e in d)k[e]=d[e];return k};var qq=function(d,k,e,h,n){this.token=d;this.isExpr=!!k;this.preserveSpace=!!e;this.override=h;this.generator=!!n},ak={b_stat:new qq("{",!1),b_expr:new qq("{",!0),b_tmpl:new qq("${",!1),p_stat:new qq("(",!1),p_expr:new qq("(",!0),q_tmpl:new qq("`",
!0,!0,function(d){return d.tryReadTemplateToken()}),f_stat:new qq("function",!1),f_expr:new qq("function",!0),f_expr_gen:new qq("function",!0,!1,null,!0),f_gen:new qq("function",!1,!1,null,!0)},qI=Zj.prototype;qI.initialContext=function(){return[ak.b_stat]};qI.braceIsBlock=function(d){var k=this.curContext();return k===ak.f_expr||k===ak.f_stat?!0:d!==Na.colon||k!==ak.b_stat&&k!==ak.b_expr?d===Na._return||d===Na.name&&this.exprAllowed?so.test(this.input.slice(this.lastTokEnd,this.start)):d===Na._else||
d===Na.semi||d===Na.eof||d===Na.parenR||d===Na.arrow?!0:d===Na.braceL?k===ak.b_stat:d===Na._var||d===Na._const||d===Na.name?!1:!this.exprAllowed:!k.isExpr};qI.inGeneratorContext=function(){for(var d=this.context.length-1;1<=d;d--){var k=this.context[d];if("function"===k.token)return k.generator}return!1};qI.updateContext=function(d){var k,e=this.type;e.keyword&&d===Na.dot?this.exprAllowed=!1:(k=e.updateContext)?k.call(this,d):this.exprAllowed=e.beforeExpr};Na.parenR.updateContext=Na.braceR.updateContext=
function(){if(1===this.context.length)this.exprAllowed=!0;else{var d=this.context.pop();d===ak.b_stat&&"function"===this.curContext().token&&(d=this.context.pop());this.exprAllowed=!d.isExpr}};Na.braceL.updateContext=function(d){this.context.push(this.braceIsBlock(d)?ak.b_stat:ak.b_expr);this.exprAllowed=!0};Na.dollarBraceL.updateContext=function(){this.context.push(ak.b_tmpl);this.exprAllowed=!0};Na.parenL.updateContext=function(d){this.context.push(d===Na._if||d===Na._for||d===Na._with||d===Na._while?
ak.p_stat:ak.p_expr);this.exprAllowed=!0};Na.incDec.updateContext=function(){};Na._function.updateContext=Na._class.updateContext=function(d){!d.beforeExpr||d===Na._else||d===Na.semi&&this.curContext()!==ak.p_stat||d===Na._return&&so.test(this.input.slice(this.lastTokEnd,this.start))||(d===Na.colon||d===Na.braceL)&&this.curContext()===ak.b_stat?this.context.push(ak.f_stat):this.context.push(ak.f_expr);this.exprAllowed=!1};Na.backQuote.updateContext=function(){this.curContext()===ak.q_tmpl?this.context.pop():
this.context.push(ak.q_tmpl);this.exprAllowed=!1};Na.star.updateContext=function(d){d===Na._function&&(d=this.context.length-1,this.context[d]=this.context[d]===ak.f_expr?ak.f_expr_gen:ak.f_gen);this.exprAllowed=!0};Na.name.updateContext=function(d){var k=!1;6<=this.options.ecmaVersion&&d!==Na.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(k=!0);this.exprAllowed=k};var I5={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
J5={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
mS={};lu(9);lu(10);lu(11);lu(12);var Vf=Zj.prototype,bv=function(d){this.parser=d;this.validFlags="gim"+(6<=d.options.ecmaVersion?"uy":"")+(9<=d.options.ecmaVersion?"s":"");this.unicodeProperties=mS[12<=d.options.ecmaVersion?12:d.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=[];this.backReferenceNames=[]};
bv.prototype.reset=function(d,k,e){var h=-1!==e.indexOf("u");this.start=d|0;this.source=k+"";this.flags=e;this.switchU=h&&6<=this.parser.options.ecmaVersion;this.switchN=h&&9<=this.parser.options.ecmaVersion};bv.prototype.raise=function(d){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+d)};bv.prototype.at=function(d,k){void 0===k&&(k=!1);var e=this.source,h=e.length;if(d>=h)return-1;var n=e.charCodeAt(d);if(!k&&!this.switchU||55295>=n||57344<=n||d+1>=h)return n;
d=e.charCodeAt(d+1);return 56320<=d&&57343>=d?(n<<10)+d-56613888:n};bv.prototype.nextIndex=function(d,k){void 0===k&&(k=!1);var e=this.source,h=e.length;if(d>=h)return h;var n=e.charCodeAt(d),b;return!k&&!this.switchU||55295>=n||57344<=n||d+1>=h||56320>(b=e.charCodeAt(d+1))||57343<b?d+1:d+2};bv.prototype.current=function(d){void 0===d&&(d=!1);return this.at(this.pos,d)};bv.prototype.lookahead=function(d){void 0===d&&(d=!1);return this.at(this.nextIndex(this.pos,d),d)};bv.prototype.advance=function(d){void 0===
d&&(d=!1);this.pos=this.nextIndex(this.pos,d)};bv.prototype.eat=function(d,k){void 0===k&&(k=!1);return this.current(k)===d?(this.advance(k),!0):!1};Vf.validateRegExpFlags=function(d){for(var k=d.validFlags,e=d.flags,h=0;h<e.length;h++){var n=e.charAt(h);-1===k.indexOf(n)&&this.raise(d.start,"Invalid regular expression flag");-1<e.indexOf(n,h+1)&&this.raise(d.start,"Duplicate regular expression flag")}};Vf.validateRegExpPattern=function(d){this.regexp_pattern(d);!d.switchN&&9<=this.options.ecmaVersion&&
0<d.groupNames.length&&(d.switchN=!0,this.regexp_pattern(d))};Vf.regexp_pattern=function(d){d.pos=0;d.lastIntValue=0;d.lastStringValue="";d.lastAssertionIsQuantifiable=!1;d.numCapturingParens=0;d.maxBackReference=0;d.groupNames.length=0;d.backReferenceNames.length=0;this.regexp_disjunction(d);d.pos!==d.source.length&&(d.eat(41)&&d.raise("Unmatched ')'"),(d.eat(93)||d.eat(125))&&d.raise("Lone quantifier brackets"));d.maxBackReference>d.numCapturingParens&&d.raise("Invalid escape");for(var k=0,e=d.backReferenceNames;k<
e.length;k+=1)-1===d.groupNames.indexOf(e[k])&&d.raise("Invalid named capture referenced")};Vf.regexp_disjunction=function(d){for(this.regexp_alternative(d);d.eat(124);)this.regexp_alternative(d);this.regexp_eatQuantifier(d,!0)&&d.raise("Nothing to repeat");d.eat(123)&&d.raise("Lone quantifier brackets")};Vf.regexp_alternative=function(d){for(;d.pos<d.source.length&&this.regexp_eatTerm(d););};Vf.regexp_eatTerm=function(d){return this.regexp_eatAssertion(d)?(d.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(d)&&
d.switchU&&d.raise("Invalid quantifier"),!0):(d.switchU?this.regexp_eatAtom(d):this.regexp_eatExtendedAtom(d))?(this.regexp_eatQuantifier(d),!0):!1};Vf.regexp_eatAssertion=function(d){var k=d.pos;d.lastAssertionIsQuantifiable=!1;if(d.eat(94)||d.eat(36))return!0;if(d.eat(92)){if(d.eat(66)||d.eat(98))return!0;d.pos=k}if(d.eat(40)&&d.eat(63)){var e=!1;9<=this.options.ecmaVersion&&(e=d.eat(60));if(d.eat(61)||d.eat(33))return this.regexp_disjunction(d),d.eat(41)||d.raise("Unterminated group"),d.lastAssertionIsQuantifiable=
!e,!0}d.pos=k;return!1};Vf.regexp_eatQuantifier=function(d,k){void 0===k&&(k=!1);return this.regexp_eatQuantifierPrefix(d,k)?(d.eat(63),!0):!1};Vf.regexp_eatQuantifierPrefix=function(d,k){return d.eat(42)||d.eat(43)||d.eat(63)||this.regexp_eatBracedQuantifier(d,k)};Vf.regexp_eatBracedQuantifier=function(d,k){var e=d.pos;if(d.eat(123)){var h=-1;if(this.regexp_eatDecimalDigits(d)){var n=d.lastIntValue;d.eat(44)&&this.regexp_eatDecimalDigits(d)&&(h=d.lastIntValue);if(d.eat(125))return-1!==h&&h<n&&!k&&
d.raise("numbers out of order in {} quantifier"),!0}d.switchU&&!k&&d.raise("Incomplete quantifier");d.pos=e}return!1};Vf.regexp_eatAtom=function(d){return this.regexp_eatPatternCharacters(d)||d.eat(46)||this.regexp_eatReverseSolidusAtomEscape(d)||this.regexp_eatCharacterClass(d)||this.regexp_eatUncapturingGroup(d)||this.regexp_eatCapturingGroup(d)};Vf.regexp_eatReverseSolidusAtomEscape=function(d){var k=d.pos;if(d.eat(92)){if(this.regexp_eatAtomEscape(d))return!0;d.pos=k}return!1};Vf.regexp_eatUncapturingGroup=
function(d){var k=d.pos;if(d.eat(40)){if(d.eat(63)&&d.eat(58)){this.regexp_disjunction(d);if(d.eat(41))return!0;d.raise("Unterminated group")}d.pos=k}return!1};Vf.regexp_eatCapturingGroup=function(d){if(d.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(d):63===d.current()&&d.raise("Invalid group");this.regexp_disjunction(d);if(d.eat(41))return d.numCapturingParens+=1,!0;d.raise("Unterminated group")}return!1};Vf.regexp_eatExtendedAtom=function(d){return d.eat(46)||this.regexp_eatReverseSolidusAtomEscape(d)||
this.regexp_eatCharacterClass(d)||this.regexp_eatUncapturingGroup(d)||this.regexp_eatCapturingGroup(d)||this.regexp_eatInvalidBracedQuantifier(d)||this.regexp_eatExtendedPatternCharacter(d)};Vf.regexp_eatInvalidBracedQuantifier=function(d){this.regexp_eatBracedQuantifier(d,!0)&&d.raise("Nothing to repeat");return!1};Vf.regexp_eatSyntaxCharacter=function(d){var k=d.current();return Dz(k)?(d.lastIntValue=k,d.advance(),!0):!1};Vf.regexp_eatPatternCharacters=function(d){for(var k=d.pos,e=0;-1!==(e=d.current())&&
!Dz(e);)d.advance();return d.pos!==k};Vf.regexp_eatExtendedPatternCharacter=function(d){var k=d.current();return-1===k||36===k||40<=k&&43>=k||46===k||63===k||91===k||94===k||124===k?!1:(d.advance(),!0)};Vf.regexp_groupSpecifier=function(d){d.eat(63)&&(this.regexp_eatGroupName(d)?(-1!==d.groupNames.indexOf(d.lastStringValue)&&d.raise("Duplicate capture group name"),d.groupNames.push(d.lastStringValue)):d.raise("Invalid group"))};Vf.regexp_eatGroupName=function(d){d.lastStringValue="";if(d.eat(60)){if(this.regexp_eatRegExpIdentifierName(d)&&
d.eat(62))return!0;d.raise("Invalid capture group name")}return!1};Vf.regexp_eatRegExpIdentifierName=function(d){d.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(d)){for(d.lastStringValue+=Jv(d.lastIntValue);this.regexp_eatRegExpIdentifierPart(d);)d.lastStringValue+=Jv(d.lastIntValue);return!0}return!1};Vf.regexp_eatRegExpIdentifierStart=function(d){var k=d.pos,e=11<=this.options.ecmaVersion,h=d.current(e);d.advance(e);92===h&&this.regexp_eatRegExpUnicodeEscapeSequence(d,e)&&(h=d.lastIntValue);
e=h;if(mm(e,!0)||36===e||95===e)return d.lastIntValue=h,!0;d.pos=k;return!1};Vf.regexp_eatRegExpIdentifierPart=function(d){var k=d.pos,e=11<=this.options.ecmaVersion,h=d.current(e);d.advance(e);92===h&&this.regexp_eatRegExpUnicodeEscapeSequence(d,e)&&(h=d.lastIntValue);e=h;if(ti(e,!0)||36===e||95===e||8204===e||8205===e)return d.lastIntValue=h,!0;d.pos=k;return!1};Vf.regexp_eatAtomEscape=function(d){if(this.regexp_eatBackReference(d)||this.regexp_eatCharacterClassEscape(d)||this.regexp_eatCharacterEscape(d)||
d.switchN&&this.regexp_eatKGroupName(d))return!0;d.switchU&&(99===d.current()&&d.raise("Invalid unicode escape"),d.raise("Invalid escape"));return!1};Vf.regexp_eatBackReference=function(d){var k=d.pos;if(this.regexp_eatDecimalEscape(d)){var e=d.lastIntValue;if(d.switchU)return e>d.maxBackReference&&(d.maxBackReference=e),!0;if(e<=d.numCapturingParens)return!0;d.pos=k}return!1};Vf.regexp_eatKGroupName=function(d){if(d.eat(107)){if(this.regexp_eatGroupName(d))return d.backReferenceNames.push(d.lastStringValue),
!0;d.raise("Invalid named reference")}return!1};Vf.regexp_eatCharacterEscape=function(d){return this.regexp_eatControlEscape(d)||this.regexp_eatCControlLetter(d)||this.regexp_eatZero(d)||this.regexp_eatHexEscapeSequence(d)||this.regexp_eatRegExpUnicodeEscapeSequence(d,!1)||!d.switchU&&this.regexp_eatLegacyOctalEscapeSequence(d)||this.regexp_eatIdentityEscape(d)};Vf.regexp_eatCControlLetter=function(d){var k=d.pos;if(d.eat(99)){if(this.regexp_eatControlLetter(d))return!0;d.pos=k}return!1};Vf.regexp_eatZero=
function(d){return 48!==d.current()||Zq(d.lookahead())?!1:(d.lastIntValue=0,d.advance(),!0)};Vf.regexp_eatControlEscape=function(d){var k=d.current();return 116===k?(d.lastIntValue=9,d.advance(),!0):110===k?(d.lastIntValue=10,d.advance(),!0):118===k?(d.lastIntValue=11,d.advance(),!0):102===k?(d.lastIntValue=12,d.advance(),!0):114===k?(d.lastIntValue=13,d.advance(),!0):!1};Vf.regexp_eatControlLetter=function(d){var k=d.current();return 65<=k&&90>=k||97<=k&&122>=k?(d.lastIntValue=k%32,d.advance(),!0):
!1};Vf.regexp_eatRegExpUnicodeEscapeSequence=function(d,k){void 0===k&&(k=!1);var e=d.pos;k=k||d.switchU;if(d.eat(117)){if(this.regexp_eatFixedHexDigits(d,4)){e=d.lastIntValue;if(k&&55296<=e&&56319>=e){k=d.pos;if(d.eat(92)&&d.eat(117)&&this.regexp_eatFixedHexDigits(d,4)){var h=d.lastIntValue;if(56320<=h&&57343>=h)return d.lastIntValue=1024*(e-55296)+(h-56320)+65536,!0}d.pos=k;d.lastIntValue=e}return!0}if(h=k&&d.eat(123)&&this.regexp_eatHexDigits(d)&&d.eat(125))h=d.lastIntValue,h=0<=h&&1114111>=h;
if(h)return!0;k&&d.raise("Invalid unicode escape");d.pos=e}return!1};Vf.regexp_eatIdentityEscape=function(d){if(d.switchU)return this.regexp_eatSyntaxCharacter(d)?!0:d.eat(47)?(d.lastIntValue=47,!0):!1;var k=d.current();return 99===k||d.switchN&&107===k?!1:(d.lastIntValue=k,d.advance(),!0)};Vf.regexp_eatDecimalEscape=function(d){d.lastIntValue=0;var k=d.current();if(49<=k&&57>=k){do d.lastIntValue=10*d.lastIntValue+(k-48),d.advance();while(48<=(k=d.current())&&57>=k);return!0}return!1};Vf.regexp_eatCharacterClassEscape=
function(d){var k=d.current();if(100===k||68===k||115===k||83===k||119===k||87===k)return d.lastIntValue=-1,d.advance(),!0;if(d.switchU&&9<=this.options.ecmaVersion&&(80===k||112===k)){d.lastIntValue=-1;d.advance();if(d.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(d)&&d.eat(125))return!0;d.raise("Invalid property name")}return!1};Vf.regexp_eatUnicodePropertyValueExpression=function(d){var k=d.pos;if(this.regexp_eatUnicodePropertyName(d)&&d.eat(61)){var e=d.lastStringValue;if(this.regexp_eatUnicodePropertyValue(d))return this.regexp_validateUnicodePropertyNameAndValue(d,
e,d.lastStringValue),!0}d.pos=k;return this.regexp_eatLoneUnicodePropertyNameOrValue(d)?(this.regexp_validateUnicodePropertyNameOrValue(d,d.lastStringValue),!0):!1};Vf.regexp_validateUnicodePropertyNameAndValue=function(d,k,e){jF.call(d.unicodeProperties.nonBinary,k)||d.raise("Invalid property name");d.unicodeProperties.nonBinary[k].test(e)||d.raise("Invalid property value")};Vf.regexp_validateUnicodePropertyNameOrValue=function(d,k){d.unicodeProperties.binary.test(k)||d.raise("Invalid property name")};
Vf.regexp_eatUnicodePropertyName=function(d){var k;for(d.lastStringValue="";vx(k=d.current());)d.lastStringValue+=Jv(k),d.advance();return""!==d.lastStringValue};Vf.regexp_eatUnicodePropertyValue=function(d){var k;for(d.lastStringValue="";Ez(k=d.current());)d.lastStringValue+=Jv(k),d.advance();return""!==d.lastStringValue};Vf.regexp_eatLoneUnicodePropertyNameOrValue=function(d){return this.regexp_eatUnicodePropertyValue(d)};Vf.regexp_eatCharacterClass=function(d){if(d.eat(91)){d.eat(94);this.regexp_classRanges(d);
if(d.eat(93))return!0;d.raise("Unterminated character class")}return!1};Vf.regexp_classRanges=function(d){for(;this.regexp_eatClassAtom(d);){var k=d.lastIntValue;if(d.eat(45)&&this.regexp_eatClassAtom(d)){var e=d.lastIntValue;!d.switchU||-1!==k&&-1!==e||d.raise("Invalid character class");-1!==k&&-1!==e&&k>e&&d.raise("Range out of order in character class")}}};Vf.regexp_eatClassAtom=function(d){var k=d.pos;if(d.eat(92)){if(this.regexp_eatClassEscape(d))return!0;if(d.switchU){var e=d.current();(99===
e||48<=e&&55>=e)&&d.raise("Invalid class escape");d.raise("Invalid escape")}d.pos=k}k=d.current();return 93!==k?(d.lastIntValue=k,d.advance(),!0):!1};Vf.regexp_eatClassEscape=function(d){var k=d.pos;if(d.eat(98))return d.lastIntValue=8,!0;if(d.switchU&&d.eat(45))return d.lastIntValue=45,!0;if(!d.switchU&&d.eat(99)){if(this.regexp_eatClassControlLetter(d))return!0;d.pos=k}return this.regexp_eatCharacterClassEscape(d)||this.regexp_eatCharacterEscape(d)};Vf.regexp_eatClassControlLetter=function(d){var k=
d.current();return Zq(k)||95===k?(d.lastIntValue=k%32,d.advance(),!0):!1};Vf.regexp_eatHexEscapeSequence=function(d){var k=d.pos;if(d.eat(120)){if(this.regexp_eatFixedHexDigits(d,2))return!0;d.switchU&&d.raise("Invalid escape");d.pos=k}return!1};Vf.regexp_eatDecimalDigits=function(d){var k=d.pos,e;for(d.lastIntValue=0;Zq(e=d.current());)d.lastIntValue=10*d.lastIntValue+(e-48),d.advance();return d.pos!==k};Vf.regexp_eatHexDigits=function(d){var k=d.pos,e;for(d.lastIntValue=0;wx(e=d.current());)d.lastIntValue=
16*d.lastIntValue+zs(e),d.advance();return d.pos!==k};Vf.regexp_eatLegacyOctalEscapeSequence=function(d){if(this.regexp_eatOctalDigit(d)){var k=d.lastIntValue;if(this.regexp_eatOctalDigit(d)){var e=d.lastIntValue;3>=k&&this.regexp_eatOctalDigit(d)?d.lastIntValue=64*k+8*e+d.lastIntValue:d.lastIntValue=8*k+e}else d.lastIntValue=k;return!0}return!1};Vf.regexp_eatOctalDigit=function(d){var k=d.current();if(48<=k&&55>=k)return d.lastIntValue=k-48,d.advance(),!0;d.lastIntValue=0;return!1};Vf.regexp_eatFixedHexDigits=
function(d,k){for(var e=d.pos,h=d.lastIntValue=0;h<k;++h){var n=d.current();if(!wx(n))return d.pos=e,!1;d.lastIntValue=16*d.lastIntValue+zs(n);d.advance()}return!0};var HD=function(d){this.type=d.type;this.value=d.value;this.start=d.start;this.end=d.end;d.options.locations&&(this.loc=new ux(d,d.startLoc,d.endLoc));d.options.ranges&&(this.range=[d.start,d.end])},Wh=Zj.prototype;Wh.next=function(d){!d&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+
this.type.keyword);if(this.options.onToken)this.options.onToken(new HD(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};Wh.getToken=function(){this.next();return new HD(this)};"undefined"!==typeof Symbol&&(Wh[Symbol.iterator]=function(){var d=this;return{next:function(){var k=d.getToken();return{done:k.type===Na.eof,value:k}}}});Wh.curContext=function(){return this.context[this.context.length-1]};Wh.nextToken=
function(){var d=this.curContext();d&&d.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(Na.eof);if(d.override)return d.override(this);this.readToken(this.fullCharCodeAtPos())};Wh.readToken=function(d){return mm(d,6<=this.options.ecmaVersion)||92===d?this.readWord():this.getTokenFromCode(d)};Wh.fullCharCodeAtPos=function(){var d=this.input.charCodeAt(this.pos);if(55295>=d||57344<=d)return d;
var k=this.input.charCodeAt(this.pos+1);return(d<<10)+k-56613888};Wh.skipBlockComment=function(){var d=this.options.onComment&&this.curPosition(),k=this.pos,e=this.input.indexOf("*/",this.pos+=2);-1===e&&this.raise(this.pos-2,"Unterminated comment");this.pos=e+2;if(this.options.locations){Iv.lastIndex=k;for(var h;(h=Iv.exec(this.input))&&h.index<this.pos;)++this.curLine,this.lineStart=h.index+h[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(k+2,e),k,this.pos,d,this.curPosition())};
Wh.skipLineComment=function(d){for(var k=this.pos,e=this.options.onComment&&this.curPosition(),h=this.input.charCodeAt(this.pos+=d);this.pos<this.input.length&&!Vj(h);)h=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(k+d,this.pos),k,this.pos,e,this.curPosition())};Wh.skipSpace=function(){a:for(;this.pos<this.input.length;){var d=this.input.charCodeAt(this.pos);switch(d){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+
1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<d&&14>d||5760<=d&&lP.test(String.fromCharCode(d)))++this.pos;else break a}}};Wh.finishToken=function(d,k){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());var e=this.type;this.type=d;this.value=
k;this.updateContext(e)};Wh.readToken_dot=function(){var d=this.input.charCodeAt(this.pos+1);if(48<=d&&57>=d)return this.readNumber(!0);var k=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===d&&46===k)return this.pos+=3,this.finishToken(Na.ellipsis);++this.pos;return this.finishToken(Na.dot)};Wh.readToken_slash=function(){var d=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===d?this.finishOp(Na.assign,2):this.finishOp(Na.slash,1)};
Wh.readToken_mult_modulo_exp=function(d){var k=this.input.charCodeAt(this.pos+1),e=1,h=42===d?Na.star:Na.modulo;7<=this.options.ecmaVersion&&42===d&&42===k&&(++e,h=Na.starstar,k=this.input.charCodeAt(this.pos+2));return 61===k?this.finishOp(Na.assign,e+1):this.finishOp(h,e)};Wh.readToken_pipe_amp=function(d){var k=this.input.charCodeAt(this.pos+1);return k===d?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Na.assign,3):this.finishOp(124===d?Na.logicalOR:Na.logicalAND,
2):61===k?this.finishOp(Na.assign,2):this.finishOp(124===d?Na.bitwiseOR:Na.bitwiseAND,1)};Wh.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Na.assign,2):this.finishOp(Na.bitwiseXOR,1)};Wh.readToken_plus_min=function(d){var k=this.input.charCodeAt(this.pos+1);return k===d?45!==k||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!so.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Na.incDec,2):(this.skipLineComment(3),
this.skipSpace(),this.nextToken()):61===k?this.finishOp(Na.assign,2):this.finishOp(Na.plusMin,1)};Wh.readToken_lt_gt=function(d){var k=this.input.charCodeAt(this.pos+1),e=1;if(k===d)return e=62===d&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+e)?this.finishOp(Na.assign,e+1):this.finishOp(Na.bitShift,e);if(33===k&&60===d&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),this.skipSpace(),
this.nextToken();61===k&&(e=2);return this.finishOp(Na.relational,e)};Wh.readToken_eq_excl=function(d){var k=this.input.charCodeAt(this.pos+1);return 61===k?this.finishOp(Na.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===d&&62===k&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(Na.arrow)):this.finishOp(61===d?Na.eq:Na.prefix,1)};Wh.readToken_question=function(){var d=this.options.ecmaVersion;if(11<=d){var k=this.input.charCodeAt(this.pos+1);if(46===k){var e=this.input.charCodeAt(this.pos+
2);if(48>e||57<e)return this.finishOp(Na.questionDot,2)}if(63===k)return 12<=d&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Na.assign,3):this.finishOp(Na.coalesce,2)}return this.finishOp(Na.question,1)};Wh.getTokenFromCode=function(d){switch(d){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Na.parenL);case 41:return++this.pos,this.finishToken(Na.parenR);case 59:return++this.pos,this.finishToken(Na.semi);case 44:return++this.pos,this.finishToken(Na.comma);case 91:return++this.pos,
this.finishToken(Na.bracketL);case 93:return++this.pos,this.finishToken(Na.bracketR);case 123:return++this.pos,this.finishToken(Na.braceL);case 125:return++this.pos,this.finishToken(Na.braceR);case 58:return++this.pos,this.finishToken(Na.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken(Na.backQuote);case 48:d=this.input.charCodeAt(this.pos+1);if(120===d||88===d)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===d||79===d)return this.readRadixNumber(8);
if(98===d||66===d)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(d);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(d);case 124:case 38:return this.readToken_pipe_amp(d);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(d);case 60:case 62:return this.readToken_lt_gt(d);case 61:case 33:return this.readToken_eq_excl(d);
case 63:return this.readToken_question();case 126:return this.finishOp(Na.prefix,1)}this.raise(this.pos,"Unexpected character '"+$q(d)+"'")};Wh.finishOp=function(d,k){var e=this.input.slice(this.pos,this.pos+k);this.pos+=k;return this.finishToken(d,e)};Wh.readRegexp=function(){for(var d,k,e=this.pos;;){this.pos>=this.input.length&&this.raise(e,"Unterminated regular expression");var h=this.input.charAt(this.pos);so.test(h)&&this.raise(e,"Unterminated regular expression");if(d)d=!1;else{if("["===h)k=
!0;else if("]"===h&&k)k=!1;else if("/"===h&&!k)break;d="\\"===h}++this.pos}d=this.input.slice(e,this.pos);++this.pos;h=this.pos;k=this.readWord1();this.containsEsc&&this.unexpected(h);h=this.regexpState||(this.regexpState=new bv(this));h.reset(e,d,k);this.validateRegExpFlags(h);this.validateRegExpPattern(h);e=null;try{e=new RegExp(d,k)}catch(n){}return this.finishToken(Na.regexp,{pattern:d,flags:k,value:e})};Wh.readInt=function(d,k,e){var h=12<=this.options.ecmaVersion&&void 0===k;e=e&&48===this.input.charCodeAt(this.pos);
for(var n=this.pos,b=0,c=0,l=0,a=null==k?Infinity:k;l<a;++l,++this.pos){var f=this.input.charCodeAt(this.pos);if(h&&95===f)e&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===c&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===l&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),c=f;else{var m=97<=f?f-97+10:65<=f?f-65+10:48<=f&&57>=f?f-48:Infinity;if(m>=d)break;c=f;
b=b*d+m}}h&&95===c&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===n||null!=k&&this.pos-n!==k?null:b};Wh.readRadixNumber=function(d){var k=this.pos;this.pos+=2;var e=this.readInt(d);null==e&&this.raise(this.start+2,"Expected number in radix "+d);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(e=Kv(this.input.slice(k,this.pos)),++this.pos):mm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");
return this.finishToken(Na.num,e)};Wh.readNumber=function(d){var k=this.pos;d||null!==this.readInt(10,void 0,!0)||this.raise(k,"Invalid number");var e=2<=this.pos-k&&48===this.input.charCodeAt(k);e&&this.strict&&this.raise(k,"Invalid number");var h=this.input.charCodeAt(this.pos);if(!e&&!d&&11<=this.options.ecmaVersion&&110===h)return e=Kv(this.input.slice(k,this.pos)),++this.pos,mm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Na.num,e);e&&/[89]/.test(this.input.slice(k,
this.pos))&&(e=!1);46!==h||e||(++this.pos,this.readInt(10),h=this.input.charCodeAt(this.pos));69!==h&&101!==h||e||(h=this.input.charCodeAt(++this.pos),43!==h&&45!==h||++this.pos,null===this.readInt(10)&&this.raise(k,"Invalid number"));mm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");d=this.input.slice(k,this.pos);e=e?parseInt(d,8):parseFloat(d.replace(/_/g,""));return this.finishToken(Na.num,e)};Wh.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>
this.options.ecmaVersion&&this.unexpected();var d=++this.pos;var k=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<k&&this.invalidStringToken(d,"Code point out of bounds")}else k=this.readHexChar(4);return k};Wh.readString=function(d){for(var k="",e=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var h=this.input.charCodeAt(this.pos);if(h===d)break;92===h?(k+=this.input.slice(e,this.pos),k+=this.readEscapedChar(!1),e=
this.pos):(Vj(h,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}k+=this.input.slice(e,this.pos++);return this.finishToken(Na.string,k)};var g0={};Wh.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(d){if(d===g0)this.readInvalidTemplateToken();else throw d;}this.inTemplateElement=!1};Wh.invalidStringToken=function(d,k){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw g0;this.raise(d,k)};Wh.readTmplToken=
function(){for(var d="",k=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var e=this.input.charCodeAt(this.pos);if(96===e||36===e&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&(this.type===Na.template||this.type===Na.invalidTemplate)){if(36===e)return this.pos+=2,this.finishToken(Na.dollarBraceL);++this.pos;return this.finishToken(Na.backQuote)}d+=this.input.slice(k,this.pos);return this.finishToken(Na.template,d)}if(92===e)d+=this.input.slice(k,
this.pos),d+=this.readEscapedChar(!0),k=this.pos;else if(Vj(e)){d+=this.input.slice(k,this.pos);++this.pos;switch(e){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:d+="\n";break;default:d+=String.fromCharCode(e)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);k=this.pos}else++this.pos}};Wh.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;
case "`":return this.finishToken(Na.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Wh.readEscapedChar=function(d){var k=this.input.charCodeAt(++this.pos);++this.pos;switch(k){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return $q(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;
case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),d)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(48<=k&&55>=k){var e=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],h=parseInt(e,8);255<h&&(e=e.slice(0,-1),h=parseInt(e,8));this.pos+=e.length-1;k=this.input.charCodeAt(this.pos);"0"===e&&56!==k&&57!==k||!this.strict&&
!d||this.invalidStringToken(this.pos-1-e.length,d?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(h)}return Vj(k)?"":String.fromCharCode(k)}};Wh.readHexChar=function(d){var k=this.pos;d=this.readInt(16,d);null===d&&this.invalidStringToken(k,"Bad character escape sequence");return d};Wh.readWord1=function(){this.containsEsc=!1;for(var d="",k=!0,e=this.pos,h=6<=this.options.ecmaVersion;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(ti(n,
h))this.pos+=65535>=n?1:2;else if(92===n)this.containsEsc=!0,d+=this.input.slice(e,this.pos),e=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,n=this.readCodePoint(),(k?mm:ti)(n,h)||this.invalidStringToken(e,"Invalid Unicode escape"),d+=$q(n),e=this.pos;else break;k=!1}return d+this.input.slice(e,this.pos)};Wh.readWord=function(){var d=this.readWord1(),k=Na.name;this.keywords.test(d)&&(k=iF[d]);return this.finishToken(k,
d)};Zj.acorn={Parser:Zj,version:"8.0.4",defaultOptions:ZB,Position:Cz,SourceLocation:ux,getLineInfo:Mp,Node:Iw,TokenType:li,tokTypes:Na,keywordTypes:iF,TokContext:qq,tokContexts:ak,isIdentifierChar:ti,isIdentifierStart:mm,Token:HD,isNewLine:Vj,lineBreak:so,lineBreakG:Iv,nonASCIIwhitespace:lP};var ut=Object.freeze({__proto__:null,Node:Iw,Parser:Zj,Position:Cz,SourceLocation:ux,TokContext:qq,Token:HD,TokenType:li,defaultOptions:ZB,getLineInfo:Mp,isIdentifierChar:ti,isIdentifierStart:mm,isNewLine:Vj,
keywordTypes:iF,lineBreak:so,lineBreakG:Iv,nonASCIIwhitespace:lP,parse:function(d,k){return Zj.parse(d,k)},parseExpressionAt:function(d,k,e){return Zj.parseExpressionAt(d,k,e)},tokContexts:ak,tokTypes:Na,tokenizer:function(d,k){return Zj.tokenizer(d,k)},version:"8.0.4"});ya("bC",ut);var My=function(d,k){this.node=d;this.state=k},se={};se.Program=se.BlockStatement=function(d,k,e){var h=0;for(d=d.body;h<d.length;h+=1)e(d[h],k,"Statement")};se.Statement=Ik;se.EmptyStatement=qn;se.ExpressionStatement=
se.ParenthesizedExpression=se.ChainExpression=function(d,k,e){return e(d.expression,k,"Expression")};se.IfStatement=function(d,k,e){e(d.test,k,"Expression");e(d.consequent,k,"Statement");d.alternate&&e(d.alternate,k,"Statement")};se.LabeledStatement=function(d,k,e){return e(d.body,k,"Statement")};se.BreakStatement=se.ContinueStatement=qn;se.WithStatement=function(d,k,e){e(d.object,k,"Expression");e(d.body,k,"Statement")};se.SwitchStatement=function(d,k,e){e(d.discriminant,k,"Expression");var h=0;
for(d=d.cases;h<d.length;h+=1){var n=d[h];n.test&&e(n.test,k,"Expression");var b=0;for(n=n.consequent;b<n.length;b+=1)e(n[b],k,"Statement")}};se.SwitchCase=function(d,k,e){d.test&&e(d.test,k,"Expression");var h=0;for(d=d.consequent;h<d.length;h+=1)e(d[h],k,"Statement")};se.ReturnStatement=se.YieldExpression=se.AwaitExpression=function(d,k,e){d.argument&&e(d.argument,k,"Expression")};se.ThrowStatement=se.SpreadElement=function(d,k,e){return e(d.argument,k,"Expression")};se.TryStatement=function(d,
k,e){e(d.block,k,"Statement");d.handler&&e(d.handler,k);d.finalizer&&e(d.finalizer,k,"Statement")};se.CatchClause=function(d,k,e){d.param&&e(d.param,k,"Pattern");e(d.body,k,"Statement")};se.WhileStatement=se.DoWhileStatement=function(d,k,e){e(d.test,k,"Expression");e(d.body,k,"Statement")};se.ForStatement=function(d,k,e){d.init&&e(d.init,k,"ForInit");d.test&&e(d.test,k,"Expression");d.update&&e(d.update,k,"Expression");e(d.body,k,"Statement")};se.ForInStatement=se.ForOfStatement=function(d,k,e){e(d.left,
k,"ForInit");e(d.right,k,"Expression");e(d.body,k,"Statement")};se.ForInit=function(d,k,e){"VariableDeclaration"===d.type?e(d,k):e(d,k,"Expression")};se.DebuggerStatement=qn;se.FunctionDeclaration=function(d,k,e){return e(d,k,"Function")};se.VariableDeclaration=function(d,k,e){var h=0;for(d=d.declarations;h<d.length;h+=1)e(d[h],k)};se.VariableDeclarator=function(d,k,e){e(d.id,k,"Pattern");d.init&&e(d.init,k,"Expression")};se.Function=function(d,k,e){d.id&&e(d.id,k,"Pattern");for(var h=0,n=d.params;h<
n.length;h+=1)e(n[h],k,"Pattern");e(d.body,k,d.expression?"Expression":"Statement")};se.Pattern=function(d,k,e){"Identifier"===d.type?e(d,k,"VariablePattern"):"MemberExpression"===d.type?e(d,k,"MemberPattern"):e(d,k)};se.VariablePattern=qn;se.MemberPattern=Ik;se.RestElement=function(d,k,e){return e(d.argument,k,"Pattern")};se.ArrayPattern=function(d,k,e){var h=0;for(d=d.elements;h<d.length;h+=1){var n=d[h];n&&e(n,k,"Pattern")}};se.ObjectPattern=function(d,k,e){var h=0;for(d=d.properties;h<d.length;h+=
1){var n=d[h];"Property"===n.type?(n.computed&&e(n.key,k,"Expression"),e(n.value,k,"Pattern")):"RestElement"===n.type&&e(n.argument,k,"Pattern")}};se.Expression=Ik;se.ThisExpression=se.Super=se.MetaProperty=qn;se.ArrayExpression=function(d,k,e){var h=0;for(d=d.elements;h<d.length;h+=1){var n=d[h];n&&e(n,k,"Expression")}};se.ObjectExpression=function(d,k,e){var h=0;for(d=d.properties;h<d.length;h+=1)e(d[h],k)};se.FunctionExpression=se.ArrowFunctionExpression=se.FunctionDeclaration;se.SequenceExpression=
function(d,k,e){var h=0;for(d=d.expressions;h<d.length;h+=1)e(d[h],k,"Expression")};se.TemplateLiteral=function(d,k,e){for(var h=0,n=d.quasis;h<n.length;h+=1)e(n[h],k);h=0;for(d=d.expressions;h<d.length;h+=1)e(d[h],k,"Expression")};se.TemplateElement=qn;se.UnaryExpression=se.UpdateExpression=function(d,k,e){e(d.argument,k,"Expression")};se.BinaryExpression=se.LogicalExpression=function(d,k,e){e(d.left,k,"Expression");e(d.right,k,"Expression")};se.AssignmentExpression=se.AssignmentPattern=function(d,
k,e){e(d.left,k,"Pattern");e(d.right,k,"Expression")};se.ConditionalExpression=function(d,k,e){e(d.test,k,"Expression");e(d.consequent,k,"Expression");e(d.alternate,k,"Expression")};se.NewExpression=se.CallExpression=function(d,k,e){e(d.callee,k,"Expression");if(d.arguments){var h=0;for(d=d.arguments;h<d.length;h+=1)e(d[h],k,"Expression")}};se.MemberExpression=function(d,k,e){e(d.object,k,"Expression");d.computed&&e(d.property,k,"Expression")};se.ExportNamedDeclaration=se.ExportDefaultDeclaration=
function(d,k,e){d.declaration&&e(d.declaration,k,"ExportNamedDeclaration"===d.type||d.declaration.id?"Statement":"Expression");d.source&&e(d.source,k,"Expression")};se.ExportAllDeclaration=function(d,k,e){d.exported&&e(d.exported,k);e(d.source,k,"Expression")};se.ImportDeclaration=function(d,k,e){for(var h=0,n=d.specifiers;h<n.length;h+=1)e(n[h],k);e(d.source,k,"Expression")};se.ImportExpression=function(d,k,e){e(d.source,k,"Expression")};se.ImportSpecifier=se.ImportDefaultSpecifier=se.ImportNamespaceSpecifier=
se.Identifier=se.Literal=qn;se.TaggedTemplateExpression=function(d,k,e){e(d.tag,k,"Expression");e(d.quasi,k,"Expression")};se.ClassDeclaration=se.ClassExpression=function(d,k,e){return e(d,k,"Class")};se.Class=function(d,k,e){d.id&&e(d.id,k,"Pattern");d.superClass&&e(d.superClass,k,"Expression");e(d.body,k)};se.ClassBody=function(d,k,e){var h=0;for(d=d.body;h<d.length;h+=1)e(d[h],k)};se.MethodDefinition=se.Property=function(d,k,e){d.computed&&e(d.key,k,"Expression");e(d.value,k,"Expression")};var Or=
Object.freeze({__proto__:null,ancestor:function(d,k,e,h,n){var b=[];e||(e=se);(function m(l,a,f){f=f||l.type;var q=k[f],r=l!==b[b.length-1];r&&b.push(l);e[f](l,a,m);q&&q(l,a||b,b);r&&b.pop()})(d,h,n)},base:se,findNodeAfter:function(d,k,e,h,n){e=hh(e);h||(h=se);try{(function f(c,l,a){if(!(c.end<k)){a=a||c.type;if(c.start>=k&&e(a,c))throw new My(c,l);h[a](c,l,f)}})(d,n)}catch(b){if(b instanceof My)return b;throw b;}},findNodeAround:function(d,k,e,h,n){e=hh(e);h||(h=se);try{(function f(c,l,a){a=a||c.type;
if(!(c.start>k||c.end<k)&&(h[a](c,l,f),e(a,c)))throw new My(c,l);})(d,n)}catch(b){if(b instanceof My)return b;throw b;}},findNodeAt:function(d,k,e,h,n,b){n||(n=se);h=hh(h);try{(function m(l,a,f){f=f||l.type;if((null==k||l.start<=k)&&(null==e||l.end>=e))n[f](l,a,m);if(!(null!=k&&l.start!==k||null!=e&&l.end!==e)&&h(f,l))throw new My(l,a);})(d,b)}catch(c){if(c instanceof My)return c;throw c;}},findNodeBefore:function(d,k,e,h,n){e=hh(e);h||(h=se);var b;(function m(l,a,f){l.start>k||(f=f||l.type,l.end<=
k&&(!b||b.node.end<l.end)&&e(f,l)&&(b=new My(l,a)),h[f](l,a,m))})(d,n);return b},full:function(d,k,e,h,n){e||(e=se);var b;(function m(l,a,f){f=f||l.type;e[f](l,a,m);b!=l&&(k(l,a,f),b=l)})(d,h,n)},fullAncestor:function(d,k,e,h){e||(e=se);var n=[],b;(function m(l,a,f){f=f||l.type;var q=l!==n[n.length-1];q&&n.push(l);e[f](l,a,m);b!=l&&(k(l,a||n,n,f),b=l);q&&n.pop()})(d,h)},make:Ko,recursive:function(d,k,e,h,n){var b=e?Ko(e,h||void 0):h;(function m(l,a,f){b[f||l.type](l,a,m)})(d,k,n)},simple:function(d,
k,e,h,n){e||(e=se);(function f(c,l,a){a=a||c.type;var m=k[a];e[a](c,l,f);m&&m(c,l)})(d,h,n)}}),$i=function(d,k){void 0===k&&(k={});this.toks=this.constructor.BaseParser.tokenizer(d,k);this.options=this.toks.options;this.input=this.toks.input;this.tok=this.last={type:Na.eof,start:0,end:0};this.tok.validateRegExpFlags=mu;this.tok.validateRegExpPattern=mu;this.options.locations&&(d=this.toks.curPosition(),this.tok.loc=new ux(this.toks,d,d));this.ahead=[];this.context=[];this.curLineStart=this.curIndent=
0;this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.inFunction=this.inAsync=!1};$i.prototype.startNode=function(){return new Iw(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)};$i.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:this.tok.start};$i.prototype.startNodeAt=function(d){return this.options.locations?new Iw(this.toks,d[0],d[1]):new Iw(this.toks,d)};$i.prototype.finishNode=function(d,k){d.type=k;d.end=
this.last.end;this.options.locations&&(d.loc.end=this.last.loc.end);this.options.ranges&&(d.range[1]=this.last.end);return d};$i.prototype.dummyNode=function(d){var k=this.startNode();k.type=d;k.end=k.start;this.options.locations&&(k.loc.end=k.loc.start);this.options.ranges&&(k.range[1]=k.start);this.last={type:Na.name,start:k.start,end:k.start,loc:k.loc};return k};$i.prototype.dummyIdent=function(){var d=this.dummyNode("Identifier");d.name="\u2716";return d};$i.prototype.dummyString=function(){var d=
this.dummyNode("Literal");d.value=d.raw="\u2716";return d};$i.prototype.eat=function(d){return this.tok.type===d?(this.next(),!0):!1};$i.prototype.isContextual=function(d){return this.tok.type===Na.name&&this.tok.value===d};$i.prototype.eatContextual=function(d){return this.tok.value===d&&this.eat(Na.name)};$i.prototype.canInsertSemicolon=function(){return this.tok.type===Na.eof||this.tok.type===Na.braceR||so.test(this.input.slice(this.last.end,this.tok.start))};$i.prototype.semicolon=function(){return this.eat(Na.semi)};
$i.prototype.expect=function(d){if(this.eat(d))return!0;for(var k=1;2>=k;k++)if(this.lookAhead(k).type===d){for(d=0;d<k;d++)this.next();return!0}};$i.prototype.pushCx=function(){this.context.push(this.curIndent)};$i.prototype.popCx=function(){this.curIndent=this.context.pop()};$i.prototype.lineEnd=function(d){for(;d<this.input.length&&!Vj(this.input.charCodeAt(d));)++d;return d};$i.prototype.indentationAfter=function(d){for(var k=0;;++d){var e=this.input.charCodeAt(d);if(32===e)++k;else if(9===e)k+=
this.options.tabSize;else return k}};$i.prototype.closes=function(d,k,e,h){return this.tok.type===d||this.tok.type===Na.eof?!0:e!==this.curLineStart&&this.curIndent<k&&this.tokenStartsLine()&&(!h||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<k)};$i.prototype.tokenStartsLine=function(){for(var d=this.tok.start-1;d>=this.curLineStart;--d){var k=this.input.charCodeAt(d);if(9!==k&&32!==k)return!1}return!0};$i.prototype.extend=function(d,k){this[d]=k(this[d])};$i.prototype.parse=
function(){this.next();return this.parseTopLevel()};$i.extend=function(){for(var d=[],k=arguments.length;k--;)d[k]=arguments[k];k=this;for(var e=0;e<d.length;e++)k=d[e](k);return k};$i.parse=function(d,k){return(new this(d,k)).parse()};$i.BaseParser=Zj;var rI=$i.prototype;rI.next=function(){this.last=this.tok;this.tok=this.ahead.length?this.ahead.shift():this.readToken();if(this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=
this.lineEnd(this.curLineStart)+1;this.curIndent=this.indentationAfter(this.curLineStart)}};rI.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===Na.dot&&"."===this.input.substr(this.toks.end,1)&&6<=this.options.ecmaVersion&&(this.toks.end++,this.toks.type=Na.ellipsis),new HD(this.toks)}catch(h){if(!(h instanceof SyntaxError))throw h;var d=h.message,k=h.raisedAt,e=!0;if(/unterminated/i.test(d))if(k=this.lineEnd(h.pos+1),/string/.test(d))e={start:h.pos,end:k,type:Na.string,value:this.input.slice(h.pos+
1,k)};else if(/regular expr/i.test(d)){e=this.input.slice(h.pos,k);try{e=new RegExp(e)}catch(n){}e={start:h.pos,end:k,type:Na.regexp,value:e}}else e=/template/.test(d)?{start:h.pos,end:k,type:Na.template,value:this.input.slice(h.pos,k)}:!1;else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(d))for(;k<this.input.length&&!ar(this.input.charCodeAt(k));)++k;else if(/character escape|expected hexadecimal/i.test(d))for(;k<
this.input.length&&(d=this.input.charCodeAt(k++),34!==d&&39!==d&&!Vj(d)););else if(/unexpected character/i.test(d))k++,e=!1;else if(/regular expression/i.test(d))e=!0;else throw h;this.resetTo(k);!0===e&&(e={start:k,end:k,type:Na.name,value:"\u2716"});if(e)return this.options.locations&&(e.loc=new ux(this.toks,Mp(this.input,e.start),Mp(this.input,e.end))),e}};rI.resetTo=function(d){this.toks.pos=d;var k=this.input.charAt(d-1);this.toks.exprAllowed=!k||/[[{(,;:?/*=+\-~!|&%^<>]/.test(k)||/[enwfd]/.test(k)&&
/\b(case|else|return|throw|new|in|(instance|type)?of|delete|void)$/.test(this.input.slice(d-10,d));if(this.options.locations){this.toks.curLine=1;this.toks.lineStart=Iv.lastIndex=0;for(var e;(e=Iv.exec(this.input))&&e.index<d;)++this.toks.curLine,this.toks.lineStart=e.index+e[0].length}};rI.lookAhead=function(d){for(;d>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[d-1]};var rq=$i.prototype;rq.parseTopLevel=function(){var d=this.startNodeAt(this.options.locations?[0,Mp(this.input,
0)]:0);for(d.body=[];this.tok.type!==Na.eof;)d.body.push(this.parseStatement());this.toks.adaptDirectivePrologue(d.body);this.last=this.tok;d.sourceType=this.options.sourceType;return this.finishNode(d,"Program")};rq.parseStatement=function(){var d=this.tok.type,k=this.startNode();if(this.toks.isLet()){d=Na._var;var e="let"}switch(d){case Na._break:case Na._continue:this.next();var h=d===Na._break;this.semicolon()||this.canInsertSemicolon()?k.label=null:(k.label=this.tok.type===Na.name?this.parseIdent():
null,this.semicolon());return this.finishNode(k,h?"BreakStatement":"ContinueStatement");case Na._debugger:return this.next(),this.semicolon(),this.finishNode(k,"DebuggerStatement");case Na._do:return this.next(),k.body=this.parseStatement(),k.test=this.eat(Na._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(k,"DoWhileStatement");case Na._for:this.next();h=9<=this.options.ecmaVersion&&this.eatContextual("await");this.pushCx();this.expect(Na.parenL);if(this.tok.type===
Na.semi)return this.parseFor(k,null);if((d=this.toks.isLet())||this.tok.type===Na._var||this.tok.type===Na._const)return d=this.parseVar(this.startNode(),!0,d?"let":this.tok.value),1!==d.declarations.length||this.tok.type!==Na._in&&!this.isContextual("of")?this.parseFor(k,d):(9<=this.options.ecmaVersion&&this.tok.type!==Na._in&&(k.await=h),this.parseForIn(k,d));d=this.parseExpression(!0);return this.tok.type===Na._in||this.isContextual("of")?(9<=this.options.ecmaVersion&&this.tok.type!==Na._in&&(k.await=
h),this.parseForIn(k,this.toAssignable(d))):this.parseFor(k,d);case Na._function:return this.next(),this.parseFunction(k,!0);case Na._if:return this.next(),k.test=this.parseParenExpression(),k.consequent=this.parseStatement(),k.alternate=this.eat(Na._else)?this.parseStatement():null,this.finishNode(k,"IfStatement");case Na._return:return this.next(),this.eat(Na.semi)||this.canInsertSemicolon()?k.argument=null:(k.argument=this.parseExpression(),this.semicolon()),this.finishNode(k,"ReturnStatement");
case Na._switch:d=this.curIndent;e=this.curLineStart;this.next();k.discriminant=this.parseParenExpression();k.cases=[];this.pushCx();for(this.expect(Na.braceL);!this.closes(Na.braceR,d,e,!0);)if(this.tok.type===Na._case||this.tok.type===Na._default){var n=this.tok.type===Na._case;h&&this.finishNode(h,"SwitchCase");k.cases.push(h=this.startNode());h.consequent=[];this.next();h.test=n?this.parseExpression():null;this.expect(Na.colon)}else h||(k.cases.push(h=this.startNode()),h.consequent=[],h.test=
null),h.consequent.push(this.parseStatement());h&&this.finishNode(h,"SwitchCase");this.popCx();this.eat(Na.braceR);return this.finishNode(k,"SwitchStatement");case Na._throw:return this.next(),k.argument=this.parseExpression(),this.semicolon(),this.finishNode(k,"ThrowStatement");case Na._try:return this.next(),k.block=this.parseBlock(),k.handler=null,this.tok.type===Na._catch&&(h=this.startNode(),this.next(),this.eat(Na.parenL)?(h.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(Na.parenR)):
h.param=null,h.body=this.parseBlock(),k.handler=this.finishNode(h,"CatchClause")),k.finalizer=this.eat(Na._finally)?this.parseBlock():null,k.handler||k.finalizer?this.finishNode(k,"TryStatement"):k.block;case Na._var:case Na._const:return this.parseVar(k,!1,e||this.tok.value);case Na._while:return this.next(),k.test=this.parseParenExpression(),k.body=this.parseStatement(),this.finishNode(k,"WhileStatement");case Na._with:return this.next(),k.object=this.parseParenExpression(),k.body=this.parseStatement(),
this.finishNode(k,"WithStatement");case Na.braceL:return this.parseBlock();case Na.semi:return this.next(),this.finishNode(k,"EmptyStatement");case Na._class:return this.parseClass(!0);case Na._import:return 10<this.options.ecmaVersion&&(h=this.lookAhead(1).type,h===Na.parenL||h===Na.dot)?(k.expression=this.parseExpression(),this.semicolon(),this.finishNode(k,"ExpressionStatement")):this.parseImport();case Na._export:return this.parseExport();default:if(this.toks.isAsyncFunction())return this.next(),
this.next(),this.parseFunction(k,!0,!0);h=this.parseExpression();if(Kl(h))return this.next(),this.tok.type===Na.eof?this.finishNode(k,"EmptyStatement"):this.parseStatement();if(d===Na.name&&"Identifier"===h.type&&this.eat(Na.colon))return k.body=this.parseStatement(),k.label=h,this.finishNode(k,"LabeledStatement");k.expression=h;this.semicolon();return this.finishNode(k,"ExpressionStatement")}};rq.parseBlock=function(){var d=this.startNode();this.pushCx();this.expect(Na.braceL);var k=this.curIndent,
e=this.curLineStart;for(d.body=[];!this.closes(Na.braceR,k,e,!0);)d.body.push(this.parseStatement());this.popCx();this.eat(Na.braceR);return this.finishNode(d,"BlockStatement")};rq.parseFor=function(d,k){d.init=k;d.test=d.update=null;this.eat(Na.semi)&&this.tok.type!==Na.semi&&(d.test=this.parseExpression());this.eat(Na.semi)&&this.tok.type!==Na.parenR&&(d.update=this.parseExpression());this.popCx();this.expect(Na.parenR);d.body=this.parseStatement();return this.finishNode(d,"ForStatement")};rq.parseForIn=
function(d,k){var e=this.tok.type===Na._in?"ForInStatement":"ForOfStatement";this.next();d.left=k;d.right=this.parseExpression();this.popCx();this.expect(Na.parenR);d.body=this.parseStatement();return this.finishNode(d,e)};rq.parseVar=function(d,k,e){d.kind=e;this.next();d.declarations=[];do e=this.startNode(),e.id=6<=this.options.ecmaVersion?this.toAssignable(this.parseExprAtom(),!0):this.parseIdent(),e.init=this.eat(Na.eq)?this.parseMaybeAssign(k):null,d.declarations.push(this.finishNode(e,"VariableDeclarator"));
while(this.eat(Na.comma));d.declarations.length||(e=this.startNode(),e.id=this.dummyIdent(),d.declarations.push(this.finishNode(e,"VariableDeclarator")));k||this.semicolon();return this.finishNode(d,"VariableDeclaration")};rq.parseClass=function(d){var k=this.startNode();this.next();k.id=this.tok.type===Na.name?this.parseIdent():!0===d?this.dummyIdent():null;k.superClass=this.eat(Na._extends)?this.parseExpression():null;k.body=this.startNode();k.body.body=[];this.pushCx();var e=this.curIndent+1,h=
this.curLineStart;this.eat(Na.braceL);this.curIndent+1<e&&(e=this.curIndent,h=this.curLineStart);for(;!this.closes(Na.braceR,e,h);)if(!this.semicolon()){var n=this.startNode(),b=void 0;6<=this.options.ecmaVersion&&(n.static=!1,b=this.eat(Na.star));this.parsePropertyName(n);if(Kl(n.key))Kl(this.parseMaybeAssign())&&this.next(),this.eat(Na.comma);else{"Identifier"!==n.key.type||n.computed||"static"!==n.key.name||this.tok.type===Na.parenL||this.tok.type===Na.braceL?n.static=!1:(n.static=!0,b=this.eat(Na.star),
this.parsePropertyName(n));if(n.computed||"Identifier"!==n.key.type||"async"!==n.key.name||this.tok.type===Na.parenL||this.canInsertSemicolon())var c=!1;else c=!0,b=9<=this.options.ecmaVersion&&this.eat(Na.star),this.parsePropertyName(n);5<=this.options.ecmaVersion&&"Identifier"===n.key.type&&!n.computed&&("get"===n.key.name||"set"===n.key.name)&&this.tok.type!==Na.parenL&&this.tok.type!==Na.braceL?(n.kind=n.key.name,this.parsePropertyName(n),n.value=this.parseMethod(!1)):(n.kind=n.computed||n.static||
b||c||!("Identifier"===n.key.type&&"constructor"===n.key.name||"Literal"===n.key.type&&"constructor"===n.key.value)?"method":"constructor",n.value=this.parseMethod(b,c));k.body.body.push(this.finishNode(n,"MethodDefinition"))}}this.popCx();this.eat(Na.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));this.semicolon();this.finishNode(k.body,"ClassBody");return this.finishNode(k,d?"ClassDeclaration":"ClassExpression")};rq.parseFunction=function(d,
k,e){var h=this.inAsync,n=this.inFunction;this.initFunction(d);6<=this.options.ecmaVersion&&(d.generator=this.eat(Na.star));8<=this.options.ecmaVersion&&(d.async=!!e);this.tok.type===Na.name?d.id=this.parseIdent():!0===k&&(d.id=this.dummyIdent());this.inAsync=d.async;this.inFunction=!0;d.params=this.parseFunctionParams();d.body=this.parseBlock();this.toks.adaptDirectivePrologue(d.body.body);this.inAsync=h;this.inFunction=n;return this.finishNode(d,k?"FunctionDeclaration":"FunctionExpression")};rq.parseExport=
function(){var d=this.startNode();this.next();if(this.eat(Na.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?d.exported=this.parseExprAtom():d.exported=null),d.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),this.finishNode(d,"ExportAllDeclaration");if(this.eat(Na._default)){var k;if(this.tok.type===Na._function||(k=this.toks.isAsyncFunction())){var e=this.startNode();this.next();k&&this.next();d.declaration=this.parseFunction(e,"nullableID",k)}else this.tok.type===
Na._class?d.declaration=this.parseClass("nullableID"):(d.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(d,"ExportDefaultDeclaration")}this.tok.type.keyword||this.toks.isLet()||this.toks.isAsyncFunction()?(d.declaration=this.parseStatement(),d.specifiers=[],d.source=null):(d.declaration=null,d.specifiers=this.parseExportSpecifierList(),d.source=this.eatContextual("from")?this.parseExprAtom():null,this.semicolon());return this.finishNode(d,"ExportNamedDeclaration")};rq.parseImport=
function(){var d=this.startNode();this.next();if(this.tok.type===Na.string)d.specifiers=[],d.source=this.parseExprAtom();else{if(this.tok.type===Na.name&&"from"!==this.tok.value){var k=this.startNode();k.local=this.parseIdent();this.finishNode(k,"ImportDefaultSpecifier");this.eat(Na.comma)}d.specifiers=this.parseImportSpecifiers();d.source=this.eatContextual("from")&&this.tok.type===Na.string?this.parseExprAtom():this.dummyString();k&&d.specifiers.unshift(k)}this.semicolon();return this.finishNode(d,
"ImportDeclaration")};rq.parseImportSpecifiers=function(){var d=[];if(this.tok.type===Na.star){var k=this.startNode();this.next();k.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent();d.push(this.finishNode(k,"ImportNamespaceSpecifier"))}else{k=this.curIndent;var e=this.curLineStart,h=this.nextLineStart;this.pushCx();this.eat(Na.braceL);this.curLineStart>h&&(h=this.curLineStart);for(;!this.closes(Na.braceR,k+(this.curLineStart<=h?1:0),e);){var n=this.startNode();if(this.eat(Na.star))n.local=
this.eatContextual("as")?this.parseIdent():this.dummyIdent(),this.finishNode(n,"ImportNamespaceSpecifier");else{if(this.isContextual("from"))break;n.imported=this.parseIdent();if(Kl(n.imported))break;n.local=this.eatContextual("as")?this.parseIdent():n.imported;this.finishNode(n,"ImportSpecifier")}d.push(n);this.eat(Na.comma)}this.eat(Na.braceR);this.popCx()}return d};rq.parseExportSpecifierList=function(){var d=[],k=this.curIndent,e=this.curLineStart,h=this.nextLineStart;this.pushCx();this.eat(Na.braceL);
this.curLineStart>h&&(h=this.curLineStart);for(;!this.closes(Na.braceR,k+(this.curLineStart<=h?1:0),e)&&!this.isContextual("from");){var n=this.startNode();n.local=this.parseIdent();if(Kl(n.local))break;n.exported=this.eatContextual("as")?this.parseIdent():n.local;this.finishNode(n,"ExportSpecifier");d.push(n);this.eat(Na.comma)}this.eat(Na.braceR);this.popCx();return d};var aj=$i.prototype;aj.checkLVal=function(d){if(!d)return d;switch(d.type){case "Identifier":case "MemberExpression":return d;case "ParenthesizedExpression":return d.expression=
this.checkLVal(d.expression),d;default:return this.dummyIdent()}};aj.parseExpression=function(d){var k=this.storeCurrentPos(),e=this.parseMaybeAssign(d);if(this.tok.type===Na.comma){k=this.startNodeAt(k);for(k.expressions=[e];this.eat(Na.comma);)k.expressions.push(this.parseMaybeAssign(d));return this.finishNode(k,"SequenceExpression")}return e};aj.parseParenExpression=function(){this.pushCx();this.expect(Na.parenL);var d=this.parseExpression();this.popCx();this.expect(Na.parenR);return d};aj.parseMaybeAssign=
function(d){if(this.toks.isContextual("yield"))return d=this.startNode(),this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!==Na.star&&!this.tok.type.startsExpr?(d.delegate=!1,d.argument=null):(d.delegate=this.eat(Na.star),d.argument=this.parseMaybeAssign()),this.finishNode(d,"YieldExpression");var k=this.storeCurrentPos(),e=this.parseMaybeConditional(d);return this.tok.type.isAssign?(k=this.startNodeAt(k),k.operator=this.tok.value,k.left=this.tok.type===Na.eq?this.toAssignable(e):
this.checkLVal(e),this.next(),k.right=this.parseMaybeAssign(d),this.finishNode(k,"AssignmentExpression")):e};aj.parseMaybeConditional=function(d){var k=this.storeCurrentPos(),e=this.parseExprOps(d);return this.eat(Na.question)?(k=this.startNodeAt(k),k.test=e,k.consequent=this.parseMaybeAssign(),k.alternate=this.expect(Na.colon)?this.parseMaybeAssign(d):this.dummyIdent(),this.finishNode(k,"ConditionalExpression")):e};aj.parseExprOps=function(d){var k=this.storeCurrentPos(),e=this.curIndent,h=this.curLineStart;
return this.parseExprOp(this.parseMaybeUnary(!1),k,-1,d,e,h)};aj.parseExprOp=function(d,k,e,h,n,b){if(this.curLineStart!==b&&this.curIndent<n&&this.tokenStartsLine())return d;var c=this.tok.type.binop;if(null!=c&&(!h||this.tok.type!==Na._in)&&c>e){var l=this.startNodeAt(k);l.left=d;l.operator=this.tok.value;this.next();this.curLineStart!==b&&this.curIndent<n&&this.tokenStartsLine()?l.right=this.dummyIdent():(d=this.storeCurrentPos(),l.right=this.parseExprOp(this.parseMaybeUnary(!1),d,c,h,n,b));this.finishNode(l,
/&&|\|\||\?\?/.test(l.operator)?"LogicalExpression":"BinaryExpression");return this.parseExprOp(l,k,e,h,n,b)}return d};aj.parseMaybeUnary=function(d){var k=this.storeCurrentPos();if(8<=this.options.ecmaVersion&&this.toks.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var e=this.parseAwait();d=!0}else if(this.tok.type.prefix){e=this.startNode();var h=this.tok.type===Na.incDec;h||(d=!0);e.operator=this.tok.value;e.prefix=!0;this.next();e.argument=this.parseMaybeUnary(!0);
h&&(e.argument=this.checkLVal(e.argument));e=this.finishNode(e,h?"UpdateExpression":"UnaryExpression")}else if(this.tok.type===Na.ellipsis)e=this.startNode(),this.next(),e.argument=this.parseMaybeUnary(d),e=this.finishNode(e,"SpreadElement");else for(e=this.parseExprSubscripts();this.tok.type.postfix&&!this.canInsertSemicolon();)h=this.startNodeAt(k),h.operator=this.tok.value,h.prefix=!1,h.argument=this.checkLVal(e),this.next(),e=this.finishNode(h,"UpdateExpression");return!d&&this.eat(Na.starstar)?
(d=this.startNodeAt(k),d.operator="**",d.left=e,d.right=this.parseMaybeUnary(!1),this.finishNode(d,"BinaryExpression")):e};aj.parseExprSubscripts=function(){var d=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),d,!1,this.curIndent,this.curLineStart)};aj.parseSubscripts=function(d,k,e,h,n){for(var b=11<=this.options.ecmaVersion,c=!1;;){if(this.curLineStart!==n&&this.curIndent<=h&&this.tokenStartsLine())if(this.tok.type===Na.dot&&this.curIndent===h)--h;else break;var l="Identifier"===
d.type&&"async"===d.name&&!this.canInsertSemicolon(),a=b&&this.eat(Na.questionDot);a&&(c=!0);if(a&&this.tok.type!==Na.parenL&&this.tok.type!==Na.bracketL&&this.tok.type!==Na.backQuote||this.eat(Na.dot)){var f=this.startNodeAt(k);f.object=d;this.curLineStart!==n&&this.curIndent<=h&&this.tokenStartsLine()?f.property=this.dummyIdent():f.property=this.parsePropertyAccessor()||this.dummyIdent();f.computed=!1;b&&(f.optional=a);d=this.finishNode(f,"MemberExpression")}else if(this.tok.type===Na.bracketL)this.pushCx(),
this.next(),f=this.startNodeAt(k),f.object=d,f.property=this.parseExpression(),f.computed=!0,b&&(f.optional=a),this.popCx(),this.expect(Na.bracketR),d=this.finishNode(f,"MemberExpression");else if(e||this.tok.type!==Na.parenL)if(this.tok.type===Na.backQuote)a=this.startNodeAt(k),a.tag=d,a.quasi=this.parseTemplate(),d=this.finishNode(a,"TaggedTemplateExpression");else break;else{f=this.parseExprList(Na.parenR);if(l&&this.eat(Na.arrow))return this.parseArrowExpression(this.startNodeAt(k),f,!0);l=this.startNodeAt(k);
l.callee=d;l.arguments=f;b&&(l.optional=a);d=this.finishNode(l,"CallExpression")}}c&&(k=this.startNodeAt(k),k.expression=d,d=this.finishNode(k,"ChainExpression"));return d};aj.parseExprAtom=function(){switch(this.tok.type){case Na._this:case Na._super:var d=this.tok.type===Na._this?"ThisExpression":"Super";var k=this.startNode();this.next();return this.finishNode(k,d);case Na.name:k=this.storeCurrentPos();d=this.parseIdent();var e=!1;if("async"===d.name&&!this.canInsertSemicolon()){if(this.eat(Na._function))return this.parseFunction(this.startNodeAt(k),
!1,!0);this.tok.type===Na.name&&(d=this.parseIdent(),e=!0)}return this.eat(Na.arrow)?this.parseArrowExpression(this.startNodeAt(k),[d],e):d;case Na.regexp:return k=this.startNode(),d=this.tok.value,k.regex={pattern:d.pattern,flags:d.flags},k.value=d.value,k.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(k,"Literal");case Na.num:case Na.string:return k=this.startNode(),k.value=this.tok.value,k.raw=this.input.slice(this.tok.start,this.tok.end),this.tok.type===Na.num&&
110===k.raw.charCodeAt(k.raw.length-1)&&(k.bigint=k.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(k,"Literal");case Na._null:case Na._true:case Na._false:return k=this.startNode(),k.value=this.tok.type===Na._null?null:this.tok.type===Na._true,k.raw=this.tok.type.keyword,this.next(),this.finishNode(k,"Literal");case Na.parenL:k=this.storeCurrentPos();this.next();d=this.parseExpression();this.expect(Na.parenR);if(this.eat(Na.arrow))return d=d.expressions||[d],d.length&&Kl(d[d.length-
1])&&d.pop(),this.parseArrowExpression(this.startNodeAt(k),d);this.options.preserveParens&&(k=this.startNodeAt(k),k.expression=d,d=this.finishNode(k,"ParenthesizedExpression"));return d;case Na.bracketL:return k=this.startNode(),k.elements=this.parseExprList(Na.bracketR,!0),this.finishNode(k,"ArrayExpression");case Na.braceL:return this.parseObj();case Na._class:return this.parseClass(!1);case Na._function:return k=this.startNode(),this.next(),this.parseFunction(k,!1);case Na._new:return this.parseNew();
case Na.backQuote:return this.parseTemplate();case Na._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.dummyIdent();default:return this.dummyIdent()}};aj.parseExprImport=function(){var d=this.startNode(),k=this.parseIdent(!0);switch(this.tok.type){case Na.parenL:return this.parseDynamicImport(d);case Na.dot:return d.meta=k,this.parseImportMeta(d);default:return d.name="import",this.finishNode(d,"Identifier")}};aj.parseDynamicImport=function(d){d.source=this.parseExprList(Na.parenR)[0]||
this.dummyString();return this.finishNode(d,"ImportExpression")};aj.parseImportMeta=function(d){this.next();d.property=this.parseIdent(!0);return this.finishNode(d,"MetaProperty")};aj.parseNew=function(){var d=this.startNode(),k=this.curIndent,e=this.curLineStart,h=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Na.dot))return d.meta=h,d.property=this.parseIdent(!0),this.finishNode(d,"MetaProperty");h=this.storeCurrentPos();d.callee=this.parseSubscripts(this.parseExprAtom(),h,!0,k,e);
d.arguments=this.tok.type===Na.parenL?this.parseExprList(Na.parenR):[];return this.finishNode(d,"NewExpression")};aj.parseTemplateElement=function(){var d=this.startNode();d.value=this.tok.type===Na.invalidTemplate?{raw:this.tok.value,cooked:null}:{raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,"\n"),cooked:this.tok.value};this.next();d.tail=this.tok.type===Na.backQuote;return this.finishNode(d,"TemplateElement")};aj.parseTemplate=function(){var d=this.startNode();this.next();
d.expressions=[];var k=this.parseTemplateElement();for(d.quasis=[k];!k.tail;)this.next(),d.expressions.push(this.parseExpression()),this.expect(Na.braceR)?k=this.parseTemplateElement():(k=this.startNode(),k.value={cooked:"",raw:""},k.tail=!0,this.finishNode(k,"TemplateElement")),d.quasis.push(k);this.expect(Na.backQuote);return this.finishNode(d,"TemplateLiteral")};aj.parseObj=function(){var d=this.startNode();d.properties=[];this.pushCx();var k=this.curIndent+1,e=this.curLineStart;this.eat(Na.braceL);
this.curIndent+1<k&&(k=this.curIndent,e=this.curLineStart);for(;!this.closes(Na.braceR,k,e);){var h=this.startNode(),n=void 0,b=void 0;if(9<=this.options.ecmaVersion&&this.eat(Na.ellipsis))h.argument=this.parseMaybeAssign(),d.properties.push(this.finishNode(h,"SpreadElement"));else{6<=this.options.ecmaVersion&&(b=this.storeCurrentPos(),h.method=!1,h.shorthand=!1,n=this.eat(Na.star));this.parsePropertyName(h);if(this.toks.isAsyncProp(h)){var c=!0;n=9<=this.options.ecmaVersion&&this.eat(Na.star);this.parsePropertyName(h)}else c=
!1;Kl(h.key)?Kl(this.parseMaybeAssign())&&this.next():(this.eat(Na.colon)?(h.kind="init",h.value=this.parseMaybeAssign()):6<=this.options.ecmaVersion&&(this.tok.type===Na.parenL||this.tok.type===Na.braceL)?(h.kind="init",h.method=!0,h.value=this.parseMethod(n,c)):5<=this.options.ecmaVersion&&"Identifier"===h.key.type&&!h.computed&&("get"===h.key.name||"set"===h.key.name)&&this.tok.type!==Na.comma&&this.tok.type!==Na.braceR&&this.tok.type!==Na.eq?(h.kind=h.key.name,this.parsePropertyName(h),h.value=
this.parseMethod(!1)):(h.kind="init",6<=this.options.ecmaVersion?this.eat(Na.eq)?(n=this.startNodeAt(b),n.operator="=",n.left=h.key,n.right=this.parseMaybeAssign(),h.value=this.finishNode(n,"AssignmentExpression")):h.value=h.key:h.value=this.dummyIdent(),h.shorthand=!0),d.properties.push(this.finishNode(h,"Property")))}this.eat(Na.comma)}this.popCx();this.eat(Na.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return this.finishNode(d,"ObjectExpression")};
aj.parsePropertyName=function(d){if(6<=this.options.ecmaVersion){if(this.eat(Na.bracketL)){d.computed=!0;d.key=this.parseExpression();this.expect(Na.bracketR);return}d.computed=!1}var k=this.tok.type===Na.num||this.tok.type===Na.string?this.parseExprAtom():this.parseIdent();d.key=k||this.dummyIdent()};aj.parsePropertyAccessor=function(){if(this.tok.type===Na.name||this.tok.type.keyword)return this.parseIdent()};aj.parseIdent=function(){var d=this.tok.type===Na.name?this.tok.value:this.tok.type.keyword;
if(!d)return this.dummyIdent();var k=this.startNode();this.next();k.name=d;return this.finishNode(k,"Identifier")};aj.initFunction=function(d){d.id=null;d.params=[];6<=this.options.ecmaVersion&&(d.generator=!1,d.expression=!1);8<=this.options.ecmaVersion&&(d.async=!1)};aj.toAssignable=function(d,k){if(d&&"Identifier"!==d.type&&("MemberExpression"!==d.type||k))if("ParenthesizedExpression"===d.type)this.toAssignable(d.expression,k);else{if(6>this.options.ecmaVersion)return this.dummyIdent();if("ObjectExpression"===
d.type){d.type="ObjectPattern";for(var e=0,h=d.properties;e<h.length;e+=1)this.toAssignable(h[e],k)}else if("ArrayExpression"===d.type)d.type="ArrayPattern",this.toAssignableList(d.elements,k);else if("Property"===d.type)this.toAssignable(d.value,k);else if("SpreadElement"===d.type)d.type="RestElement",this.toAssignable(d.argument,k);else if("AssignmentExpression"===d.type)d.type="AssignmentPattern",delete d.operator;else return this.dummyIdent()}return d};aj.toAssignableList=function(d,k){for(var e=
0;e<d.length;e+=1)this.toAssignable(d[e],k);return d};aj.parseFunctionParams=function(d){d=this.parseExprList(Na.parenR);return this.toAssignableList(d,!0)};aj.parseMethod=function(d,k){var e=this.startNode(),h=this.inAsync,n=this.inFunction;this.initFunction(e);6<=this.options.ecmaVersion&&(e.generator=!!d);8<=this.options.ecmaVersion&&(e.async=!!k);this.inAsync=e.async;this.inFunction=!0;e.params=this.parseFunctionParams();e.body=this.parseBlock();this.toks.adaptDirectivePrologue(e.body.body);this.inAsync=
h;this.inFunction=n;return this.finishNode(e,"FunctionExpression")};aj.parseArrowExpression=function(d,k,e){var h=this.inAsync,n=this.inFunction;this.initFunction(d);8<=this.options.ecmaVersion&&(d.async=!!e);this.inAsync=d.async;this.inFunction=!0;d.params=this.toAssignableList(k,!0);d.expression=this.tok.type!==Na.braceL;d.expression?d.body=this.parseMaybeAssign():(d.body=this.parseBlock(),this.toks.adaptDirectivePrologue(d.body.body));this.inAsync=h;this.inFunction=n;return this.finishNode(d,"ArrowFunctionExpression")};
aj.parseExprList=function(d,k){this.pushCx();var e=this.curIndent,h=this.curLineStart,n=[];for(this.next();!this.closes(d,e+1,h);)if(this.eat(Na.comma))n.push(k?null:this.dummyIdent());else{var b=this.parseMaybeAssign();if(Kl(b)){if(this.closes(d,e,h))break;this.next()}else n.push(b);this.eat(Na.comma)}this.popCx();this.eat(d)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return n};aj.parseAwait=function(){var d=this.startNode();this.next();d.argument=
this.parseMaybeUnary();return this.finishNode(d,"AwaitExpression")};ZB.tabSize=4;var sI=Object.freeze({__proto__:null,LooseParser:$i,isDummy:Kl,parse:function(d,k){return $i.parse(d,k)}}),pe=lively.FreezerRuntime.recorderFor("lively.ast/lib/acorn-extension.js");pe.forEachNode=function(d,k,e,h){h=h||{};var n=h.traversal||"preorder",b=pe.obj.clone(h.visitors?h.visitors:pe.walk.make(pe.custom.visitors.withMemberExpression)),c="preorder"===n?function(l,a,f,m,q){k(f,e,m,a);return l(f,m+1,q)}:function(l,
a,f,m,q){l=l(f,m+1,q);k(f,e,m,a);return l};Object.keys(b).forEach(function(l){var a=b[l];b[l]=function(f,m,q){return c(a,l,f,m,q)}});pe.walk.recursive(d,0,null,b);return d};pe.matchNodes=function(d,k,e,h){return pe.forEachNode(d,function(n,b,c,l){if(k[n.type])k[n.type](n,b,c,l)},e,h)};pe.findNodesIncluding=ta;pe.withParentInfo=function(d,k,e){function h(a){var f={id:pe.string.newUUID(),parentScope:a,containingScopes:[]};a&&a.containingScopes.push(f);return f}e=e||{};var n=pe.walk.make({Function:function(a,
f,m){f&&f.scope&&(f.scope=h(f.scope));m(a.body,f,"ScopeBody")},VariableDeclarator:function(a,f,m){a.init&&m(a.init,f,"Expression")},VariableDeclaration:function(a,f,m){for(var q=0;q<a.declarations.length;++q){var r=a.declarations[q];r&&m(r,f,"VariableDeclarator")}},ObjectExpression:function(a,f,m){for(var q=0;q<a.properties.length;++q){var r=a.properties[q];m(r.key,f,"Expression");m(r.value,f,"Expression")}},MemberExpression:function(a,f,m){m(a.object,f,"Expression");m(a.property,f,"Expression")}},
pe.walk.base),b,c=[];pe.forEachNode(d,function(a){pe.arr.withoutAll(Object.keys(a),["end","start","type","source","raw"]).forEach(function(f){if(!a.__lookupGetter__(f)){var m=a[f];a.__defineGetter__(f,function(){b=f;return m});c.push([a,f,a[f]])}})},null,{visitors:n});var l=[];Object.keys(n).forEach(function(a){var f=n[a];n[a]=function(m,q,r){return a===m.type||e.visitAllNodes?(l.push(k.call(null,m,{scope:q.scope,depth:q.depth,parent:q.parent,type:a,propertyInParent:b})),f(m,{scope:q.scope,parent:m,
depth:q.depth+1},r)):f(m,q,r)}});pe.walk.recursive(d,{scope:h(),parent:null,propertyInParent:"",depth:0},null,n);c.forEach(function(a){delete a[0][a[1]];a[0][a[1]]=a[2]});return l};pe.copy=Lo;pe.findSiblings=gk;pe.findNodeByAstIndex=Zn;pe.findStatementOfNode=br;pe.addAstIndex=Id;pe.obj=lf;pe.arr=Te;pe.string=Hg;pe.Path=Xg;pe.withMozillaAstDo=Ny;pe.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;pe.acorn=ut;pe.walk=Or;pe.loose=sI;pe.custom=
{};pe.custom.forEachNode=pe.forEachNode;pe.custom.matchNodes=pe.matchNodes;pe.custom.findNodesIncluding=pe.findNodesIncluding;pe.custom.withParentInfo=pe.withParentInfo;pe.custom.copy=pe.copy;pe.custom.findSiblings=pe.findSiblings;pe.custom.findNodeByAstIndex=pe.findNodeByAstIndex;pe.custom.findStatementOfNode=pe.findStatementOfNode;pe.custom.addAstIndex=pe.addAstIndex;var Jw=ya("E",pe.custom);pe.walk=Or;pe.walk=Or;pe.loose=sI;pe.loose=sI;pe.acorn=ut;pe.acorn=ut;pe.custom=Jw;pe.custom=Jw;pe.findStatementOfNode=
br;pe.findStatementOfNode=br;pe.addAstIndex=Id;pe.addAstIndex=Id;pe.findNodesIncluding=ta;pe.findNodesIncluding=ta;pe.findSiblings=gk;pe.findSiblings=gk;pe.findNodeByAstIndex=Zn;pe.findNodeByAstIndex=Zn;pe.copy=Lo;pe.copy=Lo;pe.custom.visitors={stopAtFunctions:pe.walk.make(Object.assign({Function:function(){}},pe.walk.base)),withMemberExpression:pe.walk.make({MemberExpression:function(d,k,e){e(d.object,k,"Expression");e(d.property,k,"Expression")}},pe.walk.base)};var ci=lively.FreezerRuntime.recorderFor("lively.ast/lib/visitors.js");
ci.blockInliner=function(d){if(Array.isArray(d.body))for(var k=d.body.length-1;0<=k;k--){var e=d.body[k];"BlockStatement"===e.type&&e[ci.canBeInlinedSym]&&d.body.splice.apply(d.body,[k,1].concat(e.body))}return d};ci.block=function(d){return{type:"BlockStatement",body:d}};ci.Visitor=Kd;var Pr=function(){return ci.Visitor.apply(this,arguments)||this};$jscomp.inherits(Pr,ci.Visitor);Pr.prototype.accept=function(d,k,e){this.doFunc(d,k,e);return ci.Visitor.prototype.accept.call(this,d,k,e)};Pr.run=function(d,
k,e){var h=new this;h.doFunc=k;h.accept(d,e,[]);return e};ya("A",Pr);ci.AllNodesVisitor=Pr;var Oy=function(){return ci.Visitor.apply(this,arguments)||this};$jscomp.inherits(Oy,ci.Visitor);Oy.prototype.accept=function(d,k,e){switch(d.type){case "ArrowFunctionExpression":return d;case "FunctionExpression":return d;case "FunctionDeclaration":return k.unshift({node:d,path:e}),d;default:return ci.Visitor.prototype.accept.call(this,d,k,e)}};Oy.run=function(d){var k=[];(new this).accept(d,k,[]);return k};
ci.FindToplevelFuncDeclVisitor=Oy;ci.canBeInlinedSym=Symbol("canBeInlined");var sq=function(){return ci.Visitor.apply(this,arguments)||this};$jscomp.inherits(sq,ci.Visitor);sq.prototype.accept=function(d,k,e){d=this.replacer(ci.Visitor.prototype.accept.call(this,d,k,e));k={};return Array.isArray(d)?1===d.length?d[0]:Object.assign(ci.block(d),(k[ci.canBeInlinedSym]=!0,k)):d};sq.prototype.visitBlockStatement=function(d,k,e){return ci.blockInliner(ci.Visitor.prototype.visitBlockStatement.call(this,d,
k,e))};sq.prototype.visitProgram=function(d,k,e){return ci.blockInliner(ci.Visitor.prototype.visitProgram.call(this,d,k,e))};sq.run=function(d,k){var e=new this;e.replacer=k;return e.accept(d,null,[])};ci.ReplaceManyVisitor=sq;var Qr=function(){return ci.Visitor.apply(this,arguments)||this};$jscomp.inherits(Qr,ci.Visitor);Qr.prototype.accept=function(d,k,e){return this.replacer(ci.Visitor.prototype.accept.call(this,d,k,e),e)};Qr.run=function(d,k){var e=new this;e.replacer=k;return e.accept(d,null,
[])};ci.ReplaceVisitor=Qr;ci.AllNodesVisitor=Pr;ci.AllNodesVisitor=Pr;ci.FindToplevelFuncDeclVisitor=Oy;ci.FindToplevelFuncDeclVisitor=Oy;ci.ReplaceVisitor=Qr;ci.ReplaceVisitor=Qr;ci.ReplaceManyVisitor=sq;ci.ReplaceManyVisitor=sq;var xg=lively.FreezerRuntime.recorderFor("lively.ast/lib/parser.js");xg.addSource=Be;xg.nodesAt=function(d,k){k="string"===typeof k?this.parse(k):k;return xg.findNodesIncluding(k,d)};xg.parseFunction=Ma;xg.fuzzyParse=Bj;xg.acornParseAsyncAware=function(d,k){if(k.onComment){var e=
k.onComment;k.onComment=function(b,c,l,a,f,m){return e.call(this,b,c,l-14,a-14,f,m)}}var h=xg.acorn.parse("async () => {\n"+d+"\n}",k);if(h.loc)var n=h.loc.constructor;h={body:h.body[0].expression.body.body,sourceType:"module",type:"Program"};xg.AllNodesVisitor.run(h,function(b,c,l){if(!b._positionFixed){b._positionFixed=!0;if(b.start||0===b.start)b.start-=14,b.end-=14;b.loc&&n&&(l=b.loc,c=l.start,l=l.end,b.loc=new n(k,{column:c.column,line:c.line-1},{column:l.column,line:l.line-1}));k.addSource&&
!b.source&&(b.source=d.slice(b.start,b.end))}});h.start=h.body[0].start;h.end=xg.arr.last(h.body).end;k.addSource&&(h.source=d);h.body[0].loc&&n&&(h.loc=new n(k,h.body[0].loc.start,xg.arr.last(h.body).loc.end));return h};xg.parse=Bi;xg.arr=Te;xg.acorn=ut;xg.loose=sI;xg.walk=Or;xg.addAstIndex=Id;xg.findNodesIncluding=ta;xg.custom=Jw;xg.AllNodesVisitor=Pr;xg.walk=Or;xg.walk=Or;xg.parse=Bi;xg.parse=Bi;xg.parseFunction=Ma;xg.parseFunction=Ma;xg.fuzzyParse=Bj;xg.fuzzyParse=Bj;xg.addSource=Be;xg.addSource=
Be;xg.custom.addSource=xg.addSource;var fg=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitor-interface.js");fg.string=Hg;fg.Path=Xg;fg.BaseVisitor=Kd;fg.PrinterVisitor=eB;fg.ComparisonVisitor=xj;fg.stringify=mg;fg.addAstIndex=Id;fg.parse=Bi;fg.addSource=Be;fg.methods={withMozillaAstDo:function(d,k,e){var h=new fg.BaseVisitor,n=h.accept;h.accept=function(b,c,l){k=e(function(){n.call(h,b,c,l)},b,c,l);return b};h.accept(d,k,[]);return k},printAst:function(d,k){k=k||{};var e=k.printSource||
!1,h=k.printPositions||!1,n=k.printIndex||!1,b=[];if("string"===typeof d){var c=d;d=fg.parse(d)}else c=k.source||d.source;e&&!d.source&&(c||(c=fg.stringify(d),d=fg.parse(c)),fg.addSource(d,c));(new fg.PrinterVisitor).accept(d,{index:0,tree:b},[]);return fg.string.printTree(b[0],function(l){var a=l.path+":"+l.node.type,f=[];n&&f.push(l.index);h&&f.push(l.node.start+"-"+l.node.end);e&&(l=l.node.source||c.slice(l.node.start,l.node.end),l=fg.string.print(l.truncate(60).replace(/\n/g,"").replace(/\s+/g,
" ")),f.push(l));f.length&&(a+="("+f.join(",")+")");return a},function(l){return l.children},"  ")},compareAst:function(d,k){if(!d||!k)throw Error("node"+(d?"1":"2")+" not defined");var e={completePath:[],comparisons:{errors:[]}};(new fg.ComparisonVisitor).accept(d,k,e,[]);return e.comparisons.errors.length?e.comparisons.errors.pluck("msg"):null},pathToNode:function(d,k,e){d.astIndex||fg.addAstIndex(d);e=new fg.BaseVisitor;var h=null;(e.accept=function(n,b,c,l){if(!h)return b=b.concat(l),n.astIndex===
k&&(h={pathString:b.map(function(a){return"string"===typeof a?"."+a:"["+a+"]"}).join(""),path:b,node:n}),this["visit"+n.type](n,b,c,l)}).call(e,d,[],{},[]);return h},rematchAstWithSource:function(d,k,e,h){e=!!e;k=fg.parse(k,e?{locations:!0}:void 0);var n=new fg.BaseVisitor;h&&(k=fg.Path(h).get(k));n.accept=function(b,c,l){l=l||[];var a=l.reduce(function(f,m){return f[m]},d);a.start=b.start;a.end=b.end;e&&(a.loc=b.loc);return this["visit"+b.type](b,c,l)};n.accept(k)}};fg.withMozillaAstDo=fg.methods.withMozillaAstDo;
fg.printAst=fg.methods.printAst;fg.compareAst=fg.methods.compareAst;fg.pathToNode=fg.methods.pathToNode;fg.rematchAstWithSource=fg.methods.rematchAstWithSource;var Ny=fg.withMozillaAstDo,ID=fg.printAst,JD=fg.compareAst,KD=fg.pathToNode,LD=fg.rematchAstWithSource;fg.BaseVisitor=Kd;fg.BaseVisitor=Kd;fg.withMozillaAstDo=Ny;fg.withMozillaAstDo=Ny;fg.printAst=ID;fg.printAst=ID;fg.compareAst=JD;fg.compareAst=JD;fg.pathToNode=KD;fg.pathToNode=KD;fg.rematchAstWithSource=LD;fg.rematchAstWithSource=LD;var ke=
lively.FreezerRuntime.recorderFor("lively.ast/lib/nodes.js");ke.isIdentifier=cr;ke.id=nu;ke.literal=xx;ke.exprStmt=ou;ke.returnStmt=Np;ke.empty=mi;ke.binaryExpr=$n;ke.funcExpr=tj;ke.funcCall=rn;ke.varDecl=Nm;ke.member=As;ke.memberChain=Jk;ke.assign=Lv;ke.block=ml;ke.program=tk;ke.tryStmt=dr;ke.prop=Bs;ke.objectLiteral=yx;ke.ifStmt=zx;ke.forIn=Fz;ke.conditional=oh;ke.logical=Gz;ke.isIdentifier=cr;ke.isIdentifier=cr;ke.id=nu;ke.id=nu;ke.literal=xx;ke.literal=xx;ke.objectLiteral=yx;ke.objectLiteral=
yx;ke.prop=Bs;ke.prop=Bs;ke.exprStmt=ou;ke.exprStmt=ou;ke.returnStmt=Np;ke.returnStmt=Np;ke.empty=mi;ke.empty=mi;ke.binaryExpr=$n;ke.binaryExpr=$n;ke.funcExpr=tj;ke.funcExpr=tj;ke.funcCall=rn;ke.funcCall=rn;ke.varDecl=Nm;ke.varDecl=Nm;ke.member=As;ke.member=As;ke.memberChain=Jk;ke.memberChain=Jk;ke.assign=Lv;ke.assign=Lv;ke.block=ml;ke.block=ml;ke.program=tk;ke.program=tk;ke.tryStmt=dr;ke.tryStmt=dr;ke.ifStmt=zx;ke.ifStmt=zx;ke.forIn=Fz;ke.forIn=Fz;ke.conditional=oh;ke.conditional=oh;ke.logical=Gz;
ke.logical=Gz;ke.identifierRe=/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;var cv=Object.freeze({__proto__:null,isIdentifier:cr,id:nu,literal:xx,objectLiteral:yx,prop:Bs,exprStmt:ou,returnStmt:Np,empty:mi,binaryExpr:$n,funcExpr:tj,funcCall:rn,varDecl:Nm,member:As,memberChain:Jk,assign:Lv,block:ml,program:tk,tryStmt:dr,ifStmt:zx,forIn:Fz,conditional:oh,logical:Gz}),hd=lively.FreezerRuntime.recorderFor("lively.ast/lib/query.js");hd.scopes=Mv;hd.nodesAtIndex=er;hd.scopesAtIndex=Hz;hd.scopeAtIndex=
Op;hd.scopesAtPos=ao;hd.nodesInScopeOf=Pp;hd.declarationsOfScope=sn;hd.declarationsWithIdsOfScope=function(d){var k=hd.arr.compact(hd.helpers.declIds(d.params).concat(d.catches)),e=[].concat($jscomp.arrayFromIterable(d.node.id&&d.node.id.name?[d.node]:[]),$jscomp.arrayFromIterable(hd.arr.filter(d.funcDecls,function(h){return h.id})),$jscomp.arrayFromIterable(hd.arr.filter(d.classDecls,function(h){return h.id})));return k.map(function(h){return[h,h]}).concat(e.map(function(h){return[h,h.id]})).concat(hd.helpers.varDecls(d)).concat(d.importSpecifiers.map(function(h){return[hd.statementOf(d.node,
h),h]}))};hd._declaredVarNames=Kk;hd._findJsLintGlobalDeclarations=Iz;hd.topLevelFuncDecls=nl;hd.resolveReference=uj;hd.resolveReferences=Nv;hd.refWithDeclAt=fr;hd.topLevelDeclsAndRefs=pu;hd.findGlobalVarRefs=Cs;hd.findNodesIncludingLines=Om;hd.__varDeclIdsFor=function(d,k){for(var e=[],h=$jscomp.makeIterator(d.params),n=h.next();!n.done;n=h.next())n=n.value,n.name===k&&e.push(n);h=$jscomp.makeIterator(d.funcDecls);for(n=h.next();!n.done;n=h.next())n=n.value,n.id&&n.id.name===k&&e.push(n.id);h=$jscomp.makeIterator(d.classDecls);
for(n=h.next();!n.done;n=h.next())n=n.value,n.id&&n.id.name===k&&e.push(n.id);h=$jscomp.makeIterator(d.importSpecifiers);for(n=h.next();!n.done;n=h.next())n=n.value,n.name===k&&e.push(n);d=$jscomp.makeIterator(hd.helpers.varDeclIds(d));for(n=d.next();!n.done;n=d.next())n=n.value,n.name===k&&e.push(n);return e};hd.findReferencesAndDeclsInScope=Mo;hd.findDeclarationClosestToIndex=qu;hd.nodesAt=Ax;hd.statementOf=Lk;hd.imports=Qp;hd.exports=Jz;hd.arr=Te;hd.chain=Hl;hd.num=wk;hd.tree=av;hd.fun=Xk;hd.obj=
lf;hd.BaseVisitor=Kd;hd.ScopeVisitor=Hi;hd.FindToplevelFuncDeclVisitor=Oy;hd.withMozillaAstDo=Ny;hd.parse=Bi;hd.acorn=ut;hd.walk=Or;hd.custom=Jw;hd.stringify=mg;hd.helpers={declIds:function(d,k){k=void 0===k?[]:k;for(var e=0;e<d.length;e++){var h=d[e];if(h)if("Identifier"===h.type)k.push(h);else if("RestElement"===h.type)k.push(h.argument);else if("AssignmentPattern"===h.type)hd.helpers.declIds([h.left],k);else if("ObjectPattern"===h.type)for(var n=0;n<h.properties.length;n++){var b=h.properties[n];
hd.helpers.declIds([b.value||b],k)}else"ArrayPattern"===h.type&&hd.helpers.declIds(h.elements,k)}return k},varDecls:function(d,k){k=void 0===k?[]:k;d=$jscomp.makeIterator(d.varDecls);for(var e=d.next();!e.done;e=d.next()){e=$jscomp.makeIterator(e.value.declarations);for(var h=e.next();!h.done;h=e.next()){h=h.value;for(var n=$jscomp.makeIterator(hd.helpers.declIds([h.id])),b=n.next();!b.done;b=n.next())k.push([h,b.value])}}return k},varDeclIds:function(d,k){k=void 0===k?[]:k;d=$jscomp.makeIterator(d.varDecls);
for(var e=d.next();!e.done;e=d.next()){e=$jscomp.makeIterator(e.value.declarations);for(var h=e.next();!h.done;h=e.next())hd.helpers.declIds([h.value.id],k)}return k},objPropertiesAsList:function(d,k,e,h){h=void 0===h?[]:h;d=$jscomp.makeIterator(d.properties);for(var n=d.next();!n.done;n=d.next()){n=n.value;var b=n.key.name,c={key:k.concat([b]),value:n.value};switch(n.value.type){case "ArrayExpression":case "ArrayPattern":e||h.push(c);for(c=0;c<n.value.elements.length;c++)hd.helpers.objPropertiesAsList(n.value.elements[c],
k.concat([b,c]),e,h);break;case "ObjectExpression":case "ObjectPattern":e||h.push(c);hd.helpers.objPropertiesAsList(n.value,k.concat([b]),e,h);break;case "AssignmentPattern":e||h.push(c);hd.helpers.objPropertiesAsList(n.left,k.concat([b]),e,h);break;default:h.push(c)}}return h},isDeclaration:function(d){return"FunctionDeclaration"===d.type||"VariableDeclaration"===d.type||"ClassDeclaration"===d.type}};hd.knownGlobals="closed true false null undefined arguments Object Function Array Number parseFloat parseInt Infinity NaN Boolean String Symbol Date Promise RegExp Error EvalError RangeError ReferenceError SyntaxError TypeError URIError JSON Math console ArrayBuffer Uint8Array Int8Array Uint16Array Int16Array Uint32Array Int32Array Float32Array Float64Array Uint8ClampedArray DataView Map Set WeakMap WeakSet Proxy Reflect decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape eval isFinite isNaN Intl navigator window document Blob setTimeout clearTimeout setInterval clearInterval requestAnimationFrame cancelAnimationFrame btoa atob sessionStorage localStorage $world lively System customElements performance addEventListener closed".split(" ");
hd.globalDeclRe=/^\s*global\s*/;hd._stmtTypes="EmptyStatement BlockStatement ExpressionStatement IfStatement BreakStatement ContinueStatement WithStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement ForOfStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration ImportDeclaration ImportDeclaration ExportNamedDeclaration ExportDefaultDeclaration ExportAllDeclaration".split(" ");var tI=hd.helpers,oP=hd.knownGlobals;
hd.helpers=tI;hd.helpers=tI;hd.knownGlobals=oP;hd.knownGlobals=oP;hd.scopes=Mv;hd.scopes=Mv;hd.nodesAtIndex=er;hd.nodesAtIndex=er;hd.scopesAtIndex=Hz;hd.scopesAtIndex=Hz;hd.scopeAtIndex=Op;hd.scopeAtIndex=Op;hd.scopesAtPos=ao;hd.scopesAtPos=ao;hd.nodesInScopeOf=Pp;hd.nodesInScopeOf=Pp;hd.declarationsOfScope=sn;hd.declarationsOfScope=sn;hd._declaredVarNames=Kk;hd._declaredVarNames=Kk;hd._findJsLintGlobalDeclarations=Iz;hd._findJsLintGlobalDeclarations=Iz;hd.topLevelDeclsAndRefs=pu;hd.topLevelDeclsAndRefs=
pu;hd.topLevelFuncDecls=nl;hd.topLevelFuncDecls=nl;hd.findGlobalVarRefs=Cs;hd.findGlobalVarRefs=Cs;hd.findNodesIncludingLines=Om;hd.findNodesIncludingLines=Om;hd.findReferencesAndDeclsInScope=Mo;hd.findReferencesAndDeclsInScope=Mo;hd.findDeclarationClosestToIndex=qu;hd.findDeclarationClosestToIndex=qu;hd.nodesAt=Ax;hd.nodesAt=Ax;hd.statementOf=Lk;hd.statementOf=Lk;hd.resolveReferences=Nv;hd.resolveReferences=Nv;hd.refWithDeclAt=fr;hd.refWithDeclAt=fr;hd.imports=Qp;hd.imports=Qp;hd.exports=Jz;hd.exports=
Jz;var Rr=Object.freeze({__proto__:null,helpers:tI,knownGlobals:oP,scopes:Mv,nodesAtIndex:er,scopesAtIndex:Hz,scopeAtIndex:Op,scopesAtPos:ao,nodesInScopeOf:Pp,declarationsOfScope:sn,_declaredVarNames:Kk,_findJsLintGlobalDeclarations:Iz,topLevelDeclsAndRefs:pu,topLevelFuncDecls:nl,findGlobalVarRefs:Cs,findNodesIncludingLines:Om,findReferencesAndDeclsInScope:Mo,findDeclarationClosestToIndex:qu,nodesAt:Ax,statementOf:Lk,resolveReferences:Nv,refWithDeclAt:fr,imports:Qp,exports:Jz});ya("bA",Rr);var No=
lively.FreezerRuntime.recorderFor("lively.ast/lib/object-spread-transform.js");No.objectSpreadTransform=ru;No.Visitor=Kd;No.funcCall=rn;No.member=As;var uI=function(){return No.Visitor.apply(this,arguments)||this};$jscomp.inherits(uI,No.Visitor);uI.prototype.accept=function(d,k,e){"ObjectExpression"===d.type&&(d=this.transformSpreadElement(d));return No.Visitor.prototype.accept.call(this,d,k,e)};uI.prototype.transformSpreadElement=function(d){var k=[],e=[k];d.properties.forEach(function(h){"SpreadElement"!==
h.type?(h.shorthand=!1,k.push(h)):(e.push(h),k=[],e.push(k))});if(1===e.length)return d;k.length||e.pop();return No.funcCall.apply(No,[No.member("Object","assign")].concat($jscomp.arrayFromIterable(e.map(function(h){return"SpreadElement"===h.type?h.argument:{properties:h,type:"ObjectExpression"}}))))};No.ObjectSpreadTransformer=uI;No.default=ru;var Cd=lively.FreezerRuntime.recorderFor("lively.ast/lib/transform.js");Cd._node2string=function(d){return d.source||Cd.stringify(d)};Cd._findIndentAt=function(d,
k){var e=Cd.string.peekLeft(d,k,/\s+$/);d="number"===typeof e?d.slice(e,k):"";"\n"===d[0]&&(d=d.slice(1));return d};Cd._applyChanges=function(d,k){for(var e=0;e<d.length;e++){var h=d[e];if("del"===h.type)k=k.slice(0,h.pos)+k.slice(h.pos+h.length);else if("add"===h.type)k=k.slice(0,h.pos)+h.string+k.slice(h.pos);else throw Error("Unexpected change "+Cd.obj.inspect(h));}return k};Cd._compareNodesForReplacement=Kz;Cd.replaceNode=bo;Cd.replaceNodes=su;Cd.replace=tu;Cd.__findVarDecls=Lz;Cd.oneDeclaratorPerVarDecl=
Mz;Cd.oneDeclaratorForVarsInDestructoring=Bx;Cd.returnLastStatement=gr;Cd.wrapInFunction=hr;Cd.wrapInStartEndCall=Ds;Cd.transformSingleExpression=Oo;Cd.arr=Te;Cd.obj=lf;Cd.string=Hg;Cd.chain=Hl;Cd.Path=Xg;Cd.helpers=tI;Cd.scopes=Mv;Cd.topLevelDeclsAndRefs=pu;Cd.topLevelFuncDecls=nl;Cd.parse=Bi;Cd.fuzzyParse=Bj;Cd.objectSpreadTransform=ru;Cd.varDecl=Nm;Cd.memberChain=Jk;Cd.id=nu;Cd.exprStmt=ou;Cd.funcCall=rn;Cd.returnStmt=Np;Cd.tryStmt=dr;Cd.program=tk;Cd.block=ml;Cd.funcExpr=tj;Cd.stringify=mg;Cd.isProbablySingleExpressionRe=
/^\s*(\{|function\s*\()/;Cd.replaceNode=bo;Cd.replaceNode=bo;Cd.replaceNodes=su;Cd.replaceNodes=su;Cd.replace=tu;Cd.replace=tu;Cd._compareNodesForReplacement=Kz;Cd._compareNodesForReplacement=Kz;Cd.oneDeclaratorPerVarDecl=Mz;Cd.oneDeclaratorPerVarDecl=Mz;Cd.oneDeclaratorForVarsInDestructoring=Bx;Cd.oneDeclaratorForVarsInDestructoring=Bx;Cd.returnLastStatement=gr;Cd.returnLastStatement=gr;Cd.wrapInFunction=hr;Cd.wrapInFunction=hr;Cd.wrapInStartEndCall=Ds;Cd.wrapInStartEndCall=Ds;Cd.transformSingleExpression=
Oo;Cd.transformSingleExpression=Oo;Cd.objectSpreadTransform=ru;Cd.objectSpreadTransform=ru;var Py=Object.freeze({__proto__:null,replaceNode:bo,replaceNodes:su,replace:tu,_compareNodesForReplacement:Kz,oneDeclaratorPerVarDecl:Mz,oneDeclaratorForVarsInDestructoring:Bx,returnLastStatement:gr,wrapInFunction:hr,wrapInStartEndCall:Ds,transformSingleExpression:Oo,objectSpreadTransform:ru});ya("bw",Py);var cf=lively.FreezerRuntime.recorderFor("lively.ast/lib/comments.js");cf.getCommentPrecedingNode=Nz;cf.extractComments=
Pm;cf.obj=lf;cf.string=Hg;cf.Path=Xg;cf.chain=Hl;cf.arr=Te;cf.fun=Xk;cf.parse=Bi;cf.statementOf=Lk;cf.Visitor=Kd;cf.stringify=mg;cf.getCommentPrecedingNode=Nz;cf.getCommentPrecedingNode=Nz;cf.extractComments=Pm;cf.extractComments=Pm;var vI=Object.freeze({__proto__:null,getCommentPrecedingNode:Nz,extractComments:Pm}),Qg=lively.FreezerRuntime.recorderFor("lively.ast/lib/code-categorizer.js");Qg.findDecls=ir;Qg.es6ClassDef=function(d){if("ClassDeclaration"!==d.type)return null;var k={type:"class-decl",
name:d.id.name,node:d,children:[]};k.children.push.apply(k.children,$jscomp.arrayFromIterable(Qg.arr.compact(d.body.body.map(function(e,h){return Qg.es6ClassMethod(e,k,h)}))));return[k].concat($jscomp.arrayFromIterable(k.children))};Qg.es6ClassMethod=function(d,k,e){if("MethodDefinition"!==d.type)return null;var h;"constructor"===d.kind?h="class-constructor":"method"===d.kind?h=d.static?"class-class-method":"class-instance-method":"get"===d.kind?h=d.static?"class-class-getter":"class-instance-getter":
"set"===d.kind&&(h=d.static?"class-class-setter":"class-instance-setter");return h?{type:h,parent:k,node:d,name:d.key.name}:null};Qg.varDefs=function(d){if("VariableDeclaration"!==d.type)return null;var k=[],e={};d=$jscomp.makeIterator(Qg.withVarDeclIds(d));for(var h=d.next();!h.done;e={$jscomp$loop$prop$def$2529:e.$jscomp$loop$prop$def$2529},h=d.next())if(h=h.value,e.$jscomp$loop$prop$def$2529={name:h.id.name,node:h.node,type:"var-decl"},k.push(e.$jscomp$loop$prop$def$2529),e.$jscomp$loop$prop$def$2529.node.init){for(h=
e.$jscomp$loop$prop$def$2529.node.init;"AssignmentExpression"===h.type;)h=h.right;if("ObjectExpression"===h.type)e.$jscomp$loop$prop$def$2529.type="object-decl",e.$jscomp$loop$prop$def$2529.children=Qg.objectKeyValsAsDefs(h).map(function(n){return function(b){return Object.assign({},b,{type:"object-"+b.type,parent:n.$jscomp$loop$prop$def$2529})}}(e)),k.push.apply(k,$jscomp.arrayFromIterable(e.$jscomp$loop$prop$def$2529.children));else if(h=Qg.someObjectExpressionCall(h,e.$jscomp$loop$prop$def$2529))e.$jscomp$loop$prop$def$2529.children=
h.map(function(n){return function(b){return Object.assign({},b,{parent:n.$jscomp$loop$prop$def$2529})}}(e)),k.push.apply(k,$jscomp.arrayFromIterable(e.$jscomp$loop$prop$def$2529.children))}return k};Qg.funcDef=function(d){return"FunctionStatement"!==d.type&&"FunctionDeclaration"!==d.type||!d.id?null:[{name:d.id.name,node:d,type:"function-decl"}]};Qg.someObjectExpressionCall=function(d,k){"ExpressionStatement"===d.type&&(d=d.expression);return"CallExpression"!==d.type?null:(d=d.arguments.find(function(e){return"ObjectExpression"===
e.type}))?Qg.objectKeyValsAsDefs(d,k):null};Qg.functionWrapper=function(d,k){if(!Qg.isFunctionWrapper(d))return null;var e=Qg.Path("expression.arguments.0").get(d);k=e&&"FunctionExpression"===e.type&&5<Qg.string.lines(e.source||"").length?Qg.findDecls(e,k):Qg.findDecls(Qg.Path("expression.callee").get(d),k);var h={node:d,name:Qg.Path("expression.callee.id.name").get(d)};k.forEach(function(n){return n.parent||(n.parent=h)});return k};Qg.unwrapExport=function(d){return"ExportNamedDeclaration"!==d.type&&
"ExportDefaultDeclaration"!==d.type||!d.declaration?d:d.declaration};Qg.objectKeyValsAsDefs=function(d,k){return d.properties.map(function(e){return{name:e.key.name||e.key.value,type:"FunctionExpression"===e.value.type?"method":"property",node:e,parent:k}})};Qg.isFunctionWrapper=function(d){return"CallExpression"===Qg.Path("expression.type").get(d)&&"FunctionExpression"===Qg.Path("expression.callee.type").get(d)};Qg.declIds=Es;Qg.withVarDeclIds=function(d){return d.declarations.map(function(k){!k.source&&
k.init&&(k.source=k.id.name+" = "+k.init.source);return{node:k,id:k.id}})};Qg.parse=Bi;Qg.arr=Te;Qg.Path=Xg;Qg.string=Hg;Qg.obj=lf;Qg.findDecls=ir;Qg.findDecls=ir;var MD=Object.freeze({__proto__:null,findDecls:ir}),uf=lively.FreezerRuntime.recorderFor("lively.ast/index.js");uf.isValidIdentifier=co;uf.BaseVisitor=Kd;uf.BaseVisitor=Kd;uf.withMozillaAstDo=Ny;uf.withMozillaAstDo=Ny;uf.printAst=ID;uf.printAst=ID;uf.compareAst=JD;uf.compareAst=JD;uf.pathToNode=KD;uf.pathToNode=KD;uf.rematchAstWithSource=
LD;uf.rematchAstWithSource=LD;uf.ReplaceManyVisitor=sq;uf.ReplaceManyVisitor=sq;uf.ReplaceVisitor=Qr;uf.ReplaceVisitor=Qr;uf.AllNodesVisitor=Pr;uf.AllNodesVisitor=Pr;uf.parse=Bi;uf.parse=Bi;uf.parseFunction=Ma;uf.parseFunction=Ma;uf.fuzzyParse=Bj;uf.fuzzyParse=Bj;uf.acorn=ut;uf.walk=Or;uf.custom=Jw;uf.stringify=mg;uf.escodegen=gB;uf.escodegen=gB;uf.escodegen=gB;uf.acorn=ut;uf.acorn=ut;uf.walk=Or;uf.walk=Or;uf.nodes=cv;uf.query=Rr;uf.transform=Py;uf.comments=vI;uf.categorizer=MD;uf.query=Rr;uf.query=
Rr;uf.transform=Py;uf.transform=Py;uf.comments=vI;uf.comments=vI;uf.categorizer=MD;uf.categorizer=MD;uf.stringify=mg;uf.stringify=mg;uf.nodes=cv;uf.nodes=cv;uf.custom=Jw;uf.custom=Jw;uf.isValidIdentifierRe=/^(?!(?:do|if|in|for|let|new|try|var|case|default|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/;
uf.isValidIdentifier=co;uf.isValidIdentifier=co;uf.parse=Bi;uf.Node=uf.parse("").constructor;Object.defineProperty(uf.Node.prototype,"__serialize__",{configurable:!0,value:function(){return{__expr__:"("+JSON.stringify(this)+")"}}});var h0=Object.freeze({__proto__:null,BaseVisitor:Kd,withMozillaAstDo:Ny,printAst:ID,compareAst:JD,pathToNode:KD,rematchAstWithSource:LD,ReplaceManyVisitor:sq,ReplaceVisitor:Qr,AllNodesVisitor:Pr,parse:Bi,parseFunction:Ma,fuzzyParse:Bj,escodegen:gB,acorn:ut,walk:Or,query:Rr,
transform:Py,comments:vI,categorizer:MD,stringify:mg,nodes:cv,custom:Jw,isValidIdentifier:co});ya("bu",h0);var Rg=lively.FreezerRuntime.recorderFor("lively.vm/lib/util.js");Rg.getGlobal=nm;Rg.signatureOf=uu;Rg.isClass=Fs;Rg.pluck=vu;Rg.printSymbol=Mk;Rg.safeToString=Ov;Rg.printEvalResult=jr;Rg.obj=lf;Rg.string=Hg;Rg.getGlobal=nm;Rg.getGlobal=nm;Rg.signatureOf=uu;Rg.signatureOf=uu;Rg.isClass=Fs;Rg.isClass=Fs;Rg.pluck=vu;Rg.pluck=vu;Rg.knownSymbols=function(){return Object.getOwnPropertyNames(Symbol).filter(function(d){return"symbol"===
typeof Symbol[d]}).reduce(function(d,k){return d.set(Symbol[k],"Symbol."+k)},new Map)}();Rg.symMatcher=/^Symbol\((.*)\)$/;Rg.printSymbol=Mk;Rg.printSymbol=Mk;Rg.safeToString=Ov;Rg.safeToString=Ov;Rg.printEvalResult=jr;Rg.printEvalResult=jr;var pP=function(){function d(n,b){"object"===typeof b&&(b=b.maxDepth||2);if(!n)return String(n);if("string"===typeof n)return b=n.includes("\n")?"`":'"',n=n.split("\n").slice(0,1E3).join("\n"),b+n+b;if(n instanceof Error)return n.stack||Rg.safeToString(n);if(!Rg.obj.isObject(n))return Rg.safeToString(n);
try{var c=Rg.obj.inspect(n,{customPrinter:e,maxNumberOfKeys:100,maxDepth:b,printFunctionSource:!0})}catch(l){}return"{}"===c?Rg.safeToString(n):c}function k(n,b){if("string"===typeof n||Array.isArray(n)||!h||"function"!==typeof n[h])return b;var c="function"===typeof n.entries,l=c?n.entries():n[h](),a=[];b=c?"{":"[";var f=c?"}":"]";n=n.constructor&&n.constructor.name||"Iterable";for(var m=0,q;10>m;m++){q=l.next();if(q.done)break;a.push(q.value)}l=a.map(function(r){return c?String(r[0])+": "+String(r[1]):
d(r,2)}).join(", ");return n+"("+b+l+f+")"}function e(n,b,c){if(!n)return b;if("symbol"===typeof n)return Rg.printSymbol(n);if("string"===typeof n)return Rg.string.print(Rg.string.truncate(n,100));if(n.isMorph)return Rg.safeToString(n);if(n instanceof Promise)return"Promise()";if("undefined"!==typeof Node&&n instanceof Node||"undefined"!==typeof ImageData&&n instanceof ImageData)return Rg.safeToString(n);var l=n.length||n.byteLength;if(void 0!==l&&10<l&&n.slice)return"["+("string"===typeof n||n.byteLength?
Rg.safeToString(n.slice(0,10)):n.slice(0,10).map(c))+",...]";n=k(n,b);return n!==b?n:b}var h="undefined"!==typeof Symbol&&Symbol.iterator;return d}();Rg.printInspectEvalValue=pP;Rg.printInspectEvalValue=pP;Rg.printInspectEvalValue=pP;var uh=lively.FreezerRuntime.recorderFor("lively.vm/lib/completions.js");uh.getObjectForCompletion=Cx;uh.propertyExtract=function(d,k,e){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k).map(uh.printSymbol)).filter(function(h){return-1===d.indexOf(h)}).map(e).filter(function(h){return!!h}).sort(function(h,
n){return h.name<n.name?-1:h.name>n.name?1:0})};uh.getMethodsOf=function(d,k){return uh.propertyExtract(d,k,function(e){return k.__lookupGetter__&&k.__lookupGetter__(e)||"function"!==typeof k[e]?null:{name:e,completion:uh.signatureOf(e,k[e])}})};uh.getAttributesOf=function(d,k){return uh.propertyExtract(d,k,function(e){return k.__lookupGetter__&&!k.__lookupGetter__(e)&&"function"===typeof k[e]?null:{name:e,completion:e}})};uh.getProtoChain=function(d){for(var k=[];d;)k.push(d),d=d.__proto__;return k};
uh.getDescriptorOf=function(d,k){function e(h,n){h.length>n&&(h=h.slice(0,n)+"...");return h.replace(/\n/g,"").replace(/\s+/g," ")}if(d===k){if("function"!==typeof d)return e(uh.safeToString(d),50);k=d.toString();k=e(k.slice(k.indexOf("{")+1,k.lastIndexOf("}")),50);return uh.signatureOf(d.displayName||d.name||"function",d)+" {"+k+"}"}return(d=k.hasOwnProperty("constructor")&&k.constructor)?"string"===typeof d.type&&d.type.length?e(d.type,50):"string"===typeof d.name&&d.name.length?e(d.name,50):"anonymous class":
"prototype"};uh.getCompletionsOfObj=function(d,k){try{var e=[];var h=uh.getProtoChain(d).map(function(b){var c=uh.getDescriptorOf(d,b);b=uh.getMethodsOf(e,b).concat(uh.getAttributesOf(e,b));e=e.concat(uh.pluck(b,"name"));return[c,uh.pluck(b,"completion")]})}catch(b){var n=b}k(n,h)};uh.descriptorsOfObjAndProtoProperties=function(d){var k=[];return uh.getProtoChain(d).map(function(e){var h=uh.getDescriptorOf(d,e);e=uh.getMethodsOf(k,e).concat(uh.getAttributesOf(k,e));k=k.concat(uh.pluck(e,"name"));
return[h,uh.pluck(e,"completion")]})};uh.getCompletions=Nk;uh.lang=W_;uh.signatureOf=uu;uh.pluck=vu;uh.safeToString=Ov;uh.printSymbol=Mk;uh.getObjectForCompletion=Cx;uh.getObjectForCompletion=Cx;uh.getCompletions=Nk;uh.getCompletions=Nk;var ND=Object.freeze({__proto__:null,getObjectForCompletion:Cx,getCompletions:Nk});ya("aT",ND);var $b=lively.FreezerRuntime.recorderFor("lively.source-transform/capturing.js");$b.rewriteToCaptureTopLevelVariables=Gs;$b.transformImportMeta=function(d,k){return $b.ReplaceVisitor.run(d,
function(e){return"MetaProperty"==e.type&&"import"==e.meta.name?$b.parse("({url: _context.id})").body[0].expression:e})};$b.rewriteToRegisterModuleToCaptureSetters=wu;$b.clearEmptyExports=function(d,k){k=$b.topLevelDeclsAndRefs(d);k=$jscomp.makeIterator(k.scope.exportDecls);for(var e=k.next();!e.done;e=k.next())e=e.value,e.declaration||!e.specifiers||e.specifiers.length||$b.arr.remove(d.body,e);return d};$b.replaceRefs=function(d,k){var e=$b.topLevelDeclsAndRefs(d),h=e.refs.filter(function(b){return $b.shouldRefBeCaptured(b,
e,k)}),n=[];d=$b.ReplaceVisitor.run(d,function(b,c){if("Property"===b.type&&h.includes(b.key)&&b.shorthand)return $b.prop($b.id(b.key.name),b.value);if("ExportNamedDeclaration"===b.type){c=b.declaration;var l=b.specifiers;c&&(c.id?n.push(c.id):c.declarations&&n.push.apply(n,$jscomp.arrayFromIterable(c.declarations.map(function(a){return a.id}))));l&&l.forEach(function(a){return n.push(a.local)});return b}return"AssignmentExpression"===b.type&&h.includes(b.left)&&k.declarationWrapper?Object.assign({},
b,{right:$b.declarationWrapperCall(k.declarationWrapper,null,$b.literal(b.left.name),$b.literal("assignment"),b.right,k.captureObj,k)}):b});return $b.ReplaceVisitor.run(d,function(b,c,l){return h.includes(b)&&!n.includes(b)?$b.member(k.captureObj,b):b})};$b.replaceVarDecls=function(d,k){var e=$b.topLevelDeclsAndRefs(d);return $b.ReplaceManyVisitor.run(d,function(h){if(!e.varDecls.includes(h)||h.declarations.every(function(m){return!$b.shouldDeclBeCaptured(m,k)}))return h;for(var n=[],b=0;b<h.declarations.length;b++){var c=
h.declarations[b];if($b.shouldDeclBeCaptured(c,k)){var l=c.init||{operator:"||",type:"LogicalExpression",left:{computed:!1,object:k.captureObj,property:c.id,type:"MemberExpression"},right:{name:"undefined",type:"Identifier"}};l=k.declarationWrapper&&c.id.name?$b.declarationWrapperCall(k.declarationWrapper,c,$b.literal(c.id.name),$b.literal(h.kind),l,k.captureObj,k):l;if(c.id.type.includes("Pattern")){var a=$b.generateUniqueName(e.declaredNames,"destructured_1"),f={type:"Identifier",name:a};c=$b.transformPattern(c.id,
{parent:f,declaredNames:e.declaredNames}).map(function(m){return m[$b.annotationSym]&&m[$b.annotationSym].capture?$b.assignExpr(k.captureObj,m.declarations[0].id,k.declarationWrapper?$b.declarationWrapperCall(k.declarationWrapper,null,$b.literal(m.declarations[0].id.name),$b.literal(h.kind),m.declarations[0].init,k.captureObj,k):m.declarations[0].init,!1):m});e.declaredNames.push(a);n.push.apply(n,$jscomp.arrayFromIterable([$b.varDecl(f,l,h.kind)].concat(c)))}else n.push($b.assignExpr(k.captureObj,
c.id,l,!1)),k.keepTopLevelVarDecls&&n.push($b.varDecl(c.id,$b.member(k.captureObj,c.id)))}else n.push({type:"VariableDeclaration",kind:h.kind||"var",declarations:[c]})}return n})};$b.generateUniqueName=function(d,k){for(var e=1;-1<d.indexOf(k);){if(1E3<e)throw Error("Endless loop searching for unique variable "+k);k=k.replace(/_[0-9]+$|$/,"_"+ ++e)}return k};$b.additionalIgnoredDecls=function(d,k){k=$b.topLevelDeclsAndRefs(d);for(var e=[],h=0;h<k.scope.varDecls.length;h++){var n=k.scope.varDecls[h],
b=$b.Path(k.scope.varDeclPaths[h]).slice(0,-1).get(d);"ForStatement"!==b.type&&"ForInStatement"!==b.type&&"ForOfStatement"!==b.type&&"ExportNamedDeclaration"!==b.type||e.push.apply(e,$jscomp.arrayFromIterable(n.declarations))}return k.scope.catches.map(function(c){return c.name}).concat(e.map(function(c){return c.id.name}))};$b.additionalIgnoredRefs=function(d,k){k=$b.topLevelDeclsAndRefs(d);for(var e=[],h=0;h<k.scope.varDecls.length;h++){var n=k.scope.varDecls[h],b=$b.Path(k.scope.varDeclPaths[h]).slice(0,
-1).get(d);"ForStatement"!==b.type&&"ForInStatement"!==b.type&&"ForOfStatement"!==b.type||e.push.apply(e,$jscomp.arrayFromIterable(n.declarations))}return k.scope.catches.map(function(c){return c.name}).concat($b.queryHelpers.declIds(e.map(function(c){return c.id})).map(function(c){return c.name}))};$b.shouldDeclBeCaptured=function(d,k){return-1===k.excludeDecls.indexOf(d.id.name)&&(!k.includeDecls||-1<k.includeDecls.indexOf(d.id.name))};$b.shouldRefBeCaptured=function(d,k,e){if(k.scope.importSpecifiers.includes(d))return!1;
for(var h=0;h<k.scope.exportDecls.length;h++){var n=k.scope.exportDecls[h];if(n.declarations&&n.declarations.includes(d)||n.declaration===d)return!1}return e.excludeRefs.includes(d.name)||e.includeRefs&&!e.includeRefs.includes(d.name)?!1:!0};$b.replaceClassDecls=function(d,k){if(k.classToFunction)return k.classToFunction.transform(d,k.classToFunction);var e=$b.topLevelDeclsAndRefs(d);if(!e.classDecls.length)return d;for(var h=d.body.length-1;0<=h;h--){var n=d.body[h];n.id&&e.classDecls.includes(n)&&
d.body.splice(h+1,0,$b.assignExpr(k.captureObj,n.id,n.id,!1))}return d};$b.splitExportDeclarations=function(d,k){k=d.body;for(var e=d.body=[],h=0;h<k.length;h++){var n=k[h];if("ExportNamedDeclaration"!==n.type||!n.declaration||"VariableDeclaration"!==n.declaration.type||1>=n.declaration.declarations.length)e.push(n);else for(var b=n.declaration.declarations,c=0;c<b.length;c++)e.push({type:"ExportNamedDeclaration",specifiers:[],declaration:$b.varDecl(b[c].id,b[c].init,n.declaration.kind)})}return d};
$b.insertCapturesForExportedImports=xu;$b.insertCapturesForExportDeclarations=function(d,k){for(var e=[],h=0;h<d.body.length;h++){var n=d.body[h];e.push(n);if(("ExportNamedDeclaration"===n.type||"ExportDefaultDeclaration"===n.type)&&n.declaration)if("ExportDefaultDeclaration"===n.type&&"Literal"===n.declaration.type){var b=n.declaration,c=$b.generateUniqueName($b.topLevelDeclsAndRefs(d).declaredNames,"$"+b.raw.split('"').join(""));n.declaration=$b.id(c);$b.arr.pushAt(e,$b.assignExpr(k.captureObj,
c,b.raw,!1),e.indexOf(n))}else n.declaration.declarations?e.push.apply(e,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(l){var a=l.id;k.declarationWrapper&&(l.init.callee&&l.init.callee.name===k.declarationWrapper.name||(a=$b.declarationWrapperCall(k.declarationWrapper,l,$b.literal(l.id.name),$b.literal("assignment"),l.id,k.captureObj,k)));return $b.assignExpr(k.captureObj,l.id,a,!1)}))):"FunctionDeclaration"!==n.declaration.type&&"ClassDeclaration"===n.declaration.type&&e.push($b.assignExpr(k.captureObj,
n.declaration.id,n.declaration.id,!1))}d.body=e;return d};$b.insertCapturesForImportDeclarations=function(d,k){d.body=d.body.reduce(function(e,h){return e.concat("ImportDeclaration"===h.type&&h.specifiers.length?[h].concat(h.specifiers.map(function(n){return $b.assignExpr(k.captureObj,n.local,n.local,!1)})):[h])},[]);return d};$b.insertDeclarationsForExports=function(d,k){for(var e=$b.topLevelDeclsAndRefs(d),h=[],n=0;n<d.body.length;n++){var b=d.body[n];k.classToFunction&&"ExportDefaultDeclaration"===
b.type&&b.declaration&&!b.declaration.type.includes("Declaration")&&("Identifier"===b.declaration.type||b.declaration.id)?h=h.concat([$b.varDeclOrAssignment(d,{type:"VariableDeclarator",id:b.declaration,init:$b.member(k.captureObj,b.declaration)}),b]):"ExportNamedDeclaration"!==b.type||!b.specifiers.length||b.source?h.push(b):h=h.concat(b.specifiers.map(function(c){return e.declaredNames.includes(c.local.name)?null:$b.varDeclOrAssignment(d,{type:"VariableDeclarator",id:c.local,init:$b.member(k.captureObj,
c.local)})}).filter(Boolean)).concat(b)}d.body=h;return d};$b.fixDefaultAsyncFunctionExportForRegeneratorBug=function(d,k){k=[];for(var e=0;e<d.body.length;e++){var h=d.body[e];"ExportDefaultDeclaration"===h.type&&"FunctionDeclaration"===h.declaration.type&&h.declaration.id&&h.declaration.async&&(k.push(h.declaration),h.declaration={type:"Identifier",name:h.declaration.id.name});k.push(h)}d.body=k;return d};$b.es6ModuleTransforms=function(d,k){d.body=d.body.reduce(function(e,h){if("ExportNamedDeclaration"===
h.type)if(h.source){var n=c=h.source;var b=h.specifiers.map(function(l){return{type:"ExpressionStatement",expression:$b.exportFromImport({type:"Literal",value:l.exported.name},{type:"Literal",value:l.local.name},c,k.moduleExportFunc,k.moduleImportFunc)}})}else b=h.declaration?(b=h.declaration.declarations)?b.map(function(l){k.excludeDecls.push(l.id);return $b.varDecl(l.id,$b.assignExpr(k.captureObj,l.id,k.declarationWrapper?$b.declarationWrapperCall(k.declarationWrapper,null,$b.literal(l.id.name),
$b.literal(h.declaration.kind),l,k.captureObj,k):l.init,!1),h.declaration.kind)}).concat(b.map(function(l){return $b.exportCallStmt(k.moduleExportFunc,l.id.name,l.id)})):[h.declaration].concat($b.exportCallStmt(k.moduleExportFunc,h.declaration.id.name,h.declaration.id)):h.specifiers.map(function(l){return $b.exportCallStmt(k.moduleExportFunc,l.exported.name,$b.shouldDeclBeCaptured({id:l.local},k)?$b.member(k.captureObj,l.local):l.local)});else if("ExportDefaultDeclaration"===h.type)b=h.declaration&&
h.declaration.id?[h.declaration].concat($b.exportCallStmt(k.moduleExportFunc,"default",h.declaration.id)):[$b.exportCallStmt(k.moduleExportFunc,"default",h.declaration)];else if("ExportAllDeclaration"===h.type){n={name:k.es6ExportFuncId+"__iterator__",type:"Identifier"};var c=h.source;b=[{type:"ForInStatement",body:{type:"ExpressionStatement",expression:$b.exportFromImport(n,n,c,k.moduleExportFunc,k.moduleImportFunc)},left:{type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",
id:n,init:null}]},right:$b.importCall(null,c,k.moduleImportFunc)}];k.excludeRefs.push(n.name);k.excludeDecls.push(n.name)}else b="ImportDeclaration"===h.type?h.specifiers.length?h.specifiers.map(function(l){return $b.varDeclAndImportCall(d,l.local,"ImportSpecifier"===l.type&&l.imported.name||"ImportDefaultSpecifier"===l.type&&"default"||null,h.source,k.moduleImportFunc)}):$b.importCallStmt(null,h.source,k.moduleImportFunc):[h];return e.concat(b)},[]);return d};$b.putFunctionDeclsInFront=function(d,
k){var e=$b.topLevelDeclsAndRefs(d).scope,h=e.funcDecls;if(!h.length)return d;for(var n=[],b=h.length;b--;){var c=h[b];if(c.id&&$b.shouldDeclBeCaptured(c,k)){var l=e.funcDeclPaths[b].slice(0,-1),a=$b.Path(l).get(e.node);l={type:"Identifier",name:c.id.name};var f=k.declarationWrapper?$b.declarationWrapperCall(k.declarationWrapper,c,$b.literal(l.name),$b.literal("function"),l,k.captureObj,k):l,m=Object.assign({},c);Array.isArray(a)?a.splice(a.indexOf(c),1,$b.exprStmt(c.id)):"ExportNamedDeclaration"===
a.type?(a=e.node.body.indexOf(a),-1<a&&e.node.body.splice(a,1,{type:"ExportNamedDeclaration",specifiers:[{type:"ExportSpecifier",exported:c.id,local:c.id}]})):"ExportDefaultDeclaration"===a.type&&(a.declaration=c.id);n.unshift($b.assignExpr(k.captureObj,l,f,!1));n.unshift(m)}}d.body=n.concat(d.body);return d};$b.computeDefRanges=function(d,k){d=$b.topLevelDeclsAndRefs(d);return $b.chain(d.scope.varDecls).pluck("declarations").flatten().value().concat(d.scope.funcDecls.filter(function(e){return e.id})).reduce(function(e,
h){e[h.id.name]||(e[h.id.name]=[]);e[h.id.name].push({type:h.type,start:h.start,end:h.end});return e},{})};$b.transformPattern=function(d,k){return"ArrayPattern"===d.type?$b.transformArrayPattern(d,k):"ObjectPattern"===d.type?$b.transformObjectPattern(d,k):[]};$b.transformArrayPattern=function(d,k){for(var e=k.declaredNames,h=$b.annotationSym,n=[],b=0;b<d.elements.length;b++){var c=d.elements[b];if("Identifier"===c.type)c=$b.varDecl(c,$b.member(k.parent,$b.id(b),!0)),c[h]={capture:!0},n.push(c);else if("RestElement"===
c.type)c=$b.varDecl(c.argument,{type:"CallExpression",arguments:[{type:"Literal",value:b}],callee:$b.member(k.parent,$b.id("slice"),!1)}),c[h]={capture:!0},n.push(c);else if("AssignmentPattern"==c.type)c=$b.varDecl(c.left,$b.conditional($b.binaryExpr($b.member(k.parent,$b.id(b),!0),"===",$b.id("undefined")),c.right,$b.member(k.parent,$b.id(b),!0))),c[h]={capture:!0},n.push(c);else{var l=$b.id($b.generateUniqueName(e,k.parent.name+"$"+b)),a=$b.varDecl(l,$b.member(k.parent,b));e.push(l.name);n.push(a);
n.push.apply(n,$jscomp.arrayFromIterable($b.transformPattern(c,{parent:l,declaredNames:e})))}}return n};$b.transformObjectPattern=function(d,k){for(var e=k.declaredNames,h=$b.annotationSym,n=[],b=0;b<d.properties.length;b++){var c=d.properties[b];if("RestElement"==c.type){var l=d.properties.map(function(m){return m.key&&m.key.name}).filter(Boolean),a=$b.nodes.varDecl(c.argument.name,$b.nodes.objectLiteral([])),f=$b.nodes.varDecl(c.argument.name,$b.id(c.argument.name));c=$b.nodes.exprStmt($b.nodes.funcCall($b.nodes.funcExpr({},
[],$b.nodes.forIn("__key",k.parent,$b.nodes.block.apply($b.nodes,[].concat($jscomp.arrayFromIterable(l.length?l.map(function(m){return $b.nodes.ifStmt($b.nodes.binaryExpr($b.nodes.id("__key"),"===",$b.nodes.literal(m)),{type:"ContinueStatement",label:null},null)}):[]),[$b.nodes.exprStmt($b.nodes.assign($b.nodes.member(c.argument.name,$b.nodes.id("__key"),!0),$b.nodes.member(k.parent,$b.nodes.id("__key"),!0)))]))))));f[h]={capture:!0};n.push(a,f,c)}else"Identifier"==c.value.type?(a=$b.varDecl(c.value,
$b.member(k.parent,c.key)),a[h]={capture:!0},n.push(a)):"AssignmentPattern"==c.value.type?(a=$b.varDecl(c.value.left,$b.conditional($b.binaryExpr($b.member(k.parent,c.key),"===",$b.id("undefined")),c.value.right,$b.member(k.parent,c.key))),a[h]={capture:!0},n.push(a)):(a=$b.id($b.generateUniqueName(e,k.parent.name+"$"+c.key.name)),f=$b.varDecl(a,$b.member(k.parent,c.key)),f[h]={capture:!1},e.push(a.name),n.push.apply(n,$jscomp.arrayFromIterable([f].concat($b.transformPattern(c.value,{parent:a,declaredNames:e})))))}return n};
$b.varDeclOrAssignment=function(d,k,e){return-1<$b.topLevelDeclsAndRefs(d).declaredNames.indexOf(k.id.name)?$b.exprStmt($b.assign(k.id,k.init)):{declarations:[k],kind:e||"var",type:"VariableDeclaration"}};$b.assignExpr=function(d,k,e,h){return $b.exprStmt($b.assign($b.member(d,k,h),e||$b.id("undefined")))};$b.exportFromImport=function(d,k,e,h,n){return $b.exportCall(h,d,$b.importCall(k,e,n))};$b.varDeclAndImportCall=function(d,k,e,h,n){return $b.varDecl(k,$b.importCall(e,h,n))};$b.importCall=function(d,
k,e){"string"===typeof d&&(d=$b.literal(d));return{arguments:[k].concat(d||[]),callee:e,type:"CallExpression"}};$b.importCallStmt=function(d,k,e){return $b.exprStmt($b.importCall(d,k,e))};$b.exportCall=function(d,k,e){"string"===typeof k&&(k=$b.literal(k));e=$b.obj.deepCopy(e);return $b.funcCall(d,k,e)};$b.exportCallStmt=function(d,k,e){return $b.exprStmt($b.exportCall(d,k,e))};$b.declarationWrapperCall=function(d,k,e,h,n,b,c){if(k){var l=[],a=!1;if(k["x-lively-object-meta"]){a=k["x-lively-object-meta"];
k=a.start;var f=a.end,m=a.evalId,q=a.sourceAccessorName;a=!0;l.push("start",$b.nodes.literal(k),"end",$b.nodes.literal(f))}void 0===m&&c.hasOwnProperty("evalId")&&(m=c.evalId,a=!0);void 0===q&&c.hasOwnProperty("sourceAccessorName")&&(q=c.sourceAccessorName,a=!0);void 0!==m&&l.push("evalId",$b.nodes.literal(m));q&&l.push("moduleSource",$b.nodes.id(q));if(a)return $b.funcCall(d,e,h,n,b,$b.nodes.objectLiteral(l))}return $b.funcCall(d,e,h,n,b)};$b.obj=lf;$b.string=Hg;$b.chain=Hl;$b.arr=Te;$b.fun=Xk;$b.Path=
Xg;$b.parse=Bi;$b.stringify=mg;$b.query=Rr;$b.transform=Py;$b.nodes=cv;$b.Visitor=Kd;$b.ReplaceManyVisitor=sq;$b.ReplaceVisitor=Qr;var vt=$b.nodes;$b.member=vt.member;$b.prop=vt.prop;$b.varDecl=vt.varDecl;$b.assign=vt.assign;$b.id=vt.id;$b.literal=vt.literal;$b.exprStmt=vt.exprStmt;$b.conditional=vt.conditional;$b.binaryExpr=vt.binaryExpr;$b.funcCall=vt.funcCall;var i0=$b.query;$b.topLevelDeclsAndRefs=i0.topLevelDeclsAndRefs;$b.queryHelpers=i0.helpers;var j0=$b.transform;$b.transformSingleExpression=
j0.transformSingleExpression;$b.wrapInStartEndCall=j0.wrapInStartEndCall;$b.rewriteToCaptureTopLevelVariables=Gs;$b.rewriteToCaptureTopLevelVariables=Gs;$b.rewriteToRegisterModuleToCaptureSetters=wu;$b.rewriteToRegisterModuleToCaptureSetters=wu;$b.insertCapturesForExportedImports=xu;$b.insertCapturesForExportedImports=xu;$b.annotationSym=Symbol("lively.ast-destructuring-transform");var OD=Object.freeze({__proto__:null,rewriteToCaptureTopLevelVariables:Gs,rewriteToRegisterModuleToCaptureSetters:wu,
insertCapturesForExportedImports:xu}),k0={__esModule:!0,default:function(){return{manipulateOptions:function(d,k){k.plugins.push("jsx")}}}},Hba=k0=k0["default"],Iba={},l0=Iba=Array.isArray,wI="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,m0={};m0="object"==typeof wI&&wI&&wI.Object===Object&&wI;var Jba={},Kba="object"==typeof self&&self&&self.Object===Object&&self,Qy=Jba=m0||Kba||Function("return this")(),Lba={},xI=Lba=Qy.Symbol,Mba={},n0=Object.prototype,Nba=n0.hasOwnProperty,
Oba=n0.toString,PD=xI?xI.toStringTag:void 0,Pba=Mba=function(d){var k=Nba.call(d,PD),e=d[PD];try{d[PD]=void 0;var h=!0}catch(b){}var n=Oba.call(d);h&&(k?d[PD]=e:delete d[PD]);return n},o0={},Qba=Object.prototype.toString;o0=function(d){return Qba.call(d)};var Rba={},Sba=o0,p0=xI?xI.toStringTag:void 0,qP=Rba=function(d){return null==d?void 0===d?"[object Undefined]":"[object Null]":p0&&p0 in Object(d)?Pba(d):Sba(d)},Tba={},rP=Tba=function(d){return null!=d&&"object"==typeof d},Uba={},Vba=Uba=function(d){return"string"==
typeof d||!l0(d)&&rP(d)&&"[object String]"==qP(d)},Wba={},sP=Wba=function(d){return d},Xba={},Yba=Xba=function(d){return"symbol"==typeof d||rP(d)&&"[object Symbol]"==qP(d)},Zba={},hB=Zba=function(d){var k=typeof d;return null!=d&&("object"==k||"function"==k)},$ba={},aca=$ba=function(d){if(!hB(d))return!1;d=qP(d);return"[object Function]"==d||"[object GeneratorFunction]"==d||"[object AsyncFunction]"==d||"[object Proxy]"==d},q0={};q0=Qy["__core-js_shared__"];var bca={},tP=q0,r0=function(){var d=/[^.]+$/.exec(tP&&
tP.keys&&tP.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),cca=bca=function(d){return!!r0&&r0 in d},s0={},dca=Function.prototype.toString;s0=function(d){if(null!=d){try{return dca.call(d)}catch(k){}return d+""}return""};var eca={},fca=s0,gca=/^\[object .+?Constructor\]$/,hca=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ica=eca=function(d){return!hB(d)||
cca(d)?!1:(aca(d)?hca:gca).test(fca(d))},t0={};t0=function(d,k){return null==d?void 0:d[k]};var jca={},kca=t0,u0=jca=function(d,k){d=kca(d,k);return ica(d)?d:void 0},lca={},v0=lca=function(){try{var d=u0(Object,"defineProperty");d({},"",{});return d}catch(k){}}(),mca={},w0=mca=function(d,k){var e=-1,h=d.length;for(k||(k=Array(h));++e<h;)k[e]=d[e];return k},nca={},x0=Object.create,uP=nca=function(){function d(){}return function(k){if(!hB(k))return{};if(x0)return x0(k);d.prototype=k;k=new d;d.prototype=
void 0;return k}}(),oca={},pca=/^(?:0|[1-9]\d*)$/,qca=oca=function(d,k){var e=typeof d;k=null==k?9007199254740991:k;return!!k&&("number"==e||"symbol"!=e&&pca.test(d))&&-1<d&&0==d%1&&d<k},rca={},y0=rca=function(d,k,e){switch(e.length){case 0:return d.call(k);case 1:return d.call(k,e[0]);case 2:return d.call(k,e[0],e[1]);case 3:return d.call(k,e[0],e[1],e[2])}return d.apply(k,e)},z0={};z0=function(d){return function(){return d}};var sca={},tca=z0,uca=sca=v0?function(d,k){return v0(d,"toString",{configurable:!0,
enumerable:!1,value:tca(k),writable:!0})}:sP,vca={},wca=Date.now,A0=vca=function(d){var k=0,e=0;return function(){var h=wca(),n=16-(h-e);e=h;if(0<n){if(800<=++k)return arguments[0]}else k=0;return d.apply(void 0,arguments)}},xca={},yca=xca=A0(uca),zca={},B0=zca=u0(Qy,"WeakMap"),Aca={},Bca=Aca=function(d,k){for(var e=-1,h=null==d?0:d.length;++e<h&&!1!==k(d[e],e,d););return d},Cca={},C0=0/0,Dca=/^\s+|\s+$/g,Eca=/^[-+]0x[0-9a-f]+$/i,Fca=/^0b[01]+$/i,Gca=/^0o[0-7]+$/i,Hca=parseInt,Ica=Cca=function(d){if("number"==
typeof d)return d;if(Yba(d))return C0;hB(d)&&(d="function"==typeof d.valueOf?d.valueOf():d,d=hB(d)?d+"":d);if("string"!=typeof d)return 0===d?d:+d;d=d.replace(Dca,"");var k=Fca.test(d);return k||Gca.test(d)?Hca(d.slice(2),k?2:8):Eca.test(d)?C0:+d},Jca={},Kca=Jca=function(d,k,e,h){var n=d.length;for(e+=h?1:-1;h?e--:++e<n;)if(k(d[e],e,d))return e;return-1},D0={},E0=1/0;D0=function(d){if(!d)return 0===d?d:0;d=Ica(d);return d===E0||d===-E0?1.7976931348623157E308*(0>d?-1:1):d===d?d:0};var Lca={},Mca=D0,
F0=Lca=function(d){d=Mca(d);var k=d%1;return d===d?k?d-k:d:0},Nca={},Oca=Nca=function(d){return d!==d},G0={};G0=function(d,k,e){--e;for(var h=d.length;++e<h;)if(d[e]===k)return e;return-1};var H0={},Pca=G0;H0=function(d,k,e){return k===k?Pca(d,k,e):Kca(d,Oca,e)};var Qca={},Rca=H0,Sca=Qca=function(d,k){return!(null==d||!d.length)&&-1<Rca(d,k,0)},Tca={},Uca=Tca=function(){},Vca={},vP=Vca=function(){},Dx="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Wca={};Oz.prototype=
uP(vP.prototype);var wP=Wca=Oz.prototype.constructor=Oz,$B="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Xca={};Ex.prototype=uP(vP.prototype);var I0=Xca=Ex.prototype.constructor=Ex,J0={};J0=function(d){if(d instanceof wP)return d.clone();var k=new I0(d.__wrapped__,d.__chain__);k.__actions__=w0(d.__actions__);k.__index__=d.__index__;k.__values__=d.__values__;return k};var Yca={},M5=wP,nS=I0,L5=l0,K5=rP,O5=J0,N5=Object.prototype.hasOwnProperty;kr.prototype=vP.prototype;
var Zca=Yca=kr.prototype.constructor=kr,$ca={},yI=$ca=B0&&new B0,ada={},K0=ada=yI?function(d){return yI.get(d)}:Uca,L0={};L0={};var M0={},N0=L0,bda=Object.prototype.hasOwnProperty;M0=function(d){for(var k=d.name+"",e=N0[k],h=bda.call(N0,k)?e.length:0;h--;){var n=e[h],b=n.func;if(null==b||b==d)return n.name}return k};var cda={},dda=M0,eda=cda=function(d){var k=dda(d),e=Zca[k];if("function"!=typeof e||!(k in wP.prototype))return!1;if(d===e)return!0;k=K0(e);return!!k&&d===k[0]},fda={},O0=fda=yI?function(d,
k){yI.set(d,k);return d}:sP,gda={},zI=gda=function(d){return function(){var k=arguments;switch(k.length){case 0:return new d;case 1:return new d(k[0]);case 2:return new d(k[0],k[1]);case 3:return new d(k[0],k[1],k[2]);case 4:return new d(k[0],k[1],k[2],k[3]);case 5:return new d(k[0],k[1],k[2],k[3],k[4]);case 6:return new d(k[0],k[1],k[2],k[3],k[4],k[5]);case 7:return new d(k[0],k[1],k[2],k[3],k[4],k[5],k[6])}var e=uP(d.prototype);k=d.apply(e,k);return hB(k)?k:e}},AI="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,hda={},ida=hda=function(d,k,e){function h(){return((this||AI)&&(this||AI)!==Qy&&(this||AI)instanceof h?b:d).apply(n?e:this||AI,arguments)}var n=k&1,b=zI(d);return h},jda={},kda=Math.max,P0=jda=function(d,k,e,h){var n=-1,b=d.length,c=e.length,l=-1,a=k.length,f=kda(b-c,0),m=Array(a+f);for(h=!h;++l<a;)m[l]=k[l];for(;++n<c;)if(h||n<b)m[e[n]]=d[n];for(;f--;)m[l++]=d[n++];return m},lda={},mda=Math.max,Q0=lda=function(d,k,e,h){var n=-1,b=d.length,c=-1,l=e.length,
a=-1,f=k.length,m=mda(b-l,0),q=Array(m+f);for(h=!h;++n<m;)q[n]=d[n];for(m=n;++a<f;)q[m+a]=k[a];for(;++c<l;)if(h||n<b)q[m+e[c]]=d[n++];return q},nda={},oda=nda=function(d,k){for(var e=d.length,h=0;e--;)d[e]===k&&++h;return h},pda={},R0=pda=A0(O0),qda={},rda=/\{\n\/\* \[wrapped with (.+)\] \*/,sda=/,? & /,tda=qda=function(d){return(d=d.match(rda))?d[1].split(sda):[]},uda={},vda=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,wda=uda=function(d,k){var e=k.length;if(!e)return d;var h=e-1;k[h]=(1<e?"& ":"")+
k[h];k=k.join(2<e?", ":" ");return d.replace(vda,"{\n/* [wrapped with "+k+"] */\n")},S0={},xda=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];S0=function(d,k){Bca(xda,function(e){var h="_."+e[0];k&e[1]&&!Sca(d,h)&&d.push(h)});return d.sort()};var yda={},zda=S0,T0=yda=function(d,k,e){k+="";return yca(d,wda(k,zda(tda(k),e)))},Ada={},U0=Ada=function(d,k,e,h,n,b,c,l,a,f){var m=k&8;k=(k|(m?32:64))&~(m?64:32);k&4||(k&=-4);
n=[d,k,n,m?b:void 0,m?c:void 0,m?void 0:b,m?void 0:c,l,a,f];e=e.apply(void 0,n);eda(d)&&R0(e,n);e.placeholder=h;return T0(e,d,k)},Bda={},V0=Bda=function(d){return d.placeholder},Cda={},Dda=Math.min,Eda=Cda=function(d,k){for(var e=d.length,h=Dda(k.length,e),n=w0(d);h--;){var b=k[h];d[h]=qca(b,e)?n[b]:void 0}return d},Fda={},BI=Fda=function(d,k){for(var e=-1,h=d.length,n=0,b=[];++e<h;){var c=d[e];if(c===k||"__lodash_placeholder__"===c)d[e]="__lodash_placeholder__",b[n++]=e}return b},kF="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Gda={},R5=P0,S5=Q0,Q5=oda,oS=zI,U5=U0,P5=V0,V5=Eda,T5=BI,W5=Qy,W0=Gda=Hs,CI="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Hda={},Ida=Hda=function(d,k,e){function h(){for(var b=arguments.length,c=Array(b),l=b,a=V0(h);l--;)c[l]=arguments[l];l=3>b&&c[0]!==a&&c[b-1]!==a?[]:BI(c,a);b-=l.length;return b<e?U0(d,k,W0,h.placeholder,void 0,c,l,void 0,void 0,e-b):y0((this||CI)&&(this||CI)!==Qy&&(this||CI)instanceof
h?n:d,this||CI,c)}var n=zI(d);return h},DI="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Jda={},Kda=Jda=function(d,k,e,h){function n(){for(var l=-1,a=arguments.length,f=-1,m=h.length,q=Array(m+a),r=(this||DI)&&(this||DI)!==Qy&&(this||DI)instanceof n?c:d;++f<m;)q[f]=h[f];for(;a--;)q[f++]=arguments[++l];return y0(r,b?e:this||DI,q)}var b=k&1,c=zI(d);return n},X0={},Lda=Math.min;X0=function(d,k){var e=d[1],h=k[1],n=e|h,b=128==h&&8==e||128==h&&256==e&&d[7].length<=k[8]||
384==h&&k[7].length<=k[8]&&8==e;if(!(131>n||b))return d;h&1&&(d[2]=k[2],n|=e&1?0:4);if(e=k[3])b=d[3],d[3]=b?P0(b,e,k[4]):e,d[4]=b?BI(d[3],"__lodash_placeholder__"):k[4];if(e=k[5])b=d[5],d[5]=b?Q0(b,e,k[6]):e,d[6]=b?BI(d[5],"__lodash_placeholder__"):k[6];(e=k[7])&&(d[7]=e);h&128&&(d[8]=null==d[8]?k[8]:Lda(d[8],k[8]));null==d[9]&&(d[9]=k[9]);d[0]=k[0];d[1]=n;return d};var Y0={},Mda=X0,Z0=Math.max;Y0=function(d,k,e,h,n,b,c,l){var a=k&2;if(!a&&"function"!=typeof d)throw new TypeError("Expected a function");
var f=h?h.length:0;f||(k&=-97,h=n=void 0);c=void 0===c?c:Z0(F0(c),0);l=void 0===l?l:F0(l);f-=n?n.length:0;if(k&64){var m=h,q=n;h=n=void 0}var r=a?void 0:K0(d);b=[d,k,e,h,n,m,q,b,c,l];r&&Mda(b,r);d=b[0];k=b[1];e=b[2];h=b[3];n=b[4];l=b[9]=void 0===b[9]?a?0:d.length:Z0(b[9]-f,0);!l&&k&24&&(k&=-25);e=k&&1!=k?8==k||16==k?Ida(d,k,l):32!=k&&33!=k||n.length?W0.apply(void 0,b):Kda(d,k,e,h):ida(d,k,e);return T0((r?O0:R0)(e,b),d,k)};var Nda={},Oda=Y0,Pda=Nda=function(d,k,e){k=e?void 0:k;k=d&&null==k?d.length:
k;return Oda(d,128,void 0,void 0,void 0,void 0,k)},xP={};Object.defineProperty(xP,"__esModule",{value:!0});xP.default=function(d){var k=d.types,e=function(n){return function(b){var c=n[b.type];if(c)return c(b);throw Error(b.type+" could not be transformed");}},h=function(n,b){var c=b.opts;b=c.useNew;var l=void 0===b?!1:b;b=c.module;var a=c.function;c=c.useVariables;var f=void 0===c?!1:c,m=c=void 0;!0===f?c=/^[A-Z]/:(0,Qda.default)(f)&&(c=new RegExp(f));var q=l?k.newExpression:k.callExpression;m=function(r){return function(u){return q(r,
[u])}};b?(l=n.scope.generateUidIdentifier(l?"JSXNode":"jsx"),m=m(l),b=k.importDeclaration([k.importDefaultSpecifier(l)],k.stringLiteral(b)),n.findParent(function(r){return r.isProgram()}).unshiftContainer("body",b)):a?(n=a.split(".").map((0,$0.default)(k.identifier,1)).reduce((0,$0.default)(k.memberExpression,2)),m=m(n)):m=Rda.default;return{variablesRegex:c,jsxObjectTransformer:m}};return{inherits:Hba,visitor:{JSXElement:function(n,b){b.get("jsxConfig")||b.set("jsxConfig",h(n,b));var c=b.get("jsxConfig"),
l=c.variablesRegex,a=c.jsxObjectTransformer,f=function(C){return k.stringLiteral(C.name)},m=function(C){return k.stringLiteral(C.namespace.name+":"+C.name.name)},q=e({JSXIdentifier:function(C){return k.identifier(C.name)},JSXMemberExpression:function(C){return k.memberExpression(q(C.object),q(C.property))}}),r=e({JSXIdentifier:l?function(C){return l.test(C.name)?k.identifier(C.name):f(C)}:f,JSXNamespacedName:m,JSXMemberExpression:q});c=function(C){return C.expression};var u=e({JSXIdentifier:f,JSXNamespacedName:m,
JSXMemberExpression:q}),v=e({StringLiteral:function(C){return C},JSXExpressionContainer:c}),y=function(C){var G=[],F=[];C.forEach(function(N){switch(N.type){case "JSXAttribute":G||(G=[]);var L=u(N.name);L=Sda.default.keyword.isIdentifierNameES6(L.value)?k.identifier(L.value):L;G.push(k.objectProperty(L,v(N.value)));break;case "JSXSpreadAttribute":G&&(F.push(k.objectExpression(G)),G=null);F.push(N.argument);break;default:throw Error(N.type+" cannot be used as a JSX attribute");}});G&&0<G.length&&F.push(k.objectExpression(G));
return 0===F.length?k.objectExpression([]):1===F.length?F[0]:k.callExpression(b.addHelper("extends"),F)};m=function(C){return a(k.objectExpression([k.objectProperty(k.identifier(Tda),r(C.openingElement.name)),k.objectProperty(k.identifier(Uda),y(C.openingElement.attributes)),k.objectProperty(k.identifier(Vda),C.closingElement?A(C.children):k.nullLiteral())]))};var z=e({JSXText:function(C){if(b.opts.noTrim)return k.stringLiteral(C.value);C=C.value.replace(/\n\s*/g,"");return""===C?null:k.stringLiteral(C)},
JSXElement:m,JSXExpressionContainer:c}),A=function(C){return k.arrayExpression(C.map(z).filter(Boolean).reduce(function(G,F){var N=0<G.length?G[G.length-1]:null;return"StringLiteral"===F.type&&N&&"StringLiteral"===N.type?[].concat(aC(G.slice(0,-1)),[k.stringLiteral(N.value+F.value)]):[].concat(aC(G),[F])},[]))};n.replaceWith(m(n.node))}}}};var Qda=lr(Vba),Rda=lr(sP),$0=lr(Pda),Sda=lr(DD),Tda="elementName",Uda="attributes",Vda="children",QD={};Object.defineProperty(QD,"__esModule",{value:!0});QD.declare=
function(d){return function(k,e,h){k.assertVersion||(k=Object.assign(lF(k),{assertVersion:function(n){var b=k.version;if("number"===typeof n){if(!Number.isInteger(n))throw Error("Expected string or integer value.");n="^"+n+".0.0-0"}if("string"!==typeof n)throw Error("Expected string or integer value.");var c=Error.stackTraceLimit;"number"===typeof c&&25>c&&(Error.stackTraceLimit=25);var l="7."===b.slice(0,2)?Error('Requires Babel "^7.0.0-beta.41", but was loaded with "'+b+"\". You'll need to update your @babel/core version."):
Error('Requires Babel "'+n+'", but was loaded with "'+b+'". If you are sure you have a compatible version of @babel/core, it is likely that something in your build process is loading the wrong version. Inspect the stack trace of this error to look for the first entry that doesn\'t mention "@babel/core" or "babel-core" to see what is calling Babel.');"number"===typeof c&&(Error.stackTraceLimit=c);throw Object.assign(l,{code:"BABEL_VERSION_UNSUPPORTED",version:b,range:n});}}));return d(k,e||{},h)}};
var Ry={};Object.defineProperty(Ry,"__esModule",{value:!0});Ry.default=void 0;var Wda=(0,QD.declare)(function(d){d.assertVersion(7);return{name:"syntax-optional-catch-binding",manipulateOptions:function(k,e){e.plugins.push("optionalCatchBinding")}}});Ry.default=Wda;var EI={};Object.defineProperty(EI,"__esModule",{value:!0});EI.default=void 0;var Xda=Ry&&Ry.__esModule?Ry:{default:Ry},Yda=(0,QD.declare)(function(d){d.assertVersion(7);return{name:"proposal-optional-catch-binding",inherits:Xda.default,
visitor:{CatchClause:function(k){if(!k.node.param){var e=k.scope.generateUidIdentifier("unused");k.get("param").replaceWith(e)}}}}});EI.default=Yda;var FI={};Object.defineProperty(FI,"__esModule",{value:!0});FI.default=void 0;var Zda=(0,QD.declare)(function(d){d.assertVersion(7);return{name:"syntax-import-meta",manipulateOptions:function(k,e){e.plugins.push("importMeta")}}});FI.default=Zda;var Ci=lively.FreezerRuntime.recorderFor("lively.source-transform/index.js");Ci.ensureJSXPlugin=function(){Ci.transformJSX&&
("undefined"===typeof babel||babel.availablePlugins["transform-jsx"]||(lively||global.lively).FreezerRuntime||babel.registerPlugin("transform-jsx",Ci.transformJSX.default))};Ci.ensureOptionalCatchBinding=function(){Ci.catchBinding&&("undefined"===typeof babel||babel.availablePlugins["optional-catch-binding"]||(lively||global.lively).FreezerRuntime||babel.registerPlugin("optional-catch-binding",Ci.catchBinding.default))};Ci.ensureImportMeta=function(){Ci.importMeta&&("undefined"===typeof babel||babel.availablePlugins["syntax-import-meta"]||
(lively||global.lively).FreezerRuntime||babel.registerPlugin("syntax-import-meta",Ci.importMeta.default))};Ci.stringifyFunctionWithoutToplevelRecorder=Ll;Ci.es5Transpilation=yu;Ci.capturing=OD;Ci.capturing=OD;Ci.capturing=OD;Ci.parseFunction=Ma;Ci.stringify=mg;Ci.ReplaceVisitor=Qr;Ci.transformJSX=xP;Ci.catchBinding=EI;Ci.importMeta=FI;Ci.stringifyFunctionWithoutToplevelRecorder=Ll;Ci.stringifyFunctionWithoutToplevelRecorder=Ll;Ci.es5Transpilation=yu;Ci.es5Transpilation=yu;var $da=Object.freeze({__proto__:null,
capturing:OD,stringifyFunctionWithoutToplevelRecorder:Ll,es5Transpilation:yu}),Ff=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-support.js");Ff.processInlineCodeTransformOptions=function(d,k){if(!d.comments)return k;d=d.comments.find(function(h){return h.text.startsWith("lively.vm ")});if(!d)return k;try{var e=eval("inlineOptions = {"+d.text.slice(10)+"};");return Object.assign(k,e)}catch(h){return k}};Ff.evalCodeTransform=mr;Ff.evalCodeTransformOfSystemRegisterSetters=Po;Ff.copyProperties=
function(d,k,e){e=void 0===e?[]:e;Object.getOwnPropertyNames(d).concat(Object.getOwnPropertySymbols(d)).forEach(function(h){return-1===e.indexOf(h)&&Object.defineProperty(k,h,Object.getOwnPropertyDescriptor(d,h))})};Ff.arr=Te;Ff.Path=Xg;Ff.parse=Bi;Ff.stringify=mg;Ff.transform=Py;Ff.query=Rr;Ff.nodes=cv;Ff.capturing=OD;Ff.es5Transpilation=yu;Ff.getGlobal=nm;var GI=Ff.nodes;Ff.id=GI.id;Ff.literal=GI.literal;Ff.member=GI.member;Ff.objectLiteral=GI.objectLiteral;Ff.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";
Ff.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Ff.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Ff.defaultClassToFunctionConverterName="initializeES6ClassForLively";Ff.defaultClassToFunctionConverterName="initializeES6ClassForLively";Ff.defaultClassToFunctionConverterName="initializeES6ClassForLively";Ff.evalCodeTransform=mr;Ff.evalCodeTransform=mr;Ff.evalCodeTransformOfSystemRegisterSetters=Po;Ff.evalCodeTransformOfSystemRegisterSetters=Po;var Uf=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval.js");
Uf._normalizeEvalOptions=function(d){d||(d={});d=Object.assign({targetModule:null,sourceURL:d.targetModule,runtime:null,context:Uf.getGlobal(),varRecorderName:Uf.defaultTopLevelVarRecorderName,dontTransform:[],recordGlobals:null,returnPromise:!0,promiseTimeout:200,waitForPromise:!0,wrapInStartEndCall:!1,onStartEval:null,onEndEval:null},d);if(d.targetModule){var k=d.runtime&&d.runtime.modules&&d.runtime.modules[d.targetModule];k&&(d=Object.assign(d,k))}d.wrapInStartEndCall&&(d.startFuncNode={type:"MemberExpression",
object:{type:"Identifier",name:d.varRecorderName},property:{type:"Literal",value:Uf.startEvalFunctionName},computed:!0},d.endFuncNode={type:"MemberExpression",object:{type:"Identifier",name:d.varRecorderName},property:{type:"Literal",value:Uf.endEvalFunctionName},computed:!0});return d};Uf.runEval=Ok;Uf.finishEval=function(d,k,e,h,n,b,c){h.wrapInStartEndCall&&(delete n[Uf.startEvalFunctionName],delete n[Uf.endEvalFunctionName]);d?(e.isError=!0,e.value=d):e.value=k;e.value instanceof Promise&&(e.isPromise=
!0);if(h.sync){if(e.processSync(h),"function"===typeof h.onEndEval)h.onEndEval(d,k)}else e.process(h).then(function(){"function"===typeof c&&c(null,e);"function"===typeof h.onEndEval&&h.onEndEval(d,k);return e},function(l){"function"===typeof c&&c(l,void 0);"function"===typeof h.onEndEval&&h.onEndEval(l,void 0);return e}).then(b.resolve,b.reject)};Uf.syncEval=Qo;Uf.tryToWaitForPromise=function(d,k){console.assert(d.isPromise,"no promise in tryToWaitForPromise???");var e={},h=new Promise(function(n){return setTimeout(n,
k,e)});return Promise.race([h,d.value]).then(function(n){return Object.assign(d,n!==e?{promiseStatus:"fulfilled",promisedValue:n}:{promiseStatus:"pending"})}).catch(function(n){return Object.assign(d,{promiseStatus:"rejected",promisedValue:n})})};Uf.arr=Te;Uf.obj=lf;Uf.string=Hg;Uf.Path=Xg;Uf.promise=Kf;Uf.Closure=zi;Uf.evalCodeTransform=mr;Uf.printEvalResult=jr;Uf.getGlobal=nm;Uf.defaultTopLevelVarRecorderName="__lvVarRecorder";Uf.startEvalFunctionName="lively.vm-on-eval-start";Uf.endEvalFunctionName=
"lively.vm-on-eval-end";Uf._eval=Uf.Closure.fromSource("function _eval(__lvEvalStatement, __lvVarRecorder/*needed as arg for capturing*/, __lvOriginalCode) {\n  return eval(__lvEvalStatement);\n}").getFunc();var RD=function(){this.isEvalResult=!0;this.value=void 0;this.warnings=[];this.isPromise=this.isError=!1;this.promisedValue=void 0;this.promiseStatus="unknown"};RD.prototype.addWarning=function(d){this.warnings.push(d);return d};RD.prototype.printed=function(d){d=void 0===d?{}:d;this.value=Uf.printEvalResult(this,
d)};RD.prototype.processSync=function(d){if(d.inspect||d.asString)this.value=this.print(this.value,d);return this};RD.prototype.process=function(d){var k=this;if(k.isPromise&&d.waitForPromise)return Uf.tryToWaitForPromise(k,d.promiseTimeout).then(function(){(d.inspect||d.asString)&&k.printed(d);return k});(d.inspect||d.asString)&&k.printed(d);return Promise.resolve(k)};Uf.EvalResult=RD;var iB=Uf.defaultTopLevelVarRecorderName;Uf.defaultTopLevelVarRecorderName=iB;Uf.defaultTopLevelVarRecorderName=
iB;Uf.getGlobal=nm;Uf.getGlobal=nm;Uf.runEval=Ok;Uf.runEval=Ok;Uf.syncEval=Qo;Uf.syncEval=Qo;var aea=Object.freeze({__proto__:null,defaultTopLevelVarRecorderName:iB,getGlobal:nm,runEval:Ok,syncEval:Qo}),ih=lively.FreezerRuntime.recorderFor("lively.vm/lib/esm-eval.js");ih.ensureImportsAreImported=function(d,k,e){var h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?(h=ih.parse(k),n=h.body,b=n.filter(function(l){return"ImportDeclaration"===l.type}),c.yield(Promise.all(b.map(function(l){return d.normalize(l.source.value,
e).then(function(a){l.source.value=a;return d.get(a)||d.import(a)})})).catch(function(l){console.error("Error ensuring imports: "+l.message);throw l;}),2)):c.return(ih.stringify(h))})};ih.hasUnimportedImports=function(d,k,e){k=ih.parse(k).body.filter(function(h){return"ImportDeclaration"===h.type});return 0<ih.arr.uniq(k.map(function(h){return h.source.value})).filter(Boolean).filter(function(h){return!d.get(d.decanonicalize(h,e))}).length};ih.babelTranspilerForAsyncAwaitCode=function(d,k,e,h){return function(n,
b){b=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:e,code:!0,ast:!1},b);n=k.transform("(async function(__rec) {\n"+n+"\n}).call(this);",b).code;return n=n.replace(/\}\)\.call\(undefined\);$/,"}).call(this)")}};ih.babelPluginTranspilerForAsyncAwaitCode=function(d,k,e,h){return function(n,b){var c=d.babelOptions||{},l=[];l.push(k.presetES2015);c.stage3&&l.push({plugins:k.pluginsStage3});c.stage2&&l.push({plugins:k.pluginsStage2});c.stage1&&l.push({plugins:k.pluginsStage1});b=Object.assign({sourceMap:void 0,
inputSourceMap:void 0,filename:e,babelrc:!1,presets:l,moduleIds:!1,code:!0,ast:!1},b);n=k.babel.transform("(async function(__rec) {\n"+n+"\n}).call(this);",b).code;return n=n.replace(/\}\)\.call\(undefined\);$/,"}).call(this)")}};ih.getEs6Transpiler=function(d,k,e){if(k.transpiler)return k.transpiler;if(!k.es6Transpile)return null;if("babel"===d.transpiler){var h=d.global[d.transpiler]||d.get(d.decanonicalize(d.transpiler));return h?ih.babelTranspilerForAsyncAwaitCode(d,h,k.targetModule,e):d.import(d.transpiler).then(function(c){return ih.babelTranspilerForAsyncAwaitCode(d,
c,k.targetModule,e)})}if("plugin-babel"===d.transpiler){h=d.decanonicalize("plugin-babel").split("/").slice(0,-1).concat("systemjs-babel-browser.js").join("/");var n=d.get(h);return n?ih.babelPluginTranspilerForAsyncAwaitCode(d,n,k.targetModule,e):d.import(h).then(function(c){return ih.babelPluginTranspilerForAsyncAwaitCode(d,c,k.targetModule,e)})}if("lively.transpiler"===d.transpiler){var b=new (d.get(d.decanonicalize("lively.transpiler")).default)(d,k.targetModule,e);return function(c,l){return b.transpileDoit(c,
l)}}throw Error("Sorry, currently only babel is supported as es6 transpiler for runEval!");};ih.runEval=Wj;ih.evalEnd=function(d,k,e,h){d.get("@lively-env").evaluationEnd(e.targetModule);d.debug&&console.log("[lively.module] runEval in module "+e.targetModule+" done");ih.emit("lively.vm/doitresult",{code:k,result:h,waitForPromise:e.waitForPromise,targetModule:e.targetModule},Date.now(),d);return h};ih.parse=Bi;ih.nodes=cv;ih.stringify=mg;ih.emit=Qm;var HI=ih.nodes;ih.funcCall=HI.funcCall;ih.member=
HI.member;ih.id=HI.id;ih.literal=HI.literal;ih.arr=Te;ih.vmRunEval=Ok;ih.runEval=Wj;ih.runEval=Wj;var bea=Object.freeze({__proto__:null,runEval:Wj}),Pi=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-strategies.js");Pi.obj=lf;var jB=function(){};jB.prototype.runEval=function(d,k){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(Promise.reject("runEval(source, options) not yet implemented for "+e.constructor.name))})};jB.prototype.keysOfObject=function(d,
k){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(Promise.reject("keysOfObject(prefix, options) not yet implemented for "+e.constructor.name))})};Pi.EvalStrategy=jB;var Sy=function(){return Pi.EvalStrategy.apply(this,arguments)||this};$jscomp.inherits(Sy,Pi.EvalStrategy);Sy.prototype.runEval=function(d,k){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(Promise.resolve().then(function(){try{return Promise.resolve({value:eval(d)})}catch(h){return{isError:!0,
value:h}}}))})};Sy.prototype.keysOfObject=function(d,k){var e=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(lively.vm.completions.getCompletions(function(b){return e.runEval(b,k)},d),2);h=n.yieldResult;return n.return({completions:h.completions,prefix:h.startLetters})})};Pi.SimpleEvalStrategy=Sy;var Kw=function(){return Pi.EvalStrategy.apply(this,arguments)||this};$jscomp.inherits(Kw,Pi.EvalStrategy);Kw.prototype.normalizeOptions=function(d){if(!d.targetModule)throw Error("runEval called but options.targetModule not specified!");
return Object.assign({sourceURL:d.targetModule+"_doit_"+Date.now()},d)};Kw.prototype.runEval=function(d,k){var e=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){k=e.normalizeOptions(k);h=k.System||lively.modules.System;n={};h.config({meta:(n[k.targetModule]={format:"esm"},n)});return b.return(lively.vm.runEval(d,k))})};Kw.prototype.keysOfObject=function(d,k){var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(lively.vm.completions.getCompletions(function(n){return lively.vm.runEval(n,
k)},d),2);e=h.yieldResult;return h.return({completions:e.completions,prefix:e.startLetters})})};Pi.LivelyVmEvalStrategy=Kw;var Lw=function(){return Pi.LivelyVmEvalStrategy.apply(this,arguments)||this};$jscomp.inherits(Lw,Pi.LivelyVmEvalStrategy);Lw.prototype.sourceForRemote=function(d,k,e){var h=Pi.obj.isString(e.context)?e.context:!1;e=Pi.obj.dissoc(e,["systemInterface","System","context","classTransform"]);return"\n(function() {\n  var arg = "+JSON.stringify(k)+",\n      options = "+JSON.stringify(e)+
';\n  if (typeof lively === "undefined" || !lively.vm) {\n    return Promise.resolve({\n      isEvalResult: true,\n      isError: true,\n      value: \'lively.vm not available!\'\n    });\n  }\n  var hasSystem = typeof System !== "undefined"\n  options.context = '+h+';\n  options.classTransform = lively.classes.classToFunctionTransform;\n  if (!options.context) {\n    options.context = hasSystem\n      ? System.global\n      : typeof window !== "undefined"\n          ? window\n          : typeof global !== "undefined"\n              ? global\n              : typeof self !== "undefined" ? self : this;\n  }\n  async function evalFunction(source, options) {\n    if (hasSystem) {\n      var conf = {meta: {}}; conf.meta[options.targetModule] = {format: "esm"};\n      System.config(conf);\n    } else {\n      options = Object.assign({topLevelVarRecorderName: "GLOBAL"}, options);\n      delete options.targetModule;\n    }\n    let res = await lively.vm.runEval(source, options);\n    try {\n       JSON.stringify(res.value);\n    } catch(e) {\n       res.value = String(res.value);\n    }\n    return res;\n  }\n  function keysOfObjectFunction(prefix, options) {\n    return lively.vm.completions.getCompletions(code => evalFunction(code, options), prefix)\n      .then(result => ({isEvalResult: true, completions: result.completions, prefix: result.startLetters}));\n  }\n  return '+
("eval"===d?"evalFunction":"keysOfObjectFunction")+"(arg, options)\n    .catch(err => ({isEvalResult: true, isError: true, value: String(err.stack || err)}));\n})();\n"};Lw.prototype.runEval=function(d,k){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(e.remoteEval(e.sourceForRemote("eval",d,k),k))})};Lw.prototype.keysOfObject=function(d,k){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(e.remoteEval(e.sourceForRemote("keysOfObject",
d,k),k))})};Lw.prototype.remoteEval=function(d,k){var e=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.setCatchFinallyBlocks(2),b.yield(e.basicRemoteEval(d,k),4);if(2!=b.nextAddress)return h=b.yieldResult,b.return("string"===typeof h?JSON.parse(h):h);n=b.enterCatchBlock();return b.return({isError:!0,value:"Remote eval failed: "+(h||n)})})};Lw.prototype.basicRemoteEval=function(d,k){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){throw Error("Not yet implemented");
})};Pi.RemoteEvalStrategy=Lw;var wt=function(d){var k=Pi.RemoteEvalStrategy.call(this)||this;k.url=d||k.constructor.defaultURL;return k};$jscomp.inherits(wt,Pi.RemoteEvalStrategy);wt.prototype.normalizeOptions=function(d){d=Pi.RemoteEvalStrategy.prototype.normalizeOptions.call(this,d);return Object.assign({serverEvalURL:this.url},d,{context:null})};wt.prototype.basicRemoteEval=function(d,k){var e=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(k=e.normalizeOptions(k),
h="basicRemoteEval_"+(System.get("@system-env").node?"node":"web"),n.yield(e[h]({method:"POST",body:d},k.serverEvalURL),2)):n.return(n.yieldResult)})};wt.prototype.basicRemoteEval_web=function(d,k){var e,h,n,b,c,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:e=$jscomp.makeIterator(k.match(/[^:]+:\/\/[^\/]+/)||[k]);h=e.next().value;n=System.get("@system-env").worker?window.location:document.location;if(b=n.origin!==h)d.headers=Object.assign({},d.headers,
{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":k}),k=n.origin;a.setCatchFinallyBlocks(2);return a.yield(window.fetch(k,d),4);case 4:c=a.yieldResult;a.leaveTryBlock(3);break;case 2:throw l=a.enterCatchBlock(),Error("Cannot reach server at "+k+": "+l.message);case 3:if(!c.ok)throw Error("Server at "+k+": "+c.statusText);return a.return(c.text())}})};wt.prototype.basicRemoteEval_node=function(d,k){var e,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){e=System._nodeRequire("url").parse;
h=System._nodeRequire(k.startsWith("https:")?"https":"http");n=Object.assign({method:d.method||"GET"},e(k));return b.return(new Promise(function(c,l){var a=h.request(n,function(f){f.setEncoding("utf8");var m="";f.on("data",function(q){return m+=q});f.on("end",function(){return c(m)});f.on("error",function(q){return l(q)})});a.on("error",function(f){return l(f)});a.end(d.body)}))})};$jscomp.global.Object.defineProperties(wt,{defaultURL:{configurable:!0,enumerable:!0,get:function(){return"http://localhost:3000/lively"}}});
Pi.HttpEvalStrategy=wt;var kB=function(d,k){var e=Pi.RemoteEvalStrategy.call(this)||this;e.l2lClient=d;e.targetId=k;return e};$jscomp.inherits(kB,Pi.RemoteEvalStrategy);kB.prototype.basicRemoteEval=function(d,k){var e=this,h,n,b,c,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return h=e,n=h.l2lClient,b=h.targetId,a.yield(n.sendToAndWait(b,"remote-eval",{source:d},{ackTimeout:k.ackTimeout||3500}),2);c=a.yieldResult;(l=c.data)&&l.value&&l.value.isEvalResult&&(l=
l.value);return a.return(l)})};Pi.L2LEvalStrategy=kB;Pi.EvalStrategy=jB;Pi.EvalStrategy=jB;Pi.SimpleEvalStrategy=Sy;Pi.SimpleEvalStrategy=Sy;Pi.LivelyVmEvalStrategy=Kw;Pi.LivelyVmEvalStrategy=Kw;Pi.HttpEvalStrategy=wt;Pi.HttpEvalStrategy=wt;Pi.L2LEvalStrategy=kB;Pi.L2LEvalStrategy=kB;var SD=Object.freeze({__proto__:null,RemoteEvalStrategy:Lw,EvalStrategy:jB,SimpleEvalStrategy:Sy,LivelyVmEvalStrategy:Kw,HttpEvalStrategy:wt,L2LEvalStrategy:kB});ya("bz",SD);var Cj=lively.FreezerRuntime.recorderFor("lively.vm/index.js");
Cj.runEval=Ro;Cj.syncEval=Rm;Cj.completions=ND;Cj.completions=ND;Cj.completions=ND;Cj.globalEval=aea;Cj.esmEval=bea;Cj.defaultTopLevelVarRecorderName=iB;Cj.defaultTopLevelVarRecorderName=iB;Cj.defaultClassToFunctionConverterName="initializeES6ClassForLively";Cj.defaultClassToFunctionConverterName="initializeES6ClassForLively";Cj.evalCodeTransform=mr;Cj.evalCodeTransform=mr;Cj.evalCodeTransformOfSystemRegisterSetters=Po;Cj.evalCodeTransformOfSystemRegisterSetters=Po;Cj.runEval=Ro;Cj.runEval=Ro;Cj.syncEval=
Rm;Cj.syncEval=Rm;Cj.evalStrategies=SD;Cj.evalStrategies=SD;Cj.evalStrategies=SD;var a1=Object.freeze({__proto__:null,completions:ND,defaultTopLevelVarRecorderName:iB,defaultClassToFunctionConverterName:"initializeES6ClassForLively",evalCodeTransform:mr,evalCodeTransformOfSystemRegisterSetters:Po,runEval:Ro,syncEval:Rm,evalStrategies:SD});ya("by",a1);var Jh=lively.FreezerRuntime.recorderFor("lively.classes/source-descriptors.js");Jh.string=Hg;Jh.arr=Te;Jh.parse=Bi;Jh.query=Rr;Jh.runEval=Ro;Jh.objMetaSym=
Symbol.for("lively-object-meta");Jh.moduleSym=Symbol.for("lively-module-meta");Jh.descriptorCache=new Map;var lB=function(d,k){d&&k?this.update(k,d):this.reset()};lB.prototype.reset=function(){this._sourceLocation=null;this._source="";this._ast=null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};lB.prototype.update=function(d,k){this._moduleSource===d&&k&&this._sourceLocation&&k.start===this._sourceLocation.start&&k.end===this._sourceLocation.end||
(this.reset(),this._moduleSource=d,this._sourceLocation=k)};lB.prototype.changeSource=function(d){var k=this.moduleSource,e=this.sourceLocation,h=e.start;e=e.end;k=k.slice(0,h)+d+k.slice(e);this.update(k,{start:h,end:h+d.length});this._source=d;return this};lB.prototype.toString=function(){var d=Jh.string.truncate(this._source||"NO SOURCE",35).replace(/\n/g,"");return this.constructor.name+"("+d+")"};$jscomp.global.Object.defineProperties(lB.prototype,{sourceLocation:{configurable:!0,enumerable:!0,
get:function(){if(!this._sourceLocation)throw Error("_sourceLocation not defined");return this._sourceLocation}},moduleSource:{configurable:!0,enumerable:!0,get:function(){if(!this._moduleSource)throw Error("_moduleSource not defined!");return this._moduleSource}},moduleAst:{configurable:!0,enumerable:!0,get:function(){return this._moduleAst||(this._moduleAst=Jh.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){return this._moduleScope||(this._moduleScope=
Jh.query.topLevelDeclsAndRefs(this.ast).scope)}},moduleImports:{configurable:!0,enumerable:!0,get:function(){return this._moduleImports||(this._moduleImports=Jh.query.imports(this.moduleScope))}},ast:{configurable:!0,enumerable:!0,get:function(){if(this._ast)return this._ast;var d=Jh.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===d.type&&(d=d.expression);return this._ast=d}},source:{configurable:!0,enumerable:!0,get:function(){if(this._source)return this._source;var d=this.sourceLocation;
return this._source=this.moduleSource.slice(d.start,d.end)}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var d=this.ast,k=Jh.query.topLevelDeclsAndRefs(this.moduleAst).declaredNames,e=Jh.arr.uniq(this.moduleImports.map(function(n){return n.local})),h=Jh.arr.withoutAll(k,e);d=Jh.arr.withoutAll(Jh.query.findGlobalVarRefs(d).map(function(n){return n.name}),
k);return this._declaredAndUndeclaredNames={declaredNames:k,declaredImports:e,localDeclaredNames:h,undeclaredNames:d}}}});Jh.SourceDescriptor=lB;var to=function(d,k){this.obj=d;this.System=k;this.reset()};to.forObjectWithModuleSource=function(d,k,e){d=this.for(d,e);d.ensureSourceDescriptor(d.sourceLocation,k);return d};to.for=function(d,k){var e=Jh.descriptorCache.get(d);e||(e=new this(d,k),Jh.descriptorCache.set(d,e));return e};to.prototype.reset=function(){this._source="";this._ast=this._sourceLocation=
null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};to.prototype.resetIfChanged=function(){var d=this.meta.moduleSource;this._moduleSource&&d&&this._moduleSource!==d&&this.reset()};to.prototype.changeSourceSync=function(d){var k=this.System;this._basicChangeSource(d);this.module.changeSource(this.moduleSource,{doSave:!0});d=Jh.runEval(d,{sync:!0,targetModule:this.module.id,System:k});if(d.isError)throw d.value;return this};to.prototype.changeSource=
function(d){var k=this,e,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(e=k,h=e.module,n.yield(h.changeSourceAction(function(b){if(b!==k.moduleSource)throw Error("source of module "+h.id+" and source of "+k+" don't match");k._basicChangeSource(d);return k.moduleSource}),2)):n.return(k)})};to.prototype._modifiedSource=function(d){var k=this.moduleSource,e=this.sourceLocation,h=e.start;e=e.end;return{moduleSource:k.slice(0,h)+d+k.slice(e),sourceLocation:{start:h,
end:h+d.length}}};to.prototype._renamedSource=function(d){var k=this.ast,e=k.type,h=k.id;k=h.start;h=h.end;if("ClassDeclaration"!==e)throw Error("Don't know how to rename "+e);return this._modifiedSource(this.source.slice(0,k)+d+this.source.slice(h))};to.prototype._basicChangeSource=function(d){var k=this.meta,e=this._modifiedSource(d),h=e.moduleSource;e=e.sourceLocation;this.reset();this.meta=Object.assign({},k,{moduleSource:h},e);this._sourceLocation=e;this._moduleSource=h;this._source=d;return this};
to.prototype.toString=function(){var d=Jh.string.truncate(this.source||String(this.obj),35).replace(/\n/g,"");try{var k=this.module.shortName()}catch(e){k="NO MODULE!"}return this.constructor.name+"("+d+" in "+k+")"};$jscomp.global.Object.defineProperties(to.prototype,{System:{configurable:!0,enumerable:!0,get:function(){return this._System||System},set:function(d){this._System=d}},module:{configurable:!0,enumerable:!0,get:function(){var d=this.obj,k=this.System;if(!d[Jh.moduleSym])throw Error("runtime object of source descriptor has no module data");
var e=d[Jh.moduleSym];d=e.package.name;e=e.pathInPackage;d=e.includes("://")?e:d+"/"+e;k=this.System._scripting.module(k,d);k._frozenModule||k._source||!this.moduleSource||k.setSource(this.moduleSource);return k}},meta:{configurable:!0,enumerable:!0,get:function(){var d=this.obj;if(!d[Jh.objMetaSym])throw Error("runtime object of source descriptor has no lively meta data");return d[Jh.objMetaSym]},set:function(d){this.obj[Jh.objMetaSym]=d;d.hasOwnProperty("start")&&d.hasOwnProperty("end")&&(this._sourceLocation=
{start:d.start,end:d.end});d.hasOwnProperty("moduleSource")&&(this._moduleSource=d.moduleSource)}},sourceLocation:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._sourceLocation)return this._sourceLocation;var d=this.meta,k=d.start;d=d.end;if(void 0===k||void 0===d)throw Error("lively meta data has no start/end");return this._sourceLocation={start:k,end:d}}},moduleSource:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._moduleSource)return this._moduleSource;
var d=this.meta.moduleSource;if(void 0===d)throw Error("lively meta data has no moduleSource");return this._moduleSource=d}},moduleAst:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleAst||(this._moduleAst=Jh.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleScope||(this._moduleScope=Jh.query.topLevelDeclsAndRefs(this.moduleAst).scope)}},moduleImports:{configurable:!0,
enumerable:!0,get:function(){this.resetIfChanged();return this._moduleImports||(this._moduleImports=Jh.query.imports(this.moduleScope))}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var d=this.ast,k=Jh.query.topLevelDeclsAndRefs(this.moduleAst,{jslintGlobalComment:!0}).declaredNames,e=Jh.arr.uniq(this.moduleImports.map(function(n){return n.local})),h=Jh.arr.withoutAll(k,e);
d=Jh.arr.withoutAll(Jh.query.findGlobalVarRefs(d).map(function(n){return n.name}),k);return this._declaredAndUndeclaredNames={declaredNames:k,declaredImports:e,localDeclaredNames:h,undeclaredNames:d}}},source:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._source)return this._source;var d=this.sourceLocation;return this._source=this.moduleSource.slice(d.start,d.end)}},ast:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._ast)return this._ast;
var d=Jh.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===d.type&&(d=d.expression);return this._ast=d}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},name:{configurable:!0,enumerable:!0,get:function(){if("ClassDeclaration"===this.type){var d=this.ast.id;return this.source.slice(d.start,d.end)}return"unknown"}}});ya("bI",to);Jh.RuntimeSourceDescriptor=to;var te=lively.FreezerRuntime.recorderFor("lively.classes/util.js");te.superclasses=Rz;te.getClassHierarchy=
Rp;te.withSuperclasses=zu;te.inheritsFrom=or;te.changeClass=pr;te.isClass=Au;te.isOverridden=function(d,k){for(;d!=Object;)if(d=d[Symbol.for("lively-instance-superclass")],d.prototype.hasOwnProperty(k))return!0;return!1};te.lexicalClassMembers=Pv;te.runtimeClassMembers=Is;te.runtimeClassMembersInProtoChain=function(d){return te.arr.uniq(te.arr.flatmap(te.arr.without(te.withSuperclasses(d),Object),function(k){return te.runtimeClassMembers(k)}))};te.runtimeNonStaticMembers=function(d){var k=d.prototype,
e=te.obj.getOwnPropertyDescriptors(k);return te.arr.withoutAll(Object.keys(e),["constructor"]).map(function(h){var n=e[h],b="function"===typeof n.value?"method":"get"in n?"get":"set"in n?"set":"unknown";return{static:!1,name:h,value:"method"===b?n.value:"get"===b?n.get:"set"===b?n.set:null,kind:b,owner:k}})};te.runtimeNonstaticClassMembersInProtoChain=function(d){return te.arr.uniq(te.arr.flatmap(te.arr.without(te.withSuperclasses(d),Object),function(k){return te.runtimeNonStaticMembers(k)}))};te.runtimeStaticClassMembers=
Qv;te.runtimeStaticClassMembersInProtoChain=Js;te.arr=Te;te.obj=lf;te.Path=Xg;te.RuntimeSourceDescriptor=to;te.superclasses=Rz;te.superclasses=Rz;var II=Symbol.for("lively-instance-initialize");te.initializeSymbol=II;te.initializeSymbol=II;te.initializeSymbol=II;var yP=Symbol.for("lively-instance-restorer");te.instanceRestorerSymbol=yP;te.instanceRestorerSymbol=yP;te.instanceRestorerSymbol=yP;var JI=Symbol.for("lively-instance-superclass");te.superclassSymbol=JI;te.superclassSymbol=JI;te.superclassSymbol=
JI;var KI=Symbol.for("lively-module-meta");te.moduleMetaSymbol=KI;te.moduleMetaSymbol=KI;te.moduleMetaSymbol=KI;var LI=Symbol.for("lively-object-meta");te.objMetaSymbol=LI;te.objMetaSymbol=LI;te.objMetaSymbol=LI;var MI=Symbol.for("lively-klass-changes-subscriber");te.moduleSubscribeToToplevelChangesSym=MI;te.moduleSubscribeToToplevelChangesSym=MI;te.moduleSubscribeToToplevelChangesSym=MI;te.getClassHierarchy=Rp;te.getClassHierarchy=Rp;te.withSuperclasses=zu;te.withSuperclasses=zu;te.inheritsFrom=
or;te.inheritsFrom=or;te.changeClass=pr;te.changeClass=pr;te.isClass=Au;te.isClass=Au;te.lexicalClassMembers=Pv;te.lexicalClassMembers=Pv;te.runtimeClassMembers=Is;te.runtimeClassMembers=Is;te.runtimeStaticClassMembers=Qv;te.runtimeStaticClassMembers=Qv;te.runtimeStaticClassMembersInProtoChain=Js;te.runtimeStaticClassMembersInProtoChain=Js;var zP=ya("bJ",function(){function d(c){return c.replace(b,function(l,a){return a[a.length-1].toUpperCase()})}var k="break case catch class const continue debugger default delete do else enum export extends false finally for function if implements import in instanceof interface let new null package private protected public return static switch super this throw true try typeof undefined var void while with yield".split(" "),
e={"~":"_tilde_","`":"_backtick_","!":"_exclamationmark_","@":"_at_","#":"_pound_","%":"_percent_","^":"_carat_","&":"_amperstand_","*":"_asterisk_","(":"_leftparen_",")":"_rightparen_","+":"_plus_","=":"_equals_","{":"_leftcurly_","}":"_rightcurly_","[":"_leftsquare_","]":"_rightsquare_","|":"_pipe_","-":"_dash_","\\":"_backslash_",'"':"_doublequote_","'":"_singlequote_",":":"_colon_",";":"_semicolon_","<":"_leftangle_",">":"_rightangle_",",":"_comma_",".":"_period_","?":"_questionmark_","/":"_forwardslash_",
"\t":"_tab_","\n":"_newline_","\r":"_carriagereturn_"},h={0:"_zero_",1:"_one_",2:"_two_",3:"_three_",4:"_four_",5:"_five_",6:"_siz_",7:"_seven_",8:"_eight_",9:"_nine_"},n=function(c){return e[c]||"ASCII_"+c.charCodeAt(0)},b=/([\s-]+.)/g;return function(c){c=d(c);return 0<=k.indexOf(c)?c:0===c.length?"_null_":c.replace(/^\d/,function(l){return h[l]}).replace(/[^\w\$_]/g,n)}}());te.toJsIdentifier=zP;te.toJsIdentifier=zP;te.toJsIdentifier=zP;var Mh=lively.FreezerRuntime.recorderFor("lively.classes/properties.js");
Mh.hasManagedProperties=function(d){return d.hasOwnProperty(Mh.defaultPropertiesKey)};Mh.prepareClassForManagedPropertiesAfterCreation=Bu;Mh.prepareClassForProperties=function(d,k,e){Mh.ensurePropertyInitializer(d);var h=k.valueStoreProperty,n=k.defaultGetter,b=k.defaultSetter,c=d.prototype;Object.keys(e).forEach(function(l){var a=e[l],f=c.hasOwnProperty(l)&&c.__lookupGetter__(l);if(!f||f._wasGenerated)f=a.get||"function"===typeof n&&function(){return n.call(this,l)}||function(){return this[h][l]},
f._wasGenerated=!0,c.__defineGetter__(l,f);f=c.hasOwnProperty(l)&&c.__lookupSetter__(l);if(!f||f._wasGenerated)if(a.hasOwnProperty("set")||!a.readOnly)a=a.set||"function"===typeof b&&function(m){b.call(this,l,m)}||function(m){this[h][l]=m},a._wasGenerated=!0,c.__defineSetter__(l,a)})};Mh.ensurePropertyInitializer=function(d){Object.defineProperty(d.prototype,"propertiesAndPropertySettings",{enumerable:!1,configurable:!0,writable:!0,value:function(){var k=this.constructor,e=k[Mh.propertiesAndSettingsCacheSym];
if(e)if(e.classHierarchy!=Mh.getClassHierarchy(k)){var h=Mh.propertiesAndSettingsInHierarchyOf(k);e=h.properties;h=h.propertySettings;k[Mh.propertiesAndSettingsCacheSym]={properties:e,propertySettings:h,order:Mh.obj.sortKeysWithBeforeAndAfterConstraints(e),classHierarchy:Mh.getClassHierarchy(k)};Mh.prepareClassForProperties(k,h,e)}else return e;return k[Mh.propertiesAndSettingsCacheSym]||Mh.propertiesAndSettingsInHierarchyOf(k)}});Object.defineProperty(d.prototype,"initializeProperties",{enumerable:!1,
configurable:!0,writable:!0,value:function(k){var e=this.propertiesAndPropertySettings();Mh.prepareInstanceForProperties(this,e.propertySettings,e.properties,k,e.order);return this}})};Mh.propertiesAndSettingsInHierarchyOf=function(d){for(var k=Object.assign({},Mh.defaultPropertySettings),e={},h=Mh.obj.valuesInPropertyHierarchy(d,"propertySettings"),n=Mh.obj.valuesInPropertyHierarchy(d,"properties"),b=0;b<h.length;b++){var c=h[b];c&&"object"===typeof c&&Object.assign(k,c)}for(b=0;b<n.length;b++)if(h=
n[b],"object"!==typeof h)console.error("[initializeProperties] "+d+" encountered property declaration that is not a JS object: "+h);else for(var l in h)e.hasOwnProperty(l)?Object.assign(e[l],h[l]):e[l]=h[l];return{properties:e,propertySettings:k}};Mh.prepareInstanceForProperties=function(d,k,e,h,n){var b=k.valueStoreProperty;n=n||Mh.obj.sortKeysWithBeforeAndAfterConstraints(e);k=[];var c={};d.hasOwnProperty(b)||(d[b]={});for(var l=0;l<n.length;l++){var a=n[l],f=e[a],m=f.derived,q=!!f.foldable,r=f.hasOwnProperty("defaultValue")?
f.defaultValue:void 0;Array.isArray(r)&&(r=r.slice());m||q||(d[b][a]=r);var u=void 0;f.hasOwnProperty("initialize")?(u=c[a]={initialize:r},k.push(a)):m&&void 0!==r?(u=c[a]={derived:r},k.push(a)):q&&void 0!==r&&(u=c[a]={folded:r},k.push(a));h&&a in h&&(f.readOnly?console.warn("Trying to initialize read-only property "+a+" in "+d+", skipping setting value"):(u||(u=c[a]={},k.push(a)),u.value=h[a]))}for(l=0;l<k.length;l++)h=k[l],n=c[h],b=n.hasOwnProperty("value"),n.hasOwnProperty("initialize")?(e[h].initialize.call(d,
b?n.value:n.initialize),b&&(d[h]=n.value)):n.hasOwnProperty("derived")?d[h]=b?n.value:n.derived:n.hasOwnProperty("folded")?d[h]=b?n.value:n.folded:b&&(d[h]=n.value)};Mh.obj=lf;Mh.getClassHierarchy=Rp;Mh.defaultPropertiesSettingKey="propertySettings";Mh.defaultPropertiesKey="properties";Mh.defaultInstanceInitializerMethod="initializeProperties";Mh.propertiesAndSettingsCacheSym=Symbol.for("lively.classes-properties-and-settings");Mh.defaultPropertySettings={defaultSetter:null,defaultGetter:null,valueStoreProperty:"_state"};
Mh.prepareClassForManagedPropertiesAfterCreation=Bu;Mh.prepareClassForManagedPropertiesAfterCreation=Bu;var df=lively.FreezerRuntime.recorderFor("lively.classes/runtime.js");df.adoptObject=qr;df.setSuperclass=Ks;df.installValueDescriptor=function(d,k,e){e=Object.assign(e,df.defaultPropertyDescriptorForValue);e.value.displayName=e.key;if(e.needsDeclaringClass){var h=e.value.originalFunction||e.value;e.value=Object.assign(function(){return h.call.apply(h,[this,k].concat($jscomp.arrayFromIterable(arguments)))},
{originalFunction:h,toString:function(){return h.toString()},displayName:e.key})}Object.defineProperty(d,e.key,e)};df.installGetterSetterDescriptor=function(d,k){k=Object.assign(k,df.defaultPropertyDescriptorForGetterSetter);Object.defineProperty(d,k.key,k)};df.installMethods=function(d,k,e){e&&e.forEach(function(c){c.value?df.installValueDescriptor(d,d,c):df.installGetterSetterDescriptor(d,c)});k&&k.forEach(function(c){c.value?df.installValueDescriptor(d.prototype,d,c):df.installGetterSetterDescriptor(d.prototype,
c)});d.prototype[df.initializeSymbol]?Object.getOwnPropertySymbols(d.prototype).includes(df.initializeSymbol)&&d.prototype[df.initializeSymbol].isDefaultInitializer&&d[df.superclassSymbol].prototype[df.initializeSymbol]&&delete d.prototype[df.initializeSymbol]:(Object.defineProperty(d.prototype,df.initializeSymbol,{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),d.prototype[df.initializeSymbol].isDefaultInitializer=!0,d.prototype[df.initializeSymbol].displayName="lively-initialize");
k=k.map(function(c){return c.key}).concat(["constructor","arguments","caller"]);for(var h=Object.getOwnPropertyNames(d.prototype),n=0;n<h.length;n++){var b=h[n];k.includes(b)||delete d.prototype[b]}e=e.map(function(c){return c.key}).concat(["length","name","prototype","arguments","caller"]);k=Object.getOwnPropertyNames(d);for(h=0;h<k.length;h++)n=k[h],e.includes(n)||delete d[n]};df.ensureInitializeStub=function(d){d===Object||d.prototype[df.initializeSymbol]||(Object.defineProperty(d.prototype,df.initializeSymbol,
{enumerable:!1,configurable:!0,writable:!0,value:function(){d.apply(this,arguments)}}),d.prototype[df.initializeSymbol].displayName="lively-initialize-stub")};df.initializeClass=Nb;df.prepareClassForManagedPropertiesAfterCreation=Bu;df.superclassSymbol=JI;df.moduleSubscribeToToplevelChangesSym=MI;df.moduleMetaSymbol=KI;df.objMetaSymbol=LI;df.initializeSymbol=II;df.constructorArgMatcher=/\([^\\)]*\)/;df.defaultPropertyDescriptorForGetterSetter={enumerable:!1,configurable:!0};df.defaultPropertyDescriptorForValue=
{enumerable:!1,configurable:!0,writable:!0};var NI="function"===typeof Object.setPrototypeOf?function(d,k){return Object.setPrototypeOf(d,k)}:function(d,k){return d.__proto__=k};df.setPrototypeOf=NI;df.setPrototypeOf=NI;df.setPrototypeOf=NI;df.adoptObject=qr;df.adoptObject=qr;df.setSuperclass=Ks;df.setSuperclass=Ks;df.initializeClass=Nb;df.initializeClass=Nb;df.initializeClass._get=function n(k,e,h){null===k&&(k=Function.prototype);var b=Object.getOwnPropertyDescriptor(k,e);if(void 0===b)return k=
Object.getPrototypeOf(k),null===k?void 0:n(k,e,h);if("value"in b)return b.value;e=b.get;return void 0===e?void 0:e.call(h)};df.initializeClass._set=function c(e,h,n,b){var l=Object.getOwnPropertyDescriptor(e,h);void 0===l?(e=Object.getPrototypeOf(e),null!==e&&c(e,h,n,b)):"value"in l&&l.writable?l.value=n:(h=l.set,void 0!==h&&h.call(b,n));return n};var mB=Object.freeze({__proto__:null,setPrototypeOf:NI,adoptObject:qr,setSuperclass:Ks,initializeClass:Nb}),$c=lively.FreezerRuntime.recorderFor("lively.graphics/color-parser.js");
$c.parse=Ce;$c.Color=function(e){this._listeners={};this.subscribe($c.Events.RGB_UPDATED,this._RGBUpdated);this.subscribe($c.Events.HEX_UPDATED,this._HEXUpdated);this.subscribe($c.Events.HSL_UPDATED,this._HSLUpdated);this.subscribe($c.Events.HSV_UPDATED,this._HSVUpdated);this.subscribe($c.Events.INT_UPDATED,this._INTUpdated);this.parse(e)};$c.parse=Ce;$c.parse=Ce;$c.Events={RGB_UPDATED:"RGBUpdated",HSL_UPDATED:"HSLUpdated",HSV_UPDATED:"HSVUpdated",HEX_UPDATED:"HexUpdated",INT_UPDATED:"IntUpdated",
UPDATED:"updated"};$c.namedColors={transparent:"rgba(0, 0, 0, 0)",aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",
darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",
fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",
lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370D8",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",
mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",
sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE"};$c.absround=function(e){return.5+e<<0};$c.hue2rgb=function(e,h,n){0>n&&(n+=1);1<n&&--n;return n<1/6?e+6*(h-e)*n:.5>n?h:n<2/3?e+(h-e)*(2/3-n)*6:e};$c.p2v=function(e){return $c.isPercent.test(e)?
$c.absround(2.55*parseInt(e)):e};$c.isHex=/^#?([0-9a-f]{3}|[0-9a-f]{6})$/i;$c.isHSL=/^hsla?\((\d{1,3}?),\s*(\d{1,3}%),\s*(\d{1,3}%)(,\s*[01]?\.?\d*)?\)$/;$c.isRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*[01]?\.?\d*)?\)$/;$c.isPercent=/^\d+(\.\d+)*%$/;$c.hexBit=/([0-9a-f])/gi;$c.leadHex=/^#/;$c.matchHSL=/^hsla?\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%(,\s*([01]?\.?\d*))?\)$/;$c.matchRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*([01]?\.?\d*))?\)$/;$c.Color.prototype._decimal=
0;$c.Color.prototype._hex="#000000";$c.Color.prototype._red=0;$c.Color.prototype._green=0;$c.Color.prototype._blue=0;$c.Color.prototype._hue=0;$c.Color.prototype._saturation=0;$c.Color.prototype._lightness=0;$c.Color.prototype._brightness=0;$c.Color.prototype._alpha=1;$c.Color.prototype.parse=function(e){if("undefined"==typeof e)return this;switch(!0){case isFinite(e):this.decimal(e);this.output=$c.Color.INT;break;case e instanceof $c.Color:this.copy(e);break;default:switch(typeof e){case "object":this.set(e);
break;case "string":switch(!0){case $c.namedColors.hasOwnProperty(e):e=$c.namedColors[e];e=e.replace($c.leadHex,"");this.decimal(parseInt(e,16));break;case $c.isHex.test(e):e=e.replace($c.leadHex,"");3==e.length&&(e=e.replace($c.hexBit,"$1$1"));this.decimal(parseInt(e,16));break;case $c.isRGB.test(e):e=e.match($c.matchRGB);this.red($c.p2v(e[1]));this.green($c.p2v(e[2]));this.blue($c.p2v(e[3]));this.alpha(parseFloat(e[5])||1);this.output=($c.isPercent.test(e[1])?2:1)+(e[5]?2:0);break;case $c.isHSL.test(e):e=
e.match($c.matchHSL),this.hue(parseInt(e[1])),this.saturation(parseInt(e[2])),this.lightness(parseInt(e[3])),this.alpha(parseFloat(e[5])||1),this.output=e[5]?6:5}}}return this};$c.Color.prototype.clone=function(){return new $c.Color(this.decimal())};$c.Color.prototype.copy=function(e){this.set(e.decimal());return this};$c.Color.prototype.set=function(e,h){if(1==arguments.length)if("object"==typeof e)for(var n in e){if("function"==typeof this[n])this[n](e[n])}else isFinite(e)&&this.decimal(e);else if("function"==
typeof this[e])this[e](h);return this};$c.Color.prototype.interpolate=function(e,h){e instanceof $c.Color||(e=new $c.Color(e));this._red=$c.absround(+this._red+(e._red-this._red)*h);this._green=$c.absround(+this._green+(e._green-this._green)*h);this._blue=$c.absround(+this._blue+(e._blue-this._blue)*h);this._alpha=$c.absround(+this._alpha+(e._alpha-this._alpha)*h);this.broadcast($c.Events.RGB_UPDATED);this.broadcast($c.Events.UPDATED);return this};$c.Color.prototype._RGB2HSL=function(){var e=this._red/
255,h=this._green/255,n=this._blue/255,b=Math.max(e,h,n),c=Math.min(e,h,n),l=(b+c)/2;if(b==c)this._saturation=this._hue=0;else{var a=b-c;c=a/(.5>=l?b+c:2-b-c);this._hue=$c.absround((b==e?(h-n)/a+(h<n?6:0):b==h?(n-e)/a+2:(e-h)/a+4)/6*360);this._saturation=$c.absround(100*c)}this._lightness=$c.absround(100*l);this._brightness=$c.absround(100*b)};$c.Color.prototype._HSL2RGB=function(){var e=this._hue/360,h=this._saturation/100,n=this._lightness/100;h=.5>n?n*(1+h):n+h-n*h;n=2*n-h;this._red=$c.absround(255*
$c.hue2rgb(n,h,e+1/3));this._green=$c.absround(255*$c.hue2rgb(n,h,e));this._blue=$c.absround(255*$c.hue2rgb(n,h,e-1/3))};$c.Color.prototype._HSV2RGB=function(){var e=this._hue/360,h=this._saturation/100,n=this._brightness/100,b=0,c=0,l=0,a=Math.floor(6*e),f=6*e-a;e=n*(1-h);var m=n*(1-f*h);h=n*(1-(1-f)*h);switch(a%6){case 0:b=n;c=h;l=e;break;case 1:b=m;c=n;l=e;break;case 2:b=e;c=n;l=h;break;case 3:b=e;c=m;l=n;break;case 4:b=h;c=e;l=n;break;case 5:b=n,c=e,l=m}this._red=$c.absround(255*b);this._green=
$c.absround(255*c);this._blue=$c.absround(255*l)};$c.Color.prototype._INT2HEX=function(){var e=this._decimal.toString(16);e="000000".substr(0,6-e.length)+e;this._hex="#"+e.toUpperCase()};$c.Color.prototype._INT2RGB=function(){this._red=this._decimal>>16;this._green=this._decimal>>8&255;this._blue=this._decimal&255};$c.Color.prototype._HEX2INT=function(){this._decimal=parseInt(this._hex,16)};$c.Color.prototype._RGB2INT=function(){this._decimal=this._red<<16|this._green<<8&65535|this._blue};$c.Color.prototype._RGBUpdated=
function(){this._RGB2INT();this._RGB2HSL();this._INT2HEX()};$c.Color.prototype._HSLUpdated=function(){this._HSL2RGB();this._RGB2INT();this._INT2HEX()};$c.Color.prototype._HSVUpdated=function(){this._HSV2RGB();this._RGB2INT();this._INT2HEX()};$c.Color.prototype._HEXUpdated=function(){this._HEX2INT();this._INT2RGB();this._RGB2HSL()};$c.Color.prototype._INTUpdated=function(){this._INT2RGB();this._RGB2HSL();this._INT2HEX()};$c.Color.prototype._broadcastUpdate=function(){this.broadcast($c.Events.UPDATED)};
$c.Color.prototype.decimal=function(e){return this._handle("_decimal",e,$c.Events.INT_UPDATED)};$c.Color.prototype.hex=function(e){return this._handle("_hex",e,$c.Events.HEX_UPDATED)};$c.Color.prototype.red=function(e){return this._handle("_red",e,$c.Events.RGB_UPDATED)};$c.Color.prototype.green=function(e){return this._handle("_green",e,$c.Events.RGB_UPDATED)};$c.Color.prototype.blue=function(e){return this._handle("_blue",e,$c.Events.RGB_UPDATED)};$c.Color.prototype.hue=function(e){return this._handle("_hue",
e,$c.Events.HSL_UPDATED)};$c.Color.prototype.saturation=function(e){return this._handle("_saturation",e,$c.Events.HSL_UPDATED)};$c.Color.prototype.lightness=function(e){return this._handle("_lightness",e,$c.Events.HSL_UPDATED)};$c.Color.prototype.brightness=function(e){return this._handle("_brightness",e,$c.Events.HSV_UPDATED)};$c.Color.prototype.alpha=function(e){return this._handle("_alpha",e)};$c.Color.prototype._handle=function(e,h,n){"undefined"!=typeof this[e]&&"undefined"!=typeof h&&(h!=this[e]&&
(this[e]=h,n&&this.broadcast(n)),this.broadcast($c.Events.UPDATED));return this[e]};$c.Color.prototype.getHex=function(){return this._hex};$c.Color.prototype.getRGB=function(){return"rgb("+[$c.absround(this._red),$c.absround(this._green),$c.absround(this._blue)].join(", ")+")"};$c.Color.prototype.getPRGB=function(){return"rgb("+[$c.absround(100*this._red/255)+"%",$c.absround(100*this._green/255)+"%",$c.absround(100*this._blue/255)+"%"].join(", ")+")"};$c.Color.prototype.getRGBA=function(){return"rgba("+
[$c.absround(this._red),$c.absround(this._green),$c.absround(this._blue),this._alpha].join(", ")+")"};$c.Color.prototype.getPRGBA=function(){return"rgba("+[$c.absround(100*this._red/255)+"%",$c.absround(100*this._green/255)+"%",$c.absround(100*this._blue/255)+"%",this._alpha].join(", ")+")"};$c.Color.prototype.getHSL=function(){return"hsl("+[$c.absround(this._hue),$c.absround(this._saturation)+"%",$c.absround(this._lightness)+"%"].join(", ")+")"};$c.Color.prototype.getHSLA=function(){return"hsla("+
[$c.absround(this._hue),$c.absround(this._saturation)+"%",$c.absround(this._lightness)+"%",this._alpha].join(", ")+")"};$c.Color.prototype.format=function(e){var h={r:this._red,g:this._green,b:this._blue,h:this._hue,s:this._saturation,l:this._lightness,v:this._brightness,a:this._alpha,x:this._hex,d:this._decimal},n;for(n in h)e=e.split("%"+n+"%").join(h[n]);return e};$c.Color.prototype.output=0;$c.Color.HEX=0;$c.Color.RGB=1;$c.Color.PRGB=2;$c.Color.RGBA=3;$c.Color.PRGBA=4;$c.Color.HSL=5;$c.Color.HSLA=
6;$c.Color.INT=7;$c.Color.prototype.toString=function(){switch(this.output){case 1:return this.getRGB();case 2:return this.getPRGB();case 3:return this.getRGBA();case 4:return this.getPRGBA();case 5:return this.getHSL();case 6:return this.getHSLA();case 7:return this._decimal}return this.getHex()};$c.Color.prototype._listeners=null;$c.Color.prototype._isSubscribed=function(e){return null!=this._listeners[e]};$c.Color.prototype.subscribe=function(e,h){this._isSubscribed(e)||(this._listeners[e]=[]);
this._listeners[e].push(h)};$c.Color.prototype.unsubscribe=function(e,h){if(this._isSubscribed(e))for(var n=this._listeners[e],b=0,c=n.length;b<c;b++)if(n[b]===h)return n.splice(b,1),this.unsubscribe(e,h)};$c.Color.prototype.broadcast=function(e,h){if(this._isSubscribed(e)){e=this._listeners[e];for(var n=e.length,b=0;b<n;b++)e[b].apply(this,h)}};$c.Color.prototype.tween=function(e,h){h instanceof $c.Color||(h=new $c.Color(h));var n=+new Date,b=this;this.broadcast("tweenStart");var c=setInterval(function(){var l=
Math.min(1,(+new Date-n)/e);b.interpolate(h,l);b.broadcast("tweenProgress");1==l&&(clearInterval(c),b.broadcast("tweenComplete"))},20);return c};$c.Color.prototype.bind=function(e,h){var n=this;this.subscribe("updated",function(){e[h]=n.toString()})};$c.Color.random=function(){return new $c.Color($c.absround(16777215*Math.random()))};$c.Color.bind=function(e,h){var n=new $c.Color(e[h]);n.bind(e,h);return n};var jd=lively.FreezerRuntime.recorderFor("lively.graphics/color.js");jd.floor=function(e){return Math.floor(255.99*
e)};jd.pad=function(e,h,n){n=void 0===n?jd.arr.last:n;return[].concat($jscomp.arrayFromIterable(e),$jscomp.arrayFromIterable(Array(Math.max(h-e.length,0)).fill(n(e))))};jd.num=wk;jd.obj=lf;jd.arr=Te;jd.parse=Ce;jd.Rectangle=Pd;jd.rect=Gk;jd.pt=fh;jd.Point=Bf;jd.rgbaRegex=/\s*rgba?\s*\(\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*(?:,\s*([0-9\.]+)\s*)?\)\s*/;var nB=function(){};nB.prototype.offsets=function(){return null};nB.prototype.stepCount=function(){return 0};nB.prototype.stepSize=function(){return 0};
nB.prototype.chord=function(e){var h=this,n=e.hue,b=e.saturation,c=e.brightness;return(this.offsets()||jd.arr.range(0,this.steps()).map(function(l){return l*h.stepSize()})).map(function(l){return jd.Color.hsb(n+l%360,b,c)})};$jscomp.global.Object.defineProperties(nB.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Color Harmony"}}});jd.ColorHarmony=nB;var Mw=function(){return jd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Mw,jd.ColorHarmony);Mw.prototype.steps=function(){return 1};
Mw.prototype.stepSize=function(){return 180};$jscomp.global.Object.defineProperties(Mw.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Complement"}}});ya("b7",Mw);jd.Complementary=Mw;var Nw=function(){return jd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Nw,jd.ColorHarmony);Nw.prototype.steps=function(){return 2};Nw.prototype.stepSize=function(){return 120};$jscomp.global.Object.defineProperties(Nw.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Triadic"}}});
ya("b8",Nw);jd.Triadic=Nw;var Ty=function(){return jd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Ty,jd.ColorHarmony);Ty.prototype.offsets=function(){return[0,60,180,240]};$jscomp.global.Object.defineProperties(Ty.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Tetradic"}}});ya("b9",Ty);jd.Tetradic=Ty;var Ow=function(){return jd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Ow,jd.ColorHarmony);Ow.prototype.steps=function(){return 3};Ow.prototype.stepSize=
function(){return 90};$jscomp.global.Object.defineProperties(Ow.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Quadratic"}}});ya("ba",Ow);jd.Quadratic=Ow;var Pw=function(){return jd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Pw,jd.ColorHarmony);Pw.prototype.steps=function(){return 5};Pw.prototype.offsets=function(){return[-60,-30,0,30,60]};$jscomp.global.Object.defineProperties(Pw.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Analogous"}}});
ya("bb",Pw);jd.Analogous=Pw;var Uy=function(){return jd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Uy,jd.ColorHarmony);Uy.prototype.offsets=function(){return[-30,-15,0,15,30]};$jscomp.global.Object.defineProperties(Uy.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Neutral"}}});ya("bc",Uy);jd.Neutral=Uy;var wf=function(e,h,n,b){this.r=e||0;this.g=h||0;this.b=n||0;this.a=b||(0===b?0:1)};wf.random=function(e,h){void 0===e&&(e=0);void 0===h&&(h=255);return jd.Color.rgb(jd.num.random(e,
h),jd.num.random(e,h),jd.num.random(e,h))};wf.hsb=function(e,h,n){if(0==h)return new jd.Color(n,n,n);var b=e%360/60;e=Math.floor(b);var c=b-e;b=(1-h)*n;var l=(1-h*c)*n;h=(1-h*(1-c))*n;switch(e){case 0:return new jd.Color(n,h,b);case 1:return new jd.Color(l,n,b);case 2:return new jd.Color(b,n,h);case 3:return new jd.Color(b,l,n);case 4:return new jd.Color(h,b,n);case 5:return new jd.Color(n,b,l);default:return new jd.Color(0,0,0)}};wf.wheel=function(e){return jd.Color.wheelHsb(void 0===e?10:e,0,.9,
.7)};wf.wheelHsb=function(e,h,n,b){for(var c=Array(e),l=360/Math.max(e,1),a=0;a<e;a++)c[a]=jd.Color.hsb(h+a*l,n,b);return c};wf.rgb=function(e,h,n){return new jd.Color(e/255,h/255,n/255)};wf.rgbHex=function(e){return(e=this.parseHex(e))&&0<=e[0]&&0<=e[1]&&0<=e[2]?new jd.Color(e[0],e[1],e[2]):null};wf.rgba=function(e,h,n,b){return new jd.Color(e/255,h/255,n/255,b)};wf.fromLiteral=function(e){return new jd.Color(e.r,e.g,e.b,e.a)};wf.fromTuple=function(e){return new jd.Color(e[0],e[1],e[2],e[3])};wf.fromTuple8Bit=
function(e){return new jd.Color(e[0]/255,e[1]/255,e[2]/255,e[3]/255)};wf.fromString=function(e){return e&&"none"!==e?this.fromTuple(this.parse(e)):null};wf.parse=function(e){return e&&"none"!==e?(e=jd.parse(e),[e.red,e.green,e.blue,e.alpha]):null};wf.parseRGB=function(e){var h=e.match(this.rgbaRegex);if(h){e=parseInt(h[1])/(h[2]?100:255);var n=parseInt(h[3])/(h[4]?100:255),b=parseInt(h[5])/(h[6]?100:255);h=h[7]?parseFloat(h[7]):1;return[e,n,b,h]}return null};wf.parseHex=function(e){var h;var n="";
for(h=0;h<e.length;h++){var b=e[h].toLowerCase();if("a"==b||"b"==b||"c"==b||"d"==b||"e"==b||"f"==b||"0"==b||"1"==b||"2"==b||"3"==b||"4"==b||"5"==b||"6"==b||"7"==b||"8"==b||"9"==b)n+=b}if(6==n.length)h=n.substring(0,2),e=n.substring(2,4),n=n.substring(4,6);else if(3==n.length)h=n.substring(0,1),h+=h,e=n.substring(1,2),e+=e,n=n.substring(2,3),n+=n;else return null;h=parseInt(h,16)/255;e=parseInt(e,16)/255;n=parseInt(n,16)/255;return[h,e,n]};wf.prototype.grayValue=function(){return(this.r+this.g+this.b)/
3};wf.prototype.equals=function(e){return e?this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a:!1};wf.prototype.darker=function(e){var h=this.mixedWith(jd.Color.black,.5);return 1<e?h.darker(e-1):h};wf.prototype.lighter=function(e){if(0==e)return this;var h=this.mixedWith(jd.Color.white,.5);return 1<e?h.lighter(e-1):h};wf.prototype.interpolate=function(e,h){if(h.isGradient)return h.interpolate(1-e,this);h=jd.obj.isArray(h)?h:h.toTuple();return jd.Color.fromTuple(this.toTuple().map(function(n,
b){return jd.num.interpolate(e,n,h[b])}))};wf.prototype.toString=function(){return 1===this.a?"rgb("+jd.floor(this.r)+","+jd.floor(this.g)+","+jd.floor(this.b)+")":this.toRGBAString()};wf.prototype.toRGBAString=function(){return"rgba("+Math.floor(255.99*this.r)+","+Math.floor(255.99*this.g)+","+Math.floor(255.99*this.b)+","+this.a+")"};wf.prototype.toHexString=function(){function e(h){for(;2>h.length;)h="0"+h;return h}return e(Math.floor(255.99*this.r).toString(16))+e(Math.floor(255.99*this.g).toString(16))+
e(Math.floor(255.99*this.b).toString(16))};wf.prototype.toTuple=function(){return[this.r,this.g,this.b,this.a]};wf.prototype.toTuple8Bit=function(){return[255*this.r,255*this.g,255*this.b,255*this.a]};wf.prototype.toHSB=function(){var e=Math.max(this.r,this.g,this.b),h=Math.min(this.r,this.g,this.b),n;e==h?n=0:e==this.r?n=(this.g-this.b)/(e-h)*60:e==this.g?n=60*(2+(this.b-this.r)/(e-h)):e==this.b&&(n=60*(4+(this.r-this.g)/(e-h)));return[(n+360)%360,0==e?0:(e-h)/e,e]};wf.prototype.withA=function(e){return new jd.Color(this.r,
this.g,this.b,e)};wf.prototype.mixedWith=function(e,h){var n=1-h;return new jd.Color(this.r*h+e.r*n,this.g*h+e.g*n,this.b*h+e.b*n,this.a*h+e.a*n)};wf.prototype.invert=function(){return jd.Color.rgb(255*(1-this.r),255*(1-this.g),255*(1-this.b))};wf.prototype.toCSSString=function(){return this.toRGBAString()};wf.prototype.__serialize__=function(){return{__expr__:"Color."+this.toString(),bindings:{"lively.graphics/color.js":["Color"]}}};wf.prototype.toJSExpr=function(){return"Color."+(this.name||this.toString())};
$jscomp.global.Object.defineProperties(wf.prototype,{isColor:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){var e=this,h=jd.Color.named;return Object.keys(h).find(function(n){return h[n].equals(e)})}}});$jscomp.global.Object.defineProperties(wf,{rgbaRegex:{configurable:!0,enumerable:!0,get:function(){return jd.rgbaRegex}},named:{configurable:!0,enumerable:!0,get:function(){return this._named?this._named:this._named={black:new jd.Color(0,
0,0),almostBlack:jd.Color.rgb(64,64,64),white:new jd.Color(1,1,1),gray:new jd.Color(.8,.8,.8),red:new jd.Color(.8,0,0),green:new jd.Color(0,.8,0),yellow:new jd.Color(.8,.8,0),blue:new jd.Color(0,0,.8),purple:new jd.Color(.5,0,.5),magenta:new jd.Color(1,0,1),pink:jd.Color.rgb(255,30,153),turquoise:jd.Color.rgb(0,240,255),tangerine:jd.Color.rgb(242,133,0),orange:jd.Color.rgb(255,153,0),cyan:jd.Color.rgb(0,255,255),brown:jd.Color.rgb(182,67,0),limeGreen:jd.Color.rgb(51,255,0),darkGray:jd.Color.rgb(102,
102,102),lightGray:jd.Color.rgb(230,230,230),veryLightGray:jd.Color.rgb(243,243,243),transparent:jd.Color.rgba(0,0,0,0),lively:jd.Color.rgb(245,124,0)}}}});ya("C",wf);jd.Color=wf;Object.assign(jd.Color,jd.Color.named);var dv=function(e){this.stops=e?e.map(function(h){return h}):[]};dv.create=function(e){var h=[],n;for(n in e)h.push({offset:Number(n),color:e[n]});return new this({stops:h})};dv.parse=function(e){return e.startsWith("radial-gradient")?jd.RadialGradient.parse(e):e.startsWith("linear-gradient")?
jd.LinearGradient.parse(e):jd.Color.fromTuple(jd.Color.parse(e))};dv.prototype.equals=function(e){return e&&e.isGradient?this.toString()==e.toString():!1};dv.prototype.getStopsLighter=function(e){return jd.arr.collect(this.stops,function(h){return{offset:h.offset,color:h.color.lighter(e)}})};dv.prototype.getStopsDarker=function(e){return jd.arr.collect(this.stops,function(h){return{offset:h.offset,color:h.color.darker(e)}})};dv.prototype.interpolateStops=function(e,h){var n=jd.pad(this.stops,h.length);
h=jd.pad(h,this.stops.length);var b=[],c;for(c=0;c<n.length;c++){var l=n[c];var a=l.color;var f=l.offset;var m=h[c];l=m.color;m=m.offset;b.push({color:a.interpolate(e,l),offset:jd.num.interpolate(e,f,m)})}return b};dv.prototype.__serialize__=function(){return{__expr__:this.toJSExpr(),bindings:{"lively.graphics/color.js":["Color","RadialGradient","LinearGradient"],"lively.graphics/geometry-2d.js":["pt","rect"]}}};$jscomp.global.Object.defineProperties(dv.prototype,{isGradient:{configurable:!0,enumerable:!0,
get:function(){return!0}}});jd.Gradient=dv;var Al=function(e){var h=void 0===e?{}:e;e=h.vector;h=jd.Gradient.call(this,h.stops)||this;h.vector=e;return h};$jscomp.inherits(Al,jd.Gradient);Al.parse=function(e){e.match(/\((.*)\)/)[1].split(",")};Al.prototype.angleToRect=function(e){return jd.Point.polar(1,e).extentAsRectangle().withCenter(jd.pt(.5,.5))};Al.prototype.vectorAsAngle=function(){return this.vector.extent().theta()};Al.prototype.toString=function(){return this.toCSSString()};Al.prototype.lighter=
function(e){return new this.constructor({stops:this.getStopsLighter(e),vector:this.vector})};Al.prototype.darker=function(){return new this.constructor({stops:this.getStopsDarker(),vector:this.vector})};Al.prototype.interpolate=function(e,h,n){n=void 0===n?{width:1E3,height:1E3}:n;h.isColor&&(h=new jd.LinearGradient({vector:this.vector,stops:this.stops.map(function(b){return{color:h,offset:b.offset}})}));if("radialGradient"==h.type){if(.5>e)return new jd.LinearGradient({vector:this.vector.interpolate(e,
jd.rect(0,0,0,1)),stops:this.interpolateStops(e,h.stops.map(function(b,c){return{color:b.color,offset:1}}))});if(.5<=e)return new jd.RadialGradient({stops:this.interpolateStops(e,h.stops),focus:jd.pt(.5,0).interpolate(e,h.focus),bounds:jd.rect(0,0,100*n.width,2*n.height).interpolate(e,h.bounds)})}return new jd.LinearGradient({stops:this.interpolateStops(e,h.stops),vector:this.vector.interpolate(e,h.vector)})};Al.prototype.toCSSString=function(){var e="linear-gradient("+(jd.num.toDegrees(this.vectorAsAngle())+
90+"deg,")+this.stops.map(function(h){return h.color.toRGBAString()+" "+((100*h.offset).toFixed()+"%")}).join(",");return e+")"};Al.prototype.toJSExpr=function(){return"new LinearGradient({stops: ["+this.stops.map(function(e){return"{offset: "+e.offset+", color: "+e.color.toJSExpr()+"}"}).join(", ")+"], vector: "+this.vector+"})"};$jscomp.global.Object.defineProperties(Al.prototype,{type:{configurable:!0,enumerable:!0,get:function(){return"linearGradient"}},vectors:{configurable:!0,enumerable:!0,
get:function(){return{northsouth:jd.rect(jd.pt(0,0),jd.pt(0,1)),northeast:jd.rect(jd.pt(1,0),jd.pt(0,1)),westeast:jd.rect(jd.pt(1,0),jd.pt(0,0)),southeast:jd.rect(jd.pt(1,1),jd.pt(0,0)),southnorth:jd.rect(jd.pt(0,1),jd.pt(0,0)),southwest:jd.rect(jd.pt(0,1),jd.pt(1,0)),eastwest:jd.rect(jd.pt(0,0),jd.pt(1,0)),northwest:jd.rect(jd.pt(0,0),jd.pt(1,1))}}},vector:{configurable:!0,enumerable:!0,get:function(){return this._vector},set:function(e){this._vector=e?"string"===typeof e?this.vectors[e.toLowerCase()]:
"number"===typeof e?this.angleToRect(e):e:this.vectors.northsouth}}});ya("am",Al);jd.LinearGradient=Al;var Cn=function(e){var h=void 0===e?{}:e;e=h.focus;var n=h.bounds;h=jd.Gradient.call(this,h.stops)||this;h.focus=e||jd.pt(.5,.5);h.bounds=n||new jd.Rectangle(0,0,20,20);return h};$jscomp.inherits(Cn,jd.Gradient);Cn.parse=function(e){e.match(/\((.*)\)/)[1].split(",")};Cn.prototype.toString=function(){return this.toCSSString()};Cn.prototype.lighter=function(e){return new this.constructor({stops:this.getStopsLighter(e),
focus:this.focus,bounds:this.bounds})};Cn.prototype.darker=function(){return new this.constructor({stops:this.getStopsDarker(),focus:this.focus,bounds:this.bounds})};Cn.prototype.interpolate=function(e,h,n){n=void 0===n?{height:1E3,width:1E3}:n;h.isColor&&(h=new jd.RadialGradient({vector:this.vector,bounds:this.bounds,stops:this.stops.map(function(b){return{color:h,offset:b.offset}})}));return"linearGradient"==h.type?h.interpolate(1-e,this,n):new jd.RadialGradient({bounds:this.bounds.interpolate(e,
h.bounds),stops:this.interpolateStops(e,h.stops),focus:this.focus.interpolate(e,h.focus)})};Cn.prototype.toCSSString=function(){var e=this.focus.scaleBy(100),h=this.bounds.extent();e="radial-gradient("+h.x/2+"px "+h.y/2+"px at "+e.x+"% "+e.y+"%";for(h=0;h<this.stops.length;h++)e+=","+this.stops[h].color.toRGBAString()+" "+((100*this.stops[h].offset).toFixed()+"%");return e+")"};Cn.prototype.toJSExpr=function(){return"new RadialGradient({stops: ["+this.stops.map(function(e){return"{offset: "+e.offset+
", color: "+e.color.toJSExpr()+"}"}).join(", ")+"], bounds: "+this.bounds+", focus: "+this.focus.toString(!1)+"})"};$jscomp.global.Object.defineProperties(Cn.prototype,{type:{configurable:!0,enumerable:!0,get:function(){return"radialGradient"}}});ya("ak",Cn);jd.RadialGradient=Cn;var TD=ya("bd","#1abc9c #e8f8f5 #d1f2eb #a3e4d7 #76d7c4 #48c9b0 #1abc9c #17a589 #148f77 #117864 #0e6251 #16a085 #e8f6f3 #d0ece7 #a2d9ce #73c6b6 #45b39d #16a085 #138d75 #117a65 #0e6655 #0b5345 #2ecc71 #eafaf1 #d5f5e3 #abebc6 #82e0aa #58d68d #2ecc71 #28b463 #239b56 #1d8348 #186a3b #27ae60 #e9f7ef #d4efdf #a9dfbf #7dcea0 #52be80 #27ae60 #229954 #1e8449 #196f3d #145a32 #3498db #ebf5fb #d6eaf8 #aed6f1 #85c1e9 #5dade2 #3498db #2e86c1 #2874a6 #21618c #1b4f72 #2980b9 #eaf2f8 #d4e6f1 #a9cce3 #7fb3d5 #5499c7 #2980b9 #2471a3 #1f618d #1a5276 #154360 #9b59b6 #f5eef8 #ebdef0 #d7bde2 #c39bd3 #af7ac5 #9b59b6 #884ea0 #76448a #633974 #512e5f #8e44ad #f4ecf7 #e8daef #d2b4de #bb8fce #a569bd #8e44ad #7d3c98 #6c3483 #5b2c6f #4a235a #34495e #ebedef #d6dbdf #aeb6bf #85929e #5d6d7e #34495e #2e4053 #283747 #212f3c #1b2631 #2c3e50 #eaecee #d5d8dc #abb2b9 #808b96 #566573 #2c3e50 #273746 #212f3d #1c2833 #17202a #f1c40f #fef9e7 #fcf3cf #f9e79f #f7dc6f #f4d03f #f1c40f #d4ac0d #b7950b #9a7d0a #7d6608 #f39c12 #fef5e7 #fdebd0 #fad7a0 #f8c471 #f5b041 #f39c12 #d68910 #b9770e #9c640c #7e5109 #e67e22 #fdf2e9 #fae5d3 #f5cba7 #f0b27a #eb984e #e67e22 #ca6f1e #af601a #935116 #784212 #d35400 #fbeee6 #f6ddcc #edbb99 #e59866 #dc7633 #d35400 #ba4a00 #a04000 #873600 #6e2c00 #e74c3c #fdedec #fadbd8 #f5b7b1 #f1948a #ec7063 #e74c3c #cb4335 #b03a2e #943126 #78281f #c0392b #f9ebea #f2d7d5 #e6b0aa #d98880 #cd6155 #c0392b #a93226 #922b21 #7b241c #641e16 #ecf0f1 #fdfefe #fbfcfc #f7f9f9 #f4f6f7 #f0f3f4 #ecf0f1 #d0d3d4 #b3b6b7 #979a9a #7b7d7d #bdc3c7 #f8f9f9 #f2f3f4 #e5e7e9 #d7dbdd #cacfd2 #bdc3c7 #a6acaf #909497 #797d7f #626567 #95a5a6 #f4f6f6 #eaeded #d5dbdb #bfc9ca #aab7b8 #95a5a6 #839192 #717d7e #5f6a6a #4d5656 #7f8c8d #f2f4f4 #e5e8e8 #ccd1d1 #b2babb #99a3a4 #7f8c8d #707b7c #616a6b #515a5a #424949".split(" "));
jd.flatDesignColors=TD;jd.flatDesignColors=TD;jd.flatDesignColors=TD;var UD=ya("be","#f44336 #ffebee #ffcdd2 #ef9a9a #e57373 #ef5350 #f44336 #e53935 #d32f2f #c62828 #b71c1c #ff8a80 #ff5252 #ff1744 #d50000 #e91e63 #fce4ec #f8bbd0 #f48fb1 #f06292 #ec407a #e91e63 #d81b60 #c2185b #ad1457 #880e4f #ff80ab #ff4081 #f50057 #c51162 #9c27b0 #f3e5f5 #e1bee7 #ce93d8 #ba68c8 #ab47bc #9c27b0 #8e24aa #7b1fa2 #6a1b9a #4a148c #ea80fc #e040fb #d500f9 #aa00ff #673ab7 #ede7f6 #d1c4e9 #b39ddb #9575cd #7e57c2 #673ab7 #5e35b1 #512da8 #4527a0 #311b92 #b388ff #7c4dff #651fff #6200ea #3f51b5 #e8eaf6 #c5cae9 #9fa8da #7986cb #5c6bc0 #3f51b5 #3949ab #303f9f #283593 #1a237e #8c9eff #536dfe #3d5afe #304ffe #2196f3 #e3f2fd #bbdefb #90caf9 #64b5f6 #42a5f5 #2196f3 #1e88e5 #1976d2 #1565c0 #0d47a1 #82b1ff #448aff #2979ff #2962ff #03a9f4 #e1f5fe #b3e5fc #81d4fa #4fc3f7 #29b6f6 #03a9f4 #039be5 #0288d1 #0277bd #01579b #80d8ff #40c4ff #00b0ff #0091ea #00bcd4 #e0f7fa #b2ebf2 #80deea #4dd0e1 #26c6da #00bcd4 #00acc1 #0097a7 #00838f #006064 #84ffff #18ffff #00e5ff #00b8d4 #009688 #e0f2f1 #b2dfdb #80cbc4 #4db6ac #26a69a #009688 #00897b #00796b #00695c #004d40 #a7ffeb #64ffda #1de9b6 #00bfa5 #4caf50 #e8f5e9 #c8e6c9 #a5d6a7 #81c784 #66bb6a #4caf50 #43a047 #388e3c #2e7d32 #1b5e20 #b9f6ca #69f0ae #00e676 #00c853 #8bc34a #f1f8e9 #dcedc8 #c5e1a5 #aed581 #9ccc65 #8bc34a #7cb342 #689f38 #558b2f #33691e #ccff90 #b2ff59 #76ff03 #64dd17 #cddc39 #f9fbe7 #f0f4c3 #e6ee9c #dce775 #d4e157 #cddc39 #c0ca33 #afb42b #9e9d24 #827717 #f4ff81 #eeff41 #c6ff00 #aeea00 #ffeb3b #fffde7 #fff9c4 #fff59d #fff176 #ffee58 #ffeb3b #fdd835 #fbc02d #f9a825 #f57f17 #ffff8d #ffff00 #ffea00 #ffd600 #ffc107 #fff8e1 #ffecb3 #ffe082 #ffd54f #ffca28 #ffc107 #ffb300 #ffa000 #ff8f00 #ff6f00 #ffe57f #ffd740 #ffc400 #ffab00 #ff9800 #fff3e0 #ffe0b2 #ffcc80 #ffb74d #ffa726 #ff9800 #fb8c00 #f57c00 #ef6c00 #e65100 #ffd180 #ffab40 #ff9100 #ff6d00 #ff5722 #fbe9e7 #ffccbc #ffab91 #ff8a65 #ff7043 #ff5722 #f4511e #e64a19 #d84315 #bf360c #ff9e80 #ff6e40 #ff3d00 #dd2c00 #795548 #efebe9 #d7ccc8 #bcaaa4 #a1887f #8d6e63 #795548 #6d4c41 #5d4037 #4e342e #3e2723 #9e9e9e #fafafa #f5f5f5 #eeeeee #e0e0e0 #bdbdbd #9e9e9e #757575 #616161 #424242 #212121 #607d8b #eceff1 #cfd8dc #b0bec5 #90a4ae #78909c #607d8b #546e7a #455a64 #37474f #263238 #ffffff #000000".split(" "));
jd.materialDesignColors=UD;jd.materialDesignColors=UD;jd.materialDesignColors=UD;var VD=ya("bf","ccff00 ccff33 ccff66 ccff99 ccffcc ccffff ffffff ffffcc ffff99 ffff66 ffff33 ffff00 cccc00 cccc33 cccc66 cccc99 cccccc ccccff ffccff ffcccc ffcc99 ffcc66 ffcc33 ffcc00 cc9900 cc9933 cc9966 cc9999 cc99cc cc99ff ff99ff ff99cc ff9999 ff9966 ff9933 ff9900 cc6600 cc6633 cc6666 cc6699 cc66cc cc66ff ff66ff ff66cc ff6699 ff6666 ff6633 ff6600 cc3300 cc3333 cc3366 cc3399 cc33cc cc33ff ff33ff ff33cc ff3399 ff3366 ff3333 ff3300 cc0000 cc0033 cc0066 cc0099 cc00cc cc00ff ff00ff ff00cc ff0099 ff0066 ff0033 ff0000 660000 660033 660066 660099 6600cc 6600ff 9900ff 9900cc 990099 990066 990033 990000 663300 663333 663366 663399 6633cc 6633ff 9933ff 9933cc 993399 993366 993333 993300 666600 666633 666666 666699 6666cc 6666ff 9966ff 9966cc 996699 996666 996633 996600 669900 669933 669966 669999 6699cc 6699ff 9999ff 9999cc 999999 999966 999933 999900 66cc00 66cc33 66cc66 66cc99 66cccc 66ccff 99ccff 99cccc 99cc99 99cc66 99cc33 99cc00 66ff00 66ff33 66ff66 66ff99 66ffcc 66ffff 99ffff 99ffcc 99ff99 99ff66 99ff33 99ff00 00ff00 00ff33 00ff66 00ff99 00ffcc 00ffff 33ffff 33ffcc 33ff99 33ff66 33ff33 33ff00 00cc00 00cc33 00cc66 00cc99 00cccc 00ccff 33ccff 33cccc 33cc99 33cc66 33cc33 33cc00 009900 009933 009966 009999 0099cc 0099ff 3399ff 3399cc 339999 339966 339933 339900 006600 006633 006666 006699 0066cc 0066ff 3366ff 3366cc 336699 336666 336633 336600 003300 003333 003366 003399 0033cc 0033ff 3333ff 3333cc 333399 333366 333333 333300 000000 000033 000066 000099 0000cc 0000ff 3300ff 3300cc 330099 330066 330033 330000".split(" "));
jd.webSafeColors=VD;jd.webSafeColors=VD;jd.webSafeColors=VD;var cea=Object.freeze({__proto__:null,Complementary:Mw,Triadic:Nw,Tetradic:Ty,Quadratic:Ow,Analogous:Pw,Neutral:Uy,Color:wf,LinearGradient:Al,RadialGradient:Cn,flatDesignColors:TD,materialDesignColors:UD,webSafeColors:VD}),b1=lively.FreezerRuntime.recorderFor("lively.graphics/index.js");Object.assign(b1,cea);Object.assign(b1,uba);var dea=Object.freeze({__proto__:null,Complementary:Mw,Triadic:Nw,Tetradic:Ty,Quadratic:Ow,Analogous:Pw,Neutral:Uy,
Color:wf,LinearGradient:Al,RadialGradient:Cn,flatDesignColors:TD,materialDesignColors:UD,webSafeColors:VD,Point:Bf,Rectangle:Pd,Transform:qj,Line:yl,rect:Gk,pt:fh}),eea="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,AP={};!function(e,h){AP?AP=h():(this||eea)[e]=h()}("bowser",function(){function e(l){function a(J){return(J=l.match(J))&&1<J.length&&J[1]||""}function f(J){return(J=l.match(J))&&1<J.length&&J[2]||""}var m=a(/(ipod|iphone|ipad)/i).toLowerCase(),q=!/like android/i.test(l)&&
/android/i.test(l),r=/nexus\s*[0-6]\s*/i.test(l),u=!r&&/nexus\s*[0-9]+/i.test(l),v=/CrOS/.test(l),y=/silk/i.test(l),z=/sailfish/i.test(l),A=/tizen/i.test(l),C=/(web|hpw)os/i.test(l),G=/windows phone/i.test(l),F=!G&&/windows/i.test(l),N=!m&&!y&&/macintosh/i.test(l),L=!q&&!z&&!A&&!C&&/linux/i.test(l),W=a(/edge\/(\d+(\.\d+)?)/i),la=a(/version\/(\d+(\.\d+)?)/i),wa=/tablet/i.test(l),D=!wa&&/[^-]mobi/i.test(l),Q=/xbox/i.test(l);/opera|opr|opios/i.test(l)?v={name:"Opera",opera:!0,version:la||a(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:
/coast/i.test(l)?v={name:"Opera Coast",coast:!0,version:la||a(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(l)?v={name:"Yandex Browser",yandexbrowser:!0,version:la||a(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(l)?v={name:"UC Browser",ucbrowser:!0,version:a(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(l)?v={name:"Maxthon",maxthon:!0,version:a(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(l)?v={name:"Epiphany",epiphany:!0,version:a(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:
/puffin/i.test(l)?v={name:"Puffin",puffin:!0,version:a(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(l)?v={name:"Sleipnir",sleipnir:!0,version:a(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(l)?v={name:"K-Meleon",kMeleon:!0,version:a(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:G?(v={name:"Windows Phone",windowsphone:!0},W?(v.msedge=!0,v.version=W):(v.msie=!0,v.version=a(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(l)?v={name:"Internet Explorer",msie:!0,version:a(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:
v?v={name:"Chrome",chromeos:!0,chromeBook:!0,chrome:!0,version:a(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(l)?v={name:"Microsoft Edge",msedge:!0,version:W}:/vivaldi/i.test(l)?v={name:"Vivaldi",vivaldi:!0,version:a(/vivaldi\/(\d+(\.\d+)?)/i)||la}:z?v={name:"Sailfish",sailfish:!0,version:a(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(l)?v={name:"SeaMonkey",seamonkey:!0,version:a(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(l)?(v={name:"Firefox",
firefox:!0,version:a(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(l)&&(v.firefoxos=!0)):y?v={name:"Amazon Silk",silk:!0,version:a(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(l)?v={name:"PhantomJS",phantom:!0,version:a(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(l)?v={name:"SlimerJS",slimer:!0,version:a(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(l)||/rim\stablet/i.test(l)?v={name:"BlackBerry",blackberry:!0,version:la||a(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:
C?(v={name:"WebOS",webos:!0,version:la||a(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(l)&&(v.touchpad=!0)):/bada/i.test(l)?v={name:"Bada",bada:!0,version:a(/dolfin\/(\d+(\.\d+)?)/i)}:A?v={name:"Tizen",tizen:!0,version:a(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||la}:/qupzilla/i.test(l)?v={name:"QupZilla",qupzilla:!0,version:a(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||la}:/chromium/i.test(l)?v={name:"Chromium",chromium:!0,version:a(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||la}:/chrome|crios|crmo/i.test(l)?
v={name:"Chrome",chrome:!0,version:a(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:q?v={name:"Android",version:la}:/safari|applewebkit/i.test(l)?(v={name:"Safari",safari:!0},la&&(v.version=la)):m?(v={name:"iphone"==m?"iPhone":"ipad"==m?"iPad":"iPod"},la&&(v.version=la)):v=/googlebot/i.test(l)?{name:"Googlebot",googlebot:!0,version:a(/googlebot\/(\d+(\.\d+))/i)||la}:{name:a(/^(.*)\/(.*) /),version:f(/^(.*)\/(.*) /)};!v.msedge&&/(apple)?webkit/i.test(l)?(/(apple)?webkit\/537\.36/i.test(l)?(v.name=v.name||
"Blink",v.blink=!0):(v.name=v.name||"Webkit",v.webkit=!0),!v.version&&la&&(v.version=la)):!v.opera&&/gecko\//i.test(l)&&(v.name=v.name||"Gecko",v.gecko=!0,v.version=v.version||a(/gecko\/(\d+(\.\d+)?)/i));v.msedge||!q&&!v.silk?m?(v[m]=!0,v.ios=!0):N?v.mac=!0:Q?v.xbox=!0:F?v.windows=!0:L&&(v.linux=!0):v.android=!0;F="";v.windowsphone?F=a(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):m?(F=a(/os (\d+([_\s]\d+)*) like mac os x/i),F=F.replace(/[_\s]/g,".")):q?F=a(/android[ \/-](\d+(\.\d+)*)/i):v.webos?F=a(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):
v.blackberry?F=a(/rim\stablet\sos\s(\d+(\.\d+)*)/i):v.bada?F=a(/bada\/(\d+(\.\d+)*)/i):v.tizen&&(F=a(/tizen[\/\s](\d+(\.\d+)*)/i));F&&(v.osversion=F);F=F.split(".")[0];if(wa||u||"ipad"==m||q&&(3==F||4<=F&&!D)||v.silk)v.tablet=!0;else if(D||"iphone"==m||"ipod"==m||q||r||v.blackberry||v.webos||v.bada)v.mobile=!0;v.msedge||v.msie&&10<=v.version||v.yandexbrowser&&15<=v.version||v.vivaldi&&1<=v.version||v.chrome&&20<=v.version||v.firefox&&20<=v.version||v.safari&&6<=v.version||v.opera&&10<=v.version||
v.ios&&v.osversion&&6<=v.osversion.split(".")[0]||v.blackberry&&10.1<=v.version||v.chromium&&20<=v.version?v.a=!0:v.msie&&10>v.version||v.chrome&&20>v.version||v.firefox&&20>v.version||v.safari&&6>v.version||v.opera&&10>v.version||v.ios&&v.osversion&&6>v.osversion.split(".")[0]||v.chromium&&20>v.version?v.c=!0:v.x=!0;return v}function h(l,a){var f=[],m;if(Array.prototype.map)return Array.prototype.map.call(l,a);for(m=0;m<l.length;m++)f=a(l[m]);return f}function n(l){var a=Math.max(l[0].split(".").length,
l[1].split(".").length);for(l=h(l,function(f){var m=a-f.split(".").length;f+=Array(m+1).join(".0");return h(f.split("."),function(q){return Array(20-q.length).join("0")+q}).reverse()});0<=--a;){if(l[0][a]>l[1][a])return 1;if(l[0][a]===l[1][a]){if(0===a)return 0}else return-1}}function b(l,a,f){var m=c;"string"===typeof a&&(f=a,a=void 0);void 0===a&&(a=!1);f&&(m=e(f));f=""+m.version;for(var q in l)if(l.hasOwnProperty(q)&&m[q])return 0>n([f,l[q]]);return a}var c=e("undefined"!==typeof navigator?navigator.userAgent:
"");c.test=function(l){for(var a=0;a<l.length;++a){var f=l[a];if("string"===typeof f&&f in c)return!0}return!1};c.isUnsupportedBrowser=b;c.compareVersions=n;c.check=function(l,a,f){return!b(l,a,f)};c._detect=e;return c});var tq=AP,uq=lively.FreezerRuntime.recorderFor("lively.morphic/config.js");uq.parseURLQuery=function(){if("undefined"===typeof document||!document.location)return{};var e=(document.location.hash||document.location.search).slice(1);e=e&&e.split("&");var h={};if(e)for(var n=0;n<e.length;n++){var b=
e[n].split("="),c=b[0],l=!0;if(1<b.length&&(l=decodeURIComponent(b.slice(1).join("=")),l.match(/^(true|false|null|[0-9"[{].*)$/)))try{l=JSON.parse(l)}catch(a){"["===l[0]&&(l=l.slice(1,-1).split(","))}h[c]=l}return h};uq.Rectangle=Pd;uq.Color=wf;uq.bowser=tq;uq.isMac=!!uq.bowser.mac;"undefined"!==typeof $world&&$world.withAllSubmorphsDo(function(e){return e.hasOwnProperty("_cachedKeyhandlers")&&(e._cachedKeyhandlers=null)});uq.config={onloadURLQuery:uq.parseURLQuery(),defaultShadow:{fast:!0,distance:18,
blur:30,color:uq.Color.black.withA(.2),spread:0},undoLevels:20,halosEnabled:!0,altClickDefinesThat:!0,verboseLogging:!0,maxStatusMessages:5,repeatClickInterval:250,longClick:{minDur:500,maxDur:1E3,maxDist:2},showTooltipsAfter:.8,users:{authServerURL:"https://auth.lively-next.org",autoLoginAsGuest:!1},ide:{workerEnabled:!1,js:{ignoredPackages:["lively.web","no group",function(e){return e.includes("lively.morphic/objectdb")||e.includes("lively.next-node_modules")||e.includes("node_modules")||e.includes("custom-npm-modules")||
e.includes("mocha-es6")||e.includes("test-resources/es6")}]},modes:{aliases:{text:"text",sh:"shell",markdown:"md",javascript:"js",htmlmixed:"html",haskell:"hs",python:"py"}}},globalKeyBindings:[{keys:{mac:"Meta-Z",win:"Ctrl-Z"},command:"undo"},{keys:{mac:"Meta-Shift-Z",win:"Ctrl-Shift-Z"},command:"redo"},{keys:"Alt-X",command:"run command"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"save world"},{keys:"Meta-Shift-L s a v e",command:"save this world"},{keys:"Meta-H",command:"show halo for focused morph"},
{keys:"Meta-Shift-L C O P Y",command:"copy morph"},{keys:"Alt-M",command:"select morph"},{keys:"Escape",command:"escape"},{keys:{win:"Ctrl-Escape",mac:"Meta-Escape"},command:"close active window or morph"},{keys:"Alt-Shift-C",command:"toggle minimize active window"},{keys:{mac:"Meta-Shift-L W S",win:"Ctrl-Shift-L W S"},command:"search workspaces"},{keys:{mac:"Meta-O",win:"Ctrl-O"},command:"open status message of focused morph"},{keys:{win:"Ctrl-K",mac:"Meta-K"},command:{command:"open javascript workspace",
onlyWhenFocused:!1}},{keys:"Alt-Shift-1",command:{command:"open shell terminal",onlyWhenFocused:!1}},{keys:{win:"Ctrl-B",mac:"Meta-B"},command:{command:"open browser",onlyWhenFocused:!1}},{keys:{win:"Ctrl-P",mac:"Meta-P"},command:{command:"open PartsBin",onlyWhenFocused:!0}},{keys:"Alt-T",command:{command:"choose and browse module",onlyWhenFocused:!1}},{keys:"Alt-Shift-T",command:{command:"choose and browse package resources",onlyWhenFocused:!1}},{keys:{mac:"Ctrl-X D"},command:"open file browser"},
{keys:{mac:"Ctrl-X Ctrl-F"},command:"open file"},{keys:{win:"Ctrl-Shift-F",mac:"Meta-Shift-F"},command:{command:"open code search",onlyWhenFocused:!1}},{keys:"Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:1}}},{keys:"Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:1}}},{keys:"Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:1}}},{keys:"Down",command:{command:"move or resize halo target",
args:{what:"move",direction:"down",offset:1}}},{keys:"Meta-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:10}}},{keys:"Meta-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:10}}},{keys:"Meta-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:10}}},{keys:"Meta-Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:10}}},{keys:"Alt-Left",
command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:100}}},{keys:"Alt-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:100}}},{keys:"Alt-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:100}}},{keys:"Alt-Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:100}}},{keys:"Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",
direction:"left",offset:1}}},{keys:"Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:1}}},{keys:"Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:1}}},{keys:"Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:1}}},{keys:"Meta-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:10}}},{keys:"Meta-Shift-Right",
command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:10}}},{keys:"Meta-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:10}}},{keys:"Meta-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:10}}},{keys:"Alt-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:100}}},{keys:"Alt-Shift-Right",command:{command:"move or resize halo target",
args:{what:"resize",direction:"right",offset:100}}},{keys:"Alt-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:100}}},{keys:"Alt-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:100}}},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},command:"close halo target"},{keys:{win:"Ctrl-`|Alt-`",mac:"Meta-1"},command:"window switcher"},{keys:{mac:"Meta-Shift-L R E S 1",win:"Ctrl-Shift-L R E S 1"},command:{command:"resize active window",
args:{how:"col1"}}},{keys:{mac:"Meta-Shift-L R E S 2",win:"Ctrl-Shift-L R E S 2"},command:{command:"resize active window",args:{how:"col2"}}},{keys:{mac:"Meta-Shift-L R E S 3",win:"Ctrl-Shift-L R E S 3"},command:{command:"resize active window",args:{how:"col3"}}},{keys:{mac:"Meta-Shift-L R E S C",win:"Ctrl-Shift-L R E S C"},command:{command:"resize active window",args:{how:"center"}}},{keys:{mac:"Meta-Shift-L R E S L",win:"Ctrl-Shift-L R E S L"},command:{command:"resize active window",args:{how:"left"}}},
{keys:{mac:"Meta-Shift-L R E S R",win:"Ctrl-Shift-L R E S R"},command:{command:"resize active window",args:{how:"right"}}},{keys:{mac:"Meta-Shift-L R E S F",win:"Ctrl-Shift-L R E S F"},command:{command:"resize active window",args:{how:"full"}}},{keys:{mac:"Meta-Shift-L R E S T",win:"Ctrl-Shift-L R E S T"},command:{command:"resize active window",args:{how:"top"}}},{keys:{mac:"Meta-Shift-L R E S B",win:"Ctrl-Shift-L R E S B"},command:{command:"resize active window",args:{how:"bottom"}}},{keys:{mac:"Meta-Shift-L R E S Escape",
win:"Ctrl-Shift-L R E S Escape"},command:{command:"resize active window",args:{how:"reset"}}}],text:{basicFontItems:"Sans-serif;serif;Monospace;Arial Black;Arial Narrow;Comic Sans MS;Garamond;Tahoma;Trebuchet MS;Verdana;custom...".split(";"),cursorBlinkPeriod:.5,useSoftTabs:!0,tabWidth:2,markStackSize:16,undoLevels:50,clipboardBufferLength:100,useMultiSelect:!0,undoGroupDelay:600,defaultKeyBindings:[{keys:{win:"Ctrl-C",mac:"Meta-C"},command:{command:"clipboard copy",passEvent:!0}},{keys:"Ctrl-W",
command:{command:"manual clipboard copy",args:{delete:!0}}},{keys:"Alt-W",command:"manual clipboard copy"},{keys:"Ctrl-Y",command:"manual clipboard paste"},{keys:"Alt-Y",command:{command:"manual clipboard paste",args:{killRingCycleBack:!0}}},{keys:{win:"Ctrl-X",mac:"Meta-X"},command:{command:"clipboard cut",passEvent:!0}},{keys:{win:"Ctrl-V",mac:"Meta-V"},command:{command:"clipboard paste",passEvent:!0}},{keys:{win:"Ctrl-Z|Ctrl-Shift--",mac:"Meta-Z|Ctrl-Shift--|Ctrl-x u"},command:"text undo"},{keys:{win:"Ctrl-Shift-Z",
mac:"Meta-Shift-Z"},command:"text redo"},{keys:{win:"Ctrl-A|Ctrl-X H",mac:"Meta-A|Ctrl-X H"},command:"select all"},{keys:{win:"Alt-Enter",mac:"Meta-D|Alt-Enter"},command:"doit"},{keys:{mac:"Meta-Shift-L X B"},command:"eval all"},{keys:{win:"Alt-Ctrl-Enter",mac:"Meta-P"},command:"printit"},{keys:{win:"Alt-Ctrl-Shift-Enter",mac:"Meta-I"},command:"print inspectit"},{keys:{win:"Ctrl-Shift-I",mac:"Meta-Shift-I"},command:"inspectit"},{keys:{win:"Ctrl-Shift-E",mac:"Meta-Shift-E"},command:"editit"},{keys:{win:"Ctrl-Shift-U",
mac:"Meta-Shift-U"},command:"undefine variable"},{keys:"Backspace",command:"delete backwards"},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},command:"delete"},{keys:{win:"Left|Ctrl-B",mac:"Left|Ctrl-B"},command:"go left"},{keys:{win:"Right|Ctrl-F",mac:"Right|Ctrl-F"},command:"go right"},{keys:{win:"Up|Ctrl-P",mac:"Up|Ctrl-P"},command:"go up"},{keys:{win:"Down|Ctrl-N",mac:"Down|Ctrl-N"},command:"go down"},{keys:"Shift-Left",command:"select left"},{keys:"Shift-Right",command:"select right"},{keys:"Shift-Up",
command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-Right",mac:"Alt-Right|Alt-F"},command:"goto word right"},{keys:{win:"Ctrl-Left",mac:"Alt-Left|Alt-B"},command:"goto word left"},{keys:{win:"Ctrl-Shift-Right",mac:"Alt-Shift-Right|Alt-Shift-F"},command:{command:"goto word right",args:{select:!0}}},{keys:{win:"Ctrl-Shift-Left",mac:"Alt-Shift-Left|Alt-Shift-B"},command:{command:"goto word left",args:{select:!0}}},{keys:{win:"Ctrl-Backspace",mac:"Alt-Backspace"},command:"delete word left"},
{keys:"Alt-D",command:"delete word right"},{keys:{win:"Alt-Ctrl-K",mac:"Alt-Ctrl-K"},command:"delete word right"},{keys:"Alt-Shift-2",command:"select word right"},{keys:"Ctrl-X Ctrl-X",command:"reverse selection"},{keys:{win:"Ctrl-Shift-L",mac:"Meta-L"},command:"select line"},{keys:{win:"Shift-Home",mac:"Shift-Home|Ctrl-Shift-A"},command:{command:"goto line start",args:{select:!0}}},{keys:{win:"Home",mac:"Home|Ctrl-A"},command:{command:"goto line start",args:{select:!1}}},{keys:{win:"Shift-End",mac:"Shift-End|Ctrl-Shift-E"},
command:{command:"goto line end",args:{select:!0}}},{keys:{win:"End",mac:"End|Ctrl-E"},command:{command:"goto line end",args:{select:!1}}},{keys:"Ctrl-C J",command:{command:"join line",args:{withLine:"before"}}},{keys:"Ctrl-C Shift-J",command:{command:"join line",args:{withLine:"after"}}},{keys:{win:"Ctrl-Shift-D",mac:"Meta-Shift-D|Ctrl-C P"},command:"duplicate line or selection"},{keys:{win:"Ctrl-Shift-Backspace",mac:"Meta-Backspace"},command:"delete left until beginning of line"},{keys:"Ctrl-K",
command:"delete emtpy line or until end of line"},{keys:{win:"Ctrl-Alt-Up|Ctrl-Alt-P",mac:"Ctrl-Meta-Up|Ctrl-Meta-P"},command:"move lines up"},{keys:{win:"Ctrl-Alt-Down|Ctrl-Alt-N",mac:"Ctrl-Meta-Down|Ctrl-Meta-N"},command:"move lines down"},{keys:{win:"PageDown",mac:"PageDown|Ctrl-V"},command:"goto page down"},{keys:{win:"PageUp",mac:"PageUp|Alt-V"},command:"goto page up"},{keys:{win:"Shift-PageDown",mac:"Shift-PageDown"},command:"goto page down and select"},{keys:{win:"Shift-PageUp",mac:"Shift-PageUp"},
command:"goto page up and select"},{keys:"Alt-Ctrl-,",command:"move cursor to screen top in 1/3 steps"},{keys:"Alt-Ctrl-.",command:"move cursor to screen bottom in 1/3 steps"},{keys:{win:"Alt-Left",mac:"Meta-Left"},command:"goto matching left"},{keys:{win:"Alt-Shift-Left",mac:"Meta-Shift-Left"},command:{command:"goto matching left",args:{select:!0}}},{keys:{win:"Alt-Right",mac:"Meta-Right"},command:"goto matching right"},{keys:{win:"Alt-Shift-Right",mac:"Meta-Shift-Right"},command:{command:"goto matching right",
args:{select:!0}}},{keys:"Alt-Ctrl-B",command:"goto matching left"},{keys:"Alt-Ctrl-F",command:"goto matching right"},{keys:"Ctrl-Up",command:"goto paragraph above"},{keys:"Ctrl-Down",command:"goto paragraph below"},{keys:{win:"Ctrl-Shift-Home",mac:"Meta-Shift-Up"},command:{command:"goto start",args:{select:!0}}},{keys:{win:"Ctrl-Shift-End",mac:"Meta-Shift-Down"},command:{command:"goto end",args:{select:!0}}},{keys:{win:"Ctrl-Home",mac:"Meta-Up|Meta-Home|Alt-Shift-,"},command:"goto start"},{keys:{win:"Ctrl-End",
mac:"Meta-Down|Meta-End|Alt-Shift-."},command:"goto end"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{win:"Ctrl-Shift-L",mac:"Ctrl-Shift-L|Alt-G G"},command:"goto line"},{keys:"Enter",command:"newline"},{keys:"Space",command:{command:"insertstring",args:{string:" ",undoGroup:!0}}},{keys:"Tab",command:{command:"tab - snippet expand or indent"}},{keys:{win:"Ctrl-]",mac:"Meta-]"},command:"indent"},{keys:{win:"Ctrl-[",mac:"Meta-["},command:"outdent"},{keys:{win:"Ctrl-Enter",mac:"Meta-Enter"},
command:{command:"insert line",args:{where:"below"}}},{keys:"Shift-Enter",command:{command:"insert line",args:{where:"above"}}},{keys:"Ctrl-O",command:"split line"},{keys:{mac:"Ctrl-X Ctrl-T"},command:"transpose chars"},{keys:{mac:"Ctrl-C Ctrl-U"},command:"uppercase"},{keys:{mac:"Ctrl-C Ctrl-L"},command:"lowercase"},{keys:{mac:"Meta-Shift-L W t"},command:"remove trailing whitespace"},{keys:{mac:"Ctrl-Space"},command:"toggle active mark"},{keys:{mac:"Meta-Shift-L M O D E"},command:"change editor mode"},
{keys:{mac:"Meta-Shift-L L T"},command:"toggle line wrapping"},{keys:"Esc|Ctrl-G",command:"cancel input"},{keys:{win:"Ctrl-/",mac:"Meta-/"},command:"toggle comment"},{keys:{win:"Alt-Ctrl-/",mac:"Alt-Meta-/|Alt-Meta-\u00f7"},command:"toggle block comment"},{keys:"Meta-Shift-L /  D",command:"comment box"},{keys:{win:"Ctrl-.",mac:"Meta-."},command:"[IyGotoChar] activate"},{keys:{win:"Ctrl-,",mac:"Meta-,"},command:{command:"[IyGotoChar] activate",args:{backwards:!0}}},{keys:{win:"Ctrl-Space|Ctrl-Shift-P",
mac:"Alt-Shift-Space|Alt-Space|Meta-Shift-P"},command:"text completion"},{keys:"\u00f7|Alt-/",command:"text completion first match"},{keys:"Alt-Q",command:"fit text to column"},{keys:{win:"Ctrl-F|Ctrl-G|F3",mac:"Meta-F|Meta-G|Ctrl-S"},command:"search in text"},{keys:{win:"Ctrl-Shift-F|Ctrl-Shift-G",mac:"Meta-Shift-F|Meta-Shift-G|Ctrl-R"},command:{command:"search in text",args:{backwards:!0}}},{keys:"Ctrl-Shift-/|Ctrl-C Ctrl-Shift-,",command:"[multi select] all like this"},{keys:"Alt-Ctrl-P",command:"[multi select] add cursor above"},
{keys:"Alt-Ctrl-N",command:"[multi select] add cursor below"},{keys:"Ctrl-Shift-,",command:"[multi select] more like this backward"},{keys:"Ctrl-Shift-.",command:"[multi select] more like this forward"},{keys:{mac:"Meta-Shift-,"},command:"[multi select] goto previous focused cursor"},{keys:{mac:"Meta-Shift-."},command:"[multi select] goto next focused cursor"},{keys:"Ctrl-Shift-;",command:"[multi select] remove focused cursor"},{keys:"Alt-Ctrl-A",command:"[multi select] align cursors"},{keys:"Ctrl-X R",
command:"[multi select] create rectangular selection"},{keys:{win:"Shift-Ctrl-S|Ctrl-Alt-Space",mac:"Ctrl-Command-space|Ctrl-Alt-Space"},command:"contractRegion"},{keys:{win:"Shift-Ctrl-E|Ctrl-Shift-Space",mac:"Shift-Command-Space|Ctrl-Shift-Space"},command:"expandRegion"},{keys:"Ctrl-Alt-h",command:"markDefun"},{keys:"Ctrl-Alt-d|Ctrl-Alt-Down",command:"forwardDownSexp"},{keys:"Ctrl-Alt-u|Ctrl-Alt-Up",command:"backwardUpSexp"},{keys:"Ctrl-Alt-b|Ctrl-Alt-Left",command:"backwardSexp"},{keys:"Ctrl-Alt-f|Ctrl-Alt-Right",
command:"forwardSexp"},{keys:"Alt-.",command:"selectDefinition"},{keys:"Ctrl-Shift-'",command:"selectSymbolReferenceOrDeclaration"},{keys:"Ctrl-Shift-[",command:"selectSymbolReferenceOrDeclarationPrev"},{keys:"Ctrl-Shift-]",command:"selectSymbolReferenceOrDeclarationNext"},{keys:{win:"Ctrl-=",mac:"Meta-="},command:"increase font size"},{keys:{win:"Ctrl--",mac:"Meta--"},command:"decrease font size"},{keys:"Alt-K",command:"set link of selection"},{keys:"Alt-O",command:"set doit of selection"},{keys:{win:"Ctrl-\\",
mac:"Meta-\\"},command:"reset text style"},{keys:{win:"Ctrl-Shift-L T U I",mac:"Meta-Shift-L T U I"},command:"open text attribute controls"},{keys:{win:"Ctrl-Shift-L T D",mac:"Meta-Shift-L T D"},command:"[todo] toggle todo marker"},{keys:{win:"Ctrl-Shift-L D A T E",mac:"Meta-Shift-L D A T E"},command:"insert date"},{keys:"Ctrl-C Ctrl-I",command:"change string inflection"},{keys:"Alt-Shift-4",command:"spell check word"},{keys:"Alt-Shift-\\",command:"[shell] run shell command on region"},{keys:"Alt-Shift-;",
command:"run code on text morph"},{keys:{win:"Ctrl-Shift-L O P E N",mac:"Meta-Shift-L O P E N"},command:"open file at cursor"},{keys:"Meta-F1",command:"report token at cursor"}]},codeEditor:{defaultTheme:"default",collapseSelection:!1,search:{maxCharsPerLine:1E4,fastHighlightLineCount:4E3,showTextMap:!0},defaultStyle:{fontFamily:"IBM Plex Mono",padding:uq.Rectangle.inset(4,2,4,2),fontSize:12,clipMode:"auto"},modes:{text:{style:{}}}},systemBrowser:{fixUndeclaredVarsOnSave:!0},objectEditor:{fixUndeclaredVarsOnSave:!0},
remotes:{server:System.get("@system-env").browser?document.location.origin+"/eval":null},css:{ibmPlex:"/lively.morphic/assets/ibm-plex/css/ibm-plex.css",fontAwesome:"/lively.morphic/assets/fontawesome-free-5.12.1/css/all.css",inconsolata:"/lively.morphic/assets/inconsolata/inconsolata.css"}};var nk=ya("ad",uq.config);uq.default=nk;var Zf=lively.FreezerRuntime.recorderFor("lively.bindings/index.js");Zf.connect=uk;Zf.disconnect=Sp;Zf.disconnectAll=Rv;Zf.once=So;Zf.signal=hk;Zf.callWhenNotNull=Sv;Zf.callWhenPathNotNull=
Tv;Zf.noUpdate=jj;Zf.string=Hg;Zf.arr=Te;Zf.Closure=zi;Zf.obj=lf;Zf.stringifyFunctionWithoutToplevelRecorder=Ll;Zf.connect=uk;Zf.connect=uk;Zf.disconnect=Sp;Zf.disconnect=Sp;Zf.disconnectAll=Rv;Zf.disconnectAll=Rv;Zf.once=So;Zf.once=So;Zf.signal=hk;Zf.signal=hk;Zf.noUpdate=jj;Zf.noUpdate=jj;var OI=function(e){var h=lively.FreezerRuntime.recorderFor("lively.bindings/index.js"),n=h.hasOwnProperty("AttributeConnection")&&"function"===typeof h.AttributeConnection?h.AttributeConnection:h.AttributeConnection=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b,c,l,a,f){this.init(b,c,l,a,f)}},{key:"init",value:function(b,c,l,a,f){this.doNotSerialize=["isActive","converter","updater","varMapping"];this.sourceObj=b;this.sourceAttrName=c;this.targetObj=l;this.targetMethodName=a;this.varMapping={source:b,target:l};f=Object.assign({removeAfterUpdate:!1,forceAttributeConnection:!1,
garbageCollect:!1,signalOnAssignment:!0},f);f.removeAfterUpdate&&(this.removeAfterUpdate=!0);f.forceAttributeConnection&&(this.forceAttributeConnection=!0);"boolean"===typeof f.garbageCollect&&(this.garbageCollect=f.garbageCollect);"boolean"===typeof f.signalOnAssignment&&(this.signalOnAssignment=f.signalOnAssignment);f.converter&&this.setConverter(f.converter);f.updater&&this.setUpdater(f.updater);f.varMapping&&(this.varMapping=Object.assign(f.varMapping,this.varMapping));this.getSpec();return this}},
{key:"__additionally_serialize__",value:function(b,c,l,a){Zf.arr.equals(Zf.arr.without(Object.keys(this.varMapping),"_rev"),["source","target"])?b.props.varMapping&&delete b.props.varMapping:a("varMapping",this.varMapping)}},{key:"__after_deserialize__",value:function(b,c){this.varMapping||(this.varMapping={});this.varMapping.source=this.sourceObj;this.varMapping.target=this.targetObj;this.onSourceAndTargetRestored()}},{key:"onSourceAndTargetRestored",value:function(){this.sourceObj&&this.targetObj&&
this.connect()}},{key:"copy",value:function(b){return Zf.AttributeConnection.fromLiteral(this.toLiteral(),b)}},{key:"fixInstanceAfterCopyingFromSite",value:function(b,c,l){this.disconnect()}},{key:"clone",value:function(){var b=new this.constructor(this.getSourceObj(),this.getSourceAttrName(),this.getTargetObj(),this.getTargetMethodName(),this.getSpec());this.dependedBy&&(b.dependedBy=this.dependedBy);return b}},{key:"getTargetObj",value:function(){return this.targetObj}},{key:"getSourceObj",value:function(){return this.sourceObj}},
{key:"getSourceAttrName",value:function(){return this.sourceAttrName}},{key:"getTargetMethodName",value:function(){return this.targetMethodName}},{key:"getSourceValue",value:function(){return this.getSourceObj()[this.getSourceAttrName()]}},{key:"getPrivateSourceValue",value:function(){return this.sourceObj[this.privateAttrName(this.sourceAttrName)]}},{key:"getConverter",value:function(){if(!this.converterString)return null;this.converter||(this.converter=Zf.Closure.fromSource(this.converterString,
this.varMapping).recreateFunc());return this.converter}},{key:"setConverter",value:function(b){delete this.converter;return this.converterString=b?String(b):null}},{key:"getUpdater",value:function(){if(!this.updaterString)return null;this.updater||(this.updater=Zf.Closure.fromSource(this.updaterString,this.varMapping).recreateFunc());return this.updater}},{key:"setUpdater",value:function(b){delete this.updater;return this.updaterString=b?Zf.stringifyFunctionWithoutToplevelRecorder(b):null}},{key:"getSpec",
value:function(){var b={};this.updaterString&&(b.updater=this.getUpdater());this.converterString&&(b.converter=this.getConverter());this.removeAfterUpdate&&(b.removeAfterUpdate=!0);this.forceAttributeConnection&&(b.forceAttributeConnection=!0);this.hasOwnProperty("garbageCollect")&&(b.garbageCollect=this.garbageCollect);this.hasOwnProperty("signalOnAssignment")&&(b.signalOnAssignment=this.signalOnAssignment);return b}},{key:"resetSpec",value:function(){delete this.garbageCollect;delete this.signalOnAssignment;
delete this.removeAfterUpdate;delete this.forceAttributeConnection;delete this.converter;delete this.converterString;delete this.updater;delete this.updaterString}},{key:"privateAttrName",value:function(b){return"$$"+b}},{key:"activate",value:function(){this.isActive=!0}},{key:"deactivate",value:function(){delete this.isActive}},{key:"connect",value:function(){var b=this.getExistingConnection();b!==this&&(b&&b.disconnect(),this.addAttributeConnection());b=this.sourceObj;var c=this.sourceAttrName,
l=this.forceAttributeConnection,a=b.__lookupSetter__(c),f=b.__lookupGetter__(c),m=!a&&!f&&(this.getSourceValue()||this.getPrivateSourceValue());"function"!==typeof m||l?this.addSourceObjGetterAndSetter(f,a):m.isWrapped||this.addConnectionWrapper(b,c,m);return this}},{key:"disconnect",value:function(){var b=this,c=this.sourceObj;if(!c||!c.attributeConnections)return this.removeSourceObjGetterAndSetter();c.attributeConnections=c.attributeConnections.filter(function(a){return!b.isSimilarConnection(a)});
var l=c.attributeConnections.filter(function(a){return b.getSourceAttrName()==a.getSourceAttrName()});0==c.attributeConnections.length&&delete c.attributeConnections;0==l.length&&this.removeSourceObjGetterAndSetter();return null}},{key:"update",value:function(b,c){if(this.isActive)return null;var l=this,a=this.getUpdater(),f=this.getConverter(),m=this.targetObj,q=this.targetMethodName;if(!m||!q)return c="Cannot update "+this.toString(b)+" because of no target ("+m+") or targetProp ("+q+") ",this.isWeakConnection&&
this.disconnect(),console.error(c),null;var r=m[q],u=function(y,z,A,C,G,F){A=[y,z,A,C,G,F];f&&(b=f.call(l,y,z),y=A[0]=b);y="function"===typeof r?r.apply(m,A):m[q]=y;l.removeAfterUpdate&&l.disconnect();return y};try{return this.isActive=!0,a?a.call(this,u,b,c):u(b,c)}catch(y){var v=this.sourceObj&&"function"===typeof this.sourceObj.world&&this.sourceObj.world()||this.targetObj&&"function"===typeof this.targetObj.world&&this.targetObj.world();v?v.logError(y,"AttributeConnection>>update: "):console.error("Error when trying to update "+
this+" with value "+b+":\n"+y+"\n"+y.stack)}finally{delete this.isActive}return null}},{key:"addSourceObjGetterAndSetter",value:function(b,c){if(!(b&&b.isAttributeConnectionGetter||c&&c.isAttributeConnectionSetter)){var l=this.sourceObj,a=this.sourceAttrName,f=this.privateAttrName(a);l[f]&&console.warn("newAttrName "+f+" already exists.Are there already other connections?");l.hasOwnProperty("doNotSerialize")||(l.doNotSerialize=[]);Zf.arr.pushIfNotIncluded(l.doNotSerialize,f);l.hasOwnProperty("doNotCopyProperties")||
(l.doNotCopyProperties=[]);Zf.arr.pushIfNotIncluded(l.doNotCopyProperties,f);b&&(l.hasOwnProperty(a)?l.__defineGetter__(f,b):l.__defineGetter__(f,function(){return l.constructor.prototype.__lookupGetter__(a).bind(l)()}));c&&(l.hasOwnProperty(a)?l.__defineSetter__(f,c):l.__defineSetter__(f,function(m){l.constructor.prototype.__lookupSetter__(a).bind(l)(m)}));b||c||!l.hasOwnProperty(a)||(l[f]=l[a]);l.__defineSetter__(a,function(m){var q=l[f];l[f]=m;if(void 0===l.attributeConnections)return console.error("Sth wrong with sourceObj, has no attributeConnections"),
null;l.attributeConnections.forEach(function(r){r&&r.getSourceAttrName()===a&&r.signalOnAssignment&&r.update(m,q)});return m});l.__lookupSetter__(a).isAttributeConnectionSetter=!0;l.__defineGetter__(a,function(){return l[f]});l.__lookupGetter__(a).isAttributeConnectionGetter=!0}}},{key:"addConnectionWrapper",value:function(b,c,l){if("function"!==typeof l)throw Error("addConnectionWrapper didnt get a method to wrap");var a;if(a=b.hasOwnProperty(c)){b[this.privateAttrName(c)]=l;var f=function(){return l}}else f=
function(){return Object.getPrototypeOf(b)[c]};b[c]=function(){if(void 0===this.attributeConnections)throw Error("[lively.bindings] Something is wrong with connection source object, it has no attributeConnections");for(var m=this.attributeConnections.slice(),q=this[c].originalFunction.apply(this,arguments),r=0;r<m.length;r++){var u=m[r];u.getSourceAttrName()===c&&u.update(arguments[0])}return q};b[c].isOwnProperty=a;b[c].isWrapped=!0;b[c].isConnectionWrapper=!0;Object.defineProperty(b[c],"originalFunction",
{get:f});b[c].toString=function(){return"<Wrapped "+f()+">"}}},{key:"removeSourceObjGetterAndSetter",value:function(){var b=this.sourceAttrName,c=this.privateAttrName(b),l=this.sourceObj;if(l){if(l.__lookupGetter__(b)){if(delete l[b],l.hasOwnProperty(c)){try{l[b]=l[c]}catch(f){}delete l[c]}}else if(l[b]&&l[b].isConnectionWrapper){var a=l[b];delete l[b];l[b]||(l[b]=a.originalFunction)}l.doNotSerialize&&l.doNotSerialize.includes(c)&&(l.doNotSerialize=Zf.arr.without(l.doNotSerialize,c),0==l.doNotSerialize.length&&
delete l.doNotSerialize);l.doNotCopyProperties&&l.doNotCopyProperties.includes(c)&&(l.doNotCopyProperties=Zf.arr.without(l.doNotCopyProperties,c),0==l.doNotCopyProperties.length&&delete l.doNotCopyProperties)}}},{key:"addAttributeConnection",value:function(){this.sourceObj.attributeConnections||(this.sourceObj.attributeConnections=[]);this.sourceObj.attributeConnections.push(this)}},{key:"getExistingConnection",value:function(){var b=this.sourceObj&&this.sourceObj.attributeConnections;if(!b)return null;
for(var c=0,l=b.length;c<l;c++)if(this.isSimilarConnection(b[c]))return b[c];return null}},{key:"isRecursivelyActivated",value:function(){return this.isActive}},{key:"isSimilarConnection",value:function(b){return b&&b.constructor==this.constructor?this.sourceObj==b.sourceObj&&this.sourceAttrName==b.sourceAttrName&&this.targetObj==b.targetObj&&this.targetMethodName==b.targetMethodName:!1}},{key:"toString",value:function(b){try{return Zf.string.format("AttributeConnection(%s.%s %s %s.%s)",this.getSourceObj(),
this.getSourceAttrName(),b?"--\x3e"+String(b)+"--\x3e":"--\x3e",this.getTargetObj(),this.getTargetMethodName())}catch(c){return"<Error in AttributeConnection>>toString>"}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AttributeConnection"}}],h,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.bindings",version:"0.1.2"}}},
{start:221,end:16605})}(void 0);Zf.AttributeConnection=OI;Zf.AttributeConnection=OI;Zf.AttributeConnection=OI;Zf.callWhenNotNull=Sv;Zf.callWhenNotNull=Sv;Zf.callWhenPathNotNull=Tv;Zf.callWhenPathNotNull=Tv;var fea=Object.freeze({__proto__:null,connect:uk,disconnect:Sp,disconnectAll:Rv,once:So,signal:hk,noUpdate:jj,AttributeConnection:OI,callWhenNotNull:Sv,callWhenPathNotNull:Tv});lively.FreezerRuntime.recorderFor("lively.serializer2/object-extensions.js");Object.defineProperty(Symbol.prototype,"__serialize__",
{configurable:!0,value:function(){var e=function(){return Object.getOwnPropertyNames(Symbol).filter(function(n){return"symbol"===typeof Symbol[n]}).reduce(function(n,b){return n.set(Symbol[b],"Symbol."+b)},new Map)}(),h=/^Symbol\((.*)\)$/;return function(){var n="function"===typeof this[Symbol.toPrimitive]?this[Symbol.toPrimitive]():this,b=Symbol.keyFor(n);if(b)return{__expr__:'Symbol.for("'+b+'")'};if(e.get(n))return{__expr__:e.get(n)};n=String(n).match(h);return{__expr__:n?'Symbol("'+n[1]+'")':
"Symbol()"}}}()});Object.defineProperty(System,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System"}}});Object.defineProperty(System.global,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System.global"}}});Object.defineProperty(Map.prototype,"__serialize__",{configurable:!0,value:function(e,h,n){var b=e.add(this),c=b.currentRev,l=b.currentSnapshot,a=l.entries=[],f=0;h[b.id]=l;e.classHelper.addClassInfo(b,this,l);l=$jscomp.makeIterator(this);for(var m=l.next();!m.done;m=
l.next()){var q=$jscomp.makeIterator(m.value);m=q.next().value;q=q.next().value;f++;m=b.snapshotProperty(b.id,m,n.concat("key",String(f)),h,e);q=b.snapshotProperty(b.id,q,n.concat("value",String(f)),h,e);a.push(m,q)}return b.asRefForSerializedObjMap(c)}});Object.defineProperty(Map.prototype,"__deserialize__",{configurable:!0,value:function(e,h,n,b,c){e=e.entries;for(var l=0;l<e.length;l+=2){var a=e[l+1],f=h.recreateProperty("key."+l,e[l],n,b,c.concat("key",l));a=h.recreateProperty("value."+l,a,n,
b,c.concat("value",l));this.set(f,a)}}});Object.defineProperty(Set.prototype,"__serialize__",{configurable:!0,value:function(e,h,n){var b=e.add(this),c=b.currentRev,l=b.currentSnapshot,a=l.entries=[],f=0;h[b.id]=l;e.classHelper.addClassInfo(b,this,l);l=$jscomp.makeIterator(this);for(var m=l.next();!m.done;m=l.next())m=m.value,f++,m=b.snapshotProperty(b.id,m,n.concat("entry",String(f)),h,e),a.push(m);return b.asRefForSerializedObjMap(c)}});Object.defineProperty(Set.prototype,"__deserialize__",{configurable:!0,
value:function(e,h,n,b,c){e=e.entries;for(var l=0;l<e.length;l++){var a=h.recreateProperty("entry."+l,e[l],n,b,c.concat("key",l));this.add(a)}}});var BP=lively.FreezerRuntime.recorderFor("lively.serializer2/util.js");BP.isPrimitive=ik;BP.isPrimitive=ik;BP.isPrimitive=ik;var fi=lively.FreezerRuntime.recorderFor("lively.serializer2/class-helper.js");fi.getClassName=Li;fi.getSerializableClassMeta=Ls;fi.locateClass=To;fi.arr=Te;fi.string=Hg;fi.classMetaForSerializationProp="lively.serializer-class-info";
fi.classSuperClassProp=Symbol.for("lively-instance-superclass");fi.classNameProp=Symbol.for("__LivelyClassName__");fi.moduleMetaInClassProp=Symbol.for("lively-module-meta");fi.getClassName=Li;fi.getClassName=Li;fi.getSerializableClassMeta=Ls;fi.getSerializableClassMeta=Ls;fi.locateClass=To;fi.locateClass=To;var xt=function(e){this.options=Object.assign({ignoreClassNotFound:!0},e);this[Symbol.for("lively-instance-restorer")]=!0};xt.prototype.addClassInfo=function(e,h,n){(e=fi.getSerializableClassMeta(h))&&
(n[fi.classMetaForSerializationProp]=e)};xt.prototype.restoreIfClassInstance=function(e,h){if(h.hasOwnProperty(fi.classMetaForSerializationProp)&&(e=h[fi.classMetaForSerializationProp],e.className)){h=fi.locateClass(e);if(!h||"function"!==typeof h){h="Trying to deserialize instance of "+JSON.stringify(e)+" but this class cannot be found!";if(!this.options.ignoreClassNotFound)throw Error(h);console.error(h);return{isClassPlaceHolder:!0,className:e.className}}return h.hasOwnProperty(Symbol.for("lively-instance-superclass"))?
new h(this):new h}};xt.sourceModulesInObjRef=function(e){var h=[];(e=e&&e[fi.classMetaForSerializationProp])&&e.module&&h.push(e.module);return h};xt.sourceModulesIn=function(e){var h=[];Object.keys(e).forEach(function(n){(n=e[n])&&n[fi.classMetaForSerializationProp]&&h.push(n[fi.classMetaForSerializationProp])});return fi.arr.uniqBy(h,function(n,b){var c=n.module,l=b.module;return!c&&!l||c&&!l||!c&&l?n.className===b.className:n.className===b.className&&c.package.name==l.package.name&&c.package.pathInPackage==
l.package.pathInPackage})};$jscomp.global.Object.defineProperties(xt.prototype,{sourceModuleNameProperty:{configurable:!0,enumerable:!0,get:function(){return"__SourceModuleName__"}}});$jscomp.global.Object.defineProperties(xt,{moduleMetaInClassProp:{configurable:!0,enumerable:!0,get:function(){return fi.moduleMetaInClassProp}},classMetaForSerializationProp:{configurable:!0,enumerable:!0,get:function(){return fi.classMetaForSerializationProp}},classSuperClassProp:{configurable:!0,enumerable:!0,get:function(){return fi.classSuperClassProp}},
classNameProperty:{configurable:!0,enumerable:!0,get:function(){return fi.classNameProp}}});fi.ClassHelper=xt;fi.default=xt;var yh=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins/expression-serializer.js");yh.deserializeSpec=hf;yh.serializeSpec=om;yh.string=Hg;yh.Closure=zi;yh.Path=Xg;yh.obj=lf;yh.properties=mp;yh.arr=Te;yh.getSerializableClassMeta=Ls;yh.connect=uk;var am=function(e){this.prefix=Object.assign({prefix:"__lv_expr__"},e).prefix+":"};am.prototype.isSerializedExpression=
function(e){return 0===e.indexOf(this.prefix)};am.prototype.requiredModulesOf__expr__=function(e){return this.isSerializedExpression(e)?(e=this.exprStringDecode(e).bindings)?Object.keys(e):null:null};am.prototype.exprStringDecode=function(e){var h=e.indexOf(":");e.slice(0,h);e=e.slice(h+1);for(var n={},b=!1;e&&e.startsWith("{")&&0<=(h=e.indexOf("}:"));){b=!0;var c=e.slice(1,h);e=e.slice(h+2);e.includes("https:")&&e.indexOf("https:")<e.indexOf(":")?(e=e.replace("https:","__HTTP_PLACEHOLDER__"),h=e.indexOf(":")-
20+6,e=e.replace("__HTTP_PLACEHOLDER__","https:")):h=e.indexOf(":");var l=e.slice(0,h);c=c.split(",").filter(function(a){return!!a.trim()}).map(function(a){if(!a.includes(":"))return a;var f=$jscomp.makeIterator(a.split(":"));a=f.next().value;f=f.next().value;return{exported:a,local:f}});n[l]=c;e=e.slice(h+1)}return{__expr__:e,bindings:b?n:null}};am.prototype.exprStringEncode=function(e){var h=e.bindings;e=String(e.__expr__);if(h)for(var n=Object.keys(h),b=0;b<n.length;b++){var c=n[b],l=h[c];Array.isArray(l)&&
(l=l.map(function(a){return"string"===typeof a?a:a.exported+":"+a.local}).join(","));e="{"+l+"}:"+c+":"+e}return this.prefix+e};am.prototype.convert__expr__obj=function(e){console.assert("__expr__"in e,"obj has no property __expr__");return this.prefix+e.__expr__};am.prototype.__eval__=function(e,h){return yh.__eval__(e,h)};am.prototype.deserializeExpr=function(e){if(!e.startsWith(this.prefix))throw Error('"'+e+'" is not a serialized expression, missing prefix "'+this.prefix+'"');return this.deserializeExprObj(this.exprStringDecode(e))};
am.prototype.deserializeExprObj=function(e){var h=e.__expr__;e=e.bindings;var n={};if(e)for(var b=e?Object.keys(e):[],c=0;c<b.length;c++){var l=b[c],a=e[l];if(lively.FreezerRuntime){var f=lively.FreezerRuntime.get(lively.FreezerRuntime.decanonicalize(l));if(!f){var m=lively.FreezerRuntime.fetchStandaloneFor(l);m&&(f=m.exports)}f.exports&&(f=f.exports)}else f=System.get(System.decanonicalize(l));if(!f)throw Error("[lively.serializer] expression eval: bindings specify to import "+l+" but this module is not loaded!\nSource: "+
h);for(l=0;l<a.length;l++){var q=a[l],r=m=void 0;"string"===typeof q?r=m=q:"object"===typeof q&&(m=q.local,r=q.exported);n[m]=f[r];h="var "+m+" = __boundValues__."+m+";\n"+h}}return this.__eval__(h,n)};ya("a0",am);yh.ExpressionSerializer=am;yh.__eval__=yh.Closure.fromSource("function __eval__(__source__, __boundValues__) { \n  return eval(__source__); \n}").getFunc();yh.deserializeSpec=hf;yh.deserializeSpec=hf;yh.serializeSpec=om;yh.serializeSpec=om;yh.default=am;var hi=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins.js");
hi.obj=lf;hi.Plugin=function(){};var CP=function(){};CP.prototype.serializeObject=function(e,h,n,b,c){if("function"!==typeof e.__serialize__)return null;(e=e.__serialize__(n,b,c))&&e.hasOwnProperty("__expr__")&&(n=n.expressionSerializer.exprStringEncode(e),e=h?n:{__expr__:n});return e};CP.prototype.deserializeObject=function(e,h,n,b){return(h=n.__expr__)?e.expressionSerializer.deserializeExpr(h):null};hi.CustomSerializePlugin=CP;var DP=function(){};DP.prototype.additionallySerialize=function(e,h,
n,b){e.classHelper.addClassInfo(h,h.realObj,n)};DP.prototype.deserializeObject=function(e,h,n,b){return e.classHelper.restoreIfClassInstance(h,n)};hi.ClassPlugin=DP;var c1=function(){};c1.prototype.serializeObject=function(e,h,n,b,c){e&&e.isMorph&&(e.__isBeingSerialized__=!0);return null};hi.SerializationIndicationPlugin=c1;var d1=function(){};d1.prototype.additionallySerialize=function(e,h,n,b){h.realObj&&h.realObj.isMorph&&(h.realObj.__isBeingSerialized__=!1)};hi.SerializationFinishPlugin=d1;var PI=
function(){};PI.prototype.additionallySerialize=function(e,h,n,b){var c=h.realObj;c&&"function"===typeof c.__additionally_serialize__&&c.__additionally_serialize__(n,h,e,b)};PI.prototype.additionallyDeserializeBeforeProperties=function(e,h,n,b,c,l,a){"function"===typeof n.__deserialize__&&n.__deserialize__(c,h,l,e,a)};PI.prototype.additionallyDeserializeAfterProperties=function(e,h,n,b,c,l){"function"===typeof n.__after_deserialize__&&n.__after_deserialize__(b,h,e)};hi.AdditionallySerializePlugin=
PI;var e1=function(){};e1.prototype.propertiesToSerialize=function(e,h,n,b){return(e=h.realObj)&&e.__only_serialize__||null};hi.OnlySerializePropsPlugin=e1;var f1=function(){};f1.prototype.propertiesToSerialize=function(e,h,n,b){e=h.realObj;if(!e||!e.__dont_serialize__)return null;e=hi.obj.mergePropertyInHierarchy(e,"__dont_serialize__");h=[];for(n=0;n<b.length;n++){var c=b[n];e.includes(c)||h.push(c)}return h};hi.DontSerializePropsPlugin=f1;var EP=function(){};EP.prototype.propertiesToSerialize=
function(e,h,n,b){var c=h.realObj;h=c.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!h)return null;e=h.properties;n=h.propertySettings.valueStoreProperty||"_state";h=[];if(c[n]){if(c.__only_serialize__){for(var l=0;l<b.length;l++){c=b[l];var a=e[c];c!==n&&(a&&a&&(a.derived||a.readOnly||a.hasOwnProperty("serialize")&&!a.serialize)||h.push(c))}return h}n=b.indexOf(n);-1<n&&b.splice(n,1);for(l in e)n=e[l],c=b.indexOf(l),n.derived||n.readOnly||n.hasOwnProperty("serialize")&&!n.serialize?
-1<c&&b.splice(c,1):-1===c&&h.push(l);return h.concat(b)}};EP.prototype.additionallyDeserializeBeforeProperties=function(e,h,n,b,c,l,a){var f=n.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!f)return b;var m=f.order;f=f.propertySettings.valueStoreProperty||"_state";b=c.props;if(b[f])return b;b=hi.obj.clone(b);n.hasOwnProperty(f)||n.initializeProperties();for(c=0;c<m.length;c++)f=m[c],b.hasOwnProperty(f)&&(h.recreatePropertyAndSetProperty(n,b,f,l,e,a),delete b[f]);return b};
hi.LivelyClassPropertiesPlugin=EP;var FP={livelyClassPropertiesPlugin:new hi.LivelyClassPropertiesPlugin,dontSerializePropsPlugin:new hi.DontSerializePropsPlugin,onlySerializePropsPlugin:new hi.OnlySerializePropsPlugin,additionallySerializePlugin:new hi.AdditionallySerializePlugin,classPlugin:new hi.ClassPlugin,customSerializePlugin:new hi.CustomSerializePlugin,indicationPlugin:new hi.SerializationIndicationPlugin,finishPlugin:new hi.SerializationFinishPlugin};hi.plugins=FP;hi.plugins=FP;hi.plugins=
FP;var WD=[hi.plugins.indicationPlugin,hi.plugins.customSerializePlugin,hi.plugins.classPlugin,hi.plugins.additionallySerializePlugin,hi.plugins.onlySerializePropsPlugin,hi.plugins.dontSerializePropsPlugin,hi.plugins.livelyClassPropertiesPlugin,hi.plugins.finishPlugin];hi.allPlugins=WD;hi.allPlugins=WD;hi.allPlugins=WD;var Ii=lively.FreezerRuntime.recorderFor("lively.serializer2/object-pool.js");Ii.__additionally_serialize__addObjectFunction=function(e,h,n,b,c){c=void 0===c?[]:c;return function(l,
a,f){f=void 0===f?!1:f;return h.props[l]=f?{value:a,verbatim:f}:{value:e.snapshotProperty(e.id,a,c.concat([l]),n,b)}}};Ii.arr=Te;Ii.Path=Xg;Ii.obj=lf;Ii.string=Hg;Ii.isPrimitive=ik;Ii.ClassHelper=xt;Ii.ExpressionSerializer=am;Ii.allPlugins=WD;Ii.debugSerialization=!1;Ii.debugDeserialization=!1;var oi=function(e){this.options=Object.assign({checkForLeaks:!1,ignoreClassNotFound:!0,idPropertyName:"id"},e);this.reset()};oi.withDefaultPlugins=function(e){return new this(Object.assign({plugins:Ii.allPlugins},
e))};oi.resolveFromSnapshotAndId=function(e,h){return(new this(h)).resolveFromSnapshotAndId(e)};oi.fromSnapshot=function(e,h){return(new this(h)).readSnapshot(e)};oi.withObject=function(e,h){h=new this(h);h.add(e);return h};oi.prototype.reset=function(){this.uuidGen=Ii.string.newUUID;this._obj_ref_map=new Map;this._id_ref_map={};var e=this.options;this.classHelper=new Ii.ClassHelper(e);this.expressionSerializer=new Ii.ExpressionSerializer;e.idPropertyName&&(this.idPropertyName=e.idPropertyName);e.uuidGen&&
(this.uuidGen=e.uuidGen);e.reinitializeIds&&(this.reinitializeIds=e.reinitializeIds);e.hasOwnProperty("ignoreClassNotFound")&&(this.classHelper.options.ignoreClassNotFound=e.ignoreClassNotFound);var h=this.plugins={serializeObject:[],additionallySerialize:[],propertiesToSerialize:[],deserializeObject:[],additionallyDeserializeBeforeProperties:[],additionallyDeserializeAfterProperties:[],afterDeserialization:[],beforeDeserialization:[],afterSerialization:[],beforeSerialization:[]};e.plugins&&e.plugins.forEach(function(n){"function"===
typeof n.serializeObject&&h.serializeObject.push(n);"function"===typeof n.additionallySerialize&&h.additionallySerialize.push(n);"function"===typeof n.propertiesToSerialize&&h.propertiesToSerialize.push(n);"function"===typeof n.deserializeObject&&h.deserializeObject.push(n);"function"===typeof n.additionallyDeserializeBeforeProperties&&h.additionallyDeserializeBeforeProperties.push(n);"function"===typeof n.additionallyDeserializeAfterProperties&&h.additionallyDeserializeAfterProperties.push(n);"function"===
typeof n.beforeDeserialization&&h.beforeDeserialization.push(n);"function"===typeof n.afterDeserialization&&h.afterDeserialization.push(n);"function"===typeof n.beforeSerialization&&h.beforeSerialization.push(n);"function"===typeof n.afterSerialization&&h.afterSerialization.push(n)})};oi.prototype.knowsId=function(e){return!!this._id_ref_map[e]};oi.prototype.refForId=function(e){return this._id_ref_map[e]};oi.prototype.resolveToObj=function(e){return(e=this._id_ref_map[e])?e.realObj:void 0};oi.prototype.ref=
function(e){return this._obj_ref_map.get(e)};oi.prototype.objects=function(){return Array.from(this._obj_ref_map.keys())};oi.prototype.objectRefs=function(){return Array.from(this._obj_ref_map.values())};oi.prototype.internalAddRef=function(e){e.realObj&&this._obj_ref_map.set(e.realObj,e);return this._id_ref_map[e.id]=e};oi.prototype.add=function(e){var h=this;if(!Ii.isPrimitive(e)){if(Array.isArray(e))return e.map(function(b){return h.add(b)});var n=e.__serialization_id_property__||this.idPropertyName;
return this.ref(e)||this.internalAddRef(new Ii.ObjectRef(e[n]||this.uuidGen(),e,void 0,this.idPropertyName))}};oi.prototype.snapshot=function(e){var h={};this.plugin_beforeSerialization(h,e);for(var n=0,b=Object.keys(this._id_ref_map);n<b.length;n++)this._id_ref_map[b[n]].snapshotObject(h,this);return h=this.plugin_afterSerialization(h,e)};oi.prototype.snapshotObject=function(e){e=this.add(e).id;var h=this.snapshot(e);return{id:e,snapshot:h}};oi.prototype.readSnapshot=function(e,h){if(e.hasOwnProperty("id"))throw Error("readSnapshot expects simple serialized object map, not id-snapshot pair!");
if(this.options.skipMigrations)Ii.ObjectRef.fromSnapshot(h,e,this,[],this.idPropertyName);else{h=0;for(var n=Object.keys(e);h<n.length;h++)this.resolveToObj(n[h])||Ii.ObjectRef.fromSnapshot(n[h],e,this,[],this.idPropertyName)}return this};oi.prototype.resolveFromSnapshotAndId=function(e){if(!e.hasOwnProperty("id"))throw Error("idAndSnapshot does not have id");if(!e.hasOwnProperty("snapshot"))throw Error("idAndSnapshot does not have snapshot");var h=e=this.plugin_beforeDeserialization(e),n=h.id;this.readSnapshot(h.snapshot,
n);this.plugin_afterDeserialization(e);return this.resolveToObj(n)};oi.prototype.plugin_beforeSerialization=function(e,h){for(var n=0;n<this.plugins.beforeSerialization.length;n++)this.plugins.beforeSerialization[n].beforeSerialization(this,e,h)};oi.prototype.plugin_afterSerialization=function(e,h){for(var n=0;n<this.plugins.afterSerialization.length;n++){var b=this.plugins.afterSerialization[n].afterSerialization(this,e,h);b&&(e=b)}return e};oi.prototype.plugin_beforeDeserialization=function(e){for(var h=
0;h<this.plugins.beforeDeserialization.length;h++){var n=this.plugins.beforeDeserialization[h].beforeDeserialization(this,e);n&&(e=n)}return e};oi.prototype.plugin_afterDeserialization=function(e){for(var h=0;h<this.plugins.afterDeserialization.length;h++)this.plugins.afterDeserialization[h].afterDeserialization(this,e)};oi.prototype.plugin_serializeObject=function(e,h,n,b){for(var c=0;c<this.plugins.serializeObject.length;c++){var l=this.plugins.serializeObject[c].serializeObject(e,h,this,n,b);if(l)return l}};
oi.prototype.plugin_propertiesToSerialize=function(e,h,n){for(var b=0;b<this.plugins.propertiesToSerialize.length;b++){var c=this.plugins.propertiesToSerialize[b].propertiesToSerialize(this,e,h,n);c&&(n=c)}return n};oi.prototype.plugin_additionallySerialize=function(e,h,n,b){n=this.plugins.additionallySerialize.length?Ii.__additionally_serialize__addObjectFunction(e,h,n,this,b):null;for(b=0;b<this.plugins.additionallySerialize.length;b++)this.plugins.additionallySerialize[b].additionallySerialize(this,
e,h,n)};oi.prototype.plugin_deserializeObject=function(e,h,n){for(var b=0;b<this.plugins.deserializeObject.length;b++){var c=this.plugins.deserializeObject[b].deserializeObject(this,e,h,n);if(c)return c}};oi.prototype.plugin_additionallyDeserializeBeforeProperties=function(e,h,n,b,c,l){for(var a=0;a<this.plugins.additionallyDeserializeBeforeProperties.length;a++){var f=this.plugins.additionallyDeserializeBeforeProperties[a].additionallyDeserializeBeforeProperties(this,e,h,n,b,c,l);f&&(n=f)}return n};
oi.prototype.plugin_additionallyDeserializeAfterProperties=function(e,h,n,b,c){for(var l=0;l<this.plugins.additionallyDeserializeAfterProperties.length;l++)this.plugins.additionallyDeserializeAfterProperties[l].additionallyDeserializeAfterProperties(this,e,h,n,b,c)};Ii.ObjectPool=oi;var vq=function(e,h,n,b){this.id=e;this.idPropertyName=void 0===b?"id":b;this.realObj=h;this.snapshotVersions=[];this.snapshots={};n&&(e=n.rev||0,this.snapshotVersions.push(e),this.snapshots[e]=n)};vq.fromSnapshot=function(e,
h,n,b,c){b=void 0===b?[]:b;e=new this(e,void 0,void 0,c);try{return n.internalAddRef(e).recreateObjFromSnapshot(h,n,b)}catch(l){if(n.options.highlightBuggyMorphs)for(;b.length;){if((h=Ii.Path(b).map(function(a,f){return"submorphs"==a?f.filter(function(m){return!m.isHand&&!m.isEpiMorph}):f}).get(n.options.rootObject))&&h.isMorph&&h.world()){h.show(!0);n.options.highlightBuggyMorphs=!1;break}b.pop()}throw l;}};vq.prototype.asRefForSerializedObjMap=function(e){return{__ref__:!0,id:this.id,rev:void 0===
e?"????":e}};vq.prototype.snapshotObject=function(e,h,n){n=void 0===n?[]:n;Ii.debugSerialization&&console.log("[serialize] "+n.join("."));if(100<n.length)throw Error("Stopping serializer, encountered a possibly infinit loop: "+n.join("."));var b=this.id,c=this.realObj,l=this.snapshots;if(!c)return console.error("Cannot marshall object ref "+b+", no real object!"),Object.assign({},this.asRefForSerializedObjMap(),{isMissing:!0});var a=c._rev||0;var f=this.asRefForSerializedObjMap(a);Ii.arr.pushIfNotIncluded(this.snapshotVersions,
a);if(l[a])return e[b]||(e[b]=l[a]),f;var m=typeof b;"number"===m&&(b=String(b),m="string");if("string"!==m)throw Error("Error snapshoting "+c+": id is not a string but "+(b+" (serialization path: ")+(n.join(".")+")"));if(m=h.plugin_serializeObject(c,!1,e,n))return l[a]=e[b]=m,f;m=Object.getOwnPropertyNames(c);var q={};l=l[a]=e[b]={rev:a,props:q};(a=h.plugin_propertiesToSerialize(this,l,m))&&(m=a);for(a=0;a<m.length;a++){var r=m[a];q[r]={value:this.snapshotProperty(b,c[r],n.concat([r]),e,h)}}h.plugin_additionallySerialize(this,
l,e,n);return f};vq.prototype.snapshotProperty=function(e,h,n,b,c){var l=this;if(Ii.isPrimitive(h))return h;var a=c.plugin_serializeObject(h,!0,b,n);if(a)return a;if("function"!==typeof h)return Array.isArray(h)?h.map(function(f,m){return l.snapshotProperty(e,f,n.concat(m),b,c)}):(h=c.add(h))&&h.isObjectRef?h.snapshotObject(b,c,n):h};vq.prototype.recreateObjFromSnapshot=function(e,h,n){if(this.realObj)return this;Ii.debugDeserialization&&console.log("[deserialize] "+this.id+" (via "+n.join(".")+")");
var b=e[this.id];if(!b)return console.error("Cannot recreateObjFromSnapshot ObjectRef "+(this.id+" b/c of missing snapshot in snapshot map!")),this;var c=b.rev,l;c=c||0;this.snapshotVersions.push(c);this.snapshots[c]=b;(l=h.plugin_deserializeObject(this,b,n))||(l={});"undefined"===typeof l._rev&&"object"===typeof l&&(l._rev=c||0);this.realObj=l;h.internalAddRef(this);if(!l)return this;c=b.props;var a=h.plugin_additionallyDeserializeBeforeProperties(this,l,c,b,e,n);a&&(c=a);if(c)for(var f in c)this.recreatePropertyAndSetProperty(l,
c,f,e,h,n);f=l.__serialization_id_property__||this.idPropertyName;h.reinitializeIds&&l.hasOwnProperty(f)&&(l[f]=h.reinitializeIds(this.id,this));h.plugin_additionallyDeserializeAfterProperties(this,l,b,e,n);return this};vq.prototype.recreatePropertyAndSetProperty=function(e,h,n,b,c,l){try{var a=h[n]||{value:"NON EXISTING"},f=a.value;e[n]=a.verbatim?f:this.recreateProperty(n,f,b,c,l.concat(n))}catch(q){try{var m=String(e)}catch(r){m="[some "+e.constructor.name+"]"}q.__seen?console.error("Error deserializing property "+
n+" of "+m):(e=n+" of "+m+" ("+JSON.stringify(f)+")",console.error("Error deserializing property "+e),q.__seen=!0);throw q;}};vq.prototype.recreateProperty=function(e,h,n,b,c){var l=this;if("string"===typeof h&&b.expressionSerializer.isSerializedExpression(h))return b.expressionSerializer.deserializeExpr(h);if(Ii.isPrimitive(h))return h;if(Array.isArray(h))return h.map(function(a,f){return l.recreateProperty(f,a,n,b,c.concat(f))});e=h.__serialization_id_property__||this.idPropertyName;return(b.refForId(h[e])||
Ii.ObjectRef.fromSnapshot(h[e],n,b,c,this.idPropertyName)).realObj};$jscomp.global.Object.defineProperties(vq.prototype,{isObjectRef:{configurable:!0,enumerable:!0,get:function(){return!0}},currentSnapshot:{configurable:!0,enumerable:!0,get:function(){if(this.snapshotVersions.length)var e=Ii.arr.last(this.snapshotVersions);else e=0,this.snapshotVersions.push(e);return this.snapshots[e]||(this.snapshots[e]={rev:e,props:{}})}},currentRev:{configurable:!0,enumerable:!0,get:function(){return this.snapshotVersions.length?
Ii.arr.last(this.snapshotVersions):0}}});Ii.ObjectRef=vq;var Oe=lively.FreezerRuntime.recorderFor("lively.serializer2/snapshot-navigation.js");Oe.referenceGraph=Ms;Oe.isReference=Uv;Oe.referencesOfRef=Uo;Oe.referencesOfId=tn;Oe.referencesInArray=eo;Oe.moduleOfId=Sz;Oe.referencesAndClassNamesOfId=bC;Oe.classNameOfId=Fx;Oe.findPathFromToId=cC;Oe.lookupPath=dC;Oe.modifyProperty=eC;Oe.removeUnreachableObjects=rr;Oe.clearDanglingConnections=Tz;Oe.requiredModulesOfSnapshot=Tp;Oe.ClassHelper=xt;Oe.Path=
Xg;Oe.obj=lf;Oe.arr=Te;Oe.graph=$u;Oe.ExpressionSerializer=am;Oe.referenceGraph=Ms;Oe.referenceGraph=Ms;Oe.isReference=Uv;Oe.isReference=Uv;Oe.referencesOfRef=Uo;Oe.referencesOfRef=Uo;Oe.referencesOfId=tn;Oe.referencesOfId=tn;Oe.moduleOfId=Sz;Oe.moduleOfId=Sz;Oe.referencesAndClassNamesOfId=bC;Oe.referencesAndClassNamesOfId=bC;Oe.classNameOfId=Fx;Oe.classNameOfId=Fx;Oe.findPathFromToId=cC;Oe.findPathFromToId=cC;Oe.lookupPath=dC;Oe.lookupPath=dC;Oe.modifyProperty=eC;Oe.modifyProperty=eC;Oe.removeUnreachableObjects=
rr;Oe.removeUnreachableObjects=rr;Oe.clearDanglingConnections=Tz;Oe.clearDanglingConnections=Tz;Oe.defaultExprSerializer=new Oe.ExpressionSerializer;Oe.requiredModulesOfSnapshot=Tp;Oe.requiredModulesOfSnapshot=Tp;var g1,Uz="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,xk=g1={};try{var Vv="function"==typeof setTimeout?setTimeout:fC}catch(e){Vv=fC}try{var Wv="function"==typeof clearTimeout?clearTimeout:Ig}catch(e){Wv=Ig}!0;var Gx,Cu=[],Vz=!1,nF=-1;xk.nextTick=function(e){var h=
Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)h[n-1]=arguments[n];Cu.push(new hC(e,h));1!==Cu.length||Vz||gC(Ns)};hC.prototype.run=function(){(this||Uz).fun.apply(null,(this||Uz).array)};xk.title="browser";xk.browser=!0;xk.env={};xk.argv=[];xk.version="";xk.versions={};xk.on=un;xk.addListener=un;xk.once=un;xk.off=un;xk.removeListener=un;xk.removeAllListeners=un;xk.emit=un;xk.prependListener=un;xk.prependOnceListener=un;xk.listeners=function(e){return[]};xk.binding=
function(e){throw Error("process.binding is not supported");};xk.cwd=function(){return"/"};xk.chdir=function(e){throw Error("process.chdir is not supported");};xk.umask=function(){return 0};var Nh=g1,qS={},pS=!1,sS={},rS=!1,Os={},tS=!1,vS={},uS=!1,xS={},wS=!1,zS={},yS=!1,BS={},AS=!1,DS={},CS=!1,FS={},ES=!1,HS={},GS=!1,JS={},IS=!1,LS={},KS=!1,NS={},MS=!1,PS={},OS=!1,RS={},QS=!1,TS={},SS=!1,VS={},US=!1,XS={},WS=!1,ZS={},YS=!1,aT={},$S=!1,cT={},bT=!1,eT={},dT=!1,gT={},fT=!1,iT={},hT=!1,gea={},hea=gea=
function(e){e.prototype[Symbol.iterator]=function n(){var b=this,c;return $jscomp.generator.createGenerator(n,function(l){1==l.nextAddress&&(c=b.head);if(3!=l.nextAddress)return c?l.yield(c.value,3):l.jumpTo(0);c=c.next;return l.jumpTo(2)})}},h1={};h1=Gh;Gh.Node=Up;Gh.create=Gh;Gh.prototype.removeNode=function(e){if(e.list!==this)throw Error("removing node which does not belong to this list");var h=e.next,n=e.prev;h&&(h.prev=n);n&&(n.next=h);e===this.head&&(this.head=h);e===this.tail&&(this.tail=
n);e.list.length--;e.next=null;e.prev=null;e.list=null;return h};Gh.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var h=this.head;e.list=this;if(e.next=h)h.prev=e;this.head=e;this.tail||(this.tail=e);this.length++}};Gh.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var h=this.tail;e.list=this;if(e.prev=h)h.next=e;this.tail=e;this.head||(this.head=e);this.length++}};Gh.prototype.push=function(){for(var e=0,h=arguments.length;e<h;e++)this.tail=
new Up(arguments[e],this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length};Gh.prototype.unshift=function(){for(var e=0,h=arguments.length;e<h;e++)this.head=new Up(arguments[e],null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length};Gh.prototype.pop=function(){if(this.tail){var e=this.tail.value;(this.tail=this.tail.prev)?this.tail.next=null:this.head=null;this.length--;return e}};Gh.prototype.shift=function(){if(this.head){var e=this.head.value;
(this.head=this.head.next)?this.head.prev=null:this.tail=null;this.length--;return e}};Gh.prototype.forEach=function(e,h){h=h||this;for(var n=this.head,b=0;null!==n;b++)e.call(h,n.value,b,this),n=n.next};Gh.prototype.forEachReverse=function(e,h){h=h||this;for(var n=this.tail,b=this.length-1;null!==n;b--)e.call(h,n.value,b,this),n=n.prev};Gh.prototype.get=function(e){for(var h=0,n=this.head;null!==n&&h<e;h++)n=n.next;if(h===e&&null!==n)return n.value};Gh.prototype.getReverse=function(e){for(var h=
0,n=this.tail;null!==n&&h<e;h++)n=n.prev;if(h===e&&null!==n)return n.value};Gh.prototype.map=function(e,h){h=h||this;for(var n=new Gh,b=this.head;null!==b;)n.push(e.call(h,b.value,this)),b=b.next;return n};Gh.prototype.mapReverse=function(e,h){h=h||this;for(var n=new Gh,b=this.tail;null!==b;)n.push(e.call(h,b.value,this)),b=b.prev;return n};Gh.prototype.reduce=function(e,h){var n=this.head;if(1<arguments.length)var b=h;else if(this.head)n=this.head.next,b=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");
for(var c=0;null!==n;c++)b=e(b,n.value,c),n=n.next;return b};Gh.prototype.reduceReverse=function(e,h){var n=this.tail;if(1<arguments.length)var b=h;else if(this.tail)n=this.tail.prev,b=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var c=this.length-1;null!==n;c--)b=e(b,n.value,c),n=n.prev;return b};Gh.prototype.toArray=function(){for(var e=Array(this.length),h=0,n=this.head;null!==n;h++)e[h]=n.value,n=n.next;return e};Gh.prototype.toArrayReverse=function(){for(var e=
Array(this.length),h=0,n=this.tail;null!==n;h++)e[h]=n.value,n=n.prev;return e};Gh.prototype.slice=function(e,h){h=h||this.length;0>h&&(h+=this.length);e=e||0;0>e&&(e+=this.length);var n=new Gh;if(h<e||0>h)return n;0>e&&(e=0);h>this.length&&(h=this.length);for(var b=0,c=this.head;null!==c&&b<e;b++)c=c.next;for(;null!==c&&b<h;b++,c=c.next)n.push(c.value);return n};Gh.prototype.sliceReverse=function(e,h){h=h||this.length;0>h&&(h+=this.length);e=e||0;0>e&&(e+=this.length);var n=new Gh;if(h<e||0>h)return n;
0>e&&(e=0);h>this.length&&(h=this.length);for(var b=this.length,c=this.tail;null!==c&&b>h;b--)c=c.prev;for(;null!==c&&b>e;b--,c=c.prev)n.push(c.value);return n};Gh.prototype.splice=function(e,h,n){for(var b=[],c=2;c<arguments.length;++c)b[c-2]=arguments[c];e>this.length&&(e=this.length-1);0>e&&(e=this.length+e);c=0;for(var l=this.head;null!==l&&c<e;c++)l=l.next;var a=[];for(c=0;l&&c<h;c++)a.push(l.value),l=this.removeNode(l);null===l&&(l=this.tail);l!==this.head&&l!==this.tail&&(l=l.prev);for(c=0;c<
b.length;c++){var f=b[c];l=l===this.head?new Up(f,null,l,this):new Up(f,l,l.next,this);null===l.next&&(this.tail=l);null===l.prev&&(this.head=l);this.length++}return a};Gh.prototype.reverse=function(){for(var e=this.head,h=this.tail,n=e;null!==n;n=n.prev){var b=n.prev;n.prev=n.next;n.next=b}this.head=h;this.tail=e;return this};try{hea(Gh)}catch(e){}var iea={},jea=h1,Vy=Symbol("max"),op=Symbol("length"),oB=Symbol("lengthCalculator"),XD=Symbol("allowStale"),Wy=Symbol("maxAge"),ev=Symbol("dispose"),
i1=Symbol("noDisposeOnSet"),bm=Symbol("lruList"),Sr=Symbol("cache"),j1=Symbol("updateAgeOnGet"),GP=function(){return 1},wm=function(e){"number"===typeof e&&(e={max:e});e||(e={});if(e.max&&("number"!==typeof e.max||0>e.max))throw new TypeError("max must be a non-negative number");this[Vy]=e.max||Infinity;var h=e.length||GP;this[oB]="function"!==typeof h?GP:h;this[XD]=e.stale||!1;if(e.maxAge&&"number"!==typeof e.maxAge)throw new TypeError("maxAge must be a number");this[Wy]=e.maxAge||0;this[ev]=e.dispose;
this[i1]=e.noDisposeOnSet||!1;this[j1]=e.updateAgeOnGet||!1;this.reset()};wm.prototype.rforEach=function(e,h){h=h||this;for(var n=this[bm].tail;null!==n;){var b=n.prev;k1(this,e,n,h);n=b}};wm.prototype.forEach=function(e,h){h=h||this;for(var n=this[bm].head;null!==n;){var b=n.next;k1(this,e,n,h);n=b}};wm.prototype.keys=function(){return this[bm].toArray().map(function(e){return e.key})};wm.prototype.values=function(){return this[bm].toArray().map(function(e){return e.value})};wm.prototype.reset=function(){var e=
this;this[ev]&&this[bm]&&this[bm].length&&this[bm].forEach(function(h){return e[ev](h.key,h.value)});this[Sr]=new Map;this[bm]=new jea;this[op]=0};wm.prototype.dump=function(){var e=this;return this[bm].map(function(h){return QI(e,h)?!1:{k:h.key,v:h.value,e:h.now+(h.maxAge||0)}}).toArray().filter(function(h){return h})};wm.prototype.dumpLru=function(){return this[bm]};wm.prototype.set=function(e,h,n){if((n=n||this[Wy])&&"number"!==typeof n)throw new TypeError("maxAge must be a number");var b=n?Date.now():
0,c=this[oB](h,e);if(this[Sr].has(e)){if(c>this[Vy])return pB(this,this[Sr].get(e)),!1;var l=this[Sr].get(e).value;if(this[ev]&&!this[i1])this[ev](e,l.value);l.now=b;l.maxAge=n;l.value=h;this[op]+=c-l.length;l.length=c;this.get(e);YD(this);return!0}n=new kea(e,h,c,b,n);if(n.length>this[Vy]){if(this[ev])this[ev](e,h);return!1}this[op]+=n.length;this[bm].unshift(n);this[Sr].set(e,this[bm].head);YD(this);return!0};wm.prototype.has=function(e){if(!this[Sr].has(e))return!1;e=this[Sr].get(e).value;return!QI(this,
e)};wm.prototype.get=function(e){return HP(this,e,!0)};wm.prototype.peek=function(e){return HP(this,e,!1)};wm.prototype.pop=function(){var e=this[bm].tail;if(!e)return null;pB(this,e);return e.value};wm.prototype.del=function(e){pB(this,this[Sr].get(e))};wm.prototype.load=function(e){this.reset();for(var h=Date.now(),n=e.length-1;0<=n;n--){var b=e[n],c=b.e||0;0===c?this.set(b.k,b.v):(c-=h,0<c&&this.set(b.k,b.v,c))}};wm.prototype.prune=function(){var e=this;this[Sr].forEach(function(h,n){return HP(e,
n,!1)})};$jscomp.global.Object.defineProperties(wm.prototype,{max:{configurable:!0,enumerable:!0,set:function(e){if("number"!==typeof e||0>e)throw new TypeError("max must be a non-negative number");this[Vy]=e||Infinity;YD(this)},get:function(){return this[Vy]}},allowStale:{configurable:!0,enumerable:!0,set:function(e){this[XD]=!!e},get:function(){return this[XD]}},maxAge:{configurable:!0,enumerable:!0,set:function(e){if("number"!==typeof e)throw new TypeError("maxAge must be a non-negative number");
this[Wy]=e;YD(this)},get:function(){return this[Wy]}},lengthCalculator:{configurable:!0,enumerable:!0,set:function(e){var h=this;"function"!==typeof e&&(e=GP);e!==this[oB]&&(this[oB]=e,this[op]=0,this[bm].forEach(function(n){n.length=h[oB](n.value,n.key);h[op]+=n.length}));YD(this)},get:function(){return this[oB]}},length:{configurable:!0,enumerable:!0,get:function(){return this[op]}},itemCount:{configurable:!0,enumerable:!0,get:function(){return this[bm].length}}});var HP=function(e,h,n){if(h=e[Sr].get(h)){var b=
h.value;if(QI(e,b)){if(pB(e,h),!e[XD])return}else n&&(e[j1]&&(h.value.now=Date.now()),e[bm].unshiftNode(h));return b.value}},QI=function(e,h){if(!h||!h.maxAge&&!e[Wy])return!1;var n=Date.now()-h.now;return h.maxAge?n>h.maxAge:e[Wy]&&n>e[Wy]},YD=function(e){if(e[op]>e[Vy])for(var h=e[bm].tail;e[op]>e[Vy]&&null!==h;){var n=h.prev;pB(e,h);h=n}},pB=function(e,h){if(h){var n=h.value;if(e[ev])e[ev](n.key,n.value);e[op]-=n.length;e[Sr].delete(n.key);e[bm].removeNode(h)}},kea=function(e,h,n,b,c){this.key=
e;this.value=h;this.length=n;this.now=b;this.maxAge=c||0},k1=function(e,h,n,b){var c=n.value;QI(e,c)&&(pB(e,n),e[XD]||(c=void 0));c&&h.call(b,c.value,c.key,e)},X5=iea=wm,lL={},jT=!1,mL={},kT=!1,mT={},lT=!1,oT={},nT=!1,qT={},pT=!1,sT={},rT=!1,uT={},tT=!1,wT={},vT=!1,yT={},xT=!1,AT={},zT=!1,CT={},BT=!1,ET={},DT=!1,GT={},FT=!1,IT={},HT=!1,KT={},JT=!1,MT={},LT=!1,OT={},NT=!1,QT={},PT=!1,ST={},RT=!1,l1={},m1=!1,ZD=function(){if(m1)return l1;m1=!0;var e=Yv();return l1={re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:fo().SEMVER_SPEC_VERSION,
SemVer:Ml(),compareIdentifiers:Hx().compareIdentifiers,rcompareIdentifiers:Hx().rcompareIdentifiers,parse:Zv(),valid:kL(),clean:Zg(),inc:oF(),diff:go(),major:vn(),minor:kC(),patch:oL(),prerelease:Xz(),compare:Vo(),rcompare:Lb(),compareLoose:pL(),compareBuild:pm(),sort:Jx(),rsort:$v(),gt:aw(),lt:Sm(),eq:Oh(),neq:Ix(),gte:Yz(),lte:iC(),cmp:jC(),coerce:bw(),Comparator:Ui(),Range:ho(),satisfies:Wo(),toComparators:lC(),maxSatisfying:qm(),minSatisfying:Xo(),minVersion:ph(),validRange:nL(),outside:mC(),
gtr:Zz(),ltr:Ps(),intersects:qL(),simplifyRange:Kx(),subset:Lx()}}(),Xe=lively.FreezerRuntime.recorderFor("lively.serializer2/index.js");Xe.normalizeOptions=Nl;Xe.normalizeMigrations=function(e){e=void 0===e?[]:e;return{before:e.filter(function(h){return"function"===typeof h.snapshotConverter}),after:e.filter(function(h){return"function"===typeof h.objectConverter})}};Xe.runMigrations=function(e,h,n,b){for(var c=0;c<e.length;c++){var l=e[c];try{n=l[h](n,b)}catch(a){console.error("migration "+l.name+
" failed:"),console.error(a)}}return n};Xe.serialize=Vi;Xe.deserialize=Qs;Xe.deserializeWithMigrations=Mx;Xe.copy=Nx;Xe.ObjectPool=oi;Xe.serializerVersion="0.1.3";Xe.requiredModulesOfSnapshot=Tp;Xe.removeUnreachableObjects=rr;Xe.clearDanglingConnections=Tz;Xe.allPlugins=WD;Xe.semver=ZD;Xe.normalizeOptions=Nl;Xe.normalizeOptions=Nl;Xe.majorAndMinorVersionRe=/\.[^\.]+$/;Xe.ObjectRef=vq;Xe.ObjectRef=vq;Xe.ObjectPool=oi;Xe.ObjectPool=oi;Xe.requiredModulesOfSnapshot=Tp;Xe.requiredModulesOfSnapshot=Tp;
Xe.removeUnreachableObjects=rr;Xe.removeUnreachableObjects=rr;Xe.serialize=Vi;Xe.serialize=Vi;Xe.deserialize=Qs;Xe.deserialize=Qs;Xe.deserializeWithMigrations=Mx;Xe.deserializeWithMigrations=Mx;Xe.copy=Nx;Xe.copy=Nx;Xe.ExpressionSerializer=am;Xe.serializeSpec=om;Xe.deserializeSpec=hf;Xe.getSerializableClassMeta=Ls;Xe.locateClass=To;Xe.getClassName=Li;Xe.ExpressionSerializer=am;Xe.ExpressionSerializer=am;Xe.getSerializableClassMeta=Ls;Xe.getSerializableClassMeta=Ls;Xe.locateClass=To;Xe.locateClass=
To;Xe.serializeSpec=om;Xe.serializeSpec=om;Xe.deserializeSpec=hf;Xe.deserializeSpec=hf;Xe.getClassName=Li;Xe.getClassName=Li;var lea=Object.freeze({__proto__:null,normalizeOptions:Nl,ObjectRef:vq,ObjectPool:oi,requiredModulesOfSnapshot:Tp,removeUnreachableObjects:rr,serialize:Vi,deserialize:Qs,deserializeWithMigrations:Mx,copy:Nx,ExpressionSerializer:am,getSerializableClassMeta:Ls,locateClass:To,serializeSpec:om,deserializeSpec:hf,getClassName:Li}),mea={},Y5=Object.prototype.toString,IP=mea=Array.isArray||
pF,nea={},$D=nea="2",rL="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,n1={};kf.NONE=0;kf.VTEXT=1;kf.VNODE=2;kf.WIDGET=3;kf.PROPS=4;kf.ORDER=5;kf.INSERT=6;kf.REMOVE=7;kf.THUNK=8;n1=kf;kf.prototype.version=$D;kf.prototype.type="VirtualPatch";var fv=n1,oea={},aE=oea=function(e){return e&&"VirtualNode"===e.type&&e.version===$D},pea={},RI=pea=function(e){return e&&"VirtualText"===e.type&&e.version===$D},qea={},Qw=qea=function(e){return e&&"Widget"===e.type},rea={},bE=
rea=function(e){return e&&"Thunk"===e.type},sea={},Z5=aE,$5=RI,a6=Qw,o1=sea=function(e,h){var n=e,b=h;bE(h)&&(b=Vp(h,e));bE(e)&&(n=Vp(e,null));return{a:n,b:b}},tea={},SI=tea=function(e){return"object"===typeof e&&null!==e},uea={},cE=uea=function(e){return e&&("function"===typeof e.hook&&!e.hasOwnProperty("hook")||"function"===typeof e.unhook&&!e.hasOwnProperty("unhook"))},p1={},TT=SI,b6=cE;p1=Ox;var q1={},e6=IP,Lj=fv,Qx=aE,UT=RI,rF=Qw,qF=bE,d6=o1,c6=p1;q1=nC;var vea={},wea=vea=q1,xea=Object.freeze({}),
r1="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,yea={},s1="undefined"!==typeof r1?r1:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var JP=document;else(JP=s1["__GLOBAL_DOCUMENT_CACHE@4"])||(JP=s1["__GLOBAL_DOCUMENT_CACHE@4"]=xea);var t1=yea=JP,zea={},VT=cE,u1=zea=function(e,h,n){for(var b in h){var c=h[b];if(void 0===c)pC(e,b,c,n);else if(VT(c))pC(e,b,c,n),c.hook&&c.hook(e,b,n?n[b]:void 0);else if(SI(c)){var l=void 0,a=void 0,f=e,m=b,q=
n?n[m]:void 0;if("attributes"===m)for(a in c)l=c[a],void 0===l?f.removeAttribute(a):f.setAttribute(a,l);else if(q&&SI(q)&&tF(q)!==tF(c))f[m]=c;else for(l in SI(f[m])||(f[m]={}),a="style"===m?"":void 0,c)q=c[l],f[m][l]=void 0===q?a:q}else e[b]=c}},Aea={},WT=t1,j6=u1,i6=aE,h6=RI,g6=Qw,f6=o1,v1=Aea=uF,Bea={},Cea=Bea=function(e,h){return Qw(e)&&Qw(h)?"name"in e&&"name"in h?e.id===h.id:e.init===h.init:!1},Dea={},k6={},Eea=Dea=function(e,h,n,b){return n&&0!==n.length?(n.sort(Tm),Pk(e,h,n,b,0)):{}},w1={},
l6=Qw;w1=function(e,h,n){var b=e.vNode,c=e.patch;switch(e.type){case fv.REMOVE:return(c=h.parentNode)&&c.removeChild(h),Rs(h,b),null;case fv.INSERT:return c=n.render(c,n),h&&h.appendChild(c),h;case fv.VTEXT:return 3===h.nodeType?(h.replaceData(0,h.length,c.text),c=h):(b=h.parentNode,c=n.render(c,n),b&&c!==h&&b.replaceChild(c,h)),c;case fv.WIDGET:return c=(e=Cea(b,c))?c.update(b,h)||h:n.render(c,n),(n=h.parentNode)&&c!==h&&n.replaceChild(c,h),e||Rs(h,b),c;case fv.VNODE:return b=h.parentNode,c=n.render(c,
n),b&&c!==h&&b.replaceChild(c,h),c;case fv.ORDER:b=h.childNodes;n={};for(var l,a=0;a<c.removes.length;a++)l=c.removes[a],e=b[l.from],l.key&&(n[l.key]=e),h.removeChild(e);a=b.length;for(var f=0;f<c.inserts.length;f++)l=c.inserts[f],e=n[l.key],h.insertBefore(e,l.to>=a++?null:b[l.to]);return h;case fv.PROPS:return u1(h,c,b.properties),h;case fv.THUNK:return c=n.patch(h,c,n),h&&c&&h!==c&&h.parentNode&&h.parentNode.replaceChild(c,h),c;default:return h}};var x1={},o6=t1,p6=IP,m6=v1,n6=Eea,XT=w1;x1=wF;var Fea=
{},Gea=Fea=x1,Ss="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,y1={},t6=aE,u6=Qw,v6=bE,s6=cE;y1=aA;var q6={},r6=[];aA.prototype.version=$D;aA.prototype.type="VirtualNode";var KP=y1,w6="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,z1={};z1=qC;qC.prototype.version=$D;qC.prototype.type="VirtualText";var LP=z1,A1={};A1=function(e){var h=String.prototype.split,n=/()??/.exec("")[1]===e;return function(b,c,l){if("[object RegExp]"!==Object.prototype.toString.call(c))return h.call(b,
c,l);var a=[],f=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.extended?"x":"")+(c.sticky?"y":""),m=0;c=new RegExp(c.source,f+"g");var q,r;b+="";n||(q=new RegExp("^"+c.source+"$(?!\\s)",f));for(l=l===e?4294967295:l>>>0;r=c.exec(b);){f=r.index+r[0].length;if(f>m){a.push(b.slice(m,r.index));!n&&1<r.length&&r[0].replace(q,function(){for(var v=1;v<arguments.length-2;v++)arguments[v]===e&&(r[v]=e)});1<r.length&&r.index<b.length&&Array.prototype.push.apply(a,r.slice(1));var u=r[0].length;m=f;if(a.length>=
l)break}c.lastIndex===r.index&&c.lastIndex++}m===b.length?(u||!c.test(""))&&a.push(""):a.push(b.slice(m));return a.length>l?a.slice(0,l):a}}();var Hea={},Iea=A1,Jea=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,Kea=/^\.|#/,Lea=Hea=function(e,h){if(!e)return"DIV";var n=!h.hasOwnProperty("id");e=Iea(e,Jea);var b=null;Kea.test(e[1])&&(b="DIV");var c,l;for(l=0;l<e.length;l++)if(c=e[l]){var a=c.charAt(0);if(b)if("."===a){var f=f||[];f.push(c.substring(1,c.length))}else"#"===a&&n&&(h.id=c.substring(1,c.length));
else b=c}f&&(h.className&&f.push(h.className),h.className=f.join(" "));return h.namespace?b:b.toUpperCase()},B1={};B1=bA;bA.prototype.hook=function(e,h){e[h]!==this.value&&(e[h]=this.value)};var Mea=B1,C1="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,D1={},MP="undefined"!==typeof window?window:"undefined"!==typeof C1?C1:{};D1=function(e,h){return e in MP?MP[e]:MP[e]=h};var E1={},F1=D1;E1=function(e,h,n){var b="__INDIVIDUAL_ONE_VERSION_"+e,c=F1(b+"_ENFORCE_SINGLETON",
h);if(c!==h)throw Error("Can only have one copy of "+e+".\nYou already have version "+c+" installed.\nThis means you cannot install version "+h);return F1(b,n)};var G1={};E1("ev-store","7");G1=function(e){var h=e["__EV_STORE_KEY@7"];h||(h=e["__EV_STORE_KEY@7"]={});return h};var H1={},I1=G1;H1=Rx;Rx.prototype.hook=function(e,h){e=I1(e);h=h.substr(3);e[h]=this.value};Rx.prototype.unhook=function(e,h){e=I1(e);h=h.substr(3);e[h]=void 0};var J1={},ZT=IP,YT=LP,x6=aE,y6=RI,z6=Qw,A6=bE,Nea=H1;J1=function(e,
h,n){var b=[],c;if(c=!n)c="string"===typeof h||ZT(h)||xF(h);if(c){n=h;var l={}}l=l||h||{};e=Lea(e,l);if(l.hasOwnProperty("key")){var a=l.key;l.key=void 0}if(l.hasOwnProperty("namespace")){var f=l.namespace;l.namespace=void 0}"INPUT"!==e||f||!l.hasOwnProperty("value")||void 0===l.value||cE(l.value)||(l.value=Mea(l.value));h=l;for(var m in h)h.hasOwnProperty(m)&&(c=h[m],cE(c)||"ev-"===m.substr(0,3)&&(h[m]=Nea(c)));void 0!==n&&null!==n&&rC(n,b,e,l);return new KP(e,l,b,a,f)};var Oea={},Pea=Oea=J1,K1=
{};K1=v1;var Qea={},dE=Qea={diff:wea,patch:Gea,h:Pea,create:K1,VNode:KP,VText:LP},Rea={},Sea=Rea={abbr:"abbr",accept:"accept","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",alt:"alt",async:"async",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charset",checked:"checked",cite:"cite","class":"className",
cols:"cols",colspan:"colSpan",command:"command",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",coords:"coords",crossorigin:"crossOrigin",data:"data",datetime:"dateTime","default":"default",defer:"defer",dir:"dir",disabled:"disabled",download:"download",draggable:"draggable",dropzone:"dropzone",enctype:"encType","for":"htmlFor",form:"form",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",
frameBorder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang","http-equiv":"httpEquiv",icon:"icon",id:"id",inputmode:"inputMode",ismap:"isMap",itemid:"itemId",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",manifest:"manifest",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",
muted:"muted",name:"name",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",ping:"ping",placeholder:"placeholder",poster:"poster",preload:"preload",radiogroup:"radioGroup",readonly:"readOnly",rel:"rel",required:"required",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",sortable:"sortable",span:"span",spellcheck:"spellCheck",src:"src",
srcdoc:"srcDoc",srcset:"srcSet",start:"start",step:"step",style:"style",tabindex:"tabIndex",target:"target",title:"title",translate:"translate",type:"type",typemustmatch:"typeMustMatch",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap"},L1={};L1={about:null,"accent-height":null,accumulate:null,additive:null,"alignment-baseline":null,alphabetic:null,amplitude:null,"arabic-form":null,ascent:null,attributeName:null,attributeType:null,azimuth:null,bandwidth:null,baseFrequency:null,
baseProfile:null,"baseline-shift":null,bbox:null,begin:null,bias:null,by:null,calcMode:null,"cap-height":null,"class":null,clip:null,"clip-path":null,"clip-rule":null,clipPathUnits:null,color:null,"color-interpolation":null,"color-interpolation-filters":null,"color-profile":null,"color-rendering":null,content:null,contentScriptType:null,contentStyleType:null,cursor:null,cx:null,cy:null,d:null,datatype:null,defaultAction:null,descent:null,diffuseConstant:null,direction:null,display:null,divisor:null,
"dominant-baseline":null,dur:null,dx:null,dy:null,edgeMode:null,editable:null,elevation:null,"enable-background":null,end:null,"ev:event":"http://www.w3.org/2001/xml-events",event:null,exponent:null,externalResourcesRequired:null,fill:null,"fill-opacity":null,"fill-rule":null,filter:null,filterRes:null,filterUnits:null,"flood-color":null,"flood-opacity":null,focusHighlight:null,focusable:null,"font-family":null,"font-size":null,"font-size-adjust":null,"font-stretch":null,"font-style":null,"font-variant":null,
"font-weight":null,format:null,from:null,fx:null,fy:null,g1:null,g2:null,"glyph-name":null,"glyph-orientation-horizontal":null,"glyph-orientation-vertical":null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:null,height:null,"horiz-adv-x":null,"horiz-origin-x":null,"horiz-origin-y":null,id:null,ideographic:null,"image-rendering":null,"in":null,in2:null,initialVisibility:null,intercept:null,k:null,k1:null,k2:null,k3:null,k4:null,kernelMatrix:null,kernelUnitLength:null,
kerning:null,keyPoints:null,keySplines:null,keyTimes:null,lang:null,lengthAdjust:null,"letter-spacing":null,"lighting-color":null,limitingConeAngle:null,local:null,"marker-end":null,"marker-mid":null,"marker-start":null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:null,mediaTime:null,method:null,min:null,mode:null,name:null,"nav-down":null,"nav-down-left":null,
"nav-down-right":null,"nav-left":null,"nav-next":null,"nav-prev":null,"nav-right":null,"nav-up":null,"nav-up-left":null,"nav-up-right":null,numOctaves:null,observer:null,offset:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,"overline-position":null,"overline-thickness":null,"panose-1":null,path:null,pathLength:null,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,playbackOrder:null,"pointer-events":null,points:null,
pointsAtX:null,pointsAtY:null,pointsAtZ:null,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:null,r:null,radius:null,refX:null,refY:null,rel:null,"rendering-intent":null,repeatCount:null,repeatDur:null,requiredExtensions:null,requiredFeatures:null,requiredFonts:null,requiredFormats:null,resource:null,restart:null,result:null,rev:null,role:null,rotate:null,rx:null,ry:null,scale:null,seed:null,"shape-rendering":null,slope:null,snapshotTime:null,spacing:null,specularConstant:null,
specularExponent:null,spreadMethod:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,"stop-color":null,"stop-opacity":null,"strikethrough-position":null,"strikethrough-thickness":null,string:null,stroke:null,"stroke-dasharray":null,"stroke-dashoffset":null,"stroke-linecap":null,"stroke-linejoin":null,"stroke-miterlimit":null,"stroke-opacity":null,"stroke-width":null,surfaceScale:null,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,
systemLanguage:null,tableValues:null,target:null,targetX:null,targetY:null,"text-anchor":null,"text-decoration":null,"text-rendering":null,textLength:null,timelineBegin:null,title:null,to:null,transform:null,transformBehavior:null,type:null,"typeof":null,u1:null,u2:null,"underline-position":null,"underline-thickness":null,unicode:null,"unicode-bidi":null,"unicode-range":null,"units-per-em":null,"v-alphabetic":null,"v-hanging":null,"v-ideographic":null,"v-mathematical":null,values:null,version:null,
"vert-adv-y":null,"vert-origin-x":null,"vert-origin-y":null,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,"word-spacing":null,"writing-mode":null,x:null,"x-height":null,x1:null,x2:null,xChannelSelector:null,"xlink:actuate":"http://www.w3.org/1999/xlink","xlink:arcrole":"http://www.w3.org/1999/xlink","xlink:href":"http://www.w3.org/1999/xlink","xlink:role":"http://www.w3.org/1999/xlink","xlink:show":"http://www.w3.org/1999/xlink","xlink:title":"http://www.w3.org/1999/xlink","xlink:type":"http://www.w3.org/1999/xlink",
"xml:base":"http://www.w3.org/XML/1998/namespace","xml:id":"http://www.w3.org/XML/1998/namespace","xml:lang":"http://www.w3.org/XML/1998/namespace","xml:space":"http://www.w3.org/XML/1998/namespace",y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null};var Tea={},C6=KP,$T=LP,NP,aU=Sea,B6=L1,Uea=Tea=function(e,h){if(!e)return tC(document.createTextNode(""));if("string"===typeof e){if(!("DOMParser"in window))throw Error("DOMParser is not available, so parsing string to DOM node is not possible.");
NP=NP||new DOMParser;e=NP.parseFromString(e,"text/html");e=e.body.firstChild?e.getElementsByTagName("body")[0].firstChild:e.head.firstChild&&("TITLE"!==e.head.firstChild.tagName||e.title)?e.head.firstChild:e.firstChild&&"HTML"!==e.firstChild.tagName?e.firstChild:document.createTextNode("")}if("object"!==typeof e||!e||!e.nodeType)throw Error("invalid dom node",e);return tC(e,h)},qh=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/property-dom-mapping.js");qh.styleProps=Sx;qh.addTransform=
uC;qh.addTransformOrigin=function(e,h){if(e=e.origin)h.transformOrigin=e.x+"px "+e.y+"px"};qh.addDisplay=function(e,h){e=e.visible;null!=e&&(h.display=e?"":"none")};qh.addBorderRadius=function(e,h){var n=e.borderRadiusLeft,b=e.borderRadiusRight,c=e.borderRadiusBottom;e=e.borderRadiusTop;h.borderRadius=e+"px "+e+"px "+c+"px "+c+"px / "+n+"px "+b+"px "+b+"px "+n+"px"};qh.addBorder=function(e,h){var n=e.borderWidthLeft,b=e.borderColorLeft,c=e.borderStyleLeft,l=e.borderWidthRight,a=e.borderColorRight,
f=e.borderStyleRight,m=e.borderColor,q=e.borderWidthBottom,r=e.borderColorBottom,u=e.borderStyleBottom,v=e.borderWidthTop,y=e.borderColorTop;e=e.borderStyleTop;var z=function(A){return qh.bowser.safari?qh.string.camelize(A):A};h[z("border-left-style")]=""+c;h[z("border-right-style")]=""+f;h[z("border-bottom-style")]=""+u;h[z("border-top-style")]=""+e;h[z("border-left-width")]=n+"px";h[z("border-right-width")]=l+"px";h[z("border-bottom-width")]=q+"px";h[z("border-top-width")]=v+"px";h[z("border-top-color")]=
y?y.toString():"transparent";h[z("border-right-color")]=a?a.toString():"transparent";h[z("border-bottom-color")]=r?r.toString():"transparent";h[z("border-left-color")]=b?b.toString():"transparent";m&&m.isGradient&&(h["border-image"]=m.toString())};qh.addFill=function(e,h){(e=e.fill)?e.isGradient?h.backgroundImage=e.toString():h.background=e.toString():h.background=qh.Color.transparent.toString()};qh.addExtentStyle=function(e,h){e=e.extent;h.width=e.x+"px";h.height=e.y+"px"};qh.shadowCss=function(e){return e.dropShadow?
e.dropShadow.toFilterCss():""};qh.addShadowStyle=function(e,h){e.isSvgMorph||e.isImage?h.filter=qh.shadowCss(e):(e=e.dropShadow)&&e.fast||e&&e.inset?h.boxShadow=e?e.toCss():"none":h.filter=e?e.toFilterCss():""};qh.addSvgAttributes=Tx;qh.getSvgVertices=sr;qh.addPathAttributes=cw;qh.addSvgBorderStyle=function(e,h){var n=e.borderStyle.valueOf();"dashed"===n?(e=e.borderWidth.valueOf(),h["stroke-dasharray"]=1.61*e+" "+e):"dotted"===n&&(h["stroke-dasharray"]="1 "+2*e.borderWidth.valueOf(),h["stroke-linecap"]=
"round",h["stroke-linejoin"]="round");return h};qh.Color=wf;qh.string=Hg;qh.bowser=tq;qh.styleProps=Sx;qh.styleProps=Sx;qh.addTransform=uC;qh.addTransform=uC;qh.addSvgAttributes=Tx;qh.addSvgAttributes=Tx;qh.getSvgVertices=sr;qh.getSvgVertices=sr;qh.addPathAttributes=cw;qh.addPathAttributes=cw;var Zd=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js");Zd.defaultStyle=dw;Zd.MorphAfterRenderHook=function(e,h){this.morph=e;this.renderer=h};Zd.Animation=function(e){this.morph=
e};Zd.SvgAnimation=Eu;Zd.defaultAttributes=gi;Zd.svgAttributes=cA;Zd.pathAttributes=Ux;Zd.renderGradient=dA;Zd.initDOMState=function(e,h){e.rootNode.appendChild(e.domNode);e.ensureDefaultCSS().then(function(){return Zd.promise.delay(500)}).then(function(){return h.env.fontMetric&&h.env.fontMetric.reset()}).then(function(){return h.withAllSubmorphsDo(function(n){if(n.isText||n.isLabel){var b=(n.metadata||{}).serializationInfo;b&&b.recoveredTextBounds||n.forceRerender()}})}).catch(function(n){return console.error(n)})};
Zd.renderMorph=Vx;Zd.renderSubTree=Di;Zd.renderRootMorph=Rd;Zd.vdom=dE;Zd.parser=Uea;Zd.num=wk;Zd.obj=lf;Zd.arr=Te;Zd.properties=mp;Zd.promise=Kf;Zd.Color=wf;Zd.RadialGradient=Cn;Zd.pt=fh;Zd.Point=Bf;Zd.LinearGradient=Al;Zd.rect=Gk;Zd.config=nk;Zd.styleProps=Sx;Zd.addSvgAttributes=Tx;Zd.addPathAttributes=cw;Zd.bowser=tq;var TI=Zd.vdom;Zd.h=TI.h;Zd.diff=TI.diff;Zd.patch=TI.patch;Zd.createNode=TI.create;Zd.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
Zd.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
Zd.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
var wq=ya("bj",function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js"),n=h.hasOwnProperty("ShadowObject")&&"function"===typeof h.ShadowObject?h.ShadowObject:h.ShadowObject=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Zd.obj.isBoolean(b)&&(b=Zd.config.defaultShadow);var c=b;b=c.rotation;var l=c.distance,
a=c.blur,f=c.color,m=c.morph,q=c.inset,r=c.spread;c=c.fast;this.rotation=Zd.obj.isNumber(b)?b:45;this.distance=Zd.obj.isNumber(l)?l:2;this.blur=Zd.obj.isNumber(a)?a:6;this.inset=q||!1;this.spread=r||0;this.color=f||Zd.Color.gray.darker();this.morph=m;this.fast=c}},{key:"__dont_serialize__",get:function(){return["morph"]}},{key:"distance",get:function(){return this._distance}},{key:"blur",get:function(){return this._blur}},{key:"rotation",get:function(){return this._rotation}},{key:"color",get:function(){return this._color}},
{key:"inset",get:function(){return this._inset}},{key:"inset",set:function(b){this._inset=b;this.morph&&(this.morph.dropShadow=this)}},{key:"distance",set:function(b){this._distance=b;this.morph&&(this.morph.dropShadow=this)}},{key:"blur",set:function(b){this._blur=b;this.morph&&(this.morph.dropShadow=this)}},{key:"rotation",set:function(b){this._rotation=b;this.morph&&(this.morph.dropShadow=this)}},{key:"color",set:function(b){this._color=b;this.morph&&(this.morph.dropShadow=this)}},{key:"isShadowObject",
get:function(){return!0}},{key:"__serialize__",value:function(){var b=this.toJson(),c=b.distance,l=b.rotation,a=b.color,f=b.inset,m=b.blur,q=b.spread;b=b.fast;a=a.toJSExpr();return{__expr__:"new ShadowObject({"+Object.entries({distance:c,rotation:l,color:a,inset:f,blur:m,spread:q,fast:b}).map(function(r){var u=$jscomp.makeIterator(r);r=u.next().value;u=u.next().value;return r+":"+u})+"})",bindings:{"lively.graphics/color.js":["Color"],"lively.morphic":["ShadowObject"]}}}},{key:"with",value:function(b){return new Zd.ShadowObject(Object.assign({distance:this.distance,
rotation:this.rotation,color:this.color,inset:this.inset,blur:this.blur,spread:this.spread,fast:this.fast},b))}},{key:"toCss",value:function(){var b=this.color,c=this.inset,l=this.blur,a=this.spread,f=Zd.Point.polar(this.distance,Zd.num.toRadians(this.rotation)),m=f.y;return(c?"inset":"")+" "+b.toString()+" "+f.x.toFixed(2)+"px "+m.toFixed(2)+"px "+l+"px "+a+"px"}},{key:"toJson",value:function(){return Zd.obj.select(this,"rotation distance blur color inset spread fast".split(" "))}},{key:"equals",
value:function(b){return!!b&&Zd.obj.equals(this.toJson(),b.toJson())}},{key:"toFilterCss",value:function(){var b=this.blur,c=this.color,l=Zd.Point.polar(this.distance,Zd.num.toRadians(this.rotation)),a=l.x;l=l.y;b=Zd.bowser.chrome?b/3:b/2;return"drop-shadow("+a.toFixed(2)+"px "+l.toFixed(2)+"px "+b.toFixed(2)+"px "+c.toString()+")"}},{key:"interpolate",value:function(b,c){return new Zd.ShadowObject({distance:Zd.num.interpolate(b,this.distance,c.distance),rotation:Zd.num.interpolate(b,this.rotation,
c.rotation),color:this.color.interpolate(b,c.color),blur:Zd.num.interpolate(b,this.blur,c.blur),spread:Zd.num.interpolate(b,this.spread,c.spread),inset:c.inset,fast:c.fast})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowObject"}}],h,{pathInPackage:function(){return"rendering/morphic-default.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:3438,end:7097})}(void 0));Zd.ShadowObject=wq;Zd.ShadowObject=wq;Zd.ShadowObject=wq;Zd.defaultStyle=dw;Zd.defaultStyle=dw;Zd.MorphAfterRenderHook.prototype.hook=function(e,h,n,b){var c=this;b=void 0===b?0:b;var l=!!e.parentNode;l&&(this.morph._submorphOrderChanged&&this.morph.submorphs.length?(this.morph._submorphOrderChanged=!1,this.updateScrollOfSubmorphs(this.morph,this.renderer)):this.morph.isClip()&&this.updateScroll(this.morph,e));l||3<b?(this.morph._rendering=!1,this.morph.onAfterRender(e)):
(b++,setTimeout(function(){return c.hook(e,h,n,b)},20*b))};Zd.MorphAfterRenderHook.prototype.updateScroll=function(e,h,n){var b=this,c=e.env.eventDispatcher.eventState.scroll.interactiveScrollInProgress;if(h&&c)return c.then(function(){return b.updateScroll(e,h,!0)});if(!e.isWorld&&h){c=e.scroll;var l=c.x,a=c.y;if(!e._animationQueue.animations.find(function(m){return m.animatedProps.scroll})){var f=e.isText&&e.viewState.fastScroll?h.querySelector(".scrollLayer"):h;!e._skipScrollUpdate&&f&&(f.scrollTop!==
a&&(f.scrollTop=a),f.scrollLeft!==l&&(f.scrollLeft=l),!n&&requestAnimationFrame(function(){f.scrollTop!==a&&(f.scrollTop=a);f.scrollLeft!==l&&(f.scrollLeft=l)},e.id))}}};Zd.MorphAfterRenderHook.prototype.unhook=function(e,h){};Zd.MorphAfterRenderHook.prototype.updateScrollOfSubmorphs=function(e,h){var n=this;e.submorphs.forEach(function(b){b.isClip()&&n.updateScroll(b,h.getNodeForMorph(b));n.updateScrollOfSubmorphs(b,h)})};Zd.Animation.prototype.hook=function(e){this.morph._animationQueue.startAnimationsFor(e)};
Zd.SvgAnimation=Eu;Zd.SvgAnimation=Eu;Zd.SvgAnimation.prototype.hook=function(e){this.morph._animationQueue.startSvgAnimationsFor(e,this.type)};Zd.defaultAttributes=gi;Zd.defaultAttributes=gi;Zd.svgAttributes=cA;Zd.svgAttributes=cA;Zd.pathAttributes=Ux;Zd.pathAttributes=Ux;Zd.renderGradient=dA;Zd.renderGradient=dA;Zd.renderMorph=Vx;Zd.renderMorph=Vx;Zd.renderSubTree=Di;Zd.renderSubTree=Di;Zd.renderRootMorph=Rd;Zd.renderRootMorph=Rd;var kc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,OP={};!function(e,h){h(OP)}(OP,function(e){function h(fa){return 10===fa||13===fa||8232===fa||8233===fa||32===fa||9===fa||11===fa||12===fa||160===fa||5760<=fa&&0<=Rw.indexOf(fa)}function n(fa){return 48<=fa&&57>=fa}function b(fa){(this||kc).index=0;(this||kc).path=fa;(this||kc).max=fa.length;(this||kc).result=[];(this||kc).param=0;(this||kc).err="";(this||kc).segmentStart=0;(this||kc).data=[]}function c(fa){for(;fa.index<fa.max&&h(fa.path.charCodeAt(fa.index));)fa.index++}function l(fa){var Ia,
xa=fa.index,Qa=xa,eb=fa.max,Mb=!1,Ua=!1,Fb=!1,zb=!1;if(Qa>=eb)return void(fa.err="SvgPath: missed param (at pos "+Qa+")");if(Ia=fa.path.charCodeAt(Qa),43!==Ia&&45!==Ia||(Qa++,Ia=Qa<eb?fa.path.charCodeAt(Qa):0),!n(Ia)&&46!==Ia)return void(fa.err="SvgPath: param should start with 0..9 or `.` (at pos "+Qa+")");if(46!==Ia){if(Mb=48===Ia,Qa++,Ia=Qa<eb?fa.path.charCodeAt(Qa):0,Mb&&Qa<eb&&Ia&&n(Ia))return void(fa.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+xa+")");for(;Qa<eb&&
n(fa.path.charCodeAt(Qa));)Qa++,Ua=!0;Ia=Qa<eb?fa.path.charCodeAt(Qa):0}if(46===Ia){zb=!0;for(Qa++;n(fa.path.charCodeAt(Qa));)Qa++,Fb=!0;Ia=Qa<eb?fa.path.charCodeAt(Qa):0}if(101===Ia||69===Ia){if(zb&&!Ua&&!Fb||(Qa++,Ia=Qa<eb?fa.path.charCodeAt(Qa):0,43!==Ia&&45!==Ia||Qa++,!(Qa<eb&&n(fa.path.charCodeAt(Qa)))))return void(fa.err="SvgPath: invalid float exponent (at pos "+Qa+")");for(;Qa<eb&&n(fa.path.charCodeAt(Qa));)Qa++}fa.index=Qa;fa.param=parseFloat(fa.path.slice(xa,Qa))+0}function a(){if(!((this||
kc)instanceof a))return new a;(this||kc).queue=[];(this||kc).cache=null}function f(fa,Ia,xa,Qa){var eb=(fa*xa+Ia*Qa)/(Math.sqrt(fa*fa+Ia*Ia)*Math.sqrt(fa*fa+Ia*Ia));return 1<eb&&(eb=1),-1>eb&&(eb=-1),(0>fa*Qa-Ia*xa?-1:1)*Math.acos(eb)}function m(fa,Ia,xa,Qa,eb,Mb,Ua,Fb,zb,zc){var Cb=zc*(fa-xa)/2+zb*(Ia-Qa)/2,nd=-zb*(fa-xa)/2+zc*(Ia-Qa)/2,Jd=Ua*Ua,Ke=Fb*Fb,Le=Cb*Cb,Vd=nd*nd,Me=Jd*Ke-Jd*Vd-Ke*Le;0>Me&&(Me=0);Me=Math.sqrt(Me/(Jd*Vd+Ke*Le))*(eb===Mb?-1:1);eb=Me*Ua/Fb*nd;Me=Me*-Fb/Ua*Cb;fa=zc*eb-zb*Me+
(fa+xa)/2;Ia=zb*eb+zc*Me+(Ia+Qa)/2;Qa=(Cb-eb)/Ua;zb=(nd-Me)/Fb;Ua=(-Cb-eb)/Ua;nd=(-nd-Me)/Fb;Fb=f(1,0,Qa,zb);nd=f(Qa,zb,Ua,nd);return 0===Mb&&0<nd&&(nd-=gv),1===Mb&&0>nd&&(nd+=gv),[fa,Ia,Fb,nd]}function q(fa,Ia){var xa=4/3*Math.tan(Ia/4),Qa=Math.cos(fa),eb=Math.sin(fa),Mb=Math.cos(fa+Ia);fa=Math.sin(fa+Ia);return[Qa,eb,Qa-eb*xa,eb+Qa*xa,Mb+fa*xa,fa-Mb*xa,Mb,fa]}function r(fa,Ia,xa){if(!((this||kc)instanceof r))return new r(fa,Ia,xa);(this||kc).rx=fa;(this||kc).ry=Ia;(this||kc).ax=xa}function u(fa){if(!((this||
kc)instanceof u))return new u(fa);fa=new b(fa);var Ia=fa.max;for(c(fa);fa.index<Ia&&!fa.err.length;)a:{var xa,Qa=void 0,eb=fa,Mb=eb.max;eb.segmentStart=eb.index;var Ua=eb.path.charCodeAt(eb.index);b:{switch(32|Ua){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:Ua=!0;break b}Ua=!1}if(Ua){if(Qa=uo[eb.path[eb.index].toLowerCase()],eb.index++,c(eb),eb.data=[],Qa)for(Ua=!1;;){for(xa=Qa;0<xa;xa--){if(l(eb),eb.err.length)break a;eb.data.push(eb.param);c(eb);
Ua=!1;eb.index<Mb&&44===eb.path.charCodeAt(eb.index)&&(eb.index++,c(eb),Ua=!0)}if(!Ua){if(eb.index>=eb.max)break;xa=eb.path.charCodeAt(eb.index);if(!(48<=xa&&57>=xa||43===xa||45===xa||46===xa))break}}Mb=eb;eb=Mb.path[Mb.segmentStart];Qa=eb.toLowerCase();Ua=Mb.data;if("m"===Qa&&2<Ua.length&&(Mb.result.push([eb,Ua[0],Ua[1]]),Ua=Ua.slice(2),Qa="l",eb="m"===eb?"l":"L"),"r"===Qa)Mb.result.push([eb].concat(Ua));else for(;Ua.length>=uo[Qa]&&(Mb.result.push([eb].concat(Ua.splice(0,uo[Qa]))),uo[Qa]););}else eb.err=
"SvgPath: bad command "+eb.path[eb.index]+" (at pos "+eb.index+")"}fa=(fa.err.length?fa.result=[]:fa.result.length&&(0>"mM".indexOf(fa.result[0][0])?(fa.err="SvgPath: string should start with `M` or `m`",fa.result=[]):fa.result[0][0]="M"),{err:fa.err,segments:fa.result});(this||kc).segments=fa.segments;(this||kc).err=fa.err;(this||kc).__stack=[]}function v(fa,Ia,xa,Qa,eb,Mb,Ua,Fb){(this||kc).a={x:fa,y:Ia};(this||kc).b={x:xa,y:Qa};(this||kc).c={x:eb,y:Mb};(this||kc).d={x:Ua,y:Fb};null!==Ua&&void 0!==
Ua&&null!==Fb&&void 0!==Fb?((this||kc).getArcLength=L,(this||kc).getPoint=G,(this||kc).getDerivative=z):((this||kc).getArcLength=F,(this||kc).getPoint=C,(this||kc).getDerivative=y);this.init()}function y(fa,Ia,xa){return{x:2*(1-xa)*(fa[1]-fa[0])+2*xa*(fa[2]-fa[1]),y:2*(1-xa)*(Ia[1]-Ia[0])+2*xa*(Ia[2]-Ia[1])}}function z(fa,Ia,xa){return C([3*(fa[1]-fa[0]),3*(fa[2]-fa[1]),3*(fa[3]-fa[2])],[3*(Ia[1]-Ia[0]),3*(Ia[2]-Ia[1]),3*(Ia[3]-Ia[2])],xa)}function A(fa,Ia,xa,Qa,eb){for(var Mb=1,Ua=fa/Ia,Fb=(fa-xa(Qa,
eb,Ua))/Ia;.001<Mb;){var zb=xa(Qa,eb,Ua+Fb),zc=xa(Qa,eb,Ua-Fb);zb=Math.abs(fa-zb)/Ia;zc=Math.abs(fa-zc)/Ia;zb<Mb?(Mb=zb,Ua+=Fb):zc<Mb?(Mb=zc,Ua-=Fb):Fb/=2}return Ua}function C(fa,Ia,xa){return{x:(1-xa)*(1-xa)*fa[0]+2*(1-xa)*xa*fa[1]+xa*xa*fa[2],y:(1-xa)*(1-xa)*Ia[0]+2*(1-xa)*xa*Ia[1]+xa*xa*Ia[2]}}function G(fa,Ia,xa){return{x:(1-xa)*(1-xa)*(1-xa)*fa[0]+3*(1-xa)*(1-xa)*xa*fa[1]+3*(1-xa)*xa*xa*fa[2]+xa*xa*xa*fa[3],y:(1-xa)*(1-xa)*(1-xa)*Ia[0]+3*(1-xa)*(1-xa)*xa*Ia[1]+3*(1-xa)*xa*xa*Ia[2]+xa*xa*xa*Ia[3]}}
function F(fa,Ia,xa){void 0===xa&&(xa=1);var Qa=fa[0]-2*fa[1]+fa[2],eb=Ia[0]-2*Ia[1]+Ia[2],Mb=2*fa[1]-2*fa[0],Ua=2*Ia[1]-2*Ia[0],Fb=4*(Qa*Qa+eb*eb);if(0===Fb)return xa*Math.sqrt(Math.pow(fa[2]-fa[0],2)+Math.pow(Ia[2]-Ia[0],2));fa=4*(Qa*Mb+eb*Ua)/(2*Fb);xa+=fa;Mb=(Mb*Mb+Ua*Ua)/Fb-fa*fa;return Math.sqrt(Fb)/2*(xa*Math.sqrt(xa*xa+Mb)-fa*Math.sqrt(fa*fa+Mb)+Mb*Math.log(Math.abs((xa+Math.sqrt(xa*xa+Mb))/(fa+Math.sqrt(fa*fa+Mb)))))}function N(fa,Ia,xa){var Qa,eb=xa.length-1;if(0===eb)return 0;if(0===fa){for(Qa=
fa=0;Qa<=eb;Qa++)fa+=Vea[eb][Qa]*Math.pow(1-Ia,eb-Qa)*Math.pow(Ia,Qa)*xa[Qa];return fa}var Mb=Array(eb);for(Qa=0;Qa<eb;Qa++)Mb[Qa]=eb*(xa[Qa+1]-xa[Qa]);return N(fa-1,Ia,Mb)}function L(fa,Ia,xa){var Qa,eb;void 0===xa&&(xa=1);xa/=2;for(eb=Qa=0;20>eb;eb++){var Mb=xa*Wea[20][eb]+xa;var Ua=Xea[20][eb],Fb=Ia,zb=Mb;Mb=N(1,zb,fa);Fb=N(1,zb,Fb);Qa+=Ua*Math.sqrt(Mb*Mb+Fb*Fb)}return xa*Qa}function W(fa,Ia,xa,Qa){var eb=fa*xa+Ia*Qa;return 1<eb&&(eb=1),-1>eb&&(eb=-1),(0>fa*Qa-Ia*xa?-1:1)*Math.acos(eb)}function la(fa,
Ia,xa,Qa,eb,Mb,Ua,Fb,zb,zc){var Cb=zc*(fa-xa)/2+zb*(Ia-Qa)/2,nd=-zb*(fa-xa)/2+zc*(Ia-Qa)/2,Jd=Ua*Ua,Ke=Fb*Fb,Le=Cb*Cb,Vd=nd*nd,Me=Jd*Ke-Jd*Vd-Ke*Le;0>Me&&(Me=0);Me=Math.sqrt(Me/(Jd*Vd+Ke*Le))*(eb===Mb?-1:1);eb=Me*Ua/Fb*nd;Me=Me*-Fb/Ua*Cb;fa=zc*eb-zb*Me+(fa+xa)/2;Ia=zb*eb+zc*Me+(Ia+Qa)/2;Qa=(Cb-eb)/Ua;zb=(nd-Me)/Fb;Ua=(-Cb-eb)/Ua;nd=(-nd-Me)/Fb;Fb=W(1,0,Qa,zb);nd=W(Qa,zb,Ua,nd);return 0===Mb&&0<nd&&(nd-=eE),1===Mb&&0>nd&&(nd+=eE),[fa,Ia,Fb,nd]}function wa(fa,Ia){var xa=4/3*Math.tan(Ia/4),Qa=Math.cos(fa),
eb=Math.sin(fa),Mb=Math.cos(fa+Ia);fa=Math.sin(fa+Ia);return[Qa,eb,Qa-eb*xa,eb+Qa*xa,Mb+fa*xa,fa-Mb*xa,Mb,fa]}function D(fa,Ia,xa,Qa,eb,Mb,Ua,Fb,zb){var zc=0,Cb=[],nd=[];Yea(fa,Ia,xa,Qa,eb,Mb,Ua,Fb,zb).forEach(function(Jd){Jd=new Tr(Jd[0],Jd[1],Jd[2],Jd[3],Jd[4],Jd[5],Jd[6],Jd[7]);var Ke=Jd.getTotalLength();zc+=Ke;Cb.push(Ke);nd.push(Jd)});(this||kc).length=zc;(this||kc).partialLengths=Cb;(this||kc).curves=nd}function Q(fa,Ia,xa,Qa){(this||kc).x0=fa;(this||kc).x1=Ia;(this||kc).y0=xa;(this||kc).y1=
Qa}function J(fa,Ia){return Math.sqrt((fa[0]-Ia[0])*(fa[0]-Ia[0])+(fa[1]-Ia[1])*(fa[1]-Ia[1]))}function O(fa,Ia,xa){return[fa[0]+(Ia[0]-fa[0])*xa,fa[1]+(Ia[1]-fa[1])*xa]}function ja(fa,Ia,xa){var Qa=fa.map(function(eb,Mb){return X(eb,Ia[Mb])});return function(eb){var Mb=Qa.map(function(Ua){return Ua(eb)});return xa?oa(Mb):Mb}}function X(fa,Ia){return function(xa){return fa.map(function(Qa,eb){return Qa+xa*(Ia[eb]-Qa)})}}function ha(fa){return"number"==typeof fa&&isFinite(fa)}function bb(fa){var Ia;
a:{for(Ia=0;Ia<fa.length-2;Ia++){var xa=fa[Ia],Qa=fa[Ia+1],eb=fa[Ia+2];if(xa[0]*(Qa[1]-eb[1])+Qa[0]*(eb[1]-xa[1])+eb[0]*(xa[1]-Qa[1])){Ia=!0;break a}}Ia=!1}if(Ia){eb=-1;var Mb=fa.length,Ua=0,Fb=0,zb=fa[Mb-1];for(Ia=0;++eb<Mb;)xa=zb,zb=fa[eb],Ia+=Qa=xa[0]*zb[1]-zb[0]*xa[1],Ua+=(xa[0]+zb[0])*Qa,Fb+=(xa[1]+zb[1])*Qa;fa=(Ia*=3,[Ua/Ia,Fb/Ia])}else fa=[(fa[0][0]+fa[fa.length-1][0])/2,(fa[0][1]+fa[fa.length-1][1])/2];return fa}function pb(fa){return fa.toString().split("M").map(function(Ia,xa){return Ia=
Ia.trim(),xa&&Ia?"M"+Ia:Ia}).filter(function(Ia){return Ia})}function oa(fa){return"M"+fa.join("L")+"Z"}function ba(fa,Ia){var xa=fa.length+Ia;Ia=pp(fa)/Ia;for(var Qa=0,eb=0,Mb=Ia/2;fa.length<xa;){var Ua=fa[Qa],Fb=fa[(Qa+1)%fa.length],zb=J(Ua,Fb);Mb<=eb+zb?(fa.splice(Qa+1,0,zb?O(Ua,Fb,(Mb-eb)/zb):Ua.slice(0)),Mb+=Ia):(eb+=zb,Qa++)}}function qa(fa,Ia){var xa;if("string"==typeof fa){fa=(new qB(fa)).abs();a:{var Qa=fa.segments||[];var eb=[];if(Qa.length&&"M"===Qa[0][0]){for(var Mb=0;Mb<Qa.length;Mb++){var Ua=
Qa[Mb],Fb=Ua[0],zb=Ua[1];Ua=Ua[2];if("M"===Fb&&Mb||"Z"===Fb)break;if("M"===Fb||"L"===Fb)eb.push([zb,Ua]);else if("H"===Fb)eb.push([zb,eb[eb.length-1][1]]);else{if("V"!==Fb){Qa=!1;break a}eb.push([eb[eb.length-1][0],zb])}}Qa=!!eb.length&&{ring:eb}}else Qa=!1}if(!Qa){eb=pb(fa)[0];fa=[];Qa=3;if(!eb)throw new TypeError(PP);a:{if("undefined"!=typeof window&&window&&window.document)try{var zc=window.document.createElementNS("http://www.w3.org/2000/svg","path");var Cb=(zc.setAttributeNS(null,"d",eb),zc);
break a}catch(nd){}Cb=Zea(eb)}zc=Cb;Cb=zc.getTotalLength();Ia&&ha(Ia)&&0<Ia&&(Qa=Math.max(Qa,Math.ceil(Cb/Ia)));for(eb=0;eb<Qa;eb++)Mb=zc.getPointAtLength(Cb*eb/Qa),fa.push([Mb.x,Mb.y]);Qa={ring:fa,skipBisect:!0}}Cb=Qa;fa=Cb.ring;Qa=Cb.skipBisect}else if(!Array.isArray(fa))throw new TypeError(PP);if(xa=fa.slice(0),!Ga(xa))throw new TypeError(PP);1<xa.length&&1E-9>J(xa[0],xa[xa.length-1])&&xa.pop();0<xq(xa)&&xa.reverse();if(!Qa&&Ia&&ha(Ia)&&0<Ia)for(void 0===Ia&&(Ia=1/0),Cb=0;Cb<xa.length;Cb++)for(zc=
xa[Cb],fa=Cb===xa.length-1?xa[0]:xa[Cb+1];J(zc,fa)>Ia;)fa=O(zc,fa,.5),xa.splice(Cb+1,0,fa);return xa}function Ga(fa){return fa.every(function(Ia){return Array.isArray(Ia)&&2<=Ia.length&&ha(Ia[0])&&ha(Ia[1])})}function ua(fa,Ia,xa){var Qa;return Qa=fa.length-Ia.length,ba(fa,0>Qa?-1*Qa:0),ba(Ia,0<Qa?Qa:0),$ea(fa,Ia),ja(fa,Ia,xa)}function H(fa,Ia,xa){xa=xa||2;var Qa=Ia&&Ia.length,eb=Qa?Ia[0]*xa:fa.length,Mb=M(fa,0,eb,xa,!0),Ua=[];if(!Mb)return Ua;var Fb;if(Qa){var zb=xa,zc;var Cb=[];Qa=0;for(zc=Ia.length;Qa<
zc;Qa++){var nd=Ia[Qa]*zb;var Jd=Qa<zc-1?Ia[Qa+1]*zb:fa.length;nd=M(fa,nd,Jd,zb,!1);nd===nd.next&&(nd.steiner=!0);Cb.push(S(nd))}Cb.sort(Z);for(Qa=0;Qa<Cb.length;Qa++){Ia=Cb[Qa];zb=Mb;if(zb=Aa(Ia,zb))Ia=mc(zb,Ia),R(Ia,Ia.next);Mb=R(Mb,Mb.next)}}if(fa.length>80*xa){var Ke=Fb=fa[0];var Le=Qa=fa[1];for(zb=xa;zb<eb;zb+=xa)Cb=fa[zb],Ia=fa[zb+1],Cb<Ke&&(Ke=Cb),Ia<Le&&(Le=Ia),Cb>Fb&&(Fb=Cb),Ia>Qa&&(Qa=Ia);Fb=Math.max(Fb-Ke,Qa-Le)}return ca(Mb,Ua,xa,Ke,Le,Fb),Ua}function M(fa,Ia,xa,Qa,eb){if(eb===0<ue(fa,
Ia,xa,Qa))for(eb=Ia;eb<xa;eb+=Qa)var Mb=Yb(eb,fa[eb],fa[eb+1],Mb);else for(eb=xa-Qa;eb>=Ia;eb-=Qa)Mb=Yb(eb,fa[eb],fa[eb+1],Mb);return Mb&&Pa(Mb,Mb.next)&&(ud(Mb),Mb=Mb.next),Mb}function R(fa,Ia){if(!fa)return fa;Ia||(Ia=fa);var xa=fa;do if(fa=!1,xa.steiner||!Pa(xa,xa.next)&&0!==ea(xa.prev,xa,xa.next))xa=xa.next;else{if(ud(xa),(xa=Ia=xa.prev)===xa.next)return null;fa=!0}while(fa||xa!==Ia);return Ia}function ca(fa,Ia,xa,Qa,eb,Mb,Ua){if(fa){if(!Ua&&Mb){var Fb=fa,zb=Fb;do null===zb.z&&(zb.z=db(zb.x,zb.y,
Qa,eb,Mb)),zb.prevZ=zb.prev,zb=zb.nextZ=zb.next;while(zb!==Fb);zb.prevZ.nextZ=null;zb.prevZ=null;Fb=zb;var zc,Cb,nd,Jd,Ke=1;do{zb=Fb;var Le=Fb=null;for(nd=0;zb;){nd++;var Vd=zb;for(zc=Jd=0;zc<Ke&&(Jd++,Vd=Vd.nextZ);zc++);for(zc=Ke;0<Jd||0<zc&&Vd;)0===Jd?(Cb=Vd,Vd=Vd.nextZ,zc--):0!==zc&&Vd?zb.z<=Vd.z?(Cb=zb,zb=zb.nextZ,Jd--):(Cb=Vd,Vd=Vd.nextZ,zc--):(Cb=zb,zb=zb.nextZ,Jd--),Le?Le.nextZ=Cb:Fb=Cb,Cb.prevZ=Le,Le=Cb;zb=Vd}Le.nextZ=null;Ke*=2}while(1<nd)}for(zb=fa;fa.prev!==fa.next;){Cb=fa.prev;Fb=fa.next;
if(Mb)a:{Vd=fa;zc=Qa;var Me=eb,vo=Mb;Le=Vd.prev;nd=Vd;Jd=Vd.next;if(0<=ea(Le,nd,Jd))Vd=!1;else{var afa=Le.x>nd.x?Le.x>Jd.x?Le.x:Jd.x:nd.x>Jd.x?nd.x:Jd.x,bfa=Le.y>nd.y?Le.y>Jd.y?Le.y:Jd.y:nd.y>Jd.y?nd.y:Jd.y;Ke=db(Le.x<nd.x?Le.x<Jd.x?Le.x:Jd.x:nd.x<Jd.x?nd.x:Jd.x,Le.y<nd.y?Le.y<Jd.y?Le.y:Jd.y:nd.y<Jd.y?nd.y:Jd.y,zc,Me,vo);zc=db(afa,bfa,zc,Me,vo);for(Me=Vd.nextZ;Me&&Me.z<=zc;){if(Me!==Vd.prev&&Me!==Vd.next&&da(Le.x,Le.y,nd.x,nd.y,Jd.x,Jd.y,Me.x,Me.y)&&0<=ea(Me.prev,Me,Me.next)){Vd=!1;break a}Me=Me.nextZ}for(Me=
Vd.prevZ;Me&&Me.z>=Ke;){if(Me!==Vd.prev&&Me!==Vd.next&&da(Le.x,Le.y,nd.x,nd.y,Jd.x,Jd.y,Me.x,Me.y)&&0<=ea(Me.prev,Me,Me.next)){Vd=!1;break a}Me=Me.prevZ}Vd=!0}}else a:if(Vd=fa,Le=Vd.prev,nd=Vd,Jd=Vd.next,0<=ea(Le,nd,Jd))Vd=!1;else{for(Ke=Vd.next.next;Ke!==Vd.prev;){if(da(Le.x,Le.y,nd.x,nd.y,Jd.x,Jd.y,Ke.x,Ke.y)&&0<=ea(Ke.prev,Ke,Ke.next)){Vd=!1;break a}Ke=Ke.next}Vd=!0}if(Vd)Ia.push(Cb.i/xa),Ia.push(fa.i/xa),Ia.push(Fb.i/xa),ud(fa),zb=fa=Fb.next;else if((fa=Fb)===zb){if(Ua)if(1===Ua){Ua=Ia;Cb=xa;
Fb=fa;do zb=Fb.prev,Vd=Fb.next.next,!Pa(zb,Vd)&&kb(zb,Fb,Fb.next,Vd)&&vc(zb,Vd)&&vc(Vd,zb)&&(Ua.push(zb.i/Cb),Ua.push(Fb.i/Cb),Ua.push(Vd.i/Cb),ud(Fb),ud(Fb.next),Fb=fa=Vd),Fb=Fb.next;while(Fb!==fa);fa=Fb;ca(fa,Ia,xa,Qa,eb,Mb,2)}else{if(2===Ua)a:{Ua=fa;do{for(Cb=Ua.next.next;Cb!==Ua.prev;){if(Fb=Ua.i!==Cb.i){Fb=Ua;zb=Cb;if(Vd=Fb.next.i!==zb.i&&Fb.prev.i!==zb.i){b:{Vd=Fb;do{if(Vd.i!==Fb.i&&Vd.next.i!==Fb.i&&Vd.i!==zb.i&&Vd.next.i!==zb.i&&kb(Vd,Vd.next,Fb,zb)){Vd=!0;break b}Vd=Vd.next}while(Vd!==Fb);
Vd=!1}Vd=!Vd}if(Vd=Vd&&vc(Fb,zb)&&vc(zb,Fb)){Vd=Fb;Le=!1;nd=(Fb.x+zb.x)/2;zb=(Fb.y+zb.y)/2;do Vd.y>zb!=Vd.next.y>zb&&nd<(Vd.next.x-Vd.x)*(zb-Vd.y)/(Vd.next.y-Vd.y)+Vd.x&&(Le=!Le),Vd=Vd.next;while(Vd!==Fb);Vd=Le}Fb=Vd}if(Fb){fa=mc(Ua,Cb);Ua=R(Ua,Ua.next);fa=R(fa,fa.next);ca(Ua,Ia,xa,Qa,eb,Mb);ca(fa,Ia,xa,Qa,eb,Mb);break a}Cb=Cb.next}Ua=Ua.next}while(Ua!==fa)}}else ca(R(fa),Ia,xa,Qa,eb,Mb,1);break}}}}function Z(fa,Ia){return fa.x-Ia.x}function Aa(fa,Ia){var xa=Ia,Qa=fa.x,eb=fa.y,Mb=-1/0;do{if(eb<=xa.y&&
eb>=xa.next.y){var Ua=xa.x+(eb-xa.y)*(xa.next.x-xa.x)/(xa.next.y-xa.y);if(Ua<=Qa&&Ua>Mb){if(Mb=Ua,Ua===Qa){if(eb===xa.y)return xa;if(eb===xa.next.y)return xa.next}var Fb=xa.x<xa.next.x?xa:xa.next}}xa=xa.next}while(xa!==Ia);if(!Fb)return null;if(Qa===Mb)return Fb.prev;var zb;Ia=Fb;Ua=Fb.x;var zc=Fb.y,Cb=1/0;for(xa=Fb.next;xa!==Ia;)Qa>=xa.x&&xa.x>=Ua&&da(eb<zc?Qa:Mb,eb,Ua,zc,eb<zc?Mb:Qa,eb,xa.x,xa.y)&&((zb=Math.abs(eb-xa.y)/(Qa-xa.x))<Cb||zb===Cb&&xa.x>Fb.x)&&vc(xa,fa)&&(Fb=xa,Cb=zb),xa=xa.next;return Fb}
function db(fa,Ia,xa,Qa,eb){return fa=32767*(fa-xa)/eb,Ia=32767*(Ia-Qa)/eb,fa=16711935&(fa|fa<<8),fa=252645135&(fa|fa<<4),fa=858993459&(fa|fa<<2),fa=1431655765&(fa|fa<<1),Ia=16711935&(Ia|Ia<<8),Ia=252645135&(Ia|Ia<<4),Ia=858993459&(Ia|Ia<<2),Ia=1431655765&(Ia|Ia<<1),fa|Ia<<1}function S(fa){var Ia=fa,xa=fa;do Ia.x<xa.x&&(xa=Ia),Ia=Ia.next;while(Ia!==fa);return xa}function da(fa,Ia,xa,Qa,eb,Mb,Ua,Fb){return 0<=(eb-Ua)*(Ia-Fb)-(fa-Ua)*(Mb-Fb)&&0<=(fa-Ua)*(Qa-Fb)-(xa-Ua)*(Ia-Fb)&&0<=(xa-Ua)*(Mb-Fb)-(eb-
Ua)*(Qa-Fb)}function ea(fa,Ia,xa){return(Ia.y-fa.y)*(xa.x-Ia.x)-(Ia.x-fa.x)*(xa.y-Ia.y)}function Pa(fa,Ia){return fa.x===Ia.x&&fa.y===Ia.y}function kb(fa,Ia,xa,Qa){return!!(Pa(fa,Ia)&&Pa(xa,Qa)||Pa(fa,Qa)&&Pa(xa,Ia))||0<ea(fa,Ia,xa)!=0<ea(fa,Ia,Qa)&&0<ea(xa,Qa,fa)!=0<ea(xa,Qa,Ia)}function vc(fa,Ia){return 0>ea(fa.prev,fa,fa.next)?0<=ea(fa,Ia,fa.next)&&0<=ea(fa,fa.prev,Ia):0>ea(fa,Ia,fa.prev)||0>ea(fa,fa.next,Ia)}function mc(fa,Ia){var xa=new id(fa.i,fa.x,fa.y),Qa=new id(Ia.i,Ia.x,Ia.y),eb=fa.next,
Mb=Ia.prev;return fa.next=Ia,Ia.prev=fa,xa.next=eb,eb.prev=xa,Qa.next=xa,xa.prev=Qa,Mb.next=Qa,Qa.prev=Mb,Qa}function Yb(fa,Ia,xa,Qa){fa=new id(fa,Ia,xa);return Qa?(fa.next=Qa.next,fa.prev=Qa,Qa.next.prev=fa,Qa.next=fa):(fa.prev=fa,fa.next=fa),fa}function ud(fa){fa.next.prev=fa.prev;fa.prev.next=fa.next;fa.prevZ&&(fa.prevZ.nextZ=fa.nextZ);fa.nextZ&&(fa.nextZ.prevZ=fa.prevZ)}function id(fa,Ia,xa){(this||kc).i=fa;(this||kc).x=Ia;(this||kc).y=xa;(this||kc).prev=null;(this||kc).next=null;(this||kc).z=
null;(this||kc).prevZ=null;(this||kc).nextZ=null;(this||kc).steiner=!1}function ue(fa,Ia,xa,Qa){for(var eb=0,Mb=xa-Qa;Ia<xa;Ia+=Qa)eb+=(fa[Mb]-fa[Ia])*(fa[Ia+1]+fa[Mb+1]),Mb=Ia;return eb}function ye(fa,Ia){var xa=Ia.id,Qa=Ia.bbox,eb=null==Ia.properties?{}:Ia.properties;fa=nf(fa,Ia);return null==xa&&null==Qa?{type:"Feature",properties:eb,geometry:fa}:null==Qa?{type:"Feature",id:xa,properties:eb,geometry:fa}:{type:"Feature",id:xa,bbox:Qa,properties:eb,geometry:fa}}function nf(fa,Ia){function xa(zc){return Fb(zc)}
function Qa(zc){for(var Cb=[],nd=0,Jd=zc.length;nd<Jd;++nd){var Ke=zc[nd],Le=Cb;Le.length&&Le.pop();for(var Vd=zb[0>Ke?~Ke:Ke],Me=0,vo=Vd.length;Me<vo;++Me)Le.push(Fb(Vd[Me],Me));if(0>Ke)for(Ke=Le,Le=Ke.length,Vd=Le-vo;Vd<--Le;)vo=Ke[Vd],Ke[Vd++]=Ke[Le],Ke[Le]=vo}return 2>Cb.length&&Cb.push(Cb[0]),Cb}function eb(zc){for(zc=Qa(zc);4>zc.length;)zc.push(zc[0]);return zc}function Mb(zc){return zc.map(eb)}function Ua(zc){var Cb=zc.type;switch(Cb){case "GeometryCollection":return{type:Cb,geometries:zc.geometries.map(Ua)};
case "Point":zc=Fb(zc.coordinates);break;case "MultiPoint":zc=zc.coordinates.map(xa);break;case "LineString":zc=Qa(zc.arcs);break;case "MultiLineString":zc=zc.arcs.map(Qa);break;case "Polygon":zc=Mb(zc.arcs);break;case "MultiPolygon":zc=zc.arcs.map(Mb);break;default:return null}return{type:Cb,coordinates:zc}}var Fb=cfa(fa.transform),zb=fa.arcs;return Ua(Ia)}function gg(fa,Ia){function xa(zb){switch(zb.type){case "GeometryCollection":zb.geometries.forEach(xa);break;case "Polygon":Qa(zb.arcs);break;
case "MultiPolygon":zb.arcs.forEach(Qa)}}function Qa(zb){zb.forEach(function(zc){zc.forEach(function(Cb){(Mb[Cb=0>Cb?~Cb:Cb]||(Mb[Cb]=[])).push(zb)})});Ua.push(zb)}function eb(zb){zb=nf(fa,{type:"Polygon",arcs:[zb]}).coordinates[0];for(var zc,Cb=-1,nd=zb.length,Jd=zb[nd-1],Ke=0;++Cb<nd;)zc=Jd,Jd=zb[Cb],Ke+=zc[0]*Jd[1]-zc[1]*Jd[0];return Math.abs(Ke)}var Mb={},Ua=[],Fb=[];return Ia.forEach(xa),Ua.forEach(function(zb){if(!zb._){var zc=[],Cb=[zb];zb._=1;for(Fb.push(zc);zb=Cb.pop();)zc.push(zb),zb.forEach(function(nd){nd.forEach(function(Jd){Mb[0>
Jd?~Jd:Jd].forEach(function(Ke){Ke._||(Ke._=1,Cb.push(Ke))})})})}}),Ua.forEach(function(zb){delete zb._}),{type:"MultiPolygon",arcs:Fb.map(function(zb){var zc=[];if(zb.forEach(function(Le){Le.forEach(function(Vd){Vd.forEach(function(Me){2>Mb[0>Me?~Me:Me].length&&zc.push(Me)})})}),zc=dfa(fa,zc),1<(zb=zc.length))for(var Cb,nd,Jd=1,Ke=eb(zc[0]);Jd<zb;++Jd)(Cb=eb(zc[Jd]))>Ke&&(nd=zc[0],zc[0]=zc[Jd],zc[Jd]=nd,Ke=Cb);return zc})}}function Tg(fa){return function(Ia,xa){return M1(fa(Ia),xa)}}function sg(fa,
Ia){var xa={},Qa={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};return fa.forEach(function(eb){var Mb=[];eb.forEach(function(Ua,Fb){Fb=Ua[0]<Ua[1]?Ua.join(","):Ua[1]+","+Ua[0];Ua=Ua.map(function(zb){return Ia[zb]});Fb in xa?Mb.push(~xa[Fb]):(Mb.push(xa[Fb]=Qa.arcs.length),Qa.arcs.push(Ua))});Qa.objects.triangles.geometries.push({type:"Polygon",area:Math.abs(xq(eb.map(function(Ua){return Ia[Ua[0]]}))),arcs:[Mb]})}),Qa.objects.triangles.geometries.sort(function(eb,
Mb){return eb.area-Mb.area}),Qa}function Kh(fa,Ia){for(var xa=fa.objects.triangles.geometries,Qa=N1(function(eb){return eb.area}).left;xa.length>Ia;)!function(){var eb=xa[0],Mb=efa(xa)[0][0],Ua=xa[Mb],Fb=gg(fa,[eb,Ua]);Fb.area=eb.area+Ua.area;Fb.type="Polygon";Fb.arcs=Fb.arcs[0];xa.splice(Mb,1);xa.shift();xa.splice(Qa(xa,Fb.area),0,Fb)}();if(Ia>xa.length)throw new RangeError("Can't collapse topology into "+Ia+" pieces.");return ffa(fa,fa.objects.triangles).features.map(function(eb){return eb.geometry.coordinates[0].pop(),
eb.geometry.coordinates[0]})}function zg(fa){fa=gfa(fa.reduce(function(eb,Mb){return eb.concat([Mb[0]],[Mb[1]])},[]));for(var Ia=[],xa=0,Qa=fa.length;xa<Qa;xa+=3)Ia.push([[fa[xa],fa[xa+1]],[fa[xa+1],fa[xa+2]],[fa[xa+2],fa[xa]]]);return Ia}function Hf(fa,Ia,xa){function Qa(Ua,Fb,zb){void 0===Fb&&(Fb=[]);void 0===zb&&(zb=0);for(var zc=0;zc<Ua.length;zc++){var Cb=Ua.splice(zc,1),nd=xa[Cb[0]][Fb.length];zb+nd<eb&&(Ua.length?Qa(Ua.slice(),Fb.concat(Cb),zb+nd):(eb=zb+nd,Mb=Fb.concat(Cb)));Ua.length&&Ua.splice(zc,
0,Cb[0])}}var eb=1/0,Mb=fa.map(function(Ua,Fb){return Fb});return Qa(Mb),Mb}function hg(fa,Ia,xa){void 0===xa&&(xa={});var Qa=xa.maxSegmentLength;void 0===Qa&&(Qa=10);var eb=xa.string;void 0===eb&&(eb=!0);xa=xa.single;void 0===xa&&(xa=!1);var Mb=qa(fa,Qa);Mb.length<Ia.length+2&&ba(Mb,Ia.length+2-Mb.length);var Ua;Mb=hfa(Mb,Ia.length);var Fb=Ia.map(function(zb){return qa(zb,Qa)});fa="string"==typeof fa&&fa;return xa&&!Ia.every(function(zb){return"string"==typeof zb})||(Ua=Ia.slice(0)),Ag(Mb,Fb,{match:!0,
string:eb,single:xa,t0:fa,t1:Ua})}function Ag(fa,Ia,xa){void 0===xa&&(xa={});var Qa=xa.string,eb=xa.single,Mb=xa.t0,Ua=xa.t1,Fb=(xa=xa.match)?ifa(fa,Ia):fa.map(function(Cb,nd){return nd}),zb=Fb.map(function(Cb,nd){return ua(fa[Cb],Ia[nd],Qa)});if(xa&&Array.isArray(Mb)&&(Mb=Fb.map(function(Cb){return Mb[Cb]})),eb&&Qa&&(Array.isArray(Mb)&&(Mb=Mb.join(" ")),Array.isArray(Ua)&&(Ua=Ua.join(" "))),eb){var zc=Qa?function(Cb){return zb.map(function(nd){return nd(Cb)}).join(" ")}:function(Cb){return zb.map(function(nd){return nd(Cb)})};
return Qa&&(Mb||Ua)?function(Cb){return 1E-4>Cb&&Mb||1E-4>1-Cb&&Ua||zc(Cb)}:zc}return Qa?(Mb=Array.isArray(Mb)?Mb.map(function(Cb){return"string"==typeof Cb&&Cb}):[],Ua=Array.isArray(Ua)?Ua.map(function(Cb){return"string"==typeof Cb&&Cb}):[],zb.map(function(Cb,nd){return Mb[nd]||Ua[nd]?function(Jd){return 1E-4>Jd&&Mb[nd]||1E-4>1-Jd&&Ua[nd]||Cb(Jd)}:Cb})):zb}function Ch(fa,Ia,xa,Qa,eb){var Mb=Wc(fa,Ia,xa),Ua=fa-xa+","+Ia,Fb="A"+xa+","+xa+",0,1,1,";return Dn(Mb,Qa,"M"+Ua+Fb+(fa+xa+","+Ia)+Fb+Ua+"Z",
2*Math.PI*xa,eb)}function Xh(fa,Ia,xa,Qa,eb,Mb){var Ua=Yc(fa,Ia,xa,Qa),Fb=fa+xa,zb=Ia+Qa;return Dn(Ua,eb,"M"+fa+","+Ia+"L"+Fb+","+Ia+"L"+Fb+","+zb+"L"+fa+","+zb+"Z",2*xa+2*Qa,Mb)}function Dn(fa,Ia,xa,Qa,eb){void 0===eb&&(eb={});var Mb=eb.maxSegmentLength;void 0===Mb&&(Mb=10);eb=eb.string;void 0===eb&&(eb=!0);var Ua,Fb;Ia=qa(Ia,Mb);return ha(Qa)&&Ia.length<Qa/Mb&&ba(Ia,Math.ceil(Qa/Mb-Ia.length)),Ua=fa(Ia),Fb=ja(Ua,Ia,eb),eb?function(zb){return 1E-4>zb?xa:Fb(zb)}:Fb}function Wc(fa,Ia,xa){return function(Qa){var eb=
bb(Qa),Mb=pp(Qa.concat([Qa[0]])),Ua=Math.atan2(Qa[0][1]-eb[1],Qa[0][0]-eb[0]),Fb=0;return Qa.map(function(zb,zc){var Cb;return zc&&(Fb+=J(zb,Qa[zc-1])),Cb=Ua+2*Math.PI*(Mb?Fb/Mb:zc/Qa.length),[Math.cos(Cb)*xa+fa,Math.sin(Cb)*xa+Ia]})}}function Yc(fa,Ia,xa,Qa){return function(eb){var Mb=bb(eb),Ua=pp(eb.concat([eb[0]]));Mb=Math.atan2(eb[0][1]-Mb[1],eb[0][0]-Mb[0]);var Fb=0;0>Mb&&(Mb=2*Math.PI+Mb);var zb=Mb/(2*Math.PI);return eb.map(function(zc,Cb){Cb&&(Fb+=J(zc,eb[Cb-1]));zc=(zb+(Ua?Fb/Ua:Cb/eb.length))%
1;zc=.125>=zc?[1,.5+4*zc]:.375>=zc?[1.5-4*zc,1]:.625>=zc?[0,2.5-4*zc]:.875>=zc?[4*zc-2.5,0]:[1,4*zc-3.5];return[fa+zc[0]*xa,Ia+zc[1]*Qa]})}}var xq=function(fa){for(var Ia,xa=-1,Qa=fa.length,eb=fa[Qa-1],Mb=0;++xa<Qa;)Ia=eb,eb=fa[xa],Mb+=Ia[1]*eb[0]-Ia[0]*eb[1];return Mb/2},pp=function(fa){var Ia=-1,xa=fa.length,Qa=fa[xa-1],eb=Qa[0];Qa=Qa[1];for(var Mb=0;++Ia<xa;){var Ua=eb;var Fb=Qa;Qa=fa[Ia];eb=Qa[0];Qa=Qa[1];Ua-=eb;Fb-=Qa;Mb+=Math.sqrt(Ua*Ua+Fb*Fb)}return Mb},uo={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,
t:2,v:1,z:0},Rw=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];a.prototype.matrix=function(fa){return 1===fa[0]&&0===fa[1]&&0===fa[2]&&1===fa[3]&&0===fa[4]&&0===fa[5]?this||kc:((this||kc).cache=null,(this||kc).queue.push(fa),this||kc)};a.prototype.translate=function(fa,Ia){return 0===fa&&0===Ia||((this||kc).cache=null,(this||kc).queue.push([1,0,0,1,fa,Ia])),this||kc};a.prototype.scale=function(fa,Ia){return 1===fa&&1===Ia||((this||kc).cache=null,(this||kc).queue.push([fa,
0,0,Ia,0,0])),this||kc};a.prototype.rotate=function(fa,Ia,xa){var Qa,eb,Mb;return 0!==fa&&(this.translate(Ia,xa),Qa=fa*Math.PI/180,eb=Math.cos(Qa),Mb=Math.sin(Qa),(this||kc).queue.push([eb,Mb,-Mb,eb,0,0]),(this||kc).cache=null,this.translate(-Ia,-xa)),this||kc};a.prototype.skewX=function(fa){return 0!==fa&&((this||kc).cache=null,(this||kc).queue.push([1,0,Math.tan(fa*Math.PI/180),1,0,0])),this||kc};a.prototype.skewY=function(fa){return 0!==fa&&((this||kc).cache=null,(this||kc).queue.push([1,Math.tan(fa*
Math.PI/180),0,1,0,0])),this||kc};a.prototype.toArray=function(){var fa=this||kc;if((this||kc).cache)return(this||kc).cache;if(!(this||kc).queue.length)return(this||kc).cache=[1,0,0,1,0,0],(this||kc).cache;if((this||kc).cache=(this||kc).queue[0],1===(this||kc).queue.length)return(this||kc).cache;for(var Ia=1;Ia<(this||kc).queue.length;Ia++){var xa=fa.cache,Qa=fa.queue[Ia];fa.cache=[xa[0]*Qa[0]+xa[2]*Qa[1],xa[1]*Qa[0]+xa[3]*Qa[1],xa[0]*Qa[2]+xa[2]*Qa[3],xa[1]*Qa[2]+xa[3]*Qa[3],xa[0]*Qa[4]+xa[2]*Qa[5]+
xa[4],xa[1]*Qa[4]+xa[3]*Qa[5]+xa[5]]}return(this||kc).cache};a.prototype.calc=function(fa,Ia,xa){var Qa;return(this||kc).queue.length?((this||kc).cache||((this||kc).cache=this.toArray()),Qa=(this||kc).cache,[fa*Qa[0]+Ia*Qa[2]+(xa?0:Qa[4]),fa*Qa[1]+Ia*Qa[3]+(xa?0:Qa[5])]):[fa,Ia]};var Pj={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},Sw=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,Tw=/[\s,]+/,Uw=function(fa){var Ia,xa,Qa=new a;return fa.split(Sw).forEach(function(eb){if(eb.length){if(void 0!==
Pj[eb])return void(Ia=eb);switch(xa=eb.split(Tw).map(function(Mb){return+Mb||0}),Ia){case "matrix":return void(6===xa.length&&Qa.matrix(xa));case "scale":return void(1===xa.length?Qa.scale(xa[0],xa[0]):2===xa.length&&Qa.scale(xa[0],xa[1]));case "rotate":return void(1===xa.length?Qa.rotate(xa[0],0,0):3===xa.length&&Qa.rotate(xa[0],xa[1],xa[2]));case "translate":return void(1===xa.length?Qa.translate(xa[0],0):2===xa.length&&Qa.translate(xa[0],xa[1]));case "skewX":return void(1===xa.length&&Qa.skewX(xa[0]));
case "skewY":return void(1===xa.length&&Qa.skewY(xa[0]))}}}),Qa},gv=2*Math.PI,rB=function(fa,Ia,xa,Qa,eb,Mb,Ua,Fb,zb){var zc=Math.sin(zb*gv/360),Cb=Math.cos(zb*gv/360);zb=Cb*(fa-xa)/2+zc*(Ia-Qa)/2;var nd=-zc*(fa-xa)/2+Cb*(Ia-Qa)/2;if(0===zb&&0===nd||0===Ua||0===Fb)return[];Ua=Math.abs(Ua);Fb=Math.abs(Fb);zb=zb*zb/(Ua*Ua)+nd*nd/(Fb*Fb);1<zb&&(Ua*=Math.sqrt(zb),Fb*=Math.sqrt(zb));var Jd=m(fa,Ia,xa,Qa,eb,Mb,Ua,Fb,zc,Cb);fa=[];Ia=Jd[2];xa=Jd[3];Qa=Math.max(Math.ceil(Math.abs(xa)/(gv/4)),1);xa/=Qa;for(eb=
0;eb<Qa;eb++)fa.push(q(Ia,xa)),Ia+=xa;return fa.map(function(Ke){for(var Le=0;Le<Ke.length;Le+=2){var Vd=Ke[Le+0],Me=Ke[Le+1];Vd*=Ua;Me*=Fb;var vo=zc*Vd+Cb*Me;Ke[Le+0]=Cb*Vd-zc*Me+Jd[0];Ke[Le+1]=vo+Jd[1]}return Ke})},fE=Math.PI/180;r.prototype.transform=function(fa){var Ia=Math.cos((this||kc).ax*fE),xa=Math.sin((this||kc).ax*fE),Qa=[(this||kc).rx*(fa[0]*Ia+fa[2]*xa),(this||kc).rx*(fa[1]*Ia+fa[3]*xa),(this||kc).ry*(-fa[0]*xa+fa[2]*Ia),(this||kc).ry*(-fa[1]*xa+fa[3]*Ia)];fa=Qa[0]*Qa[0]+Qa[2]*Qa[2];
Ia=Qa[1]*Qa[1]+Qa[3]*Qa[3];xa=((Qa[0]-Qa[3])*(Qa[0]-Qa[3])+(Qa[2]+Qa[1])*(Qa[2]+Qa[1]))*((Qa[0]+Qa[3])*(Qa[0]+Qa[3])+(Qa[2]-Qa[1])*(Qa[2]-Qa[1]));var eb=(fa+Ia)/2;if(xa<1E-10*eb)return(this||kc).rx=(this||kc).ry=Math.sqrt(eb),(this||kc).ax=0,this||kc;Qa=Qa[0]*Qa[1]+Qa[2]*Qa[3];xa=Math.sqrt(xa);var Mb=eb+xa/2;xa=eb-xa/2;return(this||kc).ax=1E-10>Math.abs(Qa)&&1E-10>Math.abs(Mb-Ia)?90:180*Math.atan(Math.abs(Qa)>Math.abs(Mb-Ia)?(Mb-fa)/Qa:Qa/(Mb-Ia))/Math.PI,0<=(this||kc).ax?((this||kc).rx=Math.sqrt(Mb),
(this||kc).ry=Math.sqrt(xa)):((this||kc).ax+=90,(this||kc).rx=Math.sqrt(xa),(this||kc).ry=Math.sqrt(Mb)),this||kc};r.prototype.isDegenerate=function(){return(this||kc).rx<1E-10*(this||kc).ry||(this||kc).ry<1E-10*(this||kc).rx};u.prototype.__matrix=function(fa){var Ia,xa=this||kc;fa.queue.length&&this.iterate(function(Qa,eb,Mb,Ua){switch(Qa[0]){case "v":var Fb=fa.calc(0,Qa[1],!0);Mb=0===Fb[0]?["v",Fb[1]]:["l",Fb[0],Fb[1]];break;case "V":Fb=fa.calc(Mb,Qa[1],!1);Mb=Fb[0]===fa.calc(Mb,Ua,!1)[0]?["V",
Fb[1]]:["L",Fb[0],Fb[1]];break;case "h":Fb=fa.calc(Qa[1],0,!0);Mb=0===Fb[1]?["h",Fb[0]]:["l",Fb[0],Fb[1]];break;case "H":Fb=fa.calc(Qa[1],Ua,!1);Mb=Fb[1]===fa.calc(Mb,Ua,!1)[1]?["H",Fb[0]]:["L",Fb[0],Fb[1]];break;case "a":case "A":Fb=fa.toArray();var zb=r(Qa[1],Qa[2],Qa[3]).transform(Fb);if(0>Fb[0]*Fb[3]-Fb[1]*Fb[2]&&(Qa[5]=Qa[5]?"0":"1"),Fb=fa.calc(Qa[6],Qa[7],"a"===Qa[0]),"A"===Qa[0]&&Qa[6]===Mb&&Qa[7]===Ua||"a"===Qa[0]&&0===Qa[6]&&0===Qa[7]){Mb=["a"===Qa[0]?"l":"L",Fb[0],Fb[1]];break}Mb=zb.isDegenerate()?
["a"===Qa[0]?"l":"L",Fb[0],Fb[1]]:[Qa[0],zb.rx,zb.ry,zb.ax,Qa[4],Qa[5],Fb[0],Fb[1]];break;case "m":Fb=fa.calc(Qa[1],Qa[2],0<eb);Mb=["m",Fb[0],Fb[1]];break;default:for(Fb=Qa[0],Mb=[Fb],Ua=Fb.toLowerCase()===Fb,Ia=1;Ia<Qa.length;Ia+=2)Fb=fa.calc(Qa[Ia],Qa[Ia+1],Ua),Mb.push(Fb[0],Fb[1])}xa.segments[eb]=Mb},!0)};u.prototype.__evaluateStack=function(){var fa,Ia=this||kc;if((this||kc).__stack.length){if(1===(this||kc).__stack.length)return this.__matrix((this||kc).__stack[0]),void((this||kc).__stack=[]);
var xa=a();for(fa=(this||kc).__stack.length;0<=--fa;)xa.matrix(Ia.__stack[fa].toArray());this.__matrix(xa);(this||kc).__stack=[]}};u.prototype.toString=function(){var fa=this||kc,Ia=[];this.__evaluateStack();for(var xa=0;xa<(this||kc).segments.length;xa++){var Qa=fa.segments[xa][0];Qa=0<xa&&"m"!==Qa&&"M"!==Qa&&Qa===fa.segments[xa-1][0];Ia=Ia.concat(Qa?fa.segments[xa].slice(1):fa.segments[xa])}return Ia.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")};u.prototype.translate=
function(fa,Ia){return(this||kc).__stack.push(a().translate(fa,Ia||0)),this||kc};u.prototype.scale=function(fa,Ia){return(this||kc).__stack.push(a().scale(fa,Ia||0===Ia?Ia:fa)),this||kc};u.prototype.rotate=function(fa,Ia,xa){return(this||kc).__stack.push(a().rotate(fa,Ia||0,xa||0)),this||kc};u.prototype.skewX=function(fa){return(this||kc).__stack.push(a().skewX(fa)),this||kc};u.prototype.skewY=function(fa){return(this||kc).__stack.push(a().skewY(fa)),this||kc};u.prototype.matrix=function(fa){return(this||
kc).__stack.push(a().matrix(fa)),this||kc};u.prototype.transform=function(fa){return fa.trim()?((this||kc).__stack.push(Uw(fa)),this||kc):this||kc};u.prototype.round=function(fa){var Ia,xa=0,Qa=0,eb=0,Mb=0;return fa=fa||0,this.__evaluateStack(),(this||kc).segments.forEach(function(Ua){var Fb=Ua[0].toLowerCase()===Ua[0];switch(Ua[0]){case "H":case "h":return Fb&&(Ua[1]+=eb),eb=Ua[1]-Ua[1].toFixed(fa),void(Ua[1]=+Ua[1].toFixed(fa));case "V":case "v":return Fb&&(Ua[1]+=Mb),Mb=Ua[1]-Ua[1].toFixed(fa),
void(Ua[1]=+Ua[1].toFixed(fa));case "Z":case "z":return eb=xa,void(Mb=Qa);case "M":case "m":return Fb&&(Ua[1]+=eb,Ua[2]+=Mb),eb=Ua[1]-Ua[1].toFixed(fa),Mb=Ua[2]-Ua[2].toFixed(fa),xa=eb,Qa=Mb,Ua[1]=+Ua[1].toFixed(fa),void(Ua[2]=+Ua[2].toFixed(fa));case "A":case "a":return Fb&&(Ua[6]+=eb,Ua[7]+=Mb),eb=Ua[6]-Ua[6].toFixed(fa),Mb=Ua[7]-Ua[7].toFixed(fa),Ua[1]=+Ua[1].toFixed(fa),Ua[2]=+Ua[2].toFixed(fa),Ua[3]=+Ua[3].toFixed(fa+2),Ua[6]=+Ua[6].toFixed(fa),void(Ua[7]=+Ua[7].toFixed(fa));default:return Ia=
Ua.length,Fb&&(Ua[Ia-2]+=eb,Ua[Ia-1]+=Mb),eb=Ua[Ia-2]-Ua[Ia-2].toFixed(fa),Mb=Ua[Ia-1]-Ua[Ia-1].toFixed(fa),void Ua.forEach(function(zb,zc){zc&&(Ua[zc]=+Ua[zc].toFixed(fa))})}}),this||kc};u.prototype.iterate=function(fa,Ia){var xa,Qa=(this||kc).segments,eb={},Mb=!1,Ua=0,Fb=0,zb=0,zc=0;if(Ia||this.__evaluateStack(),Qa.forEach(function(nd,Jd){var Ke=fa(nd,Jd,Ua,Fb);Array.isArray(Ke)&&(eb[Jd]=Ke,Mb=!0);Jd=nd[0]===nd[0].toLowerCase();switch(nd[0]){case "m":case "M":return Ua=nd[1]+(Jd?Ua:0),Fb=nd[2]+
(Jd?Fb:0),zb=Ua,void(zc=Fb);case "h":case "H":return void(Ua=nd[1]+(Jd?Ua:0));case "v":case "V":return void(Fb=nd[1]+(Jd?Fb:0));case "z":case "Z":return Ua=zb,void(Fb=zc);default:Ua=nd[nd.length-2]+(Jd?Ua:0),Fb=nd[nd.length-1]+(Jd?Fb:0)}}),!Mb)return this||kc;var Cb=[];for(Ia=0;Ia<Qa.length;Ia++)if(void 0!==eb[Ia])for(xa=0;xa<eb[Ia].length;xa++)Cb.push(eb[Ia][xa]);else Cb.push(Qa[Ia]);return(this||kc).segments=Cb,this||kc};u.prototype.abs=function(){return this.iterate(function(fa,Ia,xa,Qa){Ia=fa[0];
var eb=Ia.toUpperCase();if(Ia!==eb)switch(fa[0]=eb,Ia){case "v":return void(fa[1]+=Qa);case "a":return fa[6]+=xa,void(fa[7]+=Qa);default:for(Ia=1;Ia<fa.length;Ia++)fa[Ia]+=Ia%2?xa:Qa}},!0),this||kc};u.prototype.rel=function(){return this.iterate(function(fa,Ia,xa,Qa){var eb=fa[0],Mb=eb.toLowerCase();if(eb!==Mb&&(0!==Ia||"M"!==eb))switch(fa[0]=Mb,eb){case "V":return void(fa[1]-=Qa);case "A":return fa[6]-=xa,void(fa[7]-=Qa);default:for(Ia=1;Ia<fa.length;Ia++)fa[Ia]-=Ia%2?xa:Qa}},!0),this||kc};u.prototype.unarc=
function(){return this.iterate(function(fa,Ia,xa,Qa){var eb,Mb,Ua,Fb=[];Ia=fa[0];return"A"!==Ia&&"a"!==Ia?null:("a"===Ia?(Mb=xa+fa[6],Ua=Qa+fa[7]):(Mb=fa[6],Ua=fa[7]),eb=rB(xa,Qa,Mb,Ua,fa[4],fa[5],fa[1],fa[2],fa[3]),0===eb.length?[["a"===fa[0]?"l":"L",fa[6],fa[7]]]:(eb.forEach(function(zb){Fb.push(["C",zb[2],zb[3],zb[4],zb[5],zb[6],zb[7]])}),Fb))}),this||kc};u.prototype.unshort=function(){var fa,Ia,xa,Qa,eb,Mb=(this||kc).segments;return this.iterate(function(Ua,Fb,zb,zc){var Cb,nd=Ua[0],Jd=nd.toUpperCase();
Fb&&("T"===Jd?(Cb="t"===nd,xa=Mb[Fb-1],"Q"===xa[0]?(fa=xa[1]-zb,Ia=xa[2]-zc):"q"===xa[0]?(fa=xa[1]-xa[3],Ia=xa[2]-xa[4]):(fa=0,Ia=0),Qa=-fa,eb=-Ia,Cb||(Qa+=zb,eb+=zc),Mb[Fb]=[Cb?"q":"Q",Qa,eb,Ua[1],Ua[2]]):"S"===Jd&&(Cb="s"===nd,xa=Mb[Fb-1],"C"===xa[0]?(fa=xa[3]-zb,Ia=xa[4]-zc):"c"===xa[0]?(fa=xa[3]-xa[5],Ia=xa[4]-xa[6]):(fa=0,Ia=0),Qa=-fa,eb=-Ia,Cb||(Qa+=zb,eb+=zc),Mb[Fb]=[Cb?"c":"C",Qa,eb,Ua[1],Ua[2],Ua[3],Ua[4]]))}),this||kc};var qB=u,Xy={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},jfa=/([astvzqmhlc])([^astvzqmhlc]*)/gi,
lfa=function(fa){var Ia=[];return fa.replace(jfa,function(xa,Qa,eb){xa=Qa.toLowerCase();eb=(eb=eb.match(kfa))?eb.map(Number):[];for("m"===xa&&2<eb.length&&(Ia.push([Qa].concat(eb.splice(0,2))),xa="l",Qa="m"===Qa?"l":"L");0<=eb.length;){if(eb.length===Xy[xa])return eb.unshift(Qa),Ia.push(eb);if(eb.length<Xy[xa])throw Error("malformed path data");Ia.push([Qa].concat(eb.splice(0,Xy[xa])))}}),Ia},kfa=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,Tr=function(fa,Ia,xa,Qa,eb,Mb,Ua,Fb){return new v(fa,Ia,xa,Qa,eb,
Mb,Ua,Fb)};v.prototype={constructor:v,init:function(){(this||kc).length=this.getArcLength([(this||kc).a.x,(this||kc).b.x,(this||kc).c.x,(this||kc).d.x],[(this||kc).a.y,(this||kc).b.y,(this||kc).c.y,(this||kc).d.y])},getTotalLength:function(){return(this||kc).length},getPointAtLength:function(fa){fa=A(fa,(this||kc).length,(this||kc).getArcLength,[(this||kc).a.x,(this||kc).b.x,(this||kc).c.x,(this||kc).d.x],[(this||kc).a.y,(this||kc).b.y,(this||kc).c.y,(this||kc).d.y]);return this.getPoint([(this||
kc).a.x,(this||kc).b.x,(this||kc).c.x,(this||kc).d.x],[(this||kc).a.y,(this||kc).b.y,(this||kc).c.y,(this||kc).d.y],fa)},getTangentAtLength:function(fa){fa=A(fa,(this||kc).length,(this||kc).getArcLength,[(this||kc).a.x,(this||kc).b.x,(this||kc).c.x,(this||kc).d.x],[(this||kc).a.y,(this||kc).b.y,(this||kc).c.y,(this||kc).d.y]);fa=this.getDerivative([(this||kc).a.x,(this||kc).b.x,(this||kc).c.x,(this||kc).d.x],[(this||kc).a.y,(this||kc).b.y,(this||kc).c.y,(this||kc).d.y],fa);var Ia=Math.sqrt(fa.x*fa.x+
fa.y*fa.y);return 0<Ia?{x:fa.x/Ia,y:fa.y/Ia}:{x:0,y:0}},getPropertiesAtLength:function(fa){fa=A(fa,(this||kc).length,(this||kc).getArcLength,[(this||kc).a.x,(this||kc).b.x,(this||kc).c.x,(this||kc).d.x],[(this||kc).a.y,(this||kc).b.y,(this||kc).c.y,(this||kc).d.y]);var Ia=this.getDerivative([(this||kc).a.x,(this||kc).b.x,(this||kc).c.x,(this||kc).d.x],[(this||kc).a.y,(this||kc).b.y,(this||kc).c.y,(this||kc).d.y],fa);var xa=Math.sqrt(Ia.x*Ia.x+Ia.y*Ia.y);Ia=0<xa?{x:Ia.x/xa,y:Ia.y/xa}:{x:0,y:0};fa=
this.getPoint([(this||kc).a.x,(this||kc).b.x,(this||kc).c.x,(this||kc).d.x],[(this||kc).a.y,(this||kc).b.y,(this||kc).c.y,(this||kc).d.y],fa);return{x:fa.x,y:fa.y,tangentX:Ia.x,tangentY:Ia.y}}};var Wea=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,
-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,
.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,
-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,
.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,
-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,
.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,
-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,
.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,
-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,
.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,
-.9951872199970213,.9951872199970213]],Xea=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,
.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,
.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,
.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,
.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,
.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,
.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,
.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,
.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,
.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,
.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,
.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Vea=[[1],[1,1],[1,2,1],[1,3,3,1]],eE=2*Math.PI,Yea=function(fa,Ia,xa,Qa,eb,Mb,Ua,Fb,zb){var zc=Math.sin(eb*eE/360),Cb=Math.cos(eb*eE/360);eb=Cb*(fa-Fb)/2+zc*(Ia-zb)/2;var nd=-zc*(fa-Fb)/2+Cb*(Ia-zb)/2;if(0===eb&&0===nd||0===xa||0===Qa)return[];xa=Math.abs(xa);Qa=Math.abs(Qa);eb=eb*eb/(xa*xa)+nd*nd/(Qa*Qa);1<eb&&(xa*=Math.sqrt(eb),Qa*=Math.sqrt(eb));var Jd=la(fa,Ia,Fb,zb,Mb,Ua,xa,Qa,zc,Cb);fa=[];Ia=Jd[2];Mb=Jd[3];Ua=Math.max(Math.ceil(Math.abs(Mb)/
(eE/4)),1);Mb/=Ua;for(Fb=0;Fb<Ua;Fb++)fa.push(wa(Ia,Mb)),Ia+=Mb;return fa.map(function(Ke){for(var Le=0;Le<Ke.length;Le+=2){var Vd=Ke[Le+0],Me=Ke[Le+1];Vd*=xa;Me*=Qa;var vo=zc*Vd+Cb*Me;Ke[Le+0]=Cb*Vd-zc*Me+Jd[0];Ke[Le+1]=vo+Jd[1]}return Ke})},O1=function(fa,Ia,xa,Qa,eb,Mb,Ua,Fb,zb){return new D(fa,Ia,xa,Qa,eb,Mb,Ua,Fb,zb)};D.prototype={constructor:D,init:function(){},getTotalLength:function(){return(this||kc).length},getPointAtLength:function(fa){var Ia=this||kc;0>fa?fa=0:fa>(this||kc).length&&(fa=
(this||kc).length);for(var xa=(this||kc).partialLengths.length-1;(this||kc).partialLengths[xa]>=fa&&0<(this||kc).partialLengths[xa];)xa--;xa<(this||kc).partialLengths.length-1&&xa++;for(var Qa=0,eb=0;eb<xa;eb++)Qa+=Ia.partialLengths[eb];return(this||kc).curves[xa].getPointAtLength(fa-Qa)},getTangentAtLength:function(fa){var Ia=this||kc;0>fa?fa=0:fa>(this||kc).length&&(fa=(this||kc).length);for(var xa=(this||kc).partialLengths.length-1;(this||kc).partialLengths[xa]>=fa&&0<(this||kc).partialLengths[xa];)xa--;
xa<(this||kc).partialLengths.length-1&&xa++;for(var Qa=0,eb=0;eb<xa;eb++)Qa+=Ia.partialLengths[eb];return(this||kc).curves[xa].getTangentAtLength(fa-Qa)},getPropertiesAtLength:function(fa){var Ia=this.getTangentAtLength(fa);fa=this.getPointAtLength(fa);return{x:fa.x,y:fa.y,tangentX:Ia.x,tangentY:Ia.y}}};var hv=function(fa,Ia,xa,Qa){return new Q(fa,Ia,xa,Qa)};Q.prototype.getTotalLength=function(){return Math.sqrt(Math.pow((this||kc).x0-(this||kc).x1,2)+Math.pow((this||kc).y0-(this||kc).y1,2))};Q.prototype.getPointAtLength=
function(fa){fa/=Math.sqrt(Math.pow((this||kc).x0-(this||kc).x1,2)+Math.pow((this||kc).y0-(this||kc).y1,2));return{x:(this||kc).x0+((this||kc).x1-(this||kc).x0)*fa,y:(this||kc).y0+((this||kc).y1-(this||kc).y0)*fa}};Q.prototype.getTangentAtLength=function(){var fa=Math.sqrt(((this||kc).x1-(this||kc).x0)*((this||kc).x1-(this||kc).x0)+((this||kc).y1-(this||kc).y0)*((this||kc).y1-(this||kc).y0));return{x:((this||kc).x1-(this||kc).x0)/fa,y:((this||kc).y1-(this||kc).y0)/fa}};Q.prototype.getPropertiesAtLength=
function(fa){fa=this.getPointAtLength(fa);var Ia=this.getTangentAtLength();return{x:fa.x,y:fa.y,tangentX:Ia.x,tangentY:Ia.y}};var Zea=function(fa){function Ia(Ua){if(!Ua)return null;var Fb;Ua=lfa(Ua);for(var zb=[0,0],zc=[0,0],Cb=0;Cb<Ua.length;Cb++)"M"===Ua[Cb][0]?(zb=[Ua[Cb][1],Ua[Cb][2]],eb.push(null)):"m"===Ua[Cb][0]?(zb=[Ua[Cb][1]+zb[0],Ua[Cb][2]+zb[1]],eb.push(null)):"L"===Ua[Cb][0]?(xa+=Math.sqrt(Math.pow(zb[0]-Ua[Cb][1],2)+Math.pow(zb[1]-Ua[Cb][2],2)),eb.push(new hv(zb[0],Ua[Cb][1],zb[1],Ua[Cb][2])),
zb=[Ua[Cb][1],Ua[Cb][2]]):"l"===Ua[Cb][0]?(xa+=Math.sqrt(Math.pow(Ua[Cb][1],2)+Math.pow(Ua[Cb][2],2)),eb.push(new hv(zb[0],Ua[Cb][1]+zb[0],zb[1],Ua[Cb][2]+zb[1])),zb=[Ua[Cb][1]+zb[0],Ua[Cb][2]+zb[1]]):"H"===Ua[Cb][0]?(xa+=Math.abs(zb[0]-Ua[Cb][1]),eb.push(new hv(zb[0],Ua[Cb][1],zb[1],zb[1])),zb[0]=Ua[Cb][1]):"h"===Ua[Cb][0]?(xa+=Math.abs(Ua[Cb][1]),eb.push(new hv(zb[0],zb[0]+Ua[Cb][1],zb[1],zb[1])),zb[0]=Ua[Cb][1]+zb[0]):"V"===Ua[Cb][0]?(xa+=Math.abs(zb[1]-Ua[Cb][1]),eb.push(new hv(zb[0],zb[0],zb[1],
Ua[Cb][1])),zb[1]=Ua[Cb][1]):"v"===Ua[Cb][0]?(xa+=Math.abs(Ua[Cb][1]),eb.push(new hv(zb[0],zb[0],zb[1],zb[1]+Ua[Cb][1])),zb[1]=Ua[Cb][1]+zb[1]):"z"===Ua[Cb][0]||"Z"===Ua[Cb][0]?(xa+=Math.sqrt(Math.pow(Ua[0][1]-zb[0],2)+Math.pow(Ua[0][2]-zb[1],2)),eb.push(new hv(zb[0],Ua[0][1],zb[1],Ua[0][2])),zb=[Ua[0][1],Ua[0][2]]):"C"===Ua[Cb][0]?(Fb=new Tr(zb[0],zb[1],Ua[Cb][1],Ua[Cb][2],Ua[Cb][3],Ua[Cb][4],Ua[Cb][5],Ua[Cb][6]),xa+=Fb.getTotalLength(),zb=[Ua[Cb][5],Ua[Cb][6]],eb.push(Fb)):"c"===Ua[Cb][0]?(Fb=new Tr(zb[0],
zb[1],zb[0]+Ua[Cb][1],zb[1]+Ua[Cb][2],zb[0]+Ua[Cb][3],zb[1]+Ua[Cb][4],zb[0]+Ua[Cb][5],zb[1]+Ua[Cb][6]),xa+=Fb.getTotalLength(),zb=[Ua[Cb][5]+zb[0],Ua[Cb][6]+zb[1]],eb.push(Fb)):"S"===Ua[Cb][0]?(Fb=0<Cb&&-1<["C","c","S","s"].indexOf(Ua[Cb-1][0])?new Tr(zb[0],zb[1],2*zb[0]-Ua[Cb-1][Ua[Cb-1].length-4],2*zb[1]-Ua[Cb-1][Ua[Cb-1].length-3],Ua[Cb][1],Ua[Cb][2],Ua[Cb][3],Ua[Cb][4]):new Tr(zb[0],zb[1],zb[0],zb[1],Ua[Cb][1],Ua[Cb][2],Ua[Cb][3],Ua[Cb][4]),xa+=Fb.getTotalLength(),zb=[Ua[Cb][3],Ua[Cb][4]],eb.push(Fb)):
"s"===Ua[Cb][0]?(Fb=0<Cb&&-1<["C","c","S","s"].indexOf(Ua[Cb-1][0])?new Tr(zb[0],zb[1],zb[0]+Fb.d.x-Fb.c.x,zb[1]+Fb.d.y-Fb.c.y,zb[0]+Ua[Cb][1],zb[1]+Ua[Cb][2],zb[0]+Ua[Cb][3],zb[1]+Ua[Cb][4]):new Tr(zb[0],zb[1],zb[0],zb[1],zb[0]+Ua[Cb][1],zb[1]+Ua[Cb][2],zb[0]+Ua[Cb][3],zb[1]+Ua[Cb][4]),xa+=Fb.getTotalLength(),zb=[Ua[Cb][3]+zb[0],Ua[Cb][4]+zb[1]],eb.push(Fb)):"Q"===Ua[Cb][0]?(Fb=new Tr(zb[0],zb[1],Ua[Cb][1],Ua[Cb][2],Ua[Cb][3],Ua[Cb][4]),xa+=Fb.getTotalLength(),eb.push(Fb),zb=[Ua[Cb][3],Ua[Cb][4]],
zc=[Ua[Cb][1],Ua[Cb][2]]):"q"===Ua[Cb][0]?(Fb=new Tr(zb[0],zb[1],zb[0]+Ua[Cb][1],zb[1]+Ua[Cb][2],zb[0]+Ua[Cb][3],zb[1]+Ua[Cb][4]),xa+=Fb.getTotalLength(),zc=[zb[0]+Ua[Cb][1],zb[1]+Ua[Cb][2]],zb=[Ua[Cb][3]+zb[0],Ua[Cb][4]+zb[1]],eb.push(Fb)):"T"===Ua[Cb][0]?(Fb=0<Cb&&-1<["Q","q","T","t"].indexOf(Ua[Cb-1][0])?new Tr(zb[0],zb[1],2*zb[0]-zc[0],2*zb[1]-zc[1],Ua[Cb][1],Ua[Cb][2]):new hv(zb[0],Ua[Cb][1],zb[1],Ua[Cb][2]),eb.push(Fb),xa+=Fb.getTotalLength(),zc=[2*zb[0]-zc[0],2*zb[1]-zc[1]],zb=[Ua[Cb][1],Ua[Cb][2]]):
"t"===Ua[Cb][0]?(Fb=0<Cb&&-1<["Q","q","T","t"].indexOf(Ua[Cb-1][0])?new Tr(zb[0],zb[1],2*zb[0]-zc[0],2*zb[1]-zc[1],zb[0]+Ua[Cb][1],zb[1]+Ua[Cb][2]):new hv(zb[0],zb[0]+Ua[Cb][1],zb[1],zb[1]+Ua[Cb][2]),xa+=Fb.getTotalLength(),zc=[2*zb[0]-zc[0],2*zb[1]-zc[1]],zb=[Ua[Cb][1]+zb[0],Ua[Cb][2]+zb[0]],eb.push(Fb)):"A"===Ua[Cb][0]?(Fb=new O1(zb[0],zb[1],Ua[Cb][1],Ua[Cb][2],Ua[Cb][3],Ua[Cb][4],Ua[Cb][5],Ua[Cb][6],Ua[Cb][7]),xa+=Fb.getTotalLength(),zb=[Ua[Cb][6],Ua[Cb][7]],eb.push(Fb)):"a"===Ua[Cb][0]&&(Fb=new O1(zb[0],
zb[1],Ua[Cb][1],Ua[Cb][2],Ua[Cb][3],Ua[Cb][4],Ua[Cb][5],zb[0]+Ua[Cb][6],zb[1]+Ua[Cb][7]),xa+=Fb.getTotalLength(),zb=[zb[0]+Ua[Cb][6],zb[1]+Ua[Cb][7]],eb.push(Fb)),Qa.push(xa);return Ia}var xa=0,Qa=[],eb=[];Ia.getTotalLength=function(){return xa};Ia.getPointAtLength=function(Ua){Ua=Mb(Ua);return eb[Ua.i].getPointAtLength(Ua.fraction)};Ia.getTangentAtLength=function(Ua){Ua=Mb(Ua);return eb[Ua.i].getTangentAtLength(Ua.fraction)};Ia.getPropertiesAtLength=function(Ua){Ua=Mb(Ua);return eb[Ua.i].getPropertiesAtLength(Ua.fraction)};
var Mb=function(Ua){0>Ua?Ua=0:Ua>xa&&(Ua=xa);for(var Fb=Qa.length-1;Qa[Fb]>=Ua&&0<Qa[Fb];)Fb--;return Fb++,{fraction:Ua-Qa[Fb-1],i:Fb}};return Ia(fa)},PP='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n',$ea=function(fa,Ia){for(var xa,Qa,eb,Mb=fa.length,Ua=1/0,Fb=0;Fb<Mb;Fb++)!function(zb){Qa=0;Ia.forEach(function(zc,
Cb){zc=J(fa[(zb+Cb)%Mb],zc);Qa+=zc*zc});Qa<Ua&&(Ua=Qa,xa=zb)}(Fb);xa&&(eb=fa.splice(0,xa),fa.splice.apply(fa,[fa.length,0].concat(eb)))},gfa=H;H.deviation=function(fa,Ia,xa,Qa){var eb=Ia&&Ia.length,Mb=Math.abs(ue(fa,0,eb?Ia[0]*xa:fa.length,xa));if(eb){eb=0;for(var Ua=Ia.length;eb<Ua;eb++)Mb-=Math.abs(ue(fa,Ia[eb]*xa,eb<Ua-1?Ia[eb+1]*xa:fa.length,xa))}for(eb=Ia=0;eb<Qa.length;eb+=3){Ua=Qa[eb]*xa;var Fb=Qa[eb+1]*xa,zb=Qa[eb+2]*xa;Ia+=Math.abs((fa[Ua]-fa[zb])*(fa[Fb+1]-fa[Ua+1])-(fa[Ua]-fa[Fb])*(fa[zb+
1]-fa[Ua+1]))}return 0===Mb&&0===Ia?0:Math.abs((Ia-Mb)/Mb)};H.flatten=function(fa){for(var Ia=fa[0][0].length,xa={vertices:[],holes:[],dimensions:Ia},Qa=0,eb=0;eb<fa.length;eb++){for(var Mb=0;Mb<fa[eb].length;Mb++)for(var Ua=0;Ua<Ia;Ua++)xa.vertices.push(fa[eb][Mb][Ua]);0<eb&&(Qa+=fa[eb-1].length,xa.holes.push(Qa))}return xa};var mfa=function(fa){return fa},cfa=function(fa){if(null==fa)return mfa;var Ia,xa,Qa=fa.scale[0],eb=fa.scale[1],Mb=fa.translate[0],Ua=fa.translate[1];return function(Fb,zb){zb||
(Ia=xa=0);zb=2;var zc=Fb.length,Cb=Array(zc);Cb[0]=(Ia+=Fb[0])*Qa+Mb;for(Cb[1]=(xa+=Fb[1])*eb+Ua;zb<zc;)Cb[zb]=Fb[zb],++zb;return Cb}},ffa=function(fa,Ia){return"GeometryCollection"===Ia.type?{type:"FeatureCollection",features:Ia.geometries.map(function(xa){return ye(fa,xa)})}:ye(fa,Ia)},dfa=function(fa,Ia){function xa(zc){var Cb,nd=fa.arcs[0>zc?~zc:zc],Jd=nd[0];return fa.transform?(Cb=[0,0],nd.forEach(function(Ke){Cb[0]+=Ke[0];Cb[1]+=Ke[1]})):Cb=nd[nd.length-1],0>zc?[Cb,Jd]:[Jd,Cb]}function Qa(zc,
Cb){for(var nd in zc){var Jd=zc[nd];delete Cb[Jd.start];delete Jd.start;delete Jd.end;Jd.forEach(function(Ke){eb[0>Ke?~Ke:Ke]=1});Fb.push(Jd)}}var eb={},Mb={},Ua={},Fb=[],zb=-1;return Ia.forEach(function(zc,Cb){var nd,Jd=fa.arcs[0>zc?~zc:zc];3>Jd.length&&!Jd[1][0]&&!Jd[1][1]&&(nd=Ia[++zb],Ia[zb]=zc,Ia[Cb]=nd)}),Ia.forEach(function(zc){var Cb=xa(zc);var nd=Cb[0],Jd=Cb[1];(Cb=Ua[nd])?(delete Ua[Cb.end],Cb.push(zc),Cb.end=Jd,zc=Mb[Jd])?(delete Mb[zc.start],nd=zc===Cb?Cb:Cb.concat(zc),Mb[nd.start=Cb.start]=
Ua[nd.end=zc.end]=nd):Mb[Cb.start]=Ua[Cb.end]=Cb:(Cb=Mb[Jd])?(delete Mb[Cb.start],Cb.unshift(zc),Cb.start=nd,zc=Ua[nd])?(delete Ua[zc.end],nd=zc===Cb?Cb:zc.concat(Cb),Mb[nd.start=zc.start]=Ua[nd.end=Cb.end]=nd):Mb[Cb.start]=Ua[Cb.end]=Cb:(Cb=[zc],Mb[Cb.start=nd]=Ua[Cb.end=Jd]=Cb)}),Qa(Ua,Mb),Qa(Mb,Ua),Ia.forEach(function(zc){eb[0>zc?~zc:zc]||Fb.push([zc])}),Fb},P1=function(fa,Ia){for(var xa=0,Qa=fa.length;xa<Qa;){var eb=xa+Qa>>>1;fa[eb]<Ia?xa=eb+1:Qa=eb}return xa},efa=function(fa){function Ia(Le,
Vd){Le.forEach(function(Me){0>Me&&(Me=~Me);var vo=eb[Me];vo?vo.push(Vd):eb[Me]=[Vd]})}function xa(Le,Vd){Le.forEach(function(Me){Ia(Me,Vd)})}function Qa(Le,Vd){"GeometryCollection"===Le.type?Le.geometries.forEach(function(Me){Qa(Me,Vd)}):Le.type in Ua&&Ua[Le.type](Le.arcs,Vd)}var eb={},Mb=fa.map(function(){return[]}),Ua={LineString:Ia,MultiLineString:xa,Polygon:xa,MultiPolygon:function(Le,Vd){Le.forEach(function(Me){xa(Me,Vd)})}};fa.forEach(Qa);for(var Fb in eb){fa=eb[Fb];for(var zb=fa.length,zc=
0;zc<zb;++zc)for(var Cb=zc+1;Cb<zb;++Cb){var nd,Jd=fa[zc],Ke=fa[Cb];(nd=Mb[Jd])[Fb=P1(nd,Ke)]!==Ke&&nd.splice(Fb,0,Ke);(nd=Mb[Ke])[Fb=P1(nd,Jd)]!==Jd&&nd.splice(Fb,0,Jd)}}return Mb},M1=function(fa,Ia){return fa<Ia?-1:fa>Ia?1:fa>=Ia?0:NaN},N1=function(fa){return 1===fa.length&&(fa=Tg(fa)),{left:function(Ia,xa,Qa,eb){null==Qa&&(Qa=0);for(null==eb&&(eb=Ia.length);Qa<eb;){var Mb=Qa+eb>>>1;0>fa(Ia[Mb],xa)?Qa=Mb+1:eb=Mb}return Qa},right:function(Ia,xa,Qa,eb){null==Qa&&(Qa=0);for(null==eb&&(eb=Ia.length);Qa<
eb;){var Mb=Qa+eb>>>1;0<fa(Ia[Mb],xa)?eb=Mb:Qa=Mb+1}return Qa}}};N1(M1);var hfa=function(fa,Ia){return Kh(sg(zg(fa),fa),Ia)},ifa=function(fa,Ia){if(8<fa.length)return fa.map(function(Qa,eb){return eb});var xa=fa.map(function(Qa){return Ia.map(function(eb){eb=J(bb(Qa),bb(eb));return eb*eb})});return Hf(fa,Ia,xa)};e.interpolate=function(fa,Ia,xa){void 0===xa&&(xa={});var Qa=xa.maxSegmentLength;void 0===Qa&&(Qa=10);xa=xa.string;void 0===xa&&(xa=!0);var eb=qa(fa,Qa);Qa=qa(Ia,Qa);var Mb=ua(eb,Qa,xa);return!xa||
"string"!=typeof fa&&"string"!=typeof Ia?Mb:function(Ua){return 1E-4>Ua&&"string"==typeof fa?fa:1E-4>1-Ua&&"string"==typeof Ia?Ia:Mb(Ua)}};e.separate=hg;e.combine=function(fa,Ia,xa){void 0===xa&&(xa={});var Qa=xa.maxSegmentLength;void 0===Qa&&(Qa=10);var eb=xa.string;void 0===eb&&(eb=!0);xa=xa.single;void 0===xa&&(xa=!1);var Mb=hg(Ia,fa,{maxSegmentLength:Qa,string:eb,single:xa});return xa?function(Ua){return Mb(1-Ua)}:Mb.map(function(Ua){return function(Fb){return Ua(1-Fb)}})};e.interpolateAll=function(fa,
Ia,xa){void 0===xa&&(xa={});var Qa=xa.maxSegmentLength;void 0===Qa&&(Qa=10);var eb=xa.string;void 0===eb&&(eb=!0);xa=xa.single;if(void 0===xa&&(xa=!1),!Array.isArray(fa)||!Array.isArray(Ia)||fa.length!==Ia.length||!fa.length)throw new TypeError("flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).");var Mb,Ua,Fb=function(zc){return qa(zc,Qa)},
zb=fa.map(Fb);Fb=Ia.map(Fb);return xa?(fa.every(function(zc){return"string"==typeof zc})&&(Mb=fa.slice(0)),Ia.every(function(zc){return"string"==typeof zc})&&(Ua=Ia.slice(0))):(Mb=fa.slice(0),Ua=Ia.slice(0)),Ag(zb,Fb,{string:eb,single:xa,t0:Mb,t1:Ua,match:!1})};e.splitPathString=function(fa){return pb((new qB(fa)).abs())};e.toPathString=oa;e.fromCircle=Ch;e.toCircle=function(fa,Ia,xa,Qa,eb){var Mb=Ch(Ia,xa,Qa,fa,eb);return function(Ua){return Mb(1-Ua)}};e.fromRect=Xh;e.toRect=function(fa,Ia,xa,Qa,
eb,Mb){var Ua=Xh(Ia,xa,Qa,eb,fa,Mb);return function(Fb){return Ua(1-Fb)}};Object.defineProperty(e,"__esModule",{value:!0})});var nfa={},ofa="function"===typeof Float32Array,pfa=nfa=function(e,h,n,b){if(!(0<=e&&1>=e&&0<=n&&1>=n))throw Error("bezier x values must be in [0, 1] range");if(e===h&&n===b)return td;for(var c=ofa?new Float32Array(11):Array(11),l=0;11>l;++l)c[l]=Wx(.1*l,e,n);return function(a){if(0===a)return 0;if(1===a)return 1;for(var f=0,m=1;10!==m&&c[m]<=a;++m)f+=.1;--m;m=f+(a-c[m])/(c[m+
1]-c[m])*.1;var q=3*(1-3*n+3*e)*m*m+2*(3*n-6*e)*m+3*e;if(.001<=q){for(f=0;4>f;++f){q=3*(1-3*n+3*e)*m*m+2*(3*n-6*e)*m+3*e;if(0===q)break;var r=Wx(m,e,n)-a;m-=r/q}a=m}else if(0===q)a=m;else{m=f;f+=.1;var u=0;do r=m+(f-m)/2,q=Wx(r,e,n)-a,0<q?f=r:m=r;while(1E-7<Math.abs(q)&&10>++u);a=r}return Wx(a,h,b)}},bc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;!function(){var e={},h={};!function(n,b){function c(){(this||bc)._delay=0;(this||bc)._endDelay=0;(this||bc)._fill="none";
(this||bc)._iterationStart=0;(this||bc)._iterations=1;(this||bc)._duration=0;(this||bc)._playbackRate=1;(this||bc)._direction="normal";(this||bc)._easing="linear";(this||bc)._easingFunction=z}function l(){return n.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function a(O,ja,X){var ha=new c;return ja&&(ha.fill="both",ha.duration="auto"),"number"!=typeof O||isNaN(O)?void 0!==O&&Object.getOwnPropertyNames(O).forEach(function(bb){"auto"==O[bb]||
("number"==typeof ha[bb]||"duration"==bb)&&("number"!=typeof O[bb]||isNaN(O[bb]))||"fill"==bb&&-1==v.indexOf(O[bb])||"direction"==bb&&-1==y.indexOf(O[bb])||"playbackRate"==bb&&1!==O[bb]&&n.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead.")||(ha[bb]=O[bb])}):ha.duration=O,ha}function f(O,ja,X,ha){return 0>O||1<O||0>X||1<X?z:function(bb){if(0>=bb){var pb=0;return 0<O?pb=ja/O:!ja&&0<X&&(pb=ha/X),pb*bb}if(1<=bb)return pb=0,1>X?pb=(ha-1)/(X-1):1==X&&1>
O&&(pb=(ja-1)/(O-1)),1+pb*(bb-1);pb=0;for(var oa=1;pb<oa;){var ba=(pb+oa)/2,qa=3*O*(1-ba)*(1-ba)*ba+3*X*(1-ba)*ba*ba+ba*ba*ba;if(1E-5>Math.abs(bb-qa))break;qa<bb?pb=ba:oa=ba}return 3*ja*(1-ba)*(1-ba)*ba+3*ha*(1-ba)*ba*ba+ba*ba*ba}}function m(O,ja){return function(X){if(1<=X)return 1;var ha=1/O;return(X+=ja*ha)-X%ha}}function q(O){N||(N=document.createElement("div").style);N.animationTimingFunction="";N.animationTimingFunction=O;var ja=N.animationTimingFunction;if(""==ja&&l())throw new TypeError(O+
" is not a valid value for easing");return ja}function r(O){if("linear"==O)return z;var ja=L.exec(O);return ja?f.apply(this||bc,ja.slice(1).map(Number)):(ja=W.exec(O))?m(Number(ja[1]),G):(ja=la.exec(O))?m(Number(ja[1]),{start:A,middle:C,end:G}[ja[2]]):F[O]||z}function u(O,ja,X){if(null==ja)return wa;var ha=X.delay+O+X.endDelay;return ja<Math.min(X.delay,ha)?D:ja>=Math.min(X.delay+O,ha)?Q:J}var v=["backwards","forwards","both","none"],y=["reverse","alternate","alternate-reverse"],z=function(O){return O};
c.prototype={_setMember:function(O,ja){(this||bc)["_"+O]=ja;(this||bc)._effect&&((this||bc)._effect._timingInput[O]=ja,(this||bc)._effect._timing=n.normalizeTimingInput((this||bc)._effect._timingInput),(this||bc)._effect.activeDuration=n.calculateActiveDuration((this||bc)._effect._timing),(this||bc)._effect._animation&&(this||bc)._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return(this||bc)._playbackRate},set delay(O){this._setMember("delay",O)},get delay(){return(this||bc)._delay},
set endDelay(O){this._setMember("endDelay",O)},get endDelay(){return(this||bc)._endDelay},set fill(O){this._setMember("fill",O)},get fill(){return(this||bc)._fill},set iterationStart(O){if((isNaN(O)||0>O)&&l())throw new TypeError("iterationStart must be a non-negative number, received: "+O);this._setMember("iterationStart",O)},get iterationStart(){return(this||bc)._iterationStart},set duration(O){if("auto"!=O&&(isNaN(O)||0>O)&&l())throw new TypeError("duration must be non-negative or auto, received: "+
O);this._setMember("duration",O)},get duration(){return(this||bc)._duration},set direction(O){this._setMember("direction",O)},get direction(){return(this||bc)._direction},set easing(O){(this||bc)._easingFunction=r(q(O));this._setMember("easing",O)},get easing(){return(this||bc)._easing},set iterations(O){if((isNaN(O)||0>O)&&l())throw new TypeError("iterations must be non-negative, received: "+O);this._setMember("iterations",O)},get iterations(){return(this||bc)._iterations}};var A=1,C=.5,G=0,F={ease:f(.25,
.1,.25,1),"ease-in":f(.42,0,1,1),"ease-out":f(0,0,.58,1),"ease-in-out":f(.42,0,.58,1),"step-start":m(1,A),"step-middle":m(1,C),"step-end":m(1,G)},N=null,L=/cubic-bezier\(\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*\)/,W=/steps\(\s*(\d+)\s*\)/,la=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,wa=0,D=1,Q=2,J=3;n.cloneTimingInput=function(O){if("number"==typeof O)return O;var ja={},X;for(X in O)ja[X]=O[X];return ja};n.makeTiming=a;n.numericTimingToObject=
function(O){return"number"==typeof O&&(O=isNaN(O)?{duration:0}:{duration:O}),O};n.normalizeTimingInput=function(O,ja){return O=n.numericTimingToObject(O),a(O,ja)};n.calculateActiveDuration=function(O){return Math.abs((0===O.duration||0===O.iterations?0:O.duration*O.iterations)/O.playbackRate)};n.calculateIterationProgress=function(O,ja,X){var ha=u(O,ja,X);a:{var bb=X.fill;switch(ha){case D:O="backwards"==bb||"both"==bb?0:null;break a;case J:O=ja-X.delay;break a;case Q:O="forwards"==bb||"both"==bb?
O:null;break a;case wa:O=null;break a}O=void 0}if(null===O)return null;ja=X.duration;bb=X.iterationStart;ja=(0===ja?ha!==D&&(bb+=X.iterations):bb+=O/ja,bb);bb=ja===1/0?X.iterationStart%1:ja%1;O=(0!==bb||ha!==Q||0===X.iterations||0===O&&0!==X.duration||(bb=1),bb);bb=ha===Q&&X.iterations===1/0?1/0:1===O?Math.floor(ja)-1:Math.floor(ja);ja=ha=X.direction;"normal"!==ha&&"reverse"!==ha&&("alternate-reverse"===ha&&(bb+=1),ja="normal",bb!==1/0&&0!=bb%2&&(ja="reverse"));return X._easingFunction("normal"===
ja?O:1-O)};n.calculatePhase=u;n.normalizeEasing=q;n.parseEasingFunction=r}(e);(function(n,b){function c(m){var q=[],r;for(r in m)if(!(r in["easing","offset","composite"])){var u=m[r];Array.isArray(u)||(u=[u]);for(var v,y=u.length,z=0;z<y;z++)v={},v.offset="offset"in m?m.offset:1==y?1:z/(y-1),"easing"in m&&(v.easing=m.easing),"composite"in m&&(v.composite=m.composite),v[r]=u[z],q.push(v)}return q.sort(function(A,C){return A.offset-C.offset}),q}var l={background:"backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundAttachment backgroundOrigin backgroundClip backgroundColor".split(" "),
border:"borderTopColor borderTopStyle borderTopWidth borderRightColor borderRightStyle borderRightWidth borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth".split(" "),borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius",
"borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:"fontFamily fontSize fontStyle fontVariant fontWeight lineHeight".split(" "),margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle",
"outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},a=document.createElementNS("http://www.w3.org/1999/xhtml","div");b={thin:"1px",medium:"3px",thick:"5px"};var f={borderBottomWidth:b,borderLeftWidth:b,borderRightWidth:b,borderTopWidth:b,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:b,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};
n.convertToArrayForm=c;n.normalizeKeyframes=function(m){function q(){var z=r.length;null==r[z-1].offset&&(r[z-1].offset=1);1<z&&null==r[0].offset&&(r[0].offset=0);for(var A=0,C=r[0].offset,G=1;G<z;G++){var F=r[G].offset;if(null!=F){for(var N=1;N<G-A;N++)r[A+N].offset=C+(F-C)*N/(G-A);A=G;C=F}}}if(null==m)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&m[Symbol.iterator]&&(m=Array.from(m));Array.isArray(m)||(m=c(m));var r=m.map(function(z){var A={},C;for(C in z){var G=z[C];if("offset"==
C){if(null!=G){if(G=Number(G),!isFinite(G))throw new TypeError("Keyframe offsets must be numbers.");if(0>G||1<G)throw new TypeError("Keyframe offsets must be between 0 and 1.");}}else if("composite"==C){if("add"==G||"accumulate"==G)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};if("replace"!=G)throw new TypeError("Invalid composite mode "+G+".");}else G="easing"==C?n.normalizeEasing(G):""+G;var F=void 0,N=C,L=G;G=A;var W=N;if("display"!==
W&&0!==W.lastIndexOf("animation",0)&&0!==W.lastIndexOf("transition",0))if(W=l[N])for(F in a.style[N]=L,W)N=W[F],L=a.style[N],G[N]=N in f?f[N][L]||L:L;else G[N]=N in f?f[N][L]||L:L}return void 0==A.offset&&(A.offset=null),void 0==A.easing&&(A.easing="linear"),A});m=!0;for(var u=-1/0,v=0;v<r.length;v++){var y=r[v].offset;if(null!=y){if(y<u)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");u=y}else m=!1}return r=r.filter(function(z){return 0<=z.offset&&1>=z.offset}),
m||q(),r}})(e);(function(n){var b={};n.isDeprecated=function(c,l,a,f){f=f?"are":"is";var m=new Date;l=new Date(l);return l.setMonth(l.getMonth()+3),!(m<l&&(c in b||console.warn("Web Animations: "+c+" "+f+" deprecated and will stop working on "+l.toDateString()+". "+a),b[c]=!0,1))};n.deprecated=function(c,l,a,f){var m=f?"are":"is";if(n.isDeprecated(c,l,a,f))throw Error(c+" "+m+" no longer supported. "+a);}})(e);(function(){if(document.documentElement.animate){var n=document.documentElement.animate([],
0),b=!0;if(n&&(b=!1,"play currentTime pause reverse playbackRate cancel finish startTime playState".split(" ").forEach(function(c){void 0===n[c]&&(b=!0)})),!b)return}!function(c,l,a){function f(q){for(var r={},u=0;u<q.length;u++)for(var v in q[u])if("offset"!=v&&"easing"!=v&&"composite"!=v){var y={offset:q[u].offset,easing:q[u].easing,value:q[u][v]};r[v]=r[v]||[];r[v].push(y)}for(var z in r)if(q=r[z],0!=q[0].offset||1!=q[q.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",
message:"Partial keyframes are not supported"};return r}function m(q){var r=[],u;for(u in q)for(var v=q[u],y=0;y<v.length-1;y++){var z=y,A=y+1,C=v[z].offset,G=v[A].offset,F=C,N=G;0==y&&(F=-1/0,0==G&&(A=z));y==v.length-2&&(N=1/0,1==C&&(z=A));r.push({applyFrom:F,applyTo:N,startOffset:v[z].offset,endOffset:v[A].offset,easingFunction:c.parseEasingFunction(v[z].easing),property:u,interpolation:l.propertyInterpolation(u,v[z].value,v[A].value)})}return r.sort(function(L,W){return L.startOffset-W.startOffset}),
r}l.convertEffectInput=function(q){q=c.normalizeKeyframes(q);var r=f(q),u=m(r);return function(v,y){if(null!=y)u.filter(function(A){return y>=A.applyFrom&&y<A.applyTo}).forEach(function(A){var C=y-A.startOffset,G=A.endOffset-A.startOffset;C=0==G?0:A.easingFunction(C/G);l.apply(v,A.property,A.interpolation(C))});else for(var z in r)"offset"!=z&&"easing"!=z&&"composite"!=z&&l.clear(v,z)}}}(e,h);(function(c,l,a){function f(r){return r.replace(/-(.)/g,function(u,v){return v.toUpperCase()})}var m={};l.addPropertiesHandler=
function(r,u,v){for(var y=0;y<v.length;y++){var z=r,A=u,C=f(v[y]);m[C]=m[C]||[];m[C].push([z,A])}};var q={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",
bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",
textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};l.propertyInterpolation=function(r,u,v){var y=r;/-/.test(r)&&!c.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(y=f(r));"initial"!=u&&"initial"!=v||("initial"==u&&(u=q[y]),"initial"==v&&(v=q[y]));r=u==v?[]:m[y];for(y=0;r&&y<r.length;y++){var z=r[y][0](u),A=r[y][0](v);if(void 0!==z&&void 0!==A&&(z=
r[y][1](z,A))){var C=l.Interpolation.apply(null,z);return function(G){return 0==G?u:1==G?v:C(G)}}}return l.Interpolation(!1,!0,function(G){return G?v:u})}})(e,h);(function(c,l,a){function f(m){var q=c.calculateActiveDuration(m),r=function(u){return c.calculateIterationProgress(q,u,m)};return r._totalDuration=m.delay+q+m.endDelay,r}l.KeyframeEffect=function(m,q,r,u){var v,y=f(c.normalizeTimingInput(r)),z=l.convertEffectInput(q);q=function(){z(m,v)};return q._update=function(A){return null!==(v=y(A))},
q._clear=function(){z(m,null)},q._hasSameTarget=function(A){return m===A},q._target=m,q._totalDuration=y._totalDuration,q._id=u,q}})(e,h);(function(c,l){function a(z,A,C){C.enumerable=!0;C.configurable=!0;Object.defineProperty(z,A,C)}function f(z){(this||bc)._element=z;(this||bc)._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style;(this||bc)._style=z.style;(this||bc)._length=0;(this||bc)._isAnimatedProperty={};var A=window;z=!(!z.namespaceURI||-1==z.namespaceURI.indexOf("/svg"))&&
(q in A||(A[q]=/Trident|MSIE|IEMobile|Edge|Android 4/i.test(A.navigator.userAgent)),A[q]);(this||bc)._updateSvgTransformAttr=z;(this||bc)._savedTransformAttr=null;for(z=0;z<(this||bc)._style.length;z++)A=(this||bc)._style[z],(this||bc)._surrogateStyle[A]=(this||bc)._style[A];this._updateIndices()}function m(z){if(!z._webAnimationsPatchedStyle){var A=new f(z);try{a(z,"style",{get:function(){return A}})}catch(C){z.style._set=function(G,F){z.style[G]=F},z.style._clear=function(G){z.style[G]=""}}z._webAnimationsPatchedStyle=
z.style}}var q="_webAnimationsUpdateSvgTransformAttr";l={cssText:1,length:1,parentRule:1};var r={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},u={removeProperty:1,setProperty:1};f.prototype={get cssText(){return(this||bc)._surrogateStyle.cssText},set cssText(z){for(var A={},C=0;C<(this||bc)._surrogateStyle.length;C++)A[(this||bc)._surrogateStyle[C]]=!0;(this||bc)._surrogateStyle.cssText=z;this._updateIndices();for(C=0;C<(this||bc)._surrogateStyle.length;C++)A[(this||
bc)._surrogateStyle[C]]=!0;for(var G in A)(this||bc)._isAnimatedProperty[G]||(this||bc)._style.setProperty(G,(this||bc)._surrogateStyle.getPropertyValue(G))},get length(){return(this||bc)._surrogateStyle.length},get parentRule(){return(this||bc)._style.parentRule},_updateIndices:function(){for(;(this||bc)._length<(this||bc)._surrogateStyle.length;)Object.defineProperty(this||bc,(this||bc)._length,{configurable:!0,enumerable:!1,get:function(z){return function(){return(this||bc)._surrogateStyle[z]}}((this||
bc)._length)}),(this||bc)._length++;for(;(this||bc)._length>(this||bc)._surrogateStyle.length;)(this||bc)._length--,Object.defineProperty(this||bc,(this||bc)._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(z,A){(this||bc)._style[z]=A;(this||bc)._isAnimatedProperty[z]=!0;(this||bc)._updateSvgTransformAttr&&"transform"==c.unprefixedPropertyName(z)&&(null==(this||bc)._savedTransformAttr&&((this||bc)._savedTransformAttr=(this||bc)._element.getAttribute("transform")),(this||bc)._element.setAttribute("transform",
c.transformToSvgMatrix(A)))},_clear:function(z){(this||bc)._style[z]=(this||bc)._surrogateStyle[z];(this||bc)._updateSvgTransformAttr&&"transform"==c.unprefixedPropertyName(z)&&((this||bc)._savedTransformAttr?(this||bc)._element.setAttribute("transform",(this||bc)._savedTransformAttr):(this||bc)._element.removeAttribute("transform"),(this||bc)._savedTransformAttr=null);delete (this||bc)._isAnimatedProperty[z]}};for(var v in r)f.prototype[v]=function(z,A){return function(){var C=(this||bc)._surrogateStyle[z].apply((this||
bc)._surrogateStyle,arguments);return A&&((this||bc)._isAnimatedProperty[arguments[0]]||(this||bc)._style[z].apply((this||bc)._style,arguments),this._updateIndices()),C}}(v,v in u);for(var y in document.documentElement.style)y in l||y in r||function(z){a(f.prototype,z,{get:function(){return(this||bc)._surrogateStyle[z]},set:function(A){(this||bc)._surrogateStyle[z]=A;this._updateIndices();(this||bc)._isAnimatedProperty[z]||((this||bc)._style[z]=A)}})}(y);c.apply=function(z,A,C){m(z);z.style._set(c.propertyName(A),
C)};c.clear=function(z,A){z._webAnimationsPatchedStyle&&z.style._clear(c.propertyName(A))}})(h);(function(c){window.Element.prototype.animate=function(l,a){var f="";return a&&a.id&&(f=a.id),c.timeline._play(c.KeyframeEffect(this||bc,l,a,f))}})(h);(function(c,l){function a(f,m,q){if("number"==typeof f&&"number"==typeof m)return f*(1-q)+m*q;if("boolean"==typeof f&&"boolean"==typeof m)return.5>q?f:m;if(f.length==m.length){for(var r=[],u=0;u<f.length;u++)r.push(a(f[u],m[u],q));return r}throw"Mismatched interpolation arguments "+
f+":"+m;}c.Interpolation=function(f,m,q){return function(r){return q(a(f,m,r))}}})(h);(function(c,l){l=function(){function a(f,m){for(var q=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;4>r;r++)for(var u=0;4>u;u++)for(var v=0;4>v;v++)q[r][u]+=m[r][v]*f[v][u];return q}return function(f,m,q,r,u){for(var v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],y=0;4>y;y++)v[y][3]=u[y];for(y=0;3>y;y++)for(u=0;3>u;u++)v[3][y]+=f[u]*v[u][y];f=r[0];y=r[1];u=r[2];r=r[3];var z=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];
z[0][0]=1-2*(y*y+u*u);z[0][1]=2*(f*y-u*r);z[0][2]=2*(f*u+y*r);z[1][0]=2*(f*y+u*r);z[1][1]=1-2*(f*f+u*u);z[1][2]=2*(y*u-f*r);z[2][0]=2*(f*u-y*r);z[2][1]=2*(y*u+f*r);z[2][2]=1-2*(f*f+y*y);v=a(v,z);r=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];q[2]&&(r[2][1]=q[2],v=a(v,r));q[1]&&(r[2][1]=0,r[2][0]=q[0],v=a(v,r));q[0]&&(r[2][0]=0,r[1][0]=q[0],v=a(v,r));for(y=0;3>y;y++)for(u=0;3>u;u++)v[y][u]*=m[y];return 0==v[0][2]&&0==v[0][3]&&0==v[1][2]&&0==v[1][3]&&0==v[2][0]&&0==v[2][1]&&1==v[2][2]&&0==v[2][3]&&0==
v[3][2]&&1==v[3][3]?[v[0][0],v[0][1],v[1][0],v[1][1],v[3][0],v[3][1]]:v[0].concat(v[1],v[2],v[3])}}();c.composeMatrix=l;c.quat=function(a,f,m){var q=c.dot(a,f);q=Math.max(Math.min(q,1),-1);var r=[];if(1===q)r=a;else for(var u=Math.acos(q),v=1*Math.sin(m*u)/Math.sqrt(1-q*q),y=0;4>y;y++)r.push(a[y]*(Math.cos(m*u)-q*v)+f[y]*v);return r}})(h);(function(c,l,a){c.sequenceNumber=0;var f=function(m,q,r){(this||bc).target=m;(this||bc).currentTime=q;(this||bc).timelineTime=r;(this||bc).type="finish";(this||
bc).bubbles=!1;(this||bc).cancelable=!1;(this||bc).currentTarget=m;(this||bc).defaultPrevented=!1;(this||bc).eventPhase=Event.AT_TARGET;(this||bc).timeStamp=Date.now()};l.Animation=function(m){(this||bc).id="";m&&m._id&&((this||bc).id=m._id);(this||bc)._sequenceNumber=c.sequenceNumber++;(this||bc)._currentTime=0;(this||bc)._startTime=null;(this||bc)._paused=!1;(this||bc)._playbackRate=1;(this||bc)._inTimeline=!0;(this||bc)._finishedFlag=!0;(this||bc).onfinish=null;(this||bc)._finishHandlers=[];(this||
bc)._effect=m;(this||bc)._inEffect=(this||bc)._effect._update(0);(this||bc)._idle=!0;(this||bc)._currentTimePending=!1};l.Animation.prototype={_ensureAlive:function(){0>(this||bc).playbackRate&&0===(this||bc).currentTime?(this||bc)._inEffect=(this||bc)._effect._update(-1):(this||bc)._inEffect=(this||bc)._effect._update((this||bc).currentTime);(this||bc)._inTimeline||!(this||bc)._inEffect&&(this||bc)._finishedFlag||((this||bc)._inTimeline=!0,l.timeline._animations.push(this||bc))},_tickCurrentTime:function(m,
q){m!=(this||bc)._currentTime&&((this||bc)._currentTime=m,(this||bc)._isFinished&&!q&&((this||bc)._currentTime=0<(this||bc)._playbackRate?(this||bc)._totalDuration:0),this._ensureAlive())},get currentTime(){return(this||bc)._idle||(this||bc)._currentTimePending?null:(this||bc)._currentTime},set currentTime(m){m=+m;isNaN(m)||(l.restart(),(this||bc)._paused||null==(this||bc)._startTime||((this||bc)._startTime=(this||bc)._timeline.currentTime-m/(this||bc)._playbackRate),(this||bc)._currentTimePending=
!1,(this||bc)._currentTime!=m&&((this||bc)._idle&&((this||bc)._idle=!1,(this||bc)._paused=!0),this._tickCurrentTime(m,!0),l.applyDirtiedAnimation(this||bc)))},get startTime(){return(this||bc)._startTime},set startTime(m){m=+m;isNaN(m)||(this||bc)._paused||(this||bc)._idle||((this||bc)._startTime=m,this._tickCurrentTime(((this||bc)._timeline.currentTime-(this||bc)._startTime)*(this||bc).playbackRate),l.applyDirtiedAnimation(this||bc))},get playbackRate(){return(this||bc)._playbackRate},set playbackRate(m){if(m!=
(this||bc)._playbackRate){var q=(this||bc).currentTime;(this||bc)._playbackRate=m;(this||bc)._startTime=null;"paused"!=(this||bc).playState&&"idle"!=(this||bc).playState&&((this||bc)._finishedFlag=!1,(this||bc)._idle=!1,this._ensureAlive(),l.applyDirtiedAnimation(this||bc));null!=q&&((this||bc).currentTime=q)}},get _isFinished(){return!(this||bc)._idle&&(0<(this||bc)._playbackRate&&(this||bc)._currentTime>=(this||bc)._totalDuration||0>(this||bc)._playbackRate&&0>=(this||bc)._currentTime)},get _totalDuration(){return(this||
bc)._effect._totalDuration},get playState(){return(this||bc)._idle?"idle":null==(this||bc)._startTime&&!(this||bc)._paused&&0!=(this||bc).playbackRate||(this||bc)._currentTimePending?"pending":(this||bc)._paused?"paused":(this||bc)._isFinished?"finished":"running"},_rewind:function(){if(0<=(this||bc)._playbackRate)(this||bc)._currentTime=0;else{if(!((this||bc)._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");
(this||bc)._currentTime=(this||bc)._totalDuration}},play:function(){(this||bc)._paused=!1;((this||bc)._isFinished||(this||bc)._idle)&&(this._rewind(),(this||bc)._startTime=null);(this||bc)._finishedFlag=!1;(this||bc)._idle=!1;this._ensureAlive();l.applyDirtiedAnimation(this||bc)},pause:function(){(this||bc)._isFinished||(this||bc)._paused||(this||bc)._idle?(this||bc)._idle&&(this._rewind(),(this||bc)._idle=!1):(this||bc)._currentTimePending=!0;(this||bc)._startTime=null;(this||bc)._paused=!0},finish:function(){(this||
bc)._idle||((this||bc).currentTime=0<(this||bc)._playbackRate?(this||bc)._totalDuration:0,(this||bc)._startTime=(this||bc)._totalDuration-(this||bc).currentTime,(this||bc)._currentTimePending=!1,l.applyDirtiedAnimation(this||bc))},cancel:function(){(this||bc)._inEffect&&((this||bc)._inEffect=!1,(this||bc)._idle=!0,(this||bc)._paused=!1,(this||bc)._finishedFlag=!0,(this||bc)._currentTime=0,(this||bc)._startTime=null,(this||bc)._effect._update(null),l.applyDirtiedAnimation(this||bc))},reverse:function(){(this||
bc).playbackRate*=-1;this.play()},addEventListener:function(m,q){"function"==typeof q&&"finish"==m&&(this||bc)._finishHandlers.push(q)},removeEventListener:function(m,q){"finish"==m&&(m=(this||bc)._finishHandlers.indexOf(q),0<=m&&(this||bc)._finishHandlers.splice(m,1))},_fireEvents:function(m){if((this||bc)._isFinished){if(!(this||bc)._finishedFlag){var q=new f(this||bc,(this||bc)._currentTime,m),r=(this||bc)._finishHandlers.concat((this||bc).onfinish?[(this||bc).onfinish]:[]);setTimeout(function(){r.forEach(function(u){u.call(q.target,
q)})},0);(this||bc)._finishedFlag=!0}}else(this||bc)._finishedFlag=!1},_tick:function(m,q){(this||bc)._idle||(this||bc)._paused||(null==(this||bc)._startTime?q&&((this||bc).startTime=m-(this||bc)._currentTime/(this||bc).playbackRate):(this||bc)._isFinished||this._tickCurrentTime((m-(this||bc)._startTime)*(this||bc).playbackRate));q&&((this||bc)._currentTimePending=!1,this._fireEvents(m))},get _needsTick(){return(this||bc).playState in{pending:1,running:1}||!(this||bc)._finishedFlag},_targetAnimations:function(){var m=
(this||bc)._effect._target;return m._activeAnimations||(m._activeAnimations=[]),m._activeAnimations},_markTarget:function(){var m=this._targetAnimations();-1===m.indexOf(this||bc)&&m.push(this||bc)},_unmarkTarget:function(){var m=this._targetAnimations(),q=m.indexOf(this||bc);-1!==q&&m.splice(q,1)}}})(e,h);(function(c,l,a){function f(L){var W=y;y=[];L<N.currentTime&&(L=N.currentTime);N._animations.sort(m);N._animations=u(L,!0,N._animations)[0];W.forEach(function(la){la[1](L)});r()}function m(L,W){return L._sequenceNumber-
W._sequenceNumber}function q(){(this||bc)._animations=[];(this||bc).currentTime=window.performance&&performance.now?performance.now():0}function r(){G.forEach(function(L){L()});G.length=0}function u(L,W,la){F=!0;C=!1;l.timeline.currentTime=L;A=!1;var wa=[],D=[],Q=[],J=[];return la.forEach(function(O){O._tick(L,W);O._inEffect?(D.push(O._effect),O._markTarget()):(wa.push(O._effect),O._unmarkTarget());O._needsTick&&(A=!0);var ja=O._inEffect||O._needsTick;(O._inTimeline=ja)?Q.push(O):J.push(O)}),G.push.apply(G,
wa),G.push.apply(G,D),A&&requestAnimationFrame(function(){}),F=!1,[Q,J]}var v=window.requestAnimationFrame,y=[],z=0;window.requestAnimationFrame=function(L){var W=z++;return 0==y.length&&v(f),y.push([W,L]),W};window.cancelAnimationFrame=function(L){y.forEach(function(W){W[0]==L&&(W[1]=function(){})})};q.prototype={_play:function(L){L._timing=c.normalizeTimingInput(L.timing);L=new l.Animation(L);return L._idle=!1,L._timeline=this||bc,(this||bc)._animations.push(L),l.restart(),l.applyDirtiedAnimation(L),
L}};var A=!1,C=!1;l.restart=function(){return A||(A=!0,requestAnimationFrame(function(){}),C=!0),C};l.applyDirtiedAnimation=function(L){F||(L._markTarget(),L=L._targetAnimations(),L.sort(m),u(l.timeline.currentTime,!1,L.slice())[1].forEach(function(W){W=N._animations.indexOf(W);-1!==W&&N._animations.splice(W,1)}),r())};var G=[],F=!1,N=new q;l.timeline=N})(e,h);(function(c,l){function a(v,y){for(var z=0,A=0;A<v.length;A++)z+=v[A]*y[A];return z}function f(v,y){return[v[0]*y[0]+v[4]*y[1]+v[8]*y[2]+v[12]*
y[3],v[1]*y[0]+v[5]*y[1]+v[9]*y[2]+v[13]*y[3],v[2]*y[0]+v[6]*y[1]+v[10]*y[2]+v[14]*y[3],v[3]*y[0]+v[7]*y[1]+v[11]*y[2]+v[15]*y[3],v[0]*y[4]+v[4]*y[5]+v[8]*y[6]+v[12]*y[7],v[1]*y[4]+v[5]*y[5]+v[9]*y[6]+v[13]*y[7],v[2]*y[4]+v[6]*y[5]+v[10]*y[6]+v[14]*y[7],v[3]*y[4]+v[7]*y[5]+v[11]*y[6]+v[15]*y[7],v[0]*y[8]+v[4]*y[9]+v[8]*y[10]+v[12]*y[11],v[1]*y[8]+v[5]*y[9]+v[9]*y[10]+v[13]*y[11],v[2]*y[8]+v[6]*y[9]+v[10]*y[10]+v[14]*y[11],v[3]*y[8]+v[7]*y[9]+v[11]*y[10]+v[15]*y[11],v[0]*y[12]+v[4]*y[13]+v[8]*y[14]+
v[12]*y[15],v[1]*y[12]+v[5]*y[13]+v[9]*y[14]+v[13]*y[15],v[2]*y[12]+v[6]*y[13]+v[10]*y[14]+v[14]*y[15],v[3]*y[12]+v[7]*y[13]+v[11]*y[14]+v[15]*y[15]]}function m(v){return 2*((v.deg||0)/360+(v.grad||0)/400+(v.turn||0))*Math.PI+(v.rad||0)}function q(v){switch(v.t){case "rotatex":return v=m(v.d[0]),[1,0,0,0,0,Math.cos(v),Math.sin(v),0,0,-Math.sin(v),Math.cos(v),0,0,0,0,1];case "rotatey":return v=m(v.d[0]),[Math.cos(v),0,-Math.sin(v),0,0,1,0,0,Math.sin(v),0,Math.cos(v),0,0,0,0,1];case "rotate":case "rotatez":return v=
m(v.d[0]),[Math.cos(v),Math.sin(v),0,0,-Math.sin(v),Math.cos(v),0,0,0,0,1,0,0,0,0,1];case "rotate3d":var y=v.d[0],z=v.d[1],A=v.d[2];v=m(v.d[3]);var C=y*y+z*z+A*A;0===C?(y=1,A=z=0):1!==C&&(C=Math.sqrt(C),y/=C,z/=C,A/=C);C=Math.sin(v/2);v=C*Math.cos(v/2);C*=C;return[1-2*(z*z+A*A)*C,2*(y*z*C+A*v),2*(y*A*C-z*v),0,2*(y*z*C-A*v),1-2*(y*y+A*A)*C,2*(z*A*C+y*v),0,2*(y*A*C+z*v),2*(z*A*C-y*v),1-2*(y*y+z*z)*C,0,0,0,0,1];case "scale":return[v.d[0],0,0,0,0,v.d[1],0,0,0,0,1,0,0,0,0,1];case "scalex":return[v.d[0],
0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "scaley":return[1,0,0,0,0,v.d[0],0,0,0,0,1,0,0,0,0,1];case "scalez":return[1,0,0,0,0,1,0,0,0,0,v.d[0],0,0,0,0,1];case "scale3d":return[v.d[0],0,0,0,0,v.d[1],0,0,0,0,v.d[2],0,0,0,0,1];case "skew":return y=m(v.d[0]),z=m(v.d[1]),[1,Math.tan(z),0,0,Math.tan(y),1,0,0,0,0,1,0,0,0,0,1];case "skewx":return v=m(v.d[0]),[1,0,0,0,Math.tan(v),1,0,0,0,0,1,0,0,0,0,1];case "skewy":return v=m(v.d[0]),[1,Math.tan(v),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "translate":return y=v.d[0].px||
0,z=v.d[1].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,y,z,0,1];case "translatex":return y=v.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,y,0,0,1];case "translatey":return z=v.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,z,0,1];case "translatez":return A=v.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,A,1];case "translate3d":return y=v.d[0].px||0,z=v.d[1].px||0,A=v.d[2].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,y,z,A,1];case "perspective":return[1,0,0,0,0,1,0,0,0,0,1,v.d[0].px?-1/v.d[0].px:0,0,0,0,1];case "matrix":return[v.d[0],v.d[1],0,0,v.d[2],
v.d[3],0,0,0,0,1,0,v.d[4],v.d[5],0,1];case "matrix3d":return v.d}}function r(v){return 0===v.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:v.map(q).reduce(f)}var u=function(){function v(C){return C[0][0]*C[1][1]*C[2][2]+C[1][0]*C[2][1]*C[0][2]+C[2][0]*C[0][1]*C[1][2]-C[0][2]*C[1][1]*C[2][0]-C[1][2]*C[2][1]*C[0][0]-C[2][2]*C[0][1]*C[1][0]}function y(C){var G=z(C);return[C[0]/G,C[1]/G,C[2]/G]}function z(C){return Math.sqrt(C[0]*C[0]+C[1]*C[1]+C[2]*C[2])}function A(C,G,F,N){return[F*C[0]+N*G[0],F*C[1]+N*
G[1],F*C[2]+N*G[2]]}return function(C){C=[C.slice(0,4),C.slice(4,8),C.slice(8,12),C.slice(12,16)];if(1!==C[3][3])return null;for(var G=[],F=0;4>F;F++)G.push(C[F].slice());for(F=0;3>F;F++)G[F][3]=0;if(0===v(G))return null;var N=[];if(C[0][3]||C[1][3]||C[2][3]){N.push(C[0][3]);N.push(C[1][3]);N.push(C[2][3]);N.push(C[3][3]);var L=1/v(G),W=G[0][0],la=G[0][1];F=G[0][2];var wa=G[1][0],D=G[1][1],Q=G[1][2],J=G[2][0],O=G[2][1],ja=G[2][2];L=[[(D*ja-Q*O)*L,(F*O-la*ja)*L,(la*Q-F*D)*L,0],[(Q*J-wa*ja)*L,(W*ja-
F*J)*L,(F*wa-W*Q)*L,0],[(wa*O-D*J)*L,(J*la-W*O)*L,(W*D-la*wa)*L,0]];W=[];for(la=0;3>la;la++){for(wa=F=0;3>wa;wa++)F+=G[3][wa]*L[wa][la];W.push(F)}G=(W.push(1),L.push(W),L);G=[[G[0][0],G[1][0],G[2][0],G[3][0]],[G[0][1],G[1][1],G[2][1],G[3][1]],[G[0][2],G[1][2],G[2][2],G[3][2]],[G[0][3],G[1][3],G[2][3],G[3][3]]];L=[];for(W=0;4>W;W++){for(F=la=0;4>F;F++)la+=N[F]*G[F][W];L.push(la)}N=L}else N=[0,0,0,1];G=C[3].slice(0,3);L=[];L.push(C[0].slice(0,3));W=[];W.push(z(L[0]));L[0]=y(L[0]);la=[];L.push(C[1].slice(0,
3));la.push(a(L[0],L[1]));L[1]=A(L[1],L[0],1,-la[0]);W.push(z(L[1]));L[1]=y(L[1]);la[0]/=W[1];L.push(C[2].slice(0,3));la.push(a(L[0],L[2]));L[2]=A(L[2],L[0],1,-la[1]);la.push(a(L[1],L[2]));L[2]=A(L[2],L[1],1,-la[2]);W.push(z(L[2]));L[2]=y(L[2]);la[1]/=W[2];la[2]/=W[2];C=L[1];F=L[2];if(0>a(L[0],[C[1]*F[2]-C[2]*F[1],C[2]*F[0]-C[0]*F[2],C[0]*F[1]-C[1]*F[0]]))for(F=0;3>F;F++)W[F]*=-1,L[F][0]*=-1,L[F][1]*=-1,L[F][2]*=-1;var X,ha;C=L[0][0]+L[1][1]+L[2][2]+1;return 1E-4<C?(X=.5/Math.sqrt(C),ha=[(L[2][1]-
L[1][2])*X,(L[0][2]-L[2][0])*X,(L[1][0]-L[0][1])*X,.25/X]):L[0][0]>L[1][1]&&L[0][0]>L[2][2]?(X=2*Math.sqrt(1+L[0][0]-L[1][1]-L[2][2]),ha=[.25*X,(L[0][1]+L[1][0])/X,(L[0][2]+L[2][0])/X,(L[2][1]-L[1][2])/X]):L[1][1]>L[2][2]?(X=2*Math.sqrt(1+L[1][1]-L[0][0]-L[2][2]),ha=[(L[0][1]+L[1][0])/X,.25*X,(L[1][2]+L[2][1])/X,(L[0][2]-L[2][0])/X]):(X=2*Math.sqrt(1+L[2][2]-L[0][0]-L[1][1]),ha=[(L[0][2]+L[2][0])/X,(L[1][2]+L[2][1])/X,.25*X,(L[1][0]-L[0][1])/X]),[G,W,la,ha,N]}}();c.dot=a;c.makeMatrixDecomposition=
function(v){return[u(r(v))]};c.transformListToMatrix=r})(h);(function(c){function l(q,r){var u=q.exec(r);if(u)return u=q.ignoreCase?u[0].toLowerCase():u[0],[u,r.substr(u.length)]}function a(q,r){r=r.replace(/^\s*/,"");if(q=q(r))return[q[0],q[1].replace(/^\s*/,"")]}function f(q,r){for(var u=q,v=r;u&&v;)u>v?u%=v:v%=u;return q*r/(u+v)}function m(q,r,u,v,y){for(var z=[],A=[],C=[],G=f(v.length,y.length),F=0;F<G;F++){var N=r(v[F%v.length],y[F%y.length]);if(!N)return;z.push(N[0]);A.push(N[1]);C.push(N[2])}return[z,
A,function(L){L=L.map(function(W,la){return C[la](W)}).join(u);return q?q(L):L}]}c.consumeToken=l;c.consumeTrimmed=a;c.consumeRepeated=function(q,r,u){q=a.bind(null,q);for(var v=[];;){var y=q(u);if(!y||(v.push(y[0]),u=y[1],!(y=l(r,u))||""==y[1]))return[v,u];u=y[1]}};c.consumeParenthesised=function(q,r){for(var u=0,v=0;v<r.length&&(!/\s|,/.test(r[v])||0!=u);v++)if("("==r[v])u++;else if(")"==r[v]&&(u--,0==u&&v++,0>=u))break;q=q(r.substr(0,v));return void 0==q?void 0:[q,r.substr(v)]};c.ignore=function(q){return function(r){r=
q(r);return r&&(r[0]=void 0),r}};c.optional=function(q,r){return function(u){return q(u)||[r,u]}};c.consumeList=function(q,r){for(var u=[],v=0;v<q.length;v++){r=c.consumeTrimmed(q[v],r);if(!r||""==r[0])return;void 0!==r[0]&&u.push(r[0]);r=r[1]}if(""==r)return u};c.mergeNestedRepeated=m.bind(null,null);c.mergeWrappedNestedRepeated=m;c.mergeList=function(q,r,u){for(var v=[],y=[],z=[],A=0,C=0;C<u.length;C++)if("function"==typeof u[C]){var G=u[C](q[A],r[A++]);v.push(G[0]);y.push(G[1]);z.push(G[2])}else!function(F){v.push(!1);
y.push(!1);z.push(function(){return u[F]})}(C);return[v,y,function(F){for(var N="",L=0;L<F.length;L++)N+=z[L](F[L]);return N}]}})(h);(function(c){function l(f){var m={inset:!1,lengths:[],color:null};if((f=c.consumeRepeated(function(q){var r=c.consumeToken(/^inset/i,q);return r?(m.inset=!0,r):(r=c.consumeLengthOrPercent(q))?(m.lengths.push(r[0]),r):(r=c.consumeColor(q),r?(m.color=r[0],r):void 0)},/^/,f))&&f[0].length)return[m,f[1]]}var a=function(f,m,q,r){function u(G){return{inset:G,color:[0,0,0,
0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var v=[],y=[],z=0;z<q.length||z<r.length;z++){var A=q[z]||u(r[z].inset),C=r[z]||u(q[z].inset);v.push(A);y.push(C)}return c.mergeNestedRepeated(f,m,v,y)}.bind(null,function(f,m){for(;f.lengths.length<Math.max(f.lengths.length,m.lengths.length);)f.lengths.push({px:0});for(;m.lengths.length<Math.max(f.lengths.length,m.lengths.length);)m.lengths.push({px:0});if(f.inset==m.inset&&!!f.color==!!m.color){for(var q,r=[],u=[[],0],v=[[],0],y=0;y<f.lengths.length;y++){var z=
c.mergeDimensions(f.lengths[y],m.lengths[y],2==y);u[0].push(z[0]);v[0].push(z[1]);r.push(z[2])}f.color&&m.color&&(m=c.mergeColors(f.color,m.color),u[1]=m[0],v[1]=m[1],q=m[2]);return[u,v,function(A){for(var C=f.inset?"inset ":" ",G=0;G<r.length;G++)C+=r[G](A[0][G])+" ";return q&&(C+=q(A[1])),C}]}},", ");c.addPropertiesHandler(function(f){if((f=c.consumeRepeated(l,/^,/,f))&&""==f[1])return f[0]},a,["box-shadow","text-shadow"])})(h);(function(c,l){function a(u){return u.toFixed(3).replace(/0+$/,"").replace(/\.$/,
"")}function f(u,v,y){return Math.min(v,Math.max(u,y))}function m(u){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(u))return Number(u)}function q(u,v){return function(y,z){return[y,z,function(A){return a(f(u,v,A))}]}}function r(u){u=u.trim().split(/\s*[\s,]\s*/);if(0!==u.length){for(var v=[],y=0;y<u.length;y++){var z=m(u[y]);if(void 0===z)return;v.push(z)}return v}}c.clamp=f;c.addPropertiesHandler(r,function(u,v){if(u.length==v.length)return[u,v,function(y){return y.map(a).join(" ")}]},["stroke-dasharray"]);
c.addPropertiesHandler(m,q(0,1/0),["border-image-width","line-height"]);c.addPropertiesHandler(m,q(0,1),["opacity","shape-image-threshold"]);c.addPropertiesHandler(m,function(u,v){if(0!=u)return q(0,1/0)(u,v)},["flex-grow","flex-shrink"]);c.addPropertiesHandler(m,function(u,v){return[u,v,function(y){return Math.round(f(1,1/0,y))}]},["orphans","widows"]);c.addPropertiesHandler(m,function(u,v){return[u,v,Math.round]},["z-index"]);c.parseNumber=m;c.parseNumberList=r;c.mergeNumbers=function(u,v){return[u,
v,a]};c.numberToString=a})(h);(function(c,l){c.addPropertiesHandler(String,function(a,f){if("visible"==a||"visible"==f)return[0,1,function(m){return 0>=m?a:1<=m?f:"visible"}]},["visibility"])})(h);(function(c,l){function a(q){q=q.trim();m.fillStyle="#000";m.fillStyle=q;var r=m.fillStyle;if(m.fillStyle="#fff",m.fillStyle=q,r==m.fillStyle)return m.fillRect(0,0,1,1),q=m.getImageData(0,0,1,1).data,m.clearRect(0,0,1,1),r=q[3]/255,[q[0]*r,q[1]*r,q[2]*r,r]}function f(q,r){return[q,r,function(u){if(u[3])for(var v=
0;3>v;v++)u[v]=Math.round(Math.max(0,Math.min(255,u[v]/u[3])));return u[3]=c.numberToString(c.clamp(0,1,u[3])),"rgba("+u.join(",")+")"}]}l=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");l.width=l.height=1;var m=l.getContext("2d");c.addPropertiesHandler(a,f,"background-color border-bottom-color border-left-color border-right-color border-top-color color fill flood-color lighting-color outline-color stop-color stroke text-decoration-color".split(" "));c.consumeColor=c.consumeParenthesised.bind(null,
a);c.mergeColors=f})(h);(function(c,l){function a(y){function z(){var L=N.exec(y);F=L?L[0]:void 0}function A(){if("("!==F){var L=Number(F);return z(),L}z();L=G();return")"!==F?NaN:(z(),L)}function C(){for(var L=A();"*"===F||"/"===F;){var W=F;z();var la=A();"*"===W?L*=la:L/=la}return L}function G(){for(var L=C();"+"===F||"-"===F;){var W=F;z();var la=C();"+"===W?L+=la:L-=la}return L}var F,N=/([\+\-\w\.]+|[\(\)\*\/])/g;return z(),G()}function f(y,z){if("0"==(z=z.trim().toLowerCase())&&0<="px".search(y))return{px:0};
if(/^[^(]*$|^calc/.test(z)){z=z.replace(/calc\(/g,"(");var A={};z=z.replace(y,function(L){return A[L]=null,"U"+L});y="U("+y.source+")";for(var C=z.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+y,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),G=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],F=0;F<G.length;)G[F].test(C)?(C=C.replace(G[F],"$1"),F=0):F++;if("D"==C){for(var N in A){C=a(z.replace(new RegExp("U"+N,"g"),"").replace(new RegExp(y,"g"),"*0"));if(!isFinite(C))return;
A[N]=C}return A}}}function m(y,z){return q(y,z,!0)}function q(y,z,A){var C,G=[];for(C in y)G.push(C);for(C in z)0>G.indexOf(C)&&G.push(C);return y=G.map(function(F){return y[F]||0}),z=G.map(function(F){return z[F]||0}),[y,z,function(F){var N=F.map(function(L,W){return 1==F.length&&A&&(L=Math.max(L,0)),c.numberToString(L)+G[W]}).join(" + ");return 1<F.length?"calc("+N+")":N}]}var r=f.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc/g);l=f.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|%/g);
var u=f.bind(null,/deg|rad|grad|turn/g);c.parseLength=r;c.parseLengthOrPercent=l;c.consumeLengthOrPercent=c.consumeParenthesised.bind(null,l);c.parseAngle=u;c.mergeDimensions=q;r=c.consumeParenthesised.bind(null,r);r=c.consumeRepeated.bind(void 0,r,/^/);var v=c.consumeRepeated.bind(void 0,r,/^,/);c.consumeSizePairList=v;r=c.mergeNestedRepeated.bind(void 0,m," ");u=c.mergeNestedRepeated.bind(void 0,r,",");c.mergeNonNegativeSizePair=r;c.addPropertiesHandler(function(y){if((y=v(y))&&""==y[1])return y[0]},
u,["background-size"]);c.addPropertiesHandler(l,m,"border-bottom-width border-image-width border-left-width border-right-width border-top-width flex-basis font-size height line-height max-height max-width outline-width width".split(" "));c.addPropertiesHandler(l,q,"border-bottom-left-radius border-bottom-right-radius border-top-left-radius border-top-right-radius bottom left letter-spacing margin-bottom margin-left margin-right margin-top min-height min-width outline-offset padding-bottom padding-left padding-right padding-top perspective right shape-margin stroke-dashoffset text-indent top vertical-align word-spacing".split(" "))})(h);
(function(c,l){function a(m){return c.consumeLengthOrPercent(m)||c.consumeToken(/^auto/,m)}function f(m){if((m=c.consumeList([c.ignore(c.consumeToken.bind(null,/^rect/)),c.ignore(c.consumeToken.bind(null,/^\(/)),c.consumeRepeated.bind(null,a,/^,/),c.ignore(c.consumeToken.bind(null,/^\)/))],m))&&4==m[0].length)return m[0]}l=c.mergeWrappedNestedRepeated.bind(null,function(m){return"rect("+m+")"},function(m,q){return"auto"==m||"auto"==q?[!0,!1,function(r){r=r?m:q;if("auto"==r)return"auto";r=c.mergeDimensions(r,
r);return r[2](r[0])}]:c.mergeDimensions(m,q)},", ");c.parseBox=f;c.mergeBoxes=l;c.addPropertiesHandler(f,l,["clip"])})(h);(function(c,l){function a(C){return function(G){var F=0;return C.map(function(N){return N===v?G[F++]:N})}}function f(C){return C}function m(C){if("none"==(C=C.toLowerCase().trim()))return[];for(var G,F=/\s*(\w+)\(([^)]*)\)/g,N=[],L=0;(G=F.exec(C))&&G.index==L;){L=G.index+G[0].length;var W=G[1],la=A[W];if(!la)break;G=G[2].split(",");la=la[0];if(la.length<G.length)break;for(var wa=
[],D=0;D<la.length;D++){var Q=G[D];var J=la[D];if(void 0===(Q=Q?{A:function(O){return"0"==O.trim()?z:c.parseAngle(O)},N:c.parseNumber,T:c.parseLengthOrPercent,L:c.parseLength}[J.toUpperCase()](Q):{a:z,n:wa[0],t:y}[J]))return;wa.push(Q)}if(N.push({t:W,d:wa}),F.lastIndex==C.length)return N}}function q(C){return C.toFixed(6).replace(".000000","")}function r(C,G){if(C.decompositionPair!==G){C.decompositionPair=G;var F=c.makeMatrixDecomposition(C)}if(G.decompositionPair!==C){G.decompositionPair=C;var N=
c.makeMatrixDecomposition(G)}return null==F[0]||null==N[0]?[[!1],[!0],function(L){return L?G[0].d:C[0].d}]:(F[0].push(0),N[0].push(1),[F,N,function(L){var W=c.quat(F[0][3],N[0][3],L[5]);return c.composeMatrix(L[0],L[1],L[2],W,L[4]).map(q).join(",")}])}function u(C){return C.replace(/(x|y|z|3d)?$/,"3d")}var v=null,y={px:0},z={deg:0},A={matrix:["NNNNNN",[v,v,0,0,v,v,0,0,0,0,1,0,v,v,0,1],f],matrix3d:["NNNNNNNNNNNNNNNN",f],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],
scale:["Nn",a([v,v,1]),f],scalex:["N",a([v,1,1]),a([v,1])],scaley:["N",a([1,v,1]),a([1,v])],scalez:["N",a([1,1,v])],scale3d:["NNN",f],skew:["Aa",null,f],skewx:["A",null,a([v,z])],skewy:["A",null,a([z,v])],translate:["Tt",a([v,v,y]),f],translatex:["T",a([v,y,y]),a([v,y])],translatey:["T",a([y,v,y]),a([y,v])],translatez:["L",a([y,y,v])],translate3d:["TTL",f]};c.addPropertiesHandler(m,function(C,G){var F=c.makeMatrixDecomposition&&!0,N=!1;if(!C.length||!G.length){C.length||(N=!0,C=G,G=[]);for(var L=
0;L<C.length;L++){var W=C[L].t,la=C[L].d,wa="scale"==W.substr(0,5)?1:0;G.push({t:W,d:la.map(function(oa){if("number"==typeof oa)return wa;var ba={},qa;for(qa in oa)ba[qa]=wa;return ba})})}}la=[];var D=[],Q=[];if(C.length!=G.length){if(!F)return;var J=r(C,G);la=[J[0]];D=[J[1]];Q=[["matrix",[J[2]]]]}else for(L=0;L<C.length;L++){W=C[L].t;var O=G[L].t,ja=C[L].d,X=G[L].d;J=A[W];var ha=A[O];if("perspective"==W&&"perspective"==O||!("matrix"!=W&&"matrix3d"!=W||"matrix"!=O&&"matrix3d"!=O)){if(!F)return;J=
r([C[L]],[G[L]]);la.push(J[0]);D.push(J[1]);Q.push(["matrix",[J[2]]])}else{if(W!=O)if(J[2]&&ha[2]&&W.replace(/[xy]/,"")==O.replace(/[xy]/,""))W=W.replace(/[xy]/,""),ja=J[2](ja),X=ha[2](X);else{if(!J[1]||!ha[1]||u(W)!=u(O)){if(!F)return;J=r(C,G);la=[J[0]];D=[J[1]];Q=[["matrix",[J[2]]]];break}W=u(W);ja=J[1](ja);X=ha[1](X)}ha=[];O=[];for(var bb=[],pb=0;pb<ja.length;pb++)J=("number"==typeof ja[pb]?c.mergeNumbers:c.mergeDimensions)(ja[pb],X[pb]),ha[pb]=J[0],O[pb]=J[1],bb.push(J[2]);la.push(ha);D.push(O);
Q.push([W,bb])}}N&&(C=la,la=D,D=C);return[la,D,function(oa){return oa.map(function(ba,qa){ba=ba.map(function(Ga,ua){return Q[qa][1][ua](Ga)}).join(",");return"matrix"==Q[qa][0]&&16==ba.split(",").length&&(Q[qa][0]="matrix3d"),Q[qa][0]+"("+ba+")"}).join(" ")}]},["transform"]);c.transformToSvgMatrix=function(C){C=c.transformListToMatrix(m(C));return"matrix("+q(C[0])+" "+q(C[1])+" "+q(C[4])+" "+q(C[5])+" "+q(C[12])+" "+q(C[13])+")"}})(h);(function(c){function l(a){return a=100*Math.round(a/100),a=c.clamp(100,
900,a),400===a?"normal":700===a?"bold":String(a)}c.addPropertiesHandler(function(a){a=Number(a);if(!(isNaN(a)||100>a||900<a||0!=a%100))return a},function(a,f){return[a,f,l]},["font-weight"])})(h);(function(c){function l(r){return c.consumeToken(/^(left|center|right|top|bottom)\b/i,r)||c.consumeLengthOrPercent(r)}function a(r,u){if((u=c.consumeRepeated(l,/^/,u))&&""==u[1]&&(u=u[0],u[0]=u[0]||"center",u[1]=u[1]||"center",3==r&&(u[2]=u[2]||{px:0}),u.length==r)){if(/top|bottom/.test(u[0])||/left|right/.test(u[1]))r=
u[0],u[0]=u[1],u[1]=r;if(/left|right|center|Object/.test(u[0])&&/top|bottom|center|Object/.test(u[1]))return u.map(function(v){return"object"==typeof v?v:m[v]})}}function f(r){if(r=c.consumeRepeated(l,/^/,r)){for(var u=r[0],v=[{"%":50},{"%":50}],y=0,z=!1,A=0;A<u.length;A++){var C=u[A];if("string"==typeof C)z=/bottom|right/.test(C),y={left:0,right:0,center:y,top:1,bottom:1}[C],v[y]=m[C],"center"==C&&y++;else{if(z){z=void 0;var G={};for(z in C)G[z]=-C[z];C=G;C["%"]=(C["%"]||0)+100}v[y]=C;y++;z=!1}}return[v,
r[1]]}}var m={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},q=c.mergeNestedRepeated.bind(null,c.mergeDimensions," ");c.addPropertiesHandler(a.bind(null,3),q,["transform-origin"]);c.addPropertiesHandler(a.bind(null,2),q,["perspective-origin"]);c.consumePosition=f;c.mergeOffsetList=q;q=c.mergeNestedRepeated.bind(null,q,", ");c.addPropertiesHandler(function(r){if((r=c.consumeRepeated(f,/^,/,r))&&""==r[1])return r[0]},q,["background-position","object-position"])})(h);(function(c){var l=
c.consumeParenthesised.bind(null,c.parseLengthOrPercent),a=c.consumeRepeated.bind(void 0,l,/^/),f=c.mergeNestedRepeated.bind(void 0,c.mergeDimensions," "),m=c.mergeNestedRepeated.bind(void 0,f,",");c.addPropertiesHandler(function(q){var r=c.consumeToken(/^circle/,q);return r&&r[0]?["circle"].concat(c.consumeList([c.ignore(c.consumeToken.bind(void 0,/^\(/)),l,c.ignore(c.consumeToken.bind(void 0,/^at/)),c.consumePosition,c.ignore(c.consumeToken.bind(void 0,/^\)/))],r[1])):(r=c.consumeToken(/^ellipse/,
q))&&r[0]?["ellipse"].concat(c.consumeList([c.ignore(c.consumeToken.bind(void 0,/^\(/)),a,c.ignore(c.consumeToken.bind(void 0,/^at/)),c.consumePosition,c.ignore(c.consumeToken.bind(void 0,/^\)/))],r[1])):(q=c.consumeToken(/^polygon/,q))&&q[0]?["polygon"].concat(c.consumeList([c.ignore(c.consumeToken.bind(void 0,/^\(/)),c.optional(c.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),c.consumeSizePairList,c.ignore(c.consumeToken.bind(void 0,/^\)/))],q[1])):void 0},function(q,r){if(q[0]===
r[0])return"circle"==q[0]?c.mergeList(q.slice(1),r.slice(1),["circle(",c.mergeDimensions," at ",c.mergeOffsetList,")"]):"ellipse"==q[0]?c.mergeList(q.slice(1),r.slice(1),["ellipse(",c.mergeNonNegativeSizePair," at ",c.mergeOffsetList,")"]):"polygon"==q[0]&&q[1]==r[1]?c.mergeList(q.slice(2),r.slice(2),["polygon(",q[1],m,")"]):void 0},["shape-outside"])})(h);(function(c,l){function a(q,r){r.concat([q]).forEach(function(u){u in document.documentElement.style&&(f[q]=u);m[u]=q})}var f={},m={};a("transform",
["webkitTransform","msTransform"]);a("transformOrigin",["webkitTransformOrigin"]);a("perspective",["webkitPerspective"]);a("perspectiveOrigin",["webkitPerspectiveOrigin"]);c.propertyName=function(q){return f[q]||q};c.unprefixedPropertyName=function(q){return m[q]||q}})(h)})();(function(){if(void 0===document.createElement("div").animate([]).oncancel){var n=window.performance&&performance.now?function(){return performance.now()}:function(){return Date.now()};var b=function(l,a,f){(this||bc).target=
l;(this||bc).currentTime=a;(this||bc).timelineTime=f;(this||bc).type="cancel";(this||bc).bubbles=!1;(this||bc).cancelable=!1;(this||bc).currentTarget=l;(this||bc).defaultPrevented=!1;(this||bc).eventPhase=Event.AT_TARGET;(this||bc).timeStamp=Date.now()},c=window.Element.prototype.animate;window.Element.prototype.animate=function(l,a){l=c.call(this||bc,l,a);l._cancelHandlers=[];l.oncancel=null;var f=l.cancel;l.cancel=function(){f.call(this||bc);var r=new b(this||bc,null,n()),u=(this||bc)._cancelHandlers.concat((this||
bc).oncancel?[(this||bc).oncancel]:[]);setTimeout(function(){u.forEach(function(v){v.call(r.target,r)})},0)};var m=l.addEventListener;l.addEventListener=function(r,u){"function"==typeof u&&"cancel"==r?(this||bc)._cancelHandlers.push(u):m.call(this||bc,r,u)};var q=l.removeEventListener;return l.removeEventListener=function(r,u){"cancel"==r?(r=(this||bc)._cancelHandlers.indexOf(u),0<=r&&(this||bc)._cancelHandlers.splice(r,1)):q.call(this||bc,r,u)},l}}})();(function(n){var b=document.documentElement,
c=null,l=!1;try{var a="0"==getComputedStyle(b).getPropertyValue("opacity")?"1":"0";c=b.animate({opacity:[a,a]},{duration:1});c.currentTime=0;l=getComputedStyle(b).getPropertyValue("opacity")==a}catch(m){}finally{c&&c.cancel()}if(!l){var f=window.Element.prototype.animate;window.Element.prototype.animate=function(m,q){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&m[Symbol.iterator]&&(m=Array.from(m)),Array.isArray(m)||null===m||(m=n.convertToArrayForm(m)),f.call(this||bc,m,q)}}})(e)}();
var Ie=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js");Ie.convertToSvgEasing=function(e){for(var h in Ie.easings)if(Ie.easings[h]===e){if(h.includes("inOut"))return h.replace("inOut","").toLowerCase()+"InOut";if(h.includes("out"))return h.replace("out","").toLowerCase()+"Out";if(h.includes("in"))return h.replace("in","").toLowerCase()+"In"}};Ie.stringToEasing=$o;Ie.obj=lf;Ie.promise=Kf;Ie.fun=Xk;Ie.num=wk;Ie.properties=mp;Ie.arr=Te;Ie.string=Hg;Ie.Color=wf;Ie.styleProps=
Sx;Ie.addPathAttributes=cw;Ie.addSvgAttributes=Tx;Ie.flubber=OP;Ie.Bezier=pfa;Ie.ShadowObject=wq;var yq=ya("aa",{inQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",inCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",inQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",inQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",inSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",inExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",inCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",inBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",
outQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",outCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",outQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",outQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",outSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",outExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",outCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",outBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",inOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",inOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",
inOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",inOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",inOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)",inOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",inOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",inOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",linear:"cubic-bezier(0.5, 0.5, 0.5, 0.5)"});Ie.easings=yq;Ie.easings=yq;Ie.easings=yq;Ie.stringToEasing=$o;Ie.stringToEasing=$o;var UI=function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),
n=h.hasOwnProperty("AnimationQueue")&&"function"===typeof h.AnimationQueue?h.AnimationQueue:h.AnimationQueue=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.morph=b;this.animations=[]}},{key:"maskedProps",value:function(b){return 0<this.animations.length?Ie.obj.merge(this.animations.map(function(c){return c.getAnimationProps(b)[0]})):{}}},
{key:"animationsActive",get:function(){return!0}},{key:"registerAnimation",value:function(b){var c=this,l=new Ie.PropertyAnimation(this,this.morph,b);this.morph.makeDirty();return this.morph.withMetaDo({animation:l},function(){var a=l.affectsMorph&&c.animations.find(function(m){return m.equals(l)});if(!a){var f;if(f=c.animations.find(function(m){return m.canMerge(l)}))return f.mergeWith(l),f;if(l.affectsMorph)return l.assignProps(),c.animations.push(l),l}return a})}},{key:"startAnimationsFor",value:function(b){for(var c=
0;c<this.animations.length;c++)this.animations[c].start(b)}},{key:"startSvgAnimationsFor",value:function(b,c){this.animations.forEach(function(l){return l.startSvg(b,c)})}},{key:"removeAnimation",value:function(b){Ie.arr.remove(this.animations,b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AnimationQueue"}}],h,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2443,end:3747})}(void 0);Ie.AnimationQueue=UI;Ie.AnimationQueue=UI;Ie.AnimationQueue=UI;var QP=function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),n=h.hasOwnProperty("PropertyAnimation")&&"function"===typeof h.PropertyAnimation?h.PropertyAnimation:h.PropertyAnimation=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b,c,l){var a=this;this.queue=b;this.morph=c;if(c.isPath&&"fill"in l){var f=c.fill||Ie.Color.transparent,m=l.fill;l.customTween=Ie.fun.compose(function(y){c.fill=f.interpolate(y,m);return y},l.customTween||function(y){});delete l.fill;c.fill=f}if("dropShadow"in l){var q=c.dropShadow||new Ie.ShadowObject({blur:0,distance:0,spread:0}),r=l.dropShadow;l.customTween=Ie.fun.compose(function(y){c.dropShadow=q.interpolate(y,r||new Ie.ShadowObject({blur:0,
distance:0,spread:0}));1==y&&(c.dropShadow=r);return y},l.customTween||function(y){});delete l.dropShadow;c.dropShadow=q}if("visible"in l&&l.visible!=c.visible){var u=void 0===b.originalOpacity?c.opacity:b.originalOpacity;b.originalOpacity=u;var v=l.visible;l.customTween=Ie.fun.compose(function(y){if(a._otherVisibleTransformationInProgress)return y;0==y&&1==v&&(c.visible=!0);c.opacity=v?Ie.num.interpolate(y,0,u):Ie.num.interpolate(y,u,0);1==y&&(c.visible=v,c.opacity=u,delete b.originalOpacity);return y},
l.customTween||function(y){});this.queue.animations.forEach(function(y){return y._otherVisibleTransformationInProgress=!0});delete l.visible}this.config=this.convertBounds(l);this.needsAnimation={svg:c.isSvgMorph,path:c.isPath};this.capturedProperties=Ie.obj.select(this.morph,this.propsToCapture)}},{key:"propsToCapture",get:function(){return["fill","origin"]}},{key:"asPromise",value:function(){var b=this;return this._promise||(this._promise=new Promise(function(c,l){b.resolveCallback=function(){b.onFinish(b);
b.subAnimations?b.subAnimations.then(c):c(b.morph)}}))}},{key:"finish",value:function(b){var c=this;this.config.scale&&this.morph.whenRendered().then(function(){return c.morph.withAllSubmorphsDo(function(l){return l.isText&&l.invalidateTextLayout(!0,!0)})});this.needsAnimation[b]=!1;Ie.arr.any(Ie.obj.values(this.needsAnimation),Boolean)||(this.queue.removeAnimation(this),this.resolveCallback?this.resolveCallback():this.onFinish())}},{key:"convertBounds",value:function(b){var c=b.bounds,l=b.origin,
a=b.rotation,f=b.scale;l=l||this.morph.origin;a=a||this.morph.rotation;f=f||this.morph.scale;return c?Object.assign({},Ie.obj.dissoc(b,["bounds"]),{origin:l,rotation:a,scale:f,position:c.topLeft().addPt(l),extent:c.extent()}):b}},{key:"equals",value:function(b){return!this.config.customTween&&!b.config.customTweem&&Ie.obj.equals(this.animatedProps,b.animatedProps)}},{key:"canMerge",value:function(b){return this.easing==b.easing&&this.duration==b.duration}},{key:"mergeWith",value:function(b){var c=
this.config.customTween;Object.assign(this.morph,b.animatedProps);Object.assign(this.config,b.config);this.config.customTween=function(l){c&&c(l);b.config.customTween&&b.config.customTween(l);return l};this.afterProps=this.gatherAnimationProps()}},{key:"affectsMorph",get:function(){var b=this;return!!this.config.customTween||Ie.properties.any(this.animatedProps,function(c,l){return!Ie.obj.equals(c[l],b.morph[l])})}},{key:"animatedProps",get:function(){return Ie.obj.dissoc(this.config,["customTween",
"easing","onFinish","duration"])}},{key:"easing",get:function(){return this.config.easing||Ie.easings.inOutQuad}},{key:"onFinish",get:function(){return this.config.onFinish||function(){}}},{key:"setonFinish",value:function(b){this.config.onFinish=b}},{key:"duration",get:function(){return this.config.duration||1E3}},{key:"getChangedProps",value:function(b,c){var l=[],a;for(a in b)Ie.obj.equals(c[a],b[a])&&l.push(a);return[Ie.obj.dissoc(b,l),Ie.obj.dissoc(c,l)]}},{key:"getAnimationProps",value:function(b){var c=
$jscomp.makeIterator(this.getChangedProps(this.beforeProps[b],this.afterProps[b])),l=c.next().value;c=c.next().value;var a=this.capturedProperties.fill,f=this.config.fill;this.morph.isPolygon&&"css"==b&&(a=f=!1,delete l.background,delete c.background,delete l.backgroundImage,delete c.backgroundImage);"none"==l.filter&&c.boxShadow&&(delete l.filter,l.boxShadow="none");"none"==c.filter&&l.boxShadow&&(delete c.filter,c.boxShadow="none");a&&f&&(a.isGradient||f.isGradient)&&(this.tweenGradient=this.interpolate("gradient",
a,f));b=$jscomp.makeIterator(Ie.arr.union(Ie.obj.keys(l),Ie.obj.keys(c)));for(a=b.next();!a.done;a=b.next())a=a.value,a in l||(l[a]=c[a]),a in c||(c[a]=l[a]);return[Ie.obj.isEmpty(l)?!1:l,Ie.obj.isEmpty(c)?!1:c]}},{key:"gatherAnimationProps",value:function(){var b=this.morph,c=b.isSvgMorph,l=b.isPath,a=b.isPolygon,f={};f.css=Ie.styleProps(this.morph);c&&(f.svg=Ie.addSvgAttributes(b,{}));l&&(f.path=Ie.addPathAttributes(b,{}));a&&(f.polygon=Ie.addPathAttributes(b,{}));return f}},{key:"assignProps",
value:function(){var b=this.morph.styleClasses;this.beforeProps=this.gatherAnimationProps();Object.assign(this.morph,this.animatedProps);this.afterProps=this.gatherAnimationProps();this.config.styleClasses&&(this.morph._animatedStyleClasses={removed:Ie.arr.withoutAll(b,this.morph.styleClasses),added:Ie.arr.withoutAll(this.morph.styleClasses,b),animation:this})}},{key:"interpolate",value:function(b,c,l){var a=this;switch(b){case "scrollTop":case "scrollLeft":return function(f){return Ie.num.interpolate(f,
c,l)};case "d":return Ie.flubber.interpolate(c,l);case "stroke-width":return function(f){return Ie.num.interpolate(f,c,l)};case "stroke":return function(f){return Ie.Color.fromString(c).interpolate(f,Ie.Color.fromString(l),a.morph.bounds())};case "gradient":return function(f){return c.interpolate(f,l,a.morph.bounds())};case "fill":return c=Ie.Color.fromString(c),l=Ie.Color.fromString(l),function(f){return c.interpolate(f,l)}}}},{key:"startSvg",value:function(b,c){var l=this;if(this.needsAnimation[c]){this.needsAnimation[c]=
!1;var a=$jscomp.makeIterator(this.getAnimationProps(c)),f=a.next().value;a=a.next().value;var m={},q=Ie.stringToEasing(this.easing),r;for(r in f)m[r]=this.interpolate(r,f[r],a[r]);var u,v=function(y){u||(u=y);y-=u;if(1<y/l.duration)return l.finish(c);for(var z in m)m[z]&&b.setAttribute(z,m[z](q(y/l.duration)));requestAnimationFrame(v)};requestAnimationFrame(v)}}},{key:"start",value:function(b){if(!this.active)try{this.active=!0;var c=$jscomp.makeIterator(this.getAnimationProps("css")),l=c.next().value,
a=c.next().value;b&&this.tween(b,l,a);if(this.config.origin){var f=this.capturedProperties.origin,m=this.config.origin,q=b.childNodes[0];q&&this.tween(q,q.style.top?{left:f.x+"px",top:f.y+"px"}:{transform:"translate3d("+f.x+"px, "+f.y+"px, 0px)"},q.style.top?{left:f.x+"px",top:f.y+"px"}:{transform:"translate3d("+m.x+"px, "+m.y+"px, 0px)"})}}catch(r){this.active=!1}}},{key:"tween",value:function(b,c,l,a){var f=this;a=void 0===a?!0:a;var m=this.animatedProps.scroll,q=this.config.customTween,r=!1,u=
function(){a&&(f.finish("css"),f.morph.makeDirty())};if(q){var v,y=Ie.stringToEasing(this.easing),z=function(X){v||(v=X);var ha=Math.min(1,(X-v)/f.duration);f.morph.dontRecordChangesWhile(function(){return q(y(ha))});if(1<=ha)return f.finish("css");requestAnimationFrame(z)};requestAnimationFrame(z);r=!0}if(m){var A,C=this.morph.env.eventDispatcher.eventState;r=Ie.promise.deferred();var G=r.promise,F=r.resolve,N=this.interpolate("scrollLeft",b.scrollLeft,m.x),L=this.interpolate("scrollTop",b.scrollTop,
m.y),W=Ie.stringToEasing(this.easing),la=function(X){A||(A=X);X-=A;var ha=Math.min(1,X/f.duration);b.scrollTop=L(W(ha));b.scrollLeft=N(W(ha));if(1<=X/f.duration)return C.scroll.interactiveScrollInProgress=null,F(),f.finish("css");requestAnimationFrame(la)};G.debounce=function(){};requestAnimationFrame(la);r=!0}if(this.tweenGradient&&!this.morph.isPolygon){var wa,D=Ie.stringToEasing(this.easing),Q=function(X){wa||(wa=X);X-=wa;if(1<=X/f.duration)return f.finish("css");b.style.setProperty("background-image",
f.tweenGradient(D(X/f.duration)));requestAnimationFrame(Q)};delete c.backgroundImage;delete l.backgroundImage;delete c.background;delete l.background;requestAnimationFrame(Q);r=!0}else this.tweenGradient&&(r=!0);if(b&&c&&l){m={};G={};for(var J in c)m[Ie.string.camelize(J)]=c[J];for(var O in l)G[Ie.string.camelize(O)]=l[O];try{var ja=b.animate([m,G],{duration:this.duration,easing:this.easing,fill:"forwards",composite:"replace"});ja.onfinish=function(){u();setTimeout(function(){return ja.cancel()},
200)};r=!0}catch(X){r=!1}}r||u()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PropertyAnimation"}}],h,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3756,end:17169})}(void 0);Ie.PropertyAnimation=QP;Ie.PropertyAnimation=QP;Ie.PropertyAnimation=QP;var ng=
lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js");ng.cumulativeOffset=Ts;ng.createIFrame=function(e,h,n){h=void 0===h?"about:blank":h;n=void 0===n?new ng.Rectangle(0,0,700,700):n;return new Promise(function(b,c){if(!e)throw Error("Need parent element!");var l=document.createElement("iframe");l.style.position="absolute";l.style.top=n.top()+"px";l.style.left=n.left()+"px";l.style.width=n.width+"px";l.style.height=n.height+"px";l.src=h;var a=!1;l.onload=function(f){a=!0;l.onload=
null;b(l)};ng.promise.waitFor(1E3,function(){return!!a}).catch(function(f){return c(Error("iframe load timeout"))});e.appendChild(l)})};ng.requestAnimationFramePolyfill=function(e){for(var h=0,n=["ms","moz","webkit","o"],b=0;b<n.length&&!e.requestAnimationFrame;++b)e.requestAnimationFrame=e[n[b]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[n[b]+"CancelAnimationFrame"]||e[n[b]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(c,l){var a=Date.now(),f=Math.max(0,
16-(a-h));l=e.setTimeout(function(){c(a+f)},f);h=a+f;return l});e.cancelAnimationFrame||(e.cancelAnimationFrame=function(c){clearTimeout(c)})};ng.createDOMEnvironment_browser=function(){var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return 1==h.nextAddress?(e=ng.IFramedDomEnvironment,h.yield(ng.createIFrame(document.body),2)):h.return(new e(h.yieldResult))})};ng.createDOMEnvironment_node=function(){System.decanonicalize("lively.morphic/").replace(/file:\/\//,"");var e=System._nodeRequire("jsdom"),
h=e.createVirtualConsole().sendTo(console);return new Promise(function(n,b){e.env("<div></div>",["https://code.jquery.com/pep/0.4.1/pep.js"],{virtualConsole:h},function(c,l){return c?b(c):n(new ng.DomEnvironment(l,l.document,function(){return l.close()}))})})};ng.createDOMEnvironment=vj;ng.defaultDOMEnv=Fu;ng.setCSSDef=function(e,h,n){ng.arr.from(e.childNodes).forEach(function(b){return e.removeChild(b)});h=n.createTextNode(h);e.styleSheet?e.styleSheet.cssText=h.nodeValue:e.appendChild(h);return e};
ng.addCSSDef=function(e,h,n){var b=n.createElement("style");b.type="text/css";e&&b.setAttribute("id",e);ng.setCSSDef(b,h,n);n.head.appendChild(b);return b};ng.addOrChangeCSSDeclaration=nc;ng.addOrChangeLinkedCSS=tr;ng.promise=Kf;ng.obj=lf;ng.arr=Te;ng.Rectangle=Pd;ng.cumulativeOffset=Ts;ng.cumulativeOffset=Ts;ng.createDOMEnvironment=vj;ng.createDOMEnvironment=vj;(function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=h.hasOwnProperty("DomEnvironment")&&"function"===
typeof h.DomEnvironment?h.DomEnvironment:h.DomEnvironment=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b,c,l){ng.requestAnimationFramePolyfill(b);this.window=b;this.document=c;this.destroyFn=l}},{key:"destroy",value:function(){"function"===typeof this.destroyFn&&this.destroyFn()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DomEnvironment"}}],
h,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3079,end:3372})})(void 0);(function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=h.hasOwnProperty("IFramedDomEnvironment")&&"function"===typeof h.IFramedDomEnvironment?h.IFramedDomEnvironment:
h.IFramedDomEnvironment=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Nb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b.contentWindow,b.contentWindow.document,function(){b.contentWindow&&b.contentWindow.close();b.parentNode&&b.parentNode.removeChild(b)});this.iframe=b}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"IFramedDomEnvironment"}}],h,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3374,end:3718})})(ng.DomEnvironment);ng._defaultEnv=ng._defaultEnv||void 0;ng.defaultDOMEnv=Fu;ng.defaultDOMEnv=Fu;ng.addOrChangeCSSDeclaration=nc;ng.addOrChangeCSSDeclaration=
nc;ng.addOrChangeLinkedCSS=tr;ng.addOrChangeLinkedCSS=tr;var VI=function(){return function(e){e=void 0===e?window.document:e;return function(h,n,b){var c=n||void 0;"undefined"===typeof b&&(b=n,c=void 0);var l=h.split(".");if(1<l.length)for(h=l.shift(),n=0;n<l.length;n++){var a=l[n],f;-1<(f=a.indexOf("#"))&&(a.slice(f+1),a.slice(0,f))}n=h.split("#");1<n.length&&(h=n[0]);h=e.createElement(h);if(c){for(var m in c)"style"!==m&&"dataset"!==m&&"attributes"!==m&&(h[m]=c[m]);if(m=c.style)for(var q in m)h.style[q]=
m[q];if(q=c.dataset)if(h.dataset)for(var r in q)h.dataset[r]=q[r];else for(r in q)h.setAttribute("data-"+r,q[r]);if(c=c.attributes)for(var u in c)c[u]&&ng.obj.isBoolean(c[u])?h.toggleAttribute(u):h.setAttribute(u,c[u])}b||(b="");if("string"===typeof b)h.appendChild(e.createTextNode(b));else if(Array.isArray(b))for(n=0;n<b.length;n++)u=b[n],h.appendChild("string"===typeof u?e.createTextNode(u):u);else h.appendChild("string"===typeof b?e.createTextNode(b):b);return h}}}();ng.hyperscriptFnForDocument=
VI;ng.hyperscriptFnForDocument=VI;ng.hyperscriptFnForDocument=VI;var Pe=lively.FreezerRuntime.recorderFor("lively.resources/src/helpers.js");Pe.applyExclude=aa;Pe.parseQuery=p;Pe.stringifyQuery=t;Pe.withRelativePartsResolved=w;Pe._relativePathBetween_checkPathes=function(e,h){e.startsWith("/")&&(e=e.slice(1));h.startsWith("/")&&(h=h.slice(1));e=e.split("/");h=h.split("/");for(var n=0;n<h.length&&e[n]&&e[n]==h[n];n++);return"../".repeat(Math.max(0,h.length-n-1))+e.splice(n,e.length).join("/")};Pe.relativePathBetween=
x;Pe.join=B;Pe.parent=E;Pe.parents=K;Pe.resource=T;Pe.createFiles=ka;Pe.registerExtension=ma;Pe.unregisterExtension=Ea;Pe.applyExclude=aa;Pe.applyExclude=aa;Pe.parseQuery=p;Pe.parseQuery=p;Pe.stringifyQuery=t;Pe.stringifyQuery=t;Pe.slashEndRe=/\/+$/;Pe.slashStartRe=/^\/+/;Pe.protocolRe=/^[a-z0-9-_\.]+:/;Pe.urlRe=/^([^:\/]+):\/\/([^\/]*)(.*)/;Pe.slashslashRe=/^\/\/[^\/]+/;Pe.pathDotRe=/\/\.\//g;Pe.pathDoubleDotRe=/\/[^\/]+\/\.\./;Pe.pathDoubleSlashRe=/(^|[^:])[\/]+/g;Pe.withRelativePartsResolved=w;
Pe.withRelativePartsResolved=w;Pe.relativePathBetween=x;Pe.relativePathBetween=x;Pe.join=B;Pe.join=B;Pe.parent=E;Pe.parent=E;Pe.parents=K;Pe.parents=K;var Yy=[];Pe.extensions=Yy;Pe.extensions=Yy;Pe.extensions=Yy;Pe.resource=T;Pe.resource=T;Pe.createFiles=ka;Pe.createFiles=ka;Pe.registerExtension=ma;Pe.registerExtension=ma;Pe.unregisterExtension=Ea;Pe.unregisterExtension=Ea;var WI=/^file:\/\/\/[a-z]:\//i;Pe.windowsURLPrefixRe=WI;Pe.windowsURLPrefixRe=WI;Pe.windowsURLPrefixRe=WI;var XI=/^[a-z]:\//i;
Pe.windowsPathPrefixRe=XI;Pe.windowsPathPrefixRe=XI;Pe.windowsPathPrefixRe=XI;var YI=/^[a-z]:\/$/i;Pe.windowsRootPathRe=YI;Pe.windowsRootPathRe=YI;Pe.windowsRootPathRe=YI;var ii=lively.FreezerRuntime.recorderFor("lively.resources/src/resource.js");ii.nyi=function(e,h){throw Error(h+" for "+e.constructor.name+" not yet implemented");};ii.resource=T;ii.parseQuery=p;ii.withRelativePartsResolved=w;ii.relativePathBetween=x;ii.windowsPathPrefixRe=XI;ii.stringifyQuery=t;ii.slashEndRe=/\/+$/;ii.slashStartRe=
/^\/+/;ii.protocolRe=/^[a-z0-9-_\.]+:/;ii.slashslashRe=/^\/\/[^\/]+/;var If=function(e,h){if(!e)throw Error("Cannot create resource without url");this.url=String(e);this.binary=!1;this.linkCount=this._isLink=this._isDirectory=this.mode=this.group=this.user=this.contentType=this.type=this.size=this.etag=this.created=this.lastModified=void 0};If.fromProps=function(e){e=void 0===e?{}:e;return(new this(e.url)).assignProperties(e)};If.prototype.equals=function(e){if(!e||this.constructor!==e.constructor)return!1;
var h=this.url;e=e.url;"/"===h[h.length-1]&&(h=h.slice(0,-1));"/"===e[e.length-1]&&(e=e.slice(0,-1));return h===e};If.prototype.toString=function(){return this.constructor.name+'("'+this.url+'")'};If.prototype.newResource=function(e){return ii.resource(e,this)};If.prototype.path=function(){var e=this.url.replace(ii.protocolRe,"").replace(ii.slashslashRe,"");return""===e?"/":e};If.prototype.pathWithoutQuery=function(){return this.path().split("?")[0]};If.prototype.name=function(){var e=this.path(),
h=e.lastIndexOf("?");-1<h&&(e=e.slice(0,h));e.endsWith("/")&&(e=e.slice(0,-1));e=e.split("/");return decodeURIComponent(e[e.length-1])};If.prototype.ext=function(){var e=this.url;if(e.endsWith("/"))return"";e=$jscomp.makeIterator(e.match(/\.([^\/\.]+$)/)||["",""]);e.next();return e.next().value.toLowerCase()};If.prototype.nameWithoutExt=function(){var e=this.name(),h=e.lastIndexOf(".");0<h&&(e=e.slice(0,h));return e};If.prototype.scheme=function(){return this.url.split(":")[0]};If.prototype.host=
function(){var e=this.url.indexOf("://");if(-1===e)return null;e=this.url.slice(e+3);var h=e.indexOf("/");return e.slice(0,-1<h?h:e.length)};If.prototype.schemeAndHost=function(){return this.isRoot()?this.asFile().url:this.url.slice(0,this.url.length-this.path().length)};If.prototype.parent=function(){return this.isRoot()?null:this.newResource(this.url.split("?")[0].replace(ii.slashEndRe,"").split("/").slice(0,-1).join("/")+"/")};If.prototype.parents=function(){for(var e=[],h=this.parent();h;)e.unshift(h),
h=h.parent();return e};If.prototype.isParentOf=function(e){var h=this;return e.schemeAndHost()===this.schemeAndHost()&&e.parents().some(function(n){return n.equals(h)})};If.prototype.query=function(){return ii.parseQuery(this.url)};If.prototype.withQuery=function(e){var h=Object.assign({},this.query(),{},e);e=$jscomp.makeIterator(this.url.split("?")).next().value;h=ii.stringifyQuery(h);return this.newResource(e+"?"+h)};If.prototype.commonDirectory=function(e){if(e.schemeAndHost()!==this.schemeAndHost())return null;
if(this.isDirectory()&&this.equals(e))return this;if(this.isRoot())return this.asDirectory();if(e.isRoot())return e.asDirectory();e=e.parents();for(var h=this.parents(),n=this.root(),b=0;b<h.length;b++){var c=h[b],l=e[b];if(!l||!c.equals(l))break;n=c}return n};If.prototype.withRelativePartsResolved=function(){var e=this.path(),h=ii.withRelativePartsResolved(e);if(h===e)return this;h.startsWith("/")&&(h=h.slice(1));h[1]===":".startsWith("/")?h=h.slice(1):":"===h[1]&&h.match(ii.windowsPathPrefixRe)&&
(h=h.slice(3));return this.newResource(this.root().url+h)};If.prototype.relativePathFrom=function(e){return ii.relativePathBetween(e.url,this.url)};If.prototype.withPath=function(e){return(this.isRoot()?this:this.root()).join(e)};If.prototype.join=function(e){return this.newResource(this.url.replace(ii.slashEndRe,"")+"/"+e.replace(ii.slashStartRe,""))};If.prototype.isRoot=function(){return"/"===this.path()};If.prototype.isFile=function(){return!this.isRoot()&&!this.url.match(ii.slashEndRe)};If.prototype.isDirectory=
function(){return!this.isFile()};If.prototype.asDirectory=function(){return this.url.endsWith("/")?this:this.newResource(this.url.replace(ii.slashEndRe,"")+"/")};If.prototype.root=function(){if(this.isRoot())return this;var e=this.url.slice(0,-this.path().length);return this.newResource(e+"/")};If.prototype.asFile=function(){return this.url.endsWith("/")?this.newResource(this.url.replace(ii.slashEndRe,"")):this};If.prototype.assignProperties=function(e){for(var h in e)if("url"!==h){var n=h;if("isLink"===
h||"isDirectory"===h)n="_"+h;this[n]=e[h]}return this};If.prototype.ensureExistance=function(e){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:return n.yield(h.exists(),2);case 2:return n.yieldResult?n.return(h):n.yield(h.parent().ensureExistance(),3);case 3:return h.isFile()?n.yield(h.write(e||""),5):n.yield(h.mkdir(),5);case 5:return n.return(h)}})};If.prototype.copyTo=function(e,h){h=void 0===h?!0:h;var n=this,b,c,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:if(n.isFile()){l=
e.isFile()?e:e.join(n.name());if(!h){m.jumpTo(8);break}return m.yield(l.parent().ensureExistance(),8)}if(!e.isDirectory())throw Error("Cannot copy a directory to a file!");return m.yield(n.dirList("infinity"),4);case 4:return b=m.yieldResult,c=b.map(function(q){return e.join(q.relativePathFrom(n))}),m.yield(e.ensureExistance(),5);case 5:return m.yield(b.reduceRight(function(q,r,u){return function(){return Promise.resolve(r.isDirectory()&&c[u].ensureExistance()).then(q)}},function(){return Promise.resolve()})(),
6);case 6:return m.yield(b.reduceRight(function(q,r,u){return function(){return Promise.resolve(r.isFile()&&r.copyTo(c[u],!1)).then(q)}},function(){return Promise.resolve()})(),3);case 8:return a=l,f=a.write,m.yield(n.read(),11);case 11:return m.yield(f.call(a,m.yieldResult),3);case 3:return m.return(n)}})};If.prototype.rename=function(e){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(h.copyTo(e),2);h.remove();return n.return(e)})};If.prototype.beBinary=
function(e){return this.setBinary(!0)};If.prototype.setBinary=function(e){this.binary=e;return this};If.prototype.read=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){ii.nyi(e,"read");h.jumpToEnd()})};If.prototype.write=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){ii.nyi(e,"write");h.jumpToEnd()})};If.prototype.mkdir=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){ii.nyi(e,"mkdir");h.jumpToEnd()})};
If.prototype.exists=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){ii.nyi(e,"exists");h.jumpToEnd()})};If.prototype.remove=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){ii.nyi(e,"remove");h.jumpToEnd()})};If.prototype.dirList=function(e,h){var n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){ii.nyi(n,"dirList");b.jumpToEnd()})};If.prototype.readProperties=function(e){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){ii.nyi(h,
"readProperties");n.jumpToEnd()})};If.prototype.writeJson=function(e,h){return this.write((void 0===h?0:h)?JSON.stringify(e,null,2):JSON.stringify(e))};If.prototype.readJson=function(e){var h=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?(n=JSON,b=n.parse,c.yield(h.read(),2)):c.return(b.call(n,c.yieldResult))})};If.prototype.__serialize__=function(){return{__expr__:'var r = null; try { r = resource("'+this.url+'");} catch (err) {}; r',bindings:{"lively.resources":["resource"]}}};
$jscomp.global.Object.defineProperties(If.prototype,{isResource:{configurable:!0,enumerable:!0,get:function(){return!0}},canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!1}}});ii.Resource=If;ii.default=If;var $f=lively.FreezerRuntime.recorderFor("lively.resources/src/http-resource.js");$f.davNs=function(e){return(e=e.match(/\/([a-z]+?):multistatus/i))?e[1]:"d"};$f.propfindRequestPayload=function(){return'<?xml version="1.0" encoding="utf-8" ?>\n    <D:propfind xmlns:D="DAV:">\n      <D:prop>\n        <D:creationdate/>\n        <D:getcontentlength/>\n        <D:getcontenttype/>\n        <D:getetag/>\n        <D:getlastmodified/>\n        <D:resourcetype/>\n      </D:prop>\n    </D:propfind>'};
$f.readPropertyNode=function(e,h){h=void 0===h?{}:h;var n=e.tagName.replace(/[^:]+:/,"");n=$f.propertyNodeMap[n];e=e.textContent;switch(n){case "lastModified":case "created":e=new Date(e);break;case "size":e=Number(e)}h[n]=e;return h};$f.readXMLPropfindResult=function(e){var h=(new DOMParser).parseFromString(e,"text/xml");e=$f.davNs(e);h=(new $f.XPathQuery("/"+e+":multistatus/"+e+":response")).findAll(h.documentElement);var n=new $f.XPathQuery(e+":href"),b=new $f.XPathQuery(e+":propstat/"+e+":prop");
return h.map(function(c){var l=b.findFirst(c);l=Array.from(l.childNodes).reduce(function(a,f){return $f.readPropertyNode(f,a)},{});c=n.findFirst(c);l.url=c.textContent||c.text;return l})};$f.defaultOrigin=function(){return document.location.origin};$f.makeRequest=function(e,h,n,b,c){b=void 0===b?{}:b;c=e.url;var l=e.useCors,a=e.useProxy,f=e.headers;l="undefined"!==typeof l?l:!0;h={method:void 0===h?"GET":h};if("undefined"!==typeof a?a:1)Object.assign(b,{pragma:"no-cache","cache-control":"no-cache",
"x-lively-proxy-request":c}),c=e.proxyDomain||$f.defaultOrigin();l&&(h.mode="cors");n&&(h.body=n);h.redirect="follow";h.headers=Object.assign({},b,{},f);return fetch(c,h)};$f.upload=Za;$f.Resource=If;$f.applyExclude=aa;$f.promise=Kf;$f.num=wk;var gE=function(e){this.expression=e;this.contextNode=null;this.xpe=new XPathEvaluator};gE.prototype.establishContext=function(e){this.nsResolver||(e=e.ownerDocument?e.ownerDocument.documentElement:e.documentElement,e!==this.contextNode&&(this.contextNode=e,
this.nsResolver=this.xpe.createNSResolver(e)))};gE.prototype.manualNSLookup=function(){this.nsResolver=function(e){return Namespace[e.toUpperCase()]||null};return this};gE.prototype.findAll=function(e,h){this.establishContext(e);e=this.xpe.evaluate(this.expression,e,this.nsResolver,XPathResult.ANY_TYPE,null);for(var n=[],b;b=e.iterateNext();)n.push(b);return 0<n.length||void 0===h?n:h};gE.prototype.findFirst=function(e){this.establishContext(e);return this.xpe.evaluate(this.expression,e,this.nsResolver,
XPathResult.ANY_TYPE,null).iterateNext()};$f.XPathQuery=gE;$f.propertyNodeMap={getlastmodified:"lastModified",creationDate:"created",getetag:"etag",getcontentlength:"size",resourcetype:"type",getcontenttype:"contentType"};$f.binaryExtensions="3ds 3g2 3gp 7z a aac adp ai aif aiff alz ape apk ar arj asf au avi bak bh bin bk bmp btif bz2 bzip2 cab caf cgm class cmx cpio cr2 csv cur dat deb dex djvu dll dmg dng doc docm docx dot dotm dra DS_Store dsk dts dtshd dvb dwg dxf ecelp4800 ecelp7470 ecelp9600 egg eol eot epub exe f4v fbs fh fla flac fli flv fpx fst fvt g3 gif graffle gz gzip h261 h263 h264 icns ico ief img ipa iso jar jpeg jpg jpgv jpm jxr key ktx lha lvp lz lzh lzma lzo m3u m4a m4v mar mdi mht mid midi mj2 mka mkv mmr mng mobi mov movie mp3 mp4 mp4a mpeg mpg mpga mxu nef npx numbers o oga ogg ogv otf pages pbm pcx pdf pea pgm pic png pnm pot potm potx ppa ppam ppm pps ppsm ppsx ppt pptm pptx psd pya pyc pyo pyv qt rar ras raw rgb rip rlc rmf rmvb rtf rz s3m s7z scpt sgi shar sil sketch slk smv so sub swf tar tbz tbz2 tga tgz thmx tif tiff tlz ttc ttf txz udf uvh uvi uvm uvp uvs uvu viv vob war wav wax wbmp wdp weba webm webp whl wim wm wma wmv wmx woff woff2 wvx xbm xif xla xlam xls xlsb xlsm xlsx xlt xltm xltx xm xmind xpi xpm xwd xz z zip zipx".split(" ");
$f.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==typeof global&&"undefined"!==typeof process;$f.upload=Za;$f.upload=Za;var Yk=function(e,h){h=void 0===h?{}:h;e=$f.Resource.call(this,e,h)||this;e.onLoad=h.onLoad||function(){};e.onProgress=h.onProgress||function(){};e.useProxy=h.hasOwnProperty("useProxy")?h.useProxy:!1;e.proxyDomain=h.proxyDomain||void 0;e.useCors=h.hasOwnProperty("useCors")?h.useCors:!1;e.headers=h.headers||{};e.binary=e.isFile()?$f.binaryExtensions.includes(e.ext()):
!1;e.errorOnHTTPStatusCodes=h.hasOwnProperty("errorOnHTTPStatusCodes")?h.errorOnHTTPStatusCodes:!0;return e};$jscomp.inherits(Yk,$f.Resource);Yk.prototype.join=function(e){return Object.assign($f.Resource.prototype.join.call(this,e),{headers:this.headers,useCors:this.useCors,useProxy:this.useProxy,proxyDomain:this.proxyDomain})};Yk.prototype.makeProxied=function(e){void 0!==e&&(this.proxyDomain=e);return this.useProxy?this:new this.constructor(this.url,{headers:this.headers,useCors:this.useCors,useProxy:!0,
proxyDomain:this.proxyDomain})};Yk.prototype.noErrorOnHTTPStatusCodes=function(){this.errorOnHTTPStatusCodes=!1;return this};Yk.prototype.read=function(){var e=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield($f.makeRequest(e),2);h=n.yieldResult;if(!h.ok&&e.errorOnHTTPStatusCodes)throw Error("Cannot read "+e.url+": "+h.statusText+" "+h.status);if(!e.binary)return n.return(h.text());if("blob"===e.binary)return n.return(h.blob());if("function"===
typeof h.arrayBuffer)return n.return(h.arrayBuffer());if("function"===typeof h.buffer)return n.return(h.buffer());throw Error("Don't now how to read binary resource "+e+"'");})};Yk.prototype.write=function(e){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){if(!h.isFile())throw Error("Cannot write a non-file: "+h.url);return b.yield($f.upload(h,e),2)}n=b.yieldResult;if(!$f.num.between(n.status,200,300)&&h.errorOnHTTPStatusCodes)throw Error("Cannot write "+
h.url+": "+n.statusText+" "+n.status);return b.return(h)})};Yk.prototype.mkdir=function(){var e=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){if(e.isFile())throw Error("Cannot mkdir on a file: "+e.url);return n.yield($f.makeRequest(e,"MKCOL"),2)}h=n.yieldResult;if(!h.ok&&e.errorOnHTTPStatusCodes)throw Error("Cannot create directory "+e.url+": "+h.statusText+" "+h.status);return n.return(e)})};Yk.prototype.exists=function(){var e=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==
n.nextAddress)return e.isRoot()?(h=!0,n.jumpTo(2)):n.yield($f.makeRequest(e,"HEAD"),3);2!=n.nextAddress&&(h=!!n.yieldResult.ok);return n.return(h)})};Yk.prototype.remove=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return 1==h.nextAddress?h.yield($f.makeRequest(e,"DELETE"),2):h.return(e)})};Yk.prototype._propfind=function(){var e=this,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return c.yield($f.makeRequest(e,"PROPFIND",
null,{"Content-Type":"text/xml"}),2);if(3!=c.nextAddress){h=c.yieldResult;if(!h.ok&&e.errorOnHTTPStatusCodes)throw Error("Error in dirList for "+e.url+": "+h.statusText);return c.yield(h.text(),3)}n=c.yieldResult;b=e.root();return c.return($f.readXMLPropfindResult(n).map(function(l){return b.join(l.url).assignProperties(l)}))})};Yk.prototype.dirList=function(e,h){e=void 0===e?1:e;h=void 0===h?{}:h;var n=this,b,c,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){if("number"!==
typeof e&&"infinity"!==e)throw Error("dirList \u2013 invalid depth argument: "+e);b=h;c=b.exclude;0>=e&&(e=1);return 1===e?m.yield(n._propfind(),5):m.yield(n.dirList(1,h),4)}if(5!=m.nextAddress)return l=m.yieldResult,a=l.filter(function(q){return q.isDirectory()}),m.return(Promise.all(a.map(function(q){return q.dirList("number"===typeof e?e-1:e,h)})).then(function(q){return q.reduce(function(r,u){return r.concat(u)},l)}));f=m.yieldResult;f.shift();c&&(f=$f.applyExclude(c,f));return m.return(f)})};
Yk.prototype.readProperties=function(e){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(h._propfind(),2);n=b.yieldResult[0];return b.return(h.assignProperties(n))})};Yk.prototype.post=function(e){e=void 0===e?null:e;var h=this,n,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return"string"!==typeof e&&(e=JSON.stringify(e)),l.yield($f.makeRequest(h,"POST",e,{}),2);case 2:return n=l.yieldResult,
l.setCatchFinallyBlocks(3),l.yield(n.text(),5);case 5:b=l.yieldResult;l.leaveTryBlock(4);break;case 3:l.enterCatchBlock();case 4:if(b&&"application/json"===n.headers.get("content-type"))try{c=JSON.parse(b)}catch(a){}if(!n.ok&&h.errorOnHTTPStatusCodes)throw Error("Error in POST "+h.url+": "+(b||n.statusText));return l.return(c||b)}})};Yk.prototype.copyTo=function(e,h){h=void 0===h?!0:h;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(n.isFile()&&(b=e.isFile()?e:e.join(n.name()),
$f.isNode)){if(b.isHTTPResource)return c.return(n._copyTo_file_nodejs_http(b,h));if(b.isNodeJSFileResource)return c.return(n._copyTo_file_nodejs_fs(b,h))}return c.return($f.Resource.prototype.copyTo.call(n,e,h))})};Yk.prototype._copyFrom_file_nodejs_fs=function(e,h){h=void 0===h?!0:h;var n=this,b,c,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return h?a.yield(n.parent().ensureExistance(),2):a.jumpTo(2);if(4!=a.nextAddress)return c=e._createReadStream(),c.on("error",
function(f){return b=f}),a.yield($f.makeRequest(n,"PUT",c),4);l=a.yieldResult;if(b)throw b;if(!l.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+l.statusText+" "+l.status);return a.return(n)})};Yk.prototype._copyTo_file_nodejs_fs=function(e,h){h=void 0===h?!0:h;var n=this,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return h?l.yield(e.parent().ensureExistance(),2):l.jumpTo(2);if(4!=l.nextAddress)return l.yield($f.makeRequest(n,"GET"),4);b=
l.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+b.statusText+" "+b.status);return l.return(new Promise(function(a,f){return b.body.pipe(e._createWriteStream()).on("error",function(m){return c=m}).on("finish",function(){return c?f(c):a(n)})}))})};Yk.prototype._copyTo_file_nodejs_http=function(e,h){h=void 0===h?!0:h;var n=this,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:if(!h){l.jumpTo(2);break}return l.yield(e.parent().ensureExistance(),
2);case 2:return l.yield($f.makeRequest(n,"GET"),4);case 4:b=l.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+b.statusText+" "+b.status);return l.yield($f.makeRequest(e,"PUT",b.body),5);case 5:c=l.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot PUT: "+c.statusText+" "+c.status);l.jumpToEnd()}})};$jscomp.global.Object.defineProperties(Yk.prototype,{isHTTPResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});$f.WebDAVResource=
Yk;var ZI={name:"http-webdav-resource",matches:function(e){return e.startsWith("http:")||e.startsWith("https:")},resourceClass:$f.WebDAVResource};$f.resourceExtension=ZI;$f.resourceExtension=ZI;$f.resourceExtension=ZI;$f.default=Yk;var Ur=System.get("@system-env").node?require("fs"):{},qfa=Ur.readFile,rfa=Ur.writeFile,sfa=Ur.exists,tfa=Ur.readdir,ufa=Ur.mkdir,vfa=Ur.rmdir,wfa=Ur.unlink,xfa=Ur.lstat,yfa=Ur.rename,zfa=Ur.createWriteStream,Afa=Ur.createReadStream,ff=lively.FreezerRuntime.recorderFor("lively.resources/src/fs-resource.js");
ff.wrapInPromise=function(e){return function(h){for(var n=[],b=0;b<arguments.length;++b)n[b-0]=arguments[b];return new Promise(function(c,l){return e.apply(null,n.concat(function(a,f){return a?l(a):c(f)}))})}};ff.Resource=If;ff.applyExclude=aa;ff.windowsURLPrefixRe=WI;ff.windowsRootPathRe=YI;ff.createWriteStream=zfa;ff.createReadStream=Afa;ff.readFile=qfa;ff.writeFile=rfa;ff.exists=sfa;ff.mkdir=ufa;ff.rmdir=vfa;ff.unlink=wfa;ff.readdir=tfa;ff.lstat=xfa;ff.rename=yfa;ff.readFileP=ff.wrapInPromise(ff.readFile);
ff.writeFileP=ff.wrapInPromise(ff.writeFile);ff.existsP=function(e){return new Promise(function(h,n){return ff.exists(e,function(b){return h(!!b)})})};ff.readdirP=ff.wrapInPromise(ff.readdir);ff.mkdirP=ff.wrapInPromise(ff.mkdir);ff.rmdirP=ff.wrapInPromise(ff.rmdir);ff.unlinkP=ff.wrapInPromise(ff.unlink);ff.lstatP=ff.wrapInPromise(ff.lstat);ff.renameP=ff.wrapInPromise(ff.rename);var cm=function(){return ff.Resource.apply(this,arguments)||this};$jscomp.inherits(cm,ff.Resource);cm.prototype.path=function(){return this.url.replace("file://",
"")};cm.prototype.stat=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(ff.lstatP(e.path()))})};cm.prototype.read=function(){var e=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){h=ff.readFileP(e.path());return n.return(e.binary?h:h.then(String))})};cm.prototype.write=function(e){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){if(h.isDirectory())throw Error("Cannot write into a directory: "+
h.path());return n.yield(ff.writeFileP(h.path(),e),2)}return n.return(h)})};cm.prototype.mkdir=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){if(e.isFile())throw Error("Cannot mkdir on a file: "+e.path());return h.yield(ff.mkdirP(e.path()),2)}return h.return(e)})};cm.prototype.exists=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(e.isRoot()?!0:ff.existsP(e.path()))})};cm.prototype.dirList=
function(e,h){e=void 0===e?1:e;h=void 0===h?{}:h;var n=this,b,c,l,a,f,m,q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:if("number"!==typeof e&&"infinity"!==e)throw Error("dirList \u2013 invalid depth argument: "+e);b=h;c=b.exclude;0>=e&&(e=1);if(1!==e){A.jumpTo(2);break}l=[];a=$jscomp;f=a.makeIterator;return A.yield(ff.readdirP(n.path()),3);case 3:m=f.call(a,A.yieldResult),q=m.next();case 4:if(q.done){A.jumpTo(6);break}r=q.value;u=n.join(r);
return A.yield(u.stat(),7);case 7:v=A.yieldResult;u=v.isDirectory()?u.asDirectory():u;u._assignPropsFromStat(v);l.push(u);q=m.next();A.jumpTo(4);break;case 6:return c&&(l=ff.applyExclude(c,l)),A.return(l);case 2:return A.yield(n.dirList(1,h),8);case 8:return y=A.yieldResult,z=y.filter(function(C){return C.isDirectory()}),A.return(Promise.all(z.map(function(C){return C.dirList("number"===typeof e?e-1:e,h)})).then(function(C){return C.reduce(function(G,F){return G.concat(F)},y)}))}})};cm.prototype.isEmptyDirectory=
function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return 1==h.nextAddress?h.yield(e.dirList(),2):h.return(0===h.yieldResult.length)})};cm.prototype.rename=function(e){var h=this,n,b,c,l,a,f,m,q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:if(!(e instanceof h.constructor))return A.return(ff.Resource.prototype.rename.call(h,e));if(h.isFile()){e=e.asFile();ff.renameP(h.path(),e.path());A.jumpTo(2);break}e=e.asDirectory();
return A.yield(e.ensureExistance(),3);case 3:return n=[],b=[],c=$jscomp,l=c.makeIterator,A.yield(h.dirList("infinity"),4);case 4:a=l.call(c,A.yieldResult);for(f=a.next();!f.done;f=a.next())m=f.value,m.isDirectory()?b.push(m):n.push(m);q=$jscomp.makeIterator(b);r=q.next();case 5:if(r.done){A.jumpTo(7);break}u=r.value;return A.yield(e.join(u.relativePathFrom(h)).ensureExistance(),6);case 6:r=q.next();A.jumpTo(5);break;case 7:v=$jscomp.makeIterator(n),y=v.next();case 9:if(y.done)return A.yield(h.remove(),
2);z=y.value;return A.yield(z.rename(e.join(z.relativePathFrom(h))),10);case 10:y=v.next();A.jumpTo(9);break;case 2:return A.return(e)}})};cm.prototype.remove=function(){var e=this,h,n,b,c,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return a.yield(e.exists(),2);case 2:if(!a.yieldResult){a.jumpTo(3);break}return e.isDirectory()?(h=$jscomp,n=h.makeIterator,a.yield(e.dirList(),7)):a.yield(ff.unlinkP(e.path()),3);case 7:b=n.call(h,a.yieldResult),c=b.next();
case 8:if(c.done)return a.yield(ff.rmdirP(e.path()),3);l=c.value;return a.yield(l.remove(),9);case 9:c=b.next();a.jumpTo(8);break;case 3:return a.return(e)}})};cm.prototype.readProperties=function(){var e=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(h=e,n=h._assignPropsFromStat,b.yield(e.stat(),2)):b.return(n.call(h,b.yieldResult))})};cm.prototype.copyTo=function(e,h){h=void 0===h?!0:h;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return n.isFile()&&
(b=e.isFile()?e:e.join(n.name()),b.isHTTPResource)?c.return(b._copyFrom_file_nodejs_fs(n,h=!0)):c.return(ff.Resource.prototype.copyTo.call(n,e,h))})};cm.prototype._assignPropsFromStat=function(e){return this.assignProperties({lastModified:e.mtime,created:e.ctime,size:e.size,type:e.isDirectory()?"directory":"file",isLink:e.isSymbolicLink()})};cm.prototype._createWriteStream=function(){return ff.createWriteStream(this.path())};cm.prototype._createReadStream=function(){return ff.createReadStream(this.path())};
$jscomp.global.Object.defineProperties(cm.prototype,{isNodeJSFileResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});ff.NodeJSFileResource=cm;var hE=function(e,h){"file:///"!==e.slice(0,8)&&"file://"===e.slice(0,7)&&(e="file:///"+e.slice(7));e.includes("\\")&&(e=e.replace(/\\/g,"/"));return ff.NodeJSFileResource.call(this,e,h)||this};$jscomp.inherits(hE,ff.NodeJSFileResource);hE.prototype.path=function(){return this.url.replace("file:///","")};hE.prototype.isRoot=function(){return!!this.path().match(ff.windowsRootPathRe)};
hE.prototype.root=function(){if(this.isRoot())return this;console.log(this.url);var e=this.url.match(ff.windowsURLPrefixRe);if(e)return this.newResource(e[0]);throw Error("Could not determine root path of windows file resource for url "+this.url);};ff.NodeJSWindowsFileResource=hE;var $I={name:"nodejs-file-resource",matches:function(e){return e.startsWith("file:")},resourceClass:"undefined"!=typeof process&&"win32"===process.platform?ff.NodeJSWindowsFileResource:ff.NodeJSFileResource};ff.resourceExtension=
$I;ff.resourceExtension=$I;ff.resourceExtension=$I;var Gj=lively.FreezerRuntime.recorderFor("lively.resources/src/local-resource.js");Gj.applyExclude=function(e,h){return h?"string"===typeof h?!e.url.includes(h):"function"===typeof h?!h(e):h instanceof RegExp?!h.test(e.url):!0:!0};Gj.Resource=If;Gj.createFiles=ka;Gj.debug=!1;Gj.slashRe=/\//g;var zq=function(e,h){h=void 0===h?{}:h;if(!e||"string"!==typeof e)throw Error("LocalResourceInMemoryBackend needs name!");this.name=e;this._filespec=h};zq.removeHost=
function(e){delete this.hosts[e]};zq.ensure=function(e,h){var n=this;h=void 0===h?{}:h;var b=this.named(h.host);return Promise.resolve().then(function(){return e?Gj.createFiles("local://"+b.name,e):null}).then(function(){return n})};zq.named=function(e){e||(e="default");return this.hosts[e]||(this.hosts[e]=new this(e))};zq.prototype.get=function(e){return this._filespec[e]};zq.prototype.set=function(e,h){this._filespec[e]=h};zq.prototype.write=function(e,h){var n=this._filespec[e];n||(n=this._filespec[e]=
{created:new Date});n.content=h;n.isDirectory=!1;n.lastModified=new Date};zq.prototype.read=function(e){return(e=this._filespec[e])&&e.content?e.content:""};zq.prototype.mkdir=function(e){var h=this._filespec[e];h&&h.isDirectory||(h||(h=this._filespec[e]={created:new Date}),h.content&&delete h.content,h.isDirectory=!0,h.lastModified=new Date)};zq.prototype.partialFilespec=function(e,h){e=void 0===e?"/":e;h=void 0===h?Infinity:h;for(var n={},b=this.filespec,c=Object.keys(b),l=0;l<c.length;l++){var a=
c[l];if(a.startsWith(e)&&e!==a){var f=a.slice(e.length);(f.includes("/")?f.match(Gj.slashRe).length+1:1)>h||(n[a]=b[a])}}return n};$jscomp.global.Object.defineProperties(zq.prototype,{filespec:{configurable:!0,enumerable:!0,get:function(){return this._filespec},set:function(e){this._filespec=e}}});$jscomp.global.Object.defineProperties(zq,{hosts:{configurable:!0,enumerable:!0,get:function(){return this._hosts||(this._hosts={})}}});Gj.LocalResourceInMemoryBackend=zq;var Vr=function(){return Gj.Resource.apply(this,
arguments)||this};$jscomp.inherits(Vr,Gj.Resource);Vr.prototype.read=function(){return Promise.resolve(this.localBackend.read(this.path()))};Vr.prototype.write=function(e){Gj.debug&&console.log("["+this+"] write");if(this.isDirectory())throw Error("Cannot write into a directory! ("+this.url+")");var h=this.localBackend.get(this.path());if(h&&h.isDirectory)throw Error(this.url+" already exists and is a directory (cannot write into it!)");this.localBackend.write(this.path(),e);return Promise.resolve(this)};
Vr.prototype.mkdir=function(){Gj.debug&&console.log("["+this+"] mkdir");if(!this.isDirectory())throw Error("Cannot mkdir a file! ("+this.url+")");var e=this.localBackend.get(this.path());if(e&&e.isDirectory)return Promise.resolve(this);if(e&&!e.isDirectory)throw Error(this.url+" already exists and is a file (cannot mkdir it!)");this.localBackend.mkdir(this.path());return Promise.resolve(this)};Vr.prototype.exists=function(){Gj.debug&&console.log("["+this+"] exists");return Promise.resolve(this.isRoot()||
this.path()in this.localBackend.filespec)};Vr.prototype.remove=function(){var e=this;Gj.debug&&console.log("["+this+"] remove");var h=this.path();Object.keys(this.localBackend.filespec).forEach(function(n){return n.startsWith(h)&&delete e.localBackend.filespec[n]});return Promise.resolve(this)};Vr.prototype.readProperties=function(){Gj.debug&&console.log("["+this+"] readProperties");throw Error("not yet implemented");};Vr.prototype.dirList=function(e,h){e=void 0===e?1:e;h=void 0===h?{}:h;Gj.debug&&
console.log("["+this+"] dirList");if(!this.isDirectory())return this.asDirectory().dirList(e,h);h=h.exclude;var n=this.path(),b=[],c=Object.keys(this.localBackend.filespec);"infinity"===e&&(e=Infinity);for(var l={},a=0;a<c.length;l={$jscomp$loop$prop$dirToChild$2540:l.$jscomp$loop$prop$dirToChild$2540},a++){var f=c[a];f.startsWith(n)&&n!==f&&(f=f.slice(n.length),(f.includes("/")?f.match(Gj.slashRe).length+1:1)>e?(l.$jscomp$loop$prop$dirToChild$2540=this.join(f.split("/").slice(0,e).join("/")+"/"),
b.some(function(m){return function(q){return q.equals(m.$jscomp$loop$prop$dirToChild$2540)}}(l))||b.push(l.$jscomp$loop$prop$dirToChild$2540)):(f=this.join(f),h&&!Gj.applyExclude(f,h)||b.push(f)))}return Promise.resolve(b)};$jscomp.global.Object.defineProperties(Vr.prototype,{localBackend:{configurable:!0,enumerable:!0,get:function(){return Gj.LocalResourceInMemoryBackend.named(this.host())}}});Gj.LocalResource=Vr;var aJ={name:"local-resource",matches:function(e){return e.startsWith("local:")},resourceClass:Gj.LocalResource};
Gj.resourceExtension=aJ;Gj.resourceExtension=aJ;Gj.resourceExtension=aJ;Gj.default=Vr;var Sg=lively.FreezerRuntime.recorderFor("lively.resources/index.js");Sg.createFileSpec=vb;Sg.importModuleViaNative=sb;Sg.loadViaScript=Qb;Sg.ensureFetch=pc;Sg.default=If;Sg.Resource=If;Sg.unregisterExtension=Ea;Sg.registerExtension=ma;Sg.parseQuery=p;Sg.extensions=Yy;Sg.createFiles=ka;Sg.resource=T;Sg.httpResourceExtension=ZI;Sg.fileResourceExtension=$I;Sg.localResourceExtension=aJ;Sg.newUUID=zk;Sg.waitFor=Cv;Sg.registerExtension(Sg.localResourceExtension);
Sg.registerExtension(Sg.httpResourceExtension);Sg.registerExtension(Sg.fileResourceExtension);Sg.createFileSpec=vb;Sg.createFileSpec=vb;Sg.importModuleViaNative=sb;Sg.importModuleViaNative=sb;Sg.loadViaScript=Qb;Sg.loadViaScript=Qb;Sg.ensureFetch=pc;Sg.ensureFetch=pc;Sg.registerExtension=ma;Sg.registerExtension=ma;Sg.unregisterExtension=Ea;Sg.unregisterExtension=Ea;Sg.parseQuery=p;Sg.parseQuery=p;Sg.extensions=Yy;Sg.extensions=Yy;Sg.createFiles=ka;Sg.createFiles=ka;Sg.resource=T;Sg.resource=T;var Bfa=
Object.freeze({__proto__:null,Resource:If,createFileSpec:vb,importModuleViaNative:sb,loadViaScript:Qb,ensureFetch:pc,registerExtension:ma,unregisterExtension:Ea,parseQuery:p,extensions:Yy,createFiles:ka,resource:T}),Ah=lively.FreezerRuntime.recorderFor("lively.morphic/helpers.js");Ah.pathForBrowserHistory=Rb;Ah.addClassMappings=xc;Ah.morph=Gc;Ah.newMorphId=Vc;Ah.lazyInspect=function(e){var h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(System.import("lively.ide/js/inspector.js"),
2);h=b.yieldResult;n=h.inspect;Ah.inspect=n;return b.return(n(e))})};Ah.locateClass=To;Ah.string=Hg;Ah.parseQuery=p;Ah.stringifyQuery=t;Ah.touchInput=Ah.touchInput||void 0;try{document.createEvent("TouchEvent"),Ah.touchInput=!0}catch(e){Ah.touchInput=!1}var qp=ya("aC",Ah.touchInput);Ah.touchInputDevice=qp;Ah.touchInputDevice=qp;Ah.touchInputDevice=qp;Ah.nameToClassMapping=Ah.nameToClassMapping||{};Ah.pathForBrowserHistory=Rb;Ah.pathForBrowserHistory=Rb;Ah.addClassMappings=xc;Ah.addClassMappings=xc;
Ah.morph=Gc;Ah.morph=Gc;Ah.newMorphId=Vc;Ah.newMorphId=Vc;var Zy=ya("a9",Ah.lazyInspect);Ah.inspect=Zy;Ah.inspect=Zy;Ah.inspect=Zy;var Aq=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js");Aq.obj=lf;Aq.morph=Gc;var En=ya("as",function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js"),n=h.hasOwnProperty("Icon")&&"function"===typeof h.Icon?h.Icon:h.Icon=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Nb(n,e,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Icon"}},{key:"makeLabel",value:function(b,c){var l=c=void 0===c?{prefix:"",suffix:""}:c,a=l.prefix;l=l.suffix;var f=[];a&&f.push.apply(f,$jscomp.arrayFromIterable("string"===typeof a?[a||"",{}]:a));f.push.apply(f,$jscomp.arrayFromIterable(this.textAttribute(b,Aq.obj.dissoc(c,["fontSize"]))));l&&f.push.apply(f,$jscomp.arrayFromIterable("string"===typeof l?[l||"",{}]:l));return Aq.morph(Object.assign({type:"label",
value:f},Aq.obj.dissoc(c,["prefix","suffix"])))}},{key:"textAttribute",value:function(b,c){c=void 0===c?{}:c;var l=c.textStyleClasses&&c.textStyleClasses.includes("far");return[Aq.Icons[b].code||"icon "+b+" not found",Object.assign({fontFamily:'"Font Awesome 5 Free", "Font Awesome 5 Brands"',fontWeight:l?"400":"900",textStyleClasses:["fas"]},c)]}},{key:"setIcon",value:function(b,c){b.textAndAttributes=this.textAttribute(c)}}],h,{pathInPackage:function(){return"text/icons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:683,end:1811})}(void 0));Aq.Icon=En;Aq.Icon=En;Aq.Icon=En;var bJ=ya("bm",{"500px":{code:"\uf26e"},"accessible-icon":{code:"\uf368"},accusoft:{code:"\uf369"},"acquisitions-incorporated":{code:"\uf6af"},ad:{code:"\uf641"},"address-book":{code:"\uf2b9"},"address-card":{code:"\uf2bb"},adjust:{code:"\uf042"},adn:{code:"\uf170"},adobe:{code:"\uf778"},adversal:{code:"\uf36a"},
affiliatetheme:{code:"\uf36b"},"air-freshener":{code:"\uf5d0"},airbnb:{code:"\uf834"},algolia:{code:"\uf36c"},"align-center":{code:"\uf037"},"align-justify":{code:"\uf039"},"align-left":{code:"\uf036"},"align-right":{code:"\uf038"},alipay:{code:"\uf642"},allergies:{code:"\uf461"},amazon:{code:"\uf270"},"amazon-pay":{code:"\uf42c"},ambulance:{code:"\uf0f9"},"american-sign-language-interpreting":{code:"\uf2a3"},amilia:{code:"\uf36d"},anchor:{code:"\uf13d"},android:{code:"\uf17b"},angellist:{code:"\uf209"},
"angle-double-down":{code:"\uf103"},"angle-double-left":{code:"\uf100"},"angle-double-right":{code:"\uf101"},"angle-double-up":{code:"\uf102"},"angle-down":{code:"\uf107"},"angle-left":{code:"\uf104"},"angle-right":{code:"\uf105"},"angle-up":{code:"\uf106"},angry:{code:"\uf556"},angrycreative:{code:"\uf36e"},angular:{code:"\uf420"},ankh:{code:"\uf644"},"app-store":{code:"\uf36f"},"app-store-ios":{code:"\uf370"},apper:{code:"\uf371"},apple:{code:"\uf179"},"apple-alt":{code:"\uf5d1"},"apple-pay":{code:"\uf415"},
archive:{code:"\uf187"},archway:{code:"\uf557"},"arrow-alt-circle-down":{code:"\uf358"},"arrow-alt-circle-left":{code:"\uf359"},"arrow-alt-circle-right":{code:"\uf35a"},"arrow-alt-circle-up":{code:"\uf35b"},"arrow-circle-down":{code:"\uf0ab"},"arrow-circle-left":{code:"\uf0a8"},"arrow-circle-right":{code:"\uf0a9"},"arrow-circle-up":{code:"\uf0aa"},"arrow-down":{code:"\uf063"},"arrow-left":{code:"\uf060"},"arrow-right":{code:"\uf061"},"arrow-up":{code:"\uf062"},"arrows-alt":{code:"\uf0b2"},"arrows-alt-h":{code:"\uf337"},
"arrows-alt-v":{code:"\uf338"},artstation:{code:"\uf77a"},"assistive-listening-systems":{code:"\uf2a2"},asterisk:{code:"\uf069"},asymmetrik:{code:"\uf372"},at:{code:"\uf1fa"},atlas:{code:"\uf558"},atlassian:{code:"\uf77b"},atom:{code:"\uf5d2"},audible:{code:"\uf373"},"audio-description":{code:"\uf29e"},autoprefixer:{code:"\uf41c"},avianex:{code:"\uf374"},aviato:{code:"\uf421"},award:{code:"\uf559"},aws:{code:"\uf375"},baby:{code:"\uf77c"},"baby-carriage":{code:"\uf77d"},backspace:{code:"\uf55a"},
backward:{code:"\uf04a"},bacon:{code:"\uf7e5"},bahai:{code:"\uf666"},"balance-scale":{code:"\uf24e"},"balance-scale-left":{code:"\uf515"},"balance-scale-right":{code:"\uf516"},ban:{code:"\uf05e"},"band-aid":{code:"\uf462"},bandcamp:{code:"\uf2d5"},barcode:{code:"\uf02a"},bars:{code:"\uf0c9"},"baseball-ball":{code:"\uf433"},"basketball-ball":{code:"\uf434"},bath:{code:"\uf2cd"},"battery-empty":{code:"\uf244"},"battery-full":{code:"\uf240"},"battery-half":{code:"\uf242"},"battery-quarter":{code:"\uf243"},
"battery-three-quarters":{code:"\uf241"},"battle-net":{code:"\uf835"},bed:{code:"\uf236"},beer:{code:"\uf0fc"},behance:{code:"\uf1b4"},"behance-square":{code:"\uf1b5"},bell:{code:"\uf0f3"},"bell-slash":{code:"\uf1f6"},"bezier-curve":{code:"\uf55b"},bible:{code:"\uf647"},bicycle:{code:"\uf206"},biking:{code:"\uf84a"},bimobject:{code:"\uf378"},binoculars:{code:"\uf1e5"},biohazard:{code:"\uf780"},"birthday-cake":{code:"\uf1fd"},bitbucket:{code:"\uf171"},bitcoin:{code:"\uf379"},bity:{code:"\uf37a"},"black-tie":{code:"\uf27e"},
blackberry:{code:"\uf37b"},blender:{code:"\uf517"},"blender-phone":{code:"\uf6b6"},blind:{code:"\uf29d"},blog:{code:"\uf781"},blogger:{code:"\uf37c"},"blogger-b":{code:"\uf37d"},bluetooth:{code:"\uf293"},"bluetooth-b":{code:"\uf294"},bold:{code:"\uf032"},bolt:{code:"\uf0e7"},bomb:{code:"\uf1e2"},bone:{code:"\uf5d7"},bong:{code:"\uf55c"},book:{code:"\uf02d"},"book-dead":{code:"\uf6b7"},"book-medical":{code:"\uf7e6"},"book-open":{code:"\uf518"},"book-reader":{code:"\uf5da"},bookmark:{code:"\uf02e"},
bootstrap:{code:"\uf836"},"border-all":{code:"\uf84c"},"border-none":{code:"\uf850"},"border-style":{code:"\uf853"},"bowling-ball":{code:"\uf436"},box:{code:"\uf466"},"box-open":{code:"\uf49e"},boxes:{code:"\uf468"},braille:{code:"\uf2a1"},brain:{code:"\uf5dc"},"bread-slice":{code:"\uf7ec"},briefcase:{code:"\uf0b1"},"briefcase-medical":{code:"\uf469"},"broadcast-tower":{code:"\uf519"},broom:{code:"\uf51a"},brush:{code:"\uf55d"},btc:{code:"\uf15a"},buffer:{code:"\uf837"},bug:{code:"\uf188"},building:{code:"\uf1ad"},
bullhorn:{code:"\uf0a1"},bullseye:{code:"\uf140"},burn:{code:"\uf46a"},buromobelexperte:{code:"\uf37f"},bus:{code:"\uf207"},"bus-alt":{code:"\uf55e"},"business-time":{code:"\uf64a"},"buy-n-large":{code:"\uf8a6"},buysellads:{code:"\uf20d"},calculator:{code:"\uf1ec"},calendar:{code:"\uf133"},"calendar-alt":{code:"\uf073"},"calendar-check":{code:"\uf274"},"calendar-day":{code:"\uf783"},"calendar-minus":{code:"\uf272"},"calendar-plus":{code:"\uf271"},"calendar-times":{code:"\uf273"},"calendar-week":{code:"\uf784"},
camera:{code:"\uf030"},"camera-retro":{code:"\uf083"},campground:{code:"\uf6bb"},"canadian-maple-leaf":{code:"\uf785"},"candy-cane":{code:"\uf786"},cannabis:{code:"\uf55f"},capsules:{code:"\uf46b"},car:{code:"\uf1b9"},"car-alt":{code:"\uf5de"},"car-battery":{code:"\uf5df"},"car-crash":{code:"\uf5e1"},"car-side":{code:"\uf5e4"},caravan:{code:"\uf8ff"},"caret-down":{code:"\uf0d7"},"caret-left":{code:"\uf0d9"},"caret-right":{code:"\uf0da"},"caret-square-down":{code:"\uf150"},"caret-square-left":{code:"\uf191"},
"caret-square-right":{code:"\uf152"},"caret-square-up":{code:"\uf151"},"caret-up":{code:"\uf0d8"},carrot:{code:"\uf787"},"cart-arrow-down":{code:"\uf218"},"cart-plus":{code:"\uf217"},"cash-register":{code:"\uf788"},cat:{code:"\uf6be"},"cc-amazon-pay":{code:"\uf42d"},"cc-amex":{code:"\uf1f3"},"cc-apple-pay":{code:"\uf416"},"cc-diners-club":{code:"\uf24c"},"cc-discover":{code:"\uf1f2"},"cc-jcb":{code:"\uf24b"},"cc-mastercard":{code:"\uf1f1"},"cc-paypal":{code:"\uf1f4"},"cc-stripe":{code:"\uf1f5"},"cc-visa":{code:"\uf1f0"},
centercode:{code:"\uf380"},centos:{code:"\uf789"},certificate:{code:"\uf0a3"},chair:{code:"\uf6c0"},chalkboard:{code:"\uf51b"},"chalkboard-teacher":{code:"\uf51c"},"charging-station":{code:"\uf5e7"},"chart-area":{code:"\uf1fe"},"chart-bar":{code:"\uf080"},"chart-line":{code:"\uf201"},"chart-pie":{code:"\uf200"},check:{code:"\uf00c"},"check-circle":{code:"\uf058"},"check-double":{code:"\uf560"},"check-square":{code:"\uf14a"},cheese:{code:"\uf7ef"},chess:{code:"\uf439"},"chess-bishop":{code:"\uf43a"},
"chess-board":{code:"\uf43c"},"chess-king":{code:"\uf43f"},"chess-knight":{code:"\uf441"},"chess-pawn":{code:"\uf443"},"chess-queen":{code:"\uf445"},"chess-rook":{code:"\uf447"},"chevron-circle-down":{code:"\uf13a"},"chevron-circle-left":{code:"\uf137"},"chevron-circle-right":{code:"\uf138"},"chevron-circle-up":{code:"\uf139"},"chevron-down":{code:"\uf078"},"chevron-left":{code:"\uf053"},"chevron-right":{code:"\uf054"},"chevron-up":{code:"\uf077"},child:{code:"\uf1ae"},chrome:{code:"\uf268"},chromecast:{code:"\uf838"},
church:{code:"\uf51d"},circle:{code:"\uf111"},"circle-notch":{code:"\uf1ce"},city:{code:"\uf64f"},"clinic-medical":{code:"\uf7f2"},clipboard:{code:"\uf328"},"clipboard-check":{code:"\uf46c"},"clipboard-list":{code:"\uf46d"},clock:{code:"\uf017"},clone:{code:"\uf24d"},"closed-captioning":{code:"\uf20a"},cloud:{code:"\uf0c2"},"cloud-download-alt":{code:"\uf381"},"cloud-meatball":{code:"\uf73b"},"cloud-moon":{code:"\uf6c3"},"cloud-moon-rain":{code:"\uf73c"},"cloud-rain":{code:"\uf73d"},"cloud-showers-heavy":{code:"\uf740"},
"cloud-sun":{code:"\uf6c4"},"cloud-sun-rain":{code:"\uf743"},"cloud-upload-alt":{code:"\uf382"},cloudscale:{code:"\uf383"},cloudsmith:{code:"\uf384"},cloudversify:{code:"\uf385"},cocktail:{code:"\uf561"},code:{code:"\uf121"},"code-branch":{code:"\uf126"},codepen:{code:"\uf1cb"},codiepie:{code:"\uf284"},coffee:{code:"\uf0f4"},cog:{code:"\uf013"},cogs:{code:"\uf085"},coins:{code:"\uf51e"},columns:{code:"\uf0db"},comment:{code:"\uf075"},"comment-alt":{code:"\uf27a"},"comment-dollar":{code:"\uf651"},
"comment-dots":{code:"\uf4ad"},"comment-medical":{code:"\uf7f5"},"comment-slash":{code:"\uf4b3"},comments:{code:"\uf086"},"comments-dollar":{code:"\uf653"},"compact-disc":{code:"\uf51f"},compass:{code:"\uf14e"},compress:{code:"\uf066"},"compress-alt":{code:"\uf422"},"compress-arrows-alt":{code:"\uf78c"},"concierge-bell":{code:"\uf562"},confluence:{code:"\uf78d"},connectdevelop:{code:"\uf20e"},contao:{code:"\uf26d"},cookie:{code:"\uf563"},"cookie-bite":{code:"\uf564"},copy:{code:"\uf0c5"},copyright:{code:"\uf1f9"},
"cotton-bureau":{code:"\uf89e"},couch:{code:"\uf4b8"},cpanel:{code:"\uf388"},"creative-commons":{code:"\uf25e"},"creative-commons-by":{code:"\uf4e7"},"creative-commons-nc":{code:"\uf4e8"},"creative-commons-nc-eu":{code:"\uf4e9"},"creative-commons-nc-jp":{code:"\uf4ea"},"creative-commons-nd":{code:"\uf4eb"},"creative-commons-pd":{code:"\uf4ec"},"creative-commons-pd-alt":{code:"\uf4ed"},"creative-commons-remix":{code:"\uf4ee"},"creative-commons-sa":{code:"\uf4ef"},"creative-commons-sampling":{code:"\uf4f0"},
"creative-commons-sampling-plus":{code:"\uf4f1"},"creative-commons-share":{code:"\uf4f2"},"creative-commons-zero":{code:"\uf4f3"},"credit-card":{code:"\uf09d"},"critical-role":{code:"\uf6c9"},crop:{code:"\uf125"},"crop-alt":{code:"\uf565"},cross:{code:"\uf654"},crosshairs:{code:"\uf05b"},crow:{code:"\uf520"},crown:{code:"\uf521"},crutch:{code:"\uf7f7"},css3:{code:"\uf13c"},"css3-alt":{code:"\uf38b"},cube:{code:"\uf1b2"},cubes:{code:"\uf1b3"},cut:{code:"\uf0c4"},cuttlefish:{code:"\uf38c"},"d-and-d":{code:"\uf38d"},
"d-and-d-beyond":{code:"\uf6ca"},dailymotion:{code:"\uf952"},dashcube:{code:"\uf210"},database:{code:"\uf1c0"},deaf:{code:"\uf2a4"},delicious:{code:"\uf1a5"},democrat:{code:"\uf747"},deploydog:{code:"\uf38e"},deskpro:{code:"\uf38f"},desktop:{code:"\uf108"},dev:{code:"\uf6cc"},deviantart:{code:"\uf1bd"},dharmachakra:{code:"\uf655"},dhl:{code:"\uf790"},diagnoses:{code:"\uf470"},diaspora:{code:"\uf791"},dice:{code:"\uf522"},"dice-d20":{code:"\uf6cf"},"dice-d6":{code:"\uf6d1"},"dice-five":{code:"\uf523"},
"dice-four":{code:"\uf524"},"dice-one":{code:"\uf525"},"dice-six":{code:"\uf526"},"dice-three":{code:"\uf527"},"dice-two":{code:"\uf528"},digg:{code:"\uf1a6"},"digital-ocean":{code:"\uf391"},"digital-tachograph":{code:"\uf566"},directions:{code:"\uf5eb"},discord:{code:"\uf392"},discourse:{code:"\uf393"},divide:{code:"\uf529"},dizzy:{code:"\uf567"},dna:{code:"\uf471"},dochub:{code:"\uf394"},docker:{code:"\uf395"},dog:{code:"\uf6d3"},"dollar-sign":{code:"\uf155"},dolly:{code:"\uf472"},"dolly-flatbed":{code:"\uf474"},
donate:{code:"\uf4b9"},"door-closed":{code:"\uf52a"},"door-open":{code:"\uf52b"},"dot-circle":{code:"\uf192"},dove:{code:"\uf4ba"},download:{code:"\uf019"},draft2digital:{code:"\uf396"},"drafting-compass":{code:"\uf568"},dragon:{code:"\uf6d5"},"draw-polygon":{code:"\uf5ee"},dribbble:{code:"\uf17d"},"dribbble-square":{code:"\uf397"},dropbox:{code:"\uf16b"},drum:{code:"\uf569"},"drum-steelpan":{code:"\uf56a"},"drumstick-bite":{code:"\uf6d7"},drupal:{code:"\uf1a9"},dumbbell:{code:"\uf44b"},dumpster:{code:"\uf793"},
"dumpster-fire":{code:"\uf794"},dungeon:{code:"\uf6d9"},dyalog:{code:"\uf399"},earlybirds:{code:"\uf39a"},ebay:{code:"\uf4f4"},edge:{code:"\uf282"},edit:{code:"\uf044"},egg:{code:"\uf7fb"},eject:{code:"\uf052"},elementor:{code:"\uf430"},"ellipsis-h":{code:"\uf141"},"ellipsis-v":{code:"\uf142"},ello:{code:"\uf5f1"},ember:{code:"\uf423"},empire:{code:"\uf1d1"},envelope:{code:"\uf0e0"},"envelope-open":{code:"\uf2b6"},"envelope-open-text":{code:"\uf658"},"envelope-square":{code:"\uf199"},envira:{code:"\uf299"},
equals:{code:"\uf52c"},eraser:{code:"\uf12d"},erlang:{code:"\uf39d"},ethereum:{code:"\uf42e"},ethernet:{code:"\uf796"},etsy:{code:"\uf2d7"},"euro-sign":{code:"\uf153"},evernote:{code:"\uf839"},"exchange-alt":{code:"\uf362"},exclamation:{code:"\uf12a"},"exclamation-circle":{code:"\uf06a"},"exclamation-triangle":{code:"\uf071"},expand:{code:"\uf065"},"expand-alt":{code:"\uf424"},"expand-arrows-alt":{code:"\uf31e"},expeditedssl:{code:"\uf23e"},"external-link-alt":{code:"\uf35d"},"external-link-square-alt":{code:"\uf360"},
eye:{code:"\uf06e"},"eye-dropper":{code:"\uf1fb"},"eye-slash":{code:"\uf070"},facebook:{code:"\uf09a"},"facebook-f":{code:"\uf39e"},"facebook-messenger":{code:"\uf39f"},"facebook-square":{code:"\uf082"},fan:{code:"\uf863"},"fantasy-flight-games":{code:"\uf6dc"},"fast-backward":{code:"\uf049"},"fast-forward":{code:"\uf050"},fax:{code:"\uf1ac"},feather:{code:"\uf52d"},"feather-alt":{code:"\uf56b"},fedex:{code:"\uf797"},fedora:{code:"\uf798"},female:{code:"\uf182"},"fighter-jet":{code:"\uf0fb"},figma:{code:"\uf799"},
file:{code:"\uf15b"},"file-alt":{code:"\uf15c"},"file-archive":{code:"\uf1c6"},"file-audio":{code:"\uf1c7"},"file-code":{code:"\uf1c9"},"file-contract":{code:"\uf56c"},"file-csv":{code:"\uf6dd"},"file-download":{code:"\uf56d"},"file-excel":{code:"\uf1c3"},"file-export":{code:"\uf56e"},"file-image":{code:"\uf1c5"},"file-import":{code:"\uf56f"},"file-invoice":{code:"\uf570"},"file-invoice-dollar":{code:"\uf571"},"file-medical":{code:"\uf477"},"file-medical-alt":{code:"\uf478"},"file-pdf":{code:"\uf1c1"},
"file-powerpoint":{code:"\uf1c4"},"file-prescription":{code:"\uf572"},"file-signature":{code:"\uf573"},"file-upload":{code:"\uf574"},"file-video":{code:"\uf1c8"},"file-word":{code:"\uf1c2"},fill:{code:"\uf575"},"fill-drip":{code:"\uf576"},film:{code:"\uf008"},filter:{code:"\uf0b0"},fingerprint:{code:"\uf577"},fire:{code:"\uf06d"},"fire-alt":{code:"\uf7e4"},"fire-extinguisher":{code:"\uf134"},firefox:{code:"\uf269"},"firefox-browser":{code:"\uf907"},"first-aid":{code:"\uf479"},"first-order":{code:"\uf2b0"},
"first-order-alt":{code:"\uf50a"},firstdraft:{code:"\uf3a1"},fish:{code:"\uf578"},"fist-raised":{code:"\uf6de"},flag:{code:"\uf024"},"flag-checkered":{code:"\uf11e"},"flag-usa":{code:"\uf74d"},flask:{code:"\uf0c3"},flickr:{code:"\uf16e"},flipboard:{code:"\uf44d"},flushed:{code:"\uf579"},fly:{code:"\uf417"},folder:{code:"\uf07b"},"folder-minus":{code:"\uf65d"},"folder-open":{code:"\uf07c"},"folder-plus":{code:"\uf65e"},font:{code:"\uf031"},"font-awesome":{code:"\uf2b4"},"font-awesome-alt":{code:"\uf35c"},
"font-awesome-flag":{code:"\uf425"},"font-awesome-logo-full":{code:"\uf4e6"},fonticons:{code:"\uf280"},"fonticons-fi":{code:"\uf3a2"},"football-ball":{code:"\uf44e"},"fort-awesome":{code:"\uf286"},"fort-awesome-alt":{code:"\uf3a3"},forumbee:{code:"\uf211"},forward:{code:"\uf04e"},foursquare:{code:"\uf180"},"free-code-camp":{code:"\uf2c5"},freebsd:{code:"\uf3a4"},frog:{code:"\uf52e"},frown:{code:"\uf119"},"frown-open":{code:"\uf57a"},fulcrum:{code:"\uf50b"},"funnel-dollar":{code:"\uf662"},futbol:{code:"\uf1e3"},
"galactic-republic":{code:"\uf50c"},"galactic-senate":{code:"\uf50d"},gamepad:{code:"\uf11b"},"gas-pump":{code:"\uf52f"},gavel:{code:"\uf0e3"},gem:{code:"\uf3a5"},genderless:{code:"\uf22d"},"get-pocket":{code:"\uf265"},gg:{code:"\uf260"},"gg-circle":{code:"\uf261"},ghost:{code:"\uf6e2"},gift:{code:"\uf06b"},gifts:{code:"\uf79c"},git:{code:"\uf1d3"},"git-alt":{code:"\uf841"},"git-square":{code:"\uf1d2"},github:{code:"\uf09b"},"github-alt":{code:"\uf113"},"github-square":{code:"\uf092"},gitkraken:{code:"\uf3a6"},
gitlab:{code:"\uf296"},gitter:{code:"\uf426"},"glass-cheers":{code:"\uf79f"},"glass-martini":{code:"\uf000"},"glass-martini-alt":{code:"\uf57b"},"glass-whiskey":{code:"\uf7a0"},glasses:{code:"\uf530"},glide:{code:"\uf2a5"},"glide-g":{code:"\uf2a6"},globe:{code:"\uf0ac"},"globe-africa":{code:"\uf57c"},"globe-americas":{code:"\uf57d"},"globe-asia":{code:"\uf57e"},"globe-europe":{code:"\uf7a2"},gofore:{code:"\uf3a7"},"golf-ball":{code:"\uf450"},goodreads:{code:"\uf3a8"},"goodreads-g":{code:"\uf3a9"},
google:{code:"\uf1a0"},"google-drive":{code:"\uf3aa"},"google-play":{code:"\uf3ab"},"google-plus":{code:"\uf2b3"},"google-plus-g":{code:"\uf0d5"},"google-plus-square":{code:"\uf0d4"},"google-wallet":{code:"\uf1ee"},gopuram:{code:"\uf664"},"graduation-cap":{code:"\uf19d"},gratipay:{code:"\uf184"},grav:{code:"\uf2d6"},"greater-than":{code:"\uf531"},"greater-than-equal":{code:"\uf532"},grimace:{code:"\uf57f"},grin:{code:"\uf580"},"grin-alt":{code:"\uf581"},"grin-beam":{code:"\uf582"},"grin-beam-sweat":{code:"\uf583"},
"grin-hearts":{code:"\uf584"},"grin-squint":{code:"\uf585"},"grin-squint-tears":{code:"\uf586"},"grin-stars":{code:"\uf587"},"grin-tears":{code:"\uf588"},"grin-tongue":{code:"\uf589"},"grin-tongue-squint":{code:"\uf58a"},"grin-tongue-wink":{code:"\uf58b"},"grin-wink":{code:"\uf58c"},"grip-horizontal":{code:"\uf58d"},"grip-lines":{code:"\uf7a4"},"grip-lines-vertical":{code:"\uf7a5"},"grip-vertical":{code:"\uf58e"},gripfire:{code:"\uf3ac"},grunt:{code:"\uf3ad"},guitar:{code:"\uf7a6"},gulp:{code:"\uf3ae"},
"h-square":{code:"\uf0fd"},"hacker-news":{code:"\uf1d4"},"hacker-news-square":{code:"\uf3af"},hackerrank:{code:"\uf5f7"},hamburger:{code:"\uf805"},hammer:{code:"\uf6e3"},hamsa:{code:"\uf665"},"hand-holding":{code:"\uf4bd"},"hand-holding-heart":{code:"\uf4be"},"hand-holding-usd":{code:"\uf4c0"},"hand-lizard":{code:"\uf258"},"hand-middle-finger":{code:"\uf806"},"hand-paper":{code:"\uf256"},"hand-peace":{code:"\uf25b"},"hand-point-down":{code:"\uf0a7"},"hand-point-left":{code:"\uf0a5"},"hand-point-right":{code:"\uf0a4"},
"hand-point-up":{code:"\uf0a6"},"hand-pointer":{code:"\uf25a"},"hand-rock":{code:"\uf255"},"hand-scissors":{code:"\uf257"},"hand-spock":{code:"\uf259"},hands:{code:"\uf4c2"},"hands-helping":{code:"\uf4c4"},handshake:{code:"\uf2b5"},hanukiah:{code:"\uf6e6"},"hard-hat":{code:"\uf807"},hashtag:{code:"\uf292"},"hat-cowboy":{code:"\uf8c0"},"hat-cowboy-side":{code:"\uf8c1"},"hat-wizard":{code:"\uf6e8"},hdd:{code:"\uf0a0"},heading:{code:"\uf1dc"},headphones:{code:"\uf025"},"headphones-alt":{code:"\uf58f"},
headset:{code:"\uf590"},heart:{code:"\uf004"},"heart-broken":{code:"\uf7a9"},heartbeat:{code:"\uf21e"},helicopter:{code:"\uf533"},highlighter:{code:"\uf591"},hiking:{code:"\uf6ec"},hippo:{code:"\uf6ed"},hips:{code:"\uf452"},"hire-a-helper":{code:"\uf3b0"},history:{code:"\uf1da"},"hockey-puck":{code:"\uf453"},"holly-berry":{code:"\uf7aa"},home:{code:"\uf015"},hooli:{code:"\uf427"},hornbill:{code:"\uf592"},horse:{code:"\uf6f0"},"horse-head":{code:"\uf7ab"},hospital:{code:"\uf0f8"},"hospital-alt":{code:"\uf47d"},
"hospital-symbol":{code:"\uf47e"},"hot-tub":{code:"\uf593"},hotdog:{code:"\uf80f"},hotel:{code:"\uf594"},hotjar:{code:"\uf3b1"},hourglass:{code:"\uf254"},"hourglass-end":{code:"\uf253"},"hourglass-half":{code:"\uf252"},"hourglass-start":{code:"\uf251"},"house-damage":{code:"\uf6f1"},houzz:{code:"\uf27c"},hryvnia:{code:"\uf6f2"},html5:{code:"\uf13b"},hubspot:{code:"\uf3b2"},"i-cursor":{code:"\uf246"},"ice-cream":{code:"\uf810"},icicles:{code:"\uf7ad"},icons:{code:"\uf86d"},"id-badge":{code:"\uf2c1"},
"id-card":{code:"\uf2c2"},"id-card-alt":{code:"\uf47f"},ideal:{code:"\uf913"},igloo:{code:"\uf7ae"},image:{code:"\uf03e"},images:{code:"\uf302"},imdb:{code:"\uf2d8"},inbox:{code:"\uf01c"},indent:{code:"\uf03c"},industry:{code:"\uf275"},infinity:{code:"\uf534"},info:{code:"\uf129"},"info-circle":{code:"\uf05a"},instagram:{code:"\uf16d"},"instagram-square":{code:"\uf955"},intercom:{code:"\uf7af"},"internet-explorer":{code:"\uf26b"},invision:{code:"\uf7b0"},ioxhost:{code:"\uf208"},italic:{code:"\uf033"},
"itch-io":{code:"\uf83a"},itunes:{code:"\uf3b4"},"itunes-note":{code:"\uf3b5"},java:{code:"\uf4e4"},jedi:{code:"\uf669"},"jedi-order":{code:"\uf50e"},jenkins:{code:"\uf3b6"},jira:{code:"\uf7b1"},joget:{code:"\uf3b7"},joint:{code:"\uf595"},joomla:{code:"\uf1aa"},"journal-whills":{code:"\uf66a"},js:{code:"\uf3b8"},"js-square":{code:"\uf3b9"},jsfiddle:{code:"\uf1cc"},kaaba:{code:"\uf66b"},kaggle:{code:"\uf5fa"},key:{code:"\uf084"},keybase:{code:"\uf4f5"},keyboard:{code:"\uf11c"},keycdn:{code:"\uf3ba"},
khanda:{code:"\uf66d"},kickstarter:{code:"\uf3bb"},"kickstarter-k":{code:"\uf3bc"},kiss:{code:"\uf596"},"kiss-beam":{code:"\uf597"},"kiss-wink-heart":{code:"\uf598"},"kiwi-bird":{code:"\uf535"},korvue:{code:"\uf42f"},landmark:{code:"\uf66f"},language:{code:"\uf1ab"},laptop:{code:"\uf109"},"laptop-code":{code:"\uf5fc"},"laptop-medical":{code:"\uf812"},laravel:{code:"\uf3bd"},lastfm:{code:"\uf202"},"lastfm-square":{code:"\uf203"},laugh:{code:"\uf599"},"laugh-beam":{code:"\uf59a"},"laugh-squint":{code:"\uf59b"},
"laugh-wink":{code:"\uf59c"},"layer-group":{code:"\uf5fd"},leaf:{code:"\uf06c"},leanpub:{code:"\uf212"},lemon:{code:"\uf094"},less:{code:"\uf41d"},"less-than":{code:"\uf536"},"less-than-equal":{code:"\uf537"},"level-down-alt":{code:"\uf3be"},"level-up-alt":{code:"\uf3bf"},"life-ring":{code:"\uf1cd"},lightbulb:{code:"\uf0eb"},line:{code:"\uf3c0"},link:{code:"\uf0c1"},linkedin:{code:"\uf08c"},"linkedin-in":{code:"\uf0e1"},linode:{code:"\uf2b8"},linux:{code:"\uf17c"},"lira-sign":{code:"\uf195"},list:{code:"\uf03a"},
"list-alt":{code:"\uf022"},"list-ol":{code:"\uf0cb"},"list-ul":{code:"\uf0ca"},"location-arrow":{code:"\uf124"},lock:{code:"\uf023"},"lock-open":{code:"\uf3c1"},"long-arrow-alt-down":{code:"\uf309"},"long-arrow-alt-left":{code:"\uf30a"},"long-arrow-alt-right":{code:"\uf30b"},"long-arrow-alt-up":{code:"\uf30c"},"low-vision":{code:"\uf2a8"},"luggage-cart":{code:"\uf59d"},lyft:{code:"\uf3c3"},magento:{code:"\uf3c4"},magic:{code:"\uf0d0"},magnet:{code:"\uf076"},"mail-bulk":{code:"\uf674"},mailchimp:{code:"\uf59e"},
male:{code:"\uf183"},mandalorian:{code:"\uf50f"},map:{code:"\uf279"},"map-marked":{code:"\uf59f"},"map-marked-alt":{code:"\uf5a0"},"map-marker":{code:"\uf041"},"map-marker-alt":{code:"\uf3c5"},"map-pin":{code:"\uf276"},"map-signs":{code:"\uf277"},markdown:{code:"\uf60f"},marker:{code:"\uf5a1"},mars:{code:"\uf222"},"mars-double":{code:"\uf227"},"mars-stroke":{code:"\uf229"},"mars-stroke-h":{code:"\uf22b"},"mars-stroke-v":{code:"\uf22a"},mask:{code:"\uf6fa"},mastodon:{code:"\uf4f6"},maxcdn:{code:"\uf136"},
mdb:{code:"\uf8ca"},medal:{code:"\uf5a2"},medapps:{code:"\uf3c6"},medium:{code:"\uf23a"},"medium-m":{code:"\uf3c7"},medkit:{code:"\uf0fa"},medrt:{code:"\uf3c8"},meetup:{code:"\uf2e0"},megaport:{code:"\uf5a3"},meh:{code:"\uf11a"},"meh-blank":{code:"\uf5a4"},"meh-rolling-eyes":{code:"\uf5a5"},memory:{code:"\uf538"},mendeley:{code:"\uf7b3"},menorah:{code:"\uf676"},mercury:{code:"\uf223"},meteor:{code:"\uf753"},microblog:{code:"\uf91a"},microchip:{code:"\uf2db"},microphone:{code:"\uf130"},"microphone-alt":{code:"\uf3c9"},
"microphone-alt-slash":{code:"\uf539"},"microphone-slash":{code:"\uf131"},microscope:{code:"\uf610"},microsoft:{code:"\uf3ca"},minus:{code:"\uf068"},"minus-circle":{code:"\uf056"},"minus-square":{code:"\uf146"},mitten:{code:"\uf7b5"},mix:{code:"\uf3cb"},mixcloud:{code:"\uf289"},mixer:{code:"\uf956"},mizuni:{code:"\uf3cc"},mobile:{code:"\uf10b"},"mobile-alt":{code:"\uf3cd"},modx:{code:"\uf285"},monero:{code:"\uf3d0"},"money-bill":{code:"\uf0d6"},"money-bill-alt":{code:"\uf3d1"},"money-bill-wave":{code:"\uf53a"},
"money-bill-wave-alt":{code:"\uf53b"},"money-check":{code:"\uf53c"},"money-check-alt":{code:"\uf53d"},monument:{code:"\uf5a6"},moon:{code:"\uf186"},"mortar-pestle":{code:"\uf5a7"},mosque:{code:"\uf678"},motorcycle:{code:"\uf21c"},mountain:{code:"\uf6fc"},mouse:{code:"\uf8cc"},"mouse-pointer":{code:"\uf245"},"mug-hot":{code:"\uf7b6"},music:{code:"\uf001"},napster:{code:"\uf3d2"},neos:{code:"\uf612"},"network-wired":{code:"\uf6ff"},neuter:{code:"\uf22c"},newspaper:{code:"\uf1ea"},nimblr:{code:"\uf5a8"},
node:{code:"\uf419"},"node-js":{code:"\uf3d3"},"not-equal":{code:"\uf53e"},"notes-medical":{code:"\uf481"},npm:{code:"\uf3d4"},ns8:{code:"\uf3d5"},nutritionix:{code:"\uf3d6"},"object-group":{code:"\uf247"},"object-ungroup":{code:"\uf248"},odnoklassniki:{code:"\uf263"},"odnoklassniki-square":{code:"\uf264"},"oil-can":{code:"\uf613"},"old-republic":{code:"\uf510"},om:{code:"\uf679"},opencart:{code:"\uf23d"},openid:{code:"\uf19b"},opera:{code:"\uf26a"},"optin-monster":{code:"\uf23c"},orcid:{code:"\uf8d2"},
osi:{code:"\uf41a"},otter:{code:"\uf700"},outdent:{code:"\uf03b"},page4:{code:"\uf3d7"},pagelines:{code:"\uf18c"},pager:{code:"\uf815"},"paint-brush":{code:"\uf1fc"},"paint-roller":{code:"\uf5aa"},palette:{code:"\uf53f"},palfed:{code:"\uf3d8"},pallet:{code:"\uf482"},"paper-plane":{code:"\uf1d8"},paperclip:{code:"\uf0c6"},"parachute-box":{code:"\uf4cd"},paragraph:{code:"\uf1dd"},parking:{code:"\uf540"},passport:{code:"\uf5ab"},pastafarianism:{code:"\uf67b"},paste:{code:"\uf0ea"},patreon:{code:"\uf3d9"},
pause:{code:"\uf04c"},"pause-circle":{code:"\uf28b"},paw:{code:"\uf1b0"},paypal:{code:"\uf1ed"},peace:{code:"\uf67c"},pen:{code:"\uf304"},"pen-alt":{code:"\uf305"},"pen-fancy":{code:"\uf5ac"},"pen-nib":{code:"\uf5ad"},"pen-square":{code:"\uf14b"},"pencil-alt":{code:"\uf303"},"pencil-ruler":{code:"\uf5ae"},"penny-arcade":{code:"\uf704"},"people-carry":{code:"\uf4ce"},"pepper-hot":{code:"\uf816"},percent:{code:"\uf295"},percentage:{code:"\uf541"},periscope:{code:"\uf3da"},"person-booth":{code:"\uf756"},
phabricator:{code:"\uf3db"},"phoenix-framework":{code:"\uf3dc"},"phoenix-squadron":{code:"\uf511"},phone:{code:"\uf095"},"phone-alt":{code:"\uf879"},"phone-slash":{code:"\uf3dd"},"phone-square":{code:"\uf098"},"phone-square-alt":{code:"\uf87b"},"phone-volume":{code:"\uf2a0"},"photo-video":{code:"\uf87c"},php:{code:"\uf457"},"pied-piper":{code:"\uf2ae"},"pied-piper-alt":{code:"\uf1a8"},"pied-piper-hat":{code:"\uf4e5"},"pied-piper-pp":{code:"\uf1a7"},"pied-piper-square":{code:"\uf91e"},"piggy-bank":{code:"\uf4d3"},
pills:{code:"\uf484"},pinterest:{code:"\uf0d2"},"pinterest-p":{code:"\uf231"},"pinterest-square":{code:"\uf0d3"},"pizza-slice":{code:"\uf818"},"place-of-worship":{code:"\uf67f"},plane:{code:"\uf072"},"plane-arrival":{code:"\uf5af"},"plane-departure":{code:"\uf5b0"},play:{code:"\uf04b"},"play-circle":{code:"\uf144"},playstation:{code:"\uf3df"},plug:{code:"\uf1e6"},plus:{code:"\uf067"},"plus-circle":{code:"\uf055"},"plus-square":{code:"\uf0fe"},podcast:{code:"\uf2ce"},poll:{code:"\uf681"},"poll-h":{code:"\uf682"},
poo:{code:"\uf2fe"},"poo-storm":{code:"\uf75a"},poop:{code:"\uf619"},portrait:{code:"\uf3e0"},"pound-sign":{code:"\uf154"},"power-off":{code:"\uf011"},pray:{code:"\uf683"},"praying-hands":{code:"\uf684"},prescription:{code:"\uf5b1"},"prescription-bottle":{code:"\uf485"},"prescription-bottle-alt":{code:"\uf486"},print:{code:"\uf02f"},procedures:{code:"\uf487"},"product-hunt":{code:"\uf288"},"project-diagram":{code:"\uf542"},pushed:{code:"\uf3e1"},"puzzle-piece":{code:"\uf12e"},python:{code:"\uf3e2"},
qq:{code:"\uf1d6"},qrcode:{code:"\uf029"},question:{code:"\uf128"},"question-circle":{code:"\uf059"},quidditch:{code:"\uf458"},quinscape:{code:"\uf459"},quora:{code:"\uf2c4"},"quote-left":{code:"\uf10d"},"quote-right":{code:"\uf10e"},quran:{code:"\uf687"},"r-project":{code:"\uf4f7"},radiation:{code:"\uf7b9"},"radiation-alt":{code:"\uf7ba"},rainbow:{code:"\uf75b"},random:{code:"\uf074"},"raspberry-pi":{code:"\uf7bb"},ravelry:{code:"\uf2d9"},react:{code:"\uf41b"},reacteurope:{code:"\uf75d"},readme:{code:"\uf4d5"},
rebel:{code:"\uf1d0"},receipt:{code:"\uf543"},"record-vinyl":{code:"\uf8d9"},recycle:{code:"\uf1b8"},"red-river":{code:"\uf3e3"},reddit:{code:"\uf1a1"},"reddit-alien":{code:"\uf281"},"reddit-square":{code:"\uf1a2"},redhat:{code:"\uf7bc"},redo:{code:"\uf01e"},"redo-alt":{code:"\uf2f9"},registered:{code:"\uf25d"},"remove-format":{code:"\uf87d"},renren:{code:"\uf18b"},reply:{code:"\uf3e5"},"reply-all":{code:"\uf122"},replyd:{code:"\uf3e6"},republican:{code:"\uf75e"},researchgate:{code:"\uf4f8"},resolving:{code:"\uf3e7"},
restroom:{code:"\uf7bd"},retweet:{code:"\uf079"},rev:{code:"\uf5b2"},ribbon:{code:"\uf4d6"},ring:{code:"\uf70b"},road:{code:"\uf018"},robot:{code:"\uf544"},rocket:{code:"\uf135"},rocketchat:{code:"\uf3e8"},rockrms:{code:"\uf3e9"},route:{code:"\uf4d7"},rss:{code:"\uf09e"},"rss-square":{code:"\uf143"},"ruble-sign":{code:"\uf158"},ruler:{code:"\uf545"},"ruler-combined":{code:"\uf546"},"ruler-horizontal":{code:"\uf547"},"ruler-vertical":{code:"\uf548"},running:{code:"\uf70c"},"rupee-sign":{code:"\uf156"},
"sad-cry":{code:"\uf5b3"},"sad-tear":{code:"\uf5b4"},safari:{code:"\uf267"},salesforce:{code:"\uf83b"},sass:{code:"\uf41e"},satellite:{code:"\uf7bf"},"satellite-dish":{code:"\uf7c0"},save:{code:"\uf0c7"},schlix:{code:"\uf3ea"},school:{code:"\uf549"},screwdriver:{code:"\uf54a"},scribd:{code:"\uf28a"},scroll:{code:"\uf70e"},"sd-card":{code:"\uf7c2"},search:{code:"\uf002"},"search-dollar":{code:"\uf688"},"search-location":{code:"\uf689"},"search-minus":{code:"\uf010"},"search-plus":{code:"\uf00e"},searchengin:{code:"\uf3eb"},
seedling:{code:"\uf4d8"},sellcast:{code:"\uf2da"},sellsy:{code:"\uf213"},server:{code:"\uf233"},servicestack:{code:"\uf3ec"},shapes:{code:"\uf61f"},share:{code:"\uf064"},"share-alt":{code:"\uf1e0"},"share-alt-square":{code:"\uf1e1"},"share-square":{code:"\uf14d"},"shekel-sign":{code:"\uf20b"},"shield-alt":{code:"\uf3ed"},ship:{code:"\uf21a"},"shipping-fast":{code:"\uf48b"},shirtsinbulk:{code:"\uf214"},"shoe-prints":{code:"\uf54b"},shopify:{code:"\uf957"},"shopping-bag":{code:"\uf290"},"shopping-basket":{code:"\uf291"},
"shopping-cart":{code:"\uf07a"},shopware:{code:"\uf5b5"},shower:{code:"\uf2cc"},"shuttle-van":{code:"\uf5b6"},sign:{code:"\uf4d9"},"sign-in-alt":{code:"\uf2f6"},"sign-language":{code:"\uf2a7"},"sign-out-alt":{code:"\uf2f5"},signal:{code:"\uf012"},signature:{code:"\uf5b7"},"sim-card":{code:"\uf7c4"},simplybuilt:{code:"\uf215"},sistrix:{code:"\uf3ee"},sitemap:{code:"\uf0e8"},sith:{code:"\uf512"},skating:{code:"\uf7c5"},sketch:{code:"\uf7c6"},skiing:{code:"\uf7c9"},"skiing-nordic":{code:"\uf7ca"},skull:{code:"\uf54c"},
"skull-crossbones":{code:"\uf714"},skyatlas:{code:"\uf216"},skype:{code:"\uf17e"},slack:{code:"\uf198"},"slack-hash":{code:"\uf3ef"},slash:{code:"\uf715"},sleigh:{code:"\uf7cc"},"sliders-h":{code:"\uf1de"},slideshare:{code:"\uf1e7"},smile:{code:"\uf118"},"smile-beam":{code:"\uf5b8"},"smile-wink":{code:"\uf4da"},smog:{code:"\uf75f"},smoking:{code:"\uf48d"},"smoking-ban":{code:"\uf54d"},sms:{code:"\uf7cd"},snapchat:{code:"\uf2ab"},"snapchat-ghost":{code:"\uf2ac"},"snapchat-square":{code:"\uf2ad"},snowboarding:{code:"\uf7ce"},
snowflake:{code:"\uf2dc"},snowman:{code:"\uf7d0"},snowplow:{code:"\uf7d2"},socks:{code:"\uf696"},"solar-panel":{code:"\uf5ba"},sort:{code:"\uf0dc"},"sort-alpha-down":{code:"\uf15d"},"sort-alpha-down-alt":{code:"\uf881"},"sort-alpha-up":{code:"\uf15e"},"sort-alpha-up-alt":{code:"\uf882"},"sort-amount-down":{code:"\uf160"},"sort-amount-down-alt":{code:"\uf884"},"sort-amount-up":{code:"\uf161"},"sort-amount-up-alt":{code:"\uf885"},"sort-down":{code:"\uf0dd"},"sort-numeric-down":{code:"\uf162"},"sort-numeric-down-alt":{code:"\uf886"},
"sort-numeric-up":{code:"\uf163"},"sort-numeric-up-alt":{code:"\uf887"},"sort-up":{code:"\uf0de"},soundcloud:{code:"\uf1be"},sourcetree:{code:"\uf7d3"},spa:{code:"\uf5bb"},"space-shuttle":{code:"\uf197"},speakap:{code:"\uf3f3"},"speaker-deck":{code:"\uf83c"},"spell-check":{code:"\uf891"},spider:{code:"\uf717"},spinner:{code:"\uf110"},splotch:{code:"\uf5bc"},spotify:{code:"\uf1bc"},"spray-can":{code:"\uf5bd"},square:{code:"\uf0c8"},"square-full":{code:"\uf45c"},"square-root-alt":{code:"\uf698"},squarespace:{code:"\uf5be"},
"stack-exchange":{code:"\uf18d"},"stack-overflow":{code:"\uf16c"},stackpath:{code:"\uf842"},stamp:{code:"\uf5bf"},star:{code:"\uf005"},"star-and-crescent":{code:"\uf699"},"star-half":{code:"\uf089"},"star-half-alt":{code:"\uf5c0"},"star-of-david":{code:"\uf69a"},"star-of-life":{code:"\uf621"},staylinked:{code:"\uf3f5"},steam:{code:"\uf1b6"},"steam-square":{code:"\uf1b7"},"steam-symbol":{code:"\uf3f6"},"step-backward":{code:"\uf048"},"step-forward":{code:"\uf051"},stethoscope:{code:"\uf0f1"},"sticker-mule":{code:"\uf3f7"},
"sticky-note":{code:"\uf249"},stop:{code:"\uf04d"},"stop-circle":{code:"\uf28d"},stopwatch:{code:"\uf2f2"},store:{code:"\uf54e"},"store-alt":{code:"\uf54f"},strava:{code:"\uf428"},stream:{code:"\uf550"},"street-view":{code:"\uf21d"},strikethrough:{code:"\uf0cc"},stripe:{code:"\uf429"},"stripe-s":{code:"\uf42a"},stroopwafel:{code:"\uf551"},studiovinari:{code:"\uf3f8"},stumbleupon:{code:"\uf1a4"},"stumbleupon-circle":{code:"\uf1a3"},subscript:{code:"\uf12c"},subway:{code:"\uf239"},suitcase:{code:"\uf0f2"},
"suitcase-rolling":{code:"\uf5c1"},sun:{code:"\uf185"},superpowers:{code:"\uf2dd"},superscript:{code:"\uf12b"},supple:{code:"\uf3f9"},surprise:{code:"\uf5c2"},suse:{code:"\uf7d6"},swatchbook:{code:"\uf5c3"},swift:{code:"\uf8e1"},swimmer:{code:"\uf5c4"},"swimming-pool":{code:"\uf5c5"},symfony:{code:"\uf83d"},synagogue:{code:"\uf69b"},sync:{code:"\uf021"},"sync-alt":{code:"\uf2f1"},syringe:{code:"\uf48e"},table:{code:"\uf0ce"},"table-tennis":{code:"\uf45d"},tablet:{code:"\uf10a"},"tablet-alt":{code:"\uf3fa"},
tablets:{code:"\uf490"},"tachometer-alt":{code:"\uf3fd"},tag:{code:"\uf02b"},tags:{code:"\uf02c"},tape:{code:"\uf4db"},tasks:{code:"\uf0ae"},taxi:{code:"\uf1ba"},teamspeak:{code:"\uf4f9"},teeth:{code:"\uf62e"},"teeth-open":{code:"\uf62f"},telegram:{code:"\uf2c6"},"telegram-plane":{code:"\uf3fe"},"temperature-high":{code:"\uf769"},"temperature-low":{code:"\uf76b"},"tencent-weibo":{code:"\uf1d5"},tenge:{code:"\uf7d7"},terminal:{code:"\uf120"},"text-height":{code:"\uf034"},"text-width":{code:"\uf035"},
th:{code:"\uf00a"},"th-large":{code:"\uf009"},"th-list":{code:"\uf00b"},"the-red-yeti":{code:"\uf69d"},"theater-masks":{code:"\uf630"},themeco:{code:"\uf5c6"},themeisle:{code:"\uf2b2"},thermometer:{code:"\uf491"},"thermometer-empty":{code:"\uf2cb"},"thermometer-full":{code:"\uf2c7"},"thermometer-half":{code:"\uf2c9"},"thermometer-quarter":{code:"\uf2ca"},"thermometer-three-quarters":{code:"\uf2c8"},"think-peaks":{code:"\uf731"},"thumbs-down":{code:"\uf165"},"thumbs-up":{code:"\uf164"},thumbtack:{code:"\uf08d"},
"ticket-alt":{code:"\uf3ff"},times:{code:"\uf00d"},"times-circle":{code:"\uf057"},tint:{code:"\uf043"},"tint-slash":{code:"\uf5c7"},tired:{code:"\uf5c8"},"toggle-off":{code:"\uf204"},"toggle-on":{code:"\uf205"},toilet:{code:"\uf7d8"},"toilet-paper":{code:"\uf71e"},toolbox:{code:"\uf552"},tools:{code:"\uf7d9"},tooth:{code:"\uf5c9"},torah:{code:"\uf6a0"},"torii-gate":{code:"\uf6a1"},tractor:{code:"\uf722"},"trade-federation":{code:"\uf513"},trademark:{code:"\uf25c"},"traffic-light":{code:"\uf637"},
trailer:{code:"\uf941"},train:{code:"\uf238"},tram:{code:"\uf7da"},transgender:{code:"\uf224"},"transgender-alt":{code:"\uf225"},trash:{code:"\uf1f8"},"trash-alt":{code:"\uf2ed"},"trash-restore":{code:"\uf829"},"trash-restore-alt":{code:"\uf82a"},tree:{code:"\uf1bb"},trello:{code:"\uf181"},tripadvisor:{code:"\uf262"},trophy:{code:"\uf091"},truck:{code:"\uf0d1"},"truck-loading":{code:"\uf4de"},"truck-monster":{code:"\uf63b"},"truck-moving":{code:"\uf4df"},"truck-pickup":{code:"\uf63c"},tshirt:{code:"\uf553"},
tty:{code:"\uf1e4"},tumblr:{code:"\uf173"},"tumblr-square":{code:"\uf174"},tv:{code:"\uf26c"},twitch:{code:"\uf1e8"},twitter:{code:"\uf099"},"twitter-square":{code:"\uf081"},typo3:{code:"\uf42b"},uber:{code:"\uf402"},ubuntu:{code:"\uf7df"},uikit:{code:"\uf403"},umbraco:{code:"\uf8e8"},umbrella:{code:"\uf0e9"},"umbrella-beach":{code:"\uf5ca"},underline:{code:"\uf0cd"},undo:{code:"\uf0e2"},"undo-alt":{code:"\uf2ea"},uniregistry:{code:"\uf404"},unity:{code:"\uf949"},"universal-access":{code:"\uf29a"},
university:{code:"\uf19c"},unlink:{code:"\uf127"},unlock:{code:"\uf09c"},"unlock-alt":{code:"\uf13e"},untappd:{code:"\uf405"},upload:{code:"\uf093"},ups:{code:"\uf7e0"},usb:{code:"\uf287"},user:{code:"\uf007"},"user-alt":{code:"\uf406"},"user-alt-slash":{code:"\uf4fa"},"user-astronaut":{code:"\uf4fb"},"user-check":{code:"\uf4fc"},"user-circle":{code:"\uf2bd"},"user-clock":{code:"\uf4fd"},"user-cog":{code:"\uf4fe"},"user-edit":{code:"\uf4ff"},"user-friends":{code:"\uf500"},"user-graduate":{code:"\uf501"},
"user-injured":{code:"\uf728"},"user-lock":{code:"\uf502"},"user-md":{code:"\uf0f0"},"user-minus":{code:"\uf503"},"user-ninja":{code:"\uf504"},"user-nurse":{code:"\uf82f"},"user-plus":{code:"\uf234"},"user-secret":{code:"\uf21b"},"user-shield":{code:"\uf505"},"user-slash":{code:"\uf506"},"user-tag":{code:"\uf507"},"user-tie":{code:"\uf508"},"user-times":{code:"\uf235"},users:{code:"\uf0c0"},"users-cog":{code:"\uf509"},usps:{code:"\uf7e1"},ussunnah:{code:"\uf407"},"utensil-spoon":{code:"\uf2e5"},utensils:{code:"\uf2e7"},
vaadin:{code:"\uf408"},"vector-square":{code:"\uf5cb"},venus:{code:"\uf221"},"venus-double":{code:"\uf226"},"venus-mars":{code:"\uf228"},viacoin:{code:"\uf237"},viadeo:{code:"\uf2a9"},"viadeo-square":{code:"\uf2aa"},vial:{code:"\uf492"},vials:{code:"\uf493"},viber:{code:"\uf409"},video:{code:"\uf03d"},"video-slash":{code:"\uf4e2"},vihara:{code:"\uf6a7"},vimeo:{code:"\uf40a"},"vimeo-square":{code:"\uf194"},"vimeo-v":{code:"\uf27d"},vine:{code:"\uf1ca"},vk:{code:"\uf189"},vnv:{code:"\uf40b"},voicemail:{code:"\uf897"},
"volleyball-ball":{code:"\uf45f"},"volume-down":{code:"\uf027"},"volume-mute":{code:"\uf6a9"},"volume-off":{code:"\uf026"},"volume-up":{code:"\uf028"},"vote-yea":{code:"\uf772"},"vr-cardboard":{code:"\uf729"},vuejs:{code:"\uf41f"},walking:{code:"\uf554"},wallet:{code:"\uf555"},warehouse:{code:"\uf494"},water:{code:"\uf773"},"wave-square":{code:"\uf83e"},waze:{code:"\uf83f"},weebly:{code:"\uf5cc"},weibo:{code:"\uf18a"},weight:{code:"\uf496"},"weight-hanging":{code:"\uf5cd"},weixin:{code:"\uf1d7"},
whatsapp:{code:"\uf232"},"whatsapp-square":{code:"\uf40c"},wheelchair:{code:"\uf193"},whmcs:{code:"\uf40d"},wifi:{code:"\uf1eb"},"wikipedia-w":{code:"\uf266"},wind:{code:"\uf72e"},"window-close":{code:"\uf410"},"window-maximize":{code:"\uf2d0"},"window-minimize":{code:"\uf2d1"},"window-restore":{code:"\uf2d2"},windows:{code:"\uf17a"},"wine-bottle":{code:"\uf72f"},"wine-glass":{code:"\uf4e3"},"wine-glass-alt":{code:"\uf5ce"},wix:{code:"\uf5cf"},"wizards-of-the-coast":{code:"\uf730"},"wolf-pack-battalion":{code:"\uf514"},
"won-sign":{code:"\uf159"},wordpress:{code:"\uf19a"},"wordpress-simple":{code:"\uf411"},wpbeginner:{code:"\uf297"},wpexplorer:{code:"\uf2de"},wpforms:{code:"\uf298"},wpressr:{code:"\uf3e4"},wrench:{code:"\uf0ad"},"x-ray":{code:"\uf497"},xbox:{code:"\uf412"},xing:{code:"\uf168"},"xing-square":{code:"\uf169"},"y-combinator":{code:"\uf23b"},yahoo:{code:"\uf19e"},yammer:{code:"\uf840"},yandex:{code:"\uf413"},"yandex-international":{code:"\uf414"},yarn:{code:"\uf7e3"},yelp:{code:"\uf1e9"},"yen-sign":{code:"\uf157"},
"yin-yang":{code:"\uf6ad"},yoast:{code:"\uf2b1"},youtube:{code:"\uf167"},"youtube-square":{code:"\uf431"},zhihu:{code:"\uf63f"}});Aq.Icons=bJ;Aq.Icons=bJ;Aq.Icons=bJ;var Qd=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js");Qd.vdom=dE;Qd.promise=Kf;Qd.arr=Te;Qd.tree=av;Qd.obj=lf;Qd.string=Hg;Qd.addOrChangeCSSDeclaration=nc;Qd.addOrChangeLinkedCSS=tr;Qd.defaultStyle=dw;Qd.renderGradient=dA;Qd.defaultAttributes=gi;Qd.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
Qd.pathAttributes=Ux;Qd.svgAttributes=cA;Qd.renderMorph=Vx;Qd.Transform=qj;Qd.pt=fh;Qd.getSvgVertices=sr;Qd.config=nk;var cJ=Qd.vdom;Qd.h=cJ.h;Qd.diff=cJ.diff;Qd.patch=cJ.patch;Qd.createNode=cJ.create;Qd.svgNs="http://www.w3.org/2000/svg";Qd.CanvasHook=function(e){this.canvasMorph=e};Qd.CanvasHook.prototype.hook=function(e,h,n){this.canvasMorph.afterRender(e,this.canvasMorph._canvas!==e&&"CANVAS"==e.tagName)};Qd.InitStroke=function(e,h,n){this.path=e;this.renderer=h;this.reverse=n};Qd.InitStroke.prototype.hook=
function(e,h,n){h=this.path.drawnProportion||0;0!=h&&(e.setAttribute("stroke-width",this.path.borderWidth.valueOf()+1),e.setAttribute("stroke-dasharray",e.getTotalLength()),e.setAttribute("stroke-dashoffset",e.getTotalLength()*(this.reverse?1-h:-1+(1-h))))};var dJ=function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js"),n=h.hasOwnProperty("Renderer")&&"function"===typeof h.Renderer?h.Renderer:h.Renderer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b,c,l){if(!b||!b.isMorph)throw Error("Trying to initialize renderer with an invalid world morph: "+b);if(!(c&&"nodeType"in c))throw Error("Trying to initialize renderer with an invalid root node: "+c);l||(l={window:System.global,document:c.ownerDocument});this.worldMorph=b;b._renderer=this;this.rootNode=c;this.domNode=null;this.domEnvironment=l;this.renderMap=new WeakMap;this.fixedMorphNodeMap=new Map;this.renderWorldLoopLater=
this.renderWorldLoopProcess=null;this.requestAnimationFrame=l.window.requestAnimationFrame.bind(l.window)}},{key:"clear",value:function(){var b=this,c,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return c=b.domNode,a.setCatchFinallyBlocks(2),a.yield(b.stopRenderWorldLoop(),4);case 4:a.leaveTryBlock(3);break;case 2:a.enterCatchBlock();case 3:c&&(l=c.parentNode,l.removeChild(c),[].concat($jscomp.arrayFromIterable(b.fixedMorphNodeMap.values())).forEach(function(f){return l.removeChild(f)})),
b.domNode=null,b.renderMap=new WeakMap,a.jumpToEnd()}})}},{key:"ensureDefaultCSS",value:function(){var b=this;return Qd.promise.waitFor(3E3,function(){return b.domNode.ownerDocument}).then(function(c){return Promise.all([Qd.addOrChangeCSSDeclaration("lively-morphic-css",Qd.defaultCSS,c),Qd.addOrChangeLinkedCSS("lively-ibm-plex",Qd.config.css.ibmPlex),Qd.addOrChangeLinkedCSS("lively-font-awesome",Qd.config.css.fontAwesome,c,!1),Qd.addOrChangeLinkedCSS("lively-font-inconsolata",Qd.config.css.inconsolata,
c,!1)])})}},{key:"startRenderWorldLoop",value:function(){var b=this;this._stopped=!1;this._renderWorldLoopLater=null;this.renderWorldLoopProcess=this.requestAnimationFrame(function(){return b.startRenderWorldLoop()});return this.renderStep()}},{key:"stopRenderWorldLoop",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){b._stopped=!0;b.domEnvironment.window.cancelAnimationFrame(b.renderWorldLoopProcess);b.renderWorldLoopProcess=null;b.domEnvironment.window.cancelAnimationFrame(b.renderWorldLoopLater);
b.renderWorldLoopLater=null;return c.yield(Qd.promise.waitFor(2E3,function(){return!b.worldMorph.needsRerender()}),0)})}},{key:"renderLater",value:function(b){var c=this;this.renderWorldLoopLaterCounter=void 0===b?10:b;this.renderWorldLoopLater||this._stopped||(this.renderWorldLoopLater=this.requestAnimationFrame(function(){c.renderWorldLoopLater=null;0<c.renderWorldLoopLaterCounter&&c.renderLater(c.renderWorldLoopLaterCounter-1);try{c.renderStep()}catch(l){console.error("Error rendering morphs:",
l)}}))}},{key:"renderStep",value:function(){this.worldMorph.renderAsRoot(this);return this}},{key:"getNodeForMorph",value:function(b){var c="#"+Qd.string.regExpEscape(b.id),l=this.domNode&&this.domNode.querySelector(c);this.domNode&&this.domNode.id==b.id&&(l=this.domNode);if(l)return l;b=$jscomp.makeIterator(this.fixedMorphNodeMap.values());for(l=b.next();!l.done;l=b.next())if(l=l.value.querySelector(c))return l;return null}},{key:"getMorphForNode",value:function(b){return this.worldMorph?this.worldMorph.withAllSubmorphsDetect(function(c){return c.id===
b.id}):null}},{key:"render",value:function(b){if(!b.needsRerender()){var c=this.renderMap.get(b);if(c)return c}b.aboutToRender(this);c=b.render(this);this.renderMap.set(b,c);return c}},{key:"renderAsFixed",value:function(b){var c=this.render(b);b.isHTMLMorph||(c.properties.style.position="fixed");return c}},{key:"renderFixedMorphs",value:function(b,c){c=this.domNode;var l=this.fixedMorphNodeMap;if((b.length||l.size)&&c&&c.parentNode){c=c.parentNode;for(var a=$jscomp.makeIterator(l),f=a.next();!f.done;f=
a.next()){var m=$jscomp.makeIterator(f.value);f=m.next().value;m=m.next().value;b.includes(f)||(m.parentNode&&m.parentNode.removeChild(m),l.delete(f))}a=b.map(function(u){return l.get(u)});var q=a.map(function(u){return u&&u.id});f=[].concat($jscomp.arrayFromIterable(c.children)).map(function(u){return u.id}).filter(function(u){return q.includes(u)});Qd.arr.equals(q,f)||a.map(function(u){return u&&u.parentNode&&u.parentNode.removeChild(u)});b=$jscomp.makeIterator(b);for(a=b.next();!a.done;a=b.next()){a=
a.value;f=this.renderMap.get(a)||this.renderAsFixed(a);m=this.renderAsFixed(a);m=Qd.diff(f,m);var r=l.get(a);r||(r=Qd.createNode(f,this.domEnvironment),l.set(a,r));r.parentNode||c.appendChild(r);Qd.patch(r,m)}}}},{key:"renderMorph",value:function(b){var c=this.renderSubmorphs(b);return Qd.h("div",Object.assign({},Qd.defaultAttributes(b,this),{style:Qd.defaultStyle(b)}),c)}},{key:"renderSubmorphs",value:function(b){return this.renderSelectedSubmorphs(b,b.submorphs)}},{key:"renderSelectedSubmorphs",
value:function(b,c){var l=b.borderWidthLeft,a=b.borderWidthTop,f=b.origin,m=f.x;f=f.y;for(var q=c.length-1,r=Array(q+1);0<=q;q--)r[q]=this.render(c[q]);c={};return Qd.h("div",{style:Object.assign({position:"absolute",left:m-(b.isPath?0:l)+"px",top:f-(b.isPath?0:a)+"px"},b.isPolygon?Object.assign({height:"100%",width:"100%",overflow:b.clipMode},"visible"!==b.clipMode?(c[navigator.userAgent.includes("AppleWebKit")?"-webkit-clip-path":"clip-path"]="url(#clipPath"+b.id+")",c):{}):{})},r)}},{key:"renderWorld",
value:function(b){for(var c=b.submorphs,l=[],a=[],f=0;f<c.length;f++){var m=c[f];m.hasFixedPosition?a.push(m):l.push(m)}c=this.renderSelectedSubmorphs(b,l);b=Qd.h("div",Object.assign({},Qd.defaultAttributes(b,this),{style:Qd.defaultStyle(b)}),c);b.fixedMorphs=a;return b}},{key:"renderImage",value:function(b){var c=b.imageUrl;if(c.startsWith("data:")){var l=c.indexOf(","),a=c.substring(5,l),f=$jscomp.makeIterator(a.split(";"));a=f.next().value;f=f.next().value;l=c.substring(l+1);"base64"!==f&&(c=Qd.string.createDataURI(l,
a))}return Qd.h("div",Object.assign({},Qd.defaultAttributes(b,this),{style:Qd.defaultStyle(b)}),[Qd.h("img",{src:c,alt:b.tooltip||"",draggable:!1,style:{"pointer-events":"none",position:"absolute",left:0,width:"100%",height:"100%"}}),this.renderSubmorphs(b)])}},{key:"renderCanvas",value:function(b){return Qd.h("div",Object.assign({},Qd.defaultAttributes(b,this),{style:Qd.defaultStyle(b)}),[Qd.h("canvas",{width:b.width,height:b.height,style:{"pointer-events":"none",position:"absolute"},canvasHook:new Qd.CanvasHook(b)}),
this.renderSubmorphs(b)])}},{key:"renderCheckBox",value:function(b){return Qd.h("div",Object.assign({},Qd.defaultAttributes(b,this),{style:Qd.defaultStyle(b)}),[Qd.h("input",{type:"checkbox",checked:b.checked,disabled:!b.active,draggable:!1,style:{"pointer-events":"none",width:"15px",height:"15px",position:"absolute"}}),this.renderSubmorphs(b)])}},{key:"renderPath",value:function(b){var c=b.startMarker,l=b.endMarker,a=b.showControlPoints,f=Qd.getSvgVertices(b.vertices),m=Qd.h("path",Object.assign({namespace:Qd.svgNs,
id:"svg"+b.id},Qd.pathAttributes(b))),q=Qd.h("mask",{namespace:Qd.svgNs,id:"mask"+b.id},[Qd.h("rect",{namespace:Qd.svgNs,attributes:{fill:"white",x:0,y:0,width:b.width+20,height:b.height+20}}),Qd.h("path",{namespace:Qd.svgNs,initStroke:new Qd.InitStroke(b,this,!0),attributes:{d:f,stroke:"black",fill:"none"}}),Qd.h("path",{namespace:Qd.svgNs,initStroke:new Qd.InitStroke(b,this,!1),attributes:{d:f,stroke:"white",fill:"none"}})]);f=[Qd.h("clipPath",{namespace:Qd.svgNs,id:"clipPath"+b.id},Qd.h("path",
{namespace:Qd.svgNs,attributes:{d:f,fill:"white"}})),q];c&&(c.id||(c.id="start-marker"),m.properties.attributes["marker-start"]="url(#"+b.id+"-"+c.id+")",f=[],f.push(this._renderPath_Marker(b,c)));l&&(l.id||(l.id="end-marker"),m.properties.attributes["marker-end"]="url(#"+b.id+"-"+l.id+")",f||(f=[]),f.push(this._renderPath_Marker(b,l)));var r;a&&(r=Qd.h("g",{namespace:Qd.svgNs},this._renderPath_ControlPoints(b)));return this.renderSvgMorph(b,m,f,r)}},{key:"_renderPath_ControlPoints",value:function(b,
c){function l(N,L,W,la,wa,D){var Q=la?12:Math.min(8,Math.max(3,m));W="path-point path-point-"+W;la=la?"orange":q;"string"===typeof wa&&(W+="-"+wa);D&&(Q=Math.max(3,Math.ceil(Q/2)));return D?Qd.h("circle",{namespace:Qd.svgNs,style:{fill:"white","stroke-width":2,stroke:la},attributes:{class:W,cx:N,cy:L,r:Q}}):Qd.h("circle",{namespace:Qd.svgNs,style:{fill:la},attributes:{class:W,cx:N,cy:L,r:Q}})}var a=b.vertices;c=b.borderWidth;var f=b.showControlPoints;b=b._controlPointDrag;var m=0==c?6:c+2,q="red";
c=[];if("object"===typeof f){var r=f.radius;(f=f.fill)&&(q=String(f));"number"===typeof r&&(m=r)}if(a.length){f=0;var u=a[0];r=u.x;var v=u.y;u=u.controlPoints.next;var y=b&&b.maybeMerge&&b.maybeMerge.includes(f);c.push(l(r,v,f,y));for(f=1;f<a.length-1;f++){var z=a[f];y=z.isSmooth;var A=z.x,C=z.y,G=z.controlPoints;z=G.previous;G=G.next;var F=b&&b.maybeMerge&&b.maybeMerge.includes(f);y?c.push(l(A,C,f,F),l(r+u.x,v+u.y,f-1,!1,"control-2",!0),l(A+z.x,C+z.y,f,!1,"control-1",!0)):c.push(l(A,C,f,F));r=A;
v=C;u=G}C=a[a.length-1];a=C.isSmooth;y=C.x;A=C.y;C=C.controlPoints.previous;b=b&&b.maybeMerge&&b.maybeMerge.includes(f);a?c.push(l(y,A,f,b),l(r+u.x,v+u.y,f-1,!1,"control-2",!0),l(y+C.x,A+C.y,f,!1,"control-1",!0)):c.push(l(y,A,f,b))}return c}},{key:"_renderPath_Marker",value:function(b,c){function l(a){var f=a.tagName,m=a.id,q=a.children,r=a.style;q=q?q.map(l):void 0;m&&(m=b.id+"-"+m);return Qd.h(f,{namespace:Qd.svgNs,id:m,style:r,attributes:Qd.obj.dissoc(a,["tagName","id","children","style"])},q)}
return l(c)}},{key:"renderSvgMorph",value:function(b,c,l,a){a=void 0===a?[]:a;var f=Qd.svgAttributes(b),m=b.innerBounds(),q=m.width;m=m.height;var r,u=[];b.fill&&b.fill.isGradient&&(r||(r=[]),r.push(Qd.renderGradient("fill"+b.id,b.extent,b.fill)));b.borderColor&&b.borderColor.valueOf().isGradient&&(r||(r=[]),r.push(Qd.renderGradient("borderColor"+b.id,b.extent,b.borderColor)));l&&l.length&&(r||(r=[]),r.push.apply(r,$jscomp.arrayFromIterable(l)));u.push(c);r&&u.push(Qd.h("defs",{namespace:Qd.svgNs},
r));c=Qd.obj.select(Qd.defaultStyle(b),"position filter display opacity transform top left transformOrigin cursor overflow".split(" "));return Qd.h("div",Object.assign({},Qd.defaultAttributes(b,this),{style:Object.assign({},c,{width:q+"px",height:m+"px","pointer-events":b.reactsToPointer?"auto":"none"})}),[Qd.h("svg",Object.assign({namespace:Qd.svgNs,version:"1.1",style:{position:"absolute","stroke-linejoin":b.cornerStyle||"mint","stroke-linecap":b.endStyle||"round",overflow:"visible"}},f),u),this.renderSubmorphs(b),
Qd.h("svg",Object.assign({namespace:Qd.svgNs,version:"1.1",style:{position:"absolute",overflow:"visible"}},f),a)])}},{key:"renderPreview",value:function(b,c){var l=void 0===c.center?!0:c.center,a=void 0===c.ignoreMorphs?[]:c.ignoreMorphs,f=void 0===c.asNode?!1:c.asNode,m=b.origin,q=b.rotation,r=void 0===c.width?100:c.width;c=void 0===c.height?100:c.height;var u=Math.max(.1,1/b.scale);u=(new Qd.Transform(b.position.negated(),0,Qd.pt(u,u))).transformRectToRect(b.bounds());var v=Math.max(.1,Math.min(r/
u.width,c/u.height));m=new Qd.Transform(u.topLeft().negated().scaleBy(v).subPt(m),q,Qd.pt(v,v));q=(q=this.getNodeForMorph(b))?q.cloneNode(!0):Qd.renderMorph(b);l&&(b=m.transformRectToRect(b.extent.extentAsRectangle()),m=m.preConcatenate(new Qd.Transform(Qd.pt(b.width<r?(r-b.width)/2:0,b.height<c?(c-b.height)/2:0))));q.style.transform=m.toCSSTransformString();q.style.pointerEvents="";Qd.tree.prewalk(q,function(y){if("string"===typeof y.className){var z=y.className.split(" ").map(function(A){return A.trim()}).filter(Boolean);
z.includes("Morph")&&(y.className=Qd.arr.withoutAll(z,["morph","Morph"]).join(" "),a.find(function(A){return A.id===y.id})&&y.remove(),y.id="")}},function(y){return Array.from(y.childNodes)});return f?q:q.outerHTML}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Renderer"}},{key:"default",value:function(){return this._default||new this}}],h,{pathInPackage:function(){return"rendering/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1406,end:20500})}(void 0);Qd.Renderer=dJ;Qd.Renderer=dJ;Qd.Renderer=dJ;var sB=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),Q1=function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),n=h.hasOwnProperty("FontDetector")&&"function"===typeof h.FontDetector?h.FontDetector:h.FontDetector=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.document=b;this.prepared=!1;this.defaultWidth={};this.defaultHeight={};this.possibleFontWeights="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ");this.namedToNumeric=new Map("Thin;Extra Light;Light;Normal;Medium;Semi Bold;Bold;Extra Bold;Ultra Bold".split(";").map(function(c,l){return[c,String(100*(l+1))]}));this.baseFonts=["monospace","sans-serif","serif","Comic Sans MS"];this.span=
null}},{key:"prepare",value:function(){var b=this.defaultWidth,c=this.defaultHeight,l=this.possibleFontWeights,a=this.baseFonts,f=this.document.getElementsByTagName("body")[0],m=this.span||this.document.createElement("span");m.style.fontSize="72px";m.style.opacity=0;m.innerHTML="mmmmmmmmmmlli";if(!m.parentNode){var q=this.document.createElement("div");q.style.position="absolute";q.style.width="100%";q.style.overflow="hidden";q.style["pointer-events"]="none";q.style["-webkit-user-select"]="none";q.appendChild(m);
f.appendChild(q)}for(var r in l)for(var u in a)m.style.fontFamily=a[u],m.style.fontWeight=l[r],b[a[u]+"@"+l[r]]=m.offsetWidth,c[a[u]+"@"+l[r]]=m.offsetHeight;this.span=m;this.prepared=!0}},{key:"isFontSupported",value:function(b,c){c=void 0===c?"normal":c;this.possibleFontWeights.includes(c)||(c=this.namedToNumeric.get(c)||"normal");this.prepared||this.prepare();var l=this.defaultWidth,a=this.defaultHeight,f=this.baseFonts,m=this.span,q=this.document.body;m.parentNode||q.appendChild(m);for(var r in f)if(m.style.fontWeight=
c,m.style.fontFamily=b+","+f[r],m.offsetWidth!=l[f[r]+"@"+c]||m.offsetHeight!=a[f[r]+"@"+c])return!0;return!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FontDetector"}},{key:"fonts",get:function(){return sB.fonts}}],h,{pathInPackage:function(){return"rendering/font-detector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:15,end:3680})}(void 0),Cfa=Q1=sB.FontDetector,RP=[{name:"serif",type:"default"},{name:"sans-serif",type:"default"},{name:"monospace",type:"default"},{name:"Adobe Jenson",type:"serif"},{name:"Albertus",type:"serif"},{name:"Aldus",type:"serif"},{name:"Alexandria",type:"serif"},{name:"Algerian",type:"serif"},{name:"American Typewriter",type:"serif"},{name:"Antiqua",type:"serif"},{name:"Arno",type:"serif"},{name:"Aster",type:"serif"},{name:"Aurora",type:"serif"},{name:"News 706",type:"serif"},
{name:"Baskerville",type:"serif"},{name:"Bell",type:"serif"},{name:"Belwe Roman",type:"serif"},{name:"Bembo",type:"serif"},{name:"Berkeley Old Style",type:"serif"},{name:"Bernhard Modern",type:"serif"},{name:"Bodoni",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Bookman",type:"serif"},{name:"Bulmer",type:"serif"},{name:"Caledonia",type:"serif"},{name:"Californian FB",type:"serif"},{name:"Calisto MT",type:"serif"},{name:"Cambria",type:"serif"},{name:"Capitals",type:"serif"},{name:"Cartier",
type:"serif"},{name:"Caslon",type:"serif"},{name:"Wyld",type:"serif"},{name:"Caslon Antique / Fifteenth Century",type:"serif"},{name:"Catull",type:"serif"},{name:"Centaur",type:"serif"},{name:"Century Old Style",type:"serif"},{name:"Century Schoolbook",type:"serif"},{name:"New Century Schoolbook",type:"serif"},{name:"Century Schoolbook Infant",type:"serif"},{name:"Charis SIL",type:"serif"},{name:"Charter (typeface)",type:"serif"},{name:"Cheltenham",type:"serif"},{name:"Clearface",type:"serif"},{name:"Cochin",
type:"serif"},{name:"Colonna",type:"serif"},{name:"Computer Modern",type:"serif"},{name:"Concrete Roman",type:"serif"},{name:"Constantia",type:"serif"},{name:"Cooper Black",type:"serif"},{name:"Copperplate Gothic",type:"serif"},{name:"Corona",type:"serif"},{name:"News 705",type:"serif"},{name:"DejaVu Serif",type:"serif"},{name:"Didot",type:"serif"},{name:"Droid Serif",type:"serif"},{name:"Elephant",type:"serif"},{name:"Emerson",type:"serif"},{name:"Excelsior",type:"serif"},{name:"News 702",type:"serif"},
{name:"Fairfield",type:"serif"},{name:"FF Scala",type:"serif"},{name:"Footlight",type:"serif"},{name:"FreeSerif",type:"serif"},{name:"Friz Quadrata",type:"serif"},{name:"Garamond",type:"serif"},{name:"Gentium",type:"serif"},{name:"Georgia",type:"serif"},{name:"Gloucester",type:"serif"},{name:"Goudy",type:"serif"},{name:"Granjon",type:"serif"},{name:"High Tower Text",type:"serif"},{name:"Hoefler Text",type:"serif"},{name:"Imprint",type:"serif"},{name:"Ionic No. 5",type:"serif"},{name:"News 701",type:"serif"},
{name:"ITC Benguiat",type:"serif"},{name:"Janson",type:"serif"},{name:"Jokerman",type:"serif"},{name:"Joanna",type:"serif"},{name:"Korinna",type:"serif"},{name:"Lexicon",type:"serif"},{name:"Liberation Serif",type:"serif"},{name:"Linux Libertine",type:"serif"},{name:"Literaturnaya",type:"serif"},{name:"Lucida Bright",type:"serif"},{name:"Melior",type:"serif"},{name:"Memphis",type:"serif"},{name:"Miller",type:"serif"},{name:"Minion",type:"serif"},{name:"Modern",type:"serif"},{name:"Mona Lisa",type:"serif"},
{name:"Mrs Eaves",type:"serif"},{name:"MS Serif",type:"serif"},{name:"New York",type:"serif"},{name:"Nimbus Roman",type:"serif"},{name:"NPS Rawlinson Roadway",type:"serif"},{name:"OCR A Extended",type:"serif"},{name:"Palatino",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Perpetua",type:"serif"},{name:"Plantin",type:"serif"},{name:"Playbill",type:"serif"},{name:"Primer",type:"serif"},{name:"Renault",type:"serif"},{name:"Requiem",type:"serif"},{name:"Rotis Serif",type:"serif"},{name:"Sabon",
type:"serif"},{name:"Sistina",type:"serif"},{name:"Souvenir",type:"serif"},{name:"XITS",type:"serif"},{name:"Sylfaen",type:"serif"},{name:"Times New Roman",type:"serif"},{name:"Times",type:"serif"},{name:"Torino",type:"serif"},{name:"Trajan",type:"serif"},{name:"Trinit\u00e9",type:"serif"},{name:"Trump Mediaeval",type:"serif"},{name:"Utopia",type:"serif"},{name:"Vera Serif",type:"serif"},{name:"Wide Latin",type:"serif"},{name:"Windsor",type:"serif"},{name:"XITS",type:"serif"},{name:"Playfair Display",
type:"serif",isGoogleFont:!0},{name:"Cormorant",type:"serif",isGoogleFont:!0},{name:"Eczar",type:"serif",isGoogleFont:!0},{name:"Alegreya",type:"serif",isGoogleFont:!0},{name:"Lora",type:"serif",isGoogleFont:!0},{name:"Source Serif Pro",type:"serif",isGoogleFont:!0},{name:"Roboto Slab",type:"serif",isGoogleFont:!0},{name:"BioRhyme",type:"serif",isGoogleFont:!0},{name:"Libre Baskerville",type:"serif",isGoogleFont:!0},{name:"Crimson Text",type:"serif",isGoogleFont:!0},{name:"Old Standard TT",type:"serif",
isGoogleFont:!0},{name:"Domine",type:"serif",isGoogleFont:!0},{name:"Bitter",type:"serif",isGoogleFont:!0},{name:"Gentium Basic",type:"serif",isGoogleFont:!0},{name:"PT Serif",type:"serif",isGoogleFont:!0},{name:"Cardo",type:"serif",isGoogleFont:!0},{name:"Neuton",type:"serif",isGoogleFont:!0},{name:"Arvo",type:"serif",isGoogleFont:!0},{name:"Merriweather",type:"serif",isGoogleFont:!0},{name:"Alexandria",type:"slab serif"},{name:"American Typewriter",type:"slab serif"},{name:"Archer",type:"slab serif"},
{name:"Athens",type:"slab serif"},{name:"Candida",type:"slab serif"},{name:"Cholla Slab",type:"slab serif"},{name:"City",type:"slab serif"},{name:"Clarendon",type:"slab serif"},{name:"Concrete Roman",type:"slab serif"},{name:"Courier",type:"slab serif"},{name:"Egyptienne",type:"slab serif"},{name:"Guardian Egyptian",type:"slab serif"},{name:"Ionic No. 5",type:"slab serif"},{name:"Lexia",type:"slab serif"},{name:"Memphis",type:"slab serif"},{name:"Nilland",type:"slab serif"},{name:"Roboto Slab",type:"slab serif"},
{name:"Rockwell",type:"slab serif"},{name:"Schadow",type:"slab serif"},{name:"Serifa",type:"slab serif"},{name:"Skeleton Antique",type:"slab serif"},{name:"Sreda",type:"slab serif"},{name:"Swift",type:"slab serif"},{name:"Tower",type:"slab serif"},{name:"Agency FB",type:"sans-serif"},{name:"Akzidenz-Grotesk",type:"sans-serif"},{name:"Andal\u00e9 Sans",type:"sans-serif"},{name:"Antique Olive",type:"sans-serif"},{name:"Arial",type:"sans-serif"},{name:"Arial Unicode MS",type:"sans-serif"},{name:"Avant Garde Gothic",
type:"sans-serif"},{name:"Avenir",type:"sans-serif"},{name:"Bank Gothic",type:"sans-serif"},{name:"Bauhaus",type:"sans-serif"},{name:"Bell Centennial",type:"sans-serif"},{name:"Bell Gothic",type:"sans-serif"},{name:"Benguiat Gothic",type:"sans-serif"},{name:"Berlin Sans",type:"sans-serif"},{name:"Brandon Grotesque",type:"sans-serif"},{name:"Calibri",type:"sans-serif"},{name:"Casey",type:"sans-serif"},{name:"Century Gothic",type:"sans-serif"},{name:"Charcoal",type:"sans-serif"},{name:"Chicago",type:"sans-serif"},
{name:"Clearview",type:"sans-serif"},{name:"Comic Sans",type:"sans-serif"},{name:"Compacta",type:"sans-serif"},{name:"Corbel",type:"sans-serif"},{name:"DejaVu Sans",type:"sans-serif"},{name:"DIN",type:"sans-serif"},{name:"Dotum",type:"sans-serif"},{name:"Droid Sans",type:"sans-serif"},{name:"Dyslexie",type:"sans-serif"},{name:"Ecofont",type:"sans-serif"},{name:"Eras",type:"sans-serif"},{name:"Esseltub",type:"sans-serif"},{name:"Espy Sans",type:"sans-serif"},{name:"Eurocrat",type:"sans-serif"},{name:"Eurostile",
type:"sans-serif"},{name:"Square 721",type:"sans-serif"},{name:"FF Dax",type:"sans-serif"},{name:"FF Meta",type:"sans-serif"},{name:"FF Scala Sans",type:"sans-serif"},{name:"Fira Sans",type:"sans-serif"},{name:"Folio",type:"sans-serif"},{name:"Franklin Gothic",type:"sans-serif"},{name:"FreeSans",type:"sans-serif"},{name:"Frutiger",type:"sans-serif"},{name:"Futura",type:"sans-serif"},{name:"Geneva",type:"sans-serif"},{name:"Gill Sans",type:"sans-serif"},{name:"Gill Sans Schoolbook",type:"sans-serif"},
{name:"Gotham",type:"sans-serif"},{name:"Haettenschweiler",type:"sans-serif"},{name:"Handel Gothic",type:"sans-serif"},{name:"Hei",type:"sans-serif"},{name:"Helvetica",type:"sans-serif"},{name:"Helvetica Neue",type:"sans-serif"},{name:"Swiss 721",type:"sans-serif"},{name:"Highway Gothic",type:"sans-serif"},{name:"Hobo",type:"sans-serif"},{name:"Impact",type:"sans-serif"},{name:"Industria",type:"sans-serif"},{name:"Interstate",type:"sans-serif"},{name:"Johnston/New Johnston",type:"sans-serif"},{name:"Kabel",
type:"sans-serif"},{name:"Klavika",type:"sans-serif"},{name:"Lexia Readable",type:"sans-serif"},{name:"Liberation Sans",type:"sans-serif"},{name:"Linux Biolinum",type:"sans-serif"},{name:"Lucida Sans",type:"sans-serif"},{name:"Lucida Grande",type:"sans-serif"},{name:"Lucida Sans Unicode",type:"sans-serif"},{name:"Lydian",type:"sans-serif"},{name:"Meiryo",type:"sans-serif"},{name:"Meta",type:"sans-serif"},{name:"Microgramma",type:"sans-serif"},{name:"Modern",type:"sans-serif"},{name:"Motorway",type:"sans-serif"},
{name:"Arial",type:"sans-serif"},{name:"Myriad",type:"sans-serif"},{name:"Neutraface",type:"sans-serif"},{name:"Neuzeit S",type:"sans-serif"},{name:"News Gothic",type:"sans-serif"},{name:"Nimbus Sans L",type:"sans-serif"},{name:"Open Sans",type:"sans-serif"},{name:"Optima",type:"sans-serif"},{name:"Paris",type:"sans-serif"},{name:"Product Sans",type:"sans-serif"},{name:"Proxima Nova",type:"sans-serif"},{name:"Russian Federation",type:"sans-serif"},{name:"Rail Alphabet",type:"sans-serif"},{name:"Roboto",
type:"sans-serif"},{name:"Rotis Sans",type:"sans-serif"},{name:"Segoe UI",type:"sans-serif"},{name:"Skia",type:"sans-serif"},{name:"Source Sans Pro",type:"sans-serif"},{name:"Sweden Sans",type:"sans-serif"},{name:"Syntax",type:"sans-serif"},{name:"Tahoma",type:"sans-serif"},{name:"Template Gothic",type:"sans-serif"},{name:"Thesis Sans",type:"sans-serif"},{name:"Tiresias",type:"sans-serif"},{name:"Trade Gothic",type:"sans-serif"},{name:"Transport",type:"sans-serif"},{name:"Trebuchet MS",type:"sans-serif"},
{name:"Twentieth Century (Tw Cen MT)",type:"sans-serif"},{name:"Ubuntu",type:"sans-serif"},{name:"Univers",type:"sans-serif"},{name:"Zurich",type:"sans-serif"},{name:"Vera Sans",type:"sans-serif"},{name:"Verdana",type:"sans-serif"},{name:"Work Sans",type:"sans-serif",isGoogleFont:!0},{name:"Rubik",type:"sans-serif",isGoogleFont:!0},{name:"Libre Franklin",type:"sans-serif",isGoogleFont:!0},{name:"Fira Sans",type:"sans-serif",isGoogleFont:!0},{name:"Alegreya Sans",type:"sans-serif",isGoogleFont:!0},
{name:"Chivo",type:"sans-serif",isGoogleFont:!0},{name:"Source Sans Pro",type:"sans-serif",isGoogleFont:!0},{name:"Roboto",type:"sans-serif",isGoogleFont:!0},{name:"Poppins",type:"sans-serif",isGoogleFont:!0},{name:"Archivo Narrow",type:"sans-serif",isGoogleFont:!0},{name:"Karla",type:"sans-serif",isGoogleFont:!0},{name:"Montserrat",type:"sans-serif",isGoogleFont:!0},{name:"Rajdhani",type:"sans-serif",isGoogleFont:!0},{name:"PT Sans",type:"sans-serif",isGoogleFont:!0},{name:"Lato",type:"sans-serif",
isGoogleFont:!0},{name:"Open Sans",type:"sans-serif",isGoogleFont:!0},{name:"Cabin",type:"sans-serif",isGoogleFont:!0},{name:"Raleway",type:"sans-serif",isGoogleFont:!0},{name:"Nyala",type:"semi-serif"},{name:"Rotis Semi Serif",type:"semi-serif"},{name:"Easyreading",type:"semi-serif"},{name:"Andal\u00e9 Mono",type:"monospace"},{name:"Arial",type:"monospace"},{name:"Bitstream Vera (Vera Sans Mono)",type:"monospace"},{name:"Consolas",type:"monospace"},{name:"Courier",type:"monospace"},{name:"Courier New",
type:"monospace"},{name:"DejaVu Sans Mono",type:"monospace"},{name:"Droid Sans Mono",type:"monospace"},{name:"Everson Mono",type:"monospace"},{name:"Fixed",type:"monospace"},{name:"Fixedsys",type:"monospace"},{name:"Fixedsys Excelsior",type:"monospace"},{name:"HyperFont",type:"monospace"},{name:"Inconsolata",type:"monospace"},{name:"Letter Gothic",type:"monospace"},{name:"Liberation Mono",type:"monospace"},{name:"Lucida Console",type:"monospace"},{name:"Lucida Sans Typewriter",type:"monospace"},{name:"Lucida Typewriter",
type:"monospace"},{name:"Menlo",type:"monospace"},{name:"MICR",type:"monospace"},{name:"Monaco",type:"monospace"},{name:"Monospace",type:"monospace"},{name:"MS Gothic",type:"monospace"},{name:"MS Mincho",type:"monospace"},{name:"Nimbus Mono L",type:"monospace"},{name:"OCR-A",type:"monospace"},{name:"OCR-B",type:"monospace"},{name:"PragmataPro",type:"monospace"},{name:"Prestige Elite",type:"monospace"},{name:"ProFont",type:"monospace"},{name:"Proggy programming fonts",type:"monospace"},{name:"SimHei",
type:"monospace"},{name:"SimSun",type:"monospace"},{name:"Source Code Pro",type:"monospace"},{name:"Terminal",type:"monospace"},{name:"Trixie",type:"monospace"},{name:"Ubuntu Mono",type:"monospace"},{name:"Vera Sans Mono (Bitstream Vera)",type:"monospace"},{name:"Space Mono",type:"monospace",isGoogleFont:!0},{name:"Inconsolata",type:"monospace",isGoogleFont:!0},{name:"Anonymous Pro",type:"monospace",isGoogleFont:!0},{name:"Balloon",type:"script"},{name:"Brush Script",type:"script"},{name:"Choc",type:"script"},
{name:"Dom Casual",type:"script"},{name:"Mistral",type:"script"},{name:"Papyrus",type:"script"},{name:"Segoe Script",type:"script"},{name:"Utopia",type:"script"},{name:"Coronet",type:"script"},{name:"Curlz",type:"script"},{name:"Gravura",type:"script"},{name:"Script",type:"script"},{name:"Wiesbaden Swing",type:"script"},{name:"American Scribe",type:"script"},{name:"AMS Euler",type:"script"},{name:"Apple Chancery",type:"script"},{name:"Forte",type:"script"},{name:"French Script",type:"script"},{name:"ITC Zapf Chancery",
type:"script"},{name:"Kuenstler Script",type:"script"},{name:"Monotype Corsiva",type:"script"},{name:"Old English Text MT",type:"script"},{name:"Zapfino",type:"script"},{name:"Andy",type:"handwriting"},{name:"Ashley Script",type:"handwriting"},{name:"C\u00e9zanne",type:"handwriting"},{name:"Chalkboard",type:"handwriting"},{name:"Comic Sans MS",type:"handwriting"},{name:"Dom Casual",type:"handwriting"},{name:"Kristen",type:"handwriting"},{name:"Lucida Handwriting",type:"handwriting"},{name:"Bastard",
type:"blackletter"},{name:"Breitkopf Fraktur",type:"blackletter"},{name:"Cloister Black",type:"blackletter"},{name:"Fette Fraktur",type:"blackletter"},{name:"Fletcher",type:"blackletter"},{name:"Fraktur",type:"blackletter"},{name:"Lucida Blackletter",type:"blackletter"},{name:"Old English Text",type:"blackletter"},{name:"Schwabacher",type:"blackletter"},{name:"Aharoni",type:"non-latin"},{name:"Aparajita",type:"non-latin"},{name:"Arial",type:"non-latin"},{name:"Calibri",type:"non-latin"},{name:"Chandas",
type:"non-latin"},{name:"Gadugi",type:"non-latin"},{name:"Grecs du roi",type:"non-latin"},{name:"Javanese script",type:"non-latin"},{name:"Japanese Gothic",type:"non-latin"},{name:"Jomolhari",type:"non-latin"},{name:"Kiran",type:"non-latin"},{name:"Kochi",type:"non-latin"},{name:"Koren",type:"non-latin"},{name:"Kruti Dev",type:"non-latin"},{name:"Malgun Gothic",type:"non-latin"},{name:"Meiryo",type:"non-latin"},{name:"Microsoft JhengHei",type:"non-latin"},{name:"Microsoft YaHei",type:"non-latin"},
{name:"Minch\u014d",type:"non-latin"},{name:"Ming",type:"non-latin"},{name:"Mona",type:"non-latin"},{name:"MS Gothic",type:"non-latin"},{name:"Nastaliq Navees",type:"non-latin"},{name:"Porson",type:"non-latin"},{name:"Segoe UI Symbol",type:"non-latin"},{name:"Shruti",type:"non-latin"},{name:"SimSun",type:"non-latin"},{name:"Sylfaen",type:"non-latin"},{name:"Tahoma",type:"non-latin"},{name:"Tengwar",type:"non-latin"},{name:"Tibetan Machine Uni",type:"non-latin"},{name:"Wilson Greek",type:"non-latin"},
{name:"SMP",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Bitstream Cyberbit",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"Charis SIL",type:"unicode"},{name:"BMP",type:"unicode"},{name:"SMP",type:"unicode"},{name:"Code2002",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"IPA",type:"unicode"},{name:"Everson Mono",type:"unicode"},{name:"Windows",type:"unicode"},{name:"Fixedsys Excelsior",type:"unicode"},{name:"FreeFont",type:"unicode"},{name:"Gentium",type:"unicode"},
{name:"GNU Unifont",type:"unicode"},{name:"Georgia Ref",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Junicode",type:"unicode"},{name:"Mac OS 8.5",type:"unicode"},{name:"macOS",type:"unicode"},{name:"ISO 8859-x",type:"unicode"},{name:"MS Gothic",type:"unicode"},{name:"MS Mincho",type:"unicode"},{name:"Nimbus Sans Global",type:"unicode"},{name:"Noto",type:"unicode"},{name:"Fabrizio Schiavi",type:"unicode"},{name:"Squarish Sans CT",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Titus Cyberbit Basic",
type:"unicode"},{name:"Verdana Ref",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Apple Symbols",type:"symbol"},{name:"Asana-Math",type:"symbol"},{name:"Blackboard bold",type:"symbol"},{name:"Bookshelf Symbol 7",type:"symbol"},{name:"Cambria Math",type:"symbol"},{name:"Computer Modern",type:"symbol"},{name:"Lucida Math",type:"symbol"},{name:"Marlett",type:"symbol"},{name:"Symbol",type:"symbol"},{name:"Webdings",type:"symbol"},{name:"Wingdings",type:"symbol"},{name:"Wingdings 2",type:"symbol"},
{name:"Wingdings 3",type:"symbol"},{name:"Zapf Dingbats",type:"symbol"},{name:"Ad Lib",type:"decorative"},{name:"Allegro",type:"decorative"},{name:"Andreas",type:"decorative"},{name:"Arnold B\u00f6cklin",type:"decorative"},{name:"Astur",type:"decorative"},{name:"Banco",type:"decorative"},{name:"Bauhaus",type:"decorative"},{name:"Braggadocio",type:"decorative"},{name:"Broadway",type:"decorative"},{name:"Caslon Antique",type:"decorative"},{name:"Cooper Black",type:"decorative"},{name:"Curlz",type:"decorative"},
{name:"Ellington",type:"decorative"},{name:"Exocet",type:"decorative"},{name:"FIG Script",type:"decorative"},{name:"Forte",type:"decorative"},{name:"Gabriola",type:"decorative"},{name:"Horizon",type:"decorative"},{name:"Jim Crow",type:"decorative"},{name:"Lo-Type",type:"decorative"},{name:"Neuland",type:"decorative"},{name:"Peignot",type:"decorative"},{name:"San Francisco",type:"decorative"},{name:"Stencil",type:"decorative"},{name:"Umbra",type:"decorative"},{name:"Westminster",type:"decorative"},
{name:"Willow",type:"decorative"},{name:"Windsor",type:"decorative"},{name:"Lithos",type:"mimicry"},{name:"Skia",type:"mimicry"},{name:"3x3",type:"misc"},{name:"Compatil",type:"misc"},{name:"Generis",type:"misc"},{name:"Grasset",type:"misc"},{name:"LED",type:"misc"},{name:"Luxi",type:"misc"},{name:"System",type:"misc"}];sB.fonts=RP;sB.fonts=RP;sB.fonts=RP;sB.default=Q1;var sh=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js");sh.textlayerNodeForFontMeasure=function(e){var h=
e.viewState,n=h.text_layer_node;h=h.fontmetric_text_layer_node;n&&!n.className.includes("newtext-text-layer")&&(e.viewState.text_layer_node=n=n.parentNode.querySelector(".newtext-text-layer.actual"));h&&!h.className.includes("newtext-text-layer")&&(e.viewState.fontmetric_text_layer_node=h=null);n&&!h&&n.parentNode&&(h=e.viewState.fontmetric_text_layer_node=n.parentNode.querySelector(".newtext-text-layer.font-measure"));return h};sh.isExtendingChar=function(e){return 768<=e.charCodeAt(0)&&sh.extendingChars.test(e)};
sh.skipExtendingChars=function(e,h,n){for(;(0>n?0<h:h<e.length)&&sh.isExtendingChar(e.charAt(h));)h+=n;return h};sh.charBoundsOfBigMonospacedLine=function(e,h,n,b,c,l,a,f){c=void 0===c?0:c;l=void 0===l?0:l;n=n.text.length;if(500>n||h.isProportional(sh.getComputedFontFamily(b)))return null;var m=Infinity,q=a.defaultTextStyle;a.lineWrapping&&(m=b.getBoundingClientRect().width);h=h._domMeasure.defaultCharExtent(e,{defaultTextStyle:q},f);e=h.width;h=h.height;b=Array(n);for(a=0;a<n;a++)c+e>m&&(c=0,l+=
h),b[a]={x:c,y:l,width:e,height:h},c+=e;return b};sh.charBoundsOfLine=function(e,h,n,b){n=void 0===n?0:n;b=void 0===b?0:b;e=h.ELEMENT_NODE;var c=h.TEXT_NODE,l=h.ownerDocument,a=[],f=0;if(h)if(h.className.includes("line")){n-=h.offsetLeft;b-=h.offsetTop;var m=h.childNodes[0]}else m=h.getElementsByClassName("line")[0].childNodes[0],n=n-h.offsetLeft+sh.getComputedMarginLeft(h),b-=h.offsetTop;else m=null;if(!m){var q=m=l.createElement("br");h.appendChild(q)}for(;m&&!(Infinity<f);){var r="BR"!==m.tagName&&
m.nodeType===e&&m.childNodes[0]||m;if(r.nodeType===c)for(var u=r.length,v=0;v<u;v++){var y=sh.measureCharInner(l,r,v,"right");var z=y.left;var A=y.top;h=y.width;y=y.height;z+=n;A+=b;a[f++]={x:z,y:A,width:h,height:y}}else if(m.nodeType===e)r=m.getBoundingClientRect(),z=r.left,A=r.top,h=r.width,y=r.height,z+=n,A+=b,a[f++]={x:z,y:A,width:h,height:y};else throw Error("Cannot deal with node "+m);m=m.nextSibling}q&&q.parentNode.removeChild(q);return a};sh.measureCharInner=function(e,h,n,b){b=void 0===b?
"left":b;var c=n;n+=1;if(3==h.nodeType)for(var l=0;4>l;l++){var a=sh.getUsefulRect(sh.range(e,h,c,n).getClientRects(),b);if(a.left||a.right||0==c)break;n=c;--c}return a};sh.range=function(e,h,n,b,c){e=e.createRange();e.setEnd(c||h,b);e.setStart(h,n);return e};sh.getUsefulRect=function(e,h){var n={left:0,right:0,top:0,bottom:0};if("left"==h)for(h=0;h<e.length&&(n=e[h]).left==n.right;h++);else for(h=e.length-1;0<=h&&(n=e[h]).left==n.right;h--);return n};sh.string=Hg;sh.obj=lf;sh.FontDetector=Cfa;sh.cumulativeOffset=
Ts;sh.config=nk;sh.debug=!!sh.config.onloadURLQuery["debug-font-metric"];sh.checkTimeout=1E3;var R1=function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=h.hasOwnProperty("FontMetric")&&"function"===typeof h.FontMetric?h.FontMetric:h.FontMetric=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.charMap=
{};this.cachedBoundsInfo={};this.supportedFontCache={};this.element=null;this.isProportionalCache={}}},{key:"reset",value:function(b){if(this.element){var c=this.element.parentNode;var l=this.element.ownerDocument}this.uninstall();this.charMap={};this.cachedBoundsInfo={};l&&c&&this.install(l,c,b)}},{key:"install",value:function(b,c,l){this.element=b.createElement("div");this.element.name="fontMetric";this.setMeasureNodeStyles(this.element.style,!0);c.appendChild(this.element);this._domMeasure=(new sh.DOMTextMeasure).install(b,
c,l)}},{key:"uninstall",value:function(){this.element&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this._domMeasure&&this._domMeasure.uninstall())}},{key:"setMeasureNodeStyles",value:function(b,c){b.width=b.height="auto";b.left=b.top="0px";b.visibility="hidden";b.position="absolute";b.whiteSpace="pre";b.font="inherit";b.overflow=c?"hidden":"visible"}},{key:"measure",value:function(b,c){var l=b.fontFamily,a=b.fontSize,f=b.fontWeight,m=b.fontStyle,q=
b.textDecoration,r=b.textStyleClasses;b=b.transform;var u=this.element;b&&(b=b.inverse());u.textContent=c;Object.assign(u.style,{"-webkit-text-size-adjust":"none",fontFamily:l,fontWeight:f,fontStyle:m,textDecoration:q,transform:b,fontSize:a+"px"});u.className=r?r.join(" "):"";try{var v=u.getBoundingClientRect();var y=v.width;var z=v.height}catch(A){return{width:0,height:0}}return{height:z,width:y}}},{key:"charBoundsFor",value:function(b,c){var l=c.length,a=Array(l),f=this.cachedBoundsInfo,m=f.bounds,
q=f.str;f=f.style;if(this.isProportional(b.fontFamily)){f=m&&sh.obj.equals(f,b);for(var r=!b.fixedCharacterSpacing,u=0,v=0;u<l;u++){var y=c[u];if(r)if(f=f&&y===q[u]){var z=m[u];y=z.width;z=z.height}else y=c.substr(0,u+1),z=this.measure(b,y),y=z.width,z=z.height,y-=v;else z=this.sizeFor(b,y),y=z.width,z=z.height;a[u]={x:v,y:0,width:Math.ceil(y),height:Math.ceil(z)};v+=y}r&&(this.cachedBoundsInfo={bounds:a,str:c,style:b})}else for(c=this.sizeFor(b,"x",!0),b=this.sizeFor(b,"xx",!0).width-c.width,c=c.height,
q=0;q<l;q++)m=b*q,a[q]={x:m,y:0,width:b,height:c};return a}},{key:"isProportional",value:function(b){if(this.isProportionalCache.hasOwnProperty(b))return this.isProportionalCache[b];var c={fontFamily:b,fontSize:12},l=this.sizeFor(c,"w").width;c=this.sizeFor(c,"i").width;return this.isProportionalCache[b]=l!==c}},{key:"sizeFor",value:function(b,c,l){c=void 0===c?"":c;var a=b.fontFamily,f=b.fontSize,m=b.fontWeight,q=b.fontStyle,r=b.textDecoration,u=b.textStyleClasses;b={fontFamily:a,fontSize:f,fontWeight:m,
fontStyle:q,textDecoration:r,textStyleClasses:u};if((void 0===l||!l)&&1<c.length)return this.measure(b,c);l=u?u.join(" "):"";a=[a,f,m,q,r,l].join("-");this.charMap[a]||(this.charMap[a]={});this.charMap[a][c]||(this.charMap[a][c]=this.measure(b,c));return this.charMap[a][c]}},{key:"defaultLineHeight",value:function(b){return this.sizeFor(b," ").height}},{key:"isFontSupported",value:function(b,c){c=void 0===c?"normal":c;var l=this.fontDetector||(this.fontDetector=new sh.FontDetector(this.element.ownerDocument));
if(this.supportedFontCache[b+"-"+c]){var a=this.supportedFontCache[b+"-"+c],f=a.ts;a=a.value;if(Date.now()-f<sh.checkTimeout)return a}l=l.isFontSupported(b,c);this.supportedFontCache[b+"-"+c]={ts:Date.now(),value:l};return l}},{key:"defaultCharExtent",value:function(b,c,l){return this._domMeasure.defaultCharExtent(b,c,l)}},{key:"manuallyComputeCharBoundsOfLine",value:function(b,c,l,a,f,m,q){return this._domMeasure.computeCharBBoxes(b,c,0,0,f,m,q,this)}},{key:"manuallyComputeBoundsOfLines",value:function(b,
c,l,a,f,m,q){return this._domMeasure.computeBBoxesOfLines(b,c,0,0,f,m,q)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FontMetric"}},{key:"default",value:function(){if(!this._fontMetric)throw Error("FontMetric has not yet been initialized!");return this._fontMetric}},{key:"initDefault",value:function(b){if(!this._fontMetric){if(!b&&"undefined"===typeof document)throw Error("Cannot initialize FontMetric without document");b||(b={document:document});this._fontMetric=this.forDOMEnv(b)}return this._fontMetric}},
{key:"removeDefault",value:function(){this._fontMetric&&(this._fontMetric.uninstall(),this._fontMetric=null)}},{key:"forDOMEnv",value:function(b){b=b.document;var c=new sh.FontMetric;c.install(b,b.body);return c}}],h,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:316,end:7459})}(void 0),
Dfa=R1=sh.FontMetric;sh.extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
(function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=h.hasOwnProperty("DOMTextMeasure")&&"function"===typeof h.DOMTextMeasure?h.DOMTextMeasure:h.DOMTextMeasure=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:"reset",value:function(){if(this.element){var b=this.element.parentNode;var c=this.element.ownerDocument}this.uninstall();c&&b&&this.install(c,b);return this}},
{key:"install",value:function(b,c,l){this.maxLineBBoxCacheCount=(this.debug=l=void 0===l?!1:l)?1:3E3;this.lineBBoxCacheCount=0;this.lineBBoxCache={};this.maxTextlayerNodeCacheCount=l?1:30;this.textlayerNodeCacheCount=0;this.textlayerNodeCache={};this.defaultCharWidthHeightCache={};this.doc=b;b=this.element=b.createElement("div");b.className="dom-measure"+(l?" debug":"");this.setMeasureNodeStyles(b.style,!0);c.appendChild(b);return this}},{key:"uninstall",value:function(){var b=this.element;b&&(b.parentNode&&
b.parentNode.removeChild(b),this.element=null)}},{key:"setMeasureNodeStyles",value:function(b,c){b.width=b.height="auto";this.debug||(b.left=b.top="0px",b.visibility="hidden");b.position="absolute";b.whiteSpace="pre";b.font="inherit";b.overflow=c&&!this.debug?"hidden":"visible"}},{key:"generateStyleKey",value:function(b){var c=b.defaultTextStyle;return[c.fontFamily,c.fontSize,c.fontWeight,c.fontStyle,c.textDecoration,c.textStyleClasses,b.paddingLeft,b.paddingRight,b.paddingTop,b.paddingBottom,b.width,
b.height,b.clipMode,b.lineWrapping,b.textAlign].join("-")}},{key:"defaultCharExtent",value:function(b,c,l){var a=this,f=this.generateStyleKey(c),m=this.defaultCharWidthHeightCache[f];if("undefined"!==typeof m&&(0!==m.height||0!==m.width))return m;var q=this.doc;return this.withTextLayerNodeDo(b,l,c,f,function(r){var u=q.createElement("span");u.className="line";u.style.whiteSpace="pre";r.appendChild(u);u.textContent="abcdefghijklmnopqrstufwxyz ABCDEFGHIJKLMNOPQRSTUFWXYZ 1234567890 {}[];,./<>?'\"!@#$%^&*()-=_+";
var v=u.getBoundingClientRect().width,y=q.createElement("span");y.className="line";y.style.whiteSpace="pre";r.appendChild(y);y.textContent="H\ne\nll\no";var z=y.getBoundingClientRect().height;r.removeChild(u);r.removeChild(y);return a.defaultCharWidthHeightCache[f]={width:v/92,height:Math.ceil(z/4)}})}},{key:"computeBBoxesOfLines",value:function(b,c,l,a,f,m,q){var r=this;l=void 0===l?0:l;a=void 0===a?0:a;for(var u=this.generateStyleKey(f),v=Array(c.length),y=!0,z=0;z<c.length;z++){var A=!c[z].textAttributes.length&&
this.lineBBoxCache[u+"_"+c[z].text];A&&A.height&&A.width?v[z]=A:y=!1}return y?v:this.withTextLayerNodeDo(b,m,f,u,function(C,G,F){for(var N=Array(c.length),L=Array(c.length),W=0;W<c.length;W++)if(!L[W]){var la=q(c[W]);la.style.display="inline-block";C.appendChild(la);N[W]=la}for(W=0;W<N.length;W++)if(!L[W]){la=N[W];var wa=la.getBoundingClientRect();r.lineBBoxCache[u+"_"+c[W].text]=L[W]={x:wa.left-la.offsetLeft+l-G,y:wa.top-la.offsetTop+a-F,width:wa.width,height:wa.height}}for(G=0;G<N.length;G++)C.removeChild(N[G]);
return L})}},{key:"computeCharBBoxes",value:function(b,c,l,a,f,m,q,r){var u=this;l=void 0===l?0:l;a=void 0===a?0:a;return this.withTextLayerNodeDo(b,m,f,this.generateStyleKey(f),function(v,y,z){var A=q(c);v.appendChild(A);v=1E4<c.stringSize&&sh.charBoundsOfBigMonospacedLine(b,r,c,A,l,a,f,m)||sh.charBoundsOfLine(c,A,l-y,a-z);u.debug||A.parentNode.removeChild(A);return v})}},{key:"withTextLayerNodeDo",value:function(b,c,l,a,f){var m=this.doc,q=this.textlayerNodeCache,r=this.element,u=sh.textlayerNodeForFontMeasure(b);
u||(u=q[a]);if(!u){this.textlayerNodeCacheCount++;u=q[a]=c(l,[]);u.id=a;c=l.width;var v=l.clipMode;l.width||l.clipMode&&"visible"!==l.clipMode?(l=m.createElement("div"),l.style.position="absolute",v&&(l.style.overflow=v),c&&(l.style.width=c+"px"),l.id=a,l.appendChild(u),r.appendChild(l)):r.appendChild(u)}a=b.getGlobalTransform().inverse();b.env.renderer&&b.env.renderer.getNodeForMorph(b)&&(1!=a.getScale()||0!=a.getRotation())&&(a.e=a.f=0,u.style.transform=a.toString());a=u.getBoundingClientRect();
b=a.left;a=a.top;try{return f(u,b,a)}finally{if(u.style.transform="",!this.debug&&this.textlayerNodeCacheCount>this.maxTextlayerNodeCacheCount){f=Math.ceil(this.maxTextlayerNodeCacheCount/2);for(var y;f--&&(y=r.childNodes[0]);)q[y.id]=null,r.removeChild(y);this.textlayerNodeCacheCount-=f}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DOMTextMeasure"}}],h,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:11128,end:19574})})(void 0);sh.GLOBAL="undefined"!==typeof System?System.global:window||global||self||void 0;sh.getComputedFontFamily="function"===typeof sh.GLOBAL.getComputedStyle?function(e){return sh.GLOBAL.getComputedStyle(e).fontFamily}:function(){return""};sh.getComputedMarginLeft="function"===typeof sh.GLOBAL.getComputedStyle?function(e){return parseInt(sh.GLOBAL.getComputedStyle(e).marginLeft)||
0}:function(){return 0};sh.default=R1;var Qh=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js");Qh.signalBindings=function(e,h,n){if(e=e.attributeConnections){e=e.slice();for(var b=0;b<e.length;b++)e[b].sourceAttrName===h&&e[b].update(n)}};Qh.informMorph=function(e,h,n){try{n.onChange(h);Qh.signalBindings(n,"change",h);for(var b=n.owner;b;)b.onSubmorphChange(h,n),b=b.owner}catch(c){console.error("Error in informMorph: "+c.stack)}};Qh.arr=Te;Qh.string=Hg;Qh.obj=lf;Qh.connect=uk;Qh.signal=
hk;Qh.disconnect=Sp;(function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=h.hasOwnProperty("Change")&&"function"===typeof h.Change?h.Change:h.Change=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.target=b;this.group=null}},{key:"type",get:function(){return"abstract change"}},{key:"apply",value:function(){throw Error("Not yet implemented");
}},{key:"reverseApply",value:function(){throw Error("Not yet implemented");}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Change"}}],h,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:769,end:1025})})(void 0);var SP=function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),
n=h.hasOwnProperty("GroupChange")&&"function"===typeof h.GroupChange?h.GroupChange:h.GroupChange=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Nb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.changes=[]}},{key:"consumesChanges",value:function(){return!0}},{key:"addChange",value:function(b){this.changes.push(b);
b.group=this}},{key:"apply",value:function(){this.changes.slice().forEach(function(b){return b.apply()});return this}},{key:"reverseApply",value:function(){this.changes.slice().reverse().forEach(function(b){return b.reverseApply()});return this}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GroupChange"}}],h,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1034,end:1463})}(Qh.Change);Qh.GroupChange=SP;Qh.GroupChange=SP;Qh.GroupChange=SP;var TP=function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=h.hasOwnProperty("ValueChange")&&"function"===typeof h.ValueChange?h.ValueChange:h.ValueChange=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:"type",get:function(){return"setter"}},
{key:Symbol.for("lively-instance-initialize"),value:function(b,c,l,a){Nb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.prop=c;this.value=l;this.prevValue=null;this.meta=a}},{key:"apply",value:function(){this.target[this.prop]=this.value}},{key:"reverseApply",value:function(){this.target[this.prop]=this.prevValue}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ValueChange"}}],h,{pathInPackage:function(){return"changes.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1472,end:1893})}(Qh.Change);Qh.ValueChange=TP;Qh.ValueChange=TP;Qh.ValueChange=TP;var UP=function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=h.hasOwnProperty("MethodCallChange")&&"function"===typeof h.MethodCallChange?h.MethodCallChange:h.MethodCallChange=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:"type",get:function(){return"method-call"}},{key:Symbol.for("lively-instance-initialize"),value:function(b,c,l,a,f){Nb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.selector=c;this.args=l;this.undo=a;this.meta=f}},{key:"apply",value:function(){var b=this.target;b[this.selector].apply(b,this.args)}},
{key:"reverseApply",value:function(){if(this.undo)if("function"===typeof this.undo)this.undo();else{var b=this.undo,c=b.target;c[b.selector].apply(c,b.args)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MethodCallChange"}}],h,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1902,end:2486})}(Qh.GroupChange);Qh.MethodCallChange=UP;Qh.MethodCallChange=UP;Qh.MethodCallChange=UP;var eJ=function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=h.hasOwnProperty("ChangeManager")&&"function"===typeof h.ChangeManager?h.ChangeManager:h.ChangeManager=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},
{key:"reset",value:function(){this.changes=[];this.changeRecordedListeners=[];this.revision=0;this.changeRecordersPerMorph=new WeakMap;this.changeRecorders={};this.changeGroupStack=[];this.defaultMeta={};this.metaStack=[]}},{key:"changesFor",value:function(b){return this.changes.filter(function(c){return c.target===b})}},{key:"apply",value:function(b,c){c.apply()}},{key:"doWithValueChangeMeta",value:function(b,c,l){this.defaultMeta=b;this.metaStack.push(b);b=l(c);this.metaStack.pop();this.defaultMeta=
Qh.arr.last(this.metaStack)||{};return b}},{key:"addValueChange",value:function(b,c,l,a){c=new Qh.ValueChange(b,c,l,Object.assign({},this.defaultMeta,{},a));return this._record(b,c)}},{key:"addMethodCallChangeDoing",value:function(b,c,l){var a=b.target,f=b.selector,m=b.args;(b=b.undo)||(b=function(){return console.warn("No undo recorded for "+a+"."+f)});m=new Qh.MethodCallChange(a,f,m,b,this.defaultMeta);c.groupChangesWhile(m,l);return m}},{key:"_record",value:function(b,c){Qh.signal(this,"changeRecorded",
c);c.hasOwnProperty("value")&&(c.prevValue=b._morphicState[c.prop],b._morphicState[c.prop]=c.value);b.makeDirty(c);var l=Qh.arr.last(this.changeGroupStack);l&&l.consumesChanges()?l.addChange(c):(this.changes.push(c),b._rev=++this.revision,this.informChangeListeners(c));Qh.informMorph(this,c,b);return c}},{key:"groupChangesWhile",value:function(b,c,l,a){a=void 0===a?!0:a;c||(c=new Qh.GroupChange(b));this.changeGroupStack.push(c);try{return l(),Qh.arr.remove(this.changeGroupStack,c),a?this._record(b,
c):c}catch(f){throw Qh.arr.remove(this.changeGroupStack,c),f;}}},{key:"dontRecordChangesWhile",value:function(b,c){return this.groupChangesWhile(b,void 0,c,!1)}},{key:"recordChangesWhile",value:function(b,c){var l=this.changes.length;b();b=this.changes.slice(l,this.changes.length);return c?b.filter(c):b}},{key:"addChangeListener",value:function(b){Qh.arr.pushIfNotIncluded(this.changeRecordedListeners,b)}},{key:"removeChangeListener",value:function(b){Qh.arr.remove(this.changeRecordedListeners,b)}},
{key:"informChangeListeners",value:function(b){this.changeRecordedListeners.forEach(function(c){return c(b)})}},{key:"recordChangesStart",value:function(b,c){c=Qh.obj.newKeyIn(this.changeRecorders,(void 0===c?"":c)+"__change_recorder_"+Date.now());var l=b?function(f){return b(f)&&a.changes.push(f)}:function(f){return a.changes.push(f)},a=this.changeRecorders[c]={id:c,filter:b,changes:[],listener:l};this.addChangeListener(l);return a}},{key:"recordChangesStop",value:function(b){if(!(b in this.changeRecorders))return[];
var c=this.changeRecorders[b],l=c.changes;c=c.listener;delete this.changeRecorders[b];this.removeChangeListener(c);return l}},{key:"recordChangesStartForMorph",value:function(b,c){c=this.recordChangesStart(c,b.id);var l=this.changeRecordersPerMorph.get(b);l||(l=[],this.changeRecordersPerMorph.set(b,l));l.push(c.id);return c}},{key:"recordChangesStopForMorph",value:function(b,c){var l=this.changeRecordersPerMorph.get(b);if(!l||!l.length)return console.warn("Cannot endMorphChangeRecorder for morph "+
b+": recorder not found"),[];(b=c)?Qh.arr.remove(l,b):b=l.pop();return this.recordChangesStop(b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ChangeManager"}}],h,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2495,end:7573})}(void 0);Qh.ChangeManager=eJ;Qh.ChangeManager=
eJ;Qh.ChangeManager=eJ;var Bl=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js");Bl.printArg=function(e){return Bl.obj.inspect(e,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};Bl.obj=lf;Bl.arr=Te;Bl.events=Ly;Bl.fun=Xk;(function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=h.hasOwnProperty("Undo")&&"function"===typeof h.Undo?h.Undo:h.Undo=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b,c,l){c=void 0===c?[]:c;this.name=b;this.targets=c;this.timestamp=this.changes=this.recorder=null;this.no=void 0===l?0:l}},{key:"recorded",value:function(){return!!this.changes}},{key:"isRecording",value:function(){return!!this.recorder}},{key:"startRecording",value:function(b){var c=this;if(this.recorded()||this.isRecording())throw Error("Undo already recorded / recording");if(!this.targets.length)throw Error("Undo has no target morphs");
this.timestamp=Date.now();this.recorder=this.targets[0].recordChangesStart(function(l){var a=l.target;return a.isUsedAsEpiMorph()||!c.targets.some(function(f){return f===a||f.isAncestorOf(a)})?!1:"function"===typeof b?b(l):!0});return this}},{key:"stopRecording",value:function(){var b=this.recorder.id;this.changes=$jscomp.makeIterator(this.targets).next().value.recordChangesStop(b);this.recorder=this.targets=null}},{key:"apply",value:function(){if(!this.recorded())throw Error("Cannot apply undo that has no changes recorded yet");
this.changes.slice().forEach(function(b){return b.apply()});return this}},{key:"reverseApply",value:function(){if(!this.recorded())throw Error("Cannot reverseApply undo that has no changes recorded yet");this.changes.slice().reverse().forEach(function(b){return b.reverseApply()});return this}},{key:"addTarget",value:function(b){Bl.arr.pushIfNotIncluded(this.targets,b)}},{key:"addUndos",value:function(b){b=Bl.arr.sortBy(b.concat(this).filter(function(c){return c.recorded()}),function(c){return c.no});
b.length&&(this.changes=Bl.arr.flatmap(b,function(c){return c.changes}),this.timestamp=b[0].timestamp,this.no=b[0].no,this.name=b.map(function(c){return c.name}).join("-"))}},{key:"toString",value:function(){var b=this.name,c=this.changes,l=this.no,a=this.isRecording();c=c.length?"\n  "+c.map(function(f){var m=f.selector,q=f.args,r=f.prop,u=f.value;f=f.target;return m?f+"."+m+"("+q.map(Bl.printArg)+")":f+"."+r+" = "+Bl.printArg(u)}).join("\n  "):"no changes";return"Undo("+l+":"+b+" "+(a?"RECORDING ":
"")+c+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Undo"}}],h,{pathInPackage:function(){return"undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:54,end:2498})})(void 0);var iE=function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=h.hasOwnProperty("UndoManager")&&"function"===
typeof h.UndoManager?h.UndoManager:h.UndoManager=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.reset();this.filter=b}},{key:"reset",value:function(){this.undos=[];this.redos=[];this.undoInProgress=null;this.counter=this.applyCount=0;this.grouping={current:[],debounce:null,debouncedCanceled:!1,debounceTime:31}}},{key:"group",value:function(b){b=
void 0===b?null:b;this.groupLaterCancel();b&&this.undos.includes(b)&&(this.grouping.current=Bl.arr.uniq(this.undos.slice(this.undos.indexOf(b)).concat(this.grouping.current)));this.grouping.current.length&&(b=this.grouping.current.slice(1),this.grouping.current[0].addUndos(b),this.undos=Bl.arr.withoutAll(this.undos,b),this.grouping.current=[])}},{key:"ensureNewGroup",value:function(b,c){c=void 0===c?"new undo group":c;this.group();this.undoStart(b,c);return this.undoStop()}},{key:"groupLaterCancel",
value:function(){var b=this.grouping;b.debounce&&(b.debouncedCanceled=!0,this.grouping=Object.assign({},b,{debounce:null,debouncedCanceled:!1}))}},{key:"groupLater",value:function(b){var c=this,l=this.grouping;(l.debounce||(l.debounce=Bl.fun.debounce(b||l.debounceTime,function(){l.debounce=null;l.debouncedCanceled||c.group()})))()}},{key:"undoStart",value:function(b,c){if(!this.applyCount)if(this.undoInProgress)console.warn("There is already an undo recorded");else return this.undoInProgress=(new Bl.Undo(c,
[b],this.counter++)).startRecording(this.filter)}},{key:"undoStop",value:function(){var b=this.undoInProgress;if(!b)return null;b.stopRecording();this.undoInProgress=null;this.undos.push(b);this.grouping.current.push(b);this.redos.length&&(this.redos.length=0);return b}},{key:"undo",value:function(){this.undoStop();var b=this.undos.pop();if(b){Bl.arr.remove(this.grouping.current,b);this.redos.unshift(b);this.applyCount++;try{b.reverseApply()}finally{this.applyCount--}return b}}},{key:"redo",value:function(){this.undoStop();
var b=this.redos.shift();if(b){this.undos.push(b);this.applyCount++;try{b.apply()}finally{this.applyCount--}return b}}},{key:"toString",value:function(){var b=0===this.undos.length?"":"\n  "+(20<this.undos.length?"...\n  ":"")+this.undos.slice(-20).join("\n  ");return"UndoManager("+this.undos.length+" undos, "+this.redos.length+" redos, "+(this.undoInProgress?", UNDO IN PROGRESS":"")+b+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"UndoManager"}}],h,{pathInPackage:function(){return"undo.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2633,end:5684})}(void 0);Bl.UndoManager=iE;Bl.UndoManager=iE;Bl.UndoManager=iE;var dm=lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js");dm.promise=Kf;dm.bowser=tq;dm.touchInputDevice=qp;dm.placeholderValue="\u0001\u0001";dm.placeholderRe=/\u0001/g;var S1=function(e){var h=
lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js"),n=h.hasOwnProperty("TextInput")&&"function"===typeof h.TextInput?h.TextInput:h.TextInput=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.eventDispatcher=b;this.domState={rootNode:null,textareaNode:null,eventHandlers:[],isInstalled:!1};this.inputState={composition:null,
manualCopy:null,manualPaste:null,positionChangedTime:0,scrollLeftWhenChanged:0,scrollTopWhenChanged:0}}},{key:"install",value:function(b,c){var l=this,a=this.domState,f=a.isInstalled,m=a.rootNode;this.world=c;if(f){if(m===b)return;this.uninstall()}a.isInstalled=!0;a.rootNode=b;b.tabIndex=1;c=a.textareaNode=b.ownerDocument.createElement("textarea");c.setAttribute("style","\n      position: absolute;\n      /*extent cannot be 0, input won't work correctly in Chrome 52.0*/\n      width: 20px; height: 20px;\n      z-index: 0;\n      opacity: 1;\n      background: transparent;\n      -moz-appearance: none;\n      appearance: none;\n      border: none;\n      resize: none;\n      outline: none;\n      overflow: hidden;\n      font: inherit;\n      padding: 0 1px;\n      margin: 0 -1px;\n      text-indent: -1em;\n      -ms-user-select: text;\n      -moz-user-select: text;\n      -webkit-user-select: text;\n      user-select: text;\n      /*with pre-line chrome inserts &nbsp; instead of space*/\n      white-space: pre!important;");
dm.touchInputDevice&&c.setAttribute("x-palm-disable-auto-cap",!0);c.setAttribute("wrap","off");c.setAttribute("autocorrect","off");c.setAttribute("autocapitalize","off");c.setAttribute("spellcheck",!1);c.setAttribute("aria-label","Lively Textinput Node");c.className="lively-text-input";c.value="";b.insertBefore(c,b.firstChild);dm.touchInputDevice&&(c.setAttribute("disabled",!0),c.style.setProperty("transform","scale(0)"));a.eventHandlers=[{type:"focusin",node:b,fn:function(q){return l.onRootNodeFocus(q)},
capturing:!0},{type:"focusin",node:a.textareaNode,fn:function(q){return l.onTextAreaFocus(q)},capturing:!0},{type:"blur",node:a.textareaNode,fn:function(q){return l.onTextAreaBlur(q)},capturing:!0},{type:"keydown",node:a.textareaNode,fn:function(q){return l.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"keyup",node:a.textareaNode,fn:function(q){return l.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"cut",node:a.textareaNode,fn:function(q){return l.eventDispatcher.dispatchDOMEvent(q)},
capturing:!1},{type:"copy",node:a.textareaNode,fn:function(q){return l.inputState.manualCopy?l.inputState.manualCopy.onEvent(q):l.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"paste",node:a.textareaNode,fn:function(q){return l.inputState.manualPaste?l.inputState.manualPaste.onEvent(q):l.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"compositionstart",node:a.textareaNode,fn:function(q){return l.onCompositionStart(q)},capturing:!1},{type:"compositionend",node:a.textareaNode,fn:function(q){return l.onCompositionEnd(q)},
capturing:!1},{type:"compositionupdate",node:a.textareaNode,fn:function(q){return l.onCompositionUpdate(q)},capturing:!1},{type:"input",node:a.textareaNode,fn:function(q){return l.onInput(q)},capturing:!1}];a.eventHandlers.forEach(function(q){return q.node.addEventListener(q.type,q.fn,q.capturing)});return this}},{key:"uninstall",value:function(){var b=this.domState;b.isInstalled=!1;b.eventHandlers.forEach(function(l){return l.node.removeEventListener(l.type,l.fn,l.capturing)});var c=b.textareaNode;
c&&c.parentNode&&c.parentNode.removeChild(c);b.rootNode=null;return this}},{key:"resetValue",value:function(){var b=this.domState.textareaNode;b&&(b.value=dm.placeholderValue)}},{key:"readValue",value:function(){var b=this.domState.textareaNode;return b?b.value.replace(dm.placeholderRe,""):""}},{key:"focus",value:function(b,c){var l=this.domState.textareaNode;l&&(dm.touchInputDevice&&b&&b.isText&&!b.readOnly&&l.removeAttribute("disabled"),b&&b.stealFocus||l.ownerDocument.activeElement!==l&&l.focus(),
dm.bowser.firefox&&Promise.resolve().then(function(){return l.ownerDocument.activeElement!==l&&l.focus()}),b&&b.isText&&b.focusable?(dm.touchInputDevice&&l.focus(),this.ensureBeingAtCursorOfText(b)):c&&this.ensureBeingInVisibleBoundsOfWorld(c))}},{key:"blur",value:function(){var b=this.domState.textareaNode;dm.touchInputDevice&&b.setAttribute("disabled",!0);b&&b.blur()}},{key:"doCopyWithMimeTypes",value:function(b){var c=this;return this.execCommand("manualCopy",function(){var l=c.domState.textareaNode,
a=function(f){l.removeEventListener("copy",a);f.preventDefault();b.forEach(function(m){return f.clipboardData.setData(m.type,m.data)})};setTimeout(function(){return l.removeEventListener("copy",a)},300);l.addEventListener("copy",a);l.value="";l.select();l.ownerDocument.execCommand("copy")})}},{key:"doCopy",value:function(b){var c=this;return this.execCommand("manualCopy",function(){var l=c.domState.textareaNode;l.value=b;l.select();l.ownerDocument.execCommand("copy")})}},{key:"doPaste",value:function(){var b=
this;return this.execCommand("manualPaste",function(){var c=b.domState.textareaNode;c.value="";c.select();c.ownerDocument.execCommand("paste")})}},{key:"execCommand",value:function(b,c){var l=this,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:if(!l.domState.isInstalled)throw Error("Cannot copy to clipboard \u2013 input helper is not installed into DOM!");a=l.inputState;if(!a[b]){r.jumpTo(2);break}r.setCatchFinallyBlocks(3);return r.yield(a[b].promise,
5);case 5:r.leaveTryBlock(2);break;case 3:r.enterCatchBlock();case 2:return f=dm.promise.deferred(),m=!1,a[b]={onEvent:function(u){m||(a[b]=null,m=!0,f.resolve(u))},promise:f.promise},c(),r.setCatchFinallyBlocks(6),r.yield(dm.promise.waitFor(1E3,function(){return m}),8);case 8:r.leaveTryBlock(7);break;case 6:q=r.enterCatchBlock(),a[b]=null,m=!0,f.reject(q);case 7:return r.return(f.promise)}})}},{key:"onTextAreaBlur",value:function(b){var c=this;setTimeout(function(){var l=c.domState||{},a=l.textareaNode;
l=l.rootNode;!l||document.activeElement!==l||c.world.focusedMorph&&c.world.focusedMorph.stealFocus||dm.touchInputDevice||lively.FreezerRuntime||a&&a.focus()})}},{key:"onTextAreaFocus",value:function(b){}},{key:"onRootNodeFocus",value:function(b){var c=this.domState||{},l=c.rootNode;if(b.target===c.textareaNode||b.target===l)this.world.focusedMorph&&this.world.focusedMorph.stealFocus||this.focus();this.inputState.composition=null}},{key:"onInput",value:function(b){if(!this.inputState.composition){if(!b.data){var c=
this.readValue();b.__defineGetter__("data",function(){return c})}this.resetValue();this.eventDispatcher.dispatchDOMEvent(b)}}},{key:"onCompositionStart",value:function(b){this.inputState.composition={};this.eventDispatcher.dispatchDOMEvent(b)}},{key:"onCompositionUpdate",value:function(b){var c=this.inputState.composition,l=this.readValue();c.lastValue!==l&&(c.lastValue=l,this.eventDispatcher.dispatchDOMEvent(b))}},{key:"onCompositionEnd",value:function(b){this.inputState.composition=null;this.eventDispatcher.dispatchDOMEvent(b)}},
{key:"setPosition",value:function(b){var c=(this.domState||{}).textareaNode;c&&(c.style.left=b.x+"px",c.style.top=b.y+"px")}},{key:"ensureBeingInVisibleBoundsOfWorld",value:function(b){this.setPosition(b.visibleBounds().center())}},{key:"ensureBeingAtCursorOfText",value:function(b){var c=b.world();if(c){var l=b.whatsVisible,a=b.cursorPosition,f=a.row;a=a.column;f=Math.max(l.startRow,Math.min(f,l.endRow));l=b.charBoundsFromTextPosition({row:f,column:a}).topLeft();b=c.visibleBounds().insetBy(10).constrainPt(b.worldPoint(l.subPt(b.scroll)));
this.inputState.positionChangedTime=Date.now();this.inputState.scrollLeftWhenChanged=document.documentElement.scrollLeft;this.inputState.scrollTopWhenChanged=document.documentElement.scrollTop;this.setPosition(b)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextInput"}}],h,{pathInPackage:function(){return"events/TextInput.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:237,end:12306})}(void 0),Efa=S1=dm.TextInput;dm.default=S1;var VP=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js");VP.arr=Te;var T1=function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js"),n=h.hasOwnProperty("KillRing")&&"function"===typeof h.KillRing?h.KillRing:h.KillRing=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),
value:function(b){this.size=void 0===b?0:b;this.buffer=[];this.pointer=-1}},{key:"isCycling",value:function(){return this.pointer!==this.buffer.length-1}},{key:"add",value:function(b){var c=this.buffer;c.push(b);this.size&&c.length>this.size&&c.splice(0,c.length-this.size);this.pointer=this.buffer.length-1;return b}},{key:"yank",value:function(){return this.buffer[this.pointer]||""}},{key:"back",value:function(){this.pointer=(0>=this.pointer?this.buffer.length:this.pointer)-1;return this.yank()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KillRing"}}],h,{pathInPackage:function(){return"events/KillRing.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:51,end:621})}(void 0),Ffa=T1=VP.KillRing;VP.default=T1;var bh=lively.FreezerRuntime.recorderFor("lively.morphic/events/Keys.js");bh.computeHashIdOfEvent=function(e){var h=
e.key;e=0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0);0===e&&!bh.canonicalizeFunctionKey(h)&&h&&bh.letterRe.test(h)&&(e=-1);return e};bh.isModifier=function(e){if(bh.isNumber(e))return!1;e=e.replace(/-$/,"").toLowerCase();return bh.arr.withoutAll(Object.keys(bh.KEY_MODS),["","input-"]).includes(e)};bh.canonicalizeFunctionKey=function(e){e=e.toLowerCase();switch(e){case "space":e="space";break;case "esc":e="escape";break;case "return":e="enter";break;case "arrowleft":e="left";break;
case "arrowright":e="right";break;case "arrowup":e="up";break;case "arrowdown":e="down";break;case "esc":e="escape";break;case "return":e="enter"}return bh.FUNCTION_KEYS.includes(e)?bh.string.capitalize(e):""};bh.decodeKeyIdentifier=function(e,h){var n=/u\+?([\d\w]{4})/gi,b=function(c,l){return String.fromCharCode(parseInt(l,16))};e=e&&e.replace(n,b);if("Command"===e||"Cmd"===e)e="Meta";" "===e&&(e="Space");8===h&&(e="Backspace");return e};bh.identifyKeyFromCode=function(e){e=e.code;if("string"!==
typeof e)return null;if(e.startsWith("Key"))return e.slice(3);if(e.startsWith("Numpad"))return e;if(e.startsWith("Digit")||e.startsWith("Arrow"))return e.slice(5);if(e.match(/^F[0-9]{1-2}$/))return e;switch(e){case "Insert":case "Home":case "PageUp":case "PageDown":return e;case "Period":return".";case "Comma":return",";case "Help":return"Insert";case "Equal":return"=";case "Backslash":case "IntlBackslash":return"\\";case "Equal":return"=";case "Minus":return"-";case "BracketRight":return"]";case "BracketLeft":return"[";
case "Quote":return"'";case "Backquote":return"`";case "Semicolon":return";"}return null};bh.dedasherize=function(e){for(var h=[];;){var n=e.indexOf("-");if(-1===n)return e&&h.push(e),h;0===n?(h.push(e[0]),e=e.slice(2)):(h.push(e.slice(0,n)),e=e.slice(n+1))}};bh.bowser=tq;bh.arr=Te;bh.string=Hg;bh.letterRe=/[a-z]/i;bh.MODIFIER_KEYS={16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"};bh.KEY_MODS=function(){for(var e={control:1,ctrl:1,alt:2,option:2,shift:4,super:8,win:8,meta:8,command:8,cmd:8},h=["alt","ctrl",
"meta","shift"],n=Math.pow(2,h.length);n--;)e[n]=h.filter(function(b){return n&e[b]}).join("-")+"-";e[0]="";e[-1]="input-";return e}();bh.isNumber=function(){var e=/^[0-9]+$/;return function(h){return e.test(h)}}();bh.FUNCTION_KEYS="backspace;tab;enter;pause;escape; ;pageup;pagedown;end;home;left;up;right;down;print;insert;delete;numpad0;numpad1;numpad2;numpad3;numpad4;numpad5;numpad6;numpad7;numpad8;numpad9;numpadenter;f1;f2;f3;f4;f5;f6;f7;f8;f9;f10;f11;f12;numlock;scrolllock".split(";");bh.Keys=
{computeHashIdOfEvent:bh.computeHashIdOfEvent,keyComboToEventSpec:function(e,h){h=Object.assign({_isLivelyKeyEventSpec:!0,keyCombo:"",key:"",ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,isFunctionKey:!1,isModified:!1,onlyModifiers:!1},h);var n=bh.dedasherize(e),b={shift:"shiftKey",control:"ctrlKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey",command:"metaKey",cmd:"metaKey"};if("input"===n[0]&&2===n.length)return h.keyCombo=e,h.key=n[1],h;for(var c=n.length-1;0<=c;c--){var l=b[n[c].toLowerCase()];
l&&(n.splice(c,1),h.isModified=!0,h[l]=!0)}if(!n.length)return h.keyCombo=bh.Keys.eventToKeyCombo(h),h.key=bh.arr.last(bh.dedasherize(h.keyCombo)),h.onlyModifiers=!0,h;1<n.length&&console.warn('Strange key "'+e+'" encountered in keyComboToEventSpec, parsing probably failed');e=bh.arr.last(n);(n=bh.canonicalizeFunctionKey(e))?(h.isFunctionKey=!0,h.key=n):h.key=h.isModified?bh.string.capitalize(e):e;h.keyCombo=bh.Keys.eventToKeyCombo(h);return h},eventToKeyCombo:function(e,h){Object.assign({ignoreModifiersIfNoCombo:!1,
ignoreKeys:[]},h);h=e.key;var n=e.data,b=e.keyIdentifier;if("string"===typeof n)return"input-"+n;if(!h&&b&&(h=bh.decodeKeyIdentifier(b,e.which||e.keyCode),e.key=h=h[e.shiftKey?"toUpperCase":"toLowerCase"](),bh.isModifier(h)))return bh.string.capitalize(h);n=bh.KEY_MODS[bh.computeHashIdOfEvent(e)];if("input-"===n)return n+h;e.code&&(h=bh.identifyKeyFromCode(e)||h);e=!h||bh.isModifier(h)?n.replace(/-$/,""):n+h;e.match(/\s$/)&&(e=e.replace(/\s$/,"Space"));return e.replace(/(^|-)([a-z])/g,function(c,
l,a){return l+a.toUpperCase()})},canonicalizeKeyCombo:function(e){return bh.Keys.eventToKeyCombo(bh.Keys.keyComboToEventSpec(e))},canonicalizeEvent:function(e){return e._isLivelyKeyEventSpec?e:bh.Keys.keyComboToEventSpec(bh.Keys.eventToKeyCombo(e))}};var WP=bh.Keys;bh.default=WP;var ch=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js");ch.bowser=tq;ch.obj=lf;ch.pt=fh;ch.Keys=WP;ch.cumulativeOffset=Ts;var XP="pointerover pointerenter pointerout pointerleave pointerdown pointermove pointerup pointercancel gotpointercapture lostpointercapture".split(" ");
ch.pointerEvents=XP;ch.pointerEvents=XP;ch.pointerEvents=XP;var YP="mouseover mouseenter mousedown mousemove mouseup mouseout mouseleave click dblclick contextmenu mousewheel".split(" ");ch.mouseEvents=YP;ch.mouseEvents=YP;ch.mouseEvents=YP;var ZP=["keydown","keyup","keypress"];ch.keyboardEvents=ZP;ch.keyboardEvents=ZP;ch.keyboardEvents=ZP;var fJ=ch.keyboardEvents.concat("input","compositionstart","compositionupdate","compositionend");ch.keyLikeEvents=fJ;ch.keyLikeEvents=fJ;ch.keyLikeEvents=fJ;var gJ=
function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=h.hasOwnProperty("Event")&&"function"===typeof h.Event?h.Event:h.Event=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b,c,l,a,f,m,q){this.type=b;this.domEvt=c;this.dispatcher=l;this.targetMorphs=a;this.hand=f;this.halo=m;this.layoutHalo=q;this.stopped=!1;this._keyCombo=
void 0;this.onDispatchCallbacks=[];this.onAfterDispatchCallbacks=[];this.onStopCallbacks=[]}},{key:"onDispatch",value:function(b){this.onDispatchCallbacks.push(b);return this}},{key:"onAfterDispatch",value:function(b){this.onAfterDispatchCallbacks.push(b);return this}},{key:"onStop",value:function(b){this.onStopCallbacks.push(b);return this}},{key:"data",get:function(){return this.domEvt.data}},{key:"world",get:function(){return this.dispatcher.world}},{key:"state",get:function(){return this.dispatcher.eventState}},
{key:"keyInputState",get:function(){return this.state.keyInputState}},{key:"isMouseEvent",value:function(){return ch.pointerEvents.includes(this.type)||ch.mouseEvents.includes(this.type)}},{key:"isKeyboardEvent",value:function(){return!this.isMouseEvent()&&ch.keyboardEvents.includes(this.type)}},{key:"stop",value:function(){this.stopped=!0;this.domEvt&&"function"===typeof this.domEvt.stopPropagation&&this.domEvt.stopPropagation();this.domEvt&&"function"===typeof this.domEvt.preventDefault&&this.domEvt.preventDefault();
this.onStopCallbacks.forEach(function(b){return b()})}},{key:"targetMorph",get:function(){return this.targetMorphs[0]}},{key:"timestamp",get:function(){return this.domEvt.timeStamp}},{key:"position",get:function(){if(!this.domEvt)return ch.pt(0,0);for(var b=this.domEvt.target;b&&b.id!==this.world.id;)b=b.parentNode;b||(b=this.domEvt.target,b=(b.nodeType===b.DOCUMENT_NODE?b:b.ownerDocument).getElementById(this.world.id));if(!b)return console.error("event position: cannot find world node for determining the position!"),
ch.pt(0,0);b=ch.cumulativeOffset(b);var c=this.domEvt;b=ch.pt((c.pageX||0)-b.left,(c.pageY||0)-b.top);1!==this.world.scale&&(b=b.scaleBy(1/this.world.scale));return b}},{key:"startPosition",get:function(){return this.state.clickedOnPosition}},{key:"pressure",get:function(){return this.domEvt?this.domEvt.pressure:.5}},{key:"positionIn",value:function(b){return b.localize(this.position)}},{key:"isClickTarget",value:function(b){var c=this.state.clickedOnMorph;return c&&(b===c||b.isAncestorOf(c))}},{key:"leftMouseButtonPressed",
value:function(){return this.domEvt?(this.domEvt.buttons||0)&1:!1}},{key:"rightMouseButtonPressed",value:function(){return 3===this.domEvt.which||2===this.domEvt.buttons}},{key:"middleMouseButtonPressed",value:function(){return this.domEvt?(this.domEvt.buttons||0)&4:!1}},{key:"isCommandKey",value:function(){var b=this.domEvt;if(!b)return!1;var c=!1;ch.bowser.mac||(c=c||b.ctrlKey);if(ch.bowser.tablet||ch.bowser.tablet)c=c||!1;return c||b.metaKey||"Meta"===b.keyIdentifier}},{key:"isShiftDown",value:function(){return this.domEvt&&
!!this.domEvt.shiftKey}},{key:"isCtrlDown",value:function(){return this.domEvt&&!!this.domEvt.ctrlKey}},{key:"isAltDown",value:function(){return this.domEvt&&!!this.domEvt.altKey}},{key:"keyCombo",get:function(){return this._keyCombo||(this._keyCombo=ch.Keys.eventToKeyCombo(this.domEvt))}},{key:"keyCombo",set:function(b){return this._keyCombo=b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Event"}}],h,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:957,end:5006})}(void 0);ch.Event=gJ;ch.Event=gJ;ch.Event=gJ;var hJ=function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=h.hasOwnProperty("KeyEvent")&&"function"===typeof h.KeyEvent?h.KeyEvent:h.KeyEvent=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b,c,l,a,f,m,q){console.assert(ch.keyLikeEvents.includes(b),"not a keyboard event: "+b);Nb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b,c,l,a,f,m,q);Object.assign(this,ch.Keys.canonicalizeEvent(c))}},{key:"isKeyEvent",get:function(){return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KeyEvent"}}],h,{pathInPackage:function(){return"events/Event.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5015,end:5385})}(ch.Event);ch.KeyEvent=hJ;ch.KeyEvent=hJ;ch.KeyEvent=hJ;var iJ=function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=h.hasOwnProperty("SimulatedDOMEvent")&&"function"===typeof h.SimulatedDOMEvent?h.SimulatedDOMEvent:h.SimulatedDOMEvent=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;if(b.position){var c=b.position,l=c.x;c=c.y;b=ch.obj.dissoc(b,["position"]);b.pageX=l;b.pageY=c}!b.hasOwnProperty("pointerId")&&ch.mouseEvents.concat(ch.pointerEvents).includes(b.type)&&(b=Object.assign({},b,{pointerId:1}));Object.assign(this,Object.assign({type:void 0,target:void 0,
pageX:void 0,pageY:void 0,pointerId:void 0,pointerType:"mouse",buttons:0,keyCode:void 0,keyString:"",keyIdentifier:void 0,altKey:!1,ctrlKey:!1,shiftKey:!1,metaKey:!1,stopped:!1},b))}},{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SimulatedDOMEvent"}}],h,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5394,end:6299})}(void 0);ch.SimulatedDOMEvent=iJ;ch.SimulatedDOMEvent=iJ;ch.SimulatedDOMEvent=iJ;var ze=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js");ze.dragStartEvent=function(e,h,n,b,c,l,a){var f=(new ze.Event("morphicdragstart",e,h,[n],c,l,a)).onDispatch(function(){b.draggedMorph=n;b.dragStartMorphPosition=n.position;b.dragStartPosition=
f.position;b.lastDragPosition=f.position;b.dragDelta=ze.pt(0,0);b.absDragDelta=ze.pt(0,0)}).onStop(function(){b.draggedMorph=null;h.schedule(ze.dragEndEvent(e,h,n,b,c,l,a))});return f};ze.dragEvent=function(e,h,n,b,c,l,a){var f=(new ze.Event("morphicdrag",e,h,[b.draggedMorph],c,l,a)).onDispatch(function(){b.dragDelta=(b.draggedMorph.owner||h.world).getInverseTransform().transformDirection(f.position.subPt(b.lastDragPosition));b.absDragDelta=f.position.subPt(b.clickedOnPosition)}).onAfterDispatch(function(){return b.lastDragPosition=
f.position}).onStop(function(){b.draggedMorph=null;h.schedule(ze.dragEndEvent(e,h,n,b,c,l,a))});return f};ze.dragEndEvent=function(e,h,n,b,c,l,a){var f=b.draggedMorph||n,m=(new ze.Event("morphicdragend",e,h,[f],c,l,a)).onDispatch(function(){b.dragDelta=(f.owner||h.world).getInverseTransform().transformDirection(m.position.subPt(b.lastDragPosition));b.absDragDelta=m.position.subPt(b.clickedOnPosition)}).onAfterDispatch(function(){b.draggedMorph=null;b.lastDragPosition=null;b.dragDelta=ze.pt(0,0);b.absDragDelta=
ze.pt(0,0);b.dragStartMorphPosition=null;b.dragStartPosition=null});return m};ze.focusEvents=function(e,h){var n=e.eventState;if(n.focusedMorph===h)return[];e=[];n.focusedMorph&&e.push((new ze.Event("blur",null,this,[n.focusedMorph],null,null,null)).onDispatch(function(){return n.focusedMorph=null}));e.push((new ze.Event("focus",null,this,[h],null,null,null)).onDispatch(function(){return n.focusedMorph=h}));return e};ze.arr=Te;ze.fun=Xk;ze.Path=Xg;ze.promise=Kf;ze.pt=fh;ze.config=nk;ze.TextInput=
Efa;ze.KillRing=Ffa;ze.Event=gJ;ze.KeyEvent=hJ;ze.SimulatedDOMEvent=iJ;ze.keyLikeEvents=fJ;ze.cumulativeOffset=Ts;ze.bowser=tq;ze.domEventsWeListenTo=[{type:"pointerdown",capturing:!1},{type:"pointerup",capturing:!1},{type:"pointermove",capturing:!1,passive:!1},{type:"pointerover",capturing:!1,passive:!1},{type:"pointerout",capturing:!1,passive:!1},{type:"contextmenu",capturing:!1},{type:"scroll",capturing:!0,passive:!1},{type:"drag",capturing:!1},{type:"dragstart",capturing:!1},{type:"dragend",capturing:!1},
{type:"dragover",capturing:!1},{type:"dragenter",capturing:!1},{type:"dragleave",capturing:!1},{type:"drop",capturing:!1}];ze.eventsCausingImmediateRender=new Set(["pointerdown","pointerup","keydown","keyup","input"]);ze.globalDomEventsWeListenTo=[{type:"resize",capturing:!1,morphMethod:"onWindowResize"},{type:"orientationchange",capturing:!1,morphMethod:"onWindowResize"},{type:"scroll",capturing:!1,passive:!1,morphMethod:"onWindowScroll"},{type:"wheel",capturing:!1,passive:!1,morphToMethod:"onMouseWheel"},
{type:"beforeunload",capturing:!1,passive:!1,morphMethod:"onBeforeUnload"}];ze.typeToMethodMap={pointerdown:"onMouseDown",pointerup:"onMouseUp",pointermove:"onMouseMove",longclick:"onLongClick",hoverin:"onHoverIn",hoverout:"onHoverOut",morphicdrag:"onDrag",morphicdragstart:"onDragStart",morphicdragend:"onDragEnd",grab:"onGrab",morphicdrop:"onDrop",morphicdrophoverin:"onDropHoverIn",morphicdrophoverout:"onDropHoverOut",morphicdrophoverupdate:"onDropHoverUpdate",keydown:"onKeyDown",keyup:"onKeyUp",
input:"onTextInput",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd",blur:"onBlur",focus:"onFocus",contextmenu:"onContextMenu",cut:"onCut",copy:"onCopy",paste:"onPaste",scroll:"onScroll",wheel:"onMouseWheel",drag:"onNativeDrag",dragstart:"onNativeDragstart",dragend:"onNativeDragend",dragover:"onNativeDragover",dragenter:"onNativeDragenter",dragleave:"onNativeDragleave",drop:"onNativeDrop"};ze.focusTargetingEvents="keydown keyup keypress input compositionstart compositionupdate compositionend cut copy paste".split(" ");
ze.textOnlyEvents=["input","compositionstart","compositionupdate","compositionend"];var U1=function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js"),n=h.hasOwnProperty("EventDispatcher")&&"function"===typeof h.EventDispatcher?h.EventDispatcher:h.EventDispatcher=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b,
c){this.activations=0;this.emitter=b;this.keyInputHelper=null;this.world=c;this.installed=!1;this.handlerFunctions=[];this.killRing=new ze.KillRing(ze.config.text.clipboardBufferLength);this.nodeMorphMap=new WeakMap;this.timestampBase=ze.Path("performance.timing.navigationStart").get(b)||0;this.resetState()}},{key:"resetState",value:function(){this.eventState={timeOfLastActivity:0,focusedMorph:null,clickedOnPosition:null,clickedOnMorph:null,clickCount:0,prevClick:{},draggedMorph:null,dragDelta:null,
absDragDelta:null,lastDragPosition:null,dragStartMorphPosition:null,dragStartPosition:null,hover:{hoveredOverMorphs:[],unresolvedPointerOut:!1},scroll:{interactiveScrollInProgress:null},keyInputState:null,pressedKeys:{},html5Drag:{},dropHoverTarget:null};this.resetKeyInputState()}},{key:"resetKeyInputState",value:function(){this.eventState.keyInputState={keyChain:"",count:void 0}}},{key:"focusMorph",value:function(b){var c=this;this.keyInputHelper&&this.keyInputHelper.focus(b,this.world);ze.focusEvents(this,
b).forEach(function(l){return c.dispatchEvent(l)})}},{key:"isMorphFocused",value:function(b){return this.eventState.focusedMorph===b}},{key:"isMorphHovered",value:function(b){return this.eventState.hover.hoveredOverMorphs.includes(b)}},{key:"isMorphClicked",value:function(b){return this.eventState.clickedMorph==b}},{key:"isKeyPressed",value:function(b){return Object.keys(this.eventState.pressedKeys).map(function(c){return c.toLowerCase()}).includes(b.toLowerCase())}},{key:"whenIdle",value:function(){var b=
this;return ze.promise.waitFor(function(){return 0===b.activations})}},{key:"install",value:function(b){var c=this;if(this.installed)return this;this.installed=!0;var l=this.emitter,a=System.global;ze.domEventsWeListenTo.forEach(function(f){var m=f.type,q=f.capturing;f=f.passive;var r=function(u){return c.dispatchDOMEvent(u)};c.handlerFunctions.push({node:l,type:m,fn:r,capturing:q});l.addEventListener(m,r,{capture:q,passive:f})});a.addEventListener&&ze.globalDomEventsWeListenTo.forEach(function(f){var m=
f.type,q=f.capturing,r=f.morphMethod;f=f.passive;var u=function(v){return c.dispatchDOMEvent(v,c.world,r)};c.handlerFunctions.push({node:a,type:m,fn:u,capturing:q});a.addEventListener(m,u,{capture:q,passive:f})});this.keyInputHelper=(new ze.TextInput(this)).install(b,this.world);ze.bowser.ios&&b.setAttribute("touch-action","auto");return this}},{key:"uninstallHandler",value:function(b){var c=this.handlerFuntions.find(function(l){return l.type==b});c&&c.node.removeEventListener(c.node,c.fn,c.capturing)}},
{key:"uninstall",value:function(){this.installed=!1;var b=this.handlerFunctions;b.forEach(function(c){c.node.removeEventListener(c.type,c.fn,c.capturing)});b.length=0;this.keyInputHelper&&this.keyInputHelper.uninstall();this.keyInputHelper=null;return this}},{key:"processDOMEvent",value:function(b,c){var l=this,a=b.type,f=this.eventState,m=[c].concat(c.ownerChain()),q="touch"===b.pointerType,r=b.pointerId,u="number"===typeof r?this.world.handForPointerId(r,b.isPrimary):this.world.firstHand,v="number"!==
typeof r||q?null:this.world.haloForPointerId(r),y="number"!==typeof r||q?null:this.world.layoutHaloForPointerId(r),z=new (ze.keyLikeEvents.includes(a)?ze.KeyEvent:ze.Event)(a,b,this,m,u,v,y),A=[z],C=[];switch(a){case "keydown":f.pressedKeys[z.key]=!0;break;case "keyup":"Meta"===z.key?f.pressedKeys={}:delete f.pressedKeys[z.key];break;case "click":A=this.processDOMEvent(Object.assign({},b,{type:"pointerdown"}),c).events;a=this.processDOMEvent(Object.assign({},b,{type:"pointerup"}),c).events;A=A.concat(a);
break;case "pointerdown":z.onDispatch(function(){l.focusMorph(c);f.clickedOnMorph=c;f.clickedOnPosition=z.position;f.downTimeStamp=b.timeStamp;var G=!1,F=0;if(f.prevClick){F=f.prevClick;G=F.clickedOnMorph;var N=F.clickedAtTime;F=F.clickCount;N=Date.now()-N;G=G===c&&N<ze.config.repeatClickInterval}f.clickCount=G?F+1:1});break;case "pointerup":z.onAfterDispatch(function(){var G=f.clickedOnMorph,F=f.clickedOnPosition,N=f.clickCount,L=Date.now();f.prevClick={clickedOnMorph:G,clickedOnPosition:F,clickedAtTime:L,
clickCount:N};f.clickedOnMorph=null;f.clickCount=0;G=b.timeStamp-f.downTimeStamp;F=f.clickedOnPosition.dist(z.position);N=ze.config.longClick;L=N.minDur;var W=N.maxDur;F<N.maxDist&&G>=L&&G<=W&&(G=new ze.Event("longclick",b,l,m,u,v,y),l.schedule(G))});f.draggedMorph&&(A.push(ze.dragEndEvent(b,this,c,f,u,v,y)),z.targetMorphs=[this.world]);u.carriesMorphs()&&(f.dropHoverTarget?(A.push(new ze.Event("morphicdrophoverout",b,this,[f.dropHoverTarget],u,v,y)),c=f.dropHoverTarget,f.dropHoverTarget=null):c=
u.findDropTarget(z.position,u.grabbedMorphs),u.isAncestorOf(c)&&(c=this.world),A.push(new ze.Event("morphicdrop",b,this,[c],u,v,y)),z.targetMorphs=[this.world]);break;case "pointermove":u.carriesMorphs()?(z.targetMorphs=[this.world],a=u.findDropTarget(z.position,u.grabbedMorphs)||this.world,f.dropHoverTarget===a?A.push(new ze.Event("morphicdrophoverupdate",b,this,[a],u,v,y)):(f.dropHoverTarget&&A.push(new ze.Event("morphicdrophoverout",b,this,[f.dropHoverTarget],u,v,y)),f.dropHoverTarget=a,A.push(new ze.Event("morphicdrophoverin",
b,this,[a],u,v,y)))):f.draggedMorph?(z.targetMorphs=[this.world],A.push(ze.dragEvent(b,this,c,f,u,v,y))):f.clickedOnMorph&&f.clickedOnPosition&&f.clickedOnMorph.draggable&&!f.draggedMorph&&!u.carriesMorphs()&&(a=f.clickedOnPosition.dist(z.position),q=f.clickedOnMorph,a>q.dragTriggerDistance&&(q.grabbable?A.push(new ze.Event("grab",b,this,[q],u,v,y)):q.draggable&&A.push(ze.dragStartEvent(b,this,q,f,u,v,y)),z.targetMorphs=[this.world]));break;case "pointerover":f.hover.unresolvedPointerOut&&(f.hover.unresolvedPointerOut=
!1);a=[c].concat(c.ownerChain()).reverse();A=ze.arr.withoutAll(f.hover.hoveredOverMorphs,a).map(function(G){return(new ze.Event("hoverout",b,l,[G],u,v,y)).onDispatch(function(){return ze.arr.remove(f.hover.hoveredOverMorphs,G)})});a=ze.arr.withoutAll(a,f.hover.hoveredOverMorphs).map(function(G){return(new ze.Event("hoverin",b,l,[G],u,v,y)).onDispatch(function(){return ze.arr.pushIfNotIncluded(f.hover.hoveredOverMorphs,G)})});A=A.concat(a);break;case "pointerout":A=[];f.hover.unresolvedPointerOut=
!0;C.push(function(){if(f.hover.unresolvedPointerOut)return Promise.all(f.hover.hoveredOverMorphs.map(function(G){return l.schedule((new ze.Event("hoverout",b,l,[G],u,v,y)).onAfterDispatch(function(){return ze.arr.remove(f.hover.hoveredOverMorphs,G)}))}))});q&&this.world.removeHandForPointerId(r);break;case "blur":A=[(new ze.Event(a,b,this,[c],u,v,y)).onDispatch(function(){return f.focusedMorph=null})];break;case "focus":A=ze.focusEvents(this,c);break;case "scroll":A=[(new ze.Event(a,b,this,[c],u,
v,y)).onDispatch(function(){if(!f.scroll.interactiveScrollInProgress){var G=ze.promise.deferred(),F=G.promise,N=G.resolve;G="Firefox"==ze.bowser.name?500:250;"Safari"==ze.bowser.name&&(G=1E3);f.scroll.interactiveScrollInProgress=F;F.debounce=ze.fun.debounce(G,function(){f.scroll.interactiveScrollInProgress=null;N()})}f.scroll.interactiveScrollInProgress.debounce();F=b.target.documentElement||b.target;G=F.scrollLeft;var L=F.scrollTop,W=c.scroll,la=W.x;W=W.y;if("hidden"!=F.style.overflow&&la!==G||W!==
L)c.scroll=ze.pt(G,L)})];break;case "input":case "compositionstart":case "compositionupdate":case "compositionend":c.isText?z.targetMorphs=[c]:A=[];break;case "drag":case "dragstart":case "dragend":case "dragover":case "dragenter":case "dragleave":case "drop":"drop"!==a&&"dragover"!==a||b.preventDefault()}return{events:A,later:C}}},{key:"schedule",value:function(b){var c=this;this.activations++;return Promise.resolve().then(function(){return c.dispatchEvent(b)}).then(function(){return c.activations--},
function(l){c.activations--;throw l;})}},{key:"dispatchEvent",value:function(b,c){c=c||ze.typeToMethodMap[b.type];if(!c)throw Error("dispatchEvent: "+b.type+" not yet supported!");b.onDispatchCallbacks.forEach(function(f){return f()});this.activations++;for(var l,a=b.targetMorphs.length-1;0<=a;a--){try{b.targetMorphs[a][c](b)}catch(f){l=Error("Error in event handler "+b.targetMorphs[a]+"."+c+": "+(f.stack||f)),l.originalError=f,"undefined"!==typeof this.world?this.world.logError(l):console.error(l)}if(l||
b.stopped)break}this.activations--;b.onAfterDispatchCallbacks.forEach(function(f){return f()});if(l)throw l;}},{key:"dispatchDOMEvent",value:function(b,c,l){var a=this,f=this.world,m=this.eventState,q=this.nodeMorphMap,r=b.type;m.timeOfLastActivity=this.timestampBase+b.timeStamp;if(!c&&ze.focusTargetingEvents.includes(r))c=m.focusedMorph||f;else if(!c){for(m=b.target;;){c=m.className||"";"string"!==typeof c&&"baseVal"in c&&(c=c.baseVal);if(c&&c.includes("Morph"))break;if(!(m=m.parentNode))return}c=
q.get(m);if(!c){var u=m.id;(c=f.withAllSubmorphsDetect(function(v){return v.id===u}))&&q.set(m,c)}}c&&(b=this.processDOMEvent(b,c),q=b.events,b.later.map(function(v){a.activations++;return ze.promise.delay(0).then(v).then(function(){return a.activations--},function(y){a.activations--;throw y;})}),q.forEach(function(v){return a.dispatchEvent(v,l)}),f&&f.needsRerender()&&ze.eventsCausingImmediateRender.has(r)&&f.env.renderer.renderLater())}},{key:"simulateDOMEvents",value:function(b){for(var c=[],l=
0;l<arguments.length;++l)c[l-0]=arguments[l];l=this.emitter.document||this.emitter.ownerDocument;var a=[];c=$jscomp.makeIterator(c);for(var f=c.next();!f.done;f=c.next()){var m=f=f.value,q=m.target,r=m.position;m=m.type;if(ze.focusTargetingEvents.includes(m)){if(!this.keyInputHelper.domState.textareaNode)throw Error("Cannot simulate event of type "+m+", no keyInputHelper installed!");f=Object.assign({},f,{target:this.keyInputHelper.textareaNode})}q||(q=r?this.world.morphsContainingPoint(r)[0]:this.world);
q.isMorph&&(f=Object.assign({},f,{target:l.getElementById(q.id)}));f.position&&(q=ze.cumulativeOffset(l.getElementById(this.world.id)),f.position=f.position.addXY(q.left,q.top));"scroll"===m&&("scrollLeft"in f||"scrollTop"in f)&&(f.target.scrollLeft=f.scrollLeft||0,f.target.scrollTop=f.scrollTop||0);f=new ze.SimulatedDOMEvent(f);a.push(f);this.dispatchDOMEvent(f)}return a}},{key:"doCopy",value:function(b){return this.keyInputHelper.doCopy(b)}},{key:"doCopyWithMimeTypes",value:function(b){return this.keyInputHelper.doCopyWithMimeTypes(b)}},
{key:"doPaste",value:function(){return this.keyInputHelper.doPaste()}},{key:"cancelGrab",value:function(b,c){var l=this,a=[],f=this.eventState;f.clickedOnMorph=null;f.dropHoverTarget&&(a.push(new ze.Event("morphicdrophoverout",c.domEvt,this,[f.dropHoverTarget],b,null,null)),f.dropHoverTarget=null);a.forEach(function(m){return l.dispatchEvent(m)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EventDispatcher"}}],h,{pathInPackage:function(){return"events/EventDispatcher.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7065,end:29760})}(void 0),Gfa=U1=ze.EventDispatcher;ze.default=U1;var ok=lively.FreezerRuntime.recorderFor("lively.morphic/env.js");ok.defaultDOMEnv=Fu;ok.Renderer=dJ;ok.FontMetric=Dfa;ok.ChangeManager=eJ;ok.UndoManager=iE;ok.EventDispatcher=Gfa;ok.subscribe=ol;ok.unsubscribe=Qz;var nq=ya("aX",function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/env.js"),
n=h.hasOwnProperty("MorphicEnv")&&"function"===typeof h.MorphicEnv?h.MorphicEnv:h.MorphicEnv=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){var c=this;b=void 0===b?ok.defaultDOMEnv():b;this.initialized=!1;this.synchronizer=this.objPool=this.systemChangeHandlers=this.world=this.eventDispatcher=this.renderer=this.fontMetric=null;this.changeManager=
new ok.ChangeManager;this.undoManager=new ok.UndoManager;this.installSystemChangeHandlers();this.whenRenderedRequesters=new Map;this.whenRenderedTickingProcess=null;"function"===typeof b.then?this._waitForDOMEnv=b.then(function(l){c._waitForDOMEnv=null;c.initWithDOMEnv(l);c.initialized=!0}).catch(function(l){return console.error("Error initializing MorphicEnv with dom env: "+l.stack)}):(this.initWithDOMEnv(b),this.initialized=!0)}},{key:"isDefault",value:function(){return this.constructor.default()===
this}},{key:"initWithDOMEnv",value:function(b){this.domEnv=b;this.fontMetric=ok.FontMetric.forDOMEnv(b)}},{key:"uninstallWorldRelated",value:function(){this.renderer&&this.renderer.clear();this.eventDispatcher&&this.eventDispatcher.uninstall();this.world&&this.world.suspendSteppingAll()}},{key:"uninstall",value:function(){var b=this;if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return b.uninstall()});this.deleteHistory();this.uninstallWorldRelated();this.fontMetric&&(this.fontMetric.uninstall(),
this.fontMetric=null);this.domEnv&&this.whenRenderedTickingProcess&&(this.domEnv.window.cancelAnimationFrame(this.whenRenderedTickingProcess),this.whenRenderedTickingProcess=null);this.whenRenderedRequesters=new Map;this.domEnv&&this.domEnv.destroy();this.initialized=!1;return Promise.resolve()}},{key:"setWorld",value:function(b){var c=this;return this._waitForDOMEnv?this._waitForDOMEnv.then(function(){return c.setWorld(b)}):this.setWorldRenderedOn(b,this.domEnv.document.body)}},{key:"setWorldRenderedOn",
value:function(b,c,l){var a=this;l=void 0===l?null:l;if(!b||!b.isWorld)throw Error("world object does not look like a morphic world");if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return a.setWorldRenderedOn(b,c,l)});this.deleteHistory();this.uninstallWorldRelated();this.world=b;this.renderer=new ok.Renderer(b,c,this.domEnv);this.renderer.domNode=l;this.eventDispatcher=(new ok.EventDispatcher(this.domEnv.window,b)).install(c);b.resumeSteppingAll();this.isDefault()&&(this.domEnv.window.$world=
b);b.focus();b.makeDirty();this.renderer.renderLater();return b.whenRendered().then(function(){return a})}},{key:"installSystemChangeHandlers",value:function(){var b=this;if(!this.systemChangeHandlers){var c=this.systemChangeHandlers={};c["lively.modules/moduleloaded"]=[ok.subscribe("lively.modules/moduleloaded",function(l){return b.getTargetsFor("onModuleLoaded").forEach(function(a){return a.onModuleLoaded(l)})})];c["lively.modules/modulechanged"]=[ok.subscribe("lively.modules/modulechanged",function(l){return b.getTargetsFor("onModuleChanged").forEach(function(a){return a.onModuleChanged(l)})})];
c["lively.partsbin/partpublished"]=[ok.subscribe("lively.partsbin/partpublished",function(l){return b.getTargetsFor("onPartPublished").forEach(function(a){return a.onPartPublished(l)})})];c["lively.user/userchanged"]=[ok.subscribe("lively.user/userchanged",function(l){return b.getTargetsFor("onUserChanged").forEach(function(a){return a.onUserChanged(l)})})]}}},{key:"uninstallSystemChangeHandlers",value:function(){var b=this.systemChangeHandlers;b&&(this.systemChangeHandlers=null,Object.keys(b).forEach(function(c){return b[c].forEach(function(l){return ok.unsubscribe(c,
l)})}))}},{key:"getTargetsFor",value:function(b){var c=this.world,l=[];if(!c||!c.submorphs)return l;"function"===typeof c[b]&&l.push(c);c=$jscomp.makeIterator(c.submorphs);for(var a=c.next();!a.done;a=c.next())a=a.value,"function"===typeof a[b]&&l.push(a),a.isWindow&&a.targetMorph&&"function"===typeof a.targetMorph[b]&&l.push(a.targetMorph);return l}},{key:"cleanupCaches",value:function(){this.world.withAllSubmorphsDo(function(b){return b._pathDependants=b._pathDependants.filter(function(c){return c.world()})})}},
{key:"deleteHistory",value:function(){var b=this.changeManager,c=this.world,l=this.fontMetric;b&&(b.changes.length=0);c&&c.withAllSubmorphsDo(function(a){return a.undoManager&&a.undoManager.reset()});l&&l.reset()}},{key:"printStatus",value:function(){var b=this.changeManager,c=this.world,l=0,a=0;c&&c.withAllSubmorphsDo(function(f){f.undoManager&&(l++,a+=f.undoManager.undos.length+f.undoManager.redos.length)});return b.changes.length+" changes recorded\n"+l+" morphs with undos\n"+a+" undo changes"}},
{key:"updateWhenRenderedRequests",value:function(){for(var b=this,c=this.whenRenderedRequesters,l=0,a=$jscomp.makeIterator(c),f=a.next();!f.done;f=a.next()){var m=$jscomp.makeIterator(f.value);f=m.next().value;var q=m=m.next().value,r=q.maxAttempts,u=q.resolve;q=q.reject;f._dirty||f._rendering?++m.currentAttempt>r?(c.delete(f),q(Error("Failed to wait for whenRendered of "+f+" (tried "+r+"x)"))):l++:(c.delete(f),u(f))}this.whenRenderedTickingProcess=l?this.domEnv.window.requestAnimationFrame(function(){return b.updateWhenRenderedRequests()}):
null}},{key:"whenRendered",value:function(b,c){var l=this;c=void 0===c?50:c;var a=this.whenRenderedRequesters,f=this.whenRenderedTickingProcess,m=a.get(b);if(!m){var q,r;m=new Promise(function(u,v){q=u;r=v});a.set(b,m={maxAttempts:c,currentAttempt:0,resolve:q,reject:r,promise:m})}f||(this.whenRenderedTickingProcess=this.domEnv.window.requestAnimationFrame(function(){return l.updateWhenRenderedRequests()}));return m.promise}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicEnv"}},
{key:"reset",value:function(){for(;;){var b=this.popDefault();if(!b)break;try{b.uninstall()}catch(c){console.error("Error uninstalling MorphicEnv: "+(c.stack||c))}}}},{key:"default",value:function(){var b=this.envs;b.length||this.pushDefault(new this);return b[b.length-1]}},{key:"pushDefault",value:function(b){this.envs.push(b);return b}},{key:"popDefault",value:function(){return this.envs.pop()}},{key:"envs",get:function(){return this._envs||(this._envs=[])}}],h,{pathInPackage:function(){return"env.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:405,end:8274})}(void 0));ok.MorphicEnv=nq;ok.MorphicEnv=nq;ok.MorphicEnv=nq;var Hfa=Object.freeze({__proto__:null,MorphicEnv:nq}),iv=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js");iv.printArg=function(e){return iv.obj.inspect(e,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g,
" ")};iv.obj=lf;iv.arr=Te;iv.promise=Kf;var V1=function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js"),n=h.hasOwnProperty("CommandHandler")&&"function"===typeof h.CommandHandler?h.CommandHandler:h.CommandHandler=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.history=[];this.maxHistorySize=1E3}},{key:"addToHistory",
value:function(b){this.history.push(b);this.history.length>this.maxHistorySize&&this.history.splice(0,this.history.length-this.maxHistorySize)}},{key:"printHistory",value:function(){return this.history.map(this.printCommand).join("\n")}},{key:"printCommand",value:function(b){var c=b.target.string,l=b.args,a=b.count,f=b.evt,m=b.keyCombo;return'"'+b.name+'" '+(f?f+" ":"")+(m?m+" ":"")+(l?iv.printArg(l):"")+("number"===typeof a?" x"+a:"")+" "+c}},{key:"lookupCommand",value:function(b,c){var l;if(!b)return{};
"string"===typeof b&&(l=b);"string"===typeof b.command&&(l=b.command);if(b.exec){var a=b;l=a.name}a||(a=c.commands.find(function(f){return f.name===l}));return{name:l,command:a}}},{key:"exec",value:function(b,c,l,a,f){var m=this,q=this.lookupCommand(b,c)||{},r=q.name,u=q.command;if(!u)return console.warn("Cannot find command "+(r||b)),null;if(r){if(f){var v=f.type;if(f.isKeyEvent)var y=f.keyCombo}this.addToHistory({name:r,target:{string:String(c),id:c.id},args:l,count:a,time:Date.now(),evt:v,keyCombo:y})}var z=
c.world();"string"===typeof u.progressIndicator&&(this.progressIndicator=z.execCommand("open loading indicator",u.progressIndicator));if("function"===typeof u.exec)try{var A=u.exec(c,l,u.handlesCount?a:void 0,f)}catch(C){A=C,b="Error in interactive command "+r+": "+(C.stack||C),z?z.logError(b):console.error(b)}else console.error("command "+r+" has no exec function!");this.progressIndicator&&this.progressIndicator.remove();A&&"function"===typeof A.catch?(A.catch(function(C){var G="Error in interactive command "+
r+": "+C+"\n"+(C.stack||C);z?z.logError(G):console.error(G);throw C;}),this.progressIndicator&&iv.promise.finally(A,function(){return m.progressIndicator.remove()})):this.progressIndicator&&this.progressIndicator.remove();A&&"number"===typeof a&&1<a&&!u.handlesCount&&(A="function"===typeof A.then?A.then(function(){return m.exec(u,c,l,a-1,f,null)}):this.exec(u,c,l,a-1,f,null));return A}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CommandHandler"}}],h,{pathInPackage:function(){return"CommandHandler.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:194,end:3656})}(void 0),Ifa=V1=iv.CommandHandler;iv.default=V1;var Df=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js");Df.ensureSpaces=function(e){return e.length?e:" "};Df.invokeKeyHandlers=function(e,h,n){n=void 0===n?!1:n;var b=h=Df.Keys.canonicalizeEvent(h),
c=b.key,l=b.data,a,f=!1,m=e.keyhandlers,q=h.keyInputState||{};b=b.keyCombo.startsWith("input-");var r=!1,u=q.count,v=q.keyChain||"",y=!1;if(!m||n&&b)return!1;for(n=m.length;n--;)if((a=m[n].eventCommandLookup(e,h))&&a.command){y=a;a=y.command;var z=y.args,A=y.passEvent,C=y.count;r=y.keyChain;var G=y.onlyWhenFocused;y=!0;u=C;v=r;r="null"===a;if(G&&(G=e.world())&&G.focusedMorph&&G.focusedMorph!==e)continue;f=r?!1:e.execCommand(a,z,C,h);!f||b&&"insertstring"===a||A||"function"!==typeof h.stop||h.stop();
if(f||r)break}f||r||!b||!e.onTextInput||v||(f=e.execCommand("insertstring",{string:l||c,undoGroup:Df.config.text.undoGroupDelay},q.count,h));if(y)if("function"===typeof h.onAfterDispatch)h.onAfterDispatch(function(){q.count=f?void 0:u;q.keyChain=f?"":v});else q.count=f?void 0:u,q.keyChain=f?"":v;return f&&!r};Df.simulateKeys=function(e,h,n){n=void 0===n?{keyChain:void 0,count:void 0}:n;var b,c,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){1==f.nextAddress&&(b=1===h.length?[h]:
h.split(/ /g).map(Df.ensureSpaces),c=$jscomp.makeIterator(b),l=c.next());if(3!=f.nextAddress){if(l.done)return f.jumpTo(0);a=l.value;return f.yield(Df.simulateKey(e,a,n),3)}l=c.next();return f.jumpTo(2)})};Df.simulateKey=function(e,h,n){return Df.invokeKeyHandlers(e,Object.assign({},Df.Keys.keyComboToEventSpec(h),{keyInputState:n}))};Df.bowserOS=function(){return Df.bowser.mac?"mac":Df.bowser.windows?"windows":Df.bowser.windowsphone?"windowsphone":Df.bowser.linux?"linux":Df.bowser.chromeos?"chromeos":
Df.bowser.android?"android":Df.bowser.ios?"ios":Df.bowser.blackberry?"blackberry":Df.bowser.firefoxos?"firefoxos":Df.bowser.webos?"webos":Df.bowser.bada?"bada":Df.bowser.tizen?"tizen":Df.bowser.sailfish?"sailfish":"unknown"};Df.findKeysForPlatform=Kc;Df.Keys=WP;Df.bowser=tq;Df.config=nk;Df.arr=Te;Df.findKeysForPlatform=Kc;Df.findKeysForPlatform=Kc;Df.regexps={meta:/Meta|Cmd|Command/gi,alt:/Alt/gi,ctrl:/Ctrl|Control/gi,tab:/Tab/gi,enter:/Enter|Return/gi,shift:/Shift/gi,backspace:/Backspace/gi,delete:/del(ete)?/gi,
left:/left/gi,right:/right/gi,up:/up/gi,down:/down/gi,keySpacer:/([^-])-/g,seqSpacer:/([^\s])\s/g};var $P=function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js"),n=h.hasOwnProperty("KeyHandler")&&"function"===typeof h.KeyHandler?h.KeyHandler:h.KeyHandler=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.platform=
b=void 0===b?Df.bowserOS():b;this.keyBindings={}}},{key:"eventCommandLookup",value:function(b,c){return this.lookup(c.keyCombo,c.keyInputState)}},{key:"lookup",value:function(b,c){var l=this;c=void 0===c?{keyChain:void 0,count:void 0}:c;b=Df.Keys.canonicalizeKeyCombo(b);var a=c.keyChain||"";c=c.count;if(!a&&b.startsWith("Ctrl-")){var f=b.match(/^Ctrl-([0-9]+)/);if(f)return{command:"null",count:parseInt(("number"===typeof c?c:"")+f[1])};if("Ctrl-U"===b)return{command:"null",count:4,keyChain:"Ctrl-U"}}f=
[b];if(!q&&b.startsWith("input-")){q=b.replace(/^(input-)(.*)$/,function(r,u,v){return u+v.toUpperCase()});var m=b.replace(/^(input-)(.*)$/,function(r,u,v){return u+v.toLowerCase()});f.push(q,m)}var q=f.map(function(r){return l.keyBindings[r]})[0];a&&(f=f.find(function(r){return l.keyBindings[a+" "+r]}))&&(a+=" "+f,q=this.keyBindings[a]||q);if(q&&"chainKeys"===q)return a=a||b,b={command:"null",keyChain:a},void 0!==c&&(b.count=c),b;if(q)return b="object"===typeof q?Object.assign({},q):{command:q},
void 0!==c&&(b.count=c),b}},{key:"bindKey",value:function(b,c){var l=this;"object"===typeof b&&b&&!Array.isArray(b)&&(b=Df.findKeysForPlatform(b,this.platform));if(b){if("function"===typeof c)return this.addCommand({exec:c,bindKey:b,name:c.name||b});(Array.isArray(b)?b:b.includes("|")?b.split("|"):[b]).forEach(function(a){var f="";if(-1!=a.indexOf(" ")){var m=a.split(/\s+/);a=m.pop();m.forEach(function(q){q=Df.Keys.canonicalizeKeyCombo(q);f+=(f?" ":"")+q;l.addCommandToBinding(f,"chainKeys")});f+=
" "}l.addCommandToBinding(f+Df.Keys.canonicalizeKeyCombo(a),c)});this.cleanupUnusedKeyChains()}}},{key:"unbindKey",value:function(b){this.bindKey(b,null)}},{key:"cleanupUnusedKeyChains",value:function(){var b=this,c=Object.keys(this.keyBindings),l=c.filter(function(a){return"chainKeys"===b.keyBindings[a]});l=Df.arr.sortBy(l,function(a){return a.length}).reverse();l.forEach(function(a){c.some(function(f){return a!==f&&f.startsWith(a)})||(delete b.keyBindings[a],Df.arr.remove(c,a),Df.arr.remove(l,a))})}},
{key:"addCommand",value:function(b){return b&&b.bindKey?this.addCommandToBinding(b.bindKey,b):void 0}},{key:"addCommandToBinding",value:function(b,c){var l=this;"chainKeys"===this.keyBindings[b]&&"chainKeys"!=c&&Object.keys(this.keyBindings).forEach(function(a){a.startsWith(b)&&delete l.keyBindings[a]});c?this.keyBindings[b]=c:delete this.keyBindings[b];"chainKeys"!==c&&this.cleanupUnusedKeyChains()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KeyHandler"}},{key:"invokeKeyHandlers",
value:function(b,c,l){return Df.invokeKeyHandlers(b,c,void 0===l?!1:l)}},{key:"simulateKeys",value:function(b,c,l){return Df.simulateKeys(b,c,l)}},{key:"withBindings",value:function(b,c){var l=new this(c);b.forEach(function(a){return l.bindKey(a.keys,a.command)});return l}},{key:"prettyCombo",value:function(b){var c=this._prettyCombos||(this._prettyCombos={});return this._prettyCombos[b]?c[b]:c[b]=b.replace(Df.regexps.meta,"\u2318").replace(Df.regexps.alt,"\u2325").replace(Df.regexps.ctrl,"\u2303").replace(Df.regexps.tab,
"\u21e5").replace(Df.regexps.enter,"\u23ce").replace(Df.regexps.shift,"\u21e7").replace(Df.regexps.backspace,"\u232b").replace(Df.regexps.delete,"\u2326").replace(Df.regexps.left,"\u2192").replace(Df.regexps.right,"\u2190").replace(Df.regexps.up,"\u2191").replace(Df.regexps.down,"\u2193").replace(Df.regexps.keySpacer,"$1").replace(Df.regexps.seqSpacer,"$1-")}},{key:"generateCommandToKeybindingMap",value:function(b,c,l){function a(r){if(q[r.id])return q[r.id];var u=m[r.id]||(m[r.id]=r.keyCommandMap);
return q[r.id]=Df.arr.groupBy(Object.keys(u),function(v){return u[v].name})}var f=this;l=void 0===l?!0:l;var m={},q={};return((void 0===c?0:c)?b.commandsIncludingOwners:b.commands.map(function(r){return{command:r,target:b}})).map(function(r){var u=r.target;r=r.command;var v=a(u)[r.name];return{keys:v,target:u,command:r,prettyKeys:v&&l?v.map(function(y){return f.prettyCombo(y)}):null}})}}],h,{pathInPackage:function(){return"events/KeyHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6052,end:12969})}(void 0);$P=Df.KeyHandler;var aQ=ya("ae",$P);Df.default=$P;var Vw=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),W1=function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=h.hasOwnProperty("Script")&&"function"===typeof h.Script?h.Script:h.Script=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.suspended=!1;this.stopped=!0;this.currentTimeout=this.type=this.tickTime=null}},{key:"__additionally_serialize__",value:function(b,c,l){b.props.suspended.value=!0}},{key:"isScript",get:function(){return!0}},{key:"global",get:function(){return System.global}},{key:"execute",value:function(){throw Error("subclass responsibility");}},{key:"tick",value:function(){try{this.execute()}catch(b){console.error("Error executing script "+
this+": "+b+"\n"+b.stack);return}this.stopped||this.startTicking(this.tickTime)}},{key:"startTicking",value:function(b){this.stopped=!1;this.tickTime=b;this.type="number"===typeof b?"setTimeout":"requestAnimationFrame";this.currentTimeout="setTimeout"===this.type?this.global.setTimeout(this.tick.bind(this),b):this.global.requestAnimationFrame(this.tick.bind(this))}},{key:"stop",value:function(){this.global["setTimeout"===this.type?"clearTimeout":"cancelAnimationFrame"](this.currentTimeout);this.stopped=
!0}},{key:"resume",value:function(b){b=void 0===b?this.tickTime:b;this.suspended&&(this.suspended=!1,this.startTicking(this.tickTime=b))}},{key:"suspend",value:function(){this.stop();this.suspended=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Script"}}],h,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:21,end:1376})}(void 0),bQ=function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=h.hasOwnProperty("TargetScript")&&"function"===typeof h.TargetScript?h.TargetScript:h.TargetScript=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b,c,l){Nb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),
this).call(this);this.target=b;this.selector=c;this.args=l||[]}},{key:"execute",value:function(){this.target.isMorph&&!this.target.tickingScripts.includes(this)&&this.stop();"function"===typeof this.target[this.selector]&&this.target[this.selector].apply(this.target,this.args)}},{key:"equals",value:function(b){return b.isScript&&this.target==b.target&&this.selector==b.selector}},{key:"toString",value:function(){return"Script("+this.target+">>"+this.selector+"("+this.args.join(",")+"))"}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"TargetScript"}}],h,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1378,end:2013})}(Vw.Script),X1=function(e){var h=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=h.hasOwnProperty("FunctionScript")&&"function"===typeof h.FunctionScript?h.FunctionScript:
h.FunctionScript=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Nb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.callback=b}},{key:"execute",value:function(){this.callback()}},{key:"equals",value:function(b){return b.isScript&&this.callback==b.callback}},{key:"toString",value:function(){return"Script("+
(this.callback.toString().replace(/\n/g,"").slice(0,40)+"...)")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FunctionScript"}}],h,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2015,end:2354})}(Vw.Script);Vw.Script=W1;Vw.Script=W1;Vw.TargetScript=bQ;Vw.TargetScript=
bQ;Vw.FunctionScript=X1;Vw.FunctionScript=X1;var io=lively.FreezerRuntime.recorderFor("lively.modules/src/hooks.js");io.install=rd;io.remove=Yd;io.isInstalled=sd;io.arr=Te;io.fun=Xk;io.install=rd;io.install=rd;io.remove=Yd;io.remove=Yd;io.isInstalled=sd;io.isInstalled=sd;var jJ=lively.FreezerRuntime.recorderFor("lively.modules/src/cycle-breaker.js");jJ.classHolder={};var jv=jJ.classHolder;jJ.classHolder=jv;jJ.classHolder=jv;var Gu=lively.FreezerRuntime.recorderFor("lively.modules/src/dependencies.js");
Gu.computeRequireMap=ed;Gu.graph=$u;Gu.arr=Te;Gu.obj=lf;Gu.loadedModules=FF;Gu.computeRequireMap=ed;Gu.computeRequireMap=ed;var Um=lively.FreezerRuntime.recorderFor("lively.modules/src/import-export.js");Um.scheduleModuleExportsChange=le;Um.runScheduledExportChanges=Sd;Um.clearPendingModuleExportChanges=function(e,h){delete e.get("@lively-env").pendingExportChanges[h]};Um.updateModuleExports=function(e,h,n){var b=e.debug;Um.module(e,h).updateRecord(function(c){var l=[],a=[];Object.keys(n).forEach(function(y){var z=
n[y];b&&console.log("[lively.vm es6 updateModuleExports] %s export %s = %s",h,y,String(z).slice(0,30).replace(/\n/g,"")+"...");var A=!(y in c.exports);A&&(c.__lively_modules__.evalOnlyExport[y]=!0);c.exports[y]=z;A?l.push(y):a.push(y)});if(l.length){var f=e.get(h);Object.isFrozen(f)?(console.warn("[lively.vm es6 updateModuleExports] Since module %s is frozen a new module object was installed in the system. Note that only(!) exisiting module bindings are updated. New exports that were added will only be available in already loaded modules after those are reloaded!",
h),e.set(h,e.newModule(c.exports))):(b&&console.log("[lively.vm es6 updateModuleExports] adding new exports to %s",h),l.forEach(function(y){Object.defineProperty(f,y,{configurable:!1,enumerable:!0,get:function(){return c.exports[y]},set:function(){throw Error("exports cannot be changed from the outside");}})}))}if(a.length){b&&console.log("[lively.vm es6 updateModuleExports] updating %s dependents of %s",c.importers.length,h);for(var m=0,q=c.importers.length;m<q;m++){var r=c.importers[m];if(!r.locked){var u;
if(r.dependencies.some(function(y,z){u=z;return y&&y.name===c.name})){if(b){var v=Um.module(e,r.name);console.log("[lively.vm es6 updateModuleExports] calling setters of "+v["package"]().name+"/"+v.pathInPackage())}Um.module(e,r.name).evaluationStart();r.setters[u](c.exports);Um.module(e,r.name).evaluationEnd()}}}}})};Um.module=xn;Um.scheduleModuleExportsChange=le;Um.scheduleModuleExportsChange=le;Um.runScheduledExportChanges=Sd;Um.runScheduledExportChanges=Sd;var Wi=lively.FreezerRuntime.recorderFor("lively.modules/src/change.js");
Wi.moduleSourceChange=Md;Wi.moduleSourceChangeEsm=function(e,h,n,b){var c,l,a,f,m,q,r,u,v,y,z,A,C,G,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:return c=e.debug,l={status:"loading",source:n,name:h,address:h,linkSets:[],dependencies:[],metadata:{format:"esm"}},N.yield(Wi.instrumentSourceOfEsmModuleLoad(e,l),2);case 2:a=N.yieldResult,f=function(L,W){return Wi.scheduleModuleExportsChange(e,l.name,L,W,!0)},m=a.declare(f),c&&console.log("[lively.vm es6] sourceChange of %s with deps",
l.name,a.localDeps),q=[],r=$jscomp.makeIterator(a.localDeps),u=r.next();case 3:if(u.done){N.jumpTo(5);break}v=u.value;return N.yield(e.normalize(v,l.name),6);case 6:return y=N.yieldResult,z=Wi.classHolder.module(e,y),N.yield(z.load(),7);case 7:A=N.yieldResult;q.push({name:v,fullname:y,module:z,exports:A});u=r.next();N.jumpTo(3);break;case 5:if(C=e.loads&&e.loads[l.name])C.deps=q.map(function(L){return L.name}),C.depMap=q.reduce(function(L,W){L[W.name]=W.fullname;return L},{}),C.metadata&&C.metadata.entry&&
(C.metadata.entry.deps=C.deps,C.metadata.entry.normalizedDeps=q.map(function(L){return L.fullname}),C.metadata.entry.declare=a.declare);G=Wi.classHolder.module(e,l.name);F=G.record();q.forEach(function(L,W){return G.addDependencyToModuleRecord(L.module,m.setters[W])});F&&(F.execute=m.execute);q.forEach(function(L,W){return m.setters[W](L.exports)});return N.return(m.execute())}})};Wi.moduleSourceChangeGlobal=function(e,h,n,b){var c,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==
f.nextAddress)return c={status:"loading",source:n,name:h,address:h,linkSets:[],dependencies:[],metadata:{format:"global"}},e.get(h)?f.jumpTo(2):f.yield(e["import"](h),2);if(4!=f.nextAddress)return f.yield(Wi.instrumentSourceOfGlobalModuleLoad(e,c),4);l=f.yieldResult;c.source=l.translated;a=Wi.doInstantiateGlobalModule(e,c);e.delete(h);e.set(a.name,a.esModule);return f.return(a.module)})};Wi.doInstantiateGlobalModule=function(e,h){var n=Wi.__createEntry();n.name=h.name;n.esmExports=!0;h.metadata.entry=
n;n.deps=[];for(var b in h.metadata.globals){var c=h.metadata.globals[b];c&&n.deps.push(c)}n.execute=function(l,a,f){(a=(a=Wi.classHolder.module(e,f.id).metadata())&&a.entry&&a.entry.module&&a.entry.module.exports)&&Object.keys(a).forEach(function(r){try{delete e.global[r]}catch(u){console.warn('[lively.modules] executeGlobalModule: Cannot delete global["'+r+'"]')}});if(h.metadata.globals){var m={};for(var q in h.metadata.globals)h.metadata.globals[q]&&(m[q]=l(h.metadata.globals[q]))}if(l=h.metadata.exports)h.source+=
'\nSystem.global["'+l+'"] = '+l+";";f=e.get("@@global-helpers").prepareGlobal(f.id,l,m);Wi.__evaluateGlobalLoadSource(e,h);return f()};return Wi.runExecuteOfGlobalModule(e,n)};Wi.__createEntry=function(){return{name:null,deps:null,originalIndices:null,declare:null,execute:null,executingRequire:!1,declarative:!1,normalizedDeps:null,groupIndex:null,evaluated:!1,module:null,esModule:null,esmExports:!1}};Wi.__evaluateGlobalLoadSource=function(e,h){function n(){0==--c&&(l.System=l.SystemJS=b)}var b,c=
0,l=e.global;return function(a){try{0==c++&&(b=l.System),l.System=l.SystemJS=this,(0,eval)(a.source),n()}catch(f){throw n(),Error("Error evaluating "+a.address+":\n"+f.stack);}}.call(e,h)};Wi.runExecuteOfGlobalModule=function(e,h){var n={},b=h.module={exports:n,id:h.name};h.evaluated=!0;if(n=h.execute.call(e.global,function(c){var l=h.deps.find(function(a){return a===c});if(l=l&&e.get(h.normalizedDeps[h.deps.indexOf(l)])||e.get(e.decanonicalize(c,h.name)))return l;throw Error("Module "+c+" not declared as a dependency of "+
h.name);},n,b))b.exports=n;n=b.exports;b=e.get("@system-env").constructor;h.esModule=n&&(n.__esModule||n instanceof b)?n:h.esmExports&&n!==e.global?e.newModule(n):{"default":n};return h};Wi.arr=Te;Wi.emit=Qm;Wi.instrumentSourceOfEsmModuleLoad=Gg;Wi.instrumentSourceOfGlobalModuleLoad=Qk;Wi.scheduleModuleExportsChange=le;Wi.classHolder=jv;Wi.moduleSourceChange=Md;Wi.moduleSourceChange=Md;var Ol=lively.FreezerRuntime.recorderFor("lively.modules/src/url-helpers.js");Ol.isJsFile=ce;Ol.asDir=Je;Ol.isURL=
re;Ol.urlResolve=Ve;Ol.string=Hg;Ol.isJsFile=ce;Ol.isJsFile=ce;Ol.asDir=Je;Ol.asDir=Je;var jE=Ol.string.joinPath;Ol.join=jE;Ol.join=jE;Ol.join=jE;Ol.isURL=re;Ol.isURL=re;Ol.urlResolve=Ve;Ol.urlResolve=Ve;var Bq=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/configuration.js");Bq.arr=Te;Bq.obj=lf;Bq.isURL=re;Bq.installHook=rd;Bq.isHookInstalled=sd;var yt=function(e){this.pkg=e};yt.prototype.applyConfig=function(e){var h=this.System,n=this.packageURL,b=this.pkg;e=Bq.obj.deepMerge(b.config,
e);var c=e.name||n.split("/").slice(-1)[0],l=e.version,a=e.systemjs||{},f=e.lively,m=e.main||"index.js",q={},r={};h.config({map:(q[c]=n,q),packages:(r[n]=Object.assign({},a,{meta:Object.assign({"package.json":{format:"json"}},a.meta),configured:!0}),r)});h.packages[n].configured=!0;h=h.getConfig().packages[n]||{};h.map||(h.map={});a&&(f&&f.main?m=f.main:a.main&&(m=a.main),this.applySystemJSConfig(a));m.match(/\.[^\/\.]+/)||(m+=".js");h.main=m;b.version=l;b.config=e;b._name=c;b.mergeWithConfig(h);
return f?this.applyLivelyConfig(f):{subPackages:[]}};yt.prototype.applySystemJSConfig=function(e){var h=this.System;e.packageConfigPaths&&h.config({packageConfigPaths:Bq.arr.uniq(h.packageConfigPaths.concat(e.packageConfigPaths))});e.packages&&h.config({packages:e.packages});e.globalmap&&h.config({map:e.globalmap});e.babelOptions&&h.config({babelOptions:e.babelOptions});e.meta&&h.config({meta:e.meta})};yt.prototype.applyLivelyConfig=function(e){this.applyLivelyConfigMeta(e);this.applyLivelyConfigHooks(e);
this.applyLivelyConfigBundles(e)};yt.prototype.applyLivelyConfigHooks=function(e){var h=this;(e.hooks||[]).forEach(function(n){try{var b=eval("("+n.source+")");b.name&&Bq.isHookInstalled(h.System,n.target,b.name)||Bq.installHook(h.System,n.target,b)}catch(c){console.error("Error installing hook for %s: %s",h.packageURL,c,n)}})};yt.prototype.applyLivelyConfigBundles=function(e){var h=this;if(!e.bundles)return Promise.resolve();var n=Object.keys(e.bundles).reduce(function(b,c){var l=h.packageURL+"/"+
c;c=e.bundles[c].map(function(a){return h.System.decanonicalize(a,h.packageURL+"/")});b[l]=c;return b},{});this.System.config({bundles:n});return Promise.resolve()};yt.prototype.applyLivelyConfigMeta=function(e){if(e.meta){var h={},n=this.System.getConfig().packages[this.packageURL]||{},b={meta:{},packages:(h[this.packageURL]=n,h)};Object.keys(e.meta).forEach(function(c){var l=e.meta[c];Bq.isURL(c)?b.meta[c]=l:(n.meta||(n.meta={}),n.meta[c]=l)});this.System.config(b)}};$jscomp.global.Object.defineProperties(yt.prototype,
{System:{configurable:!0,enumerable:!0,get:function(){return this.pkg.System}},packageURL:{configurable:!0,enumerable:!0,get:function(){return this.pkg.url}}});Bq.PackageConfiguration=yt;Bq.default=yt;var me=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package.js");me.normalizePackageURL=function(e,h,n){n=void 0===n?[]:n;if(n.some(function(b){return b===h}))return h;e=e.decanonicalize(h.replace(/[\/]+$/,"")+"/");if(!me.isURL(e))throw Error("Strange package URL: "+e+" is not a valid URL");
e.match(/\.js/)&&(e=-1<e.indexOf(e+".js")?e.replace(/\.js$/,""):e.split("/").slice(0,-1).join("/"));e.match(/\.js$/)&&console.warn("packageURL is expected to point to a directory but seems to be a .js file: "+e);return String(e).replace(/\/$/,"")};me.lookupPackage=dg;me.ensurePackage=ui;me.getPackage=vi;me.applyConfig=Hh;me.importPackage=ag;me.removePackage=kj;me.reloadPackage=Mi;me.registerPackage=Vm;me.getPackageSpecs=ur;me.arr=Te;me.promise=Kf;me.obj=lf;me.emit=Qm;me.module=xn;me.resource=T;me.PackageConfiguration=
yt;me.isURL=re;me.join=jE;me.classHolder=jv;var di=function(e,h,n,b,c){c=void 0===c?{}:c;this.System=e;this.url=h;this.registerProcess=null;this.map={};this.setConfig(c)};di.allPackages=function(e){return me.obj.values(me.classHolder.PackageRegistry.ofSystem(e).byURL)};di.allPackageURLs=function(e){return me.classHolder.PackageRegistry.ofSystem(e).allPackageURLs()};di.forModule=function(e,h){return this.forModuleId(e,h.id)};di.forModuleId=function(e,h){return(h=me.classHolder.ModulePackageMapping.forSystem(e).getPackageURLForModuleId(h))?
me.getPackage(e,h,!0):null};di.fromJSON=function(e,h){return(new me.Package(e)).fromJSON(h)};di.prototype.setConfig=function(e){this._name=e.name;this.version=e.version;this.dependencies=e.dependencies||{};this.devDependencies=e.devDependencies||{};this.main=e.main||"index.js";this.systemjs=e.systemjs;this.lively=e.lively};di.prototype.toJSON=function(){var e=this.System,h=me.obj.select(this,"url _name version map dependencies devDependencies main systemjs lively".split(" "));h.url.startsWith(e.baseURL)&&
(h.url=h.url.slice(e.baseURL.length).replace(/^\//,""));return h};di.prototype.fromJSON=function(e){var h=this.System;this.url=e.url;this._name=e._name;this.version=e.version;this.map=e.map||{};this.main=e.main;this.dependencies=e.dependencies||{};this.devDependencies=e.devDependencies||{};this.systemjs=e.systemjs;this.lively=e.lively;me.isURL(this.url)||(this.url=me.join(h.baseURL,this.url));this.registerWithConfig();return this};di.prototype.asSpec=function(){return Object.assign({},me.obj.select(this,
"name main map meta url address version lively".split(" ")),{modules:this.modules().map(function(e){return{name:e.id,deps:e.directRequirements().map(function(h){return h.id})}})})};di.prototype.path=function(){var e=this.System.baseURL;return 0===this.url.indexOf(e)?this.url.slice(e.length):this.url};di.prototype.modules=function(){var e=this.url,h=this.System;return me.classHolder.ModulePackageMapping.forSystem(h).getModuleIdsForPackageURL(e).map(function(n){return me.module(h,n)})};di.prototype.resources=
function(e,h){h=void 0===h?[".git","node_modules",".module_cache","lively.next-node_modules"]:h;var n=this,b,c,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return b=n,c=b.System,l=b.url,a=me.Package.allPackageURLs(c),f=a.filter(function(v){return v!==l&&!l.startsWith(v)}),u.yield(me.resource(l).dirList("infinity",{exclude:h}),2);m=u.yieldResult;q=m.filter(function(v){return!v.isDirectory()&&!f.some(function(y){return v.url.startsWith(y)})}).map(function(v){return v.url});
r=me.arr.pluck(n.modules(),"id");e&&(q=q.filter(e));return u.return(q.map(function(v){var y=v.replace(l,"").replace(/^\//,"");return{isLoaded:r.includes(v),url:v,nameInPackage:y,package:n}}))})};di.prototype.hasResource=function(e){var h=this.url;return(e.startsWith(h)?me.resource(e):me.resource(h).join(e)).exists()};di.prototype.toString=function(){return"Package("+this.name+" - "+this.path()+"/)"};di.prototype.mergeWithConfig=function(e){var h=e=Object.assign({},e),n=h.name;h=h.map;n&&(delete e.name,
this._name=n);h&&(delete e.map,Object.assign(this.map,h));Object.assign(this,e);return this};di.prototype.addMapping=function(e,h){this.map[e]=h;var n={},b={};this.System.config({packages:(b[this.url]={map:(n[e]=h,n)},b)})};di.prototype.tryToLoadPackageConfig=function(){var e=this,h,n,b,c,l,a,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:h=e;n=h.System;b=h.url;c=b+"/package.json";l={};a={};n.config({meta:(l[c]={format:"json"},l),packages:(a[b]=
{meta:{"package.json":{format:"json"}}},a)});n.debug&&console.log("[lively.modules package reading config] %s",c);v.setCatchFinallyBlocks(2);if(f=n.get(c)){v.jumpTo(4);break}return v.yield(n.import(c),5);case 5:f=v.yieldResult;case 4:return m=f,q=[].concat($jscomp.arrayFromIterable(n.packageConfigPaths)),me.arr.pushIfNotIncluded(q,c),n.config({packageConfigPaths:q}),v.return(m);case 2:return r=v.enterCatchBlock(),console.log("[lively.modules package] Unable loading package config %s for package: ",
c,r),delete n.meta[c],u=b.split("/").slice(-1)[0],v.return({name:u})}})};di.prototype.import=function(){var e=this,h,n,b,c,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return q.yield(e.register(),2);case 2:return h=e,n=h.url,b=h.System,c=me,l=c.module,a=b,q.yield(b.normalize(n),3);case 3:return f=l.call(c,a,q.yieldResult),q.yield(b.import(f.id),4);case 4:return m=q.yieldResult,q.yield(me.promise.waitFor(1E3,function(){return f.isLoaded()}),5);
case 5:return q.return(m)}})};di.prototype.isRegistering=function(){return!!this.registerProcess};di.prototype.register=function(e){var h=this,n,b,c,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:if(h.isRegistering())return q.return(h.registerProcess.promise);n=h;b=n.System;c=n.url;h.registerProcess=me.promise.deferred();l=h.registerProcess.promise;b.debug&&console.log("[lively.modules package register] %s",c);q.setCatchFinallyBlocks(2,3);if(a=
e){q.jumpTo(5);break}return q.yield(h.tryToLoadPackageConfig(),6);case 6:a=q.yieldResult;case 5:f=a,h.registerWithConfig(f),h.registerProcess.resolve(f);case 3:q.enterFinallyBlock();delete h.registerProcess;q.leaveFinallyBlock(4);break;case 2:throw m=q.enterCatchBlock(),h.registerProcess.reject(m),m;case 4:return q.return(l)}})};di.prototype.updateConfig=function(e){e=Object.assign({},this.runtimeConfig,{},e);var h=this.name,n=this.version,b=e,c=b.name;b=b.version;(new me.PackageConfiguration(this)).applyConfig(e);
if(h!==e.name||n!==e.version)console.log("[lively.modules] Updating registry "+h+"@"+n+" => "+c+"@"+b),me.classHolder.PackageRegistry.ofSystem(this.System).updateNameAndVersionOf(this,h,n,c,b)};di.prototype.registerWithConfig=function(e){e=void 0===e?this.runtimeConfig:e;var h=this.System,n=this.url,b=(new me.PackageConfiguration(this)).applyConfig(e),c=me.join(n,"package.json");h.get(c)||h.set(c,h.newModule(Object.assign({},e,{default:e})));me.emit("lively.modules/packageregistered",{"package":n},
Date.now(),h);return b};di.prototype.remove=function(e){e=Object.assign({forgetEnv:!0,forgetDeps:!1,unloadModules:!0},e);var h=this.System,n=this.url;n=n.replace(/\/$/,"");e.unloadModules&&this.modules().forEach(function(f){return f.unload(e)});me.classHolder.PackageRegistry.ofSystem(h).removePackage(this);var b=h.getConfig(),c=n+"/package.json";h.delete(String(c));me.arr.remove(b.packageConfigPaths||[],c);var l={},a={};h.config({meta:(l[c]={},l),packages:(a[n]={},a),packageConfigPaths:b.packageConfigPaths});
delete h.packages[n];me.emit("lively.modules/packageremoved",{"package":this.url},Date.now(),h)};di.prototype.reload=function(e){var h=this.url,n=me.classHolder.PackageRegistry.ofSystem(this.System),b=n.coversDirectory(h);this.remove(e);e={};n.addPackageAt(h,b||"devPackageDirs",(e[h]=this,e));return this.import()};di.prototype.fork=function(e,h){var n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(h||(h=me.resource(n.url).join("../"+e).withRelativePartsResolved().url),
b.yield(n.changeAddress(h,e,!1),2)):b.return(b.yieldResult)})};di.prototype.rename=function(e){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(n=me.resource(h.url).join("../"+e).withRelativePartsResolved().url,b.yield(h.changeAddress(n,e,!0),2)):b.return(b.yieldResult)})};di.prototype.changeAddress=function(e,h,n){h=void 0===h?null:h;n=void 0===n?!0:n;var b=this,c,l,a,f,m,q,r,u,v,y,z,A,C,G,F,N,L,W,la,wa,D,Q,J,O;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ja){switch(ja.nextAddress){case 1:return e=
e.replace(/\/?/,""),c=b,l=c.System,a=c.url,ja.yield(b.runtimeConfig,2);case 2:return f=ja.yieldResult,m=me.resource(a).asDirectory(),q=new me.Package(l,e),ja.yield(me.resource(e).asDirectory(),3);case 3:return r=ja.yieldResult,f.name=h||b.name,u=me.classHolder.PackageRegistry.ofSystem(l),v=u.coversDirectory(a),me.classHolder.ModulePackageMapping.forSystem(l).clearCache(),l.packages[a]&&(l.packages[e]=l.packages[a],n&&delete l.packages[a]),Object.assign(q,me.obj.select(b,["_name","map","config"])),
ja.yield(r.ensureExistance(),4);case 4:return ja.yield(b.resources(void 0,[]),5);case 5:y=ja.yieldResult.map(function(X){return X.url}),z=b.modules(),A=$jscomp.makeIterator(z),C=A.next();case 6:if(C.done){ja.jumpTo(8);break}G=C.value;F=r.join(G.pathInPackage()).url;return n?ja.yield(G.renameTo(F),10):ja.yield(G.copyTo(F),10);case 10:N=y.indexOf(G.id);-1<N&&y.splice(N,1);C=A.next();ja.jumpTo(6);break;case 8:L=$jscomp.makeIterator(y),W=L.next();case 13:if(W.done){if(!n){ja.jumpTo(17);break}return ja.yield(b.remove({forgetEnv:!0,
forgetDeps:!1}),18)}la=W.value;wa=me.resource(la);D=wa.relativePathFrom(m);return ja.yield(wa.copyTo(r.join(D)),14);case 14:W=L.next();ja.jumpTo(13);break;case 18:return ja.yield(m.remove(),17);case 17:if(!h){ja.jumpTo(20);break}q.name=h;q.config.name=h;Q=me.resource(e).join("package.json");ja.setCatchFinallyBlocks(21);return ja.yield(Q.exists(),23);case 23:if(!ja.yieldResult){ja.jumpTo(24);break}return ja.yield(Q.readJson(),25);case 25:J=ja.yieldResult;if(J.name!==b.name){ja.jumpTo(26);break}J.name=
h;return ja.yield(Q.writeJson(J,!0),26);case 26:(O=l.get(Q.url))&&l.set(Q.url,l.newModule(Object.assign({},O,{name:h})));case 24:ja.leaveTryBlock(20);break;case 21:ja.enterCatchBlock();case 20:return v=v||"individualPackageDirs","individualPackageDirs"!==v&&"devPackageDirs"!==v||u._addPackageDir(e,v,!0),u._addPackageWithConfig(q,f,e,v),u.resetByURL(),u._updateLatestPackages(),ja.return(q)}})};di.prototype.search=function(e,h){h=void 0===h?{}:h;var n=this,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return h.includeUnloaded?l.yield(n.resources(function(a){return a.endsWith(".js")},[".git","node_modules","dist",".module_cache","lively.next-node_modules"]),3):(b=n.modules().filter(function(a){return a.isLoaded()}),l.jumpTo(2));2!=l.nextAddress&&(b=l.yieldResult.map(function(a){return me.module(n.System,a.url)}));c=b;return l.return(Promise.all(c.map(function(a){return a.search(e,h).catch(function(f){console.error("Error searching module "+a.name+":\n"+f.stack);return[]})})).then(function(a){return me.arr.flatten(a,
1)}))})};$jscomp.global.Object.defineProperties(di.prototype,{isPackage:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){if(this._name)return this._name;var e=this.System.get(this.url+"/package.json");return e&&e.name?e.name:me.arr.last(this.url.replace(/[\/]+$/,"").split("/"))},set:function(e){return this._name=e}},nameAndVersion:{configurable:!0,enumerable:!0,get:function(){return this.name+"@"+this.version}},address:{configurable:!0,enumerable:!0,
get:function(){return this.url},set:function(e){return this.url=e}},runtimeConfig:{configurable:!0,enumerable:!0,get:function(){var e=this.main,h=this.systemjs,n=this.lively,b={name:this.name,version:this.version,dependencies:this.dependencies||{},devDependencies:this.devDependencies||{}};e&&(b.main=e);h&&(b.systemjs=h);n&&(b.lively=n);return b}}});me.Package=di;me.ensurePackage=ui;me.ensurePackage=ui;me.importPackage=ag;me.importPackage=ag;me.removePackage=kj;me.removePackage=kj;me.reloadPackage=
Mi;me.reloadPackage=Mi;me.registerPackage=Vm;me.registerPackage=Vm;me.getPackage=vi;me.getPackage=vi;me.lookupPackage=dg;me.lookupPackage=dg;me.applyConfig=Hh;me.applyConfig=Hh;me.getPackageSpecs=ur;me.getPackageSpecs=ur;me.Package=di;me.Package=di;var Oc=lively.FreezerRuntime.recorderFor("lively.classes/class-to-function-transform.js");Oc.isFunctionNode=function(e){return"ArrowFunctionExpression"===e.type||"FunctionExpression"===e.type||"FunctionDeclaration"===e.type};Oc.ensureIdentifier=function(e){return e.replace(Oc.firstIdRe,
"_").replace(Oc.trailingIdRe,"_")};Oc.constructorTemplate=function(e){return Oc.funcExpr({id:e?Oc.id(e):null},["__first_arg__"],Oc.ifStmt(Oc.binaryExpr(Oc.id("__first_arg__"),"&&",Oc.member("__first_arg__",Oc.funcCall(Oc.member("Symbol","for"),Oc.literal("lively-instance-restorer")),!0)),Oc.block(),Oc.block(Oc.exprStmt(Oc.funcCall(Oc.member(Oc.member("this",Oc.funcCall(Oc.member("Symbol","for"),Oc.literal("lively-instance-initialize")),!0),"apply"),Oc.id("this"),Oc.id("arguments"))))))};Oc.replaceSuper=
function(e,h,n,b){console.assert("Super"===e.type);(h=h.currentMethod)||console.warn("[lively.classes] Trying to transform es6 class but got super call outside a method! "+Oc.stringify(e)+" in "+n.join("."));b=$jscomp.makeIterator(n.slice(-2));n=b.next().value;b=b.next().value;return"callee"===n&&"object"===b||"callee"===b?e:h&&"static"===h[Oc.methodKindSymbol]?Oc.funcCall(Oc.member("Object","getPrototypeOf"),Oc.id(Oc.tempLivelyClassVar)):Oc.funcCall(Oc.member("Object","getPrototypeOf"),Oc.member(Oc.id(Oc.tempLivelyClassVar),
"prototype"))};Oc.replaceSuperMethodCall=function(e,h,n,b){console.assert("CallExpression"===e.type);console.assert("Super"===e.callee.object.type);return Oc.funcCall.apply(Oc,[Oc.member(Oc.funcCall(Oc.member(b.functionNode,"_get"),Oc.replaceSuper(e.callee.object,h,n.concat(["callee","object"]),b),Oc.literal(e.callee.property.value||e.callee.property.name),Oc.id("this")),"call"),Oc.id("this")].concat($jscomp.arrayFromIterable(e.arguments)))};Oc.replaceDirectSuperCall=function(e,h,n,b){console.assert("CallExpression"===
e.type);console.assert("Super"===e.callee.type);return Oc.funcCall.apply(Oc,[Oc.member(Oc.funcCall(Oc.member(b.functionNode,"_get"),Oc.replaceSuper(e.callee,h,n.concat(["callee"]),b),Oc.funcCall(Oc.member("Symbol","for"),Oc.literal("lively-instance-initialize")),Oc.id("this")),"call"),Oc.id("this")].concat($jscomp.arrayFromIterable(e.arguments)))};Oc.replaceSuperGetter=function(e,h,n,b){console.assert("MemberExpression"===e.type);console.assert("Super"===e.object.type);return Oc.funcCall(Oc.member(b.functionNode,
"_get"),Oc.replaceSuper(e.object,h,n.concat(["object"]),b),Oc.literal(e.property.value||e.property.name),Oc.id("this"))};Oc.replaceSuperSetter=function(e,h,n,b){console.assert("AssignmentExpression"===e.type);console.assert("Super"===e.left.object.type);return Oc.funcCall(Oc.member(b.functionNode,"_set"),Oc.replaceSuper(e.left.object,h,n.concat(["left","object"]),b),Oc.literal(e.left.property.value||e.left.property.name),e.right,Oc.id("this"))};Oc.replaceClass=function(e,h,n,b){console.assert("ClassDeclaration"===
e.type||"ClassExpression"===e.type);var c=e.body.body,l=e.superClass;n=e.id;var a=e.type,f=e.start,m=e.end,q=void 0===b.addClassNameGetter?!0:b.addClassNameGetter,r=Oc.id("undefined"),u=Oc.id("undefined"),v=n?n.name:"anonymous_class",y=b.evalId,z=b.sourceAccessorName;e=e["x-lively-object-meta"]||{start:f,end:m};c.length&&(q=c.reduce(function(F,N){var L=N.key,W=N.kind,la=N.value,wa=N.static;"Literal"!==L.type&&"Identifier"!==L.type&&console.warn("Unexpected key in classToFunctionTransform! "+JSON.stringify(L));
if("method"===W){W={};N=Oc.id(v+"_"+Oc.ensureIdentifier(L.name||L.value||Oc.Path("property.name").get(L))+"_");la=["key",Oc.literal(L.name||L.value||Oc.Path("property.name").get(L)),"value",Object.assign({},la,(W.id=N,W[Oc.methodKindSymbol]=wa?"static":"proto",W))];var D=Oc.objectLiteral(la)}else"get"===W||"set"===W?(N={},D=Oc.objectLiteral(["key",Oc.literal(L.name||L.value||Oc.Path("property.name").get(L)),W,Object.assign({},la,(N.id=Oc.id(W),N[Oc.methodKindSymbol]=wa?"static":"proto",N))])):"constructor"===
W?(L={},la=["key",Oc.funcCall(Oc.member("Symbol","for"),Oc.literal("lively-instance-initialize")),"value",Object.assign({},la,(L.id=Oc.id(v+"_initialize_"),L[Oc.methodKindSymbol]="proto",L))],D=Oc.objectLiteral(la)):console.warn("[lively.classes] classToFunctionTransform encountered unknown class property with kind "+W+", ignoring it, "+JSON.stringify(N));(wa?F.clazz:F.inst).push(D);return F},{inst:[],clazz:q?[Oc.parse('({ key: Symbol.for("__LivelyClassName__"), get: function get() { return "'+v+
'"; } })').body[0].expression]:[]}),c=q.inst,q=q.clazz,c.length&&(r={type:"ArrayExpression",elements:c}),q.length&&(u={type:"ArrayExpression",elements:q}));c=b.scope;if(l&&b.currentModuleAccessor)if(b.classHolder===l.object){var A=l;var C=l.property.name}else{var G=c&&c.resolvedRefMap&&c.resolvedRefMap.get(l);G&&G.decl&&c.decls&&c.decls.find(function(F){return $jscomp.makeIterator(F).next().value===G.decl})&&(A=l,C=l.name)}C=A?Oc.objectLiteral(["referencedAs",Oc.literal(C),"value",A]):l||Oc.id("undefined");
A=n&&"ClassDeclaration"===a;l=["start",Oc.literal(e.start),"end",Oc.literal(e.end)];"undefined"!==typeof y&&l.push("evalId",Oc.literal(y));z&&l.push("moduleSource",Oc.nodes.id(z));y=Oc.objectLiteral(l);r=Oc.funcCall(Oc.funcExpr({},["superclass"],Oc.varDecl(Oc.tempLivelyClassHolderVar,h.classHolder),Oc.varDecl(Oc.tempLivelyClassVar,A?{type:"ConditionalExpression",test:Oc.binaryExpr(Oc.funcCall(Oc.member(Oc.tempLivelyClassHolderVar,"hasOwnProperty"),Oc.literal(n.name)),"&&",Oc.binaryExpr({argument:Oc.member(Oc.tempLivelyClassHolderVar,
n),operator:"typeof",prefix:!0,type:"UnaryExpression"},"===",Oc.literal("function"))),consequent:Oc.member(Oc.tempLivelyClassHolderVar,n),alternate:Oc.assign(Oc.member(Oc.tempLivelyClassHolderVar,n),Oc.constructorTemplate(n.name))}:n?Oc.constructorTemplate(n.name):Oc.constructorTemplate(null)),Oc.returnStmt(Oc.funcCall(b.functionNode,Oc.id(Oc.tempLivelyClassVar),Oc.id("superclass"),r,u,Oc.id(Oc.tempLivelyClassHolderVar),b.currentModuleAccessor||Oc.id("undefined"),y))),C);if("ClassExpression"===a)return r;
a=r;b.declarationWrapper&&h.classHolder===b.classHolder&&(a=Oc.funcCall(b.declarationWrapper,Oc.literal(n.name),Oc.literal("class"),a,b.classHolder,y));a=Oc.varDecl(n,a,"var");a[Oc.isTransformedClassVarDeclSymbol]=!0;return a};Oc.splitExportDefaultWithClass=function(e,h,n,b){return e.declaration&&e.declaration[Oc.isTransformedClassVarDeclSymbol]?[e.declaration,{declaration:e.declaration.declarations[0].id,type:"ExportDefaultDeclaration"}]:e};Oc.classToFunctionTransform=Wm;Oc.arr=Te;Oc.Path=Xg;Oc.parse=
Bi;Oc.stringify=mg;Oc.query=Rr;Oc.nodes=cv;Oc.Visitor=Kd;var rp=Oc.nodes;Oc.assign=rp.assign;Oc.member=rp.member;Oc.id=rp.id;Oc.exprStmt=rp.exprStmt;Oc.funcCall=rp.funcCall;Oc.literal=rp.literal;Oc.objectLiteral=rp.objectLiteral;Oc.varDecl=rp.varDecl;Oc.funcExpr=rp.funcExpr;Oc.returnStmt=rp.returnStmt;Oc.binaryExpr=rp.binaryExpr;Oc.ifStmt=rp.ifStmt;Oc.block=rp.block;Oc.firstIdRe=/^[^_a-z]/i;Oc.trailingIdRe=/[^_a-z0-9]/ig;Oc.isTransformedClassVarDeclSymbol=Symbol();Oc.methodKindSymbol=Symbol();Oc.tempLivelyClassVar=
"__lively_class__";Oc.tempLivelyClassHolderVar="__lively_classholder__";var kJ=function(){return Oc.Visitor.apply(this,arguments)||this};$jscomp.inherits(kJ,Oc.Visitor);kJ.prototype.accept=function(e,h,n){Oc.isFunctionNode(e)&&(h=Object.assign({},h,{classHolder:Oc.objectLiteral([]),currentMethod:e[Oc.methodKindSymbol]?e:h.currentMethod}));if("ClassExpression"===e.type||"ClassDeclaration"===e.type)e=Oc.replaceClass(e,h,n,h.options);"Super"===e.type&&(e=Oc.replaceSuper(e,h,n,h.options));"MemberExpression"===
e.type&&e.object&&"Super"===e.object.type&&(e=Oc.replaceSuperGetter(e,h,n,h.options));"AssignmentExpression"===e.type&&"MemberExpression"===e.left.type&&"Super"===e.left.object.type&&(e=Oc.replaceSuperSetter(e,h,n,h.options));"CallExpression"===e.type&&"Super"===e.callee.type&&(e=Oc.replaceDirectSuperCall(e,h,n,h.options));"CallExpression"===e.type&&e.callee.object&&"Super"===e.callee.object.type&&(e=Oc.replaceSuperMethodCall(e,h,n,h.options));e=Oc.Visitor.prototype.accept.call(this,e,h,n);return"ExportDefaultDeclaration"===
e.type?Oc.splitExportDefaultWithClass(e,h,n,h.options):e};kJ.run=function(e,h){var n=new this,b=h.classHolder||Oc.objectLiteral([]);return n.accept(e,{options:h,classHolder:b},[])};Oc.ClassReplaceVisitor=kJ;Oc.classToFunctionTransform=Wm;Oc.classToFunctionTransform=Wm;var tB=lively.FreezerRuntime.recorderFor("lively.classes/index.js");tB.runtime=mB;tB.classToFunctionTransform=Wm;tB.runtime=mB;tB.runtime=mB;tB.classToFunctionTransform=Wm;tB.classToFunctionTransform=Wm;var Jfa=Object.freeze({__proto__:null,
runtime:mB,classToFunctionTransform:Wm}),ji=lively.FreezerRuntime.recorderFor("lively.modules/src/import-modification.js");ji.arr=Te;ji.Path=Xg;ji.fuzzyParse=Bj;ji.query=Rr;ji.stringify=mg;ji.resource=T;var zt=function(e,h,n,b,c,l,a){this.System=e;this.intoModuleId=h;this.intoPackage=n;this.intoModuleSource=b;this.fromModuleId=c.moduleId;this.importData=c;this.alias=l;this.parsed=a||ji.fuzzyParse(b)};zt.run=function(e,h,n,b,c,l,a){return(new this(e,h,n,b,c,l,a)).run()};zt.prototype.run=function(){var e=
this.generateImportStatement(),h=e.standaloneImport,n=e.importedVarName,b=this.existingImportsOfFromModule(),c=b.imports,l=b.importsOfFromModule;b=b.importsOfVar;l=this.importsToBeReused(l,b,e);if(b.length)return{status:"not modified",newSource:this.intoModuleSource,generated:"",importedVarName:"",standaloneImport:h,from:b[0].start,to:b[0].end};if(l.length&&(e=this.modifyExistingImport(l,h)))return e;c=ji.arr.last(c);return this.insertNewImport(l,h,n,c?c.end:0)};zt.prototype.importsToBeReused=function(e,
h,n){n.isDefault&&(e=e.filter(function(b){return!b.specifiers.some(function(c){return"ImportDefaultSpecifier"==c.type})}));return e};zt.prototype.generateImportStatement=function(){var e=this.intoModuleId,h=this.fromModuleId,n=this.importData,b=this.intoPackage,c="default"===n.exported,l=this.alias||(c?n.local:n.exported),a=!c&&n.exported!==l;b=b&&b.name;var f=h,m=n.packageName,q=n.pathInPackage;if(n.isMain)f=m;else if(b===m)try{f=ji.resource(h).relativePathFrom(ji.resource(e)),f.startsWith(".")||
(f="./"+f)}catch(r){m&&"no group"!==m&&q&&(f=m+"/"+q)}else m&&"no group"!==m&&q&&(f=m+"/"+q);return{isDefault:c,standaloneImport:c?"import "+l+' from "'+f+'";':"import { "+n.exported+(a?" as "+l:"")+' } from "'+f+'";',importedVarName:l}};zt.prototype.existingImportsOfFromModule=function(){var e=this.System,h=this.fromModuleId,n=this.intoModuleId,b=this.importData,c=b.exported,l=b.local,a=this.alias,f="default"===c;b=this.parsed.body.filter(function(q){return"ImportDeclaration"===q.type});var m=f?
a||l:a||c;l=b.filter(function(q){if(!q.source||"string"!==typeof q.source.value)return null;q=e.decanonicalize(q.source.value,n);return h===q});a=l.filter(function(q){return(q.specifiers||[]).some(function(r){return f?"ImportDefaultSpecifier"===r.type&&r.local.name===m:ji.Path("imported.name").get(r)===c&&ji.Path("local.name").get(r)===m})});return{imports:b,importsOfFromModule:l,importsOfVar:a}};zt.prototype.modifyExistingImport=function(e,h){e=ji.arr.flatmap(e,function(m){return m.specifiers||[]});
if(!e.length)return null;e=$jscomp.makeIterator(ji.arr.partition(e,function(m){return"ImportDefaultSpecifier"===m.type}));var n=$jscomp.makeIterator(e.next().value).next().value,b=$jscomp.makeIterator(e.next().value).next().value;e=this.alias;var c=this.intoModuleSource,l=this.importData,a=l.exported;l=l.local;var f="default"===a;f?console.assert(!!b,"no ImportSpecifier found"):console.assert(b||n,"at least one kine of specifier is expected");if(f){n=c.slice(0,b.start).lastIndexOf("{")-1;if(0>n)return null;
b=(e||l)+",";a=c.slice(0,n);c=c.slice(n);a.endsWith(" ")&&a.endsWith("\n")||(b=" "+b);c.startsWith(" ")||(b+=" ");return{status:"modified",newSource:""+a+b+c,generated:b,standaloneImport:h,importedVarName:e||l,from:n,to:n+b.length}}n=b?b.end:n.end;f=(l=e&&e!==a)?a+" as "+e:a;b=b?", "+f:", { "+f+" }";return{status:"modified",newSource:""+c.slice(0,n)+b+c.slice(n),generated:b,standaloneImport:h,importedVarName:l?e:a,from:n,to:n+b.length}};zt.prototype.insertNewImport=function(e,h,n,b){b=void 0===b?
0:b;e&&e.length&&(b=ji.arr.last(e).end);var c=this.intoModuleSource;e=c.slice(0,b);c=c.slice(b);var l=h;e.length&&!e.endsWith("\n")&&(l="\n"+l);c.length&&!c.startsWith("\n")&&(l+="\n");return{status:"modified",newSource:e+l+c,generated:l,standaloneImport:h,importedVarName:n,from:b,to:b+l.length}};ji.ImportInjector=zt;var lJ=function(){};lJ.getGlobals=function(e,h){e=h||ji.fuzzyParse(e,{withComments:!0});h=(h=e.comments?e.comments.find(function(b){return b.isBlock&&b.text.startsWith("global")}):null)?
h.text.replace(/^global\s*/,"").split(",").map(function(b){return b.trim()}).filter(Boolean):[];var n=[].concat($jscomp.arrayFromIterable(h),$jscomp.arrayFromIterable(ji.query.knownGlobals));e=ji.query.findGlobalVarRefs(e,{jslintGlobalComment:!0}).filter(function(b){return!n.includes(b.name)}).map(function(b){return b.name});return ji.arr.compact([].concat($jscomp.arrayFromIterable(h),$jscomp.arrayFromIterable(e)))};lJ.run=function(e,h,n){n=n||ji.fuzzyParse(e,{withComments:!0});var b=(n=n.comments?
n.comments.find(function(l){return l.isBlock&&l.text.startsWith("global")}):null)?n.text.replace(/^global\s*/,"").split(",").map(function(l){return l.trim()}).filter(Boolean):[],c=h.filter(function(l){return!b.includes(l)});if(!c.length)return{status:"not modified",newSource:e,generated:"",from:0,to:0};if(!n)return n="/*global "+c.join(",")+"*/\n",{status:"modified",newSource:n+e,generated:n,from:0,to:n.length};h=n.start+2+n.text.length;c=c.join(",");b.length?c=","+c:n.text.startsWith("global ")||
(c=" "+c);n=h+c.length;return{status:"modified",newSource:e.slice(0,h)+c+e.slice(h),generated:c,from:h,to:n}};ji.GlobalInjector=lJ;var kE=function(){};kE.removeImports=function(e,h,n){n=n||ji.fuzzyParse(e);var b=ji.arr.flatmap(n.body,function(c){return"ImportDeclaration"===c.type&&c.specifiers.length?c.specifiers.map(function(l){return{local:l.local,importStmt:c}}):[]}).filter(function(c){return h.some(function(l){return l.local===c.local.name})});n=b.map(function(c){return{local:c.local.name,from:c.importStmt.source.value}});
e=ji.arr.uniq(b.map(function(c){var l=c.importStmt.specifiers.find(function(a){return c.local===a.local});ji.arr.remove(c.importStmt.specifiers,l);return c.importStmt})).slice().reverse().reduce(function(c,l){var a=c.source;c=c.changes;var f=l.start,m=l.end,q=l.specifiers,r=a.slice(0,f),u=a.slice(m);a=a.slice(f,m);(l=q.length?ji.stringify(l):"")&&l.includes("\n")&&!a.includes("\n")&&(l=l.replace(/\s+/g," "));a=r+l+u;c=c.concat({replacement:l,start:f,end:m});return{source:a,changes:c}},{source:e,changes:[]});
return Object.assign({},e,{removedImports:n})};kE.findUnusedImports=function(e){var h="string"===typeof e?ji.fuzzyParse(e):e;e=ji.arr.flatmap(h.body,function(c){return"ImportDeclaration"===c.type&&c.specifiers.length?c.specifiers.map(function(l){return{local:l.local,from:c.source?c.source.value:"",importStmt:c}}):[]});var n=e.map(function(c){return c.local});h=ji.query.resolveReferences(ji.query.scopes(h));h=Array.from(h.resolvedRefMap.keys()).filter(function(c){return!n.includes(c)});var b=ji.arr.uniq(h.map(function(c){return c.name}));
return e.filter(function(c){return!b.includes(c.local.name)}).map(function(c){return Object.assign({},c,{local:c.local.name})})};kE.removeUnusedImports=function(e){var h=ji.fuzzyParse(e);return this.removeImports(e,this.findUnusedImports(h),h)};ji.ImportRemover=kE;var wn=lively.FreezerRuntime.recorderFor("lively.modules/src/nodejs.js");wn.ensureParent=function(e,h,n){if(n)return n;n=e.id;var b=e.System;h=n.startsWith("file://")?n.replace("file://",""):n;if(n=b._nodeRequire("module").Module._cache[n])return n;
n={id:h,filename:h,paths:[]};(e=e.package())&&n.paths.push(wn.resource(e.url).join("node_modules/").path());return n};wn.relative=function(e,h){return wn.resource(e.id).parent().join(h).url.replace("file://","")};wn._require=vr;wn._resolve=wr;wn.resource=T;wn._require=vr;wn._require=vr;wn._resolve=wr;wn._resolve=wr;var fe=lively.FreezerRuntime.recorderFor("lively.modules/src/module.js");fe.module=xn;fe.isModuleLoaded=Fg;fe.doesModuleExist=Ni;fe.arr=Te;fe.obj=lf;fe.graph=$u;fe.parse=Bi;fe.query=Rr;
fe.computeRequireMap=ed;fe.moduleSourceChange=Md;fe.scheduleModuleExportsChange=le;fe.runScheduledExportChanges=Sd;fe.livelySystemEnv=BF;fe.Package=di;fe.isURL=re;fe.emit=Qm;fe.subscribe=ol;fe.defaultClassToFunctionConverterName="initializeES6ClassForLively";fe.classRuntime=mB;fe.ImportInjector=zt;fe.GlobalInjector=lJ;fe.ImportRemover=kE;fe._require=vr;fe._resolve=wr;fe.classHolder=jv;var mJ=function(){var e=/['"]format (esm|es6)['"];/,h=/['"]format cjs['"];/,n=/(^\s*|[}\);\n]\s*)(import\s+(['"]|(\*\s+as\s+)?[^"'\(\)\n;]+\s+from\s+['"]|\{)|export\s+\*\s+from\s+["']|export\s+(\{|default|function|class|var|const|let|async\s+function))/;
return function(b,c){return c&&c.format?("es6"==c.format&&"esm"==c.format,c.format):e.test(b.slice(0,5E3))||!h.test(b.slice(0,5E3))&&n.test(b)?"esm":h.test(b.slice(0,5E3))?"cjs":"global"}}();fe.detectModuleFormat=mJ;fe.detectModuleFormat=mJ;fe.detectModuleFormat=mJ;fe.classHolder.module=fe.module;fe.isModuleLoaded=Fg;fe.isModuleLoaded=Fg;fe.doesModuleExist=Ni;fe.doesModuleExist=Ni;fe.globalProps={initialized:!1,descriptors:{}};var yf=function(e,h){var n=this;if(!fe.isURL(h)&&!/^@/.test(h))throw Error("ModuleInterface constructor called with "+
h+" that does not seem to be a fully normalized module id.");this.System=e;this.id=h;this.recorderName="__lvVarRecorder";this.sourceAccessorName="__lvOriginalCode";this._scope=this._ast=this._source=this._recorder=null;this._observersOfTopLevelState=[];this._evaluationsInProgress=0;this._evalId=1;this.createdAt=this.lastModifiedAt=new Date;fe.subscribe("lively.modules/modulechanged",function(b){b.module===n.id&&n.reset()})};yf.prototype.fullName=function(){return this.id};yf.prototype.shortName=function(){return this.package().name+
"/"+this.pathInPackage()};yf.prototype.source=function(){var e=this;return"@empty"===this.id?Promise.resolve(""):this._source?Promise.resolve(this._source):this.System.resource(this.id).read().then(function(h){return e._source=h})};yf.prototype.setSource=function(e){this.sourceAccessorName&&this.recorderName&&e.includes("var "+this.recorderName)&&e.includes("var "+this.sourceAccessorName)||this._source===e||(this.reset(),this._source=e)};yf.prototype.ast=function(){var e=this,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==
c.nextAddress){if(e._ast)return c.return(e._ast);h=e;n=fe;b=n.parse;return c.yield(e.source(),2)}return c.return(h._ast=b.call(n,c.yieldResult))})};yf.prototype.scope=function(){var e=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return e._scope?n.return(e._scope):n.yield(e.ast(),2);h=n.yieldResult;return n.return(e._scope=fe.query.topLevelDeclsAndRefs(h).scope)})};yf.prototype.resolvedScope=function(){var e=this,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==
c.nextAddress?(h=e,n=fe.query,b=n.resolveReferences,c.yield(e.scope(),2)):c.return(h._scope=b.call(n,c.yieldResult))})};yf.prototype.metadata=function(){var e=this.System.loads?this.System.loads[this.id]:null;return e?e.metadata:null};yf.prototype.addMetadata=function(e){var h=this.System,n=this.id,b=this.metadata();e=b?Object.assign(b,e):e;b={};h.config({meta:(b[n]=e,b)});return h.meta[n]};yf.prototype.format=function(){var e=this.metadata();return e&&e.format?e.format:this._source?fe.detectModuleFormat(this._source):
"global"};yf.prototype.setFormat=function(e){return this.addMetadata({format:e})};yf.prototype.reset=function(){this._scope=this._ast=this._source=null};yf.prototype.get=function(){return this.System.get(this.id)};yf.prototype.load=function(e){var h=this,n,b,c,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return n=h,b=n.id,c=n.System,e&&h.addMetadata(e),(l=c.get(b))?a.jumpTo(2):a.yield(c.import(b),3);2!=a.nextAddress&&(l=a.yieldResult);return a.return(l)})};
yf.prototype.isLoaded=function(){return!!this.System.get(this.id)};yf.prototype.unloadEnv=function(){this._recorder=null;this._observersOfTopLevelState=[];delete fe.livelySystemEnv(this.System).loadedModules[this.id]};yf.prototype.unloadDeps=function(e){var h=this;e=fe.obj.merge({forgetDeps:!0,forgetEnv:!0},e);this.dependents().forEach(function(n){h.System.delete(n.id);h.System.loads&&delete h.System.loads[n.id];e.forgetEnv&&n.unloadEnv()})};yf.prototype.unload=function(e){var h=this,n,b,c,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==
a.nextAddress)return e=Object.assign({reset:!0,forgetDeps:!0,forgetEnv:!0},e),n=h,b=n.System,c=n.id,e.reset&&h.reset(),e.forgetDeps&&h.unloadDeps(e),h.System.delete(c),b.loads&&delete b.loads[c],b.meta&&delete b.meta[c],e.forgetEnv&&h.unloadEnv(),(l=b._livelyModulesTranslationCache)?a.yield(l.deleteCachedData(c),2):a.jumpTo(2);fe.emit("lively.modules/moduleunloaded",{module:h.id},Date.now(),h.System);a.jumpToEnd()})};yf.prototype.reload=function(e){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==
b.nextAddress?(e=fe.obj.merge({reloadDeps:!0,resetEnv:!0},e),n=[h],e.reloadDeps&&(n=h.dependents().concat(n)),b.yield(h.unload({forgetDeps:e.reloadDeps,forgetEnv:e.resetEnv}),2)):3!=b.nextAddress?b.yield(Promise.all(n.map(function(c){return c.id!==h.id&&c.load()})),3):b.yield(h.load(),0)})};yf.prototype.copyTo=function(e){var h=this,n,b,c,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return n=h.System.resource(e),b=n.write,m.yield(h.source(),3);if(2!=m.nextAddress)return m.yield(b.call(n,
m.yieldResult),2);c=h;l=c.System;a=fe.module(l,e);f=fe.obj.select(h,"_observersOfTopLevelState _scope _ast _source _recorder sourceAccessorName recorderName".split(" "));Object.assign(a,f);l.set(e,l.newModule(l.get(h.id)));return m.return(a)})};yf.prototype.renameTo=function(e,h){h=void 0===h?{}:h;var n=this,b,c,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:return b=h,c=void 0===b.unload?!0:b.unload,l=void 0===b.removeFile?!0:b.removeFile,f.yield(n.copyTo(e),
2);case 2:a=f.yieldResult;if(!c){f.jumpTo(3);break}return f.yield(n.unload({reset:!0,forgetDeps:!1,forgetEnv:!0}),3);case 3:if(!l){f.jumpTo(5);break}return f.yield(n.System.resource(n.id).remove(),5);case 5:return f.return(a)}})};yf.prototype.whenLoaded=function(e){if(this.isLoaded())try{e(this)}catch(h){console.error(h)}else fe.livelySystemEnv(this.System).onLoadCallbacks.push({moduleName:this.id,resolved:!0,callback:e})};yf.prototype.changeSourceAction=function(e){var h=this;return Promise.resolve(this.source()).then(function(n){return e(n)}).then(function(n){return h.changeSource(n)})};
yf.prototype.changeSource=function(e,h){h=Object.assign({doSave:!0,doEval:!0},h);var n=this.System,b=this.id,c=this.format(),l;this.reset();this.lastModifiedAt=new Date;return Promise.all([h.doSave&&this.System.resource(b).write(e),h.doEval&&fe.moduleSourceChange(n,b,e,c,h).then(function(a){return l=a})]).then(function(){return l})};yf.prototype.addDependencyToModuleRecord=function(e,h){var n=this;h=void 0===h?function(){}:h;var b=this.record(),c=e.record();if(b&&c){var l,a=b.dependencies.some(function(m,
q){if(m)return l=q,m&&m.name===e.id});a?c!==b.dependencies[l]&&b.dependencies.splice(l,1,c):b.dependencies.push(c);a&&b.setters[l]||(b.setters[a?l:b.dependencies.length-1]=h);var f;c.importers.some(function(m,q){if(m)return f=q,m&&m.name===n.id})?b!==c.importers[f]&&c.importers.splice(f,1,b):c.importers.push(b)}};yf.prototype.dependents=function(){var e=this;return fe.graph.hull(fe.graph.invert(fe.computeRequireMap(this.System)),this.id).map(function(h){return fe.module(e.System,h)})};yf.prototype.requirements=
function(){var e=this;return fe.graph.hull(fe.computeRequireMap(this.System),this.id).map(function(h){return fe.module(e.System,h)})};yf.prototype.directRequirements=function(){var e=this,h=(this.record()||{}).dependencies||[];return fe.arr.pluck(h.filter(Boolean),"name").map(function(n){return fe.module(e.System,n)})};yf.prototype.isMochaTest=function(){if(!this._source)return!1;var e=this._scope||(this._scope=fe.query.topLevelDeclsAndRefs(fe.parse(this._source)).scope);return fe.query.imports(e).map(function(h){return h.fromModule}).some(function(h){return h.endsWith("mocha-es6")||
h.endsWith("mocha-es6/index.js")})?!0:!1};yf.prototype.define=function(e,h,n,b){n=void 0===n?!0:n;var c=this.System,l=this.id,a=this.recorder,f=Symbol.for("lively-object-meta"),m=Symbol.for("lively-module-meta");"function"!==typeof h||!b||"function"!==b.kind&&"class"!==b.kind||(h[f]=b);h&&h[f]&&!h[m]&&(b=this.pathInPackage(),f=this.package(),h[m]={package:f?{name:f.name,version:f.version}:{},pathInPackage:b});a[e]=h;fe.scheduleModuleExportsChange(c,l,e,h,!1);this.notifyTopLevelObservers(e);(n=n||
!this.isEvalutionInProgress())&&fe.runScheduledExportChanges(c,l);return h};yf.prototype.undefine=function(e){delete this.recorder[e]};yf.prototype.subscribeToToplevelDefinitionChanges=function(e){this._observersOfTopLevelState.push(e);return e};yf.prototype.notifyTopLevelObservers=function(e){var h=this.recorder;fe.arr.include(["createOrExtendES6ClassForLively","lively.capturing-declaration-wrapper"],e)||this._observersOfTopLevelState.forEach(function(n){return n(e,h[e])})};yf.prototype.unsubscribeFromToplevelDefinitionChanges=
function(e){this._observersOfTopLevelState="string"===typeof e?this._observersOfTopLevelState.filter(function(h){return h.name!==e}):this._observersOfTopLevelState.filter(function(h){return h!==e})};yf.prototype.evaluationStart=function(){this._evaluationsInProgress++};yf.prototype.evaluationEnd=function(){this._evaluationsInProgress--;fe.runScheduledExportChanges(this.System,this.id)};yf.prototype.nextEvalId=function(){return this._evalId++};yf.prototype.isEvalutionInProgress=function(){return 0<
this._evaluationsInProgress};yf.prototype.env=function(){return this};yf.prototype.package=function(){return fe.Package.forModule(this.System,this)};yf.prototype.pathInPackage=function(){var e=this.package();return e&&0===this.id.indexOf(e.address)?this.id.slice(e.address.length).replace(/^\//,""):this.id};yf.prototype.imports=function(){var e=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(h=fe.query,n=h.imports,b.yield(e.scope(),2)):b.return(n.call(h,
b.yieldResult))})};yf.prototype.exports=function(){var e=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(h=fe.query,n=h.exports,b.yield(e.scope(),2)):b.return(n.call(h,b.yieldResult))})};yf.prototype.addImports=function(e){var h=this,n,b,c,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(h.source(),2);n=u.yieldResult;b=$jscomp.makeIterator(e);for(c=b.next();!c.done;c=b.next())l=c.value,a=
fe.module(h.System,l.from||l.moduleId),f=a.package(),m={exported:l.exported||l.local,moduleId:a.id,packageName:f.name,packageURL:f.url,pathInPackage:a.pathInPackage()},q=l.local,r=fe.ImportInjector.run(h.System,h.id,h.package(),n,m,q),n=r.newSource;return u.yield(h.changeSource(n),0)})};yf.prototype.addGlobalDeclaration=function(e){var h=this,n,b,c,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?f.yield(h.source(),2):3!=f.nextAddress?(n=f.yieldResult,b=fe.GlobalInjector.run(n,
e),c=b.status,l=b.newSource,(a="modified"===c)?f.yield(h.changeSource(l),3):f.jumpTo(3)):f.return(a)})};yf.prototype.removeImports=function(e){var h=this,n,b,c,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return e.length?a.yield(h.source(),2):a.return();case 2:return n=a.yieldResult,a.yield(fe.ImportRemover.removeImports(n,e),3);case 3:return b=a.yieldResult,c=b.source,l=b.removedImports,a.yield(h.changeSource(c),4);case 4:l.forEach(function(f){return delete h.recorder[f.local]}),
a.jumpToEnd()}})};yf.prototype._localDeclForRefAt=function(e){var h=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return c.yield(h.resolvedScope(),2);n=c.yieldResult;b=fe.query.refWithDeclAt(e,n);return c.return(b&&{decl:b.decl,id:b.declId,declModule:h})})};yf.prototype._localDeclForName=function(e){var h=this,n,b,c,l,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(h.resolvedScope(),2);n=r.yieldResult;
c=$jscomp.makeIterator(n.resolvedRefMap.values());for(l=c.next();!l.done;l=c.next())if(f=a=l.value,m=f.ref,q=m.name,e===q){b=a;break}return r.return(b&&{decl:b.decl,id:b.declId,declModule:h})})};yf.prototype._importForNSRefAt=function(e){var h=this,n,b,c,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(h.resolvedScope(),2);n=u.yieldResult;b=n.node;c=fe.query.nodesAtIndex(b,e);if(2>c.length)return u.return([null,null]);l=c[c.length-1];a=
c[c.length-2];if("Identifier"!=l.type||"MemberExpression"!=a.type||a.computed||"Identifier"!==a.object.type)return u.return([null,null]);f=n.resolvedRefMap.get(a.object)||{};m=f.decl;if(!m||"ImportDeclaration"!==m.type)return u.return([null,null]);q=a.object.name;r=m.specifiers.find(function(v){return v.local.name===q});return u.return("ImportNamespaceSpecifier"!==r.type?[null,null]:[m,r.local,l.name])})};yf.prototype._resolveImportedDecl=function(e){var h=this,n,b,c,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:if(!e)return q.return([]);
n=e.id;b=n.name;return q.yield(h.imports(),2);case 2:c=q.yieldResult;l=c.find(function(r){return r.local==b});if(!l){q.jumpTo(3);break}a=fe.module(h.System,l.fromModule,h.id);f=[e];m=f.concat;return q.yield(a.bindingPathForExport(l.imported),4);case 4:return q.return(m.call(f,q.yieldResult));case 3:return q.return([e])}})};yf.prototype.bindingPathFor=function(e){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield(h._localDeclForName(e),2):4!=
b.nextAddress?(n=b.yieldResult)?b.yield(h._resolveImportedDecl(n),4):b.jumpTo(0):b.return(b.yieldResult)})};yf.prototype.bindingPathForExport=function(e){var h=this,n,b,c,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:return m.yield(h.resolvedScope(),2);case 2:return m.yield(h.exports(),3);case 3:n=m.yieldResult;b=n.find(function(q){return q.exported===e});if(!b.fromModule)return m.return(h._resolveImportedDecl({decl:b.decl,id:b.declId,declModule:b&&
b.decl?h:null}));c=fe.module(h.System,b.fromModule,h.id);l={decl:b.node,id:b.declId,declModule:h};a=[l];f=a.concat;return m.yield(c.bindingPathForExport(b.imported),5);case 5:return m.return(f.call(a,m.yieldResult))}})};yf.prototype.bindingPathForRefAt=function(e){var h=this,n,b,c,l,a,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(h._localDeclForRefAt(e),2);case 2:n=v.yieldResult;if(!n){v.jumpTo(3);break}return v.yield(h._resolveImportedDecl(n),
4);case 4:return v.return(v.yieldResult);case 3:return b=$jscomp,c=b.makeIterator,v.yield(h._importForNSRefAt(e),5);case 5:l=c.call(b,v.yieldResult);a=l.next().value;f=l.next().value;m=l.next().value;if(!a)return v.return([]);q=fe.module(h.System,a.source.value,h.id);r=[{decl:a,declModule:h,id:f}];u=r.concat;return v.yield(q.bindingPathForExport(m),6);case 6:return v.return(u.call(r,v.yieldResult))}})};yf.prototype.definitionForRefAt=function(e){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(h.bindingPathForRefAt(e),2);n=b.yieldResult;return b.return(1>n.length?null:n[n.length-1].decl)})};yf.prototype.ensureRecord=function(){var e=this.System,h=e._loader.moduleRecords;return h[this.id]?h[this.id]:h[this.id]={name:this.id,exports:e.newModule({}),dependencies:[],importers:[],setters:[]}};yf.prototype.record=function(){var e=this.System._loader.moduleRecords[this.id];if(!e)return null;e.hasOwnProperty("__lively_modules__")||(e.__lively_modules__={evalOnlyExport:{}});
return e};yf.prototype.updateRecord=function(e){var h=this.record();if(!h)throw Error("es6 environment global of "+this.id+": module not loaded, cannot get export object!");h.locked=!0;try{return e(h)}finally{h.locked=!1}};yf.prototype.search=function(e,h){var n=this,b,c,l,a,f,m,q,r,u,v,y,z,A,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress)return h=Object.assign({excludedModules:[]},h),h.excludedModules.some(function(F){return"string"===typeof F?F===n.id:F instanceof
RegExp?F.test(n.id):"function"===typeof F?F(n.id):!1})?G.return([]):G.yield(n.source(),2);b=G.yieldResult;e instanceof RegExp?(l="g",e.ignoreCase&&(l+="i"),e.multiline&&(l+="m"),c=RegExp(e.source,l)):c=RegExp(e,"g");for(f=[];null!==(a=c.exec(b));)f.push([a.index,a[0].length]);q=m=0;r=1;for(u=0;m<b.length&&q<f.length;m++)"\n"==b[m]&&(r++,u=m+1),v=$jscomp.makeIterator(f[q]),y=v.next().value,z=v.next().value,m===y&&(A=b.slice(u).indexOf("\n"),A=-1===A?b.length:A+u,C=n.package(),f[q]={moduleId:n.id,packageName:C?
C.name:void 0,pathInPackage:C?n.pathInPackage():n.id,isLoaded:n.isLoaded(),length:z,line:r,column:m-u,lineString:1E3<A-u?"..."+b.slice(m-10,m+100)+"...":b.slice(u,A)},q++);return G.return(f)})};yf.prototype.toString=function(){return"module("+this.id+")"};$jscomp.global.Object.defineProperties(yf.prototype,{dontTransform:{configurable:!0,enumerable:!0,get:function(){return[this.recorderName,this.sourceAccessorName,"global","self","_moduleExport","_moduleImport","localStorage","prompt","alert","fetch",
"getComputedStyle"].concat($jscomp.arrayFromIterable(this.isMochaTest()?[]:fe.GlobalInjector.getGlobals(this._source))).concat(fe.query.knownGlobals)}},recorder:{configurable:!0,enumerable:!0,set:function(e){return this._recorder=e},get:function(){if(this._recorder)return this._recorder;var e=this.System,h=this;if(!fe.globalProps.initialized){fe.globalProps.initialized=!0;for(var n in e.global)if(e.global.__lookupGetter__(n)||"closed"==n)fe.globalProps.descriptors[n]={value:void 0,configurable:!0,
writable:!0}}n={};if(e.get("@system-env").node){var b=fe._require.bind(null,this);b.resolve=fe._resolve.bind(null,this);n.require={configurable:!0,writable:!0,value:b}}b={};return this._recorder=Object.create(e.global,Object.assign({},fe.globalProps.descriptors,{},n,(b.event={configurable:!0,writable:!0,value:void 0},b.System={configurable:!0,writable:!0,value:e},b.__currentLivelyModule={value:h},b[fe.defaultClassToFunctionConverterName]={configurable:!0,writable:!0,value:fe.classRuntime.initializeClass},
b[this.varDefinitionCallbackName]={value:function(c,l,a,f,m){m=m||{};m.kind=l;return h.define(c,a,!1,m)}},b._moduleExport={value:function(c,l){fe.scheduleModuleExportsChange(e,h.id,c,l,!0)}},b._moduleImport={value:function(c,l){var a=e.decanonicalize(c,h.id),f=e.get(a);if(f){h.addDependencyToModuleRecord(fe.module(e,a),function(m){return Object.assign(h.recorder,m)});if(void 0==l)return f;f.hasOwnProperty(l)||console.warn("import from "+f+": Has no export "+l+"!");return f[l]}console.warn("import of "+
l+" failed: "+c+" (tried as "+h.id+") is not loaded!")}},b)))}},varDefinitionCallbackName:{configurable:!0,enumerable:!0,get:function(){return"defVar_"+this.id}}});fe.ModuleInterface=yf;fe.default=xn;var Nd=lively.FreezerRuntime.recorderFor("lively.modules/src/instrumentation.js");Nd.canonicalURL=function(e){var h=e.match(/([^:]+:\/\/)(.*)/);if(h){var n=h[1];e=h[2]}e=e.replace(/([^:])\/[\/]+/g,"$1/");return(n||"")+e};Nd.prepareNodejsCaching=function(){var e=System._nodeRequire("fs"),h=System._nodeRequire("path"),
n="win32"===Nd.process.platform;h=n||"/"!==Nd.process.cwd()?Nd.process.cwd():h.join(Nd.process.env.HOME,".lively.next");Nd.nodejsCacheDirURL=n?"file:///"+h.replace(/\\/g,"/"):"file://"+h;e.existsSync(h)||e.mkdirSync(h)};Nd.getExceptions=wi;Nd.setExceptions=rm;Nd.prepareCodeForCustomCompile=eA;Nd.prepareTranslatedCodeForSetterCapture=Xx;Nd.getCachedNodejsModule=function(e,h){try{var n=e._nodeRequire("module").Module,b=n._resolveFilename(h.name.replace(/^file:\/\//,"").replace(/^\/([a-z]:\/)/i,"$1"));
return n._cache[b]}catch(c){e.debug&&console.log("[lively.modules getCachedNodejsModule] %s unknown to nodejs",h.name)}return null};Nd.addNodejsWrapperSource=function(e,h){var n=Nd.getCachedNodejsModule(e,h);if(n)return h.metadata.format="esm",h.source="var exports = System._nodeRequire('"+n.id+"'); export default exports;\n"+Nd.properties.allOwnPropertiesOrFunctions(n.exports).map(function(b){return Nd.isValidIdentifier(b)?"export var "+b+" = exports['"+b+"'];":'/*ignoring export "'+b+'" b/c it is not a valid identifier*/'}).join("\n"),
e.debug&&console.log("[lively.modules customTranslate] loading %s from nodejs module cache",h.name),!0;e.debug&&console.log("[lively.modules customTranslate] %s not yet in nodejs module cache",h.name);return!1};Nd.customTranslate=function(e,h){var n=this,b,c,l,a,f,m,q,r,u,v,y,z,A,C,G,F,N,L,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(la){switch(la.nextAddress){case 1:b=n;c=b.debug;if(a=(l=h.metadata)&&l.hasOwnProperty("instrument")&&!l.instrument||Nd.exceptions.some(function(wa){return wa(h.name)}))return c&&
console.log("[lively.modules customTranslate ignoring] %s",h.name),la.return(e(h));if(Nd.isNode&&Nd.addNodejsWrapperSource(b,h))return c&&console.log("[lively.modules] loaded %s from nodejs cache",h.name),la.return(e(h));f=Date.now();m=Nd.detectModuleFormat(h.source,l);q=Nd.module(b,h.name);r=!1;u="esm"===m;q.setSource(h.source);la.setCatchFinallyBlocks(2);v=b.useModuleTranslationCache;y=b.global.indexedDB;z=v&&String(Nd.string.hashCode(h.source));if(v&&y&&u)return A=b._livelyModulesTranslationCache||
(b._livelyModulesTranslationCache=new Nd.BrowserModuleTranslationCache),la.yield(A.fetchStoredModuleSource(h.name),8);if(!(Nd.isNode&&v&&u)){la.jumpTo(5);break}A=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Nd.NodeModuleTranslationCache);return la.yield(A.fetchStoredModuleSource(h.name),7);case 7:if((C=la.yieldResult)&&C.hash==z&&C.timestamp>=Nd.NodeModuleTranslationCache.earliestDate&&C.source)return l.format="register",l.deps=[],c&&console.log("[lively.modules customTranslate] loaded %s from filesystem cache after %sms",
h.name,Date.now()-f),la.return(Promise.resolve(C.source));la.jumpTo(5);break;case 8:if((C=la.yieldResult)&&C.hash==z&&C.timestamp>=Nd.BrowserModuleTranslationCache.earliestDate&&C.source)return l.format="register",l.deps=[],c&&console.log("[lively.modules customTranslate] loaded %s from browser cache after %sms",h.name,Date.now()-f),la.return(Promise.resolve(C.source));case 5:la.leaveTryBlock(3);break;case 2:G=la.enterCatchBlock(),console.error("[lively.modules customTranslate] error reading module translation cache: "+
G.stack);case 3:return F={},u?(q.recorderName="__lvVarRecorder",q.recorder===b.global&&q.unloadEnv(),h.metadata.format="esm",N=Nd.prepareCodeForCustomCompile(b,h.source,h.name,q,c),F=N.options,L=N.source,h.source=L,r=h.metadata["lively.modules instrumented"]=!0,c&&console.log("[lively.modules] loaded %s as es6 module",h.name)):"global"===h.metadata.format&&(q.recorderName="System.global",q.recorder=b.global,h.metadata.format="global",W=Nd.prepareCodeForCustomCompile(b,h.source,h.name,q,c),F=W.options,
L=W.source,h.source=L,r=h.metadata["lively.modules instrumented"]=!0,c&&console.log("[lively.modules] loaded %s as instrumented global module",h.name)),r||c&&console.log("[lively.modules] customTranslate ignoring %s b/c don't know how to handle format %s",h.name,h.metadata.format),la.return(e(h).then(function(wa){var D,Q,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(O){switch(O.nextAddress){case 1:0===wa.indexOf("System.register(")&&(c&&console.log("[lively.modules customTranslate] Installing System.register setter captures for %s",
h.name),wa=Nd.prepareTranslatedCodeForSetterCapture(b,wa,h.name,q,F,c));if(Nd.isNode&&v&&u)return D=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Nd.NodeModuleTranslationCache),O.setCatchFinallyBlocks(8),O.yield(D.cacheModuleSource(h.name,z,wa),10);if(!(v&&y&&u)){O.jumpTo(3);break}D=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Nd.BrowserModuleTranslationCache);O.setCatchFinallyBlocks(5);return O.yield(D.cacheModuleSource(h.name,z,wa),7);case 7:c&&
console.log("[lively.modules customTranslate] stored cached version for %s",h.name);O.leaveTryBlock(3);break;case 5:Q=O.enterCatchBlock();console.error("[lively.modules customTranslate] failed storing module cache: "+Q.stack);O.jumpTo(3);break;case 10:c&&console.log("[lively.modules customTranslate] stored cached version in filesystem for %s",h.name);O.leaveTryBlock(3);break;case 8:J=O.enterCatchBlock(),console.error("[lively.modules customTranslate] failed storing module cache: "+J.stack);case 3:return c&&
console.log("[lively.modules customTranslate] done %s after %sms",h.name,Date.now()-f),O.return(wa)}})}))}})};Nd.instrumentSourceOfEsmModuleLoad=Gg;Nd.instrumentSourceOfGlobalModuleLoad=Qk;Nd.wrapModuleLoad=Xm;Nd.unwrapModuleLoad=ew;Nd.parse=Bi;Nd.nodes=cv;Nd.isValidIdentifier=co;var cQ=Nd.nodes;Nd.funcCall=cQ.funcCall;Nd.member=cQ.member;Nd.literal=cQ.literal;Nd.evalCodeTransform=mr;Nd.evalCodeTransformOfSystemRegisterSetters=Po;Nd.arr=Te;Nd.string=Hg;Nd.properties=mp;Nd.module=xn;Nd.detectModuleFormat=
mJ;Nd.resource=T;Nd.installHook=rd;Nd.removeHook=Yd;Nd.isHookInstalled=sd;Nd.classToFunctionTransform=Wm;Nd.isNode=System.get("@system-env").node;var lE=function(){};lE.prototype.cacheModuleSource=function(e,h,n){throw Error("not yet implemented");};lE.prototype.fetchStoredModuleSource=function(e){throw Error("not yet implemented");};lE.prototype.deleteCachedData=function(e){throw Error("not yet implemented");};$jscomp.global.Object.defineProperties(lE,{earliestDate:{configurable:!0,enumerable:!0,
get:function(){return+new Date("Sun Oct 18 2020 16:00:00 GMT-0800 (PST)")}}});Nd.ModuleTranslationCache=lE;Nd.nodejsCacheDirURL=null;var kv=function(){return Nd.ModuleTranslationCache.apply(this,arguments)||this};$jscomp.inherits(kv,Nd.ModuleTranslationCache);kv.prototype.ensurePath=function(e){var h=this,n,b,c,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return q.yield(h.moduleCacheDir.join(e).exists(),2);case 2:if(q.yieldResult)return q.return();
n="";l=$jscomp.makeIterator(e.split("/"));a=l.next();case 3:if(a.done){q.jumpTo(0);break}f=a.value;n+=f+"/";b=h.moduleCacheDir.join(n);return q.yield(b.exists(),6);case 6:if(q.yieldResult){q.jumpTo(7);break}q.setCatchFinallyBlocks(8);return q.yield(b.mkdir(),10);case 10:q.leaveTryBlock(7);break;case 8:if(m=q.enterCatchBlock(),"EEXIST"!=m.code)throw m;case 7:return b=Nd.resource("file://"+n+"/package.json"),q.yield(b.exists(),11);case 11:if(!q.yieldResult){q.jumpTo(4);break}return q.yield(b.read(),
13);case 13:return c=q.yieldResult,q.yield(h.moduleCacheDir.join(n+"/package.json").write(c),4);case 4:a=l.next(),q.jumpTo(3)}})};kv.prototype.dumpModuleCache=function(){var e=this,h,n,b,c,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:n=f.forIn(System._nodeRequire("module").Module._cache);case 2:if(null==(h=n.getNext())){f.jumpTo(0);break}b=Nd.resource("file://"+h);return f.yield(b.exists(),5);case 5:if(!f.yieldResult){f.jumpTo(2);break}c=e;l=c.cacheModuleSource;
a=h;return f.yield(b.read(),8);case 8:return f.yield(l.call(c,a,"NO_HASH",f.yieldResult),2)}})};kv.prototype.getFileName=function(e){return e.match(/([^\/]*.)(\.js)?$/)[0]};kv.prototype.fetchStoredModuleSource=function(e){var h=this,n,b,c,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return e=e.replace("file://",""),n=h.getFileName(e),b=e.replace(n,""),c=h.moduleCacheDir.join(e),q.yield(c.exists(),2);case 2:return q.yieldResult?q.yield(c.stat(),
3):q.return(null);case 3:return l=q.yieldResult,a=l.birthtime,q.yield(c.read(),4);case 4:return f=q.yieldResult,q.yield(h.moduleCacheDir.join(b+"/.hash_"+n).read(),5);case 5:return m=q.yieldResult,q.return({source:f,timestamp:a,hash:m})}})};kv.prototype.cacheModuleSource=function(e,h,n){var b=this,c,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?(e=e.replace("file://",""),c=b.getFileName(e),l=e.replace(c,""),a.yield(b.ensurePath(l),2)):3!=a.nextAddress?a.yield(b.moduleCacheDir.join(e).write(n),
3):a.yield(b.moduleCacheDir.join(l+"/.hash_"+c).write(h),0)})};kv.prototype.deleteCachedData=function(e){var h=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?(e=e.replace("file://",""),n=h.getFileName(e),e.replace(n,""),b=h.moduleCacheDir.join(e),c.yield(b.exists(),2)):3!=c.nextAddress?c.yieldResult?c.yield(b.remove(),3):c.return(!1):c.return(!0)})};$jscomp.global.Object.defineProperties(kv.prototype,{moduleCacheDir:{configurable:!0,enumerable:!0,get:function(){Nd.nodejsCacheDirURL||
Nd.prepareNodejsCaching();return Nd.resource(Nd.nodejsCacheDirURL+"/.module_cache/")}}});Nd.NodeModuleTranslationCache=kv;var lv=function(e){e=void 0===e?"lively.modules-module-translation-cache":e;var h=Nd.ModuleTranslationCache.call(this)||this;h.version=2;h.sourceCodeCacheStoreName="sourceCodeStore";h.dbName=e;h.db=h.openDb();return h};$jscomp.inherits(lv,Nd.ModuleTranslationCache);lv.prototype.openDb=function(){var e=this,h=System.global.indexedDB.open(this.version);return new Promise(function(n,
b){h.onsuccess=function(c){n(this.result)};h.onerror=function(c){return b(c.target)};h.onupgradeneeded=function(c){return c.currentTarget.result.createObjectStore(e.sourceCodeCacheStoreName,{keyPath:"moduleId"})}})};lv.prototype.deleteDb=function(){var e=System.global.indexedDB.deleteDatabase(this.dbName);return new Promise(function(h,n){e.onerror=function(b){return n(b.target)};e.onsuccess=function(b){return h(b)}})};lv.prototype.closeDb=function(){var e=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(e.db,2);h=b.yieldResult;n=h.close();return b.return(new Promise(function(c,l){n.onsuccess=function(a){c(this.result)};n.onerror=function(a){return l(a.target.errorCode)}}))})};lv.prototype.cacheModuleSource=function(e,h,n){var b=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.db,2);c=l.yieldResult;return l.return(new Promise(function(a,f){var m=c.transaction([b.sourceCodeCacheStoreName],"readwrite"),q=m.objectStore(b.sourceCodeCacheStoreName),
r=Date.now();q.put({moduleId:e,hash:h,source:n,timestamp:r});m.oncomplete=a;m.onerror=f}))})};lv.prototype.fetchStoredModuleSource=function(e){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(h.db,2);n=b.yieldResult;return b.return(new Promise(function(c,l){var a=n.transaction([h.sourceCodeCacheStoreName]).objectStore(h.sourceCodeCacheStoreName).get(e);a.onerror=l;a.onsuccess=function(f){return c(a.result)}}))})};lv.prototype.deleteCachedData=
function(e){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(h.db,2);n=b.yieldResult;return b.return(new Promise(function(c,l){var a=n.transaction([h.sourceCodeCacheStoreName],"readwrite").objectStore(h.sourceCodeCacheStoreName).delete(e);a.onerror=l;a.onsuccess=function(f){return c(a.result)}}))})};ya("ai",lv);Nd.BrowserModuleTranslationCache=lv;Nd.node_modulesDir=System.decanonicalize("lively.modules/node_modules/");Nd.exceptions=[function(e){return!e.endsWith(".js")&&
!e.endsWith(".jsx")&&!e.startsWith("https://jspm.dev")},function(e){return e.endsWith("dist/acorn.js")||e.endsWith("dist/escodegen.browser.js")||e.endsWith("bowser.js")||e.endsWith("TweenMax.min.js")},function(e){return e.endsWith("babel-core/browser.js")||e.endsWith("system.src.js")||e.includes("systemjs-plugin-babel")}];Nd.pendingConfigs=[];Nd.configInitialized=!1;Nd.prepareCodeForCustomCompile=eA;Nd.prepareCodeForCustomCompile=eA;Nd.prepareTranslatedCodeForSetterCapture=Xx;Nd.prepareTranslatedCodeForSetterCapture=
Xx;Nd.wrapModuleLoad=Xm;Nd.wrapModuleLoad=Xm;Nd.unwrapModuleLoad=ew;Nd.unwrapModuleLoad=ew;Nd.getExceptions=wi;Nd.getExceptions=wi;Nd.setExceptions=rm;Nd.setExceptions=rm;Nd.instrumentSourceOfEsmModuleLoad=Gg;Nd.instrumentSourceOfEsmModuleLoad=Gg;Nd.instrumentSourceOfGlobalModuleLoad=Qk;Nd.instrumentSourceOfGlobalModuleLoad=Qk;var eg=lively.FreezerRuntime.recorderFor("lively.modules/src/resource.js");eg.fetchResource=function(e,h){var n=this,b,c,l,a,f,m,q,r,u,v,y,z,A,C,G,F,N,L,W,la,wa,D,Q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:b=
n;c=25E4;l=b.resource(h.name);a=b.get("@system-env").node&&!l.isNodeJSFileResource;if(!a){J.jumpTo(2);break}return J.yield(Kfa(h.name),3);case 3:l=J.yieldResult;case 2:if(!l)return J.return(e(h));if(eg.jsFileHashMap||b.get("@system-env").node){J.jumpTo(4);break}q=eg;return J.yield(b.resource(b.baseURL).join("__JS_FILE_HASHES__").readJson(),5);case 5:q.jsFileHashMap=J.yieldResult;case 4:r=b.useModuleTranslationCache;u=b.global.indexedDB;v=b._livelyModulesTranslationCache;if(b.get("@system-env").node||
!r||!u||!v){J.jumpTo(6);break}return J.yield(v.fetchStoredModuleSource(h.name),7);case 7:if((y=J.yieldResult)&&(eg.jsFileHashMap[h.name.replace(b.baseURL,"/")]==y.hash||h.name.includes("jspm")))return h.metadata.instrument=!1,J.return(y.source);case 6:if(l.isResource&&l.ext()&&l.ext().startsWith("css"))return J.return("");J.setCatchFinallyBlocks(8);if(!l.isResource){z=l;J.jumpTo(10);break}return J.yield(l.read(),11);case 11:z=J.yieldResult;case 10:f=z;J.leaveTryBlock(9);break;case 8:m=A=J.enterCatchBlock();
case 9:if(!m||!b.get("@system-env").browser){J.jumpTo(12);break}C=l.url.startsWith("http");G=!l.url.startsWith(document.location.origin);if(!C||!G){J.jumpTo(12);break}J.setCatchFinallyBlocks(14);return J.yield(l.makeProxied().read(),16);case 16:f=J.yieldResult;m=null;J.leaveTryBlock(12);break;case 14:J.enterCatchBlock();case 12:if(m)throw m;if(!a){J.jumpTo(17);break}F=f.headers||{};N=F._headers;L=$jscomp.makeIterator(N&&N["content-encoding"]||[]);W=L.next().value;return"br"==W?(la=eg.Buffer,wa=la.from,
D=eg.brotli,Q=D.decompress,J.yield(f.buffer(),21)):J.yield(f.text(),20);case 20:f=J.yieldResult;J.jumpTo(17);break;case 21:f=wa.call(la,Q.call(D,J.yieldResult)).toString();case 17:if(!(f.length>c&&$world)||b._loadingIndicator){J.jumpTo(22);break}b._loadingIndicator=$world.execCommand("open loading indicator",{label:"loading module",status:h.name.replace(b.baseURL,"")});return J.yield(eg.promise.delay(500),23);case 23:if(!b._loadingIndicator){J.jumpTo(22);break}return J.yield(b._loadingIndicator.whenRendered(),
22);case 22:return J.return(f)}})};eg.livelyProtocol=function(e,h){var n=h.match(eg.livelyURLRe);if(!n)return e(h);e=$jscomp.makeIterator(n);e.next();e.next();var b=e.next().value;return{read:function(){var c="undefined"!==typeof $world&&$world.getMorphWithId(b);return Promise.resolve(c?c.textString:"/*Could not locate "+b+"*/")},write:function(c){var l="undefined"!==typeof $world&&$world.getMorphWithId(b);if(!l)return Promise.reject("Could not save morph "+b);l.textString=c;return Promise.resolve(this)}}};
eg.wrapResource=yF;eg.unwrapResource=tL;eg.resource=T;eg.Resource=If;eg.installHook=rd;eg.removeHook=Yd;eg.isHookInstalled=sd;eg.brotli=eg.brotli||void 0;if(System.get("@system-env").node){var Kfa=System._nodeRequire("node-fetch");eg.brotli=System._nodeRequire("brotli")}eg.jsFileHashMap=eg.jsFileHashMap||void 0;eg.livelyURLRe=/^lively:\/\/([^\/]+)\/(.*)$/;eg.wrapResource=yF;eg.wrapResource=yF;eg.unwrapResource=tL;eg.unwrapResource=tL;var $y=function(){return eg.Resource.apply(this,arguments)||this};
$jscomp.inherits($y,eg.Resource);$y.prototype.read=function(){var e=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){h=e.morphId;n="undefined"!==typeof $world&&$world.getMorphWithId(h);return b.return(Promise.resolve(n?n.textString:"/*Could not locate "+h+"*/"))})};$y.prototype.write=function(e){var h=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){n=h.morphId;b="undefined"!==typeof $world&&$world.getMorphWithId(n);if(!b)return c.return(Promise.reject("Could not save morph "+
n));b.textString=e;return c.return(Promise.resolve(h))})};$y.prototype.exists=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return("undefined"!==typeof $world&&$world.getMorphWithId(e.morphId))})};$y.prototype.remove=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){"undefined"!==typeof $world&&$world.getMorphWithId(e.morphId).remove();return h.return(!0)})};$jscomp.global.Object.defineProperties($y.prototype,{canDealWithJSON:{configurable:!0,
enumerable:!0,get:function(){return!1}},morphId:{configurable:!0,enumerable:!0,get:function(){var e=this.url.match(eg.livelyURLRe);e=$jscomp.makeIterator(e);e.next();e.next();return e.next().value}}});eg.LivelyResource=$y;var dQ={name:"lively.modules",matches:function(e){return e.match(eg.livelyURLRe)},resourceClass:eg.LivelyResource};eg.resourceExtension=dQ;eg.resourceExtension=dQ;eg.resourceExtension=dQ;eg.registerExtension=ma;eg.promise=Kf;eg.registerExtension(eg.resourceExtension);var fd=lively.FreezerRuntime.recorderFor("lively.modules/src/system.js");
fd.wrapModuleResolution=zF;fd.unwrapModuleResolution=AF;fd.livelySystemEnv=BF;fd.systems=function(){System.constructor.systems||(System.constructor.systems={});return System.constructor.systems};fd.nameOfSystem=function(e){return Object.keys(fd.systems()).detect(function(h){return fd.systems()[h]===e})};fd.getSystem=Yx;fd.removeSystem=Zx;fd.makeSystem=function(e){return fd.prepareSystem(new System.constructor,e)};fd.prepareSystem=CF;fd.urlQuery=function(){return"undefined"!==typeof document&&document.location?
(document.location.search||"").replace(/^\?/,"").split("&").reduce(function(e,h){var n=h.split("=");h=n[0];n=n[1];"true"===n||"false"===n?n=eval(n):isNaN(Number(n))||(n=Number(n));e[h]=n;return e},{}):{}};fd.preNormalize=function(e,h,n){".."===h&&(h="../index.js");h=h.replace(fd.doubleSlashRe,function(f){return":"===f[0]?f:f[0]+"/"});var b=e.get("@lively-env").packageRegistry;if(b){var c=n&&b.findPackageHavingURL(n);if(c){var l=c.map,a=c.url;if(l=l&&l[h]||e.map[h])"object"===typeof l&&(l=fd.normalize_doMapWithObject(l,
c,e)),"string"===typeof l&&""!==l&&(h=l),h.startsWith(".")&&(h=fd.urlResolve(fd.join(a,h)))}}b&&(e=b.resolvePath(h,n))&&(e.endsWith("/")&&!h.endsWith("/")&&(e=e.slice(0,-1)),!e.endsWith("/")&&h.endsWith("/")&&(e+="/"),h=e);return h};fd.postNormalize=function(e,h,n){n=h.replace(fd.jsExtRe,"");if(h.endsWith("/"))return h;var b=e.get("@lively-env").packageRegistry;if(b){if(e=b.findPackageWithURL(n))return e=(e.main||"index.js").replace(fd.dotSlashStartRe,""),h=n.replace(fd.trailingSlashRe,"")+"/"+e}else if(n in
e.packages&&(e=e.packages[n].main))return h=n.replace(fd.trailingSlashRe,"")+"/"+e.replace(fd.dotSlashStartRe,"");return(n=h.match(fd.jsonJsExtRe))?n[1]:h};fd.checkExistence=function(e,h){var n,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){h._fileCheckMap=h._fileCheckMap||{};if(e in h._fileCheckMap)return l.return(h._fileCheckMap[e]);if((n=h._livelyModulesTranslationCache)&&n.fetchStoredModuleSource(e))return l.return(h._fileCheckMap[e]=!0);b=h._fileCheckMap;
c=e;return l.yield(fd.resource(e).exists(),2)}return l.return(b[c]=l.yieldResult)})};fd.normalizeHook=function(e,h,n,b){var c=this,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:if(n&&"cjs"==h)return u.return("cjs");l=c;a=fd.preNormalize(l,h,n);return u.yield(e(a,n,b),2);case 2:f=u.yieldResult;m=fd.postNormalize(l,f||a,!1);q=m.startsWith("file:");l.debug&&console.log("[normalize] "+h+" => "+m);if(fd.jsExtRe.test(h)||fd.jsxExtRe.test(h)||fd.jsonExtRe.test(m)||
fd.nodeModRe.test(m)||fd.nodeExtRe.test(m)||l.loads&&l.loads[m]||!fd.jsExtRe.test(m)){u.jumpTo(3);break}return u.yield(fd.checkExistence(m,l),4);case 4:if(u.yieldResult)return u.return(m);r=m.replace(".js","/index.js");return u.yield(fd.checkExistence(r,l),5);case 5:return u.yieldResult||!q?u.return(r):u.return(m.replace(".js","/index.node"));case 3:return fd.jsxJsExtRe.test(m)&&(m=m.replace(".jsx.js",".jsx")),u.return(m)}})};fd.decanonicalizeHook=function(e,h,n,b){if(h&&h.endsWith("!cjs")){h=h.replace("!cjs",
"");var c="!cjs"}var l=fd.preNormalize(this,h,n);e=e(l,n,b);e=fd.postNormalize(this,e,!0);c&&(e+=c);this.debug&&console.log("[normalizeSync] "+h+" => "+e);return e};fd.locateHook=function(e,h){var n,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return n=$jscomp.makeIterator(h.name.split("!")),b=n.next().value,n.next(),h.name=b,l.yield(e(h),2);c=l.yieldResult;return l.return(c)})};fd.normalize_doMapWithObject=function(e,h,n){h=n.get(h.map["@env"]||"@system-env");
var b;for(b in e){var c=(n="~"==b[0])?b.substr(1):b,l=h;for(c=c.split(".");c.length;)l=l[c.shift()];if(!n&&l||n&&!l){var a=e[b];break}}if(a&&"string"!==typeof a)throw Error("Unable to map a package conditional to a package conditional.");return a};fd.normalize_packageOfURL=function(e,h){var n=Object.keys(h.packages||{}).map(function(b){return 0===e.indexOf(b)?{url:b,penalty:e.slice(b.length).length}:null}).filter(function(b){return!!b});return(h=(n=n.length?n.reduce(function(b,c){return b.penalty>
c.penalty?c:b}).url:null)&&h.packages[n])?{systemPackage:h,packageURL:n}:null};fd.newModule_volatile=function(e,h){var n=Object.freeze;Object.freeze=function(b){return b};e=e(h);Object.freeze=n;return e};fd.printSystemConfig=DF;fd.instantiate_triggerOnLoadCallbacks=function(e,h){var n=this;return e(h).then(function(b){var c={};fd.promise.waitFor(6E4,function(){return n.get(h.name)},c).then(function(l){if(l===c)console.warn("[lively.modules] instantiate_triggerOnLoadCallbacks for "+h.name+" timed out");
else{l=h.name;for(var a=fd.classHolder.module(n,l),f=n.get("@lively-env").onLoadCallbacks,m=f.length;m--;){var q=f[m],r=q.moduleName,u=q.callback;if((q.resolved?r:n.decanonicalize(r))===l){f.splice(m,1);try{u(a)}catch(v){console.error(v)}}}fd.emit("lively.modules/moduleloaded",{module:h.name},Date.now(),n);n._loadingIndicator&&(n._loadingIndicator.remove(),n._loadingIndicator=null)}});return b})};fd.whenLoaded=EF;fd.loadedModules=FF;fd.knownModuleNames=GF;fd.searchLoadedModules=uL;fd.arr=Te;fd.obj=
lf;fd.promise=Kf;fd.removeHook=Yd;fd.installHook=rd;fd.isHookInstalled=sd;fd.classHolder=jv;fd.isNode=System.get("@system-env").node;fd.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;fd.defaultOptions={notificationLimit:null};fd.wrapModuleResolution=zF;fd.wrapModuleResolution=zF;fd.unwrapModuleResolution=AF;fd.unwrapModuleResolution=AF;fd.wrapModuleLoad=Xm;fd.wrapResource=yF;fd.emit=Qm;fd.join=jE;fd.urlResolve=Ve;fd.resource=T;fd.dotSlashStartRe=
/^\.?\//;fd.trailingSlashRe=/\/$/;fd.jsExtRe=/\.js$/;fd.jsxExtRe=/\.jsx$/;fd.nodeExtRe=/\.node$/;fd.jsonExtRe=/\.json$/;fd.jsonJsExtRe=/(.*\.json)\.js$/i;fd.jsxJsExtRe=/(.*\.jsx)\.js$/i;fd.doubleSlashRe=/.\/{2,}/g;fd.nodeModRe=/@node.*/;fd.whenLoaded=EF;fd.whenLoaded=EF;fd.getSystem=Yx;fd.getSystem=Yx;fd.removeSystem=Zx;fd.removeSystem=Zx;fd.prepareSystem=CF;fd.prepareSystem=CF;fd.printSystemConfig=DF;fd.printSystemConfig=DF;fd.livelySystemEnv=BF;fd.livelySystemEnv=BF;fd.loadedModules=FF;fd.loadedModules=
FF;fd.knownModuleNames=GF;fd.knownModuleNames=GF;fd.searchLoadedModules=uL;fd.searchLoadedModules=uL;var Sf=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package-registry.js");Sf.isAbsolute=function(e){return e.startsWith("/")||e.startsWith("http:")||e.startsWith("https:")||e.startsWith("file:")||e.match(Sf.urlStartRe)};Sf.ensureResource=function(e){return e.isResource?e:Sf.resource(e)};Sf.semver=ZD;Sf.arr=Te;Sf.obj=lf;Sf.promise=Kf;Sf.getPackage=vi;Sf.Package=di;Sf.resource=T;Sf.isURL=
re;Sf.classHolder=jv;Sf.urlStartRe=/^[a-z\.-_\+]+:/i;var Lh=function(e,h){h=void 0===h?{}:h;this.System=e;this.packageBaseDirs=h.packageBaseDirs||[];this.devPackageDirs=h.devPackageDirs||[];this.individualPackageDirs=h.individualPackageDirs||[];this._readyPromise=null;this.packageMap={};this._byURL=null};Lh.ofSystem=function(e){var h=e.get("@lively-env").packageRegistry;h||(h=e["__lively.modules__packageRegistry"]=new this(e));return h};Lh.forDirectory=function(e,h){return new this(e,{packageBaseDirs:[Sf.ensureResource(h)]})};
Lh.fromJSON=function(e,h){return(new this(e)).fromJSON(h)};Lh.prototype.resetByURL=function(){this._byURL=null};Lh.prototype.allPackageURLs=function(){return Object.keys(this.byURL)};Lh.prototype.toJSON=function(){function e(r){r=r.url;return r.startsWith(h.baseURL)?r.slice(h.baseURL.length).replace(/^\//,""):r}var h=this.System,n=this.packageMap,b=this.individualPackageDirs,c=this.devPackageDirs,l=this.packageBaseDirs,a={},f;for(f in n){var m=n[f];a[f]={};a[f].latest=m.latest;a[f].versions={};for(var q in m.versions)a[f].versions[q]=
m.versions[q].toJSON()}return{packageMap:a,individualPackageDirs:b.map(e),devPackageDirs:c.map(e),packageBaseDirs:l.map(e)}};Lh.prototype.fromJSON=function(e){function h(r){return Sf.isURL(r)?Sf.resource(r):Sf.resource(b.baseURL).join(r)}var n={},b=this.System,c=Sf.resource(b.baseURL),l;for(l in e.packageMap){var a=e.packageMap[l];n[l]={};n[l].latest=a.latest;n[l].versions={};for(var f in a.versions){var m=a.versions[f],q=m.url;Sf.isAbsolute(q)||(q=c.join(q).url);m=Sf.Package.fromJSON(b,Object.assign({},
m,{url:q}));n[l].versions[f]=m}}this.packageMap=n;this.individualPackageDirs=e.individualPackageDirs.map(h);this.devPackageDirs=e.devPackageDirs.map(h);this.packageBaseDirs=e.packageBaseDirs.map(h);this.resetByURL();Sf.classHolder.ModulePackageMapping.forSystem(b).clearCache();return this};Lh.prototype.updateFromJSON=function(e){var h=this.packageMap,n;for(n in e.packageMap){var b=e.packageMap[n];h[n]||(h[n]={});h[n].latest?Sf.semver.gt(b.latest,h[n].latest)&&(h[n].latest=b.latest):h[n].latest;h[n].versions||
(h[n].versions={});var c=this.System,l=Sf.resource(c.baseURL),a;for(a in b.versions){var f=b.versions[a],m=f.url;Sf.isAbsolute(m)||(m=l.join(m).url);f=new Sf.Package.fromJSON(c,Object.assign({},f,{url:m}));h[n].versions[a]=f}}this.resetByURL();Sf.classHolder.ModulePackageMapping.forSystem(System).clearCache();return this};Lh.prototype.whenReady=function(){return this._readyPromise||Promise.resolve()};Lh.prototype.isReady=function(){return!this._readyPromise};Lh.prototype.withPackagesDo=function(e){for(var h in this.packageMap){var n=
this.packageMap[h].versions,b;for(b in n)e(n[b])}};Lh.prototype.findPackage=function(e){for(var h in this.packageMap){var n=this.packageMap[h].versions,b;for(b in n){var c=n[b];if(e(c))return c}}return null};Lh.prototype.filterPackages=function(e){var h=[];this.withPackagesDo(function(n){return e(n)&&h.push(n)});return h};Lh.prototype.allPackages=function(){var e=[],h;for(h in this.packageMap){var n=this.packageMap[h].versions,b;for(b in n)e.push(n[b])}return e};Lh.prototype.sortPackagesByVersion=
function(e){return e.sort(function(h,n){return Sf.semver.compare(h.version,n.version,!0)})};Lh.prototype.matches=function(e,h,n){var b=e.version;return e.name!==h?!1:!n||Sf.semver.validRange(b||"",!0)&&Sf.semver.satisfies(b,n,!0)?!0:!1};Lh.prototype.coversDirectory=function(e){e=Sf.ensureResource(e).asDirectory();var h=this.packageBaseDirs,n=this.devPackageDirs;if(this.individualPackageDirs.some(function(c){return c.equals(e)}))return"individualPackageDirs";if(n.some(function(c){return c.equals(e)}))return"devPackageDirs";
var b=e.parent().parent();return h.some(function(c){return c.equals(b)})?this.allPackages().find(function(c){return Sf.ensureResource(c.url).equals(e)})?"packageCollectionDirs":"maybe packageCollectionDirs":null};Lh.prototype.lookup=function(e,h){var n=this,b=this.packageMap[e];if(!b)return null;if(!h||"latest"===h)return b.versions[b.latest];if(!Sf.semver.validRange(h,!0))throw Error("PackageRegistry>>lookup of "+e+": Invalid version - "+h);b=Sf.obj.values(b.versions).filter(function(c){return n.matches(c,
e,h)});return 1>=b.length?b[0]:Sf.arr.last(this.sortPackagesByVersion(b))};Lh.prototype.findPackageDependency=function(e,h,n){n||(n=e.dependencies[h]||e.devDependencies[h]);Sf.semver.validRange(n,!0)||(n=null);return this.lookup(h,n)};Lh.prototype.findPackageWithURL=function(e){e.isResource&&(e=e.url);e.endsWith("/")&&(e=e.slice(0,-1));return this.byURL[e]};Lh.prototype.findPackageHavingURL=function(e){e.isResource&&(e=e.url);e.endsWith("/")&&(e=e.slice(0,-1));var h=Infinity,n=null,b=this.byURL,c;
for(c in b)if(0===e.indexOf(c)){var l=e.slice(c.length).length;l>=h||(h=l,n=b[c])}return n};Lh.prototype.findPackageForPath=function(e,h){if(Sf.isAbsolute(e))return this.findPackageHavingURL(e);if(e.startsWith("."))return null;e=$jscomp.makeIterator(e.split("/")).next().value;if(!e)return null;var n=e.indexOf("@");if(-1<n){var b=e.slice(n+1);e=e.slice(0,n)}return!b&&h?this.findPackageDependency(h,e):this.lookup(e,b)};Lh.prototype.resolvePath=function(e,h){if(Sf.isAbsolute(e))return e;var n=h&&h.isPackage||
null;if(!n&&h){if(e.startsWith("."))return h=Sf.resource(h),h.isDirectory()||(h=h.parent()),h.join(e).withRelativePartsResolved().url;n=this.findPackageHavingURL(h)}h=this.findPackageForPath(e,n);if(!h)return null;n=e.indexOf("/");return(e=-1===n||n===e.length-1?"":e.slice(n))?Sf.resource(h.url).join(e).url:h.url};Lh.prototype.update=function(){var e=this,h,n,b,c,l,a,f,m,q,r,u,v,y,z,A,C,G,F,N,L,W,la,wa,D,Q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:if(!e.isReady())return J.return(e.whenReady().then(function(){return e.update()}));
h=Sf.promise.deferred();e._readyPromise=h.promise;e.packageBaseDirs=e.packageBaseDirs.map(function(O){return O.asDirectory()});e.individualPackageDirs=e.individualPackageDirs.map(function(O){return O.asDirectory()});e.devPackageDirs=e.devPackageDirs.map(function(O){return O.asDirectory()});n={};J.setCatchFinallyBlocks(2,3);b=$jscomp.makeIterator(e.packageBaseDirs);c=b.next();case 5:if(c.done){J.jumpTo(7);break}l=c.value;a=$jscomp;f=a.makeIterator;return J.yield(l.dirList(1),8);case 8:m=f.call(a,J.yieldResult),
q=m.next();case 9:if(q.done){c=b.next();J.jumpTo(5);break}r=q.value;u=$jscomp;v=u.makeIterator;return J.yield(r.dirList(1),12);case 12:y=v.call(u,J.yieldResult.filter(function(O){return O.isDirectory()})),z=y.next();case 13:if(z.done){q=m.next();J.jumpTo(9);break}A=z.value;return J.yield(e._discoverPackagesIn(A,n,"packageCollectionDirs"),16);case 16:n=J.yieldResult;z=y.next();J.jumpTo(13);break;case 7:C=$jscomp.makeIterator(e.individualPackageDirs),c=C.next();case 17:if(c.done){J.jumpTo(19);break}G=
c.value;return J.yield(e._discoverPackagesIn(G,n,"individualPackageDirs"),20);case 20:n=J.yieldResult;c=C.next();J.jumpTo(17);break;case 19:F=$jscomp.makeIterator(e.devPackageDirs),c=F.next();case 21:if(c.done){J.jumpTo(23);break}N=c.value;return J.yield(e._discoverPackagesIn(N,n,"devPackageDirs"),24);case 24:n=J.yieldResult;c=F.next();J.jumpTo(21);break;case 23:for(L in n)W=n[L],la=W.pkg,wa=W.config,D=W.covered,e.System.debug&&console.log("[PackageRegistry] Adding discovered package "+L+" (from "+
D+")"),e._addPackageWithConfig(la,wa,L+"/",D);e._updateLatestPackages();h.resolve();case 3:J.enterFinallyBlock();e._readyPromise=null;e.resetByURL();Sf.classHolder.ModulePackageMapping.forSystem(e.System).clearCache();J.leaveFinallyBlock(4);break;case 2:Q=J.enterCatchBlock();h.reject(Q);J.jumpTo(3);break;case 4:return J.return(e)}})};Lh.prototype.addPackageAt=function(e,h,n){h=void 0===h?"individualPackageDirs":h;var b=this,c,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress){c=e.isResource?e.url:e;c.endsWith("/")&&c.slice(0,-1);if(b.byURL[c])throw Error("package in "+c+" already added to registry");return u.yield(b._discoverPackagesIn(Sf.ensureResource(e).asDirectory(),{},void 0,n),2)}l=u.yieldResult;for(a in l)b.byURL[a]||(f=l[a],m=f.pkg,q=f.config,r=b._addPackageDir(a,h,!0),b._addPackageWithConfig(m,q,a+"/",r));b.resetByURL();Sf.classHolder.ModulePackageMapping.forSystem(b.System).clearCache();b._updateLatestPackages();return u.return(b.findPackageWithURL(e))})};
Lh.prototype.removePackage=function(e,h){h=void 0===h?!0:h;var n=e.name,b=e.version,c=Sf.ensureResource(e.url),l=this.coversDirectory(c);"devPackageDirs"===l?this.devPackageDirs=this.devPackageDirs.filter(function(a){return!a.equals(c)}):"individualPackageDirs"===l&&(this.individualPackageDirs=this.individualPackageDirs.filter(function(a){return!a.equals(c)}));l=this.packageMap;l[n]&&(delete l[n].versions[b],0===Object.keys(l[n].versions).length&&delete l[n]);this.resetByURL();Sf.classHolder.ModulePackageMapping.forSystem(this.System).clearCache();
h&&this._updateLatestPackages(e.name)};Lh.prototype.updateNameAndVersionOf=function(e,h,n,b,c){var l=this.packageMap;l[h]?l[h].versions[n]||console.warn("[PackageRegistry>>updateNameAndVersionOf] No version entry "+n+" of "+h+" found in registry ("+e.url+")"):console.warn("[PackageRegistry>>updateNameAndVersionOf] "+h+"@"+n+" not found in registry ("+e.url+")");this._addToPackageMap(e,b,c);l[h]&&l[h].versions[n]&&(delete l[h].versions[n],0===Object.keys(l[h].versions).length&&delete l[h]);this._updateLatestPackages(e.name)};
Lh.prototype._updateLatestPackages=function(e){var h=this.packageMap;if(e&&h[e])h[e].latest=Sf.arr.last(Sf.semver.sort(Object.keys(h[e].versions),!0));else for(var n in h)h[n].latest=Sf.arr.last(Sf.semver.sort(Object.keys(h[n].versions),!0))};Lh.prototype._discoverPackagesIn=function(e,h,n,b){b=void 0===b?null:b;var c=this,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress){if(!e.isDirectory())return u.return(h);l=e.asFile().url;if(h.hasOwnProperty(l))return u.return(h);
u.setCatchFinallyBlocks(2);a=b&&b[l]||new Sf.Package(c.System,l);return u.yield(a.tryToLoadPackageConfig(),4)}if(2!=u.nextAddress)return f=u.yieldResult,a.setConfig(f),h[l]={pkg:a,config:f,covered:n},c.System.debug&&(m=f,q=m.name,r=m.version,console.log("[lively.modules] package "+q+"@"+r+" discovered in "+e.url)),u.return(h);u.enterCatchBlock();return u.return(h)})};Lh.prototype._addToPackageMap=function(e,h,n,b){if(!h)throw Error("Cannot add package without name");n||(n="0.0.0");var c=this.packageMap;
h=c[h]||(c[h]={versions:{},latest:null});if(h.versions[n])if(c="Redefining version "+n+" of package "+e.url,void 0===b||b)console.warn(c);else throw Error(c+" not allowed");h.versions[n]=e};Lh.prototype._addPackageWithConfig=function(e,h,n,b){(void 0===b?0:b)||this._addPackageDir(n,"individualPackageDirs",!0);e.registerWithConfig(h);this._addToPackageMap(e,e.name,e.version);return e};Lh.prototype._addPackageDir=function(e,h,n){h=void 0===h?"individualPackageDirs":h;n=void 0===n?!0:n;e=Sf.ensureResource(e).asDirectory();
if(("packageCollectionDirs"===h||"maybe packageCollectionDirs"===h)&&(this.coversDirectory(e)||"").includes("packageCollectionDirs"))return"packageCollectionDirs";e=this[h].concat(e);this[h]=n?Sf.arr.uniqBy(e,function(b,c){return b.equals(c)}):e;return h};$jscomp.global.Object.defineProperties(Lh.prototype,{byURL:{configurable:!0,enumerable:!0,get:function(){if(!this._byURL){this._byURL={};for(var e=$jscomp.makeIterator(this.allPackages()),h=e.next();!h.done;h=e.next())h=h.value,this._byURL[h.url]=
h}return this._byURL}}});Sf.PackageRegistry=Lh;var em=lively.FreezerRuntime.recorderFor("lively.modules/src/export-lookup.js");em.arr=Te;em.obj=lf;em.subscribe=ol;em.unsubscribe=Qz;em.module=xn;var xm=function(e){this.System=e;this.subscribeToSystemChanges()};xm.forSystem=function(e){this._forSystemMap||(this._forSystemMap=new WeakMap);var h=this._forSystemMap.get(e);if(h)return h;h=new this(e);this._forSystemMap.set(e,h);return h};xm.run=function(e,h){e=void 0===e?System:e;return this.forSystem(e).systemExports(h)};
xm.findExportOfValue=function(e,h){h=void 0===h?System:h;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return c.yield(n.run(h),2);b=c.yieldResult;return c.return(b.find(function(l){var a=l.local;l=em.module(h,l.moduleId);l=l.recorder||h.get(l.id)||{};try{return l[a]===e}catch(f){return!1}}))})};xm.prototype.subscribeToSystemChanges=function(){var e=this;if(!this._notificationHandlers){var h=this.System;this._notificationHandlers=[em.subscribe("lively.modules/moduleloaded",
function(n){return e.clearCacheFor(n.module)},h),em.subscribe("lively.modules/modulechanged",function(n){return e.clearCacheFor(n.module)},h),em.subscribe("lively.vm/doitresult",function(n){return e.clearCacheFor(n.targetModule)},h)]}};xm.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var e=this.System;em.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],e);em.unsubscribe("lively.modules/modulechanged",this._notificationHandlers[1],e);em.unsubscribe("lively.vm/doitresult",
this._notificationHandlers[2],e);this._notificationHandlers=null}};xm.prototype.clearCacheFor=function(e){this.exportByModuleCache[e]=null};xm.prototype.systemExports=function(e){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(h.rawExportsByModule(e),2);n=b.yieldResult;Object.keys(n).forEach(function(c){return h.resolveExportsOfModule(c,n)});return b.return(em.arr.flatmap(Object.keys(n),function(c){return n[c]?n[c].resolvedExports||n[c].rawExports:
[]}))})};xm.prototype.rawExportsByModule=function(e){var h=this,n,b,c,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(e=e||{},n=h.System,b=n.get("@lively-env")||{},c=Object.keys(b.loadedModules||{}),l={},a=function(m){1>m%50&&e.progress.step&&e.progress.step("Scanning ...",m/c.length)},f.yield(Promise.all(c.map(function(m,q){e.progress&&a(q);return h.rawExportsOfModule(m,e,l).then(function(r){return r?l[m]=r:null})})),2)):f.return(l)})};xm.prototype.rawExportsOfModule=
function(e,h){h=void 0===h?{}:h;var n=this,b,c,l,a,f,m,q,r,u,v,y,z,A,C,G,F,N,L,W,la,wa,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Q){switch(Q.nextAddress){case 1:b=n;c=b.System;l=b.exportByModuleCache;a=h.excludedPackages||[];f=h.excludedURLs||(h.excludedURLs=a.filter(function(J){return"string"===typeof J}));m=h.excludeFns||(h.excludeFns=a.filter(function(J){return"function"===typeof J}));q=h.excludedPackageURLs||(h.excludedPackageURLs=f.concat(f.map(function(J){return c.decanonicalize(J.replace(/\/?$/,
"/")).replace(/\/$/,"")})));r=h.livelyEnv||(h.livelyEnv=c.get("@lively-env")||{});h.modes||(h.modes=Object.keys(r.loadedModules||{}));if(l[e])return u=l[e].rawExports,Q.return(q.includes(u.packageURL)||m.some(function(J){return J(u.packageURL)})?null:l[e]);v=em.module(c,e);y=v.pathInPackage();A=(z=v.package())&&z.main&&y===z.main;C=z?z.url:"";G=z?z.name:"";F=z?z.version:"";N={moduleId:e,isMain:A,pathInPackage:y,packageName:G,packageURL:C,packageVersion:F,exports:[]};if(q.includes(C)||m.some(function(J){return J(C)}))return Q.return(null);
Q.setCatchFinallyBlocks(2);L=v.format();return["register","es6","esm"].includes(L)?(wa=N,Q.yield(v.exports(),7)):Q.yield(v.load(),6);case 6:W=Q.yieldResult;N.exports=[];for(la in W)"__useDefault"!==la&&"default"!==la&&N.exports.push({exported:la,local:la,type:"id"});Q.jumpTo(5);break;case 7:wa.exports=Q.yieldResult;case 5:Q.leaveTryBlock(3);break;case 2:D=Q.enterCatchBlock(),N.error=D;case 3:return Q.return(l[e]={rawExports:N})}})};xm.prototype.resolveExportsOfModule=function(e,h,n){var b=this;n=
void 0===n?{}:n;if(!n[e]){n[e]=!0;var c=h[e];if(c&&!c.resolvedExports){var l=this.System,a=em.obj.select(c.rawExports,"moduleId isMain packageName packageURL packageVersion pathInPackage".split(" "));c.resolvedExports=em.arr.flatmap(c.rawExports.exports,function(f){var m=f.type,q=f.exported,r=f.local,u=f.fromModule;if("all"!==m)return[Object.assign({},a,{type:m,exported:q,local:r,fromModule:u})];f=l.decanonicalize(u,e);b.resolveExportsOfModule(f,h,n);return(h[f]&&h[f].resolvedExports||[]).map(function(v){return Object.assign({},
a,{type:v.type,exported:v.exported,local:v.local,fromModule:v.fromModule||u})})});n[e]=!1}}};$jscomp.global.Object.defineProperties(xm.prototype,{exportByModuleCache:{configurable:!0,enumerable:!0,get:function(){return this._exportByModuleCache||(this._exportByModuleCache={})}}});ya("bH",xm);em.ExportLookup=xm;em.default=xm;var pl=lively.FreezerRuntime.recorderFor("lively.modules/cjs/dependencies.js");pl.buildPackageMap=vC;pl.resolvePackageDependencies=HF;pl.dependencyGraph=IF;pl.arr=Te;pl.fun=Xk;
pl.promise=Kf;pl.obj=lf;pl.resource=T;pl.buildPackageMap=vC;pl.buildPackageMap=vC;pl.resolvePackageDependencies=HF;pl.resolvePackageDependencies=HF;pl.dependencyGraph=IF;pl.dependencyGraph=IF;var nJ=Object.freeze({__proto__:null,buildPackageMap:vC,resolvePackageDependencies:HF,dependencyGraph:IF}),fm=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/module-package-mapping.js");fm.arr=Te;fm.unsubscribe=Qz;fm.subscribe=ol;fm.knownModuleNames=GF;fm.classHolder=jv;var Cq=function(e){this.System=
e;this._notificationHandlers=null;this.clearCache();this.subscribeToSystemChanges()};Cq.forSystem=function(e){var h=e["__lively.modules__modulePackageMapCache"];if(h)return h;h=new this(e);return e["__lively.modules__modulePackageMapCache"]=h};Cq.prototype.subscribeToSystemChanges=function(){var e=this;if(!this._notificationHandlers){var h=this.System;this._notificationHandlers=[fm.subscribe("lively.modules/moduleloaded",function(n){return e.addModuleIdToCache(n.module)},h),fm.subscribe("lively.modules/moduleunloaded",
function(n){return e.removeModuleFromCache(n.module)},h),fm.subscribe("lively.modules/packageregistered",function(n){return e.clearCache()},h),fm.subscribe("lively.modules/packageremoved",function(n){return e.clearCache()},h)]}};Cq.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var e=this.System;fm.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],e);fm.unsubscribe("lively.modules/moduleunloaded",this._notificationHandlers[1],e);fm.unsubscribe("lively.modules/packageregistered",
this._notificationHandlers[2],e);fm.unsubscribe("lively.modules/packageremoved",this._notificationHandlers[3],e);this._notificationHandlers=null}};Cq.prototype.clearCache=function(){this._cacheInitialized=!1;this.packageToModule={};this.modulesToPackage={};this.modulesWithoutPackage={}};Cq.prototype.ensureCache=function(){var e=this.System,h=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(this._cacheInitialized)return this;for(var c=fm.classHolder.Package.allPackageURLs(e),
l=0;l<c.length;l++)h[c[l]]=[];e=fm.knownModuleNames(e);for(l=0;l<e.length;l++){for(var a=e[l],f=void 0,m=0;m<c.length;m++){var q=c[m];a.startsWith(q)&&(!f||f.length<q.length)&&(f=q)}f?(h[f].push(a),n[a]=f):b[a]={}}this._cacheInitialized=!0;return this};Cq.prototype.addModuleIdToCache=function(e){this.ensureCache();var h=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(n[e])return n[e];if(b[e])return null;for(var c=Object.keys(h),l,a=0;a<c.length;a++){var f=c[a];e.startsWith(f)&&
(!l||l.length<f.length)&&(l=f)}if(l)return(h[l]||(h[l]=[])).push(e),n[e]=l;b[e]={};return null};Cq.prototype.removeModuleFromCache=function(e){if(this._cacheInitialized){var h=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(b.hasOwnProperty(e))delete b[e];else if(b=n[e])delete n[e],h[b]&&fm.arr.remove(h[b],e)}};Cq.prototype.getPackageURLForModuleId=function(e){return this.modulesToPackage[e]||this.addModuleIdToCache(e)};Cq.prototype.getModuleIdsForPackageURL=function(e){this.ensureCache();
return this.packageToModule[e]||[]};fm.ModulePackageMapping=Cq;fm.default=Cq;var Fc=lively.FreezerRuntime.recorderFor("lively.modules/index.js");Fc.changeSystem=JF;Fc.wrapModuleResolution=KF;Fc.unwrapModuleResolution=LF;Fc.loadedModules=MF;Fc.module=wC;Fc.isModuleLoaded=NF;Fc.doesModuleExist=OF;Fc.printSystemConfig=PF;Fc.whenLoaded=QF;Fc.importPackage=RF;Fc.registerPackage=SF;Fc.removePackage=TF;Fc.reloadPackage=UF;Fc.getPackages=VF;Fc.getPackage=WF;Fc.getPackageOfModule=XF;Fc.ensurePackage=YF;Fc.applyPackageConfig=
ZF;Fc.lookupPackage=$F;Fc.moduleSourceChange=aG;Fc.requireMap=bG;Fc.isHookInstalled=cG;Fc.installHook=dG;Fc.removeHook=eG;Fc.wrapModuleLoad=fG;Fc.unwrapModuleLoad=gG;Fc.getSystem=Yx;Fc.removeSystem=Zx;Fc.prepareSystem=CF;Fc._printSystemConfig=DF;Fc._unwrapModuleResolution=AF;Fc._wrapModuleResolution=zF;Fc._whenLoaded=EF;Fc._module=xn;Fc._doesModuleExist=Ni;Fc._isModuleLoaded=Fg;Fc.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Fc.defaultSystem=
Fc.defaultSystem||Fc.prepareSystem(Fc.GLOBAL.System);var eQ=Fc.defaultSystem;Fc.System=eQ;Fc.defaultSystem=eQ;Fc.getSystem=Yx;Fc.getSystem=Yx;Fc.removeSystem=Zx;Fc.removeSystem=Zx;Fc.loadedModules=MF;Fc.loadedModules=MF;Fc.printSystemConfig=PF;Fc.printSystemConfig=PF;Fc.whenLoaded=QF;Fc.whenLoaded=QF;Fc.changeSystem=JF;Fc.changeSystem=JF;Fc.module=wC;Fc.module=wC;Fc.doesModuleExist=OF;Fc.doesModuleExist=OF;Fc.isModuleLoaded=NF;Fc.isModuleLoaded=NF;Fc.unwrapModuleResolution=LF;Fc.unwrapModuleResolution=
LF;Fc.wrapModuleResolution=KF;Fc.wrapModuleResolution=KF;Fc.Package=di;Fc._getPackage=vi;Fc._ensurePackage=ui;Fc.getPackageSpecs=ur;Fc._applyPackageConfig=Hh;Fc._importPackage=ag;Fc._removePackage=kj;Fc._reloadPackage=Mi;Fc._registerPackage=Vm;Fc._lookupPackage=dg;Fc.importPackage=RF;Fc.importPackage=RF;Fc.registerPackage=SF;Fc.registerPackage=SF;Fc.removePackage=TF;Fc.removePackage=TF;Fc.reloadPackage=UF;Fc.reloadPackage=UF;Fc.getPackages=VF;Fc.getPackages=VF;Fc.getPackage=WF;Fc.getPackage=WF;Fc.getPackageOfModule=
XF;Fc.getPackageOfModule=XF;Fc.ensurePackage=YF;Fc.ensurePackage=YF;Fc.applyPackageConfig=ZF;Fc.applyPackageConfig=ZF;Fc.lookupPackage=$F;Fc.lookupPackage=$F;Fc.PackageRegistry=Lh;Fc.PackageRegistry=Lh;Fc.PackageRegistry=Lh;Fc._moduleSourceChange=Md;Fc.moduleSourceChange=aG;Fc.moduleSourceChange=aG;Fc.computeRequireMap=ed;Fc.requireMap=bG;Fc.requireMap=bG;Fc._isHookInstalled=sd;Fc._installHook=rd;Fc._removeHook=Yd;Fc.isHookInstalled=cG;Fc.isHookInstalled=cG;Fc.installHook=dG;Fc.installHook=dG;Fc.removeHook=
eG;Fc.removeHook=eG;Fc._wrapModuleLoad=Xm;Fc._unwrapModuleLoad=ew;Fc.wrapModuleLoad=fG;Fc.wrapModuleLoad=fG;Fc.unwrapModuleLoad=gG;Fc.unwrapModuleLoad=gG;Fc.default=xm;Fc.ExportLookup=xm;Fc.cjs=nJ;Fc.cjs=nJ;Fc.cjs=nJ;Fc.default=ZD;Fc.semver=ZD;Fc.ImportInjector=zt;Fc.scripting=Fc.defaultSystem._scripting={module:Fc._module,ensurePackage:Fc._ensurePackage,registerPackage:Fc._registerPackage,importPackage:Fc._importPackage,lookupPackage:Fc._lookupPackage,ImportInjector:Fc.ImportInjector};Fc.defaultClassToFunctionConverterName=
"initializeES6ClassForLively";Fc.classRuntime=mB;Fc.defaultSystem.global[Fc.defaultClassToFunctionConverterName]=Fc.classRuntime.initializeClass;Fc.classHolder=jv;Fc.ModulePackageMapping=Cq;Fc.classHolder.ModulePackageMapping=Fc.ModulePackageMapping;Fc.classHolder.Package=Fc.Package;Fc.classHolder.PackageRegistry=Fc.PackageRegistry;var fQ=ya("bG",Fc.scripting);Fc.scripting=fQ;Fc.scripting=fQ;var oJ=Object.freeze({__proto__:null,System:eQ,getSystem:Yx,removeSystem:Zx,loadedModules:MF,printSystemConfig:PF,
whenLoaded:QF,changeSystem:JF,module:wC,doesModuleExist:OF,isModuleLoaded:NF,unwrapModuleResolution:LF,wrapModuleResolution:KF,importPackage:RF,registerPackage:SF,removePackage:TF,reloadPackage:UF,getPackages:VF,getPackage:WF,getPackageOfModule:XF,ensurePackage:YF,applyPackageConfig:ZF,lookupPackage:$F,PackageRegistry:Lh,moduleSourceChange:aG,requireMap:bG,isHookInstalled:cG,installHook:dG,removeHook:eG,wrapModuleLoad:fG,unwrapModuleLoad:gG,ExportLookup:xm,cjs:nJ,semver:ZD,scripting:fQ});ya("T",oJ);
var Cl=lively.FreezerRuntime.recorderFor("lively.morphic/object-migration.js");Cl.isReference=vL;Cl.removeUnreachableObjects=rr;Cl.obj=lf;Cl.Path=Xg;Cl.connect=uk;Cl.disconnectAll=Rv;Cl.isReference=vL;Cl.isReference=vL;var pJ=[{date:"2017-04-08",name:"Text and Label textAndAttributes format change",description:"\nChanging the format from\n  [[string1, attr1_1, attr1_2], [string2, attr2_1, attr2_2], ...]\nto\n  [string1, attr1, string2, attr2, ...].\n    ",snapshotConverter:function(e){var h=e.snapshot,
n;for(n in h){var b=h[n],c=b.props&&b.props.textAndAttributes;if(c){var l=c.value;if(!Array.isArray(l))console.warn("object migrator found textAndAttributes field but it is not an Array!");else if(l.length&&"string"!==typeof l[0]){l=[].concat.apply([],l);for(var a=0;a<l.length;a+=2){var f=l[a+1];f&&Array.isArray(f)&&(l[a+1]=Object.assign.apply(Object,[{}].concat($jscomp.arrayFromIterable(f))))}b.props.textAndAttributes=Object.assign({},c,{value:l})}}}return e}},{date:"2017-04-29",name:"Window button fix",
description:'\nA recent change in the structure of windows, that now adds a "button wrapper"\nmorph breaks old windows without it.\n',objectConverter:function(e,h){(h=h.refForId(e.id).realObj)&&h.isMorph&&h.withAllSubmorphsDo(function(n){n.isWindow&&(n.submorphs.some(function(b){return"button wrapper"===b.name})&&n.get("button wrapper").submorphs.some(function(b){return"window menu button"===b.name}),n.minimizedBounds=null,Cl.disconnectAll(n.get("minimize")),Cl.connect(n.get("minimize"),"onMouseDown",
n,"minimized",{updater:function(b){b(!this.targetObj.minimized)}}))});return e}},{date:"2017-05-03",name:"Style Sheet Status Fix",description:"\nState management of the style sheets has changes substantially, moving all of the style sheets that are being applied to the world.\n",snapshotConverter:function(e){var h=e.id,n=e.snapshot,b;for(b in n){var c=n[b].props;c&&c.styleSheets&&(c.styleSheets.value||(c.styleSheets.value=[]),c.styleSheets.value=c.styleSheets.value&&c.styleSheets.value.filter(function(l){l=
n[l.id];var a=n[l.props.rules.value.id];return!l.props.styledMorphs&&!("lively.serializer-class-info"in a)}))}Cl.removeUnreachableObjects([h],n);return e}},{date:"2017-05-22",name:"Removal of ChromeTheme and GithubTheme",description:"\nFor now only a simple default theme...\n",snapshotConverter:function(e){var h=e.snapshot,n;for(n in h){var b=h[n],c=b["lively.serializer-class-info"];c&&("ChromeTheme"===c.className||"GithubTheme"===c.className?(c.className="DefaultTheme",c.module.pathInPackage="ide/themes/default.js"):
"JavaScriptTokenizer"===c.className&&delete b["lively.serializer-class-info"])}return e}},{date:"2017-06-20",name:"Unwrapped Style Sheet Props",description:"Style Sheets now store foldable props in their nested format.",objectConverter:function(e,h){(h=h.refForId(e.id).realObj)&&h.isMorph&&h.withAllSubmorphsDo(function(n){n.styleSheets&&0<n.styleSheets.length&&n.styleSheets.forEach(function(b){for(var c in Cl.obj.dissoc(b.rules,["_rev"]))b.rules[c]=b.unwrapFoldedProps(b.rules[c])})});return e}},{date:"2017-07-13",
name:"Renamed style-rules.js to style-sheets.js",snapshotConverter:function(e){var h=e.snapshot,n;for(n in h){var b=h[n]["lively.serializer-class-info"];b&&"StyleSheet"===b.className&&(b.module.pathInPackage="style-sheets.js")}return e}},{date:"2017-07-26",name:"components, ide, and halo extraction",snapshotConverter:function(e){var h=e.snapshot,n=e.packages,b=n&&n["local://lively-object-modules/"]||{};n=[["lively.morphic/halo","lively.halos"],["lively.morphic/components/markers.js","lively.halos"],
["lively.morphic/components/icons.js","lively.morphic"],["lively.morphic/components/loading-indicator.js","lively.components",function(v){return"{"+v+"}"}],["lively.morphic/components","lively.components"],["lively.components/markers.js","lively.halos"],["lively.morphic/ide","lively.ide"],["lively.morphic/text/ui.js","lively.ide",null,"text/ui.js"]];for(var c in b){for(var l=b[c]["index.js"],a=$jscomp.makeIterator(n),f=a.next();!f.done;f=a.next()){var m=$jscomp.makeIterator(f.value),q=m.next().value;
f=m.next().value;if(m=m.next().value){q=new RegExp('(import\\s)(.*)(\\sfrom \\"'+q+")","g");var r=q.exec(l);r&&(l=l.replace(q,"import "+m(r[2])+'from "'+f))}else l=l.replace(new RegExp(q,"g"),f)}b[c]["index.js"]=l}for(var u in h)if((c=h[u]["lively.serializer-class-info"])&&c.module)for(b=c.module.package.name+"/"+c.module.pathInPackage,l=$jscomp.makeIterator(n),a=l.next();!a.done;a=l.next())if(m=$jscomp.makeIterator(a.value),a=m.next().value,f=m.next().value,m.next(),m=m.next().value,b.includes(a)){c.module.package.name=
f;c.module.package.version="0.1.0";c.module.pathInPackage=m||b.substring(b.indexOf(a)+a.length+1)||"index.js";break}return e}},{date:"2017-10-16",name:"change scroll implementation of list items",objectConverter:function(e,h){h=$jscomp.makeIterator(h.objectRefs());for(var n=h.next();!n.done;n=h.next())n=n.value.realObj,n.isList&&"function"===typeof n.initializeSubmorphs&&n.initializeSubmorphs();return e}},{date:"2017-10-30",name:"change implementation of tree",snapshotConverter:function(e){var h=
e.snapshot,n;for(n in h){var b=h[n],c=b["lively.serializer-class-info"];c&&c.module&&("Tree"==c.className&&b.props.submorphs&&(b.props.submorphs.value=[]),"TreeNode"==c.className&&delete h[n],"InspectorTreeData"==c.className&&delete h[n],["PropertyNode","InspectionNode","MorphNode","FoldedNode"].includes(c.className)&&(c.module.pathInPackage="js/inspector/context.js"),"nodeItemContainer"==b.props.name&&delete h[n])}return e}},{date:"2019-02-17",name:"change storage of commit metadata",snapshotConverter:function(e){var h=
e.id,n=e.snapshot;Object.values(n).map(function(b){if(b.props.metadata&&Cl.isReference(b.props.metadata.value)&&(b=n[b.props.metadata.value.id],b.props.commit&&Cl.isReference(b.props.commit.value))){var c=n[b.props.commit.value.id].props;b.props.commit.value='__lv_expr__:({type: "'+c.type.value+'", name: "'+c.name.value+'", _id: "'+c._id.value+'"})'}});Cl.removeUnreachableObjects([h],n);return e}},{date:"2019-07-25",name:"world superclass extraction",snapshotConverter:function(e){var h=e.packages,
n,b=Cl.Path(["local://lively-object-modules/","EmptyWorld","index.js"]);if(n=b.get(h))n=n.replace('import { World, morph } from "lively.morphic";','import { morph } from "lively.morphic";\nimport { LivelyWorld as World } from "lively.ide/world.js"').replace('import { World } from "lively.morphic";','import { LivelyWorld as World } from "lively.ide/world.js"'),b.set(h,n);return e}},{date:"2019-08-05",name:"remove Camphor from system",snapshotConverter:function(e){Object.values(e.snapshot).map(function(h){h.props.fontFamily&&
"Camphor"==h.props.fontFamily.value&&(h.props.fontFamily.value="Nunito")});return e}},{date:"2020-10-09",name:"remove style guide",snapshotConverter:function(e){var h=e.snapshot;Object.values(h).map(function(n){n.props.master&&"string"===typeof n.props.master.value&&(n.props.master.value=n.props.master.value.split("styleguide://style guide").join("styleguide://System"));n.props.master&&n.props.master.value.id&&(n=h[n.props.master.value.id],n.props.auto.value=n.props.auto.value.split("styleguide://style guide").join("styleguide://System"))});
return e}}];Cl.migrations=pJ;Cl.migrations=pJ;Cl.migrations=pJ;var ge=lively.FreezerRuntime.recorderFor("lively.morphic/serialization.js");ge.normalizeOptions=function(e){e=Object.assign({reinitializeIds:!1},e);e.reinitializeIds&&(e.reinitializeIds="function"===typeof e.reinitializeIds?e.reinitializeIds:function(h,n){return n.realObj.isMorph?ge.newMorphId(n.realObj.constructor):null});return e};ge.serializeMorph=xC;ge.deserializeMorph=yC;ge.loadWorldFromResource=wL;ge.saveWorldToResource=xL;ge.copyMorph=
hG;ge.createMorphSnapshot=$x;ge.loadMorphFromSnapshot=Us;ge.resourceToJSON=bU;ge.findPackagesInFileSpec=cU;ge.packagesOfSnapshot=yL;ge.loadPackagesAndModulesOfSnapshot=zC;ge.findRequiredPackagesOfSnapshot=iG;ge.requiredModulesOfSnapshot=Tp;ge.deserializeWithMigrations=Mx;ge.serialize=Vi;ge.MorphicEnv=nq;ge.resource=T;ge.newMorphId=Vc;ge.morph=Gc;ge.pathForBrowserHistory=Rb;ge.serializeMorph=xC;ge.serializeMorph=xC;ge.deserializeMorph=yC;ge.deserializeMorph=yC;ge.loadWorldFromResource=wL;ge.loadWorldFromResource=
wL;ge.saveWorldToResource=xL;ge.saveWorldToResource=xL;ge.copyMorph=hG;ge.copyMorph=hG;ge.modules=oJ;ge.createFiles=ka;ge.promise=Kf;ge.graph=$u;ge.arr=Te;ge.migrations=pJ;var uB=ge.modules;ge.registerPackage=uB.registerPackage;ge.module=uB.module;ge.getPackage=uB.getPackage;ge.ensurePackage=uB.ensurePackage;ge.lookupPackage=uB.lookupPackage;ge.semver=uB.semver;ge.objectScriptingEnabled=!1;ge.createMorphSnapshot=$x;ge.createMorphSnapshot=$x;ge.loadMorphFromSnapshot=Us;ge.loadMorphFromSnapshot=Us;
ge.packagesOfSnapshot=yL;ge.packagesOfSnapshot=yL;ge.loadPackagesAndModulesOfSnapshot=zC;ge.loadPackagesAndModulesOfSnapshot=zC;ge.findRequiredPackagesOfSnapshot=iG;ge.findRequiredPackagesOfSnapshot=iG;var At="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Lfa={},Y1=At.MutationObserver||At.WebKitMutationObserver;if(Y1){var Z1=0,Mfa=new Y1(jG),$1=At.document.createTextNode("");Mfa.observe($1,{characterData:!0});var gQ=function(){$1.data=Z1=++Z1%2}}else if(At.setImmediate||
"undefined"===typeof At.MessageChannel)gQ="document"in At&&"onreadystatechange"in At.document.createElement("script")?function(){var e=At.document.createElement("script");e.onreadystatechange=function(){jG();e.onreadystatechange=null;e.parentNode.removeChild(e);e=null};At.document.documentElement.appendChild(e)}:function(){setTimeout(jG,0)};else{var a2=new At.MessageChannel;a2.port1.onmessage=jG;gQ=function(){a2.port2.postMessage(0)}}var zL,AC=[],Nfa=Lfa=function(e){1!==AC.push(e)||zL||gQ()},hQ={},
b2="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(b2){var c2=new Uint8Array(16);hQ=function(){b2(c2);return c2}}else{var d2=Array(16);hQ=function(){for(var e=0,h;16>e;e++)0===(e&3)&&(h=4294967296*Math.random()),d2[e]=h>>>((e&3)<<3)&255;return d2}}for(var e2=hQ,Ofa={},ym=[],qJ=0;256>qJ;++qJ)ym[qJ]=(qJ+256).toString(16).substr(1);var f2=
Ofa=function(e,h){h=h||0;return[ym[e[h++]],ym[e[h++]],ym[e[h++]],ym[e[h++]],"-",ym[e[h++]],ym[e[h++]],"-",ym[e[h++]],ym[e[h++]],"-",ym[e[h++]],ym[e[h++]],"-",ym[e[h++]],ym[e[h++]],ym[e[h++]],ym[e[h++]],ym[e[h++]],ym[e[h++]]].join("")},Pfa={},g2,iQ,jQ=0,kQ=0,Qfa=Pfa=function(e,h,n){n=h&&n||0;var b=h||[];e=e||{};var c=e.node||g2,l=void 0!==e.clockseq?e.clockseq:iQ;if(null==c||null==l){var a=e2();null==c&&(c=g2=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]);null==l&&(l=iQ=(a[6]<<8|a[7])&16383)}a=void 0!==e.msecs?
e.msecs:(new Date).getTime();var f=void 0!==e.nsecs?e.nsecs:kQ+1,m=a-jQ+(f-kQ)/1E4;0>m&&void 0===e.clockseq&&(l=l+1&16383);(0>m||a>jQ)&&void 0===e.nsecs&&(f=0);if(1E4<=f)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");jQ=a;kQ=f;iQ=l;a+=122192928E5;e=(1E4*(a&268435455)+f)%4294967296;b[n++]=e>>>24&255;b[n++]=e>>>16&255;b[n++]=e>>>8&255;b[n++]=e&255;e=a/4294967296*1E4&268435455;b[n++]=e>>>8&255;b[n++]=e&255;b[n++]=e>>>24&15|16;b[n++]=e>>>16&255;b[n++]=l>>>8|128;b[n++]=l&255;for(l=0;6>
l;++l)b[n+l]=c[l];return h?h:f2(b)},h2={};h2=function(e,h,n){n=h&&n||0;"string"==typeof e&&(h="binary"===e?Array(16):null,e=null);e=e||{};e=e.random||(e.rng||e2)();e[6]=e[6]&15|64;e[8]=e[8]&63|128;if(h)for(var b=0;16>b;++b)h[n+b]=e[b];return h||f2(e)};var Rfa={},lQ=h2;lQ.v1=Qfa;var Sfa=Rfa=lQ.v4=lQ,Mg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Tfa={},Ufa=Tfa=function(e){function h(r,u){var v=r[0],y=r[1],z=r[2],A=r[3];v+=(y&z|~y&A)+u[0]-680876936|0;v=(v<<7|v>>>
25)+y|0;A+=(v&y|~v&z)+u[1]-389564586|0;A=(A<<12|A>>>20)+v|0;z+=(A&v|~A&y)+u[2]+606105819|0;z=(z<<17|z>>>15)+A|0;y+=(z&A|~z&v)+u[3]-1044525330|0;y=(y<<22|y>>>10)+z|0;v+=(y&z|~y&A)+u[4]-176418897|0;v=(v<<7|v>>>25)+y|0;A+=(v&y|~v&z)+u[5]+1200080426|0;A=(A<<12|A>>>20)+v|0;z+=(A&v|~A&y)+u[6]-1473231341|0;z=(z<<17|z>>>15)+A|0;y+=(z&A|~z&v)+u[7]-45705983|0;y=(y<<22|y>>>10)+z|0;v+=(y&z|~y&A)+u[8]+1770035416|0;v=(v<<7|v>>>25)+y|0;A+=(v&y|~v&z)+u[9]-1958414417|0;A=(A<<12|A>>>20)+v|0;z+=(A&v|~A&y)+u[10]-42063|
0;z=(z<<17|z>>>15)+A|0;y+=(z&A|~z&v)+u[11]-1990404162|0;y=(y<<22|y>>>10)+z|0;v+=(y&z|~y&A)+u[12]+1804603682|0;v=(v<<7|v>>>25)+y|0;A+=(v&y|~v&z)+u[13]-40341101|0;A=(A<<12|A>>>20)+v|0;z+=(A&v|~A&y)+u[14]-1502002290|0;z=(z<<17|z>>>15)+A|0;y+=(z&A|~z&v)+u[15]+1236535329|0;y=(y<<22|y>>>10)+z|0;v+=(y&A|z&~A)+u[1]-165796510|0;v=(v<<5|v>>>27)+y|0;A+=(v&z|y&~z)+u[6]-1069501632|0;A=(A<<9|A>>>23)+v|0;z+=(A&y|v&~y)+u[11]+643717713|0;z=(z<<14|z>>>18)+A|0;y+=(z&v|A&~v)+u[0]-373897302|0;y=(y<<20|y>>>12)+z|0;v+=
(y&A|z&~A)+u[5]-701558691|0;v=(v<<5|v>>>27)+y|0;A+=(v&z|y&~z)+u[10]+38016083|0;A=(A<<9|A>>>23)+v|0;z+=(A&y|v&~y)+u[15]-660478335|0;z=(z<<14|z>>>18)+A|0;y+=(z&v|A&~v)+u[4]-405537848|0;y=(y<<20|y>>>12)+z|0;v+=(y&A|z&~A)+u[9]+568446438|0;v=(v<<5|v>>>27)+y|0;A+=(v&z|y&~z)+u[14]-1019803690|0;A=(A<<9|A>>>23)+v|0;z+=(A&y|v&~y)+u[3]-187363961|0;z=(z<<14|z>>>18)+A|0;y+=(z&v|A&~v)+u[8]+1163531501|0;y=(y<<20|y>>>12)+z|0;v+=(y&A|z&~A)+u[13]-1444681467|0;v=(v<<5|v>>>27)+y|0;A+=(v&z|y&~z)+u[2]-51403784|0;A=(A<<
9|A>>>23)+v|0;z+=(A&y|v&~y)+u[7]+1735328473|0;z=(z<<14|z>>>18)+A|0;y+=(z&v|A&~v)+u[12]-1926607734|0;y=(y<<20|y>>>12)+z|0;v+=(y^z^A)+u[5]-378558|0;v=(v<<4|v>>>28)+y|0;A+=(v^y^z)+u[8]-2022574463|0;A=(A<<11|A>>>21)+v|0;z+=(A^v^y)+u[11]+1839030562|0;z=(z<<16|z>>>16)+A|0;y+=(z^A^v)+u[14]-35309556|0;y=(y<<23|y>>>9)+z|0;v+=(y^z^A)+u[1]-1530992060|0;v=(v<<4|v>>>28)+y|0;A+=(v^y^z)+u[4]+1272893353|0;A=(A<<11|A>>>21)+v|0;z+=(A^v^y)+u[7]-155497632|0;z=(z<<16|z>>>16)+A|0;y+=(z^A^v)+u[10]-1094730640|0;y=(y<<23|
y>>>9)+z|0;v+=(y^z^A)+u[13]+681279174|0;v=(v<<4|v>>>28)+y|0;A+=(v^y^z)+u[0]-358537222|0;A=(A<<11|A>>>21)+v|0;z+=(A^v^y)+u[3]-722521979|0;z=(z<<16|z>>>16)+A|0;y+=(z^A^v)+u[6]+76029189|0;y=(y<<23|y>>>9)+z|0;v+=(y^z^A)+u[9]-640364487|0;v=(v<<4|v>>>28)+y|0;A+=(v^y^z)+u[12]-421815835|0;A=(A<<11|A>>>21)+v|0;z+=(A^v^y)+u[15]+530742520|0;z=(z<<16|z>>>16)+A|0;y+=(z^A^v)+u[2]-995338651|0;y=(y<<23|y>>>9)+z|0;v+=(z^(y|~A))+u[0]-198630844|0;v=(v<<6|v>>>26)+y|0;A+=(y^(v|~z))+u[7]+1126891415|0;A=(A<<10|A>>>22)+
v|0;z+=(v^(A|~y))+u[14]-1416354905|0;z=(z<<15|z>>>17)+A|0;y+=(A^(z|~v))+u[5]-57434055|0;y=(y<<21|y>>>11)+z|0;v+=(z^(y|~A))+u[12]+1700485571|0;v=(v<<6|v>>>26)+y|0;A+=(y^(v|~z))+u[3]-1894986606|0;A=(A<<10|A>>>22)+v|0;z+=(v^(A|~y))+u[10]-1051523|0;z=(z<<15|z>>>17)+A|0;y+=(A^(z|~v))+u[1]-2054922799|0;y=(y<<21|y>>>11)+z|0;v+=(z^(y|~A))+u[8]+1873313359|0;v=(v<<6|v>>>26)+y|0;A+=(y^(v|~z))+u[15]-30611744|0;A=(A<<10|A>>>22)+v|0;z+=(v^(A|~y))+u[6]-1560198380|0;z=(z<<15|z>>>17)+A|0;y+=(A^(z|~v))+u[13]+1309151649|
0;y=(y<<21|y>>>11)+z|0;v+=(z^(y|~A))+u[4]-145523070|0;v=(v<<6|v>>>26)+y|0;A+=(y^(v|~z))+u[11]-1120210379|0;A=(A<<10|A>>>22)+v|0;z+=(v^(A|~y))+u[2]+718787259|0;z=(z<<15|z>>>17)+A|0;y+=(A^(z|~v))+u[9]-343485551|0;r[0]=v+r[0]|0;r[1]=((y<<21|y>>>11)+z|0)+r[1]|0;r[2]=z+r[2]|0;r[3]=A+r[3]|0}function n(r){var u=[],v;for(v=0;64>v;v+=4)u[v>>2]=r.charCodeAt(v)+(r.charCodeAt(v+1)<<8)+(r.charCodeAt(v+2)<<16)+(r.charCodeAt(v+3)<<24);return u}function b(r){var u=[],v;for(v=0;64>v;v+=4)u[v>>2]=r[v]+(r[v+1]<<8)+
(r[v+2]<<16)+(r[v+3]<<24);return u}function c(r){var u=r.length,v=[1732584193,-271733879,-1732584194,271733878],y;for(y=64;y<=u;y+=64)h(v,n(r.substring(y-64,y)));r=r.substring(y-64);var z=r.length;var A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(y=0;y<z;y+=1)A[y>>2]|=r.charCodeAt(y)<<(y%4<<3);A[y>>2]|=128<<(y%4<<3);if(55<y)for(h(v,A),y=0;16>y;y+=1)A[y]=0;u=(8*u).toString(16).match(/(.*?)(.{0,8})$/);r=parseInt(u[2],16);u=parseInt(u[1],16)||0;A[14]=r;A[15]=u;h(v,A);return v}function l(r){var u;for(u=0;u<
r.length;u+=1){var v=u,y,z=r[u],A="";for(y=0;4>y;y+=1)A+=q[z>>8*y+4&15]+q[z>>8*y&15];r[v]=A}return r.join("")}function a(r){/[\u0080-\uFFFF]/.test(r)&&(r=unescape(encodeURIComponent(r)));return r}function f(r){var u=[],v=r.length,y;for(y=0;y<v-1;y+=2)u.push(parseInt(r.substr(y,2),16));return String.fromCharCode.apply(String,u)}function m(){this.reset()}var q="0123456789abcdef".split("");l(c("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function r(u,v){u=u|0||
0;return 0>u?Math.max(u+v,0):Math.min(u,v)}ArrayBuffer.prototype.slice=function(u,v){var y=(this||Mg).byteLength;u=r(u,y);var z=y;v!==e&&(z=r(v,y));if(u>z)return new ArrayBuffer(0);z-=u;v=new ArrayBuffer(z);y=new Uint8Array(v);u=new Uint8Array(this||Mg,u,z);y.set(u);return v}}();m.prototype.append=function(r){this.appendBinary(a(r));return this||Mg};m.prototype.appendBinary=function(r){(this||Mg)._buff+=r;(this||Mg)._length+=r.length;r=(this||Mg)._buff.length;var u;for(u=64;u<=r;u+=64)h((this||Mg)._hash,
n((this||Mg)._buff.substring(u-64,u)));(this||Mg)._buff=(this||Mg)._buff.substring(u-64);return this||Mg};m.prototype.end=function(r){var u=(this||Mg)._buff,v=u.length,y,z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(y=0;y<v;y+=1)z[y>>2]|=u.charCodeAt(y)<<(y%4<<3);this._finish(z,v);u=l((this||Mg)._hash);r&&(u=f(u));this.reset();return u};m.prototype.reset=function(){(this||Mg)._buff="";(this||Mg)._length=0;(this||Mg)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Mg};m.prototype.getState=
function(){return{buff:(this||Mg)._buff,length:(this||Mg)._length,hash:(this||Mg)._hash}};m.prototype.setState=function(r){(this||Mg)._buff=r.buff;(this||Mg)._length=r.length;(this||Mg)._hash=r.hash;return this||Mg};m.prototype.destroy=function(){delete (this||Mg)._hash;delete (this||Mg)._buff;delete (this||Mg)._length};m.prototype._finish=function(r,u){r[u>>2]|=128<<(u%4<<3);if(55<u)for(h((this||Mg)._hash,r),u=0;16>u;u+=1)r[u]=0;var v=8*(this||Mg)._length;v=v.toString(16).match(/(.*?)(.{0,8})$/);
u=parseInt(v[2],16);v=parseInt(v[1],16)||0;r[14]=u;r[15]=v;h((this||Mg)._hash,r)};m.hash=function(r,u){return m.hashBinary(a(r),u)};m.hashBinary=function(r,u){r=c(r);r=l(r);return u?f(r):r};m.ArrayBuffer=function(){this.reset()};m.ArrayBuffer.prototype.append=function(r){var u=(this||Mg)._buff.buffer,v=new Uint8Array(u.byteLength+r.byteLength);v.set(new Uint8Array(u));v.set(new Uint8Array(r),u.byteLength);u=v.length;(this||Mg)._length+=r.byteLength;for(r=64;r<=u;r+=64)h((this||Mg)._hash,b(v.subarray(r-
64,r)));(this||Mg)._buff=r-64<u?new Uint8Array(v.buffer.slice(r-64)):new Uint8Array(0);return this||Mg};m.ArrayBuffer.prototype.end=function(r){var u=(this||Mg)._buff,v=u.length,y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],z;for(z=0;z<v;z+=1)y[z>>2]|=u[z]<<(z%4<<3);this._finish(y,v);u=l((this||Mg)._hash);r&&(u=f(u));this.reset();return u};m.ArrayBuffer.prototype.reset=function(){(this||Mg)._buff=new Uint8Array(0);(this||Mg)._length=0;(this||Mg)._hash=[1732584193,-271733879,-1732584194,271733878];return this||
Mg};m.ArrayBuffer.prototype.getState=function(){var r=m.prototype.getState.call(this||Mg);r.buff=String.fromCharCode.apply(null,new Uint8Array(r.buff));return r};m.ArrayBuffer.prototype.setState=function(r){var u=r.buff,v=u.length,y=new ArrayBuffer(v);y=new Uint8Array(y);var z;for(z=0;z<v;z+=1)y[z]=u.charCodeAt(z);r.buff=y;return m.prototype.setState.call(this||Mg,r)};m.ArrayBuffer.prototype.destroy=m.prototype.destroy;m.ArrayBuffer.prototype._finish=m.prototype._finish;m.ArrayBuffer.hash=function(r,
u){var v=new Uint8Array(r),y=v.length;r=[1732584193,-271733879,-1732584194,271733878];var z;for(z=64;z<=y;z+=64)h(r,b(v.subarray(z-64,z)));v=z-64<y?v.subarray(z-64):new Uint8Array(0);var A=v.length;var C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(z=0;z<A;z+=1)C[z>>2]|=v[z]<<(z%4<<3);C[z>>2]|=128<<(z%4<<3);if(55<z)for(h(r,C),z=0;16>z;z+=1)C[z]=0;y=(8*y).toString(16).match(/(.*?)(.{0,8})$/);v=parseInt(y[2],16);y=parseInt(y[1],16)||0;C[14]=v;C[15]=y;h(r,C);r=l(r);return u?f(r):r};return m}(),vB={stringify:function(e){var h=
[];h.push({obj:e});e="";for(var n,b,c,l,a,f,m;n=h.pop();)if(b=n.obj,c=n.prefix||"",n=n.val||"",e+=c,n)e+=n;else if("object"!==typeof b)e+="undefined"===typeof b?null:JSON.stringify(b);else if(null===b)e+="null";else if(Array.isArray(b)){h.push({val:"]"});for(c=b.length-1;0<=c;c--)n=0===c?"":",",h.push({obj:b[c],prefix:n});h.push({val:"["})}else{n=[];for(l in b)b.hasOwnProperty(l)&&n.push(l);h.push({val:"}"});for(c=n.length-1;0<=c;c--)a=n[c],f=b[a],m=0<c?",":"",m+=JSON.stringify(a)+":",h.push({obj:f,
prefix:m});h.push({val:"{"})}return e},parse:function(e){for(var h=[],n=[],b=0,c,l,a,f;;)if(c=e[b++],"}"===c||"]"===c||"undefined"===typeof c){if(1===h.length)return h.pop();fA(h.pop(),h,n)}else switch(c){case " ":case "\t":case "\n":case ":":case ",":break;case "n":b+=3;fA(null,h,n);break;case "t":b+=3;fA(!0,h,n);break;case "f":b+=4;fA(!1,h,n);break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case "-":c="";for(b--;;)if(l=e[b++],/[\d\.\-e\+]/.test(l))c+=
l;else{b--;break}fA(parseFloat(c),h,n);break;case '"':c="";l=void 0;for(a=0;;)if(f=e[b++],'"'!==f||"\\"===l&&1===a%2)c+=f,l=f,"\\"===l?a++:a=0;else break;fA(JSON.parse('"'+c+'"'),h,n);break;case "[":c={element:[],index:h.length};h.push(c.element);n.push(c);break;case "{":c={element:{},index:h.length};h.push(c.element);n.push(c);break;default:throw Error("unexpectedly reached end of input: "+c);}}},Vfa={},mQ=Vfa=function(e){return function(){var h=arguments.length;if(h){for(var n=[],b=-1;++b<h;)n[b]=
arguments[b];return e.call(this,n)}return e.call(this,[])}},Wfa={},Fj=Wfa="function"===typeof Object.create?function(e,h){h&&(e.super_=h,e.prototype=Object.create(h.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,h){if(h){e.super_=h;var n=function(){};n.prototype=h.prototype;e.prototype=new n;e.prototype.constructor=e}},wB="object"==typeof Reflect?Reflect:null,i2=wB&&"function"==typeof wB.apply?wB.apply:function(e,h,n){return Function.prototype.apply.call(e,
h,n)};var Xfa=wB&&"function"==typeof wB.ownKeys?wB.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var j2=Number.isNaN||function(e){return e!=e};Xi.EventEmitter=Xi;Xi.prototype._events=void 0;Xi.prototype._eventsCount=0;Xi.prototype._maxListeners=void 0;var k2=10;Object.defineProperty(Xi,"defaultMaxListeners",{enumerable:!0,get:function(){return k2},set:function(e){if("number"!=
typeof e||0>e||j2(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");k2=e}});Xi.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};Xi.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||j2(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+
e+".");return this._maxListeners=e,this};Xi.prototype.getMaxListeners=function(){return void 0===this._maxListeners?Xi.defaultMaxListeners:this._maxListeners};Xi.prototype.emit=function(e){for(var h=[],n=1;n<arguments.length;n++)h.push(arguments[n]);n="error"===e;var b=this._events;if(void 0!==b)n=n&&void 0===b.error;else if(!n)return!1;if(n){var c;if(0<h.length&&(c=h[0]),c instanceof Error)throw c;h=Error("Unhandled error."+(c?" ("+c.message+")":""));throw h.context=c,h;}n=b[e];if(void 0===n)return!1;
if("function"==typeof n)i2(n,this,h);else for(c=n.length,b=gU(n,c),n=0;n<c;++n)i2(b[n],this,h);return!0};Xi.prototype.addListener=function(e,h){return dU(this,e,h,!1)};Xi.prototype.on=Xi.prototype.addListener;Xi.prototype.prependListener=function(e,h){return dU(this,e,h,!0)};Xi.prototype.once=function(e,h){return kG(h),this.on(e,eU(this,e,h)),this};Xi.prototype.prependOnceListener=function(e,h){return kG(h),this.prependListener(e,eU(this,e,h)),this};Xi.prototype.removeListener=function(e,h){var n,
b,c;if((kG(h),void 0===(b=this._events))||void 0===(n=b[e]))return this;if(n===h||n.listener===h)0==--this._eventsCount?this._events=Object.create(null):(delete b[e],b.removeListener&&this.emit("removeListener",e,n.listener||h));else if("function"!=typeof n){var l=-1;for(c=n.length-1;0<=c;c--)if(n[c]===h||n[c].listener===h){var a=n[c].listener;l=c;break}if(0>l)return this;if(0===l)n.shift();else{for(;l+1<n.length;l++)n[l]=n[l+1];n.pop();!0}1===n.length&&(b[e]=n[0]);void 0!==b.removeListener&&this.emit("removeListener",
e,a||h)}return this};Xi.prototype.off=Xi.prototype.removeListener;Xi.prototype.removeAllListeners=function(e){var h,n;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var b=Object.keys(n);for(n=0;n<b.length;++n)"removeListener"!==(h=b[n])&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),
this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(h=n[e]))this.removeListener(e,h);else if(void 0!==h)for(n=h.length-1;0<=n;n--)this.removeListener(e,h[n]);return this};Xi.prototype.listeners=function(e){return fU(this,e,!0)};Xi.prototype.rawListeners=function(e){return fU(this,e,!1)};Xi.listenerCount=function(e,h){return"function"==typeof e.listenerCount?e.listenerCount(h):hU.call(e,h)};Xi.prototype.listenerCount=hU;Xi.prototype.eventNames=function(){return 0<this._eventsCount?
Xfa(this._events):[]};var $s=Xi,l2="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Yfa={},tG=Nh,Ws=gA(Nfa),wU=gA(Sfa),oG=gA(Ufa),QU=gA(vB),hA=gA(mQ),Wr=gA(Fj),jo=$s;fw.prototype.get=function(e){return this._store["$"+e]};fw.prototype.set=function(e,h){this._store["$"+e]=h;return!0};fw.prototype.has=function(e){return"$"+e in this._store};fw.prototype.delete=function(e){e="$"+e;var h=e in this._store;delete this._store[e];return h};fw.prototype.forEach=function(e){for(var h=
Object.keys(this._store),n=0,b=h.length;n<b;n++){var c=h[n],l=this._store[c];c=c.substring(1);e(l,c)}};Object.defineProperty(fw.prototype,"size",{get:function(){return Object.keys(this._store).length}});BC.prototype.add=function(e){return this._store.set(e,!0)};BC.prototype.has=function(e){return this._store.has(e)};BC.prototype.forEach=function(e){this._store.forEach(function(h,n){e(n)})};Object.defineProperty(BC.prototype,"size",{get:function(){return this._store.size}});if(function(){if("undefined"===
typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}()){var JC=Set;var ap=Map}else JC=BC,ap=fw;var iU=Function.prototype.toString,E6=iU.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var DC=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){DC=!1}Wr(iA,jo.EventEmitter);iA.prototype.addListener=function(e,h,n,b){function c(){if(l._listeners[h])if(a)a=
"waiting";else{a=!0;var f=CC(b,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));n.changes(f).on("change",function(m){m.seq>b.since&&!b.cancelled&&(b.since=m.seq,b.onChange(m))}).on("complete",function(){"waiting"===a&&Ws(c);a=!1}).on("error",function(){a=!1})}}if(!this._listeners[h]){var l=this,a=!1;this._listeners[h]=c;this.on(e,c)}};iA.prototype.removeListener=function(e,h){h in this._listeners&&(jo.EventEmitter.prototype.removeListener.call(this,
e,this._listeners[h]),delete this._listeners[h])};iA.prototype.notifyLocalWindows=function(e){DC&&(localStorage[e]="a"===localStorage[e]?"b":"a")};iA.prototype.notify=function(e){this.emit(e);this.notifyLocalWindows(e)};var mA="function"===typeof Object.assign?Object.assign:function(e){for(var h=Object(e),n=1;n<arguments.length;n++){var b=arguments[n];if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(h[c]=b[c])}return h};Wr(lj,Error);lj.prototype.toString=function(){return JSON.stringify({status:this.status,
name:this.name,message:this.message,reason:this.reason})};new lj(401,"unauthorized","Name or password is incorrect.");var Zfa=new lj(400,"bad_request","Missing JSON list of 'docs'"),yr=new lj(404,"not_found","missing"),lA=new lj(409,"conflict","Document update conflict"),pU=new lj(400,"bad_request","_id field must contain a string"),K6=new lj(412,"missing_id","_id is required for puts"),J6=new lj(400,"bad_request","Only reserved document ids may start with underscore.");new lj(412,"precondition_failed",
"Database not open");var nU=new lj(500,"unknown_error","Database encountered an unknown error"),PU=new lj(500,"badarg","Some query argument is invalid");new lj(400,"invalid_request","Request was invalid");var $fa=new lj(400,"query_parse_error","Some query parameter is invalid"),OU=new lj(500,"doc_validation","Bad special document member"),lG=new lj(400,"bad_request","Something wrong with the request"),nQ=new lj(400,"bad_request","Document must be a JSON object");new lj(404,"not_found","Database not found");
var OL=new lj(500,"indexed_db_went_bad","unknown");new lj(500,"web_sql_went_bad","unknown");new lj(500,"levelDB_went_went_bad","unknown");new lj(403,"forbidden","Forbidden by design doc validate_doc_update function");var MU=new lj(400,"bad_request","Invalid rev format");new lj(412,"file_exists","The database could not be created, the file already exists.");var A7=new lj(412,"missing_stub","A pre-existing attachment stub wasn't found");new lj(413,"invalid_url","Provided URL is invalid");var sU="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),
M6=/(?:^|&)([^&=]*)=?([^&]*)/g,L6=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,S6=l2.setImmediate||l2.setTimeout,pG=wU.v4;Wr(EC,jo.EventEmitter);EC.prototype.cancel=function(){this.isCancelled=!0;this.db.taskqueue.isReady&&this.emit("cancel")};EC.prototype.validateChanges=function(e){var h=e.complete,n=this;rh._changesFilterPlugin?rh._changesFilterPlugin.validate(e,
function(b){if(b)return h(b);n.doChanges(e)}):n.doChanges(e)};EC.prototype.doChanges=function(e){var h=this,n=e.complete;e=ql(e);"live"in e&&!("continuous"in e)&&(e.continuous=e.live);e.processChange=$6;"latest"===e.since&&(e.since="now");e.since||(e.since=0);if("now"===e.since)this.db.info().then(function(l){h.isCancelled?n(null,{status:"cancelled"}):(e.since=l.update_seq,h.doChanges(e))},n);else{if(rh._changesFilterPlugin){if(rh._changesFilterPlugin.normalize(e),rh._changesFilterPlugin.shouldFilter(this,
e))return rh._changesFilterPlugin.filter(this,e)}else["doc_ids","filter","selector","view"].forEach(function(l){l in e&&Wp("warn",'The "'+l+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in e||(e.descending=!1);e.limit=0===e.limit?1:e.limit;e.complete=n;var b=this.db._changes(e);if(b&&"function"===typeof b.cancel){var c=h.cancel;h.cancel=hA(function(l){b.cancel();c.apply(this,
l)})}}};Wr(Dj,jo.EventEmitter);Dj.prototype.post=Rk("post",function(e,h,n){"function"===typeof h&&(n=h,h={});if("object"!==typeof e||Array.isArray(e))return n(vh(nQ));this.bulkDocs({docs:[e]},h,LL(n,e._id))});Dj.prototype.put=Rk("put",function(e,h,n){function b(){var a=e._rev.split("-"),f=a[1];a=parseInt(a[0],10)+1;var m=vU();e._revisions={start:a,ids:[m,f]};e._rev=a+"-"+m;h.new_edits=!1}function c(a){"function"===typeof l._put&&!1!==h.new_edits?l._put(e,h,a):l.bulkDocs({docs:[e]},h,LL(a,e._id))}
"function"===typeof h&&(n=h,h={});if("object"!==typeof e||Array.isArray(e))return n(vh(nQ));oU(e._id);if(cy(e._id)&&"function"===typeof this._putLocal)return e._deleted?this._removeLocal(e,n):this._putLocal(e,n);var l=this;h.force&&e._rev?(b(),c(function(a){n(a,a?null:{ok:!0,id:e._id,rev:e._rev})})):c(n)});Dj.prototype.putAttachment=Rk("putAttachment",function(e,h,n,b,c){function l(f){var m="_rev"in f?parseInt(f._rev,10):0;f._attachments=f._attachments||{};f._attachments[h]={content_type:c,data:b,
revpos:++m};return a.put(f)}var a=this;"function"===typeof c&&(c=b,b=n,n=null);"undefined"===typeof c&&(c=b,b=n,n=null);c||Wp("warn","Attachment",h,"on document",e,"is missing content_type");return a.get(e).then(function(f){if(f._rev!==n)throw vh(lA);return l(f)},function(f){if(f.reason===yr.message)return l({_id:e});throw f;})});Dj.prototype.removeAttachment=Rk("removeAttachment",function(e,h,n,b){var c=this;c.get(e,function(l,a){if(l)b(l);else if(a._rev!==n)b(vh(lA));else{if(!a._attachments)return b();
delete a._attachments[h];0===Object.keys(a._attachments).length&&delete a._attachments;c.put(a,b)}})});Dj.prototype.remove=Rk("remove",function(e,h,n,b){"string"===typeof h?(e={_id:e,_rev:h},"function"===typeof n&&(b=n,n={})):"function"===typeof h?(b=h,n={}):(b=n,n=h);n=n||{};n.was_delete=!0;h={_id:e._id,_rev:e._rev||n.rev,_deleted:!0};if(cy(h._id)&&"function"===typeof this._removeLocal)return this._removeLocal(e,b);this.bulkDocs({docs:[h]},n,LL(b,h._id))});Dj.prototype.revsDiff=Rk("revsDiff",function(e,
h,n){function b(m,q){f.has(m)||f.set(m,{missing:[]});f.get(m).missing.push(q)}function c(m,q){var r=e[m].slice(0);by(q,function(u,v,y,z,A){u=v+"-"+y;v=r.indexOf(u);-1!==v&&(r.splice(v,1),"available"!==A.status&&b(m,u))});r.forEach(function(u){b(m,u)})}"function"===typeof h&&(n=h,h={});var l=Object.keys(e);if(!l.length)return n(null,{});var a=0,f=new ap;l.map(function(m){this._getRevisionTree(m,function(q,r){if(q&&404===q.status&&"missing"===q.message)f.set(m,{missing:e[m]});else{if(q)return n(q);
c(m,r)}if(++a===l.length){var u={};f.forEach(function(v,y){u[y]=v});return n(null,u)}})},this)});Dj.prototype.bulkGet=Rk("bulkGet",function(e,h){mU(this,e,h)});Dj.prototype.compactDocument=Rk("compactDocument",function(e,h,n){var b=this;this._getRevisionTree(e,function(c,l){if(c)return n(c);var a=c7(l),f=[],m=[];Object.keys(a).forEach(function(q){a[q]>h&&f.push(q)});by(l,function(q,r,u,v,y){q=r+"-"+u;"available"===y.status&&-1!==f.indexOf(q)&&m.push(q)});b._doCompaction(e,m,n)})});Dj.prototype.compact=
Rk("compact",function(e,h){"function"===typeof e&&(h=e,e={});e=e||{};this._compactionQueue=this._compactionQueue||[];this._compactionQueue.push({opts:e,callback:h});1===this._compactionQueue.length&&CU(this)});Dj.prototype._compact=function(e,h){var n=this,b=[];n.changes({return_docs:!1,last_seq:e.last_seq||0}).on("change",function(c){b.push(n.compactDocument(c.id,0))}).on("complete",function(c){var l=c.last_seq;Promise.all(b).then(function(){return nG(n,"_local/compaction",function(a){return!a.last_seq||
a.last_seq<l?(a.last_seq=l,a):!1})}).then(function(){h(null,{ok:!0})}).catch(h)}).on("error",h)};Dj.prototype.get=Rk("get",function(e,h,n){function b(){var m=[],q=c.length;if(!q)return n(null,m);c.forEach(function(r){l.get(e,{rev:r,revs:h.revs,latest:h.latest,attachments:h.attachments,binary:h.binary},function(u,v){if(u)m.push({missing:r});else{u=0;for(var y=m.length;u<y;u++)if(m[u].ok&&m[u].ok._rev===v._rev){var z=!0;break}z||m.push({ok:v})}q--;q||n(null,m)})})}"function"===typeof h&&(n=h,h={});
if("string"!==typeof e)return n(vh(pU));if(cy(e)&&"function"===typeof this._getLocal)return this._getLocal(e,n);var c=[],l=this;if(h.open_revs)if("all"===h.open_revs)this._getRevisionTree(e,function(m,q){if(m)return n(m);c=JL(q).map(function(r){return r.rev});b()});else if(Array.isArray(h.open_revs)){c=h.open_revs;for(var a=0;a<c.length;a++){var f=c[a];if("string"!==typeof f||!/^\d+-/.test(f))return n(vh(MU))}b()}else return n(vh(nU,"function_clause"));else return this._get(e,h,function(m,q){if(m)return m.docId=
e,n(m);var r=q.doc,u=q.metadata,v=q.ctx;h.conflicts&&(q=KL(u),q.length&&(r._conflicts=q));Hu(u,r._rev)&&(r._deleted=!0);if(h.revs||h.revs_info){m=r._rev.split("-");q=parseInt(m[0],10);m=m[1];var y=xU(u.rev_tree);u=null;for(var z=0;z<y.length;z++){var A=y[z],C=A.ids.map(function(W){return W.id}).indexOf(m);if(C===q-1||!u&&-1!==C)u=A}if(!u)return m=Error("invalid rev tree"),m.docId=e,n(m);q=u.ids.map(function(W){return W.id}).indexOf(r._rev.split("-")[1])+1;u.ids.splice(q,u.ids.length-q);u.ids.reverse();
h.revs&&(r._revisions={start:u.pos+u.ids.length-1,ids:u.ids.map(function(W){return W.id})});if(h.revs_info){var G=u.pos+u.ids.length;r._revs_info=u.ids.map(function(W){G--;return{rev:G+"-"+W.id,status:W.opts.status}})}}if(h.attachments&&r._attachments){var F=r._attachments,N=Object.keys(F).length;if(0===N)return n(null,r);Object.keys(F).forEach(function(W){this._getAttachment(r._id,W,F[W],{rev:r._rev,binary:h.binary,ctx:v},function(la,wa){la=r._attachments[W];la.data=wa;delete la.stub;delete la.length;
--N||n(null,r)})},l)}else{if(r._attachments)for(var L in r._attachments)r._attachments.hasOwnProperty(L)&&(r._attachments[L].stub=!0);n(null,r)}})});Dj.prototype.getAttachment=Rk("getAttachment",function(e,h,n,b){var c=this;n instanceof Function&&(b=n,n={});this._get(e,n,function(l,a){if(l)return b(l);if(a.doc._attachments&&a.doc._attachments[h])n.ctx=a.ctx,n.binary=!0,c._getAttachment(e,h,a.doc._attachments[h],n,b);else return b(vh(yr))})});Dj.prototype.allDocs=Rk("allDocs",function(e,h){"function"===
typeof e&&(h=e,e={});e.skip="undefined"!==typeof e.skip?e.skip:0;e.start_key&&(e.startkey=e.start_key);e.end_key&&(e.endkey=e.end_key);if("keys"in e){if(!Array.isArray(e.keys))return h(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(b){return b in e})[0];if(n){h(vh($fa,"Query parameter `"+n+"` is not compatible with multi-get"));return}if(!Vs(this)&&(d7(e),0===e.keys.length))return this._allDocs({limit:0},h)}return this._allDocs(e,h)});Dj.prototype.changes=
function(e,h){"function"===typeof e&&(h=e,e={});e=e||{};e.return_docs="return_docs"in e?e.return_docs:!e.live;return new EC(this,e,h)};Dj.prototype.close=Rk("close",function(e){this._closed=!0;this.emit("closed");return this._close(e)});Dj.prototype.info=Rk("info",function(e){var h=this;this._info(function(n,b){if(n)return e(n);b.db_name=b.db_name||h.name;b.auto_compaction=!(!h.auto_compaction||Vs(h));b.adapter=h.adapter;e(null,b)})});Dj.prototype.id=Rk("id",function(e){return this._id(e)});Dj.prototype.type=
function(){return"function"===typeof this._type?this._type():this.adapter};Dj.prototype.bulkDocs=Rk("bulkDocs",function(e,h,n){"function"===typeof h&&(n=h,h={});h=h||{};Array.isArray(e)&&(e={docs:e});if(!e||!e.docs||!Array.isArray(e.docs))return n(vh(Zfa));for(var b=0;b<e.docs.length;++b)if("object"!==typeof e.docs[b]||Array.isArray(e.docs[b]))return n(vh(nQ));var c;e.docs.forEach(function(f){f._attachments&&Object.keys(f._attachments).forEach(function(m){var q;(q=c)||(q="_"===m.charAt(0)?m+" is not a valid attachment name, attachment names cannot start with '_'":
!1);c=q;f._attachments[m].content_type||Wp("warn","Attachment",m,"on document",f._id,"is missing content_type")})});if(c)return n(vh(lG,c));"new_edits"in h||(h.new_edits="new_edits"in e?e.new_edits:!0);var l=this;h.new_edits||Vs(l)||e.docs.sort(b7);a7(e.docs);var a=e.docs.map(function(f){return f._id});return this._bulkDocs(e,h,function(f,m){if(f)return n(f);h.new_edits||(m=m.filter(function(r){return r.error}));if(!Vs(l)){f=0;for(var q=m.length;f<q;f++)m[f].id=m[f].id||a[f]}n(null,m)})});Dj.prototype.registerDependentDatabase=
Rk("registerDependentDatabase",function(e,h){var n=new this.constructor(e,this.__opts);nG(this,"_local/_pouch_dependentDbs",function(b){b.dependentDbs=b.dependentDbs||{};if(b.dependentDbs[e])return!1;b.dependentDbs[e]=!0;return b}).then(function(){h(null,{db:n})}).catch(h)});Dj.prototype.destroy=Rk("destroy",function(e,h){function n(){b._destroy(e,function(l,a){if(l)return h(l);b._destroyed=!0;b.emit("destroyed");h(null,a||{ok:!0})})}"function"===typeof e&&(h=e,e={});var b=this,c="use_prefix"in b?
b.use_prefix:!0;if(Vs(b))return n();b.get("_local/_pouch_dependentDbs",function(l,a){if(l)return 404!==l.status?h(l):n();var f=b.constructor;l=Object.keys(a.dependentDbs).map(function(m){m=c?m.replace(new RegExp("^"+f.prefix),""):m;return(new f(m,b.__opts)).destroy()});Promise.all(l).then(n,h)})});FC.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()};FC.prototype.fail=function(e){this.failed=e;this.execute()};FC.prototype.ready=
function(e){this.isReady=!0;this.db=e;this.execute()};FC.prototype.addTask=function(e){this.queue.push(e);this.failed&&this.execute()};Wr(rh,Dj);var O7="undefined"!==typeof AbortController?AbortController:function(){return{abort:function(){}}},YU=fetch,oA=Headers;rh.adapters={};rh.preferredAdapters=[];rh.prefix="_pouch_";var m2=new jo.EventEmitter;(function(e){Object.keys(jo.EventEmitter.prototype).forEach(function(n){"function"===typeof jo.EventEmitter.prototype[n]&&(e[n]=m2[n].bind(m2))});var h=
e._destructionListeners=new ap;e.on("ref",function(n){h.has(n.name)||h.set(n.name,[]);h.get(n.name).push(n)});e.on("unref",function(n){if(h.has(n.name)){var b=h.get(n.name),c=b.indexOf(n);0>c||(b.splice(c,1),1<b.length?h.set(n.name,b):h.delete(n.name))}});e.on("destroyed",function(n){if(h.has(n)){var b=h.get(n);h.delete(n);b.forEach(function(c){c.emit("destroyed",!0)})}})})(rh);rh.adapter=function(e,h,n){h.valid()&&(rh.adapters[e]=h,n&&rh.preferredAdapters.push(e))};rh.plugin=function(e){if("function"===
typeof e)e(rh);else{if("object"!==typeof e||0===Object.keys(e).length)throw Error('Invalid plugin: got "'+e+'", expected an object or a function');Object.keys(e).forEach(function(h){rh.prototype[h]=e[h]})}this.__defaults&&(rh.__defaults=mA({},this.__defaults));return rh};rh.defaults=function(e){function h(n,b){if(!(this instanceof h))return new h(n,b);b=b||{};n&&"object"===typeof n&&(b=n,n=b.name,delete b.name);b=mA({},h.__defaults,b);rh.call(this,n,b)}Wr(h,rh);h.preferredAdapters=rh.preferredAdapters.slice();
Object.keys(rh).forEach(function(n){n in h||(h[n]=rh[n])});h.__defaults=mA({},this.__defaults,e);return h};rh.fetch=function(e,h){return YU(e,h)};var FU=["$or","$nor","$not"],IU={$elemMatch:function(e,h,n,b){return Array.isArray(b)&&0!==b.length?"object"===typeof b[0]?b.some(function(c){return kA(c,h,Object.keys(h))}):b.some(function(c){return NL(h,e,n,c)}):!1},$allMatch:function(e,h,n,b){return Array.isArray(b)&&0!==b.length?"object"===typeof b[0]?b.every(function(c){return kA(c,h,Object.keys(h))}):
b.every(function(c){return NL(h,e,n,c)}):!1},$eq:function(e,h,n,b){return ey(b)&&0===Pl(b,h)},$gte:function(e,h,n,b){return ey(b)&&0<=Pl(b,h)},$gt:function(e,h,n,b){return ey(b)&&0<Pl(b,h)},$lte:function(e,h,n,b){return ey(b)&&0>=Pl(b,h)},$lt:function(e,h,n,b){return ey(b)&&0>Pl(b,h)},$exists:function(e,h,n,b){return h?ey(b):!ey(b)},$mod:function(e,h,n,b){if(e=HC(b)){e=h[0];h=h[1];if(0===e)throw Error("Bad divisor, cannot divide by zero");if(parseInt(e,10)!==e)throw Error("Divisor is not an integer");
if(parseInt(h,10)!==h)throw Error("Modulus is not an integer");e=parseInt(b,10)!==b?!1:b%e===h}return e},$ne:function(e,h,n,b){return h.every(function(c){return 0!==Pl(b,c)})},$in:function(e,h,n,b){return HC(b)&&JU(b,h)},$nin:function(e,h,n,b){return HC(b)&&!JU(b,h)},$size:function(e,h,n,b){return HC(b)&&b.length===h},$all:function(e,h,n,b){return Array.isArray(b)&&m7(b,h)},$regex:function(e,h,n,b){if(e=HC(b))e=(new RegExp(h)).test(b);return e},$type:function(e,h,n,b){return n7(b,h)}};rh.plugin(function(e){e._changesFilterPlugin=
{validate:o7,normalize:p7,shouldFilter:q7,filter:r7}});rh.version="7.2.1";var s7=KU("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),t7=KU("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" ")),IC=new iA,RL=!1,SL=[],nA=new ap,UL,TL=new ap;WU.valid=
function(){return"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange};var XL={};WL.valid=function(){return!0};Wr(hy,Error);Wr(uG,Error);Wr(vG,Error);var R7=Wp.bind(null,"log"),S7=Array.isArray,T7=JSON.parse;KC.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()})};KC.prototype.finish=function(){return this.promise};var n2={},o2=new KC,aga=function(e,h){return $L(h)},bga=function(e,h){return h.length},cga=function(e,h){e=$L(h);for(var n=
Math.min.apply(null,h),b=Math.max.apply(null,h),c=h.length,l=0,a=0,f=h.length;a<f;a++){var m=h[a];l+=m*m}return{sum:e,min:n,max:b,count:c,sumsqr:l}},p2=function(e,h,n,b){function c(X,ha,bb,pb,oa){try{return{output:ha(bb,pb,oa)}}catch(ba){return eV(X,ba),{error:ba}}}function l(X,ha){var bb=Pl(X.key,ha.key);return 0!==bb?bb:Pl(X.value,ha.value)}function a(X,ha,bb){bb=bb||0;return"number"===typeof ha?X.slice(bb,ha+bb):0<bb?X.slice(bb):X}function f(X){var ha=X.value;return ha&&"object"===typeof ha&&ha._id||
X.id}function m(X){X.rows.forEach(function(ha){var bb=ha.doc&&ha.doc._attachments;bb&&Object.keys(bb).forEach(function(pb){var oa=bb[pb];bb[pb].data=GL(oa.data,oa.content_type)})})}function q(X){return function(ha){X.include_docs&&X.attachments&&X.binary&&m(ha);return ha}}function r(X,ha,bb,pb){ha=ha[X];"undefined"!==typeof ha&&(pb&&(ha=encodeURIComponent(JSON.stringify(ha))),bb.push(X+"="+ha))}function u(X){if("undefined"!==typeof X){var ha=Number(X);return isNaN(ha)||ha!==parseInt(X,10)?X:ha}}function v(X){X.group_level=
u(X.group_level);X.limit=u(X.limit);X.skip=u(X.skip);return X}function y(X,ha){var bb=X.descending?"endkey":"startkey",pb=X.descending?"startkey":"endkey";if("undefined"!==typeof X[bb]&&"undefined"!==typeof X[pb]&&0<Pl(X[bb],X[pb]))throw new hy("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(ha.reduce&&!1!==X.reduce){if(X.include_docs)throw new hy("{include_docs:true} is invalid for reduce");if(X.keys&&1<X.keys.length&&!X.group&&!X.group_level)throw new hy("Multi-key fetches for reduce views must use {group: true}");
}["group_level","limit","skip"].forEach(function(oa){a:{if(oa=X[oa]){if("number"!==typeof oa){oa=new hy('Invalid value for integer: "'+oa+'"');break a}if(0>oa){oa=new hy('Invalid value for positive integer: "'+oa+'"');break a}}oa=void 0}if(oa)throw oa;})}function z(X,ha,bb){var pb=[],oa,ba="GET",qa,Ga;r("reduce",bb,pb);r("include_docs",bb,pb);r("attachments",bb,pb);r("limit",bb,pb);r("descending",bb,pb);r("group",bb,pb);r("group_level",bb,pb);r("skip",bb,pb);r("stale",bb,pb);r("conflicts",bb,pb);
r("startkey",bb,pb,!0);r("start_key",bb,pb,!0);r("endkey",bb,pb,!0);r("end_key",bb,pb,!0);r("inclusive_end",bb,pb);r("key",bb,pb,!0);r("update_seq",bb,pb);pb=pb.join("&");pb=""===pb?"":"?"+pb;if("undefined"!==typeof bb.keys){var ua="keys="+encodeURIComponent(JSON.stringify(bb.keys));2E3>=ua.length+pb.length+1?pb+=("?"===pb[0]?"&":"?")+ua:(ba="POST","string"===typeof ha?oa={keys:bb.keys}:ha.keys=bb.keys)}if("string"===typeof ha)return ua=aM(ha),X.fetch("_design/"+ua[0]+"/_view/"+ua[1]+pb,{headers:new oA({"Content-Type":"application/json"}),
method:ba,body:JSON.stringify(oa)}).then(function(H){qa=H.ok;Ga=H.status;return H.json()}).then(function(H){if(!qa)throw H.status=Ga,jA(H);H.rows.forEach(function(M){if(M.value&&M.value.error&&"builtin_reduce_error"===M.value.error)throw Error(M.reason);});return H}).then(q(bb));oa=oa||{};Object.keys(ha).forEach(function(H){Array.isArray(ha[H])?oa[H]=ha[H]:oa[H]=ha[H].toString()});return X.fetch("_temp_view"+pb,{headers:new oA({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(oa)}).then(function(H){qa=
H.ok;Ga=H.status;return H.json()}).then(function(H){if(!qa)throw H.status=Ga,jA(H);return H}).then(q(bb))}function A(X,ha,bb){return new Promise(function(pb,oa){X._query(ha,bb,function(ba,qa){if(ba)return oa(ba);pb(qa)})})}function C(X){return new Promise(function(ha,bb){X._viewCleanup(function(pb,oa){if(pb)return bb(pb);ha(oa)})})}function G(X){return function(ha){if(404===ha.status)return X;throw ha;}}function F(X,ha,bb){function pb(Ga,ua){for(var H=[],M=new JC,R=0,ca=ua.rows.length;R<ca;R++){var Z=
ua.rows[R].doc;if(Z&&(H.push(Z),M.add(Z._id),Z._deleted=!qa.has(Z._id),!Z._deleted)){var Aa=qa.get(Z._id);"value"in Aa&&(Z.value=Aa.value)}}ua=ZL(qa);ua.forEach(function(db){if(!M.has(db)){var S={_id:db};db=qa.get(db);"value"in db&&(S.value=db.value);H.push(S)}});Ga.keys=$U(ua.concat(Ga.keys));H.push(Ga);return H}var oa="_local/doc_"+X,ba={_id:oa,keys:[]};X=bb.get(X);var qa=X[0];oa=V7(X[1])?Promise.resolve(ba):ha.db.get(oa).catch(G(ba));return oa.then(function(Ga){return(Ga.keys.length?ha.db.allDocs({keys:Ga.keys,
include_docs:!0}):Promise.resolve({rows:[]})).then(function(ua){return pb(Ga,ua)})})}function N(X,ha,bb){return X.db.get("_local/lastSeq").catch(G({_id:"_local/lastSeq",seq:0})).then(function(pb){var oa=ZL(ha);return Promise.all(oa.map(function(ba){return F(ba,X,ha)})).then(function(ba){ba=mG(ba);pb.seq=bb;ba.push(pb);return X.db.bulkDocs({docs:ba})})})}function L(X){X="string"===typeof X?X:X.name;var ha=n2[X];ha||(ha=n2[X]=new KC);return ha}function W(X){return YL(L(X),function(){return la(X)})()}
function la(X){function ha(H,M){return function(){return N(X,H,M)}}function bb(){return X.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:Ga,limit:50}).then(pb)}function pb(H){H=H.results;if(H.length){for(var M=new ap,R=0,ca=H.length;R<ca;R++){var Z=H[R];if("_"!==Z.doc._id[0]){oa=[];ba=Z.doc;if(!ba._deleted){var Aa=X.sourceDB;try{qa(ba)}catch(vc){eV(Aa,vc)}}oa.sort(l);Aa=void 0;for(var db=oa,S=new ap,da=0,ea=db.length;da<ea;da++){var Pa=db[da],kb=[Pa.key,Pa.id];
0<da&&0===Pl(Pa.key,Aa)&&kb.push(da);S.set(xr(kb),Pa);Aa=Pa.key}M.set(Z.doc._id,[S,Z.changes])}Ga=Z.seq}ua.add(ha(M,Ga));if(!(50>H.length))return bb()}}var oa,ba,qa=h(X.mapFun,function(H,M){H={id:ba._id,key:dy(H)};"undefined"!==typeof M&&null!==M&&(H.value=dy(M));oa.push(H)}),Ga=X.seq||0,ua=new KC;return bb().then(function(){return ua.finish()}).then(function(){X.seq=Ga})}function wa(X,ha,bb){0===bb.group_level&&delete bb.group_level;var pb=bb.group||bb.group_level,oa=n(X.reduceFun),ba=[],qa=isNaN(bb.group_level)?
Number.POSITIVE_INFINITY:bb.group_level;ha.forEach(function(R){var ca=ba[ba.length-1],Z=pb?R.key:null;pb&&Array.isArray(Z)&&(Z=Z.slice(0,qa));ca&&0===Pl(ca.groupKey,Z)?(ca.keys.push([R.key,R.id]),ca.values.push(R.value)):ba.push({keys:[[R.key,R.id]],values:[R.value],groupKey:Z})});ha=[];for(var Ga=0,ua=ba.length;Ga<ua;Ga++){var H=ba[Ga],M=c(X.sourceDB,oa,H.keys,H.values,!1);if(M.error&&M.error instanceof vG)throw M.error;ha.push({value:M.error?null:M.output,key:H.groupKey})}return{rows:a(ha,bb.limit,
bb.skip)}}function D(X,ha){return YL(L(X),function(){return Q(X,ha)})()}function Q(X,ha){function bb(M){M.include_docs=!0;return X.db.allDocs(M).then(function(R){oa=R.total_rows;return R.rows.map(function(ca){if("value"in ca.doc&&"object"===typeof ca.doc.value&&null!==ca.doc.value){var Z=Object.keys(ca.doc.value).sort(),Aa=["id","key","value"];if(!(Z<Aa||Z>Aa))return ca.doc.value}a:{Z=ca.doc._id;Aa=[];for(var db=[],S=0;;){var da=Z[S++];if("\x00"===da)if(1===Aa.length){Z=Aa.pop();break a}else{var ea=
Aa;var Pa=db;da=ea.pop();if(Pa.length){var kb=Pa[Pa.length-1];da===kb.element&&(Pa.pop(),kb=Pa[Pa.length-1]);Pa=kb.element;kb=kb.index;Array.isArray(Pa)?Pa.push(da):kb===ea.length-2?(ea=ea.pop(),Pa[ea]=da):ea.push(da)}continue}switch(da){case "1":Aa.push(null);break;case "2":Aa.push("1"===Z[S]);S++;break;case "3":kb=Z;ea=da=S;if("1"===kb[da])kb=0,da++;else{Pa="0"===kb[da];da++;var vc="",mc=kb.substring(da,da+3);mc=parseInt(mc,10)+-324;Pa&&(mc=-mc);for(da+=3;;){var Yb=kb[da];if("\x00"===Yb)break;else vc+=
Yb;da++}vc=vc.split(".");kb=1===vc.length?parseInt(vc,10):parseFloat(vc[0]+"."+vc[1]);Pa&&(kb-=10);0!==mc&&(kb=parseFloat(kb+"e"+mc))}Pa=kb;da-=ea;Aa.push(Pa);S+=da;break;case "4":for(da="";;){ea=Z[S];if("\x00"===ea)break;da+=ea;S++}da=da.replace(/\u0001\u0001/g,"\x00").replace(/\u0001\u0002/g,"\u0001").replace(/\u0002\u0002/g,"\u0002");Aa.push(da);break;case "5":da={element:[],index:Aa.length};Aa.push(da.element);db.push(da);break;case "6":da={element:{},index:Aa.length};Aa.push(da.element);db.push(da);
break;default:throw Error("bad collationIndex or unexpectedly reached end of input: "+da);}}}return{key:Z[0],id:Z[1],value:"value"in ca.doc?ca.doc.value:null}})})}function pb(M){var R=ba?wa(X,M,ha):{total_rows:oa,offset:qa,rows:M};ha.update_seq&&(R.update_seq=X.seq);if(ha.include_docs){var ca=$U(M.map(f));return X.sourceDB.allDocs({keys:ca,include_docs:!0,conflicts:ha.conflicts,attachments:ha.attachments,binary:ha.binary}).then(function(Z){var Aa=new ap;Z.rows.forEach(function(db){Aa.set(db.id,db.doc)});
M.forEach(function(db){var S=f(db);if(S=Aa.get(S))db.doc=S});return R})}return R}var oa,ba=X.reduceFun&&!1!==ha.reduce,qa=ha.skip||0;"undefined"===typeof ha.keys||ha.keys.length||(ha.limit=0,delete ha.keys);if("undefined"!==typeof ha.keys){var Ga=ha.keys.map(function(M){M={startkey:xr([M]),endkey:xr([M,{}])};ha.update_seq&&(M.update_seq=!0);return bb(M)});return Promise.all(Ga).then(mG).then(pb)}Ga={descending:ha.descending};ha.update_seq&&(Ga.update_seq=!0);if("start_key"in ha)var ua=ha.start_key;
"startkey"in ha&&(ua=ha.startkey);if("end_key"in ha)var H=ha.end_key;"endkey"in ha&&(H=ha.endkey);"undefined"!==typeof ua&&(Ga.startkey=ha.descending?xr([ua,{}]):xr([ua]));"undefined"!==typeof H&&(ua=!1!==ha.inclusive_end,ha.descending&&(ua=!ua),Ga.endkey=xr(ua?[H,{}]:[H]));"undefined"!==typeof ha.key&&(H=xr([ha.key]),ua=xr([ha.key,{}]),Ga.descending?(Ga.endkey=H,Ga.startkey=ua):(Ga.startkey=H,Ga.endkey=ua));ba||("number"===typeof ha.limit&&(Ga.limit=ha.limit),Ga.skip=qa);return bb(Ga).then(pb)}function J(X){return X.fetch("_view_cleanup",
{headers:new oA({"Content-Type":"application/json"}),method:"POST"}).then(function(ha){return ha.json()})}function O(X){return X.get("_local/"+e).then(function(ha){var bb=new ap;Object.keys(ha.views).forEach(function(oa){var ba=aM(oa);oa="_design/"+ba[0];ba=ba[1];var qa=bb.get(oa);qa||(qa=new JC,bb.set(oa,qa));qa.add(ba)});var pb={keys:ZL(bb),include_docs:!0};return X.allDocs(pb).then(function(oa){var ba={};oa.rows.forEach(function(qa){var Ga=qa.key.substring(8);bb.get(qa.key).forEach(function(ua){var H=
Ga+"/"+ua;ha.views[H]||(H=ua);H=Object.keys(ha.views[H]);var M=qa.doc&&qa.doc.views&&qa.doc.views[ua];H.forEach(function(R){ba[R]=ba[R]||M})})});oa=Object.keys(ba).filter(function(qa){return!ba[qa]}).map(function(qa){return YL(L(qa),function(){return(new X.constructor(qa,X.__opts)).destroy()})()});return Promise.all(oa).then(function(){return{ok:!0}})})},G({ok:!0}))}function ja(X,ha,bb){if("function"===typeof X._query)return A(X,ha,bb);if(Vs(X))return z(X,ha,bb);if("string"!==typeof ha)return y(bb,
ha),o2.add(function(){return dV(X,"temp_view/temp_view",ha.map,ha.reduce,!0,e).then(function(ba){return Q7(W(ba).then(function(){return D(ba,bb)}),function(){return ba.db.destroy()})})}),o2.finish();var pb=aM(ha),oa=pb[1];return X.get("_design/"+pb[0]).then(function(ba){var qa=ba.views&&ba.views[oa];if(!qa)throw new uG("ddoc "+ba._id+" has no view named "+oa);b(ba,oa);y(bb,qa);return dV(X,ha,qa.map,qa.reduce,!1,e).then(function(Ga){return"ok"===bb.stale||"update_after"===bb.stale?("update_after"===
bb.stale&&Ws(function(){W(Ga)}),D(Ga,bb)):W(Ga).then(function(){return D(Ga,bb)})})})}return{query:function(X,ha,bb){var pb=this;"function"===typeof ha&&(bb=ha,ha={});ha=ha?v(ha):{};"function"===typeof X&&(X={map:X});var oa=Promise.resolve().then(function(){return ja(pb,X,ha)});ZU(oa,bb);return oa},viewCleanup:P7(function(){return"function"===typeof this._viewCleanup?C(this):Vs(this)?J(this):O(this)})}}("mrviews",function(e,h){return"function"===typeof e&&2===e.length?function(n){return e(n,h)}:bV(e.toString(),
h)},function(e){e=e.toString();if(/^_sum/.test(e))var h=aga;else if(/^_count/.test(e))h=bga;else if(/^_stats/.test(e))h=cga;else{if(/^_/.test(e))throw Error(e+" is not a supported reduce function.");h=void 0}return h?h:bV(e)},function(e,h){var n=e.views&&e.views[h];if("string"!==typeof n.map)throw new uG("ddoc "+e._id+" has no string view named "+h+", instead found object of type: "+typeof n.map);});LC.prototype.writeCheckpoint=function(e,h){var n=this;return this.updateTarget(e,h).then(function(){return n.updateSource(e,
h)})};LC.prototype.updateTarget=function(e,h){return this.opts.writeTargetCheckpoint?bM(this.target,this.id,e,h,this.returnValue):Promise.resolve(!0)};LC.prototype.updateSource=function(e,h){if(this.opts.writeSourceCheckpoint){var n=this;return bM(this.src,this.id,e,h,this.returnValue).catch(function(b){if(hV(b))return n.opts.writeSourceCheckpoint=!1,!0;throw b;})}return Promise.resolve(!0)};var q2={undefined:function(e,h){return 0===Pl(e.last_seq,h.last_seq)?h.last_seq:0},1:function(e,h){e=h.session_id===
e.session_id?{last_seq:h.last_seq,history:h.history}:gV(h.history,e.history);return e.last_seq}};LC.prototype.getCheckpoint=function(){var e=this;return e.opts&&e.opts.writeSourceCheckpoint&&!e.opts.writeTargetCheckpoint?e.src.get(e.id).then(function(h){return h.last_seq||0}).catch(function(h){if(404!==h.status)throw h;return 0}):e.target.get(e.id).then(function(h){return e.opts&&e.opts.writeTargetCheckpoint&&!e.opts.writeSourceCheckpoint?h.last_seq||0:e.src.get(e.id).then(function(n){if(h.version!==
n.version)return 0;var b=h.version?h.version.toString():"undefined";return b in q2?q2[b](h,n):0},function(n){if(404===n.status&&h.last_seq)return e.src.put({_id:e.id,last_seq:0}).then(function(){return 0},function(b){return hV(b)?(e.opts.writeSourceCheckpoint=!1,h.last_seq):0});throw n;})}).catch(function(h){if(404!==h.status)throw h;return 0})};Wr(wG,jo.EventEmitter);wG.prototype.cancel=function(){this.cancelled=!0;this.state="cancelled";this.emit("cancel")};wG.prototype.ready=function(e,h){function n(){b.cancel()}
var b=this;b._readyCalled||(b._readyCalled=!0,e.once("destroyed",n),h.once("destroyed",n),b.once("complete",function(){e.removeListener("destroyed",n);h.removeListener("destroyed",n)}))};Wr(eM,jo.EventEmitter);eM.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())};rh.plugin(function(e){e.adapter("idb",WU,!0)}).plugin(function(e){e.adapter("http",WL,!1);e.adapter("https",WL,!1)}).plugin({query:function(e,h,n){return p2.query.call(this,e,h,n)},viewCleanup:function(e){return p2.viewCleanup.call(this,
e)}}).plugin(function(e){e.replicate=dM;e.sync=b8;Object.defineProperty(e.prototype,"replicate",{get:function(){var h=this;"undefined"===typeof this.replicateMethods&&(this.replicateMethods={from:function(n,b,c){return h.constructor.replicate(n,h,b,c)},to:function(n,b,c){return h.constructor.replicate(h,n,b,c)}});return this.replicateMethods}});e.prototype.sync=function(h,n,b){return this.constructor.sync(this,h,n,b)}});var dga=Yfa=rh,Ww={};Object.defineProperty(Ww,"__esModule",{value:!0});gw.prototype.get=
function(e){return this._store["$"+e]};gw.prototype.set=function(e,h){this._store["$"+e]=h;return!0};gw.prototype.has=function(e){return"$"+e in this._store};gw.prototype.delete=function(e){e="$"+e;var h=e in this._store;delete this._store[e];return h};gw.prototype.forEach=function(e){for(var h=Object.keys(this._store),n=0,b=h.length;n<b;n++){var c=h[n],l=this._store[c];c=c.substring(1);e(l,c)}};Object.defineProperty(gw.prototype,"size",{get:function(){return Object.keys(this._store).length}});MC.prototype.add=
function(e){return this._store.set(e,!0)};MC.prototype.has=function(e){return this._store.has(e)};MC.prototype.forEach=function(e){this._store.forEach(function(h,n){e(n)})};Object.defineProperty(MC.prototype,"size",{get:function(){return this._store.size}});(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map})()?(Ww.Set=Set,Ww.Map=Map):(Ww.Set=
MC,Ww.Map=gw);var oQ={},pQ=Nh;oQ.test=function(){return"undefined"!==typeof pQ&&!pQ.browser};oQ.install=function(e){return function(){pQ.nextTick(e)}};var r2="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,qQ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,rQ={},s2=qQ.MutationObserver||qQ.WebKitMutationObserver;rQ.test=function(){return s2};rQ.install=function(e){var h=0;e=new s2(e);var n=qQ.document.createTextNode("");e.observe(n,
{characterData:!0});return function(){n.data=h=++h%2}};var sQ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,rJ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ega={},mE=[oQ,{test:function(){return"function"===typeof r2.queueMicrotask},install:function(e){return function(){r2.queueMicrotask(e)}}},rQ,{test:function(){return sQ.setImmediate?!1:"undefined"!==typeof sQ.MessageChannel},install:function(e){var h=new sQ.MessageChannel;h.port1.onmessage=
e;return function(){h.port2.postMessage(0)}}},{test:function(){return"document"in rJ&&"onreadystatechange"in rJ.document.createElement("script")},install:function(e){return function(){var h=rJ.document.createElement("script");h.onreadystatechange=function(){e();h.onreadystatechange=null;h.parentNode.removeChild(h);h=null};rJ.document.documentElement.appendChild(h);return e}}},{test:function(){return!0},install:function(e){return function(){setTimeout(e,0)}}}],pA,iy,NC=-1,hw=[],fM=!1,nE=-1,fga=mE.length;
for(;++nE<fga;)if(mE[nE]&&mE[nE].test&&mE[nE].test()){var gga=mE[nE].install(jV);break}kV.prototype.run=function(){var e=this.fun,h=this.array;switch(h.length){case 0:return e();case 1:return e(h[0]);case 2:return e(h[0],h[1]);case 3:return e(h[0],h[1],h[2]);default:return e.apply(null,h)}};var ki=ega=function(e){var h=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)h[n-1]=arguments[n];hw.push(new kV(e,h));fM||pA||(fM=!0,gga())},Jf={};Object.defineProperty(Jf,"__esModule",
{value:!0});(Fj&&"object"===typeof Fj&&"default"in Fj?Fj["default"]:Fj)(mj,Error);mj.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var hga=new mj(401,"unauthorized","Name or password is incorrect."),iga=new mj(400,"bad_request","Missing JSON list of 'docs'"),jga=new mj(404,"not_found","missing"),kga=new mj(409,"conflict","Document update conflict"),lga=new mj(400,"bad_request","_id field must contain a string"),mga=
new mj(412,"missing_id","_id is required for puts"),nga=new mj(400,"bad_request","Only reserved document ids may start with underscore."),oga=new mj(412,"precondition_failed","Database not open"),t2=new mj(500,"unknown_error","Database encountered an unknown error"),pga=new mj(500,"badarg","Some query argument is invalid"),qga=new mj(400,"invalid_request","Request was invalid"),rga=new mj(400,"query_parse_error","Some query parameter is invalid"),sga=new mj(500,"doc_validation","Bad special document member"),
tga=new mj(400,"bad_request","Something wrong with the request"),uga=new mj(400,"bad_request","Document must be a JSON object"),vga=new mj(404,"not_found","Database not found"),wga=new mj(500,"indexed_db_went_bad","unknown"),xga=new mj(500,"web_sql_went_bad","unknown"),yga=new mj(500,"levelDB_went_went_bad","unknown"),zga=new mj(403,"forbidden","Forbidden by design doc validate_doc_update function"),Aga=new mj(400,"bad_request","Invalid rev format"),Bga=new mj(412,"file_exists","The database could not be created, the file already exists."),
Cga=new mj(412,"missing_stub","A pre-existing attachment stub wasn't found"),Dga=new mj(413,"invalid_url","Provided URL is invalid");Jf.UNAUTHORIZED=hga;Jf.MISSING_BULK_DOCS=iga;Jf.MISSING_DOC=jga;Jf.REV_CONFLICT=kga;Jf.INVALID_ID=lga;Jf.MISSING_ID=mga;Jf.RESERVED_ID=nga;Jf.NOT_OPEN=oga;Jf.UNKNOWN_ERROR=t2;Jf.BAD_ARG=pga;Jf.INVALID_REQUEST=qga;Jf.QUERY_PARSE_ERROR=rga;Jf.DOC_VALIDATION=sga;Jf.BAD_REQUEST=tga;Jf.NOT_AN_OBJECT=uga;Jf.DB_MISSING=vga;Jf.WSQ_ERROR=xga;Jf.LDB_ERROR=yga;Jf.FORBIDDEN=zga;
Jf.INVALID_REV=Aga;Jf.FILE_EXISTS=Bga;Jf.MISSING_STUB=Cga;Jf.IDB_ERROR=wga;Jf.INVALID_URL=Dga;Jf.createError=function(e,h){function n(b){for(var c=Object.getOwnPropertyNames(e),l=0,a=c.length;l<a;l++)"function"!==typeof e[c[l]]&&(this[c[l]]=e[c[l]]);void 0!==b&&(this.reason=b)}n.prototype=mj.prototype;return new n(h)};Jf.generateErrorFromResponse=function(e){if("object"!==typeof e){var h=e;e=t2;e.data=h}"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409);"name"in e||(e.name=e.error||
"unknown");"status"in e||(e.status=500);"message"in e||(e.message=e.message||e.reason);return e};var Ega="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,tQ=Object.prototype.toString,sJ=function(e){return!(Ega&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===tQ.call(e)},u2=function(e){return!!sJ(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&0<=e.length&&"[object Array]"!==tQ.call(e)&&"[object Function]"===tQ.call(e.callee)},Fga=function(){return sJ(arguments)}();
sJ.isLegacyArguments=u2;var Gga=Fga?sJ:u2,Hga=Object.prototype.toString,Iga=Function.prototype.toString,Jga=/^\s*(?:function)?\*/,v2="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,w2=Object.getPrototypeOf;a:if(v2){try{var tJ=Function("return function*() {}")();break a}catch(e){}tJ=void 0}else tJ=!1;var Kga=tJ?w2(tJ):{},jh="function"==typeof Object.create?function(e,h){h&&(e.super_=h,e.prototype=Object.create(h.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:
function(e,h){if(h){e.super_=h;var n=function(){};n.prototype=h.prototype;e.prototype=new n;e.prototype.constructor=e}},x2=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8},Rh={},d8=x2,EV="undefined"!=typeof BigInt,hM="undefined"!=typeof Symbol,bp=hM&&void 0!==Symbol.toStringTag,ko="undefined"!=typeof Uint8Array,Lga="undefined"!=typeof ArrayBuffer;if(ko&&bp)var Mga=Object.getPrototypeOf(Uint8Array.prototype),Xp=jy(Object.getOwnPropertyDescriptor(Mga,
Symbol.toStringTag).get);var Xj=jy(Object.prototype.toString),e8=jy(Number.prototype.valueOf),f8=jy(String.prototype.valueOf),g8=jy(Boolean.prototype.valueOf);if(EV)var h8=jy(BigInt.prototype.valueOf);if(hM)var i8=jy(Symbol.prototype.valueOf);Rh.isArgumentsObject=Gga;Rh.isGeneratorFunction=function(e){return"function"==typeof e&&(!!Jga.test(Iga.call(e))||(v2?w2(e)===Kga:"[object GeneratorFunction]"===Hga.call(e)))};Rh.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||
null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch};Rh.isArrayBufferView=function(e){return Lga&&ArrayBuffer.isView?ArrayBuffer.isView(e):lV(e)||yV(e)};Rh.isTypedArray=lV;Rh.isUint8Array=mV;Rh.isUint8ClampedArray=nV;Rh.isUint16Array=oV;Rh.isUint32Array=pV;Rh.isInt8Array=qV;Rh.isInt16Array=rV;Rh.isInt32Array=sV;Rh.isFloat32Array=tV;Rh.isFloat64Array=uV;Rh.isBigInt64Array=vV;Rh.isBigUint64Array=wV;yG.working="undefined"!=typeof Map&&yG(new Map);Rh.isMap=function(e){return"undefined"!=
typeof Map&&(yG.working?yG(e):e instanceof Map)};zG.working="undefined"!=typeof Set&&zG(new Set);Rh.isSet=function(e){return"undefined"!=typeof Set&&(zG.working?zG(e):e instanceof Set)};AG.working="undefined"!=typeof WeakMap&&AG(new WeakMap);Rh.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(AG.working?AG(e):e instanceof WeakMap)};gM.working="undefined"!=typeof WeakSet&&gM(new WeakSet);Rh.isWeakSet=function(e){return gM(e)};BG.working="undefined"!=typeof ArrayBuffer&&BG(new ArrayBuffer);
Rh.isArrayBuffer=xV;CG.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&CG(new DataView(new ArrayBuffer(1),0,1));Rh.isDataView=yV;DG.working="undefined"!=typeof SharedArrayBuffer&&DG(new SharedArrayBuffer);Rh.isSharedArrayBuffer=zV;Rh.isAsyncFunction=function(e){return"[object AsyncFunction]"===Xj(e)};Rh.isMapIterator=function(e){return"[object Map Iterator]"===Xj(e)};Rh.isSetIterator=function(e){return"[object Set Iterator]"===Xj(e)};Rh.isGeneratorObject=function(e){return"[object Generator]"===
Xj(e)};Rh.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===Xj(e)};Rh.isNumberObject=AV;Rh.isStringObject=BV;Rh.isBooleanObject=CV;Rh.isBigIntObject=DV;Rh.isSymbolObject=FV;Rh.isBoxedPrimitive=function(e){return AV(e)||BV(e)||CV(e)||DV(e)||FV(e)};Rh.isAnyArrayBuffer=function(e){return ko&&(xV(e)||zV(e))};["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(Rh,e,{enumerable:!1,value:function(){throw Error(e+" is not supported in userland");
}})});var oE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Jg={},Bt=Nh,y2=Object.getOwnPropertyDescriptors||function(e){for(var h=Object.keys(e),n={},b=0;b<h.length;b++)n[h[b]]=Object.getOwnPropertyDescriptor(e,h[b]);return n},Nga=/%[sdj%]/g;Jg.format=function(e){if(!GG(e)){for(var h=[],n=0;n<arguments.length;n++)h.push(iw(arguments[n]));return h.join(" ")}n=1;var b=arguments,c=b.length;h=String(e).replace(Nga,function(a){if("%%"===a)return"%";if(n>=c)return a;switch(a){case "%s":return String(b[n++]);
case "%d":return Number(b[n++]);case "%j":try{return JSON.stringify(b[n++])}catch(f){return"[Circular]"}default:return a}});for(var l=b[n];n<c;l=b[++n])null!==l&&qA(l)?h+=" "+iw(l):h+=" "+l;return h};Jg.deprecate=function(e,h){if(void 0!==Bt&&!0===Bt.noDeprecation)return e;if(void 0===Bt)return function(){return Jg.deprecate(e,h).apply(this||oE,arguments)};var n=!1;return function(){if(!n){if(Bt.throwDeprecation)throw Error(h);Bt.traceDeprecation?console.trace(h):console.error(h);n=!0}return e.apply(this||
oE,arguments)}};var uJ={},z2=/^$/;if(Bt.env.NODE_DEBUG){var uQ=Bt.env.NODE_DEBUG;uQ=uQ.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase();z2=new RegExp("^"+uQ+"$","i")}Jg.debuglog=function(e){if(e=e.toUpperCase(),!uJ[e])if(z2.test(e)){var h=Bt.pid;uJ[e]=function(){var n=Jg.format.apply(Jg,arguments);console.error("%s %d: %s",e,h,n)}}else uJ[e]=function(){};return uJ[e]};Jg.inspect=iw;iw.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,
39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};iw.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};Jg.types=Rh;Jg.isArray=HV;Jg.isBoolean=iM;Jg.isNull=function(e){return null===e};Jg.isNullOrUndefined=function(e){return null==e};Jg.isNumber=GV;Jg.isString=GG;Jg.isSymbol=function(e){return"symbol"==typeof e};Jg.isUndefined=ky;Jg.isRegExp=QC;Jg.types.isRegExp=
QC;Jg.isObject=qA;Jg.isDate=HG;Jg.types.isDate=HG;Jg.isError=PC;Jg.types.isNativeError=PC;Jg.isFunction=FG;Jg.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e};Jg.isBuffer=x2;var m8="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");Jg.log=function(){console.log("%s - %s",l8(),Jg.format.apply(Jg,arguments))};Jg.inherits=jh;Jg._extend=function(e,h){if(!h||!qA(h))return e;for(var n=Object.keys(h),b=n.length;b--;)e[n[b]]=
h[n[b]];return e};var az="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;Jg.promisify=function(e){function h(){for(var n,b,c=new Promise(function(f,m){n=f;b=m}),l=[],a=0;a<arguments.length;a++)l.push(arguments[a]);l.push(function(f,m){f?b(f):n(m)});try{e.apply(this||oE,l)}catch(f){b(f)}return c}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(az&&e[az]){if("function"!=typeof(h=e[az]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');
return Object.defineProperty(h,az,{value:h,enumerable:!1,writable:!1,configurable:!0}),h}return Object.setPrototypeOf(h,Object.getPrototypeOf(e)),az&&Object.defineProperty(h,az,{value:h,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(h,y2(e))};Jg.promisify.custom=az;Jg.callbackify=function(e){function h(){for(var n=[],b=0;b<arguments.length;b++)n.push(arguments[b]);var c=n.pop();if("function"!=typeof c)throw new TypeError("The last argument must be of type Function");var l=this||
oE,a=function(){return c.apply(l,arguments)};e.apply(this||oE,n).then(function(f){Bt.nextTick(a.bind(null,null,f))},function(f){Bt.nextTick(n8.bind(null,f,a))})}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(h,Object.getPrototypeOf(e)),Object.defineProperties(h,y2(e)),h};for(var Ys=[],Dq=[],Oga="undefined"!=typeof Uint8Array?Uint8Array:Array,xB=0;64>xB;++xB)Ys[xB]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[xB],
Dq["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(xB)]=xB;Dq[45]=62;Dq[95]=63;var $g={},qM={byteLength:function(e){e=IV(e);var h=e[1];return 3*(e[0]+h)/4-h},toByteArray:function(e){var h=IV(e);var n=h[0];h=h[1];var b=new Oga(3*(n+h)/4-h),c=0,l=0<h?n-4:n;for(n=0;n<l;n+=4){var a=Dq[e.charCodeAt(n)]<<18|Dq[e.charCodeAt(n+1)]<<12|Dq[e.charCodeAt(n+2)]<<6|Dq[e.charCodeAt(n+3)];b[c++]=a>>16&255;b[c++]=a>>8&255;b[c++]=255&a}2===h&&(a=Dq[e.charCodeAt(n)]<<2|Dq[e.charCodeAt(n+
1)]>>4,b[c++]=255&a);1===h&&(a=Dq[e.charCodeAt(n)]<<10|Dq[e.charCodeAt(n+1)]<<4|Dq[e.charCodeAt(n+2)]>>2,b[c++]=a>>8&255,b[c++]=255&a);return b},fromByteArray:function(e){for(var h,n=e.length,b=n%3,c=[],l=0,a=n-b;l<a;l+=16383)c.push(o8(e,l,l+16383>a?a:l+16383));1===b?(h=e[n-1],c.push(Ys[h>>2]+Ys[h<<4&63]+"==")):2===b&&(h=(e[n-2]<<8)+e[n-1],c.push(Ys[h>>10]+Ys[h>>4&63]+Ys[h<<2&63]+"="));return c.join("")}},rA={read:function(e,h,n,b,c){var l=8*c-b-1;var a=(1<<l)-1,f=a>>1,m=-7;c=n?c-1:0;var q=n?-1:1,
r=e[h+c];c+=q;n=r&(1<<-m)-1;r>>=-m;for(m+=l;0<m;n=256*n+e[h+c],c+=q,m-=8);l=n&(1<<-m)-1;n>>=-m;for(m+=b;0<m;l=256*l+e[h+c],c+=q,m-=8);if(0===n)n=1-f;else{if(n===a)return l?NaN:1/0*(r?-1:1);l+=Math.pow(2,b);n-=f}return(r?-1:1)*l*Math.pow(2,n-b)},write:function(e,h,n,b,c,l){var a,f,m,q=8*l-c-1,r=(1<<q)-1,u=r>>1,v=23===c?Math.pow(2,-24)-Math.pow(2,-77):0;l=b?0:l-1;b=b?1:-1;var y=0>h||0===h&&0>1/h?1:0;h=Math.abs(h);for(isNaN(h)||h===1/0?(f=isNaN(h)?1:0,a=r):(a=Math.floor(Math.log(h)/Math.LN2),1>h*(m=
Math.pow(2,-a))&&(a--,m*=2),2<=(h+=1<=a+u?v/m:v*Math.pow(2,1-u))*m&&(a++,m/=2),a+u>=r?(f=0,a=r):1<=a+u?(f=(h*m-1)*Math.pow(2,c),a+=u):(f=h*Math.pow(2,u-1)*Math.pow(2,c),a=0));8<=c;e[n+l]=255&f,l+=b,f/=256,c-=8);a=a<<c|f;for(q+=c;0<q;e[n+l]=255&a,l+=b,a/=256,q-=8);e[n+l-b]|=128*y}},A2="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;$g.Buffer=$d;$g.SlowBuffer=function(e){+e!=e&&(e=0);return $d.alloc(+e)};$g.INSPECT_MAX_BYTES=50;$g.kMaxLength=2147483647;
$d.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(e,h),42===e.foo()}catch(n){return!1}}();$d.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty($d.prototype,"parent",{enumerable:!0,
get:function(){if($d.isBuffer(this))return this.buffer}});Object.defineProperty($d.prototype,"offset",{enumerable:!0,get:function(){if($d.isBuffer(this))return this.byteOffset}});$d.poolSize=8192;$d.from=function(e,h,n){return JV(e,h,n)};Object.setPrototypeOf($d.prototype,Uint8Array.prototype);Object.setPrototypeOf($d,Uint8Array);$d.alloc=function(e,h,n){return LV(e),0>=e?Iu(e):void 0!==h?"string"==typeof n?Iu(e).fill(h,n):Iu(e).fill(h):Iu(e)};$d.allocUnsafe=function(e){return mM(e)};$d.allocUnsafeSlow=
function(e){return mM(e)};$d.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==$d.prototype};$d.compare=function(e,h){if(Ju(e,Uint8Array)&&(e=$d.from(e,e.offset,e.byteLength)),Ju(h,Uint8Array)&&(h=$d.from(h,h.offset,h.byteLength)),!$d.isBuffer(e)||!$d.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===h)return 0;for(var n=e.length,b=h.length,c=0,l=Math.min(n,b);c<l;++c)if(e[c]!==h[c]){n=e[c];b=h[c];break}return n<b?-1:b<n?1:0};
$d.isEncoding=function(e){switch(String(e).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};$d.concat=function(e,h){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return $d.alloc(0);var n;if(void 0===h)for(n=h=0;n<e.length;++n)h+=e[n].length;h=$d.allocUnsafe(h);var b=0;for(n=0;n<e.length;++n){var c=e[n];
if(Ju(c,Uint8Array)&&(c=$d.from(c)),!$d.isBuffer(c))throw new TypeError('"list" argument must be an Array of Buffers');c.copy(h,b);b+=c.length}return h};$d.byteLength=KV;$d.prototype._isBuffer=!0;$d.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var h=0;h<e;h+=2)ly(this,h,h+1);return this};$d.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var h=
0;h<e;h+=4)ly(this,h,h+3),ly(this,h+1,h+2);return this};$d.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var h=0;h<e;h+=8)ly(this,h,h+7),ly(this,h+1,h+6),ly(this,h+2,h+5),ly(this,h+3,h+4);return this};$d.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?NV(this,0,e):q8.apply(this,arguments)};$d.prototype.toLocaleString=$d.prototype.toString;$d.prototype.equals=function(e){if(!$d.isBuffer(e))throw new TypeError("Argument must be a Buffer");
return this===e||0===$d.compare(this,e)};$d.prototype.inspect=function(){var e="",h=$g.INSPECT_MAX_BYTES;return e=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(e+=" ... "),"<Buffer "+e+">"};A2&&($d.prototype[A2]=$d.prototype.inspect);$d.prototype.compare=function(e,h,n,b,c){if(Ju(e,Uint8Array)&&(e=$d.from(e,e.offset,e.byteLength)),!$d.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===h&&
(h=0),void 0===n&&(n=e?e.length:0),void 0===b&&(b=0),void 0===c&&(c=this.length),0>h||n>e.length||0>b||c>this.length)throw new RangeError("out of range index");if(b>=c&&h>=n)return 0;if(b>=c)return-1;if(h>=n)return 1;if(this===e)return 0;var l=(c>>>=0)-(b>>>=0),a=(n>>>=0)-(h>>>=0),f=Math.min(l,a);b=this.slice(b,c);e=e.slice(h,n);for(h=0;h<f;++h)if(b[h]!==e[h]){l=b[h];a=e[h];break}return l<a?-1:a<l?1:0};$d.prototype.includes=function(e,h,n){return-1!==this.indexOf(e,h,n)};$d.prototype.indexOf=function(e,
h,n){return OV(this,e,h,n,!0)};$d.prototype.lastIndexOf=function(e,h,n){return OV(this,e,h,n,!1)};$d.prototype.write=function(e,h,n,b){if(void 0===h)b="utf8",n=this.length,h=0;else if(void 0===n&&"string"==typeof h)b=h,n=this.length,h=0;else{if(!isFinite(h))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");h>>>=0;isFinite(n)?(n>>>=0,void 0===b&&(b="utf8")):(b=n,n=void 0)}var c=this.length-h;if((void 0===n||n>c)&&(n=c),0<e.length&&(0>n||0>h)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");
b||(b="utf8");for(c=!1;;)switch(b){case "hex":a:{h=Number(h)||0;b=this.length-h;n?(n=Number(n))>b&&(n=b):n=b;b=e.length;n>b/2&&(n=b/2);for(b=0;b<n;++b){c=parseInt(e.substr(2*b,2),16);if(c!=c){n=b;break a}this[h+b]=c}n=b}return n;case "utf8":case "utf-8":return IG(pM(e,this.length-h),this,h,n);case "ascii":return QV(this,e,h,n);case "latin1":case "binary":return QV(this,e,h,n);case "base64":return IG(MV(e),this,h,n);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=n;c=this.length-h;for(var l=
[],a=0;a<e.length&&!(0>(c-=2));++a){var f=e.charCodeAt(a);n=f>>8;f%=256;l.push(f);l.push(n)}return IG(l,this,h,b);default:if(c)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase();c=!0}};$d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};$d.prototype.slice=function(e,h){var n=this.length;0>(e=~~e)?0>(e+=n)&&(e=0):e>n&&(e=n);0>(h=void 0===h?n:~~h)?0>(h+=n)&&(h=0):h>n&&(h=n);h<e&&(h=e);e=this.subarray(e,h);return Object.setPrototypeOf(e,
$d.prototype),e};$d.prototype.readUIntLE=function(e,h,n){e>>>=0;h>>>=0;n||Ql(e,h,this.length);n=this[e];for(var b=1,c=0;++c<h&&(b*=256);)n+=this[e+c]*b;return n};$d.prototype.readUIntBE=function(e,h,n){e>>>=0;h>>>=0;n||Ql(e,h,this.length);n=this[e+--h];for(var b=1;0<h&&(b*=256);)n+=this[e+--h]*b;return n};$d.prototype.readUInt8=function(e,h){return e>>>=0,h||Ql(e,1,this.length),this[e]};$d.prototype.readUInt16LE=function(e,h){return e>>>=0,h||Ql(e,2,this.length),this[e]|this[e+1]<<8};$d.prototype.readUInt16BE=
function(e,h){return e>>>=0,h||Ql(e,2,this.length),this[e]<<8|this[e+1]};$d.prototype.readUInt32LE=function(e,h){return e>>>=0,h||Ql(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]};$d.prototype.readUInt32BE=function(e,h){return e>>>=0,h||Ql(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])};$d.prototype.readIntLE=function(e,h,n){e>>>=0;h>>>=0;n||Ql(e,h,this.length);n=this[e];for(var b=1,c=0;++c<h&&(b*=256);)n+=this[e+c]*b;return n>=128*b&&(n-=Math.pow(2,
8*h)),n};$d.prototype.readIntBE=function(e,h,n){e>>>=0;h>>>=0;n||Ql(e,h,this.length);n=h;for(var b=1,c=this[e+--n];0<n&&(b*=256);)c+=this[e+--n]*b;return c>=128*b&&(c-=Math.pow(2,8*h)),c};$d.prototype.readInt8=function(e,h){return e>>>=0,h||Ql(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]};$d.prototype.readInt16LE=function(e,h){e>>>=0;h||Ql(e,2,this.length);e=this[e]|this[e+1]<<8;return 32768&e?4294901760|e:e};$d.prototype.readInt16BE=function(e,h){e>>>=0;h||Ql(e,2,this.length);e=this[e+
1]|this[e]<<8;return 32768&e?4294901760|e:e};$d.prototype.readInt32LE=function(e,h){return e>>>=0,h||Ql(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};$d.prototype.readInt32BE=function(e,h){return e>>>=0,h||Ql(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};$d.prototype.readFloatLE=function(e,h){return e>>>=0,h||Ql(e,4,this.length),rA.read(this,e,!0,23,4)};$d.prototype.readFloatBE=function(e,h){return e>>>=0,h||Ql(e,4,this.length),rA.read(this,e,!1,23,4)};$d.prototype.readDoubleLE=
function(e,h){return e>>>=0,h||Ql(e,8,this.length),rA.read(this,e,!0,52,8)};$d.prototype.readDoubleBE=function(e,h){return e>>>=0,h||Ql(e,8,this.length),rA.read(this,e,!1,52,8)};$d.prototype.writeUIntLE=function(e,h,n,b){(e=+e,h>>>=0,n>>>=0,b)||lo(this,e,h,n,Math.pow(2,8*n)-1,0);b=1;var c=0;for(this[h]=255&e;++c<n&&(b*=256);)this[h+c]=e/b&255;return h+n};$d.prototype.writeUIntBE=function(e,h,n,b){(e=+e,h>>>=0,n>>>=0,b)||lo(this,e,h,n,Math.pow(2,8*n)-1,0);b=n-1;var c=1;for(this[h+b]=255&e;0<=--b&&
(c*=256);)this[h+b]=e/c&255;return h+n};$d.prototype.writeUInt8=function(e,h,n){return e=+e,h>>>=0,n||lo(this,e,h,1,255,0),this[h]=255&e,h+1};$d.prototype.writeUInt16LE=function(e,h,n){return e=+e,h>>>=0,n||lo(this,e,h,2,65535,0),this[h]=255&e,this[h+1]=e>>>8,h+2};$d.prototype.writeUInt16BE=function(e,h,n){return e=+e,h>>>=0,n||lo(this,e,h,2,65535,0),this[h]=e>>>8,this[h+1]=255&e,h+2};$d.prototype.writeUInt32LE=function(e,h,n){return e=+e,h>>>=0,n||lo(this,e,h,4,4294967295,0),this[h+3]=e>>>24,this[h+
2]=e>>>16,this[h+1]=e>>>8,this[h]=255&e,h+4};$d.prototype.writeUInt32BE=function(e,h,n){return e=+e,h>>>=0,n||lo(this,e,h,4,4294967295,0),this[h]=e>>>24,this[h+1]=e>>>16,this[h+2]=e>>>8,this[h+3]=255&e,h+4};$d.prototype.writeIntLE=function(e,h,n,b){(e=+e,h>>>=0,b)||(b=Math.pow(2,8*n-1),lo(this,e,h,n,b-1,-b));b=0;var c=1,l=0;for(this[h]=255&e;++b<n&&(c*=256);)0>e&&0===l&&0!==this[h+b-1]&&(l=1),this[h+b]=(e/c>>0)-l&255;return h+n};$d.prototype.writeIntBE=function(e,h,n,b){(e=+e,h>>>=0,b)||(b=Math.pow(2,
8*n-1),lo(this,e,h,n,b-1,-b));b=n-1;var c=1,l=0;for(this[h+b]=255&e;0<=--b&&(c*=256);)0>e&&0===l&&0!==this[h+b+1]&&(l=1),this[h+b]=(e/c>>0)-l&255;return h+n};$d.prototype.writeInt8=function(e,h,n){return e=+e,h>>>=0,n||lo(this,e,h,1,127,-128),0>e&&(e=255+e+1),this[h]=255&e,h+1};$d.prototype.writeInt16LE=function(e,h,n){return e=+e,h>>>=0,n||lo(this,e,h,2,32767,-32768),this[h]=255&e,this[h+1]=e>>>8,h+2};$d.prototype.writeInt16BE=function(e,h,n){return e=+e,h>>>=0,n||lo(this,e,h,2,32767,-32768),this[h]=
e>>>8,this[h+1]=255&e,h+2};$d.prototype.writeInt32LE=function(e,h,n){return e=+e,h>>>=0,n||lo(this,e,h,4,2147483647,-2147483648),this[h]=255&e,this[h+1]=e>>>8,this[h+2]=e>>>16,this[h+3]=e>>>24,h+4};$d.prototype.writeInt32BE=function(e,h,n){return e=+e,h>>>=0,n||lo(this,e,h,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[h]=e>>>24,this[h+1]=e>>>16,this[h+2]=e>>>8,this[h+3]=255&e,h+4};$d.prototype.writeFloatLE=function(e,h,n){return SV(this,e,h,!0,n)};$d.prototype.writeFloatBE=function(e,h,n){return SV(this,
e,h,!1,n)};$d.prototype.writeDoubleLE=function(e,h,n){return TV(this,e,h,!0,n)};$d.prototype.writeDoubleBE=function(e,h,n){return TV(this,e,h,!1,n)};$d.prototype.copy=function(e,h,n,b){if(!$d.isBuffer(e))throw new TypeError("argument should be a Buffer");if((n||(n=0),b||0===b||(b=this.length),h>=e.length&&(h=e.length),h||(h=0),0<b&&b<n&&(b=n),b===n)||0===e.length||0===this.length)return 0;if(0>h)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");
if(0>b)throw new RangeError("sourceEnd out of bounds");b>this.length&&(b=this.length);e.length-h<b-n&&(b=e.length-h+n);var c=b-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(h,n,b);else if(this===e&&n<h&&h<b)for(b=c-1;0<=b;--b)e[b+h]=this[b+n];else Uint8Array.prototype.set.call(e,this.subarray(n,b),h);return c};$d.prototype.fill=function(e,h,n,b){if("string"==typeof e){if("string"==typeof h?(b=h,h=0,n=this.length):"string"==typeof n&&(b=n,n=this.length),void 0!==
b&&"string"!=typeof b)throw new TypeError("encoding must be a string");if("string"==typeof b&&!$d.isEncoding(b))throw new TypeError("Unknown encoding: "+b);if(1===e.length){var c=e.charCodeAt(0);("utf8"===b&&128>c||"latin1"===b)&&(e=c)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(0>h||this.length<h||this.length<n)throw new RangeError("Out of range index");if(n<=h)return this;if(h>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(b=h;b<n;++b)this[b]=e;else{c=
$d.isBuffer(e)?e:$d.from(e,b);var l=c.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(b=0;b<n-h;++b)this[b+h]=c[b%l]}return this};var s8=/[^+/0-9A-Za-z-_]/g,r8=function(){for(var e=Array(256),h=0;16>h;++h)for(var n=16*h,b=0;16>b;++b)e[n+b]="0123456789abcdef"[h]+"0123456789abcdef"[b];return e}(),vJ={},wJ=$g,Zs=wJ.Buffer;Zs.from&&Zs.alloc&&Zs.allocUnsafe&&Zs.allocUnsafeSlow?vJ=wJ:(UV(wJ,vJ),vJ.Buffer=my);my.prototype=Object.create(Zs.prototype);UV(Zs,my);
my.from=function(e,h,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return Zs(e,h,n)};my.alloc=function(e,h,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");e=Zs(e);return void 0!==h?"string"==typeof n?e.fill(h,n):e.fill(h):e.fill(0),e};my.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return Zs(e)};my.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");
return wJ.SlowBuffer(e)};var Yh=vJ,sA={},rM=Yh.Buffer,VV=rM.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};sA.StringDecoder=RC;RC.prototype.write=function(e){if(0===e.length)return"";var h;if(this.lastNeed){if(void 0===(h=this.fillLast(e)))return"";var n=this.lastNeed;this.lastNeed=0}else n=0;return n<e.length?h?h+this.text(e,
n):this.text(e,n):h||""};RC.prototype.end=function(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+"\ufffd":e};RC.prototype.text=function(e,h){var n=e.length-1;if(n<h)n=0;else{var b=sM(e[n]);n=0<=b?(0<b&&(this.lastNeed=b-1),b):--n<h||-2===b?0:0<=(b=sM(e[n]))?(0<b&&(this.lastNeed=b-2),b):--n<h||-2===b?0:0<=(b=sM(e[n]))?(0<b&&(2===b?b=0:this.lastNeed=b-3),b):0}if(!this.lastNeed)return e.toString("utf8",h);this.lastTotal=n;b=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,b),e.toString("utf8",
h,b)};RC.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length);this.lastNeed-=e.length};var KG=$s.EventEmitter,Ar={},WV={};Yp("ERR_INVALID_OPT_VALUE",function(e,h){return'The value "'+h+'" is invalid for option "'+e+'"'},TypeError);Yp("ERR_INVALID_ARG_TYPE",function(e,h,n){var b;e=("string"==typeof h&&"not "===
h.substr(0,4)?(b="must not be",h=h.replace(/^not /,"")):b="must be",function(c,l,a){return(void 0===a||a>c.length)&&(a=c.length),c.substring(a-l.length,a)===l}(e," argument"))?"The "+e+" "+b+" "+XV(h,"type"):'The "'+e+'" '+(function(c,l,a){return"number"!=typeof a&&(a=0),!(a+l.length>c.length)&&-1!==c.indexOf(l,a)}(e,".")?"property":"argument")+" "+b+" "+XV(h,"type");return e+=". Received type "+typeof n,e},TypeError);Yp("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Yp("ERR_METHOD_NOT_IMPLEMENTED",
function(e){return"The "+e+" method is not implemented"});Yp("ERR_STREAM_PREMATURE_CLOSE","Premature close");Yp("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});Yp("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Yp("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Yp("ERR_STREAM_WRITE_AFTER_END","write after end");Yp("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Yp("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+
e},TypeError);Yp("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Ar.codes=WV;var eW=function(){throw Error("Readable.from is not available in the browser");},uM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,gW=function(e,h){if(tM("noDeprecation"))return e;var n=!1;return function(){if(!n){if(tM("throwDeprecation"))throw Error(h);tM("traceDeprecation")?console.trace(h):console.warn(h);n=!0}return e.apply(this||uM,arguments)}},xJ=$g.Buffer,vQ=
Jg.inspect,Pga=vQ&&vQ.custom||"inspect",F8=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");!0;this.tail=this.head=null;this.length=0}var h;return h=[{key:"push",value:function(n){n={data:n,next:null};0<this.length?this.tail.next=n:this.head=n;this.tail=n;++this.length}},{key:"unshift",value:function(n){n={data:n,next:this.head};0===this.length&&(this.tail=n);this.head=n;++this.length}},{key:"shift",value:function(){if(0!==this.length){var n=
this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(n){if(0===this.length)return"";for(var b=this.head,c=""+b.data;b=b.next;)c+=n+b.data;return c}},{key:"concat",value:function(n){if(0===this.length)return xJ.alloc(0);for(var b,c,l=xJ.allocUnsafe(n>>>0),a=this.head,f=0;a;)n=a.data,b=l,c=f,void xJ.prototype.copy.call(n,b,c),f+=a.data.length,a=a.next;
return l}},{key:"consume",value:function(n,b){var c;return n<this.head.data.length?(c=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):c=n===this.head.data.length?this.shift():b?this._getString(n):this._getBuffer(n),c}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var b=this.head,c=1,l=b.data;for(n-=l.length;b=b.next;){var a=b.data,f=n>a.length?a.length:n;if(f===a.length?l+=a:l+=a.slice(0,n),0==(n-=f)){f===a.length?(++c,b.next?this.head=
b.next:this.head=this.tail=null):(this.head=b,b.data=a.slice(f));break}++c}return this.length-=c,l}},{key:"_getBuffer",value:function(n){var b=xJ.allocUnsafe(n),c=this.head,l=1;c.data.copy(b);for(n-=c.data.length;c=c.next;){var a=c.data,f=n>a.length?a.length:n;if(a.copy(b,b.length-n,0,f),0==(n-=f)){f===a.length?(++l,c.next?this.head=c.next:this.head=this.tail=null):(this.head=c,c.data=a.slice(f));break}++l}return this.length-=l,b}},{key:Pga,value:function(n,b){return vQ(this,function(c){for(var l=
1;l<arguments.length;l++){var a=null!=arguments[l]?arguments[l]:{};l%2?YV(Object(a),!0).forEach(function(f){var m=a[f];f in c?Object.defineProperty(c,f,{value:m,enumerable:!0,configurable:!0,writable:!0}):c[f]=m}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(a)):YV(Object(a)).forEach(function(f){Object.defineProperty(c,f,Object.getOwnPropertyDescriptor(a,f))})}return c}({},b,{depth:0,customInspect:!1}))}}],A8(e.prototype,h),e}(),bz=Nh,cW={destroy:function(e,
h){var n=this,b=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||b?(h?h(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,bz.nextTick(vM,this,e)):bz.nextTick(vM,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(c){!h&&c?n._writableState?n._writableState.errorEmitted?bz.nextTick(JG,n):
(n._writableState.errorEmitted=!0,bz.nextTick(ZV,n,c)):bz.nextTick(ZV,n,c):h?(bz.nextTick(JG,n),h(c)):bz.nextTick(JG,n)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=
!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,h){var n=e._readableState,b=e._writableState;n&&n.autoDestroy||b&&b.autoDestroy?e.destroy(h):e.emit("error",h)}},Qga=Ar.codes.ERR_INVALID_OPT_VALUE,dW={getHighWaterMark:function(e,h,n,b){h=null!=h.highWaterMark?h.highWaterMark:b?h[n]:null;if(null!=h){if(!isFinite(h)||Math.floor(h)!==h||0>h)throw new Qga(b?n:"highWaterMark",h);return Math.floor(h)}return e.objectMode?16:16384}},B2=Ar.codes.ERR_STREAM_PREMATURE_CLOSE,wQ,$V=Nh,Rga=function c(h,
n,b){if("function"==typeof n)return c(h,null,n);n||(n={});b=function(A){var C=!1;return function(){if(!C){C=!0;for(var G=arguments.length,F=Array(G),N=0;N<G;N++)F[N]=arguments[N];A.apply(this,F)}}}(b||B8);var l=n.readable||!1!==n.readable&&h.readable,a=n.writable||!1!==n.writable&&h.writable,f=function(){h.writable||q()},m=h._writableState&&h._writableState.finished,q=function(){a=!1;m=!0;l||b.call(h)},r=h._readableState&&h._readableState.endEmitted,u=function(){l=!1;r=!0;a||b.call(h)},v=function(A){b.call(h,
A)},y=function(){var A;return l&&!r?(h._readableState&&h._readableState.ended||(A=new B2),b.call(h,A)):a&&!m?(h._writableState&&h._writableState.ended||(A=new B2),b.call(h,A)):void 0},z=function(){h.req.on("finish",q)};return h.setHeader&&"function"==typeof h.abort?(h.on("complete",q),h.on("abort",y),h.req?z():h.on("request",z)):a&&!h._writableState&&(h.on("end",f),h.on("close",f)),h.on("end",u),h.on("finish",q),!1!==n.error&&h.on("error",v),h.on("close",y),function(){h.removeListener("complete",
q);h.removeListener("abort",y);h.removeListener("request",z);h.req&&h.req.removeListener("finish",q);h.removeListener("end",f);h.removeListener("close",f);h.removeListener("finish",q);h.removeListener("end",u);h.removeListener("error",v);h.removeListener("close",y)}},lw=Symbol("lastResolve"),py=Symbol("lastReject"),pE=Symbol("error"),yJ=Symbol("ended"),oy=Symbol("lastPromise"),xQ=Symbol("handlePromise"),ny=Symbol("stream"),Sga=Object.getPrototypeOf(function(){}),Tga=Object.setPrototypeOf((jw(wQ={get stream(){return this[ny]},
next:function(){var h=this,n=this[pE];if(null!==n)return Promise.reject(n);if(this[yJ])return Promise.resolve(kw(void 0,!0));if(this[ny].destroyed)return new Promise(function(b,c){$V.nextTick(function(){h[pE]?c(h[pE]):b(kw(void 0,!0))})});if(n=this[oy])n=new Promise(function(b,c){return function(l,a){b.then(function(){if(c[yJ])return l(kw(void 0,!0)),void 0;c[xQ](l,a)},a)}}(n,this));else{n=this[ny].read();if(null!==n)return Promise.resolve(kw(n,!1));n=new Promise(this[xQ])}return this[oy]=n,n}},Symbol.asyncIterator,
function(){return this}),jw(wQ,"return",function(){var h=this;return new Promise(function(n,b){h[ny].destroy(null,function(c){if(c)return b(c),void 0;n(kw(void 0,!0))})})}),wQ),Sga),G8=function(h){var n,b=Object.create(Tga,(jw(n={},ny,{value:h,writable:!0}),jw(n,lw,{value:null,writable:!0}),jw(n,py,{value:null,writable:!0}),jw(n,pE,{value:null,writable:!0}),jw(n,yJ,{value:h._readableState.endEmitted,writable:!0}),jw(n,xQ,{value:function(c,l){var a=b[ny].read();a?(b[oy]=null,b[lw]=null,b[py]=null,
c(kw(a,!1))):(b[lw]=c,b[py]=l)},writable:!0}),n));return b[oy]=null,Rga(h,function(c){if(c&&"ERR_STREAM_PREMATURE_CLOSE"!==c.code){var l=b[py];return null!==l&&(b[oy]=null,b[lw]=null,b[py]=null,l(c)),b[pE]=c,void 0}c=b[lw];null!==c&&(b[oy]=null,b[lw]=null,b[py]=null,c(kw(void 0,!0)));b[yJ]=!0}),h.on("readable",D8.bind(null,b)),b},wM={},bW=!1,E8="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,xM={},fW=!1,I8="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?
self:global,yM={},hW=!1,Uga=aW(),C2=Ar.codes.ERR_STREAM_PREMATURE_CLOSE,EM=function l(n,b,c){if("function"==typeof b)return l(n,null,b);b||(b={});c=function(C){var G=!1;return function(){if(!G){G=!0;for(var F=arguments.length,N=Array(F),L=0;L<F;L++)N[L]=arguments[L];C.apply(this,N)}}}(c||J8);var a=b.readable||!1!==b.readable&&n.readable,f=b.writable||!1!==b.writable&&n.writable,m=function(){n.writable||r()},q=n._writableState&&n._writableState.finished,r=function(){f=!1;q=!0;a||c.call(n)},u=n._readableState&&
n._readableState.endEmitted,v=function(){a=!1;u=!0;f||c.call(n)},y=function(C){c.call(n,C)},z=function(){var C;return a&&!u?(n._readableState&&n._readableState.ended||(C=new C2),c.call(n,C)):f&&!q?(n._writableState&&n._writableState.ended||(C=new C2),c.call(n,C)):void 0},A=function(){n.req.on("finish",r)};return n.setHeader&&"function"==typeof n.abort?(n.on("complete",r),n.on("abort",z),n.req?A():n.on("request",A)):f&&!n._writableState&&(n.on("end",m),n.on("close",m)),n.on("end",v),n.on("finish",
r),!1!==b.error&&n.on("error",y),n.on("close",z),function(){n.removeListener("complete",r);n.removeListener("abort",z);n.removeListener("request",A);n.req&&n.req.removeListener("finish",r);n.removeListener("end",m);n.removeListener("close",m);n.removeListener("finish",r);n.removeListener("end",v);n.removeListener("error",y);n.removeListener("close",z)}},zJ=$g.Buffer,yQ=Jg.inspect,Vga=yQ&&yQ.custom||"inspect",P8=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");
!0;this.tail=this.head=null;this.length=0}var b;return b=[{key:"push",value:function(c){c={data:c,next:null};0<this.length?this.tail.next=c:this.head=c;this.tail=c;++this.length}},{key:"unshift",value:function(c){c={data:c,next:this.head};0===this.length&&(this.tail=c);this.head=c;++this.length}},{key:"shift",value:function(){if(0!==this.length){var c=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,c}}},{key:"clear",value:function(){this.head=
this.tail=null;this.length=0}},{key:"join",value:function(c){if(0===this.length)return"";for(var l=this.head,a=""+l.data;l=l.next;)a+=c+l.data;return a}},{key:"concat",value:function(c){if(0===this.length)return zJ.alloc(0);for(var l,a,f=zJ.allocUnsafe(c>>>0),m=this.head,q=0;m;)c=m.data,l=f,a=q,void zJ.prototype.copy.call(c,l,a),q+=m.data.length,m=m.next;return f}},{key:"consume",value:function(c,l){var a;return c<this.head.data.length?(a=this.head.data.slice(0,c),this.head.data=this.head.data.slice(c)):
a=c===this.head.data.length?this.shift():l?this._getString(c):this._getBuffer(c),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(c){var l=this.head,a=1,f=l.data;for(c-=f.length;l=l.next;){var m=l.data,q=c>m.length?m.length:c;if(q===m.length?f+=m:f+=m.slice(0,c),0==(c-=q)){q===m.length?(++a,l.next?this.head=l.next:this.head=this.tail=null):(this.head=l,l.data=m.slice(q));break}++a}return this.length-=a,f}},{key:"_getBuffer",value:function(c){var l=zJ.allocUnsafe(c),
a=this.head,f=1;a.data.copy(l);for(c-=a.data.length;a=a.next;){var m=a.data,q=c>m.length?m.length:c;if(m.copy(l,l.length-c,0,q),0==(c-=q)){q===m.length?(++f,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=m.slice(q));break}++f}return this.length-=f,l}},{key:Vga,value:function(c,l){return yQ(this,function(a){for(var f=1;f<arguments.length;f++){var m=null!=arguments[f]?arguments[f]:{};f%2?iW(Object(m),!0).forEach(function(q){var r=m[q];q in a?Object.defineProperty(a,q,{value:r,
enumerable:!0,configurable:!0,writable:!0}):a[q]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(m)):iW(Object(m)).forEach(function(q){Object.defineProperty(a,q,Object.getOwnPropertyDescriptor(m,q))})}return a}({},l,{depth:0,customInspect:!1}))}}],K8(n.prototype,b),n}(),cz=Nh,mW={destroy:function(n,b){var c=this,l=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||l?(b?b(n):n&&(this._writableState?
this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,cz.nextTick(zM,this,n)):cz.nextTick(zM,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(a){!b&&a?c._writableState?c._writableState.errorEmitted?cz.nextTick(LG,c):(c._writableState.errorEmitted=!0,cz.nextTick(jW,c,a)):cz.nextTick(jW,c,a):b?(cz.nextTick(LG,c),b(a)):cz.nextTick(LG,c)}),this)},undestroy:function(){this._readableState&&
(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(n,b){var c=n._readableState,l=n._writableState;c&&c.autoDestroy||l&&l.autoDestroy?n.destroy(b):
n.emit("error",b)}},Wga=Ar.codes.ERR_INVALID_OPT_VALUE,zQ,nW={getHighWaterMark:function(n,b,c,l){b=null!=b.highWaterMark?b.highWaterMark:l?b[c]:null;if(null!=b){if(!isFinite(b)||Math.floor(b)!==b||0>b)throw new Wga(l?c:"highWaterMark",b);return Math.floor(b)}return n.objectMode?16:16384}},kW=Nh,Xga=EM,ow=Symbol("lastResolve"),sy=Symbol("lastReject"),qE=Symbol("error"),AJ=Symbol("ended"),ry=Symbol("lastPromise"),AQ=Symbol("handlePromise"),qy=Symbol("stream"),Yga=Object.getPrototypeOf(function(){}),
Zga=Object.setPrototypeOf((mw(zQ={get stream(){return this[qy]},next:function(){var n=this,b=this[qE];if(null!==b)return Promise.reject(b);if(this[AJ])return Promise.resolve(nw(void 0,!0));if(this[qy].destroyed)return new Promise(function(c,l){kW.nextTick(function(){n[qE]?l(n[qE]):c(nw(void 0,!0))})});if(b=this[ry])b=new Promise(function(c,l){return function(a,f){c.then(function(){if(l[AJ])return a(nw(void 0,!0)),void 0;l[AQ](a,f)},f)}}(b,this));else{b=this[qy].read();if(null!==b)return Promise.resolve(nw(b,
!1));b=new Promise(this[AQ])}return this[ry]=b,b}},Symbol.asyncIterator,function(){return this}),mw(zQ,"return",function(){var n=this;return new Promise(function(b,c){n[qy].destroy(null,function(l){if(l)return c(l),void 0;b(nw(void 0,!0))})})}),zQ),Yga),Q8=function(n){var b,c=Object.create(Zga,(mw(b={},qy,{value:n,writable:!0}),mw(b,ow,{value:null,writable:!0}),mw(b,sy,{value:null,writable:!0}),mw(b,qE,{value:null,writable:!0}),mw(b,AJ,{value:n._readableState.endEmitted,writable:!0}),mw(b,AQ,{value:function(l,
a){var f=c[qy].read();f?(c[ry]=null,c[ow]=null,c[sy]=null,l(nw(f,!1))):(c[ow]=l,c[sy]=a)},writable:!0}),b));return c[ry]=null,Xga(n,function(l){if(l&&"ERR_STREAM_PREMATURE_CLOSE"!==l.code){var a=c[sy];return null!==a&&(c[ry]=null,c[ow]=null,c[sy]=null,a(l)),c[qE]=l,void 0}l=c[ow];null!==l&&(c[ry]=null,c[ow]=null,c[sy]=null,l(nw(void 0,!0)));c[AJ]=!0}),n.on("readable",M8.bind(null,c)),c},AM={},lW=!1,O8="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,BM={},pW=!1,R8="undefined"!=
typeof globalThis?globalThis:"undefined"!=typeof self?self:global,CM={},qW=!1,$ga=oW(),D2=SC(),BJ=Ar.codes,aha=BJ.ERR_METHOD_NOT_IMPLEMENTED,T8=BJ.ERR_MULTIPLE_CALLBACK,W8=BJ.ERR_TRANSFORM_ALREADY_TRANSFORMING,V8=BJ.ERR_TRANSFORM_WITH_LENGTH_0,NG=D2;jh(at,NG);at.prototype.push=function(n,b){return this._transformState.needTransform=!1,NG.prototype.push.call(this,n,b)};at.prototype._transform=function(n,b,c){c(new aha("_transform()"))};at.prototype._write=function(n,b,c){var l=this._transformState;
(l.writecb=c,l.writechunk=n,l.writeencoding=b,l.transforming)||(n=this._readableState,(l.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark))};at.prototype._read=function(n){n=this._transformState;null===n.writechunk||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};at.prototype._destroy=function(n,b){NG.prototype._destroy.call(this,n,function(c){b(c)})};var sW=at;jh(TC,sW);TC.prototype._transform=
function(n,b,c){c(null,n)};var DM,E2=Ar.codes,bha=E2.ERR_MISSING_ARGS,Y8=E2.ERR_STREAM_DESTROYED,GM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,FM=$s.EventEmitter;jh(Zp,FM);Zp.Readable=Uga;Zp.Writable=$ga;Zp.Duplex=D2;Zp.Transform=at;Zp.PassThrough=TC;Zp.finished=EM;Zp.pipeline=function(){for(var n=arguments.length,b=Array(n),c=0;c<n;c++)b[c]=arguments[c];var l,a=b.length?"function"!=typeof b[b.length-1]?tW:b.pop():tW;if(Array.isArray(b[0])&&(b=b[0]),2>b.length)throw new bha("streams");
var f=b.map(function(m,q){var r=q<b.length-1;return X8(m,r,0<q,function(u){l||(l=u);u&&f.forEach(uW);r||(f.forEach(uW),a(l))})});return b.reduce(Z8)};Zp.Stream=Zp;Zp.prototype.pipe=function(n,b){function c(v){n.writable&&!1===n.write(v)&&r.pause&&r.pause()}function l(){r.readable&&r.resume&&r.resume()}function a(){u||(u=!0,n.end())}function f(){u||(u=!0,"function"==typeof n.destroy&&n.destroy())}function m(v){if(q(),0===FM.listenerCount(this||GM,"error"))throw v;}function q(){r.removeListener("data",
c);n.removeListener("drain",l);r.removeListener("end",a);r.removeListener("close",f);r.removeListener("error",m);n.removeListener("error",m);r.removeListener("end",q);r.removeListener("close",q);n.removeListener("close",q)}var r=this||GM;r.on("data",c);n.on("drain",l);n._isStdio||b&&!1===b.end||(r.on("end",a),r.on("close",f));var u=!1;return r.on("error",m),n.on("error",m),r.on("end",q),r.on("close",q),n.on("close",q),n.emit("pipe",r),n};var Fy=Zp,CJ="undefined"!=typeof globalThis?globalThis:"undefined"!=
typeof self?self:global,yy={},yB=function(n){if(Object.keys)return Object.keys(n);var b=[],c;for(c in n)b.push(c);return b},dz=function(n,b){if(n.forEach)return n.forEach(b);for(var c=0;c<n.length;c++)b(n[c],c,n)},cha=function(){try{return Object.defineProperty({},"_",{}),function(n,b,c){Object.defineProperty(n,b,{writable:!0,enumerable:!1,configurable:!0,value:c})}}catch(n){return function(b,c,l){b[c]=l}}}(),F2="Array Boolean Date Error EvalError Function Infinity JSON Math NaN Number Object RangeError ReferenceError RegExp String SyntaxError TypeError URIError decodeURI decodeURIComponent encodeURI encodeURIComponent escape eval isFinite isNaN parseFloat parseInt undefined unescape".split(" ");
OG.prototype={};var Ct=yy.Script=function(n){if(!((this||CJ)instanceof Ct))return new Ct(n);(this||CJ).code=n};Ct.prototype.runInContext=function(n){if(!(n instanceof OG))throw new TypeError("needs a 'context' argument.");var b=document.createElement("iframe");b.style||(b.style={});b.style.display="none";document.body.appendChild(b);var c=b.contentWindow,l=c.eval,a=c.execScript;!l&&a&&(a.call(c,"null"),l=c.eval);dz(yB(n),function(m){c[m]=n[m]});dz(F2,function(m){n[m]&&(c[m]=n[m])});var f=yB(c);l=
l.call(c,(this||CJ).code);return dz(yB(c),function(m){var q;if(!(q=m in n)){a:if(f.indexOf)q=f.indexOf(m);else{for(q=0;q<f.length;q++)if(f[q]===m)break a;q=-1}q=-1===q}q&&(n[m]=c[m])}),dz(F2,function(m){m in n||cha(n,m,c[m])}),document.body.removeChild(b),l};Ct.prototype.runInThisContext=function(){return eval((this||CJ).code)};Ct.prototype.runInNewContext=function(n){var b=Ct.createContext(n),c=this.runInContext(b);return n&&dz(yB(b),function(l){n[l]=b[l]}),c};dz(yB(Ct.prototype),function(n){yy[n]=
Ct[n]=function(b){var c=Ct(b);return c[n].apply(c,[].slice.call(arguments,1))}});yy.isContext=function(n){return n instanceof OG};yy.createScript=function(n){return yy.Script(n)};yy.createContext=Ct.createContext=function(n){var b=new OG;return"object"==typeof n&&dz(yB(n),function(c){b[c]=n[c]}),b};var G2="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,dha=Nh,eha=Yh.Buffer,DJ=G2.crypto||G2.msCrypto,Xw=DJ&&DJ.getRandomValues?function(n,b){if(4294967295<n)throw new RangeError("requested too many random bytes");
var c=eha.allocUnsafe(n);if(0<n)if(65536<n)for(var l=0;l<n;l+=65536)DJ.getRandomValues(c.slice(l,l+65536));else DJ.getRandomValues(c);return"function"==typeof b?dha.nextTick(function(){b(null,c)}):c}:function(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11");},PG=Yh.Buffer,vW=Fy.Transform;jh(Ku,vW);Ku.prototype._transform=function(n,b,c){var l=null;try{this.update(n,b)}catch(a){l=a}c(l)};Ku.prototype._flush=function(n){var b=
null;try{this.push(this.digest())}catch(c){b=c}n(b)};Ku.prototype.update=function(n,b){var c=n;if(!PG.isBuffer(c)&&"string"!=typeof c)throw new TypeError("Data must be a string or a buffer");if(!0,this._finalized)throw Error("Digest already called");PG.isBuffer(n)||(n=PG.from(n,b));b=this._block;for(c=0;this._blockOffset+n.length-c>=this._blockSize;){for(var l=this._blockOffset;l<this._blockSize;)b[l++]=n[c++];this._update();this._blockOffset=0}for(;c<n.length;)b[this._blockOffset++]=n[c++];b=0;for(n=
8*n.length;0<n;++b)this._length[b]+=n,0<(n=this._length[b]/4294967296|0)&&(this._length[b]-=4294967296*n);return this};Ku.prototype._update=function(){throw Error("_update is not implemented");};Ku.prototype.digest=function(n){if(this._finalized)throw Error("Digest already called");this._finalized=!0;var b=this._digest();void 0!==n&&(b=b.toString(n));this._block.fill(0);for(n=this._blockOffset=0;4>n;++n)this._length[n]=0;return b};Ku.prototype._digest=function(){throw Error("_digest is not implemented");
};var wW=Ku,fha=Yh.Buffer,of=Array(16);jh(tA,wW);tA.prototype._update=function(){for(var n=0;16>n;++n)of[n]=this._block.readInt32LE(4*n);n=this._a;var b=this._b,c=this._c,l=this._d;n=Ym(n,b,c,l,of[0],3614090360,7);l=Ym(l,n,b,c,of[1],3905402710,12);c=Ym(c,l,n,b,of[2],606105819,17);b=Ym(b,c,l,n,of[3],3250441966,22);n=Ym(n,b,c,l,of[4],4118548399,7);l=Ym(l,n,b,c,of[5],1200080426,12);c=Ym(c,l,n,b,of[6],2821735955,17);b=Ym(b,c,l,n,of[7],4249261313,22);n=Ym(n,b,c,l,of[8],1770035416,7);l=Ym(l,n,b,c,of[9],
2336552879,12);c=Ym(c,l,n,b,of[10],4294925233,17);b=Ym(b,c,l,n,of[11],2304563134,22);n=Ym(n,b,c,l,of[12],1804603682,7);l=Ym(l,n,b,c,of[13],4254626195,12);c=Ym(c,l,n,b,of[14],2792965006,17);n=Zm(n,b=Ym(b,c,l,n,of[15],1236535329,22),c,l,of[1],4129170786,5);l=Zm(l,n,b,c,of[6],3225465664,9);c=Zm(c,l,n,b,of[11],643717713,14);b=Zm(b,c,l,n,of[0],3921069994,20);n=Zm(n,b,c,l,of[5],3593408605,5);l=Zm(l,n,b,c,of[10],38016083,9);c=Zm(c,l,n,b,of[15],3634488961,14);b=Zm(b,c,l,n,of[4],3889429448,20);n=Zm(n,b,c,
l,of[9],568446438,5);l=Zm(l,n,b,c,of[14],3275163606,9);c=Zm(c,l,n,b,of[3],4107603335,14);b=Zm(b,c,l,n,of[8],1163531501,20);n=Zm(n,b,c,l,of[13],2850285829,5);l=Zm(l,n,b,c,of[2],4243563512,9);c=Zm(c,l,n,b,of[7],1735328473,14);n=$m(n,b=Zm(b,c,l,n,of[12],2368359562,20),c,l,of[5],4294588738,4);l=$m(l,n,b,c,of[8],2272392833,11);c=$m(c,l,n,b,of[11],1839030562,16);b=$m(b,c,l,n,of[14],4259657740,23);n=$m(n,b,c,l,of[1],2763975236,4);l=$m(l,n,b,c,of[4],1272893353,11);c=$m(c,l,n,b,of[7],4139469664,16);b=$m(b,
c,l,n,of[10],3200236656,23);n=$m(n,b,c,l,of[13],681279174,4);l=$m(l,n,b,c,of[0],3936430074,11);c=$m(c,l,n,b,of[3],3572445317,16);b=$m(b,c,l,n,of[6],76029189,23);n=$m(n,b,c,l,of[9],3654602809,4);l=$m(l,n,b,c,of[12],3873151461,11);c=$m(c,l,n,b,of[15],530742520,16);n=an(n,b=$m(b,c,l,n,of[2],3299628645,23),c,l,of[0],4096336452,6);l=an(l,n,b,c,of[7],1126891415,10);c=an(c,l,n,b,of[14],2878612391,15);b=an(b,c,l,n,of[5],4237533241,21);n=an(n,b,c,l,of[12],1700485571,6);l=an(l,n,b,c,of[3],2399980690,10);c=
an(c,l,n,b,of[10],4293915773,15);b=an(b,c,l,n,of[1],2240044497,21);n=an(n,b,c,l,of[8],1873313359,6);l=an(l,n,b,c,of[15],4264355552,10);c=an(c,l,n,b,of[6],2734768916,15);b=an(b,c,l,n,of[13],1309151649,21);n=an(n,b,c,l,of[4],4149444226,6);l=an(l,n,b,c,of[11],3174756917,10);c=an(c,l,n,b,of[2],718787259,15);b=an(b,c,l,n,of[9],3951481745,21);this._a=this._a+n|0;this._b=this._b+b|0;this._c=this._c+c|0;this._d=this._d+l|0};tA.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&
(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=fha.allocUnsafe(16);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n};var BQ=$g.Buffer,xW=Ku,Xr=Array(16),rE=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,
2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],sE=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],tE=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],uE=[8,
9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],vE=[0,1518500249,1859775393,2400959708,2840853838],wE=[1352829926,1548603684,1836072691,2053994217,0];jh(uA,xW);uA.prototype._update=function(){for(var n=0;16>n;++n)Xr[n]=this._block.readInt32LE(4*n);var b=0|this._a;n=0|this._b;for(var c=0|this._c,l=0|this._d,a=0|this._e,f=0|this._a,m=0|this._b,q=0|this._c,
r=0|this._d,u=0|this._e,v=0;80>v;v+=1){if(16>v){var y=a;y=$p(b+(n^c^l)+Xr[rE[v]]+vE[0]|0,tE[v])+y|0;b=u;var z=$p(f+(m^(q|~r))+Xr[sE[v]]+wE[0]|0,uE[v])+b|0}else 32>v?(y=a,y=$p(b+(n&c|~n&l)+Xr[rE[v]]+vE[1]|0,tE[v])+y|0,b=u,z=$p(f+(m&r|q&~r)+Xr[sE[v]]+wE[1]|0,uE[v])+b|0):48>v?(y=a,y=$p(b+((n|~c)^l)+Xr[rE[v]]+vE[2]|0,tE[v])+y|0,b=u,z=$p(f+((m|~q)^r)+Xr[sE[v]]+wE[2]|0,uE[v])+b|0):64>v?(y=a,y=$p(b+(n&l|c&~l)+Xr[rE[v]]+vE[3]|0,tE[v])+y|0,b=u,z=$p(f+(m&q|~m&r)+Xr[sE[v]]+wE[3]|0,uE[v])+b|0):(y=a,y=$p(b+(n^
(c|~l))+Xr[rE[v]]+vE[4]|0,tE[v])+y|0,b=u,z=$p(f+(m^q^r)+Xr[sE[v]]+wE[4]|0,uE[v])+b|0);b=a;a=l;l=$p(c,10);c=n;n=y;f=u;u=r;r=$p(q,10);q=m;m=z}c=this._b+c+r|0;this._b=this._c+l+u|0;this._c=this._d+a+f|0;this._d=this._e+b+m|0;this._e=this._a+n+q|0;this._a=c};uA.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],
56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=BQ.alloc?BQ.alloc(20):new BQ(20);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n.writeInt32LE(this._e,16),n};var Ej="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,yW=Yh.Buffer;Lu.prototype.update=function(n,b){"string"==typeof n&&(b=b||"utf8",n=yW.from(n,b));b=(this||Ej)._block;for(var c=(this||Ej)._blockSize,l=n.length,a=(this||Ej)._len,
f=0;f<l;){for(var m=a%c,q=Math.min(l-f,c-m),r=0;r<q;r++)b[m+r]=n[f+r];f+=q;0==(a+=q)%c&&this._update(b)}return(this||Ej)._len+=l,this||Ej};Lu.prototype.digest=function(n){var b=(this||Ej)._len%(this||Ej)._blockSize;(this||Ej)._block[b]=128;(this||Ej)._block.fill(0,b+1);b>=(this||Ej)._finalSize&&(this._update((this||Ej)._block),(this||Ej)._block.fill(0));b=8*(this||Ej)._len;if(4294967295>=b)(this||Ej)._block.writeUInt32BE(b,(this||Ej)._blockSize-4);else{var c=(4294967295&b)>>>0;(this||Ej)._block.writeUInt32BE((b-
c)/4294967296,(this||Ej)._blockSize-8);(this||Ej)._block.writeUInt32BE(c,(this||Ej)._blockSize-4)}this._update((this||Ej)._block);b=this._hash();return n?b.toString(n):b};Lu.prototype._update=function(){throw Error("_update must be implemented by subclass");};var ah="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,zW=Lu,gha=Yh.Buffer,hha=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,
2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,
2428436474,2756734187,3204031479,3329325298],$8=Array(64);jh(vA,zW);vA.prototype.init=function(){return(this||ah)._a=1779033703,(this||ah)._b=3144134277,(this||ah)._c=1013904242,(this||ah)._d=2773480762,(this||ah)._e=1359893119,(this||ah)._f=2600822924,(this||ah)._g=528734635,(this||ah)._h=1541459225,this||ah};vA.prototype._update=function(n){for(var b,c=(this||ah)._w,l=0|(this||ah)._a,a=0|(this||ah)._b,f=0|(this||ah)._c,m=0|(this||ah)._d,q=0|(this||ah)._e,r=0|(this||ah)._f,u=0|(this||ah)._g,v=0|
(this||ah)._h,y=0;16>y;++y)c[y]=n.readInt32BE(4*y);for(;64>y;++y){n=y;var z=(((b=c[y-2])>>>17|b<<15)^(b>>>19|b<<13)^b>>>10)+c[y-7],A=c[y-15];c[n]=0|z+((A>>>7|A<<25)^(A>>>18|A<<14)^A>>>3)+c[y-16]}for(b=0;64>b;++b)y=v+((q>>>6|q<<26)^(q>>>11|q<<21)^(q>>>25|q<<7))+(u^q&(r^u))+hha[b]+c[b]|0,n=((l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10))+(l&a|f&(l|a))|0,v=u,u=r,r=q,q=m+y|0,m=f,f=a,a=l,l=y+n|0;(this||ah)._a=l+(this||ah)._a|0;(this||ah)._b=a+(this||ah)._b|0;(this||ah)._c=f+(this||ah)._c|0;(this||ah)._d=
m+(this||ah)._d|0;(this||ah)._e=q+(this||ah)._e|0;(this||ah)._f=r+(this||ah)._f|0;(this||ah)._g=u+(this||ah)._g|0;(this||ah)._h=v+(this||ah)._h|0};vA.prototype._hash=function(){var n=gha.allocUnsafe(32);return n.writeInt32BE((this||ah)._a,0),n.writeInt32BE((this||ah)._b,4),n.writeInt32BE((this||ah)._c,8),n.writeInt32BE((this||ah)._d,12),n.writeInt32BE((this||ah)._e,16),n.writeInt32BE((this||ah)._f,20),n.writeInt32BE((this||ah)._g,24),n.writeInt32BE((this||ah)._h,28),n};var Yi="undefined"!=typeof globalThis?
globalThis:"undefined"!=typeof self?self:global,AW=Lu,iha=Yh.Buffer,jha=[1518500249,1859775393,-1894007588,-899497514],a9=Array(80);jh(UC,AW);UC.prototype.init=function(){return(this||Yi)._a=1732584193,(this||Yi)._b=4023233417,(this||Yi)._c=2562383102,(this||Yi)._d=271733878,(this||Yi)._e=3285377520,this||Yi};UC.prototype._update=function(n){for(var b,c=(this||Yi)._w,l=0|(this||Yi)._a,a=0|(this||Yi)._b,f=0|(this||Yi)._c,m=0|(this||Yi)._d,q=0|(this||Yi)._e,r=0;16>r;++r)c[r]=n.readInt32BE(4*r);for(;80>
r;++r)c[r]=c[r-3]^c[r-8]^c[r-14]^c[r-16];for(n=0;80>n;++n)r=~~(n/20),r=0|((b=l)<<5|b>>>27)+(0===r?a&f|~a&m:2===r?a&f|a&m|f&m:a^f^m)+q+c[n]+jha[r],q=m,m=f,f=a<<30|a>>>2,a=l,l=r;(this||Yi)._a=l+(this||Yi)._a|0;(this||Yi)._b=a+(this||Yi)._b|0;(this||Yi)._c=f+(this||Yi)._c|0;(this||Yi)._d=m+(this||Yi)._d|0;(this||Yi)._e=q+(this||Yi)._e|0};UC.prototype._hash=function(){var n=iha.allocUnsafe(20);return n.writeInt32BE(0|(this||Yi)._a,0),n.writeInt32BE(0|(this||Yi)._b,4),n.writeInt32BE(0|(this||Yi)._c,8),
n.writeInt32BE(0|(this||Yi)._d,12),n.writeInt32BE(0|(this||Yi)._e,16),n};var Zi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,BW=Lu,kha=Yh.Buffer,lha=[1518500249,1859775393,-1894007588,-899497514],b9=Array(80);jh(VC,BW);VC.prototype.init=function(){return(this||Zi)._a=1732584193,(this||Zi)._b=4023233417,(this||Zi)._c=2562383102,(this||Zi)._d=271733878,(this||Zi)._e=3285377520,this||Zi};VC.prototype._update=function(n){for(var b,c=(this||Zi)._w,l=0|(this||Zi)._a,a=
0|(this||Zi)._b,f=0|(this||Zi)._c,m=0|(this||Zi)._d,q=0|(this||Zi)._e,r=0;16>r;++r)c[r]=n.readInt32BE(4*r);for(;80>r;++r)c[r]=(b=c[r-3]^c[r-8]^c[r-14]^c[r-16])<<1|b>>>31;for(n=0;80>n;++n)b=~~(n/20),b=(l<<5|l>>>27)+(0===b?a&f|~a&m:2===b?a&f|a&m|f&m:a^f^m)+q+c[n]+lha[b]|0,q=m,m=f,f=a<<30|a>>>2,a=l,l=b;(this||Zi)._a=l+(this||Zi)._a|0;(this||Zi)._b=a+(this||Zi)._b|0;(this||Zi)._c=f+(this||Zi)._c|0;(this||Zi)._d=m+(this||Zi)._d|0;(this||Zi)._e=q+(this||Zi)._e|0};VC.prototype._hash=function(){var n=kha.allocUnsafe(20);
return n.writeInt32BE(0|(this||Zi)._a,0),n.writeInt32BE(0|(this||Zi)._b,4),n.writeInt32BE(0|(this||Zi)._c,8),n.writeInt32BE(0|(this||Zi)._d,12),n.writeInt32BE(0|(this||Zi)._e,16),n};var Rl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,d9=Lu,mha=Yh.Buffer,c9=Array(64);jh(RG,vA);RG.prototype.init=function(){return(this||Rl)._a=3238371032,(this||Rl)._b=914150663,(this||Rl)._c=812702999,(this||Rl)._d=4144912697,(this||Rl)._e=4290775857,(this||Rl)._f=1750603025,(this||
Rl)._g=1694076839,(this||Rl)._h=3204075428,this||Rl};RG.prototype._hash=function(){var n=mha.allocUnsafe(28);return n.writeInt32BE((this||Rl)._a,0),n.writeInt32BE((this||Rl)._b,4),n.writeInt32BE((this||Rl)._c,8),n.writeInt32BE((this||Rl)._d,12),n.writeInt32BE((this||Rl)._e,16),n.writeInt32BE((this||Rl)._f,20),n.writeInt32BE((this||Rl)._g,24),n};var oe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,CW=Lu,nha=Yh.Buffer,H2=[1116352408,3609767458,1899447441,602891725,3049323471,
3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,
2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,
1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,
852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],e9=Array(160);jh(wA,CW);wA.prototype.init=function(){return(this||oe)._ah=1779033703,(this||oe)._bh=3144134277,(this||oe)._ch=1013904242,(this||oe)._dh=2773480762,(this||oe)._eh=1359893119,(this||oe)._fh=2600822924,(this||oe)._gh=528734635,(this||oe)._hh=1541459225,(this||oe)._al=4089235720,(this||oe)._bl=2227873595,(this||oe)._cl=4271175723,(this||
oe)._dl=1595750129,(this||oe)._el=2917565137,(this||oe)._fl=725511199,(this||oe)._gl=4215389547,(this||oe)._hl=327033209,this||oe};wA.prototype._update=function(n){for(var b=(this||oe)._w,c=0|(this||oe)._ah,l=0|(this||oe)._bh,a=0|(this||oe)._ch,f=0|(this||oe)._dh,m=0|(this||oe)._eh,q=0|(this||oe)._fh,r=0|(this||oe)._gh,u=0|(this||oe)._hh,v=0|(this||oe)._al,y=0|(this||oe)._bl,z=0|(this||oe)._cl,A=0|(this||oe)._dl,C=0|(this||oe)._el,G=0|(this||oe)._fl,F=0|(this||oe)._gl,N=0|(this||oe)._hl,L=0;32>L;L+=
2)b[L]=n.readInt32BE(4*L),b[L+1]=n.readInt32BE(4*L+4);for(;160>L;L+=2){n=b[L-30];var W=b[L-30+1],la=(n>>>1|W<<31)^(n>>>8|W<<24)^n>>>7,wa=(W>>>1|n<<31)^(W>>>8|n<<24)^(W>>>7|n<<25);var D=n=b[L-4];var Q=W=b[L-4+1];D=(D>>>19|Q<<13)^(Q>>>29|D<<3)^D>>>6;W=(W>>>19|n<<13)^(n>>>29|W<<3)^(W>>>6|n<<26);Q=b[L-32];var J=b[L-32+1];n=wa+b[L-14+1]|0;la=la+b[L-14]+Sl(n,wa)|0;la=(la=la+D+Sl(n=n+W|0,W)|0)+Q+Sl(n=n+J|0,J)|0;b[L]=la;b[L+1]=n}for(L=0;160>L;L+=2){la=b[L];n=b[L+1];W=c&l|a&(c|l);var O=v&y|z&(v|y);Q=(c>>>
28|v<<4)^(v>>>2|c<<30)^(v>>>7|c<<25);J=(v>>>28|c<<4)^(c>>>2|v<<30)^(c>>>7|v<<25);var ja=H2[L],X=H2[L+1],ha=r^m&(q^r),bb=F^C&(G^F);wa=N+((C>>>14|m<<18)^(C>>>18|m<<14)^(m>>>9|C<<23))|0;D=u+((m>>>14|C<<18)^(m>>>18|C<<14)^(C>>>9|m<<23))+Sl(wa,N)|0;D=(D=(D=D+ha+Sl(wa=wa+bb|0,bb)|0)+ja+Sl(wa=wa+X|0,X)|0)+la+Sl(wa=wa+n|0,n)|0;n=J+O|0;la=Q+W+Sl(n,J)|0;u=r;N=F;r=q;F=G;q=m;G=C;m=f+D+Sl(C=A+wa|0,A)|0;f=a;A=z;a=l;z=y;l=c;y=v;c=D+la+Sl(v=wa+n|0,wa)|0}(this||oe)._al=(this||oe)._al+v|0;(this||oe)._bl=(this||oe)._bl+
y|0;(this||oe)._cl=(this||oe)._cl+z|0;(this||oe)._dl=(this||oe)._dl+A|0;(this||oe)._el=(this||oe)._el+C|0;(this||oe)._fl=(this||oe)._fl+G|0;(this||oe)._gl=(this||oe)._gl+F|0;(this||oe)._hl=(this||oe)._hl+N|0;(this||oe)._ah=(this||oe)._ah+c+Sl((this||oe)._al,v)|0;(this||oe)._bh=(this||oe)._bh+l+Sl((this||oe)._bl,y)|0;(this||oe)._ch=(this||oe)._ch+a+Sl((this||oe)._cl,z)|0;(this||oe)._dh=(this||oe)._dh+f+Sl((this||oe)._dl,A)|0;(this||oe)._eh=(this||oe)._eh+m+Sl((this||oe)._el,C)|0;(this||oe)._fh=(this||
oe)._fh+q+Sl((this||oe)._fl,G)|0;(this||oe)._gh=(this||oe)._gh+r+Sl((this||oe)._gl,F)|0;(this||oe)._hh=(this||oe)._hh+u+Sl((this||oe)._hl,N)|0};wA.prototype._hash=function(){function n(c,l,a){b.writeInt32BE(c,a);b.writeInt32BE(l,a+4)}var b=nha.allocUnsafe(64);return n((this||oe)._ah,(this||oe)._al,0),n((this||oe)._bh,(this||oe)._bl,8),n((this||oe)._ch,(this||oe)._cl,16),n((this||oe)._dh,(this||oe)._dl,24),n((this||oe)._eh,(this||oe)._el,32),n((this||oe)._fh,(this||oe)._fl,40),n((this||oe)._gh,(this||
oe)._gl,48),n((this||oe)._hh,(this||oe)._hl,56),b};var Ei="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,g9=Lu,oha=Yh.Buffer,f9=Array(160);jh(SG,wA);SG.prototype.init=function(){return(this||Ei)._ah=3418070365,(this||Ei)._bh=1654270250,(this||Ei)._ch=2438529370,(this||Ei)._dh=355462360,(this||Ei)._eh=1731405415,(this||Ei)._fh=2394180231,(this||Ei)._gh=3675008525,(this||Ei)._hh=1203062813,(this||Ei)._al=3238371032,(this||Ei)._bl=914150663,(this||Ei)._cl=812702999,(this||
Ei)._dl=4144912697,(this||Ei)._el=4290775857,(this||Ei)._fl=1750603025,(this||Ei)._gl=1694076839,(this||Ei)._hl=3204075428,this||Ei};SG.prototype._hash=function(){function n(c,l,a){b.writeInt32BE(c,a);b.writeInt32BE(l,a+4)}var b=oha.allocUnsafe(48);return n((this||Ei)._ah,(this||Ei)._al,0),n((this||Ei)._bh,(this||Ei)._bl,8),n((this||Ei)._ch,(this||Ei)._cl,16),n((this||Ei)._dh,(this||Ei)._dl,24),n((this||Ei)._eh,(this||Ei)._el,32),n((this||Ei)._fh,(this||Ei)._fl,40),b};var Yw,I2=Yw={};(Yw=I2=function(n){n=
n.toLowerCase();var b=Yw[n];if(!b)throw Error(n+" is not supported (we accept pull requests)");return new b}).sha=UC;Yw.sha1=VC;Yw.sha224=RG;Yw.sha256=vA;Yw.sha384=SG;Yw.sha512=wA;var CQ=I2,jk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,J2=Yh.Buffer,DW=Fy.Transform,pha=sA.StringDecoder;jh(Tl,DW);Tl.prototype.update=function(n,b,c){"string"==typeof n&&(n=J2.from(n,b));n=this._update(n);return(this||jk).hashMode?this||jk:(c&&(n=this._toString(n,c)),n)};Tl.prototype.setAutoPadding=
function(){};Tl.prototype.getAuthTag=function(){throw Error("trying to get auth tag in unsupported state");};Tl.prototype.setAuthTag=function(){throw Error("trying to set auth tag in unsupported state");};Tl.prototype.setAAD=function(){throw Error("trying to set aad in unsupported state");};Tl.prototype._transform=function(n,b,c){try{(this||jk).hashMode?this._update(n):this.push(this._update(n))}catch(a){var l=a}finally{c(l)}};Tl.prototype._flush=function(n){try{this.push(this.__final())}catch(c){var b=
c}n(b)};Tl.prototype._finalOrDigest=function(n){var b=this.__final()||J2.alloc(0);return n&&(b=this._toString(b,n,!0)),b};Tl.prototype._toString=function(n,b,c){if((this||jk)._decoder||((this||jk)._decoder=new pha(b),(this||jk)._encoding=b),(this||jk)._encoding!==b)throw Error("can't switch encodings");n=(this||jk)._decoder.write(n);return c&&(n+=(this||jk)._decoder.end()),n};var EW=Tl;jh(TG,EW);TG.prototype._update=function(n){this._hash.update(n)};TG.prototype._final=function(){return this._hash.digest()};
var xE=function(n){return"md5"===(n=n.toLowerCase())?new tA:"rmd160"===n||"ripemd160"===n?new uA:new TG(CQ(n))},K2=function(n){return(new tA).update(n).digest()},qha=jh,ty=Yh.Buffer,FW=Tl,h9=ty.alloc(128);qha(UG,FW);UG.prototype._update=function(n){this._hash.push(n)};UG.prototype._final=function(){var n=this._alg(ty.concat(this._hash));return this._alg(ty.concat([this._opad,n]))};var rha=jh,GW=Tl,XC=Yh.Buffer,HM=uA,IM=CQ,i9=XC.alloc(128);rha(WC,GW);WC.prototype._update=function(n){this._hash.update(n)};
WC.prototype._final=function(){var n=this._hash.digest();return("rmd160"===this._alg?new HM:IM(this._alg)).update(this._opad).update(n).digest()};var L2=function(n,b){return"rmd160"===(n=n.toLowerCase())||"ripemd160"===n?new WC("rmd160",b):"md5"===n?new UG(K2,b):new WC(n,b)},M2={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",
hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},
"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},
"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",
hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}},j9=$g.Buffer,sha=Math.pow(2,30)-1,DQ,N2=function(n,b,c,l){if(HW(n,"Password"),HW(b,"Salt"),"number"!=typeof c)throw new TypeError("Iterations not a number");if(0>c)throw new TypeError("Bad iterations");if("number"!=typeof l)throw new TypeError("Key length not a number");if(0>l||l>sha||l!=l)throw new TypeError("Bad key length");},O2=Nh;O2.browser?DQ="utf-8":DQ=6<=parseInt(O2.version.split(".")[0].slice(1),
10)?"utf-8":"binary";var EJ=DQ,Cr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,m9=K2,l9=uA,k9=CQ,Br=Yh.Buffer,n9=Br.alloc(128),VG={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};IW.prototype.run=function(n,b){return n.copy(b,(this||Cr).blocksize),this.hash(b).copy((this||Cr).opad,(this||Cr).blocksize),this.hash((this||Cr).opad)};var EQ,FQ=function(n,b,c,l,a){N2(n,b,c,l);Br.isBuffer(n)||(n=Br.from(n,EJ));Br.isBuffer(b)||(b=Br.from(b,
EJ));n=new IW(a=a||"sha1",n,b.length);var f=Br.allocUnsafe(l),m=Br.allocUnsafe(b.length+4);b.copy(m,0,0,b.length);var q=0;a=VG[a];l=Math.ceil(l/a);for(var r=1;r<=l;r++){m.writeUInt32BE(r,b.length);for(var u=n.run(m,n.ipad1),v=u,y=1;y<c;y++){v=n.run(v,n.ipad2);for(var z=0;z<a;z++)u[z]^=v[z]}u.copy(f,q);q+=a}return f},yE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,GQ=Nh,xA=Yh.Buffer,YC=yE.crypto&&yE.crypto.subtle,tha={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256",
"sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},HQ=[],FJ={pbkdf2:function(n,b,c,l,a,f){"function"==typeof a&&(f=a,a=void 0);var m=tha[(a=a||"sha1").toLowerCase()];if(!m||"function"!=typeof yE.Promise)return GQ.nextTick(function(){try{var q=FQ(n,b,c,l,a)}catch(r){return f(r)}f(null,q)});if(N2(n,b,c,l),"function"!=typeof f)throw Error("No callback provided to pbkdf2");xA.isBuffer(n)||(n=xA.from(n,EJ));xA.isBuffer(b)||(b=xA.from(b,EJ));(function(q,r){q.then(function(u){GQ.nextTick(function(){r(null,
u)})},function(u){GQ.nextTick(function(){r(u)})})})(function(q){if(yE.process&&!yE.process.browser||!YC||!YC.importKey||!YC.deriveBits)return Promise.resolve(!1);if(void 0!==HQ[q])return HQ[q];var r=JW(EQ=EQ||xA.alloc(8),EQ,10,128,q).then(function(){return!0}).catch(function(){return!1});return HQ[q]=r,r}(m).then(function(q){return q?JW(n,b,c,l,m):FQ(n,b,c,l,a)}),f)}};FJ.pbkdf2Sync=FQ;KW.equal=function(n,b,c){if(n!=b)throw Error(c||"Assertion failed: "+n+" != "+b);};var jq=KW,Qj={readUInt32BE:function(n,
b){return(n[0+b]<<24|n[1+b]<<16|n[2+b]<<8|n[3+b])>>>0},writeUInt32BE:function(n,b,c){n[0+c]=b>>>24;n[1+c]=b>>>16&255;n[2+c]=b>>>8&255;n[3+c]=255&b},ip:function(n,b,c,l){for(var a=0,f=0,m=6;0<=m;m-=2){for(var q=0;24>=q;q+=8)a<<=1,a|=b>>>q+m&1;for(q=0;24>=q;q+=8)a<<=1,a|=n>>>q+m&1}for(m=6;0<=m;m-=2){for(q=1;25>=q;q+=8)f<<=1,f|=b>>>q+m&1;for(q=1;25>=q;q+=8)f<<=1,f|=n>>>q+m&1}c[l+0]=a>>>0;c[l+1]=f>>>0},rip:function(n,b,c,l){for(var a=0,f=0,m=0;4>m;m++)for(var q=24;0<=q;q-=8)a<<=1,a|=b>>>q+m&1,a<<=1,a|=
n>>>q+m&1;for(m=4;8>m;m++)for(q=24;0<=q;q-=8)f<<=1,f|=b>>>q+m&1,f<<=1,f|=n>>>q+m&1;c[l+0]=a>>>0;c[l+1]=f>>>0},pc1:function(n,b,c,l){for(var a=0,f=0,m=7;5<=m;m--){for(var q=0;24>=q;q+=8)a<<=1,a|=b>>q+m&1;for(q=0;24>=q;q+=8)a<<=1,a|=n>>q+m&1}for(q=0;24>=q;q+=8)a<<=1,a|=b>>q+m&1;for(m=1;3>=m;m++){for(q=0;24>=q;q+=8)f<<=1,f|=b>>q+m&1;for(q=0;24>=q;q+=8)f<<=1,f|=n>>q+m&1}for(q=0;24>=q;q+=8)f<<=1,f|=n>>q+m&1;c[l+0]=a>>>0;c[l+1]=f>>>0},r28shl:function(n,b){return n<<b&268435455|n>>>28-b}},GJ=[14,11,17,4,
27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];Qj.pc2=function(n,b,c,l){for(var a=0,f=0,m=GJ.length>>>1,q=0;q<m;q++)a<<=1,a|=n>>>GJ[q]&1;for(q=m;q<GJ.length;q++)f<<=1,f|=b>>>GJ[q]&1;c[l+0]=a>>>0;c[l+1]=f>>>0};Qj.expand=function(n,b,c){var l=0;var a=(1&n)<<5|n>>>27;for(var f=23;15<=f;f-=4)a<<=6,a|=n>>>f&63;for(f=11;3<=f;f-=4)l|=n>>>f&63,l<<=6;b[c+0]=a>>>0;b[c+1]=(l|(31&n)<<1|n>>>31)>>>0};var P2=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,
8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,
6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,
0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];Qj.substitute=function(n,b){for(var c=0,l=0;4>l;l++)c<<=4,c|=P2[64*l+(n>>>18-6*l&63)];for(l=0;4>l;l++)c<<=4,c|=P2[256+64*l+(b>>>18-6*l&63)];return c>>>0};var Q2=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];Qj.permute=function(n){for(var b=0,c=0;c<Q2.length;c++)b<<=1,b|=n>>>Q2[c]&
1;return b>>>0};Qj.padSplit=function(n,b,c){for(n=n.toString(2);n.length<b;)n="0"+n;for(var l=[],a=0;a<b;a+=c)l.push(n.slice(a,a+c));return l.join(" ")};var uha=jq;cp.prototype._init=function(){};cp.prototype.update=function(n){return 0===n.length?[]:"decrypt"===this.type?this._updateDecrypt(n):this._updateEncrypt(n)};cp.prototype._buffer=function(n,b){for(var c=Math.min(this.buffer.length-this.bufferOff,n.length-b),l=0;l<c;l++)this.buffer[this.bufferOff+l]=n[b+l];return this.bufferOff+=c,c};cp.prototype._flushBuffer=
function(n,b){return this._update(this.buffer,0,n,b),this.bufferOff=0,this.blockSize};cp.prototype._updateEncrypt=function(n){var b=0,c=0,l=Array(((this.bufferOff+n.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(b+=this._buffer(n,b),this.bufferOff===this.buffer.length&&(c+=this._flushBuffer(l,c)));for(var a=n.length-(n.length-b)%this.blockSize;b<a;b+=this.blockSize)this._update(n,b,l,c),c+=this.blockSize;for(;b<n.length;b++,this.bufferOff++)this.buffer[this.bufferOff]=n[b];return l};
cp.prototype._updateDecrypt=function(n){for(var b=0,c=0,l=Math.ceil((this.bufferOff+n.length)/this.blockSize)-1,a=Array(l*this.blockSize);0<l;l--)b+=this._buffer(n,b),c+=this._flushBuffer(a,c);return this._buffer(n,b),a};cp.prototype.final=function(n){var b,c;return n&&(b=this.update(n)),c="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),b?b.concat(c):c};cp.prototype._pad=function(n,b){if(0===b)return!1;for(;b<n.length;)n[b++]=0;return!0};cp.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,
this.bufferOff))return[];var n=Array(this.blockSize);return this._update(this.buffer,0,n,0),n};cp.prototype._unpad=function(n){return n};cp.prototype._finalDecrypt=function(){uha.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var n=Array(this.blockSize);return this._flushBuffer(n,0),this._unpad(n)};var R2=jq,LW=cp;jh(aq,LW);aq.create=function(n){return new aq(n)};var vha=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];aq.prototype.deriveKeys=function(n,b){n.keys=Array(32);R2.equal(b.length,this.blockSize,
"Invalid key length");var c=Qj.readUInt32BE(b,0);b=Qj.readUInt32BE(b,4);Qj.pc1(c,b,n.tmp,0);c=n.tmp[0];b=n.tmp[1];for(var l=0;l<n.keys.length;l+=2){var a=vha[l>>>1];c=Qj.r28shl(c,a);b=Qj.r28shl(b,a);Qj.pc2(c,b,n.keys,l)}};aq.prototype._update=function(n,b,c,l){var a=this._desState,f=Qj.readUInt32BE(n,b);n=Qj.readUInt32BE(n,b+4);Qj.ip(f,n,a.tmp,0);f=a.tmp[0];n=a.tmp[1];"encrypt"===this.type?this._encrypt(a,f,n,a.tmp,0):this._decrypt(a,f,n,a.tmp,0);f=a.tmp[0];n=a.tmp[1];Qj.writeUInt32BE(c,f,l);Qj.writeUInt32BE(c,
n,l+4)};aq.prototype._pad=function(n,b){for(var c=n.length-b;b<n.length;b++)n[b]=c;return!0};aq.prototype._unpad=function(n){for(var b=n[n.length-1],c=n.length-b;c<n.length;c++)R2.equal(n[c],b);return n.slice(0,n.length-b)};aq.prototype._encrypt=function(n,b,c,l,a){for(var f=0;f<n.keys.length;f+=2){var m=n.keys[f],q=n.keys[f+1];Qj.expand(c,n.tmp,0);m^=n.tmp[0];q^=n.tmp[1];m=Qj.substitute(m,q);q=c;c=(b^Qj.permute(m))>>>0;b=q}Qj.rip(c,b,l,a)};aq.prototype._decrypt=function(n,b,c,l,a){for(var f=n.keys.length-
2;0<=f;f-=2){var m=n.keys[f],q=n.keys[f+1];Qj.expand(c,n.tmp,0);m^=n.tmp[0];q^=n.tmp[1];m=Qj.substitute(m,q);q=c;c=(b^Qj.permute(m))>>>0;b=q}Qj.rip(c,b,l,a)};var HJ={},q9=jq,wha=jh,IJ={};HJ.instantiate=function(n){function b(f){n.call(this,f);this._cbcInit()}wha(b,n);for(var c=Object.keys(IJ),l=0;l<c.length;l++){var a=c[l];b.prototype[a]=IJ[a]}return b.create=function(f){return new b(f)},b};IJ._cbcInit=function(){this._cbcState=new p9(this.options.iv)};IJ._update=function(n,b,c,l){var a=this.constructor.super_.prototype,
f=this._cbcState.iv;if("encrypt"===this.type){for(var m=0;m<this.blockSize;m++)f[m]^=n[b+m];a._update.call(this,f,0,c,l);for(m=0;m<this.blockSize;m++)f[m]=c[l+m]}else{a._update.call(this,n,b,c,l);for(m=0;m<this.blockSize;m++)c[l+m]^=f[m];for(m=0;m<this.blockSize;m++)f[m]=n[b+m]}};var s9=jq,MW=cp,pw=aq;jh(bt,MW);bt.create=function(n){return new bt(n)};bt.prototype._update=function(n,b,c,l){var a=this._edeState;a.ciphers[0]._update(n,b,c,l);a.ciphers[1]._update(c,l,c,l);a.ciphers[2]._update(c,l,c,l)};
bt.prototype._pad=pw.prototype._pad;bt.prototype._unpad=pw.prototype._unpad;var XG="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,NW=Tl,xha=jh,uy=Yh.Buffer,ZC={"des-ede3-cbc":HJ.instantiate(bt),"des-ede3":bt,"des-ede-cbc":HJ.instantiate(bt),"des-ede":bt,"des-cbc":HJ.instantiate(aq),"des-ecb":aq};ZC.des=ZC["des-cbc"];ZC.des3=ZC["des-ede3-cbc"];xha(WG,NW);WG.prototype._update=function(n){return uy.from((this||XG)._des.update(n))};WG.prototype._final=function(){return uy.from((this||
XG)._des.final())};var yha=$g.Buffer,zB=function(n,b){for(var c=Math.min(n.length,b.length),l=new yha(c),a=0;a<c;++a)l[a]=n[a]^b[a];return l},S2=function(n){for(var b,c=n.length;c--;){if(255!==(b=n.readUInt8(c))){b++;n.writeUInt8(b,c);break}n.writeUInt8(0,c)}},T2={},$C=Yh.Buffer,t9=zB;T2.encrypt=function(n,b,c){for(var l,a=$C.allocUnsafe(0);b.length;){if(0===n._cache.length&&(n._cache=n._cipher.encryptBlock(n._prev),n._prev=$C.allocUnsafe(0)),!(n._cache.length<=b.length)){a=$C.concat([a,OW(n,b,c)]);
break}l=n._cache.length;a=$C.concat([a,OW(n,b.slice(0,l),c)]);b=b.slice(l)}return a};var U2={},IQ=Yh.Buffer;U2.encrypt=function(n,b,c){for(var l=b.length,a=IQ.allocUnsafe(l),f=-1;++f<l;){var m=f;var q=n;var r=b[f],u=c,v=q._cipher.encryptBlock(q._prev)[0]^r;q=(q._prev=IQ.concat([q._prev.slice(1),IQ.from([u?r:v])]),v);a[m]=q}return a};var V2={},JJ=Yh.Buffer;V2.encrypt=function(n,b,c){for(var l=b.length,a=JJ.allocUnsafe(l),f=-1;++f<l;){for(var m=f,q,r,u=n,v=b[f],y=c,z=-1,A=0;8>++z;){r=v&1<<7-z?128:0;
A+=(128&(q=u._cipher.encryptBlock(u._prev)[0]^r))>>z%8;var C=u,G=u._prev;q=y?r:q;r=G.length;var F=-1,N=JJ.allocUnsafe(G.length);for(G=JJ.concat([G,JJ.from([q])]);++F<r;)N[F]=G[F]<<1|G[F+1]>>7;C._prev=N}a[m]=A}return a};var W2={},zha=$g.Buffer;W2.encrypt=function(n,b){for(;n._cache.length<b.length;)n._cache=zha.concat([n._cache,u9(n)]);var c=n._cache.slice(0,b.length);return n._cache=n._cache.slice(b.length),zB(b,c)};var JQ={},X2=Yh.Buffer;JQ.encrypt=function(n,b){var c=Math.ceil(b.length/16),l=n._cache.length;
n._cache=X2.concat([n._cache,X2.allocUnsafe(16*c)]);for(var a=0;a<c;a++){var f=n;var m=f._cipher.encryptBlockRaw(f._prev);f=(S2(f._prev),m);m=l+16*a;n._cache.writeUInt32BE(f[0],m+0);n._cache.writeUInt32BE(f[1],m+4);n._cache.writeUInt32BE(f[2],m+8);n._cache.writeUInt32BE(f[3],m+12)}c=n._cache.slice(0,b.length);return n._cache=n._cache.slice(b.length),zB(b,c)};var ez={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},
"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},
"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",
key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",
type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},Aha={ECB:{encrypt:function(n,b){return n._cipher.encryptBlock(b)},decrypt:function(n,b){return n._cipher.decryptBlock(b)}},CBC:{encrypt:function(n,b){b=zB(b,n._prev);return n._prev=n._cipher.encryptBlock(b),n._prev},decrypt:function(n,b){var c=n._prev;n._prev=b;n=n._cipher.decryptBlock(b);return zB(n,c)}},CFB:T2,CFB8:U2,CFB1:V2,OFB:W2,CTR:JQ,GCM:JQ},KQ;
for(KQ in ez)ez[KQ].module=Aha[ez[KQ].mode];var cq="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,zE={},YG=Yh.Buffer,Bha=[0,1,2,4,8,16,32,64,128,27,54],Zk=function(){for(var n=Array(256),b=0;256>b;b++)n[b]=128>b?b<<1:b<<1^283;b=[];for(var c=[],l=[[],[],[],[]],a=[[],[],[],[]],f=0,m=0,q=0;256>q;++q){var r=m^m<<1^m<<2^m<<3^m<<4;r=r>>>8^255&r^99;b[f]=r;c[r]=f;var u=n[f],v=n[u],y=n[v],z=257*n[r]^16843008*r;l[0][f]=z<<24|z>>>8;l[1][f]=z<<16|z>>>16;l[2][f]=z<<8|z>>>24;l[3][f]=
z;z=16843009*y^65537*v^257*u^16843008*f;a[0][r]=z<<24|z>>>8;a[1][r]=z<<16|z>>>16;a[2][r]=z<<8|z>>>24;a[3][r]=z;0===f?f=m=1:(f=u^n[n[n[y^u]]],m^=n[n[m]])}return{SBOX:b,INV_SBOX:c,SUB_MIX:l,INV_SUB_MIX:a}}();bq.blockSize=16;bq.keySize=32;bq.prototype.blockSize=bq.blockSize;bq.prototype.keySize=bq.keySize;bq.prototype._reset=function(){for(var n=(this||cq)._key,b=n.length,c=b+6,l=4*(c+1),a=[],f=0;f<b;f++)a[f]=n[f];for(f=b;f<l;f++)n=a[f-1],0==f%b?(n=n<<8|n>>>24,n=Zk.SBOX[n>>>24]<<24|Zk.SBOX[n>>>16&255]<<
16|Zk.SBOX[n>>>8&255]<<8|Zk.SBOX[255&n],n^=Bha[f/b|0]<<24):6<b&&4==f%b&&(n=Zk.SBOX[n>>>24]<<24|Zk.SBOX[n>>>16&255]<<16|Zk.SBOX[n>>>8&255]<<8|Zk.SBOX[255&n]),a[f]=a[f-b]^n;b=[];for(f=0;f<l;f++){n=l-f;var m=a[n-(f%4?0:4)];b[f]=4>f||4>=n?m:Zk.INV_SUB_MIX[0][Zk.SBOX[m>>>24]]^Zk.INV_SUB_MIX[1][Zk.SBOX[m>>>16&255]]^Zk.INV_SUB_MIX[2][Zk.SBOX[m>>>8&255]]^Zk.INV_SUB_MIX[3][Zk.SBOX[255&m]]}(this||cq)._nRounds=c;(this||cq)._keySchedule=a;(this||cq)._invKeySchedule=b};bq.prototype.encryptBlockRaw=function(n){return PW(JM(n),
(this||cq)._keySchedule,Zk.SUB_MIX,Zk.SBOX,(this||cq)._nRounds)};bq.prototype.encryptBlock=function(n){n=this.encryptBlockRaw(n);var b=YG.allocUnsafe(16);return b.writeUInt32BE(n[0],0),b.writeUInt32BE(n[1],4),b.writeUInt32BE(n[2],8),b.writeUInt32BE(n[3],12),b};bq.prototype.decryptBlock=function(n){var b=(n=JM(n))[1];n[1]=n[3];n[3]=b;n=PW(n,(this||cq)._invKeySchedule,Zk.INV_SUB_MIX,Zk.INV_SBOX,(this||cq)._nRounds);b=YG.allocUnsafe(16);return b.writeUInt32BE(n[0],0),b.writeUInt32BE(n[3],4),b.writeUInt32BE(n[2],
8),b.writeUInt32BE(n[1],12),b};bq.prototype.scrub=function(){KM((this||cq)._keySchedule);KM((this||cq)._invKeySchedule);KM((this||cq)._key)};zE.AES=bq;var sm="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,yA=Yh.Buffer,Cha=yA.alloc(16,0);aD.prototype.ghash=function(n){for(var b=-1;++b<n.length;)(this||sm).state[b]^=n[b];this._multiply()};aD.prototype._multiply=function(){for(var n,b,c=[(n=(this||sm).h).readUInt32BE(0),n.readUInt32BE(4),n.readUInt32BE(8),n.readUInt32BE(12)],
l=[0,0,0,0],a=-1;128>++a;){0!=((this||sm).state[~~(a/8)]&1<<7-a%8)&&(l[0]^=c[0],l[1]^=c[1],l[2]^=c[2],l[3]^=c[3]);b=0!=(1&c[3]);for(n=3;0<n;n--)c[n]=c[n]>>>1|(1&c[n-1])<<31;c[0]>>>=1;b&&(c[0]^=-520093696)}(this||sm).state=QW(l)};aD.prototype.update=function(n){for((this||sm).cache=yA.concat([(this||sm).cache,n]);16<=(this||sm).cache.length;)n=(this||sm).cache.slice(0,16),(this||sm).cache=(this||sm).cache.slice(16),this.ghash(n)};aD.prototype.final=function(n,b){return(this||sm).cache.length&&this.ghash(yA.concat([(this||
sm).cache,Cha],16)),this.ghash(QW([0,n,0,b])),(this||sm).state};var Kg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,v9=zE,mo=Yh.Buffer,RW=Tl,SW=aD,w9=S2;jh(qw,RW);qw.prototype._update=function(n){if(!(this||Kg)._called&&(this||Kg)._alen){var b=16-(this||Kg)._alen%16;16>b&&(b=mo.alloc(b,0),(this||Kg)._ghash.update(b))}(this||Kg)._called=!0;b=(this||Kg)._mode.encrypt(this||Kg,n);return(this||Kg)._decrypt?(this||Kg)._ghash.update(n):(this||Kg)._ghash.update(b),(this||
Kg)._len+=n.length,b};qw.prototype._final=function(){if((this||Kg)._decrypt&&!(this||Kg)._authTag)throw Error("Unsupported state or unable to authenticate data");var n=zB((this||Kg)._ghash.final(8*(this||Kg)._alen,8*(this||Kg)._len),(this||Kg)._cipher.encryptBlock((this||Kg)._finID)),b;if(b=(this||Kg)._decrypt){b=(this||Kg)._authTag;var c=0;n.length!==b.length&&c++;for(var l=Math.min(n.length,b.length),a=0;a<l;++a)c+=n[a]^b[a];b=c}if(b)throw Error("Unsupported state or unable to authenticate data");
(this||Kg)._authTag=n;(this||Kg)._cipher.scrub()};qw.prototype.getAuthTag=function(){if((this||Kg)._decrypt||!mo.isBuffer((this||Kg)._authTag))throw Error("Attempting to get auth tag in unsupported state");return(this||Kg)._authTag};qw.prototype.setAuthTag=function(n){if(!(this||Kg)._decrypt)throw Error("Attempting to set auth tag in unsupported state");(this||Kg)._authTag=n};qw.prototype.setAAD=function(n){if((this||Kg)._called)throw Error("Attempting to set AAD in unsupported state");(this||Kg)._ghash.update(n);
(this||Kg)._alen+=n.length};var Dr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,x9=zE,LM=Yh.Buffer,TW=Tl;jh(bD,TW);bD.prototype._update=function(n){return(this||Dr)._mode.encrypt(this||Dr,n,(this||Dr)._decrypt)};bD.prototype._final=function(){(this||Dr)._cipher.scrub()};var fz=Yh.Buffer,gD=function(n,b,c,l){if(fz.isBuffer(n)||(n=fz.from(n,"binary")),b&&(fz.isBuffer(b)||(b=fz.from(b,"binary")),8!==b.length))throw new RangeError("salt should be Buffer with 8 byte length");
c/=8;for(var a=fz.alloc(c),f=fz.alloc(l||0),m=fz.alloc(0);0<c||0<l;){var q=new tA;q.update(m);q.update(n);b&&q.update(b);m=q.digest();q=0;if(0<c){var r=a.length-c;q=Math.min(c,m.length);m.copy(a,r,0,q);c-=q}q<m.length&&0<l&&(r=Math.min(l,m.length-q),m.copy(f,f.length-l,q,q+r),l-=r)}return m.fill(0),{key:a,iv:f}},Fi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,A9=qw,zA=Yh.Buffer,WW=ez,z9=bD,UW=Tl,y9=zE;jh(cD,UW);cD.prototype._update=function(n){var b;(this||Fi)._cache.add(n);
for(n=[];b=(this||Fi)._cache.get((this||Fi)._autopadding);)b=(this||Fi)._mode.decrypt(this||Fi,b),n.push(b);return zA.concat(n)};cD.prototype._final=function(){var n=(this||Fi)._cache.flush();if((this||Fi)._autopadding){n=(this||Fi)._mode.decrypt(this||Fi,n);var b=n[15];if(1>b||16<b)throw Error("unable to decrypt data");for(var c=-1;++c<b;)if(n[c+(16-b)]!==b)throw Error("unable to decrypt data");n=16===b?void 0:n.slice(0,16-b);return n}if(n)throw Error("data not multiple of block length");};cD.prototype.setAutoPadding=
function(n){return(this||Fi)._autopadding=!!n,this||Fi};ZG.prototype.add=function(n){(this||Fi).cache=zA.concat([(this||Fi).cache,n])};ZG.prototype.get=function(n){var b;if(n){if(16<(this||Fi).cache.length)return b=(this||Fi).cache.slice(0,16),(this||Fi).cache=(this||Fi).cache.slice(16),b}else if(16<=(this||Fi).cache.length)return b=(this||Fi).cache.slice(0,16),(this||Fi).cache=(this||Fi).cache.slice(16),b;return null};ZG.prototype.flush=function(){if((this||Fi).cache.length)return(this||Fi).cache};
var nj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,ZW=ez,D9=qw,Mu=Yh.Buffer,C9=bD,XW=Tl,B9=zE;jh(dD,XW);dD.prototype._update=function(n){var b;(this||nj)._cache.add(n);for(n=[];b=(this||nj)._cache.get();)b=(this||nj)._mode.encrypt(this||nj,b),n.push(b);return Mu.concat(n)};var Dha=Mu.alloc(16,16);dD.prototype._final=function(){var n=(this||nj)._cache.flush();if((this||nj)._autopadding)return n=(this||nj)._mode.encrypt(this||nj,n),(this||nj)._cipher.scrub(),n;if(!n.equals(Dha))throw(this||
nj)._cipher.scrub(),Error("data not multiple of block length");};dD.prototype.setAutoPadding=function(n){return(this||nj)._autopadding=!!n,this||nj};$G.prototype.add=function(n){(this||nj).cache=Mu.concat([(this||nj).cache,n])};$G.prototype.get=function(){if(15<(this||nj).cache.length){var n=(this||nj).cache.slice(0,16);return(this||nj).cache=(this||nj).cache.slice(16),n}return null};$G.prototype.flush=function(){for(var n=16-(this||nj).cache.length,b=Mu.allocUnsafe(n),c=-1;++c<n;)b.writeUInt8(n,
c);return Mu.concat([(this||nj).cache,b])};var ep={};ep.createCipher=ep.Cipher=function(n,b){var c=ZW[n.toLowerCase()];if(!c)throw new TypeError("invalid suite type");b=gD(b,!1,c.key,c.iv);return YW(n,b.key,b.iv)};ep.createCipheriv=ep.Cipheriv=YW;ep.createDecipher=ep.Decipher=function(n,b){var c=WW[n.toLowerCase()];if(!c)throw new TypeError("invalid suite type");b=gD(b,!1,c.key,c.iv);return VW(n,b.key,b.iv)};ep.createDecipheriv=ep.Decipheriv=VW;ep.listCiphers=ep.getCiphers=function(){return Object.keys(ez)};
var Zw={"des-ecb":{key:8,iv:0}};Zw["des-cbc"]=Zw.des={key:8,iv:8};Zw["des-ede3-cbc"]=Zw.des3={key:24,iv:8};Zw["des-ede3"]={key:24,iv:0};Zw["des-ede-cbc"]={key:16,iv:8};Zw["des-ede"]={key:16,iv:0};var Y2,Z2,$2,$W=WG,NM=ep,rw=ez,Nu=Zw;var Eha=Y2=function(n,b){if(n=n.toLowerCase(),rw[n]){var c=rw[n].key;var l=rw[n].iv}else{if(!Nu[n])throw new TypeError("invalid suite type");c=8*Nu[n].key;l=Nu[n].iv}b=gD(b,!1,c,l);return MM(n,b.key,b.iv)};var Fha=Z2=function(n,b){if(n=n.toLowerCase(),rw[n]){var c=rw[n].key;
var l=rw[n].iv}else{if(!Nu[n])throw new TypeError("invalid suite type");c=8*Nu[n].key;l=Nu[n].iv}b=gD(b,!1,c,l);return OM(n,b.key,b.iv)};var Gha=$2=function(){return Object.keys(Nu).concat(NM.getCiphers())};var Hha=Object.freeze({}),Wa="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,a3={},b3={exports:a3};!function(n,b){function c(D,Q){if(!D)throw Error(Q||"Assertion failed");}function l(D,Q){D.super_=Q;var J=function(){};J.prototype=Q.prototype;D.prototype=new J;D.prototype.constructor=
D}function a(D,Q,J){if(a.isBN(D))return D;(this||Wa).negative=0;(this||Wa).words=null;(this||Wa).length=0;(this||Wa).red=null;null!==D&&("le"!==Q&&"be"!==Q||(J=Q,Q=10),this._init(D||0,Q||10,J||"be"))}function f(D,Q,J){var O=0;for(J=Math.min(D.length,J);Q<J;Q++){var ja=D.charCodeAt(Q)-48;O<<=4;O|=49<=ja&&54>=ja?ja-49+10:17<=ja&&22>=ja?ja-17+10:15&ja}return O}function m(D,Q,J,O){var ja=0;for(J=Math.min(D.length,J);Q<J;Q++){var X=D.charCodeAt(Q)-48;ja*=O;ja+=49<=X?X-49+10:17<=X?X-17+10:X}return ja}function q(D,
Q,J){J.negative=Q.negative^D.negative;var O=D.length+Q.length|0;J.length=O;O=O-1|0;var ja=(0|D.words[0])*(0|Q.words[0]),X=ja/67108864|0;J.words[0]=67108863&ja;for(var ha=1;ha<O;ha++){var bb=X>>>26;ja=67108863&X;X=Math.min(ha,Q.length-1);for(var pb=Math.max(0,ha-D.length+1);pb<=X;pb++)bb+=(ja=(0|D.words[ha-pb|0])*(0|Q.words[pb])+ja)/67108864|0,ja&=67108863;J.words[ha]=0|ja;X=0|bb}return 0!==X?J.words[ha]=0|X:J.length--,J.strip()}function r(D,Q){(this||Wa).x=D;(this||Wa).y=Q}function u(D,Q){(this||
Wa).name=D;(this||Wa).p=new a(Q,16);(this||Wa).n=(this||Wa).p.bitLength();(this||Wa).k=(new a(1)).iushln((this||Wa).n).isub((this||Wa).p);(this||Wa).tmp=this._tmp()}function v(){u.call(this||Wa,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){u.call(this||Wa,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function z(){u.call(this||Wa,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){u.call(this||Wa,"25519",
"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function C(D){"string"==typeof D?(D=a._prime(D),(this||Wa).m=D.p,(this||Wa).prime=D):(c(D.gtn(1),"modulus must be greater than 1"),(this||Wa).m=D,(this||Wa).prime=null)}function G(D){C.call(this||Wa,D);(this||Wa).shift=(this||Wa).m.bitLength();0!=(this||Wa).shift%26&&((this||Wa).shift+=26-(this||Wa).shift%26);(this||Wa).r=(new a(1)).iushln((this||Wa).shift);(this||Wa).r2=this.imod((this||Wa).r.sqr());(this||Wa).rinv=(this||Wa).r._invmp((this||
Wa).m);(this||Wa).minv=(this||Wa).rinv.mul((this||Wa).r).isubn(1).div((this||Wa).m);(this||Wa).minv=(this||Wa).minv.umod((this||Wa).r);(this||Wa).minv=(this||Wa).r.sub((this||Wa).minv)}"object"==typeof n?n.exports=a:b.BN=a;a.BN=a;a.wordSize=26;try{var F=Hha.Buffer}catch(D){}a.isBN=function(D){return D instanceof a||null!==D&&"object"==typeof D&&D.constructor.wordSize===a.wordSize&&Array.isArray(D.words)};a.max=function(D,Q){return 0<D.cmp(Q)?D:Q};a.min=function(D,Q){return 0>D.cmp(Q)?D:Q};a.prototype._init=
function(D,Q,J){if("number"==typeof D)return this._initNumber(D,Q,J);if("object"==typeof D)return this._initArray(D,Q,J);"hex"===Q&&(Q=16);c(Q===(0|Q)&&2<=Q&&36>=Q);var O=0;"-"===(D=D.toString().replace(/\s+/g,""))[0]&&O++;16===Q?this._parseHex(D,O):this._parseBase(D,Q,O);"-"===D[0]&&((this||Wa).negative=1);this.strip();"le"===J&&this._initArray(this.toArray(),Q,J)};a.prototype._initNumber=function(D,Q,J){0>D&&((this||Wa).negative=1,D=-D);67108864>D?((this||Wa).words=[67108863&D],(this||Wa).length=
1):4503599627370496>D?((this||Wa).words=[67108863&D,D/67108864&67108863],(this||Wa).length=2):(c(9007199254740992>D),(this||Wa).words=[67108863&D,D/67108864&67108863,1],(this||Wa).length=3);"le"===J&&this._initArray(this.toArray(),Q,J)};a.prototype._initArray=function(D,Q,J){if(c("number"==typeof D.length),0>=D.length)return(this||Wa).words=[0],(this||Wa).length=1,this||Wa;(this||Wa).length=Math.ceil(D.length/3);(this||Wa).words=Array((this||Wa).length);for(Q=0;Q<(this||Wa).length;Q++)(this||Wa).words[Q]=
0;var O=0;if("be"===J)for(Q=D.length-1,J=0;0<=Q;Q-=3){var ja=D[Q]|D[Q-1]<<8|D[Q-2]<<16;(this||Wa).words[J]|=ja<<O&67108863;(this||Wa).words[J+1]=ja>>>26-O&67108863;26<=(O+=24)&&(O-=26,J++)}else if("le"===J)for(J=Q=0;Q<D.length;Q+=3)ja=D[Q]|D[Q+1]<<8|D[Q+2]<<16,(this||Wa).words[J]|=ja<<O&67108863,(this||Wa).words[J+1]=ja>>>26-O&67108863,26<=(O+=24)&&(O-=26,J++);return this.strip()};a.prototype._parseHex=function(D,Q){(this||Wa).length=Math.ceil((D.length-Q)/6);(this||Wa).words=Array((this||Wa).length);
for(var J=0;J<(this||Wa).length;J++)(this||Wa).words[J]=0;var O,ja=0;J=D.length-6;for(O=0;J>=Q;J-=6){var X=f(D,J,J+6);(this||Wa).words[O]|=X<<ja&67108863;(this||Wa).words[O+1]|=X>>>26-ja&4194303;26<=(ja+=24)&&(ja-=26,O++)}J+6!==Q&&(X=f(D,Q,J+6),(this||Wa).words[O]|=X<<ja&67108863,(this||Wa).words[O+1]|=X>>>26-ja&4194303);this.strip()};a.prototype._parseBase=function(D,Q,J){(this||Wa).words=[0];(this||Wa).length=1;for(var O=0,ja=1;67108863>=ja;ja*=Q)O++;O--;ja=ja/Q|0;var X=D.length-J,ha=X%O;X=Math.min(X,
X-ha)+J;for(var bb=J;bb<X;bb+=O)J=m(D,bb,bb+O,Q),this.imuln(ja),67108864>(this||Wa).words[0]+J?(this||Wa).words[0]+=J:this._iaddn(J);if(0!==ha){O=1;J=m(D,bb,D.length,Q);for(bb=0;bb<ha;bb++)O*=Q;this.imuln(O);67108864>(this||Wa).words[0]+J?(this||Wa).words[0]+=J:this._iaddn(J)}};a.prototype.copy=function(D){D.words=Array((this||Wa).length);for(var Q=0;Q<(this||Wa).length;Q++)D.words[Q]=(this||Wa).words[Q];D.length=(this||Wa).length;D.negative=(this||Wa).negative;D.red=(this||Wa).red};a.prototype.clone=
function(){var D=new a(null);return this.copy(D),D};a.prototype._expand=function(D){for(;(this||Wa).length<D;)(this||Wa).words[(this||Wa).length++]=0;return this||Wa};a.prototype.strip=function(){for(;1<(this||Wa).length&&0===(this||Wa).words[(this||Wa).length-1];)(this||Wa).length--;return this._normSign()};a.prototype._normSign=function(){return 1===(this||Wa).length&&0===(this||Wa).words[0]&&((this||Wa).negative=0),this||Wa};a.prototype.inspect=function(){return((this||Wa).red?"<BN-R: ":"<BN: ")+
this.toString(16)+">"};var N=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),L=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],W=[0,0,33554432,43046721,
16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(D,Q){if(Q=0|Q||1,16===(D=D||10)||"hex"===D){var J="";for(var O=D=0,ja=0;ja<(this||Wa).length;ja++){var X=(this||Wa).words[ja],ha=(16777215&(X<<D|O)).toString(16);J=0!==(O=X>>>24-D&16777215)||
ja!==(this||Wa).length-1?N[6-ha.length]+ha+J:ha+J;26<=(D+=2)&&(D-=26,ja--)}for(0!==O&&(J=O.toString(16)+J);0!=J.length%Q;)J="0"+J;return 0!==(this||Wa).negative&&(J="-"+J),J}if(D===(0|D)&&2<=D&&36>=D){O=L[D];ja=W[D];J="";X=this.clone();for(X.negative=0;!X.isZero();)ha=X.modn(ja).toString(D),J=(X=X.idivn(ja)).isZero()?ha+J:N[O-ha.length]+ha+J;for(this.isZero()&&(J="0"+J);0!=J.length%Q;)J="0"+J;return 0!==(this||Wa).negative&&(J="-"+J),J}c(!1,"Base should be between 2 and 36")};a.prototype.toNumber=
function(){var D=(this||Wa).words[0];return 2===(this||Wa).length?D+=67108864*(this||Wa).words[1]:3===(this||Wa).length&&1===(this||Wa).words[2]?D+=4503599627370496+67108864*(this||Wa).words[1]:2<(this||Wa).length&&c(!1,"Number can only safely store up to 53 bits"),0!==(this||Wa).negative?-D:D};a.prototype.toJSON=function(){return this.toString(16)};a.prototype.toBuffer=function(D,Q){return c(void 0!==F),this.toArrayLike(F,D,Q)};a.prototype.toArray=function(D,Q){return this.toArrayLike(Array,D,Q)};
a.prototype.toArrayLike=function(D,Q,J){var O=this.byteLength();J=J||Math.max(1,O);c(O<=J,"byte array longer than desired length");c(0<J,"Requested array length <= 0");this.strip();var ja="le"===Q;D=new D(J);Q=this.clone();if(ja){for(ja=0;!Q.isZero();ja++)O=Q.andln(255),Q.iushrn(8),D[ja]=O;for(;ja<J;ja++)D[ja]=0}else{for(ja=0;ja<J-O;ja++)D[ja]=0;for(ja=0;!Q.isZero();ja++)O=Q.andln(255),Q.iushrn(8),D[J-ja-1]=O}return D};Math.clz32?a.prototype._countBits=function(D){return 32-Math.clz32(D)}:a.prototype._countBits=
function(D){var Q=0;return 4096<=D&&(Q+=13,D>>>=13),64<=D&&(Q+=7,D>>>=7),8<=D&&(Q+=4,D>>>=4),2<=D&&(Q+=2,D>>>=2),Q+D};a.prototype._zeroBits=function(D){if(0===D)return 26;var Q=0;return 0==(8191&D)&&(Q+=13,D>>>=13),0==(127&D)&&(Q+=7,D>>>=7),0==(15&D)&&(Q+=4,D>>>=4),0==(3&D)&&(Q+=2,D>>>=2),0==(1&D)&&Q++,Q};a.prototype.bitLength=function(){var D=this._countBits((this||Wa).words[(this||Wa).length-1]);return 26*((this||Wa).length-1)+D};a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=
0,Q=0;Q<(this||Wa).length;Q++){var J=this._zeroBits((this||Wa).words[Q]);if(D+=J,26!==J)break}return D};a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};a.prototype.toTwos=function(D){return 0!==(this||Wa).negative?this.abs().inotn(D).iaddn(1):this.clone()};a.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()};a.prototype.isNeg=function(){return 0!==(this||Wa).negative};a.prototype.neg=function(){return this.clone().ineg()};a.prototype.ineg=
function(){return this.isZero()||((this||Wa).negative^=1),this||Wa};a.prototype.iuor=function(D){for(;(this||Wa).length<D.length;)(this||Wa).words[(this||Wa).length++]=0;for(var Q=0;Q<D.length;Q++)(this||Wa).words[Q]|=D.words[Q];return this.strip()};a.prototype.ior=function(D){return c(0==((this||Wa).negative|D.negative)),this.iuor(D)};a.prototype.or=function(D){return(this||Wa).length>D.length?this.clone().ior(D):D.clone().ior(this||Wa)};a.prototype.uor=function(D){return(this||Wa).length>D.length?
this.clone().iuor(D):D.clone().iuor(this||Wa)};a.prototype.iuand=function(D){var Q=(this||Wa).length>D.length?D:this||Wa;for(var J=0;J<Q.length;J++)(this||Wa).words[J]&=D.words[J];return(this||Wa).length=Q.length,this.strip()};a.prototype.iand=function(D){return c(0==((this||Wa).negative|D.negative)),this.iuand(D)};a.prototype.and=function(D){return(this||Wa).length>D.length?this.clone().iand(D):D.clone().iand(this||Wa)};a.prototype.uand=function(D){return(this||Wa).length>D.length?this.clone().iuand(D):
D.clone().iuand(this||Wa)};a.prototype.iuxor=function(D){var Q,J;(this||Wa).length>D.length?(Q=this||Wa,J=D):(Q=D,J=this||Wa);for(D=0;D<J.length;D++)(this||Wa).words[D]=Q.words[D]^J.words[D];if((this||Wa)!==Q)for(;D<Q.length;D++)(this||Wa).words[D]=Q.words[D];return(this||Wa).length=Q.length,this.strip()};a.prototype.ixor=function(D){return c(0==((this||Wa).negative|D.negative)),this.iuxor(D)};a.prototype.xor=function(D){return(this||Wa).length>D.length?this.clone().ixor(D):D.clone().ixor(this||Wa)};
a.prototype.uxor=function(D){return(this||Wa).length>D.length?this.clone().iuxor(D):D.clone().iuxor(this||Wa)};a.prototype.inotn=function(D){c("number"==typeof D&&0<=D);var Q=0|Math.ceil(D/26);D%=26;this._expand(Q);0<D&&Q--;for(var J=0;J<Q;J++)(this||Wa).words[J]=67108863&~(this||Wa).words[J];return 0<D&&((this||Wa).words[J]=~(this||Wa).words[J]&67108863>>26-D),this.strip()};a.prototype.notn=function(D){return this.clone().inotn(D)};a.prototype.setn=function(D,Q){c("number"==typeof D&&0<=D);var J=
D/26|0;D%=26;return this._expand(J+1),(this||Wa).words[J]=Q?(this||Wa).words[J]|1<<D:(this||Wa).words[J]&~(1<<D),this.strip()};a.prototype.iadd=function(D){var Q,J,O;if(0!==(this||Wa).negative&&0===D.negative)return(this||Wa).negative=0,this.isub(D),(this||Wa).negative^=1,this._normSign();if(0===(this||Wa).negative&&0!==D.negative)return D.negative=0,Q=this.isub(D),D.negative=1,Q._normSign();(this||Wa).length>D.length?(J=this||Wa,O=D):(J=D,O=this||Wa);for(D=Q=0;D<O.length;D++)Q=(0|J.words[D])+(0|
O.words[D])+Q,(this||Wa).words[D]=67108863&Q,Q>>>=26;for(;0!==Q&&D<J.length;D++)Q=(0|J.words[D])+Q,(this||Wa).words[D]=67108863&Q,Q>>>=26;if((this||Wa).length=J.length,0!==Q)(this||Wa).words[(this||Wa).length]=Q,(this||Wa).length++;else if(J!==(this||Wa))for(;D<J.length;D++)(this||Wa).words[D]=J.words[D];return this||Wa};a.prototype.add=function(D){var Q;return 0!==D.negative&&0===(this||Wa).negative?(D.negative=0,Q=this.sub(D),D.negative^=1,Q):0===D.negative&&0!==(this||Wa).negative?((this||Wa).negative=
0,Q=D.sub(this||Wa),(this||Wa).negative=1,Q):(this||Wa).length>D.length?this.clone().iadd(D):D.clone().iadd(this||Wa)};a.prototype.isub=function(D){if(0!==D.negative){D.negative=0;var Q=this.iadd(D);return D.negative=1,Q._normSign()}if(0!==(this||Wa).negative)return(this||Wa).negative=0,this.iadd(D),(this||Wa).negative=1,this._normSign();var J,O;Q=this.cmp(D);if(0===Q)return(this||Wa).negative=0,(this||Wa).length=1,(this||Wa).words[0]=0,this||Wa;0<Q?(J=this||Wa,O=D):(J=D,O=this||Wa);for(var ja=D=
0;ja<O.length;ja++)D=(Q=(0|J.words[ja])-(0|O.words[ja])+D)>>26,(this||Wa).words[ja]=67108863&Q;for(;0!==D&&ja<J.length;ja++)D=(Q=(0|J.words[ja])+D)>>26,(this||Wa).words[ja]=67108863&Q;if(0===D&&ja<J.length&&J!==(this||Wa))for(;ja<J.length;ja++)(this||Wa).words[ja]=J.words[ja];return(this||Wa).length=Math.max((this||Wa).length,ja),J!==(this||Wa)&&((this||Wa).negative=1),this.strip()};a.prototype.sub=function(D){return this.clone().isub(D)};var la=function(D,Q,J){var O=D.words,ja=Q.words,X=J.words,
ha=0|O[0],bb=8191&ha;ha>>>=13;var pb=0|O[1],oa=8191&pb;pb>>>=13;var ba=0|O[2],qa=8191&ba;ba>>>=13;var Ga=0|O[3],ua=8191&Ga;Ga>>>=13;var H=0|O[4],M=8191&H;H>>>=13;var R=0|O[5],ca=8191&R;R>>>=13;var Z=0|O[6],Aa=8191&Z;Z>>>=13;var db=0|O[7],S=8191&db;db>>>=13;var da=0|O[8],ea=8191&da;da>>>=13;var Pa=0|O[9];O=8191&Pa;Pa>>>=13;var kb=0|ja[0],vc=8191&kb,mc=kb>>>13,Yb=0|ja[1];kb=8191&Yb;var ud=Yb>>>13,id=0|ja[2];Yb=8191&id;var ue=id>>>13,ye=0|ja[3];id=8191&ye;var nf=ye>>>13,gg=0|ja[4];ye=8191&gg;var Tg=
gg>>>13,sg=0|ja[5];gg=8191&sg;var Kh=sg>>>13,zg=0|ja[6];sg=8191&zg;var Hf=zg>>>13,hg=0|ja[7];zg=8191&hg;var Ag=hg>>>13,Ch=0|ja[8];hg=8191&Ch;Ch>>>=13;var Xh=0|ja[9];ja=8191&Xh;Xh>>>=13;J.negative=D.negative^Q.negative;J.length=19;var Dn=(0+Math.imul(bb,vc)|0)+((8191&(D=(D=Math.imul(bb,mc))+Math.imul(ha,vc)|0))<<13)|0;Q=(Math.imul(ha,mc)+(D>>>13)|0)+(Dn>>>26)|0;Dn&=67108863;var Wc=Math.imul(oa,vc);D=(D=Math.imul(oa,mc))+Math.imul(pb,vc)|0;var Yc=Math.imul(pb,mc);var xq=(Q+(Wc+Math.imul(bb,kb)|0)|0)+
((8191&(D=(D=D+Math.imul(bb,ud)|0)+Math.imul(ha,kb)|0))<<13)|0;Q=((Yc+Math.imul(ha,ud)|0)+(D>>>13)|0)+(xq>>>26)|0;xq&=67108863;Wc=Math.imul(qa,vc);D=(D=Math.imul(qa,mc))+Math.imul(ba,vc)|0;Yc=Math.imul(ba,mc);Wc=Wc+Math.imul(oa,kb)|0;D=(D=D+Math.imul(oa,ud)|0)+Math.imul(pb,kb)|0;Yc=Yc+Math.imul(pb,ud)|0;var pp=(Q+(Wc+Math.imul(bb,Yb)|0)|0)+((8191&(D=(D=D+Math.imul(bb,ue)|0)+Math.imul(ha,Yb)|0))<<13)|0;Q=((Yc+Math.imul(ha,ue)|0)+(D>>>13)|0)+(pp>>>26)|0;pp&=67108863;Wc=Math.imul(ua,vc);D=(D=Math.imul(ua,
mc))+Math.imul(Ga,vc)|0;Yc=Math.imul(Ga,mc);Wc=Wc+Math.imul(qa,kb)|0;D=(D=D+Math.imul(qa,ud)|0)+Math.imul(ba,kb)|0;Yc=Yc+Math.imul(ba,ud)|0;Wc=Wc+Math.imul(oa,Yb)|0;D=(D=D+Math.imul(oa,ue)|0)+Math.imul(pb,Yb)|0;Yc=Yc+Math.imul(pb,ue)|0;var uo=(Q+(Wc+Math.imul(bb,id)|0)|0)+((8191&(D=(D=D+Math.imul(bb,nf)|0)+Math.imul(ha,id)|0))<<13)|0;Q=((Yc+Math.imul(ha,nf)|0)+(D>>>13)|0)+(uo>>>26)|0;uo&=67108863;Wc=Math.imul(M,vc);D=(D=Math.imul(M,mc))+Math.imul(H,vc)|0;Yc=Math.imul(H,mc);Wc=Wc+Math.imul(ua,kb)|
0;D=(D=D+Math.imul(ua,ud)|0)+Math.imul(Ga,kb)|0;Yc=Yc+Math.imul(Ga,ud)|0;Wc=Wc+Math.imul(qa,Yb)|0;D=(D=D+Math.imul(qa,ue)|0)+Math.imul(ba,Yb)|0;Yc=Yc+Math.imul(ba,ue)|0;Wc=Wc+Math.imul(oa,id)|0;D=(D=D+Math.imul(oa,nf)|0)+Math.imul(pb,id)|0;Yc=Yc+Math.imul(pb,nf)|0;var Rw=(Q+(Wc+Math.imul(bb,ye)|0)|0)+((8191&(D=(D=D+Math.imul(bb,Tg)|0)+Math.imul(ha,ye)|0))<<13)|0;Q=((Yc+Math.imul(ha,Tg)|0)+(D>>>13)|0)+(Rw>>>26)|0;Rw&=67108863;Wc=Math.imul(ca,vc);D=(D=Math.imul(ca,mc))+Math.imul(R,vc)|0;Yc=Math.imul(R,
mc);Wc=Wc+Math.imul(M,kb)|0;D=(D=D+Math.imul(M,ud)|0)+Math.imul(H,kb)|0;Yc=Yc+Math.imul(H,ud)|0;Wc=Wc+Math.imul(ua,Yb)|0;D=(D=D+Math.imul(ua,ue)|0)+Math.imul(Ga,Yb)|0;Yc=Yc+Math.imul(Ga,ue)|0;Wc=Wc+Math.imul(qa,id)|0;D=(D=D+Math.imul(qa,nf)|0)+Math.imul(ba,id)|0;Yc=Yc+Math.imul(ba,nf)|0;Wc=Wc+Math.imul(oa,ye)|0;D=(D=D+Math.imul(oa,Tg)|0)+Math.imul(pb,ye)|0;Yc=Yc+Math.imul(pb,Tg)|0;var Pj=(Q+(Wc+Math.imul(bb,gg)|0)|0)+((8191&(D=(D=D+Math.imul(bb,Kh)|0)+Math.imul(ha,gg)|0))<<13)|0;Q=((Yc+Math.imul(ha,
Kh)|0)+(D>>>13)|0)+(Pj>>>26)|0;Pj&=67108863;Wc=Math.imul(Aa,vc);D=(D=Math.imul(Aa,mc))+Math.imul(Z,vc)|0;Yc=Math.imul(Z,mc);Wc=Wc+Math.imul(ca,kb)|0;D=(D=D+Math.imul(ca,ud)|0)+Math.imul(R,kb)|0;Yc=Yc+Math.imul(R,ud)|0;Wc=Wc+Math.imul(M,Yb)|0;D=(D=D+Math.imul(M,ue)|0)+Math.imul(H,Yb)|0;Yc=Yc+Math.imul(H,ue)|0;Wc=Wc+Math.imul(ua,id)|0;D=(D=D+Math.imul(ua,nf)|0)+Math.imul(Ga,id)|0;Yc=Yc+Math.imul(Ga,nf)|0;Wc=Wc+Math.imul(qa,ye)|0;D=(D=D+Math.imul(qa,Tg)|0)+Math.imul(ba,ye)|0;Yc=Yc+Math.imul(ba,Tg)|0;
Wc=Wc+Math.imul(oa,gg)|0;D=(D=D+Math.imul(oa,Kh)|0)+Math.imul(pb,gg)|0;Yc=Yc+Math.imul(pb,Kh)|0;var Sw=(Q+(Wc+Math.imul(bb,sg)|0)|0)+((8191&(D=(D=D+Math.imul(bb,Hf)|0)+Math.imul(ha,sg)|0))<<13)|0;Q=((Yc+Math.imul(ha,Hf)|0)+(D>>>13)|0)+(Sw>>>26)|0;Sw&=67108863;Wc=Math.imul(S,vc);D=(D=Math.imul(S,mc))+Math.imul(db,vc)|0;Yc=Math.imul(db,mc);Wc=Wc+Math.imul(Aa,kb)|0;D=(D=D+Math.imul(Aa,ud)|0)+Math.imul(Z,kb)|0;Yc=Yc+Math.imul(Z,ud)|0;Wc=Wc+Math.imul(ca,Yb)|0;D=(D=D+Math.imul(ca,ue)|0)+Math.imul(R,Yb)|
0;Yc=Yc+Math.imul(R,ue)|0;Wc=Wc+Math.imul(M,id)|0;D=(D=D+Math.imul(M,nf)|0)+Math.imul(H,id)|0;Yc=Yc+Math.imul(H,nf)|0;Wc=Wc+Math.imul(ua,ye)|0;D=(D=D+Math.imul(ua,Tg)|0)+Math.imul(Ga,ye)|0;Yc=Yc+Math.imul(Ga,Tg)|0;Wc=Wc+Math.imul(qa,gg)|0;D=(D=D+Math.imul(qa,Kh)|0)+Math.imul(ba,gg)|0;Yc=Yc+Math.imul(ba,Kh)|0;Wc=Wc+Math.imul(oa,sg)|0;D=(D=D+Math.imul(oa,Hf)|0)+Math.imul(pb,sg)|0;Yc=Yc+Math.imul(pb,Hf)|0;var Tw=(Q+(Wc+Math.imul(bb,zg)|0)|0)+((8191&(D=(D=D+Math.imul(bb,Ag)|0)+Math.imul(ha,zg)|0))<<13)|
0;Q=((Yc+Math.imul(ha,Ag)|0)+(D>>>13)|0)+(Tw>>>26)|0;Tw&=67108863;Wc=Math.imul(ea,vc);D=(D=Math.imul(ea,mc))+Math.imul(da,vc)|0;Yc=Math.imul(da,mc);Wc=Wc+Math.imul(S,kb)|0;D=(D=D+Math.imul(S,ud)|0)+Math.imul(db,kb)|0;Yc=Yc+Math.imul(db,ud)|0;Wc=Wc+Math.imul(Aa,Yb)|0;D=(D=D+Math.imul(Aa,ue)|0)+Math.imul(Z,Yb)|0;Yc=Yc+Math.imul(Z,ue)|0;Wc=Wc+Math.imul(ca,id)|0;D=(D=D+Math.imul(ca,nf)|0)+Math.imul(R,id)|0;Yc=Yc+Math.imul(R,nf)|0;Wc=Wc+Math.imul(M,ye)|0;D=(D=D+Math.imul(M,Tg)|0)+Math.imul(H,ye)|0;Yc=
Yc+Math.imul(H,Tg)|0;Wc=Wc+Math.imul(ua,gg)|0;D=(D=D+Math.imul(ua,Kh)|0)+Math.imul(Ga,gg)|0;Yc=Yc+Math.imul(Ga,Kh)|0;Wc=Wc+Math.imul(qa,sg)|0;D=(D=D+Math.imul(qa,Hf)|0)+Math.imul(ba,sg)|0;Yc=Yc+Math.imul(ba,Hf)|0;Wc=Wc+Math.imul(oa,zg)|0;D=(D=D+Math.imul(oa,Ag)|0)+Math.imul(pb,zg)|0;Yc=Yc+Math.imul(pb,Ag)|0;var Uw=(Q+(Wc+Math.imul(bb,hg)|0)|0)+((8191&(D=(D=D+Math.imul(bb,Ch)|0)+Math.imul(ha,hg)|0))<<13)|0;Q=((Yc+Math.imul(ha,Ch)|0)+(D>>>13)|0)+(Uw>>>26)|0;Uw&=67108863;Wc=Math.imul(O,vc);D=(D=Math.imul(O,
mc))+Math.imul(Pa,vc)|0;Yc=Math.imul(Pa,mc);Wc=Wc+Math.imul(ea,kb)|0;D=(D=D+Math.imul(ea,ud)|0)+Math.imul(da,kb)|0;Yc=Yc+Math.imul(da,ud)|0;Wc=Wc+Math.imul(S,Yb)|0;D=(D=D+Math.imul(S,ue)|0)+Math.imul(db,Yb)|0;Yc=Yc+Math.imul(db,ue)|0;Wc=Wc+Math.imul(Aa,id)|0;D=(D=D+Math.imul(Aa,nf)|0)+Math.imul(Z,id)|0;Yc=Yc+Math.imul(Z,nf)|0;Wc=Wc+Math.imul(ca,ye)|0;D=(D=D+Math.imul(ca,Tg)|0)+Math.imul(R,ye)|0;Yc=Yc+Math.imul(R,Tg)|0;Wc=Wc+Math.imul(M,gg)|0;D=(D=D+Math.imul(M,Kh)|0)+Math.imul(H,gg)|0;Yc=Yc+Math.imul(H,
Kh)|0;Wc=Wc+Math.imul(ua,sg)|0;D=(D=D+Math.imul(ua,Hf)|0)+Math.imul(Ga,sg)|0;Yc=Yc+Math.imul(Ga,Hf)|0;Wc=Wc+Math.imul(qa,zg)|0;D=(D=D+Math.imul(qa,Ag)|0)+Math.imul(ba,zg)|0;Yc=Yc+Math.imul(ba,Ag)|0;Wc=Wc+Math.imul(oa,hg)|0;D=(D=D+Math.imul(oa,Ch)|0)+Math.imul(pb,hg)|0;Yc=Yc+Math.imul(pb,Ch)|0;bb=(Q+(Wc+Math.imul(bb,ja)|0)|0)+((8191&(D=(D=D+Math.imul(bb,Xh)|0)+Math.imul(ha,ja)|0))<<13)|0;Q=((Yc+Math.imul(ha,Xh)|0)+(D>>>13)|0)+(bb>>>26)|0;bb&=67108863;Wc=Math.imul(O,kb);D=(D=Math.imul(O,ud))+Math.imul(Pa,
kb)|0;Yc=Math.imul(Pa,ud);Wc=Wc+Math.imul(ea,Yb)|0;D=(D=D+Math.imul(ea,ue)|0)+Math.imul(da,Yb)|0;Yc=Yc+Math.imul(da,ue)|0;Wc=Wc+Math.imul(S,id)|0;D=(D=D+Math.imul(S,nf)|0)+Math.imul(db,id)|0;Yc=Yc+Math.imul(db,nf)|0;Wc=Wc+Math.imul(Aa,ye)|0;D=(D=D+Math.imul(Aa,Tg)|0)+Math.imul(Z,ye)|0;Yc=Yc+Math.imul(Z,Tg)|0;Wc=Wc+Math.imul(ca,gg)|0;D=(D=D+Math.imul(ca,Kh)|0)+Math.imul(R,gg)|0;Yc=Yc+Math.imul(R,Kh)|0;Wc=Wc+Math.imul(M,sg)|0;D=(D=D+Math.imul(M,Hf)|0)+Math.imul(H,sg)|0;Yc=Yc+Math.imul(H,Hf)|0;Wc=Wc+
Math.imul(ua,zg)|0;D=(D=D+Math.imul(ua,Ag)|0)+Math.imul(Ga,zg)|0;Yc=Yc+Math.imul(Ga,Ag)|0;Wc=Wc+Math.imul(qa,hg)|0;D=(D=D+Math.imul(qa,Ch)|0)+Math.imul(ba,hg)|0;Yc=Yc+Math.imul(ba,Ch)|0;ha=(Q+(Wc+Math.imul(oa,ja)|0)|0)+((8191&(D=(D=D+Math.imul(oa,Xh)|0)+Math.imul(pb,ja)|0))<<13)|0;Q=((Yc+Math.imul(pb,Xh)|0)+(D>>>13)|0)+(ha>>>26)|0;ha&=67108863;Wc=Math.imul(O,Yb);D=(D=Math.imul(O,ue))+Math.imul(Pa,Yb)|0;Yc=Math.imul(Pa,ue);Wc=Wc+Math.imul(ea,id)|0;D=(D=D+Math.imul(ea,nf)|0)+Math.imul(da,id)|0;Yc=Yc+
Math.imul(da,nf)|0;Wc=Wc+Math.imul(S,ye)|0;D=(D=D+Math.imul(S,Tg)|0)+Math.imul(db,ye)|0;Yc=Yc+Math.imul(db,Tg)|0;Wc=Wc+Math.imul(Aa,gg)|0;D=(D=D+Math.imul(Aa,Kh)|0)+Math.imul(Z,gg)|0;Yc=Yc+Math.imul(Z,Kh)|0;Wc=Wc+Math.imul(ca,sg)|0;D=(D=D+Math.imul(ca,Hf)|0)+Math.imul(R,sg)|0;Yc=Yc+Math.imul(R,Hf)|0;Wc=Wc+Math.imul(M,zg)|0;D=(D=D+Math.imul(M,Ag)|0)+Math.imul(H,zg)|0;Yc=Yc+Math.imul(H,Ag)|0;Wc=Wc+Math.imul(ua,hg)|0;D=(D=D+Math.imul(ua,Ch)|0)+Math.imul(Ga,hg)|0;Yc=Yc+Math.imul(Ga,Ch)|0;oa=(Q+(Wc+Math.imul(qa,
ja)|0)|0)+((8191&(D=(D=D+Math.imul(qa,Xh)|0)+Math.imul(ba,ja)|0))<<13)|0;Q=((Yc+Math.imul(ba,Xh)|0)+(D>>>13)|0)+(oa>>>26)|0;oa&=67108863;Wc=Math.imul(O,id);D=(D=Math.imul(O,nf))+Math.imul(Pa,id)|0;Yc=Math.imul(Pa,nf);Wc=Wc+Math.imul(ea,ye)|0;D=(D=D+Math.imul(ea,Tg)|0)+Math.imul(da,ye)|0;Yc=Yc+Math.imul(da,Tg)|0;Wc=Wc+Math.imul(S,gg)|0;D=(D=D+Math.imul(S,Kh)|0)+Math.imul(db,gg)|0;Yc=Yc+Math.imul(db,Kh)|0;Wc=Wc+Math.imul(Aa,sg)|0;D=(D=D+Math.imul(Aa,Hf)|0)+Math.imul(Z,sg)|0;Yc=Yc+Math.imul(Z,Hf)|0;
Wc=Wc+Math.imul(ca,zg)|0;D=(D=D+Math.imul(ca,Ag)|0)+Math.imul(R,zg)|0;Yc=Yc+Math.imul(R,Ag)|0;Wc=Wc+Math.imul(M,hg)|0;D=(D=D+Math.imul(M,Ch)|0)+Math.imul(H,hg)|0;Yc=Yc+Math.imul(H,Ch)|0;pb=(Q+(Wc+Math.imul(ua,ja)|0)|0)+((8191&(D=(D=D+Math.imul(ua,Xh)|0)+Math.imul(Ga,ja)|0))<<13)|0;Q=((Yc+Math.imul(Ga,Xh)|0)+(D>>>13)|0)+(pb>>>26)|0;pb&=67108863;Wc=Math.imul(O,ye);D=(D=Math.imul(O,Tg))+Math.imul(Pa,ye)|0;Yc=Math.imul(Pa,Tg);Wc=Wc+Math.imul(ea,gg)|0;D=(D=D+Math.imul(ea,Kh)|0)+Math.imul(da,gg)|0;Yc=Yc+
Math.imul(da,Kh)|0;Wc=Wc+Math.imul(S,sg)|0;D=(D=D+Math.imul(S,Hf)|0)+Math.imul(db,sg)|0;Yc=Yc+Math.imul(db,Hf)|0;Wc=Wc+Math.imul(Aa,zg)|0;D=(D=D+Math.imul(Aa,Ag)|0)+Math.imul(Z,zg)|0;Yc=Yc+Math.imul(Z,Ag)|0;Wc=Wc+Math.imul(ca,hg)|0;D=(D=D+Math.imul(ca,Ch)|0)+Math.imul(R,hg)|0;Yc=Yc+Math.imul(R,Ch)|0;qa=(Q+(Wc+Math.imul(M,ja)|0)|0)+((8191&(D=(D=D+Math.imul(M,Xh)|0)+Math.imul(H,ja)|0))<<13)|0;Q=((Yc+Math.imul(H,Xh)|0)+(D>>>13)|0)+(qa>>>26)|0;qa&=67108863;Wc=Math.imul(O,gg);D=(D=Math.imul(O,Kh))+Math.imul(Pa,
gg)|0;Yc=Math.imul(Pa,Kh);Wc=Wc+Math.imul(ea,sg)|0;D=(D=D+Math.imul(ea,Hf)|0)+Math.imul(da,sg)|0;Yc=Yc+Math.imul(da,Hf)|0;Wc=Wc+Math.imul(S,zg)|0;D=(D=D+Math.imul(S,Ag)|0)+Math.imul(db,zg)|0;Yc=Yc+Math.imul(db,Ag)|0;Wc=Wc+Math.imul(Aa,hg)|0;D=(D=D+Math.imul(Aa,Ch)|0)+Math.imul(Z,hg)|0;Yc=Yc+Math.imul(Z,Ch)|0;ba=(Q+(Wc+Math.imul(ca,ja)|0)|0)+((8191&(D=(D=D+Math.imul(ca,Xh)|0)+Math.imul(R,ja)|0))<<13)|0;Q=((Yc+Math.imul(R,Xh)|0)+(D>>>13)|0)+(ba>>>26)|0;ba&=67108863;Wc=Math.imul(O,sg);D=(D=Math.imul(O,
Hf))+Math.imul(Pa,sg)|0;Yc=Math.imul(Pa,Hf);Wc=Wc+Math.imul(ea,zg)|0;D=(D=D+Math.imul(ea,Ag)|0)+Math.imul(da,zg)|0;Yc=Yc+Math.imul(da,Ag)|0;Wc=Wc+Math.imul(S,hg)|0;D=(D=D+Math.imul(S,Ch)|0)+Math.imul(db,hg)|0;Yc=Yc+Math.imul(db,Ch)|0;ua=(Q+(Wc+Math.imul(Aa,ja)|0)|0)+((8191&(D=(D=D+Math.imul(Aa,Xh)|0)+Math.imul(Z,ja)|0))<<13)|0;Q=((Yc+Math.imul(Z,Xh)|0)+(D>>>13)|0)+(ua>>>26)|0;ua&=67108863;Wc=Math.imul(O,zg);D=(D=Math.imul(O,Ag))+Math.imul(Pa,zg)|0;Yc=Math.imul(Pa,Ag);Wc=Wc+Math.imul(ea,hg)|0;D=(D=
D+Math.imul(ea,Ch)|0)+Math.imul(da,hg)|0;Yc=Yc+Math.imul(da,Ch)|0;Ga=(Q+(Wc+Math.imul(S,ja)|0)|0)+((8191&(D=(D=D+Math.imul(S,Xh)|0)+Math.imul(db,ja)|0))<<13)|0;Q=((Yc+Math.imul(db,Xh)|0)+(D>>>13)|0)+(Ga>>>26)|0;Ga&=67108863;Wc=Math.imul(O,hg);D=(D=Math.imul(O,Ch))+Math.imul(Pa,hg)|0;Yc=Math.imul(Pa,Ch);M=(Q+(Wc+Math.imul(ea,ja)|0)|0)+((8191&(D=(D=D+Math.imul(ea,Xh)|0)+Math.imul(da,ja)|0))<<13)|0;Q=((Yc+Math.imul(da,Xh)|0)+(D>>>13)|0)+(M>>>26)|0;M&=67108863;H=(Q+Math.imul(O,ja)|0)+((8191&(D=(D=Math.imul(O,
Xh))+Math.imul(Pa,ja)|0))<<13)|0;return Q=(Math.imul(Pa,Xh)+(D>>>13)|0)+(H>>>26)|0,H&=67108863,X[0]=Dn,X[1]=xq,X[2]=pp,X[3]=uo,X[4]=Rw,X[5]=Pj,X[6]=Sw,X[7]=Tw,X[8]=Uw,X[9]=bb,X[10]=ha,X[11]=oa,X[12]=pb,X[13]=qa,X[14]=ba,X[15]=ua,X[16]=Ga,X[17]=M,X[18]=H,0!==Q&&(X[19]=Q,J.length++),J};Math.imul||(la=q);a.prototype.mulTo=function(D,Q){var J=(this||Wa).length+D.length;if(10===(this||Wa).length&&10===D.length)D=la(this||Wa,D,Q);else if(63>J)D=q(this||Wa,D,Q);else if(1024>J){J=this||Wa;Q.negative=D.negative^
J.negative;Q.length=J.length+D.length;for(var O=0,ja=0,X=0;X<Q.length-1;X++){var ha=ja;ja=0;O&=67108863;for(var bb=Math.min(X,D.length-1),pb=Math.max(0,X-J.length+1);pb<=bb;pb++){var oa=(0|J.words[X-pb])*(0|D.words[pb]),ba=67108863&oa;O=67108863&(ba=ba+O|0);ja+=(ha=(ha=ha+(oa/67108864|0)|0)+(ba>>>26)|0)>>>26;ha&=67108863}Q.words[X]=O;O=ha}D=(0!==O?Q.words[X]=O:Q.length--,Q.strip())}else J=this||Wa,D=(new r).mulp(J,D,Q);return D};r.prototype.makeRBT=function(D){for(var Q=Array(D),J=a.prototype._countBits(D)-
1,O=0;O<D;O++)Q[O]=this.revBin(O,J,D);return Q};r.prototype.revBin=function(D,Q,J){if(0===D||D===J-1)return D;for(var O=J=0;O<Q;O++)J|=(1&D)<<Q-O-1,D>>=1;return J};r.prototype.permute=function(D,Q,J,O,ja,X){for(var ha=0;ha<X;ha++)O[ha]=Q[D[ha]],ja[ha]=J[D[ha]]};r.prototype.transform=function(D,Q,J,O,ja,X){this.permute(X,D,Q,J,O,ja);for(D=1;D<ja;D<<=1){Q=D<<1;X=Math.cos(2*Math.PI/Q);for(var ha=Math.sin(2*Math.PI/Q),bb=0;bb<ja;bb+=Q)for(var pb=X,oa=ha,ba=0;ba<D;ba++){var qa=J[bb+ba],Ga=O[bb+ba],ua=
J[bb+ba+D],H=O[bb+ba+D],M=pb*ua-oa*H;H=pb*H+oa*ua;ua=M;J[bb+ba]=qa+ua;O[bb+ba]=Ga+H;J[bb+ba+D]=qa-ua;O[bb+ba+D]=Ga-H;ba!==Q&&(M=X*pb-ha*oa,oa=X*oa+ha*pb,pb=M)}}};r.prototype.guessLen13b=function(D,Q){D=1|Math.max(Q,D);Q=1&D;var J=0;for(D=D/2|0;D;D>>>=1)J++;return 1<<J+1+Q};r.prototype.conjugate=function(D,Q,J){if(!(1>=J))for(var O=0;O<J/2;O++){var ja=D[O];D[O]=D[J-O-1];D[J-O-1]=ja;ja=Q[O];Q[O]=-Q[J-O-1];Q[J-O-1]=-ja}};r.prototype.normalize13b=function(D,Q){for(var J=0,O=0;O<Q/2;O++)J=8192*Math.round(D[2*
O+1]/Q)+Math.round(D[2*O]/Q)+J,D[O]=67108863&J,J=67108864>J?0:J/67108864|0;return D};r.prototype.convert13b=function(D,Q,J,O){for(var ja=0,X=0;X<Q;X++)ja+=0|D[X],J[2*X]=8191&ja,ja>>>=13,J[2*X+1]=8191&ja,ja>>>=13;for(X=2*Q;X<O;++X)J[X]=0;c(0===ja);c(0==(-8192&ja))};r.prototype.stub=function(D){for(var Q=Array(D),J=0;J<D;J++)Q[J]=0;return Q};r.prototype.mulp=function(D,Q,J){var O=2*this.guessLen13b(D.length,Q.length),ja=this.makeRBT(O),X=this.stub(O),ha=Array(O),bb=Array(O),pb=Array(O),oa=Array(O),
ba=Array(O),qa=Array(O),Ga=J.words;Ga.length=O;this.convert13b(D.words,D.length,ha,O);this.convert13b(Q.words,Q.length,oa,O);this.transform(ha,X,bb,pb,O,ja);this.transform(oa,X,ba,qa,O,ja);for(ha=0;ha<O;ha++)oa=bb[ha]*ba[ha]-pb[ha]*qa[ha],pb[ha]=bb[ha]*qa[ha]+pb[ha]*ba[ha],bb[ha]=oa;return this.conjugate(bb,pb,O),this.transform(bb,pb,Ga,X,O,ja),this.conjugate(Ga,X,O),this.normalize13b(Ga,O),J.negative=D.negative^Q.negative,J.length=D.length+Q.length,J.strip()};a.prototype.mul=function(D){var Q=new a(null);
return Q.words=Array((this||Wa).length+D.length),this.mulTo(D,Q)};a.prototype.mulf=function(D){var Q=new a(null);Q.words=Array((this||Wa).length+D.length);var J=this||Wa;return(new r).mulp(J,D,Q)};a.prototype.imul=function(D){return this.clone().mulTo(D,this||Wa)};a.prototype.imuln=function(D){c("number"==typeof D);c(67108864>D);for(var Q=0,J=0;J<(this||Wa).length;J++){var O=(0|(this||Wa).words[J])*D,ja=(67108863&O)+(67108863&Q);Q>>=26;Q+=O/67108864|0;Q+=ja>>>26;(this||Wa).words[J]=67108863&ja}return 0!==
Q&&((this||Wa).words[J]=Q,(this||Wa).length++),this||Wa};a.prototype.muln=function(D){return this.clone().imuln(D)};a.prototype.sqr=function(){return this.mul(this||Wa)};a.prototype.isqr=function(){return this.imul(this.clone())};a.prototype.pow=function(D){for(var Q=Array(D.bitLength()),J=0;J<Q.length;J++){var O=J%26;Q[J]=(D.words[J/26|0]&1<<O)>>>O}if(0===Q.length)return new a(1);D=this||Wa;for(J=0;J<Q.length&&0===Q[J];J++,D=D.sqr());if(++J<Q.length)for(O=D.sqr();J<Q.length;J++,O=O.sqr())0!==Q[J]&&
(D=D.mul(O));return D};a.prototype.iushln=function(D){c("number"==typeof D&&0<=D);var Q=D%26,J=(D-Q)/26,O=67108863>>>26-Q<<26-Q;if(0!==Q){var ja=0;for(D=0;D<(this||Wa).length;D++){var X=(this||Wa).words[D]&O;(this||Wa).words[D]=(0|(this||Wa).words[D])-X<<Q|ja;ja=X>>>26-Q}ja&&((this||Wa).words[D]=ja,(this||Wa).length++)}if(0!==J){for(D=(this||Wa).length-1;0<=D;D--)(this||Wa).words[D+J]=(this||Wa).words[D];for(D=0;D<J;D++)(this||Wa).words[D]=0;(this||Wa).length+=J}return this.strip()};a.prototype.ishln=
function(D){return c(0===(this||Wa).negative),this.iushln(D)};a.prototype.iushrn=function(D,Q,J){c("number"==typeof D&&0<=D);Q=Q?(Q-Q%26)/26:0;var O=D%26,ja=Math.min((D-O)/26,(this||Wa).length);D=67108863^67108863>>>O<<O;if(Q-=ja,Q=Math.max(0,Q),J){for(var X=0;X<ja;X++)J.words[X]=(this||Wa).words[X];J.length=ja}if(0!==ja)if((this||Wa).length>ja)for((this||Wa).length-=ja,X=0;X<(this||Wa).length;X++)(this||Wa).words[X]=(this||Wa).words[X+ja];else(this||Wa).words[0]=0,(this||Wa).length=1;ja=0;for(X=
(this||Wa).length-1;0<=X&&(0!==ja||X>=Q);X--){var ha=0|(this||Wa).words[X];(this||Wa).words[X]=ja<<26-O|ha>>>O;ja=ha&D}return J&&0!==ja&&(J.words[J.length++]=ja),0===(this||Wa).length&&((this||Wa).words[0]=0,(this||Wa).length=1),this.strip()};a.prototype.ishrn=function(D,Q,J){return c(0===(this||Wa).negative),this.iushrn(D,Q,J)};a.prototype.shln=function(D){return this.clone().ishln(D)};a.prototype.ushln=function(D){return this.clone().iushln(D)};a.prototype.shrn=function(D){return this.clone().ishrn(D)};
a.prototype.ushrn=function(D){return this.clone().iushrn(D)};a.prototype.testn=function(D){c("number"==typeof D&&0<=D);var Q=D%26;D=(D-Q)/26;return!((this||Wa).length<=D)&&!!((this||Wa).words[D]&1<<Q)};a.prototype.imaskn=function(D){c("number"==typeof D&&0<=D);var Q=D%26;D=(D-Q)/26;if(c(0===(this||Wa).negative,"imaskn works only with positive numbers"),(this||Wa).length<=D)return this||Wa;if(0!==Q&&D++,(this||Wa).length=Math.min(D,(this||Wa).length),0!==Q)(this||Wa).words[(this||Wa).length-1]&=67108863^
67108863>>>Q<<Q;return this.strip()};a.prototype.maskn=function(D){return this.clone().imaskn(D)};a.prototype.iaddn=function(D){return c("number"==typeof D),c(67108864>D),0>D?this.isubn(-D):0!==(this||Wa).negative?1===(this||Wa).length&&(0|(this||Wa).words[0])<D?((this||Wa).words[0]=D-(0|(this||Wa).words[0]),(this||Wa).negative=0,this||Wa):((this||Wa).negative=0,this.isubn(D),(this||Wa).negative=1,this||Wa):this._iaddn(D)};a.prototype._iaddn=function(D){(this||Wa).words[0]+=D;for(D=0;D<(this||Wa).length&&
67108864<=(this||Wa).words[D];D++)(this||Wa).words[D]-=67108864,D===(this||Wa).length-1?(this||Wa).words[D+1]=1:(this||Wa).words[D+1]++;return(this||Wa).length=Math.max((this||Wa).length,D+1),this||Wa};a.prototype.isubn=function(D){if(c("number"==typeof D),c(67108864>D),0>D)return this.iaddn(-D);if(0!==(this||Wa).negative)return(this||Wa).negative=0,this.iaddn(D),(this||Wa).negative=1,this||Wa;if((this||Wa).words[0]-=D,1===(this||Wa).length&&0>(this||Wa).words[0])(this||Wa).words[0]=-(this||Wa).words[0],
(this||Wa).negative=1;else for(D=0;D<(this||Wa).length&&0>(this||Wa).words[D];D++)(this||Wa).words[D]+=67108864,--(this||Wa).words[D+1];return this.strip()};a.prototype.addn=function(D){return this.clone().iaddn(D)};a.prototype.subn=function(D){return this.clone().isubn(D)};a.prototype.iabs=function(){return(this||Wa).negative=0,this||Wa};a.prototype.abs=function(){return this.clone().iabs()};a.prototype._ishlnsubmul=function(D,Q,J){var O;this._expand(D.length+J);var ja=0;for(O=0;O<D.length;O++){var X=
(0|(this||Wa).words[O+J])+ja;ja=(0|D.words[O])*Q;ja=((X-=67108863&ja)>>26)-(ja/67108864|0);(this||Wa).words[O+J]=67108863&X}for(;O<(this||Wa).length-J;O++)ja=(X=(0|(this||Wa).words[O+J])+ja)>>26,(this||Wa).words[O+J]=67108863&X;if(0===ja)return this.strip();c(-1===ja);for(O=ja=0;O<(this||Wa).length;O++)ja=(X=-(0|(this||Wa).words[O])+ja)>>26,(this||Wa).words[O]=67108863&X;return(this||Wa).negative=1,this.strip()};a.prototype._wordDiv=function(D,Q){var J=((this||Wa).length,D.length),O=this.clone(),
ja=0|D.words[D.length-1];0!==(J=26-this._countBits(ja))&&(D=D.ushln(J),O.iushln(J),ja=0|D.words[D.length-1]);var X,ha=O.length-D.length;if("mod"!==Q){(X=new a(null)).length=ha+1;X.words=Array(X.length);for(var bb=0;bb<X.length;bb++)X.words[bb]=0}bb=O.clone()._ishlnsubmul(D,1,ha);0===bb.negative&&(O=bb,X&&(X.words[ha]=1));for(--ha;0<=ha;ha--){bb=67108864*(0|O.words[D.length+ha])+(0|O.words[D.length+ha-1]);bb=Math.min(bb/ja|0,67108863);for(O._ishlnsubmul(D,bb,ha);0!==O.negative;)bb--,O.negative=0,O._ishlnsubmul(D,
1,ha),O.isZero()||(O.negative^=1);X&&(X.words[ha]=bb)}return X&&X.strip(),O.strip(),"div"!==Q&&0!==J&&O.iushrn(J),{div:X||null,mod:O}};a.prototype.divmod=function(D,Q,J){return c(!D.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==(this||Wa).negative&&0===D.negative?(X=this.neg().divmod(D,Q),"mod"!==Q&&(O=X.div.neg()),"div"!==Q&&(ja=X.mod.neg(),J&&0!==ja.negative&&ja.iadd(D)),{div:O,mod:ja}):0===(this||Wa).negative&&0!==D.negative?(X=this.divmod(D.neg(),Q),"mod"!==Q&&(O=X.div.neg()),{div:O,
mod:X.mod}):0!=((this||Wa).negative&D.negative)?(X=this.neg().divmod(D.neg(),Q),"div"!==Q&&(ja=X.mod.neg(),J&&0!==ja.negative&&ja.isub(D)),{div:X.div,mod:ja}):D.length>(this||Wa).length||0>this.cmp(D)?{div:new a(0),mod:this||Wa}:1===D.length?"div"===Q?{div:this.divn(D.words[0]),mod:null}:"mod"===Q?{div:null,mod:new a(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new a(this.modn(D.words[0]))}:this._wordDiv(D,Q);var O,ja,X};a.prototype.div=function(D){return this.divmod(D,"div",!1).div};a.prototype.mod=
function(D){return this.divmod(D,"mod",!1).mod};a.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod};a.prototype.divRound=function(D){var Q=this.divmod(D);if(Q.mod.isZero())return Q.div;var J=0!==Q.div.negative?Q.mod.isub(D):Q.mod,O=D.ushrn(1);D=D.andln(1);J=J.cmp(O);return 0>J||1===D&&0===J?Q.div:0!==Q.div.negative?Q.div.isubn(1):Q.div.iaddn(1)};a.prototype.modn=function(D){c(67108863>=D);for(var Q=67108864%D,J=0,O=(this||Wa).length-1;0<=O;O--)J=(Q*J+(0|(this||Wa).words[O]))%D;return J};
a.prototype.idivn=function(D){c(67108863>=D);for(var Q=0,J=(this||Wa).length-1;0<=J;J--)Q=(0|(this||Wa).words[J])+67108864*Q,(this||Wa).words[J]=Q/D|0,Q%=D;return this.strip()};a.prototype.divn=function(D){return this.clone().idivn(D)};a.prototype.egcd=function(D){c(0===D.negative);c(!D.isZero());var Q=this||Wa,J=D.clone();Q=0!==Q.negative?Q.umod(D):Q.clone();D=new a(1);for(var O=new a(0),ja=new a(0),X=new a(1),ha=0;Q.isEven()&&J.isEven();)Q.iushrn(1),J.iushrn(1),++ha;for(var bb=J.clone(),pb=Q.clone();!Q.isZero();){for(var oa=
0,ba=1;0==(Q.words[0]&ba)&&26>oa;++oa,ba<<=1);if(0<oa)for(Q.iushrn(oa);0<oa--;)(D.isOdd()||O.isOdd())&&(D.iadd(bb),O.isub(pb)),D.iushrn(1),O.iushrn(1);oa=0;for(ba=1;0==(J.words[0]&ba)&&26>oa;++oa,ba<<=1);if(0<oa)for(J.iushrn(oa);0<oa--;)(ja.isOdd()||X.isOdd())&&(ja.iadd(bb),X.isub(pb)),ja.iushrn(1),X.iushrn(1);0<=Q.cmp(J)?(Q.isub(J),D.isub(ja),O.isub(X)):(J.isub(Q),ja.isub(D),X.isub(O))}return{a:ja,b:X,gcd:J.iushln(ha)}};a.prototype._invmp=function(D){c(0===D.negative);c(!D.isZero());var Q=this||
Wa,J=D.clone();Q=0!==Q.negative?Q.umod(D):Q.clone();for(var O,ja=new a(1),X=new a(0),ha=J.clone();0<Q.cmpn(1)&&0<J.cmpn(1);){for(var bb=0,pb=1;0==(Q.words[0]&pb)&&26>bb;++bb,pb<<=1);if(0<bb)for(Q.iushrn(bb);0<bb--;)ja.isOdd()&&ja.iadd(ha),ja.iushrn(1);bb=0;for(pb=1;0==(J.words[0]&pb)&&26>bb;++bb,pb<<=1);if(0<bb)for(J.iushrn(bb);0<bb--;)X.isOdd()&&X.iadd(ha),X.iushrn(1);0<=Q.cmp(J)?(Q.isub(J),ja.isub(X)):(J.isub(Q),X.isub(ja))}return 0>(O=0===Q.cmpn(1)?ja:X).cmpn(0)&&O.iadd(D),O};a.prototype.gcd=function(D){if(this.isZero())return D.abs();
if(D.isZero())return this.abs();var Q=this.clone();D=D.clone();Q.negative=0;for(var J=D.negative=0;Q.isEven()&&D.isEven();J++)Q.iushrn(1),D.iushrn(1);for(;;){for(;Q.isEven();)Q.iushrn(1);for(;D.isEven();)D.iushrn(1);var O=Q.cmp(D);if(0>O)O=Q,Q=D,D=O;else if(0===O||0===D.cmpn(1))break;Q.isub(D)}return D.iushln(J)};a.prototype.invm=function(D){return this.egcd(D).a.umod(D)};a.prototype.isEven=function(){return 0==(1&(this||Wa).words[0])};a.prototype.isOdd=function(){return 1==(1&(this||Wa).words[0])};
a.prototype.andln=function(D){return(this||Wa).words[0]&D};a.prototype.bincn=function(D){c("number"==typeof D);var Q=D%26;D=(D-Q)/26;Q=1<<Q;if((this||Wa).length<=D)return this._expand(D+1),(this||Wa).words[D]|=Q,this||Wa;for(;0!==Q&&D<(this||Wa).length;D++){var J=0|(this||Wa).words[D];Q=(J+=Q)>>>26;J&=67108863;(this||Wa).words[D]=J}return 0!==Q&&((this||Wa).words[D]=Q,(this||Wa).length++),this||Wa};a.prototype.isZero=function(){return 1===(this||Wa).length&&0===(this||Wa).words[0]};a.prototype.cmpn=
function(D){var Q=0>D;if(0!==(this||Wa).negative&&!Q)return-1;if(0===(this||Wa).negative&&Q)return 1;(this.strip(),1<(this||Wa).length)?D=1:(Q&&(D=-D),c(67108863>=D,"Number is too big"),Q=0|(this||Wa).words[0],D=Q===D?0:Q<D?-1:1);return 0!==(this||Wa).negative?0|-D:D};a.prototype.cmp=function(D){if(0!==(this||Wa).negative&&0===D.negative)return-1;if(0===(this||Wa).negative&&0!==D.negative)return 1;D=this.ucmp(D);return 0!==(this||Wa).negative?0|-D:D};a.prototype.ucmp=function(D){if((this||Wa).length>
D.length)return 1;if((this||Wa).length<D.length)return-1;for(var Q=0,J=(this||Wa).length-1;0<=J;J--){var O=0|(this||Wa).words[J],ja=0|D.words[J];if(O!==ja){O<ja?Q=-1:O>ja&&(Q=1);break}}return Q};a.prototype.gtn=function(D){return 1===this.cmpn(D)};a.prototype.gt=function(D){return 1===this.cmp(D)};a.prototype.gten=function(D){return 0<=this.cmpn(D)};a.prototype.gte=function(D){return 0<=this.cmp(D)};a.prototype.ltn=function(D){return-1===this.cmpn(D)};a.prototype.lt=function(D){return-1===this.cmp(D)};
a.prototype.lten=function(D){return 0>=this.cmpn(D)};a.prototype.lte=function(D){return 0>=this.cmp(D)};a.prototype.eqn=function(D){return 0===this.cmpn(D)};a.prototype.eq=function(D){return 0===this.cmp(D)};a.red=function(D){return new C(D)};a.prototype.toRed=function(D){return c(!(this||Wa).red,"Already a number in reduction context"),c(0===(this||Wa).negative,"red works only with positives"),D.convertTo(this||Wa)._forceRed(D)};a.prototype.fromRed=function(){return c((this||Wa).red,"fromRed works only with numbers in reduction context"),
(this||Wa).red.convertFrom(this||Wa)};a.prototype._forceRed=function(D){return(this||Wa).red=D,this||Wa};a.prototype.forceRed=function(D){return c(!(this||Wa).red,"Already a number in reduction context"),this._forceRed(D)};a.prototype.redAdd=function(D){return c((this||Wa).red,"redAdd works only with red numbers"),(this||Wa).red.add(this||Wa,D)};a.prototype.redIAdd=function(D){return c((this||Wa).red,"redIAdd works only with red numbers"),(this||Wa).red.iadd(this||Wa,D)};a.prototype.redSub=function(D){return c((this||
Wa).red,"redSub works only with red numbers"),(this||Wa).red.sub(this||Wa,D)};a.prototype.redISub=function(D){return c((this||Wa).red,"redISub works only with red numbers"),(this||Wa).red.isub(this||Wa,D)};a.prototype.redShl=function(D){return c((this||Wa).red,"redShl works only with red numbers"),(this||Wa).red.shl(this||Wa,D)};a.prototype.redMul=function(D){return c((this||Wa).red,"redMul works only with red numbers"),(this||Wa).red._verify2(this||Wa,D),(this||Wa).red.mul(this||Wa,D)};a.prototype.redIMul=
function(D){return c((this||Wa).red,"redMul works only with red numbers"),(this||Wa).red._verify2(this||Wa,D),(this||Wa).red.imul(this||Wa,D)};a.prototype.redSqr=function(){return c((this||Wa).red,"redSqr works only with red numbers"),(this||Wa).red._verify1(this||Wa),(this||Wa).red.sqr(this||Wa)};a.prototype.redISqr=function(){return c((this||Wa).red,"redISqr works only with red numbers"),(this||Wa).red._verify1(this||Wa),(this||Wa).red.isqr(this||Wa)};a.prototype.redSqrt=function(){return c((this||
Wa).red,"redSqrt works only with red numbers"),(this||Wa).red._verify1(this||Wa),(this||Wa).red.sqrt(this||Wa)};a.prototype.redInvm=function(){return c((this||Wa).red,"redInvm works only with red numbers"),(this||Wa).red._verify1(this||Wa),(this||Wa).red.invm(this||Wa)};a.prototype.redNeg=function(){return c((this||Wa).red,"redNeg works only with red numbers"),(this||Wa).red._verify1(this||Wa),(this||Wa).red.neg(this||Wa)};a.prototype.redPow=function(D){return c((this||Wa).red&&!D.red,"redPow(normalNum)"),
(this||Wa).red._verify1(this||Wa),(this||Wa).red.pow(this||Wa,D)};var wa={k256:null,p224:null,p192:null,p25519:null};u.prototype._tmp=function(){var D=new a(null);return D.words=Array(Math.ceil((this||Wa).n/13)),D};u.prototype.ireduce=function(D){do{this.split(D,(this||Wa).tmp);var Q=(D=(D=this.imulK(D)).iadd((this||Wa).tmp)).bitLength()}while(Q>(this||Wa).n);Q=Q<(this||Wa).n?-1:D.ucmp((this||Wa).p);return 0===Q?(D.words[0]=0,D.length=1):0<Q?D.isub((this||Wa).p):D.strip(),D};u.prototype.split=function(D,
Q){D.iushrn((this||Wa).n,0,Q)};u.prototype.imulK=function(D){return D.imul((this||Wa).k)};l(v,u);v.prototype.split=function(D,Q){for(var J=Math.min(D.length,9),O=0;O<J;O++)Q.words[O]=D.words[O];if(Q.length=J,9>=D.length)return D.words[0]=0,D.length=1,void 0;J=D.words[9];Q.words[Q.length++]=4194303&J;for(O=10;O<D.length;O++)Q=0|D.words[O],D.words[O-10]=(4194303&Q)<<4|J>>>22,J=Q;J>>>=22;D.words[O-10]=J;0===J&&10<D.length?D.length-=10:D.length-=9};v.prototype.imulK=function(D){D.words[D.length]=0;D.words[D.length+
1]=0;D.length+=2;for(var Q=0,J=0;J<D.length;J++){var O=0|D.words[J];Q+=977*O;D.words[J]=67108863&Q;Q=64*O+(Q/67108864|0)}return 0===D.words[D.length-1]&&(D.length--,0===D.words[D.length-1]&&D.length--),D};l(y,u);l(z,u);l(A,u);A.prototype.imulK=function(D){for(var Q=0,J=0;J<D.length;J++){Q=19*(0|D.words[J])+Q;var O=67108863&Q;Q>>>=26;D.words[J]=O}return 0!==Q&&(D.words[D.length++]=Q),D};a._prime=function(D){if(wa[D])return wa[D];if("k256"===D)var Q=new v;else if("p224"===D)Q=new y;else if("p192"===
D)Q=new z;else{if("p25519"!==D)throw Error("Unknown prime "+D);Q=new A}return wa[D]=Q,Q};C.prototype._verify1=function(D){c(0===D.negative,"red works only with positives");c(D.red,"red works only with red numbers")};C.prototype._verify2=function(D,Q){c(0==(D.negative|Q.negative),"red works only with positives");c(D.red&&D.red===Q.red,"red works only with red numbers")};C.prototype.imod=function(D){return(this||Wa).prime?(this||Wa).prime.ireduce(D)._forceRed(this||Wa):D.umod((this||Wa).m)._forceRed(this||
Wa)};C.prototype.neg=function(D){return D.isZero()?D.clone():(this||Wa).m.sub(D)._forceRed(this||Wa)};C.prototype.add=function(D,Q){this._verify2(D,Q);D=D.add(Q);return 0<=D.cmp((this||Wa).m)&&D.isub((this||Wa).m),D._forceRed(this||Wa)};C.prototype.iadd=function(D,Q){this._verify2(D,Q);D=D.iadd(Q);return 0<=D.cmp((this||Wa).m)&&D.isub((this||Wa).m),D};C.prototype.sub=function(D,Q){this._verify2(D,Q);D=D.sub(Q);return 0>D.cmpn(0)&&D.iadd((this||Wa).m),D._forceRed(this||Wa)};C.prototype.isub=function(D,
Q){this._verify2(D,Q);D=D.isub(Q);return 0>D.cmpn(0)&&D.iadd((this||Wa).m),D};C.prototype.shl=function(D,Q){return this._verify1(D),this.imod(D.ushln(Q))};C.prototype.imul=function(D,Q){return this._verify2(D,Q),this.imod(D.imul(Q))};C.prototype.mul=function(D,Q){return this._verify2(D,Q),this.imod(D.mul(Q))};C.prototype.isqr=function(D){return this.imul(D,D.clone())};C.prototype.sqr=function(D){return this.mul(D,D)};C.prototype.sqrt=function(D){if(D.isZero())return D.clone();var Q=(this||Wa).m.andln(3);
if(c(1==Q%2),3===Q)return Q=(this||Wa).m.add(new a(1)).iushrn(2),this.pow(D,Q);for(var J=(this||Wa).m.subn(1),O=0;!J.isZero()&&0===J.andln(1);)O++,J.iushrn(1);c(!J.isZero());Q=(new a(1)).toRed(this||Wa);var ja=Q.redNeg(),X=(this||Wa).m.subn(1).iushrn(1),ha=(this||Wa).m.bitLength();for(ha=(new a(2*ha*ha)).toRed(this||Wa);0!==this.pow(ha,X).cmp(ja);)ha.redIAdd(ja);X=this.pow(ha,J);ja=this.pow(D,J.addn(1).iushrn(1));D=this.pow(D,J);for(J=O;0!==D.cmp(Q);){ha=D;for(O=0;0!==ha.cmp(Q);O++)ha=ha.redSqr();
c(O<J);X=this.pow(X,(new a(1)).iushln(J-O-1));ja=ja.redMul(X);X=X.redSqr();D=D.redMul(X);J=O}return ja};C.prototype.invm=function(D){D=D._invmp((this||Wa).m);return 0!==D.negative?(D.negative=0,this.imod(D).redNeg()):this.imod(D)};C.prototype.pow=function(D,Q){if(Q.isZero())return(new a(1)).toRed(this||Wa);if(0===Q.cmpn(1))return D.clone();var J=Array(16);J[0]=(new a(1)).toRed(this||Wa);J[1]=D;for(var O=2;O<J.length;O++)J[O]=this.mul(J[O-1],D);D=J[0];var ja=0,X=0,ha=Q.bitLength()%26;0===ha&&(ha=26);
for(O=Q.length-1;0<=O;O--){var bb=Q.words[O];for(--ha;0<=ha;ha--){var pb=bb>>ha&1;D!==J[0]&&(D=this.sqr(D));0!==pb||0!==ja?(ja<<=1,ja|=pb,(4===++X||0===O&&0===ha)&&(D=this.mul(D,J[ja]),X=0,ja=0)):X=0}ha=26}return D};C.prototype.convertTo=function(D){var Q=D.umod((this||Wa).m);return Q===D?Q.clone():Q};C.prototype.convertFrom=function(D){D=D.clone();return D.red=null,D};a.mont=function(D){return new G(D)};l(G,C);G.prototype.convertTo=function(D){return this.imod(D.ushln((this||Wa).shift))};G.prototype.convertFrom=
function(D){D=this.imod(D.mul((this||Wa).rinv));return D.red=null,D};G.prototype.imul=function(D,Q){if(D.isZero()||Q.isZero())return D.words[0]=0,D.length=1,D;D=D.imul(Q);Q=D.maskn((this||Wa).shift).mul((this||Wa).minv).imaskn((this||Wa).shift).mul((this||Wa).m);Q=D=D.isub(Q).iushrn((this||Wa).shift);return 0<=D.cmp((this||Wa).m)?Q=D.isub((this||Wa).m):0>D.cmpn(0)&&(Q=D.iadd((this||Wa).m)),Q._forceRed(this||Wa)};G.prototype.mul=function(D,Q){if(D.isZero()||Q.isZero())return(new a(0))._forceRed(this||
Wa);D=D.mul(Q);Q=D.maskn((this||Wa).shift).mul((this||Wa).minv).imaskn((this||Wa).shift).mul((this||Wa).m);Q=D=D.isub(Q).iushrn((this||Wa).shift);return 0<=D.cmp((this||Wa).m)?Q=D.isub((this||Wa).m):0>D.cmpn(0)&&(Q=D.iadd((this||Wa).m)),Q._forceRed(this||Wa)};G.prototype.invm=function(D){return this.imod(D._invmp((this||Wa).m).mul((this||Wa).r2))._forceRed(this||Wa)}}(b3,a3);var Sk=b3.exports,KJ,LQ,c3=Object.freeze({}),aH="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global;
if((KJ=function(n){return LQ||(LQ=new sw(null)),LQ.generate(n)}).Rand=sw,sw.prototype.generate=function(n){return this._rand(n)},sw.prototype._rand=function(n){if((this||aH).rand.getBytes)return(this||aH).rand.getBytes(n);n=new Uint8Array(n);for(var b=0;b<n.length;b++)n[b]=(this||aH).rand.getByte();return n},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?sw.prototype._rand=function(n){n=new Uint8Array(n);return self.crypto.getRandomValues(n),n}:self.msCrypto&&self.msCrypto.getRandomValues?
sw.prototype._rand=function(n){n=new Uint8Array(n);return self.msCrypto.getRandomValues(n),n}:"object"==typeof window&&(sw.prototype._rand=function(){throw Error("Not implemented yet");});else try{if("function"!=typeof c3.randomBytes)throw Error("Not supported");sw.prototype._rand=function(n){return c3.randomBytes(n)}}catch(n){}var aX="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,gz=Sk,E9=KJ;tw.create=function(n){return new tw(n)};tw.prototype._randbelow=function(n){var b=
n.bitLength();b=Math.ceil(b/8);do var c=new gz((this||aX).rand.generate(b));while(0<=c.cmp(n));return c};tw.prototype._randrange=function(n,b){b=b.sub(n);return n.add(this._randbelow(b))};tw.prototype.test=function(n,b,c){var l=n.bitLength(),a=gz.mont(n),f=(new gz(1)).toRed(a);b||(b=Math.max(1,l/48|0));l=n.subn(1);for(var m=0;!l.testn(m);m++);n=n.shrn(m);for(var q=l.toRed(a);0<b;b--){var r=this._randrange(new gz(2),l);c&&c(r);r=r.toRed(a).redPow(n);if(0!==r.cmp(f)&&0!==r.cmp(q)){for(var u=1;u<m;u++){if(0===
(r=r.redSqr()).cmp(f))return!1;if(0===r.cmp(q))break}if(u===m)return!1}}return!0};tw.prototype.getDivisor=function(n,b){var c=n.bitLength(),l=gz.mont(n),a=(new gz(1)).toRed(l);b||(b=Math.max(1,c/48|0));c=n.subn(1);for(var f=0;!c.testn(f);f++);for(var m=n.shrn(f),q=c.toRed(l);0<b;b--){var r=this._randrange(new gz(2),c),u=n.gcd(r);if(0!==u.cmpn(1))return u;r=r.toRed(l).redPow(m);if(0!==r.cmp(a)&&0!==r.cmp(q)){for(u=1;u<f;u++){if(0===(r=r.redSqr()).cmp(a))return r.fromRed().subn(1).gcd(n);if(0===r.cmp(q))break}if(u===
f)return r.redSqr().fromRed().subn(1).gcd(n)}}return!1};var F9=Xw;eD.simpleSieve=PM;eD.fermatTest=RM;var bn=Sk,K9=new bn(24),cX=new tw,G9=new bn(1),SM=new bn(2),H9=new bn(5),I9=(new bn(16),new bn(8),new bn(10)),J9=new bn(3),L9=(new bn(7),new bn(11)),bX=new bn(4),QM=(new bn(12),null),$h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,ct=$g.Buffer,dq=Sk,d3=new tw,Iha=new dq(24),Jha=new dq(11),Kha=new dq(10),Lha=new dq(3),Mha=new dq(7),LJ={};Object.defineProperty(Er.prototype,
"verifyError",{enumerable:!0,get:function(){if("number"!=typeof(this||$h)._primeCode){var n=(this||$h).__prime;var b=(this||$h).__gen.toString("hex"),c=[b,n.toString(16)].join("_");if(c in LJ)n=LJ[c];else{var l,a=0;if(!n.isEven()&&eD.simpleSieve&&eD.fermatTest(n)&&d3.test(n)){switch(d3.test(n.shrn(1))||(a+=2),b){case "02":n.mod(Iha).cmp(Jha)&&(a+=8);break;case "05":(l=n.mod(Kha)).cmp(Lha)&&l.cmp(Mha)&&(a+=8);break;default:a+=4}n=(LJ[c]=a,a)}else n=(a+=1,a+="02"===b||"05"===b?8:4,LJ[c]=a,a)}(this||
$h)._primeCode=n}return(this||$h)._primeCode}});Er.prototype.generateKeys=function(){return(this||$h)._priv||((this||$h)._priv=new dq(Xw((this||$h)._primeLen))),(this||$h)._pub=(this||$h)._gen.toRed((this||$h)._prime).redPow((this||$h)._priv).fromRed(),this.getPublicKey()};Er.prototype.computeSecret=function(n){n=(new dq(n)).toRed((this||$h)._prime).redPow((this||$h)._priv).fromRed();n=new ct(n.toArray());var b=this.getPrime();n.length<b.length&&(b=new ct(b.length-n.length),b.fill(0),n=ct.concat([b,
n]));return n};Er.prototype.getPublicKey=function(n){return bH((this||$h)._pub,n)};Er.prototype.getPrivateKey=function(n){return bH((this||$h)._priv,n)};Er.prototype.getPrime=function(n){return bH((this||$h).__prime,n)};Er.prototype.getGenerator=function(n){return bH((this||$h)._gen,n)};Er.prototype.setGenerator=function(n,b){return b=b||"utf8",ct.isBuffer(n)||(n=new ct(n,b)),(this||$h).__gen=n,(this||$h)._gen=new dq(n),this||$h};var e3,f3,g3,$w=$g.Buffer,h3={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},
modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},
modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},
modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},
modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},
modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},
modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}},
Nha={binary:!0,hex:!0,base64:!0};var Oha=e3=f3=function(n){var b=new $w(h3[n].prime,"hex");n=new $w(h3[n].gen,"hex");return new Er(b,n)};var Pha=g3=function f(b,c,l,a){return $w.isBuffer(c)||void 0===Nha[c]?f(b,"binary",c,l):(c=c||"binary",a=a||"binary",l=l||new $w([2]),$w.isBuffer(l)||(l=new $w(l,a)),"number"==typeof b?new Er(eD(b,l),l,!0):($w.isBuffer(b)||(b=new $w(b,c)),new Er(b,l,!0)))};var O9=$g.Buffer,uw=Sk,eX=Xw;cH.getr=dX;var ax={toArray:function(b,c){if(Array.isArray(b))return b.slice();
if(!b)return[];var l=[];if("string"!=typeof b){for(c=0;c<b.length;c++)l[c]=0|b[c];return l}if("hex"===c)for(0!=(b=b.replace(/[^a-z0-9]+/gi,"")).length%2&&(b="0"+b),c=0;c<b.length;c+=2)l.push(parseInt(b[c]+b[c+1],16));else for(c=0;c<b.length;c++){var a=b.charCodeAt(c),f=a>>8;a&=255;f?l.push(f,a):l.push(a)}return l}};ax.zero2=fX;ax.toHex=gX;ax.encode=function(b,c){return"hex"===c?gX(b):b};var th={},Qha=Sk;th.assert=jq;th.toArray=ax.toArray;th.zero2=ax.zero2;th.toHex=ax.toHex;th.encode=ax.encode;th.getNAF=
function(b,c,l){l=Array(Math.max(b.bitLength(),l)+1);l.fill(0);c=1<<c+1;b=b.clone();for(var a=0;a<l.length;a++){var f,m=b.andln(c-1);b.isOdd()?(f=m>(c>>1)-1?(c>>1)-m:m,b.isubn(f)):f=0;l[a]=f;b.iushrn(1)}return l};th.getJSF=function(b,c){var l=[[],[]];b=b.clone();c=c.clone();for(var a=0,f=0;0<b.cmpn(-a)||0<c.cmpn(-f);){var m;var q=b.andln(3)+a&3;var r=c.andln(3)+f&3;var u=(3===q&&(q=-1),3===r&&(r=-1),0==(1&q))?0:3!==(m=b.andln(7)+a&7)&&5!==m||2!==r?q:-q;q=(l[0].push(u),0==(1&r))?0:3!==(m=c.andln(7)+
f&7)&&5!==m||2!==q?r:-r;l[1].push(q);2*a===u+1&&(a=1-a);2*f===q+1&&(f=1-f);b.iushrn(1);c.iushrn(1)}return l};th.cachedProperty=function(b,c,l){var a="_"+c;b.prototype[c]=function(){return void 0!==this[a]?this[a]:this[a]=l.call(this)}};th.parseBytes=function(b){return"string"==typeof b?th.toArray(b,"hex"):b};th.intFromLE=function(b){return new Qha(b,"hex","le")};var dH=Sk,P9=th.assert;vy.prototype._importDER=function(b,c){b=th.toArray(b,c);var l=new Q9;if(48!==b[l.place++]||TM(b,l)+l.place!==b.length||
2!==b[l.place++])return!1;var a=TM(b,l);c=b.slice(l.place,a+l.place);if(l.place+=a,2!==b[l.place++])return!1;a=TM(b,l);if(b.length!==a+l.place)return!1;b=b.slice(l.place,a+l.place);return 0===c[0]&&128&c[1]&&(c=c.slice(1)),0===b[0]&&128&b[1]&&(b=b.slice(1)),this.r=new dH(c),this.s=new dH(b),this.recoveryParam=null,!0};vy.prototype.toDER=function(b){var c=this.r.toArray(),l=this.s.toArray();128&c[0]&&(c=[0].concat(c));128&l[0]&&(l=[0].concat(l));c=hX(c);for(l=hX(l);!(l[0]||128&l[1]);)l=l.slice(1);
var a=[2];UM(a,c.length);(a=a.concat(c)).push(2);UM(a,l.length);c=a.concat(l);l=[48];return UM(l,c.length),l=l.concat(c),th.encode(l,b)};var af={},Rha=jq;af.inherits=jh;af.toArray=function(b,c){if(Array.isArray(b))return b.slice();if(!b)return[];var l=[];if("string"==typeof b)if(c){if("hex"===c)for(0!=(b=b.replace(/[^a-z0-9]+/gi,"")).length%2&&(b="0"+b),a=0;a<b.length;a+=2)l.push(parseInt(b[a]+b[a+1],16))}else for(var a=c=0;a<b.length;a++){var f=b.charCodeAt(a);if(128>f)l[c++]=f;else if(2048>f)l[c++]=
f>>6|192,l[c++]=63&f|128;else{var m=b,q=a;55296!=(64512&m.charCodeAt(q))||0>q||q+1>=m.length||56320!=(64512&m.charCodeAt(q+1))?(l[c++]=f>>12|224,l[c++]=f>>6&63|128,l[c++]=63&f|128):(f=65536+((1023&f)<<10)+(1023&b.charCodeAt(++a)),l[c++]=f>>18|240,l[c++]=f>>12&63|128,l[c++]=f>>6&63|128,l[c++]=63&f|128)}}else for(a=0;a<b.length;a++)l[a]=0|b[a];return l};af.toHex=function(b){for(var c="",l=0;l<b.length;l++)c+=jX(b[l].toString(16));return c};af.htonl=iX;af.toHex32=function(b,c){for(var l="",a=0;a<b.length;a++){var f=
b[a];"little"===c&&(f=iX(f));l+=kX(f.toString(16))}return l};af.zero2=jX;af.zero8=kX;af.join32=function(b,c,l,a){l-=c;Rha(0==l%4);l=Array(l/4);for(var f=0;f<l.length;f++,c+=4)l[f]=("big"===a?b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3]:b[c+3]<<24|b[c+2]<<16|b[c+1]<<8|b[c])>>>0;return l};af.split32=function(b,c){for(var l=Array(4*b.length),a=0,f=0;a<b.length;a++,f+=4){var m=b[a];"big"===c?(l[f]=m>>>24,l[f+1]=m>>>16&255,l[f+2]=m>>>8&255,l[f+3]=255&m):(l[f+3]=m>>>24,l[f+2]=m>>>16&255,l[f+1]=m>>>8&255,l[f]=255&
m)}return l};af.rotr32=function(b,c){return b>>>c|b<<32-c};af.rotl32=function(b,c){return b<<c|b>>>32-c};af.sum32=function(b,c){return b+c>>>0};af.sum32_3=function(b,c,l){return b+c+l>>>0};af.sum32_4=function(b,c,l,a){return b+c+l+a>>>0};af.sum32_5=function(b,c,l,a,f){return b+c+l+a+f>>>0};af.sum64=function(b,c,l,a){var f=a+b[c+1]>>>0;b[c]=(f<a?1:0)+l+b[c]>>>0;b[c+1]=f};af.sum64_hi=function(b,c,l,a){return(c+a>>>0<c?1:0)+b+l>>>0};af.sum64_lo=function(b,c,l,a){return c+a>>>0};af.sum64_4_hi=function(b,
c,l,a,f,m,q,r){var u=0,v=c;return u+=(v=v+a>>>0)<c?1:0,u+=(v=v+m>>>0)<m?1:0,b+l+f+q+(u+(v+r>>>0<r?1:0))>>>0};af.sum64_4_lo=function(b,c,l,a,f,m,q,r){return c+a+m+r>>>0};af.sum64_5_hi=function(b,c,l,a,f,m,q,r,u,v){var y=0,z=c;return y+=(z=z+a>>>0)<c?1:0,y+=(z=z+m>>>0)<m?1:0,y+=(z=z+r>>>0)<r?1:0,b+l+f+q+u+(y+(z+v>>>0<v?1:0))>>>0};af.sum64_5_lo=function(b,c,l,a,f,m,q,r,u,v){return c+a+m+r+v>>>0};af.rotr64_hi=function(b,c,l){return(c<<32-l|b>>>l)>>>0};af.rotr64_lo=function(b,c,l){return(b<<32-l|c>>>l)>>>
0};af.shr64_hi=function(b,c,l){return b>>>l};af.shr64_lo=function(b,c,l){return(b<<32-l|c>>>l)>>>0};var AB={},Sha=jq;AB.BlockHash=eH;eH.prototype.update=function(b,c){if(b=af.toArray(b,c),this.pending?this.pending=this.pending.concat(b):this.pending=b,this.pendingTotal+=b.length,this.pending.length>=this._delta8)for(c=(b=this.pending).length%this._delta8,this.pending=b.slice(b.length-c,b.length),0===this.pending.length&&(this.pending=null),b=af.join32(b,0,b.length-c,this.endian),c=0;c<b.length;c+=
this._delta32)this._update(b,c,c+this._delta32);return this};eH.prototype.digest=function(b){return this.update(this._pad()),Sha(null===this.pending),this._digest(b)};eH.prototype._pad=function(){var b=this.pendingTotal,c=this._delta8,l=c-(b+this.padLength)%c;c=Array(l+this.padLength);c[0]=128;for(var a=1;a<l;a++)c[a]=0;if(b<<=3,"big"===this.endian){for(l=8;l<this.padLength;l++)c[a++]=0;c[a++]=0;c[a++]=0;c[a++]=0;c[a++]=0;c[a++]=b>>>24&255;c[a++]=b>>>16&255;c[a++]=b>>>8&255;c[a++]=255&b}else for(c[a++]=
255&b,c[a++]=b>>>8&255,c[a++]=b>>>16&255,c[a++]=b>>>24&255,c[a++]=0,c[a++]=0,c[a++]=0,c[a++]=0,l=8;l<this.padLength;l++)c[a++]=0;return c};var Tha=jq,Dt=af.rotr64_hi,Et=af.rotr64_lo,i3=af.shr64_hi,j3=af.shr64_lo,bx=af.sum64,MQ=af.sum64_hi,NQ=af.sum64_lo,Uha=af.sum64_4_hi,Vha=af.sum64_4_lo,Wha=af.sum64_5_hi,Xha=af.sum64_5_lo,lX=AB.BlockHash,R9=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,
3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,
338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,
2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,
1607167915,987167468,1816402316,1246189591];af.inherits(eq,lX);eq.blockSize=1024;eq.outSize=512;eq.hmacStrength=192;eq.padLength=128;eq.prototype._prepareBlock=function(b,c){for(var l=this.W,a=0;32>a;a++)l[a]=b[c+a];for(;a<l.length;a+=2){b=l[a-4];c=l[a-3];c=Dt(b,c,19)^Dt(c,b,29)^i3(b,c,6);b=(0>c&&(c+=4294967296),c);c=l[a-4];var f=l[a-3];f=Et(c,f,19)^Et(f,c,29)^j3(c,f,6);c=(0>f&&(f+=4294967296),f);f=l[a-14];var m=l[a-13];var q=l[a-30];var r=l[a-29];r=Dt(q,r,1)^Dt(q,r,8)^i3(q,r,7);q=(0>r&&(r+=4294967296),
r);r=l[a-30];var u=l[a-29];u=Et(r,u,1)^Et(r,u,8)^j3(r,u,7);r=(0>u&&(u+=4294967296),u);u=l[a-32];var v=l[a-31];l[a]=Uha(b,c,f,m,q,r,u,v);l[a+1]=Vha(b,c,f,m,q,r,u,v)}};eq.prototype._update=function(b,c){this._prepareBlock(b,c);b=this.W;c=this.h[0];var l=this.h[1],a=this.h[2],f=this.h[3],m=this.h[4],q=this.h[5],r=this.h[6],u=this.h[7],v=this.h[8],y=this.h[9],z=this.h[10],A=this.h[11],C=this.h[12],G=this.h[13],F=this.h[14],N=this.h[15];Tha(this.k.length===b.length);for(var L=0;L<b.length;L+=2){var W=
v;var la=y;W=Dt(W,la,14)^Dt(W,la,18)^Dt(la,W,9);la=(0>W&&(W+=4294967296),W);W=v;var wa=y;W=Et(W,wa,14)^Et(W,wa,18)^Et(wa,W,9);var D=(0>W&&(W+=4294967296),W);W=v&z^~v&C;wa=(0>W&&(W+=4294967296),W);W=y&A^~y&G;var Q=(0>W&&(W+=4294967296),W);var J=this.k[L],O=this.k[L+1],ja=b[L],X=b[L+1];W=Wha(F,N,la,D,wa,Q,J,O,ja,X);wa=Xha(F,N,la,D,wa,Q,J,O,ja,X);F=c;N=l;N=Dt(F,N,28)^Dt(N,F,2)^Dt(N,F,7);F=(0>N&&(N+=4294967296),N);N=c;la=l;la=Et(N,la,28)^Et(la,N,2)^Et(la,N,7);N=(0>la&&(la+=4294967296),la);D=c&a^c&m^a&
m;la=(0>D&&(D+=4294967296),D);Q=l&f^l&q^f&q;D=(0>Q&&(Q+=4294967296),Q);Q=MQ(F,N,la,D);la=NQ(F,N,la,D);F=C;N=G;C=z;G=A;z=v;A=y;v=MQ(r,u,W,wa);y=NQ(u,u,W,wa);r=m;u=q;m=a;q=f;a=c;f=l;c=MQ(W,wa,Q,la);l=NQ(W,wa,Q,la)}bx(this.h,0,c,l);bx(this.h,2,a,f);bx(this.h,4,m,q);bx(this.h,6,r,u);bx(this.h,8,v,y);bx(this.h,10,z,A);bx(this.h,12,C,G);bx(this.h,14,F,N)};eq.prototype._digest=function(b){return"hex"===b?af.toHex32(this.h,"big"):af.split32(this.h,"big")};var Ft=af.rotr32,Yha=jq,Yr=af.sum32,Zha=af.sum32_4,
$ha=af.sum32_5,mX=AB.BlockHash,S9=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,
3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];af.inherits(Fr,mX);Fr.blockSize=512;Fr.outSize=256;Fr.hmacStrength=192;Fr.padLength=64;Fr.prototype._update=function(b,c){for(var l=this.W,a=0;16>a;a++)l[a]=b[c+a];for(;a<l.length;a++){b=a;c=l[a-2];c=Ft(c,17)^Ft(c,19)^c>>>10;var f=l[a-7];var m=l[a-15];m=Ft(m,7)^Ft(m,18)^m>>>3;l[b]=Zha(c,
f,m,l[a-16])}b=this.h[0];c=this.h[1];f=this.h[2];m=this.h[3];var q=this.h[4],r=this.h[5],u=this.h[6],v=this.h[7];Yha(this.k.length===l.length);for(a=0;a<l.length;a++){var y=v;v=q;v=Ft(v,6)^Ft(v,11)^Ft(v,25);y=$ha(y,v,q&r^~q&u,this.k[a],l[a]);v=b;v=Ft(v,2)^Ft(v,13)^Ft(v,22);var z=Yr(v,b&c^b&f^c&f);v=u;u=r;r=q;q=Yr(m,y);m=f;f=c;c=b;b=Yr(y,z)}this.h[0]=Yr(this.h[0],b);this.h[1]=Yr(this.h[1],c);this.h[2]=Yr(this.h[2],f);this.h[3]=Yr(this.h[3],m);this.h[4]=Yr(this.h[4],q);this.h[5]=Yr(this.h[5],r);this.h[6]=
Yr(this.h[6],u);this.h[7]=Yr(this.h[7],v)};Fr.prototype._digest=function(b){return"hex"===b?af.toHex32(this.h,"big"):af.split32(this.h,"big")};var OQ=af.rotl32,AE=af.sum32,aia=af.sum32_5,nX=AB.BlockHash,bia=[1518500249,1859775393,2400959708,3395469782];af.inherits(dt,nX);dt.blockSize=512;dt.outSize=160;dt.hmacStrength=80;dt.padLength=64;dt.prototype._update=function(b,c){for(var l=this.W,a=0;16>a;a++)l[a]=b[c+a];for(;a<l.length;a++)l[a]=OQ(l[a-3]^l[a-8]^l[a-14]^l[a-16],1);b=this.h[0];c=this.h[1];
var f=this.h[2],m=this.h[3],q=this.h[4];for(a=0;a<l.length;a++){var r=~~(a/20);r=aia(OQ(b,5),0===r?c&f^~c&m:1===r||3===r?c^f^m:2===r?c&f^c&m^f&m:void 0,q,l[a],bia[r]);q=m;m=f;f=OQ(c,30);c=b;b=r}this.h[0]=AE(this.h[0],b);this.h[1]=AE(this.h[1],c);this.h[2]=AE(this.h[2],f);this.h[3]=AE(this.h[3],m);this.h[4]=AE(this.h[4],q)};dt.prototype._digest=function(b){return"hex"===b?af.toHex32(this.h,"big"):af.split32(this.h,"big")};var oX=Fr;af.inherits(Ou,oX);Ou.blockSize=512;Ou.outSize=224;Ou.hmacStrength=
192;Ou.padLength=64;Ou.prototype._digest=function(b){return"hex"===b?af.toHex32(this.h.slice(0,7),"big"):af.split32(this.h.slice(0,7),"big")};var pX=eq;af.inherits(Pu,pX);Pu.blockSize=1024;Pu.outSize=384;Pu.hmacStrength=192;Pu.padLength=128;Pu.prototype._digest=function(b){return"hex"===b?af.toHex32(this.h.slice(0,12),"big"):af.split32(this.h.slice(0,12),"big")};var BB={};BB.sha1=dt;BB.sha224=Ou;BB.sha256=Fr;BB.sha384=Pu;BB.sha512=eq;var k3={},MJ=af.rotl32,l3=af.sum32,BE=af.sum32_3,m3=af.sum32_4,
qX=AB.BlockHash;af.inherits(et,qX);k3.ripemd160=et;et.blockSize=512;et.outSize=160;et.hmacStrength=192;et.padLength=64;et.prototype._update=function(b,c){for(var l=this.h[0],a=this.h[1],f=this.h[2],m=this.h[3],q=this.h[4],r=l,u=a,v=f,y=m,z=q,A=0;80>A;A++){var C=l3(MJ(m3(l,rX(A,a,f,m),b[cia[A]+c],15>=A?0:31>=A?1518500249:47>=A?1859775393:63>=A?2400959708:2840853838),dia[A]),q);l=q;q=m;m=MJ(f,10);f=a;a=C;C=l3(MJ(m3(r,rX(79-A,u,v,y),b[eia[A]+c],15>=A?1352829926:31>=A?1548603684:47>=A?1836072691:63>=
A?2053994217:0),fia[A]),z);r=z;z=y;y=MJ(v,10);v=u;u=C}C=BE(this.h[1],f,y);this.h[1]=BE(this.h[2],m,z);this.h[2]=BE(this.h[3],q,r);this.h[3]=BE(this.h[4],l,u);this.h[4]=BE(this.h[0],a,v);this.h[0]=C};et.prototype._digest=function(b){return"hex"===b?af.toHex32(this.h,"little"):af.split32(this.h,"little")};var cia=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,
13],eia=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],dia=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],fia=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,
8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],T9=af,gia=jq;AA.prototype._init=function(b){b.length>this.blockSize&&(b=(new this.Hash).update(b).digest());gia(b.length<=this.blockSize);for(var c=b.length;c<this.blockSize;c++)b.push(0);for(c=0;c<b.length;c++)b[c]^=54;this.inner=(new this.Hash).update(b);for(c=0;c<b.length;c++)b[c]^=106;this.outer=(new this.Hash).update(b)};AA.prototype.update=function(b,c){return this.inner.update(b,c),
this};AA.prototype.digest=function(b){return this.outer.update(this.inner.digest()),this.outer.digest(b)};var rj={};rj.utils=af;rj.common=AB;rj.sha=BB;rj.ripemd=k3;rj.hmac=AA;rj.sha1=rj.sha.sha1;rj.sha256=rj.sha.sha256;rj.sha224=rj.sha.sha224;rj.sha384=rj.sha.sha384;rj.sha512=rj.sha.sha512;rj.ripemd160=rj.ripemd.ripemd160;var wy=ax,sX=jq;Qu.prototype._init=function(b,c,l){b=b.concat(c).concat(l);this.K=Array(this.outLen/8);this.V=Array(this.outLen/8);for(c=0;c<this.V.length;c++)this.K[c]=0,this.V[c]=
1;this._update(b);this._reseed=1;this.reseedInterval=281474976710656};Qu.prototype._hmac=function(){return new rj.hmac(this.hash,this.K)};Qu.prototype._update=function(b){var c=this._hmac().update(this.V).update([0]);b&&(c=c.update(b));this.K=c.digest();this.V=this._hmac().update(this.V).digest();b&&(this.K=this._hmac().update(this.V).update([1]).update(b).digest(),this.V=this._hmac().update(this.V).digest())};Qu.prototype.reseed=function(b,c,l,a){"string"!=typeof c&&(a=l,l=c,c=null);b=wy.toArray(b,
c);l=wy.toArray(l,a);sX(b.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(b.concat(l||[]));this._reseed=1};Qu.prototype.generate=function(b,c,l,a){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!=typeof c&&(a=l,l=c,c=null);l&&(l=wy.toArray(l,a||"hex"),this._update(l));for(a=[];a.length<b;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);b=a.slice(0,b);return this._update(l),this._reseed++,wy.encode(b,c)};
var xy=Sk,NJ=th.getNAF,hia=th.getJSF,OJ=th.assert;Gr.prototype.point=function(){throw Error("Not implemented");};Gr.prototype.validate=function(){throw Error("Not implemented");};Gr.prototype._fixedNafMul=function(b,c){OJ(b.precomputed);b=b._getDoubles();var l=NJ(c,1,this._bitLength),a=(1<<b.step+1)-(0==b.step%2?2:1);a/=3;for(var f=[],m=0;m<l.length;m+=b.step){var q=0;for(c=m+b.step-1;c>=m;c--)q=(q<<1)+l[c];f.push(q)}c=this.jpoint(null,null,null);for(l=this.jpoint(null,null,null);0<a;a--){for(m=0;m<
f.length;m++)(q=f[m])===a?l=l.mixedAdd(b.points[m]):q===-a&&(l=l.mixedAdd(b.points[m].neg()));c=c.add(l)}return c.toP()};Gr.prototype._wnafMul=function(b,c){var l=b._getNAFPoints(4),a=l.points;l=NJ(c,l.wnd,this._bitLength);for(var f=this.jpoint(null,null,null),m=l.length-1;0<=m;m--){for(c=0;0<=m&&0===l[m];m--)c++;if(0<=m&&c++,f=f.dblp(c),0>m)break;c=l[m];OJ(0!==c);f="affine"===b.type?0<c?f.mixedAdd(a[c-1>>1]):f.mixedAdd(a[-c-1>>1].neg()):0<c?f.add(a[c-1>>1]):f.add(a[-c-1>>1].neg())}return"affine"===
b.type?f.toP():f};Gr.prototype._wnafMulAdd=function(b,c,l,a,f){for(var m=this._wnafT1,q=this._wnafT2,r=this._wnafT3,u=0,v=0;v<a;v++){var y=(F=c[v])._getNAFPoints(b);m[v]=y.wnd;q[v]=y.points}for(v=a-1;1<=v;v-=2){y=v-1;var z=v;if(1===m[y]&&1===m[z]){var A=[c[y],null,null,c[z]];0===c[y].y.cmp(c[z].y)?(A[1]=c[y].add(c[z]),A[2]=c[y].toJ().mixedAdd(c[z].neg())):0===c[y].y.cmp(c[z].y.redNeg())?(A[1]=c[y].toJ().mixedAdd(c[z]),A[2]=c[y].add(c[z].neg())):(A[1]=c[y].toJ().mixedAdd(c[z]),A[2]=c[y].toJ().mixedAdd(c[z].neg()));
var C=[-3,-1,-5,-7,0,7,5,1,3],G=hia(l[y],l[z]);u=Math.max(G[0].length,u);r[y]=Array(u);r[z]=Array(u);for(b=0;b<u;b++)r[y][b]=C[3*((0|G[0][b])+1)+((0|G[1][b])+1)],r[z][b]=0,q[y]=A}else r[y]=NJ(l[y],m[y],this._bitLength),r[z]=NJ(l[z],m[z],this._bitLength),u=Math.max(r[y].length,u),u=Math.max(r[z].length,u)}c=this.jpoint(null,null,null);l=this._wnafT4;for(v=u;0<=v;v--){for(u=0;0<=v;){m=!0;for(b=0;b<a;b++)l[b]=0|r[b][v],0!==l[b]&&(m=!1);if(!m)break;u++;v--}if(0<=v&&u++,c=c.dblp(u),0>v)break;for(b=0;b<
a;b++){var F;u=l[b];0!==u&&(0<u?F=q[b][u-1>>1]:0>u&&(F=q[b][-u-1>>1].neg()),c="affine"===F.type?c.mixedAdd(F):c.add(F))}}for(v=0;v<a;v++)q[v]=null;return f?c:c.toP()};Gr.BasePoint=fq;fq.prototype.eq=function(){throw Error("Not implemented");};fq.prototype.validate=function(){return this.curve.validate(this)};Gr.prototype.decodePoint=function(b,c){b=th.toArray(b,c);c=this.p.byteLength();if((4===b[0]||6===b[0]||7===b[0])&&b.length-1==2*c)return 6===b[0]?OJ(0==b[b.length-1]%2):7===b[0]&&OJ(1==b[b.length-
1]%2),this.point(b.slice(1,1+c),b.slice(1+c,1+2*c));if((2===b[0]||3===b[0])&&b.length-1===c)return this.pointFromX(b.slice(1,1+c),3===b[0]);throw Error("Unknown point format");};fq.prototype.encodeCompressed=function(b){return this.encode(b,!0)};fq.prototype._encode=function(b){var c=this.curve.p.byteLength(),l=this.getX().toArray("be",c);return b?[this.getY().isEven()?2:3].concat(l):[4].concat(l,this.getY().toArray("be",c))};fq.prototype.encode=function(b,c){return th.encode(this._encode(c),b)};
fq.prototype.precompute=function(b){if(this.precomputed)return this;var c={doubles:null,naf:null,beta:null};return c.naf=this._getNAFPoints(8),c.doubles=this._getDoubles(4,b),c.beta=this._getBeta(),this.precomputed=c,this};fq.prototype._hasDoubles=function(b){if(!this.precomputed)return!1;var c=this.precomputed.doubles;return!!c&&c.points.length>=Math.ceil((b.bitLength()+1)/c.step)};fq.prototype._getDoubles=function(b,c){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;
for(var l=[this],a=this,f=0;f<c;f+=b){for(var m=0;m<b;m++)a=a.dbl();l.push(a)}return{step:b,points:l}};fq.prototype._getNAFPoints=function(b){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var c=[this],l=(1<<b)-1,a=1===l?null:this.dbl(),f=1;f<l;f++)c[f]=c[f-1].add(a);return{wnd:b,points:c}};fq.prototype._getBeta=function(){return null};fq.prototype.dblp=function(b){for(var c=this,l=0;l<b;l++)c=c.dbl();return c};var kk=Sk,PQ=jh,BA=Gr,iia=th.assert;PQ(gq,BA);gq.prototype._getEndomorphism=
function(b){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){if(b.beta)var c=(new kk(b.beta,16)).toRed(this.red);else c=this._getEndoRoots(this.p),c=(c=0>c[0].cmp(c[1])?c[0]:c[1]).toRed(this.red);if(b.lambda)var l=new kk(b.lambda,16);else{var a=this._getEndoRoots(this.n);0===this.g.mul(a[0]).x.cmp(this.g.x.redMul(c))?l=a[0]:(l=a[1],iia(0===this.g.mul(l).x.cmp(this.g.x.redMul(c))))}return{beta:c,lambda:l,basis:b.basis?b.basis.map(function(f){return{a:new kk(f.a,16),b:new kk(f.b,16)}}):this._getEndoBasis(l)}}};
gq.prototype._getEndoRoots=function(b){var c=b===this.p?this.red:kk.mont(b),l=(new kk(2)).toRed(c).redInvm();b=l.redNeg();c=(new kk(3)).toRed(c).redNeg().redSqrt().redMul(l);return[b.redAdd(c).fromRed(),b.redSub(c).fromRed()]};gq.prototype._getEndoBasis=function(b){for(var c,l,a,f,m,q,r,u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),v=this.n.clone(),y=new kk(1),z=new kk(0),A=new kk(0),C=new kk(1),G=0;0!==b.cmpn(0);){var F=v.div(b);r=v.sub(F.mul(b));q=A.sub(F.mul(y));F=C.sub(F.mul(z));if(!a&&0>r.cmp(u))c=
m.neg(),l=y,a=r.neg(),f=q;else if(a&&2==++G)break;m=r;v=b;b=r;A=y;y=q;C=z;z=F}m=r.neg();r=a.sqr().add(f.sqr());return 0<=m.sqr().add(q.sqr()).cmp(r)&&(m=c,q=l),a.negative&&(a=a.neg(),f=f.neg()),m.negative&&(m=m.neg(),q=q.neg()),[{a:a,b:f},{a:m,b:q}]};gq.prototype._endoSplit=function(b){var c=this.endo.basis,l=c[0],a=c[1],f=a.b.mul(b).divRound(this.n),m=l.b.neg().mul(b).divRound(this.n);c=f.mul(l.a);var q=m.mul(a.a);l=f.mul(l.b);a=m.mul(a.b);return{k1:b.sub(c).sub(q),k2:l.add(a).neg()}};gq.prototype.pointFromX=
function(b,c){(b=new kk(b,16)).red||(b=b.toRed(this.red));var l=b.redSqr().redMul(b).redIAdd(b.redMul(this.a)).redIAdd(this.b),a=l.redSqrt();if(0!==a.redSqr().redSub(l).cmp(this.zero))throw Error("invalid point");l=a.fromRed().isOdd();return(c&&!l||!c&&l)&&(a=a.redNeg()),this.point(b,a)};gq.prototype.validate=function(b){if(b.inf)return!0;var c=b.x;b=b.y;var l=this.a.redMul(c);c=c.redSqr().redMul(c).redIAdd(l).redIAdd(this.b);return 0===b.redSqr().redISub(c).cmpn(0)};gq.prototype._endoWnafMulAdd=
function(b,c,l){for(var a=this._endoWnafT1,f=this._endoWnafT2,m=0;m<b.length;m++){var q=this._endoSplit(c[m]),r=b[m],u=r._getBeta();q.k1.negative&&(q.k1.ineg(),r=r.neg(!0));q.k2.negative&&(q.k2.ineg(),u=u.neg(!0));a[2*m]=r;a[2*m+1]=u;f[2*m]=q.k1;f[2*m+1]=q.k2}b=this._wnafMulAdd(1,a,f,2*m,l);for(c=0;c<2*m;c++)a[c]=null,f[c]=null;return b};PQ(Ul,BA.BasePoint);gq.prototype.point=function(b,c,l){return new Ul(this,b,c,l)};gq.prototype.pointFromJSON=function(b,c){return Ul.fromJSON(this,b,c)};Ul.prototype._getBeta=
function(){if(this.curve.endo){var b=this.precomputed;if(b&&b.beta)return b.beta;var c=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(b){var l=this.curve,a=function(f){return l.point(f.x.redMul(l.endo.beta),f.y)};b.beta=c;c.precomputed={beta:null,naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(a)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(a)}}}return c}};Ul.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&
{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Ul.fromJSON=function(b,c,l){function a(m){return b.point(m[0],m[1],l)}"string"==typeof c&&(c=JSON.parse(c));var f=b.point(c[0],c[1],l);if(!c[2])return f;c=c[2];return f.precomputed={beta:null,doubles:c.doubles&&{step:c.doubles.step,points:[f].concat(c.doubles.points.map(a))},naf:c.naf&&{wnd:c.naf.wnd,
points:[f].concat(c.naf.points.map(a))}},f};Ul.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Ul.prototype.isInfinity=function(){return this.inf};Ul.prototype.add=function(b){if(this.inf)return b;if(b.inf)return this;if(this.eq(b))return this.dbl();if(this.neg().eq(b)||0===this.x.cmp(b.x))return this.curve.point(null,null);var c=this.y.redSub(b.y);0!==c.cmpn(0)&&(c=c.redMul(this.x.redSub(b.x).redInvm()));
b=c.redSqr().redISub(this.x).redISub(b.x);c=c.redMul(this.x.redSub(b)).redISub(this.y);return this.curve.point(b,c)};Ul.prototype.dbl=function(){if(this.inf)return this;var b=this.y.redAdd(this.y);if(0===b.cmpn(0))return this.curve.point(null,null);var c=this.curve.a,l=this.x.redSqr();b=b.redInvm();l=l.redAdd(l).redIAdd(l).redIAdd(c).redMul(b);c=l.redSqr().redISub(this.x.redAdd(this.x));l=l.redMul(this.x.redSub(c)).redISub(this.y);return this.curve.point(c,l)};Ul.prototype.getX=function(){return this.x.fromRed()};
Ul.prototype.getY=function(){return this.y.fromRed()};Ul.prototype.mul=function(b){return b=new kk(b,16),this.isInfinity()?this:this._hasDoubles(b)?this.curve._fixedNafMul(this,b):this.curve.endo?this.curve._endoWnafMulAdd([this],[b]):this.curve._wnafMul(this,b)};Ul.prototype.mulAdd=function(b,c,l){c=[this,c];b=[b,l];return this.curve.endo?this.curve._endoWnafMulAdd(c,b):this.curve._wnafMulAdd(1,c,b,2)};Ul.prototype.jmulAdd=function(b,c,l){c=[this,c];b=[b,l];return this.curve.endo?this.curve._endoWnafMulAdd(c,
b,!0):this.curve._wnafMulAdd(1,c,b,2,!0)};Ul.prototype.eq=function(b){return this===b||this.inf===b.inf&&(this.inf||0===this.x.cmp(b.x)&&0===this.y.cmp(b.y))};Ul.prototype.neg=function(b){if(this.inf)return this;var c=this.curve.point(this.x,this.y.redNeg());if(b&&this.precomputed){b=this.precomputed;var l=function(a){return a.neg()};c.precomputed={naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(l)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(l)}}}return c};Ul.prototype.toJ=
function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)};PQ(tm,BA.BasePoint);gq.prototype.jpoint=function(b,c,l){return new tm(this,b,c,l)};tm.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var b=this.z.redInvm(),c=b.redSqr(),l=this.x.redMul(c);b=this.y.redMul(c).redMul(b);return this.curve.point(l,b)};tm.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};tm.prototype.add=function(b){if(this.isInfinity())return b;
if(b.isInfinity())return this;var c=b.z.redSqr(),l=this.z.redSqr(),a=this.x.redMul(c),f=b.x.redMul(l);c=this.y.redMul(c.redMul(b.z));l=b.y.redMul(l.redMul(this.z));f=a.redSub(f);l=c.redSub(l);if(0===f.cmpn(0))return 0!==l.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var m=f.redSqr(),q=m.redMul(f);m=a.redMul(m);a=l.redSqr().redIAdd(q).redISub(m).redISub(m);c=l.redMul(m.redISub(a)).redISub(c.redMul(q));b=this.z.redMul(b.z).redMul(f);return this.curve.jpoint(a,c,b)};tm.prototype.mixedAdd=function(b){if(this.isInfinity())return b.toJ();
if(b.isInfinity())return this;var c=this.z.redSqr(),l=this.x,a=b.x.redMul(c),f=this.y;b=b.y.redMul(c).redMul(this.z);a=l.redSub(a);b=f.redSub(b);if(0===a.cmpn(0))return 0!==b.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var m=a.redSqr();c=m.redMul(a);m=l.redMul(m);l=b.redSqr().redIAdd(c).redISub(m).redISub(m);f=b.redMul(m.redISub(l)).redISub(f.redMul(c));a=this.z.redMul(a);return this.curve.jpoint(l,f,a)};tm.prototype.dblp=function(b){if(0===b||this.isInfinity())return this;if(!b)return this.dbl();
if(this.curve.zeroA||this.curve.threeA){for(var c=this,l=0;l<b;l++)c=c.dbl();return c}c=this.curve.a;var a=this.curve.tinv,f=this.x;l=this.y;var m=this.z,q=m.redSqr().redSqr(),r=l.redAdd(l);for(l=0;l<b;l++){var u=f.redSqr(),v=r.redSqr(),y=v.redSqr();u=u.redAdd(u).redIAdd(u).redIAdd(c.redMul(q));v=f.redMul(v);f=u.redSqr().redISub(v.redAdd(v));v=v.redISub(f);u=u.redMul(v);u=u.redIAdd(u).redISub(y);m=r.redMul(m);l+1<b&&(q=q.redMul(y));r=u}return this.curve.jpoint(f,r.redMul(a),m)};tm.prototype.dbl=function(){return this.isInfinity()?
this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};tm.prototype._zeroDbl=function(){if(this.zOne){var b=this.x.redSqr();var c=this.y.redSqr();var l=c.redSqr();c=this.x.redAdd(c).redSqr().redISub(b).redISub(l);c=c.redIAdd(c);b=b.redAdd(b).redIAdd(b);var a=b.redSqr().redISub(c).redISub(c),f=l.redIAdd(l);f=(f=f.redIAdd(f)).redIAdd(f);l=a;b=b.redMul(c.redISub(a)).redISub(f);c=this.y.redAdd(this.y)}else{a=this.x.redSqr();b=this.y.redSqr();l=b.redSqr();b=this.x.redAdd(b).redSqr().redISub(a).redISub(l);
b=b.redIAdd(b);a=a.redAdd(a).redIAdd(a);f=a.redSqr();var m=l.redIAdd(l);m=(m=m.redIAdd(m)).redIAdd(m);l=f.redISub(b).redISub(b);b=a.redMul(b.redISub(l)).redISub(m);c=(c=this.y.redMul(this.z)).redIAdd(c)}return this.curve.jpoint(l,b,c)};tm.prototype._threeDbl=function(){var b;if(this.zOne){var c=this.x.redSqr();var l=this.y.redSqr();var a=l.redSqr();l=this.x.redAdd(l).redSqr().redISub(c).redISub(a);l=l.redIAdd(l);var f=c.redAdd(c).redIAdd(c).redIAdd(this.curve.a);c=b=f.redSqr().redISub(l).redISub(l);
a=a.redIAdd(a);a=(a=a.redIAdd(a)).redIAdd(a);a=f.redMul(l.redISub(b)).redISub(a);b=this.y.redAdd(this.y)}else b=this.z.redSqr(),l=this.y.redSqr(),c=this.x.redMul(l),a=this.x.redSub(b).redMul(this.x.redAdd(b)),a=a.redAdd(a).redIAdd(a),f=c.redIAdd(c),c=(f=f.redIAdd(f)).redAdd(f),c=a.redSqr().redISub(c),b=this.y.redAdd(this.z).redSqr().redISub(l).redISub(b),l=l.redSqr(),l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l),a=a.redMul(f.redISub(c)).redISub(l);return this.curve.jpoint(c,a,b)};tm.prototype._dbl=
function(){var b=this.curve.a,c=this.x,l=this.y,a=this.z,f=a.redSqr().redSqr(),m=c.redSqr(),q=l.redSqr();b=m.redAdd(m).redIAdd(m).redIAdd(b.redMul(f));c=c.redAdd(c);f=c.redIAdd(c).redMul(q);c=b.redSqr().redISub(f.redAdd(f));f=f.redISub(c);q=q.redSqr();q=(q=(q=q.redIAdd(q)).redIAdd(q)).redIAdd(q);q=b.redMul(f).redISub(q);l=l.redAdd(l).redMul(a);return this.curve.jpoint(c,q,l)};tm.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var b=this.x.redSqr(),c=this.y.redSqr(),l=this.z.redSqr(),
a=c.redSqr(),f=b.redAdd(b).redIAdd(b),m=f.redSqr();b=this.x.redAdd(c).redSqr().redISub(b).redISub(a);var q=(b=(b=(b=b.redIAdd(b)).redAdd(b).redIAdd(b)).redISub(m)).redSqr();a=a.redIAdd(a);a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);f=f.redIAdd(b).redSqr().redISub(m).redISub(q).redISub(a);c=c.redMul(f);c=(c=c.redIAdd(c)).redIAdd(c);c=this.x.redMul(q).redISub(c);c=(c=c.redIAdd(c)).redIAdd(c);a=this.y.redMul(f.redMul(a.redISub(f)).redISub(b.redMul(q)));a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);l=
this.z.redAdd(b).redSqr().redISub(l).redISub(q);return this.curve.jpoint(c,a,l)};tm.prototype.mul=function(b,c){return b=new kk(b,c),this.curve._wnafMul(this,b)};tm.prototype.eq=function(b){if("affine"===b.type)return this.eq(b.toJ());if(this===b)return!0;var c=this.z.redSqr(),l=b.z.redSqr();if(0!==this.x.redMul(l).redISub(b.x.redMul(c)).cmpn(0))return!1;c=c.redMul(this.z);l=l.redMul(b.z);return 0===this.y.redMul(l).redISub(b.y.redMul(c)).cmpn(0)};tm.prototype.eqXToP=function(b){var c=this.z.redSqr(),
l=b.toRed(this.curve.red).redMul(c);if(0===this.x.cmp(l))return!0;b=b.clone();for(c=this.curve.redN.redMul(c);;){if(b.iadd(this.curve.n),0<=b.cmp(this.curve.p))return!1;if(l.redIAdd(c),0===this.x.cmp(l))return!0}};tm.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};tm.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var DA=Sk,n3=jh,fH=Gr;n3(CA,fH);CA.prototype.validate=
function(b){b=b.normalize().x;var c=b.redSqr();b=c.redMul(b).redAdd(c.redMul(this.a)).redAdd(b);return 0===b.redSqrt().redSqr().cmp(b)};n3(Vl,fH.BasePoint);CA.prototype.decodePoint=function(b,c){return this.point(th.toArray(b,c),1)};CA.prototype.point=function(b,c){return new Vl(this,b,c)};CA.prototype.pointFromJSON=function(b){return Vl.fromJSON(this,b)};Vl.prototype.precompute=function(){};Vl.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Vl.fromJSON=function(b,
c){return new Vl(b,c[0],c[1]||b.one)};Vl.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Vl.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};Vl.prototype.dbl=function(){var b=this.x.redAdd(this.z).redSqr(),c=this.x.redSub(this.z).redSqr(),l=b.redSub(c);b=b.redMul(c);c=l.redMul(c.redAdd(this.curve.a24.redMul(l)));return this.curve.point(b,c)};Vl.prototype.add=function(){throw Error("Not supported on Montgomery curve");
};Vl.prototype.diffAdd=function(b,c){var l=this.x.redAdd(this.z),a=this.x.redSub(this.z),f=b.x.redAdd(b.z);b=b.x.redSub(b.z).redMul(l);f=f.redMul(a);a=c.z.redMul(b.redAdd(f).redSqr());c=c.x.redMul(b.redISub(f).redSqr());return this.curve.point(a,c)};Vl.prototype.mul=function(b){var c=b.clone();b=this;for(var l=this.curve.point(null,null),a=[];0!==c.cmpn(0);c.iushrn(1))a.push(c.andln(1));for(c=a.length-1;0<=c;c--)0===a[c]?(b=b.diffAdd(l,this),l=l.dbl()):(l=b.diffAdd(l,this),b=b.dbl());return l};Vl.prototype.mulAdd=
function(){throw Error("Not supported on Montgomery curve");};Vl.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve");};Vl.prototype.eq=function(b){return 0===this.getX().cmp(b.getX())};Vl.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Vl.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Ru=Sk,o3=jh,gH=Gr,U9=th.assert;o3(ft,gH);ft.prototype._mulA=function(b){return this.mOneA?b.redNeg():this.a.redMul(b)};
ft.prototype._mulC=function(b){return this.oneC?b:this.c.redMul(b)};ft.prototype.jpoint=function(b,c,l,a){return this.point(b,c,l,a)};ft.prototype.pointFromX=function(b,c){(b=new Ru(b,16)).red||(b=b.toRed(this.red));var l=b.redSqr(),a=this.c2.redSub(this.a.redMul(l));l=this.one.redSub(this.c2.redMul(this.d).redMul(l));l=a.redMul(l.redInvm());a=l.redSqrt();if(0!==a.redSqr().redSub(l).cmp(this.zero))throw Error("invalid point");l=a.fromRed().isOdd();return(c&&!l||!c&&l)&&(a=a.redNeg()),this.point(b,
a)};ft.prototype.pointFromY=function(b,c){(b=new Ru(b,16)).red||(b=b.toRed(this.red));var l=b.redSqr(),a=l.redSub(this.c2);l=l.redMul(this.d).redMul(this.c2).redSub(this.a);a=a.redMul(l.redInvm());if(0===a.cmp(this.zero)){if(c)throw Error("invalid point");return this.point(this.zero,b)}l=a.redSqrt();if(0!==l.redSqr().redSub(a).cmp(this.zero))throw Error("invalid point");return l.fromRed().isOdd()!==c&&(l=l.redNeg()),this.point(l,b)};ft.prototype.validate=function(b){if(b.isInfinity())return!0;b.normalize();
var c=b.x.redSqr(),l=b.y.redSqr();b=c.redMul(this.a).redAdd(l);c=this.c2.redMul(this.one.redAdd(this.d.redMul(c).redMul(l)));return 0===b.cmp(c)};o3(wj,gH.BasePoint);ft.prototype.pointFromJSON=function(b){return wj.fromJSON(this,b)};ft.prototype.point=function(b,c,l,a){return new wj(this,b,c,l,a)};wj.fromJSON=function(b,c){return new wj(b,c[0],c[1],c[2])};wj.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,
2)+" z: "+this.z.fromRed().toString(16,2)+">"};wj.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))};wj.prototype._extDbl=function(){var b=this.x.redSqr(),c=this.y.redSqr(),l=this.z.redSqr();l=l.redIAdd(l);var a=this.curve._mulA(b),f=this.x.redAdd(this.y).redSqr().redISub(b).redISub(c);b=a.redAdd(c);l=b.redSub(l);var m=a.redSub(c);c=f.redMul(l);a=b.redMul(m);f=f.redMul(m);b=l.redMul(b);return this.curve.point(c,a,b,f)};wj.prototype._projDbl=
function(){var b=this.x.redAdd(this.y).redSqr();var c=this.x.redSqr();var l=this.y.redSqr();if(this.curve.twisted){var a=(m=this.curve._mulA(c)).redAdd(l);if(this.zOne)b=b.redSub(c).redSub(l).redMul(a.redSub(this.curve.two)),c=a.redMul(m.redSub(l)),a=a.redSqr().redSub(a).redSub(a);else{var f=this.z.redSqr();f=a.redSub(f).redISub(f);b=b.redSub(c).redISub(l).redMul(f);c=a.redMul(m.redSub(l));a=a.redMul(f)}}else{var m=c.redAdd(l);f=this.curve._mulC(this.z).redSqr();f=m.redSub(f).redSub(f);b=this.curve._mulC(b.redISub(m)).redMul(f);
c=this.curve._mulC(m).redMul(c.redISub(l));a=m.redMul(f)}return this.curve.point(b,c,a)};wj.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};wj.prototype._extAdd=function(b){var c=this.y.redSub(this.x).redMul(b.y.redSub(b.x)),l=this.y.redAdd(this.x).redMul(b.y.redAdd(b.x)),a=this.t.redMul(this.curve.dd).redMul(b.t),f=this.z.redMul(b.z.redAdd(b.z)),m=l.redSub(c);b=f.redSub(a);a=f.redAdd(a);f=l.redAdd(c);c=m.redMul(b);l=a.redMul(f);m=m.redMul(f);
b=b.redMul(a);return this.curve.point(c,l,b,m)};wj.prototype._projAdd=function(b){var c,l,a=this.z.redMul(b.z),f=a.redSqr(),m=this.x.redMul(b.x),q=this.y.redMul(b.y),r=this.curve.d.redMul(m).redMul(q),u=f.redSub(r);f=f.redAdd(r);b=this.x.redAdd(this.y).redMul(b.x.redAdd(b.y)).redISub(m).redISub(q);b=a.redMul(u).redMul(b);return this.curve.twisted?(c=a.redMul(f).redMul(q.redSub(this.curve._mulA(m))),l=u.redMul(f)):(c=a.redMul(f).redMul(q.redSub(m)),l=this.curve._mulC(u).redMul(f)),this.curve.point(b,
c,l)};wj.prototype.add=function(b){return this.isInfinity()?b:b.isInfinity()?this:this.curve.extended?this._extAdd(b):this._projAdd(b)};wj.prototype.mul=function(b){return this._hasDoubles(b)?this.curve._fixedNafMul(this,b):this.curve._wnafMul(this,b)};wj.prototype.mulAdd=function(b,c,l){return this.curve._wnafMulAdd(1,[this,c],[b,l],2,!1)};wj.prototype.jmulAdd=function(b,c,l){return this.curve._wnafMulAdd(1,[this,c],[b,l],2,!0)};wj.prototype.normalize=function(){if(this.zOne)return this;var b=this.z.redInvm();
return this.x=this.x.redMul(b),this.y=this.y.redMul(b),this.t&&(this.t=this.t.redMul(b)),this.z=this.curve.one,this.zOne=!0,this};wj.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};wj.prototype.getX=function(){return this.normalize(),this.x.fromRed()};wj.prototype.getY=function(){return this.normalize(),this.y.fromRed()};wj.prototype.eq=function(b){return this===b||0===this.getX().cmp(b.getX())&&0===this.getY().cmp(b.getY())};wj.prototype.eqXToP=
function(b){var c=b.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(c))return!0;b=b.clone();for(var l=this.curve.redN.redMul(this.z);;){if(b.iadd(this.curve.n),0<=b.cmp(this.curve.p))return!1;if(c.redIAdd(l),0===this.x.cmp(c))return!0}};wj.prototype.toP=wj.prototype.normalize;wj.prototype.mixedAdd=wj.prototype.add;var CB={};CB.base=Gr;CB.short=gq;CB.mont=CA;CB.edwards=ft;var jia={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],
["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],
["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],
["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],
["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],
["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],
["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],
["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],
["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],
["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],
["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],
["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],
["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],
["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],
["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],
["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],
["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},
naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],
["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],
["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],
["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],
["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],
["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],
["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],
["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],
["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],
["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],
["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],
["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],
["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],
["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],
["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],
["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],
["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],
["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],
["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],
["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],
["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],
["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],
["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],
["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],
["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],
["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],
["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],
["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],
["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],
["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],
["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],
["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}},PJ={},WM=PJ,VM=CB,uX=th.assert;WM.PresetCurve=tX;vw("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",
a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:rj.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});vw("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",
n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:rj.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});vw("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",
hash:rj.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});vw("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",
n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:rj.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});vw("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",
a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:rj.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66",
"00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});vw("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:rj.sha256,gRed:!1,g:["9"]});vw("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",
a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:rj.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{var p3=jia}catch(b){p3=void 0}vw("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",
h:"1",hash:rj.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",p3]});var kia=Sk,q3=th.assert;
Wl.fromPublic=function(b,c,l){return c instanceof Wl?c:new Wl(b,{pub:c,pubEnc:l})};Wl.fromPrivate=function(b,c,l){return c instanceof Wl?c:new Wl(b,{priv:c,privEnc:l})};Wl.prototype.validate=function(){var b=this.getPublic();return b.isInfinity()?{result:!1,reason:"Invalid public key"}:b.validate()?b.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Wl.prototype.getPublic=function(b,c){return"string"==
typeof b&&(c=b,b=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),c?this.pub.encode(c,b):this.pub};Wl.prototype.getPrivate=function(b){return"hex"===b?this.priv.toString(16,2):this.priv};Wl.prototype._importPrivate=function(b,c){this.priv=new kia(b,c||16);this.priv=this.priv.umod(this.ec.curve.n)};Wl.prototype._importPublic=function(b,c){if(b.x||b.y)return"mont"===this.ec.curve.type?q3(b.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||q3(b.x&&b.y,"Need both x and y coordinate"),
this.pub=this.ec.curve.point(b.x,b.y),void 0;this.pub=this.ec.curve.decodePoint(b,c)};Wl.prototype.derive=function(b){return b.mul(this.priv).getX()};Wl.prototype.sign=function(b,c,l){return this.ec.sign(b,this,c,l)};Wl.prototype.verify=function(b,c){return this.ec.verify(b,c,this)};Wl.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var hz=Sk,XM=PJ,vX=th.assert;hq.prototype.keyPair=function(b){return new Wl(this,
b)};hq.prototype.keyFromPrivate=function(b,c){return Wl.fromPrivate(this,b,c)};hq.prototype.keyFromPublic=function(b,c){return Wl.fromPublic(this,b,c)};hq.prototype.genKeyPair=function(b){b||(b={});b=new Qu({hash:this.hash,pers:b.pers,persEnc:b.persEnc||"utf8",entropy:b.entropy||KJ(this.hash.hmacStrength),entropyEnc:b.entropy&&b.entropyEnc||"utf8",nonce:this.n.toArray()});for(var c=this.n.byteLength(),l=this.n.sub(new hz(2));;){var a=new hz(b.generate(c));if(!(0<a.cmp(l)))return a.iaddn(1),this.keyFromPrivate(a)}};
hq.prototype._truncateToN=function(b,c){var l=8*b.byteLength()-this.n.bitLength();return 0<l&&(b=b.ushrn(l)),!c&&0<=b.cmp(this.n)?b.sub(this.n):b};hq.prototype.sign=function(b,c,l,a){"object"==typeof l&&(a=l,l=null);a||(a={});c=this.keyFromPrivate(c,l);b=this._truncateToN(new hz(b,16));var f=this.n.byteLength();l=c.getPrivate().toArray("be",f);f=b.toArray("be",f);f=new Qu({hash:this.hash,entropy:l,nonce:f,pers:a.pers,persEnc:a.persEnc||"utf8"});for(var m=this.n.sub(new hz(1)),q=0;;q++){var r=a.k?
a.k(q):new hz(f.generate(this.n.byteLength()));if(!(0>=(r=this._truncateToN(r,!0)).cmpn(1)||0<=r.cmp(m))){var u=this.g.mul(r);if(!u.isInfinity()){var v=u.getX();l=v.umod(this.n);if(0!==l.cmpn(0)&&(r=r.invm(this.n).mul(l.mul(c.getPrivate()).iadd(b)),0!==(r=r.umod(this.n)).cmpn(0)))return b=(u.getY().isOdd()?1:0)|(0!==v.cmp(l)?2:0),a.canonical&&0<r.cmp(this.nh)&&(r=this.n.sub(r),b^=1),new vy({r:l,s:r,recoveryParam:b})}}}};hq.prototype.verify=function(b,c,l,a){b=this._truncateToN(new hz(b,16));l=this.keyFromPublic(l,
a);a=(c=new vy(c,"hex")).r;c=c.s;if(0>a.cmpn(1)||0<=a.cmp(this.n)||0>c.cmpn(1)||0<=c.cmp(this.n))return!1;var f;c=c.invm(this.n);b=c.mul(b).umod(this.n);c=c.mul(a).umod(this.n);return this.curve._maxwellTrick?!(f=this.g.jmulAdd(b,l.getPublic(),c)).isInfinity()&&f.eqXToP(a):!(f=this.g.mulAdd(b,l.getPublic(),c)).isInfinity()&&0===f.getX().umod(this.n).cmp(a)};hq.prototype.recoverPubKey=function(b,c,l,a){vX((3&l)===l,"The recovery param is more than two bits");c=new vy(c,a);a=this.n;var f=new hz(b);
b=c.r;var m=c.s,q=1&l;l>>=1;if(0<=b.cmp(this.curve.p.umod(this.curve.n))&&l)throw Error("Unable to find sencond key candinate");b=l?this.curve.pointFromX(b.add(this.curve.n),q):this.curve.pointFromX(b,q);c=c.r.invm(a);l=a.sub(f).mul(c).umod(a);a=m.mul(c).umod(a);return this.g.mulAdd(l,b,a)};hq.prototype.getKeyRecoveryParam=function(b,c,l,a){if(null!==(c=new vy(c,a)).recoveryParam)return c.recoveryParam;for(a=0;4>a;a++){try{var f=this.recoverPubKey(b,c,a)}catch(m){continue}if(f.eq(l))return a}throw Error("Unable to find valid recovery factor");
};var r3=th.assert,wX=th.parseBytes,DB=th.cachedProperty;sl.fromPublic=function(b,c){return c instanceof sl?c:new sl(b,{pub:c})};sl.fromSecret=function(b,c){return c instanceof sl?c:new sl(b,{secret:c})};sl.prototype.secret=function(){return this._secret};DB(sl,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});DB(sl,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});DB(sl,"privBytes",function(){var b=this.eddsa,c=this.hash(),
l=b.encodingLength-1;b=c.slice(0,b.encodingLength);return b[0]&=248,b[l]&=127,b[l]|=64,b});DB(sl,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});DB(sl,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});DB(sl,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});sl.prototype.sign=function(b){return r3(this._secret,"KeyPair can only verify"),this.eddsa.sign(b,this)};sl.prototype.verify=function(b,c){return this.eddsa.verify(b,c,this)};
sl.prototype.getSecret=function(b){return r3(this._secret,"KeyPair is public only"),th.encode(this.secret(),b)};sl.prototype.getPublic=function(b){return th.encode(this.pubBytes(),b)};var X9=Sk,W9=th.assert,QJ=th.cachedProperty,V9=th.parseBytes;QJ(ww,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});QJ(ww,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});QJ(ww,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});QJ(ww,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});
ww.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};ww.prototype.toHex=function(){return th.encode(this.toBytes(),"hex").toUpperCase()};var $9=rj,Z9=PJ,Y9=th.assert,s3=th.parseBytes;no.prototype.sign=function(b,c){b=s3(b);var l=this.keyFromSecret(c),a=this.hashInt(l.messagePrefix(),b);c=this.g.mul(a);var f=this.encodePoint(c);b=this.hashInt(f,l.pubBytes(),b).mul(l.priv());b=a.add(b).umod(this.curve.n);return this.makeSignature({R:c,S:b,Rencoded:f})};no.prototype.verify=
function(b,c,l){b=s3(b);c=this.makeSignature(c);l=this.keyFromPublic(l);b=this.hashInt(c.Rencoded(),l.pubBytes(),b);var a=this.g.mul(c.S());return c.R().add(l.pub().mul(b)).eq(a)};no.prototype.hashInt=function(){for(var b=this.hash(),c=0;c<arguments.length;c++)b.update(arguments[c]);return th.intFromLE(b.digest()).umod(this.curve.n)};no.prototype.keyFromPublic=function(b){return sl.fromPublic(this,b)};no.prototype.keyFromSecret=function(b){return sl.fromSecret(this,b)};no.prototype.makeSignature=
function(b){return b instanceof ww?b:new ww(this,b)};no.prototype.encodePoint=function(b){var c=b.getY().toArray("le",this.encodingLength);return c[this.encodingLength-1]|=b.getX().isOdd()?128:0,c};no.prototype.decodePoint=function(b){var c=(b=th.parseBytes(b)).length-1,l=b.slice(0,c).concat(-129&b[c]);b=0!=(128&b[c]);l=th.intFromLE(l);return this.curve.pointFromY(l,b)};no.prototype.encodeInt=function(b){return b.toArray("le",this.encodingLength)};no.prototype.decodeInt=function(b){return th.intFromLE(b)};
no.prototype.isPoint=function(b){return b instanceof this.pointClass};var mv={version:"6.5.2"};mv.utils=th;mv.rand=KJ;mv.curve=CB;mv.curves=PJ;mv.ec=hq;mv.eddsa=no;var jN={},OX=!1,dp="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,tl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,AX={},lia=jh;AX.Reporter=iq;iq.prototype.isError=function(b){return b instanceof EA};iq.prototype.save=function(){var b=(this||tl)._reporterState;return{obj:b.obj,
pathLen:b.path.length}};iq.prototype.restore=function(b){var c=(this||tl)._reporterState;c.obj=b.obj;c.path=c.path.slice(0,b.pathLen)};iq.prototype.enterKey=function(b){return(this||tl)._reporterState.path.push(b)};iq.prototype.exitKey=function(b){var c=(this||tl)._reporterState;c.path=c.path.slice(0,b-1)};iq.prototype.leaveKey=function(b,c,l){var a=(this||tl)._reporterState;this.exitKey(b);null!==a.obj&&(a.obj[c]=l)};iq.prototype.path=function(){return(this||tl)._reporterState.path.join("/")};iq.prototype.enterObject=
function(){var b=(this||tl)._reporterState,c=b.obj;return b.obj={},c};iq.prototype.leaveObject=function(b){var c=(this||tl)._reporterState,l=c.obj;return c.obj=b,l};iq.prototype.error=function(b){var c=(this||tl)._reporterState,l=b instanceof EA;if(b=l?b:new EA(c.path.map(function(a){return"["+JSON.stringify(a)+"]"}).join(""),b.message||b,b.stack),!c.options.partial)throw b;return l||c.errors.push(b),b};iq.prototype.wrapResult=function(b){var c=(this||tl)._reporterState;return c.options.partial?{result:this.isError(b)?
null:b,errors:c.errors}:b};lia(EA,Error);EA.prototype.rethrow=function(b){if((this||tl).message=b+" at: "+((this||tl).path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this||tl,EA),!(this||tl).stack)try{throw Error((this||tl).message);}catch(c){(this||tl).stack=c.stack}return this||tl};var hH={},yX=!1,rg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,ZM={},BX=!1,Of="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,YM={},
zX=!1,xw={},EX=!1,$M={},DX=!1,aN={},GX=!1,yw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,dN={},IX=!1,cN="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,bN={},HX=!1,eN={},KX=!1,ul="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,hN={},MX=!1,gN="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,fN={},LX=!1,iN={},NX=!1,pk=iH(),t3=pk.define("Time",function(){this.choice({utcTime:this.utctime(),
generalTime:this.gentime()})}),mia=pk.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),QQ=pk.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),nia=pk.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(QQ),this.key("subjectPublicKey").bitstr())}),oia=pk.define("RelativeDistinguishedName",function(){this.setof(mia)}),
pia=pk.define("RDNSequence",function(){this.seqof(oia)}),u3=pk.define("Name",function(){this.choice({rdnSequence:this.use(pia)})}),qia=pk.define("Validity",function(){this.seq().obj(this.key("notBefore").use(t3),this.key("notAfter").use(t3))}),ria=pk.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),sia=pk.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),
this.key("signature").use(QQ),this.key("issuer").use(u3),this.key("validity").use(qia),this.key("subject").use(u3),this.key("subjectPublicKeyInfo").use(nia),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(ria).optional())}),tia=pk.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(sia),this.key("signatureAlgorithm").use(QQ),this.key("signatureValue").bitstr())}),
Zr={};Zr.certificate=tia;var uia=pk.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});Zr.RSAPrivateKey=uia;var via=pk.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});Zr.RSAPublicKey=
via;var wia=pk.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(v3),this.key("subjectPublicKey").bitstr())});Zr.PublicKey=wia;var v3=pk.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),xia=pk.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),
this.key("algorithm").use(v3),this.key("subjectPrivateKey").octstr())});Zr.PrivateKey=xia;var yia=pk.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});
Zr.EncryptedPrivateKey=yia;var zia=pk.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});Zr.DSAPrivateKey=zia;Zr.DSAparam=pk.define("DSAparam",function(){this.int()});var Bia=pk.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(Aia),this.key("publicKey").optional().explicit(1).bitstr())});
Zr.ECPrivateKey=Bia;var Aia=pk.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});Zr.signature=pk.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});var c$=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/=]+)[\n\r]+/m,e$=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,d$=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/=]+)-----END \1-----$/m,jH=Yh.Buffer,oo=Zr,f$={"2.16.840.1.101.3.4.1.1":"aes-128-ecb",
"2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"},h$=ep,g$=FJ,kN=Yh.Buffer;FA.signature=oo.signature;var w3={"1.3.132.0.10":"secp256k1",
"1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"},RQ={},cn=$g.Buffer,zy=L2,Cia=mv.ec,kH=Sk;(RQ=function(b,c,l,a,f){c=FA(c);if(c.curve){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong private key type");return function(m,q){var r=w3[q.curve.join(".")];if(!r)throw Error("unknown curve "+q.curve.join("."));m=(new Cia(r)).keyFromPrivate(q.privateKey).sign(m);return new cn(m.toDER())}(b,c)}if("dsa"===c.type){if("dsa"!==a)throw Error("wrong private key type");
return function(m,q,r){var u=q.params.priv_key,v=q.params.p,y=q.params.q;q=q.params.g;var z=new kH(0),A=lN(m,y).mod(y);var C=!1;for(m=PX(u,y,m,r);!1===C;){z=C=QX(y,m,r);var G=y;z=q.toRed(kH.mont(v)).redPow(z).fromRed().mod(G);0===(C=C.invm(y).imul(A.add(u.mul(z))).mod(y)).cmpn(0)&&(C=!1,z=new kH(0))}r=C;u=z.toArray();r=r.toArray();128&u[0]&&(u=[0].concat(u));128&r[0]&&(r=[0].concat(r));v=[48,u.length+r.length+4,2,u.length];return v=v.concat(u,[2,r.length],r),new cn(v)}(b,c,l)}if("rsa"!==a&&"ecdsa/rsa"!==
a)throw Error("wrong private key type");b=cn.concat([f,b]);a=c.modulus.byteLength();for(l=[0,1];b.length+l.length+1<a;)l.push(255);l.push(0);for(a=-1;++a<b.length;)l.push(b[a]);return cH(l,c)}).getKey=PX;RQ.makeKey=QX;var SQ=$g.Buffer,CE=Sk,Dia=mv.ec,lk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,RJ=$g.Buffer,SX=xE,lH=Fy,x3=jh,Eia=RQ,Fia=function(b,c,l,a,f){l=FA(l);if("ec"===l.type){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");return function(r,
u,v){var y=w3[v.data.algorithm.curve.join(".")];if(!y)throw Error("unknown curve "+v.data.algorithm.curve.join("."));return(new Dia(y)).verify(u,r,v.data.subjectPrivateKey.data)}(b,c,l)}if("dsa"===l.type){if("dsa"!==a)throw Error("wrong public key type");return function(r,u,v){var y=v.data.p,z=v.data.q,A=v.data.g;v=v.data.pub_key;var C=FA.signature.decode(r,"der");r=C.s;C=C.r;RX(r,z);RX(C,z);var G=CE.mont(y);r=r.invm(z);return 0===A.toRed(G).redPow((new CE(u)).mul(r).mod(z)).fromRed().mul(v.toRed(G).redPow(C.mul(r).mod(z)).fromRed()).mod(y).mod(z).cmp(C)}(b,
c,l)}if("rsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");c=SQ.concat([f,c]);f=l.modulus.byteLength();a=[1];for(var m=0;c.length+a.length+2<f;)a.push(255),m++;a.push(0);for(var q=-1;++q<c.length;)a.push(c[q]);a=new SQ(a);c=CE.mont(l.modulus);b=(b=(new CE(b)).toRed(c)).redPow(new CE(l.publicExponent));b=new SQ(b.fromRed().toArray());c=8>m?1:0;f=Math.min(b.length,a.length);b.length!==a.length&&(c=1);for(q=-1;++q<f;)c|=b[q]^a[q];return 0===c},Ay=M2;Object.keys(Ay).forEach(function(b){Ay[b].id=
new RJ(Ay[b].id,"hex");Ay[b.toLowerCase()]=Ay[b]});x3(hD,lH.Writable);hD.prototype._write=function(b,c,l){(this||lk)._hash.update(b);l()};hD.prototype.update=function(b,c){return"string"==typeof b&&(b=new RJ(b,c)),(this||lk)._hash.update(b),this||lk};hD.prototype.sign=function(b,c){this.end();var l=(this||lk)._hash.digest();b=Eia(l,b,(this||lk)._hashType,(this||lk)._signType,(this||lk)._tag);return c?b.toString(c):b};x3(iD,lH.Writable);iD.prototype._write=function(b,c,l){(this||lk)._hash.update(b);
l()};iD.prototype.update=function(b,c){return"string"==typeof b&&(b=new RJ(b,c)),(this||lk)._hash.update(b),this||lk};iD.prototype.verify=function(b,c,l){"string"==typeof c&&(c=new RJ(c,l));this.end();l=(this||lk)._hash.digest();return Fia(c,l,b,(this||lk)._signType,(this||lk)._tag)};var vl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Su=$g.Buffer,i$=mv,Gia=Sk,fp={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",
byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};fp.p224=fp.secp224r1;fp.p256=fp.secp256r1=fp.prime256v1;fp.p192=fp.secp192r1=fp.prime192v1;fp.p384=fp.secp384r1;fp.p521=fp.secp521r1;By.prototype.generateKeys=function(b,c){return(this||vl).keys=(this||vl).curve.genKeyPair(),this.getPublicKey(b,c)};By.prototype.computeSecret=function(b,c,l){return c=c||"utf8",Su.isBuffer(b)||(b=new Su(b,
c)),mN((this||vl).curve.keyFromPublic(b).getPublic().mul((this||vl).keys.getPrivate()).getX(),l,(this||vl).curveType.byteLength)};By.prototype.getPublicKey=function(b,c){var l=(this||vl).keys.getPublic("compressed"===c,!0);return"hybrid"===c&&(l[l.length-1]%2?l[0]=7:l[0]=6),mN(l,b)};By.prototype.getPrivateKey=function(b){return mN((this||vl).keys.getPrivate(),b)};By.prototype.setPublicKey=function(b,c){return c=c||"utf8",Su.isBuffer(b)||(b=new Su(b,c)),(this||vl).keys._importPublic(b),this||vl};By.prototype.setPrivateKey=
function(b,c){c=c||"utf8";Su.isBuffer(b)||(b=new Su(b,c));b=new Gia(b);return b=b.toString(16),(this||vl).keys=(this||vl).curve.genKeyPair(),(this||vl).keys._importPrivate(b),this||vl};var TQ=Yh.Buffer,SJ=function(b,c){for(var l,a=TQ.alloc(0),f=0;a.length<c;){l=f++;var m=TQ.allocUnsafe(4);l=(m.writeUInt32BE(l,0),m);a=TQ.concat([a,xE("sha1").update(b).update(l).digest()])}return a.slice(0,c)},TJ=function(b,c){for(var l=b.length,a=-1;++a<l;)b[a]^=c[a];return b},y3=Sk,Hia=Yh.Buffer,z3=function(b,c){return Hia.from(b.toRed(y3.mont(c.modulus)).redPow(new y3(c.publicExponent)).fromRed().toArray())},
UQ=Sk,$r=Yh.Buffer,A3=Sk,DE=Yh.Buffer,EB={publicEncrypt:function(b,c,l){var a=b.padding?b.padding:l?1:4;b=FA(b);if(4===a)c=function(f,m){f=f.modulus.byteLength();var q=m.length,r=xE("sha1").update($r.alloc(0)).digest(),u=r.length,v=2*u;if(q>f-v-2)throw Error("message too long");v=$r.alloc(f-q-v-2);var y=f-u-1;q=Xw(u);m=TJ($r.concat([r,v,$r.alloc(1,1),m],y),SJ(q,y));u=TJ(q,SJ(m,u));return new UQ($r.concat([$r.alloc(1),u,m],f))}(b,c);else if(1===a)c=function(f,m,q){var r=m.length;f=f.modulus.byteLength();
if(r>f-11)throw Error("message too long");if(q)var u=$r.alloc(f-r-3,255);else{r=f-r-3;for(var v=$r.allocUnsafe(r),y=0,z=Xw(2*r),A=0;y<r;)A===z.length&&(z=Xw(2*r),A=0),(u=z[A++])&&(v[y++]=u);u=v}return new UQ($r.concat([$r.from([0,q?1:2]),u,$r.alloc(1),m],f))}(b,c,l);else{if(3!==a)throw Error("unknown padding");if(0<=(c=new UQ(c)).cmp(b.modulus))throw Error("data too long for modulus");}return l?cH(c,b):z3(c,b)},privateDecrypt:function(b,c,l){var a=b.padding?b.padding:l?1:4;b=FA(b);var f=b.modulus.byteLength();
if(c.length>f||0<=(new A3(c)).cmp(b.modulus))throw Error("decryption error");c=l?z3(new A3(c),b):cH(c,b);var m=DE.alloc(f-c.length);if(c=DE.concat([m,c],f),4===a)return function(q,r){var u=q.modulus.byteLength(),v=xE("sha1").update(DE.alloc(0)).digest();q=v.length;if(0!==r[0])throw Error("decryption error");var y=r.slice(1,q+1);r=r.slice(q+1);y=TJ(y,SJ(r,q));u=TJ(r,SJ(y,u-q-1));r=u.slice(0,q);v=DE.from(v);r=DE.from(r);y=0;var z=v.length;v.length!==r.length&&(y++,z=Math.min(v.length,r.length));for(var A=
-1;++A<z;)y+=v[A]^r[A];if(y)throw Error("decryption error");for(;0===u[q];)q++;if(1!==u[q++])throw Error("decryption error");return u.slice(q)}(b,c);if(1===a)return function(q,r,u){q=r.slice(0,2);for(var v=2,y=0;0!==r[v++];)if(v>=r.length){y++;break}var z=r.slice(2,v-1);("0002"!==q.toString("hex")&&!u||"0001"!==q.toString("hex")&&u)&&y++;8>z.length&&y++;if(y)throw Error("decryption error");return r.slice(v)}(0,c,l);if(3===a)return c;throw Error("unknown padding");},privateEncrypt:function(b,c){return EB.publicEncrypt(b,
c,!0)},publicDecrypt:function(b,c){return EB.privateDecrypt(b,c,!0)}},UJ="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,VQ,WQ,nN=Nh,aY=Xw,B3=Yh.Buffer,YX=Yh.kMaxLength,oN=UJ.crypto||UJ.msCrypto,XX=Math.pow(2,32)-1;oN&&oN.getRandomValues||!nN.browser?(VQ=function(b,c,l,a){if(!(B3.isBuffer(b)||b instanceof UJ.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof c)a=c,c=0,l=b.length;else if("function"==typeof l)a=l,l=b.length-
c;else if("function"!=typeof a)throw new TypeError('"cb" argument must be a function');return WX(c,b.length),ZX(l,c,b.length),$X(b,c,l,a)},WQ=function(b,c,l){void 0===c&&(c=0);if(!(B3.isBuffer(b)||b instanceof UJ.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');WX(c,b.length);void 0===l&&(l=b.length-c);return ZX(l,c,b.length),$X(b,c,l)}):(VQ=VX,WQ=VX);var ig={};ig.randomBytes=ig.rng=ig.pseudoRandomBytes=ig.prng=Xw;ig.createHash=ig.Hash=xE;ig.createHmac=ig.Hmac=L2;var Iia=
Object.keys(M2),Jia="sha1 sha224 sha256 sha384 sha512 md5 rmd160".split(" ").concat(Iia);ig.getHashes=function(){return Jia};ig.pbkdf2=FJ.pbkdf2;ig.pbkdf2Sync=FJ.pbkdf2Sync;ig.Cipher=Y2;ig.createCipher=Eha;ig.Cipheriv=MM;ig.createCipheriv=MM;ig.Decipher=Z2;ig.createDecipher=Fha;ig.Decipheriv=OM;ig.createDecipheriv=OM;ig.getCiphers=$2;ig.listCiphers=Gha;ig.DiffieHellmanGroup=Oha;ig.createDiffieHellmanGroup=e3;ig.getDiffieHellman=f3;ig.createDiffieHellman=Pha;ig.DiffieHellman=g3;ig.createSign=TX;ig.Sign=
TX;ig.createVerify=UX;ig.Verify=UX;ig.createECDH=function(b){return new By(b)};ig.publicEncrypt=EB.publicEncrypt;ig.privateEncrypt=EB.privateEncrypt;ig.publicDecrypt=EB.publicDecrypt;ig.privateDecrypt=EB.privateDecrypt;ig.randomFill=VQ;ig.randomFillSync=WQ;ig.createCredentials=function(){throw Error("sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/crypto-browserify/crypto-browserify");};ig.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,
DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6};var Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.default=function(){return Kia.default.randomFillSync(Lia)};var Kia=ig&&ig.__esModule?ig:{default:ig},Lia=new Uint8Array(16),Fn={};Object.defineProperty(Fn,"__esModule",
{value:!0});Fn.default=void 0;for(var zm=[],XQ=0;256>XQ;++XQ)zm.push((XQ+256).toString(16).substr(1));Fn.default=function(b,c){c=c||0;return(zm[b[c+0]]+zm[b[c+1]]+zm[b[c+2]]+zm[b[c+3]]+"-"+zm[b[c+4]]+zm[b[c+5]]+"-"+zm[b[c+6]]+zm[b[c+7]]+"-"+zm[b[c+8]]+zm[b[c+9]]+"-"+zm[b[c+10]]+zm[b[c+11]]+zm[b[c+12]]+zm[b[c+13]]+zm[b[c+14]]+zm[b[c+15]]).toLowerCase()};var VJ={};Object.defineProperty(VJ,"__esModule",{value:!0});VJ.default=void 0;var Mia=Gt&&Gt.__esModule?Gt:{default:Gt},Nia=Fn&&Fn.__esModule?Fn:{default:Fn},
C3,YQ,ZQ=0,$Q=0;VJ.default=function(b,c,l){l=c&&l||0;var a=c||[];b=b||{};var f=b.node||C3,m=void 0!==b.clockseq?b.clockseq:YQ;if(null==f||null==m){var q=b.random||(b.rng||Mia.default)();null==f&&(f=C3=[q[0]|1,q[1],q[2],q[3],q[4],q[5]]);null==m&&(m=YQ=(q[6]<<8|q[7])&16383)}q=void 0!==b.msecs?b.msecs:Date.now();var r=void 0!==b.nsecs?b.nsecs:$Q+1,u=q-ZQ+(r-$Q)/1E4;0>u&&void 0===b.clockseq&&(m=m+1&16383);(0>u||q>ZQ)&&void 0===b.nsecs&&(r=0);if(1E4<=r)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");
ZQ=q;$Q=r;YQ=m;q+=122192928E5;b=(1E4*(q&268435455)+r)%4294967296;a[l++]=b>>>24&255;a[l++]=b>>>16&255;a[l++]=b>>>8&255;a[l++]=b&255;b=q/4294967296*1E4&268435455;a[l++]=b>>>8&255;a[l++]=b&255;a[l++]=b>>>24&15|16;a[l++]=b>>>16&255;a[l++]=m>>>8|128;a[l++]=m&255;for(m=0;6>m;++m)a[l+m]=f[m];return c||(0,Nia.default)(a)};var wo={};Object.defineProperty(wo,"__esModule",{value:!0});wo.default=function(b,c,l){function a(f,m,q,r){r=q&&r||0;if("string"===typeof f){f=unescape(encodeURIComponent(f));for(var u=
[],v=0;v<f.length;++v)u.push(f.charCodeAt(v));f=u}"string"===typeof m&&(m=j$(m));if(!Array.isArray(f))throw TypeError("value must be an array of bytes");if(!Array.isArray(m)||16!==m.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");m=l(m.concat(f));m[6]=m[6]&15|c;m[8]=m[8]&63|128;if(q)for(f=0;16>f;++f)q[r+f]=m[f];return q||(0,Oia.default)(m)}try{a.name=b}catch(f){}a.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";a.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";return a};
wo.URL=wo.DNS=void 0;var Oia=Fn&&Fn.__esModule?Fn:{default:Fn};wo.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";wo.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";var iz={},D3=$g.Buffer;Object.defineProperty(iz,"__esModule",{value:!0});iz.default=void 0;var Pia=ig&&ig.__esModule?ig:{default:ig};iz.default=function(b){Array.isArray(b)?b=D3.from(b):"string"===typeof b&&(b=D3.from(b,"utf8"));return Pia.default.createHash("md5").update(b).digest()};var WJ={};Object.defineProperty(WJ,"__esModule",{value:!0});
WJ.default=void 0;var Qia=wo&&wo.__esModule?wo:{default:wo},Ria=iz&&iz.__esModule?iz:{default:iz},Sia=(0,Qia.default)("v3",48,Ria.default);WJ.default=Sia;var XJ={};Object.defineProperty(XJ,"__esModule",{value:!0});XJ.default=void 0;var Tia=Gt&&Gt.__esModule?Gt:{default:Gt},Uia=Fn&&Fn.__esModule?Fn:{default:Fn};XJ.default=function(b,c,l){"string"===typeof b&&(c="binary"===b?new Uint8Array(16):null,b=null);b=b||{};b=b.random||(b.rng||Tia.default)();b[6]=b[6]&15|64;b[8]=b[8]&63|128;if(c){l=l||0;for(var a=
0;16>a;++a)c[l+a]=b[a];return c}return(0,Uia.default)(b)};var jz={},E3=$g.Buffer;Object.defineProperty(jz,"__esModule",{value:!0});jz.default=void 0;var Via=ig&&ig.__esModule?ig:{default:ig};jz.default=function(b){Array.isArray(b)?b=E3.from(b):"string"===typeof b&&(b=E3.from(b,"utf8"));return Via.default.createHash("sha1").update(b).digest()};var YJ={};Object.defineProperty(YJ,"__esModule",{value:!0});YJ.default=void 0;var Wia=wo&&wo.__esModule?wo:{default:wo},Xia=jz&&jz.__esModule?jz:{default:jz},
Yia=(0,Wia.default)("v5",80,Xia.default);YJ.default=Yia;var kz={};Object.defineProperty(kz,"__esModule",{value:!0});Object.defineProperty(kz,"v1",{enumerable:!0,get:function(){return Zia.default}});Object.defineProperty(kz,"v3",{enumerable:!0,get:function(){return $ia.default}});Object.defineProperty(kz,"v4",{enumerable:!0,get:function(){return aja.default}});Object.defineProperty(kz,"v5",{enumerable:!0,get:function(){return bja.default}});var Zia=mH(VJ),$ia=mH(WJ),aja=mH(XJ),bja=mH(YJ),Am={};Object.defineProperty(Am,
"__esModule",{value:!0});Am.atob=function(b){return F3(b)};Am.btoa=function(b){return G3(b)};Am.base64StringToBlobOrBuffer=function(b,c){return dY(F3(b),c)};Am.binaryStringToArrayBuffer=cY;Am.binaryStringToBlobOrBuffer=dY;Am.blob=bY;Am.blobOrBufferToBase64=function(b,c){fY(b,function(l){c(G3(l))})};Am.blobOrBufferToBinaryString=fY;Am.readAsArrayBuffer=function(b,c){var l=new FileReader;l.onloadend=function(a){a=a.target.result||new ArrayBuffer(0);c(a)};l.readAsArrayBuffer(b)};Am.readAsBinaryString=
eY;Am.typedBuffer=function(){};var F3=Am.atob,G3=Am.btoa,Ng="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,cja={},EE=cja=function(b){function c(y,z){var A=y[0],C=y[1],G=y[2],F=y[3];A+=(C&G|~C&F)+z[0]-680876936|0;A=(A<<7|A>>>25)+C|0;F+=(A&C|~A&G)+z[1]-389564586|0;F=(F<<12|F>>>20)+A|0;G+=(F&A|~F&C)+z[2]+606105819|0;G=(G<<17|G>>>15)+F|0;C+=(G&F|~G&A)+z[3]-1044525330|0;C=(C<<22|C>>>10)+G|0;A+=(C&G|~C&F)+z[4]-176418897|0;A=(A<<7|A>>>25)+C|0;F+=(A&C|~A&G)+z[5]+1200080426|
0;F=(F<<12|F>>>20)+A|0;G+=(F&A|~F&C)+z[6]-1473231341|0;G=(G<<17|G>>>15)+F|0;C+=(G&F|~G&A)+z[7]-45705983|0;C=(C<<22|C>>>10)+G|0;A+=(C&G|~C&F)+z[8]+1770035416|0;A=(A<<7|A>>>25)+C|0;F+=(A&C|~A&G)+z[9]-1958414417|0;F=(F<<12|F>>>20)+A|0;G+=(F&A|~F&C)+z[10]-42063|0;G=(G<<17|G>>>15)+F|0;C+=(G&F|~G&A)+z[11]-1990404162|0;C=(C<<22|C>>>10)+G|0;A+=(C&G|~C&F)+z[12]+1804603682|0;A=(A<<7|A>>>25)+C|0;F+=(A&C|~A&G)+z[13]-40341101|0;F=(F<<12|F>>>20)+A|0;G+=(F&A|~F&C)+z[14]-1502002290|0;G=(G<<17|G>>>15)+F|0;C+=(G&F|
~G&A)+z[15]+1236535329|0;C=(C<<22|C>>>10)+G|0;A+=(C&F|G&~F)+z[1]-165796510|0;A=(A<<5|A>>>27)+C|0;F+=(A&G|C&~G)+z[6]-1069501632|0;F=(F<<9|F>>>23)+A|0;G+=(F&C|A&~C)+z[11]+643717713|0;G=(G<<14|G>>>18)+F|0;C+=(G&A|F&~A)+z[0]-373897302|0;C=(C<<20|C>>>12)+G|0;A+=(C&F|G&~F)+z[5]-701558691|0;A=(A<<5|A>>>27)+C|0;F+=(A&G|C&~G)+z[10]+38016083|0;F=(F<<9|F>>>23)+A|0;G+=(F&C|A&~C)+z[15]-660478335|0;G=(G<<14|G>>>18)+F|0;C+=(G&A|F&~A)+z[4]-405537848|0;C=(C<<20|C>>>12)+G|0;A+=(C&F|G&~F)+z[9]+568446438|0;A=(A<<5|A>>>
27)+C|0;F+=(A&G|C&~G)+z[14]-1019803690|0;F=(F<<9|F>>>23)+A|0;G+=(F&C|A&~C)+z[3]-187363961|0;G=(G<<14|G>>>18)+F|0;C+=(G&A|F&~A)+z[8]+1163531501|0;C=(C<<20|C>>>12)+G|0;A+=(C&F|G&~F)+z[13]-1444681467|0;A=(A<<5|A>>>27)+C|0;F+=(A&G|C&~G)+z[2]-51403784|0;F=(F<<9|F>>>23)+A|0;G+=(F&C|A&~C)+z[7]+1735328473|0;G=(G<<14|G>>>18)+F|0;C+=(G&A|F&~A)+z[12]-1926607734|0;C=(C<<20|C>>>12)+G|0;A+=(C^G^F)+z[5]-378558|0;A=(A<<4|A>>>28)+C|0;F+=(A^C^G)+z[8]-2022574463|0;F=(F<<11|F>>>21)+A|0;G+=(F^A^C)+z[11]+1839030562|0;
G=(G<<16|G>>>16)+F|0;C+=(G^F^A)+z[14]-35309556|0;C=(C<<23|C>>>9)+G|0;A+=(C^G^F)+z[1]-1530992060|0;A=(A<<4|A>>>28)+C|0;F+=(A^C^G)+z[4]+1272893353|0;F=(F<<11|F>>>21)+A|0;G+=(F^A^C)+z[7]-155497632|0;G=(G<<16|G>>>16)+F|0;C+=(G^F^A)+z[10]-1094730640|0;C=(C<<23|C>>>9)+G|0;A+=(C^G^F)+z[13]+681279174|0;A=(A<<4|A>>>28)+C|0;F+=(A^C^G)+z[0]-358537222|0;F=(F<<11|F>>>21)+A|0;G+=(F^A^C)+z[3]-722521979|0;G=(G<<16|G>>>16)+F|0;C+=(G^F^A)+z[6]+76029189|0;C=(C<<23|C>>>9)+G|0;A+=(C^G^F)+z[9]-640364487|0;A=(A<<4|A>>>
28)+C|0;F+=(A^C^G)+z[12]-421815835|0;F=(F<<11|F>>>21)+A|0;G+=(F^A^C)+z[15]+530742520|0;G=(G<<16|G>>>16)+F|0;C+=(G^F^A)+z[2]-995338651|0;C=(C<<23|C>>>9)+G|0;A+=(G^(C|~F))+z[0]-198630844|0;A=(A<<6|A>>>26)+C|0;F+=(C^(A|~G))+z[7]+1126891415|0;F=(F<<10|F>>>22)+A|0;G+=(A^(F|~C))+z[14]-1416354905|0;G=(G<<15|G>>>17)+F|0;C+=(F^(G|~A))+z[5]-57434055|0;C=(C<<21|C>>>11)+G|0;A+=(G^(C|~F))+z[12]+1700485571|0;A=(A<<6|A>>>26)+C|0;F+=(C^(A|~G))+z[3]-1894986606|0;F=(F<<10|F>>>22)+A|0;G+=(A^(F|~C))+z[10]-1051523|0;
G=(G<<15|G>>>17)+F|0;C+=(F^(G|~A))+z[1]-2054922799|0;C=(C<<21|C>>>11)+G|0;A+=(G^(C|~F))+z[8]+1873313359|0;A=(A<<6|A>>>26)+C|0;F+=(C^(A|~G))+z[15]-30611744|0;F=(F<<10|F>>>22)+A|0;G+=(A^(F|~C))+z[6]-1560198380|0;G=(G<<15|G>>>17)+F|0;C+=(F^(G|~A))+z[13]+1309151649|0;C=(C<<21|C>>>11)+G|0;A+=(G^(C|~F))+z[4]-145523070|0;A=(A<<6|A>>>26)+C|0;F+=(C^(A|~G))+z[11]-1120210379|0;F=(F<<10|F>>>22)+A|0;G+=(A^(F|~C))+z[2]+718787259|0;G=(G<<15|G>>>17)+F|0;C+=(F^(G|~A))+z[9]-343485551|0;y[0]=A+y[0]|0;y[1]=((C<<21|C>>>
11)+G|0)+y[1]|0;y[2]=G+y[2]|0;y[3]=F+y[3]|0}function l(y){var z=[],A;for(A=0;64>A;A+=4)z[A>>2]=y.charCodeAt(A)+(y.charCodeAt(A+1)<<8)+(y.charCodeAt(A+2)<<16)+(y.charCodeAt(A+3)<<24);return z}function a(y){var z=[],A;for(A=0;64>A;A+=4)z[A>>2]=y[A]+(y[A+1]<<8)+(y[A+2]<<16)+(y[A+3]<<24);return z}function f(y){var z=y.length,A=[1732584193,-271733879,-1732584194,271733878],C;for(C=64;C<=z;C+=64)c(A,l(y.substring(C-64,C)));y=y.substring(C-64);var G=y.length;var F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(C=
0;C<G;C+=1)F[C>>2]|=y.charCodeAt(C)<<(C%4<<3);F[C>>2]|=128<<(C%4<<3);if(55<C)for(c(A,F),C=0;16>C;C+=1)F[C]=0;z=(8*z).toString(16).match(/(.*?)(.{0,8})$/);y=parseInt(z[2],16);z=parseInt(z[1],16)||0;F[14]=y;F[15]=z;c(A,F);return A}function m(y){var z;for(z=0;z<y.length;z+=1){var A=z,C,G=y[z],F="";for(C=0;4>C;C+=1)F+=v[G>>8*C+4&15]+v[G>>8*C&15];y[A]=F}return y.join("")}function q(y){/[\u0080-\uFFFF]/.test(y)&&(y=unescape(encodeURIComponent(y)));return y}function r(y){var z=[],A=y.length,C;for(C=0;C<
A-1;C+=2)z.push(parseInt(y.substr(C,2),16));return String.fromCharCode.apply(String,z)}function u(){this.reset()}var v="0123456789abcdef".split("");m(f("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function y(z,A){z=z|0||0;return 0>z?Math.max(z+A,0):Math.min(z,A)}ArrayBuffer.prototype.slice=function(z,A){var C=(this||Ng).byteLength;z=y(z,C);var G=C;A!==b&&(G=y(A,C));if(z>G)return new ArrayBuffer(0);G-=z;A=new ArrayBuffer(G);C=new Uint8Array(A);z=new Uint8Array(this||
Ng,z,G);C.set(z);return A}}();u.prototype.append=function(y){this.appendBinary(q(y));return this||Ng};u.prototype.appendBinary=function(y){(this||Ng)._buff+=y;(this||Ng)._length+=y.length;y=(this||Ng)._buff.length;var z;for(z=64;z<=y;z+=64)c((this||Ng)._hash,l((this||Ng)._buff.substring(z-64,z)));(this||Ng)._buff=(this||Ng)._buff.substring(z-64);return this||Ng};u.prototype.end=function(y){var z=(this||Ng)._buff,A=z.length,C,G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(C=0;C<A;C+=1)G[C>>2]|=z.charCodeAt(C)<<
(C%4<<3);this._finish(G,A);z=m((this||Ng)._hash);y&&(z=r(z));this.reset();return z};u.prototype.reset=function(){(this||Ng)._buff="";(this||Ng)._length=0;(this||Ng)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Ng};u.prototype.getState=function(){return{buff:(this||Ng)._buff,length:(this||Ng)._length,hash:(this||Ng)._hash.slice()}};u.prototype.setState=function(y){(this||Ng)._buff=y.buff;(this||Ng)._length=y.length;(this||Ng)._hash=y.hash;return this||Ng};u.prototype.destroy=function(){delete (this||
Ng)._hash;delete (this||Ng)._buff;delete (this||Ng)._length};u.prototype._finish=function(y,z){y[z>>2]|=128<<(z%4<<3);if(55<z)for(c((this||Ng)._hash,y),z=0;16>z;z+=1)y[z]=0;var A=8*(this||Ng)._length;A=A.toString(16).match(/(.*?)(.{0,8})$/);z=parseInt(A[2],16);A=parseInt(A[1],16)||0;y[14]=z;y[15]=A;c((this||Ng)._hash,y)};u.hash=function(y,z){return u.hashBinary(q(y),z)};u.hashBinary=function(y,z){y=f(y);y=m(y);return z?r(y):y};u.ArrayBuffer=function(){this.reset()};u.ArrayBuffer.prototype.append=
function(y){var z=(this||Ng)._buff.buffer,A=new Uint8Array(z.byteLength+y.byteLength);A.set(new Uint8Array(z));A.set(new Uint8Array(y),z.byteLength);z=A.length;(this||Ng)._length+=y.byteLength;for(y=64;y<=z;y+=64)c((this||Ng)._hash,a(A.subarray(y-64,y)));(this||Ng)._buff=y-64<z?new Uint8Array(A.buffer.slice(y-64)):new Uint8Array(0);return this||Ng};u.ArrayBuffer.prototype.end=function(y){var z=(this||Ng)._buff,A=z.length,C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],G;for(G=0;G<A;G+=1)C[G>>2]|=z[G]<<(G%4<<
3);this._finish(C,A);z=m((this||Ng)._hash);y&&(z=r(z));this.reset();return z};u.ArrayBuffer.prototype.reset=function(){(this||Ng)._buff=new Uint8Array(0);(this||Ng)._length=0;(this||Ng)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Ng};u.ArrayBuffer.prototype.getState=function(){var y=u.prototype.getState.call(this||Ng);y.buff=String.fromCharCode.apply(null,new Uint8Array(y.buff));return y};u.ArrayBuffer.prototype.setState=function(y){var z=y.buff,A=z.length,C=new ArrayBuffer(A);
C=new Uint8Array(C);var G;for(G=0;G<A;G+=1)C[G]=z.charCodeAt(G);y.buff=C;return u.prototype.setState.call(this||Ng,y)};u.ArrayBuffer.prototype.destroy=u.prototype.destroy;u.ArrayBuffer.prototype._finish=u.prototype._finish;u.ArrayBuffer.hash=function(y,z){var A=new Uint8Array(y),C=A.length;y=[1732584193,-271733879,-1732584194,271733878];var G;for(G=64;G<=C;G+=64)c(y,a(A.subarray(G-64,G)));A=G-64<C?A.subarray(G-64):new Uint8Array(0);var F=A.length;var N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(G=0;G<
F;G+=1)N[G>>2]|=A[G]<<(G%4<<3);N[G>>2]|=128<<(G%4<<3);if(55<G)for(c(y,N),G=0;16>G;G+=1)N[G]=0;C=(8*C).toString(16).match(/(.*?)(.{0,8})$/);A=parseInt(C[2],16);C=parseInt(C[1],16)||0;N[14]=A;N[15]=C;c(y,N);y=m(y);return z?r(y):y};return u}(),FB={};Object.defineProperty(FB,"__esModule",{value:!0});var gY=Am,aR=EE&&"object"===typeof EE&&"default"in EE?EE["default"]:EE,dja=self.setImmediate||self.setTimeout;FB.binaryMd5=function(b,c){function l(){dja(f)}function a(){var A=y.end(!0);A=gY.btoa(A);c(A);
y.destroy()}function f(){var A=v*r,C=A+r;v++;v<u?z(y,b,A,C,l):z(y,b,A,C,a)}var m="string"===typeof b,q=m?b.length:b.size,r=Math.min(32768,q),u=Math.ceil(q/r),v=0,y=m?new aR:new aR.ArrayBuffer,z=m?m$:l$;f()};FB.stringMd5=function(b){return aR.hash(b)};var og={};Object.defineProperty(og,"__esModule",{value:!0});var pN=nH(mQ),eja=nH(Fj),H3=nH(ki),pH=nH($s),hY=Function.prototype.toString,n$=hY.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var oH=!!localStorage.getItem("_pouch_check_localstorage")}catch(b){oH=
!1}eja(GA,pH);GA.prototype.addListener=function(b,c,l,a){function f(){if(m._listeners[c])if(q)q="waiting";else{q=!0;var r=qN(a,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));l.changes(r).on("change",function(u){u.seq>a.since&&!a.cancelled&&(a.since=u.seq,a.onChange(u))}).on("complete",function(){"waiting"===q&&H3(f);q=!1}).on("error",function(){q=!1})}}if(!this._listeners[c]){var m=this,q=!1;this._listeners[c]=f;this.on(b,f)}};GA.prototype.removeListener=
function(b,c){c in this._listeners&&(pH.prototype.removeListener.call(this,b,this._listeners[c]),delete this._listeners[c])};GA.prototype.notifyLocalWindows=function(b){oH&&(localStorage[b]="a"===localStorage[b]?"b":"a")};GA.prototype.notify=function(b){this.emit(b);this.notifyLocalWindows(b)};var fja="function"===typeof Object.assign?Object.assign:function(b){for(var c=Object(b),l=1;l<arguments.length;l++){var a=arguments[l];if(null!=a)for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(c[f]=
a[f])}return c},gja=function(){}.name?function(b){return b.name}:function(b){return(b=b.toString().match(/^\s*function\s*(?:(\S+)\s*)?\(/))&&b[1]?b[1]:""},I3="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),hja=/(?:^|&)([^&=]*)=?([^&]*)/g,ija=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
jja=kz.v4;og.adapterFun=function(b,c){return jY(pN(function(l){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var a=this;o$(a,b,l);return this.taskqueue.isReady?c.apply(this,l):new Promise(function(f,m){a.taskqueue.addTask(function(q){q?m(q):f(a[b].apply(a,l))})})}))};og.assign=fja;og.bulkGetShim=function(b,c,l){function a(){var C=[];y.forEach(function(G){G.docs.forEach(function(F){C.push({id:G.id,docs:[F]})})});
l(null,{results:C})}function f(){if(!(A>=z.length)){var C=z.slice(A,Math.min(A+6,z.length));m(C,A);A+=C.length}}function m(C,G){C.forEach(function(F,N){var L=G+N;N=r.get(F);var W=qN(N[0],["atts_since","attachments"]);W.open_revs=N.map(function(wa){return wa.rev});W.open_revs=W.open_revs.filter(kY);var la=kY;0===W.open_revs.length&&(delete W.open_revs,la=p$);["revs","attachments","binary","ajax","latest"].forEach(function(wa){wa in c&&(W[wa]=c[wa])});b.get(F,W,function(wa,D){wa=wa?[{error:wa}]:la(D);
y[L]={id:F,docs:wa};++v===u&&a();f()})})}var q=c.docs,r=new Ww.Map;q.forEach(function(C){r.has(C.id)?r.get(C.id).push(C):r.set(C.id,[C])});var u=r.size,v=0,y=Array(u),z=[];r.forEach(function(C,G){z.push(G)});var A=0;f()};og.changesHandler=GA;og.clone=jD;og.defaultBackOff=function(b){var c=0;b||(c=2E3);b=parseInt(b,10)||0;c=parseInt(c,10);c=c!==c||c<=b?(b||1)<<1:c+1;6E5<c&&(b=3E5,c=6E5);return~~((c-b)*Math.random()+b)};og.explainError=function(b,c){rN("info","The above "+b+" is totally normal. "+c)};
og.filterChange=function(b){var c={},l=b.filter&&"function"===typeof b.filter;c.query=b.query_params;return function(a){a.doc||(a.doc={});var f;if(f=l)try{f=!(0,b.filter)(a.doc,c)}catch(q){f=Jf.createError(Jf.BAD_REQUEST,"Filter function threw: "+q.toString())}if("object"===typeof f)return f;if(f)return!1;if(!b.include_docs)delete a.doc;else if(!b.attachments)for(var m in a.doc._attachments)a.doc._attachments.hasOwnProperty(m)&&(a.doc._attachments[m].stub=!0);return!0}};og.flatten=function(b){for(var c=
[],l=0,a=b.length;l<a;l++)c=c.concat(b[l]);return c};og.functionName=gja;og.guardedConsole=rN;og.hasLocalStorage=function(){return oH};og.invalidIdError=function(b){var c;b?"string"!==typeof b?c=Jf.createError(Jf.INVALID_ID):/^_/.test(b)&&!/^_(design|local)/.test(b)&&(c=Jf.createError(Jf.RESERVED_ID)):c=Jf.createError(Jf.MISSING_ID);if(c)throw c;};og.isRemote=function(b){return"boolean"===typeof b._remote?b._remote:"function"===typeof b.type?(rN("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),
"http"===b.type()):!1};og.listenerCount=function(b,c){return"listenerCount"in b?b.listenerCount(c):pH.listenerCount(b,c)};og.nextTick=H3;og.normalizeDdocFunctionName=function(b){return(b=lY(b))?b.join("/"):null};og.once=iY;og.parseDdocFunctionName=lY;og.parseUri=function(b){b=ija.exec(b);for(var c={},l=14;l--;){var a=I3[l],f=b[l]||"",m=-1!==["user","password"].indexOf(a);c[a]=m?decodeURIComponent(f):f}c.queryKey={};c[I3[12]].replace(hja,function(q,r,u){r&&(c.queryKey[r]=u)});return c};og.pick=qN;
og.rev=function(b,c){b=jD(b);if(!c)return kz.v4().replace(/-/g,"").toLowerCase();delete b._rev_tree;return FB.stringMd5(JSON.stringify(b))};og.scopeEval=function(b,c){var l=[],a=[],f;for(f in c)c.hasOwnProperty(f)&&(l.push(f),a.push(c[f]));l.push(b);return Function.apply(null,l).apply(null,a)};og.toPromise=jY;og.upsert=mY;og.uuid=jja;var J3={};J3=function(){for(var b={},c=0;c<arguments.length;c++){var l=arguments[c],a;for(a in l)kja.call(l,a)&&(b[a]=l[a])}return b};var kja=Object.prototype.hasOwnProperty,
cx=J3,K3={};K3=function(b){for(var c=1;c<arguments.length;c++){var l=arguments[c],a;for(a in l)lja.call(l,a)&&(b[a]=l[a])}return b};for(var lja=Object.prototype.hasOwnProperty,mja={},nja=K3,L3=mja=function(){var b=cx.apply(null,arguments);return nja(b,{bufferKeys:b.bufferKeys||!1,snapshots:b.snapshots||!1,permanence:b.permanence||!1,seek:b.seek||!1,clear:b.clear||!1,status:b.status||!1,createIfMissing:b.createIfMissing||!1,errorIfExists:b.errorIfExists||!1,deferredOpen:b.deferredOpen||!1,openCallback:b.openCallback||
!1,promises:b.promises||!1,streams:b.streams||!1,encodings:b.encodings||!1,additionalMethods:cx(b.additionalMethods)})},gt=[],Eq=[],oja="undefined"!==typeof Uint8Array?Uint8Array:Array,GB=0;64>GB;++GB)gt[GB]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[GB],Eq["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(GB)]=GB;Eq[45]=62;Eq[95]=63;var qH={byteLength:function(b){b=nY(b);var c=b[1];return 3*(b[0]+c)/4-c},toByteArray:function(b){var c=nY(b);var l=
c[0];c=c[1];var a=new oja(3*(l+c)/4-c),f=0,m=0<c?l-4:l,q;for(q=0;q<m;q+=4)l=Eq[b.charCodeAt(q)]<<18|Eq[b.charCodeAt(q+1)]<<12|Eq[b.charCodeAt(q+2)]<<6|Eq[b.charCodeAt(q+3)],a[f++]=l>>16&255,a[f++]=l>>8&255,a[f++]=l&255;2===c&&(l=Eq[b.charCodeAt(q)]<<2|Eq[b.charCodeAt(q+1)]>>4,a[f++]=l&255);1===c&&(l=Eq[b.charCodeAt(q)]<<10|Eq[b.charCodeAt(q+1)]<<4|Eq[b.charCodeAt(q+2)]>>2,a[f++]=l>>8&255,a[f++]=l&255);return a},fromByteArray:function(b){for(var c=b.length,l=c%3,a=[],f=0,m=c-l;f<m;f+=16383)a.push(s$(b,
f,f+16383>m?m:f+16383));1===l?(b=b[c-1],a.push(gt[b>>2]+gt[b<<4&63]+"==")):2===l&&(b=(b[c-2]<<8)+b[c-1],a.push(gt[b>>10]+gt[b>>4&63]+gt[b<<2&63]+"="));return a.join("")}},HA={read:function(b,c,l,a,f){var m=8*f-a-1;var q=(1<<m)-1,r=q>>1,u=-7;f=l?f-1:0;var v=l?-1:1,y=b[c+f];f+=v;l=y&(1<<-u)-1;y>>=-u;for(u+=m;0<u;l=256*l+b[c+f],f+=v,u-=8);m=l&(1<<-u)-1;l>>=-u;for(u+=a;0<u;m=256*m+b[c+f],f+=v,u-=8);if(0===l)l=1-r;else{if(l===q)return m?NaN:Infinity*(y?-1:1);m+=Math.pow(2,a);l-=r}return(y?-1:1)*m*Math.pow(2,
l-a)},write:function(b,c,l,a,f,m){var q,r=8*m-f-1,u=(1<<r)-1,v=u>>1,y=23===f?Math.pow(2,-24)-Math.pow(2,-77):0;m=a?0:m-1;var z=a?1:-1,A=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);isNaN(c)||Infinity===c?(c=isNaN(c)?1:0,a=u):(a=Math.floor(Math.log(c)/Math.LN2),1>c*(q=Math.pow(2,-a))&&(a--,q*=2),c=1<=a+v?c+y/q:c+y*Math.pow(2,1-v),2<=c*q&&(a++,q/=2),a+v>=u?(c=0,a=u):1<=a+v?(c=(c*q-1)*Math.pow(2,f),a+=v):(c=c*Math.pow(2,v-1)*Math.pow(2,f),a=0));for(;8<=f;b[l+m]=c&255,m+=z,c/=256,f-=8);a=a<<f|c;for(r+=f;0<r;b[l+
m]=a&255,m+=z,a/=256,r-=8);b[l+m-z]|=128*A}},M3="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;var N3=Od;var sN=2147483647;Od.TYPED_ARRAY_SUPPORT=function(){try{var b=new Uint8Array(1),c={foo:function(){return 42}};Object.setPrototypeOf(c,Uint8Array.prototype);Object.setPrototypeOf(b,c);return 42===b.foo()}catch(l){return!1}}();Od.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(Od.prototype,"parent",{enumerable:!0,get:function(){if(Od.isBuffer(this))return this.buffer}});Object.defineProperty(Od.prototype,"offset",{enumerable:!0,get:function(){if(Od.isBuffer(this))return this.byteOffset}});Od.poolSize=8192;Od.from=function(b,c,l){return oY(b,c,l)};Object.setPrototypeOf(Od.prototype,Uint8Array.prototype);Object.setPrototypeOf(Od,Uint8Array);Od.alloc=function(b,c,l){rY(b);b=0>=b?Tu(b):void 0!==c?"string"===typeof l?Tu(b).fill(c,l):Tu(b).fill(c):Tu(b);
return b};Od.allocUnsafe=function(b){return tN(b)};Od.allocUnsafeSlow=function(b){return tN(b)};Od.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==Od.prototype};Od.compare=function(b,c){ht(b,Uint8Array)&&(b=Od.from(b,b.offset,b.byteLength));ht(c,Uint8Array)&&(c=Od.from(c,c.offset,c.byteLength));if(!Od.isBuffer(b)||!Od.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===c)return 0;for(var l=b.length,a=c.length,f=0,m=Math.min(l,
a);f<m;++f)if(b[f]!==c[f]){l=b[f];a=c[f];break}return l<a?-1:a<l?1:0};Od.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};Od.concat=function(b,c){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return Od.alloc(0);var l;if(void 0===c)for(l=c=0;l<b.length;++l)c+=b[l].length;
c=Od.allocUnsafe(c);var a=0;for(l=0;l<b.length;++l){var f=b[l];if(ht(f,Uint8Array))a+f.length>c.length?Od.from(f).copy(c,a):Uint8Array.prototype.set.call(c,f,a);else if(Od.isBuffer(f))f.copy(c,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=f.length}return c};Od.byteLength=pY;Od.prototype._isBuffer=!0;Od.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var c=0;c<b;c+=2)Cy(this,c,c+1);return this};
Od.prototype.swap32=function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var c=0;c<b;c+=4)Cy(this,c,c+3),Cy(this,c+1,c+2);return this};Od.prototype.swap64=function(){var b=this.length;if(0!==b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var c=0;c<b;c+=8)Cy(this,c,c+7),Cy(this,c+1,c+6),Cy(this,c+2,c+5),Cy(this,c+3,c+4);return this};Od.prototype.toString=function(){var b=this.length;return 0===b?"":0===arguments.length?
tY(this,0,b):u$.apply(this,arguments)};Od.prototype.toLocaleString=Od.prototype.toString;Od.prototype.equals=function(b){if(!Od.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===Od.compare(this,b)};Od.prototype.inspect=function(){var b=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim();50<this.length&&(b+=" ... ");return"<Buffer "+b+">"};M3&&(Od.prototype[M3]=Od.prototype.inspect);Od.prototype.compare=function(b,c,l,a,f){ht(b,Uint8Array)&&(b=Od.from(b,b.offset,
b.byteLength));if(!Od.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);void 0===c&&(c=0);void 0===l&&(l=b?b.length:0);void 0===a&&(a=0);void 0===f&&(f=this.length);if(0>c||l>b.length||0>a||f>this.length)throw new RangeError("out of range index");if(a>=f&&c>=l)return 0;if(a>=f)return-1;if(c>=l)return 1;c>>>=0;l>>>=0;a>>>=0;f>>>=0;if(this===b)return 0;var m=f-a,q=l-c,r=Math.min(m,q);a=this.slice(a,f);b=b.slice(c,l);for(c=0;c<
r;++c)if(a[c]!==b[c]){m=a[c];q=b[c];break}return m<q?-1:q<m?1:0};Od.prototype.includes=function(b,c,l){return-1!==this.indexOf(b,c,l)};Od.prototype.indexOf=function(b,c,l){return uY(this,b,c,l,!0)};Od.prototype.lastIndexOf=function(b,c,l){return uY(this,b,c,l,!1)};Od.prototype.write=function(b,c,l,a){if(void 0===c)a="utf8",l=this.length,c=0;else if(void 0===l&&"string"===typeof c)a=c,l=this.length,c=0;else if(isFinite(c))c>>>=0,isFinite(l)?(l>>>=0,void 0===a&&(a="utf8")):(a=l,l=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
var f=this.length-c;if(void 0===l||l>f)l=f;if(0<b.length&&(0>l||0>c)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(f=!1;;)switch(a){case "hex":a:{c=Number(c)||0;a=this.length-c;l?(l=Number(l),l>a&&(l=a)):l=a;a=b.length;l>a/2&&(l=a/2);for(a=0;a<l;++a){f=parseInt(b.substr(2*a,2),16);if(f!==f){b=a;break a}this[c+a]=f}b=a}return b;case "utf8":case "utf-8":return rH(wN(b,this.length-c),this,c,l);case "ascii":case "latin1":case "binary":a=[];for(f=0;f<b.length;++f)a.push(b.charCodeAt(f)&
255);return rH(a,this,c,l);case "base64":return rH(qH.toByteArray(sY(b)),this,c,l);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=b;f=this.length-c;for(var m=[],q=0;q<a.length&&!(0>(f-=2));++q){var r=a.charCodeAt(q);b=r>>8;r%=256;m.push(r);m.push(b)}return rH(m,this,c,l);default:if(f)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();f=!0}};Od.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var wY=4096;Od.prototype.slice=
function(b,c){var l=this.length;b=~~b;c=void 0===c?l:~~c;0>b?(b+=l,0>b&&(b=0)):b>l&&(b=l);0>c?(c+=l,0>c&&(c=0)):c>l&&(c=l);c<b&&(c=b);b=this.subarray(b,c);Object.setPrototypeOf(b,Od.prototype);return b};Od.prototype.readUintLE=Od.prototype.readUIntLE=function(b,c,l){b>>>=0;c>>>=0;l||Xl(b,c,this.length);l=this[b];for(var a=1,f=0;++f<c&&(a*=256);)l+=this[b+f]*a;return l};Od.prototype.readUintBE=Od.prototype.readUIntBE=function(b,c,l){b>>>=0;c>>>=0;l||Xl(b,c,this.length);l=this[b+--c];for(var a=1;0<
c&&(a*=256);)l+=this[b+--c]*a;return l};Od.prototype.readUint8=Od.prototype.readUInt8=function(b,c){b>>>=0;c||Xl(b,1,this.length);return this[b]};Od.prototype.readUint16LE=Od.prototype.readUInt16LE=function(b,c){b>>>=0;c||Xl(b,2,this.length);return this[b]|this[b+1]<<8};Od.prototype.readUint16BE=Od.prototype.readUInt16BE=function(b,c){b>>>=0;c||Xl(b,2,this.length);return this[b]<<8|this[b+1]};Od.prototype.readUint32LE=Od.prototype.readUInt32LE=function(b,c){b>>>=0;c||Xl(b,4,this.length);return(this[b]|
this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};Od.prototype.readUint32BE=Od.prototype.readUInt32BE=function(b,c){b>>>=0;c||Xl(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};Od.prototype.readIntLE=function(b,c,l){b>>>=0;c>>>=0;l||Xl(b,c,this.length);l=this[b];for(var a=1,f=0;++f<c&&(a*=256);)l+=this[b+f]*a;l>=128*a&&(l-=Math.pow(2,8*c));return l};Od.prototype.readIntBE=function(b,c,l){b>>>=0;c>>>=0;l||Xl(b,c,this.length);l=c;for(var a=1,f=this[b+--l];0<l&&(a*=256);)f+=
this[b+--l]*a;f>=128*a&&(f-=Math.pow(2,8*c));return f};Od.prototype.readInt8=function(b,c){b>>>=0;c||Xl(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};Od.prototype.readInt16LE=function(b,c){b>>>=0;c||Xl(b,2,this.length);b=this[b]|this[b+1]<<8;return b&32768?b|4294901760:b};Od.prototype.readInt16BE=function(b,c){b>>>=0;c||Xl(b,2,this.length);b=this[b+1]|this[b]<<8;return b&32768?b|4294901760:b};Od.prototype.readInt32LE=function(b,c){b>>>=0;c||Xl(b,4,this.length);return this[b]|this[b+
1]<<8|this[b+2]<<16|this[b+3]<<24};Od.prototype.readInt32BE=function(b,c){b>>>=0;c||Xl(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};Od.prototype.readFloatLE=function(b,c){b>>>=0;c||Xl(b,4,this.length);return HA.read(this,b,!0,23,4)};Od.prototype.readFloatBE=function(b,c){b>>>=0;c||Xl(b,4,this.length);return HA.read(this,b,!1,23,4)};Od.prototype.readDoubleLE=function(b,c){b>>>=0;c||Xl(b,8,this.length);return HA.read(this,b,!0,52,8)};Od.prototype.readDoubleBE=function(b,
c){b>>>=0;c||Xl(b,8,this.length);return HA.read(this,b,!1,52,8)};Od.prototype.writeUintLE=Od.prototype.writeUIntLE=function(b,c,l,a){b=+b;c>>>=0;l>>>=0;a||po(this,b,c,l,Math.pow(2,8*l)-1,0);a=1;var f=0;for(this[c]=b&255;++f<l&&(a*=256);)this[c+f]=b/a&255;return c+l};Od.prototype.writeUintBE=Od.prototype.writeUIntBE=function(b,c,l,a){b=+b;c>>>=0;l>>>=0;a||po(this,b,c,l,Math.pow(2,8*l)-1,0);a=l-1;var f=1;for(this[c+a]=b&255;0<=--a&&(f*=256);)this[c+a]=b/f&255;return c+l};Od.prototype.writeUint8=Od.prototype.writeUInt8=
function(b,c,l){b=+b;c>>>=0;l||po(this,b,c,1,255,0);this[c]=b&255;return c+1};Od.prototype.writeUint16LE=Od.prototype.writeUInt16LE=function(b,c,l){b=+b;c>>>=0;l||po(this,b,c,2,65535,0);this[c]=b&255;this[c+1]=b>>>8;return c+2};Od.prototype.writeUint16BE=Od.prototype.writeUInt16BE=function(b,c,l){b=+b;c>>>=0;l||po(this,b,c,2,65535,0);this[c]=b>>>8;this[c+1]=b&255;return c+2};Od.prototype.writeUint32LE=Od.prototype.writeUInt32LE=function(b,c,l){b=+b;c>>>=0;l||po(this,b,c,4,4294967295,0);this[c+3]=
b>>>24;this[c+2]=b>>>16;this[c+1]=b>>>8;this[c]=b&255;return c+4};Od.prototype.writeUint32BE=Od.prototype.writeUInt32BE=function(b,c,l){b=+b;c>>>=0;l||po(this,b,c,4,4294967295,0);this[c]=b>>>24;this[c+1]=b>>>16;this[c+2]=b>>>8;this[c+3]=b&255;return c+4};Od.prototype.writeIntLE=function(b,c,l,a){b=+b;c>>>=0;a||(a=Math.pow(2,8*l-1),po(this,b,c,l,a-1,-a));a=0;var f=1,m=0;for(this[c]=b&255;++a<l&&(f*=256);)0>b&&0===m&&0!==this[c+a-1]&&(m=1),this[c+a]=(b/f>>0)-m&255;return c+l};Od.prototype.writeIntBE=
function(b,c,l,a){b=+b;c>>>=0;a||(a=Math.pow(2,8*l-1),po(this,b,c,l,a-1,-a));a=l-1;var f=1,m=0;for(this[c+a]=b&255;0<=--a&&(f*=256);)0>b&&0===m&&0!==this[c+a+1]&&(m=1),this[c+a]=(b/f>>0)-m&255;return c+l};Od.prototype.writeInt8=function(b,c,l){b=+b;c>>>=0;l||po(this,b,c,1,127,-128);0>b&&(b=255+b+1);this[c]=b&255;return c+1};Od.prototype.writeInt16LE=function(b,c,l){b=+b;c>>>=0;l||po(this,b,c,2,32767,-32768);this[c]=b&255;this[c+1]=b>>>8;return c+2};Od.prototype.writeInt16BE=function(b,c,l){b=+b;c>>>=
0;l||po(this,b,c,2,32767,-32768);this[c]=b>>>8;this[c+1]=b&255;return c+2};Od.prototype.writeInt32LE=function(b,c,l){b=+b;c>>>=0;l||po(this,b,c,4,2147483647,-2147483648);this[c]=b&255;this[c+1]=b>>>8;this[c+2]=b>>>16;this[c+3]=b>>>24;return c+4};Od.prototype.writeInt32BE=function(b,c,l){b=+b;c>>>=0;l||po(this,b,c,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);this[c]=b>>>24;this[c+1]=b>>>16;this[c+2]=b>>>8;this[c+3]=b&255;return c+4};Od.prototype.writeFloatLE=function(b,c,l){return yY(this,b,c,
!0,l)};Od.prototype.writeFloatBE=function(b,c,l){return yY(this,b,c,!1,l)};Od.prototype.writeDoubleLE=function(b,c,l){return zY(this,b,c,!0,l)};Od.prototype.writeDoubleBE=function(b,c,l){return zY(this,b,c,!1,l)};Od.prototype.copy=function(b,c,l,a){if(!Od.isBuffer(b))throw new TypeError("argument should be a Buffer");l||(l=0);a||0===a||(a=this.length);c>=b.length&&(c=b.length);c||(c=0);0<a&&a<l&&(a=l);if(a===l||0===b.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");
if(0>l||l>=this.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length);b.length-c<a-l&&(a=b.length-c+l);var f=a-l;this===b&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(c,l,a):Uint8Array.prototype.set.call(b,this.subarray(l,a),c);return f};Od.prototype.fill=function(b,c,l,a){if("string"===typeof b){"string"===typeof c?(a=c,c=0,l=this.length):"string"===typeof l&&(a=l,l=this.length);if(void 0!==
a&&"string"!==typeof a)throw new TypeError("encoding must be a string");if("string"===typeof a&&!Od.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===b.length){var f=b.charCodeAt(0);if("utf8"===a&&128>f||"latin1"===a)b=f}}else"number"===typeof b?b&=255:"boolean"===typeof b&&(b=Number(b));if(0>c||this.length<c||this.length<l)throw new RangeError("Out of range index");if(l<=c)return this;c>>>=0;l=void 0===l?this.length:l>>>0;b||(b=0);if("number"===typeof b)for(a=c;a<l;++a)this[a]=b;else{f=
Od.isBuffer(b)?b:Od.from(b,a);var m=f.length;if(0===m)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(a=0;a<l-c;++a)this[a+c]=f[a%m]}return this};var w$=/[^+/0-9A-Za-z-_]/g,v$=function(){for(var b=Array(256),c=0;16>c;++c)for(var l=16*c,a=0;16>a;++a)b[l+a]="0123456789abcdef"[c]+"0123456789abcdef"[a];return b}(),Uu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,pja={};zw.prototype.next=function(b){var c=this||Uu;if("function"!==typeof b)throw Error("next() requires a callback argument");
if(c._ended)return ki(b,Error("cannot call next() after end()")),c;if(c._nexting)return ki(b,Error("cannot call next() before previous next() has completed")),c;c._nexting=!0;c._next(function(){c._nexting=!1;b.apply(null,arguments)});return c};zw.prototype._next=function(b){ki(b)};zw.prototype.seek=function(b){if((this||Uu)._ended)throw Error("cannot call seek() after end()");if((this||Uu)._nexting)throw Error("cannot call seek() before next() has completed");b=(this||Uu).db._serializeKey(b);this._seek(b)};
zw.prototype._seek=function(b){};zw.prototype.end=function(b){if("function"!==typeof b)throw Error("end() requires a callback argument");if((this||Uu)._ended)return ki(b,Error("end() already called on iterator"));(this||Uu)._ended=!0;this._end(b)};zw.prototype._end=function(b){ki(b)};zw.prototype._nextTick=ki;var O3=pja=zw,wl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,qja={};Hr.prototype._checkWritten=function(){if((this||wl)._written)throw Error("write() already called on this batch");
};Hr.prototype.put=function(b,c){this._checkWritten();var l=(this||wl).db._checkKey(b)||(this||wl).db._checkValue(c);if(l)throw l;b=(this||wl).db._serializeKey(b);c=(this||wl).db._serializeValue(c);this._put(b,c);return this||wl};Hr.prototype._put=function(b,c){(this||wl)._operations.push({type:"put",key:b,value:c})};Hr.prototype.del=function(b){this._checkWritten();var c=(this||wl).db._checkKey(b);if(c)throw c;b=(this||wl).db._serializeKey(b);this._del(b);return this||wl};Hr.prototype._del=function(b){(this||
wl)._operations.push({type:"del",key:b})};Hr.prototype.clear=function(){this._checkWritten();this._clear();return this||wl};Hr.prototype._clear=function(){(this||wl)._operations=[]};Hr.prototype.write=function(b,c){this._checkWritten();"function"===typeof b&&(c=b);if("function"!==typeof c)throw Error("write() requires a callback argument");if("object"!==typeof b||null===b)b={};(this||wl)._written=!0;this._write(b,c)};Hr.prototype._write=function(b,c){(this||wl).db._batch((this||wl)._operations,b,
c)};Hr.prototype._nextTick=ki;var rja=qja=Hr,gp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,P3={},x$=L3,y$=Object.prototype.hasOwnProperty,z$="start end gt gte lt lte".split(" ");Mj.prototype.open=function(b,c){var l=this||gp,a=(this||gp).status;"function"===typeof b&&(c=b);if("function"!==typeof c)throw Error("open() requires a callback argument");if("object"!==typeof b||null===b)b={};b.createIfMissing=!1!==b.createIfMissing;b.errorIfExists=!!b.errorIfExists;
(this||gp).status="opening";this._open(b,function(f){if(f)return l.status=a,c(f);l.status="open";c()})};Mj.prototype._open=function(b,c){ki(c)};Mj.prototype.close=function(b){var c=this||gp,l=(this||gp).status;if("function"!==typeof b)throw Error("close() requires a callback argument");(this||gp).status="closing";this._close(function(a){if(a)return c.status=l,b(a);c.status="closed";b()})};Mj.prototype._close=function(b){ki(b)};Mj.prototype.get=function(b,c,l){"function"===typeof c&&(l=c);if("function"!==
typeof l)throw Error("get() requires a callback argument");var a=this._checkKey(b);if(a)return ki(l,a);b=this._serializeKey(b);if("object"!==typeof c||null===c)c={};c.asBuffer=!1!==c.asBuffer;this._get(b,c,l)};Mj.prototype._get=function(b,c,l){ki(function(){l(Error("NotFound"))})};Mj.prototype.put=function(b,c,l,a){"function"===typeof l&&(a=l);if("function"!==typeof a)throw Error("put() requires a callback argument");var f=this._checkKey(b)||this._checkValue(c);if(f)return ki(a,f);b=this._serializeKey(b);
c=this._serializeValue(c);if("object"!==typeof l||null===l)l={};this._put(b,c,l,a)};Mj.prototype._put=function(b,c,l,a){ki(a)};Mj.prototype.del=function(b,c,l){"function"===typeof c&&(l=c);if("function"!==typeof l)throw Error("del() requires a callback argument");var a=this._checkKey(b);if(a)return ki(l,a);b=this._serializeKey(b);if("object"!==typeof c||null===c)c={};this._del(b,c,l)};Mj.prototype._del=function(b,c,l){ki(l)};Mj.prototype.batch=function(b,c,l){if(!arguments.length)return this._chainedBatch();
"function"===typeof c&&(l=c);"function"===typeof b&&(l=b);if("function"!==typeof l)throw Error("batch(array) requires a callback argument");if(!Array.isArray(b))return ki(l,Error("batch(array) requires an array argument"));if(0===b.length)return ki(l);if("object"!==typeof c||null===c)c={};for(var a=Array(b.length),f=0;f<b.length;f++){if("object"!==typeof b[f]||null===b[f])return ki(l,Error("batch(array) element must be an object and not `null`"));var m=cx(b[f]);if("put"!==m.type&&"del"!==m.type)return ki(l,
Error("`type` must be 'put' or 'del'"));var q=this._checkKey(m.key);if(q)return ki(l,q);m.key=this._serializeKey(m.key);if("put"===m.type){if(q=this._checkValue(m.value))return ki(l,q);m.value=this._serializeValue(m.value)}a[f]=m}this._batch(a,c,l)};Mj.prototype._batch=function(b,c,l){ki(l)};Mj.prototype.clear=function(b,c){if("function"===typeof b)c=b;else if("function"!==typeof c)throw Error("clear() requires a callback argument");b=AY(this||gp,b);b.reverse=!!b.reverse;b.limit="limit"in b?b.limit:
-1;this._clear(b,c)};Mj.prototype._clear=function(b,c){b.keys=!0;b.values=!1;b.keyAsBuffer=!0;b.valueAsBuffer=!0;var l=this._iterator(b),a={},f=this||gp,m=function(q){if(q)return l.end(function(){c(q)});l.next(function(r,u){if(r)return m(r);if(void 0===u)return l.end(c);f._del(u,a,m)})};m()};Mj.prototype._setupIteratorOptions=function(b){b=AY(this||gp,b);b.reverse=!!b.reverse;b.keys=!1!==b.keys;b.values=!1!==b.values;b.limit="limit"in b?b.limit:-1;b.keyAsBuffer=!1!==b.keyAsBuffer;b.valueAsBuffer=
!1!==b.valueAsBuffer;return b};Mj.prototype.iterator=function(b){if("object"!==typeof b||null===b)b={};b=this._setupIteratorOptions(b);return this._iterator(b)};Mj.prototype._iterator=function(b){return new O3(this||gp)};Mj.prototype._chainedBatch=function(){return new rja(this||gp)};Mj.prototype._serializeKey=function(b){return b};Mj.prototype._serializeValue=function(b){return b};Mj.prototype._checkKey=function(b){if(null===b||void 0===b)return Error("key cannot be `null` or `undefined`");if(N3.isBuffer(b)&&
0===b.length)return Error("key cannot be an empty Buffer");if(""===b)return Error("key cannot be an empty String");if(Array.isArray(b)&&0===b.length)return Error("key cannot be an empty Array")};Mj.prototype._checkValue=function(b){if(null===b||void 0===b)return Error("value cannot be `null` or `undefined`")};Mj.prototype._nextTick=ki;P3=Mj;var sja=P3;var Ir="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Q3={},BY=O3;Fj(IA,BY);IA.prototype.setDb=function(b){var c=
(this||Ir)._iterator=b.iterator((this||Ir)._options);(this||Ir)._operations.forEach(function(l){c[l.method].apply(c,l.args)})};IA.prototype._operation=function(b,c){if((this||Ir)._iterator)return(this||Ir)._iterator[b].apply((this||Ir)._iterator,c);(this||Ir)._operations.push({method:b,args:c})};["next","end"].forEach(function(b){IA.prototype["_"+b]=function(){this._operation(b,arguments)}});IA.prototype.seek=function(){this._operation("seek",arguments)};Q3=IA;var Yl="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,bR={},CY=sja,FY=Q3,EY=["put","get","del","batch","clear"],A$=["approximateSize","compactRange"];Fj(Dy,CY);Dy.prototype.type="deferred-leveldown";Dy.prototype._open=function(b,c){var l=this||Yl;(this||Yl)._db.open(b,function(a){if(a)return c(a);l._operations.forEach(function(f){f.iterator?f.iterator.setDb(l._db):l._db[f.method].apply(l._db,f.args)});l._operations=[];B$(l);c()})};Dy.prototype._close=function(b){var c=this||Yl;(this||Yl)._db.close(function(l){if(l)return b(l);
DY(c);b()})};Dy.prototype._serializeKey=function(b){return b};Dy.prototype._serializeValue=function(b){return b};bR=Dy;bR.DeferredIterator=FY;var tja=bR,IY={},HY=!1,xN={},JY=!1,zN="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,uja={},N$=uja=function(b,c){if(yN("noDeprecation"))return b;var l=!1;return function(){if(!l){if(yN("throwDeprecation"))throw Error(c);yN("traceDeprecation")?console.trace(c):console.warn(c);l=!0}return b.apply(this||zN,arguments)}},ZJ={},$J=
$g,it=$J.Buffer;it.from&&it.alloc&&it.allocUnsafe&&it.allocUnsafeSlow?ZJ=$J:(KY($J,ZJ),ZJ.Buffer=Ey);Ey.prototype=Object.create(it.prototype);KY(it,Ey);Ey.from=function(b,c,l){if("number"===typeof b)throw new TypeError("Argument must not be a number");return it(b,c,l)};Ey.alloc=function(b,c,l){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=it(b);void 0!==c?"string"===typeof l?b.fill(c,l):b.fill(c):b.fill(0);return b};Ey.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");
return it(b)};Ey.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return $J.SlowBuffer(b)};var FN={},AN=ZJ.Buffer,LY=AN.isEncoding||function(b){b=""+b;switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};FN.StringDecoder=kD;kD.prototype.write=function(b){if(0===b.length)return"";if(this.lastNeed){var c=
this.fillLast(b);if(void 0===c)return"";var l=this.lastNeed;this.lastNeed=0}else l=0;return l<b.length?c?c+this.text(b,l):this.text(b,l):c||""};kD.prototype.end=function(b){b=b&&b.length?this.write(b):"";return this.lastNeed?b+"\ufffd":b};kD.prototype.text=function(b,c){var l=K$(this,b,c);if(!this.lastNeed)return b.toString("utf8",c);this.lastTotal=l;l=b.length-(l-this.lastNeed);b.copy(this.lastChar,0,l);return b.toString("utf8",c,l)};kD.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length);this.lastNeed-=b.length};var NY={},MY=!1,PY={},OY=!1,SY=Object.freeze({}),RY={},QY=!1,VY={},UY=!1,YY={},XY=!1,DN={},$Y=!1,O$="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,EN={},aZ=!1,dZ={},cZ=!1,GN={},eZ=!1,Q$="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,HN={},gZ=!1,
cR={},R3=!1,S3={},T3=!1,sp={},U3=!1;U3||(U3=!0,sp=sp=bZ(),sp.Stream=sp,sp.Readable=sp,sp.Writable=ZY(),sp.Duplex=KA(),sp.Transform=fZ(),sp.PassThrough=function(){function b(l){if(!(this instanceof b))return new b(l);c.call(this,l)}if(R3)return cR;R3=!0;cR=b;var c=fZ();Fj(b,c);b.prototype._transform=function(l,a,f){f(null,l)};return cR}(),sp.finished=CN(),sp.pipeline=function(){function b(v){var y=!1;return function(){y||(y=!0,v.apply(void 0,arguments))}}function c(v){if(v)throw v;}function l(v,y,
z,A){A=b(A);var C=!1;v.on("close",function(){C=!0});void 0===m&&(m=CN());m(v,{readable:y,writable:z},function(F){if(F)return A(F);C=!0;A()});var G=!1;return function(F){if(!C&&!G){G=!0;if(v.setHeader&&"function"===typeof v.abort)return v.abort();if("function"===typeof v.destroy)return v.destroy();A(F||new u("pipe"))}}}function a(v){v()}function f(v,y){return v.pipe(y)}if(T3)return S3;T3=!0;var m,q=JA().codes,r=q.ERR_MISSING_ARGS,u=q.ERR_STREAM_DESTROYED;return S3=function(){for(var v=arguments.length,
y=Array(v),z=0;z<v;z++)y[z]=arguments[z];var A=y.length?"function"!==typeof y[y.length-1]?c:y.pop():c;Array.isArray(y[0])&&(y=y[0]);if(2>y.length)throw new r("streams");var C,G=y.map(function(F,N){var L=N<y.length-1;return l(F,L,0<N,function(W){C||(C=W);W&&G.forEach(a);L||(G.forEach(a),A(C))})});return y.reduce(f)}}());var V3=sp;var Jr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,W3={},vja=Fj,hZ=V3.Readable,R$=cx;W3=LA;vja(LA,hZ);LA.prototype._read=function(){var b=
this||Jr,c=(this||Jr)._options;(this||Jr).destroyed||(this||Jr)._iterator.next(function(l,a,f){if(!b.destroyed){if(l)return b.destroy(l);void 0===a&&void 0===f?b.push(null):!1!==c.keys&&!1===c.values?b.push(a):!1===c.keys&&!1!==c.values?b.push(f):b.push({key:a,value:f})}})};LA.prototype._destroy=function(b,c){(this||Jr)._iterator.end(function(l){c(b||l)})};var wja=W3,aK={};(function(b,c,l){aK?aK=l():c[b]=l()})("prr",aK,function(){var b="function"==typeof Object.defineProperty?function(l,a,f){Object.defineProperty(l,
a,f);return l}:function(l,a,f){l[a]=f.value;return l},c=function(l,a){var f="object"==typeof a,m=!f&&"string"==typeof a,q=function(r){return f?!!a[r]:m?-1<a.indexOf(r[0]):!1};return{enumerable:q("enumerable"),configurable:q("configurable"),writable:q("writable"),value:l}};return function(l,a,f,m){var q;m=c(f,m);if("object"==typeof a){for(q in a)Object.hasOwnProperty.call(a,q)&&(m.value=a[q],b(l,q,m));return l}return b(l,a,m)}});var Tk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,xja={},S$=aK;IN.prototype=Error();var yja=xja=function(b){var c=function(l,a){return T$(b,l,a)};return{CustomError:IN,FilesystemError:c("FilesystemError"),createError:c}},Ht={},zja=Ht.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},
{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},
{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},
{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",
description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},
{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},
{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},
{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];Ht.errno={};Ht.code={};zja.forEach(function(b){Ht.errno[b.errno]=b;Ht.code[b.code]=b});Ht.custom=yja(Ht);
Ht.create=Ht.custom.createError;var Aja={},lz=Ht.create,mz=lz("LevelUPError"),dR=lz("NotFoundError",mz);dR.prototype.notFound=!0;dR.prototype.status=404;var nz=Aja={LevelUPError:mz,InitializationError:lz("InitializationError",mz),OpenError:lz("OpenError",mz),ReadError:lz("ReadError",mz),WriteError:lz("WriteError",mz),NotFoundError:dR,EncodingError:lz("EncodingError",mz)},Bja={},dx=Bja=function(){var b,c=new Promise(function(l,a){b=function(f,m){f?a(f):l(m)}});b.promise=c;return b};var HB=function(b,
c){return"function"===typeof b?b:c};var X3=function(b){return"object"===typeof b&&null!==b?b:{}};var Uk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Cja={},FE=nz.WriteError;lD.prototype.put=function(b,c){try{(this||Uk).batch.put(b,c)}catch(l){throw new FE(l);}(this||Uk).ops.push({type:"put",key:b,value:c});(this||Uk).length++;return this||Uk};lD.prototype.del=function(b){try{(this||Uk).batch.del(b)}catch(c){throw new FE(c);}(this||Uk).ops.push({type:"del",key:b});
(this||Uk).length++;return this||Uk};lD.prototype.clear=function(){try{(this||Uk).batch.clear()}catch(b){throw new FE(b);}(this||Uk).ops=[];(this||Uk).length=0;return this||Uk};lD.prototype.write=function(b,c){var l=(this||Uk)._levelup,a=(this||Uk).ops;c=HB(b,c);if(!c){c=dx();var f=c.promise}b=X3(b);try{(this||Uk).batch.write(b,function(m){if(m)return c(new FE(m));l.emit("batch",a);c()})}catch(m){throw new FE(m);}return f};var Dja=Cja=lD,eaa={assign:jZ,polyfill:function(){Object.assign||Object.defineProperty(Object,
"assign",{enumerable:!1,configurable:!0,writable:!0,value:jZ})}},Y3=Object.prototype.toString,Z3=function(b){var c=Y3.call(b),l="[object Arguments]"===c;return l||(l="[object Array]"!==c&&null!==b&&"object"==typeof b&&"number"==typeof b.length&&0<=b.length&&"[object Function]"===Y3.call(b.callee)),l};if(!Object.keys){var bK=Object.prototype.hasOwnProperty,$3=Object.prototype.toString,a4=Object.prototype.propertyIsEnumerable,Eja=!a4.call({toString:null},"toString"),Fja=a4.call(function(){},"prototype"),
cK="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),eR=function(b){var c=b.constructor;return c&&c.prototype===b},Gja={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,
$window:!0},Hja=function(){if("undefined"==typeof window)return!1;for(var b in window)try{if(!Gja["$"+b]&&bK.call(window,b)&&null!==window[b]&&"object"==typeof window[b])try{eR(window[b])}catch(c){return!0}}catch(c){return!0}return!1}();var Ija=function(b){var c=null!==b&&"object"==typeof b,l="[object Function]"===$3.call(b),a=Z3(b),f=c&&"[object String]"===$3.call(b),m=[];if(!c&&!l&&!a)throw new TypeError("Object.keys called on a non-object");c=Fja&&l;if(f&&0<b.length&&!bK.call(b,0))for(f=0;f<b.length;++f)m.push(String(f));
if(a&&0<b.length)for(a=0;a<b.length;++a)m.push(String(a));else for(var q in b)c&&"prototype"===q||!bK.call(b,q)||m.push(String(q));if(Eja){if("undefined"!=typeof window&&Hja)try{var r=eR(b)}catch(u){r=!1}else r=eR(b);for(a=0;a<cK.length;++a)r&&"constructor"===cK[a]||!bK.call(b,cK[a])||m.push(cK[a])}return m}}var Jja=Ija,Kja=Array.prototype.slice,b4=Object.keys,dK=b4?function(b){return b4(b)}:Jja,c4=Object.keys;dK.shim=function(){Object.keys?function(){var b=Object.keys(arguments);return b&&b.length===
arguments.length}(1,2)||(Object.keys=function(b){return Z3(b)?c4(Kja.call(b)):c4(b)}):Object.keys=dK;return Object.keys||dK};var Lja="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Mja=Object.prototype.toString,Nja=Array.prototype.concat,fR=Object.defineProperty,d4=fR&&function(){var b={};try{for(var c in fR(b,"x",{enumerable:!1,value:b}),b)return!1;return b.x===b}catch(l){return!1}}(),GE=function(b,c){var l=2<arguments.length?arguments[2]:{},a=dK(c);Lja&&(a=Nja.call(a,Object.getOwnPropertySymbols(c)));
for(var f=0;f<a.length;f+=1){var m=void 0,q=b,r=a[f],u=c[a[f]],v=l[a[f]];(!(r in q)||"function"==typeof(m=v)&&"[object Function]"===Mja.call(m)&&v())&&(d4?fR(q,r,{configurable:!0,enumerable:!1,value:u,writable:!0}):q[r]=u)}};GE.supportsDescriptors=!!d4;var e4=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global).Symbol,Oja=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var b=
{},c=Symbol("test"),l=Object(c);if("string"==typeof c||"[object Symbol]"!==Object.prototype.toString.call(c)||"[object Symbol]"!==Object.prototype.toString.call(l))return!1;for(c in b[c]=42,b)return!1;if("function"==typeof Object.keys&&0!==Object.keys(b).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(b).length)return!1;l=Object.getOwnPropertySymbols(b);return 1!==l.length||l[0]!==c||!Object.prototype.propertyIsEnumerable.call(b,c)||"function"==typeof Object.getOwnPropertyDescriptor&&
(b=Object.getOwnPropertyDescriptor(b,c),42!==b.value||!0!==b.enumerable)?!1:!0},gR=Array.prototype.slice,Pja=Object.prototype.toString,Qja=function(b){var c=this;if("function"!=typeof c||"[object Function]"!==Pja.call(c))throw new TypeError("Function.prototype.bind called on incompatible "+c);for(var l,a=gR.call(arguments,1),f=Math.max(0,c.length-a.length),m=[],q=0;q<f;q++)m.push("$"+q);if(l=Function("binder","return function ("+m.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof
l){var r=c.apply(this,a.concat(gR.call(arguments)));return Object(r)===r?r:this}return c.apply(b,a.concat(gR.call(arguments)))}),c.prototype)f=function(){},f.prototype=c.prototype,l.prototype=new f,f.prototype=null;return l},hR=Function.prototype.bind||Qja,HE=TypeError,oz=Object.getOwnPropertyDescriptor;if(oz)try{oz({},"")}catch(b){oz=null}var iR=function(){throw new HE;},Rja=oz?function(){try{return arguments.callee,iR}catch(b){try{return oz(arguments,"callee").get}catch(c){return iR}}}():iR,pz=
"function"==typeof e4&&"function"==typeof Symbol&&"symbol"==typeof e4("foo")&&"symbol"==typeof Symbol("bar")&&Oja(),qz=Object.getPrototypeOf||function(b){return b.__proto__},jR="undefined"==typeof Uint8Array?void 0:qz(Uint8Array),kR={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":pz?qz([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,
"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,
"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:
Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==
typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":pz?qz(qz([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==
typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&pz?qz((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==
typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,
"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&pz?qz((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==
typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":pz?qz(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":pz?Symbol:void 0,"%SymbolPrototype%":pz?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":Rja,"%TypedArray%":jR,"%TypedArrayPrototype%":jR?jR.prototype:void 0,"%TypeError%":HE,"%TypeErrorPrototype%":HE.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?
void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,
"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},f4=hR.call(Function.call,String.prototype.replace),Sja=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,
Tja=/\\(\\)?/g,Uja=function(b){var c=[];return f4(b,Sja,function(l,a,f,m){c[c.length]=f?f4(m,Tja,"$1"):a||l}),c},g4,h4=function(b,c){if("string"!=typeof b||0===b.length)throw new TypeError("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof c)throw new TypeError('"allowMissing" argument must be a boolean');var l=Uja(b);var a="%"+(0<l.length?l[0]:"")+"%";if(!(a in kR))throw new SyntaxError("intrinsic "+a+" does not exist!");if(void 0===kR[a]&&!c)throw new HE("intrinsic "+
a+" exists, but is not available. Please file an issue!");a=kR[a];for(var f=1;f<l.length;f+=1)if(null!=a)if(oz&&f+1>=l.length){var m=oz(a,l[f]);if(!(c||l[f]in a))throw new HE("base intrinsic for "+b+" exists, but the property is not available.");a=m?m.get||m.value:a[l[f]]}else a=a[l[f]];return a}("%Function%"),Vja=h4.apply,Wja=h4.call;(g4=function(){return hR.apply(Wja,arguments)}).apply=function(){return hR.apply(Vja,arguments)};var lR,eK,Xja=(lR=function(b,c){return 0===b&&0===c?1/b==1/c:b===c||
!(b==b||c==c)},lR),Yja=(eK=function(){return"function"==typeof Object.is?Object.is:Xja},eK),i4=g4(eK(),Object);GE(i4,{getPolyfill:eK,implementation:lR,shim:function(){var b=Yja();return GE(Object,{is:b},{is:function(){return Object.is!==b}}),b}});var FZ=i4;var j4=function(b){return b!=b};var fK,Zja=j4,$ja=(fK=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:Zja},GE),aka=j4,k4=fK();GE(k4,{getPolyfill:fK,implementation:aka,shim:function(){var b=fK();return $ja(Number,
{isNaN:b},{isNaN:function(){return Number.isNaN!==b}}),b}});var JN={},lZ=!1,nZ={},mZ=!1,W$=void 0!==/a/g.flags,xH=function(b){var c=[];return b.forEach(function(l){return c.push(l)}),c},CZ=function(b){var c=[];return b.forEach(function(l,a){return c.push([a,l])}),c},qZ=Object.is?Object.is:FZ,tH=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},MN=Number.isNaN?Number.isNaN:k4,nD=LN(Object.prototype.hasOwnProperty),wH=LN(Object.prototype.propertyIsEnumerable),rZ=LN(Object.prototype.toString),
Gn=Jg.types,aaa=Gn.isAnyArrayBuffer,Y$=Gn.isArrayBufferView,sZ=Gn.isDate,uH=Gn.isMap,tZ=Gn.isRegExp,vH=Gn.isSet,X$=Gn.isNativeError,baa=Gn.isBoxedPrimitive,uZ=Gn.isNumberObject,vZ=Gn.isStringObject,wZ=Gn.isBooleanObject,xZ=Gn.isBigIntObject,caa=Gn.isSymbolObject,Z$=Gn.isFloat32Array,$$=Gn.isFloat64Array,DZ={isDeepEqual:function(b,c){return kq(b,c,!1)},isDeepStrictEqual:function(b,c){return kq(b,c,!0)}},NN={},EZ=!1,bka=KN(),kh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:
global,cka={},zH=Nh,yH=$s.EventEmitter,dka=Jg.inherits,GZ=tja,haa=L3,gaa=bka,MA=X3,gK=nz.WriteError,HZ=nz.ReadError,eka=nz.NotFoundError,fka=nz.OpenError,faa=nz.InitializationError;oj.prototype.emit=yH.prototype.emit;oj.prototype.once=yH.prototype.once;dka(oj,yH);oj.prototype.open=function(b,c){var l=this||kh;"function"===typeof b&&(c=b,b=null);if(!c){c=dx();var a=c.promise}b||(b=(this||kh).options);if(this.isOpen())return zH.nextTick(c,null,l),a;if(this._isOpening())return this.once("open",function(){c(null,
l)}),a;this.emit("opening");(this||kh).db.open(b,function(f){if(f)return c(new fka(f));l.db=l._db;c(null,l);l.emit("open");l.emit("ready")});return a};oj.prototype.close=function(b){var c=this||kh;if(!b){b=dx();var l=b.promise}if(this.isOpen())(this||kh).db.close(function(){c.emit("closed");b.apply(null,arguments)}),this.emit("closing"),(this||kh).db=new GZ((this||kh)._db);else if(this.isClosed())zH.nextTick(b);else if("closing"===(this||kh).db.status)this.once("closed",b);else if(this._isOpening())this.once("open",
function(){c.close(b)});return l};oj.prototype.isOpen=function(){return"open"===(this||kh).db.status};oj.prototype._isOpening=function(){return"opening"===(this||kh).db.status};oj.prototype.isClosed=function(){return/^clos|new/.test((this||kh).db.status)};oj.prototype.get=function(b,c,l){l=HB(c,l);if(!l){l=dx();var a=l.promise}if(oD(this||kh,l))return a;c=MA(c);(this||kh).db.get(b,c,function(f,m){if(f)return f=/notfound/i.test(f)||f.notFound?new eka("Key not found in database ["+b+"]",f):new HZ(f),
l(f);l(null,m)});return a};oj.prototype.put=function(b,c,l,a){var f=this||kh;a=HB(l,a);if(!a){a=dx();var m=a.promise}if(oD(this||kh,a))return m;l=MA(l);(this||kh).db.put(b,c,l,function(q){if(q)return a(new gK(q));f.emit("put",b,c);a()});return m};oj.prototype.del=function(b,c,l){var a=this||kh;l=HB(c,l);if(!l){l=dx();var f=l.promise}if(oD(this||kh,l))return f;c=MA(c);(this||kh).db.del(b,c,function(m){if(m)return l(new gK(m));a.emit("del",b);l()});return f};oj.prototype.batch=function(b,c,l){if(!arguments.length)return new Dja(this||
kh);var a=this||kh;l="function"===typeof b?b:HB(c,l);if(!l){l=dx();var f=l.promise}if(oD(this||kh,l))return f;c=MA(c);(this||kh).db.batch(b,c,function(m){if(m)return l(new gK(m));a.emit("batch",b);l()});return f};oj.prototype.iterator=function(b){return(this||kh).db.iterator(b)};oj.prototype.clear=function(b,c){var l=this||kh;c=HB(b,c);b=MA(b);if(!c){c=dx();var a=c.promise}if(oD(this||kh,c))return a;(this||kh).db.clear(b,function(f){if(f)return c(new gK(f));l.emit("clear",b);c()});return a};oj.prototype.readStream=
oj.prototype.createReadStream=function(b){b=cx({keys:!0,values:!0},b);"number"!==typeof b.limit&&(b.limit=-1);return new wja((this||kh).db.iterator(b),b)};oj.prototype.keyStream=oj.prototype.createKeyStream=function(b){return this.createReadStream(cx(b,{keys:!0,values:!1}))};oj.prototype.valueStream=oj.prototype.createValueStream=function(b){return this.createReadStream(cx(b,{keys:!1,values:!0}))};oj.prototype.toString=function(){return"LevelUP"};oj.prototype.type="levelup";oj.errors=nz;var gka=cka=
oj.default=oj,qk={},hka=$g.Buffer;qk.compare=function(b,c){if(hka.isBuffer(b)){for(var l=Math.min(b.length,c.length),a=0;a<l;a++){var f=b[a]-c[a];if(f)return f}return b.length-c.length}return b<c?-1:b>c?1:0};var ika=qk.lowerBoundKey=function(b){return jt(b,"gt")||jt(b,"gte")||jt(b,"min")||(b.reverse?jt(b,"end"):jt(b,"start"))||void 0},mR=qk.lowerBound=function(b,c){var l=ika(b);return l?b[l]:c},nR=qk.lowerBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"gt")?!1:!0},oR=qk.upperBoundInclusive=
function(b){return Object.hasOwnProperty.call(b,"lt")?!1:!0},jka=qk.lowerBoundExclusive=function(b){return!nR(b)},kka=qk.upperBoundExclusive=function(b){return!oR(b)},lka=qk.upperBoundKey=function(b){return jt(b,"lt")||jt(b,"lte")||jt(b,"max")||(b.reverse?jt(b,"start"):jt(b,"end"))||void 0},pR=qk.upperBound=function(b,c){var l=lka(b);return l?b[l]:c};qk.start=function(b,c){return b.reverse?pR(b,c):mR(b,c)};qk.end=function(b,c){return b.reverse?mR(b,c):pR(b,c)};qk.startInclusive=function(b){return b.reverse?
oR(b):nR(b)};qk.endInclusive=function(b){return b.reverse?nR(b):oR(b)};qk.toLtgt=function(b,c,l,a,f){c=c||{};l=l||iaa;var m=3<arguments.length,q=qk.lowerBoundKey(b),r=qk.upperBoundKey(b);q?"gt"===q?c.gt=l(b.gt,!1):c.gte=l(b[q],!1):m&&(c.gte=l(a,!1));r?"lt"===r?c.lt=l(b.lt,!0):c.lte=l(b[r],!0):m&&(c.lte=l(f,!0));null!=b.reverse&&(c.reverse=!!b.reverse);Object.hasOwnProperty.call(c,"max")&&delete c.max;Object.hasOwnProperty.call(c,"min")&&delete c.min;Object.hasOwnProperty.call(c,"start")&&delete c.start;
Object.hasOwnProperty.call(c,"end")&&delete c.end;return c};qk.contains=function(b,c,l){l=l||qk.compare;var a=mR(b);if(void 0!==a&&""!==a&&(a=l(c,a),0>a||0===a&&jka(b)))return!1;a=pR(b);return void 0!==a&&""!==a&&(a=l(c,a),0<a||0===a&&kka(b))?!1:!0};qk.filter=function(b,c){return function(l){return qk.contains(b,l,c)}};var nv={},PN=N3;nv.utf8=nv["utf-8"]={encode:function(b){return ON(b)?b:String(b)},decode:AH,buffer:!1,type:"utf8"};nv.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"};
nv.binary={encode:function(b){return ON(b)?b:PN.from(b)},decode:AH,buffer:!0,type:"binary"};nv.none={encode:AH,decode:AH,buffer:!1,type:"id"};nv.id=nv.none;"hex ascii base64 ucs2 ucs-2 utf16le utf-16le".split(" ").forEach(function(b){nv[b]={encode:function(c){return ON(c)?c:PN.from(c,b)},decode:function(c){return c.toString(b)},buffer:!0,type:b}});var Vu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,l4={},QN=nv;l4=yn;yn.prototype._encoding=function(b){"string"===
typeof b&&(b=QN[b]);b||(b=QN.id);return b};yn.prototype._keyEncoding=function(b,c){return this._encoding(c&&c.keyEncoding||b&&b.keyEncoding||(this||Vu).opts.keyEncoding)};yn.prototype._valueEncoding=function(b,c){return this._encoding(c&&(c.valueEncoding||c.encoding)||b&&(b.valueEncoding||b.encoding)||(this||Vu).opts.valueEncoding||(this||Vu).opts.encoding)};yn.prototype.encodeKey=function(b,c,l){return this._keyEncoding(c,l).encode(b)};yn.prototype.encodeValue=function(b,c,l){return this._valueEncoding(c,
l).encode(b)};yn.prototype.decodeKey=function(b,c){return this._keyEncoding(c).decode(b)};yn.prototype.decodeValue=function(b,c){return this._valueEncoding(c).decode(b)};yn.prototype.encodeBatch=function(b,c){var l=this||Vu;return b.map(function(a){var f={type:a.type,key:l.encodeKey(a.key,c,a)};l.keyAsBuffer(c,a)&&(f.keyEncoding="binary");a.prefix&&(f.prefix=a.prefix);"value"in a&&(f.value=l.encodeValue(a.value,c,a),l.valueAsBuffer(c,a)&&(f.valueEncoding="binary"));return f})};var mka="lt gt lte gte start end".split(" ");
yn.prototype.encodeLtgt=function(b){var c=this||Vu,l={};Object.keys(b).forEach(function(a){l[a]=-1<mka.indexOf(a)?c.encodeKey(b[a],b):b[a]});return l};yn.prototype.createStreamDecoder=function(b){var c=this||Vu;return b.keys&&b.values?function(l,a){return{key:c.decodeKey(l,b),value:c.decodeValue(a,b)}}:b.keys?function(l){return c.decodeKey(l,b)}:b.values?function(l,a){return c.decodeValue(a,b)}:function(){}};yn.prototype.keyAsBuffer=function(b){return this._keyEncoding(b).buffer};yn.prototype.valueAsBuffer=
function(b){return this._valueEncoding(b).buffer};var nka=l4,oka={},maa=oka=Array.isArray||function(b){return"[object Array]"==Object.prototype.toString.call(b)},Vk={},pka=$g.Buffer;Vk.isArray=function(b){return Array.isArray?Array.isArray(b):"[object Array]"===Object.prototype.toString.call(b)};Vk.isBoolean=function(b){return"boolean"===typeof b};Vk.isNull=function(b){return null===b};Vk.isNullOrUndefined=function(b){return null==b};Vk.isNumber=function(b){return"number"===typeof b};Vk.isString=
function(b){return"string"===typeof b};Vk.isSymbol=function(b){return"symbol"===typeof b};Vk.isUndefined=function(b){return void 0===b};Vk.isRegExp=function(b){return"[object RegExp]"===Object.prototype.toString.call(b)};Vk.isObject=function(b){return"object"===typeof b&&null!==b};Vk.isDate=function(b){return"[object Date]"===Object.prototype.toString.call(b)};Vk.isError=function(b){return"[object Error]"===Object.prototype.toString.call(b)||b instanceof Error};Vk.isFunction=function(b){return"function"===
typeof b};Vk.isPrimitive=function(b){return null===b||"boolean"===typeof b||"number"===typeof b||"string"===typeof b||"symbol"===typeof b||"undefined"===typeof b};Vk.isBuffer=pka.isBuffer;var Gf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,TN={},m4=$g.Buffer,qka=m4.isEncoding||function(b){switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;
default:return!1}},qR=TN.StringDecoder=function(b){(this||Gf).encoding=(b||"utf8").toLowerCase().replace(/[-_]/,"");if(b&&!qka(b))throw Error("Unknown encoding: "+b);switch((this||Gf).encoding){case "utf8":(this||Gf).surrogateSize=3;break;case "ucs2":case "utf16le":(this||Gf).surrogateSize=2;(this||Gf).detectIncompleteChar=kaa;break;case "base64":(this||Gf).surrogateSize=3;(this||Gf).detectIncompleteChar=laa;break;default:(this||Gf).write=jaa;return}(this||Gf).charBuffer=new m4(6);(this||Gf).charReceived=
0;(this||Gf).charLength=0};qR.prototype.write=function(b){for(var c="";(this||Gf).charLength;){c=b.length>=(this||Gf).charLength-(this||Gf).charReceived?(this||Gf).charLength-(this||Gf).charReceived:b.length;b.copy((this||Gf).charBuffer,(this||Gf).charReceived,0,c);(this||Gf).charReceived+=c;if((this||Gf).charReceived<(this||Gf).charLength)return"";b=b.slice(c,b.length);c=(this||Gf).charBuffer.slice(0,(this||Gf).charLength).toString((this||Gf).encoding);var l=c.charCodeAt(c.length-1);if(55296<=l&&
56319>=l)(this||Gf).charLength+=(this||Gf).surrogateSize,c="";else{(this||Gf).charReceived=(this||Gf).charLength=0;if(0===b.length)return c;break}}this.detectIncompleteChar(b);var a=b.length;(this||Gf).charLength&&(b.copy((this||Gf).charBuffer,0,b.length-(this||Gf).charReceived,a),a-=(this||Gf).charReceived);c+=b.toString((this||Gf).encoding,0,a);a=c.length-1;l=c.charCodeAt(a);return 55296<=l&&56319>=l?(l=(this||Gf).surrogateSize,(this||Gf).charLength+=l,(this||Gf).charReceived+=l,(this||Gf).charBuffer.copy((this||
Gf).charBuffer,l,0,l),b.copy((this||Gf).charBuffer,0,0,l),c.substring(0,a)):c};qR.prototype.detectIncompleteChar=function(b){for(var c=3<=b.length?3:b.length;0<c;c--){var l=b[b.length-c];if(1==c&&6==l>>5){(this||Gf).charLength=2;break}if(2>=c&&14==l>>4){(this||Gf).charLength=3;break}if(3>=c&&30==l>>3){(this||Gf).charLength=4;break}}(this||Gf).charReceived=c};qR.prototype.end=function(b){var c="";b&&b.length&&(c=this.write(b));(this||Gf).charReceived&&(b=(this||Gf).encoding,c+=(this||Gf).charBuffer.slice(0,
(this||Gf).charReceived).toString(b));return c};var naa=Object.freeze({}),RN={},JZ=!1,lh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,SN={},KZ=!1,Lr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,UN={},MZ=!1,We="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,VN={},OZ=!1,Zl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,WN={},QZ=!1,PZ="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Fq={},n4=!1,rka=function(){if(n4)return Fq;n4=!0;var b=Nh;Fq=Fq=LZ();Fq.Stream=Fy;Fq.Readable=Fq;Fq.Writable=IZ();Fq.Duplex=NA();Fq.Transform=NZ();Fq.PassThrough=oaa();b.browser||"disable"!==b.env.READABLE_STREAM||(Fq=Fy);return Fq}(),ska={},raa=pD(qk),tka=pD($s),uka=pD(nka),vka=pD(rka),o4=pD(Fj);o4(XN,Error);XN.prototype.name="NotFoundError";var wka=tka.EventEmitter,xka=new XN,p4=function(b,c,l,a){function f(q){var r={},u;if(a)for(u in a)"undefined"!==
typeof a[u]&&(r[u]=a[u]);if(q)for(u in q)"undefined"!==typeof q[u]&&(r[u]=q[u]);return r}var m=new wka;m.sublevels={};m.options=a;m.version="6.5.4";m.methods={};c=c||[];m.put=function(q,r,u,v){"function"===typeof u&&(v=u,u={});b.apply([{key:q,value:r,prefix:c.slice(),type:"put"}],f(u),function(y){if(y)return v(y);m.emit("put",q,r);v(null)})};m.prefix=function(){return c.slice()};m.batch=function(q,r,u){"function"===typeof r&&(u=r,r={});q=q.map(function(v){return{key:v.key,value:v.value,prefix:v.prefix||
c,keyEncoding:v.keyEncoding,valueEncoding:v.valueEncoding,type:v.type}});b.apply(q,f(r),function(v){if(v)return u(v);m.emit("batch",q);u(null)})};m.get=function(q,r,u){"function"===typeof r&&(u=r,r={});b.get(q,c,f(r),function(v,y){v?u(xka):u(null,y)})};m.sublevel=function(q,r){return m.sublevels[q]=m.sublevels[q]||p4(b,c.concat(q),l,f(r))};m.readStream=m.createReadStream=function(q){q=f(q);q.prefix=c;var r=b.iterator(q);q=l(q,b.createDecoder(q));q.setIterator(r);return q};m.close=function(q){b.close(q)};
m.isOpen=b.isOpen;m.isClosed=b.isClosed;return m},RZ=vka.Readable;o4(Aw,RZ);Aw.prototype.setIterator=function(b){this._iterator=b;return this._destroyed?b.end(function(){}):this._waiting?(this._waiting=!1,this._read()):this};Aw.prototype._read=function(){var b=this;if(!b._destroyed){if(!b._iterator)return this._waiting=!0;b._iterator.next(function(c,l,a){if(c||void 0===l&&void 0===a)return c||b._destroyed||b.push(null),b._cleanup(c);a=b._makeData(l,a);b._destroyed||b.push(a)})}};Aw.prototype._cleanup=
function(b){if(!this._destroyed){this._destroyed=!0;var c=this;b&&"iterator has ended"!==b.message&&c.emit("error",b);c._iterator?c._iterator.end(function(){c._iterator=null;c.emit("close")}):c.emit("close")}};Aw.prototype.destroy=function(){this._cleanup()};var yka={encode:function(b){return"\u00ff"+b[0]+"\u00ff"+b[1]},decode:function(b){b=b.toString();var c=b.indexOf("\u00ff",1);return[b.substring(1,c),b.substring(c+1)]},lowerBound:"\x00",upperBound:"\u00ff"},zka=new uka,Aka=ska=function(b){return p4(qaa(b,
yka,zka),[],Aw,b.options)},Wu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,hK={},Bka=Nh,SZ=V3.Transform,q4=Fj;q4(OA,SZ);OA.prototype.destroy=function(b){if(!(this||Wu)._destroyed){(this||Wu)._destroyed=!0;var c=this||Wu;Bka.nextTick(function(){b&&c.emit("error",b);c.emit("close")})}};hK=YN(function(b,c,l){b=new OA(b);b._transform=c;l&&(b._flush=l);return b});hK.ctor=YN(function(b,c,l){function a(f){if(!((this||Wu)instanceof a))return new a(f);(this||Wu).options=
Object.assign({},b,f);OA.call(this||Wu,(this||Wu).options)}q4(a,OA);a.prototype._transform=c;l&&(a.prototype._flush=l);return a});hK.obj=YN(function(b,c,l){b=new OA(Object.assign({objectMode:!0,highWaterMark:16},b));b._transform=c;l&&(b._flush=l);return b});var r4=hK,Cka={};Gi.prototype.toArray=function(){for(var b=this._length,c=Array(b),l=this._front,a=this._capacity,f=0;f<b;++f)c[f]=this[l+f&a-1];return c};Gi.prototype.push=function(b){var c=arguments.length,l=this._length;if(1<c){var a=this._capacity;
if(l+c>a){for(var f=0;f<c;++f){this._checkCapacity(l+1);var m=this._front+l&this._capacity-1;this[m]=arguments[f];l++;this._length=l}return l}m=this._front;for(f=0;f<c;++f)this[m+l&a-1]=arguments[f],m++;this._length=l+c;return l+c}if(0===c)return l;this._checkCapacity(l+1);f=this._front+l&this._capacity-1;this[f]=b;this._length=l+1;return l+1};Gi.prototype.pop=function(){var b=this._length;if(0!==b){var c=this._front+b-1&this._capacity-1,l=this[c];this[c]=void 0;this._length=b-1;return l}};Gi.prototype.shift=
function(){var b=this._length;if(0!==b){var c=this._front,l=this[c];this[c]=void 0;this._front=c+1&this._capacity-1;this._length=b-1;return l}};Gi.prototype.unshift=function(b){var c=this._length,l=arguments.length;if(1<l){var a=this._capacity;if(c+l>a){for(var f=l-1;0<=f;f--){this._checkCapacity(c+1);a=this._capacity;var m=(this._front-1&a-1^a)-a;this[m]=arguments[f];c++;this._length=c;this._front=m}return c}m=this._front;for(f=l-1;0<=f;f--)m=(m-1&a-1^a)-a,this[m]=arguments[f];this._front=m;this._length=
c+l;return c+l}if(0===l)return c;this._checkCapacity(c+1);a=this._capacity;f=(this._front-1&a-1^a)-a;this[f]=b;this._length=c+1;this._front=f;return c+1};Gi.prototype.peekBack=function(){var b=this._length;if(0!==b)return this[this._front+b-1&this._capacity-1]};Gi.prototype.peekFront=function(){if(0!==this._length)return this[this._front]};Gi.prototype.get=function(b){if(b===(b|0)){var c=this._length;0>b&&(b+=c);if(!(0>b||b>=c))return this[this._front+b&this._capacity-1]}};Gi.prototype.isEmpty=function(){return 0===
this._length};Gi.prototype.clear=function(){for(var b=this._length,c=this._front,l=this._capacity,a=0;a<b;++a)this[c+a&l-1]=void 0;this._front=this._length=0};Gi.prototype.toString=function(){return this.toArray().toString()};Gi.prototype.valueOf=Gi.prototype.toString;Gi.prototype.removeFront=Gi.prototype.shift;Gi.prototype.removeBack=Gi.prototype.pop;Gi.prototype.insertFront=Gi.prototype.unshift;Gi.prototype.insertBack=Gi.prototype.push;Gi.prototype.enqueue=Gi.prototype.push;Gi.prototype.dequeue=
Gi.prototype.shift;Gi.prototype.toJSON=Gi.prototype.toArray;Object.defineProperty(Gi.prototype,"length",{get:function(){return this._length},set:function(){throw new RangeError("");}});Gi.prototype._checkCapacity=function(b){this._capacity<b&&this._resizeTo(TZ(1.5*this._capacity+16))};Gi.prototype._resizeTo=function(b){var c=this._capacity;this._capacity=b;b=this._front;var l=this._length;if(b+l>c)for(b=b+l&c-1,l=0;l<b;++l)this[l+c]=this[l+0],this[l+0]=void 0};var UZ=Array.isArray,Dka=Cka=Gi,Eka=
{},It=$g.Buffer,Fka=Object.prototype.toString,rR="function"===typeof It.alloc&&"function"===typeof It.allocUnsafe&&"function"===typeof It.from,Gka=Eka=function(b,c,l){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("ArrayBuffer"===Fka.call(b).slice(8,-1)){c>>>=0;var a=b.byteLength-c;if(0>a)throw new RangeError("'offset' is out of bounds");if(void 0===l)l=a;else if(l>>>=0,l>a)throw new RangeError("'length' is out of bounds");return rR?It.from(b.slice(c,c+l)):
new It(new Uint8Array(b.slice(c,c+l)))}if("string"===typeof b){l=c;if("string"!==typeof l||""===l)l="utf8";if(!It.isEncoding(l))throw new TypeError('"encoding" must be a valid string encoding');return rR?It.from(b,l):new It(b,l)}return rR?It.from(b):new It(b)},xo={};Object.defineProperty(xo,"__esModule",{value:!0});xo.collectConflicts=function(b){var c=ZN(b);b=VZ(b.rev_tree);for(var l=[],a=0,f=b.length;a<f;a++){var m=b[a];m.rev===c||m.opts.deleted||l.push(m.rev)}return l};xo.collectLeaves=VZ;xo.compactTree=
function(b){var c=[];BH(b.rev_tree,function(l,a,f,m,q){"available"!==q.status||l||(c.push(a+"-"+f),q.status="missing")});return c};xo.isDeleted=function(b,c){c||(c=ZN(b));c=c.substring(c.indexOf("-")+1);b=b.rev_tree.map(xaa);for(var l;l=b.pop();){if(l[0]===c)return!!l[1].deleted;b=b.concat(l[2])}};xo.isLocalId=function(b){return/^_local/.test(b)};xo.merge=function(b,c,l){b=ZZ(b,c);l=waa(b.tree,l);return{tree:l.tree,stemmedRevs:l.revs,conflicts:b.conflicts}};xo.revExists=function(b,c){b=b.slice();
var l=c.split("-");c=parseInt(l[0],10);l=l[1];for(var a;a=b.pop();){if(a.pos===c&&a.ids[0]===l)return!0;for(var f=a.ids[2],m=0,q=f.length;m<q;m++)b.push({pos:a.pos+1,ids:f[m]})}return!1};xo.rootToLeaf=WZ;xo.traverseRevTree=BH;xo.winningRev=ZN;xo.latest=function(b,c){for(var l=c.rev_tree.slice(),a;a=l.pop();){var f=a.pos,m=a.ids,q=m[0],r=m[1];m=m[2];var u=0===m.length;a=a.history?a.history.slice():[];a.push({id:q,pos:f,opts:r});if(u)for(r=0,u=a.length;r<u;r++){var v=a[r];if(v.pos+"-"+v.id===b)return f+
"-"+q}q=0;for(r=m.length;q<r;q++)l.push({pos:f+1,ids:m[q],history:a})}throw Error("Unable to resolve latest revision for id "+c.id+", rev "+b);};var Dl={};Object.defineProperty(Dl,"__esModule",{value:!0});var Gy=og,qD=Am,c_=FB,hp=Jf,qo=xo,yaa=$Z("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),zaa=$Z("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" "));
Dl.invalidIdError=Gy.invalidIdError;Dl.normalizeDdocFunctionName=Gy.normalizeDdocFunctionName;Dl.parseDdocFunctionName=Gy.parseDdocFunctionName;Dl.isDeleted=qo.isDeleted;Dl.isLocalId=qo.isLocalId;Dl.allDocsKeysQuery=function(b,c){var l={offset:c.skip};return Promise.all(c.keys.map(function(a){var f=Gy.assign({key:a,deleted:"ok"},c);["limit","skip","keys"].forEach(function(m){delete f[m]});return new Promise(function(m,q){b._allDocs(f,function(r,u){if(r)return q(r);c.update_seq&&void 0!==u.update_seq&&
(l.update_seq=u.update_seq);l.total_rows=u.total_rows;m(u.rows[0]||{key:a,error:"not_found"})})})})).then(function(a){l.rows=a;return l})};Dl.parseDoc=b_;Dl.preprocessAttachments=function(b,c,l){function a(){f++;b.length===f&&(m?l(m):l())}if(!b.length)return l();var f=0,m;b.forEach(function(q){function r(z){m=z;v++;v===u.length&&a()}var u=q.data&&q.data._attachments?Object.keys(q.data._attachments):[],v=0;if(!u.length)return a();for(var y in q.data._attachments)q.data._attachments.hasOwnProperty(y)&&
Caa(q.data._attachments[y],c,r)})};Dl.processDocs=function(b,c,l,a,f,m,q,r,u){b=b||1E3;var v=r.new_edits,y=new Ww.Map,z=0,A=c.length;c.forEach(function(C,G){if(C._id&&qo.isLocalId(C._id))l[C._deleted?"_removeLocal":"_putLocal"](C,{ctx:f},function(N,L){m[G]=N||L;++z===A&&u&&u()});else{var F=C.metadata.id;y.has(F)?(A--,y.get(F).push([C,G])):y.set(F,[[C,G]])}});y.forEach(function(C,G){function F(){++L<C.length?N():++z===A&&u&&u()}function N(){var W=C[L],la=W[0];W=W[1];if(a.has(G))d_(b,a.get(G),la,m,
W,F,q,v);else{var wa=qo.merge([],la.metadata.rev_tree[0],b);la.metadata.rev_tree=wa.tree;la.stemmedRevs=wa.stemmedRevs||[];wa=qo.winningRev(la.metadata);var D=qo.isDeleted(la.metadata,wa);"was_delete"in r&&D?(m[W]=hp.createError(hp.MISSING_DOC,"deleted"),F()):v&&"missing"===la.metadata.rev_tree[0].ids[1].status?(la=hp.createError(hp.REV_CONFLICT),m[W]=la,F()):q(la,wa,D,D,!1,D?0:1,W,F)}}var L=0;N()})};Dl.updateDoc=d_;var IE={};Object.defineProperty(IE,"__esModule",{value:!0});var s4=vB&&"object"===
typeof vB&&"default"in vB?vB["default"]:vB;IE.safeJsonParse=function(b){try{return JSON.parse(b)}catch(c){return s4.parse(b)}};IE.safeJsonStringify=function(b){try{return JSON.stringify(b)}catch(c){return s4.stringify(b)}};var Hka={},Ika=rD(gka),Jka=rD(Aka),iK=rD(mQ),Kka=rD(Dka),Lka=rD(Gka),tD=xo,sD=Am,Mr=Ww;Hy.prototype.get=function(b,c,l){var a=f_(this,b),f=a.get(c);if(f)return og.nextTick(function(){l(null,f)});if(null===f)return og.nextTick(function(){l({name:"NotFoundError"})});b.get(c,function(m,
q){if(m)return"NotFoundError"===m.name&&a.set(c,null),l(m);a.set(c,q);l(null,q)})};Hy.prototype.batch=function(b){for(var c=0,l=b.length;c<l;c++){var a=b[c],f=f_(this,a.prefix);"put"===a.type?f.set(a.key,a.value):f.set(a.key,null)}this._batch=this._batch.concat(b)};Hy.prototype.execute=function(b,c){for(var l=new Mr.Set,a=[],f=this._batch.length-1;0<=f;f--){var m=this._batch[f],q=m.prefix.prefix()[0]+"\u00ff"+m.key;l.has(q)||(l.add(q),a.push(m))}b.batch(a,c)};var JE=new Mr.Map,Mka={encode:IE.safeJsonStringify,
decode:IE.safeJsonParse,buffer:!1,type:"cheap-json"},KE=new og.changesHandler,Nka=Hka=function(b,c){function l(){F.docStore=D.sublevel("document-store",{valueEncoding:Mka});F.bySeqStore=D.sublevel("by-sequence",{valueEncoding:"json"});F.attachmentStore=D.sublevel("attach-store",{valueEncoding:"json"});F.binaryStore=D.sublevel("attach-binary-store",{valueEncoding:"binary"});F.localStore=D.sublevel("local-store",{valueEncoding:"json"});F.metaStore=D.sublevel("meta-store",{valueEncoding:"json"});"object"===
typeof b.migrate?b.migrate.doMigrationTwo(D,F,a):a()}function a(){F.metaStore.get("_local_last_update_seq",function(Q,J){"undefined"===typeof D._updateSeq&&(D._updateSeq=J||0);F.metaStore.get("_local_doc_count",function(O,ja){D._docCount=O?0:ja;F.metaStore.get("_local_uuid",function(X,ha){G=X?og.uuid():ha;F.metaStore.put("_local_uuid",G,function(){og.nextTick(function(){c(null,C)})})})})})}function f(Q){return D.isClosed()?Q(Error("database is closed")):Q(null,D._docCount)}function m(Q,J){try{Q.apply(null,
J)}catch(O){J[J.length-1](O)}}function q(){var Q=D._queue.peekFront();"read"===Q.type?r(Q):u(Q)}function r(Q){var J=[Q];Q=1;for(var O=D._queue.get(Q);"undefined"!==typeof O&&"read"===O.type;)J.push(O),Q++,O=D._queue.get(Q);var ja=0;J.forEach(function(X){var ha=X.args,bb=ha[ha.length-1];ha[ha.length-1]=iK(function(pb){bb.apply(null,pb);++ja===J.length&&og.nextTick(function(){J.forEach(function(){D._queue.shift()});D._queue.length&&q()})});m(X.fun,ha)})}function u(Q){var J=Q.args,O=J[J.length-1];J[J.length-
1]=iK(function(ja){O.apply(null,ja);og.nextTick(function(){D._queue.shift();D._queue.length&&q()})});m(Q.fun,J)}function v(Q){return iK(function(J){D._queue.push({fun:Q,args:J,type:"write"});1===D._queue.length&&og.nextTick(q)})}function y(Q){return iK(function(J){D._queue.push({fun:Q,args:J,type:"read"});1===D._queue.length&&og.nextTick(q)})}function z(Q){return("0000000000000000"+Q).slice(-16)}function A(Q,J){"destroy"in W?W.destroy(Q,J):J(null)}b=og.clone(b);var C=this,G,F={},N=b.revs_limit,L=
b.name;"undefined"===typeof b.createIfMissing&&(b.createIfMissing=!0);var W=b.db,la=og.functionName(W);if(JE.has(la))var wa=JE.get(la);else wa=new Mr.Map,JE.set(la,wa);if(wa.has(L)){var D=wa.get(L);l()}else wa.set(L,Jka(Ika(W(L),b,function(Q){if(Q)return wa.delete(L),c(Q);D=wa.get(L);D._docCount=-1;D._queue=new Kka;"object"===typeof b.migrate?b.migrate.doMigrationOne(L,D,l):l()})));C._remote=!1;C.type=function(){return"leveldb"};C._id=function(Q){Q(null,G)};C._info=function(Q){var J={doc_count:D._docCount,
update_seq:D._updateSeq,backend_adapter:og.functionName(W)};return og.nextTick(function(){Q(null,J)})};C._get=y(function(Q,J,O){J=og.clone(J);F.docStore.get(Q,function(ja,X){if(ja||!X)return O(Jf.createError(Jf.MISSING_DOC,"missing"));if(J.rev)var ha=J.latest?tD.latest(J.rev,X):J.rev;else if(ha=$N(X),"deleted"in X?X.deleted:Dl.isDeleted(X,ha))return O(Jf.createError(Jf.MISSING_DOC,"deleted"));F.bySeqStore.get(z(X.rev_map[ha]),function(bb,pb){if(!pb)return O(Jf.createError(Jf.MISSING_DOC));if("_id"in
pb&&pb._id!==X.id)return O(Error("wrong doc returned"));pb._id=X.id;if("_rev"in pb){if(pb._rev!==ha)return O(Error("wrong doc returned"))}else pb._rev=ha;return O(null,{doc:pb,metadata:X})})})});C._getAttachment=function(Q,J,O,ja,X){var ha=O.content_type;F.binaryStore.get(O.digest,function(bb,pb){if(bb)return"NotFoundError"!==bb.name?X(bb):X(null,ja.binary?sD.blob([""],{type:ha}):"");ja.binary?X(null,e_(pb,ha)):X(null,pb.toString("base64"))})};C._bulkDocs=v(function(Q,J,O){function ja(ea,Pa){ca.get(F.attachmentStore,
ea,function(kb){kb?(kb=Jf.createError(Jf.MISSING_STUB,"unknown stub attachment with digest "+ea),Pa(kb)):Pa()})}function X(ea){function Pa(){if(++kb===db.length)return ea(vc)}var kb=0,vc;db.forEach(function(mc){if(mc._id&&Dl.isLocalId(mc._id))return Pa();ca.get(F.docStore,mc._id,function(Yb,ud){Yb?"NotFoundError"!==Yb.name&&(vc=Yb):M.set(mc._id,ud);Pa()})})}function ha(ea,Pa){var kb=Promise.resolve();ea.forEach(function(vc,mc){kb=kb.then(function(){return new Promise(function(Yb,ud){C._doCompactionNoLock(mc,
vc,{ctx:ca},function(id){if(id)return ud(id);Yb()})})})});kb.then(function(){Pa()},Pa)}function bb(ea){var Pa=new Mr.Map;M.forEach(function(kb,vc){Pa.set(vc,tD.compactTree(kb))});ha(Pa,ea)}function pb(){ha(R,function(ea){ea&&Ga(ea);if(C.auto_compaction)return bb(Ga);Ga()})}function oa(ea,Pa,kb,vc,mc,Yb,ud,id){function ue(Hf){sg++;Tg||(Hf?(Tg=Hf,id(Tg)):sg===Kh.length&&gg())}function ye(Hf,hg,Ag,Ch){return function(Xh){qa(Hf,"md5-"+Xh,hg,Ag,Ch)}}function nf(Hf,hg,Ag){return function(Ch){FB.binaryMd5(Ch,
ye(Hf,hg,Ch,Ag))}}function gg(){var Hf=ea.metadata.rev_map[ea.metadata.rev];if(Hf)return id();Hf=++Aa;ea.metadata.rev_map[ea.metadata.rev]=ea.metadata.seq=Hf;Hf=[{key:z(Hf),value:ea.data,prefix:F.bySeqStore,type:"put"},{key:ea.metadata.id,value:ea.metadata,prefix:F.docStore,type:"put"}];ca.batch(Hf);H[ud]={ok:!0,id:ea.metadata.id,rev:ea.metadata.rev};M.set(ea.metadata.id,ea.metadata);id()}Z+=Yb;var Tg=null,sg=0;ea.metadata.winningRev=Pa;ea.metadata.deleted=kb;ea.data._id=ea.metadata.id;ea.data._rev=
ea.metadata.rev;vc&&(ea.data._deleted=!0);ea.stemmedRevs.length&&R.set(ea.metadata.id,ea.stemmedRevs);var Kh=ea.data._attachments?Object.keys(ea.data._attachments):[];for(Pa=0;Pa<Kh.length;Pa++)if(kb=Kh[Pa],vc=ea.data._attachments[kb],vc.stub)ba(ea.data._id,ea.data._rev,vc.digest,ue);else if("string"===typeof vc.data){try{var zg=sD.atob(vc.data)}catch(Hf){O(Jf.createError(Jf.BAD_ARG,"Attachment is not a valid base64 string"));return}nf(ea,kb,ue)(zg)}else Daa(vc.data,nf(ea,kb,ue));Kh.length||gg()}
function ba(ea,Pa,kb,vc){function mc(){return new Promise(function(id,ue){ca.get(F.attachmentStore,kb,function(ye,nf){if(ye&&"NotFoundError"!==ye.name)return ue(ye);id(nf)})})}function Yb(id){var ue=[ea,Pa].join("@"),ye={};id?id.refs&&(ye.refs=id.refs,ye.refs[ue]=!0):(ye.refs={},ye.refs[ue]=!0);return new Promise(function(nf){ca.batch([{type:"put",prefix:F.attachmentStore,key:kb,value:ye}]);nf(!id)})}var ud=da[kb]||Promise.resolve();da[kb]=ud.then(function(){return mc().then(Yb).then(function(id){vc(null,
id)},vc)})}function qa(ea,Pa,kb,vc,mc){kb=ea.data._attachments[kb];delete kb.data;kb.digest=Pa;kb.length=vc.length;var Yb=ea.metadata.id;ea=ea.metadata.rev;kb.revpos=parseInt(ea,10);ba(Yb,ea,Pa,function(ud,id){if(ud||0===vc.length||!id)return mc(ud);ca.batch([{type:"put",prefix:F.binaryStore,key:Pa,value:Lka(vc,"binary")}]);mc()})}function Ga(ea){if(ea)return og.nextTick(function(){O(ea)});ca.batch([{prefix:F.metaStore,type:"put",key:"_local_last_update_seq",value:Aa},{prefix:F.metaStore,type:"put",
key:"_local_doc_count",value:D._docCount+Z}]);ca.execute(D,function(Pa){if(Pa)return O(Pa);D._docCount+=Z;D._updateSeq=Aa;KE.notify(L);og.nextTick(function(){O(null,H)})})}var ua=J.new_edits,H=Array(Q.docs.length),M=new Mr.Map,R=new Mr.Map,ca=new Hy,Z=0,Aa=D._updateSeq,db=Q.docs,S=db.map(function(ea){if(ea._id&&Dl.isLocalId(ea._id))return ea;ea=Dl.parseDoc(ea,ua,C.__opts);ea.metadata&&!ea.metadata.rev_map&&(ea.metadata.rev_map={});return ea});Q=S.filter(function(ea){return ea.error});if(Q.length)return O(Q[0]);
var da={};if(!S.length)return O(null,[]);(function(ea){var Pa=[];db.forEach(function(mc){mc&&mc._attachments&&Object.keys(mc._attachments).forEach(function(Yb){Yb=mc._attachments[Yb];Yb.stub&&Pa.push(Yb.digest)})});if(!Pa.length)return ea();var kb=0,vc;Pa.forEach(function(mc){ja(mc,function(Yb){Yb&&!vc&&(vc=Yb);++kb===Pa.length&&ea(vc)})})})(function(ea){if(ea)return O(ea);X(function(Pa){if(Pa)return O(Pa);Dl.processDocs(N,S,C,M,ca,H,oa,J,pb)})})});C._allDocs=function(Q,J){return"keys"in Q?Dl.allDocsKeysQuery(this,
Q):y(function(O,ja){O=og.clone(O);f(function(X,ha){if(X)return ja(X);X={};var bb=O.skip||0;O.startkey&&(X.gte=O.startkey);O.endkey&&(X.lte=O.endkey);O.key&&(X.gte=X.lte=O.key);if(O.descending){X.reverse=!0;var pb=X.lte;X.lte=X.gte;X.gte=pb}if("number"===typeof O.limit)var oa=O.limit;if(0===oa||"gte"in X&&"lte"in X&&X.gte>X.lte)return X={total_rows:ha,offset:O.skip,rows:[]},O.update_seq&&(X.update_seq=D._updateSeq),ja(null,X);var ba=[],qa=F.docStore.readStream(X),Ga=r4.obj(function(ua,H,M){function R(db){var S=
{id:ca.id,key:ca.id,value:{rev:Z}};if(O.include_docs){S.doc=db;S.doc._rev=S.value.rev;O.conflicts&&(db=tD.collectConflicts(ca),db.length&&(S.doc._conflicts=db));for(var da in S.doc._attachments)S.doc._attachments.hasOwnProperty(da)&&(S.doc._attachments[da].stub=!0)}if(!1===O.inclusive_end&&ca.id===O.endkey)return M();if(Aa)if("ok"===O.deleted)S.value.deleted=!0,S.doc=null;else return M();ba.push(S);M()}var ca=ua.value,Z=$N(ca),Aa="deleted"in ca?ca.deleted:Dl.isDeleted(ca,Z);if(!Aa){if(0<bb--){M();
return}if("number"===typeof oa&&0>=oa--){qa.unpipe();qa.destroy();M();return}}else if("ok"!==O.deleted){M();return}O.include_docs?F.bySeqStore.get(z(ca.rev_map[Z]),function(db,S){R(S)}):R()},function(ua){Promise.resolve().then(function(){if(O.include_docs&&O.attachments)return aO(ba,F,O)}).then(function(){var H={total_rows:ha,offset:O.skip,rows:ba};O.update_seq&&(H.update_seq=D._updateSeq);ja(null,H)},ja);ua()}).on("unpipe",function(){Ga.end()});qa.on("error",ja);qa.pipe(Ga)})})(Q,J)};C._changes=
function(Q){function J(){Q.done=!0;Q.return_docs&&Q.limit&&Q.limit<X.length&&(X.length=Q.limit);ua.unpipe(H);ua.destroy();Q.continuous||Q.cancelled||(Q.include_docs&&Q.attachments&&Q.return_docs?aO(X,F,Q).then(function(){Q.complete(null,{results:X,last_seq:ha})}):Q.complete(null,{results:X,last_seq:ha}))}Q=og.clone(Q);if(Q.continuous){var O=L+":"+og.uuid();KE.addListener(L,O,C,Q);KE.notify(L);return{cancel:function(){KE.removeListener(L,O)}}}var ja=Q.descending,X=[],ha=Q.since||0,bb=0,pb={reverse:ja};
if("limit"in Q&&0<Q.limit)var oa=Q.limit;pb.reverse||(pb.start=z(Q.since||0));var ba=Q.doc_ids&&new Mr.Set(Q.doc_ids),qa=og.filterChange(Q),Ga=new Mr.Map,ua=F.bySeqStore.readStream(pb),H=r4.obj(function(M,R,ca){function Z(S){function da(Pa){var kb=Q.processChange(Pa,S,Q);kb.seq=S.seq;Pa=qa(kb);if("object"===typeof Pa)return Q.complete(Pa);if(Pa){bb++;if(Q.attachments&&Q.include_docs)aO([kb],F,Q).then(function(){Q.onChange(kb)});else Q.onChange(kb);Q.return_docs&&X.push(kb)}ca()}var ea=$N(S);if(S.seq!==
Aa)return ca();ha=Aa;if(ea===db._rev)return da(db);F.bySeqStore.get(z(S.rev_map[ea]),function(Pa,kb){da(kb)})}if(oa&&bb>=oa)return J(),ca();if(Q.cancelled||Q.done)return ca();var Aa=parseInt(M.key,10),db=M.value;if(Aa===Q.since&&!ja||ba&&!ba.has(db._id))return ca();if(M=Ga.get(db._id))return Z(M);F.docStore.get(db._id,function(S,da){if(Q.cancelled||Q.done||D.isClosed()||Dl.isLocalId(da.id))return ca();Ga.set(db._id,da);Z(da)})},function(M){if(Q.cancelled)return M();Q.return_docs&&Q.limit&&Q.limit<
X.length&&(X.length=Q.limit);M()}).on("unpipe",function(){H.end();J()});ua.pipe(H);return{cancel:function(){Q.cancelled=!0;J()}}};C._close=function(Q){if(D.isClosed())return Q(Jf.createError(Jf.NOT_OPEN));D.close(function(J){J?Q(J):(wa.delete(L),Q())})};C._getRevisionTree=function(Q,J){F.docStore.get(Q,function(O,ja){O?J(Jf.createError(Jf.MISSING_DOC)):J(null,ja.rev_tree)})};C._doCompaction=v(function(Q,J,O,ja){C._doCompactionNoLock(Q,J,O,ja)});C._doCompactionNoLock=function(Q,J,O,ja){"function"===
typeof O&&(ja=O,O={});if(!J.length)return ja();var X=O.ctx||new Hy;X.get(F.docStore,Q,function(ha,bb){function pb(M){M&&(H=M);if(++ua===J.length){if(H)return ja(H);ba()}}function oa(M){if(M)return ja(M);X.batch(qa);if(O.ctx)return ja();X.execute(D,ja)}function ba(){function M(db){db&&(Z=db);++ca===R.length&&oa(Z)}var R=Object.keys(Ga);if(!R.length)return oa();var ca=0,Z,Aa=new Mr.Map;J.forEach(function(db){Aa.set(Q+"@"+db,!0)});R.forEach(function(db){X.get(F.attachmentStore,db,function(S,da){if(S)return"NotFoundError"===
S.name?M():M(S);S=Object.keys(da.refs||{}).filter(function(Pa){return!Aa.has(Pa)});var ea={};S.forEach(function(Pa){ea[Pa]=!0});S.length?qa.push({key:db,type:"put",value:{refs:ea},prefix:F.attachmentStore}):qa=qa.concat([{key:db,type:"del",prefix:F.attachmentStore},{key:db,type:"del",prefix:F.binaryStore}]);M()})})}if(ha)return ja(ha);ha=J.map(function(M){var R=bb.rev_map[M];delete bb.rev_map[M];return R});tD.traverseRevTree(bb.rev_tree,function(M,R,ca,Z,Aa){-1!==J.indexOf(R+"-"+ca)&&(Aa.status="missing")});
var qa=[];qa.push({key:bb.id,value:bb,type:"put",prefix:F.docStore});var Ga={},ua=0,H;ha.forEach(function(M){qa.push({key:z(M),type:"del",prefix:F.bySeqStore});X.get(F.bySeqStore,z(M),function(R,ca){if(R)return"NotFoundError"===R.name?pb():pb(R);Object.keys(ca._attachments||{}).forEach(function(Z){Ga[ca._attachments[Z].digest]=!0});pb()})})})};C._getLocal=function(Q,J){F.localStore.get(Q,function(O,ja){O?J(Jf.createError(Jf.MISSING_DOC)):J(null,ja)})};C._putLocal=function(Q,J,O){"function"===typeof J&&
(O=J,J={});J.ctx?C._putLocalNoLock(Q,J,O):C._putLocalWithLock(Q,J,O)};C._putLocalWithLock=v(function(Q,J,O){C._putLocalNoLock(Q,J,O)});C._putLocalNoLock=function(Q,J,O){delete Q._revisions;var ja=Q._rev,X=Q._id,ha=J.ctx||new Hy;ha.get(F.localStore,X,function(bb,pb){if(bb&&ja||pb&&pb._rev!==ja)return O(Jf.createError(Jf.REV_CONFLICT));Q._rev=ja?"0-"+(parseInt(ja.split("-")[1],10)+1):"0-1";ha.batch([{type:"put",prefix:F.localStore,key:X,value:Q}]);var oa={ok:!0,id:Q._id,rev:Q._rev};if(J.ctx)return O(null,
oa);ha.execute(D,function(ba){if(ba)return O(ba);O(null,oa)})})};C._removeLocal=function(Q,J,O){"function"===typeof J&&(O=J,J={});J.ctx?C._removeLocalNoLock(Q,J,O):C._removeLocalWithLock(Q,J,O)};C._removeLocalWithLock=v(function(Q,J,O){C._removeLocalNoLock(Q,J,O)});C._removeLocalNoLock=function(Q,J,O){var ja=J.ctx||new Hy;ja.get(F.localStore,Q._id,function(X,ha){if(X)return"NotFoundError"!==X.name?O(X):O(Jf.createError(Jf.MISSING_DOC));if(ha._rev!==Q._rev)return O(Jf.createError(Jf.REV_CONFLICT));
ja.batch([{prefix:F.localStore,type:"del",key:Q._id}]);var bb={ok:!0,id:Q._id,rev:"0-0"};if(J.ctx)return O(null,bb);ja.execute(D,function(pb){if(pb)return O(pb);O(null,bb)})})};C._destroy=function(Q,J){Q=og.functionName(W);if(JE.has(Q))var O=JE.get(Q);else return A(L,J);O.has(L)?(KE.removeAllListeners(L),O.get(L).close(function(){O.delete(L);A(L,J)})):A(L,J)}},Iy="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Oka={},t4=Nh;bO.prototype.next=function(b){var c=this||
Iy;if("function"!=typeof b)throw Error("next() requires a callback argument");if(c._ended)return b(Error("cannot call next() after end()"));if(c._nexting)return b(Error("cannot call next() before previous next() has completed"));c._nexting=!0;if("function"==typeof c._next)return c._next(function(){c._nexting=!1;b.apply(null,arguments)});t4.nextTick(function(){c._nexting=!1;b()})};bO.prototype.end=function(b){if("function"!=typeof b)throw Error("end() requires a callback argument");if((this||Iy)._ended)return b(Error("end() already called on iterator"));
(this||Iy)._ended=!0;if("function"==typeof(this||Iy)._end)return this._end(b);t4.nextTick(b)};var u4=Oka=bO,Nj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Pka={},Qka=Nh;Bw.prototype._serializeKey=function(b){return(this||Nj)._db._serializeKey(b)};Bw.prototype._serializeValue=function(b){return(this||Nj)._db._serializeValue(b)};Bw.prototype._checkWritten=function(){if((this||Nj)._written)throw Error("write() already called on this batch");};Bw.prototype.put=function(b,
c){this._checkWritten();var l=(this||Nj)._db._checkKey(b,"key",(this||Nj)._db._isBuffer);if(l)throw l;b=this._serializeKey(b);c=this._serializeValue(c);"function"==typeof(this||Nj)._put?this._put(b,c):(this||Nj)._operations.push({type:"put",key:b,value:c});return this||Nj};Bw.prototype.del=function(b){this._checkWritten();var c=(this||Nj)._db._checkKey(b,"key",(this||Nj)._db._isBuffer);if(c)throw c;b=this._serializeKey(b);"function"==typeof(this||Nj)._del?this._del(b):(this||Nj)._operations.push({type:"del",
key:b});return this||Nj};Bw.prototype.clear=function(){this._checkWritten();(this||Nj)._operations=[];"function"==typeof(this||Nj)._clear&&this._clear();return this||Nj};Bw.prototype.write=function(b,c){this._checkWritten();"function"==typeof b&&(c=b);if("function"!=typeof c)throw Error("write() requires a callback argument");"object"!=typeof b&&(b={});(this||Nj)._written=!0;if("function"==typeof(this||Nj)._write)return this._write(c);if("function"==typeof(this||Nj)._db._batch)return(this||Nj)._db._batch((this||
Nj)._operations,b,c);Qka.nextTick(c)};var Rka=Pka=Bw,vk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,v4={},Ska=$g.Buffer,ex=Nh;zn.prototype.open=function(b,c){var l=this||vk,a=(this||vk).status;"function"==typeof b&&(c=b);if("function"!=typeof c)throw Error("open() requires a callback argument");"object"!=typeof b&&(b={});b.createIfMissing=0!=b.createIfMissing;b.errorIfExists=!!b.errorIfExists;"function"==typeof(this||vk)._open?((this||vk).status="opening",this._open(b,
function(f){if(f)return l.status=a,c(f);l.status="open";c()})):((this||vk).status="open",ex.nextTick(c))};zn.prototype.close=function(b){var c=this||vk,l=(this||vk).status;if("function"!=typeof b)throw Error("close() requires a callback argument");"function"==typeof(this||vk)._close?((this||vk).status="closing",this._close(function(a){if(a)return c.status=l,b(a);c.status="closed";b()})):((this||vk).status="closed",ex.nextTick(b))};zn.prototype.get=function(b,c,l){var a;"function"==typeof c&&(l=c);
if("function"!=typeof l)throw Error("get() requires a callback argument");if(a=this._checkKey(b,"key"))return l(a);b=this._serializeKey(b);"object"!=typeof c&&(c={});c.asBuffer=0!=c.asBuffer;if("function"==typeof(this||vk)._get)return this._get(b,c,l);ex.nextTick(function(){l(Error("NotFound"))})};zn.prototype.put=function(b,c,l,a){var f;"function"==typeof l&&(a=l);if("function"!=typeof a)throw Error("put() requires a callback argument");if(f=this._checkKey(b,"key"))return a(f);b=this._serializeKey(b);
c=this._serializeValue(c);"object"!=typeof l&&(l={});if("function"==typeof(this||vk)._put)return this._put(b,c,l,a);ex.nextTick(a)};zn.prototype.del=function(b,c,l){var a;"function"==typeof c&&(l=c);if("function"!=typeof l)throw Error("del() requires a callback argument");if(a=this._checkKey(b,"key"))return l(a);b=this._serializeKey(b);"object"!=typeof c&&(c={});if("function"==typeof(this||vk)._del)return this._del(b,c,l);ex.nextTick(l)};zn.prototype.batch=function(b,c,l){if(!arguments.length)return this._chainedBatch();
"function"==typeof c&&(l=c);"function"==typeof b&&(l=b);if("function"!=typeof l)throw Error("batch(array) requires a callback argument");if(!Array.isArray(b))return l(Error("batch(array) requires an array argument"));c&&"object"==typeof c||(c={});for(var a=0,f=b.length,m,q;a<f;a++)if(m=b[a],"object"==typeof m&&((q=this._checkKey(m.type,"type"))||(q=this._checkKey(m.key,"key"))))return l(q);if("function"==typeof(this||vk)._batch)return this._batch(b,c,l);ex.nextTick(l)};zn.prototype.approximateSize=
function(b,c,l){if(null==b||null==c||"function"==typeof b||"function"==typeof c)throw Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof l)throw Error("approximateSize() requires a callback argument");b=this._serializeKey(b);c=this._serializeKey(c);if("function"==typeof(this||vk)._approximateSize)return this._approximateSize(b,c,l);ex.nextTick(function(){l(null,0)})};zn.prototype._setupIteratorOptions=function(b){var c=this||vk;b=cx(b);"start end gt gte lt lte".split(" ").forEach(function(l){b[l]&&
c._isBuffer(b[l])&&0===b[l].length&&delete b[l]});b.reverse=!!b.reverse;b.keys=0!=b.keys;b.values=0!=b.values;b.limit="limit"in b?b.limit:-1;b.keyAsBuffer=0!=b.keyAsBuffer;b.valueAsBuffer=0!=b.valueAsBuffer;return b};zn.prototype.iterator=function(b){"object"!=typeof b&&(b={});b=this._setupIteratorOptions(b);return"function"==typeof(this||vk)._iterator?this._iterator(b):new u4(this||vk)};zn.prototype._chainedBatch=function(){return new Rka(this||vk)};zn.prototype._isBuffer=function(b){return Ska.isBuffer(b)};
zn.prototype._serializeKey=function(b){return this._isBuffer(b)?b:String(b)};zn.prototype._serializeValue=function(b){return null==b?"":this._isBuffer(b)||ex.browser?b:String(b)};zn.prototype._checkKey=function(b,c){if(null===b||void 0===b)return Error(c+" cannot be `null` or `undefined`");if(this._isBuffer(b)&&0===b.length)return Error(c+" cannot be an empty Buffer");if(""===String(b))return Error(c+" cannot be an empty String")};v4=zn;var Tka=v4;var w4={};w4=function(b){return new PA(b||Faa,null)};
var Hn=PA.prototype;Object.defineProperty(Hn,"keys",{get:function(){var b=[];this.forEach(function(c,l){b.push(c)});return b}});Object.defineProperty(Hn,"values",{get:function(){var b=[];this.forEach(function(c,l){b.push(l)});return b}});Object.defineProperty(Hn,"length",{get:function(){return this.root?this.root._count:0}});Hn.insert=function(b,c){for(var l=this._compare,a=this.root,f=[],m=[];a;){var q=l(b,a.key);f.push(a);m.push(q);a=0>=q?a.left:a.right}f.push(new ip(0,b,c,null,null,1));for(b=f.length-
2;0<=b;--b)a=f[b],f[b]=0>=m[b]?new ip(a._color,a.key,a.value,f[b+1],a.right,a._count+1):new ip(a._color,a.key,a.value,a.left,f[b+1],a._count+1);for(b=f.length-1;1<b;--b){m=f[b-1];a=f[b];if(1===m._color||1===a._color)break;c=f[b-2];if(c.left===m)if(m.left===a)if((q=c.right)&&0===q._color)m._color=1,c.right=Cw(1,q),c._color=0,--b;else{c._color=0;c.left=m.right;m._color=1;m.right=c;f[b-2]=m;f[b-1]=a;Oj(c);Oj(m);3<=b&&(b=f[b-3],b.left===c?b.left=m:b.right=m);break}else if((q=c.right)&&0===q._color)m._color=
1,c.right=Cw(1,q),c._color=0,--b;else{m.right=a.left;c._color=0;c.left=a.right;a._color=1;a.left=m;a.right=c;f[b-2]=a;f[b-1]=m;Oj(c);Oj(m);Oj(a);3<=b&&(b=f[b-3],b.left===c?b.left=a:b.right=a);break}else if(m.right===a)if((q=c.left)&&0===q._color)m._color=1,c.left=Cw(1,q),c._color=0,--b;else{c._color=0;c.right=m.left;m._color=1;m.left=c;f[b-2]=m;f[b-1]=a;Oj(c);Oj(m);3<=b&&(b=f[b-3],b.right===c?b.right=m:b.left=m);break}else if((q=c.left)&&0===q._color)m._color=1,c.left=Cw(1,q),c._color=0,--b;else{m.left=
a.right;c._color=0;c.right=a.left;a._color=1;a.right=m;a.left=c;f[b-2]=a;f[b-1]=m;Oj(c);Oj(m);Oj(a);3<=b&&(b=f[b-3],b.right===c?b.right=a:b.left=a);break}}f[0]._color=1;return new PA(l,f[0])};Hn.forEach=function(b,c,l){if(this.root)switch(arguments.length){case 1:return cO(b,this.root);case 2:return dO(c,this._compare,b,this.root);case 3:if(!(0<=this._compare(c,l)))return eO(c,l,this._compare,b,this.root)}};Object.defineProperty(Hn,"begin",{get:function(){for(var b=[],c=this.root;c;)b.push(c),c=c.left;
return new jp(this,b)}});Object.defineProperty(Hn,"end",{get:function(){for(var b=[],c=this.root;c;)b.push(c),c=c.right;return new jp(this,b)}});Hn.at=function(b){if(0>b)return new jp(this,[]);for(var c=this.root,l=[];;){l.push(c);if(c.left){if(b<c.left._count){c=c.left;continue}b-=c.left._count}if(!b)return new jp(this,l);--b;if(c.right){if(b>=c.right._count)break;c=c.right}else break}return new jp(this,[])};Hn.ge=function(b){for(var c=this._compare,l=this.root,a=[],f=0;l;){var m=c(b,l.key);a.push(l);
0>=m&&(f=a.length);l=0>=m?l.left:l.right}a.length=f;return new jp(this,a)};Hn.gt=function(b){for(var c=this._compare,l=this.root,a=[],f=0;l;){var m=c(b,l.key);a.push(l);0>m&&(f=a.length);l=0>m?l.left:l.right}a.length=f;return new jp(this,a)};Hn.lt=function(b){for(var c=this._compare,l=this.root,a=[],f=0;l;){var m=c(b,l.key);a.push(l);0<m&&(f=a.length);l=0>=m?l.left:l.right}a.length=f;return new jp(this,a)};Hn.le=function(b){for(var c=this._compare,l=this.root,a=[],f=0;l;){var m=c(b,l.key);a.push(l);
0<=m&&(f=a.length);l=0>m?l.left:l.right}a.length=f;return new jp(this,a)};Hn.find=function(b){for(var c=this._compare,l=this.root,a=[];l;){var f=c(b,l.key);a.push(l);if(0===f)return new jp(this,a);l=0>=f?l.left:l.right}return new jp(this,[])};Hn.remove=function(b){return(b=this.find(b))?b.remove():this};Hn.get=function(b){for(var c=this._compare,l=this.root;l;){var a=c(b,l.key);if(0===a)return l.value;l=0>=a?l.left:l.right}};var Gq=jp.prototype;Object.defineProperty(Gq,"valid",{get:function(){return 0<
this._stack.length}});Object.defineProperty(Gq,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});Gq.clone=function(){return new jp(this.tree,this._stack.slice())};Gq.remove=function(){var b=this._stack;if(0===b.length)return this.tree;var c=Array(b.length),l=b[b.length-1];c[c.length-1]=new ip(l._color,l.key,l.value,l.left,l.right,l._count);for(var a=b.length-2;0<=a;--a)l=b[a],c[a]=l.left===b[a+1]?new ip(l._color,l.key,l.value,c[a+1],l.right,
l._count):new ip(l._color,l.key,l.value,l.left,c[a+1],l._count);l=c[c.length-1];if(l.left&&l.right){b=c.length;for(l=l.left;l.right;)c.push(l),l=l.right;a=c[b-1];c.push(new ip(l._color,a.key,a.value,l.left,l.right,l._count));c[b-1].key=l.key;c[b-1].value=l.value;for(a=c.length-2;a>=b;--a)l=c[a],c[a]=new ip(l._color,l.key,l.value,l.left,c[a+1],l._count);c[b-1].left=c[b]}l=c[c.length-1];if(0===l._color)for(a=c[c.length-2],a.left===l?a.left=null:a.right===l&&(a.right=null),c.pop(),a=0;a<c.length;++a)c[a]._count--;
else if(l.left||l.right)for(l.left?g_(l,l.left):l.right&&g_(l,l.right),l._color=1,a=0;a<c.length-1;++a)c[a]._count--;else{if(1===c.length)return new PA(this.tree._compare,null);for(a=0;a<c.length;++a)c[a]._count--;a=c[c.length-2];for(var f,m,q,r=c.length-1;0<=r;--r){b=c[r];if(0===r){b._color=1;break}f=c[r-1];if(f.left===b){m=f.right;if(m.right&&0===m.right._color){m=f.right=kt(m);q=m.right=kt(m.right);f.right=m.left;m.left=f;m.right=q;m._color=f._color;b._color=1;f._color=1;q._color=1;Oj(f);Oj(m);
if(1<r){var u=c[r-2];u.left===f?u.left=m:u.right=m}c[r-1]=m;break}else if(m.left&&0===m.left._color){m=f.right=kt(m);q=m.left=kt(m.left);f.right=q.left;m.left=q.right;q.left=f;q.right=m;q._color=f._color;f._color=1;m._color=1;b._color=1;Oj(f);Oj(m);Oj(q);1<r&&(u=c[r-2],u.left===f?u.left=q:u.right=q);c[r-1]=q;break}if(1===m._color)if(0===f._color){f._color=1;f.right=Cw(0,m);break}else f.right=Cw(0,m);else m=kt(m),f.right=m.left,m.left=f,m._color=f._color,f._color=0,Oj(f),Oj(m),1<r&&(u=c[r-2],u.left===
f?u.left=m:u.right=m),c[r-1]=m,c[r]=f,r+1<c.length?c[r+1]=b:c.push(b),r+=2}else{m=f.left;if(m.left&&0===m.left._color){m=f.left=kt(m);q=m.left=kt(m.left);f.left=m.right;m.right=f;m.left=q;m._color=f._color;b._color=1;f._color=1;q._color=1;Oj(f);Oj(m);1<r&&(u=c[r-2],u.right===f?u.right=m:u.left=m);c[r-1]=m;break}else if(m.right&&0===m.right._color){m=f.left=kt(m);q=m.right=kt(m.right);f.left=q.right;m.right=q.left;q.right=f;q.left=m;q._color=f._color;f._color=1;m._color=1;b._color=1;Oj(f);Oj(m);Oj(q);
1<r&&(u=c[r-2],u.right===f?u.right=q:u.left=q);c[r-1]=q;break}if(1===m._color)if(0===f._color){f._color=1;f.left=Cw(0,m);break}else f.left=Cw(0,m);else m=kt(m),f.left=m.right,m.right=f,m._color=f._color,f._color=0,Oj(f),Oj(m),1<r&&(u=c[r-2],u.right===f?u.right=m:u.left=m),c[r-1]=m,c[r]=f,r+1<c.length?c[r+1]=b:c.push(b),r+=2}}a.left===l?a.left=null:a.right=null}return new PA(this.tree._compare,c[0])};Object.defineProperty(Gq,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-
1].key},enumerable:!0});Object.defineProperty(Gq,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(Gq,"index",{get:function(){var b=0,c=this._stack;if(0===c.length)return(b=this.tree.root)?b._count:0;c[c.length-1].left&&(b=c[c.length-1].left._count);for(var l=c.length-2;0<=l;--l)c[l+1]===c[l].right&&(++b,c[l].left&&(b+=c[l].left._count));return b},enumerable:!0});Gq.next=function(){var b=this._stack;if(0!==b.length){var c=
b[b.length-1];if(c.right)for(c=c.right;c;)b.push(c),c=c.left;else for(b.pop();0<b.length&&b[b.length-1].right===c;)c=b[b.length-1],b.pop()}};Object.defineProperty(Gq,"hasNext",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].right)return!0;for(var c=b.length-1;0<c;--c)if(b[c-1].left===b[c])return!0;return!1}});Gq.update=function(b){var c=this._stack;if(0===c.length)throw Error("Can't update empty node!");var l=Array(c.length),a=c[c.length-1];l[l.length-1]=new ip(a._color,
a.key,b,a.left,a.right,a._count);for(b=c.length-2;0<=b;--b)a=c[b],l[b]=a.left===c[b+1]?new ip(a._color,a.key,a.value,l[b+1],a.right,a._count):new ip(a._color,a.key,a.value,a.left,l[b+1],a._count);return new PA(this.tree._compare,l[0])};Gq.prev=function(){var b=this._stack;if(0!==b.length){var c=b[b.length-1];if(c.left)for(c=c.left;c;)b.push(c),c=c.right;else for(b.pop();0<b.length&&b[b.length-1].left===c;)c=b[b.length-1],b.pop()}};Object.defineProperty(Gq,"hasPrev",{get:function(){var b=this._stack;
if(0===b.length)return!1;if(b[b.length-1].left)return!0;for(var c=b.length-1;0<c;--c)if(b[c-1].right===b[c])return!0;return!1}});var Uka=w4,jK={},kK=$g,Xu=kK.Buffer;Xu.from&&Xu.alloc&&Xu.allocUnsafe&&Xu.allocUnsafeSlow?jK=kK:(h_(kK,jK),jK.Buffer=QA);h_(Xu,QA);QA.from=function(b,c,l){if("number"===typeof b)throw new TypeError("Argument must not be a number");return Xu(b,c,l)};QA.alloc=function(b,c,l){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=Xu(b);void 0!==c?"string"===
typeof l?b.fill(c,l):b.fill(c):b.fill(0);return b};QA.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return Xu(b)};QA.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return kK.SlowBuffer(b)};var Se="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Vka={},x4=Fj,j_=Tka,i_=u4,kp=qk,Kaa=Uka,lK=jK.Buffer,RA={};x4(CH,i_);CH.prototype._next=function(b){if((this||Se)._done++>=
(this||Se)._limit||!(this||Se)._tree.valid)return ki(b);var c=(this||Se)._tree.key;var l=(this||Se)._tree.value;if(!this._test(c))return ki(b);(this||Se).keyAsBuffer&&(c=lK.from(c));(this||Se).valueAsBuffer&&(l=lK.from(l));(this||Se)._tree[(this||Se)._incr]();ki(function(){b(null,c,l)})};CH.prototype._test=function(){return!0};ro.clearGlobalStore=function(b){b?Object.keys(RA).forEach(function(c){delete RA[c]}):RA={}};x4(ro,j_);ro.prototype._open=function(b,c){var l=this||Se;ki(function(){c(null,l)})};
ro.prototype._put=function(b,c,l,a){if("undefined"===typeof c||null===c)c="";l=(this||Se)._store[(this||Se)._location].find(b);(this||Se)._store[(this||Se)._location]=l.valid?l.update(c):(this||Se)._store[(this||Se)._location].insert(b,c);ki(a)};ro.prototype._get=function(b,c,l){var a=(this||Se)._store[(this||Se)._location].get(b);if("undefined"===typeof a)return ki(function(){l(Error("NotFound"))});!1===c.asBuffer||this._isBuffer(a)||(a=lK.from(String(a)));ki(function(){l(null,a)})};ro.prototype._del=
function(b,c,l){(this||Se)._store[(this||Se)._location]=(this||Se)._store[(this||Se)._location].remove(b);ki(l)};ro.prototype._batch=function(b,c,l){c=-1;for(var a,f,m,q=b.length,r=(this||Se)._store[(this||Se)._location];++c<q;)b[c]&&(a=this._isBuffer(b[c].key)?b[c].key:String(b[c].key),m=r.find(a),"put"===b[c].type?(f=this._isBuffer(b[c].value)?b[c].value:String(b[c].value),r=m.valid?m.update(f):r.insert(a,f)):r=m.remove());(this||Se)._store[(this||Se)._location]=r;ki(l)};ro.prototype._iterator=
function(b){return new CH(this||Se,b)};ro.prototype._isBuffer=function(b){return lK.isBuffer(b)};ro.destroy=function(b,c){b="$"+b;b in RA&&delete RA[b];ki(c)};var Wka=Vka=ro.default=ro,Xka={},Laa=og,Naa=k_(Nka),Maa=k_(Wka);fO.valid=function(){return!0};fO.use_prefix=!1;var Yka=Xka=function(b){b.adapter("memory",fO,!0)},Ug=lively.FreezerRuntime.recorderFor("lively.storage/database.js");Ug.nodejsRequire=function(b){if(!Ug.isNode)throw Error("nodejsRequire can only be used in nodejs!");return"undefined"!==
typeof System?System._nodeRequire(b):require("module")._load(b)};Ug.nodejs_leveldbPath=function(b){if(b.startsWith("/"))return b;if(b.match(/[^\/]+:\/\//))return b.startsWith("file:")&&(b=b.replace(/^file:\/\//,"")),b;if(!Ug.isNode)throw Error("nodejs_leveldbPath called under non-nodejs environment");var c="undefined"!==typeof System&&System.baseURL.startsWith("file://")?System.baseURL.replace("file://",""):Ug.GLOBAL.process.cwd(),l=Ug.nodejsRequire("path").join,a=Ug.nodejsRequire("fs"),f=a.mkdirSync,
m=a.existsSync;a=a.readFileSync;if(b.includes("/"))return l(c,b);try{var q=a(l(c,"../package.json")),r=JSON.parse(q);if("lively.web"===r.name||"lively.next"===r.name){var u=l(c,"../.livelydbs");m(u)||f(u);return l(u,b)}}catch(v){}c=l(c,".livelydbs");m(c)||f(c);return l(c,b)};Ug.nodejs_attemptToLoadProperPouchDB=function(){if(!Ug.isNode)throw Error("nodejs_attemptToLoadProperPouchDB called under non-nodejs environment");if("undefined"!==typeof System){var b=System._nodeRequire("path").join,c=System.normalizeSync("lively.storage/index.js");
c=System.normalizeSync("pouchdb",c).replace(/file:\/\//,"");b=b(c,"../../lib/index.js");try{return Ug.PouchDB=System._nodeRequire(b),Ug.PouchDB.plugin(Ug.pouchdbAdapterMem),!0}catch(l){return!1}}try{return Ug.PouchDB=require("pouchdb"),Ug.PouchDB.plugin(Ug.pouchdbAdapterMem),!0}catch(l){return!1}};Ug._PouchDB=dga;Ug.pouchdbAdapterMem=Yka;Ug.Path=Xg;Ug.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Ug.isNode="undefined"!==typeof global&&
"undefined"!==typeof process;Ug.PouchDB=Ug._PouchDB;Ug.PouchDB.plugin&&Ug.pouchdbAdapterMem&&Ug.PouchDB.plugin(Ug.pouchdbAdapterMem);Ug.createPouchDB=Ug.isNode?function(){var b=!1,c=!1;return function(l,a){a=void 0===a?{}:a;b||(b=!0,c=Ug.nodejs_attemptToLoadProperPouchDB());a.adapter||(a.adapter=l.startsWith("http")?"http":c?"leveldb":"memory");"leveldb"==a.adapter&&(l=Ug.nodejs_leveldbPath(l));a=Object.assign({},a,{name:l});return new Ug.PouchDB(a)}}():function(b,c){return new Ug.PouchDB(Object.assign({name:b},
c))};var jg=function(b,c){c=void 0===c?{}:c;this.name=b;this.options=c;this._pouchdb=null};jg.findDB=function(b){return this.databases.get(b)};jg.ensureDB=function(b,c){var l=this.findDB(b);if(l)return l;l=new this(b,c);this.databases.set(b,l);b.endsWith("lively.storage-meta")||this.createMetaEntryForDB(b,c);return l};jg.knownDBs=function(b,c){return Ug.Database.ensureDB("lively.storage-meta").getAll().then(function(l){return l.map(function(a){return a._id})})};jg.createMetaEntryForDB=function(b,
c){var l=Ug.Database.ensureDB("lively.storage-meta");l.has(b).then(function(a){return!a&&l.set(b,{created:Date.now(),options:c})})};jg.knowsDB=function(b){var c=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(l=c.ensureDB(b),f.yield(l.docCount(),2)):3!=f.nextAddress?(a=f.yieldResult,0<a?f.return(!0):f.yield(l.destroy(),3)):f.return(!1)})};jg.prototype.close=function(){this._pouchdb&&(this._pouchdb.close(),delete this._pouchdb)};jg.prototype.isDestroyed=
function(){return!!this.pouchdb._destroyed};jg.prototype.destroy=function(b){this.constructor.databases.delete(this.name);return this.isDestroyed()?{ok:!0}:this.pouchdb.destroy(b)};jg.prototype.update=function(b,c,l,a){a=void 0===a?0:a;var f=this,m,q,r,u,v,y,z,A,C,G,F,N,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){switch(W.nextAddress){case 1:return m=l=l||{},q=void 0===m.ensure?!0:m.ensure,r=void 0===m.retryOnConflict?!0:m.retryOnConflict,u=void 0===m.maxUpdateAttempts?10:m.maxUpdateAttempts,
v={latest:!0},y=f,z=y.pouchdb,W.setCatchFinallyBlocks(2),W.yield(z.get(b,v),4);case 4:A=W.yieldResult;W.leaveTryBlock(3);break;case 2:if(G=W.enterCatchBlock(),"not_found"!==G.name||!q)throw G;case 3:return W.yield(c(A),5);case 5:C=W.yieldResult;if(!C||"object"!==typeof C)return W.return(null);C._id!==b&&(C._id=b);A&&C._rev!==A._rev&&(C._rev=A._rev);W.setCatchFinallyBlocks(6);return W.yield(z.put(C),8);case 8:return F=W.yieldResult,N=F.rev,W.return(Object.assign(C,{_rev:N}));case 6:L=W.enterCatchBlock();
if("conflict"===L.name&&r&&a<u)return W.return(f.update(b,c,l,a+1));throw L;}})};jg.prototype.mixin=function(b,c,l){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.return(a.update(b,function(m){return Object.assign(m||{_id:b},c)},l))})};jg.prototype.set=function(b,c,l){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.return(a.update(b,function(m){return c},l))})};jg.prototype.get=function(b,c){c=void 0===c?{}:c;var l=this,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==
f.nextAddress)return f.setCatchFinallyBlocks(2),f.yield(l.pouchdb.get(b,c),4);if(2!=f.nextAddress)return f.return(f.yieldResult);a=f.enterCatchBlock();if("not_found"===a.name)return f.return(void 0);throw a;})};jg.prototype.has=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?l.yield(c.get(b),2):l.return(!!l.yieldResult)})};jg.prototype.add=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c.pouchdb.post(b))})};
jg.prototype.docList=function(b){b=void 0===b?{}:b;var c=this,l,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(c.pouchdb.allDocs(b),2);l=y.yieldResult;a=l.rows;f=[];for(m=0;m<a.length;m++)q=a[m],r=q.id,u=q.value,v=u.rev,f.push({id:r,rev:v});return y.return(f)})};jg.prototype.docCount=function(){var b=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.pouchdb.allDocs(),2);c=l.yieldResult;
return l.return(c.rows.length)})};jg.prototype.revList=function(b){var c=this,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(c.pouchdb.get(b,{revs:!0}),2);l=q.yieldResult;a=l._revisions;f=a.start;m=a.ids;return q.return(m.map(function(r){return f--+"-"+r}))})};jg.prototype.getAllRevisions=function(b,c){c=void 0===c?{}:c;var l=this,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==u.nextAddress?(a=c,f=void 0===
a.skip?0:a.skip,m=void 0===a.limit?0:a.limit,u.yield(l.revList(b),2)):3!=u.nextAddress?(q=u.yieldResult,0<f&&(q=q.slice(f)),0<m&&(q=q.slice(0,m)),r=q.map(function(v){return{rev:v,id:b}}),u.yield(l.getDocuments(r),3)):u.return(u.yieldResult)})};jg.prototype.getAll=function(b){b=void 0===b?{}:b;var c=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(c.pouchdb.allDocs(Object.assign({},b,{include_docs:!0})),2);l=f.yieldResult;a=l.rows;return f.return(a.map(function(m){return m.doc}))})};
jg.prototype.setDocuments=function(b,c){var l=this,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(l.pouchdb.bulkDocs(b,c),2);case 2:a=y.yieldResult,f=0;case 3:if(!(f<a.length)){y.jumpTo(5);break}m=b[f];q=a[f];if(q.ok||"conflict"!==q.name||m._rev){y.jumpTo(4);break}return y.yield(l.set(m._id,m),7);case 7:r=y.yieldResult,u=r._id,v=r._rev,a[f]={ok:!0,id:u,rev:v};case 4:f++;y.jumpTo(3);break;case 5:return y.return(a)}})};jg.prototype.updateDocuments=
function(b,c,l){var a=this,f,m,q,r,u,v,y,z,A,C,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:return F.yield(a.pouchdb.bulkDocs(b,l),2);case 2:f=F.yieldResult,m=[],q={},r=0;case 3:if(!(r<f.length)){if(!m.length){F.jumpTo(8);break}A=Object;C=A.assign;G=q;return F.yield(a.updateDocuments(m,c,l),9)}u=b[r];v=f[r];q[v._id||u._id]=v;if(v.ok||"conflict"!==v.name){F.jumpTo(4);break}return F.yield(a.get(u._id),7);case 7:if(y=F.yieldResult,z=c(y,u))z._id||(z._id=
u._id),z._rev||(z._rev=y._rev),m.push(z);case 4:r++;F.jumpTo(3);break;case 9:q=C.call(A,{},G,{},F.yieldResult);case 8:return F.return(q)}})};jg.prototype.getDocuments=function(b,c){c=void 0===c?{}:c;var l=this,a,f,m,q,r,u,v,y,z,A,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress)return a=c,f=void 0===a.ignoreErrors?!0:a.ignoreErrors,G.yield(l.pouchdb.bulkGet({docs:b}),2);m=G.yieldResult;q=m.results;r=[];for(u=0;u<q.length;u++)for(v=q[u],y=v.docs,z=v.id,console.assert(1===
y.length,"getDocuments: expected only one doc for "+z),A=0;A<y.length;A++)C=y[A],f&&!C.ok||r.push(C.ok||C.error||C);return G.return(r)})};jg.prototype.query=function(b,c){return this.pouchdb.query(b,c)};jg.prototype.remove=function(b,c,l){var a=this,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return"undefined"!==typeof c?(f={_id:b,_rev:c},q.jumpTo(2)):q.yield(a.get(b),3);2!=q.nextAddress&&(f=q.yieldResult);m=f;return q.return(m?a.pouchdb.remove(m):void 0)})};
jg.prototype.removeAll=function(){var b=this,c,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?(c=b.pouchdb,a.yield(c.allDocs(),2)):3!=a.nextAddress?(l=a.yieldResult,a.yield(Promise.all(l.rows.map(function(f){return c.remove(f.id,f.value.rev)})),3)):a.return(a.yieldResult)})};jg.prototype.replicateTo=function(b,c){b instanceof Ug.Database&&(b=b.pouchdb);return this.pouchdb.replicate.to(b,c)};jg.prototype.replicateFrom=function(b,c){b instanceof Ug.Database&&
(b=b.pouchdb);return this.pouchdb.replicate.from(b,c)};jg.prototype.sync=function(b,c){b instanceof Ug.Database&&(b=b.pouchdb);return this.pouchdb.sync(b,c)};jg.prototype.getConflicts=function(b){var c=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(c.pouchdb.query("conflict_index/conflict_index",Object.assign({reduce:!1,include_docs:!0,conflicts:!0},b)),2);l=f.yieldResult;a=l.rows;return f.return(a.map(function(m){var q={id:m.id,rev:m.doc._rev,
doc:m.doc};m.doc._conflicts&&(q.conflicts=m.doc._conflicts,delete m.doc._conflicts);return q}))})};jg.prototype.resolveConflicts=function(b,c){var l=this,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(l.pouchdb.get(b,{conflicts:!0}),2);case 2:return a=y.yieldResult,f=a._conflicts.map(function(z){return{id:b,rev:z}}),y.yield(l.getDocuments(f),3);case 3:m=y.yieldResult,q=a,r=$jscomp.makeIterator(m),u=r.next();case 4:if(u.done){y.jumpTo(6);
break}v=u.value;return y.yield(c(q,v),7);case 7:return(q=y.yieldResult)?y.yield(l.set(b,q),8):y.return(null);case 8:return q=y.yieldResult,y.yield(l.pouchdb.remove(v),5);case 5:u=r.next();y.jumpTo(4);break;case 6:return y.return(q)}})};jg.prototype.diffWith=function(b){var c=this,l,a,f,m,q,r,u,v,y,z,A,C,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return F.yield(b.docList(),2);if(3!=F.nextAddress)return l=F.yieldResult,F.yield(c.docList(),3);a=F.yieldResult;
f=l.reduce(function(N,L){var W={};return Object.assign(N,(W[L.id]=L.rev,W))},{});m=a.reduce(function(N,L){var W={};return Object.assign(N,(W[L.id]=L.rev,W))},{});q=[];r=[];u=[];for(v in f)y=f[v],(z=m[v])?y!=z&&u.push({right:{id:v,rev:y},left:{id:v,rev:z}}):r.push({id:v,rev:y});for(A in m)C=m[A],(G=f[A])||q.push({id:A,rev:C});return F.return({inLeft:q,inRight:r,changed:u})})};jg.loadDump=function(b,c){c=void 0===c?{}:c;var l=this,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==
u.nextAddress?(a=b,f=a.header,m=a.docs,q=c.name||f.name,r=l.ensureDB(q),u.yield(r.setDocuments(m,{new_edits:!1}),2)):u.return(r)})};jg.prototype.dump=function(b){b=void 0===b?{}:b;var c=this,l,a,f,m,q,r,u,v,y,z,A,C,G,F,N,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){if(1==W.nextAddress)return l=b,a=l.filterFn,f=l.name,m=l.type,q=l.dbInfo,r=c,u=r.name,v=r.pouchdb,z=y=f||u,A=m||v.type(),C=(new Date).toJSON(),G=Object,F=G.assign,W.yield(v.info(),2);if(3!=W.nextAddress)return N={name:z,
db_type:A,start_time:C,db_info:F.call(G,{},W.yieldResult,{db_name:y},q)},W.yield(c.getAll({attachments:!0}),3);L=W.yieldResult;"function"===typeof a&&(L=a(L,N));return W.return({header:N,docs:L})})};jg.prototype.backup=function(b){b=void 0===b?1:b;var c=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(l=c.name+"_backup_"+b,a=c.constructor.ensureDB(l),f.yield(c.replicateTo(a),2)):f.return(a)})};jg.prototype.migrate=function(b){var c=this,l,a,f,m,q,r;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(c.getAll(),2);if(3!=u.nextAddress){l=u.yieldResult;a=[];f=[];for(m=0;m<l.length;m++)q=l[m],(r=b(q,m))?(r.hasOwnProperty("_id")||(r._id=q._id),r.hasOwnProperty("_rev")&&delete r._rev,a.push(r)):f.push(q);return u.yield(c.setDocuments(a),3)}return u.return({migrated:a.length,unchanged:f.length})})};jg.prototype.createDesignDocs=function(b){return b.map(this.createDesignDoc)};jg.prototype.createDesignDoc=
function(b){var c=b.name,l=b.mapFn,a=b.reduceFn,f=b.filterFn;b={_id:"_design/"+c,version:void 0===b.version?1:b.version};f&&Ug.Path("filters."+c).set(b,f.toString(),!0);l&&Ug.Path("views."+c+".map").set(b,l.toString(),!0);a&&Ug.Path("views."+c+".reduce").set(b,a.toString(),!0);return b};jg.prototype.addDesignDocs=function(b,c){c=void 0===c?!1:c;var l=this,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?(a=l.createDesignDocs(b),m.yield(l.updateDocuments(a,
function(q,r){return!q.hasOwnProperty("version")||r.hasOwnProperty("version")&&r.version>q.version?r:null}),2)):3!=m.nextAddress?(f=m.yieldResult,c?m.yield(Promise.all(a.map(function(q){return l.designDocDoQueryStale(q._id)})),3):m.jumpTo(3)):m.return(f)})};jg.prototype.addDesignDoc=function(b,c){var l=b.name,a=b.mapFn,f=b.reduceFn,m=b.version;c=void 0===c?!1:c;var q=this,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==v.nextAddress?(r=q.createDesignDoc({name:l,mapFn:a,
reduceFn:f,version:m}),v.yield(q.set(r._id,r),2)):3!=v.nextAddress?(u=v.yieldResult,c?v.yield(q.designDocDoQueryStale(r._id),3):v.jumpTo(3)):v.return(u)})};jg.prototype.removeDesignDoc=function(b){return this.remove("_design/"+b)};jg.prototype.designDocDoQueryStale=function(b){b=$jscomp.makeIterator(b.split("/"));b.next();b=b.next().value;return this.query(b,{stale:"update_after"})};$jscomp.global.Object.defineProperties(jg.prototype,{pouchdb:{configurable:!0,enumerable:!0,get:function(){return this._pouchdb?
this._pouchdb:this._pouchdb=Ug.createPouchDB(this.name,this.options)}}});$jscomp.global.Object.defineProperties(jg,{PouchDB:{configurable:!0,enumerable:!0,get:function(){return Ug.PouchDB},set:function(b){Ug.PouchDB=b}},databases:{configurable:!0,enumerable:!0,get:function(){return this._databases||(this._databases=new Map)}}});Ug.Database=jg;Ug.default=jg;var Ld=lively.FreezerRuntime.recorderFor("lively.storage/objectdb.js");Ld.isHash=function(b){return"string"===typeof b&&40===b.length&&b.match(Ld.hashRe)};
Ld.checkArg=function(b,c,l){if("undefined"===typeof c&&"string"===typeof l&&!l.includes("undefined"))throw Error("parameter "+b+" is undefined");if(null===c&&"string"===typeof l&&!l.includes("null"))throw Error("parameter "+b+" is null");if("string"===typeof l){var a=typeof c,f=c?c.constructor.name:"";if(!l.split("|").some(function(m){return a===m||f===m}))throw Error('parameter "'+b+'" expected to be of type '+l+" but is "+(f||a));}if("function"===typeof l&&(c=l(c))&&c.error)throw Error('check of parameter "'+
b+'" failed: '+c.error);};Ld.checkArgs=function(b,c,l){for(var a in c)Ld.checkArg(a,b[a],c[a]);if("function"===typeof l&&(c=l(b))&&c.error)throw Error(c.error);return b};Ld.Database=jg;Ld.resource=T;Ld.obj=lf;Ld.promise=Kf;Ld.arr=Te;Ld.string=Hg;Ld.Path=Xg;Ld.parse=Bi;Ld.categorizer=MD;Ld.sha1=function(){function b(){var m=f.createHash("sha1");return{update:function(q){return m.update(q)},digest:function(){return m.digest("hex")}}}function c(m){function q(W){v[F]|=(255&W)<<N;N?N-=8:(F++,N=24);16===
F&&r()}function r(){for(var W=16;80>W;W++){var la=v[W-3]^v[W-8]^v[W-14]^v[W-16];v[W]=la<<1|la>>>31}var wa,D;la=y;var Q=z,J=A,O=C,ja=G;for(W=0;80>W;W++){20>W?(wa=O^Q&(J^O),D=1518500249):40>W?(wa=Q^J^O,D=1859775393):60>W?(wa=Q&J|O&(Q|J),D=2400959708):(wa=Q^J^O,D=3395469782);var X=(la<<5|la>>>27)+wa+ja+D+(0|v[W]);ja=O;O=J;J=Q<<30|Q>>>2;Q=la;la=X}y=y+la|0;z=z+Q|0;A=A+J|0;C=C+O|0;G=G+ja|0;for(W=F=0;16>W;W++)v[W]=0}function u(W){for(var la="",wa=28;0<=wa;wa-=4)la+=(W>>wa&15).toString(16);return la}var v,
y=1732584193,z=4023233417,A=2562383102,C=271733878,G=3285377520,F=0,N=24,L=0;return v=m?l:new Uint32Array(80),{update:function(W){if("string"==typeof W){var la=W.length;L+=8*la;for(var wa=0;wa<la;wa++)q(W.charCodeAt(wa))}else for(la=W.length,L+=8*la,wa=0;wa<la;wa++)q(W[wa])},digest:function(){q(128);(14<F||14===F&&24>N)&&r();F=14;N=24;q(0);q(0);q(0xffffffffff<L?L/1099511627776:0);q(4294967295<L?L/4294967296:0);for(var W=24;0<=W;W-=8)q(L>>W);return u(y)+u(z)+u(A)+u(C)+u(G)}}}var l,a,f;return"object"==
typeof process&&"object"==typeof process.versions&&process.versions.node&&"renderer"!==process.__atom_type?(f="undefined"!=typeof System?System._nodeRequire("crypto"):require("crypto"),a=b):(l=new Uint32Array(80),a=c),function(m){if(void 0===m)return a(!1);var q=a(!0);return q.update(m),q.digest()}}();Ld.hashRe=/^[0-9a-f]+$/i;Ld.objectDBs=Ld.objectDBs||new Map;var Og=function(b,c){this.name=b;if(!c.snapshotLocation||!c.snapshotLocation.isResource)throw Error("ObjectDB needs snapshotLocation!");this.snapshotLocation=
c.snapshotLocation;this.__versionDB=this.__commitDB=null};Og.dbList=function(){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?(b=Ld.Database.ensureDB("internal__objectdb-meta"),c.yield(b.getAll(),2)):c.return(c.yieldResult.map(function(l){return l._id}))})};Og.find=function(b){var c=this,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){if(l=Ld.objectDBs.get(b))return m.return(l);a=Ld.Database.ensureDB("internal__objectdb-meta");
return m.yield(a.get(b),2)}return(f=m.yieldResult)?m.return(c.named(b,f)):m.return()})};Og.named=function(b,c){c=void 0===c?{}:c;var l=Ld.objectDBs.get(b);if(l)return l;if(!c||!c.snapshotLocation)throw Error("need snapshotLocation");if("string"===typeof c.snapshotLocation)try{c.snapshotLocation=Ld.resource(c.snapshotLocation)}catch(a){c.snapshotLocation=Ld.resource(System.baseURL).join(c.snapshotLocation)}l=new this(b,c);Ld.objectDBs.set(b,l);Ld.Database.ensureDB("internal__objectdb-meta").set(b,
Object.assign({},c,{snapshotLocation:c.snapshotLocation.url})).catch(function(a){return console.error("error writing objectdb meta:",a)});return l};Og.prototype.destroy=function(){var b=this,c,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return(c=Ld.Database.findDB(b.name+"-commits"))?f.yield(c.destroy(),2):f.jumpTo(2);if(4!=f.nextAddress)return(l=Ld.Database.findDB(b.name+"-version-graph"))?f.yield(l.destroy(),4):f.jumpTo(4);Ld.objectDBs.delete(b.name);a=
Ld.Database.ensureDB("internal__objectdb-meta");return f.yield(a.remove(b.name),0)})};Og.prototype.snapshotResourceFor=function(b){var c=b.content.slice(0,2);b=b.content.slice(2);return this.snapshotLocation.join(c+"/"+b+".json")};Og.prototype.snapshotObject=function(b,c,l,a,f,m,q,r){var u=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return v=function(A){return A},z.yield(v(l),2);y=z.yieldResult;return z.return(u.commit(b,c,y,f,m,q,r))})};Og.prototype.loadObject=
function(b,c,l,a,f){var m=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(m.loadSnapshot(b,c,a,f),2);q=u.yieldResult;r=function(v){return v};return u.return(r(q))})};Og.prototype.has=function(b,c){var l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?a.yield(l.objectStats(b,c),2):a.return(!!a.yieldResult)})};Og.prototype.objects=function(b){var c=this,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return m.yield(c.objectStats(b),2);l=m.yieldResult;if(b)return m.return(Object.keys(l||{}));a={};for(f in l)a[f]=Object.keys(l[f]);return m.return(a)})};Og.prototype.objectStats=function(b,c){var l=this,a,f,m,q,r,u,v,y,z,A,C,G,F,N,L,W,la,wa,D,Q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:a={};if(f=l.__commitDB){J.jumpTo(2);break}return J.yield(l._commitDB(),3);case 3:f=J.yieldResult;case 2:return m=f,q={reduce:!0,group:!0},b&&c?q.key=b+
"\x00"+c:b&&(q.startkey=b+"\x00",q.endkey=b+"\ufff0"),J.setCatchFinallyBlocks(4),J.yield(m.pouchdb.query("nameWithMaxMinTimestamp_index",q),6);case 6:r=J.yieldResult;u=r.rows;v=$jscomp.makeIterator(u);for(y=v.next();!y.done;y=v.next())A=z=y.value,C=A.key,G=A.value,F=G.count,N=G.max,L=G.min,W=$jscomp.makeIterator(C.split("\x00")),la=W.next().value,wa=W.next().value,D=a[la]||(a[la]={}),D[wa]={count:F,newest:N,oldest:L};J.leaveTryBlock(5);break;case 4:return Q=J.enterCatchBlock(),console.error(Q),J.return(a);
case 5:return b&&c?J.return((a[b]||{})[c]):b?J.return(a[b]):J.return(a)}})};Og.prototype.getCommits=function(b,c,l,a){l=void 0===l?"HEAD":l;a=void 0===a?Infinity:a;var f=this,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(f._log(b,c,l,a),2);case 2:m=v.yieldResult;if(!m.length)return v.return([]);if(q=f.__commitDB){v.jumpTo(3);break}return v.yield(f._commitDB(),4);case 4:q=v.yieldResult;case 3:return r=q,v.yield(r.getDocuments(m.map(function(y){return{id:y}})),
5);case 5:return u=v.yieldResult,v.return(u)}})};Og.prototype.getCommit=function(b){var c=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return(l=c.__commitDB)?f.jumpTo(2):f.yield(c._commitDB(),3);2!=f.nextAddress&&(l=f.yieldResult);a=l;return f.return(a.get(b))})};Og.prototype.getCommitsWithIds=function(b){var c=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return b.length?(l=c.__commitDB)?f.jumpTo(2):f.yield(c._commitDB(),
3):f.return([]);2!=f.nextAddress&&(l=f.yieldResult);a=l;return f.return(a.getDocuments(b.map(function(m){return{id:m}})))})};Og.prototype.getLatestCommit=function(b,c,l,a){l=void 0===l?"HEAD":l;a=void 0===a?!1:a;var f=this,m,q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return m=$jscomp,q=m.makeIterator,A.yield(f._log(b,c,l,1),2);case 2:r=q.call(m,A.yieldResult);u=r.next().value;if(!u)return A.return(null);if(v=f.__commitDB){A.jumpTo(3);break}return A.yield(f._commitDB(),
4);case 4:v=A.yieldResult;case 3:return y=v,A.yield(y.get(u),5);case 5:return(z=A.yieldResult)&&z.deleted&&!a?A.return(null):A.return(z)}})};Og.prototype.commit=function(b,c,l,a,f,m,q){m=void 0===m?"HEAD":m;var r=this,u,v,y,z,A,C,G,F,N,L,W,la,wa,D,Q,J,O,ja,X;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ha){switch(ha.nextAddress){case 1:u=a;v=u.author;y=void 0===u.description?"no description":u.description;z=void 0===u.tags?[]:u.tags;A=u.timestamp;C=void 0===u.message?"":u.message;G=
u.metadata;F=u.preview;if(!b)throw Error("object needs a type");if(!c)throw Error("object needs a name");if(!v)throw Error("Cannot commit "+b+"/"+c+" without user");if(N=r.__versionDB){ha.jumpTo(2);break}return ha.yield(r._versionDB(),3);case 3:N=ha.yieldResult;case 2:return L=N,ha.yield(r.versionGraph(b,c),4);case 4:wa=(la=(W=ha.yieldResult)?W.refs[m]:null)?[la]:[];if(q){if(!W)throw Error('Trying to store "'+b+"/"+c+'" on top of expected version '+q+" but no version entry exists!");if(la!==q)throw Error('Trying to store "'+
b+"/"+c+'" on top of expected version '+q+" but ref "+m+" is of version "+la+"!");}Q=(D=Ld.isHash(l))?null:l?JSON.stringify(l):null;J=r._createCommit(b,c,y,z,G,v,A,C,wa,D?null:l,Q,f||F,D?l:null);if(!l||D){ha.jumpTo(5);break}O=r.snapshotResourceFor(J);return ha.yield(O.parent().ensureExistance(),6);case 6:return O.canDealWithJSON?ha.yield(O.writeJson(l),5):ha.yield(O.write(Q),5);case 5:if(ja=r.__commitDB){ha.jumpTo(11);break}return ha.yield(r._commitDB(),12);case 12:ja=ha.yieldResult;case 11:return X=
ja,ha.yield(X.set(J._id,J),13);case 13:return J=ha.yieldResult,W||(W={refs:{},history:{}}),W.refs[m]=J._id,W.history[J._id]=wa,ha.yield(L.set(b+"/"+c,W),14);case 14:return ha.return(J)}})};Og.prototype.loadSnapshot=function(b,c,l,a){a=void 0===a?"HEAD":a;var f=this,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:if(l&&"string"!==typeof l){m=l;u.jumpTo(2);break}if(l){if(q=f.__commitDB){u.jumpTo(6);break}return u.yield(f._commitDB(),7)}return u.yield(f.getLatestCommit(b,
c,a),5);case 5:m=u.yieldResult;u.jumpTo(2);break;case 7:q=u.yieldResult;case 6:return r=q,u.yield(r.get(l),8);case 8:m=u.yieldResult;case 2:if(!m)throw Error("Cannot find commit to loadSnapshot for "+b+"/"+c+" (using "+l+")");return u.return(f.snapshotResourceFor(m).readJson())}})};Og.prototype.revert=function(b,c,l,a){var f=this,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:if(m=f.__versionDB){u.jumpTo(2);break}return u.yield(f._versionDB(),3);
case 3:m=u.yieldResult;case 2:return q=m,u.yield(q.get(b+"/"+c),4);case 4:return r=u.yieldResult,r.refs[l||"HEAD"]=a,delete r.deleted,u.yield(q.set(b+"/"+c,r),5);case 5:return u.return(r)}})};Og.prototype._createCommit=function(b,c,l,a,f,m,q,r,u,v,y,z,A){r=void 0===r?"":r;u=void 0===u?[]:u;!z&&v&&v.preview&&(z=v.preview);return this._createCommitFromSpec({name:c,type:b,timestamp:q||Date.now(),author:{name:m.name,email:m.email,realm:m.realm},tags:a,description:l,preview:z,message:r,content:A||y&&Ld.sha1(y)||
null,deleted:!A&&!v,metadata:f,ancestors:u},!0)};Og.prototype._createCommitFromSpec=function(b,c){c=void 0===c?!1:c;if(!b.name)throw Error("commit needs name");if(!b.type)throw Error("commit needs type");if(!b.author)throw Error("commit needs author");if(!b.author.name)throw Error("commit needs author.name");b.timestamp||(b.timestamp=Date.now());b.tags||(b.tags=[]);!c&&b.content&&(c=Ld.isHash(b.content),c||(b.content=Ld.sha1(b.content)));c=Ld.obj.dissoc(b,["preview"]);c=Ld.sha1(JSON.stringify(c));
return Object.assign(b,{_id:c})};Og.prototype._commitDB=function(){var b=this,c,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){if(b.__commitDB)return a.return(b.__commitDB);c=b.name+"-commits";if(l=Ld.Database.findDB(c))return a.return(b.__commitDB=l);l=Ld.Database.ensureDB(c);return a.yield(l.addDesignDocs(b._commitdb_indexes),2)}return a.return(b.__commitDB=l)})};Og.prototype.close=function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){switch(c.nextAddress){case 1:if(!b.__commitDB){c.jumpTo(2);
break}return c.yield(b.__commitDB.close(),3);case 3:b.__commitDB=null;case 2:if(!b.__versionDB){c.jumpTo(0);break}return c.yield(b.__versionDB.close(),5);case 5:b.__versionDB=null,c.jumpToEnd()}})};Og.prototype.versionGraph=function(b,c){var l=this,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:if(a=l.__versionDB){q.jumpTo(2);break}return q.yield(l._versionDB(),3);case 3:a=q.yieldResult;case 2:return f=a,q.yield(f.get(b+"/"+c),4);case 4:return m=
q.yieldResult,q.return(!m||m.deleted||m._deleted?null:m)}})};Og.prototype._log=function(b,c,l,a){a=void 0===a?Infinity:a;var f=this,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(f.versionGraph(b,c),2);m=v.yieldResult;if(!m||m.deleted||m._deleted)return v.return([]);q=m.refs.HEAD;for(r=[];;){if(r.includes(q))throw Error("cyclic version graph???");r.push(q);u=$jscomp.makeIterator(m.history[q]||[]);q=u.next().value;if(!q||r.length>=a)break}return v.return(r)})};
Og.prototype._findTimestampedVersionsOfObjectNamed=function(b,c){c=void 0===c?{}:c;var l=this,a,f,m,q,r,u,v,y,z,A,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:a=c;f=void 0===a.include_docs?!0:a.include_docs;m=void 0===a.descending?!0:a.descending;q=void 0===a.startTime?"0".repeat(13):a.startTime;r=void 0===a.endTime?"9".repeat(13):a.endTime;u=b+"\x00"+(m?r:q);v=b+"\x00"+(m?q:r);if(y=l.__commitDB){G.jumpTo(2);break}return G.yield(l._commitDB(),3);case 3:y=
G.yieldResult;case 2:return z=y,G.yield(z.pouchdb.query("nameAndTimestamp_index",Object.assign({},c,{descending:m,include_docs:f,startkey:u,endkey:v})),4);case 4:return A=G.yieldResult,C=A.rows,G.return(f?C.map(function(F){return F.doc}):C.map(function(F){return F.id}))}})};Og.prototype._versionDB=function(){var b=this,c,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){if(b.__versionDB)return a.return(b.__versionDB);c=b.name+"-version-graph";if(l=Ld.Database.findDB(c))return a.return(b.__versionDB=
l);l=Ld.Database.ensureDB(c);return a.yield(l.addDesignDocs(b._versiondb_indexes),2)}return a.return(b.__versionDB=l)})};Og.prototype.exportToDir=function(b,c,l,a){l=void 0===l?!1:l;a=void 0===a?!1:a;var f=this,m,q,r,u,v,y,z,A,C,G,F,N,L,W,la,wa,D,Q,J,O,ja,X,ha,bb,pb,oa,ba,qa,Ga,ua,H,M,R,ca,Z,Aa,db,S,da,ea,Pa,kb,vc,mc,Yb,ud;return $jscomp.asyncExecutePromiseGeneratorProgram(function(id){switch(id.nextAddress){case 1:"string"===typeof b&&(b=Ld.resource(b));if(f.__commitDB){id.jumpTo(2);break}return id.yield(f._commitDB(),
3);case 3:case 2:if(m=f.__versionDB){id.jumpTo(4);break}return id.yield(f._versionDB(),5);case 5:m=id.yieldResult;case 4:q=m;r=[];if(!c)return id.yield(q.getAll(),13);u=$jscomp.makeIterator(c);v=u.next();case 8:if(v.done){id.jumpTo(7);break}z=y=v.value;A=z.name;C=z.type;G=b.join(C).join(A).asDirectory();return id.yield(f.versionGraph(C,A),11);case 11:return F=id.yieldResult,N=F.refs,L=F.history,W=Object.keys(L),id.yield(f.getCommitsWithIds(W),12);case 12:la=id.yieldResult;r.push({refs:N,history:L,
currentExportDir:G,commits:la,name:A,type:C});v=u.next();id.jumpTo(8);break;case 13:wa=id.yieldResult,D=$jscomp.makeIterator(wa),Q=D.next();case 14:if(Q.done){id.jumpTo(7);break}O=J=Q.value;ja=O.refs;X=O.history;ha=O._id;if(ha.startsWith("_")){id.jumpTo(15);break}return id.yield(f.getCommit(ja.HEAD||Object.keys(X)[0]),17);case 17:return bb=id.yieldResult,pb=bb.type,oa=bb.name,ba=b.join(pb).join(oa).asDirectory(),qa=Object.keys(X),id.yield(f.getCommitsWithIds(qa),18);case 18:Ga=id.yieldResult,r.push({refs:ja,
history:X,currentExportDir:ba,commits:Ga,name:oa,type:pb});case 15:Q=D.next();id.jumpTo(14);break;case 7:ua={},H=$jscomp.makeIterator(r),M=H.next();case 19:if(M.done){id.jumpTo(0);break}ca=R=M.value;Z=ca.refs;Aa=ca.history;ua.$jscomp$loop$prop$currentExportDir$1223$2544=ca.currentExportDir;db=ca.commits;S=ca.name;da=ca.type;a||(db=db.filter(function(ue){return!ue.deleted}));ea=l?db.map(function(ue){return function(ye){if(ye.deleted||ye._deleted||!ye.content)return null;delete ye._rev;ye=f.snapshotResourceFor(ye);
var nf=ue.$jscomp$loop$prop$currentExportDir$1223$2544.join(ye.parent().name()+"/"+ye.name());return{from:ye,to:nf}}}(ua)).filter(Boolean):[];l||db.forEach(function(ue){delete ue._rev});return id.yield(ua.$jscomp$loop$prop$currentExportDir$1223$2544.ensureExistance(),22);case 22:return id.yield(ua.$jscomp$loop$prop$currentExportDir$1223$2544.join("index.json").writeJson({name:S,type:da}),23);case 23:return id.yield(ua.$jscomp$loop$prop$currentExportDir$1223$2544.join("commits.json").writeJson(db),
24);case 24:return id.yield(ua.$jscomp$loop$prop$currentExportDir$1223$2544.join("history.json").writeJson({refs:Z,history:Aa}),25);case 25:Pa=$jscomp.makeIterator(ea),kb=Pa.next();case 26:if(kb.done){ua={$jscomp$loop$prop$currentExportDir$1223$2544:ua.$jscomp$loop$prop$currentExportDir$1223$2544};M=H.next();id.jumpTo(19);break}mc=vc=kb.value;Yb=mc.from;ud=mc.to;return id.yield(Yb.copyTo(ud),27);case 27:kb=Pa.next(),id.jumpTo(26)}})};Og.prototype.exportToSpecs=function(b,c){c=void 0===c?!1:c;var l=
this,a,f,m,q,r,u,v,y,z,A,C,G,F,N,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){switch(W.nextAddress){case 1:a=[];if(b){W.jumpTo(2);break}b=[];return W.yield(l.objectStats(),3);case 3:for(m in f=W.yieldResult||{},f)for(q in f[m])b.push({type:m,name:q});case 2:r=$jscomp.makeIterator(b),u=r.next();case 4:if(u.done){W.jumpTo(6);break}y=v=u.value;z=y.name;A=y.type;return W.yield(l.versionGraph(A,z),7);case 7:return C=W.yieldResult,G=C.refs,F=C.history,N=Object.keys(F),W.yield(l.getCommitsWithIds(N),
8);case 8:L=W.yieldResult;c||(L=L.filter(function(la){return!la.deleted}));L.forEach(function(la){delete la._rev});a.push({type:A,name:z,commits:L,history:{refs:G,history:F}});u=r.next();W.jumpTo(4);break;case 6:return W.return(a)}})};Og.prototype.importFromDir=function(b,c,l){function a(C){var G,F,N,L,W,la,wa,D,Q,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(O){switch(O.nextAddress){case 1:return G=$jscomp,F=G.makeIterator,O.yield(Promise.all([C.join("index.json").readJson(),C.join("commits.json").readJson(),
C.join("history.json").readJson()]),2);case 2:N=F.call(G,O.yieldResult);L=N.next().value;W=L.type;la=L.name;wa=N.next().value;D=N.next().value;if(!l){Q=[];O.jumpTo(3);break}return O.yield(C.dirList(1,{exclude:function(ja){return!ja.isDirectory()}}),4);case 4:Q=O.yieldResult;case 3:return J=Q,O.return({dir:C,type:W,name:la,commits:wa,history:D,snapshotDirs:J})}})}c=void 0===c?!1:c;l=void 0===l?!1:l;var f=this,m,q,r,u,v,y,z,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){switch(C.nextAddress){case 1:return C.yield(b.dirList(3,
{exclude:function(G){return!G.isDirectory()&&"index.json"!==G.name()}}),2);case 2:m=C.yieldResult,m=m.filter(function(G){return"index.json"===G.name()}),q=m.map(function(G){return G.parent()}),r=[],u=$jscomp.makeIterator(q),v=u.next();case 3:if(v.done){C.jumpTo(5);break}y=v.value;z=r;A=z.push;return C.yield(a(y),6);case 6:A.call(z,C.yieldResult);v=u.next();C.jumpTo(3);break;case 5:return C.return(f.importFromSpecs(r,c,l))}})};Og.prototype.importFromSpecs=function(b,c,l){c=void 0===c?!1:c;l=void 0===
l?!1:l;var a=this,f,m,q,r,u,v,y,z,A,C,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:if(c){F.jumpTo(2);break}if(f=a.__versionDB){F.jumpTo(3);break}return F.yield(a._versionDB(),4);case 4:f=F.yieldResult;case 3:m=f,q=$jscomp.makeIterator(b),r=q.next();case 5:if(r.done){F.jumpTo(2);break}v=u=r.value;y=v.type;z=v.name;return F.yield(m.get(y+"/"+z),8);case 8:if(F.yieldResult)throw Error("Import failed: object "+y+"/"+z+" already exists and overwrite is not allowed");
r=q.next();F.jumpTo(5);break;case 2:A=$jscomp.makeIterator(b),C=A.next();case 9:if(C.done){F.jumpTo(11);break}G=C.value;return F.yield(a.importFromSpec(G,!0,l),10);case 10:C=A.next();F.jumpTo(9);break;case 11:return F.return(b)}})};Og.prototype.importFromSpec=function(b,c,l){c=void 0===c?!1:c;l=void 0===l?!1:l;var a=this,f,m,q,r,u,v,y,z,A,C,G,F,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:if(f=a.__versionDB){L.jumpTo(2);break}return L.yield(a._versionDB(),
3);case 3:f=L.yieldResult;case 2:m=f;if(q=a.__commitDB){L.jumpTo(4);break}return L.yield(a._commitDB(),5);case 5:q=L.yieldResult;case 4:r=q;u=a;v=u.snapshotLocation;y=b;z=y.type;A=y.name;C=y.commits;G=y.history;F=y.snapshotDirs;if(!(N=!c)){L.jumpTo(6);break}return L.yield(m.get(z+"/"+A),7);case 7:N=L.yieldResult;case 6:if(N)throw Error("Import failed: object "+z+"/"+A+" already exists and overwrite is not allowed");return L.yield(Promise.all([r.setDocuments(C),m.set(z+"/"+A,G)].concat($jscomp.arrayFromIterable(F&&
l?F.map(function(W){return W.copyTo(v.join(W.name()).asDirectory())}):[]))),8);case 8:return L.return(b)}})};Og.prototype.importFromResource=function(b,c,l,a,f){f=void 0===f?!1:f;var m=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return u.yield(l.readJson(),2);case 2:q=u.yieldResult;if(!(r=f)){u.jumpTo(3);break}return u.yield(m.has(b,c),4);case 4:r=u.yieldResult;case 3:if(!r){u.jumpTo(5);break}return u.yield(m.delete(b,c,!1),5);case 5:return u.return(m.commit(b,
c,q,a))}})};Og.prototype.replicateTo=function(b,c,l,a){return(new Ld.Synchronization(this,b,c,l,Object.assign({method:"replicateTo"},a))).start()};Og.prototype.replicateFrom=function(b,c,l,a){return(new Ld.Synchronization(this,b,c,l,Object.assign({method:"replicateFrom"},a))).start()};Og.prototype.sync=function(b,c,l,a){return(new Ld.Synchronization(this,b,c,l,Object.assign({method:"sync"},a))).start()};Og.prototype.getConflicts=function(b,c){function l(v,y){var z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){return 1==
A.nextAddress?A.yield(v.getConflicts({include_docs:!0}),2):3!=A.nextAddress?(z=A.yieldResult,A.yield(Promise.all(z.map(function(C){var G,F,N,L,W,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wa){if(1==wa.nextAddress){G=C;F=G.id;N=G.rev;L=G.conflicts;W=G.doc;if(c&&c[y]&&!c[y][F])return wa.return(null);if(!b)return wa.jumpTo(2);la=L.map(function(D){return{id:F,rev:D}});return wa.yield(v.getDocuments(la),3)}2!=wa.nextAddress&&(L=wa.yieldResult);b?Ld.obj.dissoc(W,["_conflicts"]):W=null;
return wa.return({id:F,rev:N,conflicts:L,kind:y,doc:W})})})),3)):A.return(A.yieldResult.filter(Boolean))})}var a=this,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:if(f=a.__commitDB){v.jumpTo(2);break}return v.yield(a._commitDB(),3);case 3:f=v.yieldResult;case 2:m=f;if(q=a.__versionDB){v.jumpTo(4);break}return v.yield(a._versionDB(),5);case 5:q=v.yieldResult;case 4:return r=q,v.yield(l(r,"versions"),6);case 6:return u=v.yieldResult,v.yield(l(m,
"commits"),8);case 8:return v.yield(v.yieldResult,7);case 7:return v.return({versionConflicts:u,commitConflicts:v.yieldResult})}})};Og.prototype.resolveConflict=function(b){var c=this,l,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:l=b;a=l.resolved;f=l.delete;m=l.kind;q=l.id;if("versions"===m){if(v=c.__versionDB){y.jumpTo(7);break}return y.yield(c._versionDB(),8)}if("commits"!==m)throw Error("Unknown conflict kind: "+m);if(u=c.__commitDB){y.jumpTo(5);
break}return y.yield(c._commitDB(),6);case 6:u=y.yieldResult;case 5:r=u;y.jumpTo(3);break;case 8:v=y.yieldResult;case 7:r=v;case 3:return y.yield(r.set(q,a),9);case 9:return y.yield(Promise.all(f.map(function(z){return r.pouchdb.remove(q,z)})),0)}})};Og.prototype.getDiff=function(b,c){var l=this,a,f,m,q,r,u,v,y,z,A,C,G,F,N,L,W,la,wa,D,Q,J,O,ja,X,ha,bb,pb,oa,ba,qa,Ga,ua,H,M,R,ca,Z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){switch(Aa.nextAddress){case 1:a=b;"string"===typeof b&&
(a=Ld.Database.ensureDB(b+"-commits"),c=Ld.Database.ensureDB(b+"-version-graph"));if(f=l.__commitDB){Aa.jumpTo(2);break}return Aa.yield(l._commitDB(),3);case 3:f=Aa.yieldResult;case 2:m=f;if(q=l.__versionDB){Aa.jumpTo(4);break}return Aa.yield(l._versionDB(),5);case 5:q=Aa.yieldResult;case 4:return r=q,Aa.yield(m.diffWith(a),6);case 6:return u=Aa.yieldResult,Aa.yield(r.diffWith(c),7);case 7:return v=Aa.yieldResult,Aa.yield(Promise.all(v.inLeft.map(function(db){var S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(da){return 1==
da.nextAddress?(S=db.id,da.yield(r.get(db.id),2)):da.return({id:S,doc:da.yieldResult})})})),8);case 8:return y=Aa.yieldResult,z=Ld.arr,A=z.groupBy,Aa.yield(c.getAll(),9);case 9:return C=A.call(z,Aa.yieldResult,function(db){return db._id}),Aa.yield(Promise.all(v.inRight.map(function(db){return $jscomp.asyncExecutePromiseGeneratorProgram(function(S){return S.return({id:db.id,doc:C[db.id]})})})),10);case 10:return G=Aa.yieldResult,Aa.yield(Promise.all(v.changed.map(function(db){var S,da,ea,Pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(kb){return 1==
kb.nextAddress?(S=Object,da=S.assign,ea=db.left,kb.yield(r.get(db.left.id),2)):3!=kb.nextAddress?(Pa=kb.yieldResult,kb.yield(c.get(db.right.id),3)):kb.return(da.call(S,{},ea,{docA:Pa,docB:kb.yieldResult}))})})),11);case 11:return F=Aa.yieldResult,N=Ld.arr,L=N.groupBy,Aa.yield(a.getAll(),12);case 12:W=L.call(N,Aa.yieldResult,function(db){return db._id}),la=[],wa=[],D=[],Q=$jscomp.makeIterator(u.inLeft),J=Q.next();case 13:if(J.done){Aa.jumpTo(15);break}O=J.value;ja=la;X=ja.push;return Aa.yield(m.get(O.id),
16);case 16:X.call(ja,Aa.yieldResult);J=Q.next();Aa.jumpTo(13);break;case 15:ha=$jscomp.makeIterator(u.inRight),J=ha.next();case 17:if(J.done){Aa.jumpTo(19);break}bb=J.value;pb=wa;oa=pb.push;return Aa.yield(W[bb.id],20);case 20:oa.call(pb,Aa.yieldResult);J=ha.next();Aa.jumpTo(17);break;case 19:ba=$jscomp.makeIterator(u.changed),J=ba.next();case 21:if(J.done){Aa.jumpTo(23);break}qa=J.value;Ga=D;ua=Ga.push;return Aa.yield(m.get(qa.left.id),24);case 24:return ua.call(Ga,Aa.yieldResult),H=D,M=H.push,
Aa.yield(a.get(qa.right.id),25);case 25:M.call(H,Aa.yieldResult);J=ba.next();Aa.jumpTo(21);break;case 23:return R=la.map(function(db){return Ld.obj.select(db,["_id","name","type"])}),ca=wa.map(function(db){return Ld.obj.select(db,["_id","name","type"])}),Z=D.map(function(db){return Ld.obj.select(db,["_id","name","type"])}),Aa.return({changed:F,remote:G,local:y,changedCommitTypeAndNames:Z,remoteCommitTypeAndNames:ca,localCommitTypeAndNames:R})}})};Og.prototype.delete=function(b,c,l){l=void 0===l?!0:
l;var a=this,f,m,q,r,u,v,y,z,A,C,G,F,N,L,W,la,wa,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Q){switch(Q.nextAddress){case 1:f=[];m=[];if(q=a.__commitDB){Q.jumpTo(2);break}return Q.yield(a._commitDB(),3);case 3:q=Q.yieldResult;case 2:return r=q,u={include_docs:!0,startkey:b+"\x00"+c+"\x00",endkey:b+"\x00"+c+"\uffff"},Q.yield(r.query("nameAndTimestamp_index",u),4);case 4:v=Q.yieldResult;y=v.rows;z=$jscomp.makeIterator(y);for(A=z.next();!A.done;A=z.next())G=C=A.value,F=G.doc,F.deleted||
F._deleted||!F.content||f.push(a.snapshotResourceFor(F)),m.push(Object.assign({},F,{_deleted:!0}));if(N=a.__versionDB){Q.jumpTo(5);break}return Q.yield(a._versionDB(),6);case 6:N=Q.yieldResult;case 5:return L=N,Q.yield(L.get(b+"/"+c),7);case 7:W=Q.yieldResult;la=W._id;wa=W._rev;D={_id:la,_rev:wa,_deleted:!0};if(l){Q.jumpTo(8);break}return Q.yield(r.setDocuments(m),9);case 9:return Q.yield(L.setDocuments([D]),10);case 10:Promise.all(f.map(function(J){return J.remove()}));case 8:return Q.return({commits:m,
history:D,resources:f})}})};Og.prototype.deleteCommit=function(b,c,l){c=void 0===c?!0:c;l=void 0===l?"HEAD":l;var a=this,f,m,q,r,u,v,y,z,A,C,G,F,N,L,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(la){switch(la.nextAddress){case 1:if(b&&"string"!==typeof b){f=b;la.jumpTo(2);break}if(!b){la.jumpTo(2);break}if(m=a.__commitDB){la.jumpTo(4);break}return la.yield(a._commitDB(),5);case 5:m=la.yieldResult;case 4:return q=m,la.yield(q.get(b),6);case 6:f=la.yieldResult;case 2:if(!f)throw Error("commit needed!");
if(r=a.__versionDB){la.jumpTo(7);break}return la.yield(a._versionDB(),8);case 8:r=la.yieldResult;case 7:u=r;if(v=a.__commitDB){la.jumpTo(9);break}return la.yield(a._commitDB(),10);case 10:v=la.yieldResult;case 9:return y=v,z=f,A=z.name,C=z.type,G=f.deleted||f._deleted||!f.content?[]:[a.snapshotResourceFor(f)],F=[Object.assign({},f,{_deleted:!0})],la.yield(u.get(C+"/"+A),11);case 11:N=la.yieldResult;if(!N)throw Error("No history for "+C+"/"+A+"@"+f._id);if(!N.refs[l])throw Error("Cannot delete commit "+
C+"/"+A+"@"+f._id+" b/c it is not where ref "+l+" is pointing!");L=$jscomp.makeIterator(N.history[f._id]||[]);W=L.next().value;if(!W&&1>=Object.keys(N.history).length)N._deleted=!0;else if(W)delete N.history[f._id],N.refs[l]=W;else throw Error("Cannot delete commit "+C+"/"+A+"@"+f._id+" b/c it has no ancestor but there are still other commits!");if(c){la.jumpTo(12);break}return la.yield(u.set(C+"/"+A,N),13);case 13:return la.yield(y.setDocuments(F),14);case 14:return la.yield(Promise.all(G.map(function(wa){return wa.remove()})),
12);case 12:return la.return({commits:F,history:N,resources:G})}})};$jscomp.global.Object.defineProperties(Og.prototype,{_commitdb_indexes:{configurable:!0,enumerable:!0,get:function(){return[{name:"name_index",version:4,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name); }'},{name:"nameAndTimestamp_index",version:3,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name + "\x00" + doc.timestamp + "\x00" + doc._id); }'},{name:"nameWithMaxMinTimestamp_index",version:3,mapFn:'function(doc) { emit(doc.type + "\x00" + doc.name, doc.timestamp); }',
reduceFn:"_stats"},{name:"nameTypeFilter",version:9,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames)\n            return !!req.query.onlyTypesAndNames[doc.type + "/" + doc.name];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}},_versiondb_indexes:{configurable:!0,
enumerable:!0,get:function(){return[{name:"nameTypeFilter",version:3,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames) return !!req.query.onlyTypesAndNames[doc._id];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}}});Ld.ObjectDB=Og;var ov=function(b,
c,l,a,f){f=void 0===f?{}:f;this.options=Object.assign({debug:!1,live:!1,method:"sync",replicationFilter:void 0},f);this.state="not started";this.method="";this.fromObjectDB=b;this.remoteCommitDB=c;this.remoteVersionDB=l;this.remoteLocation=a;this.deferred=Ld.promise.deferred();this.conflicts=[];this.changes=[];this.errors=[]};ov.prototype.whenPaused=function(){var b=this;return Promise.resolve().then(function(){return Ld.promise.waitFor(function(){return b.isPaused||b.isComplete})}).then(function(){return b})};
ov.prototype.waitForIt=function(){return this.deferred.promise};ov.prototype.start=function(){this.isSynchonizing||this._startReplicationAndCopy().catch(function(b){return console.error("Error starting synchronization: ",b)});return this};ov.prototype._startReplicationAndCopy=function(){function b(M){return"paused"===H&&"paused"===ua&&0>=Ga.copyCalls&&0>=Ga.copyCallsWaiting?M.state="paused":"complete"===H&&"complete"===ua&&Ga.isComplete()?M.state="complete":M.state="running"}function c(M,R){if(R.length||
"complete"===ua&&"complete"===H&&Ga.isComplete()){O.cancel();if(R.length){M.state="complete";M.errors=R;ba.cancel();qa.cancel();var ca=Error("Synchronization error:\n  "+R.join("\n  "));ca.errors=R;console.log(M+" errored")}else console.log(M+" completed");ca?M.deferred.reject(ca):M.deferred.resolve(M)}}function l(M){if(!M.content)return null;var R=M.content.slice(0,2);M=M.content.slice(2);return R+"/"+M+".json"}var a=this,f,m,q,r,u,v,y,z,A,C,G,F,N,L,W,la,wa,D,Q,J,O,ja,X,ha,bb,pb,oa,ba,qa,Ga,ua,H;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){switch(M.nextAddress){case 1:f=a;m=f.fromObjectDB;q=f.remoteCommitDB;r=f.remoteVersionDB;u=f.remoteLocation;v=f.options;y=v.debug;z=void 0===v.live?!1:v.live;A=void 0===v.retry?!1:v.retry;C=v.method;G=v.replicationFilter;F=void 0===v.pushDesignDocToRemote?!1:v.pushDesignDocToRemote;if(N=m.__versionDB){M.jumpTo(2);break}return M.yield(m._versionDB(),3);case 3:N=M.yieldResult;case 2:L=N;if(W=m.__commitDB){M.jumpTo(4);break}return M.yield(m._commitDB(),
5);case 5:W=M.yieldResult;case 4:la=W;wa=m;D=wa._commitdb_indexes;Q=wa._versiondb_indexes;J=wa.snapshotLocation;a.method=C;X=D.find(function(R){return"nameTypeFilter"===R.name});ha=Q.find(function(R){return"nameTypeFilter"===R.name});if(!F){M.jumpTo(6);break}console.log("adding commitNameTypeFilter");return M.yield(q.addDesignDoc(X),7);case 7:return console.log("adding versionNameTypeFilter"),M.yield(r.addDesignDoc(ha),6);case 6:return bb={live:z,retry:A},pb=Object.assign({},bb),oa=Object.assign({},
bb),G&&(pb.filter=eval("("+X.filterFn+")"),pb.query_params=G,oa.filter=eval("("+ha.filterFn+")"),oa.query_params=G),ba=la[C](q,pb),qa=L[C](r,oa),Ga={copyCalls:0,copyCallsWaiting:0,nFilesToCopy:0,nFilesCopied:0,stopped:!1,isComplete:function(){return this.stopped||0>=this.copyCalls&&0>=this.copyCallsWaiting}},H=ua="not started",a.versionReplication=qa,a.commitReplication=ba,a.snapshotReplication=Ga,ja=q.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),O=r.pouchdb.changes({include_docs:!0,live:!0,
conflicts:!0}),ja.on("change",function(R){var ca=R.id,Z=R.changes;R=R.doc._conflicts;y&&console.log("commit changes "+ca+":",Z,R);R&&(console.log("commit conflict "+ca+":",Z,R),a.conflicts.push({db:"commits",id:ca,changes:Z,conflicts:R}))}),O.on("change",function(R){var ca=R.id,Z=R.changes;R=R.doc._conflicts;y&&console.log("version changes "+ca+":",Z,R);R&&(console.log("version conflict "+ca+":",Z,R),a.conflicts.push({db:"versions",id:ca,changes:Z,conflicts:R}))}),ba.on("change",function(R){var ca,
Z,Aa,db,S,da,ea,Pa,kb,vc,mc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Yb){switch(Yb.nextAddress){case 1:"replicateTo"===C?R={direction:"push",change:R}:"replicateFrom"===C&&(R={direction:"pull",change:R});ca=R;Z=ca.direction;Aa=ca.change;db=Aa.docs;console.log(a+" "+("push"===Z?"send":"received")+" "+db.length+" commits");Yb.setCatchFinallyBlocks(2,3);da=[];ea=$jscomp.makeIterator(db);for(Pa=ea.next();!Pa.done;Pa=ea.next())kb=Pa.value,kb._id.startsWith("_")||(a.changes.push({direction:Z,
kind:"commits",id:kb._id,type:kb.type,name:kb.name}),(vc=l(kb))&&da.push(vc));Ga.nFilesToCopy+=da.length;if(!(0<Ga.copyCalls)){Yb.jumpTo(5);break}Ga.copyCallsWaiting++;return Yb.yield(Ld.promise.waitFor(function(){return 0>=Ga.copyCalls}),6);case 6:Ga.copyCallsWaiting--;case 5:return Ga.copyCalls++,b(a),console.log(a+" copying "+da.length+" snapshots..."),Yb.yield(Ld.promise.parallel(da.map(function(ud){return function(){var id=("push"===Z?J:u).join(ud),ue=("push"===Z?u:J).join(ud);return Ga.stopped?
(console.warn(a+" Stopping copying resources b/c synchronization ended ("+Ga.copyCalls+", "+id.url+" => "+ue.url+")"),Promise.resolve()):ue.exists().then(function(ye){function nf(gg){gg=void 0===gg?0:gg;return id.copyTo(ue).catch(function(Tg){if(5<=gg)throw Tg;return nf(gg+1)})}return ye?(y&&console.log("Skip copying to "+ue.url+", already exist"),Promise.resolve()):id.exists().then(function(gg){if(!gg)return console.warn("Skip copying "+id.url+", does not exist"),Promise.resolve();y&&console.log(a+
" Copying "+id.url+" => "+ue.url);return nf(0).then(function(Tg){Ga.nFilesCopied++;Ga.stopped||0!==Ga.nFilesCopied%10||console.log(a+" copied "+Ga.nFilesCopied+" of "+Ga.nFilesToCopy+" snapshots");return Tg})})})}}),5),7);case 7:console.log(a+" sending files done");case 3:Yb.enterFinallyBlock();Ga.copyCalls--;b(a);c(a,S?[S]:[]);Yb.leaveFinallyBlock(0);break;case 2:throw mc=Yb.enterCatchBlock(),console.error("error in commitReplication onChange",mc),S=mc,mc;}})}).on("paused",function(){ua="paused";
b(a);y&&console.log(a+" commit replication paused")}).on("active",function(){ua="active";b(a);y&&console.log(a+" commit replication active")}).on("error",function(R){ua="complete";b(a);console.error(a+" commit replication error",R);c(a,[R])}).on("complete",function(R){ua="complete";b(a);R="sync"===C?R.push.errors.concat(R.pull.errors):R.errors;c(a,R)}),qa.on("change",function(R){"replicateTo"===C?R={direction:"push",change:R}:"replicateFrom"===C&&(R={direction:"pull",change:R});var ca=R.direction;
R=R.change.docs;y&&console.log(a+" "+("push"===ca?"send":"received")+" "+R.length+" histories");R.forEach(function(Z){Z._id.startsWith("_")||a.changes.push({direction:ca,kind:"versions",id:Z._id})})}).on("paused",function(){H="paused";b(a);y&&console.log(a+" version replication paused")}).on("active",function(R){H="active";b(a);y&&console.log(a+" version replication active",R)}).on("error",function(R){H="complete";b(a);console.error(a+" version replication error",R);c(a,[R])}).on("complete",function(R){H=
"complete";b(a);R="sync"===C?R.push.errors.concat(R.pull.errors):R.errors;c(a,R)}),a.state="running",M.return(a)}})};ov.prototype.safeStop=function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?"not started"!==b.state&&b.isSynchonizing?c.yield(b.whenPaused(),2):c.return(b):c.return(b.stop())})};ov.prototype.stop=function(){if("not started"===this.state||!this.isSynchonizing)return this;this.commitReplication.cancel();this.versionReplication.cancel();
this.snapshotReplication.stopped=!0;return this};ov.prototype.toString=function(){var b=this.method;return"Synchronization("+this.state+": "+this.fromObjectDB.name+" "+("sync"===b?"<=>":"replicateTo"===b?"=>":"replicateFrom"===b?"<=":"??")+")"};$jscomp.global.Object.defineProperties(ov.prototype,{isSynchonizing:{configurable:!0,enumerable:!0,get:function(){return this.isPaused||this.isRunning}},isComplete:{configurable:!0,enumerable:!0,get:function(){return"complete"===this.state}},isRunning:{configurable:!0,
enumerable:!0,get:function(){return"running"===this.state}},isPaused:{configurable:!0,enumerable:!0,get:function(){return"paused"===this.state}},changesByTypeAndName:{configurable:!0,enumerable:!0,get:function(){var b={push:{},pull:{}};this.changes.forEach(function(c){var l=c.direction,a=c.id,f=c.kind;if("_"!==a[0]){if("versions"===f)var m=b[l][a]||(b[l][a]=[]);else"commits"===f&&(a=c.type+"/"+c.name,m=b[l][a]||(b[l][a]=[]));m.push(c)}});return b}}});Ld.Synchronization=ov;var rz={describe:function(b){function c(r,
u){r=r.find(function(A){return A.name===u}).node.value.body;var v=r.body||[],y=(r.comments||[]).find(function(A){return A.end<v[0].start});r={name:u,parameters:[],sideEffect:!1,returns:null,description:""};if(y&&y.text.trim()){y=Ld.string.changeIndent(y.text," ",0).split("\n");y=$jscomp.makeIterator(y);for(var z=y.next();!z.done;z=y.next()){z=z.value;if(z.startsWith("ignore-in-doc")){r.description="";break}z.startsWith("side effect:")?r.sideEffect=JSON.parse(z.split(":")[1]):z.startsWith("returns:")?
r.returns=z.split(":")[1].trim():r.description+=z+"\n"}}y=$jscomp.makeIterator(v);for(z=y.next();!z.done;z=y.next())if(z=z.value,"checkArgs"===Ld.Path("declarations.0.init.callee.name").get(z)&&(z=Ld.Path("declarations.0.id.properties").get(z)))r.parameters=z.map(function(A){return A.key.name});return r}var l=this,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:r.setCatchFinallyBlocks(2);if(l._methodSpecs){r.jumpTo(4);break}return r.yield(lively.modules.module("lively.storage/objectdb.js").source(),
5);case 5:a=r.yieldResult,f=Ld.parse(a,{withComments:!0}),m=Ld.categorizer.findDecls(f),l._methodSpecs=m.filter(function(u){return u.parent&&"ObjectDBInterface"===u.parent.name});case 4:return r.return(b?c(l._methodSpecs,b):l._methodSpecs.map(function(u){return c(l._methodSpecs,u.name)}).filter(Boolean));case 2:return q=r.enterCatchBlock(),r.return("Error in describe "+q)}})},ensureDB:function(b){var c,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return c=
Ld.checkArgs(b,{db:"string",snapshotLocation:"string|Resource"}),l=c.db,a=c.snapshotLocation,m.yield(Ld.ObjectDB.find(l),2);if(f=m.yieldResult)return m.return(!1);Ld.ObjectDB.named(l,{snapshotLocation:a});return m.return(!0)})},destroyDB:function(b){var c,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(c=Ld.checkArgs(b,{db:"string"}),l=c.db,f.yield(Ld.ObjectDB.find(l),2)):3!=f.nextAddress?(a=f.yieldResult)?f.yield(a.destroy(),3):f.return(!1):f.return(!0)})},
fetchCommits:function(b){var c,l,a,f,m,q,r,u,v,y,z,A,C,G,F,N,L,W,la,wa,D,Q,J,O,ja,X,ha,bb,pb,oa,ba,qa,Ga;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ua){switch(ua.nextAddress){case 1:return c=Ld.checkArgs(b,{db:"string",ref:"string|undefined",type:"string|undefined",typesAndNames:"Array|undefined",knownCommitIds:"object|undefined",includeDeleted:"boolean|undefined",filterFn:"string|undefined"}),l=c.db,a=c.ref,f=c.type,m=c.typesAndNames,q=c.knownCommitIds,r=c.includeDeleted,u=c.filterFn,
ua.yield(Ld.ObjectDB.find(l),2);case 2:v=ua.yieldResult;a||(a="HEAD");if(!v)throw Error("db "+l+" does not exist");if(v.__commitDB){ua.jumpTo(3);break}return ua.yield(v._commitDB(),4);case 4:case 3:if(y=v.__versionDB){ua.jumpTo(5);break}return ua.yield(v._versionDB(),6);case 6:y=ua.yieldResult;case 5:z=y;A={};C={};if(m)for(G=A.keys=[],F=$jscomp.makeIterator(m),N=F.next();!N.done;N=F.next())W=L=N.value,la=W.type,wa=W.name,D=W.ref,G.push(la+"/"+wa),D&&(C[la+"/"+wa]=D);else f&&(A.startkey=f+'/\x00"',
A.endkey=f+'/\uffff"');return ua.yield(z.getAll(A),7);case 7:Q=ua.yieldResult;J=[];O=$jscomp.makeIterator(Q);for(ja=O.next();!ja.done;ja=O.next())!(X=ja.value)||X.deleted||X._deleted||(ha=X,bb=ha._id,pb=ha.refs,bb.startsWith("_")||(oa=pb[C[bb]||a]||a,!oa||q&&q.hasOwnProperty(oa)||J.push(oa)));return ua.yield(v.getCommitsWithIds(J),8);case 8:ba=ua.yieldResult;r||(ba=ba.filter(function(H){return H&&!H.deleted}));if(u)try{qa=eval("("+u+")");if("function"!==typeof qa)throw Error(u+" does not eval to a function!");
Ga=ba.filter(qa);if(Array.isArray(Ga))ba=Ga;else throw Error(u+" does not return an array!");}catch(H){console.error("fetchCommits filterFn failed:",H)}return ua.return(ba)}})},fetchVersionGraph:function(b){var c,l,a,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return c=Ld.checkArgs(b,{db:"string",type:"string",name:"string"}),l=c.db,a=c.type,f=c.name,v.yield(Ld.ObjectDB.find(l),2);if(3!=v.nextAddress){m=v.yieldResult;if(!m)throw Error("db "+l+" does not exist");
return v.yield(m.versionGraph(a,f),3)}q=v.yieldResult;r=q.refs;u=q.history;return v.return({refs:r,history:u})})},exists:function(b){var c,l,a,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return c=Ld.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined"}),l=c.db,a=c.type,f=c.name,m=c.ref,v.yield(Ld.ObjectDB.find(l),2);if(3!=v.nextAddress)return q=v.yieldResult,v.yield(q.versionGraph(a,f),3);r=v.yieldResult;if(!r)return v.return({exists:!1,
commitId:void 0});m=m||"HEAD";return(u=r.refs[m])?v.return({exists:!0,commitId:u}):v.return({exists:!1,commitId:void 0})})},fetchLog:function(b){var c,l,a,f,m,q,r,u,v,y,z,A,C,G,F,N,L,W,la,wa,D,Q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:return c=Ld.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",commit:"string|undefined",limit:"number|undefined",includeCommits:"boolean|undefined",knownCommitIds:"object|undefined"},
function(O){return O.type&&O.name||O.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),l=c.db,a=c.type,f=c.name,m=c.ref,q=c.commit,r=c.limit,u=c.includeCommits,v=c.knownCommitIds,J.yield(Ld.ObjectDB.find(l),2);case 2:y=J.yieldResult;z=m||"HEAD";if(!y)throw Error("db "+l+" does not exist");r||(r=Infinity);q||m||(m=z);if(!q){J.jumpTo(3);break}A=q;if(a&&f){J.jumpTo(3);break}return J.yield(y.getCommit(q),5);case 5:C=J.yieldResult;if(!C)throw Error("fetchLog: specified commit "+q+" but no commit with this id is in the database!");
G=C;a=G.type;f=G.name;case 3:return J.yield(y.versionGraph(a,f),6);case 6:F=J.yieldResult;if(!F)throw Error("Unknown object "+a+"/"+f);N=F;L=N.refs;W=N.history;A||(A=L[m]);la=A;for(wa=[];wa.length<r&&!wa.includes(la);){wa.push(la);D=W[la];if(!D||!D.length)break;Q=$jscomp.makeIterator(D);la=Q.next().value}if(!u){J.jumpTo(7);break}v&&(wa=wa.filter(function(O){return!v.hasOwnProperty(O)}));return J.yield(y.getCommitsWithIds(wa),8);case 8:wa=J.yieldResult;case 7:return J.return(wa)}})},fetchSnapshot:function(b){var c,
l,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return c=Ld.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",commit:"string|undefined"},function(z){return z.type&&z.name||z.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),l=c.db,a=c.type,f=c.name,m=c.ref,q=c.commit,y.yield(Ld.ObjectDB.find(l),2);case 2:r=y.yieldResult;m=m||"HEAD";if(!r)throw Error("db "+l+" does not exist");if(q){y.jumpTo(3);
break}return y.yield(r.versionGraph(a,f),4);case 4:u=y.yieldResult;if(!u)throw Error("Unknown object "+a+"/"+f);q=u.refs[m];if(!q)throw Error("Cannot find commit for ref "+m+" of "+a+"/"+f);case 3:return y.yield(r.getCommit(q),5);case 5:v=y.yieldResult;if(!v)throw Error("Cannot find commit "+q);return y.return(r.loadSnapshot(void 0,void 0,v))}})},revert:function(b){var c,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return c=Ld.checkArgs(b,{db:"string",
type:"string",name:"string",ref:"string|undefined",toCommitId:"string"}),l=c.db,a=c.type,f=c.name,m=c.ref,q=c.toCommitId,u.yield(Ld.ObjectDB.find(l),2);r=u.yieldResult;m||(m="HEAD");return u.return(r.revert(a,f,m,q))})},commit:function(b){var c,l,a,f,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return c=Ld.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined",snapshot:"object|string|undefined",preview:"string|undefined",commitSpec:"object",
expectedParentCommit:"string|undefined"}),l=c.db,a=c.type,f=c.name,m=c.ref,q=c.expectedParentCommit,r=c.commitSpec,u=c.snapshot,v=c.preview,z.yield(Ld.ObjectDB.find(l),2);y=z.yieldResult;m||(m="HEAD");return z.return(y.commit(a,f,u,r,v,m,q))})},exportToSpecs:function(b){var c,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return c=Ld.checkArgs(b,{db:"string",nameAndTypes:"Array|undefined",includeDeleted:"boolean|undefined"}),l=c.db,a=c.nameAndTypes,m.yield(Ld.ObjectDB.find(l),
2);f=m.yieldResult;if(!f)throw Error("db "+l+" does not exist");return m.return(f.exportToSpecs(a))})},exportToDir:function(b){var c,l,a,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return c=Ld.checkArgs(b,{db:"string",url:"string",nameAndTypes:"Array|undefined",copyResources:"boolean|undefined",includeDeleted:"boolean|undefined"}),l=c.db,a=c.url,f=c.nameAndTypes,m=c.copyResources,q=c.includeDeleted,v.yield(Ld.ObjectDB.find(l),2);r=v.yieldResult;if(!r)throw Error("db "+
l+" does not exist");try{u=Ld.resource(a)}catch(y){u=Ld.resource(System.baseURL).join(a)}return v.return(r.exportToDir(u,f,m,q))})},importFromDir:function(b){var c,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return c=Ld.checkArgs(b,{db:"string",url:"string",overwrite:"boolean|undefined",copyResources:"boolean|undefined"}),l=c.db,a=c.url,f=c.overwrite,m=c.copyResources,u.yield(Ld.ObjectDB.find(l),2);q=u.yieldResult;if(!q)throw Error("db "+l+" does not exist");
try{r=Ld.resource(a)}catch(v){r=Ld.resource(System.baseURL).join(a)}return u.return(q.importFromDir(r,f,m))})},importFromSpecs:function(b){var c,l,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return c=Ld.checkArgs(b,{db:"string",specs:"object",overwrite:"boolean|undefined",copyResources:"boolean|undefined"}),l=c.db,a=c.specs,f=c.overwrite,m=c.copyResources,r.yield(Ld.ObjectDB.find(l),2);q=r.yieldResult;if(!q)throw Error("db "+l+" does not exist");return r.return(q.importFromSpecs(a,
f,m))})},importFromResource:function(b){var c,l,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return c=Ld.checkArgs(b,{db:"string",type:"string",name:"string",url:"string",commitSpec:"object",purgeHistory:"boolean|undefined"}),l=c.db,a=c.type,f=c.name,m=c.url,q=c.commitSpec,r=c.purgeHistory,y.yield(Ld.ObjectDB.find(l),2);u=y.yieldResult;if(!u)throw Error("db "+l+" does not exist");try{v=Ld.resource(m)}catch(z){v=Ld.resource(System.baseURL).join(m)}return y.return(u.importFromResource(a,
f,v,q,r))})},delete:function(b){var c,l,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return c=Ld.checkArgs(b,{db:"string",type:"string",name:"string",dryRun:"boolean|undefined"}),l=c.db,a=c.type,f=c.name,m=c.dryRun,r.yield(Ld.ObjectDB.find(l),2);q=r.yieldResult;return r.return(q.delete(a,f,"undefined"===typeof m||m))})},deleteCommit:function(b){var c,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return c=Ld.checkArgs(b,
{db:"string",commit:"string",dryRun:"boolean|undefined"}),l=c.db,a=c.commit,f=c.dryRun,q.yield(Ld.ObjectDB.find(l),2);m=q.yieldResult;return q.return(m.deleteCommit(a,"undefined"===typeof f||f))})},fetchConflicts:function(b){var c,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return c=Ld.checkArgs(b,{db:"string",includeDocs:"boolean|undefined",only:"object|undefined"}),l=c.db,a=c.includeDocs,f=c.only,q.yield(Ld.ObjectDB.find(l),2);m=q.yieldResult;return q.return(m.getConflicts(a,
f))})},resolveConflict:function(b){var c,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return c=Ld.checkArgs(b,{db:"string",id:"string",kind:"string",delete:"Array",resolved:"object"}),l=c.db,a=c.resolved,f=c.delete,m=c.kind,q=c.id,u.yield(Ld.ObjectDB.find(l),2);r=u.yieldResult;return u.return(r.resolveConflict({resolved:a,delete:f,kind:m,id:q}))})},fetchDiff:function(b){var c,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return c=Ld.checkArgs(b,{db:"string",otherDB:"string"}),l=c.db,a=c.otherDB,m.yield(Ld.ObjectDB.find(l),2);f=m.yieldResult;return m.return(f.getDiff(a))})},synchronize:function(b){var c,l,a,f,m,q,r,u,v,y,z,A,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:return c=Ld.checkArgs(b,{db:"string",otherDB:"string",otherDBSnapshotLocation:"string|undefined",onlyTypesAndNames:"object|undefined",method:"string|undefined"}),l=c.db,a=c.otherDB,f=c.otherDBSnapshotLocation,
m=c.onlyTypesAndNames,q=c.method,G.yield(Ld.ObjectDB.find(l),2);case 2:return f||(f=a.replace(/\/$/,"")+"/snapshots"),q||(q="replicateTo"),G.yield(Ld.ObjectDB.find(l),3);case 3:return r=G.yieldResult,G.yield(Ld.ObjectDB.named(a,{snapshotLocation:f}),4);case 4:return u=G.yieldResult,G.yield(u._commitDB(),5);case 5:return v=G.yieldResult,G.yield(u._versionDB(),6);case 6:return y=G.yieldResult,z=u.snapshotLocation,A={replicationFilter:m?{onlyTypesAndNames:m}:void 0,retry:!0,live:!0},C=r[q](v,y,z,A),
G.yield(C.whenPaused(),7);case 7:return G.yield(C.safeStop(),8);case 8:return G.yield(C.waitForIt(),9);case 9:return G.return(Ld.obj.select(C,["state","method","conflicts","errors","changesByTypeAndName"]))}})}};Ld.ObjectDBInterface=rz;Ld.ObjectDBInterface=rz;Ld.ObjectDBInterface=rz;var Qi=function(b){this.serverURL=b=void 0===b?document.location.origin+"/objectdb/":b};Qi.prototype._processResponse=function(b){var c,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return c=
b.headers.get("content-type"),f.yield(b.text(),2);l=f.yieldResult;if("application/json"===c)try{a=JSON.parse(l)}catch(m){}if(!b.ok||a&&a.error)throw Error(a&&a.error||l||b.statusText);return f.return(a||l)})};Qi.prototype._GET=function(b,c){c=void 0===c?{}:c;var l=this,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(a=Object.keys(c).map(function(u){var v=c[u];"object"===typeof v&&(v=JSON.stringify(v));return u+"="+encodeURIComponent(v)}).join("&"),f=
l.serverURL+b+"?"+a,m=l,q=m._processResponse,r.yield(fetch(f),2)):r.return(q.call(m,r.yieldResult))})};Qi.prototype._POST=function(b,c){c=void 0===c?{}:c;var l=this,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(a=l.serverURL+b,f=l,m=f._processResponse,q.yield(fetch(a,{method:"POST",body:JSON.stringify(c),headers:{"content-type":"application/json"}}),2)):q.return(m.call(f,q.yieldResult))})};Qi.prototype.describe=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._GET("describe",
b))})};Qi.prototype.ensureDB=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._POST("ensureDB",b))})};Qi.prototype.destroyDB=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._POST("destroyDB",b))})};Qi.prototype.fetchCommits=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._GET("fetchCommits",b))})};Qi.prototype.fetchVersionGraph=function(b){var c=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._GET("fetchVersionGraph",b))})};Qi.prototype.exists=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._GET("exists",b))})};Qi.prototype.fetchLog=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._GET("fetchLog",b))})};Qi.prototype.fetchSnapshot=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._GET("fetchSnapshot",
b))})};Qi.prototype.revert=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._POST("revert",b))})};Qi.prototype.commit=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._POST("commit",b))})};Qi.prototype.exportToSpecs=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._GET("exportToSpecs",b))})};Qi.prototype.exportToDir=function(b){var c=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._POST("exportToDir",b))})};Qi.prototype.importFromDir=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._POST("importFromDir",b))})};Qi.prototype.importFromSpecs=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._POST("importFromSpecs",b))})};Qi.prototype.importFromResource=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._POST("importFromResource",
b))})};Qi.prototype.delete=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._POST("delete",b))})};Qi.prototype.deleteCommit=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._POST("deleteCommit",b))})};Qi.prototype.fetchConflicts=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._GET("fetchConflicts",b))})};Qi.prototype.resolveConflict=
function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._POST("resolveConflict",b))})};Qi.prototype.fetchDiff=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._GET("fetchDiff",b))})};Qi.prototype.synchronize=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(c._POST("synchronize",b))})};Ld.ObjectDBHTTPInterface=Qi;Ld.default=Og;var Ri=lively.FreezerRuntime.recorderFor("lively.storage/storage-resource.js");
Ri.applyExclude=function(b,c){return c?"string"===typeof c?!b.url.includes(c):"function"===typeof c?!c(b):c instanceof RegExp?!c.test(b.url):!0:!0};Ri.Resource=If;Ri.Database=jg;Ri.debug=!1;Ri.slashRe=/\//g;var sR=function(){return Ri.Database.apply(this,arguments)||this};$jscomp.inherits(sR,Ri.Database);sR.ensureDB=function(b,c){return Ri.Database.ensureDB.call(this,"lively.storage-"+b,c)};Ri.StorageDatabase=sR;var tp=function(){return Ri.Resource.apply(this,arguments)||this};$jscomp.inherits(tp,
Ri.Resource);tp.prototype.read=function(){var b=this,c,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return Ri.debug&&console.log("["+b+"] read"),a.yield(b.db.get(b.pathWithoutQuery()),2);l=(c=a.yieldResult)&&c.content;return a.return(l?"string"===typeof l?l:JSON.stringify(l):"")})};tp.prototype.readJson=function(){var b=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.read(),2);c=l.yieldResult;return l.return("string"===
typeof c?JSON.parse(c):c)})};tp.prototype.write=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){Ri.debug&&console.log("["+c+"] write");b||(b="");if(c.isDirectory())throw Error("Cannot write into a directory! ("+c.url+")");return l.yield(c.db.update(c.pathWithoutQuery(),function(a){if(a&&a.isDirectory)throw Error(c.url+" already exists and is a directory (cannot write into it!)");var f=Date.now();return a?Object.assign({},a,{lastModified:f,
size:b.length,content:b}):{etag:void 0,type:void 0,contentType:void 0,user:void 0,group:void 0,mode:void 0,lastModified:f,created:f,size:"string"===typeof b?b.length:0,content:b}}),2)}return l.return(c)})};tp.prototype.writeJson=function(b){return this.write(b)};tp.prototype.mkdir=function(){var b=this,c,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){Ri.debug&&console.log("["+b+"] mkdir");if(!b.isDirectory())throw Error("Cannot mkdir a file! ("+b.url+")");return a.yield(b.db.get(b.pathWithoutQuery()),
2)}if(3!=a.nextAddress){if(c=a.yieldResult){if(!c.isDirectory)throw Error(b.url+" already exists and is a file (cannot mkdir it!)");return a.return(b)}l=Date.now();return a.yield(b.db.set(b.pathWithoutQuery(),{etag:void 0,type:void 0,contentType:void 0,user:void 0,group:void 0,mode:void 0,lastModified:l,created:l,isDirectory:!0}),3)}return a.return(b)})};tp.prototype.exists=function(){var b=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return Ri.debug&&
console.log("["+b+"] exists"),(c=b.isRoot())?l.jumpTo(2):l.yield(b.db.get(b.pathWithoutQuery()),3);2!=l.nextAddress&&(c=!!l.yieldResult);return l.return(c)})};tp.prototype.remove=function(){var b=this,c,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(Ri.debug&&console.log("["+b+"] remove"),c=b.pathWithoutQuery(),l=b.db,f.yield(l.docList({startkey:c,endkey:c+"\uffff"}),2)):3!=f.nextAddress?(a=f.yieldResult,f.yield(l.setDocuments(a.map(function(m){return{_id:m.id,
_rev:m.rev,_deleted:!0}})),3)):f.return(b)})};tp.prototype.readProperties=function(){Ri.debug&&console.log("["+this+"] readProperties");return this.db.get(this.pathWithoutQuery())};tp.prototype.dirList=function(b,c){b=void 0===b?1:b;c=void 0===c?{}:c;var l=this,a,f,m,q,r,u,v,y,z,A,C,G,F,N,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){if(1==W.nextAddress){Ri.debug&&console.log("["+l+"] dirList");if(!l.isDirectory())return W.return(l.asDirectory().dirList(b,c));a=c;f=a.exclude;m=
l.pathWithoutQuery();q=[];return W.yield(l.db.getAll({startkey:m,endkey:m+"\uffff"}),2)}r=W.yieldResult;"infinity"===b&&(b=Infinity);u={};for(v=0;v<r.length;u={$jscomp$loop$prop$dirToChild$2546:u.$jscomp$loop$prop$dirToChild$2546},v++)if(z=y=r[v],A=z._id,A.startsWith(m)&&m!==A)if(C=A.slice(m.length),G=C.includes("/")?C.match(Ri.slashRe).length+1:1,G>b)u.$jscomp$loop$prop$dirToChild$2546=l.join(C.split("/").slice(0,b).join("/")+"/"),q.some(function(la){return function(wa){return wa.equals(la.$jscomp$loop$prop$dirToChild$2546)}}(u))||
q.push(u.$jscomp$loop$prop$dirToChild$2546);else if(F=l.join(C),!f||Ri.applyExclude(F,f))for(q.push(F),N="created lastModified mode group user contentType type etag size".split(" "),L=0;L<N.length;L++)F[N[L]]=y[N[L]];return W.return(q)})};$jscomp.global.Object.defineProperties(tp.prototype,{canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!0}},db:{configurable:!0,enumerable:!0,get:function(){return this._db||(this._db=Ri.StorageDatabase.ensureDB(this.host()))}}});Ri.LivelyStorageResource=
tp;var tR={name:"lively.storage",matches:function(b){return b.startsWith("lively.storage:")},resourceClass:Ri.LivelyStorageResource};Ri.resourceExtension=tR;Ri.resourceExtension=tR;Ri.resourceExtension=tR;Ri.registerExtension=ma;Ri.registerExtension(Ri.resourceExtension);Ri.default=tp;var as=lively.FreezerRuntime.recorderFor("lively.storage/index.js");as.default=jg;as.Database=jg;as.ObjectDB=Og;as.ObjectDBInterface=rz;as.ObjectDBHTTPInterface=Qi;as.ObjectDB=Og;as.ObjectDB=Og;as.ObjectDBInterface=
rz;as.ObjectDBInterface=rz;as.ObjectDBHTTPInterface=Qi;as.ObjectDBHTTPInterface=Qi;var Zka=Object.freeze({__proto__:null,Database:jg,ObjectDB:Og,ObjectDBInterface:rz,ObjectDBHTTPInterface:Qi}),bg=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js");bg.convertToSerializableCommit=gO;bg.ensureCommitInfo=uD;bg.ObjectDBHTTPInterface=Qi;bg.Database=jg;bg.loadMorphFromSnapshot=Us;bg.createMorphSnapshot=$x;bg.resource=T;bg.obj=lf;bg.Path=Xg;bg.arr=Te;bg.string=Hg;bg.morphicDBs=bg.morphicDBs||
(bg.morphicDBs=new Map);bg.defaultServerURL=("undefined"!==typeof document?document.location.origin:"http://localhost:9001")+"/objectdb/";bg.convertToSerializableCommit=gO;bg.convertToSerializableCommit=gO;bg.ensureCommitInfo=uD;bg.ensureCommitInfo=uD;var uR=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),l=c.hasOwnProperty("MorphicDB")&&"function"===typeof c.MorphicDB?c.MorphicDB:c.MorphicDB=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){var m=f.snapshotLocation;f=f.serverURL;this.name=a;this.serverURL=f;this.snapshotLocation=m||a+"/snapshots/";this.httpDB=new bg.ObjectDBHTTPInterface(f);this._initialized=!1}},{key:"__serialize__",value:function(){return{__expr__:'MorphicDB.named("'+this.name+'", {snapshotLocation: "'+this.snapshotLocation+'", serverURL: "'+this.serverURL+'"})',bindings:{"lively.morphic/morphicdb/index.js":["MorphicDB"]}}}},
{key:"initializeIfNecessary",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return a._initialized?f.return():f.yield(a.ensureDB(),2);a._initialized=!0;f.jumpToEnd()})}},{key:"snapshotResourceFor",value:function(a){var f=a.content.slice(0,2);a=a.content.slice(2);return bg.resource(System.decanonicalize(this.snapshotLocation)).join(f+"/"+a+".json")}},{key:"ensureDB",value:function(){return this.httpDB.ensureDB({db:this.name,snapshotLocation:this.snapshotLocation})}},
{key:"destroyDB",value:function(){this._initialized=!1;return this.httpDB.destroyDB({db:this.name})}},{key:"latestCommits",value:function(a,f){a=void 0===a?"world":a;f=void 0===f?!1:f;var m=this,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(m.initializeIfNecessary(),2);q=m;r=q.name;u={};return v.return(m.httpDB.fetchCommits({db:r,type:a,ref:"HEAD",knownCommitIds:u,includeDeleted:f}))})}},{key:"fetchCommit",value:function(a,f,m){var q=this,
r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(q.initializeIfNecessary(),2);if(3!=v.nextAddress)return r=[{type:a,name:f,ref:m}],v.yield(q.httpDB.fetchCommits({db:q.name,ref:m,type:a,typesAndNames:r,knownCommitIds:{}}),3);u=v.yieldResult;return v.return(bg.convertToSerializableCommit(u[0]))})}},{key:"fetchSnapshot",value:function(a,f,m,q){var r=this,u=arguments,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return v=
a,1===u.length&&v.type&&v.name&&(a=v.type,f=v.name,m=v._id),A.yield(r.initializeIfNecessary(),2);y=r;z=y.name;return A.return(r.httpDB.fetchSnapshot({db:z,type:a,name:f,ref:q,commit:m}))})}},{key:"exists",value:function(a,f,m){var q=this,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(q.initializeIfNecessary(),2);r=q;u=r.name;return v.return(q.httpDB.exists({db:u,type:a,name:f,ref:m}))})}},{key:"history",value:function(a,f){var m=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress)return u.yield(m.initializeIfNecessary(),2);q=m;r=q.name;return u.return(m.httpDB.fetchVersionGraph({db:r,type:a,name:f}))})}},{key:"log",value:function(a,f,m,q){m=void 0===m?!1:m;var r=this,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==y.nextAddress?y.yield(r.initializeIfNecessary(),2):3!=y.nextAddress?(u=r,v=u.name,y.yield(r.httpDB.fetchLog({db:v,commit:a,limit:f,includeCommits:m,knownCommitIds:q}),3)):y.return(y.yieldResult.map(bg.convertToSerializableCommit))})}},
{key:"revert",value:function(a,f,m,q){q=void 0===q?"HEAD":q;var r=this,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(r.initializeIfNecessary(),2);u=r;v=u.name;return y.return(r.httpDB.revert({db:v,type:a,name:f,toCommitId:m,ref:q}))})}},{key:"snapshotAndCommit",value:function(a,f,m,q,r,u,v){var y=this,z,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){if(1==C.nextAddress)return C.yield(bg.createMorphSnapshot(m,q),2);if(3!=C.nextAddress)return z=
C.yieldResult,C.yield(y.commit(a,f,z,r,u,v),3);A=C.yieldResult;A=bg.convertToSerializableCommit(A);m.changeMetaData("commit",bg.obj.dissoc(A,["preview"]),!0,!1);return C.return(A)})}},{key:"commit",value:function(a,f,m,q,r,u){var v=this,y=arguments,z,A,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress)return z=a,1===y.length&&z.type&&z.name&&(a=z.type,f=z.name,m=z.snapshot||z.content,q=bg.obj.dissoc(z,["snapshot","_rev","_id","ancestors","deleted"]),u=z._id),G.yield(v.initializeIfNecessary(),
2);A=v;C=A.name;return G.return(v.httpDB.commit({db:C,type:a,name:f,ref:r,expectedParentCommit:u,commitSpec:q,snapshot:m}))})}},{key:"load",value:function(a,f,m,q,r){var u=this,v,y,z,A,C,G,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:"object"===typeof a?q=a:v=a;y=q;if(!y)return N.yield(u.fetchCommit(v,f,r),6);if("string"!==typeof y){N.jumpTo(3);break}z=$jscomp;A=z.makeIterator;return N.yield(u.log(y,1,!0),5);case 5:C=A.call(z,N.yieldResult);y=C.next().value;
N.jumpTo(3);break;case 6:y=N.yieldResult;case 3:return N.yield(u.fetchSnapshot(void 0,void 0,y._id),7);case 7:return G=N.yieldResult,N.yield(bg.loadMorphFromSnapshot(G,m),8);case 8:return F=N.yieldResult,y=bg.convertToSerializableCommit(y),F.changeMetaData("commit",bg.obj.dissoc(y,["preview"]),!0,!1),N.return(F)}})}},{key:"fetchDiff",value:function(a){var f=this,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(f.initializeIfNecessary(),2);m=f;q=
m.name;return r.return(f.httpDB.fetchDiff({db:q,otherDB:a}))})}},{key:"fetchConflicts",value:function(a,f){var m=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(m.initializeIfNecessary(),2);q=m;r=q.name;return u.return(m.httpDB.fetchConflicts({db:r,includeDocs:a,only:f}))})}},{key:"resolveConflict",value:function(a){var f=this,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(f.initializeIfNecessary(),
2);m=f;q=m.name;return r.return(f.httpDB.resolveConflict(Object.assign({db:q},a)))})}},{key:"synchronize",value:function(a){var f=a.method,m=a.otherDB,q=a.otherDBSnapshotLocation,r=a.onlyTypesAndNames,u=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return z.yield(u.initializeIfNecessary(),2);v=u;y=v.name;return z.return(u.httpDB.synchronize({db:y,method:f,otherDB:m,otherDBSnapshotLocation:q,onlyTypesAndNames:r}))})}},{key:"softDelete",value:function(a,
f,m,q,r){var u=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return v.return(u.commit(a,f,void 0,m,q,r))})}},{key:"delete",value:function(a,f,m){m=void 0===m?!0:m;var q=this,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(q.initializeIfNecessary(),2);r=q;u=r.name;return v.return(q.httpDB.delete({db:u,type:a,name:f,dryRun:m}))})}},{key:"deleteCommit",value:function(a,f){f=void 0===f?!0:f;var m=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress)return u.yield(m.initializeIfNecessary(),2);q=m;r=q.name;return u.return(m.httpDB.deleteCommit({db:r,commit:a,dryRun:f}))})}},{key:"codeSearchInPackages",value:function(a,f,m,q){f=void 0===f?"part":f;var r=this,u,v,y,z,A,C,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:return F.yield(r.latestCommits(f),2);case 2:u=F.yieldResult,v=[],y=0,"function"===typeof q&&(u=u.filter(q)),z=$jscomp.makeIterator(u),A=z.next();case 3:if(A.done){F.jumpTo(5);
break}C=A.value;"function"===typeof m&&m(C.name,y++,u.length);return F.yield(r._textSearchInSnapshotOfCommit(a,C),6);case 6:G=F.yieldResult;G.length&&v.push.apply(v,$jscomp.arrayFromIterable(G));A=z.next();F.jumpTo(3);break;case 5:return F.return(v)}})}},{key:"_textSearchInSnapshotOfCommit",value:function(a,f,m){var q=this,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return r=f,u=r._id,(v=m)?z.jumpTo(2):z.yield(q.fetchSnapshot(void 0,void 0,u),3);2!=z.nextAddress&&
(v=z.yieldResult);y=v;return z.return((new bg.SnapshotPackageHelper(y)).textSearch(a,f))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicDB"}},{key:"default",get:function(){return this.named("lively.morphic/objectdb/morphicdb",{serverURL:bg.defaultServerURL})}},{key:"named",value:function(a,f){var m=bg.morphicDBs.get(a);if(m)return m;if(!f.serverURL)throw Error("Needs serverURL!");f=new this(a,f);bg.morphicDBs.set(a,f);return f}},{key:"wellKnownMorphicDBs",value:function(){var a=
this,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return f=bg.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs"),r.yield(f.getAll(),2);m=r.yieldResult;q=m.reduce(function(u,v){var y={};return Object.assign(u,(y[v._id]=a.named(v.name,{serverURL:v.serverURL,snapshotLocation:v.snapshotLocation}),y))},{});q.default||(q.default=a.default);return r.return(q)})}},{key:"addWellKnownMorphicDB",value:function(a,f){var m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){m=
f;q=m.name;r=m.snapshotLocation;u=m.serverURL;v=bg.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return y.yield(v.set(a,{name:q,snapshotLocation:r,serverURL:u}),0)})}},{key:"removeWellKnownMorphicDB",value:function(a){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){f=bg.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return m.yield(f.remove(a),0)})}}],c,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1452,end:10229})}(void 0);uR=bg.MorphicDB;var Jt=ya("Y",uR),mK=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),l=c.hasOwnProperty("SnapshotPackageHelper")&&"function"===typeof c.SnapshotPackageHelper?c.SnapshotPackageHelper:c.SnapshotPackageHelper=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.snapshot=a}},{key:"textSearch",value:function(a,f){var m=a&&a instanceof RegExp,q=[];if(!a)return q;for(var r={},u=$jscomp.makeIterator(this.filesInPackages()),v=u.next();!v.done;r={$jscomp$loop$prop$file$2548:r.$jscomp$loop$prop$file$2548},v=u.next()){r.$jscomp$loop$prop$file$2548=v.value;v=r.$jscomp$loop$prop$file$2548.get(this.snapshot);var y=bg.string.lineIndexComputer(v),z=bg.string.lineRanges(v);
if(m)v=bg.string.reMatches(v,a),v.length&&q.push.apply(q,$jscomp.arrayFromIterable(v.map(function(W){return function(la){return Object.assign(la,{commit:f,file:W.$jscomp$loop$prop$file$2548})}}(r))));else for(var A=0,C=0;0<=(A=v.indexOf(a));){var G=A+C,F=G+a.length,N=y(G),L=v.slice.apply(v,$jscomp.arrayFromIterable(z[N]));q.push({match:a,start:G,end:F,length:a.length,line:N,lineString:L,commit:f,file:r.$jscomp$loop$prop$file$2548});C+=A+a.length;v=v.slice(A+a.length)}}return q}},{key:"filesInPackages",
value:function(){function a(q,r,u,v,y){y=void 0===y?[]:y;if(q["package.json"]&&"string"===typeof q["package.json"])try{var z=JSON.parse(q["package.json"]);v={url:u,path:r,name:z.name||bg.arr.last(r)}}catch(C){}z=[];for(var A in q)"string"===typeof q[A]?y.push({path:r.concat(A),url:bg.string.joinPath(u,A),package:v,get:function(C){return bg.Path(this.path).get(C.packages)},set:function(C,G){bg.Path(this.path).set(C.packages,G)}}):z.push(A);z.forEach(function(C){return a(q[C],r.concat(C),bg.string.joinPath(u,
C),v,y)});return y}var f=[],m;for(m in this.snapshot.packages)a(this.snapshot.packages[m],[m],m,null,f);return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapshotPackageHelper"}}],c,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10238,end:13311})}(void 0);bg.SnapshotPackageHelper=
mK;bg.SnapshotPackageHelper=mK;bg.SnapshotPackageHelper=mK;bg.default=uR;var Ed=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js");Ed.prefetchCoreStyleguides=DH;Ed.getProjectName=function(b){return Ed.Path("metadata.commit.name").get(b)||b.name};Ed.clearSnapshot=hO;Ed.arr=Te;Ed.properties=mp;Ed.Path=Xg;Ed.promise=Kf;Ed.obj=lf;Ed.registerExtension=ma;Ed.Resource=If;Ed.resource=T;Ed.pt=fh;Ed.MorphicDB=Jt;Ed.ObjectPool=oi;Ed.normalizeOptions=Nl;Ed.deserializeMorph=yC;Ed.loadPackagesAndModulesOfSnapshot=
zC;Ed.subscribeOnce=function(b,c,l){nr(l).emitter.once(b,c);return c};Ed.prefetchCoreStyleguides=DH;Ed.prefetchCoreStyleguides=DH;var nK=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),l=c.hasOwnProperty("ComponentPolicy")&&"function"===typeof c.ComponentPolicy?c.ComponentPolicy:c.ComponentPolicy=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a,f){this.derivedMorph=a;this._overriddenProps=new WeakMap;if(f.isMorph||"string"===typeof f)this.auto=f,f.isMorph&&(this.auto.isComponent=!0),"string"===typeof f&&this.resolveMasterComponents();else{a=f.click;var m=f.auto,q=f.hover,r=void 0===f.light?{}:f.light;f=void 0===f.dark?{}:f.dark;r&&(this.light=r);f&&(this.dark=f);a&&(this.click=a);m&&(this.auto=m);q&&(this.hover=q);this.resolveMasterComponents()}}},{key:"uses",value:function(a){return[this.auto,this.click,this.hover].includes(a)}},
{key:"spec",value:function(){return Ed.obj.select(this,["auto","click","hover","light","dark"])}},{key:"equals",value:function(a){if(!a)return!1;for(var f=$jscomp.makeIterator(["auto","click","hover"]),m=f.next();!m.done;m=f.next())if(m=m.value,"string"===typeof a[m]){if(this.getResourceUrlFor(this[m])!=a[m])return!1}else if((this[m]||null)!=(a[m]||null))return!1;return!0}},{key:"getManagedMorphs",value:function(){var a=this,f=[];this.derivedMorph.withAllSubmorphsDo(function(m){a.managesMorph(m)&&
0<Object.keys(a._overriddenProps.get(m)).filter(function(q){return"_rev"!=q}).length&&f.push([m,Object.keys(a._overriddenProps.get(m))])});return f}},{key:"__dont_serialize__",get:function(){var a=["_overriddenProps","_applying","_appliedMaster","_hasUnresolvedMaster"];Ed.obj.isEmpty(this.dark)&&a.push("dark");Ed.obj.isEmpty(this.light)&&a.push("light");return a}},{key:"__serialize__",value:function(){var a={};this.auto&&(a.auto=this.getResourceUrlFor(this.auto));this.click&&(a.click=this.getResourceUrlFor(this.click));
this.hover&&(a.hover=this.getResourceUrlFor(this.hover));return{__expr__:"("+JSON.stringify(a)+")"}}},{key:"__after_deserialize__",value:function(a,f){this._overriddenProps=new WeakMap;delete this.managedMorphs;this.resolveMasterComponents()}},{key:"whenApplied",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?f.yield(a._hasUnresolvedMaster,2):3!=f.nextAddress?f.yield(Ed.promise.waitFor(1E3,function(){return a._appliedMaster}),3):f.return(!0)})}},
{key:"whenReady",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.yield(a._hasUnresolvedMaster,0)})}},{key:"getResourceUrlFor",value:function(a){return a?a._resourceHandle?a._resourceHandle.url:void 0==a.name?null:"styleguide://"+Ed.getProjectName($world)+"/"+a.name:null}},{key:"getWorldUrlFor",value:function(a){a=Ed.resource("string "===typeof a?a:this.getResourceUrlFor(a)).worldName;return a==Ed.getProjectName($world)?document.location.href:Ed.worldToUrl[a]}},
{key:"resolveMasterComponents",value:function(){var a=this,f,m,q,r,u,v,y,z,A,C,G,F,N,L,W,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wa){switch(wa.nextAddress){case 1:f=Ed.promise.deferred(),a._hasUnresolvedMaster=f.promise,m=a,q=void 0===m.light?{}:m.light,r=void 0===m.dark?{}:m.dark,u=["auto","click","hover"],v=[],wa.setCatchFinallyBlocks(2),y=$jscomp.makeIterator(u),z=y.next();case 4:if(z.done){wa.leaveTryBlock(3);break}A=z.value;if("string"!==typeof a[A]){wa.jumpTo(7);break}C=
a;G=A;return wa.yield(Ed.resource(a[A]).read(),8);case 8:C[G]=wa.yieldResult;case 7:if("string"!==typeof q[A]){wa.jumpTo(9);break}F=q;N=A;return wa.yield(Ed.resource(q[A]).read(),10);case 10:F[N]=wa.yieldResult;case 9:if("string"!==typeof r[A]){wa.jumpTo(11);break}L=r;W=A;return wa.yield(Ed.resource(r[A]).read(),12);case 12:L[W]=wa.yieldResult;case 11:v.push(a[A],q[A],r[A]);z=y.next();wa.jumpTo(4);break;case 2:throw la=wa.enterCatchBlock(),Error("Encountered invalid master component reference: "+
la.message);case 3:Ed.arr.compact(v).forEach(function(D){D.isComponent||(D.isComponent=!0)}),f.resolve(),a._hasUnresolvedMaster=!1,wa.jumpToEnd()}})}},{key:"applyAnimated",value:function(a){var f=this;a=void 0===a?{duration:1E3}:a;this.applyIfNeeded(!0,a);return Ed.promise.waitFor(2*a.duration,function(){return!f._animationConfig})}},{key:"applyIfNeeded",value:function(a,f){var m=this;a=void 0===a?!1:a;if(f=void 0===f?!1:f)this._animationConfig=f;if(this._hasUnresolvedMaster)return this._originalOpacity=
this.derivedMorph.opacity,this.derivedMorph.withMetaDo({metaInteraction:!0},function(){f||[m.derivedMorph].concat($jscomp.arrayFromIterable(m.derivedMorph.ownerChain())).find(function(u){return u.isComponent})||(m.derivedMorph.opacity=0)}),this._hasUnresolvedMaster.then(function(){m.applyIfNeeded(a);m.derivedMorph.withMetaDo({metaInteraction:!0},function(){m.derivedMorph.opacity=m._originalOpacity});delete m._originalOpacity;delete m._capturedExtents});var q=this.derivedMorph,r=this.determineMaster(q);
r&&this._appliedMaster!=r&&(a=!0);r&&a&&(this.apply(q,r),this._appliedMaster=r)}},{key:"getStyleProperties",value:function(a){var f=a.propertiesAndPropertySettings();a=f.properties;var m=[];f=$jscomp.makeIterator(f.order);for(var q=f.next();!q.done;q=f.next())q=q.value,a[q].isStyleProp&&m.push(q);return m}},{key:"apply",value:function(a,f,m){var q=this;m=void 0===m?this._animationConfig:m;if(!this._applying){this._applying=!0;try{var r=function(){var u=q.prepareSubmorphsToBeManaged(a,f);f.withAllSubmorphsDoExcluding(function(v){var y=
v==f,z=y?a:u[v.name];if(z)if(Ed.obj.isArray(z)&&(z=z.pop()),v.master&&!y)z.master=v.master.spec(),z._requestMasterStyling=!0,q._overriddenProps.get(z).position||(z.position=v.position),q._overriddenProps.get(z).extent||(z.extent=v.extent);else{y=$jscomp.makeIterator(q.getStyleProperties(v));for(var A=y.next();!A.done;A=y.next())if(A=A.value,!q._overriddenProps.get(z)[A])if("layout"==A)z.layout&&v.layout&&z.layout.name()==v.layout.name()&&z.layout.equals(v.layout)||(z.layout=v.layout?v.layout.copy():
void 0);else{if(v==f){if("extent"==A&&!z.extent.equals(Ed.pt(10,10))&&(!z.owner||z.owner.isWorld||z.ownerChain().find(function(C){return C.master&&C.master.managesMorph(z)})))continue;if("position"==A)continue}z.isLabel&&"extent"==A||["border","borderTop","borderBottom","borderRight","borderLeft"].includes(A)||(Ed.obj.equals(z[A],v[A])||(z[A]=v[A]),["fixedHeight","fixedWidth"].includes(A)&&z._parametrizedProps&&z._parametrizedProps.extent&&(z.extent=z._parametrizedProps.extent))}z._parametrizedProps&&
delete z._parametrizedProps}},function(v){return f!=v&&v.master})};m?a.withAnimationDo(r,m).then(function(){delete q._animationConfig;q._applying=!1}):a.dontRecordChangesWhile(r)}finally{m||(this._applying=!1),delete a._parametrizedProps}}}},{key:"clearOverriddenPropertiesFor",value:function(a,f){var m=this._overriddenProps.get(a);this._overriddenProps.set(a,Ed.obj.dissoc(m,f))}},{key:"prepareSubmorphsToBeManaged",value:function(a,f){var m=this,q={};a.withAllSubmorphsDoExcluding(function(r){q[r.name]&&
(Ed.obj.isArray(q[r.name])?q[r.name].push(r):q[r.name]=[q[r.name],r]);q[r.name]=r},function(r){return r!=a&&r.master});f.withAllSubmorphsDoExcluding(function(r){if(r=r==f?a:q[r.name])Ed.obj.isArray(r)&&(r=r.pop()),m.prepareMorphToBeManaged(r)},function(r){return r!=f&&r.master});return q}},{key:"managedMorphs",get:function(){var a=this,f=Ed.arr.groupBy(this.derivedMorph.withAllSubmorphsSelect(function(q){return a.managesMorph(q)}),function(q){return q.name}),m;for(m in f)f[m]=f[m][0];return f}},{key:"reconcileSubmorphs",
value:function(){var a=this,f=this.managedMorphs,m=[],q=this._appliedMaster;f[q.name]=this.derivedMorph;q&&(q.withAllSubmorphsDo(function(r){if(r==q)m.push(r,a.derivedMorph);else{var u;if(u=f[r.name])if(u.owner.name==r.owner.name)m.push(u);else{var v;if(v=f[r.owner.name])r=r.owner.submorphs.indexOf(r),m.push(v.addMorphAt(u,r));else throw Error("Missing a owner that had to be added previously....");}else u=f[r.name]=r.copy(),v=f[r.owner.name],r=r.owner.submorphs.indexOf(r),u.submorphs=[],m.push(v.addMorphAt(u,
r))}}),Object.values(Ed.obj.dissoc(f,m.map(function(r){return r.name}))).forEach(function(r){console.log(f,m.map(function(u){return u.name}));r.remove()}))}},{key:"managesMorph",value:function(a){return this._overriddenProps.has(a)}},{key:"propsToSerializeForMorph",value:function(a,f){if(!this.managesMorph(a))return f;for(var m=[],q=$jscomp.makeIterator(this.getStyleProperties(a)),r=q.next();!r.done;r=q.next())r=r.value,this._overriddenProps.get(a)[r]||!("position"==r&&a==this.derivedMorph||"extent"==
r&&a==this.derivedMorph)&&m.push(r);return Ed.arr.withoutAll(f,m)}},{key:"prepareMorphToBeManaged",value:function(a){if(!this._overriddenProps.has(a)){var f={},m;for(m in a._parametrizedProps)"__takenFromSnapshot__"!=m&&(f[m]=!0);this._overriddenProps.set(a,f)}}},{key:"determineMaster",value:function(a){var f=a.env.world.colorScheme,m=a.env.eventDispatcher.isMorphHovered(a);a=a.env.eventDispatcher.isMorphClicked(a);var q=this.getMasterForState(this,{isHovered:m,isClicked:a});this.light&&"light"==
f&&(q=this.getMasterForState(this.light,{isHovered:m,isClicked:a})||q);this.dark&&"dark"==f&&(q=this.getMasterForState(this.light,{isHovered:m,isClicked:a})||q);return q}},{key:"getMasterForState",value:function(a,f){var m=a.hover,q=a.click,r=f.isClicked;a=a.auto;if(f.isHovered)if(m)a=m;else for(f=a&&a.master;f;){if(f.hover){a=f.hover;break}f=f.auto}if(r)if(q)a=q;else for(q=a&&a.master;q;){if(q.click){a=q.click;break}q=q.auto}return a}},{key:"onMorphChange",value:function(a,f){if(!this._applying&&
!Ed.Path("meta.metaInteraction").get(f)&&!["_rev","name","master"].includes(f.prop)&&("opacity"==f.prop&&delete this._originalOpacity,a.styleProperties.includes(f.prop)))if(this.managesMorph(a)){if(!a.master||a.master==this||["extent","position"].includes(f.prop))this._overriddenProps.get(a)[f.prop]=!0}else if(a._parametrizedProps)a._parametrizedProps[f.prop]=f.value;else{var m={};a._parametrizedProps=(m[f.prop]=f.value,m)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentPolicy"}},
{key:"for",value:function(a,f){f=f.constructor===Ed.ComponentPolicy?f:new this(a,f);a.master&&(f._overriddenProps=a.master._overriddenProps);return f}}],c,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2027,end:22236})}(void 0);Ed.ComponentPolicy=nK;Ed.ComponentPolicy=nK;Ed.ComponentPolicy=
nK;Ed.styleGuideURLRe=/^styleguide:\/\/([^\/]+)\/(.*)$/;Ed.fetchedSnapshots=Ed.fetchedSnapshots||{};Ed.objectPools=Ed.objectPools||{};Ed.resolvedMasters=Ed.resolvedMasters||{};Ed.modulesToLoad=Ed.modulesToLoad||{};Ed.li=Ed.li||void 0;Ed.localNamePromise=Ed.localNamePromise||void 0;Ed.masterComponentFetches=Ed.masterComponentFetches||{};Ed.worldToUrl=Ed.worldToUrl||{};var y4=ya("bT",Ed.resolvedMasters);Ed.resolvedMasters=y4;Ed.resolvedMasters=y4;Ed.clearSnapshot=hO;Ed.clearSnapshot=hO;(function(b){var c=
lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),l=c.hasOwnProperty("StyleGuideResource")&&"function"===typeof c.StyleGuideResource?c.StyleGuideResource:c.StyleGuideResource=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"canDealWithJSON",get:function(){return!1}},{key:"componentName",get:function(){var a=this.url.match(Ed.styleGuideURLRe);a=$jscomp.makeIterator(a);a.next();a.next();
return a.next().value}},{key:"worldName",get:function(){var a=this.url.match(Ed.styleGuideURLRe);a=$jscomp.makeIterator(a);a.next();var f=a.next().value;a.next();lively.FreezerRuntime||"$world"!=f||(f=this.localWorldName());return f}},{key:"dirList",value:function(a,f){var m=this,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return m.worldName==Ed.getProjectName($world)?r.return($world.withAllSubmorphsSelect(function(u){return u.isComponent})):(q=Ed.resolvedMasters[m.worldName])?
r.return(Object.values(q)):r.return([])})}},{key:"localWorldName",value:function(){var a;if(a=Ed.getProjectName($world))return a;if(Ed.localNamePromise)return Ed.localNamePromise;a=Ed.promise.deferred();var f=a.resolve;Ed.localNamePromise=a.promise;if("__newWorld__"==Ed.resource(document.location.href).query().name)return f("__newWorld__"),Ed.localNamePromise;Ed.subscribeOnce("world/loaded",function(){f(Ed.getProjectName($world))},System);return Ed.localNamePromise}},{key:"fetchFromMasterDir",value:function(a,
f){var m=a.join(this.worldName).join(f+".json");if(Ed.masterComponentFetches[m.url])return Ed.masterComponentFetches[m.url];Ed.masterComponentFetches[m.url]=function(){var q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==u.nextAddress?(q=Ed,r=q.deserializeMorph,u.yield(m.readJson(),2)):u.return(r.call(q,u.yieldResult))})}();return Ed.masterComponentFetches[m.url]}},{key:"read",value:function(){var a=this,f,m,q,r,u,v,y,z,A,C,G,F,N,L,W,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wa){switch(wa.nextAddress){case 1:f=
a.componentName;if(m=Ed.Path([a.worldName,a.componentName]).get(Ed.resolvedMasters))return wa.return(m);if(!lively.FreezerRuntime){wa.jumpTo(2);break}q=Ed.resource(window.location);q.isFile()&&(q=q.parent());r=q.join("masters/");return wa.yield(a.fetchFromMasterDir(r,f),3);case 3:m=wa.yieldResult;case 2:if(lively.FreezerRuntime){wa.jumpTo(4);break}Ed.fetchedSnapshots[a.worldName]||(console.log("scheduling fetch of",a.worldName),v=Ed.promise.deferred(),u=v.resolve,Ed.fetchedSnapshots[a.worldName]=
v.promise);return wa.yield(a.localWorldName(),5);case 5:if(wa.yieldResult==a.worldName){m="undefined"!==typeof $world&&($world.getSubmorphNamed(f)||$world.localComponents.find(function(D){return D.name==f}));if(!m)throw Error('Master component "'+f+'" can not be found in "'+a.worldName+'"');return wa.return(m)}return u?(z=Ed.MorphicDB.default,wa.yield(z.fetchCommit("world",a.worldName),9)):wa.yield(Ed.fetchedSnapshots[a.worldName],8);case 8:y=wa.yieldResult;wa.jumpTo(7);break;case 9:if(wa.yieldResult)return wa.yield(z.fetchSnapshot("world",
a.worldName),15);A=Ed.resource(System.baseURL).join("lively.morphic/styleguides").join(a.worldName+".json");return wa.yield(A.exists(),12);case 12:if(!wa.yieldResult){u(null);wa.jumpTo(11);break}return wa.yield(A.readJson(),14);case 14:y=wa.yieldResult;Ed.worldToUrl[a.worldName]=Ed.resource(System.baseURL).join("worlds/load").withQuery({file:"lively.morphic/styleguides/"+a.worldName+".json"}).url;wa.jumpTo(11);break;case 15:y=wa.yieldResult,Ed.worldToUrl[a.worldName]=Ed.resource(System.baseURL).join("worlds/load").withQuery({name:a.worldName}).url;
case 11:return wa.yield(Ed.loadPackagesAndModulesOfSnapshot(y),16);case 16:u(y);case 7:C=new Ed.ObjectPool(Ed.normalizeOptions({}));G=$jscomp.makeIterator(Object.entries(y.snapshot).find(function(D){D=$jscomp.makeIterator(D);D.next();D=D.next().value;return Ed.Path("props.isComponent.value").get(D)&&Ed.Path("props.name.value").get(D)==f})||[]);F=G.next().value;if(!F)throw Error('Master component "'+f+'" can not be found in "'+a.worldName+'"');m=C.resolveFromSnapshotAndId(Object.assign({},y,{id:F}));
case 4:Ed.resolvedMasters[a.worldName]?Ed.resolvedMasters[a.worldName][f]=m:(N={},Ed.resolvedMasters[a.worldName]=(N[f]=m,N));m._resourceHandle=a;if(!m._pool.mastersInSubHierarchy){wa.jumpTo(17);break}L=$jscomp.makeIterator(m._pool.mastersInSubHierarchy);W=L.next();case 18:if(W.done){wa.jumpTo(20);break}la=W.value;return wa.yield(la.applyIfNeeded(!0),21);case 21:la.derivedMorph.ownerChain().includes(m)||la.derivedMorph.requestMasterStyling();W=L.next();wa.jumpTo(18);break;case 20:delete m._pool;case 17:return wa.return(Promise.resolve(m))}})}},
{key:"write",value:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){throw Error("Master Components can not be written to!");})}},{key:"exists",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){f="undefined"!==typeof $world&&$world.getSubmorphNamed(a.morphName);return m.return(f&&f.isComponent)})}},{key:"remove",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(f="undefined"!==typeof $world&&
$world.getSubmorphNamed(a.morphName))f.isComponent=!1;return m.return(!0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleGuideResource"}}],c,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:25947,end:31519})})(Ed.Resource);var vR={name:"styleguide",matches:function(b){return b.match(Ed.styleGuideURLRe)},
resourceClass:Ed.StyleGuideResource};Ed.resourceExtension=vR;Ed.resourceExtension=vR;Ed.resourceExtension=vR;Ed.registerExtension(Ed.resourceExtension);(function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),l=c.hasOwnProperty("StyleGuide")&&"function"===typeof c.StyleGuide?c.StyleGuide:c.StyleGuide=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,void 0,void 0,c,{pathInPackage:function(){return"style-guide.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:31705,end:32189})})(void 0);var fc=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js");fc.generateUnfolded=function(b,c,l){c=void 0===c?["top","left","right","bottom"]:c;l=void 0===l?"core":l;var a={},f={};c=$jscomp.makeIterator(c);for(var m=c.next();!m.done;f={$jscomp$loop$prop$m$1259$2551:f.$jscomp$loop$prop$m$1259$2551},
m=c.next())f.$jscomp$loop$prop$m$1259$2551=m.value,a[b+fc.string.capitalize(f.$jscomp$loop$prop$m$1259$2551)]={group:l,derived:!0,generated:!0,after:[b],get:function(q){return function(){return this.getProperty(b)[q.$jscomp$loop$prop$m$1259$2551]}}(f),set:function(q){return function(r){var u={};this[b]=Object.assign({},this.getProperty(b),(u[q.$jscomp$loop$prop$m$1259$2551]=r,u))}}(f)};return a};fc.Color=wf;fc.Line=yl;fc.Point=Bf;fc.pt=fh;fc.rect=Gk;fc.Rectangle=Pd;fc.Transform=qj;fc.string=Hg;fc.properties=
mp;fc.obj=lf;fc.arr=Te;fc.num=wk;fc.promise=Kf;fc.tree=av;fc.PropertyPath=Xg;fc.signal=hk;fc.copy=Nx;fc.deserializeSpec=hf;fc.ExpressionSerializer=am;fc.serializeSpec=om;fc.getClassName=Li;fc.renderRootMorph=Rd;fc.ShadowObject=wq;fc.AnimationQueue=UI;fc.easings=yq;fc.addOrChangeCSSDeclaration=nc;fc.Icon=En;fc.morph=Gc;fc.newMorphId=Vc;fc.MorphicEnv=nq;fc.config=nk;fc.CommandHandler=Ifa;fc.KeyHandler=aQ;fc.findKeysForPlatform=Kc;fc.TargetScript=bQ;fc.copyMorph=hG;fc.ComponentPolicy=nK;fc.defaultCommandHandler=
new fc.CommandHandler;var Hj=ya("an",function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=c.hasOwnProperty("Morph")&&"function"===typeof c.Morph?c.Morph:c.Morph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a||(a={});var f=a.env||fc.MorphicEnv.default();this._env=f;this._rev=f.changeManager.revision;this._owner=
null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=fc.newMorphId(fc.getClassName(this));this._animationQueue=new fc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=fc.obj.select(a,fc.arr.intersect(Object.keys(a),this.styleProperties));this.initializeProperties(a);a.bounds&&(this.setBounds(a.bounds),this._parametrizedProps.extent=this.extent,this._parametrizedProps.position=this.position);if(void 0!=a.height||
void 0!=a.width)this._parametrizedProps.extent=this.extent;a.layout&&(this.layout=a.layout);if("function"===typeof this.onLoad&&!this.isComponent)this.onLoad()}},{key:"__serialization_id_property__",get:function(){return"_id"}},{key:"__deserialize__",value:function(a,f,m,q){this._env=fc.MorphicEnv.default();this._rev=a.rev;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=f.id;this._animationQueue=new fc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=
[];this._tickingScripts=[];this._parametrizedProps=fc.obj.select(a.props,fc.arr.intersect(Object.keys(a.props),this.styleProperties));this._parametrizedProps.__takenFromSnapshot__=!0;a=q.expressionSerializer;for(var r in this._parametrizedProps)(f=this._parametrizedProps[r].value)&&fc.obj.isString(f)&&a.isSerializedExpression(f)&&(this._parametrizedProps[r]=a.deserializeExpr(f));this.initializeProperties();this._pool=q}},{key:"__after_deserialize__",value:function(a,f,m){this.resumeStepping();if("function"===
typeof this.onLoad)try{this.onLoad()}catch(q){console.error("[lively.morphic] "+this+".onLoad() error: "+q.stack)}this.isComponent&&!this.owner||delete this._pool;this.master&&(m.mastersInSubHierarchy?m.mastersInSubHierarchy.push(this.master):m.mastersInSubHierarchy=[this.master])}},{key:"__only_serialize__",get:function(){var a=this.defaultProperties,f=this.propertiesAndPropertySettings().properties,m=[];0<this._tickingScripts.length&&m.push("_tickingScripts");this.attributeConnections&&m.push("attributeConnections");
var q=[this].concat($jscomp.arrayFromIterable(this.ownerChain())).map(function(v){return v.__isBeingSerialized__&&v.master}).find(Boolean),r;for(r in f){var u=f[r];q&&q.managesMorph(this)&&void 0!=q._overriddenProps.get(this)[r]?m.push(r):u.readOnly||u.derived||fc.obj.equals(this[r],a[r])||u.hasOwnProperty("serialize")&&!u.serialize||m.push(r)}return q&&!this.isComponent?q.propsToSerializeForMorph(this,m):m}},{key:"__additionally_serialize__",value:function(a,f,m,q){if((f=a.props.submorphs)&&!this.isEpiMorph)for(f=
f.value,q=f.length;q--;)m.refForId(f[q].id).realObj.isEpiMorph&&fc.arr.removeAt(f,q);m=$jscomp.makeIterator(fc.arr.intersect(this.__only_serialize__,["borderColor","borderWidth","borderStyle","borderRadius"]));for(f=m.next();!f.done;f=m.next())f=f.value,a.props[f]={key:f,verbatim:!0,value:fc.obj.extract(this[f],["top","right","bottom","left"],function(r,u){return u&&u.isColor?u.toTuple():u})}}},{key:"isMorph",get:function(){return!0}},{key:"id",get:function(){return this._id}},{key:"env",get:function(){return this._env}},
{key:"spec",value:function(a,f){a=void 0===a?!0:a;f=void 0===f?new WeakMap:f;var m=this.defaultProperties,q=this.propertiesAndPropertySettings().properties,r={submorphs:!0},u={};if(f.has(this))return f.get(this);f.set(this,u);for(var v in q){var y=q[v];y&&(y.readOnly||y.derived||y.hasOwnProperty("serialize")&&!y.serialize||v in r||a&&(fc.obj.equals(this[v],m[v])||this[v]&&m[v]&&this[v].valueOf&&m[v].valueOf&&fc.obj.equals(this[v].valueOf(),m[v].valueOf()))||(u[v]=this[v]&&this[v].isMorph?this[v].spec(a,
f):this[v]&&"layout"===v?this[v].copy():this[v]))}u.submorphs=this.submorphs.map(function(z){return z.spec(a,f)});u.type=this.constructor;return u}},{key:"printSpec",value:function(a,f){f=void 0===f?0:f;a=(void 0===a?null:a)||this.spec();var m={name:!0,type:!0,submorphs:!0},q="  ".repeat(f+1),r="  ".repeat(f)+"{\n"+(q+'name: "'+a.name+'",\n')+(q+'type: "'+a.type+'",\n'),u;for(u in a)m[u]||(r+=""+q+u+": "+fc.string.print(a[u])+",\n");if(a.submorphs){r+=q+"submorphs: [\n";a=$jscomp.makeIterator(a.submorphs);
for(m=a.next();!m.done;m=a.next())r+=this.printSpec(m.value,f+1);r+="]\n"}return r+="  ".repeat(f)+"}\n"}},{key:"defaultProperties",get:function(){var a=this.constructor,f=a[Symbol.for("lively-instance-superclass")];if(!a._morphicDefaultPropertyValues||a._morphicDefaultPropertyValues==(f&&f._morphicDefaultPropertyValues)){a=this.constructor._morphicDefaultPropertyValues={};f=this.propertiesAndPropertySettings().properties;for(var m in f){var q=f[m];q.hasOwnProperty("defaultValue")&&(q=q.defaultValue,
Array.isArray(q)&&(q=q.slice()),a[m]=q)}}return this.constructor._morphicDefaultPropertyValues}},{key:"defaultProperty",value:function(a){return this.defaultProperties[a]}},{key:"getProperty",value:function(a){return this._morphicState[a]}},{key:"setProperty",value:function(a,f,m){return this.addValueChange(a,f,m)}},{key:"changeMetaData",value:function(a,f,m,q){m=void 0===m?!0:m;q=void 0===q?!0:q;var r=this.metadata;r||(r={});(new fc.PropertyPath(a)).withParentAndKeyDo(r,!0,function(u,v){u[v]=q?Object.assign({},
u[v],{},f):f;var y=u.__dont_serialize__;m?y&&y.includes(v)&&(fc.arr.remove(y,v),0===y.length&&delete u.__dont_serialize__):(y||(y=u.__dont_serialize__=[]),fc.arr.pushIfNotIncluded(y,v))});this.metadata=r}},{key:"installFont",value:function(a,f){var m={};this.installedFonts=Object.assign({},this.installedFonts,(m[a]=f,m));this.insertFontCSS(a,f)}},{key:"uninstallFont",value:function(a){delete this.installedFonts[a];(a=document.getElementById(this.id+"-"+a))&&a.remove()}},{key:"ensureInstalledFonts",
value:function(a,f){a=$jscomp.makeIterator(a);for(var m=a.next();!m.done;m=a.next())(m=document.getElementById(this.id+"-"+m.value))&&m.remove();f=$jscomp.makeIterator(f);for(m=f.next();!m.done;m=f.next())a=m.value,this.insertFontCSS(a,this.installedFonts[a])}},{key:"insertFontCSS",value:function(a,f){var m=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(m.whenRendered(),2);f.endsWith(".otf")?fc.addOrChangeCSSDeclaration(m.id+"-"+a,"@font-face {\n             font-family: "+
a+';\n             src: url("'+m.installedFonts[a]+'") format("opentype");\n         }'):fc.addOrChangeCSSDeclaration(m.id+"-"+a,'@import url("'+m.installedFonts[a]+'");');q.jumpToEnd()})}},{key:"toString",value:function(){return"<"+fc.getClassName(this)+" - "+(this.name?this.name:this.id)+">"}},{key:"edit",value:function(a){return this.env.world.execCommand("open object editor",Object.assign({className:fc.getClassName(this)},a,{target:this}))}},{key:"inspect",value:function(a){return this.env.world.execCommand("open object inspector",
Object.assign({},a,{target:this}))}},{key:"livelyCustomInspect",value:function(){var a={_id:!0,_owner:!0},f={},m=this.propertiesAndPropertySettings().properties,q=[],r;for(r in m)a[r]||m[r].derived&&!m[r].showInInspector||(f[r]=!0,q.push({key:r,value:this[r]}));q.push({key:"id",value:this.id});q.push({key:"owner",value:this.owner});q=q.sort(function(v,y){v=v.key.toLowerCase();y=y.key.toLowerCase();return v<y?-1:v===y?0:1});if(this.attributeConnections)for(m=$jscomp.makeIterator(this.attributeConnections),
r=m.next();!r.done;r=m.next())r=r.value,a["$$"+r.sourceAttrName,""+r.sourceAttrName]=!0;Object.assign(f,a);a=$jscomp.makeIterator("attributeConnections _animationQueue _morphicState _dirty doNotCopyProperties doNotSerialize _env _cachedPaths _pathDependants _rendering _rev _submorphOrderChanged _tickingScripts _transform _invTransform _styleSheetProps _renderer _tooltipViewer layout".split(" "));for(m=a.next();!m.done;m=a.next())m=m.value,m in this&&(f[m]=!0,q.push({key:m,value:this[m],keyString:"[internal] "+
m}));for(var u in this)!f[u]&&this.hasOwnProperty(u)&&q.unshift({key:u,value:this[u],keyString:"[UNKNOWN PROPERTY] "+u});return{sort:!1,includeDefault:!1,properties:q}}},{key:"show",value:function(a){return $world.execCommand("show morph",{morph:this,loop:a})}},{key:"setStatusMessage",value:function(a,f,m,q){var r=this.world();q=Object.assign({maxLines:7},q);return r?r.setStatusMessageFor(this,a,f,m,q):console.log(a)}},{key:"showError",value:function(a){var f=this.world();return f?f.showErrorFor(this,
a):console.error(a)}},{key:"onChange",value:function(a){var f=this,m=a.meta&&a.meta.animation,q=a.prop,r=a.value;if("position"===q||"rotation"===q||"scale"===q||"origin"===q||"reactsToPointer"===q)this.onBoundsChanged(this.bounds()),m={},this.updateTransform((m[q]=r,m));else if("extent"==q)this.onBoundsChanged(this.bounds());else"layout"==q&&(m?r&&r.attachAnimated(m.duration,this,m.easing):r&&r.attach());this.layout&&this.layout.onChange(a);this.isComponent&&!fc.PropertyPath("meta.metaInteraction").get(a)&&
(q=this.world(),delete this._preview,(q?q.withAllSubmorphsSelect(function(u){return u.master&&u.master.uses(f)}):[]).forEach(function(u){u.requestMasterStyling()}));if(this.master)this.master.onMorphChange(this,a)}},{key:"onBoundsChanged",value:function(a){var f=this;fc.signal(this,"bounds",a);[].concat($jscomp.arrayFromIterable(a.corners),$jscomp.arrayFromIterable(a.sides)).forEach(function(m){fc.signal(f,m,a.partNamed(m))})}},{key:"onSubmorphChange",value:function(a,f){var m=this;if(this.isComponent&&
!fc.PropertyPath("meta.metaInteraction").get(a)&&!fc.PropertyPath("meta.layoutAction").get(a)){var q=this.world();q&&q.withAllSubmorphsDo(function(r){r.master&&r.master.uses(m)&&r.requestMasterStyling()})}if(this.master)this.master.onMorphChange(f,a);this.layout&&this.layout.onSubmorphChange(f,a)}},{key:"changes",get:function(){return this.env.changeManager.changesFor(this)}},{key:"applyChange",value:function(a){this.env.changeManager.apply(this,a)}},{key:"addValueChange",value:function(a,f,m){return this.env.changeManager.addValueChange(this,
a,f,m)}},{key:"addMethodCallChangeDoing",value:function(a,f){return this.env.changeManager.addMethodCallChangeDoing(a,this,f)}},{key:"groupChangesWhile",value:function(a,f){return this.env.changeManager.groupChangesWhile(this,a,f)}},{key:"dontRecordChangesWhile",value:function(a){return this.env.changeManager.dontRecordChangesWhile(this,a)}},{key:"recordChangesWhile",value:function(a,f){return this.env.changeManager.recordChangesWhile(a,f)}},{key:"recordChangesStart",value:function(a){return this.env.changeManager.recordChangesStartForMorph(this,
a)}},{key:"recordChangesStop",value:function(a){return this.env.changeManager.recordChangesStopForMorph(this,a)}},{key:"withMetaDo",value:function(a,f){return this.env.changeManager.doWithValueChangeMeta(a,this,f)}},{key:"undoStart",value:function(a){return this.env.undoManager.undoStart(this,a)}},{key:"undoStop",value:function(a){return this.env.undoManager.undoStop(this,a)}},{key:"undoInProgress",get:function(){return this.env.undoManager.undoInProgress}},{key:"animate",value:function(a){var f=
this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(m=f._animationQueue.registerAnimation(a),f._animationQueue.animationsActive?m?q.yield(m.asPromise(),3):q.jumpTo(2):(m&&m.finish(),q.return(Promise.resolve(f)))):2!=q.nextAddress?q.return(q.yieldResult):q.return(Promise.resolve(f))})}},{key:"withAnimationDo",value:function(a,f){var m=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){q=m.groupChangesWhile(!1,a);r=q.changes;return u.yield(Promise.all(Object.values(fc.arr.groupBy(r,
function(v){return v.target.id})).map(function(v){var y=Object.assign({},f),z;v.forEach(function(A){z=A.target;A.reverseApply();y[A.prop]=A.value});return z&&z.animate(y)})),0)})}},{key:"isClip",value:function(){return"visible"!==this.clipMode}},{key:"scrollExtent",get:function(){return(this.submorphs.length?this.innerBounds().union(this.submorphBounds()):this.innerBounds()).extent().addPt(this.scrollbarOffset)}},{key:"scrollBounds",value:function(){var a=this.scroll,f=this.scrollExtent;return new fc.Rectangle(a.x,
a.y,f.x,f.y)}},{key:"scrollDown",value:function(a){this.scroll=this.scroll.addXY(0,a)}},{key:"scrollUp",value:function(a){this.scrollDown(50*-a)}},{key:"scrollLeft",value:function(a){this.scroll=this.scroll.addXY(a,0)}},{key:"scrollRight",value:function(a){this.scrollLeft(-a)}},{key:"scrollPageDown",value:function(){this.scrollDown(this.height)}},{key:"scrollPageUp",value:function(){this.scrollUp(this.height)}},{key:"addStyleClass",value:function(a){this.styleClasses=fc.arr.uniq(this.styleClasses.concat(a))}},
{key:"removeStyleClass",value:function(a){this.styleClasses=this.styleClasses.filter(function(f){return f!=a})}},{key:"adjustOrigin",value:function(a){var f=this.origin,m=this.globalBounds().topLeft();this.origin=a;this.submorphs.forEach(function(r){return r.position=r.position.subPt(a.subPt(f))});var q=this.globalBounds().topLeft();m=m.subPt(q);this.globalPosition=this.globalPosition.addPt(m)}},{key:"setBounds",value:function(a){this.extent=a.extent();this.position=a.topLeft().addPt(this.origin)}},
{key:"innerBounds",value:function(){var a=this.extent;return fc.rect(0,0,a.x,a.y)}},{key:"relativeBounds",value:function(a){a=a||this.world();var f=this.origin.negated().extent(this.extent);f=a?this.transformRectToMorph(a,f):this.getGlobalTransform().transformRectToRect(f);this.isClip()||this.submorphs.forEach(function(m){f=f.union(m.relativeBounds(a))});return f}},{key:"bounds",value:function(){return this.relativeBounds(this.owner)}},{key:"relativeSubmorphBounds",value:function(){var a=this.innerBounds();
return this.submorphs.map(function(f){f=f.bounds();return fc.rect(f.x/a.width,f.y/a.height,f.width/a.width,f.height/a.height)})}},{key:"globalBounds",value:function(){return this.relativeBounds(this.world())}},{key:"submorphBounds",value:function(a){a=fc.arr.filter(this.submorphs,void 0===a?function(){return!0}:a);return 1>a.length?this.innerBounds():a.map(function(f){return f.bounds()}).reduce(function(f,m){return f.union(m)})}},{key:"fitToSubmorphs",value:function(a){a=void 0===a?fc.Rectangle.inset(0):
a;var f=this.submorphs;if(f.length){f=f.reduce(function(r,u){return r.union(u.bounds())},f[0].bounds());var m=f.top()-a.top(),q=f.left()-a.left();this.moveBy(fc.pt(q,m));fc.arr.invoke(this.submorphs,"moveBy",fc.pt(-q,-m));this.extent=fc.pt(f.width+a.left()+a.right(),f.height+a.top()+a.bottom())}}},{key:"align",value:function(a,f){return this.moveBy(f.subPt(a))}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);return this}},{key:"rotateBy",value:function(a){this.rotation+=a}},
{key:"resizeBy",value:function(a){this.extent=this.extent.addPt(a)}},{key:"snap",value:function(a){this.position=this.position.roundTo(a||1)}},{key:"isEpiMorph",get:function(){return this.getProperty("epiMorph")&&!this.isComponent}},{key:"isUsedAsEpiMorph",value:function(){for(var a=this;a;){if(a.isEpiMorph)return!0;a=a.owner}return!1}},{key:"replaceWith",value:function(a,f,m){m=void 0===m?!0:m;if(this===a||!a)return a;if(this===a.owner)return a.replaceWith(this),a;var q=this.owner,r=this.submorphs,
u=this.getTransform().copy();f="number"===typeof f?f:q?q.submorphs.indexOf(this):-1;var v=a.owner,y=fc.arr.without(a.submorphs,this),z=a.getTransform().copy(),A=v?v.submorphs.indexOf(a):-1;q&&this.remove();v&&a.remove();m&&(this.submorphs=[],a.submorphs=[]);q===a?(v&&v.addMorphAt(this,A),m&&(this.submorphs=y.slice(0,f).concat(a).concat(y.slice(f)),a.submorphs=r)):(q&&q.addMorphAt(a,f),v&&v.addMorphAt(this,A),m&&(a.submorphs=r,this.submorphs=y));a.setTransform(u);this.setTransform(z);return a}},{key:"addMorphAt",
value:function(a,f){var m=this;if(!a||"object"!==typeof a)throw Error(a+" cannot be added as a submorph to "+this);if(a.isMorph){if(a.isAncestorOf(this))return this.env.world.logError(Error("addMorph: Circular relationships between morphs not allowed\ntried to add "+a+" to "+this)),null;if(a===this)return this.env.world.logError(Error("addMorph: Trying to add itself as a submorph: "+this)),null}a.isMorph||(a=fc.morph(a));var q=this.submorphs.indexOf(a);if(!(-1<q&&q===f))return this.addMethodCallChangeDoing({target:this,
selector:"addMorphAt",args:[a,f],undo:{target:this,selector:"removeMorph",args:[a]}},function(){var r=a.owner,u=m.submorphs;if(r&&r!==m){var v=a.transformForNewOwner(m);a.remove()}a._env!==m._env&&(a._env=m._env);f=Math.min(u.length,Math.max(0,f));-1<q&&(u.splice(q,1),q<f&&f--);u.splice(f,0,a);a._owner=m;a._cachedPaths={};v&&a.setTransform(v);a.requestStyling();m._morphicState.submorphs=u;m._submorphOrderChanged=!0;m.makeDirty();a.resumeSteppingAll();a.withAllSubmorphsDo(function(y){return y.onOwnerChanged(m)});
m.world()&&a._requestMasterStyling&&(a.master&&a.master.applyIfNeeded(!0),a._requestMasterStyling=!1)}),a}},{key:"addMorph",value:function(a,f){var m=this.submorphs;f=f?m.indexOf(f):-1;return this.addMorphAt(a,-1===f?m.length:f)}},{key:"addMorphBack",value:function(a){return this.addMorph(a,a===this.submorphs[0]?this.submorphs[1]:this.submorphs[0])}},{key:"removeMorph",value:function(a){var f=this.submorphs.indexOf(a);-1!==f&&((this.getProperty("submorphs")||[]).splice(f,1),this.addMethodCallChangeDoing({target:this,
selector:"removeMorph",args:[a],undo:{target:this,selector:"addMorphAt",args:[a,f]}},function(){a.suspendSteppingAll();a._owner=null}),this._pathDependants=fc.arr.withoutAll(this._pathDependants,a._pathDependants))}},{key:"remove",value:function(){var a=this;this.ownerChain().forEach(function(f){f._stylingVisitor&&f._stylingVisitor.deleteFromCache(a)});this.owner&&this.owner.removeMorph(this);this._cachedPaths={};this._pathDependants.forEach(function(f){return f._cachedPaths={}});this._pathDependants=
[];this.withAllSubmorphsDo(function(f){return f.onOwnerChanged(null)});return this}},{key:"onOwnerChanged",value:function(a){a&&this.master&&this.requestMasterStyling()}},{key:"fadeOut",value:function(a){a=void 0===a?1E3:a;var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(f.animate({opacity:0,duration:a,easing:fc.easings.outQuad}),2);f.remove();f.opacity=1;m.jumpToEnd()})}},{key:"fadeIn",value:function(a){a=void 0===a?1E3:a;var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){f.opacity=
0;f.animate({opacity:1,duration:a});return m.return(f)})}},{key:"fadeIntoWorld",value:function(a,f){a=void 0===a?$world.visibleBounds().center():a;f=void 0===f?200:f;var m=this,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return q=new fc.Morph({opacity:0,scale:0,epiMorph:!0,hasFixedPosition:!0,fill:fc.Color.transparent}),r=m.env.world,q.openInWorld(),q.addMorph(m),m.position=q.extent.scaleBy(.5),q.center=a,q.scale=.8,v.yield(q.animate({opacity:1,scale:1,
duration:f}),2);u=m.globalBounds();r.addMorph(m);m.top=u.top();m.left=u.left();q.remove();return v.return(m)})}},{key:"removeAllMorphs",value:function(){this.submorphs=[]}},{key:"bringToFront",value:function(){this.owner&&fc.arr.last(this.owner.submorphs)!==this&&this.owner.addMorph(this);return this}},{key:"owner",get:function(){return this._owner}},{key:"withAllSubmorphsDetect",value:function(a){if(a(this))return this;for(var f=$jscomp.makeIterator(this.submorphs),m=f.next();!m.done;m=f.next())if(m=
m.value.withAllSubmorphsDetect(a))return m}},{key:"withAllSubmorphsDoExcluding",value:function(a,f){var m=[a(this)];if(f(this))return m;for(var q=$jscomp.makeIterator(this.submorphs),r=q.next();!r.done;r=q.next())fc.arr.pushAll(m,r.value.withAllSubmorphsDoExcluding(a,f));return m}},{key:"withAllSubmorphsDo",value:function(a){for(var f=[a(this)],m=$jscomp.makeIterator(this.submorphs),q=m.next();!q.done;q=m.next())fc.arr.pushAll(f,q.value.withAllSubmorphsDo(a));return f}},{key:"withAllSubmorphsSelect",
value:function(a){var f=[];this.withAllSubmorphsDo(function(m){return a(m)&&f.push(m)});return f}},{key:"ownerChain",value:function(){return this.owner?[this.owner].concat(this.owner.ownerChain()):[]}},{key:"world",value:function(){return this.owner?this.owner.world():null}},{key:"getWindow",value:function(){return this.isWindow?this:this.ownerChain().find(function(a){return a.isWindow})}},{key:"openInWorldNear",value:function(a,f){var m=this;f=f||this.world()||this.env.world;if(!f)return this;this.master&&
(this.opacity=0,this.master.whenApplied().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(m.whenRendered(),2);m.opacity=1;q.jumpToEnd()})}));this.center=a;this.setBounds(f.visibleBoundsExcludingTopBar().translateForInclusion(this.bounds()));return this.openInWorld(this.position)}},{key:"openInWorldNearHand",value:function(a){a=a||this.world()||this.env.world;var f=a.firstHand?a.firstHand.position.addPt(this.hasFixedPosition?fc.pt(0,
0):a.scroll):fc.pt(0,0);return a?this.openInWorldNear(f):void 0}},{key:"openInWorld",value:function(a,f){f=f||this.world()||this.env.world;if(!f)return console.warn("Cannot open morph "+this+", world morph not found;"),this;a?this.position=a:(this.center=this.hasFixedPosition?f.visibleBounds().extent().scaleBy(.5,.5):f.visibleBounds().center(),this.snap());f.addMorph(this);return this}},{key:"openInHand",value:function(a){a||(a=(this.world()||this.env.world).firstHand);a.grab(this);this.center=fc.pt(0,
0)}},{key:"openInWindow",value:function(a){a=void 0===a?{title:this.name,name:"window for "+this.name,world:null}:a;return(a.world||this.world()||this.env.world).openInWindow(this,fc.obj.dissoc(a,["world"]))}},{key:"isAncestorOf",value:function(a){for(a=a.owner;a;){if(a===this)return!0;a=a.owner}return!1}},{key:"morphsContainingPoint",value:function(a,f){f||(f=[]);if(!this.fullContainsWorldPoint(a))return f;for(var m=this.submorphs.length-1;0<=m;m--)this.submorphs[m].morphsContainingPoint(a,f);this.innerBoundsContainsWorldPoint(a)&&
f.push(this);return f}},{key:"morphBeneath",value:function(a){var f=this.world()||this.owner;if(!f)return null;a=f.morphsContainingPoint(a);f=a.indexOf(this);return a[f+1]}},{key:"transformTillMorph",value:function(a,f){if("down"==(void 0===f?"up":f))return a.transformTillMorph(this,"up").inverse();f=new fc.Transform;for(var m=this;m&&m!=a;m=m.owner){var q=m,r=q.origin;q=q.scroll;0===r.x&&0===r.y||f.preConcatenate(new fc.Transform(m.origin));f.preConcatenate(m.getTransform());m!=this&&(0===q.x&&0===
q.y||!m.owner||f.preConcatenate(new fc.Transform(q.negated())));m.hasFixedPosition&&m.owner&&f.preConcatenate(new fc.Transform(m.owner.scroll))}return f}},{key:"localize",value:function(a){var f=this.world(),m=a.x,q=a.y;return f?f.transformPointToMorph(this,fc.pt(m,q)):a}},{key:"worldPoint",value:function(a){var f=this.world(),m=a.x,q=a.y;return f?this.transformPointToMorph(f,fc.pt(m,q)):a.addPt(this.position)}},{key:"transformToMorph",value:function(a){var f=this.getGlobalTransform(),m=a.getGlobalTransform().inverse();
f.preConcatenate(m);m=a.scroll;0===m.x&&0===m.y||!a.owner||f.preConcatenate(new fc.Transform(m));return f}},{key:"transformPointToMorph",value:function(a,f){for(var m=this.hasFixedPosition,q=$jscomp.makeIterator(this.pathToMorph(a)),r=q.next();!r.done;r=q.next()){var u=$jscomp.makeIterator(r.value);r=u.next().value;u=u.next().value;this!=u&&"up"==r&&(f.x-=u.scroll.x,f.y-=u.scroll.y,u.hasFixedPosition&&(m=u.owner&&u.owner.isWorld),u.hasFixedPosition&&u.owner&&u.owner.owner&&(f.x+=u.owner.scroll.x,
f.y+=u.owner.scroll.y));this.applyTransform(r,u,f);this!=u&&"down"==r&&(f.x+=u.scroll.x,f.y+=u.scroll.y,u.hasFixedPosition&&(m=u.owner&&u.owner.isWorld),u.hasFixedPosition&&u.owner&&u.owner.owner&&(f.x-=u.owner.scroll.x,f.y-=u.owner.scroll.y))}m&&a.isWorld&&(f.x=f.x-a.position.x+a.scroll.x,f.y=f.y-a.position.y+a.scroll.y);m&&this.isWorld&&(f.x=f.x+this.position.x-this.scroll.x,f.y=f.y+this.position.y-this.scroll.y);return f}},{key:"transformRectToMorph",value:function(a,f){var m=this,q,r,u;[q=f.topLeft(),
r=f.topRight(),u=f.bottomRight(),f=f.bottomLeft()].forEach(function(v){return m.transformPointToMorph(a,v)});return fc.Rectangle.unionPts([q,r,u,f])}},{key:"applyTransform",value:function(a,f,m){"up"==a?(m.x+=f.origin.x,m.y+=f.origin.y,m.matrixTransform(f.getTransform(),m)):(m.matrixTransform(f.getInverseTransform(),m),m.x-=f.origin.x,m.y-=f.origin.y)}},{key:"_addPathDependant",value:function(a){this._pathDependants.includes(a)||this._pathDependants.push(a)}},{key:"pathToMorph",value:function(a){var f;
if(f=this._cachedPaths[a.id])return f;f=this.closestCommonAncestor(a)||this;var m=this,q=[],r=[];for(f._addPathDependant(this);m&&m!=f;)r.push(["up",m]),m._addPathDependant(this),m=m.owner;for(m=a;m&&m!=f;)q.push(["down",m]),m._addPathDependant(this),m=m.owner;return this._cachedPaths[a.id]=f=[].concat($jscomp.arrayFromIterable(r),$jscomp.arrayFromIterable(q.reverse()))}},{key:"closestCommonAncestor",value:function(a){return fc.arr.intersect([this].concat($jscomp.arrayFromIterable(this.ownerChain())),
[a].concat($jscomp.arrayFromIterable(a.ownerChain())))[0]}},{key:"transformForNewOwner",value:function(a){return new fc.Transform(this.transformToMorph(a))}},{key:"localizePointFrom",value:function(a,f){var m=a.x;a=a.y;try{return f.transformPointToMorph(this,fc.pt(m,a))}catch(q){return console.warn("problem "+q+" in localizePointFrom"),fc.pt}}},{key:"getGlobalTransform",value:function(){return this.transformTillMorph(this.world())}},{key:"globalPosition",get:function(){return this.worldPoint(fc.pt(0,
0))}},{key:"globalPosition",set:function(a){return this.position=this.owner?this.owner.localize(a):a}},{key:"ensureToBeInWorldBounds",value:function(){var a=this.world();if(a){var f=this.globalBounds();a=a.innerBounds().translateForInclusion(f).topLeft().subPt(f.topLeft());this.moveBy(a)}}},{key:"getTransform",value:function(){this._transform||this.updateTransform();return this._transform}},{key:"getInverseTransform",value:function(){this._invTransform||this.updateTransform();return this._invTransform}},
{key:"updateTransform",value:function(a){a=void 0===a?{}:a;var f=a.position,m=a.scale,q=a.origin,r=a.rotation;a=this._transform||new fc.Transform;var u=this._invTransform||new fc.Transform;f=f||this.position;q=q||this.origin;m=m||this.scale;r=r||this.rotation;a.a=m*Math.cos(r);a.b=m*Math.sin(r);a.c=m*-Math.sin(r);a.d=m*Math.cos(r);a.e=a.a*-q.x+a.c*-q.y+f.x;a.f=a.b*-q.x+a.d*-q.y+f.y;f=a.a;m=a.b;q=a.c;r=a.d;var v=a.e,y=a.f,z=1/(f*r-q*m);u.a=r*z;u.b=-m*z;u.c=-q*z;u.d=f*z;u.e=(q*y-v*r)*z;u.f=-(f*y-m*
v)*z;this._transform=a;this._invTransform=u}},{key:"setTransform",value:function(a){this.position=a.getTranslation();this.rotation=fc.num.toRadians(a.getRotation());this.scale=a.getScalePoint().x;this.updateTransform(this)}},{key:"fullContainsWorldPoint",value:function(a){return this.fullContainsPoint(null==this.owner?a:this.owner.localize(a))}},{key:"fullContainsPoint",value:function(a){return this.bounds().containsPoint(a)}},{key:"innerBoundsContainsWorldPoint",value:function(a){return this.innerBoundsContainsPoint(this.localize(a))}},
{key:"innerBoundsContainsPoint",value:function(a){return this.innerBounds().containsPoint(a.addPt(this.origin).subPt(this.scroll))}},{key:"get",value:function(a){if(!a)return null;try{return this.getSubmorphNamed(a)||this.getNameTest(this,a)&&this||this.getOwnerOrOwnerSubmorphNamed(a)}catch(f){if(f.constructor==RangeError&&"Maximum call stack size exceeded"==f.message)throw Error("'get' failed due to a stack overflow. The most\nlikely source of the problem is using 'get' as part of\ntoString, because 'get' calls 'getOwnerOrOwnerSubmorphNamed', which\ncalls 'toString' on this. Try using 'getSubmorphNamed' instead,\nwhich only searches in this' children.\nOriginal error:\n"+
f.stack);throw f;}}},{key:"getNameTest",value:function(a,f){if(fc.obj.isRegExp(f)){if(f.test(a.name)||f.test(String(a)))return!0}else if(a.name===f||String(a)===f)return!0;return!1}},{key:"getAllNamed",value:function(a,f){f=void 0===f?[]:f;if(!this._morphicState||!this.submorphs.length)return f;for(var m=0;m<this.submorphs.length;m++){var q=this.submorphs[m];this.getNameTest(q,a)&&f.push(q)}for(m=0;m<this.submorphs.length;m++)this.submorphs[m].getAllNamed(a,f);return f}},{key:"getSubmorphNamed",value:function(a){if(!this._morphicState||
!this.submorphs.length)return null;for(var f=0;f<this.submorphs.length;f++){var m=this.submorphs[f];if(this.getNameTest(m,a))return m}for(f=0;f<this.submorphs.length;f++)if(m=this.submorphs[f].getSubmorphNamed(a))return m;return null}},{key:"getSubmorphsByStyleClassName",value:function(a){return this.withAllSubmorphsSelect(function(f){return f.styleClasses.includes(a)})}},{key:"getOwnerNamed",value:function(a){return this.ownerChain().find(function(f){return f.name===a})}},{key:"getOwnerOrOwnerSubmorphNamed",
value:function(a){var f=this.owner;if(!f)return null;if(f.name===a)return f;for(var m=0;m<f.submorphs.length;m++){var q=f.submorphs[m];if(q!==this&&(this.getNameTest(q,a)||(q=q.getSubmorphNamed(a))))return q}return this.owner.getOwnerOrOwnerSubmorphNamed(a)}},{key:"getMorphWithId",value:function(a){return this.withAllSubmorphsDetect(function(f){return a===f.id})}},{key:"setMirrored",value:function(a){a?this.removeStyleClass("hidden-in-mirror"):this.addStyleClass("hidden-in-mirror")}},{key:"isMirrored",
value:function(){return 0<=this.styleClasses.indexOf("hidden-in-mirror")?!0:!1}},{key:"dragTriggerDistance",get:function(){return 0}},{key:"onMouseDown",value:function(a){if(this===a.targetMorph&&(a.state.clickedMorph=this,1==a.state.prevClick.clickCount&&200>=Date.now()-a.state.prevClick.clickedAtTime)){this.onDoubleMouseDown(a);return}this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onDoubleMouseDown",value:function(a){}},{key:"onMouseUp",value:function(a){a.state.clickedMorph=
null;this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onMouseMove",value:function(a){}},{key:"onLongClick",value:function(a){}},{key:"addKeyBindings",value:function(a){var f=this;this.addMethodCallChangeDoing({target:this,selector:"addKeyBindings",args:[a],undo:null},function(){f._keybindings||(f._keybindings=[]);f._cachedKeyhandlers=null;f._keybindings.unshift.apply(f._keybindings,$jscomp.arrayFromIterable(a))})}},{key:"keybindings",get:function(){return this._keybindings||
[]}},{key:"keybindings",set:function(a){this._cachedKeyhandlers=null;return this._keybindings=a}},{key:"keyhandlers",get:function(){return this._cachedKeyhandlers||(this._cachedKeyhandlers=[fc.KeyHandler.withBindings(this.keybindings)])}},{key:"keyCommandMap",get:function(){var a=this.keyhandlers[0].platform;return this.keybindings.reduce(function(f,m){var q=fc.findKeysForPlatform(m.keys,a),r=m.command,u="string"===typeof r?r:r.command||r.name;return"string"!==typeof q?f:q.split("|").reduce(function(v,
y){var z={};return Object.assign(v,(z[y]={name:u,command:r,prettyKeys:fc.KeyHandler.prettyCombo(y)},z))},f)},{})}},{key:"keysForCommand",value:function(a,f){f=void 0===f?!0:f;var m=this.keyCommandMap,q=Object.keys(m).find(function(r){return m[r].name===a});return q&&f?m[q].prettyKeys:q}},{key:"simulateKeys",value:function(a){return fc.KeyHandler.simulateKeys(this,a)}},{key:"onKeyDown",value:function(a){fc.KeyHandler.invokeKeyHandlers(this,a,!1)&&a.stop()}},{key:"onKeyUp",value:function(a){}},{key:"onContextMenu",
value:function(a){var f=this;a.targetMorph===this&&(lively.FreezerRuntime||a.stop(),Promise.resolve(this.menuItems()).then(function(m){return f.openMenu(m,a)}).catch(function(m){return $world.logError(m)}))}},{key:"openMenu",value:function(a,f){var m=this.world();return a&&a.length&&m?m.openWorldMenu(f,a):null}},{key:"menuItems",value:function(){return $world.defaultMenuItems(this)}},{key:"onCut",value:function(a){}},{key:"onCopy",value:function(a){}},{key:"onPaste",value:function(a){}},{key:"onDragStart",
value:function(a){this.undoStart("drag-move");a=a.state;this.position=a.dragStartMorphPosition.addPt(a.absDragDelta)}},{key:"onDragEnd",value:function(a){this.undoStop("drag-move");$world.execCommand("remove snap to guides",this)}},{key:"onDrag",value:function(a){var f=a.state;this.position=f.dragStartMorphPosition.addPt(f.absDragDelta);$world.execCommand("show and snap to guides",{target:this,showGuides:a.isCtrlDown(),snap:a.isCtrlDown()})}},{key:"onGrab",value:function(a){if(a.isShiftDown()){var f=
this.copy();f.position=this.transformPointToMorph(a.hand,fc.pt(0,0));a.hand.grab(f)}else a.hand.grab(this)}},{key:"onDrop",value:function(a){a.hand.dropMorphsOn(this)}},{key:"doNotAcceptDropsForThisAndSubmorphs",value:function(){this.withAllSubmorphsDo(function(a){return a.acceptsDrops=!1})}},{key:"acceptDropsForThisAndSubmorphs",value:function(){this.withAllSubmorphsDo(function(a){return a.acceptsDrops=!0})}},{key:"wantsToBeDroppedOn",value:function(a){return!0}},{key:"onDropHoverIn",value:function(a){}},
{key:"onDropHoverUpdate",value:function(a){}},{key:"onDropHoverOut",value:function(a){}},{key:"onBeingDroppedOn",value:function(a,f){f.addMorph(this)}},{key:"onHoverIn",value:function(a){this.master&&this.requestMasterStyling()}},{key:"onHoverOut",value:function(a){this.master&&this.requestMasterStyling()}},{key:"onScroll",value:function(a){}},{key:"onMouseWheel",value:function(a){}},{key:"onNativeDrop",value:function(a){}},{key:"onNativeDragleave",value:function(a){}},{key:"onNativeDragenter",value:function(a){}},
{key:"onNativeDragover",value:function(a){}},{key:"onNativeDragend",value:function(a){}},{key:"onNativeDragstart",value:function(a){}},{key:"onNativeDrag",value:function(a){}},{key:"focus",value:function(){var a=this.env.eventDispatcher;a&&a.focusMorph(this)}},{key:"onFocus",value:function(a){}},{key:"onBlur",value:function(a){}},{key:"isFocused",value:function(){var a=this.env.eventDispatcher;return a&&a.isMorphFocused(this)}},{key:"exportToJSON",value:function(a){return fc.serializeSpec(this,a)}},
{key:"initFromJSON",value:function(a){var f=this;this._env=a.env||a._env||fc.MorphicEnv.default();this._rev=0;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=a._id||fc.newMorphId(fc.getClassName(this));this._animationQueue=new fc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this.dontRecordChangesWhile(function(){f.initializeProperties();fc.deserializeSpec(a,function(m){return fc.morph(m)},f)});return this}},{key:"copyViaJSON",
value:function(){var a=this.exportToJSON();fc.tree.prewalk(a,function(f){return f._id=fc.newMorphId(f.type)},function(f){return f.submorphs});a.name=a.name.replace(/copy( [0-9]+)?$/,function(f,m){return"copy "+(m&&m.trim()?Number(m)+1:"1")});return fc.morph({type:a.type}).initFromJSON(a)}},{key:"copy",value:function(){return fc.copyMorph(this)}},{key:"interactivelyPublish",value:function(){var a=this,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return f=
a.world()||a.env.world,v.setCatchFinallyBlocks(2),v.yield(System.import("lively.morphic/partsbin.js"),4);case 4:return m=v.yieldResult,q=m.interactivelySavePart,v.yield(q(a,{notifications:!1,loadingIndicator:!0}),5);case 5:r=v.yieldResult;f.setStatusMessage(r?"Published "+a+" as "+r.name:"Failed to publish part "+a,r?fc.Color.green:fc.Color.red);v.leaveTryBlock(0);break;case 2:u=v.enterCatchBlock(),"canceled"!=u&&f.showError(u),v.jumpToEnd()}})}},{key:"makeDirty",value:function(a){this._dirty=!0;
this.owner&&this.owner.makeDirty()}},{key:"needsRerender",value:function(){return this._dirty}},{key:"aboutToRender",value:function(a){this._dirty=!1;this._rendering=!0}},{key:"onAfterRender",value:function(a){}},{key:"whenRendered",value:function(a){return this.env.whenRendered(this,void 0===a?50:a).then(function(){return!0}).catch(function(){return!1})}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return a.renderMorph(this)}},
{key:"applyLayoutIfNeeded",value:function(){if(this._dirty){for(var a=0;a<this.submorphs.length;a++)this.submorphs[a].applyLayoutIfNeeded();this.layout&&!this.layout.manualUpdate&&this.layout.forceLayout()}}},{key:"requestMasterStyling",value:function(){var a=this;this._rendering||(this.master&&this.master._hasUnresolvedMaster&&(this.master._capturedExtents=new WeakMap,this.withAllSubmorphsDo(function(f){return a.master._capturedExtents.set(f,f.extent)})),this.master&&(this._requestMasterStyling=
!0),this.makeDirty())}},{key:"requestStyling",value:function(){this.withAllSubmorphsDo(function(a){a._wantsStyling=!0;a.makeDirty()})}},{key:"renderAsRoot",value:function(a){var f=this;this.dontRecordChangesWhile(function(){f.applyLayoutIfNeeded()});return fc.renderRootMorph(this,a)}},{key:"renderPreview",value:function(a,f){a=void 0===a?{}:a;f=void 0===f?this.env.renderer:f;return f.renderPreview(this,a)}},{key:"startStepping",value:function(){var a=Array.from(arguments),f="number"===typeof a[0]?
a.shift():null,m=a.shift();a=new fc.TargetScript(this,m,a);this.removeEqualScripts(a);this._tickingScripts.push(a);a.startTicking(f);return a}},{key:"tickingScripts",get:function(){return this._tickingScripts}},{key:"stopStepping",value:function(){fc.arr.invoke(this._tickingScripts,"stop");this._tickingScripts.length=[]}},{key:"stopSteppingScriptNamed",value:function(a){var f=this._tickingScripts.filter(function(m){return m.selector===a});this.stopScripts(f)}},{key:"stopScripts",value:function(a){fc.arr.invoke(a,
"stop");this._tickingScripts=fc.arr.withoutAll(this._tickingScripts,a)}},{key:"suspendStepping",value:function(){this._tickingScripts&&fc.arr.invoke(this._tickingScripts,"suspend")}},{key:"suspendSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return a.suspendStepping()})}},{key:"resumeStepping",value:function(){fc.arr.invoke(this._tickingScripts,"resume")}},{key:"resumeSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return fc.arr.invoke(a._tickingScripts,"resume")})}},
{key:"removeEqualScripts",value:function(a){this.stopScripts(this._tickingScripts.filter(function(f){return f.equals(a)}))}},{key:"commands",get:function(){return this._commands||[]}},{key:"commands",set:function(a){this._commands&&this.removeCommands(this._commands);this.addCommands(a)}},{key:"commandsIncludingOwners",get:function(){return fc.arr.flatmap([this].concat(this.ownerChain()),function(a){return fc.arr.sortByKey(a.commands,"name").map(function(f){return{target:a,command:f}})})}},{key:"addCommands",
value:function(a){var f=this;this.addMethodCallChangeDoing({target:this,selector:"addCommands",args:[a],undo:{target:this,selector:"removeCommands",args:[a]}},function(){f.removeCommands(a);f._commands=(f._commands||[]).concat(a)})}},{key:"removeCommands",value:function(a){var f=this;this.addMethodCallChangeDoing({target:this,selector:"removeCommands",args:[a],undo:{target:this,selector:"addCommands",args:[a]}},function(){var m=a.map(function(r){return"string"===typeof r?r:r.name}),q=(f._commands||
[]).filter(function(r){return!m.includes(r.name)});q.length?f._commands=q:delete f._commands})}},{key:"commandHandler",get:function(){return this._commandHandler||fc.defaultCommandHandler}},{key:"lookupCommand",value:function(a){return(a=this.commandHandler.lookupCommand(a,this))&&a.command?a:null}},{key:"execCommand",value:function(a,f,m,q){return this.commandHandler.exec(a,this,f,m,q)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Morph"}},{key:"propertySettings",get:function(){return{defaultGetter:function(a){return this.getProperty(a)},
defaultSetter:function(a,f){this.setProperty(a,f)},valueStoreProperty:"_morphicState"}}},{key:"properties",get:function(){return Object.assign({name:{group:"core",initialize:function(a){a||(a=fc.getClassName(this),a=(fc.string.startsWithVowel(a)?"an":"a")+a);this.name=a}},isComponent:{group:"core",defaultValue:!1,after:["master"],set:function(a){this.setProperty("isComponent",a);a&&(this.master||delete this._parametrizedProps)}},master:{before:["metadata"],group:"core",set:function(a){this.master&&
this.master.equals(a)||(this.setProperty("master",a?fc.ComponentPolicy.for(this,a):0==a?!1:null),a&&this.requestMasterStyling())}},renderOnGPU:{group:"core",defaultValue:!1},draggable:{group:"interaction",isStyleProp:!0,defaultValue:!1},grabbable:{group:"interaction",isStyleProp:!0,defaultValue:!1,set:function(a){a&&!this.draggable&&(this.draggable=!0);this.setProperty("grabbable",a)}},acceptsDrops:{group:"interaction",isStyleProp:!0,defaultValue:!0},grayscale:{group:"styling",type:"Number",isStyleProp:!0,
defaultValue:0,min:0,max:1,isFloat:!0},blur:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,isFloat:!0},dropShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null,set:function(a){a&&!a.isShadowObject&&(a=new fc.ShadowObject(a),a.morph=this);this.setProperty("dropShadow",a)}},tooltip:{group:"core",defaultValue:null},focusable:{group:"interaction",defaultValue:!0},nativeCursor:{group:"interaction",type:"Enum",values:"auto default none context-menu help pointer progress wait cell crosshair text vertical-text alias copy move no-drop not-allowed e-resize n-resize ne-resize nw-resize s-resize se-resize sw-resize w-resize ew-resize ns-resize nesw-resize nwse-resize col-resize row-resize all-scroll zoom-in zoom-out grab grabbing".split(" "),
isStyleProp:!0,defaultValue:"auto"},halosEnabled:{group:"interaction",isStyleProp:!0,defaultValue:!!fc.config.halosEnabled},reactsToPointer:{group:"interaction",isStyleProp:!0,defaultValue:!0},position:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:fc.pt(0,0)},origin:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:fc.pt(0,0)},extent:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:fc.pt(10,10),set:function(a){var f=this.extent;this.setProperty("extent",a);this.origin.equals(fc.pt(0,
0))||(a=fc.pt(a.x/f.x,a.y/f.y),this.adjustOrigin(this.origin.scaleByPt(a)))}},width:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.x},set:function(a){return this.extent=fc.pt(a,this.extent.y)}},height:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.y},set:function(a){return this.extent=fc.pt(this.extent.x,a)}},left:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().left()},
set:function(a){return this.moveBy(fc.pt(a-this.left),0)}},right:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().right()},set:function(a){return this.moveBy(fc.pt(a-this.right),0)}},top:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().top()},set:function(a){return this.moveBy(fc.pt(0,a-this.top))}},bottom:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottom()},
set:function(a){return this.moveBy(fc.pt(0,a-this.bottom))}},center:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().center()},set:function(a){return this.align(this.center,a)}},topLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topLeft()},set:function(a){return this.align(this.topLeft,a)}},topRight:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topRight()},
set:function(a){return this.align(this.topRight,a)}},bottomRight:{group:"geometry",derived:!0,after:["extent","layout"],get:function(){return this.bounds().bottomRight()},set:function(a){return this.align(this.bottomRight,a)}},bottomLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomLeft()},set:function(a){return this.align(this.bottomLeft,a)}},bottomCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomCenter()},
set:function(a){return this.align(this.bottomCenter,a)}},topCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topCenter()},set:function(a){return this.align(this.topCenter,a)}},leftCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().leftCenter()},set:function(a){return this.align(this.leftCenter,a)}},rightCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().rightCenter()},
set:function(a){return this.align(this.rightCenter,a)}},rotation:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0},flipped:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},tilted:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},perspective:{group:"geometry",type:"Number",isStyleProp:!0,defaultValue:0,min:0},scale:{group:"geometry",type:"Number",min:0,isFloat:!0,isStyleProp:!0,defaultValue:1},hasFixedPosition:{group:"geometry",
doc:"When morph is submorph of world hasFixedPosition == true will keep the morph at the same position relative to top left of the browser window. This means, when the world is scrolled, the morph keeps its place.",defaultValue:!1},opacity:{group:"styling",type:"Number",isFloat:!0,min:0,max:1,isStyleProp:!0,defaultValue:1},fill:{group:"styling",type:"ColorGradient",isStyleProp:!0,defaultValue:fc.Color.white},visible:{group:"styling",isStyleProp:!0,defaultValue:!0,set:function(a){a||this.makeDirty();
this.setProperty("visible",a)}},submorphs:{group:"core",defaultValue:[],after:["isLayoutable","origin","position","rotation","scale"],get:function(){return(this.getProperty("submorphs")||[]).concat()},set:function(a){var f=this,m=this.layout,q=m&&m.isEnabled();q&&m.disable();this.submorphs.forEach(function(r){return a.includes(r)||r.remove()});a.forEach(function(r,u){return f.submorphs[u]!==r&&f.addMorph(r,f.submorphs[u])});q&&m.enable()}},clipMode:{group:"styling",type:"Enum",values:["visible","hidden",
"scroll","auto"],isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.isClip()||(this.scroll=fc.pt(0,0))}},scroll:{group:"geometry",defaultValue:fc.pt(0,0),after:["clipMode","submorphs"],type:"Point",set:function(a){var f=a.x;a=a.y;if(this.isClip()){var m=this.scrollExtent.subPt(this.extent),q=m.y;f=Math.max(0,Math.min(m.x,f));a=Math.max(0,Math.min(q,a));this.setProperty("scroll",fc.pt(f,a));this.makeDirty()}}},scrollbarOffset:{group:"styling",defaultValue:fc.pt(15,
15)},styleClasses:{group:"styling",isStyleProp:!0,defaultValue:["morph"],get:function(){return this._cachedStyleClasses||(this._cachedStyleClasses=this.constructor.styleClasses.concat(this.getProperty("styleClasses")))},set:function(a){this._cachedStyleClasses=null;this.setProperty("styleClasses",fc.arr.withoutAll(a,this.constructor.styleClasses));this.requestStyling()}},layout:{group:"layouting",isStyleProp:!0,type:"Layout",after:["submorphs","extent","origin","position","isLayoutable"],set:function(a){a&&
(a.container=this);this.setProperty("layout",a)}},isLayoutable:{group:"layouting",isStyleProp:!0,defaultValue:!0},borderLeft:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleLeft","borderWidthLeft","borderColorLeft"],get:function(){return{style:this.borderStyleLeft,width:this.borderWidthLeft,color:this.borderColorLeft}},set:function(a){"style"in a&&(this.borderStyleLeft=a.style);"width"in a&&(this.borderWidthLeft=a.width);"color"in a&&(this.borderColorLeft=a.color);"radius"in a&&(this.borderRadiusLeft=
a.radius)}},borderRight:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleRight","borderWidthRight","borderColorRight"],get:function(){return{style:this.borderStyleRight,width:this.borderWidthRight,color:this.borderColorRight}},set:function(a){"style"in a&&(this.borderStyleRight=a.style);"width"in a&&(this.borderWidthRight=a.width);"color"in a&&(this.borderColorRight=a.color);"radius"in a&&(this.borderRadiusRight=a.radius)}},borderBottom:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleBottom",
"borderWidthBottom","borderColorBottom"],get:function(){return{style:this.borderStyleBottom,width:this.borderWidthBottom,color:this.borderColorBottom}},set:function(a){"style"in a&&(this.borderStyleBottom=a.style);"width"in a&&(this.borderWidthBottom=a.width);"color"in a&&(this.borderColorBottom=a.color);"radius"in a&&(this.borderRadiusBottom=a.radius)}},borderTop:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleTop","borderWidthTop","borderColorTop"],get:function(){return{style:this.borderStyleTop,
width:this.borderWidthTop,color:this.borderColorTop}},set:function(a){"style"in a&&(this.borderStyleTop=a.style);"width"in a&&(this.borderWidthTop=a.width);"color"in a&&(this.borderColorTop=a.color);"radius"in a&&(this.borderRadiusTop=a.radius)}},borderWidth:{group:"styling",isStyleProp:!0,type:"Number",foldable:["top","left","right","bottom"],min:0,defaultValue:{top:0,bottom:0,left:0,right:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderWidth");return Object.assign({},
a,{valueOf:function(){return a.left}})},set:function(a){fc.obj.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderWidth",a)}}},fc.generateUnfolded("borderWidth",void 0,"styling"),{borderRadius:{group:"styling",isStyleProp:!0,type:"Number",min:0,foldable:["top","left","right","bottom"],defaultValue:{top:0,bottom:0,right:0,left:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderRadius");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){a||
(a=0);fc.obj.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a});a.isRectangle&&(a={left:a.left(),right:a.right(),top:a.top(),bottom:a.bottom()});this.setProperty("borderRadius",a)}}},fc.generateUnfolded("borderRadius",void 0,"styling"),{borderStyle:{group:"styling",isStyleProp:!0,type:"Enum",foldable:["top","left","right","bottom"],values:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),defaultValue:{top:"solid",left:"solid",bottom:"solid",right:"solid",valueOf:function(){return"solid"}},
get:function(){var a=this.getProperty("borderStyle");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){fc.obj.isString(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderStyle",a)}}},fc.generateUnfolded("borderStyle",void 0,"styling"),{borderColor:{group:"styling",isStyleProp:!0,type:"Color",foldable:["top","left","right","bottom"],defaultValue:{top:fc.Color.white,left:fc.Color.white,bottom:fc.Color.white,right:fc.Color.white,valueOf:function(){return fc.Color.white}},
get:function(){var a=this.getProperty("borderColor");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){a||(a=fc.Color.white);a.isColor&&(a={top:a,left:a,right:a,bottom:a});this.setProperty("borderColor",a?fc.obj.extract(a,["top","left","right","bottom"],function(f,m){return fc.obj.isArray(m)?fc.Color.fromTuple(m):m}):a)}}},fc.generateUnfolded("borderColor",void 0,"styling"),{border:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyle","borderWidth","borderColor"],
get:function(){var a=this;return{get style(){return a.borderStyle},set style(f){a.borderStyle=f},get width(){return a.borderWidth},set width(f){a.borderWidth=f},get color(){return a.borderColor},set color(f){a.borderColor=f},get borderRadius(){return a.borderRadius},set borderRadius(f){a.borderRadius=f}}},set:function(a){"style"in a&&(this.borderStyle=a.style);"width"in a&&(this.borderWidth=a.width);"color"in a&&(this.borderColor=a.color);"radius"in a&&(this.borderRadius=a.radius)}},styleProperties:{group:"styling",
derived:!0,readOnly:!0,get:function(){var a=this.propertiesAndPropertySettings(),f=a.properties,m=[];a=$jscomp.makeIterator(a.order);for(var q=a.next();!q.done;q=a.next())q=q.value,f[q].isStyleProp&&m.push(q);return m}},style:{group:"styling",derived:!0,readOnly:!0,get:function(){for(var a=this.styleProperties,f={},m=0;m<a.length;m++){var q=a[m];f[q]=this[q]}return f}},epiMorph:{group:"core",doc:"epi morphs are 'transient' morphs, i.e. meta objects that should not be serialized like halo items, menus, etc.",
defaultValue:!1},respondsToVisibleWindow:{group:"interaction",doc:"Morphs will respond to changes to the visible browser window and a call will be made to the morph's relayout function, supplying the event generated",defaultValue:!1},installedFonts:{doc:"custom fonts can be installed from a respective morph, and are then kept as part of this morph's state in order to be loaded again the next time the it is cold loaded. (i.e. deserialization of a part)",defaultValue:{},set:function(a){var f=fc.arr.without(fc.obj.keys(this.installedFonts||
{}),"_rev"),m=fc.arr.without(fc.obj.keys(a||{}),"_rev");this.setProperty("installedFonts",a);this.ensureInstalledFonts(f,m)},get:function(){return this.getProperty("installedFonts")||{}}},metadata:{group:"core"}})}},{key:"styleClasses",get:function(){if(this.hasOwnProperty("_styclassNames"))return this._styleClasses;for(var a=this,f=[];a&&a!==Object;)f.push(a[Symbol.for("__LivelyClassName__")]),a=a[Symbol.for("lively-instance-superclass")];return this._styleClasses=f}}],c,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1653,end:80668})}(void 0));fc.Morph=Hj;fc.Morph=Hj;fc.Morph=Hj;var sz=ya("ar",function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=c.hasOwnProperty("Ellipse")&&"function"===typeof c.Ellipse?c.Ellipse:c.Ellipse=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Ellipse"}},{key:"properties",get:function(){return{borderRadius:{derived:!0,get:function(){var a=this;return{top:this.borderRadiusTop,right:this.borderRadiusRight,left:this.borderRadiusLeft,bottom:this.borderRadiusBottom,valueOf:function(){return a.borderRadiusLeft}}}},borderRadiusLeft:{get:function(){return this.height},set:function(){}},borderRadiusRight:{get:function(){return this.height},
set:function(){}},borderRadiusTop:{get:function(){return this.width},set:function(){}},borderRadiusBottom:{get:function(){return this.width},set:function(){}}}}}],c,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:80677,end:81434})}(fc.Morph));fc.Ellipse=sz;fc.Ellipse=sz;fc.Ellipse=sz;var IB=
function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=c.hasOwnProperty("Triangle")&&"function"===typeof c.Triangle?c.Triangle:c.Triangle=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.update()}},
{key:"onChange",value:function(a){("extent"==a.prop||"direction"==a.prop||"fill"==a.prop&&a.value)&&this.update();Nb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a)}},{key:"update",value:function(){var a=this.extent,f=a.x;a=a.y;f!=a&&(this.extent=fc.pt(Math.max(f,a),Math.max(f,a)));this.origin=fc.pt(f/2,a/2);var m=this.triangleFill=this.fill||this.triangleFill;this.fill=null;f={width:f/2,style:"solid",color:m};a={width:a/2,style:"solid",color:fc.Color.transparent};switch(this.direction){case "down":var q=
"borderLeft";var r="borderRight";var u="borderTop";break;case "up":q="borderLeft";r="borderRight";u="borderBottom";break;case "left":q="borderBottom";r="borderTop";u="borderRight";break;case "right":q="borderBottom",r="borderTop",u="borderLeft"}m={};Object.assign(this,(m[q]=a,m[r]=a,m[u]=f,m))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Triangle"}},{key:"properties",get:function(){return{direction:{defaultValue:"up"},triangleFill:{after:["fill"],initialize:function(){this.triangleFill=
this.fill}}}}}],c,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:81443,end:82901})}(fc.Morph);fc.Triangle=IB;fc.Triangle=IB;fc.Triangle=IB;var tz=ya("I",function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=c.hasOwnProperty("Image")&&"function"===typeof c.Image?
c.Image:c.Image=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"__deserialize__",value:function(a,f,m,q){this._isDeserializing=!0;Nb._get(Object.getPrototypeOf(l.prototype),"__deserialize__",this).call(this,a,f,m,q)}},{key:"__after_deserialize__",value:function(a,f,m){delete this._isDeserializing;Nb._get(Object.getPrototypeOf(l.prototype),"__after_deserialize__",this).call(this,a,f,m)}},{key:"isImage",
get:function(){return!0}},{key:"ratio",get:function(){var a=this.naturalExtent;return a.x/a.y}},{key:"setWidthKeepingRatio",value:function(a){this.width=a;this.height=a/this.ratio}},{key:"setHeightKeepingRatio",value:function(a){this.width=this.ratio*a;this.height=a}},{key:"loadUrl",value:function(a,f){var m=this;f=void 0===f?this.autoResize:f;var q=this.autoResize;this.autoResize=f;this.imageUrl=a;return fc.promise.finally(this.whenLoaded(),function(){return m.autoResize=q})}},{key:"whenLoaded",
value:function(){var a=this;return this.isLoaded?Promise.resolve(this):new Promise(function(f,m){var q=a.imageUrl;a.imageElement(function(r){a.imageUrl!==q&&m(Error("url changed ("+q+" => "+a.imageUrl+")"));a.naturalExtent=fc.pt(r.width,r.height);a.isLoaded=!0;f(a)})})}},{key:"determineNaturalExtent",value:function(){var a=this;return this.whenLoaded().then(function(){return a.naturalExtent})}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),
this._requestMasterStyling=!1);return a.renderImage(this)}},{key:"clear",value:function(){return this.loadUrl("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",!1)}},{key:"imageElement",value:function(a){var f=this;return new Promise(function(m,q){var r=f.env.domEnv.document.createElement("img");r.onload=function(){m(r);"function"===typeof a&&a(r)};r.src=f.imageUrl})}},{key:"canvasElementAndContext",value:function(){var a=this,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress)return f=a.env.domEnv.document,u.yield(a.imageElement(),2);m=u.yieldResult;q=f.createElement("canvas");r=q.getContext("2d");q.width=m.width;q.height=m.height;r.drawImage(m,0,0,m.width,m.height);return u.return({canvas:q,ctx:r,image:m})})}},{key:"imageData",value:function(a){var f=this,m,q,r,u,v,y,z,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){if(1==C.nextAddress)return C.yield(f.canvasElementAndContext(),2);m=C.yieldResult;q=m.ctx;r=m.image;a||(a=fc.rect(0,0,r.width,
r.height));u=a;v=u.x;y=u.y;z=u.width;A=u.height;console.log(v,y);return C.return(q.getImageData(v,y,z,A))})}},{key:"pixelAt",value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?m.yield(f.imageData(a.extent(fc.pt(1,1))),2):m.return(m.yieldResult.data)})}},{key:"colorAt",value:function(a){var f=this,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(m=fc.Color,q=m.fromTuple8Bit,r.yield(f.pixelAt(a),
2)):r.return(q.call(m,r.yieldResult))})}},{key:"loadArrayBuffer",value:function(a,f){a=new Uint8Array(a);a=new Blob([a],{type:"image/jpeg"});this.imageUrl=(window.URL||window.webkitURL).createObjectURL(a);this.makeDirty()}},{key:"convertToBase64",value:function(){var a=this,f,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return f=a.imageUrl,m=f.slice(f.lastIndexOf(".")+1,f.length).toLowerCase(),"jpg"===m?m="jpeg":"svg"===m&&(m="svg+xml"),["gif","jpeg",
"png","tiff","svg+xml"].includes(m)||(m="gif"),f.startsWith("http")||(f=fc.location.origin+"/"+f),z.yield(System.import("lively.ide/shell/shell-interface"),2);if(3!=z.nextAddress)return q=z.yieldResult,r=q.runCommand,u='curl --silent "'+f+'" | openssl base64',z.yield(r(u).whenDone(),3);v=z.yieldResult;y=v.stdout;return z.return(a.loadUrl("data:image/"+m+";base64,"+y,!1))})}},{key:"downloadImage",value:function(){var a=this.imageUrl;if(a.match(/^data:image/)){var f=this.name||"image-from-lively";var m=
a.match(/image\/([^;]+)/);m&&m[1]&&(f+="."+m[1])}else f||(f=fc.arr.last(a.split("/")));m=document.createElement("a");m.download=f;m.href=a;m.click()}},{key:"convertTo",value:function(a,f){f||(f=1);var m=this.canvasElementAndContext(),q=m.ctx,r=m.canvas;m=m.image;var u=this.width,v=this.height;r.width=m.width;r.height=m.height;q.drawImage(m,0,0,u,v);return this.loadUrl(r.toDataURL(a,f),!1)}},{key:"resampleImageToFitBounds",value:function(){var a=this,f,m,q,r,u,v,y,z,A,C,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==
F.nextAddress)return F.yield(a.canvasElementAndContext(),2);f=F.yieldResult;m=f.ctx;q=f.canvas;r=f.image;u=a;v=u.width;y=u.height;z=r;A=z.width;C=z.height;q.width=A;q.height=C;m.drawImage(r,0,0,v,y);G=m.getImageData(0,0,A,C);q.width=v;q.height=y;m.putImageData(G,0,0);return F.return(a.loadUrl(q.toDataURL(),!1))})}},{key:"crop",value:function(a){var f=this.canvasElementAndContext(),m=f.ctx,q=f.canvas;f=f.image;var r=this.innerBounds(),u=f.width,v=f.height;a=r.intersection(a);a=new fc.Rectangle(a.x/
r.width,a.y/r.height,a.width/r.width,a.height/r.height);a=$jscomp.makeIterator((new fc.Rectangle(0,0,u,v)).divide([a])).next().value;q.width=u;q.height=v;m.drawImage(f,0,0,u,v);f=m.getImageData(a.x,a.y,a.width,a.height);q.width=a.width;q.height=a.height;m.putImageData(f,0,0);return this.loadUrl(q.toDataURL(),!1)}},{key:"interactivelyChangeImageURL",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(a.world().prompt("Enter image url",
{historyId:"lively.morphic-image-url-inputs",input:a.imageUrl.startsWith("data:")?"":a.imageUrl,requester:a}),2);f=m.yieldResult;"string"===typeof f&&(a.imageUrl=f);m.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,f=Nb._get(Object.getPrototypeOf(l.prototype),"menuItems",this).call(this);f.unshift(["change image url...",function(){return a.interactivelyChangeImageURL()}],["resize image to to fit world",function(){var m=Math.min(a.world().visibleBounds().width/a.naturalExtent.x,a.world().visibleBounds().height/
a.naturalExtent.y);a.extent=a.naturalExtent.scaleBy(m)}],["resize image to its real image size",function(){var m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(m=a,q.yield(a.determineNaturalExtent(),2)):q.return(m.extent=q.yieldResult)})}],["resample image to fit current bounds",function(){return a.resampleImageToFitBounds()}],{isDivider:!0});return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Image"}},{key:"properties",get:function(){return{imageUrl:{isStyleProp:!0,
copyAssetOnFreeze:!0,after:["extent","autoResize"],defaultValue:System.decanonicalize("lively.morphic/lively-web-logo-small.svg"),set:function(a){var f=this;this.isLoaded=!1;this.setProperty("imageUrl",a);this.setProperty("naturalExtent",null);var m=this.autoResize&&!this._isDeserializing;this.whenLoaded().then(function(){f.imageUrl===a&&(f.isLoaded=!0,m&&(f.extent=f.naturalExtent))})}},fill:{defaultValue:fc.Color.transparent},naturalExtent:{defaultValue:null},isLoaded:{defaultValue:!1,serialize:!1},
autoResize:{isStyleProp:!0,defaultValue:!1}}}}],c,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:82910,end:92271})}(fc.Morph));fc.Image=tz;fc.Image=tz;fc.Image=tz;var LE=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=c.hasOwnProperty("PathPoint")&&"function"===
typeof c.PathPoint?c.PathPoint:c.PathPoint=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){f=void 0===f?{}:f;this.path=a;this._isSmooth=f.isSmooth||!1;this.x=f.position?f.position.x:f.x||0;this.y=f.position?f.position.y:f.y||0;this._controlPoints=f.controlPoints}},{key:"__dont_serialize__",get:function(){return["attributeConnections","$$controlPoints",
"$$position","doNotCopyProperties","doNotSerialize"]}},{key:"isPathPoint",get:function(){return!0}},{key:"isSmooth",get:function(){return this._isSmooth||!1}},{key:"isSmooth",set:function(a){this._isSmooth!==a&&(this._isSmooth=a,this.adaptControlPoints(a))}},{key:"position",get:function(){return fc.pt(this.x,this.y)}},{key:"position",set:function(a){var f=a.y;this.x=a.x;this.y=f;this.path.makeDirty()}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);this.path.onVertexChanged(this);
return this}},{key:"copy",value:function(){var a=new fc.ExpressionSerializer;return new fc.PathPoint(this.path,a.deserializeExprObj(this.__serialize__()))}},{key:"__serialize__",value:function(){return{__expr__:("({\n         position: "+this.position.toString(!1)+",\n         isSmooth: "+this.isSmooth+",\n         controlPoints: {\n           next: "+this.controlPoints.next.toString(!1)+",\n           previous: "+this.controlPoints.previous.toString(!1)+"\n         }\n      })").replace(/[\n|\s]/g,
""),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}}},{key:"controlPoints",get:function(){return this._controlPoints||{next:fc.pt(0,0),previous:fc.pt(0,0)}}},{key:"controlPoints",set:function(a){var f=a=void 0===a?{}:a;a=f.next;f=f.previous;this._controlPoints={next:a?fc.Point.fromLiteral(a):fc.pt(0,0),previous:f?fc.Point.fromLiteral(f):fc.pt(0,0)};this.path.makeDirty()}},{key:"moveNextControlPoint",value:function(a){this.moveControlPoint("next",a)}},{key:"movePreviousControlPoint",value:function(a){this.moveControlPoint("previous",
a)}},{key:"moveControlPoint",value:function(a,f){var m=this.controlPoints[a];m=m?m.addPt(f):f;f="next"==a?"previous":"next";var q=this.controlPoints[f];this.isSmooth&&(q=m.negated().normalized().scaleBy(q.r()));var r={};this.controlPoints=(r[a]=m,r[f]=q,r);this.path.onVertexChanged(this)}},{key:"pointOnLine",value:function(a,f,m,q){a=fc.pt(a.x,a.y);f=fc.pt(f.x,f.y);a=f.subPt(a);var r=a.scaleBy(1/a.r());m=f.subPt(m).dotProduct(r);return f.subPt(r.scaleBy(Math.max(1,Math.min(m,a.r())))).addXY(q,q)}},
{key:"nextVertex",get:function(){return this.path.vertexAfter(this)}},{key:"previousVertex",get:function(){return this.path.vertexBefore(this)}},{key:"interpolate",value:function(a,f){var m=this.copy();m.position=m.position.interpolate(a,f);return m}},{key:"adaptControlPoints",value:function(a){var f=this.nextVertex,m=this.previousVertex,q=this.position,r=this.path,u=r.vertices,v=u.indexOf(this),y=0===v;u=v===u.length-1;m=m?m.position:q;f=f?f.position:q;a?(a=this.pointOnLine(m,f,q,r.borderWidth),
this.controlPoints={previous:y?fc.pt(0,0):a.subPt(f),next:a.subPt(m)}):this.controlPoints={previous:y?fc.pt(0,0):m.subPt(q).scaleBy(.5),next:u?fc.pt(0,0):f.subPt(q).scaleBy(.5)};r.onVertexChanged(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PathPoint"}}],c,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:92280,end:96245})}(void 0);fc.PathPoint=LE;fc.PathPoint=LE;fc.PathPoint=LE;var uz=ya("aA",function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=c.hasOwnProperty("Path")&&"function"===typeof c.Path?c.Path:c.Path=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Nb._get(Object.getPrototypeOf(l.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,Object.assign({},fc.obj.dissoc(a,"origin")));this.adjustOrigin(a.origin||this.origin);this.position=a.position||this.position;this.updateBounds(this.vertices)}},{key:"__after_deserialize__",value:function(a,f,m){Nb._get(Object.getPrototypeOf(l.prototype),"__after_deserialize__",this).call(this,a,f,m);this.updateBounds(this.vertices)}},{key:"__additionally_serialize__",value:function(a,f,m,q){Nb._get(Object.getPrototypeOf(l.prototype),"__additionally_serialize__",
this).call(this,a,f,m,q);f=this.getProperty("draggable");f!=this.propertiesAndPropertySettings().properties.draggable.defaultValue&&(a.props.draggable={value:f});if(f=this.borderColor.valueOf())a.props.borderColor={key:"borderColor",value:m.expressionSerializer.exprStringEncode({__expr__:f.toJSExpr(),bindings:{"lively.graphics/geometry-2d.js":["pt","rect"],"lively.graphics/color.js":["Color",fc.getClassName(f)]}})}}},{key:"isPath",get:function(){return!0}},{key:"isSvgMorph",get:function(){return!0}},
{key:"onVertexChanged",value:function(a){this.makeDirty();this.updateBounds(this.vertices)}},{key:"copyVertices",value:function(){return this.vertices.map(function(a){return a.copy()})}},{key:"updateBounds",value:function(a){a=void 0===a?this.vertices:a;if(a.length&&!this._adjustingVertices){this._adjustingVertices=!0;var f=this.origin,m=this.extent,q=f.x/m.x;m=f.y/m.y;var r=[];a.forEach(function(v,y){var z=v.isSmooth,A=v.position,C=v.controlPoints||{};v=C.next;C=C.previous;r.push(A);z&&0<y&&y<a.length-
1&&r.push(A.addPt(v),A.addPt(C))});f=fc.Rectangle.unionPts(r);q=fc.pt(f.width*q,f.height*m);var u=f.topLeft();a.forEach(function(v){return v.moveBy(u.negated())});this.moveBy(this.getTransform().transformDirection(u));this.extent=f.extent().maxPt(fc.pt(this.borderWidth,this.borderWidth));this.origin=q;this._adjustingVertices=!1}}},{key:"onChange",value:function(a){var f=a.prop,m=a.value,q=a.prevValue,r=this._adjustingVertices,u=this._adjustingOrigin;"extent"==f&&m&&q&&!r&&this.adjustVertices(m.scaleByPt(q.inverted()));
(!u&&"vertices"===f||"borderWidthLeft"===f)&&this.updateBounds("vertices"==f?m:this.vertices);r||"origin"!==f||this.updateBounds(this.vertices);Nb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a)}},{key:"vertexBefore",value:function(a){a=this.vertices.indexOf(a)-1;return this.vertices[0<=a?a:this.vertices.length-1]}},{key:"vertexAfter",value:function(a){a=this.vertices.indexOf(a)+1;return this.vertices[a>this.vertices.length-1?0:a]}},{key:"adjustVertices",value:function(a){var f=
this,m=this.vertices;m&&m.forEach(function(q){var r=q.controlPoints,u=r.next;r=r.previous;u=u.scaleByPt(a);r=r.scaleByPt(a);q.position=q.position.addPt(f.origin).scaleByPt(a).subPt(f.origin);q.controlPoints={next:u,previous:r}})}},{key:"adjustOrigin",value:function(a){this._adjustingOrigin=!0;var f=this.origin;this.vertices.forEach(function(m){return m.position=f.subPt(a).addXY(m.x,m.y)});Nb._get(Object.getPrototypeOf(l.prototype),"adjustOrigin",this).call(this,a);this._adjustingOrigin=!1}},{key:"addVertex",
value:function(a,f){f=void 0===f?null:f;var m=this.vertices;f="number"===typeof f?f:f&&f.isPathPoint?m.indexOf(f):void 0;"number"===typeof f&&-1<f?m.splice(f,0,a):m.push(a);this.vertices=m}},{key:"addVertexCloseTo",value:function(a){var f=this.verticesCloseTo(a),m=f.closest,q=m.length;m=m.vertex;f=f.next;a=this.findClosestPointOnPath(a,10,3);return this.addVertex(a.point,a.length<=q?m:f?f.vertex:null)}},{key:"render",value:function(a){return a.renderPath(this)}},{key:"_pathNode",get:function(){var a=
fc.PropertyPath("env.renderer").get(this);return(a=a&&a.getNodeForMorph(this))&&a.querySelector("#svg"+fc.string.regExpEscape(this.id))}},{key:"verticesCloseTo",value:function(a,f){f=void 0===f?!0:f;for(var m=this.vertices,q=Infinity,r=-1,u=0;u<m.length;u++){var v=m[u].position.dist(a);v>=q||(q=v,r=u)}a=0===r?null:{index:r-1,vertex:m[r-1]};q=r===m.length-1?null:{index:r+1,vertex:m[r+1]};m={index:r,vertex:m[r]};f&&(f=this._pathNode,a&&(r=this.findClosestPointOnPath(a.vertex.position,6,3,f).length,
a.length=r),q&&(r=this.findClosestPointOnPath(q.vertex.position,6,3,f).length,q.length=r),f=this.findClosestPointOnPath(m.vertex.position,20,3,f).length,m.length=f);return{previous:a,next:q,closest:m}}},{key:"findClosestPointOnPath",value:function(a,f,m,q){function r(u,v,y,z,A,C,G){y=void 0===y?10:y;z=void 0===z?3:z;A=void 0===A?0:A;C=void 0===C?u.getTotalLength():C;G=void 0===G?0:G;var F=C,N=y;C=[];var L=(A-F)/(N-1),W=0;C.push([fc.Point.ensure(u.getPointAtLength(F)),F,W]);for(W=1;W<N-1;W++){var la=
F+W*L;C.push([fc.Point.ensure(u.getPointAtLength(la)),la,W])}C.push([fc.Point.ensure(u.getPointAtLength(A)),A,W]);A=Infinity;F=-1;N=$jscomp.makeIterator(C);for(L=N.next();!L.done;L=N.next())W=$jscomp.makeIterator(L.value),L=W.next().value,W.next(),W=W.next().value,L=v.dist(L),L>=A||(A=L,F=W);if(G>=z)return v=$jscomp.makeIterator(C[F]),u=v.next().value,v=v.next().value,{point:u,length:v};A=C[Math.max(0,F-1)][1];C=C[Math.min(C.length-1,F+1)][1];return r(u,v,y,z,A,C,G+1)}q||(q=(q=this.env.renderer.getNodeForMorph(this))&&
q.querySelector("#svg"+fc.string.regExpEscape(this.id)));return q?r(q,a,f,m):{length:0,point:a}}},{key:"onDragStart",value:function(a){var f=a.domEvt.target,m=(new fc.PropertyPath("attributes.class.value")).get(f);if(m&&m.includes("path-point"))m=$jscomp.makeIterator(m.match(/path-point-([0-9]+)(?:-control-([0-9]+))?$/)),m.next(),a=m.next().value,m=m.next().value,this._controlPointDrag={marker:f,n:Number(a)},void 0!==m&&(this._controlPointDrag.ctrlN=Number(m));else return Nb._get(Object.getPrototypeOf(l.prototype),
"onDragStart",this).call(this,a)}},{key:"onDrag",value:function(a){if(!this._controlPointDrag)return Nb._get(Object.getPrototypeOf(l.prototype),"onDrag",this).call(this,a);var f=this._controlPointDrag,m=f.n,q=f.ctrlN,r=this.vertices;if(f=r[m])a=this.getInverseTransform().transformDirection(a.state.dragDelta),void 0===q?(f.moveBy(a),a=r[m-1],r=r[m+1],a&&10>a.position.dist(f.position)?this._controlPointDrag.maybeMerge=[m-1,m]:r&&10>r.position.dist(f.position)?this._controlPointDrag.maybeMerge=[m,m+
1]:this._controlPointDrag.maybeMerge=void 0):1===q?f.movePreviousControlPoint(a):2===q&&f.moveNextControlPoint(a)}},{key:"onDragEnd",value:function(a){a=this.vertices;var f=this._controlPointDrag;if(f&&(f=f.maybeMerge,delete this._controlPointDrag,f)){var m=$jscomp.makeIterator(f);f=m.next().value;m=m.next().value;a[f].controlPoints.next=a[m].controlPoints.next;a.splice(m,1);this.vertices=a}}},{key:"onMouseDown",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onMouseDown",this).call(this,
a);2===a.state.clickCount&&this.addVertexCloseTo(this.localize(a.position))}},{key:"menuItems",value:function(){var a=this,f=fc.Icon.textAttribute("check-square",{textStyleClasses:["far"]}),m=fc.Icon.textAttribute("square",{textStyleClasses:["far"]});m[1].paddingRight="7px";f[1].paddingRight="5px";return[[[].concat($jscomp.arrayFromIterable(this.showControlPoints?f:m),[" control points"]),function(){return a.showControlPoints=!a.showControlPoints}],[[].concat($jscomp.arrayFromIterable(this.isSmooth?
f:m),[" smooth"]),function(){return a.isSmooth=!a.isSmooth}],{isDivider:!0}].concat($jscomp.arrayFromIterable(Nb._get(Object.getPrototypeOf(l.prototype),"menuItems",this).call(this)))}},{key:"getPointOnPath",value:function(a){if(!this._pathNode)return fc.pt(0,0);a=this._pathNode.getPointAtLength(this._pathNode.getTotalLength()*a)||fc.pt(0,0);return fc.pt(a.x,a.y)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Path"}},{key:"properties",get:function(){return{borderColor:{isStyleProp:!0,
type:"ColorGradient",foldable:["top","left","right","bottom"],set:function(a){a||(a=fc.Color.white);if(a.isColor||a.isGradient)a={top:a,left:a,right:a,bottom:a};this.setProperty("borderColor",fc.obj.extract(a,["top","left","right","bottom"],function(f,m){return fc.obj.isArray(m)?fc.Color.fromTuple(m):m}))}},showControlPoints:{defaultValue:!1},vertices:{defaultValue:[],isStyleProp:!0,after:["isSmooth","borderWidth"],before:["extent","origin"],type:"Vertices",set:function(a){var f=this,m=this.isSmooth;
this._adjustingVertices=!0;a=a.map(function(q){return q.isPathPoint?Object.assign(q,{path:f}):new fc.PathPoint(f,Object.assign({isSmooth:m},q))});this.setProperty("vertices",a);this._adjustingVertices=!1;this.updateBounds(a)}},startMarker:{defaultValue:null,type:"Object"},endMarker:{defaultValue:null,type:"Object"},endStyle:{isStyleProp:!0,type:"Enum",values:["butt","round","square"],defaultValue:"butt"},drawnProportion:{type:"Number",isStyleProp:!0,isFloat:!0,min:-1,max:1,defaultValue:0},cornerStyle:{type:"Enum",
isStyleProp:!0,values:["arcs","bevel","miter","miter-clip","round"],defaultValue:"miter"},draggable:{get:function(){return this.getProperty("draggable")||this.showControlPoints}},isSmooth:{defaultValue:!1,before:["vertices"],type:"Boolean",set:function(a){this.setProperty("isSmooth",a);this.vertices&&(this._adjustingVertices=!0,this.vertices.forEach(function(f){return f.isSmooth=a}),this._adjustingVertices=!1,this.updateBounds(this.vertices))}}}}}],c,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:96254,end:109951})}(fc.Morph));fc.Path=uz;fc.Path=uz;fc.Path=uz;var JB=ya("aB",function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=c.hasOwnProperty("Polygon")&&"function"===typeof c.Polygon?c.Polygon:c.Polygon=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){if(a.vertices&&2<a.vertices.length)Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);else throw Error("A polygon requires 3 or more vertices!");}},{key:"isPolygon",get:function(){return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Polygon"}}],c,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:109960,end:110214})}(fc.Path));fc.Polygon=JB;fc.Polygon=JB;fc.Polygon=JB;var KB=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=c.hasOwnProperty("LineMorph")&&"function"===typeof c.LineMorph?c.LineMorph:c.LineMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Nb(l,b,[{key:"isPolygon",get:function(){return!0}},{key:"update",value:function(){if(!this._isUpdating){this._isUpdating=!0;var a=this.line,f=this.height,m=a.toVector();this.setProperty("position",this.position.addPt(a.perpendicularLine(0,f,"cc").toVector()));this.width=m.fastR();this.rotation=m.theta();this.vec=m;this._isUpdating=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LineMorph"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:0},
fill:{defaultValue:fc.Color.black},height:{defaultValue:1},line:{defaultValue:fc.Line.fromCoords(0,0,0,0),set:function(a){this.setProperty("line",a);this.update(a)}},start:{derived:!0,after:["line"],get:function(a){return this.line.start},set:function(a){this.line=this.line.withStart(a)}},end:{derived:!0,after:["line"],get:function(a){return this.line.end},set:function(a){this.line=this.line.withEnd(a)}},position:{derived:!0,after:["line"],get:function(a){return this.start},set:function(a){var f=
a.subPt(this.start),m=this.rotation;this.line=new fc.Line(a,this.end.addPt(f));this.rotation=m}}}}}],c,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:110223,end:111715})}(fc.Morph);fc.LineMorph=KB;fc.LineMorph=KB;fc.LineMorph=KB;var $ka=Object.freeze({__proto__:null,Morph:Hj,Ellipse:sz,Triangle:IB,
Image:tz,PathPoint:LE,Path:uz,Polygon:JB,LineMorph:KB}),fn=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js");fn.pt=fh;fn.Morph=Hj;fn.morph=Gc;fn.config=nk;fn.fun=Xk;var LB=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),l=c.hasOwnProperty("TooltipViewer")&&"function"===typeof c.TooltipViewer?c.TooltipViewer:c.TooltipViewer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.currentMorph=a}},{key:"__dont_serialize__",get:function(){return["currentTooltip","currentMorph"]}},{key:"notPartOfCurrentTooltip",value:function(a){return!a.ownerChain().includes(this.currentMorph)}},{key:"invalidatesCurrentTooltip",value:function(a){return a.tooltip||this.notPartOfCurrentTooltip(a)}},{key:"mouseMove",value:function(a){var f=this,m=a.hand,q=$world.morphsContainingPoint(a.positionIn($world));for(q=
q.slice(q.indexOf(m)+1).find(function(r){return r.tooltip});q&&!q.visible;)q=q.morphBeneath(a.positionIn($world));q?this.currentMorph!==q&&this.invalidatesCurrentTooltip(q)&&(this.hoverOutOfMorph(this.currentMorph),this.hoverIntoMorph(q,m),this.currentMorph=q):this.currentTooltip?this.currentTooltip.softRemove().then(function(){f.currentTooltip.owner||(f.currentTooltip=null)}):this.currentMorph=null}},{key:"mouseDown",value:function(a){this.currentTooltip&&this.currentTooltip.remove();this.currentTooltip=
null}},{key:"hoverIntoMorph",value:function(a,f){this.clearScheduledTooltip();this.currentTooltip?this.showTooltipFor(a,f):this.scheduleTooltipFor(a,f)}},{key:"hoverOutOfMorph",value:function(a){var f=this;this.currentTooltip&&this.currentTooltip.softRemove(function(m){return f.currentTooltip==m&&(f.currentTooltip=null)})}},{key:"scheduleTooltipFor",value:function(a,f){var m=this;this.timer=setTimeout(function(){return m.showTooltipFor(a,f)},1E3*fn.config.showTooltipsAfter)}},{key:"clearScheduledTooltip",
value:function(){clearTimeout(this.timer)}},{key:"clearCurrentTooltip",value:function(){var a=this.currentTooltip;a&&a.remove()}},{key:"showTooltipFor",value:function(a,f){a.tooltip&&a.world()&&(this.clearCurrentTooltip(),f=f?f.position.addXY(10,7):a.globalBounds().bottomRight(),this.currentTooltip=new fn.Tooltip({position:f,description:a.tooltip}),$world.addMorph(this.currentTooltip),this.currentTooltip.update(a))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TooltipViewer"}}],
c,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:189,end:2700})}(void 0);fn.TooltipViewer=LB;fn.TooltipViewer=LB;fn.TooltipViewer=LB;var vz=ya("ao",function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),l=c.hasOwnProperty("Tooltip")&&"function"===typeof c.Tooltip?
c.Tooltip:c.Tooltip=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"update",value:function(a){this.position=a.globalBounds().bottomCenter().subPt(a.world().scroll).addPt(fn.pt(0,7))}},{key:"softRemove",value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(f.animate({opacity:0,duration:300}),2);a&&a(f);f.remove();m.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Tooltip"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},reactsToPointer:{defaultValue:!1},isEpiMorph:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://System/tooltip"}}},description:{after:["submorphs"],derived:!0,get:function(){return $jscomp.makeIterator(this.submorphs).next().value.value},set:function(a){var f=$jscomp.makeIterator(this.submorphs).next().value;f.value=a;f.fit()}},
submorphs:{initialize:function(){this.submorphs=[new fn.morph({type:"label",width:200})]}}}}}],c,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2709,end:3866})}(fn.Morph));fn.Tooltip=vz;fn.Tooltip=vz;fn.Tooltip=vz;var ala=Object.freeze({__proto__:null,TooltipViewer:LB,Tooltip:vz}),z4=
lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/index.js");z4.default=Jt;z4.MorphicDB=Jt;var bla=Object.freeze({__proto__:null,MorphicDB:Jt}),$k=lively.FreezerRuntime.recorderFor("lively.2lively/interface.js");$k.nyi=function(b){throw Error("Not yet implemented: "+b);};$k.string=Hg;$k.promise=Kf;$k.debugMessageOrder=!1;var fj=function(b){this.id=$k.string.newUUID();this.actions={};this.options={ackTimeout:3500,debug:!1};this._incomingOrderNumberingBySenders=new Map;this._outgoingOrderNumberingByTargets=
new Map;this._outOfOrderCacheBySenders=new Map};fj.prototype.isOnline=function(){$k.nyi("isOnline")};fj.prototype.open=function(){$k.nyi("open")};fj.prototype.close=function(){$k.nyi("close")};fj.prototype.remove=function(){$k.nyi("remove")};fj.prototype.whenOnline=function(b){var c=this;return $k.promise.waitFor(b,function(){return c.isOnline()}).then(function(){return c}).catch(function(l){return Promise.reject(/timeout/i.test(String(l))?Error("Timeout in "+c+".whenOnline"):l)})};fj.prototype.onError=
function(b){this.debug&&console.log("["+this+"] error: "+b)};fj.prototype.removeService=function(b){delete this.actions[b]};fj.prototype.removeServices=function(b){var c=this;b.forEach(function(l){return c.removeService(l)})};fj.prototype.addService=function(b,c){this.actions[b]=c};fj.prototype.addServices=function(b){var c=this;Object.keys(b).forEach(function(l){return c.addService(l,b[l])})};fj.prototype.ping=function(b){var c=this,l,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return l=Date.now(),r.yield(c.sendToAndWait(b,"l2l-ping",{timestamp:l}),2);a=r.yieldResult;f=a.data;m=f.timestamp;q=Date.now();return r.return({to:m-l,from:q-m,roundtrip:q-l})})};fj.prototype.send=function(b,c){$k.nyi("send")};fj.prototype.sendAndWait=function(b){var c=this,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return l=new Promise(function(r,u){return c.send(b,r)}),a={},f=c.options.ackTimeout+400,"ackTimeout"in b&&(f=!b.ackTimeout||
0>b.ackTimeout?null:b.ackTimeout+400),f?q.yield(Promise.race([$k.promise.delay(f,a),l]),5):q.yield(l,4);case 4:m=q.yieldResult;q.jumpTo(3);break;case 5:m=q.yieldResult;case 3:if(m===a)throw Error("Timeout sending "+b.action);return q.return(m)}})};fj.prototype.sendTo=function(b,c,l,a){return this.send({target:b,action:c,data:l},a)};fj.prototype.sendToAndWait=function(b,c,l,a){return this.sendAndWait(Object.assign({target:b,action:c,data:l},a))};fj.prototype.prepareSend=function(b,c){var l=b.target,
a=b.action,f=b.messageId,m=b.sender;if(!a)throw Error("Trying to send a message without specifying action!");if(!l)throw Error("Trying to send message "+a+" without specifying target!");f||(b.messageId=$k.string.newUUID());m||(b.sender=this.id);a=b.n=this._outgoingOrderNumberingByTargets.get(l)||0;this._outgoingOrderNumberingByTargets.set(l,a+1);if("function"===typeof c){m=this;var q=c;c=function(r){var u=m._incomingOrderNumberingBySenders.get(r.sender)||0;m.debug&&$k.debugMessageOrder&&console.log("[MSG ORDER] "+
m+" received ack for "+r.action+" as msg "+u);try{q.apply(null,arguments)}catch(v){console.error("Error in ack fn of "+m+": "+v.stack)}m._incomingOrderNumberingBySenders.set(r.sender,u+1);setTimeout(function(){return m.invokeOutOfOrderMessages(r.sender)},0)}}this.debug&&$k.debugMessageOrder&&console.log("[MSG ORDER] "+this+" sending "+a+" ("+b.action+") to "+l);return[b,c]};fj.prototype.prepareAnswerMessage=function(b,c){return{action:b.action+"-response",inResponseTo:b.messageId,target:b.sender,
data:c,sender:this.id}};fj.prototype.installEventToMessageTranslator=function(b){var c=this,l=b.onevent;b.onevent=function(a){var f=a.data||[];l.call(this,a);a.data=["*"].concat(f);l.call(this,a)};b.on("*",function(a,f){a&&"object"===typeof a&&a.action&&(f=a,a=f.action);var m=arguments[arguments.length-1];m="function"===typeof m?m:null;(f=f===m?null:f)&&f.data&&("number"===typeof f.n||f.broadcast)&&f.sender?c.receive(f,b,m):(console.warn(c+" received non-conformant message "+a+":",arguments),"function"===
typeof m&&m({data:{error:"invalid l2l message"}}))})};fj.prototype.receive=function(b,c,l){this.dispatchL2LMessageToSelf(b,c,l)};fj.prototype.dispatchL2LMessageToSelf=function(b,c,l){var a=this,f=b.action;if(b.broadcast)this.safeInvokeServiceHandler(f,b,l,c);else try{var m=this._incomingOrderNumberingBySenders.get(b.sender)||0,q="register"===f||"unregister";if(!q&&b.n<m)console.error("[MSG ORDER] ["+this+"] received message no. "+b.n+" but expected >= "+m+", dropping "+f);else if(!q&&b.n>m){this.debug&&
$k.debugMessageOrder&&console.log("[MSG ORDER] ["+this+"] storing out of order message "+f+" ("+b.n+") for later invocation");var r=this._outOfOrderCacheBySenders.get(b.sender);r||(r=[],this._outOfOrderCacheBySenders.set(b.sender,r));r.push([f,b,l,c])}else this.safeInvokeServiceHandler(f,b,l,c),setTimeout(function(){return a.invokeOutOfOrderMessages(b.sender)},0)}catch(u){console.error("Error message ordering when handling "+f+": "+(u.stack||u)),"function"===typeof l&&l(this.prepareAnswerMessage(b,
{isError:!0,error:String(u.stack||u)}))}};fj.prototype.invokeOutOfOrderMessages=function(b){var c=this._outOfOrderCacheBySenders.get(b);if(c&&c.length){var l=this._incomingOrderNumberingBySenders.get(b)||0;b=c.findIndex(function(a){a=$jscomp.makeIterator(a);a.next();return a.next().value.n===l});-1!==b&&(c.splice(b,1),this.invokeServiceHandler.apply(this,c[b]))}};fj.prototype.renameTarget=function(b,c){if(b!==c){var l=this._outgoingOrderNumberingByTargets.get(b);this._outgoingOrderNumberingByTargets.delete(b);
this._outgoingOrderNumberingByTargets.set(c,l)}};fj.prototype.safeInvokeServiceHandler=function(b,c,l,a){try{"function"===typeof this.actions[b]?this.invokeServiceHandler(b,c,l,a):a._events&&Object.keys(a._events).includes(b)||(console.warn("WARNING ["+this+"] Unhandled message: "+b),"function"===typeof l&&l(this.prepareAnswerMessage(c,{isError:!0,error:"message not understood: "+b})))}catch(f){console.error("Error when handling "+b+": "+(f.stack||f)),"function"===typeof l&&l(this.prepareAnswerMessage(c,
{isError:!0,error:String(f.stack||f)}))}};fj.prototype.invokeServiceHandler=function(b,c,l,a){var f=this;this.debug&&$k.debugMessageOrder&&console.log("[MSG ORDER] "+this+" received "+c.n+" ("+c.action+") from "+c.sender);this._incomingOrderNumberingBySenders.set(c.sender,c.n+1);if("function"===typeof l){var m=!1,q=!1,r="ackTimeout"in c?c.ackTimeout:this.options.ackTimeout,u=this._outgoingOrderNumberingByTargets.get(c.sender)||0;this._outgoingOrderNumberingByTargets.set(c.sender,u+1);var v=function(y){q?
console.warn("["+f+"] ackFn for "+c.action+" called after it timed out, dropping answer!"):m?console.warn("["+f+"] ack function called repeatedly when handling "+c.action):(m=!0,l(f.prepareAnswerMessage(c,y)),f.debug&&$k.debugMessageOrder&&console.log("[MSG ORDER] "+f+" sending "+u+" (ack for "+c.action+")"))};r&&setTimeout(function(){m||(v({isError:!0,error:"Timeout error: "+f+" did not send answer for "+c.action+" after "+r+"ms"}),q=!0)},r)}try{this.actions[b].call(this,this,c,v,a)}catch(y){console.error("["+
this+"] Error handling "+b+": "+(y.stack||y)),v&&v({error:y.stack})}};$jscomp.global.Object.defineProperties(fj.prototype,{debug:{configurable:!0,enumerable:!0,get:function(){return this.options.debug},set:function(b){this.options.debug=b}}});$k.L2LConnection=fj;$k.default=fj;var pv=lively.FreezerRuntime.recorderFor("lively.2lively/default-actions.js"),oK={"l2l-ping":function(b,c,l,a){a=c.sender;c=c.data.timestamp;var f=Date.now();"function"===typeof l&&l({timestamp:f});b.debug&&console.log("[undefined] got ping from "+
a+", time: "+(f-c)+"ms")},"remote-eval":function(b,c,l,a){var f=c.data.source;Promise.resolve().then(function(){return eval(f)}).then(function(m){return l({value:m})}).catch(function(m){m.originalErr&&(m=m.originalErr);console.error("eval error: "+m);"function"===typeof l&&l({isError:!0,value:String(m.stack||m)})})},"remote-eval-2":function(b,c,l,a){var f=c.data.source;Promise.resolve().then(function(){var m=eval(f);if(!(m instanceof Promise))throw console.error("unexpected eval result:"+m),Error("unexpected eval result:"+
m);return m}).then(function(m){return l(m)}).catch(function(m){console.error("eval error: "+m);m.originalErr&&(m=m.originalErr);"function"===typeof l&&l({isError:!0,value:String(m.stack||m)})})}};pv.defaultActions=oK;pv.defaultActions=oK;pv.defaultActions=oK;var fx={},wR=(fx["[broadcast] send"]=function(b,c,l,a){var f=c.sender,m=c.data,q,r,u,v,y,z,A,C,G,F,N,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){q=m;r=q.action;u=q.broadcast;v=q.room;y=q.namespace;z=q.isSystemBroadcast;A=
q.isMultiServerBroadcast;C=[];A?(console.log(".......isMultiServerBroadcast"),G=b,F=G.id,N=b.getTrackerList(),console.log(N),C=N.map(function(la){return la.id!=F?la.io.nsps["/"+la.namespace]:a.broadcast})):(z&&(y=b.namespace),C.push(y?b.io.nsps["/"+y]:a.broadcast));C.forEach(function(la){return la.to(v).emit({action:r,sender:f,broadcast:!0,data:u})});l&&"function"===typeof l&&(L="message broadcasted to "+v,y&&(L+=" in namespace "+y),1<C.length&&(L+=" "+C.length+" trackers"),console.log(L),l({status:L}));
W.jumpToEnd()})},fx["[broadcast] join room"]=function(b,c,l,a){var f=c.sender,m=c.data.room,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return r=!1,u=b.io.nsps["/"+b.namespace].adapter.rooms,(v=u[m]&&u[m].sockets&&u[m].sockets[a.id])?(q=f+" already in "+m,y.jumpTo(2)):y.yield(new Promise(function(z,A){return a.join(m,function(C){return C?A(C):z()})}),3);2!=y.nextAddress&&(q=f+" joined "+m,r=!0);l&&"function"===typeof l&&l({status:q,joined:r});y.jumpToEnd()})},
fx["[broadcast] leave room"]=function(b,c,l,a){var f=c.sender,m=c.data.room,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return r=!1,u=b.io.nsps["/"+b.namespace].adapter.rooms,v=u[m]&&u[m].sockets&&u[m].sockets[a.id],v?y.yield(new Promise(function(z,A){return a.leave(m,function(C){return C?A(C):z()})}),3):(q=f+" not in "+m,y.jumpTo(2));2!=y.nextAddress&&(q=f+" left room "+m,r=!0);console.log(q);l&&"function"===typeof l&&l({left:r,status:q});y.jumpToEnd()})},
fx["[broadcast] my rooms"]=function(b,c,l,a){l(a.rooms)},fx["[broadcast] all rooms"]=function(b,c,l,a){l(b.io.nsps["/"+b.namespace].adapter.rooms)},fx["[broadcast] list room members"]=function(b,c,l,a){c=c.data.room;a=b.io;c?(b=a.nsps["/"+b.namespace].adapter.rooms[c],l({room:c,sockets:b?b.sockets:{},length:b?b.length:0})):l({isError:!0,error:"`room` paramerter missing!"})},fx.getClients=function(b,c,l){b.removeDisconnectedClients();l(Array.from(b.clients))},fx);pv.defaultTrackerActions=wR;pv.defaultTrackerActions=
wR;pv.defaultTrackerActions=wR;var ME={},pK=(ME.getRoomList=function(b){var c=b.client,l=b.ackFn,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){a=c._socketioClient.rooms;l(a);f.jumpToEnd()})},ME["ask for"]=function(b,c,l,a){var f=c.sender,m=c.data.query,q=this,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return r=m.match(/password|sudo/i)?"passwordPrompt":"prompt",v.yield($world[r](m),2);u=v.yieldResult;"function"===typeof l&&l({answer:u});
b.debug&&console.log("["+q+"] message 'ask for' from "+f+", query: "+m);v.jumpToEnd()})},ME["open editor"]=function(b,c,l,a){var f=c.data.args,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return f.length?q.yield($world.execCommand("open file for EDITOR",{url:f[0]}),2):(l({error:"no file specified"}),q.return());m=q.yieldResult;"function"===typeof l&&l("aborted"===m?{error:String(m)}:{status:m});q.jumpToEnd()})},ME.changeWorkingDirectory=function(b,c,l,a){var f=
c.data.args,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){m=$jscomp.makeIterator(f||[]);q=m.next().value;r=m.next().value;u="OK";try{if(q)if(r){if(v=$world.getMorphWithId(r))if(v.__lookupSetter__("cwd"))v.cwd=q;else if("function"===typeof v.changeWorkingDirectory)v.changeWorkingDirectory(q);else if("function"===typeof v.pluginFind){if(y=v.pluginFind(function(A){return A.isShellEditorPlugin}))y.cwd=q}else u="[changeWorkingDirectory] cannot figure pout how to set dir"}else u=
"[changeWorkingDirectory] No command morph";else u="[changeWorkingDirectory] No directory received"}catch(A){u=String(A)}"OK"!==u&&console.warn(u);"function"===typeof l&&l(u);z.jumpToEnd()})},ME);pv.defaultClientActions=pK;pv.defaultClientActions=pK;pv.defaultClientActions=pK;var cla={},dla=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
ela="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),A4=cla=function(b){var c=b,l=b.indexOf("["),a=b.indexOf("]");-1!=l&&-1!=a&&(b=b.substring(0,l)+b.substring(l,a).replace(/:/g,";")+b.substring(a,b.length));var f=dla.exec(b||"");b={};for(var m=14;m--;)b[ela[m]]=f[m]||"";-1!=l&&-1!=a&&(b.source=c,b.host=b.host.substring(1,b.host.length-1).replace(/;/g,":"),b.authority=b.authority.replace("[","").replace("]","").replace(/;/g,":"),b.ipv6uri=
!0);c=b.path;l=c.replace(/\/{2,9}/g,"/").split("/");"/"!=c.substr(0,1)&&0!==c.length||l.splice(0,1);"/"==c.substr(c.length-1,1)&&l.splice(l.length-1,1);b.pathNames=l;b.queryKey=Oaa(b,b.query);return b},fla={},vD=864E5,Qaa=365.25*vD,gla=fla=function(b,c){c=c||{};var l=typeof b;if("string"===l&&0<b.length)return Paa(b);if("number"===l&&!1===isNaN(b))return c.long?EH(b,vD,"day")||EH(b,36E5,"hour")||EH(b,6E4,"minute")||EH(b,1E3,"second")||b+" ms":b>=vD?Math.round(b/vD)+"d":36E5<=b?Math.round(b/36E5)+
"h":6E4<=b?Math.round(b/6E4)+"m":1E3<=b?Math.round(b/1E3)+"s":b+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(b));},Taa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Ih={};Ih=Ih=iO.debug=iO["default"]=iO;Ih.coerce=function(b){return b instanceof Error?b.stack||b.message:b};Ih.disable=function(){Ih.enable("")};Ih.enable=function(b){Ih.save(b);Ih.names=[];Ih.skips=[];var c,l=("string"===typeof b?b:"").split(/[\s,]+/),a=l.length;
for(c=0;c<a;c++)l[c]&&(b=l[c].replace(/\*/g,".*?"),"-"===b[0]?Ih.skips.push(new RegExp("^"+b.substr(1)+"$")):Ih.names.push(new RegExp("^"+b+"$")));for(c=0;c<Ih.instances.length;c++)b=Ih.instances[c],b.enabled=Ih.enabled(b.namespace)};Ih.enabled=function(b){if("*"===b[b.length-1])return!0;var c;var l=0;for(c=Ih.skips.length;l<c;l++)if(Ih.skips[l].test(b))return!1;l=0;for(c=Ih.names.length;l<c;l++)if(Ih.names[l].test(b))return!0;return!1};Ih.humanize=gla;Ih.instances=[];Ih.names=[];Ih.skips=[];Ih.formatters=
{};var qK="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,dn={},jO=Nh;dn=dn=Ih;dn.log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)};dn.formatArgs=function(b){var c=(this||qK).useColors;b[0]=(c?"%c":"")+(this||qK).namespace+(c?" %c":" ")+b[0]+(c?"%c ":" ")+"+"+dn.humanize((this||qK).diff);if(c){c="color: "+(this||qK).color;b.splice(1,0,c,"color: inherit");var l=0,a=0;b[0].replace(/%[a-zA-Z%]/g,
function(f){"%%"!==f&&(l++,"%c"===f&&(a=l))});b.splice(a,0,c)}};dn.save=function(b){try{null==b?dn.storage.removeItem("debug"):dn.storage.debug=b}catch(c){}};dn.load=l_;dn.useColors=function(){return"undefined"!==typeof window&&window.process&&"renderer"===window.process.type?!0:"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||
"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)};var hla=dn;if("undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage)var xR=chrome.storage.local;else a:{try{xR=window.localStorage;
break a}catch(b){}xR=void 0}hla.storage=xR;dn.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" ");
dn.formatters.j=function(b){try{return JSON.stringify(b)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}};dn.enable(l_());var qv=dn,Ij="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,B4={};B4=lp;lp.prototype.on=lp.prototype.addEventListener=function(b,c){(this||Ij)._callbacks=(this||Ij)._callbacks||{};((this||Ij)._callbacks["$"+b]=(this||Ij)._callbacks["$"+b]||[]).push(c);return this||Ij};lp.prototype.once=function(b,c){function l(){this.off(b,l);c.apply(this||
Ij,arguments)}l.fn=c;this.on(b,l);return this||Ij};lp.prototype.off=lp.prototype.removeListener=lp.prototype.removeAllListeners=lp.prototype.removeEventListener=function(b,c){(this||Ij)._callbacks=(this||Ij)._callbacks||{};if(0==arguments.length)return(this||Ij)._callbacks={},this||Ij;var l=(this||Ij)._callbacks["$"+b];if(!l)return this||Ij;if(1==arguments.length)return delete (this||Ij)._callbacks["$"+b],this||Ij;for(var a,f=0;f<l.length;f++)if(a=l[f],a===c||a.fn===c){l.splice(f,1);break}0===l.length&&
delete (this||Ij)._callbacks["$"+b];return this||Ij};lp.prototype.emit=function(b){(this||Ij)._callbacks=(this||Ij)._callbacks||{};for(var c=Array(arguments.length-1),l=(this||Ij)._callbacks["$"+b],a=1;a<arguments.length;a++)c[a-1]=arguments[a];if(l){l=l.slice(0);a=0;for(var f=l.length;a<f;++a)l[a].apply(this||Ij,c)}return this||Ij};lp.prototype.listeners=function(b){(this||Ij)._callbacks=(this||Ij)._callbacks||{};return(this||Ij)._callbacks["$"+b]||[]};lp.prototype.hasListeners=function(b){return!!this.listeners(b).length};
var wz=B4,ila={},jla={}.toString,yR=ila=Array.isArray||function(b){return"[object Array]"==jla.call(b)},C4={},zR=$g.Buffer;C4=function(b){var c;!(c=kla&&zR.isBuffer(b))&&(c=lla)&&((c=b instanceof ArrayBuffer)||(c="function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(b):b.buffer instanceof ArrayBuffer));return c};var kla="function"===typeof zR&&"function"===typeof zR.isBuffer,lla="function"===typeof ArrayBuffer,D4=C4,E4="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:
global,rK={},lO=yR,m_=D4,F4=Object.prototype.toString,mla="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===F4.call(Blob),nla="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===F4.call(File);rK.deconstructPacket=function(b){var c=[];b.data=kO(b.data,c);b.attachments=c.length;return{packet:b,buffers:c}};rK.reconstructPacket=function(b,c){b.data=mO(b.data,c);b.attachments=void 0;return b};rK.removeBlobs=function(b,c){function l(m,q,r){if(!m)return m;
if(mla&&m instanceof Blob||nla&&m instanceof File){a++;var u=new FileReader;u.onload=function(){r?r[q]=(this||E4).result:f=(this||E4).result;--a||c(f)};u.readAsArrayBuffer(m)}else if(lO(m))for(u=0;u<m.length;u++)l(m[u],u,m);else if("object"===typeof m&&!m_(m))for(u in m)l(m[u],u,m)}var a=0,f=b;l(f);a||c(f)};var um="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,pj={},nO=qv("socket.io-parser"),oO=rK;pj.protocol=4;pj.types="CONNECT DISCONNECT EVENT ACK ERROR BINARY_EVENT BINARY_ACK".split(" ");
pj.CONNECT=0;pj.DISCONNECT=1;pj.EVENT=2;pj.ACK=3;pj.ERROR=4;pj.BINARY_EVENT=5;pj.BINARY_ACK=6;pj.Encoder=n_;pj.Decoder=FH;var Uaa=pj.ERROR+'"encode error"';n_.prototype.encode=function(b,c){nO("encoding packet %j",b);pj.BINARY_EVENT===b.type||pj.BINARY_ACK===b.type?Vaa(b,c):(b=o_(b),c([b]))};wz(FH.prototype);FH.prototype.add=function(b){if("string"===typeof b){a:{var c=0,l={type:Number(b.charAt(0))};if(null==pj.types[l.type])b={type:pj.ERROR,data:"parser error: unknown packet type "+l.type};else{if(pj.BINARY_EVENT===
l.type||pj.BINARY_ACK===l.type){for(var a=c+1;"-"!==b.charAt(++c)&&c!=b.length;);a=b.substring(a,c);if(a!=Number(a)||"-"!==b.charAt(c))throw Error("Illegal attachments");l.attachments=Number(a)}if("/"===b.charAt(c+1)){for(a=c+1;++c;){var f=b.charAt(c);if(","===f)break;if(c===b.length)break}l.nsp=b.substring(a,c)}else l.nsp="/";a=b.charAt(c+1);if(""!==a&&Number(a)==a){for(a=c+1;++c;){f=b.charAt(c);if(null==f||Number(f)!=f){--c;break}if(c===b.length)break}l.id=Number(b.substring(a,c+1))}if(b.charAt(++c)){c=
b.substr(c);try{var m=JSON.parse(c)}catch(q){m=!1}if(!1===m||l.type!==pj.ERROR&&!yR(m)){b={type:pj.ERROR,data:"parser error: invalid payload"};break a}else l.data=m}nO("decoded %s as %j",b,l);b=l}}pj.BINARY_EVENT===b.type||pj.BINARY_ACK===b.type?((this||um).reconstructor=new pO(b),0===(this||um).reconstructor.reconPack.attachments&&this.emit("decoded",b)):this.emit("decoded",b)}else if(D4(b)||b.base64)if((this||um).reconstructor){if(b=(this||um).reconstructor.takeBinaryData(b))(this||um).reconstructor=
null,this.emit("decoded",b)}else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+b);};FH.prototype.destroy=function(){(this||um).reconstructor&&(this||um).reconstructor.finishedReconstruction()};pO.prototype.takeBinaryData=function(b){(this||um).buffers.push(b);return(this||um).buffers.length===(this||um).reconPack.attachments?(b=oO.reconstructPacket((this||um).reconPack,(this||um).buffers),this.finishedReconstruction(),b):null};pO.prototype.finishedReconstruction=
function(){(this||um).reconPack=null;(this||um).buffers=[]};var AR={};try{AR="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(b){AR=!1}var ola=AR,pla={},BR=pla="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")(),qla={},CR=qla=function(b){var c=b.xdomain,l=b.xscheme;b=b.enablesXDR;try{if("undefined"!==typeof XMLHttpRequest&&(!c||ola))return new XMLHttpRequest}catch(a){}try{if("undefined"!==typeof XDomainRequest&&!l&&b)return new XDomainRequest}catch(a){}if(!c)try{return new (BR[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(a){}},
rla={},qO=$g.Buffer,Waa=yR,G4=Object.prototype.toString,Xaa="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===G4.call(Blob),Yaa="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===G4.call(File),DR=rla=GH,sla={},sK=sla=function(b,c,l){var a=b.byteLength;c=c||0;l=l||a;if(b.slice)return b.slice(c,l);0>c&&(c+=a);0>l&&(l+=a);l>a&&(l=a);if(c>=a||c>=l||0===a)return new ArrayBuffer(0);b=new Uint8Array(b);a=new Uint8Array(l-c);for(var f=0;c<l;c++,
f++)a[f]=b[c];return a.buffer},tla={},ula=tla=function(b,c,l){function a(m,q){if(0>=a.count)throw Error("after called too many times");--a.count;m?(f=!0,c(m),c=l):0!==a.count||f||c(null,q)}var f=!1;l=l||Zaa;a.count=b;return 0===b?c():a},ER={};(function(b){ER.encode=function(c){c=new Uint8Array(c);var l,a=c.length,f="";for(l=0;l<a;l+=3)f+=b[c[l]>>2],f+=b[(c[l]&3)<<4|c[l+1]>>4],f+=b[(c[l+1]&15)<<2|c[l+2]>>6],f+=b[c[l+2]&63];2===a%3?f=f.substring(0,f.length-1)+"=":1===a%3&&(f=f.substring(0,f.length-
2)+"==");return f};ER.decode=function(c){var l=.75*c.length,a=c.length,f=0;"="===c[c.length-1]&&(l--,"="===c[c.length-2]&&l--);var m=new ArrayBuffer(l),q=new Uint8Array(m);for(l=0;l<a;l+=4){var r=b.indexOf(c[l]);var u=b.indexOf(c[l+1]);var v=b.indexOf(c[l+2]);var y=b.indexOf(c[l+3]);q[f++]=r<<2|u>>4;q[f++]=(u&15)<<4|v>>2;q[f++]=(v&3)<<6|y&63}return m}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");var H4={},SA="undefined"!==typeof SA?SA:"undefined"!==typeof WebKitBlobBuilder?
WebKitBlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:!1;try{var FR=2===(new Blob(["hi"])).size}catch(b){FR=!1}var tK;if(tK=FR)try{tK=2===(new Blob([new Uint8Array([1,2])])).size}catch(b){tK=!1}var vla=tK,wla=SA&&SA.prototype.append&&SA.prototype.getBlob;"undefined"!==typeof Blob&&(q_.prototype=Blob.prototype,r_.prototype=Blob.prototype);H4=FR?vla?Blob:r_:wla?q_:void 0;var up=H4,xla={},yla=xla=Object.keys||function(b){var c=[],l=Object.prototype.hasOwnProperty,
a;for(a in b)l.call(b,a)&&c.push(a);return c},I4={},Kt=String.fromCharCode,IH,HH,Dw;I4={version:"2.1.2",encode:function(b,c){c=c||{};c=!1!==c.strict;b=s_(b);for(var l=b.length,a=-1,f,m="";++a<l;){f=b[a];var q=c;if(0==(f&4294967168))f=Kt(f);else{var r="";0==(f&4294965248)?r=Kt(f>>6&31|192):0==(f&4294901760)?(t_(f,q)||(f=65533),r=Kt(f>>12&15|224),r+=Kt(f>>6&63|128)):0==(f&4292870144)&&(r=Kt(f>>18&7|240),r+=Kt(f>>12&63|128),r+=Kt(f>>6&63|128));f=r+=Kt(f&63|128)}m+=f}return m},decode:function(b,c){c=
c||{};c=!1!==c.strict;IH=s_(b);HH=IH.length;Dw=0;b=[];for(var l;!1!==(l=$aa(c));)b.push(l);c=b.length;l=-1;for(var a,f="";++l<c;)a=b[l],65535<a&&(a-=65536,f+=Kt(a>>>10&1023|55296),a=56320|a&1023),f+=Kt(a);return f}};var xi={},bba=ula,J4=I4,GR;"undefined"!==typeof ArrayBuffer&&(GR=ER);var zla="undefined"!==typeof navigator&&/Android/i.test(navigator.userAgent),Ala="undefined"!==typeof navigator&&/PhantomJS/i.test(navigator.userAgent),K4=zla||Ala;xi.protocol=3;var uK=xi.packets={open:0,close:1,ping:2,
pong:3,message:4,upgrade:5,noop:6},NE=yla(uK),bs={type:"error",data:"parser error"};xi.encodePacket=function(b,c,l,a){"function"===typeof c&&(a=c,c=!1);"function"===typeof l&&(a=l,l=null);var f=void 0===b.data?void 0:b.data.buffer||b.data;if("undefined"!==typeof ArrayBuffer&&f instanceof ArrayBuffer){if(c){l=b.data;c=new Uint8Array(l);l=new Uint8Array(1+l.byteLength);l[0]=uK[b.type];for(b=0;b<c.length;b++)l[b+1]=c[b];b=a(l.buffer)}else b=xi.encodeBase64Packet(b,a);return b}if("undefined"!==typeof up&&
f instanceof up)return c?K4?b=aba(b,c,a):(c=new Uint8Array(1),c[0]=uK[b.type],b=new up([c.buffer,b.data]),b=a(b)):b=xi.encodeBase64Packet(b,a),b;if(f&&f.base64)return a("b"+xi.packets[b.type]+b.data.data);c=uK[b.type];void 0!==b.data&&(c+=l?J4.encode(String(b.data),{strict:!1}):String(b.data));return a(""+c)};xi.encodeBase64Packet=function(b,c){var l="b"+xi.packets[b.type];if("undefined"!==typeof up&&b.data instanceof up){var a=new FileReader;a.onload=function(){var q=a.result.split(",")[1];c(l+q)};
return a.readAsDataURL(b.data)}try{var f=String.fromCharCode.apply(null,new Uint8Array(b.data))}catch(q){b=new Uint8Array(b.data);f=Array(b.length);for(var m=0;m<b.length;m++)f[m]=b[m];f=String.fromCharCode.apply(null,f)}l+=btoa(f);return c(l)};xi.decodePacket=function(b,c,l){if(void 0===b)return bs;if("string"===typeof b){if("b"===b.charAt(0))return xi.decodeBase64Packet(b.substr(1),c);if(l){a:{c=b;try{c=J4.decode(c,{strict:!1})}catch(a){b=!1;break a}b=c}if(!1===b)return bs}l=b.charAt(0);return Number(l)==
l&&NE[l]?1<b.length?{type:NE[l],data:b.substring(1)}:{type:NE[l]}:bs}l=(new Uint8Array(b))[0];b=sK(b,1);up&&"blob"===c&&(b=new up([b]));return{type:NE[l],data:b}};xi.decodeBase64Packet=function(b,c){var l=NE[b.charAt(0)];if(!GR)return{type:l,data:{base64:!0,data:b.substr(1)}};b=GR.decode(b.substr(1));"blob"===c&&up&&(b=new up([b]));return{type:l,data:b}};xi.encodePayload=function(b,c,l){"function"===typeof c&&(l=c,c=null);var a=DR(b);if(c&&a)return up&&!K4?xi.encodePayloadAsBlob(b,l):xi.encodePayloadAsArrayBuffer(b,
l);if(!b.length)return l("0:");rO(b,function(f,m){xi.encodePacket(f,a?c:!1,!1,function(q){m(null,q.length+":"+q)})},function(f,m){return l(m.join(""))})};xi.decodePayload=function(b,c,l){if("string"!==typeof b)return xi.decodePayloadAsBinary(b,c,l);"function"===typeof c&&(l=c,c=null);if(""===b)return l(bs,0,1);var a="";for(var f,m,q=0,r=b.length;q<r;q++)if(m=b.charAt(q),":"!==m)a+=m;else{if(""===a||a!=(f=Number(a)))return l(bs,0,1);m=b.substr(q+1,f);if(a!=m.length)return l(bs,0,1);if(m.length){a=
xi.decodePacket(m,c,!1);if(bs.type===a.type&&bs.data===a.data)return l(bs,0,1);if(!1===l(a,q+f,r))return}q+=f;a=""}if(""!==a)return l(bs,0,1)};xi.encodePayloadAsArrayBuffer=function(b,c){if(!b.length)return c(new ArrayBuffer(0));rO(b,function(l,a){xi.encodePacket(l,!0,!0,function(f){return a(null,f)})},function(l,a){l=a.reduce(function(q,r){r="string"===typeof r?r.length:r.byteLength;return q+r.toString().length+r+2},0);var f=new Uint8Array(l),m=0;a.forEach(function(q){var r="string"===typeof q,u=
q;if(r){u=new Uint8Array(q.length);for(var v=0;v<q.length;v++)u[v]=q.charCodeAt(v);u=u.buffer}r?f[m++]=0:f[m++]=1;q=u.byteLength.toString();for(v=0;v<q.length;v++)f[m++]=parseInt(q[v]);f[m++]=255;u=new Uint8Array(u);for(v=0;v<u.length;v++)f[m++]=u[v]});return c(f.buffer)})};xi.encodePayloadAsBlob=function(b,c){rO(b,function(l,a){xi.encodePacket(l,!0,!0,function(f){var m=new Uint8Array(1);m[0]=1;if("string"===typeof f){for(var q=new Uint8Array(f.length),r=0;r<f.length;r++)q[r]=f.charCodeAt(r);f=q.buffer;
m[0]=0}q=(f instanceof ArrayBuffer?f.byteLength:f.size).toString();var u=new Uint8Array(q.length+1);for(r=0;r<q.length;r++)u[r]=parseInt(q[r]);u[q.length]=255;up&&(f=new up([m.buffer,u.buffer,f]),a(null,f))})},function(l,a){return c(new up(a))})};xi.decodePayloadAsBinary=function(b,c,l){"function"===typeof c&&(l=c,c=null);for(var a=[];0<b.byteLength;){for(var f=new Uint8Array(b),m=0===f[0],q="",r=1;255!==f[r];r++){if(310<q.length)return l(bs,0,1);q+=f[r]}b=sK(b,2+q.length);q=parseInt(q);f=sK(b,0,
q);if(m)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(v){for(m=new Uint8Array(f),f="",r=0;r<m.length;r++)f+=String.fromCharCode(m[r])}a.push(f);b=sK(b,q)}var u=a.length;a.forEach(function(v,y){l(xi.decodePacket(v,c,!0),y,u)})};for(var vK={encode:function(b){var c="",l;for(l in b)b.hasOwnProperty(l)&&(c.length&&(c+="&"),c+=encodeURIComponent(l)+"="+encodeURIComponent(b[l]));return c},decode:function(b){var c={};b=b.split("&");for(var l=0,a=b.length;l<a;l++){var f=b[l].split("=");c[decodeURIComponent(f[0])]=
decodeURIComponent(f[1])}return c}},Bla={},wK=Bla=function(b,c){var l=function(){};l.prototype=c.prototype;b.prototype=new l;b.prototype.constructor=b},Cla={},u_="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),L4={},w_=0,gx=0,v_;64>gx;gx++)L4[u_[gx]]=gx;tO.encode=sO;tO.decode=function(b){var c=0;for(gx=0;gx<b.length;gx++)c=64*c+L4[b.charAt(gx)];return c};var M4=Cla=tO,Vh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,N4={},Dla=xi;N4=lt;
wz(lt.prototype);lt.prototype.onError=function(b,c){b=Error(b);b.type="TransportError";b.description=c;this.emit("error",b);return this||Vh};lt.prototype.open=function(){if("closed"===(this||Vh).readyState||""===(this||Vh).readyState)(this||Vh).readyState="opening",this.doOpen();return this||Vh};lt.prototype.close=function(){if("opening"===(this||Vh).readyState||"open"===(this||Vh).readyState)this.doClose(),this.onClose();return this||Vh};lt.prototype.send=function(b){if("open"===(this||Vh).readyState)this.write(b);
else throw Error("Transport not open");};lt.prototype.onOpen=function(){(this||Vh).readyState="open";(this||Vh).writable=!0;this.emit("open")};lt.prototype.onData=function(b){b=Dla.decodePacket(b,(this||Vh).socket.binaryType);this.onPacket(b)};lt.prototype.onPacket=function(b){this.emit("packet",b)};lt.prototype.onClose=function(){(this||Vh).readyState="closed";this.emit("close")};var HR=N4,ni="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,O4={},x_=HR,P4=xi,cs=qv("engine.io-client:polling");
O4=mt;var cba=null!=(new CR({xdomain:!1})).responseType;wK(mt,x_);mt.prototype.name="polling";mt.prototype.doOpen=function(){this.poll()};mt.prototype.pause=function(b){function c(){cs("paused");l.readyState="paused";b()}var l=this||ni;(this||ni).readyState="pausing";if((this||ni).polling||!(this||ni).writable){var a=0;(this||ni).polling&&(cs("we are currently polling - waiting to pause"),a++,this.once("pollComplete",function(){cs("pre-pause polling complete");--a||c()}));(this||ni).writable||(cs("we are currently writing - waiting to pause"),
a++,this.once("drain",function(){cs("pre-pause writing complete");--a||c()}))}else c()};mt.prototype.poll=function(){cs("polling");(this||ni).polling=!0;this.doPoll();this.emit("poll")};mt.prototype.onData=function(b){var c=this||ni;cs("polling got data %s",b);P4.decodePayload(b,(this||ni).socket.binaryType,function(l,a,f){if("opening"===c.readyState)c.onOpen();if("close"===l.type)return c.onClose(),!1;c.onPacket(l)});"closed"!==(this||ni).readyState&&((this||ni).polling=!1,this.emit("pollComplete"),
"open"===(this||ni).readyState?this.poll():cs('ignoring poll - transport state "%s"',(this||ni).readyState))};mt.prototype.doClose=function(){function b(){cs("writing close packet");c.write([{type:"close"}])}var c=this||ni;"open"===(this||ni).readyState?(cs("transport open - closing"),b()):(cs("transport not open - deferring close"),this.once("open",b))};mt.prototype.write=function(b){var c=this||ni;(this||ni).writable=!1;var l=function(){c.writable=!0;c.emit("drain")};P4.encodePayload(b,(this||ni).supportsBinary,
function(a){c.doWrite(a,l)})};mt.prototype.uri=function(){var b=(this||ni).query||{},c=(this||ni).secure?"https":"http",l="";!1!==(this||ni).timestampRequests&&(b[(this||ni).timestampParam]=M4());(this||ni).supportsBinary||b.sid||(b.b64=1);b=vK.encode(b);(this||ni).port&&("https"===c&&443!==Number((this||ni).port)||"http"===c&&80!==Number((this||ni).port))&&(l=":"+(this||ni).port);b.length&&(b="?"+b);var a=-1!==(this||ni).hostname.indexOf(":");return c+"://"+(a?"["+(this||ni).hostname+"]":(this||
ni).hostname)+l+(this||ni).path+b};var Q4=O4,qe="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,IR={},z_=Q4,JR=qv("engine.io-client:polling-xhr");IR=UA;IR.Request=xl;wK(UA,z_);UA.prototype.supportsBinary=!0;UA.prototype.request=function(b){b=b||{};b.uri=this.uri();b.xd=(this||qe).xd;b.xs=(this||qe).xs;b.agent=(this||qe).agent||!1;b.supportsBinary=(this||qe).supportsBinary;b.enablesXDR=(this||qe).enablesXDR;b.withCredentials=(this||qe).withCredentials;b.pfx=(this||
qe).pfx;b.key=(this||qe).key;b.passphrase=(this||qe).passphrase;b.cert=(this||qe).cert;b.ca=(this||qe).ca;b.ciphers=(this||qe).ciphers;b.rejectUnauthorized=(this||qe).rejectUnauthorized;b.requestTimeout=(this||qe).requestTimeout;b.extraHeaders=(this||qe).extraHeaders;return new xl(b)};UA.prototype.doWrite=function(b,c){b=this.request({method:"POST",data:b,isBinary:"string"!==typeof b&&void 0!==b});var l=this||qe;b.on("success",c);b.on("error",function(a){l.onError("xhr post error",a)});(this||qe).sendXhr=
b};UA.prototype.doPoll=function(){JR("xhr poll");var b=this.request(),c=this||qe;b.on("data",function(l){c.onData(l)});b.on("error",function(l){c.onError("xhr poll error",l)});(this||qe).pollXhr=b};wz(xl.prototype);xl.prototype.create=function(){var b={agent:(this||qe).agent,xdomain:(this||qe).xd,xscheme:(this||qe).xs,enablesXDR:(this||qe).enablesXDR};b.pfx=(this||qe).pfx;b.key=(this||qe).key;b.passphrase=(this||qe).passphrase;b.cert=(this||qe).cert;b.ca=(this||qe).ca;b.ciphers=(this||qe).ciphers;
b.rejectUnauthorized=(this||qe).rejectUnauthorized;var c=(this||qe).xhr=new CR(b),l=this||qe;try{JR("xhr open %s: %s",(this||qe).method,(this||qe).uri);c.open((this||qe).method,(this||qe).uri,(this||qe).async);try{if((this||qe).extraHeaders){c.setDisableHeaderCheck&&c.setDisableHeaderCheck(!0);for(var a in(this||qe).extraHeaders)(this||qe).extraHeaders.hasOwnProperty(a)&&c.setRequestHeader(a,(this||qe).extraHeaders[a])}}catch(f){}if("POST"===(this||qe).method)try{(this||qe).isBinary?c.setRequestHeader("Content-type",
"application/octet-stream"):c.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(f){}try{c.setRequestHeader("Accept","*/*")}catch(f){}"withCredentials"in c&&(c.withCredentials=(this||qe).withCredentials);(this||qe).requestTimeout&&(c.timeout=(this||qe).requestTimeout);this.hasXDR()?(c.onload=function(){l.onLoad()},c.onerror=function(){l.onError(c.responseText)}):c.onreadystatechange=function(){if(2===c.readyState)try{var f=c.getResponseHeader("Content-Type");if(l.supportsBinary&&"application/octet-stream"===
f||"application/octet-stream; charset=UTF-8"===f)c.responseType="arraybuffer"}catch(m){}if(4===c.readyState)if(200===c.status||1223===c.status)l.onLoad();else setTimeout(function(){l.onError("number"===typeof c.status?c.status:0)},0)};JR("xhr data %s",(this||qe).data);c.send((this||qe).data)}catch(f){setTimeout(function(){l.onError(f)},0);return}"undefined"!==typeof document&&((this||qe).index=xl.requestsCount++,xl.requests[(this||qe).index]=this||qe)};xl.prototype.onSuccess=function(){this.emit("success");
this.cleanup()};xl.prototype.onData=function(b){this.emit("data",b);this.onSuccess()};xl.prototype.onError=function(b){this.emit("error",b);this.cleanup(!0)};xl.prototype.cleanup=function(b){if("undefined"!==typeof(this||qe).xhr&&null!==(this||qe).xhr){this.hasXDR()?(this||qe).xhr.onload=(this||qe).xhr.onerror=y_:(this||qe).xhr.onreadystatechange=y_;if(b)try{(this||qe).xhr.abort()}catch(c){}"undefined"!==typeof document&&delete xl.requests[(this||qe).index];(this||qe).xhr=null}};xl.prototype.onLoad=
function(){try{try{var b=(this||qe).xhr.getResponseHeader("Content-Type")}catch(l){}var c="application/octet-stream"===b||"application/octet-stream; charset=UTF-8"===b?(this||qe).xhr.response||(this||qe).xhr.responseText:(this||qe).xhr.responseText}catch(l){this.onError(l)}if(null!=c)this.onData(c)};xl.prototype.hasXDR=function(){return"undefined"!==typeof XDomainRequest&&!(this||qe).xs&&(this||qe).enablesXDR};xl.prototype.abort=function(){this.cleanup()};xl.requestsCount=0;xl.requests={};"undefined"!==
typeof document&&("function"===typeof attachEvent?attachEvent("onunload",A_):"function"===typeof addEventListener&&addEventListener("onpagehide"in BR?"pagehide":"unload",A_,!1));var Ela=IR,Fla={},Gla=[].indexOf,KR=Fla=function(b,c){if(Gla)return b.indexOf(c);for(var l=0;l<b.length;++l)if(b[l]===c)return l;return-1},ai="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,R4={},uO=Q4,B_=BR;R4=VA;var Hla=/\n/g,Ila=/\\n/g,JH;wK(VA,uO);VA.prototype.supportsBinary=!1;VA.prototype.doClose=
function(){(this||ai).script&&((this||ai).script.parentNode.removeChild((this||ai).script),(this||ai).script=null);(this||ai).form&&((this||ai).form.parentNode.removeChild((this||ai).form),(this||ai).form=null,(this||ai).iframe=null);uO.prototype.doClose.call(this||ai)};VA.prototype.doPoll=function(){var b=this||ai,c=document.createElement("script");(this||ai).script&&((this||ai).script.parentNode.removeChild((this||ai).script),(this||ai).script=null);c.async=!0;c.src=this.uri();c.onerror=function(a){b.onError("jsonp poll error",
a)};var l=document.getElementsByTagName("script")[0];l?l.parentNode.insertBefore(c,l):(document.head||document.body).appendChild(c);(this||ai).script=c;"undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a);document.body.removeChild(a)},100)};VA.prototype.doWrite=function(b,c){function l(){a();c()}function a(){if(f.iframe)try{f.form.removeChild(f.iframe)}catch(v){f.onError("jsonp polling iframe removal error",
v)}try{u=document.createElement('<iframe src="javascript:0" name="'+f.iframeId+'">')}catch(v){u=document.createElement("iframe"),u.name=f.iframeId,u.src="javascript:0"}u.id=f.iframeId;f.form.appendChild(u);f.iframe=u}var f=this||ai;if(!(this||ai).form){var m=document.createElement("form"),q=document.createElement("textarea"),r=(this||ai).iframeId="eio_iframe_"+(this||ai).index,u;m.className="socketio";m.style.position="absolute";m.style.top="-1000px";m.style.left="-1000px";m.target=r;m.method="POST";
m.setAttribute("accept-charset","utf-8");q.name="d";m.appendChild(q);document.body.appendChild(m);(this||ai).form=m;(this||ai).area=q}(this||ai).form.action=this.uri();a();b=b.replace(Ila,"\\\n");(this||ai).area.value=b.replace(Hla,"\\n");try{(this||ai).form.submit()}catch(v){}(this||ai).iframe.attachEvent?(this||ai).iframe.onreadystatechange=function(){"complete"===f.iframe.readyState&&l()}:(this||ai).iframe.onload=l};var Jla=R4,Kla=Object.freeze({}),Pf="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,S4={},Lla=$g.Buffer,vO=HR,Mla=xi,Nla=qv("engine.io-client:websocket"),KH;"undefined"!==typeof WebSocket?KH=WebSocket:"undefined"!==typeof self&&(KH=self.WebSocket||self.MozWebSocket);if("undefined"===typeof window)try{var C_=Kla}catch(b){}var WA=KH||C_;S4=lq;wK(lq,vO);lq.prototype.name="websocket";lq.prototype.supportsBinary=!0;lq.prototype.doOpen=function(){if(this.check()){var b=this.uri(),c=(this||Pf).protocols,l={};(this||Pf).isReactNative||(l.agent=(this||
Pf).agent,l.perMessageDeflate=(this||Pf).perMessageDeflate,l.pfx=(this||Pf).pfx,l.key=(this||Pf).key,l.passphrase=(this||Pf).passphrase,l.cert=(this||Pf).cert,l.ca=(this||Pf).ca,l.ciphers=(this||Pf).ciphers,l.rejectUnauthorized=(this||Pf).rejectUnauthorized);(this||Pf).extraHeaders&&(l.headers=(this||Pf).extraHeaders);(this||Pf).localAddress&&(l.localAddress=(this||Pf).localAddress);try{(this||Pf).ws=(this||Pf).usingBrowserWebSocket&&!(this||Pf).isReactNative?c?new WA(b,c):new WA(b):new WA(b,c,l)}catch(a){return this.emit("error",
a)}void 0===(this||Pf).ws.binaryType&&((this||Pf).supportsBinary=!1);(this||Pf).ws.supports&&(this||Pf).ws.supports.binary?((this||Pf).supportsBinary=!0,(this||Pf).ws.binaryType="nodebuffer"):(this||Pf).ws.binaryType="arraybuffer";this.addEventListeners()}};lq.prototype.addEventListeners=function(){var b=this||Pf;(this||Pf).ws.onopen=function(){b.onOpen()};(this||Pf).ws.onclose=function(){b.onClose()};(this||Pf).ws.onmessage=function(c){b.onData(c.data)};(this||Pf).ws.onerror=function(c){b.onError("websocket error",
c)}};lq.prototype.write=function(b){function c(){l.emit("flush");setTimeout(function(){l.writable=!0;l.emit("drain")},0)}var l=this||Pf;(this||Pf).writable=!1;for(var a=b.length,f=0,m=a;f<m;f++)(function(q){Mla.encodePacket(q,l.supportsBinary,function(r){if(!l.usingBrowserWebSocket){var u={};q.options&&(u.compress=q.options.compress);l.perMessageDeflate&&("string"===typeof r?Lla.byteLength(r):r.length)<l.perMessageDeflate.threshold&&(u.compress=!1)}try{l.usingBrowserWebSocket?l.ws.send(r):l.ws.send(r,
u)}catch(v){Nla("websocket closed before onclose event")}--a||c()})})(b[f])};lq.prototype.onClose=function(){vO.prototype.onClose.call(this||Pf)};lq.prototype.doClose=function(){"undefined"!==typeof(this||Pf).ws&&(this||Pf).ws.close()};lq.prototype.uri=function(){var b=(this||Pf).query||{},c=(this||Pf).secure?"wss":"ws",l="";(this||Pf).port&&("wss"===c&&443!==Number((this||Pf).port)||"ws"===c&&80!==Number((this||Pf).port))&&(l=":"+(this||Pf).port);(this||Pf).timestampRequests&&(b[(this||Pf).timestampParam]=
M4());(this||Pf).supportsBinary||(b.b64=1);b=vK.encode(b);b.length&&(b="?"+b);var a=-1!==(this||Pf).hostname.indexOf(":");return c+"://"+(a?"["+(this||Pf).hostname+"]":(this||Pf).hostname)+l+(this||Pf).path+b};lq.prototype.check=function(){return!!WA&&!("__initialize"in WA&&(this||Pf).name===lq.prototype.name)};var xK={},Ola=S4;xK.polling=function(b){var c=!1,l=!1,a=!1!==b.jsonp;"undefined"!==typeof location&&(l="https:"===location.protocol,(c=location.port)||(c=l?443:80),c=b.hostname!==location.hostname||
c!==b.port,l=b.secure!==l);b.xdomain=c;b.xscheme=l;if("open"in new CR(b)&&!b.forceJSONP)return new Ela(b);if(!a)throw Error("JSONP disabled");return new Jla(b)};xK.websocket=Ola;var gd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,T4={},al=qv("engine.io-client:socket"),U4=xi,D_=A4,eba=vK;T4=bi;bi.priorWebsocketSuccess=!1;wz(bi.prototype);bi.protocol=U4.protocol;bi.Socket=bi;bi.Transport=HR;bi.transports=xK;bi.parser=xi;bi.prototype.createTransport=function(b){al('creating transport "%s"',
b);var c=(this||gd).query,l={},a;for(a in c)c.hasOwnProperty(a)&&(l[a]=c[a]);l.EIO=U4.protocol;l.transport=b;c=(this||gd).transportOptions[b]||{};(this||gd).id&&(l.sid=(this||gd).id);return new xK[b]({query:l,socket:this||gd,agent:c.agent||(this||gd).agent,hostname:c.hostname||(this||gd).hostname,port:c.port||(this||gd).port,secure:c.secure||(this||gd).secure,path:c.path||(this||gd).path,forceJSONP:c.forceJSONP||(this||gd).forceJSONP,jsonp:c.jsonp||(this||gd).jsonp,forceBase64:c.forceBase64||(this||
gd).forceBase64,enablesXDR:c.enablesXDR||(this||gd).enablesXDR,withCredentials:c.withCredentials||(this||gd).withCredentials,timestampRequests:c.timestampRequests||(this||gd).timestampRequests,timestampParam:c.timestampParam||(this||gd).timestampParam,policyPort:c.policyPort||(this||gd).policyPort,pfx:c.pfx||(this||gd).pfx,key:c.key||(this||gd).key,passphrase:c.passphrase||(this||gd).passphrase,cert:c.cert||(this||gd).cert,ca:c.ca||(this||gd).ca,ciphers:c.ciphers||(this||gd).ciphers,rejectUnauthorized:c.rejectUnauthorized||
(this||gd).rejectUnauthorized,perMessageDeflate:c.perMessageDeflate||(this||gd).perMessageDeflate,extraHeaders:c.extraHeaders||(this||gd).extraHeaders,forceNode:c.forceNode||(this||gd).forceNode,localAddress:c.localAddress||(this||gd).localAddress,requestTimeout:c.requestTimeout||(this||gd).requestTimeout,protocols:c.protocols||void 0,isReactNative:(this||gd).isReactNative})};bi.prototype.open=function(){if((this||gd).rememberUpgrade&&bi.priorWebsocketSuccess&&-1!==(this||gd).transports.indexOf("websocket"))var b=
"websocket";else{if(0===(this||gd).transports.length){var c=this||gd;setTimeout(function(){c.emit("error","No transports available")},0);return}b=(this||gd).transports[0]}(this||gd).readyState="opening";try{b=this.createTransport(b)}catch(l){(this||gd).transports.shift();this.open();return}b.open();this.setTransport(b)};bi.prototype.setTransport=function(b){al("setting transport %s",b.name);var c=this||gd;(this||gd).transport&&(al("clearing existing transport %s",(this||gd).transport.name),(this||
gd).transport.removeAllListeners());(this||gd).transport=b;b.on("drain",function(){c.onDrain()}).on("packet",function(l){c.onPacket(l)}).on("error",function(l){c.onError(l)}).on("close",function(){c.onClose("transport close")})};bi.prototype.probe=function(b){function c(){if(y.onlyBinaryUpgrades){var z=!(this||gd).supportsBinary&&y.transport.supportsBinary;v=v||z}v||(al('probe transport "%s" opened',b),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(A){v||("pong"===A.type&&"probe"===
A.data?(al('probe transport "%s" pong',b),y.upgrading=!0,y.emit("upgrading",u),u&&(bi.priorWebsocketSuccess="websocket"===u.name,al('pausing current transport "%s"',y.transport.name),y.transport.pause(function(){v||"closed"===y.readyState||(al("changing transport and sending upgrade packet"),r(),y.setTransport(u),u.send([{type:"upgrade"}]),y.emit("upgrade",u),u=null,y.upgrading=!1,y.flush())}))):(al('probe transport "%s" failed',b),A=Error("probe error"),A.transport=u.name,y.emit("upgradeError",A)))}))}
function l(){v||(v=!0,r(),u.close(),u=null)}function a(z){var A=Error("probe error: "+z);A.transport=u.name;l();al('probe transport "%s" failed because of error: %s',b,z);y.emit("upgradeError",A)}function f(){a("transport closed")}function m(){a("socket closed")}function q(z){u&&z.name!==u.name&&(al('"%s" works - aborting "%s"',z.name,u.name),l())}function r(){u.removeListener("open",c);u.removeListener("error",a);u.removeListener("close",f);y.removeListener("close",m);y.removeListener("upgrading",
q)}al('probing transport "%s"',b);var u=this.createTransport(b,{probe:1}),v=!1,y=this||gd;bi.priorWebsocketSuccess=!1;u.once("open",c);u.once("error",a);u.once("close",f);this.once("close",m);this.once("upgrading",q);u.open()};bi.prototype.onOpen=function(){al("socket open");(this||gd).readyState="open";bi.priorWebsocketSuccess="websocket"===(this||gd).transport.name;this.emit("open");this.flush();if("open"===(this||gd).readyState&&(this||gd).upgrade&&(this||gd).transport.pause){al("starting upgrade probes");
for(var b=0,c=(this||gd).upgrades.length;b<c;b++)this.probe((this||gd).upgrades[b])}};bi.prototype.onPacket=function(b){if("opening"===(this||gd).readyState||"open"===(this||gd).readyState||"closing"===(this||gd).readyState)switch(al('socket receive: type "%s", data "%s"',b.type,b.data),this.emit("packet",b),this.emit("heartbeat"),b.type){case "open":this.onHandshake(JSON.parse(b.data));break;case "pong":this.setPing();this.emit("pong");break;case "error":var c=Error("server error");c.code=b.data;
this.onError(c);break;case "message":this.emit("data",b.data),this.emit("message",b.data)}else al('packet received with socket readyState "%s"',(this||gd).readyState)};bi.prototype.onHandshake=function(b){this.emit("handshake",b);(this||gd).id=b.sid;(this||gd).transport.query.sid=b.sid;(this||gd).upgrades=this.filterUpgrades(b.upgrades);(this||gd).pingInterval=b.pingInterval;(this||gd).pingTimeout=b.pingTimeout;this.onOpen();"closed"!==(this||gd).readyState&&(this.setPing(),this.removeListener("heartbeat",
(this||gd).onHeartbeat),this.on("heartbeat",(this||gd).onHeartbeat))};bi.prototype.onHeartbeat=function(b){clearTimeout((this||gd).pingTimeoutTimer);var c=this||gd;c.pingTimeoutTimer=setTimeout(function(){if("closed"!==c.readyState)c.onClose("ping timeout")},b||c.pingInterval+c.pingTimeout)};bi.prototype.setPing=function(){var b=this||gd;clearTimeout(b.pingIntervalTimer);b.pingIntervalTimer=setTimeout(function(){al("writing ping packet - expecting pong within %sms",b.pingTimeout);b.ping();b.onHeartbeat(b.pingTimeout)},
b.pingInterval)};bi.prototype.ping=function(){var b=this||gd;this.sendPacket("ping",function(){b.emit("ping")})};bi.prototype.onDrain=function(){(this||gd).writeBuffer.splice(0,(this||gd).prevBufferLen);(this||gd).prevBufferLen=0;0===(this||gd).writeBuffer.length?this.emit("drain"):this.flush()};bi.prototype.flush=function(){"closed"!==(this||gd).readyState&&(this||gd).transport.writable&&!(this||gd).upgrading&&(this||gd).writeBuffer.length&&(al("flushing %d packets in socket",(this||gd).writeBuffer.length),
(this||gd).transport.send((this||gd).writeBuffer),(this||gd).prevBufferLen=(this||gd).writeBuffer.length,this.emit("flush"))};bi.prototype.write=bi.prototype.send=function(b,c,l){this.sendPacket("message",b,c,l);return this||gd};bi.prototype.sendPacket=function(b,c,l,a){"function"===typeof c&&(a=c,c=void 0);"function"===typeof l&&(a=l,l=null);if("closing"!==(this||gd).readyState&&"closed"!==(this||gd).readyState){l=l||{};l.compress=!1!==l.compress;b={type:b,data:c,options:l};this.emit("packetCreate",
b);(this||gd).writeBuffer.push(b);if(a)this.once("flush",a);this.flush()}};bi.prototype.close=function(){function b(){a.onClose("forced close");al("socket closing - telling transport to close");a.transport.close()}function c(){a.removeListener("upgrade",c);a.removeListener("upgradeError",c);b()}function l(){a.once("upgrade",c);a.once("upgradeError",c)}if("opening"===(this||gd).readyState||"open"===(this||gd).readyState){(this||gd).readyState="closing";var a=this||gd;if((this||gd).writeBuffer.length)this.once("drain",
function(){(this||gd).upgrading?l():b()});else(this||gd).upgrading?l():b()}return this||gd};bi.prototype.onError=function(b){al("socket error %j",b);bi.priorWebsocketSuccess=!1;this.emit("error",b);this.onClose("transport error",b)};bi.prototype.onClose=function(b,c){if("opening"===(this||gd).readyState||"open"===(this||gd).readyState||"closing"===(this||gd).readyState){al('socket close with reason: "%s"',b);var l=this||gd;clearTimeout((this||gd).pingIntervalTimer);clearTimeout((this||gd).pingTimeoutTimer);
(this||gd).transport.removeAllListeners("close");(this||gd).transport.close();(this||gd).transport.removeAllListeners();(this||gd).readyState="closed";(this||gd).id=null;this.emit("close",b,c);l.writeBuffer=[];l.prevBufferLen=0}};bi.prototype.filterUpgrades=function(b){for(var c=[],l=0,a=b.length;l<a;l++)~KR((this||gd).transports,b[l])&&c.push(b[l]);return c};var LR={};LR=T4;LR.parser=xi;var Pla=LR,Qla={},MR=Qla=function(b,c){for(var l=[],a=(c=c||0)||0;a<b.length;a++)l[a-c]=b[a];return l},Rla={},
V4=[].slice,rv=Rla=function(b,c){"string"==typeof c&&(c=b[c]);if("function"!=typeof c)throw Error("bind() requires a function");var l=V4.call(arguments,2);return function(){return c.apply(b,l.concat(V4.call(arguments)))}},Sla={},ds=Sla=function(b,c,l){b.on(c,l);return{destroy:function(){b.removeListener(c,l)}}},De="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,NR={},In=pj,es=qv("socket.io-client:socket");NR=NR=mk;var Tla={connect:1,connect_error:1,connect_timeout:1,
connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},OR=wz.prototype.emit;wz(mk.prototype);mk.prototype.subEvents=function(){if(!(this||De).subs){var b=(this||De).io;(this||De).subs=[ds(b,"open",rv(this||De,"onopen")),ds(b,"packet",rv(this||De,"onpacket")),ds(b,"close",rv(this||De,"onclose"))]}};mk.prototype.open=mk.prototype.connect=function(){if((this||De).connected)return this||De;this.subEvents();(this||De).io.reconnecting||
(this||De).io.open();if("open"===(this||De).io.readyState)this.onopen();this.emit("connecting");return this||De};mk.prototype.send=function(){var b=MR(arguments);b.unshift("message");(this||De).emit.apply(this||De,b);return this||De};mk.prototype.emit=function(b){if(Tla.hasOwnProperty(b))return OR.apply(this||De,arguments),this||De;var c=MR(arguments),l={type:(void 0!==(this||De).flags.binary?(this||De).flags.binary:DR(c))?In.BINARY_EVENT:In.EVENT,data:c,options:{}};l.options.compress=!(this||De).flags||
!1!==(this||De).flags.compress;"function"===typeof c[c.length-1]&&(es("emitting packet with ack id %d",(this||De).ids),(this||De).acks[(this||De).ids]=c.pop(),l.id=(this||De).ids++);(this||De).connected?this.packet(l):(this||De).sendBuffer.push(l);(this||De).flags={};return this||De};mk.prototype.packet=function(b){b.nsp=(this||De).nsp;(this||De).io.packet(b)};mk.prototype.onopen=function(){es("transport is open - connecting");if("/"!==(this||De).nsp)if((this||De).query){var b="object"===typeof(this||
De).query?vK.encode((this||De).query):(this||De).query;es("sending connect packet with query %s",b);this.packet({type:In.CONNECT,query:b})}else this.packet({type:In.CONNECT})};mk.prototype.onclose=function(b){es("close (%s)",b);(this||De).connected=!1;(this||De).disconnected=!0;delete (this||De).id;this.emit("disconnect",b)};mk.prototype.onpacket=function(b){var c=b.type===In.ERROR&&"/"===b.nsp;if(b.nsp===(this||De).nsp||c)switch(b.type){case In.CONNECT:this.onconnect();break;case In.EVENT:this.onevent(b);
break;case In.BINARY_EVENT:this.onevent(b);break;case In.ACK:this.onack(b);break;case In.BINARY_ACK:this.onack(b);break;case In.DISCONNECT:this.ondisconnect();break;case In.ERROR:this.emit("error",b.data)}};mk.prototype.onevent=function(b){var c=b.data||[];es("emitting event %j",c);null!=b.id&&(es("attaching ack callback to event"),c.push(this.ack(b.id)));(this||De).connected?OR.apply(this||De,c):(this||De).receiveBuffer.push(c)};mk.prototype.ack=function(b){var c=this||De,l=!1;return function(){if(!l){l=
!0;var a=MR(arguments);es("sending ack %j",a);c.packet({type:DR(a)?In.BINARY_ACK:In.ACK,id:b,data:a})}}};mk.prototype.onack=function(b){var c=(this||De).acks[b.id];"function"===typeof c?(es("calling ack %s with %j",b.id,b.data),c.apply(this||De,b.data),delete (this||De).acks[b.id]):es("bad ack %s",b.id)};mk.prototype.onconnect=function(){(this||De).connected=!0;(this||De).disconnected=!1;this.emit("connect");this.emitBuffered()};mk.prototype.emitBuffered=function(){var b;for(b=0;b<(this||De).receiveBuffer.length;b++)OR.apply(this||
De,(this||De).receiveBuffer[b]);(this||De).receiveBuffer=[];for(b=0;b<(this||De).sendBuffer.length;b++)this.packet((this||De).sendBuffer[b]);(this||De).sendBuffer=[]};mk.prototype.ondisconnect=function(){es("server disconnect (%s)",(this||De).nsp);this.destroy();this.onclose("io server disconnect")};mk.prototype.destroy=function(){if((this||De).subs){for(var b=0;b<(this||De).subs.length;b++)(this||De).subs[b].destroy();(this||De).subs=null}(this||De).io.destroy(this||De)};mk.prototype.close=mk.prototype.disconnect=
function(){(this||De).connected&&(es("performing disconnect (%s)",(this||De).nsp),this.packet({type:In.DISCONNECT}));this.destroy();if((this||De).connected)this.onclose("io client disconnect");return this||De};mk.prototype.compress=function(b){(this||De).flags.compress=b;return this||De};mk.prototype.binary=function(b){(this||De).flags.binary=b;return this||De};var W4=NR,An="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,X4={};X4=XA;XA.prototype.duration=function(){var b=
(this||An).ms*Math.pow((this||An).factor,(this||An).attempts++);if((this||An).jitter){var c=Math.random(),l=Math.floor(c*(this||An).jitter*b);b=0==(Math.floor(10*c)&1)?b-l:b+l}return Math.min(b,(this||An).max)|0};XA.prototype.reset=function(){(this||An).attempts=0};XA.prototype.setMin=function(b){(this||An).ms=b};XA.prototype.setMax=function(b){(this||An).max=b};XA.prototype.setJitter=function(b){(this||An).jitter=b};var Ula=X4,Vla={},Y4=qv("socket.io-client:url"),Wla=Vla=function(b,c){var l=b;c=
c||"undefined"!==typeof location&&location;null==b&&(b=c.protocol+"//"+c.host);"string"===typeof b&&("/"===b.charAt(0)&&(b="/"===b.charAt(1)?c.protocol+b:c.host+b),/^(https?|wss?):\/\//.test(b)||(Y4("protocol-less url %s",b),b="undefined"!==typeof c?c.protocol+"//"+b:"https://"+b),Y4("parse %s",b),l=A4(b));l.port||(/^(http|ws)$/.test(l.protocol)?l.port="80":/^(http|ws)s$/.test(l.protocol)&&(l.port="443"));l.path=l.path||"/";b=-1!==l.host.indexOf(":")?"["+l.host+"]":l.host;l.id=l.protocol+"://"+b+
":"+l.port;l.href=l.protocol+"://"+b+(c&&c.port===l.port?"":":"+l.port);return l},zd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Z4={},gba=pj,gn=qv("socket.io-client:manager"),fba=Ula,$4=Object.prototype.hasOwnProperty;Z4=yi;yi.prototype.emitAll=function(){(this||zd).emit.apply(this||zd,arguments);for(var b in(this||zd).nsps)$4.call((this||zd).nsps,b)&&(this||zd).nsps[b].emit.apply((this||zd).nsps[b],arguments)};yi.prototype.updateSocketIds=function(){for(var b in(this||
zd).nsps)$4.call((this||zd).nsps,b)&&((this||zd).nsps[b].id=this.generateId(b))};yi.prototype.generateId=function(b){return("/"===b?"":b+"#")+(this||zd).engine.id};wz(yi.prototype);yi.prototype.reconnection=function(b){if(!arguments.length)return(this||zd)._reconnection;(this||zd)._reconnection=!!b;return this||zd};yi.prototype.reconnectionAttempts=function(b){if(!arguments.length)return(this||zd)._reconnectionAttempts;(this||zd)._reconnectionAttempts=b;return this||zd};yi.prototype.reconnectionDelay=
function(b){if(!arguments.length)return(this||zd)._reconnectionDelay;(this||zd)._reconnectionDelay=b;(this||zd).backoff&&(this||zd).backoff.setMin(b);return this||zd};yi.prototype.randomizationFactor=function(b){if(!arguments.length)return(this||zd)._randomizationFactor;(this||zd)._randomizationFactor=b;(this||zd).backoff&&(this||zd).backoff.setJitter(b);return this||zd};yi.prototype.reconnectionDelayMax=function(b){if(!arguments.length)return(this||zd)._reconnectionDelayMax;(this||zd)._reconnectionDelayMax=
b;(this||zd).backoff&&(this||zd).backoff.setMax(b);return this||zd};yi.prototype.timeout=function(b){if(!arguments.length)return(this||zd)._timeout;(this||zd)._timeout=b;return this||zd};yi.prototype.maybeReconnectOnOpen=function(){!(this||zd).reconnecting&&(this||zd)._reconnection&&0===(this||zd).backoff.attempts&&this.reconnect()};yi.prototype.open=yi.prototype.connect=function(b,c){gn("readyState %s",(this||zd).readyState);if(~(this||zd).readyState.indexOf("open"))return this||zd;gn("opening %s",
(this||zd).uri);(this||zd).engine=Pla((this||zd).uri,(this||zd).opts);var l=(this||zd).engine,a=this||zd;(this||zd).readyState="opening";(this||zd).skipReconnect=!1;var f=ds(l,"open",function(){a.onopen();b&&b()});c=ds(l,"error",function(r){gn("connect_error");a.cleanup();a.readyState="closed";a.emitAll("connect_error",r);if(b){var u=Error("Connection error");u.data=r;b(u)}else a.maybeReconnectOnOpen()});if(!1!==(this||zd)._timeout){var m=(this||zd)._timeout;gn("connect attempt will timeout after %d",
m);0===m&&f.destroy();var q=setTimeout(function(){gn("connect attempt timed out after %d",m);f.destroy();l.close();l.emit("error","timeout");a.emitAll("connect_timeout",m)},m);(this||zd).subs.push({destroy:function(){clearTimeout(q)}})}(this||zd).subs.push(f);(this||zd).subs.push(c);return this||zd};yi.prototype.onopen=function(){gn("open");this.cleanup();(this||zd).readyState="open";this.emit("open");var b=(this||zd).engine;(this||zd).subs.push(ds(b,"data",rv(this||zd,"ondata")));(this||zd).subs.push(ds(b,
"ping",rv(this||zd,"onping")));(this||zd).subs.push(ds(b,"pong",rv(this||zd,"onpong")));(this||zd).subs.push(ds(b,"error",rv(this||zd,"onerror")));(this||zd).subs.push(ds(b,"close",rv(this||zd,"onclose")));(this||zd).subs.push(ds((this||zd).decoder,"decoded",rv(this||zd,"ondecoded")))};yi.prototype.onping=function(){(this||zd).lastPing=new Date;this.emitAll("ping")};yi.prototype.onpong=function(){this.emitAll("pong",new Date-(this||zd).lastPing)};yi.prototype.ondata=function(b){(this||zd).decoder.add(b)};
yi.prototype.ondecoded=function(b){this.emit("packet",b)};yi.prototype.onerror=function(b){gn("error",b);this.emitAll("error",b)};yi.prototype.socket=function(b,c){function l(){~KR(f.connecting,a)||f.connecting.push(a)}var a=(this||zd).nsps[b];if(!a){a=new W4(this||zd,b,c);(this||zd).nsps[b]=a;var f=this||zd;a.on("connecting",l);a.on("connect",function(){a.id=f.generateId(b)});(this||zd).autoConnect&&l()}return a};yi.prototype.destroy=function(b){b=KR((this||zd).connecting,b);~b&&(this||zd).connecting.splice(b,
1);(this||zd).connecting.length||this.close()};yi.prototype.packet=function(b){gn("writing packet %j",b);var c=this||zd;b.query&&0===b.type&&(b.nsp+="?"+b.query);c.encoding?c.packetBuffer.push(b):(c.encoding=!0,(this||zd).encoder.encode(b,function(l){for(var a=0;a<l.length;a++)c.engine.write(l[a],b.options);c.encoding=!1;c.processPacketQueue()}))};yi.prototype.processPacketQueue=function(){if(0<(this||zd).packetBuffer.length&&!(this||zd).encoding){var b=(this||zd).packetBuffer.shift();this.packet(b)}};
yi.prototype.cleanup=function(){gn("cleanup");for(var b=(this||zd).subs.length,c=0;c<b;c++)(this||zd).subs.shift().destroy();(this||zd).packetBuffer=[];(this||zd).encoding=!1;(this||zd).lastPing=null;(this||zd).decoder.destroy()};yi.prototype.close=yi.prototype.disconnect=function(){gn("disconnect");(this||zd).skipReconnect=!0;(this||zd).reconnecting=!1;"opening"===(this||zd).readyState&&this.cleanup();(this||zd).backoff.reset();(this||zd).readyState="closed";(this||zd).engine&&(this||zd).engine.close()};
yi.prototype.onclose=function(b){gn("onclose");this.cleanup();(this||zd).backoff.reset();(this||zd).readyState="closed";this.emit("close",b);(this||zd)._reconnection&&!(this||zd).skipReconnect&&this.reconnect()};yi.prototype.reconnect=function(){if((this||zd).reconnecting||(this||zd).skipReconnect)return this||zd;var b=this||zd;if((this||zd).backoff.attempts>=(this||zd)._reconnectionAttempts)gn("reconnect failed"),(this||zd).backoff.reset(),this.emitAll("reconnect_failed"),(this||zd).reconnecting=
!1;else{var c=(this||zd).backoff.duration();gn("will wait %dms before reconnect attempt",c);(this||zd).reconnecting=!0;var l=setTimeout(function(){b.skipReconnect||(gn("attempting reconnect"),b.emitAll("reconnect_attempt",b.backoff.attempts),b.emitAll("reconnecting",b.backoff.attempts),b.skipReconnect||b.open(function(a){a?(gn("reconnect attempt error"),b.reconnecting=!1,b.reconnect(),b.emitAll("reconnect_error",a.data)):(gn("reconnect success"),b.onreconnect())}))},c);(this||zd).subs.push({destroy:function(){clearTimeout(l)}})}};
yi.prototype.onreconnect=function(){var b=(this||zd).backoff.attempts;(this||zd).reconnecting=!1;(this||zd).backoff.reset();this.updateSocketIds();this.emitAll("reconnect",b)};var a5=Z4,hx={},hba=Wla,Xla=pj,G_=a5,F_=qv("socket.io-client");hx=hx=E_;var wD=hx.managers={};hx.protocol=Xla.protocol;hx.connect=E_;hx.Manager=a5;hx.Socket=W4;var Yla=hx,tg=lively.FreezerRuntime.recorderFor("lively.2lively/client.js");tg.determineLocation=function(){return"undefined"!==typeof document&&document.location?document.location.origin:
tg.isNode?System._nodeRequire("os").hostname():System.baseURL};tg.promise=Kf;tg.fun=Xk;tg.obj=lf;tg.events=Ly;tg.num=wk;tg.L2LConnection=fj;tg.defaultActions=oK;tg.defaultClientActions=pK;tg.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==typeof process&&process.env;tg._ioClient=Yla;tg.ioClient=tg.ioClient||void 0;tg.isNode?(tg.require=System._nodeRequire("module")._load,tg.ioClient=tg.require("socket.io-client")):tg.ioClient=tg._ioClient;tg.urlHelper={isRoot:function(b){return"/"===
tg.urlHelper.path(b)},root:function(b){return tg.urlHelper.isRoot(b)?b:b.slice(0,-tg.urlHelper.path(b).length)+"/"},path:function(){var b=/^[a-z0-9-_\.]+:/,c=/^\/\/[^\/]+/;return function(l){l=l.replace(b,"").replace(c,"");return""===l?"/":l}}(),join:function(b,c){b.endsWith("/")&&(b=b.slice(0,-1));c.startsWith("/")&&(c=c.slice(1));return b+"/"+c}};var bj=function(b,c,l,a){var f=tg.L2LConnection.call(this)||this;tg.events.makeEmitter(f);f.info=a;f.origin=b;f.path=c;f.namespace=l.replace(/^\/?/,"/");
f.trackerId=null;f._socketioClient=null;f._reconnectState={closed:!1,autoReconnect:!0,isReconnecting:!1,isReconnectingViaSocketio:!1,registerAttempt:0,registerProcess:null,isOpening:!1};Object.keys(tg.defaultActions).forEach(function(m){return f.addService(m,tg.defaultActions[m])});Object.keys(tg.defaultClientActions).forEach(function(m){return f.addService(m,tg.defaultClientActions[m])});return f};$jscomp.inherits(bj,tg.L2LConnection);bj.clientKey=function(b,c,l){b=b.replace(/\/$/,"");c=c.replace(/^\//,
"");l=l.replace(/^\//,"");return b+"-"+c+"-"+l};bj.forLivelyInBrowser=function(b){var c=!!b;b=Object.assign({type:"lively.morphic browser"},b);var l=this.default();if(!l)return tg.L2LClient.ensure({url:document.location.origin+"/lively-socket.io",namespace:"l2l",info:b});c&&!tg.obj.equals(l.info,b)&&l.isRegistered()&&(l.info=b,l.unregister().then(function(){return l.register()}).catch(function(a){return console.error("l2l re-register on info change errored: "+a)}));return l};bj.default=function(){var b=
tg.L2LClient.clients.keys().next().value;return tg.L2LClient.clients.get(b)};bj.create=function(b){var c=b=void 0===b?{}:b;b=void 0===c.debug?!1:c.debug;var l=c.url,a=c.namespace,f=void 0===c.autoOpen?!0:c.autoOpen;c=void 0===c.info?{}:c.info;if(!l)throw Error("L2LClient needs server url!");var m=tg.urlHelper.root(l).replace(/\/+$/,"");l=tg.urlHelper.path(l);a=new this(m,l,a||"",c);f&&a.register();a.debug=b;return a};bj.ensure=function(b){var c=b=void 0===b?{}:b,l=c.url;c=c.namespace;if(!l)throw Error("L2LClient needs server url!");
var a=tg.urlHelper.root(l).replace(/\/+$/,""),f=tg.urlHelper.path(l);a=this.clientKey(a,f,c||"");(f=this.clients.get(a))||this.clients.set(a,f=this.create(Object.assign({},b,{url:l,namespace:c})));return f};bj.prototype.isOnline=function(){return this.socket&&this.socket.connected};bj.prototype.isRegistered=function(){return this.isOnline()&&!!this.trackerId};bj.prototype.open=function(){var b=this,c,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return b.isOnline()||
b._reconnectState.isOpening?f.return(b):f.yield(b.close(),2);b._reconnectState.closed=!1;c=tg.urlHelper.join(b.origin,b.namespace);l={path:b.path,transports:["websocket","polling"]};a=b._socketioClient=tg.ioClient(c,l);b.debug&&console.log("["+b+"] connecting");a.on("error",function(m){b._reconnectState.isOpening=!1;b.debug&&console.log("["+b+"] errored: "+m)});a.on("close",function(m){return b.debug&&console.log("["+b+"] closed: "+m)});a.on("reconnect_failed",function(){return b.debug&&console.log("["+
b+"] could not reconnect")});a.on("reconnect_error",function(m){return b.debug&&console.log("["+b+"] reconnect error "+m)});a.on("connect",function(){b.debug&&console.log("["+b+"] connected");b.emit("connected",b);b._reconnectState.isOpening=!1;b._reconnectState.isReconnecting=!1;b._reconnectState.isReconnectingViaSocketio=!1});a.on("disconnect",function(){b._reconnectState.isOpening=!1;b.debug&&console.log("["+b+"] disconnected");b.emit("disconnected",b);b.trackerId?("tracker"!==b.trackerId&&(b.renameTarget(b.trackerId,
"tracker"),b.trackerId=null),b._reconnectState.closed?b.debug&&console.log("["+b+"] won't reconnect b/c client is marked as closed"):b._reconnectState.autoReconnect?(b._reconnectState.isReconnecting=!0,setTimeout(function(){b._reconnectState.closed?b.debug&&console.log("["+b+"] won't reconnect b/c client is marked as closed 2"):b._reconnectState.isReconnectingViaSocketio?b.debug&&console.log("["+b+"] won't reconnect again, client already reconnecting"):(b.debug&&console.log("["+b+"] initiating reconnection to tracker"),
b.register())},20)):b.debug&&console.log("["+b+"] won't reconnect b/c client has reconnection disabled")):(b.debug&&console.log("["+b+"] disconnect: don't have a tracker id, won't try reconnect"),b.trackerId="tracker")});a.on("reconnecting",function(){b.debug&&console.log("["+b+"] reconnecting",b._reconnectState);b.emit("reconnecting",b);b._reconnectState.closed?(b._reconnectState.isReconnecting=!1,b._reconnectState.isReconnectingViaSocketio=!1,a.close(),b.close()):(b._reconnectState.isReconnecting=
!0,b._reconnectState.isReconnectingViaSocketio=!0)});a.on("reconnect",function(){b.debug&&console.log("["+b+"] reconnected");b._reconnectState.isReconnecting=!1;b._reconnectState.isReconnectingViaSocketio=!1;b.register()});b.installEventToMessageTranslator(a);b._reconnectState.isOpening=!0;return f.return((new Promise(function(m,q){a.once("error",q);a.once("connect",m)})).then(function(){return b}))})};bj.prototype.close=function(){var b=this,c,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==
a.nextAddress){b._reconnectState.closed=!0;if(c=b.socket)c.removeAllListeners("reconnect"),c.removeAllListeners("reconnecting"),c.removeAllListeners("disconnect"),c.removeAllListeners("connect"),c.removeAllListeners("reconnect_error"),c.removeAllListeners("reconnect_failed"),c.removeAllListeners("close"),c.removeAllListeners("error"),c.close();b.debug&&console.log("["+b+"] closing...");return b.isRegistered()?a.yield(b.unregister(),2):a.jumpTo(2)}return b.isOnline()||b.socket?c&&!c.connected?(b.debug&&
console.log("["+b+"] socket not connected, considering client closed"),a.return(b)):a.return(Promise.race([tg.promise.delay(2E3).then(function(){return c.removeAllListeners("disconnect")}),new Promise(function(f){return c.once("disconnect",f)})]).then(function(){b.debug&&console.log("["+b+"] closed");return b})):(b.debug&&(l=b.isOnline()?"no socket":"not online",b.debug&&console.log("["+b+"] cannot close: "+l)),a.return(b))})};bj.prototype.remove=function(){var b=this.constructor.clientKey(this.origin,
this.path,this.namespace);this.constructor.clients.delete(b);return this.close()};bj.prototype.register=function(){var b=this,c,l,a,f,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:if(b.isRegistered())return z.return();if(b._reconnectState.closed)return b.debug&&console.log("["+b+"] not registering this b/c closed"),b._reconnectState.registerAttempt=0,z.return();if(b._reconnectState.registerProcess)return b.debug&&console.log("["+b+"] not registering this b/c register process exists"),
z.return();z.setCatchFinallyBlocks(2);if(b.isOnline()){z.jumpTo(4);break}return z.yield(b.open(),4);case 4:return b.debug&&console.log("["+b+"] register"),z.yield(b.sendToAndWait("tracker","register",Object.assign({userName:"unknown",type:"l2l "+(tg.isNode?"node":"browser"),location:tg.determineLocation()},b.info)),6);case 6:c=z.yieldResult;if(!c.data)throw l=Error("Register answer is empty!"),b.emit("error",l),l;if(c.data.isError)throw a=Error(c.data.error),b.emit("error",a),a;b._reconnectState.registerAttempt=
0;f=c;m=f.data;q=m.trackerId;r=m.messageNumber;b.trackerId=q;b._incomingOrderNumberingBySenders.set(q,r||0);b.emit("registered",{trackerId:q});z.leaveTryBlock(0);break;case 2:u=z.enterCatchBlock(),console.error("Error in register request of "+b+": "+u),v=b._reconnectState.registerAttempt++,y=tg.num.backoff(v,4,3E5),b._reconnectState.registerProcess=setTimeout(function(){b._reconnectState.registerProcess=null;b.register()},y),z.jumpToEnd()}})};bj.prototype.unregister=function(){var b=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:if(!b.isRegistered())return l.return();
b.debug&&console.log("["+b+"] unregister");c=b.trackerId;l.setCatchFinallyBlocks(2);return l.yield(b.sendToAndWait(b.trackerId,"unregister",{}),4);case 4:l.leaveTryBlock(3);break;case 2:l.enterCatchBlock();case 3:b.renameTarget(c,"tracker"),b.trackerId=null,b.emit("unregistered",b),l.jumpToEnd()}})};bj.prototype.whenRegistered=function(b){var c=this;return tg.promise.waitFor(b,function(){return c.isRegistered()}).catch(function(l){return Promise.reject(/timeout/i.test(String(l))?Error("Timeout in "+
c+".whenRegistered"):l)})};bj.prototype.send=function(b,c){var l=this,a=$jscomp.makeIterator(this.prepareSend(b,c));b=a.next().value;c=a.next().value;this.whenOnline().then(function(){var f=l.socket,m=b,q=m.action;m=m.target;if(!f)throw Error("Trying to send message "+q+" to "+m+" but cannot find a connection to it!");"function"===typeof c?f.emit(q,b,c):f.emit(q,b)})};bj.prototype.joinRoom=function(b){var c=this;return this.whenOnline().then(function(){return c.sendToAndWait(c.trackerId,"[broadcast] join room",
{room:b})})};bj.prototype.leaveRoom=function(b){var c=this;return this.whenOnline().then(function(){return c.sendToAndWait(c.trackerId,"[broadcast] leave room",{room:b})})};bj.prototype.broadcast=function(b,c,l,a,f){var m=this,q={action:c,room:b,broadcast:l};if(void 0===a?0:a)q.isSystemBroadcast=!0;if(void 0===f?0:f)q.isMultiServerBroadcast=!0;return this.whenOnline().then(function(){return m.sendToAndWait(m.trackerId,"[broadcast] send",q)})};bj.prototype.listRoomMembers=function(b){var c=this,l,
a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(c.sendToAndWait(c.trackerId,"[broadcast] list room members",{room:b}),2);l=f.yieldResult;a=l.data;return f.return(a)})};bj.prototype.joinedRooms=function(){var b=this,c,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.yield(b.sendToAndWait(b.trackerId,"[broadcast] my rooms",{}),2);c=a.yieldResult;l=c.data;return a.return(l)})};bj.prototype.listRooms=function(){var b=
this,c,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.yield(b.sendToAndWait(b.trackerId,"[broadcast] all rooms",{}),2);c=a.yieldResult;l=c.data;return a.return(l)})};bj.prototype.listPeers=function(b){b=void 0===b?!1:b;var c=this,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return l=c,a=l._peersCached,f=Date.now(),!b&&a&&1E3>f-a.timestamp?u.return(c._peersCached.sessions):c.isOnline()?u.yield(c.sendToAndWait(c.trackerId,
"getClients",{}),2):u.return([]);m=u.yieldResult;q=m.data;r=q.map(function(v){var y=$jscomp.makeIterator(v);v=y.next().value;var z=y.next().value,A=z.info||{};y=A.userRealm;var C=A.userToken,G=A.l2lUserToken,F=A.location,N=A.type;A=A.world;v=Object.assign({},tg.obj.dissoc(z,["info"]),{id:v,world:A,location:F,type:N});(C=C||G)&&"null"!==C&&(lively.user?v.user=lively.user.ClientUser.fromToken(C,y):(v.userToken=C,v.userRealm=y));return v});c._peersCached={timestamp:f,sessions:r};return u.return(r)})};
bj.prototype.toString=function(){var b=this.origin,c=this.path,l=this.namespace,a=this.id,f=this.isOnline()?this.isRegistered()?"registered":"unregistered":"disconnected";return"L2LClient("+(a||"").slice(0,5)+" "+b+c+" - "+l+" "+f+")"};$jscomp.global.Object.defineProperties(bj.prototype,{socket:{configurable:!0,enumerable:!0,get:function(){return this._socketioClient}},socketId:{configurable:!0,enumerable:!0,get:function(){return this.socket?this.socket.id:null}}});$jscomp.global.Object.defineProperties(bj,
{clients:{configurable:!0,enumerable:!0,get:function(){return this._clients||(this._clients=new Map)}}});tg.L2LClient=bj;tg.default=bj;var b5=Object.freeze({__proto__:null,"default":bj});ya("bV",b5);var xz=lively.FreezerRuntime.recorderFor("lively.shell/command-interface.js");xz.promise=Kf;xz.events=Ly;var vp=function(){this._stderr=this._stdout="";this.exitCode=void 0;this.commandString="";this.process=null;this._whenDone=xz.promise.deferred();this._whenStarted=xz.promise.deferred();this.startTime=
0;this.lastSignal=null;xz.events.makeEmitter(this)};vp.findCommand=function(b){return this.commands.find(function(c){return c.pid===b})};vp.prototype.isRunning=function(){return this.process&&void 0===this.exitCode};vp.prototype.isDone=function(){return void 0!=this.exitCode};vp.prototype.whenStarted=function(){return this._whenStarted.promise};vp.prototype.whenDone=function(){return this._whenDone.promise};vp.prototype.spawn=function(b){throw Error("not yet implemented");};vp.prototype.kill=function(b){this.lastSignal=
void 0===b?"KILL":b};vp.prototype.toString=function(){return this.constructor.name+"("+this.commandString+", "+this.status+")"};$jscomp.global.Object.defineProperties(vp.prototype,{isShellCommand:{configurable:!0,enumerable:!0,get:function(){return!0}},status:{configurable:!0,enumerable:!0,get:function(){return this.process?void 0===this.exitCode?"running, pid "+this.pid:"exited "+this.exitCode+", pid "+this.pid:"not started"}},pid:{configurable:!0,enumerable:!0,get:function(){return this.process?
this.process.pid:null}},output:{configurable:!0,enumerable:!0,get:function(){return this.stdout+(this.stderr?"\n"+this.stderr:"")}},stdout:{configurable:!0,enumerable:!0,get:function(){return this._stdout}},stderr:{configurable:!0,enumerable:!0,get:function(){return this._stderr}}});$jscomp.global.Object.defineProperties(vp,{commands:{configurable:!0,enumerable:!0,get:function(){return this._commands||(this._commands=[])}}});xz.CommandInterface=vp;xz.default=vp;var Lf=lively.FreezerRuntime.recorderFor("lively.shell/client-command.js");
Lf.runCommand=Jy;Lf.defaultDirectory=xD;Lf.env=yD;Lf.readFile=LH;Lf.writeFile=MH;Lf.CommandInterface=vp;Lf.promise=Kf;Lf.arr=Te;Lf.obj=lf;Lf.signal=hk;Lf.debug=!1;Lf.runCommand=Jy;Lf.runCommand=Jy;Lf.dirCache={};Lf.defaultDirectory=xD;Lf.defaultDirectory=xD;Lf.env=yD;Lf.env=yD;Lf.readFile=LH;Lf.readFile=LH;Lf.writeFile=MH;Lf.writeFile=MH;var Hq=function(b){var c=Lf.CommandInterface.call(this)||this;c.debug=Lf.debug;c.l2lClient=b;return c};$jscomp.inherits(Hq,Lf.CommandInterface);Hq.installLively2LivelyServices=
function(b){Object.keys(Lf.L2LServices).forEach(function(c){return b.addService(c,function(l,a,f){return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(Lf.L2LServices[c](l,a,f))})})})};Hq.prototype.envForCommand=function(b){var c=this.l2lClient,l=c.id,a=c.origin,f=c.path;c=c.namespace;var m=b||{};b=m.env;m=m.owner;b=b||{};m&&(b.LIVELY_COMMAND_OWNER=m);return Object.assign({ASKPASS_SESSIONID:l,L2L_EDITOR_SESSIONID:l,L2L_SESSIONTRACKER_SERVER:a,L2L_SESSIONTRACKER_PATH:f,L2L_SESSIONTRACKER_NS:c},
b)};Hq.prototype.spawn=function(b){b=void 0===b?{command:null,env:{},cwd:null,stdin:null}:b;var c=this,l,a,f,m,q,r,u,v,y,z,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){if(1==C.nextAddress)return l=c,a=l.l2lClient,f=b,m=f.command,q=f.env,r=f.cwd,u=f.stdin,c.startTime=new Date,q=c.envForCommand(b),c.debug&&console.log(c+" spawning "+m),c.debug&&c.whenStarted().then(function(){return console.log(c+" started")}),c.debug&&c.whenDone().then(function(){return console.log(c+" exited")}),
Lf.arr.pushIfNotIncluded(c.constructor.commands,c),c.commandString=Array.isArray(m)?m.join(""):m,C.yield(a.sendToAndWait(a.trackerId,"lively.shell.spawn",{command:m,env:q,cwd:r,stdin:u},{ackTimeout:3E4}),2);v=C.yieldResult;y=v.data;z=y.error;A=y.pid;if(z)throw Lf.debug&&console.error("["+c+"] error at start: "+z),c.process={error:z},c.exitCode=1,Lf.signal(c,"error",z),Error(z);c.process={pid:A};Lf.debug&&console.log("["+c+"] got pid "+A);Lf.signal(c,"pid",A);c._whenStarted.resolve();return C.return(c)})};
Hq.prototype.writeToStdin=function(b){var c=this,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(!c.isRunning())return m.return();l=c;a=l.l2lClient;f=l.pid;return m.yield(a.sendToAndWait(a.trackerId,"lively.shell.writeToStdin",{pid:f,stdin:String(b)}),0)})};Hq.prototype.kill=function(b){b=void 0===b?"KILL":b;var c=this,l,a,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){if(!c.isRunning())return v.return();Lf.debug&&console.log(c+
" signaling "+b);c.lastSignal=b;l=c;a=l.pid;f=l.l2lClient;return v.yield(f.sendToAndWait(f.trackerId,"lively.shell.kill",{pid:a}),2)}m=v.yieldResult;q=m.data;r=q.status;u=q.error;Lf.debug&&console.log(c+" kill send: "+(u||r));if(u)throw Error(u);return v.return(c.whenDone())})};Hq.prototype.onOutput=function(b){var c=b.stdout;b=b.stderr;c&&(this._stdout+=c,Lf.signal(this,"stdout",c),this.emit("stdout",c));b&&(this._stderr+=b,Lf.signal(this,"stderr",b),this.emit("stderr",b))};Hq.prototype.onClose=
function(b){Lf.arr.remove(this.constructor.commands,this);this.exitCode=b;this.emit("close",b);Lf.signal(this,"close",b);this._whenDone.resolve(this)};Hq.prototype.onError=function(b){Lf.arr.remove(this.constructor.commands,this);this._stderr+=b.stack;this.exitCode=1;this.emit("error",b.stack);Lf.signal(this,"error",b.stack);this._whenDone.reject(b)};Lf.ClientCommand=Hq;Lf.L2LServices={"lively.shell.onOutput":function(b,c,l,a){b=c.data;var f=b.pid,m=b.stdout,q=b.stderr,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return Lf.debug&&
console.log("[lively.shell] client received lively.shell.onOutput for command "+f),u.setCatchFinallyBlocks(2),u.yield(Lf.promise.waitFor(1E3,function(){return Lf.ClientCommand.findCommand(f)}),4);case 4:r=u.yieldResult;u.leaveTryBlock(3);break;case 2:return u.enterCatchBlock(),console.warn("[lively.shell] received output for command "+f+" but it isn't registered!'"),u.return();case 3:r.onOutput({stdout:m,stderr:q}),u.jumpToEnd()}})},"lively.shell.onExit":function(b,c,l,a){b=c.data;var f=b.pid,m=b.code,
q=b.error,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return Lf.debug&&console.log("[lively.shell] client received lively.shell.onExit for command "+f),u.setCatchFinallyBlocks(2),u.yield(Lf.promise.waitFor(1E3,function(){return Lf.ClientCommand.findCommand(f)}),4);case 4:r=u.yieldResult;u.leaveTryBlock(3);break;case 2:return u.enterCatchBlock(),console.warn("[lively.shell] received exit message for command "+f+" but it isn't registered!'"),u.return();
case 3:if(q)"string"===typeof q&&(q=Error(q)),r.onError(q);else r.onClose(m);u.jumpToEnd()}})}};Lf.default=Hq;var Zla=Object.freeze({__proto__:null,runCommand:Jy,defaultDirectory:xD,env:yD,readFile:LH,writeFile:MH,"default":Hq}),Ph=lively.FreezerRuntime.recorderFor("lively.ide/shell/shell-interface.js");Ph.runCommand=NH;Ph.defaultDirectory=OH;Ph.env=wO;Ph.readFile=function(b,c){c=(c=void 0===c?{}:c)||{};var l=Ph.runCommand('cat "'+b+'"',c);return l.whenDone().then(function(){return l.output})};Ph.writeFile=
function(b,c,l){"string"===typeof c&&(c={content:c});c=c||{};c.content=c.content||"";"win32"!==this.PLATFORM&&(b='"'+b+'"');b=this.run("tee "+b,{stdin:c.content,cwd:c.cwd});c.onEnd&&lively.bindings.connect(b,"end",c,"onEnd");l&&lively.bindings.connect(b,"end",{thenDo:l},"thenDo");return b};Ph.parseCommand=xO;Ph.doGrep=yO;Ph.L2LClient=bj;Ph._runCommand=Jy;Ph._env=yD;Ph._defaultDirectory=xD;Ph.string=Hg;Ph.defaultConnection={url:document.location.origin+"/lively-socket.io",namespace:"l2l"};Ph.runCommand=
NH;Ph.runCommand=NH;Ph.defaultDirectory=OH;Ph.defaultDirectory=OH;Ph.env=wO;Ph.env=wO;Ph.parseCommand=xO;Ph.parseCommand=xO;Ph.defaultGrepExclusions=".svn .git node_modules dist .module_cache lively.next-node_modules".split(" ");Ph.doGrep=yO;Ph.doGrep=yO;var wh=lively.FreezerRuntime.recorderFor("lively.shell/client-fs-helper.js");wh.fileInfo=PH;wh.fileInfoCommandString=function(b,c){var l=c=void 0===c?{}:c;c=l.rootDirectory;l=l.platform;c=c||".";var a="win32"===l?"\\":"/";"win32"===l||c.endsWith(a)||
(c+=a);return"win32"===l?"cd "+c+' && ls -lLd --time-style=locale "'+b+'"':'if [ "$(uname)" = "Darwin" ];\n      then timeformat=\'-T\'; else\n      timeformat="--time-style=+%b %d %T %Y";\n    fi && env TZ=GMT LANG=en_US.UTF-8 cd '+(c+' && ls -lLd "$timeformat" "'+b+'"')};wh.parseDirectoryListFromLs=zO;wh.findFiles=QH;wh.findFilesCommandString=function(b,c){var l=c=void 0===c?{}:c,a=l.rootDirectory,f=l.exclude,m=l.depth;l=l.platform;a=a||".";f=f||"-iname "+wh.defaultExcludes.map(wh.string.print).join(" -o -iname ");
var q="win32"===l?"\\":"/";"win32"===l||a.endsWith(q)||(a+=q);b=wh.string.format('%s "%s"',c.re?"-iregex":c.matchPath?"-ipath":"-iname",b);m="number"===typeof m?" -maxdepth "+m:"";return"win32"===l?wh.string.format("find %s %s ( %s ) -prune -o %s %s -print0 | xargs -0 -I{} ls -lLd --time-style=locale {}",a,c.re?"-E ":"",f.replace(/"/g,""),b.replace(/"/g,""),m):'if [ "$(uname)" = "Darwin" ];\n      then timeformat=\'-T\'; else\n      timeformat="--time-style=+%b %d %T %Y";\n    fi && '+wh.string.format('env TZ=GMT LANG=en_US.UTF-8 find %s %s \\( %s \\) -prune -o %s %s -print0 | xargs -0 -I{} ls -lLd "$timeformat" "{}"',
a,c.re?"-E ":"",f,b,m)};wh.convertDirectoryUploadEntriesToFileInfos=AO;wh.runCommand=Jy;wh.string=Hg;wh.promise=Kf;wh.arr=Te;wh.fileInfo=PH;wh.fileInfo=PH;wh.parseDirectoryListFromLs=zO;wh.parseDirectoryListFromLs=zO;var yK=function(b){this.rootDirectory=b;this.fileName=this.path="";this.isDirectory=!1;this.lastModified=null;this.mode="";this.isLink=!1;this.linkCount=0;this.group=this.user="";this.size=0;this.rootDirectory=null};yK.prototype.readFromDirectoryListLine=function(b){var c=this;if(!b.trim().length)return null;
var l=b;this.reader.forEach(function(a){return l=a(l,c)});return this};yK.prototype.toString=function(){return this.path};$jscomp.global.Object.defineProperties(yK.prototype,{reader:{configurable:!0,enumerable:!0,get:function(){return[function(b,c){var l=b.indexOf(" ");c.mode=b.slice(0,l);c.isDirectory="d"===c.mode[0];return b.slice(l+1).trim()},function(b,c){var l=b.indexOf(" ");c.linkCount=Number(b.slice(0,l));return b.slice(l+1).trim()},function(b,c){var l=b.indexOf(" ");c.user=b.slice(0,l);return b.slice(l+
1).trim()},function(b,c){var l=wh.string.peekRight(b,0,/\s+[0-9]/);c.group=b.slice(0,l).trim();return b.slice(l).trim()},function(b,c){var l=b.indexOf(" ");c.size=Number(b.slice(0,l));return b.slice(l+1).trim()},function(b,c){var l=wh.string.reMatches(b,/[^s]+\s+[0-9:\s]+/);if(!l||!l[0])return b;c.lastModified=new Date(l[0].match+" GMT");return b.slice(l[0].end).trim()},function(b,c){var l=(b=b.replace(/^\.\/+/g,"").replace(/\/\//g,"/"))&&b.split(" -> "),a=""===b?!1:b&&2===l.length,f=(l=a?l[0]:b)&&
0===l.indexOf(c.rootDirectory)?l.slice(c.rootDirectory.length):l;c.fileName=""===b?".":f;c.path=l;c.isLink=a;return f}]}}});wh.FileInfo=yK;wh.findFilesProcesses={};wh.findFiles=QH;wh.findFiles=QH;wh.defaultExcludes=[".svn",".git","node_modules",".module_cache"];wh.convertDirectoryUploadEntriesToFileInfos=AO;wh.convertDirectoryUploadEntriesToFileInfos=AO;var pi=lively.FreezerRuntime.recorderFor("lively.shell/client-resource.js");pi.Resource=If;pi.runCommand=Jy;pi.fileInfo=PH;pi.findFiles=QH;pi.string=
Hg;pi.promise=Kf;pi.arr=Te;pi.obj=lf;var hn=function(b,c,l){l=void 0===l?{}:l;b=pi.Resource.call(this,b)||this;b.options=Object.assign({},l,{l2lClient:c||b.constructor.defaultL2lClient});return b};$jscomp.inherits(hn,pi.Resource);hn.prototype.newResource=function(b){return new this.constructor(b,this.options.l2lClient,this.options)};hn.prototype.read=function(){var b=this,c=pi.runCommand('cat "'+this.url+'"',this.options);return c.whenDone().then(function(){if(c.exitCode)throw Error("Read "+b.url+
" failed: "+c.stderr);return c.output})};hn.prototype.write=function(b){var c=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:return b?f.yield(pi.runCommand('touch "'+c.url+'" && tee "'+c.url+'"',Object.assign({stdin:String(b)},c.options)).whenDone(),4):f.yield(pi.runCommand('echo -n > "'+c.url+'"',Object.assign({},c.options)).whenDone(),5);case 4:l=f.yieldResult;f.jumpTo(3);break;case 5:l=f.yieldResult;case 3:a=l;if(a.exitCode)throw Error("Write "+
c.url+" failed: "+a.stderr);return f.return(c)}})};hn.prototype.mkdir=function(){var b=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(pi.runCommand('mkdir -p "'+b.url+'"',b.options).whenDone(),2);c=l.yieldResult;if(c.exitCode)throw Error(b+" cannot create directory: "+c.stderr);return l.return(b)})};hn.prototype.exists=function(){var b=pi.runCommand('test -d "'+this.url+'" || test -f "'+this.url+'"',this.options);return b.whenDone().then(function(){return 0===
b.exitCode})};hn.prototype.remove=function(){var b=this,c=pi.runCommand('rm -rf "'+this.url+'"',this.options);return c.whenDone().then(function(){if(c.exitCode)throw Error("Remove of "+b.url+" failed: "+c.stderr);return b})};hn.prototype.gzip=function(b){var c=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){l=pi.runCommand('gzip > "'+c.url+'"',Object.assign({stdin:String(b)},c.options));return a.return(l.whenDone().then(function(){if(l.exitCode)throw Error("Gzip compression of "+
c.url+" failed: "+l.stderr);return c}))})};hn.prototype.brotli=function(b){var c=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){l=pi.runCommand('brotli > "'+c.url+'"',Object.assign({stdin:String(b)},c.options));return a.return(l.whenDone().then(function(){if(l.exitCode)throw Error("Brotli compression of "+c.url+" failed: "+l.stderr);return c}))})};hn.prototype.readProperties=function(){var b=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(pi.fileInfo(b.url,
b.options),2);c=l.yieldResult;b.assignProperties(pi.obj.dissoc(c,["fileName","path","rootDirectory"]));return l.return(b)})};hn.prototype.dirList=function(b,c){b=void 0===b?1:b;c=void 0===c?{}:c;var l=this,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return a=c,f=a.exclude,Array.isArray(f)&&(f="-iname "+f.map(pi.string.print).join(" -o -iname ")),m=l,q=m.url,r=m.options,u=r.l2lClient,y.yield(pi.findFiles("*",{exclude:f,depth:b,rootDirectory:q,l2lClient:u}),
2);v=y.yieldResult;v[0].path.replace(/\/$/,"")===l.url.replace(/\/$/,"")&&v.shift();return y.return(v.map(function(z){var A=z.path;z.isDirectory&&(A=A.replace(/\/?$/,"/"));A=new l.constructor(A,u,l.options);A.assignProperties(pi.obj.dissoc(z,["fileName","path","rootDirectory"]));return A}))})};$jscomp.global.Object.defineProperties(hn,{defaultL2lClient:{configurable:!0,enumerable:!0,get:function(){return this._defaultL2lClient||pi._defaultL2LClient},set:function(b){this._defaultL2lClient=pi._defaultL2LClient=
b}}});pi.ShellClientResource=hn;pi._defaultL2LClient=pi._defaultL2LClient||void 0;var zK={name:"shell-client",matches:function(b){return b.startsWith("/")||b.match(/[a-z]:\\/i)},resourceClass:pi.ShellClientResource};pi.resourceExtension=zK;pi.resourceExtension=zK;pi.resourceExtension=zK;pi.default=hn;var $la=Object.freeze({__proto__:null,"default":hn,resourceExtension:zK}),pd=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js");pd.pt=fh;pd.Rectangle=Pd;pd.rect=Gk;pd.arr=Te;pd.Closure=zi;
pd.num=wk;pd.grid=dB;pd.obj=lf;pd.once=So;(function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=c.hasOwnProperty("Layout")&&"function"===typeof c.Layout?c.Layout:c.Layout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=a=void 0===a?{}:a;a=f.spacing;var m=f.padding,q=f.border,r=f.container,u=f.manualUpdate,
v=f.autoResize,y=f.ignore,z=f.onScheduleApply,A=f.layoutOrder;f=f.reactToSubmorphAnimations;this.applyRequests=!1;this.border=Object.assign({top:0,left:0,right:0,bottom:0},q);this.ignore=y||[];this.lastBoundsExtent=this.container&&this.container.bounds().extent();this.active=!1;this.container=r;this.manualUpdate=u;this.reactToSubmorphAnimations=f||!1;this.autoResize=void 0!=v?v:!0;this.onScheduleApply=z||function(C,G,F){};A&&(this.layoutOrder=A,this.layoutOrderSource=JSON.stringify(String(A)));this.spacing=
a||0;this._padding=m?"number"===typeof m?pd.Rectangle.inset(m):m:null}},{key:"attach",value:function(){this.apply();this.refreshBoundsCache()}},{key:"copy",value:function(){return new this.constructor(this)}},{key:"description",value:function(){return"Describe the layout behavior here."}},{key:"name",value:function(){return"Name presented to the user."}},{key:"isEnabled",value:function(){return!this.active}},{key:"disable",value:function(){this.active=!0}},{key:"enable",value:function(a){this.active=
!1;this.scheduleApply(null,a)}},{key:"padding",get:function(){return this._padding}},{key:"padding",set:function(a){"number"===typeof a&&(a=pd.Rectangle.inset(a));this._padding=a;this.apply()}},{key:"boundsChanged",value:function(a){return!(this.lastBoundsExtent&&a.bounds().extent().equals(this.lastBoundsExtent))}},{key:"extentChanged",value:function(a){return!(this.lastExtent&&a.extent.equals(this.lastExtent))}},{key:"equals",value:function(a){return a.name()==this.name()}},{key:"layoutableSubmorphs",
get:function(){var a=this;this.layoutOrder||(this.layoutOrder=pd.Closure.fromSource(JSON.parse(this.layoutOrderSource)).recreateFunc());return pd.arr.sortBy(this.container.submorphs.filter(function(f){return f.isLayoutable&&!a.ignore.includes(f.name)}),function(f){return a.layoutOrder(f)})}},{key:"layoutOrder",value:function(a){return this.container.submorphs.indexOf(a)}},{key:"submorphBoundsChanged",get:function(){var a=this.layoutableSubmorphs,f=this.layoutableSubmorphBounds;if(!f||a.length!=f.length)return!0;
for(var m=0;m<a.length;m++)if(!f[m].equals(a[m].bounds()))return!0;return!1}},{key:"refreshBoundsCache",value:function(){this.lastExtent=this.container.extent;this.layoutableSubmorphBounds=this.layoutableSubmorphs.map(function(a){return a.bounds()})}},{key:"onContainerRender",value:function(){this.forceLayout()}},{key:"noLayoutActionNeeded",get:function(){return!this.submorphBoundsChanged&&!this.boundsChanged(this.container)&&!this.extentChanged(this.container)&&!this.submorphsChanged}},{key:"__dont_serialize__",
get:function(){return["lastAnim","animationPromise"]}},{key:"forceLayout",value:function(){var a=this;this.applyRequests&&(this.applyRequests=!1,this.noLayoutActionNeeded||(this.refreshBoundsCache(),this.container.withMetaDo({isLayoutAction:!0,animation:this.lastAnim},function(){return a.apply(a.lastAnim)}),this.lastAnim=!1))}},{key:"forceLayoutsOfMorph",value:function(a){var f=this;a.layout?a.layout.forceLayout():a.submorphs.forEach(function(m){return f.forceLayoutsOfMorph(m)})}},{key:"forceLayoutsInNextLevel",
value:function(){var a=this;this.layoutableSubmorphs.forEach(function(f){return a.forceLayoutsOfMorph(f)})}},{key:"scheduleApply",value:function(a,f,m){m=void 0===m?{}:m;if("function"===typeof this.onScheduleApply)this.onScheduleApply(a,f,m);this.active||(f&&(this.lastAnim=f),this.applyRequests=!0)}},{key:"onSubmorphResized",value:function(a,f){this.scheduleApply(a,this.reactToSubmorphAnimations&&f.meta.animation,f)}},{key:"onSubmorphAdded",value:function(a,f){this.submorphsChanged=!0;this.scheduleApply(a,
f)}},{key:"onSubmorphRemoved",value:function(a,f){this.submorphsChanged=!0;this.scheduleApply(a,f)}},{key:"onChange",value:function(a){var f=a.args,m=a.prop,q=a.value,r=a.prevValue,u=a.meta;u=this.reactToSubmorphAnimations&&u&&u.animation;f=f&&f[0];switch(a.selector){case "removeMorph":this.onSubmorphRemoved(f,u);break;case "addMorphAt":this.onSubmorphAdded(f,u)}"extent"===m&&q&&r&&(r.x!==q.x||r.y!==q.y)&&this.scheduleApply(f,u)}},{key:"affectsLayout",value:function(a,f){a=f.value;var m=f.prevValue;
return["position","scale","rotation","isLayoutable","extent"].includes(f.prop)&&!pd.obj.equals(a,m)}},{key:"onSubmorphChange",value:function(a,f){if(f.meta&&f.meta.isLayoutAction)return this.scheduleApply(a,this.reactToSubmorphAnimation&&f.meta.animation);if(this.affectsLayout(a,f))this.onSubmorphResized(a,f)}},{key:"changePropertyAnimated",value:function(a,f,m,q){if(q){var r=q.duration;q=q.easing;var u={};this.animationPromise=a.animate((u[f]=m,u.duration=r,u.easing=q,u))}else a[f]=m}},{key:"attachAnimated",
value:function(a,f,m){this.active||(this.container=f,this.active=!0,f.layout=this,this.active=!1,this.lastAnim={duration:void 0===a?0:a,easing:m})}},{key:"apply",value:function(a){this.active||(this.active=!0,this.submorphsChanged=!1,this.lastBoundsExtent=this.container&&this.container.bounds().extent(),this.active=!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Layout"}}],c,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:156,end:6611})})(void 0);var OE=ya("b0",function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=c.hasOwnProperty("CustomLayout")&&"function"===typeof c.CustomLayout?c.CustomLayout:c.CustomLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,
b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;this.relayout=a.relayout;this.layouterString=JSON.stringify(String(a.relayout));this.varMapping=a.varMapping||{};Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a)}},{key:"name",value:function(){return"Custom Layout"}},{key:"apply",value:function(a){if(!this.active&&this.container){Nb._get(Object.getPrototypeOf(l.prototype),"apply",this).call(this,a);this.active=
!0;this.relayout||(this.relayout=pd.Closure.fromSource(JSON.parse(this.layouterString),this.varMapping).recreateFunc());try{this.relayout(this.container,a)}catch(f){console.error("Error in relayout() of a custom layout:",f)}this.lastBoundsExtent=this.container&&this.container.bounds().extent();this.active=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CustomLayout"}}],c,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6620,end:7548})}(pd.Layout));pd.CustomLayout=OE;pd.CustomLayout=OE;pd.CustomLayout=OE;var PE=ya("bi",function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=c.hasOwnProperty("SnapLayout")&&"function"===typeof c.SnapLayout?c.SnapLayout:c.SnapLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._spacing=a.spacing}},{key:"name",value:function(){return"Snap"}},{key:"description",value:function(){return"Fits the parent morph to the combined bounds of all its submorphs."}},{key:"apply",value:function(a){var f=this;a=void 0===a?!1:a;if(!this.active&&this.container){Nb._get(Object.getPrototypeOf(l.prototype),
"apply",this).call(this,a);var m=this.container.submorphBounds().insetBy(-this.spacing),q=pd.pt(this.spacing,this.spacing).subPt(m.topLeft());q.r()&&this.container.submorphs.forEach(function(r){return f.changePropertyAnimated(r,"position",r.position.addPt(q),a)});this.changePropertyAnimated(this.container,"extent",m.extent(),a)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapLayout"}}],c,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7557,end:8354})}(pd.Layout));pd.SnapLayout=PE;pd.SnapLayout=PE;pd.SnapLayout=PE;(function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=c.hasOwnProperty("FloatLayout")&&"function"===typeof c.FloatLayout?c.FloatLayout:c.FloatLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._orderByIndex=a.orderByIndex||!1;this._resizeSubmorphs="undefined"!==typeof a.resizeSubmorphs?a.resizeSubmorphs:!1}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):
a.left}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"direction",get:function(){return this._direction}},{key:"direction",set:function(a){this._direction=a;this.apply()}},{key:"align",get:function(){return this._align}},{key:"align",set:function(a){this._align=a;this.apply()}},{key:"autoResize",get:function(){return this._autoResize}},{key:"autoResize",set:function(a){this._autoResize=a;this.apply()}},
{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"resizeSubmorphs",get:function(){return this._resizeSubmorphs}},{key:"resizeSubmorphs",set:function(a){this._resizeSubmorphs=a;this.apply()}},{key:"equals",value:function(a){return this.spacing!=a.spacing||this.align!=a.align||this.direction!=a.direction?!1:!0}},{key:"getSpec",value:function(){return{spacing:this.spacing,resizeSubmorphs:this.resizeSubmorphs,autoResize:this.autoResize,
align:this.align,direction:this.direction,padding:this.padding,reactToSubmorphAnimations:this.reactToSubmorphAnimations,orderByIndex:this.orderByIndex}}},{key:"inspect",value:function(a){}},{key:"apply",value:function(a){a=void 0===a?!1:a;var f=this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(f.active||!f.container||!f.container.submorphs.length||!f.layoutableSubmorphs.length)return q.return();f.layoutableSubmorphBounds||f.refreshBoundsCache();Nb._get(Object.getPrototypeOf(l.prototype),
"apply",f).call(f,a);f.active=!0;try{m=f.computeMinContainerExtent(),f.layoutSubmorphs(m,a),m=f.computeMinContainerExtent(),f.resizeContainer(m,a),f.lastBoundsExtent=f.container.bounds().extent()}finally{f.active=!1,f.layoutRequests=!1}return q.return(f.animationPromise)})}},{key:"resizeContainer",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FloatLayout"}}],c,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:8356,end:10764})})(pd.Layout);var ix=ya("ap",function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=c.hasOwnProperty("VerticalLayout")&&"function"===typeof c.VerticalLayout?c.VerticalLayout:c.VerticalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._align=a.align||"left";this._direction=a.direction||"topToBottom"}},{key:"name",value:function(){return"Vertical"}},{key:"description",value:function(){return"Assemble the submorphs in a vertically growing list."}},{key:"equals",value:function(a){return Nb._get(Object.getPrototypeOf(l.prototype),
"equals",this).call(this,a)&&a.name&&"Vertical"==a.name()?!0:!1}},{key:"possibleDirectionValues",get:function(){return["topToBottom","bottomToTop","centered"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"__serialize__",value:function(){return{__expr__:"new VerticalLayout("+pd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["VerticalLayout"]}}}},{key:"layoutSubmorphs",value:function(a,f){var m=this,q=this.container,r=this.layoutableSubmorphs,u=this.spacing,
v=this.autoResize,y=this.align,z=this.resizeSubmorphs,A=this.getStartY(a),C=[];a=z?q.width:a.x;v=v&&!z;var G=function(F,N){r.reduce(function(L,W){z&&m.changePropertyAnimated(W,"width",q.width-2*u,f);m.forceLayoutsOfMorph(W);m.changePropertyAnimated(W,F,L,f);L=W.bounds();C.push(L);return L[F]().addXY(0,L.height+u)},N)};this.layoutableSubmorphBounds=C;"left"===y?G("topLeft",pd.pt(u,A)):"right"===y?G("topRight",pd.pt(a+(v?u:-u),A)):G("topCenter",pd.pt((a+(v?2*u:0))/2,A))}},{key:"resizeContainer",value:function(a,
f){var m=this.direction,q=this.layoutableSubmorphs,r=this.resizeSubmorphs,u=this.spacing,v=this.container;this.autoResize&&("centered"===m?(m=q[0].top,q=pd.arr.last(q).bottom+m):q=pd.arr.last(q).bottom+u,a=pd.pt(r?v.width:a.x+2*u,Math.max(q,a.y)),this.changePropertyAnimated(v,"extent",a,f))}},{key:"getStartY",value:function(a){var f=this.layoutableSubmorphBounds,m=this.spacing,q=this.direction;var r=(f.length-1)*m;f=$jscomp.makeIterator(f);for(var u=f.next();!u.done;u=f.next())r+=u.value.height;return Math.max(0,
"bottomToTop"===q?a.y-r-2*m:"centered"===q?a.y/2-r/2-m:0)+m}},{key:"computeMinContainerExtent",value:function(){for(var a=this.container,f=this.layoutableSubmorphs,m=this.autoResize,q=(f.length+1)*this.spacing,r=0,u=0,v=0;v<f.length;v++){var y=f[v].bounds(),z=y.width;u+=y.height;r=Math.max(z,r)}f=pd.pt(r,u+q);m||(f=f.maxPt(a.extent));return f}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):a.top}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VerticalLayout"}}],
c,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10773,end:14741})}(pd.FloatLayout));pd.VerticalLayout=ix;pd.VerticalLayout=ix;pd.VerticalLayout=ix;var fs=ya("aD",function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=c.hasOwnProperty("HorizontalLayout")&&"function"===
typeof c.HorizontalLayout?c.HorizontalLayout:c.HorizontalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._direction=a.direction||"leftToRight";this._align=a.align||"top"}},{key:"name",value:function(){return"Horizontal"}},
{key:"description",value:function(){return"Assemble the submorphs in a horizontally growing list."}},{key:"possibleDirectionValues",get:function(){return["leftToRight","rightToLeft","centered"]}},{key:"possibleAlignValues",get:function(){return["top","center","bottom"]}},{key:"__serialize__",value:function(){return{__expr__:"new HorizontalLayout("+pd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["HorizontalLayout"]}}}},{key:"equals",value:function(a){return Nb._get(Object.getPrototypeOf(l.prototype),
"equals",this).call(this,a)&&a.name&&"Horizontal"==a.name()?!0:!1}},{key:"layoutSubmorphs",value:function(a,f){var m=this,q=this.container,r=this.layoutableSubmorphs,u=this.resizeSubmorphs,v=this.spacing,y=this.autoResize,z=this.align,A=this.getStartX(a),C=[];a=u?q.height:a.y;y=y&&!u;var G=function(F,N){r.reduce(function(L,W){u&&m.changePropertyAnimated(W,"height",q.height-2*v,f);m.forceLayoutsOfMorph(W);m.changePropertyAnimated(W,F,L,f);L=W.bounds();C.push(L);return L[F]().addXY(L.width+v,0)},N)};
this.layoutableSubmorphBounds=C;"top"===z?G("topLeft",pd.pt(A,v)):"bottom"===z?G("bottomLeft",pd.pt(A,a+(y?v:-v))):G("leftCenter",pd.pt(A,(a+(y?2*v:0))/2))}},{key:"resizeContainer",value:function(a,f){var m=this.direction,q=this.layoutableSubmorphBounds,r=this.resizeSubmorphs,u=this.spacing,v=this.container;this.autoResize&&("centered"===m?(m=q[0].left(),q=pd.arr.last(q).right()+m):q=pd.arr.last(q).right()+u,a=pd.pt(Math.max(a.x,q),r?v.height:a.y+2*u),this.changePropertyAnimated(v,"extent",a,f))}},
{key:"getStartX",value:function(a){var f=this.layoutableSubmorphBounds,m=this.spacing,q=this.direction;var r=(f.length-1)*m;f=$jscomp.makeIterator(f);for(var u=f.next();!u.done;u=f.next())r+=u.value.width;return Math.max(0,"rightToLeft"===q?a.x-r-2*m:"centered"===q?a.x/2-r/2-m:0)+m}},{key:"computeMinContainerExtent",value:function(){for(var a=this.container,f=this.layoutableSubmorphBounds,m=this.autoResize,q=(f.length+1)*this.spacing,r=0,u=0,v=0;v<f.length;v++){var y=f[v],z=y.height;r+=y.width;u=
Math.max(z,u)}f=pd.pt(r+q,u);m||(f=f.maxPt(a.extent));return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HorizontalLayout"}}],c,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14750,end:18667})}(pd.FloatLayout));pd.HorizontalLayout=fs;pd.HorizontalLayout=fs;pd.HorizontalLayout=
fs;var QE=ya("aE",function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=c.hasOwnProperty("ProportionalLayout")&&"function"===typeof c.ProportionalLayout?c.ProportionalLayout:c.ProportionalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"name",value:function(){return"Proportional"}},{key:"description",value:function(){return"Resizes, scales, and moves morphs according to their original position."}},
{key:"inspect",value:function(a){}},{key:Symbol.for("lively-instance-initialize"),value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.extentDelta=pd.pt(0,0);this.proportionalLayoutSettingsForMorphs=new WeakMap;this.submorphSettings=a&&a.submorphSettings||[];this.lastExtent=a.lastExtent;delete this.spacing;delete this.autoResize}},{key:"getSpec",value:function(){return{submorphSettings:this.submorphSettings,reactToSubmorphAnimations:this.reactToSubmorphAnimations,
lastExtent:this.lastExtent}}},{key:"__serialize__",value:function(){return{__expr__:"new ProportionalLayout("+pd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["ProportionalLayout"]}}}},{key:"__dont_serialize__",get:function(){return[].concat($jscomp.arrayFromIterable(Nb._get(Object.getPrototypeOf(l.prototype),"__dont_serialize__",this)),["extentDelta","lastExtent"])}},{key:"__after_deserialize__",value:function(a,f){var m=this._submorphSettings;a=this.container;f=this.proportionalLayoutSettingsForMorphs||
new WeakMap;this.extentDelta=pd.pt(0,0);if(m&&a){m=$jscomp.makeIterator(m);for(var q=m.next();!q.done;q=m.next()){var r=$jscomp.makeIterator(q.value);q=r.next().value;r=r.next().value;(q=$jscomp.makeIterator(this._morphsMatchingSelector(a,q)).next().value)&&f.set(q,r)}this.proportionalLayoutSettingsForMorphs=f}}},{key:"onSubmorphChange",value:function(a,f,m,q){"name"===f.prop&&(m=this.proportionalLayoutSettingsForMorphs.get(a))&&this.changeSettingsFor(a,m,!0);return Nb._get(Object.getPrototypeOf(l.prototype),
"onSubmorphChange",this).call(this,a,f)}},{key:"settingsFor",value:function(a){return this.proportionalLayoutSettingsForMorphs.get(a)||{x:"scale",y:"scale"}}},{key:"changeSettingsFor",value:function(a,f,m){m=void 0===m?!1:m;"string"===typeof f&&(f={x:f,y:f});this.proportionalLayoutSettingsForMorphs.set(a,Object.assign({},this.settingsFor(a),{},f));m&&(f=this.submorphSettings.filter(function(q){return q[0]!==a.name}),f.push([a.name,this.settingsFor(a)]),this._submorphSettings=f)}},{key:"submorphSettings",
get:function(){return this._submorphSettings}},{key:"submorphSettings",set:function(a){if(this.container)this._submorphSettings=a,this.changeSubmorphSettings(a);else pd.once(this,"container",this,"submorphSettings",{converter:"function () { return submorphSettings }",varMapping:{submorphSettings:a}})}},{key:"changeSubmorphSettings",value:function(a){var f=this,m={};a=$jscomp.makeIterator(a);for(var q=a.next();!q.done;m={$jscomp$loop$prop$setting$2553:m.$jscomp$loop$prop$setting$2553},q=a.next()){q=
$jscomp.makeIterator(q.value);var r=q.next().value;m.$jscomp$loop$prop$setting$2553=q.next().value;this._morphsMatchingSelector(this.container,r).forEach(function(u){return function(v){return f.changeSettingsFor(v,u.$jscomp$loop$prop$setting$2553)}}(m))}}},{key:"_morphsMatchingSelector",value:function(a,f){var m=this,q=[];if(!f)return q;f.isMorph?q=[f]:f instanceof RegExp?q=a.submorphs.filter(function(r){return r.name.match(f)}):"string"===typeof f?q=a.submorphs.filter(function(r){return r.name===
f}):Array.isArray(f)&&(q=pd.arr.flatmap(f,function(r){return m._morphsMatchingSelector(a,r)}));return q}},{key:"refreshBoundsCache",value:function(){var a=this.container.extent,f=this.lastExtent;f&&!a.eqPt(f)&&(this.extentDelta=this.extentDelta.addPt(a.subPt(f)));this.lastExtent=a;this.layoutableSubmorphBounds=this.layoutableSubmorphs.map(function(m){return m.bounds()})}},{key:"apply",value:function(a){a=void 0===a?!1:a;var f=this.container,m=this.extentDelta,q=m.x;m=m.y;var r=(f||{}).extent;if(!this.active&&
f&&(0!=q||0!=m)){this.extentDelta=pd.pt(0,0);this.active=!0;Nb._get(Object.getPrototypeOf(l.prototype),"apply",this).call(this,a);var u=this.layoutableSubmorphs;f=r.scaleByPt(r.addXY(-q,-m).invertedSafely());r=$jscomp.makeIterator(u);for(u=r.next();!u.done;u=r.next()){u=u.value;var v=this.settingsFor(u),y=v.x,z=v.y,A=v=0,C=0,G=0;"move"===y&&(v=q);"move"===z&&(A=m);"resize"===y&&(C=q);"resize"===z&&(G=m);if("scale"===y||"scale"===z)y=pd.pt("scale"===y?f.x:1,"scale"===z?f.y:1),this.changePropertyAnimated(u,
"position",u.position.scaleByPt(y),a),this.changePropertyAnimated(u,"extent",u.extent.scaleByPt(y),a);(v||A)&&this.changePropertyAnimated(u,"position",u.position.addXY(v,A),a);(C||G)&&this.changePropertyAnimated(u,"extent",u.extent.addXY(C,G),a)}this.forceLayoutsInNextLevel();this.active=!1}}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayout"}}],c,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:18676,end:24220})}(pd.Layout));pd.ProportionalLayout=QE;pd.ProportionalLayout=QE;pd.ProportionalLayout=QE;var RE=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=c.hasOwnProperty("CenteredTilingLayout")&&"function"===typeof c.CenteredTilingLayout?c.CenteredTilingLayout:
c.CenteredTilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"name",value:function(){return"CenteredTiling"}},{key:"description",value:function(){return"Similar to TilingLayout but center the rows."}},{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;Nb._get(Object.getPrototypeOf(l.prototype),"apply",this).call(this,a);a=this.getOptimalWidth(this.container);
var f=this.spacing,m=this.layoutableSubmorphs,q=f+this.border.top;m=m.slice();for(var r={};m.length;){r.$jscomp$loop$prop$remainingWidth$2555=a;var u=pd.arr.takeWhile(m,function(z){return function(A){A=z.$jscomp$loop$prop$remainingWidth$2555-(A.width+2*f);if(0>A)return!1;z.$jscomp$loop$prop$remainingWidth$2555=A;return!0}}(r));u.length?m=pd.arr.withoutAll(m,u):(u=[m.shift()],r.$jscomp$loop$prop$remainingWidth$2555=0);var v=pd.pt(r.$jscomp$loop$prop$remainingWidth$2555/2+f+this.border.left,q);u=$jscomp.makeIterator(u);
for(var y=u.next();!y.done;y=u.next())y=y.value,y.position=v,v=v.addXY(2*f+y.width,0),q=Math.max(q,y.bottom);q+=2*f;r={$jscomp$loop$prop$remainingWidth$2555:r.$jscomp$loop$prop$remainingWidth$2555}}this.active=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CenteredTilingLayout"}}],c,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:24229,end:25525})}(pd.TilingLayout);pd.CenteredTilingLayout=RE;pd.CenteredTilingLayout=RE;pd.CenteredTilingLayout=RE;var SE=ya("b1",function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=c.hasOwnProperty("TilingLayout")&&"function"===typeof c.TilingLayout?c.TilingLayout:c.TilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){a=void 0===a?{}:a;Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._axis=a.axis||"row";this._align=a.align||"left";this._verticalAlign=a.verticalAlign||"top";this._orderByIndex=a.orderByIndex||!1;delete this.autoResize}},{key:"name",value:function(){return"Tiling"}},{key:"description",value:function(){return"Make the submorphs fill their owner, inserting breaks to defer intersecting the bounds as much as possible."}},{key:"inspect",
value:function(a){}},{key:"__serialize__",value:function(){return{__expr__:"new TilingLayout("+pd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["TilingLayout"]}}}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"getSpec",value:function(){return{axis:this.axis,align:this.align,spacing:this.spacing,orderByIndex:this.orderByIndex,reactToSubmorphAnimations:this.reactToSubmorphAnimations}}},{key:"possibleAxisValues",get:function(){return["row","columns"]}},
{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"axis",get:function(){return this._axis}},{key:"axis",set:function(a){this._axis=a;this.apply()}},{key:"align",get:function(){return this._align}},{key:"align",set:function(a){this._align=a;this.apply()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=
a;this.apply()}},{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;Nb._get(Object.getPrototypeOf(l.prototype),"apply",this).call(this,a);var f=this.axis,m=this.align,q=this.border,r=this.spacing,u=this.layoutableSubmorphs,v=this.getOptimalWidth(this.container),y=(f="row"==f)?"left":"top",z=f?"x":"y",A=f?"y":"x",C=0,G=r+q[f?"top":"left"],F="topLeft";switch(this._verticalAlign){case "top":F="topLeft";break;case "center":F="leftCenter";break;case "bottom":F=
"bottomLeft"}for(;u.length;){var N=v-r,L=pd.arr.takeWhile(u,function(wa){wa=wa.bounds().extent();wa=N-(wa[z]+r);if(0>wa)return!1;N=wa;return!0});L.length?u.splice(0,L.length):(L=[u.shift()],N=0);C=pd.arr.max(L.map(function(wa){return wa.bounds().extent()[A]}));if(f)switch(m){case "left":var W=pd.pt(r,G);break;case "center":W=pd.pt(N/2+r+q[y],G);break;case "right":W=pd.pt(N-r,G)}else switch(m){case "left":W=pd.pt(G,r);break;case "center":W=pd.pt(G,N/2+r+q[y]);break;case "right":W=pd.pt(G,N-r)}"bottomLeft"==
F&&(W=W.addXY(0,C));L=$jscomp.makeIterator(L);for(var la=L.next();!la.done;la=L.next())la=la.value,this.changePropertyAnimated(la,F,W,a),la=la.bounds().extent(),W=f?W.addXY(r+la[z],0):W.addXY(0,r+la[z]);G+=r+C;C=0}this.active=!1}}},{key:"getMinWidth",value:function(){var a=this.border,f=a.left;a=a.right;return this.layoutableSubmorphs.reduce(function(m,q){return q.bounds().width>m?q.bounds().width:m},0)+f+a}},{key:"getMinHeight",value:function(){var a=this.border,f=a.top;a=a.bottom;return this.layoutableSubmorphs.reduce(function(m,
q){return q.bounds().height>m?q.bounds().height:m},0)+f+a}},{key:"getOptimalWidth",value:function(a){var f=this.axis,m=this.border,q=m.left,r=m.top,u=m.right;m=m.bottom;a="row"==f?a.width-q-u:a.height-r-m;f="row"==f?this.getMinWidth():this.getMinHeight();return Math.max(a,f)}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):"row"===this.axis?1E6*(a.top-a.top%15)+a.left:1E6*(a.left-a.left%15)+a.top}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayout"}}],
c,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:25534,end:31071})}(pd.Layout));pd.TilingLayout=SE;pd.TilingLayout=SE;pd.TilingLayout=SE;var TE=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=c.hasOwnProperty("CellGroup")&&"function"===typeof c.CellGroup?
c.CellGroup:c.CellGroup=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=a.morph,m=a.layout;this.state={cells:[a.cell],layout:m,align:a.align,resize:m.fitToCell};m&&m.addGroup(this);this.morph=f}},{key:"morph",get:function(){var a=this.state,f=a.morph;a=a.layout;return f?f.isMorph?f:a.layoutableSubmorphs.find(function(m){return m.name==
f}):null}},{key:"compensateOrigin",get:function(){return this.layout.compensateOrigin}},{key:"resize",get:function(){return this.state.resize}},{key:"resize",set:function(a){this.state.resize=a;this.layout.apply()}},{key:"align",get:function(){return this.state.align||"topLeft"}},{key:"align",set:function(a){this.state.align=a;this.layout.apply()}},{key:"morph",set:function(a){var f=a&&this.layout.getCellGroupFor(a);f&&(f.morph=null);this.state.morph=a;this.layout.apply()}},{key:"manages",value:function(a){return this.morph&&
(this.morph==a||this.morph.name==a)}},{key:"apply",value:function(a){a=void 0===a?!1:a;var f=this.morph;if(f){var m=this.bounds(),q=this.compensateOrigin?this.layout.container.origin.negated():pd.pt(0,0);if(a){var r=this.resize?m.extent():f.extent,u=a;a=u.duration;u=u.easing;var v={};f.animate((v[this.alignedProperty||this.align]=m[this.align]().addPt(q),v.extent=r,v.duration=a,v.easing=u,v))}else this.resize&&(f.extent=m.extent()),f[this.alignedProperty||this.align]=m[this.align]().addPt(q);this.layout.forceLayoutsInNextLevel()}}},
{key:"cells",get:function(){return this.state.cells}},{key:"layout",get:function(){return this.state.layout}},{key:"bounds",value:function(){return 0<this.cells.length?this.cells.map(function(a){return a.bounds()}).reduce(function(a,f){return a.union(f)}):pd.rect(0,0,0,0)}},{key:"includes",value:function(a){return this.cells.find(function(f){return f==a})}},{key:"connect",value:function(a){void 0==this.morph&&(this.morph=a.group.morph);a.group?a.group.disconnect(a,this):a.group=this;this.cells.push(a)}},
{key:"disconnect",value:function(a,f){a.group=(void 0===f?null:f)||new pd.CellGroup({morph:null,layout:this.layout,cell:a});pd.arr.remove(this.cells,a);1>this.cells.length&&this.layout&&this.layout.removeGroup(this)}},{key:"merge",value:function(a){var f=this;a.cells.forEach(function(m){f.connect(m)})}},{key:"topLeft",get:function(){var a=this;return this.cells.find(function(f){return(null==f.left||f.left.group!=a)&&(null==f.top||f.top.group!=a)})}},{key:"bottomRight",get:function(){var a=this;return this.cells.find(function(f){return(null==
f.right||f.right.group!=a)&&(null==f.bottom||f.bottom.group!=a)})}},{key:"position",get:function(){return this.topLeft.position}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGroup"}}],c,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:31080,end:34312})}(void 0);pd.CellGroup=
TE;pd.CellGroup=TE;pd.CellGroup=TE;(function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=c.hasOwnProperty("LayoutAxis")&&"function"===typeof c.LayoutAxis?c.LayoutAxis:c.LayoutAxis=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.origin=a}},{key:"otherAxis",get:function(){return[].concat($jscomp.arrayFromIterable(this.axisBefore),
$jscomp.arrayFromIterable(this.axisAfter))}},{key:"axisBefore",get:function(){for(var a=this,f=[];a=a.before;)f=[a].concat($jscomp.arrayFromIterable(f));return f}},{key:"axisAfter",get:function(){for(var a=this,f=[];a=a.after;)f=[].concat($jscomp.arrayFromIterable(f),[a]);return f}},{key:"before",get:function(){throw Error("before() not implemented!");}},{key:"after",get:function(){throw Error("after() not implemented!");}},{key:"containerLength",get:function(){return this.container[this.dimension]}},
{key:"containerLength",set:function(a){this.container[this.dimension]=a}},{key:"getRoot",value:function(){return(this.axisBefore[0]||this).items[0]}},{key:"container",get:function(){return this.origin.container}},{key:"layout",get:function(){return this.origin.layout}},{key:"frozen",get:function(){return this.origin.frozen[this.dimension]}},{key:"frozen",set:function(a){this.origin.frozen[this.dimension]=a}},{key:"align",set:function(a){this.items.forEach(function(f){return f.group.state.align=a})}},
{key:"fixed",get:function(){return this.origin.fixed[this.dimension]}},{key:"fixed",set:function(a){var f=this;if(pd.obj.isNumber(a)){var m=a;a=!0}this.items.forEach(function(r){r.fixed[f.dimension]=a});var q=this.containerLength;void 0!=m&&(this[this.dimension]=m);this.adjustOtherProportions(a);this.containerLength=q}},{key:"length",get:function(){return this.origin[this.dimension]}},{key:"length",set:function(a){var f=this;this.items.forEach(function(m){m[f.dimension]=pd.num.roundTo(a,1)})}},{key:"proportion",
get:function(){return this.origin.proportion[this.dimension]}},{key:"proportion",set:function(a){var f=this;this.items.forEach(function(m){m.proportion[f.dimension]=a})}},{key:"min",get:function(){return this.origin.min[this.dimension]}},{key:"min",set:function(a){this.adjustMin(a-this.min)}},{key:"adjustMin",value:function(a){var f=this;this.items.forEach(function(m){m.min[f.dimension]=0>m.min[f.dimension]+a?0:m.min[f.dimension]+a});this.layout.apply()}},{key:"adjustProportion",value:function(){this.fixed||
(this.proportion=0<this.dynamicLength?this.length/this.dynamicLength:0)}},{key:"adjustOtherProportions",value:function(a){var f=this,m=this.axisBefore,q=this.axisAfter,r=pd.arr.sum([].concat($jscomp.arrayFromIterable(m),$jscomp.arrayFromIterable(q)).filter(function(y){return!y.fixed}).map(function(y){return y.proportion})),u=function(y){return y.proportion/=r},v=function(y){return y.proportion*=f.origin.removedDynamicProportions};a&&(this.origin.removedDynamicProportions=r);m.forEach(a?u:v);q.forEach(a?
u:v)}},{key:"prepareForResize",value:function(a){a=this.proportion*Math.max(0,a-this.staticLength);this.frozen&&a>=this.min?(this.fixed=this.frozen=!1,this.length=a):!this.frozen&&this.min>a&&(this.fixed=this.frozen=!0,this.length=this.min);return this}},{key:"adjustLength",value:function(a){var f;0>this.length+a&&(a=-this.length);(f=this.axisAfter.find(function(m){return!m.fixed}))?(a=Math.min(a,f.length),this.length+=a,f.length-=a,this.adjustProportion(),f.adjustProportion()):(f=this.axisBefore.reverse().find(function(m){return!m.fixed}))?
(f.length-=a,this.length+=a,this.adjustProportion(),f.adjustProportion()):(this.length+=a,this.adjustProportion(),this.otherAxis.forEach(function(m){return m.adjustProportion()}),this.containerLength+=a)}},{key:"equalizeDynamicAxis",value:function(){var a=[].concat($jscomp.arrayFromIterable(this.otherAxis.filter(function(m){return!m.fixed})),$jscomp.arrayFromIterable(this.fixed?[]:[this])),f=(this.containerLength-this.staticLength)/a.length;a.map(function(m){m.fixed||(m.length=f);return m}).forEach(function(m){return m.adjustProportion()})}},
{key:"addBefore",value:function(){var a=this.emptyAxis();this.before&&this.before.attachTo(a);a.attachTo(this);this.equalizeDynamicAxis();this.layout.grid=this.getRoot()}},{key:"addAfter",value:function(){var a=this.emptyAxis();this.after&&a.attachTo(this.after);this.attachTo(a);this.equalizeDynamicAxis();this.layout.grid=this.getRoot()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutAxis"}}],c,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:34952,end:40669})})(void 0);var UE=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=c.hasOwnProperty("LayoutColumn")&&"function"===typeof c.LayoutColumn?c.LayoutColumn:c.LayoutColumn=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,
[{key:Symbol.for("lively-instance-initialize"),value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.above),[a],$jscomp.arrayFromIterable(a.below))}},{key:"dimension",get:function(){return"width"}},{key:"before",get:function(){return this._before||(this._before=this.origin.left&&new pd.LayoutColumn(this.origin.left))}},{key:"after",get:function(){return this._after||(this._after=this.origin.right&&
new pd.LayoutColumn(this.origin.right))}},{key:"row",value:function(a){return this.items[a]}},{key:"dynamicLength",get:function(){return this.origin.dynamicWidth}},{key:"staticLength",get:function(){return this.origin.totalStaticWidth}},{key:"width",get:function(){return this.length}},{key:"width",set:function(a){a-=this.width;this.fixed?(this.length+=a,this.container.width+=a):this.adjustLength(a);!this.layout.manualUpdate&&this.layout.apply()}},{key:"paddingLeft",set:function(a){this.items.forEach(function(f){f.padding.x=
a});this.layout.apply()}},{key:"paddingLeft",get:function(){return this.items[0].padding.x}},{key:"paddingRight",set:function(a){this.items.forEach(function(f){f.padding.width=a});this.layout.apply()}},{key:"paddingRight",get:function(){return this.items[0].padding.width}},{key:"emptyAxis",value:function(){var a=new pd.LayoutColumn(new pd.LayoutCell({column:pd.arr.withN(this.items.length,null),layout:this.layout}));pd.arr.zip(a.items,this.items).forEach(function(f){var m=$jscomp.makeIterator(f);f=
m.next().value;m=m.next().value;f.height=m.height;f.fixed.height=m.fixed.height;f.frozen.height=m.frozen.height;f.proportion.height=m.proportion.height;f.min.height=m.min.height});return a}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=null;pd.arr.zip(this.items,a.items).forEach(function(f){var m=$jscomp.makeIterator(f);f=m.next().value;m=m.next().value;f.right=m;m.left=f});this.equalizeDynamicAxis();return a}},{key:"remove",value:function(){var a=this,f=this.before||
this.after;this.items.forEach(function(m){m.left&&(m.left.right=m.right);m.right&&(m.right.left=m.left);m.group.disconnect(m);a.layout.removeGroup(m.group)});this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=this.after.getRoot());f.equalizeDynamicAxis()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutColumn"}}],c,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:40678,end:43052})}(pd.LayoutAxis);pd.LayoutColumn=UE;pd.LayoutColumn=UE;pd.LayoutColumn=UE;var VE=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=c.hasOwnProperty("LayoutRow")&&"function"===typeof c.LayoutRow?c.LayoutRow:c.LayoutRow=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.before),[a],$jscomp.arrayFromIterable(a.after))}},{key:"dimension",get:function(){return"height"}},{key:"emptyAxis",value:function(){var a=new pd.LayoutRow(new pd.LayoutCell({row:pd.arr.withN(this.items.length,null),layout:this.layout}));pd.arr.zip(a.items,this.items).forEach(function(f){var m=
$jscomp.makeIterator(f);f=m.next().value;m=m.next().value;f.width=m.width;f.fixed.width=m.fixed.width;f.frozen.width=m.frozen.width;f.proportion.width=m.proportion.width;f.min.width=m.min.width});return a}},{key:"paddingTop",set:function(a){this.items.forEach(function(f){f.padding.y=a});this.layout.apply()}},{key:"paddingTop",get:function(){return this.items[0].padding.y}},{key:"paddingBottom",set:function(a){this.items.forEach(function(f){f.padding.height=a});this.layout.apply()}},{key:"paddingBottom",
get:function(){return this.items[0].padding.height}},{key:"before",get:function(){return this._before||(this._before=this.origin.top&&new pd.LayoutRow(this.origin.top))}},{key:"after",get:function(){return this._after||(this._after=this.origin.bottom&&new pd.LayoutRow(this.origin.bottom))}},{key:"dynamicLength",get:function(){return this.origin.dynamicHeight}},{key:"staticLength",get:function(){return this.origin.totalStaticHeight}},{key:"attachTo",value:function(a){this.after&&(this.after._before=
null);this._after=null;pd.arr.zip(this.items,a.items).forEach(function(f){var m=$jscomp.makeIterator(f);f=m.next().value;m=m.next().value;f.bottom=m;m.top=f});this.equalizeDynamicAxis();return a}},{key:"col",value:function(a){return this.items[a]}},{key:"height",get:function(){return this.length}},{key:"height",set:function(a){a-=this.height;this.fixed?(this.length+=a,this.container.height+=a):(this.adjustLength(a),this.proportion=0<this.origin.dynamicHeight?this.height/this.origin.dynamicHeight:
0);!this.layout.manualUpdate&&this.layout.apply()}},{key:"remove",value:function(){var a=this,f=this.before||this.after;this.items.forEach(function(m){m.top&&(m.top.bottom=m.bottom);m.bottom&&(m.bottom.top=m.top);m.group.disconnect(m);a.layout.removeGroup(m.group)});this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=this.after.getRoot());f.equalizeDynamicAxis()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutRow"}}],c,
{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:43061,end:45522})}(pd.LayoutAxis);pd.LayoutRow=VE;pd.LayoutRow=VE;pd.LayoutRow=VE;var WE=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=c.hasOwnProperty("LayoutCell")&&"function"===typeof c.LayoutCell?c.LayoutCell:
c.LayoutCell=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=a.row,m=a.column,q=a.top,r=a.left,u=a.right,v=a.bottom;a=a.layout;var y;f=$jscomp.makeIterator(f||[]);var z=f.next().value;f=$jscomp.arrayFromIterator(f);m=$jscomp.makeIterator(m||[]);var A=m.next().value;m=$jscomp.arrayFromIterator(m);this.layout=a;this.fixed={width:!1,height:!1};
this.frozen={width:!1,height:!1};this.min={width:0,height:0};this.top=q;this.left=r;this.bottom=v;this.right=u;this.padding=pd.rect(0,0,0,0);0<f.length?this.right=new pd.LayoutCell({row:f,left:this,layout:a}):0<m.length&&(this.bottom=new pd.LayoutCell({column:m,top:this,layout:a}));this.proportion={width:1/(1+this.before.length+this.after.length),height:1/(1+this.above.length+this.below.length)};this.height=this.container.height*this.proportion.height;this.width=this.container.width*this.proportion.width;
(y=a&&a.getCellGroupFor(z||A))?y.connect(this):this.group=new pd.CellGroup({cell:this,morph:z||A,layout:a})}},{key:"container",get:function(){return this.layout.container}},{key:"above",get:function(){return this.collect({neighbor:"top",prepend:!0})}},{key:"below",get:function(){return this.collect({neighbor:"bottom",append:!0})}},{key:"before",get:function(){return this.collect({neighbor:"left",prepend:!0})}},{key:"after",get:function(){return this.collect({neighbor:"right",append:!0})}},{key:"collect",
value:function(a){var f=a.neighbor,m=a.prepend;a=a.append;for(var q=[],r=this;r=r[f];)m&&(q=[r].concat($jscomp.arrayFromIterable(q))),a&&(q=[].concat($jscomp.arrayFromIterable(q),[r]));return q}},{key:"col",value:function(a){for(var f=this,m=a;0<m&&f;)f=f.right,m--;if(!f)throw Error(a+" out of bounds! Last column was "+(a-m-1));return new pd.LayoutColumn(f)}},{key:"row",value:function(a){for(var f=this,m=a;0<m&&f;)f=f.bottom,m--;if(!f)throw Error(a+" out of bounds! Last row was "+(a-m-1));return new pd.LayoutRow(f)}},
{key:"extent",get:function(){return pd.pt(this.width,this.height)}},{key:"staticWidth",get:function(){return this.fixed.width||this.min.width==this.width}},{key:"staticHeight",get:function(){return this.fixed.height||this.min.height==this.height}},{key:"totalStaticWidth",get:function(){return pd.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),$jscomp.arrayFromIterable(this.after)).filter(function(a){return a.staticWidth}).map(function(a){return a.width}))}},{key:"totalStaticHeight",get:function(){return pd.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),
$jscomp.arrayFromIterable(this.below)).filter(function(a){return a.staticHeight}).map(function(a){return a.height}))}},{key:"dynamicWidth",get:function(){return pd.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),$jscomp.arrayFromIterable(this.after)).filter(function(a){return!a.staticWidth}).map(function(a){return a.width}))}},{key:"dynamicHeight",get:function(){return pd.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return!a.staticHeight}).map(function(a){return a.height}))}},
{key:"height",get:function(){return Math.max(this.min.height,this._height||0)}},{key:"height",set:function(a){this._height=a}},{key:"width",get:function(){return Math.max(this.min.width,this._width||0)}},{key:"width",set:function(a){this._width=a}},{key:"position",get:function(){return pd.pt(pd.arr.sum(this.before.map(function(a){return a.width})),pd.arr.sum(this.above.map(function(a){return a.height})))}},{key:"bounds",value:function(){return this.position.addPt(this.padding.topLeft()).extent(this.extent.subPt(this.padding.extent()).subPt(this.padding.topLeft()))}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutCell"}}],c,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:45531,end:49183})}(void 0);pd.LayoutCell=WE;pd.LayoutCell=WE;pd.LayoutCell=WE;var jx=ya("aq",function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
l=c.hasOwnProperty("GridLayout")&&"function"===typeof c.GridLayout?c.GridLayout:c.GridLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);a=Object.assign({autoAssign:!0,fitToCell:!0},a);this.cellGroups=[];this.config=a}},{key:"name",value:function(){return"Grid"}},
{key:"description",value:function(){return"Aligns the submorphs alongside a configurable grid. Columns and rows and be configured to have different proportional, minimal or fixed sizes. Cells can further be grouped such that submorphs fill up multiple slots of the grid."}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"getSpec",value:function(){for(var a=[],f=[],m=[],q={},r=$jscomp.makeIterator(pd.arr.range(0,this.rowCount-1)),u=r.next();!u.done;u=r.next())a.push(this.grid.row(u.value).items.map(function(y){return y.group.state.morph?
y.group.state.morph.name||y.group.state.morph:null}));r=$jscomp.makeIterator(pd.arr.range(0,this.rowCount-1));for(u=r.next();!u.done;u=r.next()){u=u.value;var v=this.grid.row(u);f.push(u,Object.assign({},v.fixed?{fixed:v.length}:{height:v.height},{paddingTop:v.paddingTop,paddingBottom:v.paddingBottom}))}r=$jscomp.makeIterator(pd.arr.range(0,this.columnCount-1));for(u=r.next();!u.done;u=r.next())u=u.value,v=this.grid.col(u),m.push(u,Object.assign({},v.fixed?{fixed:v.length}:{},{paddingLeft:v.paddingLeft,
paddingRight:v.paddingRight}));r=$jscomp.makeIterator(this.cellGroups);for(u=r.next();!u.done;u=r.next())u=u.value,u.state.morph&&(q["string"===typeof u.state.morph?u.state.morph:u.morph.name]=pd.obj.select(u,["align","resize"]));return{autoAssign:!1,grid:a,rows:f,columns:m,groups:q}}},{key:"__serialize__",value:function(){return{__expr__:"new GridLayout("+pd.obj.inspect(this.getSpec(),{escapeKeys:!0})+")",bindings:{"lively.morphic":["GridLayout"]}}}},{key:"initGrid",value:function(){var a=this,f=
this.ensureGrid(this.config).map(function(m){return new pd.LayoutRow(new pd.LayoutCell({row:m,layout:a}))});f.reduce(function(m,q){return m.attachTo(q)});this.config.autoAssign&&this.autoAssign(this.notInLayout);this.grid=f[0].col(0);this.col(0).equalizeDynamicAxis();this.row(0).equalizeDynamicAxis();this.initRowsAndColumns();this.initGroups()}},{key:"initGroups",value:function(){var a=this.config.groups;if(a)for(var f in a){var m=this.getCellGroupFor(this.container.getSubmorphNamed(f)),q=a[f],r=
q.resize,u=void 0===q.align?"topLeft":q.align;q=void 0===q.alignedProperty?"topLeft":q.alignedProperty;m&&(void 0!=r&&(m.resize=r),m.align=u,m.alignedProperty=q)}}},{key:"initRowsAndColumns",value:function(){var a=this.config,f=void 0===a.columns?[]:a.columns,m=$jscomp.makeIterator(pd.arr.toTuples(void 0===a.rows?[]:a.rows,2));for(a=m.next();!a.done;a=m.next()){var q=$jscomp.makeIterator(a.value);a=q.next().value;q=q.next().value;Object.assign(this.row(a),q)}f=$jscomp.makeIterator(pd.arr.toTuples(f,
2));for(a=f.next();!a.done;a=f.next())m=$jscomp.makeIterator(a.value),a=m.next().value,q=m.next().value,Object.assign(this.col(a),q)}},{key:"compensateOrigin",get:function(){return this.config.compensateOrigin}},{key:"compensateOrigin",set:function(a){this.config.compensateOrigin=a;this.apply()}},{key:"fitToCell",get:function(){return this.config.fitToCell}},{key:"fitToCell",set:function(a){this.config.fitToCell=a;this.cellGroups.forEach(function(f){return f.resize=a});this.apply()}},{key:"notInLayout",
get:function(){return pd.arr.withoutAll(this.layoutableSubmorphs,this.cellGroups.map(function(a){return a.morph}))}},{key:"col",value:function(a){return this.grid.col(a)}},{key:"row",value:function(a){return this.grid.row(a)}},{key:"rowCount",get:function(){return this.grid.col(0).items.length}},{key:"columnCount",get:function(){return this.grid.row(0).items.length}},{key:"addGroup",value:function(a){this.cellGroups.push(a)}},{key:"removeGroup",value:function(a){pd.arr.remove(this.cellGroups,a)}},
{key:"fitAxis",value:function(){var a=this,f,m;[this.grid.row(0)].concat($jscomp.arrayFromIterable(this.grid.row(0).axisAfter)).map(function(q){q.prepareForResize(a.container.height);f=a.grid.totalStaticHeight;return q}).forEach(function(q){q.fixed||(q.length=q.proportion*Math.max(0,a.container.height-f))});[this.grid.col(0)].concat($jscomp.arrayFromIterable(this.grid.col(0).axisAfter)).map(function(q){q.prepareForResize(a.container.width);m=a.grid.totalStaticWidth;return q}).forEach(function(q){q.fixed||
(q.length=q.proportion*Math.max(0,a.container.width-m))})}},{key:"apply",value:function(a){a=void 0===a?!1:a;this.active||(this.active=!0,Nb._get(Object.getPrototypeOf(l.prototype),"apply",this).call(this,a),this.grid||this.initGrid(),this.fitAxis(),this.container.extent=pd.pt(Math.max(this.grid.totalStaticWidth,this.container.width),Math.max(this.grid.totalStaticHeight,this.container.height)),this.fitAxis(),this.cellGroups.forEach(function(f){f&&f.apply(a)}),this.lastBoundsExtent=this.container.bounds().extent(),
this.active=!1)}},{key:"submorphBoundsChanged",get:function(){for(var a=$jscomp.makeIterator(this.cellGroups),f=a.next();!f.done;f=a.next())if(f=f.value,f.morph&&!f.bounds().equals(f.morph.bounds()))return!0;return!1}},{key:"getCellGroupFor",value:function(a){return a&&this.cellGroups.find(function(f){return f.morph==a})}},{key:"onSubmorphRemoved",value:function(a){var f=this.getCellGroupFor(a);f&&(f.morph=null);Nb._get(Object.getPrototypeOf(l.prototype),"onSubmorphRemoved",this).call(this,a)}},{key:"inspect",
value:function(a){}},{key:"ensureGrid",value:function(a){var f=this,m=a.grid,q=a.rowCount,r=a.columnCount;m=m||[[]];q=q||m.length;r=r||pd.arr.max(m.map(function(u){return u.length}));m.length<q&&(m=m.concat(pd.arr.withN(q-m.length,[])));return m=m.map(function(u){u.length<r&&(u=u.concat(pd.arr.withN(r-u.length,null)));return u.map(function(v){return v&&v.isMorph?(v.owner!=f.container&&f.container.addMorph(v),v):v?f.container.getSubmorphNamed(v)||v:v})})}},{key:"autoAssign",value:function(a){var f=
this;a.forEach(function(m){var q,r=Infinity;f.cellGroups.forEach(function(u){u.morph||u.cells.forEach(function(v){v=v.position.dist(m.position);v<r&&(q=u,r=v)})});q&&(q.morph=m)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayout"}}],c,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:49192,end:56229})}(pd.Layout));pd.GridLayout=jx;pd.GridLayout=jx;pd.GridLayout=jx;var c5=Object.freeze({__proto__:null,CustomLayout:OE,SnapLayout:PE,VerticalLayout:ix,HorizontalLayout:fs,ProportionalLayout:QE,CenteredTilingLayout:RE,TilingLayout:SE,CellGroup:TE,LayoutColumn:UE,LayoutRow:VE,LayoutCell:WE,GridLayout:jx});ya("bR",c5);var de=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js");de.getAllPartResources=BO;de.loadPart=RH;de.savePart=CO;de.interactivelySavePart=zD;de.interactivelyLoadObjectFromPartsBinFolder=
DO;de.interactivelySaveObjectToPartsBinFolder=EO;de.saveObjectToPartsbinFolder=FO;de.loadObjectFromPartsbinFolder=SH;de.buildCommitEditor=GO;de.resource=T;de.Resource=If;de.registerExtension=ma;de.Path=Xg;de.obj=lf;de.date=rt;de.promise=Kf;de.HorizontalLayout=fs;de.VerticalLayout=ix;de.morph=Gc;de.pt=fh;de.Color=wf;de.Rectangle=Pd;de.connect=uk;de.emit=Qm;de.SnapshotPackageHelper=mK;de.ensureCommitInfo=uD;de.MorphicDB=Jt;de.createMorphSnapshot=$x;de.getClassName=Li;de.getAllPartResources=BO;de.getAllPartResources=
BO;de.loadPart=RH;de.loadPart=RH;de.savePart=CO;de.savePart=CO;de.interactivelySavePart=zD;de.interactivelySavePart=zD;de.interactivelyLoadObjectFromPartsBinFolder=DO;de.interactivelyLoadObjectFromPartsBinFolder=DO;de.interactivelySaveObjectToPartsBinFolder=EO;de.interactivelySaveObjectToPartsBinFolder=EO;de.saveObjectToPartsbinFolder=FO;de.saveObjectToPartsbinFolder=FO;de.loadObjectFromPartsbinFolder=SH;de.loadObjectFromPartsbinFolder=SH;var PR=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),
l=c.hasOwnProperty("SnapshotEditor")&&"function"===typeof c.SnapshotEditor?c.SnapshotEditor:c.SnapshotEditor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f,m){this.commit=a;this.snapshot=f;this._db=m}},{key:"db",get:function(){return this._db||de.MorphicDB.default}},{key:"saveModifiedSnapshot",value:function(a,f){var m=this,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress){q=a;r=q._id;u=q.name;v=q.type;if(!r)throw Error("No id of commit, cannot save!");return y.yield(m.db.commit(v,u,f,a,void 0,r),2)}a=y.yieldResult;m.commit=a;m.snapshot=f;return y.return(a)})}},{key:"interactivelySaveModifiedSnapshot",value:function(a,f){var m=this,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){q=de.promise.deferred();r=q.promise;u=q.resolve;v=q.reject;y=m;Object.assign(de.buildCommitEditor(),{commit:Object.assign({},m.commit,{},a),cancel:function(){(this.getWindow()||
this).remove();v("canceled")},accept:function(){var A=this,C,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return F.setCatchFinallyBlocks(2),F.yield(y.saveModifiedSnapshot(A.commit,f),4);if(2!=F.nextAddress)return C=F.yieldResult,(A.getWindow()||A).remove(),u(A.commit=C),F.leaveTryBlock(0);G=F.enterCatchBlock();A.showError(G);v(G);F.jumpToEnd()})}}).openInWindow({title:"commit"});return z.return(r)})}},{key:"interactivelyEditMetadata",value:function(a){var f=
this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(f.interactivelySaveModifiedSnapshot(f.commit,f.snapshot),2);m=q.yieldResult;"function"===typeof a&&a({commit:m,snapshot:f.snapshot});return q.return(m)})}},{key:"interactivelyEditSnapshotJSON",value:function(a){var f=this,m,q,r,u,v,y,z,A,C,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return m=f,q=m.commit,r=m.snapshot,u=q,v=u._id,y=u.name,z=u.type,F.yield(System.import("lively.ide/text-editor.js"),
2);C=F.yieldResult;G=C.default;G.openURL("<"+z+"/"+y+">",{historyId:"object-serialization-debugger-editor",customSaveAction:function(N){var L,W,la,wa,D,Q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:if(L=r){J.jumpTo(2);break}return J.yield(f.db.fetchSnapshot(void 0,void 0,v),3);case 3:L=J.yieldResult;case 2:W=L;la=JSON.stringify(W,null,2);if(la===A){J.jumpTo(4);break}return J.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",
{fontWeight:"normal"}]),5);case 5:if(wa=J.yieldResult,!wa)return J.return({saved:!1,message:"canceled"});case 4:return D=JSON.parse(N.ui.contentText.textString),J.yield(f.interactivelySaveModifiedSnapshot(f.commit,D),6);case 6:return q=J.yieldResult,r=D,A=N.ui.contentText.textString,Q={saved:!0,snapshot:D,commit:q},"function"===typeof a&&a(Q),J.return(Q)}})},customLoadContentAction:function(N,L){var W,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wa){if(1==wa.nextAddress)return(W=
r)?wa.jumpTo(2):wa.yield(f.db.fetchSnapshot(void 0,void 0,v),3);2!=wa.nextAddress&&(W=wa.yieldResult);la=W;return wa.return({content:A=JSON.stringify(la,null,2),url:z+"/"+y+".json"})})}});F.jumpToEnd()})}},{key:"interactivelyEditPackageCode",value:function(a){var f=this,m,q,r,u,v,y,z,A,C,G,F,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:m=f;q=m.commit;r=m.snapshot;u=q;v=u._id;if(y=r){L.jumpTo(2);break}return L.yield(f.db.fetchSnapshot(void 0,void 0,
v),3);case 3:y=L.yieldResult;case 2:return z=y,A=(new de.SnapshotPackageHelper(z)).filesInPackages(),C=A.map(function(W){return{isListItem:!0,string:W.url,value:W}}),L.yield($world.filterableListPrompt("Select file to edit",C,{historyId:"object-serialization-debugger-hist"}),4);case 4:return G=L.yieldResult,F=$jscomp.makeIterator(G.selected),(N=F.next().value)?L.return(f.interactivelyEditFileInSnapshotPackage(N,a)):L.return()}})}},{key:"interactivelyEditFileInSnapshotPackage",value:function(a,f,m){var q=
this,r,u,v,y,z,A,C,G,F,N,L,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(la){switch(la.nextAddress){case 1:r=q;u=r.snapshot;v=r.commit;y=v._id;z=v.name;A=v.type;if(C=u){la.jumpTo(2);break}return la.yield(q.db.fetchSnapshot(void 0,void 0,y),3);case 3:C=la.yieldResult;case 2:return G=C,F=a.get(G),la.yield(System.import("lively.ide/text-editor.js"),4);case 4:return N=la.yieldResult,L=N.default,W=L.openURL("<"+A+"/"+z+" - "+a.path.slice(1).join("/")+">",{historyId:"interactivelyEditFileInSnapshotPackage-hist",
customSaveAction:function(wa){var D,Q,J,O;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ja){switch(ja.nextAddress){case 1:D=a.get(G);if(D===F){ja.jumpTo(2);break}return ja.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]),3);case 3:if(Q=ja.yieldResult,!Q)return ja.return({saved:!1,message:"canceled"});case 2:return a.set(G,wa.ui.contentText.textString),J=q,ja.yield(q.interactivelySaveModifiedSnapshot(q.commit,
G),4);case 4:return J.commit=ja.yieldResult,O={commit:q.commit,snapshot:G,saved:!0},"function"===typeof f&&f(O),ja.return(O)}})},customLoadContentAction:function(wa,D){return{content:a.get(G),url:a.url}}}),m&&W.whenRendered().then(function(){return W.lineNumber=m.row}),la.return(W)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapshotEditor"}}],c,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9578,end:14797})}(void 0);de.SnapshotEditor=PR;de.SnapshotEditor=PR;de.SnapshotEditor=PR;de.partURLRe=/^part:\/\/([^\/]+)\/(.*)$/;(function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),l=c.hasOwnProperty("PartResource")&&"function"===typeof c.PartResource?c.PartResource:c.PartResource=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Nb(l,b,[{key:"canDealWithJSON",get:function(){return!1}},{key:"dirList",value:function(a,f){var m=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?q.yield(de.resource(m.url.replace("part://","styleguide://")).dirList(a,f),2):q.return(q.yieldResult)})}},{key:"write",value:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){throw Error("Part urls are ready only! Please go to the world they are defined in and change the exported component directly.");
})}},{key:"read",value:function(){var a=this,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(de.resource(a.url.replace("part://","styleguide://")).read(),2);case 2:f=y.yieldResult;if(!f.master){y.jumpTo(3);break}return y.yield(f.master.whenReady(),3);case 3:m=f.copy();m.isComponent=!1;m.name="a"+de.getClassName(m);m.withAllSubmorphsDoExcluding(function(z){z!=m&&z.master||delete z._parametrizedProps},function(z){return z.master&&
z!=m});q=m.master;m.master=f;if(!m._pool.mastersInSubHierarchy){y.jumpTo(5);break}r=$jscomp.makeIterator(m._pool.mastersInSubHierarchy);u=r.next();case 6:if(u.done){y.jumpTo(5);break}v=u.value;if(q==v){y.jumpTo(7);break}return y.yield(v.applyIfNeeded(!0),9);case 9:v.derivedMorph.ownerChain().includes(m)||v.derivedMorph.requestMasterStyling();case 7:u=r.next();y.jumpTo(6);break;case 5:return m.master.applyIfNeeded(!0),delete m._pool,m.withAllSubmorphsDo(function(z){if("function"===typeof z.onLoad)z.onLoad()}),
y.return(m)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PartResource"}}],c,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14847,end:16621})})(de.Resource);var QR={name:"part",matches:function(b){return b.match(de.partURLRe)},resourceClass:de.PartResource};de.resourceExtension=
QR;de.resourceExtension=QR;de.resourceExtension=QR;de.registerExtension(de.resourceExtension);de.buildCommitEditor=GO;de.buildCommitEditor=GO;var ef=lively.FreezerRuntime.recorderFor("lively.morphic/world-loading.js");ef.loadWorldFromURL=TH;ef.loadWorldFromCommit=UH;ef.loadWorldFromDB=VH;ef.loadWorld=WH;ef.loadLocalConfig=function(){var b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return b=lively.modules.module("localconfig.js"),l.setCatchFinallyBlocks(2),
l.yield(ef.resource(b.id).exists(),4);case 4:if(!l.yieldResult){l.jumpTo(5);break}return l.yield(b.reload({resetEnv:!1,reloadDeps:!1}),5);case 5:l.leaveTryBlock(0);break;case 2:c=l.enterCatchBlock(),console.error("Error loading localconfig:",c),"undefined"!==typeof $world&&$world.showError("Error loading localconfig.js: "+c),l.jumpToEnd()}})};ef.setupLivelyShell=function(b){var c,l,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return r.yield(lively.modules.importPackage("lively.shell"),
2);case 2:return r.yield(System.import("lively.shell/client-command.js"),3);case 3:return c=r.yieldResult,l=c.default,r.yield(System.import("lively.shell/client-resource.js"),4);case 4:a=r.yieldResult,f=a.resourceExtension,m=b,q=m.l2lClient,l.installLively2LivelyServices(q),f.resourceClass.defaultL2lClient=q,ef.registerResourceExension(f),console.log("[lively] lively.shell setup"),r.jumpToEnd()}})};ef.setupLively2Lively=function(b){var c,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return c=
b.getCurrentUser(),l={world:b.name},c&&(l.userToken=c.token,l.userRealm=c.realm),q.yield(lively.modules.importPackage("lively.2lively"),2);case 2:return q.yield(System.import("lively.2lively/client.js"),3);case 3:return a=q.yieldResult,f=a.default,q.yield(f.forLivelyInBrowser(l),4);case 4:return m=q.yieldResult,console.log("[lively] lively2lively client created "+m),m._onUserChange?ef.reportWorldLoad(b,c):(m._onUserChange=function(r){m.isOnline()&&r.user&&(r=r.user,m.info=Object.assign({},m.info,
{userToken:r.token,userRealm:r.realm}),m.unregister().then(function(){return m.register()}).then(function(){return console.log("re-registered after user change")}))},ef.subscribe("lively.user/userchanged",m._onUserChange,System),m.once("registered",function(){ef.reportWorldLoad(b,c)}),m.on("registered",function(){var r=b.get("user flap");r&&r.updateNetworkIndicator(m)}),m.on("connected",function(){var r=b.get("user flap");r&&r.updateNetworkIndicator(m)}),m.on("reconnecting",function(){var r=b.get("user flap");
r&&r.updateNetworkIndicator(m)}),m.on("disconnected",function(){var r=b.get("user flap");r&&r.updateNetworkIndicator(m)})),q.return(m)}})};ef.interactivelySaveWorld=YA;ef.reportWorldLoad=function(b,c){c=c?c.name+" ("+(c.token||"").slice(0,5)+")":"---";fetch("/report-world-load",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:c+" logged in at "+b.name+" ["+window._livelyLoadId+"]"})}).catch(function(l){return console.warn("report-world-load failed: "+l)})};ef.resource=
T;ef.registerResourceExension=ma;ef.Color=wf;ef.Path=Xg;ef.obj=lf;ef.date=rt;ef.promise=Kf;ef.MorphicEnv=nq;ef.createMorphSnapshot=$x;ef.MorphicDB=Jt;ef.ensureCommitInfo=uD;ef.pathForBrowserHistory=Rb;ef.subscribe=ol;ef.emit=Qm;ef.defaultDirectory=OH;ef.ShellClientResource=hn;ef.loadWorldFromURL=TH;ef.loadWorldFromURL=TH;ef.loadWorldFromCommit=UH;ef.loadWorldFromCommit=UH;ef.loadWorldFromDB=VH;ef.loadWorldFromDB=VH;ef.loadWorld=WH;ef.loadWorld=WH;ef.interactivelySaveWorld=YA;ef.interactivelySaveWorld=
YA;var cj=lively.FreezerRuntime.recorderFor("lively.user/client/user.js");cj.jwtTokenDecode=function(b){b=$jscomp.makeIterator(b.split("."));b.next();var c=b.next().value;b.next();return JSON.parse(atob(c))};cj.guid=function(){var b=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()};cj.makeRequest=function(b,c,l,a){a=void 0===a?{}:a;c={method:void 0===c?"GET":c,mode:"cors"};l&&(c.body=l);c.redirect="follow";c.headers=
Object.assign({},a);return fetch(b,c)};cj.POST=function(b,c){var l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:return"string"!==typeof c&&(c=JSON.stringify(c)),m.yield(cj.makeRequest(b,"POST",c,{}),2);case 2:return l=m.yieldResult,m.setCatchFinallyBlocks(3),m.yield(l.text(),5);case 5:a=m.yieldResult;m.leaveTryBlock(4);break;case 3:m.enterCatchBlock();case 4:if(a&&"application/json"===l.headers.get("content-type"))try{f=JSON.parse(a)}catch(q){}if(!f)throw Error("Unexpected response: "+
a);return m.return(f)}})};var yz=ya("bM",function(b){var c=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),l=c.hasOwnProperty("User")&&"function"===typeof c.User?c.User:c.User=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){this.realm=f;this.name=a;this.roles={};this.createdAt=0;this.token=this.email=null}},{key:"isLoggedIn",
value:function(){return!!this.token}},{key:"loginOrRegister",value:function(a,f,m){var q=this,r,u,v,y,z,A,C,G,F,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==L.nextAddress)return r=q,u=r.email,v=r.createdAt,y=r.roles,z=r.name,A="register"===a?{password:f,email:u,createdAt:v,roles:y,name:z}:{password:f,name:z},L.yield(cj.POST(m+"/"+a,A),2);C=L.yieldResult;if(C.error)return L.return(C);G=C;F=G.token;N=cj.jwtTokenDecode(F);y=N.roles;v=N.createdAt;u=N.email;Object.assign(q,{roles:y,
createdAt:v,email:u,token:F});return L.return({status:C.status})})}},{key:"verify",value:function(){var a=this,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(cj.POST(a.realm+"/verify",{token:a.token}),2);f=q.yieldResult;m=f.error;return q.return(m?!1:!0)})}},{key:"login",value:function(a){return this.loginOrRegister("login",a,this.realm)}},{key:"register",value:function(a){return this.loginOrRegister("register",a,this.realm)}},{key:"checkPassword",
value:function(a){var f=this,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress){if(!f.isLoggedIn)throw Error("To check password, user needs to login.");return u.yield(cj.POST(f.realm+"/check-password",{token:f.token,password:a}),2)}m=u.yieldResult;q=m.error;r=m.status;if(q)throw Error(q);return u.return(r)})}},{key:"modify",value:function(a){var f=this,m,q,r,u,v,y,z,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){if(1==C.nextAddress)return C.yield(cj.POST(f.realm+
"/modify",{token:f.token,changes:a}),2);m=C.yieldResult;q=m.error;r=m.status;u=m.token;if(q)return C.return({error:q});u&&(v=cj.jwtTokenDecode(u),y=v.roles,z=v.createdAt,A=v.email,Object.assign(f,{roles:y,createdAt:z,email:A,token:u}));return C.return({status:r})})}},{key:"toString",value:function(){return"<"+this.constructor.name+" "+this.name+" "+(this.isLoggedIn()?"":"not ")+"logged in>"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"User"}},{key:"guest",get:function(){return cj.guestUser}},
{key:"named",value:function(a,f){var m=a+"-"+f,q=cj.userMap.get(m);q||(q=new this(a,f),cj.userMap.set(m,q));return q}},{key:"fromToken",value:function(a,f){var m=cj.jwtTokenDecode(a),q=m.roles,r=m.createdAt,u=m.email;return Object.assign(this.named(m.name,f),{roles:q,createdAt:r,email:u,token:a})}},{key:"clearCache",value:function(){cj.userMap=new Map}}],c,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:1032,end:3466})}(void 0));cj.User=yz;cj.User=yz;cj.User=yz;var zz=function(b){var c=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),l=c.hasOwnProperty("GuestUser")&&"function"===typeof c.GuestUser?c.GuestUser:c.GuestUser=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"isGuestUser",get:function(){return!0}},{key:"isLoggedIn",
value:function(){return!1}},{key:"loginOrRegister",value:function(a,f,m){return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){throw Error("Guest user cannot "+a+"!");})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GuestUser"}}],c,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},
{start:3476,end:3702})}(cj.User);cj.GuestUser=zz;cj.GuestUser=zz;cj.GuestUser=zz;cj.userMap=cj.userMap||new Map;cj.guestUser=cj.guestUser||cj.GuestUser.named("guest-"+cj.guid(),null);var gs=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js");gs.User=yz;gs.GuestUser=zz;gs.emit=Qm;var RR=function(b){var c=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js"),l=c.hasOwnProperty("UserRegistry")&&"function"===typeof c.UserRegistry?c.UserRegistry:c.UserRegistry=function(a){a&&
a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"isTrackingGuestUsers",get:function(){return!1}},{key:"hasUserStored",value:function(){try{return!!localStorage["lively.user"]||!!sessionStorage["lively.user"]}catch(a){return!1}}},{key:"login",value:function(a,f){var m=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return a.isGuestUser?u.jumpTo(2):u.yield(a.login(f),3);if(2!=
u.nextAddress&&(q=u.yieldResult,r=q.error))throw Error(r);m.saveUserToLocalStorage(a);return u.return(a)})}},{key:"logout",value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){try{f.isTrackingGuestUsers||(delete localStorage["lively.user"],delete sessionStorage["lively.user"])}catch(q){}a=a&&a.isGuestUser?a:gs.User.guest;gs.emit("lively.user/userchanged",{user:a},Date.now(),System);return m.return(a)})}},{key:"register",value:function(a,f){var m=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress){if(!a||a.isGuestUser)throw Error("guest users cannot register");return u.yield(a.register(f),2)}q=u.yieldResult;if(r=q.error)throw Error(r);m.saveUserToLocalStorage(a);return u.return(a)})}},{key:"loadUserFromLocalStorage",value:function(a){try{var f=localStorage["lively.user"]||sessionStorage["lively.user"];if(f)return f=JSON.parse(f),f.isGuest?gs.GuestUser.named(f.name,null):gs.User.fromToken(f.token,a)}catch(m){console.warn("Could not read user from localStorage: "+m)}return this.isTrackingGuestUsers?
!1:gs.GuestUser.guest}},{key:"saveUserToLocalStorage",value:function(a){if(!a||!a.isGuestUser&&!a.token)return!1;gs.emit("lively.user/userchanged",{user:a},Date.now(),System);try{return a.isGuestUser&&!this.isTrackingGuestUsers?(sessionStorage["lively.user"]=JSON.stringify({isGuest:!0,name:a.name}),delete localStorage["lively.user"]):localStorage["lively.user"]=a.isGuestUser&&this.isTrackingGuestUsers?JSON.stringify({isGuest:!0,name:a.name}):JSON.stringify({token:a.token}),!0}catch(f){return console.warn("Could not save user into local/sessionStorage: "+
f),!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"UserRegistry"}},{key:"current",get:function(){return this._current||(this._current=new this)}}],c,{pathInPackage:function(){return"client/user-registry.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:135,end:2531})}(void 0);RR=gs.UserRegistry;var AK=ya("bL",RR);
gs.default=RR;var MB=lively.FreezerRuntime.recorderFor("lively.user/index.js");MB.User=yz;MB.ClientUser=yz;MB.GuestUser=zz;MB.GuestUser=zz;MB.default=AK;MB.UserRegistry=AK;var ama=Object.freeze({__proto__:null,ClientUser:yz,GuestUser:zz,UserRegistry:AK}),qf=lively.FreezerRuntime.recorderFor("lively.morphic/world.js");qf.bowser=tq;qf.Rectangle=Pd;qf.Color=wf;qf.pt=fh;qf.arr=Te;qf.promise=Kf;qf.Path=Xg;qf.obj=lf;qf.signal=hk;qf.config=nk;qf.MorphicEnv=nq;qf.Morph=Hj;qf.TooltipViewer=LB;qf.Tooltip=vz;
qf.loadWorldFromURL=TH;qf.loadWorldFromDB=VH;qf.loadWorldFromCommit=UH;qf.loadWorld=WH;qf.touchInputDevice=qp;qf.UserRegistry=AK;qf.emit=Qm;qf.resource=T;qf.loadMorphFromSnapshot=Us;var Zu=ya("aF",function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),l=c.hasOwnProperty("World")&&"function"===typeof c.World?c.World:c.World=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._renderer=null;this._tooltipViewer=new qf.TooltipViewer(this)}},{key:"__deserialize__",value:function(a,f,m,q){Nb._get(Object.getPrototypeOf(l.prototype),"__deserialize__",this).call(this,a,f,m,q);this._renderer=null;this._tooltipViewer=new qf.TooltipViewer(this)}},{key:"__additionally_serialize__",value:function(a,f,m,q){Nb._get(Object.getPrototypeOf(l.prototype),"__additionally_serialize__",
this).call(this,a,f,m,q);if(a.props.submorphs)for(a=a.props.submorphs.value,f=a.length;f--;)m.refForId(a[f].id).realObj.isHand&&qf.arr.removeAt(a,f)}},{key:"commands",get:function(){return[].concat($jscomp.arrayFromIterable(Nb._get(Object.getPrototypeOf(l.prototype),"commands",this)),[{name:"resize to fit window",exec:function(a){var f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:f=function(){a.extent=lively.FreezerRuntime?a.windowBounds().extent():
a.windowBounds().union(a.submorphBounds(function(v){return!v.isEpiMorph&&!v.hasFixedPosition})).extent()},m=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(a.whenRendered(),2);delete a._cachedWindowBounds;return v.return(!a.windowBounds().extent().equals(a.extent))})},q=0;case 2:if(!(r=5>q)){u.jumpTo(4);break}return u.yield(m(),5);case 5:r=u.yieldResult;case 4:if(!r){u.jumpTo(3);break}q++;f();u.jumpTo(2);break;case 3:return a.relayout(),
u.return(!0)}})}}])}},{key:"isWorld",get:function(){return!0}},{key:"whenReady",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.return(!0)})}},{key:"render",value:function(a){return a.renderWorld(this)}},{key:"grabbable",get:function(){return!1}},{key:"grabbable",set:function(a){}},{key:"existingHandForPointerId",value:function(a){return this.submorphs.find(function(f){return f instanceof qf.Hand&&f.pointerId===a})}},{key:"layoutHaloForPointerId",value:function(a){}},
{key:"haloForPointerId",value:function(a){}},{key:"handForPointerId",value:function(a,f){f=void 0===f?!1:f;var m=this.existingHandForPointerId(a);return m?m:!m&&this.firstHand&&f?(this.firstHand.pointerId=a,this.firstHand):this.addMorph(new qf.Hand(a),this.submorphs[0])}},{key:"removeHandForPointerId",value:function(a){(a=this.existingHandForPointerId(a))&&1<this.hands.length&&a.remove()}},{key:"world",value:function(){return this}},{key:"makeDirty",value:function(){if(!this._dirty){this._dirty=!0;
var a=this.env.renderer;a&&a.renderLater()}}},{key:"hands",get:function(){return qf.arr.sortBy(this.submorphs.filter(function(a){return a.isHand}),function(a){return a.pointerId})}},{key:"firstHand",get:function(){return this.hands[0]}},{key:"getCurrentUser",value:function(){return qf.UserRegistry.current.loadUserFromLocalStorage(qf.config.users.authServerURL)}},{key:"focusedMorph",get:function(){var a=this.env.eventDispatcher;return(a=a&&a.eventState.focusedMorph)&&a.world()===this?a:this}},{key:"onMouseMove",
value:function(a){a.hand&&a.hand.update(a);this._tooltipViewer.mouseMove(a)}},{key:"onMouseDown",value:function(a){a.state.menu&&a.state.menu.remove();this.onWindowScroll();this._tooltipViewer.mouseDown(a)}},{key:"onMouseUp",value:function(a){a.isCommandKey()&&a.stop();if(a.isAltDown()&&qf.config.altClickDefinesThat){var f=this.morphsContainingPoint(a.position)[0];setTimeout(function(){return System.global.that=f},100);f.show();a.stop();console.log('Set global "that" to '+f)}}},{key:"onMouseWheel",
value:function(a){a.isShiftDown()&&(window.scrollBy(-a.domEvt.wheelDeltaX,-a.domEvt.wheelDeltaY),a.stop())}},{key:"onBeforeUnload",value:function(a){return this.onUnload(a)}},{key:"onUnload",value:function(a){this.submorphs.forEach(function(f){if("function"===typeof f.onWorldUnload)f.onWorldUnload(a)})}},{key:"updateVisibleWindowMorphs",value:function(){this.withAllSubmorphsDo(function(a){if(a.respondsToVisibleWindow){if("function"!==typeof a.relayout)return a.showError(Error(a+" listed as responding to visible window change, but has no relayout instruction"));
a.relayout()}})}},{key:"onWindowScroll",value:function(){var a=this.env.eventDispatcher.keyInputHelper.inputState,f=a.positionChangedTime,m=a.scrollLeftWhenChanged;a=a.scrollTopWhenChanged;var q=document.documentElement;500>Date.now()-f&&!qf.bowser.firefox?(q.scrollLeft=m,q.scrollTop=a):(this.setProperty("scroll",qf.pt(q.scrollLeft,q.scrollTop)),this._cachedWindowBounds=null,this.updateVisibleWindowMorphs())}},{key:"onWindowResize",value:function(a){var f=this,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress)return u.yield(f.whenRendered(),2);if(3!=u.nextAddress)return f._cachedWindowBounds=null,"elastic"!==f.resizePolicy?u.jumpTo(3):u.yield(f.execCommand("resize to fit window"),3);f.updateVisibleWindowMorphs();m=$jscomp.makeIterator(f.submorphs);for(q=m.next();!q.done;q=m.next())if(r=q.value,"function"===typeof r.onWorldResize)r.onWorldResize(a);u.jumpToEnd()})}},{key:"relayCommandExecutionToFocusedMorph",value:function(a){if(!a)return null;var f=this.focusedMorph,m=qf.arr.findAndGet(qf.arr.without([f].concat($jscomp.arrayFromIterable(f.ownerChain())),
this),function(q){return qf.arr.findAndGet(q.keyhandlers,function(r){return(r=r.eventCommandLookup(q,a))?{command:r,morph:q}:null})})||{};f=m.command;m=m.morph;return f?m.execCommand(f):null}},{key:"visibleBounds",value:function(){return this.env.renderer?this.windowBounds().intersection(this.innerBounds()):this.innerBounds()}},{key:"windowBounds",value:function(a){if(this._cachedWindowBounds)return this._cachedWindowBounds;a=this.env.domEnv.window;var f=1/this.scale;return this._cachedWindowBounds=
new qf.Rectangle(a.scrollX*f,a.scrollY*f,(a.innerWidth||this.width)*f,(a.innerHeight||this.height)*f)}},{key:"logError",value:function(a){console.log(a)}},{key:"relayout",value:function(){}},{key:"defaultMenuItems",value:function(a){return[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"World"}},{key:"properties",get:function(){return{resizePolicy:{doc:"how the world behaves on window size changes 'elastic': resizes to window extent, 'static': leaves its extent unchanged",defaultValue:"elastic",
after:["clipMode"],type:"Enum",values:["static","elastic"],set:function(a){this.setProperty("resizePolicy",a);this.clipMode="static"===a?"visible":"hidden";"elastic"==a&&this.execCommand("resize to fit window")}},colorScheme:{derived:!0,get:function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}},showsUserFlap:{defaultValue:!0,set:function(a){var f=this,m=qf.resource(document.location.href).query().showsUserFlap;"undefined"!==typeof m&&(a=m);this.setProperty("showsUserFlap",
a);this.whenReady().then(function(){return System.import("lively.user/morphic/user-ui.js")}).then(function(q){return q.UserUI[a?"showUserFlap":"hideUserFlap"](f)})}}}}},{key:"defaultWorld",value:function(){return qf.MorphicEnv.default().world}},{key:"loadWorldFromURL",value:function(a,f,m){f=void 0===f?this.defaultWorld():f;m=void 0===m?{}:m;return qf.loadWorldFromURL(a,f,m)}},{key:"loadWorld",value:function(a,f,m){f=void 0===f?this.defaultWorld():f;m=void 0===m?{}:m;return qf.loadWorld(a,f,m)}},
{key:"loadFromCommit",value:function(a,f,m){f=void 0===f?this.defaultWorld():f;m=void 0===m?{}:m;return qf.loadWorldFromCommit(a,f,m)}},{key:"loadFromDB",value:function(a,f,m,q){m=void 0===m?this.defaultWorld():m;q=void 0===q?{}:q;return qf.loadWorldFromDB(a,f,m,q)}},{key:"loadFromResource",value:function(a,f,m){f=void 0===f?this.defaultWorld():f;m=void 0===m?{}:m;var q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return q=qf,r=q.loadWorld,u=qf,
v=u.loadMorphFromSnapshot,y.yield(a.readJson(),4);case 4:return y.yield(v.call(u,y.yieldResult),3);case 3:return y.yield(r.call(q,y.yieldResult,f,m),2);case 2:return y.return(y.yieldResult)}})}}],c,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:774,end:11291})}(qf.Morph));qf.World=Zu;qf.World=
Zu;qf.World=Zu;var NB=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),l=c.hasOwnProperty("Hand")&&"function"===typeof c.Hand?c.Hand:c.Hand=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{pointerId:a})}},{key:"__deserialize__",
value:function(a,f,m,q){Nb._get(Object.getPrototypeOf(l.prototype),"__deserialize__",this).call(this,a,f,m,q);this.reset()}},{key:"reset",value:function(){this._grabbedMorphProperties=new WeakMap}},{key:"isHand",get:function(){return!0}},{key:"pointerId",get:function(){return this.getProperty("pointerId")}},{key:"pointerId",set:function(a){this.setProperty("pointerId",a)}},{key:"draggable",get:function(){return!1}},{key:"draggable",set:function(a){}},{key:"grabbable",get:function(){return!1}},{key:"grabbable",
set:function(a){}},{key:"grabbedMorphs",get:function(){return this.submorphs}},{key:"carriesMorphs",value:function(){return!!this.grabbedMorphs.length}},{key:"morphsContainingPoint",value:function(a,f){return f}},{key:"update",value:function(a){this.position=a.position.subXY(window.scrollX,window.scrollY)}},{key:"cancelGrab",value:function(a,f){a=void 0===a?!0:a;var m=this,q,r,u,v,y,z,A,C,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(!m.grabbedMorphs.length)return F.return();
m.env.eventDispatcher.cancelGrab(m,f);q=[];r=$jscomp.makeIterator(m.grabbedMorphs);for(u=r.next();!u.done;u=r.next())v=u.value,y=m._grabbedMorphProperties.get(v)||{},z=y.prevOwner,A=y.prevIndex,C=y.prevPosition,G=y.pointerAndShadow,Object.assign(v,G),z?(z.addMorphAt(v,A),a?q.push(v.animate({position:C})):v.position=C):v.remove();return F.return(q.length?Promise.all(q):null)})}},{key:"grab",value:function(a){var f=this;if(qf.obj.isArray(a))return a.forEach(function(m){return f.grab(m)});this.withMetaDo({metaInteraction:!0},
function(){f._grabbedMorphProperties.set(a,{prevOwner:a.owner,prevPosition:a.position,prevIndex:a.owner?a.owner.submorphs.indexOf(a):-1,pointerAndShadow:qf.obj.select(a,["dropShadow","reactsToPointer"])});a.reactsToPointer=!1;a.dropShadow=!0;f.addMorph(a)});qf.signal(this,"grab",a)}},{key:"dropMorphsOn",value:function(a){var f=this;this.withMetaDo({metaInteraction:!0},function(){f.grabbedMorphs.forEach(function(m){try{var q=(f._grabbedMorphProperties.get(m)||{}).pointerAndShadow;Object.assign(m,q);
qf.signal(f,"drop",m);m.onBeingDroppedOn(f,a)}catch(r){console.error(r),f.world().showError("Error dropping "+m+" onto "+a+":\n"+r.stack),m.owner!==a&&f.world().addMorph(a)}})})}},{key:"findDropTarget",value:function(a,f,m){var q=this;a=void 0===a?this.globalPosition:a;f=void 0===f?this.grabbedMorphs:f;a=this.world().morphsContainingPoint(a);return qf.arr.sortBy(a,function(r){return[r].concat($jscomp.arrayFromIterable(r.ownerChain())).find(function(u){return qf.Path("owner.isWorld").get(u)&&u.hasFixedPosition})?
0:1}).find("function"===typeof m?function(r,u){return!q.isAncestorOf(r)&&r.acceptsDrops&&!f.includes(r)&&f.every(function(v){return v.wantsToBeDroppedOn(r)})&&m(r,u)}:function(r){return!q.isAncestorOf(r)&&r.acceptsDrops&&f.every(function(u){return u.wantsToBeDroppedOn(r)})})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Hand"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},fill:{defaultValue:qf.touchInputDevice?qf.Color.transparent:qf.Color.orange},
extent:{defaultValue:qf.pt(1,1)},reactsToPointer:{defaultValue:!1},_grabbedMorphProperties:{serialize:!1,initialize:function(){this._grabbedMorphProperties=new WeakMap}}}}}],c,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:11300,end:15294})}(qf.Morph);qf.Hand=NB;qf.Hand=NB;qf.Hand=NB;var bma=
Object.freeze({__proto__:null,World:Zu,Hand:NB}),Yj=lively.FreezerRuntime.recorderFor("lively.morphic/text/position.js");Yj.comparePosition=HO;Yj.lessPosition=nt;Yj.lessEqPosition=ZA;Yj.eqPosition=ot;Yj.minPosition=$A;Yj.maxPosition=aB;Yj.comparePosition=HO;Yj.comparePosition=HO;Yj.lessPosition=nt;Yj.lessPosition=nt;Yj.lessEqPosition=ZA;Yj.lessEqPosition=ZA;Yj.eqPosition=ot;Yj.eqPosition=ot;Yj.minPosition=$A;Yj.minPosition=$A;Yj.maxPosition=aB;Yj.maxPosition=aB;var Wf=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js");
Wf.lessPosition=nt;Wf.lessEqPosition=ZA;Wf.eqPosition=ot;Wf.minPosition=$A;Wf.maxPosition=aB;var kx=ya("bn",function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js"),l=c.hasOwnProperty("Range")&&"function"===typeof c.Range?c.Range:c.Range=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=a=void 0===a?{start:{row:0,
column:0},end:{row:0,column:0}}:a,m=f.start;a=m.row;m=m.column;var q=f.end;f=q.row;q=q.column;if(f<a||f===a&&q<m)m=$jscomp.makeIterator([a,m,f,q]),f=m.next().value,q=m.next().value,a=m.next().value,m=m.next().value;this.start={row:a,column:m};this.end={row:f,column:q}}},{key:"isRange",get:function(){return!0}},{key:"isEmpty",value:function(){return this.start.row===this.end.row&&this.start.column===this.end.column}},{key:"equals",value:function(a){return a&&a.start&&a.end?Wf.eqPosition(this.start,
a.start)&&Wf.eqPosition(this.end,a.end):!1}},{key:"copy",value:function(){return new Wf.Range(this)}},{key:"toLiteral",value:function(){return{start:this.start,end:this.end}}},{key:"merge",value:function(a){a.isRange||(a=new Wf.Range(a));return Wf.lessPosition(this.end,a.start)||Wf.lessPosition(a.end,this.start)?this:Wf.Range.fromPositions(Wf.minPosition(this.start,a.start),Wf.maxPosition(this.end,a.end))}},{key:"without",value:function(a){a.isRange||(a=new Wf.Range(a));var f=Wf.Range.compare(this,
a);return 0===f?Wf.Range.fromPositions(this.start,this.start):5<=Math.abs(f)?this:0>f?Wf.Range.fromPositions(this.start,a.start):Wf.Range.fromPositions(a.end,this.end)}},{key:"intersect",value:function(a){a.isRange||(a=new Wf.Range(a));var f=Wf.Range.compare(this,a),m=0>f?this:a;a=0>f?a:this;switch(Math.abs(f)){case 0:case 1:return new Wf.Range(m);case 2:case 3:return new Wf.Range(a);case 4:return Wf.Range.fromPositions(a.start,m.end);case 5:return Wf.Range.at(a.start);case 6:return Wf.Range.at(m.end)}}},
{key:"subtract",value:function(a){a.isRange||(a=new Wf.Range(a));switch(Wf.Range.compare(this,a)){case -6:case -5:case 5:case 6:return[new Wf.Range(this)];case -1:case 0:case 2:case 3:return[Wf.Range.at(this.start)];case 1:case 4:return[Wf.Range.fromPositions(a.end,this.end)];case -4:case -3:return[Wf.Range.fromPositions(this.start,a.start)];case -2:return[Wf.Range.fromPositions(this.start,a.start),Wf.Range.fromPositions(a.end,this.end)]}}},{key:"containsPosition",value:function(a){return Wf.lessEqPosition(this.start,
a)&&Wf.lessEqPosition(a,this.end)}},{key:"toString",value:function(){var a=this.start,f=this.end;return"Range("+a.row+"/"+a.column+" -> "+f.row+"/"+f.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Range"}},{key:"sort",value:function(a){return a.sort(Wf.Range.compare)}},{key:"compare",value:function(a,f){var m=a.start,q=a.end,r=f.start,u=f.end;return Wf.lessPosition(m,r)?Wf.lessPosition(q,r)?-6:Wf.eqPosition(q,r)?-5:Wf.lessPosition(q,u)?-4:Wf.eqPosition(q,u)?-3:-2:Wf.eqPosition(m,
r)?Wf.eqPosition(q,u)?0:Wf.lessPosition(q,u)?-1:1:-1*Wf.Range.compare(f,a)}},{key:"at",value:function(a){return new this({start:a,end:a})}},{key:"fromPositions",value:function(a,f){return new this({start:a,end:f})}},{key:"create",value:function(a,f,m,q){return new this({start:{row:a,column:f},end:{row:m,column:q}})}},{key:"isValidLiteral",value:function(a){return a?a.isRange?!0:a.start&&a.end&&"number"===typeof a.start.row&&"number"===typeof a.start.column&&"number"===typeof a.end.row&&"number"===
typeof a.end.column:!1}}],c,{pathInPackage:function(){return"text/range.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:108,end:5369})}(void 0));Wf.Range=kx;Wf.Range=kx;Wf.Range=kx;var BK=new Wf.Range;Wf.defaultRange=BK;Wf.defaultRange=BK;Wf.defaultRange=BK;var Si=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js");
Si.lessPosition=nt;Si.Range=kx;Si.defaultRange=BK;Si.config=nk;Si.string=Hg;Si.arr=Te;Si.signal=hk;var CK=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),l=c.hasOwnProperty("Selection")&&"function"===typeof c.Selection?c.Selection:c.Selection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){this.textMorph=
a;this.initialize(f)}},{key:"isSelection",get:function(){return!0}},{key:"initialize",value:function(a){this._goalX=this._goalColumn=void 0;this._isReverse=!1;var f=Si.string.newUUID();this.startAnchor=this.textMorph.addAnchor("selection-start-"+f);this.endAnchor=this.textMorph.addAnchor("selection-end-"+f);this.range=Si.Range.isValidLiteral(a)?a:Si.defaultRange;this._cursorVisible=!0;this.cursorBlinkProcess=null}},{key:"isSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.cursorBlinkStop();
this.textMorph.removeAnchor(this.startAnchor);this.textMorph.removeAnchor(this.endAnchor)}},{key:"compareRangesForMerge",value:function(a,f){var m=a.start,q=m.row;m=m.column;var r=a.end,u=r.row;r=r.column;var v=f.start,y=v.row;v=v.column;var z=f.end,A=z.row;z=z.column;return q<y||q===y&&m<v?u<y||u===y&&r<v?"separate":u===y&&r===v?y===A&&v===z?"overlapping":"bordering":"overlapping":q===y&&m===v?u===A&&r===z?"equal":"overlapping":this.compareRangesForMerge(f,a)}},{key:"mergeWith",value:function(a){if(!a||
!a.isSelection)return!1;var f=this.compareRangesForMerge(this.range,a.range);if("separate"===f||"bordering"===f)return!1;this.range=this.range.merge(a.range);a.isReverse()!=this.isReverse()&&this.reverse();return!0}},{key:"range",get:function(){return this._range}},{key:"range",set:function(a){if(a){var f=a,m=f.start;f=f.end;if(void 0!==m&&void 0!==f){var q=this.textMorph.document;"number"===typeof m&&(a.start=m=q.indexToPosition(m));"number"===typeof f&&(a.end=f=q.indexToPosition(f));if(Si.Range.isValidLiteral(a)){m=
q.clipPositionToLines(m);f=q.clipPositionToLines(f);if(this._isReverse=Si.lessPosition(f,m))f=$jscomp.makeIterator([f,m]),m=f.next().value,f=f.next().value;a.start=m;a.end=f;a.isRange||(a=new Si.Range(a));a.equals(this._range)||(this._range=a,this._goalColumn=this.textMorph.lineWrapping?this.textMorph.columnInWrappedLine(this.lead):this.lead.column,this._goalX=this.textMorph.charBoundsFromTextPosition(this.lead).x,this.startAnchor.position=a.start,this.endAnchor.position=a.end,this.textMorph.makeDirty(),
Si.signal(this.textMorph,"selectionChange",this))}}}}},{key:"directedRange",get:function(){return{end:this.lead,start:this.anchor}}},{key:"updateFromAnchors",value:function(){this.range={start:this.startAnchor.position,end:this.endAnchor.position}}},{key:"start",get:function(){return this.range.start}},{key:"start",set:function(a){this.range=Si.Range.fromPositions(a,this.end)}},{key:"end",get:function(){return this.range.end}},{key:"end",set:function(a){this.range=Si.Range.fromPositions(this.start,
a)}},{key:"selectionColor",get:function(){return this.textMorph.selectionColor||"#bed8f7"}},{key:"anchor",get:function(){return this.isReverse()?this.range.end:this.range.start}},{key:"anchor",set:function(a){this.range={start:a,end:this.lead}}},{key:"lead",get:function(){return this.isReverse()?this.range.start:this.range.end}},{key:"lead",set:function(a){this.range={start:this.anchor,end:a}}},{key:"text",get:function(){return this.textMorph.document.textInRange(this.range)}},{key:"text",set:function(a){this.replace(a)}},
{key:"replace",value:function(a,f,m,q){var r=this.range,u=this.textMorph,v=this.isReverse();this.range=u.replace(r,a,f,m,q);v&&this.reverse();return this.range}},{key:"selectedRows",get:function(){return{first:this.start.row,last:this.end.row}}},{key:"reverse",value:function(){this._isReverse=!this.isEmpty()&&!this._isReverse;return this}},{key:"isReverse",value:function(){return this._isReverse&&!this.isEmpty()}},{key:"isEmpty",value:function(){return this.range.isEmpty()}},{key:"collapse",value:function(a){a=
void 0===a?this.start:a;this.range={start:a,end:a};return this}},{key:"collapseToEnd",value:function(){this.collapse(this.end);return this}},{key:"growLeft",value:function(a){var f=this.textMorph.document,m=f.positionToIndex(this.end);a=Math.min(m,f.positionToIndex(this.start)-a);m=this.isReverse();this.start=f.indexToPosition(a);this._isReverse=m;return this}},{key:"growRight",value:function(a){var f=this.textMorph.document,m=f.positionToIndex(this.start);a=Math.max(m,f.positionToIndex(this.end)+
a);m=this.isReverse();this.end=f.indexToPosition(a);this._isReverse=m;return this}},{key:"selectAll",value:function(){this.range={start:{row:0,column:0},end:this.textMorph.document.endPosition};return this}},{key:"selectLine",value:function(a,f){a=void 0===a?this.lead.row:a;this.includingLineEnd=void 0===f?!1:f;this.range={start:{row:a,column:0},end:{row:a,column:this.textMorph.getLine(a).length}};return this}},{key:"gotoLineEnd",value:function(a){a=void 0===a?this.lead.row:a;a={row:a,column:this.textMorph.getLine(a).length};
this.range={start:a,end:a}}},{key:"selectLeft",value:function(a){a=void 0===a?1:a;this.isEmpty()?(this.growLeft(a),this.reverse()):this.isReverse()?this.growLeft(a):this.growRight(-a);return this}},{key:"selectRight",value:function(a){a=void 0===a?1:a;this.isReverse()?this.growLeft(-a):this.growRight(a);return this}},{key:"selectUp",value:function(a,f){return this.goUp(void 0===a?1:a,f,!0)}},{key:"selectDown",value:function(a,f){return this.selectUp(-(void 0===a?1:a),f)}},{key:"goUp",value:function(a,
f,m){a=void 0===a?1:a;m=void 0===m?!1:m;if(0===a)return this;var q=this._goalColumn,r=this._goalX;this.lead=this.textMorph.getPositionAboveOrBelow(a,this.lead,void 0===f?!1:f,q,r);m||(this.anchor=this.lead);this._goalColumn=q;this._goalX=r;return this}},{key:"goDown",value:function(a,f){return this.goUp(-(void 0===a?1:a),f)}},{key:"goLeft",value:function(a){a=void 0===a?1:a;this.isEmpty()&&this.growLeft(a);this.collapse();return this}},{key:"goRight",value:function(a){a=void 0===a?1:a;this.isEmpty()&&
this.growRight(a);this.collapseToEnd();return this}},{key:"cursorVisible",get:function(){return this._cursorVisible&&this.textMorph.isFocused()&&!this.textMorph.rejectsInput()}},{key:"cursorBlinkStart",value:function(){var a=this;this.cursorBlinkStop();var f=Si.config.text.cursorBlinkPeriod;if(f){var m=this.textMorph,q=m.env.renderer.getNodeForMorph(m);this.cursorBlinkProcess=setInterval(function(){q||(q=m.env.renderer.getNodeForMorph(m));if(q){a._cursorVisible=!a._cursorVisible;var r=q.className.split(" "),
u=r.indexOf("hidden-cursor");a._cursorVisible&&-1<u&&(r.splice(u,1),q.className=r.join(" "));a._cursorVisible||-1!==u||(q.className=[].concat($jscomp.arrayFromIterable(r),["hidden-cursor"]).join(" "))}},1E3*f)}}},{key:"cursorBlinkStop",value:function(){this.cursorBlinkProcess&&clearInterval(this.cursorBlinkProcess);this.cursorBlinkProcess=null;this._cursorVisible=!0;var a=this.textMorph;if(a=a.env.renderer.getNodeForMorph(a)){var f=a.className.split(" "),m=f.indexOf("hidden-cursor");-1<m&&(f.splice(m,
1),a.className=f.join(" "))}}},{key:"toString",value:function(){var a=this.anchor,f=this.lead;return"Selection("+a.row+"/"+a.column+" -> "+f.row+"/"+f.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Selection"}}],c,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:224,end:9243})}(void 0);Si.Selection=CK;Si.Selection=CK;Si.Selection=CK;var DK=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),l=c.hasOwnProperty("MultiSelection")&&"function"===typeof c.MultiSelection?c.MultiSelection:c.MultiSelection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"initialize",value:function(a){this._selections=[new Si.Selection(this.textMorph,
a)]}},{key:"__deserialize__",value:function(a,f){this._selections=[]}},{key:"selections",get:function(){return this._selections}},{key:"selections",set:function(a){var f=this._selections?this._selections.filter(function(m){return!a.includes(m)}):[];this._selections=a;f.forEach(function(m){return m.uninstall()})}},{key:"isMultiSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.selections.forEach(function(a){return a.uninstall()})}},{key:"defaultSelection",get:function(){return Si.arr.last(this.selections)}},
{key:"removeSelections",value:function(a){a=this.selections.slice(void 0===a?1:a);a.forEach(function(f){return f.uninstall()});this.selections=Si.arr.withoutAll(this.selections,a)}},{key:"disableMultiSelect",value:function(){Si.arr.without(this.selections,this.defaultSelection).forEach(function(a){return a.uninstall()});this.selections=[this.defaultSelection]}},{key:"range",get:function(){return this.defaultSelection.range}},{key:"range",set:function(a){this.disableMultiSelect();this.defaultSelection.range=
a}},{key:"updateFromAnchors",value:function(){this.selections.forEach(function(a){return a.updateFromAnchors()})}},{key:"start",get:function(){return this.defaultSelection.start}},{key:"start",set:function(a){this.defaultSelection.start=a}},{key:"end",get:function(){return this.defaultSelection.end}},{key:"end",set:function(a){this.defaultSelection.end=a}},{key:"anchor",get:function(){return this.defaultSelection.anchor}},{key:"anchor",set:function(a){this.defaultSelection.anchor=a}},{key:"lead",
get:function(){return this.defaultSelection.lead}},{key:"lead",set:function(a){this.defaultSelection.lead=a}},{key:"text",get:function(){return this.selections.map(function(a){return a.text}).join("\n")}},{key:"text",set:function(a){this.selections.forEach(function(f){return f.text=a})}},{key:"selectedRows",get:function(){return this.defaultSelection.selectedRows}},{key:"reverse",value:function(){this.defaultSelection.reverse()}},{key:"isReverse",value:function(){return this.defaultSelection.isReverse()}},
{key:"isEmpty",value:function(){return this.defaultSelection.isEmpty()}},{key:"collapse",value:function(a){this.defaultSelection.collapse(a);return this}},{key:"collapseToEnd",value:function(){this.defaultSelection.collapseToEnd();return this}},{key:"growLeft",value:function(a){this.defaultSelection.growLeft(a);return this}},{key:"growRight",value:function(a){this.defaultSelection.growRight(a);return this}},{key:"selectAll",value:function(){this.disableMultiSelect();this.defaultSelection.selectAll();
return this}},{key:"selectLine",value:function(a,f){this.includingLineEnd=f;this.defaultSelection.selectLine(a,f);return this}},{key:"gotoLineEnd",value:function(a){this.defaultSelection.gotoLineEnd(a)}},{key:"selectLeft",value:function(a){this.defaultSelection.selectLeft(a);return this}},{key:"selectRight",value:function(a){this.defaultSelection.selectRight(a);return this}},{key:"selectUp",value:function(a,f){this.defaultSelection.selectUp(a,f);return this}},{key:"selectDown",value:function(a,f){this.defaultSelection.selectDown(a,
f);return this}},{key:"goUp",value:function(a,f){return this.defaultSelection.goUp(a,f)}},{key:"goDown",value:function(a,f){return this.defaultSelection.goDown(a,f)}},{key:"goLeft",value:function(a){return this.defaultSelection.goLeft(a)}},{key:"goRight",value:function(a){return this.defaultSelection.goRight(a)}},{key:"cursorVisible",get:function(){return this.defaultSelection.cursorVisible}},{key:"style",set:function(a){this.defaultSelection.style=a}},{key:"getTextAttributes",value:function(){return this.defaultSelection.getTextAttributes()}},
{key:"toString",value:function(){return"MultiSelection("+this.selections.join(", ")+")"}},{key:"mergeSelections",value:function(){for(var a=this.selections.slice(),f=a.length-1;0<=f;f--)for(var m=a.length-1;0<=m;m--)if(f!==m&&a[m].mergeWith(a[f])){a.splice(f,1);break}this.selections=a}},{key:"ranges",get:function(){return this.selections.map(function(a){return a.range})}},{key:"ranges",set:function(a){for(var f=0;f<a.length;f++){var m=this.selections[f];m?m.range=a[f]:this.addRange(a[f],!1)}this.removeSelections(f);
this.mergeSelections()}},{key:"addRange",value:function(a,f){f=void 0===f?!0:f;this.selections.push(new Si.Selection(this.textMorph,a));f&&this.mergeSelections();return Si.arr.last(this.selections).range}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelection"}}],c,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:9252,end:13920})}(Si.Selection);Si.MultiSelection=DK;Si.MultiSelection=DK;Si.MultiSelection=DK;var yg=lively.FreezerRuntime.recorderFor("lively.morphic/text/attributes.js");yg.shallowEquals=IO;yg.concatAttributePair=XH;yg.joinTextAttributes=YH;yg.splitTextAndAttributesAt=ZH;yg.splitTextAndAttributesAtColumns=$H;yg.concatTextAndAttributes=aI;yg.modifyAttributesInRange=bI;yg.textAndAttributesWithSubRanges=cI;yg.textAndAttributesDo=function(b,c){for(var l=0;l<b.length;l+=2)c(b[l],
b[l+1])};yg.splitTextAndAttributesIntoLines=AD;yg.eqPosition=ot;yg.lessPosition=nt;yg.shallowEquals=IO;yg.shallowEquals=IO;yg.concatAttributePair=XH;yg.concatAttributePair=XH;yg.joinTextAttributes=YH;yg.joinTextAttributes=YH;yg.splitTextAndAttributesAt=ZH;yg.splitTextAndAttributesAt=ZH;yg.splitTextAndAttributesAtColumns=$H;yg.splitTextAndAttributesAtColumns=$H;yg.concatTextAndAttributes=aI;yg.concatTextAndAttributes=aI;yg.modifyAttributesInRange=bI;yg.modifyAttributesInRange=bI;yg.textAndAttributesWithSubRanges=
cI;yg.textAndAttributesWithSubRanges=cI;yg.splitTextAndAttributesIntoLines=AD;yg.splitTextAndAttributesIntoLines=AD;var wd=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js");wd.arr=Te;wd.num=wk;wd.string=Hg;wd.lessEqPosition=ZA;wd.minPosition=$A;wd.maxPosition=aB;wd.lessPosition=nt;wd.eqPosition=ot;wd.concatTextAndAttributes=aI;wd.splitTextAndAttributesAtColumns=$H;wd.splitTextAndAttributesIntoLines=AD;wd.joinTextAttributes=YH;wd.modifyAttributesInRange=bI;wd.concatAttributePair=
XH;wd.splitTextAndAttributesAt=ZH;wd.objectReplacementChar="\ufffd";wd.objectReplacementChar="\ufffd";wd.objectReplacementChar="\ufffd";wd.defaultOptions={maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5};(function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),l=c.hasOwnProperty("TreeNode")&&"function"===typeof c.TreeNode?c.TreeNode:c.TreeNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.parent=a}},{key:"root",get:function(){return this.parent?this.parent.root:this}},{key:"isRoot",get:function(){return!this.parent}},{key:"withParents",value:function(){for(var a=this,f=[];a;)f.push(a),a=a.parent;return f}},{key:"traverse",value:function(a){var f=[a.call(null,this)];if(this.isLeaf)return f;for(var m=0;m<this.children.length;m++)f.push.apply(f,$jscomp.arrayFromIterable(this.children[m].traverse(a)));
return f}},{key:"consistencyCheck",value:function(){var a=[],f=this.isRoot,m=this.isLeaf,q=this.children,r=this.size,u=this.stringSize,v=this.height,y=this.width,z=this.options,A=z.maxLeafSize,C=z.maxNodeSize,G=z.minLeafSize;z=z.minNodeSize;f||0!==r||a.push({error:"size of "+this+" expected to be > 0!"});if(!Array.isArray(q))return a.push({error:this+".children is not an array but "+q}),a;var F=wd.arr.sum(wd.arr.pluck(q,"size"));F!=r&&a.push({error:"Sum of child sizes is not size of "+this+": "+F+
" != "+r});r=wd.arr.sum(wd.arr.pluck(q,"stringSize"));r!=u&&a.push({error:"Sum of child stringSize is not stringSIze of "+this+": "+r+" != "+u});u=wd.arr.sum(wd.arr.pluck(q,"height"));Number.parseInt(u)!=Number.parseInt(v)&&a.push({error:"Sum of child Height is not Height of "+this+": "+u+" != "+v});v=q.length?Math.max.apply(null,wd.arr.pluck(q,"width")):0;(q.find(function(N){return N.isLine&&N.hasEstimatedExtent})?Number.parseInt(v)>Number.parseInt(y):Number.parseInt(v)!=Number.parseInt(y))&&a.push({error:"max width of children of "+
this+" is not node width: "+v+" != "+y});y=m?A:C;!f&&q.length>y&&a.push({error:"children count of "+this+" expected to be between "+(m?G:z)+" and "+y+" but is "+q.length});for(f=0;f<q.length;f++)(G=q[f])?(m&&!G.isLine?a.push({error:"child "+f+" of leaf "+this+" is not a line!"}):!m&&G.isLine&&a.push({error:"child of non-leaf "+this+" is a line!"}),this!==G.parent&&a.push({error:"child.parent is "+G.parent+" but should be "+this})):a.push({error:"child "+f+" of "+this+" is nullish!"});a.push.apply(a,
$jscomp.arrayFromIterable(wd.arr.flatmap(q,function(N){return N.consistencyCheck()})));return a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TreeNode"}}],c,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1422,end:4636})})(void 0);(function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),
l=c.hasOwnProperty("InnerTreeNode")&&"function"===typeof c.InnerTreeNode?c.InnerTreeNode:c.InnerTreeNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a.parent);this.options=a.options;this.children=a.children;this.size=a.size;this.stringSize=
a.stringSize;this.height=a.height;this.width=a.width;this.isLeaf=!0}},{key:"isNode",get:function(){return!0}},{key:"resize",value:function(a,f,m){this.size+=a;this.height+=f;this.stringSize+=m;for(var q=0,r=0;r<this.children.length;r++){var u=this.children[r].width;u>q&&(q=u)}this.width=q;this.parent&&this.parent.resize(a,f,m)}},{key:"lines",value:function(a){a=void 0===a?[]:a;if(this.isLeaf)return a.push.apply(a,$jscomp.arrayFromIterable(this.children)),a;for(var f=0;f<this.children.length;f++)this.children[f].lines(a);
return a}},{key:"findRow",value:function(a){if(0>a||a>=this.size)return null;if(this.isLeaf)return this.children[a];for(var f=0;f<this.children.length;f++){var m=this.children[f],q=m.size;if(a<q)return m.findRow(a);a-=q}return null}},{key:"findLineByVerticalOffset",value:function(a,f,m){f=void 0===f?0:f;m=void 0===m?0:m;if(0>a||a>this.height)return null;for(var q=0;q<this.children.length;q++){var r=this.children[q],u=r.height;if(a<=u)return this.isLeaf?{line:r,offset:a,y:f,row:m}:r.findLineByVerticalOffset(a,
f,m);a-=u;f+=u;m+=r.size}return null}},{key:"computeVerticalOffsetOf",value:function(a,f){f=void 0===f?0:f;if(0>a||a>=this.size)return console.warn("strange row in computeVerticalOffsetOf: "+a),f;if(this.isLeaf){for(var m=0;m<Math.min(a,this.children.length);m++)f+=this.children[m].height;return f}for(m=0;m<this.children.length;m++){var q=this.children[m],r=q.size;if(a<r)return q.computeVerticalOffsetOf(a,f);a-=r;f+=q.height}return f}},{key:"ensureLine",value:function(a){a||(a="");var f="string"===
typeof a;return!f&&a.isLine?(a.parent=this,a):new wd.Line({parent:this,width:f?0:a.width||0,height:f?0:a.height||0,textAndAttributes:f?[a,null]:a.textAndAttributes||[a.text||"",null]})}},{key:"insert",value:function(a,f){f=void 0===f?this.size:f;var m=this.children,q=this.options;if(this.isLeaf){var r=[],u=0,v=0;for(q=0;q<a.length;q++){var y=this.ensureLine(a[q]);r.push(y);u+=y.height;v+=y.stringSize;m.splice(f++,0,y)}this.resize(r.length,u,v);this.balanceAfterGrowth();return r}0===m.length&&m.push(new wd.InnerTreeNode({parent:this,
children:[],size:0,stringSize:0,width:0,height:0,options:q}));for(q=0;q<m.length;q++){r=m[q];u=r.size;if(f<=u)return r.insert(a,f);f-=u}f=m[q-1];return f.insert(a,f.size)}},{key:"withParentChainsUpToCommonParentDo",value:function(a,f,m){for(var q=this.withParents(),r,u=0;a;){if(q.includes(a)){r=a;break}f(a,u++);a=a.parent}f=q.indexOf(r);0>f&&(f=q.length);q=q.slice(0,f);for(f=0;f<q.length;f++)m(q[f],f)}},{key:"findLineWithTextIndex",value:function(a,f){f=void 0===f?0:f;if(this.isLeaf){for(var m=0;m<
this.children.length;m++){var q=this.children[m],r=q.stringSize;if(a<r)return{line:q,column:a,row:f};a-=r;f++}a=wd.arr.last(this.children);return{line:a,row:f-1,column:a.stringSize-1}}for(q=m=0;q<this.children.length;q++){r=this.children[q];var u=r.stringSize;if(a<m+u)return r.findLineWithTextIndex(a-m,f);f+=r.size;m+=u}return wd.arr.last(this.children).findLineWithTextIndex(a-m)}},{key:"findLeafs",value:function(a,f,m){m=void 0===m?0:m;if(a>m+this.size||f<m)return[];if(this.isLeaf){a=Math.max(0,
a-m);var q=this.children.length-1;f=Math.min(q,f-m);m=!1;0===a&&f===q&&(m=!0,f=q);return[{node:this,firstLine:a,lastLine:f,full:m}]}q=[];for(var r=0;r<this.children.length;r++){var u=this.children[r];q.push.apply(q,$jscomp.arrayFromIterable(u.findLeafs(a,f,m)));m+=u.size}return q}},{key:"removeFromToInRoot",value:function(a,f,m){var q=this;if(!this.isRoot)throw Error("removeFromTo() should be called on the root node");a>f&&(f=$jscomp.makeIterator([f,a]),a=f.next().value,f=f.next().value);var r=this.size,
u=this.options.minLeafSize,v=this.findLeafs(a,f),y=v.shift();f=v.pop();var z=[],A=!1,C=!1;if(!(a>=r)){f&&y.node===f.node&&(f=null);y.full?(m&&m.log("Removing complete first line "+y),v.push(y)):A=y.node.children.length-(y.lastLine-y.firstLine+1)<u;f&&(f.full?(m&&m.log("Removing complete last line "+f),v.push(f)):(C=f,C=C.node.children.length-(C.lastLine-C.firstLine+1)<u));if(A||C){var G=(G=y.node.children[0].prevLine())?G.parent:null;var F=(F=wd.arr.last(f?f.node.children:y.node.children).nextLine())?
F.parent:null}for(a=0;a<v.length;a++){u=v[a].node;r=u.children.length;for(var N=0,L=0,W=0;W<r;W++){var la=u.children[W];N+=la.height;L+=la.stringSize;la.parent=null}u.children.length=0;u.resize(-r,-N,-L);if(r=u.parent)u.parent=null,r.children.splice(r.children.indexOf(u),1),z.includes(r)||z.push(r)}if(!y.full){u=y.firstLine;v=y.node;a=y.lastLine-u+1;u=v.children.splice(u,a);for(L=N=r=0;L<u.length;L++)W=u[L],r+=W.height,N+=W.stringSize,W.parent=null;v.resize(-a,-r,-N)}if(f&&!f.full){a=f;u=a.firstLine;
v=a.node;a=a.lastLine-u+1;u=v.children.splice(u,a);for(L=N=r=0;L<u.length;L++)W=u[L],r+=W.height,N+=W.stringSize,W.parent=null;v.resize(-a,-r,-N)}m&&m.dump(""+this.print(!1));A&&y.node.balanceByMergeOrTheft(G,!f||f.full?F:f.node,m);f&&C&&f.node.root===this&&(C=!0,G=y.full||!y.node.parent?G:y.node,A&&(f.node.root!==this&&(C=!1),G&&G.root!==this&&(G=null),F&&F.root!==this&&(F=null)),C&&f.node.balanceByMergeOrTheft(G,F,m));z.forEach(function(wa){return wa.root===q&&wa.balanceAfterShrink(m)})}}},{key:"balanceByMergeOrTheft",
value:function(a,f,m){var q=this,r=this.children,u=this.options,v=this.isLeaf,y=v?u.maxLeafSize:u.maxNodeSize;u=v?u.minLeafSize:u.minNodeSize;v=a&&a.children.length+r.length<=y;y=!v&&f&&f.children.length+r.length<=y;var z=v?a:y?f:null;if(z){m&&m.log("[balanceByMergeOrTheft] merging "+this+" "+(v?"left":"right")+" into "+z);var A=this.size,C=this.width,G=this.height,F=this.stringSize;r.forEach(function(J){return J.parent=z});v?z.children.push.apply(z.children,$jscomp.arrayFromIterable(r)):z.children.unshift.apply(z.children,
$jscomp.arrayFromIterable(r));this.width=r.length=0;this.withParentChainsUpToCommonParentDo(z,function(J){C>J.width&&(J.width=C);J.height+=G;J.size+=A;J.stringSize+=F},function(J){if(C===J.width)for(var O=0;O<J.children.length;O++){var ja=J.children[O];ja.width>J.width&&(J.width=ja.width)}J.height-=G;J.size-=A;J.stringSize-=F})}else{v=a?Math.ceil((a.children.length-u)/2):0;var N=f?Math.ceil((f.children.length-u)/2):0;if((y=0<v&&v>=N)||!y&&0<N){u=y?a.children.splice(a.children.length-v,v):f.children.splice(0,
N);var L=y?a:f,W=y?v:N,la=0,wa=0,D=0,Q=0;m&&m.log("[balanceByMergeOrTheft] "+this+" steals from "+(y?"left":"right")+" node "+L+" "+W+" nodes");for(a=0;a<u.length;a++)la+=u[a].height,wa+=u[a].stringSize,D=Math.max(D,u[a].width);for(a=0;a<L.children.length;a++)Q=Math.max(Q,L.children[a].width);this.withParentChainsUpToCommonParentDo(L,function(J){if(Q<D&&Q<J.width){if(J===L)J.width=Q;else{for(var O=!1,ja=0;ja<J.children.length;ja++)if(J.children[ja].width>Q){O=!0;break}O||(J.width=Q)}J.width=D}J.height-=
la;J.size-=W;J.stringSize-=wa},function(J){J.width<D&&(J.width=D);J.height+=la;J.size+=W;J.stringSize+=wa});u.forEach(function(J){return J.parent=q});y?this.children.unshift.apply(this.children,$jscomp.arrayFromIterable(u)):this.children.push.apply(this.children,$jscomp.arrayFromIterable(u))}}a=this.parent;0===r.length&&(this.parent=null,a&&a.children.splice(a.children.indexOf(this),1));a&&a.balanceAfterShrink(m)}},{key:"balanceAfterGrowth",value:function(){var a=this.isLeaf,f=this.size,m=this.stringSize,
q=this.parent,r=this.children,u=this.width,v=this.height,y=this.options,z=a?y.maxLeafSize:y.maxNodeSize;if(r.length>z){q||(q=this.parent=new wd.InnerTreeNode({parent:null,children:[this],size:f,width:u,height:v,stringSize:m,options:y}),q.isLeaf=!1);var A=Math.floor(r.length/2),C=0,G=0,F=f=0,N=m=0,L=u=0;for(v=0;C<A;C++)G+=r[C].size,F=Math.max(F,r[C].width),N+=r[C].height,L+=r[C].stringSize;for(;C<r.length;C++)f+=r[C].size,m=Math.max(m,r[C].width),u+=r[C].height,v+=r[C].stringSize;this.children=r.slice(0,
A);this.size=G;this.width=F;this.height=N;this.stringSize=L;C=q.children.indexOf(this);r=r.slice(A);var W=new wd.InnerTreeNode({parent:q,children:r,size:f,height:u,width:m,stringSize:v,options:y});W.isLeaf=a;r.forEach(function(la){return la.parent=W});q.children.splice(C+1,0,W);W.children.length>z&&W.balanceAfterGrowth();this.children.length>z&&this.balanceAfterGrowth();this.parent.balanceAfterGrowth()}}},{key:"balanceAfterShrink",value:function(a){var f=this,m=this.isLeaf,q=this.parent,r=this.children,
u=this.options,v=u.maxLeafSize,y=u.maxNodeSize,z=u.minLeafSize,A=u.minNodeSize;u=m?v:y;z=m?z:A;A=!1;for(var C=r.length;C--;)0===r[C].size&&(r.splice(C,1),A=!0,a&&a.log("[balanceAfterShrink] "+this+" removes node "+C+" b/c it is empty, remaining children: "+r.length+" (min: "+z+", max: "+u+")"));A&&a&&a.dump(""+this.root.print(!1));if(r.length>=z)q&&q.balanceAfterShrink(a);else if(0===r.length)q&&q.balanceAfterShrink(a);else if(m)q&&(1===q.children.length?(a&&a.log("[balanceAfterShrink] "+this+" is the only child - will remove it's parent and take its position"),
a&&a.dump(""+this.root.print(!1)),this.parent=null,q.children.length=0,q.children.push.apply(q.children,$jscomp.arrayFromIterable(r)),r.forEach(function(F){return F.parent=q}),q.isLeaf=!0):(v=(v=r[0].prevLine())&&v.parent,r=wd.arr.last(r).nextLine(),this.balanceByMergeOrTheft(v,r&&r.parent,a))),this.parent&&this.parent.balanceAfterShrink(a);else{m=[];u=A=z=!1;for(C=0;C<r.length;C++){var G=r[C];!z&&G.isLeaf&&(z=!0);A||G.isLeaf||(A=!0);if(z&&A){u=!0;break}m.push.apply(m,$jscomp.arrayFromIterable(G.children))}!u&&
m.length<=(z?v:y)&&(a&&a.log("[balanceAfterShrink] "+this+" grandChildren.length is "+m.length+" and <= max size so it is removing all its children and adopting their children"),r.forEach(function(F){return F.parent=null}),m.forEach(function(F){return F.parent=f}),r.length=0,r.push.apply(r,$jscomp.arrayFromIterable(m)),this.isLeaf=z,a&&a.log("[balanceAfterShrink] "+r.join("\n")),a&&a.dump(""+this.root.print(!1)));q&&q.balanceAfterShrink(a)}}},{key:"print",value:function(a,f,m,q){a=void 0===a?!0:a;
f=void 0===f?0:f;m=void 0===m?0:m;var r=this.isLeaf,u=this.size,v=this.stringSize,y=this.width,z=this.height,A=this.children;q=q||(r?"leaf":"node");v=""+" ".repeat(m)+q+" (size: "+u+" width: "+Math.round(y)+" height: "+Math.round(z)+" text length: "+v+")";if(A.length){y="";f+=u;for(u=A.length;u--;)z=A[u],f-=z.size,y="\n"+z.print(a,f,m+1)+y;v+=y}return v}},{key:"toString",value:function(){var a=this.isLeaf,f=this.size,m=this.width,q=this.height,r=this.children;return"node ("+(a?"leaf, ":"")+(a&&r.length?
"rows: "+r[0].row+"-"+wd.arr.last(r).row+" ":"")+("size: "+f+" "+m+"x"+q+")")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InnerTreeNode"}}],c,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4638,end:29081})})(wd.TreeNode);var SR=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),
l=c.hasOwnProperty("Line")&&"function"===typeof c.Line?c.Line:c.Line=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a.parent);this.textAndAttributes=wd.joinTextAttributes(a.textAndAttributes||[]);this._text="";this._textAttributes=null;this.width=
a.width;this.height=a.height;this.hasEstimatedExtent=!1;this.modeState=null;this.textAlign="left";this.lineHeight=null;this.marginBottom=this.marginTop=0}},{key:"isLine",get:function(){return!0}},{key:"size",get:function(){return 1}},{key:"stringSize",get:function(){return this.text.length+1}},{key:"text",get:function(){if(this._text)return this._text;for(var a="",f=this.textAndAttributes,m=0;m<f.length;m+=2)a+="string"===typeof f[m]?f[m]:wd.objectReplacementChar;return this._text=a}},{key:"textAttributes",
get:function(){if(this._textAttributes)return this._textAttributes;for(var a=[],f=this.textAndAttributes,m=0;m<f.length;m+=2){var q=f[m+1];q&&!a.includes(q)&&a.push(q)}return this._textAttributes=a}},{key:"row",get:function(){if(!this.parent)return 0;var a=this.withParents();if(1===a.length)return a.children.indexOf(this);for(var f=0,m=a.length-1;1<=m;m--)for(var q=a[m],r=q.children.indexOf(a[m-1]),u=0;u<r;u++)f+=q.children[u].size;return f}},{key:"nextLine",value:function(){var a=this.parent;return a?
(a=a.children[a.children.indexOf(this)+1])?a:this.root.findRow(this.row+1):null}},{key:"prevLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)-1])?a:this.root.findRow(this.row-1):null}},{key:"changeExtent",value:function(a,f,m){var q=this.height,r=this.width,u=this.parent;this.width=a;this.height=f;this.hasEstimatedExtent=void 0===m?!1:m;if(r!==a||q!==f)for(f-=q;u;){u.height+=f;if(a>=u.width)u.width=a;else if(r===u.width){for(q=m=0;q<u.children.length;q++){var v=
u.children[q].width;v>m&&(m=v)}u.width=m}u=u.parent}return this}},{key:"changeText",value:function(a,f){f=void 0===f?null:f;var m=this.parent,q=this.height,r=a.length+1-(this.text.length+1),u=0;this.modeState&&this.modeState._string!==a&&(this.modeState=null);this.height||this.width?this.hasEstimatedExtent=!0:(this.width=this.height=0,this.hasEstimatedExtent=!1,u=-q);this._text=a;this._textAttributes=null;this.textAndAttributes=f||(f=[a,null]);if(0!==f.length%2)throw Error("textAndAttributes list is strange, expected flat pairs of text/attr");
for(a=0;a<f.length;a+=2)if((q=f[a+1])&&Array.isArray(q))throw Error("invalid attr part of text/attr pair, its an array: "+q);for(;m;){m.stringSize+=r;m.height+=u;for(a=f=0;a<m.children.length;a++)q=m.children[a].width,q>f&&(f=q);m.width=f;m=m.parent}return this}},{key:"changeTextAndAttributes",value:function(a){a=wd.joinTextAttributes(a);for(var f="",m=0;m<a.length;m+=2)f+="string"===typeof a[m]?a[m]:wd.objectReplacementChar;return this.changeText(f,a)}},{key:"print",value:function(a,f,m){a=void 0===
a?!0:a;f=void 0===f?0:f;f=" ".repeat(void 0===m?0:m)+"line "+f+" (size: 1 width: "+Math.round(this.width)+" height: "+Math.round(this.height)+" text length: "+this.stringSize;m=wd.arr.toTuples(this.textAndAttributes,2).map(function(q){var r=$jscomp.makeIterator(q);q=r.next().value;r=r.next().value;return("string"===typeof q?'"'+q+'"':String(q))+(","+JSON.stringify(r))}).join(",");return f+(a?")":" content: ["+m+"])")}},{key:"toString",value:function(){var a=this.width,f=this.height;return'line ("'+
wd.string.truncate(this._text,30)+'", '+a+"x"+f+")"}},{key:"consistencyCheck",value:function(){var a=[];if(!this.parent)return a.push("line "+this+" has no parent!"),a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Line"}}],c,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:29090,end:35532})}(wd.TreeNode);wd.Line=SR;wd.Line=SR;wd.Line=SR;wd.documentFuzzier={makeString:function(b,c){b=void 0===b?5:b;c=void 0===c?50:c;var l=wd.arr.range(65,90).map(function(a){return String.fromCharCode(a)}).join("");l+=l.toLowerCase()+" \n";b=wd.num.random(b,c);return wd.arr.shuffle(Array.from(l.repeat(Math.ceil(b/l.length)))).slice(0,b).join("")},randomDocPosition:function(b){var c=0===b.rowCount?0:wd.num.random(0,b.rowCount-1);b=wd.num.random(0,b.getLineString(c).length-1);return{row:c,
column:b}},insertRandom:function(b,c,l,a){l=[this.makeString(l,a),null];a=this.randomDocPosition(b);c.push(["insertTextAndAttributes",l,a]);b.insertTextAndAttributes(l,a)},deleteRandom:function(b,c,l,a){l={start:this.randomDocPosition(b),end:this.randomDocPosition(b)};c.push(["remove",l]);b.remove(l)},maybe:function(){return.5>Math.random()},replay:function(b,c,l,a){l=void 0===l?!1:l;a=void 0===a?!1:a;l&&(b.debug=l,l=b.debugHelper(),l.reset());var f=new wd.Document([""]);c.forEach(function(m,q){var r=
$jscomp.makeIterator(m);m=r.next().value;r=$jscomp.arrayFromIterator(r);if(a&&q==c.length-1)debugger;f[m].apply(f,[].concat($jscomp.arrayFromIterable(r),[l]))});b.changeDocument(f)},run:function(){var b=Date.now(),c=0,l=new wd.Document([],{maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5}),a=[];try{for(;1E4>l.stringSize&&1E4>c++;)this.maybe()?this.deleteRandom(l,a):this.insertRandom(l,a),l.consistencyCheck()}catch(m){var f=m}b=Date.now()-b;return{error:f,doc:l,actions:a,
time:b}}};wd.newline="\n";wd.newlineLength=1;var d5=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),l=c.hasOwnProperty("Document")&&"function"===typeof c.Document?c.Document:c.Document=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){this.options=Object.assign({},wd.defaultOptions,{},f);this.lines=a}},
{key:"balance",value:function(){this.root.balanceAfterGrowth();this.fixRoot()}},{key:"fixRoot",value:function(){var a=this.root.root;this.root!==a&&(this.root=a)}},{key:"height",get:function(){return this.root.height}},{key:"width",get:function(){return this.root.width}},{key:"rowCount",get:function(){return this.root.size}},{key:"stringSize",get:function(){return 0===this.rowCount?0:this.root.stringSize-1}},{key:"lineStrings",get:function(){return this.lines.map(function(a){return a.text})}},{key:"lines",
get:function(){return this.root.lines()}},{key:"lines",set:function(a){a=void 0===a?[]:a;this.root=new wd.InnerTreeNode({parent:null,children:[],size:0,width:0,height:0,stringSize:0,options:this.options});this.insertLines(a)}},{key:"clipRow",value:function(a){return Math.max(0,Math.min(a,this.rowCount-1))}},{key:"clipPositionToLines",value:function(a){var f=a.row;a=a.column;var m=this.rowCount;if(0===m)return{row:0,column:0};0>f?f=0:f>=m&&(f=m-1,a=Infinity);0>a?a=0:(m=this.getLineString(f).length,
a>m&&(a=m));return{row:f,column:a}}},{key:"findLineByVerticalOffset",value:function(a){return this.root.findLineByVerticalOffset(a)}},{key:"computeVerticalOffsetOf",value:function(a){return this.root.computeVerticalOffsetOf(a)}},{key:"getLine",value:function(a){return this.root.findRow(this.clipRow(a))}},{key:"getLineString",value:function(a){return(a=this.getLine(a))?a.text:""}},{key:"insertLine",value:function(a,f){f=void 0===f?this.root.rowCount:f;return this.insertLines([a],f)[0]}},{key:"removeLine",
value:function(a){this.root.removeFromToInRoot(a,a)}},{key:"removeLines",value:function(a,f,m){this.root.removeFromToInRoot(a,f,m)}},{key:"insertLines",value:function(a,f){a=this.root.insert(a,f);this.fixRoot();return a}},{key:"textString",get:function(){var a="",f=this.lines;if(!f.length)return a;for(var m=0;m<f.length-1;m++)a=a+f[m].text+wd.newline;return a+=f[m].text}},{key:"textString",set:function(a){this.lines=a.split(wd.newline)}},{key:"endPosition",get:function(){var a=this.rowCount;if(0===
a)return{row:0,column:0};--a;var f=this.getLine(a);return{row:a,column:f.stringSize-1}}},{key:"textAndAttributes",get:function(){var a=this.lines;if(!a.length)return[];for(var f=wd.newline,m=a.length-1,q=a[0].textAndAttributes.slice(),r=1;r<=m;r++){var u=a[r],v=q.pop()||null,y=q.pop()||"";u=u.textAndAttributes;q.push.apply(q,$jscomp.arrayFromIterable(wd.concatAttributePair(y,v,u[0]||"",u[1]||null,f)));for(v=2;v<u.length;v+=2)q.push(u[v],u[v+1])}return q}},{key:"textAndAttributes",set:function(a){this.lines=
wd.splitTextAndAttributesIntoLines(a,wd.newline).map(function(f){return new wd.Line({parent:null,width:0,height:0,textAndAttributes:f})})}},{key:"getTextAndAttributesOfLine",value:function(a){return this.getLine(a).textAndAttributes}},{key:"setTextAndAttributesOfLine",value:function(a,f){this.getLine(a).changeTextAndAttributes(f);return f}},{key:"mixinTextAttribute",value:function(a,f){wd.modifyAttributesInRange(this,f,function(m,q){m._textAttributes=null;return Object.assign({},q,a)})}},{key:"setTextAttribute",
value:function(a,f){wd.modifyAttributesInRange(this,f,function(m,q){m._textAttributes=null;return a})}},{key:"mixoutTextAttribute",value:function(a,f){f=void 0===f?{start:{row:0,column:0},end:this.endPosition}:f;if(a){var m=Object.keys(a);wd.modifyAttributesInRange(this,f,function(q,r){if(!r)return r;q._textAttributes=null;q=0;var u={},v;for(v in r)m.includes(v)||(u[v]=r[v],q++);return 0===q?null:u})}}},{key:"setTextAttributesWithSortedRanges",value:function(a){function f(C,G,F,N){N=void 0===N?0:
N;var L=0,W=G.length;if(0>=F.length-N)return{attributes:[G,null],index:N};for(var la=[];N<F.length&&!(L>=W);N+=2){var wa=F[N],D=wa.start;wa=wa.end;var Q=F[N+1];if(wa.row<C)L=0;else{D.row===C&&L<D.column&&(la.push(G.slice(L,D.column),null),L=D.column);if(wa.row>C){la.push(Q.embeddedMorph||G.slice(L,W),Q);L=W;break}L<wa.column&&la.push(Q.embeddedMorph||G.slice(L,wa.column),Q);L=wa.column}}L<W&&la.push(G.slice(L,W),null);return{attributes:la,index:N}}if(!(2>a.length)){var m=a[0].start,q=a.slice(-2)[0].end,
r=this.getLine(m.row);if(m.row===q.row){if(!(m.column>=q.column)){var u=f(m.row,r.text,a,0).attributes,v=$jscomp.makeIterator(wd.splitTextAndAttributesAtColumns(r.textAndAttributes,[m.column,q.column]));a=v.next().value;v.next();v=v.next().value;q=$jscomp.makeIterator(wd.splitTextAndAttributesAtColumns(u,[m.column,q.column]));q.next();m=q.next().value;q.next();r.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(a),$jscomp.arrayFromIterable(m),$jscomp.arrayFromIterable(v)))}}else{v=m.row;
var y=m.column;m=f(v,r.text,a,0);var z=m.attributes;m=m.index;var A=$jscomp.makeIterator(wd.splitTextAndAttributesAt(r.textAndAttributes,y));u=A.next().value;A.next();y=$jscomp.makeIterator(wd.splitTextAndAttributesAt(z,y));y.next();y=y.next().value;for(r.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(u),$jscomp.arrayFromIterable(y)));r=r.nextLine();){v++;if(v===q.row)break;m=f(v,r.text,a,m);u=m.attributes;m=m.index;r.changeTextAndAttributes(u)}r&&(q=q.column,a=f(v,r.text,a,m).attributes,
v=$jscomp.makeIterator(wd.splitTextAndAttributesAt(r.textAndAttributes,q)),v.next(),v=v.next().value,q=$jscomp.makeIterator(wd.splitTextAndAttributesAt(a,q)).next().value,r.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(q),$jscomp.arrayFromIterable(v))))}}}},{key:"resetTextAttributes",value:function(){this.lines.forEach(function(a){return a.changeText(a.text)})}},{key:"textAttributeAt",value:function(a){var f=a.row;a=a.column;a=Math.max(0,a);var m=this.getLine(f);if(!m)return null;f=
0;m=m.textAndAttributes;for(var q=0;q<m.length;q+=2){var r=m[q],u=m[q+1];f+="string"===typeof r?r.length:1;if(a<f)return u}return m[m.length-1]}},{key:"textAndAttributesInRange",value:function(a){var f=a.start,m=a.end;if(wd.eqPosition(f,m))return["",null];wd.lessPosition(m,f)&&(a=$jscomp.makeIterator([m,f]),f=a.next().value,m=a.next().value);f=wd.maxPosition(f,{column:0,row:0});m=wd.minPosition(m,this.endPosition);var q=this.getLine(f.row),r=q;if(m.row===f.row)return a=f.column,m=m.column,a===m&&
m++,a=$jscomp.makeIterator(wd.splitTextAndAttributesAtColumns(r.textAndAttributes,[a,m])),a.next(),a.next().value;a=[q];for(var u=0;u<m.row-f.row;u++)a.push(q=q.nextLine());q=a[a.length-1];f=$jscomp.makeIterator(wd.splitTextAndAttributesAt(r.textAndAttributes,f.column));f.next();f=f.next().value;m=$jscomp.makeIterator(wd.splitTextAndAttributesAt(q.textAndAttributes,m.column)).next().value;0===f.length&&(f=["",null]);if(1===a.length)return wd.concatTextAndAttributes(f,m,!0);for(r=1;r<a.length-1;r++)"string"===
typeof f[f.length-2]&&(f[f.length-2]+=wd.newline),wd.concatTextAndAttributes(f,a[r].textAndAttributes,!0);"string"===typeof f[f.length-2]&&(f[f.length-2]+=wd.newline);wd.concatTextAndAttributes(f,m,!0);return wd.joinTextAttributes(f,"")}},{key:"textInRange",value:function(a){var f=a.start,m=a.end;f=this.clipPositionToLines(f);m=this.clipPositionToLines(m);wd.lessPosition(m,f)&&(a=$jscomp.makeIterator([m,f]),f=a.next().value,m=a.next().value);a=f;f=a.row;a=a.column;var q=m;m=q.row;q=q.column;if(f===
m)return a===q?"":this.getLineString(f).slice(a,q);var r=this.getLine(f);for(a=r.text.slice(a);(r=r.nextLine())&&++f<m;)a+=wd.newline+r.text;return a+wd.newline+this.getLineString(m).slice(0,q)}},{key:"setTextInRange",value:function(a,f){this.remove(f);return this.insertText(a,f.start,!1)}},{key:"indexToPosition",value:function(a){0>a&&(a=0);a=this.root.findLineWithTextIndex(a,0);return{row:a.row,column:a.column}}},{key:"positionToIndex",value:function(a){var f=a.column,m=this.getLine(a.row);f=Math.max(0,
Math.min(f,m.stringSize-1));for(a=m.parent;a;){m=a.children.indexOf(m);m=a.children.slice(0,m);for(var q=0;q<m.length;q++)f+=m[q].stringSize;m=a;a=a.parent}return f}},{key:"insertTextAndAttributes",value:function(a,f,m){m=void 0===m?!1:m;if(!a||!a.length||2===a.length&&!a[0])return{start:f,end:f};m&&!m.debugDocumentUpdate&&(m=!1);m&&!m.log&&(m=console);var q=f.row;f=f.column;0>q&&(q=0);0>f&&(f=0);var r=this.getLine(q);a=wd.splitTextAndAttributesIntoLines(a,wd.newline);m&&(m.log||(m={log:console.log.bind(console),
dump:console.log.bind(console)}));if(!r)return q=this.insertLines(a.map(function(N){return new wd.Line({parent:null,width:0,height:0,textAndAttributes:N})})),m&&m.log("insert "+q.length+" lines into empty text"),{start:{row:0,column:0},end:{row:q.length,column:wd.arr.last(q).text.length}};if(q>=this.rowCount){var u=this.endPosition;m&&m.log("insertion after doc end, "+q+"/"+f+", inserting "+(q-u.row)+" rows");for(f=0;f<q-u.row;f++)a.unshift(["",null]);q=u.row;f=u.column}if(1===a.length&&""===a[0][0])return m&&
m.log("insert just newline at "+q+"/"+f),q=this.splitLineAt({row:q,column:f}),m&&m.dump(""+this.root.print(!1)),q;var v=a.shift(),y=a.length;u={row:q,column:f};var z=r.stringSize-1;f>z&&(m&&m.log("filling up insertion column at "+q+"/"+f+": "+(f-z)),z=" ".repeat(f-z),v.length?"string"===typeof v[0]?v[0]=z+v[0]:v.unshift(z,null):v.push(z,null));z=$jscomp.makeIterator(wd.splitTextAndAttributesAt(r.textAndAttributes,f));var A=z.next().value;z=z.next().value;""===A[0]&&(A=[]);A=wd.concatTextAndAttributes(A,
v,!0);if(0===y){for(var C=0,G=0;G<v.length;G+=2){var F=v[G];C+="string"===typeof F?F.length:1}u.column=f+C;wd.concatTextAndAttributes(A,z,!0)}r.changeTextAndAttributes(A);if(0===y)return m&&(m.log("single line inserted at "+q+"/"+f),m&&m.dump(""+this.root.print(!1))),{start:{row:q,column:f},end:u};r=a[y-1];for(A=v=0;A<r.length;A+=2)C=r[A],v+="string"===typeof C?C.length:1;u.row+=y;u.column=v;a=this.insertLines(a.map(function(N){return new wd.Line({parent:null,width:0,height:0,textAndAttributes:N})}),
q+1);y=wd.arr.last(a);y.changeTextAndAttributes(wd.concatTextAndAttributes(y.textAndAttributes,z,!0));m&&(m.log(a.length+" inserted at "+q+"/"+f),m&&m.dump(""+this.root.print(!1)));return{start:{row:q,column:f},end:u}}},{key:"insertText",value:function(a,f,m){m=void 0===m?!1:m;if(!a)return{start:f,end:f};var q=f.row;f=f.column;0>q&&(q=0);0>f&&(f=0);var r=this.getLine(q);if(!r)return q=this.insertLines(a.split(wd.newline)),{start:{row:0,column:0},end:{row:q.length,column:wd.arr.last(q).text.length}};
q>=this.rowCount&&(f=this.endPosition,a="\n".repeat(q-f.row)+a,q=f.row,f=f.column);var u=a.split(wd.newline),v=u.shift(),y=u.length;a={row:q,column:f};var z=r.stringSize-1;f>z&&(v=" ".repeat(f-z)+v);z=$jscomp.makeIterator(wd.splitTextAndAttributesAt(r.textAndAttributes,f));var A=z.next().value;z=z.next().value;""===A[0]&&(A=[]);m=wd.concatTextAndAttributes(A,[v,m&&A.length?A[A.length-1]:null],!0);0===y&&(a.column=f+v.length,wd.concatTextAndAttributes(m,z,!0));r.changeTextAndAttributes(m);if(0===y)return{start:{row:q,
column:f},end:a};a.row+=y;a.column=u[y-1].length;m=this.insertLines(u,q+1);m=wd.arr.last(m);m.changeTextAndAttributes(wd.concatTextAndAttributes(m.textAndAttributes,z,!0));return{start:{row:q,column:f},end:a}}},{key:"remove",value:function(a,f){f=void 0===f?!1:f;if(0!==this.rowCount){var m=a.start,q=a.end;if(m.row!==q.row||m.column!==q.column){wd.lessPosition(q,m)&&(q=$jscomp.makeIterator([q,m]),m=q.next().value,q=q.next().value);var r=this.endPosition;if(!wd.lessEqPosition(r,m)){var u=wd.maxPosition(m,
{column:0,row:0});m=u.row;u=u.column;r=wd.minPosition(q,r);q=r.row;var v=r.column;0>u&&(u=0);0>v&&(v=0);f&&!f.debugDocumentUpdate&&(f=!1);f&&(f.log||(f={log:console.log.bind(console),dump:console.log.bind(console),group:console.group.bind(console),groupEnd:console.groupEnd.bind(console)}),f.group("document.remove "+JSON.stringify(a)),f.log("[text doc] removing "+m+"/"+u+" => "+q+"/"+v));var y=this.getLine(m);a=y;r=[y];for(var z=0;z<q-m;z++)r.push(y=y.nextLine());y=r[r.length-1];u=$jscomp.makeIterator(wd.splitTextAndAttributesAt(a.textAndAttributes,
u)).next().value;v=$jscomp.makeIterator(wd.splitTextAndAttributesAt(y.textAndAttributes,v));v.next();v=v.next().value;a.changeTextAndAttributes(wd.concatTextAndAttributes(u,v,!0));f&&f.log('[text doc removal] what remains of start/end line: "'+a.textAndAttributes+'"');1<r.length&&this.removeLines(m+1,q,f);f&&f.groupEnd("[text doc removal]")}}}}},{key:"splitLineAt",value:function(a){var f=a.row;a=a.column;var m=this.getLine(f),q=$jscomp.makeIterator(wd.splitTextAndAttributesAt(m.textAndAttributes,
a)),r=q.next().value;q=q.next().value;m.changeTextAndAttributes(r);m=new wd.Line({parent:null,width:0,height:0,textAndAttributes:q});this.insertLines([m],f+1);return{start:{row:f,column:a},end:{row:f+1,column:0}}}},{key:"replace",value:function(a,f,m){var q=a.start;a=a.end;if(!f.length)return this.remove({start:q,end:a},m),{removed:{start:q,end:a},inserted:{start:q,end:q}};var r=this.clipPositionToLines(q),u=this.clipPositionToLines(a);r.row===u.row&&this.remove({start:r,end:u},m);if(r.row===u.row||
wd.lessEqPosition(this.endPosition,q)){var v;"string"===typeof f?f.length&&(v=f.length&&this.insertText(f,q)):f.length&&(2!==f.length||f[0])&&(v=this.insertTextAndAttributes(f,q,m));v||(v={start:r,end:r});return{removed:{start:q,end:a},inserted:v}}q=r;a=u;m=q;v=m.row;u=m.column;r=a.row;if("string"===typeof f){m=[];f=f.split(wd.newline);for(var y=0;y<f.length;y++)m.push([f[y],null])}else m=wd.splitTextAndAttributesIntoLines(f,wd.newline);var z=!m.length||1===m.length&&(!m[0].length||!m[0][0].length);
z&&(m=[]);var A=f=this.getLine(v);y=this.getLine(r);u=$jscomp.makeIterator(wd.splitTextAndAttributesAt(A.textAndAttributes,u));var C=u.next().value;u.next();for(A.changeTextAndAttributes(z?C:wd.concatTextAndAttributes(C,m.shift(),!0));m.length;){f=f.nextLine();v++;if(f===y)break;f.changeTextAndAttributes(m.shift())}if(!m.length)return m=f.stringSize-1,this.remove({start:{row:v,column:f.stringSize},end:a}),{removed:{start:q,end:a},inserted:{start:q,end:{row:v,column:m}}};console.assert(v==r,"not end row");
console.assert(f.row==v,"row != last line.row");this.remove({start:{row:v,column:0},end:a});r=[];f=m.length;for(u=0;u<f-1;u++)y=m[u],y.length||(y=["",null]),"string"===typeof y[y.length-2]?y[y.length-2]+=wd.newline:y.push(wd.newline,null),r.push.apply(r,$jscomp.arrayFromIterable(y));r.push.apply(r,$jscomp.arrayFromIterable(m[f-1]));m=this.insertTextAndAttributes(r,{row:v,column:0}).end;return{removed:{start:q,end:a},inserted:{start:q,end:m}}}},{key:"wordsOfLine",value:function(a){for(var f=this.getLineString(a),
m=[],q,r=0;r<f.length;r++)/[^a-z0-9_]/i.test(f[r])?q&&(q.range.end.column=r,m.push(q),q=null):(q=q||{index:m.length,string:"",range:{start:{row:a,column:r},end:{row:a,column:r}}},q.string+=f[r]);q&&(q.range.end.column=r,m.push(q));return m}},{key:"wordAt",value:function(a,f){var m=a.row,q=a.column;f=void 0===f?this.wordsOfLine(m):f;return f.find(function(r){r=r.range;var u=r.end.column;return r.start.column<=q&&q<=u})||{range:{start:{column:q,row:m},end:{column:q,row:m}},string:""}}},{key:"wordLeft",
value:function(a){var f=a.row,m=a.column,q=this.wordsOfLine(f);if(!q.length||wd.lessEqPosition(a,q[0].range.start)){for(;0<=--f;)if(q=this.wordsOfLine(f),q.length)return wd.arr.last(q);return{range:{start:a,end:a},string:""}}f=this.wordAt(a);return f.string?wd.eqPosition(f.range.start,a)?q[f.index-1]:f:q.slice().reverse().find(function(r){return r.range.end.column<=m})||{range:{start:a,end:a},string:""}}},{key:"wordRight",value:function(a){var f=a.column,m=a.row,q=this.wordsOfLine(a.row);if(!q.length||
wd.lessEqPosition(wd.arr.last(q).range.end,a)){for(;++m<this.lines.length;)if(q=this.wordsOfLine(m),q.length)return q[0];return{range:{start:a,end:a},string:""}}m=this.wordAt(a);return m.string?wd.eqPosition(m.range.end,a)?q[m.index+1]:m:q.find(function(r){return r.range.start.column>=f})||{range:{start:a,end:a},string:""}}},{key:"scanForward",value:function(a,f){var m=a.row,q=a.column;a=this.getLine(m);for(var r=a.text;q<a.stringSize-1;q++){var u=f(r[q],{row:m,column:q});if(u)return u}for(;a=a.nextLine();)for(m++,
r=a.text,q=0;q<a.stringSize-1;q++)if(u=f(r[q],{row:m,column:q}))return u;return null}},{key:"scanBackward",value:function(a,f){var m=a.row,q=a.column;a=this.getLine(m);var r=a.text;for(--q;0<=q;q--){var u=f(r[q],{row:m,column:q});if(u)return u}for(;a=a.prevLine();)for(m--,r=a.text,q=a.stringSize-2;0<=q;q--)if(u=f(r[q],{row:m,column:q}))return u;return null}},{key:"copy",value:function(){return new this.constructor(this.lines.slice(),this.options)}},{key:"toString",value:function(){return"Document("+
this.rowCount+" lines)"}},{key:"consistencyCheck",value:function(){var a=[],f=this.rowCount,m=this.stringSize,q=this.lines,r=this.textString,u=this.root;f!==q.length&&a.push({error:"document "+this+" row count: "+f+" !== "+q.length});r.length!==m&&a.push({error:"document "+this+" textString.length vs stringSize: "+r.length+" !== "+m});a.push.apply(a,$jscomp.arrayFromIterable(u.consistencyCheck()));f=0;for(m=q[0];m;)m!=q[f]&&a.push({error:"line iteration at "+f+" is broken: nextLine() of "+q[f-1]+
" is not "+q[f]+"!"}),f++,m=m.nextLine();q[f]&&a.push({error:"nextLine() of\n  "+q[f-1]+"\nis nullish but \n  "+q[f]+"\nexists in tree!"});if(a.length)throw Error("Consistency check of document revealed "+a.length+" error"+(1<a.length?"s":"")+":\n"+a.map(function(v){return v.error}).filter(Boolean).join("\n"));}},{key:"print",value:function(){return this.root.print(!1,0,0,"root")}},{key:"print2",value:function(){var a=System.decanonicalize("lively.lang/text-graphics.js"),f=(System.get(a)||{}).printTree;
return f?f(this.root,function(m){return m.toString()},function(m){return m.children},{padding:[2,1,2,1]}):(lively.module.module(a).load().then(function(){return console.log("lively.lang/text-graphics.js loaded")}).catch(function(m){return console.error(m)}),"Loading lively.lang/text-graphics.js lib, please try again later :P")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Document"}},{key:"fuzzyTest",value:function(){return wd.documentFuzzier.run()}},{key:"newline",get:function(){return wd.newline}},
{key:"fromString",value:function(a,f){return new this(a.split(wd.newline),f)}}],c,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:37798,end:71716})}(void 0),cma=d5=wd.Document;wd.default=d5;var wp=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js");wp.lessPosition=
nt;wp.lessEqPosition=ZA;wp.eqPosition=ot;var OB=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js"),l=c.hasOwnProperty("Anchor")&&"function"===typeof c.Anchor?c.Anchor:c.Anchor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f,m){f=void 0===f?{column:0,row:0}:f;this.id=a||""+(this.constructor._id=(this.constructor._id||
0)+1);this.position=f;this.insertBehavior=void 0===m?"move":m}},{key:"isAnchor",get:function(){return!0}},{key:"onDelete",value:function(a){if(wp.lessEqPosition(this.position,a.start))return!1;if(wp.lessEqPosition(a.start,this.position)&&wp.lessEqPosition(this.position,a.end))return this.position=a.start,!0;var f=this.position,m=f.column,q=a.start,r=q.column,u=a.end;a=u.row;u=u.column;this.position={column:a!==this.position.row?m:r===u?m-(u-r):r+(m-u),row:f.row-(a-q.row)};return!0}},{key:"onInsert",
value:function(a){if(wp.lessPosition(this.position,a.start)||wp.eqPosition(this.position,a.start)&&"stay"===this.insertBehavior)return!1;var f=this.position,m=a.start,q=m.row;m=m.column;a=a.end;var r=a.column;this.position={column:f.column+(q!==this.position.row?0:r-m),row:f.row+(a.row-q)};return!0}},{key:"equalsPosition",value:function(a){return a?a.isAnchor?wp.eqPosition(this.position,a.position):wp.eqPosition(this.position,a):!1}},{key:"toString",value:function(){var a=this.position;return"Anchor("+
this.id+" "+a.row+"/"+a.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Anchor"}}],c,{pathInPackage:function(){return"text/anchors.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:82,end:3025})}(void 0);wp.Anchor=OB;wp.Anchor=OB;wp.Anchor=OB;var dma=Object.freeze({__proto__:null,Anchor:OB}),pf=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js");
pf.pt=fh;pf.Color=wf;pf.connect=uk;pf.once=So;pf.disconnect=Sp;pf.Path=Xg;pf.morph=Gc;pf.GridLayout=jx;pf.config=nk;pf.Morph=Hj;pf.lessPosition=nt;pf.minPosition=$A;pf.maxPosition=aB;pf.Icon=En;var EK=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),l=c.hasOwnProperty("TextSearcher")&&"function"===typeof c.TextSearcher?c.TextSearcher:c.TextSearcher=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.morph=a;this.STOP={}}},{key:"doc",get:function(){return this.morph.document}},{key:"processFind",value:function(a,f){var m=this.doc.positionToIndex(a);m=this.doc.indexToPosition(m+f.length);return{range:{start:a,end:m},match:f}}},{key:"stringSearch",value:function(a,f,m,q,r,u,v){if(r&&(pf.lessPosition(v,r.start)||pf.lessPosition(r.end,v)))return this.STOP;m||(u=u.toLowerCase());if(u!==f[0])return null;
r=v.row;v=v.column;u=a[r];a=1>=q?"":"\n"+a.slice(r+1,r+1+(q-1)).join("\n");a=u.slice(v)+a;return 0!==(m?a:a.toLowerCase()).indexOf(f)?null:this.processFind({row:r,column:v},a.slice(0,f.length))}},{key:"reSearch",value:function(a,f,m,q,r,u){if(q&&(pf.lessPosition(u,q.start)||pf.lessPosition(q.end,u)))return this.STOP;q=u.row;u=u.column;return(a=(a[q].slice(u)+(m?"\n"+a.slice(q+1).join("\n"):"")).match(f))?this.processFind({row:q,column:u},a[0]):null}},{key:"search",value:function(a){var f=Object.assign({start:this.morph.cursorPosition,
needle:"",backwards:!1,caseSensitive:!1,inRange:null},a);a=f.start;var m=f.needle,q=f.backwards,r=f.caseSensitive;f=f.inRange;if(!m)return null;f&&(a=q?pf.minPosition(f.end,a):pf.maxPosition(f.start,a));if(m instanceof RegExp){var u=(m.flags||"").split(""),v=!!m.multiline;u.splice(u.indexOf("m"),1);r||u.includes("i")||u.push("i");m=new RegExp("^"+m.source.replace(/^\^+/,""),u.join(""));m=this.reSearch.bind(this,this.doc.lineStrings,m,v,f)}else m=String(m),r||(m=m.toLowerCase()),u=m.split(this.doc.constructor.newline).length,
m=this.stringSearch.bind(this,this.doc.lineStrings,m,r,u,f);a=this.doc[q?"scanBackward":"scanForward"](a,m);return a===this.STOP?null:a}},{key:"searchForAll",value:function(a){for(var f=[],m=0;;){if(1E4<m++)throw Error("endless loop");var q=this.search(a);if(!q)return f;f.push(q);a=Object.assign({},a,{start:a.backwards?q.range.start:q.range.end})}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextSearcher"}}],c,{pathInPackage:function(){return"text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:538,end:3748})}(void 0);pf.TextSearcher=EK;pf.TextSearcher=EK;pf.TextSearcher=EK;var TR=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),l=c.hasOwnProperty("SearchWidget")&&"function"===typeof c.SearchWidget?c.SearchWidget:c.SearchWidget=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=this;a=void 0===a?{}:a;a.targetText&&(a.target=a.targetText);if(!a.target)throw Error("SearchWidget needs a target text morph!");Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);a=this.getSubmorphNamed("replaceButton");var m=this.getSubmorphNamed("replaceAllButton");this.getSubmorphNamed("replaceInput");var q=this.getSubmorphNamed("searchInput"),r=
this.getSubmorphNamed("prevButton"),u=this.getSubmorphNamed("nextButton"),v=this.getSubmorphNamed("cancelButton"),y=this.getSubmorphNamed("acceptButton");pf.connect(y,"fire",this,"execCommand",{converter:function(){return"accept search"}});pf.connect(v,"fire",this,"execCommand",{converter:function(){return"cancel search"}});pf.connect(u,"fire",this,"execCommand",{converter:function(){return"search next"}});pf.connect(r,"fire",this,"execCommand",{converter:function(){return"search prev"}});pf.connect(q,
"inputChanged",this,"search");pf.connect(a,"fire",this,"execCommand",{converter:function(){return"replace and go to next"}});pf.connect(m,"fire",this,"execCommand",{converter:function(){return"replace all"}});this.state={backwards:!1,before:null,position:null,inProgress:null,last:null};q.addCommands([{name:"realign top-bottom-center",exec:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){f.target.execCommand("realign top-bottom-center");f.addSearchMarkersForPreview(f.state.inProgress&&
f.state.inProgress.found,!1);return z.return(!0)})}}])}},{key:"focus",value:function(){var a=this;this.get("searchInput").focus();this.whenRendered().then(function(){return a.get("searchInput").invalidateTextLayout(!0,!0)})}},{key:"onBlur",value:function(a){var f=this,m=this.world();m&&setTimeout(function(){var q=m.focusedMorph;f.withAllSubmorphsDetect(function(r){return r.isFocused()})?f.get("searchInput")!=q&&f.get("replaceInput")!=q&&f.get("searchInput").focus():f.cancelSearch()})}},{key:"cleanup",
value:function(){this.removeSearchMarkers();this.state.inProgress=null;this.textMap&&this.textMap.update()}},{key:"cancelSearch",value:function(){this.state.inProgress&&(this.state.last=this.state.inProgress);this.cleanup();this.removeTextMap();if(this.state.before){var a=this.state.before,f=a.scroll;this.target.selection=a.selectionRange;this.target.scroll=f;this.state.before=null}this.remove();this.target.focus()}},{key:"acceptSearch",value:function(){this.state.inProgress&&(this.state.last=this.state.inProgress);
this.applySearchResult(this.state.inProgress)&&this.state.before&&this.target.saveMark(this.state.before.position);this.get("searchInput").acceptInput();this.cleanup();this.removeTextMap();this.state.before=null;this.remove();this.target.focus()}},{key:"applySearchResult",value:function(a){if(!a||!a.found)return null;var f=this.target,m=f.selection,q=!!f.activeMark||!m.isEmpty(),r=a.found.range,u=r.start;r=r.end;u=a.backwards?u:r;q?m.lead=u:f.cursorPosition=u;f.isLineFullyVisible(u.row)||f.centerRow();
return a}},{key:"removeSearchMarkers",value:function(){var a=this;(this.target.markers||[]).forEach(function(f){f=f.id;return f.startsWith("search-highlight")&&a.target.removeMarker(f)})}},{key:"addSearchMarkers",value:function(a,f,m){m=void 0===m?!1:m;this.removeSearchMarkers();f=this.target;var q=this.textMap,r=f.whatsVisible,u=r.startRow;r=r.endRow;var v=f.document.lineStrings,y=0,z=pf.config.codeEditor.search,A=z.maxCharsPerLine;z=z.fastHighlightLineCount;q&&3<=a.match.length&&v.length<z&&(u=
0,r=v.length-1);z=!1;for(var C=window.performance.now();u<=r&&!z;u++)for(var G=v[u]||"",F=0;F<Math.min(G.length,A);F++){if(300<window.performance.now()-C){z=!0;break}if(m?0===G.slice(F).indexOf(a.match):0===G.slice(F).toLowerCase().indexOf(a.match.toLowerCase()))f.addMarker({id:"search-highlight-"+y++,range:{start:{row:u,column:F},end:{row:u,column:F+a.match.length}},style:{"border-radius":"4px","background-color":"rgba(255, 200, 0, 0.3)","box-shadow":"0 0 4px rgba(255, 200, 0, 0.3)","pointer-events":"none"}}),
F+=a.match.length}this.state.backwards?(m=a.range.start,a=m.row,m=m.column,a={start:{row:a,column:m},end:{row:a,column:m+1}}):(m=a.range.end,a=m.row,m=m.column,a={start:{row:a,column:m-1},end:{row:a,column:m}});m={};f.addMarker({id:"search-highlight-cursor",range:a,style:(m["pointer-events"]="none",m["box-sizing"]="border-box",m[this.state.backwards?"border-left":"border-right"]="3px red solid",m)});q&&q.update()}},{key:"addSearchMarkersForPreview",value:function(a,f){f=void 0===f?!0:f;a&&(this.addSearchMarkers(a),
f&&this.target.removeMarker("search-highlight-cursor"))}},{key:"prepareForNewSearch",value:function(){var a=this.target,f=this.state,m=a.world();if(m){this.openInWorld(m.visibleBounds().center(),m);this.topRight=a.globalBounds().insetBy(5).topRight();if(a.getWindow())pf.once(a.getWindow(),"remove",this,"remove");m=this.get("searchInput");var q=a.scroll;a=a.selection;f.position=a.lead;f.before={scroll:q,position:a.lead,selectionRange:a.range,selectionReverse:a.isReverse()};f.last&&f.last.found&&(pf.disconnect(m,
"inputChanged",this,"search"),this.input=f.last.needle,pf.connect(m,"inputChanged",this,"search"),this.addSearchMarkersForPreview(f.last.found));this.focus();m.selectAll()}}},{key:"advance",value:function(a){var f=this.state.inProgress;if(f&&f.found){var m=f.found.range;f=m.start;m=m.end;this.state.position=a!==this.state.backwards?a?m:f:a?f:m}this.state.backwards=a;return this.search()}},{key:"searchNext",value:function(){return this.advance(!1)}},{key:"searchPrev",value:function(){return this.advance(!0)}},
{key:"search",value:function(){if(!this.input)return this.cleanup(),null;var a=this.state,f=a.backwards,m={backwards:f,start:a.position};a=this.target.search(this.input,m);m=this.state.inProgress=Object.assign({},m,{needle:this.input,found:a});this.applySearchResult(m);a?this.addSearchMarkers(a,f):this.cleanup();return m}},{key:"showTextMap",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(System.import("lively.morphic/text/map.js"),
2);f=a.textMap=pf.morph({type:"textmap"});f.attachTo(a.target);f.isLayoutable=!1;a.addMorph(f);f.topRight=a.innerBounds().bottomRight().addXY(0,5);f.height=a.target.height-a.height-15;f.update();a.renderOnGPU=!0;return m.return(f)})}},{key:"removeTextMap",value:function(){this.textMap&&(this.textMap.remove(),this.textMap.detachFromCurrentTextMorph(),this.textMap=null)}},{key:"keybindings",get:function(){return[{keys:"Enter",command:"accept search or replace and go to next"},{keys:"Tab",command:"change focus"},
{keys:"Ctrl-O",command:"occur with search term"},{keys:"Ctrl-W",command:"yank next word from text"},{keys:"Escape|Ctrl-G",command:"cancel search"},{keys:{win:"Ctrl-F|Ctrl-S|Ctrl-G",mac:"Meta-F|Ctrl-S|Meta-G"},command:"search next"},{keys:{win:"Ctrl-Shift-F|Ctrl-R|Ctrl-Shift-G",mac:"Meta-Shift-F|Ctrl-R|Meta-Shift-G"},command:"search prev"}]}},{key:"commands",get:function(){var a=this;return[{name:"occur with search term",exec:function(){var f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==
q.nextAddress)return q.yield(System.import("lively.morphic/text/occur.js"),2);f=q.yieldResult;m=f.occurStartCommand;a.target.addCommands([m]);a.execCommand("accept search");return q.return(a.target.execCommand("occur",{needle:a.input}))})}},{name:"accept search",exec:function(){a.acceptSearch();return!0}},{name:"cancel search",exec:function(){a.cancelSearch();return!0}},{name:"search next",exec:function(){a.searchNext();return!0}},{name:"search prev",exec:function(){a.searchPrev();return!0}},{name:"accept search or replace and go to next",
exec:function(f,m,q){return a.execCommand(a.get("replaceInput").isFocused()?"replace and go to next":"accept search",m,q)}},{name:"replace current search location with replace input",exec:function(){var f=pf.Path("state.inProgress").get(a);if(f.found){var m=a.get("replaceInput").textString;a.get("replaceInput").get("replaceInput").acceptInput();f.needle instanceof RegExp&&(m=f.found.match.replace(f.needle,m));a.target.replace(f.found.range,m)}return!0}},{name:"replace and go to next",exec:function(){a.execCommand("replace current search location with replace input");
a.execCommand(a.state.backwards?"search prev":"search next");return!0}},{name:"replace all",exec:function(){var f=pf.Path("state.inProgress").get(a);if(f.found){f=Object.assign({},f,{start:{row:0,column:0}});var m=a.get("replaceInput").textString;a.get("replaceInput").get("replaceInput").acceptInput();var q=(new pf.TextSearcher(a.target)).searchForAll(f);a.target.undoManager.group();q.forEach(function(r){var u=r.range;r=r.match;f.needle instanceof RegExp&&(m=r.replace(f.needle,m));a.target.replace(u,
m,!0,!0,!1)});a.target.undoManager.group();a.acceptSearch()}return!0}},{name:"change focus",exec:function(){a.get("searchInput").isFocused()?a.get("replaceInput").focus():a.get("searchInput").focus();return!0}},{name:"yank next word from text",exec:function(){var f=a.target,m=f.wordRight(),q=a.get("searchInput");q.selection.isEmpty()||(q.selection.text="");f=f.textInRange({start:f.cursorPosition,end:m.range.end});q.textString+=f;return!0}}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchWidget"}},
{key:"properties",get:function(){return{name:{defaultValue:"search widget"},borderWidth:{defaultValue:1},borderColor:{defaultValue:pf.Color.gray},borderRadius:{defaultValue:3},fill:{defaultValue:pf.Color.black.withA(.6)},epiMorph:{defaultValue:!0},target:{},state:{},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search widget"}}},input:{after:["submorphs"],get:function(){var a=this.get("searchInput").textString,f=a.match(/^\/(.*)\/([a-z]*)$/);return f?new RegExp(f[1],
f[2]):a},set:function(a){this.get("searchInput").textString=String(a)}},fontSize:{after:["submorphs"],get:function(){return this.get("searchInput").fontSize},set:function(a){this.get("replaceInput").fontSize=a}},fontFamily:{after:["submorphs"],get:function(){return this.get("searchInput").fontFamily},set:function(a){this.get("searchInput").fontFamily=a;this.get("replaceInput").fontFamily=a}},layout:{initialize:function(){this.layout=new pf.GridLayout({groups:{nextButton:{resize:!1},prevButton:{resize:!1},
acceptButton:{resize:!1},cancelButton:{resize:!1}},rows:[0,{fixed:28,paddingTop:5,paddingBottom:2.5},1,{fixed:28,paddingTop:2.5,paddingBottom:5}],columns:[0,{paddingLeft:5,paddingRight:5},1,{fixed:25},2,{fixed:25},3,{fixed:5},4,{fixed:25},5,{fixed:25},6,{fixed:10}],grid:[["searchInput","nextButton","prevButton",null,"acceptButton","cancelButton",null],["replaceInput","replaceButton","replaceButton",null,"replaceAllButton","replaceAllButton",null]]})}},submorphs:{after:["extent"],initialize:function(){this.submorphs=
[pf.morph({type:"button",name:"acceptButton",label:pf.Icon.textAttribute("check-circle")}).fit(),pf.morph({type:"button",name:"cancelButton",label:pf.Icon.textAttribute("times-circle")}).fit(),pf.morph({type:"button",name:"nextButton",label:pf.Icon.textAttribute("arrow-alt-circle-down",{textStyleClasses:["far"]})}).fit(),pf.morph({type:"button",name:"prevButton",label:pf.Icon.textAttribute("arrow-alt-circle-up",{textStyleClasses:["far"]})}).fit(),pf.morph({type:"input",name:"searchInput",placeholder:"search input",
historyId:"lively.morphic-text search"}),pf.morph({type:"input",name:"replaceInput",placeholder:"replace input",historyId:"lively.morphic-text replace"}),pf.morph({type:"button",styleClasses:["replace"],name:"replaceButton",label:"replace"}),pf.morph({type:"button",styleClasses:["replace"],name:"replaceAllButton",label:"replace all"})];pf.connect(this.get("searchInput"),"onBlur",this,"onBlur");pf.connect(this.get("replaceInput"),"onBlur",this,"onBlur")}},textMap:{after:["submorphs"]}}}}],c,{pathInPackage:function(){return"text/search.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3867,end:21256})}(pf.Morph);pf.SearchWidget=TR;pf.SearchWidget=TR;pf.SearchWidget=TR;var FK=[{name:"search in text",exec:function(b,c){c=void 0===c?{backwards:!1}:c;b=b._searchWidget||(b._searchWidget=new pf.SearchWidget({target:b,extent:pf.pt(300,20)}));b.state.backwards=c.backwards;
b.prepareForNewSearch();pf.config.codeEditor.search.showTextMap&&b.showTextMap();return!0}}];pf.searchCommands=FK;pf.searchCommands=FK;pf.searchCommands=FK;var yk=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js");yk.todo=function(b){throw Error("not yet implemented "+b);};yk.Rectangle=Pd;yk.rect=Gk;yk.pt=fh;yk.arr=Te;yk.Range=kx;var e5=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js"),l=c.hasOwnProperty("TextLayout")&&"function"===typeof c.TextLayout?
c.TextLayout:c.TextLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},{key:"reset",value:function(){this.resetLineCharBoundsCache()}},{key:"restore",value:function(a,f){var m=function(u){var v=0;return yk.arr.flatten(yk.arr.histogram(u,u.length/3).map(function(y){var z=$jscomp.makeIterator(y);y=z.next().value;var A=z.next().value;
z=z.next().value;for(var C=[],G=0;G<y;G++)C.push(yk.rect(v,0,A,z)),v+=A;return C}))};a=$jscomp.makeIterator(a);for(var q=a.next();!q.done;q=a.next()){var r=$jscomp.makeIterator(q.value);q=r.next().value;r=r.next().value;r=m(r);this.lineCharBoundsCache.set(f.document.getLine(q),r)}}},{key:"resetLineCharBoundsCache",value:function(a){this.lineCharBoundsCache=new WeakMap;a&&!a._isDeserializing&&(this.estimateLineHeights(a),a.makeDirty())}},{key:"resetLineCharBoundsCacheOfLine",value:function(a){a&&this.lineCharBoundsCache.set(a,
null)}},{key:"resetLineCharBoundsCacheOfRow",value:function(a,f){var m=a.document;a._isDeserializing&&a._initializedByCachedBounds||m&&this.resetLineCharBoundsCacheOfLine(m.getLine(f))}},{key:"resetLineCharBoundsCacheOfRange",value:function(a,f){for(var m=f.start.row;m<=f.end.row;m++)this.resetLineCharBoundsCacheOfRow(a,m)}},{key:"estimateLineHeightsInRange",value:function(a,f){for(var m=a.document,q=a.getGlobalTransform(),r=f.start.row;r<=f.end.row;r++)this.resetLineCharBoundsCacheOfRow(a,m.getLine(r),
q)}},{key:"estimateExtentOfLine",value:function(a,f,m){m=void 0===m?a.getGlobalTransform():m;var q=a.fontMetric,r=a.lineWrapping,u=a.padding,v=a.textRenderer,y=a.debug,z=a.defaultTextStyle,A=a.getProperty("extent").x,C=u.left(),G=u.right(),F=u.top();u=u.bottom();v=v.directRenderTextLayerFn(a);var N=f.textAndAttributes,L=[],W;A=A-C-G;if(N&&N.length)for(var la=0,wa=0;la<N.length;la+=2)(W=N[la])&&W.isMorph?(W.position=this.pixelPositionFor(a,{row:f.row,column:wa}).subPt(a.origin),wa++):W&&(wa+=W.length),
L.push(Object.assign({},z,{},N[la+1]));else L.push(z);N=L.length;for(la=z=W=0;la<N;la++){wa=q.defaultCharExtent(a,{defaultTextStyle:L[la],width:1E3,transform:m,paddingBottom:u,paddingTop:F,paddingRight:G,paddingLeft:C},v);var D=wa.width;z=Math.max(wa.height,z);W+=D}a=z;m=f.text.length||1;q=Math.round(W/N);C=m*q;C=r?Math.min(C,A):C;r&&(a=Math.round((Math.ceil(m/Math.max(3,A/q))||1)*z));y&&console.log(f.row+": "+f.height+" => "+a);f.changeExtent(C,a,!0)}},{key:"estimateLineHeights",value:function(a,
f){var m=a.fontMetric,q=a.textRenderer,r=a.document,u=a.defaultTextStyle,v=a.clipMode,y=a.textAlign,z=a.padding,A=a.lineWrapping,C=a.debug,G=a.getProperty("extent"),F=G.x,N=G.y;G=a.getGlobalTransform();var L=z.left(),W=z.right(),la=z.top();z=z.bottom();r=r.lines;var wa=q.directRenderTextLayerFn(a);C&&(C=a.debugHelper(C),C.debugTextLayout||(C=!1));if(!C&&10>a.lineCount()&&3E3>a.document.stringSize&&!yk.arr.any(a.textAndAttributes,function(D){return D&&void 0!=D.fontFamily}))for(f=q.directRenderLineFn(a),
f=m.manuallyComputeBoundsOfLines(a,r,0,0,{defaultTextStyle:u,width:F,height:N,clipMode:v,lineWrapping:A,textAlign:y,transform:G,paddingLeft:L,paddingRight:W,paddingTop:la,paddingBottom:z},wa,f),u=0;u<r.length;u++)C=f[u],r[u].changeExtent(C.width,C.height,!m.isFontSupported(a.fontFamily,a.fontWeight));else{for(u=m=0;u<r.length;u++)v=r[u],!f&&0<v.height||(m++,this.estimateExtentOfLine(a,v,G));a.viewState._textLayoutStale=!1;C&&C.log("estimateLineHeights, "+m+"/"+r.length+" updated, force: "+f)}}},{key:"defaultCharExtent",
value:function(a){var f=a.textRenderer,m=a.fontMetric,q=a.defaultTextStyle,r=a.getGlobalTransform();f=f.directRenderTextLayerFn(a);return m.defaultCharExtent(a,{transform:r,defaultTextStyle:q,width:1E3},f)}},{key:"textBounds",value:function(a){var f=a.document,m=a.padding,q=a.borderWidthLeft,r=a.borderWidthRight,u=a.borderWidthTop;a=a.borderWidthBottom;return new yk.Rectangle(m.left(),m.top(),Math.round(f.width+q+r),Math.round(f.height+u+a))}},{key:"isFirstLineVisible",value:function(a){return 0>=
a.viewState.firstVisibleRow}},{key:"isLastLineVisible",value:function(a){return a.viewState.lastVisibleRow>=a.lineCount()-1}},{key:"isLineVisible",value:function(a,f){return f>=a.viewState.firstVisibleRow&&f<=a.viewState.lastVisibleRow}},{key:"isLineFullyVisible",value:function(a,f){return f>=a.viewState.firstFullyVisibleRow&&f<=a.viewState.lastFullyVisibleRow}},{key:"whatsVisible",value:function(a){var f=a.viewState.firstVisibleRow,m=a.viewState.lastVisibleRow;return{lines:a.document.lines.slice(f,
m),startRow:f,endRow:m}}},{key:"firstFullVisibleLine",value:function(a){return a.viewState.firstFullyVisibleRow}},{key:"lastFullVisibleLine",value:function(a){return a.viewState.lastFullyVisibleRow}},{key:"screenLineRange",value:function(a,f,m){var q=f.row,r=f.column;r=Math.max(0,r);q=Math.min(a.lineCount()-1,Math.max(0,q));var u=this.charBoundsOfRow(a,q);r>u.length-1&&(r=u.length-1);for(var v=u[r],y=f=r,z=r+1;z<u.length&&!(u[z].y>v.y+v.height);z++)y=z;y===u.length-1&&y++;for(z=r-1;0<=z&&!(u[z].y<
v.y+v.height);z--)f=z;m&&(a=a.getLine(q).slice(f,y).match(/^\s*/)[0].length,f+=a);return new yk.Range({start:{row:q,column:f},end:{row:q,column:y}})}},{key:"rangesOfWrappedLine",value:function(a,f){for(var m=a.getLine(f).length,q=0,r=[];;){var u=this.screenLineRange(a,{row:f,column:q},!1);r.push(u);if(u.end.column>=m)break;var v=u.end.column+1;if(v>=m)break;if(v<=q){if(!a.env.renderer.getNodeForMorph(a))break;throw Error("should not happen "+u.end.column+" vs "+q);}q=v}return r}},{key:"chunkAtPos",
value:function(a,f){yk.todo("chunkAtPos")}},{key:"charBoundsOfRow",value:function(a,f){f=a.document.getLine(f);a._initializedByCachedBounds&&!this._restored&&(this.restore(a._initializedByCachedBounds,a),this._restored=!0);var m=this.lineCharBoundsCache.get(f);if(m)return m;var q=a.getProperty("extent");m=q.x;q=q.y;var r=a.fontMetric,u=a.textRenderer,v=a.defaultTextStyle,y=a.clipMode,z=a.textAlign,A=a.padding,C=a.lineWrapping,G=a.getGlobalTransform(),F=A.left(),N=A.right(),L=A.top();A=A.bottom();
var W=u.directRenderLineFn(a);u=u.directRenderTextLayerFn(a);a=r.manuallyComputeCharBoundsOfLine(a,f,0,0,{defaultTextStyle:v,width:m,height:q,clipMode:y,lineWrapping:C,textAlign:z,paddingLeft:F,paddingRight:N,paddingTop:L,paddingBottom:A,transform:G},u,W);if(a.find(function(la){return void 0==la.width&&void 0==la.height}))return a;this.lineCharBoundsCache.set(f,a);return a}},{key:"computeMaxBoundsForLineSelection",value:function(a,f){var m=f.start,q=f.end,r=a.textLayout,u=r.rangesOfWrappedLine(a,
m.row).find(function(v){return v.containsPosition(m)});q=a.lineWrapping&&u?u.intersect(f).end:q;q=q.row==m.row?q:{row:q.row,column:-1};f=r.charBoundsOfRow(a,m.row);f=0>q.column?f.slice(m.column):f.slice(m.column,q.column+1);q=m.column+(f?f.indexOf(yk.arr.max(f,function(v){return v.height})):0);return r.boundsFor(a,{row:m.row,column:q})}},{key:"boundsFor",value:function(a,f){var m=f.row;f=f.column;f=Math.max(0,f);m=Math.min(a.lineCount()-1,Math.max(0,m));var q=this.charBoundsOfRow(a,m);if(0<q.length)if(f>=
q.length){var r=q[q.length-1];r=new yk.Rectangle(r.x+r.width,r.y,0,r.height)}else r=yk.Rectangle.fromLiteral(q[f]);r||(console.warn("Cannot compute bounds for line "+m+"/"+f),r=new yk.Rectangle(0,0,0,0));f=a.document;a=a.padding;r.x+=a.left();r.y=r.y+f.computeVerticalOffsetOf(m)+a.top();return r}},{key:"pixelPositionFor",value:function(a,f){return this.boundsFor(a,f).topLeft()}},{key:"textPositionFromPoint",value:function(a,f){var m=f.addPt(a.origin),q=m.x,r=m.y,u=a.document;m=a.padding;var v=m.left(),
y=m.top();if(r>u.height+y)return u.endPosition;if(r<y)return{row:0,column:0};m=u.findLineByVerticalOffset(r-y);if(!m)return{row:0,column:0};var z=m.line.row;a=this.charBoundsOfRow(a,z);var A=a.length,C=a[0],G=a[A-1];m={row:z,column:0};q-=v;r-=y+u.computeVerticalOffsetOf(z);if(0===A||q<=C.x+Math.round(C.width/2)&&r>=C.y&&r<=C.y+C.height)return m;if(q>G.x+Math.round(G.width/2)&&r>=G.y&&r<=G.y+G.height)return m.column=A,m;v=[];for(u=A-1;0<=u;u--)if(G=y=a[u],z=G.x,A=G.width,C=G.y,G=G.height,!(r<C||r>
C+G)&&(v.push(y),q>=z+Math.round(A/2)))return m.column=1===v.length?u:u+1,m;if(v.length)return m.column=a.indexOf(yk.arr.last(v)),m;q=Infinity;r=-1;for(u=0;u<a.length;u++)v=a[u],v=f.distSquared(yk.pt(v.x+v.width/2,v.y+v.height/2)),v>=q||(q=v,r=u);m.column=r;return m}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextLayout"}}],c,{pathInPackage:function(){return"text/layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:244,end:17181})}(void 0),ema=e5=yk.TextLayout;yk.default=e5;var Ee=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js");Ee.printViewState=function(b){var c=b.viewState,l=c.scrollTop,a=c.scrollHeight,f=c.textHeight,m=c.firstVisibleRow;c=c.lastVisibleRow;var q=b.document.lines;console.log(b+" #"+b.id.slice(0,12)+"\nscroll: "+l+" + "+a+"\nlines: "+m+" - "+c+"\nvisible lines: "+(c-m)+"\nheight: "+f+", "+q.length+
" lines")};Ee.installCSS=function(b){Ee.cssInstalled=!0;Ee.addOrChangeCSSDeclaration("new-text-css","\n\n    /* markers */\n\n    .newtext-marker-layer {\n      position: absolute;\n    }\n\n    /* selection / cursor */\n\n    .newtext-cursor {\n      z-index: 5;\n      pointer-events: none;\n      position: absolute;\n      background-color: black;\n    }\n\n    .hidden-cursor .newtext-cursor {\n      background-color: transparent !important;\n    }\n\n    .newtext-cursor.diminished {\n      background-color: gray;\n    }\n\n    .newtext-selection-layer {\n      position: absolute;\n    }\n\n    /*-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* text layer / content */\n\n    .newtext-text-layer {\n      box-sizing: border-box;\n      position: absolute;\n      white-space: pre;\n      z-index: 0;\n      min-width: 100%;\n      pointer-events: none;\n    }\n\n    .newtext-before-filler {}\n\n    .newtext-text-layer.wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-word;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.only-wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.wrap-by-chars {\n      white-space: pre-wrap;\n      word-break: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.no-wrapping {\n    }\n\n    .newtext-text-layer a {\n       pointer-events: auto;\n    }\n\n    .newtext-text-layer.auto-width .line {\n      width: fit-content;\n    }\n\n    .newtext-text-layer .line {\n      -moz-border-radius: 0;\n      -webkit-border-radius: 0;\n      border-radius: 0;\n      border-width: 0;\n      background: transparent;\n      font-family: inherit;\n      font-size: inherit;\n      margin: 0;\n      word-wrap: normal;\n      line-height: inherit;\n      color: inherit;\n      position: relative;\n      overflow: visible;\n      -webkit-tap-highlight-color: transparent;\n      -webkit-font-variant-ligatures: contextual;\n      font-variant-ligatures: contextual;\n    }\n\n    .line > .Morph {\n      display: inline-block !important;\n      vertical-align: top !important;\n    }\n\n    blockquote {\n      margin: 0;\n      -webkit-margin-start: 0;\n      -webkit-margin-end: 0;\n    }\n\n    .newtext-text-layer blockquote {\n      margin-left: 2em;\n      margin-right: 2em;\n      border-left: 2px lightgray solid;\n      padding-left: 2%;\n    }\n\n    /* -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* debug styling */\n\n    .debug-info {\n      position: absolute;\n      outline: 1px solid green;\n      pointer-events: none;\n      z-index: 4;\n      text-align: center;\n      font-family: monospace;\n      color: green;\n      background-color: white;\n      font-size: small;\n      vertical-align: baseline;\n    }\n\n    .debug-line {\n      position: absolute;\n      outline: 1px solid red;\n      pointer-events: none;\n      z-index: 4,\n      text-align: right;\n      font-family: monospace;\n      font-size: small;\n      vertical-align: baseline;\n      color: red;\n    }\n\n    .debug-char {\n      position: absolute;\n      outline: 1px solid orange;\n      pointer-events: none;\n      z-index: 3\n    }\n\n  ",
b.document)};Ee.extractHTMLFromTextMorph=dI;Ee.obj=lf;Ee.arr=Te;Ee.num=wk;Ee.pt=fh;Ee.Rectangle=Pd;Ee.vdom=dE;Ee.defaultAttributes=gi;Ee.defaultStyle=dw;Ee.addOrChangeCSSDeclaration=nc;Ee.hyperscriptFnForDocument=VI;Ee.objectReplacementChar="\ufffd";Ee.config=nk;Ee.getSvgVertices=sr;var GK=Ee.vdom;Ee.h=GK.h;Ee.create=GK.create;Ee.patch=GK.patch;Ee.diff=GK.diff;Ee.cssInstalled=!1;Ee.debug=!!Ee.config.onloadURLQuery["debug-text"];Ee.nextTick=function(b,c,l,a,f,m){for(;!f&&l<c.length;)f=b[c[l++]+"equestAnimationFrame"];
return f&&f.bind(b)||b.setImmediate||function(q){b.setTimeout(q,0)}}("undefined"!==typeof window?window:global,["r","webkitR","mozR","msR","oR"],0);(function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),l=c.hasOwnProperty("AfterTextRenderHook")&&"function"===typeof c.AfterTextRenderHook?c.AfterTextRenderHook:c.AfterTextRenderHook=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,
b,[{key:"reset",value:function(a){this.morph=a;this.needsRerender=this.called=!1}},{key:"updateLineHeightOfNode",value:function(a,f,m){if(0===f.height||f.hasEstimatedExtent){var q=a.getGlobalTransform().inverse();q.e=q.f=0;var r=1!=q.getScale()||0!=q.getRotation();r&&(m.style.transform=q.toString());var u=m.getBoundingClientRect();q=u.height;u=u.width;r&&(m.style.transform="");q&&u&&(f.height!==q||f.width!==u)&&a.fontMetric.isFontSupported(a.fontFamily,a.fontWeight)&&(f.changeExtent(u,q,!1),a.textLayout.resetLineCharBoundsCacheOfLine(f),
this.needsRerender=!0,a.viewState._needsFit=!0);if(f.textAndAttributes&&f.textAndAttributes.length)for(u=r=0;r<f.textAndAttributes.length;r+=2)(m=f.textAndAttributes[r])&&m.isMorph?(a._positioningSubmorph=m,m.position=a.textLayout.pixelPositionFor(a,{row:f.row,column:u}).subPt(a.origin),m._dirty=!1,a._positioningSubmorph=null,u++):m&&(u+=m.length);return q}return f.height}},{key:"updateExtentsOfLines",value:function(a){var f=this.morph,m=f.viewState,q=f.fontMetric;m.dom_nodes=[];m.dom_nodeFirstRow=
0;m.textWidth=a.scrollWidth;a=a.children;for(var r=0,u;r<a.length&&"line"!=a[r].className;)r++;if(r<a.length){u=a[r];var v=u.dataset;v=Number(v?v.row:u.getAttribute("data-row"));if("number"===typeof v&&!isNaN(v)){m.dom_nodeFirstRow=v;u=0;v=f.document.getLine(v);for(var y;r<a.length;r++){var z=a[r];m.dom_nodes.push(z);v&&(y||(y=v.hasEstimatedExtent),v.hasEstimatedExtent=y,u+=this.updateLineHeightOfNode(f,v,z),v.hasEstimatedExtent=!q.isFontSupported(f.fontFamily,f.fontWeight),v=v.nextLine())}this.needsRerender?
(f.fitIfNeeded(),f.makeDirty()):f._dirty=!!f.submorphs.find(function(A){return A.needsRerender()})}}}},{key:"hook",value:function(a,f,m){a&&a.parentNode&&(f=this.morph.viewState,f.text_layer_node=a,f.fontmetric_text_layer_node=null,this.called=!0,this.updateExtentsOfLines(a))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AfterTextRenderHook"}}],c,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4957,end:9032})})(void 0);var f5=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),l=c.hasOwnProperty("TextRenderer")&&"function"===typeof c.TextRenderer?c.TextRenderer:c.TextRenderer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a?
Ee.cssInstalled||Ee.installCSS(a):console.warn("Text renderer initialized without domEnv. Depending on what you want to do you might have bad luck...!");this.domEnv=a}},{key:"directRenderLineFn",value:function(a){var f=this,m=a.viewState._renderLineFn;if(!m){var q=Ee.hyperscriptFnForDocument(this.domEnv.document);m=a.viewState._renderLineFn=function(r){return f.renderLine(q,null,a,r)}}return m}},{key:"directRenderTextLayerFn",value:function(a){var f=this,m=a.viewState._renderTextLayerFn;if(!m){var q=
Ee.hyperscriptFnForDocument(this.domEnv.document);m=a.viewState._renderTextLayerFn=function(r){return f.renderJustTextLayerNode(q,a,r,[])}}return m}},{key:"renderMorph",value:function(a,f){var m=a.cursorWidth||1,q=[],r=a.selection;if(a.inMultiSelectMode()){m=r.selections;for(r=0;r<m.length-1;r++)q.push.apply(q,$jscomp.arrayFromIterable(this.renderSelectionLayer(a,m[r],!0,2)));q.push.apply(q,$jscomp.arrayFromIterable(this.renderSelectionLayer(a,m[r],!1,4)))}else q=this.renderSelectionLayer(a,r,!1,
m);m=this.renderTextLayer(a,f);r=this.renderJustTextLayerNode(Ee.h,a,null,[]);var u=this.renderMarkerLayer(a,f),v=a.document.width>a.width?a.scrollbarOffset:Ee.pt(0,0);v=Ee.h("div",{className:"scrollLayer",style:Object.assign({position:"absolute",top:"0px"},a.viewState.fastScroll?{overflow:a.scrollActive?a.clipMode:"hidden"}:{},{width:a.width+"px",height:a.height+"px"})},[Ee.h("div",{style:{width:Math.max(a.document.width,a.width)+"px",height:Math.max(a.document.height,a.height)-v.y+"px"}})]);m.properties.className+=
" actual";m.properties.style.overflow="visible"===a.clipMode?"visible":"hidden";r.properties.className+=" font-measure";var y=a.embeddedMorphMap,z=y?a.submorphs.filter(function(A){return!y.has(A)}):a.submorphs;q=[].concat($jscomp.arrayFromIterable(q),[u,r,m,f.renderSelectedSubmorphs(a,z)]);return Ee.h("div",Object.assign({},Ee.defaultAttributes(a,f),{style:Object.assign({},Ee.defaultStyle(a),{},a.viewState.fastScroll?{overflow:"visible"==a.clipMode?"visible":"hidden"}:{},{"-moz-user-select":"none",
cursor:"auto"===a.nativeCursor?a.readOnly?"default":"text":a.nativeCursor})}),[v].concat($jscomp.arrayFromIterable(a.viewState.fastScroll?[Ee.h("div",{className:"scrollWrapper",style:{"pointer-events":"none",position:"absolute",width:"100%",height:"100%",transform:"translate(-"+a.scroll.x+"px, -"+a.scroll.y+"px)"}},q)]:q)))}},{key:"renderTextLayer",value:function(a,f){var m=this,q=a.debug?[].concat($jscomp.arrayFromIterable(this.renderDebugLayer(a)),$jscomp.arrayFromIterable(this.renderLines(Ee.h,
f,a))):this.renderLines(Ee.h,f,a);q=this.renderJustTextLayerNode(Ee.h,a,null,q);q.properties.style.position="absolute";var r=a.viewState.afterTextRenderHook||(a.viewState.afterTextRenderHook=new Ee.AfterTextRenderHook);r.reset(a);q.properties["after-text-render-hook"]=r;Ee.nextTick(function(){m.manuallyTriggerTextRenderHook(a,f)});return q}},{key:"manuallyTriggerTextRenderHook",value:function(a,f){var m=a.viewState.afterTextRenderHook;m&&!m.called&&((f=(f=f.getNodeForMorph(a))&&f.querySelector(".actual.newtext-text-layer"))&&
m.hook(f),a.ownerChain().every(function(q){return q.visible})&&a.fit())}},{key:"renderJustTextLayerNode",value:function(a,f,m,q){var r=f.padding,u=r.x,v=r.y,y=f.fixedWidth,z=f.fixedHeight,A=f.backgroundColor,C=f.fontColor,G=f.textAlign,F=f.fontSize,N=f.textDecoration,L=f.fontStyle,W=f.fontWeight,la=f.fontFamily,wa=f.lineHeight,D=f.wordSpacing,Q=f.letterSpacing,J=f.tabWidth,O=u+r.width;r=v+r.height;var ja=Math.max(f.document.height,f.height),X="newtext-text-layer";switch(f.lineWrapping){case !0:case "by-words":X+=
" wrap-by-words";break;case "only-by-words":X+=" only-wrap-by-words";break;case "by-chars":X+=" wrap-by-chars";break;case !1:X+=" no-wrapping"}y||(X+=" auto-width");z||(X+=" auto-height");f={height:ja+"px"};0<u&&(f.paddingLeft=u+"px");0<O&&(f.paddingRight=O+"px");0<v&&(f.paddingTop=v+"px");0<r&&(f.paddingBottom=r+"px");Q&&(f.letterSpacing=Q);D&&(f.wordSpacing=D);wa&&(f.lineHeight=wa);la&&(f.fontFamily=la);W&&(f.fontWeight=W);L&&(f.fontStyle=L);N&&(f.textDecoration=N);F&&(f.fontSize=F+"px");G&&(f.textAlign=
G);C&&(f.color=String(C));A&&(f.backgroundColor=A);8!==J&&(f.tabSize=J);u={className:X,style:f};f.overflow="hidden";m&&(v=m.clipMode,A=m.height,m=m.width,"number"===typeof m&&(f.width=m+"px"),"number"===typeof A&&(f.height=A+"px"),v&&(f.overflow=v));return a("div",u,q)}},{key:"renderLines",value:function(a,f,m){var q=m.height,r=m.scroll,u=m.padding.y,v=m.document,y=m.clipMode;f.getNodeForMorph(m);r=r.y;var z=v.rowCount-1,A=v.height,C="visible"!==y,G=v.findLineByVerticalOffset(C?Math.max(0,C?r-u:0):
0)||{row:0,y:0,offset:0,line:v.getLine(0)},F=G.line,N=G.offset;y=G.y;G=G.row;u=v.findLineByVerticalOffset(C?Math.min(A,r-u+q):A)||{row:z,offset:0,y:0,line:v.getLine(z)};v=u.line;var L=u.offset,W=u.row;u=C?G:0;N=0===N?G:G+1;z=C?W+1:z;C=v&&L!==v.height?W-1:W;this.maxVisibleLines=Math.max(this.maxVisibleLines||1,z-u+1);G=[];v=[];v.push(a("div.newtext-before-filler",{key:"filler",style:{height:y+"px"}}));for(L=0;L<this.maxVisibleLines&&(G.push(F),W=this.renderLine(a,f,m,F),v.push(W),W.key=F.row%this.maxVisibleLines,
L++,F=F.nextLine(),F););Object.assign(m.viewState,{scrollTop:r,scrollHeight:q,scrollBottom:r+q,heightBefore:y,textHeight:A,firstVisibleRow:u,lastVisibleRow:z,firstFullyVisibleRow:N,lastFullyVisibleRow:C,visibleLines:G});m.debug&&Ee.printViewState(m);return v}},{key:"renderLine",value:function(a,f,m,q){var r=q.textAndAttributes,u=[],v=r.length,y=m.fontSize;if(0<v)for(var z=0;z<v;z+=2){var A=r[z]||"\u00a0";var C=r[z+1];if("string"!==typeof A)u.push(A.isMorph?this.renderEmbeddedSubmorph(a,f,A,C):Ee.objectReplacementChar);
else if(C){var G=C.fontSize&&(Ee.obj.isString(C.fontSize)?C.fontSize:C.fontSize+"px");var F=C.fontFamily;var N=C.fontWeight;var L=C.fontStyle;var W=C.textDecoration;var la=C.fontColor;var wa=C.backgroundColor;var D=C.nativeCursor;var Q=C.textStyleClasses;var J=C.link;var O=C.lineHeight||O;var ja=C.textAlign||ja;var X=C.wordSpacing||X;var ha=C.letterSpacing||ha;var bb=C.paddingRight;var pb=C.paddingLeft;var oa=C.paddingTop;var ba=C.paddingBottom;var qa=C.verticalAlign;var Ga=C.textStroke;var ua=C.quote||
ua;var H="span";var M={};var R={style:M};G&&C.fontSize<y&&(y=C.fontSize);J&&(H="a",(R.href=J)&&J.startsWith("http")&&(R.target="_blank"));if(J||D)M.pointerEvents="auto";G&&(M.fontSize=G);F&&(M.fontFamily=F);N&&(M.fontWeight=N);L&&(M.fontStyle=L);W&&(M.textDecoration=W);la&&(M.color=String(la));wa&&(M.backgroundColor=String(wa));D&&(M.cursor=D);bb&&(M.paddingRight=bb);pb&&(M.paddingLeft=pb);oa&&(M.paddingTop=oa);ba&&(M.paddingBottom=ba);qa&&(M.verticalAlign=qa);Ga&&(M["-webkit-text-stroke"]=Ga);C.doit&&
(M.pointerEvents="auto",M.cursor="pointer");Q&&Q.length&&(R.className=Q.join(" "));u.push(a(H,R,A))}else u.push(A)}else u.push(a("br"));f={};m.fontSize>y&&(f.fontSize=y+"px");O&&(f.lineHeight=O);ja&&(f.textAlign=ja);ha&&(f.letterSpacing=ha);X&&(f.wordSpacing=X);m=a("div",{className:"line",style:f,dataset:{row:q.row}},u);if(ua)for("number"!==typeof ua&&(ua=1);ua--;)m=a("blockquote",{},m);return m}},{key:"renderEmbeddedSubmorph",value:function(a,f,m,q){q=q||{};if(f)return a=f.render(m),a.properties.style.position=
"relative",a.properties.style.transform="",a.properties.style.textAlign="initial",q.paddingTop&&(a.properties.style.marginTop=q.paddingTop),q.paddingLeft&&(a.properties.style.marginLeft=q.paddingLeft),q.paddingRight&&(a.properties.style.marginRight=q.paddingRight),q.paddingBottom&&(a.properties.style.marginBottom=q.paddingBottom),a;f=m.extent;q=f.x+"px";f=f.y+"px";return a("div",{className:m.styleClasses.join(" "),style:{width:q,height:f}},[])}},{key:"renderSelectionLayer",value:function(a,f,m,q){m=
void 0===m?!1:m;q=void 0===q?2:q;if(!f)return[];var r=a.textLayout,u=f.start,v=f.end,y=f.cursorVisible,z=f.selectionColor,A=a.document,C=a.cursorColor,G=f.isReverse();u=r.boundsFor(a,u);var F=r.computeMaxBoundsForLineSelection(a,f),N=r.boundsFor(a,v);Ee.pt(u.x,F.y);F=Ee.pt(N.x,N.y);v=u.height;N=N.height;u=G?Ee.pt(u.x,u.y):F;m=this.cursor(u,G?v:N,y,m,q,C);if(f.isEmpty())return[m];q=[];y=f.start.row;C=A.computeVerticalOffsetOf(y)+a.padding.top();G=a.padding.left();for(var L,W,la;y<=f.end.row;){v=A.getLine(y);
if(!(y<a.viewState.firstVisibleRow-50)){if(y>a.viewState.lastVisibleRow+50)break;u=r.charBoundsOfRow(a,y).map(Ee.Rectangle.fromLiteral);N=y==f.start.row;if(la=u[0].bottom()<Ee.arr.last(u).top()){F=r.rangesOfWrappedLine(a,y).map(function(J){return J.intersect(f)});W=N;var wa=0,D=L=void 0,Q=$jscomp.makeIterator(F);for(F=Q.next();!F.done;F=Q.next())F=F.value,F.isEmpty()||(L=u.slice(F.start.column,F.end.column),wa=W?Ee.arr.min(L.map(function(J){return J.top()})):wa,D=Ee.arr.max(L.map(function(J){return J.bottom()})),
W=L[0],F=Ee.pt(G+W.left(),C+wa),W=Ee.arr.last(L),L=Ee.pt(G+W.right(),C+D),wa=D,W=!1,q.push(Ee.Rectangle.fromAny(F,L)))}la||(la=y==f.end.row,F=N?f.start.column:0,wa=la?f.end.column:u.length-1,N=N&&Ee.arr.min(u.slice(F,wa+1).map(function(J){return J.top()}))||0,Q=F>=wa?5:0,W=u[F],F=Ee.pt(G+(W?W.left():Ee.arr.last(u).right()),C+N),W=u[wa],f.includingLineEnd?L=Ee.pt(a.width-a.padding.right(),C+N+v.height):(la=la&&f.end.column<=u.length-1,L=Ee.pt(G+(W?la?W.left():W.right():Ee.arr.last(u).right())+Q,C+
N+v.height)),q.push(Ee.Rectangle.fromAny(F,L)))}C+=v.height;y++}a=this.selectionLayerRounded(q,z,a);a.push(m);return a}},{key:"selectionLayerRounded",value:function(a,f,m){var q=[m={left:[],right:[]}];a=$jscomp.makeIterator(a);for(var r=a.next();!r.done;r=a.next()){r=r.value;u&&(u.left()>r.right()||u.right()<r.left())&&q.push(m={left:[],right:[]});m.left.push(r.topLeft(),r.bottomLeft());m.right.push(r.topRight(),r.bottomRight());var u=r}u=[];m={};q=$jscomp.makeIterator(q);for(a=q.next();!a.done;m=
{$jscomp$loop$prop$pos$2559:m.$jscomp$loop$prop$pos$2559},a=q.next())if(a=a.value,a.left.length){m.$jscomp$loop$prop$pos$2559=a.left.reduce(function(G,F){return G.minPt(F)});r=a.left.concat(a.right.reverse());a=[];for(var v=0;v<r.length;v++){var y=r[v-1]||Ee.arr.last(r),z=r[v],A=r[v+1]||Ee.arr.first(r),C=y.subPt(z).normalized().scaleBy(6);y=z.addPt(C);y._next=C.scaleBy(-1);A=A.subPt(z).normalized().scaleBy(6);z=z.addPt(A);z._prev=A.scaleBy(-1);a.push(y,z)}a=a.map(function(G){return function(F){return{position:F.subPt(G.$jscomp$loop$prop$pos$2559),
isSmooth:!0,controlPoints:{next:F._next||Ee.pt(0),previous:F._prev||Ee.pt(0)}}}}(m));r=Ee.getSvgVertices(a);z=a.map(function(G){return G.position}).reduce(function(G,F){return G.minPt(F)});v=z.y;z=z.x;a=a.map(function(G){return G.position}).reduce(function(G,F){return G.maxPt(F)});u.push(Ee.h("svg",{namespace:"http://www.w3.org/2000/svg",version:"1.1",style:{position:"absolute",left:m.$jscomp$loop$prop$pos$2559.x+"px",top:m.$jscomp$loop$prop$pos$2559.y+"px",width:a.x-z,height:a.y-v}},Ee.h("path",
{namespace:"http://www.w3.org/2000/svg",attributes:{d:r,fill:f.toString()}})))}return u}},{key:"cursor",value:function(a,f,m,q,r,u){return Ee.h("div",{className:"newtext-cursor"+(q?" diminished":""),style:{left:a.x-Math.ceil(r/2)+"px",top:a.y+"px",width:r+"px",height:f+"px",display:m?"":"none",background:u||"black"}})}},{key:"renderMarkerLayer",value:function(a){var f=a.markers,m=a.textLayout,q=a.viewState,r=q.firstVisibleRow;q=q.lastVisibleRow;var u=[];if(!f)return u;f=$jscomp.makeIterator(f);for(var v=
f.next();!v.done;v=f.next()){var y=v.value;v=y.style;y=y.range;var z=y.start;y=y.end;if(!(y.row<r||z.row>q))if(z.row===y.row)u.push(this.renderMarkerPart(m,a,z,y,v));else{u.push(this.renderMarkerPart(m,a,z,a.lineRange(z.row).end,v));for(z=z.row+1;z<=y.row-1;z++){var A=a.lineRange(z);u.push(this.renderMarkerPart(m,a,A.start,A.end,v,!0))}u.push(this.renderMarkerPart(m,a,{row:y.row,column:0},y,v))}}return u}},{key:"renderMarkerPart",value:function(a,f,m,q,r,u){u=void 0===u?!1:u;var v=f.document;var y=
v.getLine(m.row);u?(a=f.padding,u=a.left(),m=a.top()+v.computeVerticalOffsetOf(m.row),a=u+y.width,y=y.height):(y=a.boundsFor(f,m),u=y.x,m=y.y,y=a.boundsFor(f,q),a=y.x,y=y.height);y=Math.ceil(y);return Ee.h("div.newtext-marker-layer",{style:Object.assign({},r,{left:u+"px",top:m+"px",height:y+"px",width:a-u+"px"})})}},{key:"renderDebugLayer",value:function(a){var f=[],m=a.viewState,q=m.heightBefore,r=m.firstVisibleRow,u=m.lastVisibleRow;m=m.visibleLines;var v=a.padding,y=a.scroll,z=y.x,A=y.y;y=v.left();
var C=v.right(),G=v.top();v.bottom();f.push(Ee.h("div.debug-info",{style:{left:z+y+"px",top:A+"px",width:a.width-C+"px"}},Ee.h("span","visible rows: "+r+" - "+u)));for(v=0;r<u;v++,r++){var F=m[v];A=a.textLayout.lineCharBoundsCache.get(F);F=F.height;f.push(Ee.h("div.debug-line",{style:{left:z+y+"px",top:G+q+"px",width:a.width-C+"px",height:F+"px"}},Ee.h("span",String(r))));if(A)for(var N=0;N<A.length;N++){var L=A[N];f.push(Ee.h("div.debug-char",{style:{left:y+L.x+"px",top:G+q+L.y+"px",width:L.width+
"px",height:L.height+"px"}}))}q+=F}return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextRenderer"}}],c,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9049,end:36001})}(void 0),fma=f5=Ee.TextRenderer;Ee.extractHTMLFromTextMorph=dI;Ee.extractHTMLFromTextMorph=
dI;Ee.default=f5;var xp=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js");xp.arr=Te;xp.eqPosition=ot;xp.KeyHandler=aQ;xp.commands={activate:{name:"[IyGotoChar] activate",exec:function(b,c){c=void 0===c?{backwards:!1}:c;xp.IyGotoCharKeyHandler.installInto(b,c.backwards);return!0}},moveTo:{name:"[IyGotoChar] move to",exec:function(b,c){b.saveMark();var l=b.selection,a=l.lead,f=a.row,m=a.column;a=!!b.activeMark||!l.isEmpty();var q={row:f,column:m-1};b=b.document[c.backwards?"scanBackward":
"scanForward"](q,function(r,u){return r!==c.needle||xp.eqPosition(q,u)?null:u});if(!b)return!0;b.column++;l.lead=b;a||(l.anchor=b);return!0},multiSelectAction:"forEach",readOnly:!0}};var HK=xp.commands.activate;xp.activate=HK;xp.activate=HK;xp.activate=HK;(function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js"),l=c.hasOwnProperty("IyGotoCharKeyHandler")&&"function"===typeof c.IyGotoCharKeyHandler?c.IyGotoCharKeyHandler:c.IyGotoCharKeyHandler=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?!1:a;Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.charToFind=void 0;this.backwards=a}},{key:"isIyGoToChar",get:function(){return!0}},{key:"uninstallFrom",value:function(a){a._cachedKeyhandlers=null;xp.arr.remove(a._keyhandlers||[],this)}},{key:"eventCommandLookup",value:function(a,
f){var m=f.keyCombo,q=m.startsWith("input-");if(f.onlyModifiers||m.startsWith("Shift-")||!q&&!f.isModified&&!f.isFunctionKey)return{command:"null",passEvent:!0};f=q&&m.slice(6);if(!this.charToFind)if(q)this.charToFind=f;else return this.uninstallFrom(a),null;return f!==this.charToFind?(this.uninstallFrom(a),null):{command:xp.commands.moveTo,args:{backwards:this.backwards,needle:f}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IyGotoCharKeyHandler"}},{key:"installInto",value:function(a,
f){f=void 0===f?!1:f;a.keyhandlers.filter(function(m){return m.isIyGoToChar}).forEach(function(m){return m.uninstallFrom(a)});a._cachedKeyhandlers=null;a._keyhandlers=(a._keyhandlers||[]).concat(new this(f))}}],c,{pathInPackage:function(){return"text/iy-goto-char.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1063,end:3067})})(xp.KeyHandler);
var nh=lively.FreezerRuntime.recorderFor("lively.morphic/text/commands.js");nh.chain=Hl;nh.arr=Te;nh.string=Hg;nh.date=rt;nh.pt=fh;nh.Range=kx;nh.eqPosition=ot;nh.commands=[{name:"clipboard copy",doc:"placeholder for native copy",scrollCursorIntoView:!1,exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row);return!0}},{name:"manual clipboard copy",doc:"attempts to copy selection via browser interface",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b,c){c=void 0===
c?{collapseSelection:!0,delete:!1,dontTryNativeClipboard:!1}:c;var l=b.selection,a=l.text,f=c.hasOwnProperty("collapseSelection")?c.collapseSelection:!0;b.saveMark(l.anchor);b.activeMark=null;(l.isMultiSelection?l.selections.slice():[l]).forEach(function(m){var q=m.isEmpty()?b.lineRange():m.range,r=b.textInRange(q);b.env.eventDispatcher.killRing.add(r);c.delete?b.deleteText(q):!m.isEmpty()&&f&&m.collapse(m.lead)});c.dontTryNativeClipboard||b.env.eventDispatcher.doCopy(a);return!0}},{name:"clipboard cut",
doc:"placeholder for native cut",exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row,!0);return!0}},{name:"clipboard paste",doc:"placeholder for native paste",exec:function(){return!0}},{name:"manual clipboard paste",doc:"attempts to paste from the clipboard to lively \u2013 currently requires browser extension!",multiSelectAction:"single",exec:function(b,c){c=void 0===c?{killRingCycleBack:!1}:c;var l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){a=b.env.eventDispatcher.killRing;
c.killRingCycleBack&&(nh.arr.last(nh.arr.pluck(b.commandHandler.history,"name"))||"").includes("clipboard paste")&&(l=a.back());!l&&a.isCycling()&&(l=a.yank());l||(l=a.yank());b.selection.isMultiSelection?(b.undoManager.group(),b.selection.selections.slice(0,-1).reverse().map(function(m,q){q=a.pointer-1-q;0>q&&(q=a.buffer.length-1);return{selection:m,pasted:a.buffer[q]||""}}).concat({selection:b.selection.defaultSelection,pasted:l}).forEach(function(m){return m.selection.text=m.pasted}),b.undoManager.group()):
l&&(b.undoManager.group(),b.selection.text=l,b.undoManager.group());return f.return(!0)})}},{name:"browse clipboard",exec:function(b){var c,l,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return c=b.env.eventDispatcher.killRing,l=c.pointer,a=c.buffer,f=a.map(function(u){return{isListItem:!0,string:nh.string.truncate(u,80).replace(/\n/g,""),value:u}}),r.yield(b.world().filterableListPrompt("select items to paste",f,{preselect:l,multiSelect:!0}),2);m=r.yieldResult;
q=m.selected;q.length&&(b.undoManager.group(),b.insertTextAndSelect(q.join("\n")),b.undoManager.group());return r.return(!0)})}},{name:"text undo",doc:"undo text changes",multiSelectAction:"single",exec:function(b){b.textUndo();return!0}},{name:"text redo",doc:"redo text changes",multiSelectAction:"single",exec:function(b){b.textRedo();return!0}},{name:"select all",doc:"Selects entire text contents.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){b.saveMark();b.selectAll();return!0}},
{name:"delete backwards",doc:"Delete the character in front of the cursor or the selection.",exec:function(b){if(b.rejectsInput())return!1;if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&b.editorPlugin.cmd_delete_backwards())return!0;var c=b.selection;c.isEmpty()&&c.growLeft(1);c.text="";c.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"delete",doc:"Delete the character following the cursor or the selection.",exec:function(b){var c=b.selection;if(b.rejectsInput())return!1;
c.isEmpty()&&c.growRight(1);c.text="";c.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"indent",scrollCursorIntoView:!1,exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(c,l){return b.insertText(b.tab,l.start)});b.undoManager.group();return!0}},{name:"outdent",scrollCursorIntoView:!1,exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(c,l){return c.startsWith(b.tab)&&b.deleteText({start:l.start,end:{row:l.start.row,column:b.tab.length}})});b.undoManager.group();
return!0}},{name:"indent according to mode",exec:function(b,c){c=void 0===c?{}:c;var l,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){l=b.editorPlugin&&b.editorPlugin.mode;if(!l)return y.return(!0);m=c.hasOwnProperty("undo")?c.undo:!0;c.hasOwnProperty("firstRow")&&c.hasOwnProperty("lastRow")?(q=c,a=q.firstRow,f=q.lastRow):b.selection.isEmpty()?a=f=b.cursorPosition.row:(r=b.selection.selectedRows,a=r.first,f=r.last);return y.yield(System.import("lively.ide/editor-modes.js"),
2)}u=y.yieldResult;v=u.indentLines;m&&b.undoManager.group();v(b,l,a,f,"smart",!0,c);m&&b.undoManager.group();return y.return(!0)})}},{name:"tab - snippet expand or indent",scrollCursorIntoView:!0,exec:function(b){var c=b.snippets.find(function(l){return l.canExpand(b)});return c?(c.expandAtCursor(b),!0):b.selection.isEmpty()?b.execCommand("insertstring",{string:b.tab}):b.execCommand("indent according to mode")}},{name:"browse snippets",scrollCursorIntoView:!0,exec:function(b){var c,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return c=b.snippets.map(function(q){return{isListItem:!0,string:q.trigger+" - "+q.expansion,value:q}}),m.yield(b.world().filterableListPrompt("select snippet",c,{requester:b}),2);l=m.yieldResult;a=$jscomp.makeIterator(l.selected);(f=a.next().value)&&f.expandAtCursor(b);return m.return(!0)})}},{name:"transpose chars",exec:function(b){if(b.selection.isEmpty()){var c=b.cursorPosition,l=c.row,a=c.column;c=nh.Range.create(l,a-1,l,a+1);var f=b.getLine(l);l=f[a-1];a=f[a];l&&a&&b.replace(c,
a+l,!0)}return!0}},{name:"cycle selection contents",documentation:"If there are multiple selections, will take the text of the first one and replace the second one with it, the text of the second will replace the third, the last selection contents will replace the contents of the first.",multiSelectAction:"single",exec:function(b){var c=b.selection.selections;b.undoManager.group();c.reduce(function(l,a){var f=a.text;a.text=l;return f},nh.arr.last(c).text);b.undoManager.group();return!0}},{name:"go left",
doc:"Move the cursor 1 character left. At the beginning of a line move the cursor up. If a selection is active, collapse the selection left.",exec:function(b){b.activeMark?b.selection.selectLeft(1):b.selection.goLeft(1);return!0}},{name:"go right",doc:"Move the cursor 1 character right. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",exec:function(b){b.activeMark?b.selection.selectRight(1):b.selection.goRight(1);return!0}},{name:"go up",doc:"Move the cursor 1 line. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",
scrollCursorIntoView:!0,exec:function(b){b.activeMark?b.selection.selectUp(1):b.selection.goUp(1,!0);return!0}},{name:"go down",exec:function(b){b.activeMark?b.selection.selectDown(1):b.selection.goDown(1,!0);return!0}},{name:"select left",exec:function(b){b.selection.selectLeft(1);return!0}},{name:"select right",exec:function(b){b.selection.selectRight(1);return!0}},{name:"select up",exec:function(b){b.selection.selectUp(1,!0);return!0}},{name:"select down",exec:function(b){b.selection.selectDown(1,
!0);return!0}},{name:"select line",exec:function(b){var c=b.selection,l=c.lead.row,a=b.lineRange(l,!1);c.range=c.range.equals(a)?b.lineRange(l,!0):a;return!0}},{name:"goto line start",exec:function(b,c){c=void 0===c?{select:!1}:c;c=c.select||!!b.activeMark;var l=b.selection,a=l.lead;b=b.screenLineRange(a,!0);l.lead=nh.eqPosition(a,b.start)?{column:0,row:a.row}:b.start;!c&&(l.anchor=l.lead);return!0}},{name:"goto line end",exec:function(b,c){c=void 0===c?{select:!1}:c;c=c.select||!!b.activeMark;var l=
b.selection;b=b.screenLineRange(l.lead,!0);l.lead=b.end;!c&&(l.anchor=l.lead);return!0}},{name:"goto page up",exec:function(b){b.pageUpOrDown({direction:"up",select:!!b.activeMark});return!0}},{name:"goto page down",exec:function(b){b.pageUpOrDown({direction:"down",select:!!b.activeMark});return!0}},{name:"goto page up and select",exec:function(b){b.pageUpOrDown({direction:"up",select:!0});return!0}},{name:"goto page down and select",exec:function(b){b.pageUpOrDown({direction:"down",select:!0});return!0}},
{name:"goto start",exec:function(b,c){c=void 0===c?{select:!!b.activeMark}:c;b.gotoDocumentStart(Object.assign({},c));return!0}},{name:"goto end",exec:function(b,c){c=void 0===c?{select:!!b.activeMark}:c;b.gotoDocumentEnd(Object.assign({},c));return!0}},{name:"goto paragraph above",exec:function(b,c){c=void 0===c?{select:!!b.activeMark}:c;var l=b.paragraphRangeAbove(b.cursorPosition.row);l.start.row--;b.selection.lead=l.start;c.select||b.collapseSelection();return!0}},{name:"goto paragraph below",
exec:function(b,c){c=void 0===c?{select:!!b.activeMark}:c;var l=b.paragraphRangeBelow(b.cursorPosition.row);l.end.row++;b.selection.lead=l.end;c.select||b.collapseSelection();return!0}},{name:"move cursor to screen bottom in 1/3 steps",readOnly:!0,exec:function(b){var c=!!b.activeMark,l=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),f=b.textLayout.lastFullVisibleLine(b),m=a+Math.floor((f-a)/2);if(l.row<a)l.row=a;else if(l.row<m)l.row=m;else if(l.row<f)l.row=f;else return!0;b.selection.lead=
l;c||(b.selection.anchor=b.selection.lead);return!0}},{name:"move cursor to screen top in 1/3 steps",readOnly:!0,exec:function(b){var c=!!b.activeMark,l=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),f=b.textLayout.lastFullVisibleLine(b),m=a+Math.floor((f-a)/2);if(l.row<=a)return!0;l.row=l.row<=m?a:l.row<=f?m:f;b.selection.lead=l;c||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto line",exec:function(b){var c,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==
f.nextAddress)return c=!!b.activeMark,l=Number,f.yield(b.world().prompt("Enter line number"),2);a=l(f.yieldResult);isNaN(a)||(c?b.selection.lead={row:a,column:0}:b.cursorPosition={row:a,column:0},b.scrollCursorIntoView(),b.focus());return f.return(!0)})}},{name:"join line",exec:function(b,c){c=void 0===c?{withLine:"before"}:c;var l=b.selection,a=l.start,f=l.end;l=l.lead;if(!b.selection.isEmpty()){if(a.row===f.row)return!0;c=b.undoManager.ensureNewGroup(b,"join line");f=nh.arr.range(0,f.row-1-a.row).map(function(m){return b.joinLine(a.row)});
b.undoManager.group(c);b.selection.isMultiSelection&&(b.cursorPosition=f[0],f.slice(1).forEach(function(m){return b.selection.addRange({start:m,end:m})}));return!0}f=l.row;if("before"===c.withLine&&0>=f||"after"===c.withLine&&f>=b.document.endPosition.row)return!0;b.undoManager.group();b.cursorPosition=b.joinLine("before"===c.withLine?f-1:f);b.undoManager.group();return!0}},{name:"split line",exec:function(b){var c=b.cursorPosition,l=b.getLine(c.row).match(/^\s*/)[0].length;b.insertText("\n"+" ".repeat(l),
c);b.cursorPosition=c;return!0}},{name:"insert line",exec:function(b,c){c=void 0===c?{where:"above"}:c;var l=b.cursorPosition.row,a=b.getLine(l).match(/^\s*/)[0].length;"below"===c.where&&l++;b.insertText(" ".repeat(a)+"\n",{column:0,row:l});b.cursorPosition={column:a,row:l};return!0}},{name:"duplicate line or selection",exec:function(b){b.undoManager.group();var c=b.selection.end;if(b.selection.isEmpty())b.insertText(b.getLine(c.row)+"\n",{column:0,row:c.row+1});else{var l=b.selection.range;b.insertText(b.selection.text,
c);b.selection=l}b.undoManager.group();return!0}},{name:"delete emtpy line or until end of line",exec:function(b){var c=b.cursorPosition,l=b.getLine(c.row);if(nh.eqPosition(b.document.endPosition,c))return!0;c=l.trim()?{start:c,end:{row:c.row,column:l.length}}:{start:{row:c.row,column:0},end:{row:c.row+1,column:0}};b.env.eventDispatcher.doCopy(b.textInRange(c));b.undoManager.group();b.deleteText(c);b.undoManager.group();return!0}},{name:"delete left until beginning of line",exec:function(b){b.activeMark&&
(b.activeMark=null);if(!b.selection.isEmpty())return b.selection.text="",!0;var c=b.lineRange(),l=b.cursorPosition;if(nh.eqPosition({row:l.row,column:0},l))return!0;c={start:nh.eqPosition(c.start,l)?{row:l.row,column:0}:c.start,end:l};b.deleteText(c);return!0}},{name:"move lines up",multiSelectAction:"single",exec:function(b){var c=b.selection;if(b.inMultiSelectMode()){var l=c.selections.map(function(m){return m.range});l.slice().sort(nh.Range.compare).forEach(function(m){b.selection=m;b.execCommand("move lines up")});
l.forEach(function(m){m.start.row--;m.end.row--});b.selection.ranges=l;return!0}c.isEmpty()||0!==c.end.column||c.growRight(-1);l=c.start;c=c.end;var a=b.getLine(l.row-1),f=b.undoManager.ensureNewGroup(b);b.insertText(a+"\n",{row:c.row+1,column:0});b.deleteText({start:{row:l.row-1,column:0},end:{row:l.row,column:0}});b.undoManager.group(f);return!0}},{name:"move lines down",multiSelectAction:"single",exec:function(b){var c=b.selection;if(b.inMultiSelectMode()){var l=c.selections.map(function(m){return m.range});
l.slice().sort(nh.Range.compare).reverse().forEach(function(m){b.selection=m;b.execCommand("move lines down")});l.forEach(function(m){m.start.row++;m.end.row++});b.selection.ranges=l;return!0}c.isEmpty()||0!==c.end.column||c.growRight(-1);var a=c.range,f=a;l=f.start;f=f.end;c.isEmpty()?a={start:{row:l.row,column:0},end:{row:l.row+1,column:0}}:0!==f.column&&(a={start:l,end:{row:f.row+1,column:0}});c=b.undoManager.ensureNewGroup(b);a=b.deleteText(a);b.insertText(a,{row:l.row+1,column:0});b.undoManager.group(c);
b.selection={start:Object.assign({},l,{row:l.row+1}),end:Object.assign({},f,{row:f.row+1})};return!0}},{name:"old select word",exec:function(b){var c=b.selection;c.range=b.wordAt(c.lead).range;return!0}},{name:"select word",exec:function(b){var c=b.selection;if(b=b.selectMatchingBrackets(b.textString,b.positionToIndex(c.lead)))c.range={start:b[0],end:b[1]+1};return!0}},{name:"select word right",exec:function(b){var c=b.selection;c.anchor=b.wordRight(c.end).range.end;return!0}},{name:"goto word left",
exec:function(b,c){c=void 0===c?{select:!1}:c;c=c.select||!!b.activeMark;var l=b.wordLeft().range;b.selection.lead=l.start;c||(b.selection.anchor=l.start);return!0}},{name:"goto word right",exec:function(b,c){c=void 0===c?{select:!1}:c;c=c.select||!!b.activeMark;var l=b.wordRight().range;b.selection.lead=l.end;c||(b.selection.anchor=l.end);return!0}},{name:"delete word right",exec:function(b){b.undoManager.group();var c=b.wordRight().range.end;c={start:b.cursorPosition,end:c};b.env.eventDispatcher.doCopy(b.textInRange(c));
b.deleteText(c);b.undoManager.group();return!0}},{name:"delete word left",exec:function(b){b.undoManager.group();var c={start:b.wordLeft().range.start,end:b.cursorPosition};b.deleteText(c);b.undoManager.group();return!0}},{name:"goto matching right",exec:function(b,c){c=void 0===c?{select:!!b.activeMark}:c;var l=c.pairs||{"{":"}","[":"]","(":")","<":">"};if(l=b.findMatchingForward(b.cursorPosition,"right",l)||b.findMatchingForward(b.cursorPosition,"left",l))b.selection.lead=l,c.select||(b.selection.anchor=
b.selection.lead);return!0}},{name:"goto matching left",exec:function(b,c){c=void 0===c?{select:!!b.activeMark}:c;var l=c.pairs||{"}":"{","]":"[",")":"(",">":"<"};if(l=b.findMatchingBackward(b.cursorPosition,"left",l)||b.findMatchingBackward(b.cursorPosition,"right",l))b.selection.lead=l,c.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"realign top-bottom-center",doc:"Cycles through centering the cursor position, aligning it at the top, aligning it at the bottom.",scrollCursorIntoView:!1,
multiSelectAction:"single",exec:function(b){var c=b.charBoundsFromTextPosition(b.cursorPosition),l=c.topLeft();c=b.height-c.height;var a=b.scroll,f=a.x;a=a.y;a=2>Math.abs(l.y-a)?l.y-c:2>Math.abs(l.y-a-.5*c)?l.y:l.y-.5*c;b.scroll=nh.pt(f,a);return!0}},{name:"reverse selection",doc:"switches the selection lead and anchor",exec:function(b){var c=b.selection;if(c.isEmpty()){var l=b.popSavedMark();l&&(b.saveMark(b.cursorPosition),c.lead=l.position)}else c.reverse();return!0}},{name:"toggle active mark",
doc:"....",handlesCount:!0,multiSelectAction:"single",exec:function(b,c,l){var a=b.activeMark;c=b.selection;var f=!c.isEmpty();if(4===l){if(b=b.popSavedMark())c.lead=b.position,f||(c.anchor=c.lead);return!0}if(!a&&!f)return b.activeMark=c.lead,!0;b.saveMark(a||c.anchor);b.activeMark=null;f&&(b.inMultiSelectMode()?c.selections:[c]).forEach(function(m){return m.anchor=m.lead});return!0}},{name:"fit text to column",handlesCount:!0,multiSelectAction:"forEach",exec:function(b,c,l){function a(u,v,y){if(u.length<=
f)return[v+u.trim()];y=u.slice(0,f);var z=nh.arr.last(nh.string.reMatches(y,q)),A=z&&0<z.start?z.start:f;z=y.slice(0,A);u=v+(y.slice(A)+u.slice(f)).trimLeft();return[z].concat(a(u,v))}if(4===l)return b.execCommand("join line");b.selection.isEmpty()&&b.selectLine();c=b.selection;var f=l||80,m=c.selectedRows;l=c.range;var q=/[ ]+/g,r=/^[\s\t]+/;c=nh.string.paragraphs(nh.arr.range(m.first,m.last).map(function(u){return b.getLine(u)}).join("\n"),{keepEmptyLines:!0});c=nh.chain(c.map(function(u){if(!/^\s*$/.test(u)){u=
u.split("\n").join(" ");if(""===u.trim())u=[""];else{var v=u.match(r);v=v?v[0]:"";u=a(v+u.trim(),v)}u=u.join("\n")+"\n"}return u})).flatten().value().join("\n");b.undoManager.group();b.replace(l,c);b.undoManager.group();return!0}},{name:"lowercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toLowerCase();b.undoManager.group();return!0}},{name:"remove trailing whitespace",exec:function(b){b.undoManager.group();var c=
0;b.withLinesDo(0,b.documentEndPosition.row,function(l,a){return l.match(/\s+$/)&&++c&&b.replace(a,l.trimRight())});b.world().setStatusMessage(c+" lines cleaned up");b.undoManager.group();return!0}},{name:"uppercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toUpperCase();b.undoManager.group();return!0}},{name:"newline",exec:function(b){var c=b.cursorPosition,l=b.getLine(c.row),a=l.match(/^\s*/)[0].length;b.undoManager.group();
!l.trim()&&a&&(b.deleteText({start:{row:c.row,column:0},end:{row:c.row,column:a}}),c.column=0);if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&b.editorPlugin.cmd_newline(c,l,a))return!0;b.selection.text="\n"+" ".repeat(a);b.selection.collapseToEnd();b.undoManager.group();return!0}},{name:"insertstring",exec:function(b,c){var l=c=void 0===c?{string:null,undoGroup:!1}:c;c=l.string;l=l.undoGroup;var a="string"===typeof c&&c.length;a||console.warn("command insertstring called with not string value");
if(b.rejectsInput()||!a)return!1;b.saveActiveMarkAndDeactivate();if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_insertstring&&b.editorPlugin.cmd_insertstring(c))return!0;a=b.selection;var f=!a.isEmpty();f&&b.undoManager.group();var m=a.lead;a.replace(c,!0,!0,!0,!(1===c.length&&"\n"!==c&&0<m.column));a.collapseToEnd();f&&b.undoManager.group();l&&(/^[\s\.,\?\+=]+$/.test(c)||"number"!==typeof l?b.undoManager.group():b.undoManager.groupLater(l));return!0}},{name:"toggle line wrapping",scrollCursorIntoView:!1,
multiSelectAction:"single",exec:function(b){b.keepPosAtSameScrollOffsetWhile(function(){return b.lineWrapping=b.lineWrapping?!1:b.fontMetric.isProportional(b.fontFamily)?!0:"by-chars"});return!0}},{name:"cancel input",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b,c,l,a){b.env.eventDispatcher.resetKeyInputState();b.selection.disableMultiSelect&&b.selection.disableMultiSelect();b.selection.isEmpty()||(b.selection.anchor=b.selection.lead);b.activeMark&&(b.activeMark=null);return!0}}];
nh.usefulEditorCommands=[{name:"insert date",handlesCount:!0,exec:function(b,c,l){c=nh.date.format(new Date,l?"mediumDate":"isoDate");b.undoManager.group();b.insertText(c);b.undoManager.group();return!0}},{name:"[todo] toggle todo marker",exec:function(b){var c=b.selection;c.isEmpty()&&b.selectLine();b=/\[\s*\]/g;var l=/\[X\]/g,a=c.text;a=b.test(a)?a.replace(b,"[X]"):l.test(a)?a.replace(l,"[ ]"):"[ ] "+a.trimLeft();c.text=a;return!0}},{name:"selected lines: sort",exec:function(b){var c=b.selection,
l=c.start.row;c=c.end.row;var a=[];b.withLinesDo(l,c,function(f){var m=a.findIndex(function(q){return q>f});-1<m?a.splice(m,0,f):a.push(f)});b.undoManager.group();b.replace({start:{row:l,column:0},end:{row:c+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: reverse",exec:function(b){var c=b.selection,l=c.start.row;c=c.end.row;var a=[];b.withLinesDo(l,c,function(f){return a.push(f)});b.undoManager.group();b.replace({start:{row:l,column:0},end:{row:c+1,column:0}},
a.reverse().join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: remove duplicates (uniq)",exec:function(b){var c=b.selection,l=c.start.row;c=c.end.row;var a=[];b.withLinesDo(l,c,function(f){return nh.arr.pushIfNotIncluded(a,f)});b.undoManager.group();b.replace({start:{row:l,column:0},end:{row:c+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"change string inflection",handlesCount:!0,multiSelectAction:"single",exec:function(b,c,l){function a(A,C){var G,
F,N=f(A).trim();"uppercased"===N?G=/\s*[A-Z0-9]+/g:"dashed"===N?G=/-\w/g:"spaced"===N&&(G=/\s+.?/g);"uppercased"===C?F=function(L){return L.trim().replace(/^-/,"").toUpperCase()}:"dashed"===C?F=function(L){return"-"+L.trim().replace(/^-/,"").toLowerCase()}:"spaced"===C&&(F=function(L){return" "+L.trim().replace(/^-/,"").toLowerCase()});return A.replace(G,F)}function f(A){return A.match(/[A-Z]/)?"uppercased":A.match(/-/)?"dashed":A.match(/\s/)?"spaced":"unknown"}var m,q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==
A.nextAddress){b.selection.isEmpty()&&(b.selection=b.wordAt().range);m=b.selection.ranges;q=b.textInRange(m[0]);if(!q)return b.setStatusMessage("Please select some text"),A.return(!0);r=f(q);u=nh.arr.without(["uppercased","dashed","spaced"],r);return A.yield(b.world().listPrompt("Convert "+r+" into?",u,{}),2)}v=A.yieldResult;y=$jscomp.makeIterator(v.selected);z=y.next().value;if(!z)return A.return(!0);b.undoManager.group();m.forEach(function(C,G){G=b.textInRange(C);G=a(G,z);b.replace(C,G)});b.undoManager.group();
b.focus();return A.return(!0)})}},{name:"spell check word",exec:function(b,c){var l,a,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return l=b.wordAt(),l.string?v.yield(System.import("lively.ide/shell/spell-checker.js"),2):(b.setStatusMessage("no word for spellcheck!"),v.return(!0));case 2:return a=v.yieldResult,f=a.spellCheckWord,v.yield(f(l.string),3);case 3:return m=v.yieldResult,m.length?v.yield(b.world().filterableListPrompt("Choose replacement for "+
l.string,m),4):(b.setStatusMessage("no suggestions for word "+l.string),v.return(!0));case 4:q=v.yieldResult;r=$jscomp.makeIterator(q.selected);if(u=r.next().value)b.undoManager.group(),b.replace(l.range,u),b.undoManager.group();return v.return(!0)}})}},{name:"[shell] run shell command on region",multiSelectAction:"single",exec:function(b,c){var l,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return a=(l=b.textInRange(b.selection))&&0!==
l.length?{stdin:l}:{},y.yield(b.world().prompt("Enter shell command to run on region.",{historyId:"lively.ide.execShellCommand"}),2);case 2:return f=y.yieldResult,y.yield(System.import("lively.ide/shell/shell-interface.js"),3);case 3:m=y.yieldResult;q=m.runCommand;if(!f)return y.return(b.setStatusMessage("No command entered, aborting...!"));r=q(f,a);y.setCatchFinallyBlocks(4);return y.yield(r.whenDone(),6);case 6:u=r.output.trim();b.undoManager.group();b.selection.selections.forEach(function(z){return z.text=
u});b.undoManager.group();y.leaveTryBlock(5);break;case 4:v=y.enterCatchBlock(),b.showError(v);case 5:return y.return(!0)}})}},{name:"open file at cursor",exec:function(b,c){var l,a,f,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return b.getLine(),l=b.cursorPosition.row,a=b.document.scanBackward(b.cursorPosition,function(A,C){return(0>=C.column||A.match(/\s/))&&C})||{row:0,column:0},f=b.document.scanForward(b.cursorPosition,function(A,C){return(C.row!=
l||A.match(/\s/))&&C})||b.documentEndPosition,m=b.textInRange({start:a,end:f}).replace(/\s/g,""),q=m.split(":"),r=q[0].match(/^file|http/)?q.shift()+":"+q.shift():q.shift(),q[0].match(/^[0-9]+$/)&&(r+=":"+q.shift()),z.yield(System.import("lively.ide/text-editor.js"),2);u=z.yieldResult;v=u.default;y=v.openInWindow();y.location=r;return z.return(y)})}},{name:"run code on text morph",doc:"...",exec:function(b,c){var l,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return l=
{targetModule:"lively://code-on-text-morph",context:b},r.yield(b.world().editPrompt("Run code on selection. Use this.selection.text to access it",{requester:b,mode:"js",evalEnvironment:l,historyId:"run-code-on-text-morph-hist"}),2);case 2:return a=r.yieldResult,r.setCatchFinallyBlocks(3),b.undoManager.group(),r.yield(lively.vm.runEval(a,l),5);case 5:m=r.yieldResult;b.undoManager.group();f=m.isError?m.value:null;r.leaveTryBlock(4);break;case 3:f=q=r.enterCatchBlock();case 4:return f&&b.showError(f),
r.return(void 0)}})}},{name:"change editor mode",exec:function(b){var c,l,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return c=function(z){return!z.endsWith("ide/editor-plugin.js")&&z.endsWith("editor-plugin.js")},y.yield(lively.modules.getPackage("lively.ide").resources(c),2);case 2:return l=y.yieldResult,a=b.editorPlugin||{},f=a.shortName,m=0,q=["<no mode>"].concat(l.map(function(z,A){var C=z.url.match(/([^\/]+)\/editor-plugin.js/)[1];
C===f&&(m=A);return{isListItem:!0,string:C,value:z}})),y.yield(b.world().filterableListPrompt("choose mode",q,{requester:b,preselect:m,historyId:"lively.morphic/text-change-editor-mode-hist",fuzzy:!0}),3);case 3:r=y.yieldResult;u=$jscomp.makeIterator(r.selected);v=u.next().value;if(!v)return y.return();if("<no mode>"!==v){y.jumpTo(4);break}return y.yield(b.changeEditorMode(null),5);case 5:return b.resetTextAttributes(),y.return();case 4:if(v.isLoaded){y.jumpTo(6);break}return y.yield(lively.modules.module(v.url).load(),
6);case 6:return y.yield(b.changeEditorMode(v.url),0)}})}},{name:"report token at cursor",exec:function(b){var c,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){c=b.tokenAt(b.cursorPosition)||{};l=c.token;a=c.start;f=c.end;b.setStatusMessage(l?l+" "+a.column+" => "+f.column:"no token");return m.return(!0)})}}];nh.commands.push.apply(nh.commands,$jscomp.arrayFromIterable(nh.usefulEditorCommands));nh.iyGotoCharActivate=HK;nh.commands.push(nh.iyGotoCharActivate);nh.searchCommands=
FK;nh.commands.push.apply(nh.commands,$jscomp.arrayFromIterable(nh.searchCommands));var g5=nh.commands;nh.default=g5;var Pc=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js");Pc.Rectangle=Pd;Pc.Point=Bf;Pc.rect=Gk;Pc.Color=wf;Pc.pt=fh;Pc.string=Hg;Pc.num=wk;Pc.obj=lf;Pc.fun=Xk;Pc.promise=Kf;Pc.arr=Te;Pc.signal=hk;Pc.noUpdate=jj;Pc.connect=uk;Pc.disconnect=Sp;Pc.bowser=tq;Pc.morph=Gc;Pc.touchInputDevice=qp;Pc.config=nk;Pc.Morph=Hj;Pc.Selection=CK;Pc.MultiSelection=DK;Pc.Document=cma;
Pc.objectReplacementChar="\ufffd";Pc.Anchor=OB;Pc.Range=kx;Pc.eqPosition=ot;Pc.lessPosition=nt;Pc.KeyHandler=aQ;Pc.UndoManager=iE;Pc.TextSearcher=EK;Pc.TextLayout=ema;Pc.Renderer=fma;Pc.extractHTMLFromTextMorph=dI;Pc.commands=g5;Pc.textAndAttributesWithSubRanges=cI;Pc.serializeMorph=xC;Pc.deserializeMorph=yC;Pc.getSvgVertices=sr;Pc.renderSubTree=Di;Pc.ShadowObject=wq;Pc.getClassName=Li;var hs=ya("ac",function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js"),l=c.hasOwnProperty("Text")&&
"function"===typeof c.Text?c.Text:c.Text=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=a=void 0===a?{}:a,m=f.position,q=f.rightCenter,r=f.leftCenter,u=f.topCenter,v=f.bottom,y=f.top,z=f.right,A=f.left,C=f.bottomCenter,G=f.bottomLeft,F=f.bottomRight,N=f.topRight,L=f.topLeft;f=f.center;Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,a);this.undoManager.reset();this.fit();void 0!==m&&(this.position=m);void 0!==q&&(this.rightCenter=q);void 0!==r&&(this.leftCenter=r);void 0!==u&&(this.topCenter=u);void 0!==v&&(this.bottom=v);void 0!==y&&(this.top=y);void 0!==z&&(this.right=z);void 0!==A&&(this.left=A);void 0!==C&&(this.bottomCenter=C);void 0!==G&&(this.bottomLeft=G);void 0!==F&&(this.bottomRight=F);void 0!==N&&(this.topRight=N);void 0!==L&&(this.topLeft=L);void 0!==f&&(this.center=f)}},{key:"__deserialize__",value:function(a,
f,m,q){Nb._get(Object.getPrototypeOf(l.prototype),"__deserialize__",this).call(this,a,f,m,q);this.viewState=this.defaultViewState;this.markers=[];this.textRenderer=new Pc.Renderer(this.env.domEnv);this.textLayout=new Pc.TextLayout(this);this.changeDocument(Pc.Document.fromString(""));this.ensureUndoManager();a.cachedLineBounds&&(this._initializedByCachedBounds=a.cachedLineBounds);this._isDeserializing=!0}},{key:"__after_deserialize__",value:function(a,f,m){var q=this;Nb._get(Object.getPrototypeOf(l.prototype),
"__after_deserialize__",this).call(this,a,f,m);this._isDeserializing=!1;this.whenRendered().then(function(){q.embeddedMorphs.forEach(function(r){return r.top=0})})}},{key:"__only_serialize__",get:function(){return Pc.arr.withoutAll(Nb._get(Object.getPrototypeOf(l.prototype),"__only_serialize__",this),["document","textRenderer","viewState","undoManager","markers","textLayout","embeddedMorphMap",this.displacingMorphMap.size?"":"displacingMorphMap"])}},{key:"__additionally_serialize__",value:function(a,
f,m,q){Nb._get(Object.getPrototypeOf(l.prototype),"__additionally_serialize__",this).call(this,a,f,m,q);a.props.selections={key:"selections",verbatim:!0,value:(this.selection.isMultiSelection?this.selection.ranges:[this.selection.range]).map(function(C){return Pc.obj.select(C,["start","end"])})};a.props.anchors&&this.selection.isEmpty()&&(a.props.anchors.value=a.props.anchors.value.filter(function(C){return!C.id.includes("selection-")}));a.props.textAndAttributes={key:"textAndAttributes",value:this.textAndAttributes.map(function(C){if(!C)return C;
if(C.isMorph)return m.ref(C).asRefForSerializedObjMap();if(Pc.obj.isObject(C)){var G={};C=JSON.stringify(C,function(F,N){return N&&N.__serialize__?(N=N.__serialize__(),Object.assign(G,N.bindings),"->["+(N.__expr__+"]")):N});C=C.replace(/"->\[.*\]"/g,function(F){return F.slice(4,-2)});return m.expressionSerializer.exprStringEncode({__expr__:"("+C+")",bindings:G})}return C})};f=[];q=$jscomp.makeIterator(this.document.lines);for(var r=q.next();!r.done;r=q.next()){r=r.value;var u=this.textLayout.lineCharBoundsCache.get(r);
if(u){var v=[],y=void 0,z=0;if(u){u=$jscomp.makeIterator(u);for(var A=u.next();!A.done;A=u.next()){A=A.value;if(y){if(Pc.num.roundTo(y.width,.001)==Pc.num.roundTo(A.width||0,.001)&&A.height==y.height){z++;continue}v.push([z,Pc.num.roundTo(y.width||0,.001),y.height||0])}z=1;y=A}}y&&v.push([z,Pc.num.roundTo(y.width||0,.001),y.height||0]);f.push([r.row,Pc.arr.flatten(v)])}}a.cachedLineBounds=f}},{key:"spec",value:function(){var a=Nb._get(Object.getPrototypeOf(l.prototype),"spec",this).call(this);a.textString=
this.textString;return Pc.obj.dissoc(a,"anchors embeddedMorphMap plugins savedMarks textLayout textRenderer viewState undoManager metadata document displacingMorphMap".split(" "))}},{key:"isText",get:function(){return!0}},{key:"makeDirty",value:function(){this._positioningSubmorph||Nb._get(Object.getPrototypeOf(l.prototype),"makeDirty",this).call(this)}},{key:"onChange",value:function(a){var f=this,m=a.prop,q=a.selector,r=a.meta,u=this.lineWrapping,v=!1,y=!1,z=!1,A=!1,C=!1,G=!1;if(q)v="replace"===
q,A="addTextAttribute"===q,this._displacementChange=!this._displacing&&v;else switch(m){case "scroll":C=y=!0;break;case "extent":y=!0;m=a.prevValue.subPt(a.value);G=(z=this.fixedWidth&&!!this.lineWrapping&&!!m.x)&&(!this.fixedWidth||!this.fixedHeight);break;case "wordSpacing":case "letterSpacing":case "tabWidth":u&&(A=!0);break;case "fontFamily":case "fontSize":case "lineHeight":case "textAlign":case "fontWeight":case "fontStyle":case "textStyleClasses":case "fixedWidth":A=a.prevValue!=a.value;break;
case "lineWrapping":A=!0;break;case "borderWidth":case "fixedHeight":z=a.prevValue!=a.value;break;case "padding":z=!0}Nb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a);m=function(){f._textChange=!0;C&&(f.viewState.wasScrolled=!0);(A||G||z&&!r.styleSheetChange)&&f.invalidateTextLayout(A,A);(z||A)&&f.document&&f.world()&&f.document.lines.forEach(function(F){return F.hasEstimatedExtent=!0});f._displacementChange&&(f._displacementChange=!1);v&&Pc.signal(f,"textChange",a);y&&Pc.signal(f,
"viewChange",a);f._textChange=!1};r.animation?Pc.promise.delay(r.animation.duration).then(m):m()}},{key:"onSubmorphChange",value:function(a,f){var m=this,q,r,u,v,y,z,A,C,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress){if(a.meta&&a.meta.styleSheetChange)return F.return();Nb._get(Object.getPrototypeOf(l.prototype),"onSubmorphChange",m).call(m,a,f);return a.meta.animation?F.yield(a.meta.animation.asPromise(),2):F.jumpTo(2)}if(m._textChange||m._positioningSubmorph===
f)return F.return();q=a;r=q.prop;u="position"==r||"extent"==r||"scale"==r||"rotation"==r;m.displacingMorphMap.get(f)&&u&&[].concat($jscomp.arrayFromIterable(m.displacingMorphMap.keys())).filter(function(N){return N.top>=f.top}).forEach(function(N){m._intersectionShapeCache&&m._intersectionShapeCache.delete(N);m.updateTextDisplacementFor(N)});v=m.embeddedMorphMap.get(f)||{};if((y=v.anchor)&&u){if("position"==r)return m._positioningSubmorph=f,f.position=a.prevValue,m._positioningSubmorph=null,F.return();
z=f.bounds();A=f._lastBounds;C=y.position.row;G=m.document.getLine(C);A&&A.height==z.height&&A.bottom()==z.bottom()||(G.hasEstimatedExtent=!0,f._lastBounds=z)}F.jumpToEnd()})}},{key:"removeMorph",value:function(a,f){f=void 0===f?!0:f;var m=this.embeddedMorphMap,q=this.displacingMorphMap;q&&q.has(a)&&this.toggleTextWrappingAround(a,!1);if(m&&m.has(a)){if(q=m.get(a).anchor){var r=q.position;q=r.row;r=r.column;this.replace({start:{row:q,column:r},end:{row:q,column:r+1}},[],!0,f);this.replace}m.delete(a)}return Nb._get(Object.getPrototypeOf(l.prototype),
"removeMorph",this).call(this,a)}},{key:"toggleTextWrappingAround",value:function(a,f){var m=this;if(f)this.displacingMorphMap.has(a)||(this.embeddedMorphMap.has(a)&&this.addMorph(a.remove()),this.displacingMorphMap.set(a,[]),this.updateTextDisplacementFor(a));else if(f=this.displacingMorphMap.get(a))this._displacing=!0,f.forEach(function(q){return m.removeMorph(q)}),this._displacing=!1,this.displacingMorphMap.delete(a)}},{key:"updateTextDisplacementFor",value:function(a){var f=this;if(!this._displacing){this._displacing=
!0;var m=this.displacingMorphMap.get(a),q=this.computeDisplacementRectsFor(a).values(),r=[];m.forEach(function(A){return f.removeMorph(A,!1)});this.textLayout.resetLineCharBoundsCacheOfRange(this,a._displacementRange);q=$jscomp.makeIterator(q);for(var u=q.next();!u.done;u=q.next()){u=u.value;var v=m.shift()||Pc.morph({visible:!0,reactsToPointer:!1,isDisplacementMorph:!0}),y=this.textLayout.textPositionFromPoint(this,u.leftCenter());v.setBounds(u);this.insertText([v,{}],y);this.viewState._needsFit=
!1;if(z==v.top)v.remove();else{var z=v.top;r.push(v)}}m.forEach(function(A){return f.removeMorph(A,!1)});this.displacingMorphMap.set(a,r);this._displacing=!1}}},{key:"computeDisplacementRectsFor",value:function(a){var f=this.textLayout,m=f.textPositionFromPoint(this,a.topLeft),q=f.textPositionFromPoint(this,a.bottomLeft),r=[];a._displacementRange=Pc.Range.fromPositions(m,q);for(m=m.row;m<q.row+1;m++)r.push.apply(r,$jscomp.arrayFromIterable(f.rangesOfWrappedLine(this,m)));this._intersectionShapeCache||
(this._intersectionShapeCache=new Map);(q=this._intersectionShapeCache.get(a))||(q=a.isPath?Pc.Shapes.path(Pc.getSvgVertices(a.vertices)):"Ellipse"==Pc.getClassName(a)?Pc.Shapes.ellipse(a.center.x,a.center.y,a.width/2,a.height/2):Pc.Shapes.rectangle(a.left,a.top,a.width,a.height));this._intersectionShapeCache.set(a,q);a=this.width;m=new Map;r=$jscomp.makeIterator(r);for(var u=r.next();!u.done;u=r.next()){u=u.value;var v=f.computeMaxBoundsForLineSelection(this,u),y=v.height;v=v.y;var z=Pc.Shapes.rectangle(a,
y,0,v);z=Pc.Intersection.intersect(z,q);1>z.points.length||(z=Pc.Rectangle.unionPts(z.points.map(Pc.Point.fromLiteral)),z.y=v,z.height=y,z.x-=15,z.width+=30,m.set(u,z))}return m}},{key:"rejectsInput",value:function(){return this.readOnly}},{key:"addAnchor",value:function(a){if(a){"string"===typeof a&&(a={id:a,row:0,column:0});if(!a.isAnchor){var f=a,m=f.column,q=f.row;a=new Pc.Anchor(f.id,"number"===typeof q&&"number"===typeof m?{row:q,column:m}:void 0,f.insertBehavior||"move")}if(f=a.id&&this.anchors.find(function(r){return r.id===
a.id}))return Object.assign(f,a);this.anchors.push(a);return a}}},{key:"removeAnchor",value:function(a){for(var f=this.anchors,m,q=f.length;q--;){var r=f[q];if(r.id==a||r===a)m=r,f.splice(q,1)}return m}},{key:"addMarker",value:function(a){this.removeMarker(a.id);this.markers.push(a);this.makeDirty();return a}},{key:"removeMarker",value:function(a){var f="string"===typeof a?a:a.id;this.markers=this.markers.filter(function(m){return m.id!==f});this.makeDirty()}},{key:"saveMark",value:function(a,f){a=
void 0===a?this.cursorPosition:a;var m=this.activeMark;m&&m!==a&&!m.equalsPosition(a)&&(this.savedMarks=this.savedMarks.concat(m));f?this.activeMark=a:this.savedMarks=this.savedMarks.concat(a)}},{key:"saveActiveMarkAndDeactivate",value:function(){var a=this.activeMark;a&&(this.saveMark(a),this.activeMark=null)}},{key:"popSavedMark",value:function(){var a=this.activeMark;if(a)return this.activeMark=null,a;a=Pc.arr.last(this.savedMarks);this.savedMarks=this.savedMarks.slice(0,-1);return a}},{key:"lastSavedMark",
get:function(){return this.activeMark||Pc.arr.last(this.savedMarks)}},{key:"savedMarkForSelection",value:function(a){var f=this.selection,m=this.savedMarks,q=this.multiSelect?this.multiSelect.getAllRanges().length:1;q=m.length-(q-(f.index||0));f=m[q]||f.anchor;a&&"row"in a&&"column"in a&&(this.savedMarks=m.slice(0,q).concat(a).concat(m.slice(q+1)));return f}},{key:"addPlugin",value:function(a){this.plugins.includes(a)||(this.plugins.push(a),this._cachedKeyhandlers=null,"function"===typeof a.attach&&
a.attach(this));return a}},{key:"removePlugin",value:function(a){if(!this.plugins.includes(a))return!1;this._cachedKeyhandlers=null;Pc.arr.remove(this.plugins,a);"function"===typeof a.detach&&a.detach(this);return!0}},{key:"pluginCollect",value:function(a,f){f=void 0===f?[]:f;this.plugins.forEach(function(m){return"function"===typeof m[a]&&(f=m[a](f))});return f}},{key:"pluginInvokeFirst",value:function(a,f){for(var m=[],q=1;q<arguments.length;++q)m[q-1]=arguments[q];return(q=this.pluginFind(function(r){return"function"===
typeof r[a]}))?q[a].apply(q,$jscomp.arrayFromIterable(m)):void 0}},{key:"pluginFind",value:function(a){return this.plugins.slice().reverse().find(a)}},{key:"editorPlugin",get:function(){return this.pluginFind(function(a){return a.isEditorPlugin})}},{key:"lookupEditorPluginNamed",value:function(a){var f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return a=Pc.config.ide.modes.aliases[a]||a,m=(f=/^[^:\\]+:\/\//.test(a))?a:"lively.ide/"+a+"/editor-plugin.js",
u.yield(lively.modules.doesModuleExist(m),2);if(3!=u.nextAddress)return u.yieldResult?u.yield(lively.modules.module(m).load(),3):u.return(null);q=u.yieldResult;r=q.default;return u.return(r)})}},{key:"changeEditorMode",value:function(a){var f=this,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return m=f.plugins.filter(function(u){return!u.isEditorPlugin}),a?"string"!==typeof a?r.jumpTo(2):r.yield(f.lookupEditorPluginNamed(a),3):(f.plugins=m,r.return(null));
if(2!=r.nextAddress){q=r.yieldResult;if(!q)throw Error("Cannot find editor mode "+a);a=new q(Pc.config.codeEditor.defaultTheme);f.evalEnvironment&&(a.evalEnvironment=f.evalEnvironment)}f.plugins=m.concat(a);return r.return(a)})}},{key:"invalidateTextLayout",value:function(a,f){f=void 0===f?!1:f;if(!this._isDeserializing){var m=this.viewState;m&&(this.fixedWidth&&this.fixedHeight||(m._needsFit=!0),m=this.textLayout)&&((void 0===a?0:a)&&m.resetLineCharBoundsCache(this),m.estimateLineHeights(this,f))}}},
{key:"textBounds",value:function(){return this.textLayout.textBounds(this)}},{key:"defaultCharExtent",value:function(){return this.textLayout.defaultCharExtent(this)}},{key:"scrollExtent",get:function(){return this.textBounds().extent().addPt(this.padding.topLeft()).addPt(this.padding.bottomRight()).addPt(this.scrollbarOffset).maxPt(Nb._get(Object.getPrototypeOf(l.prototype),"scrollExtent",this))}},{key:"commands",get:function(){return this.pluginCollect("getCommands",(this._commands||[]).concat(Pc.commands))}},
{key:"execCommand",value:function(a,f,m,q){function r(L){(v.hasOwnProperty("scrollCursorIntoView")?v.scrollCursorIntoView:1)&&Pc.fun.debounceNamed("execCommand-scrollCursorIntoView-"+L.id,100,function(){return L.scrollCursorIntoView()})()}var u=this,v=(this.lookupCommand(a)||{}).command;if(v){var y=this.inMultiSelectMode(),z=v.hasOwnProperty("multiSelectAction")?v.multiSelectAction:"forEach";if(y&&"forEach"===z){var A=this.selection;y=this.selection.selections.slice().reverse();this.selection=y[0];
this._multiSelection=A;try{var C=this.execCommand(a,f,m,q)}catch(L){throw this.selection=A,this._multiSelection=null,this.selection.mergeSelections(),L;}if(!C)return C;var G=[C];if("function"===typeof C.then&&"function"===typeof C.catch)return Pc.promise.finally(Pc.promise.chain([function(){return C}].concat(y.slice(1).map(function(L){return function(){u.selection=L;return Promise.resolve(u.execCommand(a,f,m,q)).then(function(W){return G.push(W)})}}))).then(function(){return G}),function(){u.selection=
A;u._multiSelection=null;u.selection.mergeSelections()});try{for(var F=$jscomp.makeIterator(y.slice(1)),N=F.next();!N.done;N=F.next())this.selection=N.value,G.push(this.execCommand(a,f,m,q))}finally{this.selection=A,this._multiSelection=null,this.selection.mergeSelections()}return G}(C=this.commandHandler.exec(a,this,f,m,q))&&("function"===typeof C.then&&"function"===typeof C.catch?C.then(function(){return r(u)}):r(this));return C}}},{key:"changeDocument",value:function(a,f){f=void 0===f?!1:f;if(this.document)var m=
this.defaultTextStyle;else f=!1;this.document=a;this.textLayout.reset();f&&(this.defaultTextStyle=m);this.makeDirty();this.consistencyCheck()}},{key:"textInRange",value:function(a){return this.document.textInRange(a)}},{key:"charRight",value:function(a){a=void 0===a?this.cursorPosition:a;var f=a.column;return this.getLine(a.row).slice(f,f+1)}},{key:"charLeft",value:function(a){a=void 0===a?this.cursorPosition:a;var f=a.column;return this.getLine(a.row).slice(f-1,f)}},{key:"indexToPosition",value:function(a){return this.document.indexToPosition(a)}},
{key:"positionToIndex",value:function(a){return this.document.positionToIndex(a)}},{key:"getVisibleLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.wrappedLines(this)[a].text}},{key:"isLineVisible",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.isLineVisible(this,a)}},{key:"isLineFullyVisible",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.isLineFullyVisible(this,a)}},{key:"getLine",value:function(a){a=
void 0===a?this.cursorPosition.row:a;return this.document.getLineString(a)}},{key:"lineCount",value:function(){return this.document.rowCount}},{key:"isLineEmpty",value:function(a){return!this.getLine(a).trim()}},{key:"isAtLineEnd",value:function(a){a=void 0===a?this.cursorPosition:a;var f=this.getLine(a.row);return a.column===f.length}},{key:"wordsOfLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.document.wordsOfLine(a)}},{key:"wordAt",value:function(a){a=void 0===a?this.cursorPosition:
a;return this.document.wordAt(a)}},{key:"wordLeft",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordLeft(a)}},{key:"wordRight",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordRight(a)}},{key:"lineRange",value:function(a,f){a=void 0===a?this.cursorPosition.row:a;f=void 0===f?!0:f;"number"!==typeof a&&this.cursorPosition.row;var m=this.getLine(a);a={start:{column:0,row:a},end:{column:m.length,row:a}};m=m.match(/^\s*/);m[0].length&&f&&(a.start.column+=
m[0].length);return new Pc.Range(a)}},{key:"screenLineRange",value:function(a,f){a=void 0===a?this.cursorPosition:a;return this.textLayout.screenLineRange(this,a,void 0===f?!0:f)}},{key:"insertTextAndSelect",value:function(a,f){f=void 0===f?null:f;a=String(a);f?this.selection.range=this.insertText(a,f):this.selection.text=a}},{key:"append",value:function(a){var f=this;return this.saveExcursion(function(){return f.insertText(a,f.documentEndPosition)})}},{key:"insertText",value:function(a,f,m,q){f=
void 0===f?this.cursorPosition:f;return this.replace({start:f,end:f},a,void 0===m?!0:m,void 0===q?!0:q)}},{key:"deleteText",value:function(a,f){f=void 0===f?!0:f;var m=this.textAndAttributesInRange(a);this.replace(a,[],!1,f);return m}},{key:"replace",value:function(a,f,m,q,r,u){var v=this;m=void 0===m?!0:m;q=void 0===q?!0:q;r=void 0===r?!0:r;u=void 0===u?!0:u;a=a.isRange?a:new Pc.Range(a);var y="string"===typeof f?[f,null]:Array.isArray(f)?f:[String(f||""),null];f=!y.length||2==y.length&&!y[0];var z=
a.isEmpty();if(f&&z)return a;var A;m&&(A=this.textAttributeAt({row:a.start.row,column:a.start.column-(0<a.start.column?1:0)}));var C=[];for(m=0;m<y.length;m+=2)f=y[m],z=y[m+1],f.isMorph&&C.push(f),A&&(y[m+1]=Object.assign({},A,{},z));r&&this.undoManager.undoStart(this,"replace");var G=this.textAndAttributesInRange(a),F=this.document.replace(a,y,this.debug&&this.debugHelper(this.debug)).inserted;this.addMethodCallChangeDoing({target:this,selector:"replace",args:[a,y],undo:{target:this,selector:"replace",
args:[F,G,!1]}},function(){q&&(v.invalidateTextLayout(!1,!1),v.textLayout.resetLineCharBoundsCacheOfRange(v,F));if(!Pc.eqPosition(a.end,F.end)){if(Pc.lessPosition(F.end,a.end)){var N=$jscomp.makeIterator((new Pc.Range(a)).subtract(F)).next().value;v.anchors.forEach(function(W){return W.onDelete(N)})}else{var L=$jscomp.makeIterator((new Pc.Range(F)).subtract(a)).next().value;v.anchors.forEach(function(W){return W.onInsert(L)})}v._multiSelection?v._multiSelection.updateFromAnchors():v.selection.updateFromAnchors()}v._updateEmbeddedMorphsDuringReplace(C,
F,y,G);v._isDeserializing&&v._initializedByCachedBounds||v.textLayout.estimateLineHeights(v,!1);u&&v.consistencyCheck()});r&&this.undoManager.undoStop();return F}},{key:"_updateEmbeddedMorphsDuringReplace",value:function(a,f,m,q){for(var r=this.embeddedMorphMap,u=0;u<q.length;u+=2){var v=q[u];if(v.isMorph&&!a.includes(v)){if(r){var y=r.get(v);y&&y.anchor&&(this.removeAnchor(y.anchor),Pc.disconnect(y.anchor,"position",v,"position"));r.set(v,Object.assign({},y,{anchor:null}))}v.remove()}}if(a.length)for(m=
Pc.textAndAttributesWithSubRanges(f.start,m),f=m.ranges,m=m.textAndAttributes,q=0;q<f.length;q++)u=m[2*q],u.isMorph&&(console.assert(a.includes(u),"????"),v=f[q].start,u.owner!==this&&this.addMorph(u),r&&(r.has(u)?r.get(u).anchor.position=v:(v=this.addAnchor(Object.assign({id:"embedded-"+u.id},v)),Pc.connect(v,"position",u,"position",{updater:function(z,A){var C=this.targetObj.owner,G=this.targetObj;A=C&&C.isText?C.charBoundsFromTextPosition(A).topLeft().subPt(C.origin):G.position;C&&(C._positioningSubmorph=
G);z(A);C&&(C._positioningSubmorph=!1)}}).update(v.position),r.set(u,{anchor:v}))))}},{key:"applyJsDiffPatch",value:function(a){function f(z,A,C,G){var F=q.indexToPosition(z+C),N=q.indexToPosition(A+C);G.push(q.deleteText({start:F,end:N}));return C-(A-z)}function m(z,A,C,G){G.push(q.insertText(A,q.indexToPosition(z+C)));return C}var q=this,r=[],u=0,v=0;a=$jscomp.makeIterator(a);for(var y=a.next();!y.done;y=a.next())y=y.value,y.removed?v=f(u,u+y.count,v,r):y.added&&(v=m(u,y.value,v,r)),u+=y.count;
return r}},{key:"applyTextChanges",value:function(a,f,m,q){f=void 0===f?0:f;m=void 0===m?!0:m;var r=[];a=$jscomp.makeIterator(a);for(var u=a.next();!u.done;u=a.next()){var v=$jscomp.makeIterator(u.value);u=v.next().value;var y=v.next().value;v=v.next().value;f&&(y="number"===typeof y?y:this.positionToIndex(y),v&&"string"!==typeof v&&!Array.isArray(v)&&(v=("number"===typeof v?v:this.positionToIndex(v))+f),y+=f);y="number"===typeof y?this.indexToPosition(y):y;switch(u){case "delete":case "remove":u=
"number"===typeof v?this.indexToPosition(v):v;r.push(this.deleteText({start:y,end:u},q));break;case "insert":r.push(this.insertText(v,y,m,q));break;default:console.warn("[applyTextChanges] unknown type: "+u)}}return r}},{key:"modifyLines",value:function(a,f,m){var q=this;m=Pc.arr.range(a,f).map(function(r){return q.getLine(r)}).map(m).join("\n")+"\n";this.deleteText({start:{row:a,column:0},end:{row:f+1,column:0}},!1);this.insertText(m,{row:a,column:0})}},{key:"modifySelectedLines",value:function(a){var f=
this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range;return this.modifyLines(f.start.row,f.end.row,a)}},{key:"withLinesDo",value:function(a,f,m){var q=this;return Pc.arr.range(a,f).map(function(r){var u=q.getLine(r);r=Pc.Range.create(r,0,r,u.length);return m(u,r)})}},{key:"withSelectedLinesDo",value:function(a){var f=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range,m=f.start.row;f=f.end;var q=f.row;return this.withLinesDo(m,0===f.column&&q>m?q-1:q,a)}},{key:"joinLine",
value:function(a){a=void 0===a?this.cursorPosition.row:a;var f=this.getLine(a),m=this.getLine(a+1);m=f+m.replace(/^\s+/,"")+this.document.constructor.newline;this.replace({start:{column:0,row:a},end:{column:0,row:a+2}},m,!0);return{row:a,column:f.length}}},{key:"whatsVisible",get:function(){return this.textLayout.whatsVisible(this)}},{key:"flash",value:function(a,f){var m=this;a=void 0===a?this.selection.range:a;f=Object.assign({time:1E3,fill:Pc.Color.orange},f);var q=f.id||"flash"+Pc.string.newUUID();
this.addMarker({id:q,range:a,style:{"background-color":f.fill.toCSSString(),"pointer-events":"none"}});Pc.fun.debounceNamed("flash-"+q,f.time,function(){return m.removeMarker(q)})()}},{key:"addTextAttribute",value:function(a,f){var m=this;f=void 0===f?this.selection:f;var q={start:f.start,end:f.end};this.undoManager.undoStart(this,"addTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"addTextAttribute",args:[a,q],undo:{target:this,selector:"removeTextAttribute",args:[a,q]}},function(){m.document.mixinTextAttribute(a,
q);m.onAttributesChanged(q);m.consistencyCheck()});this.undoManager.undoStop();return a}},{key:"removeTextAttribute",value:function(a,f){var m=this;f=void 0===f?this.selection:f;var q={start:f.start,end:f.end};this.undoManager.undoStart(this,"removeTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"removeTextAttribute",args:[a,q],undo:{target:this,selector:"addTextAttribute",args:[a,q]}},function(){m.document.mixoutTextAttribute(a,q);m.onAttributesChanged(q);m.consistencyCheck()});
this.undoManager.undoStop()}},{key:"setTextAttributesWithSortedRanges",value:function(a){this.document.setTextAttributesWithSortedRanges(a);this.consistencyCheck();for(var f=0;f<a.length;)this.onAttributesChanged(a[f]),f+=2}},{key:"textAttributeAt",value:function(a){return this.document.textAttributeAt(a)}},{key:"textAttributeAtPoint",value:function(a){return this.textAttributeAt(this.textLayout.textPositionFromPoint(this,a))}},{key:"textAndAttributesInRange",value:function(a){a=void 0===a?this.selection.range:
a;return this.document.textAndAttributesInRange(a)}},{key:"resetTextAttributes",value:function(){this.document.resetTextAttributes();this.onAttributesChanged(this.documentRange);this.consistencyCheck()}},{key:"onAttributesChanged",value:function(a){this.invalidateTextLayout(!1,!1);var f=this.textLayout;f&&f.resetLineCharBoundsCacheOfRange(this,a);this.makeDirty()}},{key:"styleAt",value:function(a){return(a=this.textLayout.chunkAtPos(this,a))?a.style:Object.assign({},this.defaultTextStyle)}},{key:"getStyleInRange",
value:function(a){a=void 0===a?this.selection:a;return this.textAndAttributesInRange(a).filter(function(f,m){return 0!=m%2}).reduce(function(f,m){for(var q in m){var r=m[q];if(!f.hasOwnProperty(q)||void 0!==r&&null!==r)f[q]=r}return f},{})}},{key:"setStyleInRange",value:function(a,f){var m=this;f=void 0===f?this.selection:f;for(var q=this.textAndAttributesInRange(f),r={start:Object.assign({},f.start),end:Object.assign({},f.start)},u=[],v=0;v<q.length;v+=2){var y=q[v],z=q[v+1],A=-1;"string"!==typeof y&&
(y=Pc.objectReplacementChar);for(;-1<(A=y.indexOf("\n"));)0<A&&(r.end.column+=A,u.push(r,z)),r={row:r.end.row+1,column:0},r={start:r,end:Object.assign({},r)},y=y.slice(A+1);r.end.column+=y.length;u.push(r,z);r={start:Object.assign({},r.end),end:Object.assign({},r.end)}}this.undoManager.undoStart(this,"setStyleInRange");this.addMethodCallChangeDoing({target:this,selector:"setStyleInRange",args:[a,f],undo:{target:this,selector:"setTextAttributesWithSortedRanges",args:[u]}},function(){m.document.setTextAttribute(a,
f);m.consistencyCheck();m.onAttributesChanged(f)});this.undoManager.undoStop()}},{key:"resetStyleInRange",value:function(a){a=void 0===a?this.selection:a;for(var f=this.document.textAndAttributesInRange(a),m={},q=0;q<f.length;q+=2)Object.assign(m,f[q+1]);this.removeTextAttribute(m,a)}},{key:"changeStyleProperty",value:function(a,f,m){var q=this;m=void 0===m?this.selection:m;m=this.getStyleInRange(m)[a];var r=f(m);this.selections.forEach(function(u){var v={};return q.addTextAttribute((v[a]=r,v),u)})}},
{key:"inMultiSelectMode",value:function(){return this.selection.selections&&1<this.selection.selections.length}},{key:"selectionBounds",value:function(){var a=this;return this.selections.map(function(f){var m=a.charBoundsFromTextPosition(f.start),q=a.charBoundsFromTextPosition(f.end);return f.start.row===f.end.row?m.union(q):Pc.rect(Pc.pt(a.padding.left(),m.top()),Pc.pt(a.width-a.padding.left(),q.bottom()))}).reduce(function(f,m){return m.union(f)})}},{key:"documentEndPosition",get:function(){return this.document?
this.document.endPosition:{row:0,column:0}}},{key:"isAtDocumentEnd",value:function(){return Pc.eqPosition(this.cursorPosition,this.documentEndPosition)}},{key:"documentRange",get:function(){return{start:{row:0,column:0},end:this.documentEndPosition}}},{key:"cursorUp",value:function(a){return this.selection.goUp(void 0===a?1:a)}},{key:"cursorDown",value:function(a){return this.selection.goDown(void 0===a?1:a)}},{key:"cursorLeft",value:function(a){return this.selection.goLeft(void 0===a?1:a)}},{key:"cursorRight",
value:function(a){return this.selection.goRight(void 0===a?1:a)}},{key:"getPositionAboveOrBelow",value:function(a,f,m,q,r){function u(A,C){A=A.slice();A.push({x:Pc.arr.last(A).x+Pc.arr.last(A).width});for(var G=0,F=Infinity,N=0;N<A.length;N++){var L=Math.abs(A[N].x-C);L<F&&(F=L,G=N)}return G}a=void 0===a?1:a;f=void 0===f?this.cursorPosition:f;m=void 0===m?!1:m;if(0===a)return f;"number"===typeof r&&(r-=this.padding.left());var v=f.row,y=f.column;if(m&&this.lineWrapping){v=this.textLayout.rangesOfWrappedLine(this,
f.row);if(!v.length)return f;y=v.length-1-v.slice().reverse().findIndex(function(A){return A.start.column<=f.column});if(1<=a){var z=0===y?0>=f.row?null:Pc.arr.last(this.textLayout.rangesOfWrappedLine(this,f.row-1)):v[y-1];if(!z)return f}else if(-1>=a&&(z=(v.length-1===y?f.row>=this.lineCount()-1?[]:this.textLayout.rangesOfWrappedLine(this,f.row+1):v.slice(y+1))[0],!z))return f;v=z.start.row;y=this.textLayout.charBoundsOfRow(this,v).slice(z.start.column,z.end.column+1);y=z.start.column+u(y,r)}else v=
Math.min(Math.max(0,f.row-a),this.lineCount()-1),"number"===typeof r&&(z=this.textLayout.charBoundsOfRow(this,v),y=u(z,r));z={row:v,column:y};return 1<Math.abs(a)?this.getPositionAboveOrBelow(a+(1<a?-1:1),z,m,q,r):z}},{key:"collapseSelection",value:function(){this.selection.collapse(this.selection.lead);return this.selection}},{key:"selectAll",value:function(){this.selection.selectAll();return this.selection}},{key:"selectLine",value:function(a,f){a=void 0===a?this.cursorPosition.row:a;this.selection.selectLine(a,
void 0===f?!1:f);return this.selection}},{key:"selectionOrLineString",value:function(){var a=this.selection,f=a.start;return a.text||this.getLine(f.row)}},{key:"scrollCursorIntoView",value:function(){this.scrollPositionIntoView(this.cursorPosition)}},{key:"centerRange",value:function(a,f,m){a=void 0===a?this.selection.range:a;f=void 0===f?Pc.pt(0,0):f;m=void 0===m?!0:m;var q=this.charBoundsFromTextPosition(a.start).top();a=this.charBoundsFromTextPosition(a.end).bottom()-q;this.scroll=a<this.height||
!1===m?this.scroll.withY(q+a/2-this.height/2).addPt(f):this.scroll.withY(q).addPt(f)}},{key:"centerRow",value:function(a,f){a=void 0===a?this.cursorPosition.row:a;f=void 0===f?Pc.pt(0,0):f;return this.alignRowAtTop(a,f.addXY(0,-this.height/2))}},{key:"alignRowAtTop",value:function(a,f){a=void 0===a?this.cursorPosition.row:a;f=void 0===f?Pc.pt(0,0):f;this.scroll=this.charBoundsFromTextPosition({row:a,column:0}).topLeft().addXY(-this.padding.left(),0).addPt(f)}},{key:"alignRowAtBottom",value:function(a,
f){a=void 0===a?this.cursorPosition.row:a;f=void 0===f?Pc.pt(0,0):f;var m=this.charBoundsFromTextPosition({row:a,column:0}).height;this.alignRowAtTop(a,f.addXY(0,-this.textPageHeight()+m))}},{key:"scrollPositionIntoView",value:function(a,f){f=void 0===f?Pc.pt(0,0):f;if(this.isClip()){var m=this.scroll;m=this.innerBounds().translatedBy(m).insetByRect(this.padding).insetBy(this.borderWidth);a=this.charBoundsFromTextPosition(a);this.lineWrapping||(a=a.insetByPt(Pc.pt(-20,0)));var q=20<m.bottom()-a.bottom()?
"bottomLeft":"topLeft";m=a[q]().subPt(m.translateForInclusion(a)[q]()).addPt(f);if(0!=m.x||0!=m.y)this.scroll=this.scroll.addPt(m).addPt(f),this.isFocused()&&this.ensureKeyInputHelperAtCursor()}}},{key:"keepPosAtSameScrollOffsetWhile",value:function(a,f){var m=this;f=void 0===f?this.cursorPosition:f;var q=this.scroll;f=this.selection.lead;var r=this.charBoundsFromTextPosition(f).y-q.y;q=!1;var u=function(){return m.scroll=m.scroll.withY(m.charBoundsFromTextPosition(f).y-r)};try{var v=a();q=v&&v instanceof
Promise}finally{!q&&u()}q&&Pc.promise.finally(v,u);return v}},{key:"saveExcursion",value:function(a,f){var m=this;f=Object.assign({useAnchors:!1},f);var q=this.selection.isMultiSelection?this.selection.selections.map(function(y){return y.directedRange}):[this.selection],r=f.useAnchors?q.map(function(y){var z=y.end;return[m.addAnchor(Object.assign({},y.start,{id:"save-excursion-"+Pc.string.newUUID()})),m.addAnchor(Object.assign({},z,{id:"save-excursion-"+Pc.string.newUUID()}))]}):null,u=!1;f=f.useAnchors?
function(){var y=r.map(function(z){var A=$jscomp.makeIterator(z);z=A.next().value.position;A=A.next().value.position;return{start:z,end:A}});m.selections=y;r.forEach(function(z){var A=$jscomp.makeIterator(z);z=A.next().value;A=A.next().value;m.removeAnchor(z);m.removeAnchor(A)})}:function(){return m.selections=q};try{var v=this.keepPosAtSameScrollOffsetWhile(a);u=v&&v instanceof Promise}finally{!u&&f()}u&&Pc.promise.finally(v,f);return v}},{key:"alignRow",value:function(a,f){f=void 0===f?"center":
f;if(this.isClip()){var m=this.scroll,q=this.padding;m=this.innerBounds().insetByRect(q).translatedBy(m);a=this.charBoundsFromTextPosition({row:a,column:0});if(f="top"===f||"bottom"===f?m[f]()-a[f]():"center"===f?m[f]().y-a[f]().y:0)this.scroll=this.scroll.addXY(0,-f)}}},{key:"fit",value:function(){var a=this,f=this.viewState,m=this.fixedWidth,q=this.fixedHeight;f._needsFit=!1;if(q&&m||!this.textLayout||this.master&&!this.master._appliedMaster)return this;var r=this.textBounds().outsetByRect(this.padding),
u=function(){q||a.height==r.height||(a.height=r.height);m||a.width==r.width||(a.width=r.width);a.embeddedMorphs.forEach(function(v){v=a.embeddedMorphMap.get(v).anchor;v.position=v.position})};f._needsFit=!1;this.document.lines.find(function(v){return v.hasEstimatedExtent})?this.whenRendered().then(u):u();return this}},{key:"fitIfNeeded",value:function(){this.viewState._needsFit&&this.fit()}},{key:"defaultLineHeight",get:function(){var a=this.padding;return a.top()+a.bottom()+this.fontMetric.defaultLineHeight({fontSize:this.fontSize,
fontFamily:this.fontFamily})}},{key:"columnInWrappedLine",value:function(a){if(!this.lineWrapping)return a.column;var f=this.screenLineRange(a,!0).start.column;return a.column-f}},{key:"textPositionFromPoint",value:function(a){return this.textLayout.textPositionFromPoint(this,a)}},{key:"charBoundsFromTextPosition",value:function(a){return this.textLayout.boundsFor(this,a)}},{key:"forceRerender",value:function(){this.textLayout.reset();this.makeDirty()}},{key:"aboutToRender",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),
"aboutToRender",this).call(this,a)}},{key:"applyLayoutIfNeeded",value:function(){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);this.fitIfNeeded();Nb._get(Object.getPrototypeOf(l.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){return this.textRenderer.renderMorph(this,a)}},{key:"directRender",value:function(){var a=this.env.renderer,f=this.textRenderer;a&&f&&!a._stopped&&(Pc.renderSubTree(this,a),f.manuallyTriggerTextRenderHook(this,
a))}},{key:"onMouseDown",value:function(a){if(!a.rightMouseButtonPressed()){this.activeMark&&(this.activeMark=null);var f=a.state;if(f.clickedOnMorph===this){f=(f.clickCount-1)%3+1;var m=this.localize(a.position),q=this.textPositionFromPoint(m);a.leftMouseButtonPressed()&&!a.isShiftDown()&&!a.isAltDown()&&this.callTextAttributeDoitFromMouseEvent(a,m);this.selectable&&(a.isShiftDown()?this.selection.lead=q:a.isAltDown()?this.selection.addRange(Pc.Range.at(q)):(this.selection.disableMultiSelect(),1===
f?a.isShiftDown()?this.selection.lead=q:this.selection={start:q,end:q}:2===f?this.execCommand("select word",null,1,a):3===f&&this.execCommand("select line",null,1,a)),this.isFocused()&&this.ensureKeyInputHelperAtCursor())}}}},{key:"evalEnvForDoit",value:function(a){var f="lively://text-doit/"+this.id;lively.modules.module(f);return{context:a.context||this,format:"esm",targetModule:f}}},{key:"callTextAttributeDoitFromMouseEvent",value:function(a,f){var m=this;f=(f=this.textAttributeAtPoint(f)||[],
f.doit);if(!f||!f.code)return!1;var q=this.evalEnvForDoit(f),r=lively.modules.module(q.targetModule);r.recorder.evt=a;lively.vm.runEval(f.code,q).catch(function(u){return m.world().logError(Error("Error in text doit: "+u.stack))}).then(function(){return r.recorder.evt=null});return!0}},{key:"onMouseMove",value:function(a){a.leftMouseButtonPressed()&&this.selectable&&a.state.clickedOnMorph===this&&(this.selection.lead=this.textPositionFromPoint(this.localize(a.position)))}},{key:"selectMatchingBrackets",
value:function(a,f){function m(z){return"\t"===z||" "===z}function q(z,A,C,G,F){for(var N=1;(0>F?0<=G-1:G+1<z.length)&&(G+=F,z[G]==A&&A!=C&&N++,z[G]==C&&N--,0!=N););return G}function r(z,A,C,G){for(var F=A;0>C?0<=F-1:F+1<z.length;)if(F+=C,z[F]==G)return 0<C?[A,F]:[F+1,A];return 0<C?[A+1,z.length-1]:[0,A]}if(!a)return f;if(0==f||f==a.length)return[0,a.length-1];var u=f-1;if(0<f){if("\n"==a[f-1]||"\r"==a[f-1])return r(a,f,1,a[f-1]);var v="*({[<'\"`".indexOf(a[f-1]);"*"==a[f-1]&&(0>f-2||"/"!=a[f-2])&&
(v=-1);if(0<=v)return u=q(a,"*({[<'\"`"[v],"*)}]>'\"`"[v],f-1,1),[f,u-1]}if(f<a.length){if("\n"==a[f]||"\r"==a[f])return r(a,f,-1,a[f]);v="*)}]>'\"`".indexOf(a[f]);"*"==a[f]&&(f+1>=a.length||"/"!=a[f+1])&&(v=-1);if(0<=v)return f=q(a,"*)}]>'\"`"[v],"*({[<'\"`"[v],f,-1),[f+1,u]}if("/"===a[f-1]&&"/"===a[f-2]){for(;u+1<a.length&&"\n"!==a[u+1]&&"\r"!==a[u+1];)u++;return[f,u]}v=f;for(var y=u;0<=v-1&&m(a[v-1]);)v--;for(;y<a.length&&m(a[y+1]);)y++;if(1<=y-v)return[v,y];for(v=f<a.length?a[f]:"";0<=f-1&&((a[f-
1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!=a[f-1]?0:0<="0123456789".indexOf(v)));)v=a[f-1],f--;for(;u+1<a.length&&((a[u+1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!=a[u+1]?0:0<="0123456789".indexOf(v)));)v=a[u+1],u++;return[f,u]}},{key:"onContextMenu",value:function(a){var f=this;if(a.targetMorph===this){a.stop();var m=this.textPositionFromPoint(this.localize(a.position)),q=this.selection.selections||[this.selection];if(this.selection.isEmpty()||q.every(function(r){return!r.range.containsPosition(m)}))this.cursorPosition=
m;Promise.resolve(this.menuItemsForContextMenu()).then(function(r){return f.openMenu(r,a)}).catch(function(r){return $world.logError(r)})}}},{key:"onDrop",value:function(a){var f=a.hand.grabbedMorphs.filter(function(q){return q.isLayoutable});Nb._get(Object.getPrototypeOf(l.prototype),"onDrop",this).call(this,a);if(f[0]){var m=this.textPositionFromPoint(this.localize(a.hand.globalPosition));this.insertText([f[0],null],m);f[0].opacity=a.state.originalOpacity||1}}},{key:"buildDropHoverGrid",value:function(a){var f=
this;if(a.simpleDrop)return null;var m=this.whatsVisible,q=m.startRow;m=Math.min(this.documentEndPosition.row,m.endRow);var r=this.document,u=this.padding.left(),v=this.padding.top();q=Pc.arr.range(q,m).reduce(function(y,z){var A=f.textLayout.charBoundsOfRow(f,z).slice();1<=A.length&&0==Pc.arr.last(A).width&&(Pc.arr.last(A).width=12);if(1<A.length){var C=Pc.arr.last(A);A.push({x:C.x+C.width,y:C.y,height:C.height,width:C.width||12})}A=A.map(function(G,F){G=Pc.Rectangle.fromLiteral(G).translatedBy(Pc.pt(u,
v+r.computeVerticalOffsetOf(z)));var N=f.getGlobalTransform().transformRectToRect(G);return{textPos:{row:z,column:F},bounds:G,globalBounds:N,morph:a.showDropGrid?Pc.morph({reactsToPointer:!1,acceptsDrops:!1,bounds:G,border:{width:1,color:Pc.Color.green},fill:null}):null}});return y.concat(A)},[]);q.forEach(function(y){return y.morph&&f.addMorph(y.morph)});return q}},{key:"onDropHoverIn",value:function(a){var f={simpleDrop:window.hasOwnProperty("simpleDrop")?window.simpleDrop:!0,showDropGrid:window.hasOwnProperty("showDropGrid")?
window.showDropGrid:!1,useTextFlowPlaceholder:window.hasOwnProperty("useTextFlowPlaceholder")?window.useTextFlowPlaceholder:!1},m=a.hand.grabbedMorphs[0];m&&(a.state.originalOpacity=m.opacity,m.opacity=.3);m=this.buildDropHoverGrid(f);a=a.state.dropHover||(a.state.dropHover=new WeakMap);var q=a.get(this);q||(q={},a.set(this,q));q.config=f;q.dropGrid=m}},{key:"onDropHoverUpdate",value:function(a){var f=a.hand.grabbedMorphs[0];if(f){var m=a.state.dropHover;if(m&&(m=m.get(this)))if(m.dropGrid){var q=
m.config;a=a.positionIn(this);for(var r,u,v=Infinity,y=$jscomp.makeIterator(m.dropGrid),z=y.next();!z.done;z=y.next()){z=z.value;if(z.bounds.containsPoint(a)){r=z;break}var A=z.bounds.closestPointToPt(a).dist(a);A<v&&(v=A,u=z)}r||(r=u);r&&(u=m.placeholder,u||(m.placeholder=u=Pc.morph({fill:f.fill,extent:f.extent,reactsToPointer:!1,acceptsDrops:!1})),Pc.obj.equals(u._textPos||{},r.textPos)||(this!==u.owner&&this.addMorph(u),u.position=r.bounds.topLeft(),q&&q.useTextFlowPlaceholder&&(u.remove(),u._textPos=
r.textPos,this.insertText([u,null],r.textPos))))}else f=this.textPositionFromPoint(a.positionIn(this)),this.focus(),this.cursorPosition=f}}},{key:"onDropHoverOut",value:function(a){var f=a.hand.grabbedMorphs[0];f&&(f.opacity=a.state.originalOpacity||1);if(a=a.state.dropHover)if(f=a.get(this))a.delete(this),f.dropGrid&&(f.dropGrid.forEach(function(m){return m.morph&&m.morph.remove()}),f.dropGrid=null),f.placeholder&&(f.placeholder.remove(),f.placeholder=null)}},{key:"menuItems",value:function(){var a=
this,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return f=$jscomp,m=f.makeIterator,v.yield(Promise.all([Nb._get(Object.getPrototypeOf(l.prototype),"menuItems",a).call(a),a.menuItemsForContextMenu()]),2);q=m.call(f,v.yieldResult);r=q.next().value;u=q.next().value;return v.return(r.concat({isDivider:!0}).concat(u))})}},{key:"menuItemsForContextMenu",value:function(){var a=this,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:f=
[{command:"text undo",alias:"undo",target:a,showKeyShortcuts:!0},{command:"text redo",alias:"redo",target:a,showKeyShortcuts:!0},{command:"manual clipboard copy",alias:"copy",target:a,showKeyShortcuts:a.keysForCommand("clipboard copy"),args:{collapseSelection:!1,delete:!1}},{command:"manual clipboard paste",alias:"paste",target:a,showKeyShortcuts:a.keysForCommand("clipboard paste")},{command:"open text attribute controls",alias:"edit text attributes",target:a},{isDivider:!0},{command:"toggle line wrapping",
alias:(a.lineWrapping?"disable":"enable")+" line wrapping",target:a,showKeyShortcuts:!0},["run command",function(){a.focus();a.world().execCommand("run command")}]],m=$jscomp.makeIterator(a.plugins),q=m.next();case 2:if(q.done){u.jumpTo(4);break}r=q.value;if("function"!==typeof r.getMenuItems){u.jumpTo(3);break}return u.yield(r.getMenuItems(f),6);case 6:f=u.yieldResult;case 3:q=m.next();u.jumpTo(2);break;case 4:return u.return(f)}})}},{key:"keybindings",get:function(){var a=this.world();a=a&&a.getCurrentUser()&&
a.getCurrentUser().config&&a.getCurrentUser().config.textKeyBindings||[];a=Nb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat(a).concat(Pc.config.text.defaultKeyBindings);return this.pluginCollect("getKeyBindings",a)}},{key:"keybindings",set:function(a){Nb._set(Object.getPrototypeOf(l.prototype),"keybindings",a,this)}},{key:"keyhandlers",get:function(){if(this._cachedKeyhandlers)return this._cachedKeyhandlers;var a=Nb._get(Object.getPrototypeOf(l.prototype),"keyhandlers",this).concat(this._keyhandlers||
[]);return this._cachedKeyhandlers=a=this.pluginCollect("getKeyHandlers",a)}},{key:"snippets",get:function(){return this.pluginCollect("getSnippets",[])}},{key:"onHoverIn",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onHoverIn",this).call(this,a);this.scrollActive=!0;this.makeDirty()}},{key:"onHoverOut",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onHoverOut",this).call(this,a);Pc.touchInputDevice||(this.scrollActive=!1,this.makeDirty())}},{key:"onKeyDown",value:function(a){this.compositionRange||
a.targetMorph!=this||(this.selection.cursorBlinkStart(),Pc.KeyHandler.invokeKeyHandlers(this,a,!0))}},{key:"onTextInput",value:function(a){Pc.KeyHandler.invokeKeyHandlers(this,a,!1)}},{key:"onCompositionStart",value:function(a){this.insertTextAndSelect(a.data);this.compositionRange=this.selection.range}},{key:"onCompositionUpdate",value:function(a){this.selection.range=this.compositionRange;this.selection.text=[a.data,{textDecoration:"underline"}];this.compositionRange=this.selection.range}},{key:"onCompositionEnd",
value:function(a){this.selection.range=this.compositionRange;this.selection.text=a.data;this.cursorPosition=this.compositionRange.end;this.compositionRange=null}},{key:"onCut",value:function(a){if(!this.rejectsInput()&&this.isFocused()&&!Pc.config.emacs)this.onCopy(a,!this.rejectsInput())}},{key:"onCopy",value:function(a,f){f=void 0===f?!1:f;if(this.isFocused()){a.stop();var m=this.selection;try{for(var q=this.textAndAttributesInRange(this.selection.range),r=this.defaultTextStyle,u={},v=0;v<q.length;v+=
2){var y=q[v];if(y.isMorph)if(y.isDisplacementMorph)q[v]="";else{var z=u[v]=Pc.serializeMorph(q[v]);q[v]=Pc.deserializeMorph(z,{reinitializeIds:!0})}}var A=Pc.extractHTMLFromTextMorph(this,q);a.domEvt.clipboardData.setData("text/html",A);for(var C in u)q[C]=u[C];var G=JSON.stringify({textAndAttributes:q,defaultTextStyle:r});a.domEvt.clipboardData.setData("application/x-lively-text",G)}catch(F){$world.logError(F)}a.domEvt.clipboardData.setData("text/plain",m.text);this.execCommand("manual clipboard copy",
{collapseSelection:Pc.config.codeEditor.collapseSelection||!1,delete:f,dontTryNativeClipboard:!0})}}},{key:"onPaste",value:function(a){var f=this;if(!this.rejectsInput()){a.stop();var m="";try{m=a.domEvt.clipboardData.getData("text")}catch(v){console.warn(v)}if(!this.editorPlugin)try{var q=a.domEvt.clipboardData.getData("application/x-lively-text");var r=q&&JSON.parse(q);var u=r.textAndAttributes;for(a=0;a<u.length;a+=2)"string"!==typeof u[a]&&(u[a]=Pc.deserializeMorph(u[a],{reinitializeIds:!0}))}catch(v){console.warn(v)}u=
this.selection;u=u.isMultiSelection?u.selections:[u];r&&this.undoManager.group();u.forEach(function(v){r?f.replace(v.range,r.textAndAttributes,!1,!0,!0):v.text=m;f.saveMark(v.start);v.collapseToEnd()});r&&this.undoManager.group()}}},{key:"onFocus",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onFocus",this).call(this,a);this.makeDirty();this.selection.cursorBlinkStart();this._originalShadow||((a=this.haloShadow||this.propertiesAndPropertySettings().properties.haloShadow.defaultValue)&&
!a.equals&&(a=new Pc.ShadowObject(a)),a&&!a.equals(this.dropShadow)&&(this._originalShadow=this.dropShadow),this.highlightWhenFocused&&this.animate({dropShadow:a,duration:200}))}},{key:"onBlur",value:function(a){this.makeDirty();this.selection.cursorBlinkStop();this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null;Nb._get(Object.getPrototypeOf(l.prototype),"onBlur",this).call(this,a)}},{key:"onScroll",value:function(a){this.isFocused()&&
this.ensureKeyInputHelperAtCursor();(a=this.env.renderer.getNodeForMorph(this))&&Pc.signal(this,"viewChanged",{prop:"scroll",value:Pc.pt(a.scrollLeft,a.scrollTop)})}},{key:"ensureKeyInputHelperAtCursor",value:function(){this.env.eventDispatcher.keyInputHelper&&this.env.eventDispatcher.keyInputHelper.ensureBeingAtCursorOfText(this)}},{key:"textPageHeight",value:function(){var a=this.padding,f=this.borderWidthBottom,m=this.borderWidthTop;return this.height-a.top()-a.bottom()-f-m}},{key:"scrollPageDown",
value:function(){this.scrollDown(this.textPageHeight())}},{key:"scrollPageUp",value:function(){this.scrollUp(this.textPageHeight())}},{key:"pageUpOrDown",value:function(a){var f=a=void 0===a?{direction:"up",select:!1}:a;a=f.direction;f=f.select;var m=this.textLayout["down"===a?"lastFullVisibleLine":"firstFullVisibleLine"](this),q=this.cursorPosition.column,r=this.padding;f?this.selection.lead={row:m,column:q}:this.cursorPosition={row:m,column:q};"down"===a?this.alignRowAtTop(m,Pc.pt(0,-r.top()-r.bottom())):
(this.alignRowAtBottom(m,Pc.pt(0,0)),this.alignRowAtBottom(m,Pc.pt(0,r.top()+r.bottom())))}},{key:"gotoDocumentStart",value:function(a){a=void 0===a?{select:!1}:a;this.selection.lead={row:0,column:0};a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"gotoDocumentEnd",value:function(a){a=void 0===a?{select:!1}:a;this.selection.lead=this.documentEndPosition;a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"paragraphRangeAbove",value:function(a){if(this.isLineEmpty(a)){for(var f=
a-1;0<=f;f--)if(!this.isLineEmpty(f)){var m=f;break}if(void 0===m)return{start:{row:a,column:0},end:{row:a,column:0}}}else m=a;return this.paragraphRange(m)}},{key:"paragraphRangeBelow",value:function(a){var f=this.isLineEmpty(a),m=this.documentEndPosition;if(f){for(f=a+1;f<=m.row;f++)if(!this.isLineEmpty(f)){var q=f;break}if(void 0===q)return{start:{row:a,column:0},end:{row:a,column:0}}}else q=a;return this.paragraphRange(q)}},{key:"paragraphRange",value:function(a){if(this.isLineEmpty(a))return{start:{row:a,
column:0},end:{row:a,column:0}};var f=this.documentEndPosition;for(a+=1;a<=f.row;a++)if(this.isLineEmpty(a)){var m={row:a-1,column:this.getLine(a-1).length};break}m||(m=f);for(a=m.row-1;0<=a;a--)if(this.isLineEmpty(a)){var q={row:a+1,column:0};break}q||(q={row:0,column:0});return{start:q,end:m}}},{key:"astNodeRange",value:function(a){return{start:this.document.indexToPosition(a.start),end:this.document.indexToPosition(a.end)}}},{key:"parseIntoLines",value:function(a){return a.split("\n")}},{key:"computeTextRangeForChanges",
value:function(a){function f(v,y){for(var z="",A=0;A<v.length;A+=2)z+="string"===typeof v[A]?v[A]:Pc.objectReplacementChar;v=q.parseIntoLines(z);return 1===v.length?Pc.Range.fromPositions(y,{row:y.row,column:y.column+v[0].length}):1<v.length?Pc.Range.fromPositions(y,{row:y.row+v.length-1,column:Pc.arr.last(v).length}):Pc.Range.at(y)}var m=Pc.Range.at(this.cursorPosition);if(!a.length)return m;var q=this,r=a[0];m="replace"===r.selector?f(r.args[1],r.args[0].start):m;for(r=1;r<a.length;r++){var u=a[r];
m="replace"===u.selector?m.merge(f(u.args[1],u.args[0].start)):m}return m}},{key:"ensureUndoManager",value:function(){if(this.undoManager)return this.undoManager;var a=["addTextAttribute","removeTextAttribute","setStyleInRange","replace"];return this.undoManager=new Pc.UndoManager(function(f){return a.includes(f.selector)})}},{key:"textUndo",value:function(){var a=this.undoManager.undo();a&&(a=a.changes.slice().reverse().map(function(f){return f.undo}),this.selection=this.computeTextRangeForChanges(a))}},
{key:"textRedo",value:function(){var a=this.undoManager.redo();a&&(a=a.changes.slice(),this.selection=this.computeTextRangeForChanges(a))}},{key:"findMatchingForward",value:function(a,f,m){f=void 0===f?"right":f;m=void 0===m?{}:m;var q=this["right"===f?"charRight":"charLeft"](a),r=m[q];if(!r)return null;var u="right"===f?-1:0;return this.document.scanForward(a,function(v,y){if(v===r){if(0===u)return"right"===f?{row:y.row,column:y.column+1}:y;u--}else v===q&&u++;return null})}},{key:"findMatchingBackward",
value:function(a,f,m){f=void 0===f?"right":f;m=void 0===m?{}:m;var q=this["right"===f?"charRight":"charLeft"](a),r=m[q];if(!r)return null;var u="left"===f?-1:0;return this.document.scanBackward(a,function(v,y){if(v===r){if(0===u)return"right"===f?{row:y.row,column:y.column+1}:y;u--}else v===q&&u++;return null})}},{key:"search",value:function(a,f){f=void 0===f?{start:this.cursorPosition,backwards:!1,caseSensitive:!1}:f;return(new Pc.TextSearcher(this)).search(Object.assign({needle:a},f))}},{key:"searchForAll",
value:function(a,f){f=void 0===f?{caseSensitive:!1}:f;return(new Pc.TextSearcher(this)).searchForAll(Object.assign({needle:a},f))}},{key:"tokenAt",value:function(a){return this.pluginInvokeFirst("tokenAt",a)}},{key:"astAt",value:function(a){return this.pluginInvokeFirst("astAt",a)}},{key:"evalEnvironment",get:function(){var a=this.editorPlugin;return a&&a.evalEnvironment}},{key:"evalEnvironment",set:function(a){var f=this.editorPlugin;f&&(f.evalEnvironment=a)}},{key:"doitContext",get:function(){return(this.evalEnvironment||
{}).context}},{key:"doitContext",set:function(a){(this.evalEnvironment||{}).context=a}},{key:"logDoit",value:function(a,f){f=void 0===f?{}:f;f=void 0===f.time?Date.now():f.time;if(!(12E4<a.length)){try{var m=JSON.parse(localStorage["lively.next-js-ide-doitlog"])}catch(q){}m||(m=[]);if(!m.some(function(q){return"string"===typeof q?q===a:q.source===a})){m.push({source:a,time:f});50<m.length&&(m=m.slice(-50));try{localStorage["lively.next-js-ide-doitlog"]=JSON.stringify(m)}catch(q){}}}}},{key:"doEval",
value:function(a,f,m){a=void 0===a?this.selection.isEmpty()?this.lineRange():this.selection.range:a;m=void 0===m?this.textInRange(a):m;a=this.pluginFind(function(q){return q.isEditorPlugin&&"function"===typeof q.runEval});if(!a)throw Error("doit not possible: cannot find js editor plugin of !"+this);f&&f.logDoit&&this.logDoit(m,f);return a.runEval(m,f)}},{key:"maybeSelectCommentOrLine",value:function(){var a=this.selection,f=a.lead,m=f.row;f=f.column;var q=this.selectionOrLineString();if(a.isEmpty()){var r=
q.indexOf("//");-1===r||f<r||0<r&&0<=":\"'".indexOf(q[r-1])?this.selectLine(m):a.range={start:{row:m,column:r+2},end:{row:m,column:q.length}}}}},{key:"debugHelper",value:function(a){a=Object.assign({debugDocumentUpdate:!0,debugTextLayout:!0},a);return this._debugHelper?Object.assign(this._debugHelper,a):this._debugHelper=Object.assign({},a,{logged:[],groups:[],reset:function(){this.groups=[[]];this.logged=this.groups[0]},log:function(f){for(var m=[],q=0;q<arguments.length;++q)m[q-0]=arguments[q];
console.log.apply(console,$jscomp.arrayFromIterable(m));this.logged.push({args:m})},dump:function(f){console.log(f.split("\n").map(function(m){return m.slice(0,100)}).join("\n"));this.logged.push({dump:f})},group:function(f){this.groups.push([]);this.logged=Pc.arr.last(this.groups);console.group(f)},groupEnd:function(f){console.groupEnd(f)},steps:function(f){for(var m=[];f.length;){var q=Pc.arr.takeWhile(f,function(u){return!u.dump});f=f.slice(q.length);var r=(f.shift()||{}).dump;m.push({actions:q,
dump:r})}return m},printToConsole:function(){var f=this;console.clear();this.groups.forEach(function(m){var q=f.steps(m);console.group(q.length);f.steps(m).forEach(function(r,u){r=r.actions;console.group("step "+(u+1));r.forEach(function(v){return console.log.apply(console,$jscomp.arrayFromIterable(v.args))});console.groupEnd("step "+(u+1))});console.groupEnd(q.length)})},report:function(){var f=this,m,q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(System.import("jsdiff",
System.decanonicalize("lively.morphic")),2);if(3!=A.nextAddress)return m=A.yieldResult,A.yield(System.import("lively.ide/diff/editor-plugin.js"),3);q=A.yieldResult;r=q.default;u=0;v="";y=[];z=0;f.groups.forEach(function(C,G){v+=">>> group "+(G+1)+"\n";z++;u++;var F=f.steps(C);F.forEach(function(N,L){var W=N.actions;N=N.dump;v+=Pc.string.indent(">>> step "+(L+1)," ",u)+"\n";z++;u++;W.forEach(function(la){la=Pc.string.indent(Pc.string.formatFromArray(la.args.slice()).trim()," ",u);z+=la.split("\n").length;
v+=la+"\n"});1<=L&&N&&F[L-1].dump&&(W=new r,N=m.createPatch(String(L),F[L-1].dump,N),W.tokenize(N),y.push.apply(y,$jscomp.arrayFromIterable(W.styledRanges(z,u))),v+=N,z+=N.split("\n").length-1);v+=Pc.string.indent("<< step "+(L+1)," ",u)+"\n";z++;u--});v+="<<< group "+(G+1)+"\n";z++;u--});return A.return({report:v,reportStyles:y})})},openReport:function(){var f=this,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(f.report(),2);m=u.yieldResult;
q=m.reportStyles;r=m.report;return u.return($world.execCommand("open text window",{title:"text debug",fontFamily:"monospace",content:r,rangesAndStyles:q}))})}})}},{key:"consistencyCheck",value:function(){if(this.debug)return this.document.consistencyCheck();try{return this.document.consistencyCheck()}catch(q){var a=this.document;this.brokenDocument||(this.brokenDocument=a);var f=this.world()||$world;try{var m=new Pc.Document([]);m.textAndAttributes=a.textAndAttributes;this.changeDocument(m)}catch(r){f?
f.logError("Broken document could not be fixed"):console.error("Broken document could not be fixed")}f?f.logError(q):console.error(q)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Text"}},{key:"makeLabel",value:function(a,f){return new Pc.morph(Object.assign({type:"label",value:a,fontFamily:"IBM Plex, Helvetica Neue, Arial, sans-serif",fontColor:Pc.Color.almostBlack,fontSize:11},f))}},{key:"makeInputLine",value:function(a){return new (System.get(System.decanonicalize("lively.morphic")).InputLine)(a)}},
{key:"defaultTextStyle",get:function(){if(this._defaultTextStyle)return this._defaultTextStyle;for(var a=this.prototype.propertiesAndPropertySettings().properties,f=this.defaultTextStyleProps,m={},q=0;q<f.length;q++){var r=f[q];m[r]=a[r].defaultValue}return this._defaultTextStyle=m}},{key:"defaultTextStyleProps",get:function(){if(this._defaultTextStyleProps)return this._defaultTextStyleProps;var a=this.prototype.propertiesAndPropertySettings().properties,f=[],m;for(m in a)a[m].isDefaultTextStyleProp&&
f.push(m);return this._defaultTextStyleProps=f}},{key:"properties",get:function(){return{clipMode:{isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.fixedWidth=this.fixedHeight=this.isClip()}},fontMetric:{group:"_rendering",serialize:!1,get:function(){return this.getProperty("fontMetric")||this.env.fontMetric}},undoManager:{group:"core",before:["document"],initialize:function(){this.ensureUndoManager()}},textRenderer:{group:"_rendering",after:["viewState"],
initialize:function(){this.textRenderer=new Pc.Renderer(this.env.domEnv)}},debug:{group:"_debugging",isStyleProp:!0,after:["textRenderer","textLayout"],defaultValue:!1,doc:"For visualizing and debugging text layout and rendering"},defaultViewState:{group:"_rendering",derived:!0,readOnly:!0,get:function(){return{_needsFit:!0,text_layer_node:null,fontmetric_text_layer_node:null,dom_nodes:[],dom_nodeFirstRow:[],scrollTop:0,scrollHeight:0,scrollBottom:0,textHeight:0,textWidth:0,firstVisibleRow:0,lastVisibleRow:0,
heightBefore:0,wasScrolled:!1,afterTextRenderHook:null,fastScroll:!0}}},viewState:{group:"_rendering",initialize:function(){this.viewState=this.defaultViewState}},displacingMorphMap:{group:"_rendering",initialize:function(){this.displacingMorphMap=new Map}},embeddedMorphMap:{group:"_rendering",initialize:function(){this.embeddedMorphMap=new Map}},embeddedMorphs:{group:"text",derived:!0,readOnly:!0,after:["embeddedMorphMap"],get:function(){return this.embeddedMorphMap?Array.from(this.embeddedMorphMap.keys()):
[]}},textLayout:{group:"_rendering",after:["textRenderer"],initialize:function(){this.textLayout=new Pc.TextLayout(this)}},document:{group:"text",initialize:function(){this.document=Pc.Document.fromString("",{maxLeafSize:50,minLeafSize:25,maxNodeSize:35,minNodeSize:7});this.consistencyCheck()}},draggable:{defaultValue:!1},useSoftTabs:{group:"text",isStyleProp:!0,defaultValue:void 0!==Pc.config.text.useSoftTabs?Pc.config.text.useSoftTabs:!0},tabWidth:{group:"text",isStyleProp:!0,defaultValue:Pc.config.text.tabWidth||
2},tab:{group:"text",after:["useSoftTabs","tabWidth"],readOnly:!0,derived:!0,get:function(){return this.useSoftTabs?" ".repeat(this.tabWidth):"\t"}},autoInsertPairs:{group:"text",defaultValue:!0},extent:{get:function(){var a=this,f=this.getProperty("extent");!this._textChange&&this.viewState&&this.viewState._needsFit&&!this._rendering&&!this._measuringTextBox&&f&&this.owner&&(this._measuringTextBox=!0,Pc.noUpdate(function(){a.directRender()}),this._measuringTextBox=!1);return this.getProperty("extent")}},
fixedWidth:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},fixedHeight:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},readOnly:{group:"text",isStyleProp:!0,defaultValue:!1,set:function(a){this.nativeCursor=a?"default":"auto";this.setProperty("readOnly",a)}},selectable:{group:"selection",isStyleProp:!0,after:["selection"],defaultValue:!0,set:function(a){this.setProperty("selectable",a);a||this.selection.collapse()}},padding:{group:"styling",
type:"Rectangle",isStyleProp:!0,after:["textLayout","viewState"],defaultValue:Pc.Rectangle.inset(0),set:function(a){this.setProperty("padding","number"===typeof a?Pc.Rectangle.inset(a):a)}},haloShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null},highlightWhenFocused:{group:"styling",defaultValue:!1,after:["haloShadow"],set:function(a){this.setProperty("highlightWhenFocused",a);a&&!this.haloShadow&&(this.haloShadow={blur:6,color:Pc.Color.rgb(52,152,219),distance:0,rotation:45})}},
cursorPosition:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.lead},set:function(a){this.selection.range={start:a,end:a}}},selection:{group:"selection",derived:!0,after:["document","anchors"],get:function(){var a=this.getProperty("selection");if(a)return a;a=new (Pc.config.text.useMultiSelect?Pc.MultiSelection:Pc.Selection)(this);this.setProperty("selection",a);return a},set:function(a){this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,
this);a?a.isSelection?this.setProperty("selection",a):this.selection.range=a:(this.selection.isMultiSelection&&this.selection.disableMultiSelect(),this.selection.collapse())}},selections:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.isMultiSelection?this.selection.selections:[this.selection]},set:function(a){var f=this;this.selection=a[0];this.selection.isMultiSelection&&a.slice(1).forEach(function(m){return f.selection.addRange(m)})}},textString:{group:"text",
after:["document"],derived:!0,get:function(){return this.document?this.document.textString:""},set:function(a){a=null!=a?String(a):"";this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);this.deleteText({start:{column:0,row:0},end:this.document.endPosition});this.insertText(a,{column:0,row:0})}},value:{group:"text",after:["document","embeddedMorphMap"],derived:!0,get:function(){var a=this.textAndAttributes;if(1===a.length){var f=$jscomp.makeIterator(a[0]),
m=f.next().value;f=f.next().value;if(!Object.keys(f||{}).length)return m}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=a}},textAndAttributes:{group:"text",derived:!0,after:["document"],get:function(){return this.document.textAndAttributes},set:function(a){this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);this.replace({start:{row:0,column:0},end:this.documentEndPosition},a)}},defaultTextStyleProps:{group:"_internal",
readOnly:!0,derived:!0,get:function(){return this.constructor.defaultTextStyleProps}},defaultTextStyle:{group:"styling",after:["viewState"],derived:!0,get:function(){return Pc.obj.select(this,this.defaultTextStyleProps)},set:function(a){Object.assign(this,a)}},customizedTextStyle:{group:"styling",readOnly:!0,derived:!0,get:function(){for(var a={},f=this.defaultTextStyleProps,m=this.constructor.defaultTextStyle,q=0;q<f.length;q++){var r=f[q],u=this[r];u!==m[r]&&(a[r]=u)}return a}},nativeCursor:{defaultValue:"",
isDefaultTextStyleProp:!0},fontFamily:{group:"text styling",type:"Enum",values:Pc.config.text.basicFontItems,defaultValue:"IBM Plex Sans, Sans-Serif",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontSize:{group:"text styling",type:"Number",min:1,unit:"pt",defaultValue:12,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},selectionColor:{group:"text styling",type:"Color",defaultValue:Pc.Color.rgba(212,230,241,.8),isStyleProp:!0,after:["defaultTextStyle"]},
cursorColor:{group:"text styling",type:"Color",isStyleProp:!0,after:["defaultTextStyle"],defaultValue:Pc.Color.black},fontColor:{group:"text styling",type:"Color",defaultValue:Pc.Color.black,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontWeight:{group:"text styling",type:"Enum",values:["bold","bolder","light","lighter","normal"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontStyle:{group:"text styling",type:"Enum",values:["normal",
"italic","oblique"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textDecoration:{group:"text styling",type:"Enum",values:["none","underline"],defaultValue:"none",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textStyleClasses:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},backgroundColor:{group:"text styling",type:"Color",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},
textAlign:{group:"text styling",type:"Enum",values:["center","justify","left","right"],isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineHeight:{group:"text styling",type:"Number",min:1,isFloat:!0,isStyleProp:!0,isDefaultTextStyleProp:!0,defaultValue:1.4,after:["document","defaultTextStyle","viewState"]},letterSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},wordSpacing:{group:"text styling",
isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineWrapping:{group:"text",type:"Enum",values:[!1,!0,"by-words","anywhere","only-by-words","wider","by-chars"],isStyleProp:!0,defaultValue:!1,after:["document","viewState"]},anchors:{group:"core",defaultValue:[],set:function(a){var f=this,m=Pc.arr.withoutAll(a,this.anchors);Pc.arr.withoutAll(this.anchors,a).forEach(function(q){return f.removeAnchor(q)});m.forEach(function(q){return f.addAnchor(q)})}},markers:{group:"core",
defaultValue:[]},savedMarks:{group:"core",defaultValue:[],after:["anchors"],set:function(a){var f=this;a=a.map(function(q){return q.isAnchor?q:f.addAnchor(Object.assign({},q,{id:"saved-mark-"+Pc.string.newUUID()}))});var m=this.savedMarks.filter(function(q){return!a.includes(q)});a>Pc.config.text.markStackSize&&m.push.apply(m,$jscomp.arrayFromIterable(a.splice(0,a.length-Pc.config.text.markStackSize)));m.map(function(q){return f.removeAnchor(q)});return this.setProperty("savedMarks",a)}},activeMarkPosition:{group:"_internal",
after:["activeMark"],derived:!0,get:function(){var a=this.activeMark;return a?a.position:null}},activeMark:{group:"core",after:["anchors"],set:function(a){if(a)a=this.addAnchor(a.isAnchor?a:Object.assign({},a,{id:"saved-mark-"+Pc.string.newUUID()}));else{var f=this.activeMark;this.savedMarks.includes(f)||this.removeAnchor(f)}this.setProperty("activeMark",a)}},plugins:{group:"plugins",defaultValue:[],after:["value"],set:function(a){var f=this,m=this.getProperty("plugins");Pc.arr.withoutAll(m,a).forEach(function(q){return q&&
f.removePlugin(q)});a.forEach(function(q){return q&&f.addPlugin(q)})}},editorModeName:{group:"plugins",derived:!0,after:["plugins"],get:function(){var a=this.editorPlugin;return a?a.shortName:null},set:function(a){this.changeEditorMode(a)}}}}}],c,{pathInPackage:function(){return"text/morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1305,end:113370})}(Pc.Morph));Pc.Text=hs;Pc.Text=hs;Pc.Text=hs;var gma=Object.freeze({__proto__:null,Text:hs}),Bg=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js");Bg.obj=lf;Bg.promise=Kf;Bg.arr=Te;Bg.string=Hg;Bg.properties=mp;Bg.Rectangle=Pd;Bg.Color=wf;Bg.signal=hk;Bg.vdom=dE;Bg.Morph=Hj;Bg.config=nk;Bg.defaultStyle=dw;Bg.defaultAttributes=gi;Bg.Icon=En;Bg.Icons=bJ;Bg.splitTextAndAttributesIntoLines=AD;Bg.h=Bg.vdom.h;var is=ya("az",function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js"),
l=c.hasOwnProperty("Label")&&"function"===typeof c.Label?c.Label:c.Label=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"onChange",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a);a.prop&&a.prop.includes("borderWidth")&&this.fit()}},{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=a=void 0===a?{}:a,m=f.fontMetric,q=f.position,r=f.rightCenter,
u=f.leftCenter,v=f.topCenter,y=f.bottom,z=f.top,A=f.right,C=f.left,G=f.bottomCenter,F=f.bottomLeft,N=f.bottomRight,L=f.topRight,W=f.topLeft,la=f.center;f=f.extent;Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Bg.obj.dissoc(a,["fontMetric"]));m&&(this._fontMetric=m);this._cachedTextBounds=null;this.fit();void 0!==f&&(this.extent=f);void 0!==q&&(this.position=q);void 0!==r&&(this.rightCenter=r);void 0!==u&&(this.leftCenter=u);void 0!==v&&(this.topCenter=
v);void 0!==y&&(this.bottom=y);void 0!==z&&(this.top=z);void 0!==A&&(this.right=A);void 0!==C&&(this.left=C);void 0!==G&&(this.bottomCenter=G);void 0!==F&&(this.bottomLeft=F);void 0!==N&&(this.bottomRight=N);void 0!==L&&(this.topRight=L);void 0!==W&&(this.topLeft=W);void 0!==la&&(this.center=la)}},{key:"__additionally_serialize__",value:function(a,f,m,q){Nb._get(Object.getPrototypeOf(l.prototype),"__additionally_serialize__",this).call(this,a,f,m,q);this.fit();a._cachedTextBounds=this._cachedTextBounds&&
this._cachedTextBounds.toTuple()}},{key:"__after_deserialize__",value:function(a,f,m){Nb._get(Object.getPrototypeOf(l.prototype),"__after_deserialize__",this).call(this,a,f,m);a._cachedTextBounds&&(this.changeMetaData("deserializeInfo",{recoveredTextBounds:!0}),this._cachedTextBounds=Bg.Rectangle.fromTuple(a._cachedTextBounds))}},{key:"isLabel",get:function(){return!0}},{key:"textStyle",get:function(){return Bg.obj.select(this,"textStyleClasses textDecoration fontStyle fontWeight textShadow fontColor fontSize fontFamily".split(" "))}},
{key:"fit",value:function(){this.extent=this.textBounds().extent().addXY(this.borderWidthLeft+this.borderWidthRight,this.borderWidthTop+this.borderWidthBottom);this.visible?this._needsFit=!1:this._cachedTextBounds=null;return this}},{key:"fitIfNeeded",value:function(){this._needsFit&&this.allFontsLoaded()&&this.fit()}},{key:"textAndAttributesOfLines",get:function(){return Bg.splitTextAndAttributesIntoLines(this.textAndAttributes,"\n")}},{key:"allFontsLoaded",value:function(){var a=this,f=this.env.fontMetric;
return[this].concat($jscomp.arrayFromIterable(this.textAndAttributes.map(function(m,q){if(q%2)return{fontFamily:m&&m.fontFamily||a.fontFamily,fontWeight:m&&m.fontWeight||a.fontWeight}}).filter(Boolean))).every(function(m){return f.isFontSupported(m.fontFamily,m.fontWeight)})}},{key:"whenFontLoaded",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.return(Bg.promise.waitFor(5E3,function(){return a.allFontsLoaded()}))})}},{key:"textBoundsSingleChunk",
value:function(){var a=this._fontMetric||this.env.fontMetric,f=$jscomp.makeIterator(this.textAndAttributes),m=f.next().value;f=f.next().value;var q=Object.assign({},this.textStyle,{},f);f=this.padding;a.isProportional(q.fontFamily)?(a=a.sizeFor(q,m),m=a.width,a=a.height):(q=a.sizeFor(q,"x"),a=q.height,m=m.length*q.width);return new Bg.Rectangle(0,0,Math.ceil(f.left()+f.right()+m),Math.ceil(f.top()+f.bottom()+a))}},{key:"textBoundsAllChunks",value:function(){for(var a=this._fontMetric||this.env.fontMetric,
f=this.padding,m=this.textStyle,q=this.textAndAttributesOfLines,r=!a.isProportional(m.fontFamily),u=a.sizeFor(m,"x").height,v=0,y=0,z=0;z<q.length;z++){var A=q[z];if(A.length){for(var C=0,G=0,F=0;F<A.length;F+=2){var N=A[F],L=A[F+1]||{},W=Object.assign({},m,{},L);r&&!L.fontFamily||!a.isProportional(W.fontFamily)?(W=a.sizeFor(W,"x"),L=W.height,G+=N.length*W.width,C=Math.max(C,L)):(N=a.sizeFor(W,N),L=N.height,G+=N.width,W.paddingRight&&(G+=Number.parseInt(W.paddingRight)),W.paddingLeft&&(G+=Number.parseInt(W.paddingLeft)),
C=Math.max(C,L))}v+=C;y=Math.max(y,G)}else v+=u}return new Bg.Rectangle(0,0,Math.ceil(f.left()+f.right()+y),Math.ceil(f.top()+f.bottom()+v))}},{key:"invalidateTextLayout",value:function(){this._cachedTextBounds=null;this.autofit&&(this._needsFit=!0);this.makeDirty()}},{key:"textBounds",value:function(){var a=this.textAndAttributes;return this._cachedTextBounds||(this._cachedTextBounds=2>=a.length?this.textBoundsSingleChunk():this.textBoundsAllChunks())}},{key:"forceRerender",value:function(){this._cachedTextBounds=
null;this.makeDirty()}},{key:"applyLayoutIfNeeded",value:function(){this.fitIfNeeded();Nb._get(Object.getPrototypeOf(l.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);for(var f=[],m=this.textAndAttributesOfLines.length,q=0;q<m;q++){for(var r=this.textAndAttributesOfLines[q],u=0;u<r.length;u+=2){var v=r[u+1];f.push(this.renderChunk(r[u],v))}q<m-1&&f.push(Bg.h("br"))}v=
this.textStyle;var y=v.fontColor,z=v.fontSize;m=v.fontStyle;q=v.fontWeight;r=v.textShadow;u=v.textDecoration;var A=v.textStyleClasses,C=this.padding;v={fontFamily:v.fontFamily,fontSize:"number"===typeof z?z+"px":z,color:y?String(y):"transparent",position:"absolute",cursor:this.nativeCursor};y=Bg.defaultAttributes(this,a);r&&(v.textShadow=r);"normal"!==q&&(v.fontWeight=q);"normal"!==m&&(v.fontStyle=m);"none"!==u&&(v.textDecoration=u);A&&A.length&&(y.className=(y.className||"")+" "+A.join(" "));y.style=
Object.assign({},Bg.defaultStyle(this),{},v);return Bg.h("div",y,[Bg.h("div",{style:{pointerEvents:"none",position:"absolute",paddingLeft:C.left()+"px",paddingRight:C.right()+"px",paddingTop:C.top()+"px",paddingBottom:C.bottom()+"px",width:"calc(100% - "+C.left()+"px - "+C.right()+"px)"}},f),a.renderSubmorphs(this)])}},{key:"renderChunk",value:function(a,f){var m=f=f||{},q=m.backgroundColor,r=m.fontColor,u=m.fontFamily,v=m.fontStyle,y=m.fontWeight,z=m.textShadow,A=m.textDecoration,C=m.textStyleClasses,
G=m.textAlign,F=m.float,N=m.display,L=m.lineHeight,W=m.opacity;m={};var la={style:m};F&&(m.float=F);N&&(m.display=N);q&&(m.backgroundColor=String(q));u&&(m.fontFamily=u);r&&(m.color=String(r));z&&(m.textShadow=z);"normal"!==y&&(m.fontWeight=y);"normal"!==v&&(m.fontStyle=v);"none"!==A&&(m.textDecoration=A);G&&(m.textAlign=G);L&&(m.lineHeight=L);W&&(m.opacity=W);C&&C.length&&(la.className=C.join(" "));q="fontSize width height maxWidth maxHeight top left padding paddingLeft paddingRight paddingBottom paddingTop marginTop marginRight marginLeft marginBottom".split(" ");
for(r=0;r<q.length;r++)u=q[r],f.hasOwnProperty(u)&&(v=f[u],m[u]="number"===typeof v?v+"px":v);return Bg.h("span",la,a)}},{key:"interactivelyChangeLabel",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(a.world().prompt("edit label",{input:a.textString,historyId:"lively.morphic-label-edit-hist"}),2);f=m.yieldResult;"string"===typeof f&&(a.textString=f);m.jumpToEnd()})}},{key:"interactivelySetIcon",value:function(){var a=
this,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(a.world().filterableListPrompt("Select Icon",Object.keys(Bg.Icons).map(function(u){return{isListItem:!0,label:[].concat($jscomp.arrayFromIterable(Bg.Icon.textAttribute(u,{paddingRight:"10px"})),[u,{}]),value:u}})),2);f=r.yieldResult;m=$jscomp.makeIterator(f.selected);if(q=m.next().value)a.value=Bg.Icon.textAttribute(q);r.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,f=Nb._get(Object.getPrototypeOf(l.prototype),
"menuItems",this).call(this);f.unshift({isDivider:!0});f.unshift(["change label",function(){return a.interactivelyChangeLabel()}]);f.unshift(["set Icon",function(){return a.interactivelySetIcon()}]);return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Label"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fill:{defaultValue:Bg.Color.transparent},draggable:{defaultValue:!1},nativeCursor:{defaultValue:"default"},isIcon:{derived:!0,get:function(){return Bg.properties.values(Bg.Icons).map(function(a){return a.code}).includes(this.textString)}},
value:{derived:!0,after:["textAndAttributes","textString"],get:function(){var a=this.textAndAttributes;if(2>=a.length){var f=$jscomp.makeIterator(a),m=f.next().value;f=f.next().value;if(!Object.keys(f||{}).length)return m||""}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=a}},textString:{derived:!0,after:["textAndAttributes"],get:function(){return this.textAndAttributes.map(function(a,f){return 0==f%2?a:""}).join("")},set:function(a){this.textAndAttributes=
[a,null]}},textAndAttributes:{get:function(){var a=this.getProperty("textAndAttributes");if(!a||1>a.length)a=["",null];return a},set:function(a){Array.isArray(a)||(a=[String(a),{}]);0===a.length&&(a=["",{}]);this.setProperty("textAndAttributes",a);this.autofit&&this.invalidateTextLayout();Bg.signal(this,"value",a)}},valueAndAnnotation:{derived:!0,after:["textAndAttributes"],get:function(){var a=this.textAndAttributes,f=null;if(2<a.length){var m=$jscomp.makeIterator(a.slice(-2)),q=m.next().value;(m=
m.next().value)&&m.textStyleClasses&&m.textStyleClasses.includes("annotation")&&(a=a.slice(0,-2),f=[q,m])}return{value:a,annotation:f}},set:function(a){var f=a.value;a=a.annotation;f||(f="");"string"===typeof f&&(f=[f,null]);Array.isArray(f)||(f=[String(f),null]);f=f.slice();if(a){"string"===typeof a&&(a=[a,null]);var m=a[1];m||(m=a[1]={});f.push.apply(f,$jscomp.arrayFromIterable(a));m.textStyleClasses=(m.textStyleClasses||[]).concat("annotation");m.textStyleClasses.includes("annotation")||m.textStyleClasses.push("annotation")}this.textAndAttributes=
f}},autofit:{defaultValue:!0,set:function(a){this.setProperty("autofit",a);a&&(this._needsFit=!0)}},padding:{type:"Rectangle",isStyleProp:!0,defaultValue:Bg.Rectangle.inset(0),initialize:function(a){this.padding=a},set:function(a){a||(a=Bg.Rectangle.inset(0));var f=this.padding;this.setProperty("padding","number"===typeof a?Bg.Rectangle.inset(a):a);this.autofit&&!f.equals(a)&&this.invalidateTextLayout()}},fontFamily:{isStyleProp:!0,type:"Enum",values:Bg.config.text.basicFontItems,defaultValue:"IBM Plex Sans, Sans-Serif",
set:function(a){var f=this.fontFamily;this.setProperty("fontFamily",a);this.autofit&&f!=a&&this.invalidateTextLayout()}},fontSize:{type:"Number",min:1,isStyleProp:!0,defaultValue:12,set:function(a){var f=this.fontSize;this.setProperty("fontSize",a);this.autofit&&a!=f&&this.invalidateTextLayout()}},fontColor:{type:"Color",isStyleProp:!0,defaultValue:Bg.Color.black},fontWeight:{type:"Enum",values:["bold","bolder","light","lighter"],isStyleProp:!0,defaultValue:"normal",set:function(a){var f=this.fontWeight;
this.setProperty("fontWeight",a);this.autofit&&f!=a&&this.invalidateTextLayout()}},fontStyle:{type:"Enum",values:["normal","italic","oblique"],isStyleProp:!0,defaultValue:"normal",set:function(a){var f=this.fontStyle;this.setProperty("fontStyle",a);this.autofit&&f!=a&&this.invalidateTextLayout()}},textShadow:{type:"String",isStyleProp:!0,defaultValue:""},textDecoration:{defaultValue:"none"},textStyleClasses:{defaultValue:void 0,set:function(a){this.setProperty("textStyleClasses",a);this.autofit&&
this.invalidateTextLayout()}}}}},{key:"icon",value:function(a,f){f=void 0===f?{prefix:"",suffix:""}:f;return Bg.Icon.makeLabel(a,f)}}],c,{pathInPackage:function(){return"text/label.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:490,end:18380})}(Bg.Morph));Bg.Label=is;Bg.Label=is;Bg.Label=is;var hma=Object.freeze({__proto__:null,
Label:is}),UR="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ima={},h5=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,jma=ima=function(b,c){function l(X){var ha=X.match(/\n/g);ha&&(wa+=ha.length);ha=X.lastIndexOf("\n");D=~ha?X.length-ha:D+X.length}function a(){var X={line:wa,column:D};return function(ha){ha.position=new f(X);v(/^\s*/);return ha}}function f(X){(this||UR).start=X;(this||UR).end={line:wa,column:D};(this||UR).source=c.source}function m(X){var ha=Error(c.source+":"+
wa+":"+D+": "+X);ha.reason=X;ha.filename=c.source;ha.line=wa;ha.column=D;ha.source=b;if(c.silent)Q.push(ha);else throw ha;}function q(){return v(/^{\s*/)}function r(){return v(/^}/)}function u(){var X,ha=[];v(/^\s*/);for(y(ha);b.length&&"}"!=b.charAt(0)&&(X=W()||la());)!1!==X&&(ha.push(X),y(ha));return ha}function v(X){if(X=X.exec(b)){var ha=X[0];l(ha);b=b.slice(ha.length);return X}}function y(X){var ha;for(X=X||[];ha=z();)!1!==ha&&X.push(ha);return X}function z(){var X=a();if("/"==b.charAt(0)&&"*"==
b.charAt(1)){for(var ha=2;""!=b.charAt(ha)&&("*"!=b.charAt(ha)||"/"!=b.charAt(ha+1));)++ha;ha+=2;if(""===b.charAt(ha-1))return m("End of comment missing");var bb=b.slice(2,ha-2);D+=2;l(bb);b=b.slice(ha);D+=2;return X({type:"comment",comment:bb})}}function A(){var X=v(/^([^{]+)/);if(X)return Yu(X[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(ha){return ha.replace(/,/g,"\u200c")}).split(/\s*(?![^(]*\)),\s*/).map(function(ha){return ha.replace(/\u200C/g,
",")})}function C(){var X=a(),ha=v(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(ha){ha=Yu(ha[0]);if(!v(/^:\s*/))return m("property missing ':'");var bb=v(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/);X=X({type:"declaration",property:ha.replace(h5,""),value:bb?Yu(bb[0]).replace(h5,""):""});v(/^[;\s]*/);return X}}function G(){var X=[];if(!q())return m("missing '{'");y(X);for(var ha;ha=C();)!1!==ha&&(X.push(ha),y(X));return r()?X:m("missing '}'")}function F(){for(var X,ha=[],bb=a();X=v(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)ha.push(X[1]),
v(/^,\s*/);if(ha.length)return bb({type:"keyframe",values:ha,declarations:G()})}function N(){var X=a(),ha=v(/^@([-\w]+)?keyframes\s*/);if(ha){var bb=ha[1];ha=v(/^([-\w]+)\s*/);if(!ha)return m("@keyframes missing name");ha=ha[1];if(!q())return m("@keyframes missing '{'");for(var pb,oa=y();pb=F();)oa.push(pb),oa=oa.concat(y());return r()?X({type:"keyframes",name:ha,vendor:bb,keyframes:oa}):m("@keyframes missing '}'")}}function L(X){var ha=new RegExp("^@"+X+"\\s*([^;]+);");return function(){var bb=a(),
pb=v(ha);if(pb){var oa={type:X};oa[X]=pb[1].trim();return bb(oa)}}}function W(){if("@"==b[0]){var X;if(!(X=N())){X=a();var ha=v(/^@media *([^{]+)/);if(ha)if(ha=Yu(ha[1]),q()){var bb=y().concat(u());X=r()?X({type:"media",media:ha,rules:bb}):m("@media missing '}'")}else X=m("@media missing '{'");else X=void 0}X||(X=a(),X=(ha=v(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/))?X({type:"custom-media",name:Yu(ha[1]),media:Yu(ha[2])}):void 0);X||(X=a(),(ha=v(/^@supports *([^{]+)/))?(ha=Yu(ha[1]),q()?(bb=y().concat(u()),
X=r()?X({type:"supports",supports:ha,rules:bb}):m("@supports missing '}'")):X=m("@supports missing '{'")):X=void 0);if(!(X=X||J()||O()||ja()))if(X=a(),bb=v(/^@([-\w]+)?document *([^{]+)/))if(ha=Yu(bb[1]),bb=Yu(bb[2]),q()){var pb=y().concat(u());X=r()?X({type:"document",document:bb,vendor:ha,rules:pb}):m("@document missing '}'")}else X=m("@document missing '{'");else X=void 0;if(!X)if(X=a(),v(/^@page */))if(ha=A()||[],q()){for(bb=y();pb=C();)bb.push(pb),bb=bb.concat(y());X=r()?X({type:"page",selectors:ha,
declarations:bb}):m("@page missing '}'")}else X=m("@page missing '{'");else X=void 0;X||(X=a(),v(/^@host\s*/)?q()?(ha=y().concat(u()),X=r()?X({type:"host",rules:ha}):m("@host missing '}'")):X=m("@host missing '{'"):X=void 0);if(!X)if(X=a(),v(/^@font-face\s*/))if(q()){for(ha=y();bb=C();)ha.push(bb),ha=ha.concat(y());X=r()?X({type:"font-face",declarations:ha}):m("@font-face missing '}'")}else X=m("@font-face missing '{'");else X=void 0;return X}}function la(){var X=a(),ha=A();if(!ha)return m("selector missing");
y();return X({type:"rule",selectors:ha,declarations:G()})}c=c||{};var wa=1,D=1;f.prototype.content=b;var Q=[],J=L("import"),O=L("charset"),ja=L("namespace");return JO(function(){var X=u();return{type:"stylesheet",stylesheet:{source:c.source,rules:X,parsingErrors:Q}}}())},iba="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,i5={};i5=eI;eI.prototype.emit=function(b){return b};eI.prototype.visit=function(b){return this[b.type](b)};eI.prototype.mapVisit=function(b,c){var l=
"";c=c||"";for(var a=0,f=b.length;a<f;a++)l+=this.visit(b[a]),c&&a<f-1&&(l+=this.emit(c));return l};var j5=i5,Ew="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,k5={},H_=j5,kma=Fj;k5=Wk;kma(Wk,H_);Wk.prototype.compile=function(b){return this.stylesheet(b)};Wk.prototype.stylesheet=function(b){return this.mapVisit(b.stylesheet.rules,"\n\n")};Wk.prototype.comment=function(b){return this.emit(this.indent()+"/*"+b.comment+"*/",b.position)};Wk.prototype.import=function(b){return this.emit("@import "+
b.import+";",b.position)};Wk.prototype.media=function(b){return this.emit("@media "+b.media,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Wk.prototype.document=function(b){return this.emit("@"+(b.vendor||"")+"document "+b.document,b.position)+this.emit("  {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Wk.prototype.charset=function(b){return this.emit("@charset "+b.charset+";",b.position)};Wk.prototype.namespace=
function(b){return this.emit("@namespace "+b.namespace+";",b.position)};Wk.prototype.supports=function(b){return this.emit("@supports "+b.supports,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Wk.prototype.keyframes=function(b){return this.emit("@"+(b.vendor||"")+"keyframes "+b.name,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.keyframes,"\n")+this.emit(this.indent(-1)+"}")};Wk.prototype.keyframe=function(b){var c=b.declarations;
return this.emit(this.indent())+this.emit(b.values.join(", "),b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(c,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")};Wk.prototype.page=function(b){var c=b.selectors.length?b.selectors.join(", ")+" ":"";return this.emit("@page "+c,b.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(b.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};Wk.prototype["font-face"]=function(b){return this.emit("@font-face ",b.position)+
this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(b.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};Wk.prototype.host=function(b){return this.emit("@host",b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Wk.prototype["custom-media"]=function(b){return this.emit("@custom-media "+b.name+" "+b.media+";",b.position)};Wk.prototype.rule=function(b){var c=this.indent(),l=b.declarations;return l.length?this.emit(b.selectors.map(function(a){return c+
a}).join(",\n"),b.position)+this.emit(" {\n")+this.emit(this.indent(1))+this.mapVisit(l,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):""};Wk.prototype.declaration=function(b){return this.emit(this.indent())+this.emit(b.property+": "+b.value,b.position)+this.emit(";")};Wk.prototype.indent=function(b){(this||Ew).level=(this||Ew).level||1;return null!=b?((this||Ew).level+=b,""):Array((this||Ew).level).join((this||Ew).indentation||"  ")};var lma=k5,VR={},l5=$g.Buffer;(function(b){var c=
function(l){return"function"===typeof l?l:"function"===typeof l5?function(a){return(new l5(a,"base64")).toString("binary")}:"object"===typeof b.base64js?function(a){a=b.base64js.b64ToByteArray(a);return Array.prototype.map.call(a,function(f){return String.fromCharCode(f)}).join("")}:function(){throw Error("You're probably in an old browser or an iOS webworker. It might help to include beatgammit's base64-js.");}}(b.atob);b.atob=c;VR&&(VR=c)})(window);var mma=VR,nma=/^xn--/,oma=/[^\0-\x7E]/,kba=/[\x2E\u3002\uFF0E\uFF61]/g,
jba={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Lt=Math.floor,WR=String.fromCharCode,m5=function(b,c){return b+22+75*(26>b)-((0!=c)<<5)},n5=function(b,c,l){var a=0;b=l?Lt(b/700):b>>1;for(b+=Lt(b/c);455<b;a+=36)b=Lt(b/35);return Lt(a+36*b/(b+38))},o5=function(b){var c=[],l=b.length,a=0,f=128,m=72,q=b.lastIndexOf("-");0>q&&(q=0);for(var r=0;r<q;++r)128<=b.charCodeAt(r)&&Ky("not-basic"),c.push(b.charCodeAt(r));
for(q=0<q?q+1:0;q<l;){r=a;for(var u=1,v=36;;v+=36){q>=l&&Ky("invalid-input");var y=10>(A=b.charCodeAt(q++))-48?A-22:26>A-65?A-65:26>A-97?A-97:36;(36<=y||y>Lt((2147483647-a)/u))&&Ky("overflow");a+=y*u;var z=v<=m?1:v>=m+26?26:v-m;if(y<z)break;y=36-z;u>Lt(2147483647/y)&&Ky("overflow");u*=y}u=c.length+1;m=n5(a-r,u,0==r);Lt(a/u)>2147483647-f&&Ky("overflow");f+=Lt(a/u);a%=u;c.splice(a++,0,f)}var A;return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(c))},p5=function(b){for(var c=[],l=(b=J_(b)).length,
a=128,f=0,m=72,q=$jscomp.makeIterator(b),r=q.next();!r.done;r=q.next()){var u=r.value;128>u&&c.push(WR(u))}for((u=q=c.length)&&c.push("-");u<l;){var v=2147483647,y=$jscomp.makeIterator(b);for(r=y.next();!r.done;r=y.next())r=r.value,r>=a&&r<v&&(v=r);r=u+1;v-a>Lt((2147483647-f)/r)&&Ky("overflow");f+=(v-a)*r;a=v;v=$jscomp.makeIterator(b);for(y=v.next();!y.done;y=v.next())if(y=y.value,y<a&&2147483647<++f&&Ky("overflow"),y==a){var z=f;for(y=36;;y+=36){var A=y<=m?1:y>=m+26?26:y-m;if(z<A)break;z-=A;var C=
36-A;c.push(WR(m5(A+z%C,0)));z=Lt(z/C)}c.push(WR(m5(z,0)));m=n5(f,r,u==q);f=0;++u}++f;++a}return c.join("")},pma={version:"2.1.0",ucs2:{decode:J_,encode:function(b){return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(b))}},decode:o5,encode:p5,toASCII:function(b){return I_(b,function(c){return oma.test(c)?"xn--"+p5(c):c})},toUnicode:function(b){return I_(b,function(c){return nma.test(c)?o5(c.slice(4).toLowerCase()):c})}},XE=function(b){switch(typeof b){case "string":return b;case "boolean":return b?
"true":"false";case "number":return isFinite(b)?b:"";default:return""}},Az={};Az.decode=Az.parse=function(b,c,l,a){l=l||"=";var f={};if("string"!=typeof b||0===b.length)return f;var m=/\+/g;b=b.split(c||"&");c=1E3;a&&"number"==typeof a.maxKeys&&(c=a.maxKeys);a=b.length;0<c&&a>c&&(a=c);for(c=0;c<a;++c){var q,r;var u=b[c].replace(m,"%20");var v=u.indexOf(l);0<=v?(q=u.substr(0,v),r=u.substr(v+1)):(q=u,r="");u=decodeURIComponent(q);v=decodeURIComponent(r);Object.prototype.hasOwnProperty.call(f,u)?Array.isArray(f[u])?
f[u].push(v):f[u]=[f[u],v]:f[u]=v}return f};Az.encode=Az.stringify=function(b,c,l,a){return c=c||"&",l=l||"=",null===b&&(b=void 0),"object"==typeof b?Object.keys(b).map(function(f){var m=encodeURIComponent(XE(f))+l;return Array.isArray(b[f])?b[f].map(function(q){return m+encodeURIComponent(XE(q))}).join(c):m+encodeURIComponent(XE(b[f]))}).join(c):a?encodeURIComponent(XE(a))+l+encodeURIComponent(XE(b)):""};var PB={},pt={isString:function(b){return"string"==typeof b},isObject:function(b){return"object"==
typeof b&&null!==b},isNull:function(b){return null===b},isNullOrUndefined:function(b){return null==b}};PB.parse=BD;PB.resolve=function(b,c){return BD(b,!1,!0).resolve(c)};PB.resolveObject=function(b,c){return b?BD(b,!1,!0).resolveObject(c):c};PB.format=function(b){pt.isString(b)&&(b=BD(b));return b instanceof mq?b.format():mq.prototype.format.call(b)};PB.Url=mq;var qma=/^([a-z0-9.+-]+:)/i,rma=/:[0-9]*$/,sma=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,tma="{}|\\^`".split("").concat('<>"` \r\n\t'.split("")),
YR=["'"].concat(tma),q5=["%","/","?",";","#"].concat(YR),r5=["/","?","#"],s5=/^[+a-z0-9A-Z_-]{0,63}$/,uma=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,vma={javascript:!0,"javascript:":!0},ZR={javascript:!0,"javascript:":!0},QB={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};mq.prototype.parse=function(b,c,l){if(!pt.isString(b))throw new TypeError("Parameter 'url' must be a string, not "+typeof b);var a=b.indexOf("?");a=-1!==a&&a<b.indexOf("#")?"?":"#";b=b.split(a);
b[0]=b[0].replace(/\\/g,"/");a=b=b.join(a);if(a=a.trim(),!l&&1===b.split("#").length)if(b=sma.exec(a))return this.path=a,this.href=a,this.pathname=b[1],b[2]?(this.search=b[2],this.query=c?Az.parse(this.search.substr(1)):this.search.substr(1)):c&&(this.search="",this.query={}),this;if(b=qma.exec(a)){var f=(b=b[0]).toLowerCase();this.protocol=f;a=a.substr(b.length)}if(l||b||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var m="//"===a.substr(0,2);!m||b&&ZR[b]||(a=a.substr(2),this.slashes=!0)}if(!ZR[b]&&(m||b&&!QB[b])){var q,
r;m=-1;for(l=0;l<r5.length;l++)-1!==(u=a.indexOf(r5[l]))&&(-1===m||u<m)&&(m=u);-1!==(r=-1===m?a.lastIndexOf("@"):a.lastIndexOf("@",m))&&(q=a.slice(0,r),a=a.slice(r+1),this.auth=decodeURIComponent(q));m=-1;for(l=0;l<q5.length;l++){var u;-1!==(u=a.indexOf(q5[l]))&&(-1===m||u<m)&&(m=u)}-1===m&&(m=a.length);this.host=a.slice(0,m);a=a.slice(m);this.parseHost();this.hostname=this.hostname||"";q="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!q)for(m=this.hostname.split(/\./),r=(l=
0,m.length);l<r;l++)if((u=m[l])&&!u.match(s5)){b="";for(var v=0,y=u.length;v<y;v++)127<u.charCodeAt(v)?b+="x":b+=u[v];if(!b.match(s5)){r=m.slice(0,l);l=m.slice(l+1);(u=u.match(uma))&&(r.push(u[1]),l.unshift(u[2]));l.length&&(a="/"+l.join(".")+a);this.hostname=r.join(".");break}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase();q||(this.hostname=pma.toASCII(this.hostname));l=this.port?":"+this.port:"";this.host=(this.hostname||"")+l;this.href+=this.host;q&&(this.hostname=
this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!vma[f])for(l=0,r=YR.length;l<r;l++)q=YR[l],-1!==a.indexOf(q)&&(u=encodeURIComponent(q),u===q&&(u=escape(q)),a=a.split(q).join(u));l=a.indexOf("#");-1!==l&&(this.hash=a.substr(l),a=a.slice(0,l));l=a.indexOf("?");if(-1!==l?(this.search=a.substr(l),this.query=a.substr(l+1),c&&(this.query=Az.parse(this.query)),a=a.slice(0,l)):c&&(this.search="",this.query={}),a&&(this.pathname=a),QB[f]&&this.hostname&&!this.pathname&&(this.pathname=
"/"),this.pathname||this.search)l=this.pathname||"",this.path=l+(this.search||"");return this.href=this.format(),this};mq.prototype.format=function(){var b=this.auth||"";b&&(b=(b=encodeURIComponent(b)).replace(/%3A/i,":"),b+="@");var c=this.protocol||"",l=this.pathname||"",a=this.hash||"",f=!1,m="";this.host?f=b+this.host:this.hostname&&(f=b+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(f+=":"+this.port));this.query&&pt.isObject(this.query)&&Object.keys(this.query).length&&
(m=Az.stringify(this.query));b=this.search||m&&"?"+m||"";return c&&":"!==c.substr(-1)&&(c+=":"),this.slashes||(!c||QB[c])&&!1!==f?(f="//"+(f||""),l&&"/"!==l.charAt(0)&&(l="/"+l)):f||(f=""),a&&"#"!==a.charAt(0)&&(a="#"+a),b&&"?"!==b.charAt(0)&&(b="?"+b),c+f+(l=l.replace(/[?#]/g,function(q){return encodeURIComponent(q)}))+(b=b.replace("#","%23"))+a};mq.prototype.resolve=function(b){return this.resolveObject(BD(b,!1,!0)).format()};mq.prototype.resolveObject=function(b){if(pt.isString(b)){var c=new mq;
c.parse(b,!1,!0);b=c}c=new mq;for(var l=Object.keys(this),a=0;a<l.length;a++){var f=l[a];c[f]=this[f]}if(c.hash=b.hash,""===b.href)return c.href=c.format(),c;if(b.slashes&&!b.protocol){var m=Object.keys(b);for(l=0;l<m.length;l++)a=m[l],"protocol"!==a&&(c[a]=b[a]);return QB[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(b.protocol&&b.protocol!==c.protocol){if(!QB[b.protocol]){m=Object.keys(b);for(l=0;l<m.length;l++)a=m[l],c[a]=b[a];return c.href=c.format(),c}if(c.protocol=
b.protocol,b.host||ZR[b.protocol])c.pathname=b.pathname;else{for(var q=(b.pathname||"").split("/");q.length&&!(b.host=q.shift()););b.host||(b.host="");b.hostname||(b.hostname="");""!==q[0]&&q.unshift("");2>q.length&&q.unshift("");c.pathname=q.join("/")}if(c.search=b.search,c.query=b.query,c.host=b.host||"",c.auth=b.auth,c.hostname=b.hostname||b.host,c.port=b.port,c.pathname||c.search)c.path=(c.pathname||"")+(c.search||"");return c.slashes=c.slashes||b.slashes,c.href=c.format(),c}l=c.pathname&&"/"===
c.pathname.charAt(0);var r=b.host||b.pathname&&"/"===b.pathname.charAt(0),u=l=r||l||c.host&&b.pathname;a=c.pathname&&c.pathname.split("/")||[];f=(q=b.pathname&&b.pathname.split("/")||[],c.protocol&&!QB[c.protocol]);if(f&&(c.hostname="",c.port=null,c.host&&(""===a[0]?a[0]=c.host:a.unshift(c.host)),c.host="",b.protocol&&(b.hostname=null,b.port=null,b.host&&(""===q[0]?q[0]=b.host:q.unshift(b.host)),b.host=null),l=l&&(""===q[0]||""===a[0])),r)c.host=b.host||""===b.host?b.host:c.host,c.hostname=b.hostname||
""===b.hostname?b.hostname:c.hostname,c.search=b.search,c.query=b.query,a=q;else if(q.length)a||(a=[]),a.pop(),a=a.concat(q),c.search=b.search,c.query=b.query;else if(!pt.isNullOrUndefined(b.search))return f&&(c.hostname=c.host=a.shift(),(m=!!(c.host&&0<c.host.indexOf("@"))&&c.host.split("@"))&&(c.auth=m.shift(),c.host=c.hostname=m.shift())),c.search=b.search,c.query=b.query,pt.isNull(c.pathname)&&pt.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c;
if(!a.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;r=a.slice(-1)[0];q=(c.host||b.host||1<a.length)&&("."===r||".."===r)||""===r;for(var v=0,y=a.length;0<=y;y--)"."===(r=a[y])?a.splice(y,1):".."===r?(a.splice(y,1),v++):v&&(a.splice(y,1),v--);if(!l&&!u)for(;v--;v)a.unshift("..");!l||""===a[0]||a[0]&&"/"===a[0].charAt(0)||a.unshift("");q&&"/"!==a.join("/").substr(-1)&&a.push("");u=""===a[0]||a[0]&&"/"===a[0].charAt(0);f&&(c.hostname=c.host=u?"":a.length?
a.shift():"",(m=!!(c.host&&0<c.host.indexOf("@"))&&c.host.split("@"))&&(c.auth=m.shift(),c.host=c.hostname=m.shift()));return(l||c.host&&a.length)&&!u&&a.unshift(""),a.length?c.pathname=a.join("/"):(c.pathname=null,c.path=null),pt.isNull(c.pathname)&&pt.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=b.auth||c.auth,c.slashes=c.slashes||b.slashes,c.href=c.format(),c};mq.prototype.parseHost=function(){var b=this.host,c=rma.exec(b);c&&(":"!==(c=c[0])&&(this.port=c.substr(1)),
b=b.substr(0,b.length-c.length));b&&(this.hostname=b)};var wma=Nh,YE={resolve:function(){for(var b,c="",l=!1,a=arguments.length-1;-1<=a&&!l;a--){var f;0<=a?f=arguments[a]:(void 0===b&&(b=wma.cwd()),f=b);qt(f);0!==f.length&&(c=f+"/"+c,l=47===f.charCodeAt(0))}return c=K_(c,!l),l?0<c.length?"/"+c:"/":0<c.length?c:"."},normalize:function(b){if(qt(b),0===b.length)return".";var c=47===b.charCodeAt(0),l=47===b.charCodeAt(b.length-1);return 0!==(b=K_(b,!c)).length||c||(b="."),0<b.length&&l&&(b+="/"),c?"/"+
b:b},isAbsolute:function(b){return qt(b),0<b.length&&47===b.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var b,c=0;c<arguments.length;++c){var l=arguments[c];qt(l);0<l.length&&(void 0===b?b=l:b+="/"+l)}return void 0===b?".":YE.normalize(b)},relative:function(b,c){if((qt(b),qt(c),b===c)||(b=YE.resolve(b))===(c=YE.resolve(c)))return"";for(var l=1;l<b.length&&47===b.charCodeAt(l);++l);for(var a=b.length,f=a-l,m=1;m<c.length&&47===c.charCodeAt(m);++m);for(var q=c.length-m,r=f<
q?f:q,u=-1,v=0;v<=r;++v){if(v===r){if(q>r){if(47===c.charCodeAt(m+v))return c.slice(m+v+1);if(0===v)return c.slice(m+v)}else f>r&&(47===b.charCodeAt(l+v)?u=v:0===v&&(u=0));break}var y=b.charCodeAt(l+v);if(y!==c.charCodeAt(m+v))break;47===y&&(u=v)}f="";for(v=l+u+1;v<=a;++v)v!==a&&47!==b.charCodeAt(v)||(0===f.length?f+="..":f+="/..");return 0<f.length?f+c.slice(m+u):(m+=u,47===c.charCodeAt(m)&&++m,c.slice(m))},_makeLong:function(b){return b},dirname:function(b){if(qt(b),0===b.length)return".";for(var c=
47===b.charCodeAt(0),l=-1,a=!0,f=b.length-1;1<=f;--f)if(47===b.charCodeAt(f)){if(!a){l=f;break}}else a=!1;return-1===l?c?"/":".":c&&1===l?"//":b.slice(0,l)},basename:function(b,c){if(void 0!==c&&"string"!=typeof c)throw new TypeError('"ext" argument must be a string');qt(b);var l,a=0,f=-1,m=!0;if(void 0!==c&&0<c.length&&c.length<=b.length){if(c.length===b.length&&c===b)return"";var q=c.length-1,r=-1;for(l=b.length-1;0<=l;--l){var u=b.charCodeAt(l);if(47===u){if(!m){a=l+1;break}}else-1===r&&(m=!1,
r=l+1),0<=q&&(u===c.charCodeAt(q)?-1==--q&&(f=l):(q=-1,f=r))}return a===f?f=r:-1===f&&(f=b.length),b.slice(a,f)}for(l=b.length-1;0<=l;--l)if(47===b.charCodeAt(l)){if(!m){a=l+1;break}}else-1===f&&(m=!1,f=l+1);return-1===f?"":b.slice(a,f)},extname:function(b){qt(b);for(var c=-1,l=0,a=-1,f=!0,m=0,q=b.length-1;0<=q;--q){var r=b.charCodeAt(q);if(47!==r)-1===a&&(f=!1,a=q+1),46===r?-1===c?c=q:1!==m&&(m=1):-1!==c&&(m=-1);else if(!f){l=q+1;break}}return-1===c||-1===a||0===m||1===m&&c===a-1&&c===l+1?"":b.slice(c,
a)},format:function(b){if(null===b||"object"!=typeof b)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof b);var c=b.dir||b.root,l=b.base||(b.name||"")+(b.ext||"");return c?c===b.root?c+l:c+"/"+l:l},parse:function(b){qt(b);var c={root:"",dir:"",base:"",ext:"",name:""};if(0===b.length)return c;var l,a=b.charCodeAt(0),f=47===a;f?(c.root="/",l=1):l=0;for(var m=-1,q=0,r=-1,u=!0,v=b.length-1,y=0;v>=l;--v)if(47!==(a=b.charCodeAt(v)))-1===r&&(u=!1,r=v+1),46===a?
-1===m?m=v:1!==y&&(y=1):-1!==m&&(y=-1);else if(!u){q=v+1;break}return-1===m||-1===r||0===y||1===y&&m===r-1&&m===q+1?-1!==r&&(c.base=c.name=0===q&&f?b.slice(1,r):b.slice(q,r)):(0===q&&f?(c.name=b.slice(1,m),c.base=b.slice(1,r)):(c.name=b.slice(q,m),c.base=b.slice(q,r)),c.ext=b.slice(m,r)),0<q?c.dir=b.slice(0,q-1):f&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null},$R=YE.posix=YE,t5={},u5=/%[a-f0-9]{2}/gi,v5=/(%[a-f0-9]{2})+/gi;t5=function(b){if("string"!==typeof b)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+
typeof b+"`");try{return b=b.replace(/\+/g," "),decodeURIComponent(b)}catch(q){for(var c={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},l=v5.exec(b);l;){try{c[l[0]]=decodeURIComponent(l[0])}catch(r){var a=l[0];try{var f=decodeURIComponent(a)}catch(u){f=a.match(u5);for(var m=1;m<f.length;m++)a=KO(f,m).join(""),f=a.match(u5);f=a}f!==l[0]&&(c[l[0]]=f)}l=v5.exec(b)}c["%C2"]="\ufffd";l=Object.keys(c);for(a=0;a<l.length;a++)f=l[a],b=b.replace(new RegExp(f,"g"),c[f]);return b}};var xma={},oba=Nh,Q_=mma,
lba=PB,mba=$R,nba=t5,w5=/[#@] sourceMappingURL=([^\s'"]*)/,pba=RegExp("(?:/\\*(?:\\s*\r?\n(?://)?)?(?:"+w5.source+")\\s*\\*/|//(?:"+w5.source+"))\\s*"),qba=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,rba=/^(?:application|text)\/json$/,sba="utf-8",tba=/\/?$/,yma=xma={resolveSourceMap:N_,resolveSourceMapSync:P_,resolveSources:R_,resolveSourcesSync:T_,resolve:function(b,c,l,a,f){function m(r){R_(r.map,r.sourcesRelativeTo,l,a,function(u,v){if(u)return f(u);r.sourcesResolved=v.sourcesResolved;r.sourcesContent=
v.sourcesContent;f(null,r)})}"function"===typeof a&&(f=a,a={});if(null===b){var q={sourceMappingURL:null,url:c,sourcesRelativeTo:c,map:null};b=CD(c);l(b,function(r,u){if(r)return r.sourceMapData=q,f(r);q.map=String(u);try{q.map=bB(q.map,q)}catch(v){return f(v)}m(q)})}else N_(b,c,l,function(r,u){if(r)return f(r);if(!u)return f(null,null);m(u)})},resolveSync:function(b,c,l,a){if(null===b)b={sourceMappingURL:null,url:c,sourcesRelativeTo:c,map:null},b.map=M_(l,c,b),b.map=bB(b.map,b);else if(b=P_(b,c,
l),!b)return null;c=T_(b.map,b.sourcesRelativeTo,l,a);b.sourcesResolved=c.sourcesResolved;b.sourcesContent=c.sourcesContent;return b},parseMapToJSON:bB},zma=function(){throw Error("Node.js fs module is not supported by jspm core"+("undefined"!=typeof Deno?". Deno support here is tracking in https://github.com/jspm/jspm-core/issues/4, +1's are appreciated!":" in the browser"));},MO="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,x5={},U_=j5,Ama=Fj;x5=$l;Ama($l,U_);
$l.prototype.compile=function(b){return b.stylesheet.rules.map((this||MO).visit,this||MO).join("")};$l.prototype.comment=function(b){return this.emit("",b.position)};$l.prototype.import=function(b){return this.emit("@import "+b.import+";",b.position)};$l.prototype.media=function(b){return this.emit("@media "+b.media,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};$l.prototype.document=function(b){return this.emit("@"+(b.vendor||"")+"document "+b.document,b.position)+this.emit("{")+
this.mapVisit(b.rules)+this.emit("}")};$l.prototype.charset=function(b){return this.emit("@charset "+b.charset+";",b.position)};$l.prototype.namespace=function(b){return this.emit("@namespace "+b.namespace+";",b.position)};$l.prototype.supports=function(b){return this.emit("@supports "+b.supports,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};$l.prototype.keyframes=function(b){return this.emit("@"+(b.vendor||"")+"keyframes "+b.name,b.position)+this.emit("{")+this.mapVisit(b.keyframes)+
this.emit("}")};$l.prototype.keyframe=function(b){var c=b.declarations;return this.emit(b.values.join(","),b.position)+this.emit("{")+this.mapVisit(c)+this.emit("}")};$l.prototype.page=function(b){var c=b.selectors.length?b.selectors.join(", "):"";return this.emit("@page "+c,b.position)+this.emit("{")+this.mapVisit(b.declarations)+this.emit("}")};$l.prototype["font-face"]=function(b){return this.emit("@font-face",b.position)+this.emit("{")+this.mapVisit(b.declarations)+this.emit("}")};$l.prototype.host=
function(b){return this.emit("@host",b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};$l.prototype["custom-media"]=function(b){return this.emit("@custom-media "+b.name+" "+b.media+";",b.position)};$l.prototype.rule=function(b){var c=b.declarations;return c.length?this.emit(b.selectors.join(","),b.position)+this.emit("{")+this.mapVisit(c)+this.emit("}"):""};$l.prototype.declaration=function(b){return this.emit(b.property+":"+b.value,b.position)+this.emit(";")};var Bma=x5,Jn="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof self?self:global,sv={};sv=function(b){b._comment=b.comment;b.map=new lm;b.position={line:1,column:1};b.files={};for(var c in sv)b[c]=sv[c]};var y5=function(b){return"\\"===$R.sep?b.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):b};sv.updatePosition=function(b){var c=b.match(/\n/g);c&&((this||Jn).position.line+=c.length);c=b.lastIndexOf("\n");(this||Jn).position.column=~c?b.length-c:(this||Jn).position.column+b.length};sv.emit=function(b,c){if(c){var l=
y5(c.source||"source.css");(this||Jn).map.addMapping({source:l,generated:{line:(this||Jn).position.line,column:Math.max((this||Jn).position.column-1,0)},original:{line:c.start.line,column:c.start.column-1}});this.addFile(l,c)}this.updatePosition(b);return b};sv.addFile=function(b,c){"string"!==typeof c.content||Object.prototype.hasOwnProperty.call((this||Jn).files,b)||((this||Jn).files[b]=c.content)};sv.applySourceMaps=function(){Object.keys((this||Jn).files).forEach(function(b){var c=(this||Jn).files[b];
(this||Jn).map.setSourceContent(b,c);if(!1!==(this||Jn).options.inputSourcemaps&&(c=yma.resolveSync(c,b,zma))){var l=new Zh(c.map);(this||Jn).map.applySourceMap(l,b,y5($R.dirname(c.sourcesRelativeTo)))}},this||Jn)};sv.comment=function(b){return/^# sourceMappingURL=/.test(b.comment)?this.emit("",b.position):this._comment(b)};var Cma=sv,Dma={},Ema=Dma=function(b,c){c=c||{};var l=c.compress?new Bma(c):new lma(c);return c.sourcemap?(Cma(l),b=l.compile(b),l.applySourceMaps(),c="generator"===c.sourcemap?
l.map:l.map.toJSON(),{code:b,map:c}):b=l.compile(b)},aS={};aS.parse=jma;aS.stringify=Ema;var Sh=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js");Sh.obj=lf;Sh.promise=Kf;Sh.string=Hg;Sh.pt=fh;Sh.Morph=Hj;Sh.vdom=dE;Sh.addOrChangeCSSDeclaration=nc;Sh.css=aS;var IK=Sh.vdom;Sh.diff=IK.diff;Sh.patch=IK.patch;Sh.h=IK.h;Sh.createElement=IK.create;(function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),l=c.hasOwnProperty("CustomVNode")&&"function"===typeof c.CustomVNode?
c.CustomVNode:c.CustomVNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){this.morph=a;this.renderer=f;this.morphVtree=null;this.key="custom-"+a.id}},{key:"type",get:function(){return"Widget"}},{key:"renderMorph",value:function(){var a=this.morph,f=this.morphVtree=this.renderer.renderMorph(a),m="customNode-key-"+a.id;f.children[0]&&f.children[0].key===
m||f.children.unshift(Sh.h(a.domNodeTagName||"div",{key:m},[]));a._updateCSSDeclaration&&(a.ensureCSSDeclaration(),a._updateCSSDeclaration=!1);return f}},{key:"init",value:function(){var a=Sh.createElement(this.renderMorph(),this.renderer.domEnvironment);a.childNodes[0].appendChild(this.morph.domNode);this.morph.cssDeclaration&&this.morph.ensureCSSDeclaration();return a}},{key:"update",value:function(a,f){a=a.morphVtree||this.renderMorph();var m=this.renderMorph();a=Sh.diff(a,m);Sh.patch(f,a);return null}},
{key:"destroy",value:function(a){(a=this.renderer.domEnvironment.document.getElementById("css-for-"+this.morph.id))&&a.remove();console.log("[HTMLMorph] node of "+this.morph.name+" gets removed from DOM")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CustomVNode"}}],c,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:426,end:2427})})(void 0);var lx=ya("ay",function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),l=c.hasOwnProperty("HTMLMorph")&&"function"===typeof c.HTMLMorph?c.HTMLMorph:c.HTMLMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"isHTMLMorph",get:function(){return!0}},{key:"ensureCSSDeclaration",value:function(){var a=this;try{var f=Sh.css.parse(this.cssDeclaration);
this.whenRendered().then(function(){f.stylesheet.rules.forEach(function(m){m.selectors&&(m.selectors=m.selectors.map(function(q){return"#"+a.id+" "+q}))});Sh.addOrChangeCSSDeclaration("css-for-"+a.id,Sh.css.stringify(f))})}catch(m){console.error("Error setting cssDeclaration of "+this+": "+m)}}},{key:"defaultHTML",get:function(){return'\n<div style="display: flex;\n            align-items: center;\n            justify-content: center;\n            height: 100%;\n            background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n  <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;HTML&#x2F;&gt;</p>\n</div>'}},
{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return new Sh.CustomVNode(this,a)}},{key:"menuItems",value:function(){var a=this,f=Nb._get(Object.getPrototypeOf(l.prototype),"menuItems",this).call(this);f.unshift(["edit CSS...",function(){return a.world().execCommand("open workspace",{language:"css",content:a.cssDeclaration,target:a})}],["edit html...",function(){return a.world().execCommand("open workspace",{language:"html",
content:a.html,target:a})}],{isDivider:!0});return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HTMLMorph"}},{key:"properties",get:function(){return{extent:{defaultValue:Sh.pt(420,330)},html:{after:["cssDeclaration"],isStyleProp:!0,initialize:function(){this.html=this.defaultHTML},get:function(){return this.domNode.innerHTML},set:function(a){this.domNode.innerHTML=a;if(this.master)this.master.onMorphChange(this,{prop:"html",value:a});if(a.includes("<script")){a=this.domNode.querySelectorAll("script");
a=$jscomp.makeIterator(a);for(var f=a.next();!f.done;f=a.next()){var m=f.value;f=m.parentNode;m.remove();for(var q=document.createElement("script"),r=$jscomp.makeIterator(m.attributes),u=r.next();!u.done;u=r.next())u=u.value,q.setAttribute(u.name,u.value);m=$jscomp.makeIterator(m.childNodes);for(r=m.next();!r.done;r=m.next())q.appendChild(r.value);f.appendChild(q)}}}},domNodeTagName:{readOnly:!0,get:function(){return"div"}},domNodeStyle:{readOnly:!0,get:function(){return"position: absolute; width: 100%; height: 100%;"}},
domNode:{derived:!0,get:function(){this._domNode||(this._domNode=this.document.createElement(this.domNodeTagName),this._domNode.setAttribute("style",this.domNodeStyle));return this._domNode},set:function(a){this.domNode.parentNode&&this.domNode.parentNode.replaceChild(a,this.domNode);return this._domNode=a}},document:{readOnly:!0,get:function(){return this.env.domEnv.document}},scrollExtent:{readOnly:!0,get:function(){return Sh.pt(this.domNode.scrollWidth,this.domNode.scrollHeight)}},cssDeclaration:{isStyleProp:!0,
set:function(a){this.setProperty("cssDeclaration",a);a?(this.makeDirty(),this._updateCSSDeclaration=!0):(a=this.env.domEnv.document.getElementById("css-for-"+this.id))&&a.remove()}}}}}],c,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2752,end:7055})}(Sh.Morph));Sh.HTMLMorph=lx;Sh.HTMLMorph=
lx;Sh.HTMLMorph=lx;var ZE=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),l=c.hasOwnProperty("IFrameMorph")&&"function"===typeof c.IFrameMorph?c.IFrameMorph:c.IFrameMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"isIFrameMorph",get:function(){return!0}},{key:"reload",value:function(){return this.src?this.loadURL(this.src):this.srcDoc?this.displayHTML(this.srcDoc):
null}},{key:"whenLoaded",value:function(){return this._whenLoaded||Promise.resolve()}},{key:"displayHTML",value:function(a,f){f=void 0===f?{}:f;var m=this,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){q=f;if(r=void 0===q.keepScroll?!0:q.keepScroll)u=m.iframeScroll;m.srcDoc=a;return v.yield(m.whenLoaded(),2)}r&&u&&(m.iframeScroll=u);return v.return(m)})}},{key:"loadURL",value:function(a,f){f=void 0===f?{}:f;var m=this,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==
v.nextAddress){q=f;if(r=void 0===q.keepScroll?!0:q.keepScroll)u=m.iframeScroll;m.src=a;return v.yield(m.whenLoaded(),2)}r&&u&&(m.iframeScroll=u);return v.return(m)})}},{key:"defaultSrcDoc",get:function(){return'\n    <div style="display: flex;\n                align-items: center;\n                justify-content: center;\n                height: 100%;\n                background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n      <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;iFrame&#x2F;&gt;</p>\n    </div>'}},
{key:"defaultHTML",get:function(){return'<iframe width="100%" height="100%" frameBorder="false" srcdoc=""></iframe>'}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"example",value:function(){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return a=(new Sh.IFrameMorph).openInWindow({title:"iframe"}).targetMorph,a.srcDoc="",a.src="http://localhost:9011/worlds/html%20export",f.yield(a.loadURL("https://google.com"),2);a.iframe.src;
a.iframe.srcDoc;a.src="";a.srcDoc="fooo";return f.yield(a.reload(),0)})}},{key:"properties",get:function(){return{html:{initialize:function(){this.html=this.defaultHTML;this.srcDoc=this.defaultSrcDoc}},iframe:{derived:!0,readOnly:!0,after:["domNode"],get:function(){return this.domNode.querySelector("iframe")}},src:{derived:!0,after:["iframe"],get:function(){return this.iframe.src},set:function(a){this.iframe.removeAttribute("srcDoc");this.iframe.src=a;var f=Sh.promise.deferred().resolve;this._whenLoaded=
Sh.promise;this.iframe.onload=function(m){return f(m)}}},srcDoc:{derived:!0,after:["iframe"],get:function(){return this.iframe.srcdoc},set:function(a){this.iframe.removeAttribute("src");this.iframe.srcdoc=a;this._whenLoaded=this.whenRendered().then(function(){return Sh.promise.delay(20)})}},iframeScroll:{derived:!0,after:["iframe"],get:function(){try{var a=this.iframe.contentWindow;return Sh.pt(a.scrollX,a.scrollY)}catch(f){return Sh.pt(0,0)}},set:function(a){try{this.iframe.contentWindow.scrollTo(a.x,
a.y)}catch(f){}}}}}}],c,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7064,end:10361})}(Sh.HTMLMorph);Sh.IFrameMorph=ZE;Sh.IFrameMorph=ZE;Sh.IFrameMorph=ZE;var Fma=Object.freeze({__proto__:null,HTMLMorph:lx,IFrameMorph:ZE}),bk=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js");
bk.arr=Te;bk.obj=lf;bk.rect=Gk;bk.ShadowObject=wq;bk.morph=Gc;var Mt=ya("aZ",function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js"),l=c.hasOwnProperty("StyleSheet")&&"function"===typeof c.StyleSheet?c.StyleSheet:c.StyleSheet=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){bk.obj.isObject(a)&&!f&&(f=a,a=null);
this.rules=f;for(var m in f)f[m]=this.unwrapFoldedProps(f[m]);this.name=a}},{key:"copy",value:function(){var a={},f;for(f in this.rules)a[f]=Object.assign({},this.rules[f]);return new bk.StyleSheet(this.name,a)}},{key:"__only_serialize__",get:function(){return["rules","context"]}},{key:"context",set:function(a){this._context=a}},{key:"context",get:function(){return this._context}},{key:"unwrapFoldedProps",value:function(a){["borderRadius","borderWidth","borderColor","borderStyle"].forEach(function(f){if(f in
a){var m=a[f];m||(m=0);a[f]=4==bk.arr.intersect(bk.obj.keys(m),["top","left","bottom","right"]).length?m:{top:m,bottom:m,right:m,left:m,valueOf:function(){return m}}}});return a}},{key:"removeRule",value:function(a){delete this.rules[a];this.context.requestStyling()}},{key:"setRule",value:function(a,f){this.rules[a]=this.unwrapFoldedProps(f);this.context.requestStyling()}},{key:"toggleRule",value:function(a,f){this.rules[a]._deactivated=!f;this.context.requestStyling()}},{key:"applicableRules",value:function(){var a=
{},f;for(f in this.rules)a[f]={styleSheet:this,rule:f};return a}},{key:"toJSExpr",value:function(){return"new StyleSheet("+bk.obj.inspect(this.rules,{customPrinter:function(a,f,m){return a&&a.isColor||a&&a.isGradient?a.toJSExpr():a&&a.isPoint?a.toString():a&&bk.arr.all([a.top,a.left,a.right,a.bottom],function(q){return q&&bk.obj.equals(q,a.top)})?m(a.top):a&&bk.obj.keys(a).includes("_rev")?m(bk.obj.dissoc(a,["_rev","_deactivated"])):f},escapeKeys:!0})+")"}},{key:"applyRule",value:function(a,f,m){var q=
this.rules[a];if(q._deactivated)return{};q=bk.obj.dissoc(q,["_deactivated"]);return f.withMetaDo({styleSheetChange:!0},function(){if("layout"in q){var r=q.layout.copy();r.container=f;q.layout=r}"dropShadow"in q&&(q.dropShadow=new bk.ShadowObject(q.dropShadow),q.dropShadow.morph=f);"padding"in q&&(q.padding=q.padding.isRect?q.padding:bk.rect(q.padding,q.padding));r=bk.obj.keys(q).filter(function(z){return!bk.obj.equals(f[z],q[z])});r=bk.obj.select(q,r);var u=f.propertiesAndPropertySettings().properties,
v={},y;for(y in q)v[y]=u[y]&&u[y].defaultValue||f[y];m?f.animate(Object.assign({},r,{duration:m.duration,easing:m.easing})):Object.assign(f,r);return v})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleSheet"}}],c,{pathInPackage:function(){return"style-sheets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:203,
end:3712})}(void 0));bk.StyleSheet=Mt;bk.StyleSheet=Mt;bk.StyleSheet=Mt;var Mf=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js");Mf.obj=lf;Mf.arr=Te;Mf.num=wk;Mf.Rectangle=Pd;Mf.rect=Gk;Mf.Color=wf;Mf.pt=fh;Mf.connect=uk;Mf.noUpdate=jj;Mf.signal=hk;Mf.disconnect=Sp;Mf.Text=hs;Mf.Range=kx;Mf.HTMLMorph=lx;Mf.Icon=En;Mf.morph=Gc;var bS=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),l=c.hasOwnProperty("InputLine")&&"function"===typeof c.InputLine?
c.InputLine:c.InputLine=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);Mf.connect(this,"textChange",this,"onInputChanged");Mf.connect(this,"selectionChange",this,"fixCursor")}},{key:"menuItems",value:function(){var a=this,
f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==u.nextAddress?(f=[{command:"change placeholder",target:a},{isDivider:!0}],m=f.concat,q=$jscomp,r=q.arrayFromIterable,u.yield(Nb._get(Object.getPrototypeOf(l.prototype),"menuItems",a).call(a),2)):u.return(m.call(f,r.call(q,u.yieldResult)))})}},{key:"onChange",value:function(a){"extent fontSize padding fontFamily position selection".split(" ").includes(a.prop)&&this.updatePlaceholder();return Nb._get(Object.getPrototypeOf(l.prototype),
"onChange",this).call(this,a)}},{key:"isInputLine",get:function(){return!0}},{key:"allowDuplicatesInHistory",get:function(){return!1}},{key:"resetHistory",value:function(){this.inputHistory={items:[],max:50,index:0}}},{key:"inputHistory",get:function(){return this._inputHistory?this._inputHistory:this._inputHistory=this.historyId?this.constructor.getHistory(this.historyId):{items:[],max:30,index:0}}},{key:"inputHistory",set:function(a){this._inputHistory=a;this.historyId&&this.constructor.setHistory(this.historyId,
this._inputHistory)}},{key:"clear",value:function(){this.input=""}},{key:"focus",value:function(){this.fixCursor();Nb._get(Object.getPrototypeOf(l.prototype),"focus",this).call(this)}},{key:"onBlur",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onBlur",this).call(this,a);this.updatePlaceholder()}},{key:"fitToLineHeight",value:function(){this.height=this.defaultLineHeight+this.padding.top()+this.padding.bottom()}},{key:"indicateError",value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return f.borderWidth=3,f.borderColor=Mf.Color.red,f._errorIcon=f.addMorph(f._errorIcon||Mf.morph({type:"label",value:[" "+a,{fontSize:18}," ",{}].concat($jscomp.arrayFromIterable(Mf.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:20,fontColor:Mf.Color.red,opacity:0,reactsToPointer:!1,fill:Mf.Color.white.withA(.9)})),m.yield(f.whenRendered(),2);f._errorIcon.opacity=1;f._errorIcon.rightCenter=f.innerBounds().insetBy(10).rightCenter();m.jumpToEnd()})}},{key:"clearError",
value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=Mf.Color.transparent)}},{key:"updatePlaceholder",value:function(){var a=this.getSubmorphNamed("placeholder");if(a)if(this.input.length)a.visible=!1;else{var f=this.innerBounds();a.fontSize=this.fontSize;a.visible=!0;a.height=this.height;a.padding=this.padding;a.defaultTextStyle=this.defaultTextStyle;a.lineHeight=this.height+"px";a.fit();a.leftCenter=this.label.length?f.rightCenter().addXY(0,
this.borderWidth):f.leftCenter().withX(0)}}},{key:"fixCursor",value:function(){this.label&&(this.positionToIndex(this.selection.lead)<this.label.length&&(this.selection.lead=this.indexToPosition(this.label.length)),this.positionToIndex(this.selection.anchor)<this.label.length&&(this.selection.anchor=this.indexToPosition(this.label.length)))}},{key:"acceptInput",value:function(){var a=this.input;this.onInput(a);return a}},{key:"onInput",value:function(a){0<this.input.length&&this.addInputToHistory(this.input);
this.clearOnInput&&this.clear();Mf.signal(this,"inputAccepted",a)}},{key:"onInputChanged",value:function(a){Mf.signal(this,"inputChanged",a);this.clearError();this.updatePlaceholder()}},{key:"onMouseDown",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"deleteText",value:function(a){a=a.isRange?a:new Mf.Range(a);if(!a.isEmpty())return a=a.subtract({start:{row:0,column:0},end:{row:0,column:this.label.length}})[0],
Nb._get(Object.getPrototypeOf(l.prototype),"deleteText",this).call(this,a)}},{key:"addInputToHistory",value:function(a){var f=this.inputHistory,m=f.items;if(Mf.arr.last(m)!==a){m.push(a);m.length>f.max&&(f.items=m=m.slice(-f.max));f.index=m.length-1;if(!this.allowDuplicatesInHistory)for(m=f.items.length-1;m--;)f.items[m]===a&&(f.items.splice(m,1),f.index--);this.historyId&&this.constructor.addHistoryToLocalStorage(this.historyId,f)}}},{key:"browseHistory",value:function(){var a=this,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress)return f=a.inputHistory.items.map(function(v,y){return{isListItem:!0,string:v,value:y}}).reverse(),u.yield(a.world().filterableListPrompt("Choose item:",f,{commands:[a.histEditCommandForHistBrowse()]}),2);m=u.yieldResult;q=$jscomp.makeIterator(m.selected);r=q.next().value;"number"===typeof r&&a.setAndShowHistItem(r);a.focus();u.jumpToEnd()})}},{key:"histEditCommandForHistBrowse",value:function(){var a=this;return{name:"edit history "+this.historyId,exec:function(f){var m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==
v.nextAddress)return m=a.inputHistory.items.slice().reverse(),v.yield(f.world().editListPrompt("edit history "+a.historyId,m),2);q=v.yieldResult;r=q.status;u=q.list;if("canceled"===r)return v.return(!0);m=m.filter(function(y){return y.isListItem?u.includes(y.value):u.includes(y)});a.inputHistory=Object.assign({},a.inputHistory,{items:m});f.get("list").items=m.map(function(y,z){return{isListItem:!0,string:y,value:z}}).reverse();return v.return(!0)})}}}},{key:"setAndShowHistItem",value:function(a){var f=
this.inputHistory,m=f.items,q=m.length-1;Mf.num.between(a,0,q+1)?f.index=a:f.index=a=q;this.input!==m[a]&&"undefined"!==typeof m[a]&&(this.input=m[a])}},{key:"showHistItem",value:function(a){a=a||"next";var f=this.inputHistory,m=f.items,q=m.length-1,r=f.index;Mf.num.between(r,0,q+1)||(f.index=r=q);if(this.input!==m[r]&&"undefined"!==typeof m[r])this.input=m[r];else{if("next"===a){if(r>q)return;r=++f.index}else{if(0>=r)return;r=--f.index}this.input=m[r]||""}}},{key:"commands",get:function(){var a=
this;return[{name:"change placeholder",exec:function(){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(a.world().prompt("Enter Placeholder:",{input:a.placeholder}),2);if(f=m.yieldResult)a.placeholder=f;m.jumpToEnd()})}},{name:"accept input",exec:function(){a.acceptInput();return!0}},{name:"show previous input from history",exec:function(){a.showHistItem("prev");return!0}},{name:"show next input from history",exec:function(){a.showHistItem("next");
return!0}},{name:"browse history",exec:function(){a.browseHistory();return!0}},{name:"remove items from history",exec:function(f){var m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return m=f.inputHistory,q=m.items.map(function(y,z){return{isListItem:!0,string:y,value:z}}).reverse(),v.yield(f.world().filterableListPrompt("Choose items to delete:",q,{multiSelect:!0}),2);r=v.yieldResult;u=r.selected;Mf.arr.sort(u).reverse().forEach(function(y){y<m.index&&
m.index--;m.items.splice(y,1)});f.inputHistory=m;return v.return(!0)})}}].concat(Nb._get(Object.getPrototypeOf(l.prototype),"commands",this))}},{key:"keybindings",get:function(){return Nb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"},{keys:"Up|Ctrl-Up|Alt-P",command:"show previous input from history"},{keys:"Down|Ctrl-Down|Alt-N",command:"show next input from history"},{keys:"Alt-H",
command:"browse history"},{keys:"Alt-Shift-H",command:"remove items from history"}])}},{key:"htmlExport_transformNode",value:function(a){var f=a.ownerDocument.createElement("input"),m=a.querySelector(".newtext-text-layer.actual");f.id=a.id;f.className=a.className;f.style=a.style.cssText;Object.assign(f.style,Mf.obj.select(m.style,"padding font-family font-weight font-style text-decoration font-size color".split(" ")));f.placeholder=this.placeholder;f.type="text";f.autocomplete=f.name=this.name.replace(/[\s"]/g,
"-");return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InputLine"}},{key:"getHistoryFromLocalSorage",value:function(a){if("undefined"===typeof localStorage)return null;try{var f=localStorage.getItem("lively.morphic-inputline-"+a);return f?JSON.parse(f):null}catch(m){return null}}},{key:"addHistoryToLocalStorage",value:function(a,f){if("undefined"!==typeof localStorage)try{localStorage.setItem("lively.morphic-inputline-"+a,JSON.stringify(f))}catch(m){console.error(m)}}},{key:"histories",
get:function(){this._histories||(this._histories=new Map);return this._histories}},{key:"getHistory",value:function(a){var f=this.histories.get(a);if(f)return f;f=this.getHistoryFromLocalSorage(a)||{items:[],max:50,index:0};this.histories.set(a,f);return f}},{key:"setHistory",value:function(a,f){f=void 0===f?{items:[],max:50,index:0}:f;this.histories.set(a,f);this.addHistoryToLocalStorage(a,f);return f}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},
extent:{defaultValue:Mf.pt(100,20)},padding:{defaultValue:Mf.Rectangle.inset(2,4)},clipMode:{defaultValue:"hidden"},lineWrapping:{defaultValue:!1},historyId:{defaultValue:null},clearOnInput:{defaultValue:!1},label:{after:["textAndAttributes","extent","padding","submorphs"],defaultValue:"",set:function(a){var f=this;this.setProperty("label",a);this.textString.startsWith(a)||Mf.noUpdate(function(){f.textString=a+f.input})}},input:{after:["label"],derived:!0,get:function(){return this.textString.slice(this.label.length)},
set:function(a){this.textString=this.label+(a?String(a):"");this.updatePlaceholder()}},placeholder:{after:["submorphs","label","defaultTextStyle"],dervied:!0,get:function(){var a=this.getSubmorphNamed("placeholder");return a?a.value:null},set:function(a){var f=this.getSubmorphNamed("placeholder");a?f?(f.defaultTextStyle=Object.assign({},this.defaultTextStyle,{fontColor:Mf.Color.gray}),f.value=a):this.addMorph(Mf.Text.makeLabel(a,Object.assign({},this.defaultTextStyle,{name:"placeholder",reactsToPointer:!1,
fontColor:Mf.Color.gray}))):f&&f.remove();this.updatePlaceholder()}}}}}],c,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:466,end:14853})}(Mf.Text);bS=Mf.InputLine;var $E=ya("b2",bS),mx=function(b){var c=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),l=c.hasOwnProperty("PasswordInputLine")&&
"function"===typeof c.PasswordInputLine?c.PasswordInputLine:c.PasswordInputLine=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"onChange",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a);"borderRadius"==a.prop&&this.updateHtml(this.input)}},{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Nb._get(Object.getPrototypeOf(l.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this.onLoad()}},{key:"onChange",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a);["fill","borderRadius"].includes(a.prop)&&this.updateHtml(this.input)}},{key:"onLoad",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(a.whenRendered(),2);a.ensureInputNode().then(function(m){a.updateHtml(a.input);m.onkeydown=function(q){return a.env.eventDispatcher.dispatchDOMEvent(q,
a,"onKeyDown")};m.onkeyup=function(q){return a.env.eventDispatcher.dispatchDOMEvent(q,a,"onKeyUp")}});f.jumpToEnd()})}},{key:"onMouseDown",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"onAfterRender",value:function(a){this.ensureInputNode()}},{key:"ensureInputNode",value:function(){var a=this;return this.whenRendered().then(function(){var f=a.domNode;f.parentNode&&"INPUT"==f.parentNode.tagName&&(f.parentNode.remove(),
f=a.env.renderer.getNodeForMorph(a),f.insertBefore(a.domNode,f.firstChild));return a.domNode})}},{key:"onKeyDown",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onKeyDown",this).call(this,a);if(this.input!=this.lastInput)this.onInputChanged(this.input);this.lastInput=this.input}},{key:"focus",value:function(){Nb._get(Object.getPrototypeOf(l.prototype),"focus",this).call(this);this.domNode&&this.domNode.focus()}},{key:"onFocus",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),
"onFocus",this).call(this,a);this._originalShadow||(this._originalShadow=this.dropShadow,this.highlightWhenFocused&&this.animate({dropShadow:this.haloShadow,duration:200}))}},{key:"onBlur",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onBlur",this).call(this,a);this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null}},{key:"indicateError",value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return f.borderWidth=3,f.borderColor=Mf.Color.red,f._errorIcon=f.addMorph(f._errorIcon||Mf.morph({type:"label",value:[" "+a,{fontSize:18}," ",{}].concat($jscomp.arrayFromIterable(Mf.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:20,fontColor:Mf.Color.red,opacity:0,reactsToPointer:!1,fill:Mf.Color.white.withA(.9)})),m.yield(f.whenRendered(),2);f._errorIcon.opacity=1;f._errorIcon.rightCenter=f.innerBounds().insetBy(10).rightCenter();m.jumpToEnd()})}},{key:"clearError",
value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=Mf.Color.transparent)}},{key:"acceptInput",value:function(){var a=this.input;Mf.signal(this,"inputAccepted",a);return a}},{key:"onInputChanged",value:function(a){this.clearError();Mf.signal(this,"inputChanged",a)}},{key:"updateHtml",value:function(a){var f=this,m,q,r,u,v,y,z,A,C,G,F,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==L.nextAddress)return m=f,q=m.fontSize,
r=m.fontFamily,u=m.padding,v=m.placeholder,y=void 0===m.fill?wf.white:m.fill,z=m.borderRadius,A=u.top(),C=u.right(),G=u.bottom(),F=u.left(),L.yield(f.ensureInputNode(),2);N=L.yieldResult;N.setAttribute("type","password");N.setAttribute("placeholder",v);N.setAttribute("value",a);Object.assign(N.style,{position:"absolute",width:"calc(100% - "+F+"px - "+C+"px)","border-width":0,outline:"none","border-radius":z.valueOf()+"px",background:y.toString(),padding:A+"px "+C+"px "+G+"px "+F+"px","font-size":q+
"px","font-family":""+r});L.jumpToEnd()})}},{key:"commands",get:function(){var a=this;return[{name:"accept input",exec:function(){a.acceptInput();return!0}}].concat(Nb._get(Object.getPrototypeOf(l.prototype),"commands",this))}},{key:"keybindings",get:function(){return Nb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"}])}},{key:"htmlExport_transformNode",value:function(a){var f=a.ownerDocument,
m=f.createElement("div"),q=a.querySelector("input");f=f.createElement("input");q.childNodes[0]&&"INPUT"===q.childNodes[0].tagName&&(q=q.childNodes[0]);f.id=a.id;f.className=a.className;m.style=a.style.cssText;Object.assign(f.style,Mf.obj.select(q.style,"padding font-family font-weight font-style text-decoration font-size border-radius color".split(" ")));f.style.position="absolute";f.style.width=a.style.width;f.style.height=a.style.height;f.style["border-width"]=a.style["border-width"];f.placeholder=
this.placeholder;f.type="password";f.autocomplete=f.name=this.name.replace(/[\s"]/g,"-");m.appendChild(f);m.appendChild(a.childNodes[1]);return m}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PasswordInputLine"}},{key:"properties",get:function(){return{extent:{defaultValue:Mf.pt(100,20)},html:{derived:!0,initialize:function(){},get:function(){return""},set:function(a){}},highlightWhenFocused:{defaultValue:!0},haloShadow:{type:"Shadow"},domNodeTagName:{readOnly:!0,get:function(){return"input"}},
domNodeStyle:{readOnly:!0,get:function(){return"background: grey"}},input:{derived:!0,after:["domNode"],get:function(){return this.domNode&&this.domNode.value||""},set:function(a){this.domNode.value=a;this.updateHtml(this.input)}},placeholder:{after:["domNode"],set:function(a){this.setProperty("placeholder",a);this.updateHtml(this.input)}},fontSize:{defaultValue:12,after:["input"],set:function(a){this.setProperty("fontSize",a);this.updateHtml(this.input)}},fontFamily:{defaultValue:"sans-serif",after:["input"],
set:function(a){this.setProperty("fontFamily",a);this.updateHtml(this.input)}},padding:{defaultValue:Mf.Rectangle.inset(2),after:["input"],set:function(a){this.setProperty("padding",a);this.updateHtml(this.input)}}}}}],c,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14929,end:21857})}(Mf.HTMLMorph);
Mf.PasswordInputLine=mx;Mf.PasswordInputLine=mx;Mf.PasswordInputLine=mx;Mf.default=bS;var Ye=lively.FreezerRuntime.recorderFor("lively.morphic/index.js");Ye.default=nk;Ye.config=nk;Object.assign(Ye,$ka);Object.assign(Ye,bma);Object.assign(Ye,gma);Object.assign(Ye,hma);Object.assign(Ye,dma);Object.assign(Ye,Fma);Object.assign(Ye,Hfa);Object.assign(Ye,c5);Ye.StyleSheet=Mt;Ye.StyleSheet=Mt;Ye.ShadowObject=wq;Ye.ShadowObject=wq;Ye.addOrChangeCSSDeclaration=nc;Ye.addOrChangeCSSDeclaration=nc;Ye.addOrChangeLinkedCSS=
tr;Ye.addOrChangeLinkedCSS=tr;Ye.easings=yq;Ye.easings=yq;Ye.stringToEasing=$o;Ye.stringToEasing=$o;Object.assign(Ye,ala);Ye.Icon=En;Ye.Icon=En;Ye.loadMorphFromSnapshot=Us;Ye.loadMorphFromSnapshot=Us;Object.assign(Ye,bla);Ye.World=Zu;Ye.Hand=NB;Ye.Morph=Hj;Ye.Image=tz;Ye.Ellipse=sz;Ye.Triangle=IB;Ye.Path=uz;Ye.Polygon=JB;Ye.LineMorph=KB;Ye.Text=hs;Ye.Label=is;Ye.HTMLMorph=lx;Ye.InputLine=$E;Ye.PasswordInputLine=mx;Ye.InputLine=$E;Ye.InputLine=$E;Ye.PasswordInputLine=mx;Ye.PasswordInputLine=mx;Ye.locateClass=
To;Ye.morph=Gc;Ye.addClassMappings=xc;Ye.inspect=Zy;Ye.touchInputDevice=qp;Ye.addClassMappings({default:Ye.Morph,world:Ye.World,hand:Ye.Hand,image:Ye.Image,ellipse:Ye.Ellipse,triangle:Ye.Triangle,path:Ye.Path,text:Ye.Text,input:Ye.InputLine,label:Ye.Label,polygon:Ye.Polygon,line:Ye.LineMorph,html:Ye.HTMLMorph});Ye.morph=Gc;Ye.morph=Gc;Ye.inspect=Zy;Ye.inspect=Zy;Ye.touchInputDevice=qp;Ye.touchInputDevice=qp;var Gma=Object.freeze({__proto__:null,config:nk,StyleSheet:Mt,ShadowObject:wq,addOrChangeCSSDeclaration:nc,
addOrChangeLinkedCSS:tr,easings:yq,stringToEasing:$o,Icon:En,loadMorphFromSnapshot:Us,InputLine:$E,PasswordInputLine:mx,morph:Gc,inspect:Zy,touchInputDevice:qp,Morph:Hj,Ellipse:sz,Triangle:IB,Image:tz,PathPoint:LE,Path:uz,Polygon:JB,LineMorph:KB,World:Zu,Hand:NB,Text:hs,Label:is,Anchor:OB,HTMLMorph:lx,IFrameMorph:ZE,MorphicEnv:nq,CustomLayout:OE,SnapLayout:PE,VerticalLayout:ix,HorizontalLayout:fs,ProportionalLayout:QE,CenteredTilingLayout:RE,TilingLayout:SE,CellGroup:TE,LayoutColumn:UE,LayoutRow:VE,
LayoutCell:WE,GridLayout:jx,TooltipViewer:LB,Tooltip:vz,MorphicDB:Jt}),El=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js");El.Morph=Hj;El.stringToEasing=$o;El.easings=yq;El.pt=fh;El.num=wk;El.Path=Xg;El.promise=Kf;El.fun=Xk;var z5=function(b){var c=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js"),l=c.hasOwnProperty("ModuleProgress")&&"function"===typeof c.ModuleProgress?c.ModuleProgress:c.ModuleProgress=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Nb(l,b,[{key:"fadeIntoBack",value:function(){this.animate({blur:5})}},{key:"relayout",value:function(){!this.isComponent&&El.Path("owner.isWorld").get(this)&&(this.bottomCenter=$world.visibleBounds().center().subXY(0,100))}},{key:"reset",value:function(){var a=this.getAllNamed(/stage/);this.blur=0;this.stages=new Map(a.map(function(f){return[f,"not loaded"]}));this.updateProgressVisualization();this.getAllNamed(/label/).map(function(f){f._cachedTextBounds=null;f.fit()})}},{key:"updateProgressBar",
value:function(){if(this._lastWidth){this.relayout();var a=this.get("progress path"),f=El.stringToEasing(El.easings.inOutExpo)(El.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3);a.width=El.num.interpolate(f,this._lastWidth,this._currentProgress)}}},{key:"fastLoadTest",value:function(){var a=this,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){1==u.nextAddress&&(a.reset(),f="lively.lang lively.ast lively.source-transform lively.classes lively.vm lively.modules lively.user lively.storage lively.morphic".split(" "),
m=$jscomp.makeIterator(f),q=m.next());if(3!=u.nextAddress){if(q.done)return u.jumpTo(0);r=q.value;a.finishPackage({packageName:r,loaded:!0});return u.yield(El.promise.delay(200),3)}q=m.next();return u.jumpTo(2)})}},{key:"finishPackage",value:function(a){var f=this,m=a.frozen,q=a.loaded;a="stage "+a.packageName.replace("lively.","");a=this.get(a);m&&this.stages.set(a,"frozen");q&&this.stages.set(a,"loaded");El.fun.debounceNamed("update progress",200,function(){f.updateProgressVisualization()})()}},
{key:"updateProgressVisualization",value:function(){var a=this,f=this.getSubmorphNamed("progress path"),m=this.getAllNamed(/stage/),q=m[0];m.forEach(function(r){var u=r.get("checkmark"),v=r.get("frozen indicator"),y=r.get("icon");r=a.stages.get(r);if("not loaded"!=r){q=u;if("loaded"==r){if(u.visible)return;u.animate({duration:300,visible:!0})}if("frozen"==r){if(v.visible)return;v.animate({duration:300,visible:!0})}y.opacity=1}else u.visible=!1,v.visible=!1,y.opacity=.2});m=this.localizePointFrom(El.pt(-20,
0),q).x;m=Math.max(20,m-f.left);f.visible=20==m?!1:!0;this._lastWidth=f.width;this._timeStamp=Date.now();this._currentProgress=m}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleProgress"}},{key:"properties",get:function(){return{stages:{serialize:!1,after:["submorphs"],initialize:function(){var a=this;this.whenRendered().then(function(){a.reset()})}}}}}],c,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ModuleProgress",version:"0.1.1-109"}}},{start:192,end:3586})}(El.Morph);z5=El.ModuleProgress;El.default=z5;var kg=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js");kg.promise=Kf;kg.fun=Xk;kg.num=wk;kg.Icon=En;kg.stringToEasing=$o;kg.easings=yq;kg.VerticalLayout=ix;kg.ShadowObject=wq;kg.HorizontalLayout=fs;kg.morph=Gc;kg.Morph=Hj;kg.StyleSheet=Mt;kg.Image=tz;kg.pt=fh;kg.RadialGradient=Cn;kg.rect=Gk;kg.Rectangle=Pd;kg.Color=wf;kg.connect=uk;
(function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),l=c.hasOwnProperty("ProgressBar")&&"function"===typeof c.ProgressBar?c.ProgressBar:c.ProgressBar=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"test",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){1==f.nextAddress&&(a.progress=0);if(!(1>a.progress))return f.jumpTo(0);
a.progress+=.1;return f.yield(kg.promise.delay(1E3),2)})}},{key:"update",value:function(){var a=this;setTimeout(function(){a.world()||a.stopStepping()},1E3);if(this._lastWidth){var f=this.get("progress path"),m=kg.stringToEasing(kg.easings.inOutExpo)(kg.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3),q=this._targetWidth;f.topLeft=kg.pt(0,0);f.height=this.height;f.width=this._lastWidth>q?q:kg.num.interpolate(m,this._lastWidth,q)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProgressBar"}},
{key:"properties",get:function(){return{progress:{after:["submorphs"],initialize:function(){this.progress=0;this.startStepping("update")},set:function(a){var f=this.get("progress path");this._lastWidth=Math.max(f.width,this._targetWidth,1);this._targetWidth=this.width*a;this._timeStamp=Date.now();this.setProperty("progress",a)}},fill:{defaultValue:kg.Color.darkGray},borderRadius:{defaultValue:5},clipMode:{defaultValue:"hidden"},submorphs:{initialize:function(){this.submorphs=[{name:"progress path",
fill:kg.Color.orange,width:1}]}}}}}],c,{pathInPackage:function(){return"loading-indicator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:336,end:1943})})(kg.Morph);var cS=function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),l=c.hasOwnProperty("LoadingIndicator")&&"function"===typeof c.LoadingIndicator?
c.LoadingIndicator:c.LoadingIndicator=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);var f=this.ui;a=f.label;var m=f.closeButton;if(f=f.progressBar)f.opacity=0,f.isLayoutable=!1;kg.connect(this,"extent",this,"relayout");
kg.connect(a,"extent",this,"relayout");kg.connect(a,"value",this,"updateLabel");kg.connect(a,"fontSize",this,"updateLabel");kg.connect(a,"fontFamily",this,"updateLabel");kg.connect(m,"fire",this,"remove");m.fit();this.relayout()}},{key:"animateProgress",value:function(a){var f=this,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return m=f.ui,(q=m.progressBar)||(q=f.addMorph(new kg.ProgressBar({name:"progress bar"}))),r=f.center,0==a?(q.isLayoutable=!1,q.opacity=
0):(q.isLayoutable=!0,q.opacity=1),q.progress=a,u.yield(f.whenRendered(),2);f.center=r;u.jumpToEnd()})}},{key:"hideSpinner",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(!a.ui.spinner)return f.return();a.ui.spinner.visible=!1;a.ui.spinner.width=50;a.ui.spinner.remove();return f.yield(a.whenRendered(),0)})}},{key:"isEpiMorph",get:function(){return!0}},{key:"updateLabel",value:function(){var a=this.center;this.relayout();this.center=a}},{key:"relayout",
value:function(){kg.Rectangle.inset(20,12);var a=this.ui,f=a.label,m=a.progressBar,q=a.status;a.closeButton.topRight=this.innerBounds().insetBy(2).topRight();m.extent=kg.pt(f.owner.bounds().width,5);q[q.visible?"top":"bottom"]=f.height}},{key:"onHoverIn",value:function(a){this.ui.closeButton.visible=!0}},{key:"onHoverOut",value:function(a){this.ui.closeButton.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LoadingIndicator"}},{key:"open",value:function(a,f){var m=kg.morph(Object.assign({type:kg.LoadingIndicator},
f,{label:a}));if(f&&f.animated)return kg.promise.delay(f.delay||0).then(function(){m.openInWorld();m.opacity=0;m.whenRendered().then(function(){m.ui.spinner&&(m.ui.spinner.visible=!0);m.top+=25;m.animate({top:m.top-25,easing:kg.easings.outExpo});m.animate({opacity:1,easing:kg.easings.outExpo})})}),m;m.openInWorld();m.ui.label.whenRendered().then(function(){m.ui.spinner&&(m.ui.spinner.visible=!0);m.ui.label.fit()});return m}},{key:"forPromise",value:function(a,f,m){var q=this.open(f,m);kg.promise.finally(Promise.resolve(a),
function(){return q.remove()});return q}},{key:"runFn",value:function(a,f,m){var q=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return r=q.open(f,m),u.yield(r.whenRendered(),2);case 2:return u.setFinallyBlock(3),u.yield(a(r),5);case 5:return u.return(u.yieldResult);case 3:u.enterFinallyBlock(),r.remove(),u.leaveFinallyBlock(0)}})}},{key:"properties",get:function(){return{name:{defaultValue:"LoadingIndicator"},styleClasses:{defaultValue:["Halo"]},
hasFixedPosition:{defaultValue:!0},ui:{derived:!0,get:function(){return{progressBar:this.getSubmorphNamed("progress bar"),closeButton:this.getSubmorphNamed("closeButton"),spinner:this.getSubmorphNamed("spinner"),label:this.getSubmorphNamed("ld label"),status:this.getSubmorphNamed("status")}}},progress:{derived:!0,set:function(a){this.animateProgress(kg.num.clamp(a,0,1))}},label:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.value},set:function(a){this.ui.label.value=a}},status:{derived:!0,
after:["submorphs"],defaultValue:!1,get:function(){return this.getSubmorphNamed("status").value},set:function(a){var f=this.ui.status;a?(f.visible=!0,f.value=a):(f.visible=!1,f.value="");this.relayout()}},fontFamily:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontFamily},set:function(a){this.ui.label.fontFamily=a}},fontSize:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontSize},set:function(a){this.ui.label.fontSize=a}},loadingImage:{defaultValue:System.decanonicalize("lively.morphic/")+
"lively-web-logo-small-animate.svg"},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/loading indicator"}}},submorphs:{initialize:function(){this.submorphs=[{name:"wrapper",submorphs:[{type:"html",name:"spinner",extent:kg.pt(86.2,70.2)},{type:"label",name:"ld label",extent:kg.pt(20,100),submorphs:[{type:"label",name:"status"}]}]},{type:"button",name:"closeButton",label:kg.Icon.textAttribute("times")},{type:kg.ProgressBar,name:"progress bar"}]}}}}}],c,{pathInPackage:function(){return"loading-indicator.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:2099,end:8211})}(kg.Morph);cS=kg.LoadingIndicator;var RB=ya("L",cS);kg.default=cS;var Dh=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js");Dh.Morph=Hj;Dh.World=Zu;Dh.HorizontalLayout=fs;Dh.morph=Gc;Dh.MorphicDB=Jt;Dh.graph=$u;Dh.promise=Kf;Dh.date=rt;Dh.string=Hg;Dh.arr=
Te;Dh.Color=wf;Dh.pt=fh;Dh.LoadingIndicator=RB;Dh.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
Dh.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
Dh.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
(function(b){var c=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js"),l=c.hasOwnProperty("WorldVersion")&&"function"===typeof c.WorldVersion?c.WorldVersion:c.WorldVersion=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"update",value:function(){var a=$jscomp.makeIterator(this.submorphs),f=a.next().value;a=a.next().value;f.imageUrl=this.commit.preview||Dh.missingSVG;a.textAndAttributes=
this.info;a.fontColor=this.selected?Dh.Color.white:Dh.Color.darkGray}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldVersion"}},{key:"properties",get:function(){return{commit:{},fill:{defaultValue:Dh.Color.transparent},info:{derived:!0,get:function(){var a=this.commit,f=a.message,m=a.name,q=a.timestamp;return[a._id.slice(0,6)+" ",{fontWeight:"bold"},Dh.string.truncate(f.split("\n")[0],40)+" ",{}," ("+m+" ",{},""+Dh.date.format(new Date(q),"yyyy-mm-dd HH:MM Z"),{}]}},selected:{set:function(a){this.setProperty("selected",
a);this.update()}},layout:{initialize:function(){this.layout=new Dh.HorizontalLayout({align:"center",spacing:5})}},submorphs:{initialize:function(){this.submorphs=[{type:"image",extent:Dh.pt(30,30),name:"preview",reactsToPointer:!1},{reactsToPointer:!1,type:"label",fill:null,name:"commit info",fontFamily:"Nunito",fontColor:Dh.Color.gray}]}}}}}],c,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"WorldVersionViewer",version:"0.1.1-34"}}},{start:1327,end:2884})})(Dh.Morph);var A5=function(b){var c=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js"),l=c.hasOwnProperty("WorldVersionViewer")&&"function"===typeof c.WorldVersionViewer?c.WorldVersionViewer:c.WorldVersionViewer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"reset",value:function(){this.getSubmorphNamed("version list").items=
[];this.getSubmorphNamed("version list spinner").visible=!1}},{key:"onMouseDown",value:function(a){switch(a.targetMorph.name){case "visit button":this.visitSelectedCommit();break;case "revert button":this.revertToSelectedCommit()}}},{key:"visitSelectedCommit",value:function(){var a=this,f,m,q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return f=a.get("version list").selection,m=Dh.LoadingIndicator.open("Loading "+f.name+"..."),q=$world,r=a.db||
Dh.MorphicDB.default,u=f._id,A.setCatchFinallyBlocks(2,3),u?A.yield(Dh.World.loadFromCommit(u,void 0,{morphicDB:r}),8):A.yield(Dh.World.loadFromDB(f.name,f.ref,void 0,{morphicDB:r}),7);case 7:v=A.yieldResult;A.jumpTo(6);break;case 8:v=A.yieldResult;case 6:return y=v,A.return(y);case 3:A.enterFinallyBlock();m.remove();A.leaveFinallyBlock(0);break;case 2:z=A.enterCatchBlock(),console.error(z),q.showError("Error loading world:"+z),A.jumpTo(3)}})}},{key:"revertToSelectedCommit",value:function(){var a=
this,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){f=a.get("version list").selection;if(!f)return y.return();m=a.db||Dh.MorphicDB.default;q=f;r=q._id;u=q.name;v=q.type;return y.yield(m.revert(v,u,r,"HEAD"),2)}return y.return(a.initializeFromStartCommit(f,m,{showRevertButton:!0}))})}},{key:"initializeFromStartCommit",value:function(a,f,m){f=void 0===f?Dh.MorphicDB.default:f;m=void 0===m?{}:m;var q=this,r,u,v,y,z,A,C,G,F,N,L,W,la,wa,D,Q,J,O,ja,X,ha,
bb,pb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(oa){switch(oa.nextAddress){case 1:return r=m,u=void 0===r.showRefs?!0:r.showRefs,v=q.startCommit=a,y=v._id,z=v.type,A=v.name,C=q.getSubmorphNamed("version list spinner"),C.visible=!0,C.center=q.get("version list").center,q.db=f,oa.yield(f.history(z,A),2);case 2:G=oa.yieldResult,F=G.refs,N=G.history,L=y,W=Dh.graph.invert(N),la=Dh.graph.hull(W,y),wa={_id:!0},D=[a],Q=$jscomp.makeIterator(la),J=Q.next();case 3:if(J.done)return X=Dh.arr.max(D,
function(ba){return ba.timestamp}),L=X._id,oa.yield(f.log(L,void 0,!0),7);O=J.value;return oa.yield(f.log(O,void 0,!0,wa),6);case 6:ja=oa.yieldResult;D.push.apply(D,$jscomp.arrayFromIterable(ja));ja.forEach(function(ba){return wa[ba._id]=!0});J=Q.next();oa.jumpTo(3);break;case 7:ha=oa.yieldResult;if(u)for(bb in F);pb=ha.map(function(ba){var qa=new Dh.WorldVersion({reactsToPointer:!1,commit:ba});qa.update();return{isListItem:!0,morph:qa,value:ba}});q.get("version list").items=pb;C.visible=!1;oa.jumpToEnd()}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldVersionViewer"}}],c,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"WorldVersionViewer",version:"0.1.1-34"}}},{start:2901,end:6778})}(Dh.Morph);A5=Dh.WorldVersionViewer;Dh.default=A5;var dh=lively.FreezerRuntime.recorderFor("lively.components/buttons.js");dh.Morph=
Hj;dh.morph=Gc;dh.Icon=En;dh.touchInputDevice=qp;dh.Rectangle=Pd;dh.LinearGradient=Al;dh.Color=wf;dh.pt=fh;dh.signal=hk;dh.connect=uk;dh.arr=Te;dh.obj=lf;dh.Closure=zi;var SB=ya("b6",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),l=c.hasOwnProperty("Button")&&"function"===typeof c.Button?c.Button:c.Button=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a)}},{key:"__additionally_serialize__",value:function(a,f,m,q){Nb._get(Object.getPrototypeOf(l.prototype),"__additionally_serialize__",this).call(this,a,f,m,q);q("fontSize",this.fontSize);this.label!=this.labelMorph.value&&q("label",this.labelMorph.value)}},{key:"isButton",get:function(){return!0}},{key:"enable",value:function(){this.deactivated=!1}},{key:"disable",value:function(){this.deactivated=
!0}},{key:"onChange",value:function(a){var f=a.prop;if(this.label)switch(f){case "extent":case "fontSize":case "fontFamily":this.relayout();break;case "padding":this.fit()}return Nb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a)}},{key:"onSubmorphChange",value:function(a,f){f===this.labelMorph&&"extent"===a.prop&&this.relayout();return Nb._get(Object.getPrototypeOf(l.prototype),"onSubmorphChange",this).call(this,a,f)}},{key:"fitLabelMorph",value:function(){var a=this;this.labelMorph.whenFontLoaded().then(function(){a.labelMorph.invalidateTextLayout();
a.labelMorph.fit()})}},{key:"relayout",value:function(){var a=this.labelMorph;if(a&&!this._relayouting){this._relayouting=!0;try{var f=this.padding,m=f.top(),q=f.bottom(),r=f.left(),u=f.right(),v=a.height+m+q,y=a.width+r+u;v>this.height&&(this.height=v);y>this.width&&(this.width=y);var z=this.innerBounds().insetByRect(f);a.center=z.center().subPt(this.origin)}finally{this._relayouting=!1}}}},{key:"fit",value:function(){var a=this.padding,f=this.labelMorph;f.fit();this.extent=a.bottomLeft().addPt(a.bottomRight()).addPt(f.extent);
this.relayout();return this}},{key:"trigger",value:function(){try{dh.signal(this,"fire"),"function"===typeof this.action&&this.action()}catch(f){var a=this.world();a?a.logError(f):console.error(f)}}},{key:"considerPress",value:function(a){return dh.touchInputDevice?!0:this.innerBoundsContainsPoint(a.positionIn(this))}},{key:"onMouseDown",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onMouseDown",this).call(this,a);a.isAltDown()||this.deactivated||!this.considerPress(a)||(this.pressed=
{originalFill:this.fill})}},{key:"onMouseUp",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onMouseUp",this).call(this,a);a.isClickTarget(this)&&this.pressed&&(this.trigger(),this.pressed=null)}},{key:"onDragStart",value:function(a){dh.touchInputDevice?(this.draggable=!0,this.pressed=null):Nb._get(Object.getPrototypeOf(l.prototype),"onDragStart",this).call(this,a)}},{key:"onDrag",value:function(a){}},{key:"onHoverOut",value:function(a){!dh.touchInputDevice&&this.pressed&&a.isClickTarget(this)&&
(this.pressed=null)}},{key:"onHoverIn",value:function(a){dh.touchInputDevice||this.deactivated||!a.isClickTarget(this)||(this.pressed={originalFill:this.fill})}},{key:"interactivelyChangeLabel",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(a.world().prompt("edit button label",{input:a.labelMorph.textString,historyId:"lively.morphic-button-edit-label-hist"}),2);f=m.yieldResult;"string"===typeof f&&(a.label=f);m.jumpToEnd()})}},
{key:"menuItems",value:function(){var a=this,f=Nb._get(Object.getPrototypeOf(l.prototype),"menuItems",this).call(this);f.unshift({isDivider:!0});f.unshift(["change label",function(){return a.interactivelyChangeLabel()}]);return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Button"}},{key:"properties",get:function(){return{padding:{isStyleProp:!0,defaultValue:dh.Rectangle.inset(5,2)},draggable:{defaultValue:!1},extent:{defaultValue:dh.pt(100,20)},borderColor:{defaultValue:dh.Color.gray},
borderWidth:{defaultValue:1},borderRadius:{defaultValue:5},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:new dh.LinearGradient({stops:[{offset:0,color:dh.Color.white},{offset:1,color:dh.Color.rgb(236,240,241)}],vector:0})},deactivated:{group:"button",defaultValue:!1,after:["labelMorph"],set:function(a){this.setProperty("deactivated",a);this.nativeCursor=a?"not-allowed":"pointer";this.labelMorph.opacity=a?.3:1}},pressed:{group:"_internal",defaultValue:null,set:function(a){this.getProperty("pressed");
this.setProperty("pressed",a)}},fontSize:{group:"button styling",derived:!0,type:"Number",min:4,isStyleProp:!0,after:["label"],set:function(a){this.labelMorph.fontSize=a},get:function(){return this.labelMorph.fontSize}},fontColor:{group:"button styling",derived:!0,isStyleProp:!0,after:["labelMorph"],set:function(a){this.labelMorph.fontColor=a},get:function(){return this.labelMorph.fontColor}},labelMorph:{group:"_internal",after:["submorphs"],serialize:!1,initialize:function(){this.labelMorph=this.getSubmorphNamed("label")||
this.addMorph({type:"label",name:"label",value:"no label yet"})},get:function(){return this.getSubmorphNamed("label")},set:function(a){var f=this.labelMorph;f&&f.remove();a.name="label";a.reactsToPointer=!1;this.addMorphAt(a,0)}},labelWithTextAttributes:{group:"_internal",after:["labelMorph"],derived:!0,get:function(){return this.labelMorph.textAndAttributes},set:function(a){this.labelMorph.textAndAttributes=a}},label:{group:"button",after:["labelMorph"],isStyleProp:!0,type:"RichText",set:function(a){a.isMorph?
(this.setProperty("label",a.value),this.labelMorph=a):(this.setProperty("label",a),this.labelMorph.value=a,this.labelMorph._parametrizedProps&&(this.labelMorph._parametrizedProps.value=a));this.fitLabelMorph()}},fire:{group:"button",derived:!0,readOnly:!0,isSignal:!0},action:{serialize:!1}}}}],c,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:251,end:8857})}(dh.Morph));dh.Button=SB;dh.Button=SB;dh.Button=SB;var aF=function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),l=c.hasOwnProperty("RadioButton")&&"function"===typeof c.RadioButton?c.RadioButton:c.RadioButton=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"getMaster",value:function(a){return a?"styleguide://SystemPrompts/prompts/buttons/selection/selected":
"styleguide://SystemPrompts/prompts/buttons/selection/unselected"}},{key:"reset",value:function(){var a=this.indicator;a.borderWidth=1;a.borderColor=dh.Color.gray;this.selected=!1;dh.connect(a,"onMouseUp",this,"select")}},{key:"morph",get:function(){var a=this.indicator;return this.submorphs.find(function(f){return f!==a})}},{key:"morph",set:function(a){var f=this.indicator;this.submorphs.forEach(function(m){m!==f&&m.remove()});a.position=dh.pt(50,0);this.addMorph(a)}},{key:"value",get:function(){if(!this.valueFn){try{var a=
JSON.parse(this.valueFunctionString)}catch(f){a=this.valueFunctionString}this.valueFn=dh.Closure.fromSource(a).recreateFunc()}return this.morph?this.valueFn(this.morph):void 0}},{key:"onMouseDown",value:function(a){this.select()}},{key:"select",value:function(){this.selected=!0;this.owner.setSelection(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RadioButton"}},{key:"properties",get:function(){return{indicator:{get:function(){return this.getSubmorphNamed("indicator")}},master:{after:["selected"],
initialize:function(){this.master={auto:this.getMaster(this.selected)}}},selectionColor:{},selectionStyle:{},selected:{after:["indicator"],defaultValue:!1,set:function(a){var f=this;this.whenRendered().then(function(m){f.master={auto:f.getMaster(a)}});this.setProperty("selected",!!a)}},valueFunctionString:{defaultValue:'"function (morph) { return morph.value; }"',set:function(a){this.setProperty("valueFunctionString",a.toString());this.valueFn=void 0}},submorphs:{initialize:function(){this.submorphs=
[{type:"ellipse",name:"indicator"}]}}}}}],c,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8867,end:11244})}(dh.Morph);dh.RadioButton=aF;dh.RadioButton=aF;dh.RadioButton=aF;var bF=function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),l=c.hasOwnProperty("RadioButtonGroup")&&
"function"===typeof c.RadioButtonGroup?c.RadioButtonGroup:c.RadioButtonGroup=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"reset",value:function(){this.submorphs.forEach(function(a){return a.reset()});this.layout.layoutableSubmorphs[0].selected=!0}},{key:"removeAllButtons",value:function(){this.removeAllMorphs();this.height=10}},{key:"addButton",value:function(a,f){var m=new dh.RadioButton;m.reset();
m.morph=a;void 0!=f&&(m.internalValue=f,m.valueFunctionString="function (morph) { return morph.owner.internalValue; }");this.addMorph(m);return m}},{key:"setSelection",value:function(a){this.submorphs.forEach(function(f){f!==a&&(f.selected=!1)});a.selected=!0}},{key:"selectedButton",get:function(){return this.submorphs.find(function(a){return a.selected})}},{key:"value",get:function(){var a=this.selectedButton;return a?a.value:null}},{key:"value",set:function(a){var f=this.submorphs.find(function(m){try{return m.value===
a}catch(q){return!1}});f?f.select():this.setSelection(null)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RadioButtonGroup"}},{key:"properties",get:function(){return{choices:{derived:!0,defaultValue:[],get:function(){return this.submorphs.map(function(a){return a.value})},set:function(a){var f=this;this.removeAllButtons();if(dh.obj.isArray(a)){if(0==a.length)return;a.forEach(function(m){f.addButton(dh.morph({name:"label",type:"label",value:m,reactsToPointer:!1}))})}else{a=[].concat($jscomp.arrayFromIterable(a.entries()));
if(0==a.length)return;a.forEach(function(m){var q=$jscomp.makeIterator(m);m=q.next().value;q=q.next().value;f.addButton(dh.morph({name:"label",type:"label",value:m,reactsToPointer:!1}),q)})}this.submorphs[0].master.whenApplied().then(function(){return f.setSelection(f.submorphs[0])})},value:{derived:!0,after:["submorphs"],get:function(){var a=this.selectedButton;return a?a.value:null},set:function(a){var f=this.submorphs.find(function(m){try{return m.value===a}catch(q){return!1}});f?f.select():this.setSelection(null)}}}}}}],
c,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:11253,end:14167})}(dh.Morph);dh.RadioButtonGroup=bF;dh.RadioButtonGroup=bF;dh.RadioButtonGroup=bF;var Hma=Object.freeze({__proto__:null,Button:SB,RadioButton:aF,RadioButtonGroup:bF}),Zc=lively.FreezerRuntime.recorderFor("lively.components/list.js");
Zc.asItem=gI;Zc.Morph=Hj;Zc.Text=hs;Zc.StyleSheet=Mt;Zc.Label=is;Zc.Icon=En;Zc.morph=Gc;Zc.touchInputDevice=qp;Zc.pt=fh;Zc.LinearGradient=Al;Zc.Color=wf;Zc.Rectangle=Pd;Zc.rect=Gk;Zc.arr=Te;Zc.Path=Xg;Zc.string=Hg;Zc.signal=hk;Zc.noUpdate=jj;Zc.once=So;Zc.Button=SB;Zc.bowser=tq;Zc.asItem=gI;Zc.asItem=gI;var JK=function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=c.hasOwnProperty("ListItemMorph")&&"function"===typeof c.ListItemMorph?c.ListItemMorph:c.ListItemMorph=function(a){a&&
a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"displayItem",value:function(a,f,m,q,r,u,v){u=void 0===u?!1:u;var y=a.morph,z=y?"":a.label||a.string||"no item.string";a.annotation?this.valueAndAnnotation={value:z,annotation:a.annotation}:"string"===typeof z?this.textString=z:this.value=z;this.tooltip=a.tooltip||this.tooltip||this.textString;this.itemIndex=f;this.position=r;if(v){f=v.fontFamily;r=v.selectionColor;
z=v.selectionFontColor;var A=v.nonSelectionFontColor,C=v.borderRadius,G=v.fontSize;v=v.padding;z&&this.selectionFontColor!==z&&(this.selectionFontColor=z);A&&this.nonSelectionFontColor!==A&&(this.nonSelectionFontColor=A);r&&this.selectionColor!==r&&(this.selectionColor=r);C&&C!=this.borderRadius&&(this.borderRadius=C);G&&this.fontSize!==G&&(this.fontSize=G);f&&this.fontFamily!==f&&(this.fontFamily=f);v&&!this.padding.equals(v)&&(this.padding=v)}a.autoFit&&(y.width=m);this.extent=Zc.pt(y?Math.max(y.width,
m):m,q);y?(a=y.getTransform().copy(),this.submorphs=[y],y.setTransform(a),y.position=Zc.pt(0,0)):this.submorphs.length&&(this.submorphs=[]);this.isSelected=u}},{key:"onDragStart",value:function(a){var f=this.owner.owner;this._dragState={sourceIsSelected:this.isSelected,source:this,itemsTouched:[]};if(!f.multiSelect||!f.multiSelectViaDrag)f.onItemMorphDragged(a,this)}},{key:"onMouseDown",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onMouseDown",this).call(this,a);this.owner.owner.clickOnItem(a)}},
{key:"onDrag",value:function(a){var f=this.owner.owner;if(f.multiSelect&&f.multiSelectViaDrag){a=a.hand.morphBeneath(a.position);var m=f.selectedIndexes,q=f.itemMorphs;a!==this&&q.includes(a)&&(this._dragState.sourceIsSelected&&!a.isSelected?(Zc.arr.pushIfNotIncluded(m,a.itemIndex),f.selectedIndexes=m):!this._dragState.sourceIsSelected&&a.isSelected&&(Zc.arr.remove(m,a.itemIndex),f.selectedIndexes=m))}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListItemMorph"}},{key:"properties",
get:function(){return{clipMode:{defaultValue:"hidden"},autofit:{defaultValue:!1},isSelected:{defaultValue:!1},draggable:{defaultValue:!Zc.touchInputDevice},fill:{derived:!0,get:function(){return Zc.touchInputDevice&&this.pressed?Zc.Color.gray.withA(.5):this.isSelected?this.selectionColor:Zc.Color.transparent}},itemIndex:{defaultValue:void 0},selectionFontColor:{isStyleProp:!0,defaultValue:Zc.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:Zc.Color.blue},nonSelectionFontColor:{isStyleProp:!0,
defaultValue:Zc.Color.rgbHex("333")},fontColor:{derived:!0,get:function(){return this.isSelected?this.selectionFontColor:this.nonSelectionFontColor}}}}}],c,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:924,end:5139})}(Zc.Label);Zc.ListItemMorph=JK;Zc.ListItemMorph=JK;Zc.ListItemMorph=
JK;(function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=c.hasOwnProperty("ListScroller")&&"function"===typeof c.ListScroller?c.ListScroller:c.ListScroller=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"onScroll",value:function(a){return this.owner.update()}},{key:"onMouseDown",value:function(a){var f=this,m=this.scroll.y;if(Zc.touchInputDevice){var q=this.owner.itemForClick(a);
q&&(q.pressed=!0,q.makeDirty(),setTimeout(function(){q.pressed=!1;if(0==m-f.scroll.y)return f.owner.clickOnItem(a)},300))}else return this.owner.clickOnItem(a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListScroller"}},{key:"properties",get:function(){return{name:{defaultValue:"scroller"},fill:{defaultValue:Zc.Color.transparent},clipMode:{defaultValue:"auto"},scrollbar:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.submorphs[0]}},submorphs:{initialize:function(){this.submorphs=
[{name:"scrollbar"}]}}}}}],c,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5141,end:6103})})(Zc.Morph);Zc.listCommands=[{name:"page up",exec:function(b){b.gotoIndex(Math.max(0,b.selectedIndex-Math.round(b.height/b.itemHeight)));return!0}},{name:"page down",exec:function(b){b.gotoIndex(Math.min(b.items.length-
1,b.selectedIndex+Math.round(b.height/b.itemHeight)));return!0}},{name:"goto first item",exec:function(b){b.gotoIndex(0);return!0}},{name:"goto last item",exec:function(b){b.gotoIndex(b.items.length-1);return!0}},{name:"arrow up",exec:function(b){b.gotoIndex(b.indexUp());return!0}},{name:"arrow down",exec:function(b){b.gotoIndex(b.indexDown());return!0}},{name:"select up",exec:function(b){var c=b.selectedIndexes;if(!b.multiSelect||!c.length)return b.execCommand("arrow up");var l=c[0];if("number"!==
typeof l)b.selectedIndexes=[l];else{var a=b.indexUp(l);c.includes(l)&&c.includes(a)?b.selectedIndexes=c.filter(function(f){return f!==l}):b.selectedIndexes=[a].concat(c.filter(function(f){return f!==a}))}return!0}},{name:"select down",exec:function(b){var c=b.selectedIndexes;if(!b.multiSelect||!c.length)return b.execCommand("arrow down");var l=c[0],a=b.indexDown(l);c.includes(l)&&c.includes(a)?b.selectedIndexes=c.filter(function(f){return f!==l}):b.selectedIndexes=[a].concat(c.filter(function(f){return f!==
a}));return!0}},{name:"select all",exec:function(b){b.selectedIndexes=Zc.arr.range(b.items.length-1,0);b.scrollIndexIntoView(b.selectedIndexes[0]);return!0}},{name:"select via filter",exec:function(b){var c,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return c=b.selectedIndex||0,f.yield(b.world().filterableListPrompt("Select item",b.items,{preselect:c,requester:b.getWindow()||b,itemPadding:Zc.Rectangle.inset(0,2),multiSelect:!0}),2);l=f.yieldResult;a=l.selected;
a.length&&(b.multiSelect?b.selections=a:b.selection=a[0],b.scrollSelectionIntoView(),b.update());return f.return(!0)})}},{name:"realign top-bottom-center",exec:function(b){if(b.selection){var c=b.padding,l=b.itemHeight,a=b.scroll,f=a.x;a=a.y;var m=Zc.pt(0,b.selectedIndex*l);c=b.height-l-c.top()-c.bottom();a=2>Math.abs(m.y-a)?m.y-c:2>Math.abs(m.y-a-.5*c)?m.y:m.y-.5*c;b.scroll=Zc.pt(f,a);return!0}}},{name:"print contents in text window",exec:function(b){var c="items of "+b.name,l=b.items.map(function(a){if("string"===
typeof a)return a;var f=a.string,m=a.label;a=a.annotation;var q="";m?q="string"===typeof m?q+m:q+m.map(function(r,u){return 0==u%2?r:""}).join(""):f&&(q+=f);a&&(q+=" ",q="string"===typeof a?q+a:q+a[0]);return q}).join("\n");return b.world().execCommand("open text window",{title:c,content:l,name:c,fontFamily:"Monaco, monospace"})}}];var TB=ya("aQ",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=c.hasOwnProperty("List")&&"function"===typeof c.List?c.List:c.List=function(a){a&&
a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;a.bounds||a.extent||(a.extent=Zc.pt(400,360));Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.update()}},{key:"__additionally_serialize__",value:function(a,f,m,q){var r=this;Nb._get(Object.getPrototypeOf(l.prototype),"__additionally_serialize__",
this).call(this,a,f,m,q);this.whenRendered().then(function(){return r.update()})}},{key:"onLoad",value:function(){this.scroller.visible=Zc.touchInputDevice}},{key:"initializeSubmorphs",value:function(a){this.submorphs=a=a||this.submorphs||[];for(var f=0;f<a.length;f++)switch(a[f].name){case "listItemContainer":var m=a[f];continue;case "scroller":var q=a[f]}q||(q=this.addMorph(new Zc.ListScroller({draggable:!1,grabbable:!1,acceptsDrops:!1,halosEnabled:!1,name:"scroller"})));m||this.addMorph({name:"listItemContainer",
fill:Zc.Color.transparent,halosEnabled:!1,reactsToPointer:!1,acceptsDrops:!1,draggable:!1});(m||q)&&this.update()}},{key:"isList",get:function(){return!0}},{key:"onChange",value:function(a){"fontFamily fontColor fontSize padding selectionFontColor selectionColor nonSelectionFontColor itemPadding items".split(" ").includes(a.prop)&&this.update();return Nb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a)}},{key:"itemForClick",value:function(a){a=a.positionIn(this.world()).subPt(this.scroll);
a=this.listItemContainer.morphsContainingPoint(a);return a.find(function(f){return f.isListItem})||a[0]}},{key:"clickOnItem",value:function(a){var f=this.itemForClick(a);this[2===a.state.clickCount?"onItemMorphDoubleClicked":"onItemMorphClicked"](a,f)}},{key:"connections",get:function(){return{selection:{signalOnAssignment:!1}}}},{key:"invalidateCache",value:function(){this.manualItemHeight||this.setProperty("itemHeight",null)}},{key:"find",value:function(a){return this.items.find(function(f){return f===
a||f.value===a})}},{key:"findIndex",value:function(a){return this.items.findIndex(function(f){return f===a||f.value===a})}},{key:"addItem",value:function(a){return this.addItemAt(a)}},{key:"addItemAt",value:function(a,f){var m=this;f=void 0===f?this.items.length:f;var q=this.items;f=Math.min(q.length,Math.max(0,f));q.splice(f,0,Zc.asItem(a));this.addMethodCallChangeDoing({target:this,selector:"addItemAt",args:[a,f],undo:{target:this,selector:"removeItem",args:[a]}},function(){return m.update()})}},
{key:"removeItem",value:function(a){var f=this;a=this.find(a);var m=this.items,q=m.indexOf(a);-1!==q&&(m.splice(q,1),this.addMethodCallChangeDoing({target:this,selector:"removeItem",args:[a],undo:{target:this,selector:"addItemAt",args:[a,q]}},function(){return f.update()}))}},{key:"selectItemMorph",value:function(a){this.selectedIndexes=[a.itemIndex]}},{key:"gotoIndex",value:function(a){this.scrollIndexIntoView(this.selectedIndex=a)}},{key:"indexUp",value:function(a){a="number"===typeof a?a:this.selectedIndex;
return(a||this.items.length)-1}},{key:"indexDown",value:function(a){a=void 0===a?this.selectedIndex:a;return(("number"===typeof a?a:-1)+1)%this.items.length}},{key:"update",value:function(){var a=this,f=this.items;f&&this.scroller&&this.dontRecordChangesWhile(function(){var m=a.itemHeight,q=a.itemMorphs,r=a.listItemContainer,u=a.selectedIndexes,v=a.extent.y,y=a.fontSize,z=a.fontFamily,A=a.fontColor,C=a.padding,G=a.itemPadding,F=a.selectionColor,N=a.selectionFontColor,L=a.nonSelectionFontColor,W=a.itemBorderRadius,
la=a.scrollBar,wa=a.scroller,D=a.scrollable,Q=wa.scroll.y;C=C||Zc.Rectangle.inset(0);var J=C.top(),O=C.left(),ja=C.bottom();C=C.right();var X=Math.max(0,Math.floor(Q/m)),ha=Math.min(f.length,X+v/m+2);v=0;C=a.width-(O+C);q=Zc.arr.sortBy(q,function(Ga){return Ga.itemIndex});var bb=$jscomp.makeIterator(Zc.arr.partition(q,function(Ga){return Ga.itemIndex<X}));q=bb.next().value;var pb=bb.next().value;pb=$jscomp.makeIterator(Zc.arr.partition(pb,function(Ga){return Ga.itemIndex>ha-1}));bb=pb.next().value;
pb=pb.next().value;q=[].concat($jscomp.arrayFromIterable(bb),$jscomp.arrayFromIterable(pb),$jscomp.arrayFromIterable(q));for(bb=0;bb<ha-X;bb++){pb=X+bb;var oa=f[pb];if(!oa){q.slice(bb).forEach(function(Ga){Ga.remove()});break}var ba={fontSize:y,fontFamily:z,fontColor:L||A,padding:G,borderRadius:W||0,selectionFontColor:N,nonSelectionFontColor:L,selectionColor:F},qa=q[bb];qa||(qa=q[bb]=r.addMorph(new Zc.ListItemMorph(ba)));qa.reactsToPointer=!D;qa.displayItem(oa,pb,C,m,Zc.pt(0,m*pb),u.includes(pb),
ba);v=Math.max(v,qa.width)}q.slice(ha-X).forEach(function(Ga){return Ga.remove()});m=Math.max(J+ja+m*f.length,a.height);r.setBounds(Zc.pt(O,J).subXY(0,Q).extent(Zc.pt(a.width,m)));wa.extent=a.extent;la.left=v-1;wa.position=Zc.pt(0,0);la.extent=Zc.pt(1,m)})}},{key:"scrollSelectionIntoView",value:function(){this.selection&&this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(a){var f=this.itemHeight,m=this.itemScroll;a=new Zc.Rectangle(0,a*f,this.width,f);f=this.innerBounds().insetByRect(this.padding).translatedBy(m);
var q=0;a.bottom()>f.bottom()&&(q=a.bottom()-f.bottom());a.top()<f.top()&&(q=a.top()-f.top());this.itemScroll=m.addXY(0,q);this.update()}},{key:"onItemMorphDoubleClicked",value:function(a,f){}},{key:"onItemMorphClicked",value:function(a,f){var m=f.itemIndex;f=this.selectedIndexes;var q=f.includes(m),r=[];if(this.multiSelect)if(a.isShiftDown())if(q)r=f.filter(function(v){return v!=m});else{a=f[0];var u="number"===typeof a?Zc.arr.range(m,a):[m];r=u.concat(f.filter(function(v){return!u.includes(v)}))}else r=
this.multiSelectWithSimpleClick||a.isCommandKey()?q?f.filter(function(v){return v!=m}):[m].concat(f.filter(function(v){return v!=m})):[m];else r=[m];this.selectedIndexes=r}},{key:"onItemMorphDragged",value:function(a,f){}},{key:"onHoverIn",value:function(a){this.scrollable&&(this.scroller.visible=!0)}},{key:"onHoverOut",value:function(a){Zc.touchInputDevice||(this.scroller.visible=!1)}},{key:"onDragStart",value:function(a){}},{key:"onDrag",value:function(a){}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",
command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-A",mac:"Meta-A"},command:"select all"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"}].concat(Nb._get(Object.getPrototypeOf(l.prototype),
"keybindings",this))}},{key:"commands",get:function(){return Zc.listCommands}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"List"}},{key:"properties",get:function(){return{fill:{defaultValue:Zc.Color.white},clipMode:{defaultValue:"hidden"},selectionFontColor:{isStyleProp:!0,defaultValue:Zc.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:Zc.Color.rgb(21,101,192)},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Zc.Color.rgbHex("333")},fontColor:{isStyleProp:!0,
defaultValue:Zc.Color.rgbHex("333")},styleClasses:{defaultValue:["default"]},itemScroll:{derived:!0,after:["submorphs"],get:function(){return this.scroller?this.scroller.scroll:Zc.pt(0,0)},set:function(a){this.scroller&&(this.scroller.scroll=a)}},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/list/light"}}},extent:{set:function(a){a.eqPt(this.extent)||(this.setProperty("extent",a),this.update())}},fontFamily:{isStyleProp:!0,defaultValue:"Helvetica Neue, Arial, sans-serif",
set:function(a){this.setProperty("fontFamily",a);this.invalidateCache()}},fontSize:{isStyleProp:!0,defaultValue:12,set:function(a){this.setProperty("fontSize",a);this.invalidateCache()}},padding:{isStyleProp:!0,defaultValue:Zc.Rectangle.inset(3)},itemBorderRadius:{isStyleProp:!0,defaultValue:0,set:function(a){this.setProperty("itemBorderRadius",a);this.invalidateCache()}},itemPadding:{isStyleProp:!0,defaultValue:Zc.Rectangle.inset(1),set:function(a){this.setProperty("itemPadding",a);this.invalidateCache()}},
items:{group:"list",defaultValue:[],after:["submorphs"],set:function(a){this.setProperty("items",a.map(Zc.asItem));this.itemScroll=Zc.pt(0,0);this.update();this.attributeConnections&&Zc.signal(this,"values",this.values)}},multiSelect:{defaultValue:!1},multiSelectWithSimpleClick:{description:"Does a simple click toggle selections without deselecting?",defaultValue:!1},multiSelectViaDrag:{description:"Does dragging extend selection?",defaultValue:!0},values:{group:"list",after:["items"],readOnly:!0,
get:function(){return this.items.map(function(a){return a.value})}},selectedIndex:{group:"list",defaultValue:[],after:["selectedIndexes"],get:function(){return this.selectedIndexes[0]},set:function(a){return this.selectedIndexes="number"===typeof a?[a]:[]}},selectedIndexes:{get:function(){return this.getProperty("selectedIndexes")||[]},set:function(a){var f=this.items.length;this.setProperty("selectedIndexes",(a||[]).filter(function(m){return 0<=m&&m<f}));this.update();Zc.signal(this,"selection",
this.selection)}},selection:{group:"list",after:["selections"],get:function(){return this.selections[0]},set:function(a){this.selections=[a]}},selections:{group:"list",after:["selectedIndexes"],get:function(){var a=this;return this.selectedIndexes.map(function(f){return a.items[f]&&a.items[f].value})},set:function(a){var f=this;this.selectedIndexes=a.map(function(m){return f.findIndex(m)})}},selectedItems:{after:["selectedIndexes"],readOnly:!0,get:function(){var a=this;return this.selectedIndexes.map(function(f){return a.items[f]})}},
submorphs:{initialize:function(a){this.initializeSubmorphs(a)}},listItemContainer:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("listItemContainer")}},itemMorphs:{after:["submorphs"],readOnly:!0,get:function(){return this.listItemContainer.submorphs}},scrollBar:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scrollbar")}},scroller:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scroller")}},scrollable:{derived:!0,
get:function(){return this.padding.top()+this.items.length*this.itemHeight>this.height}},manualItemHeight:{type:"Boolean"},itemHeight:{after:["fontFamily","fontSize","itemPadding"],defaultValue:10,set:function(a){this.setProperty("itemHeight",a);this.manualItemHeight="number"===typeof a},get:function(){var a=this.getProperty("itemHeight");if(a)return a;a=this.env.fontMetric.defaultLineHeight({fontFamily:this.fontFamily,fontSize:this.fontSize});var f=this.itemPadding;f&&(a+=f.top()+f.bottom());this.setProperty("itemHeight",
a);return a}},theme:{after:["styleClasses"],defaultValue:"default",set:function(a){this.removeStyleClass(this.theme);this.addStyleClass(a);this.setProperty("theme",a)}}}}}],c,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10507,end:27043})}(Zc.Morph));Zc.List=TB;Zc.List=TB;Zc.List=TB;Zc.connect=
uk;var cF=ya("aR",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=c.hasOwnProperty("FilterableList")&&"function"===typeof c.FilterableList?c.FilterableList:c.FilterableList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;a.bounds||a.extent||(a.extent=Zc.pt(400,360));Nb._get(Object.getPrototypeOf(l.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);Zc.connect(this.inputMorph,"inputChanged",this,"updateFilter");Zc.connect(this.listMorph,"selection",this,"selectionChanged");Zc.connect(this.listMorph,"onItemMorphDoubleClicked",this,"acceptInput");this.updateFilter();Zc.connect(this,"extent",this,"relayout")}},{key:"resetConnections",value:function(){var a=this,f=this.attributeConnections;if(f){var m=["accepted","canceled","remove"];f.filter(function(q){return m.includes(q.sourceAttrName)&&
q.targetObj!==a}).forEach(function(q){return q.disconnect()})}}},{key:"isList",get:function(){return!0}},{key:"relayout",value:function(){var a=this.listMorph,f=this.inputMorph,m=this.paddingMorph,q=this.borderWidth;f.topLeft=Zc.pt(q,q);f.width=a.width=this.width-2*q;m&&(m.topLeft=f.bottomLeft);a.position=m?m.bottomLeft:f.bottomLeft;a.height=this.height-a.top-q}},{key:"focus",value:function(){this.get("input").focus()}},{key:"selectionChanged",value:function(a){Zc.signal(this,"selection",a)}},{key:"scrollSelectionIntoView",
value:function(){return this.listMorph.scrollSelectionIntoView()}},{key:"parseInput",value:function(){var a=this.get("input").textString,f=Array.from(a).reduce(function(q,r){if("\\"===r&&!q.escaped)return q.escaped=!0,q;" "!==r||q.escaped?(q.spaceSeen=!1,q.current+=r):(!q.spaceSeen&&q.current&&(q.tokens.push(q.current),q.current=""),q.spaceSeen=!0);q.escaped=!1;return q},{tokens:[],current:"",escaped:!1,spaceSeen:!1});f.current&&f.tokens.push(f.current);var m=f.tokens.map(function(q){return q.toLowerCase()});
return{tokens:f.tokens,lowercasedTokens:m,input:a}}},{key:"updateFilter",value:function(){var a=this,f=this.parseInput(),m=this.filterFunction,q=this.sortFunction,r=this.items.filter(function(y){return m.call(a,f,y)});q&&(r=Zc.arr.sortBy(r,function(y){return q.call(a,f,y)}));var u=this.listMorph,v=this.updateSelectionsAfterFilter?u.selectedIndexes.map(function(y){return r.indexOf(u.items[y])}).filter(function(y){return-1!==y}):u.selectedIndexes;u.items=r;u.selectedIndexes=v.length?v:r.length?[0]:
[];this.scrollSelectionIntoView();Zc.signal(this,"filterChanged",{parsedInput:f,items:u.items})}},{key:"acceptInput",value:function(){var a=this.listMorph;this.get("input").acceptInput();a={filtered:this.items,selected:a.selections,action:this.selectedAction,status:"accepted"};Zc.signal(this,"accepted",a);return a}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},
{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Enter",command:"accept input"},{keys:"Escape|Ctrl-G",command:"cancel"},{keys:"Tab",command:"choose action"}].concat($jscomp.arrayFromIterable(Zc.arr.range(0,8).map(function(a){return{keys:"Alt-"+(a+1),command:{command:"choose action and accept input",args:{actionNo:a}}}}))).concat(Nb._get(Object.getPrototypeOf(l.prototype),
"keybindings",this))}},{key:"commands",get:function(){var a=this;return Nb._get(Object.getPrototypeOf(l.prototype),"commands",this).concat([{name:"accept input",exec:function(f){a.acceptInput();return!0}},{name:"cancel",exec:function(f){Zc.signal(f,"canceled");return!0}},{name:"choose action and accept input",exec:function(f,m){m=void 0===m?{}:m;f.selectedAction=(f.actions||[])[void 0===m.actionNo?0:m.actionNo];return f.execCommand("accept input")}},{name:"choose action",exec:function(f){var m,q,
r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(!f.actions)return u.return(!0);m=Object.assign({},f.style,{extent:f.extent});q=new Zc.FilterableList(m);q.openInWorld(f.globalPosition);q.items=f.actions;r=f.actions.indexOf(f.selectedAction);-1===r&&(r=0);q.selectedIndex=r;Zc.connect(q,"accepted",f,"selectedAction",{converter:function(v){this.targetObj.focus();this.disconnect();this.sourceObj.remove();return v.selected[0]}});Zc.connect(q,"canceled",f,"selectedAction",{converter:function(v){this.targetObj.focus();
this.disconnect();this.sourceObj.remove();return this.targetObj.selectedAction}});q.focus();return u.return(!0)})}}].concat($jscomp.arrayFromIterable(Zc.listCommands.map(function(f){return Object.assign({},f,{exec:function(m,q,r){return f.exec(a.listMorph,q,r)}})}))))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FilterableList"}},{key:"properties",get:function(){return{fill:{defaultValue:Zc.Color.transparent},borderWidth:{defaultValue:1},updateSelectionsAfterFilter:{defaultValue:!1},
theme:{after:["styleClasses","listMorph"],defaultValue:"default",set:function(a){this.removeStyleClass(this.theme);this.listMorph.removeStyleClass(this.theme);this.addStyleClass(a);this.listMorph.addStyleClass(a);this.setProperty("theme",a)}},submorphs:{initialize:function(){var a=this;this.submorphs=[Zc.Text.makeInputLine({name:"input",highlightWhenFocused:!1,fixedHeight:!1,autofit:!1}),new Zc.morph({name:"padding",fill:Zc.Color.transparent}),new Zc.List({name:"list",items:[],clipMode:"auto"})];
this.get("list").whenRendered().then(function(){return a.get("list").update()})}},paddingMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("padding")}},listMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("list")}},inputMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("input")}},fontFamily:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontFamily},
set:function(a){this.listMorph.fontFamily=a;this.inputMorph.fontFamily=a}},padding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.padding},set:function(a){this.listMorph.padding=a;this.inputMorph.padding=a}},fontSize:{isStyleProp:!0,group:"styling",derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontSize},set:function(a){this.listMorph.fontSize=a}},itemPadding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.itemPadding},
set:function(a){this.listMorph.itemPadding=a}},inputPadding:{isStyleProp:!0,derived:!0,after:["submorphs","padding"],get:function(){return this.inputMorph.padding},set:function(a){this.inputMorph.padding=a}},input:{derived:!0,after:["submorphs"],defaultValue:"",get:function(){return this.inputMorph.input},set:function(a){this.inputMorph.input=a}},historyId:{derived:!0,after:["submorphs"],defaultValue:null,get:function(){return this.inputMorph.historyId},set:function(a){this.inputMorph.historyId=a}},
multiSelect:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.multiSelect},set:function(a){this.listMorph.multiSelect=a}},items:{after:["submorphs","fuzzy","fuzzySortFunction","fuzzyFilterFunction"],defaultValue:[],set:function(a){this.setProperty("items",a.map(Zc.asItem));this.updateFilter()}},visibleItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.items}},selection:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selection},set:function(a){this.listMorph.selection=
a}},selectedIndex:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndex},set:function(a){this.listMorph.selectedIndex=a}},selectedIndexes:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndexes},set:function(a){this.listMorph.selectedIndexes=a}},selectedItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedItems},set:function(a){this.listMorph.selectedItems=a}},selections:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selections},
set:function(a){this.listMorph.selections=a}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(a){this.setProperty("fuzzy",a);a?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var a=
this.getProperty("filterFunction");if(!a)return this.defaultFilterFunction;"string"===typeof a&&(a=eval("("+a+")"));return a}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(a,f){return a.lowercasedTokens.every(function(m){return f.string.toLowerCase().includes(m)})})}},fuzzySortFunction:{get:function(){var a=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(f,m){var q=String(Zc.Path("string"===
typeof a.fuzzy?a.fuzzy:"string").get(m)).toLowerCase(),r=0;f.lowercasedTokens.forEach(function(u){q.startsWith(u)?r-=10:q.includes(u)&&(r-=5)});return Zc.arr.sum(f.lowercasedTokens.map(function(u){return Zc.string.levenshtein(q.toLowerCase(),u)}))+r})}},fuzzyFilterFunction:{get:function(){var a=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(f,m){var q="string"===typeof a.fuzzy?a.fuzzy:"string";if(f.lowercasedTokens.every(function(u){return m.string.toLowerCase().includes(u)}))return!0;
var r=String(Zc.Path(q).get(m)).toLowerCase();return 3>=Zc.arr.sum(f.lowercasedTokens.map(function(u){return Zc.string.levenshtein(r,u)}))})}},selectedAction:{get:function(){return this.getProperty("selectedAction")||"default"}},actions:{}}}}],c,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},
{start:27156,end:41505})}(Zc.Morph));Zc.FilterableList=cF;Zc.FilterableList=cF;Zc.FilterableList=cF;var dF=ya("bs",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=c.hasOwnProperty("DropDownList")&&"function"===typeof c.DropDownList?c.DropDownList:c.DropDownList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"fitLabelMorph",value:function(){}},{key:Symbol.for("lively-instance-initialize"),
value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);Zc.connect(this,"fire",this,"toggleList")}},{key:"onLoad",value:function(){this.listMorph.selection||(this.listMorph.selection=this.labelMorph.value[0])}},{key:"isListVisible",value:function(){return!!this.listMorph.world()}},{key:"removeWhenFocusLost",value:function(a){var f=this;setTimeout(function(){var m=f.listMorph,q=f.world()&&f.world().focusedMorph;if(m!==q&&q!==f&&m.world()&&
!m.withAllSubmorphsDetect(function(r){return r==q}))m.fadeOut(200);else Zc.once(Zc.touchInputDevice?m.scroller:m,"onBlur",f,"removeWhenFocusLost")},100)}},{key:"toggleList",value:function(){var a=this,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress){f=a.listMorph;if(a.isListVisible())return Zc.signal(a,"deactivated"),a.selection=f.selection,f.epiMorph=!1,f.remove(),r.jumpTo(0);Zc.signal(a,"activated");a.openListInWorld?(f.openInWorld(),f.epiMorph=!0,f.hasFixedPosition=
!0,f.setTransform(a.getGlobalTransform()),m=a.globalBounds()):(m=a.innerBounds(),a.addMorph(f));q=f.items.length*f.itemHeight+f.padding.top()+f.padding.bottom();f.extent=Zc.pt(a.width,Math.min(a.listHeight,q));"top"===a.listAlign?f.bottomLeft=m.topLeft():f.topLeft=m.bottomLeft();Zc.once(f,"onItemMorphClicked",a,"toggleList");Zc.once(Zc.touchInputDevice?f.scroller:f,"onBlur",a,"removeWhenFocusLost");return r.yield(f.whenRendered(),3)}if(4!=r.nextAddress)return r.yield(f.whenRendered(),4);Zc.touchInputDevice?
f.scroller.focus():f.focus();f.scrollSelectionIntoView();r.jumpToEnd()})}},{key:"commands",get:function(){var a=this;return[{name:"accept",exec:function(){a.isListVisible()&&a.toggleList();return!0}},{name:"cancel",exec:function(){a.isListVisible()&&a.listMorph.remove();return!0}}].concat(Nb._get(Object.getPrototypeOf(l.prototype),"commands",this))}},{key:"keybindings",get:function(){return Nb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept"},{keys:"Escape|Ctrl-G",
command:"cancel"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropDownList"}},{key:"properties",get:function(){return{padding:{defaultValue:Zc.Rectangle.inset(3,2)},listHeight:{defaultValue:100},listAlign:{type:"Enum",values:["bottom","top"],defaultValue:"bottom"},openListInWorld:{defaultValue:!1},listMorph:{after:["labelMorph"],get:function(){var a=this.getProperty("listMorph");if(a)return a;a=new Zc.List({name:"dropDownList"});this.setProperty("listMorph",a);return a}},items:{derived:!0,
after:["listMorph"],get:function(){return this.listMorph.items},set:function(a){var f=this,m=this.items.find(function(q){return q.value==f.selection});this.listMorph.items=a;m&&Zc.noUpdate(function(){f.selection=f.items[0].value})}},selection:{after:["listMorph","items"],derived:!0,get:function(){return this.listMorph.selection},set:function(a){var f=this.listAlign,m=this.listMorph;if(a){var q=m.items,r=m.find(a);r||"string"!==typeof a||(r=q.find(function(v){return v.string===a}));if(!r)return;var u=
r.label||[r.string,null];u=[].concat($jscomp.arrayFromIterable(u),[" ",null],$jscomp.arrayFromIterable(Zc.Icon.textAttribute("caret-"+("bottom"===f?"down":"up"))));u[5]&&(u[5].paddingRight="0px",u[5].textStyleClasses=["fa","annotation"]);this.label=u;this.relayout();m.selectedIndex=q.indexOf(r)}else m.selection=null,this.label="";Zc.signal(this,"selection",m.selection)}}}}}],c,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:41514,end:46418})}(Zc.Button));Zc.DropDownList=dF;Zc.DropDownList=dF;Zc.DropDownList=dF;var KK=function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=c.hasOwnProperty("InteractiveItem")&&"function"===typeof c.InteractiveItem?c.InteractiveItem:c.InteractiveItem=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,
b,[{key:"fit",value:function(){}},{key:"onHaloGrabover",value:function(a){this.list.showDropPreviewFor(this,a)}},{key:"onDrop",value:function(a){var f=this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress){if(!f.item.isPreview)return q.jumpTo(0);m=a.hand.grabbedMorphs[0];Nb._get(Object.getPrototypeOf(l.prototype),"onDrop",f).call(f,a);return q.yield(f.list.whenRendered(),3)}f.list.addItemAt({morph:m,isListItem:!0},f.itemIndex);f.list.clearPreviews();q.jumpToEnd()})}},
{key:"select",value:function(){this.list.selectedIndex=this.itemIndex;this.item.morph.focus()}},{key:"onMouseDown",value:function(a){Zc.touchInputDevice?this._touchDown=Date.now():this.select()}},{key:"onMouseUp",value:function(a){Zc.touchInputDevice&&500>Date.now()-this._touchDown&&this.select()}},{key:"displayItem",value:function(a,f,m,q,r,u,v){u=void 0===u?!1:u;Nb._get(Object.getPrototypeOf(l.prototype),"displayItem",this).call(this,a,f,m,q,r,u,v);a.morph&&(a.morph.selected=u)}},{key:"onGrab",
value:function(a){var f=this.list,m=a.halo&&a.halo.target===this;m&&a.halo.detachFromTarget();var q=this.submorphs.length?this.submorphs[0]:Zc.morph({type:"label",value:this.value});a.hand.grab(q);q.position=a.hand.localize(this.globalPosition);m&&a.halo.refocus(q);f.removeItem(this.list.items[this.itemIndex]);f.itemMorphs.forEach(function(r){return r.remove()});f.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveItem"}},{key:"properties",get:function(){return{draggable:{defaultValue:!Zc.touchInputDevice},
item:{derived:!0,get:function(){return this.list.items[this.itemIndex]}},list:{drived:!0,get:function(){return this.owner.owner}},isListItem:{get:function(){return!0}}}}}],c,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:46427,end:48676})}(Zc.ListItemMorph);Zc.InteractiveItem=KK;Zc.InteractiveItem=
KK;Zc.InteractiveItem=KK;var LK=function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=c.hasOwnProperty("MorphList")&&"function"===typeof c.MorphList?c.MorphList:c.MorphList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"onLoad",value:function(){Nb._get(Object.getPrototypeOf(l.prototype),"onLoad",this).call(this);this.clipMode=this.touchInput?"auto":"hidden"}},{key:"showDropPreviewFor",
value:function(a,f){a=a.itemIndex;this.items[a].isPreview&&f||(this.clearPreviews(),f&&this.addItemAt({isListItem:!0,isPreview:!0,morph:Zc.morph({reactsToPointer:!1,acceptsDrops:!1,width:this.width-5,height:this.itemHeight,fill:Zc.Color.orange.withA(.5)})},a))}},{key:"clearPreviews",value:function(){var a=this;this.items.filter(function(f){return f.morph&&f.morph.owner&&!Zc.Path("morph.owner.isListItem").get(f)}).map(function(f){return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(a.removeItem(f))})});
this.items.filter(function(f){return f.isPreview}).map(function(f){return a.removeItem(f)})}},{key:"update",value:function(){var a=this,f=this.items;f&&this.listItemContainer&&(this.scroller&&(this.scroller.visible=!1),this.dontRecordChangesWhile(function(){var m=a.itemHeight,q=a.itemMorphs,r=a.listItemContainer,u=a.selectedIndexes,v=a.extent.y,y=a.fontSize,z=a.fontFamily,A=a.fontColor,C=a.padding,G=a.itemPadding,F=a.selectionColor,N=a.selectionFontColor,L=a.nonSelectionFontColor,W=a.itemBorderRadius,
la=a.scrollBar,wa=a.scroll.y;C=C||Zc.Rectangle.inset(0);var D=C.top(),Q=C.left(),J=C.bottom();C=C.right();var O=Math.max(0,Math.floor(wa/m)),ja=Math.min(f.length,Math.ceil((wa+v)/m));v=0;wa=a.width-(Q+C);q=Zc.arr.sortBy(q,function(bb){return bb.itemIndex});var X=$jscomp.makeIterator(Zc.arr.partition(q,function(bb){return bb.itemIndex<O}));q=X.next().value;var ha=X.next().value;ha=$jscomp.makeIterator(Zc.arr.partition(ha,function(bb){return bb.itemIndex>ja}));X=ha.next().value;ha=ha.next().value;q=
[].concat($jscomp.arrayFromIterable(X),$jscomp.arrayFromIterable(ha),$jscomp.arrayFromIterable(q));y={fontSize:y,fontFamily:z,fontColor:L||A,padding:G,borderRadius:W||0,selectionFontColor:N,nonSelectionFontColor:L,selectionColor:F};q.length&&ja-O>q.length&&(O!=q[0].itemIndex?Zc.arr.pushAt(q,r.addMorph(new Zc.InteractiveItem(y)),0):ja!=Zc.arr.last(q).itemIndex&&q.push(r.addMorph(new Zc.InteractiveItem(y))));for(z=0;z<ja-O;z++){A=O+z;G=f[A];if(!G){q.slice(z).forEach(function(bb){return bb.remove()});
break}F=q[z];F||(F=q[z]=r.addMorph(new Zc.InteractiveItem(y)),F.clipMode="visible");F.displayItem(G,A,wa,m,Zc.pt(0,m*A),u.includes(A),y);v=Math.max(v,F.width)}m=Math.max(D+J+m*f.length,a.height);u=Zc.pt(a.width,m).subPt(Zc.pt(Q+C,0));r.setBounds(Zc.pt(Q,D).extent(u));la.left=v-10;la.fill=null;la.top=0;la.extent=Zc.pt(1,m)}))}},{key:"onHoverIn",value:function(a){this.clipMode="auto"}},{key:"onHoverOut",value:function(a){this.touchInput||(this.clipMode="hidden")}},{key:"onScroll",value:function(a){this.update()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphList"}},{key:"properties",get:function(){return{touchInput:{get:function(){return Zc.touchInputDevice}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(a){this.setProperty("items",a.map(Zc.asItem));this.itemMorphs.forEach(function(f){return f.remove()});this.update();this.attributeConnections&&Zc.signal(this,"values",this.values)}}}}}],c,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:48685,end:53917})}(Zc.List);Zc.MorphList=LK;Zc.MorphList=LK;Zc.MorphList=LK;var Ima=Object.freeze({__proto__:null,asItem:gI,ListItemMorph:JK,List:TB,FilterableList:cF,DropDownList:dF,InteractiveItem:KK,MorphList:LK}),Xf=lively.FreezerRuntime.recorderFor("lively.components/menus.js");Xf.Label=is;Xf.config=nk;Xf.Morph=Hj;Xf.obj=lf;Xf.promise=Kf;Xf.fun=Xk;
Xf.pt=fh;Xf.Color=wf;Xf.Rectangle=Pd;var MK=function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),l=c.hasOwnProperty("MenuDivider")&&"function"===typeof c.MenuDivider?c.MenuDivider:c.MenuDivider=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuDivider"}},{key:"properties",get:function(){return{isMenuDevider:{defaultValue:!0},
fill:{defaultValue:Xf.Color.gray.lighter()},extent:{defaultValue:Xf.pt(100,5)},reactsToPointer:{defaultValue:!1}}}}],c,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:168,end:444})}(Xf.Morph);Xf.MenuDivider=MK;Xf.MenuDivider=MK;Xf.MenuDivider=MK;var NK=function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),
l=c.hasOwnProperty("MenuItem")&&"function"===typeof c.MenuItem?c.MenuItem:c.MenuItem=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"onHoverIn",value:function(a){var f=this;this.owner.itemMorphs.forEach(function(m){return m!==f&&(m.selected=!1)});this.selected=!0;this.submenu&&this.owner.openSubMenuDelayed(a,this,this.submenu)}},{key:"onHoverOut",value:function(a){var f=this,m=a.hand;setTimeout(function(){(f.owner?
f.owner.submenus:[]).some(function(q){return q.fullContainsWorldPoint(m.globalPosition)})||(f.selected=!1)},20);this.owner.maybeRemoveSubmenu()}},{key:"onMouseDown",value:function(a){var f=this,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress){if(f.submenu)return r.return();r.setCatchFinallyBlocks(2);f.owner.startFinish();if("function"!==typeof f.action)throw Error("Menu item "+f.textString+" has no executable action!");return r.yield(f.action(),4)}if(2!=r.nextAddress)return f.owner.completeFinish(),
r.leaveTryBlock(0);m=r.enterCatchBlock();(q=f.world())?q.logError(m):console.error(m);r.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuItem"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},fill:{defaultValue:Xf.Color.transparent},fontSize:{defaultValue:14},draggable:{defaultValue:!1},readOnly:{defaultValue:!0},nativeCursor:{defaultValue:"pointer"},selected:{defaultValue:!1,set:function(a){this.selected!==
a&&(this.addValueChange("selected",a),a?(this.fontColor=Xf.Color.white,this.fill=Xf.Color.rgb(21,101,192)):(this.fill=Xf.Color.transparent,this.fontColor=Xf.Color.black))}},isMenuItem:{derived:!0,readOnly:!0,get:function(){return!0}},label:{get:function(){return this.valueAndAnnotation.value.map(function(a,f){return 0===f%2?a:""}).join("\n")},set:function(a){this.valueAndAnnotation={value:a,annotation:this.annotation}}},annotation:{get:function(){return this.valueAndAnnotation.annotation},set:function(a){this.valueAndAnnotation=
{value:this.value,annotation:a}}},action:{},submenu:{}}}}],c,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:453,end:2976})}(Xf.Label);Xf.MenuItem=NK;Xf.MenuItem=NK;Xf.MenuItem=NK;Xf.invalidItem={string:"invalid item",action:function(){return $world.setStatusMessage("invalid item")}};var OK=
ya("aS",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),l=c.hasOwnProperty("Menu")&&"function"===typeof c.Menu?c.Menu:c.Menu=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"startFinish",value:function(){this.ownerMenu&&this.ownerMenu.startFinish();this._waitingForFinish=!0}},{key:"completeFinish",value:function(){this.ownerMenu&&this.ownerMenu.completeFinish();this.finishedPromise.resolve(!0)}},
{key:"whenFinished",value:function(){return this.finishedPromise.promise}},{key:"onChange",value:function(a){switch(a.prop){case "itemPadding":case "fontSize":case "fontFamily":this.updateMorphs()}Nb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a)}},{key:"remove",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(a.animate({opacity:0,duration:300}),2);a._waitingForFinish||a.completeFinish();Nb._get(Object.getPrototypeOf(l.prototype),
"remove",a).call(a);f.jumpToEnd()})}},{key:"ensureItem",value:function(a){if(!a)return Xf.invalidItem;if(a.title)return this.title=a.title,null;if(a.isDivider)return a;if(a.hasOwnProperty("string")&&a.hasOwnProperty("action"))return Xf.obj.select(a,["string","action","annotation"]);if(Array.isArray(a)){var f=$jscomp.makeIterator(a),m=f.next().value;f=f.next().value;return"string"===typeof m||Array.isArray(m)?f&&"function"!==typeof f?"object"===typeof f&&f.getItems?{label:m,submenu:f.getItems,annotation:[" ",
{textStyleClasses:["fa","fa-caret-right"]}]}:Array.isArray(f)?{label:m,submenu:f,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:Xf.invalidItem:{label:m,action:f||function(){return $world.setStatusMessage(m)}}:Xf.invalidItem}if(a.command){var q=a.command,r=a.showKeyShortcuts,u=a.target;f=a.alias;var v=a.args;if(!q||!u)return Xf.invalidItem;void 0===r&&(r=!0);a=r?"string"===typeof r?r:u.keysForCommand(q):null;return{string:f||q,annotation:a?["\t"+a,{fontSize:"70%"}]:["",{}],action:function(){return u.execCommand(q,
v)}}}return Xf.invalidItem}},{key:"updateMorphs",value:function(){var a=this;this.submorphs=[];var f=this.padding.left(),m=this.padding.right(),q=this.padding.top(),r=this.padding.bottom(),u=0,v=Xf.pt(f,q),y={};this.fontFamily&&(y.fontFamily=this.fontFamily);this.fontSize&&(y.fontSize=this.fontSize);this.itemPadding&&(y.padding=this.itemPadding);this.title&&(q=this.addMorph(Object.assign({type:"label",value:this.title,name:"title",position:v,fontWeight:"bold"},y)),v=q.bottomLeft,u=Math.max(q.width,
u));this.items.forEach(function(z){var A=z.label,C=z.string,G=z.annotation,F=z.action,N=z.submenu;z=a.addMorph(z.isDivider?new Xf.MenuDivider({position:v}):new Xf.MenuItem(Object.assign({label:A||C,annotation:G,action:F,submenu:N,position:v},y)));v=z.bottomLeft;u=Math.max(z.width,u)});this.submorphs.forEach(function(z){z.isLabel&&(z.fit(),z.autofit=!1,z.fixedWidth=!0,z.fixedHeight=!0);z.width=u});this.extent=Xf.pt(u+m+f,v.y+r)}},{key:"openSubMenuDelayed",value:function(a,f,m){var q=this;this.openingSubMenuProcess&&
clearTimeout(this.openingSubMenuProcess);this.openingSubMenuProcess=setTimeout(function(){try{q.openSubMenu(a,f,m)}catch(u){var r=q.world();r?r.logError(u):console.error(u)}},200)}},{key:"openSubMenu",value:function(a,f,m){if(f.selected){var q=this.submenu;if(q){if(q.ownerItemMorph===f||this.morphsContainingPoint(a.position).includes(q))return;this.removeSubMenu()}"function"===typeof m&&(m=m());a=this.submenu=this.addMorph(new Xf.Menu({items:m,ownerItemMorph:f,ownerMenu:this}));a.updateMorphs();a.offsetForOwnerMenu()}}},
{key:"maybeRemoveSubmenu",value:function(){var a=this;Xf.fun.debounceNamed(this.id+"-maybeRemoveSubmenu",300,function(){var f=a.world();if(f){var m=a.submenu,q=a.selectedItemMorph;f=f&&m&&m.fullContainsWorldPoint(f.firstHand.position);m&&m.ownerItemMorph!==q&&!m.ownerItemMorph.selected&&(f?(q&&(q.selected=!1),m.ownerItemMorph.selected=!0):a.removeSubMenu())}})();return this.removeOnMouseOut}},{key:"removeSubMenu",value:function(){if(this.submenu){var a=this.submenu;this.submenu=a.ownerMenu=null;a.remove()}}},
{key:"moveBoundsForVisibility",value:function(a,f){var m=0,q=0;a.right()>f.right()&&(m=-1*(a.right()-f.right()));var r=a.left()+m;0>r&&(m+=-r);a.bottom()>f.bottom()&&(q=-1*(a.bottom()-f.bottom()),m+=1);f=a.top()+q;0>f&&(q+=-f);return a.translatedBy(Xf.pt(m,q))}},{key:"moveSubMenuBoundsForVisibility",value:function(a,f,m,q){q||(q=f.right()+a.width>m.right()?"left":"right");a=a.extent();a="left"===q?f.topLeft().addXY(-a.x,0).extent(a):f.topRight().extent(a);a.bottom()>m.bottom()&&(f=-1*(a.bottom()-
m.bottom()),a=a.translatedBy(Xf.pt(0,f)));a.top()<m.top()&&(m=m.top()-a.top(),a=a.translatedBy(Xf.pt(0,m)));return a}},{key:"offsetForOwnerMenu",value:function(){var a=this.ownerMenu,f=this.world().visibleBounds(),m=a.getGlobalTransform().inverse().transformRectToRect(f);a=this.clipForVisibility(this.moveSubMenuBoundsForVisibility(this.innerBounds(),a.selectedItemMorph?a.selectedItemMorph.bounds():a.innerBounds(),m),f);this.setBounds(a)}},{key:"clipForVisibility",value:function(a,f){a=void 0===a?
this.bounds():a;f=void 0===f?this.world().visibleBounds():f;var m=this.transformRectToMorph(this.world(),a.withX(0).withY(0));f.containsRect(m.insetBy(10))||(a=a.withExtent(Xf.pt(5+a.width,Math.min(m.height,f.height))));return a}},{key:"offsetForWorld",value:function(a){a=this.innerBounds().translatedBy(a);if(this.owner.visibleBounds){var f=this.owner.visibleBounds();a=this.clipForVisibility(this.moveBoundsForVisibility(a,f),f)}this.setBounds(a)}},{key:"onHoverOut",value:function(){this.removeOnMouseOut&&
this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Menu"}},{key:"forItems",value:function(a,f){f=void 0===f?{title:""}:f;return new this(Object.assign({},f,{items:a}))}},{key:"openAt",value:function(a,f,m){m=void 0===m?{title:""}:m;f=this.forItems(f,m).openInWorldNear(a);f.offsetForWorld(a);return f}},{key:"openAtHand",value:function(a,f){f=void 0===f?{title:""}:f;var m=f.hand;a=this.forItems(a,Xf.obj.dissoc(f,["hand"]));m=m?m.position:Xf.pt(0,0);a.titleMorph&&(m=m.addXY(0,
-a.titleMorph.height));a.openInWorld(m);a.offsetForWorld(m);return a}},{key:"properties",get:function(){return{dropShadow:{initialize:function(){if(Xf.config.fastShadows||!this.ownerMenu)this.dropShadow=!0,this.dropShadow.fast=!1}},submorphs:{initialize:function(){this.updateMorphs()}},epiMorph:{defaultValue:!0},acceptsDrops:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},padding:{defaultValue:Xf.Rectangle.inset(0,2)},itemPadding:{defaultValue:Xf.Rectangle.inset(8,4)},borderWidth:{defaultValue:1},
fill:{defaultValue:Xf.Color.white},borderColor:{defaultValue:Xf.Color.gray.lighter()},borderRadius:{defaultValue:4},opacity:{defaultValue:.95},fontSize:{defaultValue:16},fontFamily:{defaultValue:"Helvetica Neue, Arial, sans-serif"},title:{get:function(){return this.getProperty("title")},set:function(a){this.addValueChange("title",a)}},finishedPromise:{initialize:function(){this.finishedPromise=Xf.promise.deferred()}},ownerMenu:{},submenu:{},styleClasses:{defaultValue:["Halo"]},submenus:{readOnly:!0,
get:function(){return this.submenu?[this.submenu].concat(this.submenu.submenus):[]}},ownerItemMorph:{},removeOnMouseOut:{},items:{set:function(a){a=a.map(this.ensureItem.bind(this)).filter(Boolean);this.setProperty("items",a)}},selectedItemMorph:{derived:!0,readOnly:!0,get:function(){return this.itemMorphs.find(function(a){return a.selected})}},titleMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("title")}},itemMorphs:{derived:!0,readOnly:!0,get:function(){return this.submorphs.filter(function(a){return a.isMenuItem})}}}}}],
c,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3089,end:16023})}(Xf.Morph));Xf.Menu=OK;Xf.Menu=OK;Xf.Menu=OK;var Jma=Object.freeze({__proto__:null,MenuDivider:MK,MenuItem:NK,Menu:OK}),gj=lively.FreezerRuntime.recorderFor("lively.components/resizers.js");gj.arr=Te;gj.pt=fh;gj.Color=wf;
gj.Morph=Hj;var PK=function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),l=c.hasOwnProperty("VerticalResizer")&&"function"===typeof c.VerticalResizer?c.VerticalResizer:c.VerticalResizer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"onDrag",value:function(a){this.movedHorizontallyBy(a.position.x-a.state.lastDragPosition.x)}},{key:"divideRelativeToParent",value:function(a){if(!(!this.owner||
"number"!==typeof a||0>a||1<a)){var f=this.owner.extent.x-this.extent.x;if(!(0>f)){var m=this.getRelativeDivide();this.movedHorizontallyBy(f*(a-m))}}}},{key:"getRelativeDivide",value:function(a){var f=this.bounds();a=f.left();f=this.owner.extent.x-f.width;return 0>f?NaN:a/f}},{key:"movedHorizontallyBy",value:function(a){this.resizeIsSave(a)&&(this.fixed.concat(this.scalingRight).forEach(function(f){var m=f.position;f.position=gj.pt(m.x+a,m.y)}),this.scalingLeft.forEach(function(f){var m=f.extent;
f.extent=gj.pt(m.x+a,m.y)}),this.scalingRight.forEach(function(f){var m=f.extent;f.extent=gj.pt(m.x-a,m.y)}),this.position=this.position.addPt(gj.pt(a,0)))}},{key:"resizeIsSave",value:function(a){var f=this;return this.scalingLeft.every(function(m){return m.extent.x+a>=f.minWidth})&&this.scalingRight.every(function(m){return m.extent.x-a>=f.minWidth})}},{key:"addFixed",value:function(a){gj.arr.pushIfNotIncluded(this.fixed,a)}},{key:"addScalingLeft",value:function(a){gj.arr.pushIfNotIncluded(this.scalingLeft,
a)}},{key:"addScalingRight",value:function(a){gj.arr.pushIfNotIncluded(this.scalingRight,a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VerticalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:gj.Color.gray.lighter()},nativeCursor:{defaultValue:"ew-resize"},fixed:{defaultValue:[]},scalingLeft:{defaultValue:[]},scalingRight:{defualtValue:[]},minWidth:{defaultValue:20},draggable:{defaultValue:!0}}}}],c,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:128,end:2703})}(gj.Morph);gj.VerticalResizer=PK;gj.VerticalResizer=PK;gj.VerticalResizer=PK;var QK=function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),l=c.hasOwnProperty("HorizontalResizer")&&"function"===typeof c.HorizontalResizer?c.HorizontalResizer:c.HorizontalResizer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"onDrag",value:function(a){this.movedVerticallyBy(a.position.y-a.state.lastDragPosition.y)}},{key:"divideRelativeToParent",value:function(a){if(!(!this.owner||"number"!==typeof a||0>a||1<a)){var f=this.owner.extent.y-this.extent.y;if(!(0>f)){var m=this.getRelativeDivide();this.movedVerticallyBy(f*(a-m))}}}},{key:"getRelativeDivide",value:function(a){var f=this.bounds();a=f.top();f=this.owner.extent.y-f.height;
return 0>f?NaN:a/f}},{key:"movedVerticallyBy",value:function(a){this.resizeIsSave(a)&&(this.fixed.concat(this.scalingBelow).forEach(function(f){var m=f.position;f.position=gj.pt(m.x,m.y+a)}),this.scalingAbove.forEach(function(f){var m=f.extent;f.extent=gj.pt(m.x,m.y+a)}),this.scalingBelow.forEach(function(f){var m=f.extent;f.extent=gj.pt(m.x,m.y-a)}),this.position=this.position.addPt(gj.pt(0,a)))}},{key:"resizeIsSave",value:function(a){var f=this;return this.scalingAbove.every(function(m){return m.extent.y+
a>=f.minHeight})&&this.scalingBelow.every(function(m){return m.extent.y-a>=f.minHeight})}},{key:"addFixed",value:function(a){gj.arr.pushIfNotIncluded(this.fixed,a)}},{key:"addScalingAbove",value:function(a){gj.arr.pushIfNotIncluded(this.scalingAbove,a)}},{key:"addScalingBelow",value:function(a){gj.arr.pushIfNotIncluded(this.scalingBelow,a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HorizontalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:gj.Color.gray.lighter()},
nativeCursor:{defaultValue:"ns-resize"},fixed:{defaultValue:[]},scalingBelow:{defaultValue:[]},scalingAbove:{defaultValue:[]},minHeight:{defaultValue:20},draggable:{defaultValue:!0}}}}],c,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:2713,end:5319})}(gj.Morph);gj.HorizontalResizer=
QK;gj.HorizontalResizer=QK;gj.HorizontalResizer=QK;var Kma=Object.freeze({__proto__:null,VerticalResizer:PK,HorizontalResizer:QK}),vf=lively.FreezerRuntime.recorderFor("lively.components/tree.js");vf.arr=Te;vf.fun=Xk;vf.obj=lf;vf.tree=av;vf.string=Hg;vf.promise=Kf;vf.pt=fh;vf.Rectangle=Pd;vf.Color=wf;vf.Morph=Hj;vf.Text=hs;vf.config=nk;vf.touchInputDevice=qp;vf.Label=is;vf.connect=uk;vf.signal=hk;vf.bowser=tq;var RK=ya("br",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),
l=c.hasOwnProperty("Tree")&&"function"===typeof c.Tree?c.Tree:c.Tree=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;if(!a.treeData)throw Error("Cannot create tree without TreeData!");Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.resetCache();this.update()}},{key:"onChange",
value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a);"fontSize fontColor selectionColor disableIndent nonSelectionFontColor selectionFontColor".split(" ").includes(a.prop)&&this.update(!0)}},{key:"resetCache",value:function(){this._lineHeightCache=null}},{key:"isTree",get:function(){return!0}},{key:"nodeStyle",get:function(){return{fontFamily:this.fontFamily,fontSize:this.fontSize,fontWeight:this.fontWeight,autofit:!this.resizeNodes}}},{key:"lineBounds",value:function(a){var f=
this.textLayout.charBoundsOfRow(this,a);a=vf.Rectangle.fromLiteral(vf.arr.first(f)).topLeft();f=vf.Rectangle.fromLiteral(vf.arr.last(f)).bottomRight();return vf.Rectangle.fromAny(a,f)}},{key:"recoverOriginalLine",value:function(a){for(var f=this.document.getTextAndAttributesOfLine(a),m=0;m<f.length;m++){var q=this._originalColor[m];q&&!vf.obj.isString(f[m])&&(f[m]?f[m].fontColor=q:f[m]={fontColor:q})}this.document.setTextAndAttributesOfLine(a,f)}},{key:"renderSelectedLine",value:function(a){var f=
this.document.getTextAndAttributesOfLine(a);this._originalColor=Array(f.length);for(var m=0;m<f.length;m++)0===m%2?f[m]&&f[m].isMorph&&(this._originalColor[m]=f[m]?f[m].fontColor||this.nonSelectionFontColor:null,f[m].fontColor=this.selectionFontColor,f[m].isSelected=!0):(this._originalColor[m]=(f[m]?f[m].fontColor:null)||this.nonSelectionFontColor,f[m]?f[m].fontColor=this.selectionFontColor:f[m]={fontColor:this.selectionFontColor});this.document.setTextAndAttributesOfLine(a,f);this.selectLine(a,!0);
this._lastSelectedIndex=this.selectedIndex}},{key:"computeTreeAttributes",value:function(a){if(!a.length)return[];for(var f=vf.arr.genN(8*(a.length-1),function(){return null}),m=1,q,r,u=this.disableIndent?0:1.3*this.fontSize;m<a.length;m++){q=8*(m-1);r=this.selectedIndex==m;a[m].node.isSelected=r;f[q]=" ";f[q+1]={fontSize:u,fontColor:vf.Color.transparent,textStyleClasses:["fas"],paddingRight:u*(a[m].depth-1)+"px"};f[q+3]={fontColor:vf.Color.transparent,textStyleClasses:["fas"],paddingTop:this.fontSize/
10+"px",paddingRight:this.fontSize/8+"px"};this.treeData.isLeaf(a[m].node)?f[q+2]=this.disableIndent?"":"    ":(f[q+2]=this.treeData.isCollapsed(a[m].node)?" \uf0da ":" \uf0d7 ",Object.assign(f[q+3],{paddingRight:this.treeData.isCollapsed(a[m].node)?this.fontSize/4+"px":"0px",paddingTop:"0px",nativeCursor:"pointer",fontColor:this.fontColor}));var v=this.treeData.safeDisplay(a[m].node);v.isMorph&&(v._capturedProps&&Object.assign(v,v._capturedProps),r&&(v._capturedProps=vf.obj.select(v,["fontColor"])),
v.fontColor=this.nonSelectionFontColor);f[q+4]=v;vf.arr.isArray(v)?f[q+5]=[]:f[q+5]={fontColor:this.fontColor};f[q+6]="\n";f[q+7]={}}f.push(" ",{fontSize:1.3*this.fontSize,textStyleClasses:["far"]});return 1<a.length?vf.arr.flatten(f):[]}},{key:"update",value:function(a){var f=this;if(!this._updating&&this.treeData&&this.nodeItemContainer){this._updating=!0;try{this.withMetaDo({isLayoutAction:!0},function(){var m=f.treeData.asListWithIndexAndDepth();f.treeData!==f.lastTreeData||f.lastNumberOfNodes!==
m.length||a?(f.replace({start:{row:0,column:0},end:f.documentEndPosition},f.computeTreeAttributes(m),!1,!1),f.invalidateTextLayout(!0,!1),f.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){f.makeDirty();q.jumpToEnd()})})):f._lastSelectedIndex&&f.recoverOriginalLine(f._lastSelectedIndex-1);f.lastTreeData=f.treeData;f.lastNumberOfNodes=m.length;f.cursorPosition={row:0,column:0};0<f.selectedIndex&&f.renderSelectedLine(f.selectedIndex-1)})}finally{this._updating=
!1}}}},{key:"buildViewState",value:function(a){var f=this;"function"!==typeof a&&(a=function(r){return r});var m=this.selectedNode?a(this.selectedNode):null,q=new Map;vf.tree.prewalk(this.treeData.root,function(r){return q.set(a(r),f.treeData.isCollapsed(r))},function(r){return f.treeData.getChildrenIfUncollapsed(r)});return{selectionId:m,collapsedMap:q,scroll:this.scroll}}},{key:"applyViewState",value:function(a,f){var m=this,q,r,u,v,y,z,A,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:"function"!==
typeof f&&(f=function(F){return F}),q=a,r=q.selectionId,u=q.collapsedMap,v=q.scroll,y=0,z=-1;case 2:A=m.nodes;if(y>=A.length){G.jumpTo(3);break}C=f(A[y]);r===C&&(z=y);if(!u.has(C)||u.get(C)){G.jumpTo(4);break}return G.yield(m.treeData.collapse(A[y],!1),4);case 4:y++;G.jumpTo(2);break;case 3:return m.selectedIndex=z,m.update(),m.scroll=v,m.scrollSelectionIntoView(),G.yield(vf.promise.delay(0),0)}})}},{key:"maintainViewStateWhile",value:function(a,f){var m=this,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==
r.nextAddress?(q=m.buildViewState(f),r.yield(a(),2)):r.yield(m.applyViewState(q,f),0)})}},{key:"onNodeCollapseChanged",value:function(a){var f=a.node,m=a.isCollapsed,q=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return q.resetCache(),u.setCatchFinallyBlocks(2),u.yield(q.treeData.collapse(f,m),4);if(2!=u.nextAddress)return vf.signal(q,"nodeCollapseChanged",{node:f,isCollapsed:m}),q.update(),u.leaveTryBlock(0);r=u.enterCatchBlock();q.showError(r);u.jumpToEnd()})}},
{key:"uncollapse",value:function(a){a=void 0===a?this.selectedNode:a;var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?a&&f.treeData.isCollapsed(a)?m.yield(f.onNodeCollapseChanged({node:a,isCollapsed:!1}),2):m.return():m.return(a)})}},{key:"collapse",value:function(a){a=void 0===a?this.selectedNode:a;var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?!a||f.treeData.isCollapsed(a)?m.return():m.yield(f.onNodeCollapseChanged({node:a,
isCollapsed:!0}),2):m.return(a)})}},{key:"selectedPath",value:function(){return this.treeData.pathOf(this.selectedNode)}},{key:"selectPath",value:function(a){var f=this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(m=f,q.yield(f.treeData.followPath(a),2)):q.return(m.selectedNode=q.yieldResult)})}},{key:"gotoIndex",value:function(a){this.selectedNode=this.nodes[a];this.scrollIndexIntoView(a)}},{key:"scrollSelectionIntoView",value:function(){this.selectedNode&&
this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(a){this.scrollToIndex(a,"into view")}},{key:"centerSelection",value:function(){this.selectedNode&&this.scrollToIndex(this.selectedIndex,"center")}},{key:"scrollToIndex",value:function(a){this.scrollPositionIntoView({row:a-1,column:0})}},{key:"contextMenuForNode",value:function(a,f){vf.signal(this,"contextMenuRequested",{node:a,evt:f})}},{key:"onKeyDown",value:function(a){var f=this.world().focusedMorph;if(!f.isText||
f.readOnly)return Nb._get(Object.getPrototypeOf(l.prototype),"onKeyDown",this).call(this,a)}},{key:"onDragStart",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onDragStart",this).call(this,a);var f=this.textAttributeAtPoint(a.positionIn(this))||{},m=f.onDragStart,q=f.onDrag;f=f.onDragEnd;q&&(this._onDragHandler=q);f&&(this._onDragEndHandler=f);m&&m(a)}},{key:"onDrag",value:function(a){this._onDragHandler?this._onDragHandler(a):Nb._get(Object.getPrototypeOf(l.prototype),"onDrag",this).call(this,
a)}},{key:"onDragEnd",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onDragEnd",this).call(this,a);delete this._onDragHandler;this._onDragEndHandler&&this._onDragEndHandler(a);delete this._onDragEndHandler}},{key:"onMouseDown",value:function(a){var f=this,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return m=f.textPositionFromPoint(a.positionIn(f)),q=m.row,r=m.column,u=f.nodes[q+1],u?!f.treeData.isLeaf(u)&&4>r?z.yield(u.isCollapsed,
3):(f.selectedIndex!=q+1&&(f.selectedIndex=q+1),z.jumpTo(2)):z.return();2!=z.nextAddress&&(z.yieldResult?f.uncollapse(u):f.collapse(u));v=f.textAttributeAt({row:q,column:r})||{};(y=v.onMouseDown)&&y(a);z.jumpToEnd()})}},{key:"onMouseUp",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onMouseUp",this).call(this,a);var f=(this.textAttributeAtPoint(a.positionIn(this))||{}).onMouseUp;f&&f(a)}},{key:"onHoverIn",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onHoverIn",this).call(this,
a);this.activateOnHover&&(this.clipMode="auto")}},{key:"onHoverOut",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onHoverOut",this).call(this,a);!vf.touchInputDevice&&this.activateOnHover&&(this.clipMode="hidden")}},{key:"onContextMenu",value:function(a){if(a.targetMorph===this){a.stop();var f=this.textPositionFromPoint(a.positionIn(this));(f=this.nodes[f.row+1])&&this.contextMenuForNode(f,a)}}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"select node above"},
{keys:"Down|Ctrl-N",command:"select node below"},{keys:"Left",command:"collapse selected node"},{keys:"Right",command:"uncollapse selected node"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{mac:"Meta-[",win:"Ctrl-["},command:{command:"collapse or uncollapse all siblings",
args:{what:"collapse"}}},{keys:{mac:"Meta-]",win:"Ctrl-]"},command:{command:"collapse or uncollapse all siblings",args:{what:"uncollapse"}}},{keys:"Alt-N",command:"goto next sibling"},{keys:"Alt-P",command:"goto prev sibling"},{keys:"Alt-U",command:"goto parent"}]}},{key:"commands",get:function(){return vf.treeCommands}},{key:"highlightChangedNodes",value:function(a){this.treeData.diff(a).forEach(function(f){f=$jscomp.makeIterator(f);var m=f.next().value;f.next();return m.renderedNode&&m.renderedNode.highlight()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Tree"}},{key:"properties",get:function(){return{selectionColor:{type:"ColorGradient",defaultValue:vf.Color.rgb(21,101,192)},fontFamily:{defaultValue:vf.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"auto"},selectable:{defaultValue:!1},acceptsDrops:{defaultValue:!1},readOnly:{defaultValue:!0},fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},disableIndent:{defaultValue:!1},activateOnHover:{defaultValue:!0},
lineHeight:{defaultValue:1.5},clipMode:{defaultValue:"auto"},padding:{defaultValue:vf.Rectangle.inset(3)},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/tree/light"}}},resizeNodes:{defaultValue:!1,set:function(a){this.setProperty("resizeNodes",a);this.resetCache();this.update()}},treeData:{after:["selection"],set:function(a){this.setProperty("treeData",a);this.resetCache();this.update()}},selectedIndex:{derived:!0,after:["selectedNode","nodes"],get:function(){return this.selectedNode?
this.nodes.indexOf(this.selectedNode):-1},set:function(a){this.selectedNode=this.nodes[a]}},nodes:{derived:!0,after:["treeData"],get:function(){return this.treeData.asList()}},defaultViewState:{get:function(){return Object.assign({},Nb._get(Object.getPrototypeOf(l),"prototype",this).defaultViewState,{fastScroll:!1})}},selectedNode:{set:function(a){this.setProperty("selectedNode",a);this.update()}},selectedNodeAndSiblings:{readOnly:!0,derived:!0,after:["selectedNode","treeData"],get:function(){return this.selectedNode?
this.treeData.nodeWithSiblings(this.selectedNode):[]}},selectionFontColor:{isStyleProp:!0,defaultValue:vf.Color.white,set:function(a){this.setProperty("selectionFontColor",a)}},nonSelectionFontColor:{isStyleProp:!0,defaultValue:vf.Color.rgbHex("333"),set:function(a){this.setProperty("nonSelectionFontColor",a)}},nodeItemContainer:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this}},nodeMorphs:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.nodeItemContainer.submorphs.slice()}}}}}],
c,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:1470,end:17455})}(vf.Text));vf.Tree=RK;vf.Tree=RK;vf.Tree=RK;var SK=ya("bp",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),l=c.hasOwnProperty("TreeData")&&"function"===typeof c.TreeData?c.TreeData:c.TreeData=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.root=a;this.parentMap=new WeakMap}},{key:"__dont_serialize__",get:function(){return["parentMap"]}},{key:"__deserialize__",value:function(){this.parentMap=new WeakMap}},{key:"display",value:function(a){throw Error("Not yet implemented");}},{key:"isCollapsed",value:function(a){throw Error("Not yet implemented");
}},{key:"collapse",value:function(a,f){throw Error("Not yet implemented");}},{key:"getChildren",value:function(a){throw Error("Not yet implemented");}},{key:"isLeaf",value:function(a){throw Error("Not yet implemented");}},{key:"getChildrenIfUncollapsed",value:function(a){return this.isCollapsed(a)?[]:this.getChildren(a)}},{key:"safeDisplay",value:function(a){try{return this.display(a)}catch(f){return"[TreeData] Error when trying to display node: "+f}}},{key:"nodeToString",value:function(a){a=this.safeDisplay(a);
return"string"===typeof a?a:a&&Array.isArray(a)?a.map(function(f,m){return 0===m%2?f:""}).join(""):String(a)}},{key:"parentNode",value:function(a){var f=this;return this.parentMap.get(a)||vf.tree.detect(this.root,function(m){return!f.isLeaf(m)&&f.getChildrenIfUncollapsed(m).includes(a)},function(m){return f.getChildrenIfUncollapsed(m)})}},{key:"nodeWithSiblings",value:function(a){return(a=this.parentNode(a))?this.getChildrenIfUncollapsed(a):[]}},{key:"asList",value:function(){return this.asListWithIndexAndDepth().map(function(a){return a.node})}},
{key:"asListWithIndexAndDepth",value:function(a){var f=this;a=void 0===a?!1:a;var m=[];vf.tree.prewalk(this.root,function(q,r,u){return m.push({node:q,depth:u,i:r})},function(q){return f.getChildrenIfUncollapsed(q)});return a?vf.arr.filter(m,a):m}},{key:"pathOf",value:function(a){for(var f=[];a;)f.unshift(a),a=this.parentNode(a);return f}},{key:"followPath",value:function(a,f,m){m=void 0===m?this.root:m;var q=this,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:f||
(f=function(A,C){return A===C});r=a.findIndex(function(A){return f(A,m)});a=a.slice(r+1);if(!a.length)return z.return(null);u=m;case 2:if(!a.length){z.jumpTo(3);break}if(!q.isCollapsed(u)){z.jumpTo(4);break}return z.yield(q.collapse(u,!1),4);case 4:v=a.shift();y=q.getChildrenIfUncollapsed(u).find(function(A){return f(v,A)});if(!y)throw Error("Cannot descend into tree, next node of "+a.join(".")+" not found at "+q.safeDisplay(u));u=y;z.jumpTo(2);break;case 3:return z.return(u)}})}},{key:"diff",value:function(a){var f=
[],m=this.asListWithIndexAndDepth();a=a.asListWithIndexAndDepth();if(m.length!=a.length)return[];m=$jscomp.makeIterator(vf.arr.zip(m,a));for(a=m.next();!a.done;a=m.next()){var q=$jscomp.makeIterator(a.value);a=q.next().value;q=q.next().value;vf.obj.equals(a.node.value,q&&q.node.value)||f.push([a.node,q.node])}return f}},{key:"patch",value:function(a){var f=this.diff(a);if(0<f.length){a=$jscomp.makeIterator(f);for(f=a.next();!f.done;f=a.next()){var m=$jscomp.makeIterator(f.value);f=m.next().value;
m=m.next().value;f.value=m.value}return this}return a}},{key:"uncollapseAll",value:function(a,f,m){f=void 0===f?0:f;var q=this,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:if(m){v.jumpTo(2);break}return v.yield(q.uncollapseAll(a,f,q.root),3);case 3:return v.return(v.yieldResult);case 2:if(!a(m,f)){v.jumpTo(0);break}if(!m.isCollapsed){v.jumpTo(5);break}return v.yield(q.collapse(m,!1),6);case 6:case 5:u=v.forIn(m.children);case 7:if(null==(r=u.getNext()))v.jumpTo(0);
else return v.yield(q.uncollapseAll(a,f+1,m.children[r]),7)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TreeData"}}],c,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17465,end:22466})}(void 0));vf.TreeData=SK;vf.TreeData=SK;vf.TreeData=SK;vf.treeCommands=[{name:"select via filter",
exec:function(b){var c,l,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return c=b.treeData,c.asListWithIndexAndDepth(),c.asListWithIndexAndDepth().map(function(u){return Object.assign(u,{string:c.nodeToString(u.node)})}),l=vf.string.lines(vf.string.printTree(c.root,c.nodeToString.bind(c),c.getChildrenIfUncollapsed.bind(c))),a=c.asList().map(function(u,v){return{isListItem:!0,string:l[v],value:u}}),r.yield(b.world().filterableListPrompt("Select item",a),
2);f=r.yieldResult;m=$jscomp.makeIterator(f.selected);if(q=m.next().value)b.selectedNode=q,b.scrollSelectionIntoView();return r.return(!0)})}},{name:"page up",exec:function(b){b.scrollPageUp(1);var c=b.scroll,l=b.padding.top(),a=c.y;c=b.lineHeightCache.findIndex(function(f){return a<=(l+=f)});c--;b.gotoIndex(Math.max(1,c));return!0}},{name:"page down",exec:function(b){b.scrollPageDown(1);var c=b.scroll,l=b.padding.top(),a=c.y+b.height;c=b.lineHeightCache.findIndex(function(f){return a<=(l+=f)});c--;
b.gotoIndex(Math.min(c,b.nodes.length-1));return!0}},{name:"goto first item",exec:function(b){b.gotoIndex(1);return!0}},{name:"goto last item",exec:function(b){b.gotoIndex(b.nodes.length-1);return!0}},{name:"goto next sibling",exec:function(b){var c=b.selectedNodeAndSiblings;if(c=c[c.indexOf(b.selectedNode)+1])b.selectedNode=c,b.scrollSelectionIntoView();return!0}},{name:"goto prev sibling",exec:function(b){var c=b.selectedNodeAndSiblings;if(c=c[c.indexOf(b.selectedNode)-1])b.selectedNode=c,b.scrollSelectionIntoView();
return!0}},{name:"goto parent",exec:function(b){b.selectedNode&&(b.selectedNode=b.treeData.parentNode(b.selectedNode),b.scrollSelectionIntoView());return!0}},{name:"collapse selected node",exec:function(b){var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?(c=b.selectedNode,c?b.treeData.isCollapsed(c)?(b.selectedNode=b.treeData.parentNode(c),b.scrollSelectionIntoView(),l.jumpTo(2)):l.yield(b.onNodeCollapseChanged({node:b.selectedNode,isCollapsed:!0}),2):l.return(!0)):
l.return(!0)})}},{name:"uncollapse selected node",exec:function(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?b.selectedNode?c.yield(b.onNodeCollapseChanged({node:b.selectedNode,isCollapsed:!1}),2):c.jumpTo(2):c.return(!0)})}},{name:"collapse or uncollapse all siblings",exec:function(b,c){function l(z){return vf.arr.filter(m.getChildrenIfUncollapsed(z),function(A){return!m.isLeaf(A)})}function a(z,A){return Promise.all(z.map(function(C){return b.onNodeCollapseChanged({node:C,
isCollapsed:A})}))}c=void 0===c?{what:"collapse"}:c;var f,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress){f="collapse"===c.what;m=b.treeData;if(f){if(m.isCollapsed(b.selectedNode))return z.return(!0);r=m.parentNode(b.selectedNode);u=-1;vf.tree.prewalk(r,function(A,C,G){G<u||(G>u&&(u=G,q=[]),G===u&&vf.arr.pushIfNotIncluded(q,m.parentNode(A)))},m.getChildrenIfUncollapsed.bind(m))}else for(v=vf.arr.compact([m.parentNode(b.selectedNode)]);v.length;){q=vf.arr.flatmap(v,
function(A){return l(A)});y=q.every(function(A){return m.isCollapsed(A)===f});if(!y)break;v=q}return z.yield(a(q,f),2)}b.scrollSelectionIntoView();return z.return(!0)})}},{name:"select node above",exec:function(b){var c=b.nodes,l=b.selectedIndex;1>=l&&(l=c.length);b.selectedNode=c[l-1];b.scrollSelectionIntoView();return!0}},{name:"select node below",exec:function(b){var c=b.nodes,l=b.selectedIndex;if(-1>=l||l>=c.length-1)l=0;b.selectedNode=c[l+1];b.scrollSelectionIntoView();return!0}},{name:"realign top-bottom-center",
exec:function(b){if(b.selectedNode){var c=b.scroll,l=c.x;c=c.y;var a=b.lineBounds(b.selectedIndex),f=a.topLeft();a=b.height-a.height;c=2>Math.abs(f.y-c)?f.y-a:2>Math.abs(f.y-c-.5*a)?f.y:f.y-.5*a;b.scroll=vf.pt(l,c);return!0}}},{name:"print contents in text window",exec:function(b){var c=b.treeData;c=vf.string.printTree(c.root,c.nodeToString.bind(c),c.getChildrenIfUncollapsed.bind(c));var l=b.getWindow()?"printed "+b.getWindow().title:b.name;return b.world().execCommand("open text window",{title:l,
content:c,name:l,fontFamily:vf.config.codeEditor.defaultStyle.fontFamily})}}];var Lma=Object.freeze({__proto__:null,Tree:RK,TreeData:SK}),nx=lively.FreezerRuntime.recorderFor("lively.components/iframe.js");nx.promise=Kf;nx.HTMLMorph=lx;var TK=function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/iframe.js"),l=c.hasOwnProperty("IFrameMorph")&&"function"===typeof c.IFrameMorph?c.IFrameMorph:c.IFrameMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a.src||a.srcdoc||(a.srcdoc="<p>Empty iframe</p>");Nb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a)}},{key:"changeSrc",value:function(a,f){var m=this,q=this.iframe,r=this._loadPromise;r&&!r.loaded&&r.reject();this._loadPromise=nx.promise.deferred();this._loadPromise.loaded=!1;q.onload=function(u){m._loadPromise.loaded=!0;m._loadPromise.resolve(u)};f=a||f;
r=a?"src":"srcdoc";a=a?"srcdoc":"src";this.addValueChange(a,null);this.addValueChange(r,f);q.removeAttribute(a);q.setAttribute(r,f);this._loadPromise[r]=f}},{key:"whenLoaded",value:function(){return this._loadPromise.promise}},{key:"reload",value:function(){return this.iframe.src=this.src}},{key:"run",value:function(a){return this.innerWindow.eval("("+a+")();")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"printTextMorph",value:function(a){var f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==
v.nextAddress)return v.yield(a.whenRendered(),2);if(3!=v.nextAddress)return f=a.env.renderer.getNodeForMorph(a),m=nx.IFrameMorph.open({srcdoc:f.outerHTML}),v.yield(m.whenLoaded(),3);q=m.innerWindow.document;q.body.style.whiteSpace="normal";q.body.style.margin="0.5cm";q.querySelector(".Text").style.width="100%";q.querySelector(".Text").style.overflow="visible";q.querySelectorAll(".marker-layer-part").forEach(function(y){return y.parentNode.removeChild(y)});r=q.querySelector(".text-layer");r.style.whiteSpace=
"pre-wrap";u=Array.from(r.querySelectorAll("div"));u.forEach(function(y){y.childNodes[0]&&(Array.from(y.childNodes).forEach(function(z){return r.insertBefore(z,y)}),r.insertBefore(q.createElement("br"),y),r.removeChild(y))});m.innerWindow.print();m.getWindow().remove();v.jumpToEnd()})}},{key:"open",value:function(a){a=void 0===a?{}:a;return(new this(a)).openInWindow({title:a.title||"iframe"}).targetMorph}},{key:"properties",get:function(){return{iframe:{after:["domNode"],readOnly:!0,get:function(){return this.domNode}},
innerWindow:{after:["iframe"],readOnly:!0,get:function(){return this.iframe.contentWindow}},innerWorld:{after:["innerWindow"],readOnly:!0,get:function(){return this.innerWindow.$world}},src:{after:["domNode"],set:function(a){this.changeSrc(a,null)}},srcdoc:{after:["domNode"],set:function(a){this.changeSrc(null,a)}},domNode:{get:function(){this._domNode||(this._domNode=this.document.createElement("iframe"),this._domNode.setAttribute("style","position: absolute; width: 100%; height: 100%;"),this._domNode.setAttribute("allowfullscreen",
!0));return this._domNode},set:function(a){return this._domNode=a}}}}}],c,{pathInPackage:function(){return"iframe.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:622,end:6160})}(nx.HTMLMorph);nx.IFrameMorph=TK;nx.IFrameMorph=TK;nx.IFrameMorph=TK;var Mma=Object.freeze({__proto__:null,IFrameMorph:TK}),we=lively.FreezerRuntime.recorderFor("lively.components/window.js");
we.arr=Te;we.promise=Kf;we.pt=fh;we.LinearGradient=Al;we.Color=wf;we.Rectangle=Pd;we.Label=is;we.morph=Gc;we.Morph=Hj;we.HorizontalLayout=fs;we.StyleSheet=Mt;we.connect=uk;we.signal=hk;we.easings=yq;var dS=function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/window.js"),l=c.hasOwnProperty("Window")&&"function"===typeof c.Window?c.Window:c.Window=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,
b,[{key:"build",value:function(){this.submorphs=[this.buildHeader(),this.buildResizer()]}},{key:"openWindowMenu",value:function(){var a=this,f,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){return 1==z.nextAddress?(f=a.world()||a.env.world,m=a.targetMorph.world(),q=m.openMenu,r=[["Change Window Title",function(){var A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){if(1==C.nextAddress)return C.yield(f.prompt("Enter New Name",{input:a.title}),2);if(A=C.yieldResult)a.title=
A;C.jumpToEnd()})}],["Align and resize",[{alias:"full",target:f,command:"resize active window",args:{window:a,how:"full"}},{alias:"left",target:f,command:"resize active window",args:{window:a,how:"left"}},{alias:"center",target:f,command:"resize active window",args:{window:a,how:"center"}},{alias:"right",target:f,command:"resize active window",args:{window:a,how:"right"}},{alias:"top",target:f,command:"resize active window",args:{window:a,how:"top"}},{alias:"bottom",target:f,command:"resize active window",
args:{window:a,how:"bottom"}},{alias:"reset",target:f,command:"resize active window",args:{window:a,how:"reset"}}]],["Window Management",[{alias:"minimize all except this",target:f,command:"toggle minimize all except active window"},{alias:"close all except this",target:f,command:"close all except active window"},{isDivider:!0},{alias:"minimize all",target:f,command:"toggle minimize all windows"},{alias:"close all",target:f,command:"close all windows"}]],{isDivider:!0}],u=r.concat,v=$jscomp,y=v.arrayFromIterable,
z.yield(a.targetMorph.menuItems(),2)):z.return(q.call(m,u.call(r,y.call(v,z.yieldResult))))})}},{key:"toggleFader",value:function(a){var f=this,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:m=f.getSubmorphNamed("fader")||f.addMorph({name:"fader",fill:we.Color.black.withA(.5),opacity:0,extent:f.extent});if(a){q=f.world().visibleBoundsExcludingTopBar().translateForInclusion(f.bounds());f._originalBounds=f.bounds();f.animate({bounds:q,duration:300});
f.borderColor=we.Color.gray.darker();f._faderTriggered=!0;m.opacity=1;r.jumpTo(0);break}f._originalBounds&&(f.animate({bounds:f._originalBounds,duration:300}),f._originalBounds=null);f._faderTriggered=!1;return r.yield(f.whenRendered(),3);case 3:return r.yield(we.promise.delay(100),4);case 4:return f.borderColor=we.Color.gray,f._faderTriggered?r.return():r.yield(m.animate({opacity:0,duration:300}),5);case 5:m.remove(),r.jumpToEnd()}})}},{key:"isWindow",get:function(){return!0}},{key:"targetMorphBounds",
value:function(){return new we.Rectangle(0,25,this.width,this.height-25)}},{key:"relayoutWindowControls",value:function(){try{var a=this.innerBounds(),f=this.ui.windowTitle,m=this.ui.resizer,q=a.withHeight(25),r=this.ui.header,u=this.ui.windowControls.bounds().right()+3,v=q.withLeftCenter(we.pt(u,q.height/2));m.bottomRight=a.bottomRight();!this.minimized&&this.targetMorph&&this.targetMorph.isLayoutable&&this.targetMorph.setBounds(this.targetMorphBounds());f.textBounds().width<q.width-2*u?f.center=
q.center():f.leftCenter=v.leftCenter();r.width=this.width}catch(y){}}},{key:"ensureNotOverTheTop",value:function(){var a=this,f=this.world();if(f){var m=this.globalBounds();f.withTopBarDo(function(q){m.top()<q.height&&a.moveBy(we.pt(0,q.height-m.top()))})}}},{key:"buildHeader",value:function(){return we.morph({name:"header",extent:we.pt(this.width,50),submorphs:[we.morph({name:"window controls",styleClasses:["buttonGroup"],submorphs:this.buildButtons()}),this.buildTitleLabel()]})}},{key:"buildButtons",
value:function(){var a=this.getSubmorphNamed("close")||we.morph({name:"close",styleClasses:["windowButton","closeButton"],tooltip:"close window",submorphs:[we.Label.icon("times",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});we.connect(a,"onMouseDown",this,"close");var f=this.getSubmorphNamed("minimize")||we.morph({name:"minimize",styleClasses:["windowButton","minimizeButton"],tooltip:"collapse window",submorphs:[we.Label.icon("minus",{name:"label",styleClasses:["defaultLabelStyle",
"default"]})]});we.connect(f,"onMouseDown",this,"minimized",{updater:function(q){q(!this.targetObj.minimized)}});if(this.resizable){var m=this.getSubmorphNamed("menu")||we.morph({name:"menu",styleClasses:["windowButton","windowMenuButton"],tooltip:"Open Window Menu",submorphs:[we.Label.icon("chevron-down",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});we.connect(m,"onMouseDown",this,"openWindowMenu")}return we.arr.compact([a,f,m])}},{key:"buildTitleLabel",value:function(){var a=we.morph({padding:we.Rectangle.inset(0,
2,0,0),styleClasses:["windowTitleLabel"],type:"label",name:"window title",tooltip:"double click to maximize/reset",reactsToPointer:!0,value:""});we.connect(a,"onDoubleMouseDown",this,"toggleMaximize");return this.addMorph(a)}},{key:"resizeBy",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"resizeBy",this).call(this,a);this.relayoutWindowControls()}},{key:"resizeAt",value:function(a){a=$jscomp.makeIterator(a);var f=a.next().value;a=a.next().value;var m=this.bounds();switch(f){case "right":this.resizeBy(a.withY(0));
break;case "bottom right":this.resizeBy(a);break;case "bottom":this.resizeBy(a.withX(0));break;case "left":f=this.right;this.resizeBy(a.withY(0).negated());this.right=f;break;case "bottom left":f=this.right;this.resizeBy(a.scaleByPt(we.pt(-1,1)));this.right=f;break;case "top":f=m.x;var q=m.y+a.y;var r=m.width;a=m.height-a.y;this.setBounds(new we.Rectangle(f,q,r,a));break;case "top left":f=m.x+a.x;q=m.y+a.y;r=m.width-a.x;a=m.height-a.y;this.setBounds(new we.Rectangle(f,q,r,a));break;case "top right":f=
m.x,q=m.y+a.y,r=m.width+a.x,a=m.height-a.y,this.setBounds(new we.Rectangle(f,q,r,a))}this.relayoutResizer()}},{key:"relayoutResizer",value:function(){var a=this.getSubmorphNamed("resizer"),f=$jscomp.makeIterator(a.submorphs),m=f.next().value,q=f.next().value,r=f.next().value,u=f.next().value,v=f.next().value,y=f.next().value,z=f.next().value;f=f.next().value;m.height=this.height-10;m.bottomRight=this.extent.subXY(0,10);q.bottomRight=this.extent;r.height=this.height-10;r.bottomLeft=we.pt(0,this.height-
10);u.bottomLeft=we.pt(0,this.height);v.width=this.width-20;v.bottomLeft=we.pt(10,this.height);y.width=this.width-20;y.bottomLeft=we.pt(10,2.5);z.topLeft=we.pt(0,0);f.topRight=we.pt(this.width,0);a.position=we.pt(0,0)}},{key:"buildResizer",value:function(){var a,f,m,q,r,u,v;var y=we.Color.transparent;var z=we.morph({name:"resizer",fill:we.Color.transparent,position:we.pt(0,0),submorphs:[a=we.morph({name:"right resizer",fill:y,width:10,draggable:!0,nativeCursor:"ew-resize"}),f=we.morph({name:"bottom right resizer",
fill:y,extent:we.pt(10,10),draggable:!0,nativeCursor:"nwse-resize"}),m=we.morph({name:"left resizer",fill:y,width:10,draggable:!0,nativeCursor:"ew-resize"}),q=we.morph({name:"bottom left resizer",draggable:!0,fill:y,extent:we.pt(10,10),nativeCursor:"nesw-resize"}),r=we.morph({name:"bottom resizer",draggable:!0,fill:y,height:10,nativeCursor:"ns-resize"}),u=we.morph({name:"top resizer",draggable:!0,fill:y,height:2.5,nativeCursor:"ns-resize"}),v=we.morph({name:"top left resizer",draggable:!0,fill:y,
extent:we.pt(10,10),nativeCursor:"nwse-resize"}),y=we.morph({name:"top rigth resizer",draggable:!0,fill:y,extent:we.pt(10,10),nativeCursor:"nesw-resize"})]});we.connect(u,"onDrag",this,"resizeAt",{converter:function(A){return["top",A.state.dragDelta]}});we.connect(y,"onDrag",this,"resizeAt",{converter:function(A){return["top right",A.state.dragDelta]}});we.connect(v,"onDrag",this,"resizeAt",{converter:function(A){return["top left",A.state.dragDelta]}});we.connect(f,"onDrag",this,"resizeAt",{converter:function(A){return["bottom right",
A.state.dragDelta]}});we.connect(a,"onDrag",this,"resizeAt",{converter:function(A){return["right",A.state.dragDelta]}});we.connect(r,"onDrag",this,"resizeAt",{converter:function(A){return["bottom",A.state.dragDelta]}});we.connect(m,"onDrag",this,"resizeAt",{converter:function(A){return["left",A.state.dragDelta]}});we.connect(q,"onDrag",this,"resizeAt",{converter:function(A){return["bottom left",A.state.dragDelta]}});this.addMorph(z);this.relayoutResizer();return z}},{key:"toggleMaximize",value:function(){this.minized||
(this.maximized=!this.maximized)}},{key:"applyMaximize",value:function(){this.maximized?$world.execCommand("resize active window",{window:this,how:"full"}):$world.execCommand("resize active window",{window:this,how:"reset"})}},{key:"toggleMinimize",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){a.minimized=!a.minimized;f.jumpToEnd()})}},{key:"applyMinimize",value:function(){var a=this,f,m,q,r,u,v,y,z,A,C,G,F,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==
L.nextAddress){if(!a.targetMorph)return L.return();f=a;m=f.nonMinizedBounds;q=f.minimized;r=f.width;u=a.ui;v=u.windowTitle;y=u.resizer;z=a.bounds();A=a.getSubmorphNamed("minimize");C=we.easings.outQuad;if(!q)return a.minimizedBounds=z,a.withMetaDo({metaInteraction:!0},function(){a.targetMorph&&(a.targetMorph.visible=!0)}),m=a.world().visibleBoundsExcludingTopBar().translateForInclusion(m||z),a.animate({bounds:m,styleClasses:["neutral","active"].concat($jscomp.arrayFromIterable(we.arr.without(a.styleClasses,
"minimzed"))),duration:100,easing:C}),A.tooltip="collapse window",L.jumpTo(2);a.nonMinizedBounds=z;G=(a.minimizedBounds||z).withExtent(we.pt(r,28));F=v.textBounds();N=a.get("window controls").bounds().right()+3;F.width+2*N<G.width&&(G=G.withWidth(F.width+N+5));a.minimizedBounds=G;A.tooltip="uncollapse window";return L.yield(a.animate({styleClasses:["minimized","active"].concat($jscomp.arrayFromIterable(we.arr.without(a.styleClasses,"neutral"))),bounds:G,duration:100,easing:C}),3)}2!=L.nextAddress&&
a.targetMorph&&(a.targetMorph.isComponent?a.targetMorph.top=a.height:a.targetMorph.visible=!1);v.reactsToPointer=!a.minimized;y.visible=!a.minimized;a.relayoutWindowControls();L.jumpToEnd()})}},{key:"setBounds",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"setBounds",this).call(this,a);this.relayoutResizer();this.relayoutWindowControls()}},{key:"setBounds",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"setBounds",this).call(this,a);this.relayoutResizer();this.relayoutWindowControls()}},
{key:"close",value:function(){var a=this,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return a.targetMorph&&"function"===typeof a.targetMorph.onWindowClose?r.yield(a.targetMorph.onWindowClose(),3):r.jumpTo(2);2!=r.nextAddress&&(f=r.yieldResult);if(!1===f)return r.return();m=a.world();a.deactivate();a.remove();(q=m.activeWindow()||we.arr.last(m.getWindows()))&&q.activate();we.signal(a,"windowClosed",a);r.jumpToEnd()})}},{key:"onMouseUp",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),
"onMouseUp",this).call(this,a);this.minimized||(this.ui.resizer.visible=!0)}},{key:"onMouseDown",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onMouseDown",this).call(this,a);this.activate(a);this.minimized||this.ui.resizer.submorphs.includes(a.targetMorph)||(this.ui.resizer.visible=!1)}},{key:"onDragStart",value:function(a){var f=this;Nb._get(Object.getPrototypeOf(l.prototype),"onDragStart",this).call(this,a);this.targetMorph&&(a.state.origReactsToPointer=this.targetMorph.reactsToPointer,
this.withMetaDo({metaInteraction:!0},function(){f.targetMorph.reactsToPointer=!1}))}},{key:"onDragEnd",value:function(a){var f=this;Nb._get(Object.getPrototypeOf(l.prototype),"onDragEnd",this).call(this,a);this.targetMorph&&this.withMetaDo({metaInteraction:!0},function(){f.targetMorph.reactsToPointer=a.state.origReactsToPointer});this.minimized||(this.ui.resizer.visible=!0)}},{key:"onDrag",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onDrag",this).call(this,a);this.ensureNotOverTheTop()}},
{key:"focus",value:function(){var a=this.world(),f=this.targetMorph;a&&f&&(!a.focusedMorph||a.focusedMorph!==f&&!f.isAncestorOf(a.focusedMorph))&&f.focus()}},{key:"isActive",value:function(){var a=this.world();return a&&"bold"==this.ui.windowTitle.fontWeight?we.arr.last(a.getWindows())===this:!1}},{key:"activate",value:function(a){var f=this;if(this.isActive())return this.bringToFront(),this.focus(a),this.renderOnGPU=!0,this.relayoutWindowControls(),this;this.master.whenApplied().then(function(){f.master=
{auto:"styleguide://System/window/light/active"}});this.world()?this.bringToFront():this.openInWorldNearHand();var m=this.world()||this.env.world;we.arr.without(m.getWindows(),this).forEach(function(q){return q.deactivate()});this.focus(a);we.signal(this,"windowActivated",this);Promise.resolve(this.master.applyIfNeeded(!0)).then(function(){return f.relayoutWindowControls()});return this}},{key:"deactivate",value:function(){var a=this;this.master&&"styleguide://System/window/light/inactive"==this.master.auto||
(this.master.whenApplied().then(function(){a.master={auto:"styleguide://System/window/light/inactive"}}),this.relayoutWindowControls(),this.renderOnGPU=!1)}},{key:"keybindings",get:function(){return Nb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Shift-L R E N",win:"Ctrl-Shift-L R E N"},command:"[window] change title"}])}},{key:"commands",get:function(){return Nb._get(Object.getPrototypeOf(l.prototype),"commands",this).concat([{name:"[window] change title",
exec:function(a,f){f=void 0===f?{}:f;var m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return(m=f.title)?r.jumpTo(2):r.yield(a.world().prompt("Enter new title",{input:a.title,historyId:"lively.morphic-window-title-hist"}),3);2!=r.nextAddress&&(m=r.yieldResult);if(q=m)a.title=q;return r.return(!0)})}}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Window"}},{key:"properties",get:function(){return{submorphs:{initialize:function(){this.build()}},
ui:{derived:!0,get:function(){return{header:this.get("header"),resizer:this.get("resizer"),windowControls:this.get("window controls"),windowTitle:this.get("window title")}}},master:{initialize:function(){this.master={auto:"styleguide://System/window/light/active"}}},styleClasses:{defaultValue:["active"]},clipMode:{defaultValue:"hidden"},resizable:{defaultValue:!0},title:{after:["submorphs"],derived:!0,get:function(){return this.ui.windowTitle.textString},set:function(a){var f=this,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==
z.nextAddress){m="string"===typeof a?[a,{}]:a;q=[];for(r=0;r<m.length;r+=2)u=m[r],v=m[r+1],u=u.replace(/\n/g,""),y=u.length+0-100,0<y&&(u=u.slice(0,-y)),q.push(u,v||{});f.ui.windowTitle.value=q;return z.yield(f.whenRendered(),2)}f.relayoutWindowControls();z.jumpToEnd()})}},targetMorph:{after:["submorphs"],derived:!0,get:function(){return we.arr.withoutAll(this.submorphs,[this.get("header"),this.get("resizer")])[0]},set:function(a){var f=[this.get("header"),this.get("resizer")];we.arr.withoutAll(this.submorphs,
f).forEach(function(m){return m.remove()});a&&this.addMorph(a,this.resizable?this.get("resizer"):!1);this.relayoutWindowControls()}},minimizedBounds:{serialize:!1},nonMinizedBounds:{},nonMaximizedBounds:{},minimized:{set:function(a){this.setProperty("minimized",a);this.applyMinimize()}},maximized:{set:function(a){this.setProperty("maximized",a);this.applyMaximize()}}}}}],c,{pathInPackage:function(){return"window.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:343,end:20831})}(we.Morph);dS=we.Window;var eS=ya("aP",dS);we.default=dS;var Ud=lively.FreezerRuntime.recorderFor("lively.components/prompts.js");Ud.Rectangle=Pd;Ud.rect=Gk;Ud.Color=wf;Ud.pt=fh;Ud.morph=Gc;Ud.VerticalLayout=ix;Ud.Morph=Hj;Ud.StyleSheet=Mt;Ud.Text=hs;Ud.GridLayout=jx;Ud.Icon=En;Ud.HorizontalLayout=fs;Ud.InputLine=$E;Ud.PasswordInputLine=mx;Ud.arr=Te;Ud.obj=lf;Ud.promise=Kf;Ud.connect=uk;Ud.List=TB;Ud.FilterableList=
cF;Ud.RadioButtonGroup=bF;Ud.RadioButton=aF;var UK=function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=c.hasOwnProperty("AbstractPrompt")&&"function"===typeof c.AbstractPrompt?c.AbstractPrompt:c.AbstractPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Nb._get(Object.getPrototypeOf(l.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,Ud.obj.dissoc(a,["label","commands","keybindings"]));this.build(a);a.commands&&this.addCommands(a.commands);a.keybindings&&this.addKeyBindings(a.keybindings)}},{key:"isPrompt",get:function(){return!0}},{key:"resolve",value:function(a){return this.answer.resolve(a)}},{key:"reject",value:function(a){return this.answer.resolve(a)}},{key:"activate",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){a.focus();
a.answer=Ud.promise.deferred();a._isActive=!0;Ud.promise.finally(a.answer.promise,function(){return a._isActive=!1});a.autoRemove&&Ud.promise.finally(a.answer.promise,function(){return a.fadeOut(200)});return f.return(a.answer.promise)})}},{key:"isActive",value:function(){return!!this.world()&&this._isActive}},{key:"build",value:function(){throw Error("Not yet implemented");}},{key:"applyLayout",value:function(){throw Error("Not yet implemented");}},{key:"keybindings",get:function(){return Nb._get(Object.getPrototypeOf(l.prototype),
"keybindings",this).concat([{keys:"Enter",command:"resolve"},{keys:"Escape",command:"reject"},{keys:{mac:"Meta-."},command:"reject"}])}},{key:"commands",get:function(){var a=this;return Nb._get(Object.getPrototypeOf(l.prototype),"commands",this).concat([{name:"resolve",exec:function(f,m){a.resolve(m);return!0}},{name:"reject",exec:function(f,m){a.reject(m);return!0}}])}},{key:"transitionTo",value:function(a,f){f=void 0===f?300:f;var m=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){q=
Ud.morph({fill:m.fill,borderRadius:m.borderRadius});r=Ud.morph({fill:null,origin:Ud.pt(5,5)});a.opacity=0;a.fill=Ud.Color.transparent;a.openInWorld();m.fill=Ud.Color.transparent;$world.addMorph(q,m);q.setBounds(m.bounds());r.openInWorld();r.addMorph(a);a.center=r.origin;r.center=q.center=m.center;r.scale=a.width/m.width;q.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return m.animate({scale:m.width/a.width,opacity:0,duration:f}),
a.animate({opacity:1,duration:f}),r.animate({scale:1,duration:f}),v.yield(q.animate({bounds:r.bounds(),duration:f}),2);a.fill=q.fill;$world.addMorph(a);q.remove();m.remove();r.remove();v.jumpToEnd()})});u.jumpToEnd()})}},{key:"addNamed",value:function(a,f){var m=this.getSubmorphNamed(a)||this.addMorph(f.isMorph?f:Ud.morph(Object.assign({},f,{name:a})));f.label&&(m.label=f.label);f.isMorph&&(m.name=a);return m}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AbstractPrompt"}},{key:"properties",
get:function(){return{fill:{defaultValue:Ud.Color.black.withA(.6)},extent:{defaultValue:Ud.pt(300,80)},borderRadius:{defaultValue:5},dropShadow:{initialize:function(){this.dopShadow=!0}},clipMode:{defaultValue:"hidden"},_isActive:{defaultValue:!1},autoRemove:{defaultValue:!0},epiMorph:{defaultValue:!0},answer:{defaultValue:null,derived:!0},label:{derived:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("promptTitle").value},set:function(a){this.getSubmorphNamed("promptTitle").value=
a}}}}}],c,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:446,end:3935})}(Ud.Morph);Ud.AbstractPrompt=UK;Ud.AbstractPrompt=UK;Ud.AbstractPrompt=UK;var VK=ya("aH",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=c.hasOwnProperty("InformPrompt")&&"function"===
typeof c.InformPrompt?c.InformPrompt:c.InformPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"build",value:function(a){var f=this,m=a=void 0===a?{}:a,q=m.label,r=this.addNamed("promptTitle",{type:"text",lineWrapping:m.lineWrapping});m=this.addNamed("ok button",{type:"button",label:"OK",width:100});this.addNamed("button wrapper",{submorphs:[m]});r.textString=q;Ud.connect(m,"fire",this,"resolve");
a.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){if(r.document){var u=f.center;f.width=Math.max(f.width,r.document.width+100);f.align(f.center,u)}f.opacity=1}))}},{key:"keybindings",get:function(){return Nb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat([{keys:"Escape",command:"resolve"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InformPrompt"}},{key:"example",value:function(){$world.inform("Computer says no.")}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},
master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/inform"}}}}}}],c,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3944,end:5259})}(Ud.AbstractPrompt));Ud.InformPrompt=VK;Ud.InformPrompt=VK;Ud.InformPrompt=VK;var WK=ya("aI",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),
l=c.hasOwnProperty("ConfirmPrompt")&&"function"===typeof c.ConfirmPrompt?c.ConfirmPrompt:c.ConfirmPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"build",value:function(a){var f=this,m=this.addNamed("promptTitle",{type:"text"});m.value=a.label;a=this.addNamed("ok button",{type:"button",label:this.confirmLabel});var q=this.addNamed("cancel button",{type:"button",label:this.rejectLabel});this.addNamed("button wrapper",
{submorphs:[a,q]});Ud.connect(a,"fire",this,"resolve");Ud.connect(q,"fire",this,"reject");m.lineWrapping=this.lineWrapping;this.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){m.lineWrapping=f.lineWrapping;var r=f.center;f.width=Math.max(f.width,m.document.width+100);f.center=r;f.opacity=1}))}},{key:"resolve",value:function(){Nb._get(Object.getPrototypeOf(l.prototype),"resolve",this).call(this,!0)}},{key:"reject",value:function(){Nb._get(Object.getPrototypeOf(l.prototype),"resolve",
this).call(this,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConfirmPrompt"}},{key:"example",value:function(){$world.confirm("Isn't this a nice prompt.")}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/confirm"}}}}}}],c,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5306,end:6757})}(Ud.AbstractPrompt));Ud.ConfirmPrompt=WK;Ud.ConfirmPrompt=WK;Ud.ConfirmPrompt=WK;var XK=ya("aJ",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=c.hasOwnProperty("MultipleChoicePrompt")&&"function"===typeof c.MultipleChoicePrompt?c.MultipleChoicePrompt:c.MultipleChoicePrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"resolve",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"resolve",this).call(this,a||this.getSubmorphNamed("choices").value)}},{key:"build",value:function(a){var f=a=void 0===a?{choices:["No choice"]}:a;a=f.label;var m=f.choices;f=this.addNamed("ok button",{type:"button"});var q=this.addNamed("cancel button",{type:"button"});a&&(this.addNamed("promptTitle",{type:"text"}).value=a);var r=this.addNamed("choices",
{name:"choices",type:Ud.RadioButtonGroup});this.addNamed("button wrapper",{submorphs:[f,q]});f&&Ud.connect(f,"fire",this,"resolve");q&&Ud.connect(q,"fire",this,"reject");this.whenRendered().then(function(){r.choices=m})}},{key:"onKeyDown",value:function(a){if(/^[0-9]$/.test(a.keyCombo)){var f=this.getSubmorphNamed("button "+(Number(a.keyCombo)-1));if(f)return f.trigger(),a.stop()}return Nb._get(Object.getPrototypeOf(l.prototype),"onKeyDown",this).call(this,a)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"MultipleChoicePrompt"}},{key:"example",value:function(){$world.multipleChoicePrompt("Choose wisely:",{choices:[1,2,3]})}},{key:"properties",get:function(){return{title:{derived:!0,after:["submorphs"],set:function(a){this.getSubmorphNamed("title").value=a}},choices:{after:["submorphs"],derived:!0,set:function(a){var f;if(f=this.getSubmorphNamed("choices"))f.choices=a}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/multiple choice"}}}}}}],
c,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:6846,end:8787})}(Ud.AbstractPrompt));Ud.MultipleChoicePrompt=XK;Ud.MultipleChoicePrompt=XK;Ud.MultipleChoicePrompt=XK;var YK=ya("aK",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=c.hasOwnProperty("TextPrompt")&&
"function"===typeof c.TextPrompt?c.TextPrompt:c.TextPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"maxWidth",get:function(){return this.env.world.visibleBounds().width-20}},{key:"resolve",value:function(){var a=this.getSubmorphNamed("input");this.validate(a.input)?Nb._get(Object.getPrototypeOf(l.prototype),"resolve",this).call(this,a.acceptInput()):a.indicateError(this.errorMessage)}},{key:"build",
value:function(a){var f=this,m=a.label,q=a.input,r=a.historyId;a=a.useLastInput;var u=this.addNamed("promptTitle",{type:"text"});u.value=m;m=this.addNamed("input",Ud.Text.makeInputLine({historyId:r,highlightWhenFocused:!1}));m.viewState.fastScroll=!1;m.textString=q||"";r&&a&&(q=Ud.arr.last(m.inputHistory.items))&&(m.textString=q);this.lineWrapping||(this.width=Math.max(this.width,u.textBounds().width+50));q=this.addNamed("ok button",{type:"button",label:this.confirmLabel});r=this.addNamed("cancel button",
{type:"button",label:this.rejectLabel});this.addNamed("button wrapper",{submorphs:[q,r]});Ud.connect(q,"fire",this,"resolve");Ud.connect(r,"fire",this,"reject");u.lineWrapping=this.lineWrapping;this.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){var v=f.center;f.width=Math.max(350,u.document.width+100);f.opacity=1;f.center=v}));m.gotoDocumentEnd();m.scrollCursorIntoView()}},{key:"initLayout",value:function(){var a=this;if(!this.layout){var f=this.getSubmorphNamed("promptTitle"),
m=this.getSubmorphNamed("input");f.fit();this.whenRendered().then(function(){var q=Math.max(m.textBounds().width,f.textBounds().width)+20;a.width=Math.min(a.maxWidth,q);a.opacity=1});this.layout=new Ud.GridLayout({columns:[0,{paddingLeft:5},1,{paddingLeft:5,paddingRight:2.5,fixed:100},2,{paddingRight:5,paddingLeft:2.5,fixed:100},3,{paddingRight:5}],rows:[0,{fixed:f.textBounds().height+5,paddingBottom:5},1,{fixed:m.height},2,{fixed:35,paddingTop:5,paddingBottom:5}],grid:[["promptTitle","promptTitle",
"promptTitle","promptTitle"],["input","input","input","input"],[null,"ok button","cancel button",null]]})}}},{key:"focus",value:function(){this.getSubmorphNamed("input").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?a.yield($world.prompt("enter",{input:"a little longer text"}),2):a.yield($world.prompt("enter\nsomething",{input:"???"}),0)})}},
{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},errorMessage:{defaultValue:"Invalid Input"},confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},validate:{serialize:!1,initialize:function(){this.validate=function(){return!0}}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/text"}}}}}}],c,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8796,end:12333})}(Ud.AbstractPrompt));Ud.TextPrompt=YK;Ud.TextPrompt=YK;Ud.TextPrompt=YK;var ZK=ya("aL",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=c.hasOwnProperty("EditPrompt")&&"function"===typeof c.EditPrompt?c.EditPrompt:c.EditPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"maxWidth",
get:function(){return this.env.world.visibleBounds().width-20}},{key:"build",value:function(a){var f=a.input,m=a.mode,q=a.textStyle,r=a.evalEnvironment;this.addNamed("promptTitle",{type:"text",value:a.label});q||(q={});m&&!q.fontFamily&&(q.fontFamily="Monaco, monospace");var u=this.addNamed("editor",{type:"text"});u.textString=f||"";Object.assign(u,q);u.changeEditorMode(m).then(function(){r&&u.editorPlugin&&Object.assign(u.editorPlugin.evalEnvironment,r)});a=u.textBounds().width+50;a>this.width-25&&
(this.width=Math.min(this.maxWidth,a+125));a=this.addNamed("ok button",{type:"button"});f=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[a,f]});Ud.connect(a,"fire",this,"resolve");Ud.connect(f,"fire",this,"reject");u.gotoDocumentEnd();u.scrollCursorIntoView()}},{key:"resolve",value:function(a){var f=this.getSubmorphNamed("editor").textString.trim();if(this.historyId){a=Ud.InputLine.getHistory(this.historyId);a.items=a.items.filter(function(m){return m!==
f});for(a.items.push(f);a.items.length>a.items.max;)a.items.shift();a.index=a.items.length;Ud.InputLine.setHistory(this.historyId,a)}return Nb._get(Object.getPrototypeOf(l.prototype),"resolve",this).call(this,f)}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-Enter|Meta-S",win:"Ctrl-Enter|Ctrl-S"},command:"resolve"},{keys:"Escape",command:"reject"},{keys:"Alt-P|Alt-Up",command:"history back"},{keys:"Alt-N|Alt-Down",command:"history forward"},{keys:"Alt-H",command:"browse history"}]}},
{key:"commands",get:function(){var a=this;return Nb._get(Object.getPrototypeOf(l.prototype),"commands",this).concat([{name:"history back",exec:function(f,m){if(a.historyId){f=Ud.InputLine.getHistory(a.historyId);m=f.items;var q=f.index;f.index=--q;0>q&&(f.index=q=m.length-1);a.get("editor").undoManager.group();a.get("editor").textString=m[q];a.get("editor").undoManager.group()}return!0}},{name:"browse history",exec:function(f,m){var q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==
A.nextAddress){if(!a.historyId)return A.jumpTo(2);q=Ud.InputLine.getHistory(a.historyId);return A.yield(a.world().editListPrompt("input history "+a.historyId,q.items,{requester:a}),3)}2!=A.nextAddress&&(r=A.yieldResult,u=r.status,v=r.list,y=$jscomp.makeIterator(r.selections),z=y.next().value,"canceled"!==u&&(q.items=v,Ud.InputLine.setHistory(a.historyId,q),z&&(q.index=q.items.indexOf(z),a.get("editor").textString=z)));return A.return(!0)})}},{name:"history forward",exec:function(f,m){if(a.historyId){f=
Ud.InputLine.getHistory(a.historyId);m=f.items;var q=f.index;f.index=++q;q>=m.length&&(f.index=q=0);a.get("editor").undoManager.group();a.get("editor").textString=m[q];a.get("editor").undoManager.group()}return!0}}])}},{key:"focus",value:function(){this.getSubmorphNamed("editor").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditPrompt"}},{key:"example",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield($world.editPrompt("enter",
{input:"$world.show()",mode:"js",evalEnvironment:{context:23}}),2);a.editorPlugin.evalEnvironment;f.jumpToEnd()})}},{key:"properties",get:function(){return{extent:{defaultValue:Ud.pt(500,300)},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit"}}}}}}],c,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:12342,end:16847})}(Ud.AbstractPrompt));Ud.EditPrompt=ZK;Ud.EditPrompt=ZK;Ud.EditPrompt=ZK;var $K=ya("aM",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=c.hasOwnProperty("PasswordPrompt")&&"function"===typeof c.PasswordPrompt?c.PasswordPrompt:c.PasswordPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"build",value:function(a){var f=
a.placeholder;this.addNamed("promptTitle",{type:"text",value:a.label,fixedHeight:!0});this.addNamed("input",{type:Ud.PasswordInputLine,name:"input",placeholder:f||""});a=this.addNamed("ok button",{type:"button",label:"OK"});f=this.addNamed("cancel button",{type:"button",label:"CANCEL"});Ud.connect(a,"fire",this,"resolve");Ud.connect(f,"fire",this,"reject");this.addNamed("button wrapper",{submorphs:[a,f]})}},{key:"resolve",value:function(){Nb._get(Object.getPrototypeOf(l.prototype),"resolve",this).call(this,
this.get("input").acceptInput())}},{key:"focus",value:function(){var a=this.get("input");a.whenRendered().then(function(){return a.focus()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PasswordPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.passwordPrompt("Enter your secret password:"),0)})}},{key:"properties",get:function(){return{maxWidth:{readOnly:!0,get:function(){return 800}},master:{initialize:function(){this.master=
{auto:"styleguide://SystemPrompts/prompts/password"}}}}}}],c,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:16856,end:18201})}(Ud.AbstractPrompt));Ud.PasswordPrompt=$K;Ud.PasswordPrompt=$K;Ud.PasswordPrompt=$K;var aL=ya("aN",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),
l=c.hasOwnProperty("ListPrompt")&&"function"===typeof c.ListPrompt?c.ListPrompt:c.ListPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"onChange",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a);"extent"==a.prop&&this.layout&&!this.layout.active&&(a=a.value.subPt(a.prevValue),this.getSubmorphNamed("prompt list").height+=a.y)}},{key:"getMaster",value:function(){return this.filterable?
"styleguide://SystemPrompts/prompts/list":"styleguide://SystemPrompts/prompts/edit list"}},{key:"reset",value:function(){this.items=[]}},{key:"build",value:function(a){var f=a.label,m=a.filterable,q=a.multiSelect,r=a.historyId,u=a.useLastInput,v=a.fuzzy,y=a.filterFunction,z=a.sortFunction,A=a.actions,C=a.selectedAction,G=a.items,F=a.onSelection,N=a.onFilter;this.extent=a.extent||Ud.pt(500,400);this.addNamed("promptTitle",{type:"text"}).value=f;var L=this.addNamed("prompt list",{type:m?Ud.FilterableList:
Ud.List,multiSelect:q,historyId:r,useLastInput:u});m?this.get("list").master=!1:this.get("prompt list").master=!1;L.items=G;m&&v&&(L.fuzzy=v);m&&"function"===typeof y&&(L.filterFunction=y);m&&"function"===typeof z&&(L.sortFunction=z);F&&"function"===typeof F&&(this.onSelection=F);m&&A&&(L.actions=A);m&&C&&(L.selectedAction=C);a=this.addNamed("ok button",{type:"button"});f=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[a,f]});Ud.connect(a,"fire",this,"resolve");
Ud.connect(f,"fire",this,"reject");m&&(Ud.connect(L,"accepted",this,"resolve"),Ud.connect(L,"canceled",this,"reject"),N&&Ud.connect(L,"updateFilter",function(){return N(L)}),L.whenRendered().then(function(){return L.relayout()}))}},{key:"resolve",value:function(a){var f=this.getSubmorphNamed("prompt list");a=a||f instanceof Ud.FilterableList?f.acceptInput():{selected:f.selections,status:"accepted",actions:"default"};return this.answer.resolve(a)}},{key:"reject",value:function(){return this.answer.resolve({prompt:this,
selected:[],filtered:[],status:"canceled"})}},{key:"focus",value:function(){this.getSubmorphNamed("prompt list").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.listPrompt("hello",[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",get:function(){return{items:{derived:!0,after:["submorphs"],set:function(a){0<this.submorphs.length&&(this.getSubmorphNamed("prompt list").items=
a||[])}},filterable:{},master:{after:["filterable"],initialize:function(){this.master={auto:this.getMaster()}}},preselect:{derived:!0,after:["items"],set:function(a){var f=this.getSubmorphNamed("prompt list");f&&(f.selectedIndex=a,f.scrollSelectionIntoView)}},onSelection:{derived:!0,after:["preselect","submorphs"],set:function(a){var f=this,m=this.getSubmorphNamed("prompt list");m&&Ud.connect(m,"selection",function(q){return a(q,f)})}}}}}],c,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:18299,end:22508})}(Ud.AbstractPrompt));Ud.ListPrompt=aL;Ud.ListPrompt=aL;Ud.ListPrompt=aL;var bL=ya("aO",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=c.hasOwnProperty("EditListPrompt")&&"function"===typeof c.EditListPrompt?c.EditListPrompt:c.EditListPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"build",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"build",this).call(this,a);this.getSubmorphNamed("prompt list").items=a.items;a=this.addNamed("add item button",{type:"button",label:Ud.Icon.makeLabel("plus")});var f=this.addNamed("remove item button",{type:"button",label:Ud.Icon.makeLabel("minus")});this.getSubmorphNamed("button wrapper").addMorph(a);this.getSubmorphNamed("button wrapper").addMorph(f);
Ud.connect(a,"fire",this,"addItemToList");Ud.connect(f,"fire",this,"removeSelectedItemsFromList")}},{key:"removeSelectedItemsFromList",value:function(){var a=this,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){f=a.get("prompt list");m=1!=f.selectedItems.length?-1:0===f.selectedIndex?0:f.selectedIndex-1;f.items=Ud.arr.withoutAll(f.items,f.selectedItems);0>m?f.selection=null:f.selectedIndex=m;f.focus();q.jumpToEnd()})}},{key:"addItemToList",value:function(){var a=this,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress)return f=a.get("prompt list"),m=f.selection?f.items[f.selectedIndex].string:"",u.yield(a.world().prompt("Input to add to the list",{historyId:a.historyId||"EditListPrompt-input-history",input:m}),2);q=u.yieldResult;if(!q)return u.return();f=a.get("list");r=f.selection?f.selectedIndex+1:f.items.length;f.addItemAt(q,r);f.focus();f.selectedIndex=r;u.jumpToEnd()})}},{key:"keybindings",get:function(){return Nb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Enter",
win:"Ctrl-Enter"},command:"resolve"},{keys:"Ctrl-G",command:"deselect"},{keys:"Shift-=|+",command:"add item to list"},{keys:"Delete|-|Backspace",command:"remove item from list"}])}},{key:"commands",get:function(){var a=this;return Nb._get(Object.getPrototypeOf(l.prototype),"commands",this).concat([{name:"deselect",exec:function(){a.get("list").selection=null;return!0}},{name:"add item to list",exec:function(){a.addItemToList();return!0}},{name:"remove item from list",exec:function(){a.removeSelectedItemsFromList();
return!0}}])}},{key:"resolve",value:function(){var a=this.get("prompt list");return this.answer.resolve({list:a.values,selections:a.selections})}},{key:"reject",value:function(){return this.answer.resolve({list:[],selections:[],status:"canceled"})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.editListPrompt("hello",[1,2,3,4],{multiSelect:!0}),0)})}},
{key:"properties",get:function(){return{master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit list"}}}}}}],c,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:22517,end:25399})}(Ud.ListPrompt));Ud.EditListPrompt=bL;Ud.EditListPrompt=bL;Ud.EditListPrompt=
bL;var fS=Object.freeze({__proto__:null,AbstractPrompt:UK,InformPrompt:VK,ConfirmPrompt:WK,MultipleChoicePrompt:XK,TextPrompt:YK,EditPrompt:ZK,PasswordPrompt:$K,ListPrompt:aL,EditListPrompt:bL}),Ca="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,gS={};(function(b,c){c(gS)})(gS,function(b){function c(ua){"@babel/helpers - typeof";c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(H){return typeof H}:function(H){return H&&"function"===typeof Symbol&&
H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H};return c(ua)}function l(ua,H){if(!(ua instanceof H))throw new TypeError("Cannot call a class as a function");}function a(ua,H){for(var M=0;M<H.length;M++){var R=H[M];R.enumerable=R.enumerable||!1;R.configurable=!0;"value"in R&&(R.writable=!0);Object.defineProperty(ua,R.key,R)}}function f(ua,H,M){H&&a(ua.prototype,H);M&&a(ua,M);return ua}function m(ua,H){var M=Array.isArray(ua)?ua:void 0;if(!M)if("undefined"!==typeof Symbol&&Symbol.iterator in
Object(ua)){M=[];var R=!0,ca=!1,Z=void 0;try{for(var Aa=ua[Symbol.iterator](),db;!(R=(db=Aa.next()).done)&&(M.push(db.value),!H||M.length!==H);R=!0);}catch(S){ca=!0,Z=S}finally{try{if(!R&&null!=Aa["return"])Aa["return"]()}finally{if(ca)throw Z;}}}else M=void 0;if(!(ua=M||r(ua,H)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return ua}function q(ua){var H=Array.isArray(ua)?u(ua):void 0;
H||(H="undefined"!==typeof Symbol&&Symbol.iterator in Object(ua)?Array.from(ua):void 0);if(!(ua=H||r(ua)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return ua}function r(ua,H){if(ua){if("string"===typeof ua)return u(ua,H);var M=Object.prototype.toString.call(ua).slice(8,-1);"Object"===M&&ua.constructor&&(M=ua.constructor.name);if("Map"===M||"Set"===M)return Array.from(ua);if("Arguments"===
M||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M))return u(ua,H)}}function u(ua,H){if(null==H||H>ua.length)H=ua.length;for(var M=0,R=Array(H);M<H;M++)R[M]=ua[M];return R}function v(ua){if("undefined"===typeof Symbol||null==ua[Symbol.iterator]){if(Array.isArray(ua)||(ua=r(ua))){var H=0,M=function(){};return{s:M,n:function(){return H>=ua.length?{done:!0}:{done:!1,value:ua[H++]}},e:function(db){throw db;},f:M}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}var R,ca=!0,Z=!1,Aa;return{s:function(){R=ua[Symbol.iterator]()},n:function(){var db=R.next();ca=db.done;return db},e:function(db){Z=!0;Aa=db},f:function(){try{ca||null==R.return||R.return()}finally{if(Z)throw Aa;}}}}function y(ua){return"number"===typeof ua?ua?0>ua?-1:1:ua===ua?ua:NaN:NaN}function z(ua,H,M,R,ca,Z,Aa){ca=ca*Math.PI/180;var db=Math.cos(ca);ca=Math.sin(ca);var S=ua.subtract(H).multiply(.5),da=S.x*db+S.y*ca;S=S.x*-ca+S.y*db;M=Math.abs(M);R=Math.abs(R);var ea=da*da,Pa=S*S,kb=ea/(M*M)+
Pa/(R*R);1<kb&&(kb=Math.sqrt(kb),M*=kb,R*=kb);kb=M*M;var vc=R*R;Pa*=kb;ea*=vc;ea=(kb*vc-Pa-ea)/(Pa+ea);1E-6>Math.abs(ea)&&(ea=0);ea=Math.sqrt(ea);Z===Aa&&(ea=-ea);ua=ua.add(H).multiply(.5);H=ea*M*S/R;Z=ea*-R*da/M;ea=(da-H)/M;da=(da+H)/M;Pa=(S-Z)/R;kb=(S+Z)/R;S=(new L(1,0)).angleBetween(new L(ea,Pa));da=(new L(ea,Pa)).angleBetween(new L(-da,-kb));!1===Aa&&(da-=J);return[H*db-Z*ca+ua.x,H*ca+Z*db+ua.y,M,R,S,S+da]}function A(ua,H){var M=[];ua=v(ua);var R;try{for(ua.s();!(R=ua.n()).done;){var ca=m(R.value,
2),Z=ca[0],Aa=ca[1],db=null;if("Point2D"===Aa)db=G(Z,H);else if("Number"===Aa)db=C(Z,H);else if("Array<Point2D>"===Aa||"Point2D[]"===Aa){for(var S=[];0<H.length;)S.push(G(Z,H));0<S.length&&(db=S)}else if("Optional<Number>"===Aa||"Number?"===Aa)db=C(Z,H),null===db&&(db=void 0);else throw new TypeError("Unrecognized value type: ".concat(Aa));if(null!==db)M.push(db);else throw new TypeError("Unable to extract value for ".concat(Z));}}catch(da){ua.e(da)}finally{ua.f()}return M}function C(ua,H){var M=
null;if(0<H.length){var R=H[0],ca=c(R);if("number"===ca)return H.shift();if("object"===ca){ua=v(ua);var Z;try{for(ua.s();!(Z=ua.n()).done;){var Aa=Z.value;if(Aa in R&&"number"===typeof R[Aa]){M=R[Aa];break}}}catch(db){ua.e(db)}finally{ua.f()}}}return M}function G(ua,H){var M=null;0<H.length&&function(){var R=H[0],ca=c(R);if("number"===ca){if(1<H.length){var Z=H.shift(),Aa=H.shift();M=new N(Z,Aa)}}else if(Array.isArray(R)&&1<R.length)if(2===R.length)Z=H.shift(),Z=m(Z,2),M=new N(Z[0],Z[1]);else throw new TypeError("Unhandled array of length ".concat(R.length));
else if("object"===ca)if("x"in R&&"y"in R)M=new N(R.x,R.y),H.shift();else{ca=v(ua);try{for(ca.s();!(Z=ca.n()).done;)if(Aa=Z.value,Array.isArray(Aa)){if(Aa.every(function(db){return db in R})){M=new N(R[Aa[0]],R[Aa[1]]);break}}else if(Aa in R){M=G([],[R[Aa]]);break}}catch(db){ca.e(db)}finally{ca.f()}}}();return M}function F(ua){var H=ua.slice();H.push(ua[0]);return H}var N=function(){function ua(){var H=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,M=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:0;l(this||Ca,ua);(this||Ca).x=H;(this||Ca).y=M}f(ua,[{key:"clone",value:function(){return new (this||Ca).constructor((this||Ca).x,(this||Ca).y)}},{key:"add",value:function(H){return new (this||Ca).constructor((this||Ca).x+H.x,(this||Ca).y+H.y)}},{key:"subtract",value:function(H){return new (this||Ca).constructor((this||Ca).x-H.x,(this||Ca).y-H.y)}},{key:"multiply",value:function(H){return new (this||Ca).constructor((this||Ca).x*H,(this||Ca).y*H)}},{key:"divide",value:function(H){return new (this||
Ca).constructor((this||Ca).x/H,(this||Ca).y/H)}},{key:"equals",value:function(H){return(this||Ca).x===H.x&&(this||Ca).y===H.y}},{key:"precisionEquals",value:function(H,M){return Math.abs((this||Ca).x-H.x)<M&&Math.abs((this||Ca).y-H.y)<M}},{key:"lerp",value:function(H,M){var R=1-M;return new (this||Ca).constructor((this||Ca).x*R+H.x*M,(this||Ca).y*R+H.y*M)}},{key:"distanceFrom",value:function(H){var M=(this||Ca).x-H.x;H=(this||Ca).y-H.y;return Math.sqrt(M*M+H*H)}},{key:"min",value:function(H){return new (this||
Ca).constructor(Math.min((this||Ca).x,H.x),Math.min((this||Ca).y,H.y))}},{key:"max",value:function(H){return new (this||Ca).constructor(Math.max((this||Ca).x,H.x),Math.max((this||Ca).y,H.y))}},{key:"transform",value:function(H){return new (this||Ca).constructor(H.a*(this||Ca).x+H.c*(this||Ca).y+H.e,H.b*(this||Ca).x+H.d*(this||Ca).y+H.f)}},{key:"toString",value:function(){return"point(".concat((this||Ca).x,",").concat((this||Ca).y,")")}}]);return ua}(),L=function(){function ua(){var H=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:0,M=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;l(this||Ca,ua);(this||Ca).x=H;(this||Ca).y=M}f(ua,[{key:"length",value:function(){return Math.sqrt((this||Ca).x*(this||Ca).x+(this||Ca).y*(this||Ca).y)}},{key:"magnitude",value:function(){return(this||Ca).x*(this||Ca).x+(this||Ca).y*(this||Ca).y}},{key:"dot",value:function(H){return(this||Ca).x*H.x+(this||Ca).y*H.y}},{key:"cross",value:function(H){return(this||Ca).x*H.y-(this||Ca).y*H.x}},{key:"determinant",
value:function(H){return(this||Ca).x*H.y-(this||Ca).y*H.x}},{key:"unit",value:function(){return this.divide(this.length())}},{key:"add",value:function(H){return new (this||Ca).constructor((this||Ca).x+H.x,(this||Ca).y+H.y)}},{key:"subtract",value:function(H){return new (this||Ca).constructor((this||Ca).x-H.x,(this||Ca).y-H.y)}},{key:"multiply",value:function(H){return new (this||Ca).constructor((this||Ca).x*H,(this||Ca).y*H)}},{key:"divide",value:function(H){return new (this||Ca).constructor((this||
Ca).x/H,(this||Ca).y/H)}},{key:"angleBetween",value:function(H){var M=this.dot(H)/(this.length()*H.length());M=Math.max(-1,Math.min(M,1));M=Math.acos(M);return 0>this.cross(H)?-M:M}},{key:"perp",value:function(){return new (this||Ca).constructor(-(this||Ca).y,(this||Ca).x)}},{key:"perpendicular",value:function(H){return this.subtract(this.project(H))}},{key:"project",value:function(H){var M=this.dot(H)/H.dot(H);return H.multiply(M)}},{key:"transform",value:function(H){return new (this||Ca).constructor(H.a*
(this||Ca).x+H.c*(this||Ca).y,H.b*(this||Ca).x+H.d*(this||Ca).y)}},{key:"equals",value:function(H){return(this||Ca).x===H.x&&(this||Ca).y===H.y}},{key:"precisionEquals",value:function(H,M){return Math.abs((this||Ca).x-H.x)<M&&Math.abs((this||Ca).y-H.y)<M}},{key:"toString",value:function(){return"vector(".concat((this||Ca).x,",").concat((this||Ca).y,")")}}],[{key:"fromPoints",value:function(H,M){return new ua(M.x-H.x,M.y-H.y)}}]);return ua}(),W=function(){function ua(){var H=0<arguments.length&&void 0!==
arguments[0]?arguments[0]:1,M=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,R=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,ca=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,Z=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,Aa=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;l(this||Ca,ua);(this||Ca).a=H;(this||Ca).b=M;(this||Ca).c=R;(this||Ca).d=ca;(this||Ca).e=Z;(this||Ca).f=Aa}f(ua,[{key:"multiply",value:function(H){return this.isIdentity()?H:H.isIdentity()?
this||Ca:new (this||Ca).constructor((this||Ca).a*H.a+(this||Ca).c*H.b,(this||Ca).b*H.a+(this||Ca).d*H.b,(this||Ca).a*H.c+(this||Ca).c*H.d,(this||Ca).b*H.c+(this||Ca).d*H.d,(this||Ca).a*H.e+(this||Ca).c*H.f+(this||Ca).e,(this||Ca).b*H.e+(this||Ca).d*H.f+(this||Ca).f)}},{key:"inverse",value:function(){if(this.isIdentity())return this||Ca;var H=(this||Ca).a*(this||Ca).d-(this||Ca).b*(this||Ca).c;if(0===H)throw Error("Matrix is not invertible");H=1/H;return new (this||Ca).constructor((this||Ca).d*H,-(this||
Ca).b*H,-(this||Ca).c*H,(this||Ca).a*H,((this||Ca).f*(this||Ca).c-(this||Ca).e*(this||Ca).d)*H,((this||Ca).e*(this||Ca).b-(this||Ca).f*(this||Ca).a)*H)}},{key:"translate",value:function(H,M){return new (this||Ca).constructor((this||Ca).a,(this||Ca).b,(this||Ca).c,(this||Ca).d,(this||Ca).a*H+(this||Ca).c*M+(this||Ca).e,(this||Ca).b*H+(this||Ca).d*M+(this||Ca).f)}},{key:"scale",value:function(H){return new (this||Ca).constructor((this||Ca).a*H,(this||Ca).b*H,(this||Ca).c*H,(this||Ca).d*H,(this||Ca).e,
(this||Ca).f)}},{key:"scaleAt",value:function(H,M){var R=M.x-H*M.x;M=M.y-H*M.y;return new (this||Ca).constructor((this||Ca).a*H,(this||Ca).b*H,(this||Ca).c*H,(this||Ca).d*H,(this||Ca).a*R+(this||Ca).c*M+(this||Ca).e,(this||Ca).b*R+(this||Ca).d*M+(this||Ca).f)}},{key:"scaleNonUniform",value:function(H,M){return new (this||Ca).constructor((this||Ca).a*H,(this||Ca).b*H,(this||Ca).c*M,(this||Ca).d*M,(this||Ca).e,(this||Ca).f)}},{key:"scaleNonUniformAt",value:function(H,M,R){var ca=R.x-H*R.x;R=R.y-M*R.y;
return new (this||Ca).constructor((this||Ca).a*H,(this||Ca).b*H,(this||Ca).c*M,(this||Ca).d*M,(this||Ca).a*ca+(this||Ca).c*R+(this||Ca).e,(this||Ca).b*ca+(this||Ca).d*R+(this||Ca).f)}},{key:"rotate",value:function(H){var M=Math.cos(H);H=Math.sin(H);return new (this||Ca).constructor((this||Ca).a*M+(this||Ca).c*H,(this||Ca).b*M+(this||Ca).d*H,(this||Ca).a*-H+(this||Ca).c*M,(this||Ca).b*-H+(this||Ca).d*M,(this||Ca).e,(this||Ca).f)}},{key:"rotateAt",value:function(H,M){var R=Math.cos(H),ca=Math.sin(H);
H=M.x;M=M.y;var Z=(this||Ca).a*R+(this||Ca).c*ca,Aa=(this||Ca).b*R+(this||Ca).d*ca,db=(this||Ca).c*R-(this||Ca).a*ca;R=(this||Ca).d*R-(this||Ca).b*ca;return new (this||Ca).constructor(Z,Aa,db,R,((this||Ca).a-Z)*H+((this||Ca).c-db)*M+(this||Ca).e,((this||Ca).b-Aa)*H+((this||Ca).d-R)*M+(this||Ca).f)}},{key:"rotateFromVector",value:function(H){var M=H.unit();H=M.x;M=M.y;return new (this||Ca).constructor((this||Ca).a*H+(this||Ca).c*M,(this||Ca).b*H+(this||Ca).d*M,(this||Ca).a*-M+(this||Ca).c*H,(this||
Ca).b*-M+(this||Ca).d*H,(this||Ca).e,(this||Ca).f)}},{key:"flipX",value:function(){return new (this||Ca).constructor(-(this||Ca).a,-(this||Ca).b,(this||Ca).c,(this||Ca).d,(this||Ca).e,(this||Ca).f)}},{key:"flipY",value:function(){return new (this||Ca).constructor((this||Ca).a,(this||Ca).b,-(this||Ca).c,-(this||Ca).d,(this||Ca).e,(this||Ca).f)}},{key:"skewX",value:function(H){H=Math.tan(H);return new (this||Ca).constructor((this||Ca).a,(this||Ca).b,(this||Ca).c+(this||Ca).a*H,(this||Ca).d+(this||Ca).b*
H,(this||Ca).e,(this||Ca).f)}},{key:"skewY",value:function(H){H=Math.tan(H);return new (this||Ca).constructor((this||Ca).a+(this||Ca).c*H,(this||Ca).b+(this||Ca).d*H,(this||Ca).c,(this||Ca).d,(this||Ca).e,(this||Ca).f)}},{key:"isIdentity",value:function(){return 1===(this||Ca).a&&0===(this||Ca).b&&0===(this||Ca).c&&1===(this||Ca).d&&0===(this||Ca).e&&0===(this||Ca).f}},{key:"isInvertible",value:function(){return 0!==(this||Ca).a*(this||Ca).d-(this||Ca).b*(this||Ca).c}},{key:"getScale",value:function(){return{scaleX:Math.sqrt((this||
Ca).a*(this||Ca).a+(this||Ca).c*(this||Ca).c),scaleY:Math.sqrt((this||Ca).b*(this||Ca).b+(this||Ca).d*(this||Ca).d)}}},{key:"getDecomposition",value:function(){var H=.5*((this||Ca).a+(this||Ca).d),M=.5*((this||Ca).a-(this||Ca).d),R=.5*((this||Ca).b+(this||Ca).c),ca=.5*((this||Ca).b-(this||Ca).c),Z=Math.sqrt(H*H+ca*ca),Aa=Math.sqrt(M*M+R*R),db=Z+Aa;Z-=Aa;M=Math.atan2(R,M);ca=Math.atan2(ca,H);H=.5*(ca-M);ca=.5*(ca+M);return{translation:(this||Ca).constructor.translation((this||Ca).e,(this||Ca).f),rotation:(this||
Ca).constructor.rotation(ca),scale:(this||Ca).constructor.nonUniformScaling(db,Z),rotation0:(this||Ca).constructor.rotation(H)}}},{key:"equals",value:function(H){return(this||Ca).a===H.a&&(this||Ca).b===H.b&&(this||Ca).c===H.c&&(this||Ca).d===H.d&&(this||Ca).e===H.e&&(this||Ca).f===H.f}},{key:"precisionEquals",value:function(H,M){return Math.abs((this||Ca).a-H.a)<M&&Math.abs((this||Ca).b-H.b)<M&&Math.abs((this||Ca).c-H.c)<M&&Math.abs((this||Ca).d-H.d)<M&&Math.abs((this||Ca).e-H.e)<M&&Math.abs((this||
Ca).f-H.f)<M}},{key:"toString",value:function(){return"matrix(".concat((this||Ca).a,",").concat((this||Ca).b,",").concat((this||Ca).c,",").concat((this||Ca).d,",").concat((this||Ca).e,",").concat((this||Ca).f,")")}}],[{key:"translation",value:function(H,M){return new ua(1,0,0,1,H,M)}},{key:"scaling",value:function(H){return new ua(H,0,0,H,0,0)}},{key:"scalingAt",value:function(H,M){return new ua(H,0,0,H,M.x-M.x*H,M.y-M.y*H)}},{key:"nonUniformScaling",value:function(H,M){return new ua(H,0,0,M,0,0)}},
{key:"nonUniformScalingAt",value:function(H,M,R){return new ua(H,0,0,M,R.x-R.x*H,R.y-R.y*M)}},{key:"rotation",value:function(H){var M=Math.cos(H);H=Math.sin(H);return new ua(M,H,-H,M,0,0)}},{key:"rotationAt",value:function(H,M){var R=Math.cos(H);H=Math.sin(H);return new ua(R,H,-H,R,M.x-M.x*R+M.y*H,M.y-M.y*R-M.x*H)}},{key:"rotationFromVector",value:function(H){var M=H.unit();H=M.x;M=M.y;return new ua(H,M,-M,H,0,0)}},{key:"xFlip",value:function(){return new ua(-1,0,0,1,0,0)}},{key:"yFlip",value:function(){return new ua(1,
0,0,-1,0,0)}},{key:"xSkew",value:function(H){return new ua(1,0,Math.tan(H),1,0,0)}},{key:"ySkew",value:function(H){return new ua(1,Math.tan(H),0,1,0,0)}}]);return ua}();W.IDENTITY=new W;W.IDENTITY.isIdentity=function(){return!0};var la=function(){function ua(){l(this||Ca,ua);(this||Ca).coefs=[];for(var H=arguments.length-1;0<=H;H--)(this||Ca).coefs.push(0>H||arguments.length<=H?void 0:arguments[H]);(this||Ca)._variable="t";(this||Ca)._s=0}f(ua,[{key:"clone",value:function(){var H=new ua;H.coefs=(this||
Ca).coefs.slice();return H}},{key:"eval",value:function(H){if(isNaN(H))throw new TypeError("Parameter must be a number. Found '".concat(H,"'"));for(var M=0,R=(this||Ca).coefs.length-1;0<=R;R--)M=M*H+(this||Ca).coefs[R];return M}},{key:"add",value:function(H){for(var M=new ua,R=this.getDegree(),ca=H.getDegree(),Z=Math.max(R,ca),Aa=0;Aa<=Z;Aa++)M.coefs[Aa]=(Aa<=R?(this||Ca).coefs[Aa]:0)+(Aa<=ca?H.coefs[Aa]:0);return M}},{key:"multiply",value:function(H){for(var M=new ua,R=0;R<=this.getDegree()+H.getDegree();R++)M.coefs.push(0);
for(R=0;R<=this.getDegree();R++)for(var ca=0;ca<=H.getDegree();ca++)M.coefs[R+ca]+=(this||Ca).coefs[R]*H.coefs[ca];return M}},{key:"divideEqualsScalar",value:function(H){for(var M=0;M<(this||Ca).coefs.length;M++)(this||Ca).coefs[M]/=H}},{key:"simplifyEquals",value:function(){for(var H=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1E-12,M=this.getDegree();0<=M;M--)if(Math.abs((this||Ca).coefs[M])<=H)(this||Ca).coefs.pop();else break}},{key:"removeZerosEquals",value:function(){for(var H=(this||
Ca).coefs,M=10*(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1E-15)*Math.abs(H.reduce(function(ca,Z){return Math.abs(Z)>Math.abs(ca)?Z:ca})),R=0;R<H.length-1;R++)Math.abs(H[R])<M&&(H[R]=0);return this||Ca}},{key:"monicEquals",value:function(){var H=(this||Ca).coefs;1!==H[H.length-1]&&this.divideEqualsScalar(H[H.length-1]);return this||Ca}},{key:"toString",value:function(){for(var H=[],M=[],R=(this||Ca).coefs.length-1;0<=R;R--){var ca=Math.round(1E3*(this||Ca).coefs[R])/1E3;if(0!==ca){var Z=
0>ca?" - ":" + ";ca=Math.abs(ca);0<R&&(ca=1===ca?(this||Ca)._variable:ca+(this||Ca)._variable);1<R&&(ca+="^"+R);M.push(Z);H.push(ca)}}M[0]=" + "===M[0]?"":"-";R="";for(ca=0;ca<H.length;ca++)R+=M[ca]+H[ca];return R}},{key:"bisection",value:function(H,M){var R=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1E-6,ca=3<arguments.length&&void 0!==arguments[3]?arguments[3]:15,Z=this.eval(H),Aa=this.eval(M);if(Math.abs(Z)<=R)var db=H;else if(Math.abs(Aa)<=R)db=M;else if(0>=Z*Aa)for(ca=Math.ceil((Math.log(M-
H)+Math.LN10*ca)/Math.LN2),Aa=0;Aa<ca;Aa++){db=.5*(H+M);var S=this.eval(db);if(Math.abs(S)<=R)break;0>S*Z?M=db:(H=db,Z=S)}return db}},{key:"trapezoid",value:function(H,M,R){if(isNaN(H)||isNaN(M)||isNaN(R))throw new TypeError("Parameters must be numbers");var ca=M-H;if(1===R)R=this.eval(H),M=this.eval(M),(this||Ca)._s=.5*ca*(R+M);else{M=1<<R-2;R=ca/M;H+=.5*R;for(var Z=0,Aa=0;Aa<M;Aa++)Z+=this.eval(H),H+=R;(this||Ca)._s=.5*((this||Ca)._s+ca*Z/M)}if(isNaN((this||Ca)._s))throw new TypeError("this._s is NaN");
return(this||Ca)._s}},{key:"simpson",value:function(H,M){if(isNaN(H)||isNaN(M))throw new TypeError("Parameters must be numbers");var R=M-H,ca=.5*R*(this.eval(H)+this.eval(M));M=ca;for(var Z=4*ca/3,Aa=Z,db=ca,S=1,da=2;20>=da;da++){ca=R/S;Z=H+.5*ca;for(var ea=0,Pa=1;Pa<=S;Pa++)ea+=this.eval(Z),Z+=ca;ca=M=.5*(M+R*ea/S);Z=(4*ca-db)/3;if(Math.abs(Z-Aa)<1E-7*Math.abs(Aa))break;Aa=Z;db=ca;S<<=1}return Z}},{key:"romberg",value:function(H,M){if(isNaN(H)||isNaN(M))throw new TypeError("Parameters must be numbers");
for(var R=Array(21),ca=Array(21),Z={y:0,dy:0},Aa=ca[0]=1;20>=Aa;Aa++){R[Aa-1]=this.trapezoid(H,M,Aa);if(3<=Aa&&(Z=ua.interpolate(ca,R,3,Aa-3,0),Math.abs(Z.dy)<=1E-6*Z.y))break;R[Aa]=R[Aa-1];ca[Aa]=.25*ca[Aa-1]}return Z.y}},{key:"zeroErrorEstimate",value:function(H){var M=this||Ca;if("undefined"===typeof H){var R=M.bounds();H=Math.max(Math.abs(R.minX),Math.abs(R.maxX))}if(.001>H)return 2*Math.abs(M.eval(1E-15));var ca=M.coefs[M.coefs.length-1];return 10*1E-15*M.coefs.reduce(function(Z,Aa,db){Aa=Aa/
ca*Math.pow(H,db);return Aa>Z?Aa:Z},0)}},{key:"boundsUpperRealFujiwara",value:function(){var H=(this||Ca).coefs,M=H.length-1,R=H[M];1!==R&&(H=(this||Ca).coefs.map(function(S){return S/R}));var ca=H.map(function(S,da){return da<M?Math.pow(Math.abs(0===da?S/2:S),1/(M-da)):S}),Z=function(S,da,ea){Aa(ea)&&(S.max<da?(S.nearmax=S.max,S.max=da):S.nearmax<da&&(S.nearmax=da));return S};var Aa=function(S){return S<M&&0>H[S]};var db=ca.reduce(Z,{max:0,nearmax:0});Aa=function(S){return S<M&&(M%2===S%2?0>H[S]:
0<H[S])};return{negX:-2*ca.reduce(Z,{max:0,nearmax:0}).max,posX:2*db.max}}},{key:"boundsLowerRealFujiwara",value:function(){var H=new ua;H.coefs=(this||Ca).coefs.slice().reverse();H=H.boundsUpperRealFujiwara();H.negX=1/H.negX;H.posX=1/H.posX;return H}},{key:"bounds",value:function(){var H=this.boundsUpperRealFujiwara(),M={minX:H.negX,maxX:H.posX};if(0===H.negX&&0===H.posX)return M;0===H.negX?M.minX=this.boundsLowerRealFujiwara().posX:0===H.posX&&(M.maxX=this.boundsLowerRealFujiwara().negX);M.minX>
M.maxX&&(M.minX=M.maxX=0);return M}},{key:"boundUpperAbsRouche",value:function(){var H=(this||Ca).coefs,M=H.length-1;return 1+H.reduce(function(R,ca,Z){return Z!==M?(ca=Math.abs(ca),R<ca?ca:R):R},0)/Math.abs(H[M])}},{key:"boundLowerAbsRouche",value:function(){var H=(this||Ca).coefs,M=H.reduce(function(R,ca,Z){return 0!==Z?(ca=Math.abs(ca),R<ca?ca:R):R},0);return Math.abs(H[0])/(Math.abs(H[0])+M)}},{key:"boundsRealLaguerre",value:function(){var H=(this||Ca).coefs,M=H.length-1,R=-H[M-1]/(M*H[M]);H=
(M-1)/(M*H[M])*Math.sqrt(H[M-1]*H[M-1]-2*M/(M-1)*H[M]*H[M-2]);0>H&&(H=-H);return{minX:R-H,maxX:R+H}}},{key:"countRootsDescartes",value:function(){var H=(this||Ca).coefs,M=H.length-1;H=H.reduce(function(R,ca,Z){0!==R.prev_a&&0!==ca&&(0>R.prev_a===0<ca&&R.pos++,0===Z%2!==0>R.prev_a===(1===Z%2!==0<ca)&&R.neg++);R.prev_a=ca;return R},{pos:0,neg:0,prev_a:0});return{maxRealPos:H.pos,maxRealNeg:H.neg,minComplex:M-(H.pos+H.neg)}}},{key:"getDegree",value:function(){return(this||Ca).coefs.length-1}},{key:"getDerivative",
value:function(){for(var H=new ua,M=1;M<(this||Ca).coefs.length;M++)H.coefs.push(M*(this||Ca).coefs[M]);return H}},{key:"getRoots",value:function(){this.simplifyEquals();switch(this.getDegree()){case 0:var H=[];break;case 1:H=this.getLinearRoot();break;case 2:H=this.getQuadraticRoots();break;case 3:H=this.getCubicRoots();break;case 4:H=this.getQuarticRoots();break;default:H=[]}return H}},{key:"getRootsInInterval",value:function(H,M){function R(Aa){"number"===typeof Aa&&ca.push(Aa)}var ca=[];if(0===
this.getDegree())throw new RangeError("Unexpected empty polynomial");if(1===this.getDegree())R(this.bisection(H,M));else{var Z=this.getDerivative().getRootsInInterval(H,M);if(0<Z.length){R(this.bisection(H,Z[0]));for(H=0;H<=Z.length-2;H++)R(this.bisection(Z[H],Z[H+1]));R(this.bisection(Z[Z.length-1],M))}else R(this.bisection(H,M))}return ca}},{key:"getLinearRoot",value:function(){var H=[],M=(this||Ca).coefs[1];0!==M&&H.push(-(this||Ca).coefs[0]/M);return H}},{key:"getQuadraticRoots",value:function(){var H=
[];if(2===this.getDegree()){var M=(this||Ca).coefs[2],R=(this||Ca).coefs[1]/M;M=R*R-(this||Ca).coefs[0]/M*4;0<M?(M=Math.sqrt(M),H.push(.5*(-R+M)),H.push(.5*(-R-M))):0===M&&H.push(.5*-R)}return H}},{key:"getCubicRoots",value:function(){var H=[];if(3===this.getDegree()){var M=(this||Ca).coefs[3],R=(this||Ca).coefs[2]/M,ca=(this||Ca).coefs[1]/M,Z=(3*ca-R*R)/3;M=(2*R*R*R-9*ca*R+(this||Ca).coefs[0]/M*27)/27;R/=3;ca=M*M/4+Z*Z*Z/27;M/=2;var Aa=this.zeroErrorEstimate();Math.abs(ca)<=Aa&&(ca=0);0<ca?(Z=Math.sqrt(ca),
Aa=-M+Z,ca=0<=Aa?Math.pow(Aa,1/3):-Math.pow(-Aa,1/3),Aa=-M-Z,ca=0<=Aa?ca+Math.pow(Aa,1/3):ca-Math.pow(-Aa,1/3),H.push(ca-R)):0>ca?(Z=Math.sqrt(-Z/3),ca=Math.atan2(Math.sqrt(-ca),-M)/3,M=Math.cos(ca),ca=Math.sin(ca),Aa=Math.sqrt(3),H.push(2*Z*M-R),H.push(-Z*(M+Aa*ca)-R),H.push(-Z*(M-Aa*ca)-R)):(Z=0<=M?-Math.pow(M,1/3):Math.pow(-M,1/3),H.push(2*Z-R),H.push(-Z-R))}return H}},{key:"getQuarticRoots",value:function(){var H=[],M=this.getDegree();if(4===M){var R=new ua;R.coefs=(this||Ca).coefs.slice();R.divideEqualsScalar(R.coefs[M]);
Math.abs(R.coefs[0])<10*1E-15*Math.abs(R.coefs[3])&&(R.coefs[0]=0);for(var ca=R.getDerivative(),Z=ca.getRoots().sort(function(kb,vc){return kb-vc}),Aa=[],db=Z.length-1,S=this.bounds(),da=this.zeroErrorEstimate(Math.max(Math.abs(S.minX),Math.abs(S.maxX))),ea=0;ea<=db;ea++)Aa.push(R.eval(Z[ea]));for(ea=0;ea<=db;ea++)Math.abs(Aa[ea])<da&&(Aa[ea]=0);da=0;var Pa=Math.max(.1*(S.maxX-S.minX)/M,1E-15);M=[];ea=[];if(-1<db){0!==Aa[0]?y(Aa[0])!==y(R.eval(Z[0]-Pa)-Aa[0])&&(M.push(Z[0]-Pa),ea.push([S.minX,Z[0]])):
(H.push(Z[0],Z[0]),da++);for(;da<db;da++)0===Aa[da+1]?(H.push(Z[da+1],Z[da+1]),da++):y(Aa[da])!==y(Aa[da+1])&&(M.push((Z[da]+Z[da+1])/2),ea.push([Z[da],Z[da+1]]));0!==Aa[db]&&y(Aa[db])!==y(R.eval(Z[db]+Pa)-Aa[db])&&(M.push(Z[db]+Pa),ea.push([Z[db],S.maxX]))}Z=function(kb){return R.eval(kb)};Aa=function(kb){return ca.eval(kb)};if(0<M.length)for(da=0;da<M.length;da++)M[da]=ua.newtonSecantBisection(M[da],Z,Aa,32,ea[da][0],ea[da][1]);H=H.concat(M)}return H}}],[{key:"interpolate",value:function(H,M,R,
ca,Z){if(H.constructor!==Array||M.constructor!==Array)throw new TypeError("xs and ys must be arrays");if(isNaN(R)||isNaN(ca)||isNaN(Z))throw new TypeError("n, offset, and x must be numbers");var Aa,db=0,S=Array(R),da=Array(R),ea=0,Pa=Math.abs(Z-H[ca]);for(Aa=0;Aa<R;Aa++){var kb=Math.abs(Z-H[ca+Aa]);kb<Pa&&(ea=Aa,Pa=kb);S[Aa]=da[Aa]=M[ca+Aa]}M=M[ca+ea];ea--;for(Pa=1;Pa<R;Pa++){for(Aa=0;Aa<R-Pa;Aa++){db=H[ca+Aa]-Z;kb=H[ca+Aa+Pa]-Z;var vc=S[Aa+1]-da[Aa],mc=db-kb;if(0===mc)throw new RangeError("Unable to interpolate polynomial. Two numbers in n were identical (to within roundoff)");
mc=vc/mc;da[Aa]=kb*mc;S[Aa]=db*mc}db=2*(ea+1)<R-Pa?S[ea+1]:da[ea--];M+=db}return{y:M,dy:db}}},{key:"newtonSecantBisection",value:function(H,M,R,ca,Z,Aa){var db=0,S=0;var da=H;var ea=Math.pow(10,-14);if(H="number"===typeof Z&&"number"===typeof Aa){if(Z>Aa)throw new RangeError("Min must be greater than max");var Pa=M(Z);var kb=M(Aa);if(y(Pa)===y(kb))throw new RangeError("Y values of bounds must be of opposite sign");}for(var vc=function(){return Math.abs(id)<=ea*Math.abs(da)||S===da-id-da},mc=0;mc<
ca;mc++){var Yb=R(da);if(0===Yb){if(0===db)throw new RangeError("df(x) is zero");Yb=db}db=Yb;var ud=M(da);var id=ud/Yb;Yb=da-id;if(vc())break;if(H){if(y(ud)===y(kb))Aa=da,kb=ud;else if(y(ud)===y(Pa))Z=da,Pa=ud;else{da=Yb;break}if(Yb<Z||Yb>Aa){if(y(Pa)===y(kb))break;ud=kb-Pa;Yb=Aa-Z;id=0===ud?da-(Z+.5*Yb):50<Math.abs(ud/Math.min(Pa,kb))?da-(Z+Yb*(.5+(Math.abs(Pa)<Math.abs(kb)?-.25:.25))):da-(Z-Pa/ud*Yb);Yb=da-id;if(vc())break}}S=da-Yb;da=Yb}return da}}]);return ua}(),wa=function(){function ua(H,M){l(this||
Ca,ua);(this||Ca).type=H;(this||Ca).text=M}f(ua,[{key:"typeis",value:function(H){return(this||Ca).type===H}}]);return ua}();wa.UNDEFINED=0;wa.COMMAND=1;wa.NUMBER=2;wa.EOD=3;var D=function(){function ua(H){l(this||Ca,ua);if(null===H||void 0===H)H="";this.setPathData(H)}f(ua,[{key:"setPathData",value:function(H){if("string"!==typeof H)throw new TypeError("The first parameter must be a string");(this||Ca)._pathData=H}},{key:"getNextToken",value:function(){for(var H=null,M=(this||Ca)._pathData;null===
H;)if(null===M||""===M)H=new wa(wa.EOD,"");else if(M.match(/^([ \t\r\n,]+)/))M=M.substr(RegExp.$1.length);else if(M.match(/^([AaCcHhLlMmQqSsTtVvZz])/))H=new wa(wa.COMMAND,RegExp.$1),M=M.substr(RegExp.$1.length);else if(M.match(/^(([-+]?\d+(\.\d*)?|[-+]?\.\d+)([eE][-+]?\d+)?)/))H=new wa(wa.NUMBER,RegExp.$1),M=M.substr(RegExp.$1.length);else throw new SyntaxError("Unrecognized path data: ".concat(M));(this||Ca)._pathData=M;return H}}]);return ua}(),Q=function(){function ua(){l(this||Ca,ua);(this||Ca)._lexer=
new D;(this||Ca)._handler=null}f(ua,[{key:"parseData",value:function(H){if("string"!==typeof H)throw new TypeError("The first parameter must be a string: ".concat(H));null!==(this||Ca)._handler&&"function"===typeof(this||Ca)._handler.beginParse&&(this||Ca)._handler.beginParse();var M=(this||Ca)._lexer;M.setPathData(H);H="BOP";for(var R=null,ca=M.getNextToken();!1===ca.typeis(wa.EOD);){var Z=[];switch(ca.type){case wa.COMMAND:if("BOP"===H&&"M"!==ca.text&&"m"!==ca.text)throw new SyntaxError("New paths must begin with a moveto command. Found '".concat(ca.text,
"'"));H=ca.text;var Aa=ua.PARAMCOUNT[ca.text.toUpperCase()];ca=M.getNextToken();break;case wa.NUMBER:if("BOP"===H)throw new SyntaxError("New paths must begin with a moveto command. Found '".concat(ca.text,"'"));Aa=ua.PARAMCOUNT[H.toUpperCase()];break;default:throw new SyntaxError("Unrecognized command type: ".concat(ca.type));}for(var db=0;db<Aa;db++){switch(ca.type){case wa.COMMAND:throw new SyntaxError("Parameter must be a number. Found '".concat(ca.text,"'"));case wa.NUMBER:Z[db]=parseFloat(ca.text);
break;case wa.EOD:throw new SyntaxError("Unexpected end of string");default:throw new SyntaxError("Unrecognized parameter type. Found type '".concat(ca.type,"'"));}ca=M.getNextToken()}if(null!==(this||Ca)._handler){Aa=(this||Ca)._handler;db=ua.METHODNAME[H];if("a"===H||"A"===H)Z[3]=0!==Z[3],Z[4]=0!==Z[4];null!==Aa&&"function"===typeof Aa[db]&&Aa[db].apply(Aa,Z)}switch(H){case "M":H="L";break;case "m":H="l";break;case "Z":case "z":H="BOP"}if(ca===R)throw new SyntaxError("Parser stalled on '".concat(ca.text,
"'"));R=ca}null!==(this||Ca)._handler&&"function"===typeof(this||Ca)._handler.endParse&&(this||Ca)._handler.endParse()}},{key:"setHandler",value:function(H){(this||Ca)._handler=H}}]);return ua}();Q.PARAMCOUNT={A:7,C:6,H:1,L:2,M:2,Q:4,S:4,T:2,V:1,Z:0};Q.METHODNAME={A:"arcAbs",a:"arcRel",C:"curvetoCubicAbs",c:"curvetoCubicRel",H:"linetoHorizontalAbs",h:"linetoHorizontalRel",L:"linetoAbs",l:"linetoRel",M:"movetoAbs",m:"movetoRel",Q:"curvetoQuadraticAbs",q:"curvetoQuadraticRel",S:"curvetoCubicSmoothAbs",
s:"curvetoCubicSmoothRel",T:"curvetoQuadraticSmoothAbs",t:"curvetoQuadraticSmoothRel",V:"linetoVerticalAbs",v:"linetoVerticalRel",Z:"closePath",z:"closePath"};var J=2*Math.PI,O=function(){function ua(H){l(this||Ca,ua);(this||Ca).shapeCreator=H;(this||Ca).shapes=[];(this||Ca).firstX=null;(this||Ca).firstY=null;(this||Ca).lastX=null;(this||Ca).lastY=null;(this||Ca).lastCommand=null}f(ua,[{key:"beginParse",value:function(){(this||Ca).shapes=[];(this||Ca).firstX=null;(this||Ca).firstY=null;(this||Ca).lastX=
null;(this||Ca).lastY=null;(this||Ca).lastCommand=null}},{key:"addShape",value:function(H){(this||Ca).shapes.push(H)}},{key:"arcAbs",value:function(H,M,R,ca,Z,Aa,db){if(0===H||0===M)this.addShape((this||Ca).shapeCreator.line((this||Ca).lastX,(this||Ca).lastY,Aa,db));else{var S;H=z(new N((this||Ca).lastX,(this||Ca).lastY),new N(Aa,db),H,M,R,ca,Z);this.addShape((S=(this||Ca).shapeCreator).arc.apply(S,q(H)))}(this||Ca).lastCommand="A";(this||Ca).lastX=Aa;(this||Ca).lastY=db}},{key:"arcRel",value:function(H,
M,R,ca,Z,Aa,db){if(0===H||0===M)this.addShape((this||Ca).shapeCreator.line((this||Ca).lastX,(this||Ca).lastY,(this||Ca).lastX+Aa,(this||Ca).lastY+db));else{var S;H=z(new N((this||Ca).lastX,(this||Ca).lastY),new N((this||Ca).lastX+Aa,(this||Ca).lastY+db),H,M,R,ca,Z);this.addShape((S=(this||Ca).shapeCreator).arc.apply(S,q(H)))}(this||Ca).lastCommand="a";(this||Ca).lastX+=Aa;(this||Ca).lastY+=db}},{key:"curvetoCubicAbs",value:function(H,M,R,ca,Z,Aa){this.addShape((this||Ca).shapeCreator.cubicBezier((this||
Ca).lastX,(this||Ca).lastY,H,M,R,ca,Z,Aa));(this||Ca).lastX=Z;(this||Ca).lastY=Aa;(this||Ca).lastCommand="C"}},{key:"curvetoCubicRel",value:function(H,M,R,ca,Z,Aa){this.addShape((this||Ca).shapeCreator.cubicBezier((this||Ca).lastX,(this||Ca).lastY,(this||Ca).lastX+H,(this||Ca).lastY+M,(this||Ca).lastX+R,(this||Ca).lastY+ca,(this||Ca).lastX+Z,(this||Ca).lastY+Aa));(this||Ca).lastX+=Z;(this||Ca).lastY+=Aa;(this||Ca).lastCommand="c"}},{key:"linetoHorizontalAbs",value:function(H){this.addShape((this||
Ca).shapeCreator.line((this||Ca).lastX,(this||Ca).lastY,H,(this||Ca).lastY));(this||Ca).lastX=H;(this||Ca).lastCommand="H"}},{key:"linetoHorizontalRel",value:function(H){this.addShape((this||Ca).shapeCreator.line((this||Ca).lastX,(this||Ca).lastY,(this||Ca).lastX+H,(this||Ca).lastY));(this||Ca).lastX+=H;(this||Ca).lastCommand="h"}},{key:"linetoAbs",value:function(H,M){this.addShape((this||Ca).shapeCreator.line((this||Ca).lastX,(this||Ca).lastY,H,M));(this||Ca).lastX=H;(this||Ca).lastY=M;(this||Ca).lastCommand=
"L"}},{key:"linetoRel",value:function(H,M){this.addShape((this||Ca).shapeCreator.line((this||Ca).lastX,(this||Ca).lastY,(this||Ca).lastX+H,(this||Ca).lastY+M));(this||Ca).lastX+=H;(this||Ca).lastY+=M;(this||Ca).lastCommand="l"}},{key:"movetoAbs",value:function(H,M){(this||Ca).firstX=H;(this||Ca).firstY=M;(this||Ca).lastX=H;(this||Ca).lastY=M;(this||Ca).lastCommand="M"}},{key:"movetoRel",value:function(H,M){(this||Ca).firstX+=H;(this||Ca).firstY+=M;(this||Ca).lastX+=H;(this||Ca).lastY+=M;(this||Ca).lastCommand=
"m"}},{key:"curvetoQuadraticAbs",value:function(H,M,R,ca){this.addShape((this||Ca).shapeCreator.quadraticBezier((this||Ca).lastX,(this||Ca).lastY,H,M,R,ca));(this||Ca).lastX=R;(this||Ca).lastY=ca;(this||Ca).lastCommand="Q"}},{key:"curvetoQuadraticRel",value:function(H,M,R,ca){this.addShape((this||Ca).shapeCreator.quadraticBezier((this||Ca).lastX,(this||Ca).lastY,(this||Ca).lastX+H,(this||Ca).lastY+M,(this||Ca).lastX+R,(this||Ca).lastY+ca));(this||Ca).lastX+=R;(this||Ca).lastY+=ca;(this||Ca).lastCommand=
"q"}},{key:"curvetoCubicSmoothAbs",value:function(H,M,R,ca){if((this||Ca).lastCommand.match(/^[SsCc]$/)){var Z=(this||Ca).shapes[(this||Ca).shapes.length-1].args[2];var Aa=2*(this||Ca).lastX-Z.x;Z=2*(this||Ca).lastY-Z.y}else Aa=(this||Ca).lastX,Z=(this||Ca).lastY;this.addShape((this||Ca).shapeCreator.cubicBezier((this||Ca).lastX,(this||Ca).lastY,Aa,Z,H,M,R,ca));(this||Ca).lastX=R;(this||Ca).lastY=ca;(this||Ca).lastCommand="S"}},{key:"curvetoCubicSmoothRel",value:function(H,M,R,ca){if((this||Ca).lastCommand.match(/^[SsCc]$/)){var Z=
(this||Ca).shapes[(this||Ca).shapes.length-1].args[2];var Aa=2*(this||Ca).lastX-Z.x;Z=2*(this||Ca).lastY-Z.y}else Aa=(this||Ca).lastX,Z=(this||Ca).lastY;this.addShape((this||Ca).shapeCreator.cubicBezier((this||Ca).lastX,(this||Ca).lastY,Aa,Z,(this||Ca).lastX+H,(this||Ca).lastY+M,(this||Ca).lastX+R,(this||Ca).lastY+ca));(this||Ca).lastX+=R;(this||Ca).lastY+=ca;(this||Ca).lastCommand="s"}},{key:"curvetoQuadraticSmoothAbs",value:function(H,M){if((this||Ca).lastCommand.match(/^[QqTt]$/)){var R=(this||
Ca).shapes[(this||Ca).shapes.length-1].args[1];var ca=2*(this||Ca).lastX-R.x;R=2*(this||Ca).lastY-R.y}else ca=(this||Ca).lastX,R=(this||Ca).lastY;this.addShape((this||Ca).shapeCreator.quadraticBezier((this||Ca).lastX,(this||Ca).lastY,ca,R,H,M));(this||Ca).lastX=H;(this||Ca).lastY=M;(this||Ca).lastCommand="T"}},{key:"curvetoQuadraticSmoothRel",value:function(H,M){if((this||Ca).lastCommand.match(/^[QqTt]$/)){var R=(this||Ca).shapes[(this||Ca).shapes.length-1].args[1];var ca=2*(this||Ca).lastX-R.x;R=
2*(this||Ca).lastY-R.y}else ca=(this||Ca).lastX,R=(this||Ca).lastY;this.addShape((this||Ca).shapeCreator.quadraticBezier((this||Ca).lastX,(this||Ca).lastY,ca,R,(this||Ca).lastX+H,(this||Ca).lastY+M));(this||Ca).lastX+=H;(this||Ca).lastY+=M;(this||Ca).lastCommand="t"}},{key:"linetoVerticalAbs",value:function(H){this.addShape((this||Ca).shapeCreator.line((this||Ca).lastX,(this||Ca).lastY,(this||Ca).lastX,H));(this||Ca).lastY=H;(this||Ca).lastCommand="V"}},{key:"linetoVerticalRel",value:function(H){this.addShape((this||
Ca).shapeCreator.line((this||Ca).lastX,(this||Ca).lastY,(this||Ca).lastX,(this||Ca).lastY+H));(this||Ca).lastY+=H;(this||Ca).lastCommand="v"}},{key:"closePath",value:function(){this.addShape((this||Ca).shapeCreator.line((this||Ca).lastX,(this||Ca).lastY,(this||Ca).firstX,(this||Ca).firstY));(this||Ca).lastX=(this||Ca).firstX;(this||Ca).lastY=(this||Ca).firstY;(this||Ca).lastCommand="z"}}]);return ua}(),ja=.5*Math.PI,X=new Q,ha=function(){function ua(H,M){l(this||Ca,ua);(this||Ca).name=H;(this||Ca).args=
M}f(ua,null,[{key:"arc",value:function(){for(var H=arguments.length,M=Array(H),R=0;R<H;R++)M[R]=arguments[R];H=A([[["center",["centerX","centerY"],["cx","cy"]],"Point2D"],[["radiusX","rx"],"Number"],[["radiusY","ry"],"Number"],[["startRadians"],"Number"],[["endRadians"],"Number"]],M);return new ua(ua.ARC,H)}},{key:"quadraticBezier",value:function(){for(var H=arguments.length,M=Array(H),R=0;R<H;R++)M[R]=arguments[R];H=A([[["p1",["p1x","p1y"]],"Point2D"],[["p2",["p2x","p2y"]],"Point2D"],[["p3",["p3x",
"p3y"]],"Point2D"]],M);return new ua(ua.QUADRATIC_BEZIER,H)}},{key:"cubicBezier",value:function(){for(var H=arguments.length,M=Array(H),R=0;R<H;R++)M[R]=arguments[R];H=A([[["p1",["p1x","p1y"]],"Point2D"],[["p2",["p2x","p2y"]],"Point2D"],[["p3",["p3x","p3y"]],"Point2D"],[["p4",["p4x","p4y"]],"Point2D"]],M);return new ua(ua.CUBIC_BEZIER,H)}},{key:"circle",value:function(){for(var H=arguments.length,M=Array(H),R=0;R<H;R++)M[R]=arguments[R];H=A([[["center",["centerX","centerY"],["cx","cy"]],"Point2D"],
[["radius","r"],"Number"]],M);return new ua(ua.CIRCLE,H)}},{key:"ellipse",value:function(){for(var H=arguments.length,M=Array(H),R=0;R<H;R++)M[R]=arguments[R];H=A([[["center",["centerX","centerY"],["cx","cy"]],"Point2D"],[["radiusX","rx"],"Number"],[["radiusY","ry"],"Number"]],M);return new ua(ua.ELLIPSE,H)}},{key:"line",value:function(){for(var H=arguments.length,M=Array(H),R=0;R<H;R++)M[R]=arguments[R];H=A([[["p1",["p1x","p1y"],["x1","y1"]],"Point2D"],[["p2",["p2x","p2y"],["x2","y2"]],"Point2D"]],
M);return new ua(ua.LINE,H)}},{key:"path",value:function(){X.parseData(0>=arguments.length?void 0:arguments[0]);return new ua(ua.PATH,bb.shapes)}},{key:"polygon",value:function(){for(var H=arguments.length,M=Array(H),R=0;R<H;R++)M[R]=arguments[R];H=A([[[],"Array<Point2D>"]],1===M.length&&Array.isArray(M[0])?M[0]:M);return new ua(ua.POLYGON,H)}},{key:"polyline",value:function(){for(var H=arguments.length,M=Array(H),R=0;R<H;R++)M[R]=arguments[R];H=A([[[],"Array<Point2D>"]],1===M.length&&Array.isArray(M[0])?
M[0]:M);return new ua(ua.POLYLINE,H)}},{key:"rectangle",value:function(){for(var H=arguments.length,M=Array(H),R=0;R<H;R++)M[R]=arguments[R];H=A([[["topLeft",["x","y"],["left","top"]],"Point2D"],[["size",["width","height"],["w","h"]],"Point2D"],[["radiusX","rx"],"Optional<Number>"],[["radiusY","ry"],"Optional<Number>"]],M);M=H[0];R=H[1];H[1]=new N(M.x+R.x,M.y+R.y);var ca=new ua(ua.RECTANGLE,H);H=ca.args.pop();M=ca.args.pop();M=void 0===M?0:M;H=void 0===H?0:H;if(0===M&&0===H)return ca;var Z=ca.args[0];
R=Z.x;Z=Z.y;var Aa=ca.args[1];ca=Aa.x;Aa=Aa.y;var db=ca-R,S=Aa-Z;0===M&&(M=H);0===H&&(H=M);M>.5*db&&(M=.5*db);H>.5*S&&(H=.5*S);db=R+M;S=Z+H;var da=ca-M,ea=Aa-H;H=[ua.arc(db,S,M,H,2*ja,3*ja),ua.line(db,Z,da,Z),ua.arc(da,S,M,H,3*ja,4*ja),ua.line(ca,S,ca,ea),ua.arc(da,ea,M,H,0,ja),ua.line(da,Aa,db,Aa),ua.arc(db,ea,M,H,ja,2*ja),ua.line(R,ea,R,S)];return new ua(ua.PATH,H)}}]);return ua}();ha.ARC="Arc";ha.QUADRATIC_BEZIER="Bezier2";ha.CUBIC_BEZIER="Bezier3";ha.CIRCLE="Circle";ha.ELLIPSE="Ellipse";ha.LINE=
"Line";ha.PATH="Path";ha.POLYGON="Polygon";ha.POLYLINE="Polyline";ha.RECTANGLE="Rectangle";var bb=new O(ha);X.setHandler(bb);var pb=2*Math.PI,oa=new L(1,0),ba=function(){function ua(H){l(this||Ca,ua);this.init(H)}f(ua,[{key:"init",value:function(H){(this||Ca).status=H;(this||Ca).points=[]}},{key:"appendPoint",value:function(H){(this||Ca).points.push(H)}},{key:"appendPoints",value:function(H){(this||Ca).points=(this||Ca).points.concat(H)}}],[{key:"intersect",value:function(H,M){if(null!==H&&void 0!==
H&&null!==M&&void 0!==M)if("Path"===H.name)var R=ua.intersectPathShape(H,M);else if("Path"===M.name)R=ua.intersectPathShape(M,H);else if("Arc"===H.name)R=ua.intersectArcShape(H,M);else if("Arc"===M.name)R=ua.intersectArcShape(M,H);else{H.name<M.name?(R="intersect"+H.name+M.name,H=H.args.concat(M.args)):(R="intersect"+M.name+H.name,H=M.args.concat(H.args));if(!(R in ua))throw new TypeError("Intersection not available: "+R);R=ua[R].apply(null,H)}else R=new ua("No Intersection");return R}},{key:"intersectPathShape",
value:function(H,M){var R=new ua("No Intersection");H=v(H.args);var ca;try{for(H.s();!(ca=H.n()).done;){var Z=ua.intersect(ca.value,M);R.appendPoints(Z.points)}}catch(Aa){H.e(Aa)}finally{H.f()}0<R.points.length&&(R.status="Intersection");return R}},{key:"intersectArcShape",value:function(H,M){var R=m(H.args,5);H=R[0];var ca=R[3],Z=R[4];R=new ha(ha.ELLIPSE,[H,R[1],R[2]]);M=ua.intersect(R,M);R=Z;if(0===M.points.length)var Aa=M;else{Z=new ba("No Intersection");R<ca&&(R=[R,ca],ca=R[0],R=R[1]);if(0>ca||
0>R)ca+=pb,R+=pb;M=v(M.points);try{for(M.s();!(Aa=M.n()).done;){var db=Aa.value,S=oa.angleBetween(L.fromPoints(H,db))%pb;var da=0>S?S+pb:S;da<ca&&(da+=pb);ca<=da&&da<=R&&Z.appendPoint(db)}}catch(ea){M.e(ea)}finally{M.f()}0<Z.points.length&&(Z.status="Intersection");Aa=Z}return Aa}},{key:"intersectBezier2Bezier2",value:function(H,M,R,ca,Z,Aa){var db=new ua("No Intersection");var S=M.multiply(-2);R=H.add(S.add(R));S=H.multiply(-2);var da=M.multiply(2);M=S.add(da);H=new N(H.x,H.y);S=Z.multiply(-2);Aa=
ca.add(S.add(Aa));S=ca.multiply(-2);da=Z.multiply(2);Z=S.add(da);ca=new N(ca.x,ca.y);S=R.x*M.y-M.x*R.y;da=Aa.x*M.y-M.x*Aa.y;var ea=Aa.x*R.y-R.x*Aa.y,Pa=Z.x*R.y-R.x*Z.y,kb=R.x*(H.y-ca.y)+R.y*(-H.x+ca.x);S=(new la(-ea*ea,-2*ea*Pa,S*da-Pa*Pa-2*ea*kb,S*(Z.x*M.y-M.x*Z.y)-2*Pa*kb,S*(M.x*(H.y-ca.y)+M.y*(-H.x+ca.x))-kb*kb)).getRoots();S=v(S);var vc;try{for(S.s();!(vc=S.n()).done;){var mc=vc.value;if(0<=mc&&1>=mc){var Yb=new la(R.x,M.x,H.x-ca.x-mc*Z.x-mc*mc*Aa.x);Yb.simplifyEquals();var ud=Yb.getRoots(),id=
new la(R.y,M.y,H.y-ca.y-mc*Z.y-mc*mc*Aa.y);id.simplifyEquals();var ue=id.getRoots();if(0<ud.length&&0<ue.length){var ye=v(ud),nf;try{a:for(ye.s();!(nf=ye.n()).done;){var gg=nf.value;if(0<=gg&&1>=gg)for(da=0;da<ue.length;da++)if(1E-4>Math.abs(gg-ue[da])){db.points.push(Aa.multiply(mc*mc).add(Z.multiply(mc).add(ca)));break a}}}catch(Tg){ye.e(Tg)}finally{ye.f()}}}}}catch(Tg){S.e(Tg)}finally{S.f()}0<db.points.length&&(db.status="Intersection");return db}},{key:"intersectBezier2Bezier3",value:function(H,
M,R,ca,Z,Aa,db){var S=new ua("No Intersection");var da=M.multiply(-2);R=H.add(da.add(R));da=H.multiply(-2);var ea=M.multiply(2);M=da.add(ea);H=new N(H.x,H.y);da=ca.multiply(-1);ea=Z.multiply(3);var Pa=Aa.multiply(-3);da=da.add(ea.add(Pa.add(db)));db=new N(da.x,da.y);da=ca.multiply(3);ea=Z.multiply(-6);Pa=Aa.multiply(3);da=da.add(ea.add(Pa));Aa=new N(da.x,da.y);da=ca.multiply(-3);ea=Z.multiply(3);Pa=da.add(ea);Z=new N(Pa.x,Pa.y);ca=new N(ca.x,ca.y);da=M.x*M.x;ea=M.y*M.y;Pa=R.x*R.x;var kb=R.y*R.y;da=
(new la(-2*R.x*R.y*db.x*db.y+Pa*db.y*db.y+kb*db.x*db.x,-2*R.x*R.y*Aa.x*db.y-2*R.x*R.y*Aa.y*db.x+2*kb*Aa.x*db.x+2*Pa*Aa.y*db.y,-2*R.x*Z.x*R.y*db.y-2*R.x*R.y*Z.y*db.x-2*R.x*R.y*Aa.x*Aa.y+2*Z.x*kb*db.x+kb*Aa.x*Aa.x+Pa*(2*Z.y*db.y+Aa.y*Aa.y),2*H.x*R.x*R.y*db.y+2*H.y*R.x*R.y*db.x+M.x*M.y*R.x*db.y+M.x*M.y*R.y*db.x-2*ca.x*R.x*R.y*db.y-2*R.x*ca.y*R.y*db.x-2*R.x*Z.x*R.y*Aa.y-2*R.x*R.y*Z.y*Aa.x-2*H.x*kb*db.x-2*H.y*Pa*db.y+2*ca.x*kb*db.x+2*Z.x*kb*Aa.x-ea*R.x*db.x-da*R.y*db.y+Pa*(2*ca.y*db.y+2*Z.y*Aa.y),2*H.x*
R.x*R.y*Aa.y+2*H.y*R.x*R.y*Aa.x+M.x*M.y*R.x*Aa.y+M.x*M.y*R.y*Aa.x-2*ca.x*R.x*R.y*Aa.y-2*R.x*ca.y*R.y*Aa.x-2*R.x*Z.x*R.y*Z.y-2*H.x*kb*Aa.x-2*H.y*Pa*Aa.y+2*ca.x*kb*Aa.x-ea*R.x*Aa.x-da*R.y*Aa.y+Z.x*Z.x*kb+Pa*(2*ca.y*Aa.y+Z.y*Z.y),2*H.x*R.x*R.y*Z.y+2*H.y*R.x*Z.x*R.y+M.x*M.y*R.x*Z.y+M.x*M.y*Z.x*R.y-2*ca.x*R.x*R.y*Z.y-2*R.x*ca.y*Z.x*R.y-2*H.x*Z.x*kb-2*H.y*Pa*Z.y+2*ca.x*Z.x*kb-ea*R.x*Z.x-da*R.y*Z.y+2*Pa*ca.y*Z.y,-2*H.x*H.y*R.x*R.y-H.x*M.x*M.y*R.y-H.y*M.x*M.y*R.x+2*H.x*R.x*ca.y*R.y+2*H.y*ca.x*R.x*R.y+M.x*
ca.x*M.y*R.y+M.x*M.y*R.x*ca.y-2*ca.x*R.x*ca.y*R.y-2*H.x*ca.x*kb+H.x*ea*R.x+H.y*da*R.y-2*H.y*Pa*ca.y-ca.x*ea*R.x-da*ca.y*R.y+H.x*H.x*kb+H.y*H.y*Pa+ca.x*ca.x*kb+Pa*ca.y*ca.y)).getRootsInInterval(0,1);da=v(da);var vc;try{for(da.s();!(vc=da.n()).done;){var mc=vc.value,Yb=(new la(R.x,M.x,H.x-ca.x-mc*Z.x-mc*mc*Aa.x-mc*mc*mc*db.x)).getRoots(),ud=(new la(R.y,M.y,H.y-ca.y-mc*Z.y-mc*mc*Aa.y-mc*mc*mc*db.y)).getRoots();if(0<Yb.length&&0<ud.length){var id=v(Yb),ue;try{a:for(id.s();!(ue=id.n()).done;){var ye=ue.value;
if(0<=ye&&1>=ye)for(ea=0;ea<ud.length;ea++)if(1E-4>Math.abs(ye-ud[ea])){S.points.push(db.multiply(mc*mc*mc).add(Aa.multiply(mc*mc).add(Z.multiply(mc).add(ca))));break a}}}catch(nf){id.e(nf)}finally{id.f()}}}}catch(nf){da.e(nf)}finally{da.f()}0<S.points.length&&(S.status="Intersection");return S}},{key:"intersectBezier2Circle",value:function(H,M,R,ca,Z){return ua.intersectBezier2Ellipse(H,M,R,ca,Z,Z)}},{key:"intersectBezier2Ellipse",value:function(H,M,R,ca,Z,Aa){var db=new ua("No Intersection");var S=
M.multiply(-2);R=H.add(S.add(R));S=H.multiply(-2);M=M.multiply(2);S=S.add(M);H=new N(H.x,H.y);Z*=Z;Aa*=Aa;ca=(new la(Aa*R.x*R.x+Z*R.y*R.y,2*(Aa*R.x*S.x+Z*R.y*S.y),Aa*(2*R.x*H.x+S.x*S.x)+Z*(2*R.y*H.y+S.y*S.y)-2*(Aa*ca.x*R.x+Z*ca.y*R.y),2*(Aa*S.x*(H.x-ca.x)+Z*S.y*(H.y-ca.y)),Aa*(H.x*H.x+ca.x*ca.x)+Z*(H.y*H.y+ca.y*ca.y)-2*(Aa*ca.x*H.x+Z*ca.y*H.y)-Z*Aa)).getRoots();ca=v(ca);var da;try{for(ca.s();!(da=ca.n()).done;){var ea=da.value;0<=ea&&1>=ea&&db.points.push(R.multiply(ea*ea).add(S.multiply(ea).add(H)))}}catch(Pa){ca.e(Pa)}finally{ca.f()}0<
db.points.length&&(db.status="Intersection");return db}},{key:"intersectBezier2Line",value:function(H,M,R,ca,Z){var Aa=ca.min(Z),db=ca.max(Z),S=new ua("No Intersection");var da=M.multiply(-2);var ea=H.add(da.add(R));da=H.multiply(-2);var Pa=M.multiply(2);da=da.add(Pa);Pa=new N(H.x,H.y);var kb=new L(ca.y-Z.y,Z.x-ca.x),vc=ca.x*Z.y-Z.x*ca.y;ea=(new la(kb.dot(ea),kb.dot(da),kb.dot(Pa)+vc)).getRoots();ea=v(ea);var mc;try{for(ea.s();!(mc=ea.n()).done;){var Yb=mc.value;if(0<=Yb&&1>=Yb){var ud=H.lerp(M,Yb),
id=M.lerp(R,Yb),ue=ud.lerp(id,Yb);ca.x===Z.x?Aa.y<=ue.y&&ue.y<=db.y&&(S.status="Intersection",S.appendPoint(ue)):ca.y===Z.y?Aa.x<=ue.x&&ue.x<=db.x&&(S.status="Intersection",S.appendPoint(ue)):Aa.x<=ue.x&&ue.x<=db.x&&Aa.y<=ue.y&&ue.y<=db.y&&(S.status="Intersection",S.appendPoint(ue))}}}catch(ye){ea.e(ye)}finally{ea.f()}return S}},{key:"intersectBezier2Polygon",value:function(H,M,R,ca){return ua.intersectBezier2Polyline(H,M,R,F(ca))}},{key:"intersectBezier2Polyline",value:function(H,M,R,ca){for(var Z=
new ua("No Intersection"),Aa=ca.length,db=0;db<Aa-1;db++){var S=ua.intersectBezier2Line(H,M,R,ca[db],ca[db+1]);Z.appendPoints(S.points)}0<Z.points.length&&(Z.status="Intersection");return Z}},{key:"intersectBezier2Rectangle",value:function(H,M,R,ca,Z){var Aa=ca.min(Z),db=ca.max(Z);Z=new N(db.x,Aa.y);var S=new N(Aa.x,db.y);ca=ua.intersectBezier2Line(H,M,R,Aa,Z);Z=ua.intersectBezier2Line(H,M,R,Z,db);db=ua.intersectBezier2Line(H,M,R,db,S);H=ua.intersectBezier2Line(H,M,R,S,Aa);M=new ua("No Intersection");
M.appendPoints(ca.points);M.appendPoints(Z.points);M.appendPoints(db.points);M.appendPoints(H.points);0<M.points.length&&(M.status="Intersection");return M}},{key:"intersectBezier3Bezier3",value:function(H,M,R,ca,Z,Aa,db,S){var da=new ua("No Intersection");var ea=H.multiply(-1);var Pa=M.multiply(3);var kb=R.multiply(-3);kb=ea.add(Pa.add(kb.add(ca)));ca=new N(kb.x,kb.y);ea=H.multiply(3);Pa=M.multiply(-6);kb=R.multiply(3);kb=ea.add(Pa.add(kb));R=new N(kb.x,kb.y);ea=H.multiply(-3);Pa=M.multiply(3);kb=
ea.add(Pa);M=new N(kb.x,kb.y);H=new N(H.x,H.y);ea=Z.multiply(-1);Pa=Aa.multiply(3);kb=db.multiply(-3);kb=ea.add(Pa.add(kb.add(S)));S=new N(kb.x,kb.y);ea=Z.multiply(3);Pa=Aa.multiply(-6);kb=db.multiply(3);kb=ea.add(Pa.add(kb));db=new N(kb.x,kb.y);ea=Z.multiply(-3);Pa=Aa.multiply(3);kb=ea.add(Pa);Aa=new N(kb.x,kb.y);Z=new N(Z.x,Z.y);ea=ca.x*R.y-R.x*ca.y;Pa=ca.x*M.y-M.x*ca.y;var vc=ca.x*H.y-H.x*ca.y+Z.x*ca.y-ca.x*Z.y,mc=Aa.x*ca.y-ca.x*Aa.y,Yb=db.x*ca.y-ca.x*db.y,ud=S.x*ca.y-ca.x*S.y;kb=ca.x*M.y-M.x*
ca.y;var id=ca.x*H.y+R.x*M.y-M.x*R.y-H.x*ca.y+Z.x*ca.y-ca.x*Z.y,ue=Aa.x*ca.y-ca.x*Aa.y,ye=db.x*ca.y-ca.x*db.y,nf=S.x*ca.y-ca.x*S.y,gg=R.x*H.y-H.x*R.y+Z.x*R.y-R.x*Z.y,Tg=Aa.x*R.y-R.x*Aa.y,sg=db.x*R.y-R.x*db.y,Kh=S.x*R.y-R.x*S.y,zg=ca.x*H.y-H.x*ca.y+Z.x*ca.y-ca.x*Z.y,Hf=Aa.x*ca.y-ca.x*Aa.y,hg=db.x*ca.y-ca.x*db.y,Ag=S.x*ca.y-ca.x*S.y,Ch=R.x*H.y-H.x*R.y+Z.x*R.y-R.x*Z.y,Xh=Aa.x*R.y-R.x*Aa.y,Dn=db.x*R.y-R.x*db.y,Wc=S.x*R.y-R.x*S.y,Yc=M.x*H.y-H.x*M.y+Z.x*M.y-M.x*Z.y,xq=Aa.x*M.y-M.x*Aa.y,pp=db.x*M.y-M.x*
db.y,uo=S.x*M.y-M.x*S.y;ea=new la(-ud*nf*Ag,-ud*nf*hg-ud*ye*Ag-Yb*nf*Ag,-ud*nf*Hf-ud*ye*hg-Yb*nf*hg-ud*ue*Ag-Yb*ye*Ag-mc*nf*Ag,-ud*nf*zg-ud*ye*Hf-Yb*nf*Hf-ud*ue*hg-Yb*ye*hg-mc*nf*hg-ud*id*Ag-Yb*ue*Ag-mc*ye*Ag-vc*nf*Ag+Pa*Kh*Ag+ud*kb*Wc-ea*Kh*Wc+ea*nf*uo,-ud*ye*zg-Yb*nf*zg-ud*ue*Hf-Yb*ye*Hf-mc*nf*Hf-ud*id*hg-Yb*ue*hg-mc*ye*hg-vc*nf*hg+Pa*Kh*hg-Yb*id*Ag-mc*ue*Ag-vc*ye*Ag+Pa*sg*Ag+ud*kb*Dn-ea*Kh*Dn+Yb*kb*Wc-ea*sg*Wc+ea*nf*pp+ea*ye*uo,-ud*ue*zg-Yb*ye*zg-mc*nf*zg-ud*id*Hf-Yb*ue*Hf-mc*ye*Hf-vc*nf*Hf+Pa*
Kh*Hf-Yb*id*hg-mc*ue*hg-vc*ye*hg+Pa*sg*hg-mc*id*Ag-vc*ue*Ag+Pa*Tg*Ag+ud*kb*Xh-ea*Kh*Xh+Yb*kb*Dn-ea*sg*Dn+mc*kb*Wc-ea*Tg*Wc+ea*nf*xq+ea*ye*pp+ea*ue*uo,-ud*id*zg-Yb*ue*zg-mc*ye*zg-vc*nf*zg+Pa*Kh*zg-Yb*id*Hf-mc*ue*Hf-vc*ye*Hf+Pa*sg*Hf-mc*id*hg-vc*ue*hg+Pa*Tg*hg-vc*id*Ag+Pa*gg*Ag+ud*kb*Ch-ea*Kh*Ch+Yb*kb*Xh-ea*sg*Xh+mc*kb*Dn-ea*Tg*Dn+vc*kb*Wc-ea*gg*Wc+ea*nf*Yc+ea*ye*xq+ea*ue*pp-Pa*kb*uo+ea*id*uo,-Yb*id*zg-mc*ue*zg-vc*ye*zg+Pa*sg*zg-mc*id*Hf-vc*ue*Hf+Pa*Tg*Hf-vc*id*hg+Pa*gg*hg+Yb*kb*Ch-ea*sg*Ch+mc*kb*Xh-
ea*Tg*Xh+vc*kb*Dn-ea*gg*Dn+ea*ye*Yc+ea*ue*xq-Pa*kb*pp+ea*id*pp,-mc*id*zg-vc*ue*zg+Pa*Tg*zg-vc*id*Hf+Pa*gg*Hf+mc*kb*Ch-ea*Tg*Ch+vc*kb*Xh-ea*gg*Xh+ea*ue*Yc-Pa*kb*xq+ea*id*xq,-vc*id*zg+Pa*gg*zg+vc*kb*Ch-ea*gg*Ch-Pa*kb*Yc+ea*id*Yc);ea.simplifyEquals();ea=ea.getRootsInInterval(0,1);ea=v(ea);var Rw;try{for(ea.s();!(Rw=ea.n()).done;){var Pj=Rw.value,Sw=new la(ca.x,R.x,M.x,H.x-Z.x-Pj*Aa.x-Pj*Pj*db.x-Pj*Pj*Pj*S.x);Sw.simplifyEquals();var Tw=Sw.getRoots(),Uw=new la(ca.y,R.y,M.y,H.y-Z.y-Pj*Aa.y-Pj*Pj*db.y-Pj*
Pj*Pj*S.y);Uw.simplifyEquals();var gv=Uw.getRoots();if(0<Tw.length&&0<gv.length){var rB=v(Tw),fE;try{a:for(rB.s();!(fE=rB.n()).done;){var qB=fE.value;if(0<=qB&&1>=qB)for(Pa=0;Pa<gv.length;Pa++)if(1E-4>Math.abs(qB-gv[Pa])){da.points.push(S.multiply(Pj*Pj*Pj).add(db.multiply(Pj*Pj).add(Aa.multiply(Pj).add(Z))));break a}}}catch(Xy){rB.e(Xy)}finally{rB.f()}}}}catch(Xy){ea.e(Xy)}finally{ea.f()}0<da.points.length&&(da.status="Intersection");return da}},{key:"intersectBezier3Circle",value:function(H,M,R,
ca,Z,Aa){return ua.intersectBezier3Ellipse(H,M,R,ca,Z,Aa,Aa)}},{key:"intersectBezier3Ellipse",value:function(H,M,R,ca,Z,Aa,db){var S=new ua("No Intersection");var da=H.multiply(-1);var ea=M.multiply(3);var Pa=R.multiply(-3);da=da.add(ea.add(Pa.add(ca)));ca=new N(da.x,da.y);da=H.multiply(3);ea=M.multiply(-6);Pa=R.multiply(3);da=da.add(ea.add(Pa));R=new N(da.x,da.y);da=H.multiply(-3);ea=M.multiply(3);Pa=da.add(ea);M=new N(Pa.x,Pa.y);H=new N(H.x,H.y);Aa*=Aa;db*=db;Z=(new la(ca.x*ca.x*db+ca.y*ca.y*Aa,
2*(ca.x*R.x*db+ca.y*R.y*Aa),2*(ca.x*M.x*db+ca.y*M.y*Aa)+R.x*R.x*db+R.y*R.y*Aa,2*ca.x*db*(H.x-Z.x)+2*ca.y*Aa*(H.y-Z.y)+2*(R.x*M.x*db+R.y*M.y*Aa),2*R.x*db*(H.x-Z.x)+2*R.y*Aa*(H.y-Z.y)+M.x*M.x*db+M.y*M.y*Aa,2*M.x*db*(H.x-Z.x)+2*M.y*Aa*(H.y-Z.y),H.x*H.x*db-2*H.y*Z.y*Aa-2*H.x*Z.x*db+H.y*H.y*Aa+Z.x*Z.x*db+Z.y*Z.y*Aa-Aa*db)).getRootsInInterval(0,1);Z=v(Z);var kb;try{for(Z.s();!(kb=Z.n()).done;){var vc=kb.value;S.points.push(ca.multiply(vc*vc*vc).add(R.multiply(vc*vc).add(M.multiply(vc).add(H))))}}catch(mc){Z.e(mc)}finally{Z.f()}0<
S.points.length&&(S.status="Intersection");return S}},{key:"intersectBezier3Line",value:function(H,M,R,ca,Z,Aa){var db=Z.min(Aa),S=Z.max(Aa),da=new ua("No Intersection");var ea=H.multiply(-1);var Pa=M.multiply(3);var kb=R.multiply(-3);var vc=ea.add(Pa.add(kb.add(ca)));var mc=new L(vc.x,vc.y);ea=H.multiply(3);Pa=M.multiply(-6);kb=R.multiply(3);vc=ea.add(Pa.add(kb));vc=new L(vc.x,vc.y);ea=H.multiply(-3);Pa=M.multiply(3);kb=ea.add(Pa);ea=new L(kb.x,kb.y);Pa=new L(H.x,H.y);kb=new L(Z.y-Aa.y,Aa.x-Z.x);
var Yb=Z.x*Aa.y-Aa.x*Z.y;mc=(new la(kb.dot(mc),kb.dot(vc),kb.dot(ea),kb.dot(Pa)+Yb)).getRoots();mc=v(mc);var ud;try{for(mc.s();!(ud=mc.n()).done;){var id=ud.value;if(0<=id&&1>=id){var ue=H.lerp(M,id),ye=M.lerp(R,id),nf=R.lerp(ca,id),gg=ue.lerp(ye,id),Tg=ye.lerp(nf,id),sg=gg.lerp(Tg,id);Z.x===Aa.x?db.y<=sg.y&&sg.y<=S.y&&(da.status="Intersection",da.appendPoint(sg)):Z.y===Aa.y?db.x<=sg.x&&sg.x<=S.x&&(da.status="Intersection",da.appendPoint(sg)):db.x<=sg.x&&sg.x<=S.x&&db.y<=sg.y&&sg.y<=S.y&&(da.status=
"Intersection",da.appendPoint(sg))}}}catch(Kh){mc.e(Kh)}finally{mc.f()}return da}},{key:"intersectBezier3Polygon",value:function(H,M,R,ca,Z){return ua.intersectBezier3Polyline(H,M,R,ca,F(Z))}},{key:"intersectBezier3Polyline",value:function(H,M,R,ca,Z){for(var Aa=new ua("No Intersection"),db=Z.length,S=0;S<db-1;S++){var da=ua.intersectBezier3Line(H,M,R,ca,Z[S],Z[S+1]);Aa.appendPoints(da.points)}0<Aa.points.length&&(Aa.status="Intersection");return Aa}},{key:"intersectBezier3Rectangle",value:function(H,
M,R,ca,Z,Aa){var db=Z.min(Aa),S=Z.max(Aa);Aa=new N(S.x,db.y);var da=new N(db.x,S.y);Z=ua.intersectBezier3Line(H,M,R,ca,db,Aa);Aa=ua.intersectBezier3Line(H,M,R,ca,Aa,S);S=ua.intersectBezier3Line(H,M,R,ca,S,da);H=ua.intersectBezier3Line(H,M,R,ca,da,db);M=new ua("No Intersection");M.appendPoints(Z.points);M.appendPoints(Aa.points);M.appendPoints(S.points);M.appendPoints(H.points);0<M.points.length&&(M.status="Intersection");return M}},{key:"intersectCircleCircle",value:function(H,M,R,ca){var Z=M+ca;
var Aa=Math.abs(M-ca),db=H.distanceFrom(R);db>Z?Z=new ua("Outside"):db<Aa?Z=new ua("Inside"):(Z=new ua("Intersection"),ca=(M*M-ca*ca+db*db)/(2*db),M=Math.sqrt(M*M-ca*ca),ca=H.lerp(R,ca/db),db=M/db,Z.points.push(new N(ca.x-db*(R.y-H.y),ca.y+db*(R.x-H.x))),Z.points.push(new N(ca.x+db*(R.y-H.y),ca.y-db*(R.x-H.x))));return Z}},{key:"intersectCircleEllipse",value:function(H,M,R,ca,Z){return ua.intersectEllipseEllipse(H,M,M,R,ca,Z)}},{key:"intersectCircleLine",value:function(H,M,R,ca){var Z=(ca.x-R.x)*
(ca.x-R.x)+(ca.y-R.y)*(ca.y-R.y);var Aa=2*((ca.x-R.x)*(R.x-H.x)+(ca.y-R.y)*(R.y-H.y));H=Aa*Aa-4*Z*(H.x*H.x+H.y*H.y+R.x*R.x+R.y*R.y-2*(H.x*R.x+H.y*R.y)-M*M);0>H?Z=new ua("Outside"):0===H?Z=new ua("Tangent"):(M=Math.sqrt(H),H=(-Aa+M)/(2*Z),Aa=(-Aa-M)/(2*Z),(0>H||1<H)&&(0>Aa||1<Aa)?Z=0>H&&0>Aa||1<H&&1<Aa?new ua("Outside"):new ua("Inside"):(Z=new ua("Intersection"),0<=H&&1>=H&&Z.points.push(R.lerp(ca,H)),0<=Aa&&1>=Aa&&Z.points.push(R.lerp(ca,Aa))));return Z}},{key:"intersectCirclePolygon",value:function(H,
M,R){return ua.intersectCirclePolyline(H,M,F(R))}},{key:"intersectCirclePolyline",value:function(H,M,R){for(var ca=new ua("No Intersection"),Z=R.length,Aa,db=0;db<Z-1;db++)Aa=ua.intersectCircleLine(H,M,R[db],R[db+1]),ca.appendPoints(Aa.points);ca.status=0<ca.points.length?"Intersection":Aa.status;return ca}},{key:"intersectCircleRectangle",value:function(H,M,R,ca){var Z=R.min(ca),Aa=R.max(ca);ca=new N(Aa.x,Z.y);var db=new N(Z.x,Aa.y);R=ua.intersectCircleLine(H,M,Z,ca);ca=ua.intersectCircleLine(H,
M,ca,Aa);Aa=ua.intersectCircleLine(H,M,Aa,db);H=ua.intersectCircleLine(H,M,db,Z);M=new ua("No Intersection");M.appendPoints(R.points);M.appendPoints(ca.points);M.appendPoints(Aa.points);M.appendPoints(H.points);M.status=0<M.points.length?"Intersection":R.status;return M}},{key:"intersectEllipseEllipse",value:function(H,M,R,ca,Z,Aa){H=[R*R,0,M*M,-2*R*R*H.x,-2*M*M*H.y,R*R*H.x*H.x+M*M*H.y*H.y-M*M*R*R];ca=[Aa*Aa,0,Z*Z,-2*Aa*Aa*ca.x,-2*Z*Z*ca.y,Aa*Aa*ca.x*ca.x+Z*Z*ca.y*ca.y-Z*Z*Aa*Aa];Z=H[0]*ca[1]-ca[0]*
H[1];Aa=H[0]*ca[2]-ca[0]*H[2];M=H[0]*ca[3]-ca[0]*H[3];R=H[0]*ca[4]-ca[0]*H[4];var db=H[0]*ca[5]-ca[0]*H[5],S=H[1]*ca[2]-ca[1]*H[2],da=H[3]*ca[5]-ca[3]*H[5],ea=H[1]*ca[5]-ca[1]*H[5]+(H[3]*ca[4]-ca[3]*H[4]),Pa=H[1]*ca[4]-ca[1]*H[4]-(H[2]*ca[3]-ca[2]*H[3]);Z=(new la(Z*S-Aa*Aa,Z*Pa+M*S-2*Aa*R,Z*ea+M*Pa-R*R-2*Aa*db,Z*da+M*ea-2*R*db,M*da-db*db)).getRoots();Aa=.001*(H[0]*H[0]+2*H[1]*H[1]+H[2]*H[2]);M=.001*(ca[0]*ca[0]+2*ca[1]*ca[1]+ca[2]*ca[2]);R=new ua("No Intersection");for(db=0;db<Z.length;db++)for(S=
(new la(H[0],H[3]+Z[db]*H[1],H[5]+Z[db]*(H[4]+Z[db]*H[2]))).getRoots(),da=0;da<S.length;da++)ea=(H[0]*S[da]+H[1]*Z[db]+H[3])*S[da]+(H[2]*Z[db]+H[4])*Z[db]+H[5],Math.abs(ea)<Aa&&(ea=(ca[0]*S[da]+ca[1]*Z[db]+ca[3])*S[da]+(ca[2]*Z[db]+ca[4])*Z[db]+ca[5],Math.abs(ea)<M&&R.appendPoint(new N(S[da],Z[db])));0<R.points.length&&(R.status="Intersection");return R}},{key:"intersectEllipseLine",value:function(H,M,R,ca,Z){var Aa=new L(ca.x,ca.y);var db=L.fromPoints(ca,Z);H=new L(H.x,H.y);H=Aa.subtract(H);Aa=new L(db.x/
(M*M),db.y/(R*R));R=new L(H.x/(M*M),H.y/(R*R));M=db.dot(Aa);db=db.dot(R);H=H.dot(R)-1;R=db*db-M*H;0>R?db=new ua("Outside"):0<R?(H=Math.sqrt(R),R=(-db-H)/M,M=(-db+H)/M,(0>R||1<R)&&(0>M||1<M)?db=0>R&&0>M||1<R&&1<M?new ua("Outside"):new ua("Inside"):(db=new ua("Intersection"),0<=R&&1>=R&&db.appendPoint(ca.lerp(Z,R)),0<=M&&1>=M&&db.appendPoint(ca.lerp(Z,M)))):(M=-db/M,0<=M&&1>=M?(db=new ua("Intersection"),db.appendPoint(ca.lerp(Z,M))):db=new ua("Outside"));return db}},{key:"intersectEllipsePolygon",value:function(H,
M,R,ca){return ua.intersectEllipsePolyline(H,M,R,F(ca))}},{key:"intersectEllipsePolyline",value:function(H,M,R,ca){for(var Z=new ua("No Intersection"),Aa=ca.length,db=0;db<Aa-1;db++){var S=ua.intersectEllipseLine(H,M,R,ca[db],ca[db+1]);Z.appendPoints(S.points)}0<Z.points.length&&(Z.status="Intersection");return Z}},{key:"intersectEllipseRectangle",value:function(H,M,R,ca,Z){var Aa=ca.min(Z),db=ca.max(Z);Z=new N(db.x,Aa.y);var S=new N(Aa.x,db.y);ca=ua.intersectEllipseLine(H,M,R,Aa,Z);Z=ua.intersectEllipseLine(H,
M,R,Z,db);db=ua.intersectEllipseLine(H,M,R,db,S);H=ua.intersectEllipseLine(H,M,R,S,Aa);M=new ua("No Intersection");M.appendPoints(ca.points);M.appendPoints(Z.points);M.appendPoints(db.points);M.appendPoints(H.points);0<M.points.length&&(M.status="Intersection");return M}},{key:"intersectLineLine",value:function(H,M,R,ca){var Z=(ca.x-R.x)*(H.y-R.y)-(ca.y-R.y)*(H.x-R.x);var Aa=(M.x-H.x)*(H.y-R.y)-(M.y-H.y)*(H.x-R.x);R=(ca.y-R.y)*(M.x-H.x)-(ca.x-R.x)*(M.y-H.y);0!==R?(Z/=R,Aa/=R,0<=Z&&1>=Z&&0<=Aa&&1>=
Aa?(Aa=new ua("Intersection"),Aa.points.push(new N(H.x+Z*(M.x-H.x),H.y+Z*(M.y-H.y)))):Aa=new ua("No Intersection")):Aa=0===Z||0===Aa?new ua("Coincident"):new ua("Parallel");return Aa}},{key:"intersectLinePolygon",value:function(H,M,R){return ua.intersectLinePolyline(H,M,F(R))}},{key:"intersectLinePolyline",value:function(H,M,R){for(var ca=new ua("No Intersection"),Z=R.length,Aa=0;Aa<Z-1;Aa++){var db=ua.intersectLineLine(H,M,R[Aa],R[Aa+1]);ca.appendPoints(db.points)}0<ca.points.length&&(ca.status=
"Intersection");return ca}},{key:"intersectLineRectangle",value:function(H,M,R,ca){var Z=R.min(ca),Aa=R.max(ca);ca=new N(Aa.x,Z.y);var db=new N(Z.x,Aa.y);R=ua.intersectLineLine(Z,ca,H,M);ca=ua.intersectLineLine(ca,Aa,H,M);Aa=ua.intersectLineLine(Aa,db,H,M);H=ua.intersectLineLine(db,Z,H,M);M=new ua("No Intersection");M.appendPoints(R.points);M.appendPoints(ca.points);M.appendPoints(Aa.points);M.appendPoints(H.points);0<M.points.length&&(M.status="Intersection");return M}},{key:"intersectPolygonPolygon",
value:function(H,M){return ua.intersectPolylinePolyline(F(H),F(M))}},{key:"intersectPolygonPolyline",value:function(H,M){return ua.intersectPolylinePolyline(F(H),M)}},{key:"intersectPolygonRectangle",value:function(H,M,R){return ua.intersectPolylineRectangle(F(H),M,R)}},{key:"intersectPolylinePolyline",value:function(H,M){for(var R=new ua("No Intersection"),ca=H.length,Z=0;Z<ca-1;Z++){var Aa=ua.intersectLinePolyline(H[Z],H[Z+1],M);R.appendPoints(Aa.points)}0<R.points.length&&(R.status="Intersection");
return R}},{key:"intersectPolylineRectangle",value:function(H,M,R){var ca=M.min(R),Z=M.max(R);R=new N(Z.x,ca.y);var Aa=new N(ca.x,Z.y);M=ua.intersectLinePolyline(ca,R,H);R=ua.intersectLinePolyline(R,Z,H);Z=ua.intersectLinePolyline(Z,Aa,H);H=ua.intersectLinePolyline(Aa,ca,H);ca=new ua("No Intersection");ca.appendPoints(M.points);ca.appendPoints(R.points);ca.appendPoints(Z.points);ca.appendPoints(H.points);0<ca.points.length&&(ca.status="Intersection");return ca}},{key:"intersectRectangleRectangle",
value:function(H,M,R,ca){var Z=H.min(M),Aa=H.max(M);M=new N(Aa.x,Z.y);var db=new N(Z.x,Aa.y);H=ua.intersectLineRectangle(Z,M,R,ca);M=ua.intersectLineRectangle(M,Aa,R,ca);Aa=ua.intersectLineRectangle(Aa,db,R,ca);R=ua.intersectLineRectangle(db,Z,R,ca);ca=new ua("No Intersection");ca.appendPoints(H.points);ca.appendPoints(M.points);ca.appendPoints(Aa.points);ca.appendPoints(R.points);0<ca.points.length&&(ca.status="Intersection");return ca}},{key:"intersectRayRay",value:function(H,M,R,ca){var Z=(ca.x-
R.x)*(H.y-R.y)-(ca.y-R.y)*(H.x-R.x);var Aa=(M.x-H.x)*(H.y-R.y)-(M.y-H.y)*(H.x-R.x);R=(ca.y-R.y)*(M.x-H.x)-(ca.x-R.x)*(M.y-H.y);0!==R?(Aa=Z/R,Z=new ua("Intersection"),Z.points.push(new N(H.x+Aa*(M.x-H.x),H.y+Aa*(M.y-H.y)))):Z=0===Z||0===Aa?new ua("Coincident"):new ua("Parallel");return Z}}]);return ua}();Q=function(){function ua(){l(this||Ca,ua)}f(ua,null,[{key:"arc",value:function(H,M,R,ca,Z,Aa){return ha.arc.apply(ha,arguments)}},{key:"quadraticBezier",value:function(H,M,R,ca,Z,Aa){return ha.quadraticBezier.apply(ha,
arguments)}},{key:"cubicBezier",value:function(H,M,R,ca,Z,Aa,db,S){return ha.cubicBezier.apply(ha,arguments)}},{key:"circle",value:function(H,M,R){return ha.circle.apply(ha,arguments)}},{key:"ellipse",value:function(H,M,R,ca){return ha.ellipse.apply(ha,arguments)}},{key:"line",value:function(H,M,R,ca){return ha.line.apply(ha,arguments)}},{key:"path",value:function(H){return ha.path.apply(ha,arguments)}},{key:"polygon",value:function(H){return ha.polygon.apply(ha,arguments)}},{key:"polyline",value:function(H){return ha.polyline.apply(ha,
arguments)}},{key:"rectangle",value:function(H,M,R,ca){return ha.rectangle.apply(ha,arguments)}}]);return ua}();O=function(){function ua(){l(this||Ca,ua)}f(ua,null,[{key:"arc",value:function(H,M,R,ca,Z){return ha.arc.apply(ha,arguments)}},{key:"quadraticBezier",value:function(H,M,R){return ha.quadraticBezier.apply(ha,arguments)}},{key:"cubicBezier",value:function(H,M,R,ca){return ha.cubicBezier.apply(ha,arguments)}},{key:"circle",value:function(H,M){return ha.circle.apply(ha,arguments)}},{key:"ellipse",
value:function(H,M,R){return ha.ellipse.apply(ha,arguments)}},{key:"line",value:function(H,M){return ha.line.apply(ha,arguments)}},{key:"path",value:function(H){return ha.path.apply(ha,arguments)}},{key:"polygon",value:function(H){return ha.polygon.apply(ha,arguments)}},{key:"polyline",value:function(H){return ha.polyline.apply(ha,arguments)}},{key:"rectangle",value:function(H,M){return ha.rectangle.apply(ha,arguments)}}]);return ua}();var qa=function(){function ua(){l(this||Ca,ua)}f(ua,null,[{key:"circle",
value:function(H){if(!1===H instanceof SVGCircleElement)throw new TypeError("Expected SVGCircleElement, but found ".concat(H));var M=new N(H.cx.baseVal.value,H.cy.baseVal.value);return ha.circle(M,H.r.baseVal.value)}},{key:"ellipse",value:function(H){if(!1===H instanceof SVGEllipseElement)throw new TypeError("Expected SVGEllipseElement, but found ".concat(H));var M=new N(H.cx.baseVal.value,H.cy.baseVal.value);return ha.ellipse(M,H.rx.baseVal.value,H.ry.baseVal.value)}},{key:"line",value:function(H){if(!1===
H instanceof SVGLineElement)throw new TypeError("Expected SVGLineElement, but found ".concat(H));var M=new N(H.x1.baseVal.value,H.y1.baseVal.value);H=new N(H.x2.baseVal.value,H.y2.baseVal.value);return ha.line(M,H)}},{key:"path",value:function(H){if(!1===H instanceof SVGPathElement)throw new TypeError("Expected SVGPathElement, but found ".concat(H));H=H.getAttributeNS(null,"d");return ha.path(H)}},{key:"polygon",value:function(H){if(!1===H instanceof SVGPolygonElement)throw new TypeError("Expected SVGPolygonElement, but found ".concat(H));
for(var M=[],R=0;R<H.points.numberOfItems;R++){var ca=H.points.getItem(R);M.push(new N(ca.x,ca.y))}return ha.polygon(M)}},{key:"polyline",value:function(H){if(!1===H instanceof SVGPolylineElement)throw new TypeError("Expected SVGPolylineElement, but found ".concat(H));for(var M=[],R=0;R<H.points.numberOfItems;R++){var ca=H.points.getItem(R);M.push(new N(ca.x,ca.y))}return ha.polyline(M)}},{key:"rect",value:function(H){if(!1===H instanceof SVGRectElement)throw new TypeError("Expected SVGRectElement, but found ".concat(H));
return ha.rectangle(H.x.baseVal.value,H.y.baseVal.value,H.width.baseVal.value,H.height.baseVal.value,H.rx.baseVal.value,H.ry.baseVal.value)}},{key:"element",value:function(H){if(!1===H instanceof SVGElement)throw new TypeError("Expected SVGElement, but found ".concat(H));var M=H.tagName;switch(M){case "circle":return ua.circle(H);case "ellipse":return ua.ellipse(H);case "line":return ua.line(H);case "path":return ua.path(H);case "polygon":return ua.polygon(H);case "polyline":return ua.polyline(H);
case "rect":return ua.rect(H);default:throw new TypeError("Unrecognized element type: '".concat(M,"'"));}}}]);return ua}(),Ga={pointInCircle:function(ua,H,M){return L.fromPoints(H,ua).length()<=M},pointInEllipse:function(ua,H,M,R){ua=ua.subtract(H);return 1>=ua.x*ua.x/(M*M)+ua.y*ua.y/(R*R)},pointInPolyline:function(ua,H){for(var M=H.length,R=0,ca,Z=H[0],Aa=1;Aa<=M;Aa++){var db=H[Aa%M];ca=Math.min(Z.y,db.y);var S=Math.max(Z.y,db.y),da=Math.max(Z.x,db.x);Z.y!==db.y&&ca<ua.y&&ua.y<=S&&ua.x<=da&&(ca=
(ua.y-Z.y)*(db.x-Z.x)/(db.y-Z.y)+Z.x,(Z.x===db.x||ua.x<=ca)&&R++);Z=db}return 1===R%2}};Ga.pointInPolygon=Ga.pointInPolyline;Ga.pointInRectangle=function(ua,H,M){return H.x<=ua.x&&ua.x<M.x&&H.y<=ua.y&&ua.y<M.y};b.AffineShapes=O;b.Intersection=ba;b.IntersectionArgs=ha;b.IntersectionQuery=Ga;b.Matrix2D=W;b.Point2D=N;b.ShapeInfo=ha;b.Shapes=Q;b.SvgShapes=qa;b.Vector2D=L;Object.defineProperty(b,"__esModule",{value:!0})});var Rc=lively.FreezerRuntime.recorderFor("lively.components/widgets.js");Rc.obj=
lf;Rc.PropertyPath=Xg;Rc.string=Hg;Rc.num=wk;Rc.arr=Te;Rc.properties=mp;Rc.pt=fh;Rc.Color=wf;Rc.Rectangle=Pd;Rc.rect=Gk;Rc.signal=hk;Rc.connect=uk;Rc.disconnect=Sp;Rc.Morph=Hj;Rc.ShadowObject=wq;Rc.morph=Gc;Rc.Text=hs;Rc.GridLayout=jx;Rc.HorizontalLayout=fs;Rc.Path=uz;Rc.Ellipse=sz;Rc.Label=is;Rc.Tooltip=vz;Rc.Icon=En;Rc.kld=gS;var B5=Rc.kld;Rc.Shapes=B5.Shapes;Rc.Intersection=B5.Intersection;(function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=c.hasOwnProperty("LeashEndpoint")&&
"function"===typeof c.LeashEndpoint?c.LeashEndpoint:c.LeashEndpoint=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"dragTriggerDistance",get:function(){return this.connectedMorph?20:0}},{key:"onDragStart",value:function(a){var f=a.state;a.state.dragDelta=f.lastDragPosition.subPt(f.clickedOnPosition);a.state.endpoint=this;this.leash.onEndpointDrag(a)}},{key:"canConnectTo",value:function(a){return!a.isWorld&&
!a.isHaloItem&&this.leash.canConnectTo(a)&&!a.isHighlighter&&!a.ownerChain().some(function(f){return f.isHaloItem})}},{key:"onDrag",value:function(a){var f=this;if(this.connectedMorph)this.clearConnection();else{var m=a.hand.findDropTarget(a.hand.globalPosition,[this.leash,this.leash.endPoint,this.leash.startPoint],function(q){return f.canConnectTo(q)});this.possibleTarget!=m&&this.highlighter&&this.highlighter.deactivate();if(this.possibleTarget=m)this.closestSide=this.possibleTarget.globalBounds().partNameNearest(Rc.obj.keys(Rc.Leash.connectionPoints),
this.globalPosition),this.highlighter=$world.highlightMorph($world,this.possibleTarget,!1,[this.closestSide]),this.highlighter.show(),this.highlighter.get("name tag").value=this.leash.getLabelFor(this.possibleTarget)}a.state.endpoint=this;this.leash.onEndpointDrag(a)}},{key:"onDragEnd",value:function(){$world.removeHighlighters();this.possibleTarget&&this.closestSide&&this.attachTo(this.possibleTarget,this.closestSide)}},{key:"getConnectionPoint",value:function(){var a=this.connectedMorph,f=a.isPath,
m=a.isPolygon,q=a.vertices,r=a.origin;a=this.connectedMorph.globalBounds();if((f||m)&&"center"!=this.attachedSide){f=q.map(function(v){return Rc.pt(v.x,v.y).addPt(r)});m=Rc.Rectangle.unionPts(f);var u=m[this.attachedSide]();m=m.center().addPt(m.center().subPt(u));m=Rc.Shapes.line(u.x,u.y,m.x,m.y);f=Rc.Shapes.polyline(Rc.arr.flatten(f.map(function(v){return[v.x,v.y]})));f=Rc.arr.min(Rc.Intersection.intersect(f,m).points,function(v){return Rc.pt(v.x,v.y).dist(u)});return Rc.pt(f.x,f.y).addPt(a.topLeft())}return a[this.attachedSide]()}},
{key:"update",value:function(a){a&&!["position","extent","rotation","scale"].includes(a.prop)&&a.target!=this.connectedMorph||!this.connectedMorph||(a=this.getConnectionPoint(),a=this.leash.localize(a),this.vertex.position=a,this.relayout())}},{key:"clearConnection",value:function(){this.connectedMorph&&(Rc.disconnect(this.connectedMorph,"onChange",this,"update"),this.connectedMorph=null)}},{key:"relayout",value:function(a){var f=this.vertex.position,m=f.x;f=f.y;var q=this.leash.borderWidth;a&&a.meta&&
a.meta.animation?this.animate({center:Rc.pt(m+q,f+q),duration:a.duration}):this.center=Rc.pt(m+q,f+q)}},{key:"attachTo",value:function(a,f){this.clearConnection();this.leash.world()||this.leash.openInWorld(a.globalPosition);this.connectedMorph=a;this.attachedSide=f;this.vertex.controlPoints=this.leash.controlPointsFor(f,this);this.update();Rc.connect(this.connectedMorph,"onChange",this,"update")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LeashEndpoint"}},{key:"properties",get:function(){return{index:{},
leash:{},nativeCursor:{defaultValue:"-webkit-grab"},attachedSide:{},connectedMorph:{},draggable:{defaultValue:!0},vertex:{after:["leash"],get:function(){return this.leash.vertices[this.index]},set:function(a){this.leash.vertices[this.index]=a;this.leash.vertices=this.leash.vertices}}}}}],c,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:444,end:4551})})(Rc.Ellipse);var cL=ya("bO",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=c.hasOwnProperty("Leash")&&"function"===typeof c.Leash?c.Leash:c.Leash=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"onMouseDown",value:function(a){this.updateEndpointStyles()}},{key:"updateEndpointStyles",value:function(){Object.assign(this.startPoint,
this.getEndpointStyle(0));Object.assign(this.endPoint,this.getEndpointStyle(1));this.relayout()}},{key:"remove",value:function(){Nb._get(Object.getPrototypeOf(l.prototype),"remove",this).call(this);this.startPoint.clearConnection();this.endPoint.clearConnection()}},{key:"onEndpointDrag",value:function(a){a.state.endpoint.vertex.position=a.state.endpoint.vertex.position.addPt(a.state.dragDelta);this.relayout()}},{key:"getEndpointStyle",value:function(a){return Object.assign({},this.endpointStyle,{},
0==a?this.endpointStyle.start:this.endpointStyle.end)}},{key:"endpoint",value:function(a){var f=this.vertices[a];return new Rc.LeashEndpoint({index:a,leash:this,position:Rc.pt(f.x,f.y)})}},{key:"controlPointsFor",value:function(a,f){a=Rc.Leash.connectionPoints[a];a=f==this.startPoint?a.negated():a;return{previous:a.scaleBy(100),next:a.negated().scaleBy(100)}}},{key:"relayout",value:function(a){if(!a||["vertices","position"].includes(a.prop))this.startPoint.relayout(a),this.endPoint.relayout(a)}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Leash"}},{key:"connectionPoints",get:function(){return{topCenter:Rc.pt(0,-1),topLeft:Rc.pt(-1,-1),rightCenter:Rc.pt(1,0),bottomRight:Rc.pt(1,1),bottomCenter:Rc.pt(0,1),bottomLeft:Rc.pt(-1,1),leftCenter:Rc.pt(-1,0),topRight:Rc.pt(1,-1),center:Rc.pt(0,0)}}},{key:"properties",get:function(){return{start:{defaultValue:Rc.pt(0,0)},end:{defaultValue:Rc.pt(0,0)},canConnectTo:{defaultValue:function(a){return!0}},getLabelFor:{defaultValue:function(a){return a.name}},
reactsToPointer:{defaultValue:!1},acceptsDroppedMorphs:{defaultValue:!1},direction:{type:"Enum",values:["unidirectional","outward","inward"],defaultValue:"unidirectional"},endpointStyle:{isStyleProp:!0,defaultValue:{fill:Rc.Color.black,origin:Rc.pt(3.5,3.5),extent:Rc.pt(10,10),nativeCursor:"-webkit-grab"}},borderWidth:{defaultValue:2},borderColor:{defaultValue:Rc.Color.black},fill:{defaultValue:Rc.Color.transparent},vertices:{after:["start","end","borderWidth"],initialize:function(){this.vertices=
[this.start,this.end]}},submorphs:{initialize:function(){this.submorphs=[this.startPoint=this.endpoint(0),this.endPoint=this.endpoint(1)];Rc.connect(this,"onChange",this,"relayout");this.updateEndpointStyles()}}}}}],c,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:4560,end:7399})}(Rc.Path));
Rc.Leash=cL;Rc.Leash=cL;Rc.Leash=cL;var dL=ya("bh",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=c.hasOwnProperty("Slider")&&"function"===typeof c.Slider?c.Slider:c.Slider=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"normalize",value:function(a){return Math.abs(a/(this.max-this.min))}},{key:"update",value:function(a){a=void 0===a?this.value:a;a=(this.width-
15)*this.normalize(a);this.getSubmorphNamed("slideHandle").center=Rc.pt(a+7.5,10)}},{key:"onSlide",value:function(a,f){a=Rc.num.roundTo(this.value+f.x/this.width,.01);this.value=a=Math.max(this.min,Math.min(this.max,a));this.update(a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Slider"}},{key:"properties",get:function(){return{value:{},min:{},max:{},height:{defaultValue:20},fill:{defaultValue:Rc.Color.transparent},draggable:{defaultValue:!1},submorphs:{after:["value","max","min"],
initialize:function(){var a=new Rc.SliderHandle({slider:this,name:"slideHandle"});this.submorphs=[new Rc.Path({borderColor:Rc.Color.gray.darker(),borderWidth:2,vertices:[Rc.pt(0,0),Rc.pt(this.width,0)],position:Rc.pt(0,this.height/2)}),a];Rc.connect(this,"extent",this,"update");this.update()}}}}}],c,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:7408,end:8693})}(Rc.Morph));Rc.Slider=dL;Rc.Slider=dL;Rc.Slider=dL;(function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=c.hasOwnProperty("SliderHandle")&&"function"===typeof c.SliderHandle?c.SliderHandle:c.SliderHandle=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"onDragStart",value:function(a){this.valueView=(new Rc.Tooltip({description:""})).openInWorld(a.hand.position.addXY(10,
10))}},{key:"onDrag",value:function(a){this.slider.onSlide(this,a.state.dragDelta);this.valueView.description=this.slider.value;this.valueView.position=a.hand.position.addXY(10,10)}},{key:"onDragEnd",value:function(a){this.valueView.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SliderHandle"}},{key:"properties",get:function(){return{slider:{},fill:{defaultValue:Rc.Color.gray},borderColor:{defaultValue:Rc.Color.gray.darker()},borderWidth:{defaultValue:1},dropShadow:{defaultValue:new Rc.ShadowObject({blur:5})},
extent:{defaultValue:Rc.pt(15,15)},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0}}}}],c,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8695,end:9551})})(Rc.Ellipse);var eL=ya("b3",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),
l=c.hasOwnProperty("ValueScrubber")&&"function"===typeof c.ValueScrubber?c.ValueScrubber:c.ValueScrubber=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"relayout",value:function(){this.scaleToBounds&&(this.scale=Math.min(1,this.width/(this.textBounds().width+0)))}},{key:"onKeyDown",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onKeyDown",this).call(this,a);if("Enter"==a.keyCombo){var f=
$jscomp.makeIterator(this.textString.replace("\n","").split(" ")),m=f.next().value;f.next();"string"===typeof m&&(this.value=parseFloat(m),this.scrub(this.scrubbedValue));a.stop()}}},{key:"scrub",value:function(a){this.field.update(a)}},{key:"onDragStart",value:function(a){this.execCommand("toggle active mark");this.initPos=a.position;this.factorLabel=(new Rc.Tooltip({description:"1x"})).openInWorld(a.hand.position.addXY(10,10));a.hand.extent=Rc.pt(30,30);a.hand.nativeCursor="ew-resize";a.hand.fill=
Rc.Color.transparent;a.hand.reactsToPointer=!0}},{key:"getScaleAndOffset",value:function(a){var f=a.position.subPt(this.initPos);a=f.x;f=Rc.num.roundTo(Math.exp(-f.y/$world.height*4),.01)*this.baseFactor;return{offset:a,scale:f}}},{key:"onDrag",value:function(a){var f=this.getScaleAndOffset(a),m=f.scale;f=this.getCurrentValue(f.offset,m);this.scrub(f);f=this.floatingPoint?f.toFixed(3):Rc.obj.safeToString(f);this.unit&&(f+=" "+this.unit);this.replace(this.documentRange,f,!1,this.scaleToBounds,!1,!1);
this.factorLabel.description=m.toFixed(3)+"x";this.factorLabel.position=a.hand.position.addXY(10,10);a.hand.moveBy(Rc.pt(-5,-5));this.relayout()}},{key:"getCurrentValue",value:function(a,f){return Math.max(this.min,Math.min(this.max,this.scrubbedValue+(this.floatingPoint?a*f:Math.round(a*f))))}},{key:"onDragEnd",value:function(a){var f=this.getScaleAndOffset(a);this.value=this.getCurrentValue(f.offset,f.scale);this.factorLabel.softRemove();a.hand.extent=Rc.pt(1,1);a.hand.fill=Rc.Color.orange;a.hand.reactsToPointer=
!1}},{key:"value",set:function(a){this.scrubbedValue=a=Math.max(this.min,Math.min(this.max,a));a=this.floatingPoint?a.toFixed(3):Rc.obj.safeToString(a);a=this.unit?a+(" "+this.unit):a+"";this.replace(this.documentRange,a,!1,!0);this.relayout()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ValueScrubber"}},{key:"properties",get:function(){return{scaleToBounds:{defaultValue:!1,set:function(a){this.fixedWidth=!0;this.setProperty("scaleToBounds",a)}},field:{derived:!0,get:function(){return this.owner}},
value:{defaultValue:0},fill:{defaultValue:Rc.Color.transparent},draggable:{defaultValue:!0},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},baseFactor:{defaultValue:1},floatingPoint:{defaultValue:!1}}}}],c,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:9560,end:12723})}(Rc.Text));
Rc.ValueScrubber=eL;Rc.ValueScrubber=eL;Rc.ValueScrubber=eL;var eF=ya("bl",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=c.hasOwnProperty("CheckBox")&&"function"===typeof c.CheckBox?c.CheckBox:c.CheckBox=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"trigger",value:function(){try{this.checked=!this.checked,Rc.signal(this,"toggle",this.checked)}catch(f){var a=
this.world();a?a.logError(f):console.error(f)}}},{key:"onMouseDown",value:function(a){this.active&&this.trigger()}},{key:"render",value:function(a){return a.renderCheckBox(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CheckBox"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},extent:{defaultValue:Rc.pt(15,15)},borderWidth:{defaultValue:0},active:{defaultValue:!0},checked:{defaultValue:!1},fill:{defaultValue:Rc.Color.transparent},nativeCursor:{defaultValue:"pointer"}}}}],
c,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:12733,end:13459})}(Rc.Morph));Rc.CheckBox=eF;Rc.CheckBox=eF;Rc.CheckBox=eF;var fL=ya("b4",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=c.hasOwnProperty("LabeledCheckBox")&&"function"===typeof c.LabeledCheckBox?
c.LabeledCheckBox:c.LabeledCheckBox=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"disable",value:function(){this.active=!1;this.labelMorph.opacity=.5}},{key:"enable",value:function(){this.active=!0;this.labelMorph.opacity=1}},{key:"trigger",value:function(){this.checkboxMorph.trigger()}},{key:"onMouseDown",value:function(a){this.active&&this.trigger();a.stop()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"LabeledCheckBox"}},{key:"example",value:function(){(new Rc.LabeledCheckBox({label:"foo"})).openInWorld()}},{key:"properties",get:function(){return{name:{defaultValue:"LabeledCheckBox"},alignCheckBox:{defaultValue:"left",type:"Enum",values:["left","right"],set:function(a){this.layout=new Rc.HorizontalLayout({direction:"left"==a?"leftToRight":"rightToLeft"});this.setProperty("alignCheckBox",a)}},layout:{initialize:function(){this.layout=new Rc.HorizontalLayout({direction:"left"==
this.alignCheckBox?"leftToRight":"rightToLeft"})}},label:{defaultValue:"label",after:["submorphs"],derived:!0,get:function(){return this.labelMorph.value},set:function(a){this.labelMorph.value=a}},checked:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.checked},set:function(a){this.checkboxMorph.checked=a;Rc.signal(this,"checked",a)}},active:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.active},set:function(a){this.checkboxMorph.active=a}},labelMorph:{derived:!0,
readOnly:!0,get:function(){return this.getSubmorphNamed("label")}},checkboxMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("checkbox")}},submorphs:{initialize:function(){this.submorphs=[new Rc.CheckBox({name:"checkbox"}),new Rc.Label({nativeCursor:"pointer",name:"label",padding:Rc.Rectangle.inset(5,3)})];Rc.connect(this,"alignCheckBox",this,"extent");Rc.connect(this.checkboxMorph,"checked",this,"checked")}}}}}],c,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:13468,end:16001})}(Rc.Morph));Rc.LabeledCheckBox=fL;Rc.LabeledCheckBox=fL;Rc.LabeledCheckBox=fL;var gL=ya("bg",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=c.hasOwnProperty("ModeSelector")&&"function"===typeof c.ModeSelector?c.ModeSelector:c.ModeSelector=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Nb(l,b,[{key:"createLabels",value:function(a,f,m){var q=this;m=void 0===m?{}:m;return Rc.arr.zip(a,f).map(function(r){r=$jscomp.makeIterator(r);var u=r.next().value,v=r.next().value;r=m[u];r=Rc.morph(Object.assign({name:u+"Label",master:{auto:"styleguide://SystemWidgets/mode label"},type:"label",value:u},r&&{tooltip:r}));Rc.connect(r,"onMouseDown",q,"update",{updater:function(y){y(u,v)},varMapping:{name:u,value:v}});return r})}},{key:"relayout",value:function(a){a=void 0===a?!0:
a;var f=this,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return f.layout.forceLayout(),m=f.get("typeMarker"),q=f.currentLabel.bounds(),a?r.yield(m.animate({bounds:q,duration:200}),3):(m.setBounds(q),r.jumpTo(2));r.jumpToEnd()})}},{key:"animateFontColor",value:function(a,f,m){var q=a.fontColor;a.animate({customTween:function(r){return a.fontColor=q.interpolate(r,f)},duration:m})}},{key:"update",value:function(a,f,m){m=void 0===m?!1:m;var q=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){r=
q.get(a+"Label");if(r==q.currentLabel)return u.return();q.getSubmorphsByStyleClassName("Label").forEach(function(v){v!=r&&q.animateFontColor(v,q.fontColor,200)});q.currentLabel=r;!m&&Rc.signal(q,a,f);!m&&Rc.signal(q,"switchLabel",f);q.relayout(!m);return u.yield(q.animateFontColor(r,q.selectionFontColor,200),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModeSelector"}},{key:"example",value:function(){(new Rc.ModeSelector({items:{foo:{},trottel:{},babbel:{}}})).openInWorld()}},
{key:"properties",get:function(){return{items:{derived:!0,set:function(a){Rc.obj.isArray(a)?this.keys=this.values=a:(this.keys=Rc.obj.keys(a),this.values=Rc.obj.values(a))}},height:{defaultValue:30},init:{},keys:{before:["layout"]},values:{before:["layout"]},tooltips:{},fontColor:{defaultValue:Rc.Color.black},selectionFontColor:{defaultValue:Rc.Color.white},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/mode selector"}}},layout:{after:["items","keys","values"],initialize:function(){this.keys&&
(this.layout=new Rc.GridLayout({rows:[0,{paddingBottom:10}],columns:[0,{fixed:5},this.keys.length+2,{fixed:5}],grid:[[null].concat($jscomp.arrayFromIterable(Rc.arr.interpose(this.keys.map(function(a){return a+"Label"}),null)),[null])],autoAssign:!1,fitToCell:!1}))}},submorphs:{after:["items","keys","values","fontColor"],initialize:function(){this.keys&&(this.submorphs=[{name:"typeMarker",isLayoutable:!1}].concat($jscomp.arrayFromIterable(this.createLabels(this.keys,this.values,this.tooltips))),Rc.connect(this,
"extent",this,"relayout"),this.update(this.init?this.init:this.keys[0],this.values[this.keys.includes(this.init)?this.keys.indexOf(this.init):0],!0))}}}}}],c,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:16010,end:19643})}(Rc.Morph));Rc.ModeSelector=gL;Rc.ModeSelector=gL;Rc.ModeSelector=
gL;var hL=ya("b5",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=c.hasOwnProperty("DropDownSelector")&&"function"===typeof c.DropDownSelector?c.DropDownSelector:c.DropDownSelector=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"build",value:function(){this.dropDownLabel=Rc.Icon.makeLabel("chevron-circle-down",{opacity:0,name:"dropDownIcon"});this.submorphs=[{type:"label",
name:"currentValue"},this.dropDownLabel]}},{key:"getMenuEntries",value:function(){var a=this,f=this.getNameFor(this.selectedValue);return[].concat($jscomp.arrayFromIterable(void 0!=this.selectedValue?[{command:f,target:this}]:[]),$jscomp.arrayFromIterable(Rc.arr.compact(this.commands.map(function(m){return m.name!=f&&{command:m.name,target:a}}))))}},{key:"commands",get:function(){var a=this;return Rc.obj.isArray(this.values)?this.values.map(function(f){return{name:String(f),exec:function(){Rc.signal(a,
"update",f);a.selectedValue=f}}}):Rc.properties.forEachOwn(this.values,function(f,m){return{name:f,exec:function(){Rc.signal(a,"update",m);a.selectedValue=m}}})}},{key:"getNameFor",value:function(a){return this.getCurrentValue?this.getCurrentValue():Rc.obj.isArray(this.values)?Rc.obj.safeToString(a):Rc.obj.safeToString(Rc.properties.nameFor(this.values,a))}},{key:"relayout",value:function(){var a=this.getNameFor(this.selectedValue),f=this.get("currentValue");"undefined"==a?(f.value="Not set",f.fontColor=
Rc.Color.gray):(f.value=a,f.fontColor=Rc.Color.black)}},{key:"onHoverIn",value:function(){this.dropDownLabel.animate({opacity:1,duration:300})}},{key:"onHoverOut",value:function(){this.dropDownLabel.animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(a){this.menu=this.world().openWorldMenu(a,this.getMenuEntries());this.menu.hasFixedPosition=!0;this.menu.topLeft=this.globalPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropDownSelector"}},{key:"properties",
get:function(){return{values:{defaultValue:[]},getCurrentValue:{defaultValue:void 0},selectedValue:{after:["submorphs","values","getCurrentValue"],set:function(a){this.setProperty("selectedValue",a);this.relayout()}},fontColor:{isStyleProp:!0,defaultValue:Rc.Color.black},fontSize:{isStyleProp:!0,defaultValue:12},fontFamily:{isStyleProp:!0,defaultValue:"Sans-Serif"},border:{defaultValue:{radius:3,color:Rc.Color.gray.darker(),style:"solid"}},padding:{defaultValue:1},isSelected:{defaultValue:"false",
set:function(a){this.setProperty("isSelected",a);this.fontColor=a?Rc.Color.white:Rc.Color.black}},layout:{initialize:function(){this.layout=new Rc.HorizontalLayout({spacing:this.padding})}},submorphs:{initialize:function(){this.build()}}}}}],c,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},
{start:19652,end:22889})}(Rc.Morph));Rc.DropDownSelector=hL;Rc.DropDownSelector=hL;Rc.DropDownSelector=hL;var iL=ya("bk",function(b){var c=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=c.hasOwnProperty("SearchField")&&"function"===typeof c.SearchField?c.SearchField:c.SearchField=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"parseInput",value:function(){var a=Array.from(this.textString).reduce(function(m,
q){if("\\"===q&&!m.escaped)return m.escaped=!0,m;" "!==q||m.escaped?(m.spaceSeen=!1,m.current+=q):(!m.spaceSeen&&m.current&&(m.tokens.push(m.current),m.current=""),m.spaceSeen=!0);m.escaped=!1;return m},{tokens:[],current:"",escaped:!1,spaceSeen:!1});a.current&&a.tokens.push(a.current);var f=a.tokens.map(function(m){return m.toLowerCase()});return{tokens:a.tokens,lowercasedTokens:f}}},{key:"clearInput",value:function(){this.textString="";Rc.signal(this,"searchInput",this.parseInput());this.onBlur()}},
{key:"matches",value:function(a){return this.textString?this.filterFunction.call(this,this.parseInput(),{string:a}):!0}},{key:"onChange",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a);a="replace"===a.selector;this.isFocused();this.get("placeholder icon")&&(this.get("placeholder icon").visible=!!this.textString);this.textString.includes("\n")&&(this.textString=this.textString.replace("\n",""),this.owner.focus());this.active&&a&&Rc.signal(this,"searchInput",
this.parseInput())}},{key:"onBlur",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onBlur",this).call(this,a);this.active=!1;this.get("placeholder").visible=!this.textString;this.animate({styleClasses:["idle"],duration:300})}},{key:"onFocus",value:function(a){Nb._get(Object.getPrototypeOf(l.prototype),"onFocus",this).call(this,a);this.animate({styleClasses:["selected"],duration:300});this.get("placeholder").visible=!1;this.active=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchField"}},
{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search field"}}},selectedFontColor:{isStyleProp:!0,defaultValue:Rc.Color.black},idleFontColor:{isStyleProp:!0,defaultValue:Rc.Color.gray},borderColor:{defaultValue:Rc.Color.gray},layout:{initialize:function(){this.layout=new Rc.HorizontalLayout({autoResize:!1,direction:"rightToLeft"})}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(a){this.setProperty("fuzzy",
a);a?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var a=this.getProperty("filterFunction");if(!a)return this.defaultFilterFunction;"string"===typeof a&&(a=eval("("+a+")"));return a}},sortFunction:{},
defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(a,f){return a.lowercasedTokens.every(function(m){return f.string.toLowerCase().includes(m)})})}},fuzzySortFunction:{get:function(){var a=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(f,m){var q=String(Rc.PropertyPath("string"===typeof a.fuzzy?a.fuzzy:"string").get(m)).toLowerCase(),r=0;f.lowercasedTokens.forEach(function(u){q.startsWith(u)?r-=10:q.includes(u)&&
(r-=5)});return Rc.arr.sum(f.lowercasedTokens.map(function(u){return Rc.string.levenshtein(q.toLowerCase(),u)}))+r})}},fuzzyFilterFunction:{get:function(){var a=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(f,m){var q="string"===typeof a.fuzzy?a.fuzzy:"string";if(f.lowercasedTokens.every(function(u){return m.string.toLowerCase().includes(u)}))return!0;var r=String(Rc.PropertyPath(q).get(m)).toLowerCase();return 3>=Rc.arr.sum(f.lowercasedTokens.map(function(u){return Rc.string.levenshtein(r,
u)}))})}},placeHolder:{defaultValue:"Search"},submorphs:{after:["placeHolder"],initialize:function(){this.submorphs=[{type:"label",name:"placeholder",isLayoutable:!1,value:this.placeHolder,reactsToPointer:!1},Rc.Icon.makeLabel("times-circle",{padding:Rc.rect(2,4,3,0),fontSize:14,visible:!1,fixedHeight:!0,autofit:!1,extent:Rc.pt(20,22),name:"placeholder icon",fontColor:Rc.Color.gray,nativeCursor:"pointer"})];Rc.connect(this.get("placeholder icon"),"onMouseDown",this,"clearInput")}}}}}],c,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:22932,end:29519})}(Rc.Text));Rc.SearchField=iL;Rc.SearchField=iL;Rc.SearchField=iL;var hS=Object.freeze({__proto__:null,Leash:cL,Slider:dL,ValueScrubber:eL,CheckBox:eF,LabeledCheckBox:fL,ModeSelector:gL,DropDownSelector:hL,SearchField:iL}),dj=lively.FreezerRuntime.recorderFor("lively.components/index.js");
Object.assign(dj,Ima);Object.assign(dj,Hma);Object.assign(dj,Jma);Object.assign(dj,Kma);Object.assign(dj,Lma);Object.assign(dj,Mma);dj.Window=eS;dj.prompts=fS;dj.widgets=hS;dj.LoadingIndicator=RB;dj.addClassMappings=xc;dj.List=TB;dj.DropDownList=dF;dj.Button=SB;dj.CheckBox=eF;dj.addClassMappings({list:dj.List,dropdownlist:dj.DropDownList,button:dj.Button,checkbox:dj.CheckBox,labeledcheckbox:dj.widgets.LabeledCheckBox});dj.Window=eS;dj.Window=eS;dj.LoadingIndicator=RB;dj.LoadingIndicator=RB;dj.prompts=
fS;dj.prompts=fS;dj.widgets=hS;dj.widgets=hS;var yp=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js");yp.Morph=Hj;yp.MorphicDB=Jt;yp.LoadingIndicator=RB;yp.resource=T;var UB=function(b){var c=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js"),l=c.hasOwnProperty("WorldLoadingScreen")&&"function"===typeof c.WorldLoadingScreen?c.WorldLoadingScreen:c.WorldLoadingScreen=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Nb(l,b,[{key:"commands",get:function(){var a=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;a.setBounds($world.windowBounds());a.get("json target indicator").topRight=a.innerBounds().insetBy(25).topRight()}}]}},{key:"__head_html__",get:function(){return'<style type="text/css">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},{key:"onLoad",value:function(){var a=
this,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress){if(!lively.FreezerRuntime)return r.jumpTo(0);f=a.get("package loading indicator");f.startStepping("updateProgressBar");document.body.style.backgroundColor="black";m=a.getWorldName();(q=a.getFilePath())&&a.get("json target indicator").animate({opacity:1,duration:300});return r.yield(a.transitionToLivelyWorld({worldName:m,filePath:q},f),3)}f.stopStepping();r.jumpToEnd()})}},{key:"transitionToLivelyWorld",
value:function(a,f){var m=a.worldName,q=a.filePath,r=this,u,v,y,z,A,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:return u=r.get("package loading indicator"),G.yield(Promise.resolve().then(function(){return C5}),2);case 2:v=G.yieldResult;y=v.bootstrap;if(!(z=m&&"__newWorld__"!=m)){G.jumpTo(3);break}return G.yield(yp.MorphicDB.default.exists("world",m),4);case 4:z=!G.yieldResult.exists;case 3:if(z)return G.return(r.indicateMissingWorld(!0));if(!(A=q)){G.jumpTo(5);
break}return G.yield(yp.resource(document.location.origin).join(q).exists(),6);case 6:A=!G.yieldResult;case 5:if(A)return G.return(r.indicateMissingWorld(!0));C=yp.LoadingIndicator.open("...starting bootstrap process...",{animated:!0,delay:1E3});f.opacity=1;return G.yield(y({worldName:m,filePath:q,loadingIndicator:C,progress:u}),0)}})}},{key:"getWorldName",value:function(){return document.location.href.endsWith("worlds/new")?"__newWorld__":yp.resource(document.location.href).query().name||!1}},{key:"getFilePath",
value:function(){return yp.resource(document.location.href).query().file||!1}},{key:"indicateMissingWorld",value:function(a){this.get("package loading indicator").visible=!a;this.get("broken heart").visible=this.get("broken heart").isLayoutable=a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldLoadingScreen"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}}}}}],c,{pathInPackage:function(){return"loading-page.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-73"}}},{start:158,end:2907})}(yp.Morph);yp.WorldLoadingScreen=UB;yp.WorldLoadingScreen=UB;yp.WorldLoadingScreen=UB;var ug=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js");ug.Morph=Hj;ug.MorphicDB=Jt;ug.World=Zu;ug.easings=yq;ug.morph=Gc;ug.promise=Kf;ug.string=Hg;ug.date=rt;
ug.Color=wf;ug.pt=fh;ug.LoadingIndicator=RB;ug.resource=T;ug.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
var VB=function(b){var c=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),l=c.hasOwnProperty("WorldPreview")&&"function"===typeof c.WorldPreview?c.WorldPreview:c.WorldPreview=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,b,[{key:"relayout",value:function(){this.setBounds(this.world().visibleBounds())}},{key:"onLoad",value:function(){this.ui.spinner.visible=!1}},{key:"displayPreview",value:function(){var a=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.yield(a.initWithCommit(a._commit),0)})}},{key:"initWithCommit",value:function(a){var f=this,m,q,r,u,v,y,z,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){if(1==C.nextAddress)return m=f.ui,q=m.preview,r=m.timestamp,u=m.title,v=m.description,y=m.previewContainer,f.opacity=.5,y.opacity=0,C.yield(f.whenRendered(),2);if(3!=C.nextAddress)return f._commit=a,q.imageUrl=a.preview||ug.missingSVG,z=a.author,A=z.name,
A=A.startsWith("guest-")?"guest":A,r.value=[A,{fontSize:13,fontWeight:"bold",paddingTop:"1px"},ug.date.format(a.timestamp," - d.m.yy HH:MM"),{fontWeight:"bold",fontSize:12,paddingTop:"2px"}],u.value=ug.string.truncate(a.name,18,"..."),v.value=a.description,C.yield(f.whenRendered(),3);y.opacity=1;f.animate({opacity:1,duration:300});C.jumpToEnd()})}},{key:"openAnimated",value:function(a){a=void 0===a?$world.visibleBounds():a;var f=this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return m=
ug.morph(Object.assign({},f.spec(),{reactsToPointer:!1,renderOnGPU:!0,submorphs:[f.ui.spinner.spec()]})).openInWorld(),m.hasFixedPosition=!0,m.globalPosition=f.globalPosition,m.opacity=0,q.yield(m.whenRendered(),2);case 2:return q.yield(m.animate({opacity:1,duration:300}),3);case 3:return m.dropShadow=!1,m.animate({bounds:a,borderRadius:0,duration:500,easing:ug.easings.inOutQuint}),m.respondsToVisibleWindow=!0,q.yield(m.ui.spinner.animate({center:m.innerBounds().center(),duration:500,easing:ug.easings.inOutQuint}),
4);case 4:return q.yield(ug.promise.delay(1E3),5);case 5:return q.return(m)}})}},{key:"openWorld",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(a.openAnimated(),2);a.loadWorld();f.jumpToEnd()})}},{key:"loadWorld",value:function(){var a=this,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){f=a._commit;m=f._id;q=f.name;if(lively.FreezerRuntime)return r=ug.LoadingIndicator.open("...starting bootstrap process...",
{animated:!0,delay:1E3}),a.transitionToLivelyWorld(document.location.origin,a._commit,r),v.jumpTo(0);u=ug.LoadingIndicator.open("loading "+q);return v.yield(ug.World.loadFromCommit(m,void 0,{morphicDB:ug.MorphicDB.default}),3)}u.remove();v.jumpToEnd()})}},{key:"transitionToLivelyWorld",value:function(a,f,m){var q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(wb.import("./package loading progress indicator-8d6bd7ae.js"),3);case 3:if(!(q=
y.yieldResult)){y.jumpTo(4);break}return y.yield(ug.resource("part://partial freezing/package loading progress indicator"),5);case 5:q=y.yieldResult;case 4:return y.yield(q.read(),2);case 2:return r=y.yieldResult,y.yield(Promise.resolve().then(function(){return C5}),6);case 6:return u=y.yieldResult,v=u.bootstrap,y.yield(v({commit:f,loadingIndicator:m,progress:r}),0)}})}},{key:"showVersions",value:function(){var a=this,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return f=
200,m=ug.easings.inOutExpo,q=a.ui,r=q.previewContainer,y.yield(wb.import("./version container-55584407.js"),3);case 3:if(!(u=y.yieldResult)){y.jumpTo(4);break}return y.yield(ug.resource("part://partial freezing/version container"),5);case 5:u=y.yieldResult;case 4:return y.yield(u.read(),2);case 2:return v=y.yieldResult,v.name="version container",v.position=ug.pt(0,0),a.addMorph(v),v.reactsToPointer=v.visible=!0,v.initializeFromStartCommit(a._commit),a.animate({width:515,duration:f,easing:m}),r.animate({opacity:0,
duration:f}),y.yield(v.animate({opacity:1,duration:f}),6);case 6:r.reactsToPointer=r.visible=!1,y.jumpToEnd()}})}},{key:"hideVersions",value:function(){var a=this,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return f=ug.easings.inOutExpo,m=a.ui,q=m.previewContainer,r=m.versionContainer,q.reactsToPointer=q.visible=!0,a.animate({width:245,duration:200,easing:f}),q.animate({opacity:1,duration:200}),u.yield(r.animate({opacity:0,duration:200}),2);r.reset();
r.remove();u.jumpToEnd()})}},{key:"toggleDeleteButton",value:function(a){this.ui.deleteButton.visible=a}},{key:"onHoverIn",value:function(a){this.toggleDeleteButton(!0)}},{key:"onHoverOut",value:function(a){this.toggleDeleteButton(!1)}},{key:"tryToDelete",value:function(){var a=this,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return f=300,m=a.ui,q=m.previewContainer,v.yield(wb.import("./delete world prompt-5f29d425.js"),3);case 3:if(!(r=v.yieldResult)){v.jumpTo(4);
break}return v.yield(ug.resource("part://partial freezing/delete world prompt"),5);case 5:r=v.yieldResult;case 4:return v.yield(r.read(),2);case 2:return u=v.yieldResult,Object.assign(u,{name:"delete world prompt",position:ug.pt(0,0),opacity:0}),a.addMorph(u),u.visible=!0,v.yield(a.withAnimationDo(function(){u.opacity=1;a.dropShadow=a.dropShadow.with({color:ug.Color.black.withA(.5),blur:50});q.opacity=.3;q.blur=1},{duration:f}),0)}})}},{key:"confirmDelete",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==
f.nextAddress)return f.yield(ug.MorphicDB.default.commit(Object.assign({},a._commit,{content:void 0,snapshot:null})),2);a.isComponent||a.owner.isWorld||a.owner.remove();f.jumpToEnd()})}},{key:"cancelDelete",value:function(){var a=this,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return f=a.ui,m=f.previewContainer,q=f.deleteWorldPrompt,r.yield(a.withAnimationDo(function(){Object.assign(m,{opacity:1,blur:0});a.dropShadow=a.dropShadow.with({color:ug.Color.rgba(0,
0,0,.11)});q.opacity=0},{duration:300}),2);q.remove();r.jumpToEnd()})}},{key:"onMouseUp",value:function(a){var f=this.ui,m=f.openButton,q=f.versionButton,r=f.deleteButton,u=f.closeVersionsButton,v=f.cancelDeleteButton;f=f.confirmDeleteButton;switch(a.targetMorph){case m:this.openWorld();break;case q:this.showVersions();break;case r:this.tryToDelete();break;case u:this.hideVersions();break;case f:this.confirmDelete();break;case v:this.cancelDelete()}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldPreview"}},
{key:"properties",get:function(){return{ui:{readOnly:!0,get:function(){return{previewContainer:this.getSubmorphNamed("preview container"),versionContainer:this.getSubmorphNamed("version container"),preview:this.getSubmorphNamed("preview"),timestamp:this.getSubmorphNamed("timestamp"),title:this.getSubmorphNamed("title"),description:this.getSubmorphNamed("description"),openButton:this.getSubmorphNamed("open button"),versionButton:this.getSubmorphNamed("version button"),spinner:this.getSubmorphNamed("spinner"),
deleteButton:this.getSubmorphNamed("delete button"),closeVersionsButton:this.getSubmorphNamed("close versions button"),versionList:this.getSubmorphNamed("version list"),deleteWorldPrompt:this.getSubmorphNamed("delete world prompt"),cancelDeleteButton:this.getSubmorphNamed("cancel delete button"),confirmDeleteButton:this.getSubmorphNamed("confirm delete button")}}}}}}],c,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"PartialFreezing",version:"0.1.1-73"}}},{start:328,end:8310})}(ug.Morph);ug.WorldPreview=VB;ug.WorldPreview=VB;ug.WorldPreview=VB;var WB=function(b){var c=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),l=c.hasOwnProperty("WorldLandingPage")&&"function"===typeof c.WorldLandingPage?c.WorldLandingPage:c.WorldLandingPage=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Nb(l,
b,[{key:"__loading_html__",get:function(){return"\n      <style>\n        "+this.loadingScreen.cssDeclaration+"\n      </style>\n      "+this.loadingScreen.html+"\n    "}},{key:"__head_html__",get:function(){return'\n<link type="text/css" rel="stylesheet" id="lively-font-awesome" href="/lively.morphic/assets/font-awesome/css/font-awesome.css">\n<link type="text/css" rel="stylesheet" id="lively-font-inconsolata" href="/lively.morphic/assets/inconsolata/inconsolata.css">\n<style type="text/css" id="WorldLandingPage_7068CDA9_749E_4EC1_9BC4_50DF06EAA2BA-Nunito">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"commands",get:function(){var a=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;document.body.style.overflowY="hidden";a.setBounds($world.windowBounds());a.getSubmorphNamed("globe").extent=a.extent;a.ensureUserFlap();var f=a.getSubmorphNamed("a project browser");f&&(f.center=a.extent.scaleBy(.5))}}]}},{key:"ensureUserFlap",value:function(){var a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:return $world.get("user flap")?
m.return():m.yield(wb.import("./dark-76b636f6.js"),3);case 3:if(!(a=m.yieldResult)){m.jumpTo(4);break}return m.yield(ug.resource("part://SystemIDE/user flap master/dark"),5);case 5:a=m.yieldResult;case 4:return m.yield(a.read(),2);case 2:return f=m.yieldResult,f.name="user flap",f.showMorphControls=!1,f.hasFixedPosition=!0,f.openInWorld(),f.opacity=0,f.alignInWorld(),f.get("fast load toggler").refresh(),m.yield(ug.promise.delay(1E3),6);case 6:f.animate({opacity:1}),m.jumpToEnd()}})}},{key:"beforePublish",
value:function(){var a=this.getSubmorphNamed("a project browser");a&&a.remove()}},{key:"onLoad",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(a.whenRendered(),2);if(!lively.FreezerRuntime)return m.return();$world.fill=ug.Color.black;document.documentElement.style.background=ug.Color.black;a.showWorldList().then(function(){return document.getElementById("loading-screen").remove()});a.getSubmorphNamed("globe").fullyLoaded();
(f=document.getElementById("loading screen"))&&f.remove();m.jumpToEnd()})}},{key:"showWorldList",value:function(){var a=this,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(f=a.getSubmorphNamed("a poject browser")){y.jumpTo(2);break}m=a;q=m.addMorph;r=m;return y.yield(wb.import("./project browser-2a0a3ec9.js"),4);case 4:if(!(u=y.yieldResult)){y.jumpTo(5);break}return y.yield(ug.resource("part://partial freezing/project browser"),6);case 6:u=
y.yieldResult;case 5:return y.yield(u.read(),3);case 3:f=q.call(r,y.yieldResult);case 2:v=f,v.name="a project browser",a.reset(),v.showCloseButton=!1,v.extent=ug.pt(1110,800).minPt(a.extent.subPt(ug.pt(50,150))),v.center=a.innerBounds().center(),v.animate({opacity:1,duration:300}),v.displayWorlds(),v.hasFixedPosition=!1,y.jumpToEnd()}})}},{key:"reset",value:function(){var a=this.getSubmorphNamed("a project browser");a.opacity=0;a.center=this.innerBounds().center()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"WorldLandingPage"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}},loadingScreen:{}}}}],c,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-73"}}},{start:8319,end:11653})}(ug.Morph);ug.WorldLandingPage=
WB;ug.WorldLandingPage=WB;ug.WorldLandingPage=WB;var tv=lively.FreezerRuntime.recorderFor("PartialFreezing/index.js");tv.WorldLoadingScreen=UB;tv.WorldLandingPage=WB;tv.WorldPreview=VB;tv.WorldLoadingScreen=UB;tv.WorldLoadingScreen=UB;tv.WorldLandingPage=WB;tv.WorldLandingPage=WB;tv.WorldPreview=VB;tv.WorldPreview=VB;var Td=lively.FreezerRuntime.recorderFor("PartialFreezing/bootstrap.js");Td.bootstrap=hI;Td.fastPrepLivelySystem=function(b){return Promise.resolve().then(function(){b.status="starting fast system preparation..."}).then(function(){return Td.resource(document.location.origin).join("package-registry.json").readJson()}).then(function(c){System["__lively.modules__packageRegistry"]=
lively.modules.PackageRegistry.fromJSON(System,c);return System}).then(function(){return Td.loadViaScript("/lively.user/dist/lively.user-client.js")})};Td.installFetchHook=function(b){function c(l,a){Td.loads++;b.status="loading "+Td.string.truncateLeft(a.name.replace(window.System.baseURL,""),25,"...");b.progress=Td.loads/(800-4*Object.keys(Td.extractedModules).length);b.center=$world.innerBounds().center();return l(a)}window.__logFetch=c;lively.modules.installHook("fetch",c)};Td.extractModules=
function(b){Object.keys(lively.FreezerRuntime.registry).filter(function(c){return c.startsWith(b)}).forEach(function(c){Td.extractedModules[window.origin+"/"+c]=Object.assign({},lively.FreezerRuntime.registry[c].exports)})};Td.loadComponents=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return b.yield(wb.import("./world-10e3c1f8.js"),2);case 2:return b.yield(wb.import("./editor-plugin-3b752fd9.js").then(function(c){return c.e}),3);case 3:return b.yield(wb.import("./editor-plugin-09a7099e.js"),
4);case 4:return b.yield(wb.import("./index-a98bf65c.js"),5);case 5:return b.yield(Promise.resolve().then(function(){return Zla}),6);case 6:return b.yield(Promise.resolve().then(function(){return $la}),7);case 7:return b.yield(Promise.resolve().then(function(){return fea}),8);case 8:Td.extractModules("lively.bindings"),Td.extractModules("lively.shell"),Td.extractModules("lively.ide"),Td.extractModules("lively.components"),b.jumpToEnd()}})};Td.bootstrapLivelySystem=function(b,c,l){return Promise.resolve().then(function(){b.status=
"starting bootstrap process..."}).then(function(){var a,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(c.whenRendered(),2);case 2:if("frozen"!=l["lively.lang"]&&!Td.fastLoad){v.jumpTo(3);break}return v.yield(Promise.resolve().then(function(){return W_}),4);case 4:a=v.yieldResult,Td.extractModules("lively.lang"),c.finishPackage({packageName:"lively.lang",frozen:!0}),delete a._prevLivelyGlobal;case 3:if("frozen"!=l["lively.ast"]&&
!Td.fastLoad){v.jumpTo(5);break}f=lively;return v.yield(Promise.resolve().then(function(){return h0}),6);case 6:f.ast=v.yieldResult,Td.extractModules("lively.ast"),c.finishPackage({packageName:"lively.ast",frozen:!0});case 5:if("frozen"!=l["lively.source-transform"]&&!Td.fastLoad){v.jumpTo(7);break}m=lively;return v.yield(Promise.resolve().then(function(){return $da}),8);case 8:m.sourceTransform=v.yieldResult,Td.extractModules("lively.source-transform"),c.finishPackage({packageName:"lively.source-transform",
frozen:!0});case 7:if("frozen"!=l["lively.classes"]&&!Td.fastLoad){v.jumpTo(9);break}return v.yield(wb.import("./object-classes-7bd9e5f7.js"),10);case 10:return q=lively,v.yield(Promise.resolve().then(function(){return Jfa}),11);case 11:q.classes=v.yieldResult,Td.extractModules("lively.class"),c.finishPackage({packageName:"lively.classes",frozen:!0});case 9:if("frozen"!=l["lively.vm"]&&!Td.fastLoad){v.jumpTo(12);break}r=lively;return v.yield(Promise.resolve().then(function(){return a1}),13);case 13:r.vm=
v.yieldResult,Td.extractModules("lively.vm"),c.finishPackage({packageName:"lively.vm",frozen:!0});case 12:if("frozen"!=l["lively.modules"]&&!Td.fastLoad){v.jumpTo(14);break}return v.yield(Promise.resolve().then(function(){return oJ}),15);case 15:Td.extractModules("lively.modules"),c.finishPackage({packageName:"lively.modules",frozen:!0});case 14:if("frozen"!=l["lively.user"]&&!Td.fastLoad){v.jumpTo(16);break}return v.yield(Promise.resolve().then(function(){return ama}),17);case 17:return v.yield(wb.import("./user-ui-3de50906.js"),
18);case 18:Td.extractModules("lively.user"),c.finishPackage({packageName:"lively.user",frozen:!0});case 16:if("frozen"!=l["lively.storage"]&&!Td.fastLoad){v.jumpTo(19);break}return v.yield(Promise.resolve().then(function(){return Zka}),20);case 20:Td.extractModules("lively.storage"),c.finishPackage({packageName:"lively.storage",frozen:!0});case 19:if("frozen"!=l["lively.morphic"]&&!Td.fastLoad){v.jumpTo(0);break}return v.yield(Promise.resolve().then(function(){return Bfa}),22);case 22:return Td.extractModules("lively.resources"),
v.yield(Promise.resolve().then(function(){return b5}),23);case 23:return v.yield(wb.import("./index-792c91c7.js"),24);case 24:return Td.extractModules("lively.2lively"),v.yield(Promise.resolve().then(function(){return lea}),25);case 25:return Td.extractModules("lively.serializer2"),v.yield(Td.loadComponents(),26);case 26:return v.yield(wb.import("./index-8d38b85c.js").then(function(y){return y.i}),27);case 27:return Td.extractModules("lively.halos"),v.yield(wb.import("./index-1f89e652.js"),28);case 28:return Td.extractModules("lively-system-interface"),
v.yield(Promise.resolve().then(function(){return dea}),29);case 29:return Td.extractModules("lively.graphics"),u=lively,v.yield(Promise.resolve().then(function(){return Gma}),30);case 30:u.morphic=v.yieldResult,Td.extractModules("lively.morphic"),c.finishPackage({packageName:"lively.morphic",frozen:!0}),v.jumpToEnd()}})}).then(function(){var a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return r.yield(Td.resource(document.location.origin).join("package-registry.json").readJson(),
2);case 2:return a=r.yieldResult,r.yield(Td.loadViaScript("/lively.next-node_modules/babel-standalone/babel.js"),3);case 3:return r.yield(Td.loadViaScript("/lively.next-node_modules/systemjs/dist/system.src.js"),4);case 4:return window.System.config({baseURL:document.location.origin}),r.yield(Td.loadViaScript("/lively.modules/systemjs-init.js"),5);case 5:f=lively.modules.getSystem("bootstrapped",{baseURL:document.location.origin});lively.modules.changeSystem(f,!0);f["__lively.modules__packageRegistry"]=
lively.modules.PackageRegistry.fromJSON(f,a);for(m in Td.extractedModules)f.set(m,f.newModule(Td.extractedModules[m])),q=lively.modules.module(m),q._recorder=Td.extractedModules[m],q._frozenModule=!0;Td.installFetchHook(b);r.jumpToEnd()}})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==l["lively.lang"]&&!Td.fastLoad)return a.return(Td.importPackageAndDo("lively.lang",function(f){c.finishPackage({packageName:"lively.lang",loaded:!0});delete f._prevLivelyGlobal},
b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){c.animate({opacity:1,easing:Td.easings.outExpo,duration:300});if("dynamic"==l["lively.ast"]&&!Td.fastLoad)return a.return(Td.importPackageAndDo("lively.ast",function(f){c.finishPackage({packageName:"lively.ast",loaded:!0});lively.ast=f},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==l["lively.source-transform"]&&!Td.fastLoad)return a.return(Td.importPackageAndDo("lively.source-transform",
function(f){c.finishPackage({packageName:"lively.source-transform",loaded:!0});lively.sourceTransform=f},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==l["lively.classes"]&&!Td.fastLoad)return a.return(Td.importPackageAndDo("lively.classes",function(f){c.finishPackage({packageName:"lively.classes",loaded:!0});lively.classes=f},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==
l["lively.vm"]&&!Td.fastLoad)return a.return(Td.importPackageAndDo("lively.vm",function(f){c.finishPackage({packageName:"lively.vm",loaded:!0});lively.vm=f},b));a.jumpToEnd()})}).then(function(){function a(f){lively.modules=f;lively.modules.unwrapModuleLoad();lively.modules.unwrapModuleResolution();lively.modules.wrapModuleLoad();lively.modules.wrapModuleResolution();Td.installFetchHook(b);var m=System["__lively.modules__packageRegistry"];delete System["__lively.modules__packageRegistry"];f=System["__lively.modules__packageRegistry"]=
f.PackageRegistry.ofSystem(System);Object.assign(f,Td.obj.select(m,["packageMap","individualPackageDirs","devPackageDirs","packageBaseDirs"]));f.resetByURL();m=f.allPackages();var q=lively.modules.module("lively.modules/src/packages/package.js").recorder.Package;m.filter(function(u){return!u.constructor[Symbol.for("lively-module-meta")]}).forEach(function(u){Td.adoptObject(u,q)});m=Object.values(System["__lively.modules__loadedModules"]);var r=lively.modules.module("lively.modules/src/module.js").recorder.ModuleInterface;
m.filter(function(u){return!u.constructor[Symbol.for("lively-module-meta")]}).forEach(function(u){Td.adoptObject(u,r)})}return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return"frozen"==l["lively.modules"]||Td.fastLoad?(System._scripting=lively.modules.scripting,f.jumpTo(2)):f.yield(Td.importPackageAndDo("lively.modules",a,b),2);c.finishPackage({packageName:"lively.modules",loaded:!0});f.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==
l["lively.user"]&&!Td.fastLoad)return a.return(Td.importPackageAndDo("lively.user",function(f){c.finishPackage({packageName:"lively.user",loaded:!0});lively.user=f},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==l["lively.storage"]&&!Td.fastLoad)return a.return(Td.importPackageAndDo("lively.storage",function(f){c.finishPackage({packageName:"lively.storage",loaded:!0});lively.storage=f},b));a.jumpToEnd()})})};Td.importPackageAndDo=
function(b,c,l){var a=b.split("/").slice(-1)[0];l.label="loading "+a;return lively.modules.importPackage(b).then(c||function(){})};Td.polyfills=function(){var b=[];"PointerEvent"in window||b.push(Td.loadViaScript(document.location.origin+"/lively.next-node_modules/pepjs/dist/pep.js"));"fetch"in window||b.push(Td.loadViaScript("//cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.js"));return Promise.all(b)};Td.resource=T;Td.loadViaScript=Qb;Td.promise=Kf;Td.string=Hg;Td.obj=lf;Td.modulePackage=oJ;Td.easings=
yq;Td.adoptObject=qr;Td.Color=wf;lively.modules=Td.modulePackage;Td.loginDone=!0;Td.doBootstrap=!0;Td.askBeforeQuit=!0;Td.worldLoaded=!1;Td.loc=document.location;Td.query=Td.resource(Td.loc.href).query();Td.fastLoad=1==Td.query.fastLoad;Td.bootstrap=hI;Td.bootstrap=hI;Td.loads=0;Td.extractedModules={};var C5=Object.freeze({__proto__:null,bootstrap:hI});nk.users.authServerURL="https://auth.typeshift.io";nk.css.fontAwesome="/lively.morphic/assets/fontawesome-free-5.12.1/css/all.css";nk.css.inconsolata=
"/lively.morphic/assets/inconsolata/inconsolata.css";var V_=JSON.parse('{"id":"WorldLoadingScreen_5A56BE40_172E_4EBF_A269_3C1E47C0227F","snapshot":{"WorldLoadingScreen_5A56BE40_172E_4EBF_A269_3C1E47C0227F":{"rev":77486,"props":{"name":{"value":"world loading screen"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(67.99453124999991,685.8828125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1012.7413741929706,539.71484375)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_4876C5FA_E2D9_4D85_AED4_35B7467BEE89","rev":2591},{"__ref__":true,"id":"Label_2C8FF039_727F_4A4D_997E_6F2D24FE3966","rev":2641},{"__ref__":true,"id":"ModuleProgress_2AB66F45_FDCE_4623_9C8C_19B2E001CF5A","rev":4375}]},"styleClasses":{"value":["WorldLoadingScreen","Morph","WorldLandingPage","morph"]},"layout":{"value":"__lv_expr__:{VerticalLayout}:lively.morphic:new VerticalLayout({\\n  align: \\"center\\",\\n  autoResize: false,\\n  direction: \\"centered\\",\\n  orderByIndex: false,\\n  padding: null,\\n  reactToSubmorphAnimations: false,\\n  resizeSubmorphs: false,\\n  spacing: 0\\n})"},"metadata":{"value":{"__ref__":true,"id":"0419FF53-B36B-4337-8991-48A693D8781A","rev":0}}},"lively.serializer-class-info":{"className":"WorldLoadingScreen","module":{"package":{"name":"PartialFreezing","version":"0.1.1-73"},"pathInPackage":"loading-page.js"}}},"Label_4876C5FA_E2D9_4D85_AED4_35B7467BEE89":{"rev":2591,"props":{"name":{"value":"json target indicator"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(919.7413741929706,25)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(68,31)"},"opacity":{"value":0},"styleClasses":{"value":["Label","Morph","morph"]},"isLayoutable":{"value":false},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":2,"right":2,"bottom":2,"left":2}},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":6,"right":6,"bottom":6,"left":6}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0,0,0,1],"right":[0,0,0,1],"bottom":[0,0,0,1],"left":[0,0,0,1]}},"metadata":{"value":{"__ref__":true,"id":"F0153B38-076A-494F-9AED-A3DD86893451","rev":0}},"textAndAttributes":{"value":["JSON",null]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(5,2,5,2)"},"fontSize":{"value":20},"fontWeight":{"value":"bold"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,68,31]},"F0153B38-076A-494F-9AED-A3DD86893451":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"7F99DD6B-CB2D-472F-BEAA-1CB1DDBDEFEA","rev":0}}}},"7F99DD6B-CB2D-472F-BEAA-1CB1DDBDEFEA":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Label_2C8FF039_727F_4A4D_997E_6F2D24FE3966":{"rev":2641,"props":{"name":{"value":"broken heart"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(400.37068709648537,111.970703125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(212,211)"},"visible":{"value":false},"submorphs":{"value":[{"__ref__":true,"id":"Text_D07454F6_A22B_45C2_A3A0_9A22F88FE1D5","rev":2640}]},"styleClasses":{"value":["Label","Morph","morph"]},"isLayoutable":{"value":false},"textAndAttributes":{"value":["\uf7a9",{"__ref__":true,"id":"F7F66453-1D4B-466A-8EA4-5C56430ABB12","rev":0}]},"fontSize":{"value":211.064},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(231,76,60)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"Text_D07454F6_A22B_45C2_A3A0_9A22F88FE1D5":{"rev":2640,"props":{"name":{"value":"error text"},"nativeCursor":{"value":"default"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(-66.55859375,211)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(345.1171875,104.7734375)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(0,0,0,0)"},"styleClasses":{"value":["Text","Morph","morph"]},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.09019607843137255,0.6274509803921569,0.984313725490196,1],"right":[0.09019607843137255,0.6274509803921569,0.984313725490196,1],"bottom":[0.09019607843137255,0.6274509803921569,0.984313725490196,1],"left":[0.09019607843137255,0.6274509803921569,0.984313725490196,1]}},"fixedWidth":{"value":true},"fixedHeight":{"value":true},"readOnly":{"value":true},"fontSize":{"value":22},"fontWeight":{"value":"bold"},"textAlign":{"value":"center"},"lineWrapping":{"value":true},"anchors":{"value":[]},"selections":{"key":"selections","verbatim":true,"value":[{"start":{"row":0,"column":62},"end":{"row":0,"column":62}}]},"textAndAttributes":{"key":"textAndAttributes","value":["Sorry, the world you requested can not be found on the server.",null]}},"lively.serializer-class-info":{"className":"Text","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/morph.js"}},"cachedLineBounds":[]},"F7F66453-1D4B-466A-8EA4-5C56430ABB12":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"heart-broken"}}},"ModuleProgress_2AB66F45_FDCE_4623_9C8C_19B2E001CF5A":{"rev":4375,"props":{"_tickingScripts":{"value":[{"__ref__":true,"id":"A8C497E5-7E96-463A-AA7F-76D6A5C2125E","rev":0}]},"name":{"value":"package loading indicator"},"master":{"value":"__lv_expr__:({\\"auto\\":\\"styleguide://partial freezing/package loading progress indicator\\"})"},"blur":{"value":0},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(9.440511315235426,187.92724609375)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(993.8603515624998,163.8603515625)"},"opacity":{},"submorphs":{"value":[{"__ref__":true,"id":"Path_B023C0CC_81D0_478D_8BF7_8FFF3C104318","rev":77490},{"__ref__":true,"id":"Morph_104E717E_10C4_41A2_B9A3_02B8B3E5D207","rev":2770},{"__ref__":true,"id":"Morph_F5D206FB_5BBB_4F2F_B1FB_7F4FC068B969","rev":2868},{"__ref__":true,"id":"Morph_C05011BA_3D8F_4DC5_B54F_A82ADC0C7FBA","rev":2966},{"__ref__":true,"id":"Morph_EF288497_87BB_43A3_90B6_A74996168E18","rev":3064},{"__ref__":true,"id":"Morph_FE3EFCBA_E082_4CB1_B29E_C435D8EDA1FB","rev":3162},{"__ref__":true,"id":"Morph_C58DB343_37F9_4CF5_ACB6_225A2F1BFFB7","rev":3260},{"__ref__":true,"id":"Morph_0A3DCBB2_0FC4_413B_ABBE_6D9A105DD5BA","rev":3358},{"__ref__":true,"id":"Morph_1ADFF3D2_D7B3_4ADA_964E_E77380B7150D","rev":3456},{"__ref__":true,"id":"Morph_F263F1A3_0349_41A3_9BA1_7A9783FD7801","rev":3554},{"__ref__":true,"id":"Morph_8D3C89CA_C09A_41E6_A64C_A724A15F04EF","rev":3630}]},"metadata":{"value":{"__ref__":true,"id":"1C30661E-358D-45EC-8490-57A10BFC8992","rev":0}}},"lively.serializer-class-info":{"className":"ModuleProgress","module":{"package":{"name":"ModuleProgress","version":"0.1.1-109"},"pathInPackage":"index.js"}}},"A8C497E5-7E96-463A-AA7F-76D6A5C2125E":{"rev":0,"props":{"_rev":{"value":0},"suspended":{"value":true},"stopped":{"value":false},"tickTime":{"value":null},"type":{"value":"requestAnimationFrame"},"currentTimeout":{"value":22582},"target":{"value":{"__ref__":true,"id":"ModuleProgress_2AB66F45_FDCE_4623_9C8C_19B2E001CF5A","rev":4375}},"selector":{"value":"updateProgressBar"},"args":{"value":[]}},"lively.serializer-class-info":{"className":"TargetScript","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"ticking.js"}}},"Path_B023C0CC_81D0_478D_8BF7_8FFF3C104318":{"rev":77490,"props":{"name":{"value":"progress path"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(20,0)"},"visible":{"value":false},"borderColor":{"key":"borderColor","value":"__lv_expr__:{Color,Color}:lively.graphics/color.js:{pt,rect}:lively.graphics/geometry-2d.js:Color.rgb(127,140,141)"},"metadata":{"value":{"__ref__":true,"id":"FCC777C2-25BD-4B0A-BC00-3CD6C55DA9EC","rev":0}},"vertices":{"value":["__lv_expr__:{pt}:lively.graphics/geometry-2d.js:({position:pt(0,0),isSmooth:false,controlPoints:{next:pt(0,0),previous:pt(0,0)}})","__lv_expr__:{pt}:lively.graphics/geometry-2d.js:({position:pt(20,0),isSmooth:false,controlPoints:{next:pt(0,0),previous:pt(0,0)}})"]},"endMarker":{"value":{"__ref__":true,"id":"end-marker","rev":0}}},"lively.serializer-class-info":{"className":"Path","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"FCC777C2-25BD-4B0A-BC00-3CD6C55DA9EC":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"arrow\\", _id: \\"f5486b4a5f64aed6413e16fdb4e4def6b7648b7f\\"})"}}},"end-marker":{"rev":0,"props":{"_rev":{"value":0},"tagName":{"value":"marker"},"id":{"value":"end-marker"},"viewBox":{"value":"0 0 10 10"},"refX":{"value":"5"},"refY":{"value":"5"},"markerWidth":{"value":"5"},"markerHeight":{"value":"5"},"orient":{"value":"auto"},"children":{"value":[{"__ref__":true,"id":"5CE14DD4-C1AF-4AC2-9CBB-2A5A6DFC83B2","rev":0}]},"fill":{"value":"rgba(127,140,141,1)"}}},"5CE14DD4-C1AF-4AC2-9CBB-2A5A6DFC83B2":{"rev":0,"props":{"_rev":{"value":0},"tagName":{"value":"path"},"d":{"value":"M0,0 L10,5 L0,10 z"}}},"Morph_104E717E_10C4_41A2_B9A3_02B8B3E5D207":{"rev":2770,"props":{"name":{"value":"stage lang"},"tooltip":{"value":""},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(58,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_27188C31_06B7_493A_88CE_2C41F6531C05","rev":3726},{"__ref__":true,"id":"Label_76C036C1_4177_4169_8BF3_DDA716970778","rev":3755},{"__ref__":true,"id":"Ellipse_7AF47EE5_40C1_49FA_99F9_D716D1E59645","rev":2767}]},"metadata":{"value":{"__ref__":true,"id":"F5222610-4E4D-494E-85DD-B6D059812EFC","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_27188C31_06B7_493A_88CE_2C41F6531C05":{"rev":3726,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"6917B7CE-27F2-44B4-9536-655D0E5AC344","rev":0}},"textAndAttributes":{"value":["\uf1ab",{"__ref__":true,"id":"B25D2086-45FF-44F1-AC36-54148E8F62FA","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,38,30]},"6917B7CE-27F2-44B4-9536-655D0E5AC344":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"B1C0015E-67B8-42A1-8D69-B888292F1F9F","rev":0}}}},"B1C0015E-67B8-42A1-8D69-B888292F1F9F":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"B25D2086-45FF-44F1-AC36-54148E8F62FA":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"language"}}},"Label_76C036C1_4177_4169_8BF3_DDA716970778":{"rev":3755,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(32,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"5390094D-6AF6-465B-B963-4A4C83E5130E","rev":0}},"textAndAttributes":{"value":["lang",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,33,20]},"5390094D-6AF6-465B-B963-4A4C83E5130E":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"049FC2C3-EF38-4D89-993E-E3BF56D59289","rev":0}}}},"049FC2C3-EF38-4D89-993E-E3BF56D59289":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_7AF47EE5_40C1_49FA_99F9_D716D1E59645":{"rev":2767,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10.860351562499773,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_260BF277_4955_45F3_8BC7_956B45E0BEF2","rev":3724},{"__ref__":true,"id":"Label_AB8DDC9F_0D0B_4B76_AB73_21E7C0197964","rev":3725}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"84B25321-73F5-4406-9B35-21F73CF5A946","rev":0}},"metadata":{"value":{"__ref__":true,"id":"51E359DB-856E-4685-A88F-1861459EB0DC","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_260BF277_4955_45F3_8BC7_956B45E0BEF2":{"rev":3724,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500227,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"9FC83E6B-479D-45A5-8F00-DCEC7915C54F","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"7FC42C5D-1DA8-4F46-8AE3-5AF58BBB93D5","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"9FC83E6B-479D-45A5-8F00-DCEC7915C54F":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"373BDD39-A30D-40D6-A2D3-A51E12ACC0A8","rev":0}}}},"373BDD39-A30D-40D6-A2D3-A51E12ACC0A8":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"7FC42C5D-1DA8-4F46-8AE3-5AF58BBB93D5":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_AB8DDC9F_0D0B_4B76_AB73_21E7C0197964":{"rev":3725,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"8E663698-44C2-486F-ADDC-54CE204CDE8F","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"62D11065-B608-4B10-A332-F107A6354AE1","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"8E663698-44C2-486F-ADDC-54CE204CDE8F":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"B61E8048-7716-40BB-B3D5-EA9C65744FFF","rev":0}}}},"B61E8048-7716-40BB-B3D5-EA9C65744FFF":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"62D11065-B608-4B10-A332-F107A6354AE1":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"84B25321-73F5-4406-9B35-21F73CF5A946":{"rev":0,"props":{"_rev":{"value":0}}},"51E359DB-856E-4685-A88F-1861459EB0DC":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"F5222610-4E4D-494E-85DD-B6D059812EFC":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_F5D206FB_5BBB_4F2F_B1FB_7F4FC068B969":{"rev":2868,"props":{"name":{"value":"stage ast"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(104,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(46.86035156249977,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Ellipse_2616326A_2DE2_4E57_9DF0_12E64F045409","rev":2830},{"__ref__":true,"id":"Label_E1FD4896_9F71_4766_80D3_4774B2CC2085","rev":3729},{"__ref__":true,"id":"Label_C9671E8B_2859_4D9B_8D83_274A4B491770","rev":3756}]},"metadata":{"value":{"__ref__":true,"id":"A7826DE2-D524-4764-8F77-BF9EF66F42D6","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Ellipse_2616326A_2DE2_4E57_9DF0_12E64F045409":{"rev":2830,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10.860351562499773,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_3FB28397_A96F_48AA_A644_1F394505E1C3","rev":3727},{"__ref__":true,"id":"Label_F9E004A9_C8F8_4FAF_8DFB_A303265B49E0","rev":3728}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"40302E20-DC18-4FF8-ADA7-5636E9E9335A","rev":0}},"metadata":{"value":{"__ref__":true,"id":"DF5B8AC2-BFB9-4F52-AE5C-01429571D529","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_3FB28397_A96F_48AA_A644_1F394505E1C3":{"rev":3727,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500227,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"5BE64ABC-D65F-4AE5-8A5A-3FB312402738","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"2DE1539D-2AB3-44EB-9F36-BA93DD3D567C","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"5BE64ABC-D65F-4AE5-8A5A-3FB312402738":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"F8132B15-9335-4B07-990F-E5C5A7CD7252","rev":0}}}},"F8132B15-9335-4B07-990F-E5C5A7CD7252":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"2DE1539D-2AB3-44EB-9F36-BA93DD3D567C":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_F9E004A9_C8F8_4FAF_8DFB_A303265B49E0":{"rev":3728,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"3BBA935E-B9DF-4FBE-9E0E-C6A28DEBF78A","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"AA350A53-2776-4438-8115-47FFE468432D","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"3BBA935E-B9DF-4FBE-9E0E-C6A28DEBF78A":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"FB2470B1-0ED9-4A20-8B93-17B5C2483606","rev":0}}}},"FB2470B1-0ED9-4A20-8B93-17B5C2483606":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"AA350A53-2776-4438-8115-47FFE468432D":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"40302E20-DC18-4FF8-ADA7-5636E9E9335A":{"rev":0,"props":{"_rev":{"value":0}}},"DF5B8AC2-BFB9-4F52-AE5C-01429571D529":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_E1FD4896_9F71_4766_80D3_4774B2CC2085":{"rev":3729,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"1E866D90-42BD-4DEB-89CA-9DADC9D75D3C","rev":0}},"textAndAttributes":{"value":["\uf1bb",{"__ref__":true,"id":"E196B5BF-28AE-4B94-89BA-D32F54A3B1F1","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,23,30]},"1E866D90-42BD-4DEB-89CA-9DADC9D75D3C":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"062B0D36-5356-4CA6-9C51-E9F6536F5811","rev":0}}}},"062B0D36-5356-4CA6-9C51-E9F6536F5811":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"E196B5BF-28AE-4B94-89BA-D32F54A3B1F1":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"tree"}}},"Label_C9671E8B_2859_4D9B_8D83_274A4B491770":{"rev":3756,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"7F393D53-6ABC-4E97-80B7-1A0A18BE2A1E","rev":0}},"textAndAttributes":{"value":["ast",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,24,20]},"7F393D53-6ABC-4E97-80B7-1A0A18BE2A1E":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"443A6322-2847-4358-AACA-D5A4F4C7418E","rev":0}}}},"443A6322-2847-4358-AACA-D5A4F4C7418E":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"A7826DE2-D524-4764-8F77-BF9EF66F42D6":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_C05011BA_3D8F_4DC5_B54F_A82ADC0C7FBA":{"rev":2966,"props":{"name":{"value":"stage source-transform"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(173.86035156249977,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(147,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_23E32E30_EAC8_41ED_9393_AF9DA5B5ADA7","rev":3757},{"__ref__":true,"id":"Ellipse_1DB3FE34_E36F_4759_8557_3DEB4FE1BA23","rev":2947},{"__ref__":true,"id":"Label_47B8D088_10BC_4EEC_AFF2_7AF3B2105C95","rev":3732}]},"metadata":{"value":{"__ref__":true,"id":"EB9F23E2-5C4D-49B3-A906-5C316693F393","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_23E32E30_EAC8_41ED_9393_AF9DA5B5ADA7":{"rev":3757,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(127,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"C413F5BE-4A80-4529-A800-5E0FAD463680","rev":0}},"textAndAttributes":{"value":["source transform",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,129,20]},"C413F5BE-4A80-4529-A800-5E0FAD463680":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"DFD9AA87-6B64-4C74-82C9-BAC311EFCA03","rev":0}}}},"DFD9AA87-6B64-4C74-82C9-BAC311EFCA03":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_1DB3FE34_E36F_4759_8557_3DEB4FE1BA23":{"rev":2947,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(60.93017578124979,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_4CFE5930_1E05_4FC0_A874_27E782921147","rev":3730},{"__ref__":true,"id":"Label_3A54412B_85CD_4283_B971_D730E661BC06","rev":3731}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"664030E3-CE74-407E-B014-F4DE54DACEE8","rev":0}},"metadata":{"value":{"__ref__":true,"id":"9A01E5F0-33E6-4BD1-B811-B1C5DE49C4B0","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_4CFE5930_1E05_4FC0_A874_27E782921147":{"rev":3730,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.13964843750044,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"5FD241C7-2B87-4382-A504-129660155147","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"72ECF192-ABFF-4D1E-B6E3-2DD5C26C6A67","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"5FD241C7-2B87-4382-A504-129660155147":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"53E9B69B-9678-4799-A96D-D1DB0CB59237","rev":0}}}},"53E9B69B-9678-4799-A96D-D1DB0CB59237":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"72ECF192-ABFF-4D1E-B6E3-2DD5C26C6A67":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_3A54412B_85CD_4283_B971_D730E661BC06":{"rev":3731,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"0C0BCD89-CD33-4019-9FA9-57EBC77E8961","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"6B317A6A-BD6C-454B-BB13-4B3AD9EDAEFB","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"0C0BCD89-CD33-4019-9FA9-57EBC77E8961":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"07A119F2-2772-4D65-A0AE-636DF7D6C5A7","rev":0}}}},"07A119F2-2772-4D65-A0AE-636DF7D6C5A7":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"6B317A6A-BD6C-454B-BB13-4B3AD9EDAEFB":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"664030E3-CE74-407E-B014-F4DE54DACEE8":{"rev":0,"props":{"_rev":{"value":0}}},"9A01E5F0-33E6-4BD1-B811-B1C5DE49C4B0":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_47B8D088_10BC_4EEC_AFF2_7AF3B2105C95":{"rev":3732,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(54.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"065AB493-6BC9-4555-98D6-F74EAFA2BA60","rev":0}},"textAndAttributes":{"value":["\uf079",{"__ref__":true,"id":"420BE6C3-6402-498E-BC85-B2CA30D1D422","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,38,30]},"065AB493-6BC9-4555-98D6-F74EAFA2BA60":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"C5268B9F-A1DF-4208-8E7A-0959FE1757F7","rev":0}}}},"C5268B9F-A1DF-4208-8E7A-0959FE1757F7":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"420BE6C3-6402-498E-BC85-B2CA30D1D422":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"retweet"}}},"EB9F23E2-5C4D-49B3-A906-5C316693F393":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_EF288497_87BB_43A3_90B6_A74996168E18":{"rev":3064,"props":{"name":{"value":"stage classes"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(343.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(75,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_3C8842DE_7ACA_401A_B8BA_98E5D68C9761","rev":3758},{"__ref__":true,"id":"Ellipse_2E5E688F_0B17_4D6F_8AAB_0C1FAD025100","rev":3045},{"__ref__":true,"id":"Label_CECCAD49_BE14_4C03_B4D6_78389096481B","rev":3735}]},"metadata":{"value":{"__ref__":true,"id":"EDD0F114-EB44-458E-A55B-AD62D5BF9241","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_3C8842DE_7ACA_401A_B8BA_98E5D68C9761":{"rev":3758,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(55,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"479ECA42-2FCD-464A-894C-82997D2CFAA6","rev":0}},"textAndAttributes":{"value":["classes",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,56,20]},"479ECA42-2FCD-464A-894C-82997D2CFAA6":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"56A40714-783D-41C0-9C0B-6E97D57B613D","rev":0}}}},"56A40714-783D-41C0-9C0B-6E97D57B613D":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_2E5E688F_0B17_4D6F_8AAB_0C1FAD025100":{"rev":3045,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.93017578124978,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_616C27C9_D810_4B8F_B47E_FEB1FDB83C80","rev":3733},{"__ref__":true,"id":"Label_9D67BD07_5E81_449D_9AE0_9D2CFE65E6B9","rev":3734}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"E1FB2101-B637-4FC3-B1DC-3315C7092940","rev":0}},"metadata":{"value":{"__ref__":true,"id":"D7F997B6-65C1-4020-A7B6-8655D9883193","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_616C27C9_D810_4B8F_B47E_FEB1FDB83C80":{"rev":3733,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500448,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"A43FB78D-5FBC-458C-9B63-DEF4A2A23759","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"003779B4-92EC-4363-898E-51EF32DD9985","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"A43FB78D-5FBC-458C-9B63-DEF4A2A23759":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"5C87922C-8581-4E40-88A8-B6179D661306","rev":0}}}},"5C87922C-8581-4E40-88A8-B6179D661306":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"003779B4-92EC-4363-898E-51EF32DD9985":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_9D67BD07_5E81_449D_9AE0_9D2CFE65E6B9":{"rev":3734,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"B71825E1-876D-4A63-80AB-7B5E668E3B81","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"F6ABC86D-CF83-4DFE-B81F-EAF636FC6117","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"B71825E1-876D-4A63-80AB-7B5E668E3B81":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"744B551D-4689-420A-85D5-BAED2A8071AF","rev":0}}}},"744B551D-4689-420A-85D5-BAED2A8071AF":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"F6ABC86D-CF83-4DFE-B81F-EAF636FC6117":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"E1FB2101-B637-4FC3-B1DC-3315C7092940":{"rev":0,"props":{"_rev":{"value":0}}},"D7F997B6-65C1-4020-A7B6-8655D9883193":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_CECCAD49_BE14_4C03_B4D6_78389096481B":{"rev":3735,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(18.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"35759F6A-AB2B-446F-A4BC-6ACAE2BFCC7F","rev":0}},"textAndAttributes":{"value":["\uf0e8",{"__ref__":true,"id":"507D198D-3D4D-4FFA-9A2D-E9D1A7680708","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,38,30]},"35759F6A-AB2B-446F-A4BC-6ACAE2BFCC7F":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"79FA031C-C6F0-4FA0-A9FA-1BCAD10F2545","rev":0}}}},"79FA031C-C6F0-4FA0-A9FA-1BCAD10F2545":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"507D198D-3D4D-4FFA-9A2D-E9D1A7680708":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"sitemap"}}},"EDD0F114-EB44-458E-A55B-AD62D5BF9241":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_FE3EFCBA_E082_4CB1_B29E_C435D8EDA1FB":{"rev":3162,"props":{"name":{"value":"stage vm"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(441.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(58,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_D2129439_664B_4FBA_865C_6C525AA07BB9","rev":3759},{"__ref__":true,"id":"Ellipse_F0DB27F9_59E7_47E2_9610_7F2BB05E02D4","rev":3143},{"__ref__":true,"id":"Label_B7D4A3B8_DE42_4C85_A54E_FFF9C3D539A7","rev":3738}]},"metadata":{"value":{"__ref__":true,"id":"5F666AF5-B230-45AC-B207-27A5D9F16DF1","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_D2129439_664B_4FBA_865C_6C525AA07BB9":{"rev":3759,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(17,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"2714FDEB-08CA-4106-A166-8B8F4356D4A2","rev":0}},"textAndAttributes":{"value":["VM",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,24,20]},"2714FDEB-08CA-4106-A166-8B8F4356D4A2":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"17E45642-989D-414D-8C18-9A5BCACDCFE0","rev":0}}}},"17E45642-989D-414D-8C18-9A5BCACDCFE0":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_F0DB27F9_59E7_47E2_9610_7F2BB05E02D4":{"rev":3143,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(16.430175781249776,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_F4F4E3EE_D538_4F46_ADCE_0EB8CA7EEFAD","rev":3736},{"__ref__":true,"id":"Label_8B17B58B_77DD_4F58_96A4_8839A7EE9AF7","rev":3737}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"727AC3FD-9B14-4437-9F69-64CCC4475918","rev":0}},"metadata":{"value":{"__ref__":true,"id":"BD9D389C-E9A7-4977-9CE7-878710F3D348","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_F4F4E3EE_D538_4F46_ADCE_0EB8CA7EEFAD":{"rev":3736,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500451,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"D3D9D9F0-BCED-4255-B65A-76F897883F85","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"90836532-C65C-4E6B-8425-F854342B9756","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"D3D9D9F0-BCED-4255-B65A-76F897883F85":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"72728133-CD6E-472E-8D34-67A0DC6850F1","rev":0}}}},"72728133-CD6E-472E-8D34-67A0DC6850F1":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"90836532-C65C-4E6B-8425-F854342B9756":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_8B17B58B_77DD_4F58_96A4_8839A7EE9AF7":{"rev":3737,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"1074CFAA-AC5C-4AE4-BD45-75CEBD8629C4","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"6D7688EA-589F-4245-8F2C-B4A04C461A86","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"1074CFAA-AC5C-4AE4-BD45-75CEBD8629C4":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"EF3AA5DB-380F-4ED7-8A96-0B0E520374A0","rev":0}}}},"EF3AA5DB-380F-4ED7-8A96-0B0E520374A0":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"6D7688EA-589F-4245-8F2C-B4A04C461A86":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"727AC3FD-9B14-4437-9F69-64CCC4475918":{"rev":0,"props":{"_rev":{"value":0}}},"BD9D389C-E9A7-4977-9CE7-878710F3D348":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_B7D4A3B8_DE42_4C85_A54E_FFF9C3D539A7":{"rev":3738,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"7DEF63B0-3DF0-4350-BA99-CF918DAE5CE9","rev":0}},"textAndAttributes":{"value":["\uf085",{"__ref__":true,"id":"7BAAD52B-F34B-4C6F-8092-3BB17A0473E6","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,38,30]},"7DEF63B0-3DF0-4350-BA99-CF918DAE5CE9":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"F0FB69BA-F542-4CAE-9117-81ED41511088","rev":0}}}},"F0FB69BA-F542-4CAE-9117-81ED41511088":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"7BAAD52B-F34B-4C6F-8092-3BB17A0473E6":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cogs"}}},"5F666AF5-B230-45AC-B207-27A5D9F16DF1":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_C58DB343_37F9_4CF5_ACB6_225A2F1BFFB7":{"rev":3260,"props":{"name":{"value":"stage modules"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(522.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(84,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_CAE361F5_E282_49A3_AC23_B430CBE676B9","rev":3760},{"__ref__":true,"id":"Ellipse_18CC5641_C0DA_4FAB_BE4D_55DA3FE94A61","rev":3241},{"__ref__":true,"id":"Label_DC0C9D40_27FC_4C06_B909_B60AC6FD3C71","rev":3741}]},"metadata":{"value":{"__ref__":true,"id":"03C50773-352B-4B45-9AC3-88FC95E19D43","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_CAE361F5_E282_49A3_AC23_B430CBE676B9":{"rev":3760,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(64,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"2A4E3D8B-7629-45E0-B6DD-0C26F64A9354","rev":0}},"textAndAttributes":{"value":["modules",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,65,20]},"2A4E3D8B-7629-45E0-B6DD-0C26F64A9354":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"CE4D2119-842C-4FCE-92D5-8DB377414A41","rev":0}}}},"CE4D2119-842C-4FCE-92D5-8DB377414A41":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_18CC5641_C0DA_4FAB_BE4D_55DA3FE94A61":{"rev":3241,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(29.43017578124978,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_BAC9C839_A2E6_4676_9D22_21154614E70A","rev":3739},{"__ref__":true,"id":"Label_F86C4BCC_FB27_461A_90AE_EB558BA20BB1","rev":3740}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"DA312A2F-60B9-4873-BA61-1241AB5F4437","rev":0}},"metadata":{"value":{"__ref__":true,"id":"226505AE-5EA0-471E-8042-D29E06CC174F","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_BAC9C839_A2E6_4676_9D22_21154614E70A":{"rev":3739,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500448,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"0C66F598-0867-42D2-8ED3-DF73A0DF07F1","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"3674F61E-A042-4B3C-810A-5365B490456A","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"0C66F598-0867-42D2-8ED3-DF73A0DF07F1":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"59C78A60-68CD-47E9-85AC-5EBEB7AC711E","rev":0}}}},"59C78A60-68CD-47E9-85AC-5EBEB7AC711E":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"3674F61E-A042-4B3C-810A-5365B490456A":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_F86C4BCC_FB27_461A_90AE_EB558BA20BB1":{"rev":3740,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"025FEDB8-78CE-4DE6-AA16-D9AC2D6F1FAA","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"9973DBE7-8386-4EAA-B8C6-724467191306","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"025FEDB8-78CE-4DE6-AA16-D9AC2D6F1FAA":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"F023CC76-894F-4F94-BB74-208A0999C437","rev":0}}}},"F023CC76-894F-4F94-BB74-208A0999C437":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"9973DBE7-8386-4EAA-B8C6-724467191306":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"DA312A2F-60B9-4873-BA61-1241AB5F4437":{"rev":0,"props":{"_rev":{"value":0}}},"226505AE-5EA0-471E-8042-D29E06CC174F":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_DC0C9D40_27FC_4C06_B909_B60AC6FD3C71":{"rev":3741,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"97D570C9-5632-4E44-8726-2E2D73D360BE","rev":0}},"textAndAttributes":{"value":["\uf49e",{"__ref__":true,"id":"2E5C7E88-7485-4FF8-8931-EDCE0351C0CD","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,38,30]},"97D570C9-5632-4E44-8726-2E2D73D360BE":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"824F8DFC-DB5C-465B-89E6-BE88AEDFDFEF","rev":0}}}},"824F8DFC-DB5C-465B-89E6-BE88AEDFDFEF":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"2E5C7E88-7485-4FF8-8931-EDCE0351C0CD":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cogs"}}},"03C50773-352B-4B45-9AC3-88FC95E19D43":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_0A3DCBB2_0FC4_413B_ABBE_6D9A105DD5BA":{"rev":3358,"props":{"name":{"value":"stage user"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(629.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(53,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_9F3CC946_5949_4DB3_99D6_2C8838533F87","rev":3761},{"__ref__":true,"id":"Ellipse_B9B4D490_D186_4ACA_BD7B_9E3F77E927B2","rev":3339},{"__ref__":true,"id":"Label_ABC0FA05_0D63_4D7A_B2C8_29E0CA0371CF","rev":3744}]},"metadata":{"value":{"__ref__":true,"id":"994C5C28-AB69-480F-AFAA-1D58CDD55E4E","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_9F3CC946_5949_4DB3_99D6_2C8838533F87":{"rev":3761,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(33,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"0D673F35-0381-4598-9CD1-892FFE7D09FC","rev":0}},"textAndAttributes":{"value":["user",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,34,20]},"0D673F35-0381-4598-9CD1-892FFE7D09FC":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"C7673DA9-6AFE-422F-9B65-1AAE65BE65DB","rev":0}}}},"C7673DA9-6AFE-422F-9B65-1AAE65BE65DB":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_B9B4D490_D186_4ACA_BD7B_9E3F77E927B2":{"rev":3339,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13.930175781249776,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_CD55DED1_3C82_46C1_A37C_903C01835BAA","rev":3742},{"__ref__":true,"id":"Label_B8430870_2771_41A8_9438_5425A398320C","rev":3743}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"F7E285C5-0ADF-43D8-AC31-A237045FBD98","rev":0}},"metadata":{"value":{"__ref__":true,"id":"15A15929-9E5E-4989-AC18-F48DCA801E4E","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_CD55DED1_3C82_46C1_A37C_903C01835BAA":{"rev":3742,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500451,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"DC048D5D-5B1D-4186-90C9-B0939B463CA4","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"22478326-1E99-45C8-A1F5-2558626C5CAE","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"DC048D5D-5B1D-4186-90C9-B0939B463CA4":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"5318380B-4C62-4189-9827-23957A50EEAA","rev":0}}}},"5318380B-4C62-4189-9827-23957A50EEAA":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"22478326-1E99-45C8-A1F5-2558626C5CAE":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_B8430870_2771_41A8_9438_5425A398320C":{"rev":3743,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"B21EAC99-239B-434A-B23D-583D1831FC58","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"D23E937E-C3B7-4A55-AB2F-2DFF692DF9F2","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"B21EAC99-239B-434A-B23D-583D1831FC58":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"375C9811-133F-4C76-A2D7-AA560CC43CCF","rev":0}}}},"375C9811-133F-4C76-A2D7-AA560CC43CCF":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"D23E937E-C3B7-4A55-AB2F-2DFF692DF9F2":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"F7E285C5-0ADF-43D8-AC31-A237045FBD98":{"rev":0,"props":{"_rev":{"value":0}}},"15A15929-9E5E-4989-AC18-F48DCA801E4E":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_ABC0FA05_0D63_4D7A_B2C8_29E0CA0371CF":{"rev":3744,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(11.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(30,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"57FAA942-40E9-4B31-A8B8-6A346C636BF2","rev":0}},"textAndAttributes":{"value":["\uf2bd",{"__ref__":true,"id":"282E112F-25BE-41E2-B725-99A95D9F06CA","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,30,30]},"57FAA942-40E9-4B31-A8B8-6A346C636BF2":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"1764391E-6479-406B-A31C-0891D9DFFA33","rev":0}}}},"1764391E-6479-406B-A31C-0891D9DFFA33":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"282E112F-25BE-41E2-B725-99A95D9F06CA":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"user-circle"}}},"994C5C28-AB69-480F-AFAA-1D58CDD55E4E":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_1ADFF3D2_D7B3_4ADA_964E_E77380B7150D":{"rev":3456,"props":{"name":{"value":"stage storage"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(705.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(76,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_3EEB5F27_6850_41CA_9DF5_F3F405E7945B","rev":3762},{"__ref__":true,"id":"Ellipse_3A296654_314B_4434_A34E_2F736D6A7B45","rev":3437},{"__ref__":true,"id":"Label_6349020B_8359_4C6D_984E_3F79D7F0DB85","rev":3747}]},"metadata":{"value":{"__ref__":true,"id":"56E3AD61-9DD7-4B70-AC34-547FCCF7CB11","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_3EEB5F27_6850_41CA_9DF5_F3F405E7945B":{"rev":3762,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(56,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"B906192C-6B76-4712-8300-73DBAFE1F240","rev":0}},"textAndAttributes":{"value":["storage",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,57,20]},"B906192C-6B76-4712-8300-73DBAFE1F240":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"0ED5CA84-DAF7-4C54-937D-CE366FDBF087","rev":0}}}},"0ED5CA84-DAF7-4C54-937D-CE366FDBF087":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_3A296654_314B_4434_A34E_2F736D6A7B45":{"rev":3437,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(25.43017578124978,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_18CED631_0160_4B54_A042_91AC0F53DC9B","rev":3745},{"__ref__":true,"id":"Label_5EAF6A85_1D62_49C6_BB22_5DF3EC40CD70","rev":3746}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"A0589B13-33B5-4931-AC48-E2B886123A83","rev":0}},"metadata":{"value":{"__ref__":true,"id":"4B60BD2F-D980-46BB-9827-368C8A999C60","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_18CED631_0160_4B54_A042_91AC0F53DC9B":{"rev":3745,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500448,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"F9D3BC5E-D21D-43C4-A914-013312A5080A","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"39A207D8-1234-4597-A3C5-C64408011622","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"F9D3BC5E-D21D-43C4-A914-013312A5080A":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"00E71A06-69E8-4730-A072-01095323098F","rev":0}}}},"00E71A06-69E8-4730-A072-01095323098F":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"39A207D8-1234-4597-A3C5-C64408011622":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_5EAF6A85_1D62_49C6_BB22_5DF3EC40CD70":{"rev":3746,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"5B0F6BF7-69D1-45B6-A69A-BF787D31BD71","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"27109CEB-738F-4592-8B92-312A0F4DF1F3","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"5B0F6BF7-69D1-45B6-A69A-BF787D31BD71":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"C692E742-4D34-43A0-88FE-F83E6EF5C9A0","rev":0}}}},"C692E742-4D34-43A0-88FE-F83E6EF5C9A0":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"27109CEB-738F-4592-8B92-312A0F4DF1F3":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"A0589B13-33B5-4931-AC48-E2B886123A83":{"rev":0,"props":{"_rev":{"value":0}}},"4B60BD2F-D980-46BB-9827-368C8A999C60":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_6349020B_8359_4C6D_984E_3F79D7F0DB85":{"rev":3747,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(27,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"78A6CEF8-09F6-4739-87C1-E4046DBDAC6B","rev":0}},"textAndAttributes":{"value":["\uf1c0",{"__ref__":true,"id":"D81BC061-21AA-43B5-A197-839B49CBE77A","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,27,30]},"78A6CEF8-09F6-4739-87C1-E4046DBDAC6B":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"7711E842-E55F-4F4D-AF80-EDB9AB12295A","rev":0}}}},"7711E842-E55F-4F4D-AF80-EDB9AB12295A":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"D81BC061-21AA-43B5-A197-839B49CBE77A":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"database"}}},"56E3AD61-9DD7-4B70-AC34-547FCCF7CB11":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_F263F1A3_0349_41A3_9BA1_7A9783FD7801":{"rev":3554,"props":{"name":{"value":"stage morphic"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(804.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(82,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_665941E2_811B_4CFA_912A_79268A27047E","rev":3763},{"__ref__":true,"id":"Ellipse_3F7D5F84_597B_4BE3_8BFE_7624D6260F34","rev":3535},{"__ref__":true,"id":"Label_D6A8FE95_494A_4081_8129_7214C2730EAB","rev":3750}]},"metadata":{"value":{"__ref__":true,"id":"03195AE5-197D-41EE-A7B7-6CEA6ED1E5F7","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_665941E2_811B_4CFA_912A_79268A27047E":{"rev":3763,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(62,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"969DCE15-8FA9-4A90-82F4-430F4B2F4A65","rev":0}},"textAndAttributes":{"value":["morphic",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,62,20]},"969DCE15-8FA9-4A90-82F4-430F4B2F4A65":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"A7E8C4BB-289D-4381-B4C4-4113EECD0E6F","rev":0}}}},"A7E8C4BB-289D-4381-B4C4-4113EECD0E6F":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_3F7D5F84_597B_4BE3_8BFE_7624D6260F34":{"rev":3535,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(28.43017578124978,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_0AEFEF5A_A816_4915_8A9A_FD4449F49E0A","rev":3748},{"__ref__":true,"id":"Label_EF0AD342_37BF_44F1_A002_DB73F65CF2E4","rev":3749}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"2948055F-CC7F-409E-82C7-A507AE15E7CC","rev":0}},"metadata":{"value":{"__ref__":true,"id":"7CBE66FE-0170-44B2-B35C-AE03A67A47F5","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_0AEFEF5A_A816_4915_8A9A_FD4449F49E0A":{"rev":3748,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500448,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"9856EAD8-66E2-4CB4-BFBC-88E16F2466F9","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"ED476C56-CD8C-48E3-BB27-CF0A1E86FAD8","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"9856EAD8-66E2-4CB4-BFBC-88E16F2466F9":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"9B376309-2791-4AD3-AB2C-CC61215BA6A3","rev":0}}}},"9B376309-2791-4AD3-AB2C-CC61215BA6A3":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"ED476C56-CD8C-48E3-BB27-CF0A1E86FAD8":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_EF0AD342_37BF_44F1_A002_DB73F65CF2E4":{"rev":3749,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"3E5E8BCC-CA41-4D4A-863F-BA19F45DDF9F","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"FBEE5FB6-4023-42F7-B3EE-E14491C1FDE0","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"3E5E8BCC-CA41-4D4A-863F-BA19F45DDF9F":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"1643436E-203E-40C2-869E-C5551E49099B","rev":0}}}},"1643436E-203E-40C2-869E-C5551E49099B":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"FBEE5FB6-4023-42F7-B3EE-E14491C1FDE0":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"2948055F-CC7F-409E-82C7-A507AE15E7CC":{"rev":0,"props":{"_rev":{"value":0}}},"7CBE66FE-0170-44B2-B35C-AE03A67A47F5":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_D6A8FE95_494A_4081_8129_7214C2730EAB":{"rev":3750,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(25.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(31,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"7C7385CF-91B7-485B-8C13-5A879F4B9709","rev":0}},"textAndAttributes":{"value":["\uf1b2",{"__ref__":true,"id":"9EF546E9-2A84-415C-92CC-8CD86BEFB61C","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,31,30]},"7C7385CF-91B7-485B-8C13-5A879F4B9709":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"BD2EC25A-AF05-441D-98D3-DC6F6064146E","rev":0}}}},"BD2EC25A-AF05-441D-98D3-DC6F6064146E":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"9EF546E9-2A84-415C-92CC-8CD86BEFB61C":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cube"}}},"03195AE5-197D-41EE-A7B7-6CEA6ED1E5F7":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_8D3C89CA_C09A_41E6_A64C_A724A15F04EF":{"rev":3630,"props":{"name":{"value":"stage world"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(909.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(61,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_5D6C1D9D_1CDA_42E4_B54D_BEC613A7D224","rev":3764},{"__ref__":true,"id":"Ellipse_79E3F70A_E4B1_44BC_9706_E60F8A63F609","rev":3613},{"__ref__":true,"id":"Label_96E4784E_F1BC_41DB_AFA6_189F62307B1B","rev":3753}]},"metadata":{"value":{"__ref__":true,"id":"60192049-017B-4BD8-9C27-57A1D12A8AC1","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_5D6C1D9D_1CDA_42E4_B54D_BEC613A7D224":{"rev":3764,"props":{"name":{"value":"label"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(41,20)"},"metadata":{"value":{"__ref__":true,"id":"16D2EED3-2079-4942-8BC2-DF8E13C66AB5","rev":0}},"textAndAttributes":{"value":["world",null]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,44,20]},"16D2EED3-2079-4942-8BC2-DF8E13C66AB5":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"291DA2C6-E46C-459C-981F-76A7CAA8D046","rev":0}}}},"291DA2C6-E46C-459C-981F-76A7CAA8D046":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_79E3F70A_E4B1_44BC_9706_E60F8A63F609":{"rev":3613,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(17.930175781249996,80.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_C69850B9_6D58_4742_8310_DEF07D204FB8","rev":3751},{"__ref__":true,"id":"Label_A60EBAB4_933B_45F5_B802_E08576B36E65","rev":3752}]},"installedFonts":{"value":{"__ref__":true,"id":"E259EE49-67FD-42C9-B2BE-A426BFDAB14F","rev":0}},"metadata":{"value":{"__ref__":true,"id":"587F09AA-4E7C-468E-A301-F62810E71308","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_C69850B9_6D58_4742_8310_DEF07D204FB8":{"rev":3751,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500004,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"metadata":{"value":{"__ref__":true,"id":"1A5CDD68-97CB-4433-9FD7-9FDF9E54F066","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"48CAECD6-AC9F-494E-8E3F-1E258C7C11A4","rev":0}]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"1A5CDD68-97CB-4433-9FD7-9FDF9E54F066":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"7D56FBEA-DF3C-4FE2-B912-2CED240E3BF6","rev":0}}}},"7D56FBEA-DF3C-4FE2-B912-2CED240E3BF6":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"48CAECD6-AC9F-494E-8E3F-1E258C7C11A4":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_A60EBAB4_933B_45F5_B802_E08576B36E65":{"rev":3752,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"visible":{"value":false},"metadata":{"value":{"__ref__":true,"id":"6E7A8C7E-FCB1-45AC-91CD-F5C5B34E1910","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"3989CF77-C3D1-497F-98DA-32188E75CC2A","rev":0}]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"6E7A8C7E-FCB1-45AC-91CD-F5C5B34E1910":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"C9724B45-59B5-4B98-BEDA-DFB62FC785FD","rev":0}}}},"C9724B45-59B5-4B98-BEDA-DFB62FC785FD":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"3989CF77-C3D1-497F-98DA-32188E75CC2A":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"E259EE49-67FD-42C9-B2BE-A426BFDAB14F":{"rev":0,"props":{"_rev":{"value":0}}},"587F09AA-4E7C-468E-A301-F62810E71308":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_96E4784E_F1BC_41DB_AFA6_189F62307B1B":{"rev":3753,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(15.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(30,30)"},"opacity":{"value":0.2},"metadata":{"value":{"__ref__":true,"id":"5E85BA90-24EE-430C-9E9B-4E2FC6E10A01","rev":0}},"textAndAttributes":{"value":["\uf7a2",{"__ref__":true,"id":"50471EFA-CD8E-408D-BC8E-035F6B9207AF","rev":0}]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,30,30]},"5E85BA90-24EE-430C-9E9B-4E2FC6E10A01":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"63037131-31EF-422D-BBFE-4764FDE56650","rev":0}}}},"63037131-31EF-422D-BBFE-4764FDE56650":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"50471EFA-CD8E-408D-BC8E-035F6B9207AF":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cube"}}},"60192049-017B-4BD8-9C27-57A1D12A8AC1":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"1C30661E-358D-45EC-8490-57A10BFC8992":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"package loading progress indicator\\", _id: \\"f64ec4ab4ac2da6a67007e4f1ef82de8a479a583\\"})"}}},"0419FF53-B36B-4337-8991-48A693D8781A":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"},"publishedAlias":{"value":"world-loading-screen"},"excludedPackages":{"value":["kld-intersections"]},"publishedLocation":{"value":"/lively.freezer/loading-screen/"}}}},"requiredVersion":">=0.1","packagesToRegister":[],"packageDepMap":{"local://lively-object-modules/PartialFreezing":["local://lively-object-modules/WorldVersionViewer"],"local://lively-object-modules/WorldVersionViewer":[],"local://lively-object-modules/ModuleProgress":[]}}');
lively.resources={resource:T,loadViaScript:Qb};lively.morphic={loadMorphFromSnapshot:Us};ya("bS",void 0)}}});