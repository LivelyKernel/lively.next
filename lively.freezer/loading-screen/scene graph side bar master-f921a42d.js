System.register("./__root_module__-f9290433.js kld-intersections ./editor-plugin-70198a84.js ./index-9e4ab300.js ./index-5ea42d9a.js ./index-67954004.js ./index-022558fb.js ./color-picker-e9433ddc.js ./editor-plugin-61509a8b.js ./index-461cc786.js".split(" "),function(){var sa,db,Eb,Vb,Wb,wd,Ic,Ad,Jc,Mc,bd,ed,Od,qd,Xc,Ra,wb,mc,dc,Rc,Tc,zc,Fc,Jb,Ac,Bc,fd,Qb,xb,eb,vb,Va,lb,yb,Zb,Sb,$a,bb,Kb,wc;return{setters:[function(fc){sa=fc.aq;db=fc.ag;Eb=fc.ay;Vb=fc.at;Wb=fc.a1;wd=fc.ar;Ic=fc.ao;Ad=fc.as;
Jc=fc.C;Mc=fc.a0;bd=fc.a4;ed=fc._;Od=fc.aT;qd=fc.P;Xc=fc.a5;Ra=fc.az;wb=fc.ai;mc=fc.aS;dc=fc.am;Rc=fc.aj;Tc=fc.al;zc=fc.bn;Fc=fc.bp;Jb=fc.bR;Ac=fc.a$;Bc=fc.bf;fd=fc.aL;Qb=fc.n;xb=fc.$;eb=fc.aU;vb=fc.aV;Va=fc.an;lb=fc.a2;yb=fc.ap;Zb=fc.bS},function(){},function(fc){Sb=fc.I},function(fc){$a=fc.d;bb=fc.s;Kb=fc.I;wc=fc.M},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){function fc(za){var Ca=za.sourceObj,ma=za.targetObj;Ca.isMorph&&ma.isMorph?(Ca.show(),
ma.show(),Qc.showConnector&&Qc.showConnector(Ca,ma)):Qc.show(String(za))}function bc(za){var Ca=za.sourceObj,ma=za.sourceAttrName,la=za.targetObj,va=za.targetMethodName,cb=za.getConverter();za=za.getUpdater();return Qc.printConnectionElements(Ca,ma,la,va,cb,za)}function Tb(za,Ca,ma,la,va,cb){za="/* global connect, source, target */\nconnect(source, '"+Ca+"', target, '"+la+"'";if(va||cb)za+=", {\n";va&&(za+="  converter: "+va);va&&cb&&(za+=",");va&&(za+="\n");cb&&(za+="  updater: "+cb+"\n");if(va||
cb)za+="}";return za+");"}function I(za,Ca){var ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(la){if(1==la.nextAddress)return la.yield(Qc.InteractiveMorphSelector.selectMorph(),2);ma=la.yieldResult;return la.return(ma?Qc.interactiveConnectGivenSourceAndTarget(za,Ca,ma):null)})}function T(za,Ca,ma,la){var va,cb,fb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ec){va=ma&&ma.world().targetDataBindings(ma);cb=za.world();if(!va||!va.length)return cb.setStatusMessage("connect canceled"),
ec.return();fb=va.map(function(Nc){return[Nc[0].group||"uncategorized",Nc.map(function(pd){return[pd.signature||pd.name,function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Yd){return 1==Yd.nextAddress?Yd.yield(Qc.interactivelyEvaluateConnection({sourceObj:za,sourceAttr:Ca,targetObj:ma,targetAttr:pd.name,onConnect:la}),2):Yd.return(Yd.yieldResult)})}]})]});fb.push(["custom...",function(){var Nc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pd){return 1==pd.nextAddress?
pd.yield(cb.prompt("Enter custom connection point",{requester:$world,historyId:"lively.morphic-custom-connection-points",useLastInput:!0}),2):(Nc=pd.yieldResult)?pd.yield(Qc.interactivelyEvaluateConnection({sourceObj:za,sourceAttr:Ca,targetObj:ma,targetAttr:Nc,onConnect:la}),0):pd.jumpTo(0)})}]);return ec.yield(ma.openMenu(fb).whenFinished(),0)})}function qa(za,Ca,ma,la){Ca=void 0===Ca?"confirm connection":Ca;var va,cb,fb,ec,Nc,pd,Yd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(uc){va=
za;cb=va.sourceObj;fb=va.sourceAttrName;ec=va.targetObj;Nc=va.targetMethodName;pd=za.getConverter();Yd=za.getUpdater();return uc.return(Qc.interactivelyEvaluateConnection({sourceObj:cb,sourceAttr:fb,targetObj:ec,targetAttr:Nc,converter:pd,updater:Yd,prompt:Ca,highlight:ma,onConnect:la}))})}function Ga(za,Ca,ma,la,va){la=void 0===la?{}:la;va=Qc.rect(0).sides.concat(Qc.rect(0).corners);ma=ma||new Qc.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Qc.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Qc.Color.transparent,
nativeCursor:"auto"},end:{fill:Qc.Color.orange}}},la,{hasFixedPosition:!0}));ma.startPoint.attachTo(za,"rightCenter");Ca.isMorph?(la=Ca.globalBounds().partNameNearest(va,za.globalPosition),za.globalPosition.equals(Ca.globalBounds().partNamed(la))&&Ca.globalBounds().partNameNearest(Qc.arr.without(va,la),za.globalPosition),ma.endPoint.attachTo(Ca,"leftCenter")):(va=za.globalBounds().topRight().addPt(Qc.pt(100,0)),Ca=Qc.morph({type:"label",value:Ca.toString(),styleClasses:["Tooltip"],padding:Qc.rect(8,
4)}).openInWorld(va),Ca.position=za.world().bounds().translateForInclusion(Ca.bounds()).topLeft(),Qc.once(ma,"remove",Ca,"remove"),ma.endPoint.attachTo(Ca,"leftCenter"));return ma}function Mb(za){var Ca,ma,la,va,cb,fb,ec,Nc,pd,Yd,uc,Qd,cd,zb,da,ra,sb,H,fa,Fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qb){switch(qb.nextAddress){case 1:Ca=za;ma=Ca.sourceObj;la=Ca.sourceAttr;va=Ca.targetObj;cb=Ca.targetAttr;fb=Ca.converter;ec=Ca.updater;Nc=Ca.prompt;pd=void 0===Ca.highlight?!0:Ca.highlight;
Yd=Ca.onConnect;uc="lively://lively.bindings-interactive-connect/x"+ma.id;Qd={context:window,format:"esm",targetModule:uc,classTransform:Qc.classToFunctionTransform};cd=Qc.printConnectionElements(ma,la,va,cb,fb,ec);va.isMorph&&ma.isMorph&&(zb=va.propertiesAndPropertySettings().properties[cb]||{type:typeof va[cb]},da=zb.type,ra=ma.propertiesAndPropertySettings().properties[la]||{type:typeof ma[la]},sb=ra.type,sb!==da&&(Nc=!0));H={};Object.assign(lively.modules.module(uc).recorder,(H.source=ma,H.target=
va,H.connect=Ic,H.once=Ad,H[la]=ma[la],H));if(!Nc){fa=cd;qb.jumpTo(2);break}return qb.yield($world.editPrompt(Nc,{input:cd,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:Qd,animated:!1}),3);case 3:if(fa=qb.yieldResult,!fa)return $world.setStatusMessage("connect canceled"),qb.return();case 2:return qb.yield(lively.vm.runEval(fa,Qd),4);case 4:Fa=qb.yieldResult;if(Fa.isError)return $world.logError(Fa.value),qb.return(Mb({sourceObj:ma,sourceAttr:la,targetObj:va,
targetAttr:cb,converter:fb,updater:ec,prompt:"confirm connection",highlight:pd,onConnect:Yd}));pd&&($world.setStatusMessage("connected!",Qc.Color.green),Qc.interactivelyShowConnection(Fa.value));"function"===typeof Yd&&Yd(Fa);qb.jumpToEnd()}})}var nb=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");nb.Inspector=Sb;var Ha=function(za){var Ca=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),ma=Ca.hasOwnProperty("ProtoInspector")&&"function"===typeof Ca.ProtoInspector?Ca.ProtoInspector:
Ca.ProtoInspector=function(la){la&&la[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sa(ma,za,void 0,[{key:"className",get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Ca,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoInspector",
version:"0.1.1-0"}}},{start:68,end:210})}(nb.Inspector);Ha=nb.ProtoInspector;nb.default=Ha;var kb=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");kb.Morph=db;kb.touchInputDevice=Eb;kb.easings=Vb;kb.pt=Wb;kb.fun=wd;kb.connect=Ic;nb=function(za){var Ca=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),ma=Ca.hasOwnProperty("MorphicSideBar")&&"function"===typeof Ca.MorphicSideBar?Ca.MorphicSideBar:Ca.MorphicSideBar=function(la){la&&la[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return sa(ma,za,[{key:"onWorldResize",value:function(la){la=void 0===la?!0:la;if(this.respondsToVisibleWindow){var va=$world.visibleBounds(),cb=navigator.standalone&&kb.touchInputDevice?25:0;this.height=va.height-cb;this.top=cb+va.top();cb=this.get("horizontal resizer");cb.height=this.height;cb.top=0;la&&(this.visible?this.topLeft=va.topLeft():this.topRight=va.topLeft())}}},{key:"switchMode",value:function(la){"inspector"==la&&this.showInspector();"connections"==la&&this.showConnections()}},
{key:"showInspector",value:function(){this.get("inspector").visible=!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(la){var va=this,cb,fb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ec){switch(ec.nextAddress){case 1:cb=$world.visibleBounds();fb=navigator.standalone&&kb.touchInputDevice?25:0;va.height=cb.height-fb;va.top=fb+cb.top();if(la)return $world.addMorph(va,
$world.get("lively top bar")),va.right=0,va.attachToWorld($world),va.visible=!0,ec.yield(va.whenRendered(),5);va.detachFromWorld($world);return ec.yield(va.animate({opacity:0,right:0,duration:300}),4);case 4:va.visible=!1;va.remove();ec.jumpTo(0);break;case 5:return va.onWorldResize(!1),va.get("scene graph").adjustProportions(),ec.yield(va.animate({opacity:1,easing:kb.easings.outCirc,left:1,duration:300}),6);case 6:va.get("scene graph").refresh(),ec.jumpToEnd()}})}},{key:"attachToWorld",value:function(la){kb.connect(la,
"onChange",this,"onHierarchyChange",{garbageCollect:!0});kb.connect(la,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});kb.connect(la,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(la){var va=this;la.attributeConnections.forEach(function(cb){cb.targetObj===va&&cb.disconnect()})}},{key:"selectNode",value:function(la){this.getSubmorphNamed("scene graph").selectMorphInTarget(la);this.getSubmorphNamed("connections tree").inspectConnectionsOf(la)}},
{key:"onHierarchyChange",value:function(la){var va=this,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fb){if("addMorphAt"===la.selector||"removeMorph"===la.selector||"name"===la.prop){cb=va._sceneGraph||(va._sceneGraph=va.getSubmorphNamed("scene graph"));if(!cb||!cb.owner.visible||la.target&&la.target.isHand||la.target&&cb.ignoreMorph(la.target)||la.args&&!la.args[0].isHalo&&cb.ignoreMorph(la.args[0])||la.target.ownerChain().find(function(ec){return cb.ignoreMorph(ec)}))return fb.return();
kb.fun.debounceNamed("scene-graph-update",50,function(){return cb.refresh()})()}fb.jumpToEnd()})}}],[{key:"className",get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],Ca,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-69"}}},{start:226,
end:3566})}(kb.Morph);nb=kb.MorphicSideBar;kb.default=nb;var Qc=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");Qc.interactivelyShowConnection=fc;Qc.printConnection=bc;Qc.printConnectionElements=Tb;Qc.interactiveConnectGivenSource=I;Qc.interactiveConnectGivenSourceAndTarget=T;Qc.interactivelyReEvaluateConnection=qa;Qc.visualizeConnection=Ga;Qc.interactivelyEvaluateConnection=Mb;Qc.connect=Ic;Qc.once=Ad;Qc.Color=Jc;Qc.rect=Mc;Qc.pt=Wb;Qc.arr=bd;Qc.promise=ed;Qc.properties=Od;Qc.Path=qd;Qc.obj=
Xc;Qc.HorizontalLayout=Ra;Qc.Morph=db;Qc.VerticalLayout=wb;Qc.StyleSheet=mc;Qc.Icon=dc;Qc.GridLayout=Rc;Qc.morph=Tc;Qc.TreeData=zc;Qc.Tree=Fc;Qc.Leash=Jb;Qc.LabeledCheckBox=Ac;Qc.SearchField=Bc;Qc.showConnector=$a;Qc.show=bb;Qc.InteractiveMorphSelector=Kb;Qc.MorphHighlighter=wc;Qc.Window=fd;Qc.classToFunctionTransform=Qb;Qc.interactivelyShowConnection=fc;Qc.interactivelyShowConnection=fc;Qc.printConnection=bc;Qc.printConnection=bc;Qc.printConnectionElements=Tb;Qc.printConnectionElements=Tb;Qc.interactiveConnectGivenSource=
I;Qc.interactiveConnectGivenSource=I;Qc.interactiveConnectGivenSourceAndTarget=T;Qc.interactiveConnectGivenSourceAndTarget=T;Qc.interactivelyReEvaluateConnection=qa;Qc.interactivelyReEvaluateConnection=qa;Qc.visualizeConnection=Ga;Qc.visualizeConnection=Ga;Qc.interactivelyEvaluateConnection=Mb;Qc.interactivelyEvaluateConnection=Mb;var qc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");qc.Tree=Fc;qc.TreeData=zc;qc.morph=Tc;qc.Icon=dc;qc.HorizontalLayout=Ra;qc.easings=Vb;qc.Morph=db;qc.Color=
Jc;qc.Rectangle=xb;qc.rect=Mc;qc.pt=Wb;qc.connect=Ic;qc.disconnect=eb;qc.disconnectAll=vb;qc.once=Ad;qc.arr=bd;qc.num=Va;qc.fun=wd;qc.tree=lb;qc.promise=ed;qc.ConnectionHalo=_missingExportShim;nb=function(za){var Ca=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),ma=Ca.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof Ca.InteractiveTreeContainer?Ca.InteractiveTreeContainer:Ca.InteractiveTreeContainer=function(la){la&&la[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return sa(ma,za,[{key:"onChildRemoved",value:function(la){}},{key:"onChildAdded",value:function(la){}},{key:"toggleSelected",value:function(la){if(this.tree){var va=this.tree,cb=va.selectionFontColor,fb=va.nonSelectionFontColor;this.submorphs.filter(function(ec){return!ec._isControlElement&&ec.styleClasses.includes("Label")}).forEach(function(ec){ec.fontColor=la?cb:fb})}}},{key:"onGrab",value:function(la){var va=this.tree,cb=this.node;this.fill=qc.Color.gray.withA(.5);this.fontColor=va.selectionFontColor;
this.opacity=.8;sa._get(Object.getPrototypeOf(ma.prototype),"onGrab",this).call(this,la);cb&&(this.toggleSelected(!1),va.collapse(cb),va.treeData.parentNode(cb).container.onChildRemoved(this),this._data=va.treeData.remove(cb),cb.container.target.remove(),va.update(!0))}},{key:"wantsToBeDroppedOn",value:function(la){this.showPreviewOn(la);return!0}},{key:"showPreviewOn",value:function(la){if(la.isContainer)var va=la.tree;la.isTree&&(va=la);va&&va.showDropPreviewFor&&va.showDropPreviewFor(this)}},{key:"insertAsChild",
value:function(la){var va=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==cb.nextAddress)return va.tree.treeData.add(la._data,va.node,va.node.children[0]),va.tree.uncollapse(va.node),va.tree.treeData.remove(va.tree._previewNode),cb.yield(va.tree.whenRendered(),2);va.tree.update(!0);va.onChildAdded(la);cb.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(la,va){var cb=this;debugger;this.tree._dropInProgress=!0;sa._get(Object.getPrototypeOf(ma.prototype),"onBeingDroppedOn",
this).call(this,la,va);la=function(){cb.fill=qc.Color.gray.withA(.5);cb.opacity=1;cb.tree._dropInProgress=!1;cb.tree.refresh()};va.isTree?va.insertAtPlaceholder(this).then(la):va.isContainer?va.insertAsChild(this).then(la):la()}}],[{key:"className",get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:qc.Color.transparent},isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var la=this,va=this.tree.treeData;return va&&
va.asList().find(function(cb){return cb.container===la})}}}}}],Ca,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:437,end:2917})}(qc.Morph);qc.InteractiveTreeContainer=nb;qc.InteractiveTreeContainer=nb;qc.InteractiveTreeContainer=nb;nb=function(za){var Ca=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),
ma=Ca.hasOwnProperty("InteractiveTreeData")&&"function"===typeof Ca.InteractiveTreeData?Ca.InteractiveTreeData:Ca.InteractiveTreeData=function(la){la&&la[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sa(ma,za,[{key:"display",value:function(la){return[la.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(la){return la.isCollapsed}},{key:"collapse",value:function(la,va){la.isCollapsed=va}},{key:"getChildren",value:function(la){var va=
this;return la.isLeaf?null:la.children.filter(function(cb){return cb&&(va.filterActive?cb.visible:!0)})}},{key:"isLeaf",value:function(la){var va=this;return!la.children||0==la.children.filter(function(cb){return cb&&(va.filterActive?cb.visible:!0)}).length}},{key:"add",value:function(la,va,cb){va=void 0===va?this.root:va;va.children||(va.children=[]);cb?qc.arr.pushAt(va.children,la,va.children.indexOf(cb)):va.children.push(la);va.isLeaf=!1}},{key:"replace",value:function(la,va){var cb=this.parentNode(la);
la=cb.children.indexOf(la);cb.children[la]=va}},{key:"next",value:function(la){var va=this.parentNode(la);return va&&va.children[va.children.indexOf(la)+1]}},{key:"isBefore",value:function(la,va){this.next(la)===va}},{key:"isAfter",value:function(la,va){this.next(va)===la}},{key:"addBefore",value:function(la,va){this.add(la,this.parentNode(va),va)}},{key:"addAfter",value:function(la,va){var cb=this.parentNode(va);va=cb.children.indexOf(va)+1;this.add(la,cb,cb.children[va])}},{key:"remove",value:function(la){var va=
this.parentNode(la);if(va)return qc.arr.remove(va.children,la),va.children==[]&&(va.children=null),la}},{key:"filter",value:function(la,va){va=void 0===va?1:va;var cb=this,fb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ec){if(1==ec.nextAddress)return ec.yield(cb.uncollapseAll(function(Nc,pd){return pd<va+1}),2);fb=cb.filterActive;cb.filterActive=!1;cb.asListWithIndexAndDepth(!1).reverse().forEach(function(Nc){var pd=Nc.node;if(0==Nc.depth)return pd.visible=!0;pd.visible=la(pd);pd.visible||
pd.isCollapsed||!pd.children.find(function(Yd){return Yd.visible})?pd.container.opacity=1:(pd.visible=!0,pd.container.opacity=.5);return pd.visible});cb.filterActive=fb;ec.jumpToEnd()})}}],[{key:"className",get:function(){return"InteractiveTreeData"}}],Ca,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},
{start:2926,end:5365})}(qc.TreeData);qc.InteractiveTreeData=nb;qc.InteractiveTreeData=nb;qc.InteractiveTreeData=nb;nb=function(za){var Ca=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),ma=Ca.hasOwnProperty("InteractiveTree")&&"function"===typeof Ca.InteractiveTree?Ca.InteractiveTree:Ca.InteractiveTree=function(la){la&&la[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sa(ma,za,[{key:"update",value:function(la){var va=
this;sa._get(Object.getPrototypeOf(ma.prototype),"update",this).call(this,la);this.treeData&&this.relayoutContainers();la&&this.embeddedMorphs.forEach(function(cb){cb.isContainer&&(cb.fill=qc.Color.transparent,cb.fontFamily=va.fontFamily,cb.fontSize=va.fontSize)})}},{key:"onDrop",value:function(la){sa._get(Object.getPrototypeOf(ma.prototype),"onDrop",this).call(this,la);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(la){}},{key:"onDropHoverUpdate",value:function(la){}},
{key:"onDropHoverOut",value:function(la){}},{key:"onHoverOut",value:function(la){var va=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){sa._get(Object.getPrototypeOf(ma.prototype),"onHoverOut",va).call(va,la);va._previewNode&&va._previewNode.container.world()&&va.treeData.remove(va._previewNode);va.resetContainerSelection();va.update(!0);cb.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(la){var va=this,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fb){if(1==
fb.nextAddress)return cb=va.treeData.parentNode(va._previewNode),va.treeData.replace(va._previewNode,la._data),va.treeData.remove(va._previewNode),fb.yield(va.whenRendered(),2);va.update(!0);cb.container.onChildAdded(la);fb.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var la=this;if(!this._scrollingUp){this._scrollingUp=!0;var va=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==cb.nextAddress)return la._scrollingUp&&0<la.scroll.y?cb.yield(la.animate({scroll:la.scroll.subXY(0,
30),duration:300,easing:qc.easings.linear}),3):(la._scrollingUp=!1,cb.jumpTo(0));va();cb.jumpToEnd()})};va()}}},{key:"scrollDownSlowly",value:function(){var la=this;if(!this._scrollingDown){this._scrollingDown=!0;var va=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==cb.nextAddress)return la._scrollingDown&&la.scroll.y<la.scrollExtent.y-la.height?cb.yield(la.animate({scroll:la.scroll.addXY(0,30),duration:300,easing:qc.easings.linear}),3):(la._scrollingDown=!1,cb.jumpTo(0));
va();cb.jumpToEnd()})};va()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(la){la.isContainer&&(la.fill=qc.Color.transparent)})}},{key:"showDropPreviewFor",value:function(la){var va=this;la=this.localize(la.globalBounds().center());var cb=this.textPositionFromPoint(la),fb=this.treeData.asListWithIndexAndDepth(function(Qd){Qd=Qd.node;return Qd!=va._previewNode&&Qd.container.world()}),
ec=(fb.find(function(Qd){return Qd.i-1===cb.row})||{}).node,Nc=ec&&ec.container,pd=this.ensurePlaceholder(),Yd=!!pd.container.world(),uc=la.subPt(this.scroll).subPt(this.scrollbarOffset);10>uc.y?this.scrollUpSlowly():uc.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!Nc){if(fb.length>cb.row||qc.arr.last(this.treeData.root.children)===pd)return;this.treeData.remove(pd);this.treeData.add(pd);this.update(!0)}if(Nc){fb=this.textLayout.boundsFor(this,
cb);if(4>Math.abs(fb.top()-la.y)){if(this.treeData.isBefore(pd,ec))return;this.treeData.remove(pd);this.treeData.addBefore(pd,ec)}else if(4>Math.abs(fb.bottom()-la.y)&&(ec.isCollapsed||this.treeData.isLeaf(ec))){if(this.treeData.isAfter(pd,ec))return;this.treeData.remove(pd);this.treeData.addAfter(pd,ec)}else{Nc.fill=qc.Color.gray;if(!Yd)return;this.treeData.remove(pd)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var la=qc.pt(this.width-100,this.document.getLine(0).height);this._previewNode||
(this._previewNode={container:qc.morph({acceptsDrops:!1,reactsToPointer:!1,fill:qc.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=la;return this._previewNode}},{key:"relayoutContainers",value:function(){var la=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(va){return va.height});this.treeData.asListWithIndexAndDepth().forEach(function(va){var cb=va.node;va=va.i;cb.container.nativeCursor="grab";
cb.container.width=la.width-25-cb.container.left;cb.container.toggleSelected&&cb.container.toggleSelected(va==la.selectedIndex)});this.anchors.forEach(function(va){return va.position=va.position})}}],[{key:"className",get:function(){return"InteractiveTree"}}],Ca,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},
{start:5374,end:10711})}(qc.Tree);qc.InteractiveTree=nb;qc.InteractiveTree=nb;qc.InteractiveTree=nb;nb=function(za){var Ca=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),ma=Ca.hasOwnProperty("SceneGraphTree")&&"function"===typeof Ca.SceneGraphTree?Ca.SceneGraphTree:Ca.SceneGraphTree=function(la){la&&la[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sa(ma,za,[{key:"beforePublish",value:function(){this.submorphs=[];
this.reset()}},{key:"selectMorphInTarget",value:function(la){var va=this.treeData.asList().find(function(cb){return cb.container.target===la});va&&this.selectedNode!=va&&this.selectPath(this.treeData.pathOf(va))}},{key:"onLoad",value:function(){var la=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(va){if(1==va.nextAddress)return la.submorphs=[],va.yield(la.whenRendered(),2);la.get("inspector").makeEditorVisible(!0);la.get("inspector").makeEditorVisible(!1);la.setTarget($world);va.jumpToEnd()})}},
{key:"adjustProportions",value:function(la){la=(la?la.state.dragDelta:{y:0}).y;var va=this.get("inspector"),cb=this.get("scene graph resizer"),fb=this.get("mode selector"),ec=this.get("connections tree");this.height+=la;va.height-=la;ec.height-=la;cb.top=this.bottom;cb.left=0;fb.top=cb.bottom;ec.top=va.top=fb.bottom+5}},{key:"reset",value:function(){var la=this;this.treeData=new qc.InteractiveTreeData({children:[],container:qc.morph()});this.get("inspector").targetObject={};this.selectedNode=null;
this.anchors.filter(function(va){return null==va.id}).forEach(function(va){return la.removeAnchor(va)})}},{key:"setTarget",value:function(la){this.target=la;this.treeData=this.getTreeFromSubmorphHierarchy(la);this.uncollapse(this.treeData.root)}},{key:"isNodeOutOfSync",value:function(la){var va=this;if(la===this._previewNode)return!1;if(la.container.nameNeedsUpdate)return!0;var cb=la.container.target.submorphs.filter(function(fb){return!va.ignoreMorph(fb)});return cb.length!=la.children.length||cb.map(function(fb){return fb.name}).join("")!=
la.children.map(function(fb){return fb.target?fb.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(la){var va=this,cb=la.container.target.submorphs.map(function(Yd){return Yd.__scene_graph_target__?Yd.__scene_graph_target__():Yd}).filter(function(Yd){return!va.ignoreMorph(Yd)}),fb=[],ec={},Nc;for(Nc in cb){ec.$jscomp$loop$prop$m$2282=cb[Nc];var pd=qc.arr.without(la.children,this._previewNode).find(function(Yd){return function(uc){return uc.container.target.id==Yd.$jscomp$loop$prop$m$2282.id}}(ec));
fb[Nc]=pd?pd:this.readMorphHierarchy(ec.$jscomp$loop$prop$m$2282);ec={$jscomp$loop$prop$m$2282:ec.$jscomp$loop$prop$m$2282}}return fb}},{key:"refresh",value:function(){var la=this;if(!this._updating&&!this._dropInProgress){var va=!1;qc.tree.prewalk(this.treeData.root,function(cb){la.isNodeOutOfSync(cb)&&(va=!0,cb.name=cb.container.target.name,cb.container.refresh(),cb.children=la.getNewChildren(cb))},function(cb){return cb.children});this.update(va)}}},{key:"ignoreMorph",value:function(la){return la.isMorph?
la.isContainer||la.isWindow||la.getWindow()||la.isEpiMorph||la.isHand||["lively.halos"].includes(la.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler","UserFlap","Menu"].includes(la.constructor.name):!1}},{key:"onDropHoverOut",value:function(la){var va=la.hand.grabbedMorphs[0];la=la.hand.findDropTarget();if(!(la===this||la&&la.ownerChain().includes(this))&&va&&va.isContainer)va.onDragOutside()}},{key:"onDropHoverIn",value:function(la){var va=la.hand.grabbedMorphs[0];
va&&!va.isContainer&&($world.halos().forEach(function(cb){return cb.remove()}),va.remove(),Object.assign(va,la.hand._grabbedMorphProperties.get(va).pointerAndShadow),va=this.renderContainerFor(va,!1),la.hand.grab(va),va.leftCenter=qc.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(la){return new qc.InteractiveTreeData(this.readMorphHierarchy(la))}},{key:"readMorphHierarchy",value:function(la){var va=this;return qc.tree.mapTree(la,function(cb,fb){return{name:cb.name,isCollapsed:!0,
container:va.renderContainerFor(cb),visible:!0,children:fb}},function(cb){return cb.submorphs.filter(function(fb){return cb.isWorld?!va.ignoreMorph(fb):!0})})}},{key:"renderContainerFor",value:function(la,va){la=void 0===la?qc.morph({name:"root"}):la;va=new qc.MorphContainer({tree:this,fill:void 0===va||va?qc.Color.transparent:qc.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:la,opacity:la.visible?1:.5});la._data?(va._data=la._data,la._data.container=va):
va._data={name:la.name,isCollapsed:!0,container:va,children:[]};return va}},{key:"collapseAll",value:function(){var la=this;this.treeData.asList().forEach(function(va){return va!=la.treeData.root?va.isCollapsed=!0:va.isCollapsed=!1})}},{key:"filterMorphs",value:function(la){var va=this,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fb){if(1==fb.nextAddress)return cb=la.tokens[0],va.treeData.filterActive||(va._collapseState=new WeakMap(va.treeData.asList().map(function(ec){return[ec,
ec.isCollapsed]}))),va.treeData.filterActive=!!cb,fb.yield(va.treeData.filter(function(ec){var Nc=!cb||ec.container.target.name.includes(cb);ec.container.highlightTerm(cb);return Nc},3),2);va.treeData.filterActive||va.treeData.asList().forEach(function(ec){return ec.isCollapsed=va._collapseState.has(ec)?va._collapseState.get(ec):!0});va.refresh();fb.jumpToEnd()})}}],[{key:"className",get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],Ca,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:10720,end:17193})}(qc.InteractiveTree);qc.SceneGraphTree=nb;qc.SceneGraphTree=nb;qc.SceneGraphTree=nb;nb=function(za){var Ca=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),ma=Ca.hasOwnProperty("MorphContainer")&&"function"===typeof Ca.MorphContainer?Ca.MorphContainer:
Ca.MorphContainer=function(la){la&&la[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sa(ma,za,[{key:"refresh",value:function(){var la=this,va,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fb){va=la.target;if(!va)return fb.return();la.reactsToPointer=!0;la.dropShadow=!1;la.submorphs=[la.getLabel(),va.layout&&la.getLayoutControls(),la.getConnectionControls()].filter(Boolean).map(function(ec,Nc){ec.fitIfNeeded();
ec.left=cb?cb.right+5:0;ec.top=2;return cb=ec});la.height=20;la.opacity=va.visible?1:.5;fb.jumpToEnd()})}},{key:"getLabel",value:function(){var la=this.getSubmorphNamed("name label")||qc.morph({type:"label",name:"name label",reactsToPointer:!1,padding:qc.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),va=la.textString.slice(2,-1);va&&va==this.target.name||(la.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return la}},{key:"getIcon",value:function(la){return qc.Icon.textAttribute({Morph:"square",
Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[la.constructor.className]||"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var la=this.getSubmorphNamed("layout label")||qc.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:qc.Rectangle.inset(4,2,4,2),fill:qc.Color.orange,fontColor:qc.Color.white});la._isControlElement=
!0;la.textString!=this.target.layout.name()&&(la.value=this.target.layout.name());return la}},{key:"onMouseDown",value:function(la){var va=this,cb,fb,ec,Nc,pd,Yd,uc,Qd,cd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(zb){if(1==zb.nextAddress)return sa._get(Object.getPrototypeOf(ma.prototype),"onMouseDown",va).call(va,la),la.targetMorph!=va.get("connections label")?zb.jumpTo(0):zb.yield(va.whenRendered(),3);cb=$jscomp.makeIterator(va.world().halos());for(fb=cb.next();!fb.done;fb=cb.next())ec=
fb.value,ec.remove();Nc=$jscomp.makeIterator(va.world().getSubmorphsByStyleClassName("ConnectionHalo"));for(fb=Nc.next();!fb.done;fb=Nc.next())pd=fb.value,pd.remove();va.owner.animate({opacity:.5,duration:300});Yd=new qc.ConnectionHalo({target:va.target});Yd.openInWorld();Yd.topLeft=va.getSubmorphNamed("connections label").globalPosition.addXY(0,-2);qc.connect(va,"position",function(){Yd.topLeft=va.getSubmorphNamed("connections label").globalPosition.addXY(0,-2)});uc=va;Qd=va.owner;cd=va.get("side bar");
qc.once(Yd,"remove",va,"toggleConnectionControl",{varMapping:{self:uc,disconnectAll:vb,disconnect:eb,connectionHalo:Yd,tree:Qd,sideBar:cd},updater:function(da){uc.connectionHalo=null;Qd.animate({opacity:1,duration:300});qc.disconnect(cd,"toggle",Yd,"remove");qc.disconnectAll(uc);da(!0)}});qc.once(va,"remove",Yd,"remove");qc.once(va.get("side bar"),"toggle",Yd,"remove");va.toggleConnectionControl(!1);va.connectionHalo=Yd;zb.jumpToEnd()})}},{key:"getConnectionControls",value:function(){this.connectionCount=
this.target.attributeConnections?this.target.attributeConnections.filter(function(cb){return!cb.targetObj.isHalo}).length:0;var la=this.getSubmorphNamed("connections label")||qc.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:qc.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:qc.Color.red,fontColor:qc.Color.white});la._isControlElement=!0;la.visible=!this.connectionHalo&&!!this.connectionCount;var va=this.connectionCount?this.connectionCount+" connection"+
(1<this.connectionCount?"s":""):"Manage Connections";la.textString!=va&&(la.value=va);return la}},{key:"highlightTerm",value:function(la){var va=this.submorphs[0],cb=va.textAndAttributes.slice(0,2),fb=va.textString.slice(1).split(la);va.textAndAttributes=1===fb.length?[].concat($jscomp.arrayFromIterable(cb),[fb[0]]):[].concat($jscomp.arrayFromIterable(cb),$jscomp.arrayFromIterable(qc.arr.flatten(qc.arr.interpose(fb.map(function(ec){return[ec,{}]}),[la,{fontWeight:"900"}]))))}},{key:"getClassControls",
value:function(){}},{key:"wantsToBeDroppedOn",value:function(la){var va=sa._get(Object.getPrototypeOf(ma.prototype),"wantsToBeDroppedOn",this).call(this,la);if(![la].concat($jscomp.arrayFromIterable(la.ownerChain())).includes(this.tree))this.onDragOutside();return va}},{key:"onGrab",value:function(la){var va=this,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fb){if(1==fb.nextAddress)return va.tree._dropInProgress=!0,cb=va.target.globalPosition,sa._get(Object.getPrototypeOf(ma.prototype),
"onGrab",va).call(va,la),va._data.globalTargetPosition=cb,fb.yield(va.whenRendered(),2);if(va.tree.fullContainsWorldPoint(va.globalPosition))va.leftCenter=qc.pt(-20,0);else va.onDragOutside();va.tree._dropInProgress=!1;fb.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=qc.fun.createQueue("container-hover-queue",function(la,va){var cb,fb,ec;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nc){if(1==Nc.nextAddress)return cb=
la.target,fb=cb.opacity,ec=cb.scale,la.target.opacity=0,la.target.scale=.5,$world.halos().forEach(function(pd){return pd.remove()}),$world.firstHand.grab(la.target),la.target._data=la._data,la.remove(),la.target.position=qc.pt(0,0),Nc.yield(la.target.animate({opacity:fb,scale:ec,duration:200}),2);va();Nc.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(la){var va=this.node.children.indexOf(la.node||la._data)+1;va=this.node.children[va];la.target.remove();va?(va=this.target.submorphs.indexOf(va.container.target),
this.target.addMorphAt(la.target,va)):this.target.addMorph(la.target);la._data.globalTargetPosition&&(la.target.position=this.target.localize(la._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(la){}},{key:"toggleConnectionControl",value:function(la){this.getSubmorphNamed("connections label").visible=la}},{key:"toggleSelected",value:function(la){var va=this,cb,fb,ec;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nc){if(1==Nc.nextAddress)return sa._get(Object.getPrototypeOf(ma.prototype),
"toggleSelected",va).call(va,la),va._active===la?Nc.return():(va._active=la)&&va.target&&va.target.isMorph&&va.world()?Nc.yield(va.target.whenRendered(),3):Nc.jumpTo(0);va.get("inspector").targetObject=va.target;if(va.connectionHalo)return Nc.return();cb=$jscomp.makeIterator(va.world().halos());for(fb=cb.next();!fb.done;fb=cb.next()){ec=fb.value;if(ec.target===va.target)return Nc.return();ec.remove()}va.world().showHaloFor(va.target);Nc.jumpToEnd()})}}],[{key:"className",get:function(){return"MorphContainer"}},
{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(la){this.submorphs[0].fontFamily=la}},fontColor:{after:["submorphs"],derived:!0,set:function(la){this.submorphs[0].fontColor=la}},fontSize:{derived:!0,set:function(la){this.submorphs[0].fontSize=la}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&
this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}}}}}],Ca,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:17202,end:25985})}(qc.InteractiveTreeContainer);
qc.MorphContainer=nb;qc.MorphContainer=nb;qc.MorphContainer=nb;var Cb=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");Cb.visualizeConnection=function(za,Ca,ma,la,va){la=void 0===la?{}:la;va=Cb.rect(0).sides.concat(Cb.rect(0).corners);ma=ma||new Cb.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Cb.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Cb.Color.transparent,nativeCursor:"auto"},end:{fill:Cb.Color.orange}}},la,{hasFixedPosition:!0}));ma.startPoint.attachTo(za,
"rightCenter");Ca.isMorph?(la=Ca.globalBounds().partNameNearest(va,za.globalPosition),za.globalPosition.equals(Ca.globalBounds().partNamed(la))&&Ca.globalBounds().partNameNearest(Cb.arr.without(va,la),za.globalPosition),ma.endPoint.attachTo(Ca,"leftCenter")):(va=za.globalBounds().topRight().addPt(Cb.pt(100,0)),Ca=Cb.morph({type:"label",value:Ca.toString(),styleClasses:["Tooltip"],padding:Cb.rect(8,4)}).openInWorld(va),Ca.position=za.world().bounds().translateForInclusion(Ca.bounds()).topLeft(),Cb.once(ma,
"remove",Ca,"remove"),ma.endPoint.attachTo(Ca,"leftCenter"));return ma};Cb.startConnecting=function(za,Ca){za.animate({opacity:.8,duration:300});za.startPoint.attachTo(Ca,"center");za.vertices[0].position=Cb.pt(2,2)};Cb.stopConnecting=function(za,Ca,ma,la){function va(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nc){if(1==Nc.nextAddress)return Nc.yield(za.animate({opacity:0,duration:300}),2);za.startPoint.clearConnection();za.endPoint.clearConnection();za.remove();Nc.jumpToEnd()})}
la=void 0===la?"sourceAttrName":la;var cb,fb,ec;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nc){return 1==Nc.nextAddress?(cb=za,fb=cb.endPoint,(ec=fb.connectedMorph)&&"MorphContainer"==ec.constructor.className&&(ec=ec.target),ec?Nc.yield(Cb.interactiveConnectGivenSourceAndTarget(ma,la,ec),2):Nc.jumpTo(2)):Nc.yield(va(),0)})};Cb.editConnection=function(za){var Ca=za.connection,ma=za.connectionPoint,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(va){if(1==va.nextAddress)return la=
Cb.visualizeConnection(ma,Ca.targetObj,!1,{borderColor:Cb.Color.gray.darker(),endpointStyle:{start:{fill:Cb.Color.transparent,nativeCursor:"auto"},end:{fill:Cb.Color.gray.darker()}}}),va.yield(Cb.interactivelyReEvaluateConnection(Ca,"Edit Connection",!1),2);la.remove();va.jumpToEnd()})};Cb.Tree=Fc;Cb.TreeData=zc;Cb.Icon=dc;Cb.morph=Tc;Cb.pt=Wb;Cb.Rectangle=xb;Cb.rect=Mc;Cb.Color=Jc;Cb.arr=bd;Cb.connect=Ic;Cb.signal=yb;Cb.Leash=Jb;Cb.once=Zb;Cb.interactivelyReEvaluateConnection=qa;Cb.interactiveConnectGivenSource=
I;Cb.interactiveConnectGivenSourceAndTarget=T;(function(za){var Ca=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),ma=Ca.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof Ca.ConnectionsTreeData?Ca.ConnectionsTreeData:Ca.ConnectionsTreeData=function(la){la&&la[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sa(ma,za,[{key:"parseMorphConnections",value:function(la){for(var va={},cb=$jscomp.makeIterator(void 0===
la.attributeConnections?[]:la.attributeConnections),fb=cb.next();!fb.done;fb=cb.next())fb=fb.value,fb.targetObj.isHalo||(va[fb.sourceAttrName]=va[fb.sourceAttrName]||[{name:["      New Connection  ",{fontColor:Cb.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(la,fb.sourceAttrName),{}]}],Cb.arr.pushAt(va[fb.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(fb)))},0));return{children:Object.entries(va).map(function(ec){var Nc=$jscomp.makeIterator(ec);
ec=Nc.next().value;Nc=Nc.next().value;return{name:[ec,{fontWeight:"bold"}," ",{},Cb.morph({fill:Cb.Color.white,opacity:.7,value:""+(Nc.length-1),borderRadius:15,fontWeight:"bold",padding:Cb.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:Nc}}).concat([{name:["New Connection  ",{fontColor:Cb.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(la),{}]}])}}},{key:"renderExistingConnection",value:function(la){var va=this,cb=Cb.morph({type:"label",fontColor:Cb.Color.gray,fontSize:16,
nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(Cb.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},la.targetMethodName,{}])}),fb=this.renderDeadPin(),ec=fb.submorphs[0];Cb.connect(cb,"onHoverIn",function(){cb.fontColor=Cb.Color.orange;cb._leash=Cb.visualizeConnection(ec,la.targetObj,cb._leash);ec.fill=Cb.Color.orange;ec.border={color:Cb.Color.orange,width:3}});Cb.connect(cb,"onMouseDown",function(Nc){return $jscomp.asyncExecutePromiseGeneratorProgram(function(pd){if(1==
pd.nextAddress)return Nc.stop(),pd.yield(Cb.interactivelyReEvaluateConnection(la),2);Cb.signal(va,"refresh");pd.jumpToEnd()})});Cb.connect(cb,"onHoverOut",function(){cb.fontColor=Cb.Color.gray;ec.fill=Cb.Color.gray;ec.border={color:Cb.Color.white,width:1};cb._leash.remove();cb._leash=void 0});return[cb,{},"  ",{}].concat($jscomp.arrayFromIterable(Cb.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){la.disconnect();Cb.signal(va,"refresh")}})),["  ",{},fb,{}])}},{key:"renderDeadPin",
value:function(){var la=Cb.morph({type:"ellipse",fill:Cb.Color.gray,extent:Cb.pt(10,10),center:Cb.pt(8,12),borderWidth:1});return Cb.morph({extent:Cb.pt(20,20),fill:Cb.Color.transparent,reactsToPointer:!1,submorphs:[la]})}},{key:"renderPin",value:function(la,va){var cb=this,fb=Cb.morph({type:"ellipse",fill:Cb.Color.gray.withA(.5),extent:Cb.pt(10,10),center:Cb.pt(8,12),draggable:!1,borderWidth:1}),ec=new Cb.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:Cb.Color.gray.darker(),
endpointStyle:{fill:Cb.Color.gray.darker()},position:Cb.pt(1,1),vertices:[Cb.pt(0,0),Cb.pt(0,0)],canConnectTo:function(Nc){return"MorphContainer"==Nc.constructor.className||2>Cb.arr.intersect([Nc].concat($jscomp.arrayFromIterable(Nc.ownerChain())),[fb].concat($jscomp.arrayFromIterable(fb.ownerChain()))).length}});fb.addMorph(ec);Cb.connect(ec.endPoint,"onDragStart",function(){Cb.startConnecting(ec,fb)});Cb.connect(ec.endPoint,"onDragEnd",function(Nc){return $jscomp.asyncExecutePromiseGeneratorProgram(function(pd){if(1==
pd.nextAddress)return fb.center=Cb.pt(8,12),pd.yield(Cb.stopConnecting(ec,fb,la,va),2);Cb.signal(cb,"refresh");pd.jumpToEnd()})});return Cb.morph({extent:Cb.pt(20,20),fill:Cb.Color.transparent,reactsToPointer:!1,submorphs:[fb]})}},{key:"display",value:function(la){return la.name}},{key:"collapse",value:function(la,va){la.isCollapsed=va}},{key:"isCollapsed",value:function(la){return la.isCollapsed}},{key:"isLeaf",value:function(la){return!la.children}},{key:"getChildren",value:function(la){return la.children}}],
[{key:"className",get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(la){var va=new this;va.root=va.parseMorphConnections(la);return va}}],Ca,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3535,end:8087})})(Cb.TreeData);nb=function(za){var Ca=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),
ma=Ca.hasOwnProperty("ConnectionsTree")&&"function"===typeof Ca.ConnectionsTree?Ca.ConnectionsTree:Ca.ConnectionsTree=function(la){la&&la[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sa(ma,za,[{key:"inspectConnectionsOf",value:function(la){if(this.targetMorph=la)this.treeData=Cb.ConnectionsTreeData.for(la),Cb.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=Cb.ConnectionsTreeData.for(this.targetMorph),
Cb.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:"className",get:function(){return"ConnectionsTree"}},{key:"properties",get:function(){return{}}}],Ca,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8104,end:8657})}(Cb.Tree);nb=Cb.ConnectionsTree;Cb.default=nb}}});