System.register("./__root_module__-19078926.js ./index-079fa77a.js ./index-20301cd6.js ./index-8d38b85c.js ./color-picker-dbbf19f7.js ./editor-plugin-3b752fd9.js ./index-1f89e652.js ./editor-plugin-09a7099e.js ./index-d8541367.js".split(" "),function(){var ya,wb,Ab,ac,Ob,kd,Cc,qd,Dc,Ic,Qc,Bd,ne,ve,Wd,Ub,wc,od,Tb,xd,Fd,ic,rc,Gb,oc,Hc,ad,dd,ec,jb,yb,Ja,Ta,Ka,Fa,Xa,Ib,jc,lb,tb,nb,Y;return{setters:[function(Ba){ya=Ba.aw;wb=Ba.an;Ab=Ba.aC;ac=Ba.aa;Ob=Ba.a3;kd=Ba.ax;Cc=Ba.au;qd=Ba.aj;Dc=Ba.C;Ic=Ba.a2;
Qc=Ba.a6;Bd=Ba.$;ne=Ba.a_;ve=Ba.P;Wd=Ba.a8;Ub=Ba.aD;wc=Ba.ap;od=Ba.aZ;Tb=Ba.as;xd=Ba.aq;Fd=Ba.ab;ic=Ba.bp;rc=Ba.br;Gb=Ba.bO;oc=Ba.b4;Hc=Ba.bk;ad=Ba.aP;dd=Ba.l;ec=Ba.a1;jb=Ba.bP;yb=Ba.aY;Ja=Ba.a$;Ta=Ba.at;Ka=Ba.a4;Fa=Ba.aV;Xa=Ba.av;Ib=Ba.bQ},function(){},function(){},function(Ba){jc=Ba.d;lb=Ba.s;tb=Ba.I;nb=Ba.M},function(){},function(Ba){Y=Ba.I},function(){},function(){},function(){}],execute:function(){function Ba(mb){var Ec=mb.sourceObj,Ac=mb.targetObj;Ec.isMorph&&Ac.isMorph?(Ec.show(),Ac.show(),
cb.showConnector&&cb.showConnector(Ec,Ac)):cb.show(String(mb))}function P(mb){var Ec=mb.sourceObj,Ac=mb.sourceAttrName,ab=mb.targetObj,La=mb.targetMethodName,gb=mb.getConverter();mb=mb.getUpdater();return cb.printConnectionElements(Ec,Ac,ab,La,gb,mb)}function na(mb,Ec,Ac,ab,La,gb){mb="/* global connect, source, target */\nconnect(source, '"+Ec+"', target, '"+ab+"'";if(La||gb)mb+=", {\n";La&&(mb+="  converter: "+La);La&&gb&&(mb+=",");La&&(mb+="\n");gb&&(mb+="  updater: "+gb+"\n");if(La||gb)mb+="}";
return mb+");"}function Sa(mb,Ec){var Ac;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ab){if(1==ab.nextAddress)return ab.yield(cb.InteractiveMorphSelector.selectMorph(),2);Ac=ab.yieldResult;return ab.return(Ac?cb.interactiveConnectGivenSourceAndTarget(mb,Ec,Ac):null)})}function hb(mb,Ec,Ac,ab){var La,gb,Va,tc,ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(va){switch(va.nextAddress){case 1:La=Ac&&Ac.world().targetDataBindings(Ac);gb=mb.world();if(!La||!La.length)return gb.setStatusMessage("connect canceled"),
va.return();if(Ec){va.jumpTo(2);break}Va=[{isListItem:!0,string:"[Enter custom attribute..]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(cb.arr.flatten(mb.world().targetDataBindings(mb)).map(function(qb){return{isListItem:!0,string:qb.signature||qb.name,value:qb}})));return va.yield(gb.listPrompt(["Select Source Attribute\n",{},"Choose the attribute of the morph that is supposed to invoke the connection. This can be a method, property or a custom signal that is invoked upon the morph.",{paddingTop:"10px",
fontSize:14,textAlign:"left",fontWeight:"normal"}],Va,{filterable:!0}),3);case 3:Ec=va.yieldResult;if("canceled"==Ec.status)return va.return();Ec=Ec.selected[0];Ec=Ec.custom?"sourceAttribute":Ec.name;case 2:return tc=[{isListItem:!0,string:"[Enter custom attribute...]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(cb.arr.flatten(La).map(function(qb){return{isListItem:!0,value:qb,string:qb.signature||qb.name}}))),va.yield(gb.listPrompt(["Select Target Attribute\n",{},"Choose the attribute of the morph that is supposed to invoked once the connection is triggered. This can be either a method or a property of the morph. When selecting a property, keep in mind that the value of the source attribute will be assigned to the property or passed to the method as an argument.",
{fontSize:14,textAlign:"left",fontWeight:"normal",paddingTop:"10px"}],tc,{filterable:!0}),4);case 4:ia=va.yieldResult;if("canceled"==ia.status)return va.return();ia=ia.selected[0];return va.yield(cb.interactivelyEvaluateConnection({sourceObj:mb,sourceAttr:Ec,targetObj:Ac,targetAttr:ia.custom?"targetAttribute":ia.name,onConnect:ab,prompt:"Edit and confirm connection:"}),0)}})}function cc(mb,Ec,Ac,ab){Ec=void 0===Ec?"confirm connection":Ec;var La,gb,Va,tc,ia,va,qb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){La=
mb;gb=La.sourceObj;Va=La.sourceAttrName;tc=La.targetObj;ia=La.targetMethodName;va=mb.getConverter();qb=mb.getUpdater();return I.return(cb.interactivelyEvaluateConnection({sourceObj:gb,sourceAttr:Va,targetObj:tc,targetAttr:ia,converter:va,updater:qb,prompt:Ec,highlight:Ac,onConnect:ab}))})}function Uc(mb,Ec,Ac,ab,La){ab=void 0===ab?{}:ab;La=cb.rect(0).sides.concat(cb.rect(0).corners);Ac=Ac||new cb.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:cb.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:cb.Color.transparent,
nativeCursor:"auto"},end:{fill:cb.Color.orange}}},ab,{hasFixedPosition:!0}));Ac.startPoint.attachTo(mb,"rightCenter");Ec.isMorph?(ab=Ec.globalBounds().partNameNearest(La,mb.globalPosition),mb.globalPosition.equals(Ec.globalBounds().partNamed(ab))&&Ec.globalBounds().partNameNearest(cb.arr.without(La,ab),mb.globalPosition),Ac.endPoint.attachTo(Ec,"leftCenter")):(La=mb.globalBounds().topRight().addPt(cb.pt(100,0)),Ec=cb.morph({type:"label",value:Ec.toString(),styleClasses:["Tooltip"],padding:cb.rect(8,
4)}).openInWorld(La),Ec.position=mb.world().bounds().translateForInclusion(Ec.bounds()).topLeft(),cb.once(Ac,"remove",Ec,"remove"),Ac.endPoint.attachTo(Ec,"leftCenter"));return Ac}function Xb(mb){var Ec,Ac,ab,La,gb,Va,tc,ia,va,qb,I,pa,Oa,ub,Wb,Jb,yc,Jc,Hd,Ge;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Dd){switch(Dd.nextAddress){case 1:Ec=mb;Ac=Ec.sourceObj;ab=Ec.sourceAttr;La=Ec.targetObj;gb=Ec.targetAttr;Va=Ec.converter;tc=Ec.updater;ia=Ec.prompt;va=void 0===Ec.highlight?!0:Ec.highlight;
qb=Ec.onConnect;I="lively://lively.bindings-interactive-connect/x"+Ac.id;pa={context:window,format:"esm",targetModule:I,classTransform:cb.classToFunctionTransform};Oa=cb.printConnectionElements(Ac,ab,La,gb,Va,tc);La.isMorph&&Ac.isMorph&&(ub=La.propertiesAndPropertySettings().properties[gb]||{type:typeof La[gb]},Wb=ub.type,Jb=Ac.propertiesAndPropertySettings().properties[ab]||{type:typeof Ac[ab]},yc=Jb.type,yc!==Wb&&(ia=["Edit and confirm connection:\n",{},"Source: ",{fontSize:14,fontWeight:"normal"},
Ac.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"},"\nTarget: ",{fontSize:14,fontWeight:"normal"},La.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"}]));Jc={};Object.assign(lively.modules.module(I).recorder,(Jc.source=Ac,Jc.target=La,Jc.connect=cb.connect,Jc.once=cb.once,Jc[ab]=Ac[ab],Jc));if(!ia){Hd=Oa;Dd.jumpTo(2);break}return Dd.yield($world.editPrompt(ia,{input:Oa,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:pa,
animated:!1}),3);case 3:if(Hd=Dd.yieldResult,!Hd)return $world.setStatusMessage("connect canceled"),Dd.return();case 2:return Dd.yield(lively.vm.runEval(Hd,pa),4);case 4:Ge=Dd.yieldResult;if(Ge.isError)return $world.logError(Ge.value),Dd.return(Xb({sourceObj:Ac,sourceAttr:ab,targetObj:La,targetAttr:gb,converter:Va,updater:tc,prompt:"confirm connection",highlight:va,onConnect:qb}));va&&($world.setStatusMessage("connected!",cb.Color.green),cb.interactivelyShowConnection(Ge.value));"function"===typeof qb&&
qb(Ge);Dd.jumpToEnd()}})}var Db=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");Db.Inspector=Y;var vd=function(mb){var Ec=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),Ac=Ec.hasOwnProperty("ProtoInspector")&&"function"===typeof Ec.ProtoInspector?Ec.ProtoInspector:Ec.ProtoInspector=function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Ac,mb,void 0,[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Ec,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(Db.Inspector);vd=Db.ProtoInspector;Db.default=vd;var bd=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");
bd.Morph=wb;bd.touchInputDevice=Ab;bd.easings=ac;bd.pt=Ob;bd.fun=kd;bd.connect=Cc;Db=function(mb){var Ec=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),Ac=Ec.hasOwnProperty("MorphicSideBar")&&"function"===typeof Ec.MorphicSideBar?Ec.MorphicSideBar:Ec.MorphicSideBar=function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Ac,mb,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",
value:function(ab){ab=void 0===ab?!0:ab;if(this.respondsToVisibleWindow){var La=$world.visibleBounds(),gb=navigator.standalone&&bd.touchInputDevice?25:0;this.height=La.height-gb;this.top=gb+La.top();gb=this.get("horizontal resizer");gb.height=this.height;gb.top=0;ab&&(this.visible?this.topLeft=La.topLeft():this.topRight=La.topLeft())}}},{key:"switchMode",value:function(ab){"inspector"==ab&&this.showInspector();"connections"==ab&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=
!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(ab){var La=this,gb,Va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(tc){switch(tc.nextAddress){case 1:gb=$world.visibleBounds();Va=navigator.standalone&&bd.touchInputDevice?25:0;La.height=gb.height-Va;La.top=Va+gb.top();if(ab)return $world.addMorph(La,$world.get("lively top bar")),La.topRight=gb.topLeft(),
La.attachToWorld($world),La.visible=!0,tc.yield(La.whenRendered(),5);La.detachFromWorld($world);return tc.yield(La.animate({opacity:0,topRight:gb.topLeft(),duration:300}),4);case 4:La.visible=!1;La.remove();tc.jumpTo(0);break;case 5:return La.onWorldResize(!1),La.get("scene graph").adjustProportions(),tc.yield(La.animate({opacity:1,easing:bd.easings.outCirc,topLeft:gb.topLeft(),duration:300}),6);case 6:La.get("scene graph").refresh(),tc.jumpToEnd()}})}},{key:"attachToWorld",value:function(ab){bd.connect(ab,
"onChange",this,"onHierarchyChange",{garbageCollect:!0});bd.connect(ab,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});bd.connect(ab,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(ab){var La=this;ab.attributeConnections.forEach(function(gb){gb.targetObj===La&&gb.disconnect()})}},{key:"selectNode",value:function(ab){this.getSubmorphNamed("scene graph").selectMorphInTarget(ab);this.getSubmorphNamed("connections tree").inspectConnectionsOf(ab)}},
{key:"onHierarchyChange",value:function(ab){var La=this,gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Va){if("addMorphAt"===ab.selector||"removeMorph"===ab.selector||"name"===ab.prop){gb=La._sceneGraph||(La._sceneGraph=La.getSubmorphNamed("scene graph"));if(!gb||!gb.owner.visible||ab.target&&ab.target.isHand||ab.target&&gb.ignoreMorph(ab.target)||ab.args&&!ab.args[0].isHalo&&gb.ignoreMorph(ab.args[0])||ab.target.ownerChain().find(function(tc){return gb.ignoreMorph(tc)}))return Va.return();
bd.fun.debounceNamed("scene-graph-update",50,function(){return gb.refresh()})()}Va.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],Ec,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-76"}}},
{start:226,end:3668})}(bd.Morph);Db=bd.MorphicSideBar;bd.default=Db;var cb=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");cb.interactivelyShowConnection=Ba;cb.printConnection=P;cb.printConnectionElements=na;cb.interactiveConnectGivenSource=Sa;cb.interactiveConnectGivenSourceAndTarget=hb;cb.interactivelyReEvaluateConnection=cc;cb.visualizeConnection=Uc;cb.interactivelyEvaluateConnection=Xb;cb.connect=Cc;cb.once=qd;cb.Color=Dc;cb.rect=Ic;cb.pt=Ob;cb.arr=Qc;cb.promise=Bd;cb.properties=ne;
cb.Path=ve;cb.obj=Wd;cb.HorizontalLayout=Ub;cb.Morph=wb;cb.VerticalLayout=wc;cb.StyleSheet=od;cb.Icon=Tb;cb.GridLayout=xd;cb.morph=Fd;cb.TreeData=ic;cb.Tree=rc;cb.Leash=Gb;cb.LabeledCheckBox=oc;cb.SearchField=Hc;cb.showConnector=jc;cb.show=lb;cb.InteractiveMorphSelector=tb;cb.MorphHighlighter=nb;cb.Window=ad;cb.classToFunctionTransform=dd;cb.interactivelyShowConnection=Ba;cb.interactivelyShowConnection=Ba;cb.printConnection=P;cb.printConnection=P;cb.printConnectionElements=na;cb.printConnectionElements=
na;cb.interactiveConnectGivenSource=Sa;cb.interactiveConnectGivenSource=Sa;cb.interactiveConnectGivenSourceAndTarget=hb;cb.interactiveConnectGivenSourceAndTarget=hb;cb.interactivelyReEvaluateConnection=cc;cb.interactivelyReEvaluateConnection=cc;cb.visualizeConnection=Uc;cb.visualizeConnection=Uc;cb.interactivelyEvaluateConnection=Xb;cb.interactivelyEvaluateConnection=Xb;var xb=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");xb.Tree=rc;xb.TreeData=ic;xb.morph=Fd;xb.Icon=Tb;xb.HorizontalLayout=
Ub;xb.easings=ac;xb.Morph=wb;xb.Color=Dc;xb.Rectangle=ec;xb.rect=Ic;xb.pt=Ob;xb.connect=Cc;xb.noUpdate=jb;xb.disconnect=yb;xb.disconnectAll=Ja;xb.once=qd;xb.arr=Qc;xb.num=Ta;xb.fun=kd;xb.tree=Ka;xb.promise=Bd;xb.ConnectionHalo=_missingExportShim;xb.getClassName=Fa;Db=function(mb){var Ec=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Ac=Ec.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof Ec.InteractiveTreeContainer?Ec.InteractiveTreeContainer:Ec.InteractiveTreeContainer=
function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Ac,mb,[{key:"onChildRemoved",value:function(ab){}},{key:"onChildAdded",value:function(ab){}},{key:"toggleSelected",value:function(ab){if(this.tree){var La=this.tree,gb=La.selectionFontColor,Va=La.nonSelectionFontColor;this.submorphs.filter(function(tc){return!tc._isControlElement&&tc.styleClasses.includes("Label")}).forEach(function(tc){tc.fontColor=ab?gb:Va})}}},
{key:"onGrab",value:function(ab){var La=this.tree,gb=this.node;this.fill=xb.Color.gray.withA(.5);this.fontColor=La.selectionFontColor;this.opacity=.8;ya._get(Object.getPrototypeOf(Ac.prototype),"onGrab",this).call(this,ab);gb&&(this.toggleSelected(!1),La.collapse(gb),La.treeData.parentNode(gb).container.onChildRemoved(this),this._data=La.treeData.remove(gb),gb.container.target.remove(),La.update(!0))}},{key:"wantsToBeDroppedOn",value:function(ab){this.showPreviewOn(ab);return!0}},{key:"showPreviewOn",
value:function(ab){if(ab.isContainer)var La=ab.tree;ab.isTree&&(La=ab);La&&La.showDropPreviewFor&&La.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(ab){var La=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){if(1==gb.nextAddress)return La.tree.treeData.add(ab._data,La.node,La.node.children[0]),La.tree.uncollapse(La.node),La.tree.treeData.remove(La.tree._previewNode),gb.yield(La.tree.whenRendered(),2);La.tree.update(!0);La.onChildAdded(ab);gb.jumpToEnd()})}},{key:"onBeingDroppedOn",
value:function(ab,La){var gb=this;debugger;this.tree._dropInProgress=!0;ya._get(Object.getPrototypeOf(Ac.prototype),"onBeingDroppedOn",this).call(this,ab,La);ab=function(){gb.fill=xb.Color.gray.withA(.5);gb.opacity=1;gb.tree._dropInProgress=!1;gb.tree.refresh()};La.isTree?La.insertAtPlaceholder(this).then(ab):La.isContainer?La.insertAsChild(this).then(ab):ab()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:xb.Color.transparent},
isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var ab=this,La=this.tree.treeData;return La&&La.asList().find(function(gb){return gb.container===ab})}}}}}],Ec,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1104"}}},{start:498,end:2975})}(xb.Morph);xb.InteractiveTreeContainer=
Db;xb.InteractiveTreeContainer=Db;xb.InteractiveTreeContainer=Db;Db=function(mb){var Ec=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Ac=Ec.hasOwnProperty("InteractiveTreeData")&&"function"===typeof Ec.InteractiveTreeData?Ec.InteractiveTreeData:Ec.InteractiveTreeData=function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Ac,mb,[{key:"display",value:function(ab){return[ab.container||"<NO CONTAINER>",
{}]}},{key:"isCollapsed",value:function(ab){return ab.isCollapsed}},{key:"collapse",value:function(ab,La){ab.isCollapsed=La}},{key:"getChildren",value:function(ab){var La=this;return ab.isLeaf?null:ab.children.filter(function(gb){return gb&&(La.filterActive?gb.visible:!0)})}},{key:"isLeaf",value:function(ab){var La=this;return!ab.children||0==ab.children.filter(function(gb){return gb&&(La.filterActive?gb.visible:!0)}).length}},{key:"add",value:function(ab,La,gb){La=void 0===La?this.root:La;La.children||
(La.children=[]);gb?xb.arr.pushAt(La.children,ab,La.children.indexOf(gb)):La.children.push(ab);La.isLeaf=!1}},{key:"replace",value:function(ab,La){var gb=this.parentNode(ab);ab=gb.children.indexOf(ab);gb.children[ab]=La}},{key:"next",value:function(ab){var La=this.parentNode(ab);return La&&La.children[La.children.indexOf(ab)+1]}},{key:"isBefore",value:function(ab,La){this.next(ab)===La}},{key:"isAfter",value:function(ab,La){this.next(La)===ab}},{key:"addBefore",value:function(ab,La){this.add(ab,this.parentNode(La),
La)}},{key:"addAfter",value:function(ab,La){var gb=this.parentNode(La);La=gb.children.indexOf(La)+1;this.add(ab,gb,gb.children[La])}},{key:"remove",value:function(ab){var La=this.parentNode(ab);if(La)return xb.arr.remove(La.children,ab),La.children==[]&&(La.children=null),ab}},{key:"filter",value:function(ab,La){La=void 0===La?1:La;var gb=this,Va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(tc){if(1==tc.nextAddress)return tc.yield(gb.uncollapseAll(function(ia,va){return va<La+1}),2);
Va=gb.filterActive;gb.filterActive=!1;gb.asListWithIndexAndDepth(!1).reverse().forEach(function(ia){var va=ia.node;if(0==ia.depth)return va.visible=!0;va.visible=ab(va);va.visible||va.isCollapsed||!va.children.find(function(qb){return qb.visible})?va.container.opacity=1:(va.visible=!0,va.container.opacity=.5);return va.visible});gb.filterActive=Va;tc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],Ec,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1104"}}},{start:2984,end:5441})}(xb.TreeData);xb.InteractiveTreeData=Db;xb.InteractiveTreeData=Db;xb.InteractiveTreeData=Db;Db=function(mb){var Ec=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Ac=Ec.hasOwnProperty("InteractiveTree")&&"function"===typeof Ec.InteractiveTree?Ec.InteractiveTree:
Ec.InteractiveTree=function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Ac,mb,[{key:"update",value:function(ab){var La=this;ya._get(Object.getPrototypeOf(Ac.prototype),"update",this).call(this,ab);this.treeData&&this.relayoutContainers();ab&&this.embeddedMorphs.forEach(function(gb){gb.isContainer&&(gb.fill=xb.Color.transparent,gb.fontFamily=La.fontFamily,gb.fontSize=La.fontSize)})}},{key:"onDrop",value:function(ab){ya._get(Object.getPrototypeOf(Ac.prototype),
"onDrop",this).call(this,ab);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(ab){}},{key:"onDropHoverUpdate",value:function(ab){}},{key:"onDropHoverOut",value:function(ab){}},{key:"onHoverOut",value:function(ab){var La=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){ya._get(Object.getPrototypeOf(Ac.prototype),"onHoverOut",La).call(La,ab);La._previewNode&&La._previewNode.container.world()&&La.treeData.remove(La._previewNode);La.resetContainerSelection();
La.update(!0);gb.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(ab){var La=this,gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Va){if(1==Va.nextAddress)return gb=La.treeData.parentNode(La._previewNode),La.treeData.replace(La._previewNode,ab._data),La.treeData.remove(La._previewNode),Va.yield(La.whenRendered(),2);La.update(!0);gb.container.onChildAdded(ab);Va.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var ab=this;if(!this._scrollingUp){this._scrollingUp=!0;var La=
function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){if(1==gb.nextAddress)return ab._scrollingUp&&0<ab.scroll.y?gb.yield(ab.animate({scroll:ab.scroll.subXY(0,30),duration:300,easing:xb.easings.linear}),3):(ab._scrollingUp=!1,gb.jumpTo(0));La();gb.jumpToEnd()})};La()}}},{key:"scrollDownSlowly",value:function(){var ab=this;if(!this._scrollingDown){this._scrollingDown=!0;var La=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){if(1==gb.nextAddress)return ab._scrollingDown&&
ab.scroll.y<ab.scrollExtent.y-ab.height?gb.yield(ab.animate({scroll:ab.scroll.addXY(0,30),duration:300,easing:xb.easings.linear}),3):(ab._scrollingDown=!1,gb.jumpTo(0));La();gb.jumpToEnd()})};La()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(ab){ab.isContainer&&(ab.fill=xb.Color.transparent)})}},{key:"showDropPreviewFor",value:function(ab){var La=this;ab=this.localize(ab.globalBounds().center());
var gb=this.textPositionFromPoint(ab),Va=this.treeData.asListWithIndexAndDepth(function(pa){pa=pa.node;return pa!=La._previewNode&&pa.container.world()}),tc=(Va.find(function(pa){return pa.i-1===gb.row})||{}).node,ia=tc&&tc.container,va=this.ensurePlaceholder(),qb=!!va.container.world(),I=ab.subPt(this.scroll).subPt(this.scrollbarOffset);10>I.y?this.scrollUpSlowly():I.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!ia){if(Va.length>gb.row||xb.arr.last(this.treeData.root.children)===
va)return;this.treeData.remove(va);this.treeData.add(va);this.update(!0)}if(ia){Va=this.textLayout.boundsFor(this,gb);if(4>Math.abs(Va.top()-ab.y)){if(this.treeData.isBefore(va,tc))return;this.treeData.remove(va);this.treeData.addBefore(va,tc)}else if(4>Math.abs(Va.bottom()-ab.y)&&(tc.isCollapsed||this.treeData.isLeaf(tc))){if(this.treeData.isAfter(va,tc))return;this.treeData.remove(va);this.treeData.addAfter(va,tc)}else{ia.fill=xb.Color.gray;if(!qb)return;this.treeData.remove(va)}this.update(!0)}}},
{key:"ensurePlaceholder",value:function(){var ab=xb.pt(this.width-100,this.document.getLine(0).height);this._previewNode||(this._previewNode={container:xb.morph({acceptsDrops:!1,reactsToPointer:!1,fill:xb.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=ab;return this._previewNode}},{key:"relayoutContainers",value:function(){var ab=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(La){return La.height});
this.treeData.asListWithIndexAndDepth().forEach(function(La){var gb=La.node;La=La.i;gb.container.nativeCursor="grab";gb.container.width=ab.width-25-gb.container.left;gb.container.toggleSelected&&gb.container.toggleSelected(La==ab.selectedIndex)});this.anchors.forEach(function(La){return La.position=La.position})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTree"}}],Ec,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1104"}}},{start:5450,end:10824})}(xb.Tree);xb.InteractiveTree=Db;xb.InteractiveTree=Db;xb.InteractiveTree=Db;Db=function(mb){var Ec=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Ac=Ec.hasOwnProperty("SceneGraphTree")&&"function"===typeof Ec.SceneGraphTree?Ec.SceneGraphTree:Ec.SceneGraphTree=function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Ac,mb,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(ab){var La=this.treeData.asList().find(function(gb){return gb.container.target===ab});La&&this.selectedNode!=La&&this.selectPath(this.treeData.pathOf(La))}},{key:"onLoad",value:function(){var ab=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(La){if(1==La.nextAddress)return La.yield(ab.whenRendered(),
2);if(3!=La.nextAddress){if(ab.ownerChain().find(function(gb){return gb.isComponent}))return La.return();ab.submorphs=[];return La.yield(ab.whenRendered(),3)}ab.get("inspector").makeEditorVisible(!0);ab.get("inspector").makeEditorVisible(!1);ab.setTarget($world);La.jumpToEnd()})}},{key:"adjustProportions",value:function(ab){ab=(ab?ab.state.dragDelta:{y:0}).y;var La=this.get("inspector"),gb=this.get("scene graph resizer"),Va=this.get("mode selector"),tc=this.get("connections tree");this.height+=ab;
La.height-=ab;tc.height-=ab;gb.top=this.bottom;gb.left=0;Va.top=gb.bottom;tc.top=La.top=Va.bottom+5}},{key:"reset",value:function(){var ab=this;this.treeData=new xb.InteractiveTreeData({children:[],container:xb.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(La){return null==La.id}).forEach(function(La){return ab.removeAnchor(La)})}},{key:"setTarget",value:function(ab){this.target=ab;this.treeData=this.getTreeFromSubmorphHierarchy(ab);this.uncollapse(this.treeData.root)}},
{key:"isNodeOutOfSync",value:function(ab){var La=this;if(ab===this._previewNode)return!1;if(ab.container.nameNeedsUpdate)return!0;var gb=ab.container.target.submorphs.filter(function(Va){return!La.ignoreMorph(Va)});return gb.length!=ab.children.length||gb.map(function(Va){return Va.name}).join("")!=ab.children.map(function(Va){return Va.target?Va.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(ab){var La=this,gb=ab.container.target.submorphs.map(function(qb){return qb.__scene_graph_target__?
qb.__scene_graph_target__():qb}).filter(function(qb){return!La.ignoreMorph(qb)}),Va=[],tc={},ia;for(ia in gb){tc.$jscomp$loop$prop$m$2593=gb[ia];var va=xb.arr.without(ab.children,this._previewNode).find(function(qb){return function(I){return I.container.target.id==qb.$jscomp$loop$prop$m$2593.id}}(tc));Va[ia]=va?va:this.readMorphHierarchy(tc.$jscomp$loop$prop$m$2593);tc={$jscomp$loop$prop$m$2593:tc.$jscomp$loop$prop$m$2593}}return Va}},{key:"refresh",value:function(){var ab=this;if(!this._updating&&
!this._dropInProgress){var La=!1;xb.tree.prewalk(this.treeData.root,function(gb){ab.isNodeOutOfSync(gb)&&(La=!0,gb.name=gb.container.target.name,gb.container.refresh(),gb.children=ab.getNewChildren(gb))},function(gb){return gb.children});this.update(La)}}},{key:"ignoreMorph",value:function(ab){return ab.isMorph?ab.isContainer||ab.isWindow||ab.getWindow()||ab.isEpiMorph||ab.isHand||["lively.halos"].includes(ab.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler",
"UserFlap","Menu"].includes(ab.constructor.name):!1}},{key:"onDropHoverOut",value:function(ab){var La=ab.hand.grabbedMorphs[0];ab=ab.hand.findDropTarget();if(!(ab===this||ab&&ab.ownerChain().includes(this))&&La&&La.isContainer)La.onDragOutside()}},{key:"onDropHoverIn",value:function(ab){var La=ab.hand.grabbedMorphs[0];La&&!La.isContainer&&($world.halos().forEach(function(gb){return gb.remove()}),La.remove(),Object.assign(La,ab.hand._grabbedMorphProperties.get(La).pointerAndShadow),La=this.renderContainerFor(La,
!1),ab.hand.grab(La),La.leftCenter=xb.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(ab){return new xb.InteractiveTreeData(this.readMorphHierarchy(ab))}},{key:"readMorphHierarchy",value:function(ab){var La=this;return xb.tree.mapTree(ab,function(gb,Va){return{name:gb.name,isCollapsed:!0,container:La.renderContainerFor(gb),visible:!0,children:Va}},function(gb){return gb.submorphs.filter(function(Va){return gb.isWorld?!La.ignoreMorph(Va):!0})})}},{key:"renderContainerFor",value:function(ab,
La){ab=void 0===ab?xb.morph({name:"root"}):ab;La=new xb.MorphContainer({tree:this,fill:void 0===La||La?xb.Color.transparent:xb.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:ab,opacity:ab.visible?1:.5});ab._data?(La._data=ab._data,ab._data.container=La):La._data={name:ab.name,isCollapsed:!0,container:La,children:[]};return La}},{key:"collapseAll",value:function(){var ab=this;this.treeData.asList().forEach(function(La){return La!=ab.treeData.root?La.isCollapsed=
!0:La.isCollapsed=!1})}},{key:"filterMorphs",value:function(ab){var La=this,gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Va){if(1==Va.nextAddress)return gb=ab.tokens[0],La.treeData.filterActive||(La._collapseState=new WeakMap(La.treeData.asList().map(function(tc){return[tc,tc.isCollapsed]}))),La.treeData.filterActive=!!gb,Va.yield(La.treeData.filter(function(tc){var ia=!gb||tc.container.target.name.includes(gb);tc.container.highlightTerm(gb);return ia},3),2);La.treeData.filterActive||
La.treeData.asList().forEach(function(tc){return tc.isCollapsed=La._collapseState.has(tc)?La._collapseState.get(tc):!0});La.refresh();Va.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],Ec,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1104"}}},{start:10833,end:17441})}(xb.InteractiveTree);xb.SceneGraphTree=Db;xb.SceneGraphTree=Db;xb.SceneGraphTree=Db;Db=function(mb){var Ec=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Ac=Ec.hasOwnProperty("MorphContainer")&&"function"===typeof Ec.MorphContainer?Ec.MorphContainer:Ec.MorphContainer=function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Ac,mb,[{key:"refresh",value:function(){var ab=
this,La,gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Va){La=ab.target;if(!La)return Va.return();ab.reactsToPointer=!0;ab.dropShadow=!1;ab.submorphs=[ab.getLabel(),La.layout&&ab.getLayoutControls(),ab.getConnectionControls()].filter(Boolean).map(function(tc,ia){tc.fitIfNeeded();tc.left=gb?gb.right+5:0;tc.top=2;return gb=tc});ab.height=20;ab.opacity=La.visible?1:.5;Va.jumpToEnd()})}},{key:"getLabel",value:function(){var ab=this.getSubmorphNamed("name label")||xb.morph({type:"label",
name:"name label",reactsToPointer:!1,padding:xb.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),La=ab.textString.slice(2,-1);La&&La==this.target.name||(ab.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return ab}},{key:"getIcon",value:function(ab){return xb.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[xb.getClassName(ab)]||
"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var ab=this.getSubmorphNamed("layout label")||xb.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:xb.Rectangle.inset(4,2,4,2),fill:xb.Color.orange,fontColor:xb.Color.white});ab._isControlElement=!0;ab.textString!=this.target.layout.name()&&(ab.value=this.target.layout.name());return ab}},{key:"getConnectionControls",value:function(){this.connectionCount=
this.target.attributeConnections?this.target.attributeConnections.filter(function(gb){return!gb.targetObj.isHalo}).length:0;var ab=this.getSubmorphNamed("connections label")||xb.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:xb.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:xb.Color.red,fontColor:xb.Color.white});ab._isControlElement=!0;ab.visible=!this.connectionHalo&&!!this.connectionCount;var La=this.connectionCount?this.connectionCount+" connection"+
(1<this.connectionCount?"s":""):"Manage Connections";ab.textString!=La&&(ab.value=La);return ab}},{key:"highlightTerm",value:function(ab){var La=this.submorphs[0],gb=La.textAndAttributes.slice(0,2),Va=La.textString.slice(1).split(ab);La.textAndAttributes=1===Va.length?[].concat($jscomp.arrayFromIterable(gb),[Va[0]]):[].concat($jscomp.arrayFromIterable(gb),$jscomp.arrayFromIterable(xb.arr.flatten(xb.arr.interpose(Va.map(function(tc){return[tc,{}]}),[ab,{fontWeight:"900"}]))))}},{key:"getClassControls",
value:function(){}},{key:"wantsToBeDroppedOn",value:function(ab){var La=ya._get(Object.getPrototypeOf(Ac.prototype),"wantsToBeDroppedOn",this).call(this,ab);if(![ab].concat($jscomp.arrayFromIterable(ab.ownerChain())).includes(this.tree))this.onDragOutside();return La}},{key:"onGrab",value:function(ab){var La=this,gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Va){if(1==Va.nextAddress)return La.tree._dropInProgress=!0,gb=La.target.globalPosition,ya._get(Object.getPrototypeOf(Ac.prototype),
"onGrab",La).call(La,ab),La._data.globalTargetPosition=gb,Va.yield(La.whenRendered(),2);if(La.tree.fullContainsWorldPoint(La.globalPosition))La.leftCenter=xb.pt(-20,0);else La.onDragOutside();La.tree._dropInProgress=!1;Va.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=xb.fun.createQueue("container-hover-queue",function(ab,La){var gb,Va,tc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ia){if(1==ia.nextAddress)return gb=
ab.target,Va=gb.opacity,tc=gb.scale,ab.target.opacity=0,ab.target.scale=.5,$world.halos().forEach(function(va){return va.remove()}),$world.firstHand.grab(ab.target),ab.target._data=ab._data,ab.remove(),ab.target.position=xb.pt(0,0),ia.yield(ab.target.animate({opacity:Va,scale:tc,duration:200}),2);La();ia.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(ab){var La=this.node.children.indexOf(ab.node||ab._data)+1;La=this.node.children[La];ab.target.remove();La?(La=this.target.submorphs.indexOf(La.container.target),
this.target.addMorphAt(ab.target,La)):this.target.addMorph(ab.target);ab._data.globalTargetPosition&&(ab.target.position=this.target.localize(ab._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(ab){}},{key:"toggleConnectionControl",value:function(ab){this.getSubmorphNamed("connections label").visible=ab}},{key:"toggleSelected",value:function(ab){var La=this,gb,Va,tc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ia){if(1==ia.nextAddress)return ya._get(Object.getPrototypeOf(Ac.prototype),
"toggleSelected",La).call(La,ab),La._active===ab?ia.return():(La._active=ab)&&La.target&&La.target.isMorph&&La.world()?ia.yield(La.target.whenRendered(),3):ia.jumpTo(0);La.get("inspector").targetObject=La.target;La.get("connections tree").inspectConnectionsOf(La.target);if(La.connectionHalo)return ia.return();gb=$jscomp.makeIterator(La.world().halos());for(Va=gb.next();!Va.done;Va=gb.next()){tc=Va.value;if(tc.target===La.target)return ia.return();tc.remove()}xb.noUpdate({sourceObj:La.world(),targetObj:La.sideBar,
sourceAttribute:"showHaloFor",targetAttribute:"selectNode"},function(){return La.world().showHaloFor(La.target)});ia.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(ab){this.submorphs[0].fontFamily=ab}},fontColor:{after:["submorphs"],derived:!0,set:function(ab){this.submorphs[0].fontColor=ab}},fontSize:{derived:!0,set:function(ab){this.submorphs[0].fontSize=
ab}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],Ec,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1104"}}},{start:17452,end:25124})}(xb.InteractiveTreeContainer);xb.MorphContainer=Db;xb.MorphContainer=Db;xb.MorphContainer=Db;var Bc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");Bc.visualizeConnection=function(mb,Ec,Ac,ab,La){ab=void 0===ab?{}:ab;La=Bc.rect(0).sides.concat(Bc.rect(0).corners);
Ac=Ac||new Bc.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Bc.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Bc.Color.transparent,nativeCursor:"auto"},end:{fill:Bc.Color.orange}}},ab,{hasFixedPosition:!0}));Ac.startPoint.attachTo(mb,"rightCenter");Ec.isMorph?(ab=Ec.globalBounds().partNameNearest(La,mb.globalPosition),mb.globalPosition.equals(Ec.globalBounds().partNamed(ab))&&Ec.globalBounds().partNameNearest(Bc.arr.without(La,ab),mb.globalPosition),Ac.endPoint.attachTo(Ec,
"leftCenter")):(La=mb.globalBounds().topRight().addPt(Bc.pt(100,0)),Ec=Bc.morph({type:"label",value:Ec.toString(),styleClasses:["Tooltip"],padding:Bc.rect(8,4)}).openInWorld(La),Ec.position=mb.world().bounds().translateForInclusion(Ec.bounds()).topLeft(),Bc.once(Ac,"remove",Ec,"remove"),Ac.endPoint.attachTo(Ec,"leftCenter"));return Ac};Bc.startConnecting=function(mb,Ec){mb.animate({opacity:.8,duration:300});mb.startPoint.attachTo(Ec,"center");mb.vertices[0].position=Bc.pt(2,2)};Bc.stopConnecting=
function(mb,Ec,Ac,ab){function La(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ia){if(1==ia.nextAddress)return ia.yield(mb.animate({opacity:0,duration:300}),2);mb.startPoint.clearConnection();mb.endPoint.clearConnection();mb.remove();ia.jumpToEnd()})}ab=void 0===ab?!1:ab;var gb,Va,tc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ia){return 1==ia.nextAddress?(gb=mb,Va=gb.endPoint,(tc=Va.connectedMorph)&&"MorphContainer"==Bc.getClassName(tc)&&(tc=tc.target),tc?ia.yield(Bc.interactiveConnectGivenSourceAndTarget(Ac,
ab,tc),2):ia.jumpTo(2)):ia.yield(La(),0)})};Bc.editConnection=function(mb){var Ec=mb.connection,Ac=mb.connectionPoint,ab;return $jscomp.asyncExecutePromiseGeneratorProgram(function(La){if(1==La.nextAddress)return ab=Bc.visualizeConnection(Ac,Ec.targetObj,!1,{borderColor:Bc.Color.gray.darker(),endpointStyle:{start:{fill:Bc.Color.transparent,nativeCursor:"auto"},end:{fill:Bc.Color.gray.darker()}}}),La.yield(Bc.interactivelyReEvaluateConnection(Ec,"Edit Connection",!1),2);ab.remove();La.jumpToEnd()})};
Bc.Tree=rc;Bc.TreeData=ic;Bc.Icon=Tb;Bc.morph=Fd;Bc.pt=Ob;Bc.Rectangle=ec;Bc.rect=Ic;Bc.Color=Dc;Bc.arr=Qc;Bc.connect=Cc;Bc.signal=Xa;Bc.Leash=Gb;Bc.once=Ib;Bc.interactivelyReEvaluateConnection=cc;Bc.interactiveConnectGivenSource=Sa;Bc.interactiveConnectGivenSourceAndTarget=hb;Bc.getClassName=Fa;(function(mb){var Ec=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Ac=Ec.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof Ec.ConnectionsTreeData?Ec.ConnectionsTreeData:Ec.ConnectionsTreeData=
function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Ac,mb,[{key:"parseMorphConnections",value:function(ab){for(var La={},gb=$jscomp.makeIterator(void 0===ab.attributeConnections?[]:ab.attributeConnections),Va=gb.next();!Va.done;Va=gb.next())Va=Va.value,Va.targetObj.isHalo||(La[Va.sourceAttrName]=La[Va.sourceAttrName]||[{name:["      New Connection  ",{fontColor:Bc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(ab,
Va.sourceAttrName),{}]}],Bc.arr.pushAt(La[Va.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(Va)))},0));return{children:Object.entries(La).map(function(tc){var ia=$jscomp.makeIterator(tc);tc=ia.next().value;ia=ia.next().value;return{name:[tc,{fontWeight:"bold"}," ",{},Bc.morph({fill:Bc.Color.white,opacity:.7,value:""+(ia.length-1),borderRadius:15,fontWeight:"bold",padding:Bc.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:ia}}).concat([{name:["New Connection  ",
{fontColor:Bc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(ab),{}]}])}}},{key:"renderExistingConnection",value:function(ab){var La=this,gb=Bc.morph({type:"label",fontColor:Bc.Color.gray,fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(Bc.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},ab.targetMethodName,{}])}),Va=this.renderDeadPin(),tc=Va.submorphs[0];Bc.connect(gb,"onHoverIn",function(){gb.fontColor=Bc.Color.orange;gb._leash=Bc.visualizeConnection(tc,
ab.targetObj,gb._leash);tc.fill=Bc.Color.orange;tc.border={color:Bc.Color.orange,width:3}});Bc.connect(gb,"onMouseDown",function(ia){return $jscomp.asyncExecutePromiseGeneratorProgram(function(va){if(1==va.nextAddress)return ia.stop(),va.yield(Bc.interactivelyReEvaluateConnection(ab),2);Bc.signal(La,"refresh");va.jumpToEnd()})});Bc.connect(gb,"onHoverOut",function(){gb.fontColor=Bc.Color.gray;tc.fill=Bc.Color.gray;tc.border={color:Bc.Color.white,width:1};gb._leash.remove();gb._leash=void 0});return[gb,
{},"  ",{}].concat($jscomp.arrayFromIterable(Bc.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){ab.disconnect();Bc.signal(La,"refresh")}})),["  ",{},Va,{}])}},{key:"renderDeadPin",value:function(){var ab=Bc.morph({type:"ellipse",fill:Bc.Color.gray,extent:Bc.pt(10,10),center:Bc.pt(8,12),borderWidth:1});return Bc.morph({extent:Bc.pt(20,20),fill:Bc.Color.transparent,reactsToPointer:!1,submorphs:[ab]})}},{key:"renderPin",value:function(ab,La){var gb=this,Va=Bc.morph({type:"ellipse",
fill:Bc.Color.gray.withA(.5),extent:Bc.pt(10,10),center:Bc.pt(8,12),draggable:!1,borderWidth:1}),tc=new Bc.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:Bc.Color.gray.darker(),endpointStyle:{fill:Bc.Color.gray.darker()},position:Bc.pt(1,1),vertices:[Bc.pt(0,0),Bc.pt(0,0)],canConnectTo:function(ia){return"MorphContainer"==Bc.getClassName(ia)||2>Bc.arr.intersect([ia].concat($jscomp.arrayFromIterable(ia.ownerChain())),[Va].concat($jscomp.arrayFromIterable(Va.ownerChain()))).length}});
Va.addMorph(tc);Bc.connect(tc.endPoint,"onDragStart",function(){Bc.startConnecting(tc,Va)});Bc.connect(tc.endPoint,"onDragEnd",function(ia){return $jscomp.asyncExecutePromiseGeneratorProgram(function(va){if(1==va.nextAddress)return Va.center=Bc.pt(8,12),va.yield(Bc.stopConnecting(tc,Va,ab,La),2);Bc.signal(gb,"refresh");va.jumpToEnd()})});return Bc.morph({extent:Bc.pt(20,20),fill:Bc.Color.transparent,reactsToPointer:!1,submorphs:[Va]})}},{key:"display",value:function(ab){return ab.name}},{key:"collapse",
value:function(ab,La){ab.isCollapsed=La}},{key:"isCollapsed",value:function(ab){return ab.isCollapsed}},{key:"isLeaf",value:function(ab){return!ab.children}},{key:"getChildren",value:function(ab){return ab.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(ab){var La=new this;La.root=La.parseMorphConnections(ab);return La}}],Ec,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3542,end:8147})})(Bc.TreeData);Db=function(mb){var Ec=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Ac=Ec.hasOwnProperty("ConnectionsTree")&&"function"===typeof Ec.ConnectionsTree?Ec.ConnectionsTree:Ec.ConnectionsTree=function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return ya(Ac,mb,[{key:"inspectConnectionsOf",value:function(ab){if(this.targetMorph=ab)this.treeData=Bc.ConnectionsTreeData.for(ab),Bc.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=Bc.ConnectionsTreeData.for(this.targetMorph),Bc.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},{key:"properties",get:function(){return{}}}],Ec,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8164,end:8717})}(Bc.Tree);Db=Bc.ConnectionsTree;Bc.default=Db}}});