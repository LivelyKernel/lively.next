System.register(["./__root_module__-f9290433.js","kld-intersections","./user-ui-f9ff2404.js","./index-67954004.js","./index-022558fb.js"],function(sa,db){var Eb,Vb,Wb,wd,Ic,Ad,Jc,Mc,bd,ed,Od,qd,Xc,Ra,wb,mc,dc,Rc,Tc,zc,Fc,Jb,Ac,Bc,fd,Qb,xb,eb,vb,Va,lb,yb,Zb,Sb,$a,bb,Kb,wc,fc;return{setters:[function(bc){Eb=bc.ag;Vb=bc.au;Wb=bc.ay;wd=bc.al;Ic=bc.P;Ad=bc._;Jc=bc.s;Mc=bc.a4;bd=bc.aM;ed=bc.bM;Od=bc.bN;qd=bc.$;Xc=bc.C;Ra=bc.a1;wb=bc.ap;mc=bc.as;dc=bc.bO;Rc=bc.aq;Tc=bc.az;zc=bc.ai;Fc=bc.Y;Jb=bc.ar;
Ac=bc.r;Bc=bc.aY;fd=bc.aZ;Qb=bc.ao;xb=bc.aV;eb=bc.aU;vb=bc.aB;Va=bc.bP;lb=bc.a3;yb=bc.L;Zb=bc.a5;Sb=bc.at;$a=bc.bQ;bb=bc.ab;Kb=bc.T;wc=bc.bJ},function(){},function(bc){fc=bc.UserUI},function(){},function(){}],execute:function(){function bc(qc){var Cb=qc.worldName,za=qc.commit,Ca=qc.loadingIndicator,ma=qc.progress,la=void 0===qc.logError?function(uc){return console.log(uc)}:qc.logError,va,cb,fb,ec,Nc,pd,Yd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(uc){switch(uc.nextAddress){case 1:return uc.setCatchFinallyBlocks(2),
va=JSON.parse(localStorage.getItem("lively.load-config")||"{}"),ma.opacity=0,ma.hasFixedPosition=!0,ma.openInWorld(),ma.bottomCenter=Ca.topCenter,uc.yield(kb.polyfills(),4);case 4:return cb=$world.env,kb.doBootstrap?uc.yield(kb.bootstrapLivelySystem(Ca,ma,va),8):uc.yield(kb.fastPrepLivelySystem(Ca),7);case 7:uc.jumpTo(6);break;case 8:case 6:return Ca.label="Loading lively.2lively...",uc.yield(lively.modules.registerPackage("lively.2lively"),9);case 9:kb.askBeforeQuit&&window.addEventListener("beforeunload",
function(Qd){return Qd.returnValue="Really?"},!0);if("dynamic"!=va["lively.morphic"]){fb=lively.morphic;uc.jumpTo(10);break}Ca.label="Loading lively.morphic...";return uc.yield(lively.modules.importPackage("lively.morphic"),11);case 11:fb=uc.yieldResult,ma.finishPackage({packageName:"lively.morphic",loaded:!0});case 10:Ca.label="Loading world...";window.onresize=null;window.loadCompiledFrozenPart=lively.modules.module("lively.morphic/partsbin.js")._recorder.loadPart;lively.FreezerRuntime=!1;ec=document.location;
uc.setCatchFinallyBlocks(12);Nc={verbose:!0,localconfig:!0,l2l:!0,shell:!0};if(za)return uc.yield(fb.World.loadFromCommit(za,void 0,Object.assign({},Nc,{browserURL:"/worlds/load?name="+za.name})),15);if(!Cb){uc.jumpTo(15);break}return uc.yield(fb.World.loadFromDB(Cb,void 0,void 0,Object.assign({},Nc,{browserURL:"/worlds/load?name="+Cb.replace(/\.json($|\?)/,"")})),15);case 15:uc.leaveTryBlock(13,2);break;case 12:uc.enterCatchBlock(2);case 13:return window.addEventListener("popstate",function(Qd){document.location==
ec&&document.location.reload()}),Ca.remove(),kb.worldLoaded=!0,lively.modules.removeHook("fetch","logFetch"),uc.yield(cb.renderer.worldMorph.whenRendered(),19);case 19:"dynamic"==va["lively.morphic"]&&(cb.renderer.clear(),cb.fontMetric.uninstall(),cb.eventDispatcher.uninstall());uc.leaveTryBlock(0);break;case 2:throw pd=uc.enterCatchBlock(),pd.originalErr&&(pd=pd.originalErr),Yd=pd.message,pd.stack!==pd.message&&(Yd+=pd.stack.includes(pd.message)?pd.stack.replace(pd.message,"\n"):pd.stack),la(Yd),
pd;}})}var Tb=lively.FreezerRuntime.recorderFor("typeshift.components/interactive.js");Tb.Morph=Eb;Tb.HTMLMorph=Vb;Tb.touchInputDevice=Wb;Tb.morph=wd;Tb.Path=Ic;Tb.promise=Ad;Tb.string=Jc;Tb.arr=Mc;Tb.List=bd;Tb.asItem=ed;Tb.ListItemMorph=Od;Tb.Rectangle=qd;Tb.Color=Xc;Tb.pt=Ra;Tb.signal=wb;Tb.once=mc;Tb.ObjectRef=dc;var I=function(qc){var Cb=lively.FreezerRuntime.recorderFor("typeshift.components/interactive.js"),za=Cb.hasOwnProperty("MorphSerializationStopper")&&"function"===typeof Cb.MorphSerializationStopper?
Cb.MorphSerializationStopper:Cb.MorphSerializationStopper=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rc(za,qc,[{key:"__deserialize__",value:function(Ca,ma,la,va,cb){var fb=Ca.props.wrappedMorph;this._wrappedMorph=fb;delete Ca.props.wrappedMorph;Rc._get(Object.getPrototypeOf(za.prototype),"__deserialize__",this).call(this,Ca,ma,la,va,cb);this._serializer={delayedWrappedMorph:fb,serializedObjMap:la,pool:va,
path:cb}}},{key:"__after_deserialize__",value:function(Ca,ma){var la=this;Rc._get(Object.getPrototypeOf(za.prototype),"__after_deserialize__",this).call(this,Ca,ma);ma=this._serializer;var va=ma.delayedWrappedMorph,cb=ma.serializedObjMap,fb=ma.pool,ec=ma.path;this._getWrappedMorph=function(){var Nc=va.value.id;delete la._getWrappedMorph;return la.wrappedMorph=Tb.ObjectRef.fromSnapshot(Nc,cb,fb,ec).realObj};Ca.props.wrappedMorph=this._wrappedMorph;delete this._wrappedMorph;delete this._serializer}},
{key:"__serialize__",value:function(){this._getWrappedMorph&&this._getWrappedMorph();return null}}],[{key:"className",get:function(){return"MorphSerializationStopper"}},{key:"properties",get:function(){return{wrappedMorphName:{},wrappedMorph:{set:function(Ca){this.setProperty("wrappedMorph",Ca);Ca&&Ca.isMorph&&(this.setBounds(Ca.bounds()),this.wrappedMorphName=Ca.name)},get:function(){var Ca=this.getProperty("wrappedMorph");return Ca?Ca:this._getWrappedMorph()}}}}}],Cb,{pathInPackage:function(){return"interactive.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"typeshift.components",version:"0.1.0"}}},{start:367,end:2355})}(Tb.Morph);Tb.MorphSerializationStopper=I;Tb.MorphSerializationStopper=I;Tb.MorphSerializationStopper=I;I=function(qc){var Cb=lively.FreezerRuntime.recorderFor("typeshift.components/interactive.js"),za=Cb.hasOwnProperty("InteractiveItem")&&"function"===typeof Cb.InteractiveItem?
Cb.InteractiveItem:Cb.InteractiveItem=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rc(za,qc,[{key:"fit",value:function(){}},{key:"onHaloGrabover",value:function(Ca){this.list.showDropPreviewFor(this,Ca)}},{key:"onDrop",value:function(Ca){var ma=this,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(va){if(1==va.nextAddress){if(!ma.item.isPreview)return va.jumpTo(0);la=Ca.hand.grabbedMorphs[0];
Rc._get(Object.getPrototypeOf(za.prototype),"onDrop",ma).call(ma,Ca);return va.yield(ma.list.whenRendered(),3)}ma.list.addItemAt({morph:la,isListItem:!0},ma.itemIndex);ma.list.clearPreviews();va.jumpToEnd()})}},{key:"select",value:function(){this.list.selectedIndex=this.itemIndex;this.item.morph.focus()}},{key:"onMouseDown",value:function(Ca){Tb.touchInputDevice?this._touchDown=Date.now():this.select()}},{key:"onMouseUp",value:function(Ca){Tb.touchInputDevice&&500>Date.now()-this._touchDown&&this.select()}},
{key:"displayItem",value:function(Ca,ma,la,va,cb,fb,ec){fb=void 0===fb?!1:fb;Rc._get(Object.getPrototypeOf(za.prototype),"displayItem",this).call(this,Ca,ma,la,va,cb,fb,ec);Ca.morph&&(Ca.morph.selected=fb)}},{key:"onGrab",value:function(Ca){var ma=this.list,la=Ca.halo&&Ca.halo.target===this;la&&Ca.halo.detachFromTarget();var va=this.submorphs.length?this.submorphs[0]:Tb.morph({type:"label",value:this.value});Ca.hand.grab(va);va.position=Ca.hand.localize(this.globalPosition);la&&Ca.halo.refocus(va);
ma.removeItem(this.list.items[this.itemIndex]);ma.itemMorphs.forEach(function(cb){return cb.remove()});ma.update()}}],[{key:"className",get:function(){return"InteractiveItem"}},{key:"properties",get:function(){return{draggable:{defaultValue:Tb.touchInputDevice?!1:!0},item:{derived:!0,get:function(){return this.list.items[this.itemIndex]}},list:{drived:!0,get:function(){return this.owner.owner}},isListItem:{get:function(){return!0}}}}}],Cb,{pathInPackage:function(){return"interactive.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"typeshift.components",version:"0.1.0"}}},{start:2364,end:4638})}(Tb.ListItemMorph);Tb.InteractiveItem=I;Tb.InteractiveItem=I;Tb.InteractiveItem=I;I=function(qc){var Cb=lively.FreezerRuntime.recorderFor("typeshift.components/interactive.js"),za=Cb.hasOwnProperty("MorphList")&&"function"===typeof Cb.MorphList?Cb.MorphList:Cb.MorphList=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Rc(za,qc,[{key:"onLoad",value:function(){Rc._get(Object.getPrototypeOf(za.prototype),"onLoad",this).call(this);this.clipMode=this.touchInput?"auto":"hidden"}},{key:"showDropPreviewFor",value:function(Ca,ma){Ca=Ca.itemIndex;this.items[Ca].isPreview&&ma||(this.clearPreviews(),ma&&this.addItemAt({isListItem:!0,isPreview:!0,morph:Tb.morph({reactsToPointer:!1,acceptsDrops:!1,width:this.width-5,height:this.itemHeight,fill:Tb.Color.orange.withA(.5)})},Ca))}},{key:"clearPreviews",value:function(){var Ca=
this;this.items.filter(function(ma){return ma.morph&&ma.morph.owner&&!Tb.Path("morph.owner.isListItem").get(ma)}).map(function(ma){return $jscomp.asyncExecutePromiseGeneratorProgram(function(la){return la.return(Ca.removeItem(ma))})});this.items.filter(function(ma){return ma.isPreview}).map(function(ma){return Ca.removeItem(ma)})}},{key:"update",value:function(){var Ca=this,ma=this.items;ma&&this.listItemContainer&&(this.scroller&&(this.scroller.visible=!1),this.dontRecordChangesWhile(function(){var la=
Ca.itemHeight,va=Ca.itemMorphs,cb=Ca.listItemContainer,fb=Ca.selectedIndexes,ec=Ca.extent.y,Nc=Ca.fontSize,pd=Ca.fontFamily,Yd=Ca.fontColor,uc=Ca.padding,Qd=Ca.itemPadding,cd=Ca.selectionColor,zb=Ca.selectionFontColor,da=Ca.nonSelectionFontColor,ra=Ca.itemBorderRadius,sb=Ca.scrollBar,H=Ca.scroll.y;uc=uc||Tb.Rectangle.inset(0);var fa=uc.top(),Fa=uc.left(),qb=uc.bottom();uc=uc.right();var nc=Math.max(0,Math.floor(H/la)),xc=Math.min(ma.length,Math.ceil((H+ec)/la));ec=0;H=Ca.width-(Fa+uc);va=Tb.arr.sortBy(va,
function(ue){return ue.itemIndex});var Bd=$jscomp.makeIterator(Tb.arr.partition(va,function(ue){return ue.itemIndex<nc}));va=Bd.next().value;var Cd=Bd.next().value;Cd=$jscomp.makeIterator(Tb.arr.partition(Cd,function(ue){return ue.itemIndex>xc}));Bd=Cd.next().value;Cd=Cd.next().value;va=[].concat($jscomp.arrayFromIterable(Bd),$jscomp.arrayFromIterable(Cd),$jscomp.arrayFromIterable(va));Nc={fontSize:Nc,fontFamily:pd,fontColor:da||Yd,padding:Qd,borderRadius:ra||0,selectionFontColor:zb,nonSelectionFontColor:da,
selectionColor:cd};va.length&&xc-nc>va.length&&(nc!=va[0].itemIndex?Tb.arr.pushAt(va,cb.addMorph(new Tb.InteractiveItem(Nc)),0):xc!=Tb.arr.last(va).itemIndex&&va.push(cb.addMorph(new Tb.InteractiveItem(Nc))));for(pd=0;pd<xc-nc;pd++){Yd=nc+pd;Qd=ma[Yd];if(!Qd){va.slice(pd).forEach(function(ue){return ue.remove()});break}cd=va[pd];cd||(cd=va[pd]=cb.addMorph(new Tb.InteractiveItem(Nc)),cd.clipMode="visible");cd.displayItem(Qd,Yd,H,la,Tb.pt(0,la*Yd),fb.includes(Yd),Nc);ec=Math.max(ec,cd.width)}la=Math.max(fa+
qb+la*ma.length,Ca.height);fb=Tb.pt(Ca.width,la).subPt(Tb.pt(Fa+uc,0));cb.setBounds(Tb.pt(Fa,fa).extent(fb));sb.left=ec-10;sb.fill=null;sb.top=0;sb.extent=Tb.pt(1,la)}))}},{key:"onHoverIn",value:function(Ca){this.clipMode="auto"}},{key:"onHoverOut",value:function(Ca){this.touchInput||(this.clipMode="hidden")}},{key:"onScroll",value:function(Ca){this.update()}}],[{key:"className",get:function(){return"MorphList"}},{key:"properties",get:function(){return{touchInput:{get:function(){return Tb.touchInputDevice}},
items:{group:"list",defaultValue:[],after:["submorphs"],set:function(Ca){this.setProperty("items",Ca.map(Tb.asItem));this.itemMorphs.forEach(function(ma){return ma.remove()});this.update();this.attributeConnections&&Tb.signal(this,"values",this.values)}}}}}],Cb,{pathInPackage:function(){return"interactive.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"typeshift.components",
version:"0.1.0"}}},{start:4647,end:9874})}(Tb.List);Tb.MorphList=I;Tb.MorphList=I;Tb.MorphList=I;I=function(qc){var Cb=lively.FreezerRuntime.recorderFor("typeshift.components/interactive.js"),za=Cb.hasOwnProperty("InteractiveMorph")&&"function"===typeof Cb.InteractiveMorph?Cb.InteractiveMorph:Cb.InteractiveMorph=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rc(za,qc,[{key:"commands",get:function(){var Ca=this;
return[{name:"resize on client",exec:function(){Ca.extent=Tb.pt(window.innerWidth,window.innerHeight);Ca.position=Tb.pt(0,0);Ca.adjustScale()}}]}},{key:"adjustScale",value:function(){var Ca=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ma){if(1==ma.nextAddress)return ma.yield(Ca.whenRendered(),2);if(3!=ma.nextAddress)return ma.yield(Tb.promise.delay(Ca.checkDelay),3);$world.scale=window.innerWidth/window.outerWidth;ma.jumpToEnd()})}},{key:"menuItems",value:function(){var Ca=this,
ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(la){if(1==la.nextAddress)return la.yield(Rc._get(Object.getPrototypeOf(za.prototype),"menuItems",Ca).call(Ca),2);ma=la.yieldResult;ma[Tb.arr.findIndex(ma,function(va){return"Open in..."==va[0]})]=["Open in...",[["Window",function(){Ca.openInWindow()}],["Prototype Box",function(){Ca.world().execCommand("open in prototype box",{target:Ca})}]]];return la.return(ma)})}},{key:"cleanAnchors",value:function(){this.ui.texts.map(function(Ca){return Ca.anchors.filter(function(ma){return!ma.id}).forEach(function(ma){return Ca.removeAnchor(ma)})})}},
{key:"resizeToMobile",value:function(){this.extent=Tb.pt(375,667)}},{key:"resizeToDesktop",value:function(){this.extent=Tb.pt(1024,720)}}],[{key:"className",get:function(){return"InteractiveMorph"}},{key:"properties",get:function(){return{loadingScreen:{},crawlerScreen:{},title:{initialize:function(){this.title=this.name}},checkDelay:{readOnly:!0,get:function(){return 300}},__crawler_html__:{derived:!0,get:function(){return this.crawlerScreen&&this.crawlerScreen.html}},__loading_html__:{derived:!0,
get:function(){if(!this.loadingScreen)return null;var Ca=this.loadingScreen,ma=Ca.html,la=Ca.id;Ca=Ca.document.getElementById("css-for-"+la);return"\n            "+(Ca?Ca.outerHTML:"")+'\n            <div id="'+la+'" style="position: absolute; z-index: 1; height: 100%; width: 100%;">\n            '+ma+"\n            </div>\n          "}},ui:{derived:!0,get:function(){var Ca={},ma={};if(lively.FreezerRuntime&&this._ui)return this._ui;this.withAllSubmorphsDoExcluding(function(la){Ca[Tb.string.camelize(la.name.split(" ").join("-"))]=
la;var va=la.constructor.className;va=va.charAt(0).toLowerCase()+va.slice(1)+"s";var cb=ma[va]||[];cb.push(la);ma[va]=cb},function(la){return la.ignoreScope});return this._ui=Object.assign({},Ca,{},ma)}}}}}],Cb,{pathInPackage:function(){return"interactive.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"typeshift.components",version:"0.1.0"}}},{start:9883,end:13100})}(Tb.Morph);
Tb.InteractiveMorph=I;Tb.InteractiveMorph=I;Tb.InteractiveMorph=I;var T=lively.FreezerRuntime.recorderFor("WorldDashboard/index.js");T.Morph=Eb;T.HorizontalLayout=Tc;T.VerticalLayout=zc;T.morph=wd;T.MorphicDB=Fc;T.arr=Mc;T.fun=Jb;T.string=Jc;T.Color=Xc;T.pt=Ra;T.UserUI=fc;T.resource=Ac;I=function(qc){var Cb=lively.FreezerRuntime.recorderFor("WorldDashboard/index.js"),za=Cb.hasOwnProperty("WorldDashboard")&&"function"===typeof Cb.WorldDashboard?Cb.WorldDashboard:Cb.WorldDashboard=function(Ca){Ca&&
Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rc(za,qc,[{key:"focus",value:function(){this.ui.searchField.focus()}},{key:"update",value:function(){this.displayWorlds()}},{key:"beforePublish",value:function(){this.reset()}},{key:"reset",value:function(){this.ui.worldList.items=[]}},{key:"relayout",value:function(){this.alignInWorld()}},{key:"alignInWorld",value:function(Ca){Ca=void 0===Ca?$world:Ca;this.owner!=Ca&&Ca.addMorph(this);
this.center=Ca.visibleBounds().center()}},{key:"sortAndFilterPreviews",value:function(Ca){var ma=T.UserUI.getCurrentUser();Ca=this.ui.searchField.fuzzyFilter(Ca,function(la){return la._commit.name+la._commit.description});switch(this.ui.sortSelector.selection){case "RECENT":return T.arr.sortBy(Ca,function(la){return-la._commit.timestamp});case "TEMPLATES":return Ca;case "MY PROJECTS":return T.arr.filter(Ca,function(la){return la._commit.author.name===ma.name});case "PUBLISHED":return Ca}}},{key:"updateList",
value:function(){var Ca=this;this.previews&&T.fun.debounceNamed("update world list",150,function(){Ca.ui.worldList.items=Ca.sortAndFilterPreviews(Ca.previews)})()}},{key:"displayWorlds",value:function(){var Ca=this,ma,la,va,cb,fb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ec){switch(ec.nextAddress){case 1:return Ca.reset(),ma=Ca.ui,la=ma.loadingLabel,la.visible=!0,la.animate({opacity:1,duration:300}),ec.yield(Ca.db.latestCommits("world"),2);case 2:return va=ec.yieldResult,ec.yield(db.import("./world preview-9c3f761e.js"),
4);case 4:if(!(cb=ec.yieldResult)){ec.jumpTo(5);break}return ec.yield(T.resource("part://partial freezing/world preview"),6);case 6:cb=ec.yieldResult;case 5:return ec.yield(cb.read(),3);case 3:return fb=ec.yieldResult,Ca.previews=va.map(function(Nc){var pd=T.morph({reactsToPointer:!1,fill:T.Color.transparent,extent:Ca.previewProto.extent});pd._commit=Nc;pd.displayPreview=function(){var Yd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(uc){if(1==uc.nextAddress)return Yd=fb.copy(),Yd._commit=
Nc,Yd.opacity=0,pd.addMorph(Yd),Yd.displayPreview(),Yd.position=T.pt(0,0),uc.yield(pd.whenRendered(),2);pd.layout=new T.HorizontalLayout({autoResize:!0,reactToSubmorphAnimations:!0});uc.jumpToEnd()})};return pd}),ec.yield(la.animate({opacity:0,duration:300}),7);case 7:la.visible=!1,Ca.updateList(),ec.jumpToEnd()}})}},{key:"createNewProject",value:function(){document.location="/worlds/load?name=__newWorld__"}}],[{key:"className",get:function(){return"WorldDashboard"}},{key:"properties",get:function(){return{previewProto:{},
showCloseButton:{derived:!0,get:function(){return this.ui.closeButton.visible},set:function(Ca){this.ui.closeButton.visible=Ca}},db:{get:function(){return T.MorphicDB.default}},ui:{derived:!0,get:function(){return{worldList:this.getSubmorphNamed("world list"),sortSelector:this.getSubmorphNamed("search selector"),searchField:this.getSubmorphNamed("search field"),closeButton:this.getSubmorphNamed("close button"),loadingLabel:this.getSubmorphNamed("loading label")}}}}}}],Cb,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"WorldDashboard",version:"0.1.1-119"}}},{start:330,end:3712})}(T.Morph);I=T.WorldDashboard;T.default=I;var qa=lively.FreezerRuntime.recorderFor("GrowingWorldList/index.js");qa.Morph=Eb;qa.touchInputDevice=Wb;qa.TilingLayout=Bc;qa.arr=Mc;qa.pt=Ra;I=function(qc){var Cb=lively.FreezerRuntime.recorderFor("GrowingWorldList/index.js"),
za=Cb.hasOwnProperty("GrowingWorldList")&&"function"===typeof Cb.GrowingWorldList?Cb.GrowingWorldList:Cb.GrowingWorldList=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rc(za,qc,[{key:"onLoad",value:function(){this.clipMode="auto"}},{key:"onScroll",value:function(Ca){Rc._get(Object.getPrototypeOf(za.prototype),"onScroll",this).call(this,Ca);this.update()}},{key:"onChange",value:function(Ca){Rc._get(Object.getPrototypeOf(za.prototype),
"onChange",this).call(this,Ca);"extent"==Ca.prop&&this.update(!0)}},{key:"onHoverIn",value:function(Ca){this.clipMode="auto"}},{key:"onHoverOut",value:function(Ca){qa.touchInputDevice||(this.clipMode="hidden")}},{key:"update",value:function(Ca){var ma=this.items;if(ma&&0!=ma.length){var la=this.scrollContainer,va=la.layout.spacing;la.extent=this.extent;var cb=this.ui,fb=cb.bufferTop;cb=cb.bufferBottom;fb=fb||la.addMorph({fill:null,name:"buffer top",height:10});cb=cb||la.addMorph({fill:null,name:"buffer bottom",
height:10});fb.width=cb.width=this.width-100;la.layout.disable();var ec=ma[0];va=ma.slice(0,Math.floor(this.width/(ec.width+va))*(Math.ceil((this.scroll.y+this.height)/(ec.height+va))+1)).filter(function(uc){return uc.owner!=la});ec=this.scroll.y+2*this.height;for(var Nc={},pd=$jscomp.makeIterator(va),Yd=pd.next();!Yd.done;Nc={$jscomp$loop$prop$item$2280:Nc.$jscomp$loop$prop$item$2280},Yd=pd.next())Nc.$jscomp$loop$prop$item$2280=Yd.value,ec++,Nc.$jscomp$loop$prop$item$2280.top=ec,la.addMorph(Nc.$jscomp$loop$prop$item$2280),
Nc.$jscomp$loop$prop$item$2280._initialized||Nc.$jscomp$loop$prop$item$2280.whenRendered().then(function(uc){return function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qd){uc.$jscomp$loop$prop$item$2280._initialized=!0;return Qd.yield(uc.$jscomp$loop$prop$item$2280.displayPreview(),0)})}}(Nc));Ca&&(fb.position=qa.pt(0,0),ma.forEach(function(uc,Qd){return uc.position=qa.pt(Qd+1,Qd+1)}),cb.position=qa.pt(ma.length+2,ma.length+2));la.layout.enable();if(Ca||0<va.length)cb.top=this.submorphBounds().height,
la.layout.apply()}}}],[{key:"className",get:function(){return"GrowingWorldList"}},{key:"properties",get:function(){return{scrollContainer:{get:function(){return this.getSubmorphNamed("scroll container")||this.addMorph({name:"scroll container",fill:null,reactsToPointer:!1,renderOnGPU:!0,layout:new qa.TilingLayout({spacing:25,align:"center",autoResize:!0})})}},ui:{get:function(){return{bufferTop:this.getSubmorphNamed("buffer top"),bufferBottom:this.getSubmorphNamed("buffer bottom")}}},items:{after:["layout",
"scrollContainer"],set:function(Ca){this.setProperty("items",Ca);var ma=this.scrollContainer;ma.layout&&ma.layout.disable();var la=this.ui,va=la.bufferTop;la=la.bufferBottom;qa.arr.withoutAll(ma.submorphs,[].concat($jscomp.arrayFromIterable(Ca),[va,la])).forEach(function(cb){return cb.remove()});this.update(!0)}}}}}],Cb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"GrowingWorldList",version:"0.1.1-32"}}},{start:179,end:3777})}(qa.Morph);I=qa.GrowingWorldList;qa.default=I;var Ga=lively.FreezerRuntime.recorderFor("SearchInputLine/index.js");Ga.InputLine=fd;Ga.Color=Xc;Ga.connect=Qb;Ga.disconnectAll=xb;Ga.disconnect=eb;Ga.arr=Mc;Ga.string=Jc;I=function(qc){var Cb=lively.FreezerRuntime.recorderFor("SearchInputLine/index.js"),za=Cb.hasOwnProperty("SearchInputLine")&&"function"===typeof Cb.SearchInputLine?Cb.SearchInputLine:Cb.SearchInputLine=
function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rc(za,qc,[{key:"fuzzyMatch",value:function(Ca,ma){ma=void 0===ma?this.parseInput():ma;if(ma.lowercasedTokens.every(function(va){return Ca.toLowerCase().includes(va)}))return!0;var la=Ca.toLowerCase();return 3>=Ga.arr.sum(ma.lowercasedTokens.map(function(va){return Ga.string.levenshtein(la,va)}))}},{key:"fuzzyFilter",value:function(Ca,ma){var la=this;ma=void 0===
ma?function(cb){return cb}:ma;var va=this.parseInput();return Ga.arr.filter(Ca,function(cb){return la.fuzzyMatch(ma(cb),va)})}},{key:"parseInput",value:function(){var Ca=Array.from(this.textString).reduce(function(la,va){if("\\"===va&&!la.escaped)return la.escaped=!0,la;" "!==va||la.escaped?(la.spaceSeen=!1,la.current+=va):(!la.spaceSeen&&la.current&&(la.tokens.push(la.current),la.current=""),la.spaceSeen=!0);la.escaped=!1;return la},{tokens:[],current:"",escaped:!1,spaceSeen:!1});Ca.current&&Ca.tokens.push(Ca.current);
var ma=Ca.tokens.map(function(la){return la.toLowerCase()});return{tokens:Ca.tokens,lowercasedTokens:ma}}}],[{key:"className",get:function(){return"SearchInputLine"}}],Cb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"SearchInputLine",version:"0.1.1-4"}}},{start:239,end:1834})}(Ga.InputLine);I=Ga.SearchInputLine;Ga.default=I;I=lively.FreezerRuntime.recorderFor("StaticText/index.js");
I.HTMLMorph=Vb;var Mb=function(qc){var Cb=lively.FreezerRuntime.recorderFor("StaticText/index.js"),za=Cb.hasOwnProperty("StaticText")&&"function"===typeof Cb.StaticText?Cb.StaticText:Cb.StaticText=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rc(za,qc,[{key:"refresh",value:function(){this.html='<span style="line-height: 1.3; font-size: '+this.fontSize+"px; color: "+this.fontColor+"; font-family: "+this.fontFamily+
'">'+this.value+"</span>"}}],[{key:"className",get:function(){return"StaticText"}},{key:"properties",get:function(){return{html:{isStyleProp:!1},fontSize:{type:"Number",set:function(Ca){this.setProperty("fontSize",Ca);this.refresh()}},fontColor:{type:"Color",set:function(Ca){this.setProperty("fontColor",Ca);this.refresh()}},fontFamily:{type:"Enum",set:function(Ca){this.setProperty("fontFamily",Ca);this.refresh()}},value:{set:function(Ca){this.setProperty("value",Ca);this.refresh()}}}}}],Cb,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StaticText",version:"0.1.1-10"}}},{start:74,end:953})}(I.HTMLMorph);Mb=I.StaticText;I.default=Mb;var nb=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js");nb.Morph=Eb;nb.World=vb;nb.HorizontalLayout=Tc;nb.morph=wd;nb.MorphicDB=Fc;nb.graph=Va;nb.promise=Ad;nb.date=lb;nb.string=Jc;nb.arr=Mc;nb.Color=Xc;nb.pt=Ra;nb.LoadingIndicator=
yb;(function(qc){var Cb=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js"),za=Cb.hasOwnProperty("WorldVersion")&&"function"===typeof Cb.WorldVersion?Cb.WorldVersion:Cb.WorldVersion=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rc(za,qc,[{key:"update",value:function(){var Ca=$jscomp.makeIterator(this.submorphs),ma=Ca.next().value;Ca=Ca.next().value;ma.imageUrl=this.commit.preview;Ca.textAndAttributes=
this.info;Ca.fontColor=this.selected?nb.Color.white:nb.Color.darkGray}}],[{key:"className",get:function(){return"WorldVersion"}},{key:"properties",get:function(){return{commit:{},fill:{defaultValue:nb.Color.transparent},info:{derived:!0,get:function(){var Ca=this.commit,ma=Ca.message,la=Ca.name,va=Ca.timestamp;return[Ca._id.slice(0,6)+" ",{fontWeight:"bold"},nb.string.truncate(ma.split("\n")[0],40)+" ",{}," ("+la+" ",{},""+nb.date.format(new Date(va),"yyyy-mm-dd HH:MM Z"),{}]}},selected:{set:function(Ca){this.setProperty("selected",
Ca);this.update()}},layout:{initialize:function(){this.layout=new nb.HorizontalLayout({align:"center",spacing:5})}},submorphs:{initialize:function(){this.submorphs=[{type:"image",extent:nb.pt(30,30),name:"preview",reactsToPointer:!1},{reactsToPointer:!1,type:"label",fill:null,name:"commit info",fontFamily:"Nunito",fontColor:nb.Color.gray}]}}}}}],Cb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"WorldVersionViewer",version:"0.1.1-33"}}},{start:274,end:1824})})(nb.Morph);I=function(qc){var Cb=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js"),za=Cb.hasOwnProperty("WorldVersionViewer")&&"function"===typeof Cb.WorldVersionViewer?Cb.WorldVersionViewer:Cb.WorldVersionViewer=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rc(za,qc,[{key:"reset",value:function(){this.getSubmorphNamed("version list").items=
[]}},{key:"onMouseDown",value:function(Ca){switch(Ca.targetMorph.name){case "visit button":this.visitSelectedCommit();break;case "revert button":this.revertToSelectedCommit()}}},{key:"visitSelectedCommit",value:function(){var Ca=this,ma,la,va,cb,fb,ec,Nc,pd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Yd){switch(Yd.nextAddress){case 1:return ma=Ca.get("version list").selection,la=nb.LoadingIndicator.open("Loading "+ma.name+"..."),va=$world,cb=Ca.db||nb.MorphicDB.default,fb=ma._id,Yd.setCatchFinallyBlocks(2,
3),fb?Yd.yield(nb.World.loadFromCommit(fb,void 0,{morphicDB:cb}),8):Yd.yield(nb.World.loadFromDB(ma.name,ma.ref,void 0,{morphicDB:cb}),7);case 7:ec=Yd.yieldResult;Yd.jumpTo(6);break;case 8:ec=Yd.yieldResult;case 6:return Nc=ec,Yd.return(Nc);case 3:Yd.enterFinallyBlock();la.remove();Yd.leaveFinallyBlock(0);break;case 2:pd=Yd.enterCatchBlock(),console.error(pd),va.showError("Error loading world:"+pd),Yd.jumpTo(3)}})}},{key:"revertToSelectedCommit",value:function(){var Ca=this,ma,la,va,cb,fb,ec;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nc){if(1==
Nc.nextAddress){ma=Ca.get("version list").selection;if(!ma)return Nc.return();la=Ca.db||nb.MorphicDB.default;va=ma;cb=va._id;fb=va.name;ec=va.type;return Nc.yield(la.revert(ec,fb,cb,"HEAD"),2)}return Nc.return(Ca.initializeFromStartCommit(ma,la,{showRevertButton:!0}))})}},{key:"initializeFromStartCommit",value:function(Ca,ma,la){ma=void 0===ma?nb.MorphicDB.default:ma;la=void 0===la?{}:la;var va=this,cb,fb,ec,Nc,pd,Yd,uc,Qd,cd,zb,da,ra,sb,H,fa,Fa,qb,nc,xc,Bd,Cd,ue,jd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gd){switch(Gd.nextAddress){case 1:return cb=
la,fb=void 0===cb.showRefs?!0:cb.showRefs,ec=va.startCommit=Ca,Nc=ec._id,pd=ec.type,Yd=ec.name,uc=va.getSubmorphNamed("version list spinner"),uc.visible=!0,uc.center=va.get("version list").center,va.db=ma,Gd.yield(ma.history(pd,Yd),2);case 2:Qd=Gd.yieldResult,cd=Qd.refs,zb=Qd.history,da=Nc,ra=nb.graph.invert(zb),sb=nb.graph.hull(ra,Nc),H={_id:!0},fa=[Ca],Fa=$jscomp.makeIterator(sb),qb=Fa.next();case 3:if(qb.done)return Bd=nb.arr.max(fa,function(re){return re.timestamp}),da=Bd._id,Gd.yield(ma.log(da,
void 0,!0),7);nc=qb.value;return Gd.yield(ma.log(nc,void 0,!0,H),6);case 6:xc=Gd.yieldResult;fa.push.apply(fa,$jscomp.arrayFromIterable(xc));xc.forEach(function(re){return H[re._id]=!0});qb=Fa.next();Gd.jumpTo(3);break;case 7:Cd=Gd.yieldResult;if(fb)for(ue in cd);jd=Cd.map(function(re){var He=new nb.WorldVersion({reactsToPointer:!1,commit:re});He.update();return{isListItem:!0,morph:He,value:re}});va.get("version list").items=jd;uc.visible=!1;Gd.jumpToEnd()}})}}],[{key:"className",get:function(){return"WorldVersionViewer"}}],
Cb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"WorldVersionViewer",version:"0.1.1-33"}}},{start:1841,end:5600})}(nb.Morph);I=nb.WorldVersionViewer;nb.default=I;var Ha=lively.FreezerRuntime.recorderFor("WorldPreview/index.js");Ha.Morph=Eb;Ha.date=lb;Ha.string=Jc;Ha.promise=Ad;Ha.obj=Zb;Ha.morph=wd;Ha.MorphicDB=Fc;Ha.World=vb;Ha.easings=
Sb;Ha.Rectangle=qd;Ha.pt=Ra;Ha.LoadingIndicator=yb;Ha.loadViaScript=$a;Ha.resource=Ac;Ha.loadPart=bb;I=function(qc){var Cb=lively.FreezerRuntime.recorderFor("WorldPreview/index.js"),za=Cb.hasOwnProperty("WorldPreview")&&"function"===typeof Cb.WorldPreview?Cb.WorldPreview:Cb.WorldPreview=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rc(za,qc,[{key:"relayout",value:function(){this.setBounds(this.world().visibleBounds())}},
{key:"onLoad",value:function(){this.ui.spinner.visible=!1}},{key:"displayPreview",value:function(){var Ca=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ma){return ma.yield(Ca.initWithCommit(Ca._commit),0)})}},{key:"initWithCommit",value:function(Ca){var ma=this,la,va,cb,fb,ec,Nc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pd){if(1==pd.nextAddress)return la=ma.ui,va=la.preview,cb=la.timestamp,fb=la.title,ec=la.description,Nc=la.previewContainer,ma.opacity=.5,Nc.opacity=
0,pd.yield(ma.whenRendered(),2);if(3!=pd.nextAddress)return ma._commit=Ca,va.imageUrl=Ca.preview,cb.value=[Ca.author.name,{fontSize:13,fontWeight:"bold",paddingTop:"1px"},Ha.date.format(Ca.timestamp," - d.m.yy HH:MM"),{fontWeight:"bold",fontSize:12,paddingTop:"2px"}],fb.value=Ha.string.truncate(Ca.name,18,"..."),ec.value=Ca.description,pd.yield(ma.whenRendered(),3);Nc.opacity=1;ma.animate({opacity:1,duration:300});pd.jumpToEnd()})}},{key:"openAnimated",value:function(Ca){Ca=void 0===Ca?$world.visibleBounds():
Ca;var ma=this,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(va){switch(va.nextAddress){case 1:return la=Ha.morph(Object.assign({},ma.spec(),{reactsToPointer:!1,renderOnGPU:!0,submorphs:[ma.ui.spinner.spec()]})).openInWorld(),la.hasFixedPosition=!0,la.globalPosition=ma.globalPosition,la.opacity=0,va.yield(la.whenRendered(),2);case 2:return va.yield(la.animate({opacity:1,duration:300}),3);case 3:return la.dropShadow=!1,la.animate({bounds:Ca,borderRadius:0,duration:500,easing:Ha.easings.inOutQuint}),
la.respondsToVisibleWindow=!0,va.yield(la.ui.spinner.animate({center:la.innerBounds().center(),duration:500,easing:Ha.easings.inOutQuint}),4);case 4:return va.yield(Ha.promise.delay(1E3),5);case 5:return va.return(la)}})}},{key:"openWorld",value:function(){var Ca=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ma){if(1==ma.nextAddress)return ma.yield(Ca.openAnimated(),2);Ca.loadWorld();ma.jumpToEnd()})}},{key:"loadWorld",value:function(){var Ca=this,ma,la,va,cb,fb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ec){if(1==
ec.nextAddress){ma=Ca._commit;la=ma._id;va=ma.name;if(lively.FreezerRuntime)return cb=Ha.LoadingIndicator.open("...starting bootstrap process...",{animated:!0,delay:1E3}),Ca.transitionToLivelyWorld(document.location.origin,Ca._commit,cb),ec.return();fb=Ha.LoadingIndicator.open("loading "+va);return ec.yield(Ha.World.loadFromCommit(la,void 0,{morphicDB:Ha.MorphicDB.default}),3)}fb.remove();ec.jumpToEnd()})}},{key:"transitionToLivelyWorld",value:function(Ca,ma,la){var va,cb,fb,ec;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nc){switch(Nc.nextAddress){case 1:return Nc.yield(db.import("./[PART_MODULE]package loading progress indicator-503e8cd3.js"),
2);case 2:if(!(va=Nc.yieldResult)){Nc.jumpTo(3);break}return Nc.yield(window.loadCompiledFrozenPart("package loading progress indicator"),4);case 4:va=Nc.yieldResult;case 3:return cb=va,Nc.yield(Promise.resolve().then(function(){return Qc}),5);case 5:return fb=Nc.yieldResult,ec=fb.bootstrap,Nc.yield(ec({commit:ma,loadingIndicator:la,progress:cb}),0)}})}},{key:"showVersions",value:function(){var Ca=this,ma,la,va,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fb){if(1==fb.nextAddress)return ma=
Ha.easings.inOutExpo,la=Ca.ui,va=la.previewContainer,cb=Ca.versionContainer,Ca.addMorph(cb),cb.reactsToPointer=cb.visible=!0,cb.initializeFromStartCommit(Ca._commit),Ca.animate({width:515,duration:200,easing:ma}),va.animate({opacity:0,duration:200}),fb.yield(cb.animate({opacity:1,duration:200}),2);va.reactsToPointer=va.visible=!1;fb.jumpToEnd()})}},{key:"hideVersions",value:function(){var Ca=this,ma,la,va,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fb){if(1==fb.nextAddress)return ma=
Ha.easings.inOutExpo,la=Ca.ui,va=la.previewContainer,cb=Ca.versionContainer,va.reactsToPointer=va.visible=!0,Ca.animate({width:245,duration:200,easing:ma}),va.animate({opacity:1,duration:200}),fb.yield(cb.animate({opacity:0,duration:200}),2);cb.reset();cb.remove();fb.jumpToEnd()})}},{key:"toggleDeleteButton",value:function(Ca){this.ui.deleteButton.visible=Ca}},{key:"onHoverIn",value:function(Ca){this.toggleDeleteButton(!0)}},{key:"onHoverOut",value:function(Ca){this.toggleDeleteButton(!1)}},{key:"tryToDelete",
value:function(){var Ca=this.ui.previewContainer,ma=this.deleteWorldPrompt;this.addMorph(ma);ma.visible=!0;ma.animate({top:0,left:0,opacity:1,duration:100});Ca.animate({opacity:.3,duration:100})}},{key:"confirmDelete",value:function(){}},{key:"cancelDelete",value:function(){var Ca=this,ma,la,va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==cb.nextAddress)return ma=Ca.ui,la=ma.previewContainer,va=Ca.deleteWorldPrompt,la.animate({opacity:1,duration:300}),cb.yield(va.animate({opacity:0,
duration:300}),2);va.remove();cb.jumpToEnd()})}},{key:"onMouseUp",value:function(Ca){var ma=this.ui,la=ma.openButton,va=ma.versionButton,cb=ma.deleteButton,fb=ma.closeVersionsButton,ec=ma.cancelDeleteButton;ma=ma.confirmDeleteButton;switch(Ca.targetMorph){case la:this.openWorld();break;case va:this.showVersions();break;case cb:this.tryToDelete();break;case fb:this.hideVersions();break;case ma:this.confirmDelete();break;case ec:this.cancelDelete()}}}],[{key:"className",get:function(){return"WorldPreview"}},
{key:"properties",get:function(){return{deleteWorldPrompt:{set:function(Ca){Ca.isMorph||(Ca=Ha.morph(Ca));this.setProperty("deleteWorldPrompt",Ca)}},versionContainer:{set:function(Ca){Ca.isMorph||(Ca=Ha.morph(Ca));this.setProperty("versionContainer",Ca)}},ui:{readOnly:!0,get:function(){return{previewContainer:this.getSubmorphNamed("preview container"),versionContainer:this.getSubmorphNamed("version container"),preview:this.getSubmorphNamed("preview"),timestamp:this.getSubmorphNamed("timestamp"),title:this.getSubmorphNamed("title"),
description:this.getSubmorphNamed("description"),openButton:this.getSubmorphNamed("open button"),versionButton:this.getSubmorphNamed("version button"),spinner:this.getSubmorphNamed("spinner"),deleteButton:this.getSubmorphNamed("delete button"),closeVersionsButton:this.getSubmorphNamed("close versions button"),versionList:this.getSubmorphNamed("version list"),deleteWorldPrompt:this.getSubmorphNamed("delete world prompt"),cancelDeleteButton:this.getSubmorphNamed("cancel delete button"),confirmDeleteButton:this.getSubmorphNamed("confirm delete button")}}}}}}],
Cb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"WorldPreview",version:"0.1.1-198"}}},{start:444,end:7718})}(Ha.Morph);I=Ha.WorldPreview;Ha.default=I;var kb=lively.FreezerRuntime.recorderFor("WorldPreview/bootstrap.js");kb.bootstrap=bc;kb.fastPrepLivelySystem=function(qc){return Promise.resolve().then(function(){qc.status="starting fast system preparation..."}).then(function(){return kb.resource(document.location.origin).join("package-registry.json").readJson()}).then(function(Cb){System["__lively.modules__packageRegistry"]=
lively.modules.PackageRegistry.fromJSON(System,Cb);return System}).then(function(){return kb.loadViaScript("/lively.user/dist/lively.user-client.js")})};kb.installFetchHook=function(qc){lively.modules.installHook("fetch",function(Cb,za){kb.loads++;qc.status="loading "+kb.string.truncateLeft(za.name.replace(window.System.baseURL,""),25,"...");qc.progress=kb.loads/(800-4*Object.keys(kb.extractedModules).length);qc.center=$world.innerBounds().center();return Cb(za)})};kb.extractModules=function(qc){Object.keys(lively.FreezerRuntime.registry).filter(function(Cb){return Cb.startsWith(qc)}).forEach(function(Cb){kb.extractedModules[window.origin+
"/"+Cb]=Object.assign({},lively.FreezerRuntime.registry[Cb].exports)})};kb.loadComponents=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(qc){switch(qc.nextAddress){case 1:return qc.yield(db.import("./world-eabf27af.js"),2);case 2:return qc.yield(db.import("./editor-plugin-70198a84.js").then(function(Cb){return Cb.e}),3);case 3:return qc.yield(db.import("./editor-plugin-61509a8b.js"),4);case 4:return qc.yield(db.import("./index-a98bf65c.js"),5);case 5:return qc.yield(db.import("./client-command-2bd55d63.js"),
6);case 6:return qc.yield(db.import("./client-resource-3ba1457a.js"),7);case 7:return qc.yield(db.import("./__root_module__-f9290433.js").then(function(Cb){return Cb.bZ}),8);case 8:kb.extractModules("lively.bindings"),kb.extractModules("lively.shell"),kb.extractModules("lively.ide"),kb.extractModules("lively.components"),qc.jumpToEnd()}})};kb.bootstrapLivelySystem=function(qc,Cb,za){return Promise.resolve().then(function(){qc.status="starting bootstrap process..."}).then(function(){var Ca,ma,la,va,
cb,fb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ec){switch(ec.nextAddress){case 1:return ec.yield(Cb.whenRendered(),2);case 2:if("frozen"!=za["lively.lang"]){ec.jumpTo(3);break}return ec.yield(db.import("./__root_module__-f9290433.js").then(function(Nc){return Nc.bW}),4);case 4:Ca=ec.yieldResult,kb.extractModules("lively.lang"),Cb.finishPackage({packageName:"lively.lang",frozen:!0}),delete Ca._prevLivelyGlobal;case 3:if("frozen"!=za["lively.ast"]){ec.jumpTo(5);break}ma=lively;return ec.yield(db.import("./__root_module__-f9290433.js").then(function(Nc){return Nc.bs}),
6);case 6:ma.ast=ec.yieldResult,kb.extractModules("lively.ast"),Cb.finishPackage({packageName:"lively.ast",frozen:!0});case 5:if("frozen"!=za["lively.source-transform"]){ec.jumpTo(7);break}la=lively;return ec.yield(db.import("./__root_module__-f9290433.js").then(function(Nc){return Nc.bX}),8);case 8:la.sourceTransform=ec.yieldResult,kb.extractModules("lively.source-transform"),Cb.finishPackage({packageName:"lively.source-transform",frozen:!0});case 7:if("frozen"!=za["lively.classes"]){ec.jumpTo(9);
break}return ec.yield(db.import("./object-classes-8d489d0d.js"),10);case 10:return va=lively,ec.yield(db.import("./__root_module__-f9290433.js").then(function(Nc){return Nc.c0}),11);case 11:va.classes=ec.yieldResult,kb.extractModules("lively.class"),Cb.finishPackage({packageName:"lively.classes",frozen:!0});case 9:if("frozen"!=za["lively.vm"]){ec.jumpTo(12);break}cb=lively;return ec.yield(db.import("./__root_module__-f9290433.js").then(function(Nc){return Nc.bw}),13);case 13:cb.vm=ec.yieldResult,
kb.extractModules("lively.vm"),Cb.finishPackage({packageName:"lively.vm",frozen:!0});case 12:if("frozen"!=za["lively.modules"]){ec.jumpTo(14);break}return ec.yield(db.import("./__root_module__-f9290433.js").then(function(Nc){return Nc.T}),15);case 15:kb.extractModules("lively.modules"),Cb.finishPackage({packageName:"lively.modules",frozen:!0});case 14:if("frozen"!=za["lively.user"]){ec.jumpTo(16);break}return ec.yield(db.import("./__root_module__-f9290433.js").then(function(Nc){return Nc.c2}),17);
case 17:return ec.yield(db.import("./user-ui-f9ff2404.js"),18);case 18:kb.extractModules("lively.user"),Cb.finishPackage({packageName:"lively.user",frozen:!0});case 16:if("frozen"!=za["lively.storage"]){ec.jumpTo(19);break}return ec.yield(db.import("./__root_module__-f9290433.js").then(function(Nc){return Nc.c1}),20);case 20:kb.extractModules("lively.storage"),Cb.finishPackage({packageName:"lively.storage",frozen:!0});case 19:if("frozen"!=za["lively.morphic"]){ec.jumpTo(0);break}return ec.yield(db.import("./__root_module__-f9290433.js").then(function(Nc){return Nc.b$}),
22);case 22:return kb.extractModules("lively.resources"),ec.yield(db.import("./client-b70385e5.js"),23);case 23:return ec.yield(db.import("./index-792c91c7.js"),24);case 24:return kb.extractModules("lively.2lively"),ec.yield(db.import("./__root_module__-f9290433.js").then(function(Nc){return Nc.b_}),25);case 25:return kb.extractModules("lively.serializer2"),ec.yield(kb.loadComponents(),26);case 26:return ec.yield(db.import("./index-9e4ab300.js").then(function(Nc){return Nc.i}),27);case 27:return kb.extractModules("lively.halos"),
ec.yield(db.import("./index-5ea42d9a.js"),28);case 28:return kb.extractModules("lively-system-interface"),ec.yield(db.import("./__root_module__-f9290433.js").then(function(Nc){return Nc.bY}),29);case 29:return kb.extractModules("lively.graphics"),fb=lively,ec.yield(db.import("./__root_module__-f9290433.js").then(function(Nc){return Nc.c3}),30);case 30:fb.morphic=ec.yieldResult,kb.extractModules("lively.morphic"),Cb.finishPackage({packageName:"lively.morphic",frozen:!0}),ec.jumpToEnd()}})}).then(function(){var Ca,
ma,la,va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){switch(cb.nextAddress){case 1:return cb.yield(kb.resource(document.location.origin).join("package-registry.json").readJson(),2);case 2:return Ca=cb.yieldResult,cb.yield(kb.loadViaScript("/lively.next-node_modules/babel-standalone/babel.js"),3);case 3:return cb.yield(kb.loadViaScript("/lively.next-node_modules/systemjs/dist/system.src.js"),4);case 4:return window.System.config({baseURL:document.location.origin}),cb.yield(kb.loadViaScript("/lively.modules/systemjs-init.js"),
5);case 5:ma=lively.modules.getSystem("bootstrapped",{baseURL:document.location.origin});lively.modules.changeSystem(ma,!0);ma["__lively.modules__packageRegistry"]=lively.modules.PackageRegistry.fromJSON(ma,Ca);for(la in kb.extractedModules)ma.set(la,ma.newModule(kb.extractedModules[la])),va=lively.modules.module(la),va._recorder=kb.extractedModules[la],va._frozenModule=!0;kb.installFetchHook(qc);cb.jumpToEnd()}})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){if("dynamic"==
za["lively.lang"])return Ca.return(kb.importPackageAndDo("lively.lang",function(ma){Cb.finishPackage({packageName:"lively.lang",loaded:!0});delete ma._prevLivelyGlobal},qc));Ca.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){Cb.animate({opacity:1,easing:kb.easings.outExpo,duration:300});if("dynamic"==za["lively.ast"])return Ca.return(kb.importPackageAndDo("lively.ast",function(ma){Cb.finishPackage({packageName:"lively.ast",loaded:!0});lively.ast=ma},
qc));Ca.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){if("dynamic"==za["lively.source-transform"])return Ca.return(kb.importPackageAndDo("lively.source-transform",function(ma){Cb.finishPackage({packageName:"lively.source-transform",loaded:!0});lively.sourceTransform=ma},qc));Ca.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){if("dynamic"==za["lively.classes"])return Ca.return(kb.importPackageAndDo("lively.classes",
function(ma){Cb.finishPackage({packageName:"lively.classes",loaded:!0});lively.classes=ma},qc));Ca.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){if("dynamic"==za["lively.vm"])return Ca.return(kb.importPackageAndDo("lively.vm",function(ma){Cb.finishPackage({packageName:"lively.vm",loaded:!0});lively.vm=ma},qc));Ca.jumpToEnd()})}).then(function(){function Ca(ma){lively.modules=ma;lively.modules.unwrapModuleLoad();lively.modules.unwrapModuleResolution();
lively.modules.wrapModuleLoad();lively.modules.wrapModuleResolution();kb.installFetchHook(qc);var la=System["__lively.modules__packageRegistry"];delete System["__lively.modules__packageRegistry"];ma=System["__lively.modules__packageRegistry"]=ma.PackageRegistry.ofSystem(System);Object.assign(ma,kb.obj.select(la,["packageMap","individualPackageDirs","devPackageDirs","packageBaseDirs"]));ma.resetByURL();la=ma.allPackages();var va=lively.modules.module("lively.modules/src/packages/package.js").recorder.Package;
la.filter(function(fb){return!fb.constructor[Symbol.for("lively-module-meta")]}).forEach(function(fb){kb.adoptObject(fb,va)});la=Object.values(System["__lively.modules__loadedModules"]);var cb=lively.modules.module("lively.modules/src/module.js").recorder.ModuleInterface;la.filter(function(fb){return!fb.constructor[Symbol.for("lively-module-meta")]}).forEach(function(fb){kb.adoptObject(fb,cb)})}return $jscomp.asyncExecutePromiseGeneratorProgram(function(ma){if(1==ma.nextAddress)return"frozen"==za["lively.modules"]?
(System._scripting=lively.modules.scripting,ma.jumpTo(2)):ma.yield(kb.importPackageAndDo("lively.modules",Ca,qc),2);Cb.finishPackage({packageName:"lively.modules",loaded:!0});ma.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){if("dynamic"==za["lively.user"])return Ca.return(kb.importPackageAndDo("lively.user",function(ma){Cb.finishPackage({packageName:"lively.user",loaded:!0});lively.user=ma},qc));Ca.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){if("dynamic"==
za["lively.storage"])return Ca.return(kb.importPackageAndDo("lively.storage",function(ma){Cb.finishPackage({packageName:"lively.storage",loaded:!0});lively.storage=ma},qc));Ca.jumpToEnd()})})};kb.importPackageAndDo=function(qc,Cb,za){var Ca=qc.split("/").slice(-1)[0];za.label="loading "+Ca;return lively.modules.importPackage(qc).then(Cb||function(){})};kb.polyfills=function(){var qc=[];"PointerEvent"in window||qc.push(kb.loadViaScript(document.location.origin+"/lively.next-node_modules/pepjs/dist/pep.js"));
"fetch"in window||qc.push(kb.loadViaScript("//cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.js"));return Promise.all(qc)};kb.resource=Ac;kb.loadViaScript=$a;kb.promise=Ad;kb.string=Jc;kb.obj=Zb;kb.modulePackage=Kb;kb.easings=Sb;kb.adoptObject=wc;kb.Color=Xc;lively.modules=kb.modulePackage;kb.loginDone=!0;kb.doBootstrap=!0;kb.askBeforeQuit=!0;kb.worldLoaded=!1;kb.bootstrap=bc;kb.bootstrap=bc;kb.loads=0;kb.extractedModules={};var Qc=Object.freeze({__proto__:null,bootstrap:bc})}}});