System.register("./__rootModule___commonjs-entry-71573ff5.js ./editor-plugin-330ed4ee.js ./index-d18accbd.js ./object-classes-c0823978.js ./import-helper-2f69328f.js ./index-ca98f65e.js ./index-c79abca0.js ./index-1c08552a.js ./ui.cp-6289a670.js ./index-5053c530.js ./value-widgets-6cb12552.js ./loading-indicator.cp-b18e3b89.js ./linter-9c18bc15.js ./messages.cp-7a7411e4.js ./list.cp-8569fe93.js @babel/plugin-syntax-import-meta ./mode-9e103dc6.js ./editor-modes-5e094c88.js ./editor-plugin-0a8dd45b.js ./interface-dc23a2c8.js ./tooltips.cp-6a2406c0.js ./popups.cp-68dc8a4a.js ./service-worker-8e670339.js rollup @rollup/plugin-json ./helpers-ae531c72.js @rollup/plugin-commonjs rollup-plugin-polyfill-node".split(" "),function(Lc,
pd){var Nd,Tc,Jc,$d,Bb,rd,Id,Ac,Pc,gd,nd,Fd,ic,vd,sb,Xb,Nb,bc,hb,cb,Hb,ec,ub,yb,ba,wb,Xa,Za,Sb,Cb,Da,zb,db,ib,Ea,W,T,ia,ka,K,ya,pb,La,eb,jb,E,Wb,R,xb,Ja,Ga,sa,Ub,vc,Oc,aa,Ma,qb,Vb,Lb,Kb,Db,Ra,N,va,Wa,pa,tb,ab,Ob,yc,Ta,Bd,Eb,fe,Od,Hd,Qc,Xd,oc,rf,Dd,ld,Td,gb;return{setters:[function(Vc){Nd=Vc.j;Tc=Vc.ab;Jc=Vc.c2;$d=Vc.I;Bb=Vc.i;rd=Vc.y;Id=Vc.a9;Ac=Vc.c3;Pc=Vc.k;gd=Vc.n;nd=Vc.d;Fd=Vc.l;ic=Vc.B;vd=Vc.ar;sb=Vc.ay;Xb=Vc.c0;Nb=Vc.bE;bc=Vc.b7;hb=Vc.bC;cb=Vc._;Hb=Vc.C;ec=Vc.r;ub=Vc.b;yb=Vc.w;ba=Vc.X;wb=Vc.v;
Xa=Vc.M;Za=Vc.Y;Sb=Vc.O;Cb=Vc.H;Da=Vc.q;zb=Vc.L;db=Vc.A;ib=Vc.aJ;Ea=Vc.x;W=Vc.G;T=Vc.f;ia=Vc.aG;ka=Vc.ae;K=Vc.ag;ya=Vc.c4;pb=Vc.c5;La=Vc.g;eb=Vc.V;jb=Vc.c;E=Vc.p;Wb=Vc.T;R=Vc.m},function(Vc){xb=Vc["default"]},function(Vc){Ja=Vc.T;Ga=Vc.b;sa=Vc.j;Ub=Vc.D;vc=Vc._;Oc=Vc.a},function(Vc){aa=Vc.isObjectClass;Ma=Vc.interactivelyForkPackage;qb=Vc.addScript;Vb=Vc["default"]},function(Vc){Lb=Vc.chooseUnusedImports;Kb=Vc.interactivlyFixUndeclaredVariables;Db=Vc.interactivelyChooseImports},function(Vc){Ra=Vc.e;
N=Vc.m},function(Vc){va=Vc.M;Wa=Vc.I},function(Vc){pa=Vc.l2lInterfaceFor;tb=Vc.localInterface},function(Vc){ab=Vc.p;Ob=Vc.R;yc=Vc.b;Ta=Vc.i;Bd=Vc.a;Eb=Vc.D},function(Vc){fe=Vc.b},function(Vc){Od=Vc.v;Hd=Vc.p},function(Vc){Qc=Vc.L;Xd=Vc.b;oc=Vc.S},function(Vc){rf=Vc.l},function(Vc){Dd=Vc.StatusMessageConfirm;ld=Vc.StatusMessageWarning;Td=Vc.StatusMessageError},function(Vc){gb=Vc.a},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},
function(){},function(){},function(){},function(){}],execute:function(){function Vc(za){return nc.Inspector.openInWindow({targetObject:za})}function vb(za,Ka){return nc.Inspector.openInWindow({remoteTarget:{code:za,evalEnvironment:Ka}})}function cc(za){function Ka(ca){var ma=ca.name,u=ca.ownerChain(),O=ca.owner,P=ca.world(),fa;ca===da&&(fa=[wa]);P===ca&&(fa=["$world"]);if(!fa&&ma&&O){O===P&&1===nc.arr.count(nc.arr.pluck(P.submorphs,"name"),ma)&&(fa=['$world.get("'.concat(ma,'")')]);if(!fa&&O!=P)for(P=
u.length-1;P--;)if(1===u[P].getAllNamed(ma).length){fa=[].concat(rd(Ka(u[P])),['get("'.concat(ma,'")')]);break}fa||(ma=[].concat(rd(Ka(O)),['get("'.concat(ma,'")')]),nc.syncEval(ma.join("."),{context:da}).value===ca&&(fa=ma))}fa||(fa=["".concat(wa,'.getMorphWithId("').concat(ca.id,'")')]);return fa}var Ib=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},C=za.world(),Pb=Ib.maxLength;Pb=void 0===Pb?10:Pb;Ib=Ib.fromMorph;var da=void 0===Ib?C:Ib;if(da===za)return"this";var wa=C===da?"$world":
"this";if(!(C||za.name&&da.get(za.name)===za))return"morph";C=Ka(za);return C.length>Pb?'$world.getMorphWithId("'.concat(za.id,'")'):C.join(".")}function ob(){return ac.apply(this,arguments)}function ac(){ac=cb(regeneratorRuntime.mark(function Ka(){var Ib,C,Pb,da,wa,ca,ma,u,O,P,fa,Qa,Ua,Gb=arguments;return regeneratorRuntime.wrap(function(ta){for(;;)switch(ta.prev=ta.next){case 0:return Ib=0<Gb.length&&void 0!==Gb[0]?Gb[0]:{},C=Ib.title,Pb=Ib.target,da=Ib.className,wa=Ib.methodName,ca=Ib.textPosition,
ma=Ib.scroll,u=Ib.classTreeScroll,O=Ib.evalEnvironment,P=Ib.loadingIndicator,fa=Fa.part(Fa.ObjectEditorLight,{viewModel:Fa.obj.dissoc(Ib,"title","class","method","target","evalEnvironment")}),Qa={name:"ObjectEditor window",title:Ib.title||"ObjectEditor"},ta.next=6,fa.openInWindow(Qa);case 6:return Ua=ta.sent.activate(),ta.next=9,Ua.whenRendered();case 9:if(!Pb){ta.next=13;break}P&&(P.label="Connecting to target");ta.next=13;return fa.browse({title:C,target:Pb,className:da,methodName:wa,textPosition:ca,
scroll:ma,classTreeScroll:u,evalEnvironment:O});case 13:return Ua.doNotAcceptDropsForThisAndSubmorphs(),ta.abrupt("return",Ua);case 15:case "end":return ta.stop()}},Ka)}));return ac.apply(this,arguments)}Lc("open",ob);var ae=window.lively.FreezerRuntime.recorderFor("lively.ide/js/objecteditor/classTree.js");ae.TreeData=Ja;ae.arr=Nd;ae.withSuperclasses=Tc;ae.lexicalClassMembers=Jc;ae.Icon=$d;var qe=function(za){var Ka=window.lively.FreezerRuntime.recorderFor("lively.ide/js/objecteditor/classTree.js"),
Ib=Ka.hasOwnProperty("ClassTreeData")&&"function"===typeof Ka.ClassTreeData?Ka.ClassTreeData:Ka.ClassTreeData=function(C){if(!C||!C[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Bb(Ib,za,[{key:Symbol["for"]("lively-instance-initialize"),value:function(C){Bb._get(Object.getPrototypeOf(Ib.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,{target:C,name:"root",isRoot:!0,isCollapsed:!1})}},{key:"display",
value:function(C){return C?C.isRoot?C.target.name||C.target.id||"root object":C.isClass?C.target:C.name||"no name":"empty"}},{key:"isLeaf",value:function(C){return C?!C.isRoot&&!C.isClass:!0}},{key:"isCollapsed",value:function(C){return!C||C.isCollapsed}},{key:"collapse",value:function(C,Pb){C&&(C.isCollapsed=Pb)}},{key:"getChildren",value:function(C){if(!C)return[];if(C.isRoot){if(C.children)return C.children;var Pb=ae.arr.without(ae.withSuperclasses(C.target),Object).reverse();return C.children=
Pb.map(function(da){return{isClass:!0,klass:da,target:da[Symbol["for"]("__LivelyClassName__")],isCollapsed:!0}})}if(C.isClass)try{return C.children||(C.children=ae.lexicalClassMembers(C.klass).map(function(da){var wa=da.name,ca=da.kind,ma=da.overridden,u="";da["static"]&&(u+="static ");"get"===ca&&(u+="get ");"set"===ca&&(u+="set ");return{name:[ma?[].concat(rd(ae.Icon.textAttribute("arrow-circle-up")),[" ",{opacity:.5}]):[],u+wa,{}],target:da}}))}catch(da){return $world.showError(da),C.children=
[]}return[]}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ClassTreeData"}}],Ka,{pathInPackage:function(){return"./js/objecteditor/classTree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:971,end:2818})}(ae.TreeData);ae["default"]=qe;var lc=window.lively.FreezerRuntime.recorderFor("lively.ide/js/objecteditor/context.js");
lc.semver=Ra;lc.RuntimeSourceDescriptor=Id;lc.withSuperclasses=Tc;lc.isClass=Ac;lc.isObjectClass=aa;lc.interactivelyForkPackage=Ma;lc.addScript=qb;lc.string=Pc;lc.num=gd;lc.promise=nd;lc.Path=Fd;lc.obj=ic;lc.subscribe=vd;lc.unsubscribe=sb;lc.L2LClient=Xb;lc.l2lInterfaceFor=pa;lc.localInterface=tb;lc.deserialize=Nb;lc.getClassName=bc;lc.stringifyFunctionWithoutToplevelRecorder=hb;lc.modules=N;lc.module=lc.modules.module;lc.ClassTreeData=qe;lc.chooseUnusedImports=Lb;qe=function(za){var Ka=window.lively.FreezerRuntime.recorderFor("lively.ide/js/objecteditor/context.js"),
Ib=Ka.hasOwnProperty("ObjectEditorContext")&&"function"===typeof Ka.ObjectEditorContext?Ka.ObjectEditorContext:Ka.ObjectEditorContext=function(C){if(!C||!C[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Bb(Ib,za,[{key:"isRemote",get:function(){return!!this.remoteContextId}},{key:"selectedModule",get:function(){return lc.module(this.evalEnvironment.targetModule)}},{key:"isRemoteHandle",value:function(C){return lc.obj.isString(C)&&
C.startsWith("lively://lively.next-object-editor/")}},{key:"selectTarget",value:function(){var C=cb(regeneratorRuntime.mark(function ca(da,wa){var ma=this,u,O=arguments;return regeneratorRuntime.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:u=2<O.length&&void 0!==O[2]?O[2]:!1;!this.onModuleChangeHandler&&this.interfaceToEditor&&(this.onModuleChangeHandler=function(){var fa=cb(regeneratorRuntime.mark(function Gb(Ua){var ta;return regeneratorRuntime.wrap(function(mc){for(;;)switch(mc.prev=mc.next){case 0:return mc.next=
2,ma.onModuleChanged(Ua);case 2:(ta=mc.sent)&&ma.withEditorDo(function(pc){return pc.reactToModuleChange(ta)},{newClassSource:ta});case 4:case "end":return mc.stop()}},Gb)}));return function(Ua){return fa.apply(this,arguments)}}(),lc.subscribe("lively.modules/modulechanged",this.onModuleChangeHandler),lc.subscribe("lively.modules/moduleloaded",this.onModuleChangeHandler));if(!u||!this.isRemoteHandle(da)){P.next=5;break}this.connectToContext(da,wa,u);return P.abrupt("return",this);case 5:if(!u||"string"!==
typeof da){P.next=9;break}P.next=8;return this.selectRemoteTarget({code:da,editor:wa,evalEnvironment:u});case 8:return P.abrupt("return",this);case 9:return P.next=11,this.selectLocalTarget(da,wa);case 11:return P.abrupt("return",this);case 12:case "end":return P.stop()}},ca,this)}));return function(da,wa){return C.apply(this,arguments)}}()},{key:"refresh",value:function(){var C=cb(regeneratorRuntime.mark(function wa(da){var ca=this;return regeneratorRuntime.wrap(function(ma){for(;;)switch(ma.prev=
ma.next){case 0:this.classTreeData=new lc.ClassTreeData(this.target.constructor);if(!da){ma.next=4;break}ma.next=4;return this.classTreeData.uncollapseAll(function(u){return ca.classTreeData.getChildren(u)&&u.isRoot});case 4:this.evalEnvironment={context:this.target,systemInterface:lc.localInterface,targetModule:this.sourceDescriptorFor(this.target.constructor).module.id,format:"esm"};case 5:case "end":return ma.stop()}},wa,this)}));return function(da){return C.apply(this,arguments)}}()},{key:"connectToContext",
value:function(){var C=cb(regeneratorRuntime.mark(function ma(da,wa,ca){return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.remoteContextId=this.target=da,this.evalEnvironment={context:"System.get('@lively-env').objectEditContexts[\"".concat(this.remoteContextId,'"].target'),systemInterface:ca.systemInterface,format:"esm"},u.next=4,this.withContextDo(function(O){return O.selectedModule.id});case 4:return this.evalEnvironment.targetModule=u.sent,wa&&Object.assign(wa.editorPlugin.evalEnvironment,
this.evalEnvironment),u.next=8,this.withContextDo(function(O){return O.selectedClassName});case 8:this.selectedClassName=u.sent;case 9:case "end":return u.stop()}},ma,this)}));return function(da,wa,ca){return C.apply(this,arguments)}}()},{key:"selectLocalTarget",value:function(){var C=cb(regeneratorRuntime.mark(function wa(da){var ca,ma=arguments;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return ca=1<ma.length&&void 0!==ma[1]?ma[1]:!1,this.target=da,this.selectedMethod=
this.selectedClass=null,u.next=6,this.refresh(!ca);case 6:return ca&&Object.assign(ca.editorPlugin.evalEnvironment,this.evalEnvironment),u.next=9,this.selectClass(lc.getClassName(da));case 9:return u.abrupt("return",this);case 10:case "end":return u.stop()}},wa,this)}));return function(da){return C.apply(this,arguments)}}()},{key:"selectRemoteTarget",value:function(){var C=cb(regeneratorRuntime.mark(function wa(da){var ca,ma,u,O,P;return regeneratorRuntime.wrap(function(fa){for(;;)switch(fa.prev=
fa.next){case 0:return ca=da.code,ma=da.evalEnvironment,u=da.editor,O=lc.L2LClient["default"]().id,fa.next=4,ma.systemInterface.runEval('\n       const { default: ObjectEditorContext} = await System.import("lively.ide/js/objecteditor/context.js");\n       const t = (() => '.concat(ca,')();\n       const ctx = await ObjectEditorContext.for(t);\n       const id = await ctx.connectToEditor("').concat(O,'", "').concat(u.id,'");\n       const targetModule = ctx.selectedModule.id;\n       const res =  {targetModule, id};\n       res;\n    '),
ma);case 4:P=fa.sent;if(!P.isError){fa.next=7;break}throw Error(P);case 7:return this.remoteContextId=this.target=P.value.id,this.evalEnvironment={context:"System.get('@lively-env').objectEditContexts[\"".concat(this.remoteContextId,'"].target'),systemInterface:ma.systemInterface,targetModule:P.value.targetModule,format:"esm"},fa.next=11,this.withContextDo(function(Qa){return Qa.selectedClassName});case 11:this.selectedClassName=fa.sent,u&&Object.assign(u.editorPlugin.evalEnvironment,this.evalEnvironment);
case 13:case "end":return fa.stop()}},wa,this)}));return function(da){return C.apply(this,arguments)}}()},{key:"dispose",value:function(){var C=this;this.withContextDo(function(){System.get("@system-env").node&&(delete System.get("@lively-env").objectEditContexts[C.id],lc.unsubscribe("lively.modules/modulechanged",C.onModuleChangeHandler),lc.unsubscribe("lively.modules/moduleloaded",C.onModuleChangeHandler))})}},{key:"connectToEditor",value:function(C,Pb){this.id="lively://lively.next-object-editor/".concat(Pb);
System.get("@lively-env").objectEditContexts||(System.get("@lively-env").objectEditContexts={});this.interfaceToEditor=lc.l2lInterfaceFor(C,lc.L2LClient["default"]());this.editorId=Pb;System.get("@lively-env").objectEditContexts[this.id]=this;return this.id}},{key:"stringifySource",value:function(C){var Pb=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},da=lc.obj.keys(Pb).map(function(wa){return"const ".concat(wa," = ").concat(JSON.stringify(Pb[wa]),";")}).join("\n");C="string"===C?C:lc.stringifyFunctionWithoutToplevelRecorder(C);
return"(() => {"+da+"\n return ("+C+")(this) })()"}},{key:"withEditorDo",value:function(){var C=cb(regeneratorRuntime.mark(function ca(da,wa){var ma;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return da=this.wrapSource(this.stringifySource(da,wa)),u.next=3,this.interfaceToEditor.runEval(da,{context:'$world.getMorphWithId("'.concat(this.editorId,'")'),targetModule:"lively.ide/js/objecteditor/index.js",ackTimeout:3E4});case 3:ma=u.sent;if(!ma.isError){u.next=6;break}throw Error(ma.value);
case 6:ma=ma.value;if(lc.obj.isArray(ma)||!lc.obj.isObject(ma)){u.next=9;break}return u.abrupt("return",lc.deserialize(ma));case 9:return u.abrupt("return",ma);case 10:case "end":return u.stop()}},ca,this)}));return function(da,wa){return C.apply(this,arguments)}}()},{key:"wrapSource",value:function(C){return"\n          let { serialize } = await System.import('lively.serializer2');\n          let __eval_res__ = await ".concat(C,";\n          if (!obj.isArray(__eval_res__) && obj.isObject(__eval_res__))\n            __eval_res__ = serialize(__eval_res__);\n          __eval_res__;\n        ")}},
{key:"withContextDo",value:function(){var C=cb(regeneratorRuntime.mark(function wa(da){var ca=this,ma,u,O,P,fa=arguments;return regeneratorRuntime.wrap(function(Qa){for(;;)switch(Qa.prev=Qa.next){case 0:ma=1<fa.length&&void 0!==fa[1]?fa[1]:{};if(this.remoteContextId||!lc.obj.isFunction(da)){Qa.next=5;break}Qa.next=4;return da(this);case 4:return Qa.abrupt("return",Qa.sent);case 5:if(!this._evalInProgress){Qa.next=8;break}Qa.next=8;return lc.promise.waitFor(5E3,function(){return!ca._evalInProgress});
case 8:return this._evalInProgress=!0,da=this.stringifySource(da,ma),u=this.wrapSource(da),O=this.remoteContextId?"System.get('@lively-env').objectEditContexts[\"".concat(this.remoteContextId,'"]'):this,Qa.next=14,this.evalEnvironment.systemInterface.runEval(u,{targetModule:"lively.ide/js/objecteditor/context.js",ackTimeout:3E4,context:O});case 14:P=Qa.sent;if(!P.isError){Qa.next=17;break}throw Error(P.value);case 17:P=P.value;this._evalInProgress=!1;if(lc.obj.isArray(P)||!lc.obj.isObject(P)){Qa.next=
21;break}return Qa.abrupt("return",lc.deserialize(P));case 21:return Qa.abrupt("return",P);case 22:case "end":return Qa.stop()}},wa,this)}));return function(da){return C.apply(this,arguments)}}()},{key:"sourceDescriptorFor",value:function(C){return lc.RuntimeSourceDescriptor["for"](C)}},{key:"classChainOfTarget",value:function(){return lc.withSuperclasses(this.target.constructor)}},{key:"addModuleChangeWarning",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa;return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=
ca.next){case 0:if(!this.isSaving){ca.next=2;break}return ca.abrupt("return");case 2:return ca.next=4,this.sourceDescriptorFor(this.selectedClass).source;case 4:wa=ca.sent,this.moduleChangeWarning=this.selectedModule.id,this.sourceHash=lc.string.hashCode(wa);case 7:case "end":return ca.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"onModuleChanged",value:function(){var C=cb(regeneratorRuntime.mark(function wa(da){var ca,ma,u;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=
O.next){case 0:if(!this.isSaving){O.next=2;break}return O.abrupt("return");case 2:ca=lc.module(da.module);ma=this.selectedModule;u=this.selectedClass;if(ma&&ma.id===ca.id){O.next=6;break}return O.abrupt("return");case 6:return O.next=8,this.sourceDescriptorFor(u).source;case 8:return O.abrupt("return",O.sent);case 9:case "end":return O.stop()}},wa,this)}));return function(da){return C.apply(this,arguments)}}()},{key:"onModuleLoaded",value:function(C){this.onModuleChanged(C)}},{key:"getTitle",value:function(){var C=
cb(regeneratorRuntime.mark(function da(){var wa,ca,ma,u,O;return regeneratorRuntime.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return wa="",ca=this.selectedClass,ma=this.selectedMethod,u=this.selectedModule,ca?(wa+=" - ".concat(ca[Symbol["for"]("__LivelyClassName__")]),lc.isObjectClass(ca)&&(O=ca[Symbol["for"]("lively-module-meta")]["package"])&&O.version&&(wa+="@"+O.version),ma&&(wa+=">>".concat(ma.name))):u&&(wa+=" - ".concat(u.shortName())),P.abrupt("return",wa);case 4:case "end":return P.stop()}},
da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"selectClass",value:function(){var C=cb(regeneratorRuntime.mark(function wa(da){var ca=this;return regeneratorRuntime.wrap(function(ma){for(;;)switch(ma.prev=ma.next){case 0:return ma.next=2,this.withContextDo(function(){var u=ca.classChainOfTarget().find(function(O){return O[Symbol["for"]("__LivelyClassName__")]===da});ca.selectedMethod=null;ca.selectedClass=u;return u[Symbol["for"]("__LivelyClassName__")]},{className:da});case 2:this.selectedClassName=
ma.sent;case 3:case "end":return ma.stop()}},wa,this)}));return function(da){return C.apply(this,arguments)}}()},{key:"updatePackageConfig",value:function(C){if(lc.isObjectClass(this.selectedClass)&&C){C=this.evalEnvironment.systemInterface;var Pb=this.sourceDescriptorFor(this.selectedClass).module["package"](),da=Object.assign({},Pb.config,{version:lc.semver.inc(Pb.version,"prerelease",!0)});Pb=C.getModule(Pb.url+"/package.json");C.packageConfChange(JSON.stringify(da,null,2),Pb.id)}}},{key:"forkPackage",
value:function(){var C=cb(regeneratorRuntime.mark(function wa(da){return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=ca.next){case 0:return ca.next=2,lc.interactivelyForkPackage(this.target,da);case 2:return ca.abrupt("return",ca.sent);case 3:case "end":return ca.stop()}},wa,this)}));return function(da){return C.apply(this,arguments)}}()},{key:"addNewMethod",value:function(){var C=cb(regeneratorRuntime.mark(function da(){return regeneratorRuntime.wrap(function(wa){for(;;)switch(wa.prev=
wa.next){case 0:return wa.next=2,lc.addScript(this.target,"function() {}","newMethod");case 2:return wa.abrupt("return",wa.sent);case 3:case "end":return wa.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"selectMethod",value:function(){var C=cb(regeneratorRuntime.mark(function ca(da,wa){var ma=this,u;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,this.withContextDo(cb(regeneratorRuntime.mark(function fa(){var Qa,Ua;return regeneratorRuntime.wrap(function(Gb){for(;;)switch(Gb.prev=
Gb.next){case 0:return(Qa=ma.classChainOfTarget().find(function(ta){return ta[Symbol["for"]("__LivelyClassName__")]===da}))&&!wa&&lc.isClass(Qa.owner)&&(wa=Qa,Qa=Qa.owner),ma.selectedMethod=wa,Gb.next=5,ma._sourceDescriptor_of_class_findMethodNode(Qa,wa.name,wa.kind,wa["static"]);case 5:return Ua=Gb.sent,Gb.abrupt("return",Ua);case 7:case "end":return Gb.stop()}},fa)})),{className:da,methodSpec:wa});case 2:if(u=O.sent)this.selectedMethodName=wa.name;return O.abrupt("return",u);case 5:case "end":return O.stop()}},
ca,this)}));return function(da,wa){return C.apply(this,arguments)}}()},{key:"removeUnusedImports",value:function(){var C=cb(regeneratorRuntime.mark(function wa(da){var ca,ma,u;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.prev=0,ca=this.selectedModule,O.next=4,ca.source();case 4:return ma=O.sent,O.next=7,lc.chooseUnusedImports(ma);case 7:if((u=O.sent)&&u.changes&&u.changes.length){O.next=10;break}return O.abrupt("return",{statusMessage:"Nothing to remove"});
case 10:return O.next=12,ca.removeImports(u.removedImports);case 12:return O.abrupt("return",{statusMessage:"Imports removed"});case 15:O.prev=15;O.t0=O["catch"](0);O.t1=origSource;if(!O.t1){O.next=21;break}O.next=21;return m.changeSource(origSource);case 21:return O.abrupt("return",{statusMessage:O.t0.toString()});case 22:case "end":return O.stop()}},wa,this,[[0,15]])}));return function(da){return C.apply(this,arguments)}}()},{key:"getMethodAtCursorPos",value:function(){var C=cb(regeneratorRuntime.mark(function ma(da,
wa,ca){var u=this;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,this.withContextDo(function(){var P=u.classChainOfTarget().find(function(fa){return fa[Symbol["for"]("__LivelyClassName__")]===da});return u._sourceDescriptor_of_class_findMethodNode(P,ca)},{cursorIndex:ca});case 2:return O.abrupt("return",O.sent);case 3:case "end":return O.stop()}},ma,this)}));return function(da,wa,ca){return C.apply(this,arguments)}}()},{key:"_sourceDescriptor_of_class_findMethodNode",
value:function(){var C=cb(regeneratorRuntime.mark(function ma(da,wa,ca){var u,O,P,fa,Qa,Ua,Gb=arguments;return regeneratorRuntime.wrap(function(ta){for(;;)switch(ta.prev=ta.next){case 0:u=3<Gb.length&&void 0!==Gb[3]?Gb[3]:!1;O=4<Gb.length?Gb[4]:void 0;P=this.sourceDescriptorFor(da);ta.t0=O;if(ta.t0){ta.next=8;break}ta.next=7;return P.ast;case 7:ta.t0=ta.sent;case 8:return fa=ta.t0,Qa=lc.Path("body.body").get(fa),Ua=Qa.find(function(mc){var pc=mc.kind,zd=mc["static"],Pd=mc.key.name,bd=mc.value.body;
mc=bd.start;bd=bd.end;return lc.obj.isNumber(wa)?lc.num.between(wa,mc,bd):Pd!==wa||zd!==u?!1:!ca||"get"!==ca&&"set"!==ca?!0:ca===pc}),ta.abrupt("return",Ua);case 12:case "end":return ta.stop()}},ma,this)}));return function(da,wa,ca){return C.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ObjectEditorContext"}},{key:"for",value:function(){var C=cb(regeneratorRuntime.mark(function ma(da,wa,ca){return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=
u.next){case 0:return u.next=2,(new this).selectTarget(da,wa,ca);case 2:return u.abrupt("return",u.sent);case 3:case "end":return u.stop()}},ma,this)}));return function(da,wa,ca){return C.apply(this,arguments)}}()}],Ka,{pathInPackage:function(){return"./js/objecteditor/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:890,
end:13113})}(void 0);lc["default"]=qe;var nc=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js");nc.inspect=Vc;nc.remoteInspect=vb;nc.generateReferenceExpression=cc;nc.onNumberDragStart=function(za,Ka){Ka.initPos=za.position;Ka.factorLabel=(new nc.Tooltip({description:"1x"})).openInWorld(za.hand.position.addXY(10,10))};nc.onNumberDrag=function(za,Ka){var Ib=nc.getScaleAndOffset(za,Ka),C=Ib.scale;Ib=Ib.offset;Ka.factorLabel.position=za.hand.position.addXY(10,10);Ka.factorLabel.description=
"".concat(C,"x");return nc.getCurrentValue(Ib,C,Ka)};nc.onNumberDragEnd=function(za,Ka){var Ib=nc.getScaleAndOffset(za,Ka);za=Ib.offset;Ib=Ib.scale;Ka.factorLabel.softRemove();return nc.getCurrentValue(za,Ib,Ka)};nc.getScaleAndOffset=function(za,Ka){var Ib=za.position.subPt(Ka.initPos);za=Ib.x;Ka=nc.num.roundTo(Math.exp(-Ib.y/$world.height*6),.01)*Ka.baseFactor;return{offset:za,scale:Ka}};nc.getCurrentValue=function(za,Ka,Ib){return Math.max(Ib.min,Math.min(Ib.max,Ib.scrubbedValue+(Ib.floatingPoint?
za*Ka:Math.round(za*Ka))))};nc.Color=Hb;nc.rect=ec;nc.pt=ub;nc.obj=ic;nc.num=gd;nc.Path=Fd;nc.arr=Nd;nc.promise=nd;nc.connect=yb;nc.disconnect=ba;nc.once=wb;nc.Morph=Xa;nc.Tooltip=Za;nc.VerticalLayout=Sb;nc.HorizontalLayout=Cb;nc.morph=Da;nc.Label=zb;nc.Icon=$d;nc.config=db;nc.Tree=Ga;nc.LoadingIndicator=Qc;nc.DropDownList=sa;nc.DropDownSelector=Ub;nc.SearchField=vc;nc.LabeledCheckBox=Oc;nc.MorphHighlighter=va;nc.InteractiveMorphSelector=Wa;nc.printValue=ab;nc.RemoteInspectionTree=Ob;nc.InspectionTree=
yc;nc.isMultiValue=Ta;nc.valueWidgets=Od;nc.popovers=Hd;nc.DarkTheme=Bd;nc.DefaultTheme=Eb;nc.syncEval=ib;nc.inspectorCommands=[{name:"focus codeEditor",exec:function(za){za.get("codeEditor").show();za.get("codeEditor").focus();return!0}},{name:"focus propertyTree",exec:function(za){za.get("propertyTree").show();za.get("propertyTree").focus();return!0}}];(function(za){var Ka=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),Ib=Ka.hasOwnProperty("DraggedProp")&&"function"===typeof Ka.DraggedProp?
Ka.DraggedProp:Ka.DraggedProp=function(C){if(!C||!C[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Bb(Ib,za,[{key:"applyToTarget",value:function(C){var Pb=this.currentTarget,da=this.control;this.remove();nc.MorphHighlighter.removeHighlighters(C.world);if(Pb)if(Pb.isText&&"js"===Pb.editorModeName){var wa=Pb.evalEnvironment.context;C=Pb.textPositionFromPoint(Pb.localize(C.position));wa=nc.generateReferenceExpression(this.sourceObject,
{fromMorph:wa});da.keyString&&(wa+="."+da.keyString);Pb.insertTextAndSelect(wa,C);Pb.focus()}else"propertyValue"in da&&(Pb[da.keyString]=da.propertyValue)}},{key:"update",value:function(C){C=C.hand.globalPosition;var Pb=this.morphBeneath(C);if(Pb){for(Pb==this.morphHighlighter&&(Pb=Pb.morphBeneath(C));[Pb].concat(rd(Pb.ownerChain())).find(function(da){return!da.visible});)Pb=Pb.morphBeneath(C);if(Pb!=this.currentTarget){this.currentTarget=Pb;this.morphHighlighter&&this.morphHighlighter.deactivate();
if(Pb.isWorld)return;this.morphHighlighter=nc.MorphHighlighter["for"]($world,Pb);this.morphHighlighter.show()}this.position=C}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DraggedProp"}},{key:"properties",get:function(){return{control:{},sourceObject:{},borderColor:{defaultValue:nc.Color.rgb(169,204,227)},fill:{defaultValue:nc.Color.rgb(235,245,251).withA(.8)},borderWidth:{defaultValue:2},borderRadius:{defaultValue:4},submorphs:{after:["control"],initialize:function(){var C=
this.control;if(!C)return this.submorphs=[];this.height=22;this.submorphs=[C];C.top=0;C.fontSize=14;"function"===typeof C.relayout&&C.relayout();this.width=C.width+20;this.adjustOrigin(nc.pt(10,10))}}}}}],Ka,{pathInPackage:function(){return"./js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1184,end:3773})})(nc.Morph);
(function(za){var Ka=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),Ib=Ka.hasOwnProperty("DraggableTreeLabel")&&"function"===typeof Ka.DraggableTreeLabel?Ka.DraggableTreeLabel:Ka.DraggableTreeLabel=function(C){if(!C||!C[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Bb(Ib,za,[{key:"inspector",get:function(){return this.owner.owner}},{key:"onDragStart",value:function(C){this.draggedProp=new nc.DraggedProp({sourceObject:this.inspector.targetObject,
control:this.copy()});this.draggedProp.openInWorld();nc.connect(C.hand,"update",this.draggedProp,"update")}},{key:"onDrag",value:function(C){}},{key:"onDragEnd",value:function(C){nc.disconnect(C.hand,"update",this.draggedProp,"update");this.draggedProp.applyToTarget(C)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DraggableTreeLabel"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["TreeLabel"]},draggable:{defaultValue:!0},nativeCursor:{defaultValue:"-webkit-grab"},
keyString:{},valueString:{},fontFamily:{defaultValue:nc.config.codeEditor.defaultStyle.fontFamily},fill:{defaultValue:nc.Color.transparent},padding:{defaultValue:nc.rect(0,1,10,-1)},isSelected:{after:["submorphs"],set:function(C){this.setProperty("isSelected",C);C?(this.removeStyleClass("deselected"),this.addStyleClass("selected")):(this.addStyleClass("deselected"),this.removeStyleClass("selected"));this.control&&(this.control.isSelected=C)}}}}}],Ka,{pathInPackage:function(){return"./js/inspector.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3775,end:5203})})(nc.Label);var Yc=function(za){var Ka=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),Ib=Ka.hasOwnProperty("PropertyControl")&&"function"===typeof Ka.PropertyControl?Ka.PropertyControl:Ka.PropertyControl=function(C){if(!C||!C[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Bb(Ib,za,[{key:"menuItems",value:function(){return this._targetMenuItems||[]}},{key:"renderValueSelector",value:function(C,Pb,da){C.control=new nc.DropDownSelector({opacity:.8,fill:nc.Color.white.withA(.5),name:"valueString",styleClasses:["TreeLabel"],selectedValue:Pb,padding:0,values:da});nc.connect(C.control,"update",C,"propertyValue",{updater:function(wa,ca){this.targetObj.propertyValue!=ca&&wa(ca)}});nc.connect(C,"update",C.control,"selectedValue",{updater:function(wa,ca){ca=
ca&&ca.valueOf?ca.valueOf():ca;this.targetObj.propertyValue!=ca&&wa(ca)}});return C}},{key:"toggleMultiValuePlaceholder",value:function(C){this.multiValuePlaceholder=this.multiValuePlaceholder||this.addMorph({fill:nc.Color.transparent,layout:new nc.HorizontalLayout({spacing:3}),name:"multi value placeholder",nativeCursor:"pointer",submorphs:nc.arr.range(0,2).map(function(Pb){return{type:"ellipse",fill:nc.Color.gray.withA(.5),reactsToPointer:!1,extent:nc.pt(7,7)}})});C?(nc.connect(this.multiValuePlaceholder,
"onMouseDown",this,"propertyValue",{converter:function(){return this.targetObj.propertyValue.valueOf()}}),this.control.opacity=0,this.multiValuePlaceholder.visible=!0):(nc.disconnect(this.multiValuePlaceholder,"onMouseDown",this,"propertyValue"),this.control.opacity=1,this.multiValuePlaceholder.visible=!1)}},{key:"toggleFoldableValue",value:function(C){this.foldableProperties&&this.toggleMultiValuePlaceholder(nc.isMultiValue(C,this.foldableProperties))}},{key:"asFoldable",value:function(C){this.foldableProperties=
C;nc.connect(this,"update",this,"toggleFoldableValue")}},{key:"relayout",value:function(){this.fit();this.control&&(this.control.topLeft=this.textBounds().topRight().addXY(-2,1),this.width=this.textBounds().width+this.control.bounds().width);this.height=18;this.multiValuePlaceholder&&(this.multiValuePlaceholder.leftCenter=this.textBounds().rightCenter())}},{key:"toString",value:function(){return"".concat(this.keyString,": ").concat(this.valueString)}},{key:"highlight",value:function(){this.highlighter&&
this.highlighter.remove();var C=this.highlighter=this.addMorph({type:"label",name:"valueString",value:this.keyString});C.isLayoutable=!1;C.fontWeight="bold";C.fontColor=nc.Color.orange;C.reactsToPointer=!1;C.fadeOut(2E3)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PropertyControl"}},{key:"properties",get:function(){return{root:{},keyString:{},valueString:{},propertyValue:{},control:{after:["submorphs"],derived:!0,get:function(){return this.submorphs[0]||!1},set:function(C){this.submorphs=
[C]}},submorphs:{initialize:function(){this.value=this.keyString+":";this.submorphs=[];nc.connect(this,"extent",this,"relayout")}}}}},{key:"inferType",value:function(C){C.keyString;return(C=C.value)&&(C.isColor||C.isGradient)?"Color":C&&C.isPoint?"Point":nc.obj.isBoolean(C)?"Boolean":nc.obj.isNumber(C)?"Number":nc.obj.isString(C)?"String":C&&C.isRectangle?"Rectangle":!1}},{key:"render",value:function(C){C.spec.type||(C.spec=Object.assign({},C.spec,{isFloat:!Number.isInteger(C.value),type:this.inferType(C)}));
switch(C.spec.type){case "Color":var Pb=this.renderColorControl(C);break;case "ColorGradient":Pb=this.renderColorControl(Object.assign({},C,{gradientEnabled:!0}));break;case "Number":Pb=this.renderNumberControl(C);break;case "String":Pb=this.renderStringControl(C);break;case "RichText":Pb=this.renderStringControl(C);break;case "Layout":Pb=this.renderLayoutControl(C);break;case "Enum":Pb=this.renderEnumControl(C);break;case "Shadow":Pb=this.renderShadowControl(C);break;case "Point":Pb=this.renderPointControl(C);
break;case "Rectangle":Pb=this.renderRectangleControl(C);break;case "Boolean":Pb=this.renderBooleanControl(C);break;default:Pb=this.renderItSomehow(C)}Pb.control&&(nc.connect(Pb.control,"openWidget",Pb,"openWidget"),Pb.toggleFoldableValue(C.value));return Pb}},{key:"baseControl",value:function(C){var Pb=C.spec;C=new this({keyString:C.keyString,valueString:C.valueString,isSelected:!1,propertyValue:C.value});Pb.foldable&&C.asFoldable(Pb.foldable);return C}},{key:"renderGrabbableKey",value:function(C){var Pb=
this,da=C.target;return["".concat(C.keyString,":"),{nativeCursor:"-webkit-grab",onDragStart:function(wa){wa.state.draggedProp=new nc.DraggedProp({sourceObject:da,control:Pb.baseControl(C)});wa.state.draggedProp.openInWorld();nc.connect(wa.hand,"update",wa.state.draggedProp,"update")},onDrag:function(wa){},onDragEnd:function(wa){nc.disconnect(wa.hand,"update",wa.state.draggedProp,"update");wa.state.draggedProp.applyToTarget(wa)}}]}},{key:"renderEnumControl",value:function(C){var Pb=C.value,da=C.spec.values;
C.valueString;var wa=C.keyString,ca=C.target,ma=C.node;C.tree;var u=function(){var O=cb(regeneratorRuntime.mark(function Ua(fa,Qa){return regeneratorRuntime.wrap(function(Gb){for(;;)switch(Gb.prev=Gb.next){case 0:ca.world().openWorldMenu(fa,da.map(function(ta){return{string:ta.toString(),action:function(){ca[wa]=ta;ma.rerender()}}}));case 1:case "end":return Gb.stop()}},Ua)}));return function(fa,Qa){return O.apply(this,arguments)}}();return[].concat(rd(this.renderGrabbableKey(C)),[" ".concat(Pb?Pb.valueOf?
Pb.valueOf():Pb:"Not set"),{nativeCursor:"pointer",onMouseDown:u}],rd(nc.Icon.textAttribute("angle-down",{paddingTop:"4px",paddingLeft:"4px",opacity:.7,onMouseDown:u})))}},{key:"renderStringControl",value:function(C){var Pb=C.value;C.fastRender;C.keyString;C.valueString;C.node;return[].concat(rd(this.renderGrabbableKey(C)),[" ".concat(200<Pb.length?Pb.slice(0,20)+"...":Pb),{fontColor:nc.Color.blue,paddingTop:"0px"}])}},{key:"renderRectangleControl",value:function(C){var Pb=C.value,da=C.keyString,
wa=C.valueString,ca=C.target,ma=C.node,u=function(){var O=cb(regeneratorRuntime.mark(function Qa(fa){var Ua;return regeneratorRuntime.wrap(function(Gb){for(;;)switch(Gb.prev=Gb.next){case 0:return Ua=new nc.popovers.RectanglePopover({hasFixedPosition:!0,rectangle:Pb}),Ua.relayout(),Gb.next=4,Ua.fadeIntoWorld(fa.positionIn(ca.world()));case 4:nc.connect(Ua,"rectangle",function(ta){ca[da]=ta;ma.rerender()});case 5:case "end":return Gb.stop()}},Qa)}));return function(fa){return O.apply(this,arguments)}}();
return[].concat(rd(this.renderGrabbableKey(C)),[" ".concat(wa),{fontColor:nc.Color.black,nativeCursor:"pointer",onMouseDown:u}])}},{key:"renderBooleanControl",value:function(C){var Pb=C.value,da=C.keyString,wa=C.valueString,ca=C.target,ma=C.node;return[].concat(rd(this.renderGrabbableKey(C)),[" ".concat(wa),{nativeCursor:"pointer",fontColor:Pb?nc.Color.green:nc.Color.red,onMouseDown:function(u){ca[da]=!ca[da];ma.rerender()}}])}},{key:"renderNumberControl",value:function(C){var Pb=C.value,da=C.spec,
wa=C.keyString,ca=C.valueString;C.fastRender;var ma=C.node,u=C.target,O=C.tree,P=ma._numberControls;P=void 0===P?new fd:P;var fa=Ea(P.submorphs,2),Qa=fa[0],Ua=fa[1];P.fontColor=O.fontColor;var Gb=ma._numberControls=P;"max"in da&&"min"in da&&-Infinity!=da.min&&Infinity!=da.max?(Gb.baseFactor=(da.max-da.min)/100,Gb.floatingPoint=da.isFloat,Gb.max=da.max,Gb.min=da.min):(Gb.floatingPoint=da.isFloat,Gb.baseFactor=.5,Gb.min=void 0!=da.min?da.min:-Infinity,Gb.max=void 0!=da.max?da.max:Infinity);var ta=nc.valueWidgets.NumberWidget.properties.fontColor.defaultValue;
return[].concat(rd(this.renderGrabbableKey(C)),rd(ma._inputMorph?[ma._inputMorph,{}]:[" ".concat(void 0!=Pb&&(Pb.valueOf?Pb.valueOf():Pb).toFixed(da.isFloat?Math.max(4,nc.num.precision(Pb)):0)," "),{fontColor:ta,onMouseUp:function(mc){ma._inputMorph=nc.morph({type:"input",fill:null,fontColor:ta,fontFamily:"IBM Plex Mono",fontSize:14,padding:nc.rect(8,2,-6,2),height:23,cursorColor:nc.Color.white,value:Pb.valueOf?Pb.valueOf():ca});u[wa]=Pb;ma._inputMorph.focus();nc.once(ma._inputMorph,"inputAccepted",
function(pc){delete ma._inputMorph;u[wa]=da.isFloat?Number.parseFloat(pc):Number.parseInt(pc);ma.rerender()});nc.once(ma._inputMorph,"onBlur",function(pc){ma._inputMorph&&(delete ma._inputMorph,u[wa]=Pb,ma.rerender())});ma.rerender()},onDragStart:function(mc){Gb.scrubbedValue=Pb;nc.onNumberDragStart(mc,Gb)},onDrag:function(mc){u[wa]=nc.onNumberDrag(mc,Gb);ma.rerender()},onDragEnd:function(mc){return nc.onNumberDragEnd(mc,Gb)}},P,{onMouseUp:function(){Qa.fill=Ua.fill=null},onMouseDown:function(mc){if(mc.targetMorph===
Qa){Qa.fill=nc.Color.white.withA(.2);if("max"in da&&u[wa]>=da.max)return;u[wa]+=1}if(mc.targetMorph===Ua){Ua.fill=nc.Color.white.withA(.2);if("min"in da&&u[wa]<=da.min)return;--u[wa]}ma.rerender()}}]))}},{key:"renderShadowControl",value:function(C){var Pb=C.keyString;C.valueString;var da=C.value,wa=C.target,ca=C.node,ma=function(){var u=cb(regeneratorRuntime.mark(function fa(P){var Qa;return regeneratorRuntime.wrap(function(Ua){for(;;)switch(Ua.prev=Ua.next){case 0:return Qa=new nc.popovers.ShadowPopover({shadowValue:wa[Pb],
hasFixedPosition:!0}),Ua.next=3,Qa.fadeIntoWorld(P.positionIn(wa.world()));case 3:nc.connect(Qa,"shadowValue",function(Gb){wa[Pb]=Gb;ca.rerender()});case 4:case "end":return Ua.stop()}},fa)}));return function(P){return u.apply(this,arguments)}}();return[].concat(rd(this.renderGrabbableKey(C)),["".concat(da?da.toFilterCss():"No Shadow"),{nativeCursor:"pointer",onMouseDown:ma}])}},{key:"renderPointControl",value:function(C){var Pb=C.keyString;C.valueString;var da=C.value;C.fontColor;var wa=C.target,
ca=C.node,ma=nc.valueWidgets.NumberWidget.properties.fontColor.defaultValue,u={nativeCursor:"pointer",onMouseDown:function(){var O=cb(regeneratorRuntime.mark(function Qa(fa){var Ua;return regeneratorRuntime.wrap(function(Gb){for(;;)switch(Gb.prev=Gb.next){case 0:return Ua=new nc.popovers.PointPopover({pointValue:wa[Pb],hasFixedPosition:!0}),Gb.next=3,Ua.fadeIntoWorld(fa.positionIn(wa.world()));case 3:nc.connect(Ua,"pointValue",function(ta){wa[Pb]=ta;ca.rerender()});case 4:case "end":return Gb.stop()}},
Qa)}));return function(fa){return O.apply(this,arguments)}}()};return[].concat(rd(this.renderGrabbableKey(C)),[" pt(",Object.assign({},u),"".concat(da.x.toFixed()),Object.assign({fontColor:ma},u),",",Object.assign({},u),"".concat(da.y.toFixed()),Object.assign({fontColor:ma},u),")",Object.assign({},u)])}},{key:"renderLayoutControl",value:function(C){C.target;C.fastRender;var Pb=C.valueString;C.keyString;var da=C.value;return[].concat(rd(this.renderGrabbableKey(C)),[" ".concat(da?Pb:"No Layout"),{onMouseDown:function(wa){}}])}},
{key:"renderColorControl",value:function(C){var Pb=C.node,da=C.gradientEnabled;C.fastRender;var wa=C.valueString,ca=C.keyString,ma=C.value,u=C.target,O=function(){var P=cb(regeneratorRuntime.mark(function Ua(Qa){var Gb;return regeneratorRuntime.wrap(function(ta){for(;;)switch(ta.prev=ta.next){case 0:return Gb=new nc.popovers.FillPopover({hasFixedPosition:!0,handleMorph:u,fillValue:ma,title:"Fill Control",gradientEnabled:da}),ta.next=3,Gb.fadeIntoWorld(Qa.positionIn(u.world()));case 3:nc.connect(Gb,
"fillValue",function(mc){u[ca]=mc;Pb.rerender()});case 4:case "end":return ta.stop()}},Ua)}));return function(Qa){return P.apply(this,arguments)}}();return[].concat(rd(this.renderGrabbableKey(C)),[nc.morph({fill:ma.valueOf?ma.valueOf():ma,extent:nc.pt(15,15),borderColor:nc.Color.gray,borderWidth:1}),{paddingLeft:"5px",paddingTop:"4px",paddingRight:"5px"},"".concat(ma?ma.valueOf?ma.valueOf():wa:"No Color"),{nativeCursor:"pointer",onMouseDown:O}])}},{key:"renderItSomehow",value:function(C){C.fastRender;
C.keyString;var Pb=C.valueString;C.value;return[].concat(rd(this.renderGrabbableKey(C)),[" ".concat(Pb),{}])}}],Ka,{pathInPackage:function(){return"./js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:5212,end:20700})}(nc.DraggableTreeLabel);nc.PropertyControl=Yc;nc.PropertyControl=Yc;nc.inspect=Vc;nc.remoteInspect=vb;
nc.generateReferenceExpression=cc;var fd=function(za){var Ka=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),Ib=Ka.hasOwnProperty("NumberControls")&&"function"===typeof Ka.NumberControls?Ka.NumberControls:Ka.NumberControls=function(C){if(!C||!C[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Bb(Ib,za,void 0,[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"NumberControls"}},{key:"properties",
get:function(){return{layout:{initialize:function(){this.layout=new nc.VerticalLayout({spacing:0,orderByIndex:!0})}},fill:{defaultValue:nc.Color.transparent},width:{defaultValue:15},fontColor:{derived:!0,set:function(C){this.submorphs.map(function(Pb){return Pb.fontColor=C})}},submorphs:{initialize:function(){this.submorphs=[nc.Icon.makeLabel("sort-up",{autofit:!0,opacity:.6,nativeCursor:"pointer",padding:nc.rect(5,2,0,-6),fontSize:12}),nc.Icon.makeLabel("sort-up",{top:10,rotation:Math.PI,autofit:!0,
padding:nc.rect(5,4,0,-9),opacity:.6,nativeCursor:"pointer",fontSize:12})]}}}}}],Ka,{pathInPackage:function(){return"./js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23397,end:24441})}(nc.Morph);(function(za){var Ka=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),Ib=Ka.hasOwnProperty("PropertyTree")&&
"function"===typeof Ka.PropertyTree?Ka.PropertyTree:Ka.PropertyTree=function(C){if(!C||!C[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Bb(Ib,za,[{key:"onDrag",value:function(C){this._onDragHandler&&this._onDragHandler(C)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PropertyTree"}}],Ka,{pathInPackage:function(){return"./js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:25640,end:25751})})(nc.Tree);Yc=function(za){var Ka=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),Ib=Ka.hasOwnProperty("Inspector")&&"function"===typeof Ka.Inspector?Ka.Inspector:Ka.Inspector=function(C){if(!C||!C[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};
return Bb(Ib,za,[{key:"onWindowClose",value:function(){this.stopStepping();this.ui.propertyTree.treeData.dispose();this.openWidget&&this.closeOpenWidget()}},{key:"onMouseMove",value:function(C){}},{key:"__after_deserialize__",value:function(C,Pb,da){var wa=this;this._serializableTarget;var ca=new nc.PropertyTree(Object.assign({name:"propertyTree"},this.treeStyle,{treeData:nc.InspectionTree.forObject(null,this)}));this.addMorph(ca,this.getSubmorphNamed("terminal toggler"));Bb._get(Object.getPrototypeOf(Ib.prototype),
"__after_deserialize__",this).call(this,C,Pb,da);!this.isComponent&&this.master.whenApplied().then(function(){wa.layout.col(0).row(1).group.morph=ca;wa.targetObject&&(wa.targetObject=wa.targetObject)})}},{key:"__additionally_serialize__",value:function(C,Pb,da,wa){C=C.props.submorphs.value;for(Pb=C.length;Pb--;)da.refForId(C[Pb].id).realObj==this.ui.propertyTree&&nc.arr.removeAt(C,Pb)}},{key:"renderDraggableTreeLabel",value:function(C){return new nc.DraggableTreeLabel(C)}},{key:"renderPropertyControl",
value:function(C){return nc.PropertyControl.render(C)}},{key:"onLoad",value:function(){var C=this.ui,Pb=C.codeEditor,da=C.thisBindingSelector,wa=C.propertyTree;Pb.changeEditorMode("js").then(function(){return Pb.evalEnvironment={targetModule:"lively://lively.morphic/inspector",get context(){return"selection"==da.selection?Pb.owner.selectedContext:Pb.owner.targetObject},get systemInterface(){return nc.Path("treeData.systemInterface").get(wa)},format:"esm"}})["catch"](function(ca){return $world.logError(ca)})}},
{key:Symbol["for"]("lively-instance-initialize"),value:function(C){Bb._get(Object.getPrototypeOf(Ib.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,C);C=this.ui;var Pb=C.targetPicker,da=C.propertyTree,wa=C.resizer,ca=C.terminalToggler,ma=C.unknowns,u=C.internals,O=C.searchField,P=C.codeEditor,fa=C.fixImportButton,Qa=C.thisBindingSelector;P.changeEditorMode("js").then(function(){return P.evalEnvironment={targetModule:"lively://lively.morphic/inspector",get context(){return"selection"==
Qa.selection?P.owner.selectedContext:P.owner.targetObject},get systemInterface(){return da.treeData.systemInterface},format:"esm"}})["catch"](function(Ua){return $world.logError(Ua)});nc.connect(Pb,"onMouseUp",this,"selectTarget");nc.connect(da,"onScroll",this,"repositionOpenWidget");nc.connect(wa,"onDrag",this,"adjustProportions");nc.connect(ca,"onMouseDown",this,"toggleCodeEditor");nc.connect(ma,"trigger",this,"filterProperties");nc.connect(u,"trigger",this,"filterProperties");nc.connect(O,"searchInput",
this,"filterProperties");nc.connect(da,"nodeCollapseChanged",this,"filterProperties");nc.connect(this,"extent",this,"relayout");nc.connect(Qa,"selection",this,"bindCodeEditorThis");nc.connect(fa,"fire",P,"execCommand",{updater:function(Ua){return Ua("[javascript] fix undeclared variables",{autoApplyIfSingleChoice:!0})}})}},{key:"refreshSelectedLine",value:function(){var C=this.ui.propertyTree.selectedIndex-1,Pb=this.ui.propertyTree.selectedNode;this.ui.propertyTree.selectedNode.refreshProperty();
Pb=this.ui.propertyTree.document.getLine(C).textAndAttributes.slice(0,4).concat(Pb.display(this));C=this.ui.propertyTree.lineRange(C,!1);this.ui.propertyTree.replace(C,Pb,!1,!1,!1);this.ui.propertyTree.selectedNode=this.ui.propertyTree.selectedNode}},{key:"refreshAllProperties",value:function(){this.world()||this.stopStepping();if(this.targetObject&&this.targetObject.isMorph)if(this.targetObject._styleSheetProps!=this.lastStyleSheetProps)this.refreshTreeView(),this.lastStyleSheetProps=this.targetObject._styleSheetProps;
else{var C=nc.arr.last(this.targetObject.env.changeManager.changesFor(this.targetObject));if(C!=this.lastChange||this.lastSubmorphs!=nc.printValue(this.targetObject&&this.targetObject.submorphs))this.focusedNode&&this.focusedNode.keyString==C.prop&&this.repositionOpenWidget(),this.lastChange=C,this.lastSubmorphs=nc.printValue(this.targetObject&&this.targetObject.submorphs),this.refreshTreeView()}else this.stopStepping()}},{key:"refreshTreeView",value:function(){var C;this.originalTreeData&&this.originalTreeData.asListWithIndexAndDepth(!1).forEach(function(Pb){Pb=
Pb.node;Pb.target&&(C=Pb.foldableNode?Pb.target[Pb.foldableNode.key][Pb.key]:Pb.target[Pb.key],!nc.obj.equals(C,Pb.value)&&Pb.refreshProperty&&Pb.refreshProperty(C))});this.ui.propertyTree.update(!0);this.ui.propertyTree.doNotAcceptDropsForThisAndSubmorphs()}},{key:"isInspector",get:function(){return!0}},{key:"prepareForNewTargetObject",value:function(){var C=cb(regeneratorRuntime.mark(function wa(da){var ca,ma,u,O,P,fa,Qa,Ua,Gb,ta,mc,pc,zd,Pd=arguments;return regeneratorRuntime.wrap(function(bd){for(;;)switch(bd.prev=
bd.next){case 0:ca=1<Pd.length&&void 0!==Pd[1]?Pd[1]:!1;if(!this.isUpdating()){bd.next=4;break}bd.next=4;return this.whenUpdated();case 4:ma=nc.promise.deferred();u=ma.promise;O=!!this.target;this.updateInProgress=u;bd.prev=7;ca&&(P=nc.LoadingIndicator.open("connecting to remote..."));if(!ca){bd.next=15;break}bd.next=12;return nc.RemoteInspectionTree.forObject(da,this);case 12:bd.t0=bd.sent;bd.next=16;break;case 15:bd.t0=nc.InspectionTree.forObject(da,this);case 16:return fa=bd.t0,Qa=this.ui.propertyTree,
bd.next=21,fa.collapse(fa.root,!1);case 21:if(!fa.root.children){bd.next=24;break}bd.next=24;return fa.collapse(fa.root.children[0],!1);case 24:Ua=this.originalTreeData&&this.originalTreeData.diff(fa);if(!Ua){bd.next=30;break}Gb=W(Ua);try{for(Gb.s();!(ta=Gb.n()).done;)mc=Ea(ta.value,2),pc=mc[0],zd=mc[1],pc.refreshProperty(zd.value)}catch(Yd){Gb.e(Yd)}finally{Gb.f()}bd.next=39;break;case 30:return Qa.treeData=fa,bd.next=33,this.filterProperties();case 33:if(!Qa.treeData.root.isCollapsed){bd.next=37;
break}bd.next=36;return Qa.onNodeCollapseChanged({node:fa.root,isCollapsed:!1});case 36:Qa.selectedIndex=1;case 37:return bd.next=39,Qa.execCommand("uncollapse selected node");case 39:this.toggleWindowStyle(O);P&&P.remove();bd.next=46;break;case 43:bd.prev=43,bd.t1=bd["catch"](7),this.showError(bd.t1);case 46:this.startStepping(1E3,"refreshAllProperties"),this.updateInProgress=null;case 48:case "end":return bd.stop()}},wa,this,[[7,43]])}));return function(da){return C.apply(this,arguments)}}()},{key:"toggleWindowStyle",
value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa,ca,ma,u,O,P,fa=arguments;return regeneratorRuntime.wrap(function(Qa){for(;;)switch(Qa.prev=Qa.next){case 0:return wa=0<fa.length&&void 0!==fa[0]?fa[0]:!0,ca=300,O=this.ui.codeEditor.pluginFind(function(Ua){return Ua.runEval}),P=this.getWindow(),Qa.next=6,O.runEval("System.get('@system-env').node");case 6:if(!Qa.sent.value){Qa.next=11;break}u=[].concat(rd(nc.arr.without(P.styleClasses,"local")),["node"]);ma=nc.DarkTheme.instance;
Qa.next=13;break;case 11:u=["local"].concat(rd(P?nc.arr.without(P.styleClasses,"node"):[])),ma=nc.DefaultTheme.instance;case 13:O.theme=ma,wa?(P&&P.animate({duration:ca,styleClasses:u}),this.ui.codeEditor.animate({fill:ma.background,duration:ca})):P&&(P.styleClasses=u),this.ui.codeEditor.textString=this.ui.codeEditor.textString,O.highlight();case 17:case "end":return Qa.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"isUpdating",value:function(){return!!this.updateInProgress}},
{key:"whenUpdated",value:function(){return this.updateInProgress||Promise.resolve()}},{key:"focus",value:function(){this.ui.codeEditor.focus()}},{key:"build",value:function(){var C=this,Pb=Object.assign({type:"text",borderWidth:1,borderColor:nc.Color.gray,lineWrapping:"by-chars"},nc.config.codeEditor.defaultStyle,{textString:""}),da=nc.Icon.textAttribute("long-arrow-alt-right",{textStyleClasses:["fas"],paddingTop:"2px"});nc.rect(0,0,this.width,30);this.submorphs=[{name:"searchBar",submorphs:[new nc.SearchField({styleClasses:["idle"],
name:"searchField"}),{type:"button",name:"targetPicker",padding:nc.rect(2,2,0,0),borderRadius:15,tooltip:"Change Inspection Target",label:nc.Icon.textAttribute("crosshairs")},new nc.LabeledCheckBox({label:"Internals",name:"internals"}),new nc.LabeledCheckBox({label:"Unknowns",name:"unknowns"})]},new nc.PropertyTree(Object.assign({name:"propertyTree"},this.treeStyle,{treeData:nc.InspectionTree.forObject(null,this)})),nc.Icon.makeLabel("keyboard",{name:"terminal toggler"}),{name:"resizer"},Object.assign({name:"codeEditor"},
Pb),{name:"fix import button",type:"button",visible:!1,label:"fix undeclared vars"},{name:"this binding selector",type:nc.DropDownList,visible:!1,listAlign:"top",items:[{isListItem:!0,value:"target",label:["this ",null].concat(rd(da),[" target",null])},{isListItem:!0,value:"selection",label:["this ",null].concat(rd(da),[" selection",null])}]}];this.ui.thisBindingSelector.listMorph.dropShadow=!0;this.ui.thisBindingSelector.listMorph.borderRadius=3;this.ui.thisBindingSelector.whenRendered().then(function(){C.ui.thisBindingSelector.selection=
"target"})}},{key:"selectTarget",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa,ca,ma;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!this.env.eventDispatcher.isKeyPressed("Shift")){u.next=8;break}u.next=3;return $world.execCommand("select morph",{justReturn:!0});case 3:ca=u.sent;ma=Ea(ca,1);wa=ma[0];u.next=13;break;case 8:return this.toggleSelectionInstructions(!0),u.next=11,nc.InteractiveMorphSelector.selectMorph();case 11:wa=u.sent,this.toggleSelectionInstructions(!1);
case 13:wa&&(this.targetObject=wa);case 14:case "end":return u.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"toggleSelectionInstructions",value:function(C){if(C&&!this.instructionWidget){var Pb=nc.morph({type:"label",name:"escapeKey",value:"esc"});Pb.whenRendered().then(function(){return Pb.fit()});this.instructionWidget=this.addMorph({type:"text",opacity:0,center:this.extent.scaleBy(.5),width:120,fixedWidth:!0,lineWrapping:!0,name:"selectionInstruction",textAndAttributes:["Select a new morph to inspect by hovering over it and clicking left. You can exit this mode by pressing ",
{},Pb,{}]});this.instructionWidget.animate({opacity:1,duration:200})}else this.instructionWidget.fadeOut(200),this.instructionWidget=null}},{key:"closeOpenWidget",value:function(){this.openWidget.close()}},{key:"onWidgetOpened",value:function(C){C=C.widget;this.openWidget&&this.openWidget.fadeOut();this.focusedNode=this.ui.propertyTree.selectedNode;C.epiMorph=!0;this.openWidget=C;nc.once(C,"close",this,"closeOpenWidget");nc.once(this.ui.propertyTree,"onMouseDown",this,"closeOpenWidget")}},{key:"getWidgetPosition",
value:function(){var C=this.ui.propertyTree,Pb=C.textLayout.boundsFor(C,{column:0,row:C.selectedIndex-1});Pb=C.worldPoint(nc.pt(Pb.x,Pb.y+Pb.height/2)).addPt(C.scroll.negated());C=C.globalBounds();Pb.x=this.globalBounds().center().x;Pb.y<C.top()?Pb=C.topCenter():C.bottom()-20<Pb.y&&(Pb=C.bottomCenter().addXY(0,-20));return Pb}},{key:"repositionOpenWidget",value:function(){this.openWidget&&this.focusedNode&&(this.openWidget.topCenter=this.getWidgetPosition())}},{key:"adjustProportions",value:function(C){this.layout.row(1).height+=
C.state.dragDelta.y;this.relayout()}},{key:"isEditorVisible",value:function(){return 10<this.ui.codeEditor.height}},{key:"makeEditorVisible",value:function(C){if(C!==this.isEditorVisible()){var Pb=this.extent,da=this.layout,wa=this.ui,ca=wa.terminalToggler,ma=wa.codeEditor,u=wa.thisBindingSelector;wa=wa.fixImportButton;da.disable();C?(ca.fontColor=nc.Color.rgbHex("00e0ff"),da.row(3).height=this.codeEditorHeight||180,da.row(2).height=5,wa.animate({visible:!0,duration:200}),u.animate({visible:!0,duration:200})):
(this.codeEditorHeight=da.row(3).height,ca.fontColor=nc.Color.white,da.row(3).height=da.row(2).height=0,wa.animate({visible:!1,duration:200}),u.animate({visible:!1,duration:200}));this.extent=Pb;da.enable({duration:200});this.relayout({duration:200});ma.focus();ma.animate({opacity:C?1:0,duration:200})}}},{key:"toggleCodeEditor",value:function(){var C=cb(regeneratorRuntime.mark(function da(){return regeneratorRuntime.wrap(function(wa){for(;;)switch(wa.prev=wa.next){case 0:this.makeEditorVisible(!this.isEditorVisible());
case 1:case "end":return wa.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"filterProperties",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa,ca;return regeneratorRuntime.wrap(function(ma){for(;;)switch(ma.prev=ma.next){case 0:return wa=this.ui.searchField,ca=this.ui.propertyTree,this.originalTreeData||(this.originalTreeData=ca.treeData),nc.disconnect(ca.treeData,"onWidgetOpened",this,"onWidgetOpened"),ma.next=6,ca.treeData.filter({maxDepth:2,
showUnknown:this.ui.unknowns.checked,showInternal:this.ui.internals.checked,iterator:function(u){return wa.matches(u.key)}});case 6:ca.update(),nc.connect(ca.treeData,"onWidgetOpened",this,"onWidgetOpened");case 8:case "end":return ma.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"relayout",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa,ca,ma,u,O,P,fa,Qa,Ua,Gb=arguments;return regeneratorRuntime.wrap(function(ta){for(;;)switch(ta.prev=ta.next){case 0:wa=
0<Gb.length&&void 0!==Gb[0]?Gb[0]:{},this.layout&&this.layout.forceLayout(),ca=this.ui,ma=ca.fixImportButton,u=ca.terminalToggler,O=ca.propertyTree,P=ca.thisBindingSelector,fa=O.bounds().insetBy(5).bottomLeft(),Qa=O.bounds().insetBy(5).bottomRight(),Ua=Qa.subXY(ma.width+10,0),P.width=115,P.listMorph.itemHeight=20,wa.duration?(u.animate(Object.assign({bottomLeft:fa},wa)),ma.animate(Object.assign({bottomRight:Qa},wa)),P.animate(Object.assign({bottomRight:Ua},wa))):(u.bottomLeft=fa,ma.bottomRight=Qa,
P.bottomRight=Ua);case 9:case "end":return ta.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"keybindings",get:function(){return[{keys:"Alt-Up",command:"focus propertyTree"},{keys:"Alt-Down",command:"focus codeEditor"},{keys:"F1",command:"focus propertyTree"},{keys:"F2",command:"focus codeEditor"}].concat(Bb._get(Object.getPrototypeOf(Ib.prototype),"keybindings",this))}},{key:"commands",get:function(){return nc.inspectorCommands}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"Inspector"}},{key:"openInWindow",value:function(C){if(System._testsRunning)return console.log(C.targetObject);C=new this(C);C.openInWindow().doNotAcceptDropsForThisAndSubmorphs();return C}},{key:"properties",get:function(){return{extent:{defaultValue:nc.pt(400,500)},fill:{defaultValue:nc.Color.transparent},name:{defaultValue:"inspector"},_serializableTarget:{defaultValue:null},remoteTarget:{after:["submorphs"],set:function(C){this.setProperty("remoteTarget",C);this.ui.propertyTree&&
(this.originalTreeData=null,this.prepareForNewTargetObject(C,!0))}},targetObject:{after:["submorphs"],set:function(C){this._serializableTarget=C&&C.isMorph?C.id:C;this.setProperty("targetObject",C);this.ui.propertyTree&&(this.originalTreeData=null,this.prepareForNewTargetObject(C))}},originalTreeData:{serialize:!1},selectedContext:{readOnly:!0,derived:!0,get:function(){var C=this.ui.propertyTree,Pb=C.treeData;return Pb.getContextFor(C.selectedNode||Pb.root)}},submorphs:{initialize:function(){this.build()}},
ui:{readOnly:!0,derived:!0,after:["submorphs"],get:function(){return{codeEditor:this.getSubmorphNamed("codeEditor"),terminalToggler:this.getSubmorphNamed("terminal toggler"),fixImportButton:this.getSubmorphNamed("fix import button"),thisBindingSelector:this.getSubmorphNamed("this binding selector"),propertyTree:this.getSubmorphNamed("propertyTree"),unknowns:this.getSubmorphNamed("unknowns"),internals:this.getSubmorphNamed("internals"),targetPicker:this.getSubmorphNamed("targetPicker"),searchBar:this.getSubmorphNamed("searchBar"),
searchField:this.getSubmorphNamed("searchField"),resizer:this.getSubmorphNamed("resizer")}}},updateInProgress:{defaultValue:!1,serialize:!1},treeStyle:{defaultValue:{draggable:!0,borderWidth:1,borderColor:nc.Color.gray,fontSize:14,fontFamily:nc.config.codeEditor.defaultStyle.fontFamily}}}}}],Ka,{pathInPackage:function(){return"./js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:25768,end:46417})}(nc.Morph);nc["default"]=Yc;var ua=window.lively.FreezerRuntime.recorderFor("lively.ide/js/objecteditor/index.js");ua.arr=Nd;ua.obj=ic;ua.Path=Fd;ua.string=Pc;ua.fun=T;ua.promise=nd;ua.Icon=$d;ua.Morph=Xa;ua.HorizontalLayout=Cb;ua.GridLayout=ia;ua.config=db;ua.pt=ub;ua.Color=Hb;ua.JavaScriptEditorPlugin=xb;ua.withSuperclasses=Tc;ua.isClass=Ac;ua.LoadingIndicator=Qc;ua.connect=yb;ua.RuntimeSourceDescriptor=Id;ua.ObjectPackage=Vb;ua.isObjectClass=aa;ua.chooseUnusedImports=
Lb;ua.interactivlyFixUndeclaredVariables=Kb;ua.interactivelyChooseImports=Db;ua.modules=N;ua.parse=ka;ua.query=K;ua.interactivelySavePart=ya;ua.adoptObject=pb;ua.InteractiveMorphSelector=Wa;ua.ObjectEditorContext=qe;ua.DarkTheme=Bd;ua.DefaultTheme=Eb;ua.stringifyFunctionWithoutToplevelRecorder=hb;ua.interactivelyFreezePart=fe;ua.generateReferenceExpression=cc;ua.getClassName=bc;ua.resource=La;ua.lint=rf;ua.StatusMessageConfirm=Dd;ua.StatusMessageWarning=ld;ua.StatusMessageError=Td;ua.ViewModel=eb;
ua.DANGEROUS_METHODS_TO_OVERRIDE=["render","remove","addMorph","addMorphAt"];qe=function(za){var Ka=window.lively.FreezerRuntime.recorderFor("lively.ide/js/objecteditor/index.js"),Ib=Ka.hasOwnProperty("ObjectEditorModel")&&"function"===typeof Ka.ObjectEditorModel?Ka.ObjectEditorModel:Ka.ObjectEditorModel=function(C){if(!C||!C[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Bb(Ib,za,[{key:"keybindings",get:function(){return[{keys:"F1",
command:"focus class tree"},{keys:"F2",command:"focus code editor"},{keys:"F3",command:"toggle showing imports"},{keys:{mac:"Command-S",win:"Ctrl-S"},command:"save source"},{keys:{mac:"Command-Shift-=",win:"Ctrl-Shift-="},command:"add method"},{keys:{mac:"Command-Shift--",win:"Ctrl-Shift--"},command:"remove method or class"},{keys:"Ctrl-Shift-R",command:"run selected method"},{keys:"Alt-R",command:"refresh"},{keys:{win:"Ctrl-B",mac:"Meta-B"},command:"open class in system browser"},{keys:"Alt-Shift-T",
command:"choose target"},{keys:"Alt-J",command:"jump to definition"},{keys:"Ctrl-C I",command:"[javascript] inject import"},{keys:"Ctrl-C C I",command:"[javascript] fix undeclared variables"}]}},{key:"commands",get:function(){var C=this;return[{name:"focus class tree",exec:function(){var Pb=C.ui.classTree;Pb.show();Pb.focus();return!0}},{name:"focus code editor",exec:function(){var Pb=C.ui.sourceEditor;Pb.show();Pb.focus();return!0}},{name:"refresh",exec:function(){var Pb=cb(regeneratorRuntime.mark(function wa(){return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=
ca.next){case 0:return ca.next=2,C.withContextDo(function(ma){var u=ma.selectedClass;u&&(ma=ma.sourceDescriptorFor(u),ma.module.reset(),ma.reset())});case 2:return ca.next=4,C.refresh(!0);case 4:return C.view.setStatusMessage("reloaded"),ca.abrupt("return",!0);case 6:case "end":return ca.stop()}},wa)}));return function(){return Pb.apply(this,arguments)}}()},{name:"[javascript] inject import",exec:function(){var Pb=cb(regeneratorRuntime.mark(function wa(){return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=
ca.next){case 0:return ca.next=2,C.models.importController.interactivelyAddImport();case 2:return ca.abrupt("return",!0);case 3:case "end":return ca.stop()}},wa)}));return function(){return Pb.apply(this,arguments)}}()},{name:"[javascript] fix undeclared variables",exec:function(){var Pb=cb(regeneratorRuntime.mark(function wa(){return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=ca.next){case 0:return ca.abrupt("return",C.interactivlyFixUndeclaredVariables());case 1:case "end":return ca.stop()}},
wa)}));return function(){return Pb.apply(this,arguments)}}()},{name:"[javascript] removed unused imports",exec:function(){var Pb=cb(regeneratorRuntime.mark(function wa(){return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=ca.next){case 0:return ca.next=2,C.interactivelyRemoveUnusedImports();case 2:return ca.abrupt("return",!0);case 3:case "end":return ca.stop()}},wa)}));return function(){return Pb.apply(this,arguments)}}()},{name:"toggle showing imports",exec:function(){var Pb=cb(regeneratorRuntime.mark(function wa(){return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=
ca.next){case 0:return ca.next=2,C.toggleShowingImports();case 2:return ca.abrupt("return",!0);case 3:case "end":return ca.stop()}},wa)}));return function(){return Pb.apply(this,arguments)}}()},{name:"add method",exec:function(){var Pb=cb(regeneratorRuntime.mark(function wa(){return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=ca.next){case 0:return ca.next=2,C.interactivelyAddObjectPackageAndMethod();case 2:return ca.abrupt("return",!0);case 3:case "end":return ca.stop()}},wa)}));return function(){return Pb.apply(this,
arguments)}}()},{name:"remove method or class",exec:function(){var Pb=cb(regeneratorRuntime.mark(function wa(){return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=ca.next){case 0:return ca.next=2,C.interactivelyRemoveMethodOrClass();case 2:return ca.abrupt("return",!0);case 3:case "end":return ca.stop()}},wa)}));return function(){return Pb.apply(this,arguments)}}()},{name:"adopt by superclass",exec:function(){var Pb=cb(regeneratorRuntime.mark(function wa(){return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=
ca.next){case 0:return ca.next=2,C.interactivelyAdoptBySuperclass();case 2:return ca.abrupt("return",!0);case 3:case "end":return ca.stop()}},wa)}));return function(){return Pb.apply(this,arguments)}}()},{name:"adopt by another class",exec:function(){var Pb=cb(regeneratorRuntime.mark(function wa(){return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=ca.next){case 0:return ca.next=2,C.interactivelyAdoptByClass();case 2:return ca.abrupt("return",!0);case 3:case "end":return ca.stop()}},
wa)}));return function(){return Pb.apply(this,arguments)}}()},{name:"run selected method",exec:function(){var Pb=cb(regeneratorRuntime.mark(function wa(){return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=ca.next){case 0:return ca.next=2,C.interactivelyRunSelectedMethod();case 2:return ca.abrupt("return",!0);case 3:case "end":return ca.stop()}},wa)}));return function(){return Pb.apply(this,arguments)}}()},{name:"jump to definition",exec:function(){var Pb=cb(regeneratorRuntime.mark(function wa(){var ca,
ma,u,O,P,fa,Qa,Ua,Gb;return regeneratorRuntime.wrap(function(ta){for(;;)switch(ta.prev=ta.next){case 0:return ca=C.ui,ma=ca.classTree,u=ca.sourceEditor,O=ma.treeData,P=O.getChildren(O.root).slice(),fa=P.reverse().flatMap(function(mc){var pc=mc.target,zd=O.getChildren(mc);return[{isListItem:!0,label:[pc,{fontWeight:"bold",fontFamily:"IBM Plex Mono"}],value:{node:mc,selector:"selectClass",klass:pc}}].concat(zd.map(function(Pd){return{isListItem:!0,label:["".concat(pc),{fontSize:"80%",textStyleClasses:["v-center-text"],
paddingRight:"10px"},"".concat(Pd.name[1]),{}],value:{node:Pd,selector:"selectMethod",klass:pc}}}))}),ta.next=6,C.world().filterableListPrompt("select class or method",fa,{historyId:"lively.morphic-object-editor-jump-def-hist",requester:C.view});case 6:Qa=ta.sent;Ua=Ea(Qa.selected,1);Gb=Ua[0];if(!Gb){ta.next=15;break}ta.next=12;return C[Gb.selector](Gb.klass,Gb.node.target);case 12:u.focus(),ma.scrollSelectionIntoView(),"selectClass"===Gb.selector&&(u.scroll=ua.pt(0,0));case 15:return ta.abrupt("return",
!0);case 16:case "end":return ta.stop()}},wa)}));return function(){return Pb.apply(this,arguments)}}()},{name:"save source",exec:function(){var Pb=cb(regeneratorRuntime.mark(function wa(){var ca,ma,u,O,P;return regeneratorRuntime.wrap(function(fa){for(;;)switch(fa.prev=fa.next){case 0:return fa.prev=0,ca=C.view,fa.next=4,C.doSave();case 4:ma=fa.sent;u=ma.success;O=ma.reason;P=ma.warnings;if(!(P&&0<P.length)){fa.next=11;break}ca.setStatusMessage(["Saved with warnings:"].concat(P.map(function(Qa){return'"'.concat(Qa.message,
'" on line ').concat(Qa.line)})).join("\n"),ua.StatusMessageWarning,5E3,{isCompact:!1});return fa.abrupt("return",!0);case 11:ca.setStatusMessage(u?"saved":O,u?ua.StatusMessageConfirm:ua.StatusMessageError,5E3,{extent:ua.pt(ca.width,40)});fa.next=17;break;case 14:fa.prev=14,fa.t0=fa["catch"](0),C.view.showError(fa.t0);case 17:return fa.abrupt("return",!0);case 18:case "end":return fa.stop()}},wa,null,[[0,14]])}));return function(){return Pb.apply(this,arguments)}}()},{name:"open class in system browser",
exec:function(){var Pb=cb(regeneratorRuntime.mark(function ca(wa){var ma,u=arguments;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return ma=1<u.length&&void 0!==u[1]?u[1]:{klass:null},O.abrupt("return",C.browseClass(ma.klass));case 2:case "end":return O.stop()}},ca)}));return function(wa){return Pb.apply(this,arguments)}}()},{name:"open object inspector for target",exec:function(){var Pb=cb(regeneratorRuntime.mark(function wa(){return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=
ca.next){case 0:return ca.abrupt("return",C.world().execCommand("open object inspector",{target:C.target}));case 1:case "end":return ca.stop()}},wa)}));return function(){return Pb.apply(this,arguments)}}()},{name:"freeze target",exec:function(){var Pb=cb(regeneratorRuntime.mark(function wa(){return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=ca.next){case 0:return ca.prev=0,ca.next=3,ua.interactivelyFreezePart(C.target,C.view);case 3:ca.next=8;break;case 5:ca.prev=5,ca.t0=ca["catch"](0),
"canceled"===ca.t0?C.view.setStatusMessage("canceled"):C.view.showError(ca.t0);case 8:case "end":return ca.stop()}},wa,null,[[0,5]])}));return function(){return Pb.apply(this,arguments)}}()},{name:"publish target to PartsBin",exec:function(){var Pb=cb(regeneratorRuntime.mark(function wa(){var ca,ma;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return ca=C.view,u.prev=1,u.next=4,ua.interactivelySavePart(C.target,{notifications:!1,loadingIndicator:!0});case 4:ma=u.sent;
ca.setStatusMessage(ma?"Published ".concat(C.target," as ").concat(ma.name):"Failed to publish part ".concat(C.target),ma?ua.StatusMessageConfirm:ua.StatusMessageError,5E3);u.next=11;break;case 8:u.prev=8,u.t0=u["catch"](1),"canceled"===u.t0?ca.setStatusMessage("canceled"):ca.showError(u.t0);case 11:case "end":return u.stop()}},wa,null,[[1,8]])}));return function(){return Pb.apply(this,arguments)}}()},{name:"choose target",exec:function(){var Pb=cb(regeneratorRuntime.mark(function wa(){var ca,ma,
u,O,P;return regeneratorRuntime.wrap(function(fa){for(;;)switch(fa.prev=fa.next){case 0:ca=C.view;if(!ca.env.eventDispatcher.isKeyPressed("Shift")){fa.next=18;break}if(!C.context.isRemote){fa.next=10;break}C._loadingIndicator=ua.LoadingIndicator.open("Connecting to Remote...");fa.next=6;return C.withContextDo(function(){var Qa=cb(regeneratorRuntime.mark(function ta(Gb){var mc,pc,zd,Pd;return regeneratorRuntime.wrap(function(bd){for(;;)switch(bd.prev=bd.next){case 0:if(Gb.target.isMorph){bd.next=2;
break}return bd.abrupt("return");case 2:return mc=function(){var Yd=cb(regeneratorRuntime.mark(function nf(Be,Ne,Re){var af,yf,Ig,re;return regeneratorRuntime.wrap(function(Ld){for(;;)switch(Ld.prev=Ld.next){case 0:return af=ua.stringifyFunctionWithoutToplevelRecorder(function(){var fc=cb(regeneratorRuntime.mark(function ff(Ie){var Pe;return regeneratorRuntime.wrap(function(Gf){for(;;)switch(Gf.prev=Gf.next){case 0:return Ie._loadingIndicator.remove(),Gf.next=3,Ie.world().filterableListPrompt(Be,
Ne,Re);case 3:return Pe=Gf.sent,Ie._loadingIndicator=ua.LoadingIndicator.open("Switching Target..."),Gf.abrupt("return",Pe);case 6:case "end":return Gf.stop()}},ff)}));return function(Ie){return fc.apply(this,arguments)}}()),Ld.next=3,Gb.withEditorDo(af,{items:Ne.map(function(fc){fc.value=fc.value.id;return fc}),title:Be,opts:Re});case 3:return yf=Ld.sent,Ig=yf.selected,re=yf.action,Ig=Ig.map(function(fc){return $world.getMorphWithId(fc)}),Ld.abrupt("return",{selected:Ig,action:re});case 7:case "end":return Ld.stop()}},
nf)}));return function(Be,Ne,Re){return Yd.apply(this,arguments)}}(),bd.next=5,$world.execCommand("select morph",{selectionFn:mc,justReturn:!0,root:[Gb.target].concat(rd(Gb.target.ownerChain())).find(function(Yd){return Yd.owner.isWorld})});case 5:pc=bd.sent;zd=Ea(pc,1);Pd=zd[0];if(!Pd){bd.next=11;break}bd.next=11;return Gb.selectTarget(Pd);case 11:case "end":return bd.stop()}},ta)}));return function(Gb){return Qa.apply(this,arguments)}}());case 6:return fa.next=8,C.refresh();case 8:return C._loadingIndicator.remove(),
fa.abrupt("return");case 10:return fa.next=12,C.world().execCommand("select morph",{justReturn:!0,root:[C.target].concat(rd(C.target.ownerChain())).find(function(Qa){return Qa.owner.isWorld})});case 12:ma=fa.sent;u=Ea(ma,1);(O=u[0])&&C.selectTarget(O);fa.next=22;break;case 18:return fa.next=20,ua.InteractiveMorphSelector.selectMorph(C.world());case 20:(P=fa.sent)&&C.selectTarget(P);case 22:return ca.focus(),fa.abrupt("return",C.target);case 24:case "end":return fa.stop()}},wa)}));return function(){return Pb.apply(this,
arguments)}}()},{name:"open browse snippet",exec:function(){return C.world().execCommand("open workspace",{content:C.browseSnippetForSelection(),language:"javascript"})}}]}},{key:"viewDidLoad",value:function(){var C=this;this.ui.sourceEditor.addCommands([{name:"[javascript] fix undeclared variables",exec:function(){return C.interactivlyFixUndeclaredVariables()}},{name:"[javascript] inject import",exec:function(){return C.interactivelyAddImport()}},{name:"[javascript] remove unused imports",exec:function(){return C.interactivelyRemoveUnusedImports()}}])}},
{key:"warnForUnsavedChanges",value:function(){var C=cb(regeneratorRuntime.mark(function da(){return regeneratorRuntime.wrap(function(wa){for(;;)switch(wa.prev=wa.next){case 0:return wa.next=2,this.world().confirm(["Discard Changes\n",{},"The unsaved changes to this module are going to be discarded.\nAre you sure you want to proceed?",{fontSize:16,fontWeight:"normal"}],{requester:this.view,width:350});case 2:return wa.abrupt("return",wa.sent);case 3:case "end":return wa.stop()}},da,this)}));return function(){return C.apply(this,
arguments)}}()},{key:"onWindowClose",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa;return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=ca.next){case 0:return wa=!0,ca.next=3,this.hasUnsavedChanges();case 3:if(!ca.sent){ca.next=7;break}ca.next=6;return this.warnForUnsavedChanges();case 6:wa=ca.sent;case 7:if(!wa){ca.next=11;break}this.context.dispose();ca.next=12;break;case 11:return ca.abrupt("return",!1);case 12:case "end":return ca.stop()}},da,this)}));return function(){return C.apply(this,
arguments)}}()},{key:"isShowingImports",value:function(){return 10<this.view.layout.grid.col(2).width}},{key:"sourceDescriptorFor",value:function(C){return ua.RuntimeSourceDescriptor["for"](C)}},{key:"classChainOfTarget",value:function(){return ua.withSuperclasses(this.target.constructor)}},{key:"toggleShowingImports",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa,ca,ma,u,O,P,fa,Qa,Ua,Gb=arguments;return regeneratorRuntime.wrap(function(ta){for(;;)switch(ta.prev=ta.next){case 0:return wa=
0<Gb.length&&void 0!==Gb[0]?Gb[0]:300,ca=this.view,ma=this.ui,u=ma.importController,O=ma.sourceEditor,P=u.getExpandedWidth(),Qa=(fa=!this.isShowingImports())?P:-P,Ua=ca.layout.grid.col(2),ca.layout.disable(),u.layout.disable(),Ua.width+=Qa,Ua.before.width-=Qa,u.layout.col(0).width=fa?P:0,u.layout.enable(wa?{duration:wa}:null),ta.next=14,ca.layout.enable(wa?{duration:wa}:null);case 14:return(fa?u:O).focus(),ta.next=17,ua.promise.delay(2*wa);case 17:case "end":return ta.stop()}},da,this)}));return function(){return C.apply(this,
arguments)}}()},{key:"ensureProperWindowStyle",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa,ca,ma,u,O,P=arguments;return regeneratorRuntime.wrap(function(fa){for(;;)switch(fa.prev=fa.next){case 0:return wa=0<P.length&&void 0!==P[0]?P[0]:!0,ca=300,O=this.view.getWindow(),fa.next=5,this.editorPlugin.runEval("System.get('@system-env').node");case 5:if(!fa.sent.value){fa.next=10;break}u=[].concat(rd(ua.arr.without(O.styleClasses,"local")),["node"]);ma=ua.DarkTheme.instance;fa.next=
12;break;case 10:u=["local"].concat(rd(ua.arr.without(O.styleClasses,"node"))),ma=ua.DefaultTheme.instance;case 12:this.editorPlugin.theme=ma,wa?(O.animate({duration:ca,styleClasses:u}),this.ui.sourceEditor.animate({fill:ma.background,duration:ca})):O.styleClasses=u,this.ui.sourceEditor.textString=this.ui.sourceEditor.textString,this.editorPlugin.highlight();case 16:case "end":return fa.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"selectTarget",value:function(){var C=
cb(regeneratorRuntime.mark(function ca(da,wa){var ma,u,O,P;return regeneratorRuntime.wrap(function(fa){for(;;)switch(fa.prev=fa.next){case 0:return ma=this.ui,u=ma.classTree,O=ma.openInBrowserButton,P=ma.publishButton,fa.next=3,ua.ObjectEditorContext["for"](da,this,wa);case 3:return this.context=fa.sent,fa.next=6,this.withContextDo(function(Qa){return!Qa.target.isMorph});case 6:if(!fa.sent){fa.next=10;break}P.disable();fa.next=11;break;case 10:P.enable();case 11:return fa.next=13,this.withContextDo(function(Qa){return!Qa.target.constructor[Symbol["for"]("lively-module-meta")]["package"].name});
case 13:if(!fa.sent){fa.next=17;break}O.disable();fa.next=18;break;case 17:O.enable();case 18:return fa.next=20,this.withContextDo(function(Qa){return Qa.classTreeData});case 20:return u.treeData=fa.sent,fa.next=23,this.selectClass(this.context.selectedClassName);case 23:this.ensureProperWindowStyle();case 24:case "end":return fa.stop()}},ca,this)}));return function(da,wa){return C.apply(this,arguments)}}()},{key:"withContextDo",value:function(){var C=cb(regeneratorRuntime.mark(function ca(da,wa){return regeneratorRuntime.wrap(function(ma){for(;;)switch(ma.prev=
ma.next){case 0:return ma.next=2,this.context.withContextDo(da,wa);case 2:return ma.abrupt("return",ma.sent);case 3:case "end":return ma.stop()}},ca,this)}));return function(da,wa){return C.apply(this,arguments)}}()},{key:"refresh",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa,ca,ma,u,O,P,fa,Qa,Ua=arguments;return regeneratorRuntime.wrap(function(Gb){for(;;)switch(Gb.prev=Gb.next){case 0:return wa=0<Ua.length&&void 0!==Ua[0]?Ua[0]:!1,ca=this.ui,ma=ca.sourceEditor,u=ca.classTree,
O=ma.cursorPosition,Gb.next=5,this.withContextDo(function(){var ta=cb(regeneratorRuntime.mark(function zd(pc){var Pd;return regeneratorRuntime.wrap(function(bd){for(;;)switch(bd.prev=bd.next){case 0:return Pd={className:pc.selectedClass&&pc.selectedClass.name,methodName:pc.selectedMethod&&pc.selectedMethod.name},bd.next=3,pc.refresh();case 3:return Pd.treeData=pc.classTreeData,bd.abrupt("return",Pd);case 5:case "end":return bd.stop()}},zd)}));return function(pc){return ta.apply(this,arguments)}}());
case 5:return P=Gb.sent,fa=P.className,Qa=P.treeData,Gb.next=10,u.maintainViewStateWhile(function(){return u.treeData=Qa},function(ta){return ta.isClass?ta.target:ta.name});case 10:if(!fa||u.selectedNode){Gb.next=13;break}Gb.next=13;return this.selectClass(fa);case 13:wa&&(ma.cursorPosition=O);case 14:case "end":return Gb.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"updateKnownGlobals",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa;return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=
ca.next){case 0:return ca.next=2,this.withContextDo(function(){var ma=cb(regeneratorRuntime.mark(function P(O){var fa,Qa,Ua;return regeneratorRuntime.wrap(function(Gb){for(;;)switch(Gb.prev=Gb.next){case 0:fa=[];Qa=O.selectedClass;if(!Qa){Gb.next=8;break}Ua=O.sourceDescriptorFor(Qa);Gb.next=6;return Ua.declaredAndUndeclaredNames;case 6:ua.__inter0__=Gb.sent,fa=ua.__inter0__.declaredNames;case 8:return Object.assign(O.evalEnvironment,{knownGlobals:fa}),Gb.abrupt("return",fa);case 10:case "end":return Gb.stop()}},
P)}));return function(O){return ma.apply(this,arguments)}}());case 2:wa=ca.sent,Object.assign(this.editorPlugin.evalEnvironment,{knownGlobals:wa}),this.editorPlugin.highlight();case 5:case "end":return ca.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"updateSource",value:function(){var C=cb(regeneratorRuntime.mark(function wa(da){var ca,ma,u,O,P=arguments;return regeneratorRuntime.wrap(function(fa){for(;;)switch(fa.prev=fa.next){case 0:return ca=1<P.length&&void 0!==
P[1]?P[1]:"lively://object-editor/"+this.id,ma=this.ui.sourceEditor,fa.next=4,this.withContextDo(function(){var Qa=cb(regeneratorRuntime.mark(function ta(Gb){var mc,pc;return regeneratorRuntime.wrap(function(zd){for(;;)switch(zd.prev=zd.next){case 0:return mc=Gb.evalEnvironment.systemInterface,zd.next=3,mc.moduleFormat(ca);case 3:zd.t0=zd.sent;if(zd.t0){zd.next=6;break}zd.t0="esm";case 6:return pc=zd.t0,Object.assign(Gb.evalEnvironment,{targetModule:ca,format:pc}),zd.abrupt("return",pc);case 9:case "end":return zd.stop()}},
ta)}));return function(Gb){return Qa.apply(this,arguments)}}(),{targetModule:ca});case 4:return u=fa.sent,ma.textString!==da&&(ma.textString=da),Object.assign(this.editorPlugin.evalEnvironment,{targetModule:ca,format:u}),O=ua.string.hashCode(da),fa.next=10,this.withContextDo(function(Qa){Qa.moduleChangeWarning=null;Qa.sourceHash=O},{hashCode:O});case 10:return fa.next=12,this.clearLocalProperties();case 12:this.indicateNoUnsavedChanges();case 13:case "end":return fa.stop()}},wa,this)}));return function(da){return C.apply(this,
arguments)}}()},{key:"clearLocalProperties",value:function(){var C=cb(regeneratorRuntime.mark(function da(){return regeneratorRuntime.wrap(function(wa){for(;;)switch(wa.prev=wa.next){case 0:return wa.next=2,this.withContextDo(function(ca){var ma=ca.target.propertiesAndPropertySettings().properties,u;for(u in ma)!ca.target.hasOwnProperty(u)||ca.target[u]&&ca.target[u].isConnectionWrapper||ca.hasOwnProperty("$$"+u)&&delete ca.target[u]});case 2:case "end":return wa.stop()}},da,this)}));return function(){return C.apply(this,
arguments)}}()},{key:"indicateUnsavedChanges",value:function(){var C=this.ui.sourceEditor;this.view.layout.col(1).paddingRight=1;C.padding=C.padding.withWidth(-1);C.borderColor=ua.Color.red}},{key:"indicateNoUnsavedChanges",value:function(){var C=this.ui.sourceEditor;this.view.layout.col(1).paddingRight=0;C.padding=C.padding.withWidth(0);C.borderColor=ua.Color.gray}},{key:"hasUnsavedChanges",value:function(){var C=cb(regeneratorRuntime.mark(function da(){return regeneratorRuntime.wrap(function(wa){for(;;)switch(wa.prev=
wa.next){case 0:return wa.next=2,this.withContextDo(function(ca){return ca.sourceHash});case 2:return wa.t0=wa.sent,wa.t1=ua.string.hashCode(this.ui.sourceEditor.textString),wa.abrupt("return",wa.t0!==wa.t1);case 5:case "end":return wa.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"updateUnsavedChangeIndicator",value:function(){var C=cb(regeneratorRuntime.mark(function da(){return regeneratorRuntime.wrap(function(wa){for(;;)switch(wa.prev=wa.next){case 0:return wa.next=
2,this.hasUnsavedChanges();case 2:if(!wa.sent){wa.next=6;break}wa.t0="indicateUnsavedChanges";wa.next=7;break;case 6:wa.t0="indicateNoUnsavedChanges";case 7:wa.t1=wa.t0,this[wa.t1]();case 9:case "end":return wa.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"updateUnsavedChangeIndicatorDebounced",value:function(){var C=this;ua.fun.debounceNamed(this.id+"-updateUnsavedChangeIndicatorDebounced",20,function(){return C.updateUnsavedChangeIndicator()})()}},{key:"reactToModuleChange",
value:function(){var C=cb(regeneratorRuntime.mark(function wa(da){var ca;return regeneratorRuntime.wrap(function(ma){for(;;)switch(ma.prev=ma.next){case 0:return ca=this.ui.sourceEditor,ma.next=3,this.hasUnsavedChanges();case 3:if(!ma.sent){ma.next=8;break}if(ua.string.hashCode(ca.textString)===ua.string.hashCode(da)){ma.next=8;break}ma.next=7;return this.withContextDo(function(u){return u.addModuleChangeWarning()});case 7:return ma.abrupt("return");case 8:return ma.next=10,this.refresh(!0);case 10:case "end":return ma.stop()}},
wa,this)}));return function(da){return C.apply(this,arguments)}}()},{key:"onModuleChanged",value:function(){var C=cb(regeneratorRuntime.mark(function wa(da){var ca;return regeneratorRuntime.wrap(function(ma){for(;;)switch(ma.prev=ma.next){case 0:if(this.context&&!this.context.isRemote){ma.next=2;break}return ma.abrupt("return");case 2:return ma.next=4,this.context.onModuleChanged(da);case 4:(ca=ma.sent)&&this.reactToModuleChange(ca);case 6:case "end":return ma.stop()}},wa,this)}));return function(da){return C.apply(this,
arguments)}}()},{key:"onModuleLoaded",value:function(C){this.onModuleChanged(C)}},{key:"browse",value:function(){var C=cb(regeneratorRuntime.mark(function wa(da){var ca,ma,u,O,P,fa,Qa,Ua,Gb,ta;return regeneratorRuntime.wrap(function(mc){for(;;)switch(mc.prev=mc.next){case 0:ca=da.target;ma=da.className;u=da.methodName;O=da.textPosition;P=da.scroll;fa=da.classTreeScroll;Qa=da.evalEnvironment;if(!ca){mc.next=4;break}mc.next=4;return this.selectTarget(ca,Qa);case 4:if(ma){mc.next=8;break}mc.next=7;return this.withContextDo(function(pc){return pc.selectedClass.name});
case 7:ma=mc.sent;case 8:if(!ma||!u){mc.next=13;break}mc.next=11;return this.selectMethod(ma,u,!1);case 11:mc.next=16;break;case 13:if(!ma){mc.next=16;break}mc.next=16;return this.selectClass(ma);case 16:return Ua=this.ui,Gb=Ua.classTree,ta=Ua.sourceEditor,P&&(ta.scroll=P),O&&(ta.cursorPosition=O),fa&&(Gb.scroll=fa),mc.abrupt("return",this);case 21:case "end":return mc.stop()}},wa,this)}));return function(da){return C.apply(this,arguments)}}()},{key:"browseSpec",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa,
ca,ma,u,O,P,fa,Qa,Ua,Gb=arguments;return regeneratorRuntime.wrap(function(ta){for(;;)switch(ta.prev=ta.next){case 0:return wa=0<Gb.length&&void 0!==Gb[0]?Gb[0]:!0,ca=this.ui,ma=ca.classTree.scroll,u=ca.sourceEditor,O=u.scroll,P=u.cursorPosition,ta.next=4,this.withContextDo(function(mc){return{className:mc.selectedClass&&mc.selectedClass.name,methodName:mc.selectedMethod&&mc.selectedMethod.name}});case 4:return fa=ta.sent,Qa=fa.className,Ua=fa.methodName,ta.abrupt("return",Object.assign({target:this.context.target,
className:Qa,methodName:Ua,evalEnvironment:this.context.evalEnvironment},wa?{scroll:O,textPosition:P,classTreeScroll:ma}:{}));case 8:case "end":return ta.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"browseClass",value:function(){var C=cb(regeneratorRuntime.mark(function wa(da){var ca,ma,u;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!da){O.next=4;break}ua.__inter1__=this.context.sourceDescriptorFor(da);ca=ua.__inter1__.name;
u=ua.__inter1__.module;ma=u.id;u;O.next=9;break;case 4:return O.next=6,this.withContextDo(function(P){if(!P.selectedClass)return{};P=P.sourceDescriptorFor(P.selectedClass);return{className:P.name,moduleName:P.module.id}});case 6:ua.__inter2__=O.sent,ca=ua.__inter2__.className,ma=ua.__inter2__.moduleName;case 9:if(!ma||!ca){O.next=11;break}return O.abrupt("return",this.world().execCommand("open browser",{moduleName:ma,codeEntity:{name:ca},systemInterface:this.systemInterface}));case 11:return this.view.setStatusMessage("No class specified"),
O.abrupt("return",!0);case 13:case "end":return O.stop()}},wa,this)}));return function(da){return C.apply(this,arguments)}}()},{key:"browseSnippetForSelection",value:function(){var C=this.context.selectedClassName,Pb=this.selectedMethod;var da='$world.execCommand("open object editor", {'+"target: ".concat(ua.generateReferenceExpression(this.target));C&&(da+=', selectedClass: "'.concat(C,'"'));Pb&&C&&(da+=', selectedMethod: "'.concat(Pb.name,'"'));return da+"});"}},{key:"onClassTreeSelection",value:function(C){if(C)if(ua.obj.isString(C.target)||
ua.isClass(C.target))this.selectClass(C.target);else{var Pb=this.ui.classTree.treeData.parentNode(C),da=!!ua.Path("env.eventDispatcher.eventState.clickedOnMorph").get(this.view);this.selectMethod(Pb.target,C.target,da)}}},{key:"contextMenuForClassTree",value:function(C){var Pb=C.node;C=C.evt;C.stop();if(Pb&&Pb.target){Pb=ua.isClass(Pb.target)?Pb.target:Pb.target.owner&&ua.isClass(Pb.target.owner)?Pb.target.owner:ua.obj.isString(Pb.target)?Pb.target:null;var da=[];Pb&&da.push({command:"open browse snippet",
target:this.view});if(ua.obj.isString(Pb)?this.context.selectedClassName===Pb:this.context.selectedClass===Pb){var wa=[];"Morph"!==Pb.name&&wa.push({alias:"by superclass",command:"adopt by superclass",target:this.view});wa.push({alias:"by custom class...",command:"adopt by another class",target:this.view});da.push(["adopt by...",wa])}return this.world().openWorldMenu(C,da)}}},{key:"selectClass",value:function(){var C=cb(regeneratorRuntime.mark(function wa(da){var ca=this,ma,u,O,P,fa,Qa;return regeneratorRuntime.wrap(function(Ua){for(;;)switch(Ua.prev=
Ua.next){case 0:if(!this._updatingTree){Ua.next=2;break}return Ua.abrupt("return");case 2:ma=this.ui.classTree;u="string"===typeof da?da:da.name;if(this.context.selectedClassName===u){Ua.next=25;break}Ua.t1=ma.selectedNode;if(!Ua.t1){Ua.next=10;break}Ua.next=9;return this.hasUnsavedChanges();case 9:Ua.t1=Ua.sent;case 10:Ua.t0=Ua.t1;if(!Ua.t0){Ua.next=13;break}Ua.t0=this.ui.sourceEditor.textString;case 13:if(!Ua.t0){Ua.next=23;break}Ua.next=16;return this.warnForUnsavedChanges();case 16:if(O=Ua.sent){Ua.next=
23;break}P=ma.nodes.find(function(Gb){return!Gb.isRoot&&Gb.isClass&&Gb.klass.name===ca.context.selectedClassName});this._updatingTree=!0;ma.selectedNode=P;this._updatingTree=!1;return Ua.abrupt("return");case 23:return Ua.next=25,this.context.selectClass(u);case 25:return Ua.next=27,this.withContextDo(function(Gb){return ua.isObjectClass(Gb.selectedClass)});case 27:if(!Ua.sent){Ua.next=31;break}this.ui.forkPackageButton.enable();Ua.next=32;break;case 31:this.ui.forkPackageButton.disable();case 32:return Ua.next=
34,this.withContextDo(function(){var Gb=cb(regeneratorRuntime.mark(function pc(mc){var zd;return regeneratorRuntime.wrap(function(Pd){for(;;)switch(Pd.prev=Pd.next){case 0:mc.selectedMethod=null;zd=mc.sourceDescriptorFor(mc.selectedClass);if(zd._moduleSource||!zd.module._frozenModule){Pd.next=6;break}Pd.next=5;return zd.module.source();case 5:zd._moduleSource=Pd.sent;case 6:return Pd.abrupt("return",{source:zd.source,moduleId:zd.module.id});case 7:case "end":return Pd.stop()}},pc)}));return function(mc){return Gb.apply(this,
arguments)}}());case 34:return fa=Ua.sent,Ua.t2=this,Ua.next=38,fa.source;case 38:return Ua.t3=Ua.sent,Ua.t4=fa.moduleId,Ua.next=42,Ua.t2.updateSource.call(Ua.t2,Ua.t3,Ua.t4);case 42:return Ua.next=44,this.updateKnownGlobals();case 44:return Ua.next=46,this.updateTitle();case 46:return Ua.next=48,this.ui.importController.setModule(fa.moduleId);case 48:ma.selectedNode&&ma.selectedNode.target===da||(Qa=ma.nodes.find(function(Gb){return!Gb.isRoot&&Gb.isClass&&Gb.name===da}),ma.selectedNode=Qa);case 49:case "end":return Ua.stop()}},
wa,this)}));return function(da){return C.apply(this,arguments)}}()},{key:"selectMethod",value:function(){var C=cb(regeneratorRuntime.mark(function ca(da,wa){var ma,u,O,P,fa,Qa,Ua,Gb,ta,mc,pc=arguments;return regeneratorRuntime.wrap(function(zd){for(;;)switch(zd.prev=zd.next){case 0:return ma=2<pc.length&&void 0!==pc[2]?pc[2]:!0,u=3<pc.length&&void 0!==pc[3]?pc[3]:!1,O=da.name||da,wa.name||(wa={name:wa}),zd.next=6,this.context.selectMethod(O,wa);case 6:if(P=zd.sent){zd.next=10;break}this.setStatusMessage("Cannot find method ".concat(wa.name));
return zd.abrupt("return");case 10:return zd.next=12,this.updateTitle();case 12:return fa=this.ui.classTree,zd.next=15,this.withContextDo(function(Pd){return Pd.selectedClass.name!==O},{className:O});case 15:Qa=zd.sent;if(!Qa&&fa.selectedNode){zd.next=19;break}zd.next=19;return this.selectClass(da);case 19:return zd.next=21,fa.uncollapse(fa.selectedNode);case 21:fa.selectedNode&&fa.selectedNode.target===wa||(Ua=fa.nodes.find(function(Pd){return!Pd.isClass&&!Pd.isRoot&&Pd.target.owner===da&&Pd.target.name===
wa.name}),fa.selectedNode=Ua,fa.scrollSelectionIntoView()),Gb=this.ui.sourceEditor,ta=Gb.indexToPosition(u?P.value.body.start+1:P.key.start),Gb.cursorPosition=ta,Gb.scrollCursorIntoView(),mc={start:Gb.indexToPosition(P.start),end:Gb.indexToPosition(P.end)},Gb.centerRange(mc),ma&&Gb.flash(mc,{id:"method",time:1E3,fill:Gb.selectionColor||ua.Color.blue.withA(.2)}),this.selectedMethodName=wa.name;case 30:case "end":return zd.stop()}},ca,this)}));return function(da,wa){return C.apply(this,arguments)}}()},
{key:"displayFrozenWarningIfNeeded",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa,ca,ma,u;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return wa=this.view,O.next=3,this.withContextDo(function(P){return P.selectedModule._frozenModule&&{pkgName:P.selectedModule["package"]().name,moduleName:P.selectedModule.pathInPackage()}});case 3:if(ca=O.sent)this.ui.frozenWarning.textString='The module "'.concat(ca.pkgName,"/").concat(ca.moduleName,'" you are viewing is frozen. You are not able to make changes to this module unless you reload the world with dynamic load enabled for the package "').concat(ca.pkgName,
'".');this.ui.saveButton.deactivated=!!ca;ma=wa.layout.row(1).height;u=wa.layout.row(1);wa.layout.disable();u.height=ca?80:0;u.after.height-=ma!==u.height?ca?80:-80:0;wa.layout.enable({duration:300});case 12:case "end":return O.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"updateTitle",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa,ca,ma;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(wa=this.view.getWindow()){u.next=
3;break}return u.abrupt("return");case 3:return ca="ObjectEditor",u.t0=ca,u.next=7,this.withContextDo(function(O){return O.getTitle()});case 7:ca=u.t0+=u.sent,ma=this.systemInterface.coreInterface.url,ca+=ma?" [".concat(ma,"]"):"",wa.title=ca,wa.relayoutWindowControls();case 12:case "end":return u.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"doSave",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa=this,ca,ma,u,O,P,fa,Qa,Ua,Gb,ta,mc,pc,zd,Pd,
bd,Yd;return regeneratorRuntime.wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return ca=this.ui.sourceEditor,le.next=3,this.withContextDo(function(Be){return!Be.selectedClass});case 3:if(!le.sent){le.next=5;break}return le.abrupt("return",{success:!1,reason:"No class selected"});case 5:return le.next=7,this.withContextDo(function(Be){return Be.selectedModule._frozenModule});case 7:if(!le.sent){le.next=9;break}return le.abrupt("return",{success:!1,reason:"Frozen modules can not be altered"});
case 9:if(!ua.config.objectEditor.fixUndeclaredVarsOnSave){le.next=15;break}le.next=12;return this.execCommand("[javascript] fix undeclared variables");case 12:if(ma=le.sent){le.next=15;break}return le.abrupt("return",{success:!1,reason:"Save canceled"});case 15:return O=ca.textString,le.next=18,this.withContextDo(function(Be){Be=Be.selectedClass;var Ne=ua.parse(O);if(1!==Ne.body.length||"ClassDeclaration"!==Ne.body[0].type)return{success:!1,reason:"Code is expected to contain the class definition of ".concat(Be,
", aborting save.")};Ne=Ne.body[0];var Re=O.slice(Ne.id.start,Ne.id.end);Re!==Be.name&&(O=O.slice(0,Ne.id.start)+Be.name+O.slice(Ne.id.end));return{content:O,className:Re}},{content:O});case 18:return ua.__inter3__=le.sent,O=ua.__inter3__.content,u=ua.__inter3__.className,P=!1,fa=ua.lint(O,{"no-unused-vars":["warn",{args:"none",varsIgnorePattern:"_|".concat(u)}]}),Qa=Ea(fa,2),O=Qa[0],P=Qa[1],Ua=ua.string.hashCode(O),le.next=29,this.withContextDo(function(Be){var Ne=Be.selectedModule;return{selectedModuleId:Ne.id,
sourceChanged:Be.sourceHash!==Ua,outsideChangeWarning:Be.moduleChangeWarning===Ne.id}},{editorSourceHash:Ua});case 29:return Gb=le.sent,ta=Gb.sourceChanged,mc=Gb.outsideChangeWarning,pc=Gb.selectedModuleId,le.next=35,this.withContextDo(function(Be){var Ne=ua.parse(O);Ne=Ea(ua.query.topLevelDeclsAndRefs(Ne).classDecls,1)[0];Ne=ua.query.nodesInScopeOf(Ne).filter(function(Re){return"MethodDefinition"===Re.type&&ua.DANGEROUS_METHODS_TO_OVERRIDE.includes(Re.key.name)&&!Be.selectedClass.prototype.hasOwnProperty(Re.key.name)});
return Ne.length?Ne.map(function(Re){return Re.key.name}):!1});case 35:if(zd=le.sent,!zd){le.next=45;break}case 37:if(!(Pd=zd.pop())){le.next=45;break}le.next=40;return this.world().confirm(["System Method Override\n",{},"You are about to override ",{fontWeight:"normal",fontSize:16},Pd+"()",{fontWeight:"bold",fontStyle:"italic"}," which is a method at the core of the System. You should only proceed if you are absolutely sure you know what you are doing, else you may cause to crash the running System.",
{fontWeight:"normal"}],{width:400,requester:this});case 40:if(bd=le.sent){le.next=43;break}return le.abrupt("return",{success:!1});case 43:le.next=37;break;case 45:if(!ta||!mc){le.next=53;break}le.next=48;return this.world().confirm(["Simultaneous Change Warning\n",{},"The module ".concat(pc," you are trying to save changed elsewhere!\nOverwrite those changes?"),{fontSize:16,fontWeight:"normal"}],{requester:this});case 48:if(Yd=le.sent){le.next=51;break}return le.abrupt("return",{success:!1,reason:"Save canceled"});
case 51:return le.next=53,this.withContextDo(function(Be){return Be.moduleChangeWarning=null});case 53:return this.backupSourceInLocalStorage(O),le.prev=54,le.next=57,this.withContextDo(function(){var Be=cb(regeneratorRuntime.mark(function nf(Re){return regeneratorRuntime.wrap(function(af){for(;;)switch(af.prev=af.next){case 0:return Re.isSaving=!0,af.next=3,wa.sourceDescriptorFor(Re.selectedClass).changeSource(O);case 3:case "end":return af.stop()}},nf)}));return function(Re){return Be.apply(this,
arguments)}}(),{content:O});case 57:return le.next=59,ca.saveExcursion(cb(regeneratorRuntime.mark(function Ne(){return regeneratorRuntime.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return Re.next=2,wa.refresh();case 2:case "end":return Re.stop()}},Ne)})));case 59:return le.next=61,this.withContextDo(function(Ne){Ne.updatePackageConfig(ta)},{sourceChanged:ta});case 61:return le.abrupt("return",{success:!0,warnings:P});case 62:return le.prev=62,this.jumpToMethodAtCursorPosition(),le.next=
66,this.withContextDo(function(Ne){return Ne.isSaving=!1});case 66:return this.updateSource(O,pc),le.finish(62);case 68:this.target instanceof ua.ViewModel&&(this.target.reifyBindings(),this.target.reifyExposedProps());case 69:case "end":return le.stop()}},da,this,[[54,,62,68]])}));return function(){return C.apply(this,arguments)}}()},{key:"jumpToMethodAtCursorPosition",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa,ca,ma,u;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=
O.next){case 0:return O.abrupt("return");case 5:wa=O.sent,ca=Ea(wa,2),ma=ca[0],u=ca[1],this.selectMethod(u,ma.key.name,!1);case 10:case "end":return O.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"backupSourceInLocalStorage",value:function(C){var Pb=JSON.parse(localStorage.getItem("oe helper")||'{"saves": []}');Pb.saves.some(function(da){return"string"===typeof da?da===C:da.source===C})||(100<Pb.saves.length&&(Pb.saves=Pb.saves.slice(40,100)),Pb.saves.push({source:C,
time:Date.now()}),localStorage.setItem("oe helper",JSON.stringify(Pb)))}},{key:"interactivelyAddObjectPackageAndMethod",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa,ca,ma,u,O,P,fa;return regeneratorRuntime.wrap(function(Qa){for(;;)switch(Qa.prev=Qa.next){case 0:return O=ua.LoadingIndicator.open("Lookup Package..."),P=this.view.getWindow(),Qa.prev=2,Qa.next=5,this.withContextDo(function(Ua){var Gb=ua.ObjectPackage.lookupPackageForObject(Ua.target);return{objPkgName:Gb&&Gb.id,
className:ua.getClassName(Ua.target),stringifiedTarget:Ua.target.toString()}});case 5:ua.__inter4__=Qa.sent;wa=ua.__inter4__.objPkgName;ca=ua.__inter4__.className;u=ua.__inter4__.stringifiedTarget;if(wa){Qa.next=35;break}O.remove();Qa.next=13;return this.withContextDo(function(){var Ua=ua.ObjectPackage.lookupPackageForObject($world);if(Ua)return Ua.name});case 13:fa=Qa.sent;if(!fa){Qa.next=25;break}Qa.next=17;return this.world().prompt(["New Class\n",{},"Regarding the object:\n",{fontSize:16,fontWeight:"normal"},
u,{fontSize:16,fontStyle:"italic",fontWeight:"normal"},"\nEnter a name for the new class of this object:",{fontSize:16,fontWeight:"normal"}],{historyId:"object-package-name-hist",requester:P,width:400,input:ua.string.capitalize(ca).replace(/\s+(.)/g,function(Ua,Gb){return Gb.toUpperCase()})});case 17:if(ca=Qa.sent){Qa.next=21;break}P.setStatusMessage("Canceled");return Qa.abrupt("return");case 21:return Qa.next=23,this.withContextDo(function(){var Ua=cb(regeneratorRuntime.mark(function mc(ta){var pc,
zd,Pd;return regeneratorRuntime.wrap(function(bd){for(;;)switch(bd.prev=bd.next){case 0:return pc=ua.ObjectPackage.withId(fa),zd=ca[0].toLowerCase()+ca.slice(1)+".js",bd.next=4,pc.ensureSubModule(zd);case 4:return Pd=bd.sent,bd.next=7,Pd.adoptObject(ta.target,ca);case 7:case "end":return bd.stop()}},mc)}));return function(ta){return Ua.apply(this,arguments)}}(),{className:ca,worldPkgUrl:fa});case 23:Qa.next=35;break;case 25:return Qa.next=27,this.world().prompt(["New Object Package\n",{},"No object package exists yet for object\n",
{fontSize:16,fontWeight:"normal"},u,{fontSize:16,fontStyle:"italic",fontWeight:"normal"},"\nEnter a name for a new package:",{fontSize:16,fontWeight:"normal"}],{historyId:"object-package-name-hist",requester:P,width:400,input:ua.string.capitalize(ca).replace(/\s+(.)/g,function(Ua,Gb){return Gb.toUpperCase()})});case 27:if(wa=Qa.sent){Qa.next=31;break}P.setStatusMessage("Canceled");return Qa.abrupt("return");case 31:return O.label="Creating Class...",O.openInWorld(),Qa.next=35,this.withContextDo(function(){var Ua=
cb(regeneratorRuntime.mark(function mc(ta){var pc;return regeneratorRuntime.wrap(function(zd){for(;;)switch(zd.prev=zd.next){case 0:return pc=ua.ObjectPackage.withId(wa),zd.next=3,pc.adoptObject(ta.target);case 3:case "end":return zd.stop()}},mc)}));return function(ta){return Ua.apply(this,arguments)}}(),{objPkgName:wa});case 35:return O.label="Adding method...",Qa.next=38,this.withContextDo(function(){var Ua=cb(regeneratorRuntime.mark(function mc(ta){var pc,zd;return regeneratorRuntime.wrap(function(Pd){for(;;)switch(Pd.prev=
Pd.next){case 0:return Pd.next=2,ta.addNewMethod();case 2:return pc=Pd.sent,zd=pc.methodName,Pd.abrupt("return",{methodName:zd,className:ta.target.constructor[Symbol["for"]("__LivelyClassName__")]});case 5:case "end":return Pd.stop()}},mc)}));return function(ta){return Ua.apply(this,arguments)}}());case 38:return ua.__inter5__=Qa.sent,ca=ua.__inter5__.className,ma=ua.__inter5__.methodName,O.remove(),Qa.next=44,this.refresh();case 44:return Qa.next=46,this.selectMethod(ca,ma,!0,!0);case 46:this.ui.sourceEditor.focus();
Qa.next=53;break;case 49:Qa.prev=49,Qa.t0=Qa["catch"](2),O.remove(),P.showError(Qa.t0);case 53:case "end":return Qa.stop()}},da,this,[[2,49]])}));return function(){return C.apply(this,arguments)}}()},{key:"interactivelyRemoveMethodOrClass",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa,ca,ma;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.withContextDo(function(O){return{selectedMethod:ua.Path("selectedMethod.name").get(O),
selectedClass:ua.Path("selectedClass.name").get(O)}});case 2:wa=u.sent;ca=wa.selectedMethod;ma=wa.selectedClass;if(!ca){u.next=7;break}return u.abrupt("return",this.interactivelyRemoveMethod());case 7:if(!ma){u.next=9;break}return u.abrupt("return",this.interactivelyAdoptBySuperclass());case 9:case "end":return u.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"interactivelyAdoptByClass",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa,ca,ma,u,
O;return regeneratorRuntime.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return wa=ua.LoadingIndicator.open("fetching modules..."),P.next=3,this.withContextDo(function(){var fa=cb(regeneratorRuntime.mark(function Gb(Ua){var ta,mc,pc,zd,Pd,bd,Yd,le,Be;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return ta=Ua.evalEnvironment.systemInterface,Ne.next=3,ta.getModules();case 3:return mc=Ne.sent,Ne.next=6,pd.import("./index-ca98f65e.js").then(function(Re){return Re.m});
case 6:pc=Ne.sent,zd=pc.module,Pd=[],bd=W(mc),Ne.prev=10,le=regeneratorRuntime.mark(function nf(){var af,yf,Ig,re,Ld,fc,wd,Ie,ff,Pe,Gf,Vf;return regeneratorRuntime.wrap(function(cd){for(;;)switch(cd.prev=cd.next){case 0:af=Yd.value;if(!af.name.endsWith(".md")){cd.next=3;break}return cd.abrupt("return","continue");case 3:return cd.next=5,ta.getPackageForModule(af.name);case 5:Ig=(yf=cd.sent)?yf.name+"/"+ta.shortModuleName(af.name,yf):af.name;re=zd(af.name);if("esm"===re.format()||"register"===re.format()){cd.next=
10;break}return cd.abrupt("return","continue");case 10:return cd.next=12,re.imports();case 12:cd.t0=function(Y){return Y.local};Ld=cd.sent.map(cd.t0);if(!Ua.target.isMorph){cd.next=20;break}cd.next=17;return pd.import("./__rootModule___commonjs-entry-71573ff5.js").then(function(Y){return Y.cj});case 17:cd.t1=cd.sent;cd.next=21;break;case 20:cd.t1={};case 21:return fc=cd.t1,wd=fc.Morph,cd.next=25,re.scope();case 25:cd.t2=function(Y){return Y.id.name};Ie=cd.sent.classDecls.map(cd.t2);ff=ua.obj.values(re.recorder).filter(function(Y){return ua.isClass(Y)&&
!Ld.includes(Y.name)&&Ie.includes(Y.name)&&(Ua.target.isMorph?ua.withSuperclasses(Y).includes(wd):!0)});Pe=W(ff);try{for(Pe.s();!(Gf=Pe.n()).done;)Vf=Gf.value,Pd.push({isListItem:!0,string:"".concat(Ig," ").concat(Vf.name),value:{moduleName:af.name,className:Vf.name}})}catch(Y){Pe.e(Y)}finally{Pe.f()}case 30:case "end":return cd.stop()}},nf)}),bd.s();case 13:if((Yd=bd.n()).done){Ne.next=20;break}return Ne.delegateYield(le(),"t0",15);case 15:Be=Ne.t0;if("continue"!==Be){Ne.next=18;break}return Ne.abrupt("continue",
18);case 18:Ne.next=13;break;case 20:Ne.next=25;break;case 22:Ne.prev=22,Ne.t1=Ne["catch"](10),bd.e(Ne.t1);case 25:return Ne.prev=25,bd.f(),Ne.finish(25);case 28:return Ne.abrupt("return",Pd);case 29:case "end":return Ne.stop()}},Gb,null,[[10,22,25,28]])}));return function(Ua){return fa.apply(this,arguments)}}());case 3:return ca=P.sent,wa.remove(),P.next=7,$world.filterableListPrompt("From which class should the target object inherit?",ca,{requester:this.view});case 7:ma=P.sent;u=Ea(ma.selected,
1);if(O=u[0]){P.next=12;break}return P.abrupt("return");case 12:return P.next=14,this.withContextDo(function(fa){var Qa=O.className;Qa=ua.modules.module(O.moduleName).recorder[Qa];ua.adoptObject(fa.target,Qa)},{klassAndModule:O});case 14:this.refresh(),this.selectClass(O.className);case 16:case "end":return P.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"interactivelyAdoptBySuperclass",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa,ca,ma,
u,O,P,fa,Qa,Ua,Gb;return regeneratorRuntime.wrap(function(ta){for(;;)switch(ta.prev=ta.next){case 0:return ta.next=2,this.withContextDo(function(mc){mc=mc.target;var pc=mc.constructor;if(pc===ua.Morph)return{};var zd=ua.withSuperclasses(pc)[1];return{moduleMeta:pc[Symbol["for"]("lively-module-meta")],nextModuleMeta:zd[Symbol["for"]("lively-module-meta")],nextClassName:zd.name,className:pc.name,targetName:mc.name}});case 2:wa=ta.sent;ca=wa.nextClassName;ma=wa.className;u=wa.targetName;O=wa.moduleMeta;
P=wa.nextModuleMeta;fa=function(mc,pc){return{textDecoration:"underline",doit:{code:'$world.execCommand("open browser", {moduleName: "'.concat(mc["package"].name+"/"+mc.pathInPackage,'", codeEntity: "').concat(pc,'"})')}}};if(!ca){ta.next=21;break}Qa={fontWeight:"normal",fontSize:16};Ua={fontWeight:"normal",fontStyle:"italic",fontSize:16};ta.next=14;return this.world().confirm(["Class Hierarchy Change\n",{},"Do you really want to make ",Qa,'"'.concat(u,'"'),Ua," an instance of ",Qa,ca,Object.assign({},
Ua,{},fa(P,ca))," and remove class ",Qa,ma,Object.assign({},Ua,{},fa(O,ma))," and its package ",Qa,O["package"].name,Ua," ?",Qa],{requester:this.view,width:500});case 14:if(Gb=ta.sent){ta.next=17;break}return ta.abrupt("return");case 17:return ta.next=19,this.withContextDo(function(mc){ua.adoptObject(mc.target,ua.withSuperclasses(mc.target.constructor)[1])});case 19:this.refresh(),this.selectClass(ca);case 21:case "end":return ta.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},
{key:"interactivelyRemoveMethod",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa,ca,ma,u,O,P,fa;return regeneratorRuntime.wrap(function(Qa){for(;;)switch(Qa.prev=Qa.next){case 0:return Qa.next=2,this.withContextDo(function(Ua){return!Ua.selectedMethod});case 2:if(!Qa.sent){Qa.next=4;break}return Qa.abrupt("return");case 4:return wa=this.editorPlugin.parse().body[0],Qa.next=7,this.withContextDo(function(){var Ua=cb(regeneratorRuntime.mark(function mc(ta){var pc,zd;return regeneratorRuntime.wrap(function(Pd){for(;;)switch(Pd.prev=
Pd.next){case 0:return pc=ta.selectedMethod,zd=ta.selectedClass,Pd.t0=pc.name,Pd.next=4,ta._sourceDescriptor_of_class_findMethodNode(zd,pc.name,pc.kind,pc["static"],wa);case 4:return Pd.t1=Pd.sent,Pd.abrupt("return",{selectedMethodName:Pd.t0,methodNode:Pd.t1});case 6:case "end":return Pd.stop()}},mc)}));return function(ta){return Ua.apply(this,arguments)}}(),{parsed:wa});case 7:ca=Qa.sent;ma=ca.methodNode;if(u=ca.selectedMethodName){Qa.next=12;break}return Qa.abrupt("return");case 12:if(ma){Qa.next=
15;break}this.view.showError("Cannot find AST node for method ".concat(u));return Qa.abrupt("return");case 15:return Qa.next=17,this.world().confirm("Really remove method ".concat(u,"?"));case 17:if(O=Qa.sent){Qa.next=20;break}return Qa.abrupt("return");case 20:return P=this.ui.sourceEditor,fa={start:P.indexToPosition(ma.start),end:P.indexToPosition(ma.end)},P.textInRange({start:{column:0,row:fa.start.row},end:fa.start}).trim()||(fa.start=P.lineRange(fa.start.row-1).end),P.replace(fa,""),Qa.next=
26,this.doSave();case 26:case "end":return Qa.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"interactivelyForkPackage",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa,ca;return regeneratorRuntime.wrap(function(ma){for(;;)switch(ma.prev=ma.next){case 0:return ma.t0=this.world(),ma.t1=["New Forked Package\n",{},"Please enter a name for the forked class and its package:",{fontSize:16,fontWeight:"normal"}],ma.t2=this.view,ma.next=5,this.withContextDo(function(u){return u.target.constructor[Symbol["for"]("__LivelyClassName__")]});
case 5:return ma.t3=ma.sent,ma.t4=ma.t3+"Fork",ma.t5={requester:ma.t2,input:ma.t4,historyId:"lively.morphic-object-editor-fork-names",useLastInput:!1},ma.next=10,ma.t0.prompt.call(ma.t0,ma.t1,ma.t5);case 10:if(wa=ma.sent){ma.next=13;break}return ma.abrupt("return");case 13:return ma.next=15,this.withContextDo(function(){var u=cb(regeneratorRuntime.mark(function fa(P){return regeneratorRuntime.wrap(function(Qa){for(;;)switch(Qa.prev=Qa.next){case 0:return Qa.next=2,P.forkPackage(wa);case 2:case "end":return Qa.stop()}},
fa)}));return function(P){return u.apply(this,arguments)}}(),{forkedName:wa});case 15:return ca=ma.sent,ma.next=18,this.browse({target:this.context.target,selectedClass:ca});case 18:case "end":return ma.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"interactivlyFixUndeclaredVariables",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa=this,ca,ma,u,O,P,fa;return regeneratorRuntime.wrap(function(Qa){for(;;)switch(Qa.prev=Qa.next){case 0:return O=
this.ui,P=O.sourceEditor,fa=O.importController,Qa.prev=1,Qa.next=4,this.withContextDo(function(Ua){return Ua.selectedClass&&Ua.selectedClass.name});case 4:if(Qa.sent){Qa.next=7;break}this.view.showError(Error("No class selected"));return Qa.abrupt("return",null);case 7:return u=P.textString,Qa.next=10,this.withContextDo(function(Ua){var Gb=Ua.sourceDescriptorFor(Ua.selectedClass),ta=Gb.module;Gb=Gb.moduleSource;Ua.isSaving=!0;return{moduleId:ta.id,origSource:Gb}});case 10:return ua.__inter6__=Qa.sent,
ca=ua.__inter6__.moduleId,ma=ua.__inter6__.origSource,Qa.next=15,ua.interactivlyFixUndeclaredVariables(P,{requester:P,sourceUpdater:function(){var Ua=cb(regeneratorRuntime.mark(function pc(ta,mc){return regeneratorRuntime.wrap(function(zd){for(;;)switch(zd.prev=zd.next){case 0:return zd.next=2,wa.withContextDo(function(){var Pd=cb(regeneratorRuntime.mark(function le(Yd){var Be,Ne;return regeneratorRuntime.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:Be=Yd.sourceDescriptorFor(Yd.selectedClass);
Ne=Be.module;if("import"!==ta){Re.next=7;break}Re.next=5;return Ne.addImports(mc);case 5:Re.next=13;break;case 7:if("global"!==ta){Re.next=12;break}Re.next=10;return Ne.addGlobalDeclaration(mc);case 10:Re.next=13;break;case 12:throw Error("Cannot handle fixUndeclaredVar type ".concat(ta));case 13:Be.resetIfChanged();case 14:case "end":return Re.stop()}},le)}));return function(Yd){return Pd.apply(this,arguments)}}(),{type:ta,arg:mc});case 2:return zd.next=4,fa.updateImports();case 4:return zd.next=
6,wa.updateKnownGlobals();case 6:case "end":return zd.stop()}},pc)}));return function(ta,mc){return Ua.apply(this,arguments)}}(),sourceRetriever:function(){var Ua=cb(regeneratorRuntime.mark(function ta(){return regeneratorRuntime.wrap(function(mc){for(;;)switch(mc.prev=mc.next){case 0:return mc.abrupt("return",wa.withContextDo(function(pc){return pc.sourceDescriptorFor(pc.selectedClass)._modifiedSource(u).moduleSource},{content:P.textString}));case 1:case "end":return mc.stop()}},ta)}));return function(){return Ua.apply(this,
arguments)}}(),highlightUndeclared:function(){var Ua=cb(regeneratorRuntime.mark(function mc(ta){var pc,zd,Pd,bd,Yd,le;return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return pc=ta.start,zd=ta.end,Be.next=3,wa.withContextDo(function(Ne){Ne=Ne.sourceDescriptorFor(Ne.selectedClass).sourceLocation;return{classStart:Ne.start,classEnd:Ne.end}});case 3:Pd=Be.sent;bd=Pd.classStart;Yd=Pd.classEnd;if(!(pc<bd||zd>Yd)){Be.next=8;break}return Be.abrupt("return");case 8:pc-=bd,
zd-=bd,le={start:P.indexToPosition(pc),end:P.indexToPosition(zd)},P.selection=le,P.centerRange(le);case 13:case "end":return Be.stop()}},mc)}));return function(ta){return Ua.apply(this,arguments)}}()});case 15:return Qa.abrupt("return",Qa.sent);case 18:return Qa.prev=18,Qa.t0=Qa["catch"](1),Qa.next=22,this.withContextDo(cb(regeneratorRuntime.mark(function Gb(){return regeneratorRuntime.wrap(function(ta){for(;;)switch(ta.prev=ta.next){case 0:ta.t0=ma;if(!ta.t0){ta.next=5;break}ta.next=4;return ua.modules.module(ca).changeSource(ma);
case 4:ta.t0=ta.sent;case 5:return ta.abrupt("return",ta.t0);case 6:case "end":return ta.stop()}},Gb)})),{moduleId:ca,origSource:ma});case 22:return this.view.showError(Qa.t0),Qa.abrupt("return",null);case 24:return Qa.prev=24,Qa.next=27,this.withContextDo(function(Gb){return Gb.isSaving=!1});case 27:return Qa.next=29,fa.updateImports();case 29:return Qa.next=31,this.updateKnownGlobals();case 31:return P.focus(),Qa.finish(24);case 33:case "end":return Qa.stop()}},da,this,[[1,18,24,33]])}));return function(){return C.apply(this,
arguments)}}()},{key:"interactivelyRunSelectedMethod",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa=this,ca,ma,u,O=arguments;return regeneratorRuntime.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return ca=0<O.length&&void 0!==O[0]?O[0]:{},P.next=3,this.withContextDo(function(){var fa=cb(regeneratorRuntime.mark(function Gb(Ua){var ta,mc,pc;return regeneratorRuntime.wrap(function(zd){for(;;)switch(zd.prev=zd.next){case 0:if(ta=Ua.selectedMethod){zd.next=3;break}return zd.abrupt("return",
{statusMessage:"no message selected"});case 3:if("function"===typeof Ua.target[ta.name]){zd.next=5;break}return zd.abrupt("return",{statusMessage:"".concat(ta.name," is not a method of ").concat(wa.target)});case 5:return zd.prev=5,zd.next=8,Ua.target[ta.name]();case 8:return mc=zd.sent,pc="Running ".concat(ta.name),"undefined"!==typeof mc&&(pc+=", returns ".concat(mc)),zd.abrupt("return",{statusMessage:pc});case 14:return zd.prev=14,zd.t0=zd["catch"](5),zd.abrupt("return",{statusMessage:zd.t0.toString()});
case 17:case "end":return zd.stop()}},Gb,null,[[5,14]])}));return function(Ua){return fa.apply(this,arguments)}}());case 3:ma=P.sent,(u=ma.statusMessage)&&!ca.silent&&this.view.setStatusMessage(u);case 6:case "end":return P.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ObjectEditorModel"}},{key:"properties",get:function(){return{context:{},editorPlugin:{readOnly:!0,derived:!0,after:["submorphs"],get:function(){var C=
this.ui.sourceEditor,Pb=C.pluginFind(function(da){return da.isEditorPlugin});Pb||(Pb=C.addPlugin(new ua.JavaScriptEditorPlugin(ua.config.codeEditor.defaultTheme)));return Pb}},target:{get:function(){return this.context.target}},isObjectEditor:{readOnly:!0,get:function(){return!0}},systemInterface:{readOnly:!0,get:function(){return this.editorPlugin.evalEnvironment.systemInterface}},expose:{get:function(){return["browse","commands","keybindings","onWindowClose"]}},bindings:{get:function(){return[{model:"inspect object button",
signal:"fire",handler:"execCommand",converter:function(){return"open object inspector for target"}},{model:"publish button",signal:"fire",handler:"execCommand",converter:function(){return"freeze target"}},{model:"choose target button",signal:"fire",handler:"execCommand",converter:function(){return"choose target"}},{model:"add button",signal:"fire",handler:"interactivelyAddObjectPackageAndMethod"},{model:"remove button",signal:"fire",handler:"execCommand",converter:function(){return"remove method or class"}},
{model:"fork package button",signal:"fire",handler:"interactivelyForkPackage"},{model:"open in browser button",signal:"fire",handler:"execCommand",updater:function(C){C("open class in system browser",{klass:this.targetObj.selectedClass})}},{model:"save button",signal:"fire",handler:"execCommand",converter:function(){return"save source"}},{model:"run method button",signal:"fire",handler:"execCommand",converter:function(){return"run selected method"}},{model:"toggle imports button",signal:"fire",handler:"toggleShowingImports"},
{target:"source editor",signal:"textChange",handler:"updateUnsavedChangeIndicatorDebounced"},{target:"class tree",signal:"selectedNode",handler:"onClassTreeSelection"},{target:"class tree",signal:"contextMenuRequested",handler:"contextMenuForClassTree"}]}}}}}],Ka,{pathInPackage:function(){return"./js/objecteditor/index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:1763,end:64483})}(ua.ViewModel);ua.ObjectEditorModel=qe;ua.ObjectEditorModel=qe;Yc=function(za){var Ka=window.lively.FreezerRuntime.recorderFor("lively.ide/js/objecteditor/index.js"),Ib=Ka.hasOwnProperty("ImportControllerModel")&&"function"===typeof Ka.ImportControllerModel?Ka.ImportControllerModel:Ka.ImportControllerModel=function(C){if(!C||!C[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Bb(Ib,
za,[{key:"getExpandedWidth",value:function(){return Math.min(400,Math.max(300,this.ui.importsList.listItemContainer.width))}},{key:"openModuleInBrowser",value:function(){this.view.execCommand("open selected module in system browser")}},{key:"setModule",value:function(){var C=cb(regeneratorRuntime.mark(function wa(da){return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=ca.next){case 0:return this.module=da,ca.next=3,this.updateImports();case 3:case "end":return ca.stop()}},wa,this)}));
return function(da){return C.apply(this,arguments)}}()},{key:"doNewNPMSearch",value:function(){var C=cb(regeneratorRuntime.mark(function wa(da){var ca,ma,u;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return ca=ua.LoadingIndicator.open("fetching information..."),ca.center=this.view.owner.globalBounds().center(),ma="https://registry.npmjs.com/-/v1/search?text=".concat(da,"&size=50"),O.next=5,ua.resource(ma).makeProxied().readJson();case 5:return u=O.sent,ca.remove(),
O.abrupt("return",u.objects.map(function(P){var fa=P["package"],Qa=fa.version;return{isListItem:!0,string:"".concat(fa.name,"@").concat(Qa),value:P}}));case 8:case "end":return O.stop()}},wa,this)}));return function(da){return C.apply(this,arguments)}}()},{key:"updateImports",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa,ca;return regeneratorRuntime.wrap(function(ma){for(;;)switch(ma.prev=ma.next){case 0:return wa=this.ui.importsList,ma.next=3,this.editor.withContextDo(function(){var u=
cb(regeneratorRuntime.mark(function fa(P){var Qa,Ua,Gb;return regeneratorRuntime.wrap(function(ta){for(;;)switch(ta.prev=ta.next){case 0:return ta.next=2,P.selectedModule;case 2:if(Qa=ta.sent){ta.next=5;break}return ta.abrupt("return",[]);case 5:return ta.next=7,Qa.imports();case 7:return Ua=ta.sent,Gb=Ua.map(function(mc){var pc=[],zd=mc.local!==mc.imported&&"default"!==mc.imported?mc.local:null;zd&&pc.push("".concat(mc.imported," as "),{});pc.push(zd||mc.local||"??????",{fontWeight:"bold"});pc.push(" from ".concat(ua.string.truncate(mc.fromModule,
25,"...")),{opacity:.5});zd=pc.slice();zd[2]=" from ".concat(mc.fromModule);zd[3]={};return{isListItem:!0,value:mc,label:pc,tooltip:zd,annotation:mc.fromModule.includes("jspm.dev")?ua.Icon.textAttribute("npm",{fontSize:18,fontWeight:"400",textStyleClasses:["fab"]}):[]}}),ta.abrupt("return",Gb);case 10:case "end":return ta.stop()}},fa)}));return function(P){return u.apply(this,arguments)}}());case 3:ca=ma.sent,wa.items=[],wa.items=ca;case 6:case "end":return ma.stop()}},da,this)}));return function(){return C.apply(this,
arguments)}}()},{key:"keybindings",get:function(){return[{keys:"Enter",command:"open selected module in system browser"}]}},{key:"commands",get:function(){var C=this;return[{name:"open selected module in system browser",exec:function(){var Pb=cb(regeneratorRuntime.mark(function ca(wa){var ma,u,O,P,fa;return regeneratorRuntime.wrap(function(Qa){for(;;)switch(Qa.prev=Qa.next){case 0:ma=C.view.getWindow();if(u=C.ui.importsList.selection){Qa.next=5;break}ma.setStatusMessage("no module selected");return Qa.abrupt("return",
null);case 5:return O=u||{},P=O.fromModule,fa=O.local,P.startsWith(".")&&(P=System.decanonicalize(P,C.module)),Qa.abrupt("return",C.world().execCommand("open browser",{moduleName:P,codeEntity:fa}));case 8:case "end":return Qa.stop()}},ca)}));return function(wa){return Pb.apply(this,arguments)}}()}]}},{key:"refreshInterface",value:function(){var C=cb(regeneratorRuntime.mark(function da(){return regeneratorRuntime.wrap(function(wa){for(;;)switch(wa.prev=wa.next){case 0:return wa.next=2,this.updateImports();
case 2:return wa.next=4,this.editor.updateKnownGlobals();case 4:this.editor.ui.sourceEditor.focus();case 5:case "end":return wa.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"interactivelyAddImport",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa=this,ca,ma,u,O,P,fa,Qa,Ua,Gb,ta,mc,pc,zd,Pd;return regeneratorRuntime.wrap(function(bd){for(;;)switch(bd.prev=bd.next){case 0:return ma=this.editor,u=this.view.getWindow(),bd.prev=2,bd.next=5,ma.withContextDo(function(Yd){return!Yd.selectedClass});
case 5:if(!bd.sent){bd.next=8;break}u.showError(Error("No class selected"));return bd.abrupt("return");case 8:return bd.next=10,this.world().multipleChoicePrompt("Select import style:",{requester:u,width:400,choices:new Map([["An already loaded module (via exports)","system"],["A NPM Module via jspm.dev","jspm"],["A custom module (via free text)","free text"]])});case 10:O=bd.sent;if(void 0!==O){bd.next=13;break}return bd.abrupt("return");case 13:P='import ... from "module";';if("jspm"!==O){bd.next=
25;break}bd.next=17;return this.world().filterableListPrompt("Browse NPM",[],{requester:u,onFilter:ua.fun.debounce(500,function(){var Yd=cb(regeneratorRuntime.mark(function Ne(Be){var Re;return regeneratorRuntime.wrap(function(nf){for(;;)switch(nf.prev=nf.next){case 0:Re=Be.target.owner;if(Re._lastTerm!==Re.input){nf.next=3;break}return nf.abrupt("return");case 3:return Re._lastTerm=Re.input,nf.next=6,wa.doNewNPMSearch(Re.input);case 6:Re.items=nf.sent;case 7:case "end":return nf.stop()}},Ne)}));
return function(Be){return Yd.apply(this,arguments)}}()),fuzzy:!0});case 17:fa=bd.sent;if("accepted"===fa.status){bd.next=20;break}return bd.abrupt("return");case 20:Qa=Ea(fa.selected,1),fa=Qa[0],Ua=fa["package"],Gb=Ua.version,ta=Ua.name,P='import ... from "https://jspm.dev/'.concat(ta,"@").concat(Gb,'";'),O="free text";case 25:if("free text"!==O){bd.next=46;break}case 26:return bd.next=29,this.world().editPrompt("Enter import statement:",{requester:u,input:P,mode:"js"});case 29:if(P=bd.sent){bd.next=
32;break}return bd.abrupt("return");case 32:bd.prev=32;ua.parse(P);bd.next=40;break;case 36:return bd.prev=36,bd.t0=bd["catch"](32),u.setStatusMessage(bd.t0.message),bd.abrupt("continue",26);case 40:return bd.abrupt("break",43);case 43:return bd.next=45,ma.withContextDo(function(){var Yd=cb(regeneratorRuntime.mark(function Ne(Be){var Re;return regeneratorRuntime.wrap(function(nf){for(;;)switch(nf.prev=nf.next){case 0:return nf.next=2,Be.selectedModule.source();case 2:return Re=nf.sent,Be.isSaving=
!0,nf.next=6,Be.selectedModule.changeSource(P+"\n"+Re);case 6:return nf.abrupt("return",Re);case 7:case "end":return nf.stop()}},Ne)}));return function(Be){return Yd.apply(this,arguments)}}(),{importStmt:P});case 45:ca=bd.sent;case 46:if("system"!==O){bd.next=61;break}bd.next=49;return ma.editorPlugin.systemInterface();case 49:return mc=bd.sent,bd.next=52,ua.interactivelyChooseImports(mc,{requester:u});case 52:if(pc=bd.sent){bd.next=55;break}return bd.abrupt("return",null);case 55:return bd.next=
57,ma.withContextDo(function(){var Yd=cb(regeneratorRuntime.mark(function Ne(Be){var Re;return regeneratorRuntime.wrap(function(nf){for(;;)switch(nf.prev=nf.next){case 0:return nf.next=2,Be.selectedModule.source();case 2:return Re=nf.sent,Be.isSaving=!0,nf.next=6,Be.selectedModule.addImports(pc);case 6:return nf.abrupt("return",Re);case 7:case "end":return nf.stop()}},Ne)}));return function(Be){return Yd.apply(this,arguments)}}(),{choices:pc});case 57:ca=bd.sent,zd=pc.map(function(Yd){var le=Yd.local;
Yd=Yd.exported;return"default"===Yd?le:Yd}).join("\n"),Pd=ma.ui.sourceEditor,Pd.insertTextAndSelect(zd,Pd.cursorPosition);case 61:bd.next=68;break;case 63:return bd.prev=63,bd.t1=bd["catch"](2),bd.next=67,ma.withContextDo(function(){var Yd=cb(regeneratorRuntime.mark(function Ne(Be){return regeneratorRuntime.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:Re.t0=ca;if(!Re.t0){Re.next=5;break}Re.next=4;return Be.selectedModule.changeSource(ca);case 4:Re.t0=Re.sent;case 5:return Re.abrupt("return",
Re.t0);case 6:case "end":return Re.stop()}},Ne)}));return function(Be){return Yd.apply(this,arguments)}}(),{origSource:ca});case 67:u.showError(bd.t1);case 68:return bd.prev=68,bd.next=71,this.updateImports();case 71:return bd.next=73,ma.updateKnownGlobals();case 73:return bd.next=75,ma.withContextDo(function(){var Yd=cb(regeneratorRuntime.mark(function Ne(Be){return regeneratorRuntime.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:Be.isSaving=!1;case 1:case "end":return Re.stop()}},Ne)}));
return function(Be){return Yd.apply(this,arguments)}}());case 75:return bd.finish(68);case 76:case "end":return bd.stop()}},da,this,[[2,63,68,76],[32,36]])}));return function(){return C.apply(this,arguments)}}()},{key:"interactivelyRemoveImport",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa,ca,ma,u,O;return regeneratorRuntime.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:wa=this.ui.importsList;ca=this.view.getWindow();if((ma=wa.selections)&&ma.length){P.next=5;break}return P.abrupt("return");
case 5:return P.next=7,this.world().confirm(["Really remove these imports?\n",{},ua.arr.pluck(ma,"local").join("\n"),{fontWeight:"normal",fontSize:16}],{requester:ca});case 7:if(u=P.sent){P.next=10;break}return P.abrupt("return");case 10:return P.next=12,this.editor.withContextDo(function(){var fa=cb(regeneratorRuntime.mark(function Gb(Ua){var ta,mc;return regeneratorRuntime.wrap(function(pc){for(;;)switch(pc.prev=pc.next){case 0:return pc.prev=0,ta=Ua.selectedModule,pc.next=4,ta.source();case 4:return mc=
pc.sent,pc.next=7,ta.removeImports(ma);case 7:return pc.abrupt("return",!1);case 10:pc.prev=10;pc.t0=pc["catch"](0);pc.t1=mc;if(!pc.t1){pc.next=16;break}pc.next=16;return ta.changeSource(mc);case 16:return pc.abrupt("return",pc.t0);case 17:case "end":return pc.stop()}},Gb,null,[[0,10]])}));return function(Ua){return fa.apply(this,arguments)}}(),{sels:ma});case 12:O=P.sent,wa.selection=null,O&&ca.showError(O),this.refreshInterface();case 16:case "end":return P.stop()}},da,this)}));return function(){return C.apply(this,
arguments)}}()},{key:"interactivelyRemoveUnusedImports",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa,ca,ma;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,wa=this.view.getWindow(),u.next=4,this.editor.withContextDo(function(){var O=cb(regeneratorRuntime.mark(function Qa(fa){return regeneratorRuntime.wrap(function(Ua){for(;;)switch(Ua.prev=Ua.next){case 0:return Ua.next=2,fa.selectedModule.source();case 2:return Ua.abrupt("return",
Ua.sent);case 3:case "end":return Ua.stop()}},Qa)}));return function(fa){return O.apply(this,arguments)}}());case 4:return ca=u.sent,u.next=7,ua.chooseUnusedImports(ca,{requester:wa});case 7:if((ma=u.sent)&&ma.changes&&ma.changes.length){u.next=11;break}wa.setStatusMessage("Nothing to remove");return u.abrupt("return");case 11:return u.next=13,this.editor.withContextDo(function(O){O.selectedModule.removeImports(ma.removedImports)},{toRemove:ma});case 13:wa.setStatusMessage("Imports removed");u.next=
24;break;case 16:u.prev=16;u.t0=u["catch"](0);u.t1=origSource;if(!u.t1){u.next=22;break}u.next=22;return this.editor.withContextDo(function(O){return O.selectedModule.changeSource(origSource)},{origSource});case 22:return requester.setStatusMessage(u.t0.toString()),u.abrupt("return");case 24:return u.next=26,this.updateImports();case 26:return u.next=28,this.editor.updateKnownGlobals();case 28:this.editor.ui.sourceEditor.focus();case 29:case "end":return u.stop()}},da,this,[[0,16]])}));return function(){return C.apply(this,
arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ImportControllerModel"}},{key:"properties",get:function(){return{editor:{get:function(){return this.view.owner.viewModel}},systemInterface:{get:function(){return this.editor&&this.editor.systemInterface}},module:{set:function(C){this.setProperty("module",C?"string"===typeof C?C:C.id:null)}},expose:{get:function(){return"commands keybindings setModule updateImports doNewNPMSearch getExpandedWidth".split(" ")}},bindings:{get:function(){return[{model:"open button",
signal:"fire",handler:"openModuleInBrowser"},{model:"add import button",signal:"fire",handler:"interactivelyAddImport"},{model:"remove import button",signal:"fire",handler:"interactivelyRemoveImport"},{model:"cleanup button",signal:"fire",handler:"interactivelyRemoveUnusedImports"}]}}}}}],Ka,{pathInPackage:function(){return"./js/objecteditor/index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:64491,end:75718})}(ua.ViewModel);ua.ImportControllerModel=Yc;ua.ImportControllerModel=Yc;var Ab=function(za){var Ka=window.lively.FreezerRuntime.recorderFor("lively.ide/js/objecteditor/index.js"),Ib=Ka.hasOwnProperty("ImportController")&&"function"===typeof Ka.ImportController?Ka.ImportController:Ka.ImportController=function(C){if(!C||!C[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Bb(Ib,
za,[{key:Symbol["for"]("lively-instance-initialize"),value:function(C){Bb._get(Object.getPrototypeOf(Ib.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,C);this.build();ua.connect(this.get("openButton"),"fire",this,"execCommand",{converter:function(){return"open selected module in system browser"}})}},{key:"setModule",value:function(){var C=cb(regeneratorRuntime.mark(function wa(da){return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=ca.next){case 0:return this.module=
da,ca.next=3,this.updateImports();case 3:case "end":return ca.stop()}},wa,this)}));return function(da){return C.apply(this,arguments)}}()},{key:"build",value:function(){var C={borderWidthTop:1,borderWidthBottom:1,borderColor:ua.Color.gray,fontSize:14,fontFamily:"IBM Plex Sans",type:"list"},Pb={type:"button",extent:ua.pt(26,24)};this.submorphs=[Object.assign({},C,{name:"importsList",multiSelect:!0,borderBottom:{width:1,color:ua.Color.gray}}),{name:"buttons",fill:ua.Color.transparent,layout:new ua.HorizontalLayout({direction:"centered",
spacing:2,autoResize:!1}),submorphs:[Object.assign({},Pb,{name:"addImportButton",label:ua.Icon.makeLabel("plus"),tooltip:"add new import"}),Object.assign({},Pb,{name:"removeImportButton",label:ua.Icon.makeLabel("minus"),tooltip:"remove selected import(s)"}),Object.assign({},Pb,{name:"cleanupButton",label:"cleanup",tooltip:"remove unused imports"}),Object.assign({},Pb,{name:"openButton",label:"open",tooltip:"open selected module"})]}];this.layout=new ua.GridLayout({renderViaCSS:!0,grid:[["importsList"],
["buttons"]]});this.layout.row(1).fixed=30;this.layout.row(1).col(0).group.resize=!1;this.layout.row(1).col(0).group.align="center";this.layout.row(1).col(0).group.alignedProperty="center";this.applyLayoutIfNeeded();[this.get("openButton"),this.get("cleanupButton"),this.get("removeImportButton"),this.get("addImportButton")].forEach(function(da){return da.extent=Pb.extent})}},{key:"doNewNPMSearch",value:function(){var C=cb(regeneratorRuntime.mark(function wa(da){var ca,ma,u;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=
O.next){case 0:return ca=ua.LoadingIndicator.open("fetching information..."),ca.center=this.owner.globalBounds().center(),ma="https://registry.npmjs.com/-/v1/search?text=".concat(da,"&size=50"),O.next=5,ua.resource(ma).makeProxied().readJson();case 5:return u=O.sent,ca.remove(),O.abrupt("return",u.objects.map(function(P){var fa=P["package"],Qa=fa.version;return{isListItem:!0,string:"".concat(fa.name,"@").concat(Qa),value:P}}));case 8:case "end":return O.stop()}},wa,this)}));return function(da){return C.apply(this,
arguments)}}()},{key:"updateImports",value:function(){var C=cb(regeneratorRuntime.mark(function da(){var wa;return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=ca.next){case 0:return ca.next=2,this.owner.withContextDo(function(){var ma=cb(regeneratorRuntime.mark(function P(O){var fa,Qa,Ua;return regeneratorRuntime.wrap(function(Gb){for(;;)switch(Gb.prev=Gb.next){case 0:return Gb.next=2,O.selectedModule;case 2:if(fa=Gb.sent){Gb.next=5;break}return Gb.abrupt("return",[]);case 5:return Gb.next=
7,fa.imports();case 7:return Qa=Gb.sent,Ua=Qa.map(function(ta){var mc=[],pc=ta.local!==ta.imported&&"default"!==ta.imported?ta.local:null;pc&&mc.push("".concat(ta.imported," as "),{});mc.push(pc||ta.local||"??????",{fontWeight:"bold"});mc.push(" from ".concat(ua.string.truncate(ta.fromModule,25,"...")),{opacity:.5});pc=mc.slice();pc[2]=" from ".concat(ta.fromModule);pc[3]={};return{isListItem:!0,value:ta,label:mc,tooltip:pc,annotation:ta.fromModule.includes("jspm.dev")?ua.Icon.textAttribute("npm",
{fontSize:18,fontWeight:"400",textStyleClasses:["fab"]}):[]}}),Gb.abrupt("return",Ua);case 10:case "end":return Gb.stop()}},P)}));return function(O){return ma.apply(this,arguments)}}());case 2:wa=ca.sent,this.getSubmorphNamed("importsList").items=[],this.getSubmorphNamed("importsList").items=wa;case 5:case "end":return ca.stop()}},da,this)}));return function(){return C.apply(this,arguments)}}()},{key:"keybindings",get:function(){return[{keys:"Enter",command:"open selected module in system browser"}].concat(Bb._get(Object.getPrototypeOf(Ib.prototype),
"keybindings",this))}},{key:"commands",get:function(){var C=this;return[{name:"open selected module in system browser",exec:function(){var Pb=cb(regeneratorRuntime.mark(function ca(wa){var ma,u,O,P;return regeneratorRuntime.wrap(function(fa){for(;;)switch(fa.prev=fa.next){case 0:if(ma=C.getSubmorphNamed("importsList").selection){fa.next=4;break}C.setStatusMessage("no module selected");return fa.abrupt("return",null);case 4:return u=ma||{},O=u.fromModule,P=u.local,O.startsWith(".")&&(O=System.decanonicalize(O,
C.module)),fa.abrupt("return",C.world().execCommand("open browser",{moduleName:O,codeEntity:P}));case 7:case "end":return fa.stop()}},ca)}));return function(wa){return Pb.apply(this,arguments)}}()}]}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ImportController"}},{key:"properties",get:function(){return{extent:{defaultValue:ua.pt(300,600)},systemInterface:{get:function(){return this.owner.systemInterface}},module:{set:function(C){this.setProperty("module",C?"string"===typeof C?
C:C.id:null)}}}}}],Ka,{pathInPackage:function(){return"./js/objecteditor/index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:75726,end:81639})}(ua.Morph);ua.ImportController=Ab;ua.ImportController=Ab;var Fa=window.lively.FreezerRuntime.recorderFor("lively.ide/js/objecteditor/ui.cp.js");Fa.open=ob;Fa.component=jb;Fa.part=E;Fa.ObjectEditorModel=
qe;Fa.ImportControllerModel=Yc;Fa.pt=ub;Fa.rect=ec;Fa.Color=Hb;Fa.GridLayout=ia;Fa.TilingLayout=Wb;Fa.Text=R;Fa.Icon=$d;Fa.HorizontalLayout=Cb;Fa.Tree=Ga;Fa.ButtonDefault=Xd;Fa.SystemButton=oc;Fa.DefaultList=gb;Fa.obj=ic;Fa.ImportController=Fa.component["for"](function(){return Fa.component({defaultViewModel:Fa.ImportControllerModel,name:"import controller",extent:Fa.pt(209.5,472),fill:Fa.Color.rgba(0,0,0,0),layout:new Fa.GridLayout({autoAssign:!1,columns:[0,{width:200}],grid:[["imports list"],["buttons"]],
groups:{buttons:{align:"topLeft",resize:!0},"imports list":{align:"topLeft",resize:!0}},rows:[0,{height:442},1,{fixed:30}]}),submorphs:[Fa.part(Fa.DefaultList,{name:"imports list",borderColor:Fa.Color.rgbHex("CCCCCC"),itemBorderRadius:2,borderWidth:{left:0,right:0,bottom:1,top:1}}),{name:"buttons",clipMode:"hidden",layout:new Fa.TilingLayout({align:"center",axisAlign:"center",orderByIndex:!0,spacing:3,wrapSubmorphs:!1}),extent:Fa.pt(199.1,29.3),fill:Fa.Color.rgba(0,0,0,0),reactsToPointer:!1,submorphs:[Fa.part(Fa.SystemButton,
{name:"add import button",extent:Fa.pt(26,24),submorphs:[{name:"label",textAndAttributes:Fa.Icon.textAttribute("plus")}],tooltip:"add new import"}),Fa.part(Fa.SystemButton,{name:"remove import button",extent:Fa.pt(26,24),submorphs:[{name:"label",textAndAttributes:Fa.Icon.textAttribute("minus")}],tooltip:"remove selected import(s)"}),Fa.part(Fa.SystemButton,{name:"cleanup button",extent:Fa.pt(53,24),submorphs:[{name:"label",fontSize:12,textAndAttributes:["cleanup",null]}],tooltip:"remove unused imports"}),
Fa.part(Fa.SystemButton,{name:"open button",extent:Fa.pt(38,24),submorphs:[{name:"label",fontSize:12,textAndAttributes:["open",null]}],tooltip:"open module of selected import"})]}]})},{module:"lively.ide/js/objecteditor/ui.cp.js","export":"ImportController",range:{start:537,end:2582}},Fa.ImportController);Fa.ObjectEditorLight=Fa.component["for"](function(){return Fa.component({defaultViewModel:Fa.ObjectEditorModel,name:"object editor light",extent:Fa.pt(693.7,426.9),fill:Fa.Color.transparent,reactsToPointer:!1,
layout:new Fa.GridLayout({autoAssign:!1,columns:[0,{fixed:180},1,{width:243},2,{fixed:0}],grid:[["object commands","object commands","object commands"],["class tree","frozen warning","import controller"],["class tree","source editor","import controller"],["class and method controls","source editor controls","import controller"]],groups:{"class and method controls":{align:"topLeft",resize:!0},"class tree":{align:"topLeft",resize:!0},"frozen warning":{align:"topLeft",resize:!0},"import controller":{align:"topLeft",
resize:!0},"object commands":{align:"topLeft",resize:!0},"source editor":{align:"topLeft",resize:!0},"source editor controls":{align:"topLeft",resize:!0}},rows:[0,{fixed:28},1,{fixed:0},2,{height:125},3,{fixed:30}]}),submorphs:[{name:"object commands",extent:Fa.pt(727,28),fill:Fa.Color.transparent,layout:new Fa.TilingLayout({orderByIndex:!0,resizePolicies:[["target controls",{height:"fixed",width:"fill"}]],wrapSubmorphs:!1}),reactsToPointer:!1,submorphs:[{name:"target controls",clipMode:"hidden",
extent:Fa.pt(181.3,30),fill:Fa.Color.rgba(0,0,0,0),layout:new Fa.HorizontalLayout({align:"top",autoResize:!1,direction:"centered",orderByIndex:!0,padding:{height:0,width:0,x:2,y:2},reactToSubmorphAnimations:!1,renderViaCSS:!0,resizeSubmorphs:!1,spacing:2}),position:Fa.pt(271.9,0),reactsToPointer:!1,submorphs:[Fa.part(Fa.SystemButton,{name:"inspect object button",extent:Fa.pt(28,24),tooltip:"open object inspector",submorphs:[{name:"label",textAndAttributes:Fa.Icon.textAttribute("cogs")}]}),Fa.part(Fa.SystemButton,
{extent:Fa.pt(28,24),name:"publish button",tooltip:"Freeze this morph",submorphs:[{name:"label",textAndAttributes:Fa.Icon.textAttribute("cloud-upload-alt")}]}),Fa.part(Fa.SystemButton,{name:"choose target button",extent:Fa.pt(26,24),tooltip:"select another target",submorphs:[{name:"label",textAndAttributes:Fa.Icon.textAttribute("crosshairs")}]})]},{name:"freezer controls",clipMode:"hidden",extent:Fa.pt(35,28),fill:Fa.Color.rgba(0,0,0,0),layout:new Fa.HorizontalLayout({align:"top",autoResize:!1,direction:"rightToLeft",
orderByIndex:!0,padding:{height:0,width:0,x:2,y:2},reactToSubmorphAnimations:!1,renderViaCSS:!0,resizeSubmorphs:!1,spacing:2}),position:Fa.pt(626,0),reactsToPointer:!1,submorphs:[Fa.part(Fa.SystemButton,{name:"show frozen parts button",extent:Fa.pt(30,24),tooltip:"show published parts",submorphs:[{name:"label",textAndAttributes:Fa.Icon.textAttribute("sellsy")}]})]}]},{name:"class and method controls",extent:Fa.pt(180,30),fill:Fa.Color.rgba(0,0,0,0),layout:new Fa.HorizontalLayout({align:"top",autoResize:!1,
direction:"centered",orderByIndex:!0,padding:{height:0,width:0,x:2,y:2},reactToSubmorphAnimations:!1,renderViaCSS:!0,resizeSubmorphs:!1,spacing:2}),submorphs:[Fa.part(Fa.SystemButton,{name:"add button",extent:Fa.pt(26,24),submorphs:[{name:"label",textAndAttributes:Fa.Icon.textAttribute("plus")}],tooltip:"add a new method"}),Fa.part(Fa.SystemButton,{name:"remove button",extent:Fa.pt(26,24),submorphs:[{name:"label",textAndAttributes:Fa.Icon.textAttribute("minus")}],tooltip:"remove a method or class"}),
Fa.part(Fa.SystemButton,{name:"fork package button",extent:Fa.pt(26,24),submorphs:[{name:"label",textAndAttributes:Fa.Icon.textAttribute("code-branch")}],tooltip:"fork package"}),Fa.part(Fa.SystemButton,{name:"open in browser button",extent:Fa.pt(26,24),submorphs:[{name:"label",textAndAttributes:Fa.Icon.textAttribute("external-link-alt")}],tooltip:"open selected class in system browser"})]},{type:Fa.Text,name:"source editor",borderColor:Fa.Color.rgb(204,204,204),borderWidth:1,clipMode:"auto",extent:Fa.pt(547,
442),fixedHeight:!0,fixedWidth:!0,fontFamily:'"IBM Plex Mono"',lineWrapping:"by-chars",padding:Fa.rect(4,2,0,0)},{type:Fa.Tree,name:"class tree",clipMode:"hidden",extent:Fa.pt(180,442),fontFamily:'"IBM Plex Sans"',fontSize:14,borderColor:Fa.Color.rgb(204,204,204),borderWidth:{top:1,bottom:1,left:0,right:0},treeData:{}},{name:"source editor controls",borderColor:{bottom:Fa.Color.rgb(255,255,255),left:Fa.Color.rgb(204,204,204),right:Fa.Color.rgb(204,204,204),top:Fa.Color.rgb(255,255,255)},borderWidth:{bottom:0,
left:1,right:1,top:0},extent:Fa.pt(547,30),fill:Fa.Color.rgba(0,0,0,0),layout:new Fa.GridLayout({autoAssign:!1,columns:[0,{width:110},1,{fixed:30,paddingRight:1},2,{fixed:30,paddingLeft:1},3,{width:110},4,{fixed:74,paddingRight:4}],grid:[[null,"save button","run method button",null,"toggle imports button"]],groups:{"run method button":{align:"topLeft",resize:!0},"save button":{align:"topLeft",resize:!0},"toggle imports button":{align:"topLeft",resize:!0}},rows:[0,{height:30,paddingBottom:3,paddingTop:2}]}),
submorphs:[Fa.part(Fa.SystemButton,{name:"save button",extent:Fa.pt(29,23),submorphs:[{name:"label",textAndAttributes:Fa.Icon.textAttribute("save")}],tooltip:"save"}),Fa.part(Fa.SystemButton,{name:"run method button",extent:Fa.pt(28,23),submorphs:[{name:"label",textAndAttributes:Fa.Icon.textAttribute("play-circle")}],tooltip:"execute selected method"}),Fa.part(Fa.SystemButton,{name:"toggle imports button",extent:Fa.pt(70,23),submorphs:[{name:"label",textAndAttributes:["imports",null]}],tooltip:"toggle showing imports"})]},
Fa.part(Fa.ImportController,{name:"import controller"})]})},{module:"lively.ide/js/objecteditor/ui.cp.js","export":"ObjectEditorLight",range:{start:2723,end:10581}},Fa.ObjectEditorLight);qe=Lc("ObjectEditorLight",Fa.ObjectEditorLight);Yc=Lc("ImportController",Fa.ImportController);Fa.ObjectEditorLight=qe;Fa.ImportController=Yc;Fa.open=ob}}});