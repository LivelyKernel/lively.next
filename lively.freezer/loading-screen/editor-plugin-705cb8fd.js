System.register(["./__root_module__-3d4e820f.js","kld-intersections","./index-cbb45750.js","./editor-plugin-a0c062dc.js","./index-7fab6f02.js"],function(ra){var kb,zb,Sb,Mb,Fd,Jc,wd,Kc,Fc,Wc,hd,Id,nd,Xc,Na,nb,Pb,Wb,Pc,Bd,Hb,Ub,vb,kc;return{setters:[function(xc){kb=xc.as;zb=xc.bA;Sb=xc.bB;Mb=xc.bC;Fd=xc.F;Jc=xc.aq;wd=xc.aW;Kc=xc.s;Fc=xc.ab;Wc=xc.bn;hd=xc.a6;Id=xc.$;nd=xc.bD;Xc=xc.bu},function(){},function(xc){Na=xc.s},function(xc){nb=xc.p;Pb=xc.d;Wb=xc.a;Pc=xc.r;Bd=xc.C},function(xc){Hb=xc.localInterface;
Ub=xc.systemInterfaceNamed;vb=xc.serverInterfaceFor;kc=xc.l2lInterfaceFor}],execute:function(){var xc=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js");xc.warnStyle={"border-bottom":"2px dotted orange"};xc.errorStyle={"background-color":"red"};var Dc=function(rc){var Xb=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js"),wc=Xb.hasOwnProperty("JavaScriptChecker")&&"function"===typeof Xb.JavaScriptChecker?Xb.JavaScriptChecker:Xb.JavaScriptChecker=function(I){I&&I[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kb(wc,rc,[{key:"uninstall",value:function(I){var T=I.text||I;(T.markers||[]).forEach(function(ua){return ua.id.startsWith("js-checker-")&&T.removeMarker(ua)});T.removeMarker("js-syntax-error")}},{key:"hasEmbeddedMorphInRange",value:function(I,T){return[].concat($jscomp.arrayFromIterable(I.embeddedMorphMap.values())).find(function(ua){return T.containsPosition(ua.anchor.position)})}},{key:"onDocumentChange",value:function(I,
T,ua){var Da=T.document;try{var Kb=ua.parse()}catch(Db){Kb=Db}Kb&&(I=(T.markers||[]).filter(function(Db){return Db.id.startsWith("js-checker-")}),ua=ua.undeclaredVariables().map(function(Db,Fa){var ac=Db.start;Db=Db.end;ac=Da.indexToPosition(ac);Db=Da.indexToPosition(Db);return T.addMarker({id:"js-checker-"+Fa,style:xc.warnStyle,range:{start:ac,end:Db},type:"js-undeclared-var"})}),I.slice(ua.length).forEach(function(Db){return T.removeMarker(Db)}),Kb.parseError?(I=Kb.parseError.loc,ua=I.column,I=
I.line-1,Kb=Da.indexToPosition(Kb.parseError.pos),ua=Kb.column,I=Kb.row,Kb={start:{column:ua-1,row:I},end:{column:ua+1,row:I}},this.hasEmbeddedMorphInRange(T,Kb)||T.addMarker({id:"js-syntax-error",range:Kb,style:xc.errorStyle,type:"js-syntax-error"})):T.removeMarker("js-syntax-error"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptChecker"}}],Xb,{pathInPackage:function(){return"js/checker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:118,end:1882})}(void 0),Gb=Dc=xc.JavaScriptChecker;xc.default=Dc;var $a=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js");$a.query=zb;$a.fuzzyParse=Sb;$a.acorn=Mb;$a.custom=Fd;var dc=function(rc){var Xb=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js"),wc=Xb.hasOwnProperty("JavaScriptNavigator")&&"function"===typeof Xb.JavaScriptNavigator?Xb.JavaScriptNavigator:Xb.JavaScriptNavigator=function(I){I&&I[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kb(wc,rc,[{key:"ensureAST",value:function(I){return this.parse(I.textString)}},{key:"parse",value:function(I){return $a.fuzzyParse(I)}},{key:"move",value:function(I,T){var ua=!!T.activeMark||!T.selection.isEmpty(),Da=T.selection,Kb=T.positionToIndex(Da.lead);I=this[I](T.textString,Kb);I=T.indexToPosition(I);Da.lead=I;ua||(Da.anchor=I);T.scrollCursorIntoView()}},{key:"forwardSexp",value:function(I){this.move("_forwardSexp",
I)}},{key:"backwardSexp",value:function(I){this.move("_backwardSexp",I)}},{key:"backwardUpSexp",value:function(I){this.move("_backwardUpSexp",I)}},{key:"forwardDownSexp",value:function(I){this.move("_forwardDownSexp",I)}},{key:"_forwardSexp",value:function(I,T){I=this.parse(I);I=$a.custom.findNodesIncluding(I,T).reverse().find(function(Da){return Da.end!==T});if(!I)return T;if("BlockStatement"===I.type){var ua=I.body.find(function(Da){return Da.start>T});if(ua)return ua.start}return I.end}},{key:"_backwardSexp",
value:function(I,T){I=this.parse(I);I=$a.custom.findNodesIncluding(I,T).reverse().find(function(Da){return Da.start!==T});if(!I)return T;if("BlockStatement"===I.type){var ua=I.body.slice().reverse().find(function(Da){return Da.end<T});if(ua)return ua.end}return I?I.start:T}},{key:"_backwardUpSexp",value:function(I,T){I=this.parse(I);return(I=$a.custom.findNodesIncluding(I,T).reverse().find(function(ua){return ua.start!==T}))?I.start:T}},{key:"_forwardDownSexp",value:function(I,T){I=this.parse(I);
return(I=$a.custom.findNodeAfter(I,T,function(ua,Da){return Da.start>T}))?I.node.start:T}},{key:"markDefun",value:function(I){var T=this.rangeForFunctionOrDefinition(I.textString,[I.positionToIndex(I.selection.range.start),I.positionToIndex(I.selection.range.end)]);T&&I.execCommand("expandRegion",{start:T[0],end:T[1]})}},{key:"rangeForNodesMatching",value:function(I,T,ua){I=this.parse(I);return(T=$a.custom.findNodesIncluding(I,T).reverse().find(ua))?[T.start,T.end]:null}},{key:"rangeForFunctionOrDefinition",
value:function(I,T){var ua=T[0]===T[1];return this.rangeForNodesMatching(I,T[1],function(Da){return["AssignmentExpression","FunctionDeclaration","FunctionExpression","MethodDefinition"].includes(Da.type)&&(ua&&Da.end!==T[1]||!ua&&Da.start<T[0])?!0:!1})}},{key:"resolveIdentifierAt",value:function(I,T){"number"!==typeof T&&(T=I.positionToIndex(T));I=this.ensureAST(I);var ua=$a.query.nodesAt(T,I).reverse(),Da=ua.find(function(Db){return"Identifier"===Db.type});if(!Da&&((ua=ua[0])&&ua.type.includes("Specifier")&&
ua.local&&"Identifier"===ua.local.type&&(Da=ua.local),!Da))return;T=(ua=$a.query.findDeclarationClosestToIndex(I,Da.name,T))?$a.query.scopeAtIndex(I,ua.start):$a.query.scopeAtIndex(I,T);var Kb=$a.query.findReferencesAndDeclsInScope(T,Da.name).refs;return{parsed:I,scope:T,id:Da,name:Da.name,decl:ua,refs:Kb}}},{key:"expandRegion",value:function(I,T,ua,Da){function Kb(Gd){Gd=I.positionToIndex({column:0,row:Fa.row});return{range:[Gd+ac.start,Gd+ac.start+ac.value.length],prev:Da}}var Db=Da.range[0]!==
Da.range[1],Fa=I.indexToPosition(Da.range[0]),ac=I.tokenAt(Fa);if(!Db&&ac&&["keyword","identifier"].includes(ac.type))return Kb();ua=ua||this.parse(T);T=$a.query.nodesAtIndex(ua,Da.range[0]).reverse().find(function(Gd){return Gd.start<Da.range[0]||Gd.end>Da.range[1]});if(!T)return Da;ua=T.start;Db=T.end;return"Literal"===T.type&&(T.raw||"").match(/^['"`]/)&&Da.range[0]!==T.start&&Da.range[1]!==T.end&&(T.start+1<Da.range[0]||T.end-1>Da.range[1])?{range:[ua+1,Db-1],prev:Da}:{range:[ua,Db],prev:Da}}},
{key:"contractRegion",value:function(I,T,ua,Da){return Da.prev||Da}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptNavigator"}}],Xb,{pathInPackage:function(){return"js/navigator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:121,end:6658})}(void 0);Dc=dc=$a.JavaScriptNavigator;$a.default=dc;var oc=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js");
oc.addIndexToTextPos=function(rc,Xb,wc){return rc.indexToPosition(rc.positionToIndex(Xb)+wc)};oc.connect=Jc;oc.disconnect=wd;oc.string=Kc;oc.KeyHandler=Fc;oc.Range=Wc;dc=function(rc){var Xb=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js"),wc=Xb.hasOwnProperty("Snippet")&&"function"===typeof Xb.Snippet?Xb.Snippet:Xb.Snippet=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kb(wc,rc,[{key:Symbol.for("lively-instance-initialize"),
value:function(I){I=void 0===I?{trigger:null,expansion:""}:I;var T=I.expansion;this.trigger=I.trigger;this.expansion=T;this.resetExpansionState()}},{key:"isTextSnippet",get:function(){return!0}},{key:"attach",value:function(I){this.isExpanding&&(this.textMorph=I,oc.connect(this.textMorph,"selectionChange",this,"onCursorMove"))}},{key:"detach",value:function(I){this.isExpanding&&(oc.disconnect(I,"selectionChange",this,"onCursorMove"),this.textMorph=null)}},{key:"onCursorMove",value:function(){var I=
this.expansionState,T=I.startAnchor,ua=I.endAnchor;I.isExpanding?oc.Range.fromPositions(T.position,ua.position).containsPosition(this.textMorph.cursorPosition)||this.resetExpansionState():this.resetExpansionState()}},{key:"resetExpansionState",value:function(){var I=this.textMorph;if(I){var T=this.expansionState||{},ua=T.marker,Da=T.startAnchor,Kb=T.endAnchor;T=T.steps;Da&&I.removeAnchor(Da);Kb&&I.removeAnchor(Kb);ua&&I.removeMarker(ua);T.forEach(function(Db){return I.removeAnchor(Db.anchor)})}this.expansionState=
{stepIndex:-1,steps:[],isExpanding:!1,startMarker:null,endMarker:null};I&&I.removePlugin(this)}},{key:"isExpanding",get:function(){return this.expansionState.isExpanding}},{key:"createExpansionSteps",value:function(I){var T=[],ua=0;oc.string.reMatches(I,/\$[0-9]+|\$\{[0-9]+:[^\}]*\}/g).forEach(function(Da){var Kb=Da.start,Db=Da.end;Da=Da.match;var Fa="";Da.startsWith("${")?(Fa=$jscomp.makeIterator(Da.match(/^\$\{([0-9]+):([^\}]*)\}/)),Fa.next(),Da=Fa.next().value,Fa=Fa.next().value,Da=Number(Da)):
Da=Number(Da.replace(/^\$/,""));I=I.slice(0,Kb-ua)+Fa+I.slice(Db-ua);T[Da]={index:Kb-ua,prefill:Fa,anchor:null};ua+=Db-Kb-Fa.length});return{steps:T,expansion:I}}},{key:"expandAtCursor",value:function(I){var T=I.selection,ua=I.cursorPosition.column,Da=this.expansion;this.trigger&&(ua-=this.trigger.length);if(ua=Math.max(0,ua))Da=oc.string.lines(Da),Da=[Da[0]].concat($jscomp.arrayFromIterable(Da.slice(1).map(function(fd){return oc.string.indent(fd," ",ua)}))),Da=Da.join("\n");var Kb=this.createExpansionSteps(Da);
Da=Kb.expansion;Kb=Kb.steps;this.trigger&&T.growLeft(this.trigger.length);T.text=Da;var Db=T.start;Da=T.end;T.collapseToEnd();if(Kb.length){var Fa=oc.string.newUUID();Kb.forEach(function(fd,Gc){return fd.anchor=I.addAnchor(Object.assign({id:"snippet-step-"+Gc+"-"+Fa},oc.addIndexToTextPos(I,Db,fd.index)))});var ac=I.addAnchor(Object.assign({id:"snippet-start-"+Fa},Db,{insertBehavior:"stay"})),Gd=I.addAnchor(Object.assign({id:"snippet-end-"+Fa},Da));this.expansionState={marker:I.addMarker({id:"snippet-marker-"+
Fa,get range(){return{start:ac.position,end:Gd.position}},style:{"border-radius":"4px","background-color":"rgba(30, 200, 140, 0.3)","box-shadow":"0 0 4px rgba(30, 200, 140, 0.3)","pointer-events":"none",content:"fooooo"}}),startAnchor:ac,endAnchor:Gd,stepIndex:0,steps:Kb,isExpanding:!0};I.addPlugin(this);this.nextStep()}}},{key:"nextStep",value:function(){var I=this.expansionState,T=I.steps,ua=this.textMorph;if(I.isExpanding&&ua){ua=ua.selection;I=T[I.stepIndex];var Da=I.prefill;ua.lead=ua.anchor=
I.anchor.position;ua.growRight(Da.length);this.expansionState.stepIndex++;this.expansionState.stepIndex>=T.length&&(this.resetExpansionState(),console.log("[snippet] expansion of "+this.expansion+" done"))}}},{key:"canExpand",value:function(I,T){T=I.positionToIndex(I.cursorPosition);return I.textString.slice(T-this.trigger.length,T)===this.trigger}},{key:"tryTrigger",value:function(I,T){if(!this.canExpand(I,I.cursorPosition))return!1;this.expandAtCursor(I);return!0}},{key:"getCommands",value:function(I){var T=
this;return I.concat([{name:"[snippet] next expansion step",exec:function(ua){T.nextStep();return!0}},{name:"[snippet] cancel expansion",exec:function(ua){T.resetExpansionState();return!0}}])}},{key:"getKeyHandlers",value:function(I){return I.concat(oc.KeyHandler.withBindings([{keys:"Tab",command:"[snippet] next expansion step"},{keys:"Escape",command:"[snippet] cancel expansion"}]))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Snippet"}}],Xb,{pathInPackage:function(){return"text/snippets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:356,end:5934})}(void 0);oc.Snippet=dc;oc.Snippet=dc;oc.Snippet=dc;var sa=[{name:"get snippets",exec:function(rc){return rc.pluginCollect("getSnippets",[])}}];oc.snippetCommands=sa;oc.snippetCommands=sa;oc.snippetCommands=sa;var Ca=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js");
Ca.buildEvalOpts=function(rc,Xb){return rc.plugins.find(function(wc){return wc.isJSEditorPlugin}).sanatizedJsEnv(Xb)};Ca.Snippet=dc;sa=function(rc){var Xb=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),wc=Xb.hasOwnProperty("ModuleTopLevelVarCompleter")&&"function"===typeof Xb.ModuleTopLevelVarCompleter?Xb.ModuleTopLevelVarCompleter:Xb.ModuleTopLevelVarCompleter=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return kb(wc,rc,[{key:"compute",value:function(I,T){var ua,Da,Kb,Db,Fa,ac;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gd){if(1==Gd.nextAddress){Da=(ua=I.pluginFind(function(fd){return fd.isJSEditorPlugin}))&&ua.systemInterface();if(!Da)return Gd.return([]);Kb=Ca.buildEvalOpts(I);Db=Kb.targetModule;return"local"===Da.name?(Fa=Object.getOwnPropertyNames(Da.getModule(Db).recorder),Gd.jumpTo(2)):Gd.yield(Da.runEval('\n        var result, livelySystem = typeof System !== "undefined"\n                      && System.get(System.decanonicalize("lively-system-interface"));\n        if (livelySystem) {\n          result = JSON.stringify(\n            Object.getOwnPropertyNames(livelySystem.localInterface.getModule("'+
Db+'").recorder));\n        } else {\n          var G = typeof window !== "undefined" ?\n            window : typeof global !== "undefined" ? global : this;\n          result = JSON.stringify(Object.getOwnPropertyNames(G));\n        }\n        result;\n      ',{targetModule:"lively://module-recorder-completer"}),3)}if(2!=Gd.nextAddress){ac=Gd.yieldResult;if(ac.isError)return Gd.return([]);Fa=JSON.parse(ac.value)}Fa=Fa.filter(function(fd){return!fd.startsWith("defVar_")&&!["System","__currentLivelyModule",
"initializeES6ClassForLively","_moduleExport","_moduleImport"].includes(fd)});return Gd.return(Fa.map(function(fd){return{priority:1100,completion:fd}}))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleTopLevelVarCompleter"}}],Xb,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:222,end:1678})}(void 0);Ca.ModuleTopLevelVarCompleter=sa;Ca.ModuleTopLevelVarCompleter=sa;Ca.ModuleTopLevelVarCompleter=sa;sa=function(rc){var Xb=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),wc=Xb.hasOwnProperty("DynamicJavaScriptCompleter")&&"function"===typeof Xb.DynamicJavaScriptCompleter?Xb.DynamicJavaScriptCompleter:Xb.DynamicJavaScriptCompleter=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return kb(wc,rc,[{key:"isValidPrefix",value:function(I){return/\.[a-z0-9_]*$/i.test(I)}},{key:"isMethodCallCompletion",value:function(I){return I.endsWith(")")&&0<I.indexOf("(")}},{key:"isValidIdentifier",value:function(I){if("string"!==typeof I)return!1;this.isMethodCallCompletion(I)&&(I=I.slice(0,I.indexOf("(")));return/^[a-z_\$][0-9a-z_\$]*$/i.test(I)?!0:!1}},{key:"wrapInBrackets",value:function(I){if(!isNaN(Number(I))||I.startsWith("Symbol."))return"["+I+"]";var T="";this.isMethodCallCompletion(I)&&
(T=I.slice(I.indexOf("(")),I=I.slice(0,I.indexOf("(")));return'["'+I.replace(/"/g,'\\"')+'"]'+T}},{key:"compute",value:function(I){var T=this,ua,Da,Kb,Db,Fa,ac,Gd,fd,Gc,Ea,Oc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Va){if(1==Va.nextAddress){ua=I.selection;ua.isEmpty()?(Da=I.getLine(ua.lead.row),Da=Da.slice(Da.lastIndexOf(":")+1,ua.lead.column)):Da=ua.text.slice(Math.max(0,ua.text.indexOf(":")),0);if(!T.isValidPrefix(Da))return Va.return([]);Db=(Kb=I.pluginFind(function(kd){return kd.isJSEditorPlugin}))&&
Kb.systemInterface();if(!Db)return Va.return([]);Fa=Ca.buildEvalOpts(I);return Va.yield(Db.dynamicCompletionsForPrefix(Fa.targetModule,Da,Fa),2)}ac=Va.yieldResult;Gd=ac.isError;fd=ac.value;Gc=ac.completions;Ea=ac.prefix;if(Gd)return console.warn("javascript completer encountered error: "+(fd.stack||fd)),Va.return([]);Gc.reduce(function(kd,Ka){Ka=$jscomp.makeIterator(Ka);Ka.next();Ka=Ka.next().value;return kd+Ka.length},0);Oc=Gc.reduce(function(kd,Ka,Wa){Ka=$jscomp.makeIterator(Ka);var db=Ka.next().value;
Ka=Ka.next().value;return kd.concat(Ka.map(function(Zc){var xd=T.isValidIdentifier(Zc);return{info:db,completion:Zc,prefix:xd?Ea:"."+Ea,customInsertionFn:xd?T.isMethodCallCompletion(Zc)?function(Wd,le,yc,Rd){le=Rd.start;Rd=Rd.end;Wd=Wd.replace(/\((.*)\)/,function(bd){return"("+bd.slice(1,-1).split(", ").map(function(Fb,ea){return"${"+ea+":"+Fb+"}"}).join(", ")+")"});Wd=new Ca.Snippet({expansion:Wd});yc.replace({start:le,end:Rd},"");Wd.expandAtCursor(yc)}:null:function(Wd,le,yc,Rd){Wd=Rd.start;Rd=
Rd.end;le={row:Wd.row,column:Wd.column-1};Rd="."===yc.textInRange({start:le,end:Wd})?{start:le,end:Rd}:{start:Wd,end:Rd};yc.replace(Rd,T.wrapInBrackets(Zc))}}}))},[]);Oc.forEach(function(kd,Ka){return Object.assign(kd,{priority:2E3+Oc.length-Ka})});return Va.return(Oc)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DynamicJavaScriptCompleter"}}],Xb,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1687,end:5122})}(void 0);Ca.DynamicJavaScriptCompleter=sa;Ca.DynamicJavaScriptCompleter=sa;Ca.DynamicJavaScriptCompleter=sa;Ca.keywords="arguments boolean break case catch class const continue debugger default delete eval export import extends false true finally instanceof static super this throw typeof while with yield await Array Date eval function hasOwnProperty Infinity isFinite isNaN isPrototypeOf length Math NaN name Number Object prototype String toString undefined valueOf alert assign clearInterval clearTimeout decodeURI decodeURIComponent document encodeURI encodeURIComponent escape navigator parseFloat parseInt setInterval setTimeout window document requestAnimationFrame cancelAnimationFrame".split(" ");
sa=function(rc){var Xb=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),wc=Xb.hasOwnProperty("JavaScriptKeywordCompleter")&&"function"===typeof Xb.JavaScriptKeywordCompleter?Xb.JavaScriptKeywordCompleter:Xb.JavaScriptKeywordCompleter=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kb(wc,rc,[{key:"compute",value:function(I,T){return Ca.keywords.map(function(ua){return{completion:ua,priority:0}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptKeywordCompleter"}}],Xb,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:6125,end:6262})}(void 0);Ca.JavaScriptKeywordCompleter=sa;Ca.JavaScriptKeywordCompleter=sa;Ca.JavaScriptKeywordCompleter=sa;sa=[new Ca.DynamicJavaScriptCompleter,
new Ca.JavaScriptKeywordCompleter,new Ca.ModuleTopLevelVarCompleter];Ca.completers=sa;Ca.completers=sa;Ca.completers=sa;var bb=lively.FreezerRuntime.recorderFor("lively.ide/js/snippets.js");bb.Snippet=dc;var rb=[["typef",'typeof ${0:object} === "function"$1'],["types",'typeof ${0:object} === "string"$1'],["typen",'typeof ${0:object} === "number"$1'],["typeu",'typeof ${0:object} === "undefined"$1'],["typenu",'typeof ${0:object} !== "undefined"$1'],["import",'import { ${0:name} } from "${1:module}";'],
["importd",'import ${0:name} from "${1:module}";'],["import*",'import * as ${0:name} from "${1:module}";'],["subclass","class ${0:name} extends ${1:base} {\n  constructor(${2:args}) {\n    super(${3:args})\n    $4\n  }\n}"],["class","class ${0:name} {\n  constructor(${1:args}) {\n    $2\n  }\n}"],["switch","switch (${0:expression}) {\n  case '${2:case}':\n    ${3:// code}\n    break;\n    $4\n    default:\n    ${1:// code}\n}"],["tryf","try {${0:/* code */}} finally {}"],["try","try {${0:/* code */}} catch (err) {}"],
["do","do {${1:/* code */}} while (${0:/* condition */});"],["fori","for (let ${0:prop} in ${1:obj}) {\n  ${2:obj[prop]}\n}"],["foro","for (let ${0:value} of ${1:iterable}) {\n  ${2:value}\n}"],["for-","for (let ${0:i} = ${1:list}.length; ${2:i}--; ) {\n  $3\n}"],["for","for (let ${0:i} = 0; ${1:i} < ${3:list}.length; ${2:i}++) {\n  $4\n}"],["Prom","new Promise((resolve, reject) => {$0})"],["keys","Object.keys($0)"],["assign","Object.assign(${0:dest}, ${1:source})"],["stringi","JSON.stringify(${0:object})"],
["forE","forEach(${0:ea} => $1)"],["map","map(${0:ea} => $1)"],["reduce","reduce((${1:all}, ${2:ea}) => {$3}, ${0:init})"],["from","Array.from(${0:list})"],["last","arr.last(${0:list})"],["pluck",'arr.pluck(${0:list}, "${1:key}")'],["sortBy","arr.sortBy(${0:list}, ($1) => $2)"],["join",'join("\\n")'],["con","connect(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["once","once(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["sig","signal(${0:source}, '${1:sourceAttr}', ${2:value});"],
["ll","lively.lang."],["lls","lively.lang.string."],["lla","lively.lang.arr."],["llo","lively.lang.obj."],["llf","lively.lang.fun."],["llp","lively.lang.promise."],["withA","withAllSubmorphsDo(ea => { return ${0:ea}; })"],["$w","$world"],["$m","$morph('${0:name}')"],["get",'get("${0:name}")'],["$","${$0}"],["cl","console.log($0)"],["cw","console.warn($0)"],["ce","console.error($0)"],["s","show(`$0`);"],["l2lC",'import L2LClient from "lively.2lively/client.js";\nlet l2lClient = L2LClient.default();$0'],
["fun","function ${0:functionName}($1) {$2}"],["fn","function($0) {$1}"],["f","($0) => $1"],["aw","await $0"]];bb.snippets=rb;bb.snippets=rb;bb.snippets=rb;var qb=lively.FreezerRuntime.recorderFor("lively.ide/js/commands.js");qb.getEvalEnv=function(rc){return(rc=rc.pluginFind(function(Xb){return Xb.isJSEditorPlugin}))?rc.evalEnvironment:null};qb.setEvalEnv=function(rc,Xb){(rc=rc.pluginFind(function(wc){return wc.isJSEditorPlugin}))&&Object.assign(rc.evalEnvironment,Xb);return rc.evalEnvironment};
qb.pToI=function(rc,Xb){return rc.positionToIndex(Xb)};qb.iToP=function(rc,Xb){return rc.indexToPosition(Xb)};qb.arr=hd;qb.promise=Id;qb.string=Kc;qb.show=Na;qb.Range=Wc;qb.query=zb;qb.BaseVisitor=nd;bb=[{name:"undefine variable",doc:"Finds the variable at cursor position (or position passed) and undefines it in the module toplevel scope.",exec:function(rc,Xb){Xb=void 0===Xb?{varName:null,position:null}:Xb;var wc,I,T,ua,Da,Kb,Db,Fa,ac,Gd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fd){switch(fd.nextAddress){case 1:wc=
Xb;I=wc.varName;T=wc.position;if(!I){T||(T=rc.cursorPosition);ua=rc.pluginInvokeFirst("getNavigator");Da=ua.ensureAST(rc);Kb=qb.query.nodesAt(rc.positionToIndex(T),Da).reverse().find(function(Gc){return"Identifier"===Gc.type});if(!Kb)return rc.showError(Error("no identifier found!")),fd.return(!0);I=Kb.name}Xb=rc.pluginFind(function(Gc){return Gc.isJSEditorPlugin}).sanatizedJsEnv();Db='lively.modules.module("'+Xb.targetModule+'").undefine("'+I+'")';fd.setCatchFinallyBlocks(2);return fd.yield(rc.doEval(null,
Xb,Db),4);case 4:Fa=fd.yieldResult;ac=Fa.error?Fa.error:Fa.isError?Fa.value:null;fd.leaveTryBlock(3);break;case 2:ac=Gd=fd.enterCatchBlock();case 3:return ac?rc.showError(ac):rc.setStatusMessage(I+" undefined"),fd.return(!0)}})}},{name:"change doitContext",exec:function(rc){var Xb,wc,I,T,ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Da){if(1==Da.nextAddress)return Xb=$jscomp,wc=Xb.makeIterator,Da.yield(rc.world().execCommand("select morph",{prompt:"select morph for doitContext",justReturn:!0,
prependItems:["reset"],filterFn:function(Kb){return!Kb.isUsedAsEpiMorph()}}),2);I=wc.call(Xb,Da.yieldResult);if(T=I.next().value)ua="reset"===T,rc.doitContext=ua?null:T,rc.setStatusMessage(ua?"doitContext is now\n"+T:"doitContext reset");return Da.return(!0)})}},{name:"change eval backend",exec:function(rc,Xb){Xb=void 0===Xb?{backend:void 0}:Xb;var wc,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){if(1==T.nextAddress)return wc=Xb,I=wc.backend,void 0!==I?T.jumpTo(2):T.yield(rc.world().prompt("choose eval backend",
{historyId:"js-eval-backend-history"}),3);if(2!=T.nextAddress&&(I=T.yieldResult,!I))return rc.setStatusMessage("Canceled"),T.return(!0);"local"===I&&(I=null);rc.setStatusMessage("Eval backend is now "+(I||"local"));return T.return(qb.setEvalEnv(rc,{remote:I}))})}},{name:"copy current module name to clipboard",exec:function(rc){var Xb=rc.evalEnvironment.targetModule;rc.setStatusMessage(Xb?Xb:"Cannot find module name");rc.env.eventDispatcher.killRing.add(rc);rc.env.eventDispatcher.doCopy(Xb);return!0}}];
qb.jsEditorCommands=bb;qb.jsEditorCommands=bb;qb.jsEditorCommands=bb;var Sa=[{name:"[javascript] list errors and warnings",exec:function(rc){var Xb,wc,I,T,ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Da){if(1==Da.nextAddress){Xb=(rc.markers||[]).filter(function(Kb){Kb=Kb.type;return"js-undeclared-var"===Kb||"js-syntax-error"===Kb});if(!Xb.length)return qb.show("no warnings or errors"),Da.return(!0);wc=Xb.map(function(Kb){var Db=Kb.range;return{isListItem:!0,string:"["+Kb.type.split("-").slice(1).join(" ")+
"] "+rc.textInRange(Db),value:Db}});return Da.yield(rc.world().filterableListPrompt("jump to warning or error",wc),2)}I=Da.yieldResult;T=$jscomp.makeIterator(I.selected);if(ua=T.next().value)rc.saveMark(),rc.selection=ua,rc.centerRow(ua.start.row);return Da.return(!0)})}},{name:"[javascript] inject import",exec:function(rc,Xb){Xb=void 0===Xb?{gotoImport:!1,insertImportAtCursor:!0}:Xb;var wc,I,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ua){switch(ua.nextAddress){case 1:return ua.yield(qb.promise.delay(0),
2);case 2:return ua.yield(System.import("lively.ide/js/import-helper.js"),3);case 3:return wc=ua.yieldResult,I=wc.interactivelyInjectImportIntoText,ua.yield(I(rc,Xb),4);case 4:return(T=ua.yieldResult)||rc.setStatusMessage("canceled"),ua.return(T)}})}},{name:"[javascript] fix undeclared variables",exec:function(rc,Xb){Xb=void 0===Xb?{ignore:[],autoApplyIfSingleChoice:!1,requester:rc}:Xb;var wc,I,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ua){if(1==ua.nextAddress)return ua.yield(System.import("lively.ide/js/import-helper.js"),
2);if(3!=ua.nextAddress)return wc=ua.yieldResult,I=wc.interactivlyFixUndeclaredVariables,ua.yield(I(rc,Xb),3);T=ua.yieldResult;rc.focus();return ua.return(T)})}},{name:"[javascript] remove unused imports",exec:function(rc,Xb){Xb=void 0===Xb?{query:!0}:Xb;var wc,I,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ua){if(1==ua.nextAddress)return ua.yield(System.import("lively.ide/js/import-helper.js"),2);if(3!=ua.nextAddress)return wc=ua.yieldResult,I=wc.cleanupUnusedImports,ua.yield(I(rc,
Xb),3);T=ua.yieldResult;rc.setStatusMessage(T);return ua.return(!0)})}},{name:"[javascript] eslint report",exec:function(rc){var Xb,wc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);Xb=I.yieldResult;wc=Xb.default;try{return I.return(wc.reportOnMorph(rc))}catch(T){rc.showError(T)}I.jumpToEnd()})}},{name:"[javascript] eslint preview fixes",exec:function(rc){var Xb,wc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==
I.nextAddress)return I.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);Xb=I.yieldResult;wc=Xb.default;try{return I.return(wc.previewFixesOnMorph(rc))}catch(T){rc.showError(T)}I.jumpToEnd()})}},{name:"[javascript] auto format code",handlesCount:!0,exec:function(rc,Xb,wc){function I(Va,kd){kd||(kd=Fa(Va,{allowReturnOutsideFunction:!0}));var Ka=qb.string.lineRanges(Va),Wa=Va.split("\n"),db=[],Zc=new qb.BaseVisitor,xd=Zc.visitVariableDeclaration;Zc.visitVariableDeclaration=function(Rd,
bd,Fb){if(1<Rd.declarations.length)for(var ea=qb.string.findLineWithIndexInLineRanges(Ka,Rd.start),la=Rd.declarations[0].start-Ka[ea][0],tb={},H=1;H<Rd.declarations.length;tb={$jscomp$loop$prop$actionType$2275:tb.$jscomp$loop$prop$actionType$2275,$jscomp$loop$prop$arg$2276:tb.$jscomp$loop$prop$arg$2276},H++){var ja=Rd.declarations[H],Ba=qb.string.findLineWithIndexInLineRanges(Ka,ja.start);if(ea!==Ba){var ub=Wa[Ba].match(/\s*/)[0].length;ub=la-ub;0!==ub&&(ja=qb.string.findLineWithIndexInLineRanges(Ka,
ja.end),tb.$jscomp$loop$prop$actionType$2275=0<ub?"insert":"delete",tb.$jscomp$loop$prop$arg$2276=0<ub?" ".repeat(ub):-ub,db.push.apply(db,$jscomp.arrayFromIterable(qb.arr.range(Ba,ja).map(function(jc){return function(vc){return[jc.$jscomp$loop$prop$actionType$2275,Ka[vc][0],jc.$jscomp$loop$prop$arg$2276]}}(tb)))))}}return xd.call(Zc,Rd,bd,Fb)};Zc.accept(kd,{},[]);for(kd=db.length;kd--;){var Wd=$jscomp.makeIterator(db[kd]),le=Wd.next().value,yc=Wd.next().value;Wd=Wd.next().value;"insert"===le?Va=
Va.slice(0,yc)+Wd+Va.slice(yc):"delete"===le&&(Va=Va.slice(0,yc)+Va.slice(yc+Wd))}return Va}var T,ua,Da,Kb,Db,Fa,ac,Gd,fd,Gc,Ea,Oc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Va){switch(Va.nextAddress){case 1:return T=wc?wc:Math.floor(rc.width/rc.defaultCharExtent().width),Xb=Object.assign({printWidth:T,tabWidth:2,useTabs:!1,bracketSpacing:!1},Xb),ua=lively.modules.module,Da=System.normalizeSync("prettier/standalone.js"),Va.yield(ua(Da).load({format:"global",instrument:!1}),2);case 2:return Kb=
Va.yieldResult,Va.yield(ua("lively.ast/lib/acorn-extension.js").load(),3);case 3:return Va.yield(ua("lively.ast").load(),4);case 4:return Db=Va.yieldResult,Fa=Db.parse,Va.yield(ua("lively.ast/lib/query.js").load(),5);case 5:return Va.yield(System.import("jsdiff",System.decanonicalize("lively.morphic")),6);case 6:return ac=Va.yieldResult,Gd=rc.selection.isEmpty()?rc.documentRange:rc.selection.range,fd=rc.positionToIndex(Gd.start),Gc=rc.positionToIndex(Gd.end),Ea=Kb.format(rc.textString,Object.assign({},
Xb,{rangeStart:fd,rangeEnd:Gc,parser:function(kd,Ka,Wa){return Fa(kd,{allowReturnOutsideFunction:!0})}})),rc.undoManager.group(),Oc=ac.diffChars(rc.textString,Ea),rc.applyJsDiffPatch(Oc),rc.selection.text=I(rc.selection.text),rc.undoManager.group(),Va.return(!0)}})}}];qb.jsIdeCommands=Sa;qb.jsIdeCommands=Sa;qb.jsIdeCommands=Sa;var Ta=[{name:"selectDefinition",readOnly:!0,bindKey:"Alt-.",exec:function(rc,Xb){Xb=rc.pluginInvokeFirst("getNavigator");if(!Xb)return!0;Xb=Xb.resolveIdentifierAt(rc,rc.cursorPosition);
if(!Xb||!Xb.id)return qb.show("No symbol identifier selected"),!0;if(!Xb.decl)return qb.show("Cannot find declaration of "+Xb.name),!0;rc.saveMark();rc.selection={start:rc.indexToPosition(Xb.decl.start),end:rc.indexToPosition(Xb.decl.end)};rc.scrollCursorIntoView();return!0}},{name:"selectSymbolReferenceOrDeclarationNext",readOnly:!0,multiSelectAction:"single",exec:function(rc){rc.execCommand("selectSymbolReferenceOrDeclaration",{direction:"next"})}},{name:"selectSymbolReferenceOrDeclarationPrev",
readOnly:!0,multiSelectAction:"single",exec:function(rc){rc.execCommand("selectSymbolReferenceOrDeclaration",{direction:"prev"})}},{name:"selectSymbolReferenceOrDeclaration",doc:"Finds the name of the currently selected symbol and will use the JS ast to select references and declarations whose name matches the symbol in the current scope.",readOnly:!0,multiSelectAction:"single",exec:function(rc,Xb){Xb=void 0===Xb?{direction:null}:Xb;var wc=rc.pluginInvokeFirst("getNavigator");if(!wc)return!0;wc=wc.resolveIdentifierAt(rc,
rc.cursorPosition);if(!wc||!wc.refs)return qb.show("No symbol identifier selected"),!0;var I=rc.selection;wc=wc.refs.map(function(ua){var Da=ua.end;return qb.Range.fromPositions(qb.iToP(rc,ua.start),qb.iToP(rc,Da))}).concat(wc.decl?qb.Range.fromPositions(qb.iToP(rc,wc.decl.start),qb.iToP(rc,wc.decl.end)):[]).sort(qb.Range.compare);if(!wc.length)return!0;var T=wc.map(String).indexOf(String(I.range));if("next"===Xb.direction||"prev"===Xb.direction)-1===T&&wc.length?wc=[wc[0]]:(Xb=T+("next"===Xb.direction?
1:-1),0>Xb?Xb=wc.length-1:Xb>=wc.length&&(Xb=0),wc=[wc[Xb]]);wc.forEach(function(ua){var Da=I.selections.findIndex(function(Db){return Db.range.equals(ua)}),Kb=I.selections.length-1;-1<Da?qb.arr.swap(I.selections,Da,Kb):I.addRange(ua,!1)});I.mergeSelections();return!0}}];qb.astEditorCommands=Ta;qb.astEditorCommands=Ta;qb.astEditorCommands=Ta;lively.modules&&!lively.FreezerRuntime&&lively.modules.module("lively.ide/js/editor-plugin.js").reload({reloadDeps:!1,resetEnv:!1});var sb=lively.FreezerRuntime.recorderFor("lively.ide/js/mode.js");
sb.expressionAllowed=function(rc,Xb,wc){return/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(Xb.lastType)||"quasi"==Xb.lastType&&/\{\s*$/.test(rc.string.slice(0,rc.pos-(wc||0)))};sb.passIndent=nb;sb.defineMode=Pb;sb.defineMIME=Wb;sb.registerHelper=Pc;sb.defaultConfig={indentUnit:2};sb.defaultParserConfig={name:"javascript",statementIndent:2,jsonld:!1,json:!1,typescript:!1,wordCharacters:/[\w$\xa1-\uffff]/,globalVars:[],localVars:[],doubleIndentSwitch:null};sb.defineMode("javascript",
function(rc,Xb){function wc(Cb,Vc,mc){dk=Cb;Mi=mc;return Vc}function I(Cb,Vc){var mc=Cb.next();if('"'==mc||"'"==mc)return Vc.tokenize=T(mc),Vc.tokenize(Cb,Vc);if("."==mc&&Cb.match(/^\d+(?:[eE][+\-]?\d+)?/))return wc("number","number");if("."==mc&&Cb.match(".."))return wc("spread","meta");if(/[\[\]{}\(\),;:\.]/.test(mc))return wc(mc);if("="==mc&&Cb.eat(">"))return wc("=>","operator");if("0"==mc&&Cb.eat(/x/i))return Cb.eatWhile(/[\da-f]/i),wc("number","number");if("0"==mc&&Cb.eat(/o/i))return Cb.eatWhile(/[0-7]/i),
wc("number","number");if("0"==mc&&Cb.eat(/b/i))return Cb.eatWhile(/[01]/i),wc("number","number");if(/\d/.test(mc))return Cb.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),wc("number","number");if("/"==mc){if(Cb.eat("*"))return Vc.tokenize=ua,ua(Cb,Vc);if(Cb.eat("/"))return Cb.skipToEnd(),wc("comment","comment");if(sb.expressionAllowed(Cb,Vc,1)){a:for(var Sd=Vc=!1;null!=(mc=Cb.next());){if(!Vc){if("/"==mc&&!Sd)break a;"["==mc?Sd=!0:Sd&&"]"==mc&&(Sd=!1)}Vc=!Vc&&"\\"==mc}Cb.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);
return wc("regexp","string-2")}Cb.eatWhile(Ri);return wc("operator","operator",Cb.current())}if("`"==mc)return Vc.tokenize=Da,Da(Cb,Vc);if("#"==mc)return Cb.skipToEnd(),wc("error","error");if(Ri.test(mc))return">"==mc&&Vc.lexical&&">"==Vc.lexical.type||Cb.eatWhile(Ri),wc("operator","operator",Cb.current());if(vk.test(mc))return Cb.eatWhile(vk),Cb=Cb.current(),(mc=ag.propertyIsEnumerable(Cb)&&ag[Cb])&&"."!=Vc.lastType?wc(mc.type,mc.style,Cb):wc("variable","variable",Cb)}function T(Cb){return function(Vc,
mc){var Sd=!1,Hc;if(ch&&"@"==Vc.peek()&&Vc.match(ck))return mc.tokenize=I,wc("jsonld-keyword","meta");for(;null!=(Hc=Vc.next())&&(Hc!=Cb||Sd);)Sd=!Sd&&"\\"==Hc;Sd||(mc.tokenize=I);return wc("string","string")}}function ua(Cb,Vc){for(var mc=!1,Sd;Sd=Cb.next();){if("/"==Sd&&mc){Vc.tokenize=I;break}mc="*"==Sd}return wc("comment","comment")}function Da(Cb,Vc){for(var mc=!1,Sd;null!=(Sd=Cb.next());){if(!mc&&("`"==Sd||"$"==Sd&&Cb.eat("{"))){Vc.tokenize=I;break}mc=!mc&&"\\"==Sd}return wc("quasi","string-2",
Cb.current())}function Kb(Cb,Vc){Vc.fatArrowAt&&(Vc.fatArrowAt=null);var mc=Cb.string.indexOf("=>",Cb.start);if(!(0>mc)){if(lj){var Sd=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Cb.string.slice(Cb.start,mc));Sd&&(mc=Sd.index)}Sd=0;var Hc=!1;for(--mc;0<=mc;--mc){var Xf=Cb.string.charAt(mc),Si="([{}])".indexOf(Xf);if(0<=Si&&3>Si){if(!Sd){++mc;break}if(0==--Sd){"("==Xf&&(Hc=!0);break}}else if(3<=Si&&6>Si)++Sd;else if(vk.test(Xf))Hc=!0;else{if(/["'\/]/.test(Xf))return;if(Hc&&!Sd){++mc;break}}}Hc&&
!Sd&&(Vc.fatArrowAt=mc)}}function Db(Cb,Vc,mc,Sd,Hc,Xf){this.indented=Cb;this.column=Vc;this.type=mc;this.prev=Hc;this.info=Xf;null!=Sd&&(this.align=Sd)}function Fa(){for(var Cb=arguments.length-1;0<=Cb;Cb--)cf.cc.push(arguments[Cb])}function ac(){Fa.apply(null,arguments);return!0}function Gd(Cb){function Vc(Sd){for(;Sd;Sd=Sd.next)if(Sd.name==Cb)return!0;return!1}var mc=cf.state;cf.marked="def";mc.context?Vc(mc.localVars)||(mc.localVars={name:Cb,next:mc.localVars}):!Vc(mc.globalVars)&&Xb.globalVars&&
(mc.globalVars={name:Cb,next:mc.globalVars})}function fd(){cf.state.context={prev:cf.state.context,vars:cf.state.localVars};cf.state.localVars=nl}function Gc(){cf.state.localVars=cf.state.context.vars;cf.state.context=cf.state.context.prev}function Ea(Cb,Vc){var mc=function(){var Sd=cf.state,Hc=Sd.indented;if("stat"==Sd.lexical.type)Hc=Sd.lexical.indented;else for(var Xf=Sd.lexical;Xf&&")"==Xf.type&&Xf.align;Xf=Xf.prev)Hc=Xf.indented;Sd.lexical=new Db(Hc,cf.stream.column(),Cb,null,Sd.lexical,Vc)};
mc.lex=!0;return mc}function Oc(){var Cb=cf.state;Cb.lexical.prev&&(")"==Cb.lexical.type&&(Cb.indented=Cb.lexical.indented),Cb.lexical=Cb.lexical.prev)}function Va(Cb){function Vc(mc){return mc==Cb?ac():";"==Cb?Fa():ac(Vc)}return Vc}function kd(Cb,Vc){return"var"==Cb?ac(Ea("vardef",Vc.length),uc,Va(";"),Oc):"keyword a"==Cb?ac(Ea("form"),db,kd,Oc):"keyword b"==Cb?ac(Ea("form"),kd,Oc):"{"==Cb?ac(Ea("}"),we,Oc):";"==Cb?ac():"if"==Cb?("else"==cf.state.lexical.info&&cf.state.cc[cf.state.cc.length-1]==
Oc&&cf.state.cc.pop()(),ac(Ea("form"),db,kd,Oc,ta)):"function"==Cb?ac(gb):"for"==Cb?ac(Ea("form"),Ma,kd,Oc):"variable"==Cb?lj&&"type"==Vc?(cf.marked="keyword",ac(Zd,Va("operator"),Zd,Va(";"))):ac(Ea("stat"),ja):"switch"==Cb?ac(Ea("form"),db,Va("{"),Ea("}","switch"),we,Oc,Oc):"case"==Cb?ac(Ka,Va(":")):"default"==Cb?ac(Va(":")):"catch"==Cb?ac(Ea("form"),fd,Va("("),lc,Va(")"),kd,Oc,Gc):"class"==Cb?ac(Ea("form"),Yc,Oc):"export"==Cb?ac(Ea("stat"),qe,Oc):"import"==Cb?ac(Ea("stat"),Ag,Oc):"module"==Cb?ac(Ea("form"),
Ze,Va("{"),Ea("}"),we,Oc,Oc):"async"==Cb?ac(kd):"@"==Vc?ac(Ka,kd):Fa(Ea("stat"),Ka,Va(";"),Oc)}function Ka(Cb){return Zc(Cb,!1)}function Wa(Cb){return Zc(Cb,!0)}function db(Cb){return"("!=Cb?Fa():ac(Ea(")"),Ka,Va(")"),Oc)}function Zc(Cb,Vc){if(cf.state.fatArrowAt==cf.stream.start){var mc=Vc?ea:Fb;if("("==Cb)return ac(fd,Ea(")"),Cd(Ze,")"),Oc,Va("=>"),mc,Gc);if("variable"==Cb)return Fa(fd,Ze,Va("=>"),mc,Gc)}mc=Vc?yc:le;return xf.hasOwnProperty(Cb)?ac(mc):"function"==Cb?ac(gb,mc):"class"==Cb?ac(Ea("form"),
$b,Oc):"keyword c"==Cb||"async"==Cb?ac(Vc?Wd:xd):"("==Cb?ac(Ea(")"),xd,Va(")"),Oc,mc):"operator"==Cb||"spread"==Cb?ac(Vc?Wa:Ka):"["==Cb?ac(Ea("]"),Dj,Oc,mc):"{"==Cb?id(ub,"}",null,mc):"quasi"==Cb?Fa(Rd,mc):"new"==Cb?ac(la(Vc)):ac()}function xd(Cb){return Cb.match(/[;\}\)\],]/)?Fa():Fa(Ka)}function Wd(Cb){return Cb.match(/[;\}\)\],]/)?Fa():Fa(Wa)}function le(Cb,Vc){return","==Cb?ac(Ka):yc(Cb,Vc,!1)}function yc(Cb,Vc,mc){var Sd=0==mc?le:yc,Hc=0==mc?Ka:Wa;if("=>"==Cb)return ac(fd,mc?ea:Fb,Gc);if("operator"==
Cb)return/\+\+|--/.test(Vc)?ac(Sd):"?"==Vc?ac(Ka,Va(":"),Hc):ac(Hc);if("quasi"==Cb)return Fa(Rd,Sd);if(";"!=Cb){if("("==Cb)return id(Wa,")","call",Sd);if("."==Cb)return ac(Ba,Sd);if("["==Cb)return ac(Ea("]"),xd,Va("]"),Oc,Sd)}}function Rd(Cb,Vc){return"quasi"!=Cb?Fa():"${"!=Vc.slice(Vc.length-2)?ac(Rd):ac(Ka,bd)}function bd(Cb){if("}"==Cb)return cf.marked="string-2",cf.state.tokenize=Da,ac(Rd)}function Fb(Cb){Kb(cf.stream,cf.state);return Fa("{"==Cb?kd:Ka)}function ea(Cb){Kb(cf.stream,cf.state);return Fa("{"==
Cb?kd:Wa)}function la(Cb){return function(Vc){return"."==Vc?ac(Cb?H:tb):Fa(Cb?Wa:Ka)}}function tb(Cb,Vc){if("target"==Vc)return cf.marked="keyword",ac(le)}function H(Cb,Vc){if("target"==Vc)return cf.marked="keyword",ac(yc)}function ja(Cb){return":"==Cb?ac(Oc,kd):Fa(le,Va(";"),Oc)}function Ba(Cb){if("variable"==Cb)return cf.marked="property",ac()}function ub(Cb,Vc){if("async"==Cb)return cf.marked="property",ac(ub);if("variable"==Cb||"keyword"==cf.style)return cf.marked="property","get"==Vc||"set"==
Vc?ac(jc):ac(vc);if("number"==Cb||"string"==Cb)return cf.marked=ch?"property":cf.style+" property",ac(vc);if("jsonld-keyword"==Cb)return ac(vc);if("modifier"==Cb)return ac(ub);if("["==Cb)return ac(Ka,Va("]"),vc);if("spread"==Cb)return ac(Ka);if(":"==Cb)return Fa(vc)}function jc(Cb){if("variable"!=Cb)return Fa(vc);cf.marked="property";return ac(gb)}function vc(Cb){if(":"==Cb)return ac(Wa);if("("==Cb)return Fa(gb)}function Cd(Cb,Vc,mc){function Sd(Hc,Xf){return(mc?-1<mc.indexOf(Hc):","==Hc)?(Hc=cf.state.lexical,
"call"==Hc.info&&(Hc.pos=(Hc.pos||0)+1),ac(function(Si,Vk){return Si==Vc||Vk==Vc?Fa():Fa(Cb)},Sd)):Hc==Vc||Xf==Vc?ac():ac(Va(Vc))}return function(Hc,Xf){return Hc==Vc||Xf==Vc?ac():Fa(Cb,Sd)}}function id(Cb,Vc,mc){for(var Sd=3;Sd<arguments.length;Sd++)cf.cc.push(arguments[Sd]);return ac(Ea(Vc,mc),Cd(Cb,Vc),Oc)}function we(Cb){return"}"==Cb?ac():Fa(kd,we)}function sd(Cb,Vc){if(lj){if(":"==Cb)return ac(Zd);if("?"==Vc)return ac(sd)}}function Zd(Cb){if("variable"==Cb)return cf.marked="variable-3",ac(Ye);
if("string"==Cb||"number"==Cb||"atom"==Cb)return ac(Ye);if("{"==Cb)return ac(Ea("}"),Cd(Ne,"}",",;"),Oc);if("("==Cb)return ac(Cd(wf,")"),ie)}function ie(Cb){if("=>"==Cb)return ac(Zd)}function Ne(Cb,Vc){if("variable"==Cb||"keyword"==cf.style)return cf.marked="property",ac(Ne);if("?"==Vc)return ac(Ne);if(":"==Cb)return ac(Zd)}function wf(Cb){if("variable"==Cb)return ac(wf);if(":"==Cb)return ac(Zd)}function Ye(Cb,Vc){if("<"==Vc)return ac(Ea(">"),Cd(Zd,">"),Oc,Ye);if("|"==Vc||"."==Cb)return ac(Zd);if("["==
Cb)return ac(Va("]"),Ye);if("extends"==Vc)return ac(Zd)}function uc(){return Fa(Ze,sd,Jf,De)}function Ze(Cb,Vc){if("modifier"==Cb)return ac(Ze);if("variable"==Cb)return Gd(Vc),ac();if("spread"==Cb)return ac(Ze);if("["==Cb)return id(Ze,"]");if("{"==Cb)return id(If,"}")}function If(Cb,Vc){if("variable"==Cb&&!cf.stream.match(/^\s*:/,!1))return Gd(Vc),ac(Jf);"variable"==Cb&&(cf.marked="property");return"spread"==Cb?ac(Ze):"}"==Cb?Fa():ac(Va(":"),Ze,Jf)}function Jf(Cb,Vc){if("="==Vc)return ac(Wa)}function De(Cb){if(","==
Cb)return ac(uc)}function ta(Cb,Vc){if("keyword b"==Cb&&"else"==Vc)return ac(Ea("form","else"),kd,Oc)}function Ma(Cb){if("("==Cb)return ac(Ea(")"),ob,Va(")"),Oc)}function ob(Cb){return"var"==Cb?ac(uc,Va(";"),va):";"==Cb?ac(va):"variable"==Cb?ac(R):Fa(Ka,Va(";"),va)}function R(Cb,Vc){return"in"==Vc||"of"==Vc?(cf.marked="keyword",ac(Ka)):ac(le,va)}function va(Cb,Vc){return";"==Cb?ac(Ya):"in"==Vc||"of"==Vc?(cf.marked="keyword",ac(Ka)):Fa(Ka,Va(";"),Ya)}function Ya(Cb){")"!=Cb&&ac(Ka)}function gb(Cb,
Vc){if("*"==Vc)return cf.marked="keyword",ac(gb);if("variable"==Cb)return Gd(Vc),ac(gb);if("("==Cb)return ac(fd,Ea(")"),Cd(lc,")"),Oc,sd,kd,Gc);if(lj&&"<"==Vc)return ac(Ea(">"),Cd(Zd,">"),Oc,gb)}function lc(Cb){return"spread"==Cb?ac(lc):Fa(Ze,sd,Jf)}function $b(Cb,Vc){return"variable"==Cb?Yc(Cb,Vc):Sc(Cb,Vc)}function Yc(Cb,Vc){if("variable"==Cb)return Gd(Vc),ac(Sc)}function Sc(Cb,Vc){if("<"==Vc)return ac(Ea(">"),Cd(Zd,">"),Oc,Sc);if("extends"==Vc||"implements"==Vc||lj&&","==Cb)return ac(lj?Zd:Ka,
Sc);if("{"==Cb)return ac(Ea("}"),Uc,Oc)}function Uc(Cb,Vc){if("variable"==Cb||"keyword"==cf.style){if(("async"==Vc||"static"==Vc||"get"==Vc||"set"==Vc||lj&&("public"==Vc||"private"==Vc||"protected"==Vc||"readonly"==Vc||"abstract"==Vc))&&cf.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return cf.marked="keyword",ac(Uc);cf.marked="property";return ac(lj?Xd:gb,Uc)}if("["==Cb)return ac(Ka,Va("]"),lj?Xd:gb,Uc);if("*"==Vc)return cf.marked="keyword",ac(Uc);if(";"==Cb)return ac(Uc);if("}"==Cb)return ac();if("@"==
Vc)return ac(Ka,Uc)}function Xd(Cb,Vc){return"?"==Vc?ac(Xd):":"==Cb?ac(Zd,Jf):"="==Vc?ac(Wa):Fa(gb)}function qe(Cb,Vc){return"*"==Vc?(cf.marked="keyword",ac(Bg,Va(";"))):"default"==Vc?(cf.marked="keyword",ac(Ka,Va(";"))):"{"==Cb?ac(Cd(tf,"}"),Bg,Va(";")):Fa(kd)}function tf(Cb,Vc){if("as"==Vc)return cf.marked="keyword",ac(Va("variable"));if("variable"==Cb)return Fa(Wa,tf)}function Ag(Cb){return"string"==Cb?ac():Fa(yh,Lg,Bg)}function yh(Cb,Vc){if("{"==Cb)return id(yh,"}");"variable"==Cb&&Gd(Vc);"*"==
Vc&&(cf.marked="keyword");return ac(pi)}function Lg(Cb){if(","==Cb)return ac(yh,Lg)}function pi(Cb,Vc){if("as"==Vc)return cf.marked="keyword",ac(yh)}function Bg(Cb,Vc){if("from"==Vc)return cf.marked="keyword",ac(Ka)}function Dj(Cb){return"]"==Cb?ac():Fa(Cd(Wa,"]"))}rc=Object.assign({},sb.defaultConfig,{},rc);Xb=Object.assign({},sb.defaultParserConfig,{},Xb);var Ve=rc.indentUnit,yi=Xb.statementIndent,ch=Xb.jsonld,Yd=Xb.json||ch,lj=Xb.typescript,vk=Xb.wordCharacters||/[\w$\xa1-\uffff]/,ag=function(){function Cb(Vk){return{type:Vk,
style:"keyword"}}var Vc=Cb("keyword a"),mc=Cb("keyword b"),Sd=Cb("keyword c"),Hc=Cb("operator"),Xf={type:"atom",style:"atom"};Vc={"if":Cb("if"),"while":Vc,"with":Vc,"else":mc,"do":mc,"try":mc,"finally":mc,"return":Sd,"break":Sd,"continue":Sd,"new":Cb("new"),"delete":Sd,"throw":Sd,"debugger":Sd,"var":Cb("var"),"const":Cb("var"),let:Cb("var"),"function":Cb("function"),"catch":Cb("catch"),"for":Cb("for"),"switch":Cb("switch"),"case":Cb("case"),"default":Cb("default"),"in":Hc,"typeof":Hc,"instanceof":Hc,
"true":Xf,"false":Xf,"null":Xf,undefined:Xf,NaN:Xf,Infinity:Xf,"this":Cb("this"),"class":Cb("class"),"super":Cb("atom"),yield:Sd,"export":Cb("export"),"import":Cb("import"),"extends":Sd,await:Sd,async:Cb("async")};if(lj){mc={type:"variable",style:"variable-3"};Sd={"interface":Cb("class"),"implements":Sd,namespace:Sd,module:Cb("module"),"enum":Cb("module"),"public":Cb("modifier"),"private":Cb("modifier"),"protected":Cb("modifier"),"abstract":Cb("modifier"),as:Hc,string:mc,number:mc,"boolean":mc,any:mc};
for(var Si in Sd)Vc[Si]=Sd[Si]}return Vc}(),Ri=/[+\-*&%=<>!?|~^@]/,ck=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,dk,Mi,xf={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},cf={state:null,column:null,marked:null,cc:null},nl={name:"this",next:{name:"arguments"}};Oc.lex=!0;return{startState:function(Cb){Cb={tokenize:I,lastType:"sof",cc:[],lexical:new Db((Cb||0)-Ve,0,"block",!1),localVars:Xb.localVars,context:Xb.localVars&&{vars:Xb.localVars},
indented:Cb||0};Xb.globalVars&&"object"==typeof Xb.globalVars&&(Cb.globalVars=Xb.globalVars);return Cb},token:function(Cb,Vc){Cb.sol()&&(Vc.lexical.hasOwnProperty("align")||(Vc.lexical.align=!1),Vc.indented=Cb.indentation(),Kb(Cb,Vc));if(Vc.tokenize!=ua&&Cb.eatSpace())return null;var mc=Vc.tokenize(Cb,Vc);if("comment"==dk)return mc;Vc.lastType="operator"!=dk||"++"!=Mi&&"--"!=Mi?dk:"incdec";a:{var Sd=dk,Hc=Mi,Xf=Vc.cc;cf.state=Vc;cf.stream=Cb;cf.marked=null;cf.cc=Xf;cf.style=mc;Vc.lexical.hasOwnProperty("align")||
(Vc.lexical.align=!0);for(Cb=0;;){if(1E5<Cb++)throw Error("endless");if((Xf.length?Xf.pop():Yd?Ka:kd)(Sd,Hc)){for(;Xf.length&&Xf[Xf.length-1].lex;)Xf.pop()();if(cf.marked){mc=cf.marked;break a}if(Sd="variable"==Sd)b:{for(Sd=Vc.localVars;Sd;Sd=Sd.next)if(Sd.name==Hc){Sd=!0;break b}for(Vc=Vc.context;Vc;Vc=Vc.prev)for(Sd=Vc.vars;Sd;Sd=Sd.next)if(Sd.name==Hc){Sd=!0;break b}Sd=void 0}if(Sd){mc="variable-2";break a}break a}}}return mc},indent:function(Cb,Vc){if(Cb.tokenize==ua)return sb.passIndent;if(Cb.tokenize!=
I)return 0;var mc=Vc&&Vc.charAt(0),Sd=Cb.lexical,Hc;if(!/^\s*else\b/.test(Vc))for(var Xf=Cb.cc.length-1;0<=Xf;--Xf){var Si=Cb.cc[Xf];if(Si==Oc)Sd=Sd.prev;else if(Si!=ta)break}for(;!("stat"!=Sd.type&&"form"!=Sd.type||"}"!=mc&&(!(Hc=Cb.cc[Cb.cc.length-1])||Hc!=le&&Hc!=yc||/^[,\.=+\-*:?[\(]/.test(Vc)));)Sd=Sd.prev;yi&&")"==Sd.type&&"stat"==Sd.prev.type&&(Sd=Sd.prev);Hc=Sd.type;Xf=mc==Hc;return(Si=Cb._string)&&Si.trimLeft().startsWith("?")&&":"===mc?Si.indexOf("?"):Si&&":"===Cb.lastType&&"}"!==Sd.type?
Si.match(/^\s*/)[0].length:"vardef"==Hc?(Vc=Sd.indented+Sd.info+2+Cb.localVars.name.length,"?"===mc||":"===mc||"|"===mc||"&"===mc?Vc:","==Cb.lastType?Sd.indented+Sd.info+1:"operator"==Cb.lastType?Vc+3:Sd.indented):"form"==Hc&&"{"==mc?Sd.indented:"form"==Hc?Sd.indented+Ve:"stat"==Hc?(mc=Sd.indented,Cb="operator"==Cb.lastType||","==Cb.lastType||Ri.test(Vc.charAt(0))||/[,.]/.test(Vc.charAt(0)),mc+(Cb?yi||Ve:0)):"switch"!=Sd.info||Xf||0==Xb.doubleIndentSwitch?Sd.align?Sd.column+(Xf?0:1):Sd.indented+(Xf?
0:Ve):Sd.indented+(/^(?:case|default)\b/.test(Vc)?Ve:2*Ve)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Yd?null:"/*",blockCommentEnd:Yd?null:"*/",lineComment:Yd?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Yd?"json":"javascript",jsonldMode:ch,jsonMode:Yd,expressionAllowed:sb.expressionAllowed,skipExpression:function(Cb){var Vc=Cb.cc[Cb.cc.length-1];Vc!=Ka&&Vc!=Wa||Cb.cc.pop()}}});sb.registerHelper("wordChars","javascript",/[\w$]/);sb.defineMIME("text/javascript",
"javascript");sb.defineMIME("text/ecmascript","javascript");sb.defineMIME("application/javascript","javascript");sb.defineMIME("application/x-javascript","javascript");sb.defineMIME("application/ecmascript","javascript");sb.defineMIME("application/json",{name:"javascript",json:!0});sb.defineMIME("application/x-json",{name:"javascript",json:!0});sb.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});sb.defineMIME("text/typescript",{name:"javascript",typescript:!0});sb.defineMIME("application/typescript",
{name:"javascript",typescript:!0});var Zb=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js");Zb.string=Kc;Zb.JavaScriptChecker=Gb;Zb.JavaScriptNavigator=Dc;Zb.completers=sa;Zb.jsSnippets=rb;Zb.jsIdeCommands=Sa;Zb.jsEditorCommands=bb;Zb.astEditorCommands=Ta;Zb.CodeMirrorEnabledEditorPlugin=Bd;Zb.Snippet=dc;Zb.parser=Xc;Zb.localInterface=Hb;Zb.systemInterfaceNamed=Ub;Zb.serverInterfaceFor=vb;Zb.l2lInterfaceFor=kc;Gb=function(rc){var Xb=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js"),
wc=Xb.hasOwnProperty("JavaScriptEditorPlugin")&&"function"===typeof Xb.JavaScriptEditorPlugin?Xb.JavaScriptEditorPlugin:Xb.JavaScriptEditorPlugin=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kb(wc,rc,[{key:Symbol.for("lively-instance-initialize"),value:function(){kb._get(Object.getPrototypeOf(wc.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.checker=new Zb.JavaScriptChecker;this.evalEnvironment=
{format:"esm",targetModule:null,context:null}}},{key:"isJSEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return"js"}},{key:"longName",get:function(){return"javascript"}},{key:"attach",value:function(I){kb._get(Object.getPrototypeOf(wc.prototype),"attach",this).call(this,I);this.evalEnvironment=Object.assign({},this.evalEnvironment,{context:I})}},{key:"detach",value:function(I){this.checker.uninstall(this.textMorph);kb._get(Object.getPrototypeOf(wc.prototype),"detach",this).call(this,
I)}},{key:"getNavigator",value:function(){return new Zb.JavaScriptNavigator}},{key:"getCompleters",value:function(I){return Zb.completers.concat(I)}},{key:"getCommands",value:function(I){return[].concat($jscomp.arrayFromIterable(kb._get(Object.getPrototypeOf(wc.prototype),"getCommands",this).call(this,I)),$jscomp.arrayFromIterable(Zb.jsIdeCommands),$jscomp.arrayFromIterable(Zb.jsEditorCommands),$jscomp.arrayFromIterable(Zb.astEditorCommands))}},{key:"getKeyBindings",value:function(I){return[].concat($jscomp.arrayFromIterable(I),
[{keys:"Shift-Tab",command:{command:"[javascript] auto format code"}},{keys:"Ctrl-C E",command:"[javascript] list errors and warnings"},{keys:{mac:"Meta-Shift-L L I N T R",win:"Ctrl-Shift-L L I N T R"},command:"[javascript] eslint report"},{keys:{mac:"Meta-Shift-L L I N T P",win:"Ctrl-Shift-L L I N T P"},command:"[javascript] eslint preview fixes"},{keys:{mac:"Meta-Shift-L L I N T F",win:"Ctrl-Shift-L L I N T F"},command:"[javascript] eslint fix"},{keys:{mac:"Meta-Shift-L M O D E",win:"Ctrl-Shift-L M O D E"},
command:"change editor mode"},{keys:"Ctrl-C I",command:"[javascript] inject import"},{keys:"Ctrl-C C I",command:"[javascript] fix undeclared variables"}])}},{key:"getMenuItems",value:function(I){var T=this,ua,Da,Kb,Db,Fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ac){ua=T.textMorph;Da=[{command:"doit",target:ua,showKeyShortcuts:!0},{command:"inspectit",target:ua,showKeyShortcuts:!0},{command:"printit",target:ua,showKeyShortcuts:!0},{command:"print inspectit",alias:"print inspect",
target:ua,showKeyShortcuts:!0},{command:"eval all",target:ua,showKeyShortcuts:!0},{command:"text completion",alias:"code completion",target:ua,showKeyShortcuts:!0},{command:"[javascript] list errors and warnings",alias:"list errors and warnings",target:ua,showKeyShortcuts:!0},{isDivider:!0}];T.evalEnvironment.targetModule&&Da.push({command:"[javascript] inject import",alias:"add import",target:ua},{command:"[javascript] fix undeclared variables",alias:"fix undeclared variables",target:ua},{command:"[javascript] remove unused imports",
alias:"remove unused imports",target:ua});Kb=T.getNavigator();(Db=Kb.resolveIdentifierAt(ua,ua.cursorPosition))&&Da.push({command:"selectDefinition",alias:'jump to definition of "'+Db.name+'"',target:ua},{command:"selectSymbolReferenceOrDeclaration",alias:'select all occurrences of "'+Db.name+'"',target:ua});(Fa=ua.selection.text.trim())&&Da.push({command:"open code search",alias:'code search for "'+Zb.string.truncate(Fa,30)+'"',target:ua.world(),args:{input:Fa,backend:T.backend()}});Da.push({isDivider:!0});
return ac.return(Da.concat(I))})}},{key:"getSnippets",value:function(){return Zb.jsSnippets.map(function(I){var T=$jscomp.makeIterator(I);I=T.next().value;T=T.next().value;return new Zb.Snippet({trigger:I,expansion:T})})}},{key:"sanatizedJsEnv",value:function(I){I=Object.assign({},this.evalEnvironment,{},I);I.format||(I.formatd="esm");I.context||(I.context=this.textMorph);I.sourceURL||(I.sourceURL=I.targetModule+"_doit_"+Date.now());I.systemInterface||(I.systemInterface=Zb.localInterface);return I}},
{key:"backend",value:function(I){I=this.sanatizedJsEnv(I);return I.remote?I.remote:"local"}},{key:"systemInterface",value:function(I){return this.sanatizedJsEnv(I).systemInterface||Zb.localInterface}},{key:"setSystemInterface",value:function(I){return this.evalEnvironment.systemInterface=I}},{key:"setSystemInterfaceNamed",value:function(I){return this.setSystemInterface(Zb.systemInterfaceNamed(I))}},{key:"runEval",value:function(I,T){T=this.sanatizedJsEnv(T);return this.systemInterface(T).runEval(I,
T)}},{key:"parser",get:function(){return Zb.parser}},{key:"parse",value:function(I){I=void 0===I?null:I;if(this._ast&&this._ast._astType===I)return this._ast;var T=this.parser,ua=this.textMorph.textString;if(!T)return null;var Da={withComments:!0,allowReturnOutsideFunction:!0};I&&(Da.type=I);if(ua.startsWith("#!")){var Kb=ua.indexOf("\n");ua=" ".repeat(Kb)+ua.slice(Kb)}T=T.fuzzyParse(ua,Da);T._astType=I;return this._ast=T}},{key:"undeclaredVariables",value:function(I){var T=this.parser,ua=this.evalEnvironment.knownGlobals||
[];I=this.parse(void 0===I?null:I);return T&&I?T.query.findGlobalVarRefs(I,{jslintGlobalComment:!0}).filter(function(Da){return!ua.includes(Da.name)}):[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptEditorPlugin"}}],Xb,{pathInPackage:function(){return"js/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:662,end:6694})}(Zb.CodeMirrorEnabledEditorPlugin);Gb=Zb.JavaScriptEditorPlugin;ra("default",Gb);Zb.default=Gb}}});System.register("10",[],function(){return{execute:function(){lively.FreezerRuntime.recorderFor("lively.shell/index.js")}}});