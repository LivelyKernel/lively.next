System.register(["./__root_module__-89b08ab2.js","kld-intersections","./index-1502344e.js","./editor-plugin-a483404a.js","./index-b806b9af.js"],function(ta){var nb,xb,Ob,Hb,qd,Dc,hd,Hc,Fc,Sc,ad,Jd,ed,sc,Sa,ob,$b,Sb,Bc,id,Xb,Ub,ub,hc;return{setters:[function(wc){nb=wc.at;xb=wc.bB;Ob=wc.bC;Hb=wc.bD;qd=wc.F;Dc=wc.ar;hd=wc.aX;Hc=wc.s;Fc=wc.ab;Sc=wc.bo;ad=wc.a6;Jd=wc.$;ed=wc.bE;sc=wc.bv},function(){},function(wc){Sa=wc.s},function(wc){ob=wc.p;$b=wc.d;Sb=wc.a;Bc=wc.r;id=wc.C},function(wc){Xb=wc.localInterface;
Ub=wc.systemInterfaceNamed;ub=wc.serverInterfaceFor;hc=wc.l2lInterfaceFor}],execute:function(){var wc=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js");wc.warnStyle={"border-bottom":"2px dotted orange"};wc.errorStyle={"background-color":"red"};var bd=function(dc){var Mb=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js"),Yb=Mb.hasOwnProperty("JavaScriptChecker")&&"function"===typeof Mb.JavaScriptChecker?Mb.JavaScriptChecker:Mb.JavaScriptChecker=function(I){I&&I[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return nb(Yb,dc,[{key:"uninstall",value:function(I){var W=I.text||I;(W.markers||[]).forEach(function(sa){return sa.id.startsWith("js-checker-")&&W.removeMarker(sa)});W.removeMarker("js-syntax-error")}},{key:"hasEmbeddedMorphInRange",value:function(I,W){return[].concat($jscomp.arrayFromIterable(I.embeddedMorphMap.values())).find(function(sa){return W.containsPosition(sa.anchor.position)})}},{key:"onDocumentChange",value:function(I,
W,sa){var xa=W.document;try{var Eb=sa.parse()}catch(Pb){Eb=Pb}Eb&&(I=(W.markers||[]).filter(function(Pb){return Pb.id.startsWith("js-checker-")}),sa=sa.undeclaredVariables().map(function(Pb,Ha){var Lb=Pb.start;Pb=Pb.end;Lb=xa.indexToPosition(Lb);Pb=xa.indexToPosition(Pb);return W.addMarker({id:"js-checker-"+Ha,style:wc.warnStyle,range:{start:Lb,end:Pb},type:"js-undeclared-var"})}),I.slice(sa.length).forEach(function(Pb){return W.removeMarker(Pb)}),Eb.parseError?(I=Eb.parseError.loc,sa=I.column,I=
I.line-1,Eb=xa.indexToPosition(Eb.parseError.pos),sa=Eb.column,I=Eb.row,Eb={start:{column:sa-1,row:I},end:{column:sa+1,row:I}},this.hasEmbeddedMorphInRange(W,Eb)||W.addMarker({id:"js-syntax-error",range:Eb,style:wc.errorStyle,type:"js-syntax-error"})):W.removeMarker("js-syntax-error"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptChecker"}}],Mb,{pathInPackage:function(){return"js/checker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:126,end:1896})}(void 0),cd=bd=wc.JavaScriptChecker;wc.default=bd;var bb=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js");bb.query=xb;bb.fuzzyParse=Ob;bb.acorn=Hb;bb.custom=qd;var pb=function(dc){var Mb=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js"),Yb=Mb.hasOwnProperty("JavaScriptNavigator")&&"function"===typeof Mb.JavaScriptNavigator?Mb.JavaScriptNavigator:Mb.JavaScriptNavigator=function(I){I&&I[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return nb(Yb,dc,[{key:"ensureAST",value:function(I){return this.parse(I.textString)}},{key:"parse",value:function(I){return bb.fuzzyParse(I)}},{key:"move",value:function(I,W){var sa=!!W.activeMark||!W.selection.isEmpty(),xa=W.selection,Eb=W.positionToIndex(xa.lead);I=this[I](W.textString,Eb);I=W.indexToPosition(I);xa.lead=I;sa||(xa.anchor=I);W.scrollCursorIntoView()}},{key:"forwardSexp",value:function(I){this.move("_forwardSexp",
I)}},{key:"backwardSexp",value:function(I){this.move("_backwardSexp",I)}},{key:"backwardUpSexp",value:function(I){this.move("_backwardUpSexp",I)}},{key:"forwardDownSexp",value:function(I){this.move("_forwardDownSexp",I)}},{key:"_forwardSexp",value:function(I,W){I=this.parse(I);I=bb.custom.findNodesIncluding(I,W).reverse().find(function(xa){return xa.end!==W});if(!I)return W;if("BlockStatement"===I.type){var sa=I.body.find(function(xa){return xa.start>W});if(sa)return sa.start}return I.end}},{key:"_backwardSexp",
value:function(I,W){I=this.parse(I);I=bb.custom.findNodesIncluding(I,W).reverse().find(function(xa){return xa.start!==W});if(!I)return W;if("BlockStatement"===I.type){var sa=I.body.slice().reverse().find(function(xa){return xa.end<W});if(sa)return sa.end}return I?I.start:W}},{key:"_backwardUpSexp",value:function(I,W){I=this.parse(I);return(I=bb.custom.findNodesIncluding(I,W).reverse().find(function(sa){return sa.start!==W}))?I.start:W}},{key:"_forwardDownSexp",value:function(I,W){I=this.parse(I);
return(I=bb.custom.findNodeAfter(I,W,function(sa,xa){return xa.start>W}))?I.node.start:W}},{key:"markDefun",value:function(I){var W=this.rangeForFunctionOrDefinition(I.textString,[I.positionToIndex(I.selection.range.start),I.positionToIndex(I.selection.range.end)]);W&&I.execCommand("expandRegion",{start:W[0],end:W[1]})}},{key:"rangeForNodesMatching",value:function(I,W,sa){I=this.parse(I);return(W=bb.custom.findNodesIncluding(I,W).reverse().find(sa))?[W.start,W.end]:null}},{key:"rangeForFunctionOrDefinition",
value:function(I,W){var sa=W[0]===W[1];return this.rangeForNodesMatching(I,W[1],function(xa){return["AssignmentExpression","FunctionDeclaration","FunctionExpression","MethodDefinition"].includes(xa.type)&&(sa&&xa.end!==W[1]||!sa&&xa.start<W[0])?!0:!1})}},{key:"resolveIdentifierAt",value:function(I,W){"number"!==typeof W&&(W=I.positionToIndex(W));I=this.ensureAST(I);var sa=bb.query.nodesAt(W,I).reverse(),xa=sa.find(function(Pb){return"Identifier"===Pb.type});if(!xa&&((sa=sa[0])&&sa.type.includes("Specifier")&&
sa.local&&"Identifier"===sa.local.type&&(xa=sa.local),!xa))return;W=(sa=bb.query.findDeclarationClosestToIndex(I,xa.name,W))?bb.query.scopeAtIndex(I,sa.start):bb.query.scopeAtIndex(I,W);var Eb=bb.query.findReferencesAndDeclsInScope(W,xa.name).refs;return{parsed:I,scope:W,id:xa,name:xa.name,decl:sa,refs:Eb}}},{key:"expandRegion",value:function(I,W,sa,xa){function Eb(xd){xd=I.positionToIndex({column:0,row:Ha.row});return{range:[xd+Lb.start,xd+Lb.start+Lb.value.length],prev:xa}}var Pb=xa.range[0]!==
xa.range[1],Ha=I.indexToPosition(xa.range[0]),Lb=I.tokenAt(Ha);if(!Pb&&Lb&&["keyword","identifier"].includes(Lb.type))return Eb();sa=sa||this.parse(W);W=bb.query.nodesAtIndex(sa,xa.range[0]).reverse().find(function(xd){return xd.start<xa.range[0]||xd.end>xa.range[1]});if(!W)return xa;sa=W.start;Pb=W.end;return"Literal"===W.type&&(W.raw||"").match(/^['"`]/)&&xa.range[0]!==W.start&&xa.range[1]!==W.end&&(W.start+1<xa.range[0]||W.end-1>xa.range[1])?{range:[sa+1,Pb-1],prev:xa}:{range:[sa,Pb],prev:xa}}},
{key:"contractRegion",value:function(I,W,sa,xa){return xa.prev||xa}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptNavigator"}}],Mb,{pathInPackage:function(){return"js/navigator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:121,end:6780})}(void 0);bd=pb=bb.JavaScriptNavigator;bb.default=pb;var pc=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js");
pc.addIndexToTextPos=function(dc,Mb,Yb){return dc.indexToPosition(dc.positionToIndex(Mb)+Yb)};pc.connect=Dc;pc.disconnect=hd;pc.string=Hc;pc.KeyHandler=Fc;pc.Range=Sc;pb=function(dc){var Mb=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js"),Yb=Mb.hasOwnProperty("Snippet")&&"function"===typeof Mb.Snippet?Mb.Snippet:Mb.Snippet=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return nb(Yb,dc,[{key:Symbol.for("lively-instance-initialize"),
value:function(I){I=void 0===I?{trigger:null,expansion:""}:I;var W=I.expansion;this.trigger=I.trigger;this.expansion=W;this.resetExpansionState()}},{key:"isTextSnippet",get:function(){return!0}},{key:"attach",value:function(I){this.isExpanding&&(this.textMorph=I,pc.connect(this.textMorph,"selectionChange",this,"onCursorMove"))}},{key:"detach",value:function(I){this.isExpanding&&(pc.disconnect(I,"selectionChange",this,"onCursorMove"),this.textMorph=null)}},{key:"onCursorMove",value:function(){var I=
this.expansionState,W=I.startAnchor,sa=I.endAnchor;I.isExpanding?pc.Range.fromPositions(W.position,sa.position).containsPosition(this.textMorph.cursorPosition)||this.resetExpansionState():this.resetExpansionState()}},{key:"resetExpansionState",value:function(){var I=this.textMorph;if(I){var W=this.expansionState||{},sa=W.marker,xa=W.startAnchor,Eb=W.endAnchor;W=W.steps;xa&&I.removeAnchor(xa);Eb&&I.removeAnchor(Eb);sa&&I.removeMarker(sa);W.forEach(function(Pb){return I.removeAnchor(Pb.anchor)})}this.expansionState=
{stepIndex:-1,steps:[],isExpanding:!1,startMarker:null,endMarker:null};I&&I.removePlugin(this)}},{key:"isExpanding",get:function(){return this.expansionState.isExpanding}},{key:"createExpansionSteps",value:function(I){var W=[],sa=0;pc.string.reMatches(I,/\$[0-9]+|\$\{[0-9]+:[^\}]*\}/g).forEach(function(xa){var Eb=xa.start,Pb=xa.end;xa=xa.match;var Ha="";xa.startsWith("${")?(Ha=$jscomp.makeIterator(xa.match(/^\$\{([0-9]+):([^\}]*)\}/)),Ha.next(),xa=Ha.next().value,Ha=Ha.next().value,xa=Number(xa)):
xa=Number(xa.replace(/^\$/,""));I=I.slice(0,Eb-sa)+Ha+I.slice(Pb-sa);W[xa]={index:Eb-sa,prefill:Ha,anchor:null};sa+=Pb-Eb-Ha.length});return{steps:W,expansion:I}}},{key:"expandAtCursor",value:function(I){var W=I.selection,sa=I.cursorPosition.column,xa=this.expansion;this.trigger&&(sa-=this.trigger.length);if(sa=Math.max(0,sa))xa=pc.string.lines(xa),xa=[xa[0]].concat($jscomp.arrayFromIterable(xa.slice(1).map(function(vd){return pc.string.indent(vd," ",sa)}))),xa=xa.join("\n");var Eb=this.createExpansionSteps(xa);
xa=Eb.expansion;Eb=Eb.steps;this.trigger&&W.growLeft(this.trigger.length);W.text=xa;var Pb=W.start;xa=W.end;W.collapseToEnd();if(Eb.length){var Ha=pc.string.newUUID();Eb.forEach(function(vd,Gc){return vd.anchor=I.addAnchor(Object.assign({id:"snippet-step-"+Gc+"-"+Ha},pc.addIndexToTextPos(I,Pb,vd.index)))});var Lb=I.addAnchor(Object.assign({id:"snippet-start-"+Ha},Pb,{insertBehavior:"stay"})),xd=I.addAnchor(Object.assign({id:"snippet-end-"+Ha},xa));this.expansionState={marker:I.addMarker({id:"snippet-marker-"+
Ha,get range(){return{start:Lb.position,end:xd.position}},style:{"border-radius":"4px","background-color":"rgba(30, 200, 140, 0.3)","box-shadow":"0 0 4px rgba(30, 200, 140, 0.3)","pointer-events":"none",content:"fooooo"}}),startAnchor:Lb,endAnchor:xd,stepIndex:0,steps:Eb,isExpanding:!0};I.addPlugin(this);this.nextStep()}}},{key:"nextStep",value:function(){var I=this.expansionState,W=I.steps,sa=this.textMorph;if(I.isExpanding&&sa){sa=sa.selection;I=W[I.stepIndex];var xa=I.prefill;sa.lead=sa.anchor=
I.anchor.position;sa.growRight(xa.length);this.expansionState.stepIndex++;this.expansionState.stepIndex>=W.length&&(this.resetExpansionState(),console.log("[snippet] expansion of "+this.expansion+" done"))}}},{key:"canExpand",value:function(I,W){W=I.positionToIndex(I.cursorPosition);return I.textString.slice(W-this.trigger.length,W)===this.trigger}},{key:"tryTrigger",value:function(I,W){if(!this.canExpand(I,I.cursorPosition))return!1;this.expandAtCursor(I);return!0}},{key:"getCommands",value:function(I){var W=
this;return I.concat([{name:"[snippet] next expansion step",exec:function(sa){W.nextStep();return!0}},{name:"[snippet] cancel expansion",exec:function(sa){W.resetExpansionState();return!0}}])}},{key:"getKeyHandlers",value:function(I){return I.concat(pc.KeyHandler.withBindings([{keys:"Tab",command:"[snippet] next expansion step"},{keys:"Escape",command:"[snippet] cancel expansion"}]))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Snippet"}}],Mb,{pathInPackage:function(){return"text/snippets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:357,end:6029})}(void 0);pc.Snippet=pb;pc.Snippet=pb;pc.Snippet=pb;var ab=[{name:"get snippets",exec:function(dc){return dc.pluginCollect("getSnippets",[])}}];pc.snippetCommands=ab;pc.snippetCommands=ab;pc.snippetCommands=ab;var cb=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js");
cb.buildEvalOpts=function(dc,Mb){return dc.plugins.find(function(Yb){return Yb.isJSEditorPlugin}).sanatizedJsEnv(Mb)};cb.Snippet=pb;ab=function(dc){var Mb=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Yb=Mb.hasOwnProperty("ModuleTopLevelVarCompleter")&&"function"===typeof Mb.ModuleTopLevelVarCompleter?Mb.ModuleTopLevelVarCompleter:Mb.ModuleTopLevelVarCompleter=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return nb(Yb,dc,[{key:"compute",value:function(I,W){var sa,xa,Eb,Pb,Ha,Lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xd){if(1==xd.nextAddress){xa=(sa=I.pluginFind(function(vd){return vd.isJSEditorPlugin}))&&sa.systemInterface();if(!xa)return xd.return([]);Eb=cb.buildEvalOpts(I);Pb=Eb.targetModule;return"local"===xa.name?(Ha=Object.getOwnPropertyNames(xa.getModule(Pb).recorder),xd.jumpTo(2)):xd.yield(xa.runEval('\n        var result, livelySystem = typeof System !== "undefined"\n                      && System.get(System.decanonicalize("lively-system-interface"));\n        if (livelySystem) {\n          result = JSON.stringify(\n            Object.getOwnPropertyNames(livelySystem.localInterface.getModule("'+
Pb+'").recorder));\n        } else {\n          var G = typeof window !== "undefined" ?\n            window : typeof global !== "undefined" ? global : this;\n          result = JSON.stringify(Object.getOwnPropertyNames(G));\n        }\n        result;\n      ',{targetModule:"lively://module-recorder-completer"}),3)}if(2!=xd.nextAddress){Lb=xd.yieldResult;if(Lb.isError)return xd.return([]);Ha=JSON.parse(Lb.value)}Ha=Ha.filter(function(vd){return!vd.startsWith("defVar_")&&!["System","__currentLivelyModule",
"initializeES6ClassForLively","_moduleExport","_moduleImport"].includes(vd)});return xd.return(Ha.map(function(vd){return{priority:1100,completion:vd}}))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleTopLevelVarCompleter"}}],Mb,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:227,end:1700})}(void 0);cb.ModuleTopLevelVarCompleter=ab;cb.ModuleTopLevelVarCompleter=ab;cb.ModuleTopLevelVarCompleter=ab;ab=function(dc){var Mb=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Yb=Mb.hasOwnProperty("DynamicJavaScriptCompleter")&&"function"===typeof Mb.DynamicJavaScriptCompleter?Mb.DynamicJavaScriptCompleter:Mb.DynamicJavaScriptCompleter=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return nb(Yb,dc,[{key:"isValidPrefix",value:function(I){return/\.[a-z0-9_]*$/i.test(I)}},{key:"isMethodCallCompletion",value:function(I){return I.endsWith(")")&&0<I.indexOf("(")}},{key:"isValidIdentifier",value:function(I){if("string"!==typeof I)return!1;this.isMethodCallCompletion(I)&&(I=I.slice(0,I.indexOf("(")));return/^[a-z_\$][0-9a-z_\$]*$/i.test(I)?!0:!1}},{key:"wrapInBrackets",value:function(I){if(!isNaN(Number(I))||I.startsWith("Symbol."))return"["+I+"]";var W="";this.isMethodCallCompletion(I)&&
(W=I.slice(I.indexOf("(")),I=I.slice(0,I.indexOf("(")));return'["'+I.replace(/"/g,'\\"')+'"]'+W}},{key:"compute",value:function(I){var W=this,sa,xa,Eb,Pb,Ha,Lb,xd,vd,Gc,Ma,tc;return $jscomp.asyncExecutePromiseGeneratorProgram(function($a){if(1==$a.nextAddress){sa=I.selection;sa.isEmpty()?(xa=I.getLine(sa.lead.row),xa=xa.slice(xa.lastIndexOf(":")+1,sa.lead.column)):xa=sa.text.slice(Math.max(0,sa.text.indexOf(":")),0);if(!W.isValidPrefix(xa))return $a.return([]);Pb=(Eb=I.pluginFind(function(Cc){return Cc.isJSEditorPlugin}))&&
Eb.systemInterface();if(!Pb)return $a.return([]);Ha=cb.buildEvalOpts(I);return $a.yield(Pb.dynamicCompletionsForPrefix(Ha.targetModule,xa,Ha),2)}Lb=$a.yieldResult;xd=Lb.isError;vd=Lb.value;Gc=Lb.completions;Ma=Lb.prefix;if(xd)return console.warn("javascript completer encountered error: "+(vd.stack||vd)),$a.return([]);Gc.reduce(function(Cc,Mc){Mc=$jscomp.makeIterator(Mc);Mc.next();Mc=Mc.next().value;return Cc+Mc.length},0);tc=Gc.reduce(function(Cc,Mc,Ua){Mc=$jscomp.makeIterator(Mc);var Fa=Mc.next().value;
Mc=Mc.next().value;return Cc.concat(Mc.map(function(Wb){var Bd=W.isValidIdentifier(Wb);return{info:Fa,completion:Wb,prefix:Bd?Ma:"."+Ma,customInsertionFn:Bd?W.isMethodCallCompletion(Wb)?function(pd,Vd,qc,Ld){Vd=Ld.start;Ld=Ld.end;pd=pd.replace(/\((.*)\)/,function(Lc){return"("+Lc.slice(1,-1).split(", ").map(function(kb,ja){return"${"+ja+":"+kb+"}"}).join(", ")+")"});pd=new cb.Snippet({expansion:pd});qc.replace({start:Vd,end:Ld},"");pd.expandAtCursor(qc)}:null:function(pd,Vd,qc,Ld){pd=Ld.start;Ld=
Ld.end;Vd={row:pd.row,column:pd.column-1};Ld="."===qc.textInRange({start:Vd,end:pd})?{start:Vd,end:Ld}:{start:pd,end:Ld};qc.replace(Ld,W.wrapInBrackets(Wb))}}}))},[]);tc.forEach(function(Cc,Mc){return Object.assign(Cc,{priority:2E3+tc.length-Mc})});return $a.return(tc)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DynamicJavaScriptCompleter"}}],Mb,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1709,end:5085})}(void 0);cb.DynamicJavaScriptCompleter=ab;cb.DynamicJavaScriptCompleter=ab;cb.DynamicJavaScriptCompleter=ab;cb.keywords="arguments boolean break case catch class const continue debugger default delete eval export import extends false true finally instanceof static super this throw typeof while with yield await Array Date eval function hasOwnProperty Infinity isFinite isNaN isPrototypeOf length Math NaN name Number Object prototype String toString undefined valueOf alert assign clearInterval clearTimeout decodeURI decodeURIComponent document encodeURI encodeURIComponent escape navigator parseFloat parseInt setInterval setTimeout window document requestAnimationFrame cancelAnimationFrame".split(" ");
ab=function(dc){var Mb=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Yb=Mb.hasOwnProperty("JavaScriptKeywordCompleter")&&"function"===typeof Mb.JavaScriptKeywordCompleter?Mb.JavaScriptKeywordCompleter:Mb.JavaScriptKeywordCompleter=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return nb(Yb,dc,[{key:"compute",value:function(I,W){return cb.keywords.map(function(sa){return{completion:sa,priority:0}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptKeywordCompleter"}}],Mb,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:6087,end:6225})}(void 0);cb.JavaScriptKeywordCompleter=ab;cb.JavaScriptKeywordCompleter=ab;cb.JavaScriptKeywordCompleter=ab;ab=[new cb.DynamicJavaScriptCompleter,
new cb.JavaScriptKeywordCompleter,new cb.ModuleTopLevelVarCompleter];cb.completers=ab;cb.completers=ab;cb.completers=ab;var Pa=lively.FreezerRuntime.recorderFor("lively.ide/js/snippets.js");Pa.Snippet=pb;var Za=[["typef",'typeof ${0:object} === "function"$1'],["types",'typeof ${0:object} === "string"$1'],["typen",'typeof ${0:object} === "number"$1'],["typeu",'typeof ${0:object} === "undefined"$1'],["typenu",'typeof ${0:object} !== "undefined"$1'],["import",'import { ${0:name} } from "${1:module}";'],
["importd",'import ${0:name} from "${1:module}";'],["import*",'import * as ${0:name} from "${1:module}";'],["subclass","class ${0:name} extends ${1:base} {\n  constructor(${2:args}) {\n    super(${3:args})\n    $4\n  }\n}"],["class","class ${0:name} {\n  constructor(${1:args}) {\n    $2\n  }\n}"],["switch","switch (${0:expression}) {\n  case '${2:case}':\n    ${3:// code}\n    break;\n    $4\n    default:\n    ${1:// code}\n}"],["tryf","try {${0:/* code */}} finally {}"],["try","try {${0:/* code */}} catch (err) {}"],
["do","do {${1:/* code */}} while (${0:/* condition */});"],["fori","for (let ${0:prop} in ${1:obj}) {\n  ${2:obj[prop]}\n}"],["foro","for (let ${0:value} of ${1:iterable}) {\n  ${2:value}\n}"],["for-","for (let ${0:i} = ${1:list}.length; ${2:i}--; ) {\n  $3\n}"],["for","for (let ${0:i} = 0; ${1:i} < ${3:list}.length; ${2:i}++) {\n  $4\n}"],["Prom","new Promise((resolve, reject) => {$0})"],["keys","Object.keys($0)"],["assign","Object.assign(${0:dest}, ${1:source})"],["stringi","JSON.stringify(${0:object})"],
["forE","forEach(${0:ea} => $1)"],["map","map(${0:ea} => $1)"],["reduce","reduce((${1:all}, ${2:ea}) => {$3}, ${0:init})"],["from","Array.from(${0:list})"],["last","arr.last(${0:list})"],["pluck",'arr.pluck(${0:list}, "${1:key}")'],["sortBy","arr.sortBy(${0:list}, ($1) => $2)"],["join",'join("\\n")'],["con","connect(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["once","once(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["sig","signal(${0:source}, '${1:sourceAttr}', ${2:value});"],
["ll","lively.lang."],["lls","lively.lang.string."],["lla","lively.lang.arr."],["llo","lively.lang.obj."],["llf","lively.lang.fun."],["llp","lively.lang.promise."],["withA","withAllSubmorphsDo(ea => { return ${0:ea}; })"],["$w","$world"],["$m","$morph('${0:name}')"],["get",'get("${0:name}")'],["$","${$0}"],["cl","console.log($0)"],["cw","console.warn($0)"],["ce","console.error($0)"],["s","show(`$0`);"],["l2lC",'import L2LClient from "lively.2lively/client.js";\nlet l2lClient = L2LClient.default();$0'],
["fun","function ${0:functionName}($1) {$2}"],["fn","function($0) {$1}"],["f","($0) => $1"],["aw","await $0"]];Pa.snippets=Za;Pa.snippets=Za;Pa.snippets=Za;var eb=lively.FreezerRuntime.recorderFor("lively.ide/js/commands.js");eb.getEvalEnv=function(dc){return(dc=dc.pluginFind(function(Mb){return Mb.isJSEditorPlugin}))?dc.evalEnvironment:null};eb.setEvalEnv=function(dc,Mb){(dc=dc.pluginFind(function(Yb){return Yb.isJSEditorPlugin}))&&Object.assign(dc.evalEnvironment,Mb);return dc.evalEnvironment};
eb.pToI=function(dc,Mb){return dc.positionToIndex(Mb)};eb.iToP=function(dc,Mb){return dc.indexToPosition(Mb)};eb.arr=ad;eb.promise=Jd;eb.string=Hc;eb.show=Sa;eb.Range=Sc;eb.query=xb;eb.BaseVisitor=ed;Pa=[{name:"undefine variable",doc:"Finds the variable at cursor position (or position passed) and undefines it in the module toplevel scope.",exec:function(dc,Mb){Mb=void 0===Mb?{varName:null,position:null}:Mb;var Yb,I,W,sa,xa,Eb,Pb,Ha,Lb,xd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vd){switch(vd.nextAddress){case 1:Yb=
Mb;I=Yb.varName;W=Yb.position;if(!I){W||(W=dc.cursorPosition);sa=dc.pluginInvokeFirst("getNavigator");xa=sa.ensureAST(dc);Eb=eb.query.nodesAt(dc.positionToIndex(W),xa).reverse().find(function(Gc){return"Identifier"===Gc.type});if(!Eb)return dc.showError(Error("no identifier found!")),vd.return(!0);I=Eb.name}Mb=dc.pluginFind(function(Gc){return Gc.isJSEditorPlugin}).sanatizedJsEnv();Pb='lively.modules.module("'+Mb.targetModule+'").undefine("'+I+'")';vd.setCatchFinallyBlocks(2);return vd.yield(dc.doEval(null,
Mb,Pb),4);case 4:Ha=vd.yieldResult;Lb=Ha.error?Ha.error:Ha.isError?Ha.value:null;vd.leaveTryBlock(3);break;case 2:Lb=xd=vd.enterCatchBlock();case 3:return Lb?dc.showError(Lb):dc.setStatusMessage(I+" undefined"),vd.return(!0)}})}},{name:"change doitContext",exec:function(dc){var Mb,Yb,I,W,sa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xa){if(1==xa.nextAddress)return Mb=$jscomp,Yb=Mb.makeIterator,xa.yield(dc.world().execCommand("select morph",{prompt:"select morph for doitContext",justReturn:!0,
prependItems:["reset"],filterFn:function(Eb){return!Eb.isUsedAsEpiMorph()}}),2);I=Yb.call(Mb,xa.yieldResult);if(W=I.next().value)sa="reset"===W,dc.doitContext=sa?null:W,dc.setStatusMessage(sa?"doitContext is now\n"+W:"doitContext reset");return xa.return(!0)})}},{name:"change eval backend",exec:function(dc,Mb){Mb=void 0===Mb?{backend:void 0}:Mb;var Yb,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){if(1==W.nextAddress)return Yb=Mb,I=Yb.backend,void 0!==I?W.jumpTo(2):W.yield(dc.world().prompt("choose eval backend",
{historyId:"js-eval-backend-history"}),3);if(2!=W.nextAddress&&(I=W.yieldResult,!I))return dc.setStatusMessage("Canceled"),W.return(!0);"local"===I&&(I=null);dc.setStatusMessage("Eval backend is now "+(I||"local"));return W.return(eb.setEvalEnv(dc,{remote:I}))})}},{name:"copy current module name to clipboard",exec:function(dc){var Mb=dc.evalEnvironment.targetModule;dc.setStatusMessage(Mb||"Cannot find module name");dc.env.eventDispatcher.killRing.add(dc);dc.env.eventDispatcher.doCopy(Mb);return!0}}];
eb.jsEditorCommands=Pa;eb.jsEditorCommands=Pa;eb.jsEditorCommands=Pa;var Na=[{name:"[javascript] list errors and warnings",exec:function(dc){var Mb,Yb,I,W,sa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xa){if(1==xa.nextAddress){Mb=(dc.markers||[]).filter(function(Eb){Eb=Eb.type;return"js-undeclared-var"===Eb||"js-syntax-error"===Eb});if(!Mb.length)return eb.show("no warnings or errors"),xa.return(!0);Yb=Mb.map(function(Eb){var Pb=Eb.range;return{isListItem:!0,string:"["+Eb.type.split("-").slice(1).join(" ")+
"] "+dc.textInRange(Pb),value:Pb}});return xa.yield(dc.world().filterableListPrompt("jump to warning or error",Yb),2)}I=xa.yieldResult;W=$jscomp.makeIterator(I.selected);if(sa=W.next().value)dc.saveMark(),dc.selection=sa,dc.centerRow(sa.start.row);return xa.return(!0)})}},{name:"[javascript] inject import",exec:function(dc,Mb){Mb=void 0===Mb?{gotoImport:!1,insertImportAtCursor:!0}:Mb;var Yb,I,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sa){switch(sa.nextAddress){case 1:return sa.yield(eb.promise.delay(0),
2);case 2:return sa.yield(System.import("lively.ide/js/import-helper.js"),3);case 3:return Yb=sa.yieldResult,I=Yb.interactivelyInjectImportIntoText,sa.yield(I(dc,Mb),4);case 4:return(W=sa.yieldResult)||dc.setStatusMessage("canceled"),sa.return(W)}})}},{name:"[javascript] fix undeclared variables",exec:function(dc,Mb){Mb=void 0===Mb?{ignore:[],autoApplyIfSingleChoice:!1,requester:dc}:Mb;var Yb,I,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sa){if(1==sa.nextAddress)return sa.yield(System.import("lively.ide/js/import-helper.js"),
2);if(3!=sa.nextAddress)return Yb=sa.yieldResult,I=Yb.interactivlyFixUndeclaredVariables,sa.yield(I(dc,Mb),3);W=sa.yieldResult;dc.focus();return sa.return(W)})}},{name:"[javascript] remove unused imports",exec:function(dc,Mb){Mb=void 0===Mb?{query:!0}:Mb;var Yb,I,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sa){if(1==sa.nextAddress)return sa.yield(System.import("lively.ide/js/import-helper.js"),2);if(3!=sa.nextAddress)return Yb=sa.yieldResult,I=Yb.cleanupUnusedImports,sa.yield(I(dc,
Mb),3);W=sa.yieldResult;dc.setStatusMessage(W);return sa.return(!0)})}},{name:"[javascript] eslint report",exec:function(dc){var Mb,Yb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);Mb=I.yieldResult;Yb=Mb.default;try{return I.return(Yb.reportOnMorph(dc))}catch(W){dc.showError(W)}I.jumpToEnd()})}},{name:"[javascript] eslint preview fixes",exec:function(dc){var Mb,Yb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==
I.nextAddress)return I.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);Mb=I.yieldResult;Yb=Mb.default;try{return I.return(Yb.previewFixesOnMorph(dc))}catch(W){dc.showError(W)}I.jumpToEnd()})}},{name:"[javascript] auto format code",handlesCount:!0,exec:function(dc,Mb,Yb){function I($a,Cc){Cc||(Cc=Ha($a,{allowReturnOutsideFunction:!0}));var Mc=eb.string.lineRanges($a),Ua=$a.split("\n"),Fa=[],Wb=new eb.BaseVisitor,Bd=Wb.visitVariableDeclaration;Wb.visitVariableDeclaration=function(Ld,
Lc,kb){if(1<Ld.declarations.length)for(var ja=eb.string.findLineWithIndexInLineRanges(Mc,Ld.start),oa=Ld.declarations[0].start-Mc[ja][0],tb={},G=1;G<Ld.declarations.length;tb={$jscomp$loop$prop$actionType$2412:tb.$jscomp$loop$prop$actionType$2412,$jscomp$loop$prop$arg$2413:tb.$jscomp$loop$prop$arg$2413},G++){var ma=Ld.declarations[G],Ga=eb.string.findLineWithIndexInLineRanges(Mc,ma.start);if(ja!==Ga){var lb=Ua[Ga].match(/\s*/)[0].length;lb=oa-lb;0!==lb&&(ma=eb.string.findLineWithIndexInLineRanges(Mc,
ma.end),tb.$jscomp$loop$prop$actionType$2412=0<lb?"insert":"delete",tb.$jscomp$loop$prop$arg$2413=0<lb?" ".repeat(lb):-lb,Fa.push.apply(Fa,$jscomp.arrayFromIterable(eb.arr.range(Ga,ma).map(function(gc){return function(uc){return[gc.$jscomp$loop$prop$actionType$2412,Mc[uc][0],gc.$jscomp$loop$prop$arg$2413]}}(tb)))))}}return Bd.call(Wb,Ld,Lc,kb)};Wb.accept(Cc,{},[]);for(Cc=Fa.length;Cc--;){var pd=$jscomp.makeIterator(Fa[Cc]),Vd=pd.next().value,qc=pd.next().value;pd=pd.next().value;"insert"===Vd?$a=
$a.slice(0,qc)+pd+$a.slice(qc):"delete"===Vd&&($a=$a.slice(0,qc)+$a.slice(qc+pd))}return $a}var W,sa,xa,Eb,Pb,Ha,Lb,xd,vd,Gc,Ma,tc;return $jscomp.asyncExecutePromiseGeneratorProgram(function($a){switch($a.nextAddress){case 1:return W=Yb||Math.floor(dc.width/dc.defaultCharExtent().width),Mb=Object.assign({printWidth:W,tabWidth:2,useTabs:!1,bracketSpacing:!1},Mb),sa=lively.modules.module,xa=System.normalizeSync("prettier/standalone.js"),$a.yield(sa(xa).load({format:"global",instrument:!1}),2);case 2:return Eb=
$a.yieldResult,$a.yield(sa("lively.ast/lib/acorn-extension.js").load(),3);case 3:return $a.yield(sa("lively.ast").load(),4);case 4:return Pb=$a.yieldResult,Ha=Pb.parse,$a.yield(sa("lively.ast/lib/query.js").load(),5);case 5:return $a.yield(System.import("jsdiff",System.decanonicalize("lively.morphic")),6);case 6:return Lb=$a.yieldResult,xd=dc.selection.isEmpty()?dc.documentRange:dc.selection.range,vd=dc.positionToIndex(xd.start),Gc=dc.positionToIndex(xd.end),Ma=Eb.format(dc.textString,Object.assign({},
Mb,{rangeStart:vd,rangeEnd:Gc,parser:function(Cc,Mc,Ua){return Ha(Cc,{allowReturnOutsideFunction:!0})}})),dc.undoManager.group(),tc=Lb.diffChars(dc.textString,Ma),dc.applyJsDiffPatch(tc),dc.selection.text=I(dc.selection.text),dc.undoManager.group(),$a.return(!0)}})}}];eb.jsIdeCommands=Na;eb.jsIdeCommands=Na;eb.jsIdeCommands=Na;var Da=[{name:"selectDefinition",readOnly:!0,bindKey:"Alt-.",exec:function(dc,Mb){Mb=dc.pluginInvokeFirst("getNavigator");if(!Mb)return!0;Mb=Mb.resolveIdentifierAt(dc,dc.cursorPosition);
if(!Mb||!Mb.id)return eb.show("No symbol identifier selected"),!0;if(!Mb.decl)return eb.show("Cannot find declaration of "+Mb.name),!0;dc.saveMark();dc.selection={start:dc.indexToPosition(Mb.decl.start),end:dc.indexToPosition(Mb.decl.end)};dc.scrollCursorIntoView();return!0}},{name:"selectSymbolReferenceOrDeclarationNext",readOnly:!0,multiSelectAction:"single",exec:function(dc){dc.execCommand("selectSymbolReferenceOrDeclaration",{direction:"next"})}},{name:"selectSymbolReferenceOrDeclarationPrev",
readOnly:!0,multiSelectAction:"single",exec:function(dc){dc.execCommand("selectSymbolReferenceOrDeclaration",{direction:"prev"})}},{name:"selectSymbolReferenceOrDeclaration",doc:"Finds the name of the currently selected symbol and will use the JS ast to select references and declarations whose name matches the symbol in the current scope.",readOnly:!0,multiSelectAction:"single",exec:function(dc,Mb){Mb=void 0===Mb?{direction:null}:Mb;var Yb=dc.pluginInvokeFirst("getNavigator");if(!Yb)return!0;Yb=Yb.resolveIdentifierAt(dc,
dc.cursorPosition);if(!Yb||!Yb.refs)return eb.show("No symbol identifier selected"),!0;var I=dc.selection;Yb=Yb.refs.map(function(sa){var xa=sa.end;return eb.Range.fromPositions(eb.iToP(dc,sa.start),eb.iToP(dc,xa))}).concat(Yb.decl?eb.Range.fromPositions(eb.iToP(dc,Yb.decl.start),eb.iToP(dc,Yb.decl.end)):[]).sort(eb.Range.compare);if(!Yb.length)return!0;var W=Yb.map(String).indexOf(String(I.range));if("next"===Mb.direction||"prev"===Mb.direction)-1===W&&Yb.length?Yb=[Yb[0]]:(Mb=W+("next"===Mb.direction?
1:-1),0>Mb?Mb=Yb.length-1:Mb>=Yb.length&&(Mb=0),Yb=[Yb[Mb]]);Yb.forEach(function(sa){var xa=I.selections.findIndex(function(Pb){return Pb.range.equals(sa)}),Eb=I.selections.length-1;-1<xa?eb.arr.swap(I.selections,xa,Eb):I.addRange(sa,!1)});I.mergeSelections();return!0}}];eb.astEditorCommands=Da;eb.astEditorCommands=Da;eb.astEditorCommands=Da;lively.modules&&!lively.FreezerRuntime&&lively.modules.module("lively.ide/js/editor-plugin.js").reload({reloadDeps:!1,resetEnv:!1});var mb=lively.FreezerRuntime.recorderFor("lively.ide/js/mode.js");
mb.expressionAllowed=function(dc,Mb,Yb){return/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(Mb.lastType)||"quasi"==Mb.lastType&&/\{\s*$/.test(dc.string.slice(0,dc.pos-(Yb||0)))};mb.passIndent=ob;mb.defineMode=$b;mb.defineMIME=Sb;mb.registerHelper=Bc;mb.defaultConfig={indentUnit:2};mb.defaultParserConfig={name:"javascript",statementIndent:2,jsonld:!1,json:!1,typescript:!1,wordCharacters:/[\w$\xa1-\uffff]/,globalVars:[],localVars:[],doubleIndentSwitch:null};mb.defineMode("javascript",
function(dc,Mb){function Yb(Bb,Qc,Md){ch=Bb;zi=Md;return Qc}function I(Bb,Qc){var Md=Bb.next();if('"'==Md||"'"==Md)return Qc.tokenize=W(Md),Qc.tokenize(Bb,Qc);if("."==Md&&Bb.match(/^\d+(?:[eE][+\-]?\d+)?/))return Yb("number","number");if("."==Md&&Bb.match(".."))return Yb("spread","meta");if(/[\[\]{}\(\),;:\.]/.test(Md))return Yb(Md);if("="==Md&&Bb.eat(">"))return Yb("=>","operator");if("0"==Md&&Bb.eat(/x/i))return Bb.eatWhile(/[\da-f]/i),Yb("number","number");if("0"==Md&&Bb.eat(/o/i))return Bb.eatWhile(/[0-7]/i),
Yb("number","number");if("0"==Md&&Bb.eat(/b/i))return Bb.eatWhile(/[01]/i),Yb("number","number");if(/\d/.test(Md))return Bb.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),Yb("number","number");if("/"==Md){if(Bb.eat("*"))return Qc.tokenize=sa,sa(Bb,Qc);if(Bb.eat("/"))return Bb.skipToEnd(),Yb("comment","comment");if(mb.expressionAllowed(Bb,Qc,1)){a:for(var Rb=Qc=!1;null!=(Md=Bb.next());){if(!Qc){if("/"==Md&&!Rb)break a;"["==Md?Rb=!0:Rb&&"]"==Md&&(Rb=!1)}Qc=!Qc&&"\\"==Md}Bb.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);
return Yb("regexp","string-2")}Bb.eatWhile(Hk);return Yb("operator","operator",Bb.current())}if("`"==Md)return Qc.tokenize=xa,xa(Bb,Qc);if("#"==Md)return Bb.skipToEnd(),Yb("error","error");if(Hk.test(Md))return">"==Md&&Qc.lexical&&">"==Qc.lexical.type||Bb.eatWhile(Hk),Yb("operator","operator",Bb.current());if(Oj.test(Md))return Bb.eatWhile(Oj),Bb=Bb.current(),(Md=Wj.propertyIsEnumerable(Bb)&&Wj[Bb])&&"."!=Qc.lastType?Yb(Md.type,Md.style,Bb):Yb("variable","variable",Bb)}function W(Bb){return function(Qc,
Md){var Rb=!1,wf;if(sh&&"@"==Qc.peek()&&Qc.match(mj))return Md.tokenize=I,Yb("jsonld-keyword","meta");for(;null!=(wf=Qc.next())&&(wf!=Bb||Rb);)Rb=!Rb&&"\\"==wf;Rb||(Md.tokenize=I);return Yb("string","string")}}function sa(Bb,Qc){for(var Md=!1,Rb;Rb=Bb.next();){if("/"==Rb&&Md){Qc.tokenize=I;break}Md="*"==Rb}return Yb("comment","comment")}function xa(Bb,Qc){for(var Md=!1,Rb;null!=(Rb=Bb.next());){if(!Md&&("`"==Rb||"$"==Rb&&Bb.eat("{"))){Qc.tokenize=I;break}Md=!Md&&"\\"==Rb}return Yb("quasi","string-2",
Bb.current())}function Eb(Bb,Qc){Qc.fatArrowAt&&(Qc.fatArrowAt=null);var Md=Bb.string.indexOf("=>",Bb.start);if(!(0>Md)){if(Vh){var Rb=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Bb.string.slice(Bb.start,Md));Rb&&(Md=Rb.index)}Rb=0;var wf=!1;for(--Md;0<=Md;--Md){var Mf=Bb.string.charAt(Md),Wh="([{}])".indexOf(Mf);if(0<=Wh&&3>Wh){if(!Rb){++Md;break}if(0==--Rb){"("==Mf&&(wf=!0);break}}else if(3<=Wh&&6>Wh)++Rb;else if(Oj.test(Mf))wf=!0;else{if(/["'\/]/.test(Mf))return;if(wf&&!Rb){++Md;break}}}wf&&
!Rb&&(Qc.fatArrowAt=Md)}}function Pb(Bb,Qc,Md,Rb,wf,Mf){this.indented=Bb;this.column=Qc;this.type=Md;this.prev=wf;this.info=Mf;null!=Rb&&(this.align=Rb)}function Ha(){for(var Bb=arguments.length-1;0<=Bb;Bb--)Se.cc.push(arguments[Bb])}function Lb(){Ha.apply(null,arguments);return!0}function xd(Bb){function Qc(Rb){for(;Rb;Rb=Rb.next)if(Rb.name==Bb)return!0;return!1}var Md=Se.state;Se.marked="def";Md.context?Qc(Md.localVars)||(Md.localVars={name:Bb,next:Md.localVars}):!Qc(Md.globalVars)&&Mb.globalVars&&
(Md.globalVars={name:Bb,next:Md.globalVars})}function vd(){Se.state.context={prev:Se.state.context,vars:Se.state.localVars};Se.state.localVars=pj}function Gc(){Se.state.localVars=Se.state.context.vars;Se.state.context=Se.state.context.prev}function Ma(Bb,Qc){var Md=function(){var Rb=Se.state,wf=Rb.indented;if("stat"==Rb.lexical.type)wf=Rb.lexical.indented;else for(var Mf=Rb.lexical;Mf&&")"==Mf.type&&Mf.align;Mf=Mf.prev)wf=Mf.indented;Rb.lexical=new Pb(wf,Se.stream.column(),Bb,null,Rb.lexical,Qc)};
Md.lex=!0;return Md}function tc(){var Bb=Se.state;Bb.lexical.prev&&(")"==Bb.lexical.type&&(Bb.indented=Bb.lexical.indented),Bb.lexical=Bb.lexical.prev)}function $a(Bb){function Qc(Md){return Md==Bb?Lb():";"==Bb?Ha():Lb(Qc)}return Qc}function Cc(Bb,Qc){return"var"==Bb?Lb(Ma("vardef",Qc.length),mc,$a(";"),tc):"keyword a"==Bb?Lb(Ma("form"),Fa,Cc,tc):"keyword b"==Bb?Lb(Ma("form"),Cc,tc):"{"==Bb?Lb(Ma("}"),ve,tc):";"==Bb?Lb():"if"==Bb?("else"==Se.state.lexical.info&&Se.state.cc[Se.state.cc.length-1]==
tc&&Se.state.cc.pop()(),Lb(Ma("form"),Fa,Cc,tc,va)):"function"==Bb?Lb(gb):"for"==Bb?Lb(Ma("form"),La,Cc,tc):"variable"==Bb?Vh&&"type"==Qc?(Se.marked="keyword",Lb(Sd,$a("operator"),Sd,$a(";"))):Lb(Ma("stat"),ma):"switch"==Bb?Lb(Ma("form"),Fa,$a("{"),Ma("}","switch"),ve,tc,tc):"case"==Bb?Lb(Mc,$a(":")):"default"==Bb?Lb($a(":")):"catch"==Bb?Lb(Ma("form"),vd,$a("("),ic,$a(")"),Cc,tc,Gc):"class"==Bb?Lb(Ma("form"),Oc,tc):"export"==Bb?Lb(Ma("stat"),zf,tc):"import"==Bb?Lb(Ma("stat"),Ee,tc):"module"==Bb?Lb(Ma("form"),
we,$a("{"),Ma("}"),ve,tc,tc):"async"==Bb?Lb(Cc):"@"==Qc?Lb(Mc,Cc):Ha(Ma("stat"),Mc,$a(";"),tc)}function Mc(Bb){return Wb(Bb,!1)}function Ua(Bb){return Wb(Bb,!0)}function Fa(Bb){return"("!=Bb?Ha():Lb(Ma(")"),Mc,$a(")"),tc)}function Wb(Bb,Qc){if(Se.state.fatArrowAt==Se.stream.start){var Md=Qc?ja:kb;if("("==Bb)return Lb(vd,Ma(")"),yd(we,")"),tc,$a("=>"),Md,Gc);if("variable"==Bb)return Ha(vd,we,$a("=>"),Md,Gc)}Md=Qc?qc:Vd;return wl.hasOwnProperty(Bb)?Lb(Md):"function"==Bb?Lb(gb,Md):"class"==Bb?Lb(Ma("form"),
kc,tc):"keyword c"==Bb||"async"==Bb?Lb(Qc?pd:Bd):"("==Bb?Lb(Ma(")"),Bd,$a(")"),tc,Md):"operator"==Bb||"spread"==Bb?Lb(Qc?Ua:Mc):"["==Bb?Lb(Ma("]"),Mi,tc,Md):"{"==Bb?Pd(lb,"}",null,Md):"quasi"==Bb?Ha(Ld,Md):"new"==Bb?Lb(oa(Qc)):Lb()}function Bd(Bb){return Bb.match(/[;\}\)\],]/)?Ha():Ha(Mc)}function pd(Bb){return Bb.match(/[;\}\)\],]/)?Ha():Ha(Ua)}function Vd(Bb,Qc){return","==Bb?Lb(Mc):qc(Bb,Qc,!1)}function qc(Bb,Qc,Md){var Rb=0==Md?Vd:qc,wf=0==Md?Mc:Ua;if("=>"==Bb)return Lb(vd,Md?ja:kb,Gc);if("operator"==
Bb)return/\+\+|--/.test(Qc)?Lb(Rb):"?"==Qc?Lb(Mc,$a(":"),wf):Lb(wf);if("quasi"==Bb)return Ha(Ld,Rb);if(";"!=Bb){if("("==Bb)return Pd(Ua,")","call",Rb);if("."==Bb)return Lb(Ga,Rb);if("["==Bb)return Lb(Ma("]"),Bd,$a("]"),tc,Rb)}}function Ld(Bb,Qc){return"quasi"!=Bb?Ha():"${"!=Qc.slice(Qc.length-2)?Lb(Ld):Lb(Mc,Lc)}function Lc(Bb){if("}"==Bb)return Se.marked="string-2",Se.state.tokenize=xa,Lb(Ld)}function kb(Bb){Eb(Se.stream,Se.state);return Ha("{"==Bb?Cc:Mc)}function ja(Bb){Eb(Se.stream,Se.state);return Ha("{"==
Bb?Cc:Ua)}function oa(Bb){return function(Qc){return"."==Qc?Lb(Bb?G:tb):Ha(Bb?Ua:Mc)}}function tb(Bb,Qc){if("target"==Qc)return Se.marked="keyword",Lb(Vd)}function G(Bb,Qc){if("target"==Qc)return Se.marked="keyword",Lb(qc)}function ma(Bb){return":"==Bb?Lb(tc,Cc):Ha(Vd,$a(";"),tc)}function Ga(Bb){if("variable"==Bb)return Se.marked="property",Lb()}function lb(Bb,Qc){if("async"==Bb)return Se.marked="property",Lb(lb);if("variable"==Bb||"keyword"==Se.style)return Se.marked="property","get"==Qc||"set"==
Qc?Lb(gc):Lb(uc);if("number"==Bb||"string"==Bb)return Se.marked=sh?"property":Se.style+" property",Lb(uc);if("jsonld-keyword"==Bb)return Lb(uc);if("modifier"==Bb)return Lb(lb);if("["==Bb)return Lb(Mc,$a("]"),uc);if("spread"==Bb)return Lb(Mc);if(":"==Bb)return Ha(uc)}function gc(Bb){if("variable"!=Bb)return Ha(uc);Se.marked="property";return Lb(gb)}function uc(Bb){if(":"==Bb)return Lb(Ua);if("("==Bb)return Ha(gb)}function yd(Bb,Qc,Md){function Rb(wf,Mf){return(Md?-1<Md.indexOf(wf):","==wf)?(wf=Se.state.lexical,
"call"==wf.info&&(wf.pos=(wf.pos||0)+1),Lb(function(Wh,Zl){return Wh==Qc||Zl==Qc?Ha():Ha(Bb)},Rb)):wf==Qc||Mf==Qc?Lb():Lb($a(Qc))}return function(wf,Mf){return wf==Qc||Mf==Qc?Lb():Ha(Bb,Rb)}}function Pd(Bb,Qc,Md){for(var Rb=3;Rb<arguments.length;Rb++)Se.cc.push(arguments[Rb]);return Lb(Ma(Qc,Md),yd(Bb,Qc),tc)}function ve(Bb){return"}"==Bb?Lb():Ha(Cc,ve)}function Uc(Bb,Qc){if(Vh){if(":"==Bb)return Lb(Sd);if("?"==Qc)return Lb(Uc)}}function Sd(Bb){if("variable"==Bb)return Se.marked="variable-3",Lb(Te);
if("string"==Bb||"number"==Bb||"atom"==Bb)return Lb(Te);if("{"==Bb)return Lb(Ma("}"),yd(Td,"}",",;"),tc);if("("==Bb)return Lb(yd(Gf,")"),De)}function De(Bb){if("=>"==Bb)return Lb(Sd)}function Td(Bb,Qc){if("variable"==Bb||"keyword"==Se.style)return Se.marked="property",Lb(Td);if("?"==Qc)return Lb(Td);if(":"==Bb)return Lb(Sd)}function Gf(Bb){if("variable"==Bb)return Lb(Gf);if(":"==Bb)return Lb(Sd)}function Te(Bb,Qc){if("<"==Qc)return Lb(Ma(">"),yd(Sd,">"),tc,Te);if("|"==Qc||"."==Bb)return Lb(Sd);if("["==
Bb)return Lb($a("]"),Te);if("extends"==Qc)return Lb(Sd)}function mc(){return Ha(we,Uc,sf,pe)}function we(Bb,Qc){if("modifier"==Bb)return Lb(we);if("variable"==Bb)return xd(Qc),Lb();if("spread"==Bb)return Lb(we);if("["==Bb)return Pd(we,"]");if("{"==Bb)return Pd(qf,"}")}function qf(Bb,Qc){if("variable"==Bb&&!Se.stream.match(/^\s*:/,!1))return xd(Qc),Lb(sf);"variable"==Bb&&(Se.marked="property");return"spread"==Bb?Lb(we):"}"==Bb?Ha():Lb($a(":"),we,sf)}function sf(Bb,Qc){if("="==Qc)return Lb(Ua)}function pe(Bb){if(","==
Bb)return Lb(mc)}function va(Bb,Qc){if("keyword b"==Bb&&"else"==Qc)return Lb(Ma("form","else"),Cc,tc)}function La(Bb){if("("==Bb)return Lb(Ma(")"),ib,$a(")"),tc)}function ib(Bb){return"var"==Bb?Lb(mc,$a(";"),ua):";"==Bb?Lb(ua):"variable"==Bb?Lb(S):Ha(Mc,$a(";"),ua)}function S(Bb,Qc){return"in"==Qc||"of"==Qc?(Se.marked="keyword",Lb(Mc)):Lb(Vd,ua)}function ua(Bb,Qc){return";"==Bb?Lb(Ya):"in"==Qc||"of"==Qc?(Se.marked="keyword",Lb(Mc)):Ha(Mc,$a(";"),Ya)}function Ya(Bb){")"!=Bb&&Lb(Mc)}function gb(Bb,
Qc){if("*"==Qc)return Se.marked="keyword",Lb(gb);if("variable"==Bb)return xd(Qc),Lb(gb);if("("==Bb)return Lb(vd,Ma(")"),yd(ic,")"),tc,Uc,Cc,Gc);if(Vh&&"<"==Qc)return Lb(Ma(">"),yd(Sd,">"),tc,gb)}function ic(Bb){return"spread"==Bb?Lb(ic):Ha(we,Uc,sf)}function kc(Bb,Qc){return"variable"==Bb?Oc(Bb,Qc):Pc(Bb,Qc)}function Oc(Bb,Qc){if("variable"==Bb)return xd(Qc),Lb(Pc)}function Pc(Bb,Qc){if("<"==Qc)return Lb(Ma(">"),yd(Sd,">"),tc,Pc);if("extends"==Qc||"implements"==Qc||Vh&&","==Bb)return Lb(Vh?Sd:Mc,
Pc);if("{"==Bb)return Lb(Ma("}"),Rc,tc)}function Rc(Bb,Qc){if("variable"==Bb||"keyword"==Se.style){if(("async"==Qc||"static"==Qc||"get"==Qc||"set"==Qc||Vh&&("public"==Qc||"private"==Qc||"protected"==Qc||"readonly"==Qc||"abstract"==Qc))&&Se.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return Se.marked="keyword",Lb(Rc);Se.marked="property";return Lb(Vh?Ie:gb,Rc)}if("["==Bb)return Lb(Mc,$a("]"),Vh?Ie:gb,Rc);if("*"==Qc)return Se.marked="keyword",Lb(Rc);if(";"==Bb)return Lb(Rc);if("}"==Bb)return Lb();if("@"==
Qc)return Lb(Mc,Rc)}function Ie(Bb,Qc){return"?"==Qc?Lb(Ie):":"==Bb?Lb(Sd,sf):"="==Qc?Lb(Ua):Ha(gb)}function zf(Bb,Qc){return"*"==Qc?(Se.marked="keyword",Lb(Og,$a(";"))):"default"==Qc?(Se.marked="keyword",Lb(Mc,$a(";"))):"{"==Bb?Lb(yd(ef,"}"),Og,$a(";")):Ha(Cc)}function ef(Bb,Qc){if("as"==Qc)return Se.marked="keyword",Lb($a("variable"));if("variable"==Bb)return Ha(Ua,ef)}function Ee(Bb){return"string"==Bb?Lb():Ha(dh,Cg,Og)}function dh(Bb,Qc){if("{"==Bb)return Pd(dh,"}");"variable"==Bb&&xd(Qc);"*"==
Qc&&(Se.marked="keyword");return Lb(ci)}function Cg(Bb){if(","==Bb)return Lb(dh,Cg)}function ci(Bb,Qc){if("as"==Qc)return Se.marked="keyword",Lb(dh)}function Og(Bb,Qc){if("from"==Qc)return Se.marked="keyword",Lb(Mc)}function Mi(Bb){return"]"==Bb?Lb():Ha(yd(Ua,"]"))}dc=Object.assign({},mb.defaultConfig,{},dc);Mb=Object.assign({},mb.defaultParserConfig,{},Mb);var Hf=dc.indentUnit,Bi=Mb.statementIndent,sh=Mb.jsonld,yi=Mb.json||sh,Vh=Mb.typescript,Oj=Mb.wordCharacters||/[\w$\xa1-\uffff]/,Wj=function(){function Bb(Zl){return{type:Zl,
style:"keyword"}}var Qc=Bb("keyword a"),Md=Bb("keyword b"),Rb=Bb("keyword c"),wf=Bb("operator"),Mf={type:"atom",style:"atom"};Qc={if:Bb("if"),while:Qc,with:Qc,else:Md,do:Md,try:Md,finally:Md,return:Rb,break:Rb,continue:Rb,new:Bb("new"),delete:Rb,throw:Rb,debugger:Rb,var:Bb("var"),const:Bb("var"),let:Bb("var"),function:Bb("function"),catch:Bb("catch"),for:Bb("for"),switch:Bb("switch"),case:Bb("case"),default:Bb("default"),in:wf,typeof:wf,instanceof:wf,true:Mf,false:Mf,null:Mf,undefined:Mf,NaN:Mf,Infinity:Mf,
this:Bb("this"),class:Bb("class"),super:Bb("atom"),yield:Rb,export:Bb("export"),import:Bb("import"),extends:Rb,await:Rb,async:Bb("async")};if(Vh){Md={type:"variable",style:"variable-3"};Rb={interface:Bb("class"),implements:Rb,namespace:Rb,module:Bb("module"),enum:Bb("module"),public:Bb("modifier"),private:Bb("modifier"),protected:Bb("modifier"),abstract:Bb("modifier"),as:wf,string:Md,number:Md,boolean:Md,any:Md};for(var Wh in Rb)Qc[Wh]=Rb[Wh]}return Qc}(),Hk=/[+\-*&%=<>!?|~^@]/,mj=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,
ch,zi,wl={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0},Se={state:null,column:null,marked:null,cc:null},pj={name:"this",next:{name:"arguments"}};tc.lex=!0;return{startState:function(Bb){Bb={tokenize:I,lastType:"sof",cc:[],lexical:new Pb((Bb||0)-Hf,0,"block",!1),localVars:Mb.localVars,context:Mb.localVars&&{vars:Mb.localVars},indented:Bb||0};Mb.globalVars&&"object"===typeof Mb.globalVars&&(Bb.globalVars=Mb.globalVars);return Bb},token:function(Bb,Qc){Bb.sol()&&(Qc.lexical.hasOwnProperty("align")||
(Qc.lexical.align=!1),Qc.indented=Bb.indentation(),Eb(Bb,Qc));if(Qc.tokenize!=sa&&Bb.eatSpace())return null;var Md=Qc.tokenize(Bb,Qc);if("comment"==ch)return Md;Qc.lastType="operator"!=ch||"++"!=zi&&"--"!=zi?ch:"incdec";a:{var Rb=ch,wf=zi,Mf=Qc.cc;Se.state=Qc;Se.stream=Bb;Se.marked=null;Se.cc=Mf;Se.style=Md;Qc.lexical.hasOwnProperty("align")||(Qc.lexical.align=!0);for(Bb=0;;){if(1E5<Bb++)throw Error("endless");if((Mf.length?Mf.pop():yi?Mc:Cc)(Rb,wf)){for(;Mf.length&&Mf[Mf.length-1].lex;)Mf.pop()();
if(Se.marked){Md=Se.marked;break a}if(Rb="variable"==Rb)b:{for(Rb=Qc.localVars;Rb;Rb=Rb.next)if(Rb.name==wf){Rb=!0;break b}for(Qc=Qc.context;Qc;Qc=Qc.prev)for(Rb=Qc.vars;Rb;Rb=Rb.next)if(Rb.name==wf){Rb=!0;break b}Rb=void 0}if(Rb){Md="variable-2";break a}break a}}}return Md},indent:function(Bb,Qc){if(Bb.tokenize==sa)return mb.passIndent;if(Bb.tokenize!=I)return 0;var Md=Qc&&Qc.charAt(0),Rb=Bb.lexical,wf;if(!/^\s*else\b/.test(Qc))for(var Mf=Bb.cc.length-1;0<=Mf;--Mf){var Wh=Bb.cc[Mf];if(Wh==tc)Rb=
Rb.prev;else if(Wh!=va)break}for(;!("stat"!=Rb.type&&"form"!=Rb.type||"}"!=Md&&(!(wf=Bb.cc[Bb.cc.length-1])||wf!=Vd&&wf!=qc||/^[,\.=+\-*:?[\(]/.test(Qc)));)Rb=Rb.prev;Bi&&")"==Rb.type&&"stat"==Rb.prev.type&&(Rb=Rb.prev);wf=Rb.type;Mf=Md==wf;return(Wh=Bb._string)&&Wh.trimLeft().startsWith("?")&&":"===Md?Wh.indexOf("?"):Wh&&":"===Bb.lastType&&"}"!==Rb.type?Wh.match(/^\s*/)[0].length:"vardef"==wf?(Qc=Rb.indented+Rb.info+2+Bb.localVars.name.length,"?"===Md||":"===Md||"|"===Md||"&"===Md?Qc:","==Bb.lastType?
Rb.indented+Rb.info+1:"operator"==Bb.lastType?Qc+3:Rb.indented):"form"==wf&&"{"==Md?Rb.indented:"form"==wf?Rb.indented+Hf:"stat"==wf?(Md=Rb.indented,Bb="operator"==Bb.lastType||","==Bb.lastType||Hk.test(Qc.charAt(0))||/[,.]/.test(Qc.charAt(0)),Md+(Bb?Bi||Hf:0)):"switch"!=Rb.info||Mf||0==Mb.doubleIndentSwitch?Rb.align?Rb.column+(Mf?0:1):Rb.indented+(Mf?0:Hf):Rb.indented+(/^(?:case|default)\b/.test(Qc)?Hf:2*Hf)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:yi?null:"/*",blockCommentEnd:yi?
null:"*/",lineComment:yi?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:yi?"json":"javascript",jsonldMode:sh,jsonMode:yi,expressionAllowed:mb.expressionAllowed,skipExpression:function(Bb){var Qc=Bb.cc[Bb.cc.length-1];Qc!=Mc&&Qc!=Ua||Bb.cc.pop()}}});mb.registerHelper("wordChars","javascript",/[\w$]/);mb.defineMIME("text/javascript","javascript");mb.defineMIME("text/ecmascript","javascript");mb.defineMIME("application/javascript","javascript");mb.defineMIME("application/x-javascript",
"javascript");mb.defineMIME("application/ecmascript","javascript");mb.defineMIME("application/json",{name:"javascript",json:!0});mb.defineMIME("application/x-json",{name:"javascript",json:!0});mb.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});mb.defineMIME("text/typescript",{name:"javascript",typescript:!0});mb.defineMIME("application/typescript",{name:"javascript",typescript:!0});var Zb=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js");Zb.string=Hc;Zb.JavaScriptChecker=
cd;Zb.JavaScriptNavigator=bd;Zb.completers=ab;Zb.jsSnippets=Za;Zb.jsIdeCommands=Na;Zb.jsEditorCommands=Pa;Zb.astEditorCommands=Da;Zb.CodeMirrorEnabledEditorPlugin=id;Zb.Snippet=pb;Zb.parser=sc;Zb.localInterface=Xb;Zb.systemInterfaceNamed=Ub;Zb.serverInterfaceFor=ub;Zb.l2lInterfaceFor=hc;cd=function(dc){var Mb=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js"),Yb=Mb.hasOwnProperty("JavaScriptEditorPlugin")&&"function"===typeof Mb.JavaScriptEditorPlugin?Mb.JavaScriptEditorPlugin:Mb.JavaScriptEditorPlugin=
function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return nb(Yb,dc,[{key:Symbol.for("lively-instance-initialize"),value:function(){nb._get(Object.getPrototypeOf(Yb.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.checker=new Zb.JavaScriptChecker;this.evalEnvironment={format:"esm",targetModule:null,context:null}}},{key:"isJSEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return"js"}},
{key:"longName",get:function(){return"javascript"}},{key:"attach",value:function(I){nb._get(Object.getPrototypeOf(Yb.prototype),"attach",this).call(this,I);this.evalEnvironment=Object.assign({},this.evalEnvironment,{context:I})}},{key:"detach",value:function(I){this.checker.uninstall(this.textMorph);nb._get(Object.getPrototypeOf(Yb.prototype),"detach",this).call(this,I)}},{key:"getNavigator",value:function(){return new Zb.JavaScriptNavigator}},{key:"getCompleters",value:function(I){return Zb.completers.concat(I)}},
{key:"getCommands",value:function(I){return[].concat($jscomp.arrayFromIterable(nb._get(Object.getPrototypeOf(Yb.prototype),"getCommands",this).call(this,I)),$jscomp.arrayFromIterable(Zb.jsIdeCommands),$jscomp.arrayFromIterable(Zb.jsEditorCommands),$jscomp.arrayFromIterable(Zb.astEditorCommands))}},{key:"getKeyBindings",value:function(I){return[].concat($jscomp.arrayFromIterable(I),[{keys:"Shift-Tab",command:{command:"[javascript] auto format code"}},{keys:"Ctrl-C E",command:"[javascript] list errors and warnings"},
{keys:{mac:"Meta-Shift-L L I N T R",win:"Ctrl-Shift-L L I N T R"},command:"[javascript] eslint report"},{keys:{mac:"Meta-Shift-L L I N T P",win:"Ctrl-Shift-L L I N T P"},command:"[javascript] eslint preview fixes"},{keys:{mac:"Meta-Shift-L L I N T F",win:"Ctrl-Shift-L L I N T F"},command:"[javascript] eslint fix"},{keys:{mac:"Meta-Shift-L M O D E",win:"Ctrl-Shift-L M O D E"},command:"change editor mode"},{keys:"Ctrl-C I",command:"[javascript] inject import"},{keys:"Ctrl-C C I",command:"[javascript] fix undeclared variables"}])}},
{key:"getMenuItems",value:function(I){var W=this,sa,xa,Eb,Pb,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lb){sa=W.textMorph;xa=[{command:"doit",target:sa,showKeyShortcuts:!0},{command:"inspectit",target:sa,showKeyShortcuts:!0},{command:"editit",target:sa,showKeyShortcuts:!0},{command:"printit",target:sa,showKeyShortcuts:!0},{command:"print inspectit",alias:"print inspect",target:sa,showKeyShortcuts:!0},{command:"eval all",target:sa,showKeyShortcuts:!0},{command:"text completion",
alias:"code completion",target:sa,showKeyShortcuts:!0},{command:"[javascript] list errors and warnings",alias:"list errors and warnings",target:sa,showKeyShortcuts:!0},{isDivider:!0}];W.evalEnvironment.targetModule&&xa.push({command:"[javascript] inject import",alias:"add import",target:sa},{command:"[javascript] fix undeclared variables",alias:"fix undeclared variables",target:sa},{command:"[javascript] remove unused imports",alias:"remove unused imports",target:sa});Eb=W.getNavigator();(Pb=Eb.resolveIdentifierAt(sa,
sa.cursorPosition))&&xa.push({command:"selectDefinition",alias:'jump to definition of "'+Pb.name+'"',target:sa},{command:"selectSymbolReferenceOrDeclaration",alias:'select all occurrences of "'+Pb.name+'"',target:sa});(Ha=sa.selection.text.trim())&&xa.push({command:"open code search",alias:'code search for "'+Zb.string.truncate(Ha,30)+'"',target:sa.world(),args:{input:Ha,backend:W.backend()}});xa.push({isDivider:!0});return Lb.return(xa.concat(I))})}},{key:"getSnippets",value:function(){return Zb.jsSnippets.map(function(I){var W=
$jscomp.makeIterator(I);I=W.next().value;W=W.next().value;return new Zb.Snippet({trigger:I,expansion:W})})}},{key:"sanatizedJsEnv",value:function(I){I=Object.assign({},this.evalEnvironment,{},I);I.format||(I.formatd="esm");I.context||(I.context=this.textMorph);I.sourceURL||(I.sourceURL=I.targetModule+"_doit_"+Date.now());I.systemInterface||(I.systemInterface=Zb.localInterface);return I}},{key:"backend",value:function(I){I=this.sanatizedJsEnv(I);return I.remote?I.remote:"local"}},{key:"systemInterface",
value:function(I){return this.sanatizedJsEnv(I).systemInterface||Zb.localInterface}},{key:"setSystemInterface",value:function(I){return this.evalEnvironment.systemInterface=I}},{key:"setSystemInterfaceNamed",value:function(I){return this.setSystemInterface(Zb.systemInterfaceNamed(I))}},{key:"runEval",value:function(I,W){W=this.sanatizedJsEnv(W);return this.systemInterface(W).runEval(I,W)}},{key:"parser",get:function(){return Zb.parser}},{key:"parse",value:function(I){I=void 0===I?null:I;if(this._ast&&
this._ast._astType===I)return this._ast;var W=this.parser,sa=this.textMorph.textString;if(!W)return null;var xa={withComments:!0,allowReturnOutsideFunction:!0};I&&(xa.type=I);if(sa.startsWith("#!")){var Eb=sa.indexOf("\n");sa=" ".repeat(Eb)+sa.slice(Eb)}W=W.fuzzyParse(sa,xa);W._astType=I;return this._ast=W}},{key:"undeclaredVariables",value:function(I){var W=this.parser,sa=this.evalEnvironment.knownGlobals||[];I=this.parse(void 0===I?null:I);return W&&I?W.query.findGlobalVarRefs(I,{jslintGlobalComment:!0}).filter(function(xa){return!sa.includes(xa.name)}):
[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptEditorPlugin"}}],Mb,{pathInPackage:function(){return"js/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:664,end:6857})}(Zb.CodeMirrorEnabledEditorPlugin);cd=Zb.JavaScriptEditorPlugin;ta("default",cd);Zb.default=cd}}});