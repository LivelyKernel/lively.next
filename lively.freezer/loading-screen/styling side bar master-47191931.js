System.register("./__root_module__-b4667baa.js kld-intersections ./index-1bf516c3.js ./index-7dbbd7dc.js ./index-82fc4eeb.js ./color-picker-fa10ea31.js ./index-190f7b7b.js".split(" "),function(){var ta,lb,yb,Qb,Kb,yd,Cc,rd,Fc,Dc,Rc,$c,Hd,gd,Uc,Pa,mb,Nb,Ub,Ic,wd,Eb;return{setters:[function(Sb){ta=Sb.ai;lb=Sb.aA;yb=Sb.an;Qb=Sb.ao;Kb=Sb.av;yd=Sb.a3;Cc=Sb.C;rd=Sb.at;Fc=Sb.aq;Dc=Sb.bp;Rc=Sb.as;$c=Sb.a7;Hd=Sb.s;gd=Sb.bQ;Uc=Sb.au;Pa=Sb.ar;mb=Sb.r;Nb=Sb.a6;Ub=Sb.P;Ic=Sb.bT;wd=Sb.bU},function(){},function(){},
function(){},function(){},function(Sb){Eb=Sb.S},function(){}],execute:function(){var Sb=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js");Sb.Morph=ta;Sb.touchInputDevice=lb;Sb.morph=yb;Sb.Icon=Qb;Sb.easings=Kb;Sb.pt=yd;Sb.Color=Cc;Sb.fun=rd;Sb.connect=Fc;Sb.TreeData=Dc;var sb=function(ab){var Zb=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),kc=Zb.hasOwnProperty("SettingsTree")&&"function"===typeof Zb.SettingsTree?Zb.SettingsTree:Zb.SettingsTree=function(ua){ua&&ua[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rc(kc,ab,[{key:"display",value:function(ua){return ua.panel?[ua.panel,{}]:ua.name}},{key:"collapse",value:function(ua,Ga){ua.isCollapsed=Ga}},{key:"isCollapsed",value:function(ua){return ua.isCollapsed}},{key:"isLeaf",value:function(ua){return!ua.children}},{key:"getChildren",value:function(ua){return ua.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SettingsTree"}},{key:"default",value:function(){return new this({isCollapsed:!1,
children:[{isCollapsed:!0,name:[" ",{}].concat($jscomp.arrayFromIterable(Sb.Icon.textAttribute("font")),[" Rich Text",{fontWeight:"bold"}]),children:[{panel:Sb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Sb.Icon.textAttribute("image")),[" Shape",{fontWeight:"bold"}]),children:[{panel:Sb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Sb.Icon.textAttribute("border-style")),[" Border",{paddingLeft:"2px",fontWeight:"bold"}]),children:[{panel:Sb.morph({})}]},
{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Sb.Icon.textAttribute("grip-vertical")),[" Layout",{paddingLeft:"4px",fontWeight:"bold"}]),children:[{panel:Sb.morph({})}]}]})}},{key:"border",value:function(){return new this({isCollapsed:!1,children:[{isCollapsed:!0,name:[" Type    ",{},Sb.morph({height:20}),{}],children:[{panel:Sb.morph({})}]},{isCollapsed:!1,name:[" Color   ",{},Sb.morph({height:20}),{}],children:[{panel:Sb.morph({})}]},{isCollapsed:!1,name:[" Width  ",{},Sb.morph({height:20}),
{}],children:[{panel:Sb.morph({})}]},{isCollapsed:!1,name:[" Radius ",{},Sb.morph({height:20}),{}],children:[{panel:Sb.morph({})}]}]})}}],Zb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-58"}}},{start:284,end:2453})}(Sb.TreeData);Sb.SettingsTree=sb;Sb.SettingsTree=sb;Sb.SettingsTree=sb;sb=function(ab){var Zb=
lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),kc=Zb.hasOwnProperty("StylingSideBar")&&"function"===typeof Zb.StylingSideBar?Zb.StylingSideBar:Zb.StylingSideBar=function(ua){ua&&ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rc(kc,ab,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"collapseAll",value:function(){this.getSubmorphsByStyleClassName("Tree").forEach(function(ua){ua.nodes.forEach(function(Ga){return ua.treeData.root==
Ga?ua.uncollapse(Ga):ua.collapse(Ga)})})}},{key:"onWorldResize",value:function(ua){ua=void 0===ua?!0:ua;if(this.respondsToVisibleWindow){var Ga=$world.visibleBounds(),cb=navigator.standalone&&Sb.touchInputDevice?25:0,rb=this.getSubmorphNamed("horizontal resizer");this.height=Ga.height-cb;this.top=cb+Ga.top();rb.height=this.height;rb.left=0;rb.top=0;ua&&(this.visible?this.topRight=Ga.topRight():this.topLeft=Ga.topRight())}}},{key:"toggle",value:function(ua){var Ga=this,cb,rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pb){switch(pb.nextAddress){case 1:cb=
$world.visibleBounds();rb=navigator.standalone&&Sb.touchInputDevice?25:0;Ga.height=cb.height-rb;Ga.top=rb+cb.top();if(ua)return $world.addMorph(Ga,$world.get("lively top bar")),Ga.left=cb.width,Ga.visible=!0,pb.yield(Ga.whenRendered(),5);Ga.detachFromWorld($world);return pb.yield(Ga.animate({opacity:0,left:cb.width,duration:300}),4);case 4:Ga.visible=!1;Ga.remove();pb.jumpTo(0);break;case 5:return Ga.onWorldResize(!1),pb.yield(Ga.animate({opacity:1,easing:Sb.easings.outCirc,right:cb.width,duration:300}),
6);case 6:Ga.attachToWorld($world),pb.jumpToEnd()}})}},{key:"cleanupAnchors",value:function(){for(var ua=this.withAllSubmorphsSelect(function(pb){return pb.anchors&&pb.anchors.filter(function(Ta){return!Ta.id}).length}),Ga={},cb=$jscomp.makeIterator(ua),rb=cb.next();!rb.done;Ga={$jscomp$loop$prop$m$2263:Ga.$jscomp$loop$prop$m$2263},rb=cb.next())Ga.$jscomp$loop$prop$m$2263=rb.value,Ga.$jscomp$loop$prop$m$2263.anchors.forEach(function(pb){return function(Ta){return!Ta.id&&pb.$jscomp$loop$prop$m$2263.removeAnchor(Ta)}}(Ga));
return ua.length}},{key:"attachToWorld",value:function(ua){Sb.connect(ua,"showHaloFor",this,"focusMorph",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(ua){var Ga=this;ua.attributeConnections.forEach(function(cb){cb.targetObj===Ga&&cb.disconnect()})}},{key:"focusMorph",value:function(ua){ua.isMorph&&ua.ownerChain().includes(this)||((ua.isLabel||ua.isText||ua.isButton)&&this.richTextControl.focusOn(ua,!1),Object.values(this.controls).forEach(function(Ga){return Ga&&Ga.focusOn(ua)}))}},
{key:"onHierarchyChange",value:function(){Object.values(this.controls).forEach(function(ua){return ua&&ua.update()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StylingSideBar"}},{key:"properties",get:function(){return{controls:{},richTextControl:{},isHaloItem:{get:function(){return!0}}}}}],Zb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"StylingSideBar",version:"0.1.1-58"}}},{start:2470,end:5340})}(Sb.Morph);sb=Sb.StylingSideBar;Sb.default=sb;var ec=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js");ec.Morph=ta;ec.obj=$c;ec.string=Hd;ec.connect=Fc;ec.noUpdate=gd;ec.once=Uc;sb=function(ab){var Zb=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js"),kc=Zb.hasOwnProperty("ShapeFormatStyler")&&"function"===typeof Zb.ShapeFormatStyler?Zb.ShapeFormatStyler:Zb.ShapeFormatStyler=function(ua){ua&&
ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rc(kc,ab,[{key:Symbol.for("lively-instance-initialize"),value:function(ua){Rc._get(Object.getPrototypeOf(kc.prototype),Symbol.for("lively-instance-initialize"),this).call(this,ua);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var ua=this.ui,Ga={},cb=$jscomp.makeIterator(Object.entries(this.uiSpec)),rb=cb.next();!rb.done;Ga={$jscomp$loop$prop$control$2265:Ga.$jscomp$loop$prop$control$2265,
$jscomp$loop$prop$prop$2266:Ga.$jscomp$loop$prop$prop$2266},rb=cb.next()){var pb=$jscomp.makeIterator(rb.value);rb=pb.next().value;pb=$jscomp.makeIterator(pb.next().value);pb.next();var Ta=pb.next().value;Ga.$jscomp$loop$prop$prop$2266=pb.next().value;Ga.$jscomp$loop$prop$control$2265=ua[rb];ec.connect(Ga.$jscomp$loop$prop$control$2265,Ta,this,"updateTarget",{updater:function(Ua){return function(ob,Wb){Ua.$jscomp$loop$prop$control$2265._updating=!0;ob(Ua.$jscomp$loop$prop$prop$2266,Wb);Ua.$jscomp$loop$prop$control$2265._updating=
!1}}(Ga),varMapping:{prop:Ga.$jscomp$loop$prop$prop$2266,control:Ga.$jscomp$loop$prop$control$2265}})}}},{key:"update",value:function(){var ua=this,Ga=this.target,cb=Ga.clipMode,rb=Ga.fill,pb=Ga.dropShadow,Ta=Ga.opacity,Ua=Ga.height,ob=Ga.width;Ga=this.ui;var Wb=Ga.clipModeSelector,lc=Ga.fillPicker,Lb=Ga.opacityField,qc=Ga.shadowPicker,I=Ga.heightField,V=Ga.widthField;ec.noUpdate(function(){ua.updateControl(qc,"shadowValue",pb);ua.updateControl(Wb,"selection",cb);ua.updateControl(lc,"colorValue",
rb);ua.updateControl(Lb,"number",Ta);ua.updateControl(I,"number",Ua);ua.updateControl(V,"number",ob)})}},{key:"updateTarget",value:function(ua,Ga){this.target[ua]=Ga;this.update()}},{key:"updateControl",value:function(ua,Ga,cb){ua._updating||ec.obj.equals(ua[Ga],cb)||(ua[Ga]=cb)}},{key:"updateMultiValue",value:function(ua,Ga,cb){var rb=this.ui,pb=rb[this.join(ua)],Ta=pb.get("multi value indicator"),Ua=ec.obj.values(Ga).some(function(ob){return!ec.obj.isFunction(ob)&&!ec.obj.equals(ob,Ga.valueOf())});
Ta.left=0;pb.visible=pb.isLayoutable=!Ua;if(Ua&&Ta.visible!=Ua)ec.once(Ta,"onMouseDown",pb,cb,{converter:function(){return Ga.valueOf()},varMapping:{value:Ga}});Ta.visible=Ta.isLayoutable=Ua;Ta.left=Ua?200:0;this.updateControl(pb,cb,Ga.valueOf());pb=$jscomp.makeIterator(["top","left","bottom","right"]);for(Ta=pb.next();!Ta.done;Ta=pb.next())Ta=Ta.value,Ua=rb[this.join(ua,Ta)],this.updateControl(Ua,cb,Ga[Ta])}},{key:"lower",value:function(ua){return ua.charAt(0).toLowerCase()+ua.slice(1)}},{key:"join",
value:function(ua,Ga){return this.lower(ec.string.camelCaseString(ua+(Ga?" "+Ga:"")))}},{key:"unwrap",value:function(ua,Ga,cb){var rb={};rb=(rb[this.lower(ec.string.camelCaseString(ua))]=[ua,Ga,cb],rb);for(var pb=$jscomp.makeIterator(["top","left","bottom","right"]),Ta=pb.next();!Ta.done;Ta=pb.next()){Ta=Ta.value;var Ua=ua+" "+Ta;rb[this.lower(ec.string.camelCaseString(Ua))]=[Ua,Ga,this.join(cb,Ta)]}return rb}},{key:"focusOn",value:function(ua){var Ga=this,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rb){if(1==
rb.nextAddress)return!ua||Ga.isAncestorOf(ua)||Ga.target===ua||ec.obj.isArray(ua)||(Ga.target=ua),cb=Ga.visible,Ga.visible=!0,rb.yield(Ga.whenRendered(),2);if(3!=rb.nextAddress)return Ga.update(),rb.yield(Ga.whenRendered(),3);Ga.getSubmorphsByStyleClassName("NumberWidget").map(function(pb){return pb.relayout()});Ga.visible=cb;rb.jumpToEnd()})}},{key:"onHoverIn",value:function(ua){this.watchForTarget=!1}},{key:"onHoverOut",value:function(ua){this.watchForTarget=!0}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ShapeFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{get:function(){return this._uiSpec||(this._uiSpec={clipModeSelector:["clip mode selector","selection","clipMode"],fillPicker:["fill picker","colorValue","fill"],shadowPicker:["shadow picker","shadowValue","dropShadow"],opacityField:["opacity field","number","opacity"],heightField:["height field","number","height"],widthField:["width field","number","width"]})}},ui:{readOnly:!0,get:function(){var ua=this,Ga=
this.uiSpec;return this._ui||(this._ui=ec.obj.extract(Ga,ec.obj.keys(Ga),function(cb,rb){cb=$jscomp.makeIterator(rb).next().value;return ua.getSubmorphNamed(cb)}))}}}}}],Zb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeFormatStyler",version:"0.1.1-144"}}},{start:176,end:4600})}(ec.Morph);sb=ec.ShapeFormatStyler;ec.default=
sb;var rc=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js");rc.Morph=ta;rc.ShadowPopover=Eb;rc.connect=Fc;rc.signal=Pa;sb=function(ab){var Zb=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js"),kc=Zb.hasOwnProperty("ShadowWidget")&&"function"===typeof Zb.ShadowWidget?Zb.ShadowWidget:Zb.ShadowWidget=function(ua){ua&&ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rc(kc,ab,[{key:"onHoverIn",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:1,
duration:200})}},{key:"onHoverOut",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(ua){this.openPopover()}},{key:"update",value:function(ua){var Ga=this.submorphs[0];Ga&&(Ga.dropShadow=ua)}},{key:"openPopover",value:function(){var ua=this,Ga;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==cb.nextAddress)return Ga=new rc.ShadowPopover({hasFixedPosition:!!ua.ownerChain().find(function(rb){return rb.hasFixedPosition}),
shadowValue:ua.shadowValue}),cb.yield(Ga.fadeIntoWorld(ua.globalBounds().center()),2);rc.connect(Ga,"shadowValue",ua,"shadowValue");rc.connect(ua,"shadowValue",ua,"update");rc.signal(ua,"openWidget",Ga);cb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{set:function(ua){this.setProperty("shadowValue",ua);this.update(ua)}}}}}],Zb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShadowWidget",version:"0.1.1-7"}}},{start:194,end:1231})}(rc.Morph);sb=rc.ShadowWidget;rc.default=sb;var yc=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js");yc.Morph=ta;yc.obj=$c;yc.string=Hd;yc.connect=Fc;yc.noUpdate=gd;yc.once=Uc;sb=function(ab){var Zb=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js"),kc=Zb.hasOwnProperty("BorderFormatStyler")&&"function"===typeof Zb.BorderFormatStyler?
Zb.BorderFormatStyler:Zb.BorderFormatStyler=function(ua){ua&&ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rc(kc,ab,[{key:"setupUI",value:function(){var ua=this;this.getSubmorphsByStyleClassName("NumberWidget").map(function(Ga){var cb=yc.string.camelCaseString(Ga.name);cb=cb[0].toLowerCase()+cb.slice(1);ua.ui[cb]=Ga})}},{key:"cleanupAnchors",value:function(){var ua=this.withAllSubmorphsSelect(function(rb){return rb.anchors&&
rb.anchors.filter(function(pb){return!pb.id})}),Ga={};ua=$jscomp.makeIterator(ua);for(var cb=ua.next();!cb.done;Ga={$jscomp$loop$prop$m$2268:Ga.$jscomp$loop$prop$m$2268},cb=ua.next())Ga.$jscomp$loop$prop$m$2268=cb.value,Ga.$jscomp$loop$prop$m$2268.anchors.forEach(function(rb){return function(pb){return!pb.id&&rb.$jscomp$loop$prop$m$2268.removeAnchor(pb)}}(Ga))}},{key:Symbol.for("lively-instance-initialize"),value:function(ua){Rc._get(Object.getPrototypeOf(kc.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,ua);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var ua=this.ui,Ga={},cb=$jscomp.makeIterator(Object.entries(this.uiSpec)),rb=cb.next();!rb.done;Ga={$jscomp$loop$prop$control$2270:Ga.$jscomp$loop$prop$control$2270,$jscomp$loop$prop$prop$2271:Ga.$jscomp$loop$prop$prop$2271},rb=cb.next()){var pb=$jscomp.makeIterator(rb.value);rb=pb.next().value;pb=$jscomp.makeIterator(pb.next().value);pb.next();var Ta=pb.next().value;Ga.$jscomp$loop$prop$prop$2271=
pb.next().value;Ga.$jscomp$loop$prop$control$2270=ua[rb];yc.connect(Ga.$jscomp$loop$prop$control$2270,Ta,this,"updateTarget",{updater:function(Ua){return function(ob,Wb){Ua.$jscomp$loop$prop$control$2270._updating=!0;ob(Ua.$jscomp$loop$prop$prop$2271,Wb);Ua.$jscomp$loop$prop$control$2270._updating=!1}}(Ga),varMapping:{prop:Ga.$jscomp$loop$prop$prop$2271,control:Ga.$jscomp$loop$prop$control$2270}})}}},{key:"update",value:function(){var ua=this,Ga=this.target,cb=Ga.borderStyle,rb=Ga.borderColor,pb=
Ga.borderRadius,Ta=Ga.borderWidth;yc.noUpdate(function(){ua.updateMultiValue("border style selector",cb,"selection");ua.updateMultiValue("border color picker",rb,"colorValue");ua.updateMultiValue("border radius field",pb,"number");ua.updateMultiValue("border width field",Ta,"number")})}},{key:"updateTarget",value:function(ua,Ga){this.target[ua]=Ga;this.update()}},{key:"updateControl",value:function(ua,Ga,cb){ua._updating||yc.obj.equals(ua[Ga],cb)||(ua[Ga]=cb)}},{key:"updateMultiValue",value:function(ua,
Ga,cb){var rb=this.ui,pb=rb[this.join(ua)],Ta=pb.get("multi value indicator"),Ua=yc.obj.values(Ga).some(function(ob){return!yc.obj.isFunction(ob)&&!yc.obj.equals(ob,Ga.valueOf())});pb.visible=pb.isLayoutable=!Ua;if(Ua&&Ta.visible!=Ua)yc.once(Ta,"onMouseDown",pb,cb,{converter:function(){return Ga.valueOf()},varMapping:{value:Ga}});Ta.visible=Ta.isLayoutable=Ua;this.updateControl(pb,cb,Ga.valueOf());pb=$jscomp.makeIterator(["top","left","bottom","right"]);for(Ta=pb.next();!Ta.done;Ta=pb.next())Ta=Ta.value,
Ua=rb[this.join(ua,Ta)],this.updateControl(Ua,cb,Ga[Ta])}},{key:"lower",value:function(ua){return ua.charAt(0).toLowerCase()+ua.slice(1)}},{key:"join",value:function(ua,Ga){return this.lower(yc.string.camelCaseString(ua+(Ga?" "+Ga:"")))}},{key:"unwrap",value:function(ua,Ga,cb){var rb={};rb=(rb[this.lower(yc.string.camelCaseString(ua))]=[ua,Ga,cb],rb);for(var pb=$jscomp.makeIterator(["top","left","bottom","right"]),Ta=pb.next();!Ta.done;Ta=pb.next()){Ta=Ta.value;var Ua=ua+" "+Ta;rb[this.lower(yc.string.camelCaseString(Ua))]=
[Ua,Ga,this.join(cb,Ta)]}return rb}},{key:"attachToWorld",value:function(){yc.connect($world,"showHaloFor",this,"focusOn",{garbageCollect:!0})}},{key:"focusOn",value:function(ua){var Ga=this,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rb){if(1==rb.nextAddress)return!ua||Ga.isAncestorOf(ua)||Ga.target===ua||yc.obj.isArray(ua)||(Ga.target=ua),cb=Ga.visible,Ga.visible=!0,rb.yield(Ga.whenRendered(),2);if(3!=rb.nextAddress)return Ga.update(),rb.yield(Ga.whenRendered(),3);Ga.getSubmorphsByStyleClassName("NumberWidget").map(function(pb){return pb.relayout()});
Ga.visible=cb;rb.jumpToEnd()})}},{key:"onHoverIn",value:function(ua){this.watchForTarget=!1}},{key:"onHoverOut",value:function(ua){this.watchForTarget=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BorderFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{derived:!0,serialize:!1,get:function(){return this._uiSpec||(this._uiSpec=Object.assign({},this.unwrap("border style selector","selection","borderStyle"),{},this.unwrap("border color picker","colorValue","borderColor"),
{},this.unwrap("border radius field","number","borderRadius"),{},this.unwrap("border width field","number","borderWidth")))}},ui:{initialize:function(){this.setupUI()}}}}}],Zb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"BorderFormatStyler",version:"0.1.1-16"}}},{start:185,end:5003})}(yc.Morph);sb=yc.BorderFormatStyler;yc.default=
sb;var Db=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js");Db.Morph=ta;Db.resource=mb;Db.arr=Nb;Db.obj=$c;Db.string=Hd;Db.Path=Ub;Db.connect=Fc;Db.getMastersMenu=Ic;Db.resolvedMasters=wd;sb=function(ab){var Zb=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js"),kc=Zb.hasOwnProperty("MasterComponentControl")&&"function"===typeof Zb.MasterComponentControl?Zb.MasterComponentControl:Zb.MasterComponentControl=function(ua){ua&&ua[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rc(kc,ab,[{key:"focusOn",value:function(ua){this.target=ua;this.update()}},{key:"onMouseUp",value:function(ua){var Ga=this,cb,rb,pb,Ta,Ua,ob;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wb){if(1==Wb.nextAddress){"auto master selection"==ua.targetMorph.name&&(cb="auto");"hover master selection"==ua.targetMorph.name&&(cb="hover");"click master selection"==ua.targetMorph.name&&(cb="click");Ga.refreshButtons();
if(!Ga.target)return Wb.return();rb=$jscomp.makeIterator(["auto","hover","click"]);for(pb=rb.next();!pb.done;pb=rb.next())Ta=pb.value,Ga.target.master&&Ga.target.master[Ta]&&!Ga.get(Ta+" master checkbox").checked&&Ga.adjustMasterComponent(Ta,null);if(!cb)return Wb.jumpTo(0);Ua=Ga;ob=Ua.openMenu;return Wb.yield(Ga.getMastersMenu(cb),3)}ob.call(Ua,Wb.yieldResult,ua);Wb.jumpToEnd()})}},{key:"getMastersMenu",value:function(ua){var Ga=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){return 1==
cb.nextAddress?cb.yield(Promise.all([].concat($jscomp.arrayFromIterable(Object.keys(Db.resolvedMasters)),[Ga.world().name]).map(function(rb){var pb,Ta,Ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ob){return 1==ob.nextAddress?(pb=rb,Ta=Ga,Ua=Ta.componentsToMenu,ob.yield(Db.resource("styleguide://"+rb+"/").dirList(),2)):ob.return([pb,Ua.call(Ta,ob.yieldResult,ua)])})})),2):cb.return(cb.yieldResult)})}},{key:"componentsToMenu",value:function(ua,Ga,cb,rb){var pb=this;cb=void 0===cb?
null:cb;rb=void 0===rb?1:rb;cb||(cb=ua.map(function(Ua){return{name:Db.arr.last(Ua.name.split("/")),path:Ua.name.split("/"),value:Ua}}));if(0==cb.length||100<rb)return[];var Ta=this;return Db.arr.flatten(Object.entries(Db.arr.groupBy(cb,function(Ua){return Ua.path[rb-1]})).map(function(Ua){var ob=$jscomp.makeIterator(Ua);Ua=ob.next().value;ob=ob.next().value;var Wb=$jscomp.makeIterator(Db.arr.partition(ob,function(lc){return lc.path.length<=rb}));ob=Wb.next().value;Wb=Wb.next().value;Ua=[Ua,pb.componentsToMenu(null,
Ga,Wb,rb+1)];return[].concat($jscomp.arrayFromIterable(ob.map(function(lc){return[lc.name,function(){Ta.adjustMasterComponent(Ga,lc.value)}]})),$jscomp.arrayFromIterable(Ua[1].length?[Ua]:[]))}),1)}},{key:"getComponentSelectionMenu",value:function(ua){var Ga=this,cb,rb,pb,Ta,Ua,ob;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wb){if(1==Wb.nextAddress)return cb=Ga.world().metadata.commit.name,rb=Db.resource("styleguide://"+cb+"/"),Wb.yield(rb.dirList(),2);if(3!=Wb.nextAddress)return pb=
Wb.yieldResult,Wb.yield(Db.resource("styleguide://System/").dirList(),3);Ta=Wb.yieldResult;Ua=Ga.componentsToMenu(pb,ua);ob=Ga.componentsToMenu(Ta,ua);return Wb.return([].concat($jscomp.arrayFromIterable(0<Ua.length?[].concat($jscomp.arrayFromIterable(Ua),[{isDivider:!0}]):[]),$jscomp.arrayFromIterable(ob)))})}},{key:"adjustMasterComponent",value:function(ua,Ga){if(this.target.master)this.target.master[ua]=Ga;else if(Ga){var cb={};this.target.master=(cb[ua]=Ga,cb)}ua=this.target.master;Ga=ua.hover;
cb=ua.click;ua.auto||Ga||cb||(this.target.master=null);this.update();this.target.withAllSubmorphsDo(function(rb){return delete rb._parametrizedProps});this.target.requestMasterStyling()}},{key:"componentsToMenu",value:function(ua,Ga,cb,rb){var pb=this;cb=void 0===cb?null:cb;rb=void 0===rb?1:rb;cb||(cb=ua.map(function(Ua){return{name:Db.arr.last(Ua.name.split("/")),path:Ua.name.split("/"),value:Ua}}));if(0==cb.length||100<rb)return[];var Ta=this;return Db.arr.flatten(Object.entries(Db.arr.groupBy(cb,
function(Ua){return Ua.path[rb-1]})).map(function(Ua){var ob=$jscomp.makeIterator(Ua);Ua=ob.next().value;ob=ob.next().value;var Wb=$jscomp.makeIterator(Db.arr.partition(ob,function(lc){return lc.path.length<=rb}));ob=Wb.next().value;Wb=Wb.next().value;Ua=[Ua,pb.componentsToMenu(null,Ga,Wb,rb+1)];return[].concat($jscomp.arrayFromIterable(ob.map(function(lc){return[lc.name,function(){Ta.adjustMasterComponent(Ga,lc.value)}]})),$jscomp.arrayFromIterable(Ua[1].length?[Ua]:[]))}),1)}},{key:"update",value:function(){if(this.target){for(var ua=
$jscomp.makeIterator(["auto","hover","click"]),Ga=ua.next();!Ga.done;Ga=ua.next()){Ga=Ga.value;var cb=this.getSubmorphNamed(Ga+" master selection"),rb=this.getSubmorphNamed(Ga+" master checkbox");Db.Path(["master",Ga]).get(this.target)?rb.checked=!0:rb.checked=!1;cb.label=Db.string.truncateLeft(Db.Path(["master",Ga,"name"]).get(this.target)||"select master",15,"...")}this.refreshButtons()}}},{key:"refreshButtons",value:function(){for(var ua=$jscomp.makeIterator(["auto","hover","click"]),Ga=ua.next();!Ga.done;Ga=
ua.next()){Ga=Ga.value;var cb=this.getSubmorphNamed(Ga+" master selection"),rb=this.getSubmorphNamed(Ga+" master checkbox");cb=cb.deactivated=!rb.checked;this.getSubmorphNamed(Ga+" master selection").opacity=cb?.5:1}ua=this.getSubmorphNamed("overridden props list");ua.items=this.getOverriddenProps();this.getSubmorphNamed("clear overridden prop button").deactivated=!ua.selection}},{key:"getMasterForTarget",value:function(){if(this.target.isMorph)return[this.target].concat($jscomp.arrayFromIterable(this.target.ownerChain())).map(function(ua){return ua.master}).find(Boolean)}},
{key:"clearSelectedProperty",value:function(){var ua=this.getSubmorphNamed("overridden props list").selection;this.getMasterForTarget().clearOverriddenPropertiesFor(this.target,[ua]);this.refreshButtons()}},{key:"getOverriddenProps",value:function(){var ua=this.getMasterForTarget();return ua&&ua._overriddenProps?(ua=ua._overriddenProps.get(this.target))?Object.keys(ua):[]:[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MasterComponentControl"}}],Zb,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MasterComponentControl",version:"0.1.1-108"}}},{start:315,end:6096})}(Db.Morph);sb=Db.MasterComponentControl;Db.default=sb}}});
