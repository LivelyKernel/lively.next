System.register("./__root_module__-7d3cbdeb.js kld-intersections ./index-f2f18556.js ./index-00525174.js ./editor-plugin-0bd751e4.js ./editor-plugin-43860d5b.js ./index-c8d23f92.js ./index-950339af.js ./index-03442661.js".split(" "),function(){var Ka,wb,Ab,gc,Kb,Zc,Kc,md,Fc,Bc,Nc,Uc,ce,Zd,pe,Mc,Kd,Jb,Dc,nd,Hc,wd,Qd,Eb,ic,jd,jc,kd,vb,db,ec;return{setters:[function(Mb){Ka=Mb.i;wb=Mb.M;Ab=Mb.t;gc=Mb.e;Kb=Mb.b;Zc=Mb.f;Kc=Mb.c;md=Mb.o;Fc=Mb.C;Bc=Mb.$;Nc=Mb.a;Uc=Mb.m;ce=Mb.bE;Zd=Mb.J;pe=Mb.bB;Mc=Mb.bz;
Kd=Mb.I;Jb=Mb.af;Dc=Mb.R;nd=Mb.bF;Hc=Mb._;wd=Mb.ax;Qd=Mb.ac;Eb=Mb.a0;ic=Mb.p;jd=Mb.Z;jc=Mb.d},function(){},function(Mb){kd=Mb.e;vb=Mb.s;db=Mb.I},function(){},function(Mb){ec=Mb.I},function(){},function(){},function(){},function(){}],execute:function(){function Mb(ua){var V=ua.sourceObj,ra=ua.targetObj;V.isMorph&&ra.isMorph?(V.show(),ra.show(),Fb.showConnector&&Fb.showConnector(V,ra)):Fb.show(String(ua))}function Hb(ua){var V=ua.sourceObj,ra=ua.sourceAttrName,ja=ua.targetObj,Ca=ua.targetMethodName,
va=ua.getConverter();ua=ua.getUpdater();return Fb.printConnectionElements(V,ra,ja,Ca,va,ua)}function pc(ua,V,ra,ja,Ca,va){ua="/* global connect, source, target */\nconnect(source, '"+V+"', target, '"+ja+"'";if(Ca||va)ua+=", {\n";Ca&&(ua+="  converter: "+Ca);Ca&&va&&(ua+=",");Ca&&(ua+="\n");va&&(ua+="  updater: "+va+"\n");if(Ca||va)ua+="}";return ua+");"}function Ma(ua,V){var ra;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ja){if(1==ja.nextAddress)return ja.yield(Fb.InteractiveMorphSelector.selectMorph(),
2);ra=ja.yieldResult;return ja.return(ra?Fb.interactiveConnectGivenSourceAndTarget(ua,V,ra):null)})}function Ib(ua,V,ra,ja){var Ca,va,cb,hc,gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oc){switch(Oc.nextAddress){case 1:Ca=ra&&ra.world().targetDataBindings(ra);va=ua.world();if(!Ca||!Ca.length)return va.setStatusMessage("connect canceled"),Oc.return();if(V){Oc.jumpTo(2);break}cb=[{isListItem:!0,string:"[Enter custom attribute..]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(Fb.arr.flatten(ua.world().targetDataBindings(ua)).map(function(Cb){return{isListItem:!0,
string:Cb.signature||Cb.name,value:Cb}})));return Oc.yield(va.listPrompt(["Select Source Attribute\n",{},"Choose the attribute of the morph that is supposed to invoke the connection. This can be a method, property or a custom signal that is invoked upon the morph.",{paddingTop:"10px",fontSize:14,textAlign:"left",fontWeight:"normal"}],cb,{filterable:!0}),3);case 3:V=Oc.yieldResult;if("canceled"==V.status)return Oc.return();V=V.selected[0];V=V.custom?"sourceAttribute":V.name;case 2:return hc=[{isListItem:!0,
string:"[Enter custom attribute...]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(Fb.arr.flatten(Ca).map(function(Cb){return{isListItem:!0,value:Cb,string:Cb.signature||Cb.name}}))),Oc.yield(va.listPrompt(["Select Target Attribute\n",{},"Choose the attribute of the morph that is supposed to invoked once the connection is triggered. This can be either a method or a property of the morph. When selecting a property, keep in mind that the value of the source attribute will be assigned to the property or passed to the method as an argument.",
{fontSize:14,textAlign:"left",fontWeight:"normal",paddingTop:"10px"}],hc,{filterable:!0}),4);case 4:gb=Oc.yieldResult;if("canceled"==gb.status)return Oc.return();gb=gb.selected[0];return Oc.yield(Fb.interactivelyEvaluateConnection({sourceObj:ua,sourceAttr:V,targetObj:ra,targetAttr:gb.custom?"targetAttribute":gb.name,onConnect:ja,prompt:"Edit and confirm connection:"}),0)}})}function pb(ua,V,ra,ja){V=void 0===V?"confirm connection":V;var Ca,va,cb,hc,gb,Oc,Cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gd){Ca=
ua;va=Ca.sourceObj;cb=Ca.sourceAttrName;hc=Ca.targetObj;gb=Ca.targetMethodName;Oc=ua.getConverter();Cb=ua.getUpdater();return Gd.return(Fb.interactivelyEvaluateConnection({sourceObj:va,sourceAttr:cb,targetObj:hc,targetAttr:gb,converter:Oc,updater:Cb,prompt:V,highlight:ra,onConnect:ja}))})}function Ub(ua,V,ra,ja,Ca){ja=void 0===ja?{}:ja;Ca=Fb.rect(0).sides.concat(Fb.rect(0).corners);ra=ra||new Fb.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Fb.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Fb.Color.transparent,
nativeCursor:"auto"},end:{fill:Fb.Color.orange}}},ja,{hasFixedPosition:!0}));ra.startPoint.attachTo(ua,"rightCenter");V.isMorph?(ja=V.globalBounds().partNameNearest(Ca,ua.globalPosition),ua.globalPosition.equals(V.globalBounds().partNamed(ja))&&V.globalBounds().partNameNearest(Fb.arr.without(Ca,ja),ua.globalPosition),ra.endPoint.attachTo(V,"leftCenter")):(Ca=ua.globalBounds().topRight().addPt(Fb.pt(100,0)),V=Fb.morph({type:"label",value:V.toString(),styleClasses:["Tooltip"],padding:Fb.rect(8,4)}).openInWorld(Ca),
V.position=ua.world().bounds().translateForInclusion(V.bounds()).topLeft(),Fb.once(ra,"remove",V,"remove"),ra.endPoint.attachTo(V,"leftCenter"));return ra}function dc(ua){var V,ra,ja,Ca,va,cb,hc,gb,Oc,Cb,Gd,Ec,oc,rb,Md,yb,qb,Ia,Q,za;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ta){switch(Ta.nextAddress){case 1:V=ua;ra=V.sourceObj;ja=V.sourceAttr;Ca=V.targetObj;va=V.targetAttr;cb=V.converter;hc=V.updater;gb=V.prompt;Oc=void 0===V.highlight?!0:V.highlight;Cb=V.onConnect;Gd="lively://lively.bindings-interactive-connect/x"+
ra.id;Ec={context:window,format:"esm",targetModule:Gd,classTransform:Fb.classToFunctionTransform};oc=Fb.printConnectionElements(ra,ja,Ca,va,cb,hc);Ca.isMorph&&ra.isMorph&&(rb=Ca.propertiesAndPropertySettings().properties[va]||{type:typeof Ca[va]},Md=rb.type,yb=ra.propertiesAndPropertySettings().properties[ja]||{type:typeof ra[ja]},qb=yb.type,qb!==Md&&(gb=["Edit and confirm connection:\n",{},"Source: ",{fontSize:14,fontWeight:"normal"},ra.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"},
"\nTarget: ",{fontSize:14,fontWeight:"normal"},Ca.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"}]));Ia={};Object.assign(lively.modules.module(Gd).recorder,(Ia.source=ra,Ia.target=Ca,Ia.connect=Fb.connect,Ia.once=Fb.once,Ia[ja]=ra[ja],Ia));if(!gb){Q=oc;Ta.jumpTo(2);break}return Ta.yield($world.editPrompt(gb,{input:oc,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:Ec,animated:!1}),3);case 3:if(Q=Ta.yieldResult,!Q)return $world.setStatusMessage("connect canceled"),
Ta.return();case 2:return Ta.yield(lively.vm.runEval(Q,Ec),4);case 4:za=Ta.yieldResult;if(za.isError)return $world.logError(za.value),Ta.return(dc({sourceObj:ra,sourceAttr:ja,targetObj:Ca,targetAttr:va,converter:cb,updater:hc,prompt:"confirm connection",highlight:Oc,onConnect:Cb}));Oc&&($world.setStatusMessage("connected!",Fb.Color.green),Fb.interactivelyShowConnection(za.value));"function"===typeof Cb&&Cb(za);Ta.jumpToEnd()}})}var vc=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");vc.Inspector=
ec;var gd=function(ua){var V=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),ra=V.hasOwnProperty("ProtoInspector")&&"function"===typeof V.ProtoInspector?V.ProtoInspector:V.ProtoInspector=function(ja){ja&&ja[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ka(ra,ua,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],
V,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(vc.Inspector);gd=vc.ProtoInspector;vc.default=gd;var Nb=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");Nb.Morph=wb;Nb.touchInputDevice=Ab;Nb.easings=gc;Nb.pt=Kb;Nb.fun=Zc;Nb.connect=Kc;vc=function(ua){var V=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),
ra=V.hasOwnProperty("MorphicSideBar")&&"function"===typeof V.MorphicSideBar?V.MorphicSideBar:V.MorphicSideBar=function(ja){ja&&ja[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ka(ra,ua,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",value:function(ja){ja=void 0===ja?!0:ja;if(this.respondsToVisibleWindow){var Ca=$world.visibleBounds(),va=navigator.standalone&&Nb.touchInputDevice?25:0;this.height=Ca.height-
va;this.top=va+Ca.top();va=this.get("horizontal resizer");va.height=this.height;va.top=0;ja&&(this.visible?this.topLeft=Ca.topLeft():this.topRight=Ca.topLeft())}}},{key:"switchMode",value:function(ja){"inspector"==ja&&this.showInspector();"connections"==ja&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=
!0}},{key:"toggle",value:function(ja){var Ca=this,va,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hc){switch(hc.nextAddress){case 1:va=$world.visibleBounds();cb=navigator.standalone&&Nb.touchInputDevice?25:0;Ca.height=va.height-cb;Ca.top=cb+va.top();if(ja)return $world.addMorph(Ca,$world.get("lively top bar")),Ca.topRight=va.topLeft(),Ca.attachToWorld($world),Ca.visible=!0,hc.yield(Ca.whenRendered(),5);Ca.detachFromWorld($world);return hc.yield(Ca.animate({opacity:0,topRight:va.topLeft(),
duration:300}),4);case 4:Ca.visible=!1;Ca.remove();hc.jumpTo(0);break;case 5:return Ca.onWorldResize(!1),Ca.get("scene graph").adjustProportions(),hc.yield(Ca.animate({opacity:1,easing:Nb.easings.outCirc,topLeft:va.topLeft(),duration:300}),6);case 6:Ca.get("scene graph").refresh(),hc.jumpToEnd()}})}},{key:"attachToWorld",value:function(ja){Nb.connect(ja,"onChange",this,"onHierarchyChange",{garbageCollect:!0});Nb.connect(ja,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});Nb.connect(ja,
"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(ja){var Ca=this;ja.attributeConnections.forEach(function(va){va.targetObj===Ca&&va.disconnect()})}},{key:"selectNode",value:function(ja){this.getSubmorphNamed("scene graph").selectMorphInTarget(ja);this.getSubmorphNamed("connections tree").inspectConnectionsOf(ja)}},{key:"onHierarchyChange",value:function(ja){var Ca=this,va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if("addMorphAt"===
ja.selector||"removeMorph"===ja.selector||"name"===ja.prop){va=Ca._sceneGraph||(Ca._sceneGraph=Ca.getSubmorphNamed("scene graph"));if(!va||!va.owner.visible||ja.target&&ja.target.isHand||ja.target&&va.ignoreMorph(ja.target)||ja.args&&!ja.args[0].isHalo&&va.ignoreMorph(ja.args[0])||ja.target.ownerChain().find(function(hc){return va.ignoreMorph(hc)}))return cb.return();Nb.fun.debounceNamed("scene-graph-update",50,function(){return va.refresh()})()}cb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],V,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-76"}}},{start:226,end:3668})}(Nb.Morph);vc=Nb.MorphicSideBar;Nb.default=vc;var Fb=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");
Fb.interactivelyShowConnection=Mb;Fb.printConnection=Hb;Fb.printConnectionElements=pc;Fb.interactiveConnectGivenSource=Ma;Fb.interactiveConnectGivenSourceAndTarget=Ib;Fb.interactivelyReEvaluateConnection=pb;Fb.visualizeConnection=Ub;Fb.interactivelyEvaluateConnection=dc;Fb.connect=Kc;Fb.once=md;Fb.Color=Fc;Fb.rect=Bc;Fb.pt=Kb;Fb.arr=Nc;Fb.morph=Uc;Fb.Leash=ce;Fb.showConnector=kd;Fb.show=vb;Fb.InteractiveMorphSelector=db;Fb.classToFunctionTransform=Zd;Fb.interactivelyShowConnection=Mb;Fb.interactivelyShowConnection=
Mb;Fb.printConnection=Hb;Fb.printConnection=Hb;Fb.printConnectionElements=pc;Fb.printConnectionElements=pc;Fb.interactiveConnectGivenSource=Ma;Fb.interactiveConnectGivenSource=Ma;Fb.interactiveConnectGivenSourceAndTarget=Ib;Fb.interactiveConnectGivenSourceAndTarget=Ib;Fb.interactivelyReEvaluateConnection=pb;Fb.interactivelyReEvaluateConnection=pb;Fb.visualizeConnection=Ub;Fb.visualizeConnection=Ub;Fb.interactivelyEvaluateConnection=dc;Fb.interactivelyEvaluateConnection=dc;var sb=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");
sb.Tree=pe;sb.TreeData=Mc;sb.morph=Uc;sb.Icon=Kd;sb.HorizontalLayout=Jb;sb.easings=gc;sb.Morph=wb;sb.Color=Fc;sb.Rectangle=Dc;sb.rect=Bc;sb.pt=Kb;sb.connect=Kc;sb.noUpdate=nd;sb.disconnect=Hc;sb.disconnectAll=wd;sb.once=md;sb.arr=Nc;sb.num=Qd;sb.fun=Zc;sb.tree=Eb;sb.promise=ic;sb.ConnectionHalo=_missingExportShim;sb.getClassName=jd;vc=function(ua){var V=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),ra=V.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof V.InteractiveTreeContainer?
V.InteractiveTreeContainer:V.InteractiveTreeContainer=function(ja){ja&&ja[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ka(ra,ua,[{key:"onChildRemoved",value:function(ja){}},{key:"onChildAdded",value:function(ja){}},{key:"toggleSelected",value:function(ja){if(this.tree){var Ca=this.tree,va=Ca.selectionFontColor,cb=Ca.nonSelectionFontColor;this.submorphs.filter(function(hc){return!hc._isControlElement&&hc.styleClasses.includes("Label")}).forEach(function(hc){hc.fontColor=
ja?va:cb})}}},{key:"onGrab",value:function(ja){var Ca=this.tree,va=this.node;this.fill=sb.Color.gray.withA(.5);this.fontColor=Ca.selectionFontColor;this.opacity=.8;Ka._get(Object.getPrototypeOf(ra.prototype),"onGrab",this).call(this,ja);va&&(this.toggleSelected(!1),Ca.collapse(va),Ca.treeData.parentNode(va).container.onChildRemoved(this),this._data=Ca.treeData.remove(va),va.container.target.remove(),Ca.update(!0))}},{key:"wantsToBeDroppedOn",value:function(ja){this.showPreviewOn(ja);return!0}},{key:"showPreviewOn",
value:function(ja){if(ja.isContainer)var Ca=ja.tree;ja.isTree&&(Ca=ja);Ca&&Ca.showDropPreviewFor&&Ca.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(ja){var Ca=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(va){if(1==va.nextAddress)return Ca.tree.treeData.add(ja._data,Ca.node,Ca.node.children[0]),Ca.tree.uncollapse(Ca.node),Ca.tree.treeData.remove(Ca.tree._previewNode),va.yield(Ca.tree.whenRendered(),2);Ca.tree.update(!0);Ca.onChildAdded(ja);va.jumpToEnd()})}},{key:"onBeingDroppedOn",
value:function(ja,Ca){var va=this;this.tree._dropInProgress=!0;Ka._get(Object.getPrototypeOf(ra.prototype),"onBeingDroppedOn",this).call(this,ja,Ca);ja=function(){va.fill=sb.Color.gray.withA(.5);va.opacity=1;va.tree._dropInProgress=!1;va.tree.refresh()};Ca.isTree?Ca.insertAtPlaceholder(this).then(ja):Ca.isContainer?Ca.insertAsChild(this).then(ja):ja()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:sb.Color.transparent},
isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var ja=this,Ca=this.tree.treeData;return Ca&&Ca.asList().find(function(va){return va.container===ja})}}}}}],V,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1105"}}},{start:498,end:2961})}(sb.Morph);sb.InteractiveTreeContainer=
vc;sb.InteractiveTreeContainer=vc;sb.InteractiveTreeContainer=vc;vc=function(ua){var V=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),ra=V.hasOwnProperty("InteractiveTreeData")&&"function"===typeof V.InteractiveTreeData?V.InteractiveTreeData:V.InteractiveTreeData=function(ja){ja&&ja[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ka(ra,ua,[{key:"display",value:function(ja){return[ja.container||"<NO CONTAINER>",{}]}},
{key:"isCollapsed",value:function(ja){return ja.isCollapsed}},{key:"collapse",value:function(ja,Ca){ja.isCollapsed=Ca}},{key:"getChildren",value:function(ja){var Ca=this;return ja.isLeaf?null:ja.children.filter(function(va){return va&&(Ca.filterActive?va.visible:!0)})}},{key:"isLeaf",value:function(ja){var Ca=this;return!ja.children||0==ja.children.filter(function(va){return va&&(Ca.filterActive?va.visible:!0)}).length}},{key:"add",value:function(ja,Ca,va){Ca=void 0===Ca?this.root:Ca;Ca.children||
(Ca.children=[]);va?sb.arr.pushAt(Ca.children,ja,Ca.children.indexOf(va)):Ca.children.push(ja);Ca.isLeaf=!1}},{key:"replace",value:function(ja,Ca){var va=this.parentNode(ja);ja=va.children.indexOf(ja);va.children[ja]=Ca}},{key:"next",value:function(ja){var Ca=this.parentNode(ja);return Ca&&Ca.children[Ca.children.indexOf(ja)+1]}},{key:"isBefore",value:function(ja,Ca){this.next(ja)===Ca}},{key:"isAfter",value:function(ja,Ca){this.next(Ca)===ja}},{key:"addBefore",value:function(ja,Ca){this.add(ja,this.parentNode(Ca),
Ca)}},{key:"addAfter",value:function(ja,Ca){var va=this.parentNode(Ca);Ca=va.children.indexOf(Ca)+1;this.add(ja,va,va.children[Ca])}},{key:"remove",value:function(ja){var Ca=this.parentNode(ja);if(Ca)return sb.arr.remove(Ca.children,ja),Ca.children==[]&&(Ca.children=null),ja}},{key:"filter",value:function(ja,Ca){Ca=void 0===Ca?1:Ca;var va=this,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hc){if(1==hc.nextAddress)return hc.yield(va.uncollapseAll(function(gb,Oc){return Oc<Ca+1}),2);
cb=va.filterActive;va.filterActive=!1;va.asListWithIndexAndDepth(!1).reverse().forEach(function(gb){var Oc=gb.node;if(0==gb.depth)return Oc.visible=!0;Oc.visible=ja(Oc);Oc.visible||Oc.isCollapsed||!Oc.children.find(function(Cb){return Cb.visible})?Oc.container.opacity=1:(Oc.visible=!0,Oc.container.opacity=.5);return Oc.visible});va.filterActive=cb;hc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],V,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1105"}}},{start:2970,end:5433})}(sb.TreeData);sb.InteractiveTreeData=vc;sb.InteractiveTreeData=vc;sb.InteractiveTreeData=vc;vc=function(ua){var V=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),ra=V.hasOwnProperty("InteractiveTree")&&"function"===typeof V.InteractiveTree?V.InteractiveTree:
V.InteractiveTree=function(ja){ja&&ja[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ka(ra,ua,[{key:"update",value:function(ja){var Ca=this;Ka._get(Object.getPrototypeOf(ra.prototype),"update",this).call(this,ja);this.treeData&&this.relayoutContainers();ja&&this.embeddedMorphs.forEach(function(va){va.isContainer&&(va.fill=sb.Color.transparent,va.fontFamily=Ca.fontFamily,va.fontSize=Ca.fontSize)})}},{key:"onDrop",value:function(ja){Ka._get(Object.getPrototypeOf(ra.prototype),
"onDrop",this).call(this,ja);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(ja){}},{key:"onDropHoverUpdate",value:function(ja){}},{key:"onDropHoverOut",value:function(ja){}},{key:"onHoverOut",value:function(ja){var Ca=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(va){Ka._get(Object.getPrototypeOf(ra.prototype),"onHoverOut",Ca).call(Ca,ja);Ca._previewNode&&Ca._previewNode.container.world()&&Ca.treeData.remove(Ca._previewNode);Ca.resetContainerSelection();
Ca.update(!0);va.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(ja){var Ca=this,va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==cb.nextAddress)return va=Ca.treeData.parentNode(Ca._previewNode),Ca.treeData.replace(Ca._previewNode,ja._data),Ca.treeData.remove(Ca._previewNode),cb.yield(Ca.whenRendered(),2);Ca.update(!0);va.container.onChildAdded(ja);cb.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var ja=this;if(!this._scrollingUp){this._scrollingUp=!0;var Ca=
function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(va){if(1==va.nextAddress)return ja._scrollingUp&&0<ja.scroll.y?va.yield(ja.animate({scroll:ja.scroll.subXY(0,30),duration:300,easing:sb.easings.linear}),3):(ja._scrollingUp=!1,va.jumpTo(0));Ca();va.jumpToEnd()})};Ca()}}},{key:"scrollDownSlowly",value:function(){var ja=this;if(!this._scrollingDown){this._scrollingDown=!0;var Ca=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(va){if(1==va.nextAddress)return ja._scrollingDown&&
ja.scroll.y<ja.scrollExtent.y-ja.height?va.yield(ja.animate({scroll:ja.scroll.addXY(0,30),duration:300,easing:sb.easings.linear}),3):(ja._scrollingDown=!1,va.jumpTo(0));Ca();va.jumpToEnd()})};Ca()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(ja){ja.isContainer&&(ja.fill=sb.Color.transparent)})}},{key:"showDropPreviewFor",value:function(ja){var Ca=this;ja=this.localize(ja.globalBounds().center());
var va=this.textPositionFromPoint(ja),cb=this.treeData.asListWithIndexAndDepth(function(Ec){Ec=Ec.node;return Ec!=Ca._previewNode&&Ec.container.world()}),hc=(cb.find(function(Ec){return Ec.i-1===va.row})||{}).node,gb=hc&&hc.container,Oc=this.ensurePlaceholder(),Cb=!!Oc.container.world(),Gd=ja.subPt(this.scroll).subPt(this.scrollbarOffset);10>Gd.y?this.scrollUpSlowly():Gd.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!gb){if(cb.length>va.row||
sb.arr.last(this.treeData.root.children)===Oc)return;this.treeData.remove(Oc);this.treeData.add(Oc);this.update(!0)}if(gb){cb=this.textLayout.boundsFor(this,va);if(4>Math.abs(cb.top()-ja.y)){if(this.treeData.isBefore(Oc,hc))return;this.treeData.remove(Oc);this.treeData.addBefore(Oc,hc)}else if(4>Math.abs(cb.bottom()-ja.y)&&(hc.isCollapsed||this.treeData.isLeaf(hc))){if(this.treeData.isAfter(Oc,hc))return;this.treeData.remove(Oc);this.treeData.addAfter(Oc,hc)}else{gb.fill=sb.Color.gray;if(!Cb)return;
this.treeData.remove(Oc)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var ja=sb.pt(this.width-100,this.document.getLine(0).height);this._previewNode||(this._previewNode={container:sb.morph({acceptsDrops:!1,reactsToPointer:!1,fill:sb.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=ja;return this._previewNode}},{key:"relayoutContainers",value:function(){var ja=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,
0).map(function(Ca){return Ca.height});this.treeData.asListWithIndexAndDepth().forEach(function(Ca){var va=Ca.node;Ca=Ca.i;va.container.nativeCursor="grab";va.container.width=ja.width-25-va.container.left;va.container.toggleSelected&&va.container.toggleSelected(Ca==ja.selectedIndex)});this.anchors.forEach(function(Ca){return Ca.position=Ca.position})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTree"}}],V,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1105"}}},{start:5442,end:10816})}(sb.Tree);sb.InteractiveTree=vc;sb.InteractiveTree=vc;sb.InteractiveTree=vc;vc=function(ua){var V=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),ra=V.hasOwnProperty("SceneGraphTree")&&"function"===typeof V.SceneGraphTree?V.SceneGraphTree:V.SceneGraphTree=function(ja){ja&&ja[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Ka(ra,ua,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(ja){var Ca=this.treeData.asList().find(function(va){return va.container.target===ja});Ca&&this.selectedNode!=Ca&&this.selectPath(this.treeData.pathOf(Ca))}},{key:"onLoad",value:function(){var ja=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){if(1==Ca.nextAddress)return Ca.yield(ja.whenRendered(),2);if(3!=Ca.nextAddress){if(ja.ownerChain().find(function(va){return va.isComponent}))return Ca.return();
ja.submorphs=[];return Ca.yield(ja.whenRendered(),3)}ja.get("inspector").makeEditorVisible(!0);ja.get("inspector").makeEditorVisible(!1);ja.setTarget($world);Ca.jumpToEnd()})}},{key:"adjustProportions",value:function(ja){ja=(ja?ja.state.dragDelta:{y:0}).y;var Ca=this.get("inspector"),va=this.get("scene graph resizer"),cb=this.get("mode selector"),hc=this.get("connections tree");this.height+=ja;Ca.height-=ja;hc.height-=ja;va.top=this.bottom;va.left=0;cb.top=va.bottom;hc.top=Ca.top=cb.bottom+5}},{key:"reset",
value:function(){var ja=this;this.treeData=new sb.InteractiveTreeData({children:[],container:sb.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(Ca){return null==Ca.id}).forEach(function(Ca){return ja.removeAnchor(Ca)})}},{key:"setTarget",value:function(ja){this.target=ja;this.treeData=this.getTreeFromSubmorphHierarchy(ja);this.uncollapse(this.treeData.root)}},{key:"isNodeOutOfSync",value:function(ja){var Ca=this;if(ja===this._previewNode)return!1;
if(ja.container.nameNeedsUpdate)return!0;var va=ja.container.target.submorphs.filter(function(cb){return!Ca.ignoreMorph(cb)});return va.length!=ja.children.length||va.map(function(cb){return cb.name}).join("")!=ja.children.map(function(cb){return cb.target?cb.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(ja){var Ca=this,va=ja.container.target.submorphs.map(function(Cb){return Cb.__scene_graph_target__?Cb.__scene_graph_target__():Cb}).filter(function(Cb){return!Ca.ignoreMorph(Cb)}),
cb=[],hc={},gb;for(gb in va){hc.$jscomp$loop$prop$m$2825=va[gb];var Oc=sb.arr.without(ja.children,this._previewNode).find(function(Cb){return function(Gd){return Gd.container.target.id==Cb.$jscomp$loop$prop$m$2825.id}}(hc));cb[gb]=Oc?Oc:this.readMorphHierarchy(hc.$jscomp$loop$prop$m$2825);hc={$jscomp$loop$prop$m$2825:hc.$jscomp$loop$prop$m$2825}}return cb}},{key:"refresh",value:function(){var ja=this;if(!this._updating&&!this._dropInProgress){var Ca=!1;sb.tree.prewalk(this.treeData.root,function(va){ja.isNodeOutOfSync(va)&&
(Ca=!0,va.name=va.container.target.name,va.container.refresh(),va.children=ja.getNewChildren(va))},function(va){return va.children});this.update(Ca)}}},{key:"ignoreMorph",value:function(ja){return ja.isMorph?ja.isContainer||ja.isWindow||ja.getWindow()||ja.isEpiMorph||ja.isHand||["lively.halos"].includes(ja.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler","UserFlap","Menu","CommentIndicator"].includes(ja.constructor.name):!1}},{key:"onDropHoverOut",value:function(ja){var Ca=
ja.hand.grabbedMorphs[0];ja=ja.hand.findDropTarget();if(!(ja===this||ja&&ja.ownerChain().includes(this))&&Ca&&Ca.isContainer)Ca.onDragOutside()}},{key:"onDropHoverIn",value:function(ja){var Ca=ja.hand.grabbedMorphs[0];Ca&&!Ca.isContainer&&($world.halos().forEach(function(va){return va.remove()}),Ca.remove(),Object.assign(Ca,ja.hand._grabbedMorphProperties.get(Ca).pointerAndShadow),Ca=this.renderContainerFor(Ca,!1),ja.hand.grab(Ca),Ca.leftCenter=sb.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",
value:function(ja){return new sb.InteractiveTreeData(this.readMorphHierarchy(ja))}},{key:"readMorphHierarchy",value:function(ja){var Ca=this;return sb.tree.mapTree(ja,function(va,cb){return{name:va.name,isCollapsed:!0,container:Ca.renderContainerFor(va),visible:!0,children:cb}},function(va){return va.submorphs.filter(function(cb){return va.isWorld?!Ca.ignoreMorph(cb):!0})})}},{key:"renderContainerFor",value:function(ja,Ca){ja=void 0===ja?sb.morph({name:"root"}):ja;Ca=void 0===Ca?!0:Ca;var va=new sb.MorphContainer({tree:this,
fill:Ca?sb.Color.transparent:sb.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:ja,opacity:ja.visible?1:.5});Ca||(va.layout=new sb.HorizontalLayout({spacing:2,align:"center"}));ja._data?(va._data=ja._data,ja._data.container=va):va._data={name:ja.name,isCollapsed:!0,container:va,children:[]};return va}},{key:"collapseAll",value:function(){var ja=this;this.treeData.asList().forEach(function(Ca){return Ca!=ja.treeData.root?Ca.isCollapsed=!0:Ca.isCollapsed=
!1})}},{key:"filterMorphs",value:function(ja){var Ca=this,va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==cb.nextAddress)return va=ja.tokens[0],Ca.treeData.filterActive||(Ca._collapseState=new WeakMap(Ca.treeData.asList().map(function(hc){return[hc,hc.isCollapsed]}))),Ca.treeData.filterActive=!!va,cb.yield(Ca.treeData.filter(function(hc){var gb=!va||hc.container.target.name.includes(va);hc.container.highlightTerm(va);return gb},3),2);Ca.treeData.filterActive||Ca.treeData.asList().forEach(function(hc){return hc.isCollapsed=
Ca._collapseState.has(hc)?Ca._collapseState.get(hc):!0});Ca.refresh();cb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],V,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1105"}}},{start:10825,
end:17474})}(sb.InteractiveTree);sb.SceneGraphTree=vc;sb.SceneGraphTree=vc;sb.SceneGraphTree=vc;vc=function(ua){var V=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),ra=V.hasOwnProperty("MorphContainer")&&"function"===typeof V.MorphContainer?V.MorphContainer:V.MorphContainer=function(ja){ja&&ja[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ka(ra,ua,[{key:"refresh",value:function(){var ja=this,Ca,va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){Ca=
ja.target;if(!Ca)return cb.return();ja.reactsToPointer=!0;ja.dropShadow=!1;ja.submorphs=[ja.getLabel(),0<Ca.comments.length&&ja.getCommentControls(),Ca.layout&&ja.getLayoutControls(),ja.getConnectionControls()].filter(Boolean).map(function(hc,gb){hc.fitIfNeeded();hc.left=va?va.right+5:0;hc.top=2;return va=hc});ja.height=20;ja.opacity=Ca.visible?1:.5;cb.jumpToEnd()})}},{key:"getLabel",value:function(){var ja=this.getSubmorphNamed("name label")||sb.morph({type:"label",name:"name label",reactsToPointer:!1,
padding:sb.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),Ca=ja.textString.slice(2,-1);Ca&&Ca==this.target.name||(ja.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return ja}},{key:"getIcon",value:function(ja){return sb.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[sb.getClassName(ja)]||"codepen",{paddingTop:"4px",
fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var ja=this.getSubmorphNamed("layout label")||sb.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:sb.Rectangle.inset(4,2,4,2),fill:sb.Color.orange,fontColor:sb.Color.white});ja._isControlElement=!0;ja.textString!=this.target.layout.name()&&(ja.value=this.target.layout.name());return ja}},{key:"getCommentControls",value:function(){var ja=this.getSubmorphNamed("comment label")||sb.morph({type:"label",
name:"comment label",tooltip:"Open comment browser to browse all comments",borderRadius:3,acceptsDrops:!1,padding:sb.Rectangle.inset(4,2,4,2),fill:sb.Color.rgb(241,196,15),fontColor:sb.Color.black});ja._isControlElement=!0;var Ca=this.target.comments.length+" comment"+(1==this.target.comments.length?"":"s");ja.textString!=Ca&&(ja.value=Ca);return ja}},{key:"getConnectionControls",value:function(){this.connectionCount=this.target.attributeConnections?this.target.attributeConnections.filter(function(va){return!va.targetObj.isHalo}).length:
0;var ja=this.getSubmorphNamed("connections label")||sb.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:sb.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:sb.Color.red,fontColor:sb.Color.white});ja._isControlElement=!0;ja.visible=!this.connectionHalo&&!!this.connectionCount;var Ca=this.connectionCount?this.connectionCount+" connection"+(1<this.connectionCount?"s":""):"Manage Connections";ja.textString!=Ca&&(ja.value=Ca);return ja}},{key:"highlightTerm",value:function(ja){var Ca=
this.submorphs[0],va=Ca.textAndAttributes.slice(0,2),cb=Ca.textString.slice(1).split(ja);Ca.textAndAttributes=1===cb.length?[].concat($jscomp.arrayFromIterable(va),[cb[0]]):[].concat($jscomp.arrayFromIterable(va),$jscomp.arrayFromIterable(sb.arr.flatten(sb.arr.interpose(cb.map(function(hc){return[hc,{}]}),[ja,{fontWeight:"900"}]))))}},{key:"getClassControls",value:function(){}},{key:"wantsToBeDroppedOn",value:function(ja){var Ca=Ka._get(Object.getPrototypeOf(ra.prototype),"wantsToBeDroppedOn",this).call(this,
ja);if(![ja].concat($jscomp.arrayFromIterable(ja.ownerChain())).includes(this.tree))this.onDragOutside();return Ca}},{key:"onGrab",value:function(ja){var Ca=this,va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==cb.nextAddress)return Ca.tree._dropInProgress=!0,va=Ca.target.globalPosition,Ka._get(Object.getPrototypeOf(ra.prototype),"onGrab",Ca).call(Ca,ja),Ca._data.globalTargetPosition=va,cb.yield(Ca.whenRendered(),2);if(Ca.tree.fullContainsWorldPoint(Ca.globalPosition))Ca.leftCenter=
sb.pt(-20,0);else Ca.onDragOutside();Ca.tree._dropInProgress=!1;cb.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=sb.fun.createQueue("container-hover-queue",function(ja,Ca){var va,cb,hc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){if(1==gb.nextAddress)return va=ja.target,cb=va.opacity,hc=va.scale,ja.target.opacity=0,ja.target.scale=.5,$world.halos().forEach(function(Oc){return Oc.remove()}),$world.firstHand.grab(ja.target),
ja.target._data=ja._data,ja.remove(),ja.target.position=sb.pt(0,0),gb.yield(ja.target.animate({opacity:cb,scale:hc,duration:200}),2);Ca();gb.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(ja){var Ca=this.node.children.indexOf(ja.node||ja._data)+1;Ca=this.node.children[Ca];ja.target.remove();Ca?(Ca=this.target.submorphs.indexOf(Ca.container.target),this.target.addMorphAt(ja.target,Ca)):this.target.addMorph(ja.target);ja._data.globalTargetPosition&&(ja.target.position=
this.target.localize(ja._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(ja){}},{key:"toggleConnectionControl",value:function(ja){this.getSubmorphNamed("connections label").visible=ja}},{key:"toggleSelected",value:function(ja){var Ca=this,va,cb,hc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){if(1==gb.nextAddress)return Ka._get(Object.getPrototypeOf(ra.prototype),"toggleSelected",Ca).call(Ca,ja),Ca._active===ja?gb.return():(Ca._active=ja)&&Ca.target&&Ca.target.isMorph&&
Ca.world()?gb.yield(Ca.target.whenRendered(),3):gb.jumpTo(0);Ca.get("inspector").targetObject=Ca.target;Ca.get("connections tree").inspectConnectionsOf(Ca.target);if(Ca.connectionHalo)return gb.return();va=$jscomp.makeIterator(Ca.world().halos());for(cb=va.next();!cb.done;cb=va.next()){hc=cb.value;if(hc.target===Ca.target)return gb.return();hc.remove()}sb.noUpdate({sourceObj:Ca.world(),targetObj:Ca.sideBar,sourceAttribute:"showHaloFor",targetAttribute:"selectNode"},function(){return Ca.world().showHaloFor(Ca.target)});
gb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(ja){this.submorphs[0].fontFamily=ja}},fontColor:{after:["submorphs"],derived:!0,set:function(ja){this.submorphs[0].fontColor=ja}},fontSize:{derived:!0,set:function(ja){this.submorphs[0].fontSize=ja}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,
get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],V,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"InteractiveTree",version:"0.1.1-1105"}}},{start:17483,end:25901})}(sb.InteractiveTreeContainer);sb.MorphContainer=vc;sb.MorphContainer=vc;sb.MorphContainer=vc;var Ea=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");Ea.visualizeConnection=function(ua,V,ra,ja,Ca){ja=void 0===ja?{}:ja;Ca=Ea.rect(0).sides.concat(Ea.rect(0).corners);ra=ra||new Ea.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Ea.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Ea.Color.transparent,
nativeCursor:"auto"},end:{fill:Ea.Color.orange}}},ja,{hasFixedPosition:!0}));ra.startPoint.attachTo(ua,"rightCenter");V.isMorph?(ja=V.globalBounds().partNameNearest(Ca,ua.globalPosition),ua.globalPosition.equals(V.globalBounds().partNamed(ja))&&V.globalBounds().partNameNearest(Ea.arr.without(Ca,ja),ua.globalPosition),ra.endPoint.attachTo(V,"leftCenter")):(Ca=ua.globalBounds().topRight().addPt(Ea.pt(100,0)),V=Ea.morph({type:"label",value:V.toString(),styleClasses:["Tooltip"],padding:Ea.rect(8,4)}).openInWorld(Ca),
V.position=ua.world().bounds().translateForInclusion(V.bounds()).topLeft(),Ea.once(ra,"remove",V,"remove"),ra.endPoint.attachTo(V,"leftCenter"));return ra};Ea.startConnecting=function(ua,V){ua.animate({opacity:.8,duration:300});ua.startPoint.attachTo(V,"center");ua.vertices[0].position=Ea.pt(2,2)};Ea.stopConnecting=function(ua,V,ra,ja){function Ca(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){if(1==gb.nextAddress)return gb.yield(ua.animate({opacity:0,duration:300}),2);ua.startPoint.clearConnection();
ua.endPoint.clearConnection();ua.remove();gb.jumpToEnd()})}ja=void 0===ja?!1:ja;var va,cb,hc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){return 1==gb.nextAddress?(va=ua,cb=va.endPoint,(hc=cb.connectedMorph)&&"MorphContainer"==Ea.getClassName(hc)&&(hc=hc.target),hc?gb.yield(Ea.interactiveConnectGivenSourceAndTarget(ra,ja,hc),2):gb.jumpTo(2)):gb.yield(Ca(),0)})};Ea.editConnection=function(ua){var V=ua.connection,ra=ua.connectionPoint,ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){if(1==
Ca.nextAddress)return ja=Ea.visualizeConnection(ra,V.targetObj,!1,{borderColor:Ea.Color.gray.darker(),endpointStyle:{start:{fill:Ea.Color.transparent,nativeCursor:"auto"},end:{fill:Ea.Color.gray.darker()}}}),Ca.yield(Ea.interactivelyReEvaluateConnection(V,"Edit Connection",!1),2);ja.remove();Ca.jumpToEnd()})};Ea.Tree=pe;Ea.TreeData=Mc;Ea.Icon=Kd;Ea.morph=Uc;Ea.pt=Kb;Ea.Rectangle=Dc;Ea.rect=Bc;Ea.Color=Fc;Ea.arr=Nc;Ea.connect=Kc;Ea.signal=jc;Ea.Leash=ce;Ea.once=md;Ea.interactivelyReEvaluateConnection=
pb;Ea.interactiveConnectGivenSource=Ma;Ea.interactiveConnectGivenSourceAndTarget=Ib;Ea.getClassName=jd;(function(ua){var V=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),ra=V.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof V.ConnectionsTreeData?V.ConnectionsTreeData:V.ConnectionsTreeData=function(ja){ja&&ja[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ka(ra,ua,[{key:"parseMorphConnections",value:function(ja){for(var Ca=
{},va=$jscomp.makeIterator(void 0===ja.attributeConnections?[]:ja.attributeConnections),cb=va.next();!cb.done;cb=va.next())cb=cb.value,cb.targetObj.isHalo||(Ca[cb.sourceAttrName]=Ca[cb.sourceAttrName]||[{name:["      New Connection  ",{fontColor:Ea.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(ja,cb.sourceAttrName),{}]}],Ea.arr.pushAt(Ca[cb.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(cb)))},0));return{children:Object.entries(Ca).map(function(hc){var gb=
$jscomp.makeIterator(hc);hc=gb.next().value;gb=gb.next().value;return{name:[hc,{fontWeight:"bold"}," ",{},Ea.morph({fill:Ea.Color.white,opacity:.7,value:""+(gb.length-1),borderRadius:15,fontWeight:"bold",padding:Ea.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:gb}}).concat([{name:["New Connection  ",{fontColor:Ea.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(ja),{}]}])}}},{key:"renderExistingConnection",value:function(ja){var Ca=this,va=Ea.morph({type:"label",fontColor:Ea.Color.gray,
fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(Ea.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},ja.targetMethodName,{}])}),cb=this.renderDeadPin(),hc=cb.submorphs[0];Ea.connect(va,"onHoverIn",function(){va.fontColor=Ea.Color.orange;va._leash=Ea.visualizeConnection(hc,ja.targetObj,va._leash);hc.fill=Ea.Color.orange;hc.border={color:Ea.Color.orange,width:3}});Ea.connect(va,"onMouseDown",function(gb){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oc){if(1==
Oc.nextAddress)return gb.stop(),Oc.yield(Ea.interactivelyReEvaluateConnection(ja),2);Ea.signal(Ca,"refresh");Oc.jumpToEnd()})});Ea.connect(va,"onHoverOut",function(){va.fontColor=Ea.Color.gray;hc.fill=Ea.Color.gray;hc.border={color:Ea.Color.white,width:1};va._leash.remove();va._leash=void 0});return[va,{},"  ",{}].concat($jscomp.arrayFromIterable(Ea.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){ja.disconnect();Ea.signal(Ca,"refresh")}})),["  ",{},cb,{}])}},{key:"renderDeadPin",
value:function(){var ja=Ea.morph({type:"ellipse",fill:Ea.Color.gray,extent:Ea.pt(10,10),center:Ea.pt(8,12),borderWidth:1});return Ea.morph({extent:Ea.pt(20,20),fill:Ea.Color.transparent,reactsToPointer:!1,submorphs:[ja]})}},{key:"renderPin",value:function(ja,Ca){var va=this,cb=Ea.morph({type:"ellipse",fill:Ea.Color.gray.withA(.5),extent:Ea.pt(10,10),center:Ea.pt(8,12),draggable:!1,borderWidth:1}),hc=new Ea.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:Ea.Color.gray.darker(),
endpointStyle:{fill:Ea.Color.gray.darker()},position:Ea.pt(1,1),vertices:[Ea.pt(0,0),Ea.pt(0,0)],getLabelFor:function(gb){return"MorphContainer"==Ea.getClassName(gb)?gb.target.name:gb.name},canConnectTo:function(gb){return"MorphContainer"==Ea.getClassName(gb)||2>Ea.arr.intersect([gb].concat($jscomp.arrayFromIterable(gb.ownerChain())),[cb].concat($jscomp.arrayFromIterable(cb.ownerChain()))).length}});cb.addMorph(hc);Ea.connect(hc.endPoint,"onDragStart",function(){Ea.startConnecting(hc,cb)});Ea.connect(hc.endPoint,
"onDragEnd",function(gb){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oc){if(1==Oc.nextAddress)return cb.center=Ea.pt(8,12),Oc.yield(Ea.stopConnecting(hc,cb,ja,Ca),2);Ea.signal(va,"refresh");Oc.jumpToEnd()})});return Ea.morph({extent:Ea.pt(20,20),fill:Ea.Color.transparent,reactsToPointer:!1,submorphs:[cb]})}},{key:"display",value:function(ja){return ja.name}},{key:"collapse",value:function(ja,Ca){ja.isCollapsed=Ca}},{key:"isCollapsed",value:function(ja){return ja.isCollapsed}},{key:"isLeaf",
value:function(ja){return!ja.children}},{key:"getChildren",value:function(ja){return ja.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(ja){var Ca=new this;Ca.root=Ca.parseMorphConnections(ja);return Ca}}],V,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",
version:"0.1.1-16"}}},{start:3534,end:8251})})(Ea.TreeData);vc=function(ua){var V=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),ra=V.hasOwnProperty("ConnectionsTree")&&"function"===typeof V.ConnectionsTree?V.ConnectionsTree:V.ConnectionsTree=function(ja){ja&&ja[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ka(ra,ua,[{key:"inspectConnectionsOf",value:function(ja){if(this.targetMorph=ja)this.treeData=Ea.ConnectionsTreeData.for(ja),
Ea.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=Ea.ConnectionsTreeData.for(this.targetMorph),Ea.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},{key:"properties",get:function(){return{}}}],V,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8268,end:8821})}(Ea.Tree);vc=Ea.ConnectionsTree;Ea.default=vc}}});