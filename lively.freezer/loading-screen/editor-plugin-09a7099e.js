System.register(["./__root_module__-19078926.js","./index-8d38b85c.js","./editor-plugin-3b752fd9.js","./index-1f89e652.js"],function(ya){var wb,Ab,ac,Ob,kd,Cc,qd,Dc,Ic,Qc,Bd,ne,ve,Wd,Ub,wc,od,Tb,xd,Fd,ic,rc,Gb,oc;return{setters:[function(Hc){wb=Hc.aw;Ab=Hc.bA;ac=Hc.bB;Ob=Hc.bC;kd=Hc.E;Cc=Hc.au;qd=Hc.aY;Dc=Hc.a7;Ic=Hc.ae;Qc=Hc.bn;Bd=Hc.a6;ne=Hc.$;ve=Hc.bD;Wd=Hc.bu},function(Hc){Ub=Hc.s},function(Hc){wc=Hc.p;od=Hc.d;Tb=Hc.a;xd=Hc.r;Fd=Hc.C},function(Hc){ic=Hc.localInterface;rc=Hc.systemInterfaceNamed;
Gb=Hc.serverInterfaceFor;oc=Hc.l2lInterfaceFor}],execute:function(){var Hc=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js");Hc.warnStyle={"border-bottom":"2px dotted orange"};Hc.errorStyle={"background-color":"red"};var ad=function(nb){var Y=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js"),Ba=Y.hasOwnProperty("JavaScriptChecker")&&"function"===typeof Y.JavaScriptChecker?Y.JavaScriptChecker:Y.JavaScriptChecker=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return wb(Ba,nb,[{key:"uninstall",value:function(P){var na=P.text||P;(na.markers||[]).forEach(function(Sa){return Sa.id.startsWith("js-checker-")&&na.removeMarker(Sa)});na.removeMarker("js-syntax-error")}},{key:"hasEmbeddedMorphInRange",value:function(P,na){return[].concat($jscomp.arrayFromIterable(P.embeddedMorphMap.values())).find(function(Sa){return na.containsPosition(Sa.anchor.position)})}},{key:"onDocumentChange",value:function(P,na,Sa){var hb=na.document;try{var cc=Sa.parse()}catch(Uc){cc=
Uc}cc&&(P=(na.markers||[]).filter(function(Uc){return Uc.id.startsWith("js-checker-")}),Sa=Sa.undeclaredVariables().map(function(Uc,Xb){var Db=Uc.start;Uc=Uc.end;Db=hb.indexToPosition(Db);Uc=hb.indexToPosition(Uc);return na.addMarker({id:"js-checker-"+Xb,style:Hc.warnStyle,range:{start:Db,end:Uc},type:"js-undeclared-var"})}),P.slice(Sa.length).forEach(function(Uc){return na.removeMarker(Uc)}),cc.parseError?(P=cc.parseError.loc,Sa=P.column,P=P.line-1,cc=hb.indexToPosition(cc.parseError.pos),Sa=cc.column,
P=cc.row,cc={start:{column:Sa-1,row:P},end:{column:Sa+1,row:P}},this.hasEmbeddedMorphInRange(na,cc)||na.addMarker({id:"js-syntax-error",range:cc,style:Hc.errorStyle,type:"js-syntax-error"})):na.removeMarker("js-syntax-error"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptChecker"}}],Y,{pathInPackage:function(){return"js/checker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:126,end:1896})}(void 0),dd=ad=Hc.JavaScriptChecker;Hc.default=ad;var ec=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js");ec.query=Ab;ec.fuzzyParse=ac;ec.acorn=Ob;ec.custom=kd;var jb=function(nb){var Y=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js"),Ba=Y.hasOwnProperty("JavaScriptNavigator")&&"function"===typeof Y.JavaScriptNavigator?Y.JavaScriptNavigator:Y.JavaScriptNavigator=function(P){P&&P[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wb(Ba,nb,[{key:"ensureAST",value:function(P){return this.parse(P.textString)}},{key:"parse",value:function(P){return ec.fuzzyParse(P)}},{key:"move",value:function(P,na){var Sa=!!na.activeMark||!na.selection.isEmpty(),hb=na.selection,cc=na.positionToIndex(hb.lead);P=this[P](na.textString,cc);P=na.indexToPosition(P);hb.lead=P;Sa||(hb.anchor=P);na.scrollCursorIntoView()}},{key:"forwardSexp",value:function(P){this.move("_forwardSexp",
P)}},{key:"backwardSexp",value:function(P){this.move("_backwardSexp",P)}},{key:"backwardUpSexp",value:function(P){this.move("_backwardUpSexp",P)}},{key:"forwardDownSexp",value:function(P){this.move("_forwardDownSexp",P)}},{key:"_forwardSexp",value:function(P,na){P=this.parse(P);P=ec.custom.findNodesIncluding(P,na).reverse().find(function(hb){return hb.end!==na});if(!P)return na;if("BlockStatement"===P.type){var Sa=P.body.find(function(hb){return hb.start>na});if(Sa)return Sa.start}return P.end}},
{key:"_backwardSexp",value:function(P,na){P=this.parse(P);P=ec.custom.findNodesIncluding(P,na).reverse().find(function(hb){return hb.start!==na});if(!P)return na;if("BlockStatement"===P.type){var Sa=P.body.slice().reverse().find(function(hb){return hb.end<na});if(Sa)return Sa.end}return P?P.start:na}},{key:"_backwardUpSexp",value:function(P,na){P=this.parse(P);return(P=ec.custom.findNodesIncluding(P,na).reverse().find(function(Sa){return Sa.start!==na}))?P.start:na}},{key:"_forwardDownSexp",value:function(P,
na){P=this.parse(P);return(P=ec.custom.findNodeAfter(P,na,function(Sa,hb){return hb.start>na}))?P.node.start:na}},{key:"markDefun",value:function(P){var na=this.rangeForFunctionOrDefinition(P.textString,[P.positionToIndex(P.selection.range.start),P.positionToIndex(P.selection.range.end)]);na&&P.execCommand("expandRegion",{start:na[0],end:na[1]})}},{key:"rangeForNodesMatching",value:function(P,na,Sa){P=this.parse(P);return(na=ec.custom.findNodesIncluding(P,na).reverse().find(Sa))?[na.start,na.end]:
null}},{key:"rangeForFunctionOrDefinition",value:function(P,na){var Sa=na[0]===na[1];return this.rangeForNodesMatching(P,na[1],function(hb){return["AssignmentExpression","FunctionDeclaration","FunctionExpression","MethodDefinition"].includes(hb.type)&&(Sa&&hb.end!==na[1]||!Sa&&hb.start<na[0])?!0:!1})}},{key:"resolveIdentifierAt",value:function(P,na){"number"!==typeof na&&(na=P.positionToIndex(na));P=this.ensureAST(P);var Sa=ec.query.nodesAt(na,P).reverse(),hb=Sa.find(function(Uc){return"Identifier"===
Uc.type});if(!hb&&((Sa=Sa[0])&&Sa.type.includes("Specifier")&&Sa.local&&"Identifier"===Sa.local.type&&(hb=Sa.local),!hb))return;na=(Sa=ec.query.findDeclarationClosestToIndex(P,hb.name,na))?ec.query.scopeAtIndex(P,Sa.start):ec.query.scopeAtIndex(P,na);var cc=ec.query.findReferencesAndDeclsInScope(na,hb.name).refs;return{parsed:P,scope:na,id:hb,name:hb.name,decl:Sa,refs:cc}}},{key:"expandRegion",value:function(P,na,Sa,hb){function cc(vd){vd=P.positionToIndex({column:0,row:Xb.row});return{range:[vd+
Db.start,vd+Db.start+Db.value.length],prev:hb}}var Uc=hb.range[0]!==hb.range[1],Xb=P.indexToPosition(hb.range[0]),Db=P.tokenAt(Xb);if(!Uc&&Db&&["keyword","identifier"].includes(Db.type))return cc();Sa=Sa||this.parse(na);na=ec.query.nodesAtIndex(Sa,hb.range[0]).reverse().find(function(vd){return vd.start<hb.range[0]||vd.end>hb.range[1]});if(!na)return hb;Sa=na.start;Uc=na.end;return"Literal"===na.type&&(na.raw||"").match(/^['"`]/)&&hb.range[0]!==na.start&&hb.range[1]!==na.end&&(na.start+1<hb.range[0]||
na.end-1>hb.range[1])?{range:[Sa+1,Uc-1],prev:hb}:{range:[Sa,Uc],prev:hb}}},{key:"contractRegion",value:function(P,na,Sa,hb){return hb.prev||hb}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptNavigator"}}],Y,{pathInPackage:function(){return"js/navigator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:121,
end:6780})}(void 0);ad=jb=ec.JavaScriptNavigator;ec.default=jb;var yb=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js");yb.addIndexToTextPos=function(nb,Y,Ba){return nb.indexToPosition(nb.positionToIndex(Y)+Ba)};yb.connect=Cc;yb.disconnect=qd;yb.string=Dc;yb.KeyHandler=Ic;yb.Range=Qc;jb=function(nb){var Y=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js"),Ba=Y.hasOwnProperty("Snippet")&&"function"===typeof Y.Snippet?Y.Snippet:Y.Snippet=function(P){P&&P[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wb(Ba,nb,[{key:Symbol.for("lively-instance-initialize"),value:function(P){P=void 0===P?{trigger:null,expansion:""}:P;var na=P.expansion;this.trigger=P.trigger;this.expansion=na;this.resetExpansionState()}},{key:"isTextSnippet",get:function(){return!0}},{key:"attach",value:function(P){this.isExpanding&&(this.textMorph=P,yb.connect(this.textMorph,"selectionChange",this,"onCursorMove"))}},{key:"detach",value:function(P){this.isExpanding&&
(yb.disconnect(P,"selectionChange",this,"onCursorMove"),this.textMorph=null)}},{key:"onCursorMove",value:function(){var P=this.expansionState,na=P.startAnchor,Sa=P.endAnchor;P.isExpanding?yb.Range.fromPositions(na.position,Sa.position).containsPosition(this.textMorph.cursorPosition)||this.resetExpansionState():this.resetExpansionState()}},{key:"resetExpansionState",value:function(){var P=this.textMorph;if(P){var na=this.expansionState||{},Sa=na.marker,hb=na.startAnchor,cc=na.endAnchor;na=na.steps;
hb&&P.removeAnchor(hb);cc&&P.removeAnchor(cc);Sa&&P.removeMarker(Sa);na.forEach(function(Uc){return P.removeAnchor(Uc.anchor)})}this.expansionState={stepIndex:-1,steps:[],isExpanding:!1,startMarker:null,endMarker:null};P&&P.removePlugin(this)}},{key:"isExpanding",get:function(){return this.expansionState.isExpanding}},{key:"createExpansionSteps",value:function(P){var na=[],Sa=0;yb.string.reMatches(P,/\$[0-9]+|\$\{[0-9]+:[^\}]*\}/g).forEach(function(hb){var cc=hb.start,Uc=hb.end;hb=hb.match;var Xb=
"";hb.startsWith("${")?(Xb=$jscomp.makeIterator(hb.match(/^\$\{([0-9]+):([^\}]*)\}/)),Xb.next(),hb=Xb.next().value,Xb=Xb.next().value,hb=Number(hb)):hb=Number(hb.replace(/^\$/,""));P=P.slice(0,cc-Sa)+Xb+P.slice(Uc-Sa);na[hb]={index:cc-Sa,prefill:Xb,anchor:null};Sa+=Uc-cc-Xb.length});return{steps:na,expansion:P}}},{key:"expandAtCursor",value:function(P){var na=P.selection,Sa=P.cursorPosition.column,hb=this.expansion;this.trigger&&(Sa-=this.trigger.length);if(Sa=Math.max(0,Sa))hb=yb.string.lines(hb),
hb=[hb[0]].concat($jscomp.arrayFromIterable(hb.slice(1).map(function(bd){return yb.string.indent(bd," ",Sa)}))),hb=hb.join("\n");var cc=this.createExpansionSteps(hb);hb=cc.expansion;cc=cc.steps;this.trigger&&na.growLeft(this.trigger.length);na.text=hb;var Uc=na.start;hb=na.end;na.collapseToEnd();if(cc.length){var Xb=yb.string.newUUID();cc.forEach(function(bd,cb){return bd.anchor=P.addAnchor(Object.assign({id:"snippet-step-"+cb+"-"+Xb},yb.addIndexToTextPos(P,Uc,bd.index)))});var Db=P.addAnchor(Object.assign({id:"snippet-start-"+
Xb},Uc,{insertBehavior:"stay"})),vd=P.addAnchor(Object.assign({id:"snippet-end-"+Xb},hb));this.expansionState={marker:P.addMarker({id:"snippet-marker-"+Xb,get range(){return{start:Db.position,end:vd.position}},style:{"border-radius":"4px","background-color":"rgba(30, 200, 140, 0.3)","box-shadow":"0 0 4px rgba(30, 200, 140, 0.3)","pointer-events":"none",content:"fooooo"}}),startAnchor:Db,endAnchor:vd,stepIndex:0,steps:cc,isExpanding:!0};P.addPlugin(this);this.nextStep()}}},{key:"nextStep",value:function(){var P=
this.expansionState,na=P.steps,Sa=this.textMorph;if(P.isExpanding&&Sa){Sa=Sa.selection;P=na[P.stepIndex];var hb=P.prefill;Sa.lead=Sa.anchor=P.anchor.position;Sa.growRight(hb.length);this.expansionState.stepIndex++;this.expansionState.stepIndex>=na.length&&(this.resetExpansionState(),console.log("[snippet] expansion of "+this.expansion+" done"))}}},{key:"canExpand",value:function(P,na){na=P.positionToIndex(P.cursorPosition);return P.textString.slice(na-this.trigger.length,na)===this.trigger}},{key:"tryTrigger",
value:function(P,na){if(!this.canExpand(P,P.cursorPosition))return!1;this.expandAtCursor(P);return!0}},{key:"getCommands",value:function(P){var na=this;return P.concat([{name:"[snippet] next expansion step",exec:function(Sa){na.nextStep();return!0}},{name:"[snippet] cancel expansion",exec:function(Sa){na.resetExpansionState();return!0}}])}},{key:"getKeyHandlers",value:function(P){return P.concat(yb.KeyHandler.withBindings([{keys:"Tab",command:"[snippet] next expansion step"},{keys:"Escape",command:"[snippet] cancel expansion"}]))}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Snippet"}}],Y,{pathInPackage:function(){return"text/snippets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:357,end:6029})}(void 0);yb.Snippet=jb;yb.Snippet=jb;yb.Snippet=jb;var Ja=[{name:"get snippets",exec:function(nb){return nb.pluginCollect("getSnippets",[])}}];yb.snippetCommands=
Ja;yb.snippetCommands=Ja;yb.snippetCommands=Ja;var Ta=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js");Ta.buildEvalOpts=function(nb,Y){return nb.plugins.find(function(Ba){return Ba.isJSEditorPlugin}).sanatizedJsEnv(Y)};Ta.Snippet=jb;Ja=function(nb){var Y=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Ba=Y.hasOwnProperty("ModuleTopLevelVarCompleter")&&"function"===typeof Y.ModuleTopLevelVarCompleter?Y.ModuleTopLevelVarCompleter:Y.ModuleTopLevelVarCompleter=function(P){P&&
P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wb(Ba,nb,[{key:"compute",value:function(P,na){var Sa,hb,cc,Uc,Xb,Db;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vd){if(1==vd.nextAddress){hb=(Sa=P.pluginFind(function(bd){return bd.isJSEditorPlugin}))&&Sa.systemInterface();if(!hb)return vd.return([]);cc=Ta.buildEvalOpts(P);Uc=cc.targetModule;return"local"===hb.name?(Xb=Object.getOwnPropertyNames(hb.getModule(Uc).recorder),
vd.jumpTo(2)):vd.yield(hb.runEval('\n        var result, livelySystem = typeof System !== "undefined"\n                      && System.get(System.decanonicalize("lively-system-interface"));\n        if (livelySystem) {\n          result = JSON.stringify(\n            Object.getOwnPropertyNames(livelySystem.localInterface.getModule("'+Uc+'").recorder));\n        } else {\n          var G = typeof window !== "undefined" ?\n            window : typeof global !== "undefined" ? global : this;\n          result = JSON.stringify(Object.getOwnPropertyNames(G));\n        }\n        result;\n      ',
{targetModule:"lively://module-recorder-completer"}),3)}if(2!=vd.nextAddress){Db=vd.yieldResult;if(Db.isError)return vd.return([]);Xb=JSON.parse(Db.value)}Xb=Xb.filter(function(bd){return!bd.startsWith("defVar_")&&!["System","__currentLivelyModule","initializeES6ClassForLively","_moduleExport","_moduleImport"].includes(bd)});return vd.return(Xb.map(function(bd){return{priority:1100,completion:bd}}))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleTopLevelVarCompleter"}}],
Y,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:227,end:1700})}(void 0);Ta.ModuleTopLevelVarCompleter=Ja;Ta.ModuleTopLevelVarCompleter=Ja;Ta.ModuleTopLevelVarCompleter=Ja;Ja=function(nb){var Y=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Ba=Y.hasOwnProperty("DynamicJavaScriptCompleter")&&
"function"===typeof Y.DynamicJavaScriptCompleter?Y.DynamicJavaScriptCompleter:Y.DynamicJavaScriptCompleter=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wb(Ba,nb,[{key:"isValidPrefix",value:function(P){return/\.[a-z0-9_]*$/i.test(P)}},{key:"isMethodCallCompletion",value:function(P){return P.endsWith(")")&&0<P.indexOf("(")}},{key:"isValidIdentifier",value:function(P){if("string"!==typeof P)return!1;this.isMethodCallCompletion(P)&&
(P=P.slice(0,P.indexOf("(")));return/^[a-z_\$][0-9a-z_\$]*$/i.test(P)?!0:!1}},{key:"wrapInBrackets",value:function(P){if(!isNaN(Number(P))||P.startsWith("Symbol."))return"["+P+"]";var na="";this.isMethodCallCompletion(P)&&(na=P.slice(P.indexOf("(")),P=P.slice(0,P.indexOf("(")));return'["'+P.replace(/"/g,'\\"')+'"]'+na}},{key:"compute",value:function(P){var na=this,Sa,hb,cc,Uc,Xb,Db,vd,bd,cb,xb,Bc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(mb){if(1==mb.nextAddress){Sa=P.selection;
Sa.isEmpty()?(hb=P.getLine(Sa.lead.row),hb=hb.slice(hb.lastIndexOf(":")+1,Sa.lead.column)):hb=Sa.text.slice(Math.max(0,Sa.text.indexOf(":")),0);if(!na.isValidPrefix(hb))return mb.return([]);Uc=(cc=P.pluginFind(function(Ec){return Ec.isJSEditorPlugin}))&&cc.systemInterface();if(!Uc)return mb.return([]);Xb=Ta.buildEvalOpts(P);return mb.yield(Uc.dynamicCompletionsForPrefix(Xb.targetModule,hb,Xb),2)}Db=mb.yieldResult;vd=Db.isError;bd=Db.value;cb=Db.completions;xb=Db.prefix;if(vd)return console.warn("javascript completer encountered error: "+
(bd.stack||bd)),mb.return([]);cb.reduce(function(Ec,Ac){Ac=$jscomp.makeIterator(Ac);Ac.next();Ac=Ac.next().value;return Ec+Ac.length},0);Bc=cb.reduce(function(Ec,Ac,ab){Ac=$jscomp.makeIterator(Ac);var La=Ac.next().value;Ac=Ac.next().value;return Ec.concat(Ac.map(function(gb){var Va=na.isValidIdentifier(gb);return{info:La,completion:gb,prefix:Va?xb:"."+xb,customInsertionFn:Va?na.isMethodCallCompletion(gb)?function(tc,ia,va,qb){ia=qb.start;qb=qb.end;tc=tc.replace(/\((.*)\)/,function(I){return"("+I.slice(1,
-1).split(", ").map(function(pa,Oa){return"${"+Oa+":"+pa+"}"}).join(", ")+")"});tc=new Ta.Snippet({expansion:tc});va.replace({start:ia,end:qb},"");tc.expandAtCursor(va)}:null:function(tc,ia,va,qb){tc=qb.start;qb=qb.end;ia={row:tc.row,column:tc.column-1};qb="."===va.textInRange({start:ia,end:tc})?{start:ia,end:qb}:{start:tc,end:qb};va.replace(qb,na.wrapInBrackets(gb))}}}))},[]);Bc.forEach(function(Ec,Ac){return Object.assign(Ec,{priority:2E3+Bc.length-Ac})});return mb.return(Bc)})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"DynamicJavaScriptCompleter"}}],Y,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1709,end:5085})}(void 0);Ta.DynamicJavaScriptCompleter=Ja;Ta.DynamicJavaScriptCompleter=Ja;Ta.DynamicJavaScriptCompleter=Ja;Ta.keywords="arguments boolean break case catch class const continue debugger default delete eval export import extends false true finally instanceof static super this throw typeof while with yield await Array Date eval function hasOwnProperty Infinity isFinite isNaN isPrototypeOf length Math NaN name Number Object prototype String toString undefined valueOf alert assign clearInterval clearTimeout decodeURI decodeURIComponent document encodeURI encodeURIComponent escape navigator parseFloat parseInt setInterval setTimeout window document requestAnimationFrame cancelAnimationFrame".split(" ");
Ja=function(nb){var Y=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Ba=Y.hasOwnProperty("JavaScriptKeywordCompleter")&&"function"===typeof Y.JavaScriptKeywordCompleter?Y.JavaScriptKeywordCompleter:Y.JavaScriptKeywordCompleter=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wb(Ba,nb,[{key:"compute",value:function(P,na){return Ta.keywords.map(function(Sa){return{completion:Sa,priority:0}})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"JavaScriptKeywordCompleter"}}],Y,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:6087,end:6225})}(void 0);Ta.JavaScriptKeywordCompleter=Ja;Ta.JavaScriptKeywordCompleter=Ja;Ta.JavaScriptKeywordCompleter=Ja;Ja=[new Ta.DynamicJavaScriptCompleter,new Ta.JavaScriptKeywordCompleter,
new Ta.ModuleTopLevelVarCompleter];Ta.completers=Ja;Ta.completers=Ja;Ta.completers=Ja;var Ka=lively.FreezerRuntime.recorderFor("lively.ide/js/snippets.js");Ka.Snippet=jb;var Fa=[["typef",'typeof ${0:object} === "function"$1'],["types",'typeof ${0:object} === "string"$1'],["typen",'typeof ${0:object} === "number"$1'],["typeu",'typeof ${0:object} === "undefined"$1'],["typenu",'typeof ${0:object} !== "undefined"$1'],["import",'import { ${0:name} } from "${1:module}";'],["importd",'import ${0:name} from "${1:module}";'],
["import*",'import * as ${0:name} from "${1:module}";'],["subclass","class ${0:name} extends ${1:base} {\n  constructor(${2:args}) {\n    super(${3:args})\n    $4\n  }\n}"],["class","class ${0:name} {\n  constructor(${1:args}) {\n    $2\n  }\n}"],["switch","switch (${0:expression}) {\n  case '${2:case}':\n    ${3:// code}\n    break;\n    $4\n    default:\n    ${1:// code}\n}"],["tryf","try {${0:/* code */}} finally {}"],["try","try {${0:/* code */}} catch (err) {}"],["do","do {${1:/* code */}} while (${0:/* condition */});"],
["fori","for (let ${0:prop} in ${1:obj}) {\n  ${2:obj[prop]}\n}"],["foro","for (let ${0:value} of ${1:iterable}) {\n  ${2:value}\n}"],["for-","for (let ${0:i} = ${1:list}.length; ${2:i}--; ) {\n  $3\n}"],["for","for (let ${0:i} = 0; ${1:i} < ${3:list}.length; ${2:i}++) {\n  $4\n}"],["Prom","new Promise((resolve, reject) => {$0})"],["keys","Object.keys($0)"],["assign","Object.assign(${0:dest}, ${1:source})"],["stringi","JSON.stringify(${0:object})"],["forE","forEach(${0:ea} => $1)"],["map","map(${0:ea} => $1)"],
["reduce","reduce((${1:all}, ${2:ea}) => {$3}, ${0:init})"],["from","Array.from(${0:list})"],["last","arr.last(${0:list})"],["pluck",'arr.pluck(${0:list}, "${1:key}")'],["sortBy","arr.sortBy(${0:list}, ($1) => $2)"],["join",'join("\\n")'],["con","connect(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["once","once(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["sig","signal(${0:source}, '${1:sourceAttr}', ${2:value});"],["ll","lively.lang."],["lls","lively.lang.string."],
["lla","lively.lang.arr."],["llo","lively.lang.obj."],["llf","lively.lang.fun."],["llp","lively.lang.promise."],["withA","withAllSubmorphsDo(ea => { return ${0:ea}; })"],["$w","$world"],["$m","$morph('${0:name}')"],["get",'get("${0:name}")'],["$","${$0}"],["cl","console.log($0)"],["cw","console.warn($0)"],["ce","console.error($0)"],["s","show(`$0`);"],["l2lC",'import L2LClient from "lively.2lively/client.js";\nlet l2lClient = L2LClient.default();$0'],["fun","function ${0:functionName}($1) {$2}"],
["fn","function($0) {$1}"],["f","($0) => $1"],["aw","await $0"]];Ka.snippets=Fa;Ka.snippets=Fa;Ka.snippets=Fa;var Xa=lively.FreezerRuntime.recorderFor("lively.ide/js/commands.js");Xa.getEvalEnv=function(nb){return(nb=nb.pluginFind(function(Y){return Y.isJSEditorPlugin}))?nb.evalEnvironment:null};Xa.setEvalEnv=function(nb,Y){(nb=nb.pluginFind(function(Ba){return Ba.isJSEditorPlugin}))&&Object.assign(nb.evalEnvironment,Y);return nb.evalEnvironment};Xa.pToI=function(nb,Y){return nb.positionToIndex(Y)};
Xa.iToP=function(nb,Y){return nb.indexToPosition(Y)};Xa.arr=Bd;Xa.promise=ne;Xa.string=Dc;Xa.show=Ub;Xa.Range=Qc;Xa.query=Ab;Xa.BaseVisitor=ve;Ka=[{name:"undefine variable",doc:"Finds the variable at cursor position (or position passed) and undefines it in the module toplevel scope.",exec:function(nb,Y){Y=void 0===Y?{varName:null,position:null}:Y;var Ba,P,na,Sa,hb,cc,Uc,Xb,Db,vd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bd){switch(bd.nextAddress){case 1:Ba=Y;P=Ba.varName;na=Ba.position;
if(!P){na||(na=nb.cursorPosition);Sa=nb.pluginInvokeFirst("getNavigator");hb=Sa.ensureAST(nb);cc=Xa.query.nodesAt(nb.positionToIndex(na),hb).reverse().find(function(cb){return"Identifier"===cb.type});if(!cc)return nb.showError(Error("no identifier found!")),bd.return(!0);P=cc.name}Y=nb.pluginFind(function(cb){return cb.isJSEditorPlugin}).sanatizedJsEnv();Uc='lively.modules.module("'+Y.targetModule+'").undefine("'+P+'")';bd.setCatchFinallyBlocks(2);return bd.yield(nb.doEval(null,Y,Uc),4);case 4:Xb=
bd.yieldResult;Db=Xb.error?Xb.error:Xb.isError?Xb.value:null;bd.leaveTryBlock(3);break;case 2:Db=vd=bd.enterCatchBlock();case 3:return Db?nb.showError(Db):nb.setStatusMessage(P+" undefined"),bd.return(!0)}})}},{name:"change doitContext",exec:function(nb){var Y,Ba,P,na,Sa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hb){if(1==hb.nextAddress)return Y=$jscomp,Ba=Y.makeIterator,hb.yield(nb.world().execCommand("select morph",{prompt:"select morph for doitContext",justReturn:!0,prependItems:["reset"],
filterFn:function(cc){return!cc.isUsedAsEpiMorph()}}),2);P=Ba.call(Y,hb.yieldResult);if(na=P.next().value)Sa="reset"===na,nb.doitContext=Sa?null:na,nb.setStatusMessage(Sa?"doitContext is now\n"+na:"doitContext reset");return hb.return(!0)})}},{name:"change eval backend",exec:function(nb,Y){Y=void 0===Y?{backend:void 0}:Y;var Ba,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(na){if(1==na.nextAddress)return Ba=Y,P=Ba.backend,void 0!==P?na.jumpTo(2):na.yield(nb.world().prompt("choose eval backend",
{historyId:"js-eval-backend-history"}),3);if(2!=na.nextAddress&&(P=na.yieldResult,!P))return nb.setStatusMessage("Canceled"),na.return(!0);"local"===P&&(P=null);nb.setStatusMessage("Eval backend is now "+(P||"local"));return na.return(Xa.setEvalEnv(nb,{remote:P}))})}},{name:"copy current module name to clipboard",exec:function(nb){var Y=nb.evalEnvironment.targetModule;nb.setStatusMessage(Y||"Cannot find module name");nb.env.eventDispatcher.killRing.add(nb);nb.env.eventDispatcher.doCopy(Y);return!0}}];
Xa.jsEditorCommands=Ka;Xa.jsEditorCommands=Ka;Xa.jsEditorCommands=Ka;var Ib=[{name:"[javascript] list errors and warnings",exec:function(nb){var Y,Ba,P,na,Sa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hb){if(1==hb.nextAddress){Y=(nb.markers||[]).filter(function(cc){cc=cc.type;return"js-undeclared-var"===cc||"js-syntax-error"===cc});if(!Y.length)return Xa.show("no warnings or errors"),hb.return(!0);Ba=Y.map(function(cc){var Uc=cc.range;return{isListItem:!0,string:"["+cc.type.split("-").slice(1).join(" ")+
"] "+nb.textInRange(Uc),value:Uc}});return hb.yield(nb.world().filterableListPrompt("jump to warning or error",Ba),2)}P=hb.yieldResult;na=$jscomp.makeIterator(P.selected);if(Sa=na.next().value)nb.saveMark(),nb.selection=Sa,nb.centerRow(Sa.start.row);return hb.return(!0)})}},{name:"[javascript] inject import",exec:function(nb,Y){Y=void 0===Y?{gotoImport:!1,insertImportAtCursor:!0}:Y;var Ba,P,na;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sa){switch(Sa.nextAddress){case 1:return Sa.yield(Xa.promise.delay(0),
2);case 2:return Sa.yield(System.import("lively.ide/js/import-helper.js"),3);case 3:return Ba=Sa.yieldResult,P=Ba.interactivelyInjectImportIntoText,Sa.yield(P(nb,Y),4);case 4:return(na=Sa.yieldResult)||nb.setStatusMessage("canceled"),Sa.return(na)}})}},{name:"[javascript] fix undeclared variables",exec:function(nb,Y){Y=void 0===Y?{ignore:[],autoApplyIfSingleChoice:!1,requester:nb}:Y;var Ba,P,na;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sa){if(1==Sa.nextAddress)return Sa.yield(System.import("lively.ide/js/import-helper.js"),
2);if(3!=Sa.nextAddress)return Ba=Sa.yieldResult,P=Ba.interactivlyFixUndeclaredVariables,Sa.yield(P(nb,Y),3);na=Sa.yieldResult;nb.focus();return Sa.return(na)})}},{name:"[javascript] remove unused imports",exec:function(nb,Y){Y=void 0===Y?{query:!0}:Y;var Ba,P,na;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sa){if(1==Sa.nextAddress)return Sa.yield(System.import("lively.ide/js/import-helper.js"),2);if(3!=Sa.nextAddress)return Ba=Sa.yieldResult,P=Ba.cleanupUnusedImports,Sa.yield(P(nb,
Y),3);na=Sa.yieldResult;nb.setStatusMessage(na);return Sa.return(!0)})}},{name:"[javascript] eslint report",exec:function(nb){var Y,Ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){if(1==P.nextAddress)return P.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);Y=P.yieldResult;Ba=Y.default;try{return P.return(Ba.reportOnMorph(nb))}catch(na){nb.showError(na)}P.jumpToEnd()})}},{name:"[javascript] eslint preview fixes",exec:function(nb){var Y,Ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){if(1==
P.nextAddress)return P.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);Y=P.yieldResult;Ba=Y.default;try{return P.return(Ba.previewFixesOnMorph(nb))}catch(na){nb.showError(na)}P.jumpToEnd()})}},{name:"[javascript] auto format code",handlesCount:!0,exec:function(nb,Y,Ba){function P(mb,Ec){Ec||(Ec=Xb(mb,{allowReturnOutsideFunction:!0}));var Ac=Xa.string.lineRanges(mb),ab=mb.split("\n"),La=[],gb=new Xa.BaseVisitor,Va=gb.visitVariableDeclaration;gb.visitVariableDeclaration=function(qb,
I,pa){if(1<qb.declarations.length)for(var Oa=Xa.string.findLineWithIndexInLineRanges(Ac,qb.start),ub=qb.declarations[0].start-Ac[Oa][0],Wb={},Jb=1;Jb<qb.declarations.length;Wb={$jscomp$loop$prop$actionType$2588:Wb.$jscomp$loop$prop$actionType$2588,$jscomp$loop$prop$arg$2589:Wb.$jscomp$loop$prop$arg$2589},Jb++){var yc=qb.declarations[Jb],Jc=Xa.string.findLineWithIndexInLineRanges(Ac,yc.start);if(Oa!==Jc){var Hd=ab[Jc].match(/\s*/)[0].length;Hd=ub-Hd;0!==Hd&&(yc=Xa.string.findLineWithIndexInLineRanges(Ac,
yc.end),Wb.$jscomp$loop$prop$actionType$2588=0<Hd?"insert":"delete",Wb.$jscomp$loop$prop$arg$2589=0<Hd?" ".repeat(Hd):-Hd,La.push.apply(La,$jscomp.arrayFromIterable(Xa.arr.range(Jc,yc).map(function(Ge){return function(Dd){return[Ge.$jscomp$loop$prop$actionType$2588,Ac[Dd][0],Ge.$jscomp$loop$prop$arg$2589]}}(Wb)))))}}return Va.call(gb,qb,I,pa)};gb.accept(Ec,{},[]);for(Ec=La.length;Ec--;){var tc=$jscomp.makeIterator(La[Ec]),ia=tc.next().value,va=tc.next().value;tc=tc.next().value;"insert"===ia?mb=mb.slice(0,
va)+tc+mb.slice(va):"delete"===ia&&(mb=mb.slice(0,va)+mb.slice(va+tc))}return mb}var na,Sa,hb,cc,Uc,Xb,Db,vd,bd,cb,xb,Bc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(mb){switch(mb.nextAddress){case 1:return na=Ba||Math.floor(nb.width/nb.defaultCharExtent().width),Y=Object.assign({printWidth:na,tabWidth:2,useTabs:!1,bracketSpacing:!1},Y),Sa=lively.modules.module,hb=System.normalizeSync("prettier/standalone.js"),mb.yield(Sa(hb).load({format:"global",instrument:!1}),2);case 2:return cc=
mb.yieldResult,mb.yield(Sa("lively.ast/lib/acorn-extension.js").load(),3);case 3:return mb.yield(Sa("lively.ast").load(),4);case 4:return Uc=mb.yieldResult,Xb=Uc.parse,mb.yield(Sa("lively.ast/lib/query.js").load(),5);case 5:return mb.yield(System.import("jsdiff",System.decanonicalize("lively.morphic")),6);case 6:return Db=mb.yieldResult,vd=nb.selection.isEmpty()?nb.documentRange:nb.selection.range,bd=nb.positionToIndex(vd.start),cb=nb.positionToIndex(vd.end),xb=cc.format(nb.textString,Object.assign({},
Y,{rangeStart:bd,rangeEnd:cb,parser:function(Ec,Ac,ab){return Xb(Ec,{allowReturnOutsideFunction:!0})}})),nb.undoManager.group(),Bc=Db.diffChars(nb.textString,xb),nb.applyJsDiffPatch(Bc),nb.selection.text=P(nb.selection.text),nb.undoManager.group(),mb.return(!0)}})}}];Xa.jsIdeCommands=Ib;Xa.jsIdeCommands=Ib;Xa.jsIdeCommands=Ib;var jc=[{name:"selectDefinition",readOnly:!0,bindKey:"Alt-.",exec:function(nb,Y){Y=nb.pluginInvokeFirst("getNavigator");if(!Y)return!0;Y=Y.resolveIdentifierAt(nb,nb.cursorPosition);
if(!Y||!Y.id)return Xa.show("No symbol identifier selected"),!0;if(!Y.decl)return Xa.show("Cannot find declaration of "+Y.name),!0;nb.saveMark();nb.selection={start:nb.indexToPosition(Y.decl.start),end:nb.indexToPosition(Y.decl.end)};nb.scrollCursorIntoView();return!0}},{name:"selectSymbolReferenceOrDeclarationNext",readOnly:!0,multiSelectAction:"single",exec:function(nb){nb.execCommand("selectSymbolReferenceOrDeclaration",{direction:"next"})}},{name:"selectSymbolReferenceOrDeclarationPrev",readOnly:!0,
multiSelectAction:"single",exec:function(nb){nb.execCommand("selectSymbolReferenceOrDeclaration",{direction:"prev"})}},{name:"selectSymbolReferenceOrDeclaration",doc:"Finds the name of the currently selected symbol and will use the JS ast to select references and declarations whose name matches the symbol in the current scope.",readOnly:!0,multiSelectAction:"single",exec:function(nb,Y){Y=void 0===Y?{direction:null}:Y;var Ba=nb.pluginInvokeFirst("getNavigator");if(!Ba)return!0;Ba=Ba.resolveIdentifierAt(nb,
nb.cursorPosition);if(!Ba||!Ba.refs)return Xa.show("No symbol identifier selected"),!0;var P=nb.selection;Ba=Ba.refs.map(function(Sa){var hb=Sa.end;return Xa.Range.fromPositions(Xa.iToP(nb,Sa.start),Xa.iToP(nb,hb))}).concat(Ba.decl?Xa.Range.fromPositions(Xa.iToP(nb,Ba.decl.start),Xa.iToP(nb,Ba.decl.end)):[]).sort(Xa.Range.compare);if(!Ba.length)return!0;var na=Ba.map(String).indexOf(String(P.range));if("next"===Y.direction||"prev"===Y.direction)-1===na&&Ba.length?Ba=[Ba[0]]:(Y=na+("next"===Y.direction?
1:-1),0>Y?Y=Ba.length-1:Y>=Ba.length&&(Y=0),Ba=[Ba[Y]]);Ba.forEach(function(Sa){var hb=P.selections.findIndex(function(Uc){return Uc.range.equals(Sa)}),cc=P.selections.length-1;-1<hb?Xa.arr.swap(P.selections,hb,cc):P.addRange(Sa,!1)});P.mergeSelections();return!0}}];Xa.astEditorCommands=jc;Xa.astEditorCommands=jc;Xa.astEditorCommands=jc;lively.modules&&!lively.FreezerRuntime&&lively.modules.module("lively.ide/js/editor-plugin.js").reload({reloadDeps:!1,resetEnv:!1});var lb=lively.FreezerRuntime.recorderFor("lively.ide/js/mode.js");
lb.expressionAllowed=function(nb,Y,Ba){return/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(Y.lastType)||"quasi"==Y.lastType&&/\{\s*$/.test(nb.string.slice(0,nb.pos-(Ba||0)))};lb.passIndent=wc;lb.defineMode=od;lb.defineMIME=Tb;lb.registerHelper=xd;lb.defaultConfig={indentUnit:2};lb.defaultParserConfig={name:"javascript",statementIndent:2,jsonld:!1,json:!1,typescript:!1,wordCharacters:/[\w$\xa1-\uffff]/,globalVars:[],localVars:[],doubleIndentSwitch:null};lb.defineMode("javascript",
function(nb,Y){function Ba(Hb,Kb,Gd){Tj=Hb;Fh=Gd;return Kb}function P(Hb,Kb){var Gd=Hb.next();if('"'==Gd||"'"==Gd)return Kb.tokenize=na(Gd),Kb.tokenize(Hb,Kb);if("."==Gd&&Hb.match(/^\d+(?:[eE][+\-]?\d+)?/))return Ba("number","number");if("."==Gd&&Hb.match(".."))return Ba("spread","meta");if(/[\[\]{}\(\),;:\.]/.test(Gd))return Ba(Gd);if("="==Gd&&Hb.eat(">"))return Ba("=>","operator");if("0"==Gd&&Hb.eat(/x/i))return Hb.eatWhile(/[\da-f]/i),Ba("number","number");if("0"==Gd&&Hb.eat(/o/i))return Hb.eatWhile(/[0-7]/i),
Ba("number","number");if("0"==Gd&&Hb.eat(/b/i))return Hb.eatWhile(/[01]/i),Ba("number","number");if(/\d/.test(Gd))return Hb.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),Ba("number","number");if("/"==Gd){if(Hb.eat("*"))return Kb.tokenize=Sa,Sa(Hb,Kb);if(Hb.eat("/"))return Hb.skipToEnd(),Ba("comment","comment");if(lb.expressionAllowed(Hb,Kb,1)){a:for(var Ad=Kb=!1;null!=(Gd=Hb.next());){if(!Kb){if("/"==Gd&&!Ad)break a;"["==Gd?Ad=!0:Ad&&"]"==Gd&&(Ad=!1)}Kb=!Kb&&"\\"==Gd}Hb.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);
return Ba("regexp","string-2")}Hb.eatWhile(cl);return Ba("operator","operator",Hb.current())}if("`"==Gd)return Kb.tokenize=hb,hb(Hb,Kb);if("#"==Gd)return Hb.skipToEnd(),Ba("error","error");if(cl.test(Gd))return">"==Gd&&Kb.lexical&&">"==Kb.lexical.type||Hb.eatWhile(cl),Ba("operator","operator",Hb.current());if(yj.test(Gd))return Hb.eatWhile(yj),Hb=Hb.current(),(Gd=bl.propertyIsEnumerable(Hb)&&bl[Hb])&&"."!=Kb.lastType?Ba(Gd.type,Gd.style,Hb):Ba("variable","variable",Hb)}function na(Hb){return function(Kb,
Gd){var Ad=!1,sf;if(Eh&&"@"==Kb.peek()&&Kb.match(Rj))return Gd.tokenize=P,Ba("jsonld-keyword","meta");for(;null!=(sf=Kb.next())&&(sf!=Hb||Ad);)Ad=!Ad&&"\\"==sf;Ad||(Gd.tokenize=P);return Ba("string","string")}}function Sa(Hb,Kb){for(var Gd=!1,Ad;Ad=Hb.next();){if("/"==Ad&&Gd){Kb.tokenize=P;break}Gd="*"==Ad}return Ba("comment","comment")}function hb(Hb,Kb){for(var Gd=!1,Ad;null!=(Ad=Hb.next());){if(!Gd&&("`"==Ad||"$"==Ad&&Hb.eat("{"))){Kb.tokenize=P;break}Gd=!Gd&&"\\"==Ad}return Ba("quasi","string-2",
Hb.current())}function cc(Hb,Kb){Kb.fatArrowAt&&(Kb.fatArrowAt=null);var Gd=Hb.string.indexOf("=>",Hb.start);if(!(0>Gd)){if(zj){var Ad=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Hb.string.slice(Hb.start,Gd));Ad&&(Gd=Ad.index)}Ad=0;var sf=!1;for(--Gd;0<=Gd;--Gd){var Tf=Hb.string.charAt(Gd),qi="([{}])".indexOf(Tf);if(0<=qi&&3>qi){if(!Ad){++Gd;break}if(0==--Ad){"("==Tf&&(sf=!0);break}}else if(3<=qi&&6>qi)++Ad;else if(yj.test(Tf))sf=!0;else{if(/["'\/]/.test(Tf))return;if(sf&&!Ad){++Gd;break}}}sf&&
!Ad&&(Kb.fatArrowAt=Gd)}}function Uc(Hb,Kb,Gd,Ad,sf,Tf){this.indented=Hb;this.column=Kb;this.type=Gd;this.prev=sf;this.info=Tf;null!=Ad&&(this.align=Ad)}function Xb(){for(var Hb=arguments.length-1;0<=Hb;Hb--)Ne.cc.push(arguments[Hb])}function Db(){Xb.apply(null,arguments);return!0}function vd(Hb){function Kb(Ad){for(;Ad;Ad=Ad.next)if(Ad.name==Hb)return!0;return!1}var Gd=Ne.state;Ne.marked="def";Gd.context?Kb(Gd.localVars)||(Gd.localVars={name:Hb,next:Gd.localVars}):!Kb(Gd.globalVars)&&Y.globalVars&&
(Gd.globalVars={name:Hb,next:Gd.globalVars})}function bd(){Ne.state.context={prev:Ne.state.context,vars:Ne.state.localVars};Ne.state.localVars=Em}function cb(){Ne.state.localVars=Ne.state.context.vars;Ne.state.context=Ne.state.context.prev}function xb(Hb,Kb){var Gd=function(){var Ad=Ne.state,sf=Ad.indented;if("stat"==Ad.lexical.type)sf=Ad.lexical.indented;else for(var Tf=Ad.lexical;Tf&&")"==Tf.type&&Tf.align;Tf=Tf.prev)sf=Tf.indented;Ad.lexical=new Uc(sf,Ne.stream.column(),Hb,null,Ad.lexical,Kb)};
Gd.lex=!0;return Gd}function Bc(){var Hb=Ne.state;Hb.lexical.prev&&(")"==Hb.lexical.type&&(Hb.indented=Hb.lexical.indented),Hb.lexical=Hb.lexical.prev)}function mb(Hb){function Kb(Gd){return Gd==Hb?Db():";"==Hb?Xb():Db(Kb)}return Kb}function Ec(Hb,Kb){return"var"==Hb?Db(xb("vardef",Kb.length),Zb,mb(";"),Bc):"keyword a"==Hb?Db(xb("form"),La,Ec,Bc):"keyword b"==Hb?Db(xb("form"),Ec,Bc):"{"==Hb?Db(xb("}"),Fe,Bc):";"==Hb?Db():"if"==Hb?("else"==Ne.state.lexical.info&&Ne.state.cc[Ne.state.cc.length-1]==
Bc&&Ne.state.cc.pop()(),Db(xb("form"),La,Ec,Bc,Ha)):"function"==Hb?Db(rb):"for"==Hb?Db(xb("form"),Ya,Ec,Bc):"variable"==Hb?zj&&"type"==Kb?(Ne.marked="keyword",Db(ee,mb("operator"),ee,mb(";"))):Db(xb("stat"),yc):"switch"==Hb?Db(xb("form"),La,mb("{"),xb("}","switch"),Fe,Bc,Bc):"case"==Hb?Db(Ac,mb(":")):"default"==Hb?Db(mb(":")):"catch"==Hb?Db(xb("form"),bd,mb("("),lc,mb(")"),Ec,Bc,cb):"class"==Hb?Db(xb("form"),Lc,Bc):"export"==Hb?Db(xb("stat"),rf,Bc):"import"==Hb?Db(xb("stat"),Eg,Bc):"module"==Hb?Db(xb("form"),
pg,mb("{"),xb("}"),Fe,Bc,Bc):"async"==Hb?Db(Ec):"@"==Kb?Db(Ac,Ec):Xb(xb("stat"),Ac,mb(";"),Bc)}function Ac(Hb){return gb(Hb,!1)}function ab(Hb){return gb(Hb,!0)}function La(Hb){return"("!=Hb?Xb():Db(xb(")"),Ac,mb(")"),Bc)}function gb(Hb,Kb){if(Ne.state.fatArrowAt==Ne.stream.start){var Gd=Kb?Oa:pa;if("("==Hb)return Db(bd,xb(")"),ae(pg,")"),Bc,mb("=>"),Gd,cb);if("variable"==Hb)return Xb(bd,pg,mb("=>"),Gd,cb)}Gd=Kb?va:ia;return im.hasOwnProperty(Hb)?Db(Gd):"function"==Hb?Db(rb,Gd):"class"==Hb?Db(xb("form"),
gc,Bc):"keyword c"==Hb||"async"==Hb?Db(Kb?tc:Va):"("==Hb?Db(xb(")"),Va,mb(")"),Bc,Gd):"operator"==Hb||"spread"==Hb?Db(Kb?ab:Ac):"["==Hb?Db(xb("]"),ek,Bc,Gd):"{"==Hb?ie(Hd,"}",null,Gd):"quasi"==Hb?Xb(qb,Gd):"new"==Hb?Db(ub(Kb)):Db()}function Va(Hb){return Hb.match(/[;\}\)\],]/)?Xb():Xb(Ac)}function tc(Hb){return Hb.match(/[;\}\)\],]/)?Xb():Xb(ab)}function ia(Hb,Kb){return","==Hb?Db(Ac):va(Hb,Kb,!1)}function va(Hb,Kb,Gd){var Ad=0==Gd?ia:va,sf=0==Gd?Ac:ab;if("=>"==Hb)return Db(bd,Gd?Oa:pa,cb);if("operator"==
Hb)return/\+\+|--/.test(Kb)?Db(Ad):"?"==Kb?Db(Ac,mb(":"),sf):Db(sf);if("quasi"==Hb)return Xb(qb,Ad);if(";"!=Hb){if("("==Hb)return ie(ab,")","call",Ad);if("."==Hb)return Db(Jc,Ad);if("["==Hb)return Db(xb("]"),Va,mb("]"),Bc,Ad)}}function qb(Hb,Kb){return"quasi"!=Hb?Xb():"${"!=Kb.slice(Kb.length-2)?Db(qb):Db(Ac,I)}function I(Hb){if("}"==Hb)return Ne.marked="string-2",Ne.state.tokenize=hb,Db(qb)}function pa(Hb){cc(Ne.stream,Ne.state);return Xb("{"==Hb?Ec:Ac)}function Oa(Hb){cc(Ne.stream,Ne.state);return Xb("{"==
Hb?Ec:ab)}function ub(Hb){return function(Kb){return"."==Kb?Db(Hb?Jb:Wb):Xb(Hb?ab:Ac)}}function Wb(Hb,Kb){if("target"==Kb)return Ne.marked="keyword",Db(ia)}function Jb(Hb,Kb){if("target"==Kb)return Ne.marked="keyword",Db(va)}function yc(Hb){return":"==Hb?Db(Bc,Ec):Xb(ia,mb(";"),Bc)}function Jc(Hb){if("variable"==Hb)return Ne.marked="property",Db()}function Hd(Hb,Kb){if("async"==Hb)return Ne.marked="property",Db(Hd);if("variable"==Hb||"keyword"==Ne.style)return Ne.marked="property","get"==Kb||"set"==
Kb?Db(Ge):Db(Dd);if("number"==Hb||"string"==Hb)return Ne.marked=Eh?"property":Ne.style+" property",Db(Dd);if("jsonld-keyword"==Hb)return Db(Dd);if("modifier"==Hb)return Db(Hd);if("["==Hb)return Db(Ac,mb("]"),Dd);if("spread"==Hb)return Db(Ac);if(":"==Hb)return Xb(Dd)}function Ge(Hb){if("variable"!=Hb)return Xb(Dd);Ne.marked="property";return Db(rb)}function Dd(Hb){if(":"==Hb)return Db(ab);if("("==Hb)return Xb(rb)}function ae(Hb,Kb,Gd){function Ad(sf,Tf){return(Gd?-1<Gd.indexOf(sf):","==sf)?(sf=Ne.state.lexical,
"call"==sf.info&&(sf.pos=(sf.pos||0)+1),Db(function(qi,Fl){return qi==Kb||Fl==Kb?Xb():Xb(Hb)},Ad)):sf==Kb||Tf==Kb?Db():Db(mb(Kb))}return function(sf,Tf){return sf==Kb||Tf==Kb?Db():Xb(Hb,Ad)}}function ie(Hb,Kb,Gd){for(var Ad=3;Ad<arguments.length;Ad++)Ne.cc.push(arguments[Ad]);return Db(xb(Kb,Gd),ae(Hb,Kb),Bc)}function Fe(Hb){return"}"==Hb?Db():Xb(Ec,Fe)}function Tc(Hb,Kb){if(zj){if(":"==Hb)return Db(ee);if("?"==Kb)return Db(Tc)}}function ee(Hb){if("variable"==Hb)return Ne.marked="variable-3",Db(Rf);
if("string"==Hb||"number"==Hb||"atom"==Hb)return Db(Rf);if("{"==Hb)return Db(xb("}"),ae(gf,"}",",;"),Bc);if("("==Hb)return Db(ae(jf,")"),he)}function he(Hb){if("=>"==Hb)return Db(ee)}function gf(Hb,Kb){if("variable"==Hb||"keyword"==Ne.style)return Ne.marked="property",Db(gf);if("?"==Kb)return Db(gf);if(":"==Hb)return Db(ee)}function jf(Hb){if("variable"==Hb)return Db(jf);if(":"==Hb)return Db(ee)}function Rf(Hb,Kb){if("<"==Kb)return Db(xb(">"),ae(ee,">"),Bc,Rf);if("|"==Kb||"."==Hb)return Db(ee);if("["==
Hb)return Db(mb("]"),Rf);if("extends"==Kb)return Db(ee)}function Zb(){return Xb(pg,Tc,qg,Re)}function pg(Hb,Kb){if("modifier"==Hb)return Db(pg);if("variable"==Hb)return vd(Kb),Db();if("spread"==Hb)return Db(pg);if("["==Hb)return ie(pg,"]");if("{"==Hb)return ie(lg,"}")}function lg(Hb,Kb){if("variable"==Hb&&!Ne.stream.match(/^\s*:/,!1))return vd(Kb),Db(qg);"variable"==Hb&&(Ne.marked="property");return"spread"==Hb?Db(pg):"}"==Hb?Xb():Db(mb(":"),pg,qg)}function qg(Hb,Kb){if("="==Kb)return Db(ab)}function Re(Hb){if(","==
Hb)return Db(Zb)}function Ha(Hb,Kb){if("keyword b"==Hb&&"else"==Kb)return Db(xb("form","else"),Ec,Bc)}function Ya(Hb){if("("==Hb)return Db(xb(")"),Bb,mb(")"),Bc)}function Bb(Hb){return"var"==Hb?Db(Zb,mb(";"),Da):";"==Hb?Db(Da):"variable"==Hb?Db(V):Xb(Ac,mb(";"),Da)}function V(Hb,Kb){return"in"==Kb||"of"==Kb?(Ne.marked="keyword",Db(Ac)):Db(ia,Da)}function Da(Hb,Kb){return";"==Hb?Db(fb):"in"==Kb||"of"==Kb?(Ne.marked="keyword",Db(Ac)):Xb(Ac,mb(";"),fb)}function fb(Hb){")"!=Hb&&Db(Ac)}function rb(Hb,
Kb){if("*"==Kb)return Ne.marked="keyword",Db(rb);if("variable"==Hb)return vd(Kb),Db(rb);if("("==Hb)return Db(bd,xb(")"),ae(lc,")"),Bc,Tc,Ec,cb);if(zj&&"<"==Kb)return Db(xb(">"),ae(ee,">"),Bc,rb)}function lc(Hb){return"spread"==Hb?Db(lc):Xb(pg,Tc,qg)}function gc(Hb,Kb){return"variable"==Hb?Lc(Hb,Kb):Sc(Hb,Kb)}function Lc(Hb,Kb){if("variable"==Hb)return vd(Kb),Db(Sc)}function Sc(Hb,Kb){if("<"==Kb)return Db(xb(">"),ae(ee,">"),Bc,Sc);if("extends"==Kb||"implements"==Kb||zj&&","==Hb)return Db(zj?ee:Ac,
Sc);if("{"==Hb)return Db(xb("}"),Mc,Bc)}function Mc(Hb,Kb){if("variable"==Hb||"keyword"==Ne.style){if(("async"==Kb||"static"==Kb||"get"==Kb||"set"==Kb||zj&&("public"==Kb||"private"==Kb||"protected"==Kb||"readonly"==Kb||"abstract"==Kb))&&Ne.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return Ne.marked="keyword",Db(Mc);Ne.marked="property";return Db(zj?Ae:rb,Mc)}if("["==Hb)return Db(Ac,mb("]"),zj?Ae:rb,Mc);if("*"==Kb)return Ne.marked="keyword",Db(Mc);if(";"==Hb)return Db(Mc);if("}"==Hb)return Db();if("@"==
Kb)return Db(Ac,Mc)}function Ae(Hb,Kb){return"?"==Kb?Db(Ae):":"==Hb?Db(ee,qg):"="==Kb?Db(ab):Xb(rb)}function rf(Hb,Kb){return"*"==Kb?(Ne.marked="keyword",Db(Pg,mb(";"))):"default"==Kb?(Ne.marked="keyword",Db(Ac,mb(";"))):"{"==Hb?Db(ae(Ze,"}"),Pg,mb(";")):Xb(Ec)}function Ze(Hb,Kb){if("as"==Kb)return Ne.marked="keyword",Db(mb("variable"));if("variable"==Hb)return Xb(ab,Ze)}function Eg(Hb){return"string"==Hb?Db():Xb(He,Cg,Pg)}function He(Hb,Kb){if("{"==Hb)return ie(He,"}");"variable"==Hb&&vd(Kb);"*"==
Kb&&(Ne.marked="keyword");return Db(Ji)}function Cg(Hb){if(","==Hb)return Db(He,Cg)}function Ji(Hb,Kb){if("as"==Kb)return Ne.marked="keyword",Db(He)}function Pg(Hb,Kb){if("from"==Kb)return Ne.marked="keyword",Db(Ac)}function ek(Hb){return"]"==Hb?Db():Xb(ae(ab,"]"))}nb=Object.assign({},lb.defaultConfig,{},nb);Y=Object.assign({},lb.defaultParserConfig,{},Y);var Cf=nb.indentUnit,Ai=Y.statementIndent,Eh=Y.jsonld,hj=Y.json||Eh,zj=Y.typescript,yj=Y.wordCharacters||/[\w$\xa1-\uffff]/,bl=function(){function Hb(Fl){return{type:Fl,
style:"keyword"}}var Kb=Hb("keyword a"),Gd=Hb("keyword b"),Ad=Hb("keyword c"),sf=Hb("operator"),Tf={type:"atom",style:"atom"};Kb={if:Hb("if"),while:Kb,with:Kb,else:Gd,do:Gd,try:Gd,finally:Gd,return:Ad,break:Ad,continue:Ad,new:Hb("new"),delete:Ad,throw:Ad,debugger:Ad,var:Hb("var"),const:Hb("var"),let:Hb("var"),function:Hb("function"),catch:Hb("catch"),for:Hb("for"),switch:Hb("switch"),case:Hb("case"),default:Hb("default"),in:sf,typeof:sf,instanceof:sf,true:Tf,false:Tf,null:Tf,undefined:Tf,NaN:Tf,Infinity:Tf,
this:Hb("this"),class:Hb("class"),super:Hb("atom"),yield:Ad,export:Hb("export"),import:Hb("import"),extends:Ad,await:Ad,async:Hb("async")};if(zj){Gd={type:"variable",style:"variable-3"};Ad={interface:Hb("class"),implements:Ad,namespace:Ad,module:Hb("module"),enum:Hb("module"),public:Hb("modifier"),private:Hb("modifier"),protected:Hb("modifier"),abstract:Hb("modifier"),as:sf,string:Gd,number:Gd,boolean:Gd,any:Gd};for(var qi in Ad)Kb[qi]=Ad[qi]}return Kb}(),cl=/[+\-*&%=<>!?|~^@]/,Rj=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,
Tj,Fh,im={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0},Ne={state:null,column:null,marked:null,cc:null},Em={name:"this",next:{name:"arguments"}};Bc.lex=!0;return{startState:function(Hb){Hb={tokenize:P,lastType:"sof",cc:[],lexical:new Uc((Hb||0)-Cf,0,"block",!1),localVars:Y.localVars,context:Y.localVars&&{vars:Y.localVars},indented:Hb||0};Y.globalVars&&"object"===typeof Y.globalVars&&(Hb.globalVars=Y.globalVars);return Hb},token:function(Hb,Kb){Hb.sol()&&(Kb.lexical.hasOwnProperty("align")||
(Kb.lexical.align=!1),Kb.indented=Hb.indentation(),cc(Hb,Kb));if(Kb.tokenize!=Sa&&Hb.eatSpace())return null;var Gd=Kb.tokenize(Hb,Kb);if("comment"==Tj)return Gd;Kb.lastType="operator"!=Tj||"++"!=Fh&&"--"!=Fh?Tj:"incdec";a:{var Ad=Tj,sf=Fh,Tf=Kb.cc;Ne.state=Kb;Ne.stream=Hb;Ne.marked=null;Ne.cc=Tf;Ne.style=Gd;Kb.lexical.hasOwnProperty("align")||(Kb.lexical.align=!0);for(Hb=0;;){if(1E5<Hb++)throw Error("endless");if((Tf.length?Tf.pop():hj?Ac:Ec)(Ad,sf)){for(;Tf.length&&Tf[Tf.length-1].lex;)Tf.pop()();
if(Ne.marked){Gd=Ne.marked;break a}if(Ad="variable"==Ad)b:{for(Ad=Kb.localVars;Ad;Ad=Ad.next)if(Ad.name==sf){Ad=!0;break b}for(Kb=Kb.context;Kb;Kb=Kb.prev)for(Ad=Kb.vars;Ad;Ad=Ad.next)if(Ad.name==sf){Ad=!0;break b}Ad=void 0}if(Ad){Gd="variable-2";break a}break a}}}return Gd},indent:function(Hb,Kb){if(Hb.tokenize==Sa)return lb.passIndent;if(Hb.tokenize!=P)return 0;var Gd=Kb&&Kb.charAt(0),Ad=Hb.lexical,sf;if(!/^\s*else\b/.test(Kb))for(var Tf=Hb.cc.length-1;0<=Tf;--Tf){var qi=Hb.cc[Tf];if(qi==Bc)Ad=
Ad.prev;else if(qi!=Ha)break}for(;!("stat"!=Ad.type&&"form"!=Ad.type||"}"!=Gd&&(!(sf=Hb.cc[Hb.cc.length-1])||sf!=ia&&sf!=va||/^[,\.=+\-*:?[\(]/.test(Kb)));)Ad=Ad.prev;Ai&&")"==Ad.type&&"stat"==Ad.prev.type&&(Ad=Ad.prev);sf=Ad.type;Tf=Gd==sf;return(qi=Hb._string)&&qi.trimLeft().startsWith("?")&&":"===Gd?qi.indexOf("?"):qi&&":"===Hb.lastType&&"}"!==Ad.type?qi.match(/^\s*/)[0].length:"vardef"==sf?(Kb=Ad.indented+Ad.info+2+Hb.localVars.name.length,"?"===Gd||":"===Gd||"|"===Gd||"&"===Gd?Kb:","==Hb.lastType?
Ad.indented+Ad.info+1:"operator"==Hb.lastType?Kb+3:Ad.indented):"form"==sf&&"{"==Gd?Ad.indented:"form"==sf?Ad.indented+Cf:"stat"==sf?(Gd=Ad.indented,Hb="operator"==Hb.lastType||","==Hb.lastType||cl.test(Kb.charAt(0))||/[,.]/.test(Kb.charAt(0)),Gd+(Hb?Ai||Cf:0)):"switch"!=Ad.info||Tf||0==Y.doubleIndentSwitch?Ad.align?Ad.column+(Tf?0:1):Ad.indented+(Tf?0:Cf):Ad.indented+(/^(?:case|default)\b/.test(Kb)?Cf:2*Cf)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:hj?null:"/*",blockCommentEnd:hj?
null:"*/",lineComment:hj?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:hj?"json":"javascript",jsonldMode:Eh,jsonMode:hj,expressionAllowed:lb.expressionAllowed,skipExpression:function(Hb){var Kb=Hb.cc[Hb.cc.length-1];Kb!=Ac&&Kb!=ab||Hb.cc.pop()}}});lb.registerHelper("wordChars","javascript",/[\w$]/);lb.defineMIME("text/javascript","javascript");lb.defineMIME("text/ecmascript","javascript");lb.defineMIME("application/javascript","javascript");lb.defineMIME("application/x-javascript",
"javascript");lb.defineMIME("application/ecmascript","javascript");lb.defineMIME("application/json",{name:"javascript",json:!0});lb.defineMIME("application/x-json",{name:"javascript",json:!0});lb.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});lb.defineMIME("text/typescript",{name:"javascript",typescript:!0});lb.defineMIME("application/typescript",{name:"javascript",typescript:!0});var tb=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js");tb.string=Dc;tb.JavaScriptChecker=
dd;tb.JavaScriptNavigator=ad;tb.completers=Ja;tb.jsSnippets=Fa;tb.jsIdeCommands=Ib;tb.jsEditorCommands=Ka;tb.astEditorCommands=jc;tb.CodeMirrorEnabledEditorPlugin=Fd;tb.Snippet=jb;tb.parser=Wd;tb.localInterface=ic;tb.systemInterfaceNamed=rc;tb.serverInterfaceFor=Gb;tb.l2lInterfaceFor=oc;dd=function(nb){var Y=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js"),Ba=Y.hasOwnProperty("JavaScriptEditorPlugin")&&"function"===typeof Y.JavaScriptEditorPlugin?Y.JavaScriptEditorPlugin:Y.JavaScriptEditorPlugin=
function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wb(Ba,nb,[{key:Symbol.for("lively-instance-initialize"),value:function(){wb._get(Object.getPrototypeOf(Ba.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.checker=new tb.JavaScriptChecker;this.evalEnvironment={format:"esm",targetModule:null,context:null}}},{key:"isJSEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return"js"}},
{key:"longName",get:function(){return"javascript"}},{key:"attach",value:function(P){wb._get(Object.getPrototypeOf(Ba.prototype),"attach",this).call(this,P);this.evalEnvironment=Object.assign({},this.evalEnvironment,{context:P})}},{key:"detach",value:function(P){this.checker.uninstall(this.textMorph);wb._get(Object.getPrototypeOf(Ba.prototype),"detach",this).call(this,P)}},{key:"getNavigator",value:function(){return new tb.JavaScriptNavigator}},{key:"getCompleters",value:function(P){return tb.completers.concat(P)}},
{key:"getCommands",value:function(P){return[].concat($jscomp.arrayFromIterable(wb._get(Object.getPrototypeOf(Ba.prototype),"getCommands",this).call(this,P)),$jscomp.arrayFromIterable(tb.jsIdeCommands),$jscomp.arrayFromIterable(tb.jsEditorCommands),$jscomp.arrayFromIterable(tb.astEditorCommands))}},{key:"getKeyBindings",value:function(P){return[].concat($jscomp.arrayFromIterable(P),[{keys:"Shift-Tab",command:{command:"[javascript] auto format code"}},{keys:"Ctrl-C E",command:"[javascript] list errors and warnings"},
{keys:{mac:"Meta-Shift-L L I N T R",win:"Ctrl-Shift-L L I N T R"},command:"[javascript] eslint report"},{keys:{mac:"Meta-Shift-L L I N T P",win:"Ctrl-Shift-L L I N T P"},command:"[javascript] eslint preview fixes"},{keys:{mac:"Meta-Shift-L L I N T F",win:"Ctrl-Shift-L L I N T F"},command:"[javascript] eslint fix"},{keys:{mac:"Meta-Shift-L M O D E",win:"Ctrl-Shift-L M O D E"},command:"change editor mode"},{keys:"Ctrl-C I",command:"[javascript] inject import"},{keys:"Ctrl-C C I",command:"[javascript] fix undeclared variables"}])}},
{key:"getMenuItems",value:function(P){var na=this,Sa,hb,cc,Uc,Xb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Db){Sa=na.textMorph;hb=[{command:"doit",target:Sa,showKeyShortcuts:!0},{command:"inspectit",target:Sa,showKeyShortcuts:!0},{command:"editit",target:Sa,showKeyShortcuts:!0},{command:"printit",target:Sa,showKeyShortcuts:!0},{command:"print inspectit",alias:"print inspect",target:Sa,showKeyShortcuts:!0},{command:"eval all",target:Sa,showKeyShortcuts:!0},{command:"text completion",
alias:"code completion",target:Sa,showKeyShortcuts:!0},{command:"[javascript] list errors and warnings",alias:"list errors and warnings",target:Sa,showKeyShortcuts:!0},{isDivider:!0}];na.evalEnvironment.targetModule&&hb.push({command:"[javascript] inject import",alias:"add import",target:Sa},{command:"[javascript] fix undeclared variables",alias:"fix undeclared variables",target:Sa},{command:"[javascript] remove unused imports",alias:"remove unused imports",target:Sa});cc=na.getNavigator();(Uc=cc.resolveIdentifierAt(Sa,
Sa.cursorPosition))&&hb.push({command:"selectDefinition",alias:'jump to definition of "'+Uc.name+'"',target:Sa},{command:"selectSymbolReferenceOrDeclaration",alias:'select all occurrences of "'+Uc.name+'"',target:Sa});(Xb=Sa.selection.text.trim())&&hb.push({command:"open code search",alias:'code search for "'+tb.string.truncate(Xb,30)+'"',target:Sa.world(),args:{input:Xb,backend:na.backend()}});hb.push({isDivider:!0});return Db.return(hb.concat(P))})}},{key:"getSnippets",value:function(){return tb.jsSnippets.map(function(P){var na=
$jscomp.makeIterator(P);P=na.next().value;na=na.next().value;return new tb.Snippet({trigger:P,expansion:na})})}},{key:"sanatizedJsEnv",value:function(P){P=Object.assign({},this.evalEnvironment,{},P);P.format||(P.formatd="esm");P.context||(P.context=this.textMorph);P.sourceURL||(P.sourceURL=P.targetModule+"_doit_"+Date.now());P.systemInterface||(P.systemInterface=tb.localInterface);return P}},{key:"backend",value:function(P){P=this.sanatizedJsEnv(P);return P.remote?P.remote:"local"}},{key:"systemInterface",
value:function(P){return this.sanatizedJsEnv(P).systemInterface||tb.localInterface}},{key:"setSystemInterface",value:function(P){return this.evalEnvironment.systemInterface=P}},{key:"setSystemInterfaceNamed",value:function(P){return this.setSystemInterface(tb.systemInterfaceNamed(P))}},{key:"runEval",value:function(P,na){na=this.sanatizedJsEnv(na);return this.systemInterface(na).runEval(P,na)}},{key:"parser",get:function(){return tb.parser}},{key:"parse",value:function(P){P=void 0===P?null:P;if(this._ast&&
this._ast._astType===P)return this._ast;var na=this.parser,Sa=this.textMorph.textString;if(!na)return null;var hb={withComments:!0,allowReturnOutsideFunction:!0};P&&(hb.type=P);if(Sa.startsWith("#!")){var cc=Sa.indexOf("\n");Sa=" ".repeat(cc)+Sa.slice(cc)}na=na.fuzzyParse(Sa,hb);na._astType=P;return this._ast=na}},{key:"undeclaredVariables",value:function(P){var na=this.parser,Sa=this.evalEnvironment.knownGlobals||[];P=this.parse(void 0===P?null:P);return na&&P?na.query.findGlobalVarRefs(P,{jslintGlobalComment:!0}).filter(function(hb){return!Sa.includes(hb.name)}):
[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptEditorPlugin"}}],Y,{pathInPackage:function(){return"js/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:664,end:6857})}(tb.CodeMirrorEnabledEditorPlugin);dd=tb.JavaScriptEditorPlugin;ya("default",dd);tb.default=dd}}});