System.register(["./__root_module__-28353364.js","./index-2245b428.js"],function(Ia){var mb,vb,Vb,Eb,Jc,Bc,Uc,tc,oc,sc,Tc,Fd,Rd,ee,Dc,rd,Ab,qc,Xc,zc,ed,wd,xb,hc,Cc,ic,Qc,jb,fb,Ob,Cb,ob,bc,Ma,Db,gb,zb,ec,rc,Qb,Lb,Kb,za,bb,P,X,ya,Ga,wa,ja,lb,Ja,Xb,Kc;return{setters:[function(Hb){mb=Hb.C;vb=Hb.$;Vb=Hb.bf;Eb=Hb.bg;Jc=Hb.bh;Bc=Hb.bi;Uc=Hb.bj;tc=Hb.bk;oc=Hb.b;sc=Hb.a8;Tc=Hb.bl;Fd=Hb.bm;Rd=Hb.bn;ee=Hb.M;Dc=Hb.az;rd=Hb.aa;Ab=Hb.af;qc=Hb.K;Xc=Hb.aA;zc=Hb.W;ed=Hb.S;wd=Hb.ay;xb=Hb.aE;hc=Hb.bo;Cc=Hb.bp;
ic=Hb.c;Qc=Hb.d;jb=Hb.ac;fb=Hb.a;Ob=Hb.bq;Cb=Hb.i;ob=Hb.I;bc=Hb.ag;Ma=Hb.g;Db=Hb.br;gb=Hb.ab;zb=Hb.m;ec=Hb.a3;rc=Hb.p;Qb=Hb.f;Lb=Hb.s;Kb=Hb.Y;za=Hb.R;bb=Hb.bs;P=Hb.bt;X=Hb.bu;ya=Hb.a9;Ga=Hb.o;wa=Hb.aq;ja=Hb.r},function(Hb){lb=Hb.p;Ja=Hb.P;Xb=Hb.d;Kc=Hb.N}],execute:function(){var Hb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js");Hb.Color=mb;Hb.rect=vb;Hb.Complementary=Vb;Hb.Triadic=Eb;Hb.Tetradic=Jc;Hb.Quadratic=Bc;Hb.Analogous=Uc;Hb.Neutral=tc;Hb.pt=oc;Hb.Point=sc;Hb.flatDesignColors=
Tc;Hb.materialDesignColors=Fd;Hb.webSafeColors=Rd;Hb.Morph=ee;Hb.CustomLayout=Dc;Hb.VerticalLayout=rd;Hb.HorizontalLayout=Ab;Hb.Text=qc;Hb.TilingLayout=Xc;Hb.Ellipse=zc;Hb.Image=ed;Hb.StyleSheet=wd;Hb.DropDownSelector=xb;Hb.ModeSelector=hc;Hb.Slider=Cc;Hb.connect=ic;Hb.signal=Qc;Hb.num=jb;Hb.arr=fb;Hb.SnapLayout=Ob;Hb.WHEEL_URL="/lively.ide/assets/color-wheel.png";Hb.duration=200;(function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),hb=sb.hasOwnProperty("ColorPaletteField")&&
"function"===typeof sb.ColorPaletteField?sb.ColorPaletteField:sb.ColorPaletteField=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(hb,Ld,[{key:"onHoverIn",value:function(){if(this.color){var Ba=$jscomp.makeIterator(this.color.isGradient?Hb.Color.blue.toHSB():this.color.toHSB()),J=Ba.next().value,ta=Ba.next().value;Ba=Ba.next().value;this.borderColor=Hb.Color.hsb(J,1<ta+.5?ta-.5:ta+.5,1<Ba+.5?Ba-.5:Ba+.5)}}},
{key:"onHoverOut",value:function(){this.borderColor=Hb.Color.transparent}},{key:"onMouseDown",value:function(){Hb.signal(this,"updateColor",this.color)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPaletteField"}},{key:"properties",get:function(){return{color:{defaultValue:Hb.Color.blue},borderWidth:{defaultValue:2},borderColor:{after:["color"],initialize:function(){this.borderColor=this.color||Hb.Color.transparent}},fill:{after:["color"],initialize:function(){this.fill=this.color||
Hb.Color.transparent}},styleClasses:{after:["color"],initialize:function(){this.styleClasses=this.color?["colorField"]:["vacantColorField"]}}}}}],sb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:638,end:1652})})(Hb.Morph);(function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),
hb=sb.hasOwnProperty("ColorHarmonyField")&&"function"===typeof sb.ColorHarmonyField?sb.ColorHarmonyField:sb.ColorHarmonyField=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(hb,Ld,[{key:"onMouseDown",value:function(){Hb.signal(this,"updateColor",this.color)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorHarmonyField"}},{key:"properties",get:function(){return{extent:{defaultValue:Hb.pt(80,
60)},fill:{defaultValue:Hb.Color.transparent},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/color harmony field"}}},color:{set:function(Ba){var J=$jscomp.makeIterator(this.submorphs),ta=J.next().value;J=J.next().value;var Ta=$jscomp.makeIterator(Ba?Ba.toHSB():[]),tb=Ta.next().value,Rb=Ta.next().value;Ta=Ta.next().value;this.setProperty("color",Ba);Ba&&ta&&J&&(ta.fill=Ba,J.textString=Ba.toHexString(),J.fontColor=Hb.Color.hsb(tb,1<Rb+.5?Rb-.5:Rb+.5,1<Ta+.5?Ta-.5:Ta+.5))}},
submorphs:{after:["color"],initialize:function(){var Ba=$jscomp.makeIterator((this.color||Hb.Color.transparent).toHSB()),J=Ba.next().value,ta=Ba.next().value;Ba=Ba.next().value;this.submorphs=[new Hb.Morph({fill:this.color,extent:Hb.pt(80,50)}),new Hb.Text({textString:J.toFixed()+", "+ta.toFixed(2)+", "+Ba.toFixed(2),fill:Hb.Color.transparent,fontColor:Hb.Color.gray.darker(),bottomLeft:Hb.pt(0,50)})]}}}}}],sb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1654,end:3046})})(Hb.Morph);(function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),hb=sb.hasOwnProperty("HarmonyDisplay")&&"function"===typeof sb.HarmonyDisplay?sb.HarmonyDisplay:sb.HarmonyDisplay=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Cb(hb,Ld,[{key:"update",value:function(Ba){var J=$jscomp.makeIterator(Ba.pivotColor.toHSB()),ta=J.next().value,Ta=J.next().value;J=J.next().value;ta=Ba.harmony.chord({hue:ta,saturation:Ta,brightness:J});ta.length!=this.submorphs.length?this.submorphs=ta.map(function(tb){tb=new Hb.ColorHarmonyField({color:tb});Hb.connect(tb,"updateColor",Ba,"color");return tb}):Hb.arr.zip(this.submorphs,ta).forEach(function(tb){var Rb=$jscomp.makeIterator(tb);tb=Rb.next().value;Rb=Rb.next().value;tb.color=Rb})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HarmonyDisplay"}}],sb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3048,end:3626})})(Hb.Morph);(function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),hb=sb.hasOwnProperty("PivotColorControl")&&
"function"===typeof sb.PivotColorControl?sb.PivotColorControl:sb.PivotColorControl=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(hb,Ld,[{key:"update",value:function(Ba){this.pivotColor=Ba.pivotColor}},{key:"onDrag",value:function(Ba){var J=$jscomp.makeIterator(this.pivotColor.toHSB()),ta=J.next().value,Ta=J.next().value;J=J.next().value;ta=Hb.num.toRadians(ta);Ba=Hb.Point.polar(50*Ta,ta).addPt(Ba.state.dragDelta);
ta=Hb.num.toDegrees(Ba.theta());ta=0>ta?ta+360:ta;Ta=Math.min(Ba.r()/50,1);this.pivotColor=Hb.Color.hsb(ta,Ta,J)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PivotColorControl"}},{key:"properties",get:function(){return{pivotColor:{defaultValue:Hb.Color.blue},draggable:{defaultValue:!0}}}}],sb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3628,end:4262})})(Hb.Ellipse);(function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),hb=sb.hasOwnProperty("HarmonyVisualizer")&&"function"===typeof sb.HarmonyVisualizer?sb.HarmonyVisualizer:sb.HarmonyVisualizer=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(hb,Ld,[{key:"update",value:function(Ba){var J=
$jscomp.makeIterator(this.submorphs).next().value,ta=this.get("pivot control"),Ta=$jscomp.makeIterator(Ba.pivotColor.toHSB()),tb=Ta.next().value,Rb=Ta.next().value;Ta=Ta.next().value;var mc=Hb.num.toRadians(tb);tb=Ba.harmony.chord({hue:tb,saturation:Rb,brightness:Ta}).map(function(Zb){var Rc=$jscomp.makeIterator(Zb.toHSB()),Sc=Rc.next().value;Zb=Rc.next().value;Rc.next();Rc=Hb.num.toRadians(Sc);return Hb.Point.polar(50*Zb,Rc)});J.fill=Hb.Color.black.withA(1-Ta);ta.update(Ba);J.submorphs.length-1!=
tb.length?J.submorphs=[].concat($jscomp.arrayFromIterable(tb.map(function(Zb){return new Hb.Ellipse({center:Zb,fill:Hb.Color.transparent,draggable:!1,borderWidth:1,borderColor:Hb.Color.black})})),[ta]):(Hb.arr.zip(J.submorphs,tb).forEach(function(Zb){var Rc=$jscomp.makeIterator(Zb);Zb=Rc.next().value;if(Rc=Rc.next().value)Zb.center=Rc}),ta.center=Hb.Point.polar(50*Rb,mc))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HarmonyVisualizer"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["harmonyVisualizer"]},
submorphs:{initialize:function(){this.submorphs=[{type:"ellipse",name:"harmonyPoints",submorphs:[new Hb.PivotColorControl({name:"pivot control"})]}]}}}}}],sb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4264,end:5726})})(Hb.Image);(function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),
hb=sb.hasOwnProperty("HarmonyPalette")&&"function"===typeof sb.HarmonyPalette?sb.HarmonyPalette:sb.HarmonyPalette=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(hb,Ld,[{key:"update",value:function(Ba){this.updateInProgress||(this.updateInProgress=!0,this.pivotBrightness=Ba.pivotBrightness,this.harmony=Ba.harmony,this.get("harmonies").update(Ba),this.get("harmony visualizer").update(Ba),this.updateInProgress=
!1)}},{key:"harmonyControl",value:function(){var Ba,J,ta=new Hb.Morph({name:"harmonyControl",submorphs:[new Hb.HarmonyVisualizer({name:"harmony visualizer"}),J=new Hb.Slider({min:0,max:1,tooltip:"Adjust Brightness",width:100,value:this.pivotBrightness}),Ba=new Hb.DropDownSelector({name:"harmonySelector",isHaloItem:!0,padding:4,selectedValue:this.harmony,getCurrentValue:function(){return this.selectedValue.name},values:{Complement:new Hb.Complementary,Triadic:new Hb.Triadic,Tetradic:new Hb.Tetradic,
Quadratic:new Hb.Quadratic,Analogous:new Hb.Analogous,Neutral:new Hb.Neutral}})]});Hb.connect(J,"value",this,"pivotBrightness");Hb.connect(Ba,"selectedValue",this,"harmony");return ta}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HarmonyPalette"}},{key:"properties",get:function(){return{harmony:{defaultValue:new Hb.Complementary},pivotBrightness:{defaultValue:1},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/harmony palette"}}},submorphs:{after:["harmony"],
initialize:function(){this.submorphs=[new Hb.HarmonyDisplay({name:"harmonies"}),this.harmonyControl()]}}}}}],sb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:5728,end:7655})})(Hb.Morph);var Oc=Ia("C",function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),
hb=sb.hasOwnProperty("ColorPalette")&&"function"===typeof sb.ColorPalette?sb.ColorPalette:sb.ColorPalette=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(hb,Ld,[{key:"fadeIntoWorld",value:function(Ba){Cb._get(Object.getPrototypeOf(hb.prototype),"fadeIntoWorld",this).call(this,Ba);this.initPosition=Ba;return this}},{key:"isHaloItem",value:function(){return!0}},{key:"onKeyDown",value:function(Ba){"Escape"==
Ba.key&&this.close()}},{key:"close",value:function(Ba){Ba?this.fadeOut(Ba):this.remove();Hb.signal(this,"close")}},{key:"paletteView",value:function(){return{name:"paletteView",extent:Hb.pt(400,253),submorphs:[this.solidColorPalette(),new Hb.HarmonyPalette({name:"harmony palette",isLayoutable:!1,visible:!1,draggable:!1})]}}},{key:"selectSolidMode",value:function(){var Ba=this.get("solidColorPalette"),J=this.get("paletteView");Ba.visible||(J.submorphs.forEach(function(ta){return ta.animate({isLayoutable:!1,
visible:!1,duration:200})}),Ba.animate({isLayoutable:!0,visible:!0,duration:200}))}},{key:"selectHarmonyMode",value:function(){var Ba=this.get("paletteView");this.get("harmony palette").visible||(Ba.submorphs.forEach(function(J){return J.animate({isLayoutable:!1,visible:!1,duration:200})}),this.get("harmony palette").animate({isLayoutable:!0,visible:!0,duration:200}))}},{key:"fillTypeSelector",value:function(){var Ba=new Hb.ModeSelector({reactsToPointer:!1,name:"fillTypeSelector",items:["Color Palette",
"Color Harmonies"],tooltips:{"Color Harmonies":this.getPaletteDescription("harmony")}});Hb.connect(Ba,"Color Palette",this,"selectSolidMode");Hb.connect(Ba,"Color Harmonies",this,"selectHarmonyMode");return Ba}},{key:"solidColorPalette",value:function(){return{name:"solidColorPalette",master:{auto:"styleguide://SystemWidgets/solid color palette"},submorphs:[this.getCurrentPalette(),this.paletteConfig()]}}},{key:"getCurrentPalette",value:function(){var Ba=this.getColorsFor(this.colorPalette),J=Ba.colors,
ta=Ba.mod;return this.cachedPalette[Ba.name]||this.getPalette(J,ta)}},{key:"getPalette",value:function(Ba,J){var ta=this,Ta=Math.max(Math.ceil(Ba.length/J),15),tb=Ta*this.colorFieldWidth,Rb=J*this.colorFieldWidth;Ba=[].concat($jscomp.arrayFromIterable(Ba),$jscomp.arrayFromIterable(Hb.arr.withN(Ta*J-Ba.length,null)));return{extent:Hb.pt(tb,Rb),name:"paletteContainer",submorphs:Ba.map(function(mc){mc=new Hb.ColorPaletteField({color:mc&&Hb.Color.rgbHex(mc),extent:Hb.pt(ta.colorFieldWidth,ta.colorFieldWidth)});
Hb.connect(mc,"updateColor",ta,"color");return mc})}}},{key:"switchPalette",value:function(Ba){var J=Ba.name,ta=Ba.colors;Ba=Ba.mod;var Ta=this.get("solidColorPalette"),tb=$jscomp.makeIterator(Ta.submorphs);tb.next();tb=tb.next().value;this.cachedPalette[J]=this.cachedPalette[J]||this.getPalette(ta,Ba,J);Ta.submorphs=[this.cachedPalette[J],tb]}},{key:"getPaletteDescription",value:function(Ba){return{harmony:"Color harmonies are particularly pleasing combinations\nof two or more colors derived from their relationship\non a color wheel. Also known as color chords, color\nharmonies are useful when exploring a possible color\npalette, or can be used as a standalone color scheme.\n",
custom:"Your personal set of customly defined colors.",materialDesign:"Material design is a visual language and design\nsystem developed by Google with an almost flat\nstyle and vibrant color schemes.",flatDesign:"Flat design or flat UI colors are quite popular\nin web design today where bold, bright colors\nare used to create clean, simple interfaces.",webSafe:"Web safe colors emerged during the early era of\nthe internet; a standardized palette of 216 colors\nthat displayed consistently across all major browsers."}[Ba]}},
{key:"updatePaletteDescription",value:function(){this.get("paletteSelector").tooltip=this.getPaletteDescription(this.colorPalette)}},{key:"getColorsFor",value:function(Ba){return Object.assign({name:Ba},{flatDesign:{colors:Hb.flatDesignColors,mod:11},materialDesign:{colors:Hb.materialDesignColors,mod:15},webSafe:{colors:Hb.webSafeColors,mod:12}}[Ba])}},{key:"paletteConfig",value:function(){var Ba,J={name:"paletteConfig",styleClasses:["paletteFormatter"],submorphs:[Ba=new Hb.DropDownSelector({isHaloItem:!0,
name:"paletteSelector",selectedValue:"flatDesign",padding:4,tooltip:this.getPaletteDescription(this.colorPalette),values:{"Flat Design":"flatDesign","Material Design":"materialDesign","Web Safe":"webSafe"}})]};Hb.connect(Ba,"selectedValue",this,"colorPalette");return J}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPalette"}},{key:"properties",get:function(){return{extent:{defaultValue:Hb.pt(200,300)},colorPalette:{after:["submorphs"],defaultValue:"flatDesign",set:function(Ba){this.setProperty("colorPalette",
Ba);this.switchPalette(this.getColorsFor(Ba));this.updatePaletteDescription()}},pivotColor:{after:["submorphs"],set:function(Ba){this.setProperty("pivotColor",Ba);this.get("harmony palette").update(this)}},color:{set:function(Ba){this.setProperty("color",Ba);this.get("harmony palette")&&this.get("harmony palette").update(this)}},pivotBrightness:{after:["submorphs","color"],get:function(){var Ba=$jscomp.makeIterator((this.pivotColor||this.color).toHSB());Ba.next();Ba.next();return Ba.next().value},
set:function(Ba){var J=$jscomp.makeIterator((this.pivotColor||this.color).toHSB()),ta=J.next().value;J=J.next().value;this.pivotColor=Hb.Color.hsb(ta,J,Ba)}},harmony:{after:["submorphs","pivotColor"],defaultValue:new Hb.Complementary,set:function(Ba){this.setProperty("harmony",Ba);this.get("harmony palette").update(this)}},colorFieldWidth:{defaultValue:20},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/color palette"}}},submorphs:{after:["color"],initialize:function(){var Ba=
$jscomp.makeIterator((this.color.isGradient?Hb.Color.blue:this.color).toHSB()),J=Ba.next().value,ta=Ba.next().value;Ba.next();this.cachedPalette={};this.submorphs=[this.fillTypeSelector(),this.paletteView()];this.pivotColor=Hb.Color.hsb(J,ta,1);Hb.connect(this.get("harmony palette"),"harmony",this,"harmony");Hb.connect(this.get("pivot control"),"pivotColor",this,"pivotColor");Hb.connect(this.get("harmony palette"),"pivotBrightness",this,"pivotBrightness");this.selectSolidMode();this.active=!0}}}}}],
sb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:7721,end:15551})}(Hb.Morph));Hb.ColorPalette=Oc;Hb.ColorPalette=Oc;Hb.ColorPalette=Oc;var qb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js");qb.Morph=ee;qb.Icon=ob;qb.ProportionalLayout=bc;qb.config=Ma;
qb.Text=qc;qb.ShadowObject=Db;qb.GridLayout=gb;qb.TilingLayout=Xc;qb.StyleSheet=wd;qb.morph=zb;qb.HorizontalLayout=Ab;qb.VerticalLayout=rd;qb.KeyHandler=ec;qb.connect=ic;qb.signal=Qc;qb.arr=fb;qb.promise=rc;qb.fun=Qb;qb.string=Lb;qb.obj=Kb;qb.Color=mb;qb.rect=vb;qb.Rectangle=za;qb.pt=oc;qb.popovers=lb;qb.ModeSelector=hc;qb.DropDownSelector=xb;qb.SearchField=bb;qb.CheckBox=P;qb.Popover=Ja;qb.SvgStyleHalo=Xb;qb.NumberWidget=Kc;qb.Icons=X;qb.duration=200;var xd=Ia("c",qb.colorWidgets||{});qb.colorWidgets=
xd;qb.colorWidgets=xd;qb.colorWidgets=xd;(function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),hb=sb.hasOwnProperty("SelectableControl")&&"function"===typeof sb.SelectableControl?sb.SelectableControl:sb.SelectableControl=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(hb,Ld,[{key:"select",value:function(Ba){var J=this,ta,Ta,tb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rb){if(1==
Rb.nextAddress)return J.target?Rb.yield(J.target.execCommand(Ba),2):Rb.return();ta=Rb.yieldResult;Ta=J.get("modeSelector");ta.opacity=0;J.lastLabel&&(tb=Ta.submorphs.indexOf(J.lastLabel)<Ta.submorphs.indexOf(Ta.currentLabel),ta.topLeft=Ta.bottomLeft.addXY(tb?20:-20,10));J.lastLabel=Ta.currentLabel;J.animate({submorphs:[Ta,ta],duration:qb.duration});ta.animate({opacity:1,duration:qb.duration});Rb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SelectableControl"}},{key:"properties",
get:function(){return{target:{type:"Morph"},selectableControls:{},selectedControl:{},fill:{defaultValue:qb.Color.transparent},layout:{initialize:function(){this.layout=new qb.VerticalLayout({spacing:10,autoResize:!0,layoutOrder:function(Ba){return this.container.submorphs.indexOf(Ba)}})}},submorphs:{after:["selectableControls","selectedControl","target"],initialize:function(){var Ba=new qb.ModeSelector({name:"modeSelector",items:this.selectableControls,init:this.selectedControl});this.submorphs=[Ba];
Ba.width=100;qb.connect(Ba,"switchLabel",this,"select");this.select(this.selectableControls[this.selectedControl])}}}}}],sb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:948,end:2579})})(qb.Morph);(function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),
hb=sb.hasOwnProperty("ToggledControl")&&"function"===typeof sb.ToggledControl?sb.ToggledControl:sb.ToggledControl=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(hb,Ld,[{key:"toggle",value:function(Ba){var J=$jscomp.makeIterator(this.submorphs).next().value,ta=this.toggledControl(Ba);J=[J].concat($jscomp.arrayFromIterable(ta?[ta]:[]));qb.signal(this,"update",Ba&&ta.value);ta&&(ta.opacity=0);this.animate({submorphs:J,
duration:qb.duration});ta&&ta.animate({opacity:1,duration:qb.duration})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ToggledControl"}},{key:"properties",get:function(){return{title:{defaultValue:"Toggled Property"},toggledControl:{},checked:{},clipMode:{defaultValue:"hidden"},fill:{defaultValue:qb.Color.transparent},layout:{initialize:function(){this.layout=new qb.VerticalLayout({spacing:5})}},submorphs:{initialize:function(){var Ba=new qb.CheckBox({checked:this.checked});this.submorphs=
[{fill:qb.Color.transparent,layout:new qb.HorizontalLayout({autoResize:!1}),height:25,submorphs:[{type:"label",name:"property name",fontWeight:"bold",fontSize:14,autofit:!0,opacity:.8,padding:qb.rect(0,2,3,0),textString:this.title,styleClasses:["controlLabel"]},Ba]}];this.toggle(this.checked);qb.connect(Ba,"toggle",this,"toggle")}}}}}],sb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2581,end:4273})})(qb.Morph);(function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),hb=sb.hasOwnProperty("StylePopover")&&"function"===typeof sb.StylePopover?sb.StylePopover:sb.StylePopover=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(hb,Ld,[{key:"setupConnections",value:function(){}},{key:"controls",
value:function(){return[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StylePopover"}},{key:"properties",get:function(){return{targetMorph:{initialize:function(){this.targetMorph=qb.morph({layout:new qb.HorizontalLayout({spacing:5,resizeContainer:!0}),fill:qb.Color.transparent,submorphs:this.controls()});this.setupConnections()}}}}}],sb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4275,end:4825})})(qb.Popover);var he=function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),hb=sb.hasOwnProperty("IconPopover")&&"function"===typeof sb.IconPopover?sb.IconPopover:sb.IconPopover=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(hb,Ld,[{key:"onDrop",value:function(Ba){var J=this;Ba.hand.grabbedMorphs.find(function(ta){return ta===
J.iconLabel})&&(Ba.hand.dropMorphsOn(this),this.iconLabel.remove())}},{key:"controls",value:function(){return[{draggable:!1,layout:new qb.VerticalLayout({spacing:4}),fill:qb.Color.transparent,submorphs:[new qb.SearchField({name:"searchInput",width:200,placeHolder:"Search Icons"}),qb.morph({textAndAttributes:this.iconAsTextAttributes(),name:"iconList",draggable:!0,type:"text",extent:qb.pt(200,200),textStyleClasses:["fas","far"],clipMode:"auto",readOnly:!0})]}]}},{key:"setupConnections",value:function(){var Ba=
this.ui,J=Ba.iconList;qb.connect(Ba.searchInput,"searchInput",this,"filterIcons");qb.connect(J,"onMouseUp",this,"iconSelectClick");qb.connect(J,"onDragStart",this,"createIconLabel")}},{key:"relayout",value:function(){}},{key:"createIconLabel",value:function(Ba){Ba=this.ui.iconList.textPositionFromPoint(Ba.positionIn(this.ui.iconList));Ba=this.iconAtTextPos(Ba);this.iconLabel=qb.Icon.makeLabel(Ba,{fontSize:this.ui.iconList.fontSize,name:Ba});this.iconLabel.openInHand()}},{key:"iconAsTextAttributes",
value:function(Ba){var J=Object.keys(qb.Icons);Ba&&(J=J.filter(Ba));return qb.arr.flatmap(J,function(ta,Ta){return[qb.Icons[ta].code,{iconCode:qb.Icons[ta].code,iconName:ta}," ",{fontFamily:"sans-serif",iconCode:!1,iconName:!1}]})}},{key:"filterIcons",value:function(){var Ba=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==J.nextAddress)return J.yield(qb.promise.delay(250),2);qb.fun.debounceNamed("filterIcons",200,function(){Ba.ui.iconList.textAndAttributes=Ba.iconAsTextAttributes(function(ta){return Ba.ui.searchInput.matches(ta.toLowerCase())})})();
J.jumpToEnd()})}},{key:"iconSelectClick",value:function(Ba){Ba=this.ui.iconList.textPositionFromPoint(Ba.positionIn(this.ui.iconList));Ba=this.iconAtTextPos(Ba);this.setStatusMessage(Ba);qb.signal(this,"select",Ba)}},{key:"iconAtTextPos",value:function(Ba){var J=Ba.row;Ba=Ba.column;--Ba;for(var ta=this.ui.iconList,Ta=ta.textAndAttributesInRange({start:{row:J,column:Math.max(0,Ba)},end:{row:J,column:Ba+2}});Ta.length&&!Ta[1].iconName;)Ba++,Ta=Ta.slice(2);var tb={start:{row:J,column:Ba},end:{row:J,
column:Ba+1}};ta.addTextAttribute({backgroundColor:ta.selectionColor.darker().withA(.5)},tb);qb.promise.delay(1E3).then(function(){return ta.addTextAttribute({backgroundColor:qb.Color.transparent},tb)});return Ta.length?Ta[1].iconName:null}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconPopover"}},{key:"properties",get:function(){return{isEpiMorph:{get:function(){return!1}},popoverColor:{defaultValue:qb.Color.gray.lighter()},ui:{get:function(){return{searchInput:this.get("searchInput"),
iconList:this.get("iconList")}}}}}}],sb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4834,end:8444})}(qb.StylePopover);qb.IconPopover=he;qb.IconPopover=he;qb.IconPopover=he;he=function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),hb=sb.hasOwnProperty("LayoutPopover")&&
"function"===typeof sb.LayoutPopover?sb.LayoutPopover:sb.LayoutPopover=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(hb,Ld,[{key:"getLayoutObjects",value:function(){return[null,new qb.HorizontalLayout({autoResize:!1}),new qb.VerticalLayout({autoResize:!1}),new qb.TilingLayout,new qb.ProportionalLayout,new qb.GridLayout({grid:[[null],[null],[null]]})]}},{key:"close",value:function(){Cb._get(Object.getPrototypeOf(hb.prototype),
"close",this).call(this);this.clearLayoutHalo()}},{key:"controls",value:function(){this.showLayoutHaloFor(this.container);return[{fill:qb.Color.transparent,layout:new qb.VerticalLayout({spacing:5,layoutOrder:function(Ba){return this.container.submorphs.indexOf(Ba)}}),submorphs:[this.layoutPicker(),this.layoutControls()]}]}},{key:"updateControls",value:function(){this.get("Layout Type").relayout();this.getSubmorphNamed("controlContainer").animate(this.layoutHalo?{isLayoutable:!0,submorphs:this.layoutHalo.optionControls(this),
duration:300}:{isLayoutable:!1,extent:qb.pt(0,0),submorphs:[],duration:300})}},{key:"showLayoutHaloFor",value:function(Ba){this.clearLayoutHalo();Ba&&Ba.layout&&(this.layoutHalo=(Ba.world()||Ba.env.world).showLayoutHaloFor(Ba))}},{key:"clearLayoutHalo",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null)}},{key:"getCurrentLayoutName",value:function(){return this.getLayoutName(this.container.layout)}},{key:"getLayoutName",value:function(Ba){return Ba?Ba.name()+" Layout":
"No Layout"}},{key:"update",value:function(){}},{key:"applyLayout",value:function(Ba){this.container.animate({layout:Ba});this.showLayoutHaloFor(this.container);this.updateControls(this.controls());qb.signal(this,"layoutChanged",this.container.layout)}},{key:"layoutPicker",value:function(){var Ba=this,J=this.getLayoutObjects().map(function(ta){var Ta={};return Ta[Ba.getLayoutName(ta)]=ta,Ta});J=this.get("Layout Type")||new qb.DropDownSelector({name:"Layout Type",borderRadius:2,padding:3,getCurrentValue:function(){return Ba.getCurrentLayoutName()},
selectedValue:this.container.layout,values:qb.obj.merge(J)});qb.connect(J,"selectedValue",this,"applyLayout");return J}},{key:"layoutControls",value:function(){return{name:"controlContainer",fill:qb.Color.transparent,layout:new qb.VerticalLayout,isLayoutable:!!this.layoutHalo,submorphs:this.layoutHalo?this.layoutHalo.optionControls(this):[]}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutPopover"}},{key:"properties",get:function(){return{container:{},popoverColor:{defaultValue:qb.Color.gray.lighter()}}}}],
sb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:8453,end:11240})}(qb.StylePopover);qb.LayoutPopover=he;qb.LayoutPopover=he;qb.LayoutPopover=he;he=function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),hb=sb.hasOwnProperty("FillPopover")&&
"function"===typeof sb.FillPopover?sb.FillPopover:sb.FillPopover=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(hb,Ld,[{key:"openHandle",value:function(Ba){Ba.openInWorld();this.openHandles.push(Ba)}},{key:"close",value:function(){Cb._get(Object.getPrototypeOf(hb.prototype),"close",this).call(this);this.openHandles.forEach(function(Ba){return Ba.remove()})}},{key:"setupConnections",value:function(){var Ba=
this.ui,J=Ba.fillSelector,ta=Ba.colorField;Ba=Ba.gradientEditor;J&&qb.connect(this,"fillValue",J,"value");Ba&&(qb.connect(Ba,"gradientValue",this,"fillValue"),qb.connect(Ba,"openHandle",this,"openHandle"));ta&&(qb.connect(this,"close",ta,"remove"),qb.connect(ta,"update",this,"fillValue"),qb.connect(this,"onMouseDown",ta,"removeWidgets"))}},{key:"commands",get:function(){var Ba=this;return Cb._get(Object.getPrototypeOf(hb.prototype),"commands",this).concat([{name:"switch to fill",exec:function(){var J=
new qb.colorWidgets.ColorPickerField({name:"colorField",colorValue:Ba.fillValue.isGradient?qb.Color.blue:Ba.fillValue});J.whenRendered().then(function(){Ba.setupConnections()});return J}},{name:"switch to gradient",exec:function(){var J=new qb.colorWidgets.GradientEditor({name:"gradient editor",gradientValue:Ba.fillValue});J.whenRendered().then(function(){Ba.setupConnections();Ba.handleMorph&&J.showGradientHandlesOn(Ba.handleMorph);J.update()});return J}}])}},{key:"controls",value:function(){var Ba=
this;if(!this.gradientEnabled){var J=new qb.colorWidgets.ColorPickerField({name:"colorField",colorValue:this.fillValue});J.whenRendered().then(function(){J.update(Ba.fillValue)});return[{fill:qb.Color.transparent,layout:new qb.VerticalLayout({spacing:0}),submorphs:[J]}]}return[new qb.SelectableControl({name:"fillSelector",target:this,selectedControl:this.fillValue&&this.fillValue.isGradient?"Gradient":"Fill",selectableControls:{Fill:"switch to fill",Gradient:"switch to gradient"}})]}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"FillPopover"}},{key:"properties",get:function(){return{gradientEnabled:{defaultValue:!0},fillValue:{defaultValue:qb.Color.blue},popoverColor:{defaultValue:qb.Color.gray.lighter()},handleMorph:{},openHandles:{defaultValue:[]},ui:{get:function(){return{colorField:this.get("colorField"),fillSelector:this.get("fillSelector"),gradientEditor:this.get("gradient editor")}}}}}}],sb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:11249,end:14234})}(qb.StylePopover);qb.FillPopover=he;qb.FillPopover=he;qb.FillPopover=he;var xc=Ia("S",function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),hb=sb.hasOwnProperty("ShadowPopover")&&"function"===typeof sb.ShadowPopover?sb.ShadowPopover:sb.ShadowPopover=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(hb,Ld,[{key:"controls",value:function(){var Ba=this.shadowValue?this.shadowValue.inset?"Inset Shadow":"Drop Shadow":"No Shadow",J=[{layout:new qb.VerticalLayout({resizeContainer:!0,spacing:5}),fill:qb.Color.transparent,name:"control container",submorphs:[Ba=new qb.DropDownSelector({name:"shadow type",borderRadius:2,padding:3,selectedValue:Ba,values:["No Shadow","Drop Shadow","Inset Shadow"]})].concat(this.shadowValue?
this.shadowControls():[])}];qb.connect(Ba,"selectedValue",this,"changeShadowType");return J}},{key:"shadowControls",value:function(){var Ba=this.shadowValue,J=new qb.NumberWidget({min:0,autofit:!1,name:"distanceSlider",number:Ba.distance,unit:"px"}),ta=new qb.NumberWidget({name:"angleSlider",min:0,max:360,number:Ba.rotation,autofit:!1}),Ta=new qb.NumberWidget({name:"spreadSlider",min:0,number:Ba.spread,autofit:!1}),tb=new qb.NumberWidget({name:"blurSlider",min:0,number:Ba.blur,autofit:!1});Ba=new qb.colorWidgets.ColorPickerField({name:"colorPicker",
colorValue:Ba.color});qb.connect(Ba,"colorValue",this,"updateShadow",{converter:function(Rb){return{color:Rb}}});qb.connect(this,"onMouseDown",Ba,"removeWidgets");qb.connect(this,"close",Ba,"remove");qb.connect(Ta,"update",this,"updateShadow",{converter:function(Rb){return{spread:Rb}}});qb.connect(J,"update",this,"updateShadow",{converter:function(Rb){return{distance:Rb}}});qb.connect(tb,"update",this,"updateShadow",{converter:function(Rb){return{blur:Rb}}});qb.connect(ta,"update",this,"updateShadow",
{converter:function(Rb){return{rotation:Rb}}});return new qb.Morph({layout:new qb.GridLayout({autoAssign:!1,fitToCell:!1,columns:[0,{paddingLeft:1}],rows:qb.arr.flatten(qb.arr.range(0,3).map(function(Rb){return[Rb,{paddingBottom:5}]}),1),grid:[["spreadLabel",null,"spreadSlider"],["distanceLabel",null,"distanceSlider"],["blurLabel",null,"blurSlider"],["angleLabel",null,"angleSlider"],["colorLabel",null,"colorPicker"]]}),width:120,height:145,fill:qb.Color.transparent,submorphs:qb.arr.flatten([["distance",
J],["spread",Ta],["blur",tb],["angle",ta],["color",Ba]].map(function(Rb){var mc=$jscomp.makeIterator(Rb);Rb=mc.next().value;mc=mc.next().value;return[{type:"label",styleClasses:["controlName"],value:qb.string.capitalize(Rb)+":",name:Rb+"Label"},mc]}))})}},{key:"changeShadowType",value:function(Ba){"No Shadow"==Ba?this.toggleShadow(!1):"Inset Shadow"==Ba?(this.toggleShadow(!0),this.shadowValue.inset=!0):(this.toggleShadow(!0),this.shadowValue.inset=!1);this.get("control container").animate({submorphs:[this.get("shadow type")].concat(this.shadowValue?
this.shadowControls():[]),duration:300})}},{key:"updateShadow",value:function(Ba){var J=this.shadowValue;Ba=Object.assign({fast:J.fast,color:J.color,spread:J.spread,blur:J.blur,distance:J.distance,rotation:J.rotation,inset:J.inset},Ba);this.shadowValue=new qb.ShadowObject(Ba)}},{key:"toggleShadow",value:function(Ba){this.shadowValue&&(this.cachedShadow=this.shadowValue);this.shadowValue=Ba&&this.cachedShadow}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowPopover"}},{key:"properties",
get:function(){return{shadowValue:{},cachedShadow:{defaultValue:new qb.ShadowObject({fast:!0})},popoverColor:{defaultValue:qb.Color.gray.lighter()}}}}],sb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:14243,end:18677})}(qb.StylePopover));qb.ShadowPopover=xc;qb.ShadowPopover=
xc;qb.ShadowPopover=xc;qb.milimeter="https://upload.wikimedia.org/wikipedia/commons/c/c8/Millimeterpapier_10_x_10_cm.svg";xc=function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),hb=sb.hasOwnProperty("PointPopover")&&"function"===typeof sb.PointPopover?sb.PointPopover:sb.PointPopover=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(hb,Ld,[{key:"refineResolution",value:function(Ba){this.resolution=
.25+this.get("scroller").scroll.y/160;this.relayout()}},{key:"adjustPoint",value:function(Ba){this.pointValue=this.pointValue.addPt(Ba.state.dragDelta.scaleBy(1/this.resolution)).roundTo(1);this.relayout()}},{key:"relayout",value:function(){Cb._get(Object.getPrototypeOf(hb.prototype),"relayout",this).call(this);var Ba=this.getSubmorphNamed("mesh"),J=this.getSubmorphNamed("point value view");Ba.origin=Ba.innerBounds().center().addXY(4,1);Ba.position=this.get("body").innerBounds().center();Ba.scale=
this.resolution;this.getSubmorphNamed("resolution view").value="Resolution: "+this.resolution.toFixed(2)+"x";J.value=qb.obj.safeToString(this.pointValue);J.position=this.getSubmorphNamed("knob").bottomRight}},{key:Symbol.for("lively-instance-initialize"),value:function(Ba){var J=this;Cb._get(Object.getPrototypeOf(hb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Ba);this.whenRendered().then(function(){return J.relayout()})}},{key:"calibrate",value:function(){var Ba=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==
J.nextAddress)return Ba.get("knob").animate({center:Ba.innerBounds().center(),duration:200}),J.yield(Ba.getSubmorphNamed("point value view").animate({opacity:0,duration:200}),2);Ba.relayout();J.jumpToEnd()})}},{key:"showPointValue",value:function(){this.getSubmorphNamed("point value view").animate({opacity:1,duration:200})}},{key:"controls",value:function(){this.extent=qb.pt(200,200);var Ba,J,ta=[qb.morph({extent:qb.pt(200,200),clipMode:"hidden",fill:qb.Color.transparent,submorphs:[{type:"image",
name:"mesh",fill:qb.Color.transparent,opacity:.5,imageUrl:qb.milimeter,autoResize:!0},{extent:qb.pt(200,200),draggable:!1,dropShadow:{inset:!0,spread:5,color:qb.Color.gray},fill:qb.Color.transparent},Ba=qb.morph({name:"scroller",extent:qb.pt(200,200),clipMode:"scroll",draggable:!1,opacity:.01,submorphs:[{height:625.6,width:10}]}),J=qb.morph({name:"knob",type:"ellipse",nativeCursor:"-webkit-grab",fill:qb.Color.red,borderColor:qb.Color.black,borderWidth:1,center:qb.pt(100,100),draggable:!0}),{type:"label",
name:"point value view",padding:4,opacity:0,styleClasses:["Tooltip"]},{position:qb.pt(10,10),type:"label",name:"resolution view",padding:4,styleClasses:["Tooltip"]}]})];Ba.scroll=qb.pt(0,120);qb.connect(J,"onDragStart",this,"showPointValue");qb.connect(J,"onDrag",this,"adjustPoint");qb.connect(J,"onDragEnd",this,"calibrate");qb.connect(this,"extent",this,"relayout");qb.connect(Ba,"onScroll",this,"refineResolution");return ta}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointPopover"}},
{key:"properties",get:function(){return{pointValue:{defaultValue:qb.pt(0,0)},resolution:{defaultValue:1}}}}],sb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:18792,end:21996})}(qb.StylePopover);qb.PointPopover=xc;qb.PointPopover=xc;qb.PointPopover=xc;xc=function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),
hb=sb.hasOwnProperty("RectanglePopover")&&"function"===typeof sb.RectanglePopover?sb.RectanglePopover:sb.RectanglePopover=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(hb,Ld,[{key:"controls",value:function(){var Ba=this;return[{fill:qb.Color.transparent,extent:qb.pt(120,120),layout:new qb.GridLayout({grid:[["top","top scrubber"],["right","right scrubber"],["left","left scrubber"],["bottom","bottom scrubber"]],
columns:[0,{paddingLeft:4},1,{paddingRight:4,fixed:!0,width:60}],rows:qb.arr.flatten(qb.arr.range(0,3).map(function(J){return[J,{paddingTop:0==J?4:2,paddingBottom:3==J?4:2}]}))}),submorphs:qb.arr.flatten(["top","right","bottom","left"].map(function(J){var ta=new qb.NumberWidget({master:{auto:"styleguide://SystemWidgets/number field/light"},name:J+" scrubber",autofit:!1,number:Ba.rectangle.partNamed(J)});qb.connect(ta,"update",Ba,"rectangle",{updater:function(Ta,tb){var Rb=this.targetObj.rectangle,
mc={};tb=(mc.left=Rb.left(),mc.top=Rb.top(),mc.right=Rb.right(),mc.bottom=Rb.bottom(),mc[J]=tb,mc);Ta(qb.Rectangle.inset(tb.left,tb.top,tb.right,tb.bottom))},varMapping:{side:J,Rectangle:qb.Rectangle}});return[{type:"label",styleClasses:["controlName"],name:J,value:J,padding:3},ta]}))}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RectanglePopover"}},{key:"properties",get:function(){return{popoverColor:{defaultValue:qb.Color.gray.lighter()},rectangle:{defaultValue:qb.rect(0)}}}}],
sb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22005,end:23989})}(qb.StylePopover);qb.RectanglePopover=xc;qb.RectanglePopover=xc;qb.RectanglePopover=xc;xc=function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),hb=sb.hasOwnProperty("TextPopover")&&
"function"===typeof sb.TextPopover?sb.TextPopover:sb.TextPopover=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(hb,Ld,[{key:"controls",value:function(){var Ba=new qb.Text(Object.assign({name:"editor",extent:qb.pt(300,200),textString:this.text,lineWrapping:"by-chars"},qb.config.codeEditor.defaultStyle));return[{layout:new qb.HorizontalLayout,fill:qb.Color.transparent,borderColor:qb.Color.gray,borderWidth:1,
borderRadius:4,clipMode:"hidden",submorphs:[Ba]}]}},{key:"commands",get:function(){return Cb._get(Object.getPrototypeOf(hb.prototype),"commands",this).concat([{name:"save string",exec:function(Ba){return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){Ba.text=Ba.get("editor").textString;qb.signal(Ba,"save",Ba.text);Ba.setStatusMessage("String saved!",qb.Color.green);J.jumpToEnd()})}}])}},{key:"keybindings",get:function(){return Cb._get(Object.getPrototypeOf(hb.prototype),"keybindings",this).concat([{keys:{mac:"Command-S",
win:"Ctrl-S"},command:"save string"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextPopover"}},{key:"properties",get:function(){return{text:{defaultValue:"Enter some text!"}}}}],sb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23998,end:25073})}(qb.StylePopover);
qb.TextPopover=xc;qb.TextPopover=xc;qb.TextPopover=xc;Object.assign(qb.popovers,{FillPopover:qb.FillPopover,IconPopover:qb.IconPopover,RectanglePopover:qb.RectanglePopover,ShadowPopover:qb.ShadowPopover,PointPopover:qb.PointPopover,LayoutPopover:qb.LayoutPopover});var rb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js");rb.Morph=ee;rb.morph=zb;rb.StyleSheet=wd;rb.Text=qc;rb.Icon=ob;rb.VerticalLayout=rd;rb.GridLayout=gb;rb.HorizontalLayout=Ab;rb.pt=oc;rb.Rectangle=za;rb.Color=
mb;rb.LinearGradient=ya;rb.rect=vb;rb.signal=Qc;rb.once=Ga;rb.connect=ic;rb.obj=Kb;rb.num=jb;rb.Window=wa;rb.ColorPalette=Oc;rb.FillPopover=he;rb.colorWidgets=xd;rb.Slider=Cc;rb.Popover=Ja;rb.resource=ja;rb.WHEEL_URL="/lively.ide/assets/color-wheel.png";Oc=function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),hb=sb.hasOwnProperty("ColorPickerField")&&"function"===typeof sb.ColorPickerField?sb.ColorPickerField:sb.ColorPickerField=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(hb,Ld,[{key:"spec",value:function(){return rb.obj.dissoc(Cb._get(Object.getPrototypeOf(hb.prototype),"spec",this).call(this),["submorphs"])}},{key:"onKeyDown",value:function(Ba){"Escape"==Ba.key&&(this.picker&&this.picker.remove(),this.colorValue.isGradient?this.fillWidget.remove():this.palette.remove())}},{key:"onHoverIn",value:function(){this.get("dropDownIndicator").animate({opacity:1,duration:300})}},{key:"onHoverOut",
value:function(){this.get("dropDownIndicator").animate({opacity:0,duration:300})}},{key:"update",value:function(Ba){this._updating=!0;var J=this.submorphs[1];this.colorValue=Ba;this.get("topLeft").fill=Ba;this.get("bottomRight").fill=Ba.isGradient?rb.Color.transparent:Ba.withA(1);J.visible=J.isLayoutable=!this.gradientEnabled;this.gradientEnabled?this.get("bottomRight").width=this.get("topLeft").width=this.submorphs[0].width=this.width:this.get("bottomRight").width=this.get("topLeft").width=Math.max(1,
this.width-J.width);this.get("bottomRight").left=0;this.get("dropDownIndicator").right=this.get("paletteButton").width-5;this._updating=!1}},{key:"openPicker",value:function(Ba){var J=this,ta,Ta;return $jscomp.asyncExecutePromiseGeneratorProgram(function(tb){if(1==tb.nextAddress)return(ta=J.picker)?tb.jumpTo(2):tb.yield(rb.resource("part://SystemWidgets/new color picker").read(),3);2!=tb.nextAddress&&(ta=tb.yieldResult);Ta=ta;Ta.solidOnly=!J.gradientEnabled;Ta.hasFixedPosition=!0;Ta.focusOnMorph(J.context,
J.colorValue);Ta.toggleHalos(!1);Ta.position=rb.pt(0,-Ta.height/2);rb.connect(Ta,"value",J,"update");J.picker=Ta.openInWorld();J.picker.topLeft=J.globalBounds().bottomCenter();J.picker.topLeft=J.world().visibleBounds().translateForInclusion(J.picker.globalBounds()).topLeft();tb.jumpToEnd()})}},{key:"removePicker",value:function(){this.picker&&this.picker.remove()}},{key:"openPalette",value:function(Ba){var J=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ta){J.openPicker(Ba);ta.jumpToEnd()})}},
{key:"removeWidgets",value:function(){this.removePicker()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPickerField"}},{key:"properties",get:function(){return{gradientEnabled:{defaultValue:!1,after:["colorValue"],set:function(Ba){this.setProperty("gradientEnabled",Ba);this.update(this.colorValue)}},fillWidget:{serialize:!1,get:function(){return this._fillWidget=new rb.FillPopover({fillValue:this.colorValue})}},testProp:{get:function(){return[42]}},palette:{serialize:!1,get:function(){return this._palette||
(this._palette=new rb.Popover({position:rb.pt(0,0),name:"Color Palette",targetMorph:new rb.ColorPalette({color:this.colorValue})}))}},colorValue:{after:["submorphs"],set:function(Ba){Ba&&(Ba.isColor||Ba.isGradient)||(Ba=rb.Color.blue);if(!this._updating)return this.update(Ba);this.setProperty("colorValue",Ba)},get:function(){return this.getProperty("colorValue")||rb.Color.white}},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/color field"}}},submorphs:{initialize:function(){this.innerBounds().topRight();
this.innerBounds().bottomLeft();var Ba=rb.pt(40,25);this.submorphs=[{extent:Ba,clipMode:"hidden",name:"paletteButton",submorphs:[{name:"topLeft",extent:Ba},{name:"bottomRight",type:"polygon",extent:Ba,origin:rb.pt(0,0),vertices:[rb.pt(0,0),Ba.withX(0),Ba]},rb.Icon.makeLabel("chevron-down",{opacity:0,name:"dropDownIndicator",center:rb.pt(30,12.5)})]},{fill:rb.Color.transparent,extent:rb.pt(25,25),onHoverIn:function(){this.fill=rb.Color.black.withA(.2)},onHoverOut:function(){this.fill=rb.Color.transparent},
submorphs:[{name:"pickerButton",type:"image",autoResize:!1,imageUrl:rb.WHEEL_URL}]}];rb.connect(this.getSubmorphNamed("pickerButton"),"onMouseDown",this,"openPicker");rb.connect(this.getSubmorphNamed("paletteButton"),"onMouseDown",this,"openPalette");rb.connect(this,"remove",this,"removeWidgets");this.colorValue&&this.update(this.colorValue)}}}}}],sb,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:689,end:5910})}(rb.Morph);rb.ColorPickerField=Oc;rb.ColorPickerField=Oc;rb.ColorPickerField=Oc;rb.colorWidgets.ColorPickerField=rb.ColorPickerField;(function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),hb=sb.hasOwnProperty("FieldPicker")&&"function"===typeof sb.FieldPicker?sb.FieldPicker:sb.FieldPicker=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Cb(hb,Ld,[{key:"confirm",value:function(){rb.signal(this,"shadeChanged",[this.brightness,this.saturation])}},{key:"update",value:function(Ba){var J=$jscomp.makeIterator(Ba.color.toHSB());Ba=J.next().value;var ta=J.next().value;J=J.next().value;this.getSubmorphNamed("hue").fill=rb.Color.hsb(Ba,1,1);this.brightness=J;this.saturation=ta;this.refresh()}},{key:"refresh",value:function(){this.get("picker").center=this.pickerPosition}},{key:"onMouseDown",value:function(Ba){this.pickerPosition=
Ba.positionIn(this);this.confirm()}},{key:"onDrag",value:function(Ba){this.pickerPosition=Ba.positionIn(this);this.confirm()}},{key:"relayout",value:function(){var Ba=this.innerBounds();this.getSubmorphNamed("hue").setBounds(Ba);this.getSubmorphNamed("shade").setBounds(Ba);this.getSubmorphNamed("light").setBounds(Ba)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FieldPicker"}},{key:"properties",get:function(){return{fill:{defaultValue:rb.Color.transparent},saturation:{defaultValue:0},
brightness:{defaultValue:0},draggable:{defaultValue:!0},pickerPosition:{derived:!0,after:["submorphs","brightness","saturation"],get:function(){var Ba=this.saturation,J=this.brightness;return void 0===Ba||void 0===J?rb.pt(0,0):rb.pt(this.getSubmorphNamed("hue").width*Ba,this.getSubmorphNamed("hue").height*(1-J))},set:function(Ba){var J=Ba.x;Ba=Ba.y;var ta=this.getSubmorphNamed("hue"),Ta=ta.height;this.saturation=rb.num.clamp(J/ta.width,0,1);this.brightness=rb.num.clamp(1-Ba/Ta,0,1);this.refresh()}},
submorphs:{initialize:function(){this.submorphs=[{borderRadius:3,name:"hue",reactsToPointer:!1},{borderRadius:3,name:"shade",reactsToPointer:!1,fill:new rb.LinearGradient({stops:[{color:rb.Color.white,offset:0},{color:rb.Color.transparent,offset:1}],vector:"eastwest"})},{borderRadius:3,name:"light",reactsToPointer:!1,fill:new rb.LinearGradient({stops:[{color:rb.Color.black,offset:0},{color:rb.Color.transparent,offset:1}],vector:"southnorth"})},{name:"picker",type:"ellipse",reactsToPointer:!1,fill:rb.Color.transparent,
borderColor:rb.Color.black,borderWidth:3,extent:rb.pt(16,16),submorphs:[{type:"ellipse",fill:rb.Color.transparent,borderColor:rb.Color.white,reactsToPointer:!1,borderWidth:3,center:rb.pt(8,8),extent:rb.pt(12,12)}]}];rb.connect(this,"extent",this,"relayout")}}}}}],sb,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:5964,end:9331})})(rb.Morph);(function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),hb=sb.hasOwnProperty("ColorPropertyView")&&"function"===typeof sb.ColorPropertyView?sb.ColorPropertyView:sb.ColorPropertyView=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(hb,Ld,[{key:"onFocus",value:function(){this.get("keyLabel").styleClasses=["key"].concat($jscomp.arrayFromIterable(this.readOnly?
[]:["large","active"]));this.styleClasses=[].concat($jscomp.arrayFromIterable(this.readOnly?[]:["editable","active"]),["value"]);this.selection.cursorBlinkStart()}},{key:"onBlur",value:function(){this.get("keyLabel").styleClasses=[!this.readOnly&&"large","key"];this.styleClasses=[!this.readOnly&&"editable","value"];this.selection.uninstall()}},{key:"onKeyDown",value:function(Ba){"Enter"!=Ba.keyCombo||this.readOnly?Cb._get(Object.getPrototypeOf(hb.prototype),"onKeyDown",this).call(this,Ba):(this.owner.focus(),
Ba.stop(),rb.signal(this,"updateValue",this.value))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPropertyView"}},{key:"properties",get:function(){return{update:{},value:{derived:[!0],set:function(Ba){this.textString=rb.obj.safeToString(Ba)},get:function(){return this.textString}},styleClasses:{after:["readOnly"],initialize:function(){this.styleClasses=[!this.readOnly&&"editable","value"]}},selectionColor:{defaultValue:rb.Color.gray.darker()}}}}],sb,{pathInPackage:function(){return"styling/color-picker.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:9340,end:10510})})(rb.Text);(function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),hb=sb.hasOwnProperty("HuePicker")&&"function"===typeof sb.HuePicker?sb.HuePicker:sb.HuePicker=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Cb(hb,Ld,[{key:"confirm",value:function(){rb.signal(this,"hueChanged",this.hue)}},{key:"onMouseDown",value:function(Ba){var J=this.get("slider").width;this.sliderPosition=rb.pt(0,Ba.positionIn(this).y-J/2);this.confirm()}},{key:"onDrag",value:function(Ba){var J=this.get("slider").width;this.sliderPosition=rb.pt(0,Ba.positionIn(this).y-J/2);this.confirm()}},{key:"update",value:function(Ba){this.hue=Ba.hsb[0];this.refresh()}},{key:"refresh",value:function(){this.get("slider").center=
this.sliderPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HuePicker"}},{key:"properties",get:function(){return{fill:{defaultValue:new rb.LinearGradient({stops:[{color:rb.Color.rgb(255,0,0),offset:0},{color:rb.Color.rgb(255,255,0),offset:.17},{color:rb.Color.limeGreen,offset:.33},{color:rb.Color.cyan,offset:.5},{color:rb.Color.blue,offset:.66},{color:rb.Color.magenta,offset:.83},{color:rb.Color.rgb(255,0,0),offset:1}],vector:"northsouth"})},borderRadius:{defaultValue:3},
hue:{defaultValue:0},sliderPosition:{derived:!0,after:["submorphs"],get:function(){return rb.pt(this.width/2,5+this.hue/360*(this.height-10))},set:function(Ba){this.hue=Math.max(0,Math.min(Ba.y/(this.height-10)*360,359));this.refresh()}},submorphs:{initialize:function(){this.submorphs=[{name:"slider",height:10,width:50,borderRadius:3,reactsToPointer:!1,nativeCursor:"ns-resize",borderColor:rb.Color.black,fill:rb.Color.transparent,borderWidth:2}]}}}}}],sb,{pathInPackage:function(){return"styling/color-picker.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10512,end:12485})})(rb.Morph);(function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),hb=sb.hasOwnProperty("ColorDetails")&&"function"===typeof sb.ColorDetails?sb.ColorDetails:sb.ColorDetails=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(hb,Ld,[{key:"update",value:function(Ba){Ba=Ba.color;var J=$jscomp.makeIterator(Ba.toTuple8Bit()),ta=J.next().value,Ta=J.next().value;J=J.next().value;var tb=$jscomp.makeIterator(Ba.toHSB()),Rb=tb.next().value,mc=tb.next().value;tb=tb.next().value;var Zb=this.get("hashViewer");this.get("colorViewer").fill=Ba;Zb.replace(Zb.documentRange,Ba.toHexString(),!1,!1);this.get("R").value="R "+ta.toFixed(0)+"\n\nG "+Ta.toFixed(0)+
"\n\nB "+J.toFixed(0)+"\n\nH "+Rb.toFixed(0)+"\n\nS "+mc.toFixed(2)+"\n\nV "+tb.toFixed(2)}},{key:"onHashViewerChanged",value:function(Ba){Ba=rb.Color.rgbHex(Ba);this.owner.owner.color=Ba}},{key:"keyValue",value:function(Ba){var J=Ba.name,ta=Ba.key,Ta=Ba.value,tb=Ba.update;Ba=Ba.editable;return new rb.Morph({fill:rb.Color.transparent,layout:new rb.HorizontalLayout({spacing:5}),submorphs:[{type:"label",name:"keyLabel",styleClasses:[Ba&&"large","key"],value:ta},new rb.ColorPropertyView({name:J||ta,
readOnly:!Ba,value:Ta,update:tb})]})}},{key:"hashViewer",value:function(){var Ba=this.keyValue({name:"hashViewer",key:"#",editable:!0,value:this.color.toHexString()});rb.connect(Ba.get("hashViewer"),"updateValue",this,"onHashViewerChanged");return Ba}},{key:"rgbViewer",value:function(){var Ba=$jscomp.makeIterator(this.color.toTuple8Bit()),J=Ba.next().value,ta=Ba.next().value;Ba=Ba.next().value;return new rb.Morph({name:"rgbViewer",fill:rb.Color.transparent,submorphs:[this.keyValue({key:"R",value:J.toFixed()}),
this.keyValue({key:"G",value:ta.toFixed()}),this.keyValue({key:"B",value:Ba.toFixed()})]})}},{key:"hsbViewer",value:function(){var Ba=$jscomp.makeIterator(this.color.toHSB()),J=Ba.next().value,ta=Ba.next().value;Ba=Ba.next().value;return new rb.Morph({name:"hsbViewer",fill:rb.Color.transparent,submorphs:[this.keyValue({key:"H",value:J.toFixed()}),this.keyValue({key:"S",value:ta.toFixed(2)}),this.keyValue({key:"V",value:Ba.toFixed(2)})]})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorDetails"}},
{key:"properties",get:function(){return{color:{defaultValue:rb.Color.blue},width:{defaultValue:80},fill:{defaultValue:rb.Color.transparent},layout:{initialize:function(){this.layout=new rb.VerticalLayout({spacing:9,layoutOrder:function(Ba){return this.container.submorphs.indexOf(Ba)}})}},submorphs:{after:["color"],initialize:function(){this.submorphs=[{type:"ellipse",extent:rb.pt(50,50),name:"colorViewer",fill:this.color},this.hashViewer(),{type:"label",name:"R",autofit:!0,padding:rb.rect(10,0,0,
0),styleClasses:["ColorPropertyView"]}];this.update(this)}}}}}],sb,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:12494,end:15269})})(rb.Morph);Oc=Ia("a",function(Ld){var sb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),hb=sb.hasOwnProperty("ColorPicker")&&
"function"===typeof sb.ColorPicker?sb.ColorPicker:sb.ColorPicker=function(Ba){Ba&&Ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(hb,Ld,[{key:"onKeyDown",value:function(Ba){"Escape"==Ba.key&&this.close()}},{key:"close",value:function(){Cb._get(Object.getPrototypeOf(hb.prototype),"close",this).call(this);rb.signal(this,"close")}},{key:"update",value:function(){0!=this.submorphs.length&&(this.get("header").fill=rb.Color.transparent,
this.get("field picker").update(this),this.get("hue picker").update(this),this.get("details").update(this),this.get("alpha slider").update(this.alpha),rb.signal(this,"color",this.color))}},{key:"colorPalette",value:function(){var Ba=this.colorDetails(),J=this.fieldPicker(),ta=this.huePicker(),Ta=this.alphaSlider();Ba=new rb.Morph({master:{auto:"styleguide://SystemWidgets/color picker"},name:"colorPalette",width:this.width,submorphs:[J,ta,Ba,Ta]});rb.connect(J,"brightness",this,"brightness");rb.connect(J,
"saturation",this,"saturation");rb.connect(ta,"hue",this,"hue");return Ba}},{key:"alphaSlider",value:function(){var Ba,J=rb.morph({name:"alphaSlider",fill:rb.Color.transparent,layout:new rb.HorizontalLayout({spacing:3}),submorphs:[{type:"label",padding:rb.Rectangle.inset(3),value:"Alpha",fontColor:rb.Color.gray,fontWeight:"bold"},Ba=new rb.Slider({name:"alpha slider",value:this.alpha,min:0,max:1,width:170})]});rb.connect(Ba,"value",this,"alpha");return J}},{key:"fieldPicker",value:function(){return new rb.FieldPicker({name:"field picker",
saturation:this.saturation,brightness:this.brightness})}},{key:"huePicker",value:function(){return new rb.HuePicker({name:"hue picker",hue:this.hue})}},{key:"colorDetails",value:function(){return new rb.ColorDetails({name:"details",color:this.color})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPicker"}},{key:"properties",get:function(){return{extent:{defaultValue:rb.pt(400,320)},fill:{defaultValue:rb.Color.black.withA(.7)},isHaloItem:{defaultValue:!0},borderWidth:{defaultValue:0},
hasFixedPosition:{defaultValue:!0},color:{defaultValue:rb.Color.blue,derived:!0,before:["submorphs","targetMorph"],get:function(){return rb.Color.hsb(this.hue,this.saturation,this.brightness).withA(this.alpha)},set:function(Ba){var J=$jscomp.makeIterator(Ba.toHSB()),ta=J.next().value,Ta=J.next().value;J=J.next().value;this.hue=ta;this.saturation=Ta;this.brightness=J;this.alpha=Ba.a}},alpha:{set:function(Ba){this.setProperty("alpha",Ba);this.update()}},saturation:{},brightness:{set:function(Ba){this.setProperty("brightness",
Ba);this.update()}},hue:{set:function(Ba){this.setProperty("hue",Ba);this.update()}},targetMorph:{initialize:function(){var Ba=this;this.targetMorph=this.colorPalette();this.ui.windowTitle.fontColor=rb.Color.gray;this.ui.header.fill=rb.Color.transparent;this.whenRendered().then(function(){Ba.fill=rb.Color.black.withA(.7);Ba.update()})}}}}}],sb,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:15278,end:19116})}(rb.Window));rb.ColorPicker=Oc;rb.ColorPicker=Oc;rb.ColorPicker=Oc}}});