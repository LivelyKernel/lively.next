System.register(["kld-intersections"],function(Ka,wb){var Ab;return{setters:[function(gc){Ab=gc.default}],execute:function(){function gc(g,c){return Array.isArray(g)?g.reduce(function(k,f){return gc(f,k)},c):"string"===typeof g?c.filter(function(k){return k.path()!==g&&k.name()!==g}):g instanceof RegExp?c.filter(function(k){return!g.test(k.path())&&!g.test(k.name())}):"function"===typeof g?c.filter(function(k){return!g(k)}):c}function Kb(g){g=$jscomp.makeIterator(g.split("?"));g.next();var c=
g.next().value;g={};if(!c)return g;if(c=c.split("&"))for(var k=0;k<c.length;k++){var f=c[k].split("="),l=f[0],p=!0;if(1<f.length)if(p=decodeURIComponent(f.slice(1).join("=")),"undefined"===p)p=void 0;else if(p.match(/^(true|false|null|[0-9"[{].*)$/))try{p=JSON.parse(p)}catch(b){"["===p[0]&&(p=p.slice(1,-1).split(","))}g[l]=p}return g}function Zc(g){return Object.keys(g).map(function(c){return c+"="+encodeURIComponent(String(g[c]))}).join("&")}function Kc(g){var c=g.replace(Ze.pathDoubleSlashRe,"$1/");
c=c.replace(Ze.pathDotRe,"/");do g=c,c=g.replace(Ze.pathDoubleDotRe,"");while(c!=g);return c}function md(g,c){var k=g.match(Ze.urlRe),f=c.match(Ze.urlRe),l=!0;if(k&&!f||!k&&f)l=!1;if(k&&f){var p=k[1];var b=k[2];var d=f[1];var h=f[2];p!==d?l=!1:b!==h?l=!1:(g=k[3],c=f[3])}if(!l)throw Error("[relativePathBetween] incompatible paths: "+g+" vs. "+c);g=Ze.withRelativePartsResolved(g);c=Ze.withRelativePartsResolved(c);if(g==c)return"";k=Ze._relativePathBetween_checkPathes(c,g);if(!k)throw Error("pathname differs in relativePathFrom "+
g+" vs "+c);return k}function Fc(g,c){return Ze.withRelativePartsResolved(g.replace(Ze.slashEndRe,"")+"/"+c.replace(Ze.slashStartRe,""))}function Bc(g){return g.startsWith("/")?g.replace(Ze.slashEndRe,"").split("/").slice(0,-1).join("/")+"/":""}function Nc(g){var c=[];for(g=Ze.parent(g);g&&(c.unshift(g),g=Ze.parent(g),"/"!==g););return c}function Uc(g,c){if(!g)throw Error("lively.resource resource constructor: expects url but got "+g);if(g.isResource)return g;g=String(g);for(var k=0;k<Ze.extensions.length;k++)if(Ze.extensions[k].matches(g))return new Ze.extensions[k].resourceClass(g,
c);throw Error("Cannot find resource type for url "+g);}function ce(g,c,k){var f,l,p,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:return f=Uc(g,k).asDirectory(),d.yield(f.ensureExistance(),2);case 2:p=d.forIn(c);case 3:if(null==(l=p.getNext())){d.jumpTo(5);break}if(!c.hasOwnProperty(l)){d.jumpTo(3);break}b=f.join(l);return"object"===typeof c[l]?d.yield(ce(b,c[l],k),9):d.yield(b.write(c[l]),8);case 8:d.jumpTo(7);break;case 9:case 7:d.jumpTo(3);break;
case 5:return d.return(f)}})}function Zd(g){var c=g.name;Ze.extensions=Ze.extensions.filter(function(k){return k.name!==c}).concat(g)}function pe(g){var c="string"===typeof g?g:g.name;Ze.extensions=Ze.extensions.filter(function(k){return k.name!==c})}function Mc(g,c,k){k=k||0;var f=[];if(g<=c)for(0>=k&&(k=-k||1);g<=c;g+=k)f.push(g);else for(0<=k&&(k=-k||-1);g>=c;g+=k)f.push(g);return f}function Kd(g,c){for(var k=Array(g);0<g;)k[--g]=c;return k}function Jb(g,c){for(var k=Array(g);0<g;)k[--g]=c(g);
return k}function Dc(g,c,k){for(var f=[],l=0;l<g.length;l++){var p=g[l];c.call(k,p)&&f.push(p)}return f}function nd(g,c,k,f){f=void 0===f?!1:f;if(g&&Rb.isArray(g)){for(var l=0,p=g.length-1;l<=p;){var b=l+Math.floor((p-l)/2),d=k?k(g[b]):g[b];if(d===c)return g[b];d>c?p=b-1:l=b+1}if(f){if(!g[l])return g[p];if(!g[p])return g[l];f=k?k(g[l]):g[l];k=k?k(g[p]):g[p];return 0>Math.abs(f-c)-Math.abs(k-c)?g[l]:g[p]}}}function Hc(g,c){var k;g.find(function(f,l){return k=c(f,l)});return k}function wd(g,c){return g.filter(function(k){return!!k[c]})}
function Qd(g,c,k){"string"===typeof c&&(c=new RegExp(c,"i"));return Rb.filter(g,Rb.filter.test.bind(c))}function Eb(g,c){return Rb.filter(g,function(k,f){return!!c[f]})}function ic(g,c,k){return Rb.filter(g,function(f,l){return!c.call(k,f,l)})}function jd(g,c){return Rb.filter(g,function(k){return!k[c]})}function jc(g,c){return Rb.filter(g,function(k){return k!==c})}function kd(g,c){return Rb.filter(g,function(k){return-1===c.indexOf(k)})}function vb(g,c){if(!g.length)return g;var k=[g[0]];if(c)for(c=
1;c<g.length;c++){var f=g[c];f!==k[k.length]&&k.push(f)}else for(c=1;c<g.length;c++)f=g[c],-1===k.indexOf(f)&&k.push(f);return k}function db(g,c,k){for(var f=g.slice(),l=f.length;l--;)for(var p=g[l],b=l+1;b<f.length;b++)c.call(k,p,f[b])&&f.splice(b--,1);return f}function ec(g,c){for(var k={},f=[],l=0;l<g.length;l++){var p=g[l];k[p[c]]||(k[p[c]]=!0,f.push(p))}return f}function Mb(g){return Rb.filter(g,Boolean)}function Hb(g){for(var c=0,k=0,f=g.length;c<f;)g.hasOwnProperty(c)&&(g[k++]=g[c]),c++;for(;k++<
f;)g.pop();return g}function pc(g,c,k){return g.forEach(c,k)}function Ma(){var g=Array.from(arguments),c=g.shift(),k="function"===typeof Rb.last(g)?g.pop():function(l){return l},f=[c].concat(g).map(function(l){return Array.from(l)});return c.map(function(l,p){return k(Rb.pluck(f,p),p)})}function Ib(g,c){if("number"===typeof c){if(0>=c)return g;c--}return g.reduce(function(k,f){return k.concat(Array.isArray(f)?Ib(f,c):[f])},[])}function pb(g,c,k){for(var f=[],l=0;l<g.length;l++)f.push.apply(f,c.call(k,
g[l],l));return f}function Ub(g,c){return g.reduce(function(k,f){0<k.length&&k.push(c);k.push(f);return k},[])}function dc(g,c){return Rb.interpose(g,c)}function vc(g,c,k){return g.map(c,k)}function gd(g,c,k,f,l,p,b,d){return g.map(function(h){return h[c](k,f,l,p,b,d)})}function Nb(g,c){return g.map(function(k){return k[c]})}function Fb(g,c,k,f){return g.reduce(c,k,f)}function sb(g,c,k,f){return g.reduceRight(c,k,f)}function Ea(g,c,k){return g.some(c,k)}function ua(g,c,k){return g.every(c,k)}function V(g,
c){var k=g.length;if(!c||k!==c.length)return!1;for(var f=0;f<k;f++){if(g[f]&&c[f]&&g[f].equals&&c[f].equals)if(g[f].equals(c[f]))continue;else return!1;if(g[f]!=c[f])return!1}return!0}function ra(g,c){var k=g.length;if(!c||k!==c.length)return!1;for(var f=0;f<k;f++)if(!Rb.objectEquals(g[f],c[f]))return!1;return!0}function ja(g,c){if(c)for(c=1;c<g.length;c++){if(g[c-1]<g[c])return!1}else for(c=1;c<g.length;c++)if(g[c-1]>g[c])return!1;return!0}function Ca(g,c){return g.sort(c)}function va(g,c,k){return Rb.pluck(g.map(function(f,
l){return{value:f,criteria:c.call(k,f,l)}}).sort(function(f,l){f=f.criteria;l=l.criteria;return f<l?-1:f>l?1:0}),"value")}function cb(g,c){return Rb.sortBy(g,function(k){return k[c]})}function hc(g){return g.reverse()}function gb(g){return g.slice().reverse()}function Oc(g,c,k){k=k||String;return g.map(function(f){return k(f).match(c)})}function Cb(g){return g[0]}function Gd(g){return g[g.length-1]}function Ec(g,c){return Rb.filter(Rb.uniq(g),function(k){return-1<c.indexOf(k)})}function oc(g,c){g=
g.slice();for(var k=0;k<c.length;k++){var f=c[k];-1===g.indexOf(f)&&g.push(f)}return g}function rb(g,c,k){g.splice(k,0,c)}function Md(g,c){g.splice(c,1)}function yb(g,c){var k=g.indexOf(c);0<=k&&Rb.removeAt(g,k);return c}function qb(g,c){g.push.apply(g,c);return g}function Ia(g,c,k){g.splice.apply(g,[k,0].concat(c))}function Q(g,c){g.includes(c)||g.push(c)}function za(g,c,k){g.splice(k,1,c)}function Ta(g){g.length=0;return g}function xb(g,c){for(var k=0;k<g.length;k++)if(!c.includes(g[k]))return!1;
return!0}function Yb(g,c,k,f){k=k||Rb.NullFunction;f=f||Rb.GLOBAL;c=c||function(l,p,b){p.call(f,l,b)};return g.reduceRight(function(l,p,b){return function(){c.call(f,l,p,b)}},k)()}function Ac(g,c,k,f,l,p){f=f||function(){};return g.clone().reverse().reduce(function(b,d,h){return function(){c.call(l||Rb.GLOBAL,d,h);p&&0!==h%p?b():b.delay(k)}},f)()}function mc(){var g=Array.from(arguments),c=g.shift(),k=c.length,f=!1;if(1===g.length){var l=g[0].progressBar;var p=g[0].iterator;var b=g[0].labelFunction;
var d=g[0].whenDone;var h=g[0].context}else l=g[0],p=g[1],b=g[2],d=g[3],h=g[4];h||(h="undefined"!==typeof window?window:global);b||(b=function(a){return a});l||(f=!0,l=(g=("undefined"!==typeof window?window:global).lively&&lively.morphic&&lively.morphic.World.current())?g.addProgressBar():{value:null,label:null,remove:function(){}});l.value=0;c.reduceRight(function(a,e,n){return function(){try{l.value=n/k,b&&(l.label=b.call(h,e,n)),p.call(h,e,n)}catch(q){console.error("Error in forEachShowingProgress at %s (%s)\n%s\n%s",
n,e,q,q.stack)}Rb.delay(a,0)}},function(){l.value=1;f&&function(){l.remove()}.delay(0);d&&d.call(h)})();return c}function qd(g,c,k){0>c&&(c=g.length+c);0>k&&(k=g.length+k);var f=g[c];g[c]=g[k];g[k]=f;return g}function zd(g,c){c=c||1;return g.slice(c).concat(g.slice(0,c))}function Ee(g,c,k){return Rb.Group.fromArray(g,c,k)}function se(g,c){return Rb.groupBy(g,function(k){return k[c]})}function ke(g,c,k){c=c||function(p){return p};var f=[],l=[];g.forEach(function(p,b){(c.call(k,p,b)?f:l).push(p)});
return[f,l]}function w(g,c,k){function f(p,b){if(!b.length)return[p,[]];var d=b[0];b=b.slice(1);var h=p.concat([d]);if(c.call(k,h))return f(h,b);p=f(p,b);return[p[0],[d].concat(p[1])]}function l(p,b){if(!b.length)return p;b=f([],b);if(!b[0].length)throw Error("Batchify constrained does not ensure consumption of at least one item per batch!");return l(p.concat([b[0]]),b[1])}return l([],g)}function we(g,c){c=c||1;return Rb.range(0,Math.ceil(g.length/c)-1).map(function(k){return g.slice(k*c,k*c+c)},
g)}function ue(g,c){for(var k=g.map(function(b,d){return b[c[d]]}),f=c.slice(),l=g.length;l--;0<=l){var p=f[l]+1;if(g[l][p]){f[l]=p;break}else if(0===l){f=void 0;break}else f[l]=0}return[k,f]}function Od(g){for(var c=g.reduce(function(p,b){return p*b.length},1),k=g.map(function(p){return 0}),f=Array(c),l=0;l<c;l++)k=Rb.combinationsPick(g,k),f[l]=k[0],k=k[1];return f}function He(g,c){return g.slice(0,c)}function Te(g,c){return g.slice(c)}function Ue(g,c,k){for(var f=0;f<g.length&&c.call(k,g[f],f);f++);
return g.slice(0,f)}function ff(g,c,k){for(var f=0;f<g.length&&c.call(k,g[f],f);f++);return g.slice(f)}function gf(g){for(var c=Rb.range(0,g.length-1),k=Array(g.length),f=0;f<g.length;f++){var l=c.splice(Math.round(Math.random()*(c.length-1)),1);k[l]=g[f]}return k}function Wb(g,c,k){c=c||function(l){return l};var f;g.reduce(function(l,p,b){b=c.call(k,p,b);if("number"!==typeof b||b<=l)return l;f=p;return b},-Infinity);return f}function Kh(g,c,k){c=c||function(f){return f};return Rb.max(g,function(f,
l){return-c.call(k,f,l)})}function ef(g){for(var c=0,k=0;k<g.length;k++)c+=g[k];return c}function Fd(g,c){return g.reduce(function(k,f){return f===c?k+1:k},0)}function $d(g){return g.length}function Fa(g,c){if("undefined"===typeof c||"number"===typeof c){var k=c||Math.ceil(Math.log(g.length)/Math.log(2)+1),f=Math.ceil(Math.round(g.length/k));return Rb.range(0,k-1).map(function(l){return g.slice(l*f,(l+1)*f)})}if(c instanceof Array)return g.reduce(function(l,p){if(p<c[1])return l[0].push(p),l;for(var b=
1;b<c.length;b++)if(p>=c[b]&&(!c[b+1]||p<=c[b+1]))return l[b].push(p),l;throw Error("Histogram creation: Cannot group data "+p+" into thresholds "+c);},Rb.range(1,c.length).map(function(){return[]}))}function Wa(g){return[].concat(g)}function Gb(g){return Rb.from(g)}function pa(g,c,k){return g.forEach(c,k)}function xa(g,c,k){return g.every(c,k)}function Ha(g,c,k){return g.some(c,k)}function S(g,c,k){return g.map(c,k)}function ob(g,c,k){return Rb.filter(g,c,k)}function fa(g,c,k,f){f&&(k=k.bind(f));
return g.reduce(k,c)}function Ba(g,c,k){function f(b,d){if(!p&&(b||d)){p=!0;try{k(b,l)}catch(h){console.error("Error in mapAsyncSeries - callback invocation error:\n"+(h.stack||h))}}}var l=[],p=!1;return g.reduceRight(function(b,d,h){if(!p)return function(a,e){if(a)return f(a);0<h&&l.push(e);try{c(d,h,Rb.once(b))}catch(n){f(n)}}},function(b,d){l.push(d);f(b,!0)})()}function Na(g,c,k,f){function l(){for(;e<c.parallel&&a<g.length;)n[a++]()}function p(q,r){if(!(-1<d.indexOf(q)||(d.push(q),e--,h)))if(!r&&
d.length<g.length)l();else{h=!0;try{f&&f(r,b)}catch(v){console.error("Error in mapAsync - main callback invocation error:\n"+(v.stack||v))}}}"function"===typeof c&&(f=k,k=c,c=null);c=c||{};if(!g.length)return f&&f(null,[]);c.parallel||(c.parallel=Infinity);var b=[],d=[],h=!1,a=0,e=0,n=g.map(function(q,r){return function(){e++;try{k(q,r,Rb.once(function(v,y){b[r]=v||y;p(r,v)}))}catch(v){p(r,v)}}});return l()}function tb(){return function(){}}function Sb(){return function(g){return g}}function lc(){return function(){return null}}
function uc(){return function(){return!1}}function rc(){return function(){return!0}}function $c(){return function(){throw Error("Not yet implemented");}}function Jd(g){var c=[],k;for(k in g)g.__lookupGetter__(k)||"function"!==typeof g[k]||c.push(k);return c}function je(g){var c=[],k;for(k in g)!g.__lookupGetter__(k)&&g.hasOwnProperty(k)&&"function"===typeof g[k]&&c.push(k);return c}function td(g){if(g.superclass)return[];var c=g.toString();g="";var k=c.match(/(?:\(([^\)]*)\)|([^\(\)-+!]+))\s*=>/);
k?g=k[1]||k[2]||"":(c=c.match(/^[\s\(]*function[^(]*\(([^)]*)\)/))&&c[1]&&(g=c[1]);return g.replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",").map(function(f){return f.trim()}).filter(function(f){return!!f})}function qe(g){var c="";g.declaredClass?c+=g.declaredClass+">>":g.declaredObject&&(c+=g.declaredObject+".");return c+(g.methodName||g.displayName||g.name||"anonymous")}function Wd(g){g=String(g).replace(/^function[^\{]+\{\s*/,"").replace(/\}$/,"").trim();for(var c=
g.split(/\n|\r/),k,f=0;f<c.length;f++){var l=c[f].match(/^(\s+)[^\s]/);l&&(void 0===k||l[1].length<k.length)&&(k=l[1])}return k?g.replace(new RegExp("^"+k,"gm"),""):g}function Ud(g){var c=Date.now();g();return Date.now()-c}function Re(g,c){for(var k=Date.now(),f=0;f<c;f++)g();return(Date.now()-k)/c}function wf(g,c){var k=Array.prototype.slice.call(arguments),f=k.shift();c=1E3*k.shift();return setTimeout(function(){return f.apply(f,k)},c)}function Bf(g,c){var k,f,l,p,b,d,h=dd.debounce(c,function(){b=
p=!1});return function(){k=this;f=arguments;l||(l=setTimeout(function(){l=null;b&&g.apply(k,f);h()},c));p?b=!0:d=g.apply(k,f);h();p=!0;return d}}function Wf(g,c,k){var f;return function(){var l=this,p=arguments;k&&!f&&c.apply(l,p);clearTimeout(f);f=setTimeout(function(){f=null;k||c.apply(l,p)},g)}}function Gf(g,c,k){var f=dd._throttledByName;return f[g]?f[g]:f[g]=dd.throttle(function(){dd.debounceNamed(g,c,function(){delete f[g]})();return k.apply(this,arguments)},c)}function Mf(g,c,k,f){var l=dd._debouncedByName;
return l[g]?l[g]:l[g]=dd.debounce(c,function(){delete l[g];return k.apply(this,arguments)},f)}function ph(g,c){var k=dd._queues,f=k[g]||(k[g]={_workerActive:!1,worker:c,tasks:[],drain:null,push:function(l){f.tasks.push(l);f._workerActive||f.activateWorker()},pushAll:function(l){l.forEach(function(p){f.tasks.push(p)});f._workerActive||f.activateWorker()},pushNoActivate:function(l){f.tasks.push(l)},handleError:function(l){l&&console.error("Error in queue: "+l)},activateWorker:function(){function l(d){f.handleError(d);
f.activateWorker()}var p=f.tasks,b=f._workerActive;if(0===p.length)b&&(f._workerActive=!1,"function"===typeof f.drain&&f.drain()),delete k[g];else{b||(f._workerActive=!0);try{f.worker(p.shift(),l)}catch(d){l(d)}}}});return f}function uh(g,c,k){function f(){a&&clearTimeout(a);d=!0;delete p[g]}function l(e){d||(f(),b.callbacks.forEach(function(n){try{n.apply(null,e)}catch(q){console.error("Error when invoking callbacks in queueUntil ["+g+"]:\n"+String(q.stack||q))}}))}var p=dd._queueUntilCallbacks,
b=p[g];if(b)return b;var d=!1,h=!1;if(k)var a=setTimeout(function(){d||l([Error("timeout")])},k);b=p[g]={callbacks:[],cancel:function(){h=!0;f()},whenDone:function(e){b.callbacks.push(e);return b}};setTimeout(function(){if(!h)try{c(function(){l(arguments)})}catch(e){l([e])}},0);return b}function Oe(){var g=Array.prototype.slice,c=g.call(arguments),k=dd._composeAsyncDefaultEndCallback,f=k,l,p,b=new Promise(function(d,h){l=d;p=h});return c.reverse().reduce(function(d,h,a){var e=!1;return function(){function n(){e=
!0;var v=g.call(arguments),y=v.shift();y?(f(y),p(y)):d.apply(null,v)}var q=g.call(arguments);if(f===k&&a===c.length-1){for(;q.length&&"function"!==typeof q[q.length-1];)q.pop();"function"===typeof q[q.length-1]&&(f=q.pop())}if("function"===typeof h)try{var r=h.apply(this,q.concat([n]));r&&"function"===typeof r.then&&"function"===typeof r.catch&&r.then(function(v){return n(null,v)}).catch(function(v){return n(v)})}catch(v){console.error("composeAsync: ",v.stack||v),e||(f(v),p(v))}else h&&"function"===
typeof h.then&&"function"===typeof h.catch?h.then(function(v){n(null,v)}).catch(function(v){n(v)}):(q=Error("Invalid argument to composeAsync: "+h),f(q),p(q));return b}},function(){var d=g.call(arguments);f.apply(null,[null].concat(d));l(d[0])})}function Ch(){return Array.prototype.slice.call(arguments).reverse().reduce(function(g,c){return function(){return g(c.apply(this,arguments))}},function(g){return g})}function Nf(g){return function(){var c=Array.prototype.slice.call(arguments);c=[c[1],c[0]].concat(c.slice(2));
return g.apply(null,c)}}function Xf(g){g=g||function(){};return function(){var c=dd.arr.from(arguments);g.apply(null,[null].concat(c))}}function Qg(g,c,k){var f=Date.now(),l=50;k||(k=c,c=g,g=void 0);(function b(){if(c())return k();if(g){var d=Date.now()-f;d=g-d;if(0>=d)return k(Error("timeout"));d<l&&(l=d)}setTimeout(b,l)})()}function xe(g,c,k){function f(b,d,h,a){if(p.length){var e=null;b=p.indexOf(b);-1<b&&p.splice(b,1);h?(p.length=0,e=Error("in waitForAll at"+("number"===typeof d?" "+d:"")+": \n"+
(h.stack||String(h)))):a&&(l[d]=a);p.length||setTimeout(function(){k(e,l)},0)}}k||(k=c,c=g,g=null);g=g||{};var l=c.map(function(){return null});if(c.length){var p=Array.prototype.slice.call(c);c.forEach(function(b,d){try{b(function(){var h=Array.prototype.slice.call(arguments),a=h.shift();f(b,d,a,h)})}catch(h){f(b,d,h,null)}});g.timeout&&setTimeout(function(){if(p.length){var b=l.map(function(d,h){return null===d&&h}).filter(function(d){return"number"===typeof d}).join(", ");f(null,null,Error("waitForAll timed out, functions at "+
b+" not done"),null)}},g.timeout)}else k(null,l)}function Jh(g,c,k,f){function l(){return g.apply(this,p.concat(Array.prototype.slice.call(arguments)))}if(1>=arguments.length)return arguments[0];var p=Array.prototype.slice.call(arguments);g=p.shift();l.isWrapper=!0;l.originalFunction=g;return l}function Vb(g,c){var k=function(){var f=Array.prototype.slice.call(arguments);f=c.isWrapper?f:[g.bind(this)].concat(f);return c.apply(this,f)};k.isWrapper=!0;k.originalFunction=g;return k}function Pc(g){for(;g.originalFunction;)g=
g.originalFunction;return g}function ud(g){var c=[];do c.push(g),g=g.originalFunction;while(g);return c}function Ld(g,c,k){k.originalFunction=g[c];var f=g.hasOwnProperty(c);g[c]=function(){f?g[c]=k.originalFunction:delete g[c];return k.apply(this,arguments)};return g}function mf(g){if(g){if("function"!==typeof g)throw Error("once() expecting a function");var c=!1,k;return function(){if(c)return k;c=!0;return k=g.apply(this,arguments)}}}function pf(){var g=!1;return Array.prototype.slice.call(arguments).map(function(c){return function(){if(!g)return g=
!0,c.apply(this,arguments)}})}function rg(g,c){var k=Array.prototype.slice.call(arguments),f=dd._eitherNameRegistry;g=k.shift();var l=f[g]||(f[g]={wasCalled:!1,callsLeft:0});l.callsLeft++;return function(){l.callsLeft--;0>=l.callsLeft&&delete f[g];if(!l.wasCalled)return l.wasCalled=!0,c.apply(this,arguments)}}function Gj(g){return eval(g)}function qj(g){return dd.evalJS("("+g.toString()+");")}function rj(g,c){return dd.Closure.fromFunction(g,c).recreateFunc()}function zl(g,c,k,f){var l=k||g.name;
if(!l)throw Error("Function that wants to be a script needs a name: "+this);k=Object.getPrototypeOf(c);var p={this:c};f&&(p=dd.objectMerge([p,f]));k&&k[l]&&(p.$super=dd.Closure.fromFunction(function(){try{return Object.getPrototypeOf(c)[l].apply(c,arguments)}catch(b){return"undefined"!==typeof $world?$world.logError(b,"Error in $super call"):console.error("Error in $super call: "+b+"\n"+b.stack),null}},{obj:c,name:l}).recreateFunc());return dd.addToObject(dd.asScript(g,p),c,l)}function Rj(g,c,k){g.displayName=
k;var f=c.attributeConnections?c.attributeConnections.filter(function(l){return"update"===l.getSourceAttrName()}):[];f&&f.forEach(function(l){l.disconnect()});c[k]=g;typeof c&&(g.declaredObject=dd.safeToString(c));"undefined"!==typeof lively&&c&&lively.Tracing&&lively.Tracing.stackTracingEnabled&&lively.Tracing.instrumentMethod(c,k,{declaredObject:dd.safeToString(c)});f&&f.forEach(function(l){l.connect()});return g}function Al(g,c){return dd.Closure.fromFunction(g,c||{}).recreateFunc()}function bl(g,
c,k){g.hasLivelyClosure&&(g.livelyClosure.funcProperties[c]=k)}function Bl(g){return g.hasLivelyClosure?g.livelyClosure.varMapping:g.isWrapper?g.originalFunction.varMapping:g.varMapping?g.varMapping:{}}function Sj(g,c,k){g[c]=k;g.hasLivelyClosure&&(g.livelyClosure.funcProperties[c]=k)}function ci(g){for(var c=[],k=g.prototype;k;)c=Object.keys(k).reduce(function(f,l){"function"===typeof k[l]&&-1===f.indexOf(l)&&f.push(l);return f},c),k=Object.getPrototypeOf(k);return c}function nk(g){return Object.keys(g.prototype).filter(function(c){return"function"===
typeof g.prototype[c]})}function vf(g,c){var k=function(f){var l=Array.prototype.slice.call(arguments);l.shift();try{return f.apply(g,l)}catch(p){if("undefined"!==typeof lively&&lively.morphic&&lively.morphic.World&&lively.morphic.World.current())throw lively.morphic.World.current().logError(p),p;c?console.warn("ERROR: %s.%s(%s): err: %s %s",g,c,l,p,p.stack||""):console.warn("ERROR: %s %s",p,p.stack||"");throw p;}};k.methodName="$logErrorsAdvice";k=dd.wrap(g,k);k.originalFunction=g;k.methodName="$logErrorsWrapper";
return k}function Bi(g,c){var k=function(f){var l=Array.prototype.slice.call(arguments);l.shift();try{var p=f.apply(g,l)}catch(b){throw console.warn("failed to load "+c+": "+b),"undefined"!==typeof lively&&lively.lang.Execution&&lively.lang.Execution.showStack(),b;}console.log("completed "+c);return p};k.methodName="$logCompletionAdvice::"+c;k=dd.wrap(g,k);k.methodName="$logCompletionWrapper::"+c;k.originalFunction=g;return k}function Hj(g,c){var k=function(l){var p=Array.prototype.slice.call(arguments);
p.shift();f=l.apply(g,p);c?console.warn("%s(%s) -> %s",dd.qualifiedMethodName(g),p,f):console.log("%s(%s) -> %s",dd.qualifiedMethodName(g),p,f);return f};k.methodName="$logCallsAdvice::"+dd.qualifiedMethodName(g);var f=dd.wrap(g,k);f.originalFunction=g;f.methodName="$logCallsWrapper::"+dd.qualifiedMethodName(g);return f}function Cl(g,c){return dd.wrap(g,function(k){var f=Array.prototype.slice.call(arguments);f.shift();c.push(f);f=k.apply(g,f);c.pop();return f})}function Gk(){try{throw Error();}catch(g){return String(g.stack).split(/\n/).slice(2).map(function(c){return c.replace(/^\s*at\s*([^\s]+).*/,
"$1")}).join("\n")}}function ok(g){if(g&&Array.isArray(g))return"["+g.map(ok)+"]";if("string"!==typeof g)return String(g);g=String(g);g=g.replace(/\n/g,"\\n\\\n");g=g.replace(/(")/g,"\\$1");return'"'+g+'"'}function pk(g){return Array.isArray(g)}function Co(g){return g&&1==g.nodeType}function em(g){return g instanceof Function}function zm(g){return"boolean"===typeof g}function $f(g){return"string"===typeof g}function sj(g){return"number"===typeof g}function Ql(g){return"undefined"===typeof g}function ym(g){return g instanceof
RegExp}function Bn(g){return"object"===typeof g}function Rl(g){if(!g)return!0;switch(typeof g){case "string":case "number":case "boolean":return!0}return!1}function fm(g){for(var c in g)if(g.hasOwnProperty(c))return!1;return!0}function Am(g,c){if(g===c)return!0;if(!g||!c)return g==c;if(Array.isArray(g))return Rd.arrayDeepEquals(g,c);switch(g.constructor){case String:case Date:case Boolean:case Number:return g==c}if("function"===typeof g.isEqualNode)return g.isEqualNode(c);if("function"===typeof g.equals)return g.equals(c);
var k=[],f;for(f in g)if(k.push(f),"function"!==typeof g[f]&&!Am(g[f],c[f]))return!1;for(f in c)if(-1===k.indexOf(f)&&"function"!==typeof c[f]&&!Am(c[f],g[f]))return!1;return!0}function Do(g){return g?Object.keys(g).map(function(c){return g[c]}):[]}function Eo(g,c){for(var k={},f=0;f<c.length;f++)k[c[f]]=g[c[f]];return k}function fc(g,c){g=g||{};g=Rd.getOwnPropertyDescriptors(g);for(var k=0;k<c.length;k++)c[k]in g&&delete g[c[k]];return Object.defineProperties({},g)}function Lh(g,c,k,f){c=Rd.functionFromString(c);
return Rd.asScriptOf(c,g,k,f)}function oa(g,c){for(var k=null,f=1;f<arguments.length;f++)if("string"===typeof arguments[f])k=arguments[f],g.categories||(g.categories={}),g.categories[k]||(g.categories[k]=[]),k=g.categories[k];else{c=arguments[f];for(var l in c){var p=c.__lookupGetter__(l),b=c.__lookupSetter__(l);p&&g.__defineGetter__(l,p);b&&g.__defineSetter__(l,b);p||b||(p=c[l],g[l]=p,k&&k.push(l),"function"===typeof p&&(p.displayName||(p.displayName=l),"undefined"!==typeof lively&&lively.Module&&
lively.Module.current&&(p.sourceModule=lively.Module.current())))}}return g}function x(g){if(Rd.isPrimitive(g))return g;if(Array.isArray(g))return Array.prototype.slice.call(g);var c={},k;for(k in g)g.hasOwnProperty(k)&&(c[k]=g[k]);c.__proto__=g.__proto__;return c}function C(g,c,k){for(var f={},l=0;l<c.length;l++)c[l]in g&&(f[c[l]]=k?k(c[l],g[c[l]]):g[c[l]]);return f}function G(g,c,k){c=c||{};k=k||0;if(c.customPrinter){var f=c._ignoreSignal||(c._ignoreSignal={}),l=c.customPrinter(g,f,function(q){return G(q,
c,k+1)});if(l!==f)return l}if(!g)return Rd.print(g);if("function"===typeof g)return c.printFunctionSource?String(g):"function"+(g.name?" "+g.name:"")+"("+Rd.argumentNames(g).join(",")+") {/*...*/}";switch(g.constructor){case String:case Boolean:case RegExp:case Number:return Rd.print(g)}if("function"===typeof g.serializeExpr)return g.serializeExpr();var p=g&&Array.isArray(g);f=p?"[":"{";l=p?"]":"}";if(c.maxDepth&&k>=c.maxDepth)return f+"/*...*/"+l;var b=[];if(p)b=g.map(function(q){return G(q,c,k+
1)});else for(var d=Object.keys(g).sort(function(q,r){var v="function"===typeof g[q];return v===("function"===typeof g[r])?q<r?-1:q>r?1:0:v?1:-1}),h=0;h<d.length;h++){if(h>(c.maxNumberOfKeys||Infinity)){d=d.length-h;b.push("..."+d+" hidden "+(1<d?"entries":"entry")+"...");break}var a=d[h];p&&G(g[a],c,k+1);var e=G(g[a],c,k+1);b.push((c.escapeKeys?JSON.stringify(a):a)+": "+e)}if(0===b.length)return f+l;d=b.join(", ");h=(!p||c.newLineInArrays)&&(!c.minLengthForNewLine||d.length>=c.minLengthForNewLine);
var n=Rd.indent("",c.indent||"  ",k);a=Rd.indent("",c.indent||"  ",k+1);e=h&&!p?"\n"+a:"";p=h&&!p?"\n"+n:"";h&&(d=b.join(","+(h?"\n"+a:"")));return f+e+d+p+l}function z(g){return 1<arguments.length?z(Array.prototype.slice.call(arguments)):Array.isArray(g[0])?Array.prototype.concat.apply([],g):g.reduce(function(c,k){for(var f in k)k.hasOwnProperty(f)&&(c[f]=k[f]);return c},{})}function J(g,c){if(!g)return c;if(!c)return g;if(Array.isArray(g)){if(!Array.isArray(c))return c;var k=g.map(function(f,l){return J(f,
c[l])});c.length>g.length&&(k=k.concat(c.slice(g.length)));return k}return"object"!==typeof g||"object"!==typeof c?c:Object.keys(g).concat(Object.keys(c)).reduce(function(f,l){f[l]=g[l]?c[l]?"object"!==typeof g[l]||"object"!==typeof c[l]?c[l]:J(g[l],c[l]):g[l]:c[l];return f},{})}function M(g,c){c=[];for(var k in g){var f=g[k],l=f.hasOwnProperty("before")?f.before:f.before=[];f=f.hasOwnProperty("after")?f.after:f.after=[];for(var p=l.length;p--;){var b=l[p],d=g[b];d?(d.hasOwnProperty("after")||(d.after=
[]),d.after.push(k)):(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(k+" requires to be initialized before "+b+" but that property cannot be found.")),l.splice(p,1))}for(l=f.length;l--;)p=f[l],g[p]||(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(k+" requires to be initialized after "+p+" but that property cannot be found.")),f.splice(l,1));c.push(k)}k=[];f=[];for(l=c.length+1;c.length;){if(l===c.length)throw Error("Circular dependencies in handler order, could not resolve properties "+
c.map(function(h){var a=g[h].before,e=g[h].after;if(!(a&&a.length||e&&e.length))return"";h+="\n";a&&a.length&&(h+="  - before "+a.join(",")+"\n");e&&e.length&&(h+="  - after "+e.join(",")+"\n");return h}).join(""));l=c.length;p=[];for(b=c.length;b--;)d=c[b],Rd.isSubset(g[d].after,f)&&(c.splice(b,1),f.push(d),p.push(d));k.push(p)}return Rd.flatten(k,1)}function O(g){return Object.create(g)}function ca(g,c){for(var k=[];g;)g.hasOwnProperty(c)&&k.unshift(g[c]),g=Object.getPrototypeOf(g);return k}function qa(g,
c){return Rd.merge(Rd.valuesInPropertyHierarchy(g,c))}function R(g){if(!g||"object"!==typeof g||g instanceof RegExp)return g;var c=Array.isArray(g)?Array(g.length):{},k;for(k in g)g.hasOwnProperty(k)&&(c[k]=R(g[k]));return c}function ba(g){return null===g?"null":"undefined"===typeof g?"undefined":g.constructor.name}function la(g){function c(f,l,p,b){if(f.constructor.name===l){k+=p;if(f.length||Object.keys(f).length)k+="...";k+=b}}if(!Rd.isMutableType(g))return Rd.safeToString(g);if("Object"!==g.constructor.name&&
!Array.isArray(g)&&g.constructor.name)return g.constructor.name?g.constructor.name:Object.prototype.toString.call(g).split(" ")[1].split("]")[0];var k="";c(g,"Object","{","}");c(g,"Array","[","]");return k}function ka(g){return-1===["null","undefined","Boolean","Number","String"].indexOf(Rd.typeStringOf(g))}function Ja(g){try{return(g?g.toString():String(g)).replace("\n","")}catch(c){return"<error printing object>"}}function Ra(g){switch(typeof g){case "string":return new String(g);case "boolean":return new Boolean(g);
case "number":return new Number(g);default:return g}}function ab(g,c){c=void 0===c?"_":c;var k=1;do var f=c+"-"+k++;while(f in g);return f}function Ya(){return Cc.formatFromArray(Array.prototype.slice.call(arguments))}function Qb(g){function c(q,r){return""+q}function k(q,r){return q.toString()}function f(q,r){return Cc.inspectObject(q)}var l=g.shift();l||console.log("Error in Strings>>formatFromArray, first arg is undefined");var p={s:c,d:k,i:k,f:function(q,r,v){return-1<v?q.toFixed(v):q.toString()},
o:f},b=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/;l=function(q){for(var r=[],v=b.exec(q);v;v=b.exec(q)){var y=v[8]||v[5];y=y in p?p[y]:f;var D=v[3]?parseInt(v[3]):"."==v[4]?-1:0;r.push(q.substr(0,"%"==v[0][0]?v.index:v.index+1));r.push({appender:y,precision:D});q=q.substr(v.index+v[0].length)}q&&r.push(q.toString());return r}(l);for(var d="",h=0,a=0;a<l.length;++a){var e=l[a];if(e&&"object"===typeof e){var n=g[h++];d+=(e.appender||c)(n,d,e.precision)}else d+=""+e}return d}function xc(g,
c,k){if(!k||0>=k)return g;for(var f="";0<k;)k--,f+=c;return Cc.lines(g).map(function(l){return f+l}).join("\n")}function Ic(g,c){c||(c="  ");return Cc.min(g.match(new RegExp("^("+c+")*","gm")).map(function(k){return Math.floor(k.length/c.length)}))}function Gc(g,c,k){c||(c="  ");k||(k=0);var f=Cc.minIndent(g,c);if(f===k)return g;if(f<k)return Cc.indent(g,c,k-f);var l=c.repeat(f-k);return Cc.lines(g).map(function(p){return p.slice(l.length)}).join("\n")}function Sc(g){return'"'+g.replace(/"/g,'\\"')+
'"'}function xd(g){return Cc.articles.articlize(g)}function Nd(g){return Cc.articles.find(g)}function Tb(g){if(g&&Array.isArray(g))return"["+g.map(Tb)+"]";if("string"!==typeof g)return String(g);g=String(g);g=g.replace(/\n/g,"\\n\\\n");g=g.replace(/(")/g,"\\$1");return'"'+g+'"'}function fe(g,c){c=c||0;return g.reduce(function(k,f){return k+(Array.isArray(f)?fe(f,c+1):Cc.indent(f+"\n","  ",c))},"")}function df(g,c,k){return k?" ".repeat(c)+g:g+" ".repeat(c)}function Tc(g,c){function k(d){return p?
!1:b?!0:c&&Array.isArray(c.align)&&"right"===c.align[d]}var f=[],l=c&&c.separator||" ",p=!c||!c.align||"left"===c.align,b=c&&"right"===c.align;g.forEach(function(d){d.forEach(function(h,a){void 0===f[a]&&(f[a]=0);f[a]=Math.max(f[a],String(h).length)})});return g.map(function(d){return d.map(function(h,a){h=String(h);return Cc.pad(h,f[a]-h.length,k(a))}).join(l)}).join("\n")}function Cf(g,c,k,f){function l(b,d,h){p[d]=f.repeat(b)+c(h,b);h=k(h,b);var a=d+1;if(!h||!h.length)return a;var e=a,n=h.length-
1;h.forEach(function(q,r){a=l(b+1,a,q);q=n===r;var v=p[e].split(""),y=b*f.length+f.length;for(r=b*f.length+1;r<y;r++)v[r]="-";q&&(v[b*f.length]="\\");p[e]=v.join("");q||p.slice(e,a).forEach(function(D,E){D=D.split("");D[b*f.length]="|";p[e+E]=D.join("")});e=a});return a}var p=[];f=f||"  ";l(0,0,g);return p.join("\n")}function qg(g){return g.split("")}function uf(g){return g.split(/\n\r?/)}function Qe(g,c){var k=c?c.sep:"\n\n";return c&&c.keepEmptyLines?g.split("\n").concat("").reduce(function(f,l){var p=
f[0];f=f[1];/^\s*$/.test(f)===/^\s*$/.test(l)?f+="\n"+l:(f.length&&p.push(f),f=l);return[p,f]},[[],""])[0]:g.split(new RegExp(k+"+"))}function ae(g){return Cc.lines(g).compact()}function fg(g,c){return g.split(c||/\s+/).filter(function(k){return!/^\s*$/.test(k)})}function Mh(g,c){c=c||{};var k=c.cellSplitter||/\s+/,f=/^\s*$/;c=c.hasOwnProperty("convertTypes")?!!c.convertTypes:!0;g=Cc.lines(g);for(var l=[],p=0;p<g.length;p++){var b=Cc.tokens(g[p],k);c&&(b=b.map(function(d){if(d.match(f))return d;var h=
Number(d);if(!isNaN(h))return h;h=new Date(d);return isNaN(+h)?d.trim():h}));0<b.length&&l.push(b)}return l}function Hf(g){if("undefined"===typeof document)throw Error("Cannot unescapeCharacterEntities");var c=document.createElement("div");c.innerHTML=g;return c.textContent}function li(g,c){return(g=g.trim().match(/([^?#]*)(#.*)?$/))?g[1].split(c||"&").inject({},function(k,f){if((f=f.split("="))[0]){var l=decodeURIComponent(f.shift());f=1<f.length?f.join("="):f[0];void 0!=f&&(f=decodeURIComponent(f));
l in k?(Array.isArray(k[l])||(k[l]=[k[l]]),k[l].push(f)):k[l]=f}return k}):{}}function Dl(g){return btoa(encodeURIComponent(g).replace(/%([0-9A-F]{2})/g,function(c,k){return String.fromCharCode("0x"+k)}))}function Wi(g){return decodeURIComponent(atob(g).split("").map(function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function ee(g){var c=g.match(Cc.urlStartRe),k=(c=c?c[0]:null)?g.slice(c.length):g;do g=k,k=g.replace(Cc.pathDoubleDotRe,"");while(k!=g);k=k.replace(Cc.pathDoubleSlashRe,
"$1/");k=k.replace(Cc.pathDotRe,"/");c&&(k=c+k);return k}function sg(){return Cc.normalizePath(Array.prototype.slice.call(arguments).reduce(function(g,c){return"string"===typeof c?g.replace(/\/*$/,"")+"/"+c.replace(/^\/*/,""):g}))}function mi(){return Cc.newUUIDTemplate.replace(Cc.newUUIDRe,Cc.newUUIDReplacer).toUpperCase()}function tj(g,c){return"data:"+(c||"text/plain")+";base64,"+Cc.base64EncodeUnicode(g)}function Cn(g){var c=0,k=g.length;if(0==k)return c;for(var f=0;f<k;f++){var l=g.charCodeAt(f);
c=(c<<5)-c+l;c&=c}return c}function Sl(g){function c(h,a,e,n,q,r){a=b(b(a,h),b(n,r));return b(a<<q|a>>>32-q,e)}function k(h,a,e,n,q,r,v){return c(a&e|~a&n,h,a,q,r,v)}function f(h,a,e,n,q,r,v){return c(a&n|e&~n,h,a,q,r,v)}function l(h,a,e,n,q,r,v){return c(e^(a|~n),h,a,q,r,v)}function p(h,a){var e=h[0],n=h[1],q=h[2],r=h[3];e=k(e,n,q,r,a[0],7,-680876936);r=k(r,e,n,q,a[1],12,-389564586);q=k(q,r,e,n,a[2],17,606105819);n=k(n,q,r,e,a[3],22,-1044525330);e=k(e,n,q,r,a[4],7,-176418897);r=k(r,e,n,q,a[5],12,
1200080426);q=k(q,r,e,n,a[6],17,-1473231341);n=k(n,q,r,e,a[7],22,-45705983);e=k(e,n,q,r,a[8],7,1770035416);r=k(r,e,n,q,a[9],12,-1958414417);q=k(q,r,e,n,a[10],17,-42063);n=k(n,q,r,e,a[11],22,-1990404162);e=k(e,n,q,r,a[12],7,1804603682);r=k(r,e,n,q,a[13],12,-40341101);q=k(q,r,e,n,a[14],17,-1502002290);n=k(n,q,r,e,a[15],22,1236535329);e=f(e,n,q,r,a[1],5,-165796510);r=f(r,e,n,q,a[6],9,-1069501632);q=f(q,r,e,n,a[11],14,643717713);n=f(n,q,r,e,a[0],20,-373897302);e=f(e,n,q,r,a[5],5,-701558691);r=f(r,e,n,
q,a[10],9,38016083);q=f(q,r,e,n,a[15],14,-660478335);n=f(n,q,r,e,a[4],20,-405537848);e=f(e,n,q,r,a[9],5,568446438);r=f(r,e,n,q,a[14],9,-1019803690);q=f(q,r,e,n,a[3],14,-187363961);n=f(n,q,r,e,a[8],20,1163531501);e=f(e,n,q,r,a[13],5,-1444681467);r=f(r,e,n,q,a[2],9,-51403784);q=f(q,r,e,n,a[7],14,1735328473);n=f(n,q,r,e,a[12],20,-1926607734);e=c(n^q^r,e,n,a[5],4,-378558);r=c(e^n^q,r,e,a[8],11,-2022574463);q=c(r^e^n,q,r,a[11],16,1839030562);n=c(q^r^e,n,q,a[14],23,-35309556);e=c(n^q^r,e,n,a[1],4,-1530992060);
r=c(e^n^q,r,e,a[4],11,1272893353);q=c(r^e^n,q,r,a[7],16,-155497632);n=c(q^r^e,n,q,a[10],23,-1094730640);e=c(n^q^r,e,n,a[13],4,681279174);r=c(e^n^q,r,e,a[0],11,-358537222);q=c(r^e^n,q,r,a[3],16,-722521979);n=c(q^r^e,n,q,a[6],23,76029189);e=c(n^q^r,e,n,a[9],4,-640364487);r=c(e^n^q,r,e,a[12],11,-421815835);q=c(r^e^n,q,r,a[15],16,530742520);n=c(q^r^e,n,q,a[2],23,-995338651);e=l(e,n,q,r,a[0],6,-198630844);r=l(r,e,n,q,a[7],10,1126891415);q=l(q,r,e,n,a[14],15,-1416354905);n=l(n,q,r,e,a[5],21,-57434055);
e=l(e,n,q,r,a[12],6,1700485571);r=l(r,e,n,q,a[3],10,-1894986606);q=l(q,r,e,n,a[10],15,-1051523);n=l(n,q,r,e,a[1],21,-2054922799);e=l(e,n,q,r,a[8],6,1873313359);r=l(r,e,n,q,a[15],10,-30611744);q=l(q,r,e,n,a[6],15,-1560198380);n=l(n,q,r,e,a[13],21,1309151649);e=l(e,n,q,r,a[4],6,-145523070);r=l(r,e,n,q,a[11],10,-1120210379);q=l(q,r,e,n,a[2],15,718787259);n=l(n,q,r,e,a[9],21,-343485551);h[0]=b(e,h[0]);h[1]=b(n,h[1]);h[2]=b(q,h[2]);h[3]=b(r,h[3])}var b=function(h,a){var e=(h&65535)+(a&65535);return(h>>
16)+(a>>16)+(e>>16)<<16|e&65535},d="0123456789abcdef".split("");return function(h){for(var a=h.length,e=0;e<a;e++){for(var n=e,q=h[e],r="",v=0;4>v;v++)r+=d[q>>8*v+4&15]+d[q>>8*v&15];h[n]=r}return h.join("")}(function(h){var a=h.length,e=[1732584193,-271733879,-1732584194,271733878],n;for(n=64;n<=a;n+=64){var q,r=h.substring(n-64,n),v=[];for(q=0;64>q;q+=4)v[q>>2]=r.charCodeAt(q)+(r.charCodeAt(q+1)<<8)+(r.charCodeAt(q+2)<<16)+(r.charCodeAt(q+3)<<24);p(e,v)}h=h.substring(n-64);q=[0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0];r=h.length;for(n=0;n<r;n++)q[n>>2]|=h.charCodeAt(n)<<(n%4<<3);q[n>>2]|=128<<(n%4<<3);if(55<n)for(p(e,q),n=16;n--;)q[n]=0;q[14]=8*a;p(e,q);return e}(g))}function rf(g,c){var k=[];g.replace(c,function(f,l){k.push({match:f,start:l,end:l+f.length})});return k}function Ci(g,c,k){function f(b,d){if(d.constructor!==RegExp){if(0===b.indexOf(d))return{match:d,rest:b.slice(d.length)};for(var h=0;h<d.length;h++)if(d[h]!=b[h])return{match:null,pos:h};return{match:null}}return(d=Cc.reMatches(b,d))&&
d.length&&0===d[0].start?{match:d[0].match,rest:b.slice(d[0].end)}:{match:null}}function l(b){var d=Cc.reMatches(b,/__\//g),h=Cc.reMatches(b,/\/__/g);if(d.length!==h.length)throw Error("pattern invalid: "+b+" cannot be split into __/.../__ embedded RegExps\nstarts: "+JSON.stringify(d)+"\nvs ends:\n"+JSON.stringify(h));var a=0;return d.reduce(function(e,n,q){var r=h[q];q=e.pop();n=n.start-a;r=r.end-a;var v;var y=v=3;q=[q.slice(0,n),q.slice(n+v,r-y),q.slice(r)];q[0].length&&(e.push(q[0]),a+=q[0].length);
try{q[1].length&&(e.push(new RegExp(q[1])),a+=q[1].length+3+3)}catch(D){throw Error("Cannot create pattern re from: "+Cc.inspectObject(q));}q[2].length&&e.push(q[2]);return e},[b])}function p(b,d){d=l(d);a:{for(var h=b,a=0,e=0;e<d.length;e++){var n=d[e];h=f(h,n);if(!h.match){d={matched:!1,pos:a+(h.pos||0),pattern:n};break a}a+=h.match.length;h=h.rest}d=h.length?{matched:!1,pos:a}:{matched:!0}}if(d.matched)return d;d.error=b.slice(0,d.pos)+"<--UNMATCHED--\x3e"+b.slice(d.pos);return d}k=k||{};k.normalizeWhiteSpace&&
(g=g.replace(/\s+/g," "));k.ignoreIndent&&(g=g.replace(/^\s+/gm,""),c=c.replace(/^\s+/gm,""));return g==c?{matched:!0}:p(g,c)}function kf(g,c,k){g=g.slice(c);return"string"===typeof k?(g=g.indexOf(k),-1===g?null:g+c):k.constructor===RegExp?(c=Cc.reMatches(g,k),c[0]?c[0].start:null):null}function Mg(g,c,k){g=g.slice(0,c);return"string"===typeof k?(g=g.lastIndexOf(k),-1===g?null:g):k.constructor===RegExp?(g=Cc.reMatches(g,k),Cc.last(g)?Cc.last(g).start:null):null}function Xh(g){var c=Cc.lineRanges(g);
return function(k){for(var f=0;f<c.length;f++){var l=c[f];if(k>=l[0]&&k<l[1])return f}return-1}}function qk(g){return function(c){return Cc.lineRanges(g)[c]}}function gm(g){for(var c=0,k=Cc.lines(g),f=[],l=0;l<k.length;l++)g=c+k[l].length+1,f.push([c,g]),c=g;return f}function Wv(g,c){var k=g.length;if(0===k)return-1;for(var f=0;;){var l=f+Math.floor((k-f)/2),p=$jscomp.makeIterator(g[l]),b=p.next().value;p=p.next().value;if(c<b){if(0===l)break;k=l}else if(c>p)f=l;else return l}return-1}function Vr(g,
c,k){k=void 0===k?0:k;g=this.substring(k||0).search(c);return 0<=g?g+(k||0):g}function Wm(g,c,k){k=void 0===k?g.length:k;c=c.global?c:new RegExp(c.source,"g"+(c.ignoreCase?"i":"")+(c.multiLine?"m":""));g=this.substring(0,k+1);k=-1;for(var f=0,l;null!=(l=c.exec(g));)k=l.index,c.lastIndex=++f;return k}function Xv(g,c){return"undefined"===typeof Cc.JsDiff?"diff not supported":Cc.JsDiff.convertChangesToXML(Cc.JsDiff.diffWordsWithSpace(g,c))}function Yv(g){return""==g}function At(g){g=g[0];return"A"===
g||"E"===g||"I"===g||"O"===g||"U"===g||"a"===g||"e"===g||"i"===g||"o"===g||"u"===g||!1}function Bt(g,c){var k=parseFloat(g);return isNaN(k)?g:k.toFixed(c)}function Fq(g){return g.length?g.charAt(0).toUpperCase()+g.slice(1):g}function Fo(g){return g.split(" ").map(Cc.capitalize).join("")}function Go(g){var c=g.split("-"),k=c.length;if(1==k)return c[0];g="-"==g.charAt(0)?c[0].charAt(0).toUpperCase()+c[0].substring(1):c[0];for(var f=1;f<k;f++)g+=c[f].charAt(0).toUpperCase()+c[f].substring(1);return g}
function Xm(g,c,k){c=c||30;k=void 0===k?"...":k;return g.length>c?g.slice(0,c-k.length)+k:String(g)}function Bm(g,c,k){c=c||30;return g.length>c?(void 0===k?"...":k)+g.slice(-c):String(g)}function Gq(g){return g.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function Ct(g){return g.slice(0,g.length-1)+String.fromCharCode(g.charCodeAt(g.length-1)+1)}function Dt(g){return g.charCodeAt(0)-48}function Et(g,c){for(var k=[],f=0;f<g.length;f++){k[f]=[];for(var l=0;l<c.length;l++)k[f][l]=
0}for(f=0;f<g.length;f++)k[f][0]=0;for(f=1;f<g.length;f++)for(l=1;l<c.length;l++)k[f][l]=g[f-1]==c[l-1]?k[f-1][l-1]+1:0;for(var p=l=f=-1,b=0;b<g.length;b++)for(var d=0;d<c.length;d++){var h=k[b][d];f<h&&(f=h,l=b-h,p=d-h)}return{length:f,indexA:l,indexB:p,string:0<f?g.slice(l,l+f):""}}function Zv(g,c){return"insert"===c.action?g.slice(0,c.start)+c.lines.join("\n")+g.slice(c.start):"remove"===c.action?g.slice(0,c.start)+g.slice(c.end):g}function Ft(g,c){return c.reduce(function(k,f){return Cc.applyChange(g,
f)},g)}function Ho(g,c){if(0===g.length)return c.length;if(0===c.length)return g.length;var k;if(g.length>c.length){var f=g;g=c;c=f}var l=Array(g.length+1);for(f=0;f<=g.length;f++)l[f]=f;for(f=1;f<=c.length;f++){var p=f;for(k=1;k<=g.length;k++){var b=c[f-1]===g[k-1]?l[k-1]:Math.min(l[k-1]+1,Math.min(p+1,l[k]+1));l[k-1]=p;p=b}l[g.length]=p}return l[g.length]}function $v(g,c){g=g||0;return Math.round(Math.random()*((c||100)-g)+g)}function aw(g){return Math.floor(Math.random()*g)}function bw(g){if(1E3>
g)return String(Math.round(100*g)/100)+"B";g/=1024;return 1E3>g?String(Math.round(100*g)/100)+"KB":String(Math.round(g/1024*100)/100)+"MB"}function cw(g){return g.reduce(function(c,k){return c+k},0)/g.length}function dw(g,c,k){return(g-c)/k+c}function ew(g){var c=g.sort(function(k,f){return f-k});g=g.length;return 0===g%2?.5*(c[g/2-1]+c[g/2]):c[(g-1)/2]}function fw(g,c,k,f){f=f||0;if(c<k)var l=k;else l=c,c=k;return 0<=l-g+f&&0>=c-g-f}function gw(g,c,k){return Math.max(c,Math.min(k,g))}function hw(g){return g.sort(function(c,
k){return c-k})}function iw(g,c){c=c||"px";if((g=g.match(/([0-9\.]+)\s*(.*)/))&&g[1]){var k=parseFloat(g[1]);return Kf.convertLength(k,g[2],c)}}function jw(g){if(!isFinite(g))return 0;for(var c=1,k=0;Math.round(g*c)/c!==g;)c*=10,k++;return k}function kw(g,c){c=1/c;return Math.round(g*c)/c}function lw(g,c,k,f){var l=Kf.roundTo(g,k);return Math.abs(g-l)<c/2?l:f?g:l+(g-(g<l?l-c/2:l+c/2))*k/(k-c)}function mw(g){return 180*g/Math.PI%360}function nw(g){return g/180*Math.PI}function ow(g,c,k){c=void 0===
c?5:c;k=void 0===k?3E4:k;g=Math.min(k,c*Math.pow(2,g));return Math.min(k,c+Math.random()*(3*(g/2+Math.round(g/2*Math.random()))-c))}function pw(g,c,k){return c+g*(k-c)}function qw(g,c){var k=[],f;for(f in g)(g.__lookupGetter__(f)||"function"!==typeof g[f])&&(c?c(f,g):1)&&k.push(f);return k}function Gt(g,c){return Object.getOwnPropertyNames(g).reduce(function(k,f){(c?c(g,f):1)&&k.push(f);return k},[])}function Ht(g){var c=[],k;for(k in g)g.hasOwnProperty(k)&&(g.__lookupGetter__(k)||"function"!==g[k])&&
c.push(k);return c}function It(g,c,k){var f=[],l;for(l in g)if(g.hasOwnProperty(l)){var p=g[l];"function"!==p&&f.push(c.call(k||this,l,p))}return f}function rw(g,c){for(var k in g)if(g[k]===c)return k}function sw(g){var c=[],k;for(k in g)c.push(g[k]);return c}function Bp(g){var c=[],k;for(k in g)g.hasOwnProperty(k)&&c.push(g[k]);return c}function Hq(g,c){for(var k in g)if(c(g,k))return!0;return!1}function Jt(g,c){var k=[],f;for(f in g)(c?c(g,f):1)&&k.push(f);return k}function Wr(g){return Object.keys(g).sort().join("").hashCode()}
function Kt(g,c,k){return Cm.dateFormat(g,c,k)}function Iq(g,c){return c&&c instanceof Date&&c.getTime()===g.getTime()}function tw(g,c,k){k=void 0===k?{}:k;if(!(c instanceof Date)||c<g)return"";if(c===g)return"now";var f="min",l="sec",p="hour",b="day",d=Math.round((c-g)/1E3);g=d%60;c=Math.floor(d/60)%60;var h=Math.floor(d/60/60)%24;d=Math.floor(d/60/60/24);var a=[];0<d&&(a.push(d),1<d&&(b+="s"),a.push(b));if(k.forceHours||0<h&&2>d)a.push(h),1<h&&(p+="s"),a.push(p);if(k.forceMinutes||0<c&&3>h&&0===
d)a.push(c),1<c&&(f+="s"),a.push(f);if(k.forceSeconds||0<g&&3>c&&0===h&&0===d)a.push(g),1<g&&(l+="s"),a.push(l);return a.join(" ")}function bg(g){return"function"===typeof g?bg.convertCallbackFun(g):Promise.resolve(g)}function Lt(g,c){return new Promise(function(k){return setTimeout(k,g,c)})}function Xr(g,c){return new Promise(function(k,f){return setTimeout(f,g,c)})}function uw(g,c){return new Promise(function(k,f){var l=!1;setTimeout(function(){return!l&&(l=!0)&&f(Error("Promise timed out"))},g);
c.then(function(p){return!l&&(l=!0)&&k(p)},function(p){return!l&&(l=!0)&&f(p)})})}function vw(g){var c=Date.now();return Promise.resolve(g).then(function(){return Date.now()-c})}function Yr(g,c,k){"function"===typeof g&&(c=g,g=void 0);return new Promise(function(f,l){var p=!1,b=!1,d,h,a=setInterval(function(){if(p)clearInterval(a),delete Of.waitForClosures[a];else{try{h=c()}catch(e){d=e}if(h||d||b)return p=!0,clearInterval(a),delete Of.waitForClosures[a],d?l(d):b?"undefined"===typeof k?l(Error("timeout")):
f(k):f(h)}},10);Of.waitForClosures[a]=a;"number"===typeof g&&setTimeout(function(){return b=!0},g)})}function jz(){var g,c,k=new Promise(function(f,l){g=f;c=l});return{resolve:g,reject:c,promise:k}}function kz(g){return function(){var c=Array.from(arguments),k=this;return new Promise(function(f,l){c.push(function(p,b){return p?l(p):f(b)});g.apply(k,c)})}}function lz(g){return function(){var c=Array.from(arguments),k=this;return new Promise(function(f,l){c.push(function(){var p=Array.from(arguments),
b=p.shift();return b?l(b):f(p)});g.apply(k,c)})}}function $C(g,c,k,f,l){var p=g.shift();if(p)try{Promise.resolve(p(c,k)).then(function(b){return $C(g,b,k,f,l)}).catch(function(b){l(b)})}catch(b){l(b)}else f(c)}function mz(g){return new Promise(function(c,k){return Of._chainResolveNext(g.slice(),void 0,{},c,k)})}function nz(g,c){return Promise.resolve(g).then(function(k){try{c()}catch(f){console.error("Error in promise finally: "+f.stack||f)}return k}).catch(function(k){try{c()}catch(f){console.error("Error in promise finally: "+
f.stack||f)}throw k;})}function oz(g,c){function k(){c--;try{var e=b++;g[e]().then(function(n){c++;l[e]=n;0===--d?h():f()}).catch(function(n){return a(n)})}catch(n){a(n)}}function f(){for(;!p&&0<d&&b<g.length&&0<c;)k()}c=void 0===c?Infinity:c;if(!g.length)return Promise.resolve([]);var l=[],p=null,b=0,d=g.length,h,a;return new Promise(function(e,n){h=function(){return e(l)};a=function(q){return n(p=q)};f()})}function Eg(g,c){if(g instanceof Eg)return g;if(!(this instanceof Eg))return new Eg(g,c);
this.setSplitter(c||".");this.fromPath(g)}function ww(g){var c={},k;for(k in g)c[k]=g[k].slice();return c}function Mt(g,c){var k={},f;for(f in g)if(!c.includes(f)){k[f]=[];for(var l=g[f],p=0;p<l.length;p++){var b=l[p];c.includes(b)||k[f].push(b)}}return k}function Zr(g,c,k,f){k=void 0===k?[]:k;f=void 0===f?Infinity:f;if(!Array.isArray(g[c]))return[];for(var l=[],p={},b={},d=0;d<k.length;d++)b[k[d]]=!0;c=g[c].slice();d={};for(var h=c.length;h--;){var a=c[h];a in b?c.splice(h,1):d[a]=1}if(k)for(;0!==
c.length;)for(k=0;k<c.length;k++)if(a=c.shift(),!(a in p||a in b)&&(h=d[a]||0,!(h>f)&&(l.push(a),p[a]=!0,a=g[a])))for(var e=0;e<a.length;e++){var n=a[e];n in p||n in d||(d[n]=h+1,c.push(n))}return l}function xw(g,c,k,f){f=void 0===f?Infinity:f;k&&(g=ni.without(g,k));c=[c];k=0;for(var l={};c.length&&k++<f;){var p=c.shift();if(!l[p]){var b=g[p]||[];l[p]=b;c.push.apply(c,$jscomp.arrayFromIterable(b))}}return l}function yw(g){var c={},k;for(k in g)for(var f=g[k],l=0;l<f.length;l++){var p=f[l];c[p]?c[p].push(k):
c[p]=[k]}return c}function $r(g,c){c=[];var k={},f={},l={};for(e in g){k.hasOwnProperty(e)||(k[e]=!0,c.push(e));var p=g[e],b={};if(p){f[e]=[];p=$jscomp.makeIterator(p);for(var d=p.next();!d.done;d=p.next())if(d=d.value,!b.hasOwnProperty(d)&&e!==d){var h=l[d]||(l[d]=[]);h.includes(e)||h.push(e);b[d]=!0;f[e].push(d);k.hasOwnProperty(d)||(k[d]=!0,c.push(d))}}}for(g=[];c.length;){k=Infinity;var a=[];b=[];p=[];for(d=0;d<c.length;d++){var e=c[d];h=f[e]||[];h.length>k||(h.length!==k||h.some(function(n){return a.includes(n)})?
(k=h.length,a=[e],b=[d],p=(l[e]||[]).slice()):(a.push(e),b.push(d),p.push.apply(p,$jscomp.arrayFromIterable(l[e]||[]))))}for(d=b.length;d--;)e=c[b[d]],l[e]=[],c.splice(b[d],1);k=$jscomp.makeIterator(p);for(e=k.next();!e.done;e=k.next())e=e.value,f[e]=f[e].filter(function(n){return!a.includes(n)});g.push(a)}return g}function as(g,c,k,f,l,p){function b(a){-1<d.indexOf(a)||(f=g.call(p,f,a,h++),d=d.concat([a]),ni.withoutAll(c[a]||[],d).forEach(function(e){return b(e)}))}var d=l||[],h=0;b(k);return f}
function bs(g){g=void 0===g?10:g;for(var c={},k=ni.range(1,g).map(String),f=0;f<k.length;f++){var l=Math.floor(Math.random()*g);c[k[f]]=ni.shuffle(k).slice(0,l)}return c}function zw(g){return Array.isArray(g)&&2<=g.length&&g[0]<=g[1]}function Aw(g){return g.sort(dh.compare)}function Nt(g,c){return g[0]<c[0]?g[1]<c[0]?-3:g[1]===c[0]?-2:-1:g[0]===c[0]?g[1]===c[1]?0:g[1]<c[1]?-1:1:-1*Nt(c,g)}function Ot(g,c,k){switch(this.compare(g,c)){case -3:case 3:return null;case 0:return k&&k(g,c,g),g;case 2:case 1:var f=
g;g=c;c=f;case -2:case -1:return f=[g[0],Math.max(g[1],c[1])],k&&k(g,c,f),f;default:throw Error("Interval compare failed");}}function Pt(g,c){for(var k=[],f=g.length;0<f;){var l=g.shift();f--;for(var p=0;p<f;p++){var b=dh.coalesce(l,g[p],c);b&&(l=b,g.splice(p,1),f--,p--)}k.push(l)}return this.sort(k)}function Bw(g,c,k){for(var f=[];0<g.length;){var l=g.shift(),p=c.map(function(b){b=dh.compare(l,b);return-1===b||0===b||1===b});f.push(k(l,p[0]));f.push(l)}return f}function Qt(g,c,k,f,l,p){p=p||dh.GLOBAL;
k=this.sort(k);for(var b,d=[];b=k.shift();)if(!(b[1]<g)){b[0]<g&&(b=Array.prototype.slice.call(b),b[0]=g);var h=c<b[0]?c:b[0];g<h&&d.push(f.call(p,[g,h],!0));c<b[1]&&(b=Array.prototype.slice.call(b),b[1]=c);if(b[0]===b[1]){var a;l&&(a=d.slice(-1)[0])&&l.call(p,a,b,a)}else d.push(f.call(p,b,!1));g=b[1];if(g>=c)break}g<c&&d.push(f.call(p,[g,c],!0));return d}function Rt(g,c,k){return dh.intervalsInRangeDo(g,c,dh.coalesceOverlapping(Array.prototype.slice.call(k)),function(f,l){return l?f:null}).filter(Boolean)}
function Cw(g,c){var k=0,f,l;return c.map(function(p){for(;l=g[k];)if(l[0]<p[0])k++;else break;if(l&&l[0]===p[0]){for(f=k;l=g[f];)if(l[1]<p[1])f++;else break;if(l&&l[1]===p[1])return dh.range(k,f)}return[]})}function Dw(g,c,k){k=k||0;k+c>g.length&&(k-=k+c-g.length);return{array:g,from:k,to:k+c}}function Ew(g){return g.array.slice(g.from,g.to)}function Jq(g,c){return c<g.from||c>=g.to?null:c-g.from}function Kq(g,c){return 0>c||c>g.to-g.from?null:g.from+c}function Cp(g,c){if(!(c in g.array))return null;
var k=0;c<g.from&&(k=-g.from+c);c>=g.to&&(k=c-g.to+1);return 0===k?g:Tl.create(g.array,g.to-g.from,g.from+k)}function cs(g,c,k){return(g=g[c])?g[k]:void 0}function St(g,c,k,f){(g=g[c])&&(g[k]=f);return f}function Tt(g,c){return g[c]}function Ut(g,c,k){return g[c]=k}function Fw(g,c){return g.reduce(function(k,f){k.push(f[c]);return k},[])}function Gw(g,c,k){return g.map(function(f,l){return f[c]?f[c]=k[l]:void 0})}function Hw(g,c,k){for(var f=Array(g);0<g;)f[--g]=Fg.arrayWithN(c,k);return f}function Iw(g,
c,k,f){for(var l=Array(g),p=0;p<g;p++){l[p]=Array(c);for(var b=0;b<c;b++)l[p][b]=k.call(f||this,p,b)}return l}function ds(g,c,k){g.forEach(function(f,l){f.forEach(function(p,b){c.call(k||this,p,l,b)})})}function Vt(g,c,k){var f=Array(g.length);g.forEach(function(l,p){f[p]=Array(l.length);l.forEach(function(b,d){f[p][d]=c.call(k||this,b,p,d)})});return f}function es(g){for(var c=g[0],k=Array(g.length-1),f=1;f<g.length;f++)for(var l=k[f-1]={},p=0;p<c.length;p++)l[c[p]]=g[f][p];return k}function Wt(g,
c){Array.isArray(g)||(g=[g]);var k=[[]],f=k[0],l=g.reduce(function(p,b){return p.concat([Object.keys(b).reduce(function(d,h){var a=f.indexOf(h);-1===a&&(a=f.length,f.push(h));d[a]=b[h];return d},[])])},[]);c=1===arguments.length?null:c;l.forEach(function(p){for(var b=0;b<f.length;b++)p[b]||(p[b]=c)});return k.concat(l)}function Xt(g,c,k,f,l){f=void 0===f?{i:0}:f;l=void 0===l?0:l;var p=f.i++;c(g,p,l);(k(g,p,l)||[]).forEach(function(b){return Xt(b,c,k,f,l+1)})}function fs(g,c,k,f,l){f=void 0===f?{i:0}:
f;l=void 0===l?0:l;var p=f.i++;(k(g,p,l)||[]).forEach(function(b){return fs(b,c,k,f,l)});c(g,p,l)}function gs(g,c,k){if(c(g))return g;if((g=k(g))&&g.length)for(var f=0;f<g.length;f++){var l=gs(g[f],c,k);if(l)return l}}function Lq(g,c,k){var f=[];c(g)&&f.push(g);return f.concat(uj.flatten((k(g)||[]).map(function(l){return Lq(l,c,k)})))}function hs(g,c,k,f){f=void 0===f?0:f;return[c(g,f)].concat(uj.flatten((k(g)||[]).map(function(l){return hs(l,c,k,f+1)})))}function Yt(g,c,k,f){f=void 0===f?0:f;var l=
(k(g)||[]).map(function(p){return Yt(p,c,k,f+1)});return c(g,l,f)}function Zt(g){var c=[{name:"send",args:["msg","callback"]},{name:"listen",args:["messenger","callback"]},{name:"close",args:["messenger","callback"]},{name:"isOnline",args:[]}],k=c.map(function(b){return b.name}).concat("id sendHeartbeat heartbeatInterval ignoreUnknownMessages allowConcurrentSends sendTimeout services".split(" "));c.forEach(function(b){if(!g[b.name])throw b="message implementation needs function "+b.name+"("+b.args.join(",")+
")",Error(b);});c=g.sendHeartbeat&&(g.heartbeatInterval||1E3);var f=g.hasOwnProperty("ignoreUnknownMessages")?g.ignoreUnknownMessages:!1,l={_outgoing:[],_inflight:[],_id:g.id||Tj.newUUID(),_ignoreUnknownMessages:f,_services:{},_messageCounter:0,_messageResponseCallbacks:{},_whenOnlineCallbacks:[],_statusWatcherProc:null,_startHeartbeatProcessProc:null,_listenInProgress:null,_heartbeatInterval:c,_status:Tj.OFFLINE,_runWhenOnlineCallbacks:function(){var b=l._whenOnlineCallbacks.slice();l._whenOnlineCallbacks=
[];b.forEach(function(d){try{d.call(null,null,l)}catch(h){console.error("error in _runWhenOnlineCallbacks: %s",h)}})},_ensureStatusWatcher:function(){l._statusWatcherProc||(l._statusWatcherProc=setInterval(function(){l.isOnline()&&l._whenOnlineCallbacks.length&&l._runWhenOnlineCallbacks();var b=l._status;l._status=l.isOnline()?Tj.ONLINE:Tj.OFFLINE;l._status!==Tj.ONLINE&&l._statusWatcherProc&&l.reconnect();if(l._status!==b&&l.onStatusChange)l.onStatusChange()},20))},_addMissingData:function(b){if(!b.target)throw Error("Message needs target!");
if(!b.action)throw Error("Message needs action!");b.data||(b.data=null);b.messageId||(b.messageId=Tj.newUUID());b.sender=l.id();b.messageIndex=l._messageCounter++;return b},_queueSend:function(b,d){if(d&&"function"!==typeof d)throw Error("Expecing a when send callback, got: "+d);l._outgoing.push([b,d])},_deliverMessageQueue:function(){function b(a){if(-1!==l._inflight.indexOf(a)){var e=a[0],n=a[1];n&&(l._messageResponseCallbacks[e.messageId]=n);g.send.call(l,e,function(q){Tj.remove(l._inflight,a);
q&&d(q,a);l._deliverMessageQueue()})}}function d(a,e){var n=e[1];delete l._messageResponseCallbacks[e[0].messageId];console.error(a);n&&n(a)}if(g.allowConcurrentSends||!l._inflight.length){var h=l._outgoing.shift();h&&(l._inflight.push(h),l.isOnline()?b(h):l.whenOnline(function(){b(h)}),function(a){"number"===typeof g.sendTimeout&&setTimeout(function(){-1!==l._inflight.indexOf(a)&&(Tj.remove(l._inflight,a),d(Error("Timeout sending message"),a),l._deliverMessageQueue())},g.sendTimeout)}(h),g.allowConcurrentSends&&
l._outgoing.length&&l._deliverMessageQueue())}},_startHeartbeatProcess:function(){l._startHeartbeatProcessProc||(l._startHeartbeatProcessProc=setTimeout(function(){g.sendHeartbeat.call(l,function(b,d){l._startHeartbeatProcessProc=null;l._startHeartbeatProcess()})},l._heartbeatInterval))},id:function(){return l._id},isOnline:function(){return g.isOnline.call(l)},heartbeatEnabled:function(){return"number"===typeof l._heartbeatInterval},listen:function(b){if(!l._listenInProgress)return l._listenInProgress=
!0,l._ensureStatusWatcher(),g.listen.call(l,function(d){l._listenInProgress=null;b&&b(d);l.heartbeatEnabled()&&l._startHeartbeatProcess()})},reconnect:function(){if(l._status!==Tj.ONLINE)return l.listen(),l},send:function(b,d){l._addMissingData(b);l._queueSend(b,d);l._deliverMessageQueue();return b},sendTo:function(b,d,h,a){return l.send({target:b,action:d,data:h},a)},onMessage:function(b){l.emit("message",b);if(b.inResponseTo){var d=l._messageResponseCallbacks[b.inResponseTo];d&&!b.expectMoreResponses&&
delete l._messageResponseCallbacks[b.inResponseTo];d&&d(null,b)}else if(d=l._services[b.action])try{d.call(null,b,l)}catch(h){d=String(h.stack||h),console.error("Error invoking service: "+d),l.answer(b,{error:d})}else l._ignoreUnknownMessages||l.answer(b,{error:String(Error("messageNotUnderstood: "+b.action))})},answer:function(b,d,h,a){"function"===typeof h&&(a=h,h=!1);b={target:b.sender,action:b.action+"Result",inResponseTo:b.messageId,data:d};h&&(b.expectMoreResponses=!0);return l.send(b,a)},close:function(b){clearInterval(l._statusWatcherProc);
l._statusWatcherProc=null;g.close.call(l,function(d){l._status=Tj.OFFLINE;b&&b(d)});return l},whenOnline:function(b){l._whenOnlineCallbacks.push(b);l.isOnline()&&l._runWhenOnlineCallbacks();return l},outgoingMessages:function(){return Tj.pluck(l._inflight.concat(l._outgoing),0)},addServices:function(b){Object.assign(l._services,b);return l}};g.services&&l.addServices(g.services);Tj.makeEmitter(l);for(var p in g)-1===k.indexOf(p)&&g.hasOwnProperty(p)&&(l[p]=g[p]);return l}function $t(g,c,k){k||(k=
c,c=g,g=null);g=g||{};var f=g.args||[];g=Gg.create(g);g.run.apply(g,[c].concat(f).concat(k));return g}function Jw(g){g=g||{};g.useMessenger=!0;var c=g.workerId||Gg.newUUID(),k=Gg.messengerCreate({sendTimeout:5E3,send:function(f,l){k.worker.postMessage(f);l()},listen:function(f){var l=k.worker=Gg.isNodejs?Gg.NodejsWorker.create(g):Gg.BrowserWorker.create(g);l.on("message",function(p){k.onMessage(p)});l.on("ready",function(){Gg.NodejsWorker.debug&&console.log("WORKER READY!!!")});l.on("close",function(){Gg.NodejsWorker.debug&&
console.log("WORKER CLOSED...!!!")});l.once("ready",f)},close:function(f){return k.worker.ready?k.sendTo(c,"close",{},function(l,p){(l=l||p.data.error)&&console.error("Error in worker messenger close: "+l.stack||l);if(l)f(l);else{var b=!1;k.worker.once("close",function(){b=!0});Gg.waitFor(1E3,function(){return!!b},f)}}):f(null)},isOnline:function(){return k.worker&&k.worker.ready}});Object.assign(k,{eval:function(f,l){k.sendTo(c,"remoteEval",{expr:f},function(p,b){l(p,b?b.data.result:null)})},run:function(){var f=
Array.prototype.slice.call(arguments),l=f.shift(),p=f.pop();if("function"!==typeof l)throw Error("run: no function that should run in worker passed");if("function"!==typeof p)throw Error("run: no callback passed");return k.sendTo(c,"run",{func:String(l),args:f},function(b,d){p(b||d.data.error,d?d.data.result:null)})}});k.listen();return k}function Kw(){if(!Ad.isNode||Ad.GLOBAL.lively||Ad.GLOBAL.lively)if(Ad.livelyLang._prevLivelyGlobal=Ad.GLOBAL.lively,Ad.GLOBAL.lively||(Ad.GLOBAL.lively={}),Ad.GLOBAL.lively.lang)for(var g in Ad.livelyLang)Ad.GLOBAL.lively.lang[g]=
Ad.livelyLang[g];else Ad.GLOBAL.lively.lang=Ad.livelyLang}function Dn(g){if(!g)return g;if(Array.isArray(g))return Ad.createChain(Ad.arr,g);if("Date"===g.constructor.name)return Ad.createChain(Ad.date,g);switch(typeof g){case "string":return Ad.createChain(Ad.string,g);case "object":return Ad.createChain(Ad.obj,g);case "function":return Ad.createChain(Ad.fun,g);case "number":return Ad.createChain(Ad.num,g)}throw Error("Chain for object "+g+" ("+g.constructor.name+") no supported");}function Dp(){Ad.isNode||
(Ad.livelyLang._prevLivelyGlobal?delete Ad.GLOBAL.lively.lang:delete Ad.GLOBAL.lively);return Ad.livelyLang}function Lw(){Object.assign(Ad.livelyLang,{worker:Ad.worker,messenger:Ad.messenger,events:Ad.events,tree:Ad.tree,grid:Ad.grid,arrayProjection:Ad.arrayProjection,interval:Ad.interval,graph:Ad.graph,date:Ad.date,properties:Ad.properties,obj:Ad.obj,arr:Ad.arr,fun:Ad.fun,num:Ad.num,string:Ad.string,Closure:Ad.Closure,promise:Ad.promise,Path:Ad.Path,Group:Ad.Group});Ad.globalInterfaceSpec.forEach(function(g){if("installMethods"===
g.action){var c=Ad.Path(g.target);c.isIn(Ad.GLOBAL)||c.set(Ad.GLOBAL,{},!0);var k=Ad.Path(g.sources[0]);g.methods.forEach(function(f){Ad.installProperty(k.concat([f]),c.concat([f]))});g.alias&&g.alias.forEach(function(f){Ad.installProperty(k.concat([f[1]]),c.concat([f[0]]))})}else if("installObject"===g.action)c=Ad.Path(g.target),g=Ad.Path(g.source).get(Ad.livelyLang),c.set(Ad.GLOBAL,g,!0);else throw Error("Cannot deal with global setup action: "+g.action);})}function Mw(){Ad.globalInterfaceSpec.forEach(function(g){if("installMethods"===
g.action){var c=Ad.Path(g.target),k=Ad.Path(g.source).get(Ad.livelyLang),f=c.get(Ad.GLOBAL);f&&(g.methods.filter(function(l){return k===f[l]}).forEach(function(l){delete f[l]}),g.alias&&g.alias.filter(function(l){return k===f[l]}).forEach(function(l){delete f[l[0]]}))}else if("installObject"===g.action)c=Ad.Path(g.target),c.del(Ad.GLOBAL);else throw Error("Cannot deal with global setup action: "+g.action);})}function Mq(g,c){var k=void 0===g.useProxy?!0:g.useProxy,f=void 0===g.useCors?!0:g.useCors,
l=g.url,p=g.onLoad,b=g.headers,d=g.onProgress,h=new Qf.XMLHttpRequest,a=Qf.promise.deferred();h.open("PUT",l);k&&(Object.assign(b,{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":l}),l=g.proxyDomain||Qf.defaultOrigin());for(var e in b)h.setRequestHeader(e,b[e]);h.upload.addEventListener("progress",d);h.responseType="json";h.onload=function(){p(h.response);a.resolve(h)};f&&(h.withCredentials=!0);h.send(c);return a.promise}function En(g,c,k){c=void 0===c?"infinity":c;var f,l,p,
b,d,h,a,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(g.dirList(c,k),2);case 2:f=y.yieldResult,l={},p=$jscomp.makeIterator(f),b=p.next();case 3:if(b.done){y.jumpTo(5);break}d=b.value;if(d.isDirectory()){h={};y.jumpTo(6);break}return y.yield(d.read(),7);case 7:h=y.yieldResult;case 6:a=h;e=d.asFile().relativePathFrom(g).split("/");n=l;q=$jscomp.makeIterator(e.slice(0,-1));for(r=q.next();!r.done;r=q.next())v=r.value,n[v]||(n[v]={}),
n=n[v];n[e[e.length-1]]=a;b=p.next();y.jumpTo(3);break;case 5:return y.return(l)}})}function au(g){var c,k,f,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return c=document.head,k=c.namespaceURI,f=Xg.newUUID(),l=document.createElementNS(k,"script"),l.setAttribute("type","module"),c.appendChild(l),l.innerText="import m from '"+g+"'; window['"+f+"'] = m;",l.setAttributeNS(null,"async",!0),b.yield(Xg.waitFor(3E4,function(){return window[f]}),2);p=b.yieldResult;
delete window[f];l.remove();return b.return(p)})}function Nq(g,c){var k=document.head,f=k.namespaceURI;return new Promise(function(l,p){var b=document.createElementNS(f,"script");b.setAttribute("type","text/ecmascript");k.appendChild(b);b.setAttributeNS(null,"id",g);"http://www.w3.org/2000/svg"===b.namespaceURI?b.setAttributeNS("http://www.w3.org/1999/xlink","href",g):b.setAttribute("src",g);b.onload=l;b.onerror=p;b.setAttributeNS(null,"async",!0)})}function bu(){var g,c,k,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:if("fetch"in
System.global&&"Headers"in System.global)return l.return(Promise.resolve());g=System.decanonicalize("lively.resources");if(System.get("@system-env").node){l.setCatchFinallyBlocks(5);c=System._nodeRequire("fetch-ponyfill");l.leaveTryBlock(3);break}return l.yield(System.import("fetch-ponyfill",g),4);case 4:c=l.yieldResult;l.jumpTo(3);break;case 5:return l.enterCatchBlock(),l.yield(System.normalize("fetch-ponyfill",g),7);case 7:return k=l.yieldResult.replace("file://",""),l.yield(System.import(k),8);
case 8:f=l.yieldResult,c=f.default;case 3:Object.assign(System.global,c()),l.jumpToEnd()}})}function cu(g){return(g=g.match(eV))?{scheme:g[1],auth:g[2],host:g[3],port:g[4],path:g[5]}:null}function Ep(g){var c="";g.scheme&&(c+=g.scheme+":");c+="//";g.auth&&(c+=g.auth+"@");g.host&&(c+=g.host);g.port&&(c+=":"+g.port);g.path&&(c+=g.path);return c}function pz(g){var c=g,k=cu(g);if(k){if(!k.path)return g;c=k.path}g=Hk.isAbsolute(c);c=c.split(/\/+/);for(var f,l=0,p=c.length-1;0<=p;p--)f=c[p],"."===f?c.splice(p,
1):".."===f?l++:0<l&&(""===f?(c.splice(p+1,l),l=0):(c.splice(p,2),l--));c=c.join("/");""===c&&(c=g?"/":".");return k?(k.path=c,Ep(k)):c}function qz(g,c){""===g&&(g=".");""===c&&(c=".");var k=cu(c),f=cu(g);f&&(g=f.path||"/");if(k&&!k.scheme)return f&&(k.scheme=f.scheme),Ep(k);if(k||c.match(nda))return c;if(f&&!f.host&&!f.path)return f.host=c,Ep(f);g="/"===c.charAt(0)?c:pz(g.replace(/\/+$/,"")+"/"+c);return f?(f.path=g,Ep(f)):g}function rz(g){return g}function sz(g){return ha(g)?"$"+g:g}function BL(g){return ha(g)?
g.slice(1):g}function ha(g){if(!g)return!1;var c=g.length;if(9>c||95!==g.charCodeAt(c-1)||95!==g.charCodeAt(c-2)||111!==g.charCodeAt(c-3)||116!==g.charCodeAt(c-4)||111!==g.charCodeAt(c-5)||114!==g.charCodeAt(c-6)||112!==g.charCodeAt(c-7)||95!==g.charCodeAt(c-8)||95!==g.charCodeAt(c-9))return!1;for(c-=10;0<=c;c--)if(36!==g.charCodeAt(c))return!1;return!0}function Aa(g,c){return g===c?0:null===g?1:null===c?-1:g>c?1:-1}function $a(){(this||El)._array=[];(this||El)._set=du?new Map:Object.create(null)}
function zb(){(this||Fn)._array=[];(this||Fn)._sorted=!0;(this||Fn)._last={generatedLine:-1,generatedColumn:0}}function bc(g){g||(g={});(this||eh)._file=rk.getArg(g,"file",null);(this||eh)._sourceRoot=rk.getArg(g,"sourceRoot",null);(this||eh)._skipValidation=rk.getArg(g,"skipValidation",!1);(this||eh)._sources=new aD;(this||eh)._names=new aD;(this||eh)._mappings=new oda;(this||eh)._sourcesContents=null}function tc(g,c,k,f,l,p){var b=Math.floor((c-g)/2)+g,d=l(k,f[b],!0);return 0===d?b:0<d?1<c-b?tc(b,
c,k,f,l,p):p==bD.LEAST_UPPER_BOUND?c<f.length?c:-1:b:1<b-g?tc(g,b,k,f,l,p):p==bD.LEAST_UPPER_BOUND?b:0>g?-1:g}function vd(g,c,k){var f=g[c];g[c]=g[k];g[k]=f}function ze(g,c,k,f){if(k<f){var l=k-1;vd(g,Math.round(k+Math.random()*(f-k)),f);for(var p=g[f],b=k;b<f;b++)0>=c(g[b],p)&&(l+=1,vd(g,l,b));vd(g,l+1,b);l+=1;ze(g,c,k,l-1);ze(g,c,l+1,f)}}function le(g,c){var k=g;"string"===typeof g&&(k=Df.parseSourceMapInput(g));return null!=k.sections?new fh(k,c):new Pe(k,c)}function Pe(g,c){var k=g;"string"===
typeof g&&(k=Df.parseSourceMapInput(g));g=Df.getArg(k,"version");var f=Df.getArg(k,"sources"),l=Df.getArg(k,"names",[]),p=Df.getArg(k,"sourceRoot",null),b=Df.getArg(k,"sourcesContent",null),d=Df.getArg(k,"mappings");k=Df.getArg(k,"file",null);if(g!=(this||ye)._version)throw Error("Unsupported version: "+g);p&&(p=Df.normalize(p));f=f.map(String).map(Df.normalize).map(function(h){return p&&Df.isAbsolute(p)&&Df.isAbsolute(h)?Df.relative(p,h):h});(this||ye)._names=Nw.fromArray(l.map(String),!0);(this||
ye)._sources=Nw.fromArray(f,!0);(this||ye)._absoluteSources=(this||ye)._sources.toArray().map(function(h){return Df.computeSourceURL(p,h,c)});(this||ye).sourceRoot=p;(this||ye).sourcesContent=b;(this||ye)._mappings=d;(this||ye)._sourceMapURL=c;(this||ye).file=k}function Rf(){(this||ye).generatedLine=0;(this||ye).generatedColumn=0;(this||ye).source=null;(this||ye).originalLine=null;(this||ye).originalColumn=null;(this||ye).name=null}function fh(g,c){var k=g;"string"===typeof g&&(k=Df.parseSourceMapInput(g));
g=Df.getArg(k,"version");k=Df.getArg(k,"sections");if(g!=(this||ye)._version)throw Error("Unsupported version: "+g);(this||ye)._sources=new Nw;(this||ye)._names=new Nw;var f={line:-1,column:0};(this||ye)._sections=k.map(function(l){if(l.url)throw Error("Support for url field in sections not implemented.");var p=Df.getArg(l,"offset"),b=Df.getArg(p,"line"),d=Df.getArg(p,"column");if(b<f.line||b===f.line&&d<f.column)throw Error("Section offsets must be ordered and non-overlapping.");f=p;return{generatedOffset:{generatedLine:b+
1,generatedColumn:d+1},consumer:new le(Df.getArg(l,"map"),c)}})}function vh(g,c,k,f,l){(this||Yh).children=[];(this||Yh).sourceContents={};(this||Yh).line=null==g?null:g;(this||Yh).column=null==c?null:c;(this||Yh).source=null==k?null:k;(this||Yh).name=null==l?null:l;(this||Yh).$$$isSourceNode$$$=!0;null!=f&&this.add(f)}function Yf(g,c){c=void 0===c?{}:c;var k=Object.assign({indent:{style:"  ",base:0,adjustMultilineComment:!1,optsIndent:c&&c.format&&c.format.indent||{}},quotes:"double"},Ym.obj.dissoc(c&&
c.format||{},["indent"]));c=Object.assign({format:k,comment:!1},Ym.obj.dissoc(c,["format"]));return Ym.es.generate(g,c)}function Dm(g,c){for(var k=65536,f=0;f<c.length;f+=2){k+=c[f];if(k>g)return!1;k+=c[f+1];if(k>=g)return!0}}function Pi(g,c){return 65>g?36===g:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&pda.test(String.fromCharCode(g)):!1===c?!1:Dm(g,fV)}function ui(g,c){return 48>g?36===g:58>g?!0:65>g?!1:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&qda.test(String.fromCharCode(g)):!1===c?!1:
Dm(g,fV)||Dm(g,rda)}function Uj(g,c){return new vi(g,{beforeExpr:!0,binop:c})}function Dh(g,c){void 0===c&&(c={});c.keyword=g;return cD[g]=new vi(g,c)}function Em(g,c){return 10===g||13===g||!c&&(8232===g||8233===g)}function Zm(g){return new RegExp("^(?:"+g.replace(/ /g,"|")+")$")}function Oq(g,c){for(var k=1,f=0;;){Ow.lastIndex=f;var l=Ow.exec(g);if(l&&l.index<c)++k,f=l.index+l[0].length;else return new Pw(k,c-f)}}function Qw(g){var c={},k;for(k in dD)c[k]=g&&eD.call(g,k)?g[k]:dD[k];"latest"===c.ecmaVersion?
c.ecmaVersion=1E8:null==c.ecmaVersion?(!gV&&"object"===typeof console&&console.warn&&(gV=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),c.ecmaVersion=11):2015<=c.ecmaVersion&&(c.ecmaVersion-=2009);null==c.allowReserved&&(c.allowReserved=5>c.ecmaVersion);if(hV(c.onToken)){var f=c.onToken;c.onToken=function(l){return f.push(l)}}hV(c.onComment)&&(c.onComment=sda(c,c.onComment));return c}function sda(g,c){return function(k,
f,l,p,b,d){k={type:k?"Block":"Line",value:f,start:l,end:p};g.locations&&(k.loc=new tz(this,b,d));g.ranges&&(k.range=[l,p]);c.push(k)}}function fD(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function iV(g,c,k,f){g.type=c;g.end=k;this.options.locations&&(g.loc.end=f);this.options.ranges&&(g.range[1]=k);return g}function gD(g){g=jV[g]={binary:Zm(tda[g]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:Zm("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:Zm(uda[g])}};g.nonBinary.Script_Extensions=g.nonBinary.Script;g.nonBinary.gc=g.nonBinary.General_Category;g.nonBinary.sc=g.nonBinary.Script;g.nonBinary.scx=g.nonBinary.Script_Extensions}function hD(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function kV(g){return 36===g||40<=g&&43>=g||46===g||63===g||91<=g&&94>=g||123<=g&&125>=g}function lV(g){return 65<=g&&90>=g||97<=g&&122>=g||95===g}function vda(g){return lV(g)||iD(g)}function iD(g){return 48<=
g&&57>=g}function mV(g){return 48<=g&&57>=g||65<=g&&70>=g||97<=g&&102>=g}function nV(g){return 65<=g&&70>=g?10+(g-65):97<=g&&102>=g?10+(g-97):g-48}function oV(g){return"function"!==typeof BigInt?null:BigInt(g.replace(/_/g,""))}function CL(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function jD(g){return"string"===typeof g?function(c){return c===g}:g?g:function(){return!0}}function pV(g,c){c=Object.create(c||Le);for(var k in g)c[k]=
g[k];return c}function DL(g,c,k){k(g,c)}function eu(g,c,k){}function EL(g,c){for(var k=65536,f=0;f<c.length;f+=2){k+=c[f];if(k>g)return!1;k+=c[f+1];if(k>=g)return!0}}function Pq(g,c){return 65>g?36===g:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&wda.test(String.fromCharCode(g)):!1===c?!1:EL(g,qV)}function Rw(g,c){return 48>g?36===g:58>g?!0:65>g?!1:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&xda.test(String.fromCharCode(g)):!1===c?!1:EL(g,qV)||EL(g,yda)}function Gn(g,c){return new wi(g,{beforeExpr:!0,
binop:c})}function di(g,c){void 0===c&&(c={});c.keyword=g;return FL[g]=new wi(g,c)}function is(g,c){return 10===g||13===g||!c&&(8232===g||8233===g)}function fu(g){return new RegExp("^(?:"+g.replace(/ /g,"|")+")$")}function uz(g,c){for(var k=1,f=0;;){gu.lastIndex=f;var l=gu.exec(g);if(l&&l.index<c)++k,f=l.index+l[0].length;else return new vz(k,c-f)}}function zda(g){var c={},k;for(k in kD)c[k]=g&&wz.call(g,k)?g[k]:kD[k];"latest"===c.ecmaVersion?c.ecmaVersion=1E8:null==c.ecmaVersion?(!rV&&"object"===
typeof console&&console.warn&&(rV=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),c.ecmaVersion=11):2015<=c.ecmaVersion&&(c.ecmaVersion-=2009);null==c.allowReserved&&(c.allowReserved=5>c.ecmaVersion);if(sV(c.onToken)){var f=c.onToken;c.onToken=function(l){return f.push(l)}}sV(c.onComment)&&(c.onComment=Ada(c,c.onComment));return c}function Ada(g,c){return function(k,f,l,p,b,d){k={type:k?"Block":"Line",value:f,start:l,
end:p};g.locations&&(k.loc=new Sw(this,b,d));g.ranges&&(k.range=[l,p]);c.push(k)}}function lD(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function mD(g,c){var k=g.key;return!g.computed&&("Identifier"===k.type&&k.name===c||"Literal"===k.type&&k.value===c)}function tV(g){return"MemberExpression"===g.type&&"PrivateIdentifier"===g.property.type||"ChainExpression"===g.type&&tV(g.expression)}function uV(g,c,k,f){g.type=c;g.end=k;this.options.locations&&
(g.loc.end=f);this.options.ranges&&(g.range[1]=k);return g}function nD(g){g=vV[g]={binary:fu(Bda[g]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:fu("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:fu(Cda[g])}};g.nonBinary.Script_Extensions=g.nonBinary.Script;g.nonBinary.gc=g.nonBinary.General_Category;g.nonBinary.sc=g.nonBinary.Script;g.nonBinary.scx=g.nonBinary.Script_Extensions}function oD(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function wV(g){return 36===g||40<=g&&43>=g||46===g||63===g||91<=g&&94>=g||123<=g&&125>=g}function xV(g){return 65<=g&&90>=g||97<=g&&122>=g||95===g}function Dda(g){return xV(g)||pD(g)}function pD(g){return 48<=
g&&57>=g}function yV(g){return 48<=g&&57>=g||65<=g&&70>=g||97<=g&&102>=g}function zV(g){return 65<=g&&70>=g?10+(g-65):97<=g&&102>=g?10+(g-97):g-48}function AV(g){return"function"!==typeof BigInt?null:BigInt(g.replace(/_/g,""))}function qD(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function Fp(g){return"\u2716"===g.name}function BV(){}function Eda(g){return 14>g&&8<g||32===g||160===g||is(g)}function rD(g,c,k,f){var l=[];f=f||Ie.walk.make(Ie.custom.visitors.withMemberExpression);
Object.keys(Ie.walk.base).forEach(function(p){var b=f[p];f[p]=function(d,h,a){Ie.arr.pushIfNotIncluded(l,d);return b(d,h,a)}});f.Property=function(p,b,d){Ie.arr.pushIfNotIncluded(l,p);d(p.key,b,"Expression");d(p.value,b,"Expression")};f.LabeledStatement=function(p,b,d){p.label&&d(p.label,b,"Expression");d(p.body,b,"Statement")};Ie.walk.findNodeAround(g,c,k,f);return l}function GL(g,c){function k(l){return null===l?null:f[l.type](l,k)}var f=Ie.obj.extend({Program:function(l,p){return{start:l.start,
end:l.end,type:"Program",body:l.body.map(p),source:l.source,astIndex:l.astIndex}},FunctionDeclaration:function(l,p){return{start:l.start,end:l.end,type:"FunctionDeclaration",id:p(l.id),params:l.params.map(p),body:p(l.body),source:l.source,astIndex:l.astIndex}},BlockStatement:function(l,p){return{start:l.start,end:l.end,type:"BlockStatement",body:l.body.map(p),source:l.source,astIndex:l.astIndex}},ExpressionStatement:function(l,p){return{start:l.start,end:l.end,type:"ExpressionStatement",expression:p(l.expression),
source:l.source,astIndex:l.astIndex}},CallExpression:function(l,p){return{start:l.start,end:l.end,type:"CallExpression",callee:p(l.callee),arguments:l.arguments.map(p),source:l.source,astIndex:l.astIndex}},MemberExpression:function(l,p){return{start:l.start,end:l.end,type:"MemberExpression",object:p(l.object),property:p(l.property),computed:l.computed,source:l.source,astIndex:l.astIndex}},NewExpression:function(l,p){return{start:l.start,end:l.end,type:"NewExpression",callee:p(l.callee),arguments:l.arguments.map(p),
source:l.source,astIndex:l.astIndex}},VariableDeclaration:function(l,p){return{start:l.start,end:l.end,type:"VariableDeclaration",declarations:l.declarations.map(p),kind:l.kind,source:l.source,astIndex:l.astIndex}},VariableDeclarator:function(l,p){return{start:l.start,end:l.end,type:"VariableDeclarator",id:p(l.id),init:p(l.init),source:l.source,astIndex:l.astIndex}},FunctionExpression:function(l,p){return{start:l.start,end:l.end,type:"FunctionExpression",id:p(l.id),params:l.params.map(p),body:p(l.body),
source:l.source,astIndex:l.astIndex}},IfStatement:function(l,p){return{start:l.start,end:l.end,type:"IfStatement",test:p(l.test),consequent:p(l.consequent),alternate:p(l.alternate),source:l.source,astIndex:l.astIndex}},ConditionalExpression:function(l,p){return{start:l.start,end:l.end,type:"ConditionalExpression",test:p(l.test),consequent:p(l.consequent),alternate:p(l.alternate),source:l.source,astIndex:l.astIndex}},SwitchStatement:function(l,p){return{start:l.start,end:l.end,type:"SwitchStatement",
discriminant:p(l.discriminant),cases:l.cases.map(p),source:l.source,astIndex:l.astIndex}},SwitchCase:function(l,p){return{start:l.start,end:l.end,type:"SwitchCase",test:p(l.test),consequent:l.consequent.map(p),source:l.source,astIndex:l.astIndex}},BreakStatement:function(l,p){return{start:l.start,end:l.end,type:"BreakStatement",label:l.label,source:l.source,astIndex:l.astIndex}},ContinueStatement:function(l,p){return{start:l.start,end:l.end,type:"ContinueStatement",label:l.label,source:l.source,astIndex:l.astIndex}},
TryStatement:function(l,p){return{start:l.start,end:l.end,type:"TryStatement",block:p(l.block),handler:p(l.handler),finalizer:p(l.finalizer),guardedHandlers:l.guardedHandlers.map(p),source:l.source,astIndex:l.astIndex}},CatchClause:function(l,p){return{start:l.start,end:l.end,type:"CatchClause",param:p(l.param),guard:p(l.guard),body:p(l.body),source:l.source,astIndex:l.astIndex}},ThrowStatement:function(l,p){return{start:l.start,end:l.end,type:"ThrowStatement",argument:p(l.argument),source:l.source,
astIndex:l.astIndex}},ForStatement:function(l,p){return{start:l.start,end:l.end,type:"ForStatement",init:p(l.init),test:p(l.test),update:p(l.update),body:p(l.body),source:l.source,astIndex:l.astIndex}},ForInStatement:function(l,p){return{start:l.start,end:l.end,type:"ForInStatement",left:p(l.left),right:p(l.right),body:p(l.body),source:l.source,astIndex:l.astIndex}},WhileStatement:function(l,p){return{start:l.start,end:l.end,type:"WhileStatement",test:p(l.test),body:p(l.body),source:l.source,astIndex:l.astIndex}},
DoWhileStatement:function(l,p){return{start:l.start,end:l.end,type:"DoWhileStatement",test:p(l.test),body:p(l.body),source:l.source,astIndex:l.astIndex}},WithStatement:function(l,p){return{start:l.start,end:l.end,type:"WithStatement",object:p(l.object),body:p(l.body),source:l.source,astIndex:l.astIndex}},UnaryExpression:function(l,p){return{start:l.start,end:l.end,type:"UnaryExpression",argument:p(l.argument),operator:l.operator,prefix:l.prefix,source:l.source,astIndex:l.astIndex}},BinaryExpression:function(l,
p){return{start:l.start,end:l.end,type:"BinaryExpression",left:p(l.left),operator:l.operator,right:p(l.right),source:l.source,astIndex:l.astIndex}},LogicalExpression:function(l,p){return{start:l.start,end:l.end,type:"LogicalExpression",left:p(l.left),operator:l.operator,right:p(l.right),source:l.source,astIndex:l.astIndex}},AssignmentExpression:function(l,p){return{start:l.start,end:l.end,type:"AssignmentExpression",left:p(l.left),operator:l.operator,right:p(l.right),source:l.source,astIndex:l.astIndex}},
UpdateExpression:function(l,p){return{start:l.start,end:l.end,type:"UpdateExpression",argument:p(l.argument),operator:l.operator,prefix:l.prefix,source:l.source,astIndex:l.astIndex}},ReturnStatement:function(l,p){return{start:l.start,end:l.end,type:"ReturnStatement",argument:p(l.argument),source:l.source,astIndex:l.astIndex}},Identifier:function(l,p){return{start:l.start,end:l.end,type:"Identifier",name:l.name,source:l.source,astIndex:l.astIndex}},Literal:function(l,p){return{start:l.start,end:l.end,
type:"Literal",value:l.value,raw:l.raw,source:l.source,astIndex:l.astIndex}},ObjectExpression:function(l,p){return{start:l.start,end:l.end,type:"ObjectExpression",properties:l.properties.map(function(b){return{key:p(b.key),value:p(b.value),kind:b.kind}}),source:l.source,astIndex:l.astIndex}},ArrayExpression:function(l,p){return{start:l.start,end:l.end,type:"ArrayExpression",elements:l.elements.map(p),source:l.source,astIndex:l.astIndex}},SequenceExpression:function(l,p){return{start:l.start,end:l.end,
type:"SequenceExpression",expressions:l.expressions.map(p),source:l.source,astIndex:l.astIndex}},EmptyStatement:function(l,p){return{start:l.start,end:l.end,type:"EmptyStatement",source:l.source,astIndex:l.astIndex}},ThisExpression:function(l,p){return{start:l.start,end:l.end,type:"ThisExpression",source:l.source,astIndex:l.astIndex}},DebuggerStatement:function(l,p){return{start:l.start,end:l.end,type:"DebuggerStatement",source:l.source,astIndex:l.astIndex}},LabeledStatement:function(l,p){return{start:l.start,
end:l.end,type:"LabeledStatement",label:l.label,body:p(l.body),source:l.source,astIndex:l.astIndex}}},c||{});return k(g)}function HL(g,c,k){if(!c)return[];g=Ie.findNodesIncluding(g,c.start);var f=g.indexOf(c);g=g.slice(0,f);g=Ie.arr.detect(g.reverse(),function(l){return Array.isArray(l.body)}).body;if(!k)return Ie.arr.without(g,c);c=g.indexOf(c);return"before"===k?g.slice(0,c):g.slice(c+1)}function IL(g,c,k){g.astIndex||null!=k&&!k||Ie.addAstIndex(g);var f=null;Ie.withMozillaAstDo(g,null,function(l,
p,b){f||p.astIndex<c||(p.astIndex===c?f=p:l())});return f}function JL(g,c,k){k||(k=c,c=g,g=null);g||(g={});c.astIndex||Ie.addAstIndex(c);var f,l=!1,p="EmptyStatement BlockStatement ExpressionStatement IfStatement LabeledStatement BreakStatement ContinueStatement WithStatement SwitchStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration".split(" ");Ie.withMozillaAstDo(c,
{},function(b,d,h,a){if(!(l||d.astIndex<k.astIndex)){if(d===k||d.astIndex===k.astIndex)if(l=!0,g.asPath)f=a;else{d=Ie.Path(a);do f=d.get(c),d=d.slice(0,d.size()-1);while(-1==p.indexOf(f.type)&&0<d.size())}!l&&b()}});return f}function xz(g){Ie.withMozillaAstDo(g,{index:0},function(c,k,f){c();k.astIndex=f.index++});return g}function sD(g,c){"string"===typeof g&&(c=g,g=Hg.parse(g));c&&Hg.AllNodesVisitor.run(g,function(k,f,l){return!k.source&&(k.source=c.slice(k.start,k.end))});return g}function js(g,
c){c=void 0===c?{}:c;var k=Hg.parse("("+g+")",c);Hg.AllNodesVisitor.run(k,function(f,l,p){if(!f._positionFixed){f._positionFixed=!0;if(f.start||0===f.start)f.start+=-1,f.end+=-1;c.addSource&&!f.source&&(f.source=g.slice(f.start,f.end))}});return k.body[0].expression}function Qq(g,c){c=c||{};c.ecmaVersion=c.ecmaVersion||11;c.sourceType=c.sourceType||"module";c.plugins=c.plugins||{};c.plugins.jsx=c.plugins.hasOwnProperty("jsx")?c.plugins.jsx:!0;c.plugins.asyncawait=c.plugins.hasOwnProperty("asyncawait")?
c.plugins.asyncawait:{inAsyncFunction:!0};c.plugins.objectSpread=c.plugins.hasOwnProperty("objectSpread")?c.plugins.objectSpread:!0;var k;"LabeledStatement"===c.type&&(k="$={"+g+"}");try{var f=Hg.parse(k||g,c);k?f=null:c.addSource&&Hg.addSource(f,g)}catch(p){var l=p}l&&void 0!==l.raisedAt?(k&&(l.pos-=3,l.raisedAt-=3,l.loc.column-=3),k=""+g.slice(l.raisedAt-20,l.raisedAt),k=k+"<-error->"+g.slice(l.raisedAt,l.raisedAt+20),c.verbose&&console.log("parse error: "+k),l.parseErrorSource=k):l&&c.verbose&&
console.log(""+l+l.stack);f||(f=Hg.loose.parse(g,c),c.addSource&&Hg.addSource(f,g),f.isFuzzy=!0,f.parseError=l);return f}function gk(g,c){function k(n){n=l(f(n));b.allComments=n.comments}function f(n){p.forEach(function(q){var r=Hg.arr.detect(Hg.nodesAt(q.start,b).reverse(),function(v){return"BlockStatement"===v.type||"Program"===v.type});r||(r=b);r.comments||(r.comments=[]);r.comments.push(q);n.nodesWithComments.push(r)});return n}function l(n){n.nodesWithComments.forEach(function(q){Hg.arr.clone(q.comments).reduce(function(r,
v){if(v.isBlock)return r.lastComment=null,r;if(!r.lastComment)return r.lastComment=v,r;var y=r.lastComment;if(Hg.arr.detect(q.body,function(E){return E.start>=y.end&&E.end<=v.start}))return r.lastComment=v,r;var D=g.slice(y.end,v.start);if(/[\n\r][\n\r]+/.test(D))return r.lastComment=v,r;y.text+="\n"+v.text;y.end=v.end;Hg.arr.remove(q.comments,v);Hg.arr.remove(n.comments,v);return r},{lastComment:null})});return n}c=c||{};c.ecmaVersion=c.ecmaVersion||11;c.allowAwaitOutsideFunction=!0;c.sourceType=
c.sourceType||"module";c.hasOwnProperty("allowImportExportEverywhere")||(c.allowImportExportEverywhere=!0);c.plugins=c.plugins||{};c.plugins.jsx=c.plugins.hasOwnProperty("jsx")?c.plugins.jsx:!0;c.plugins.asyncawait=c.plugins.hasOwnProperty("asyncawait")?c.plugins.asyncawait:{inAsyncFunction:!0};c.plugins.objectSpread=c.plugins.hasOwnProperty("objectSpread")?c.plugins.objectSpread:!0;if(c.withComments){delete c.withComments;var p=[];c.onComment=function(n,q,r,v,y,D){p.push({isBlock:n,text:q,node:null,
start:r,end:v,line:y,column:D})}}try{var b=Hg.acorn.parse(g,c)}catch(n){if("undefined"!==typeof SyntaxError&&n instanceof SyntaxError&&n.loc){var d=g.split("\n"),h=n,a=h.loc;c=a.line;a=a.column;var e=h.pos;d=d[c-1];h="Syntax error at line "+c+" column "+a+" (index "+e+') "'+h.message+'"\nsource: '+d.slice(0,a)+"<--SyntaxError--\x3e"+d.slice(a);h=new SyntaxError(h);h.loc={line:c,column:a};h.pos=e;throw h;}throw n;}c.addSource&&Hg.addSource(b,g);c.addAstIndex&&!b.hasOwnProperty("astIndex")&&Hg.addAstIndex(b);
b&&p&&k({ast:b,comments:p,nodesWithComments:[]});return b}function tD(g){return Be.identifierRe.test(g)&&-1===g.indexOf("-")}function yz(g){return"this"===g?{type:"ThisExpression"}:{name:String(g),type:"Identifier"}}function uD(g){return{type:"Literal",value:g}}function zz(g){return{type:"ExpressionStatement",expression:g}}function Az(g){return{type:"ReturnStatement",argument:g}}function vD(){return{type:"EmptyStatement"}}function wD(g,c,k){return{left:g,right:k,operator:c,type:"BinaryExpression"}}
function Bz(g,c,k){for(var f=[],l=2;l<arguments.length;++l)f[l-2]=arguments[l];l=g.arrow;var p=g.id,b=g.expression,d=g.generator;c=void 0===c?[]:c;c=c.map(function(h){return"string"===typeof h?Be.id(h):h});return{type:(l?"Arrow":"")+"FunctionExpression",id:p?"string"===typeof p?Be.id(p):p:void 0,params:c,body:b&&1===f.length?f[0]:{body:f,type:"BlockStatement"},expression:b||!1,generator:d||!1}}function Tw(g,c){for(var k=[],f=1;f<arguments.length;++f)k[f-1]=arguments[f];"string"===typeof g&&(g=Be.id(g));
return{type:"CallExpression",callee:g,arguments:k}}function Cz(g,c,k){"string"===typeof g&&(g={name:g,type:"Identifier"});return{type:"VariableDeclaration",kind:k||"var",declarations:[{type:"VariableDeclarator",id:g,init:c}]}}function Dz(g,c,k){"string"===typeof g&&(g=Be.id(g));"string"===typeof c?(k||Be.isIdentifier(c)||(k=!0),c=k?Be.literal(c):Be.id(c)):"number"===typeof c?(c=Be.literal(c),k=!0):"Literal"===c.type&&(k=!0);return{type:"MemberExpression",computed:!!k,object:g,property:c}}function Ez(g,
c){for(var k=[],f=1;f<arguments.length;++f)k[f-1]=arguments[f];return k.reduce(function(l,p){return Be.member(l,p)},"object"===typeof g?g:Be.id(g))}function xD(g,c){return{type:"AssignmentExpression",operator:"=",right:c?"string"===typeof c?Be.id(c):c:Be.id("undefined"),left:"string"===typeof g?Be.id(g):g}}function Fz(g){for(var c=[],k=0;k<arguments.length;++k)c[k-0]=arguments[k];return{body:Array.isArray(c[0])?c[0]:c,type:"BlockStatement"}}function Gz(g){for(var c=[],k=0;k<arguments.length;++k)c[k-
0]=arguments[k];return Object.assign(Be.block.apply(Be,$jscomp.arrayFromIterable(c)),{sourceType:"module",type:"Program"})}function Hz(g,c,k,f){for(var l=[],p=3;p<arguments.length;++p)l[p-3]=arguments[p];Array.isArray(k)||(l.unshift(k),k=null);return{block:Be.block(l),finalizer:k?Be.block(k):null,handler:{body:Be.block(c),param:Be.id(g),type:"CatchClause"},type:"TryStatement"}}function yD(g,c){return{type:"Property",key:g,computed:"Identifier"!==g.type,shorthand:!1,value:c}}function zD(g){for(var c=
[],k=0;k<g.length;k+=2){var f=g[k];"string"===typeof f&&(f=Be.id(f));c.push(Be.prop(f,g[k+1]))}return{properties:c,type:"ObjectExpression"}}function AD(g,c,k){c=void 0===c?Be.block():c;k=void 0===k?Be.block():k;return{consequent:c,alternate:k,test:g,type:"IfStatement"}}function BD(g,c,k){return{type:"ForInStatement",left:"string"===typeof g?Be.varDecl(g):g,right:"string"===typeof c?Be.id(c):c,body:k}}function CD(g,c,k){c=void 0===c?Be.id("undefined"):c;k=void 0===k?Be.id("undefined"):k;return{consequent:c,
alternate:k,test:g,type:"ConditionalExpression"}}function DD(g,c,k){return{operator:g,left:c,right:k,type:"LogicalExpression"}}function Iz(g){var c=new Dd.ScopeVisitor,k=c.newScope(g,null);c.accept(g,k,[]);return k}function ED(g,c){return Dd.withMozillaAstDo(g,[],function(k,f,l){f.start<=c&&c<=f.end&&(l.push(f),k());return l})}function FD(g,c){return Dd.tree.filter(Dd.scopes(g),function(k){k=k.node;var f=k.start,l=k.end;"FunctionDeclaration"===k.type&&(f=k.params.length?k.params[0].start:k.body.start,
l=k.body.end);return f<=c&&c<=l},function(k){return k.subScopes})}function GD(g,c){return Dd.arr.last(Dd.scopesAtIndex(g,c))}function HD(g,c){return Dd.arr.filter(Dd.nodesAt(g,c),function(k){return"Program"===k.type||"FunctionDeclaration"===k.type||"FunctionExpression"===k.type})}function ID(g){return Dd.withMozillaAstDo(g,{root:g,result:[]},function(c,k,f){f.result.push(k);if(k!==f.root&&("Program"===k.type||"FunctionDeclaration"===k.type||"FunctionExpression"===k.type))return f;c();return f}).result}
function JD(g,c,k){k=void 0===k?[]:k;c&&g.node.id&&g.node.id.name&&k.push(g.node.id);Dd.helpers.declIds(g.params,k);for(c=0;c<g.funcDecls.length;c++){var f=g.funcDecls[c].id;f&&k.push(f)}Dd.helpers.varDeclIds(g,k);k.push.apply(k,$jscomp.arrayFromIterable(g.catches));for(c=0;c<g.classDecls.length;c++)(f=g.classDecls[c].id)&&k.push(f);k.push.apply(k,$jscomp.arrayFromIterable(g.importSpecifiers));return Dd.arr.compact(k)}function KD(g,c){for(var k=[],f=$jscomp.makeIterator(Dd.declarationsOfScope(g,!0)),
l=f.next();!l.done;l=f.next())k.push(l.value.name);c&&Dd._findJsLintGlobalDeclarations("Program"===g.node.type?g.node:g.node.body,k);return k}function LD(g,c){c=void 0===c?[]:c;if(!g||!g.comments)return c;g=$jscomp.makeIterator(g.comments);for(var k=g.next();!k.done;k=g.next())if(k=k.value.text.trim(),k.startsWith("global")){k=$jscomp.makeIterator(k.replace(Dd.globalDeclRe,"").split(","));for(var f=k.next();!f.done;f=k.next())c.push(f.value.trim())}return c}function Jz(g){return Dd.FindToplevelFuncDeclVisitor.run(g)}
function CV(g,c){if(0==c.length)return[null,null];var k=$jscomp.makeIterator(c);c=k.next().value;k=$jscomp.arrayFromIterator(k);var f=c.decls||Dd.declarationsWithIdsOfScope(c);c.decls=f;return f.find(function(l){l=$jscomp.makeIterator(l);l.next();return l.next().value.name==g})||CV(g,k)}function MD(g){function c(f,l){var p=[f].concat(l);f.refs.forEach(function(b){var d=$jscomp.makeIterator(Dd.resolveReference(b.name,p)),h=d.next().value;d=d.next().value;k.set(b,{decl:h,declId:d,ref:b})});f.subScopes.forEach(function(b){return c(b,
p)})}if(g.referencesResolvedSafely)return g;var k=g.resolvedRefMap||(g.resolvedRefMap=new Map);c(g,[]);g.referencesResolvedSafely=!0;return g}function ND(g,c){c=$jscomp.makeIterator(c.resolvedRefMap.values());for(var k=c.next();!k.done;k=c.next()){k=k.value;var f=k.ref,l=f.end;if(f.start<=g&&g<=l)return k}}function Kz(g,c){function k(b){var d=Dd._declaredVarNames(b,f);return Dd.arr.filter(b.subScopes.map(k).reduce(function(h,a){return h.concat(a)},b.refs),function(h){return-1===d.indexOf(h.name)})}
c=c||{};c.withComments=!0;"string"===typeof g&&(g=Dd.parse(g,c));g=Dd.scopes(g);var f=!!c.jslintGlobalComment;c=Dd._declaredVarNames(g,f);var l=g.refs.concat(Dd.arr.flatten(g.subScopes.map(k))),p=Dd.arr.withoutAll(l.map(function(b){return b.name}),c);return{scope:g,varDecls:g.varDecls,funcDecls:Dd.arr.filter(g.funcDecls,function(b){return b.id}),classDecls:Dd.arr.filter(g.classDecls,function(b){return b.id}),declaredNames:c,undeclaredNames:p,refs:l,thisRefs:g.thisRefs}}function OD(g,c){g=Dd.topLevelDeclsAndRefs(g,
c);var k=g.declaredNames.concat(Dd.knownGlobals);return Dd.arr.filter(g.refs,function(f){return-1===k.indexOf(f.name)})}function PD(g,c,k,f){if(!c&&!g)throw Error("Need at least ast or code");c=c||Dd.stringify(g);g=g&&g.loc?g:Dd.parse(c,{locations:!0});return Dd.withMozillaAstDo(g,[],function(l,p,b){k.every(function(d){return Dd.num.between(d,p.loc.start.line,p.loc.end.line)})&&(Dd.arr.pushIfNotIncluded(b,p),l());return b})}function Lz(g,c,k,f){k=void 0===k?!0:k;f=void 0===f?{refs:[],decls:[]}:f;
if("this"===c)return f.refs.push.apply(f.refs,$jscomp.arrayFromIterable(g.thisRefs)),f;var l=Dd.__varDeclIdsFor(g,c);if(!k&&l.length)return f;k=$jscomp.makeIterator(g.refs);for(var p=k.next();!p.done;p=k.next())p=p.value,p.name===c&&f.refs.push(p);f.decls.push.apply(f.decls,$jscomp.arrayFromIterable(l));g=$jscomp.makeIterator(g.subScopes);for(l=g.next();!l.done;l=g.next())Lz(l.value,c,!1,f);return f}function QD(g,c,k){var f=null;Dd.arr.detect(Dd.scopesAtIndex(g,k).reverse(),function(l){l=Dd.declarationsOfScope(l,
!0);var p=Dd.arr.pluck(l,"name").indexOf(c);if(-1===p)return!1;f=l[p];return!0});return f}function RD(g,c){c="string"===typeof c?Dd.parse(c):c;return Dd.custom.findNodesIncluding(c,g)}function Mz(g,c,k){var f=Dd.nodesAt(c.start,g).reverse().find(function(p){return Dd.arr.include(Dd._stmtTypes,p.type)});if(k&&k.asPath){c=new Dd.BaseVisitor;var l;c.accept=Dd.fun.wrap(c.accept,function(p,b,d,h){if(b===f)throw l=h,Error("stop search");return p(b,d,h)});try{c.accept(g,{},[])}catch(p){}return l}return f}
function SD(g){var c=[];g=g.node.body||[];for(var k=0;k<g.length;k++){var f=g[k];if("ImportDeclaration"===f.type)if(0===f.specifiers.length)c.push({local:null,imported:null,fromModule:f.source.value,node:f});else{var l=f.source?f.source.value:"unknown module";c.push.apply(c,$jscomp.arrayFromIterable(f.specifiers.map(function(p){return{local:p.local?p.local.name:null,imported:"ImportNamespaceSpecifier"===p.type?"*":"ImportDefaultSpecifier"===p.type?"default":"ImportSpecifier"===p.type?p.imported.name:
null,fromModule:l,node:f}})))}}return c}function TD(g,c){(void 0===c?0:c)&&Dd.resolveReferences(g);c=[];for(var k={},f=$jscomp.makeIterator(g.exportDecls),l=f.next();!l.done;k={$jscomp$loop$prop$node$2759:k.$jscomp$loop$prop$node$2759},l=f.next()){k.$jscomp$loop$prop$node$2759=l.value;var p=Dd.statementOf(g.node,k.$jscomp$loop$prop$node$2759);if(p){var b=p.source?p.source.value:null;"ExportAllDeclaration"===p.type?c.push({local:null,exported:"*",imported:"*",fromModule:b,node:k.$jscomp$loop$prop$node$2759,
type:"all"}):"ExportDefaultDeclaration"===p.type?Dd.helpers.isDeclaration(p.declaration)?c.push({local:p.declaration.id?p.declaration.id.name:null,exported:"default",type:"FunctionDeclaration"===p.declaration.type?"function":"ClassDeclaration"===p.declaration.type?"class":null,fromModule:null,node:k.$jscomp$loop$prop$node$2759,decl:p.declaration,declId:p.declaration.id}):"Identifier"===p.declaration.type?(l=g.resolvedRefMap.get(p.declaration)||{},c.push({local:p.declaration.name,exported:"default",
fromModule:null,node:k.$jscomp$loop$prop$node$2759,type:"id",decl:l.decl,declId:l.declId})):c.push({local:null,exported:"default",fromModule:null,node:k.$jscomp$loop$prop$node$2759,type:"expr",decl:p.declaration,declId:p.declaration}):p.specifiers&&p.specifiers.length?c.push.apply(c,$jscomp.arrayFromIterable(p.specifiers.map(function(d){return function(h){if(b){var a=d.$jscomp$loop$prop$node$2759;var e=h.exported}else h.local&&(a=(e=g.resolvedRefMap.get(h.local))?e.decl:null,e=e?e.declId:null);return{local:!b&&
h.local?h.local.name:null,exported:h.exported?h.exported.name:null,imported:b&&h.local?h.local.name:null,fromModule:b||null,type:"id",node:d.$jscomp$loop$prop$node$2759,decl:a,declId:e}}}(k)))):p.declaration&&p.declaration.declarations?c.push.apply(c,$jscomp.arrayFromIterable(p.declaration.declarations.map(function(d){return function(h){return{local:h.id?h.id.name:"default",exported:h.id?h.id.name:"default",type:p.declaration.kind,fromModule:null,node:d.$jscomp$loop$prop$node$2759,decl:h,declId:h.id}}}(k)))):
p.declaration&&c.push({local:p.declaration.id?p.declaration.id.name:"default",exported:p.declaration.id?p.declaration.id.name:"default",type:"FunctionDeclaration"===p.declaration.type?"function":"ClassDeclaration"===p.declaration.type?"class":null,fromModule:null,node:k.$jscomp$loop$prop$node$2759,decl:p.declaration,declId:p.declaration.id})}}return Dd.arr.uniqBy(c,function(d,h){return d.local==h.local&&d.exported==h.exported&&d.fromModule==h.fromModule})}function Uw(g){return(new $m.ObjectSpreadTransformer).accept(g,
{},[])}function UD(g,c){if(g.start===c.start&&g.end===c.end)return 0;if(g.end<=c.start)return-1;if(g.start>=c.end||g.start<=c.start&&g.end>=c.end)return 1;if(c.start<=g.start&&c.end>=g.end)return-1;throw Error("Comparing nodes");}function VD(g,c,k){k="object"===typeof k?k:{changes:[],source:k};var f=!1,l=k.changes.reduce(function(b,d){if(b.end<d.pos)return b;var h=d.pos<b.start;f=f||d.pos>=b.start&&d.pos<=b.end;if("add"===d.type)return{start:h?b.start+d.string.length:b.start,end:b.end+d.string.length};
if("del"===d.type)return{start:h?b.start-d.length:b.start,end:b.end-d.length};throw Error("Cannot deal with change "+Td.obj.inspect(d));},{start:g.start,end:g.end}),p=k.source;g=c(g,p.slice(l.start,l.end),f);g="string"===typeof g?g:Array.isArray(g)?g.map(Td._node2string).join("\n"+Td._findIndentAt(p,l.start)):g=Td._node2string(g);l=[{type:"del",pos:l.start,length:l.end-l.start},{type:"add",pos:l.start,string:g}];return{changes:k.changes.concat(l),source:Td._applyChanges(l,p)}}function WD(g,c){g=g.sort(function(l,
p){return Td._compareNodesForReplacement(l.target,p.target)});c="object"===typeof c?c:{changes:[],source:c};for(var k=0;k<g.length;k++){var f=g[k];c=Td.replaceNode(f.target,f.replacementFunc,c)}return c}function XD(g,c,k,f){f="object"===typeof g?g:null;g="string"===typeof g?g:f.source||Td._node2string(f);return Td.replaceNode(c,k,g)}function DV(g,c){c=void 0===c?[]:c;c.push.apply(c,$jscomp.arrayFromIterable(g.varDecls));g=$jscomp.makeIterator(g.subScopes);for(var k=g.next();!k.done;k=g.next())DV(k.value,
c);return c}function YD(g){var c="object"===typeof g?g:Td.parse(g);g="string"===typeof g?g:c.source||Td._node2string(c);c=Td.scopes(c);var k=Td.__findVarDecls(c);c=[];k=$jscomp.makeIterator(k);for(var f=k.next();!f.done;f=k.next())c.push({target:f.value,replacementFunc:function(l,p,b){b&&(l=Td.parse(p).body[0]);return l.declarations.map(function(d){return{type:"VariableDeclaration",kind:"var",declarations:[d]}})}});return Td.replaceNodes(c,g)}function ZD(g){var c="object"===typeof g?g:Td.parse(g);
g="string"===typeof g?g:c.source||Td._node2string(c);c=Td.scopes(c);var k=Td.__findVarDecls(c);c=[];k=$jscomp.makeIterator(k);for(var f=k.next();!f.done;f=k.next())c.push({target:f.value,replacementFunc:function(l,p,b){b&&(l=Td.parse(p).body[0]);p=[];l=$jscomp.makeIterator(l.declarations);for(b=l.next();!b.done;b=l.next()){var d=b.value;b={type:"Identifier",name:"__temp"};p.push({type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:b,init:d.init}]});d=$jscomp.makeIterator(Td.helpers.objPropertiesAsList(d.id,
[],!1));for(var h=d.next();!h.done;h=d.next())h=h.value.key,p.push(Td.varDecl(h[h.length-2],Td.memberChain.apply(Td,[b.name].concat($jscomp.arrayFromIterable(h))),"var"))}return p}});return Td.replaceNodes(c,g)}function $D(g,c){c=c||{};var k=Td.parse(g,c),f=Td.arr.last(k.body);if("ExpressionStatement"!==f.type)return c.asAST?k:g;k.body.splice(k.body.length-1,1,Td.returnStmt(f.expression));return c.asAST?k:Td.stringify(k)}function aE(g,c){c=c||{};g=Td.returnLastStatement(g,c);return c.asAST?Td.program(Td.funcExpr.apply(Td,
[{id:c.id||void 0},[]].concat($jscomp.arrayFromIterable(g.body)))):"function"+(c.id?" "+c.id:"")+"() {\n"+g+"\n}"}function bE(g,c){"string"===typeof g&&(g=Td.parse(g));c=c||{};var k="Program"===g.type,f=c.startFuncNode||Td.id("__start_execution");c=c.endFuncNode||Td.id("__end_execution");var l=Td.topLevelFuncDecls(g),p=g.body,b=[];l.forEach(function(d){var h=d.node;Td.Path(d.path).set(g,Td.exprStmt(h.id));b.push(h)});p.unshift(Td.exprStmt(Td.funcCall(f)));f=Td.arr.last(p);"ExpressionStatement"===
f.type?(p.pop(),p.push(Td.exprStmt(Td.funcCall(c,Td.id("null"),f.expression)))):"VariableDeclaration"===f.type&&"Identifier"===Td.arr.last(f.declarations).id.type?p.push(Td.exprStmt(Td.funcCall(c,Td.id("null"),Td.arr.last(f.declarations).id))):p.push(Td.exprStmt(Td.funcCall(c,Td.id("null"),Td.id("undefined"))));b.push(Td.tryStmt.apply(Td,["err",[Td.exprStmt(Td.funcCall(c,Td.id("err"),Td.id("undefined")))]].concat($jscomp.arrayFromIterable(p))));return k?Td.program.apply(Td,$jscomp.arrayFromIterable(b)):
Td.block.apply(Td,$jscomp.arrayFromIterable(b))}function cE(g){if(!Td.isProbablySingleExpressionRe.test(g)||30<g.split("\n").length)return g;try{var c=Td.fuzzyParse(g);1===c.body.length&&("FunctionDeclaration"===c.body[0].type||"BlockStatement"===c.body[0].type&&"LabeledStatement"===c.body[0].body[0].type)&&(g="("+g.replace(/;\s*$/,"")+")")}catch(k){"undefined"!==typeof $world?$world.logError(k):console.error("Eval preprocess error: %s",k.stack||k)}return g}function dE(g,c){var k=sf.statementOf(g,
c,{asPath:!0}).slice(0,-2);k=sf.Path(k).get(g);return k.comments&&k.comments.length?sf.chain(sf.extractComments(g)).reversed().detect(function(f){return f.followingNode===c}).value():null}function eE(g,c){function k(r){return sf.arr.detect(r.node.body,function(v){return v.start>r.comment.end})}function f(r){return{type:"unknown",comment:r.comment.text}}function l(r){r=sf.Path(r.path.slice(0,-1)).get(e);return{name:r.id?r.id.name:"<error: no name for function>",args:sf.arr.pluck(r.params,"name")}}
function p(r){for(var v=sf.Path(r.path.slice(0,-2)).get(e),y=v.key?v.key.name:"<error: no name for method>",D=r.path.slice(),E="<error: no object found for method>";D.length&&"init"!==sf.arr.last(D);)D.pop();D.length&&(E=sf.Path(D.slice(0,-1).concat(["id","name"])).get(e));if(sf.string.startsWith(E,"<error")){for(D=r.path.slice();D.length&&"right"!==sf.arr.last(D);)D.pop();D.length&&(E=sf.Path(D.slice(0,-1).concat(["left"])).get(e),E=n.slice(E.start,E.end))}sf.string.startsWith(E,"<error")&&(D=r.path.slice(),
(r=(r=sf.Path(D.slice(0,-6)).get(e))&&"CallExpression"===r.type&&r.arguments[0])&&(E=n.slice(r.start,r.end)));return{name:y,args:sf.arr.pluck(v.value.params,"name"),objectName:E}}function b(r){r=sf.Path(r.path.slice(0,-1)).get(e);if("FunctionExpression"!==r.type&&"FunctionDeclaration"!==r.type)return{};var v=sf.statementOf(e,r);if("ExpressionStatement"!==v.type||"AssignmentExpression"!==v.expression.type)return{};var y=n.slice(v.expression.left.object.start,v.expression.left.object.end);return{name:n.slice(v.expression.left.property.start,
v.expression.left.property.end),objectName:y,args:sf.arr.pluck(r.params,"name")}}function d(r){var v=r.path.slice(0,-3);var y=sf.Path(v).get(e);if(y&&"Property"===y.type){var D=sf.arr.pluck(y.value.callee.params,"name");var E=y.key?y.key.name:"<error: no name for method>"}E||(v=r.path.slice(0,-2),(y=sf.Path(v).get(e))&&"Property"===y.type&&(D=sf.arr.pluck(y.value.params,"name"),E=y.key?y.key.name:"<error: no name for method>"));E||(E="<error: no name for method>",D=[],v=r.path);y=sf.arr.clone(v);
for(r="<error: no object found for method>";y.length&&"init"!==sf.arr.last(y);)y.pop();y.length&&(r=sf.Path(y.slice(0,-1).concat(["id","name"])).get(e));if(sf.string.startsWith(r,"<error")){for(y=sf.arr.clone(v);y.length&&"right"!==sf.arr.last(y);)y.pop();y.length&&(r=sf.Path(y.slice(0,-1).concat(["left"])).get(e),r=n.slice(r.start,r.end))}sf.string.startsWith(r,"<error")&&(y=sf.arr.clone(v),(v=(v=sf.Path(y.slice(0,-4)).get(e))&&"CallExpression"===v.type&&v.arguments[0])&&(r=n.slice(v.start,v.end)));
return{name:E,args:D,objectName:r}}function h(r){return r&&"VariableDeclaration"===r.type&&1===r.declarations.length}function a(r){return"AssignmentExpression"!==r.type?!1:"ObjectExpression"===r.right.type?!0:"AssignmentExpression"===r.right.type?a(r.right):!1}var e="string"===typeof g?sf.parse(g,{withComments:!0}):g,n=c||("string"===typeof g?g:sf.stringify(g)),q=sf.arr.sortBy(function(r){var v=[],y=new sf.Visitor;y.accept=sf.fun.wrap(y.accept,function(D,E,I,K){E.comments&&sf.arr.pushAll(v,E.comments.map(function(P){return{path:K,
comment:P,node:E}}));return D(E,I,K)});y.accept(r,v,[]);return v}(e),function(r){return r.comment.start});return q.map(function(r,v){if(sf.arr.equals(r.path.slice(-2),["value","body"]))return sf.obj.merge([r,r.comment,{type:"method",comment:r.comment.text},p(r)]);var y=r.path.slice(-5);sf.arr.removeAt(y,1);if(sf.arr.equals(y,["properties","value","callee","body"]))return sf.obj.merge([r,r.comment,{type:"method",comment:r.comment.text},d(r)]);if((y=sf.Path(r.path.slice(0,-1)).get(e))&&"FunctionDeclaration"===
y.type)return sf.obj.merge([r,r.comment,{type:"function",comment:r.comment.text},l(r)]);if(sf.arr.equals(r.path.slice(-2),["right","body"]))return sf.obj.merge([r,r.comment,{type:"method",comment:r.comment.text},b(r)]);y=k(r);return y?(v=q[v+1])&&v.comment.start<=y.start?sf.obj.merge([r,r.comment,{followingNode:y},f(r)]):h(y)&&("ObjectExpression"===y.declarations[0].init.type||a(y.declarations[0].init))?sf.obj.merge([r,r.comment,{followingNode:y},{type:"object",comment:r.comment.text},{name:y.declarations[0].id.name}]):
h(y)?sf.obj.merge([r,r.comment,{followingNode:y},{type:"var",comment:r.comment.text},{name:y.declarations[0].id.name}]):sf.obj.merge([r,r.comment,{followingNode:y},f(r)]):sf.obj.merge([r,r.comment,{followingNode:y},f(r)])})}function fE(g,c){c=c||tg.obj.merge({hideOneLiners:!1},c);"string"===typeof g&&(g=tg.parse(g,{addSource:!0}));for(var k=[],f=$jscomp.makeIterator("Program"===g.type?g.body:g.body.body),l=f.next();!l.done;l=f.next()){l=l.value;l=tg.unwrapExport(l);var p=tg.functionWrapper(l,c)||
tg.varDefs(l)||tg.funcDef(l)||tg.es6ClassDef(l)||tg.someObjectExpressionCall(l);if(p){if(c.hideOneLiners)if(g.loc)p=tg.arr.filter(p,function(d){return!d.node.loc||d.node.loc.start.line!==d.node.loc.end.line});else if(g.source){l=[];p=$jscomp.makeIterator(p);for(var b=p.next();!b.done;b=p.next())b=b.value,(b.parent&&l.includes(b.parent)||(b.node.source||"").includes("\n"))&&l.push(b);p=l}k.push.apply(k,$jscomp.arrayFromIterable(p))}}return k}function KL(g){return tg.arr.flatmap(g,function(c){return c?
"Identifier"===c.type?[c]:"RestElement"===c.type?[c.argument]:"ObjectPattern"===c.type?KL(tg.arr.pluck(c.properties,"value")):"ArrayPattern"===c.type?KL(c.elements):[]:[]})}function Vw(g){return Ef.isValidIdentifierRe.test(g)}function ks(){return"undefined"!==typeof System?System.global:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof ug.Global?ug.Global:"undefined"!==typeof self?self:function(){return this}()}function gE(g,c){c=String(c).match(/function\s*[a-zA-Z0-9_$]*\s*\(([^\)]*)\)/);
return g+"("+(c&&c[1]||"")+")"}function LL(g){return g===g||g===Array||g===Function||g===String||g===Boolean||g===Date||g===RegExp||g===Number||g===Promise?!0:g instanceof Function&&(void 0!==g.superclass||void 0!==g._superclass)}function hE(g,c){return g.map(function(k){return k[c]})}function iE(g){if(Symbol.keyFor(g))return'Symbol.for("'+Symbol.keyFor(g)+'")';if(ug.knownSymbols.get(g))return ug.knownSymbols.get(g);String(g).match(ug.symMatcher);return String(g)}function Nz(g){if(!g)return String(g);
if(Array.isArray(g))return"["+g.map(Nz).join(",")+"]";if("symbol"===typeof g)return ug.printSymbol(g);try{return String(g)}catch(c){throw Error("Cannot print object: "+c.stack);}}function Oz(g,c){c=void 0===c?{}:c;var k=g.value,f=g.isPromise,l=g.promisedValue,p=g.promiseStatus;return g.isError||k instanceof Error?(c=String(k),(l=k.stack||"")&&k.message!==k.stack&&(l=String(l),0===l.indexOf(c)&&(l=l.slice(c.length)),c+="\n"+l),c):f?(g=ug.string.print(p),c="pending"===p?void 0:Oz({value:l},c),"Promise({status: "+
g+", "+(void 0===k?"":"value: "+c)+"})"):k instanceof Promise?'Promise({status: "unknown"})':c.inspect?ug.printInspectEvalValue(k,c.inspectDepth||2):String(k)}function jE(g,c){var k="";return Promise.resolve().then(function(){var f=c.lastIndexOf(".");0<=f?(k=c.slice(f+1),c=c.slice(0,f)):(k=c,c='(typeof window === "undefined" ? global : window)');return g(c)}).then(function(f){return{evalResult:f,startLetters:k,code:c}})}function kE(g,c,k){g=wh.getObjectForCompletion(g,c).then(function(f){var l=f.evalResult;
f={completions:wh.descriptorsOfObjAndProtoProperties(l&&l.isEvalResult?l.value:l),startLetters:f.startLetters,code:f.code};l&&l.isPromise&&("fulfilled"===l.promiseStatus?f.promiseResolvedCompletions=wh.descriptorsOfObjAndProtoProperties(l.promisedValue):"rejected"===l.promiseStatus&&(f.promiseRejectedCompletions=wh.descriptorsOfObjAndProtoProperties(l.promisedValue)));return f});"function"===typeof k&&g.then(function(f){return k(null,f)}).catch(function(f){return k(f)});return g}function Pz(g,c,k){c||
(c={type:"Identifier",name:"__rec"});k=Object.assign({ignoreUndeclaredExcept:null,includeRefs:null,excludeRefs:k&&k.exclude||[],includeDecls:null,excludeDecls:k&&k.exclude||[],recordDefRanges:!1,es6ExportFuncId:null,es6ImportFuncId:null,captureObj:c,moduleExportFunc:{name:k&&k.es6ExportFuncId||"_moduleExport",type:"Identifier"},moduleImportFunc:{name:k&&k.es6ImportFuncId||"_moduleImport",type:"Identifier"},declarationWrapper:void 0,classTransform:function(l){return l}},k);c=kc.removeJspmGlobalRef(g,
k);if(k.ignoreUndeclaredExcept){var f=kc.topLevelDeclsAndRefs(g);k.excludeRefs=kc.arr.withoutAll(f.undeclaredNames,k.ignoreUndeclaredExcept).concat(k.excludeRefs);k.excludeDecls=kc.arr.withoutAll(f.undeclaredNames,k.ignoreUndeclaredExcept).concat(k.excludeDecls)}k.excludeRefs=k.excludeRefs.concat(k.captureObj.name);k.excludeDecls=k.excludeDecls.concat(k.captureObj.name);k.recordDefRanges&&kc.computeDefRanges(c,k);k.excludeRefs=k.excludeRefs.concat(kc.additionalIgnoredRefs(g,k));k.excludeDecls=k.excludeDecls.concat(kc.additionalIgnoredDecls(g,
k));c=kc.fixDefaultAsyncFunctionExportForRegeneratorBug(c,k);k.es6ExportFuncId&&(k.excludeRefs.push(k.es6ExportFuncId),k.excludeRefs.push(k.es6ImportFuncId),c=kc.es6ModuleTransforms(c,k));c=kc.replaceRefs(c,k);c=kc.replaceVarDecls(c,k);c=kc.clearEmptyExports(c,k);c=kc.replaceClassDecls(c,k);c=kc.splitExportDeclarations(c,k);c=kc.insertCapturesForExportDeclarations(c,k);c=kc.insertCapturesForImportDeclarations(c,k);c=kc.insertDeclarationsForExports(c,k);c=kc.putFunctionDeclsInFront(c,k);return c=kc.transformImportMeta(c,
k)}function lE(g,c,k){k=Object.assign({captureObj:c||{type:"Identifier",name:"__rec"},exclude:[],declarationWrapper:void 0},k);c=kc.Path("body.0.expression").get(g);if("System"!==c.callee.object.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+kc.stringify(g).slice(0,300)+"...");if("register"!==c.callee.property.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+kc.stringify(g).slice(0,
300)+"...");c=kc.Path("arguments.1.body.body").get(c);var f=kc.arr.last(c);if("ReturnStatement"!==f.type)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at return statement: "+kc.stringify(g).slice(0,300)+"...");var l=f.argument.properties.find(function(p){return"setters"===p.key.name});if(!l)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding setters: "+kc.stringify(g).slice(0,300)+
"...");f=f.argument.properties.find(function(p){return"execute"===p.key.name});if(!f)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding execute: "+kc.stringify(g).slice(0,300)+"...");l.value.elements.forEach(function(p){p.params[0]=kc.assign(p.params[0],kc.nodes.objectLiteral({}));p.body.body=p.body.body.map(function(b){if("ExpressionStatement"!==b.type||"AssignmentExpression"!==b.expression.type||"Identifier"!==b.expression.left.type||
kc.arr.include(k.exclude,b.expression.left.name))return b;var d=b.expression.left;b=k.declarationWrapper?kc.declarationWrapperCall(k.declarationWrapper,null,kc.literal(d.name),kc.literal("var"),b.expression,k.captureObj,k):b.expression;return kc.exprStmt(kc.assign(kc.member(k.captureObj,d),b))})});(l=f.value.body.body.find(function(p){return"ExpressionStatement"===p.type&&"AssignmentExpression"==p.expression.type&&p.expression.left.name===k.captureObj.name}))||(l=f.value.body.body.find(function(p){return"VariableDeclaration"===
p.type&&p.declarations[0].id&&p.declarations[0].id.name===k.captureObj.name}));l&&(kc.arr.remove(f.value.body.body,l),kc.arr.pushAt(c,l,c.length-1));k.sourceAccessorName&&((l=f.value.body.body.find(function(p){return"ExpressionStatement"===p.type&&"AssignmentExpression"==p.expression.type&&p.expression.left.name===k.sourceAccessorName}))||(l=f.value.body.body.find(function(p){return"VariableDeclaration"===p.type&&p.declarations[0].id&&p.declarations[0].id.name===k.sourceAccessorName})),l&&(kc.arr.remove(f.value.body.body,
l),kc.arr.pushAt(c,l,c.length-1)));return g}function Qz(g,c){var k=kc.stringify(c.captureObj),f=0;g.body=g.body.reduce(function(l,p){var b=[p],d="",h=!1;if("ExportNamedDeclaration"===p.type){if(p.source){var a=p.specifiers.map(function(e){return[e.local.name,e.exported.name]});d="import { "+a.map(function(e){var n=$jscomp.makeIterator(e);e=n.next().value;n=n.next().value;return e===n?n:e+" as "+n}).join(",")+" } from "+p.source.raw+";\n";h="export { "+a.map(function(e){e=$jscomp.makeIterator(e);e.next();
return e.next().value}).join(",")+" };\n"}else p.declaration?(a=p.declaration.declarations||[],a=a.map(function(e){return[e.id.name,e.id.name]})):a=p.specifiers.map(function(e){return[e.exported.name,e.local.name]});h&&(b=[],d+=h);b=b.concat(kc.parse(d+a.map(function(e){var n=$jscomp.makeIterator(e);e=n.next().value;n=n.next().value;return k+"."+e+" = "+n+";\n"+(k+"."+n+" = "+n+";\n")}).join("\n")))}"ExportAllDeclaration"===p.type&&(f++,b=b.concat(kc.parse("\n       import * as __captured"+f+"__ from "+
p.source.raw+";\n       Object.assign("+k+", __captured"+f+"__);\n      ")));return l.concat(b)},[]);return g}function ML(g){(this||hu).__wrapped__=g;(this||hu).__actions__=[];(this||hu).__dir__=1;(this||hu).__filtered__=!1;(this||hu).__iteratees__=[];(this||hu).__takeCount__=4294967295;(this||hu).__views__=[]}function NL(g,c){(this||Rz).__wrapped__=g;(this||Rz).__actions__=[];(this||Rz).__chain__=!!c;(this||Rz).__index__=0;(this||Rz).__values__=void 0}function OL(g){if(Fda(g)&&!Gda(g)&&!(g instanceof
Hda)){if(g instanceof EV)return g;if(Ida.call(g,"__wrapped__"))return Jda(g)}return new EV(g)}function FV(g,c,k,f,l,p,b,d,h,a){function e(){for(var E=arguments.length,I=Array(E),K=E;K--;)I[K]=arguments[K];if(v)var P=Kda(e),N=Lda(I,P);f&&(I=Mda(I,f,l,v));p&&(I=Nda(I,p,b,v));E-=N;if(v&&E<a)return K=Oda(I,P),Pda(g,c,FV,e.placeholder,k,I,K,d,h,a-E);K=q?k:this||mE;P=r?K[g]:g;E=I.length;d?I=Qda(I,d):y&&1<E&&I.reverse();n&&h<E&&(I.length=h);(this||mE)&&(this||mE)!==Rda&&(this||mE)instanceof e&&(P=D||GV(P));
return P.apply(K,I)}var n=c&128,q=c&1,r=c&2,v=c&24,y=c&512,D=r?void 0:GV(g);return e}function nE(g){return g&&g.__esModule?g:{default:g}}function HV(g){if(Array.isArray(g)){for(var c=0,k=Array(g.length);c<g.length;c++)k[c]=g[c];return k}return Array.from(g)}function Ww(g,c){c=void 0===c?"__lvVarRecorder":c;jh.ensureJSXPlugin();"function"===typeof g&&(g=String(g));if(lively.FreezerRuntime)return g.split(c+".").join("");"string"===typeof g&&g.endsWith(";")&&(g=g.slice(0,-1));g="string"===typeof g?jh.parseFunction(g):
g;g=jh.ReplaceVisitor.run(g,function(k){return"MemberExpression"===k.type&&"Identifier"===k.object.type&&k.object.name===c?k.property:k});return jh.stringify(g)}function Xw(g){if("undefined"===typeof jh.babel)return console.warn("[lively.freezer] Skipped async/await transpilation because babel not loaded."),g;jh.ensureJSXPlugin();jh.ensureOptionalCatchBinding();jh.ensureImportMeta();g=jh.babel.transform(g,{sourceMap:void 0,inputSourceMap:void 0,babelrc:!1,presets:[["es2015",{modules:!1}]],plugins:["transform-exponentiation-operator",
"transform-async-to-generator","syntax-object-rest-spread","transform-object-rest-spread"],code:!0,ast:!1}).code;g=g.replace(/\}\)\.call\(undefined\);$/,"}).call(this)");g.startsWith("(function")&&g.endsWith(");")&&(g=g.slice(1,-2));return g}function ls(g,c){g=Sf.transform.transformSingleExpression(g);g=Sf.parse(g,{withComments:!0});c=Sf.processInlineCodeTransformOptions(g,c);var k=Sf.query.topLevelDeclsAndRefs(g),f=k.classDecls,l=k.funcDecls;k=k.varDecls;var p={};c.hasOwnProperty("evalId")&&(p.evalId=
c.evalId);c.sourceAccessorName&&(p.sourceAccessorName=c.sourceAccessorName);[].concat($jscomp.arrayFromIterable(f),$jscomp.arrayFromIterable(l)).forEach(function(h){return h["x-lively-object-meta"]=Object.assign({},p,{start:h.start,end:h.end})});k.forEach(function(h){return h.declarations.forEach(function(a){return a["x-lively-object-meta"]=Object.assign({},p,{start:a.start,end:a.end})})});g=Sf.transform.objectSpreadTransform(g);!c.topLevelVarRecorder&&c.topLevelVarRecorderName&&(f=Sf.getGlobal(),
c.topLevelVarRecorder="GLOBAL"===c.topLevelVarRecorderName?Sf.getGlobal():Sf.Path(c.topLevelVarRecorderName).get(f));if(c.topLevelVarRecorder){f=(c.dontTransform||[]).concat(["arguments"]);l=c.recordGlobals?null:Sf.arr.withoutAll(Object.keys(c.topLevelVarRecorder),f);k=Sf.id(c.varRecorderName||"__lvVarRecorder");if(c.declarationWrapperName||"function"===typeof c.declarationCallback){var b=c.declarationWrapperName||Sf.defaultDeclarationWrapperName;c.declarationWrapper=Sf.member(Sf.id(c.varRecorderName||
"__lvVarRecorder"),Sf.literal(b),!0);c.declarationCallback&&(c.topLevelVarRecorder[b]=c.declarationCallback)}if(c.hasOwnProperty("transformES6Classes")?c.transformES6Classes:1)var d={currentModuleAccessor:c.currentModuleAccessor,classHolder:k,functionNode:Sf.member(k,Sf.defaultClassToFunctionConverterName),declarationWrapper:c.declarationWrapper,evalId:c.evalId,sourceAccessorName:c.sourceAccessorName,transform:c.classTransform};g=Sf.capturing.rewriteToCaptureTopLevelVariables(g,k,{es6ImportFuncId:c.es6ImportFuncId,
es6ExportFuncId:c.es6ExportFuncId,ignoreUndeclaredExcept:l,exclude:f,declarationWrapper:c.declarationWrapper||void 0,classToFunction:d,evalId:c.evalId,sourceAccessorName:c.sourceAccessorName,keepTopLevelVarDecls:c.keepTopLevelVarDecls})}c.wrapInStartEndCall&&(g=Sf.transform.wrapInStartEndCall(g,{startFuncNode:c.startFuncNode,endFuncNode:c.endFuncNode}));d=Sf.stringify(g);c.jsx&&(d=Sf.es5Transpilation(d));c.sourceURL&&(d+="\n//# sourceURL="+c.sourceURL.replace(/\s/g,"_"));return d}function iu(g,c){c=
void 0===c?{}:c;if(!c.topLevelVarRecorder)return g;if("function"===typeof c.declarationCallback||c.declarationWrapperName){var k=c.declarationWrapperName||Sf.defaultDeclarationWrapperName;c.declarationWrapper=Sf.member(Sf.id(c.varRecorderName),Sf.literal(k),!0);c.declarationCallback&&(c.topLevelVarRecorder[k]=c.declarationCallback)}g=Sf.parse(g);k=(c.dontTransform||[]).concat(["arguments"]);c.recordGlobals||Sf.arr.withoutAll(Object.keys(c.topLevelVarRecorder),k);c=Sf.capturing.rewriteToRegisterModuleToCaptureSetters(g,
Sf.id(c.varRecorderName||"__lvVarRecorder"),Object.assign({exclude:k},c));return Sf.stringify(c)}function Sz(g,c,k){"function"===typeof c&&2===arguments.length&&(k=c,c=null);var f=new kg.EvalResult,l=!1,p=!1;c=kg._normalizeEvalOptions(c);var b=kg.promise.deferred(),d=c.topLevelVarRecorder||kg.getGlobal(),h=g;c.wrapInStartEndCall&&(d[kg.startEvalFunctionName]&&console.warn(f.addWarning("startEvalFunctionName "+kg.startEvalFunctionName+" already exists in recorder!")),d[kg.endEvalFunctionName]&&console.warn(f.addWarning("endEvalFunctionName "+
kg.endEvalFunctionName+" already exists in recorder!")),d[kg.startEvalFunctionName]=function(){if(l)console.warn(f.addWarning("onEvalStartCalled multiple times!"));else if(l=!0,"function"===typeof c.onStartEval)c.onStartEval()},d[kg.endEvalFunctionName]=function(n,q){p?console.warn(f.addWarning("onEvalEndCalled multiple times!")):(p=!0,kg.finishEval(n,q,f,c,d,b,k))});try{g=kg.evalCodeTransform(g,c),c.header&&(g=c.header+g),c.footer&&(g+=c.footer),c.transpiler&&(g=c.transpiler(g,c.transpilerOptions))}catch(n){console.warn(f.addWarning("lively.vm evalCodeTransform not working: "+
n))}try{"undefined"!==typeof $world&&$world.get("log")&&($world.get("log").textString=g);var a=kg._eval.call(c.context,g,c.topLevelVarRecorder,c.originalSource||h)}catch(n){var e=n}if(c.wrapInStartEndCall){if(e&&!p)d[kg.endEvalFunctionName](e,void 0)}else kg.finishEval(e,e||a,f,c,d,b,k);return c.sync?f:b.promise}function oE(g,c){c=Object.assign(c||{},{sync:!0});return kg.runEval(g,c)}function pE(g){if(void 0===g){if("undefined"===typeof System)return null;g=System}var c=g.get("@lively-env");c||g.set("@lively-env",
g.newModule({options:{}}));c=c.options;if(!c)throw Error("@lively-env registered read-only");c.emitter||Object.assign(c,{emitter:g["__lively.notifications_emitter"]||(g["__lively.notifications_emitter"]=Yw({},{maxListenerLimit:1E4})),notifications:g["__lively.notifications_notifications"]||(g["__lively.notifications_notifications"]=[])});return{emitter:c.emitter,notifications:c.notifications}}function Tz(g,c,k){pE(k).emitter.on(g,c);return c}function Rq(g,c,k,f){c=void 0===c?{}:c;k=void 0===k?Date.now():
k;c=Object.assign({type:g,time:k},c);k=pE(f);f=k.emitter;k=k.notifications;f.emit(g,c);f.isLogging&&(g=c.type+" ".repeat(Math.max(0,32-c.type.length)),console.log(g+" "+G(c,{maxDepth:2})));f.isRecording&&(k.push(c),k.limit&&k.splice(0,k.length-k.limit));return c}function PL(g,c,k){pE(k).emitter.removeListener(g,c);return c}function ju(g,c,k){k=Object.assign({targetModule:null,parentModule:null,es6Transpile:!0,transpiler:null,transpilerOptions:null,format:"esm"},k);g.debug&&console.log("[lively.module] runEval: "+
c.slice(0,100).replace(/\n/mg," ")+"...");var f=k,l=f.format,p=f.targetModule;p=g.decanonicalize(p||"*scratch*",f.parentModule);k.targetModule=p;l&&((f=g.getConfig().meta[p])||(f={}),f[p]||(f[p]={}),f[p].format||(f[p].format=l,g.config(f)));l=g.get("@lively-env").moduleEnv(p);f=l.recorder;var b=l.recorderName,d=l.dontTransform,h=gh.getEs6Transpiler(g,k,l),a="var _moduleExport = "+b+"._moduleExport,\n    _moduleImport = "+(b+"._moduleImport;\n");k=Object.assign({waitForPromise:!0,sync:!1,evalId:k.evalId||
l.nextEvalId(),sourceAccessorName:(k.hasOwnProperty("embedOriginalCode")?k.embedOriginalCode:1)?"__lvOriginalCode":void 0,originalSource:c},k,{header:a,recordGlobals:!0,dontTransform:d,varRecorderName:b,topLevelVarRecorder:f,sourceURL:k.sourceURL||k.targetModule,context:k.context||f,wrapInStartEndCall:!0,es6ExportFuncId:"_moduleExport",es6ImportFuncId:"_moduleImport",transpiler:h,declarationWrapperName:l.varDefinitionCallbackName,currentModuleAccessor:gh.funcCall(gh.member(gh.funcCall(gh.member(gh.member("__lvVarRecorder",
"System"),"get"),gh.literal("@lively-env")),"moduleEnv"),gh.literal(k.targetModule))});if(!k.sync&&!k.importsEnsured&&gh.hasUnimportedImports(g,c,p))return gh.ensureImportsAreImported(g,c,p).catch(function(e){return null}).then(function(e){return ju(g,e,Object.assign({},k,{importsEnsured:!0}))});if(!l.record()){if(!k.sync&&!k._moduleImported)return g.import(p).catch(function(e){return null}).then(function(){return ju(g,c,Object.assign({},k,{_moduleImported:!0}))});l.ensureRecord()}if(k.es6Transpile&&
k.transpiler instanceof Promise)if(k.sync||k._transpilerLoaded)console.warn("[lively.vm] sync eval requested but transpiler is not yet loaded, will continue without transpilation!"),k.transpiler=null;else return k.transpiler.catch(function(e){return console.error(e)}).then(function(e){return ju(g,c,Object.assign({},k,{transpiler:e,_transpilerLoaded:!0}))});g.debug&&console.log("[lively.module] runEval in module "+p+" started");gh.emit("lively.vm/doitrequest",{code:c,waitForPromise:k.waitForPromise,
targetModule:k.targetModule},Date.now(),g);g.get("@lively-env").evaluationStart(p);p=gh.vmRunEval(c,k);return k.sync?gh.evalEnd(g,c,k,p):Promise.resolve(p).then(function(e){return gh.evalEnd(g,c,k,e)})}function Zw(g,c){var k=c=Object.assign({format:"esm",System:null,targetModule:null},c),f=k.format,l=k.System;k=k.targetModule;l||"undefined"===typeof System||(l=System);return!l&&k?Promise.reject(Error("options to runEval have targetModule but cannot find system loader!")):k&&["esm","es6","register"].includes(f)?
yj.esmEval.runEval(l,g,c):yj.globalEval.runEval(g,c)}function Uz(g,c){return yj.globalEval.syncEval(g,c)}function QL(g){return Me.withSuperclasses(g).slice(1)}function qE(g){var c=[];do c.push(g),g=g[Me.superclassSymbol];while(g&&g.name);return c.map(function(k){return k.name}).join("->")}function rE(g){for(var c=[];g;)c.push(g),g=g[Me.superclassSymbol];return c}function RL(g,c){do if(g===c)return!0;while(g=g[Me.superclassSymbol]);return!1}function SL(g,c){if(g.constructor===c&&g.__proto__===c.prototype)return g;
g.constructor=c;g.__proto__=c.prototype;return g}function TL(g){return g&&"function"===typeof g}function UL(g){var c=Me.RuntimeSourceDescriptor.for(g),k=c.ast;c=c.type;if("ClassDeclaration"!==c)throw Error("Expected class but got "+c);return Me.Path("body.body").get(k).map(function(f){var l=f.static,p=f.kind;f=f.key;var b=f.value;f=f.name||b;b=Me.isOverridden(g,f);var d=l?g:g.prototype;d="get"===p?d.__lookupGetter__(f):"set"===p?d.__lookupSetter__(f):d[f];return{static:l,name:f,value:d,kind:p,owner:g,
overridden:b}})}function VL(g){return Me.runtimeNonStaticMembers(g).concat(Me.runtimeNonStaticMembers(g))}function WL(g){var c=Me.obj.getOwnPropertyDescriptors(g);return Me.arr.withoutAll(Object.keys(c),["prototype","name","length","toString"]).map(function(k){var f=c[k],l="function"===typeof f.value?"method":"get"in f?"get":"set"in f?"set":"unknown";return{static:!0,name:k,value:"method"===l?f.value:"get"===l?f.get:"set"===l?f.set:null,kind:l,owner:g}})}function XL(g){return Me.arr.uniq(Me.arr.flatmap(Me.arr.without(Me.withSuperclasses(g),
Object),function(c){return Me.runtimeStaticClassMembers(c)}))}function sE(g){var c=Rh.propertiesAndSettingsInHierarchyOf(g),k=c.properties;c=c.propertySettings;g[Rh.propertiesAndSettingsCacheSym]={properties:k,order:Rh.obj.sortKeysWithBeforeAndAfterConstraints(k),propertySettings:c,classHierarchy:Rh.getClassHierarchy(g)};k&&"object"===typeof k?Rh.prepareClassForProperties(g,c,k):console.warn("Class "+g.name+" indicates it has managed properties but its properties accessor ("+(Rh.defaultPropertiesKey+
") does not return a valid property descriptor map"))}function $w(g,c){c!==g.constructor&&(g.constructor=c,tf.setPrototypeOf(g,c.prototype))}function tE(g,c){c=c?"function"===typeof c?c:c.value?c.value:Object:Object;var k=g&&g[tf.superclassSymbol];k&&k===c||(tf.ensureInitializeStub(c),g[tf.superclassSymbol]=c,tf.setPrototypeOf(g.prototype,c.prototype),c!==Object&&tf.setPrototypeOf(g,c));return c}function ac(g,c,k,f,l,p,b){k=void 0===k?[]:k;f=void 0===f?[]:f;l=void 0===l?{}:l;var d=g.name,h=d&&l.hasOwnProperty(d)&&
l[d];l=h&&h[tf.superclassSymbol];h&&"function"===typeof h&&l||(h=g);tf.setSuperclass(h,c);tf.installMethods(h,k,f);h[tf.objMetaSymbol]=b;p&&(g=p.package(),b=h[tf.moduleMetaSymbol],l=Date.now(),h[tf.moduleMetaSymbol]={package:g?{name:g.name,version:g.version}:{},pathInPackage:g?p.pathInPackage():p.id,lastChange:b&&b.lastChange&&l<=b.lastChange?b.lastChange+1:l,lastSuperclassChange:0},c&&c.referencedAs&&(h.hasOwnProperty(tf.moduleSubscribeToToplevelChangesSym)&&p.unsubscribeFromToplevelDefinitionChanges(h[tf.moduleSubscribeToToplevelChangesSym]),
h[tf.moduleSubscribeToToplevelChangesSym]=p.subscribeToToplevelDefinitionChanges(function(a,e){if(a===c.referencedAs){a=e&&e[tf.moduleMetaSymbol];var n=h[tf.moduleMetaSymbol];if(a){if(a.lastChange===n.lastSuperclassChange)return;n.lastSuperclassChange=a.lastChange}tf.setSuperclass(h,e);tf.installMethods(h,k,f);tf.prepareClassForManagedPropertiesAfterCreation(h)}})));h.toString=function(){var a=String(this.prototype[tf.initializeSymbol]).match(tf.constructorArgMatcher),e=this[tf.superclassSymbol];
return"class "+this.name+" "+(e?"extends "+e.name:"")+" {\n  constructor"+((a?a[0]:"()")+" { /*...*/ }\n}")};tf.prepareClassForManagedPropertiesAfterCreation(h);return h}function uE(g){g=new yd.Color(g);return{red:g.red()/255,green:g.green()/255,blue:g.blue()/255,alpha:g.alpha()}}function YL(g){return function(c,k,f,l){null==f&&(f=g);null==l&&(l=f);null==k&&(k=Eh.unit(c));var p=Eh.unit(c);if(p===k)return c;var b=Eh.unitLess(c);"px"!==Eh.unit(f)&&console.warn("Parameter fromContext must resolve to a value in pixel units.");
"px"!==Eh.unit(l)&&console.warn("Parameter toContext must resolve to a value in pixel units.");if("px"!==p)if("em"===p)b=Eh.unitLess(c)*Eh.unitLess(f);else if("rem"===p)b=Eh.unitLess(c)*Eh.unitLess(g);else if("ex"===p)b=Eh.unitLess(c)*Eh.unitLess(f)*2;else return"ch"===p||"vw"===p||"vh"===p||"vmin"===p?console.warn(p+" units can't be reliably converted; Returning original value."):console.warn(p+" is an unknown or unsupported length unit; Returning original value."),c;f=b;if("px"!==k)if("em"===k)f=
b/Eh.unitLess(l);else if("rem"===k)f=b/Eh.unitLess(g);else if("ex"===k)f=b/Eh.unitLess(l)/2;else return"ch"===k||"vw"===k||"vh"===k||"vmin"===k?console.warn(k+" units can't be reliably converted; Returning original value."):console.warn(k+" is an unknown or unsupported length unit; Returning original value."),c;return parseFloat(f.toFixed(5))+k}}function vE(g){return Number(Eh.parseCssLength(g,"px").slice(0,-2))}function cl(g,c,k,f){if("number"===typeof g){var l=g;g=c;c=f}else l=g.x,g=g.y,k=c.x-l,
c=c.y-g;return new Hd.Rectangle(l,g,k,c)}function xh(g,c){return new Hd.Point(g,c)}function Io(g){return g.constructor[oi.classNameProp]||g.constructor.name}function ms(g){if(g&&g.constructor){var c=oi.getClassName(g);if(c){if(g=g.constructor[oi.moduleMetaInClassProp],"Object"!==c||g)return g&&(delete g.lastChange,delete g.lastSuperclassChange),{className:c,module:g}}else console.warn("Cannot serialize class info of anonymous class of instance "+g)}}function Gp(g){var c=g.module;if(c){var k=c.pathInPackage;
if(c.package&&c.package.name&&"no group"!==c.package.name){var f=System.decanonicalize(c.package.name.replace(/\/*$/,"/"));k=oi.string.joinPath(f,k)}f=System.get("@lively-env");if(c=f.moduleEnv(k)||f.moduleEnv(c.pathInPackage))return c.recorder[g.className];console.warn("Trying to deserialize instance of class "+g.className+" but the module "+k+" is not yet loaded")}return System.global[g.className]}function Jo(g,c,k){c=void 0===c?function(a){return a}:c;k=void 0===k?{}:k;var f=new qh.ExpressionSerializer,
l=k,p=k.isMorph?k.propertiesAndPropertySettings().order:[];p=p.length?p:qh.obj.keys(g);for(var b=$jscomp.makeIterator(p),d=b.next();!d.done;d=b.next()){d=d.value;var h=g[d];if("_env"===d||"env"===d||"__connections__"===d||"__refs__"===d)return;qh.obj.isString(h)&&f.isSerializedExpression(h)&&(h=f.deserializeExpr(h));["borderColor","borderWidth","borderStyle","borderRadius"].includes(d)&&(h=Jo(h,c));h&&h._id&&(h=c(Jo(h,c)));l[d]=h}g.submorphs&&(l.submorphs=g.submorphs.map(function(a){return Jo(a,c)}));
if(k)for(f=$jscomp.makeIterator(p.filter(function(a){return!!g[a]})),d=f.next();!d.done;d=f.next())p=d.value,k[p]=l[p];if(g.__refs__)for(k=$jscomp.makeIterator(g.__refs__),f=k.next();!f.done;f=k.next())p=$jscomp.makeIterator(f.value),f=p.next().value,p=p.next().value,qh.Path(f).set(l,qh.Path(p).get(l));if(g.__connections__)for(k=$jscomp.makeIterator(g.__connections__),f=k.next();!f.done;f=k.next())f=f.value,qh.connect(qh.Path(f.pathToSource).get(l),f.sourceAttrName,qh.Path(f.pathToTarget).get(l),
f.targetMethodName,Object.assign({},qh.obj.select(f,["garbageCollect","converterString","updaterString","varMapping"])));return l}function an(g,c){var k=c=void 0===c?{}:c,f=void 0===k.keepFunctions?!0:k.keepFunctions,l=void 0===k.skipAttributes?[]:k.skipAttributes,p=void 0===k.keepConnections?!0:k.keepConnections,b=void 0===k.asExpression?!1:k.asExpression;c=void 0===k.root?!0:k.root;var d=void 0===k.path?"":k.path,h=void 0===k.skipUnchangedFromDefault?!1:k.skipUnchangedFromDefault,a=void 0===k.nestedExpressions?
{}:k.nestedExpressions,e=void 0===k.objToPath?new WeakMap:k.objToPath,n=void 0===k.objRefs?[]:k.objRefs;k=void 0===k.connections?[]:k.connections;var q={skipAttributes:l,skipUnchangedFromDefault:h,root:!1,keepFunctions:f,asExpression:b,nestedExpressions:a,connections:k,objRefs:n,objToPath:e,keepConnections:p};if(e.has(g))return n.push([d,e.get(g)]),null;e.set(g,d);b&&(f=!1);var r=new qh.ExpressionSerializer,v=function(B,A){try{if(A=A.__serialize__(),b){var H=qh.string.newUUID();a[H]=A;A=H}else A=
A.__expr__?r.exprStringEncode(A):A}catch(F){console.log("[export to JSON] failed converting "+B+" to serialized expression")}return A},y={};e.set(g,d);p&&g.attributeConnections&&k.push.apply(k,$jscomp.arrayFromIterable(g.attributeConnections));g.isText&&(y.textAndAttributes=g.textAndAttributes.map(function(B,A){return B&&B.isMorph?an(B,Object.assign({},q,{path:d?d+".textAndAttributes."+A:"textAndAttributes."+A})):B}));g.submorphs&&0<g.submorphs.length&&(y.submorphs=g.submorphs.map(function(B,A){return an(B,
Object.assign({},q,{path:d?d+".submorphs."+A:"submorphs."+A}))}).filter(Boolean));var D={};for(m in g.spec(h)){D.$jscomp$loop$prop$name$2765=m;h=g[D.$jscomp$loop$prop$name$2765];!h||"object"!==typeof h||Array.isArray(h)||h.isMorph||e.set(h,d?d+"."+D.$jscomp$loop$prop$name$2765:D.$jscomp$loop$prop$name$2765);if("submorphs"!==D.$jscomp$loop$prop$name$2765&&!l.includes(D.$jscomp$loop$prop$name$2765))if("metadata"===D.$jscomp$loop$prop$name$2765&&qh.Path("commit.__serialize__").get(h))y[D.$jscomp$loop$prop$name$2765]=
Object.assign({},h,{commit:v(D.$jscomp$loop$prop$name$2765+".commit",h.commit)});else if(["borderColor","borderWidth","borderStyle","borderRadius"].includes(D.$jscomp$loop$prop$name$2765)){for(var E={},I=$jscomp.makeIterator(["top","left","right","bottom"]),K=I.next();!K.done;K=I.next()){K=K.value;var P=h[K];if(P&&P.__serialize__&&(P=P.__serialize__())&&P.__expr__)if(b){var N=qh.string.newUUID();a[N]=P;P=N}else P=r.exprStringEncode(P);E[K]=P}y[D.$jscomp$loop$prop$name$2765]=E}else if(h&&h.isMorph)y[D.$jscomp$loop$prop$name$2765]=
an(h,Object.assign({},q,{path:d?d+"."+D.$jscomp$loop$prop$name$2765:D.$jscomp$loop$prop$name$2765}));else if(h&&h.__serialize__)y[D.$jscomp$loop$prop$name$2765]=v(D.$jscomp$loop$prop$name$2765,h);else if(Array.isArray(h))y[D.$jscomp$loop$prop$name$2765]=h.map(function(B){return function(A,H){return A&&A.isMorph?an(A,Object.assign({},q,{path:d?d+"."+B.$jscomp$loop$prop$name$2765+"."+H:B.$jscomp$loop$prop$name$2765+"."+H})):A&&A.__serialize__?v(B.$jscomp$loop$prop$name$2765+"."+H,A):A}}(D));else{if(h&&
!qh.obj.isString(h)&&!qh.obj.isNumber(h)&&0<qh.properties.allOwnPropertiesOrFunctions(h).length)for(var aa in h)h[aa]&&h[aa].isMorph&&(h[aa]=an(h[aa],Object.assign({},q,{path:d?d+"."+D.$jscomp$loop$prop$name$2765+"."+aa:D.$jscomp$loop$prop$name$2765+"."+aa})));y[D.$jscomp$loop$prop$name$2765]=h}D={$jscomp$loop$prop$name$2765:D.$jscomp$loop$prop$name$2765}}g.isText&&delete y.textString;b||(y._id=g._id);f?(y.type=g.constructor,Object.keys(g).forEach(function(B){return"function"===typeof g[B]&&(y[B]=
g[B])})):(y.styleSheets&&(y.styleSheets=[]),y.type=qh.getSerializableClassMeta(g));if(p&&c){var m=[];aa=$jscomp.makeIterator(k);for(f=aa.next();!f.done;f=aa.next())I=f=f.value,l=I.sourceAttrName,p=I.targetMethodName,E=I.targetObj,k=I.updaterString,D=I.converterString,h=I.garbageCollect,I=e.get(I.sourceObj),E=e.get(E),"string"===typeof I&&"string"===typeof E?m.push({pathToSource:I,pathToTarget:E,garbageCollect:h,updaterString:k,converterString:D,sourceAttrName:l,targetMethodName:p,varMapping:{properties:qh.properties}}):
console.log("skipping:",f);b||(y.__connections__=m)}if(b&&c){c="morph("+qh.obj.inspect(y)+")";var t={"lively.morphic":["morph"]},u;for(u in a)c=c.replace('"'+u+'"',a[u].__expr__),Object.entries(a[u].bindings||{}).forEach(function(B){var A=$jscomp.makeIterator(B);B=A.next().value;A=A.next().value;t[B]=t[B]?qh.arr.uniq([].concat($jscomp.arrayFromIterable(t[B]),$jscomp.arrayFromIterable(A))):A});return{__expr__:c,bindings:t}}c&&(y.__refs__=n);return y}function Ik(g,c,k,f,l){"function"!==typeof k||"undefined"!==
typeof f&&"object"!==typeof f||(l=f,f="call",l||(l={}),l.updater||(l.updater=function(h,a){return h(null,a)}));var p=g.getConnectionPoints&&g.getConnectionPoints()||g.connections,b=(p=p&&p[c])&&p.map&&lively.morphic&&lively.morphic.GeometryConnection||p&&p.connectionClassType&&lively.Class.forName(p.connectionClassType)||gg.AttributeConnection;"function"===typeof l&&(console.warn("Directly passing a converter function to connect() is deprecated! Use spec object instead!"),l={converter:l});p&&(l=gg.obj.merge(p,
l));b=new b(g,c,k,f,l);var d=b.getExistingConnection();if(d)return d.resetSpec(),d.init(g,c,k,f,l),d;l=b.connect();if("function"===typeof g.onConnect)g.onConnect(c,k,f);p&&p.updateOnConnect&&b.update(g[c]);return l}function Hp(g,c,k,f){"function"!==typeof k||"undefined"!==typeof f&&"object"!==typeof f||(f="call");if(g.attributeConnections){for(var l=$jscomp.makeIterator(g.attributeConnections.slice()),p=l.next();!p.done;p=l.next())p=p.value,p.getSourceAttrName()==c&&p.getTargetObj()===k&&p.getTargetMethodName()==
f&&p.disconnect();if("function"===typeof g.onDisconnect)g.onDisconnect(c,k,f)}}function ax(g){for(var c;g.attributeConnections&&(c=g.attributeConnections[0]);)c.disconnect()}function Sq(g,c,k,f,l){"function"!==typeof k||"undefined"!==typeof f&&"object"!==typeof f?l=l||{}:(l=f,f="call",l=l||{},l.updater||(l.updater=function(p,b){return p(null,b)}));l=l||{};l.removeAfterUpdate=!0;return gg.connect(g,c,k,f,l)}function Jk(g,c,k){var f=g.attributeConnections;if(f){g=g[c];for(var l=0,p=f.length;l<p;l++){var b=
f[l];b.getSourceAttrName()==c&&b.update(k,g)}}}function wE(g,c,k,f){if(null!=g[c])k[f](g[c]);else gg.connect(g,c,k,f,{removeAfterUpdate:!0})}function xE(g,c,k,f){for(var l={key:c.pop(),whenDefined:function(p){gg.callWhenNotNull(p,this.key,k,f)}};0<c.length;)l={key:c.pop(),next:l,whenDefined:function(p){gg.callWhenNotNull(p,this.key,this.next,"whenDefined")}};l.whenDefined(g)}function ns(g,c){var k=!1;c||"function"!==typeof g||(c=g,k=!0);if(k){g=gg.AttributeConnection.prototype;g.isActive||(g.isActive=
0);g.isActive++;try{var f=c()}finally{g.isActive--,0>=g.isActive&&delete g.isActive}}else{k=g.sourceObj;var l=g.sourceAttribute,p=g.targetObj,b=g.targetAttribute;g=p&&b?function(d){return d.getSourceAttrName()===l&&p===d.getTargetObj()&&b===d.getTargetMethodName()}:function(d){return d.getSourceAttrName()===l};(g=k.attributeConnections&&k.attributeConnections.filter(g))&&gg.arr.invoke(g,"activate");try{f=c()}finally{g&&gg.arr.invoke(g,"deactivate")}}return f}function yE(g){if(null==g)return!0;g=typeof g;
return"boolean"===g||"number"===g||"string"===g?!0:!1}function ZL(g){var c={},k;for(k in g)c[k]=$e.referencesOfId(g,k);return c}function zE(g){return g&&g.__ref__}function $L(g,c){var k={};return $e.referencesOfId((k[g.id]=g.currentSnapshot,k),g.id,c)}function AE(g,c,k){g=g[c];c=[];for(var f in g.props){var l=g.props[f]||{},p=l.value;l=l.verbatim;Array.isArray(p)?c.push.apply(c,$jscomp.arrayFromIterable($e.referencesInArray(p,k&&f))):!l&&p&&$e.isReference(p)&&c.push(k?{key:f,id:p.id}:p.id)}if(g.hasOwnProperty("entries"))for(f=
0;f<g.entries.length;f++)p=g.entries[f],Array.isArray(p)?c.push.apply(c,$jscomp.arrayFromIterable($e.referencesInArray(p,k&&p))):p&&$e.isReference(p)&&c.push(k?{key:p,id:p.id}:p.id);return c}function IV(g,c){for(var k=[],f=0;f<g.length;f++){var l=g[f];Array.isArray(l)?k.push.apply(k,$jscomp.arrayFromIterable(IV(l,c?c+"["+f+"]":void 0))):l&&$e.isReference(l)&&k.push(c?{key:c+"["+f+"]",id:l.id}:l.id)}return k}function BE(g,c){return(g[c][$e.ClassHelper.classMetaForSerializationProp]||{}).module||{}}
function aM(g,c){return $e.referencesOfId(g,c).map(function(k){return k+":"+$e.classNameOfId(g,k)})}function CE(g,c){return(g[c][$e.ClassHelper.classMetaForSerializationProp]||{}).className||"Object"}function bM(g,c,k,f){function l(v,y,D){if(!e)if(50<D)alert(""+h);else if(v===y)h.push(v),e=h.slice();else if(!a[v]){a[v]=!0;h.push(v);v=$e.referencesOfId(g,v);for(var E=0;E<v.length;E++)l(v[E],y,D+1);h.pop()}}f=void 0===f?{}:f;var p=void 0===f.showPath?!0:f.showPath,b=f.hasOwnProperty("showClassNames")?
f.showClassNames:!p,d=f.hasOwnProperty("showPropNames")?f.showPropNames:p;f=f.hasOwnProperty("hideId")?f.hideId:p;var h=[],a={},e;l(c,k,0);if(!e)return null;if(!b&&!d)return e;c=[];for(k=0;k<e.length-1;k++){var n=e[k],q=e[k+1],r=[];f||r.push(n);b&&r.push((g[n][$e.ClassHelper.classMetaForSerializationProp]||{}).className||"Object");d&&(n=$e.referencesOfId(g,n,!0).find(function(v){return v.id===q})||{key:"????"},r.push(n.key));c.push(r.join(":"))}p&&(c="."+c.join("."));return c}function cM(g,c,k){k=
k.replace(/^\./,"");k=k.replace(/\[([^\]])+\]/g,".$1");k=$e.Path(k).parts();var f=g[c];for(c=0;;){if(1E3<c++)throw"stop";var l=k.shift();if(!l)break;if(!f.props||!f.props[l])throw Error("Property "+l+" not found for ref "+JSON.stringify(f));f=f.props[l].value;if(!f)throw Error("Property "+l+" has no value");for(;Array.isArray(f);)f=f[k.shift()];if(!f||!f.__ref__)return f;f=g[f.id]}return f}function dM(g,c,k,f){k=k.replace(/^\./,"");k=k.replace(/\[([^\]])+\]/g,".$1");k=$e.Path(k).parts();g=g[c];c=
k.shift();if(!g.props||!g.props[c])throw Error("Property "+c+" not found for ref "+JSON.stringify(g));var l=(g.props[c]||{}).value;if(!l)throw Error("Property "+c+" has no value");if(k.length){var p=$e.Path(k).get(l);$e.Path(k).set(l,f(g,c,p))}else g.props[c].value=f(g,c,l)}function Tq(g,c){var k=$e.arr.withoutAll(Object.keys(c),g),f=k.filter(function(p){if("AttributeConnection"===$e.classNameOfId(c,p))return c[p].props.garbageCollect.value}),l=$e.referenceGraph($e.obj.dissoc(Object.assign({},c),
f));g.forEach(function(p){p=$e.graph.subgraphReachableBy(l,p);for(var b=k.length;b--;)k[b]in p&&k.splice(b,1)});k.forEach(function(p){return delete c[p]});return k}function DE(g){var c={},k;for(k in g){c.$jscomp$loop$prop$id$1011$2776=k;if("AttributeConnection"===$e.classNameOfId(g,c.$jscomp$loop$prop$id$1011$2776)){var f=g[c.$jscomp$loop$prop$id$1011$2776];if(!g[$e.Path("props.targetObj.value.id").get(f)]){if(f=g[$e.Path("props.sourceObj.value.id").get(f)])f.props.attributeConnections.value=f.props.attributeConnections.value.filter(function(l){return function(p){return p.id!=
l.$jscomp$loop$prop$id$1011$2776}}(c));delete g[c.$jscomp$loop$prop$id$1011$2776]}}c={$jscomp$loop$prop$id$1011$2776:c.$jscomp$loop$prop$id$1011$2776}}}function Uq(g,c){c=void 0===c?$e.defaultExprSerializer:c;g.snapshot&&(g=g.snapshot);for(var k=[],f=0,l=Object.keys(g);f<l.length;f++){var p=g[l[f]];if(p.__expr__)(p=c.requiredModulesOf__expr__(p.__expr__))&&k.push.apply(k,$jscomp.arrayFromIterable(p));else{var b=$e.ClassHelper.sourceModulesInObjRef(p);b&&b.length&&k.push.apply(k,$jscomp.arrayFromIterable(b.map(function(a){return(a.package&&
a.package.name||"")+"/"+a.pathInPackage})));if(p.props)for(var d in p.props){b=p.props[d].value;if("string"===typeof b){var h=c.requiredModulesOf__expr__(b);h&&k.push.apply(k,$jscomp.arrayFromIterable(h))}$e.obj.isArray(b)&&b.forEach(function(a){"string"===typeof a&&(a=c.requiredModulesOf__expr__(a))&&k.push.apply(k,$jscomp.arrayFromIterable(a))})}}}return k=$e.arr.uniq(k)}function EE(){if(JV)return KV;JV=!0;return KV={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||
9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16}}function FE(){if(LV)return MV;LV=!0;var g=sk;return MV="object"===typeof g&&g.env&&g.env.NODE_DEBUG&&/\bsemver\b/i.test(g.env.NODE_DEBUG)?function(c){for(var k=[],f=0;f<arguments.length;++f)k[f-0]=arguments[f];return console.error.apply(console,["SEMVER"].concat($jscomp.arrayFromIterable(k)))}:function(){}}function bx(){if(NV)return Ip;NV=!0;var g=EE().MAX_SAFE_COMPONENT_LENGTH,c=FE();Ip=Ip={};var k=Ip.re=[],f=Ip.src=[],l=Ip.t={},p=0,b=function(d,h,a){var e=
p++;c(e,h);l[d]=e;f[e]=h;k[e]=new RegExp(h,a?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*");b("NUMERICIDENTIFIERLOOSE","[0-9]+");b("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");b("MAINVERSION","("+f[l.NUMERICIDENTIFIER]+")\\.("+(f[l.NUMERICIDENTIFIER]+")\\.(")+(f[l.NUMERICIDENTIFIER]+")"));b("MAINVERSIONLOOSE","("+f[l.NUMERICIDENTIFIERLOOSE]+")\\.("+(f[l.NUMERICIDENTIFIERLOOSE]+")\\.(")+(f[l.NUMERICIDENTIFIERLOOSE]+")"));b("PRERELEASEIDENTIFIER","(?:"+f[l.NUMERICIDENTIFIER]+"|"+f[l.NONNUMERICIDENTIFIER]+
")");b("PRERELEASEIDENTIFIERLOOSE","(?:"+f[l.NUMERICIDENTIFIERLOOSE]+"|"+f[l.NONNUMERICIDENTIFIER]+")");b("PRERELEASE","(?:-("+f[l.PRERELEASEIDENTIFIER]+"(?:\\."+f[l.PRERELEASEIDENTIFIER]+")*))");b("PRERELEASELOOSE","(?:-?("+f[l.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+f[l.PRERELEASEIDENTIFIERLOOSE]+")*))");b("BUILDIDENTIFIER","[0-9A-Za-z-]+");b("BUILD","(?:\\+("+f[l.BUILDIDENTIFIER]+"(?:\\."+f[l.BUILDIDENTIFIER]+")*))");b("FULLPLAIN","v?"+f[l.MAINVERSION]+f[l.PRERELEASE]+"?"+f[l.BUILD]+"?");b("FULL",
"^"+f[l.FULLPLAIN]+"$");b("LOOSEPLAIN","[v=\\s]*"+f[l.MAINVERSIONLOOSE]+f[l.PRERELEASELOOSE]+"?"+f[l.BUILD]+"?");b("LOOSE","^"+f[l.LOOSEPLAIN]+"$");b("GTLT","((?:<|>)?=?)");b("XRANGEIDENTIFIERLOOSE",f[l.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*");b("XRANGEIDENTIFIER",f[l.NUMERICIDENTIFIER]+"|x|X|\\*");b("XRANGEPLAIN","[v=\\s]*("+f[l.XRANGEIDENTIFIER]+")(?:\\.("+(f[l.XRANGEIDENTIFIER]+")(?:\\.(")+(f[l.XRANGEIDENTIFIER]+")(?:")+(f[l.PRERELEASE]+")?"+f[l.BUILD]+"?)?)?"));b("XRANGEPLAINLOOSE","[v=\\s]*("+f[l.XRANGEIDENTIFIERLOOSE]+
")(?:\\.("+(f[l.XRANGEIDENTIFIERLOOSE]+")(?:\\.(")+(f[l.XRANGEIDENTIFIERLOOSE]+")(?:")+(f[l.PRERELEASELOOSE]+")?"+f[l.BUILD]+"?)?)?"));b("XRANGE","^"+f[l.GTLT]+"\\s*"+f[l.XRANGEPLAIN]+"$");b("XRANGELOOSE","^"+f[l.GTLT]+"\\s*"+f[l.XRANGEPLAINLOOSE]+"$");b("COERCE","(^|[^\\d])(\\d{1,"+g+"})(?:\\.(\\d{1,"+(g+"}))?(?:\\.(\\d{1,")+(g+"}))?(?:$|[^\\d])"));b("COERCERTL",f[l.COERCE],!0);b("LONETILDE","(?:~>?)");b("TILDETRIM","(\\s*)"+f[l.LONETILDE]+"\\s+",!0);Ip.tildeTrimReplace="$1~";b("TILDE","^"+f[l.LONETILDE]+
f[l.XRANGEPLAIN]+"$");b("TILDELOOSE","^"+f[l.LONETILDE]+f[l.XRANGEPLAINLOOSE]+"$");b("LONECARET","(?:\\^)");b("CARETTRIM","(\\s*)"+f[l.LONECARET]+"\\s+",!0);Ip.caretTrimReplace="$1^";b("CARET","^"+f[l.LONECARET]+f[l.XRANGEPLAIN]+"$");b("CARETLOOSE","^"+f[l.LONECARET]+f[l.XRANGEPLAINLOOSE]+"$");b("COMPARATORLOOSE","^"+f[l.GTLT]+"\\s*("+f[l.LOOSEPLAIN]+")$|^$");b("COMPARATOR","^"+f[l.GTLT]+"\\s*("+f[l.FULLPLAIN]+")$|^$");b("COMPARATORTRIM","(\\s*)"+f[l.GTLT]+"\\s*("+f[l.LOOSEPLAIN]+"|"+f[l.XRANGEPLAIN]+
")",!0);Ip.comparatorTrimReplace="$1$2$3";b("HYPHENRANGE","^\\s*("+f[l.XRANGEPLAIN]+")\\s+-\\s+("+(f[l.XRANGEPLAIN]+")\\s*$"));b("HYPHENRANGELOOSE","^\\s*("+f[l.XRANGEPLAINLOOSE]+")\\s+-\\s+("+(f[l.XRANGEPLAINLOOSE]+")\\s*$"));b("STAR","(<|>)?=?\\s*\\*");b("GTE0","^\\s*>=\\s*0.0.0\\s*$");b("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");return Ip}function GE(){if(OV)return PV;OV=!0;var g=["includePrerelease","loose","rtl"];return PV=function(c){return c?"object"!==typeof c?{loose:!0}:g.filter(function(k){return c[k]}).reduce(function(k,
f){k[f]=!0;return k},{}):{}}}function eM(){if(QV)return RV;QV=!0;var g=/^[0-9]+$/,c=function(k,f){var l=g.test(k),p=g.test(f);l&&p&&(k=+k,f=+f);return k===f?0:l&&!p?-1:p&&!l?1:k<f?-1:1};return RV={compareIdentifiers:c,rcompareIdentifiers:function(k,f){return c(f,k)}}}function hm(){if(SV)return TV;SV=!0;var g=FE(),c=EE(),k=c.MAX_LENGTH,f=c.MAX_SAFE_INTEGER;c=bx();var l=c.re,p=c.t,b=GE(),d=eM().compareIdentifiers,h=function(a,e){e=b(e);if(a instanceof h){if(a.loose===!!e.loose&&a.includePrerelease===
!!e.includePrerelease)return a;a=a.version}else if("string"!==typeof a)throw new TypeError("Invalid Version: "+a);if(a.length>k)throw new TypeError("version is longer than "+k+" characters");g("SemVer",a,e);this.options=e;this.loose=!!e.loose;this.includePrerelease=!!e.includePrerelease;e=a.trim().match(e.loose?l[p.LOOSE]:l[p.FULL]);if(!e)throw new TypeError("Invalid Version: "+a);this.raw=a;this.major=+e[1];this.minor=+e[2];this.patch=+e[3];if(this.major>f||0>this.major)throw new TypeError("Invalid major version");
if(this.minor>f||0>this.minor)throw new TypeError("Invalid minor version");if(this.patch>f||0>this.patch)throw new TypeError("Invalid patch version");this.prerelease=e[4]?e[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var q=+n;if(0<=q&&q<f)return q}return n}):[];this.build=e[5]?e[5].split("."):[];this.format()};h.prototype.format=function(){this.version=this.major+"."+this.minor+"."+this.patch;this.prerelease.length&&(this.version+="-"+this.prerelease.join("."));return this.version};h.prototype.toString=
function(){return this.version};h.prototype.compare=function(a){g("SemVer.compare",this.version,this.options,a);if(!(a instanceof h)){if("string"===typeof a&&a===this.version)return 0;a=new h(a,this.options)}return a.version===this.version?0:this.compareMain(a)||this.comparePre(a)};h.prototype.compareMain=function(a){a instanceof h||(a=new h(a,this.options));return d(this.major,a.major)||d(this.minor,a.minor)||d(this.patch,a.patch)};h.prototype.comparePre=function(a){a instanceof h||(a=new h(a,this.options));
if(this.prerelease.length&&!a.prerelease.length)return-1;if(!this.prerelease.length&&a.prerelease.length)return 1;if(!this.prerelease.length&&!a.prerelease.length)return 0;var e=0;do{var n=this.prerelease[e],q=a.prerelease[e];g("prerelease compare",e,n,q);if(void 0===n&&void 0===q)return 0;if(void 0===q)return 1;if(void 0===n)return-1;if(n!==q)return d(n,q)}while(++e)};h.prototype.compareBuild=function(a){a instanceof h||(a=new h(a,this.options));var e=0;do{var n=this.build[e],q=a.build[e];g("prerelease compare",
e,n,q);if(void 0===n&&void 0===q)return 0;if(void 0===q)return 1;if(void 0===n)return-1;if(n!==q)return d(n,q)}while(++e)};h.prototype.inc=function(a,e){switch(a){case "premajor":this.minor=this.patch=this.prerelease.length=0;this.major++;this.inc("pre",e);break;case "preminor":this.patch=this.prerelease.length=0;this.minor++;this.inc("pre",e);break;case "prepatch":this.prerelease.length=0;this.inc("patch",e);this.inc("pre",e);break;case "prerelease":0===this.prerelease.length&&this.inc("patch",e);
this.inc("pre",e);break;case "major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++;this.patch=this.minor=0;this.prerelease=[];break;case "minor":0===this.patch&&0!==this.prerelease.length||this.minor++;this.patch=0;this.prerelease=[];break;case "patch":0===this.prerelease.length&&this.patch++;this.prerelease=[];break;case "pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(a=this.prerelease.length;0<=--a;)"number"===typeof this.prerelease[a]&&(this.prerelease[a]++,
a=-2);-1===a&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw Error("invalid increment argument: "+a);}this.format();this.raw=this.version;return this};return TV=h}function cx(){if(UV)return VV;UV=!0;var g=EE().MAX_LENGTH,c=bx(),k=c.re,f=c.t,l=hm(),p=GE();return VV=function(b,d){d=p(d);if(b instanceof l)return b;if("string"!==typeof b||b.length>g||!(d.loose?k[f.LOOSE]:k[f.FULL]).test(b))return null;try{return new l(b,
d)}catch(h){return null}}}function Sda(){if(WV)return XV;WV=!0;var g=cx();return XV=function(c,k){return(c=g(c,k))?c.version:null}}function Tda(){if(YV)return ZV;YV=!0;var g=hm();return ZV=function(c,k,f,l){"string"===typeof f&&(l=f,f=void 0);try{return(new g(c,f)).inc(k,l).version}catch(p){return null}}}function Ko(){if($V)return aW;$V=!0;var g=hm();return aW=function(c,k,f){return(new g(c,f)).compare(new g(k,f))}}function fM(){if(bW)return cW;bW=!0;var g=Ko();return cW=function(c,k,f){return 0===
g(c,k,f)}}function Uda(){if(dW)return eW;dW=!0;var g=hm();return eW=function(c,k){return(new g(c,k)).major}}function Vda(){if(fW)return gW;fW=!0;var g=cx();return gW=function(c,k){return(c=g(c,k))&&c.prerelease.length?c.prerelease:null}}function Wda(){if(hW)return iW;hW=!0;var g=Ko();return iW=function(c,k,f){return g(k,c,f)}}function gM(){if(jW)return kW;jW=!0;var g=hm();return kW=function(c,k,f){c=new g(c,f);k=new g(k,f);return c.compare(k)||c.compareBuild(k)}}function Xda(){if(lW)return mW;lW=
!0;var g=gM();return mW=function(c,k){return c.sort(function(f,l){return g(l,f,k)})}}function HE(){if(nW)return oW;nW=!0;var g=Ko();return oW=function(c,k,f){return 0<g(c,k,f)}}function hM(){if(pW)return qW;pW=!0;var g=Ko();return qW=function(c,k,f){return 0>g(c,k,f)}}function iM(){if(rW)return sW;rW=!0;var g=Ko();return sW=function(c,k,f){return 0<=g(c,k,f)}}function tW(){if(uW)return vW;uW=!0;var g=Ko();return vW=function(c,k,f){return 0!==g(c,k,f)}}function jM(){if(wW)return xW;wW=!0;var g=Ko();
return xW=function(c,k,f){return 0>=g(c,k,f)}}function yW(){if(zW)return AW;zW=!0;var g=fM(),c=tW(),k=HE(),f=iM(),l=hM(),p=jM();return AW=function(b,d,h,a){switch(d){case "===":return"object"===typeof b&&(b=b.version),"object"===typeof h&&(h=h.version),b===h;case "!==":return"object"===typeof b&&(b=b.version),"object"===typeof h&&(h=h.version),b!==h;case "":case "=":case "==":return g(b,h,a);case "!=":return c(b,h,a);case ">":return k(b,h,a);case ">=":return f(b,h,a);case "<":return l(b,h,a);case "<=":return p(b,
h,a);default:throw new TypeError("Invalid operator: "+d);}}}function Yda(){if(BW)return CW;BW=!0;var g=hm(),c=cx(),k=bx(),f=k.re,l=k.t;return CW=function(p,b){if(p instanceof g)return p;"number"===typeof p&&(p=String(p));if("string"!==typeof p)return null;b=b||{};var d=null;if(b.rtl){for(var h;(h=f[l.COERCERTL].exec(p))&&(!d||d.index+d[0].length!==p.length);)d&&h.index+h[0].length===d.index+d[0].length||(d=h),f[l.COERCERTL].lastIndex=h.index+h[1].length+h[2].length;f[l.COERCERTL].lastIndex=-1}else d=
p.match(f[l.COERCE]);return null===d?null:c(d[2]+"."+(d[3]||"0")+"."+(d[4]||"0"),b)}}function Di(g){var c=this;c instanceof Di||(c=new Di);c.tail=null;c.head=null;c.length=0;if(g&&"function"===typeof g.forEach)g.forEach(function(l){c.push(l)});else if(0<arguments.length)for(var k=0,f=arguments.length;k<f;k++)c.push(arguments[k]);return c}function ku(g,c,k,f){if(!(this instanceof ku))return new ku(g,c,k,f);this.list=f;this.value=g;c?(c.next=this,this.prev=c):this.prev=null;k?(k.prev=this,this.next=
k):this.next=null}function Lo(){if(DW)return kM;DW=!0;var g=function(N,aa){var m=this;aa=k(aa);if(N instanceof g)return N.loose===!!aa.loose&&N.includePrerelease===!!aa.includePrerelease?N:new g(N.raw,aa);if(N instanceof f)return this.raw=N.value,this.set=[[N]],this.format(),this;this.options=aa;this.loose=!!aa.loose;this.includePrerelease=!!aa.includePrerelease;this.raw=N;this.set=N.split(/\s*\|\|\s*/).map(function(t){return m.parseRange(t.trim())}).filter(function(t){return t.length});if(!this.set.length)throw new TypeError("Invalid SemVer Range: "+
N);if(1<this.set.length)if(N=this.set[0],this.set=this.set.filter(function(t){return"<0.0.0-0"!==t[0].value}),0===this.set.length)this.set=[N];else if(1<this.set.length)for(N=$jscomp.makeIterator(this.set),aa=N.next();!aa.done;aa=N.next())if(aa=aa.value,1===aa.length&&""===aa[0].value){this.set=[aa];break}this.format()};g.prototype.format=function(){return this.range=this.set.map(function(N){return N.join(" ").trim()}).join("||").trim()};g.prototype.toString=function(){return this.range};g.prototype.parseRange=
function(N){var aa=this;N=N.trim();var m="parseRange:"+Object.keys(this.options).join(",")+":"+N,t=c.get(m);if(t)return t;t=this.options.loose;N=N.replace(t?d[h.HYPHENRANGELOOSE]:d[h.HYPHENRANGE],P(this.options.includePrerelease));l("hyphen replace",N);N=N.replace(d[h.COMPARATORTRIM],a);l("comparator trim",N,d[h.COMPARATORTRIM]);N=N.replace(d[h.TILDETRIM],e);N=N.replace(d[h.CARETTRIM],n);N=N.split(/\s+/).join(" ");var u=t?d[h.COMPARATORLOOSE]:d[h.COMPARATOR];t=N.split(" ").map(function(A){var H=A;
A=aa.options;l("comp",H,A);H=D(H,A);l("caret",H);H=v(H,A);l("tildes",H);H=I(H,A);l("xrange",H);l("replaceStars",H,A);H=H.trim().replace(d[h.STAR],"");l("stars",H);return H}).join(" ").split(/\s+/).map(function(A){var H=aa.options;l("replaceGTE0",A,H);return A.trim().replace(d[H.includePrerelease?h.GTE0PRE:h.GTE0],"")}).filter(this.options.loose?function(A){return!!A.match(u)}:function(){return!0}).map(function(A){return new f(A,aa.options)});N=new Map;t=$jscomp.makeIterator(t);for(var B=t.next();!B.done;B=
t.next()){B=B.value;if("<0.0.0-0"===B.value)return[B];N.set(B.value,B)}1<N.size&&N.has("")&&N.delete("");N=[].concat($jscomp.arrayFromIterable(N.values()));c.set(m,N);return N};g.prototype.intersects=function(N,aa){if(!(N instanceof g))throw new TypeError("a Range is required");return this.set.some(function(m){return q(m,aa)&&N.set.some(function(t){return q(t,aa)&&m.every(function(u){return t.every(function(B){return u.intersects(B,aa)})})})})};g.prototype.test=function(N){if(!N)return!1;if("string"===
typeof N)try{N=new p(N,this.options)}catch(A){return!1}for(var aa=0;aa<this.set.length;aa++){a:{var m=this.set[aa];for(var t=N,u=this.options,B=0;B<m.length;B++)if(!m[B].test(t)){m=!1;break a}if(t.prerelease.length&&!u.includePrerelease){for(u=0;u<m.length;u++)if(l(m[u].semver),m[u].semver!==f.ANY&&0<m[u].semver.prerelease.length&&(B=m[u].semver,B.major===t.major&&B.minor===t.minor&&B.patch===t.patch)){m=!0;break a}m=!1}else m=!0}if(m)return!0}return!1};kM=g;var c=new Zda({max:1E3}),k=GE(),f=IE(),
l=FE(),p=hm(),b=bx(),d=b.re,h=b.t,a=b.comparatorTrimReplace,e=b.tildeTrimReplace,n=b.caretTrimReplace,q=function(N,aa){var m=!0;N=N.slice();for(var t=N.pop();m&&N.length;)m=N.every(function(u){return t.intersects(u,aa)}),t=N.pop();return m},r=function(N){return!N||"x"===N.toLowerCase()||"*"===N},v=function(N,aa){return N.trim().split(/\s+/).map(function(m){return y(m,aa)}).join(" ")},y=function(N,aa){return N.replace(aa.loose?d[h.TILDELOOSE]:d[h.TILDE],function(m,t,u,B,A){l("tilde",N,m,t,u,B,A);r(t)?
m="":r(u)?m=">="+t+".0.0 <"+(+t+1)+".0.0-0":r(B)?m=">="+t+"."+u+".0 <"+t+"."+(+u+1)+".0-0":A?(l("replaceTilde pr",A),m=">="+t+"."+u+"."+B+"-"+A+" <"+t+"."+(+u+1)+".0-0"):m=">="+t+"."+u+"."+B+" <"+t+"."+(+u+1)+".0-0";l("tilde return",m);return m})},D=function(N,aa){return N.trim().split(/\s+/).map(function(m){return E(m,aa)}).join(" ")},E=function(N,aa){l("caret",N,aa);var m=aa.includePrerelease?"-0":"";return N.replace(aa.loose?d[h.CARETLOOSE]:d[h.CARET],function(t,u,B,A,H){l("caret",N,t,u,B,A,H);
r(u)?t="":r(B)?t=">="+u+".0.0"+m+" <"+(+u+1)+".0.0-0":r(A)?t="0"===u?">="+u+"."+B+".0"+m+" <"+u+"."+(+B+1)+".0-0":">="+u+"."+B+".0"+m+" <"+(+u+1)+".0.0-0":H?(l("replaceCaret pr",H),t="0"===u?"0"===B?">="+u+"."+B+"."+A+"-"+H+" <"+u+"."+B+"."+(+A+1)+"-0":">="+u+"."+B+"."+A+"-"+H+" <"+u+"."+(+B+1)+".0-0":">="+u+"."+B+"."+A+"-"+H+" <"+(+u+1)+".0.0-0"):(l("no pr"),t="0"===u?"0"===B?">="+u+"."+B+"."+A+m+" <"+u+"."+B+"."+(+A+1)+"-0":">="+u+"."+B+"."+A+m+" <"+u+"."+(+B+1)+".0-0":">="+u+"."+B+"."+A+" <"+(+u+
1)+".0.0-0");l("caret return",t);return t})},I=function(N,aa){l("replaceXRanges",N,aa);return N.split(/\s+/).map(function(m){return K(m,aa)}).join(" ")},K=function(N,aa){N=N.trim();return N.replace(aa.loose?d[h.XRANGELOOSE]:d[h.XRANGE],function(m,t,u,B,A,H){l("xRange",N,m,t,u,B,A,H);var F=r(u),L=F||r(B);A=L||r(A);"="===t&&A&&(t="");H=aa.includePrerelease?"-0":"";F?m=">"===t||"<"===t?"<0.0.0-0":"*":t&&A?(L&&(B=0),A=0,">"===t?(t=">=",L?(u=+u+1,B=0):B=+B+1,A=0):"<="===t&&(t="<",L?u=+u+1:B=+B+1),"<"===
t&&(H="-0"),m=t+u+"."+B+"."+A+H):L?m=">="+u+".0.0"+H+" <"+(+u+1)+".0.0-0":A&&(m=">="+u+"."+B+".0"+H+" <"+u+"."+(+B+1)+".0-0");l("xRange return",m);return m})},P=function(N){return function(aa,m,t,u,B,A,H,F,L,U,T,Y,wa){m=r(t)?"":r(u)?">="+t+".0.0"+(N?"-0":""):r(B)?">="+t+"."+u+".0"+(N?"-0":""):A?">="+m:">="+m+(N?"-0":"");F=r(L)?"":r(U)?"<"+(+L+1)+".0.0-0":r(T)?"<"+L+"."+(+U+1)+".0-0":Y?"<="+L+"."+U+"."+T+"-"+Y:N?"<"+L+"."+U+"."+(+T+1)+"-0":"<="+F;return(m+" "+F).trim()}};return kM}function IE(){if(EW)return lM;
EW=!0;var g=Symbol("SemVer ANY"),c=function(e,n){n=k(n);if(e instanceof c){if(e.loose===!!n.loose)return e;e=e.value}d("comparator",e,n);this.options=n;this.loose=!!n.loose;this.parse(e);this.value=this.semver===g?"":this.operator+this.semver.version;d("comp",this)};c.prototype.parse=function(e){var n=e.match(this.options.loose?l[p.COMPARATORLOOSE]:l[p.COMPARATOR]);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==n[1]?n[1]:"";"="===this.operator&&(this.operator="");this.semver=
n[2]?new h(n[2],this.options.loose):g};c.prototype.toString=function(){return this.value};c.prototype.test=function(e){d("Comparator.test",e,this.options.loose);if(this.semver===g||e===g)return!0;if("string"===typeof e)try{e=new h(e,this.options)}catch(n){return!1}return b(e,this.operator,this.semver,this.options)};c.prototype.intersects=function(e,n){if(!(e instanceof c))throw new TypeError("a Comparator is required");n&&"object"===typeof n||(n={loose:!!n,includePrerelease:!1});if(""===this.operator)return""===
this.value?!0:(new a(e.value,n)).test(this.value);if(""===e.operator)return""===e.value?!0:(new a(this.value,n)).test(e.semver);var q=(">="===this.operator||">"===this.operator)&&(">="===e.operator||">"===e.operator),r=("<="===this.operator||"<"===this.operator)&&("<="===e.operator||"<"===e.operator),v=this.semver.version===e.semver.version,y=(">="===this.operator||"<="===this.operator)&&(">="===e.operator||"<="===e.operator),D=b(this.semver,"<",e.semver,n)&&(">="===this.operator||">"===this.operator)&&
("<="===e.operator||"<"===e.operator);e=b(this.semver,">",e.semver,n)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return q||r||v&&y||D||e};$jscomp.global.Object.defineProperties(c,{ANY:{configurable:!0,enumerable:!0,get:function(){return g}}});lM=c;var k=GE(),f=bx(),l=f.re,p=f.t,b=yW(),d=FE(),h=hm(),a=Lo();return lM}function JE(){if(FW)return GW;FW=!0;var g=Lo();return GW=function(c,k,f){try{k=new g(k,f)}catch(l){return!1}return k.test(c)}}function $da(){if(HW)return IW;
HW=!0;var g=hm(),c=Lo();return IW=function(k,f,l){var p=null,b=null,d=null;try{d=new c(f,l)}catch(h){return null}k.forEach(function(h){!d.test(h)||p&&-1!==b.compare(h)||(p=h,b=new g(p,l))});return p}}function aea(){if(JW)return KW;JW=!0;var g=Lo();return KW=function(c,k){try{return(new g(c,k)).range||"*"}catch(f){return null}}}function bea(){if(LW)return MW;LW=!0;var g=Lo();return MW=function(c,k,f){c=new g(c,f);k=new g(k,f);return c.intersects(k)}}function cea(){if(NW)return OW;NW=!0;var g=cx();
return OW=function(c,k){return(c=g(c.trim().replace(/^[=v]+/,""),k))?c.version:null}}function dea(){if(PW)return QW;PW=!0;var g=cx(),c=fM();return QW=function(k,f){if(c(k,f))return null;k=g(k);f=g(f);var l=k.prerelease.length||f.prerelease.length,p=l?"pre":"",b;for(b in k)if(("major"===b||"minor"===b||"patch"===b)&&k[b]!==f[b])return p+b;return l?"prerelease":""}}function eea(){if(RW)return SW;RW=!0;var g=hm();return SW=function(c,k){return(new g(c,k)).minor}}function fea(){if(TW)return UW;TW=!0;
var g=hm();return UW=function(c,k){return(new g(c,k)).patch}}function gea(){if(VW)return WW;VW=!0;var g=Ko();return WW=function(c,k){return g(c,k,!0)}}function hea(){if(XW)return YW;XW=!0;var g=gM();return YW=function(c,k){return c.sort(function(f,l){return g(f,l,k)})}}function iea(){if(ZW)return $W;ZW=!0;var g=Lo();return $W=function(c,k){return(new g(c,k)).set.map(function(f){return f.map(function(l){return l.value}).join(" ").trim().split(" ")})}}function jea(){if(aX)return bX;aX=!0;var g=hm(),
c=Lo();return bX=function(k,f,l){var p=null,b=null,d=null;try{d=new c(f,l)}catch(h){return null}k.forEach(function(h){!d.test(h)||p&&1!==b.compare(h)||(p=h,b=new g(p,l))});return p}}function kea(){if(cX)return dX;cX=!0;var g=hm(),c=Lo(),k=HE();return dX=function(f,l){f=new c(f,l);l=new g("0.0.0");if(f.test(l))return l;l=new g("0.0.0-0");if(f.test(l))return l;l=null;for(var p={},b=0;b<f.set.length;p={$jscomp$loop$prop$setMin$2778:p.$jscomp$loop$prop$setMin$2778},++b){var d=f.set[b];p.$jscomp$loop$prop$setMin$2778=
null;d.forEach(function(h){return function(a){var e=new g(a.semver.version);switch(a.operator){case ">":0===e.prerelease.length?e.patch++:e.prerelease.push(0),e.raw=e.format();case "":case ">=":if(!h.$jscomp$loop$prop$setMin$2778||k(e,h.$jscomp$loop$prop$setMin$2778))h.$jscomp$loop$prop$setMin$2778=e;break;case "<":case "<=":break;default:throw Error("Unexpected operation: "+a.operator);}}}(p));!p.$jscomp$loop$prop$setMin$2778||l&&!k(l,p.$jscomp$loop$prop$setMin$2778)||(l=p.$jscomp$loop$prop$setMin$2778)}return l&&
f.test(l)?l:null}}function mM(){if(eX)return fX;eX=!0;var g=hm(),c=IE(),k=c.ANY,f=Lo(),l=JE(),p=HE(),b=hM(),d=jM(),h=iM();return fX=function(a,e,n,q){a=new g(a,q);e=new f(e,q);switch(n){case ">":var r=p;n=d;var v=b;var y=">";var D=">=";break;case "<":r=b;n=h;v=p;y="<";D="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');}if(l(a,e,q))return!1;for(var E={},I=0;I<e.set.length;E={$jscomp$loop$prop$high$2780:E.$jscomp$loop$prop$high$2780,$jscomp$loop$prop$low$2781:E.$jscomp$loop$prop$low$2781},
++I){var K=e.set[I];E.$jscomp$loop$prop$high$2780=null;E.$jscomp$loop$prop$low$2781=null;K.forEach(function(P){return function(N){N.semver===k&&(N=new c(">=0.0.0"));P.$jscomp$loop$prop$high$2780=P.$jscomp$loop$prop$high$2780||N;P.$jscomp$loop$prop$low$2781=P.$jscomp$loop$prop$low$2781||N;r(N.semver,P.$jscomp$loop$prop$high$2780.semver,q)?P.$jscomp$loop$prop$high$2780=N:v(N.semver,P.$jscomp$loop$prop$low$2781.semver,q)&&(P.$jscomp$loop$prop$low$2781=N)}}(E));if(E.$jscomp$loop$prop$high$2780.operator===
y||E.$jscomp$loop$prop$high$2780.operator===D||(!E.$jscomp$loop$prop$low$2781.operator||E.$jscomp$loop$prop$low$2781.operator===y)&&n(a,E.$jscomp$loop$prop$low$2781.semver)||E.$jscomp$loop$prop$low$2781.operator===D&&v(a,E.$jscomp$loop$prop$low$2781.semver))return!1}return!0}}function lea(){if(gX)return hX;gX=!0;var g=mM();return hX=function(c,k,f){return g(c,k,">",f)}}function mea(){if(iX)return jX;iX=!0;var g=mM();return jX=function(c,k,f){return g(c,k,"<",f)}}function nea(){if(kX)return lX;kX=
!0;var g=JE(),c=Ko();return lX=function(k,f,l){var p=[],b=null,d=null;k=k.sort(function(e,n){return c(e,n,l)});for(var h=$jscomp.makeIterator(k),a=h.next();!a.done;a=h.next())a=a.value,g(a,f,l)?(d=a,b||(b=a)):(d&&p.push([b,d]),b=d=null);b&&p.push([b,null]);b=[];p=$jscomp.makeIterator(p);for(d=p.next();!d.done;d=p.next())h=$jscomp.makeIterator(d.value),d=h.next().value,h=h.next().value,d===h?b.push(d):h||d!==k[0]?h?d===k[0]?b.push("<="+h):b.push(d+" - "+h):b.push(">="+d):b.push("*");k=b.join(" || ");
return k.length<("string"===typeof f.raw?f.raw:String(f)).length?k:f}}function oea(){if(mX)return nX;mX=!0;var g=Lo(),c=IE(),k=c.ANY,f=JE(),l=Ko(),p=function(h,a,e){if(h===a)return!0;if(1===h.length&&h[0].semver===k){if(1===a.length&&a[0].semver===k)return!0;h=e.includePrerelease?[new c(">=0.0.0-0")]:[new c(">=0.0.0")]}if(1===a.length&&a[0].semver===k){if(e.includePrerelease)return!0;a=[new c(">=0.0.0")]}var n=new Set,q,r,v=$jscomp.makeIterator(h);for(h=v.next();!h.done;h=v.next())h=h.value,">"===
h.operator||">="===h.operator?q=b(q,h,e):"<"===h.operator||"<="===h.operator?r=d(r,h,e):n.add(h.semver);if(1<n.size)return null;if(q&&r){var y=l(q.semver,r.semver,e);if(0<y||0===y&&(">="!==q.operator||"<="!==r.operator))return null}for(h=$jscomp.makeIterator(n).next();!h.done;){y=h.value;if(q&&!f(y,String(q),e)||r&&!f(y,String(r),e))return null;q=$jscomp.makeIterator(a);for(h=q.next();!h.done;h=q.next())if(!f(y,String(h.value),e))return!1;return!0}n=r&&!e.includePrerelease&&r.semver.prerelease.length?
r.semver:!1;v=q&&!e.includePrerelease&&q.semver.prerelease.length?q.semver:!1;n&&1===n.prerelease.length&&"<"===r.operator&&0===n.prerelease[0]&&(n=!1);a=$jscomp.makeIterator(a);for(h=a.next();!h.done;h=a.next()){h=h.value;var D=D||">"===h.operator||">="===h.operator;var E=E||"<"===h.operator||"<="===h.operator;if(q)if(v&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===v.major&&h.semver.minor===v.minor&&h.semver.patch===v.patch&&(v=!1),">"===h.operator||">="===h.operator){var I=
b(q,h,e);if(I===h&&I!==q)return!1}else if(">="===q.operator&&!f(q.semver,String(h),e))return!1;if(r)if(n&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===n.major&&h.semver.minor===n.minor&&h.semver.patch===n.patch&&(n=!1),"<"===h.operator||"<="===h.operator){if(I=d(r,h,e),I===h&&I!==r)return!1}else if("<="===r.operator&&!f(r.semver,String(h),e))return!1;if(!h.operator&&(r||q)&&0!==y)return!1}return q&&E&&!r&&0!==y||r&&D&&!q&&0!==y||v||n?!1:!0},b=function(h,a,e){if(!h)return a;e=
l(h.semver,a.semver,e);return 0<e?h:0>e?a:">"===a.operator&&">="===h.operator?a:h},d=function(h,a,e){if(!h)return a;e=l(h.semver,a.semver,e);return 0>e?h:0<e?a:"<"===a.operator&&"<="===h.operator?a:h};return nX=function(h,a,e){e=void 0===e?{}:e;if(h===a)return!0;h=new g(h,e);a=new g(a,e);var n=!1;h=$jscomp.makeIterator(h.set);var q=h.next();a:for(;!q.done;q=h.next()){q=q.value;for(var r=$jscomp.makeIterator(a.set),v=r.next();!v.done;v=r.next())if(v=p(q,v.value,e),n=n||null!==v,v)continue a;if(n)return!1}return!0}}
function Vz(g){g=Object.assign({plugins:hf.allPlugins,reinitializeIds:!1,skipMigrations:!0},g);if(g.reinitializeIds&&"function"!==typeof g.reinitializeIds)throw Error("serializer option 'reinitializeIds' needs to be a function(id, ref) => id");return g}function dx(g,c){c=hf.normalizeOptions(c);var k=c.objPool||new hf.ObjectPool(c);c=">="+hf.serializerVersion.replace(hf.majorAndMinorVersionRe,"");g=k.snapshotObject(g);hf.removeUnreachableObjects([g.id],g.snapshot);hf.clearDanglingConnections(g.snapshot);
g.requiredVersion=c;return g}function Wz(g,c){c=hf.normalizeOptions(c);var k=g.requiredVersion;k&&!hf.semver.satisfies(hf.serializerVersion,k)&&console.warn("[lively.serializer deserialization] snapshot requires version "+(k+" but serializer has incompatible version ")+(hf.serializerVersion+". Deserialization might fail...!"));return(c.objPool||new hf.ObjectPool(c)).resolveFromSnapshotAndId(g)}function Xz(g,c,k){function f(){var d=hf.deserialize(g,k);hf.runMigrations(p,"objectConverter",g,l);return d}
k=hf.normalizeOptions(k);c.length&&(k.skipMigrations=!1);var l=k.objPool||(k.objPool=new hf.ObjectPool(k));c=hf.normalizeMigrations(c);var p=c.after,b;hf.runMigrations(c.before,"snapshotConverter",g,l);"function"===typeof k.onDeserializationStart&&(b=k.onDeserializationStart(g,k));return b instanceof Promise?b.then(f):f()}function Yz(g,c){return hf.deserialize(hf.serialize(g,c),c)}function Zz(g){return g&&g.split(",").map(function(c){c=c.split(" ").filter(function(k){return""!=k}).join(" ");c.includes(" ")&&
(c.startsWith("'")&&(c=c.slice(1)),c.endsWith("'")&&(c=c.slice(0,-1)),c.startsWith('"')||(c='"'+c),c.endsWith('"')||(c+='"'));return c}).join(",")}function ex(g,c){c||(c="undefined"!==typeof document?document.location.search:"");c=(c=c.trim())&&"?"!==c?kh.parseQuery(c):{};g.endsWith(".json")?(c.file=g,delete c.name):(delete c.file,c.name=g);return"/worlds/load?"+kh.stringifyQuery(c)}function $z(g){Object.assign(kh.nameToClassMapping,g)}function zj(g,c){g=void 0===g?{}:g;c=void 0===c?{restore:!1}:
c;var k=kh.nameToClassMapping.default;g.type&&("function"===typeof g.type&&(k=g.type),"object"===typeof g.type?k=kh.locateClass(g.type):"string"===typeof g.type&&(k=kh.nameToClassMapping[g.type.toLowerCase()]||k));var f={};return c.restore?(new k((f[Symbol.for("lively-instance-restorer")]=!0,f))).initFromJSON(g):new k(g)}function aA(g){return("function"===typeof g?g[Symbol.for("__LivelyClassName__")]:"string"===typeof g?g.toLowerCase():"")+"_"+kh.string.newUUID().replace(/-/g,"_")}function pea(g){return"[object Array]"===
qea.call(g)}function Hn(g,c,k){(this||nM).type=Number(g);(this||nM).vNode=c;(this||nM).patch=k}function oX(g,c){var k=g.vnode;k||(k=g.vnode=g.render(c));if(!(rea(k)||sea(k)||tea(k)))throw Error("thunk did not return a valid node");return k}function pX(g,c){var k;for(k in g){if(!(k in c)){var f=f||{};f[k]=void 0}var l=g[k],p=c[k];if(l!==p)if(qX(l)&&qX(p))if(rX(p)!==rX(l))f=f||{},f[k]=p;else if(uea(p))f=f||{},f[k]=p;else{if(l=pX(l,p))f=f||{},f[k]=l}else f=f||{},f[k]=p}for(var b in c)b in g||(f=f||{},
f[b]=c[b]);return f}function rX(g){if(Object.getPrototypeOf)return Object.getPrototypeOf(g);if(g.__proto__)return g.__proto__;if(g.constructor)return g.constructor.prototype}function sX(g,c){var k={a:g};tX(g,c,k,0);return k}function tX(g,c,k,f){if(g!==c){var l=k[f],p=!1;if(KE(g)||KE(c))oM(g,c,k,f);else if(null==c)LE(g)||(pM(g,k,f),qM(g,k,f),l=k[f]),l=Mo(l,new Ij(Ij.REMOVE,g,c));else if(lu(c))if(lu(g))if(g.tagName===c.tagName&&g.namespace===c.namespace&&g.key===c.key){var b=vea(g.properties,c.properties);
b&&(l=Mo(l,new Ij(Ij.PROPS,g,b)));b=f;var d=g.children;c=c.children;var h=uX(c),a=h.keys,e=h.free;if(e.length===c.length)c={children:c,moves:null};else{h=uX(d);var n=h.keys;if(h.free.length===d.length)c={children:c,moves:null};else{h=[];for(var q=0,r=e.length,v=0,y=0;y<d.length;y++){var D=d[y];D.key?a.hasOwnProperty(D.key)?(D=a[D.key],h.push(c[D])):(v++,h.push(null)):q<r?(D=e[q++],h.push(c[D])):(v++,h.push(null))}e=q>=e.length?c.length:e[q];for(q=0;q<c.length;q++)r=c[q],r.key?n.hasOwnProperty(r.key)||
h.push(r):q>=e&&h.push(r);n=h.slice();e=0;q=[];r=[];for(D=0;D<c.length;){var E=c[D];for(y=n[e];null===y&&n.length;)q.push(ME(n,e,null)),y=n[e];y&&y.key===E.key?(e++,D++):E.key?(y&&y.key?a[y.key]!==D+1?(q.push(ME(n,e,y.key)),(y=n[e])&&y.key===E.key?e++:r.push({key:E.key,to:D})):r.push({key:E.key,to:D}):r.push({key:E.key,to:D}),D++):y&&y.key&&q.push(ME(n,e,y.key))}for(;e<n.length;)y=n[e],q.push(ME(n,e,y&&y.key));c=q.length!==v||r.length?{children:h,moves:{removes:q,inserts:r}}:{children:h,moves:null}}}a=
c.children;h=d.length;v=a.length;h=h>v?h:v;for(v=0;v<h;v++)n=d[v],e=a[v],b+=1,n?tX(n,e,k,b):e&&(l=Mo(l,new Ij(Ij.INSERT,null,e))),lu(n)&&n.count&&(b+=n.count);c.moves&&(l=Mo(l,new Ij(Ij.ORDER,g,c.moves)))}else l=Mo(l,new Ij(Ij.VNODE,g,c)),p=!0;else l=Mo(l,new Ij(Ij.VNODE,g,c)),p=!0;else vX(c)?vX(g)?g.text!==c.text&&(l=Mo(l,new Ij(Ij.VTEXT,g,c))):(l=Mo(l,new Ij(Ij.VTEXT,g,c)),p=!0):LE(c)&&(LE(g)||(p=!0),l=Mo(l,new Ij(Ij.WIDGET,g,c)));l&&(k[f]=l);p&&(pM(g,k,f),qM(g,k,f))}}function qM(g,c,k){if(LE(g))"function"===
typeof g.destroy&&(c[k]=Mo(c[k],new Ij(Ij.REMOVE,g,null)));else if(lu(g)&&(g.hasWidgets||g.hasThunks)){g=g.children;for(var f=g.length,l=0;l<f;l++){var p=g[l];k+=1;qM(p,c,k);lu(p)&&p.count&&(k+=p.count)}}else KE(g)&&oM(g,null,c,k)}function oM(g,c,k,f){g=wea(g,c);g=sX(g.a,g.b);a:{for(l in g)if("a"!==l){var l=!0;break a}l=!1}l&&(k[f]=new Ij(Ij.THUNK,null,g))}function pM(g,c,k){if(lu(g)){if(g.hooks){var f=c[k],l=Ij.PROPS,p=g.hooks,b={},d;for(d in p)b[d]=void 0;c[k]=Mo(f,new Ij(l,g,b))}if(g.descendantHooks||
g.hasThunks)for(g=g.children,f=g.length,l=0;l<f;l++)p=g[l],k+=1,pM(p,c,k),lu(p)&&p.count&&(k+=p.count)}else KE(g)&&oM(g,null,c,k)}function ME(g,c,k){g.splice(c,1);return{from:c,key:k}}function uX(g){for(var c={},k=[],f=g.length,l=0;l<f;l++){var p=g[l];p.key?c[p.key]=l:k.push(l)}return{keys:c,free:k}}function Mo(g,c){return g?(xea(g)?g.push(c):g=[g,c],g):c}function wX(g,c,k,f){if(f)if(f=f[c],xX(f))f.unhook&&f.unhook(g,c,k);else if("attributes"===c)for(var l in f)g.removeAttribute(l);else if("style"===
c)for(var p in f)g.style[p]="";else g[c]="string"===typeof f?"":null}function yX(g){if(Object.getPrototypeOf)return Object.getPrototypeOf(g);if(g.__proto__)return g.__proto__;if(g.constructor)return g.constructor.prototype}function zX(g,c){var k=c?c.document||AX:AX,f=c?c.warn:null;g=yea(g).a;if(zea(g))return g.init();if(Aea(g))return k.createTextNode(g.text);if(!Bea(g))return f&&f("Item is not a valid virtual dom node",g),null;k=null===g.namespace?k.createElement(g.tagName):k.createElementNS(g.namespace,
g.tagName);Cea(k,g.properties);g=g.children;for(f=0;f<g.length;f++){var l=zX(g[f],c);l&&k.appendChild(l)}return k}function BX(g,c,k,f,l){f=f||{};if(g){CX(k,l,l)&&(f[l]=g);var p=c.children;if(p){g=g.childNodes;for(var b=0;b<c.children.length;b++){l+=1;var d=p[b]||Dea,h=l+(d.count||0);CX(k,l,h)&&BX(g[b],d,k,f,l);l=h}}}return f}function CX(g,c,k){if(0===g.length)return!1;for(var f=0,l=g.length-1,p,b;f<=l;){p=(l+f)/2>>0;b=g[p];if(f===l)return b>=c&&b<=k;if(b<c)f=p+1;else if(b>k)l=p-1;else return!0}return!1}
function Eea(g,c){return g>c?1:-1}function DX(g,c){"function"===typeof c.destroy&&Fea(c)&&c.destroy(g)}function EX(g,c,k){k=k||{};k.patch=k.patch&&k.patch!==EX?k.patch:Gea;k.render=k.render||Hea;return k.patch(g,c,k)}function Gea(g,c,k){var f=[];for(l in c)"a"!==l&&f.push(Number(l));if(0===f.length)return g;var l=Iea(g,c.a,f);var p=g.ownerDocument;k.document||p===Jea||(k.document=p);for(p=0;p<f.length;p++){var b=f[p];var d=l[b],h=c[b],a=k;if(d)if(Kea(h))for(var e=0;e<h.length;e++)b=FX(h[e],d,a),d===
g&&(g=b);else b=FX(h,d,a),d===g&&(g=b)}return g}function rM(g,c,k,f,l){(this||Jp).tagName=g;(this||Jp).properties=c||Lea;(this||Jp).children=k||Mea;(this||Jp).key=null!=f?String(f):void 0;(this||Jp).namespace="string"===typeof l?l:null;g=k&&k.length||0;f=0;var p=l=!1,b=!1,d;for(a in c)if(c.hasOwnProperty(a)){var h=c[a];Nea(h)&&h.unhook&&(d||(d={}),d[a]=h)}for(c=0;c<g;c++){var a=k[c];Oea(a)?(f+=a.count||0,!l&&a.hasWidgets&&(l=!0),!p&&a.hasThunks&&(p=!0),b||!a.hooks&&!a.descendantHooks||(b=!0)):!l&&
Pea(a)?"function"===typeof a.destroy&&(l=!0):!p&&Qea(a)&&(p=!0)}(this||Jp).count=g+f;(this||Jp).hasWidgets=l;(this||Jp).hasThunks=p;(this||Jp).hooks=d;(this||Jp).descendantHooks=b}function sM(g){(this||Rea).text=String(g)}function NE(g){if(!(this instanceof NE))return new NE(g);this.value=g}function bA(g){if(!(this instanceof bA))return new bA(g);this.value=g}function GX(g,c,k,f){if("string"===typeof g)c.push(new HX(g));else if("number"===typeof g)c.push(new HX(String(g)));else if(IX(g))c.push(g);
else if(JX(g))for(var l=0;l<g.length;l++)GX(g[l],c,k,f);else if(null!==g&&void 0!==g)throw c={tagName:k,properties:f},k=Error(),k.type="virtual-hyperscript.unexpected.virtual-element",k.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+KX(g)+".\nThe parent vnode is:\n"+KX(c),k.foreignObject=g,k.parentVnode=c,k;}function IX(g){return Sea(g)||Tea(g)||Uea(g)||Vea(g)}function KX(g){try{return JSON.stringify(g,null,"    ")}catch(c){return String(g)}}
function tM(g,c){if(3===g.nodeType)return new LX(g.nodeValue);if(1===g.nodeType||9===g.nodeType){var k="http://www.w3.org/1999/xhtml"!==g.namespaceURI?g.namespaceURI:null,f=c&&g.getAttribute(c)?g.getAttribute(c):null,l=g.tagName;var p,b={};if(g.hasAttributes()){if(g.namespaceURI&&"http://www.w3.org/1999/xhtml"!==g.namespaceURI)var d=g.namespaceURI;for(var h=0;h<g.attributes.length;h++){if("style"==g.attributes[h].name){var a=g.style;var e={};for(p=0;p<a.length;++p){var n=a.item(p);e[n]=String(a[n]);
-1<e[n].indexOf("url")&&(e[n]=e[n].replace(/"/g,""))}a="style";n=p=void 0}else d?(p=g.attributes[h],a=p.name,e=p.value,p=Wea[p.name]||"",n=void 0):(p=void 0,e=g.attributes[h],a=MX[e.name]?MX[e.name]:e.name,0===a.indexOf("data-")||0===a.indexOf("aria-")?(e=e.value,p=!0):e=e.value,n=p||!1,p=void 0);p?b[a]={namespace:p,value:e}:n?(b.attributes||(b.attributes={}),b.attributes[a]=e):b[a]=e}}d=[];for(h=0;h<g.childNodes.length;h++)d.push(tM(g.childNodes[h],c));return new Xea(l,b,d,f,k)}return new LX("")}
function cA(g){var c={};Ig.addFill(g,c);Ig.addTransform(g,c);Ig.addTransformOrigin(g,c);Ig.addDisplay(g,c);Ig.addExtentStyle(g,c);Ig.addBorder(g,c);Ig.addBorderRadius(g,c);Ig.addShadowStyle(g,c);g.grayscale&&(c.filter=(c.filter||"")+" grayscale("+100*g.grayscale+"%)");g.blur&&(c.filter=(c.filter||"")+" blur("+g.blur+"px)");null!=g.opacity&&(c.opacity=g.opacity);g.draggable&&!g.isWorld&&(c["touch-action"]="none");return c}function OE(g){return(g.renderOnGPU||g.dropShadow&&!g.dropShadow.fast||0<g.grayscale)&&
!Ig.Path("owner.layout.renderViaCSS").get(g)}function uM(g,c){var k=g.position,f=g.origin,l=g.scale,p=g.rotation,b=g.flipped,d=g.tilted,h=g.perspective,a=g.owner,e=k.x-f.x-(g._skipWrapping&&a?a.borderWidthLeft:0);k=k.y-f.y-(g._skipWrapping&&a?a.borderWidthTop:0);f=Ig.canBePromotedToCompositionLayer(g);e=g.renderOnGPU?e:Math.round(e);k=g.renderOnGPU?k:Math.round(k);f&&(c.willChange="transform");a&&a.isText&&!Ig.Path("layout.renderViaCSS").get(a)||f?c.transform="translate("+e+"px, "+k+"px)":(c.transform=
"",c.top=k+"px",c.left=e+"px");c.transform+=" rotate("+p.toFixed(2)+"rad) scale("+l.toFixed(5)+","+l.toFixed(5)+")";h&&(c.perspective=h+"px");b&&(c.transform+=" rotateY("+180*b+"deg)");d&&(c.transform+=" rotateX("+180*d+"deg)")}function dA(g,c){var k=g.width;g=g.height;c.width=k||1;c.height=g||1;c.viewBox=[0,0,k||1,g||1].join(" ");return c}function fx(g){var c="";if(0<g.length){var k=g[0];var f=k.position;var l=f.y;f=f.x;c+="M "+f+" "+l+" "}for(var p=1;p<g.length-1;p++){var b=g[p],d=b.position,h=
d.x;d=d.y;var a=b,e=a.controlPoints.previous;c=a.isSmooth?c+("C "+(f+k.controlPoints.next.x)+" "+(l+k.controlPoints.next.y)+" "+(h+e.x)+" "+(d+e.y)+" "+h+" "+d+" "):c+("L "+h+" "+d+" ");k=b;f=h;l=d}0<g.length&&(b=g[g.length-1].position,p=b.x,b=b.y,g=g[g.length-1],h=g.controlPoints.previous,c=g.isSmooth?c+("C "+(f+k.controlPoints.next.x)+" "+(l+k.controlPoints.next.y)+" "+(p+h.x)+" "+(b+h.y)+" "+p+" "+b):c+("L "+p+" "+b));return c}function eA(g,c){var k=g.id,f=g.vertices,l=g.fill,p=g.borderColor,b=
g.borderWidth;f.length&&(c.d=Ig.getSvgVertices(f));Ig.addSvgBorderStyle(g,c);c["stroke-width"]=b.valueOf();c.fill=l?l.isGradient?"url(#gradient-fill"+k+")":l.toString():"transparent";c.stroke=p.valueOf().isGradient?"url(#gradient-borderColor"+k+")":p.valueOf().toString();return c}function gx(g){var c=g.reactsToPointer,k=g.nativeCursor,f=g.clipMode,l={};me.Path("owner.layout.renderViaCSS").get(g)&&g.owner.layout.addSubmorphCSS(g,l);me.Path("layout.renderViaCSS").get(g)&&g.layout.addContainerCSS(g,
l);var p=me.styleProps(g),b=g._animationQueue.maskedProps("css");"backgroundImage"in b&&delete p.background;"visible"!==f&&(p.overflow=f,p["-webkit-overflow-scrolling"]="touch",p["clip-path"]=g.dropShadow?"none":"border-box",g.isImage&&(p["will-change"]="transform"),p["overflow-anchor"]="none");Object.assign(p,b);p.position="absolute";p["pointer-events"]=c?"auto":"none";p.cursor=k;Object.assign(p,l);return p}function vM(g,c){this.morph=g;this.type=c}function hx(g,c){c={animation:new me.Animation(g),
key:g.id,id:g.id,attributes:{},className:(g.hideScrollbars?g.styleClasses.concat("hiddenScrollbar"):g.styleClasses).join(" "),draggable:!1,"morph-after-render-hook":new me.MorphAfterRenderHook(g,c)};c.attributes["touch-action"]=me.bowser.ios&&g.draggable&&!g.isWorld?"none":me.bowser.ios&&"visible"!=g.clipMode&&!g.isWorld?"auto":"manipulation";return c}function PE(g){var c=new me.SvgAnimation(g,"svg"),k={};me.addSvgAttributes(g,k);Object.assign(k,g._animationQueue.maskedProps("svg"));return{animation:c,
attributes:k}}function QE(g){var c=new me.SvgAnimation(g,"path"),k={mask:0!==g.drawnProportion?"url(#mask"+g.id+")":""};me.addPathAttributes(g,k);Object.assign(k,g._animationQueue.maskedProps("path"));return{animation:c,attributes:k}}function RE(g,c,k){var f=k=k.valueOf(),l=f.bounds,p=f.focus,b=f.vector;f=f.stops;var d=c.x;c=c.y;g={namespace:"http://www.w3.org/2000/svg",attributes:{id:"gradient-"+g,gradientUnits:"userSpaceOnUse",r:"50%"}};b&&(g.attributes.gradientTransform="rotate("+me.num.toDegrees(b.extent().theta())+
", "+d/2+", "+c/2+")");p&&l&&(b=l.width,l=l.height,g.attributes.gradientTransform="matrix(\n"+b/d+", 0, 0, "+l/c+",\n"+(d/2-b/d*(d/2)+p.x*d-d/2)+",\n"+(c/2-l/c*(c/2)+p.y*c-c/2)+")");return me.h(k.type,g,f.map(function(h){return me.h("stop",{namespace:"http://www.w3.org/2000/svg",attributes:{offset:100*h.offset+"%","stop-opacity":h.color.a,"stop-color":h.color.withA(1).toString()}})}))}function SE(g,c){c=void 0===c?g.env.renderer:c;return me.createNode(g.render(c),c.domEnvironment)}function TE(g,c){var k=
c.renderMap.get(g),f=c.getNodeForMorph(g);if(f&&k){var l=c.render(g),p=me.diff(k,l);if(g=c.renderMap.get(g.owner))g=g.children[0].children,k=g.indexOf(k),g[k]=l,me.patch(f,p)}}function UE(g,c){if(g.needsRerender()){var k=!1,f=c.domNode,l=c.renderMap.get(g)||f&&(k=!0)&&me.parser(f)||c.render(g),p=c.render(g);k&&(l.key=p.key);k=me.diff(l,p);f=f||(c.domNode=me.createNode(l,c.domEnvironment));f.parentNode||me.initDOMState(c,g);me.patch(f,k);c.renderFixedMorphs(p.fixedMorphs,g)}}function VE(g,c,k){return(((1-
3*k+3*c)*g+(3*k-6*c))*g+3*c)*g}function Yea(g){return g}function os(g){return Ve.obj.isFunction(g)?g:Ve.Bezier.apply(Ve,$jscomp.arrayFromIterable(eval("(["+g.match(/\((.*)\)/)[1]+"])")))}function ix(g){var c=0,k=0;do c+=g.offsetTop||0,k+=g.offsetLeft||0,g=g.offsetParent;while(g);return{top:c,left:k}}function wM(){return System.get("@system-env").browser?zg.createDOMEnvironment_browser():zg.createDOMEnvironment_node()}function WE(){return zg._defaultEnv||(zg._defaultEnv=System.get("@system-env").browser?
new zg.DomEnvironment(window,document,function(){}):zg.createDOMEnvironment())}function Kp(g,c,k){g=void 0===g?"lively-css":g;k=void 0===k?document:k;var f=k.getElementById(g);return f?zg.setCSSDef(f,c,k):zg.addCSSDef(g,c,k)}function mu(g,c,k,f){k=void 0===k?document:k;f=void 0===f?!0:f;var l=k.getElementById(g),p=!1;return l?f&&l.getAttribute("href")!==c?(l.setAttribute("href",c),l.onload=function(){return p=!0},zg.promise.waitFor(3E4,function(){return!!p&&l})):Promise.resolve():(l=document.createElement("link"),
l.type="text/css",l.rel="stylesheet",l.setAttribute("id",g),l.setAttribute("href",c),l.onload=function(){return p=!0},(k.head||k).appendChild(l),zg.promise.waitFor(3E4,function(){return!!p&&l}))}function XE(g,c){if("string"===typeof g)return g;if(!g||"object"!==typeof g)return null;switch(c){case "ios":return g.ios||g.mac;case "mac":return g.mac||g.ios;case "win":case "windows":case "windowsphone":return g.win||g.windows;case "linux":return g.linux||g.win||g.windows;case "chromeos":return g.chromeos||
g.linux||g.win||g.windows;case "android":return g.android||g.linux||g.win||g.windows;default:return g.linux||g.win||g.windows}}function YE(){xM=!0;for(var g,c,k=fA.length;k;){c=fA;fA=[];for(g=-1;++g<k;)c[g]();k=fA.length}xM=!1}function jx(g,c,k){var f=k[k.length-1];g===f.element&&(k.pop(),f=k[k.length-1]);k=f.element;f=f.index;Array.isArray(k)?k.push(g):f===c.length-2?(c=c.pop(),k[c]=g):c.push(g)}function Xi(){Xi.init.call(this)}function ZE(g){if("function"!=typeof g)throw new TypeError('The "listener" argument must be of type Function. Received type '+
typeof g);}function NX(g,c,k,f){var l,p,b;if(ZE(k),void 0===(p=g._events)?(p=g._events=Object.create(null),g._eventsCount=0):(void 0!==p.newListener&&(g.emit("newListener",c,k.listener?k.listener:k),p=g._events),b=p[c]),void 0===b)p[c]=k,++g._eventsCount;else if("function"==typeof b?b=p[c]=f?[k,b]:[b,k]:f?b.unshift(k):b.push(k),0<(l=void 0===g._maxListeners?Xi.defaultMaxListeners:g._maxListeners)&&b.length>l&&!b.warned)b.warned=!0,k=Error("Possible EventEmitter memory leak detected. "+b.length+" "+
String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit"),k.name="MaxListenersExceededWarning",k.emitter=g,k.type=c,k.count=b.length,console&&console.warn&&console.warn(k);return g}function Zea(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function OX(g,c,k){g={fired:!1,wrapFn:void 0,target:g,type:c,listener:k};c=Zea.bind(g);return c.listener=
k,g.wrapFn=c,c}function PX(g,c,k){g=g._events;if(void 0===g)return[];c=g[c];if(void 0===c)k=[];else if("function"==typeof c)k=k?[c.listener||c]:[c];else if(k)for(k=Array(c.length),g=0;g<k.length;++g)k[g]=c[g].listener||c[g];else k=QX(c,c.length);return k}function RX(g){var c=this._events;if(void 0!==c){g=c[g];if("function"==typeof g)return 1;if(void 0!==g)return g.length}return 0}function QX(g,c){for(var k=Array(c),f=0;f<c;++f)k[f]=g[f];return k}function kx(g){return g&&"object"===typeof g&&"default"in
g?g["default"]:g}function ps(){this._store={}}function gA(g){this._store=new ps;if(g&&Array.isArray(g))for(var c=0,k=g.length;c<k;c++)this.add(g[c])}function Kk(g){var c;if(!g||"object"!==typeof g)return g;if(Array.isArray(g)){var k=[];var f=0;for(c=g.length;f<c;f++)k[f]=Kk(g[f]);return k}if(g instanceof Date)return g.toISOString();if("undefined"!==typeof ArrayBuffer&&g instanceof ArrayBuffer||"undefined"!==typeof Blob&&g instanceof Blob)return g instanceof ArrayBuffer?"function"===typeof g.slice?
g=g.slice(0):(f=new ArrayBuffer(g.byteLength),k=new Uint8Array(f),g=new Uint8Array(g),k.set(g),g=f):(f=g.size,k=g.type,g="function"===typeof g.slice?g.slice(0,f,k):g.webkitSlice(0,f,k)),g;k=Object.getPrototypeOf(g);null===k?k=!0:(k=k.constructor,k="function"==typeof k&&k instanceof k&&SX.call(k)==$ea);if(!k)return g;k={};for(f in g)Object.prototype.hasOwnProperty.call(g,f)&&(c=Kk(g[f]),"undefined"!==typeof c&&(k[f]=c));return k}function TX(g){var c=!1;return lx(function(k){if(c)throw Error("once called more than once");
c=!0;g.apply(this,k)})}function UX(g){return lx(function(c){c=Kk(c);var k=this,f="function"===typeof c[c.length-1]?c.pop():!1,l=new Promise(function(p,b){var d;try{var h=TX(function(a,e){a?b(a):p(e)});c.push(h);(d=g.apply(k,c))&&"function"===typeof d.then&&p(d)}catch(a){b(a)}});f&&l.then(function(p){f(null,p)},f);return l})}function afa(g,c,k){if(g.constructor.listeners("debug").length){for(var f=["api",g.name,c],l=0;l<k.length-1;l++)f.push(k[l]);g.constructor.emit("debug",f);var p=k[k.length-1];
k[k.length-1]=function(b,d){var h=["api",g.name,c];h=h.concat(b?["error",b]:["success",d]);g.constructor.emit("debug",h);p(b,d)}}}function tk(g,c){return UX(lx(function(k){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var f=this;afa(f,g,k);return this.taskqueue.isReady?c.apply(this,k):new Promise(function(l,p){f.taskqueue.addTask(function(b){b?p(b):l(f[g].apply(f,k))})})}))}function hA(g,c){for(var k={},
f=0,l=c.length;f<l;f++){var p=c[f];p in g&&(k[p]=g[p])}return k}function VX(g){return g}function bfa(g){return[{ok:g}]}function WX(g,c,k){function f(){var r=[];e.forEach(function(v){v.docs.forEach(function(y){r.push({id:v.id,docs:[y]})})});k(null,{results:r})}function l(){if(!(q>=n.length)){var r=n.slice(q,Math.min(q+6,n.length));p(r,q);q+=r.length}}function p(r,v){r.forEach(function(y,D){var E=v+D;D=d.get(y);var I=hA(D[0],["atts_since","attachments"]);I.open_revs=D.map(function(P){return P.rev});
I.open_revs=I.open_revs.filter(VX);var K=VX;0===I.open_revs.length&&(delete I.open_revs,K=bfa);["revs","attachments","binary","ajax","latest"].forEach(function(P){P in c&&(I[P]=c[P])});g.get(y,I,function(P,N){P=P?[{error:P}]:K(N);e[E]={id:y,docs:P};++a===h&&f();l()})})}var b=c.docs,d=new bn;b.forEach(function(r){d.has(r.id)?d.get(r.id).push(r):d.set(r.id,[r])});var h=d.size,a=0,e=Array(h),n=[];d.forEach(function(r,v){n.push(v)});var q=0;l()}function cfa(g){iA&&addEventListener("storage",function(c){g.emit(c.key)})}
function mx(){Fm.EventEmitter.call(this);this._listeners={};cfa(this)}function In(g){if("undefined"!==typeof console&&"function"===typeof console[g]){var c=Array.prototype.slice.call(arguments,1);console[g].apply(console,c)}}function dfa(g){var c=0;g||(c=2E3);g=parseInt(g,10)||0;c=parseInt(c,10);c=c!==c||c<=g?(g||1)<<1:c+1;6E5<c&&(g=3E5,c=6E5);return~~((c-g)*Math.random()+g)}function yM(g,c){In("info","The above "+g+" is totally normal. "+c)}function ij(g,c,k){Error.call(this,k);this.status=g;this.name=
c;this.message=k;this.error=!0}function yh(g,c){function k(f){for(var l in g)"function"!==typeof g[l]&&(this[l]=g[l]);void 0!==f&&(this.reason=f)}k.prototype=ij.prototype;return new k(c)}function nx(g){if("object"!==typeof g){var c=g;g=XX;g.data=c}"error"in g&&"conflict"===g.error&&(g.name="conflict",g.status=409);"name"in g||(g.name=g.error||"unknown");"status"in g||(g.status=500);"message"in g||(g.message=g.message||g.reason);return g}function zM(g){var c={},k=g.filter&&"function"===typeof g.filter;
c.query=g.query_params;return function(f){f.doc||(f.doc={});var l;if(l=k)try{l=!(0,g.filter)(f.doc,c)}catch(b){l=yh($E,"Filter function threw: "+b.toString())}if("object"===typeof l)return l;if(l)return!1;if(!g.include_docs)delete f.doc;else if(!g.attachments)for(var p in f.doc._attachments)f.doc._attachments.hasOwnProperty(p)&&(f.doc._attachments[p].stub=!0);return!0}}function aF(g){for(var c=[],k=0,f=g.length;k<f;k++)c=c.concat(g[k]);return c}function YX(g){var c;g?"string"!==typeof g?c=yh(ZX):
/^_/.test(g)&&!/^_(design|local)/.test(g)&&(c=yh(efa)):c=yh(ffa);if(c)throw c;}function Lp(g){return"boolean"===typeof g._remote?g._remote:"function"===typeof g.type?(In("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===g.type()):!1}function AM(g){if(!g)return null;var c=g.split("/");return 2===c.length?c:1===c.length?[g,g]:null}function $X(g){return(g=AM(g))?g.join("/"):null}function aY(g){g=gfa.exec(g);for(var c={},k=14;k--;){var f=bY[k],l=g[k]||"",p=
-1!==["user","password"].indexOf(f);c[f]=p?decodeURIComponent(l):l}c.queryKey={};c[bY[12]].replace(hfa,function(b,d,h){d&&(c.queryKey[d]=h)});return c}function BM(g,c){var k=[],f=[],l;for(l in c)c.hasOwnProperty(l)&&(k.push(l),f.push(c[l]));k.push(g);return Function.apply(null,k).apply(null,f)}function bF(g,c,k){return new Promise(function(f,l){g.get(c,function(p,b){if(p){if(404!==p.status)return l(p);b={}}p=b._rev;b=k(b);if(!b)return f({updated:!1,rev:p});b._id=c;b._rev=p;f(ifa(g,b,k))})})}function ifa(g,
c,k){return g.put(c).then(function(f){return{updated:!0,rev:f.rev}},function(f){if(409!==f.status)throw f;return bF(g,c._id,k)})}function CM(g,c){g=g||[];c=c||{};try{return new Blob(g,c)}catch(l){if("TypeError"!==l.name)throw l;for(var k=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),f=0;f<g.length;f+=1)k.append(g[f]);return k.getBlob(c.type)}}function DM(g,c){for(var k=g.length,
f=new ArrayBuffer(k),l=new Uint8Array(f),p=0;p<k;p++)l[p]=g.charCodeAt(p);return CM([f],{type:c})}function EM(g,c){return DM(atob(g),c)}function cY(g,c){var k=new FileReader,f="function"===typeof k.readAsBinaryString;k.onloadend=function(l){var p=l.target.result||"";if(f)return c(p);l="";p=new Uint8Array(p);for(var b=p.byteLength,d=0;d<b;d++)l+=String.fromCharCode(p[d]);c(l)};f?k.readAsBinaryString(g):k.readAsArrayBuffer(g)}function dY(g,c){cY(g,function(k){c(k)})}function FM(g,c){dY(g,function(k){c(btoa(k))})}
function jfa(g,c){var k=new FileReader;k.onloadend=function(f){f=f.target.result||new ArrayBuffer(0);c(f)};k.readAsArrayBuffer(g)}function kfa(g,c,k){return g.webkitSlice?g.webkitSlice(c,k):g.slice(c,k)}function lfa(g,c,k,f,l){if(0<k||f<c.size)c=kfa(c,k,f);jfa(c,function(p){g.append(p);l()})}function mfa(g,c,k,f,l){if(0<k||f<c.length)c=c.substring(k,f);g.appendBinary(c);l()}function GM(g,c){function k(){nfa(l)}function f(){var q=e.end(!0);q=btoa(q);c(q);e.destroy()}function l(){var q=a*d,r=q+d;a++;
a<h?n(e,g,q,r,k):n(e,g,q,r,f)}var p="string"===typeof g,b=p?g.length:g.size,d=Math.min(32768,b),h=Math.ceil(b/d),a=0,e=p?new cF:new cF.ArrayBuffer,n=p?mfa:lfa;l()}function eY(g,c){g=Kk(g);if(!c)return fY.v4().replace(/-/g,"").toLowerCase();delete g._rev_tree;return cF.hash(JSON.stringify(g))}function nu(g){g=g.rev_tree.slice();for(var c;c=g.pop();){var k=c.ids,f=k[2];c=c.pos;if(f.length){k=0;for(var l=f.length;k<l;k++)g.push({pos:c+1,ids:f[k]})}else if(f=!!k[1].deleted,k=k[0],!p||(d!==f?d:b!==c?b<
c:p<k)){var p=k;var b=c;var d=f}}return b+"-"+p}function ou(g,c){g=g.slice();for(var k;k=g.pop();){var f=k.pos,l=k.ids,p=l[2];k=c(0===p.length,f,l[0],k.ctx,l[1]);l=0;for(var b=p.length;l<b;l++)g.push({pos:f+1,ids:p[l],ctx:k})}}function ofa(g,c){return g.pos-c.pos}function HM(g){var c=[];ou(g,function(f,l,p,b,d){f&&c.push({rev:l+"-"+p,pos:l,opts:d})});c.sort(ofa).reverse();g=0;for(var k=c.length;g<k;g++)delete c[g].pos;return c}function IM(g){var c=nu(g);g=HM(g.rev_tree);for(var k=[],f=0,l=g.length;f<
l;f++){var p=g[f];p.rev===c||p.opts.deleted||k.push(p.rev)}return k}function pfa(g){var c=[];ou(g.rev_tree,function(k,f,l,p,b){"available"!==b.status||k||(c.push(f+"-"+l),b.status="missing")});return c}function gY(g){var c=[];g=g.slice();for(var k;k=g.pop();){var f=k.pos,l=k.ids,p=l[0],b=l[1];l=l[2];var d=0===l.length;k=k.history?k.history.slice():[];k.push({id:p,opts:b});d&&c.push({pos:f+1-k.length,ids:k});p=0;for(b=l.length;p<b;p++)g.push({pos:f+1,ids:l[p],history:k})}return c.reverse()}function qfa(g,
c){return g.pos-c.pos}function hY(g,c){for(var k,f,l=g.length;c<l;c++){var p=g[c];p=[p.id,p.opts,[]];f?(f[2].push(p),f=p):k=f=p}return k}function rfa(g,c){return g[0]<c[0]?-1:1}function iY(g,c){c=[{tree1:g,tree2:c}];for(var k=!1;0<c.length;){var f=c.pop(),l=f.tree1;f=f.tree2;if(l[1].status||f[1].status)l[1].status="available"===l[1].status||"available"===f[1].status?"available":"missing";for(var p=0;p<f[2].length;p++)if(l[2][0]){for(var b=!1,d=0;d<l[2].length;d++)l[2][d][0]===f[2][p][0]&&(c.push({tree1:l[2][d],
tree2:f[2][p]}),b=!0);if(!b){k="new_branch";b=l[2];d=f[2][p];for(var h,a=b,e=d,n=rfa,q=0,r=a.length;q<r;)h=q+r>>>1,0>n(a[h],e)?q=h+1:r=h;b.splice(q,0,d)}}else k="new_leaf",l[2][0]=f[2][p]}return{conflicts:k,tree:g}}function jY(g,c,k){var f=[],l=!1,p=!1;if(!g.length)return{tree:[c],conflicts:"new_leaf"};for(var b=0,d=g.length;b<d;b++){var h=g[b];if(h.pos===c.pos&&h.ids[0]===c.ids[0])p=iY(h.ids,c.ids),f.push({pos:h.pos,ids:p.tree}),l=l||p.conflicts,p=!0;else if(!0!==k){var a=h.pos<c.pos?h:c,e=h.pos<
c.pos?c:h,n=[],q=[];for(q.push({ids:a.ids,diff:e.pos-a.pos,parent:null,parentIdx:null});0<q.length;){var r=q.pop();if(0===r.diff)r.ids[0]===e.ids[0]&&n.push(r);else for(var v=r.ids[2],y=0,D=v.length;y<D;y++)q.push({ids:v[y],diff:r.diff-1,parent:r.ids,parentIdx:y})}(n=n[0])?(p=iY(n.ids,e.ids),n.parent[2][n.parentIdx]=p.tree,f.push({pos:a.pos,ids:a.ids}),l=l||p.conflicts,p=!0):f.push(h)}else f.push(h)}p||f.push(c);f.sort(qfa);return{tree:f,conflicts:l||"internal_node"}}function sfa(g,c){g=gY(g);for(var k,
f,l=0,p=g.length;l<p;l++){var b=g[l],d=b.ids;if(d.length>c){k||(k={});var h=d.length-c;var a={pos:b.pos+h,ids:hY(d,h)};for(var e=0;e<h;e++)k[b.pos+e+"-"+d[e].id]=!0}else a={pos:b.pos,ids:hY(d,0)};f=f?jY(f,a,!0).tree:[a]}k&&ou(f,function(n,q,r){delete k[q+"-"+r]});return{tree:f,revs:k?Object.keys(k):[]}}function kY(g,c,k){g=jY(g,c);k=sfa(g.tree,k);return{tree:k.tree,stemmedRevs:k.revs,conflicts:g.conflicts}}function tfa(g){return g.ids}function Vq(g,c){c||(c=nu(g));c=c.substring(c.indexOf("-")+1);
g=g.rev_tree.map(tfa);for(var k;k=g.pop();){if(k[0]===c)return!!k[1].deleted;g=g.concat(k[2])}}function pu(g){return/^_local/.test(g)}function ufa(g,c){for(var k=c.rev_tree.slice(),f;f=k.pop();){var l=f.pos,p=f.ids,b=p[0],d=p[1];p=p[2];var h=0===p.length;f=f.history?f.history.slice():[];f.push({id:b,pos:l,opts:d});if(h)for(d=0,h=f.length;d<h;d++){var a=f[d];if(a.pos+"-"+a.id===g)return l+"-"+b}b=0;for(d=p.length;b<d;b++)k.push({pos:l+1,ids:p[b],history:f})}throw Error("Unable to resolve latest revision for id "+
c.id+", rev "+g);}function jA(g,c,k){function f(){l.cancel()}Fm.EventEmitter.call(this);var l=this;this.db=g;c=c?Kk(c):{};var p=c.complete=TX(function(d,h){d?(h=l,0<("listenerCount"in h?h.listenerCount("error"):Fm.EventEmitter.listenerCount(h,"error"))&&l.emit("error",d)):l.emit("complete",h);l.removeAllListeners();g.removeListener("destroyed",f)});k&&(l.on("complete",function(d){k(null,d)}),l.on("error",k));g.once("destroyed",f);c.onChange=function(d,h,a){if(!l.isCancelled)try{l.emit("change",d,
h,a)}catch(e){In("error",'Error in .on("change", function):',e)}};var b=new Promise(function(d,h){c.complete=function(a,e){a?h(a):d(e)}});l.once("cancel",function(){g.removeListener("destroyed",f);c.complete(null,{status:"cancelled"})});this.then=b.then.bind(b);this["catch"]=b["catch"].bind(b);this.then(function(d){p(null,d)},p);g.taskqueue.isReady?l.validateChanges(c):g.taskqueue.addTask(function(d){d?c.complete(d):l.isCancelled?l.emit("cancel"):l.validateChanges(c)})}function vfa(g,c,k){var f=[{rev:g._rev}];
"all_docs"===k.style&&(f=HM(c.rev_tree).map(function(l){return{rev:l.rev}}));f={id:c.id,changes:f,doc:g};Vq(c,g._rev)&&(f.deleted=!0);k.conflicts&&(f.doc._conflicts=IM(c),f.doc._conflicts.length||delete f.doc._conflicts);return f}function JM(g,c){return function(k,f){k||f[0]&&f[0].error?(k=k||f[0],k.docId=c,g(k)):g(null,f.length?f[0]:f)}}function wfa(g){for(var c=0;c<g.length;c++){var k=g[c];if(k._deleted)delete k._attachments;else if(k._attachments)for(var f=Object.keys(k._attachments),l=0;l<f.length;l++){var p=
f[l];k._attachments[p]=hA(k._attachments[p],"data digest content_type length revpos stub".split(" "))}}}function xfa(g,c){var k=g._id;var f=c._id;k=k<f?-1:k>f?1:0;if(0!==k)return k;g=g._revisions?g._revisions.start:0;c=c._revisions?c._revisions.start:0;return g<c?-1:g>c?1:0}function yfa(g){var c={},k=[];ou(g,function(f,l,p,b){l=l+"-"+p;f&&(c[l]=0);void 0!==b&&k.push({from:b,to:l});return l});k.reverse();k.forEach(function(f){c[f.from]=void 0===c[f.from]?1+c[f.to]:Math.min(c[f.from],1+c[f.to])});return c}
function zfa(g){var c="limit"in g?g.keys.slice(g.skip,g.limit+g.skip):0<g.skip?g.keys.slice(g.skip):g.keys;g.keys=c;g.skip=0;delete g.limit;g.descending&&(c.reverse(),g.descending=!1)}function lY(g){var c=g._compactionQueue[0],k=c.opts,f=c.callback;g.get("_local/compaction").catch(function(){return!1}).then(function(l){l&&l.last_seq&&(k.last_seq=l.last_seq);g._compact(k,function(p,b){p?f(p):f(null,b);Mp(function(){g._compactionQueue.shift();g._compactionQueue.length&&lY(g)})})})}function Aj(){Fm.EventEmitter.call(this);
for(var g in Aj.prototype)"function"===typeof this[g]&&(this[g]=this[g].bind(this))}function kA(){this.failed=this.isReady=!1;this.queue=[]}function Afa(g,c){var k=g.match(/([a-z-]*):\/\/(.*)/);if(k)return{name:/https?/.test(k[1])?k[1]+"://"+k[2]:k[2],adapter:k[1]};var f=rh.adapters,l=rh.preferredAdapters;k=rh.prefix;c=c.adapter;if(!c)for(var p=0;p<l.length;++p)if(c=l[p],"idb"===c&&"websql"in f&&iA&&localStorage["_pouch__websqldb_"+k+g])In("log",'PouchDB is downgrading "'+g+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');
else break;f=f[c];return{name:(f&&"use_prefix"in f?f.use_prefix:1)?k+g:g,adapter:c}}function Bfa(g){function c(f){g.removeListener("closed",k);f||g.constructor.emit("destroyed",g.name)}function k(){g.removeListener("destroyed",c);g.constructor.emit("unref",g)}g.once("destroyed",c);g.once("closed",k);g.constructor.emit("ref",g)}function rh(g,c){if(!(this instanceof rh))return new rh(g,c);var k=this;c=c||{};g&&"object"===typeof g&&(c=g,g=c.name,delete c.name);void 0===c.deterministic_revs&&(c.deterministic_revs=
!0);this.__opts=c=Kk(c);k.auto_compaction=c.auto_compaction;k.prefix=rh.prefix;if("string"!==typeof g)throw Error("Missing/invalid DB name");var f=Afa((c.prefix||"")+g,c);c.name=f.name;c.adapter=c.adapter||f.adapter;k.name=g;k._adapter=c.adapter;rh.emit("debug",["adapter","Picked adapter: ",c.adapter]);if(!rh.adapters[c.adapter]||!rh.adapters[c.adapter].valid())throw Error("Invalid Adapter: "+c.adapter);Aj.call(k);k.taskqueue=new kA;k.adapter=c.adapter;rh.adapters[c.adapter].call(k,c,function(l){if(l)return k.taskqueue.fail(l);
Bfa(k);k.emit("created",k);rh.emit("created",k.name);k.taskqueue.ready(k)})}function mY(g,c){for(var k=0,f=c.length;k<f&&(g=g[c[k]],g);k++);return g}function nY(g){for(var c=[],k="",f=0,l=g.length;f<l;f++){var p=g[f];"."===p?0<f&&"\\"===g[f-1]?k=k.substring(0,k.length-1)+".":(c.push(k),k=""):k+=p}c.push(k);return c}function Cfa(g){return g[Object.keys(g)[0]]}function lA(g){var c={};g.forEach(function(k){Object.keys(k).forEach(function(f){var l=k[f];"object"!==typeof l&&(l={$eq:l});if(-1<oY.indexOf(f))c[f]=
l instanceof Array?l.map(function(b){return lA([b])}):lA([l]);else{var p=c[f]=c[f]||{};Object.keys(l).forEach(function(b){var d=l[b];"$gt"===b||"$gte"===b?"undefined"===typeof p.$eq&&("undefined"!==typeof p.$gte?"$gte"===b?d>p.$gte&&(p.$gte=d):d>=p.$gte&&(delete p.$gte,p.$gt=d):"undefined"!==typeof p.$gt?"$gte"===b?d>p.$gt&&(delete p.$gt,p.$gte=d):d>p.$gt&&(p.$gt=d):p[b]=d):"$lt"===b||"$lte"===b?"undefined"===typeof p.$eq&&("undefined"!==typeof p.$lte?"$lte"===b?d<p.$lte&&(p.$lte=d):d<=p.$lte&&(delete p.$lte,
p.$lt=d):"undefined"!==typeof p.$lt?"$lte"===b?d<p.$lt&&(delete p.$lt,p.$lte=d):d<p.$lt&&(p.$lt=d):p[b]=d):"$ne"===b?"$ne"in p?p.$ne.push(d):p.$ne=[d]:"$eq"===b?(delete p.$gt,delete p.$gte,delete p.$lt,delete p.$lte,delete p.$ne,p.$eq=d):p[b]=d})}})});return c}function pY(g){for(var c in g){if(Array.isArray(g))for(var k in g)g[k].$and&&(g[k]=lA(g[k].$and));var f=g[c];"object"===typeof f&&pY(f)}return g}function qY(g,c){for(var k in g){"$and"===k&&(c=!0);var f=g[k];"object"===typeof f&&(c=qY(f,c))}return c}
function Dfa(g){var c=Kk(g);g=!1;qY(c,!1)&&(c=pY(c),"$and"in c&&(c=lA(c.$and)),g=!0);["$or","$nor"].forEach(function(b){b in c&&c[b].forEach(function(d){for(var h=Object.keys(d),a=0;a<h.length;a++){var e=h[a],n=d[e];if("object"!==typeof n||null===n)d[e]={$eq:n}}})});"$not"in c&&(c.$not=lA([c.$not]));for(var k=Object.keys(c),f=0;f<k.length;f++){var l=k[f],p=c[l];"object"!==typeof p||null===p?p={$eq:p}:"$ne"in p&&!g&&(p.$ne=[p.$ne]);c[l]=p}return c}function dl(g,c){if(g===c)return 0;g=qu(g);c=qu(c);
var k=KM(g),f=KM(c);if(0!==k-f)return k-f;switch(typeof g){case "number":return g-c;case "boolean":return g<c?-1:1;case "string":return g===c?0:g>c?1:-1}if(Array.isArray(g))a:{k=Math.min(g.length,c.length);for(f=0;f<k;f++){var l=dl(g[f],c[f]);if(0!==l){g=l;break a}}g=g.length===c.length?0:g.length>c.length?1:-1}else a:{k=Object.keys(g);f=Object.keys(c);l=Math.min(k.length,f.length);for(var p=0;p<l;p++){var b=dl(k[p],f[p]);if(0!==b){g=b;break a}b=dl(g[k[p]],c[f[p]]);if(0!==b){g=b;break a}}g=k.length===
f.length?0:k.length>f.length?1:-1}return g}function qu(g){switch(typeof g){case "undefined":return null;case "number":if(Infinity===g||-Infinity===g||isNaN(g))return null;break;case "object":var c=g;if(Array.isArray(g)){var k=g.length;g=Array(k);for(var f=0;f<k;f++)g[f]=qu(c[f])}else{if(g instanceof Date)return g.toJSON();if(null!==g)for(k in g={},c)c.hasOwnProperty(k)&&(f=c[k],"undefined"!==typeof f&&(g[k]=qu(f)))}}return g}function Efa(g){if(null!==g)switch(typeof g){case "boolean":return g?1:0;
case "number":if(0===g)g="1";else{var c=g.toExponential().split(/e\+?/),k=parseInt(c[1],10);g=0>g;k=((g?-k:k)- -324).toString();for(var f="",l=3-k.length;f.length<l;)f+="0";k=(g?"0":"2")+(""+(f+k));c=Math.abs(parseFloat(c[0]));g&&(c=10-c);g=c.toFixed(20);g=g.replace(/\.?0+$/,"");g=k+=""+g}return g;case "string":return g.replace(/\u0002/g,"\u0002\u0002").replace(/\u0001/g,"\u0001\u0002").replace(/\u0000/g,"\u0001\u0001");case "object":var p=Array.isArray(g);c=p?g:Object.keys(g);k=-1;f=c.length;l="";
if(p)for(;++k<f;)l+=No(c[k]);else for(;++k<f;)p=c[k],l+=No(p)+No(g[p]);return l}return""}function No(g){g=qu(g);return KM(g)+""+Efa(g)+"\x00"}function KM(g){var c=["boolean","number","string","object"].indexOf(typeof g);if(~c)return null===g?1:Array.isArray(g)?5:3>c?c+2:c+3;if(Array.isArray(g))return 5}function Ffa(g){function c(k){return g.map(function(f){f=Object.keys(f)[0];f=nY(f);return mY(k,f)})}return function(k,f){var l=c(k.doc),p=c(f.doc);l=dl(l,p);if(0!==l)return l;k=k.doc._id;f=f.doc._id;
return k<f?-1:k>f?1:0}}function Gfa(g,c,k){g=g.filter(function(l){return ox(l.doc,c.selector,k)});if(c.sort){var f=Ffa(c.sort);g=g.sort(f);"string"!==typeof c.sort[0]&&"desc"===Cfa(c.sort[0])&&(g=g.reverse())}if("limit"in c||"skip"in c)f=c.skip||0,g=g.slice(f,("limit"in c?c.limit:g.length)+f);return g}function ox(g,c,k){return k.every(function(f){var l=c[f],p=nY(f),b=mY(g,p);return-1<oY.indexOf(f)?Hfa(f,l,g):LM(l,g,p,b)})}function LM(g,c,k,f){return g?"object"===typeof g?Object.keys(g).every(function(l){var p=
g[l];if(!rY[l])throw Error('unknown operator "'+l+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return rY[l](c,p,k,f)}):g===f:!0}function Hfa(g,c,k){return"$or"===g?c.some(function(f){return ox(k,f,Object.keys(f))}):"$not"===g?!ox(k,c,Object.keys(c)):!c.find(function(f){return ox(k,f,Object.keys(f))})}function mA(g){return"undefined"!==typeof g&&null!==g}function ru(g){return"undefined"!==typeof g}function sY(g,
c){return c.some(function(k){return g instanceof Array?-1<g.indexOf(k):g===k})}function Ifa(g,c){return c.every(function(k){return-1<g.indexOf(k)})}function Jfa(g,c){switch(c){case "null":return null===g;case "boolean":return"boolean"===typeof g;case "number":return"number"===typeof g;case "string":return"string"===typeof g;case "array":return g instanceof Array;case "object":return"[object Object]"==={}.toString.call(g)}throw Error(c+" not supported as a type.Please use one of object, string, array, number, boolean or null.");
}function Kfa(g,c){if(g.selector&&g.filter&&"_selector"!==g.filter)return c(Error('selector invalid for filter "'+("string"===typeof g.filter?g.filter:"function")+'"'));c()}function Lfa(g){g.view&&!g.filter&&(g.filter="_view");g.selector&&!g.filter&&(g.filter="_selector");g.filter&&"string"===typeof g.filter&&("_view"===g.filter?g.view=$X(g.view):g.filter=$X(g.filter))}function Mfa(g,c){return c.filter&&"string"===typeof c.filter&&!c.doc_ids&&!Lp(g.db)}function Nfa(g,c){var k=c.complete;if("_view"===
c.filter){if(!c.view||"string"!==typeof c.view){var f=yh($E,"`view` filter parameter not found or invalid.");return k(f)}var l=AM(c.view);g.db.get("_design/"+l[0],function(b,d){if(g.isCancelled)return k(null,{status:"cancelled"});if(b)return k(nx(b));b=d&&d.views&&d.views[l[1]]&&d.views[l[1]].map;if(!b)return k(yh(Oo,d.views?"missing json key: "+l[1]:"missing json key: views"));d=['return function(doc) {\n  "use strict";\n  var emitted = false;\n  var emit = function (a, b) {\n    emitted = true;\n  };',
"  var view = "+b+";","  view(doc);\n  if (emitted) {\n    return true;\n  }\n};"].join("\n");d=BM(d,{});c.filter=d;g.doChanges(c)})}else if(c.selector)c.filter=function(b){var d=c.selector;if("object"!==typeof d)throw Error("Selector error: expected a JSON object");d=Dfa(d);return(b=Gfa([{doc:b}],{selector:d},Object.keys(d)))&&1===b.length},g.doChanges(c);else{var p=AM(c.filter);g.db.get("_design/"+p[0],function(b,d){if(g.isCancelled)return k(null,{status:"cancelled"});if(b)return k(nx(b));b=d&&
d.filters&&d.filters[p[1]];if(!b)return k(yh(Oo,d&&d.filters?"missing json key: "+p[1]:"missing json key: filters"));c.filter=BM('"use strict";\nreturn '+b+";",{});g.doChanges(c)})}}function tY(g){return g.reduce(function(c,k){c[k]=!0;return c},{})}function uY(g){if(!/^\d+-/.test(g))return yh(vY);var c=g.indexOf("-"),k=g.substring(0,c);g=g.substring(c+1);return{prefix:parseInt(k,10),id:g}}function wY(g,c,k){k||(k={deterministic_revs:!0});var f={status:"available"};g._deleted&&(f.deleted=!0);if(c){g._id||
(g._id=dF());var l=eY(g,k.deterministic_revs);if(g._rev){c=uY(g._rev);if(c.error)return c;g._rev_tree=[{pos:c.prefix,ids:[c.id,{status:"missing"},[[l,f,[]]]]}];var p=c.prefix+1}else g._rev_tree=[{pos:1,ids:[l,f,[]]}],p=1}else{if(g._revisions){l=g._revisions;p=l.start-l.ids.length+1;l=l.ids;c=[l[0],f,[]];k=1;for(var b=l.length;k<b;k++)c=[l[k],{status:"missing"},[c]];g._rev_tree=[{pos:p,ids:c}];p=g._revisions.start;l=g._revisions.ids[0]}if(!g._rev_tree){c=uY(g._rev);if(c.error)return c;p=c.prefix;l=
c.id;g._rev_tree=[{pos:p,ids:[l,f,[]]}]}}YX(g._id);g._rev=p+"-"+l;f={metadata:{},data:{}};for(var d in g)if(Object.prototype.hasOwnProperty.call(g,d)){if((p="_"===d[0])&&!Ofa[d])throw g=yh(xY,d),g.message=xY.message+": "+d,g;p&&!Pfa[d]?f.metadata[d.slice(1)]=g[d]:f.data[d]=g[d]}return f}function Qfa(g,c,k){try{var f=atob(g.data)}catch(l){f={error:yh(yY,"Attachment is not a valid base64 string")}}if(f.error)return k(f.error);g.length=f.length;g.data="blob"===c?DM(f,g.content_type):"base64"===c?btoa(f):
f;GM(f,function(l){g.digest="md5-"+l;k()})}function Rfa(g,c,k){GM(g.data,function(f){g.digest="md5-"+f;g.length=g.data.size||g.data.length||0;"binary"===c?dY(g.data,function(l){g.data=l;k()}):"base64"===c?FM(g.data,function(l){g.data=l;k()}):k()})}function Sfa(g,c,k){if(g.stub)return k();"string"===typeof g.data?Qfa(g,c,k):Rfa(g,c,k)}function Tfa(g,c,k){function f(){l++;g.length===l&&(p?k(p):k())}if(!g.length)return k();var l=0,p;g.forEach(function(b){function d(n){p=n;a++;a===h.length&&f()}var h=
b.data&&b.data._attachments?Object.keys(b.data._attachments):[],a=0;if(!h.length)return f();for(var e in b.data._attachments)b.data._attachments.hasOwnProperty(e)&&Sfa(b.data._attachments[e],c,d)})}function Ufa(g,c,k,f,l,p,b,d,h){g=g||1E3;var a=d.new_edits,e=new bn,n=0,q=c.length;c.forEach(function(r,v){if(r._id&&pu(r._id))k[r._deleted?"_removeLocal":"_putLocal"](r,{ctx:l},function(D,E){p[v]=D||E;++n===q&&h&&h()});else{var y=r.metadata.id;e.has(y)?(q--,e.get(y).push([r,v])):e.set(y,[[r,v]])}});e.forEach(function(r,
v){function y(){++E<r.length?D():++n===q&&h&&h()}function D(){var I=r[E],K=I[0];I=I[1];if(f.has(v)){var P=g,N=f.get(v);b:{var aa=K.metadata.rev;var m=N.rev_tree.slice();var t=aa.split("-");aa=parseInt(t[0],10);t=t[1];for(var u;u=m.pop();){if(u.pos===aa&&u.ids[0]===t){m=!0;break b}for(var B=u.ids[2],A=0,H=B.length;A<H;A++)m.push({pos:u.pos+1,ids:B[A]})}m=!1}m&&!a?(p[I]=K,y()):(t=N.winningRev||nu(N),m="deleted"in N?N.deleted:Vq(N,t),aa="deleted"in K.metadata?K.metadata.deleted:Vq(K.metadata),u=/^1-/.test(K.metadata.rev),
m&&!aa&&a&&u&&(u=K.data,u._rev=t,u._id=K.metadata.id,K=wY(u,a)),t=kY(N.rev_tree,K.metadata.rev_tree[0],P),a&&(m&&aa&&"new_leaf"!==t.conflicts||!m&&"new_leaf"!==t.conflicts||m&&!aa&&"new_branch"===t.conflicts)?(K=yh(px),p[I]=K,y()):(P=K.metadata.rev,K.metadata.rev_tree=t.tree,K.stemmedRevs=t.stemmedRevs||[],N.rev_map&&(K.metadata.rev_map=N.rev_map),N=nu(K.metadata),aa=Vq(K.metadata,N),m=m===aa?0:m<aa?-1:1,P=P===N?aa:Vq(K.metadata,P),b(K,N,aa,P,!0,m,I,y)))}else N=kY([],K.metadata.rev_tree[0],g),K.metadata.rev_tree=
N.tree,K.stemmedRevs=N.stemmedRevs||[],N=nu(K.metadata),P=Vq(K.metadata,N),"was_delete"in d&&P?(p[I]=yh(Oo,"deleted"),y()):a&&"missing"===K.metadata.rev_tree[0].ids[1].status?(K=yh(px),p[I]=K,y()):b(K,N,P,P,!1,P?0:1,I,y)}var E=0;D()})}function Np(g){return function(c){var k="unknown_error";c.target&&c.target.error&&(k=c.target.error.name||c.target.error.message);g(yh(MM,k,c.type))}}function NM(g,c,k){try{var f=JSON.stringify(g)}catch(l){f=zY.stringify(g)}return{data:f,winningRev:c,deletedOrLocal:k?
"1":"0",seq:g.seq,id:g.id}}function su(g){if(!g)return null;var c=g.data;try{var k=JSON.parse(c)}catch(f){k=zY.parse(c)}k.winningRev=g.winningRev;k.deleted="1"===g.deletedOrLocal;k.seq=g.seq;return k}function eF(g){if(!g)return g;var c=g._doc_id_rev.lastIndexOf(":");g._id=g._doc_id_rev.substring(0,c-1);g._rev=g._doc_id_rev.substring(c+1);delete g._doc_id_rev;return g}function AY(g,c,k,f){k?g?"string"!==typeof g?f(g):f(EM(g,c)):f(CM([""],{type:c})):g?"string"!==typeof g?cY(g,function(l){f(btoa(l))}):
f(g):f("")}function BY(g,c,k,f){function l(d,h){var a=d._attachments[h];d=a.digest;k.objectStore("attach-store").get(d).onsuccess=function(e){a.body=e.target.result.body;++b===p.length&&f&&f()}}var p=Object.keys(g._attachments||{});if(!p.length)return f&&f();var b=0;p.forEach(function(d){c.attachments&&c.include_docs?l(g,d):(g._attachments[d].stub=!0,++b===p.length&&f&&f())})}function OM(g,c){return Promise.all(g.map(function(k){if(k.doc&&k.doc._attachments){var f=Object.keys(k.doc._attachments);
return Promise.all(f.map(function(l){var p=k.doc._attachments[l];if("body"in p){var b=p.body,d=p.content_type;return new Promise(function(h){AY(b,d,c,function(a){k.doc._attachments[l]=qx(hA(p,["digest","content_type"]),{data:a});h()})})}}))}}))}function CY(g,c,k){function f(){l.length&&l.forEach(function(a){d.index("digestSeq").count(IDBKeyRange.bound(a+"::",a+"::\uffff",!1,!1)).onsuccess=function(e){e.target.result||b.delete(a)}})}var l=[],p=k.objectStore("by-sequence"),b=k.objectStore("attach-store"),
d=k.objectStore("attach-seq-store"),h=g.length;g.forEach(function(a){p.index("_doc_id_rev").getKey(c+"::"+a).onsuccess=function(e){e=e.target.result;"number"!==typeof e?(h--,h||f()):(p.delete(e),d.index("seq").openCursor(IDBKeyRange.only(e)).onsuccess=function(n){if(n=n.target.result){var q=n.value.digestSeq.split("::")[0];l.push(q);d.delete(n.primaryKey);n.continue()}else h--,h||f()})}})}function Po(g,c,k){try{return{txn:g.transaction(c,k)}}catch(f){return{error:f}}}function Vfa(g,c,k,f,l,p){function b(){var Ga=
Po(l,"document-store by-sequence attach-store local-store attach-seq-store meta-store".split(" "),"readwrite");if(Ga.error)return p(Ga.error);P=Ga.txn;P.onabort=Np(p);P.ontimeout=Np(p);P.oncomplete=n;N=P.objectStore("document-store");aa=P.objectStore("by-sequence");m=P.objectStore("attach-store");t=P.objectStore("attach-seq-store");u=P.objectStore("meta-store");u.get("meta-store").onsuccess=function(na){A=na.target.result;a()};r(function(na){if(na)return wa=!0,p(na);e()})}function d(){L=!0;a()}function h(){Ufa(g.revs_limit,
K,f,Y,P,T,v,k,d)}function a(){A&&L&&(A.docCount+=U,u.put(A))}function e(){function Ga(Oa){(Oa=su(Oa.target.result))&&Y.set(Oa.id,Oa);++na===K.length&&h()}if(K.length)for(var na=0,ea=0,da=K.length;ea<da;ea++){var ia=K[ea];ia._id&&pu(ia._id)?++na===K.length&&h():N.get(ia.metadata.id).onsuccess=Ga}}function n(){wa||(nA.notify(f._meta.name),p(null,T))}function q(Ga,na){m.get(Ga).onsuccess=function(ea){ea.target.result?na():(ea=yh(Wfa,"unknown stub attachment with digest "+Ga),ea.status=412,na(ea))}}function r(Ga){var na=
[];K.forEach(function(ia){ia.data&&ia.data._attachments&&Object.keys(ia.data._attachments).forEach(function(Oa){Oa=ia.data._attachments[Oa];Oa.stub&&na.push(Oa.digest)})});if(!na.length)return Ga();var ea=0,da;na.forEach(function(ia){q(ia,function(Oa){Oa&&!da&&(da=Oa);++ea===na.length&&Ga(da)})})}function v(Ga,na,ea,da,ia,Oa,Va,eb){Ga.metadata.winningRev=na;Ga.metadata.deleted=ea;var Sa=Ga.data;Sa._id=Ga.metadata.id;Sa._rev=Ga.metadata.rev;da&&(Sa._deleted=!0);if(Sa._attachments&&Object.keys(Sa._attachments).length)return D(Ga,
na,ea,ia,Va,eb);U+=Oa;a();y(Ga,na,ea,ia,Va,eb)}function y(Ga,na,ea,da,ia,Oa){function Va(sa){var Da=Ga.stemmedRevs||[];da&&f.auto_compaction&&(Da=Da.concat(pfa(Ga.metadata)));Da&&Da.length&&CY(Da,Ga.metadata.id,P);Bb.seq=sa.target.result;sa=NM(Bb,na,ea);N.put(sa).onsuccess=eb}function eb(){T[ia]={ok:!0,id:Bb.id,rev:Bb.rev};Y.set(Ga.metadata.id,Ga.metadata);E(Ga,Bb.seq,Oa)}var Sa=Ga.data,Bb=Ga.metadata;Sa._doc_id_rev=Bb.id+"::"+Bb.rev;delete Sa._id;delete Sa._rev;var Z=aa.put(Sa);Z.onsuccess=Va;Z.onerror=
function(sa){sa.preventDefault();sa.stopPropagation();aa.index("_doc_id_rev").getKey(Sa._doc_id_rev).onsuccess=function(Da){aa.put(Sa,Da.target.result).onsuccess=Va}}}function D(Ga,na,ea,da,ia,Oa){function Va(){Sa===Bb.length&&y(Ga,na,ea,da,ia,Oa)}function eb(){Sa++;Va()}var Sa=0,Bb=Object.keys(Ga.data._attachments);Bb.forEach(function(Z){Z=Ga.data._attachments[Z];if(Z.stub)Sa++,Va();else{var sa=Z.data;delete Z.data;Z.revpos=parseInt(na,10);I(Z.digest,sa,eb)}})}function E(Ga,na,ea){function da(){++Oa===
Va.length&&ea()}function ia(Sa){Sa=t.put({seq:na,digestSeq:Ga.data._attachments[Sa].digest+"::"+na});Sa.onsuccess=da;Sa.onerror=function(Bb){Bb.preventDefault();Bb.stopPropagation();da()}}var Oa=0,Va=Object.keys(Ga.data._attachments||{});if(!Va.length)return ea();for(var eb=0;eb<Va.length;eb++)ia(Va[eb])}function I(Ga,na,ea){m.count(Ga).onsuccess=function(da){if(da.target.result)return ea();m.put({digest:Ga,body:na}).onsuccess=ea}}var K=c.docs,P,N,aa,m,t,u,B,A;c=0;for(var H=K.length;c<H;c++){var F=
K[c];F._id&&pu(F._id)||(F=K[c]=wY(F,k.new_edits,g),F.error&&!B&&(B=F))}if(B)return p(B);var L=!1,U=0,T=Array(K.length),Y=new bn,wa=!1;Tfa(K,f._meta.blobSupport?"blob":"base64",function(Ga){if(Ga)return p(Ga);b()})}function DY(g,c,k,f,l){function p(q){e=q.target.result;a&&l(a,e,n)}function b(q){a=q.target.result;e&&l(a,e,n)}function d(){if(!a.length)return l();var q=a[a.length-1];if(c&&c.upper)try{var r=IDBKeyRange.bound(q,c.upper,!0,c.upperOpen)}catch(v){if("DataError"===v.name&&0===v.code)return l()}else r=
IDBKeyRange.lowerBound(q,!0);c=r;e=a=null;g.getAll(c,f).onsuccess=p;g.getAllKeys(c,f).onsuccess=b}function h(q){q=q.target.result;if(!q)return l();l([q.key],[q.value],q)}-1===f&&(f=1E3);var a,e;if("function"===typeof g.getAll&&"function"===typeof g.getAllKeys&&1<f&&!k){var n={"continue":d};g.getAll(c,f).onsuccess=p;g.getAllKeys(c,f).onsuccess=b}else k?g.openCursor(c,"prev").onsuccess=h:g.openCursor(c).onsuccess=h}function Xfa(g,c,k){if("function"===typeof g.getAll)g.getAll(c).onsuccess=k;else{var f=
[];g.openCursor(c).onsuccess=function(l){(l=l.target.result)?(f.push(l.value),l.continue()):k({target:{result:f}})}}}function Yfa(g,c,k){var f=Array(g.length),l=0;g.forEach(function(p,b){c.get(p).onsuccess=function(d){f[b]=d.target.result?d.target.result:{key:p,error:"not_found"};l++;l===g.length&&k(g,f,{})}})}function Zfa(g,c,k,f,l){try{if(g&&c)return l?IDBKeyRange.bound(c,g,!k,!1):IDBKeyRange.bound(g,c,!1,!k);if(g)return l?IDBKeyRange.upperBound(g):IDBKeyRange.lowerBound(g);if(c)return l?IDBKeyRange.lowerBound(c,
!k):IDBKeyRange.upperBound(c,!k);if(f)return IDBKeyRange.only(f)}catch(p){return{error:p}}return null}function $fa(g,c,k){function f(m,t){m.openCursor(null,"prev").onsuccess=function(u){u=u.target.result;var B=void 0;u&&u.key&&(B=u.key);return t({target:{result:[B]}})}}function l(m,t,u){K.get(m.id+"::"+u).onsuccess=function(B){t.doc=eF(B.target.result)||{};g.conflicts&&(B=IM(m),B.length&&(t.doc._conflicts=B));BY(t.doc,g,I)}}function p(m){for(var t=0,u=m.length;t<u&&P.length!==v;t++){var B=m[t];if(B.error&&
q)P.push(B);else{var A=su(B);B=A.winningRev;var H={id:A.id,key:A.id,value:{rev:B}};A.deleted?q&&(P.push(H),H.value.deleted=!0,H.doc=null):0>=r--&&(P.push(H),g.include_docs&&l(A,H,B))}}}function b(m,t,u){u&&(p(t),P.length<v&&u.continue())}function d(m){m=m.target.result;g.descending&&(m=m.reverse());p(m)}function h(){var m={total_rows:N,offset:g.skip,rows:P};g.update_seq&&void 0!==aa&&(m.update_seq=aa);k(null,m)}var a="startkey"in g?g.startkey:!1,e="endkey"in g?g.endkey:!1,n="key"in g?g.key:!1,q="keys"in
g?g.keys:!1,r=g.skip||0,v="number"===typeof g.limit?g.limit:-1,y=!1!==g.inclusive_end,D,E;if(!q&&(E=(D=Zfa(a,e,y,n,g.descending))&&D.error)&&("DataError"!==E.name||0!==E.code))return k(yh(MM,E.name,E.message));a=["document-store","by-sequence","meta-store"];g.attachments&&a.push("attach-store");c=Po(c,a,"readonly");if(c.error)return k(c.error);var I=c.txn;I.oncomplete=function(){g.attachments?OM(P,g.binary).then(h):h()};I.onabort=Np(k);c=I.objectStore("document-store");a=I.objectStore("by-sequence");
e=I.objectStore("meta-store");var K=a.index("_doc_id_rev"),P=[],N,aa;e.get("meta-store").onsuccess=function(m){N=m.target.result.docCount};g.update_seq&&f(a,function(m){m.target.result&&0<m.target.result.length&&(aa=m.target.result[0])});if(!E&&0!==v){if(q)return Yfa(g.keys,c,b);if(-1===v)return Xfa(c,D,d);DY(c,D,g.descending,v+r,b)}}function aga(g){return(new Promise(function(c){var k=CM([""]);k=g.objectStore("detect-blob-support").put(k,"key");k.onsuccess=function(){var f=navigator.userAgent.match(/Chrome\/(\d+)/),
l=navigator.userAgent.match(/Edge\//);c(l||!f||43<=parseInt(f[1],10))};k.onerror=g.onabort=function(f){f.preventDefault();f.stopPropagation();c(!1)}})).catch(function(){return!1})}function bga(g,c){g.objectStore("document-store").index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(k){c(k.target.result)}}function cga(g,c,k,f){try{g(c,k)}catch(l){f.emit("error",l)}}function EY(){!PM&&QM.length&&(PM=!0,QM.shift()())}function dga(g,c,k){QM.push(function(){g(function(f,l){cga(c,f,l,
k);PM=!1;Mp(function(){EY()})})});EY()}function ega(g,c,k,f){function l(I,K,P,N){if(P.seq!==K)return N();if(P.winningRev===I._rev)return N(P,I);E.get(I._id+"::"+P.winningRev).onsuccess=function(aa){N(P,eF(aa.target.result))}}function p(I,K,P){if(h&&!h.has(I._id))return P();var N=v.get(I._id);if(N)return l(I,K,N,P);D.get(I._id).onsuccess=function(aa){N=su(aa.target.result);v.set(I._id,N);l(I,K,N,P)}}function b(){g.complete(null,{results:n,last_seq:a})}g=Kk(g);if(g.continuous){var d=k+":"+dF();nA.addListener(k,
d,c,g);nA.notify(k);return{cancel:function(){nA.removeListener(k,d)}}}var h=g.doc_ids&&new oA(g.doc_ids);g.since=g.since||0;var a=g.since,e="limit"in g?g.limit:-1;0===e&&(e=1);var n=[],q=0,r=zM(g),v=new bn;c=["document-store","by-sequence"];g.attachments&&c.push("attach-store");f=Po(f,c,"readonly");if(f.error)return g.complete(f.error);var y=f.txn;y.onabort=Np(g.complete);y.oncomplete=function(){!g.continuous&&g.attachments?OM(n).then(b):b()};f=y.objectStore("by-sequence");var D=y.objectStore("document-store");
var E=f.index("_doc_id_rev");c=g.since&&!g.descending?IDBKeyRange.lowerBound(g.since,!0):null;DY(f,c,g.descending,e,function(I,K,P){function N(B,A){var H=g.processChange(A,B,g);a=H.seq=B.seq;B=r(H);if("object"===typeof B)return Promise.reject(B);if(!B)return Promise.resolve();q++;g.return_docs&&n.push(H);return g.attachments&&g.include_docs?new Promise(function(F){BY(A,g,y,function(){OM([H],g.binary).then(function(){F(H)})})}):Promise.resolve(H)}function aa(){for(var B=[],A=0,H=m.length;A<H&&q!==
e;A++){var F=m[A];F&&B.push(N(t[A],F))}Promise.all(B).then(function(L){for(var U=0,T=L.length;U<T;U++)if(L[U])g.onChange(L[U])}).catch(g.complete);q!==e&&P.continue()}if(P&&I.length){var m=Array(I.length),t=Array(I.length),u=0;K.forEach(function(B,A){B=eF(B);p(B,I[A],function(H,F){t[A]=H;m[A]=F;++u===I.length&&aa()})})}})}function FY(g,c){var k=this;dga(function(f){fga(k,g,f)},c,k.constructor)}function fga(g,c,k){function f(q){var r=q.createObjectStore("document-store",{keyPath:"id"});q.createObjectStore("by-sequence",
{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0});q.createObjectStore("attach-store",{keyPath:"digest"});q.createObjectStore("meta-store",{keyPath:"id",autoIncrement:!1});q.createObjectStore("detect-blob-support");r.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1});q.createObjectStore("local-store",{keyPath:"_id"});q=q.createObjectStore("attach-seq-store",{autoIncrement:!0});q.createIndex("seq","seq");q.createIndex("digestSeq","digestSeq",{unique:!0})}function l(q,
r){var v=q.objectStore("document-store");v.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1});v.openCursor().onsuccess=function(y){if(y=y.target.result){var D=y.value,E=Vq(D);D.deletedOrLocal=E?"1":"0";v.put(D);y.continue()}else r()}}function p(q,r){var v=q.objectStore("local-store"),y=q.objectStore("document-store"),D=q.objectStore("by-sequence");y.openCursor().onsuccess=function(E){var I=E.target.result;if(I){var K=I.value;E=K.id;var P=pu(E);K=nu(K);if(P){var N=E+"::"+K;P=E+"::";K=E+"::~";
E=D.index("_doc_id_rev");P=IDBKeyRange.bound(P,K,!1,!1);var aa=E.openCursor(P);aa.onsuccess=function(m){(aa=m.target.result)?(m=aa.value,m._doc_id_rev===N&&v.put(m),D.delete(aa.primaryKey),aa.continue()):(y.delete(I.primaryKey),I.continue())}}else I.continue()}else r&&r()}}function b(q){q=q.createObjectStore("attach-seq-store",{autoIncrement:!0});q.createIndex("seq","seq");q.createIndex("digestSeq","digestSeq",{unique:!0})}function d(q,r){var v=q.objectStore("by-sequence"),y=q.objectStore("attach-store"),
D=q.objectStore("attach-seq-store");y.count().onsuccess=function(E){if(!E.target.result)return r();v.openCursor().onsuccess=function(I){I=I.target.result;if(!I)return r();for(var K=I.value,P=I.primaryKey,N=Object.keys(K._attachments||{}),aa={},m=0;m<N.length;m++)aa[K._attachments[N[m]].digest]=!0;K=Object.keys(aa);for(m=0;m<K.length;m++)D.put({seq:P,digestSeq:K[m]+"::"+P});I.continue()}}}function h(q){function r(D){return D.data?su(D):(D.deleted="1"===D.deletedOrLocal,D)}var v=q.objectStore("by-sequence"),
y=q.objectStore("document-store");y.openCursor().onsuccess=function(D){function E(){var P=NM(K,K.winningRev,K.deleted);y.put(P).onsuccess=function(){I.continue()}}var I=D.target.result;if(I){var K=r(I.value);K.winningRev=K.winningRev||nu(K);if(K.seq)return E();(function(){var P=K.id+"::",N=K.id+"::\uffff",aa=0;v.index("_doc_id_rev").openCursor(IDBKeyRange.bound(P,N)).onsuccess=function(m){m=m.target.result;if(!m)return K.seq=aa,E();var t=m.primaryKey;t>aa&&(aa=t);m.continue()}})()}}}var a=c.name,
e=null;g._meta=null;g._remote=!1;g.type=function(){return"idb"};g._id=UX(function(q){q(null,g._meta.instanceId)});g._bulkDocs=function(q,r,v){Vfa(c,q,r,g,e,v)};g._get=function(q,r,v){function y(){v(I,{doc:D,metadata:E,ctx:K})}var D,E,I,K=r.ctx;if(!K){var P=Po(e,["document-store","by-sequence","attach-store"],"readonly");if(P.error)return v(P.error);K=P.txn}K.objectStore("document-store").get(q).onsuccess=function(N){E=su(N.target.result);if(!E)return I=yh(Oo,"missing"),y();if(r.rev)var aa=r.latest?
ufa(r.rev,E):r.rev;else if(aa=E.winningRev,Vq(E))return I=yh(Oo,"deleted"),y();N=K.objectStore("by-sequence");aa=E.id+"::"+aa;N.index("_doc_id_rev").get(aa).onsuccess=function(m){(D=m.target.result)&&(D=eF(D));if(!D)return I=yh(Oo,"missing"),y();y()}}};g._getAttachment=function(q,r,v,y,D){if(y.ctx)q=y.ctx;else{q=Po(e,["document-store","by-sequence","attach-store"],"readonly");if(q.error)return D(q.error);q=q.txn}r=v.digest;var E=v.content_type;q.objectStore("attach-store").get(r).onsuccess=function(I){AY(I.target.result.body,
E,y.binary,function(K){D(null,K)})}};g._info=function(q){var r,v,y=Po(e,["meta-store","by-sequence"],"readonly");if(y.error)return q(y.error);y=y.txn;y.objectStore("meta-store").get("meta-store").onsuccess=function(D){v=D.target.result.docCount};y.objectStore("by-sequence").openCursor(null,"prev").onsuccess=function(D){r=(D=D.target.result)?D.key:0};y.oncomplete=function(){q(null,{doc_count:v,update_seq:r,idb_attachment_format:g._meta.blobSupport?"binary":"base64"})}};g._allDocs=function(q,r){$fa(q,
e,r)};g._changes=function(q){return ega(q,g,a,e)};g._close=function(q){e.close();rx.delete(a);q()};g._getRevisionTree=function(q,r){var v=Po(e,["document-store"],"readonly");if(v.error)return r(v.error);v.txn.objectStore("document-store").get(q).onsuccess=function(y){(y=su(y.target.result))?r(null,y.rev_tree):r(yh(Oo))}};g._doCompaction=function(q,r,v){var y=Po(e,["document-store","by-sequence","attach-store","attach-seq-store"],"readwrite");if(y.error)return v(y.error);var D=y.txn;D.objectStore("document-store").get(q).onsuccess=
function(E){E=su(E.target.result);ou(E.rev_tree,function(P,N,aa,m,t){-1!==r.indexOf(N+"-"+aa)&&(t.status="missing")});CY(r,q,D);var I=E.winningRev,K=E.deleted;D.objectStore("document-store").put(NM(E,I,K))};D.onabort=Np(v);D.oncomplete=function(){v()}};g._getLocal=function(q,r){var v=Po(e,["local-store"],"readonly");if(v.error)return r(v.error);q=v.txn.objectStore("local-store").get(q);q.onerror=Np(r);q.onsuccess=function(y){(y=y.target.result)?(delete y._doc_id_rev,r(null,y)):r(yh(Oo))}};g._putLocal=
function(q,r,v){"function"===typeof r&&(v=r,r={});delete q._revisions;var y=q._rev,D=q._id;q._rev=y?"0-"+(parseInt(y.split("-")[1],10)+1):"0-1";var E=r.ctx,I;if(!E){E=Po(e,["local-store"],"readwrite");if(E.error)return v(E.error);E=E.txn;E.onerror=Np(v);E.oncomplete=function(){I&&v(null,I)}}var K=E.objectStore("local-store");y?(D=K.get(D),D.onsuccess=function(P){(P=P.target.result)&&P._rev===y?K.put(q).onsuccess=function(){I={ok:!0,id:q._id,rev:q._rev};r.ctx&&v(null,I)}:v(yh(px))}):(D=K.add(q),D.onerror=
function(P){v(yh(px));P.preventDefault();P.stopPropagation()},D.onsuccess=function(){I={ok:!0,id:q._id,rev:q._rev};r.ctx&&v(null,I)})};g._removeLocal=function(q,r,v){"function"===typeof r&&(v=r,r={});var y=r.ctx;if(!y){y=Po(e,["local-store"],"readwrite");if(y.error)return v(y.error);y=y.txn;y.oncomplete=function(){D&&v(null,D)}}var D,E=q._id,I=y.objectStore("local-store");y=I.get(E);y.onerror=Np(v);y.onsuccess=function(K){(K=K.target.result)&&K._rev===q._rev?(I.delete(E),D={ok:!0,id:E,rev:"0-0"},
r.ctx&&v(null,D)):v(yh(Oo))}};g._destroy=function(q,r){nA.removeAllListeners(a);(q=RM.get(a))&&q.result&&(q.result.close(),rx.delete(a));q=indexedDB.deleteDatabase(a);q.onsuccess=function(){RM.delete(a);iA&&a in localStorage&&delete localStorage[a];r(null,{ok:!0})};q.onerror=Np(r)};var n=rx.get(a);if(n)return e=n.idb,g._meta=n.global,Mp(function(){k(null,g)});n=indexedDB.open(a,5);RM.set(a,n);n.onupgradeneeded=function(q){function r(){var I=D[E-1];E++;I&&I(y,r)}var v=q.target.result;if(1>q.oldVersion)return f(v);
var y=q.currentTarget.transaction;3>q.oldVersion&&v.createObjectStore("local-store",{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0});4>q.oldVersion&&b(v);var D=[l,p,d,h],E=q.oldVersion;r()};n.onsuccess=function(q){function r(){"undefined"!==typeof K&&D&&(g._meta={name:a,instanceId:P,blobSupport:K},rx.set(a,{idb:e,global:g._meta}),k(null,g))}function v(){if("undefined"!==typeof I&&"undefined"!==typeof E){var N=a+"_id";N in E?P=E[N]:E[N]=P=dF();E.docCount=I;y.objectStore("meta-store").put(E)}}
e=q.target.result;e.onversionchange=function(){e.close();rx.delete(a)};e.onabort=function(N){In("error","Database has a global failure",N.target.error);e.close();rx.delete(a)};var y=e.transaction(["meta-store","detect-blob-support","document-store"],"readwrite"),D=!1,E,I,K,P;y.objectStore("meta-store").get("meta-store").onsuccess=function(N){E=N.target.result||{id:"meta-store"};v()};bga(y,function(N){I=N;v()});SM||(SM=aga(y));SM.then(function(N){K=N;r()});y.oncomplete=function(){D=!0;r()};y.onabort=
Np(k)};n.onerror=function(q){(q=q.target.error&&q.target.error.message)?-1!==q.indexOf("stored database is a higher version")&&(q=Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):q="Failed to open indexedDB, are you in private browsing mode?";In("error",q);k(yh(MM,q))}}function gga(g,c){return new Promise(function(k,f){function l(){h++;g[a++]().then(b,d)}function p(){if(++e===n)q?f(q):k();else for(;h<c&&a<n;)l()}function b(){h--;
p()}function d(r){h--;q=q||r;p()}for(var h=0,a=0,e=0,n=g.length,q;h<c&&a<n;)l()})}function TM(g){var c=(g=g.doc||g.ok)&&g._attachments;c&&Object.keys(c).forEach(function(k){k=c[k];k.data=EM(k.data,k.content_type)})}function tu(g){return/^_design/.test(g)?"_design/"+encodeURIComponent(g.slice(8)):/^_local/.test(g)?"_local/"+encodeURIComponent(g.slice(7)):encodeURIComponent(g)}function GY(g){return g._attachments&&Object.keys(g._attachments)?Promise.all(Object.keys(g._attachments).map(function(c){var k=
g._attachments[c];if(k.data&&"string"!==typeof k.data)return(new Promise(function(f){FM(k.data,f)})).then(function(f){k.data=f})})):Promise.resolve()}function hga(g,c){if(c.prefix){var k=aY(c.prefix).protocol;k="http"===k||"https"===k}else k=!1;k&&(g=c.name.substr(c.prefix.length),g=c.prefix.replace(/\/?$/,"/")+encodeURIComponent(g));c=aY(g);if(c.user||c.password)c.auth={username:c.user,password:c.password};g=c.path.replace(/(^\/|\/$)/g,"").split("/");c.db=g.pop();-1===c.db.indexOf("%")&&(c.db=encodeURIComponent(c.db));
c.path=g.join("/");return c}function Lk(g,c){return fF(g,g.db+"/"+c)}function fF(g,c){return g.protocol+"://"+g.host+(g.port?":"+g.port:"")+"/"+g.path+(g.path?"/":"")+c}function gF(g){return"?"+Object.keys(g).map(function(c){return c+"="+encodeURIComponent(g[c])}).join("&")}function iga(g){var c="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",k=-1!==c.indexOf("msie"),f=-1!==c.indexOf("trident");c=-1!==c.indexOf("edge");g=!("method"in g)||"GET"===g.method;return(k||
f||c)&&g}function UM(g,c){function k(n,q){return tk(n,lx(function(r){l().then(function(){return q.apply(this,r)}).catch(function(v){r.pop()(v)})})).bind(b)}function f(n,q,r){var v={};q=q||{};q.headers=q.headers||new sx;q.headers.get("Content-Type")||q.headers.set("Content-Type","application/json");q.headers.get("Accept")||q.headers.set("Accept","application/json");return a(n,q).then(function(y){v.ok=y.ok;v.status=y.status;return y.json()}).then(function(y){v.data=y;if(!v.ok){v.data.status=v.status;
y=nx(v.data);if(r)return r(y);throw y;}Array.isArray(v.data)&&(v.data=v.data.map(function(D){return D.error||D.missing?nx(D):D}));if(r)r(null,v.data);else return v})}function l(){if(g.skip_setup)return Promise.resolve();if(e)return e;e=f(h).catch(function(n){return n&&n.status&&404===n.status?(yM(404,"PouchDB is just detecting if the remote exists."),f(h,{method:"PUT"})):Promise.reject(n)}).catch(function(n){return n&&n.status&&412===n.status?!0:Promise.reject(n)});e.catch(function(){e=null});return e}
function p(n){return n.split("/").map(encodeURIComponent).join("/")}var b=this,d=hga(g.name,g),h=Lk(d,"");g=Kk(g);var a=function(n,q){q=q||{};q.headers=q.headers||new sx;q.credentials="include";if(g.auth||d.auth){var r=g.auth||d.auth;r=btoa(unescape(encodeURIComponent(r.username+":"+r.password)));q.headers.set("Authorization","Basic "+r)}var v=g.headers||{};Object.keys(v).forEach(function(y){q.headers.append(y,v[y])});iga(q)&&(n+=(-1===n.indexOf("?")?"?":"&")+"_nonce="+Date.now());return(g.fetch||
HY)(n,q)},e;Mp(function(){c(null,b)});b._remote=!0;b.type=function(){return"http"};b.id=k("id",function(n){a(fF(d,"")).then(function(q){return q.json()}).catch(function(){return{}}).then(function(q){q=q&&q.uuid?q.uuid+d.db:Lk(d,"");n(null,q)})});b.compact=k("compact",function(n,q){"function"===typeof n&&(q=n,n={});n=Kk(n);f(Lk(d,"_compact"),{method:"POST"}).then(function(){function r(){b.info(function(v,y){y&&!y.compact_running?q(null,{ok:!0}):setTimeout(r,n.interval||200)})}r()})});b.bulkGet=tk("bulkGet",
function(n,q){function r(I){var K={};n.revs&&(K.revs=!0);n.attachments&&(K.attachments=!0);n.latest&&(K.latest=!0);f(Lk(d,"_bulk_get"+gF(K)),{method:"POST",body:JSON.stringify({docs:n.docs})}).then(function(P){n.attachments&&n.binary&&P.data.results.forEach(function(N){N.docs.forEach(TM)});I(null,P.data)}).catch(I)}function v(){function I(t){return function(u,B){N[t]=B.results;++P===K&&q(null,{results:aF(N)})}}for(var K=Math.ceil(n.docs.length/50),P=0,N=Array(K),aa=0;aa<K;aa++){var m=hA(n,["revs",
"attachments","binary","latest"]);m.docs=n.docs.slice(50*aa,Math.min(n.docs.length,50*(aa+1)));WX(y,m,I(aa))}}var y=this,D=fF(d,""),E=VM[D];"boolean"!==typeof E?r(function(I,K){I?(VM[D]=!1,yM(I.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),v()):(VM[D]=!0,q(null,K))}):E?r(q):v()});b._info=function(n){l().then(function(){return a(Lk(d,""))}).then(function(q){return q.json()}).then(function(q){q.host=Lk(d,"");n(null,q)}).catch(n)};b.fetch=function(n,q){return l().then(function(){var r=
"/"===n.substring(0,1)?fF(d,n.substring(1)):Lk(d,n);return a(r,q)})};b.get=k("get",function(n,q,r){function v(E){function I(N){var aa=K[N];N=tu(E._id)+"/"+p(N)+"?rev="+E._rev;return a(Lk(d,N)).then(function(m){return"buffer"in m?m.buffer():m.blob()}).then(function(m){if(q.binary){var t=Object.getOwnPropertyDescriptor(m.__proto__,"type");if(!t||t.set)m.type=aa.content_type;return m}return new Promise(function(u){FM(m,u)})}).then(function(m){delete aa.stub;delete aa.length;aa.data=m})}var K=E._attachments,
P=K&&Object.keys(K);if(K&&P.length)return P=P.map(function(N){return function(){return I(N)}}),gga(P,5)}function y(E){return Array.isArray(E)?Promise.all(E.map(function(I){if(I.ok)return v(I.ok)})):v(E)}"function"===typeof q&&(r=q,q={});q=Kk(q);var D={};q.revs&&(D.revs=!0);q.revs_info&&(D.revs_info=!0);q.latest&&(D.latest=!0);q.open_revs&&("all"!==q.open_revs&&(q.open_revs=JSON.stringify(q.open_revs)),D.open_revs=q.open_revs);q.rev&&(D.rev=q.rev);q.conflicts&&(D.conflicts=q.conflicts);q.update_seq&&
(D.update_seq=q.update_seq);n=tu(n);D=Lk(d,n+gF(D));f(D).then(function(E){return Promise.resolve().then(function(){if(q.attachments)return y(E.data)}).then(function(){r(null,E.data)})}).catch(function(E){E.docId=n;r(E)})});b.remove=k("remove",function(n,q,r,v){"string"===typeof q?(n={_id:n,_rev:q},"function"===typeof r&&(v=r,r={})):"function"===typeof q?(v=q,r={}):(v=r,r=q);q=n._rev||r.rev;q=Lk(d,tu(n._id))+"?rev="+q;f(q,{method:"DELETE"},v).catch(v)});b.getAttachment=k("getAttachment",function(n,
q,r,v){"function"===typeof r&&(v=r,r={});r=r.rev?"?rev="+r.rev:"";n=Lk(d,tu(n))+"/"+p(q)+r;var y;a(n,{method:"GET"}).then(function(D){y=D.headers.get("content-type");if(D.ok)return"undefined"===typeof hF||hF.browser||"function"!==typeof D.buffer?D.blob():D.buffer();throw D;}).then(function(D){"undefined"===typeof hF||hF.browser||(D.type=y);v(null,D)}).catch(function(D){v(D)})});b.removeAttachment=k("removeAttachment",function(n,q,r,v){n=Lk(d,tu(n)+"/"+p(q))+"?rev="+r;f(n,{method:"DELETE"},v).catch(v)});
b.putAttachment=k("putAttachment",function(n,q,r,v,y,D){"function"===typeof y&&(D=y,y=v,v=r,r=null);n=tu(n)+"/"+p(q);n=Lk(d,n);r&&(n+="?rev="+r);if("string"===typeof v){try{var E=atob(v)}catch(I){return D(yh(yY,"Attachment is not a valid base64 string"))}v=E?DM(E,y):""}f(n,{headers:new sx({"Content-Type":y}),method:"PUT",body:v},D).catch(D)});b._bulkDocs=function(n,q,r){n.new_edits=q.new_edits;l().then(function(){return Promise.all(n.docs.map(GY))}).then(function(){return f(Lk(d,"_bulk_docs"),{method:"POST",
body:JSON.stringify(n)},r)}).catch(r)};b._put=function(n,q,r){l().then(function(){return GY(n)}).then(function(){return f(Lk(d,tu(n._id)),{method:"PUT",body:JSON.stringify(n)})}).then(function(v){r(null,v.data)}).catch(function(v){v.docId=n&&n._id;r(v)})};b.allDocs=k("allDocs",function(n,q){"function"===typeof n&&(q=n,n={});n=Kk(n);var r={},v="GET";n.conflicts&&(r.conflicts=!0);n.update_seq&&(r.update_seq=!0);n.descending&&(r.descending=!0);n.include_docs&&(r.include_docs=!0);n.attachments&&(r.attachments=
!0);n.key&&(r.key=JSON.stringify(n.key));n.start_key&&(n.startkey=n.start_key);n.startkey&&(r.startkey=JSON.stringify(n.startkey));n.end_key&&(n.endkey=n.end_key);n.endkey&&(r.endkey=JSON.stringify(n.endkey));"undefined"!==typeof n.inclusive_end&&(r.inclusive_end=!!n.inclusive_end);"undefined"!==typeof n.limit&&(r.limit=n.limit);"undefined"!==typeof n.skip&&(r.skip=n.skip);r=gF(r);if("undefined"!==typeof n.keys){v="POST";var y={keys:n.keys}}f(Lk(d,"_all_docs"+r),{method:v,body:JSON.stringify(y)}).then(function(D){n.include_docs&&
n.attachments&&n.binary&&D.data.rows.forEach(TM);q(null,D.data)}).catch(q)});b._changes=function(n){var q="batch_size"in n?n.batch_size:25;n=Kk(n);!n.continuous||"heartbeat"in n||(n.heartbeat=1E4);var r="timeout"in n?n.timeout:3E4;"timeout"in n&&n.timeout&&5E3>r-n.timeout&&(r=n.timeout+5E3);"heartbeat"in n&&n.heartbeat&&5E3>r-n.heartbeat&&(r=n.heartbeat+5E3);var v={};"timeout"in n&&n.timeout&&(v.timeout=n.timeout);var y="undefined"!==typeof n.limit?n.limit:!1,D=y;n.style&&(v.style=n.style);if(n.include_docs||
n.filter&&"function"===typeof n.filter)v.include_docs=!0;n.attachments&&(v.attachments=!0);n.continuous&&(v.feed="longpoll");n.seq_interval&&(v.seq_interval=n.seq_interval);n.conflicts&&(v.conflicts=!0);n.descending&&(v.descending=!0);n.update_seq&&(v.update_seq=!0);"heartbeat"in n&&n.heartbeat&&(v.heartbeat=n.heartbeat);n.filter&&"string"===typeof n.filter&&(v.filter=n.filter);n.view&&"string"===typeof n.view&&(v.filter="_view",v.view=n.view);if(n.query_params&&"object"===typeof n.query_params)for(var E in n.query_params)n.query_params.hasOwnProperty(E)&&
(v[E]=n.query_params[E]);var I="GET";if(n.doc_ids){v.filter="_doc_ids";I="POST";var K={doc_ids:n.doc_ids}}else n.selector&&(v.filter="_selector",I="POST",K={selector:n.selector});var P=new jga,N,aa=function(u,B){if(!n.aborted){v.since=u;"object"===typeof v.since&&(v.since=JSON.stringify(v.since));n.descending?y&&(v.limit=D):v.limit=!y||D>q?q:D;var A=Lk(d,"_changes"+gF(v)),H={signal:P.signal,method:I,body:JSON.stringify(K)};N=u;n.aborted||l().then(function(){return f(A,H,B)}).catch(B)}},m={results:[]},
t=function(u,B){if(!n.aborted){var A=0;if(B&&B.results){A=B.results.length;m.last_seq=B.last_seq;var H=null,F=null;"number"===typeof B.pending&&(H=B.pending);if("string"===typeof m.last_seq||"number"===typeof m.last_seq)F=m.last_seq;B.results=B.results.filter(function(L){D--;var U=zM(n)(L);U&&(n.include_docs&&n.attachments&&n.binary&&TM(L),n.return_docs&&m.results.push(L),n.onChange(L,H,F));return U})}else if(u){n.aborted=!0;n.complete(u);return}B&&B.last_seq&&(N=B.last_seq);u=y&&0>=D||B&&A<q||n.descending;
(!n.continuous||y&&0>=D)&&u?n.complete(null,m):Mp(function(){aa(N,t)})}};aa(n.since||0,t);return{cancel:function(){n.aborted=!0;P.abort()}}};b.revsDiff=k("revsDiff",function(n,q,r){"function"===typeof q&&(r=q);f(Lk(d,"_revs_diff"),{method:"POST",body:JSON.stringify(n)},r).catch(r)});b._close=function(n){n()};b._destroy=function(n,q){f(Lk(d,""),{method:"DELETE"}).then(function(r){q(null,r)}).catch(function(r){404===r.status?q(null,{ok:!0}):q(r)})}}function uu(g){this.status=400;this.name="query_parse_error";
this.message=g;this.error=!0;try{Error.captureStackTrace(this,uu)}catch(c){}}function iF(g){this.status=404;this.name="not_found";this.message=g;this.error=!0;try{Error.captureStackTrace(this,iF)}catch(c){}}function jF(g){this.status=500;this.name="invalid_value";this.message=g;this.error=!0;try{Error.captureStackTrace(this,jF)}catch(c){}}function IY(g,c){c&&g.then(function(k){Mp(function(){c(null,k)})},function(k){Mp(function(){c(k)})});return g}function kga(g){return lx(function(c){var k=c.pop();
c=g.apply(this,c);"function"===typeof k&&IY(c,k);return c})}function lga(g,c){return g.then(function(k){return c().then(function(){return k})},function(k){return c().then(function(){throw k;})})}function WM(g,c){return function(){var k=arguments,f=this;return g.add(function(){return c.apply(f,k)})}}function JY(g){g=new oA(g);var c=Array(g.size),k=-1;g.forEach(function(f){c[++k]=f});return c}function XM(g){var c=Array(g.size),k=-1;g.forEach(function(f,l){c[++k]=l});return c}function KY(g){return new jF("builtin "+
g+" function requires map values to be numbers or number arrays")}function YM(g){for(var c=0,k=0,f=g.length;k<f;k++){var l=g[k];if("number"!==typeof l)if(Array.isArray(l)){c="number"===typeof c?[c]:c;for(var p=0,b=l.length;p<b;p++){var d=l[p];if("number"!==typeof d)throw KY("_sum");"undefined"===typeof c[p]?c.push(d):c[p]+=d}}else throw KY("_sum");else"number"===typeof c?c+=l:c[0]+=l}return c}function LY(g,c){return BM("return ("+g.replace(/;\s*$/,"")+");",{emit:c,sum:YM,log:mga,isArray:nga,toJSON:oga})}
function pA(){this.promise=new Promise(function(g){g()})}function MY(g){if(!g)return"undefined";switch(typeof g){case "function":return g.toString();case "string":return g.toString();default:return JSON.stringify(g)}}function pga(g,c){return MY(g)+MY(c)+"undefined"}function NY(g,c,k,f,l,p){var b=pga(k,f);if(!l){var d=g._cachedViews=g._cachedViews||{};if(d[b])return d[b]}var h=g.info().then(function(a){var e=a.db_name+"-mrview-"+(l?"temp":cF.hash(b));return bF(g,"_local/"+p,function(n){n.views=n.views||
{};var q=c;-1===q.indexOf("/")&&(q=c+"/"+c);q=n.views[q]=n.views[q]||{};if(!q[e])return q[e]=!0,n}).then(function(){return g.registerDependentDatabase(e).then(function(n){n=n.db;n.auto_compaction=!0;var q={name:e,db:n,sourceDB:g,adapter:g.adapter,mapFun:k,reduceFun:f};return q.db.get("_local/lastSeq").catch(function(r){if(404!==r.status)throw r;}).then(function(r){q.seq=r?r.seq:0;if(d)q.db.once("destroyed",function(){delete d[b]});return q})})})});d&&(d[b]=h);return h}function ZM(g){return-1===g.indexOf("/")?
[g,g]:g.split("/")}function qga(g){return 1===g.length&&/^1-/.test(g[0].rev)}function OY(g,c){try{g.emit("error",c)}catch(k){In("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),In("error",c)}}function PY(g,c){var k=Object.keys(c._attachments);return Promise.all(k.map(function(f){return g.getAttachment(c._id,f,{rev:c._rev})}))}function rga(g,c,
k){var f=Lp(c)&&!Lp(g),l=Object.keys(k._attachments);return f?g.get(k._id).then(function(p){return Promise.all(l.map(function(b){return p._attachments&&p._attachments[b]&&p._attachments[b].digest===k._attachments[b].digest?g.getAttachment(p._id,b):c.getAttachment(k._id,b)}))}).catch(function(p){if(404!==p.status)throw p;return PY(c,k)}):PY(c,k)}function sga(g){var c=[];Object.keys(g).forEach(function(k){g[k].missing.forEach(function(f){c.push({id:k,rev:f})})});return{docs:c,revs:!0,latest:!0}}function tga(g,
c,k,f){function l(d){return g.allDocs({keys:d,include_docs:!0,conflicts:!0}).then(function(h){if(f.cancelled)throw Error("cancelled");h.rows.forEach(function(a){var e;(e=a.deleted||!a.doc||!/^1-/.test(a.value.rev))||(e=a.doc,e=e._attachments&&0<Object.keys(e._attachments).length);e||(e=a.doc,e=e._conflicts&&0<e._conflicts.length);e||(a.doc._conflicts&&delete a.doc._conflicts,p.push(a.doc),delete k[a.id])})})}k=Kk(k);var p=[],b=!0;return Promise.resolve().then(function(){var d=Object.keys(k).filter(function(h){h=
k[h].missing;return 1===h.length&&/^1-/.test(h[0])});if(0<d.length)return l(d)}).then(function(){var d=sga(k);if(d.docs.length)return g.bulkGet(d).then(function(h){if(f.cancelled)throw Error("cancelled");return Promise.all(h.results.map(function(a){return Promise.all(a.docs.map(function(e){var n=e.ok;e.error&&(b=!1);return n&&n._attachments?rga(c,g,n).then(function(q){var r=Object.keys(n._attachments);q.forEach(function(v,y){y=n._attachments[r[y]];delete y.stub;delete y.length;y.data=v});return n}):
n}))})).then(function(a){p=p.concat(aF(a).filter(Boolean))})})}).then(function(){return{ok:b,docs:p}})}function $M(g,c,k,f,l){return g.get(c).catch(function(p){if(404===p.status)return"http"!==g.adapter&&"https"!==g.adapter||yM(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:f,_id:c,history:[],replicator:"pouchdb",version:1};throw p;}).then(function(p){if(!l.cancelled&&p.last_seq!==k)return p.history=(p.history||[]).filter(function(b){return b.session_id!==f}),p.history.unshift({last_seq:k,
session_id:f}),p.history=p.history.slice(0,5),p.version=1,p.replicator="pouchdb",p.session_id=f,p.last_seq=k,g.put(p).catch(function(b){if(409===b.status)return $M(g,c,k,f,l);throw b;})})}function qA(g,c,k,f,l){this.src=g;this.target=c;this.id=k;this.returnValue=f;this.opts=l||{}}function QY(g,c){var k=g[0],f=g.slice(1),l=c[0],p=c.slice(1);return k&&0!==c.length?aN(k.session_id,c)?{last_seq:k.last_seq,history:g}:aN(l.session_id,f)?{last_seq:l.last_seq,history:p}:QY(f,p):{last_seq:0,history:[]}}function aN(g,
c){var k=c[0],f=c.slice(1);return g&&0!==c.length?g===k.session_id?!0:aN(g,f):!1}function RY(g){return"number"===typeof g.status&&4===Math.floor(g.status/100)}function uga(g,c,k,f){if(!1===g.retry)c.emit("error",k),c.removeAllListeners();else{"function"!==typeof g.back_off_function&&(g.back_off_function=dfa);c.emit("requestError",k);if("active"===c.state||"pending"===c.state){c.emit("paused",k);c.state="stopped";var l=function(){g.current_back_off=0};c.once("paused",function(){c.removeListener("active",
l)});c.once("active",l)}g.current_back_off=g.current_back_off||0;g.current_back_off=g.back_off_function(g.current_back_off);setTimeout(f,g.current_back_off)}}function vga(g){return Object.keys(g).sort(dl).reduce(function(c,k){c[k]=g[k];return c},{})}function wga(g,c,k){var f=k.doc_ids?k.doc_ids.sort(dl):"",l=k.filter?k.filter.toString():"",p="",b="",d="";k.selector&&(d=JSON.stringify(k.selector));k.filter&&k.query_params&&(p=JSON.stringify(vga(k.query_params)));k.filter&&"_view"===k.filter&&(b=k.view.toString());
return Promise.all([g.id(),c.id()]).then(function(h){var a=h[0]+h[1]+l+b+p+f+d;return new Promise(function(e){GM(a,e)})}).then(function(h){h=h.replace(/\//g,".").replace(/\+/g,"_");return"_local/"+h})}function SY(g,c,k,f,l){function p(){return wa?Promise.resolve():wga(g,c,k).then(function(da){Y=da;wa=new qA(g,c,Y,f,!1===k.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===k.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===k.checkpoint?{writeSourceCheckpoint:!1,
writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0})})}function b(){Ga=[];if(0!==N.docs.length){var da=N.docs;return c.bulkDocs({docs:da,new_edits:!1},{timeout:k.timeout}).then(function(ia){if(f.cancelled)throw r(),Error("cancelled");var Oa=Object.create(null);ia.forEach(function(Va){Va.error&&(Oa[Va.id]=Va)});ia=Object.keys(Oa).length;l.doc_write_failures+=ia;l.docs_written+=da.length-ia;da.forEach(function(Va){var eb=Oa[Va._id];if(eb)if(l.errors.push(eb),Va=(eb.name||"").toLowerCase(),
"unauthorized"===Va||"forbidden"===Va)f.emit("denied",Kk(eb));else throw eb;else Ga.push(Va)})},function(ia){l.doc_write_failures+=da.length;throw ia;})}}function d(){if(N.error)throw Error("There was a problem getting docs.");l.last_seq=B=N.seq;var da=Kk(l);Ga.length&&(da.docs=Ga,"number"===typeof N.pending&&(da.pending=N.pending,delete N.pending),f.emit("change",da));m=!0;return wa.writeCheckpoint(N.seq,na).then(function(){m=!1;if(f.cancelled)throw r(),Error("cancelled");N=void 0;E()}).catch(function(ia){K(ia);
throw ia;})}function h(){var da={};N.changes.forEach(function(ia){"_user/"!==ia.id&&(da[ia.id]=ia.changes.map(function(Oa){return Oa.rev}))});return c.revsDiff(da).then(function(ia){if(f.cancelled)throw r(),Error("cancelled");N.diffs=ia})}function a(){return tga(g,c,N.diffs,f).then(function(da){N.error=!da.ok;da.docs.forEach(function(ia){delete N.diffs[ia._id];l.docs_read++;N.docs.push(ia)})})}function e(){f.cancelled||N||(0===P.length?n(!0):(N=P.shift(),h().then(a).then(b).then(d).then(e).catch(function(da){q("batch processing terminated with error",
da)})))}function n(da){if(0===aa.changes.length){if(0===P.length&&!N){if(A&&ea.live||t)f.state="pending",f.emit("paused");t&&r()}}else if(da||t||aa.changes.length>=H){P.push(aa);aa={seq:0,changes:[],docs:[]};if("pending"===f.state||"stopped"===f.state)f.state="active",f.emit("active");e()}}function q(da,ia){u||(ia.message||(ia.message=da),l.ok=!1,l.status="aborting",P=[],aa={seq:0,changes:[],docs:[]},r(ia))}function r(da){if(!u){if(f.cancelled&&(l.status="cancelled",m))return;l.status=l.status||"complete";
l.end_time=(new Date).toISOString();l.last_seq=B;u=!0;if(da){da=yh(da);da.result=l;var ia=(da.name||"").toLowerCase();"unauthorized"===ia||"forbidden"===ia?(f.emit("error",da),f.removeAllListeners()):uga(k,f,da,function(){SY(g,c,k,f)})}else f.emit("complete",l),f.removeAllListeners()}}function v(da,ia,Oa){if(f.cancelled)return r();"number"===typeof ia&&(aa.pending=ia);zM(k)(da)&&(aa.seq=da.seq||Oa,aa.changes.push(da),Mp(function(){n(0===P.length&&ea.live)}))}function y(da){L=!1;if(f.cancelled)return r();
if(0<da.results.length)ea.since=da.results[da.results.length-1].seq,E(),n(!0);else{var ia=function(){A?(ea.live=!0,E()):t=!0;n(!0)};N||0!==da.results.length?ia():(m=!0,wa.writeCheckpoint(da.last_seq,na).then(function(){m=!1;l.last_seq=B=da.last_seq;ia()}).catch(K))}}function D(da){L=!1;if(f.cancelled)return r();q("changes rejected",da)}function E(){function da(){Oa.cancel()}function ia(){f.removeListener("cancel",da)}if(!L&&!t&&P.length<F){L=!0;f._changes&&(f.removeListener("cancel",f._abortChanges),
f._changes.cancel());f.once("cancel",da);var Oa=g.changes(ea).on("change",v);Oa.then(ia,ia);Oa.then(y).catch(D);k.retry&&(f._changes=Oa,f._abortChanges=da)}}function I(){p().then(function(){if(f.cancelled)r();else return wa.getCheckpoint().then(function(da){B=da;ea={since:B,limit:H,batch_size:H,style:"all_docs",doc_ids:U,selector:T,return_docs:!0};k.filter&&("string"!==typeof k.filter?ea.include_docs=!0:ea.filter=k.filter);"heartbeat"in k&&(ea.heartbeat=k.heartbeat);"timeout"in k&&(ea.timeout=k.timeout);
k.query_params&&(ea.query_params=k.query_params);k.view&&(ea.view=k.view);E()})}).catch(function(da){q("getCheckpoint rejected with ",da)})}function K(da){m=!1;q("writeCheckpoint completed with error",da)}var P=[],N,aa={seq:0,changes:[],docs:[]},m=!1,t=!1,u=!1,B=0,A=k.continuous||k.live||!1,H=k.batch_size||100,F=k.batches_limit||10,L=!1,U=k.doc_ids,T=k.selector,Y,wa,Ga=[],na=dF();l=l||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var ea={};f.ready(g,
c);f.cancelled?r():(f._addedListeners||(f.once("cancel",r),"function"===typeof k.complete&&(f.once("error",k.complete),f.once("complete",function(da){k.complete(null,da)})),f._addedListeners=!0),"undefined"===typeof k.since?I():p().then(function(){m=!0;return wa.writeCheckpoint(k.since,na)}).then(function(){m=!1;f.cancelled?r():(B=k.since,I())}).catch(K))}function kF(){Fm.EventEmitter.call(this);this.cancelled=!1;this.state="pending";var g=this,c=new Promise(function(k,f){g.once("complete",k);g.once("error",
f)});g.then=function(k,f){return c.then(k,f)};g.catch=function(k){return c.catch(k)};g.catch(function(){})}function lF(g,c){var k=c.PouchConstructor;return"string"===typeof g?new k(g,c):g}function bN(g,c,k,f){"function"===typeof k&&(f=k,k={});"undefined"===typeof k&&(k={});if(k.doc_ids&&!Array.isArray(k.doc_ids))throw yh($E,"`doc_ids` filter parameter is not a list.");k.complete=f;k=Kk(k);k.continuous=k.continuous||k.live;k.retry="retry"in k?k.retry:!1;k.PouchConstructor=k.PouchConstructor||this;
f=new kF(k);g=lF(g,k);c=lF(c,k);SY(g,c,k,f);return f}function xga(g,c,k,f){"function"===typeof k&&(f=k,k={});"undefined"===typeof k&&(k={});k=Kk(k);k.PouchConstructor=k.PouchConstructor||this;g=lF(g,k);c=lF(c,k);return new cN(g,c,k,f)}function cN(g,c,k,f){function l(K){v.emit("change",{direction:"pull",change:K})}function p(K){v.emit("change",{direction:"push",change:K})}function b(K){v.emit("denied",{direction:"push",doc:K})}function d(K){v.emit("denied",{direction:"pull",doc:K})}function h(){v.pushPaused=
!0;v.pullPaused&&v.emit("paused")}function a(){v.pullPaused=!0;v.pushPaused&&v.emit("paused")}function e(){v.pushPaused=!1;v.pullPaused&&v.emit("active",{direction:"push"})}function n(){v.pullPaused=!1;v.pushPaused&&v.emit("active",{direction:"pull"})}function q(K){return function(P,N){var aa="denied"===P&&(N===d||N===b),m="paused"===P&&(N===a||N===h),t="active"===P&&(N===n||N===e);if("change"===P&&(N===l||N===p)||aa||m||t)P in E||(E[P]={}),E[P][K]=!0,2===Object.keys(E[P]).length&&v.removeAllListeners(P)}}
function r(K,P,N){if(-1==K.listeners(P).indexOf(N))K.on(P,N)}var v=this;this.canceled=!1;var y=k.push?qx({},k,k.push):k,D=k.pull?qx({},k,k.pull):k;this.push=bN(g,c,y);this.pull=bN(c,g,D);this.pullPaused=this.pushPaused=!0;var E={};k.live&&(this.push.on("complete",v.pull.cancel.bind(v.pull)),this.pull.on("complete",v.push.cancel.bind(v.push)));this.on("newListener",function(K){"change"===K?(r(v.pull,"change",l),r(v.push,"change",p)):"denied"===K?(r(v.pull,"denied",d),r(v.push,"denied",b)):"active"===
K?(r(v.pull,"active",n),r(v.push,"active",e)):"paused"===K&&(r(v.pull,"paused",a),r(v.push,"paused",h))});this.on("removeListener",function(K){"change"===K?(v.pull.removeListener("change",l),v.push.removeListener("change",p)):"denied"===K?(v.pull.removeListener("denied",d),v.push.removeListener("denied",b)):"active"===K?(v.pull.removeListener("active",n),v.push.removeListener("active",e)):"paused"===K&&(v.pull.removeListener("paused",a),v.push.removeListener("paused",h))});this.pull.on("removeListener",
q("pull"));this.push.on("removeListener",q("push"));var I=Promise.all([this.push,this.pull]).then(function(K){K={push:K[0],pull:K[1]};v.emit("complete",K);f&&f(null,K);v.removeAllListeners();return K},function(K){v.cancel();f?f(K):v.emit("error",K);v.removeAllListeners();if(f)throw K;});this.then=function(K,P){return I.then(K,P)};this.catch=function(K){return I.catch(K)}}function qs(){this._store={}}function rA(g){this._store=new qs;if(g&&Array.isArray(g))for(var c=0,k=g.length;c<k;c++)this.add(g[c])}
function yga(){tx&&vu&&(tx=!1,vu.length?rs=vu.concat(rs):sA=-1,rs.length&&TY())}function TY(){if(!tx){dN=!1;tx=!0;for(var g=rs.length,c=setTimeout(yga);g;){vu=rs;for(rs=[];vu&&++sA<g;)vu[sA].run();sA=-1;g=rs.length}vu=null;sA=-1;tx=!1;clearTimeout(c)}}function UY(g,c){this.fun=g;this.array=c}function jj(g,c,k){Error.call(this,k);this.status=g;this.name=c;this.message=k;this.error=!0}function VY(g){var c=g.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");g=g.indexOf("=");
return-1===g&&(g=c),[g,g===c?0:4-g%4]}function zga(g,c,k){for(var f,l=[],p=c;p<k;p+=3)c=(g[p]<<16&16711680)+(g[p+1]<<8&65280)+(255&g[p+2]),l.push(Op[(f=c)>>18&63]+Op[f>>12&63]+Op[f>>6&63]+Op[63&f]);return l.join("")}function Wq(g){if(2147483647<g)throw new RangeError('The value "'+g+'" is invalid for option "size"');g=new Uint8Array(g);return Object.setPrototypeOf(g,te.prototype),g}function te(g,c,k){if("number"==typeof g){if("string"==typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');
return eN(g)}return WY(g,c,k)}function WY(g,c,k){if("string"==typeof g)return function(l,p){"string"==typeof p&&""!==p||(p="utf8");if(!te.isEncoding(p))throw new TypeError("Unknown encoding: "+p);var b=0|XY(l,p),d=Wq(b);l=d.write(l,p);l!==b&&(d=d.slice(0,l));return d}(g,c);if(ArrayBuffer.isView(g))return fN(g);if(null==g)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(Xq(g,ArrayBuffer)||g&&Xq(g.buffer,
ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(Xq(g,SharedArrayBuffer)||g&&Xq(g.buffer,SharedArrayBuffer)))return Aga(g,c,k);if("number"==typeof g)throw new TypeError('The "value" argument must not be of type number. Received type number');var f=g.valueOf&&g.valueOf();if(null!=f&&f!==g)return te.from(f,c,k);if(f=function(l){if(te.isBuffer(l)){var p=0|gN(l.length),b=Wq(p);return 0===b.length||l.copy(b,0,0,p),b}if(void 0!==l.length)return(p="number"!=typeof l.length)||(p=l.length,p=p!=p),p?Wq(0):
fN(l);if("Buffer"===l.type&&Array.isArray(l.data))return fN(l.data)}(g))return f;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof g[Symbol.toPrimitive])return te.from(g[Symbol.toPrimitive]("string"),c,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);}function YY(g){if("number"!=typeof g)throw new TypeError('"size" argument must be of type number');if(0>g)throw new RangeError('The value "'+
g+'" is invalid for option "size"');}function eN(g){return YY(g),Wq(0>g?0:0|gN(g))}function fN(g){for(var c=0>g.length?0:0|gN(g.length),k=Wq(c),f=0;f<c;f+=1)k[f]=255&g[f];return k}function Aga(g,c,k){if(0>c||g.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<c+(k||0))throw new RangeError('"length" is outside of buffer bounds');var f;return f=void 0===c&&void 0===k?new Uint8Array(g):void 0===k?new Uint8Array(g,c):new Uint8Array(g,c,k),Object.setPrototypeOf(f,
te.prototype),f}function gN(g){if(2147483647<=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return 0|g}function XY(g,c){if(te.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||Xq(g,ArrayBuffer))return g.byteLength;if("string"!=typeof g)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);var k=g.length,f=2<arguments.length&&!0===arguments[2];if(!f&&0===k)return 0;
for(var l=!1;;)switch(c){case "ascii":case "latin1":case "binary":return k;case "utf8":case "utf-8":return hN(g).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*k;case "hex":return k>>>1;case "base64":return ZY(g).length;default:if(l)return f?-1:hN(g).length;c=(""+c).toLowerCase();l=!0}}function Bga(g,c,k){var f=!1;if(((void 0===c||0>c)&&(c=0),c>this.length)||((void 0===k||k>this.length)&&(k=this.length),0>=k)||(k>>>=0)<=(c>>>=0))return"";for(g||(g="utf8");;)switch(g){case "hex":g=
this.length;(!c||0>c)&&(c=0);(!k||0>k||k>g)&&(k=g);for(g="";c<k;++c)g+=Cga[this[c]];return g;case "utf8":case "utf-8":return $Y(this,c,k);case "ascii":g="";for(k=Math.min(this.length,k);c<k;++c)g+=String.fromCharCode(127&this[c]);return g;case "latin1":case "binary":g="";for(k=Math.min(this.length,k);c<k;++c)g+=String.fromCharCode(this[c]);return g;case "base64":return 0===c&&k===this.length?iN.fromByteArray(this):iN.fromByteArray(this.slice(c,k));case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=
this.slice(c,k);k="";for(g=0;g<c.length;g+=2)k+=String.fromCharCode(c[g]+256*c[g+1]);return k;default:if(f)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase();f=!0}}function wu(g,c,k){var f=g[c];g[c]=g[k];g[k]=f}function aZ(g,c,k,f,l){if(0===g.length)return-1;"string"==typeof k?(f=k,k=0):2147483647<k?k=2147483647:-2147483648>k&&(k=-2147483648);var p=k=+k;if(p!=p&&(k=l?0:g.length-1),0>k&&(k=g.length+k),k>=g.length){if(l)return-1;k=g.length-1}else if(0>k){if(!l)return-1;k=0}if("string"==
typeof c&&(c=te.from(c,f)),te.isBuffer(c))return 0===c.length?-1:bZ(g,c,k,f,l);if("number"==typeof c)return c&=255,"function"==typeof Uint8Array.prototype.indexOf?l?Uint8Array.prototype.indexOf.call(g,c,k):Uint8Array.prototype.lastIndexOf.call(g,c,k):bZ(g,[c],k,f,l);throw new TypeError("val must be string, number or Buffer");}function bZ(g,c,k,f,l){function p(a,e){return 1===b?a[e]:a.readUInt16BE(e*b)}var b=1,d=g.length,h=c.length;if(void 0!==f&&("ucs2"===(f=String(f).toLowerCase())||"ucs-2"===f||
"utf16le"===f||"utf-16le"===f)){if(2>g.length||2>c.length)return-1;b=2;d/=2;h/=2;k/=2}if(l)for(f=-1;k<d;k++)if(p(g,k)===p(c,-1===f?0:k-f)){if(-1===f&&(f=k),k-f+1===h)return f*b}else-1!==f&&(k-=k-f),f=-1;else for(k+h>d&&(k=d-h);0<=k;k--){d=!0;for(f=0;f<h;f++)if(p(g,k+f)!==p(c,f)){d=!1;break}if(d)return k}return-1}function cZ(g,c,k,f){for(var l=[],p=0;p<c.length;++p)l.push(255&c.charCodeAt(p));return mF(l,g,k,f)}function $Y(g,c,k){k=Math.min(g.length,k);for(var f=[];c<k;){var l,p,b=g[c],d=null,h=239<
b?4:223<b?3:191<b?2:1;if(c+h<=k)switch(h){case 1:128>b&&(d=b);break;case 2:128==(192&(l=g[c+1]))&&127<(p=(31&b)<<6|63&l)&&(d=p);break;case 3:l=g[c+1];var a=g[c+2];128==(192&l)&&128==(192&a)&&2047<(p=(15&b)<<12|(63&l)<<6|63&a)&&(55296>p||57343<p)&&(d=p);break;case 4:l=g[c+1];a=g[c+2];var e=g[c+3];128==(192&l)&&128==(192&a)&&128==(192&e)&&65535<(p=(15&b)<<18|(63&l)<<12|(63&a)<<6|63&e)&&1114112>p&&(d=p)}null===d?(d=65533,h=1):65535<d&&(d-=65536,f.push(d>>>10&1023|55296),d=56320|1023&d);f.push(d);c+=
h}g=f.length;if(4096>=g)f=String.fromCharCode.apply(String,f);else{k="";for(l=0;l<g;)k+=String.fromCharCode.apply(String,f.slice(l,l+=4096));f=k}return f}function el(g,c,k){if(0!=g%1||0>g)throw new RangeError("offset is not uint");if(g+c>k)throw new RangeError("Trying to access beyond buffer length");}function Gm(g,c,k,f,l,p){if(!te.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>l||c<p)throw new RangeError('"value" argument is out of bounds');if(k+f>g.length)throw new RangeError("Index out of range");
}function dZ(g,c,k,f,l,p){if(k+f>g.length)throw new RangeError("Index out of range");if(0>k)throw new RangeError("Index out of range");}function eZ(g,c,k,f,l){return c=+c,k>>>=0,l||dZ(g,0,k,4),ux.write(g,c,k,f,23,4),k+4}function fZ(g,c,k,f,l){return c=+c,k>>>=0,l||dZ(g,0,k,8),ux.write(g,c,k,f,52,8),k+8}function hN(g,c){var k;c=c||1/0;for(var f=g.length,l=null,p=[],b=0;b<f;++b){if(55295<(k=g.charCodeAt(b))&&57344>k){if(!l){if(56319<k){-1<(c-=3)&&p.push(239,191,189);continue}if(b+1===f){-1<(c-=3)&&
p.push(239,191,189);continue}l=k;continue}if(56320>k){-1<(c-=3)&&p.push(239,191,189);l=k;continue}k=65536+(l-55296<<10|k-56320)}else l&&-1<(c-=3)&&p.push(239,191,189);if(l=null,128>k){if(0>--c)break;p.push(k)}else if(2048>k){if(0>(c-=2))break;p.push(k>>6|192,63&k|128)}else if(65536>k){if(0>(c-=3))break;p.push(k>>12|224,k>>6&63|128,63&k|128)}else{if(!(1114112>k))throw Error("Invalid code point");if(0>(c-=4))break;p.push(k>>18|240,k>>12&63|128,k>>6&63|128,63&k|128)}}return p}function ZY(g){return iN.toByteArray(function(c){if(2>
(c=(c=c.split("=")[0]).trim().replace(Dga,"")).length)return"";for(;0!=c.length%4;)c+="=";return c}(g))}function mF(g,c,k,f){for(var l=0;l<f&&!(l+k>=c.length||l>=g.length);++l)c[l+k]=g[l];return l}function Xq(g,c){return g instanceof c||null!=g&&null!=g.constructor&&null!=g.constructor.name&&g.constructor.name===c.name}function gZ(g,c){for(var k in g)c[k]=g[k]}function xu(g,c,k){return Pp(g,c,k)}function tA(g){switch(this.encoding=function(c){var k=function(f){if(!f)return"utf8";for(var l;;)switch(f){case "utf8":case "utf-8":return"utf8";
case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return f;default:if(l)return;f=(""+f).toLowerCase();l=!0}}(c);if("string"!=typeof k&&(jN.isEncoding===hZ||!hZ(c)))throw Error("Unknown encoding: "+c);return k||c}(g),this.encoding){case "utf16le":this.text=Ega;this.end=Fga;g=4;break;case "utf8":this.fillLast=Gga;g=4;break;case "base64":this.text=Hga;this.end=Iga;g=3;break;default:return this.write=
Jga,this.end=Kga,void 0}this.lastTotal=this.lastNeed=0;this.lastChar=jN.allocUnsafe(g)}function kN(g){return 127>=g?0:6==g>>5?2:14==g>>4?3:30==g>>3?4:2==g>>6?-1:-2}function Gga(g){var c=this.lastTotal-this.lastNeed;a:if(128!=(192&g[0]))var k=(this.lastNeed=0,"\ufffd");else{if(1<this.lastNeed&&1<g.length){if(128!=(192&g[1])){k=(this.lastNeed=1,"\ufffd");break a}if(2<this.lastNeed&&2<g.length&&128!=(192&g[2])){k=(this.lastNeed=2,"\ufffd");break a}}k=void 0}return void 0!==k?k:this.lastNeed<=g.length?
(g.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(g.copy(this.lastChar,c,0,g.length),this.lastNeed-=g.length,void 0)}function Ega(g,c){if(0==(g.length-c)%2){if(c=g.toString("utf16le",c)){var k=c.charCodeAt(c.length-1);if(55296<=k&&56319>=k)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",
c,g.length-1)}function Fga(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):g}function Hga(g,c){var k=(g.length-c)%3;return 0===k?g.toString("base64",c):(this.lastNeed=3-k,this.lastTotal=3,1===k?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",c,g.length-k))}function Iga(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("base64",0,
3-this.lastNeed):g}function Jga(g){return g.toString(this.encoding)}function Kga(g){return g&&g.length?this.write(g):""}function lN(){throw Error("setTimeout has not been defined");}function mN(){throw Error("clearTimeout has not been defined");}function iZ(g){if(ss===setTimeout)return setTimeout(g,0);if((ss===lN||!ss)&&setTimeout)return ss=setTimeout,setTimeout(g,0);try{return ss(g,0)}catch(c){try{return ss.call(null,g,0)}catch(k){return ss.call(this||vx,g,0)}}}function Lga(){wx&&yu&&(wx=!1,yu.length?
Yq=yu.concat(Yq):nF=-1,Yq.length&&jZ())}function jZ(){if(!wx){var g=iZ(Lga);wx=!0;for(var c=Yq.length;c;){yu=Yq;for(Yq=[];++nF<c;)yu&&yu[nF].run();nF=-1;c=Yq.length}yu=null;wx=!1;(function(k){if(ts===clearTimeout)return clearTimeout(k);if((ts===mN||!ts)&&clearTimeout)return ts=clearTimeout,clearTimeout(k);try{ts(k)}catch(f){try{return ts.call(null,k)}catch(l){return ts.call(this||vx,k)}}})(g)}}function kZ(g,c){(this||vx).fun=g;(this||vx).array=c}function Zq(){}function zu(g){return g.call.bind(g)}
function uA(g,c){if("object"!=typeof g)return!1;try{return c(g),!0}catch(k){return!1}}function lZ(g){return Hm&&cn?void 0!==Jn(g):mZ(g)||nZ(g)||oZ(g)||pZ(g)||qZ(g)||rZ(g)||sZ(g)||tZ(g)||uZ(g)||vZ(g)||wZ(g)}function mZ(g){return Hm&&cn?"Uint8Array"===Jn(g):"[object Uint8Array]"===Nj(g)||Mga(g)&&void 0!==g.buffer}function nZ(g){return Hm&&cn?"Uint8ClampedArray"===Jn(g):"[object Uint8ClampedArray]"===Nj(g)}function oZ(g){return Hm&&cn?"Uint16Array"===Jn(g):"[object Uint16Array]"===Nj(g)}function pZ(g){return Hm&&
cn?"Uint32Array"===Jn(g):"[object Uint32Array]"===Nj(g)}function qZ(g){return Hm&&cn?"Int8Array"===Jn(g):"[object Int8Array]"===Nj(g)}function rZ(g){return Hm&&cn?"Int16Array"===Jn(g):"[object Int16Array]"===Nj(g)}function sZ(g){return Hm&&cn?"Int32Array"===Jn(g):"[object Int32Array]"===Nj(g)}function tZ(g){return Hm&&cn?"Float32Array"===Jn(g):"[object Float32Array]"===Nj(g)}function uZ(g){return Hm&&cn?"Float64Array"===Jn(g):"[object Float64Array]"===Nj(g)}function vZ(g){return Hm&&cn?"BigInt64Array"===
Jn(g):"[object BigInt64Array]"===Nj(g)}function wZ(g){return Hm&&cn?"BigUint64Array"===Jn(g):"[object BigUint64Array]"===Nj(g)}function oF(g){return"[object Map]"===Nj(g)}function pF(g){return"[object Set]"===Nj(g)}function qF(g){return"[object WeakMap]"===Nj(g)}function nN(g){return"[object WeakSet]"===Nj(g)}function rF(g){return"[object ArrayBuffer]"===Nj(g)}function xZ(g){return"undefined"!=typeof ArrayBuffer&&(rF.working?rF(g):g instanceof ArrayBuffer)}function sF(g){return"[object DataView]"===
Nj(g)}function yZ(g){return"undefined"!=typeof DataView&&(sF.working?sF(g):g instanceof DataView)}function tF(g){return"[object SharedArrayBuffer]"===Nj(g)}function zZ(g){return"undefined"!=typeof SharedArrayBuffer&&(tF.working?tF(g):g instanceof SharedArrayBuffer)}function AZ(g){return uA(g,Nga)}function BZ(g){return uA(g,Oga)}function CZ(g){return uA(g,Pga)}function DZ(g){return EZ&&uA(g,Qga)}function FZ(g){return oN&&uA(g,Rga)}function us(g,c){var k={seen:[],stylize:Sga};return 3<=arguments.length&&
(k.depth=arguments[2]),4<=arguments.length&&(k.colors=arguments[3]),pN(c)?k.showHidden=c:c&&Cg._extend(k,c),Au(k.showHidden)&&(k.showHidden=!1),Au(k.depth)&&(k.depth=2),Au(k.colors)&&(k.colors=!1),Au(k.customInspect)&&(k.customInspect=!0),k.colors&&(k.stylize=Tga),uF(k,g,k.depth)}function Tga(g,c){return(c=us.styles[c])?"\u001b["+us.colors[c][0]+"m"+g+"\u001b["+us.colors[c][1]+"m":g}function Sga(g,c){return g}function uF(g,c,k){if(g.customInspect&&c&&vF(c.inspect)&&c.inspect!==Cg.inspect&&(!c.constructor||
c.constructor.prototype!==c)){var f=c.inspect(k,g);return wF(f)||(f=uF(g,f,k)),f}var l=function(a,e){if(Au(e))return a.stylize("undefined","undefined");if(wF(e))return e="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",a.stylize(e,"string");if(GZ(e))return a.stylize(""+e,"number");if(pN(e))return a.stylize(""+e,"boolean");if(null===e)return a.stylize("null","null")}(g,c);if(l)return l;l=Object.keys(c);var p=function(a){var e={};return a.forEach(function(n,q){e[n]=
!0}),e}(l);if(g.showHidden&&(l=Object.getOwnPropertyNames(c)),vA(c)&&(0<=l.indexOf("message")||0<=l.indexOf("description")))return qN(c);if(0===l.length){if(vF(c))return g.stylize("[Function"+(c.name?": "+c.name:"")+"]","special");if(wA(c))return g.stylize(RegExp.prototype.toString.call(c),"regexp");if(xF(c))return g.stylize(Date.prototype.toString.call(c),"date");if(vA(c))return qN(c)}var b="",d=!1,h=["{","}"];(HZ(c)&&(d=!0,h=["[","]"]),vF(c))&&(b=" [Function"+(c.name?": "+c.name:"")+"]");return wA(c)&&
(b=" "+RegExp.prototype.toString.call(c)),xF(c)&&(b=" "+Date.prototype.toUTCString.call(c)),vA(c)&&(b=" "+qN(c)),0!==l.length||d&&0!=c.length?0>k?wA(c)?g.stylize(RegExp.prototype.toString.call(c),"regexp"):g.stylize("[Object]","special"):(g.seen.push(c),f=d?function(a,e,n,q,r){for(var v=[],y=0,D=e.length;y<D;++y)Object.prototype.hasOwnProperty.call(e,String(y))?v.push(rN(a,e,n,q,String(y),!0)):v.push("");return r.forEach(function(E){E.match(/^\d+$/)||v.push(rN(a,e,n,q,E,!0))}),v}(g,c,k,p,l):l.map(function(a){return rN(g,
c,k,p,a,d)}),g.seen.pop(),function(a,e,n){var q=0;return 60<a.reduce(function(r,v){return q++,0<=v.indexOf("\n")&&q++,r+v.replace(/\u001b\[\d\d?m/g,"").length+1},0)?n[0]+(""===e?"":e+"\n ")+" "+a.join(",\n  ")+" "+n[1]:n[0]+e+" "+a.join(", ")+" "+n[1]}(f,b,h)):h[0]+b+h[1]}function qN(g){return"["+Error.prototype.toString.call(g)+"]"}function rN(g,c,k,f,l,p){var b,d,h;if((h=Object.getOwnPropertyDescriptor(c,l)||{value:c[l]}).get?d=h.set?g.stylize("[Getter/Setter]","special"):g.stylize("[Getter]","special"):
h.set&&(d=g.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(f,l)||(b="["+l+"]"),d||(0>g.seen.indexOf(h.value)?-1<(d=null===k?uF(g,h.value,null):uF(g,h.value,k-1)).indexOf("\n")&&(d=p?d.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+d.split("\n").map(function(a){return"   "+a}).join("\n")):d=g.stylize("[Circular]","special")),Au(b)){if(p&&l.match(/^\d+$/))return d;(b=JSON.stringify(""+l)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(b=b.substr(1,b.length-2),b=g.stylize(b,
"name")):(b=b.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),b=g.stylize(b,"string"))}return b+": "+d}function HZ(g){return Array.isArray(g)}function pN(g){return"boolean"==typeof g}function GZ(g){return"number"==typeof g}function wF(g){return"string"==typeof g}function Au(g){return void 0===g}function wA(g){return xx(g)&&"[object RegExp]"===Object.prototype.toString.call(g)}function xx(g){return"object"==typeof g&&null!==g}function xF(g){return xx(g)&&"[object Date]"===Object.prototype.toString.call(g)}
function vA(g){return xx(g)&&("[object Error]"===Object.prototype.toString.call(g)||g instanceof Error)}function vF(g){return"function"==typeof g}function sN(g){return 10>g?"0"+g.toString(10):g.toString(10)}function Uga(){var g=new Date,c=[sN(g.getHours()),sN(g.getMinutes()),sN(g.getSeconds())].join(":");return[g.getDate(),Vga[g.getMonth()],c].join(" ")}function Wga(g,c){if(!g){var k=Error("Promise was rejected with a falsy value");k.reason=g;g=k}return c(g)}function Fh(){if(IZ)return JZ;IZ=!0;return JZ=
"function"===typeof Object.create?function(g,c){c&&(g.super_=c,g.prototype=Object.create(c.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:function(g,c){if(c){g.super_=c;var k=function(){};k.prototype=c.prototype;g.prototype=new k;g.prototype.constructor=g}}}function KZ(){if(LZ)return MZ;LZ=!0;return MZ=Fl.EventEmitter}function Xga(){function g(d,h){var a=Object.keys(d);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(d);h&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(d,
n).enumerable}));a.push.apply(a,e)}return a}function c(d){for(var h=1;h<arguments.length;h++){var a=null!=arguments[h]?arguments[h]:{};h%2?g(Object(a),!0).forEach(function(e){var n=a[e];e in d?Object.defineProperty(d,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):d[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach(function(e){Object.defineProperty(d,e,Object.getOwnPropertyDescriptor(a,e))})}return d}function k(d,h){for(var a=
0;a<h.length;a++){var e=h[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(d,e.key,e)}}function f(d,h,a){h&&k(d.prototype,h);a&&k(d,a);return d}if(NZ)return OZ;NZ=!0;var l=Yg.Buffer,p=Cg.inspect,b=p&&p.custom||"inspect";return OZ=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.tail=this.head=null;this.length=0}f(d,[{key:"push",value:function(h){h={data:h,next:null};0<this.length?this.tail.next=
h:this.head=h;this.tail=h;++this.length}},{key:"unshift",value:function(h){h={data:h,next:this.head};0===this.length&&(this.tail=h);this.head=h;++this.length}},{key:"shift",value:function(){if(0!==this.length){var h=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return h}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(h){if(0===this.length)return"";for(var a=this.head,e=""+a.data;a=a.next;)e+=h+a.data;return e}},
{key:"concat",value:function(h){if(0===this.length)return l.alloc(0);h=l.allocUnsafe(h>>>0);for(var a=this.head,e=0;a;)l.prototype.copy.call(a.data,h,e),e+=a.data.length,a=a.next;return h}},{key:"consume",value:function(h,a){h<this.head.data.length?(a=this.head.data.slice(0,h),this.head.data=this.head.data.slice(h)):a=h===this.head.data.length?this.shift():a?this._getString(h):this._getBuffer(h);return a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(h){var a=
this.head,e=1,n=a.data;for(h-=n.length;a=a.next;){var q=a.data,r=h>q.length?q.length:h;n=r===q.length?n+q:n+q.slice(0,h);h-=r;if(0===h){r===q.length?(++e,this.head=a.next?a.next:this.tail=null):(this.head=a,a.data=q.slice(r));break}++e}this.length-=e;return n}},{key:"_getBuffer",value:function(h){var a=l.allocUnsafe(h),e=this.head,n=1;e.data.copy(a);for(h-=e.data.length;e=e.next;){var q=e.data,r=h>q.length?q.length:h;q.copy(a,a.length-h,0,r);h-=r;if(0===h){r===q.length?(++n,this.head=e.next?e.next:
this.tail=null):(this.head=e,e.data=q.slice(r));break}++n}this.length-=n;return a}},{key:b,value:function(h,a){return p(this,c({},a,{depth:0,customInspect:!1}))}}]);return d}()}function PZ(){function g(l,p){k(l,p);c(l)}function c(l){l._writableState&&!l._writableState.emitClose||l._readableState&&!l._readableState.emitClose||l.emit("close")}function k(l,p){l.emit("error",p)}if(QZ)return RZ;QZ=!0;var f=Jg;return RZ={destroy:function(l,p){var b=this,d=this._writableState&&this._writableState.destroyed;
if(this._readableState&&this._readableState.destroyed||d)return p?p(l):l&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,f.nextTick(k,this,l)):f.nextTick(k,this,l)),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(l||null,function(h){!p&&h?b._writableState?b._writableState.errorEmitted?f.nextTick(c,b):(b._writableState.errorEmitted=!0,f.nextTick(g,b,h)):f.nextTick(g,b,h):
p?(f.nextTick(c,b),p(h)):f.nextTick(c,b)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(l,
p){var b=l._readableState,d=l._writableState;b&&b.autoDestroy||d&&d.autoDestroy?l.destroy(p):l.emit("error",p)}}}function yx(){function g(f,l,p){p||(p=Error);var b=function(d,h,a){return p.call(this,"string"===typeof l?l:l(d,h,a))||this};$jscomp.inherits(b,p);b.prototype.name=p.name;b.prototype.code=f;k[f]=b}function c(f,l){if(Array.isArray(f)){var p=f.length;f=f.map(function(b){return String(b)});return 2<p?"one of "+l+" "+f.slice(0,p-1).join(", ")+", or "+f[p-1]:2===p?"one of "+l+" "+f[0]+" or "+
f[1]:"of "+l+" "+f[0]}return"of "+l+" "+String(f)}if(SZ)return tN;SZ=!0;var k={};g("ERR_INVALID_OPT_VALUE",function(f,l){return'The value "'+l+'" is invalid for option "'+f+'"'},TypeError);g("ERR_INVALID_ARG_TYPE",function(f,l,p){var b;if(b="string"===typeof l)b="not "===l.substr(0,4);b?(b="must not be",l=l.replace(/^not /,"")):b="must be";var d=void 0;if(void 0===d||d>f.length)d=f.length;" argument"===f.substring(d-9,d)?f="The "+f+" "+b+" "+c(l,"type"):(d=void 0,"number"!==typeof d&&(d=0),d=d+1>
f.length?!1:-1!==f.indexOf(".",d),f='The "'+f+'" '+(d?"property":"argument")+" "+b+" "+c(l,"type"));return f+(". Received type "+typeof p)},TypeError);g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");g("ERR_METHOD_NOT_IMPLEMENTED",function(f){return"The "+f+" method is not implemented"});g("ERR_STREAM_PREMATURE_CLOSE","Premature close");g("ERR_STREAM_DESTROYED",function(f){return"Cannot call "+f+" after a stream was destroyed"});g("ERR_MULTIPLE_CALLBACK","Callback called multiple times");
g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");g("ERR_STREAM_WRITE_AFTER_END","write after end");g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);g("ERR_UNKNOWN_ENCODING",function(f){return"Unknown encoding: "+f},TypeError);g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");tN.codes=k;return tN}function TZ(){if(UZ)return VZ;UZ=!0;var g=yx().codes.ERR_INVALID_OPT_VALUE;return VZ={getHighWaterMark:function(c,k,f,l){k=null!=k.highWaterMark?
k.highWaterMark:l?k[f]:null;if(null!=k){if(!isFinite(k)||Math.floor(k)!==k||0>k)throw new g(l?f:"highWaterMark",k);return Math.floor(k)}return c.objectMode?16:16384}}}function Yga(){function g(c){try{if(!uN.localStorage)return!1}catch(k){return!1}c=uN.localStorage[c];return null==c?!1:"true"===String(c).toLowerCase()}if(WZ)return XZ;WZ=!0;return XZ=function(c,k){if(g("noDeprecation"))return c;var f=!1;return function(){if(!f){if(g("throwDeprecation"))throw Error(k);g("traceDeprecation")?console.trace(k):
console.warn(k);f=!0}return c.apply(this||uN,arguments)}}}function vN(){function g(F){var L=this;this.entry=this.next=null;this.finish=function(){var U=L.entry;for(L.entry=null;U;){var T=U.callback;F.pendingcb--;T(void 0);U=U.next}F.corkedRequestsFree.next=L}}function c(){}function k(F,L,U){n=n||Bu();F=F||{};"boolean"!==typeof U&&(U=L instanceof n);this.objectMode=!!F.objectMode;U&&(this.objectMode=this.objectMode||!!F.writableObjectMode);this.highWaterMark=E(this,F,"writableHighWaterMark",U);this.destroyed=
this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==F.decodeStrings;this.defaultEncoding=F.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(T){var Y=L._writableState,wa=Y.sync,Ga=Y.writecb;if("function"!==typeof Ga)throw new N;Y.writing=!1;Y.writecb=null;Y.length-=Y.writelen;Y.writelen=0;T?(--Y.pendingcb,wa?(e.nextTick(Ga,T),e.nextTick(a,L,Y),L._writableState.errorEmitted=!0,
A(L,T)):(Ga(T),L._writableState.errorEmitted=!0,A(L,T),a(L,Y))):((T=d(Y)||L.destroyed)||Y.corked||Y.bufferProcessing||!Y.bufferedRequest||b(L,Y),wa?e.nextTick(p,L,Y,T,Ga):p(L,Y,T,Ga))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==F.emitClose;this.autoDestroy=!!F.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function f(F){n=n||Bu();var L=this instanceof n;
if(!L&&!H.call(f,this))return new f(F);this._writableState=new k(F,this,L);this.writable=!0;F&&("function"===typeof F.write&&(this._write=F.write),"function"===typeof F.writev&&(this._writev=F.writev),"function"===typeof F.destroy&&(this._destroy=F.destroy),"function"===typeof F.final&&(this._final=F.final));r.call(this)}function l(F,L,U,T,Y,wa,Ga){L.writelen=T;L.writecb=Ga;L.writing=!0;L.sync=!0;if(L.destroyed)L.onwrite(new m("write"));else U?F._writev(Y,L.onwrite):F._write(Y,wa,L.onwrite);L.sync=
!1}function p(F,L,U,T){!U&&0===L.length&&L.needDrain&&(L.needDrain=!1,F.emit("drain"));L.pendingcb--;T();a(F,L)}function b(F,L){L.bufferProcessing=!0;var U=L.bufferedRequest;if(F._writev&&U&&U.next){var T=Array(L.bufferedRequestCount),Y=L.corkedRequestsFree;Y.entry=U;for(var wa=0,Ga=!0;U;)T[wa]=U,U.isBuf||(Ga=!1),U=U.next,wa+=1;T.allBuffers=Ga;l(F,L,!0,L.length,T,"",Y.finish);L.pendingcb++;L.lastBufferedRequest=null;Y.next?(L.corkedRequestsFree=Y.next,Y.next=null):L.corkedRequestsFree=new g(L);L.bufferedRequestCount=
0}else{for(;U&&(T=U.chunk,l(F,L,!1,L.objectMode?1:T.length,T,U.encoding,U.callback),U=U.next,L.bufferedRequestCount--,!L.writing););null===U&&(L.lastBufferedRequest=null)}L.bufferedRequest=U;L.bufferProcessing=!1}function d(F){return F.ending&&0===F.length&&null===F.bufferedRequest&&!F.finished&&!F.writing}function h(F,L){F._final(function(U){L.pendingcb--;U&&A(F,U);L.prefinished=!0;F.emit("prefinish");a(F,L)})}function a(F,L){var U=d(L);U&&(L.prefinished||L.finalCalled||("function"!==typeof F._final||
L.destroyed?(L.prefinished=!0,F.emit("prefinish")):(L.pendingcb++,L.finalCalled=!0,e.nextTick(h,F,L))),0===L.pendingcb&&(L.finished=!0,F.emit("finish"),L.autoDestroy&&(L=F._readableState,(!L||L.autoDestroy&&L.endEmitted)&&F.destroy())));return U}if(YZ)return wN;YZ=!0;var e=Jg;wN=f;var n;f.WritableState=k;var q={deprecate:Yga()},r=KZ(),v=Yg.Buffer,y=Zga.Uint8Array||function(){},D=PZ(),E=TZ().getHighWaterMark,I=yx().codes,K=I.ERR_INVALID_ARG_TYPE,P=I.ERR_METHOD_NOT_IMPLEMENTED,N=I.ERR_MULTIPLE_CALLBACK,
aa=I.ERR_STREAM_CANNOT_PIPE,m=I.ERR_STREAM_DESTROYED,t=I.ERR_STREAM_NULL_VALUES,u=I.ERR_STREAM_WRITE_AFTER_END,B=I.ERR_UNKNOWN_ENCODING,A=D.errorOrDestroy;Fh()(f,r);k.prototype.getBuffer=function(){for(var F=this.bufferedRequest,L=[];F;)L.push(F),F=F.next;return L};(function(){try{Object.defineProperty(k.prototype,"buffer",{get:q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(F){}})();if("function"===typeof Symbol&&
Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var H=Function.prototype[Symbol.hasInstance];Object.defineProperty(f,Symbol.hasInstance,{value:function(F){return H.call(this,F)?!0:this!==f?!1:F&&F._writableState instanceof k}})}else H=function(F){return F instanceof this};f.prototype.pipe=function(){A(this,new aa)};f.prototype.write=function(F,L,U){var T=this._writableState,Y=!1,wa;if(wa=!T.objectMode)wa=F,wa=v.isBuffer(wa)||wa instanceof y;wa&&!v.isBuffer(F)&&(F=v.from(F));
"function"===typeof L&&(U=L,L=null);wa?L="buffer":L||(L=T.defaultEncoding);"function"!==typeof U&&(U=c);if(T.ending)T=U,U=new u,A(this,U),e.nextTick(T,U);else{var Ga;if(!(Ga=wa)){Ga=F;var na=U,ea;null===Ga?ea=new t:"string"===typeof Ga||T.objectMode||(ea=new K("chunk",["string","Buffer"],Ga));ea?(A(this,ea),e.nextTick(na,ea),Ga=!1):Ga=!0}Ga&&(T.pendingcb++,Y=wa,Y||(ea=F,T.objectMode||!1===T.decodeStrings||"string"!==typeof ea||(ea=v.from(ea,L)),F!==ea&&(Y=!0,L="buffer",F=ea)),wa=T.objectMode?1:F.length,
T.length+=wa,ea=T.length<T.highWaterMark,ea||(T.needDrain=!0),T.writing||T.corked?(wa=T.lastBufferedRequest,T.lastBufferedRequest={chunk:F,encoding:L,isBuf:Y,callback:U,next:null},wa?wa.next=T.lastBufferedRequest:T.bufferedRequest=T.lastBufferedRequest,T.bufferedRequestCount+=1):l(this,T,!1,wa,F,L,U),Y=ea)}return Y};f.prototype.cork=function(){this._writableState.corked++};f.prototype.uncork=function(){var F=this._writableState;F.corked&&(F.corked--,F.writing||F.corked||F.bufferProcessing||!F.bufferedRequest||
b(this,F))};f.prototype.setDefaultEncoding=function(F){"string"===typeof F&&(F=F.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((F+"").toLowerCase())))throw new B(F);this._writableState.defaultEncoding=F;return this};Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});
f.prototype._write=function(F,L,U){U(new P("_write()"))};f.prototype._writev=null;f.prototype.end=function(F,L,U){var T=this._writableState;"function"===typeof F?(U=F,L=F=null):"function"===typeof L&&(U=L,L=null);null!==F&&void 0!==F&&this.write(F,L);T.corked&&(T.corked=1,this.uncork());if(!T.ending){F=U;T.ending=!0;a(this,T);if(F)if(T.finished)e.nextTick(F);else this.once("finish",F);T.ended=!0;this.writable=!1}return this};Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});
Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(F){this._writableState&&(this._writableState.destroyed=F)}});f.prototype.destroy=D.destroy;f.prototype._undestroy=D.undestroy;f.prototype._destroy=function(F,L){L(F)};return wN}function Bu(){function g(a){if(!(this instanceof g))return new g(a);p.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===
a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||f.nextTick(k,this)}function k(a){a.end()}if(ZZ)return xN;ZZ=!0;var f=Jg,l=Object.keys||function(a){var e=[],n;for(n in a)e.push(n);return e};xN=g;var p=yN(),b=vN();Fh()(g,p);l=l(b.prototype);for(var d=0;d<l.length;d++){var h=l[d];g.prototype[h]||(g.prototype[h]=b.prototype[h])}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});
Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&
void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}});return xN}function yF(){function g(l){var p=!1;return function(){if(!p){p=!0;for(var b=arguments.length,d=Array(b),h=0;h<b;h++)d[h]=arguments[h];l.apply(this,d)}}}function c(){}function k(l,p,b){if("function"===typeof p)return k(l,null,p);p||(p={});b=g(b||c);var d=p.readable||!1!==p.readable&&l.readable,h=p.writable||!1!==p.writable&&l.writable,a=function(){l.writable||n()},e=l._writableState&&l._writableState.finished,
n=function(){h=!1;e=!0;d||b.call(l)},q=l._readableState&&l._readableState.endEmitted,r=function(){d=!1;q=!0;h||b.call(l)},v=function(E){b.call(l,E)},y=function(){var E;if(d&&!q)return l._readableState&&l._readableState.ended||(E=new f),b.call(l,E);if(h&&!e)return l._writableState&&l._writableState.ended||(E=new f),b.call(l,E)},D=function(){l.req.on("finish",n)};if(l.setHeader&&"function"===typeof l.abort)if(l.on("complete",n),l.on("abort",y),l.req)D();else l.on("request",D);else h&&!l._writableState&&
(l.on("end",a),l.on("close",a));l.on("end",r);l.on("finish",n);if(!1!==p.error)l.on("error",v);l.on("close",y);return function(){l.removeListener("complete",n);l.removeListener("abort",y);l.removeListener("request",D);l.req&&l.req.removeListener("finish",n);l.removeListener("end",a);l.removeListener("close",a);l.removeListener("finish",n);l.removeListener("end",r);l.removeListener("error",v);l.removeListener("close",y)}}if($Z)return a_;$Z=!0;var f=yx().codes.ERR_STREAM_PREMATURE_CLOSE;return a_=k}
function $ga(){function g(E,I,K){I in E?Object.defineProperty(E,I,{value:K,enumerable:!0,configurable:!0,writable:!0}):E[I]=K;return E}function c(E,I){return{value:E,done:I}}function k(E){var I=E[h];if(null!==I){var K=E[v].read();null!==K&&(E[q]=null,E[h]=null,E[a]=null,I(c(K,!1)))}}function f(E){p.nextTick(k,E)}function l(E,I){return function(K,P){E.then(function(){if(I[n])K(c(void 0,!0));else I[r](K,P)},P)}}if(b_)return c_;b_=!0;var p=Jg,b,d=yF(),h=Symbol("lastResolve"),a=Symbol("lastReject"),e=
Symbol("error"),n=Symbol("ended"),q=Symbol("lastPromise"),r=Symbol("handlePromise"),v=Symbol("stream"),y=Object.getPrototypeOf(function(){}),D=Object.setPrototypeOf((b={get stream(){return this[v]},next:function(){var E=this,I=this[e];if(null!==I)return Promise.reject(I);if(this[n])return Promise.resolve(c(void 0,!0));if(this[v].destroyed)return new Promise(function(K,P){p.nextTick(function(){E[e]?P(E[e]):K(c(void 0,!0))})});if(I=this[q])I=new Promise(l(I,this));else{I=this[v].read();if(null!==I)return Promise.resolve(c(I,
!1));I=new Promise(this[r])}return this[q]=I}},g(b,Symbol.asyncIterator,function(){return this}),g(b,"return",function(){var E=this;return new Promise(function(I,K){E[v].destroy(null,function(P){P?K(P):I(c(void 0,!0))})})}),b),y);return c_=function(E){var I,K=Object.create(D,(I={},g(I,v,{value:E,writable:!0}),g(I,h,{value:null,writable:!0}),g(I,a,{value:null,writable:!0}),g(I,e,{value:null,writable:!0}),g(I,n,{value:E._readableState.endEmitted,writable:!0}),g(I,r,{value:function(P,N){var aa=K[v].read();
aa?(K[q]=null,K[h]=null,K[a]=null,P(c(aa,!1))):(K[h]=P,K[a]=N)},writable:!0}),I));K[q]=null;d(E,function(P){if(P&&"ERR_STREAM_PREMATURE_CLOSE"!==P.code){var N=K[a];null!==N&&(K[q]=null,K[h]=null,K[a]=null,N(P));K[e]=P}else P=K[h],null!==P&&(K[q]=null,K[h]=null,K[a]=null,P(c(void 0,!0))),K[n]=!0});E.on("readable",f.bind(null,K));return K}}function aha(){if(d_)return e_;d_=!0;return e_=function(){throw Error("Readable.from is not available in the browser");}}function yN(){function g(da,ia,Oa){if("function"===
typeof da.prependListener)return da.prependListener(ia,Oa);if(da._events&&da._events[ia])Array.isArray(da._events[ia])?da._events[ia].unshift(Oa):da._events[ia]=[Oa,da._events[ia]];else da.on(ia,Oa)}function c(da,ia,Oa){P=P||Bu();da=da||{};"boolean"!==typeof Oa&&(Oa=ia instanceof P);this.objectMode=!!da.objectMode;Oa&&(this.objectMode=this.objectMode||!!da.readableObjectMode);this.highWaterMark=A(this,da,"readableHighWaterMark",Oa);this.buffer=new B;this.length=0;this.pipes=null;this.pipesCount=0;
this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==da.emitClose;this.autoDestroy=!!da.autoDestroy;this.destroyed=!1;this.defaultEncoding=da.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;da.encoding&&(Y||(Y=$q.StringDecoder),this.decoder=new Y(da.encoding),this.encoding=da.encoding)}function k(da){P=P||Bu();if(!(this instanceof
k))return new k(da);this._readableState=new c(da,this,this instanceof P);this.readable=!0;da&&("function"===typeof da.read&&(this._read=da.read),"function"===typeof da.destroy&&(this._destroy=da.destroy));N.call(this)}function f(da,ia,Oa,Va,eb){u("readableAddChunk",ia);var Sa=da._readableState;if(null===ia)Sa.reading=!1,u("onEofChunk"),Sa.ended||(Sa.decoder&&(ia=Sa.decoder.end())&&ia.length&&(Sa.buffer.push(ia),Sa.length+=Sa.objectMode?1:ia.length),Sa.ended=!0,Sa.sync?b(da):(Sa.needReadable=!1,Sa.emittedReadable||
(Sa.emittedReadable=!0,d(da))));else{if(!eb){eb=ia;var Bb;aa.isBuffer(eb)||eb instanceof m||"string"===typeof eb||void 0===eb||Sa.objectMode||(Bb=new F("chunk",["string","Buffer","Uint8Array"],eb));var Z=Bb}if(Z)na(da,Z);else if(Sa.objectMode||ia&&0<ia.length)if("string"===typeof ia||Sa.objectMode||Object.getPrototypeOf(ia)===aa.prototype||(ia=aa.from(ia)),Va)Sa.endEmitted?na(da,new T):l(da,Sa,ia,!0);else if(Sa.ended)na(da,new L);else{if(Sa.destroyed)return!1;Sa.reading=!1;Sa.decoder&&!Oa?(ia=Sa.decoder.write(ia),
Sa.objectMode||0!==ia.length?l(da,Sa,ia,!1):h(da,Sa)):l(da,Sa,ia,!1)}else Va||(Sa.reading=!1,h(da,Sa))}return!Sa.ended&&(Sa.length<Sa.highWaterMark||0===Sa.length)}function l(da,ia,Oa,Va){ia.flowing&&0===ia.length&&!ia.sync?(ia.awaitDrain=0,da.emit("data",Oa)):(ia.length+=ia.objectMode?1:Oa.length,Va?ia.buffer.unshift(Oa):ia.buffer.push(Oa),ia.needReadable&&b(da));h(da,ia)}function p(da,ia){if(0>=da||0===ia.length&&ia.ended)return 0;if(ia.objectMode)return 1;if(da!==da)return ia.flowing&&ia.length?
ia.buffer.head.data.length:ia.length;if(da>ia.highWaterMark){var Oa=da;1073741824<=Oa?Oa=1073741824:(Oa--,Oa|=Oa>>>1,Oa|=Oa>>>2,Oa|=Oa>>>4,Oa|=Oa>>>8,Oa|=Oa>>>16,Oa++);ia.highWaterMark=Oa}return da<=ia.length?da:ia.ended?ia.length:(ia.needReadable=!0,0)}function b(da){var ia=da._readableState;u("emitReadable",ia.needReadable,ia.emittedReadable);ia.needReadable=!1;ia.emittedReadable||(u("emitReadable",ia.flowing),ia.emittedReadable=!0,K.nextTick(d,da))}function d(da){var ia=da._readableState;u("emitReadable_",
ia.destroyed,ia.length,ia.ended);ia.destroyed||!ia.length&&!ia.ended||(da.emit("readable"),ia.emittedReadable=!1);ia.needReadable=!ia.flowing&&!ia.ended&&ia.length<=ia.highWaterMark;v(da)}function h(da,ia){ia.readingMore||(ia.readingMore=!0,K.nextTick(a,da,ia))}function a(da,ia){for(;!ia.reading&&!ia.ended&&(ia.length<ia.highWaterMark||ia.flowing&&0===ia.length);){var Oa=ia.length;u("maybeReadMore read 0");da.read(0);if(Oa===ia.length)break}ia.readingMore=!1}function e(da){return function(){var ia=
da._readableState;u("pipeOnDrain",ia.awaitDrain);ia.awaitDrain&&ia.awaitDrain--;0===ia.awaitDrain&&da.listeners("data").length&&(ia.flowing=!0,v(da))}}function n(da){var ia=da._readableState;ia.readableListening=0<da.listenerCount("readable");ia.resumeScheduled&&!ia.paused?ia.flowing=!0:0<da.listenerCount("data")&&da.resume()}function q(da){u("readable nexttick read 0");da.read(0)}function r(da,ia){u("resume",ia.reading);ia.reading||da.read(0);ia.resumeScheduled=!1;da.emit("resume");v(da);ia.flowing&&
!ia.reading&&da.read(0)}function v(da){var ia=da._readableState;for(u("flow",ia.flowing);ia.flowing&&null!==da.read(););}function y(da,ia){if(0===ia.length)return null;ia.objectMode?da=ia.buffer.shift():!da||da>=ia.length?(da=ia.decoder?ia.buffer.join(""):1===ia.buffer.length?ia.buffer.first():ia.buffer.concat(ia.length),ia.buffer.clear()):da=ia.buffer.consume(da,ia.decoder);return da}function D(da){var ia=da._readableState;u("endReadable",ia.endEmitted);ia.endEmitted||(ia.ended=!0,K.nextTick(E,ia,
da))}function E(da,ia){u("endReadableNT",da.endEmitted,da.length);da.endEmitted||0!==da.length||(da.endEmitted=!0,ia.readable=!1,ia.emit("end"),da.autoDestroy&&(da=ia._writableState,(!da||da.autoDestroy&&da.finished)&&ia.destroy()))}function I(da,ia){for(var Oa=0,Va=da.length;Oa<Va;Oa++)if(da[Oa]===ia)return Oa;return-1}if(f_)return zN;f_=!0;var K=Jg;zN=k;var P;k.ReadableState=c;Fl.EventEmitter;var N=KZ(),aa=Yg.Buffer,m=bha.Uint8Array||function(){},t=Cg;var u=t&&t.debuglog?t.debuglog("stream"):function(){};
var B=Xga();t=PZ();var A=TZ().getHighWaterMark,H=yx().codes,F=H.ERR_INVALID_ARG_TYPE,L=H.ERR_STREAM_PUSH_AFTER_EOF,U=H.ERR_METHOD_NOT_IMPLEMENTED,T=H.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Y,wa,Ga;Fh()(k,N);var na=t.errorOrDestroy,ea=["error","close","destroy","pause","resume"];Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(da){this._readableState&&(this._readableState.destroyed=da)}});k.prototype.destroy=
t.destroy;k.prototype._undestroy=t.undestroy;k.prototype._destroy=function(da,ia){ia(da)};k.prototype.push=function(da,ia){var Oa=this._readableState;if(Oa.objectMode)var Va=!0;else"string"===typeof da&&(ia=ia||Oa.defaultEncoding,ia!==Oa.encoding&&(da=aa.from(da,ia),ia=""),Va=!0);return f(this,da,ia,!1,Va)};k.prototype.unshift=function(da){return f(this,da,null,!0,!1)};k.prototype.isPaused=function(){return!1===this._readableState.flowing};k.prototype.setEncoding=function(da){Y||(Y=$q.StringDecoder);
da=new Y(da);this._readableState.decoder=da;this._readableState.encoding=this._readableState.decoder.encoding;for(var ia=this._readableState.buffer.head,Oa="";null!==ia;)Oa+=da.write(ia.data),ia=ia.next;this._readableState.buffer.clear();""!==Oa&&this._readableState.buffer.push(Oa);this._readableState.length=Oa.length;return this};k.prototype.read=function(da){u("read",da);da=parseInt(da,10);var ia=this._readableState,Oa=da;0!==da&&(ia.emittedReadable=!1);if(0===da&&ia.needReadable&&((0!==ia.highWaterMark?
ia.length>=ia.highWaterMark:0<ia.length)||ia.ended))return u("read: emitReadable",ia.length,ia.ended),0===ia.length&&ia.ended?D(this):b(this),null;da=p(da,ia);if(0===da&&ia.ended)return 0===ia.length&&D(this),null;var Va=ia.needReadable;u("need readable",Va);if(0===ia.length||ia.length-da<ia.highWaterMark)Va=!0,u("length less than watermark",Va);ia.ended||ia.reading?u("reading or ended",!1):Va&&(u("do read"),ia.reading=!0,ia.sync=!0,0===ia.length&&(ia.needReadable=!0),this._read(ia.highWaterMark),
ia.sync=!1,ia.reading||(da=p(Oa,ia)));Va=0<da?y(da,ia):null;null===Va?(ia.needReadable=ia.length<=ia.highWaterMark,da=0):(ia.length-=da,ia.awaitDrain=0);0===ia.length&&(ia.ended||(ia.needReadable=!0),Oa!==da&&ia.ended&&D(this));null!==Va&&this.emit("data",Va);return Va};k.prototype._read=function(da){na(this,new U("_read()"))};k.prototype.pipe=function(da,ia){function Oa(Pa,Za){u("onunpipe");Pa===Da&&Za&&!1===Za.hasUnpiped&&(Za.hasUnpiped=!0,u("cleanup"),da.removeListener("close",Bb),da.removeListener("finish",
Z),da.removeListener("drain",ma),da.removeListener("error",Sa),da.removeListener("unpipe",Oa),Da.removeListener("end",Va),Da.removeListener("end",sa),Da.removeListener("data",eb),ta=!0,!X.awaitDrain||da._writableState&&!da._writableState.needDrain||ma())}function Va(){u("onend");da.end()}function eb(Pa){u("ondata");Pa=da.write(Pa);u("dest.write",Pa);!1===Pa&&((1===X.pipesCount&&X.pipes===da||1<X.pipesCount&&-1!==I(X.pipes,da))&&!ta&&(u("false write response, pause",X.awaitDrain),X.awaitDrain++),Da.pause())}
function Sa(Pa){u("onerror",Pa);sa();da.removeListener("error",Sa);0===da.listeners("error").length&&na(da,Pa)}function Bb(){da.removeListener("finish",Z);sa()}function Z(){u("onfinish");da.removeListener("close",Bb);sa()}function sa(){u("unpipe");Da.unpipe(da)}var Da=this,X=this._readableState;switch(X.pipesCount){case 0:X.pipes=da;break;case 1:X.pipes=[X.pipes,da];break;default:X.pipes.push(da)}X.pipesCount+=1;u("pipe count=%d opts=%j",X.pipesCount,ia);ia=ia&&!1===ia.end||da===K.stdout||da===K.stderr?
sa:Va;if(X.endEmitted)K.nextTick(ia);else Da.once("end",ia);da.on("unpipe",Oa);var ma=e(Da);da.on("drain",ma);var ta=!1;Da.on("data",eb);g(da,"error",Sa);da.once("close",Bb);da.once("finish",Z);da.emit("pipe",Da);X.flowing||(u("pipe resume"),Da.resume());return da};k.prototype.unpipe=function(da){var ia=this._readableState,Oa={hasUnpiped:!1};if(0===ia.pipesCount)return this;if(1===ia.pipesCount){if(da&&da!==ia.pipes)return this;da||(da=ia.pipes);ia.pipes=null;ia.pipesCount=0;ia.flowing=!1;da&&da.emit("unpipe",
this,Oa);return this}if(!da){da=ia.pipes;Oa=ia.pipesCount;ia.pipes=null;ia.pipesCount=0;ia.flowing=!1;for(ia=0;ia<Oa;ia++)da[ia].emit("unpipe",this,{hasUnpiped:!1});return this}var Va=I(ia.pipes,da);if(-1===Va)return this;ia.pipes.splice(Va,1);--ia.pipesCount;1===ia.pipesCount&&(ia.pipes=ia.pipes[0]);da.emit("unpipe",this,Oa);return this};k.prototype.on=function(da,ia){ia=N.prototype.on.call(this,da,ia);var Oa=this._readableState;"data"===da?(Oa.readableListening=0<this.listenerCount("readable"),
!1!==Oa.flowing&&this.resume()):"readable"!==da||Oa.endEmitted||Oa.readableListening||(Oa.readableListening=Oa.needReadable=!0,Oa.flowing=!1,Oa.emittedReadable=!1,u("on readable",Oa.length,Oa.reading),Oa.length?b(this):Oa.reading||K.nextTick(q,this));return ia};k.prototype.addListener=k.prototype.on;k.prototype.removeListener=function(da,ia){ia=N.prototype.removeListener.call(this,da,ia);"readable"===da&&K.nextTick(n,this);return ia};k.prototype.removeAllListeners=function(da){var ia=N.prototype.removeAllListeners.apply(this,
arguments);"readable"!==da&&void 0!==da||K.nextTick(n,this);return ia};k.prototype.resume=function(){var da=this._readableState;da.flowing||(u("resume"),da.flowing=!da.readableListening,da.resumeScheduled||(da.resumeScheduled=!0,K.nextTick(r,this,da)));da.paused=!1;return this};k.prototype.pause=function(){u("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};
k.prototype.wrap=function(da){var ia=this,Oa=this._readableState,Va=!1;da.on("end",function(){u("wrapped end");if(Oa.decoder&&!Oa.ended){var Sa=Oa.decoder.end();Sa&&Sa.length&&ia.push(Sa)}ia.push(null)});da.on("data",function(Sa){u("wrapped data");Oa.decoder&&(Sa=Oa.decoder.write(Sa));Oa.objectMode&&(null===Sa||void 0===Sa)||!(Oa.objectMode||Sa&&Sa.length)||ia.push(Sa)||(Va=!0,da.pause())});for(var eb in da)void 0===this[eb]&&"function"===typeof da[eb]&&(this[eb]=function(Sa){return function(){return da[Sa].apply(da,
arguments)}}(eb));for(eb=0;eb<ea.length;eb++)da.on(ea[eb],this.emit.bind(this,ea[eb]));this._read=function(Sa){u("wrapped _read",Sa);Va&&(Va=!1,da.resume())};return this};"function"===typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){void 0===wa&&(wa=$ga());return wa(this)});Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&
this._readableState.buffer}});Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(da){this._readableState&&(this._readableState.flowing=da)}});k._fromList=y;Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(k.from=function(da,ia){void 0===Ga&&(Ga=aha());return Ga(k,da,ia)});return zN}function AN(){function g(e,n){var q=this._transformState;
q.transforming=!1;var r=q.writecb;if(null===r)return this.emit("error",new b);q.writechunk=null;q.writecb=null;null!=n&&this.push(n);r(e);e=this._readableState;e.reading=!1;(e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);a.call(this,e);this._transformState={afterTransform:g.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=
!1;e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush));this.on("prefinish",k)}function k(){var e=this;"function"!==typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(n,q){f(e,n,q)})}function f(e,n,q){if(n)return e.emit("error",n);null!=q&&e.push(q);if(e._writableState.length)throw new h;if(e._transformState.transforming)throw new d;return e.push(null)}if(g_)return BN;g_=!0;BN=c;var l=yx().codes,
p=l.ERR_METHOD_NOT_IMPLEMENTED,b=l.ERR_MULTIPLE_CALLBACK,d=l.ERR_TRANSFORM_ALREADY_TRANSFORMING,h=l.ERR_TRANSFORM_WITH_LENGTH_0,a=Bu();Fh()(c,a);c.prototype.push=function(e,n){this._transformState.needTransform=!1;return a.prototype.push.call(this,e,n)};c.prototype._transform=function(e,n,q){q(new p("_transform()"))};c.prototype._write=function(e,n,q){var r=this._transformState;r.writecb=q;r.writechunk=e;r.writeencoding=n;r.transforming||(e=this._readableState,(r.needTransform||e.needReadable||e.length<
e.highWaterMark)&&this._read(e.highWaterMark))};c.prototype._read=function(e){e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))};c.prototype._destroy=function(e,n){a.prototype._destroy.call(this,e,function(q){n(q)})};return BN}function h_(){function g(k){if(!(this instanceof g))return new g(k);c.call(this,k)}if(i_)return CN;i_=!0;CN=g;var c=AN();Fh()(g,c);g.prototype._transform=function(k,
f,l){l(null,k)};return CN}function j_(){function g(a){var e=!1;return function(){e||(e=!0,a.apply(void 0,arguments))}}function c(a){if(a)throw a;}function k(a,e,n,q){q=g(q);var r=!1;a.on("close",function(){r=!0});void 0===p&&(p=yF());p(a,{readable:e,writable:n},function(y){if(y)return q(y);r=!0;q()});var v=!1;return function(y){if(!r&&!v){v=!0;if(a.setHeader&&"function"===typeof a.abort)return a.abort();if("function"===typeof a.destroy)return a.destroy();q(y||new h("pipe"))}}}function f(a){a()}function l(a,
e){return a.pipe(e)}if(k_)return l_;k_=!0;var p,b=yx().codes,d=b.ERR_MISSING_ARGS,h=b.ERR_STREAM_DESTROYED;return l_=function(){for(var a=arguments.length,e=Array(a),n=0;n<a;n++)e[n]=arguments[n];var q=e.length?"function"!==typeof e[e.length-1]?c:e.pop():c;Array.isArray(e[0])&&(e=e[0]);if(2>e.length)throw new d("streams");var r,v=e.map(function(y,D){var E=D<e.length-1;return k(y,E,0<D,function(I){r||(r=I);I&&v.forEach(f);E||(v.forEach(f),q(r))})});return e.reduce(l)}}function m_(){if(n_)return Im;
n_=!0;Im=Im=yN();Im.Stream=Im;Im.Readable=Im;Im.Writable=vN();Im.Duplex=Bu();Im.Transform=AN();Im.PassThrough=h_();Im.finished=yF();Im.pipeline=j_();return Im}function Nh(){function g(l,p){for(var b in l)p[b]=l[b]}function c(l,p,b){return f(l,p,b)}if(o_)return xA;o_=!0;var k=Yg,f=k.Buffer;f.from&&f.alloc&&f.allocUnsafe&&f.allocUnsafeSlow?xA=k:(g(k,xA),xA.Buffer=c);c.prototype=Object.create(f.prototype);g(f,c);c.from=function(l,p,b){if("number"===typeof l)throw new TypeError("Argument must not be a number");
return f(l,p,b)};c.alloc=function(l,p,b){if("number"!==typeof l)throw new TypeError("Argument must be a number");l=f(l);void 0!==p?"string"===typeof b?l.fill(p,b):l.fill(p):l.fill(0);return l};c.allocUnsafe=function(l){if("number"!==typeof l)throw new TypeError("Argument must be a number");return f(l)};c.allocUnsafeSlow=function(l){if("number"!==typeof l)throw new TypeError("Argument must be a number");return k.SlowBuffer(l)};return xA}function zx(){function g(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11");
}function c(p,b){if(4294967295<p)throw new RangeError("requested too many random bytes");var d=f.allocUnsafe(p);if(0<p)if(65536<p)for(var h=0;h<p;h+=65536)l.getRandomValues(d.slice(h,h+65536));else l.getRandomValues(d);return"function"===typeof b?k.nextTick(function(){b(null,d)}):d}if(p_)return q_;p_=!0;var k=Jg,f=Nh().Buffer,l=r_.crypto||r_.msCrypto;return q_=l&&l.getRandomValues?c:g}function s_(){function g(f){k.call(this);this._block=c.allocUnsafe(f);this._blockSize=f;this._blockOffset=0;this._length=
[0,0,0,0];this._finalized=!1}if(t_)return u_;t_=!0;var c=Nh().Buffer,k=m_().Transform;Fh()(g,k);g.prototype._transform=function(f,l,p){var b=null;try{this.update(f,l)}catch(d){b=d}p(b)};g.prototype._flush=function(f){var l=null;try{this.push(this.digest())}catch(p){l=p}f(l)};g.prototype.update=function(f,l){var p=f;if(!c.isBuffer(p)&&"string"!==typeof p)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw Error("Digest already called");c.isBuffer(f)||(f=c.from(f,l));l=
this._block;for(p=0;this._blockOffset+f.length-p>=this._blockSize;){for(var b=this._blockOffset;b<this._blockSize;)l[b++]=f[p++];this._update();this._blockOffset=0}for(;p<f.length;)l[this._blockOffset++]=f[p++];l=0;for(f=8*f.length;0<f;++l)this._length[l]+=f,f=this._length[l]/4294967296|0,0<f&&(this._length[l]-=4294967296*f);return this};g.prototype._update=function(){throw Error("_update is not implemented");};g.prototype.digest=function(f){if(this._finalized)throw Error("Digest already called");
this._finalized=!0;var l=this._digest();void 0!==f&&(l=l.toString(f));this._block.fill(0);for(f=this._blockOffset=0;4>f;++f)this._length[f]=0;return l};g.prototype._digest=function(){throw Error("_digest is not implemented");};return u_=g}function DN(){function g(){d.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878}function c(e,n){return e<<n|e>>>32-n}function k(e,n,q,r,v,y,D){return c(e+(n&q|~n&r)+v+y|0,D)+n|0}function f(e,n,q,r,v,y,D){return c(e+(n&r|q&~r)+
v+y|0,D)+n|0}function l(e,n,q,r,v,y,D){return c(e+(n^q^r)+v+y|0,D)+n|0}function p(e,n,q,r,v,y,D){return c(e+(q^(n|~r))+v+y|0,D)+n|0}if(v_)return w_;v_=!0;var b=Fh(),d=s_(),h=Nh().Buffer,a=Array(16);b(g,d);g.prototype._update=function(){for(var e=0;16>e;++e)a[e]=this._block.readInt32LE(4*e);e=this._a;var n=this._b,q=this._c,r=this._d;e=k(e,n,q,r,a[0],3614090360,7);r=k(r,e,n,q,a[1],3905402710,12);q=k(q,r,e,n,a[2],606105819,17);n=k(n,q,r,e,a[3],3250441966,22);e=k(e,n,q,r,a[4],4118548399,7);r=k(r,e,n,
q,a[5],1200080426,12);q=k(q,r,e,n,a[6],2821735955,17);n=k(n,q,r,e,a[7],4249261313,22);e=k(e,n,q,r,a[8],1770035416,7);r=k(r,e,n,q,a[9],2336552879,12);q=k(q,r,e,n,a[10],4294925233,17);n=k(n,q,r,e,a[11],2304563134,22);e=k(e,n,q,r,a[12],1804603682,7);r=k(r,e,n,q,a[13],4254626195,12);q=k(q,r,e,n,a[14],2792965006,17);n=k(n,q,r,e,a[15],1236535329,22);e=f(e,n,q,r,a[1],4129170786,5);r=f(r,e,n,q,a[6],3225465664,9);q=f(q,r,e,n,a[11],643717713,14);n=f(n,q,r,e,a[0],3921069994,20);e=f(e,n,q,r,a[5],3593408605,5);
r=f(r,e,n,q,a[10],38016083,9);q=f(q,r,e,n,a[15],3634488961,14);n=f(n,q,r,e,a[4],3889429448,20);e=f(e,n,q,r,a[9],568446438,5);r=f(r,e,n,q,a[14],3275163606,9);q=f(q,r,e,n,a[3],4107603335,14);n=f(n,q,r,e,a[8],1163531501,20);e=f(e,n,q,r,a[13],2850285829,5);r=f(r,e,n,q,a[2],4243563512,9);q=f(q,r,e,n,a[7],1735328473,14);n=f(n,q,r,e,a[12],2368359562,20);e=l(e,n,q,r,a[5],4294588738,4);r=l(r,e,n,q,a[8],2272392833,11);q=l(q,r,e,n,a[11],1839030562,16);n=l(n,q,r,e,a[14],4259657740,23);e=l(e,n,q,r,a[1],2763975236,
4);r=l(r,e,n,q,a[4],1272893353,11);q=l(q,r,e,n,a[7],4139469664,16);n=l(n,q,r,e,a[10],3200236656,23);e=l(e,n,q,r,a[13],681279174,4);r=l(r,e,n,q,a[0],3936430074,11);q=l(q,r,e,n,a[3],3572445317,16);n=l(n,q,r,e,a[6],76029189,23);e=l(e,n,q,r,a[9],3654602809,4);r=l(r,e,n,q,a[12],3873151461,11);q=l(q,r,e,n,a[15],530742520,16);n=l(n,q,r,e,a[2],3299628645,23);e=p(e,n,q,r,a[0],4096336452,6);r=p(r,e,n,q,a[7],1126891415,10);q=p(q,r,e,n,a[14],2878612391,15);n=p(n,q,r,e,a[5],4237533241,21);e=p(e,n,q,r,a[12],1700485571,
6);r=p(r,e,n,q,a[3],2399980690,10);q=p(q,r,e,n,a[10],4293915773,15);n=p(n,q,r,e,a[1],2240044497,21);e=p(e,n,q,r,a[8],1873313359,6);r=p(r,e,n,q,a[15],4264355552,10);q=p(q,r,e,n,a[6],2734768916,15);n=p(n,q,r,e,a[13],1309151649,21);e=p(e,n,q,r,a[4],4149444226,6);r=p(r,e,n,q,a[11],3174756917,10);q=p(q,r,e,n,a[2],718787259,15);n=p(n,q,r,e,a[9],3951481745,21);this._a=this._a+e|0;this._b=this._b+n|0;this._c=this._c+q|0;this._d=this._d+r|0};g.prototype._digest=function(){this._block[this._blockOffset++]=
128;56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var e=h.allocUnsafe(16);e.writeInt32LE(this._a,0);e.writeInt32LE(this._b,4);e.writeInt32LE(this._c,8);e.writeInt32LE(this._d,12);return e};return w_=g}function EN(){function g(){l.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;
this._d=271733878;this._e=3285377520}function c(q,r){return q<<r|q>>>32-r}if(x_)return y_;x_=!0;var k=Yg.Buffer,f=Fh(),l=s_(),p=Array(16),b=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],d=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,
8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],a=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],e=[0,1518500249,1859775393,2400959708,2840853838],n=[1352829926,1548603684,
1836072691,2053994217,0];f(g,l);g.prototype._update=function(){for(var q=0;16>q;++q)p[q]=this._block.readInt32LE(4*q);var r=this._a|0;q=this._b|0;for(var v=this._c|0,y=this._d|0,D=this._e|0,E=this._a|0,I=this._b|0,K=this._c|0,P=this._d|0,N=this._e|0,aa=0;80>aa;aa+=1){if(16>aa){var m=D;m=c(r+(q^v^y)+p[b[aa]]+e[0]|0,h[aa])+m|0;r=N;var t=c(E+(I^(K|~P))+p[d[aa]]+n[0]|0,a[aa])+r|0}else 32>aa?(m=D,m=c(r+(q&v|~q&y)+p[b[aa]]+e[1]|0,h[aa])+m|0,r=N,t=c(E+(I&P|K&~P)+p[d[aa]]+n[1]|0,a[aa])+r|0):48>aa?(m=D,m=
c(r+((q|~v)^y)+p[b[aa]]+e[2]|0,h[aa])+m|0,r=N,t=c(E+((I|~K)^P)+p[d[aa]]+n[2]|0,a[aa])+r|0):64>aa?(m=D,m=c(r+(q&y|v&~y)+p[b[aa]]+e[3]|0,h[aa])+m|0,r=N,t=c(E+(I&K|~I&P)+p[d[aa]]+n[3]|0,a[aa])+r|0):(m=D,m=c(r+(q^(v|~y))+p[b[aa]]+e[4]|0,h[aa])+m|0,r=N,t=c(E+(I^K^P)+p[d[aa]]+n[4]|0,a[aa])+r|0);r=D;D=y;y=c(v,10);v=q;q=m;E=N;N=P;P=c(K,10);K=I;I=t}v=this._b+v+P|0;this._b=this._c+y+N|0;this._c=this._d+D+E|0;this._d=this._e+r+I|0;this._e=this._a+q+K|0;this._a=v};g.prototype._digest=function(){this._block[this._blockOffset++]=
128;56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var q=k.alloc?k.alloc(20):new k(20);q.writeInt32LE(this._a,0);q.writeInt32LE(this._b,4);q.writeInt32LE(this._c,8);q.writeInt32LE(this._d,12);q.writeInt32LE(this._e,16);return q};return y_=g}function Ax(){function g(k,f){(this||Bj)._block=c.alloc(k);
(this||Bj)._finalSize=f;(this||Bj)._blockSize=k;(this||Bj)._len=0}if(z_)return A_;z_=!0;var c=Nh().Buffer;g.prototype.update=function(k,f){"string"===typeof k&&(k=c.from(k,f||"utf8"));f=(this||Bj)._block;for(var l=(this||Bj)._blockSize,p=k.length,b=(this||Bj)._len,d=0;d<p;){for(var h=b%l,a=Math.min(p-d,l-h),e=0;e<a;e++)f[h+e]=k[d+e];b+=a;d+=a;0===b%l&&this._update(f)}(this||Bj)._len+=p;return this||Bj};g.prototype.digest=function(k){var f=(this||Bj)._len%(this||Bj)._blockSize;(this||Bj)._block[f]=
128;(this||Bj)._block.fill(0,f+1);f>=(this||Bj)._finalSize&&(this._update((this||Bj)._block),(this||Bj)._block.fill(0));f=8*(this||Bj)._len;if(4294967295>=f)(this||Bj)._block.writeUInt32BE(f,(this||Bj)._blockSize-4);else{var l=(f&4294967295)>>>0;(this||Bj)._block.writeUInt32BE((f-l)/4294967296,(this||Bj)._blockSize-8);(this||Bj)._block.writeUInt32BE(l,(this||Bj)._blockSize-4)}this._update((this||Bj)._block);f=this._hash();return k?f.toString(k):f};g.prototype._update=function(){throw Error("_update must be implemented by subclass");
};return A_=g}function cha(){function g(){this.init();(this||Yi)._w=p;k.call(this||Yi,64,56)}if(B_)return C_;B_=!0;var c=Fh(),k=Ax(),f=Nh().Buffer,l=[1518500249,1859775393,-1894007588,-899497514],p=Array(80);c(g,k);g.prototype.init=function(){(this||Yi)._a=1732584193;(this||Yi)._b=4023233417;(this||Yi)._c=2562383102;(this||Yi)._d=271733878;(this||Yi)._e=3285377520;return this||Yi};g.prototype._update=function(b){for(var d=(this||Yi)._w,h=(this||Yi)._a|0,a=(this||Yi)._b|0,e=(this||Yi)._c|0,n=(this||
Yi)._d|0,q=(this||Yi)._e|0,r=0;16>r;++r)d[r]=b.readInt32BE(4*r);for(;80>r;++r)d[r]=d[r-3]^d[r-8]^d[r-14]^d[r-16];for(b=0;80>b;++b){r=~~(b/20);var v=h<<5|h>>>27;var y=0===r?a&e|~a&n:2===r?a&e|a&n|e&n:a^e^n;r=v+y+q+d[b]+l[r]|0;q=n;n=e;e=a<<30|a>>>2;a=h;h=r}(this||Yi)._a=h+(this||Yi)._a|0;(this||Yi)._b=a+(this||Yi)._b|0;(this||Yi)._c=e+(this||Yi)._c|0;(this||Yi)._d=n+(this||Yi)._d|0;(this||Yi)._e=q+(this||Yi)._e|0};g.prototype._hash=function(){var b=f.allocUnsafe(20);b.writeInt32BE((this||Yi)._a|0,0);
b.writeInt32BE((this||Yi)._b|0,4);b.writeInt32BE((this||Yi)._c|0,8);b.writeInt32BE((this||Yi)._d|0,12);b.writeInt32BE((this||Yi)._e|0,16);return b};return C_=g}function dha(){function g(){this.init();(this||Zi)._w=p;k.call(this||Zi,64,56)}if(D_)return E_;D_=!0;var c=Fh(),k=Ax(),f=Nh().Buffer,l=[1518500249,1859775393,-1894007588,-899497514],p=Array(80);c(g,k);g.prototype.init=function(){(this||Zi)._a=1732584193;(this||Zi)._b=4023233417;(this||Zi)._c=2562383102;(this||Zi)._d=271733878;(this||Zi)._e=
3285377520;return this||Zi};g.prototype._update=function(b){for(var d=(this||Zi)._w,h=(this||Zi)._a|0,a=(this||Zi)._b|0,e=(this||Zi)._c|0,n=(this||Zi)._d|0,q=(this||Zi)._e|0,r=0;16>r;++r)d[r]=b.readInt32BE(4*r);for(;80>r;++r)b=d[r-3]^d[r-8]^d[r-14]^d[r-16],d[r]=b<<1|b>>>31;for(r=0;80>r;++r){b=~~(r/20);var v=h<<5|h>>>27;var y=0===b?a&e|~a&n:2===b?a&e|a&n|e&n:a^e^n;b=v+y+q+d[r]+l[b]|0;q=n;n=e;e=a<<30|a>>>2;a=h;h=b}(this||Zi)._a=h+(this||Zi)._a|0;(this||Zi)._b=a+(this||Zi)._b|0;(this||Zi)._c=e+(this||
Zi)._c|0;(this||Zi)._d=n+(this||Zi)._d|0;(this||Zi)._e=q+(this||Zi)._e|0};g.prototype._hash=function(){var b=f.allocUnsafe(20);b.writeInt32BE((this||Zi)._a|0,0);b.writeInt32BE((this||Zi)._b|0,4);b.writeInt32BE((this||Zi)._c|0,8);b.writeInt32BE((this||Zi)._d|0,12);b.writeInt32BE((this||Zi)._e|0,16);return b};return E_=g}function F_(){function g(){this.init();(this||Zg)._w=p;k.call(this||Zg,64,56)}if(G_)return H_;G_=!0;var c=Fh(),k=Ax(),f=Nh().Buffer,l=[1116352408,1899447441,3049323471,3921009573,961987163,
1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,
958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=Array(64);c(g,k);g.prototype.init=function(){(this||Zg)._a=1779033703;(this||Zg)._b=3144134277;(this||Zg)._c=1013904242;(this||Zg)._d=2773480762;(this||Zg)._e=1359893119;(this||Zg)._f=2600822924;(this||Zg)._g=528734635;(this||Zg)._h=1541459225;return this||Zg};g.prototype._update=function(b){for(var d=(this||Zg)._w,h=(this||Zg)._a|0,a=(this||Zg)._b|0,e=(this||Zg)._c|
0,n=(this||Zg)._d|0,q=(this||Zg)._e|0,r=(this||Zg)._f|0,v=(this||Zg)._g|0,y=(this||Zg)._h|0,D=0;16>D;++D)d[D]=b.readInt32BE(4*D);for(;64>D;++D){b=d[D-2];var E=d[D-15];d[D]=((b>>>17|b<<15)^(b>>>19|b<<13)^b>>>10)+d[D-7]+((E>>>7|E<<25)^(E>>>18|E<<14)^E>>>3)+d[D-16]|0}for(D=0;64>D;++D)b=y+((q>>>6|q<<26)^(q>>>11|q<<21)^(q>>>25|q<<7))+(v^q&(r^v))+l[D]+d[D]|0,E=((h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10))+(h&a|e&(h|a))|0,y=v,v=r,r=q,q=n+b|0,n=e,e=a,a=h,h=b+E|0;(this||Zg)._a=h+(this||Zg)._a|0;(this||Zg)._b=
a+(this||Zg)._b|0;(this||Zg)._c=e+(this||Zg)._c|0;(this||Zg)._d=n+(this||Zg)._d|0;(this||Zg)._e=q+(this||Zg)._e|0;(this||Zg)._f=r+(this||Zg)._f|0;(this||Zg)._g=v+(this||Zg)._g|0;(this||Zg)._h=y+(this||Zg)._h|0};g.prototype._hash=function(){var b=f.allocUnsafe(32);b.writeInt32BE((this||Zg)._a,0);b.writeInt32BE((this||Zg)._b,4);b.writeInt32BE((this||Zg)._c,8);b.writeInt32BE((this||Zg)._d,12);b.writeInt32BE((this||Zg)._e,16);b.writeInt32BE((this||Zg)._f,20);b.writeInt32BE((this||Zg)._g,24);b.writeInt32BE((this||
Zg)._h,28);return b};return H_=g}function eha(){function g(){this.init();(this||fl)._w=p;f.call(this||fl,64,56)}if(I_)return J_;I_=!0;var c=Fh(),k=F_(),f=Ax(),l=Nh().Buffer,p=Array(64);c(g,k);g.prototype.init=function(){(this||fl)._a=3238371032;(this||fl)._b=914150663;(this||fl)._c=812702999;(this||fl)._d=4144912697;(this||fl)._e=4290775857;(this||fl)._f=1750603025;(this||fl)._g=1694076839;(this||fl)._h=3204075428;return this||fl};g.prototype._hash=function(){var b=l.allocUnsafe(28);b.writeInt32BE((this||
fl)._a,0);b.writeInt32BE((this||fl)._b,4);b.writeInt32BE((this||fl)._c,8);b.writeInt32BE((this||fl)._d,12);b.writeInt32BE((this||fl)._e,16);b.writeInt32BE((this||fl)._f,20);b.writeInt32BE((this||fl)._g,24);return b};return J_=g}function K_(){function g(){this.init();(this||Fe)._w=b;f.call(this||Fe,128,112)}function c(d,h){return d>>>0<h>>>0?1:0}if(L_)return M_;L_=!0;var k=Fh(),f=Ax(),l=Nh().Buffer,p=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,
4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,
3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,
3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,
1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],b=Array(160);k(g,f);g.prototype.init=function(){(this||Fe)._ah=1779033703;(this||Fe)._bh=3144134277;(this||Fe)._ch=1013904242;(this||Fe)._dh=2773480762;(this||Fe)._eh=1359893119;(this||Fe)._fh=2600822924;(this||Fe)._gh=528734635;(this||Fe)._hh=1541459225;(this||Fe)._al=4089235720;(this||Fe)._bl=2227873595;(this||Fe)._cl=4271175723;(this||Fe)._dl=1595750129;(this||Fe)._el=2917565137;(this||
Fe)._fl=725511199;(this||Fe)._gl=4215389547;(this||Fe)._hl=327033209;return this||Fe};g.prototype._update=function(d){for(var h=(this||Fe)._w,a=(this||Fe)._ah|0,e=(this||Fe)._bh|0,n=(this||Fe)._ch|0,q=(this||Fe)._dh|0,r=(this||Fe)._eh|0,v=(this||Fe)._fh|0,y=(this||Fe)._gh|0,D=(this||Fe)._hh|0,E=(this||Fe)._al|0,I=(this||Fe)._bl|0,K=(this||Fe)._cl|0,P=(this||Fe)._dl|0,N=(this||Fe)._el|0,aa=(this||Fe)._fl|0,m=(this||Fe)._gl|0,t=(this||Fe)._hl|0,u=0;32>u;u+=2)h[u]=d.readInt32BE(4*u),h[u+1]=d.readInt32BE(4*
u+4);for(;160>u;u+=2){d=h[u-30];var B=h[u-30+1],A=(d>>>1|B<<31)^(d>>>8|B<<24)^d>>>7,H=(B>>>1|d<<31)^(B>>>8|d<<24)^(B>>>7|d<<25);d=h[u-4];B=h[u-4+1];var F=(d>>>19|B<<13)^(B>>>29|d<<3)^d>>>6;B=(B>>>19|d<<13)^(d>>>29|B<<3)^(B>>>6|d<<26);var L=h[u-32],U=h[u-32+1];d=H+h[u-14+1]|0;A=A+h[u-14]+c(d,H)|0;d=d+B|0;A=A+F+c(d,B)|0;d=d+U|0;A=A+L+c(d,U)|0;h[u]=A;h[u+1]=d}for(u=0;160>u;u+=2){A=h[u];d=h[u+1];B=a&e|n&(a|e);var T=E&I|K&(E|I);L=(a>>>28|E<<4)^(E>>>2|a<<30)^(E>>>7|a<<25);U=(E>>>28|a<<4)^(a>>>2|E<<30)^
(a>>>7|E<<25);var Y=p[u],wa=p[u+1],Ga=y^r&(v^y),na=m^N&(aa^m);F=t+((N>>>14|r<<18)^(N>>>18|r<<14)^(r>>>9|N<<23))|0;H=D+((r>>>14|N<<18)^(r>>>18|N<<14)^(N>>>9|r<<23))+c(F,t)|0;F=F+na|0;H=H+Ga+c(F,na)|0;F=F+wa|0;H=H+Y+c(F,wa)|0;F=F+d|0;H=H+A+c(F,d)|0;d=U+T|0;A=L+B+c(d,U)|0;D=y;t=m;y=v;m=aa;v=r;aa=N;N=P+F|0;r=q+H+c(N,P)|0;q=n;P=K;n=e;K=I;e=a;I=E;E=F+d|0;a=H+A+c(E,F)|0}(this||Fe)._al=(this||Fe)._al+E|0;(this||Fe)._bl=(this||Fe)._bl+I|0;(this||Fe)._cl=(this||Fe)._cl+K|0;(this||Fe)._dl=(this||Fe)._dl+P|0;
(this||Fe)._el=(this||Fe)._el+N|0;(this||Fe)._fl=(this||Fe)._fl+aa|0;(this||Fe)._gl=(this||Fe)._gl+m|0;(this||Fe)._hl=(this||Fe)._hl+t|0;(this||Fe)._ah=(this||Fe)._ah+a+c((this||Fe)._al,E)|0;(this||Fe)._bh=(this||Fe)._bh+e+c((this||Fe)._bl,I)|0;(this||Fe)._ch=(this||Fe)._ch+n+c((this||Fe)._cl,K)|0;(this||Fe)._dh=(this||Fe)._dh+q+c((this||Fe)._dl,P)|0;(this||Fe)._eh=(this||Fe)._eh+r+c((this||Fe)._el,N)|0;(this||Fe)._fh=(this||Fe)._fh+v+c((this||Fe)._fl,aa)|0;(this||Fe)._gh=(this||Fe)._gh+y+c((this||
Fe)._gl,m)|0;(this||Fe)._hh=(this||Fe)._hh+D+c((this||Fe)._hl,t)|0};g.prototype._hash=function(){function d(a,e,n){h.writeInt32BE(a,n);h.writeInt32BE(e,n+4)}var h=l.allocUnsafe(64);d((this||Fe)._ah,(this||Fe)._al,0);d((this||Fe)._bh,(this||Fe)._bl,8);d((this||Fe)._ch,(this||Fe)._cl,16);d((this||Fe)._dh,(this||Fe)._dl,24);d((this||Fe)._eh,(this||Fe)._el,32);d((this||Fe)._fh,(this||Fe)._fl,40);d((this||Fe)._gh,(this||Fe)._gl,48);d((this||Fe)._hh,(this||Fe)._hl,56);return h};return M_=g}function fha(){function g(){this.init();
(this||Hi)._w=p;f.call(this||Hi,128,112)}if(N_)return O_;N_=!0;var c=Fh(),k=K_(),f=Ax(),l=Nh().Buffer,p=Array(160);c(g,k);g.prototype.init=function(){(this||Hi)._ah=3418070365;(this||Hi)._bh=1654270250;(this||Hi)._ch=2438529370;(this||Hi)._dh=355462360;(this||Hi)._eh=1731405415;(this||Hi)._fh=2394180231;(this||Hi)._gh=3675008525;(this||Hi)._hh=1203062813;(this||Hi)._al=3238371032;(this||Hi)._bl=914150663;(this||Hi)._cl=812702999;(this||Hi)._dl=4144912697;(this||Hi)._el=4290775857;(this||Hi)._fl=1750603025;
(this||Hi)._gl=1694076839;(this||Hi)._hl=3204075428;return this||Hi};g.prototype._hash=function(){function b(h,a,e){d.writeInt32BE(h,e);d.writeInt32BE(a,e+4)}var d=l.allocUnsafe(48);b((this||Hi)._ah,(this||Hi)._al,0);b((this||Hi)._bh,(this||Hi)._bl,8);b((this||Hi)._ch,(this||Hi)._cl,16);b((this||Hi)._dh,(this||Hi)._dl,24);b((this||Hi)._eh,(this||Hi)._el,32);b((this||Hi)._fh,(this||Hi)._fl,40);return d};return O_=g}function FN(){if(P_)return GN.exports;P_=!0;var g=GN.exports=function(c){c=c.toLowerCase();
var k=g[c];if(!k)throw Error(c+" is not supported (we accept pull requests)");return new k};g.sha=cha();g.sha1=dha();g.sha224=eha();g.sha256=F_();g.sha384=fha();g.sha512=K_();return GN.exports}function Kn(g,c,k){k||(k=Error);var f=function(l,p,b){return b.call(this,"string"==typeof c?c:c(l,p,b))||this};$jscomp.inherits(f,k);f.prototype.name=k.name;f.prototype.code=g;Q_[g]=f}function R_(g,c){if(Array.isArray(g)){var k=g.length;return g=g.map(function(f){return String(f)}),2<k?"one of "+c+" "+g.slice(0,
k-1).join(", ")+", or "+g[k-1]:2===k?"one of "+c+" "+g[0]+" or "+g[1]:"of "+c+" "+g[0]}return"of "+c+" "+String(g)}function HN(g){try{if(!IN.localStorage)return!1}catch(c){return!1}g=IN.localStorage[g];return null!=g&&"true"===String(g).toLowerCase()}function S_(g,c){var k=Object.keys(g);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(g);c&&(f=f.filter(function(l){return Object.getOwnPropertyDescriptor(g,l).enumerable}));k.push.apply(k,f)}return k}function gha(g,c){for(var k=0;k<
c.length;k++){var f=c[k];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(g,f.key,f)}}function T_(g,c){JN(g,c);zF(g)}function zF(g){g._writableState&&!g._writableState.emitClose||g._readableState&&!g._readableState.emitClose||g.emit("close")}function JN(g,c){g.emit("error",c)}function hha(){}function vs(g,c,k){return c in g?Object.defineProperty(g,c,{value:k,enumerable:!0,configurable:!0,writable:!0}):g[c]=k,g}function ws(g,c){return{value:g,done:c}}
function iha(g){var c=g[xs];if(null!==c){var k=g[Cu].read();null!==k&&(g[Du]=null,g[xs]=null,g[Eu]=null,c(ws(k,!1)))}}function jha(g){U_.nextTick(iha,g)}function V_(){function g(na,ea,da){E=E||yA();na=na||{};"boolean"!=typeof da&&(da=ea instanceof E);this.objectMode=!!na.objectMode;da&&(this.objectMode=this.objectMode||!!na.readableObjectMode);this.highWaterMark=H(this,na,"readableHighWaterMark",da);this.buffer=new A;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=
this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==na.emitClose;this.autoDestroy=!!na.autoDestroy;this.destroyed=!1;this.defaultEncoding=na.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;na.encoding&&(t||(t=$q.StringDecoder),this.decoder=new t(na.encoding),this.encoding=na.encoding)}function c(na){if(E=E||yA(),!(this instanceof c))return new c(na);this._readableState=
new g(na,this,this instanceof E);this.readable=!0;na&&("function"==typeof na.read&&(this._read=na.read),"function"==typeof na.destroy&&(this._destroy=na.destroy));K.call(this)}function k(na,ea,da,ia,Oa){m("readableAddChunk",ea);var Va,eb=na._readableState;if(null===ea)eb.reading=!1,function(Sa,Bb){if(m("onEofChunk"),!Bb.ended){if(Bb.decoder){var Z=Bb.decoder.end();Z&&Z.length&&(Bb.buffer.push(Z),Bb.length+=Bb.objectMode?1:Z.length)}Bb.ended=!0;Bb.sync?p(Sa):(Bb.needReadable=!1,Bb.emittedReadable||
(Bb.emittedReadable=!0,b(Sa)))}}(na,eb);else if(Oa||(Va=function(Sa,Bb){var Z;var sa=Bb;P.isBuffer(sa)||sa instanceof N||"string"==typeof Bb||void 0===Bb||Sa.objectMode||(Z=new L("chunk",["string","Buffer","Uint8Array"],Bb));return Z}(eb,ea)),Va)wa(na,Va);else if(eb.objectMode||ea&&0<ea.length)if("string"==typeof ea||eb.objectMode||Object.getPrototypeOf(ea)===P.prototype||(ea=P.from(ea)),ia)eb.endEmitted?wa(na,new Y):f(na,eb,ea,!0);else if(eb.ended)wa(na,new U);else{if(eb.destroyed)return!1;eb.reading=
!1;eb.decoder&&!da?(ea=eb.decoder.write(ea),eb.objectMode||0!==ea.length?f(na,eb,ea,!1):d(na,eb)):f(na,eb,ea,!1)}else ia||(eb.reading=!1,d(na,eb));return!eb.ended&&(eb.length<eb.highWaterMark||0===eb.length)}function f(na,ea,da,ia){ea.flowing&&0===ea.length&&!ea.sync?(ea.awaitDrain=0,na.emit("data",da)):(ea.length+=ea.objectMode?1:da.length,ia?ea.buffer.unshift(da):ea.buffer.push(da),ea.needReadable&&p(na));d(na,ea)}function l(na,ea){if(0>=na||0===ea.length&&ea.ended)na=0;else if(ea.objectMode)na=
1;else if(na!=na)na=ea.flowing&&ea.length?ea.buffer.head.data.length:ea.length;else{if(na>ea.highWaterMark){var da=na;var ia=(1073741824<=da?da=1073741824:(da--,da|=da>>>1,da|=da>>>2,da|=da>>>4,da|=da>>>8,da|=da>>>16,da++),da);ea.highWaterMark=ia}na=na<=ea.length?na:ea.ended?ea.length:(ea.needReadable=!0,0)}return na}function p(na){var ea=na._readableState;m("emitReadable",ea.needReadable,ea.emittedReadable);ea.needReadable=!1;ea.emittedReadable||(m("emitReadable",ea.flowing),ea.emittedReadable=!0,
I.nextTick(b,na))}function b(na){var ea=na._readableState;m("emitReadable_",ea.destroyed,ea.length,ea.ended);ea.destroyed||!ea.length&&!ea.ended||(na.emit("readable"),ea.emittedReadable=!1);ea.needReadable=!ea.flowing&&!ea.ended&&ea.length<=ea.highWaterMark;q(na)}function d(na,ea){ea.readingMore||(ea.readingMore=!0,I.nextTick(h,na,ea))}function h(na,ea){for(;!ea.reading&&!ea.ended&&(ea.length<ea.highWaterMark||ea.flowing&&0===ea.length);){var da=ea.length;if(m("maybeReadMore read 0"),na.read(0),da===
ea.length)break}ea.readingMore=!1}function a(na){var ea=na._readableState;ea.readableListening=0<na.listenerCount("readable");ea.resumeScheduled&&!ea.paused?ea.flowing=!0:0<na.listenerCount("data")&&na.resume()}function e(na){m("readable nexttick read 0");na.read(0)}function n(na,ea){m("resume",ea.reading);ea.reading||na.read(0);ea.resumeScheduled=!1;na.emit("resume");q(na);ea.flowing&&!ea.reading&&na.read(0)}function q(na){var ea=na._readableState;for(m("flow",ea.flowing);ea.flowing&&null!==na.read(););
}function r(na,ea){return 0===ea.length?null:(ea.objectMode?da=ea.buffer.shift():!na||na>=ea.length?(da=ea.decoder?ea.buffer.join(""):1===ea.buffer.length?ea.buffer.first():ea.buffer.concat(ea.length),ea.buffer.clear()):da=ea.buffer.consume(na,ea.decoder),da);var da}function v(na){var ea=na._readableState;m("endReadable",ea.endEmitted);ea.endEmitted||(ea.ended=!0,I.nextTick(y,ea,na))}function y(na,ea){if(m("endReadableNT",na.endEmitted,na.length),!na.endEmitted&&0===na.length&&(na.endEmitted=!0,ea.readable=
!1,ea.emit("end"),na.autoDestroy))na=ea._writableState,(!na||na.autoDestroy&&na.finished)&&ea.destroy()}function D(na,ea){for(var da=0,ia=na.length;da<ia;da++)if(na[da]===ea)return da;return-1}if(W_)return KN;W_=!0;var E,I=Jg;KN=c;c.ReadableState=g;Fl.EventEmitter;var K=AF,P=Yg.Buffer,N=kha.Uint8Array||function(){},aa=Cg;var m=aa&&aa.debuglog?aa.debuglog("stream"):function(){};var t,u,B,A=lha;aa=X_;var H=Y_.getHighWaterMark,F=Qo.codes,L=F.ERR_INVALID_ARG_TYPE,U=F.ERR_STREAM_PUSH_AFTER_EOF,T=F.ERR_METHOD_NOT_IMPLEMENTED,
Y=F.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;hh(c,K);var wa=aa.errorOrDestroy,Ga=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(na){this._readableState&&(this._readableState.destroyed=na)}});c.prototype.destroy=aa.destroy;c.prototype._undestroy=aa.undestroy;c.prototype._destroy=function(na,ea){ea(na)};c.prototype.push=function(na,ea){var da,ia=this._readableState;
return ia.objectMode?da=!0:"string"==typeof na&&((ea=ea||ia.defaultEncoding)!==ia.encoding&&(na=P.from(na,ea),ea=""),da=!0),k(this,na,ea,!1,da)};c.prototype.unshift=function(na){return k(this,na,null,!0,!1)};c.prototype.isPaused=function(){return!1===this._readableState.flowing};c.prototype.setEncoding=function(na){t||(t=$q.StringDecoder);na=new t(na);this._readableState.decoder=na;this._readableState.encoding=this._readableState.decoder.encoding;for(var ea=this._readableState.buffer.head,da="";null!==
ea;)da+=na.write(ea.data),ea=ea.next;return this._readableState.buffer.clear(),""!==da&&this._readableState.buffer.push(da),this._readableState.length=da.length,this};return c.prototype.read=function(na){m("read",na);na=parseInt(na,10);var ea=this._readableState,da=na;if(0!==na&&(ea.emittedReadable=!1),0===na&&ea.needReadable&&((0!==ea.highWaterMark?ea.length>=ea.highWaterMark:0<ea.length)||ea.ended))return m("read: emitReadable",ea.length,ea.ended),0===ea.length&&ea.ended?v(this):p(this),null;if(0===
(na=l(na,ea))&&ea.ended)return 0===ea.length&&v(this),null;var ia,Oa=ea.needReadable;return m("need readable",Oa),(0===ea.length||ea.length-na<ea.highWaterMark)&&m("length less than watermark",Oa=!0),ea.ended||ea.reading?m("reading or ended",!1):Oa&&(m("do read"),ea.reading=!0,ea.sync=!0,0===ea.length&&(ea.needReadable=!0),this._read(ea.highWaterMark),ea.sync=!1,ea.reading||(na=l(da,ea))),null===(ia=0<na?r(na,ea):null)?(ea.needReadable=ea.length<=ea.highWaterMark,na=0):(ea.length-=na,ea.awaitDrain=
0),0===ea.length&&(ea.ended||(ea.needReadable=!0),da!==na&&ea.ended&&v(this)),null!==ia&&this.emit("data",ia),ia},c.prototype._read=function(na){wa(this,new T("_read()"))},c.prototype.pipe=function(na,ea){function da(ma,ta){m("onunpipe");ma===Z&&ta&&!1===ta.hasUnpiped&&(ta.hasUnpiped=!0,m("cleanup"),na.removeListener("close",eb),na.removeListener("finish",Sa),na.removeListener("drain",Da),na.removeListener("error",Va),na.removeListener("unpipe",da),Z.removeListener("end",ia),Z.removeListener("end",
Bb),Z.removeListener("data",Oa),X=!0,!sa.awaitDrain||na._writableState&&!na._writableState.needDrain||Da())}function ia(){m("onend");na.end()}function Oa(ma){m("ondata");ma=na.write(ma);m("dest.write",ma);!1===ma&&((1===sa.pipesCount&&sa.pipes===na||1<sa.pipesCount&&-1!==D(sa.pipes,na))&&!X&&(m("false write response, pause",sa.awaitDrain),sa.awaitDrain++),Z.pause())}function Va(ma){m("onerror",ma);Bb();na.removeListener("error",Va);0===na.listeners("error").length&&wa(na,ma)}function eb(){na.removeListener("finish",
Sa);Bb()}function Sa(){m("onfinish");na.removeListener("close",eb);Bb()}function Bb(){m("unpipe");Z.unpipe(na)}var Z=this,sa=this._readableState;switch(sa.pipesCount){case 0:sa.pipes=na;break;case 1:sa.pipes=[sa.pipes,na];break;default:sa.pipes.push(na)}sa.pipesCount+=1;m("pipe count=%d opts=%j",sa.pipesCount,ea);ea=ea&&!1===ea.end||na===I.stdout||na===I.stderr?Bb:ia;sa.endEmitted?I.nextTick(ea):Z.once("end",ea);na.on("unpipe",da);var Da=function(ma){return function(){var ta=ma._readableState;m("pipeOnDrain",
ta.awaitDrain);ta.awaitDrain&&ta.awaitDrain--;0===ta.awaitDrain&&ma.listeners("data").length&&(ta.flowing=!0,q(ma))}}(Z);na.on("drain",Da);var X=!1;return Z.on("data",Oa),function(ma,ta,Pa){if("function"==typeof ma.prependListener)return ma.prependListener(ta,Pa);ma._events&&ma._events[ta]?Array.isArray(ma._events[ta])?ma._events[ta].unshift(Pa):ma._events[ta]=[Pa,ma._events[ta]]:ma.on(ta,Pa)}(na,"error",Va),na.once("close",eb),na.once("finish",Sa),na.emit("pipe",Z),sa.flowing||(m("pipe resume"),
Z.resume()),na},c.prototype.unpipe=function(na){var ea=this._readableState,da={hasUnpiped:!1};if(0===ea.pipesCount)return this;if(1===ea.pipesCount)return na&&na!==ea.pipes||(na||(na=ea.pipes),ea.pipes=null,ea.pipesCount=0,ea.flowing=!1,na&&na.emit("unpipe",this,da)),this;if(!na){na=ea.pipes;da=ea.pipesCount;ea.pipes=null;ea.pipesCount=0;ea.flowing=!1;for(ea=0;ea<da;ea++)na[ea].emit("unpipe",this,{hasUnpiped:!1});return this}var ia=D(ea.pipes,na);return-1===ia||(ea.pipes.splice(ia,1),--ea.pipesCount,
1===ea.pipesCount&&(ea.pipes=ea.pipes[0]),na.emit("unpipe",this,da)),this},c.prototype.on=function(na,ea){ea=K.prototype.on.call(this,na,ea);var da=this._readableState;return"data"===na?(da.readableListening=0<this.listenerCount("readable"),!1!==da.flowing&&this.resume()):"readable"===na&&(da.endEmitted||da.readableListening||(da.readableListening=da.needReadable=!0,da.flowing=!1,da.emittedReadable=!1,m("on readable",da.length,da.reading),da.length?p(this):da.reading||I.nextTick(e,this))),ea},c.prototype.addListener=
c.prototype.on,c.prototype.removeListener=function(na,ea){ea=K.prototype.removeListener.call(this,na,ea);return"readable"===na&&I.nextTick(a,this),ea},c.prototype.removeAllListeners=function(na){var ea=K.prototype.removeAllListeners.apply(this,arguments);return"readable"!==na&&void 0!==na||I.nextTick(a,this),ea},c.prototype.resume=function(){var na=this._readableState;na.flowing||(m("resume"),na.flowing=!na.readableListening,na.resumeScheduled||(na.resumeScheduled=!0,I.nextTick(n,this,na)));return na.paused=
!1,this},c.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(na){var ea=this,da=this._readableState,ia=!1,Oa;for(Oa in na.on("end",function(){if(m("wrapped end"),da.decoder&&!da.ended){var Va=da.decoder.end();Va&&Va.length&&ea.push(Va)}ea.push(null)}),na.on("data",function(Va){(m("wrapped data"),da.decoder&&
(Va=da.decoder.write(Va)),da.objectMode&&null==Va)||(da.objectMode||Va&&Va.length)&&(ea.push(Va)||(ia=!0,na.pause()))}),na)void 0===this[Oa]&&"function"==typeof na[Oa]&&(this[Oa]=function(Va){return function(){return na[Va].apply(na,arguments)}}(Oa));for(Oa=0;Oa<Ga.length;Oa++)na.on(Ga[Oa],this.emit.bind(this,Ga[Oa]));return this._read=function(Va){m("wrapped _read",Va);ia&&(ia=!1,na.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=function(){return void 0===u&&(u=mha),
u(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(na){this._readableState&&(this._readableState.flowing=na)}}),c._fromList=r,Object.defineProperty(c.prototype,
"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(na,ea){return void 0===B&&(B=Z_),B(c,na,ea)}),KN}function nha(){function g(F){var L=this;this.entry=this.next=null;this.finish=function(){var U=L.entry;for(L.entry=null;U;){var T=U.callback;F.pendingcb--;T(void 0);U=U.next}F.corkedRequestsFree.next=L;!0}}function c(){}function k(F,L,U){e=e||yA();F=F||{};"boolean"!=typeof U&&(U=L instanceof e);this.objectMode=!!F.objectMode;
U&&(this.objectMode=this.objectMode||!!F.writableObjectMode);this.highWaterMark=I(this,F,"writableHighWaterMark",U);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==F.decodeStrings;this.defaultEncoding=F.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(T){!function(Y,wa){var Ga=Y._writableState,na=Ga.sync,ea=Ga.writecb;if("function"!=typeof ea)throw new aa;(function(da){da.writing=
!1;da.writecb=null;da.length-=da.writelen;da.writelen=0}(Ga),wa)?!function(da,ia,Oa,Va,eb){--ia.pendingcb;Oa?(n.nextTick(eb,Va),n.nextTick(a,da,ia),da._writableState.errorEmitted=!0,H(da,Va)):(eb(Va),da._writableState.errorEmitted=!0,H(da,Va),a(da,ia))}(Y,Ga,na,wa,ea):((wa=d(Ga)||Y.destroyed)||Ga.corked||Ga.bufferProcessing||!Ga.bufferedRequest||b(Y,Ga),na?n.nextTick(p,Y,Ga,wa,ea):p(Y,Ga,wa,ea))}(L,T)};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=
0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==F.emitClose;this.autoDestroy=!!F.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function f(F){var L=this instanceof(e=e||yA());if(!L&&!D.call(f,this))return new f(F);this._writableState=new k(F,this,L);this.writable=!0;F&&("function"==typeof F.write&&(this._write=F.write),"function"==typeof F.writev&&(this._writev=F.writev),"function"==typeof F.destroy&&(this._destroy=F.destroy),"function"==typeof F.final&&(this._final=
F.final));r.call(this)}function l(F,L,U,T,Y,wa,Ga){L.writelen=T;L.writecb=Ga;L.writing=!0;L.sync=!0;L.destroyed?L.onwrite(new t("write")):U?F._writev(Y,L.onwrite):F._write(Y,wa,L.onwrite);L.sync=!1}function p(F,L,U,T){U||(0===L.length&&L.needDrain&&(L.needDrain=!1,F.emit("drain")),!0);L.pendingcb--;T();a(F,L)}function b(F,L){L.bufferProcessing=!0;var U=L.bufferedRequest;if(F._writev&&U&&U.next){var T=Array(L.bufferedRequestCount),Y=L.corkedRequestsFree;Y.entry=U;for(var wa=0,Ga=!0;U;)T[wa]=U,U.isBuf||
(Ga=!1),U=U.next,wa+=1;T.allBuffers=Ga;l(F,L,!0,L.length,T,"",Y.finish);L.pendingcb++;L.lastBufferedRequest=null;Y.next?(L.corkedRequestsFree=Y.next,Y.next=null):L.corkedRequestsFree=new g(L);L.bufferedRequestCount=0}else{for(;U&&(T=U.chunk,l(F,L,!1,L.objectMode?1:T.length,T,U.encoding,U.callback),U=U.next,L.bufferedRequestCount--,!L.writing););null===U&&(L.lastBufferedRequest=null)}L.bufferedRequest=U;L.bufferProcessing=!1}function d(F){return F.ending&&0===F.length&&null===F.bufferedRequest&&!F.finished&&
!F.writing}function h(F,L){F._final(function(U){L.pendingcb--;U&&H(F,U);L.prefinished=!0;F.emit("prefinish");a(F,L)})}function a(F,L){var U=d(L),T;if(T=U)L.prefinished||L.finalCalled||("function"!=typeof F._final||L.destroyed?(L.prefinished=!0,F.emit("prefinish")):(L.pendingcb++,L.finalCalled=!0,n.nextTick(h,F,L))),T=(!0,0===L.pendingcb&&(L.finished=!0,F.emit("finish"),L.autoDestroy));T&&(L=F._readableState,(!L||L.autoDestroy&&L.endEmitted)&&F.destroy());return U}if($_)return LN;$_=!0;var e,n=Jg;
LN=f;f.WritableState=k;var q={deprecate:a0},r=AF,v=Yg.Buffer,y=oha.Uint8Array||function(){},D,E=X_,I=Y_.getHighWaterMark,K=Qo.codes,P=K.ERR_INVALID_ARG_TYPE,N=K.ERR_METHOD_NOT_IMPLEMENTED,aa=K.ERR_MULTIPLE_CALLBACK,m=K.ERR_STREAM_CANNOT_PIPE,t=K.ERR_STREAM_DESTROYED,u=K.ERR_STREAM_NULL_VALUES,B=K.ERR_STREAM_WRITE_AFTER_END,A=K.ERR_UNKNOWN_ENCODING,H=E.errorOrDestroy;return hh(f,r),k.prototype.getBuffer=function(){for(var F=this.bufferedRequest,L=[];F;)L.push(F),F=F.next;return L},function(){try{Object.defineProperty(k.prototype,
"buffer",{get:q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(F){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(D=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(F){return!!D.call(this,F)||this===f&&F&&F._writableState instanceof k}})):D=function(F){return F instanceof this},f.prototype.pipe=
function(){H(this,new m)},f.prototype.write=function(F,L,U){var T,Y=this._writableState,wa=!1,Ga=!Y.objectMode&&(T=F,v.isBuffer(T)||T instanceof y);return Ga&&!v.isBuffer(F)&&(F=v.from(F)),"function"==typeof L&&(U=L,L=null),Ga?L="buffer":L||(L=Y.defaultEncoding),"function"!=typeof U&&(U=c),Y.ending?function(na,ea){var da=new B;H(na,da);n.nextTick(ea,da)}(this,U):(Ga||function(na,ea,da,ia){var Oa;return null===da?Oa=new u:"string"==typeof da||ea.objectMode||(Oa=new P("chunk",["string","Buffer"],da)),
!Oa||(H(na,Oa),n.nextTick(ia,Oa),!1)}(this,Y,F,U))&&(Y.pendingcb++,wa=function(na,ea,da,ia,Oa,Va){if(!da){var eb=ia;ea.objectMode||!1===ea.decodeStrings||"string"!=typeof eb||(eb=v.from(eb,Oa));ia!==eb&&(da=!0,Oa="buffer",ia=eb)}var Sa=ea.objectMode?1:ia.length;ea.length+=Sa;(eb=ea.length<ea.highWaterMark)||(ea.needDrain=!0);ea.writing||ea.corked?(na=ea.lastBufferedRequest,ea.lastBufferedRequest={chunk:ia,encoding:Oa,isBuf:da,callback:Va,next:null},na?na.next=ea.lastBufferedRequest:ea.bufferedRequest=
ea.lastBufferedRequest,ea.bufferedRequestCount+=1):l(na,ea,!1,Sa,ia,Oa,Va);return eb}(this,Y,Ga,F,L,U)),wa},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var F=this._writableState;F.corked&&(F.corked--,F.writing||F.corked||F.bufferProcessing||!F.bufferedRequest||b(this,F))},f.prototype.setDefaultEncoding=function(F){if("string"==typeof F&&(F=F.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((F+"").toLowerCase())))throw new A(F);
return this._writableState.defaultEncoding=F,this},Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),f.prototype._write=function(F,L,U){U(new N("_write()"))},f.prototype._writev=null,f.prototype.end=function(F,L,U){var T=this._writableState;"function"==typeof F?(U=F,F=null,L=
null):"function"==typeof L&&(U=L,L=null);null!=F&&this.write(F,L);T.corked&&(T.corked=1,this.uncork());T.ending||(F=U,T.ending=!0,a(this,T),F&&(T.finished?n.nextTick(F):this.once("finish",F)),T.ended=!0,this.writable=!1);return this},Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(F){this._writableState&&
(this._writableState.destroyed=F)}}),f.prototype.destroy=E.destroy,f.prototype._undestroy=E.undestroy,f.prototype._destroy=function(F,L){L(F)},LN}function yA(){function g(a){if(!(this instanceof g))return new g(a);p.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||f.nextTick(k,this)}function k(a){a.end()}if(b0)return MN;
b0=!0;var f=Jg,l=Object.keys||function(a){var e=[],n;for(n in a)e.push(n);return e};MN=g;var p=V_(),b=nha();hh(g,p);l=l(b.prototype);for(var d=0;d<l.length;d++){var h=l[d];g.prototype[h]||(g.prototype[h]=b.prototype[h])}return Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),
Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),MN}function pha(){}function c0(g,
c){var k=Object.keys(g);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(g);c&&(f=f.filter(function(l){return Object.getOwnPropertyDescriptor(g,l).enumerable}));k.push.apply(k,f)}return k}function qha(g,c){for(var k=0;k<c.length;k++){var f=c[k];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(g,f.key,f)}}function d0(g,c){NN(g,c);BF(g)}function BF(g){g._writableState&&!g._writableState.emitClose||g._readableState&&!g._readableState.emitClose||
g.emit("close")}function NN(g,c){g.emit("error",c)}function ys(g,c,k){return c in g?Object.defineProperty(g,c,{value:k,enumerable:!0,configurable:!0,writable:!0}):g[c]=k,g}function zs(g,c){return{value:g,done:c}}function rha(g){var c=g[As];if(null!==c){var k=g[Fu].read();null!==k&&(g[Gu]=null,g[As]=null,g[Hu]=null,c(zs(k,!1)))}}function sha(g){e0.nextTick(rha,g)}function tha(){function g(na,ea,da){E=E||CF();na=na||{};"boolean"!=typeof da&&(da=ea instanceof E);this.objectMode=!!na.objectMode;da&&(this.objectMode=
this.objectMode||!!na.readableObjectMode);this.highWaterMark=H(this,na,"readableHighWaterMark",da);this.buffer=new A;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==na.emitClose;this.autoDestroy=!!na.autoDestroy;this.destroyed=!1;this.defaultEncoding=na.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=
!1;this.encoding=this.decoder=null;na.encoding&&(t||(t=$q.StringDecoder),this.decoder=new t(na.encoding),this.encoding=na.encoding)}function c(na){if(E=E||CF(),!(this instanceof c))return new c(na);this._readableState=new g(na,this,this instanceof E);this.readable=!0;na&&("function"==typeof na.read&&(this._read=na.read),"function"==typeof na.destroy&&(this._destroy=na.destroy));K.call(this)}function k(na,ea,da,ia,Oa){m("readableAddChunk",ea);var Va,eb=na._readableState;if(null===ea)eb.reading=!1,
function(Sa,Bb){if(m("onEofChunk"),!Bb.ended){if(Bb.decoder){var Z=Bb.decoder.end();Z&&Z.length&&(Bb.buffer.push(Z),Bb.length+=Bb.objectMode?1:Z.length)}Bb.ended=!0;Bb.sync?p(Sa):(Bb.needReadable=!1,Bb.emittedReadable||(Bb.emittedReadable=!0,b(Sa)))}}(na,eb);else if(Oa||(Va=function(Sa,Bb){var Z;var sa=Bb;P.isBuffer(sa)||sa instanceof N||"string"==typeof Bb||void 0===Bb||Sa.objectMode||(Z=new L("chunk",["string","Buffer","Uint8Array"],Bb));return Z}(eb,ea)),Va)wa(na,Va);else if(eb.objectMode||ea&&
0<ea.length)if("string"==typeof ea||eb.objectMode||Object.getPrototypeOf(ea)===P.prototype||(ea=P.from(ea)),ia)eb.endEmitted?wa(na,new Y):f(na,eb,ea,!0);else if(eb.ended)wa(na,new U);else{if(eb.destroyed)return!1;eb.reading=!1;eb.decoder&&!da?(ea=eb.decoder.write(ea),eb.objectMode||0!==ea.length?f(na,eb,ea,!1):d(na,eb)):f(na,eb,ea,!1)}else ia||(eb.reading=!1,d(na,eb));return!eb.ended&&(eb.length<eb.highWaterMark||0===eb.length)}function f(na,ea,da,ia){ea.flowing&&0===ea.length&&!ea.sync?(ea.awaitDrain=
0,na.emit("data",da)):(ea.length+=ea.objectMode?1:da.length,ia?ea.buffer.unshift(da):ea.buffer.push(da),ea.needReadable&&p(na));d(na,ea)}function l(na,ea){if(0>=na||0===ea.length&&ea.ended)na=0;else if(ea.objectMode)na=1;else if(na!=na)na=ea.flowing&&ea.length?ea.buffer.head.data.length:ea.length;else{if(na>ea.highWaterMark){var da=na;var ia=(1073741824<=da?da=1073741824:(da--,da|=da>>>1,da|=da>>>2,da|=da>>>4,da|=da>>>8,da|=da>>>16,da++),da);ea.highWaterMark=ia}na=na<=ea.length?na:ea.ended?ea.length:
(ea.needReadable=!0,0)}return na}function p(na){var ea=na._readableState;m("emitReadable",ea.needReadable,ea.emittedReadable);ea.needReadable=!1;ea.emittedReadable||(m("emitReadable",ea.flowing),ea.emittedReadable=!0,I.nextTick(b,na))}function b(na){var ea=na._readableState;m("emitReadable_",ea.destroyed,ea.length,ea.ended);ea.destroyed||!ea.length&&!ea.ended||(na.emit("readable"),ea.emittedReadable=!1);ea.needReadable=!ea.flowing&&!ea.ended&&ea.length<=ea.highWaterMark;q(na)}function d(na,ea){ea.readingMore||
(ea.readingMore=!0,I.nextTick(h,na,ea))}function h(na,ea){for(;!ea.reading&&!ea.ended&&(ea.length<ea.highWaterMark||ea.flowing&&0===ea.length);){var da=ea.length;if(m("maybeReadMore read 0"),na.read(0),da===ea.length)break}ea.readingMore=!1}function a(na){var ea=na._readableState;ea.readableListening=0<na.listenerCount("readable");ea.resumeScheduled&&!ea.paused?ea.flowing=!0:0<na.listenerCount("data")&&na.resume()}function e(na){m("readable nexttick read 0");na.read(0)}function n(na,ea){m("resume",
ea.reading);ea.reading||na.read(0);ea.resumeScheduled=!1;na.emit("resume");q(na);ea.flowing&&!ea.reading&&na.read(0)}function q(na){var ea=na._readableState;for(m("flow",ea.flowing);ea.flowing&&null!==na.read(););}function r(na,ea){return 0===ea.length?null:(ea.objectMode?da=ea.buffer.shift():!na||na>=ea.length?(da=ea.decoder?ea.buffer.join(""):1===ea.buffer.length?ea.buffer.first():ea.buffer.concat(ea.length),ea.buffer.clear()):da=ea.buffer.consume(na,ea.decoder),da);var da}function v(na){var ea=
na._readableState;m("endReadable",ea.endEmitted);ea.endEmitted||(ea.ended=!0,I.nextTick(y,ea,na))}function y(na,ea){if(m("endReadableNT",na.endEmitted,na.length),!na.endEmitted&&0===na.length&&(na.endEmitted=!0,ea.readable=!1,ea.emit("end"),na.autoDestroy))na=ea._writableState,(!na||na.autoDestroy&&na.finished)&&ea.destroy()}function D(na,ea){for(var da=0,ia=na.length;da<ia;da++)if(na[da]===ea)return da;return-1}if(f0)return ON;f0=!0;var E,I=Jg;ON=c;c.ReadableState=g;Fl.EventEmitter;var K=AF,P=Yg.Buffer,
N=uha.Uint8Array||function(){},aa=Cg;var m=aa&&aa.debuglog?aa.debuglog("stream"):function(){};var t,u,B,A=vha;aa=g0;var H=h0.getHighWaterMark,F=Qo.codes,L=F.ERR_INVALID_ARG_TYPE,U=F.ERR_STREAM_PUSH_AFTER_EOF,T=F.ERR_METHOD_NOT_IMPLEMENTED,Y=F.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;hh(c,K);var wa=aa.errorOrDestroy,Ga=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},
set:function(na){this._readableState&&(this._readableState.destroyed=na)}});c.prototype.destroy=aa.destroy;c.prototype._undestroy=aa.undestroy;c.prototype._destroy=function(na,ea){ea(na)};c.prototype.push=function(na,ea){var da,ia=this._readableState;return ia.objectMode?da=!0:"string"==typeof na&&((ea=ea||ia.defaultEncoding)!==ia.encoding&&(na=P.from(na,ea),ea=""),da=!0),k(this,na,ea,!1,da)};c.prototype.unshift=function(na){return k(this,na,null,!0,!1)};c.prototype.isPaused=function(){return!1===
this._readableState.flowing};c.prototype.setEncoding=function(na){t||(t=$q.StringDecoder);na=new t(na);this._readableState.decoder=na;this._readableState.encoding=this._readableState.decoder.encoding;for(var ea=this._readableState.buffer.head,da="";null!==ea;)da+=na.write(ea.data),ea=ea.next;return this._readableState.buffer.clear(),""!==da&&this._readableState.buffer.push(da),this._readableState.length=da.length,this};return c.prototype.read=function(na){m("read",na);na=parseInt(na,10);var ea=this._readableState,
da=na;if(0!==na&&(ea.emittedReadable=!1),0===na&&ea.needReadable&&((0!==ea.highWaterMark?ea.length>=ea.highWaterMark:0<ea.length)||ea.ended))return m("read: emitReadable",ea.length,ea.ended),0===ea.length&&ea.ended?v(this):p(this),null;if(0===(na=l(na,ea))&&ea.ended)return 0===ea.length&&v(this),null;var ia,Oa=ea.needReadable;return m("need readable",Oa),(0===ea.length||ea.length-na<ea.highWaterMark)&&m("length less than watermark",Oa=!0),ea.ended||ea.reading?m("reading or ended",!1):Oa&&(m("do read"),
ea.reading=!0,ea.sync=!0,0===ea.length&&(ea.needReadable=!0),this._read(ea.highWaterMark),ea.sync=!1,ea.reading||(na=l(da,ea))),null===(ia=0<na?r(na,ea):null)?(ea.needReadable=ea.length<=ea.highWaterMark,na=0):(ea.length-=na,ea.awaitDrain=0),0===ea.length&&(ea.ended||(ea.needReadable=!0),da!==na&&ea.ended&&v(this)),null!==ia&&this.emit("data",ia),ia},c.prototype._read=function(na){wa(this,new T("_read()"))},c.prototype.pipe=function(na,ea){function da(ma,ta){m("onunpipe");ma===Z&&ta&&!1===ta.hasUnpiped&&
(ta.hasUnpiped=!0,m("cleanup"),na.removeListener("close",eb),na.removeListener("finish",Sa),na.removeListener("drain",Da),na.removeListener("error",Va),na.removeListener("unpipe",da),Z.removeListener("end",ia),Z.removeListener("end",Bb),Z.removeListener("data",Oa),X=!0,!sa.awaitDrain||na._writableState&&!na._writableState.needDrain||Da())}function ia(){m("onend");na.end()}function Oa(ma){m("ondata");ma=na.write(ma);m("dest.write",ma);!1===ma&&((1===sa.pipesCount&&sa.pipes===na||1<sa.pipesCount&&-1!==
D(sa.pipes,na))&&!X&&(m("false write response, pause",sa.awaitDrain),sa.awaitDrain++),Z.pause())}function Va(ma){m("onerror",ma);Bb();na.removeListener("error",Va);0===na.listeners("error").length&&wa(na,ma)}function eb(){na.removeListener("finish",Sa);Bb()}function Sa(){m("onfinish");na.removeListener("close",eb);Bb()}function Bb(){m("unpipe");Z.unpipe(na)}var Z=this,sa=this._readableState;switch(sa.pipesCount){case 0:sa.pipes=na;break;case 1:sa.pipes=[sa.pipes,na];break;default:sa.pipes.push(na)}sa.pipesCount+=
1;m("pipe count=%d opts=%j",sa.pipesCount,ea);ea=ea&&!1===ea.end||na===I.stdout||na===I.stderr?Bb:ia;sa.endEmitted?I.nextTick(ea):Z.once("end",ea);na.on("unpipe",da);var Da=function(ma){return function(){var ta=ma._readableState;m("pipeOnDrain",ta.awaitDrain);ta.awaitDrain&&ta.awaitDrain--;0===ta.awaitDrain&&ma.listeners("data").length&&(ta.flowing=!0,q(ma))}}(Z);na.on("drain",Da);var X=!1;return Z.on("data",Oa),function(ma,ta,Pa){if("function"==typeof ma.prependListener)return ma.prependListener(ta,
Pa);ma._events&&ma._events[ta]?Array.isArray(ma._events[ta])?ma._events[ta].unshift(Pa):ma._events[ta]=[Pa,ma._events[ta]]:ma.on(ta,Pa)}(na,"error",Va),na.once("close",eb),na.once("finish",Sa),na.emit("pipe",Z),sa.flowing||(m("pipe resume"),Z.resume()),na},c.prototype.unpipe=function(na){var ea=this._readableState,da={hasUnpiped:!1};if(0===ea.pipesCount)return this;if(1===ea.pipesCount)return na&&na!==ea.pipes||(na||(na=ea.pipes),ea.pipes=null,ea.pipesCount=0,ea.flowing=!1,na&&na.emit("unpipe",this,
da)),this;if(!na){na=ea.pipes;da=ea.pipesCount;ea.pipes=null;ea.pipesCount=0;ea.flowing=!1;for(ea=0;ea<da;ea++)na[ea].emit("unpipe",this,{hasUnpiped:!1});return this}var ia=D(ea.pipes,na);return-1===ia||(ea.pipes.splice(ia,1),--ea.pipesCount,1===ea.pipesCount&&(ea.pipes=ea.pipes[0]),na.emit("unpipe",this,da)),this},c.prototype.on=function(na,ea){ea=K.prototype.on.call(this,na,ea);var da=this._readableState;return"data"===na?(da.readableListening=0<this.listenerCount("readable"),!1!==da.flowing&&this.resume()):
"readable"===na&&(da.endEmitted||da.readableListening||(da.readableListening=da.needReadable=!0,da.flowing=!1,da.emittedReadable=!1,m("on readable",da.length,da.reading),da.length?p(this):da.reading||I.nextTick(e,this))),ea},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(na,ea){ea=K.prototype.removeListener.call(this,na,ea);return"readable"===na&&I.nextTick(a,this),ea},c.prototype.removeAllListeners=function(na){var ea=K.prototype.removeAllListeners.apply(this,arguments);
return"readable"!==na&&void 0!==na||I.nextTick(a,this),ea},c.prototype.resume=function(){var na=this._readableState;na.flowing||(m("resume"),na.flowing=!na.readableListening,na.resumeScheduled||(na.resumeScheduled=!0,I.nextTick(n,this,na)));return na.paused=!1,this},c.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=
function(na){var ea=this,da=this._readableState,ia=!1,Oa;for(Oa in na.on("end",function(){if(m("wrapped end"),da.decoder&&!da.ended){var Va=da.decoder.end();Va&&Va.length&&ea.push(Va)}ea.push(null)}),na.on("data",function(Va){(m("wrapped data"),da.decoder&&(Va=da.decoder.write(Va)),da.objectMode&&null==Va)||(da.objectMode||Va&&Va.length)&&(ea.push(Va)||(ia=!0,na.pause()))}),na)void 0===this[Oa]&&"function"==typeof na[Oa]&&(this[Oa]=function(Va){return function(){return na[Va].apply(na,arguments)}}(Oa));
for(Oa=0;Oa<Ga.length;Oa++)na.on(Ga[Oa],this.emit.bind(this,Ga[Oa]));return this._read=function(Va){m("wrapped _read",Va);ia&&(ia=!1,na.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=function(){return void 0===u&&(u=wha),u(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&
this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(na){this._readableState&&(this._readableState.flowing=na)}}),c._fromList=r,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(na,ea){return void 0===B&&(B=Z_),B(c,na,ea)}),ON}function i0(){function g(F){var L=this;this.entry=this.next=
null;this.finish=function(){var U=L.entry;for(L.entry=null;U;){var T=U.callback;F.pendingcb--;T(void 0);U=U.next}F.corkedRequestsFree.next=L;!0}}function c(){}function k(F,L,U){e=e||CF();F=F||{};"boolean"!=typeof U&&(U=L instanceof e);this.objectMode=!!F.objectMode;U&&(this.objectMode=this.objectMode||!!F.writableObjectMode);this.highWaterMark=I(this,F,"writableHighWaterMark",U);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==F.decodeStrings;
this.defaultEncoding=F.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(T){!function(Y,wa){var Ga=Y._writableState,na=Ga.sync,ea=Ga.writecb;if("function"!=typeof ea)throw new aa;(function(da){da.writing=!1;da.writecb=null;da.length-=da.writelen;da.writelen=0}(Ga),wa)?!function(da,ia,Oa,Va,eb){--ia.pendingcb;Oa?(n.nextTick(eb,Va),n.nextTick(a,da,ia),da._writableState.errorEmitted=!0,H(da,Va)):(eb(Va),da._writableState.errorEmitted=
!0,H(da,Va),a(da,ia))}(Y,Ga,na,wa,ea):((wa=d(Ga)||Y.destroyed)||Ga.corked||Ga.bufferProcessing||!Ga.bufferedRequest||b(Y,Ga),na?n.nextTick(p,Y,Ga,wa,ea):p(Y,Ga,wa,ea))}(L,T)};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==F.emitClose;this.autoDestroy=!!F.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function f(F){var L=this instanceof(e=e||CF());if(!L&&!D.call(f,
this))return new f(F);this._writableState=new k(F,this,L);this.writable=!0;F&&("function"==typeof F.write&&(this._write=F.write),"function"==typeof F.writev&&(this._writev=F.writev),"function"==typeof F.destroy&&(this._destroy=F.destroy),"function"==typeof F.final&&(this._final=F.final));r.call(this)}function l(F,L,U,T,Y,wa,Ga){L.writelen=T;L.writecb=Ga;L.writing=!0;L.sync=!0;L.destroyed?L.onwrite(new t("write")):U?F._writev(Y,L.onwrite):F._write(Y,wa,L.onwrite);L.sync=!1}function p(F,L,U,T){U||(0===
L.length&&L.needDrain&&(L.needDrain=!1,F.emit("drain")),!0);L.pendingcb--;T();a(F,L)}function b(F,L){L.bufferProcessing=!0;var U=L.bufferedRequest;if(F._writev&&U&&U.next){var T=Array(L.bufferedRequestCount),Y=L.corkedRequestsFree;Y.entry=U;for(var wa=0,Ga=!0;U;)T[wa]=U,U.isBuf||(Ga=!1),U=U.next,wa+=1;T.allBuffers=Ga;l(F,L,!0,L.length,T,"",Y.finish);L.pendingcb++;L.lastBufferedRequest=null;Y.next?(L.corkedRequestsFree=Y.next,Y.next=null):L.corkedRequestsFree=new g(L);L.bufferedRequestCount=0}else{for(;U&&
(T=U.chunk,l(F,L,!1,L.objectMode?1:T.length,T,U.encoding,U.callback),U=U.next,L.bufferedRequestCount--,!L.writing););null===U&&(L.lastBufferedRequest=null)}L.bufferedRequest=U;L.bufferProcessing=!1}function d(F){return F.ending&&0===F.length&&null===F.bufferedRequest&&!F.finished&&!F.writing}function h(F,L){F._final(function(U){L.pendingcb--;U&&H(F,U);L.prefinished=!0;F.emit("prefinish");a(F,L)})}function a(F,L){var U=d(L),T;if(T=U)L.prefinished||L.finalCalled||("function"!=typeof F._final||L.destroyed?
(L.prefinished=!0,F.emit("prefinish")):(L.pendingcb++,L.finalCalled=!0,n.nextTick(h,F,L))),T=(!0,0===L.pendingcb&&(L.finished=!0,F.emit("finish"),L.autoDestroy));T&&(L=F._readableState,(!L||L.autoDestroy&&L.endEmitted)&&F.destroy());return U}if(j0)return PN;j0=!0;var e,n=Jg;PN=f;f.WritableState=k;var q={deprecate:a0},r=AF,v=Yg.Buffer,y=xha.Uint8Array||function(){},D,E=g0,I=h0.getHighWaterMark,K=Qo.codes,P=K.ERR_INVALID_ARG_TYPE,N=K.ERR_METHOD_NOT_IMPLEMENTED,aa=K.ERR_MULTIPLE_CALLBACK,m=K.ERR_STREAM_CANNOT_PIPE,
t=K.ERR_STREAM_DESTROYED,u=K.ERR_STREAM_NULL_VALUES,B=K.ERR_STREAM_WRITE_AFTER_END,A=K.ERR_UNKNOWN_ENCODING,H=E.errorOrDestroy;return hh(f,r),k.prototype.getBuffer=function(){for(var F=this.bufferedRequest,L=[];F;)L.push(F),F=F.next;return L},function(){try{Object.defineProperty(k.prototype,"buffer",{get:q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(F){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&
"function"==typeof Function.prototype[Symbol.hasInstance]?(D=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(F){return!!D.call(this,F)||this===f&&F&&F._writableState instanceof k}})):D=function(F){return F instanceof this},f.prototype.pipe=function(){H(this,new m)},f.prototype.write=function(F,L,U){var T,Y=this._writableState,wa=!1,Ga=!Y.objectMode&&(T=F,v.isBuffer(T)||T instanceof y);return Ga&&!v.isBuffer(F)&&(F=v.from(F)),"function"==typeof L&&
(U=L,L=null),Ga?L="buffer":L||(L=Y.defaultEncoding),"function"!=typeof U&&(U=c),Y.ending?function(na,ea){var da=new B;H(na,da);n.nextTick(ea,da)}(this,U):(Ga||function(na,ea,da,ia){var Oa;return null===da?Oa=new u:"string"==typeof da||ea.objectMode||(Oa=new P("chunk",["string","Buffer"],da)),!Oa||(H(na,Oa),n.nextTick(ia,Oa),!1)}(this,Y,F,U))&&(Y.pendingcb++,wa=function(na,ea,da,ia,Oa,Va){if(!da){var eb=ia;ea.objectMode||!1===ea.decodeStrings||"string"!=typeof eb||(eb=v.from(eb,Oa));ia!==eb&&(da=!0,
Oa="buffer",ia=eb)}var Sa=ea.objectMode?1:ia.length;ea.length+=Sa;(eb=ea.length<ea.highWaterMark)||(ea.needDrain=!0);ea.writing||ea.corked?(na=ea.lastBufferedRequest,ea.lastBufferedRequest={chunk:ia,encoding:Oa,isBuf:da,callback:Va,next:null},na?na.next=ea.lastBufferedRequest:ea.bufferedRequest=ea.lastBufferedRequest,ea.bufferedRequestCount+=1):l(na,ea,!1,Sa,ia,Oa,Va);return eb}(this,Y,Ga,F,L,U)),wa},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var F=this._writableState;
F.corked&&(F.corked--,F.writing||F.corked||F.bufferProcessing||!F.bufferedRequest||b(this,F))},f.prototype.setDefaultEncoding=function(F){if("string"==typeof F&&(F=F.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((F+"").toLowerCase())))throw new A(F);return this._writableState.defaultEncoding=F,this},Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),
Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),f.prototype._write=function(F,L,U){U(new N("_write()"))},f.prototype._writev=null,f.prototype.end=function(F,L,U){var T=this._writableState;"function"==typeof F?(U=F,F=null,L=null):"function"==typeof L&&(U=L,L=null);null!=F&&this.write(F,L);T.corked&&(T.corked=1,this.uncork());T.ending||(F=U,T.ending=!0,a(this,T),F&&(T.finished?n.nextTick(F):this.once("finish",F)),T.ended=
!0,this.writable=!1);return this},Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(F){this._writableState&&(this._writableState.destroyed=F)}}),f.prototype.destroy=E.destroy,f.prototype._undestroy=E.undestroy,f.prototype._destroy=function(F,L){L(F)},PN}function CF(){function g(a){if(!(this instanceof
g))return new g(a);p.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||f.nextTick(k,this)}function k(a){a.end()}if(k0)return QN;k0=!0;var f=Jg,l=Object.keys||function(a){var e=[],n;for(n in a)e.push(n);return e};QN=g;var p=tha(),b=i0();hh(g,p);l=l(b.prototype);for(var d=0;d<l.length;d++){var h=l[d];g.prototype[h]||(g.prototype[h]=
b.prototype[h])}return Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==
this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),QN}function yha(g,c){var k=this._transformState;k.transforming=!1;var f=k.writecb;if(null===f)return this.emit("error",new zha);k.writechunk=null;k.writecb=null;null!=c&&this.push(c);f(g);g=this._readableState;g.reading=!1;(g.needReadable||g.length<
g.highWaterMark)&&this._read(g.highWaterMark)}function Qp(g){if(!(this instanceof Qp))return new Qp(g);DF.call(this,g);this._transformState={afterTransform:yha.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;g&&("function"==typeof g.transform&&(this._transform=g.transform),"function"==typeof g.flush&&(this._flush=g.flush));this.on("prefinish",Aha)}function Aha(){var g=this;"function"!=typeof this._flush||
this._readableState.destroyed?l0(this,null,null):this._flush(function(c,k){l0(g,c,k)})}function l0(g,c,k){if(c)return g.emit("error",c);if(null!=k&&g.push(k),g._writableState.length)throw new Bha;if(g._transformState.transforming)throw new Cha;return g.push(null)}function zA(g){if(!(this instanceof zA))return new zA(g);m0.call(this,g)}function n0(g){if(g)throw g;}function Dha(g,c,k,f){f=function(b){var d=!1;return function(){d||(d=!0,b.apply(void 0,arguments))}}(f);var l=!1;g.on("close",function(){l=
!0});void 0===RN&&(RN=SN);RN(g,{readable:c,writable:k},function(b){if(b)return f(b);l=!0;f()});var p=!1;return function(b){if(!l&&!p)return p=!0,g.setHeader&&"function"==typeof g.abort?g.abort():"function"==typeof g.destroy?g.destroy():(f(b||new Eha("pipe")),void 0)}}function o0(g){g()}function Fha(g,c){return g.pipe(c)}function Ln(){TN.call(this||UN)}function Bs(){function g(l){k.call(this||Vj);(this||Vj).hashMode="string"===typeof l;(this||Vj).hashMode?(this||Vj)[l]=(this||Vj)._finalOrDigest:(this||
Vj).final=(this||Vj)._finalOrDigest;(this||Vj)._final&&((this||Vj).__final=(this||Vj)._final,(this||Vj)._final=null);(this||Vj)._decoder=null;(this||Vj)._encoding=null}if(p0)return q0;p0=!0;var c=Nh().Buffer,k=Mn.Transform,f=$q.StringDecoder;Fh()(g,k);g.prototype.update=function(l,p,b){"string"===typeof l&&(l=c.from(l,p));l=this._update(l);if((this||Vj).hashMode)return this||Vj;b&&(l=this._toString(l,b));return l};g.prototype.setAutoPadding=function(){};g.prototype.getAuthTag=function(){throw Error("trying to get auth tag in unsupported state");
};g.prototype.setAuthTag=function(){throw Error("trying to set auth tag in unsupported state");};g.prototype.setAAD=function(){throw Error("trying to set aad in unsupported state");};g.prototype._transform=function(l,p,b){try{(this||Vj).hashMode?this._update(l):this.push(this._update(l))}catch(h){var d=h}finally{b(d)}};g.prototype._flush=function(l){try{this.push(this.__final())}catch(b){var p=b}l(p)};g.prototype._finalOrDigest=function(l){var p=this.__final()||c.alloc(0);l&&(p=this._toString(p,l,
!0));return p};g.prototype._toString=function(l,p,b){(this||Vj)._decoder||((this||Vj)._decoder=new f(p),(this||Vj)._encoding=p);if((this||Vj)._encoding!==p)throw Error("can't switch encodings");l=(this||Vj)._decoder.write(l);b&&(l+=(this||Vj)._decoder.end());return l};return q0=g}function AA(){function g(b){p.call(this,"digest");this._hash=b}if(r0)return s0;r0=!0;var c=Fh(),k=DN(),f=EN(),l=FN(),p=Bs();c(g,p);g.prototype._update=function(b){this._hash.update(b)};g.prototype._final=function(){return this._hash.digest()};
return s0=function(b){b=b.toLowerCase();return"md5"===b?new k:"rmd160"===b||"ripemd160"===b?new f:new g(l(b))}}function Gha(){function g(p,b){f.call(this,"digest");"string"===typeof b&&(b=k.from(b));this._alg=p;this._key=b;64<b.length?b=p(b):64>b.length&&(b=k.concat([b,l],64));p=this._ipad=k.allocUnsafe(64);for(var d=this._opad=k.allocUnsafe(64),h=0;64>h;h++)p[h]=b[h]^54,d[h]=b[h]^92;this._hash=[p]}if(t0)return u0;t0=!0;var c=Fh(),k=Nh().Buffer,f=Bs(),l=k.alloc(128);c(g,f);g.prototype._update=function(p){this._hash.push(p)};
g.prototype._final=function(){var p=this._alg(k.concat(this._hash));return this._alg(k.concat([this._opad,p]))};return u0=g}function v0(){if(w0)return x0;w0=!0;var g=DN();return x0=function(c){return(new g).update(c).digest()}}function y0(){function g(a,e){f.call(this,"digest");"string"===typeof e&&(e=l.from(e));var n="sha512"===a||"sha384"===a?128:64;this._alg=a;this._key=e;e.length>n?e=("rmd160"===a?new b:d(a)).update(e).digest():e.length<n&&(e=l.concat([e,h],n));for(var q=this._ipad=l.allocUnsafe(n),
r=this._opad=l.allocUnsafe(n),v=0;v<n;v++)q[v]=e[v]^54,r[v]=e[v]^92;this._hash="rmd160"===a?new b:d(a);this._hash.update(q)}if(z0)return A0;z0=!0;var c=Fh(),k=Gha(),f=Bs(),l=Nh().Buffer,p=v0(),b=EN(),d=FN(),h=l.alloc(128);c(g,f);g.prototype._update=function(a){this._hash.update(a)};g.prototype._final=function(){var a=this._hash.digest();return("rmd160"===this._alg?new b:d(this._alg)).update(this._opad).update(a).digest()};return A0=function(a,e){a=a.toLowerCase();return"rmd160"===a||"ripemd160"===
a?new g("rmd160",e):"md5"===a?new k(p,e):new g(a,e)}}function B0(){if(C0)return D0;C0=!0;var g=Math.pow(2,30)-1;return D0=function(c,k){if("number"!==typeof c)throw new TypeError("Iterations not a number");if(0>c)throw new TypeError("Bad iterations");if("number"!==typeof k)throw new TypeError("Key length not a number");if(0>k||k>g||k!==k)throw new TypeError("Bad key length");}}function E0(){if(F0)return G0;F0=!0;var g=Jg;return G0=EF.process&&EF.process.browser?"utf-8":EF.process&&EF.process.version?
6<=parseInt(g.version.split(".")[0].slice(1),10)?"utf-8":"binary":"utf-8"}function H0(){if(I0)return J0;I0=!0;var g=Nh().Buffer;return J0=function(c,k,f){if(g.isBuffer(c))return c;if("string"===typeof c)return g.from(c,k);if(ArrayBuffer.isView(c))return g.from(c.buffer);throw new TypeError(f+" must be a string, a Buffer, a typed array or a DataView");}}function K0(){function g(n,q,r){var v=c(n),y="sha512"===n||"sha384"===n?128:64;q.length>y?q=v(q):q.length<y&&(q=p.concat([q,a],y));for(var D=p.allocUnsafe(y+
e[n]),E=p.allocUnsafe(y+e[n]),I=0;I<y;I++)D[I]=q[I]^54,E[I]=q[I]^92;q=p.allocUnsafe(y+r+4);D.copy(q,0,0,y);(this||Ro).ipad1=q;(this||Ro).ipad2=D;(this||Ro).opad=E;(this||Ro).alg=n;(this||Ro).blocksize=y;(this||Ro).hash=v;(this||Ro).size=e[n]}function c(n){function q(r){return(new f).update(r).digest()}return"rmd160"===n||"ripemd160"===n?q:"md5"===n?k:function(r){return l(n).update(r).digest()}}if(L0)return M0;L0=!0;var k=v0(),f=EN(),l=FN(),p=Nh().Buffer,b=B0(),d=E0(),h=H0(),a=p.alloc(128),e={md5:16,
sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};g.prototype.run=function(n,q){n.copy(q,(this||Ro).blocksize);this.hash(q).copy((this||Ro).opad,(this||Ro).blocksize);return this.hash((this||Ro).opad)};return M0=function(n,q,r,v,y){b(r,v);n=h(n,d,"Password");q=h(q,d,"Salt");y=y||"sha1";n=new g(y,n,q.length);var D=p.allocUnsafe(v),E=p.allocUnsafe(q.length+4);q.copy(E,0,0,q.length);var I=0;y=e[y];v=Math.ceil(v/y);for(var K=1;K<=v;K++){E.writeUInt32BE(K,q.length);for(var P=n.run(E,
n.ipad1),N=P,aa=1;aa<r;aa++){N=n.run(N,n.ipad2);for(var m=0;m<y;m++)P[m]^=N[m]}P.copy(D,I);I+=y}return D}}function Hha(){function g(v){if(dn.process&&!dn.process.browser||!e||!e.importKey||!e.deriveBits)return Promise.resolve(!1);if(void 0!==q[v])return q[v];a=a||l.alloc(8);var y=k(a,a,10,128,v).then(function(){return!0}).catch(function(){return!1});return q[v]=y}function c(){return r?r:r=dn.process&&dn.process.nextTick?dn.process.nextTick:dn.queueMicrotask?dn.queueMicrotask:dn.setImmediate?dn.setImmediate:
dn.setTimeout}function k(v,y,D,E,I){return e.importKey("raw",v,{name:"PBKDF2"},!1,["deriveBits"]).then(function(K){return e.deriveBits({name:"PBKDF2",salt:y,iterations:D,hash:{name:I}},K,E<<3)}).then(function(K){return l.from(K)})}function f(v,y){v.then(function(D){c()(function(){y(null,D)})},function(D){c()(function(){y(D)})})}if(N0)return O0;N0=!0;var l=Nh().Buffer,p=B0(),b=E0(),d=K0(),h=H0(),a,e=dn.crypto&&dn.crypto.subtle,n={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",
sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},q=[],r;return O0=function(v,y,D,E,I,K){"function"===typeof I&&(K=I,I=void 0);I=I||"sha1";var P=n[I.toLowerCase()];if(P&&"function"===typeof dn.Promise){p(D,E);v=h(v,b,"Password");y=h(y,b,"Salt");if("function"!==typeof K)throw Error("No callback provided to pbkdf2");f(g(P).then(function(N){return N?k(v,y,D,E,P):d(v,y,D,E,I)}),K)}else c()(function(){try{var N=d(v,y,D,E,I)}catch(aa){return K(aa)}K(null,N)})}}function P0(){if(Q0)return FF;
Q0=!0;FF.pbkdf2=Hha();FF.pbkdf2Sync=K0();return FF}function R0(){if(S0)return en;S0=!0;en.readUInt32BE=function(f,l){return(f[0+l]<<24|f[1+l]<<16|f[2+l]<<8|f[3+l])>>>0};en.writeUInt32BE=function(f,l,p){f[0+p]=l>>>24;f[1+p]=l>>>16&255;f[2+p]=l>>>8&255;f[3+p]=l&255};en.ip=function(f,l,p,b){for(var d=0,h=0,a=6;0<=a;a-=2){for(var e=0;24>=e;e+=8)d<<=1,d|=l>>>e+a&1;for(e=0;24>=e;e+=8)d<<=1,d|=f>>>e+a&1}for(a=6;0<=a;a-=2){for(e=1;25>=e;e+=8)h<<=1,h|=l>>>e+a&1;for(e=1;25>=e;e+=8)h<<=1,h|=f>>>e+a&1}p[b+0]=
d>>>0;p[b+1]=h>>>0};en.rip=function(f,l,p,b){for(var d=0,h=0,a=0;4>a;a++)for(var e=24;0<=e;e-=8)d<<=1,d|=l>>>e+a&1,d<<=1,d|=f>>>e+a&1;for(a=4;8>a;a++)for(e=24;0<=e;e-=8)h<<=1,h|=l>>>e+a&1,h<<=1,h|=f>>>e+a&1;p[b+0]=d>>>0;p[b+1]=h>>>0};en.pc1=function(f,l,p,b){for(var d=0,h=0,a=7;5<=a;a--){for(var e=0;24>=e;e+=8)d<<=1,d|=l>>e+a&1;for(e=0;24>=e;e+=8)d<<=1,d|=f>>e+a&1}for(e=0;24>=e;e+=8)d<<=1,d|=l>>e+a&1;for(a=1;3>=a;a++){for(e=0;24>=e;e+=8)h<<=1,h|=l>>e+a&1;for(e=0;24>=e;e+=8)h<<=1,h|=f>>e+a&1}for(e=
0;24>=e;e+=8)h<<=1,h|=f>>e+a&1;p[b+0]=d>>>0;p[b+1]=h>>>0};en.r28shl=function(f,l){return f<<l&268435455|f>>>28-l};var g=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];en.pc2=function(f,l,p,b){for(var d=0,h=0,a=g.length>>>1,e=0;e<a;e++)d<<=1,d|=f>>>g[e]&1;for(e=a;e<g.length;e++)h<<=1,h|=l>>>g[e]&1;p[b+0]=d>>>0;p[b+1]=h>>>0};en.expand=function(f,l,p){var b=0;var d=(f&1)<<5|f>>>27;for(var h=23;15<=h;h-=4)d<<=6,d|=f>>>h&
63;for(h=11;3<=h;h-=4)b|=f>>>h&63,b<<=6;l[p+0]=d>>>0;l[p+1]=(b|(f&31)<<1|f>>>31)>>>0};var c=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,
3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,
13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];en.substitute=function(f,l){for(var p=0,b=0;4>b;b++){var d=f>>>18-6*b&63;d=c[64*b+d];p<<=4;p|=d}for(b=0;4>b;b++)d=l>>>18-6*b&63,d=c[256+64*b+d],p<<=4,p|=d;return p>>>0};var k=[16,25,12,11,3,20,
4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];en.permute=function(f){for(var l=0,p=0;p<k.length;p++)l<<=1,l|=f>>>k[p]&1;return l>>>0};en.padSplit=function(f,l,p){for(f=f.toString(2);f.length<l;)f="0"+f;for(var b=[],d=0;d<l;d+=p)b.push(f.slice(d,d+p));return b.join(" ")};return en}function Rp(){function g(c,k){if(!c)throw Error(k||"Assertion failed");}if(T0)return VN;T0=!0;VN=g;g.equal=function(c,k,f){if(c!=k)throw Error(f||"Assertion failed: "+c+" != "+k);};return VN}function WN(){function g(k){this.options=
k;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=Array(this.blockSize);this.bufferOff=0}if(U0)return XN;U0=!0;var c=Rp();XN=g;g.prototype._init=function(){};g.prototype.update=function(k){return 0===k.length?[]:"decrypt"===this.type?this._updateDecrypt(k):this._updateEncrypt(k)};g.prototype._buffer=function(k,f){for(var l=Math.min(this.buffer.length-this.bufferOff,k.length-f),p=0;p<l;p++)this.buffer[this.bufferOff+p]=k[f+p];this.bufferOff+=l;return l};g.prototype._flushBuffer=
function(k,f){this._update(this.buffer,0,k,f);this.bufferOff=0;return this.blockSize};g.prototype._updateEncrypt=function(k){var f=0,l=0,p=Array(((this.bufferOff+k.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(f+=this._buffer(k,f),this.bufferOff===this.buffer.length&&(l+=this._flushBuffer(p,l)));for(var b=k.length-(k.length-f)%this.blockSize;f<b;f+=this.blockSize)this._update(k,f,p,l),l+=this.blockSize;for(;f<k.length;f++,this.bufferOff++)this.buffer[this.bufferOff]=k[f];return p};
g.prototype._updateDecrypt=function(k){for(var f=0,l=0,p=Math.ceil((this.bufferOff+k.length)/this.blockSize)-1,b=Array(p*this.blockSize);0<p;p--)f+=this._buffer(k,f),l+=this._flushBuffer(b,l);this._buffer(k,f);return b};g.prototype.final=function(k){var f;k&&(f=this.update(k));k="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt();return f?f.concat(k):k};g.prototype._pad=function(k,f){if(0===f)return!1;for(;f<k.length;)k[f++]=0;return!0};g.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,
this.bufferOff))return[];var k=Array(this.blockSize);this._update(this.buffer,0,k,0);return k};g.prototype._unpad=function(k){return k};g.prototype._finalDecrypt=function(){c.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var k=Array(this.blockSize);this._flushBuffer(k,0);return this._unpad(k)};return XN}function V0(){function g(){this.tmp=Array(2);this.keys=null}function c(d){p.call(this,d);var h=new g;this._desState=h;this.deriveKeys(h,d.key)}if(W0)return YN;W0=!0;var k=Rp(),
f=Fh(),l=R0(),p=WN();f(c,p);YN=c;c.create=function(d){return new c(d)};var b=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];c.prototype.deriveKeys=function(d,h){d.keys=Array(32);k.equal(h.length,this.blockSize,"Invalid key length");var a=l.readUInt32BE(h,0);h=l.readUInt32BE(h,4);l.pc1(a,h,d.tmp,0);a=d.tmp[0];h=d.tmp[1];for(var e=0;e<d.keys.length;e+=2){var n=b[e>>>1];a=l.r28shl(a,n);h=l.r28shl(h,n);l.pc2(a,h,d.keys,e)}};c.prototype._update=function(d,h,a,e){var n=this._desState,q=l.readUInt32BE(d,h);d=l.readUInt32BE(d,
h+4);l.ip(q,d,n.tmp,0);q=n.tmp[0];d=n.tmp[1];"encrypt"===this.type?this._encrypt(n,q,d,n.tmp,0):this._decrypt(n,q,d,n.tmp,0);q=n.tmp[0];d=n.tmp[1];l.writeUInt32BE(a,q,e);l.writeUInt32BE(a,d,e+4)};c.prototype._pad=function(d,h){for(var a=d.length-h;h<d.length;h++)d[h]=a;return!0};c.prototype._unpad=function(d){for(var h=d[d.length-1],a=d.length-h;a<d.length;a++)k.equal(d[a],h);return d.slice(0,d.length-h)};c.prototype._encrypt=function(d,h,a,e,n){for(var q=0;q<d.keys.length;q+=2){var r=d.keys[q],v=
d.keys[q+1];l.expand(a,d.tmp,0);r^=d.tmp[0];v^=d.tmp[1];r=l.substitute(r,v);r=l.permute(r);v=a;a=(h^r)>>>0;h=v}l.rip(a,h,e,n)};c.prototype._decrypt=function(d,h,a,e,n){for(var q=d.keys.length-2;0<=q;q-=2){var r=d.keys[q],v=d.keys[q+1];l.expand(a,d.tmp,0);r^=d.tmp[0];v^=d.tmp[1];r=l.substitute(r,v);r=l.permute(r);v=a;a=(h^r)>>>0;h=v}l.rip(a,h,e,n)};return YN}function Iha(){function g(l){c.equal(l.length,8,"Invalid IV length");this.iv=Array(8);for(var p=0;p<this.iv.length;p++)this.iv[p]=l[p]}if(X0)return ZN;
X0=!0;var c=Rp(),k=Fh(),f={};ZN.instantiate=function(l){function p(a){l.call(this,a);this._cbcInit()}k(p,l);for(var b=Object.keys(f),d=0;d<b.length;d++){var h=b[d];p.prototype[h]=f[h]}p.create=function(a){return new p(a)};return p};f._cbcInit=function(){this._cbcState=new g(this.options.iv)};f._update=function(l,p,b,d){var h=this.constructor.super_.prototype,a=this._cbcState.iv;if("encrypt"===this.type){for(var e=0;e<this.blockSize;e++)a[e]^=l[p+e];h._update.call(this,a,0,b,d);for(e=0;e<this.blockSize;e++)a[e]=
b[d+e]}else{h._update.call(this,l,p,b,d);for(e=0;e<this.blockSize;e++)b[d+e]^=a[e];for(e=0;e<this.blockSize;e++)a[e]=l[p+e]}};return ZN}function Jha(){function g(b,d){k.equal(d.length,24,"Invalid key length");var h=d.slice(0,8),a=d.slice(8,16);d=d.slice(16,24);this.ciphers="encrypt"===b?[p.create({type:"encrypt",key:h}),p.create({type:"decrypt",key:a}),p.create({type:"encrypt",key:d})]:[p.create({type:"decrypt",key:d}),p.create({type:"encrypt",key:a}),p.create({type:"decrypt",key:h})]}function c(b){l.call(this,
b);this._edeState=new g(this.type,this.options.key)}if(Y0)return $N;Y0=!0;var k=Rp(),f=Fh(),l=WN(),p=V0();f(c,l);$N=c;c.create=function(b){return new c(b)};c.prototype._update=function(b,d,h,a){var e=this._edeState;e.ciphers[0]._update(b,d,h,a);e.ciphers[1]._update(h,a,h,a);e.ciphers[2]._update(h,a,h,a)};c.prototype._pad=p.prototype._pad;c.prototype._unpad=p.prototype._unpad;return $N}function Kha(){function g(b){c.call(this||GF);var d=b.mode.toLowerCase(),h=p[d];var a=b.decrypt?"decrypt":"encrypt";
var e=b.key;l.isBuffer(e)||(e=l.from(e));if("des-ede"===d||"des-ede-cbc"===d)e=l.concat([e,e.slice(0,8)]);b=b.iv;l.isBuffer(b)||(b=l.from(b));(this||GF)._des=h.create({key:e,iv:b,type:a})}if(Z0)return aO;Z0=!0;var c=Bs();$0||($0=!0,Bx.utils=R0(),Bx.Cipher=WN(),Bx.DES=V0(),Bx.CBC=Iha(),Bx.EDE=Jha());var k=Bx;var f=Fh(),l=Nh().Buffer,p={"des-ede3-cbc":k.CBC.instantiate(k.EDE),"des-ede3":k.EDE,"des-ede-cbc":k.CBC.instantiate(k.EDE),"des-ede":k.EDE,"des-cbc":k.CBC.instantiate(k.DES),"des-ecb":k.DES};
p.des=p["des-cbc"];p.des3=p["des-ede3-cbc"];aO=g;f(g,c);g.prototype._update=function(b){return l.from((this||GF)._des.update(b))};g.prototype._final=function(){return l.from((this||GF)._des.final())};return aO}function Lha(){if(a1)return HF;a1=!0;HF.encrypt=function(g,c){return g._cipher.encryptBlock(c)};HF.decrypt=function(g,c){return g._cipher.decryptBlock(c)};return HF}function BA(){if(b1)return c1;b1=!0;var g=Yg.Buffer;return c1=function(c,k){for(var f=Math.min(c.length,k.length),l=new g(f),p=
0;p<f;++p)l[p]=c[p]^k[p];return l}}function Mha(){if(d1)return IF;d1=!0;var g=BA();IF.encrypt=function(c,k){k=g(k,c._prev);c._prev=c._cipher.encryptBlock(k);return c._prev};IF.decrypt=function(c,k){var f=c._prev;c._prev=k;c=c._cipher.decryptBlock(k);return g(c,f)};return IF}function Nha(){function g(f,l,p){var b=l.length,d=k(l,f._cache);f._cache=f._cache.slice(b);f._prev=c.concat([f._prev,p?l:d]);return d}if(e1)return bO;e1=!0;var c=Nh().Buffer,k=BA();bO.encrypt=function(f,l,p){for(var b=c.allocUnsafe(0),
d;l.length;)if(0===f._cache.length&&(f._cache=f._cipher.encryptBlock(f._prev),f._prev=c.allocUnsafe(0)),f._cache.length<=l.length)d=f._cache.length,b=c.concat([b,g(f,l.slice(0,d),p)]),l=l.slice(d);else{b=c.concat([b,g(f,l,p)]);break}return b};return bO}function Oha(){if(f1)return cO;f1=!0;var g=Nh().Buffer;cO.encrypt=function(c,k,f){for(var l=k.length,p=g.allocUnsafe(l),b=-1;++b<l;){var d=b,h=c,a=k[b],e=f,n=h._cipher.encryptBlock(h._prev)[0]^a;h._prev=g.concat([h._prev.slice(1),g.from([e?a:n])]);
p[d]=n}return p};return cO}function Pha(){if(g1)return dO;g1=!0;var g=Nh().Buffer;dO.encrypt=function(c,k,f){for(var l=k.length,p=g.allocUnsafe(l),b=-1;++b<l;){for(var d=b,h,a,e,n=c,q=k[b],r=f,v=-1,y=0;8>++v;){e=n._cipher.encryptBlock(n._prev);a=q&1<<7-v?128:0;h=e[0]^a;y+=(h&128)>>v%8;e=n;var D=n._prev;a=r?a:h;h=D.length;var E=-1,I=g.allocUnsafe(D.length);for(D=g.concat([D,g.from([a])]);++E<h;)I[E]=D[E]<<1|D[E+1]>>7;e._prev=I}p[d]=y}return p};return dO}function Qha(){function g(f){f._prev=f._cipher.encryptBlock(f._prev);
return f._prev}if(h1)return eO;h1=!0;var c=Yg.Buffer,k=BA();eO.encrypt=function(f,l){for(;f._cache.length<l.length;)f._cache=c.concat([f._cache,g(f)]);var p=f._cache.slice(0,l.length);f._cache=f._cache.slice(l.length);return k(l,p)};return eO}function i1(){if(j1)return k1;j1=!0;return k1=function(g){for(var c=g.length,k;c--;)if(k=g.readUInt8(c),255===k)g.writeUInt8(0,c);else{k++;g.writeUInt8(k,c);break}}}function l1(){if(m1)return fO;m1=!0;var g=BA(),c=Nh().Buffer,k=i1();fO.encrypt=function(f,l){var p=
Math.ceil(l.length/16),b=f._cache.length;f._cache=c.concat([f._cache,c.allocUnsafe(16*p)]);for(var d=0;d<p;d++){var h=f;var a=h._cipher.encryptBlockRaw(h._prev);k(h._prev);h=a;a=b+16*d;f._cache.writeUInt32BE(h[0],a+0);f._cache.writeUInt32BE(h[1],a+4);f._cache.writeUInt32BE(h[2],a+8);f._cache.writeUInt32BE(h[3],a+12)}p=f._cache.slice(0,l.length);f._cache=f._cache.slice(l.length);return g(l,p)};return fO}function gO(){if(n1)return o1;n1=!0;var g={ECB:Lha(),CBC:Mha(),CFB:Nha(),CFB8:Oha(),CFB1:Pha(),
OFB:Qha(),CTR:l1(),GCM:l1()},c=p1,k;for(k in c)c[k].module=g[c[k].mode];return o1=c}function JF(){function g(d){l.isBuffer(d)||(d=l.from(d));for(var h=d.length/4|0,a=Array(h),e=0;e<h;e++)a[e]=d.readUInt32BE(4*e);return a}function c(d){for(;0<d.length;d++)d[0]=0}function k(d,h,a,e,n){var q=a[0],r=a[1],v=a[2];a=a[3];for(var y=d[0]^h[0],D=d[1]^h[1],E=d[2]^h[2],I=d[3]^h[3],K,P,N=4,aa=1;aa<n;aa++)d=q[y>>>24]^r[D>>>16&255]^v[E>>>8&255]^a[I&255]^h[N++],K=q[D>>>24]^r[E>>>16&255]^v[I>>>8&255]^a[y&255]^h[N++],
P=q[E>>>24]^r[I>>>16&255]^v[y>>>8&255]^a[D&255]^h[N++],I=q[I>>>24]^r[y>>>16&255]^v[D>>>8&255]^a[E&255]^h[N++],y=d,D=K,E=P;d=(e[y>>>24]<<24|e[D>>>16&255]<<16|e[E>>>8&255]<<8|e[I&255])^h[N++];K=(e[D>>>24]<<24|e[E>>>16&255]<<16|e[I>>>8&255]<<8|e[y&255])^h[N++];P=(e[E>>>24]<<24|e[I>>>16&255]<<16|e[y>>>8&255]<<8|e[D&255])^h[N++];I=(e[I>>>24]<<24|e[y>>>16&255]<<16|e[D>>>8&255]<<8|e[E&255])^h[N++];return[d>>>0,K>>>0,P>>>0,I>>>0]}function f(d){(this||Nn)._key=g(d);this._reset()}if(q1)return hO;q1=!0;var l=
Nh().Buffer,p=[0,1,2,4,8,16,32,64,128,27,54],b=function(){for(var d=Array(256),h=0;256>h;h++)d[h]=128>h?h<<1:h<<1^283;h=[];for(var a=[],e=[[],[],[],[]],n=[[],[],[],[]],q=0,r=0,v=0;256>v;++v){var y=r^r<<1^r<<2^r<<3^r<<4;y=y>>>8^y&255^99;h[q]=y;a[y]=q;var D=d[q],E=d[D],I=d[E],K=257*d[y]^16843008*y;e[0][q]=K<<24|K>>>8;e[1][q]=K<<16|K>>>16;e[2][q]=K<<8|K>>>24;e[3][q]=K;K=16843009*I^65537*E^257*D^16843008*q;n[0][y]=K<<24|K>>>8;n[1][y]=K<<16|K>>>16;n[2][y]=K<<8|K>>>24;n[3][y]=K;0===q?q=r=1:(q=D^d[d[d[I^
D]]],r^=d[d[r]])}return{SBOX:h,INV_SBOX:a,SUB_MIX:e,INV_SUB_MIX:n}}();f.blockSize=16;f.keySize=32;f.prototype.blockSize=f.blockSize;f.prototype.keySize=f.keySize;f.prototype._reset=function(){for(var d=(this||Nn)._key,h=d.length,a=h+6,e=4*(a+1),n=[],q=0;q<h;q++)n[q]=d[q];for(q=h;q<e;q++)d=n[q-1],0===q%h?(d=d<<8|d>>>24,d=b.SBOX[d>>>24]<<24|b.SBOX[d>>>16&255]<<16|b.SBOX[d>>>8&255]<<8|b.SBOX[d&255],d^=p[q/h|0]<<24):6<h&&4===q%h&&(d=b.SBOX[d>>>24]<<24|b.SBOX[d>>>16&255]<<16|b.SBOX[d>>>8&255]<<8|b.SBOX[d&
255]),n[q]=n[q-h]^d;h=[];for(q=0;q<e;q++){d=e-q;var r=n[d-(q%4?0:4)];h[q]=4>q||4>=d?r:b.INV_SUB_MIX[0][b.SBOX[r>>>24]]^b.INV_SUB_MIX[1][b.SBOX[r>>>16&255]]^b.INV_SUB_MIX[2][b.SBOX[r>>>8&255]]^b.INV_SUB_MIX[3][b.SBOX[r&255]]}(this||Nn)._nRounds=a;(this||Nn)._keySchedule=n;(this||Nn)._invKeySchedule=h};f.prototype.encryptBlockRaw=function(d){d=g(d);return k(d,(this||Nn)._keySchedule,b.SUB_MIX,b.SBOX,(this||Nn)._nRounds)};f.prototype.encryptBlock=function(d){d=this.encryptBlockRaw(d);var h=l.allocUnsafe(16);
h.writeUInt32BE(d[0],0);h.writeUInt32BE(d[1],4);h.writeUInt32BE(d[2],8);h.writeUInt32BE(d[3],12);return h};f.prototype.decryptBlock=function(d){d=g(d);var h=d[1];d[1]=d[3];d[3]=h;d=k(d,(this||Nn)._invKeySchedule,b.INV_SUB_MIX,b.INV_SBOX,(this||Nn)._nRounds);h=l.allocUnsafe(16);h.writeUInt32BE(d[0],0);h.writeUInt32BE(d[3],4);h.writeUInt32BE(d[2],8);h.writeUInt32BE(d[1],12);return h};f.prototype.scrub=function(){c((this||Nn)._keySchedule);c((this||Nn)._invKeySchedule);c((this||Nn)._key)};hO.AES=f;return hO}
function Rha(){function g(l){var p=k.allocUnsafe(16);p.writeUInt32BE(l[0]>>>0,0);p.writeUInt32BE(l[1]>>>0,4);p.writeUInt32BE(l[2]>>>0,8);p.writeUInt32BE(l[3]>>>0,12);return p}function c(l){(this||Gl).h=l;(this||Gl).state=k.alloc(16,0);(this||Gl).cache=k.allocUnsafe(0)}if(r1)return s1;r1=!0;var k=Nh().Buffer,f=k.alloc(16,0);c.prototype.ghash=function(l){for(var p=-1;++p<l.length;)(this||Gl).state[p]^=l[p];this._multiply()};c.prototype._multiply=function(){var l=(this||Gl).h;l=[l.readUInt32BE(0),l.readUInt32BE(4),
l.readUInt32BE(8),l.readUInt32BE(12)];for(var p=[0,0,0,0],b,d,h=-1;128>++h;){if(b=0!==((this||Gl).state[~~(h/8)]&1<<7-h%8))p[0]^=l[0],p[1]^=l[1],p[2]^=l[2],p[3]^=l[3];d=0!==(l[3]&1);for(b=3;0<b;b--)l[b]=l[b]>>>1|(l[b-1]&1)<<31;l[0]>>>=1;d&&(l[0]^=-520093696)}(this||Gl).state=g(p)};c.prototype.update=function(l){for((this||Gl).cache=k.concat([(this||Gl).cache,l]);16<=(this||Gl).cache.length;)l=(this||Gl).cache.slice(0,16),(this||Gl).cache=(this||Gl).cache.slice(16),this.ghash(l)};c.prototype.final=
function(l,p){(this||Gl).cache.length&&this.ghash(k.concat([(this||Gl).cache,f],16));this.ghash(g([0,l,0,p]));return(this||Gl).state};return s1=c}function t1(){function g(h,a,e,n){f.call(this||Rg);var q=k.alloc(4,0);(this||Rg)._cipher=new c.AES(a);var r=(this||Rg)._cipher.encryptBlock(q);(this||Rg)._ghash=new p(r);a=this||Rg;q=e;if(12===q.length)a._finID=k.concat([q,k.from([0,0,0,1])]),e=k.concat([q,k.from([0,0,0,2])]);else{e=new p(r);r=q.length;var v=r%16;e.update(q);v&&e.update(k.alloc(16-v,0));
e.update(k.alloc(8,0));q=8*r;r=k.alloc(8);r.writeUIntBE(q,0,8);e.update(r);a._finID=e.state;a=k.from(a._finID);d(a);e=a}(this||Rg)._prev=k.from(e);(this||Rg)._cache=k.allocUnsafe(0);(this||Rg)._secCache=k.allocUnsafe(0);(this||Rg)._decrypt=n;(this||Rg)._alen=0;(this||Rg)._len=0;(this||Rg)._mode=h;(this||Rg)._authTag=null;(this||Rg)._called=!1}if(u1)return v1;u1=!0;var c=JF(),k=Nh().Buffer,f=Bs(),l=Fh(),p=Rha(),b=BA(),d=i1();l(g,f);g.prototype._update=function(h){if(!(this||Rg)._called&&(this||Rg)._alen){var a=
16-(this||Rg)._alen%16;16>a&&(a=k.alloc(a,0),(this||Rg)._ghash.update(a))}(this||Rg)._called=!0;a=(this||Rg)._mode.encrypt(this||Rg,h);(this||Rg)._decrypt?(this||Rg)._ghash.update(h):(this||Rg)._ghash.update(a);(this||Rg)._len+=h.length;return a};g.prototype._final=function(){if((this||Rg)._decrypt&&!(this||Rg)._authTag)throw Error("Unsupported state or unable to authenticate data");var h=b((this||Rg)._ghash.final(8*(this||Rg)._alen,8*(this||Rg)._len),(this||Rg)._cipher.encryptBlock((this||Rg)._finID)),
a;if(a=(this||Rg)._decrypt){a=(this||Rg)._authTag;var e=0;h.length!==a.length&&e++;for(var n=Math.min(h.length,a.length),q=0;q<n;++q)e+=h[q]^a[q];a=e}if(a)throw Error("Unsupported state or unable to authenticate data");(this||Rg)._authTag=h;(this||Rg)._cipher.scrub()};g.prototype.getAuthTag=function(){if((this||Rg)._decrypt||!k.isBuffer((this||Rg)._authTag))throw Error("Attempting to get auth tag in unsupported state");return(this||Rg)._authTag};g.prototype.setAuthTag=function(h){if(!(this||Rg)._decrypt)throw Error("Attempting to set auth tag in unsupported state");
(this||Rg)._authTag=h};g.prototype.setAAD=function(h){if((this||Rg)._called)throw Error("Attempting to set AAD in unsupported state");(this||Rg)._ghash.update(h);(this||Rg)._alen+=h.length};return v1=g}function w1(){function g(l,p,b,d){f.call(this||So);(this||So)._cipher=new c.AES(p);(this||So)._prev=k.from(b);(this||So)._cache=k.allocUnsafe(0);(this||So)._secCache=k.allocUnsafe(0);(this||So)._decrypt=d;(this||So)._mode=l}if(x1)return y1;x1=!0;var c=JF(),k=Nh().Buffer,f=Bs();Fh()(g,f);g.prototype._update=
function(l){return(this||So)._mode.encrypt(this||So,l,(this||So)._decrypt)};g.prototype._final=function(){(this||So)._cipher.scrub()};return y1=g}function KF(){if(z1)return A1;z1=!0;var g=Nh().Buffer,c=DN();return A1=function(k,f,l,p){g.isBuffer(k)||(k=g.from(k,"binary"));if(f&&(g.isBuffer(f)||(f=g.from(f,"binary")),8!==f.length))throw new RangeError("salt should be Buffer with 8 byte length");l/=8;for(var b=g.alloc(l),d=g.alloc(p||0),h=g.alloc(0);0<l||0<p;){var a=new c;a.update(h);a.update(k);f&&
a.update(f);h=a.digest();a=0;if(0<l){var e=b.length-l;a=Math.min(l,h.length);h.copy(b,e,0,a);l-=a}a<h.length&&0<p&&(e=Math.min(p,h.length-a),h.copy(d,d.length-p,a,a+e),p-=e)}h.fill(0);return{key:b,iv:d}}}function Sha(){function g(n,q,r){d.call(this||kj);(this||kj)._cache=new c;(this||kj)._cipher=new h.AES(q);(this||kj)._prev=p.from(r);(this||kj)._mode=n;(this||kj)._autopadding=!0}function c(){(this||kj).cache=p.allocUnsafe(0)}function k(n,q,r){n=f[n.toLowerCase()];if(!n)throw new TypeError("invalid suite type");
"string"===typeof q&&(q=p.from(q));if(q.length!==n.key/8)throw new TypeError("invalid key length "+q.length);"string"===typeof r&&(r=p.from(r));if("GCM"!==n.mode&&r.length!==n.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===n.type?new b(n.module,q,r):"auth"===n.type?new l(n.module,q,r):new g(n.module,q,r)}if(B1)return LF;B1=!0;var f=gO(),l=t1(),p=Nh().Buffer,b=w1(),d=Bs(),h=JF(),a=KF();Fh()(g,d);g.prototype._update=function(n){(this||kj)._cache.add(n);var q;for(n=[];q=(this||
kj)._cache.get();)q=(this||kj)._mode.encrypt(this||kj,q),n.push(q);return p.concat(n)};var e=p.alloc(16,16);g.prototype._final=function(){var n=(this||kj)._cache.flush();if((this||kj)._autopadding)return n=(this||kj)._mode.encrypt(this||kj,n),(this||kj)._cipher.scrub(),n;if(!n.equals(e))throw(this||kj)._cipher.scrub(),Error("data not multiple of block length");};g.prototype.setAutoPadding=function(n){(this||kj)._autopadding=!!n;return this||kj};c.prototype.add=function(n){(this||kj).cache=p.concat([(this||
kj).cache,n])};c.prototype.get=function(){if(15<(this||kj).cache.length){var n=(this||kj).cache.slice(0,16);(this||kj).cache=(this||kj).cache.slice(16);return n}return null};c.prototype.flush=function(){for(var n=16-(this||kj).cache.length,q=p.allocUnsafe(n),r=-1;++r<n;)q.writeUInt8(n,r);return p.concat([(this||kj).cache,q])};LF.createCipheriv=k;LF.createCipher=function(n,q){var r=f[n.toLowerCase()];if(!r)throw new TypeError("invalid suite type");q=a(q,!1,r.key,r.iv);return k(n,q.key,q.iv)};return LF}
function Tha(){function g(e,n,q){d.call(this||Ii);(this||Ii)._cache=new c;(this||Ii)._last=void 0;(this||Ii)._cipher=new h.AES(n);(this||Ii)._prev=l.from(q);(this||Ii)._mode=e;(this||Ii)._autopadding=!0}function c(){(this||Ii).cache=l.allocUnsafe(0)}function k(e,n,q){e=p[e.toLowerCase()];if(!e)throw new TypeError("invalid suite type");"string"===typeof q&&(q=l.from(q));if("GCM"!==e.mode&&q.length!==e.iv)throw new TypeError("invalid iv length "+q.length);"string"===typeof n&&(n=l.from(n));if(n.length!==
e.key/8)throw new TypeError("invalid key length "+n.length);return"stream"===e.type?new b(e.module,n,q,!0):"auth"===e.type?new f(e.module,n,q,!0):new g(e.module,n,q)}if(C1)return MF;C1=!0;var f=t1(),l=Nh().Buffer,p=gO(),b=w1(),d=Bs(),h=JF(),a=KF();Fh()(g,d);g.prototype._update=function(e){(this||Ii)._cache.add(e);var n;for(e=[];n=(this||Ii)._cache.get((this||Ii)._autopadding);)n=(this||Ii)._mode.decrypt(this||Ii,n),e.push(n);return l.concat(e)};g.prototype._final=function(){var e=(this||Ii)._cache.flush();
if((this||Ii)._autopadding){e=(this||Ii)._mode.decrypt(this||Ii,e);var n=e[15];if(1>n||16<n)throw Error("unable to decrypt data");for(var q=-1;++q<n;)if(e[q+(16-n)]!==n)throw Error("unable to decrypt data");e=16===n?void 0:e.slice(0,16-n);return e}if(e)throw Error("data not multiple of block length");};g.prototype.setAutoPadding=function(e){(this||Ii)._autopadding=!!e;return this||Ii};c.prototype.add=function(e){(this||Ii).cache=l.concat([(this||Ii).cache,e])};c.prototype.get=function(e){if(e){if(16<
(this||Ii).cache.length)return e=(this||Ii).cache.slice(0,16),(this||Ii).cache=(this||Ii).cache.slice(16),e}else if(16<=(this||Ii).cache.length)return e=(this||Ii).cache.slice(0,16),(this||Ii).cache=(this||Ii).cache.slice(16),e;return null};c.prototype.flush=function(){if((this||Ii).cache.length)return(this||Ii).cache};MF.createDecipher=function(e,n){var q=p[e.toLowerCase()];if(!q)throw new TypeError("invalid suite type");n=a(n,!1,q.key,q.iv);return k(e,n.key,n.iv)};MF.createDecipheriv=k;return MF}
function iO(){if(D1)return On;D1=!0;var g=Sha(),c=Tha(),k=p1;On.createCipher=On.Cipher=g.createCipher;On.createCipheriv=On.Cipheriv=g.createCipheriv;On.createDecipher=On.Decipher=c.createDecipher;On.createDecipheriv=On.Decipheriv=c.createDecipheriv;On.listCiphers=On.getCiphers=function(){return Object.keys(k)};return On}function Uha(){function g(d,h,a){d=d.toLowerCase();if(l[d])return f.createCipheriv(d,h,a);if(p[d])return new k({key:h,iv:a,mode:d});throw new TypeError("invalid suite type");}function c(d,
h,a){d=d.toLowerCase();if(l[d])return f.createDecipheriv(d,h,a);if(p[d])return new k({key:h,iv:a,mode:d,decrypt:!0});throw new TypeError("invalid suite type");}if(E1)return Pn;E1=!0;var k=Kha(),f=iO(),l=gO();F1||(F1=!0,ar["des-ecb"]={key:8,iv:0},ar["des-cbc"]=ar.des={key:8,iv:8},ar["des-ede3-cbc"]=ar.des3={key:24,iv:8},ar["des-ede3"]={key:24,iv:0},ar["des-ede-cbc"]={key:16,iv:8},ar["des-ede"]={key:16,iv:0});var p=ar;var b=KF();Pn.createCipher=Pn.Cipher=function(d,h){d=d.toLowerCase();if(l[d]){var a=
l[d].key;var e=l[d].iv}else if(p[d])a=8*p[d].key,e=p[d].iv;else throw new TypeError("invalid suite type");h=b(h,!1,a,e);return g(d,h.key,h.iv)};Pn.createCipheriv=Pn.Cipheriv=g;Pn.createDecipher=Pn.Decipher=function(d,h){d=d.toLowerCase();if(l[d]){var a=l[d].key;var e=l[d].iv}else if(p[d])a=8*p[d].key,e=p[d].iv;else throw new TypeError("invalid suite type");h=b(h,!1,a,e);return c(d,h.key,h.iv)};Pn.createDecipheriv=Pn.Decipheriv=c;Pn.listCiphers=Pn.getCiphers=function(){return Object.keys(p).concat(f.getCiphers())};
return Pn}function G1(){if(H1)return jO.exports;H1=!0;(function(g,c){function k(m,t){if(!m)throw Error(t||"Assertion failed");}function f(m,t){m.super_=t;var u=function(){};u.prototype=t.prototype;m.prototype=new u;m.prototype.constructor=m}function l(m,t,u){if(l.isBN(m))return m;(this||ib).negative=0;(this||ib).words=null;(this||ib).length=0;(this||ib).red=null;if(null!==m){if("le"===t||"be"===t)u=t,t=10;this._init(m||0,t||10,u||"be")}}function p(m,t){m=m.charCodeAt(t);return 65<=m&&70>=m?m-55:97<=
m&&102>=m?m-87:m-48&15}function b(m,t,u){var B=p(m,u);u-1>=t&&(B|=p(m,u-1)<<4);return B}function d(m,t,u,B){var A=0;for(u=Math.min(m.length,u);t<u;t++){var H=m.charCodeAt(t)-48;A*=B;A=49<=H?A+(H-49+10):17<=H?A+(H-17+10):A+H}return A}function h(m,t,u){u.negative=t.negative^m.negative;var B=m.length+t.length|0;u.length=B;B=B-1|0;var A=m.words[0]|0,H=t.words[0]|0;A*=H;var F=A/67108864|0;u.words[0]=A&67108863;for(var L=1;L<B;L++){var U=F>>>26,T=F&67108863;F=Math.min(L,t.length-1);for(var Y=Math.max(0,
L-m.length+1);Y<=F;Y++)A=m.words[L-Y|0]|0,H=t.words[Y]|0,A=A*H+T,U+=A/67108864|0,T=A&67108863;u.words[L]=T|0;F=U|0}0!==F?u.words[L]=F|0:u.length--;return u.strip()}function a(m,t){(this||ib).x=m;(this||ib).y=t}function e(m,t){(this||ib).name=m;(this||ib).p=new l(t,16);(this||ib).n=(this||ib).p.bitLength();(this||ib).k=(new l(1)).iushln((this||ib).n).isub((this||ib).p);(this||ib).tmp=this._tmp()}function n(){e.call(this||ib,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}
function q(){e.call(this||ib,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function r(){e.call(this||ib,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){e.call(this||ib,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function y(m){"string"===typeof m?(m=l._prime(m),(this||ib).m=m.p,(this||ib).prime=m):(k(m.gtn(1),"modulus must be greater than 1"),(this||ib).m=m,(this||ib).prime=null)}function D(m){y.call(this||ib,
m);(this||ib).shift=(this||ib).m.bitLength();0!==(this||ib).shift%26&&((this||ib).shift+=26-(this||ib).shift%26);(this||ib).r=(new l(1)).iushln((this||ib).shift);(this||ib).r2=this.imod((this||ib).r.sqr());(this||ib).rinv=(this||ib).r._invmp((this||ib).m);(this||ib).minv=(this||ib).rinv.mul((this||ib).r).isubn(1).div((this||ib).m);(this||ib).minv=(this||ib).minv.umod((this||ib).r);(this||ib).minv=(this||ib).r.sub((this||ib).minv)}"object"===typeof g?g.exports=l:c.BN=l;l.BN=l;l.wordSize=26;try{var E=
"undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:Yg.Buffer}catch(m){}l.isBN=function(m){return m instanceof l?!0:null!==m&&"object"===typeof m&&m.constructor.wordSize===l.wordSize&&Array.isArray(m.words)};l.max=function(m,t){return 0<m.cmp(t)?m:t};l.min=function(m,t){return 0>m.cmp(t)?m:t};l.prototype._init=function(m,t,u){if("number"===typeof m)return this._initNumber(m,t,u);if("object"===typeof m)return this._initArray(m,t,u);"hex"===t&&(t=16);k(t===(t|0)&&2<=t&&36>=
t);m=m.toString().replace(/\s+/g,"");var B=0;"-"===m[0]&&(B++,(this||ib).negative=1);B<m.length&&(16===t?this._parseHex(m,B,u):(this._parseBase(m,t,B),"le"===u&&this._initArray(this.toArray(),t,u)))};l.prototype._initNumber=function(m,t,u){0>m&&((this||ib).negative=1,m=-m);67108864>m?((this||ib).words=[m&67108863],(this||ib).length=1):4503599627370496>m?((this||ib).words=[m&67108863,m/67108864&67108863],(this||ib).length=2):(k(9007199254740992>m),(this||ib).words=[m&67108863,m/67108864&67108863,1],
(this||ib).length=3);"le"===u&&this._initArray(this.toArray(),t,u)};l.prototype._initArray=function(m,t,u){k("number"===typeof m.length);if(0>=m.length)return(this||ib).words=[0],(this||ib).length=1,this||ib;(this||ib).length=Math.ceil(m.length/3);(this||ib).words=Array((this||ib).length);for(t=0;t<(this||ib).length;t++)(this||ib).words[t]=0;var B=0;if("be"===u)for(t=m.length-1,u=0;0<=t;t-=3){var A=m[t]|m[t-1]<<8|m[t-2]<<16;(this||ib).words[u]|=A<<B&67108863;(this||ib).words[u+1]=A>>>26-B&67108863;
B+=24;26<=B&&(B-=26,u++)}else if("le"===u)for(u=t=0;t<m.length;t+=3)A=m[t]|m[t+1]<<8|m[t+2]<<16,(this||ib).words[u]|=A<<B&67108863,(this||ib).words[u+1]=A>>>26-B&67108863,B+=24,26<=B&&(B-=26,u++);return this.strip()};l.prototype._parseHex=function(m,t,u){(this||ib).length=Math.ceil((m.length-t)/6);(this||ib).words=Array((this||ib).length);for(var B=0;B<(this||ib).length;B++)(this||ib).words[B]=0;var A=0,H=0;if("be"===u)for(B=m.length-1;B>=t;B-=2)u=b(m,t,B)<<A,(this||ib).words[H]|=u&67108863,18<=A?
(A-=18,H+=1,(this||ib).words[H]|=u>>>26):A+=8;else for(B=0===(m.length-t)%2?t+1:t;B<m.length;B+=2)u=b(m,t,B)<<A,(this||ib).words[H]|=u&67108863,18<=A?(A-=18,H+=1,(this||ib).words[H]|=u>>>26):A+=8;this.strip()};l.prototype._parseBase=function(m,t,u){(this||ib).words=[0];(this||ib).length=1;for(var B=0,A=1;67108863>=A;A*=t)B++;B--;A=A/t|0;var H=m.length-u,F=H%B;H=Math.min(H,H-F)+u;for(var L=u;L<H;L+=B)u=d(m,L,L+B,t),this.imuln(A),67108864>(this||ib).words[0]+u?(this||ib).words[0]+=u:this._iaddn(u);
if(0!==F){B=1;u=d(m,L,m.length,t);for(L=0;L<F;L++)B*=t;this.imuln(B);67108864>(this||ib).words[0]+u?(this||ib).words[0]+=u:this._iaddn(u)}this.strip()};l.prototype.copy=function(m){m.words=Array((this||ib).length);for(var t=0;t<(this||ib).length;t++)m.words[t]=(this||ib).words[t];m.length=(this||ib).length;m.negative=(this||ib).negative;m.red=(this||ib).red};l.prototype.clone=function(){var m=new l(null);this.copy(m);return m};l.prototype._expand=function(m){for(;(this||ib).length<m;)(this||ib).words[(this||
ib).length++]=0;return this||ib};l.prototype.strip=function(){for(;1<(this||ib).length&&0===(this||ib).words[(this||ib).length-1];)(this||ib).length--;return this._normSign()};l.prototype._normSign=function(){1===(this||ib).length&&0===(this||ib).words[0]&&((this||ib).negative=0);return this||ib};l.prototype.inspect=function(){return((this||ib).red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var I=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
K=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],P=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];l.prototype.toString=function(m,t){m=m||10;t=t|0||1;if(16===m||"hex"===m){var u="";for(var B=m=0,A=0;A<(this||ib).length;A++){var H=
(this||ib).words[A],F=((H<<m|B)&16777215).toString(16);B=H>>>24-m&16777215;u=0!==B||A!==(this||ib).length-1?I[6-F.length]+F+u:F+u;m+=2;26<=m&&(m-=26,A--)}for(0!==B&&(u=B.toString(16)+u);0!==u.length%t;)u="0"+u;0!==(this||ib).negative&&(u="-"+u);return u}if(m===(m|0)&&2<=m&&36>=m){B=K[m];A=P[m];u="";H=this.clone();for(H.negative=0;!H.isZero();)F=H.modn(A).toString(m),H=H.idivn(A),u=H.isZero()?F+u:I[B-F.length]+F+u;for(this.isZero()&&(u="0"+u);0!==u.length%t;)u="0"+u;0!==(this||ib).negative&&(u="-"+
u);return u}k(!1,"Base should be between 2 and 36")};l.prototype.toNumber=function(){var m=(this||ib).words[0];2===(this||ib).length?m+=67108864*(this||ib).words[1]:3===(this||ib).length&&1===(this||ib).words[2]?m+=4503599627370496+67108864*(this||ib).words[1]:2<(this||ib).length&&k(!1,"Number can only safely store up to 53 bits");return 0!==(this||ib).negative?-m:m};l.prototype.toJSON=function(){return this.toString(16)};l.prototype.toBuffer=function(m,t){k("undefined"!==typeof E);return this.toArrayLike(E,
m,t)};l.prototype.toArray=function(m,t){return this.toArrayLike(Array,m,t)};l.prototype.toArrayLike=function(m,t,u){var B=this.byteLength();u=u||Math.max(1,B);k(B<=u,"byte array longer than desired length");k(0<u,"Requested array length <= 0");this.strip();var A="le"===t;m=new m(u);t=this.clone();if(A){for(A=0;!t.isZero();A++)B=t.andln(255),t.iushrn(8),m[A]=B;for(;A<u;A++)m[A]=0}else{for(A=0;A<u-B;A++)m[A]=0;for(A=0;!t.isZero();A++)B=t.andln(255),t.iushrn(8),m[u-A-1]=B}return m};l.prototype._countBits=
Math.clz32?function(m){return 32-Math.clz32(m)}:function(m){var t=0;4096<=m&&(t+=13,m>>>=13);64<=m&&(t+=7,m>>>=7);8<=m&&(t+=4,m>>>=4);2<=m&&(t+=2,m>>>=2);return t+m};l.prototype._zeroBits=function(m){if(0===m)return 26;var t=0;0===(m&8191)&&(t+=13,m>>>=13);0===(m&127)&&(t+=7,m>>>=7);0===(m&15)&&(t+=4,m>>>=4);0===(m&3)&&(t+=2,m>>>=2);0===(m&1)&&t++;return t};l.prototype.bitLength=function(){var m=this._countBits((this||ib).words[(this||ib).length-1]);return 26*((this||ib).length-1)+m};l.prototype.zeroBits=
function(){if(this.isZero())return 0;for(var m=0,t=0;t<(this||ib).length;t++){var u=this._zeroBits((this||ib).words[t]);m+=u;if(26!==u)break}return m};l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};l.prototype.toTwos=function(m){return 0!==(this||ib).negative?this.abs().inotn(m).iaddn(1):this.clone()};l.prototype.fromTwos=function(m){return this.testn(m-1)?this.notn(m).iaddn(1).ineg():this.clone()};l.prototype.isNeg=function(){return 0!==(this||ib).negative};l.prototype.neg=
function(){return this.clone().ineg()};l.prototype.ineg=function(){this.isZero()||((this||ib).negative^=1);return this||ib};l.prototype.iuor=function(m){for(;(this||ib).length<m.length;)(this||ib).words[(this||ib).length++]=0;for(var t=0;t<m.length;t++)(this||ib).words[t]|=m.words[t];return this.strip()};l.prototype.ior=function(m){k(0===((this||ib).negative|m.negative));return this.iuor(m)};l.prototype.or=function(m){return(this||ib).length>m.length?this.clone().ior(m):m.clone().ior(this||ib)};l.prototype.uor=
function(m){return(this||ib).length>m.length?this.clone().iuor(m):m.clone().iuor(this||ib)};l.prototype.iuand=function(m){var t=(this||ib).length>m.length?m:this||ib;for(var u=0;u<t.length;u++)(this||ib).words[u]&=m.words[u];(this||ib).length=t.length;return this.strip()};l.prototype.iand=function(m){k(0===((this||ib).negative|m.negative));return this.iuand(m)};l.prototype.and=function(m){return(this||ib).length>m.length?this.clone().iand(m):m.clone().iand(this||ib)};l.prototype.uand=function(m){return(this||
ib).length>m.length?this.clone().iuand(m):m.clone().iuand(this||ib)};l.prototype.iuxor=function(m){if((this||ib).length>m.length)var t=this||ib;else t=m,m=this||ib;for(var u=0;u<m.length;u++)(this||ib).words[u]=t.words[u]^m.words[u];if((this||ib)!==t)for(;u<t.length;u++)(this||ib).words[u]=t.words[u];(this||ib).length=t.length;return this.strip()};l.prototype.ixor=function(m){k(0===((this||ib).negative|m.negative));return this.iuxor(m)};l.prototype.xor=function(m){return(this||ib).length>m.length?
this.clone().ixor(m):m.clone().ixor(this||ib)};l.prototype.uxor=function(m){return(this||ib).length>m.length?this.clone().iuxor(m):m.clone().iuxor(this||ib)};l.prototype.inotn=function(m){k("number"===typeof m&&0<=m);var t=Math.ceil(m/26)|0;m%=26;this._expand(t);0<m&&t--;for(var u=0;u<t;u++)(this||ib).words[u]=~(this||ib).words[u]&67108863;0<m&&((this||ib).words[u]=~(this||ib).words[u]&67108863>>26-m);return this.strip()};l.prototype.notn=function(m){return this.clone().inotn(m)};l.prototype.setn=
function(m,t){k("number"===typeof m&&0<=m);var u=m/26|0;m%=26;this._expand(u+1);(this||ib).words[u]=t?(this||ib).words[u]|1<<m:(this||ib).words[u]&~(1<<m);return this.strip()};l.prototype.iadd=function(m){if(0!==(this||ib).negative&&0===m.negative)return(this||ib).negative=0,this.isub(m),(this||ib).negative^=1,this._normSign();if(0===(this||ib).negative&&0!==m.negative){m.negative=0;var t=this.isub(m);m.negative=1;return t._normSign()}if((this||ib).length>m.length)var u=this||ib;else u=m,m=this||
ib;for(var B=t=0;B<m.length;B++)t=(u.words[B]|0)+(m.words[B]|0)+t,(this||ib).words[B]=t&67108863,t>>>=26;for(;0!==t&&B<u.length;B++)t=(u.words[B]|0)+t,(this||ib).words[B]=t&67108863,t>>>=26;(this||ib).length=u.length;if(0!==t)(this||ib).words[(this||ib).length]=t,(this||ib).length++;else if(u!==(this||ib))for(;B<u.length;B++)(this||ib).words[B]=u.words[B];return this||ib};l.prototype.add=function(m){if(0!==m.negative&&0===(this||ib).negative){m.negative=0;var t=this.sub(m);m.negative^=1;return t}return 0===
m.negative&&0!==(this||ib).negative?((this||ib).negative=0,t=m.sub(this||ib),(this||ib).negative=1,t):(this||ib).length>m.length?this.clone().iadd(m):m.clone().iadd(this||ib)};l.prototype.isub=function(m){if(0!==m.negative){m.negative=0;var t=this.iadd(m);m.negative=1;return t._normSign()}if(0!==(this||ib).negative)return(this||ib).negative=0,this.iadd(m),(this||ib).negative=1,this._normSign();t=this.cmp(m);if(0===t)return(this||ib).negative=0,(this||ib).length=1,(this||ib).words[0]=0,this||ib;if(0<
t)var u=this||ib;else u=m,m=this||ib;for(var B=0,A=0;A<m.length;A++)t=(u.words[A]|0)-(m.words[A]|0)+B,B=t>>26,(this||ib).words[A]=t&67108863;for(;0!==B&&A<u.length;A++)t=(u.words[A]|0)+B,B=t>>26,(this||ib).words[A]=t&67108863;if(0===B&&A<u.length&&u!==(this||ib))for(;A<u.length;A++)(this||ib).words[A]=u.words[A];(this||ib).length=Math.max((this||ib).length,A);u!==(this||ib)&&((this||ib).negative=1);return this.strip()};l.prototype.sub=function(m){return this.clone().isub(m)};var N=function(m,t,u){var B=
m.words,A=t.words,H=u.words,F=0,L=B[0]|0,U=L&8191,T=L>>>13,Y=B[1]|0;L=Y&8191;var wa=Y>>>13,Ga=B[2]|0;Y=Ga&8191;var na=Ga>>>13,ea=B[3]|0;Ga=ea&8191;var da=ea>>>13,ia=B[4]|0;ea=ia&8191;var Oa=ia>>>13,Va=B[5]|0;ia=Va&8191;var eb=Va>>>13,Sa=B[6]|0;Va=Sa&8191;var Bb=Sa>>>13,Z=B[7]|0;Sa=Z&8191;var sa=Z>>>13,Da=B[8]|0;Z=Da&8191;Da>>>=13;var X=B[9]|0;B=X&8191;X>>>=13;var ma=A[0]|0,ta=ma&8191,Pa=ma>>>13,Za=A[1]|0;ma=Za&8191;var Zb=Za>>>13,Pb=A[2]|0;Za=Pb&8191;var Db=Pb>>>13,sc=A[3]|0;Pb=sc&8191;var wc=sc>>>
13,Lc=A[4]|0;sc=Lc&8191;var Xc=Lc>>>13,Qc=A[5]|0;Lc=Qc&8191;var hd=Qc>>>13,Wc=A[6]|0;Qc=Wc&8191;var ld=Wc>>>13,Yc=A[7]|0;Wc=Yc&8191;var od=Yc>>>13,Vc=A[8]|0;Yc=Vc&8191;Vc>>>=13;var cd=A[9]|0;A=cd&8191;cd>>>=13;u.negative=m.negative^t.negative;u.length=19;var W=Math.imul(U,ta);m=Math.imul(U,Pa);m=m+Math.imul(T,ta)|0;t=Math.imul(T,Pa);var af=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(af>>>26)|0;af&=67108863;W=Math.imul(L,ta);m=Math.imul(L,Pa);m=m+Math.imul(wa,ta)|0;t=Math.imul(wa,Pa);W=W+Math.imul(U,
ma)|0;m=m+Math.imul(U,Zb)|0;m=m+Math.imul(T,ma)|0;t=t+Math.imul(T,Zb)|0;var zc=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(zc>>>26)|0;zc&=67108863;W=Math.imul(Y,ta);m=Math.imul(Y,Pa);m=m+Math.imul(na,ta)|0;t=Math.imul(na,Pa);W=W+Math.imul(L,ma)|0;m=m+Math.imul(L,Zb)|0;m=m+Math.imul(wa,ma)|0;t=t+Math.imul(wa,Zb)|0;W=W+Math.imul(U,Za)|0;m=m+Math.imul(U,Db)|0;m=m+Math.imul(T,Za)|0;t=t+Math.imul(T,Db)|0;var pi=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(pi>>>26)|0;pi&=67108863;W=Math.imul(Ga,ta);m=Math.imul(Ga,
Pa);m=m+Math.imul(da,ta)|0;t=Math.imul(da,Pa);W=W+Math.imul(Y,ma)|0;m=m+Math.imul(Y,Zb)|0;m=m+Math.imul(na,ma)|0;t=t+Math.imul(na,Zb)|0;W=W+Math.imul(L,Za)|0;m=m+Math.imul(L,Db)|0;m=m+Math.imul(wa,Za)|0;t=t+Math.imul(wa,Db)|0;W=W+Math.imul(U,Pb)|0;m=m+Math.imul(U,wc)|0;m=m+Math.imul(T,Pb)|0;t=t+Math.imul(T,wc)|0;var ad=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ad>>>26)|0;ad&=67108863;W=Math.imul(ea,ta);m=Math.imul(ea,Pa);m=m+Math.imul(Oa,ta)|0;t=Math.imul(Oa,Pa);W=W+Math.imul(Ga,ma)|0;m=m+Math.imul(Ga,
Zb)|0;m=m+Math.imul(da,ma)|0;t=t+Math.imul(da,Zb)|0;W=W+Math.imul(Y,Za)|0;m=m+Math.imul(Y,Db)|0;m=m+Math.imul(na,Za)|0;t=t+Math.imul(na,Db)|0;W=W+Math.imul(L,Pb)|0;m=m+Math.imul(L,wc)|0;m=m+Math.imul(wa,Pb)|0;t=t+Math.imul(wa,wc)|0;W=W+Math.imul(U,sc)|0;m=m+Math.imul(U,Xc)|0;m=m+Math.imul(T,sc)|0;t=t+Math.imul(T,Xc)|0;var bd=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(bd>>>26)|0;bd&=67108863;W=Math.imul(ia,ta);m=Math.imul(ia,Pa);m=m+Math.imul(eb,ta)|0;t=Math.imul(eb,Pa);W=W+Math.imul(ea,ma)|0;m=m+
Math.imul(ea,Zb)|0;m=m+Math.imul(Oa,ma)|0;t=t+Math.imul(Oa,Zb)|0;W=W+Math.imul(Ga,Za)|0;m=m+Math.imul(Ga,Db)|0;m=m+Math.imul(da,Za)|0;t=t+Math.imul(da,Db)|0;W=W+Math.imul(Y,Pb)|0;m=m+Math.imul(Y,wc)|0;m=m+Math.imul(na,Pb)|0;t=t+Math.imul(na,wc)|0;W=W+Math.imul(L,sc)|0;m=m+Math.imul(L,Xc)|0;m=m+Math.imul(wa,sc)|0;t=t+Math.imul(wa,Xc)|0;W=W+Math.imul(U,Lc)|0;m=m+Math.imul(U,hd)|0;m=m+Math.imul(T,Lc)|0;t=t+Math.imul(T,hd)|0;var qi=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(qi>>>26)|0;qi&=67108863;W=
Math.imul(Va,ta);m=Math.imul(Va,Pa);m=m+Math.imul(Bb,ta)|0;t=Math.imul(Bb,Pa);W=W+Math.imul(ia,ma)|0;m=m+Math.imul(ia,Zb)|0;m=m+Math.imul(eb,ma)|0;t=t+Math.imul(eb,Zb)|0;W=W+Math.imul(ea,Za)|0;m=m+Math.imul(ea,Db)|0;m=m+Math.imul(Oa,Za)|0;t=t+Math.imul(Oa,Db)|0;W=W+Math.imul(Ga,Pb)|0;m=m+Math.imul(Ga,wc)|0;m=m+Math.imul(da,Pb)|0;t=t+Math.imul(da,wc)|0;W=W+Math.imul(Y,sc)|0;m=m+Math.imul(Y,Xc)|0;m=m+Math.imul(na,sc)|0;t=t+Math.imul(na,Xc)|0;W=W+Math.imul(L,Lc)|0;m=m+Math.imul(L,hd)|0;m=m+Math.imul(wa,
Lc)|0;t=t+Math.imul(wa,hd)|0;W=W+Math.imul(U,Qc)|0;m=m+Math.imul(U,ld)|0;m=m+Math.imul(T,Qc)|0;t=t+Math.imul(T,ld)|0;var ei=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ei>>>26)|0;ei&=67108863;W=Math.imul(Sa,ta);m=Math.imul(Sa,Pa);m=m+Math.imul(sa,ta)|0;t=Math.imul(sa,Pa);W=W+Math.imul(Va,ma)|0;m=m+Math.imul(Va,Zb)|0;m=m+Math.imul(Bb,ma)|0;t=t+Math.imul(Bb,Zb)|0;W=W+Math.imul(ia,Za)|0;m=m+Math.imul(ia,Db)|0;m=m+Math.imul(eb,Za)|0;t=t+Math.imul(eb,Db)|0;W=W+Math.imul(ea,Pb)|0;m=m+Math.imul(ea,wc)|0;
m=m+Math.imul(Oa,Pb)|0;t=t+Math.imul(Oa,wc)|0;W=W+Math.imul(Ga,sc)|0;m=m+Math.imul(Ga,Xc)|0;m=m+Math.imul(da,sc)|0;t=t+Math.imul(da,Xc)|0;W=W+Math.imul(Y,Lc)|0;m=m+Math.imul(Y,hd)|0;m=m+Math.imul(na,Lc)|0;t=t+Math.imul(na,hd)|0;W=W+Math.imul(L,Qc)|0;m=m+Math.imul(L,ld)|0;m=m+Math.imul(wa,Qc)|0;t=t+Math.imul(wa,ld)|0;W=W+Math.imul(U,Wc)|0;m=m+Math.imul(U,od)|0;m=m+Math.imul(T,Wc)|0;t=t+Math.imul(T,od)|0;var Zh=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Zh>>>26)|0;Zh&=67108863;W=Math.imul(Z,ta);m=Math.imul(Z,
Pa);m=m+Math.imul(Da,ta)|0;t=Math.imul(Da,Pa);W=W+Math.imul(Sa,ma)|0;m=m+Math.imul(Sa,Zb)|0;m=m+Math.imul(sa,ma)|0;t=t+Math.imul(sa,Zb)|0;W=W+Math.imul(Va,Za)|0;m=m+Math.imul(Va,Db)|0;m=m+Math.imul(Bb,Za)|0;t=t+Math.imul(Bb,Db)|0;W=W+Math.imul(ia,Pb)|0;m=m+Math.imul(ia,wc)|0;m=m+Math.imul(eb,Pb)|0;t=t+Math.imul(eb,wc)|0;W=W+Math.imul(ea,sc)|0;m=m+Math.imul(ea,Xc)|0;m=m+Math.imul(Oa,sc)|0;t=t+Math.imul(Oa,Xc)|0;W=W+Math.imul(Ga,Lc)|0;m=m+Math.imul(Ga,hd)|0;m=m+Math.imul(da,Lc)|0;t=t+Math.imul(da,hd)|
0;W=W+Math.imul(Y,Qc)|0;m=m+Math.imul(Y,ld)|0;m=m+Math.imul(na,Qc)|0;t=t+Math.imul(na,ld)|0;W=W+Math.imul(L,Wc)|0;m=m+Math.imul(L,od)|0;m=m+Math.imul(wa,Wc)|0;t=t+Math.imul(wa,od)|0;W=W+Math.imul(U,Yc)|0;m=m+Math.imul(U,Vc)|0;m=m+Math.imul(T,Yc)|0;t=t+Math.imul(T,Vc)|0;var xi=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(xi>>>26)|0;xi&=67108863;W=Math.imul(B,ta);m=Math.imul(B,Pa);m=m+Math.imul(X,ta)|0;t=Math.imul(X,Pa);W=W+Math.imul(Z,ma)|0;m=m+Math.imul(Z,Zb)|0;m=m+Math.imul(Da,ma)|0;t=t+Math.imul(Da,
Zb)|0;W=W+Math.imul(Sa,Za)|0;m=m+Math.imul(Sa,Db)|0;m=m+Math.imul(sa,Za)|0;t=t+Math.imul(sa,Db)|0;W=W+Math.imul(Va,Pb)|0;m=m+Math.imul(Va,wc)|0;m=m+Math.imul(Bb,Pb)|0;t=t+Math.imul(Bb,wc)|0;W=W+Math.imul(ia,sc)|0;m=m+Math.imul(ia,Xc)|0;m=m+Math.imul(eb,sc)|0;t=t+Math.imul(eb,Xc)|0;W=W+Math.imul(ea,Lc)|0;m=m+Math.imul(ea,hd)|0;m=m+Math.imul(Oa,Lc)|0;t=t+Math.imul(Oa,hd)|0;W=W+Math.imul(Ga,Qc)|0;m=m+Math.imul(Ga,ld)|0;m=m+Math.imul(da,Qc)|0;t=t+Math.imul(da,ld)|0;W=W+Math.imul(Y,Wc)|0;m=m+Math.imul(Y,
od)|0;m=m+Math.imul(na,Wc)|0;t=t+Math.imul(na,od)|0;W=W+Math.imul(L,Yc)|0;m=m+Math.imul(L,Vc)|0;m=m+Math.imul(wa,Yc)|0;t=t+Math.imul(wa,Vc)|0;W=W+Math.imul(U,A)|0;m=m+Math.imul(U,cd)|0;m=m+Math.imul(T,A)|0;t=t+Math.imul(T,cd)|0;U=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(U>>>26)|0;U&=67108863;W=Math.imul(B,ma);m=Math.imul(B,Zb);m=m+Math.imul(X,ma)|0;t=Math.imul(X,Zb);W=W+Math.imul(Z,Za)|0;m=m+Math.imul(Z,Db)|0;m=m+Math.imul(Da,Za)|0;t=t+Math.imul(Da,Db)|0;W=W+Math.imul(Sa,Pb)|0;m=m+Math.imul(Sa,
wc)|0;m=m+Math.imul(sa,Pb)|0;t=t+Math.imul(sa,wc)|0;W=W+Math.imul(Va,sc)|0;m=m+Math.imul(Va,Xc)|0;m=m+Math.imul(Bb,sc)|0;t=t+Math.imul(Bb,Xc)|0;W=W+Math.imul(ia,Lc)|0;m=m+Math.imul(ia,hd)|0;m=m+Math.imul(eb,Lc)|0;t=t+Math.imul(eb,hd)|0;W=W+Math.imul(ea,Qc)|0;m=m+Math.imul(ea,ld)|0;m=m+Math.imul(Oa,Qc)|0;t=t+Math.imul(Oa,ld)|0;W=W+Math.imul(Ga,Wc)|0;m=m+Math.imul(Ga,od)|0;m=m+Math.imul(da,Wc)|0;t=t+Math.imul(da,od)|0;W=W+Math.imul(Y,Yc)|0;m=m+Math.imul(Y,Vc)|0;m=m+Math.imul(na,Yc)|0;t=t+Math.imul(na,
Vc)|0;W=W+Math.imul(L,A)|0;m=m+Math.imul(L,cd)|0;m=m+Math.imul(wa,A)|0;t=t+Math.imul(wa,cd)|0;L=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(L>>>26)|0;L&=67108863;W=Math.imul(B,Za);m=Math.imul(B,Db);m=m+Math.imul(X,Za)|0;t=Math.imul(X,Db);W=W+Math.imul(Z,Pb)|0;m=m+Math.imul(Z,wc)|0;m=m+Math.imul(Da,Pb)|0;t=t+Math.imul(Da,wc)|0;W=W+Math.imul(Sa,sc)|0;m=m+Math.imul(Sa,Xc)|0;m=m+Math.imul(sa,sc)|0;t=t+Math.imul(sa,Xc)|0;W=W+Math.imul(Va,Lc)|0;m=m+Math.imul(Va,hd)|0;m=m+Math.imul(Bb,Lc)|0;t=t+Math.imul(Bb,
hd)|0;W=W+Math.imul(ia,Qc)|0;m=m+Math.imul(ia,ld)|0;m=m+Math.imul(eb,Qc)|0;t=t+Math.imul(eb,ld)|0;W=W+Math.imul(ea,Wc)|0;m=m+Math.imul(ea,od)|0;m=m+Math.imul(Oa,Wc)|0;t=t+Math.imul(Oa,od)|0;W=W+Math.imul(Ga,Yc)|0;m=m+Math.imul(Ga,Vc)|0;m=m+Math.imul(da,Yc)|0;t=t+Math.imul(da,Vc)|0;W=W+Math.imul(Y,A)|0;m=m+Math.imul(Y,cd)|0;m=m+Math.imul(na,A)|0;t=t+Math.imul(na,cd)|0;Y=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Y>>>26)|0;Y&=67108863;W=Math.imul(B,Pb);m=Math.imul(B,wc);m=m+Math.imul(X,Pb)|0;t=Math.imul(X,
wc);W=W+Math.imul(Z,sc)|0;m=m+Math.imul(Z,Xc)|0;m=m+Math.imul(Da,sc)|0;t=t+Math.imul(Da,Xc)|0;W=W+Math.imul(Sa,Lc)|0;m=m+Math.imul(Sa,hd)|0;m=m+Math.imul(sa,Lc)|0;t=t+Math.imul(sa,hd)|0;W=W+Math.imul(Va,Qc)|0;m=m+Math.imul(Va,ld)|0;m=m+Math.imul(Bb,Qc)|0;t=t+Math.imul(Bb,ld)|0;W=W+Math.imul(ia,Wc)|0;m=m+Math.imul(ia,od)|0;m=m+Math.imul(eb,Wc)|0;t=t+Math.imul(eb,od)|0;W=W+Math.imul(ea,Yc)|0;m=m+Math.imul(ea,Vc)|0;m=m+Math.imul(Oa,Yc)|0;t=t+Math.imul(Oa,Vc)|0;W=W+Math.imul(Ga,A)|0;m=m+Math.imul(Ga,
cd)|0;m=m+Math.imul(da,A)|0;t=t+Math.imul(da,cd)|0;Ga=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Ga>>>26)|0;Ga&=67108863;W=Math.imul(B,sc);m=Math.imul(B,Xc);m=m+Math.imul(X,sc)|0;t=Math.imul(X,Xc);W=W+Math.imul(Z,Lc)|0;m=m+Math.imul(Z,hd)|0;m=m+Math.imul(Da,Lc)|0;t=t+Math.imul(Da,hd)|0;W=W+Math.imul(Sa,Qc)|0;m=m+Math.imul(Sa,ld)|0;m=m+Math.imul(sa,Qc)|0;t=t+Math.imul(sa,ld)|0;W=W+Math.imul(Va,Wc)|0;m=m+Math.imul(Va,od)|0;m=m+Math.imul(Bb,Wc)|0;t=t+Math.imul(Bb,od)|0;W=W+Math.imul(ia,Yc)|0;m=m+Math.imul(ia,
Vc)|0;m=m+Math.imul(eb,Yc)|0;t=t+Math.imul(eb,Vc)|0;W=W+Math.imul(ea,A)|0;m=m+Math.imul(ea,cd)|0;m=m+Math.imul(Oa,A)|0;t=t+Math.imul(Oa,cd)|0;ea=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ea>>>26)|0;ea&=67108863;W=Math.imul(B,Lc);m=Math.imul(B,hd);m=m+Math.imul(X,Lc)|0;t=Math.imul(X,hd);W=W+Math.imul(Z,Qc)|0;m=m+Math.imul(Z,ld)|0;m=m+Math.imul(Da,Qc)|0;t=t+Math.imul(Da,ld)|0;W=W+Math.imul(Sa,Wc)|0;m=m+Math.imul(Sa,od)|0;m=m+Math.imul(sa,Wc)|0;t=t+Math.imul(sa,od)|0;W=W+Math.imul(Va,Yc)|0;m=m+Math.imul(Va,
Vc)|0;m=m+Math.imul(Bb,Yc)|0;t=t+Math.imul(Bb,Vc)|0;W=W+Math.imul(ia,A)|0;m=m+Math.imul(ia,cd)|0;m=m+Math.imul(eb,A)|0;t=t+Math.imul(eb,cd)|0;ia=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ia>>>26)|0;ia&=67108863;W=Math.imul(B,Qc);m=Math.imul(B,ld);m=m+Math.imul(X,Qc)|0;t=Math.imul(X,ld);W=W+Math.imul(Z,Wc)|0;m=m+Math.imul(Z,od)|0;m=m+Math.imul(Da,Wc)|0;t=t+Math.imul(Da,od)|0;W=W+Math.imul(Sa,Yc)|0;m=m+Math.imul(Sa,Vc)|0;m=m+Math.imul(sa,Yc)|0;t=t+Math.imul(sa,Vc)|0;W=W+Math.imul(Va,A)|0;m=m+Math.imul(Va,
cd)|0;m=m+Math.imul(Bb,A)|0;t=t+Math.imul(Bb,cd)|0;Va=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Va>>>26)|0;Va&=67108863;W=Math.imul(B,Wc);m=Math.imul(B,od);m=m+Math.imul(X,Wc)|0;t=Math.imul(X,od);W=W+Math.imul(Z,Yc)|0;m=m+Math.imul(Z,Vc)|0;m=m+Math.imul(Da,Yc)|0;t=t+Math.imul(Da,Vc)|0;W=W+Math.imul(Sa,A)|0;m=m+Math.imul(Sa,cd)|0;m=m+Math.imul(sa,A)|0;t=t+Math.imul(sa,cd)|0;Sa=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Sa>>>26)|0;Sa&=67108863;W=Math.imul(B,Yc);m=Math.imul(B,Vc);m=m+Math.imul(X,Yc)|
0;t=Math.imul(X,Vc);W=W+Math.imul(Z,A)|0;m=m+Math.imul(Z,cd)|0;m=m+Math.imul(Da,A)|0;t=t+Math.imul(Da,cd)|0;Z=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Z>>>26)|0;Z&=67108863;W=Math.imul(B,A);m=Math.imul(B,cd);m=m+Math.imul(X,A)|0;t=Math.imul(X,cd);T=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(T>>>26)|0;H[0]=af;H[1]=zc;H[2]=pi;H[3]=ad;H[4]=bd;H[5]=qi;H[6]=ei;H[7]=Zh;H[8]=xi;H[9]=U;H[10]=L;H[11]=Y;H[12]=Ga;H[13]=ea;H[14]=ia;H[15]=Va;H[16]=Sa;H[17]=Z;H[18]=T&67108863;0!==F&&(H[19]=F,u.length++);return u};
Math.imul||(N=h);l.prototype.mulTo=function(m,t){var u=(this||ib).length+m.length;if(10===(this||ib).length&&10===m.length)m=N(this||ib,m,t);else if(63>u)m=h(this||ib,m,t);else if(1024>u){u=this||ib;t.negative=m.negative^u.negative;t.length=u.length+m.length;for(var B=0,A=0,H=0;H<t.length-1;H++){var F=A;A=0;B&=67108863;for(var L=Math.min(H,m.length-1),U=Math.max(0,H-u.length+1);U<=L;U++){var T=(u.words[H-U]|0)*(m.words[U]|0),Y=T&67108863;F=F+(T/67108864|0)|0;Y=Y+B|0;B=Y&67108863;F=F+(Y>>>26)|0;A+=
F>>>26;F&=67108863}t.words[H]=B;B=F}0!==B?t.words[H]=B:t.length--;m=t.strip()}else u=this||ib,m=(new a).mulp(u,m,t);return m};a.prototype.makeRBT=function(m){for(var t=Array(m),u=l.prototype._countBits(m)-1,B=0;B<m;B++)t[B]=this.revBin(B,u,m);return t};a.prototype.revBin=function(m,t,u){if(0===m||m===u-1)return m;for(var B=u=0;B<t;B++)u|=(m&1)<<t-B-1,m>>=1;return u};a.prototype.permute=function(m,t,u,B,A,H){for(var F=0;F<H;F++)B[F]=t[m[F]],A[F]=u[m[F]]};a.prototype.transform=function(m,t,u,B,A,H){this.permute(H,
m,t,u,B,A);for(m=1;m<A;m<<=1){t=m<<1;H=Math.cos(2*Math.PI/t);for(var F=Math.sin(2*Math.PI/t),L=0;L<A;L+=t)for(var U=H,T=F,Y=0;Y<m;Y++){var wa=u[L+Y],Ga=B[L+Y],na=u[L+Y+m],ea=B[L+Y+m],da=U*na-T*ea;ea=U*ea+T*na;na=da;u[L+Y]=wa+na;B[L+Y]=Ga+ea;u[L+Y+m]=wa-na;B[L+Y+m]=Ga-ea;Y!==t&&(da=H*U-F*T,T=H*T+F*U,U=da)}}};a.prototype.guessLen13b=function(m,t){m=Math.max(t,m)|1;t=m&1;var u=0;for(m=m/2|0;m;m>>>=1)u++;return 1<<u+1+t};a.prototype.conjugate=function(m,t,u){if(!(1>=u))for(var B=0;B<u/2;B++){var A=m[B];
m[B]=m[u-B-1];m[u-B-1]=A;A=t[B];t[B]=-t[u-B-1];t[u-B-1]=-A}};a.prototype.normalize13b=function(m,t){for(var u=0,B=0;B<t/2;B++)u=8192*Math.round(m[2*B+1]/t)+Math.round(m[2*B]/t)+u,m[B]=u&67108863,u=67108864>u?0:u/67108864|0;return m};a.prototype.convert13b=function(m,t,u,B){for(var A=0,H=0;H<t;H++)A+=m[H]|0,u[2*H]=A&8191,A>>>=13,u[2*H+1]=A&8191,A>>>=13;for(H=2*t;H<B;++H)u[H]=0;k(0===A);k(0===(A&-8192))};a.prototype.stub=function(m){for(var t=Array(m),u=0;u<m;u++)t[u]=0;return t};a.prototype.mulp=function(m,
t,u){var B=2*this.guessLen13b(m.length,t.length),A=this.makeRBT(B),H=this.stub(B),F=Array(B),L=Array(B),U=Array(B),T=Array(B),Y=Array(B),wa=Array(B),Ga=u.words;Ga.length=B;this.convert13b(m.words,m.length,F,B);this.convert13b(t.words,t.length,T,B);this.transform(F,H,L,U,B,A);this.transform(T,H,Y,wa,B,A);for(F=0;F<B;F++)T=L[F]*Y[F]-U[F]*wa[F],U[F]=L[F]*wa[F]+U[F]*Y[F],L[F]=T;this.conjugate(L,U,B);this.transform(L,U,Ga,H,B,A);this.conjugate(Ga,H,B);this.normalize13b(Ga,B);u.negative=m.negative^t.negative;
u.length=m.length+t.length;return u.strip()};l.prototype.mul=function(m){var t=new l(null);t.words=Array((this||ib).length+m.length);return this.mulTo(m,t)};l.prototype.mulf=function(m){var t=new l(null);t.words=Array((this||ib).length+m.length);var u=this||ib;return(new a).mulp(u,m,t)};l.prototype.imul=function(m){return this.clone().mulTo(m,this||ib)};l.prototype.imuln=function(m){k("number"===typeof m);k(67108864>m);for(var t=0,u=0;u<(this||ib).length;u++){var B=((this||ib).words[u]|0)*m,A=(B&
67108863)+(t&67108863);t>>=26;t+=B/67108864|0;t+=A>>>26;(this||ib).words[u]=A&67108863}0!==t&&((this||ib).words[u]=t,(this||ib).length++);return this||ib};l.prototype.muln=function(m){return this.clone().imuln(m)};l.prototype.sqr=function(){return this.mul(this||ib)};l.prototype.isqr=function(){return this.imul(this.clone())};l.prototype.pow=function(m){for(var t=Array(m.bitLength()),u=0;u<t.length;u++){var B=u%26;t[u]=(m.words[u/26|0]&1<<B)>>>B}if(0===t.length)return new l(1);m=this||ib;for(u=0;u<
t.length&&0===t[u];u++,m=m.sqr());if(++u<t.length)for(B=m.sqr();u<t.length;u++,B=B.sqr())0!==t[u]&&(m=m.mul(B));return m};l.prototype.iushln=function(m){k("number"===typeof m&&0<=m);var t=m%26;m=(m-t)/26;var u=67108863>>>26-t<<26-t,B;if(0!==t){var A=0;for(B=0;B<(this||ib).length;B++){var H=(this||ib).words[B]&u;(this||ib).words[B]=((this||ib).words[B]|0)-H<<t|A;A=H>>>26-t}A&&((this||ib).words[B]=A,(this||ib).length++)}if(0!==m){for(B=(this||ib).length-1;0<=B;B--)(this||ib).words[B+m]=(this||ib).words[B];
for(B=0;B<m;B++)(this||ib).words[B]=0;(this||ib).length+=m}return this.strip()};l.prototype.ishln=function(m){k(0===(this||ib).negative);return this.iushln(m)};l.prototype.iushrn=function(m,t,u){k("number"===typeof m&&0<=m);var B=m%26,A=Math.min((m-B)/26,(this||ib).length);m=67108863^67108863>>>B<<B;t=Math.max(0,(t?(t-t%26)/26:0)-A);if(u){for(var H=0;H<A;H++)u.words[H]=(this||ib).words[H];u.length=A}if(0!==A)if((this||ib).length>A)for((this||ib).length-=A,H=0;H<(this||ib).length;H++)(this||ib).words[H]=
(this||ib).words[H+A];else(this||ib).words[0]=0,(this||ib).length=1;A=0;for(H=(this||ib).length-1;0<=H&&(0!==A||H>=t);H--){var F=(this||ib).words[H]|0;(this||ib).words[H]=A<<26-B|F>>>B;A=F&m}u&&0!==A&&(u.words[u.length++]=A);0===(this||ib).length&&((this||ib).words[0]=0,(this||ib).length=1);return this.strip()};l.prototype.ishrn=function(m,t,u){k(0===(this||ib).negative);return this.iushrn(m,t,u)};l.prototype.shln=function(m){return this.clone().ishln(m)};l.prototype.ushln=function(m){return this.clone().iushln(m)};
l.prototype.shrn=function(m){return this.clone().ishrn(m)};l.prototype.ushrn=function(m){return this.clone().iushrn(m)};l.prototype.testn=function(m){k("number"===typeof m&&0<=m);var t=m%26;m=(m-t)/26;return(this||ib).length<=m?!1:!!((this||ib).words[m]&1<<t)};l.prototype.imaskn=function(m){k("number"===typeof m&&0<=m);var t=m%26;m=(m-t)/26;k(0===(this||ib).negative,"imaskn works only with positive numbers");if((this||ib).length<=m)return this||ib;0!==t&&m++;(this||ib).length=Math.min(m,(this||ib).length);
0!==t&&((this||ib).words[(this||ib).length-1]&=67108863^67108863>>>t<<t);return this.strip()};l.prototype.maskn=function(m){return this.clone().imaskn(m)};l.prototype.iaddn=function(m){k("number"===typeof m);k(67108864>m);if(0>m)return this.isubn(-m);if(0!==(this||ib).negative){if(1===(this||ib).length&&((this||ib).words[0]|0)<m)return(this||ib).words[0]=m-((this||ib).words[0]|0),(this||ib).negative=0,this||ib;(this||ib).negative=0;this.isubn(m);(this||ib).negative=1;return this||ib}return this._iaddn(m)};
l.prototype._iaddn=function(m){(this||ib).words[0]+=m;for(m=0;m<(this||ib).length&&67108864<=(this||ib).words[m];m++)(this||ib).words[m]-=67108864,m===(this||ib).length-1?(this||ib).words[m+1]=1:(this||ib).words[m+1]++;(this||ib).length=Math.max((this||ib).length,m+1);return this||ib};l.prototype.isubn=function(m){k("number"===typeof m);k(67108864>m);if(0>m)return this.iaddn(-m);if(0!==(this||ib).negative)return(this||ib).negative=0,this.iaddn(m),(this||ib).negative=1,this||ib;(this||ib).words[0]-=
m;if(1===(this||ib).length&&0>(this||ib).words[0])(this||ib).words[0]=-(this||ib).words[0],(this||ib).negative=1;else for(m=0;m<(this||ib).length&&0>(this||ib).words[m];m++)(this||ib).words[m]+=67108864,--(this||ib).words[m+1];return this.strip()};l.prototype.addn=function(m){return this.clone().iaddn(m)};l.prototype.subn=function(m){return this.clone().isubn(m)};l.prototype.iabs=function(){(this||ib).negative=0;return this||ib};l.prototype.abs=function(){return this.clone().iabs()};l.prototype._ishlnsubmul=
function(m,t,u){var B;this._expand(m.length+u);var A=0;for(B=0;B<m.length;B++){var H=((this||ib).words[B+u]|0)+A;A=(m.words[B]|0)*t;H-=A&67108863;A=(H>>26)-(A/67108864|0);(this||ib).words[B+u]=H&67108863}for(;B<(this||ib).length-u;B++)H=((this||ib).words[B+u]|0)+A,A=H>>26,(this||ib).words[B+u]=H&67108863;if(0===A)return this.strip();k(-1===A);for(B=A=0;B<(this||ib).length;B++)H=-((this||ib).words[B]|0)+A,A=H>>26,(this||ib).words[B]=H&67108863;(this||ib).negative=1;return this.strip()};l.prototype._wordDiv=
function(m,t){var u=this.clone(),B=m,A=B.words[B.length-1]|0;m=26-this._countBits(A);0!==m&&(B=B.ushln(m),u.iushln(m),A=B.words[B.length-1]|0);var H=u.length-B.length;if("mod"!==t){var F=new l(null);F.length=H+1;F.words=Array(F.length);for(var L=0;L<F.length;L++)F.words[L]=0}L=u.clone()._ishlnsubmul(B,1,H);0===L.negative&&(u=L,F&&(F.words[H]=1));for(--H;0<=H;H--){L=67108864*(u.words[B.length+H]|0)+(u.words[B.length+H-1]|0);L=Math.min(L/A|0,67108863);for(u._ishlnsubmul(B,L,H);0!==u.negative;)L--,u.negative=
0,u._ishlnsubmul(B,1,H),u.isZero()||(u.negative^=1);F&&(F.words[H]=L)}F&&F.strip();u.strip();"div"!==t&&0!==m&&u.iushrn(m);return{div:F||null,mod:u}};l.prototype.divmod=function(m,t,u){k(!m.isZero());if(this.isZero())return{div:new l(0),mod:new l(0)};var B;if(0!==(this||ib).negative&&0===m.negative){var A=this.neg().divmod(m,t);"mod"!==t&&(B=A.div.neg());if("div"!==t){var H=A.mod.neg();u&&0!==H.negative&&H.iadd(m)}return{div:B,mod:H}}return 0===(this||ib).negative&&0!==m.negative?(A=this.divmod(m.neg(),
t),"mod"!==t&&(B=A.div.neg()),{div:B,mod:A.mod}):0!==((this||ib).negative&m.negative)?(A=this.neg().divmod(m.neg(),t),"div"!==t&&(H=A.mod.neg(),u&&0!==H.negative&&H.isub(m)),{div:A.div,mod:H}):m.length>(this||ib).length||0>this.cmp(m)?{div:new l(0),mod:this||ib}:1===m.length?"div"===t?{div:this.divn(m.words[0]),mod:null}:"mod"===t?{div:null,mod:new l(this.modn(m.words[0]))}:{div:this.divn(m.words[0]),mod:new l(this.modn(m.words[0]))}:this._wordDiv(m,t)};l.prototype.div=function(m){return this.divmod(m,
"div",!1).div};l.prototype.mod=function(m){return this.divmod(m,"mod",!1).mod};l.prototype.umod=function(m){return this.divmod(m,"mod",!0).mod};l.prototype.divRound=function(m){var t=this.divmod(m);if(t.mod.isZero())return t.div;var u=0!==t.div.negative?t.mod.isub(m):t.mod,B=m.ushrn(1);m=m.andln(1);u=u.cmp(B);return 0>u||1===m&&0===u?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)};l.prototype.modn=function(m){k(67108863>=m);for(var t=67108864%m,u=0,B=(this||ib).length-1;0<=B;B--)u=(t*u+((this||
ib).words[B]|0))%m;return u};l.prototype.idivn=function(m){k(67108863>=m);for(var t=0,u=(this||ib).length-1;0<=u;u--)t=((this||ib).words[u]|0)+67108864*t,(this||ib).words[u]=t/m|0,t%=m;return this.strip()};l.prototype.divn=function(m){return this.clone().idivn(m)};l.prototype.egcd=function(m){k(0===m.negative);k(!m.isZero());var t=this||ib,u=m.clone();t=0!==t.negative?t.umod(m):t.clone();m=new l(1);for(var B=new l(0),A=new l(0),H=new l(1),F=0;t.isEven()&&u.isEven();)t.iushrn(1),u.iushrn(1),++F;for(var L=
u.clone(),U=t.clone();!t.isZero();){for(var T=0,Y=1;0===(t.words[0]&Y)&&26>T;++T,Y<<=1);if(0<T)for(t.iushrn(T);0<T--;){if(m.isOdd()||B.isOdd())m.iadd(L),B.isub(U);m.iushrn(1);B.iushrn(1)}T=0;for(Y=1;0===(u.words[0]&Y)&&26>T;++T,Y<<=1);if(0<T)for(u.iushrn(T);0<T--;){if(A.isOdd()||H.isOdd())A.iadd(L),H.isub(U);A.iushrn(1);H.iushrn(1)}0<=t.cmp(u)?(t.isub(u),m.isub(A),B.isub(H)):(u.isub(t),A.isub(m),H.isub(B))}return{a:A,b:H,gcd:u.iushln(F)}};l.prototype._invmp=function(m){k(0===m.negative);k(!m.isZero());
var t=this||ib,u=m.clone();t=0!==t.negative?t.umod(m):t.clone();for(var B=new l(1),A=new l(0),H=u.clone();0<t.cmpn(1)&&0<u.cmpn(1);){for(var F=0,L=1;0===(t.words[0]&L)&&26>F;++F,L<<=1);if(0<F)for(t.iushrn(F);0<F--;)B.isOdd()&&B.iadd(H),B.iushrn(1);F=0;for(L=1;0===(u.words[0]&L)&&26>F;++F,L<<=1);if(0<F)for(u.iushrn(F);0<F--;)A.isOdd()&&A.iadd(H),A.iushrn(1);0<=t.cmp(u)?(t.isub(u),B.isub(A)):(u.isub(t),A.isub(B))}t=0===t.cmpn(1)?B:A;0>t.cmpn(0)&&t.iadd(m);return t};l.prototype.gcd=function(m){if(this.isZero())return m.abs();
if(m.isZero())return this.abs();var t=this.clone();m=m.clone();t.negative=0;for(var u=m.negative=0;t.isEven()&&m.isEven();u++)t.iushrn(1),m.iushrn(1);do{for(;t.isEven();)t.iushrn(1);for(;m.isEven();)m.iushrn(1);var B=t.cmp(m);if(0>B)B=t,t=m,m=B;else if(0===B||0===m.cmpn(1))break;t.isub(m)}while(1);return m.iushln(u)};l.prototype.invm=function(m){return this.egcd(m).a.umod(m)};l.prototype.isEven=function(){return 0===((this||ib).words[0]&1)};l.prototype.isOdd=function(){return 1===((this||ib).words[0]&
1)};l.prototype.andln=function(m){return(this||ib).words[0]&m};l.prototype.bincn=function(m){k("number"===typeof m);var t=m%26;m=(m-t)/26;t=1<<t;if((this||ib).length<=m)return this._expand(m+1),(this||ib).words[m]|=t,this||ib;for(;0!==t&&m<(this||ib).length;m++){var u=(this||ib).words[m]|0;u+=t;t=u>>>26;u&=67108863;(this||ib).words[m]=u}0!==t&&((this||ib).words[m]=t,(this||ib).length++);return this||ib};l.prototype.isZero=function(){return 1===(this||ib).length&&0===(this||ib).words[0]};l.prototype.cmpn=
function(m){var t=0>m;if(0!==(this||ib).negative&&!t)return-1;if(0===(this||ib).negative&&t)return 1;this.strip();1<(this||ib).length?m=1:(t&&(m=-m),k(67108863>=m,"Number is too big"),t=(this||ib).words[0]|0,m=t===m?0:t<m?-1:1);return 0!==(this||ib).negative?-m|0:m};l.prototype.cmp=function(m){if(0!==(this||ib).negative&&0===m.negative)return-1;if(0===(this||ib).negative&&0!==m.negative)return 1;m=this.ucmp(m);return 0!==(this||ib).negative?-m|0:m};l.prototype.ucmp=function(m){if((this||ib).length>
m.length)return 1;if((this||ib).length<m.length)return-1;for(var t=0,u=(this||ib).length-1;0<=u;u--){var B=(this||ib).words[u]|0,A=m.words[u]|0;if(B!==A){B<A?t=-1:B>A&&(t=1);break}}return t};l.prototype.gtn=function(m){return 1===this.cmpn(m)};l.prototype.gt=function(m){return 1===this.cmp(m)};l.prototype.gten=function(m){return 0<=this.cmpn(m)};l.prototype.gte=function(m){return 0<=this.cmp(m)};l.prototype.ltn=function(m){return-1===this.cmpn(m)};l.prototype.lt=function(m){return-1===this.cmp(m)};
l.prototype.lten=function(m){return 0>=this.cmpn(m)};l.prototype.lte=function(m){return 0>=this.cmp(m)};l.prototype.eqn=function(m){return 0===this.cmpn(m)};l.prototype.eq=function(m){return 0===this.cmp(m)};l.red=function(m){return new y(m)};l.prototype.toRed=function(m){k(!(this||ib).red,"Already a number in reduction context");k(0===(this||ib).negative,"red works only with positives");return m.convertTo(this||ib)._forceRed(m)};l.prototype.fromRed=function(){k((this||ib).red,"fromRed works only with numbers in reduction context");
return(this||ib).red.convertFrom(this||ib)};l.prototype._forceRed=function(m){(this||ib).red=m;return this||ib};l.prototype.forceRed=function(m){k(!(this||ib).red,"Already a number in reduction context");return this._forceRed(m)};l.prototype.redAdd=function(m){k((this||ib).red,"redAdd works only with red numbers");return(this||ib).red.add(this||ib,m)};l.prototype.redIAdd=function(m){k((this||ib).red,"redIAdd works only with red numbers");return(this||ib).red.iadd(this||ib,m)};l.prototype.redSub=function(m){k((this||
ib).red,"redSub works only with red numbers");return(this||ib).red.sub(this||ib,m)};l.prototype.redISub=function(m){k((this||ib).red,"redISub works only with red numbers");return(this||ib).red.isub(this||ib,m)};l.prototype.redShl=function(m){k((this||ib).red,"redShl works only with red numbers");return(this||ib).red.shl(this||ib,m)};l.prototype.redMul=function(m){k((this||ib).red,"redMul works only with red numbers");(this||ib).red._verify2(this||ib,m);return(this||ib).red.mul(this||ib,m)};l.prototype.redIMul=
function(m){k((this||ib).red,"redMul works only with red numbers");(this||ib).red._verify2(this||ib,m);return(this||ib).red.imul(this||ib,m)};l.prototype.redSqr=function(){k((this||ib).red,"redSqr works only with red numbers");(this||ib).red._verify1(this||ib);return(this||ib).red.sqr(this||ib)};l.prototype.redISqr=function(){k((this||ib).red,"redISqr works only with red numbers");(this||ib).red._verify1(this||ib);return(this||ib).red.isqr(this||ib)};l.prototype.redSqrt=function(){k((this||ib).red,
"redSqrt works only with red numbers");(this||ib).red._verify1(this||ib);return(this||ib).red.sqrt(this||ib)};l.prototype.redInvm=function(){k((this||ib).red,"redInvm works only with red numbers");(this||ib).red._verify1(this||ib);return(this||ib).red.invm(this||ib)};l.prototype.redNeg=function(){k((this||ib).red,"redNeg works only with red numbers");(this||ib).red._verify1(this||ib);return(this||ib).red.neg(this||ib)};l.prototype.redPow=function(m){k((this||ib).red&&!m.red,"redPow(normalNum)");(this||
ib).red._verify1(this||ib);return(this||ib).red.pow(this||ib,m)};var aa={k256:null,p224:null,p192:null,p25519:null};e.prototype._tmp=function(){var m=new l(null);m.words=Array(Math.ceil((this||ib).n/13));return m};e.prototype.ireduce=function(m){do{this.split(m,(this||ib).tmp);m=this.imulK(m);m=m.iadd((this||ib).tmp);var t=m.bitLength()}while(t>(this||ib).n);t=t<(this||ib).n?-1:m.ucmp((this||ib).p);0===t?(m.words[0]=0,m.length=1):0<t?m.isub((this||ib).p):void 0!==m.strip?m.strip():m._strip();return m};
e.prototype.split=function(m,t){m.iushrn((this||ib).n,0,t)};e.prototype.imulK=function(m){return m.imul((this||ib).k)};f(n,e);n.prototype.split=function(m,t){for(var u=Math.min(m.length,9),B=0;B<u;B++)t.words[B]=m.words[B];t.length=u;if(9>=m.length)m.words[0]=0,m.length=1;else{u=m.words[9];t.words[t.length++]=u&4194303;for(B=10;B<m.length;B++)t=m.words[B]|0,m.words[B-10]=(t&4194303)<<4|u>>>22,u=t;u>>>=22;m.words[B-10]=u;m.length=0===u&&10<m.length?m.length-10:m.length-9}};n.prototype.imulK=function(m){m.words[m.length]=
0;m.words[m.length+1]=0;m.length+=2;for(var t=0,u=0;u<m.length;u++){var B=m.words[u]|0;t+=977*B;m.words[u]=t&67108863;t=64*B+(t/67108864|0)}0===m.words[m.length-1]&&(m.length--,0===m.words[m.length-1]&&m.length--);return m};f(q,e);f(r,e);f(v,e);v.prototype.imulK=function(m){for(var t=0,u=0;u<m.length;u++){t=19*(m.words[u]|0)+t;var B=t&67108863;t>>>=26;m.words[u]=B}0!==t&&(m.words[m.length++]=t);return m};l._prime=function(m){if(aa[m])return aa[m];if("k256"===m)var t=new n;else if("p224"===m)t=new q;
else if("p192"===m)t=new r;else if("p25519"===m)t=new v;else throw Error("Unknown prime "+m);return aa[m]=t};y.prototype._verify1=function(m){k(0===m.negative,"red works only with positives");k(m.red,"red works only with red numbers")};y.prototype._verify2=function(m,t){k(0===(m.negative|t.negative),"red works only with positives");k(m.red&&m.red===t.red,"red works only with red numbers")};y.prototype.imod=function(m){return(this||ib).prime?(this||ib).prime.ireduce(m)._forceRed(this||ib):m.umod((this||
ib).m)._forceRed(this||ib)};y.prototype.neg=function(m){return m.isZero()?m.clone():(this||ib).m.sub(m)._forceRed(this||ib)};y.prototype.add=function(m,t){this._verify2(m,t);m=m.add(t);0<=m.cmp((this||ib).m)&&m.isub((this||ib).m);return m._forceRed(this||ib)};y.prototype.iadd=function(m,t){this._verify2(m,t);m=m.iadd(t);0<=m.cmp((this||ib).m)&&m.isub((this||ib).m);return m};y.prototype.sub=function(m,t){this._verify2(m,t);m=m.sub(t);0>m.cmpn(0)&&m.iadd((this||ib).m);return m._forceRed(this||ib)};
y.prototype.isub=function(m,t){this._verify2(m,t);m=m.isub(t);0>m.cmpn(0)&&m.iadd((this||ib).m);return m};y.prototype.shl=function(m,t){this._verify1(m);return this.imod(m.ushln(t))};y.prototype.imul=function(m,t){this._verify2(m,t);return this.imod(m.imul(t))};y.prototype.mul=function(m,t){this._verify2(m,t);return this.imod(m.mul(t))};y.prototype.isqr=function(m){return this.imul(m,m.clone())};y.prototype.sqr=function(m){return this.mul(m,m)};y.prototype.sqrt=function(m){if(m.isZero())return m.clone();
var t=(this||ib).m.andln(3);k(1===t%2);if(3===t)return t=(this||ib).m.add(new l(1)).iushrn(2),this.pow(m,t);for(var u=(this||ib).m.subn(1),B=0;!u.isZero()&&0===u.andln(1);)B++,u.iushrn(1);k(!u.isZero());t=(new l(1)).toRed(this||ib);var A=t.redNeg(),H=(this||ib).m.subn(1).iushrn(1),F=(this||ib).m.bitLength();for(F=(new l(2*F*F)).toRed(this||ib);0!==this.pow(F,H).cmp(A);)F.redIAdd(A);H=this.pow(F,u);A=this.pow(m,u.addn(1).iushrn(1));m=this.pow(m,u);for(u=B;0!==m.cmp(t);){F=m;for(B=0;0!==F.cmp(t);B++)F=
F.redSqr();k(B<u);H=this.pow(H,(new l(1)).iushln(u-B-1));A=A.redMul(H);H=H.redSqr();m=m.redMul(H);u=B}return A};y.prototype.invm=function(m){m=m._invmp((this||ib).m);return 0!==m.negative?(m.negative=0,this.imod(m).redNeg()):this.imod(m)};y.prototype.pow=function(m,t){if(t.isZero())return(new l(1)).toRed(this||ib);if(0===t.cmpn(1))return m.clone();var u=Array(16);u[0]=(new l(1)).toRed(this||ib);u[1]=m;for(var B=2;B<u.length;B++)u[B]=this.mul(u[B-1],m);m=u[0];var A=0,H=0,F=t.bitLength()%26;0===F&&
(F=26);for(B=t.length-1;0<=B;B--){var L=t.words[B];for(--F;0<=F;F--){var U=L>>F&1;m!==u[0]&&(m=this.sqr(m));if(0===U&&0===A)H=0;else if(A<<=1,A|=U,H++,4===H||0===B&&0===F)m=this.mul(m,u[A]),A=H=0}F=26}return m};y.prototype.convertTo=function(m){var t=m.umod((this||ib).m);return t===m?t.clone():t};y.prototype.convertFrom=function(m){m=m.clone();m.red=null;return m};l.mont=function(m){return new D(m)};f(D,y);D.prototype.convertTo=function(m){return this.imod(m.ushln((this||ib).shift))};D.prototype.convertFrom=
function(m){m=this.imod(m.mul((this||ib).rinv));m.red=null;return m};D.prototype.imul=function(m,t){if(m.isZero()||t.isZero())return m.words[0]=0,m.length=1,m;m=m.imul(t);t=m.maskn((this||ib).shift).mul((this||ib).minv).imaskn((this||ib).shift).mul((this||ib).m);t=m=m.isub(t).iushrn((this||ib).shift);0<=m.cmp((this||ib).m)?t=m.isub((this||ib).m):0>m.cmpn(0)&&(t=m.iadd((this||ib).m));return t._forceRed(this||ib)};D.prototype.mul=function(m,t){if(m.isZero()||t.isZero())return(new l(0))._forceRed(this||
ib);m=m.mul(t);t=m.maskn((this||ib).shift).mul((this||ib).minv).imaskn((this||ib).shift).mul((this||ib).m);t=m=m.isub(t).iushrn((this||ib).shift);0<=m.cmp((this||ib).m)?t=m.isub((this||ib).m):0>m.cmpn(0)&&(t=m.iadd((this||ib).m));return t._forceRed(this||ib)};D.prototype.invm=function(m){return this.imod(m._invmp((this||ib).m).mul((this||ib).r2))._forceRed(this||ib)}})(jO,I1);return jO.exports}function Vha(){if(J1)return kO.exports;J1=!0;(function(g,c){function k(m,t){if(!m)throw Error(t||"Assertion failed");
}function f(m,t){m.super_=t;var u=function(){};u.prototype=t.prototype;m.prototype=new u;m.prototype.constructor=m}function l(m,t,u){if(l.isBN(m))return m;(this||jb).negative=0;(this||jb).words=null;(this||jb).length=0;(this||jb).red=null;if(null!==m){if("le"===t||"be"===t)u=t,t=10;this._init(m||0,t||10,u||"be")}}function p(m,t){m=m.charCodeAt(t);return 65<=m&&70>=m?m-55:97<=m&&102>=m?m-87:m-48&15}function b(m,t,u){var B=p(m,u);u-1>=t&&(B|=p(m,u-1)<<4);return B}function d(m,t,u,B){var A=0;for(u=Math.min(m.length,
u);t<u;t++){var H=m.charCodeAt(t)-48;A*=B;A=49<=H?A+(H-49+10):17<=H?A+(H-17+10):A+H}return A}function h(m,t,u){u.negative=t.negative^m.negative;var B=m.length+t.length|0;u.length=B;B=B-1|0;var A=m.words[0]|0,H=t.words[0]|0;A*=H;var F=A/67108864|0;u.words[0]=A&67108863;for(var L=1;L<B;L++){var U=F>>>26,T=F&67108863;F=Math.min(L,t.length-1);for(var Y=Math.max(0,L-m.length+1);Y<=F;Y++)A=m.words[L-Y|0]|0,H=t.words[Y]|0,A=A*H+T,U+=A/67108864|0,T=A&67108863;u.words[L]=T|0;F=U|0}0!==F?u.words[L]=F|0:u.length--;
return u.strip()}function a(m,t){(this||jb).x=m;(this||jb).y=t}function e(m,t){(this||jb).name=m;(this||jb).p=new l(t,16);(this||jb).n=(this||jb).p.bitLength();(this||jb).k=(new l(1)).iushln((this||jb).n).isub((this||jb).p);(this||jb).tmp=this._tmp()}function n(){e.call(this||jb,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function q(){e.call(this||jb,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function r(){e.call(this||jb,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}
function v(){e.call(this||jb,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function y(m){"string"===typeof m?(m=l._prime(m),(this||jb).m=m.p,(this||jb).prime=m):(k(m.gtn(1),"modulus must be greater than 1"),(this||jb).m=m,(this||jb).prime=null)}function D(m){y.call(this||jb,m);(this||jb).shift=(this||jb).m.bitLength();0!==(this||jb).shift%26&&((this||jb).shift+=26-(this||jb).shift%26);(this||jb).r=(new l(1)).iushln((this||jb).shift);(this||jb).r2=this.imod((this||
jb).r.sqr());(this||jb).rinv=(this||jb).r._invmp((this||jb).m);(this||jb).minv=(this||jb).rinv.mul((this||jb).r).isubn(1).div((this||jb).m);(this||jb).minv=(this||jb).minv.umod((this||jb).r);(this||jb).minv=(this||jb).r.sub((this||jb).minv)}"object"===typeof g?g.exports=l:c.BN=l;l.BN=l;l.wordSize=26;try{var E="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:Yg.Buffer}catch(m){}l.isBN=function(m){return m instanceof l?!0:null!==m&&"object"===typeof m&&m.constructor.wordSize===
l.wordSize&&Array.isArray(m.words)};l.max=function(m,t){return 0<m.cmp(t)?m:t};l.min=function(m,t){return 0>m.cmp(t)?m:t};l.prototype._init=function(m,t,u){if("number"===typeof m)return this._initNumber(m,t,u);if("object"===typeof m)return this._initArray(m,t,u);"hex"===t&&(t=16);k(t===(t|0)&&2<=t&&36>=t);m=m.toString().replace(/\s+/g,"");var B=0;"-"===m[0]&&(B++,(this||jb).negative=1);B<m.length&&(16===t?this._parseHex(m,B,u):(this._parseBase(m,t,B),"le"===u&&this._initArray(this.toArray(),t,u)))};
l.prototype._initNumber=function(m,t,u){0>m&&((this||jb).negative=1,m=-m);67108864>m?((this||jb).words=[m&67108863],(this||jb).length=1):4503599627370496>m?((this||jb).words=[m&67108863,m/67108864&67108863],(this||jb).length=2):(k(9007199254740992>m),(this||jb).words=[m&67108863,m/67108864&67108863,1],(this||jb).length=3);"le"===u&&this._initArray(this.toArray(),t,u)};l.prototype._initArray=function(m,t,u){k("number"===typeof m.length);if(0>=m.length)return(this||jb).words=[0],(this||jb).length=1,
this||jb;(this||jb).length=Math.ceil(m.length/3);(this||jb).words=Array((this||jb).length);for(t=0;t<(this||jb).length;t++)(this||jb).words[t]=0;var B=0;if("be"===u)for(t=m.length-1,u=0;0<=t;t-=3){var A=m[t]|m[t-1]<<8|m[t-2]<<16;(this||jb).words[u]|=A<<B&67108863;(this||jb).words[u+1]=A>>>26-B&67108863;B+=24;26<=B&&(B-=26,u++)}else if("le"===u)for(u=t=0;t<m.length;t+=3)A=m[t]|m[t+1]<<8|m[t+2]<<16,(this||jb).words[u]|=A<<B&67108863,(this||jb).words[u+1]=A>>>26-B&67108863,B+=24,26<=B&&(B-=26,u++);return this.strip()};
l.prototype._parseHex=function(m,t,u){(this||jb).length=Math.ceil((m.length-t)/6);(this||jb).words=Array((this||jb).length);for(var B=0;B<(this||jb).length;B++)(this||jb).words[B]=0;var A=0,H=0;if("be"===u)for(B=m.length-1;B>=t;B-=2)u=b(m,t,B)<<A,(this||jb).words[H]|=u&67108863,18<=A?(A-=18,H+=1,(this||jb).words[H]|=u>>>26):A+=8;else for(B=0===(m.length-t)%2?t+1:t;B<m.length;B+=2)u=b(m,t,B)<<A,(this||jb).words[H]|=u&67108863,18<=A?(A-=18,H+=1,(this||jb).words[H]|=u>>>26):A+=8;this.strip()};l.prototype._parseBase=
function(m,t,u){(this||jb).words=[0];(this||jb).length=1;for(var B=0,A=1;67108863>=A;A*=t)B++;B--;A=A/t|0;var H=m.length-u,F=H%B;H=Math.min(H,H-F)+u;for(var L=u;L<H;L+=B)u=d(m,L,L+B,t),this.imuln(A),67108864>(this||jb).words[0]+u?(this||jb).words[0]+=u:this._iaddn(u);if(0!==F){B=1;u=d(m,L,m.length,t);for(L=0;L<F;L++)B*=t;this.imuln(B);67108864>(this||jb).words[0]+u?(this||jb).words[0]+=u:this._iaddn(u)}this.strip()};l.prototype.copy=function(m){m.words=Array((this||jb).length);for(var t=0;t<(this||
jb).length;t++)m.words[t]=(this||jb).words[t];m.length=(this||jb).length;m.negative=(this||jb).negative;m.red=(this||jb).red};l.prototype.clone=function(){var m=new l(null);this.copy(m);return m};l.prototype._expand=function(m){for(;(this||jb).length<m;)(this||jb).words[(this||jb).length++]=0;return this||jb};l.prototype.strip=function(){for(;1<(this||jb).length&&0===(this||jb).words[(this||jb).length-1];)(this||jb).length--;return this._normSign()};l.prototype._normSign=function(){1===(this||jb).length&&
0===(this||jb).words[0]&&((this||jb).negative=0);return this||jb};l.prototype.inspect=function(){return((this||jb).red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var I=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
K=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],P=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];l.prototype.toString=function(m,t){m=m||10;t=t|0||1;if(16===m||"hex"===m){var u="";for(var B=m=0,A=0;A<(this||jb).length;A++){var H=
(this||jb).words[A],F=((H<<m|B)&16777215).toString(16);B=H>>>24-m&16777215;u=0!==B||A!==(this||jb).length-1?I[6-F.length]+F+u:F+u;m+=2;26<=m&&(m-=26,A--)}for(0!==B&&(u=B.toString(16)+u);0!==u.length%t;)u="0"+u;0!==(this||jb).negative&&(u="-"+u);return u}if(m===(m|0)&&2<=m&&36>=m){B=K[m];A=P[m];u="";H=this.clone();for(H.negative=0;!H.isZero();)F=H.modn(A).toString(m),H=H.idivn(A),u=H.isZero()?F+u:I[B-F.length]+F+u;for(this.isZero()&&(u="0"+u);0!==u.length%t;)u="0"+u;0!==(this||jb).negative&&(u="-"+
u);return u}k(!1,"Base should be between 2 and 36")};l.prototype.toNumber=function(){var m=(this||jb).words[0];2===(this||jb).length?m+=67108864*(this||jb).words[1]:3===(this||jb).length&&1===(this||jb).words[2]?m+=4503599627370496+67108864*(this||jb).words[1]:2<(this||jb).length&&k(!1,"Number can only safely store up to 53 bits");return 0!==(this||jb).negative?-m:m};l.prototype.toJSON=function(){return this.toString(16)};l.prototype.toBuffer=function(m,t){k("undefined"!==typeof E);return this.toArrayLike(E,
m,t)};l.prototype.toArray=function(m,t){return this.toArrayLike(Array,m,t)};l.prototype.toArrayLike=function(m,t,u){var B=this.byteLength();u=u||Math.max(1,B);k(B<=u,"byte array longer than desired length");k(0<u,"Requested array length <= 0");this.strip();var A="le"===t;m=new m(u);t=this.clone();if(A){for(A=0;!t.isZero();A++)B=t.andln(255),t.iushrn(8),m[A]=B;for(;A<u;A++)m[A]=0}else{for(A=0;A<u-B;A++)m[A]=0;for(A=0;!t.isZero();A++)B=t.andln(255),t.iushrn(8),m[u-A-1]=B}return m};l.prototype._countBits=
Math.clz32?function(m){return 32-Math.clz32(m)}:function(m){var t=0;4096<=m&&(t+=13,m>>>=13);64<=m&&(t+=7,m>>>=7);8<=m&&(t+=4,m>>>=4);2<=m&&(t+=2,m>>>=2);return t+m};l.prototype._zeroBits=function(m){if(0===m)return 26;var t=0;0===(m&8191)&&(t+=13,m>>>=13);0===(m&127)&&(t+=7,m>>>=7);0===(m&15)&&(t+=4,m>>>=4);0===(m&3)&&(t+=2,m>>>=2);0===(m&1)&&t++;return t};l.prototype.bitLength=function(){var m=this._countBits((this||jb).words[(this||jb).length-1]);return 26*((this||jb).length-1)+m};l.prototype.zeroBits=
function(){if(this.isZero())return 0;for(var m=0,t=0;t<(this||jb).length;t++){var u=this._zeroBits((this||jb).words[t]);m+=u;if(26!==u)break}return m};l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};l.prototype.toTwos=function(m){return 0!==(this||jb).negative?this.abs().inotn(m).iaddn(1):this.clone()};l.prototype.fromTwos=function(m){return this.testn(m-1)?this.notn(m).iaddn(1).ineg():this.clone()};l.prototype.isNeg=function(){return 0!==(this||jb).negative};l.prototype.neg=
function(){return this.clone().ineg()};l.prototype.ineg=function(){this.isZero()||((this||jb).negative^=1);return this||jb};l.prototype.iuor=function(m){for(;(this||jb).length<m.length;)(this||jb).words[(this||jb).length++]=0;for(var t=0;t<m.length;t++)(this||jb).words[t]|=m.words[t];return this.strip()};l.prototype.ior=function(m){k(0===((this||jb).negative|m.negative));return this.iuor(m)};l.prototype.or=function(m){return(this||jb).length>m.length?this.clone().ior(m):m.clone().ior(this||jb)};l.prototype.uor=
function(m){return(this||jb).length>m.length?this.clone().iuor(m):m.clone().iuor(this||jb)};l.prototype.iuand=function(m){var t=(this||jb).length>m.length?m:this||jb;for(var u=0;u<t.length;u++)(this||jb).words[u]&=m.words[u];(this||jb).length=t.length;return this.strip()};l.prototype.iand=function(m){k(0===((this||jb).negative|m.negative));return this.iuand(m)};l.prototype.and=function(m){return(this||jb).length>m.length?this.clone().iand(m):m.clone().iand(this||jb)};l.prototype.uand=function(m){return(this||
jb).length>m.length?this.clone().iuand(m):m.clone().iuand(this||jb)};l.prototype.iuxor=function(m){if((this||jb).length>m.length)var t=this||jb;else t=m,m=this||jb;for(var u=0;u<m.length;u++)(this||jb).words[u]=t.words[u]^m.words[u];if((this||jb)!==t)for(;u<t.length;u++)(this||jb).words[u]=t.words[u];(this||jb).length=t.length;return this.strip()};l.prototype.ixor=function(m){k(0===((this||jb).negative|m.negative));return this.iuxor(m)};l.prototype.xor=function(m){return(this||jb).length>m.length?
this.clone().ixor(m):m.clone().ixor(this||jb)};l.prototype.uxor=function(m){return(this||jb).length>m.length?this.clone().iuxor(m):m.clone().iuxor(this||jb)};l.prototype.inotn=function(m){k("number"===typeof m&&0<=m);var t=Math.ceil(m/26)|0;m%=26;this._expand(t);0<m&&t--;for(var u=0;u<t;u++)(this||jb).words[u]=~(this||jb).words[u]&67108863;0<m&&((this||jb).words[u]=~(this||jb).words[u]&67108863>>26-m);return this.strip()};l.prototype.notn=function(m){return this.clone().inotn(m)};l.prototype.setn=
function(m,t){k("number"===typeof m&&0<=m);var u=m/26|0;m%=26;this._expand(u+1);(this||jb).words[u]=t?(this||jb).words[u]|1<<m:(this||jb).words[u]&~(1<<m);return this.strip()};l.prototype.iadd=function(m){if(0!==(this||jb).negative&&0===m.negative)return(this||jb).negative=0,this.isub(m),(this||jb).negative^=1,this._normSign();if(0===(this||jb).negative&&0!==m.negative){m.negative=0;var t=this.isub(m);m.negative=1;return t._normSign()}if((this||jb).length>m.length)var u=this||jb;else u=m,m=this||
jb;for(var B=t=0;B<m.length;B++)t=(u.words[B]|0)+(m.words[B]|0)+t,(this||jb).words[B]=t&67108863,t>>>=26;for(;0!==t&&B<u.length;B++)t=(u.words[B]|0)+t,(this||jb).words[B]=t&67108863,t>>>=26;(this||jb).length=u.length;if(0!==t)(this||jb).words[(this||jb).length]=t,(this||jb).length++;else if(u!==(this||jb))for(;B<u.length;B++)(this||jb).words[B]=u.words[B];return this||jb};l.prototype.add=function(m){if(0!==m.negative&&0===(this||jb).negative){m.negative=0;var t=this.sub(m);m.negative^=1;return t}return 0===
m.negative&&0!==(this||jb).negative?((this||jb).negative=0,t=m.sub(this||jb),(this||jb).negative=1,t):(this||jb).length>m.length?this.clone().iadd(m):m.clone().iadd(this||jb)};l.prototype.isub=function(m){if(0!==m.negative){m.negative=0;var t=this.iadd(m);m.negative=1;return t._normSign()}if(0!==(this||jb).negative)return(this||jb).negative=0,this.iadd(m),(this||jb).negative=1,this._normSign();t=this.cmp(m);if(0===t)return(this||jb).negative=0,(this||jb).length=1,(this||jb).words[0]=0,this||jb;if(0<
t)var u=this||jb;else u=m,m=this||jb;for(var B=0,A=0;A<m.length;A++)t=(u.words[A]|0)-(m.words[A]|0)+B,B=t>>26,(this||jb).words[A]=t&67108863;for(;0!==B&&A<u.length;A++)t=(u.words[A]|0)+B,B=t>>26,(this||jb).words[A]=t&67108863;if(0===B&&A<u.length&&u!==(this||jb))for(;A<u.length;A++)(this||jb).words[A]=u.words[A];(this||jb).length=Math.max((this||jb).length,A);u!==(this||jb)&&((this||jb).negative=1);return this.strip()};l.prototype.sub=function(m){return this.clone().isub(m)};var N=function(m,t,u){var B=
m.words,A=t.words,H=u.words,F=0,L=B[0]|0,U=L&8191,T=L>>>13,Y=B[1]|0;L=Y&8191;var wa=Y>>>13,Ga=B[2]|0;Y=Ga&8191;var na=Ga>>>13,ea=B[3]|0;Ga=ea&8191;var da=ea>>>13,ia=B[4]|0;ea=ia&8191;var Oa=ia>>>13,Va=B[5]|0;ia=Va&8191;var eb=Va>>>13,Sa=B[6]|0;Va=Sa&8191;var Bb=Sa>>>13,Z=B[7]|0;Sa=Z&8191;var sa=Z>>>13,Da=B[8]|0;Z=Da&8191;Da>>>=13;var X=B[9]|0;B=X&8191;X>>>=13;var ma=A[0]|0,ta=ma&8191,Pa=ma>>>13,Za=A[1]|0;ma=Za&8191;var Zb=Za>>>13,Pb=A[2]|0;Za=Pb&8191;var Db=Pb>>>13,sc=A[3]|0;Pb=sc&8191;var wc=sc>>>
13,Lc=A[4]|0;sc=Lc&8191;var Xc=Lc>>>13,Qc=A[5]|0;Lc=Qc&8191;var hd=Qc>>>13,Wc=A[6]|0;Qc=Wc&8191;var ld=Wc>>>13,Yc=A[7]|0;Wc=Yc&8191;var od=Yc>>>13,Vc=A[8]|0;Yc=Vc&8191;Vc>>>=13;var cd=A[9]|0;A=cd&8191;cd>>>=13;u.negative=m.negative^t.negative;u.length=19;var W=Math.imul(U,ta);m=Math.imul(U,Pa);m=m+Math.imul(T,ta)|0;t=Math.imul(T,Pa);var af=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(af>>>26)|0;af&=67108863;W=Math.imul(L,ta);m=Math.imul(L,Pa);m=m+Math.imul(wa,ta)|0;t=Math.imul(wa,Pa);W=W+Math.imul(U,
ma)|0;m=m+Math.imul(U,Zb)|0;m=m+Math.imul(T,ma)|0;t=t+Math.imul(T,Zb)|0;var zc=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(zc>>>26)|0;zc&=67108863;W=Math.imul(Y,ta);m=Math.imul(Y,Pa);m=m+Math.imul(na,ta)|0;t=Math.imul(na,Pa);W=W+Math.imul(L,ma)|0;m=m+Math.imul(L,Zb)|0;m=m+Math.imul(wa,ma)|0;t=t+Math.imul(wa,Zb)|0;W=W+Math.imul(U,Za)|0;m=m+Math.imul(U,Db)|0;m=m+Math.imul(T,Za)|0;t=t+Math.imul(T,Db)|0;var pi=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(pi>>>26)|0;pi&=67108863;W=Math.imul(Ga,ta);m=Math.imul(Ga,
Pa);m=m+Math.imul(da,ta)|0;t=Math.imul(da,Pa);W=W+Math.imul(Y,ma)|0;m=m+Math.imul(Y,Zb)|0;m=m+Math.imul(na,ma)|0;t=t+Math.imul(na,Zb)|0;W=W+Math.imul(L,Za)|0;m=m+Math.imul(L,Db)|0;m=m+Math.imul(wa,Za)|0;t=t+Math.imul(wa,Db)|0;W=W+Math.imul(U,Pb)|0;m=m+Math.imul(U,wc)|0;m=m+Math.imul(T,Pb)|0;t=t+Math.imul(T,wc)|0;var ad=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ad>>>26)|0;ad&=67108863;W=Math.imul(ea,ta);m=Math.imul(ea,Pa);m=m+Math.imul(Oa,ta)|0;t=Math.imul(Oa,Pa);W=W+Math.imul(Ga,ma)|0;m=m+Math.imul(Ga,
Zb)|0;m=m+Math.imul(da,ma)|0;t=t+Math.imul(da,Zb)|0;W=W+Math.imul(Y,Za)|0;m=m+Math.imul(Y,Db)|0;m=m+Math.imul(na,Za)|0;t=t+Math.imul(na,Db)|0;W=W+Math.imul(L,Pb)|0;m=m+Math.imul(L,wc)|0;m=m+Math.imul(wa,Pb)|0;t=t+Math.imul(wa,wc)|0;W=W+Math.imul(U,sc)|0;m=m+Math.imul(U,Xc)|0;m=m+Math.imul(T,sc)|0;t=t+Math.imul(T,Xc)|0;var bd=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(bd>>>26)|0;bd&=67108863;W=Math.imul(ia,ta);m=Math.imul(ia,Pa);m=m+Math.imul(eb,ta)|0;t=Math.imul(eb,Pa);W=W+Math.imul(ea,ma)|0;m=m+
Math.imul(ea,Zb)|0;m=m+Math.imul(Oa,ma)|0;t=t+Math.imul(Oa,Zb)|0;W=W+Math.imul(Ga,Za)|0;m=m+Math.imul(Ga,Db)|0;m=m+Math.imul(da,Za)|0;t=t+Math.imul(da,Db)|0;W=W+Math.imul(Y,Pb)|0;m=m+Math.imul(Y,wc)|0;m=m+Math.imul(na,Pb)|0;t=t+Math.imul(na,wc)|0;W=W+Math.imul(L,sc)|0;m=m+Math.imul(L,Xc)|0;m=m+Math.imul(wa,sc)|0;t=t+Math.imul(wa,Xc)|0;W=W+Math.imul(U,Lc)|0;m=m+Math.imul(U,hd)|0;m=m+Math.imul(T,Lc)|0;t=t+Math.imul(T,hd)|0;var qi=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(qi>>>26)|0;qi&=67108863;W=
Math.imul(Va,ta);m=Math.imul(Va,Pa);m=m+Math.imul(Bb,ta)|0;t=Math.imul(Bb,Pa);W=W+Math.imul(ia,ma)|0;m=m+Math.imul(ia,Zb)|0;m=m+Math.imul(eb,ma)|0;t=t+Math.imul(eb,Zb)|0;W=W+Math.imul(ea,Za)|0;m=m+Math.imul(ea,Db)|0;m=m+Math.imul(Oa,Za)|0;t=t+Math.imul(Oa,Db)|0;W=W+Math.imul(Ga,Pb)|0;m=m+Math.imul(Ga,wc)|0;m=m+Math.imul(da,Pb)|0;t=t+Math.imul(da,wc)|0;W=W+Math.imul(Y,sc)|0;m=m+Math.imul(Y,Xc)|0;m=m+Math.imul(na,sc)|0;t=t+Math.imul(na,Xc)|0;W=W+Math.imul(L,Lc)|0;m=m+Math.imul(L,hd)|0;m=m+Math.imul(wa,
Lc)|0;t=t+Math.imul(wa,hd)|0;W=W+Math.imul(U,Qc)|0;m=m+Math.imul(U,ld)|0;m=m+Math.imul(T,Qc)|0;t=t+Math.imul(T,ld)|0;var ei=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ei>>>26)|0;ei&=67108863;W=Math.imul(Sa,ta);m=Math.imul(Sa,Pa);m=m+Math.imul(sa,ta)|0;t=Math.imul(sa,Pa);W=W+Math.imul(Va,ma)|0;m=m+Math.imul(Va,Zb)|0;m=m+Math.imul(Bb,ma)|0;t=t+Math.imul(Bb,Zb)|0;W=W+Math.imul(ia,Za)|0;m=m+Math.imul(ia,Db)|0;m=m+Math.imul(eb,Za)|0;t=t+Math.imul(eb,Db)|0;W=W+Math.imul(ea,Pb)|0;m=m+Math.imul(ea,wc)|0;
m=m+Math.imul(Oa,Pb)|0;t=t+Math.imul(Oa,wc)|0;W=W+Math.imul(Ga,sc)|0;m=m+Math.imul(Ga,Xc)|0;m=m+Math.imul(da,sc)|0;t=t+Math.imul(da,Xc)|0;W=W+Math.imul(Y,Lc)|0;m=m+Math.imul(Y,hd)|0;m=m+Math.imul(na,Lc)|0;t=t+Math.imul(na,hd)|0;W=W+Math.imul(L,Qc)|0;m=m+Math.imul(L,ld)|0;m=m+Math.imul(wa,Qc)|0;t=t+Math.imul(wa,ld)|0;W=W+Math.imul(U,Wc)|0;m=m+Math.imul(U,od)|0;m=m+Math.imul(T,Wc)|0;t=t+Math.imul(T,od)|0;var Zh=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Zh>>>26)|0;Zh&=67108863;W=Math.imul(Z,ta);m=Math.imul(Z,
Pa);m=m+Math.imul(Da,ta)|0;t=Math.imul(Da,Pa);W=W+Math.imul(Sa,ma)|0;m=m+Math.imul(Sa,Zb)|0;m=m+Math.imul(sa,ma)|0;t=t+Math.imul(sa,Zb)|0;W=W+Math.imul(Va,Za)|0;m=m+Math.imul(Va,Db)|0;m=m+Math.imul(Bb,Za)|0;t=t+Math.imul(Bb,Db)|0;W=W+Math.imul(ia,Pb)|0;m=m+Math.imul(ia,wc)|0;m=m+Math.imul(eb,Pb)|0;t=t+Math.imul(eb,wc)|0;W=W+Math.imul(ea,sc)|0;m=m+Math.imul(ea,Xc)|0;m=m+Math.imul(Oa,sc)|0;t=t+Math.imul(Oa,Xc)|0;W=W+Math.imul(Ga,Lc)|0;m=m+Math.imul(Ga,hd)|0;m=m+Math.imul(da,Lc)|0;t=t+Math.imul(da,hd)|
0;W=W+Math.imul(Y,Qc)|0;m=m+Math.imul(Y,ld)|0;m=m+Math.imul(na,Qc)|0;t=t+Math.imul(na,ld)|0;W=W+Math.imul(L,Wc)|0;m=m+Math.imul(L,od)|0;m=m+Math.imul(wa,Wc)|0;t=t+Math.imul(wa,od)|0;W=W+Math.imul(U,Yc)|0;m=m+Math.imul(U,Vc)|0;m=m+Math.imul(T,Yc)|0;t=t+Math.imul(T,Vc)|0;var xi=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(xi>>>26)|0;xi&=67108863;W=Math.imul(B,ta);m=Math.imul(B,Pa);m=m+Math.imul(X,ta)|0;t=Math.imul(X,Pa);W=W+Math.imul(Z,ma)|0;m=m+Math.imul(Z,Zb)|0;m=m+Math.imul(Da,ma)|0;t=t+Math.imul(Da,
Zb)|0;W=W+Math.imul(Sa,Za)|0;m=m+Math.imul(Sa,Db)|0;m=m+Math.imul(sa,Za)|0;t=t+Math.imul(sa,Db)|0;W=W+Math.imul(Va,Pb)|0;m=m+Math.imul(Va,wc)|0;m=m+Math.imul(Bb,Pb)|0;t=t+Math.imul(Bb,wc)|0;W=W+Math.imul(ia,sc)|0;m=m+Math.imul(ia,Xc)|0;m=m+Math.imul(eb,sc)|0;t=t+Math.imul(eb,Xc)|0;W=W+Math.imul(ea,Lc)|0;m=m+Math.imul(ea,hd)|0;m=m+Math.imul(Oa,Lc)|0;t=t+Math.imul(Oa,hd)|0;W=W+Math.imul(Ga,Qc)|0;m=m+Math.imul(Ga,ld)|0;m=m+Math.imul(da,Qc)|0;t=t+Math.imul(da,ld)|0;W=W+Math.imul(Y,Wc)|0;m=m+Math.imul(Y,
od)|0;m=m+Math.imul(na,Wc)|0;t=t+Math.imul(na,od)|0;W=W+Math.imul(L,Yc)|0;m=m+Math.imul(L,Vc)|0;m=m+Math.imul(wa,Yc)|0;t=t+Math.imul(wa,Vc)|0;W=W+Math.imul(U,A)|0;m=m+Math.imul(U,cd)|0;m=m+Math.imul(T,A)|0;t=t+Math.imul(T,cd)|0;U=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(U>>>26)|0;U&=67108863;W=Math.imul(B,ma);m=Math.imul(B,Zb);m=m+Math.imul(X,ma)|0;t=Math.imul(X,Zb);W=W+Math.imul(Z,Za)|0;m=m+Math.imul(Z,Db)|0;m=m+Math.imul(Da,Za)|0;t=t+Math.imul(Da,Db)|0;W=W+Math.imul(Sa,Pb)|0;m=m+Math.imul(Sa,
wc)|0;m=m+Math.imul(sa,Pb)|0;t=t+Math.imul(sa,wc)|0;W=W+Math.imul(Va,sc)|0;m=m+Math.imul(Va,Xc)|0;m=m+Math.imul(Bb,sc)|0;t=t+Math.imul(Bb,Xc)|0;W=W+Math.imul(ia,Lc)|0;m=m+Math.imul(ia,hd)|0;m=m+Math.imul(eb,Lc)|0;t=t+Math.imul(eb,hd)|0;W=W+Math.imul(ea,Qc)|0;m=m+Math.imul(ea,ld)|0;m=m+Math.imul(Oa,Qc)|0;t=t+Math.imul(Oa,ld)|0;W=W+Math.imul(Ga,Wc)|0;m=m+Math.imul(Ga,od)|0;m=m+Math.imul(da,Wc)|0;t=t+Math.imul(da,od)|0;W=W+Math.imul(Y,Yc)|0;m=m+Math.imul(Y,Vc)|0;m=m+Math.imul(na,Yc)|0;t=t+Math.imul(na,
Vc)|0;W=W+Math.imul(L,A)|0;m=m+Math.imul(L,cd)|0;m=m+Math.imul(wa,A)|0;t=t+Math.imul(wa,cd)|0;L=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(L>>>26)|0;L&=67108863;W=Math.imul(B,Za);m=Math.imul(B,Db);m=m+Math.imul(X,Za)|0;t=Math.imul(X,Db);W=W+Math.imul(Z,Pb)|0;m=m+Math.imul(Z,wc)|0;m=m+Math.imul(Da,Pb)|0;t=t+Math.imul(Da,wc)|0;W=W+Math.imul(Sa,sc)|0;m=m+Math.imul(Sa,Xc)|0;m=m+Math.imul(sa,sc)|0;t=t+Math.imul(sa,Xc)|0;W=W+Math.imul(Va,Lc)|0;m=m+Math.imul(Va,hd)|0;m=m+Math.imul(Bb,Lc)|0;t=t+Math.imul(Bb,
hd)|0;W=W+Math.imul(ia,Qc)|0;m=m+Math.imul(ia,ld)|0;m=m+Math.imul(eb,Qc)|0;t=t+Math.imul(eb,ld)|0;W=W+Math.imul(ea,Wc)|0;m=m+Math.imul(ea,od)|0;m=m+Math.imul(Oa,Wc)|0;t=t+Math.imul(Oa,od)|0;W=W+Math.imul(Ga,Yc)|0;m=m+Math.imul(Ga,Vc)|0;m=m+Math.imul(da,Yc)|0;t=t+Math.imul(da,Vc)|0;W=W+Math.imul(Y,A)|0;m=m+Math.imul(Y,cd)|0;m=m+Math.imul(na,A)|0;t=t+Math.imul(na,cd)|0;Y=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Y>>>26)|0;Y&=67108863;W=Math.imul(B,Pb);m=Math.imul(B,wc);m=m+Math.imul(X,Pb)|0;t=Math.imul(X,
wc);W=W+Math.imul(Z,sc)|0;m=m+Math.imul(Z,Xc)|0;m=m+Math.imul(Da,sc)|0;t=t+Math.imul(Da,Xc)|0;W=W+Math.imul(Sa,Lc)|0;m=m+Math.imul(Sa,hd)|0;m=m+Math.imul(sa,Lc)|0;t=t+Math.imul(sa,hd)|0;W=W+Math.imul(Va,Qc)|0;m=m+Math.imul(Va,ld)|0;m=m+Math.imul(Bb,Qc)|0;t=t+Math.imul(Bb,ld)|0;W=W+Math.imul(ia,Wc)|0;m=m+Math.imul(ia,od)|0;m=m+Math.imul(eb,Wc)|0;t=t+Math.imul(eb,od)|0;W=W+Math.imul(ea,Yc)|0;m=m+Math.imul(ea,Vc)|0;m=m+Math.imul(Oa,Yc)|0;t=t+Math.imul(Oa,Vc)|0;W=W+Math.imul(Ga,A)|0;m=m+Math.imul(Ga,
cd)|0;m=m+Math.imul(da,A)|0;t=t+Math.imul(da,cd)|0;Ga=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Ga>>>26)|0;Ga&=67108863;W=Math.imul(B,sc);m=Math.imul(B,Xc);m=m+Math.imul(X,sc)|0;t=Math.imul(X,Xc);W=W+Math.imul(Z,Lc)|0;m=m+Math.imul(Z,hd)|0;m=m+Math.imul(Da,Lc)|0;t=t+Math.imul(Da,hd)|0;W=W+Math.imul(Sa,Qc)|0;m=m+Math.imul(Sa,ld)|0;m=m+Math.imul(sa,Qc)|0;t=t+Math.imul(sa,ld)|0;W=W+Math.imul(Va,Wc)|0;m=m+Math.imul(Va,od)|0;m=m+Math.imul(Bb,Wc)|0;t=t+Math.imul(Bb,od)|0;W=W+Math.imul(ia,Yc)|0;m=m+Math.imul(ia,
Vc)|0;m=m+Math.imul(eb,Yc)|0;t=t+Math.imul(eb,Vc)|0;W=W+Math.imul(ea,A)|0;m=m+Math.imul(ea,cd)|0;m=m+Math.imul(Oa,A)|0;t=t+Math.imul(Oa,cd)|0;ea=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ea>>>26)|0;ea&=67108863;W=Math.imul(B,Lc);m=Math.imul(B,hd);m=m+Math.imul(X,Lc)|0;t=Math.imul(X,hd);W=W+Math.imul(Z,Qc)|0;m=m+Math.imul(Z,ld)|0;m=m+Math.imul(Da,Qc)|0;t=t+Math.imul(Da,ld)|0;W=W+Math.imul(Sa,Wc)|0;m=m+Math.imul(Sa,od)|0;m=m+Math.imul(sa,Wc)|0;t=t+Math.imul(sa,od)|0;W=W+Math.imul(Va,Yc)|0;m=m+Math.imul(Va,
Vc)|0;m=m+Math.imul(Bb,Yc)|0;t=t+Math.imul(Bb,Vc)|0;W=W+Math.imul(ia,A)|0;m=m+Math.imul(ia,cd)|0;m=m+Math.imul(eb,A)|0;t=t+Math.imul(eb,cd)|0;ia=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ia>>>26)|0;ia&=67108863;W=Math.imul(B,Qc);m=Math.imul(B,ld);m=m+Math.imul(X,Qc)|0;t=Math.imul(X,ld);W=W+Math.imul(Z,Wc)|0;m=m+Math.imul(Z,od)|0;m=m+Math.imul(Da,Wc)|0;t=t+Math.imul(Da,od)|0;W=W+Math.imul(Sa,Yc)|0;m=m+Math.imul(Sa,Vc)|0;m=m+Math.imul(sa,Yc)|0;t=t+Math.imul(sa,Vc)|0;W=W+Math.imul(Va,A)|0;m=m+Math.imul(Va,
cd)|0;m=m+Math.imul(Bb,A)|0;t=t+Math.imul(Bb,cd)|0;Va=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Va>>>26)|0;Va&=67108863;W=Math.imul(B,Wc);m=Math.imul(B,od);m=m+Math.imul(X,Wc)|0;t=Math.imul(X,od);W=W+Math.imul(Z,Yc)|0;m=m+Math.imul(Z,Vc)|0;m=m+Math.imul(Da,Yc)|0;t=t+Math.imul(Da,Vc)|0;W=W+Math.imul(Sa,A)|0;m=m+Math.imul(Sa,cd)|0;m=m+Math.imul(sa,A)|0;t=t+Math.imul(sa,cd)|0;Sa=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Sa>>>26)|0;Sa&=67108863;W=Math.imul(B,Yc);m=Math.imul(B,Vc);m=m+Math.imul(X,Yc)|
0;t=Math.imul(X,Vc);W=W+Math.imul(Z,A)|0;m=m+Math.imul(Z,cd)|0;m=m+Math.imul(Da,A)|0;t=t+Math.imul(Da,cd)|0;Z=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Z>>>26)|0;Z&=67108863;W=Math.imul(B,A);m=Math.imul(B,cd);m=m+Math.imul(X,A)|0;t=Math.imul(X,cd);T=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(T>>>26)|0;H[0]=af;H[1]=zc;H[2]=pi;H[3]=ad;H[4]=bd;H[5]=qi;H[6]=ei;H[7]=Zh;H[8]=xi;H[9]=U;H[10]=L;H[11]=Y;H[12]=Ga;H[13]=ea;H[14]=ia;H[15]=Va;H[16]=Sa;H[17]=Z;H[18]=T&67108863;0!==F&&(H[19]=F,u.length++);return u};
Math.imul||(N=h);l.prototype.mulTo=function(m,t){var u=(this||jb).length+m.length;if(10===(this||jb).length&&10===m.length)m=N(this||jb,m,t);else if(63>u)m=h(this||jb,m,t);else if(1024>u){u=this||jb;t.negative=m.negative^u.negative;t.length=u.length+m.length;for(var B=0,A=0,H=0;H<t.length-1;H++){var F=A;A=0;B&=67108863;for(var L=Math.min(H,m.length-1),U=Math.max(0,H-u.length+1);U<=L;U++){var T=(u.words[H-U]|0)*(m.words[U]|0),Y=T&67108863;F=F+(T/67108864|0)|0;Y=Y+B|0;B=Y&67108863;F=F+(Y>>>26)|0;A+=
F>>>26;F&=67108863}t.words[H]=B;B=F}0!==B?t.words[H]=B:t.length--;m=t.strip()}else u=this||jb,m=(new a).mulp(u,m,t);return m};a.prototype.makeRBT=function(m){for(var t=Array(m),u=l.prototype._countBits(m)-1,B=0;B<m;B++)t[B]=this.revBin(B,u,m);return t};a.prototype.revBin=function(m,t,u){if(0===m||m===u-1)return m;for(var B=u=0;B<t;B++)u|=(m&1)<<t-B-1,m>>=1;return u};a.prototype.permute=function(m,t,u,B,A,H){for(var F=0;F<H;F++)B[F]=t[m[F]],A[F]=u[m[F]]};a.prototype.transform=function(m,t,u,B,A,H){this.permute(H,
m,t,u,B,A);for(m=1;m<A;m<<=1){t=m<<1;H=Math.cos(2*Math.PI/t);for(var F=Math.sin(2*Math.PI/t),L=0;L<A;L+=t)for(var U=H,T=F,Y=0;Y<m;Y++){var wa=u[L+Y],Ga=B[L+Y],na=u[L+Y+m],ea=B[L+Y+m],da=U*na-T*ea;ea=U*ea+T*na;na=da;u[L+Y]=wa+na;B[L+Y]=Ga+ea;u[L+Y+m]=wa-na;B[L+Y+m]=Ga-ea;Y!==t&&(da=H*U-F*T,T=H*T+F*U,U=da)}}};a.prototype.guessLen13b=function(m,t){m=Math.max(t,m)|1;t=m&1;var u=0;for(m=m/2|0;m;m>>>=1)u++;return 1<<u+1+t};a.prototype.conjugate=function(m,t,u){if(!(1>=u))for(var B=0;B<u/2;B++){var A=m[B];
m[B]=m[u-B-1];m[u-B-1]=A;A=t[B];t[B]=-t[u-B-1];t[u-B-1]=-A}};a.prototype.normalize13b=function(m,t){for(var u=0,B=0;B<t/2;B++)u=8192*Math.round(m[2*B+1]/t)+Math.round(m[2*B]/t)+u,m[B]=u&67108863,u=67108864>u?0:u/67108864|0;return m};a.prototype.convert13b=function(m,t,u,B){for(var A=0,H=0;H<t;H++)A+=m[H]|0,u[2*H]=A&8191,A>>>=13,u[2*H+1]=A&8191,A>>>=13;for(H=2*t;H<B;++H)u[H]=0;k(0===A);k(0===(A&-8192))};a.prototype.stub=function(m){for(var t=Array(m),u=0;u<m;u++)t[u]=0;return t};a.prototype.mulp=function(m,
t,u){var B=2*this.guessLen13b(m.length,t.length),A=this.makeRBT(B),H=this.stub(B),F=Array(B),L=Array(B),U=Array(B),T=Array(B),Y=Array(B),wa=Array(B),Ga=u.words;Ga.length=B;this.convert13b(m.words,m.length,F,B);this.convert13b(t.words,t.length,T,B);this.transform(F,H,L,U,B,A);this.transform(T,H,Y,wa,B,A);for(F=0;F<B;F++)T=L[F]*Y[F]-U[F]*wa[F],U[F]=L[F]*wa[F]+U[F]*Y[F],L[F]=T;this.conjugate(L,U,B);this.transform(L,U,Ga,H,B,A);this.conjugate(Ga,H,B);this.normalize13b(Ga,B);u.negative=m.negative^t.negative;
u.length=m.length+t.length;return u.strip()};l.prototype.mul=function(m){var t=new l(null);t.words=Array((this||jb).length+m.length);return this.mulTo(m,t)};l.prototype.mulf=function(m){var t=new l(null);t.words=Array((this||jb).length+m.length);var u=this||jb;return(new a).mulp(u,m,t)};l.prototype.imul=function(m){return this.clone().mulTo(m,this||jb)};l.prototype.imuln=function(m){k("number"===typeof m);k(67108864>m);for(var t=0,u=0;u<(this||jb).length;u++){var B=((this||jb).words[u]|0)*m,A=(B&
67108863)+(t&67108863);t>>=26;t+=B/67108864|0;t+=A>>>26;(this||jb).words[u]=A&67108863}0!==t&&((this||jb).words[u]=t,(this||jb).length++);return this||jb};l.prototype.muln=function(m){return this.clone().imuln(m)};l.prototype.sqr=function(){return this.mul(this||jb)};l.prototype.isqr=function(){return this.imul(this.clone())};l.prototype.pow=function(m){for(var t=Array(m.bitLength()),u=0;u<t.length;u++){var B=u%26;t[u]=(m.words[u/26|0]&1<<B)>>>B}if(0===t.length)return new l(1);m=this||jb;for(u=0;u<
t.length&&0===t[u];u++,m=m.sqr());if(++u<t.length)for(B=m.sqr();u<t.length;u++,B=B.sqr())0!==t[u]&&(m=m.mul(B));return m};l.prototype.iushln=function(m){k("number"===typeof m&&0<=m);var t=m%26;m=(m-t)/26;var u=67108863>>>26-t<<26-t,B;if(0!==t){var A=0;for(B=0;B<(this||jb).length;B++){var H=(this||jb).words[B]&u;(this||jb).words[B]=((this||jb).words[B]|0)-H<<t|A;A=H>>>26-t}A&&((this||jb).words[B]=A,(this||jb).length++)}if(0!==m){for(B=(this||jb).length-1;0<=B;B--)(this||jb).words[B+m]=(this||jb).words[B];
for(B=0;B<m;B++)(this||jb).words[B]=0;(this||jb).length+=m}return this.strip()};l.prototype.ishln=function(m){k(0===(this||jb).negative);return this.iushln(m)};l.prototype.iushrn=function(m,t,u){k("number"===typeof m&&0<=m);var B=m%26,A=Math.min((m-B)/26,(this||jb).length);m=67108863^67108863>>>B<<B;t=Math.max(0,(t?(t-t%26)/26:0)-A);if(u){for(var H=0;H<A;H++)u.words[H]=(this||jb).words[H];u.length=A}if(0!==A)if((this||jb).length>A)for((this||jb).length-=A,H=0;H<(this||jb).length;H++)(this||jb).words[H]=
(this||jb).words[H+A];else(this||jb).words[0]=0,(this||jb).length=1;A=0;for(H=(this||jb).length-1;0<=H&&(0!==A||H>=t);H--){var F=(this||jb).words[H]|0;(this||jb).words[H]=A<<26-B|F>>>B;A=F&m}u&&0!==A&&(u.words[u.length++]=A);0===(this||jb).length&&((this||jb).words[0]=0,(this||jb).length=1);return this.strip()};l.prototype.ishrn=function(m,t,u){k(0===(this||jb).negative);return this.iushrn(m,t,u)};l.prototype.shln=function(m){return this.clone().ishln(m)};l.prototype.ushln=function(m){return this.clone().iushln(m)};
l.prototype.shrn=function(m){return this.clone().ishrn(m)};l.prototype.ushrn=function(m){return this.clone().iushrn(m)};l.prototype.testn=function(m){k("number"===typeof m&&0<=m);var t=m%26;m=(m-t)/26;return(this||jb).length<=m?!1:!!((this||jb).words[m]&1<<t)};l.prototype.imaskn=function(m){k("number"===typeof m&&0<=m);var t=m%26;m=(m-t)/26;k(0===(this||jb).negative,"imaskn works only with positive numbers");if((this||jb).length<=m)return this||jb;0!==t&&m++;(this||jb).length=Math.min(m,(this||jb).length);
0!==t&&((this||jb).words[(this||jb).length-1]&=67108863^67108863>>>t<<t);return this.strip()};l.prototype.maskn=function(m){return this.clone().imaskn(m)};l.prototype.iaddn=function(m){k("number"===typeof m);k(67108864>m);if(0>m)return this.isubn(-m);if(0!==(this||jb).negative){if(1===(this||jb).length&&((this||jb).words[0]|0)<m)return(this||jb).words[0]=m-((this||jb).words[0]|0),(this||jb).negative=0,this||jb;(this||jb).negative=0;this.isubn(m);(this||jb).negative=1;return this||jb}return this._iaddn(m)};
l.prototype._iaddn=function(m){(this||jb).words[0]+=m;for(m=0;m<(this||jb).length&&67108864<=(this||jb).words[m];m++)(this||jb).words[m]-=67108864,m===(this||jb).length-1?(this||jb).words[m+1]=1:(this||jb).words[m+1]++;(this||jb).length=Math.max((this||jb).length,m+1);return this||jb};l.prototype.isubn=function(m){k("number"===typeof m);k(67108864>m);if(0>m)return this.iaddn(-m);if(0!==(this||jb).negative)return(this||jb).negative=0,this.iaddn(m),(this||jb).negative=1,this||jb;(this||jb).words[0]-=
m;if(1===(this||jb).length&&0>(this||jb).words[0])(this||jb).words[0]=-(this||jb).words[0],(this||jb).negative=1;else for(m=0;m<(this||jb).length&&0>(this||jb).words[m];m++)(this||jb).words[m]+=67108864,--(this||jb).words[m+1];return this.strip()};l.prototype.addn=function(m){return this.clone().iaddn(m)};l.prototype.subn=function(m){return this.clone().isubn(m)};l.prototype.iabs=function(){(this||jb).negative=0;return this||jb};l.prototype.abs=function(){return this.clone().iabs()};l.prototype._ishlnsubmul=
function(m,t,u){var B;this._expand(m.length+u);var A=0;for(B=0;B<m.length;B++){var H=((this||jb).words[B+u]|0)+A;A=(m.words[B]|0)*t;H-=A&67108863;A=(H>>26)-(A/67108864|0);(this||jb).words[B+u]=H&67108863}for(;B<(this||jb).length-u;B++)H=((this||jb).words[B+u]|0)+A,A=H>>26,(this||jb).words[B+u]=H&67108863;if(0===A)return this.strip();k(-1===A);for(B=A=0;B<(this||jb).length;B++)H=-((this||jb).words[B]|0)+A,A=H>>26,(this||jb).words[B]=H&67108863;(this||jb).negative=1;return this.strip()};l.prototype._wordDiv=
function(m,t){var u=this.clone(),B=m,A=B.words[B.length-1]|0;m=26-this._countBits(A);0!==m&&(B=B.ushln(m),u.iushln(m),A=B.words[B.length-1]|0);var H=u.length-B.length;if("mod"!==t){var F=new l(null);F.length=H+1;F.words=Array(F.length);for(var L=0;L<F.length;L++)F.words[L]=0}L=u.clone()._ishlnsubmul(B,1,H);0===L.negative&&(u=L,F&&(F.words[H]=1));for(--H;0<=H;H--){L=67108864*(u.words[B.length+H]|0)+(u.words[B.length+H-1]|0);L=Math.min(L/A|0,67108863);for(u._ishlnsubmul(B,L,H);0!==u.negative;)L--,u.negative=
0,u._ishlnsubmul(B,1,H),u.isZero()||(u.negative^=1);F&&(F.words[H]=L)}F&&F.strip();u.strip();"div"!==t&&0!==m&&u.iushrn(m);return{div:F||null,mod:u}};l.prototype.divmod=function(m,t,u){k(!m.isZero());if(this.isZero())return{div:new l(0),mod:new l(0)};var B;if(0!==(this||jb).negative&&0===m.negative){var A=this.neg().divmod(m,t);"mod"!==t&&(B=A.div.neg());if("div"!==t){var H=A.mod.neg();u&&0!==H.negative&&H.iadd(m)}return{div:B,mod:H}}return 0===(this||jb).negative&&0!==m.negative?(A=this.divmod(m.neg(),
t),"mod"!==t&&(B=A.div.neg()),{div:B,mod:A.mod}):0!==((this||jb).negative&m.negative)?(A=this.neg().divmod(m.neg(),t),"div"!==t&&(H=A.mod.neg(),u&&0!==H.negative&&H.isub(m)),{div:A.div,mod:H}):m.length>(this||jb).length||0>this.cmp(m)?{div:new l(0),mod:this||jb}:1===m.length?"div"===t?{div:this.divn(m.words[0]),mod:null}:"mod"===t?{div:null,mod:new l(this.modn(m.words[0]))}:{div:this.divn(m.words[0]),mod:new l(this.modn(m.words[0]))}:this._wordDiv(m,t)};l.prototype.div=function(m){return this.divmod(m,
"div",!1).div};l.prototype.mod=function(m){return this.divmod(m,"mod",!1).mod};l.prototype.umod=function(m){return this.divmod(m,"mod",!0).mod};l.prototype.divRound=function(m){var t=this.divmod(m);if(t.mod.isZero())return t.div;var u=0!==t.div.negative?t.mod.isub(m):t.mod,B=m.ushrn(1);m=m.andln(1);u=u.cmp(B);return 0>u||1===m&&0===u?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)};l.prototype.modn=function(m){k(67108863>=m);for(var t=67108864%m,u=0,B=(this||jb).length-1;0<=B;B--)u=(t*u+((this||
jb).words[B]|0))%m;return u};l.prototype.idivn=function(m){k(67108863>=m);for(var t=0,u=(this||jb).length-1;0<=u;u--)t=((this||jb).words[u]|0)+67108864*t,(this||jb).words[u]=t/m|0,t%=m;return this.strip()};l.prototype.divn=function(m){return this.clone().idivn(m)};l.prototype.egcd=function(m){k(0===m.negative);k(!m.isZero());var t=this||jb,u=m.clone();t=0!==t.negative?t.umod(m):t.clone();m=new l(1);for(var B=new l(0),A=new l(0),H=new l(1),F=0;t.isEven()&&u.isEven();)t.iushrn(1),u.iushrn(1),++F;for(var L=
u.clone(),U=t.clone();!t.isZero();){for(var T=0,Y=1;0===(t.words[0]&Y)&&26>T;++T,Y<<=1);if(0<T)for(t.iushrn(T);0<T--;){if(m.isOdd()||B.isOdd())m.iadd(L),B.isub(U);m.iushrn(1);B.iushrn(1)}T=0;for(Y=1;0===(u.words[0]&Y)&&26>T;++T,Y<<=1);if(0<T)for(u.iushrn(T);0<T--;){if(A.isOdd()||H.isOdd())A.iadd(L),H.isub(U);A.iushrn(1);H.iushrn(1)}0<=t.cmp(u)?(t.isub(u),m.isub(A),B.isub(H)):(u.isub(t),A.isub(m),H.isub(B))}return{a:A,b:H,gcd:u.iushln(F)}};l.prototype._invmp=function(m){k(0===m.negative);k(!m.isZero());
var t=this||jb,u=m.clone();t=0!==t.negative?t.umod(m):t.clone();for(var B=new l(1),A=new l(0),H=u.clone();0<t.cmpn(1)&&0<u.cmpn(1);){for(var F=0,L=1;0===(t.words[0]&L)&&26>F;++F,L<<=1);if(0<F)for(t.iushrn(F);0<F--;)B.isOdd()&&B.iadd(H),B.iushrn(1);F=0;for(L=1;0===(u.words[0]&L)&&26>F;++F,L<<=1);if(0<F)for(u.iushrn(F);0<F--;)A.isOdd()&&A.iadd(H),A.iushrn(1);0<=t.cmp(u)?(t.isub(u),B.isub(A)):(u.isub(t),A.isub(B))}t=0===t.cmpn(1)?B:A;0>t.cmpn(0)&&t.iadd(m);return t};l.prototype.gcd=function(m){if(this.isZero())return m.abs();
if(m.isZero())return this.abs();var t=this.clone();m=m.clone();t.negative=0;for(var u=m.negative=0;t.isEven()&&m.isEven();u++)t.iushrn(1),m.iushrn(1);do{for(;t.isEven();)t.iushrn(1);for(;m.isEven();)m.iushrn(1);var B=t.cmp(m);if(0>B)B=t,t=m,m=B;else if(0===B||0===m.cmpn(1))break;t.isub(m)}while(1);return m.iushln(u)};l.prototype.invm=function(m){return this.egcd(m).a.umod(m)};l.prototype.isEven=function(){return 0===((this||jb).words[0]&1)};l.prototype.isOdd=function(){return 1===((this||jb).words[0]&
1)};l.prototype.andln=function(m){return(this||jb).words[0]&m};l.prototype.bincn=function(m){k("number"===typeof m);var t=m%26;m=(m-t)/26;t=1<<t;if((this||jb).length<=m)return this._expand(m+1),(this||jb).words[m]|=t,this||jb;for(;0!==t&&m<(this||jb).length;m++){var u=(this||jb).words[m]|0;u+=t;t=u>>>26;u&=67108863;(this||jb).words[m]=u}0!==t&&((this||jb).words[m]=t,(this||jb).length++);return this||jb};l.prototype.isZero=function(){return 1===(this||jb).length&&0===(this||jb).words[0]};l.prototype.cmpn=
function(m){var t=0>m;if(0!==(this||jb).negative&&!t)return-1;if(0===(this||jb).negative&&t)return 1;this.strip();1<(this||jb).length?m=1:(t&&(m=-m),k(67108863>=m,"Number is too big"),t=(this||jb).words[0]|0,m=t===m?0:t<m?-1:1);return 0!==(this||jb).negative?-m|0:m};l.prototype.cmp=function(m){if(0!==(this||jb).negative&&0===m.negative)return-1;if(0===(this||jb).negative&&0!==m.negative)return 1;m=this.ucmp(m);return 0!==(this||jb).negative?-m|0:m};l.prototype.ucmp=function(m){if((this||jb).length>
m.length)return 1;if((this||jb).length<m.length)return-1;for(var t=0,u=(this||jb).length-1;0<=u;u--){var B=(this||jb).words[u]|0,A=m.words[u]|0;if(B!==A){B<A?t=-1:B>A&&(t=1);break}}return t};l.prototype.gtn=function(m){return 1===this.cmpn(m)};l.prototype.gt=function(m){return 1===this.cmp(m)};l.prototype.gten=function(m){return 0<=this.cmpn(m)};l.prototype.gte=function(m){return 0<=this.cmp(m)};l.prototype.ltn=function(m){return-1===this.cmpn(m)};l.prototype.lt=function(m){return-1===this.cmp(m)};
l.prototype.lten=function(m){return 0>=this.cmpn(m)};l.prototype.lte=function(m){return 0>=this.cmp(m)};l.prototype.eqn=function(m){return 0===this.cmpn(m)};l.prototype.eq=function(m){return 0===this.cmp(m)};l.red=function(m){return new y(m)};l.prototype.toRed=function(m){k(!(this||jb).red,"Already a number in reduction context");k(0===(this||jb).negative,"red works only with positives");return m.convertTo(this||jb)._forceRed(m)};l.prototype.fromRed=function(){k((this||jb).red,"fromRed works only with numbers in reduction context");
return(this||jb).red.convertFrom(this||jb)};l.prototype._forceRed=function(m){(this||jb).red=m;return this||jb};l.prototype.forceRed=function(m){k(!(this||jb).red,"Already a number in reduction context");return this._forceRed(m)};l.prototype.redAdd=function(m){k((this||jb).red,"redAdd works only with red numbers");return(this||jb).red.add(this||jb,m)};l.prototype.redIAdd=function(m){k((this||jb).red,"redIAdd works only with red numbers");return(this||jb).red.iadd(this||jb,m)};l.prototype.redSub=function(m){k((this||
jb).red,"redSub works only with red numbers");return(this||jb).red.sub(this||jb,m)};l.prototype.redISub=function(m){k((this||jb).red,"redISub works only with red numbers");return(this||jb).red.isub(this||jb,m)};l.prototype.redShl=function(m){k((this||jb).red,"redShl works only with red numbers");return(this||jb).red.shl(this||jb,m)};l.prototype.redMul=function(m){k((this||jb).red,"redMul works only with red numbers");(this||jb).red._verify2(this||jb,m);return(this||jb).red.mul(this||jb,m)};l.prototype.redIMul=
function(m){k((this||jb).red,"redMul works only with red numbers");(this||jb).red._verify2(this||jb,m);return(this||jb).red.imul(this||jb,m)};l.prototype.redSqr=function(){k((this||jb).red,"redSqr works only with red numbers");(this||jb).red._verify1(this||jb);return(this||jb).red.sqr(this||jb)};l.prototype.redISqr=function(){k((this||jb).red,"redISqr works only with red numbers");(this||jb).red._verify1(this||jb);return(this||jb).red.isqr(this||jb)};l.prototype.redSqrt=function(){k((this||jb).red,
"redSqrt works only with red numbers");(this||jb).red._verify1(this||jb);return(this||jb).red.sqrt(this||jb)};l.prototype.redInvm=function(){k((this||jb).red,"redInvm works only with red numbers");(this||jb).red._verify1(this||jb);return(this||jb).red.invm(this||jb)};l.prototype.redNeg=function(){k((this||jb).red,"redNeg works only with red numbers");(this||jb).red._verify1(this||jb);return(this||jb).red.neg(this||jb)};l.prototype.redPow=function(m){k((this||jb).red&&!m.red,"redPow(normalNum)");(this||
jb).red._verify1(this||jb);return(this||jb).red.pow(this||jb,m)};var aa={k256:null,p224:null,p192:null,p25519:null};e.prototype._tmp=function(){var m=new l(null);m.words=Array(Math.ceil((this||jb).n/13));return m};e.prototype.ireduce=function(m){do{this.split(m,(this||jb).tmp);m=this.imulK(m);m=m.iadd((this||jb).tmp);var t=m.bitLength()}while(t>(this||jb).n);t=t<(this||jb).n?-1:m.ucmp((this||jb).p);0===t?(m.words[0]=0,m.length=1):0<t?m.isub((this||jb).p):void 0!==m.strip?m.strip():m._strip();return m};
e.prototype.split=function(m,t){m.iushrn((this||jb).n,0,t)};e.prototype.imulK=function(m){return m.imul((this||jb).k)};f(n,e);n.prototype.split=function(m,t){for(var u=Math.min(m.length,9),B=0;B<u;B++)t.words[B]=m.words[B];t.length=u;if(9>=m.length)m.words[0]=0,m.length=1;else{u=m.words[9];t.words[t.length++]=u&4194303;for(B=10;B<m.length;B++)t=m.words[B]|0,m.words[B-10]=(t&4194303)<<4|u>>>22,u=t;u>>>=22;m.words[B-10]=u;m.length=0===u&&10<m.length?m.length-10:m.length-9}};n.prototype.imulK=function(m){m.words[m.length]=
0;m.words[m.length+1]=0;m.length+=2;for(var t=0,u=0;u<m.length;u++){var B=m.words[u]|0;t+=977*B;m.words[u]=t&67108863;t=64*B+(t/67108864|0)}0===m.words[m.length-1]&&(m.length--,0===m.words[m.length-1]&&m.length--);return m};f(q,e);f(r,e);f(v,e);v.prototype.imulK=function(m){for(var t=0,u=0;u<m.length;u++){t=19*(m.words[u]|0)+t;var B=t&67108863;t>>>=26;m.words[u]=B}0!==t&&(m.words[m.length++]=t);return m};l._prime=function(m){if(aa[m])return aa[m];if("k256"===m)var t=new n;else if("p224"===m)t=new q;
else if("p192"===m)t=new r;else if("p25519"===m)t=new v;else throw Error("Unknown prime "+m);return aa[m]=t};y.prototype._verify1=function(m){k(0===m.negative,"red works only with positives");k(m.red,"red works only with red numbers")};y.prototype._verify2=function(m,t){k(0===(m.negative|t.negative),"red works only with positives");k(m.red&&m.red===t.red,"red works only with red numbers")};y.prototype.imod=function(m){return(this||jb).prime?(this||jb).prime.ireduce(m)._forceRed(this||jb):m.umod((this||
jb).m)._forceRed(this||jb)};y.prototype.neg=function(m){return m.isZero()?m.clone():(this||jb).m.sub(m)._forceRed(this||jb)};y.prototype.add=function(m,t){this._verify2(m,t);m=m.add(t);0<=m.cmp((this||jb).m)&&m.isub((this||jb).m);return m._forceRed(this||jb)};y.prototype.iadd=function(m,t){this._verify2(m,t);m=m.iadd(t);0<=m.cmp((this||jb).m)&&m.isub((this||jb).m);return m};y.prototype.sub=function(m,t){this._verify2(m,t);m=m.sub(t);0>m.cmpn(0)&&m.iadd((this||jb).m);return m._forceRed(this||jb)};
y.prototype.isub=function(m,t){this._verify2(m,t);m=m.isub(t);0>m.cmpn(0)&&m.iadd((this||jb).m);return m};y.prototype.shl=function(m,t){this._verify1(m);return this.imod(m.ushln(t))};y.prototype.imul=function(m,t){this._verify2(m,t);return this.imod(m.imul(t))};y.prototype.mul=function(m,t){this._verify2(m,t);return this.imod(m.mul(t))};y.prototype.isqr=function(m){return this.imul(m,m.clone())};y.prototype.sqr=function(m){return this.mul(m,m)};y.prototype.sqrt=function(m){if(m.isZero())return m.clone();
var t=(this||jb).m.andln(3);k(1===t%2);if(3===t)return t=(this||jb).m.add(new l(1)).iushrn(2),this.pow(m,t);for(var u=(this||jb).m.subn(1),B=0;!u.isZero()&&0===u.andln(1);)B++,u.iushrn(1);k(!u.isZero());t=(new l(1)).toRed(this||jb);var A=t.redNeg(),H=(this||jb).m.subn(1).iushrn(1),F=(this||jb).m.bitLength();for(F=(new l(2*F*F)).toRed(this||jb);0!==this.pow(F,H).cmp(A);)F.redIAdd(A);H=this.pow(F,u);A=this.pow(m,u.addn(1).iushrn(1));m=this.pow(m,u);for(u=B;0!==m.cmp(t);){F=m;for(B=0;0!==F.cmp(t);B++)F=
F.redSqr();k(B<u);H=this.pow(H,(new l(1)).iushln(u-B-1));A=A.redMul(H);H=H.redSqr();m=m.redMul(H);u=B}return A};y.prototype.invm=function(m){m=m._invmp((this||jb).m);return 0!==m.negative?(m.negative=0,this.imod(m).redNeg()):this.imod(m)};y.prototype.pow=function(m,t){if(t.isZero())return(new l(1)).toRed(this||jb);if(0===t.cmpn(1))return m.clone();var u=Array(16);u[0]=(new l(1)).toRed(this||jb);u[1]=m;for(var B=2;B<u.length;B++)u[B]=this.mul(u[B-1],m);m=u[0];var A=0,H=0,F=t.bitLength()%26;0===F&&
(F=26);for(B=t.length-1;0<=B;B--){var L=t.words[B];for(--F;0<=F;F--){var U=L>>F&1;m!==u[0]&&(m=this.sqr(m));if(0===U&&0===A)H=0;else if(A<<=1,A|=U,H++,4===H||0===B&&0===F)m=this.mul(m,u[A]),A=H=0}F=26}return m};y.prototype.convertTo=function(m){var t=m.umod((this||jb).m);return t===m?t.clone():t};y.prototype.convertFrom=function(m){m=m.clone();m.red=null;return m};l.mont=function(m){return new D(m)};f(D,y);D.prototype.convertTo=function(m){return this.imod(m.ushln((this||jb).shift))};D.prototype.convertFrom=
function(m){m=this.imod(m.mul((this||jb).rinv));m.red=null;return m};D.prototype.imul=function(m,t){if(m.isZero()||t.isZero())return m.words[0]=0,m.length=1,m;m=m.imul(t);t=m.maskn((this||jb).shift).mul((this||jb).minv).imaskn((this||jb).shift).mul((this||jb).m);t=m=m.isub(t).iushrn((this||jb).shift);0<=m.cmp((this||jb).m)?t=m.isub((this||jb).m):0>m.cmpn(0)&&(t=m.iadd((this||jb).m));return t._forceRed(this||jb)};D.prototype.mul=function(m,t){if(m.isZero()||t.isZero())return(new l(0))._forceRed(this||
jb);m=m.mul(t);t=m.maskn((this||jb).shift).mul((this||jb).minv).imaskn((this||jb).shift).mul((this||jb).m);t=m=m.isub(t).iushrn((this||jb).shift);0<=m.cmp((this||jb).m)?t=m.isub((this||jb).m):0>m.cmpn(0)&&(t=m.iadd((this||jb).m));return t._forceRed(this||jb)};D.prototype.invm=function(m){return this.imod(m._invmp((this||jb).m).mul((this||jb).r2))._forceRed(this||jb)}})(kO,K1);return kO.exports}function NF(){}function br(g){L1.call(this);this._block=OF.allocUnsafe(g);this._blockSize=g;this._blockOffset=
0;this._length=[0,0,0,0];this._finalized=!1}function Cx(){M1.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878}function PF(g,c){return g<<c|g>>>32-c}function Ul(g,c,k,f,l,p,b){return PF(g+(c&k|~c&f)+l+p|0,b)+c|0}function Vl(g,c,k,f,l,p,b){return PF(g+(c&f|k&~f)+l+p|0,b)+c|0}function Wl(g,c,k,f,l,p,b){return PF(g+(c^k^f)+l+p|0,b)+c|0}function Xl(g,c,k,f,l,p,b){return PF(g+(k^(c|~f))+l+p|0,b)+c|0}function Dx(){N1.call(this,64);this._a=1732584193;this._b=4023233417;
this._c=2562383102;this._d=271733878;this._e=3285377520}function Qn(g,c){return g<<c|g>>>32-c}function cr(g,c){(this||Cj)._block=O1.alloc(g);(this||Cj)._finalSize=c;(this||Cj)._blockSize=g;(this||Cj)._len=0}function Ex(){this.init();(this||$g)._w=Wha;P1.call(this||$g,64,56)}function CA(){this.init();(this||$i)._w=Xha;Q1.call(this||$i,64,56)}function DA(){this.init();(this||aj)._w=Yha;R1.call(this||aj,64,56)}function QF(){this.init();(this||gl)._w=Zha;$ha.call(this||gl,64,56)}function Fx(){this.init();
(this||Ge)._w=aia;S1.call(this||Ge,128,112)}function hl(g,c){return g>>>0<c>>>0?1:0}function RF(){this.init();(this||Ji)._w=bia;cia.call(this||Ji,128,112)}function il(g){T1.call(this||Wj);(this||Wj).hashMode="string"==typeof g;(this||Wj).hashMode?(this||Wj)[g]=(this||Wj)._finalOrDigest:(this||Wj).final=(this||Wj)._finalOrDigest;(this||Wj)._final&&((this||Wj).__final=(this||Wj)._final,(this||Wj)._final=null);(this||Wj)._decoder=null;(this||Wj)._encoding=null}function SF(g){U1.call(this,"digest");this._hash=
g}function TF(g,c){V1.call(this,"digest");"string"==typeof c&&(c=Iu.from(c));this._alg=g;this._key=c;64<c.length?c=g(c):64>c.length&&(c=Iu.concat([c,dia],64));g=this._ipad=Iu.allocUnsafe(64);for(var k=this._opad=Iu.allocUnsafe(64),f=0;64>f;f++)g[f]=54^c[f],k[f]=92^c[f];this._hash=[g]}function EA(g,c){W1.call(this,"digest");"string"==typeof c&&(c=FA.from(c));var k="sha512"===g||"sha384"===g?128:64;(this._alg=g,this._key=c,c.length>k)?c=("rmd160"===g?new lO:mO(g)).update(c).digest():c.length<k&&(c=
FA.concat([c,eia],k));for(var f=this._ipad=FA.allocUnsafe(k),l=this._opad=FA.allocUnsafe(k),p=0;p<k;p++)f[p]=54^c[p],l[p]=92^c[p];this._hash="rmd160"===g?new lO:mO(g);this._hash.update(f)}function X1(g,c){if("string"!=typeof g&&!fia.isBuffer(g))throw new TypeError(c+" must be a buffer or string");}function Y1(g,c,k){var f=function(h){function a(e){return gia(h).update(e).digest()}return"rmd160"===h||"ripemd160"===h?function(e){return(new hia).update(e).digest()}:"md5"===h?iia:a}(g),l="sha512"===g||
"sha384"===g?128:64;c.length>l?c=f(c):c.length<l&&(c=To.concat([c,jia],l));for(var p=To.allocUnsafe(l+UF[g]),b=To.allocUnsafe(l+UF[g]),d=0;d<l;d++)p[d]=54^c[d],b[d]=92^c[d];c=To.allocUnsafe(l+k+4);p.copy(c,0,0,l);(this||Uo).ipad1=c;(this||Uo).ipad2=p;(this||Uo).opad=b;(this||Uo).alg=g;(this||Uo).blocksize=l;(this||Uo).hash=f;(this||Uo).size=UF[g]}function Z1(g,c,k,f,l){return GA.importKey("raw",g,{name:"PBKDF2"},!1,["deriveBits"]).then(function(p){return GA.deriveBits({name:"PBKDF2",salt:c,iterations:k,
hash:{name:l}},p,f<<3)}).then(function(p){return Gx.from(p)})}function $1(g,c){if(!g)throw Error(c||"Assertion failed");}function fn(g){this.options=g;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=Array(this.blockSize);this.bufferOff=0}function kia(){this.tmp=Array(2);this.keys=null}function Rn(g){a2.call(this,g);var c=new kia;this._desState=c;this.deriveKeys(c,g.key)}function lia(g){mia.equal(g.length,8,"Invalid IV length");this.iv=Array(8);for(var c=0;c<this.iv.length;c++)this.iv[c]=
g[c]}function nia(g,c){oia.equal(c.length,24,"Invalid key length");var k=c.slice(0,8),f=c.slice(8,16);c=c.slice(16,24);this.ciphers="encrypt"===g?[Cs.create({type:"encrypt",key:k}),Cs.create({type:"decrypt",key:f}),Cs.create({type:"encrypt",key:c})]:[Cs.create({type:"decrypt",key:c}),Cs.create({type:"encrypt",key:f}),Cs.create({type:"decrypt",key:k})]}function Sp(g){b2.call(this,g);this._edeState=new nia(this.type,this.options.key)}function VF(g){c2.call(this||WF);var c=g.mode.toLowerCase(),k=HA[c];
var f=g.decrypt?"decrypt":"encrypt";var l=g.key;Ju.isBuffer(l)||(l=Ju.from(l));"des-ede"!==c&&"des-ede-cbc"!==c||(l=Ju.concat([l,l.slice(0,8)]));g=g.iv;Ju.isBuffer(g)||(g=Ju.from(g));(this||WF)._des=k.create({key:l,iv:g,type:f})}function d2(g,c,k){var f=c.length,l=pia(c,g._cache);return g._cache=g._cache.slice(f),g._prev=IA.concat([g._prev,k?c:l]),l}function qia(g){return g._prev=g._cipher.encryptBlock(g._prev),g._prev}function nO(g){XF.isBuffer(g)||(g=XF.from(g));for(var c=g.length/4|0,k=Array(c),
f=0;f<c;f++)k[f]=g.readUInt32BE(4*f);return k}function oO(g){for(;0<g.length;g++)g[0]=0}function e2(g,c,k,f,l){var p=k[0],b=k[1],d=k[2];k=k[3];var h=g[0]^c[0],a=g[1]^c[1],e=g[2]^c[2];g=g[3]^c[3];for(var n=4,q=1;q<l;q++){var r=p[h>>>24]^b[a>>>16&255]^d[e>>>8&255]^k[255&g]^c[n++];var v=p[a>>>24]^b[e>>>16&255]^d[g>>>8&255]^k[255&h]^c[n++];var y=p[e>>>24]^b[g>>>16&255]^d[h>>>8&255]^k[255&a]^c[n++];var D=p[g>>>24]^b[h>>>16&255]^d[a>>>8&255]^k[255&e]^c[n++];h=r;a=v;e=y;g=D}return r=(f[h>>>24]<<24|f[a>>>
16&255]<<16|f[e>>>8&255]<<8|f[255&g])^c[n++],v=(f[a>>>24]<<24|f[e>>>16&255]<<16|f[g>>>8&255]<<8|f[255&h])^c[n++],y=(f[e>>>24]<<24|f[g>>>16&255]<<16|f[h>>>8&255]<<8|f[255&a])^c[n++],D=(f[g>>>24]<<24|f[h>>>16&255]<<16|f[a>>>8&255]<<8|f[255&e])^c[n++],[r>>>0,v>>>0,y>>>0,D>>>0]}function Sn(g){(this||Tn)._key=nO(g);this._reset()}function f2(g){var c=Hx.allocUnsafe(16);return c.writeUInt32BE(g[0]>>>0,0),c.writeUInt32BE(g[1]>>>0,4),c.writeUInt32BE(g[2]>>>0,8),c.writeUInt32BE(g[3]>>>0,12),c}function JA(g){(this||
Hl).h=g;(this||Hl).state=Hx.alloc(16,0);(this||Hl).cache=Hx.allocUnsafe(0)}function Ds(g,c,k,f){g2.call(this||Sg);var l=Jm.alloc(4,0);(this||Sg)._cipher=new ria.AES(c);var p=(this||Sg)._cipher.encryptBlock(l);(this||Sg)._ghash=new h2(p);c=this||Sg;l=k;if(12===l.length)c=(c._finID=Jm.concat([l,Jm.from([0,0,0,1])]),Jm.concat([l,Jm.from([0,0,0,2])]));else{k=new h2(p);p=l.length;var b=p%16;k.update(l);b&&(b=16-b,k.update(Jm.alloc(b,0)));k.update(Jm.alloc(8,0));l=8*p;p=Jm.alloc(8);p.writeUIntBE(l,0,8);
k.update(p);c._finID=k.state;c=Jm.from(c._finID);c=(sia(c),c)}(this||Sg)._prev=Jm.from(c);(this||Sg)._cache=Jm.allocUnsafe(0);(this||Sg)._secCache=Jm.allocUnsafe(0);(this||Sg)._decrypt=f;(this||Sg)._alen=0;(this||Sg)._len=0;(this||Sg)._mode=g;(this||Sg)._authTag=null;(this||Sg)._called=!1}function KA(g,c,k,f){i2.call(this||Vo);(this||Vo)._cipher=new tia.AES(c);(this||Vo)._prev=pO.from(k);(this||Vo)._cache=pO.allocUnsafe(0);(this||Vo)._secCache=pO.allocUnsafe(0);(this||Vo)._decrypt=f;(this||Vo)._mode=
g}function LA(g,c,k){j2.call(this||Ki);(this||Ki)._cache=new YF;(this||Ki)._last=void 0;(this||Ki)._cipher=new uia.AES(c);(this||Ki)._prev=Ix.from(k);(this||Ki)._mode=g;(this||Ki)._autopadding=!0}function YF(){(this||Ki).cache=Ix.allocUnsafe(0)}function k2(g,c,k){g=l2[g.toLowerCase()];if(!g)throw new TypeError("invalid suite type");if("string"==typeof k&&(k=Ix.from(k)),"GCM"!==g.mode&&k.length!==g.iv)throw new TypeError("invalid iv length "+k.length);if("string"==typeof c&&(c=Ix.from(c)),c.length!==
g.key/8)throw new TypeError("invalid key length "+c.length);return"stream"===g.type?new via(g.module,c,k,!0):"auth"===g.type?new wia(g.module,c,k,!0):new LA(g.module,c,k)}function MA(g,c,k){m2.call(this||lj);(this||lj)._cache=new ZF;(this||lj)._cipher=new xia.AES(c);(this||lj)._prev=dr.from(k);(this||lj)._mode=g;(this||lj)._autopadding=!0}function ZF(){(this||lj).cache=dr.allocUnsafe(0)}function n2(g,c,k){g=o2[g.toLowerCase()];if(!g)throw new TypeError("invalid suite type");if("string"==typeof c&&
(c=dr.from(c)),c.length!==g.key/8)throw new TypeError("invalid key length "+c.length);if("string"==typeof k&&(k=dr.from(k)),"GCM"!==g.mode&&k.length!==g.iv)throw new TypeError("invalid iv length "+k.length);return"stream"===g.type?new yia(g.module,c,k):"auth"===g.type?new zia(g.module,c,k):new MA(g.module,c,k)}function qO(g,c,k){if(g=g.toLowerCase(),Es[g])return rO.createCipheriv(g,c,k);if(er[g])return new p2({key:c,iv:k,mode:g});throw new TypeError("invalid suite type");}function sO(g,c,k){if(g=
g.toLowerCase(),Es[g])return rO.createDecipheriv(g,c,k);if(er[g])return new p2({key:c,iv:k,mode:g,decrypt:!0});throw new TypeError("invalid suite type");}function Fs(g){(this||$F).rand=g}function Gs(g){(this||q2).rand=g||new Aia.Rand}function tO(g){if(null!==uO)var c=uO;else{c=[2];for(var k=1,f=3;1048576>f;f+=2){for(var l=Math.ceil(Math.sqrt(f)),p=0;p<k&&c[p]<=l&&0!=f%c[p];p++);k!==p&&c[p]<=l||(c[k++]=f)}c=(uO=c,c)}for(k=0;k<c.length;k++)if(0===g.modn(c[k]))return 0===g.cmpn(c[k]);return!0}function vO(g){var c=
Yl.mont(g);return 0===wO.toRed(c).redPow(g.subn(1)).fromRed().cmpn(1)}function NA(g,c){if(16>g)return new Yl(2===c||5===c?[140,123]:[140,39]);var k,f;for(c=new Yl(c);;){for(k=new Yl(Bia(Math.ceil(g/8)));k.bitLength()>g;)k.ishrn(1);if(k.isEven()&&k.iadd(Cia),k.testn(1)||k.iadd(wO),c.cmp(wO)){if(!c.cmp(Dia))for(;k.mod(Eia).cmp(Fia);)k.iadd(r2)}else for(;k.mod(Gia).cmp(Hia);)k.iadd(r2);if(tO(f=k.shrn(1))&&tO(k)&&vO(f)&&vO(k)&&s2.test(f)&&s2.test(k))return k}}function Iia(g,c){return c=c||"utf8",Tp.isBuffer(g)||
(g=new Tp(g,c)),(this||fi)._pub=new Un(g),this||fi}function Jia(g,c){return c=c||"utf8",Tp.isBuffer(g)||(g=new Tp(g,c)),(this||fi)._priv=new Un(g),this||fi}function Wo(g,c,k){this.setGenerator(c);(this||fi).__prime=new Un(g);(this||fi)._prime=Un.mont((this||fi).__prime);(this||fi)._primeLen=g.length;(this||fi)._pub=void 0;(this||fi)._priv=void 0;(this||fi)._primeCode=void 0;k?((this||fi).setPublicKey=Iia,(this||fi).setPrivateKey=Jia):(this||fi)._primeCode=8}function aG(g,c){g=new Tp(g.toArray());
return c?g.toString(c):g}function bG(g,c){var k=t2(c);var f=k.toRed(Hs.mont(c.modulus)).redPow(new Hs(c.publicExponent)).fromRed();k=k.invm(c.modulus);var l=c.modulus.byteLength();g=(Hs.mont(c.modulus),(new Hs(g)).mul(f).umod(c.modulus));var p=g.toRed(Hs.mont(c.prime1)),b=g.toRed(Hs.mont(c.prime2));f=c.coefficient;var d=c.prime1;g=c.prime2;p=p.redPow(c.exponent1);b=b.redPow(c.exponent2);p=p.fromRed();b=b.fromRed();f=p.isub(b).imul(f).umod(d);return f.imul(g),b.iadd(f),new Kia(b.imul(k).umod(c.modulus).toArray(!1,
l))}function t2(g){for(var c=g.modulus.byteLength(),k=new Hs(u2(c));0<=k.cmp(g.modulus)||!k.umod(g.prime1)||!k.umod(g.prime2);)k=new Hs(u2(c));return k}function v2(g){return 1===g.length?"0"+g:g}function w2(g){for(var c="",k=0;k<g.length;k++)c+=v2(g[k].toString(16));return c}function Ku(g,c){if(g instanceof Ku)return g;this._importDER(g,c)||(Lia(g.r&&g.s,"Signature without r or s"),this.r=new cG(g.r,16),this.s=new cG(g.s,16),void 0===g.recoveryParam?this.recoveryParam=null:this.recoveryParam=g.recoveryParam)}
function Mia(){this.place=0}function xO(g,c){var k=g[c.place++];if(!(128&k))return k;k&=15;for(var f=0,l=0,p=c.place;l<k;l++,p++)f<<=8,f|=g[p];return c.place=p,f}function x2(g){for(var c=0,k=g.length-1;!(g[c]||128&g[c+1])&&c<k;)c++;return 0===c?g:g.slice(c)}function yO(g,c){if(128>c)return g.push(c),void 0;var k=1+(Math.log(c)/Math.LN2>>>3);for(g.push(128|k);--k;)g.push(c>>>(k<<3)&255);g.push(c)}function y2(g){return(g>>>24|g>>>8&65280|g<<8&16711680|(255&g)<<24)>>>0}function z2(g){return 1===g.length?
"0"+g:g}function A2(g){return 7===g.length?"0"+g:6===g.length?"00"+g:5===g.length?"000"+g:4===g.length?"0000"+g:3===g.length?"00000"+g:2===g.length?"000000"+g:1===g.length?"0000000"+g:g}function dG(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}function Vn(){if(!(this instanceof
Vn))return new Vn;B2.call(this);this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];this.k=Nia;this.W=Array(160)}function Xo(){if(!(this instanceof Xo))return new Xo;C2.call(this);this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];this.k=Oia;this.W=Array(64)}function Up(){if(!(this instanceof Up))return new Up;D2.call(this);
this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.W=Array(80)}function fr(){if(!(this instanceof fr))return new fr;E2.call(this);this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}function gr(){if(!(this instanceof gr))return new gr;F2.call(this);this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}function Vp(){if(!(this instanceof
Vp))return new Vp;G2.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.endian="little"}function H2(g,c,k,f){return 15>=g?c^k^f:31>=g?c&k|~c&f:47>=g?(c|~k)^f:63>=g?c&f|k&~f:c^(k|~f)}function Jx(g,c,k){if(!(this instanceof Jx))return new Jx(g,c,k);this.Hash=g;this.blockSize=g.blockSize/8;this.outSize=g.outSize/8;this.outer=this.inner=null;this._init(Pia.toArray(c,k))}function hr(g){if(!(this instanceof hr))return new hr(g);this.hash=g.hash;this.predResist=!!g.predResist;
this.outLen=this.hash.outSize;this.minEntropy=g.minEntropy||this.hash.hmacStrength;this.V=this.K=this.reseedInterval=this._reseed=null;var c=Lu.toArray(g.entropy,g.entropyEnc||"hex"),k=Lu.toArray(g.nonce,g.nonceEnc||"hex");g=Lu.toArray(g.pers,g.persEnc||"hex");I2(c.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._init(c,k,g)}function Yo(g,c){this.type=g;this.p=new Mu(c.p,16);this.red=c.prime?Mu.red(c.prime):Mu.mont(this.p);this.zero=(new Mu(0)).toRed(this.red);
this.one=(new Mu(1)).toRed(this.red);this.two=(new Mu(2)).toRed(this.red);this.n=c.n&&new Mu(c.n,16);this.g=c.g&&this.pointFromJSON(c.g,c.gRed);this._wnafT1=Array(4);this._wnafT2=Array(4);this._wnafT3=Array(4);this._wnafT4=Array(4);this._bitLength=this.n?this.n.bitLength():0;g=this.n&&this.p.div(this.n);!g||0<g.cmpn(100)?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function Wn(g,c){this.curve=g;this.type=c;this.precomputed=null}function Xn(g){Kx.call(this,"short",g);this.a=
(new Xj(g.a,16)).toRed(this.red);this.b=(new Xj(g.b,16)).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=0===this.a.fromRed().cmpn(0);this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3);this.endo=this._getEndomorphism(g);this._endoWnafT1=Array(4);this._endoWnafT2=Array(4)}function jl(g,c,k,f){Kx.BasePoint.call(this,g,"affine");null===c&&null===k?(this.x=null,this.y=null,this.inf=!0):(this.x=new Xj(c,16),this.y=new Xj(k,16),f&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),
this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Il(g,c,k,f){Kx.BasePoint.call(this,g,"jacobian");null===c&&null===k&&null===f?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Xj(0)):(this.x=new Xj(c,16),this.y=new Xj(k,16),this.z=new Xj(f,16));this.x.red||(this.x=this.x.toRed(this.curve.red));this.y.red||(this.y=this.y.toRed(this.curve.red));this.z.red||(this.z=this.z.toRed(this.curve.red));this.zOne=this.z===this.curve.one}
function Lx(g){eG.call(this,"mont",g);this.a=(new Mx(g.a,16)).toRed(this.red);this.b=(new Mx(g.b,16)).toRed(this.red);this.i4=(new Mx(4)).toRed(this.red).redInvm();this.two=(new Mx(2)).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two))}function kl(g,c,k){eG.BasePoint.call(this,g,"projective");null===c&&null===k?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Mx(c,16),this.z=new Mx(k,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}
function Wp(g){this.extended=this.mOneA=(this.twisted=1!=(0|g.a))&&-1==(0|g.a);fG.call(this,"edwards",g);this.a=(new ir(g.a,16)).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=(new ir(g.c,16)).toRed(this.red);this.c2=this.c.redSqr();this.d=(new ir(g.d,16)).toRed(this.red);this.dd=this.d.redAdd(this.d);Qia(!this.twisted||0===this.c.fromRed().cmpn(1));this.oneC=1==(0|g.c)}function vj(g,c,k,f,l){fG.BasePoint.call(this,g,"projective");null===c&&null===k&&null===f?(this.x=this.curve.zero,this.y=
this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new ir(c,16),this.y=new ir(k,16),this.z=f?new ir(f,16):this.curve.one,this.t=l&&new ir(l,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}
function J2(g){"short"===g.type?this.curve=new zO.short(g):"edwards"===g.type?this.curve=new zO.edwards(g):this.curve=new zO.mont(g);this.g=this.curve.g;this.n=this.curve.n;this.hash=g.hash;K2(this.g.validate(),"Invalid curve");K2(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function Is(g,c){Object.defineProperty(AO,g,{configurable:!0,enumerable:!0,get:function(){var k=new J2(c);return Object.defineProperty(AO,g,{configurable:!0,enumerable:!0,value:k}),k}})}function ll(g,c){this.ec=
g;this.pub=this.priv=null;c.priv&&this._importPrivate(c.priv,c.privEnc);c.pub&&this._importPublic(c.pub,c.pubEnc)}function Yn(g){if(!(this instanceof Yn))return new Yn(g);"string"==typeof g&&(L2(BO.hasOwnProperty(g),"Unknown curve "+g),g=BO[g]);g instanceof BO.PresetCurve&&(g={curve:g});this.curve=g.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=g.curve.g;this.g.precompute(g.curve.n.bitLength()+1);this.hash=g.hash||g.curve.hash}function Mk(g,c){this.eddsa=g;this._secret=
M2(c.secret);g.isPoint(c.pub)?this._pub=c.pub:this._pubBytes=M2(c.pub)}function Js(g,c){this.eddsa=g;"object"!=typeof c&&(c=Ria(c));Array.isArray(c)&&(c={R:c.slice(0,g.encodingLength),S:c.slice(g.encodingLength)});Sia(c.R&&c.S,"Signature without R or S");g.isPoint(c.R)&&(this._R=c.R);c.S instanceof Tia&&(this._S=c.S);this._Rencoded=Array.isArray(c.R)?c.R:c.Rencoded;this._Sencoded=Array.isArray(c.S)?c.S:c.Sencoded}function Km(g){if(Uia("ed25519"===g,"only tested with ed25519 so far"),!(this instanceof
Km))return new Km(g);this.curve=g=Via[g].curve;this.g=g.g;this.g.precompute(g.n.bitLength()+1);this.pointClass=g.point().constructor;this.encodingLength=Math.ceil(g.n.bitLength()/8);this.hash=Wia.sha512}function Zn(g){(this||Nk)._reporterState={obj:null,path:[],options:g||{},errors:[]}}function Nx(g,c){(this||Nk).path=g;this.rethrow(c)}function N2(){function g(p,b){if(f.call(this||Dg,b),!l.isBuffer(p))return this.error("Input not Buffer"),void 0;(this||Dg).base=p;(this||Dg).offset=0;(this||Dg).length=
p.length}function c(p,b){if(Array.isArray(p))(this||Dg).length=0,(this||Dg).value=p.map(function(d){return d instanceof c||(d=new c(d,b)),(this||Dg).length+=d.length,d},this||Dg);else if("number"==typeof p){if(!(0<=p&&255>=p))return b.error("non-byte EncoderBuffer value");(this||Dg).value=p;(this||Dg).length=1}else if("string"==typeof p)(this||Dg).value=p,(this||Dg).length=l.byteLength(p);else{if(!l.isBuffer(p))return b.error("Unsupported type: "+typeof p);(this||Dg).value=p;(this||Dg).length=p.length}}
if(O2)return gG;O2=!0;var k=hh,f=OA().Reporter,l=Yg.Buffer;return k(g,f),gG.DecoderBuffer=g,g.prototype.save=function(){return{offset:(this||Dg).offset,reporter:f.prototype.save.call(this||Dg)}},g.prototype.restore=function(p){var b=new g((this||Dg).base);return b.offset=p.offset,b.length=(this||Dg).offset,(this||Dg).offset=p.offset,f.prototype.restore.call(this||Dg,p.reporter),b},g.prototype.isEmpty=function(){return(this||Dg).offset===(this||Dg).length},g.prototype.readUInt8=function(p){return(this||
Dg).offset+1<=(this||Dg).length?(this||Dg).base.readUInt8((this||Dg).offset++,!0):this.error(p||"DecoderBuffer overrun")},g.prototype.skip=function(p,b){if(!((this||Dg).offset+p<=(this||Dg).length))return this.error(b||"DecoderBuffer overrun");b=new g((this||Dg).base);return b._reporterState=(this||Dg)._reporterState,b.offset=(this||Dg).offset,b.length=(this||Dg).offset+p,(this||Dg).offset+=p,b},g.prototype.raw=function(p){return(this||Dg).base.slice(p?p.offset:(this||Dg).offset,(this||Dg).length)},
gG.EncoderBuffer=c,c.prototype.join=function(p,b){return p||(p=new l((this||Dg).length)),b||(b=0),0===(this||Dg).length||(Array.isArray((this||Dg).value)?(this||Dg).value.forEach(function(d){d.join(p,b);b+=d.length}):("number"==typeof(this||Dg).value?p[b]=(this||Dg).value:"string"==typeof(this||Dg).value?p.write((this||Dg).value,b):l.isBuffer((this||Dg).value)&&(this||Dg).value.copy(p,b),b+=(this||Dg).length)),p},gG}function OA(){if(P2)return CO;P2=!0;var g=CO;return g.Reporter=Q2.Reporter,g.DecoderBuffer=
N2().DecoderBuffer,g.EncoderBuffer=N2().EncoderBuffer,g.Node=function(){function c(a,e){var n={};(this||cg)._baseState=n;n.enc=a;n.parent=e||null;n.children=null;n.tag=null;n.args=null;n.reverseArgs=null;n.choice=null;n.optional=!1;n.any=!1;n.obj=!1;n.use=null;n.useDecoder=null;n.key=null;n.default=null;n.explicit=null;n.implicit=null;n.contains=null;n.parent||(n.children=[],this._wrap())}if(R2)return DO;R2=!0;var k=OA().Reporter,f=OA().EncoderBuffer,l=OA().DecoderBuffer,p=$n,b="seq seqof set setof objid bool gentime utctime null_ enum int objDesc bitstr bmpstr charstr genstr graphstr ia5str iso646str numstr octstr printstr t61str unistr utf8str videostr".split(" "),
d="key obj use optional explicit implicit def choice any contains".split(" ").concat(b);DO=c;var h="enc parent children tag args reverseArgs choice optional any obj use alteredUse key default explicit implicit contains".split(" ");return c.prototype.clone=function(){var a=(this||cg)._baseState,e={};h.forEach(function(q){e[q]=a[q]});var n=new (this||cg).constructor(e.parent);return n._baseState=e,n},c.prototype._wrap=function(){var a=(this||cg)._baseState;d.forEach(function(e){(this||cg)[e]=function(){var n=
new (this||cg).constructor(this||cg);return a.children.push(n),n[e].apply(n,arguments)}},this||cg)},c.prototype._init=function(a){var e=(this||cg)._baseState;p(null===e.parent);a.call(this||cg);e.children=e.children.filter(function(n){return n._baseState.parent===(this||cg)},this||cg);p.equal(e.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(a){var e=(this||cg)._baseState,n=a.filter(function(q){return q instanceof(this||cg).constructor},this||cg);a=a.filter(function(q){return!(q instanceof
(this||cg).constructor)},this||cg);0!==n.length&&(p(null===e.children),e.children=n,n.forEach(function(q){q._baseState.parent=this||cg},this||cg));0!==a.length&&(p(null===e.args),e.args=a,e.reverseArgs=a.map(function(q){if("object"!=typeof q||q.constructor!==Object)return q;var r={};return Object.keys(q).forEach(function(v){v==(0|v)&&(v|=0);r[q[v]]=v}),r}))},"_peekTag _decodeTag _use _decodeStr _decodeObjid _decodeTime _decodeNull _decodeInt _decodeBool _decodeList _encodeComposite _encodeStr _encodeObjid _encodeTime _encodeNull _encodeInt _encodeBool".split(" ").forEach(function(a){c.prototype[a]=
function(){throw Error(a+" not implemented for encoding: "+(this||cg)._baseState.enc);}}),b.forEach(function(a){c.prototype[a]=function(){var e=(this||cg)._baseState,n=Array.prototype.slice.call(arguments);return p(null===e.tag),e.tag=a,this._useArgs(n),this||cg}}),c.prototype.use=function(a){p(a);var e=(this||cg)._baseState;return p(null===e.use),e.use=a,this||cg},c.prototype.optional=function(){return(this||cg)._baseState.optional=!0,this||cg},c.prototype.def=function(a){var e=(this||cg)._baseState;
return p(null===e.default),e.default=a,e.optional=!0,this||cg},c.prototype.explicit=function(a){var e=(this||cg)._baseState;return p(null===e.explicit&&null===e.implicit),e.explicit=a,this||cg},c.prototype.implicit=function(a){var e=(this||cg)._baseState;return p(null===e.explicit&&null===e.implicit),e.implicit=a,this||cg},c.prototype.obj=function(){var a=(this||cg)._baseState,e=Array.prototype.slice.call(arguments);return a.obj=!0,0!==e.length&&this._useArgs(e),this||cg},c.prototype.key=function(a){var e=
(this||cg)._baseState;return p(null===e.key),e.key=a,this||cg},c.prototype.any=function(){return(this||cg)._baseState.any=!0,this||cg},c.prototype.choice=function(a){var e=(this||cg)._baseState;return p(null===e.choice),e.choice=a,this._useArgs(Object.keys(a).map(function(n){return a[n]})),this||cg},c.prototype.contains=function(a){var e=(this||cg)._baseState;return p(null===e.use),e.contains=a,this||cg},c.prototype._decode=function(a,e){var n=(this||cg)._baseState;if(null===n.parent)return a.wrapResult(n.children[0]._decode(a,
e));var q,r=n.default,v=!0,y=null;if(null!==n.key&&(y=a.enterKey(n.key)),n.optional){var D=null;if(null!==n.explicit?D=n.explicit:null!==n.implicit?D=n.implicit:null!==n.tag&&(D=n.tag),null!==D||n.any){if(v=this._peekTag(a,D,n.any),a.isError(v))return v}else{var E=a.save();try{null===n.choice?this._decodeGeneric(n.tag,a,e):this._decodeChoice(a,e),v=!0}catch(K){v=!1}a.restore(E)}}if(n.obj&&v&&(q=a.enterObject()),v){if(null!==n.explicit){D=this._decodeTag(a,n.explicit);if(a.isError(D))return D;a=D}D=
a.offset;if(null===n.use&&null===n.choice){n.any&&(E=a.save());var I=this._decodeTag(a,null!==n.implicit?n.implicit:n.tag,n.any);if(a.isError(I))return I;n.any?r=a.raw(E):a=I}if(e&&e.track&&null!==n.tag&&e.track(a.path(),D,a.length,"tagged"),e&&e.track&&null!==n.tag&&e.track(a.path(),a.offset,a.length,"content"),r=n.any?r:null===n.choice?this._decodeGeneric(n.tag,a,e):this._decodeChoice(a,e),a.isError(r))return r;(n.any||null!==n.choice||null===n.children||n.children.forEach(function(K){K._decode(a,
e)}),!n.contains||"octstr"!==n.tag&&"bitstr"!==n.tag)||(r=new l(r),r=this._getUse(n.contains,a._reporterState.obj)._decode(r,e))}return n.obj&&v&&(r=a.leaveObject(q)),null===n.key||null===r&&!0!==v?null!==y&&a.exitKey(y):a.leaveKey(y,n.key,r),r},c.prototype._decodeGeneric=function(a,e,n){var q=(this||cg)._baseState;return"seq"===a||"set"===a?null:"seqof"===a||"setof"===a?this._decodeList(e,a,q.args[0],n):/str$/.test(a)?this._decodeStr(e,a,n):"objid"===a&&q.args?this._decodeObjid(e,q.args[0],q.args[1],
n):"objid"===a?this._decodeObjid(e,null,null,n):"gentime"===a||"utctime"===a?this._decodeTime(e,a,n):"null_"===a?this._decodeNull(e,n):"bool"===a?this._decodeBool(e,n):"objDesc"===a?this._decodeStr(e,a,n):"int"===a||"enum"===a?this._decodeInt(e,q.args&&q.args[0],n):null!==q.use?this._getUse(q.use,e._reporterState.obj)._decode(e,n):e.error("unknown tag: "+a)},c.prototype._getUse=function(a,e){var n=(this||cg)._baseState;return n.useDecoder=this._use(a,e),p(null===n.useDecoder._baseState.parent),n.useDecoder=
n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},c.prototype._decodeChoice=function(a,e){var n=(this||cg)._baseState,q=null,r=!1;return Object.keys(n.choice).some(function(v){var y=a.save(),D=n.choice[v];try{var E=D._decode(a,e);if(a.isError(E))return!1;q={type:v,value:E};r=!0}catch(I){return a.restore(y),!1}return!0},this||cg),r?q:a.error("Choice not matched")},c.prototype._createEncoderBuffer=
function(a){return new f(a,(this||cg).reporter)},c.prototype._encode=function(a,e,n){var q=(this||cg)._baseState;if(null===q.default||q.default!==a)if(a=this._encodeValue(a,e,n),void 0!==a&&!this._skipDefault(a,e,n))return a},c.prototype._encodeValue=function(a,e,n){var q=(this||cg)._baseState;if(null===q.parent)return q.children[0]._encode(a,e||new k);var r=null;if((this||cg).reporter=e,q.optional&&void 0===a){if(null===q.default)return;a=q.default}var v=null,y=!1;if(q.any)r=this._createEncoderBuffer(a);
else if(q.choice)r=this._encodeChoice(a,e);else if(q.contains)v=this._getUse(q.contains,n)._encode(a,e),y=!0;else if(q.children)v=q.children.map(function(E){if("null_"===E._baseState.tag)return E._encode(null,e,a);if(null===E._baseState.key)return e.error("Child should have a key");var I=e.enterKey(E._baseState.key);if("object"!=typeof a)return e.error("Child expected, but input is not object");E=E._encode(a[E._baseState.key],e,a);return e.leaveKey(I),E},this||cg).filter(function(E){return E}),v=
this._createEncoderBuffer(v);else if("seqof"===q.tag||"setof"===q.tag){if(!q.args||1!==q.args.length)return e.error("Too many args for : "+q.tag);if(!Array.isArray(a))return e.error("seqof/setof, but data is not Array");v=this.clone();v._baseState.implicit=null;v=this._createEncoderBuffer(a.map(function(E){return this._getUse((this||cg)._baseState.args[0],a)._encode(E,e)},v))}else null!==q.use?r=this._getUse(q.use,n)._encode(a,e):(v=this._encodePrimitive(q.tag,a),y=!0);if(!q.any&&null===q.choice){n=
null!==q.implicit?q.implicit:q.tag;var D=null===q.implicit?"universal":"context";null===n?null===q.use&&e.error("Tag could be omitted only for .use()"):null===q.use&&(r=this._encodeComposite(n,y,D,v))}return null!==q.explicit&&(r=this._encodeComposite(q.explicit,!1,"context",r)),r},c.prototype._encodeChoice=function(a,e){var n=(this||cg)._baseState,q=n.choice[a.type];return q||p(!1,a.type+" not found in "+JSON.stringify(Object.keys(n.choice))),q._encode(a.value,e)},c.prototype._encodePrimitive=function(a,
e){var n=(this||cg)._baseState;if(/str$/.test(a))return this._encodeStr(e,a);if("objid"===a&&n.args)return this._encodeObjid(e,n.reverseArgs[0],n.args[1]);if("objid"===a)return this._encodeObjid(e,null,null);if("gentime"===a||"utctime"===a)return this._encodeTime(e,a);if("null_"===a)return this._encodeNull();if("int"===a||"enum"===a)return this._encodeInt(e,n.args&&n.reverseArgs[0]);if("bool"===a)return this._encodeBool(e);if("objDesc"===a)return this._encodeStr(e,a);throw Error("Unsupported tag: "+
a);},c.prototype._isNumstr=function(a){return/^[0-9 ]*$/.test(a)},c.prototype._isPrintstr=function(a){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(a)},DO}(),CO}function S2(){if(T2)return EO;T2=!0;var g=EO;return g._reverse=function(c){var k={};return Object.keys(c).forEach(function(f){(0|f)==f&&(f|=0);k[c[f]]=f}),k},g.der=function(){if(U2)return Ks;U2=!0;var c=S2();return Ks.tagClass={0:"universal",1:"application",2:"context",3:"private"},Ks.tagClassByName=c._reverse(Ks.tagClass),Ks.tag={0:"end",
1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},Ks.tagByName=c._reverse(Ks.tag),Ks}(),EO}function V2(){function g(a){(this||Ls).enc="der";(this||Ls).name=a.name;(this||Ls).entity=a;(this||Ls).tree=new c;(this||Ls).tree._init(a.body)}
function c(a){b.Node.call(this||Ls,"der",a)}function k(a,e){var n=a.readUInt8(e);if(a.isError(n))return n;var q=h.tagClass[n>>6],r=0==(32&n);if(31==(31&n)){var v=n;for(n=0;128==(128&v);){if(v=a.readUInt8(e),a.isError(v))return v;n<<=7;n|=127&v}}else n&=31;return{cls:q,primitive:r,tag:n,tagStr:h.tag[n]}}function f(a,e,n){var q=a.readUInt8(n);if(a.isError(q))return q;if(!e&&128===q)return null;if(0==(128&q))return q;e=127&q;if(4<e)return a.error("length octect is too long");for(var r=q=0;r<e;r++){q<<=
8;var v=a.readUInt8(n);if(a.isError(v))return v;q|=v}return q}if(W2)return FO;W2=!0;var l=hh,p=hG(),b=p.base,d=p.bignum,h=p.constants.der;return FO=g,g.prototype.decode=function(a,e){return a instanceof b.DecoderBuffer||(a=new b.DecoderBuffer(a,e)),(this||Ls).tree._decode(a,e)},l(c,b.Node),c.prototype._peekTag=function(a,e,n){if(a.isEmpty())return!1;var q=a.save(),r=k(a,'Failed to peek tag: "'+e+'"');return a.isError(r)?r:(a.restore(q),r.tag===e||r.tagStr===e||r.tagStr+"of"===e||n)},c.prototype._decodeTag=
function(a,e,n){var q=k(a,'Failed to decode tag of "'+e+'"');if(a.isError(q))return q;var r=f(a,q.primitive,'Failed to get length of "'+e+'"');if(a.isError(r))return r;if(!n&&q.tag!==e&&q.tagStr!==e&&q.tagStr+"of"!==e)return a.error('Failed to match tag: "'+e+'"');if(q.primitive||null!==r)return a.skip(r,'Failed to match body of: "'+e+'"');n=a.save();q=this._skipUntilEnd(a,'Failed to skip indefinite length body: "'+(this||Ls).tag+'"');return a.isError(q)?q:(r=a.offset-n.offset,a.restore(n),a.skip(r,
'Failed to match body of: "'+e+'"'))},c.prototype._skipUntilEnd=function(a,e){for(;;){var n=k(a,e);if(a.isError(n))return n;var q,r=f(a,n.primitive,e);if(a.isError(r))return r;if(q=n.primitive||null!==r?a.skip(r):this._skipUntilEnd(a,e),a.isError(q))return q;if("end"===n.tagStr)break}},c.prototype._decodeList=function(a,e,n,q){for(e=[];!a.isEmpty();){var r=this._peekTag(a,"end");if(a.isError(r))return r;var v=n.decode(a,"der",q);if(a.isError(v)&&r)break;e.push(v)}return e},c.prototype._decodeStr=
function(a,e){if("bitstr"===e)return e=a.readUInt8(),a.isError(e)?e:{unused:e,data:a.raw()};if("bmpstr"===e){e=a.raw();if(1==e.length%2)return a.error("Decoding of string type: bmpstr length mismatch");a="";for(var n=0;n<e.length/2;n++)a+=String.fromCharCode(e.readUInt16BE(2*n));return a}return"numstr"===e?(e=a.raw().toString("ascii"),this._isNumstr(e)?e:a.error("Decoding of string type: numstr unsupported characters")):"octstr"===e||"objDesc"===e?a.raw():"printstr"===e?(e=a.raw().toString("ascii"),
this._isPrintstr(e)?e:a.error("Decoding of string type: printstr unsupported characters")):/str$/.test(e)?a.raw().toString():a.error("Decoding of string type: "+e+" unsupported")},c.prototype._decodeObjid=function(a,e,n){for(var q=[],r=0;!a.isEmpty();){var v=a.readUInt8();r<<=7;r|=127&v;0==(128&v)&&(q.push(r),r=0)}128&v&&q.push(r);a=q[0]/40|0;r=q[0]%40;if(n=n?q:[a,r].concat(q.slice(1)),e)q=e[n.join(" ")],void 0===q&&(q=e[n.join(".")]),void 0!==q&&(n=q);return n},c.prototype._decodeTime=function(a,
e){var n=a.raw().toString();if("gentime"===e){a=0|n.slice(0,4);e=0|n.slice(4,6);var q=0|n.slice(6,8),r=0|n.slice(8,10),v=0|n.slice(10,12);n=0|n.slice(12,14)}else{if("utctime"!==e)return a.error("Decoding "+e+" time is not supported yet");a=0|n.slice(0,2);e=0|n.slice(2,4);q=0|n.slice(4,6);r=0|n.slice(6,8);v=0|n.slice(8,10);n=0|n.slice(10,12);a=70>a?2E3+a:1900+a}return Date.UTC(a,e-1,q,r,v,n,0)},c.prototype._decodeNull=function(a){return null},c.prototype._decodeBool=function(a){var e=a.readUInt8();
return a.isError(e)?e:0!==e},c.prototype._decodeInt=function(a,e){a=a.raw();a=new d(a);return e&&(a=e[a.toString(10)]||a),a},c.prototype._use=function(a,e){return"function"==typeof a&&(a=a(e)),a._getDecoder("der").tree},FO}function Xia(){if(X2)return GO;X2=!0;var g=GO;return g.der=V2(),g.pem=function(){function c(p){l.call(this||HO,p);(this||HO).enc="pem"}if(Y2)return IO;Y2=!0;var k=hh,f=Yg.Buffer,l=V2();return k(c,l),IO=c,c.prototype.decode=function(p,b){p=p.toString().split(/[\r\n]+/g);for(var d=
b.label.toUpperCase(),h=/^-----(BEGIN|END) ([^-]+)-----$/,a=-1,e=-1,n=0;n<p.length;n++){var q=p[n].match(h);if(null!==q&&q[2]===d){if(-1!==a){if("END"!==q[1])break;e=n;break}if("BEGIN"!==q[1])break;a=n}}if(-1===a||-1===e)throw Error("PEM section not found for: "+d);p=p.slice(a+1,e).join("");p.replace(/[^a-z0-9\+\/=]+/gi,"");p=new f(p,"base64");return l.prototype.decode.call(this||HO,p,b)},IO}(),GO}function Z2(){function g(h){(this||Ok).enc="der";(this||Ok).name=h.name;(this||Ok).entity=h;(this||Ok).tree=
new c;(this||Ok).tree._init(h.body)}function c(h){b.Node.call(this||Ok,"der",h)}function k(h){return 10>h?"0"+h:h}if($2)return JO;$2=!0;var f=hh,l=Yg.Buffer,p=hG(),b=p.base,d=p.constants.der;return JO=g,g.prototype.encode=function(h,a){return(this||Ok).tree._encode(h,a).join()},f(c,b.Node),c.prototype._encodeComposite=function(h,a,e,n){var q;a:{var r=h;h=(this||Ok).reporter;"seqof"===r?r="seq":"setof"===r&&(r="set");if(d.tagByName.hasOwnProperty(r))r=d.tagByName[r];else if("number"!=typeof r||(0|
r)!==r){e=h.error("Unknown tag: "+r);break a}31<=r?e=h.error("Multi-octet tag encoding unsupported"):(a||(r|=32),e=r|d.tagClassByName[e||"universal"]<<6)}if(128>n.length)return(q=new l(2))[0]=e,q[1]=n.length,this._createEncoderBuffer([q,n]);h=1;for(a=n.length;256<=a;a>>=8)h++;(q=new l(2+h))[0]=e;q[1]=128|h;a=1+h;for(e=n.length;0<e;a--,e>>=8)q[a]=255&e;return this._createEncoderBuffer([q,n])},c.prototype._encodeStr=function(h,a){if("bitstr"===a)return this._createEncoderBuffer([0|h.unused,h.data]);
if("bmpstr"===a){a=new l(2*h.length);for(var e=0;e<h.length;e++)a.writeUInt16BE(h.charCodeAt(e),2*e);return this._createEncoderBuffer(a)}return"numstr"===a?this._isNumstr(h)?this._createEncoderBuffer(h):(this||Ok).reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===a?this._isPrintstr(h)?this._createEncoderBuffer(h):(this||Ok).reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):
/str$/.test(a)||"objDesc"===a?this._createEncoderBuffer(h):(this||Ok).reporter.error("Encoding of string type: "+a+" unsupported")},c.prototype._encodeObjid=function(h,a,e){if("string"==typeof h){if(!a)return(this||Ok).reporter.error("string objid given, but no values map found");if(!a.hasOwnProperty(h))return(this||Ok).reporter.error("objid not found in values map");h=a[h].split(/[\s\.]+/g);for(a=0;a<h.length;a++)h[a]|=0}else if(Array.isArray(h))for(h=h.slice(),a=0;a<h.length;a++)h[a]|=0;if(!Array.isArray(h))return(this||
Ok).reporter.error("objid() should be either array or string, got: "+JSON.stringify(h));if(!e){if(40<=h[1])return(this||Ok).reporter.error("Second objid identifier OOB");h.splice(0,2,40*h[0]+h[1])}var n=0;for(a=0;a<h.length;a++)for(e=h[a],n++;128<=e;e>>=7)n++;n=new l(n);var q=n.length-1;for(a=h.length-1;0<=a;a--)for(e=h[a],n[q--]=127&e;0<(e>>=7);)n[q--]=128|127&e;return this._createEncoderBuffer(n)},c.prototype._encodeTime=function(h,a){var e;h=new Date(h);return"gentime"===a?e=[k(h.getFullYear()),
k(h.getUTCMonth()+1),k(h.getUTCDate()),k(h.getUTCHours()),k(h.getUTCMinutes()),k(h.getUTCSeconds()),"Z"].join(""):"utctime"===a?e=[k(h.getFullYear()%100),k(h.getUTCMonth()+1),k(h.getUTCDate()),k(h.getUTCHours()),k(h.getUTCMinutes()),k(h.getUTCSeconds()),"Z"].join(""):(this||Ok).reporter.error("Encoding "+a+" time is not supported yet"),this._encodeStr(e,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(h,a){if("string"==typeof h){if(!a)return(this||
Ok).reporter.error("String int or enum given, but no values map");if(!a.hasOwnProperty(h))return(this||Ok).reporter.error("Values map doesn't contain: "+JSON.stringify(h));h=a[h]}"number"==typeof h||l.isBuffer(h)||(a=h.toArray(),!h.sign&&128&a[0]&&a.unshift(0),h=new l(a));if(l.isBuffer(h)){var e=h.length;0===h.length&&e++;e=new l(e);return h.copy(e),0===h.length&&(e[0]=0),this._createEncoderBuffer(e)}if(128>h)return this._createEncoderBuffer(h);if(256>h)return this._createEncoderBuffer([0,h]);e=1;
for(a=h;256<=a;a>>=8)e++;for(a=(e=Array(e)).length-1;0<=a;a--)e[a]=255&h,h>>=8;return 128&e[0]&&e.unshift(0),this._createEncoderBuffer(new l(e))},c.prototype._encodeBool=function(h){return this._createEncoderBuffer(h?255:0)},c.prototype._use=function(h,a){return"function"==typeof h&&(h=h(a)),h._getEncoder("der").tree},c.prototype._skipDefault=function(h,a,e){var n=(this||Ok)._baseState;if(null===n.default)return!1;h=h.join();if(void 0===n.defaultBuffer&&(n.defaultBuffer=this._encodeValue(n.default,
a,e).join()),h.length!==n.defaultBuffer.length)return!1;for(a=0;a<h.length;a++)if(h[a]!==n.defaultBuffer[a])return!1;return!0},JO}function Yia(){if(a3)return KO;a3=!0;var g=KO;return g.der=Z2(),g.pem=function(){function c(l){f.call(this||LO,l);(this||LO).enc="pem"}if(b3)return MO;b3=!0;var k=hh,f=Z2();return k(c,f),MO=c,c.prototype.encode=function(l,p){l=f.prototype.encode.call(this||LO,l).toString("base64");for(var b=["-----BEGIN "+p.label+"-----"],d=0;d<l.length;d+=64)b.push(l.slice(d,d+64));return b.push("-----END "+
p.label+"-----"),b.join("\n")},MO}(),KO}function hG(){if(c3)return NO;c3=!0;var g=NO;return g.bignum=uk,g.define=function(){function c(l,p){(this||gn).name=l;(this||gn).body=p;(this||gn).decoders={};(this||gn).encoders={}}if(d3)return OO;d3=!0;var k=hG(),f=hh;return OO.define=function(l,p){return new c(l,p)},c.prototype._createNamed=function(l){try{var p=Nu.runInThisContext("(function "+(this||gn).name+"(entity) {\n  this._initNamed(entity);\n})")}catch(b){p=function(d){this._initNamed(d)}}return f(p,
l),p.prototype._initNamed=function(b){l.call(this||gn,b)},new p(this||gn)},c.prototype._getDecoder=function(l){return l=l||"der",(this||gn).decoders.hasOwnProperty(l)||((this||gn).decoders[l]=this._createNamed(k.decoders[l])),(this||gn).decoders[l]},c.prototype.decode=function(l,p,b){return this._getDecoder(p).decode(l,b)},c.prototype._getEncoder=function(l){return l=l||"der",(this||gn).encoders.hasOwnProperty(l)||((this||gn).encoders[l]=this._createNamed(k.encoders[l])),(this||gn).encoders[l]},c.prototype.encode=
function(l,p,b){return this._getEncoder(p).encode(l,b)},OO}().define,g.base=OA(),g.constants=S2(),g.decoders=Xia(),g.encoders=Yia(),NO}function Ox(g){var c;"object"!=typeof g||PO.isBuffer(g)||(c=g.passphrase,g=g.key);"string"==typeof g&&(g=PO.from(g));var k=c;g=g.toString();var f=g.match(Zia);if(f){var l="aes"+f[1],p=iG.from(f[2],"hex");var b=iG.from(f[3].replace(/[\r\n]/g,""),"base64");f=PA(k,p.slice(0,8),parseInt(f[1],10)).key;k=[];l=hn.createDecipheriv(l,f,p);k.push(l.update(b));k.push(l.final());
b=iG.concat(k)}else b=g.match($ia),b=new iG(b[2].replace(/[\r\n]/g,""),"base64");g=g.match(aja)[1];switch(g){case "CERTIFICATE":var d=Lm.certificate.decode(b,"der").tbsCertificate.subjectPublicKeyInfo;case "PUBLIC KEY":switch(d||(d=Lm.PublicKey.decode(b,"der")),c=d.algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return Lm.RSAPublicKey.decode(d.subjectPublicKey.data,"der");case "1.2.840.10045.2.1":return d.subjectPrivateKey=d.subjectPublicKey,{type:"ec",data:d};case "1.2.840.10040.4.1":return d.algorithm.params.pub_key=
Lm.DSAparam.decode(d.subjectPublicKey.data,"der"),{type:"dsa",data:d.algorithm.params};default:throw Error("unknown key id "+c);}case "ENCRYPTED PRIVATE KEY":k=Lm.EncryptedPrivateKey.decode(b,"der"),b=c,l=k.algorithm.decrypt.kde.kdeparams.salt,p=parseInt(k.algorithm.decrypt.kde.kdeparams.iters.toString(),10),d=bja[k.algorithm.decrypt.cipher.algo.join(".")],g=k.algorithm.decrypt.cipher.iv,c=k.subjectPrivateKey,k=parseInt(d.split("-")[1],10)/8,b=cja.pbkdf2Sync(b,l,p,k,"sha1"),d=dja.createDecipheriv(d,
b,g),g=[],b=(g.push(d.update(c)),g.push(d.final()),PO.concat(g));case "PRIVATE KEY":switch(c=(d=Lm.PrivateKey.decode(b,"der")).algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return Lm.RSAPrivateKey.decode(d.subjectPrivateKey,"der");case "1.2.840.10045.2.1":return{curve:d.algorithm.curve,privateKey:Lm.ECPrivateKey.decode(d.subjectPrivateKey,"der").privateKey};case "1.2.840.10040.4.1":return d.algorithm.params.priv_key=Lm.DSAparam.decode(d.subjectPrivateKey,"der"),{type:"dsa",params:d.algorithm.params};
default:throw Error("unknown key id "+c);}case "RSA PUBLIC KEY":return Lm.RSAPublicKey.decode(b,"der");case "RSA PRIVATE KEY":return Lm.RSAPrivateKey.decode(b,"der");case "DSA PRIVATE KEY":return{type:"dsa",params:Lm.DSAPrivateKey.decode(b,"der")};case "EC PRIVATE KEY":return{curve:(b=Lm.ECPrivateKey.decode(b,"der")).parameters.value,privateKey:b.privateKey};default:throw Error("unknown key type "+g);}}function e3(g,c,k,f){if((g=new Zl(g.toArray())).length<c.byteLength()){var l=new Zl(c.byteLength()-
g.length);l.fill(0);g=Zl.concat([l,g])}l=k.length;k=(k=QO(k,c)).mod(c);k=new Zl(k.toArray());k.length<c.byteLength()&&(c=new Zl(c.byteLength()-k.length),c.fill(0),k=Zl.concat([c,k]));c=k;k=new Zl(l);k.fill(1);l=new Zl(l);return l.fill(0),l=Ou(f,l).update(k).update(new Zl([0])).update(g).update(c).digest(),k=Ou(f,l).update(k).digest(),{k:l=Ou(f,l).update(k).update(new Zl([1])).update(g).update(c).digest(),v:Ou(f,l).update(k).digest()}}function QO(g,c){var k=new jG(g);g=(g.length<<3)-c.bitLength();
return 0<g&&k.ishrn(g),k}function f3(g,c,k){var f;do{for(f=new Zl(0);8*f.length<g.bitLength();)c.v=Ou(k,c.k).update(c.v).digest(),f=Zl.concat([f,c.v]);f=QO(f,g);c.k=Ou(k,c.k).update(c.v).update(new Zl([0])).digest();c.v=Ou(k,c.k).update(c.v).digest()}while(-1!==f.cmp(g));return f}function g3(g,c){if(0>=g.cmpn(0))throw Error("invalid sig");if(g.cmp(c)>=c)throw Error("invalid sig");}function QA(g){kG.Writable.call(this||Yj);g=Pu[g];if(!g)throw Error("Unknown message digest");(this||Yj)._hashType=g.hash;
(this||Yj)._hash=h3(g.hash);(this||Yj)._tag=g.id;(this||Yj)._signType=g.sign}function RA(g){kG.Writable.call(this||Yj);g=Pu[g];if(!g)throw Error("Unknown message digest");(this||Yj)._hash=h3(g.hash);(this||Yj)._tag=g.id;(this||Yj)._signType=g.sign}function i3(g){return new QA(g)}function j3(g){return new RA(g)}function Qu(g){(this||Pk).curveType=jn[g];(this||Pk).curveType||((this||Pk).curveType={name:g});(this||Pk).curve=new eja.ec((this||Pk).curveType.name);(this||Pk).keys=void 0}function RO(g,c,
k){Array.isArray(g)||(g=g.toArray());g=new jr(g);k&&g.length<k&&(k=new jr(k-g.length),k.fill(0),g=jr.concat([k,g]));return c?g.toString(c):g}function k3(){throw Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11");}function l3(g,c){if("number"!=typeof g||g!=g)throw new TypeError("offset must be a number");if(g>m3||0>g)throw new TypeError("offset must be a uint32");if(g>n3||g>c)throw new RangeError("offset out of range");}function o3(g,
c,k){if("number"!=typeof g||g!=g)throw new TypeError("size must be a number");if(g>m3||0>g)throw new TypeError("size must be a uint32");if(g+c>k||g>n3)throw new RangeError("buffer too small");}function p3(g,c,k,f){return SO.browser?(k=new Uint8Array(g.buffer,c,k),TO.getRandomValues(k),f?(SO.nextTick(function(){f(null,g)}),void 0):g):f?(q3(k,function(l,p){if(l)return f(l);p.copy(g,c);f(null,g)}),void 0):(q3(k).copy(g,c),g)}function UO(){function g(f){(this||lG).rand=f}if(r3)return mG;r3=!0;var c;mG=
function(f){c||(c=new g(null));return c.generate(f)};mG.Rand=g;g.prototype.generate=function(f){return this._rand(f)};g.prototype._rand=function(f){if((this||lG).rand.getBytes)return(this||lG).rand.getBytes(f);f=new Uint8Array(f);for(var l=0;l<f.length;l++)f[l]=(this||lG).rand.getByte();return f};if("object"===typeof self)self.crypto&&self.crypto.getRandomValues?g.prototype._rand=function(f){f=new Uint8Array(f);self.crypto.getRandomValues(f);return f}:self.msCrypto&&self.msCrypto.getRandomValues?
g.prototype._rand=function(f){f=new Uint8Array(f);self.msCrypto.getRandomValues(f);return f}:"object"===typeof window&&(g.prototype._rand=function(){throw Error("Not implemented yet");});else try{var k=zh;if("function"!==typeof k.randomBytes)throw Error("Not supported");g.prototype._rand=function(f){return k.randomBytes(f)}}catch(f){}return mG}function s3(){function g(f){(this||t3).rand=f||new k.Rand}if(u3)return VO;u3=!0;var c=Vha(),k=UO();VO=g;g.create=function(f){return new g(f)};g.prototype._randbelow=
function(f){var l=f.bitLength();l=Math.ceil(l/8);do var p=new c((this||t3).rand.generate(l));while(0<=p.cmp(f));return p};g.prototype._randrange=function(f,l){l=l.sub(f);return f.add(this._randbelow(l))};g.prototype.test=function(f,l,p){var b=f.bitLength(),d=c.mont(f),h=(new c(1)).toRed(d);l||(l=Math.max(1,b/48|0));b=f.subn(1);for(var a=0;!b.testn(a);a++);f=f.shrn(a);for(var e=b.toRed(d);0<l;l--){var n=this._randrange(new c(2),b);p&&p(n);n=n.toRed(d).redPow(f);if(0!==n.cmp(h)&&0!==n.cmp(e)){for(var q=
1;q<a;q++){n=n.redSqr();if(0===n.cmp(h))return!1;if(0===n.cmp(e))break}if(q===a)return!1}}return!0};g.prototype.getDivisor=function(f,l){var p=f.bitLength(),b=c.mont(f),d=(new c(1)).toRed(b);l||(l=Math.max(1,p/48|0));p=f.subn(1);for(var h=0;!p.testn(h);h++);for(var a=f.shrn(h),e=p.toRed(b);0<l;l--){var n=this._randrange(new c(2),p),q=f.gcd(n);if(0!==q.cmpn(1))return q;n=n.toRed(b).redPow(a);if(0!==n.cmp(d)&&0!==n.cmp(e)){for(q=1;q<h;q++){n=n.redSqr();if(0===n.cmp(d))return n.fromRed().subn(1).gcd(f);
if(0===n.cmp(e))break}if(q===h)return n=n.redSqr(),n.fromRed().subn(1).gcd(f)}}return!1};return VO}function v3(){function g(y){if(null!==v)var D=v;else{D=[2];for(var E=1,I=3;1048576>I;I+=2){for(var K=Math.ceil(Math.sqrt(I)),P=0;P<E&&D[P]<=K&&0!==I%D[P];P++);E!==P&&D[P]<=K||(D[E++]=I)}v=D}for(E=0;E<D.length;E++)if(0===y.modn(D[E]))if(0===y.cmpn(D[E]))break;else return!1;return!0}function c(y){var D=l.mont(y);return 0===h.toRed(D).redPow(y.subn(1)).fromRed().cmpn(1)}function k(y,D){if(16>y)return 2===
D||5===D?new l([140,123]):new l([140,39]);D=new l(D);for(var E,I;;){for(E=new l(f(Math.ceil(y/8)));E.bitLength()>y;)E.ishrn(1);E.isEven()&&E.iadd(d);E.testn(1)||E.iadd(h);if(!D.cmp(h))for(;E.mod(p).cmp(q);)E.iadd(r);else if(!D.cmp(a))for(;E.mod(e).cmp(n);)E.iadd(r);I=E.shrn(1);if(g(I)&&g(E)&&c(I)&&c(E)&&b.test(I)&&b.test(E))return E}}if(w3)return WO;w3=!0;var f=zx();WO=k;k.simpleSieve=g;k.fermatTest=c;var l=G1(),p=new l(24),b=new (s3()),d=new l(1),h=new l(2),a=new l(5);new l(16);new l(8);var e=new l(10),
n=new l(3);new l(7);var q=new l(11),r=new l(4);new l(12);var v=null;return WO}function fja(){function g(y,D){D=D||"utf8";l.isBuffer(y)||(y=new l(y,D));(this||gi)._pub=new p(y);return this||gi}function c(y,D){D=D||"utf8";l.isBuffer(y)||(y=new l(y,D));(this||gi)._priv=new p(y);return this||gi}function k(y,D,E){this.setGenerator(D);(this||gi).__prime=new p(y);(this||gi)._prime=p.mont((this||gi).__prime);(this||gi)._primeLen=y.length;(this||gi)._pub=void 0;(this||gi)._priv=void 0;(this||gi)._primeCode=
void 0;E?((this||gi).setPublicKey=g,(this||gi).setPrivateKey=c):(this||gi)._primeCode=8}function f(y,D){y=new l(y.toArray());return D?y.toString(D):y}if(x3)return XO;x3=!0;var l=Yg.Buffer,p=G1(),b=new (s3()),d=new p(24),h=new p(11),a=new p(10),e=new p(3),n=new p(7),q=v3(),r=zx();XO=k;var v={};Object.defineProperty(k.prototype,"verifyError",{enumerable:!0,get:function(){if("number"!==typeof(this||gi)._primeCode){var y=(this||gi).__prime,D=(this||gi).__gen.toString("hex");var E=[D,y.toString(16)].join("_");
if(E in v)E=v[E];else{var I=0;if(!y.isEven()&&q.simpleSieve&&q.fermatTest(y)&&b.test(y))switch(b.test(y.shrn(1))||(I+=2),D){case "02":y.mod(d).cmp(h)&&(I+=8);break;case "05":y=y.mod(a);y.cmp(e)&&y.cmp(n)&&(I+=8);break;default:I+=4}else I+=1,I="02"===D||"05"===D?I+8:I+4;E=v[E]=I}(this||gi)._primeCode=E}return(this||gi)._primeCode}});k.prototype.generateKeys=function(){(this||gi)._priv||((this||gi)._priv=new p(r((this||gi)._primeLen)));(this||gi)._pub=(this||gi)._gen.toRed((this||gi)._prime).redPow((this||
gi)._priv).fromRed();return this.getPublicKey()};k.prototype.computeSecret=function(y){y=new p(y);y=y.toRed((this||gi)._prime);y=y.redPow((this||gi)._priv).fromRed();y=new l(y.toArray());var D=this.getPrime();y.length<D.length&&(D=new l(D.length-y.length),D.fill(0),y=l.concat([D,y]));return y};k.prototype.getPublicKey=function(y){return f((this||gi)._pub,y)};k.prototype.getPrivateKey=function(y){return f((this||gi)._priv,y)};k.prototype.getPrime=function(y){return f((this||gi).__prime,y)};k.prototype.getGenerator=
function(y){return f((this||gi)._gen,y)};k.prototype.setGenerator=function(y,D){D=D||"utf8";l.isBuffer(y)||(y=new l(y,D));(this||gi).__gen=y;(this||gi)._gen=new p(y);return this||gi};return XO}function gja(){function g(b,d,h,a){if(c.isBuffer(d)||void 0===p[d])return g(b,"binary",d,h);d=d||"binary";a=a||"binary";h=h||new c([2]);c.isBuffer(h)||(h=new c(h,a));if("number"===typeof b)return new l(k(b,h),h,!0);c.isBuffer(b)||(b=new c(b,d));return new l(b,h,!0)}if(y3)return Ru;y3=!0;var c=Yg.Buffer,k=v3(),
f=hja,l=fja(),p={binary:!0,hex:!0,base64:!0};Ru.DiffieHellmanGroup=Ru.createDiffieHellmanGroup=Ru.getDiffieHellman=function(b){var d=new c(f[b].prime,"hex");b=new c(f[b].gen,"hex");return new l(d,b)};Ru.createDiffieHellman=Ru.DiffieHellman=g;return Ru}function YO(){if(z3)return ZO.exports;z3=!0;(function(g,c){function k(u,B){if(!u)throw Error(B||"Assertion failed");}function f(u,B){u.super_=B;var A=function(){};A.prototype=B.prototype;u.prototype=new A;u.prototype.constructor=u}function l(u,B,A){if(l.isBN(u))return u;
(this||fb).negative=0;(this||fb).words=null;(this||fb).length=0;(this||fb).red=null;if(null!==u){if("le"===B||"be"===B)A=B,B=10;this._init(u||0,B||10,A||"be")}}function p(u,B){B=u.charCodeAt(B);if(48<=B&&57>=B)return B-48;if(65<=B&&70>=B)return B-55;if(97<=B&&102>=B)return B-87;k(!1,"Invalid character in "+u)}function b(u,B,A){var H=p(u,A);A-1>=B&&(H|=p(u,A-1)<<4);return H}function d(u,B,A,H){var F=0;A=Math.min(u.length,A);for(var L=B;L<A;L++){var U=u.charCodeAt(L)-48;F*=H;B=49<=U?U-49+10:17<=U?U-
17+10:U;k(0<=U&&B<H,"Invalid character");F+=B}return F}function h(u,B){u.words=B.words;u.length=B.length;u.negative=B.negative;u.red=B.red}function a(){return((this||fb).red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}function e(u,B,A){A.negative=B.negative^u.negative;var H=u.length+B.length|0;A.length=H;H=H-1|0;var F=u.words[0]|0,L=B.words[0]|0;F*=L;var U=F/67108864|0;A.words[0]=F&67108863;for(var T=1;T<H;T++){var Y=U>>>26,wa=U&67108863;U=Math.min(T,B.length-1);for(var Ga=Math.max(0,T-u.length+1);Ga<=
U;Ga++)F=u.words[T-Ga|0]|0,L=B.words[Ga]|0,F=F*L+wa,Y+=F/67108864|0,wa=F&67108863;A.words[T]=wa|0;U=Y|0}0!==U?A.words[T]=U|0:A.length--;return A._strip()}function n(u,B,A){A.negative=B.negative^u.negative;A.length=u.length+B.length;for(var H=0,F=0,L=0;L<A.length-1;L++){var U=F;F=0;H&=67108863;for(var T=Math.min(L,B.length-1),Y=Math.max(0,L-u.length+1);Y<=T;Y++){var wa=(u.words[L-Y]|0)*(B.words[Y]|0),Ga=wa&67108863;U=U+(wa/67108864|0)|0;Ga=Ga+H|0;H=Ga&67108863;U=U+(Ga>>>26)|0;F+=U>>>26;U&=67108863}A.words[L]=
H;H=U}0!==H?A.words[L]=H:A.length--;return A._strip()}function q(u,B){(this||fb).name=u;(this||fb).p=new l(B,16);(this||fb).n=(this||fb).p.bitLength();(this||fb).k=(new l(1)).iushln((this||fb).n).isub((this||fb).p);(this||fb).tmp=this._tmp()}function r(){q.call(this||fb,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){q.call(this||fb,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function y(){q.call(this||fb,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}
function D(){q.call(this||fb,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(u){"string"===typeof u?(u=l._prime(u),(this||fb).m=u.p,(this||fb).prime=u):(k(u.gtn(1),"modulus must be greater than 1"),(this||fb).m=u,(this||fb).prime=null)}function I(u){E.call(this||fb,u);(this||fb).shift=(this||fb).m.bitLength();0!==(this||fb).shift%26&&((this||fb).shift+=26-(this||fb).shift%26);(this||fb).r=(new l(1)).iushln((this||fb).shift);(this||fb).r2=this.imod((this||
fb).r.sqr());(this||fb).rinv=(this||fb).r._invmp((this||fb).m);(this||fb).minv=(this||fb).rinv.mul((this||fb).r).isubn(1).div((this||fb).m);(this||fb).minv=(this||fb).minv.umod((this||fb).r);(this||fb).minv=(this||fb).r.sub((this||fb).minv)}"object"===typeof g?g.exports=l:c.BN=l;l.BN=l;l.wordSize=26;try{var K="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:Yg.Buffer}catch(u){}l.isBN=function(u){return u instanceof l?!0:null!==u&&"object"===typeof u&&u.constructor.wordSize===
l.wordSize&&Array.isArray(u.words)};l.max=function(u,B){return 0<u.cmp(B)?u:B};l.min=function(u,B){return 0>u.cmp(B)?u:B};l.prototype._init=function(u,B,A){if("number"===typeof u)return this._initNumber(u,B,A);if("object"===typeof u)return this._initArray(u,B,A);"hex"===B&&(B=16);k(B===(B|0)&&2<=B&&36>=B);u=u.toString().replace(/\s+/g,"");var H=0;"-"===u[0]&&(H++,(this||fb).negative=1);H<u.length&&(16===B?this._parseHex(u,H,A):(this._parseBase(u,B,H),"le"===A&&this._initArray(this.toArray(),B,A)))};
l.prototype._initNumber=function(u,B,A){0>u&&((this||fb).negative=1,u=-u);67108864>u?((this||fb).words=[u&67108863],(this||fb).length=1):4503599627370496>u?((this||fb).words=[u&67108863,u/67108864&67108863],(this||fb).length=2):(k(9007199254740992>u),(this||fb).words=[u&67108863,u/67108864&67108863,1],(this||fb).length=3);"le"===A&&this._initArray(this.toArray(),B,A)};l.prototype._initArray=function(u,B,A){k("number"===typeof u.length);if(0>=u.length)return(this||fb).words=[0],(this||fb).length=1,
this||fb;(this||fb).length=Math.ceil(u.length/3);(this||fb).words=Array((this||fb).length);for(B=0;B<(this||fb).length;B++)(this||fb).words[B]=0;var H=0;if("be"===A)for(B=u.length-1,A=0;0<=B;B-=3){var F=u[B]|u[B-1]<<8|u[B-2]<<16;(this||fb).words[A]|=F<<H&67108863;(this||fb).words[A+1]=F>>>26-H&67108863;H+=24;26<=H&&(H-=26,A++)}else if("le"===A)for(A=B=0;B<u.length;B+=3)F=u[B]|u[B+1]<<8|u[B+2]<<16,(this||fb).words[A]|=F<<H&67108863,(this||fb).words[A+1]=F>>>26-H&67108863,H+=24,26<=H&&(H-=26,A++);return this._strip()};
l.prototype._parseHex=function(u,B,A){(this||fb).length=Math.ceil((u.length-B)/6);(this||fb).words=Array((this||fb).length);for(var H=0;H<(this||fb).length;H++)(this||fb).words[H]=0;var F=0,L=0;if("be"===A)for(H=u.length-1;H>=B;H-=2)A=b(u,B,H)<<F,(this||fb).words[L]|=A&67108863,18<=F?(F-=18,L+=1,(this||fb).words[L]|=A>>>26):F+=8;else for(H=0===(u.length-B)%2?B+1:B;H<u.length;H+=2)A=b(u,B,H)<<F,(this||fb).words[L]|=A&67108863,18<=F?(F-=18,L+=1,(this||fb).words[L]|=A>>>26):F+=8;this._strip()};l.prototype._parseBase=
function(u,B,A){(this||fb).words=[0];(this||fb).length=1;for(var H=0,F=1;67108863>=F;F*=B)H++;H--;F=F/B|0;var L=u.length-A,U=L%H;L=Math.min(L,L-U)+A;for(var T=A;T<L;T+=H)A=d(u,T,T+H,B),this.imuln(F),67108864>(this||fb).words[0]+A?(this||fb).words[0]+=A:this._iaddn(A);if(0!==U){H=1;A=d(u,T,u.length,B);for(T=0;T<U;T++)H*=B;this.imuln(H);67108864>(this||fb).words[0]+A?(this||fb).words[0]+=A:this._iaddn(A)}this._strip()};l.prototype.copy=function(u){u.words=Array((this||fb).length);for(var B=0;B<(this||
fb).length;B++)u.words[B]=(this||fb).words[B];u.length=(this||fb).length;u.negative=(this||fb).negative;u.red=(this||fb).red};l.prototype._move=function(u){h(u,this||fb)};l.prototype.clone=function(){var u=new l(null);this.copy(u);return u};l.prototype._expand=function(u){for(;(this||fb).length<u;)(this||fb).words[(this||fb).length++]=0;return this||fb};l.prototype._strip=function(){for(;1<(this||fb).length&&0===(this||fb).words[(this||fb).length-1];)(this||fb).length--;return this._normSign()};l.prototype._normSign=
function(){1===(this||fb).length&&0===(this||fb).words[0]&&((this||fb).negative=0);return this||fb};if("undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{l.prototype[Symbol.for("nodejs.util.inspect.custom")]=a}catch(u){l.prototype.inspect=a}else l.prototype.inspect=a;var P=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
N=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],aa=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];l.prototype.toString=function(u,B){u=u||10;B=B|0||1;if(16===u||"hex"===u){var A="";for(var H=u=0,F=0;F<(this||fb).length;F++){var L=
(this||fb).words[F],U=((L<<u|H)&16777215).toString(16);H=L>>>24-u&16777215;A=0!==H||F!==(this||fb).length-1?P[6-U.length]+U+A:U+A;u+=2;26<=u&&(u-=26,F--)}for(0!==H&&(A=H.toString(16)+A);0!==A.length%B;)A="0"+A;0!==(this||fb).negative&&(A="-"+A);return A}if(u===(u|0)&&2<=u&&36>=u){H=N[u];F=aa[u];A="";L=this.clone();for(L.negative=0;!L.isZero();)U=L.modrn(F).toString(u),L=L.idivn(F),A=L.isZero()?U+A:P[H-U.length]+U+A;for(this.isZero()&&(A="0"+A);0!==A.length%B;)A="0"+A;0!==(this||fb).negative&&(A="-"+
A);return A}k(!1,"Base should be between 2 and 36")};l.prototype.toNumber=function(){var u=(this||fb).words[0];2===(this||fb).length?u+=67108864*(this||fb).words[1]:3===(this||fb).length&&1===(this||fb).words[2]?u+=4503599627370496+67108864*(this||fb).words[1]:2<(this||fb).length&&k(!1,"Number can only safely store up to 53 bits");return 0!==(this||fb).negative?-u:u};l.prototype.toJSON=function(){return this.toString(16,2)};K&&(l.prototype.toBuffer=function(u,B){return this.toArrayLike(K,u,B)});l.prototype.toArray=
function(u,B){return this.toArrayLike(Array,u,B)};l.prototype.toArrayLike=function(u,B,A){this._strip();var H=this.byteLength();A=A||Math.max(1,H);k(H<=A,"byte array longer than desired length");k(0<A,"Requested array length <= 0");u=u.allocUnsafe?u.allocUnsafe(A):new u(A);this["_toArrayLike"+("le"===B?"LE":"BE")](u,H);return u};l.prototype._toArrayLikeLE=function(u,B){for(var A=B=0,H=0,F=0;H<(this||fb).length;H++)A|=(this||fb).words[H]<<F,u[B++]=A&255,B<u.length&&(u[B++]=A>>8&255),B<u.length&&(u[B++]=
A>>16&255),6===F?(B<u.length&&(u[B++]=A>>24&255),F=A=0):(A>>>=24,F+=2);if(B<u.length)for(u[B++]=A;B<u.length;)u[B++]=0};l.prototype._toArrayLikeBE=function(u,B){B=u.length-1;for(var A=0,H=0,F=0;H<(this||fb).length;H++)A|=(this||fb).words[H]<<F,u[B--]=A&255,0<=B&&(u[B--]=A>>8&255),0<=B&&(u[B--]=A>>16&255),6===F?(0<=B&&(u[B--]=A>>24&255),F=A=0):(A>>>=24,F+=2);if(0<=B)for(u[B--]=A;0<=B;)u[B--]=0};l.prototype._countBits=Math.clz32?function(u){return 32-Math.clz32(u)}:function(u){var B=0;4096<=u&&(B+=
13,u>>>=13);64<=u&&(B+=7,u>>>=7);8<=u&&(B+=4,u>>>=4);2<=u&&(B+=2,u>>>=2);return B+u};l.prototype._zeroBits=function(u){if(0===u)return 26;var B=0;0===(u&8191)&&(B+=13,u>>>=13);0===(u&127)&&(B+=7,u>>>=7);0===(u&15)&&(B+=4,u>>>=4);0===(u&3)&&(B+=2,u>>>=2);0===(u&1)&&B++;return B};l.prototype.bitLength=function(){var u=this._countBits((this||fb).words[(this||fb).length-1]);return 26*((this||fb).length-1)+u};l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,B=0;B<(this||fb).length;B++){var A=
this._zeroBits((this||fb).words[B]);u+=A;if(26!==A)break}return u};l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};l.prototype.toTwos=function(u){return 0!==(this||fb).negative?this.abs().inotn(u).iaddn(1):this.clone()};l.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()};l.prototype.isNeg=function(){return 0!==(this||fb).negative};l.prototype.neg=function(){return this.clone().ineg()};l.prototype.ineg=function(){this.isZero()||
((this||fb).negative^=1);return this||fb};l.prototype.iuor=function(u){for(;(this||fb).length<u.length;)(this||fb).words[(this||fb).length++]=0;for(var B=0;B<u.length;B++)(this||fb).words[B]|=u.words[B];return this._strip()};l.prototype.ior=function(u){k(0===((this||fb).negative|u.negative));return this.iuor(u)};l.prototype.or=function(u){return(this||fb).length>u.length?this.clone().ior(u):u.clone().ior(this||fb)};l.prototype.uor=function(u){return(this||fb).length>u.length?this.clone().iuor(u):
u.clone().iuor(this||fb)};l.prototype.iuand=function(u){var B=(this||fb).length>u.length?u:this||fb;for(var A=0;A<B.length;A++)(this||fb).words[A]&=u.words[A];(this||fb).length=B.length;return this._strip()};l.prototype.iand=function(u){k(0===((this||fb).negative|u.negative));return this.iuand(u)};l.prototype.and=function(u){return(this||fb).length>u.length?this.clone().iand(u):u.clone().iand(this||fb)};l.prototype.uand=function(u){return(this||fb).length>u.length?this.clone().iuand(u):u.clone().iuand(this||
fb)};l.prototype.iuxor=function(u){if((this||fb).length>u.length)var B=this||fb;else B=u,u=this||fb;for(var A=0;A<u.length;A++)(this||fb).words[A]=B.words[A]^u.words[A];if((this||fb)!==B)for(;A<B.length;A++)(this||fb).words[A]=B.words[A];(this||fb).length=B.length;return this._strip()};l.prototype.ixor=function(u){k(0===((this||fb).negative|u.negative));return this.iuxor(u)};l.prototype.xor=function(u){return(this||fb).length>u.length?this.clone().ixor(u):u.clone().ixor(this||fb)};l.prototype.uxor=
function(u){return(this||fb).length>u.length?this.clone().iuxor(u):u.clone().iuxor(this||fb)};l.prototype.inotn=function(u){k("number"===typeof u&&0<=u);var B=Math.ceil(u/26)|0;u%=26;this._expand(B);0<u&&B--;for(var A=0;A<B;A++)(this||fb).words[A]=~(this||fb).words[A]&67108863;0<u&&((this||fb).words[A]=~(this||fb).words[A]&67108863>>26-u);return this._strip()};l.prototype.notn=function(u){return this.clone().inotn(u)};l.prototype.setn=function(u,B){k("number"===typeof u&&0<=u);var A=u/26|0;u%=26;
this._expand(A+1);(this||fb).words[A]=B?(this||fb).words[A]|1<<u:(this||fb).words[A]&~(1<<u);return this._strip()};l.prototype.iadd=function(u){if(0!==(this||fb).negative&&0===u.negative)return(this||fb).negative=0,this.isub(u),(this||fb).negative^=1,this._normSign();if(0===(this||fb).negative&&0!==u.negative){u.negative=0;var B=this.isub(u);u.negative=1;return B._normSign()}if((this||fb).length>u.length)var A=this||fb;else A=u,u=this||fb;for(var H=B=0;H<u.length;H++)B=(A.words[H]|0)+(u.words[H]|
0)+B,(this||fb).words[H]=B&67108863,B>>>=26;for(;0!==B&&H<A.length;H++)B=(A.words[H]|0)+B,(this||fb).words[H]=B&67108863,B>>>=26;(this||fb).length=A.length;if(0!==B)(this||fb).words[(this||fb).length]=B,(this||fb).length++;else if(A!==(this||fb))for(;H<A.length;H++)(this||fb).words[H]=A.words[H];return this||fb};l.prototype.add=function(u){if(0!==u.negative&&0===(this||fb).negative){u.negative=0;var B=this.sub(u);u.negative^=1;return B}return 0===u.negative&&0!==(this||fb).negative?((this||fb).negative=
0,B=u.sub(this||fb),(this||fb).negative=1,B):(this||fb).length>u.length?this.clone().iadd(u):u.clone().iadd(this||fb)};l.prototype.isub=function(u){if(0!==u.negative){u.negative=0;var B=this.iadd(u);u.negative=1;return B._normSign()}if(0!==(this||fb).negative)return(this||fb).negative=0,this.iadd(u),(this||fb).negative=1,this._normSign();B=this.cmp(u);if(0===B)return(this||fb).negative=0,(this||fb).length=1,(this||fb).words[0]=0,this||fb;if(0<B)var A=this||fb;else A=u,u=this||fb;for(var H=0,F=0;F<
u.length;F++)B=(A.words[F]|0)-(u.words[F]|0)+H,H=B>>26,(this||fb).words[F]=B&67108863;for(;0!==H&&F<A.length;F++)B=(A.words[F]|0)+H,H=B>>26,(this||fb).words[F]=B&67108863;if(0===H&&F<A.length&&A!==(this||fb))for(;F<A.length;F++)(this||fb).words[F]=A.words[F];(this||fb).length=Math.max((this||fb).length,F);A!==(this||fb)&&((this||fb).negative=1);return this._strip()};l.prototype.sub=function(u){return this.clone().isub(u)};var m=function(u,B,A){var H=u.words,F=B.words,L=A.words,U=0,T=H[0]|0,Y=T&8191,
wa=T>>>13,Ga=H[1]|0;T=Ga&8191;var na=Ga>>>13,ea=H[2]|0;Ga=ea&8191;var da=ea>>>13,ia=H[3]|0;ea=ia&8191;var Oa=ia>>>13,Va=H[4]|0;ia=Va&8191;var eb=Va>>>13,Sa=H[5]|0;Va=Sa&8191;var Bb=Sa>>>13,Z=H[6]|0;Sa=Z&8191;var sa=Z>>>13,Da=H[7]|0;Z=Da&8191;var X=Da>>>13,ma=H[8]|0;Da=ma&8191;ma>>>=13;var ta=H[9]|0;H=ta&8191;ta>>>=13;var Pa=F[0]|0,Za=Pa&8191,Zb=Pa>>>13,Pb=F[1]|0;Pa=Pb&8191;var Db=Pb>>>13,sc=F[2]|0;Pb=sc&8191;var wc=sc>>>13,Lc=F[3]|0;sc=Lc&8191;var Xc=Lc>>>13,Qc=F[4]|0;Lc=Qc&8191;var hd=Qc>>>13,Wc=
F[5]|0;Qc=Wc&8191;var ld=Wc>>>13,Yc=F[6]|0;Wc=Yc&8191;var od=Yc>>>13,Vc=F[7]|0;Yc=Vc&8191;var cd=Vc>>>13,W=F[8]|0;Vc=W&8191;W>>>=13;var af=F[9]|0;F=af&8191;af>>>=13;A.negative=u.negative^B.negative;A.length=19;var zc=Math.imul(Y,Za);u=Math.imul(Y,Zb);u=u+Math.imul(wa,Za)|0;B=Math.imul(wa,Zb);var pi=(U+zc|0)+((u&8191)<<13)|0;U=(B+(u>>>13)|0)+(pi>>>26)|0;pi&=67108863;zc=Math.imul(T,Za);u=Math.imul(T,Zb);u=u+Math.imul(na,Za)|0;B=Math.imul(na,Zb);zc=zc+Math.imul(Y,Pa)|0;u=u+Math.imul(Y,Db)|0;u=u+Math.imul(wa,
Pa)|0;B=B+Math.imul(wa,Db)|0;var ad=(U+zc|0)+((u&8191)<<13)|0;U=(B+(u>>>13)|0)+(ad>>>26)|0;ad&=67108863;zc=Math.imul(Ga,Za);u=Math.imul(Ga,Zb);u=u+Math.imul(da,Za)|0;B=Math.imul(da,Zb);zc=zc+Math.imul(T,Pa)|0;u=u+Math.imul(T,Db)|0;u=u+Math.imul(na,Pa)|0;B=B+Math.imul(na,Db)|0;zc=zc+Math.imul(Y,Pb)|0;u=u+Math.imul(Y,wc)|0;u=u+Math.imul(wa,Pb)|0;B=B+Math.imul(wa,wc)|0;var bd=(U+zc|0)+((u&8191)<<13)|0;U=(B+(u>>>13)|0)+(bd>>>26)|0;bd&=67108863;zc=Math.imul(ea,Za);u=Math.imul(ea,Zb);u=u+Math.imul(Oa,Za)|
0;B=Math.imul(Oa,Zb);zc=zc+Math.imul(Ga,Pa)|0;u=u+Math.imul(Ga,Db)|0;u=u+Math.imul(da,Pa)|0;B=B+Math.imul(da,Db)|0;zc=zc+Math.imul(T,Pb)|0;u=u+Math.imul(T,wc)|0;u=u+Math.imul(na,Pb)|0;B=B+Math.imul(na,wc)|0;zc=zc+Math.imul(Y,sc)|0;u=u+Math.imul(Y,Xc)|0;u=u+Math.imul(wa,sc)|0;B=B+Math.imul(wa,Xc)|0;var qi=(U+zc|0)+((u&8191)<<13)|0;U=(B+(u>>>13)|0)+(qi>>>26)|0;qi&=67108863;zc=Math.imul(ia,Za);u=Math.imul(ia,Zb);u=u+Math.imul(eb,Za)|0;B=Math.imul(eb,Zb);zc=zc+Math.imul(ea,Pa)|0;u=u+Math.imul(ea,Db)|
0;u=u+Math.imul(Oa,Pa)|0;B=B+Math.imul(Oa,Db)|0;zc=zc+Math.imul(Ga,Pb)|0;u=u+Math.imul(Ga,wc)|0;u=u+Math.imul(da,Pb)|0;B=B+Math.imul(da,wc)|0;zc=zc+Math.imul(T,sc)|0;u=u+Math.imul(T,Xc)|0;u=u+Math.imul(na,sc)|0;B=B+Math.imul(na,Xc)|0;zc=zc+Math.imul(Y,Lc)|0;u=u+Math.imul(Y,hd)|0;u=u+Math.imul(wa,Lc)|0;B=B+Math.imul(wa,hd)|0;var ei=(U+zc|0)+((u&8191)<<13)|0;U=(B+(u>>>13)|0)+(ei>>>26)|0;ei&=67108863;zc=Math.imul(Va,Za);u=Math.imul(Va,Zb);u=u+Math.imul(Bb,Za)|0;B=Math.imul(Bb,Zb);zc=zc+Math.imul(ia,
Pa)|0;u=u+Math.imul(ia,Db)|0;u=u+Math.imul(eb,Pa)|0;B=B+Math.imul(eb,Db)|0;zc=zc+Math.imul(ea,Pb)|0;u=u+Math.imul(ea,wc)|0;u=u+Math.imul(Oa,Pb)|0;B=B+Math.imul(Oa,wc)|0;zc=zc+Math.imul(Ga,sc)|0;u=u+Math.imul(Ga,Xc)|0;u=u+Math.imul(da,sc)|0;B=B+Math.imul(da,Xc)|0;zc=zc+Math.imul(T,Lc)|0;u=u+Math.imul(T,hd)|0;u=u+Math.imul(na,Lc)|0;B=B+Math.imul(na,hd)|0;zc=zc+Math.imul(Y,Qc)|0;u=u+Math.imul(Y,ld)|0;u=u+Math.imul(wa,Qc)|0;B=B+Math.imul(wa,ld)|0;var Zh=(U+zc|0)+((u&8191)<<13)|0;U=(B+(u>>>13)|0)+(Zh>>>
26)|0;Zh&=67108863;zc=Math.imul(Sa,Za);u=Math.imul(Sa,Zb);u=u+Math.imul(sa,Za)|0;B=Math.imul(sa,Zb);zc=zc+Math.imul(Va,Pa)|0;u=u+Math.imul(Va,Db)|0;u=u+Math.imul(Bb,Pa)|0;B=B+Math.imul(Bb,Db)|0;zc=zc+Math.imul(ia,Pb)|0;u=u+Math.imul(ia,wc)|0;u=u+Math.imul(eb,Pb)|0;B=B+Math.imul(eb,wc)|0;zc=zc+Math.imul(ea,sc)|0;u=u+Math.imul(ea,Xc)|0;u=u+Math.imul(Oa,sc)|0;B=B+Math.imul(Oa,Xc)|0;zc=zc+Math.imul(Ga,Lc)|0;u=u+Math.imul(Ga,hd)|0;u=u+Math.imul(da,Lc)|0;B=B+Math.imul(da,hd)|0;zc=zc+Math.imul(T,Qc)|0;u=
u+Math.imul(T,ld)|0;u=u+Math.imul(na,Qc)|0;B=B+Math.imul(na,ld)|0;zc=zc+Math.imul(Y,Wc)|0;u=u+Math.imul(Y,od)|0;u=u+Math.imul(wa,Wc)|0;B=B+Math.imul(wa,od)|0;var xi=(U+zc|0)+((u&8191)<<13)|0;U=(B+(u>>>13)|0)+(xi>>>26)|0;xi&=67108863;zc=Math.imul(Z,Za);u=Math.imul(Z,Zb);u=u+Math.imul(X,Za)|0;B=Math.imul(X,Zb);zc=zc+Math.imul(Sa,Pa)|0;u=u+Math.imul(Sa,Db)|0;u=u+Math.imul(sa,Pa)|0;B=B+Math.imul(sa,Db)|0;zc=zc+Math.imul(Va,Pb)|0;u=u+Math.imul(Va,wc)|0;u=u+Math.imul(Bb,Pb)|0;B=B+Math.imul(Bb,wc)|0;zc=
zc+Math.imul(ia,sc)|0;u=u+Math.imul(ia,Xc)|0;u=u+Math.imul(eb,sc)|0;B=B+Math.imul(eb,Xc)|0;zc=zc+Math.imul(ea,Lc)|0;u=u+Math.imul(ea,hd)|0;u=u+Math.imul(Oa,Lc)|0;B=B+Math.imul(Oa,hd)|0;zc=zc+Math.imul(Ga,Qc)|0;u=u+Math.imul(Ga,ld)|0;u=u+Math.imul(da,Qc)|0;B=B+Math.imul(da,ld)|0;zc=zc+Math.imul(T,Wc)|0;u=u+Math.imul(T,od)|0;u=u+Math.imul(na,Wc)|0;B=B+Math.imul(na,od)|0;zc=zc+Math.imul(Y,Yc)|0;u=u+Math.imul(Y,cd)|0;u=u+Math.imul(wa,Yc)|0;B=B+Math.imul(wa,cd)|0;var kr=(U+zc|0)+((u&8191)<<13)|0;U=(B+
(u>>>13)|0)+(kr>>>26)|0;kr&=67108863;zc=Math.imul(Da,Za);u=Math.imul(Da,Zb);u=u+Math.imul(ma,Za)|0;B=Math.imul(ma,Zb);zc=zc+Math.imul(Z,Pa)|0;u=u+Math.imul(Z,Db)|0;u=u+Math.imul(X,Pa)|0;B=B+Math.imul(X,Db)|0;zc=zc+Math.imul(Sa,Pb)|0;u=u+Math.imul(Sa,wc)|0;u=u+Math.imul(sa,Pb)|0;B=B+Math.imul(sa,wc)|0;zc=zc+Math.imul(Va,sc)|0;u=u+Math.imul(Va,Xc)|0;u=u+Math.imul(Bb,sc)|0;B=B+Math.imul(Bb,Xc)|0;zc=zc+Math.imul(ia,Lc)|0;u=u+Math.imul(ia,hd)|0;u=u+Math.imul(eb,Lc)|0;B=B+Math.imul(eb,hd)|0;zc=zc+Math.imul(ea,
Qc)|0;u=u+Math.imul(ea,ld)|0;u=u+Math.imul(Oa,Qc)|0;B=B+Math.imul(Oa,ld)|0;zc=zc+Math.imul(Ga,Wc)|0;u=u+Math.imul(Ga,od)|0;u=u+Math.imul(da,Wc)|0;B=B+Math.imul(da,od)|0;zc=zc+Math.imul(T,Yc)|0;u=u+Math.imul(T,cd)|0;u=u+Math.imul(na,Yc)|0;B=B+Math.imul(na,cd)|0;zc=zc+Math.imul(Y,Vc)|0;u=u+Math.imul(Y,W)|0;u=u+Math.imul(wa,Vc)|0;B=B+Math.imul(wa,W)|0;var lr=(U+zc|0)+((u&8191)<<13)|0;U=(B+(u>>>13)|0)+(lr>>>26)|0;lr&=67108863;zc=Math.imul(H,Za);u=Math.imul(H,Zb);u=u+Math.imul(ta,Za)|0;B=Math.imul(ta,
Zb);zc=zc+Math.imul(Da,Pa)|0;u=u+Math.imul(Da,Db)|0;u=u+Math.imul(ma,Pa)|0;B=B+Math.imul(ma,Db)|0;zc=zc+Math.imul(Z,Pb)|0;u=u+Math.imul(Z,wc)|0;u=u+Math.imul(X,Pb)|0;B=B+Math.imul(X,wc)|0;zc=zc+Math.imul(Sa,sc)|0;u=u+Math.imul(Sa,Xc)|0;u=u+Math.imul(sa,sc)|0;B=B+Math.imul(sa,Xc)|0;zc=zc+Math.imul(Va,Lc)|0;u=u+Math.imul(Va,hd)|0;u=u+Math.imul(Bb,Lc)|0;B=B+Math.imul(Bb,hd)|0;zc=zc+Math.imul(ia,Qc)|0;u=u+Math.imul(ia,ld)|0;u=u+Math.imul(eb,Qc)|0;B=B+Math.imul(eb,ld)|0;zc=zc+Math.imul(ea,Wc)|0;u=u+Math.imul(ea,
od)|0;u=u+Math.imul(Oa,Wc)|0;B=B+Math.imul(Oa,od)|0;zc=zc+Math.imul(Ga,Yc)|0;u=u+Math.imul(Ga,cd)|0;u=u+Math.imul(da,Yc)|0;B=B+Math.imul(da,cd)|0;zc=zc+Math.imul(T,Vc)|0;u=u+Math.imul(T,W)|0;u=u+Math.imul(na,Vc)|0;B=B+Math.imul(na,W)|0;zc=zc+Math.imul(Y,F)|0;u=u+Math.imul(Y,af)|0;u=u+Math.imul(wa,F)|0;B=B+Math.imul(wa,af)|0;Y=(U+zc|0)+((u&8191)<<13)|0;U=(B+(u>>>13)|0)+(Y>>>26)|0;Y&=67108863;zc=Math.imul(H,Pa);u=Math.imul(H,Db);u=u+Math.imul(ta,Pa)|0;B=Math.imul(ta,Db);zc=zc+Math.imul(Da,Pb)|0;u=u+
Math.imul(Da,wc)|0;u=u+Math.imul(ma,Pb)|0;B=B+Math.imul(ma,wc)|0;zc=zc+Math.imul(Z,sc)|0;u=u+Math.imul(Z,Xc)|0;u=u+Math.imul(X,sc)|0;B=B+Math.imul(X,Xc)|0;zc=zc+Math.imul(Sa,Lc)|0;u=u+Math.imul(Sa,hd)|0;u=u+Math.imul(sa,Lc)|0;B=B+Math.imul(sa,hd)|0;zc=zc+Math.imul(Va,Qc)|0;u=u+Math.imul(Va,ld)|0;u=u+Math.imul(Bb,Qc)|0;B=B+Math.imul(Bb,ld)|0;zc=zc+Math.imul(ia,Wc)|0;u=u+Math.imul(ia,od)|0;u=u+Math.imul(eb,Wc)|0;B=B+Math.imul(eb,od)|0;zc=zc+Math.imul(ea,Yc)|0;u=u+Math.imul(ea,cd)|0;u=u+Math.imul(Oa,
Yc)|0;B=B+Math.imul(Oa,cd)|0;zc=zc+Math.imul(Ga,Vc)|0;u=u+Math.imul(Ga,W)|0;u=u+Math.imul(da,Vc)|0;B=B+Math.imul(da,W)|0;zc=zc+Math.imul(T,F)|0;u=u+Math.imul(T,af)|0;u=u+Math.imul(na,F)|0;B=B+Math.imul(na,af)|0;T=(U+zc|0)+((u&8191)<<13)|0;U=(B+(u>>>13)|0)+(T>>>26)|0;T&=67108863;zc=Math.imul(H,Pb);u=Math.imul(H,wc);u=u+Math.imul(ta,Pb)|0;B=Math.imul(ta,wc);zc=zc+Math.imul(Da,sc)|0;u=u+Math.imul(Da,Xc)|0;u=u+Math.imul(ma,sc)|0;B=B+Math.imul(ma,Xc)|0;zc=zc+Math.imul(Z,Lc)|0;u=u+Math.imul(Z,hd)|0;u=u+
Math.imul(X,Lc)|0;B=B+Math.imul(X,hd)|0;zc=zc+Math.imul(Sa,Qc)|0;u=u+Math.imul(Sa,ld)|0;u=u+Math.imul(sa,Qc)|0;B=B+Math.imul(sa,ld)|0;zc=zc+Math.imul(Va,Wc)|0;u=u+Math.imul(Va,od)|0;u=u+Math.imul(Bb,Wc)|0;B=B+Math.imul(Bb,od)|0;zc=zc+Math.imul(ia,Yc)|0;u=u+Math.imul(ia,cd)|0;u=u+Math.imul(eb,Yc)|0;B=B+Math.imul(eb,cd)|0;zc=zc+Math.imul(ea,Vc)|0;u=u+Math.imul(ea,W)|0;u=u+Math.imul(Oa,Vc)|0;B=B+Math.imul(Oa,W)|0;zc=zc+Math.imul(Ga,F)|0;u=u+Math.imul(Ga,af)|0;u=u+Math.imul(da,F)|0;B=B+Math.imul(da,af)|
0;Ga=(U+zc|0)+((u&8191)<<13)|0;U=(B+(u>>>13)|0)+(Ga>>>26)|0;Ga&=67108863;zc=Math.imul(H,sc);u=Math.imul(H,Xc);u=u+Math.imul(ta,sc)|0;B=Math.imul(ta,Xc);zc=zc+Math.imul(Da,Lc)|0;u=u+Math.imul(Da,hd)|0;u=u+Math.imul(ma,Lc)|0;B=B+Math.imul(ma,hd)|0;zc=zc+Math.imul(Z,Qc)|0;u=u+Math.imul(Z,ld)|0;u=u+Math.imul(X,Qc)|0;B=B+Math.imul(X,ld)|0;zc=zc+Math.imul(Sa,Wc)|0;u=u+Math.imul(Sa,od)|0;u=u+Math.imul(sa,Wc)|0;B=B+Math.imul(sa,od)|0;zc=zc+Math.imul(Va,Yc)|0;u=u+Math.imul(Va,cd)|0;u=u+Math.imul(Bb,Yc)|0;
B=B+Math.imul(Bb,cd)|0;zc=zc+Math.imul(ia,Vc)|0;u=u+Math.imul(ia,W)|0;u=u+Math.imul(eb,Vc)|0;B=B+Math.imul(eb,W)|0;zc=zc+Math.imul(ea,F)|0;u=u+Math.imul(ea,af)|0;u=u+Math.imul(Oa,F)|0;B=B+Math.imul(Oa,af)|0;ea=(U+zc|0)+((u&8191)<<13)|0;U=(B+(u>>>13)|0)+(ea>>>26)|0;ea&=67108863;zc=Math.imul(H,Lc);u=Math.imul(H,hd);u=u+Math.imul(ta,Lc)|0;B=Math.imul(ta,hd);zc=zc+Math.imul(Da,Qc)|0;u=u+Math.imul(Da,ld)|0;u=u+Math.imul(ma,Qc)|0;B=B+Math.imul(ma,ld)|0;zc=zc+Math.imul(Z,Wc)|0;u=u+Math.imul(Z,od)|0;u=u+
Math.imul(X,Wc)|0;B=B+Math.imul(X,od)|0;zc=zc+Math.imul(Sa,Yc)|0;u=u+Math.imul(Sa,cd)|0;u=u+Math.imul(sa,Yc)|0;B=B+Math.imul(sa,cd)|0;zc=zc+Math.imul(Va,Vc)|0;u=u+Math.imul(Va,W)|0;u=u+Math.imul(Bb,Vc)|0;B=B+Math.imul(Bb,W)|0;zc=zc+Math.imul(ia,F)|0;u=u+Math.imul(ia,af)|0;u=u+Math.imul(eb,F)|0;B=B+Math.imul(eb,af)|0;ia=(U+zc|0)+((u&8191)<<13)|0;U=(B+(u>>>13)|0)+(ia>>>26)|0;ia&=67108863;zc=Math.imul(H,Qc);u=Math.imul(H,ld);u=u+Math.imul(ta,Qc)|0;B=Math.imul(ta,ld);zc=zc+Math.imul(Da,Wc)|0;u=u+Math.imul(Da,
od)|0;u=u+Math.imul(ma,Wc)|0;B=B+Math.imul(ma,od)|0;zc=zc+Math.imul(Z,Yc)|0;u=u+Math.imul(Z,cd)|0;u=u+Math.imul(X,Yc)|0;B=B+Math.imul(X,cd)|0;zc=zc+Math.imul(Sa,Vc)|0;u=u+Math.imul(Sa,W)|0;u=u+Math.imul(sa,Vc)|0;B=B+Math.imul(sa,W)|0;zc=zc+Math.imul(Va,F)|0;u=u+Math.imul(Va,af)|0;u=u+Math.imul(Bb,F)|0;B=B+Math.imul(Bb,af)|0;Va=(U+zc|0)+((u&8191)<<13)|0;U=(B+(u>>>13)|0)+(Va>>>26)|0;Va&=67108863;zc=Math.imul(H,Wc);u=Math.imul(H,od);u=u+Math.imul(ta,Wc)|0;B=Math.imul(ta,od);zc=zc+Math.imul(Da,Yc)|0;
u=u+Math.imul(Da,cd)|0;u=u+Math.imul(ma,Yc)|0;B=B+Math.imul(ma,cd)|0;zc=zc+Math.imul(Z,Vc)|0;u=u+Math.imul(Z,W)|0;u=u+Math.imul(X,Vc)|0;B=B+Math.imul(X,W)|0;zc=zc+Math.imul(Sa,F)|0;u=u+Math.imul(Sa,af)|0;u=u+Math.imul(sa,F)|0;B=B+Math.imul(sa,af)|0;Sa=(U+zc|0)+((u&8191)<<13)|0;U=(B+(u>>>13)|0)+(Sa>>>26)|0;Sa&=67108863;zc=Math.imul(H,Yc);u=Math.imul(H,cd);u=u+Math.imul(ta,Yc)|0;B=Math.imul(ta,cd);zc=zc+Math.imul(Da,Vc)|0;u=u+Math.imul(Da,W)|0;u=u+Math.imul(ma,Vc)|0;B=B+Math.imul(ma,W)|0;zc=zc+Math.imul(Z,
F)|0;u=u+Math.imul(Z,af)|0;u=u+Math.imul(X,F)|0;B=B+Math.imul(X,af)|0;Z=(U+zc|0)+((u&8191)<<13)|0;U=(B+(u>>>13)|0)+(Z>>>26)|0;Z&=67108863;zc=Math.imul(H,Vc);u=Math.imul(H,W);u=u+Math.imul(ta,Vc)|0;B=Math.imul(ta,W);zc=zc+Math.imul(Da,F)|0;u=u+Math.imul(Da,af)|0;u=u+Math.imul(ma,F)|0;B=B+Math.imul(ma,af)|0;Da=(U+zc|0)+((u&8191)<<13)|0;U=(B+(u>>>13)|0)+(Da>>>26)|0;Da&=67108863;zc=Math.imul(H,F);u=Math.imul(H,af);u=u+Math.imul(ta,F)|0;B=Math.imul(ta,af);wa=(U+zc|0)+((u&8191)<<13)|0;U=(B+(u>>>13)|0)+
(wa>>>26)|0;L[0]=pi;L[1]=ad;L[2]=bd;L[3]=qi;L[4]=ei;L[5]=Zh;L[6]=xi;L[7]=kr;L[8]=lr;L[9]=Y;L[10]=T;L[11]=Ga;L[12]=ea;L[13]=ia;L[14]=Va;L[15]=Sa;L[16]=Z;L[17]=Da;L[18]=wa&67108863;0!==U&&(L[19]=U,A.length++);return A};Math.imul||(m=e);l.prototype.mulTo=function(u,B){var A=(this||fb).length+u.length;return 10===(this||fb).length&&10===u.length?m(this||fb,u,B):63>A?e(this||fb,u,B):n(this||fb,u,B)};l.prototype.mul=function(u){var B=new l(null);B.words=Array((this||fb).length+u.length);return this.mulTo(u,
B)};l.prototype.mulf=function(u){var B=new l(null);B.words=Array((this||fb).length+u.length);return n(this||fb,u,B)};l.prototype.imul=function(u){return this.clone().mulTo(u,this||fb)};l.prototype.imuln=function(u){var B=0>u;B&&(u=-u);k("number"===typeof u);k(67108864>u);for(var A=0,H=0;H<(this||fb).length;H++){var F=((this||fb).words[H]|0)*u,L=(F&67108863)+(A&67108863);A>>=26;A+=F/67108864|0;A+=L>>>26;(this||fb).words[H]=L&67108863}0!==A&&((this||fb).words[H]=A,(this||fb).length++);return B?this.ineg():
this||fb};l.prototype.muln=function(u){return this.clone().imuln(u)};l.prototype.sqr=function(){return this.mul(this||fb)};l.prototype.isqr=function(){return this.imul(this.clone())};l.prototype.pow=function(u){for(var B=Array(u.bitLength()),A=0;A<B.length;A++)B[A]=u.words[A/26|0]>>>A%26&1;if(0===B.length)return new l(1);u=this||fb;for(A=0;A<B.length&&0===B[A];A++,u=u.sqr());if(++A<B.length)for(var H=u.sqr();A<B.length;A++,H=H.sqr())0!==B[A]&&(u=u.mul(H));return u};l.prototype.iushln=function(u){k("number"===
typeof u&&0<=u);var B=u%26;u=(u-B)/26;var A=67108863>>>26-B<<26-B,H;if(0!==B){var F=0;for(H=0;H<(this||fb).length;H++){var L=(this||fb).words[H]&A;(this||fb).words[H]=((this||fb).words[H]|0)-L<<B|F;F=L>>>26-B}F&&((this||fb).words[H]=F,(this||fb).length++)}if(0!==u){for(H=(this||fb).length-1;0<=H;H--)(this||fb).words[H+u]=(this||fb).words[H];for(H=0;H<u;H++)(this||fb).words[H]=0;(this||fb).length+=u}return this._strip()};l.prototype.ishln=function(u){k(0===(this||fb).negative);return this.iushln(u)};
l.prototype.iushrn=function(u,B,A){k("number"===typeof u&&0<=u);var H=u%26,F=Math.min((u-H)/26,(this||fb).length);u=67108863^67108863>>>H<<H;B=Math.max(0,(B?(B-B%26)/26:0)-F);if(A){for(var L=0;L<F;L++)A.words[L]=(this||fb).words[L];A.length=F}if(0!==F)if((this||fb).length>F)for((this||fb).length-=F,L=0;L<(this||fb).length;L++)(this||fb).words[L]=(this||fb).words[L+F];else(this||fb).words[0]=0,(this||fb).length=1;F=0;for(L=(this||fb).length-1;0<=L&&(0!==F||L>=B);L--){var U=(this||fb).words[L]|0;(this||
fb).words[L]=F<<26-H|U>>>H;F=U&u}A&&0!==F&&(A.words[A.length++]=F);0===(this||fb).length&&((this||fb).words[0]=0,(this||fb).length=1);return this._strip()};l.prototype.ishrn=function(u,B,A){k(0===(this||fb).negative);return this.iushrn(u,B,A)};l.prototype.shln=function(u){return this.clone().ishln(u)};l.prototype.ushln=function(u){return this.clone().iushln(u)};l.prototype.shrn=function(u){return this.clone().ishrn(u)};l.prototype.ushrn=function(u){return this.clone().iushrn(u)};l.prototype.testn=
function(u){k("number"===typeof u&&0<=u);var B=u%26;u=(u-B)/26;return(this||fb).length<=u?!1:!!((this||fb).words[u]&1<<B)};l.prototype.imaskn=function(u){k("number"===typeof u&&0<=u);var B=u%26;u=(u-B)/26;k(0===(this||fb).negative,"imaskn works only with positive numbers");if((this||fb).length<=u)return this||fb;0!==B&&u++;(this||fb).length=Math.min(u,(this||fb).length);0!==B&&((this||fb).words[(this||fb).length-1]&=67108863^67108863>>>B<<B);return this._strip()};l.prototype.maskn=function(u){return this.clone().imaskn(u)};
l.prototype.iaddn=function(u){k("number"===typeof u);k(67108864>u);if(0>u)return this.isubn(-u);if(0!==(this||fb).negative){if(1===(this||fb).length&&((this||fb).words[0]|0)<=u)return(this||fb).words[0]=u-((this||fb).words[0]|0),(this||fb).negative=0,this||fb;(this||fb).negative=0;this.isubn(u);(this||fb).negative=1;return this||fb}return this._iaddn(u)};l.prototype._iaddn=function(u){(this||fb).words[0]+=u;for(u=0;u<(this||fb).length&&67108864<=(this||fb).words[u];u++)(this||fb).words[u]-=67108864,
u===(this||fb).length-1?(this||fb).words[u+1]=1:(this||fb).words[u+1]++;(this||fb).length=Math.max((this||fb).length,u+1);return this||fb};l.prototype.isubn=function(u){k("number"===typeof u);k(67108864>u);if(0>u)return this.iaddn(-u);if(0!==(this||fb).negative)return(this||fb).negative=0,this.iaddn(u),(this||fb).negative=1,this||fb;(this||fb).words[0]-=u;if(1===(this||fb).length&&0>(this||fb).words[0])(this||fb).words[0]=-(this||fb).words[0],(this||fb).negative=1;else for(u=0;u<(this||fb).length&&
0>(this||fb).words[u];u++)(this||fb).words[u]+=67108864,--(this||fb).words[u+1];return this._strip()};l.prototype.addn=function(u){return this.clone().iaddn(u)};l.prototype.subn=function(u){return this.clone().isubn(u)};l.prototype.iabs=function(){(this||fb).negative=0;return this||fb};l.prototype.abs=function(){return this.clone().iabs()};l.prototype._ishlnsubmul=function(u,B,A){var H;this._expand(u.length+A);var F=0;for(H=0;H<u.length;H++){var L=((this||fb).words[H+A]|0)+F;F=(u.words[H]|0)*B;L-=
F&67108863;F=(L>>26)-(F/67108864|0);(this||fb).words[H+A]=L&67108863}for(;H<(this||fb).length-A;H++)L=((this||fb).words[H+A]|0)+F,F=L>>26,(this||fb).words[H+A]=L&67108863;if(0===F)return this._strip();k(-1===F);for(H=F=0;H<(this||fb).length;H++)L=-((this||fb).words[H]|0)+F,F=L>>26,(this||fb).words[H]=L&67108863;(this||fb).negative=1;return this._strip()};l.prototype._wordDiv=function(u,B){var A=this.clone(),H=u,F=H.words[H.length-1]|0;u=26-this._countBits(F);0!==u&&(H=H.ushln(u),A.iushln(u),F=H.words[H.length-
1]|0);var L=A.length-H.length;if("mod"!==B){var U=new l(null);U.length=L+1;U.words=Array(U.length);for(var T=0;T<U.length;T++)U.words[T]=0}T=A.clone()._ishlnsubmul(H,1,L);0===T.negative&&(A=T,U&&(U.words[L]=1));for(--L;0<=L;L--){T=67108864*(A.words[H.length+L]|0)+(A.words[H.length+L-1]|0);T=Math.min(T/F|0,67108863);for(A._ishlnsubmul(H,T,L);0!==A.negative;)T--,A.negative=0,A._ishlnsubmul(H,1,L),A.isZero()||(A.negative^=1);U&&(U.words[L]=T)}U&&U._strip();A._strip();"div"!==B&&0!==u&&A.iushrn(u);return{div:U||
null,mod:A}};l.prototype.divmod=function(u,B,A){k(!u.isZero());if(this.isZero())return{div:new l(0),mod:new l(0)};var H;if(0!==(this||fb).negative&&0===u.negative){var F=this.neg().divmod(u,B);"mod"!==B&&(H=F.div.neg());if("div"!==B){var L=F.mod.neg();A&&0!==L.negative&&L.iadd(u)}return{div:H,mod:L}}return 0===(this||fb).negative&&0!==u.negative?(F=this.divmod(u.neg(),B),"mod"!==B&&(H=F.div.neg()),{div:H,mod:F.mod}):0!==((this||fb).negative&u.negative)?(F=this.neg().divmod(u.neg(),B),"div"!==B&&(L=
F.mod.neg(),A&&0!==L.negative&&L.isub(u)),{div:F.div,mod:L}):u.length>(this||fb).length||0>this.cmp(u)?{div:new l(0),mod:this||fb}:1===u.length?"div"===B?{div:this.divn(u.words[0]),mod:null}:"mod"===B?{div:null,mod:new l(this.modrn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new l(this.modrn(u.words[0]))}:this._wordDiv(u,B)};l.prototype.div=function(u){return this.divmod(u,"div",!1).div};l.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod};l.prototype.umod=function(u){return this.divmod(u,
"mod",!0).mod};l.prototype.divRound=function(u){var B=this.divmod(u);if(B.mod.isZero())return B.div;var A=0!==B.div.negative?B.mod.isub(u):B.mod,H=u.ushrn(1);u=u.andln(1);A=A.cmp(H);return 0>A||1===u&&0===A?B.div:0!==B.div.negative?B.div.isubn(1):B.div.iaddn(1)};l.prototype.modrn=function(u){var B=0>u;B&&(u=-u);k(67108863>=u);for(var A=67108864%u,H=0,F=(this||fb).length-1;0<=F;F--)H=(A*H+((this||fb).words[F]|0))%u;return B?-H:H};l.prototype.modn=function(u){return this.modrn(u)};l.prototype.idivn=
function(u){var B=0>u;B&&(u=-u);k(67108863>=u);for(var A=0,H=(this||fb).length-1;0<=H;H--)A=((this||fb).words[H]|0)+67108864*A,(this||fb).words[H]=A/u|0,A%=u;this._strip();return B?this.ineg():this||fb};l.prototype.divn=function(u){return this.clone().idivn(u)};l.prototype.egcd=function(u){k(0===u.negative);k(!u.isZero());var B=this||fb,A=u.clone();B=0!==B.negative?B.umod(u):B.clone();u=new l(1);for(var H=new l(0),F=new l(0),L=new l(1),U=0;B.isEven()&&A.isEven();)B.iushrn(1),A.iushrn(1),++U;for(var T=
A.clone(),Y=B.clone();!B.isZero();){for(var wa=0,Ga=1;0===(B.words[0]&Ga)&&26>wa;++wa,Ga<<=1);if(0<wa)for(B.iushrn(wa);0<wa--;){if(u.isOdd()||H.isOdd())u.iadd(T),H.isub(Y);u.iushrn(1);H.iushrn(1)}wa=0;for(Ga=1;0===(A.words[0]&Ga)&&26>wa;++wa,Ga<<=1);if(0<wa)for(A.iushrn(wa);0<wa--;){if(F.isOdd()||L.isOdd())F.iadd(T),L.isub(Y);F.iushrn(1);L.iushrn(1)}0<=B.cmp(A)?(B.isub(A),u.isub(F),H.isub(L)):(A.isub(B),F.isub(u),L.isub(H))}return{a:F,b:L,gcd:A.iushln(U)}};l.prototype._invmp=function(u){k(0===u.negative);
k(!u.isZero());var B=this||fb,A=u.clone();B=0!==B.negative?B.umod(u):B.clone();for(var H=new l(1),F=new l(0),L=A.clone();0<B.cmpn(1)&&0<A.cmpn(1);){for(var U=0,T=1;0===(B.words[0]&T)&&26>U;++U,T<<=1);if(0<U)for(B.iushrn(U);0<U--;)H.isOdd()&&H.iadd(L),H.iushrn(1);U=0;for(T=1;0===(A.words[0]&T)&&26>U;++U,T<<=1);if(0<U)for(A.iushrn(U);0<U--;)F.isOdd()&&F.iadd(L),F.iushrn(1);0<=B.cmp(A)?(B.isub(A),H.isub(F)):(A.isub(B),F.isub(H))}B=0===B.cmpn(1)?H:F;0>B.cmpn(0)&&B.iadd(u);return B};l.prototype.gcd=function(u){if(this.isZero())return u.abs();
if(u.isZero())return this.abs();var B=this.clone();u=u.clone();B.negative=0;for(var A=u.negative=0;B.isEven()&&u.isEven();A++)B.iushrn(1),u.iushrn(1);do{for(;B.isEven();)B.iushrn(1);for(;u.isEven();)u.iushrn(1);var H=B.cmp(u);if(0>H)H=B,B=u,u=H;else if(0===H||0===u.cmpn(1))break;B.isub(u)}while(1);return u.iushln(A)};l.prototype.invm=function(u){return this.egcd(u).a.umod(u)};l.prototype.isEven=function(){return 0===((this||fb).words[0]&1)};l.prototype.isOdd=function(){return 1===((this||fb).words[0]&
1)};l.prototype.andln=function(u){return(this||fb).words[0]&u};l.prototype.bincn=function(u){k("number"===typeof u);var B=u%26;u=(u-B)/26;B=1<<B;if((this||fb).length<=u)return this._expand(u+1),(this||fb).words[u]|=B,this||fb;for(;0!==B&&u<(this||fb).length;u++){var A=(this||fb).words[u]|0;A+=B;B=A>>>26;A&=67108863;(this||fb).words[u]=A}0!==B&&((this||fb).words[u]=B,(this||fb).length++);return this||fb};l.prototype.isZero=function(){return 1===(this||fb).length&&0===(this||fb).words[0]};l.prototype.cmpn=
function(u){var B=0>u;if(0!==(this||fb).negative&&!B)return-1;if(0===(this||fb).negative&&B)return 1;this._strip();1<(this||fb).length?u=1:(B&&(u=-u),k(67108863>=u,"Number is too big"),B=(this||fb).words[0]|0,u=B===u?0:B<u?-1:1);return 0!==(this||fb).negative?-u|0:u};l.prototype.cmp=function(u){if(0!==(this||fb).negative&&0===u.negative)return-1;if(0===(this||fb).negative&&0!==u.negative)return 1;u=this.ucmp(u);return 0!==(this||fb).negative?-u|0:u};l.prototype.ucmp=function(u){if((this||fb).length>
u.length)return 1;if((this||fb).length<u.length)return-1;for(var B=0,A=(this||fb).length-1;0<=A;A--){var H=(this||fb).words[A]|0,F=u.words[A]|0;if(H!==F){H<F?B=-1:H>F&&(B=1);break}}return B};l.prototype.gtn=function(u){return 1===this.cmpn(u)};l.prototype.gt=function(u){return 1===this.cmp(u)};l.prototype.gten=function(u){return 0<=this.cmpn(u)};l.prototype.gte=function(u){return 0<=this.cmp(u)};l.prototype.ltn=function(u){return-1===this.cmpn(u)};l.prototype.lt=function(u){return-1===this.cmp(u)};
l.prototype.lten=function(u){return 0>=this.cmpn(u)};l.prototype.lte=function(u){return 0>=this.cmp(u)};l.prototype.eqn=function(u){return 0===this.cmpn(u)};l.prototype.eq=function(u){return 0===this.cmp(u)};l.red=function(u){return new E(u)};l.prototype.toRed=function(u){k(!(this||fb).red,"Already a number in reduction context");k(0===(this||fb).negative,"red works only with positives");return u.convertTo(this||fb)._forceRed(u)};l.prototype.fromRed=function(){k((this||fb).red,"fromRed works only with numbers in reduction context");
return(this||fb).red.convertFrom(this||fb)};l.prototype._forceRed=function(u){(this||fb).red=u;return this||fb};l.prototype.forceRed=function(u){k(!(this||fb).red,"Already a number in reduction context");return this._forceRed(u)};l.prototype.redAdd=function(u){k((this||fb).red,"redAdd works only with red numbers");return(this||fb).red.add(this||fb,u)};l.prototype.redIAdd=function(u){k((this||fb).red,"redIAdd works only with red numbers");return(this||fb).red.iadd(this||fb,u)};l.prototype.redSub=function(u){k((this||
fb).red,"redSub works only with red numbers");return(this||fb).red.sub(this||fb,u)};l.prototype.redISub=function(u){k((this||fb).red,"redISub works only with red numbers");return(this||fb).red.isub(this||fb,u)};l.prototype.redShl=function(u){k((this||fb).red,"redShl works only with red numbers");return(this||fb).red.shl(this||fb,u)};l.prototype.redMul=function(u){k((this||fb).red,"redMul works only with red numbers");(this||fb).red._verify2(this||fb,u);return(this||fb).red.mul(this||fb,u)};l.prototype.redIMul=
function(u){k((this||fb).red,"redMul works only with red numbers");(this||fb).red._verify2(this||fb,u);return(this||fb).red.imul(this||fb,u)};l.prototype.redSqr=function(){k((this||fb).red,"redSqr works only with red numbers");(this||fb).red._verify1(this||fb);return(this||fb).red.sqr(this||fb)};l.prototype.redISqr=function(){k((this||fb).red,"redISqr works only with red numbers");(this||fb).red._verify1(this||fb);return(this||fb).red.isqr(this||fb)};l.prototype.redSqrt=function(){k((this||fb).red,
"redSqrt works only with red numbers");(this||fb).red._verify1(this||fb);return(this||fb).red.sqrt(this||fb)};l.prototype.redInvm=function(){k((this||fb).red,"redInvm works only with red numbers");(this||fb).red._verify1(this||fb);return(this||fb).red.invm(this||fb)};l.prototype.redNeg=function(){k((this||fb).red,"redNeg works only with red numbers");(this||fb).red._verify1(this||fb);return(this||fb).red.neg(this||fb)};l.prototype.redPow=function(u){k((this||fb).red&&!u.red,"redPow(normalNum)");(this||
fb).red._verify1(this||fb);return(this||fb).red.pow(this||fb,u)};var t={k256:null,p224:null,p192:null,p25519:null};q.prototype._tmp=function(){var u=new l(null);u.words=Array(Math.ceil((this||fb).n/13));return u};q.prototype.ireduce=function(u){do{this.split(u,(this||fb).tmp);u=this.imulK(u);u=u.iadd((this||fb).tmp);var B=u.bitLength()}while(B>(this||fb).n);B=B<(this||fb).n?-1:u.ucmp((this||fb).p);0===B?(u.words[0]=0,u.length=1):0<B?u.isub((this||fb).p):void 0!==u.strip?u.strip():u._strip();return u};
q.prototype.split=function(u,B){u.iushrn((this||fb).n,0,B)};q.prototype.imulK=function(u){return u.imul((this||fb).k)};f(r,q);r.prototype.split=function(u,B){for(var A=Math.min(u.length,9),H=0;H<A;H++)B.words[H]=u.words[H];B.length=A;if(9>=u.length)u.words[0]=0,u.length=1;else{A=u.words[9];B.words[B.length++]=A&4194303;for(H=10;H<u.length;H++)B=u.words[H]|0,u.words[H-10]=(B&4194303)<<4|A>>>22,A=B;A>>>=22;u.words[H-10]=A;u.length=0===A&&10<u.length?u.length-10:u.length-9}};r.prototype.imulK=function(u){u.words[u.length]=
0;u.words[u.length+1]=0;u.length+=2;for(var B=0,A=0;A<u.length;A++){var H=u.words[A]|0;B+=977*H;u.words[A]=B&67108863;B=64*H+(B/67108864|0)}0===u.words[u.length-1]&&(u.length--,0===u.words[u.length-1]&&u.length--);return u};f(v,q);f(y,q);f(D,q);D.prototype.imulK=function(u){for(var B=0,A=0;A<u.length;A++){B=19*(u.words[A]|0)+B;var H=B&67108863;B>>>=26;u.words[A]=H}0!==B&&(u.words[u.length++]=B);return u};l._prime=function(u){if(t[u])return t[u];if("k256"===u)var B=new r;else if("p224"===u)B=new v;
else if("p192"===u)B=new y;else if("p25519"===u)B=new D;else throw Error("Unknown prime "+u);return t[u]=B};E.prototype._verify1=function(u){k(0===u.negative,"red works only with positives");k(u.red,"red works only with red numbers")};E.prototype._verify2=function(u,B){k(0===(u.negative|B.negative),"red works only with positives");k(u.red&&u.red===B.red,"red works only with red numbers")};E.prototype.imod=function(u){if((this||fb).prime)return(this||fb).prime.ireduce(u)._forceRed(this||fb);h(u,u.umod((this||
fb).m)._forceRed(this||fb));return u};E.prototype.neg=function(u){return u.isZero()?u.clone():(this||fb).m.sub(u)._forceRed(this||fb)};E.prototype.add=function(u,B){this._verify2(u,B);u=u.add(B);0<=u.cmp((this||fb).m)&&u.isub((this||fb).m);return u._forceRed(this||fb)};E.prototype.iadd=function(u,B){this._verify2(u,B);u=u.iadd(B);0<=u.cmp((this||fb).m)&&u.isub((this||fb).m);return u};E.prototype.sub=function(u,B){this._verify2(u,B);u=u.sub(B);0>u.cmpn(0)&&u.iadd((this||fb).m);return u._forceRed(this||
fb)};E.prototype.isub=function(u,B){this._verify2(u,B);u=u.isub(B);0>u.cmpn(0)&&u.iadd((this||fb).m);return u};E.prototype.shl=function(u,B){this._verify1(u);return this.imod(u.ushln(B))};E.prototype.imul=function(u,B){this._verify2(u,B);return this.imod(u.imul(B))};E.prototype.mul=function(u,B){this._verify2(u,B);return this.imod(u.mul(B))};E.prototype.isqr=function(u){return this.imul(u,u.clone())};E.prototype.sqr=function(u){return this.mul(u,u)};E.prototype.sqrt=function(u){if(u.isZero())return u.clone();
var B=(this||fb).m.andln(3);k(1===B%2);if(3===B)return B=(this||fb).m.add(new l(1)).iushrn(2),this.pow(u,B);for(var A=(this||fb).m.subn(1),H=0;!A.isZero()&&0===A.andln(1);)H++,A.iushrn(1);k(!A.isZero());B=(new l(1)).toRed(this||fb);var F=B.redNeg(),L=(this||fb).m.subn(1).iushrn(1),U=(this||fb).m.bitLength();for(U=(new l(2*U*U)).toRed(this||fb);0!==this.pow(U,L).cmp(F);)U.redIAdd(F);L=this.pow(U,A);F=this.pow(u,A.addn(1).iushrn(1));u=this.pow(u,A);for(A=H;0!==u.cmp(B);){U=u;for(H=0;0!==U.cmp(B);H++)U=
U.redSqr();k(H<A);L=this.pow(L,(new l(1)).iushln(A-H-1));F=F.redMul(L);L=L.redSqr();u=u.redMul(L);A=H}return F};E.prototype.invm=function(u){u=u._invmp((this||fb).m);return 0!==u.negative?(u.negative=0,this.imod(u).redNeg()):this.imod(u)};E.prototype.pow=function(u,B){if(B.isZero())return(new l(1)).toRed(this||fb);if(0===B.cmpn(1))return u.clone();var A=Array(16);A[0]=(new l(1)).toRed(this||fb);A[1]=u;for(var H=2;H<A.length;H++)A[H]=this.mul(A[H-1],u);u=A[0];var F=0,L=0,U=B.bitLength()%26;0===U&&
(U=26);for(H=B.length-1;0<=H;H--){var T=B.words[H];for(--U;0<=U;U--){var Y=T>>U&1;u!==A[0]&&(u=this.sqr(u));if(0===Y&&0===F)L=0;else if(F<<=1,F|=Y,L++,4===L||0===H&&0===U)u=this.mul(u,A[F]),F=L=0}U=26}return u};E.prototype.convertTo=function(u){var B=u.umod((this||fb).m);return B===u?B.clone():B};E.prototype.convertFrom=function(u){u=u.clone();u.red=null;return u};l.mont=function(u){return new I(u)};f(I,E);I.prototype.convertTo=function(u){return this.imod(u.ushln((this||fb).shift))};I.prototype.convertFrom=
function(u){u=this.imod(u.mul((this||fb).rinv));u.red=null;return u};I.prototype.imul=function(u,B){if(u.isZero()||B.isZero())return u.words[0]=0,u.length=1,u;u=u.imul(B);B=u.maskn((this||fb).shift).mul((this||fb).minv).imaskn((this||fb).shift).mul((this||fb).m);B=u=u.isub(B).iushrn((this||fb).shift);0<=u.cmp((this||fb).m)?B=u.isub((this||fb).m):0>u.cmpn(0)&&(B=u.iadd((this||fb).m));return B._forceRed(this||fb)};I.prototype.mul=function(u,B){if(u.isZero()||B.isZero())return(new l(0))._forceRed(this||
fb);u=u.mul(B);B=u.maskn((this||fb).shift).mul((this||fb).minv).imaskn((this||fb).shift).mul((this||fb).m);B=u=u.isub(B).iushrn((this||fb).shift);0<=u.cmp((this||fb).m)?B=u.isub((this||fb).m):0>u.cmpn(0)&&(B=u.iadd((this||fb).m));return B._forceRed(this||fb)};I.prototype.invm=function(u){return this.imod(u._invmp((this||fb).m).mul((this||fb).r2))._forceRed(this||fb)}})(ZO,A3);return ZO.exports}function $O(){function g(p){var b=p.modulus.byteLength();do var d=new f(l(b));while(0<=d.cmp(p.modulus)||
!d.umod(p.prime1)||!d.umod(p.prime2));return d}function c(p,b){var d=g(b);var h=d.toRed(f.mont(b.modulus)).redPow(new f(b.publicExponent)).fromRed();d=d.invm(b.modulus);var a=b.modulus.byteLength();p=(new f(p)).mul(h).umod(b.modulus);var e=p.toRed(f.mont(b.prime1)),n=p.toRed(f.mont(b.prime2));p=b.coefficient;h=b.prime1;var q=b.prime2;e=e.redPow(b.exponent1).fromRed();n=n.redPow(b.exponent2).fromRed();p=e.isub(n).imul(p).umod(h).imul(q);return n.iadd(p).imul(d).umod(b.modulus).toArrayLike(k,"be",a)}
if(B3)return C3;B3=!0;var k=Yg.Buffer,f=YO(),l=zx();c.getr=g;return C3=c}function mr(){if(D3)return aP.exports;D3=!0;(function(g,c){function k(m,t){if(!m)throw Error(t||"Assertion failed");}function f(m,t){m.super_=t;var u=function(){};u.prototype=t.prototype;m.prototype=new u;m.prototype.constructor=m}function l(m,t,u){if(l.isBN(m))return m;(this||kb).negative=0;(this||kb).words=null;(this||kb).length=0;(this||kb).red=null;if(null!==m){if("le"===t||"be"===t)u=t,t=10;this._init(m||0,t||10,u||"be")}}
function p(m,t){m=m.charCodeAt(t);return 65<=m&&70>=m?m-55:97<=m&&102>=m?m-87:m-48&15}function b(m,t,u){var B=p(m,u);u-1>=t&&(B|=p(m,u-1)<<4);return B}function d(m,t,u,B){var A=0;for(u=Math.min(m.length,u);t<u;t++){var H=m.charCodeAt(t)-48;A*=B;A=49<=H?A+(H-49+10):17<=H?A+(H-17+10):A+H}return A}function h(m,t,u){u.negative=t.negative^m.negative;var B=m.length+t.length|0;u.length=B;B=B-1|0;var A=m.words[0]|0,H=t.words[0]|0;A*=H;var F=A/67108864|0;u.words[0]=A&67108863;for(var L=1;L<B;L++){var U=F>>>
26,T=F&67108863;F=Math.min(L,t.length-1);for(var Y=Math.max(0,L-m.length+1);Y<=F;Y++)A=m.words[L-Y|0]|0,H=t.words[Y]|0,A=A*H+T,U+=A/67108864|0,T=A&67108863;u.words[L]=T|0;F=U|0}0!==F?u.words[L]=F|0:u.length--;return u.strip()}function a(m,t){(this||kb).x=m;(this||kb).y=t}function e(m,t){(this||kb).name=m;(this||kb).p=new l(t,16);(this||kb).n=(this||kb).p.bitLength();(this||kb).k=(new l(1)).iushln((this||kb).n).isub((this||kb).p);(this||kb).tmp=this._tmp()}function n(){e.call(this||kb,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}
function q(){e.call(this||kb,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function r(){e.call(this||kb,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){e.call(this||kb,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function y(m){"string"===typeof m?(m=l._prime(m),(this||kb).m=m.p,(this||kb).prime=m):(k(m.gtn(1),"modulus must be greater than 1"),(this||kb).m=m,(this||kb).prime=null)}function D(m){y.call(this||kb,
m);(this||kb).shift=(this||kb).m.bitLength();0!==(this||kb).shift%26&&((this||kb).shift+=26-(this||kb).shift%26);(this||kb).r=(new l(1)).iushln((this||kb).shift);(this||kb).r2=this.imod((this||kb).r.sqr());(this||kb).rinv=(this||kb).r._invmp((this||kb).m);(this||kb).minv=(this||kb).rinv.mul((this||kb).r).isubn(1).div((this||kb).m);(this||kb).minv=(this||kb).minv.umod((this||kb).r);(this||kb).minv=(this||kb).r.sub((this||kb).minv)}"object"===typeof g?g.exports=l:c.BN=l;l.BN=l;l.wordSize=26;try{var E=
"undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:Yg.Buffer}catch(m){}l.isBN=function(m){return m instanceof l?!0:null!==m&&"object"===typeof m&&m.constructor.wordSize===l.wordSize&&Array.isArray(m.words)};l.max=function(m,t){return 0<m.cmp(t)?m:t};l.min=function(m,t){return 0>m.cmp(t)?m:t};l.prototype._init=function(m,t,u){if("number"===typeof m)return this._initNumber(m,t,u);if("object"===typeof m)return this._initArray(m,t,u);"hex"===t&&(t=16);k(t===(t|0)&&2<=t&&36>=
t);m=m.toString().replace(/\s+/g,"");var B=0;"-"===m[0]&&(B++,(this||kb).negative=1);B<m.length&&(16===t?this._parseHex(m,B,u):(this._parseBase(m,t,B),"le"===u&&this._initArray(this.toArray(),t,u)))};l.prototype._initNumber=function(m,t,u){0>m&&((this||kb).negative=1,m=-m);67108864>m?((this||kb).words=[m&67108863],(this||kb).length=1):4503599627370496>m?((this||kb).words=[m&67108863,m/67108864&67108863],(this||kb).length=2):(k(9007199254740992>m),(this||kb).words=[m&67108863,m/67108864&67108863,1],
(this||kb).length=3);"le"===u&&this._initArray(this.toArray(),t,u)};l.prototype._initArray=function(m,t,u){k("number"===typeof m.length);if(0>=m.length)return(this||kb).words=[0],(this||kb).length=1,this||kb;(this||kb).length=Math.ceil(m.length/3);(this||kb).words=Array((this||kb).length);for(t=0;t<(this||kb).length;t++)(this||kb).words[t]=0;var B=0;if("be"===u)for(t=m.length-1,u=0;0<=t;t-=3){var A=m[t]|m[t-1]<<8|m[t-2]<<16;(this||kb).words[u]|=A<<B&67108863;(this||kb).words[u+1]=A>>>26-B&67108863;
B+=24;26<=B&&(B-=26,u++)}else if("le"===u)for(u=t=0;t<m.length;t+=3)A=m[t]|m[t+1]<<8|m[t+2]<<16,(this||kb).words[u]|=A<<B&67108863,(this||kb).words[u+1]=A>>>26-B&67108863,B+=24,26<=B&&(B-=26,u++);return this.strip()};l.prototype._parseHex=function(m,t,u){(this||kb).length=Math.ceil((m.length-t)/6);(this||kb).words=Array((this||kb).length);for(var B=0;B<(this||kb).length;B++)(this||kb).words[B]=0;var A=0,H=0;if("be"===u)for(B=m.length-1;B>=t;B-=2)u=b(m,t,B)<<A,(this||kb).words[H]|=u&67108863,18<=A?
(A-=18,H+=1,(this||kb).words[H]|=u>>>26):A+=8;else for(B=0===(m.length-t)%2?t+1:t;B<m.length;B+=2)u=b(m,t,B)<<A,(this||kb).words[H]|=u&67108863,18<=A?(A-=18,H+=1,(this||kb).words[H]|=u>>>26):A+=8;this.strip()};l.prototype._parseBase=function(m,t,u){(this||kb).words=[0];(this||kb).length=1;for(var B=0,A=1;67108863>=A;A*=t)B++;B--;A=A/t|0;var H=m.length-u,F=H%B;H=Math.min(H,H-F)+u;for(var L=u;L<H;L+=B)u=d(m,L,L+B,t),this.imuln(A),67108864>(this||kb).words[0]+u?(this||kb).words[0]+=u:this._iaddn(u);
if(0!==F){B=1;u=d(m,L,m.length,t);for(L=0;L<F;L++)B*=t;this.imuln(B);67108864>(this||kb).words[0]+u?(this||kb).words[0]+=u:this._iaddn(u)}this.strip()};l.prototype.copy=function(m){m.words=Array((this||kb).length);for(var t=0;t<(this||kb).length;t++)m.words[t]=(this||kb).words[t];m.length=(this||kb).length;m.negative=(this||kb).negative;m.red=(this||kb).red};l.prototype.clone=function(){var m=new l(null);this.copy(m);return m};l.prototype._expand=function(m){for(;(this||kb).length<m;)(this||kb).words[(this||
kb).length++]=0;return this||kb};l.prototype.strip=function(){for(;1<(this||kb).length&&0===(this||kb).words[(this||kb).length-1];)(this||kb).length--;return this._normSign()};l.prototype._normSign=function(){1===(this||kb).length&&0===(this||kb).words[0]&&((this||kb).negative=0);return this||kb};l.prototype.inspect=function(){return((this||kb).red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var I=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
K=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],P=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];l.prototype.toString=function(m,t){m=m||10;t=t|0||1;if(16===m||"hex"===m){var u="";for(var B=m=0,A=0;A<(this||kb).length;A++){var H=
(this||kb).words[A],F=((H<<m|B)&16777215).toString(16);B=H>>>24-m&16777215;u=0!==B||A!==(this||kb).length-1?I[6-F.length]+F+u:F+u;m+=2;26<=m&&(m-=26,A--)}for(0!==B&&(u=B.toString(16)+u);0!==u.length%t;)u="0"+u;0!==(this||kb).negative&&(u="-"+u);return u}if(m===(m|0)&&2<=m&&36>=m){B=K[m];A=P[m];u="";H=this.clone();for(H.negative=0;!H.isZero();)F=H.modn(A).toString(m),H=H.idivn(A),u=H.isZero()?F+u:I[B-F.length]+F+u;for(this.isZero()&&(u="0"+u);0!==u.length%t;)u="0"+u;0!==(this||kb).negative&&(u="-"+
u);return u}k(!1,"Base should be between 2 and 36")};l.prototype.toNumber=function(){var m=(this||kb).words[0];2===(this||kb).length?m+=67108864*(this||kb).words[1]:3===(this||kb).length&&1===(this||kb).words[2]?m+=4503599627370496+67108864*(this||kb).words[1]:2<(this||kb).length&&k(!1,"Number can only safely store up to 53 bits");return 0!==(this||kb).negative?-m:m};l.prototype.toJSON=function(){return this.toString(16)};l.prototype.toBuffer=function(m,t){k("undefined"!==typeof E);return this.toArrayLike(E,
m,t)};l.prototype.toArray=function(m,t){return this.toArrayLike(Array,m,t)};l.prototype.toArrayLike=function(m,t,u){var B=this.byteLength();u=u||Math.max(1,B);k(B<=u,"byte array longer than desired length");k(0<u,"Requested array length <= 0");this.strip();var A="le"===t;m=new m(u);t=this.clone();if(A){for(A=0;!t.isZero();A++)B=t.andln(255),t.iushrn(8),m[A]=B;for(;A<u;A++)m[A]=0}else{for(A=0;A<u-B;A++)m[A]=0;for(A=0;!t.isZero();A++)B=t.andln(255),t.iushrn(8),m[u-A-1]=B}return m};l.prototype._countBits=
Math.clz32?function(m){return 32-Math.clz32(m)}:function(m){var t=0;4096<=m&&(t+=13,m>>>=13);64<=m&&(t+=7,m>>>=7);8<=m&&(t+=4,m>>>=4);2<=m&&(t+=2,m>>>=2);return t+m};l.prototype._zeroBits=function(m){if(0===m)return 26;var t=0;0===(m&8191)&&(t+=13,m>>>=13);0===(m&127)&&(t+=7,m>>>=7);0===(m&15)&&(t+=4,m>>>=4);0===(m&3)&&(t+=2,m>>>=2);0===(m&1)&&t++;return t};l.prototype.bitLength=function(){var m=this._countBits((this||kb).words[(this||kb).length-1]);return 26*((this||kb).length-1)+m};l.prototype.zeroBits=
function(){if(this.isZero())return 0;for(var m=0,t=0;t<(this||kb).length;t++){var u=this._zeroBits((this||kb).words[t]);m+=u;if(26!==u)break}return m};l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};l.prototype.toTwos=function(m){return 0!==(this||kb).negative?this.abs().inotn(m).iaddn(1):this.clone()};l.prototype.fromTwos=function(m){return this.testn(m-1)?this.notn(m).iaddn(1).ineg():this.clone()};l.prototype.isNeg=function(){return 0!==(this||kb).negative};l.prototype.neg=
function(){return this.clone().ineg()};l.prototype.ineg=function(){this.isZero()||((this||kb).negative^=1);return this||kb};l.prototype.iuor=function(m){for(;(this||kb).length<m.length;)(this||kb).words[(this||kb).length++]=0;for(var t=0;t<m.length;t++)(this||kb).words[t]|=m.words[t];return this.strip()};l.prototype.ior=function(m){k(0===((this||kb).negative|m.negative));return this.iuor(m)};l.prototype.or=function(m){return(this||kb).length>m.length?this.clone().ior(m):m.clone().ior(this||kb)};l.prototype.uor=
function(m){return(this||kb).length>m.length?this.clone().iuor(m):m.clone().iuor(this||kb)};l.prototype.iuand=function(m){var t=(this||kb).length>m.length?m:this||kb;for(var u=0;u<t.length;u++)(this||kb).words[u]&=m.words[u];(this||kb).length=t.length;return this.strip()};l.prototype.iand=function(m){k(0===((this||kb).negative|m.negative));return this.iuand(m)};l.prototype.and=function(m){return(this||kb).length>m.length?this.clone().iand(m):m.clone().iand(this||kb)};l.prototype.uand=function(m){return(this||
kb).length>m.length?this.clone().iuand(m):m.clone().iuand(this||kb)};l.prototype.iuxor=function(m){if((this||kb).length>m.length)var t=this||kb;else t=m,m=this||kb;for(var u=0;u<m.length;u++)(this||kb).words[u]=t.words[u]^m.words[u];if((this||kb)!==t)for(;u<t.length;u++)(this||kb).words[u]=t.words[u];(this||kb).length=t.length;return this.strip()};l.prototype.ixor=function(m){k(0===((this||kb).negative|m.negative));return this.iuxor(m)};l.prototype.xor=function(m){return(this||kb).length>m.length?
this.clone().ixor(m):m.clone().ixor(this||kb)};l.prototype.uxor=function(m){return(this||kb).length>m.length?this.clone().iuxor(m):m.clone().iuxor(this||kb)};l.prototype.inotn=function(m){k("number"===typeof m&&0<=m);var t=Math.ceil(m/26)|0;m%=26;this._expand(t);0<m&&t--;for(var u=0;u<t;u++)(this||kb).words[u]=~(this||kb).words[u]&67108863;0<m&&((this||kb).words[u]=~(this||kb).words[u]&67108863>>26-m);return this.strip()};l.prototype.notn=function(m){return this.clone().inotn(m)};l.prototype.setn=
function(m,t){k("number"===typeof m&&0<=m);var u=m/26|0;m%=26;this._expand(u+1);(this||kb).words[u]=t?(this||kb).words[u]|1<<m:(this||kb).words[u]&~(1<<m);return this.strip()};l.prototype.iadd=function(m){if(0!==(this||kb).negative&&0===m.negative)return(this||kb).negative=0,this.isub(m),(this||kb).negative^=1,this._normSign();if(0===(this||kb).negative&&0!==m.negative){m.negative=0;var t=this.isub(m);m.negative=1;return t._normSign()}if((this||kb).length>m.length)var u=this||kb;else u=m,m=this||
kb;for(var B=t=0;B<m.length;B++)t=(u.words[B]|0)+(m.words[B]|0)+t,(this||kb).words[B]=t&67108863,t>>>=26;for(;0!==t&&B<u.length;B++)t=(u.words[B]|0)+t,(this||kb).words[B]=t&67108863,t>>>=26;(this||kb).length=u.length;if(0!==t)(this||kb).words[(this||kb).length]=t,(this||kb).length++;else if(u!==(this||kb))for(;B<u.length;B++)(this||kb).words[B]=u.words[B];return this||kb};l.prototype.add=function(m){if(0!==m.negative&&0===(this||kb).negative){m.negative=0;var t=this.sub(m);m.negative^=1;return t}return 0===
m.negative&&0!==(this||kb).negative?((this||kb).negative=0,t=m.sub(this||kb),(this||kb).negative=1,t):(this||kb).length>m.length?this.clone().iadd(m):m.clone().iadd(this||kb)};l.prototype.isub=function(m){if(0!==m.negative){m.negative=0;var t=this.iadd(m);m.negative=1;return t._normSign()}if(0!==(this||kb).negative)return(this||kb).negative=0,this.iadd(m),(this||kb).negative=1,this._normSign();t=this.cmp(m);if(0===t)return(this||kb).negative=0,(this||kb).length=1,(this||kb).words[0]=0,this||kb;if(0<
t)var u=this||kb;else u=m,m=this||kb;for(var B=0,A=0;A<m.length;A++)t=(u.words[A]|0)-(m.words[A]|0)+B,B=t>>26,(this||kb).words[A]=t&67108863;for(;0!==B&&A<u.length;A++)t=(u.words[A]|0)+B,B=t>>26,(this||kb).words[A]=t&67108863;if(0===B&&A<u.length&&u!==(this||kb))for(;A<u.length;A++)(this||kb).words[A]=u.words[A];(this||kb).length=Math.max((this||kb).length,A);u!==(this||kb)&&((this||kb).negative=1);return this.strip()};l.prototype.sub=function(m){return this.clone().isub(m)};var N=function(m,t,u){var B=
m.words,A=t.words,H=u.words,F=0,L=B[0]|0,U=L&8191,T=L>>>13,Y=B[1]|0;L=Y&8191;var wa=Y>>>13,Ga=B[2]|0;Y=Ga&8191;var na=Ga>>>13,ea=B[3]|0;Ga=ea&8191;var da=ea>>>13,ia=B[4]|0;ea=ia&8191;var Oa=ia>>>13,Va=B[5]|0;ia=Va&8191;var eb=Va>>>13,Sa=B[6]|0;Va=Sa&8191;var Bb=Sa>>>13,Z=B[7]|0;Sa=Z&8191;var sa=Z>>>13,Da=B[8]|0;Z=Da&8191;Da>>>=13;var X=B[9]|0;B=X&8191;X>>>=13;var ma=A[0]|0,ta=ma&8191,Pa=ma>>>13,Za=A[1]|0;ma=Za&8191;var Zb=Za>>>13,Pb=A[2]|0;Za=Pb&8191;var Db=Pb>>>13,sc=A[3]|0;Pb=sc&8191;var wc=sc>>>
13,Lc=A[4]|0;sc=Lc&8191;var Xc=Lc>>>13,Qc=A[5]|0;Lc=Qc&8191;var hd=Qc>>>13,Wc=A[6]|0;Qc=Wc&8191;var ld=Wc>>>13,Yc=A[7]|0;Wc=Yc&8191;var od=Yc>>>13,Vc=A[8]|0;Yc=Vc&8191;Vc>>>=13;var cd=A[9]|0;A=cd&8191;cd>>>=13;u.negative=m.negative^t.negative;u.length=19;var W=Math.imul(U,ta);m=Math.imul(U,Pa);m=m+Math.imul(T,ta)|0;t=Math.imul(T,Pa);var af=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(af>>>26)|0;af&=67108863;W=Math.imul(L,ta);m=Math.imul(L,Pa);m=m+Math.imul(wa,ta)|0;t=Math.imul(wa,Pa);W=W+Math.imul(U,
ma)|0;m=m+Math.imul(U,Zb)|0;m=m+Math.imul(T,ma)|0;t=t+Math.imul(T,Zb)|0;var zc=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(zc>>>26)|0;zc&=67108863;W=Math.imul(Y,ta);m=Math.imul(Y,Pa);m=m+Math.imul(na,ta)|0;t=Math.imul(na,Pa);W=W+Math.imul(L,ma)|0;m=m+Math.imul(L,Zb)|0;m=m+Math.imul(wa,ma)|0;t=t+Math.imul(wa,Zb)|0;W=W+Math.imul(U,Za)|0;m=m+Math.imul(U,Db)|0;m=m+Math.imul(T,Za)|0;t=t+Math.imul(T,Db)|0;var pi=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(pi>>>26)|0;pi&=67108863;W=Math.imul(Ga,ta);m=Math.imul(Ga,
Pa);m=m+Math.imul(da,ta)|0;t=Math.imul(da,Pa);W=W+Math.imul(Y,ma)|0;m=m+Math.imul(Y,Zb)|0;m=m+Math.imul(na,ma)|0;t=t+Math.imul(na,Zb)|0;W=W+Math.imul(L,Za)|0;m=m+Math.imul(L,Db)|0;m=m+Math.imul(wa,Za)|0;t=t+Math.imul(wa,Db)|0;W=W+Math.imul(U,Pb)|0;m=m+Math.imul(U,wc)|0;m=m+Math.imul(T,Pb)|0;t=t+Math.imul(T,wc)|0;var ad=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ad>>>26)|0;ad&=67108863;W=Math.imul(ea,ta);m=Math.imul(ea,Pa);m=m+Math.imul(Oa,ta)|0;t=Math.imul(Oa,Pa);W=W+Math.imul(Ga,ma)|0;m=m+Math.imul(Ga,
Zb)|0;m=m+Math.imul(da,ma)|0;t=t+Math.imul(da,Zb)|0;W=W+Math.imul(Y,Za)|0;m=m+Math.imul(Y,Db)|0;m=m+Math.imul(na,Za)|0;t=t+Math.imul(na,Db)|0;W=W+Math.imul(L,Pb)|0;m=m+Math.imul(L,wc)|0;m=m+Math.imul(wa,Pb)|0;t=t+Math.imul(wa,wc)|0;W=W+Math.imul(U,sc)|0;m=m+Math.imul(U,Xc)|0;m=m+Math.imul(T,sc)|0;t=t+Math.imul(T,Xc)|0;var bd=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(bd>>>26)|0;bd&=67108863;W=Math.imul(ia,ta);m=Math.imul(ia,Pa);m=m+Math.imul(eb,ta)|0;t=Math.imul(eb,Pa);W=W+Math.imul(ea,ma)|0;m=m+
Math.imul(ea,Zb)|0;m=m+Math.imul(Oa,ma)|0;t=t+Math.imul(Oa,Zb)|0;W=W+Math.imul(Ga,Za)|0;m=m+Math.imul(Ga,Db)|0;m=m+Math.imul(da,Za)|0;t=t+Math.imul(da,Db)|0;W=W+Math.imul(Y,Pb)|0;m=m+Math.imul(Y,wc)|0;m=m+Math.imul(na,Pb)|0;t=t+Math.imul(na,wc)|0;W=W+Math.imul(L,sc)|0;m=m+Math.imul(L,Xc)|0;m=m+Math.imul(wa,sc)|0;t=t+Math.imul(wa,Xc)|0;W=W+Math.imul(U,Lc)|0;m=m+Math.imul(U,hd)|0;m=m+Math.imul(T,Lc)|0;t=t+Math.imul(T,hd)|0;var qi=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(qi>>>26)|0;qi&=67108863;W=
Math.imul(Va,ta);m=Math.imul(Va,Pa);m=m+Math.imul(Bb,ta)|0;t=Math.imul(Bb,Pa);W=W+Math.imul(ia,ma)|0;m=m+Math.imul(ia,Zb)|0;m=m+Math.imul(eb,ma)|0;t=t+Math.imul(eb,Zb)|0;W=W+Math.imul(ea,Za)|0;m=m+Math.imul(ea,Db)|0;m=m+Math.imul(Oa,Za)|0;t=t+Math.imul(Oa,Db)|0;W=W+Math.imul(Ga,Pb)|0;m=m+Math.imul(Ga,wc)|0;m=m+Math.imul(da,Pb)|0;t=t+Math.imul(da,wc)|0;W=W+Math.imul(Y,sc)|0;m=m+Math.imul(Y,Xc)|0;m=m+Math.imul(na,sc)|0;t=t+Math.imul(na,Xc)|0;W=W+Math.imul(L,Lc)|0;m=m+Math.imul(L,hd)|0;m=m+Math.imul(wa,
Lc)|0;t=t+Math.imul(wa,hd)|0;W=W+Math.imul(U,Qc)|0;m=m+Math.imul(U,ld)|0;m=m+Math.imul(T,Qc)|0;t=t+Math.imul(T,ld)|0;var ei=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ei>>>26)|0;ei&=67108863;W=Math.imul(Sa,ta);m=Math.imul(Sa,Pa);m=m+Math.imul(sa,ta)|0;t=Math.imul(sa,Pa);W=W+Math.imul(Va,ma)|0;m=m+Math.imul(Va,Zb)|0;m=m+Math.imul(Bb,ma)|0;t=t+Math.imul(Bb,Zb)|0;W=W+Math.imul(ia,Za)|0;m=m+Math.imul(ia,Db)|0;m=m+Math.imul(eb,Za)|0;t=t+Math.imul(eb,Db)|0;W=W+Math.imul(ea,Pb)|0;m=m+Math.imul(ea,wc)|0;
m=m+Math.imul(Oa,Pb)|0;t=t+Math.imul(Oa,wc)|0;W=W+Math.imul(Ga,sc)|0;m=m+Math.imul(Ga,Xc)|0;m=m+Math.imul(da,sc)|0;t=t+Math.imul(da,Xc)|0;W=W+Math.imul(Y,Lc)|0;m=m+Math.imul(Y,hd)|0;m=m+Math.imul(na,Lc)|0;t=t+Math.imul(na,hd)|0;W=W+Math.imul(L,Qc)|0;m=m+Math.imul(L,ld)|0;m=m+Math.imul(wa,Qc)|0;t=t+Math.imul(wa,ld)|0;W=W+Math.imul(U,Wc)|0;m=m+Math.imul(U,od)|0;m=m+Math.imul(T,Wc)|0;t=t+Math.imul(T,od)|0;var Zh=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Zh>>>26)|0;Zh&=67108863;W=Math.imul(Z,ta);m=Math.imul(Z,
Pa);m=m+Math.imul(Da,ta)|0;t=Math.imul(Da,Pa);W=W+Math.imul(Sa,ma)|0;m=m+Math.imul(Sa,Zb)|0;m=m+Math.imul(sa,ma)|0;t=t+Math.imul(sa,Zb)|0;W=W+Math.imul(Va,Za)|0;m=m+Math.imul(Va,Db)|0;m=m+Math.imul(Bb,Za)|0;t=t+Math.imul(Bb,Db)|0;W=W+Math.imul(ia,Pb)|0;m=m+Math.imul(ia,wc)|0;m=m+Math.imul(eb,Pb)|0;t=t+Math.imul(eb,wc)|0;W=W+Math.imul(ea,sc)|0;m=m+Math.imul(ea,Xc)|0;m=m+Math.imul(Oa,sc)|0;t=t+Math.imul(Oa,Xc)|0;W=W+Math.imul(Ga,Lc)|0;m=m+Math.imul(Ga,hd)|0;m=m+Math.imul(da,Lc)|0;t=t+Math.imul(da,hd)|
0;W=W+Math.imul(Y,Qc)|0;m=m+Math.imul(Y,ld)|0;m=m+Math.imul(na,Qc)|0;t=t+Math.imul(na,ld)|0;W=W+Math.imul(L,Wc)|0;m=m+Math.imul(L,od)|0;m=m+Math.imul(wa,Wc)|0;t=t+Math.imul(wa,od)|0;W=W+Math.imul(U,Yc)|0;m=m+Math.imul(U,Vc)|0;m=m+Math.imul(T,Yc)|0;t=t+Math.imul(T,Vc)|0;var xi=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(xi>>>26)|0;xi&=67108863;W=Math.imul(B,ta);m=Math.imul(B,Pa);m=m+Math.imul(X,ta)|0;t=Math.imul(X,Pa);W=W+Math.imul(Z,ma)|0;m=m+Math.imul(Z,Zb)|0;m=m+Math.imul(Da,ma)|0;t=t+Math.imul(Da,
Zb)|0;W=W+Math.imul(Sa,Za)|0;m=m+Math.imul(Sa,Db)|0;m=m+Math.imul(sa,Za)|0;t=t+Math.imul(sa,Db)|0;W=W+Math.imul(Va,Pb)|0;m=m+Math.imul(Va,wc)|0;m=m+Math.imul(Bb,Pb)|0;t=t+Math.imul(Bb,wc)|0;W=W+Math.imul(ia,sc)|0;m=m+Math.imul(ia,Xc)|0;m=m+Math.imul(eb,sc)|0;t=t+Math.imul(eb,Xc)|0;W=W+Math.imul(ea,Lc)|0;m=m+Math.imul(ea,hd)|0;m=m+Math.imul(Oa,Lc)|0;t=t+Math.imul(Oa,hd)|0;W=W+Math.imul(Ga,Qc)|0;m=m+Math.imul(Ga,ld)|0;m=m+Math.imul(da,Qc)|0;t=t+Math.imul(da,ld)|0;W=W+Math.imul(Y,Wc)|0;m=m+Math.imul(Y,
od)|0;m=m+Math.imul(na,Wc)|0;t=t+Math.imul(na,od)|0;W=W+Math.imul(L,Yc)|0;m=m+Math.imul(L,Vc)|0;m=m+Math.imul(wa,Yc)|0;t=t+Math.imul(wa,Vc)|0;W=W+Math.imul(U,A)|0;m=m+Math.imul(U,cd)|0;m=m+Math.imul(T,A)|0;t=t+Math.imul(T,cd)|0;U=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(U>>>26)|0;U&=67108863;W=Math.imul(B,ma);m=Math.imul(B,Zb);m=m+Math.imul(X,ma)|0;t=Math.imul(X,Zb);W=W+Math.imul(Z,Za)|0;m=m+Math.imul(Z,Db)|0;m=m+Math.imul(Da,Za)|0;t=t+Math.imul(Da,Db)|0;W=W+Math.imul(Sa,Pb)|0;m=m+Math.imul(Sa,
wc)|0;m=m+Math.imul(sa,Pb)|0;t=t+Math.imul(sa,wc)|0;W=W+Math.imul(Va,sc)|0;m=m+Math.imul(Va,Xc)|0;m=m+Math.imul(Bb,sc)|0;t=t+Math.imul(Bb,Xc)|0;W=W+Math.imul(ia,Lc)|0;m=m+Math.imul(ia,hd)|0;m=m+Math.imul(eb,Lc)|0;t=t+Math.imul(eb,hd)|0;W=W+Math.imul(ea,Qc)|0;m=m+Math.imul(ea,ld)|0;m=m+Math.imul(Oa,Qc)|0;t=t+Math.imul(Oa,ld)|0;W=W+Math.imul(Ga,Wc)|0;m=m+Math.imul(Ga,od)|0;m=m+Math.imul(da,Wc)|0;t=t+Math.imul(da,od)|0;W=W+Math.imul(Y,Yc)|0;m=m+Math.imul(Y,Vc)|0;m=m+Math.imul(na,Yc)|0;t=t+Math.imul(na,
Vc)|0;W=W+Math.imul(L,A)|0;m=m+Math.imul(L,cd)|0;m=m+Math.imul(wa,A)|0;t=t+Math.imul(wa,cd)|0;L=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(L>>>26)|0;L&=67108863;W=Math.imul(B,Za);m=Math.imul(B,Db);m=m+Math.imul(X,Za)|0;t=Math.imul(X,Db);W=W+Math.imul(Z,Pb)|0;m=m+Math.imul(Z,wc)|0;m=m+Math.imul(Da,Pb)|0;t=t+Math.imul(Da,wc)|0;W=W+Math.imul(Sa,sc)|0;m=m+Math.imul(Sa,Xc)|0;m=m+Math.imul(sa,sc)|0;t=t+Math.imul(sa,Xc)|0;W=W+Math.imul(Va,Lc)|0;m=m+Math.imul(Va,hd)|0;m=m+Math.imul(Bb,Lc)|0;t=t+Math.imul(Bb,
hd)|0;W=W+Math.imul(ia,Qc)|0;m=m+Math.imul(ia,ld)|0;m=m+Math.imul(eb,Qc)|0;t=t+Math.imul(eb,ld)|0;W=W+Math.imul(ea,Wc)|0;m=m+Math.imul(ea,od)|0;m=m+Math.imul(Oa,Wc)|0;t=t+Math.imul(Oa,od)|0;W=W+Math.imul(Ga,Yc)|0;m=m+Math.imul(Ga,Vc)|0;m=m+Math.imul(da,Yc)|0;t=t+Math.imul(da,Vc)|0;W=W+Math.imul(Y,A)|0;m=m+Math.imul(Y,cd)|0;m=m+Math.imul(na,A)|0;t=t+Math.imul(na,cd)|0;Y=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Y>>>26)|0;Y&=67108863;W=Math.imul(B,Pb);m=Math.imul(B,wc);m=m+Math.imul(X,Pb)|0;t=Math.imul(X,
wc);W=W+Math.imul(Z,sc)|0;m=m+Math.imul(Z,Xc)|0;m=m+Math.imul(Da,sc)|0;t=t+Math.imul(Da,Xc)|0;W=W+Math.imul(Sa,Lc)|0;m=m+Math.imul(Sa,hd)|0;m=m+Math.imul(sa,Lc)|0;t=t+Math.imul(sa,hd)|0;W=W+Math.imul(Va,Qc)|0;m=m+Math.imul(Va,ld)|0;m=m+Math.imul(Bb,Qc)|0;t=t+Math.imul(Bb,ld)|0;W=W+Math.imul(ia,Wc)|0;m=m+Math.imul(ia,od)|0;m=m+Math.imul(eb,Wc)|0;t=t+Math.imul(eb,od)|0;W=W+Math.imul(ea,Yc)|0;m=m+Math.imul(ea,Vc)|0;m=m+Math.imul(Oa,Yc)|0;t=t+Math.imul(Oa,Vc)|0;W=W+Math.imul(Ga,A)|0;m=m+Math.imul(Ga,
cd)|0;m=m+Math.imul(da,A)|0;t=t+Math.imul(da,cd)|0;Ga=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Ga>>>26)|0;Ga&=67108863;W=Math.imul(B,sc);m=Math.imul(B,Xc);m=m+Math.imul(X,sc)|0;t=Math.imul(X,Xc);W=W+Math.imul(Z,Lc)|0;m=m+Math.imul(Z,hd)|0;m=m+Math.imul(Da,Lc)|0;t=t+Math.imul(Da,hd)|0;W=W+Math.imul(Sa,Qc)|0;m=m+Math.imul(Sa,ld)|0;m=m+Math.imul(sa,Qc)|0;t=t+Math.imul(sa,ld)|0;W=W+Math.imul(Va,Wc)|0;m=m+Math.imul(Va,od)|0;m=m+Math.imul(Bb,Wc)|0;t=t+Math.imul(Bb,od)|0;W=W+Math.imul(ia,Yc)|0;m=m+Math.imul(ia,
Vc)|0;m=m+Math.imul(eb,Yc)|0;t=t+Math.imul(eb,Vc)|0;W=W+Math.imul(ea,A)|0;m=m+Math.imul(ea,cd)|0;m=m+Math.imul(Oa,A)|0;t=t+Math.imul(Oa,cd)|0;ea=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ea>>>26)|0;ea&=67108863;W=Math.imul(B,Lc);m=Math.imul(B,hd);m=m+Math.imul(X,Lc)|0;t=Math.imul(X,hd);W=W+Math.imul(Z,Qc)|0;m=m+Math.imul(Z,ld)|0;m=m+Math.imul(Da,Qc)|0;t=t+Math.imul(Da,ld)|0;W=W+Math.imul(Sa,Wc)|0;m=m+Math.imul(Sa,od)|0;m=m+Math.imul(sa,Wc)|0;t=t+Math.imul(sa,od)|0;W=W+Math.imul(Va,Yc)|0;m=m+Math.imul(Va,
Vc)|0;m=m+Math.imul(Bb,Yc)|0;t=t+Math.imul(Bb,Vc)|0;W=W+Math.imul(ia,A)|0;m=m+Math.imul(ia,cd)|0;m=m+Math.imul(eb,A)|0;t=t+Math.imul(eb,cd)|0;ia=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ia>>>26)|0;ia&=67108863;W=Math.imul(B,Qc);m=Math.imul(B,ld);m=m+Math.imul(X,Qc)|0;t=Math.imul(X,ld);W=W+Math.imul(Z,Wc)|0;m=m+Math.imul(Z,od)|0;m=m+Math.imul(Da,Wc)|0;t=t+Math.imul(Da,od)|0;W=W+Math.imul(Sa,Yc)|0;m=m+Math.imul(Sa,Vc)|0;m=m+Math.imul(sa,Yc)|0;t=t+Math.imul(sa,Vc)|0;W=W+Math.imul(Va,A)|0;m=m+Math.imul(Va,
cd)|0;m=m+Math.imul(Bb,A)|0;t=t+Math.imul(Bb,cd)|0;Va=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Va>>>26)|0;Va&=67108863;W=Math.imul(B,Wc);m=Math.imul(B,od);m=m+Math.imul(X,Wc)|0;t=Math.imul(X,od);W=W+Math.imul(Z,Yc)|0;m=m+Math.imul(Z,Vc)|0;m=m+Math.imul(Da,Yc)|0;t=t+Math.imul(Da,Vc)|0;W=W+Math.imul(Sa,A)|0;m=m+Math.imul(Sa,cd)|0;m=m+Math.imul(sa,A)|0;t=t+Math.imul(sa,cd)|0;Sa=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Sa>>>26)|0;Sa&=67108863;W=Math.imul(B,Yc);m=Math.imul(B,Vc);m=m+Math.imul(X,Yc)|
0;t=Math.imul(X,Vc);W=W+Math.imul(Z,A)|0;m=m+Math.imul(Z,cd)|0;m=m+Math.imul(Da,A)|0;t=t+Math.imul(Da,cd)|0;Z=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Z>>>26)|0;Z&=67108863;W=Math.imul(B,A);m=Math.imul(B,cd);m=m+Math.imul(X,A)|0;t=Math.imul(X,cd);T=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(T>>>26)|0;H[0]=af;H[1]=zc;H[2]=pi;H[3]=ad;H[4]=bd;H[5]=qi;H[6]=ei;H[7]=Zh;H[8]=xi;H[9]=U;H[10]=L;H[11]=Y;H[12]=Ga;H[13]=ea;H[14]=ia;H[15]=Va;H[16]=Sa;H[17]=Z;H[18]=T&67108863;0!==F&&(H[19]=F,u.length++);return u};
Math.imul||(N=h);l.prototype.mulTo=function(m,t){var u=(this||kb).length+m.length;if(10===(this||kb).length&&10===m.length)m=N(this||kb,m,t);else if(63>u)m=h(this||kb,m,t);else if(1024>u){u=this||kb;t.negative=m.negative^u.negative;t.length=u.length+m.length;for(var B=0,A=0,H=0;H<t.length-1;H++){var F=A;A=0;B&=67108863;for(var L=Math.min(H,m.length-1),U=Math.max(0,H-u.length+1);U<=L;U++){var T=(u.words[H-U]|0)*(m.words[U]|0),Y=T&67108863;F=F+(T/67108864|0)|0;Y=Y+B|0;B=Y&67108863;F=F+(Y>>>26)|0;A+=
F>>>26;F&=67108863}t.words[H]=B;B=F}0!==B?t.words[H]=B:t.length--;m=t.strip()}else u=this||kb,m=(new a).mulp(u,m,t);return m};a.prototype.makeRBT=function(m){for(var t=Array(m),u=l.prototype._countBits(m)-1,B=0;B<m;B++)t[B]=this.revBin(B,u,m);return t};a.prototype.revBin=function(m,t,u){if(0===m||m===u-1)return m;for(var B=u=0;B<t;B++)u|=(m&1)<<t-B-1,m>>=1;return u};a.prototype.permute=function(m,t,u,B,A,H){for(var F=0;F<H;F++)B[F]=t[m[F]],A[F]=u[m[F]]};a.prototype.transform=function(m,t,u,B,A,H){this.permute(H,
m,t,u,B,A);for(m=1;m<A;m<<=1){t=m<<1;H=Math.cos(2*Math.PI/t);for(var F=Math.sin(2*Math.PI/t),L=0;L<A;L+=t)for(var U=H,T=F,Y=0;Y<m;Y++){var wa=u[L+Y],Ga=B[L+Y],na=u[L+Y+m],ea=B[L+Y+m],da=U*na-T*ea;ea=U*ea+T*na;na=da;u[L+Y]=wa+na;B[L+Y]=Ga+ea;u[L+Y+m]=wa-na;B[L+Y+m]=Ga-ea;Y!==t&&(da=H*U-F*T,T=H*T+F*U,U=da)}}};a.prototype.guessLen13b=function(m,t){m=Math.max(t,m)|1;t=m&1;var u=0;for(m=m/2|0;m;m>>>=1)u++;return 1<<u+1+t};a.prototype.conjugate=function(m,t,u){if(!(1>=u))for(var B=0;B<u/2;B++){var A=m[B];
m[B]=m[u-B-1];m[u-B-1]=A;A=t[B];t[B]=-t[u-B-1];t[u-B-1]=-A}};a.prototype.normalize13b=function(m,t){for(var u=0,B=0;B<t/2;B++)u=8192*Math.round(m[2*B+1]/t)+Math.round(m[2*B]/t)+u,m[B]=u&67108863,u=67108864>u?0:u/67108864|0;return m};a.prototype.convert13b=function(m,t,u,B){for(var A=0,H=0;H<t;H++)A+=m[H]|0,u[2*H]=A&8191,A>>>=13,u[2*H+1]=A&8191,A>>>=13;for(H=2*t;H<B;++H)u[H]=0;k(0===A);k(0===(A&-8192))};a.prototype.stub=function(m){for(var t=Array(m),u=0;u<m;u++)t[u]=0;return t};a.prototype.mulp=function(m,
t,u){var B=2*this.guessLen13b(m.length,t.length),A=this.makeRBT(B),H=this.stub(B),F=Array(B),L=Array(B),U=Array(B),T=Array(B),Y=Array(B),wa=Array(B),Ga=u.words;Ga.length=B;this.convert13b(m.words,m.length,F,B);this.convert13b(t.words,t.length,T,B);this.transform(F,H,L,U,B,A);this.transform(T,H,Y,wa,B,A);for(F=0;F<B;F++)T=L[F]*Y[F]-U[F]*wa[F],U[F]=L[F]*wa[F]+U[F]*Y[F],L[F]=T;this.conjugate(L,U,B);this.transform(L,U,Ga,H,B,A);this.conjugate(Ga,H,B);this.normalize13b(Ga,B);u.negative=m.negative^t.negative;
u.length=m.length+t.length;return u.strip()};l.prototype.mul=function(m){var t=new l(null);t.words=Array((this||kb).length+m.length);return this.mulTo(m,t)};l.prototype.mulf=function(m){var t=new l(null);t.words=Array((this||kb).length+m.length);var u=this||kb;return(new a).mulp(u,m,t)};l.prototype.imul=function(m){return this.clone().mulTo(m,this||kb)};l.prototype.imuln=function(m){k("number"===typeof m);k(67108864>m);for(var t=0,u=0;u<(this||kb).length;u++){var B=((this||kb).words[u]|0)*m,A=(B&
67108863)+(t&67108863);t>>=26;t+=B/67108864|0;t+=A>>>26;(this||kb).words[u]=A&67108863}0!==t&&((this||kb).words[u]=t,(this||kb).length++);return this||kb};l.prototype.muln=function(m){return this.clone().imuln(m)};l.prototype.sqr=function(){return this.mul(this||kb)};l.prototype.isqr=function(){return this.imul(this.clone())};l.prototype.pow=function(m){for(var t=Array(m.bitLength()),u=0;u<t.length;u++){var B=u%26;t[u]=(m.words[u/26|0]&1<<B)>>>B}if(0===t.length)return new l(1);m=this||kb;for(u=0;u<
t.length&&0===t[u];u++,m=m.sqr());if(++u<t.length)for(B=m.sqr();u<t.length;u++,B=B.sqr())0!==t[u]&&(m=m.mul(B));return m};l.prototype.iushln=function(m){k("number"===typeof m&&0<=m);var t=m%26;m=(m-t)/26;var u=67108863>>>26-t<<26-t,B;if(0!==t){var A=0;for(B=0;B<(this||kb).length;B++){var H=(this||kb).words[B]&u;(this||kb).words[B]=((this||kb).words[B]|0)-H<<t|A;A=H>>>26-t}A&&((this||kb).words[B]=A,(this||kb).length++)}if(0!==m){for(B=(this||kb).length-1;0<=B;B--)(this||kb).words[B+m]=(this||kb).words[B];
for(B=0;B<m;B++)(this||kb).words[B]=0;(this||kb).length+=m}return this.strip()};l.prototype.ishln=function(m){k(0===(this||kb).negative);return this.iushln(m)};l.prototype.iushrn=function(m,t,u){k("number"===typeof m&&0<=m);var B=m%26,A=Math.min((m-B)/26,(this||kb).length);m=67108863^67108863>>>B<<B;t=Math.max(0,(t?(t-t%26)/26:0)-A);if(u){for(var H=0;H<A;H++)u.words[H]=(this||kb).words[H];u.length=A}if(0!==A)if((this||kb).length>A)for((this||kb).length-=A,H=0;H<(this||kb).length;H++)(this||kb).words[H]=
(this||kb).words[H+A];else(this||kb).words[0]=0,(this||kb).length=1;A=0;for(H=(this||kb).length-1;0<=H&&(0!==A||H>=t);H--){var F=(this||kb).words[H]|0;(this||kb).words[H]=A<<26-B|F>>>B;A=F&m}u&&0!==A&&(u.words[u.length++]=A);0===(this||kb).length&&((this||kb).words[0]=0,(this||kb).length=1);return this.strip()};l.prototype.ishrn=function(m,t,u){k(0===(this||kb).negative);return this.iushrn(m,t,u)};l.prototype.shln=function(m){return this.clone().ishln(m)};l.prototype.ushln=function(m){return this.clone().iushln(m)};
l.prototype.shrn=function(m){return this.clone().ishrn(m)};l.prototype.ushrn=function(m){return this.clone().iushrn(m)};l.prototype.testn=function(m){k("number"===typeof m&&0<=m);var t=m%26;m=(m-t)/26;return(this||kb).length<=m?!1:!!((this||kb).words[m]&1<<t)};l.prototype.imaskn=function(m){k("number"===typeof m&&0<=m);var t=m%26;m=(m-t)/26;k(0===(this||kb).negative,"imaskn works only with positive numbers");if((this||kb).length<=m)return this||kb;0!==t&&m++;(this||kb).length=Math.min(m,(this||kb).length);
0!==t&&((this||kb).words[(this||kb).length-1]&=67108863^67108863>>>t<<t);return this.strip()};l.prototype.maskn=function(m){return this.clone().imaskn(m)};l.prototype.iaddn=function(m){k("number"===typeof m);k(67108864>m);if(0>m)return this.isubn(-m);if(0!==(this||kb).negative){if(1===(this||kb).length&&((this||kb).words[0]|0)<m)return(this||kb).words[0]=m-((this||kb).words[0]|0),(this||kb).negative=0,this||kb;(this||kb).negative=0;this.isubn(m);(this||kb).negative=1;return this||kb}return this._iaddn(m)};
l.prototype._iaddn=function(m){(this||kb).words[0]+=m;for(m=0;m<(this||kb).length&&67108864<=(this||kb).words[m];m++)(this||kb).words[m]-=67108864,m===(this||kb).length-1?(this||kb).words[m+1]=1:(this||kb).words[m+1]++;(this||kb).length=Math.max((this||kb).length,m+1);return this||kb};l.prototype.isubn=function(m){k("number"===typeof m);k(67108864>m);if(0>m)return this.iaddn(-m);if(0!==(this||kb).negative)return(this||kb).negative=0,this.iaddn(m),(this||kb).negative=1,this||kb;(this||kb).words[0]-=
m;if(1===(this||kb).length&&0>(this||kb).words[0])(this||kb).words[0]=-(this||kb).words[0],(this||kb).negative=1;else for(m=0;m<(this||kb).length&&0>(this||kb).words[m];m++)(this||kb).words[m]+=67108864,--(this||kb).words[m+1];return this.strip()};l.prototype.addn=function(m){return this.clone().iaddn(m)};l.prototype.subn=function(m){return this.clone().isubn(m)};l.prototype.iabs=function(){(this||kb).negative=0;return this||kb};l.prototype.abs=function(){return this.clone().iabs()};l.prototype._ishlnsubmul=
function(m,t,u){var B;this._expand(m.length+u);var A=0;for(B=0;B<m.length;B++){var H=((this||kb).words[B+u]|0)+A;A=(m.words[B]|0)*t;H-=A&67108863;A=(H>>26)-(A/67108864|0);(this||kb).words[B+u]=H&67108863}for(;B<(this||kb).length-u;B++)H=((this||kb).words[B+u]|0)+A,A=H>>26,(this||kb).words[B+u]=H&67108863;if(0===A)return this.strip();k(-1===A);for(B=A=0;B<(this||kb).length;B++)H=-((this||kb).words[B]|0)+A,A=H>>26,(this||kb).words[B]=H&67108863;(this||kb).negative=1;return this.strip()};l.prototype._wordDiv=
function(m,t){var u=this.clone(),B=m,A=B.words[B.length-1]|0;m=26-this._countBits(A);0!==m&&(B=B.ushln(m),u.iushln(m),A=B.words[B.length-1]|0);var H=u.length-B.length;if("mod"!==t){var F=new l(null);F.length=H+1;F.words=Array(F.length);for(var L=0;L<F.length;L++)F.words[L]=0}L=u.clone()._ishlnsubmul(B,1,H);0===L.negative&&(u=L,F&&(F.words[H]=1));for(--H;0<=H;H--){L=67108864*(u.words[B.length+H]|0)+(u.words[B.length+H-1]|0);L=Math.min(L/A|0,67108863);for(u._ishlnsubmul(B,L,H);0!==u.negative;)L--,u.negative=
0,u._ishlnsubmul(B,1,H),u.isZero()||(u.negative^=1);F&&(F.words[H]=L)}F&&F.strip();u.strip();"div"!==t&&0!==m&&u.iushrn(m);return{div:F||null,mod:u}};l.prototype.divmod=function(m,t,u){k(!m.isZero());if(this.isZero())return{div:new l(0),mod:new l(0)};var B;if(0!==(this||kb).negative&&0===m.negative){var A=this.neg().divmod(m,t);"mod"!==t&&(B=A.div.neg());if("div"!==t){var H=A.mod.neg();u&&0!==H.negative&&H.iadd(m)}return{div:B,mod:H}}return 0===(this||kb).negative&&0!==m.negative?(A=this.divmod(m.neg(),
t),"mod"!==t&&(B=A.div.neg()),{div:B,mod:A.mod}):0!==((this||kb).negative&m.negative)?(A=this.neg().divmod(m.neg(),t),"div"!==t&&(H=A.mod.neg(),u&&0!==H.negative&&H.isub(m)),{div:A.div,mod:H}):m.length>(this||kb).length||0>this.cmp(m)?{div:new l(0),mod:this||kb}:1===m.length?"div"===t?{div:this.divn(m.words[0]),mod:null}:"mod"===t?{div:null,mod:new l(this.modn(m.words[0]))}:{div:this.divn(m.words[0]),mod:new l(this.modn(m.words[0]))}:this._wordDiv(m,t)};l.prototype.div=function(m){return this.divmod(m,
"div",!1).div};l.prototype.mod=function(m){return this.divmod(m,"mod",!1).mod};l.prototype.umod=function(m){return this.divmod(m,"mod",!0).mod};l.prototype.divRound=function(m){var t=this.divmod(m);if(t.mod.isZero())return t.div;var u=0!==t.div.negative?t.mod.isub(m):t.mod,B=m.ushrn(1);m=m.andln(1);u=u.cmp(B);return 0>u||1===m&&0===u?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)};l.prototype.modn=function(m){k(67108863>=m);for(var t=67108864%m,u=0,B=(this||kb).length-1;0<=B;B--)u=(t*u+((this||
kb).words[B]|0))%m;return u};l.prototype.idivn=function(m){k(67108863>=m);for(var t=0,u=(this||kb).length-1;0<=u;u--)t=((this||kb).words[u]|0)+67108864*t,(this||kb).words[u]=t/m|0,t%=m;return this.strip()};l.prototype.divn=function(m){return this.clone().idivn(m)};l.prototype.egcd=function(m){k(0===m.negative);k(!m.isZero());var t=this||kb,u=m.clone();t=0!==t.negative?t.umod(m):t.clone();m=new l(1);for(var B=new l(0),A=new l(0),H=new l(1),F=0;t.isEven()&&u.isEven();)t.iushrn(1),u.iushrn(1),++F;for(var L=
u.clone(),U=t.clone();!t.isZero();){for(var T=0,Y=1;0===(t.words[0]&Y)&&26>T;++T,Y<<=1);if(0<T)for(t.iushrn(T);0<T--;){if(m.isOdd()||B.isOdd())m.iadd(L),B.isub(U);m.iushrn(1);B.iushrn(1)}T=0;for(Y=1;0===(u.words[0]&Y)&&26>T;++T,Y<<=1);if(0<T)for(u.iushrn(T);0<T--;){if(A.isOdd()||H.isOdd())A.iadd(L),H.isub(U);A.iushrn(1);H.iushrn(1)}0<=t.cmp(u)?(t.isub(u),m.isub(A),B.isub(H)):(u.isub(t),A.isub(m),H.isub(B))}return{a:A,b:H,gcd:u.iushln(F)}};l.prototype._invmp=function(m){k(0===m.negative);k(!m.isZero());
var t=this||kb,u=m.clone();t=0!==t.negative?t.umod(m):t.clone();for(var B=new l(1),A=new l(0),H=u.clone();0<t.cmpn(1)&&0<u.cmpn(1);){for(var F=0,L=1;0===(t.words[0]&L)&&26>F;++F,L<<=1);if(0<F)for(t.iushrn(F);0<F--;)B.isOdd()&&B.iadd(H),B.iushrn(1);F=0;for(L=1;0===(u.words[0]&L)&&26>F;++F,L<<=1);if(0<F)for(u.iushrn(F);0<F--;)A.isOdd()&&A.iadd(H),A.iushrn(1);0<=t.cmp(u)?(t.isub(u),B.isub(A)):(u.isub(t),A.isub(B))}t=0===t.cmpn(1)?B:A;0>t.cmpn(0)&&t.iadd(m);return t};l.prototype.gcd=function(m){if(this.isZero())return m.abs();
if(m.isZero())return this.abs();var t=this.clone();m=m.clone();t.negative=0;for(var u=m.negative=0;t.isEven()&&m.isEven();u++)t.iushrn(1),m.iushrn(1);do{for(;t.isEven();)t.iushrn(1);for(;m.isEven();)m.iushrn(1);var B=t.cmp(m);if(0>B)B=t,t=m,m=B;else if(0===B||0===m.cmpn(1))break;t.isub(m)}while(1);return m.iushln(u)};l.prototype.invm=function(m){return this.egcd(m).a.umod(m)};l.prototype.isEven=function(){return 0===((this||kb).words[0]&1)};l.prototype.isOdd=function(){return 1===((this||kb).words[0]&
1)};l.prototype.andln=function(m){return(this||kb).words[0]&m};l.prototype.bincn=function(m){k("number"===typeof m);var t=m%26;m=(m-t)/26;t=1<<t;if((this||kb).length<=m)return this._expand(m+1),(this||kb).words[m]|=t,this||kb;for(;0!==t&&m<(this||kb).length;m++){var u=(this||kb).words[m]|0;u+=t;t=u>>>26;u&=67108863;(this||kb).words[m]=u}0!==t&&((this||kb).words[m]=t,(this||kb).length++);return this||kb};l.prototype.isZero=function(){return 1===(this||kb).length&&0===(this||kb).words[0]};l.prototype.cmpn=
function(m){var t=0>m;if(0!==(this||kb).negative&&!t)return-1;if(0===(this||kb).negative&&t)return 1;this.strip();1<(this||kb).length?m=1:(t&&(m=-m),k(67108863>=m,"Number is too big"),t=(this||kb).words[0]|0,m=t===m?0:t<m?-1:1);return 0!==(this||kb).negative?-m|0:m};l.prototype.cmp=function(m){if(0!==(this||kb).negative&&0===m.negative)return-1;if(0===(this||kb).negative&&0!==m.negative)return 1;m=this.ucmp(m);return 0!==(this||kb).negative?-m|0:m};l.prototype.ucmp=function(m){if((this||kb).length>
m.length)return 1;if((this||kb).length<m.length)return-1;for(var t=0,u=(this||kb).length-1;0<=u;u--){var B=(this||kb).words[u]|0,A=m.words[u]|0;if(B!==A){B<A?t=-1:B>A&&(t=1);break}}return t};l.prototype.gtn=function(m){return 1===this.cmpn(m)};l.prototype.gt=function(m){return 1===this.cmp(m)};l.prototype.gten=function(m){return 0<=this.cmpn(m)};l.prototype.gte=function(m){return 0<=this.cmp(m)};l.prototype.ltn=function(m){return-1===this.cmpn(m)};l.prototype.lt=function(m){return-1===this.cmp(m)};
l.prototype.lten=function(m){return 0>=this.cmpn(m)};l.prototype.lte=function(m){return 0>=this.cmp(m)};l.prototype.eqn=function(m){return 0===this.cmpn(m)};l.prototype.eq=function(m){return 0===this.cmp(m)};l.red=function(m){return new y(m)};l.prototype.toRed=function(m){k(!(this||kb).red,"Already a number in reduction context");k(0===(this||kb).negative,"red works only with positives");return m.convertTo(this||kb)._forceRed(m)};l.prototype.fromRed=function(){k((this||kb).red,"fromRed works only with numbers in reduction context");
return(this||kb).red.convertFrom(this||kb)};l.prototype._forceRed=function(m){(this||kb).red=m;return this||kb};l.prototype.forceRed=function(m){k(!(this||kb).red,"Already a number in reduction context");return this._forceRed(m)};l.prototype.redAdd=function(m){k((this||kb).red,"redAdd works only with red numbers");return(this||kb).red.add(this||kb,m)};l.prototype.redIAdd=function(m){k((this||kb).red,"redIAdd works only with red numbers");return(this||kb).red.iadd(this||kb,m)};l.prototype.redSub=function(m){k((this||
kb).red,"redSub works only with red numbers");return(this||kb).red.sub(this||kb,m)};l.prototype.redISub=function(m){k((this||kb).red,"redISub works only with red numbers");return(this||kb).red.isub(this||kb,m)};l.prototype.redShl=function(m){k((this||kb).red,"redShl works only with red numbers");return(this||kb).red.shl(this||kb,m)};l.prototype.redMul=function(m){k((this||kb).red,"redMul works only with red numbers");(this||kb).red._verify2(this||kb,m);return(this||kb).red.mul(this||kb,m)};l.prototype.redIMul=
function(m){k((this||kb).red,"redMul works only with red numbers");(this||kb).red._verify2(this||kb,m);return(this||kb).red.imul(this||kb,m)};l.prototype.redSqr=function(){k((this||kb).red,"redSqr works only with red numbers");(this||kb).red._verify1(this||kb);return(this||kb).red.sqr(this||kb)};l.prototype.redISqr=function(){k((this||kb).red,"redISqr works only with red numbers");(this||kb).red._verify1(this||kb);return(this||kb).red.isqr(this||kb)};l.prototype.redSqrt=function(){k((this||kb).red,
"redSqrt works only with red numbers");(this||kb).red._verify1(this||kb);return(this||kb).red.sqrt(this||kb)};l.prototype.redInvm=function(){k((this||kb).red,"redInvm works only with red numbers");(this||kb).red._verify1(this||kb);return(this||kb).red.invm(this||kb)};l.prototype.redNeg=function(){k((this||kb).red,"redNeg works only with red numbers");(this||kb).red._verify1(this||kb);return(this||kb).red.neg(this||kb)};l.prototype.redPow=function(m){k((this||kb).red&&!m.red,"redPow(normalNum)");(this||
kb).red._verify1(this||kb);return(this||kb).red.pow(this||kb,m)};var aa={k256:null,p224:null,p192:null,p25519:null};e.prototype._tmp=function(){var m=new l(null);m.words=Array(Math.ceil((this||kb).n/13));return m};e.prototype.ireduce=function(m){do{this.split(m,(this||kb).tmp);m=this.imulK(m);m=m.iadd((this||kb).tmp);var t=m.bitLength()}while(t>(this||kb).n);t=t<(this||kb).n?-1:m.ucmp((this||kb).p);0===t?(m.words[0]=0,m.length=1):0<t?m.isub((this||kb).p):void 0!==m.strip?m.strip():m._strip();return m};
e.prototype.split=function(m,t){m.iushrn((this||kb).n,0,t)};e.prototype.imulK=function(m){return m.imul((this||kb).k)};f(n,e);n.prototype.split=function(m,t){for(var u=Math.min(m.length,9),B=0;B<u;B++)t.words[B]=m.words[B];t.length=u;if(9>=m.length)m.words[0]=0,m.length=1;else{u=m.words[9];t.words[t.length++]=u&4194303;for(B=10;B<m.length;B++)t=m.words[B]|0,m.words[B-10]=(t&4194303)<<4|u>>>22,u=t;u>>>=22;m.words[B-10]=u;m.length=0===u&&10<m.length?m.length-10:m.length-9}};n.prototype.imulK=function(m){m.words[m.length]=
0;m.words[m.length+1]=0;m.length+=2;for(var t=0,u=0;u<m.length;u++){var B=m.words[u]|0;t+=977*B;m.words[u]=t&67108863;t=64*B+(t/67108864|0)}0===m.words[m.length-1]&&(m.length--,0===m.words[m.length-1]&&m.length--);return m};f(q,e);f(r,e);f(v,e);v.prototype.imulK=function(m){for(var t=0,u=0;u<m.length;u++){t=19*(m.words[u]|0)+t;var B=t&67108863;t>>>=26;m.words[u]=B}0!==t&&(m.words[m.length++]=t);return m};l._prime=function(m){if(aa[m])return aa[m];if("k256"===m)var t=new n;else if("p224"===m)t=new q;
else if("p192"===m)t=new r;else if("p25519"===m)t=new v;else throw Error("Unknown prime "+m);return aa[m]=t};y.prototype._verify1=function(m){k(0===m.negative,"red works only with positives");k(m.red,"red works only with red numbers")};y.prototype._verify2=function(m,t){k(0===(m.negative|t.negative),"red works only with positives");k(m.red&&m.red===t.red,"red works only with red numbers")};y.prototype.imod=function(m){return(this||kb).prime?(this||kb).prime.ireduce(m)._forceRed(this||kb):m.umod((this||
kb).m)._forceRed(this||kb)};y.prototype.neg=function(m){return m.isZero()?m.clone():(this||kb).m.sub(m)._forceRed(this||kb)};y.prototype.add=function(m,t){this._verify2(m,t);m=m.add(t);0<=m.cmp((this||kb).m)&&m.isub((this||kb).m);return m._forceRed(this||kb)};y.prototype.iadd=function(m,t){this._verify2(m,t);m=m.iadd(t);0<=m.cmp((this||kb).m)&&m.isub((this||kb).m);return m};y.prototype.sub=function(m,t){this._verify2(m,t);m=m.sub(t);0>m.cmpn(0)&&m.iadd((this||kb).m);return m._forceRed(this||kb)};
y.prototype.isub=function(m,t){this._verify2(m,t);m=m.isub(t);0>m.cmpn(0)&&m.iadd((this||kb).m);return m};y.prototype.shl=function(m,t){this._verify1(m);return this.imod(m.ushln(t))};y.prototype.imul=function(m,t){this._verify2(m,t);return this.imod(m.imul(t))};y.prototype.mul=function(m,t){this._verify2(m,t);return this.imod(m.mul(t))};y.prototype.isqr=function(m){return this.imul(m,m.clone())};y.prototype.sqr=function(m){return this.mul(m,m)};y.prototype.sqrt=function(m){if(m.isZero())return m.clone();
var t=(this||kb).m.andln(3);k(1===t%2);if(3===t)return t=(this||kb).m.add(new l(1)).iushrn(2),this.pow(m,t);for(var u=(this||kb).m.subn(1),B=0;!u.isZero()&&0===u.andln(1);)B++,u.iushrn(1);k(!u.isZero());t=(new l(1)).toRed(this||kb);var A=t.redNeg(),H=(this||kb).m.subn(1).iushrn(1),F=(this||kb).m.bitLength();for(F=(new l(2*F*F)).toRed(this||kb);0!==this.pow(F,H).cmp(A);)F.redIAdd(A);H=this.pow(F,u);A=this.pow(m,u.addn(1).iushrn(1));m=this.pow(m,u);for(u=B;0!==m.cmp(t);){F=m;for(B=0;0!==F.cmp(t);B++)F=
F.redSqr();k(B<u);H=this.pow(H,(new l(1)).iushln(u-B-1));A=A.redMul(H);H=H.redSqr();m=m.redMul(H);u=B}return A};y.prototype.invm=function(m){m=m._invmp((this||kb).m);return 0!==m.negative?(m.negative=0,this.imod(m).redNeg()):this.imod(m)};y.prototype.pow=function(m,t){if(t.isZero())return(new l(1)).toRed(this||kb);if(0===t.cmpn(1))return m.clone();var u=Array(16);u[0]=(new l(1)).toRed(this||kb);u[1]=m;for(var B=2;B<u.length;B++)u[B]=this.mul(u[B-1],m);m=u[0];var A=0,H=0,F=t.bitLength()%26;0===F&&
(F=26);for(B=t.length-1;0<=B;B--){var L=t.words[B];for(--F;0<=F;F--){var U=L>>F&1;m!==u[0]&&(m=this.sqr(m));if(0===U&&0===A)H=0;else if(A<<=1,A|=U,H++,4===H||0===B&&0===F)m=this.mul(m,u[A]),A=H=0}F=26}return m};y.prototype.convertTo=function(m){var t=m.umod((this||kb).m);return t===m?t.clone():t};y.prototype.convertFrom=function(m){m=m.clone();m.red=null;return m};l.mont=function(m){return new D(m)};f(D,y);D.prototype.convertTo=function(m){return this.imod(m.ushln((this||kb).shift))};D.prototype.convertFrom=
function(m){m=this.imod(m.mul((this||kb).rinv));m.red=null;return m};D.prototype.imul=function(m,t){if(m.isZero()||t.isZero())return m.words[0]=0,m.length=1,m;m=m.imul(t);t=m.maskn((this||kb).shift).mul((this||kb).minv).imaskn((this||kb).shift).mul((this||kb).m);t=m=m.isub(t).iushrn((this||kb).shift);0<=m.cmp((this||kb).m)?t=m.isub((this||kb).m):0>m.cmpn(0)&&(t=m.iadd((this||kb).m));return t._forceRed(this||kb)};D.prototype.mul=function(m,t){if(m.isZero()||t.isZero())return(new l(0))._forceRed(this||
kb);m=m.mul(t);t=m.maskn((this||kb).shift).mul((this||kb).minv).imaskn((this||kb).shift).mul((this||kb).m);t=m=m.isub(t).iushrn((this||kb).shift);0<=m.cmp((this||kb).m)?t=m.isub((this||kb).m):0>m.cmpn(0)&&(t=m.iadd((this||kb).m));return t._forceRed(this||kb)};D.prototype.invm=function(m){return this.imod(m._invmp((this||kb).m).mul((this||kb).r2))._forceRed(this||kb)}})(aP,E3);return aP.exports}function F3(){function g(f){return 1===f.length?"0"+f:f}function c(f){for(var l="",p=0;p<f.length;p++)l+=
g(f[p].toString(16));return l}if(G3)return bP;G3=!0;var k=bP;k.toArray=function(f,l){if(Array.isArray(f))return f.slice();if(!f)return[];var p=[];if("string"!==typeof f){for(l=0;l<f.length;l++)p[l]=f[l]|0;return p}if("hex"===l)for(f=f.replace(/[^a-z0-9]+/ig,""),0!==f.length%2&&(f="0"+f),l=0;l<f.length;l+=2)p.push(parseInt(f[l]+f[l+1],16));else for(l=0;l<f.length;l++){var b=f.charCodeAt(l),d=b>>8;b&=255;d?p.push(d,b):p.push(b)}return p};k.zero2=g;k.toHex=c;k.encode=function(f,l){return"hex"===l?c(f):
f};return bP}function ao(){if(H3)return cP;H3=!0;var g=cP,c=mr(),k=Rp(),f=F3();g.assert=k;g.toArray=f.toArray;g.zero2=f.zero2;g.toHex=f.toHex;g.encode=f.encode;g.getNAF=function(l,p,b){b=Array(Math.max(l.bitLength(),b)+1);b.fill(0);p=1<<p+1;l=l.clone();for(var d=0;d<b.length;d++){var h=l.andln(p-1);l.isOdd()?(h=h>(p>>1)-1?(p>>1)-h:h,l.isubn(h)):h=0;b[d]=h;l.iushrn(1)}return b};g.getJSF=function(l,p){var b=[[],[]];l=l.clone();p=p.clone();for(var d=0,h=0,a;0<l.cmpn(-d)||0<p.cmpn(-h);){var e=l.andln(3)+
d&3,n=p.andln(3)+h&3;3===e&&(e=-1);3===n&&(n=-1);if(0===(e&1))var q=0;else a=l.andln(7)+d&7,q=3!==a&&5!==a||2!==n?e:-e;b[0].push(q);0===(n&1)?a=0:(a=p.andln(7)+h&7,a=3!==a&&5!==a||2!==e?n:-n);b[1].push(a);2*d===q+1&&(d=1-d);2*h===a+1&&(h=1-h);l.iushrn(1);p.iushrn(1)}return b};g.cachedProperty=function(l,p,b){var d="_"+p;l.prototype[p]=function(){return void 0!==this[d]?this[d]:this[d]=b.call(this)}};g.parseBytes=function(l){return"string"===typeof l?g.toArray(l,"hex"):l};g.intFromLE=function(l){return new c(l,
"hex","le")};return cP}function nG(){function g(d,h){this.type=d;this.p=new k(h.p,16);this.red=h.prime?k.red(h.prime):k.mont(this.p);this.zero=(new k(0)).toRed(this.red);this.one=(new k(1)).toRed(this.red);this.two=(new k(2)).toRed(this.red);this.n=h.n&&new k(h.n,16);this.g=h.g&&this.pointFromJSON(h.g,h.gRed);this._wnafT1=Array(4);this._wnafT2=Array(4);this._wnafT3=Array(4);this._wnafT4=Array(4);this._bitLength=this.n?this.n.bitLength():0;d=this.n&&this.p.div(this.n);!d||0<d.cmpn(100)?this.redN=null:
(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(d,h){this.curve=d;this.type=h;this.precomputed=null}if(I3)return dP;I3=!0;var k=mr(),f=ao(),l=f.getNAF,p=f.getJSF,b=f.assert;dP=g;g.prototype.point=function(){throw Error("Not implemented");};g.prototype.validate=function(){throw Error("Not implemented");};g.prototype._fixedNafMul=function(d,h){b(d.precomputed);d=d._getDoubles();var a=l(h,1,this._bitLength),e=(1<<d.step+1)-(0===d.step%2?2:1);e/=3;h=[];var n;for(n=0;n<a.length;n+=
d.step){var q=0;for(var r=n+d.step-1;r>=n;r--)q=(q<<1)+a[r];h.push(q)}a=this.jpoint(null,null,null);for(r=this.jpoint(null,null,null);0<e;e--){for(n=0;n<h.length;n++)q=h[n],q===e?r=r.mixedAdd(d.points[n]):q===-e&&(r=r.mixedAdd(d.points[n].neg()));a=a.add(r)}return a.toP()};g.prototype._wnafMul=function(d,h){var a=d._getNAFPoints(4),e=a.points;h=l(h,a.wnd,this._bitLength);a=this.jpoint(null,null,null);for(var n=h.length-1;0<=n;n--){for(var q=0;0<=n&&0===h[n];n--)q++;0<=n&&q++;a=a.dblp(q);if(0>n)break;
q=h[n];b(0!==q);a="affine"===d.type?0<q?a.mixedAdd(e[q-1>>1]):a.mixedAdd(e[-q-1>>1].neg()):0<q?a.add(e[q-1>>1]):a.add(e[-q-1>>1].neg())}return"affine"===d.type?a.toP():a};g.prototype._wnafMulAdd=function(d,h,a,e,n){var q=this._wnafT1,r=this._wnafT2,v=this._wnafT3,y=0,D;for(D=0;D<e;D++){var E=h[D];var I=E._getNAFPoints(d);q[D]=I.wnd;r[D]=I.points}for(D=e-1;1<=D;D-=2){I=D-1;var K=D;if(1!==q[I]||1!==q[K])v[I]=l(a[I],q[I],this._bitLength),v[K]=l(a[K],q[K],this._bitLength),y=Math.max(v[I].length,y),y=
Math.max(v[K].length,y);else{var P=[h[I],null,null,h[K]];0===h[I].y.cmp(h[K].y)?(P[1]=h[I].add(h[K]),P[2]=h[I].toJ().mixedAdd(h[K].neg())):0===h[I].y.cmp(h[K].y.redNeg())?(P[1]=h[I].toJ().mixedAdd(h[K]),P[2]=h[I].add(h[K].neg())):(P[1]=h[I].toJ().mixedAdd(h[K]),P[2]=h[I].toJ().mixedAdd(h[K].neg()));var N=[-3,-1,-5,-7,0,7,5,1,3],aa=p(a[I],a[K]);y=Math.max(aa[0].length,y);v[I]=Array(y);v[K]=Array(y);for(d=0;d<y;d++)v[I][d]=N[3*((aa[0][d]|0)+1)+((aa[1][d]|0)+1)],v[K][d]=0,r[I]=P}}h=this.jpoint(null,
null,null);a=this._wnafT4;for(D=y;0<=D;D--){for(y=0;0<=D;){q=!0;for(d=0;d<e;d++)a[d]=v[d][D]|0,0!==a[d]&&(q=!1);if(!q)break;y++;D--}0<=D&&y++;h=h.dblp(y);if(0>D)break;for(d=0;d<e;d++)y=a[d],0!==y&&(0<y?E=r[d][y-1>>1]:0>y&&(E=r[d][-y-1>>1].neg()),h="affine"===E.type?h.mixedAdd(E):h.add(E))}for(D=0;D<e;D++)r[D]=null;return n?h:h.toP()};g.BasePoint=c;c.prototype.eq=function(){throw Error("Not implemented");};c.prototype.validate=function(){return this.curve.validate(this)};g.prototype.decodePoint=function(d,
h){d=f.toArray(d,h);h=this.p.byteLength();if((4===d[0]||6===d[0]||7===d[0])&&d.length-1===2*h)return 6===d[0]?b(0===d[d.length-1]%2):7===d[0]&&b(1===d[d.length-1]%2),this.point(d.slice(1,1+h),d.slice(1+h,1+2*h));if((2===d[0]||3===d[0])&&d.length-1===h)return this.pointFromX(d.slice(1,1+h),3===d[0]);throw Error("Unknown point format");};c.prototype.encodeCompressed=function(d){return this.encode(d,!0)};c.prototype._encode=function(d){var h=this.curve.p.byteLength(),a=this.getX().toArray("be",h);return d?
[this.getY().isEven()?2:3].concat(a):[4].concat(a,this.getY().toArray("be",h))};c.prototype.encode=function(d,h){return f.encode(this._encode(h),d)};c.prototype.precompute=function(d){if(this.precomputed)return this;var h={doubles:null,naf:null,beta:null};h.naf=this._getNAFPoints(8);h.doubles=this._getDoubles(4,d);h.beta=this._getBeta();this.precomputed=h;return this};c.prototype._hasDoubles=function(d){if(!this.precomputed)return!1;var h=this.precomputed.doubles;return h?h.points.length>=Math.ceil((d.bitLength()+
1)/h.step):!1};c.prototype._getDoubles=function(d,h){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var a=[this],e=this,n=0;n<h;n+=d){for(var q=0;q<d;q++)e=e.dbl();a.push(e)}return{step:d,points:a}};c.prototype._getNAFPoints=function(d){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var h=[this],a=(1<<d)-1,e=1===a?null:this.dbl(),n=1;n<a;n++)h[n]=h[n-1].add(e);return{wnd:d,points:h}};c.prototype._getBeta=function(){return null};c.prototype.dblp=
function(d){for(var h=this,a=0;a<d;a++)h=h.dbl();return h};return dP}function ija(){function g(h){b.call(this,"short",h);this.a=(new l(h.a,16)).toRed(this.red);this.b=(new l(h.b,16)).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=0===this.a.fromRed().cmpn(0);this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3);this.endo=this._getEndomorphism(h);this._endoWnafT1=Array(4);this._endoWnafT2=Array(4)}function c(h,a,e,n){b.BasePoint.call(this,h,"affine");null===a&&null===e?(this.y=this.x=null,
this.inf=!0):(this.x=new l(a,16),this.y=new l(e,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function k(h,a,e,n){b.BasePoint.call(this,h,"jacobian");null===a&&null===e&&null===n?(this.y=this.x=this.curve.one,this.z=new l(0)):(this.x=new l(a,16),this.y=new l(e,16),this.z=new l(n,16));this.x.red||(this.x=this.x.toRed(this.curve.red));this.y.red||(this.y=this.y.toRed(this.curve.red));
this.z.red||(this.z=this.z.toRed(this.curve.red));this.zOne=this.z===this.curve.one}if(J3)return eP;J3=!0;var f=ao(),l=mr(),p=Fh(),b=nG(),d=f.assert;p(g,b);eP=g;g.prototype._getEndomorphism=function(h){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){if(h.beta)var a=(new l(h.beta,16)).toRed(this.red);else a=this._getEndoRoots(this.p),a=0>a[0].cmp(a[1])?a[0]:a[1],a=a.toRed(this.red);if(h.lambda)var e=new l(h.lambda,16);else e=this._getEndoRoots(this.n),0===this.g.mul(e[0]).x.cmp(this.g.x.redMul(a))?
e=e[0]:(e=e[1],d(0===this.g.mul(e).x.cmp(this.g.x.redMul(a))));h=h.basis?h.basis.map(function(n){return{a:new l(n.a,16),b:new l(n.b,16)}}):this._getEndoBasis(e);return{beta:a,lambda:e,basis:h}}};g.prototype._getEndoRoots=function(h){var a=h===this.p?this.red:l.mont(h),e=(new l(2)).toRed(a).redInvm();h=e.redNeg();e=(new l(3)).toRed(a).redNeg().redSqrt().redMul(e);a=h.redAdd(e).fromRed();h=h.redSub(e).fromRed();return[a,h]};g.prototype._getEndoBasis=function(h){for(var a=this.n.ushrn(Math.floor(this.n.bitLength()/
2)),e=this.n.clone(),n=new l(1),q=new l(0),r=new l(0),v=new l(1),y,D,E,I,K,P,N=0,aa;0!==h.cmpn(0);){var m=e.div(h);aa=e.sub(m.mul(h));K=r.sub(m.mul(n));m=v.sub(m.mul(q));if(!E&&0>aa.cmp(a))y=P.neg(),D=n,E=aa.neg(),I=K;else if(E&&2===++N)break;P=aa;e=h;h=aa;r=n;n=K;v=q;q=m}a=aa.neg();P=E.sqr().add(I.sqr());0<=a.sqr().add(K.sqr()).cmp(P)&&(a=y,K=D);E.negative&&(E=E.neg(),I=I.neg());a.negative&&(a=a.neg(),K=K.neg());return[{a:E,b:I},{a:a,b:K}]};g.prototype._endoSplit=function(h){var a=this.endo.basis,
e=a[0],n=a[1],q=n.b.mul(h).divRound(this.n),r=e.b.neg().mul(h).divRound(this.n);a=q.mul(e.a);var v=r.mul(n.a);e=q.mul(e.b);n=r.mul(n.b);h=h.sub(a).sub(v);a=e.add(n).neg();return{k1:h,k2:a}};g.prototype.pointFromX=function(h,a){h=new l(h,16);h.red||(h=h.toRed(this.red));var e=h.redSqr().redMul(h).redIAdd(h.redMul(this.a)).redIAdd(this.b),n=e.redSqrt();if(0!==n.redSqr().redSub(e).cmp(this.zero))throw Error("invalid point");e=n.fromRed().isOdd();if(a&&!e||!a&&e)n=n.redNeg();return this.point(h,n)};g.prototype.validate=
function(h){if(h.inf)return!0;var a=h.x;h=h.y;var e=this.a.redMul(a);a=a.redSqr().redMul(a).redIAdd(e).redIAdd(this.b);return 0===h.redSqr().redISub(a).cmpn(0)};g.prototype._endoWnafMulAdd=function(h,a,e){for(var n=this._endoWnafT1,q=this._endoWnafT2,r=0;r<h.length;r++){var v=this._endoSplit(a[r]),y=h[r],D=y._getBeta();v.k1.negative&&(v.k1.ineg(),y=y.neg(!0));v.k2.negative&&(v.k2.ineg(),D=D.neg(!0));n[2*r]=y;n[2*r+1]=D;q[2*r]=v.k1;q[2*r+1]=v.k2}h=this._wnafMulAdd(1,n,q,2*r,e);for(a=0;a<2*r;a++)n[a]=
null,q[a]=null;return h};p(c,b.BasePoint);g.prototype.point=function(h,a,e){return new c(this,h,a,e)};g.prototype.pointFromJSON=function(h,a){return c.fromJSON(this,h,a)};c.prototype._getBeta=function(){if(this.curve.endo){var h=this.precomputed;if(h&&h.beta)return h.beta;var a=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(h){var e=this.curve,n=function(q){return e.point(q.x.redMul(e.endo.beta),q.y)};h.beta=a;a.precomputed={beta:null,naf:h.naf&&{wnd:h.naf.wnd,points:h.naf.points.map(n)},
doubles:h.doubles&&{step:h.doubles.step,points:h.doubles.points.map(n)}}}return a}};c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};c.fromJSON=function(h,a,e){function n(r){return h.point(r[0],r[1],e)}"string"===typeof a&&
(a=JSON.parse(a));var q=h.point(a[0],a[1],e);if(!a[2])return q;a=a[2];q.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[q].concat(a.doubles.points.map(n))},naf:a.naf&&{wnd:a.naf.wnd,points:[q].concat(a.naf.points.map(n))}};return q};c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};c.prototype.isInfinity=function(){return this.inf};c.prototype.add=function(h){if(this.inf)return h;
if(h.inf)return this;if(this.eq(h))return this.dbl();if(this.neg().eq(h)||0===this.x.cmp(h.x))return this.curve.point(null,null);var a=this.y.redSub(h.y);0!==a.cmpn(0)&&(a=a.redMul(this.x.redSub(h.x).redInvm()));h=a.redSqr().redISub(this.x).redISub(h.x);a=a.redMul(this.x.redSub(h)).redISub(this.y);return this.curve.point(h,a)};c.prototype.dbl=function(){if(this.inf)return this;var h=this.y.redAdd(this.y);if(0===h.cmpn(0))return this.curve.point(null,null);var a=this.curve.a,e=this.x.redSqr();h=h.redInvm();
e=e.redAdd(e).redIAdd(e).redIAdd(a).redMul(h);a=e.redSqr().redISub(this.x.redAdd(this.x));e=e.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,e)};c.prototype.getX=function(){return this.x.fromRed()};c.prototype.getY=function(){return this.y.fromRed()};c.prototype.mul=function(h){h=new l(h,16);return this.isInfinity()?this:this._hasDoubles(h)?this.curve._fixedNafMul(this,h):this.curve.endo?this.curve._endoWnafMulAdd([this],[h]):this.curve._wnafMul(this,h)};c.prototype.mulAdd=function(h,
a,e){a=[this,a];h=[h,e];return this.curve.endo?this.curve._endoWnafMulAdd(a,h):this.curve._wnafMulAdd(1,a,h,2)};c.prototype.jmulAdd=function(h,a,e){a=[this,a];h=[h,e];return this.curve.endo?this.curve._endoWnafMulAdd(a,h,!0):this.curve._wnafMulAdd(1,a,h,2,!0)};c.prototype.eq=function(h){return this===h||this.inf===h.inf&&(this.inf||0===this.x.cmp(h.x)&&0===this.y.cmp(h.y))};c.prototype.neg=function(h){if(this.inf)return this;var a=this.curve.point(this.x,this.y.redNeg());if(h&&this.precomputed){h=
this.precomputed;var e=function(n){return n.neg()};a.precomputed={naf:h.naf&&{wnd:h.naf.wnd,points:h.naf.points.map(e)},doubles:h.doubles&&{step:h.doubles.step,points:h.doubles.points.map(e)}}}return a};c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)};p(k,b.BasePoint);g.prototype.jpoint=function(h,a,e){return new k(this,h,a,e)};k.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var h=this.z.redInvm(),
a=h.redSqr(),e=this.x.redMul(a);h=this.y.redMul(a).redMul(h);return this.curve.point(e,h)};k.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};k.prototype.add=function(h){if(this.isInfinity())return h;if(h.isInfinity())return this;var a=h.z.redSqr(),e=this.z.redSqr(),n=this.x.redMul(a),q=h.x.redMul(e);a=this.y.redMul(a.redMul(h.z));e=h.y.redMul(e.redMul(this.z));q=n.redSub(q);e=a.redSub(e);if(0===q.cmpn(0))return 0!==e.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();
var r=q.redSqr(),v=r.redMul(q);r=n.redMul(r);n=e.redSqr().redIAdd(v).redISub(r).redISub(r);a=e.redMul(r.redISub(n)).redISub(a.redMul(v));h=this.z.redMul(h.z).redMul(q);return this.curve.jpoint(n,a,h)};k.prototype.mixedAdd=function(h){if(this.isInfinity())return h.toJ();if(h.isInfinity())return this;var a=this.z.redSqr(),e=this.x,n=h.x.redMul(a),q=this.y;h=h.y.redMul(a).redMul(this.z);n=e.redSub(n);h=q.redSub(h);if(0===n.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var r=
n.redSqr();a=r.redMul(n);r=e.redMul(r);e=h.redSqr().redIAdd(a).redISub(r).redISub(r);q=h.redMul(r.redISub(e)).redISub(q.redMul(a));n=this.z.redMul(n);return this.curve.jpoint(e,q,n)};k.prototype.dblp=function(h){if(0===h||this.isInfinity())return this;if(!h)return this.dbl();var a;if(this.curve.zeroA||this.curve.threeA){var e=this;for(a=0;a<h;a++)e=e.dbl();return e}e=this.curve.a;var n=this.curve.tinv,q=this.x;a=this.y;var r=this.z,v=r.redSqr().redSqr(),y=a.redAdd(a);for(a=0;a<h;a++){var D=q.redSqr(),
E=y.redSqr(),I=E.redSqr();D=D.redAdd(D).redIAdd(D).redIAdd(e.redMul(v));E=q.redMul(E);q=D.redSqr().redISub(E.redAdd(E));E=E.redISub(q);D=D.redMul(E);D=D.redIAdd(D).redISub(I);r=y.redMul(r);a+1<h&&(v=v.redMul(I));y=D}return this.curve.jpoint(q,y.redMul(n),r)};k.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};k.prototype._zeroDbl=function(){if(this.zOne){var h=this.x.redSqr();var a=this.y.redSqr();var e=a.redSqr();
a=this.x.redAdd(a).redSqr().redISub(h).redISub(e);a=a.redIAdd(a);h=h.redAdd(h).redIAdd(h);var n=h.redSqr().redISub(a).redISub(a),q=e.redIAdd(e);q=q.redIAdd(q);q=q.redIAdd(q);e=n;a=h.redMul(a.redISub(n)).redISub(q);h=this.y.redAdd(this.y)}else h=this.x.redSqr(),a=this.y.redSqr(),e=a.redSqr(),a=this.x.redAdd(a).redSqr().redISub(h).redISub(e),a=a.redIAdd(a),h=h.redAdd(h).redIAdd(h),n=h.redSqr(),q=e.redIAdd(e),q=q.redIAdd(q),q=q.redIAdd(q),e=n.redISub(a).redISub(a),a=h.redMul(a.redISub(e)).redISub(q),
h=this.y.redMul(this.z),h=h.redIAdd(h);return this.curve.jpoint(e,a,h)};k.prototype._threeDbl=function(){var h;if(this.zOne){var a=this.x.redSqr();var e=this.y.redSqr();var n=e.redSqr();e=this.x.redAdd(e).redSqr().redISub(a).redISub(n);e=e.redIAdd(e);var q=a.redAdd(a).redIAdd(a).redIAdd(this.curve.a);a=h=q.redSqr().redISub(e).redISub(e);n=n.redIAdd(n);n=n.redIAdd(n);n=n.redIAdd(n);n=q.redMul(e.redISub(h)).redISub(n);h=this.y.redAdd(this.y)}else h=this.z.redSqr(),e=this.y.redSqr(),a=this.x.redMul(e),
n=this.x.redSub(h).redMul(this.x.redAdd(h)),n=n.redAdd(n).redIAdd(n),q=a.redIAdd(a),q=q.redIAdd(q),a=q.redAdd(q),a=n.redSqr().redISub(a),h=this.y.redAdd(this.z).redSqr().redISub(e).redISub(h),e=e.redSqr(),e=e.redIAdd(e),e=e.redIAdd(e),e=e.redIAdd(e),n=n.redMul(q.redISub(a)).redISub(e);return this.curve.jpoint(a,n,h)};k.prototype._dbl=function(){var h=this.curve.a,a=this.x,e=this.y,n=this.z,q=n.redSqr().redSqr(),r=a.redSqr(),v=e.redSqr();h=r.redAdd(r).redIAdd(r).redIAdd(h.redMul(q));a=a.redAdd(a);
a=a.redIAdd(a);q=a.redMul(v);a=h.redSqr().redISub(q.redAdd(q));q=q.redISub(a);v=v.redSqr();v=v.redIAdd(v);v=v.redIAdd(v);v=v.redIAdd(v);v=h.redMul(q).redISub(v);e=e.redAdd(e).redMul(n);return this.curve.jpoint(a,v,e)};k.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var h=this.x.redSqr(),a=this.y.redSqr(),e=this.z.redSqr(),n=a.redSqr(),q=h.redAdd(h).redIAdd(h),r=q.redSqr();h=this.x.redAdd(a).redSqr().redISub(h).redISub(n);h=h.redIAdd(h);h=h.redAdd(h).redIAdd(h);h=h.redISub(r);
var v=h.redSqr();n=n.redIAdd(n);n=n.redIAdd(n);n=n.redIAdd(n);n=n.redIAdd(n);q=q.redIAdd(h).redSqr().redISub(r).redISub(v).redISub(n);a=a.redMul(q);a=a.redIAdd(a);a=a.redIAdd(a);a=this.x.redMul(v).redISub(a);a=a.redIAdd(a);a=a.redIAdd(a);n=this.y.redMul(q.redMul(n.redISub(q)).redISub(h.redMul(v)));n=n.redIAdd(n);n=n.redIAdd(n);n=n.redIAdd(n);e=this.z.redAdd(h).redSqr().redISub(e).redISub(v);return this.curve.jpoint(a,n,e)};k.prototype.mul=function(h,a){h=new l(h,a);return this.curve._wnafMul(this,
h)};k.prototype.eq=function(h){if("affine"===h.type)return this.eq(h.toJ());if(this===h)return!0;var a=this.z.redSqr(),e=h.z.redSqr();if(0!==this.x.redMul(e).redISub(h.x.redMul(a)).cmpn(0))return!1;a=a.redMul(this.z);e=e.redMul(h.z);return 0===this.y.redMul(e).redISub(h.y.redMul(a)).cmpn(0)};k.prototype.eqXToP=function(h){var a=this.z.redSqr(),e=h.toRed(this.curve.red).redMul(a);if(0===this.x.cmp(e))return!0;h=h.clone();for(a=this.curve.redN.redMul(a);;){h.iadd(this.curve.n);if(0<=h.cmp(this.curve.p))return!1;
e.redIAdd(a);if(0===this.x.cmp(e))return!0}};k.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};k.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};return eP}function jja(){function g(b){l.call(this,"mont",b);this.a=(new k(b.a,16)).toRed(this.red);this.b=(new k(b.b,16)).toRed(this.red);this.i4=(new k(4)).toRed(this.red).redInvm();this.two=(new k(2)).toRed(this.red);
this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(b,d,h){l.BasePoint.call(this,b,"projective");null===d&&null===h?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new k(d,16),this.z=new k(h,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}if(K3)return fP;K3=!0;var k=mr(),f=Fh(),l=nG(),p=ao();f(g,l);fP=g;g.prototype.validate=function(b){b=b.normalize().x;var d=b.redSqr();b=d.redMul(b).redAdd(d.redMul(this.a)).redAdd(b);return 0===
b.redSqrt().redSqr().cmp(b)};f(c,l.BasePoint);g.prototype.decodePoint=function(b,d){return this.point(p.toArray(b,d),1)};g.prototype.point=function(b,d){return new c(this,b,d)};g.prototype.pointFromJSON=function(b){return c.fromJSON(this,b)};c.prototype.precompute=function(){};c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};c.fromJSON=function(b,d){return new c(b,d[0],d[1]||b.one)};c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":
"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};c.prototype.dbl=function(){var b=this.x.redAdd(this.z).redSqr(),d=this.x.redSub(this.z).redSqr(),h=b.redSub(d);b=b.redMul(d);d=h.redMul(d.redAdd(this.curve.a24.redMul(h)));return this.curve.point(b,d)};c.prototype.add=function(){throw Error("Not supported on Montgomery curve");};c.prototype.diffAdd=function(b,d){var h=this.x.redAdd(this.z),a=this.x.redSub(this.z),
e=b.x.redAdd(b.z);b=b.x.redSub(b.z).redMul(h);e=e.redMul(a);a=d.z.redMul(b.redAdd(e).redSqr());d=d.x.redMul(b.redISub(e).redSqr());return this.curve.point(a,d)};c.prototype.mul=function(b){var d=b.clone();b=this;for(var h=this.curve.point(null,null),a=[];0!==d.cmpn(0);d.iushrn(1))a.push(d.andln(1));for(d=a.length-1;0<=d;d--)0===a[d]?(b=b.diffAdd(h,this),h=h.dbl()):(h=b.diffAdd(h,this),b=b.dbl());return h};c.prototype.mulAdd=function(){throw Error("Not supported on Montgomery curve");};c.prototype.jumlAdd=
function(){throw Error("Not supported on Montgomery curve");};c.prototype.eq=function(b){return 0===this.getX().cmp(b.getX())};c.prototype.normalize=function(){this.x=this.x.redMul(this.z.redInvm());this.z=this.curve.one;return this};c.prototype.getX=function(){this.normalize();return this.x.fromRed()};return fP}function kja(){function g(d){this.extended=this.mOneA=(this.twisted=1!==(d.a|0))&&-1===(d.a|0);p.call(this,"edwards",d);this.a=(new f(d.a,16)).umod(this.red.m);this.a=this.a.toRed(this.red);
this.c=(new f(d.c,16)).toRed(this.red);this.c2=this.c.redSqr();this.d=(new f(d.d,16)).toRed(this.red);this.dd=this.d.redAdd(this.d);b(!this.twisted||0===this.c.fromRed().cmpn(1));this.oneC=1===(d.c|0)}function c(d,h,a,e,n){p.BasePoint.call(this,d,"projective");null===h&&null===a&&null===e?(this.x=this.curve.zero,this.z=this.y=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new f(h,16),this.y=new f(a,16),this.z=e?new f(e,16):this.curve.one,this.t=n&&new f(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),
this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}if(L3)return gP;L3=!0;var k=ao(),f=mr(),l=Fh(),p=nG(),b=k.assert;l(g,p);gP=g;g.prototype._mulA=function(d){return this.mOneA?d.redNeg():this.a.redMul(d)};g.prototype._mulC=function(d){return this.oneC?
d:this.c.redMul(d)};g.prototype.jpoint=function(d,h,a,e){return this.point(d,h,a,e)};g.prototype.pointFromX=function(d,h){d=new f(d,16);d.red||(d=d.toRed(this.red));var a=d.redSqr(),e=this.c2.redSub(this.a.redMul(a));a=this.one.redSub(this.c2.redMul(this.d).redMul(a));a=e.redMul(a.redInvm());e=a.redSqrt();if(0!==e.redSqr().redSub(a).cmp(this.zero))throw Error("invalid point");a=e.fromRed().isOdd();if(h&&!a||!h&&a)e=e.redNeg();return this.point(d,e)};g.prototype.pointFromY=function(d,h){d=new f(d,
16);d.red||(d=d.toRed(this.red));var a=d.redSqr(),e=a.redSub(this.c2);a=a.redMul(this.d).redMul(this.c2).redSub(this.a);e=e.redMul(a.redInvm());if(0===e.cmp(this.zero)){if(h)throw Error("invalid point");return this.point(this.zero,d)}a=e.redSqrt();if(0!==a.redSqr().redSub(e).cmp(this.zero))throw Error("invalid point");a.fromRed().isOdd()!==h&&(a=a.redNeg());return this.point(a,d)};g.prototype.validate=function(d){if(d.isInfinity())return!0;d.normalize();var h=d.x.redSqr(),a=d.y.redSqr();d=h.redMul(this.a).redAdd(a);
h=this.c2.redMul(this.one.redAdd(this.d.redMul(h).redMul(a)));return 0===d.cmp(h)};l(c,p.BasePoint);g.prototype.pointFromJSON=function(d){return c.fromJSON(this,d)};g.prototype.point=function(d,h,a,e){return new c(this,d,h,a,e)};c.fromJSON=function(d,h){return new c(d,h[0],h[1],h[2])};c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};c.prototype.isInfinity=
function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))};c.prototype._extDbl=function(){var d=this.x.redSqr(),h=this.y.redSqr(),a=this.z.redSqr();a=a.redIAdd(a);var e=this.curve._mulA(d),n=this.x.redAdd(this.y).redSqr().redISub(d).redISub(h);d=e.redAdd(h);a=d.redSub(a);var q=e.redSub(h);h=n.redMul(a);e=d.redMul(q);n=n.redMul(q);d=a.redMul(d);return this.curve.point(h,e,d,n)};c.prototype._projDbl=function(){var d=this.x.redAdd(this.y).redSqr(),h=this.x.redSqr(),
a=this.y.redSqr();if(this.curve.twisted){var e=this.curve._mulA(h);var n=e.redAdd(a);if(this.zOne)d=d.redSub(h).redSub(a).redMul(n.redSub(this.curve.two)),h=n.redMul(e.redSub(a)),e=n.redSqr().redSub(n).redSub(n);else{var q=this.z.redSqr();q=n.redSub(q).redISub(q);d=d.redSub(h).redISub(a).redMul(q);h=n.redMul(e.redSub(a));e=n.redMul(q)}}else e=h.redAdd(a),q=this.curve._mulC(this.z).redSqr(),q=e.redSub(q).redSub(q),d=this.curve._mulC(d.redISub(e)).redMul(q),h=this.curve._mulC(e).redMul(h.redISub(a)),
e=e.redMul(q);return this.curve.point(d,h,e)};c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};c.prototype._extAdd=function(d){var h=this.y.redSub(this.x).redMul(d.y.redSub(d.x)),a=this.y.redAdd(this.x).redMul(d.y.redAdd(d.x)),e=this.t.redMul(this.curve.dd).redMul(d.t),n=this.z.redMul(d.z.redAdd(d.z)),q=a.redSub(h);d=n.redSub(e);e=n.redAdd(e);n=a.redAdd(h);h=q.redMul(d);a=e.redMul(n);q=q.redMul(n);d=d.redMul(e);return this.curve.point(h,
a,d,q)};c.prototype._projAdd=function(d){var h=this.z.redMul(d.z),a=h.redSqr(),e=this.x.redMul(d.x),n=this.y.redMul(d.y),q=this.curve.d.redMul(e).redMul(n),r=a.redSub(q);a=a.redAdd(q);d=this.x.redAdd(this.y).redMul(d.x.redAdd(d.y)).redISub(e).redISub(n);d=h.redMul(r).redMul(d);this.curve.twisted?(h=h.redMul(a).redMul(n.redSub(this.curve._mulA(e))),r=r.redMul(a)):(h=h.redMul(a).redMul(n.redSub(e)),r=this.curve._mulC(r).redMul(a));return this.curve.point(d,h,r)};c.prototype.add=function(d){return this.isInfinity()?
d:d.isInfinity()?this:this.curve.extended?this._extAdd(d):this._projAdd(d)};c.prototype.mul=function(d){return this._hasDoubles(d)?this.curve._fixedNafMul(this,d):this.curve._wnafMul(this,d)};c.prototype.mulAdd=function(d,h,a){return this.curve._wnafMulAdd(1,[this,h],[d,a],2,!1)};c.prototype.jmulAdd=function(d,h,a){return this.curve._wnafMulAdd(1,[this,h],[d,a],2,!0)};c.prototype.normalize=function(){if(this.zOne)return this;var d=this.z.redInvm();this.x=this.x.redMul(d);this.y=this.y.redMul(d);this.t&&
(this.t=this.t.redMul(d));this.z=this.curve.one;this.zOne=!0;return this};c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};c.prototype.getX=function(){this.normalize();return this.x.fromRed()};c.prototype.getY=function(){this.normalize();return this.y.fromRed()};c.prototype.eq=function(d){return this===d||0===this.getX().cmp(d.getX())&&0===this.getY().cmp(d.getY())};c.prototype.eqXToP=function(d){var h=d.toRed(this.curve.red).redMul(this.z);
if(0===this.x.cmp(h))return!0;d=d.clone();for(var a=this.curve.redN.redMul(this.z);;){d.iadd(this.curve.n);if(0<=d.cmp(this.curve.p))return!1;h.redIAdd(a);if(0===this.x.cmp(h))return!0}};c.prototype.toP=c.prototype.normalize;c.prototype.mixedAdd=c.prototype.add;return gP}function M3(){if(N3)return hP;N3=!0;var g=hP;g.base=nG();g.short=ija();g.mont=jja();g.edwards=kja();return hP}function oG(){function g(p){return(p>>>24|p>>>8&65280|p<<8&16711680|(p&255)<<24)>>>0}function c(p){return 1===p.length?
"0"+p:p}function k(p){return 7===p.length?"0"+p:6===p.length?"00"+p:5===p.length?"000"+p:4===p.length?"0000"+p:3===p.length?"00000"+p:2===p.length?"000000"+p:1===p.length?"0000000"+p:p}if(O3)return fj;O3=!0;var f=Rp(),l=Fh();fj.inherits=l;fj.toArray=function(p,b){if(Array.isArray(p))return p.slice();if(!p)return[];var d=[];if("string"===typeof p)if(!b)for(var h=b=0;h<p.length;h++){var a=p.charCodeAt(h);if(128>a)d[b++]=a;else{if(2048>a)d[b++]=a>>6|192;else{var e=p;var n=h;e=55296!==(e.charCodeAt(n)&
64512)?!1:0>n||n+1>=e.length?!1:56320===(e.charCodeAt(n+1)&64512);e?(a=65536+((a&1023)<<10)+(p.charCodeAt(++h)&1023),d[b++]=a>>18|240,d[b++]=a>>12&63|128):d[b++]=a>>12|224;d[b++]=a>>6&63|128}d[b++]=a&63|128}}else{if("hex"===b)for(p=p.replace(/[^a-z0-9]+/ig,""),0!==p.length%2&&(p="0"+p),h=0;h<p.length;h+=2)d.push(parseInt(p[h]+p[h+1],16))}else for(h=0;h<p.length;h++)d[h]=p[h]|0;return d};fj.toHex=function(p){for(var b="",d=0;d<p.length;d++)b+=c(p[d].toString(16));return b};fj.htonl=g;fj.toHex32=function(p,
b){for(var d="",h=0;h<p.length;h++){var a=p[h];"little"===b&&(a=g(a));d+=k(a.toString(16))}return d};fj.zero2=c;fj.zero8=k;fj.join32=function(p,b,d,h){d-=b;f(0===d%4);d=Array(d/4);for(var a=0;a<d.length;a++,b+=4)d[a]=("big"===h?p[b]<<24|p[b+1]<<16|p[b+2]<<8|p[b+3]:p[b+3]<<24|p[b+2]<<16|p[b+1]<<8|p[b])>>>0;return d};fj.split32=function(p,b){for(var d=Array(4*p.length),h=0,a=0;h<p.length;h++,a+=4){var e=p[h];"big"===b?(d[a]=e>>>24,d[a+1]=e>>>16&255,d[a+2]=e>>>8&255,d[a+3]=e&255):(d[a+3]=e>>>24,d[a+
2]=e>>>16&255,d[a+1]=e>>>8&255,d[a]=e&255)}return d};fj.rotr32=function(p,b){return p>>>b|p<<32-b};fj.rotl32=function(p,b){return p<<b|p>>>32-b};fj.sum32=function(p,b){return p+b>>>0};fj.sum32_3=function(p,b,d){return p+b+d>>>0};fj.sum32_4=function(p,b,d,h){return p+b+d+h>>>0};fj.sum32_5=function(p,b,d,h,a){return p+b+d+h+a>>>0};fj.sum64=function(p,b,d,h){var a=h+p[b+1]>>>0;p[b]=(a<h?1:0)+d+p[b]>>>0;p[b+1]=a};fj.sum64_hi=function(p,b,d,h){return(b+h>>>0<b?1:0)+p+d>>>0};fj.sum64_lo=function(p,b,d,
h){return b+h>>>0};fj.sum64_4_hi=function(p,b,d,h,a,e,n,q){h=b+h>>>0;b=h<b?1:0;h=h+e>>>0;b+=h<e?1:0;return p+d+a+n+(b+(h+q>>>0<q?1:0))>>>0};fj.sum64_4_lo=function(p,b,d,h,a,e,n,q){return b+h+e+q>>>0};fj.sum64_5_hi=function(p,b,d,h,a,e,n,q,r,v){h=b+h>>>0;b=h<b?1:0;h=h+e>>>0;b+=h<e?1:0;h=h+q>>>0;b+=h<q?1:0;return p+d+a+n+r+(b+(h+v>>>0<v?1:0))>>>0};fj.sum64_5_lo=function(p,b,d,h,a,e,n,q,r,v){return b+h+e+q+v>>>0};fj.rotr64_hi=function(p,b,d){return(b<<32-d|p>>>d)>>>0};fj.rotr64_lo=function(p,b,d){return(p<<
32-d|b>>>d)>>>0};fj.shr64_hi=function(p,b,d){return p>>>d};fj.shr64_lo=function(p,b,d){return(p<<32-d|b>>>d)>>>0};return fj}function P3(){function g(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}if(Q3)return iP;Q3=!0;var c=oG(),k=Rp();iP.BlockHash=g;g.prototype.update=
function(f,l){f=c.toArray(f,l);this.pending=this.pending?this.pending.concat(f):f;this.pendingTotal+=f.length;if(this.pending.length>=this._delta8)for(f=this.pending,l=f.length%this._delta8,this.pending=f.slice(f.length-l,f.length),0===this.pending.length&&(this.pending=null),f=c.join32(f,0,f.length-l,this.endian),l=0;l<f.length;l+=this._delta32)this._update(f,l,l+this._delta32);return this};g.prototype.digest=function(f){this.update(this._pad());k(null===this.pending);return this._digest(f)};g.prototype._pad=
function(){var f=this.pendingTotal,l=this._delta8,p=l-(f+this.padLength)%l;l=Array(p+this.padLength);l[0]=128;for(var b=1;b<p;b++)l[b]=0;f<<=3;if("big"===this.endian){for(p=8;p<this.padLength;p++)l[b++]=0;l[b++]=0;l[b++]=0;l[b++]=0;l[b++]=0;l[b++]=f>>>24&255;l[b++]=f>>>16&255;l[b++]=f>>>8&255;l[b++]=f&255}else for(l[b++]=f&255,l[b++]=f>>>8&255,l[b++]=f>>>16&255,l[b++]=f>>>24&255,l[b++]=0,l[b++]=0,l[b++]=0,l[b++]=0,p=8;p<this.padLength;p++)l[b++]=0;return l};return iP}function lja(){function g(){if(!(this instanceof
g))return new g;h.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.endian="little"}function c(r,v,y,D){return 15>=r?v^y^D:31>=r?v&y|~v&D:47>=r?(v|~y)^D:63>=r?v&D|y&~D:v^(y|~D)}if(R3)return jP;R3=!0;var k=oG(),f=P3(),l=k.rotl32,p=k.sum32,b=k.sum32_3,d=k.sum32_4,h=f.BlockHash;k.inherits(g,h);jP.ripemd160=g;g.blockSize=512;g.outSize=160;g.hmacStrength=192;g.padLength=64;g.prototype._update=function(r,v){for(var y=this.h[0],D=this.h[1],E=this.h[2],I=this.h[3],K=this.h[4],
P=y,N=D,aa=E,m=I,t=K,u=0;80>u;u++){var B=p(l(d(y,c(u,D,E,I),r[a[u]+v],15>=u?0:31>=u?1518500249:47>=u?1859775393:63>=u?2400959708:2840853838),n[u]),K);y=K;K=I;I=l(E,10);E=D;D=B;B=p(l(d(P,c(79-u,N,aa,m),r[e[u]+v],15>=u?1352829926:31>=u?1548603684:47>=u?1836072691:63>=u?2053994217:0),q[u]),t);P=t;t=m;m=l(aa,10);aa=N;N=B}B=b(this.h[1],E,m);this.h[1]=b(this.h[2],I,t);this.h[2]=b(this.h[3],K,P);this.h[3]=b(this.h[4],y,N);this.h[4]=b(this.h[0],D,aa);this.h[0]=B};g.prototype._digest=function(r){return"hex"===
r?k.toHex32(this.h,"little"):k.split32(this.h,"little")};var a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],e=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],n=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,
11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],q=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return jP}function mja(){function g(f,l,p){if(!(this instanceof g))return new g(f,l,p);this.Hash=f;this.blockSize=f.blockSize/8;this.outSize=f.outSize/
8;this.outer=this.inner=null;this._init(c.toArray(l,p))}if(S3)return kP;S3=!0;var c=oG(),k=Rp();kP=g;g.prototype._init=function(f){f.length>this.blockSize&&(f=(new this.Hash).update(f).digest());k(f.length<=this.blockSize);for(var l=f.length;l<this.blockSize;l++)f.push(0);for(l=0;l<f.length;l++)f[l]^=54;this.inner=(new this.Hash).update(f);for(l=0;l<f.length;l++)f[l]^=106;this.outer=(new this.Hash).update(f)};g.prototype.update=function(f,l){this.inner.update(f,l);return this};g.prototype.digest=
function(f){this.outer.update(this.inner.digest());return this.outer.digest(f)};return kP}function lP(){if(T3)return mP;T3=!0;var g=mP;g.utils=oG();g.common=P3();U3||(U3=!0);var c=nja;g.sha=c;g.ripemd=lja();g.hmac=mja();g.sha1=g.sha.sha1;g.sha256=g.sha.sha256;g.sha224=g.sha.sha224;g.sha384=g.sha.sha384;g.sha512=g.sha.sha512;g.ripemd160=g.ripemd.ripemd160;return mP}function nP(){function g(d){this.curve="short"===d.type?new l.short(d):"edwards"===d.type?new l.edwards(d):new l.mont(d);this.g=this.curve.g;
this.n=this.curve.n;this.hash=d.hash;p(this.g.validate(),"Invalid curve");p(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(d,h){Object.defineProperty(k,d,{configurable:!0,enumerable:!0,get:function(){var a=new g(h);Object.defineProperty(k,d,{configurable:!0,enumerable:!0,value:a});return a}})}if(V3)return oP;V3=!0;var k=oP,f=lP(),l=M3(),p=ao().assert;k.PresetCurve=g;c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",
b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:f.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",
hash:f.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:f.sha256,
gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",
n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:f.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",
a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:f.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66",
"00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:f.sha256,gRed:!1,g:["9"]});c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",
a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:f.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{W3||(W3=!0,X3={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508",
"11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda",
"96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d",
"e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862",
"283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a",
"53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754",
"4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891",
"893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070",
"7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e",
"efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d",
"648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266",
"40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e",
"493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19",
"aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13",
"7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073",
"d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa",
"40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9",
"388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb",
"d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c",
"85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729",
"a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479",
"2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9",
"eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b",
"5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435",
"91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f",
"55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a",
"744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519",
"e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610",
"68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980",
"a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448",
"fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5",
"5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5",
"204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66",
"d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31",
"3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b",
"6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246",
"b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197",
"6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a",
"49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26",
"8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda",
"ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942",
"fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1",
"cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00",
"9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e",
"67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6",
"462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52",
"4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9",
"cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8",
"9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}});var b=X3}catch(d){b=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",
h:"1",hash:f.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",b]});return oP}function oja(){function g(l){if(!(this instanceof
g))return new g(l);this.hash=l.hash;this.predResist=!!l.predResist;this.outLen=this.hash.outSize;this.minEntropy=l.minEntropy||this.hash.hmacStrength;this.V=this.K=this.reseedInterval=this._reseed=null;var p=k.toArray(l.entropy,l.entropyEnc||"hex"),b=k.toArray(l.nonce,l.nonceEnc||"hex");l=k.toArray(l.pers,l.persEnc||"hex");f(p.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._init(p,b,l)}if(Y3)return pP;Y3=!0;var c=lP(),k=F3(),f=Rp();pP=g;g.prototype._init=
function(l,p,b){l=l.concat(p).concat(b);this.K=Array(this.outLen/8);this.V=Array(this.outLen/8);for(p=0;p<this.V.length;p++)this.K[p]=0,this.V[p]=1;this._update(l);this._reseed=1;this.reseedInterval=281474976710656};g.prototype._hmac=function(){return new c.hmac(this.hash,this.K)};g.prototype._update=function(l){var p=this._hmac().update(this.V).update([0]);l&&(p=p.update(l));this.K=p.digest();this.V=this._hmac().update(this.V).digest();l&&(this.K=this._hmac().update(this.V).update([1]).update(l).digest(),
this.V=this._hmac().update(this.V).digest())};g.prototype.reseed=function(l,p,b,d){"string"!==typeof p&&(d=b,b=p,p=null);l=k.toArray(l,p);b=k.toArray(b,d);f(l.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(l.concat(b||[]));this._reseed=1};g.prototype.generate=function(l,p,b,d){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!==typeof p&&(d=b,b=p,p=null);b&&(b=k.toArray(b,d||"hex"),this._update(b));for(d=[];d.length<
l;)this.V=this._hmac().update(this.V).digest(),d=d.concat(this.V);l=d.slice(0,l);this._update(b);this._reseed++;return k.encode(l,p)};return pP}function pja(){function g(f,l){this.ec=f;this.pub=this.priv=null;l.priv&&this._importPrivate(l.priv,l.privEnc);l.pub&&this._importPublic(l.pub,l.pubEnc)}if(Z3)return qP;Z3=!0;var c=mr(),k=ao().assert;qP=g;g.fromPublic=function(f,l,p){return l instanceof g?l:new g(f,{pub:l,pubEnc:p})};g.fromPrivate=function(f,l,p){return l instanceof g?l:new g(f,{priv:l,privEnc:p})};
g.prototype.validate=function(){var f=this.getPublic();return f.isInfinity()?{result:!1,reason:"Invalid public key"}:f.validate()?f.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};g.prototype.getPublic=function(f,l){"string"===typeof f&&(l=f,f=null);this.pub||(this.pub=this.ec.g.mul(this.priv));return l?this.pub.encode(l,f):this.pub};g.prototype.getPrivate=function(f){return"hex"===f?this.priv.toString(16,
2):this.priv};g.prototype._importPrivate=function(f,l){this.priv=new c(f,l||16);this.priv=this.priv.umod(this.ec.curve.n)};g.prototype._importPublic=function(f,l){f.x||f.y?("mont"===this.ec.curve.type?k(f.x,"Need x coordinate"):("short"===this.ec.curve.type||"edwards"===this.ec.curve.type)&&k(f.x&&f.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(f.x,f.y)):this.pub=this.ec.curve.decodePoint(f,l)};g.prototype.derive=function(f){f.validate()||k(f.validate(),"public point not validated");
return f.mul(this.priv).getX()};g.prototype.sign=function(f,l,p){return this.ec.sign(f,this,l,p)};g.prototype.verify=function(f,l){return this.ec.verify(f,l,this)};g.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};return qP}function qja(){function g(h,a){if(h instanceof g)return h;this._importDER(h,a)||(d(h.r&&h.s,"Signature without r or s"),this.r=new p(h.r,16),this.s=new p(h.s,16),this.recoveryParam=void 0===h.recoveryParam?
null:h.recoveryParam)}function c(){this.place=0}function k(h,a){var e=h[a.place++];if(!(e&128))return e;e&=15;if(0===e||4<e)return!1;for(var n=0,q=0,r=a.place;q<e;q++,r++)n<<=8,n|=h[r],n>>>=0;if(127>=n)return!1;a.place=r;return n}function f(h){for(var a=0,e=h.length-1;!(h[a]||h[a+1]&128)&&a<e;)a++;return 0===a?h:h.slice(a)}function l(h,a){if(!(128>a)){var e=1+(Math.log(a)/Math.LN2>>>3);for(h.push(e|128);--e;)h.push(a>>>(e<<3)&255)}h.push(a)}if($3)return rP;$3=!0;var p=mr(),b=ao(),d=b.assert;rP=g;
g.prototype._importDER=function(h,a){h=b.toArray(h,a);a=new c;if(48!==h[a.place++])return!1;var e=k(h,a);if(!1===e||e+a.place!==h.length||2!==h[a.place++])return!1;var n=k(h,a);if(!1===n)return!1;e=h.slice(a.place,n+a.place);a.place+=n;if(2!==h[a.place++])return!1;n=k(h,a);if(!1===n||h.length!==n+a.place)return!1;h=h.slice(a.place,n+a.place);if(0===e[0])if(e[1]&128)e=e.slice(1);else return!1;if(0===h[0])if(h[1]&128)h=h.slice(1);else return!1;this.r=new p(e);this.s=new p(h);this.recoveryParam=null;
return!0};g.prototype.toDER=function(h){var a=this.r.toArray(),e=this.s.toArray();a[0]&128&&(a=[0].concat(a));e[0]&128&&(e=[0].concat(e));a=f(a);for(e=f(e);!(e[0]||e[1]&128);)e=e.slice(1);var n=[2];l(n,a.length);n=n.concat(a);n.push(2);l(n,e.length);a=n.concat(e);e=[48];l(e,a.length);e=e.concat(a);return b.encode(e,h)};return rP}function rja(){function g(a){if(!(this instanceof g))return new g(a);"string"===typeof a&&(b(Object.prototype.hasOwnProperty.call(l,a),"Unknown curve "+a),a=l[a]);a instanceof
l.PresetCurve&&(a={curve:a});this.curve=a.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=a.curve.g;this.g.precompute(a.curve.n.bitLength()+1);this.hash=a.hash||a.curve.hash}if(a4)return sP;a4=!0;var c=mr(),k=oja(),f=ao(),l=nP(),p=UO(),b=f.assert,d=pja(),h=qja();sP=g;g.prototype.keyPair=function(a){return new d(this,a)};g.prototype.keyFromPrivate=function(a,e){return d.fromPrivate(this,a,e)};g.prototype.keyFromPublic=function(a,e){return d.fromPublic(this,a,e)};
g.prototype.genKeyPair=function(a){a||(a={});a=new k({hash:this.hash,pers:a.pers,persEnc:a.persEnc||"utf8",entropy:a.entropy||p(this.hash.hmacStrength),entropyEnc:a.entropy&&a.entropyEnc||"utf8",nonce:this.n.toArray()});for(var e=this.n.byteLength(),n=this.n.sub(new c(2));;){var q=new c(a.generate(e));if(!(0<q.cmp(n)))return q.iaddn(1),this.keyFromPrivate(q)}};g.prototype._truncateToN=function(a,e){var n=8*a.byteLength()-this.n.bitLength();0<n&&(a=a.ushrn(n));return!e&&0<=a.cmp(this.n)?a.sub(this.n):
a};g.prototype.sign=function(a,e,n,q){"object"===typeof n&&(q=n,n=null);q||(q={});e=this.keyFromPrivate(e,n);a=this._truncateToN(new c(a,16));var r=this.n.byteLength();n=e.getPrivate().toArray("be",r);r=a.toArray("be",r);r=new k({hash:this.hash,entropy:n,nonce:r,pers:q.pers,persEnc:q.persEnc||"utf8"});for(var v=this.n.sub(new c(1)),y=0;;y++){var D=q.k?q.k(y):new c(r.generate(this.n.byteLength()));D=this._truncateToN(D,!0);if(!(0>=D.cmpn(1)||0<=D.cmp(v))){var E=this.g.mul(D);if(!E.isInfinity()){var I=
E.getX();n=I.umod(this.n);if(0!==n.cmpn(0)&&(D=D.invm(this.n).mul(n.mul(e.getPrivate()).iadd(a)),D=D.umod(this.n),0!==D.cmpn(0)))return a=(E.getY().isOdd()?1:0)|(0!==I.cmp(n)?2:0),q.canonical&&0<D.cmp(this.nh)&&(D=this.n.sub(D),a^=1),new h({r:n,s:D,recoveryParam:a})}}}};g.prototype.verify=function(a,e,n,q){a=this._truncateToN(new c(a,16));n=this.keyFromPublic(n,q);e=new h(e,"hex");q=e.r;e=e.s;if(0>q.cmpn(1)||0<=q.cmp(this.n)||0>e.cmpn(1)||0<=e.cmp(this.n))return!1;e=e.invm(this.n);a=e.mul(a).umod(this.n);
e=e.mul(q).umod(this.n);if(!this.curve._maxwellTrick)return n=this.g.mulAdd(a,n.getPublic(),e),n.isInfinity()?!1:0===n.getX().umod(this.n).cmp(q);n=this.g.jmulAdd(a,n.getPublic(),e);return n.isInfinity()?!1:n.eqXToP(q)};g.prototype.recoverPubKey=function(a,e,n,q){b((3&n)===n,"The recovery param is more than two bits");e=new h(e,q);q=this.n;var r=new c(a);a=e.r;var v=e.s,y=n&1;n>>=1;if(0<=a.cmp(this.curve.p.umod(this.curve.n))&&n)throw Error("Unable to find sencond key candinate");a=n?this.curve.pointFromX(a.add(this.curve.n),
y):this.curve.pointFromX(a,y);e=e.r.invm(q);n=q.sub(r).mul(e).umod(q);q=v.mul(e).umod(q);return this.g.mulAdd(n,a,q)};g.prototype.getKeyRecoveryParam=function(a,e,n,q){e=new h(e,q);if(null!==e.recoveryParam)return e.recoveryParam;for(q=0;4>q;q++){try{var r=this.recoverPubKey(a,e,q)}catch(v){continue}if(r.eq(n))return q}throw Error("Unable to find valid recovery factor");};return sP}function sja(){function g(p,b){this.eddsa=p;this._secret=f(b.secret);p.isPoint(b.pub)?this._pub=b.pub:this._pubBytes=
f(b.pub)}if(b4)return c4;b4=!0;var c=ao(),k=c.assert,f=c.parseBytes,l=c.cachedProperty;g.fromPublic=function(p,b){return b instanceof g?b:new g(p,{pub:b})};g.fromSecret=function(p,b){return b instanceof g?b:new g(p,{secret:b})};g.prototype.secret=function(){return this._secret};l(g,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});l(g,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});l(g,"privBytes",function(){var p=this.eddsa,
b=this.hash(),d=p.encodingLength-1;p=b.slice(0,p.encodingLength);p[0]&=248;p[d]&=127;p[d]|=64;return p});l(g,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});l(g,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});l(g,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});g.prototype.sign=function(p){k(this._secret,"KeyPair can only verify");return this.eddsa.sign(p,this)};g.prototype.verify=function(p,b){return this.eddsa.verify(p,
b,this)};g.prototype.getSecret=function(p){k(this._secret,"KeyPair is public only");return c.encode(this.secret(),p)};g.prototype.getPublic=function(p){return c.encode(this.pubBytes(),p)};return c4=g}function tja(){function g(b,d){this.eddsa=b;"object"!==typeof d&&(d=p(d));Array.isArray(d)&&(d={R:d.slice(0,b.encodingLength),S:d.slice(b.encodingLength)});f(d.R&&d.S,"Signature without R or S");b.isPoint(d.R)&&(this._R=d.R);d.S instanceof c&&(this._S=d.S);this._Rencoded=Array.isArray(d.R)?d.R:d.Rencoded;
this._Sencoded=Array.isArray(d.S)?d.S:d.Sencoded}if(d4)return e4;d4=!0;var c=mr(),k=ao(),f=k.assert,l=k.cachedProperty,p=k.parseBytes;l(g,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});l(g,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});l(g,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});l(g,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});g.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};g.prototype.toHex=function(){return k.encode(this.toBytes(),
"hex").toUpperCase()};return e4=g}function uja(){function g(h){l("ed25519"===h,"only tested with ed25519 so far");if(!(this instanceof g))return new g(h);this.curve=h=k[h].curve;this.g=h.g;this.g.precompute(h.n.bitLength()+1);this.pointClass=h.point().constructor;this.encodingLength=Math.ceil(h.n.bitLength()/8);this.hash=c.sha512}if(f4)return tP;f4=!0;var c=lP(),k=nP(),f=ao(),l=f.assert,p=f.parseBytes,b=sja(),d=tja();tP=g;g.prototype.sign=function(h,a){h=p(h);var e=this.keyFromSecret(a),n=this.hashInt(e.messagePrefix(),
h);a=this.g.mul(n);var q=this.encodePoint(a);h=this.hashInt(q,e.pubBytes(),h).mul(e.priv());h=n.add(h).umod(this.curve.n);return this.makeSignature({R:a,S:h,Rencoded:q})};g.prototype.verify=function(h,a,e){h=p(h);a=this.makeSignature(a);e=this.keyFromPublic(e);h=this.hashInt(a.Rencoded(),e.pubBytes(),h);var n=this.g.mul(a.S());return a.R().add(e.pub().mul(h)).eq(n)};g.prototype.hashInt=function(){for(var h=this.hash(),a=0;a<arguments.length;a++)h.update(arguments[a]);return f.intFromLE(h.digest()).umod(this.curve.n)};
g.prototype.keyFromPublic=function(h){return b.fromPublic(this,h)};g.prototype.keyFromSecret=function(h){return b.fromSecret(this,h)};g.prototype.makeSignature=function(h){return h instanceof d?h:new d(this,h)};g.prototype.encodePoint=function(h){var a=h.getY().toArray("le",this.encodingLength);a[this.encodingLength-1]|=h.getX().isOdd()?128:0;return a};g.prototype.decodePoint=function(h){h=f.parseBytes(h);var a=h.length-1,e=h.slice(0,a).concat(h[a]&-129);h=0!==(h[a]&128);e=f.intFromLE(e);return this.curve.pointFromY(e,
h)};g.prototype.encodeInt=function(h){return h.toArray("le",this.encodingLength)};g.prototype.decodeInt=function(h){return f.intFromLE(h)};g.prototype.isPoint=function(h){return h instanceof this.pointClass};return tP}function uP(){if(g4)return vP;g4=!0;var g=vP;g.version=vja.version;g.utils=ao();g.rand=UO();g.curve=M3();g.curves=nP();g.ec=rja();g.eddsa=uja();return vP}function h4(){if(i4)return wP.exports;i4=!0;(function(g,c){function k(m,t){if(!m)throw Error(t||"Assertion failed");}function f(m,
t){m.super_=t;var u=function(){};u.prototype=t.prototype;m.prototype=new u;m.prototype.constructor=m}function l(m,t,u){if(l.isBN(m))return m;(this||lb).negative=0;(this||lb).words=null;(this||lb).length=0;(this||lb).red=null;if(null!==m){if("le"===t||"be"===t)u=t,t=10;this._init(m||0,t||10,u||"be")}}function p(m,t){m=m.charCodeAt(t);return 65<=m&&70>=m?m-55:97<=m&&102>=m?m-87:m-48&15}function b(m,t,u){var B=p(m,u);u-1>=t&&(B|=p(m,u-1)<<4);return B}function d(m,t,u,B){var A=0;for(u=Math.min(m.length,
u);t<u;t++){var H=m.charCodeAt(t)-48;A*=B;A=49<=H?A+(H-49+10):17<=H?A+(H-17+10):A+H}return A}function h(m,t,u){u.negative=t.negative^m.negative;var B=m.length+t.length|0;u.length=B;B=B-1|0;var A=m.words[0]|0,H=t.words[0]|0;A*=H;var F=A/67108864|0;u.words[0]=A&67108863;for(var L=1;L<B;L++){var U=F>>>26,T=F&67108863;F=Math.min(L,t.length-1);for(var Y=Math.max(0,L-m.length+1);Y<=F;Y++)A=m.words[L-Y|0]|0,H=t.words[Y]|0,A=A*H+T,U+=A/67108864|0,T=A&67108863;u.words[L]=T|0;F=U|0}0!==F?u.words[L]=F|0:u.length--;
return u.strip()}function a(m,t){(this||lb).x=m;(this||lb).y=t}function e(m,t){(this||lb).name=m;(this||lb).p=new l(t,16);(this||lb).n=(this||lb).p.bitLength();(this||lb).k=(new l(1)).iushln((this||lb).n).isub((this||lb).p);(this||lb).tmp=this._tmp()}function n(){e.call(this||lb,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function q(){e.call(this||lb,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function r(){e.call(this||lb,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}
function v(){e.call(this||lb,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function y(m){"string"===typeof m?(m=l._prime(m),(this||lb).m=m.p,(this||lb).prime=m):(k(m.gtn(1),"modulus must be greater than 1"),(this||lb).m=m,(this||lb).prime=null)}function D(m){y.call(this||lb,m);(this||lb).shift=(this||lb).m.bitLength();0!==(this||lb).shift%26&&((this||lb).shift+=26-(this||lb).shift%26);(this||lb).r=(new l(1)).iushln((this||lb).shift);(this||lb).r2=this.imod((this||
lb).r.sqr());(this||lb).rinv=(this||lb).r._invmp((this||lb).m);(this||lb).minv=(this||lb).rinv.mul((this||lb).r).isubn(1).div((this||lb).m);(this||lb).minv=(this||lb).minv.umod((this||lb).r);(this||lb).minv=(this||lb).r.sub((this||lb).minv)}"object"===typeof g?g.exports=l:c.BN=l;l.BN=l;l.wordSize=26;try{var E="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:Yg.Buffer}catch(m){}l.isBN=function(m){return m instanceof l?!0:null!==m&&"object"===typeof m&&m.constructor.wordSize===
l.wordSize&&Array.isArray(m.words)};l.max=function(m,t){return 0<m.cmp(t)?m:t};l.min=function(m,t){return 0>m.cmp(t)?m:t};l.prototype._init=function(m,t,u){if("number"===typeof m)return this._initNumber(m,t,u);if("object"===typeof m)return this._initArray(m,t,u);"hex"===t&&(t=16);k(t===(t|0)&&2<=t&&36>=t);m=m.toString().replace(/\s+/g,"");var B=0;"-"===m[0]&&(B++,(this||lb).negative=1);B<m.length&&(16===t?this._parseHex(m,B,u):(this._parseBase(m,t,B),"le"===u&&this._initArray(this.toArray(),t,u)))};
l.prototype._initNumber=function(m,t,u){0>m&&((this||lb).negative=1,m=-m);67108864>m?((this||lb).words=[m&67108863],(this||lb).length=1):4503599627370496>m?((this||lb).words=[m&67108863,m/67108864&67108863],(this||lb).length=2):(k(9007199254740992>m),(this||lb).words=[m&67108863,m/67108864&67108863,1],(this||lb).length=3);"le"===u&&this._initArray(this.toArray(),t,u)};l.prototype._initArray=function(m,t,u){k("number"===typeof m.length);if(0>=m.length)return(this||lb).words=[0],(this||lb).length=1,
this||lb;(this||lb).length=Math.ceil(m.length/3);(this||lb).words=Array((this||lb).length);for(t=0;t<(this||lb).length;t++)(this||lb).words[t]=0;var B=0;if("be"===u)for(t=m.length-1,u=0;0<=t;t-=3){var A=m[t]|m[t-1]<<8|m[t-2]<<16;(this||lb).words[u]|=A<<B&67108863;(this||lb).words[u+1]=A>>>26-B&67108863;B+=24;26<=B&&(B-=26,u++)}else if("le"===u)for(u=t=0;t<m.length;t+=3)A=m[t]|m[t+1]<<8|m[t+2]<<16,(this||lb).words[u]|=A<<B&67108863,(this||lb).words[u+1]=A>>>26-B&67108863,B+=24,26<=B&&(B-=26,u++);return this.strip()};
l.prototype._parseHex=function(m,t,u){(this||lb).length=Math.ceil((m.length-t)/6);(this||lb).words=Array((this||lb).length);for(var B=0;B<(this||lb).length;B++)(this||lb).words[B]=0;var A=0,H=0;if("be"===u)for(B=m.length-1;B>=t;B-=2)u=b(m,t,B)<<A,(this||lb).words[H]|=u&67108863,18<=A?(A-=18,H+=1,(this||lb).words[H]|=u>>>26):A+=8;else for(B=0===(m.length-t)%2?t+1:t;B<m.length;B+=2)u=b(m,t,B)<<A,(this||lb).words[H]|=u&67108863,18<=A?(A-=18,H+=1,(this||lb).words[H]|=u>>>26):A+=8;this.strip()};l.prototype._parseBase=
function(m,t,u){(this||lb).words=[0];(this||lb).length=1;for(var B=0,A=1;67108863>=A;A*=t)B++;B--;A=A/t|0;var H=m.length-u,F=H%B;H=Math.min(H,H-F)+u;for(var L=u;L<H;L+=B)u=d(m,L,L+B,t),this.imuln(A),67108864>(this||lb).words[0]+u?(this||lb).words[0]+=u:this._iaddn(u);if(0!==F){B=1;u=d(m,L,m.length,t);for(L=0;L<F;L++)B*=t;this.imuln(B);67108864>(this||lb).words[0]+u?(this||lb).words[0]+=u:this._iaddn(u)}this.strip()};l.prototype.copy=function(m){m.words=Array((this||lb).length);for(var t=0;t<(this||
lb).length;t++)m.words[t]=(this||lb).words[t];m.length=(this||lb).length;m.negative=(this||lb).negative;m.red=(this||lb).red};l.prototype.clone=function(){var m=new l(null);this.copy(m);return m};l.prototype._expand=function(m){for(;(this||lb).length<m;)(this||lb).words[(this||lb).length++]=0;return this||lb};l.prototype.strip=function(){for(;1<(this||lb).length&&0===(this||lb).words[(this||lb).length-1];)(this||lb).length--;return this._normSign()};l.prototype._normSign=function(){1===(this||lb).length&&
0===(this||lb).words[0]&&((this||lb).negative=0);return this||lb};l.prototype.inspect=function(){return((this||lb).red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var I=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
K=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],P=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];l.prototype.toString=function(m,t){m=m||10;t=t|0||1;if(16===m||"hex"===m){var u="";for(var B=m=0,A=0;A<(this||lb).length;A++){var H=
(this||lb).words[A],F=((H<<m|B)&16777215).toString(16);B=H>>>24-m&16777215;u=0!==B||A!==(this||lb).length-1?I[6-F.length]+F+u:F+u;m+=2;26<=m&&(m-=26,A--)}for(0!==B&&(u=B.toString(16)+u);0!==u.length%t;)u="0"+u;0!==(this||lb).negative&&(u="-"+u);return u}if(m===(m|0)&&2<=m&&36>=m){B=K[m];A=P[m];u="";H=this.clone();for(H.negative=0;!H.isZero();)F=H.modn(A).toString(m),H=H.idivn(A),u=H.isZero()?F+u:I[B-F.length]+F+u;for(this.isZero()&&(u="0"+u);0!==u.length%t;)u="0"+u;0!==(this||lb).negative&&(u="-"+
u);return u}k(!1,"Base should be between 2 and 36")};l.prototype.toNumber=function(){var m=(this||lb).words[0];2===(this||lb).length?m+=67108864*(this||lb).words[1]:3===(this||lb).length&&1===(this||lb).words[2]?m+=4503599627370496+67108864*(this||lb).words[1]:2<(this||lb).length&&k(!1,"Number can only safely store up to 53 bits");return 0!==(this||lb).negative?-m:m};l.prototype.toJSON=function(){return this.toString(16)};l.prototype.toBuffer=function(m,t){k("undefined"!==typeof E);return this.toArrayLike(E,
m,t)};l.prototype.toArray=function(m,t){return this.toArrayLike(Array,m,t)};l.prototype.toArrayLike=function(m,t,u){var B=this.byteLength();u=u||Math.max(1,B);k(B<=u,"byte array longer than desired length");k(0<u,"Requested array length <= 0");this.strip();var A="le"===t;m=new m(u);t=this.clone();if(A){for(A=0;!t.isZero();A++)B=t.andln(255),t.iushrn(8),m[A]=B;for(;A<u;A++)m[A]=0}else{for(A=0;A<u-B;A++)m[A]=0;for(A=0;!t.isZero();A++)B=t.andln(255),t.iushrn(8),m[u-A-1]=B}return m};l.prototype._countBits=
Math.clz32?function(m){return 32-Math.clz32(m)}:function(m){var t=0;4096<=m&&(t+=13,m>>>=13);64<=m&&(t+=7,m>>>=7);8<=m&&(t+=4,m>>>=4);2<=m&&(t+=2,m>>>=2);return t+m};l.prototype._zeroBits=function(m){if(0===m)return 26;var t=0;0===(m&8191)&&(t+=13,m>>>=13);0===(m&127)&&(t+=7,m>>>=7);0===(m&15)&&(t+=4,m>>>=4);0===(m&3)&&(t+=2,m>>>=2);0===(m&1)&&t++;return t};l.prototype.bitLength=function(){var m=this._countBits((this||lb).words[(this||lb).length-1]);return 26*((this||lb).length-1)+m};l.prototype.zeroBits=
function(){if(this.isZero())return 0;for(var m=0,t=0;t<(this||lb).length;t++){var u=this._zeroBits((this||lb).words[t]);m+=u;if(26!==u)break}return m};l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};l.prototype.toTwos=function(m){return 0!==(this||lb).negative?this.abs().inotn(m).iaddn(1):this.clone()};l.prototype.fromTwos=function(m){return this.testn(m-1)?this.notn(m).iaddn(1).ineg():this.clone()};l.prototype.isNeg=function(){return 0!==(this||lb).negative};l.prototype.neg=
function(){return this.clone().ineg()};l.prototype.ineg=function(){this.isZero()||((this||lb).negative^=1);return this||lb};l.prototype.iuor=function(m){for(;(this||lb).length<m.length;)(this||lb).words[(this||lb).length++]=0;for(var t=0;t<m.length;t++)(this||lb).words[t]|=m.words[t];return this.strip()};l.prototype.ior=function(m){k(0===((this||lb).negative|m.negative));return this.iuor(m)};l.prototype.or=function(m){return(this||lb).length>m.length?this.clone().ior(m):m.clone().ior(this||lb)};l.prototype.uor=
function(m){return(this||lb).length>m.length?this.clone().iuor(m):m.clone().iuor(this||lb)};l.prototype.iuand=function(m){var t=(this||lb).length>m.length?m:this||lb;for(var u=0;u<t.length;u++)(this||lb).words[u]&=m.words[u];(this||lb).length=t.length;return this.strip()};l.prototype.iand=function(m){k(0===((this||lb).negative|m.negative));return this.iuand(m)};l.prototype.and=function(m){return(this||lb).length>m.length?this.clone().iand(m):m.clone().iand(this||lb)};l.prototype.uand=function(m){return(this||
lb).length>m.length?this.clone().iuand(m):m.clone().iuand(this||lb)};l.prototype.iuxor=function(m){if((this||lb).length>m.length)var t=this||lb;else t=m,m=this||lb;for(var u=0;u<m.length;u++)(this||lb).words[u]=t.words[u]^m.words[u];if((this||lb)!==t)for(;u<t.length;u++)(this||lb).words[u]=t.words[u];(this||lb).length=t.length;return this.strip()};l.prototype.ixor=function(m){k(0===((this||lb).negative|m.negative));return this.iuxor(m)};l.prototype.xor=function(m){return(this||lb).length>m.length?
this.clone().ixor(m):m.clone().ixor(this||lb)};l.prototype.uxor=function(m){return(this||lb).length>m.length?this.clone().iuxor(m):m.clone().iuxor(this||lb)};l.prototype.inotn=function(m){k("number"===typeof m&&0<=m);var t=Math.ceil(m/26)|0;m%=26;this._expand(t);0<m&&t--;for(var u=0;u<t;u++)(this||lb).words[u]=~(this||lb).words[u]&67108863;0<m&&((this||lb).words[u]=~(this||lb).words[u]&67108863>>26-m);return this.strip()};l.prototype.notn=function(m){return this.clone().inotn(m)};l.prototype.setn=
function(m,t){k("number"===typeof m&&0<=m);var u=m/26|0;m%=26;this._expand(u+1);(this||lb).words[u]=t?(this||lb).words[u]|1<<m:(this||lb).words[u]&~(1<<m);return this.strip()};l.prototype.iadd=function(m){if(0!==(this||lb).negative&&0===m.negative)return(this||lb).negative=0,this.isub(m),(this||lb).negative^=1,this._normSign();if(0===(this||lb).negative&&0!==m.negative){m.negative=0;var t=this.isub(m);m.negative=1;return t._normSign()}if((this||lb).length>m.length)var u=this||lb;else u=m,m=this||
lb;for(var B=t=0;B<m.length;B++)t=(u.words[B]|0)+(m.words[B]|0)+t,(this||lb).words[B]=t&67108863,t>>>=26;for(;0!==t&&B<u.length;B++)t=(u.words[B]|0)+t,(this||lb).words[B]=t&67108863,t>>>=26;(this||lb).length=u.length;if(0!==t)(this||lb).words[(this||lb).length]=t,(this||lb).length++;else if(u!==(this||lb))for(;B<u.length;B++)(this||lb).words[B]=u.words[B];return this||lb};l.prototype.add=function(m){if(0!==m.negative&&0===(this||lb).negative){m.negative=0;var t=this.sub(m);m.negative^=1;return t}return 0===
m.negative&&0!==(this||lb).negative?((this||lb).negative=0,t=m.sub(this||lb),(this||lb).negative=1,t):(this||lb).length>m.length?this.clone().iadd(m):m.clone().iadd(this||lb)};l.prototype.isub=function(m){if(0!==m.negative){m.negative=0;var t=this.iadd(m);m.negative=1;return t._normSign()}if(0!==(this||lb).negative)return(this||lb).negative=0,this.iadd(m),(this||lb).negative=1,this._normSign();t=this.cmp(m);if(0===t)return(this||lb).negative=0,(this||lb).length=1,(this||lb).words[0]=0,this||lb;if(0<
t)var u=this||lb;else u=m,m=this||lb;for(var B=0,A=0;A<m.length;A++)t=(u.words[A]|0)-(m.words[A]|0)+B,B=t>>26,(this||lb).words[A]=t&67108863;for(;0!==B&&A<u.length;A++)t=(u.words[A]|0)+B,B=t>>26,(this||lb).words[A]=t&67108863;if(0===B&&A<u.length&&u!==(this||lb))for(;A<u.length;A++)(this||lb).words[A]=u.words[A];(this||lb).length=Math.max((this||lb).length,A);u!==(this||lb)&&((this||lb).negative=1);return this.strip()};l.prototype.sub=function(m){return this.clone().isub(m)};var N=function(m,t,u){var B=
m.words,A=t.words,H=u.words,F=0,L=B[0]|0,U=L&8191,T=L>>>13,Y=B[1]|0;L=Y&8191;var wa=Y>>>13,Ga=B[2]|0;Y=Ga&8191;var na=Ga>>>13,ea=B[3]|0;Ga=ea&8191;var da=ea>>>13,ia=B[4]|0;ea=ia&8191;var Oa=ia>>>13,Va=B[5]|0;ia=Va&8191;var eb=Va>>>13,Sa=B[6]|0;Va=Sa&8191;var Bb=Sa>>>13,Z=B[7]|0;Sa=Z&8191;var sa=Z>>>13,Da=B[8]|0;Z=Da&8191;Da>>>=13;var X=B[9]|0;B=X&8191;X>>>=13;var ma=A[0]|0,ta=ma&8191,Pa=ma>>>13,Za=A[1]|0;ma=Za&8191;var Zb=Za>>>13,Pb=A[2]|0;Za=Pb&8191;var Db=Pb>>>13,sc=A[3]|0;Pb=sc&8191;var wc=sc>>>
13,Lc=A[4]|0;sc=Lc&8191;var Xc=Lc>>>13,Qc=A[5]|0;Lc=Qc&8191;var hd=Qc>>>13,Wc=A[6]|0;Qc=Wc&8191;var ld=Wc>>>13,Yc=A[7]|0;Wc=Yc&8191;var od=Yc>>>13,Vc=A[8]|0;Yc=Vc&8191;Vc>>>=13;var cd=A[9]|0;A=cd&8191;cd>>>=13;u.negative=m.negative^t.negative;u.length=19;var W=Math.imul(U,ta);m=Math.imul(U,Pa);m=m+Math.imul(T,ta)|0;t=Math.imul(T,Pa);var af=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(af>>>26)|0;af&=67108863;W=Math.imul(L,ta);m=Math.imul(L,Pa);m=m+Math.imul(wa,ta)|0;t=Math.imul(wa,Pa);W=W+Math.imul(U,
ma)|0;m=m+Math.imul(U,Zb)|0;m=m+Math.imul(T,ma)|0;t=t+Math.imul(T,Zb)|0;var zc=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(zc>>>26)|0;zc&=67108863;W=Math.imul(Y,ta);m=Math.imul(Y,Pa);m=m+Math.imul(na,ta)|0;t=Math.imul(na,Pa);W=W+Math.imul(L,ma)|0;m=m+Math.imul(L,Zb)|0;m=m+Math.imul(wa,ma)|0;t=t+Math.imul(wa,Zb)|0;W=W+Math.imul(U,Za)|0;m=m+Math.imul(U,Db)|0;m=m+Math.imul(T,Za)|0;t=t+Math.imul(T,Db)|0;var pi=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(pi>>>26)|0;pi&=67108863;W=Math.imul(Ga,ta);m=Math.imul(Ga,
Pa);m=m+Math.imul(da,ta)|0;t=Math.imul(da,Pa);W=W+Math.imul(Y,ma)|0;m=m+Math.imul(Y,Zb)|0;m=m+Math.imul(na,ma)|0;t=t+Math.imul(na,Zb)|0;W=W+Math.imul(L,Za)|0;m=m+Math.imul(L,Db)|0;m=m+Math.imul(wa,Za)|0;t=t+Math.imul(wa,Db)|0;W=W+Math.imul(U,Pb)|0;m=m+Math.imul(U,wc)|0;m=m+Math.imul(T,Pb)|0;t=t+Math.imul(T,wc)|0;var ad=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ad>>>26)|0;ad&=67108863;W=Math.imul(ea,ta);m=Math.imul(ea,Pa);m=m+Math.imul(Oa,ta)|0;t=Math.imul(Oa,Pa);W=W+Math.imul(Ga,ma)|0;m=m+Math.imul(Ga,
Zb)|0;m=m+Math.imul(da,ma)|0;t=t+Math.imul(da,Zb)|0;W=W+Math.imul(Y,Za)|0;m=m+Math.imul(Y,Db)|0;m=m+Math.imul(na,Za)|0;t=t+Math.imul(na,Db)|0;W=W+Math.imul(L,Pb)|0;m=m+Math.imul(L,wc)|0;m=m+Math.imul(wa,Pb)|0;t=t+Math.imul(wa,wc)|0;W=W+Math.imul(U,sc)|0;m=m+Math.imul(U,Xc)|0;m=m+Math.imul(T,sc)|0;t=t+Math.imul(T,Xc)|0;var bd=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(bd>>>26)|0;bd&=67108863;W=Math.imul(ia,ta);m=Math.imul(ia,Pa);m=m+Math.imul(eb,ta)|0;t=Math.imul(eb,Pa);W=W+Math.imul(ea,ma)|0;m=m+
Math.imul(ea,Zb)|0;m=m+Math.imul(Oa,ma)|0;t=t+Math.imul(Oa,Zb)|0;W=W+Math.imul(Ga,Za)|0;m=m+Math.imul(Ga,Db)|0;m=m+Math.imul(da,Za)|0;t=t+Math.imul(da,Db)|0;W=W+Math.imul(Y,Pb)|0;m=m+Math.imul(Y,wc)|0;m=m+Math.imul(na,Pb)|0;t=t+Math.imul(na,wc)|0;W=W+Math.imul(L,sc)|0;m=m+Math.imul(L,Xc)|0;m=m+Math.imul(wa,sc)|0;t=t+Math.imul(wa,Xc)|0;W=W+Math.imul(U,Lc)|0;m=m+Math.imul(U,hd)|0;m=m+Math.imul(T,Lc)|0;t=t+Math.imul(T,hd)|0;var qi=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(qi>>>26)|0;qi&=67108863;W=
Math.imul(Va,ta);m=Math.imul(Va,Pa);m=m+Math.imul(Bb,ta)|0;t=Math.imul(Bb,Pa);W=W+Math.imul(ia,ma)|0;m=m+Math.imul(ia,Zb)|0;m=m+Math.imul(eb,ma)|0;t=t+Math.imul(eb,Zb)|0;W=W+Math.imul(ea,Za)|0;m=m+Math.imul(ea,Db)|0;m=m+Math.imul(Oa,Za)|0;t=t+Math.imul(Oa,Db)|0;W=W+Math.imul(Ga,Pb)|0;m=m+Math.imul(Ga,wc)|0;m=m+Math.imul(da,Pb)|0;t=t+Math.imul(da,wc)|0;W=W+Math.imul(Y,sc)|0;m=m+Math.imul(Y,Xc)|0;m=m+Math.imul(na,sc)|0;t=t+Math.imul(na,Xc)|0;W=W+Math.imul(L,Lc)|0;m=m+Math.imul(L,hd)|0;m=m+Math.imul(wa,
Lc)|0;t=t+Math.imul(wa,hd)|0;W=W+Math.imul(U,Qc)|0;m=m+Math.imul(U,ld)|0;m=m+Math.imul(T,Qc)|0;t=t+Math.imul(T,ld)|0;var ei=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ei>>>26)|0;ei&=67108863;W=Math.imul(Sa,ta);m=Math.imul(Sa,Pa);m=m+Math.imul(sa,ta)|0;t=Math.imul(sa,Pa);W=W+Math.imul(Va,ma)|0;m=m+Math.imul(Va,Zb)|0;m=m+Math.imul(Bb,ma)|0;t=t+Math.imul(Bb,Zb)|0;W=W+Math.imul(ia,Za)|0;m=m+Math.imul(ia,Db)|0;m=m+Math.imul(eb,Za)|0;t=t+Math.imul(eb,Db)|0;W=W+Math.imul(ea,Pb)|0;m=m+Math.imul(ea,wc)|0;
m=m+Math.imul(Oa,Pb)|0;t=t+Math.imul(Oa,wc)|0;W=W+Math.imul(Ga,sc)|0;m=m+Math.imul(Ga,Xc)|0;m=m+Math.imul(da,sc)|0;t=t+Math.imul(da,Xc)|0;W=W+Math.imul(Y,Lc)|0;m=m+Math.imul(Y,hd)|0;m=m+Math.imul(na,Lc)|0;t=t+Math.imul(na,hd)|0;W=W+Math.imul(L,Qc)|0;m=m+Math.imul(L,ld)|0;m=m+Math.imul(wa,Qc)|0;t=t+Math.imul(wa,ld)|0;W=W+Math.imul(U,Wc)|0;m=m+Math.imul(U,od)|0;m=m+Math.imul(T,Wc)|0;t=t+Math.imul(T,od)|0;var Zh=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Zh>>>26)|0;Zh&=67108863;W=Math.imul(Z,ta);m=Math.imul(Z,
Pa);m=m+Math.imul(Da,ta)|0;t=Math.imul(Da,Pa);W=W+Math.imul(Sa,ma)|0;m=m+Math.imul(Sa,Zb)|0;m=m+Math.imul(sa,ma)|0;t=t+Math.imul(sa,Zb)|0;W=W+Math.imul(Va,Za)|0;m=m+Math.imul(Va,Db)|0;m=m+Math.imul(Bb,Za)|0;t=t+Math.imul(Bb,Db)|0;W=W+Math.imul(ia,Pb)|0;m=m+Math.imul(ia,wc)|0;m=m+Math.imul(eb,Pb)|0;t=t+Math.imul(eb,wc)|0;W=W+Math.imul(ea,sc)|0;m=m+Math.imul(ea,Xc)|0;m=m+Math.imul(Oa,sc)|0;t=t+Math.imul(Oa,Xc)|0;W=W+Math.imul(Ga,Lc)|0;m=m+Math.imul(Ga,hd)|0;m=m+Math.imul(da,Lc)|0;t=t+Math.imul(da,hd)|
0;W=W+Math.imul(Y,Qc)|0;m=m+Math.imul(Y,ld)|0;m=m+Math.imul(na,Qc)|0;t=t+Math.imul(na,ld)|0;W=W+Math.imul(L,Wc)|0;m=m+Math.imul(L,od)|0;m=m+Math.imul(wa,Wc)|0;t=t+Math.imul(wa,od)|0;W=W+Math.imul(U,Yc)|0;m=m+Math.imul(U,Vc)|0;m=m+Math.imul(T,Yc)|0;t=t+Math.imul(T,Vc)|0;var xi=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(xi>>>26)|0;xi&=67108863;W=Math.imul(B,ta);m=Math.imul(B,Pa);m=m+Math.imul(X,ta)|0;t=Math.imul(X,Pa);W=W+Math.imul(Z,ma)|0;m=m+Math.imul(Z,Zb)|0;m=m+Math.imul(Da,ma)|0;t=t+Math.imul(Da,
Zb)|0;W=W+Math.imul(Sa,Za)|0;m=m+Math.imul(Sa,Db)|0;m=m+Math.imul(sa,Za)|0;t=t+Math.imul(sa,Db)|0;W=W+Math.imul(Va,Pb)|0;m=m+Math.imul(Va,wc)|0;m=m+Math.imul(Bb,Pb)|0;t=t+Math.imul(Bb,wc)|0;W=W+Math.imul(ia,sc)|0;m=m+Math.imul(ia,Xc)|0;m=m+Math.imul(eb,sc)|0;t=t+Math.imul(eb,Xc)|0;W=W+Math.imul(ea,Lc)|0;m=m+Math.imul(ea,hd)|0;m=m+Math.imul(Oa,Lc)|0;t=t+Math.imul(Oa,hd)|0;W=W+Math.imul(Ga,Qc)|0;m=m+Math.imul(Ga,ld)|0;m=m+Math.imul(da,Qc)|0;t=t+Math.imul(da,ld)|0;W=W+Math.imul(Y,Wc)|0;m=m+Math.imul(Y,
od)|0;m=m+Math.imul(na,Wc)|0;t=t+Math.imul(na,od)|0;W=W+Math.imul(L,Yc)|0;m=m+Math.imul(L,Vc)|0;m=m+Math.imul(wa,Yc)|0;t=t+Math.imul(wa,Vc)|0;W=W+Math.imul(U,A)|0;m=m+Math.imul(U,cd)|0;m=m+Math.imul(T,A)|0;t=t+Math.imul(T,cd)|0;U=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(U>>>26)|0;U&=67108863;W=Math.imul(B,ma);m=Math.imul(B,Zb);m=m+Math.imul(X,ma)|0;t=Math.imul(X,Zb);W=W+Math.imul(Z,Za)|0;m=m+Math.imul(Z,Db)|0;m=m+Math.imul(Da,Za)|0;t=t+Math.imul(Da,Db)|0;W=W+Math.imul(Sa,Pb)|0;m=m+Math.imul(Sa,
wc)|0;m=m+Math.imul(sa,Pb)|0;t=t+Math.imul(sa,wc)|0;W=W+Math.imul(Va,sc)|0;m=m+Math.imul(Va,Xc)|0;m=m+Math.imul(Bb,sc)|0;t=t+Math.imul(Bb,Xc)|0;W=W+Math.imul(ia,Lc)|0;m=m+Math.imul(ia,hd)|0;m=m+Math.imul(eb,Lc)|0;t=t+Math.imul(eb,hd)|0;W=W+Math.imul(ea,Qc)|0;m=m+Math.imul(ea,ld)|0;m=m+Math.imul(Oa,Qc)|0;t=t+Math.imul(Oa,ld)|0;W=W+Math.imul(Ga,Wc)|0;m=m+Math.imul(Ga,od)|0;m=m+Math.imul(da,Wc)|0;t=t+Math.imul(da,od)|0;W=W+Math.imul(Y,Yc)|0;m=m+Math.imul(Y,Vc)|0;m=m+Math.imul(na,Yc)|0;t=t+Math.imul(na,
Vc)|0;W=W+Math.imul(L,A)|0;m=m+Math.imul(L,cd)|0;m=m+Math.imul(wa,A)|0;t=t+Math.imul(wa,cd)|0;L=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(L>>>26)|0;L&=67108863;W=Math.imul(B,Za);m=Math.imul(B,Db);m=m+Math.imul(X,Za)|0;t=Math.imul(X,Db);W=W+Math.imul(Z,Pb)|0;m=m+Math.imul(Z,wc)|0;m=m+Math.imul(Da,Pb)|0;t=t+Math.imul(Da,wc)|0;W=W+Math.imul(Sa,sc)|0;m=m+Math.imul(Sa,Xc)|0;m=m+Math.imul(sa,sc)|0;t=t+Math.imul(sa,Xc)|0;W=W+Math.imul(Va,Lc)|0;m=m+Math.imul(Va,hd)|0;m=m+Math.imul(Bb,Lc)|0;t=t+Math.imul(Bb,
hd)|0;W=W+Math.imul(ia,Qc)|0;m=m+Math.imul(ia,ld)|0;m=m+Math.imul(eb,Qc)|0;t=t+Math.imul(eb,ld)|0;W=W+Math.imul(ea,Wc)|0;m=m+Math.imul(ea,od)|0;m=m+Math.imul(Oa,Wc)|0;t=t+Math.imul(Oa,od)|0;W=W+Math.imul(Ga,Yc)|0;m=m+Math.imul(Ga,Vc)|0;m=m+Math.imul(da,Yc)|0;t=t+Math.imul(da,Vc)|0;W=W+Math.imul(Y,A)|0;m=m+Math.imul(Y,cd)|0;m=m+Math.imul(na,A)|0;t=t+Math.imul(na,cd)|0;Y=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Y>>>26)|0;Y&=67108863;W=Math.imul(B,Pb);m=Math.imul(B,wc);m=m+Math.imul(X,Pb)|0;t=Math.imul(X,
wc);W=W+Math.imul(Z,sc)|0;m=m+Math.imul(Z,Xc)|0;m=m+Math.imul(Da,sc)|0;t=t+Math.imul(Da,Xc)|0;W=W+Math.imul(Sa,Lc)|0;m=m+Math.imul(Sa,hd)|0;m=m+Math.imul(sa,Lc)|0;t=t+Math.imul(sa,hd)|0;W=W+Math.imul(Va,Qc)|0;m=m+Math.imul(Va,ld)|0;m=m+Math.imul(Bb,Qc)|0;t=t+Math.imul(Bb,ld)|0;W=W+Math.imul(ia,Wc)|0;m=m+Math.imul(ia,od)|0;m=m+Math.imul(eb,Wc)|0;t=t+Math.imul(eb,od)|0;W=W+Math.imul(ea,Yc)|0;m=m+Math.imul(ea,Vc)|0;m=m+Math.imul(Oa,Yc)|0;t=t+Math.imul(Oa,Vc)|0;W=W+Math.imul(Ga,A)|0;m=m+Math.imul(Ga,
cd)|0;m=m+Math.imul(da,A)|0;t=t+Math.imul(da,cd)|0;Ga=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Ga>>>26)|0;Ga&=67108863;W=Math.imul(B,sc);m=Math.imul(B,Xc);m=m+Math.imul(X,sc)|0;t=Math.imul(X,Xc);W=W+Math.imul(Z,Lc)|0;m=m+Math.imul(Z,hd)|0;m=m+Math.imul(Da,Lc)|0;t=t+Math.imul(Da,hd)|0;W=W+Math.imul(Sa,Qc)|0;m=m+Math.imul(Sa,ld)|0;m=m+Math.imul(sa,Qc)|0;t=t+Math.imul(sa,ld)|0;W=W+Math.imul(Va,Wc)|0;m=m+Math.imul(Va,od)|0;m=m+Math.imul(Bb,Wc)|0;t=t+Math.imul(Bb,od)|0;W=W+Math.imul(ia,Yc)|0;m=m+Math.imul(ia,
Vc)|0;m=m+Math.imul(eb,Yc)|0;t=t+Math.imul(eb,Vc)|0;W=W+Math.imul(ea,A)|0;m=m+Math.imul(ea,cd)|0;m=m+Math.imul(Oa,A)|0;t=t+Math.imul(Oa,cd)|0;ea=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ea>>>26)|0;ea&=67108863;W=Math.imul(B,Lc);m=Math.imul(B,hd);m=m+Math.imul(X,Lc)|0;t=Math.imul(X,hd);W=W+Math.imul(Z,Qc)|0;m=m+Math.imul(Z,ld)|0;m=m+Math.imul(Da,Qc)|0;t=t+Math.imul(Da,ld)|0;W=W+Math.imul(Sa,Wc)|0;m=m+Math.imul(Sa,od)|0;m=m+Math.imul(sa,Wc)|0;t=t+Math.imul(sa,od)|0;W=W+Math.imul(Va,Yc)|0;m=m+Math.imul(Va,
Vc)|0;m=m+Math.imul(Bb,Yc)|0;t=t+Math.imul(Bb,Vc)|0;W=W+Math.imul(ia,A)|0;m=m+Math.imul(ia,cd)|0;m=m+Math.imul(eb,A)|0;t=t+Math.imul(eb,cd)|0;ia=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ia>>>26)|0;ia&=67108863;W=Math.imul(B,Qc);m=Math.imul(B,ld);m=m+Math.imul(X,Qc)|0;t=Math.imul(X,ld);W=W+Math.imul(Z,Wc)|0;m=m+Math.imul(Z,od)|0;m=m+Math.imul(Da,Wc)|0;t=t+Math.imul(Da,od)|0;W=W+Math.imul(Sa,Yc)|0;m=m+Math.imul(Sa,Vc)|0;m=m+Math.imul(sa,Yc)|0;t=t+Math.imul(sa,Vc)|0;W=W+Math.imul(Va,A)|0;m=m+Math.imul(Va,
cd)|0;m=m+Math.imul(Bb,A)|0;t=t+Math.imul(Bb,cd)|0;Va=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Va>>>26)|0;Va&=67108863;W=Math.imul(B,Wc);m=Math.imul(B,od);m=m+Math.imul(X,Wc)|0;t=Math.imul(X,od);W=W+Math.imul(Z,Yc)|0;m=m+Math.imul(Z,Vc)|0;m=m+Math.imul(Da,Yc)|0;t=t+Math.imul(Da,Vc)|0;W=W+Math.imul(Sa,A)|0;m=m+Math.imul(Sa,cd)|0;m=m+Math.imul(sa,A)|0;t=t+Math.imul(sa,cd)|0;Sa=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Sa>>>26)|0;Sa&=67108863;W=Math.imul(B,Yc);m=Math.imul(B,Vc);m=m+Math.imul(X,Yc)|
0;t=Math.imul(X,Vc);W=W+Math.imul(Z,A)|0;m=m+Math.imul(Z,cd)|0;m=m+Math.imul(Da,A)|0;t=t+Math.imul(Da,cd)|0;Z=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Z>>>26)|0;Z&=67108863;W=Math.imul(B,A);m=Math.imul(B,cd);m=m+Math.imul(X,A)|0;t=Math.imul(X,cd);T=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(T>>>26)|0;H[0]=af;H[1]=zc;H[2]=pi;H[3]=ad;H[4]=bd;H[5]=qi;H[6]=ei;H[7]=Zh;H[8]=xi;H[9]=U;H[10]=L;H[11]=Y;H[12]=Ga;H[13]=ea;H[14]=ia;H[15]=Va;H[16]=Sa;H[17]=Z;H[18]=T&67108863;0!==F&&(H[19]=F,u.length++);return u};
Math.imul||(N=h);l.prototype.mulTo=function(m,t){var u=(this||lb).length+m.length;if(10===(this||lb).length&&10===m.length)m=N(this||lb,m,t);else if(63>u)m=h(this||lb,m,t);else if(1024>u){u=this||lb;t.negative=m.negative^u.negative;t.length=u.length+m.length;for(var B=0,A=0,H=0;H<t.length-1;H++){var F=A;A=0;B&=67108863;for(var L=Math.min(H,m.length-1),U=Math.max(0,H-u.length+1);U<=L;U++){var T=(u.words[H-U]|0)*(m.words[U]|0),Y=T&67108863;F=F+(T/67108864|0)|0;Y=Y+B|0;B=Y&67108863;F=F+(Y>>>26)|0;A+=
F>>>26;F&=67108863}t.words[H]=B;B=F}0!==B?t.words[H]=B:t.length--;m=t.strip()}else u=this||lb,m=(new a).mulp(u,m,t);return m};a.prototype.makeRBT=function(m){for(var t=Array(m),u=l.prototype._countBits(m)-1,B=0;B<m;B++)t[B]=this.revBin(B,u,m);return t};a.prototype.revBin=function(m,t,u){if(0===m||m===u-1)return m;for(var B=u=0;B<t;B++)u|=(m&1)<<t-B-1,m>>=1;return u};a.prototype.permute=function(m,t,u,B,A,H){for(var F=0;F<H;F++)B[F]=t[m[F]],A[F]=u[m[F]]};a.prototype.transform=function(m,t,u,B,A,H){this.permute(H,
m,t,u,B,A);for(m=1;m<A;m<<=1){t=m<<1;H=Math.cos(2*Math.PI/t);for(var F=Math.sin(2*Math.PI/t),L=0;L<A;L+=t)for(var U=H,T=F,Y=0;Y<m;Y++){var wa=u[L+Y],Ga=B[L+Y],na=u[L+Y+m],ea=B[L+Y+m],da=U*na-T*ea;ea=U*ea+T*na;na=da;u[L+Y]=wa+na;B[L+Y]=Ga+ea;u[L+Y+m]=wa-na;B[L+Y+m]=Ga-ea;Y!==t&&(da=H*U-F*T,T=H*T+F*U,U=da)}}};a.prototype.guessLen13b=function(m,t){m=Math.max(t,m)|1;t=m&1;var u=0;for(m=m/2|0;m;m>>>=1)u++;return 1<<u+1+t};a.prototype.conjugate=function(m,t,u){if(!(1>=u))for(var B=0;B<u/2;B++){var A=m[B];
m[B]=m[u-B-1];m[u-B-1]=A;A=t[B];t[B]=-t[u-B-1];t[u-B-1]=-A}};a.prototype.normalize13b=function(m,t){for(var u=0,B=0;B<t/2;B++)u=8192*Math.round(m[2*B+1]/t)+Math.round(m[2*B]/t)+u,m[B]=u&67108863,u=67108864>u?0:u/67108864|0;return m};a.prototype.convert13b=function(m,t,u,B){for(var A=0,H=0;H<t;H++)A+=m[H]|0,u[2*H]=A&8191,A>>>=13,u[2*H+1]=A&8191,A>>>=13;for(H=2*t;H<B;++H)u[H]=0;k(0===A);k(0===(A&-8192))};a.prototype.stub=function(m){for(var t=Array(m),u=0;u<m;u++)t[u]=0;return t};a.prototype.mulp=function(m,
t,u){var B=2*this.guessLen13b(m.length,t.length),A=this.makeRBT(B),H=this.stub(B),F=Array(B),L=Array(B),U=Array(B),T=Array(B),Y=Array(B),wa=Array(B),Ga=u.words;Ga.length=B;this.convert13b(m.words,m.length,F,B);this.convert13b(t.words,t.length,T,B);this.transform(F,H,L,U,B,A);this.transform(T,H,Y,wa,B,A);for(F=0;F<B;F++)T=L[F]*Y[F]-U[F]*wa[F],U[F]=L[F]*wa[F]+U[F]*Y[F],L[F]=T;this.conjugate(L,U,B);this.transform(L,U,Ga,H,B,A);this.conjugate(Ga,H,B);this.normalize13b(Ga,B);u.negative=m.negative^t.negative;
u.length=m.length+t.length;return u.strip()};l.prototype.mul=function(m){var t=new l(null);t.words=Array((this||lb).length+m.length);return this.mulTo(m,t)};l.prototype.mulf=function(m){var t=new l(null);t.words=Array((this||lb).length+m.length);var u=this||lb;return(new a).mulp(u,m,t)};l.prototype.imul=function(m){return this.clone().mulTo(m,this||lb)};l.prototype.imuln=function(m){k("number"===typeof m);k(67108864>m);for(var t=0,u=0;u<(this||lb).length;u++){var B=((this||lb).words[u]|0)*m,A=(B&
67108863)+(t&67108863);t>>=26;t+=B/67108864|0;t+=A>>>26;(this||lb).words[u]=A&67108863}0!==t&&((this||lb).words[u]=t,(this||lb).length++);return this||lb};l.prototype.muln=function(m){return this.clone().imuln(m)};l.prototype.sqr=function(){return this.mul(this||lb)};l.prototype.isqr=function(){return this.imul(this.clone())};l.prototype.pow=function(m){for(var t=Array(m.bitLength()),u=0;u<t.length;u++){var B=u%26;t[u]=(m.words[u/26|0]&1<<B)>>>B}if(0===t.length)return new l(1);m=this||lb;for(u=0;u<
t.length&&0===t[u];u++,m=m.sqr());if(++u<t.length)for(B=m.sqr();u<t.length;u++,B=B.sqr())0!==t[u]&&(m=m.mul(B));return m};l.prototype.iushln=function(m){k("number"===typeof m&&0<=m);var t=m%26;m=(m-t)/26;var u=67108863>>>26-t<<26-t,B;if(0!==t){var A=0;for(B=0;B<(this||lb).length;B++){var H=(this||lb).words[B]&u;(this||lb).words[B]=((this||lb).words[B]|0)-H<<t|A;A=H>>>26-t}A&&((this||lb).words[B]=A,(this||lb).length++)}if(0!==m){for(B=(this||lb).length-1;0<=B;B--)(this||lb).words[B+m]=(this||lb).words[B];
for(B=0;B<m;B++)(this||lb).words[B]=0;(this||lb).length+=m}return this.strip()};l.prototype.ishln=function(m){k(0===(this||lb).negative);return this.iushln(m)};l.prototype.iushrn=function(m,t,u){k("number"===typeof m&&0<=m);var B=m%26,A=Math.min((m-B)/26,(this||lb).length);m=67108863^67108863>>>B<<B;t=Math.max(0,(t?(t-t%26)/26:0)-A);if(u){for(var H=0;H<A;H++)u.words[H]=(this||lb).words[H];u.length=A}if(0!==A)if((this||lb).length>A)for((this||lb).length-=A,H=0;H<(this||lb).length;H++)(this||lb).words[H]=
(this||lb).words[H+A];else(this||lb).words[0]=0,(this||lb).length=1;A=0;for(H=(this||lb).length-1;0<=H&&(0!==A||H>=t);H--){var F=(this||lb).words[H]|0;(this||lb).words[H]=A<<26-B|F>>>B;A=F&m}u&&0!==A&&(u.words[u.length++]=A);0===(this||lb).length&&((this||lb).words[0]=0,(this||lb).length=1);return this.strip()};l.prototype.ishrn=function(m,t,u){k(0===(this||lb).negative);return this.iushrn(m,t,u)};l.prototype.shln=function(m){return this.clone().ishln(m)};l.prototype.ushln=function(m){return this.clone().iushln(m)};
l.prototype.shrn=function(m){return this.clone().ishrn(m)};l.prototype.ushrn=function(m){return this.clone().iushrn(m)};l.prototype.testn=function(m){k("number"===typeof m&&0<=m);var t=m%26;m=(m-t)/26;return(this||lb).length<=m?!1:!!((this||lb).words[m]&1<<t)};l.prototype.imaskn=function(m){k("number"===typeof m&&0<=m);var t=m%26;m=(m-t)/26;k(0===(this||lb).negative,"imaskn works only with positive numbers");if((this||lb).length<=m)return this||lb;0!==t&&m++;(this||lb).length=Math.min(m,(this||lb).length);
0!==t&&((this||lb).words[(this||lb).length-1]&=67108863^67108863>>>t<<t);return this.strip()};l.prototype.maskn=function(m){return this.clone().imaskn(m)};l.prototype.iaddn=function(m){k("number"===typeof m);k(67108864>m);if(0>m)return this.isubn(-m);if(0!==(this||lb).negative){if(1===(this||lb).length&&((this||lb).words[0]|0)<m)return(this||lb).words[0]=m-((this||lb).words[0]|0),(this||lb).negative=0,this||lb;(this||lb).negative=0;this.isubn(m);(this||lb).negative=1;return this||lb}return this._iaddn(m)};
l.prototype._iaddn=function(m){(this||lb).words[0]+=m;for(m=0;m<(this||lb).length&&67108864<=(this||lb).words[m];m++)(this||lb).words[m]-=67108864,m===(this||lb).length-1?(this||lb).words[m+1]=1:(this||lb).words[m+1]++;(this||lb).length=Math.max((this||lb).length,m+1);return this||lb};l.prototype.isubn=function(m){k("number"===typeof m);k(67108864>m);if(0>m)return this.iaddn(-m);if(0!==(this||lb).negative)return(this||lb).negative=0,this.iaddn(m),(this||lb).negative=1,this||lb;(this||lb).words[0]-=
m;if(1===(this||lb).length&&0>(this||lb).words[0])(this||lb).words[0]=-(this||lb).words[0],(this||lb).negative=1;else for(m=0;m<(this||lb).length&&0>(this||lb).words[m];m++)(this||lb).words[m]+=67108864,--(this||lb).words[m+1];return this.strip()};l.prototype.addn=function(m){return this.clone().iaddn(m)};l.prototype.subn=function(m){return this.clone().isubn(m)};l.prototype.iabs=function(){(this||lb).negative=0;return this||lb};l.prototype.abs=function(){return this.clone().iabs()};l.prototype._ishlnsubmul=
function(m,t,u){var B;this._expand(m.length+u);var A=0;for(B=0;B<m.length;B++){var H=((this||lb).words[B+u]|0)+A;A=(m.words[B]|0)*t;H-=A&67108863;A=(H>>26)-(A/67108864|0);(this||lb).words[B+u]=H&67108863}for(;B<(this||lb).length-u;B++)H=((this||lb).words[B+u]|0)+A,A=H>>26,(this||lb).words[B+u]=H&67108863;if(0===A)return this.strip();k(-1===A);for(B=A=0;B<(this||lb).length;B++)H=-((this||lb).words[B]|0)+A,A=H>>26,(this||lb).words[B]=H&67108863;(this||lb).negative=1;return this.strip()};l.prototype._wordDiv=
function(m,t){var u=this.clone(),B=m,A=B.words[B.length-1]|0;m=26-this._countBits(A);0!==m&&(B=B.ushln(m),u.iushln(m),A=B.words[B.length-1]|0);var H=u.length-B.length;if("mod"!==t){var F=new l(null);F.length=H+1;F.words=Array(F.length);for(var L=0;L<F.length;L++)F.words[L]=0}L=u.clone()._ishlnsubmul(B,1,H);0===L.negative&&(u=L,F&&(F.words[H]=1));for(--H;0<=H;H--){L=67108864*(u.words[B.length+H]|0)+(u.words[B.length+H-1]|0);L=Math.min(L/A|0,67108863);for(u._ishlnsubmul(B,L,H);0!==u.negative;)L--,u.negative=
0,u._ishlnsubmul(B,1,H),u.isZero()||(u.negative^=1);F&&(F.words[H]=L)}F&&F.strip();u.strip();"div"!==t&&0!==m&&u.iushrn(m);return{div:F||null,mod:u}};l.prototype.divmod=function(m,t,u){k(!m.isZero());if(this.isZero())return{div:new l(0),mod:new l(0)};var B;if(0!==(this||lb).negative&&0===m.negative){var A=this.neg().divmod(m,t);"mod"!==t&&(B=A.div.neg());if("div"!==t){var H=A.mod.neg();u&&0!==H.negative&&H.iadd(m)}return{div:B,mod:H}}return 0===(this||lb).negative&&0!==m.negative?(A=this.divmod(m.neg(),
t),"mod"!==t&&(B=A.div.neg()),{div:B,mod:A.mod}):0!==((this||lb).negative&m.negative)?(A=this.neg().divmod(m.neg(),t),"div"!==t&&(H=A.mod.neg(),u&&0!==H.negative&&H.isub(m)),{div:A.div,mod:H}):m.length>(this||lb).length||0>this.cmp(m)?{div:new l(0),mod:this||lb}:1===m.length?"div"===t?{div:this.divn(m.words[0]),mod:null}:"mod"===t?{div:null,mod:new l(this.modn(m.words[0]))}:{div:this.divn(m.words[0]),mod:new l(this.modn(m.words[0]))}:this._wordDiv(m,t)};l.prototype.div=function(m){return this.divmod(m,
"div",!1).div};l.prototype.mod=function(m){return this.divmod(m,"mod",!1).mod};l.prototype.umod=function(m){return this.divmod(m,"mod",!0).mod};l.prototype.divRound=function(m){var t=this.divmod(m);if(t.mod.isZero())return t.div;var u=0!==t.div.negative?t.mod.isub(m):t.mod,B=m.ushrn(1);m=m.andln(1);u=u.cmp(B);return 0>u||1===m&&0===u?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)};l.prototype.modn=function(m){k(67108863>=m);for(var t=67108864%m,u=0,B=(this||lb).length-1;0<=B;B--)u=(t*u+((this||
lb).words[B]|0))%m;return u};l.prototype.idivn=function(m){k(67108863>=m);for(var t=0,u=(this||lb).length-1;0<=u;u--)t=((this||lb).words[u]|0)+67108864*t,(this||lb).words[u]=t/m|0,t%=m;return this.strip()};l.prototype.divn=function(m){return this.clone().idivn(m)};l.prototype.egcd=function(m){k(0===m.negative);k(!m.isZero());var t=this||lb,u=m.clone();t=0!==t.negative?t.umod(m):t.clone();m=new l(1);for(var B=new l(0),A=new l(0),H=new l(1),F=0;t.isEven()&&u.isEven();)t.iushrn(1),u.iushrn(1),++F;for(var L=
u.clone(),U=t.clone();!t.isZero();){for(var T=0,Y=1;0===(t.words[0]&Y)&&26>T;++T,Y<<=1);if(0<T)for(t.iushrn(T);0<T--;){if(m.isOdd()||B.isOdd())m.iadd(L),B.isub(U);m.iushrn(1);B.iushrn(1)}T=0;for(Y=1;0===(u.words[0]&Y)&&26>T;++T,Y<<=1);if(0<T)for(u.iushrn(T);0<T--;){if(A.isOdd()||H.isOdd())A.iadd(L),H.isub(U);A.iushrn(1);H.iushrn(1)}0<=t.cmp(u)?(t.isub(u),m.isub(A),B.isub(H)):(u.isub(t),A.isub(m),H.isub(B))}return{a:A,b:H,gcd:u.iushln(F)}};l.prototype._invmp=function(m){k(0===m.negative);k(!m.isZero());
var t=this||lb,u=m.clone();t=0!==t.negative?t.umod(m):t.clone();for(var B=new l(1),A=new l(0),H=u.clone();0<t.cmpn(1)&&0<u.cmpn(1);){for(var F=0,L=1;0===(t.words[0]&L)&&26>F;++F,L<<=1);if(0<F)for(t.iushrn(F);0<F--;)B.isOdd()&&B.iadd(H),B.iushrn(1);F=0;for(L=1;0===(u.words[0]&L)&&26>F;++F,L<<=1);if(0<F)for(u.iushrn(F);0<F--;)A.isOdd()&&A.iadd(H),A.iushrn(1);0<=t.cmp(u)?(t.isub(u),B.isub(A)):(u.isub(t),A.isub(B))}t=0===t.cmpn(1)?B:A;0>t.cmpn(0)&&t.iadd(m);return t};l.prototype.gcd=function(m){if(this.isZero())return m.abs();
if(m.isZero())return this.abs();var t=this.clone();m=m.clone();t.negative=0;for(var u=m.negative=0;t.isEven()&&m.isEven();u++)t.iushrn(1),m.iushrn(1);do{for(;t.isEven();)t.iushrn(1);for(;m.isEven();)m.iushrn(1);var B=t.cmp(m);if(0>B)B=t,t=m,m=B;else if(0===B||0===m.cmpn(1))break;t.isub(m)}while(1);return m.iushln(u)};l.prototype.invm=function(m){return this.egcd(m).a.umod(m)};l.prototype.isEven=function(){return 0===((this||lb).words[0]&1)};l.prototype.isOdd=function(){return 1===((this||lb).words[0]&
1)};l.prototype.andln=function(m){return(this||lb).words[0]&m};l.prototype.bincn=function(m){k("number"===typeof m);var t=m%26;m=(m-t)/26;t=1<<t;if((this||lb).length<=m)return this._expand(m+1),(this||lb).words[m]|=t,this||lb;for(;0!==t&&m<(this||lb).length;m++){var u=(this||lb).words[m]|0;u+=t;t=u>>>26;u&=67108863;(this||lb).words[m]=u}0!==t&&((this||lb).words[m]=t,(this||lb).length++);return this||lb};l.prototype.isZero=function(){return 1===(this||lb).length&&0===(this||lb).words[0]};l.prototype.cmpn=
function(m){var t=0>m;if(0!==(this||lb).negative&&!t)return-1;if(0===(this||lb).negative&&t)return 1;this.strip();1<(this||lb).length?m=1:(t&&(m=-m),k(67108863>=m,"Number is too big"),t=(this||lb).words[0]|0,m=t===m?0:t<m?-1:1);return 0!==(this||lb).negative?-m|0:m};l.prototype.cmp=function(m){if(0!==(this||lb).negative&&0===m.negative)return-1;if(0===(this||lb).negative&&0!==m.negative)return 1;m=this.ucmp(m);return 0!==(this||lb).negative?-m|0:m};l.prototype.ucmp=function(m){if((this||lb).length>
m.length)return 1;if((this||lb).length<m.length)return-1;for(var t=0,u=(this||lb).length-1;0<=u;u--){var B=(this||lb).words[u]|0,A=m.words[u]|0;if(B!==A){B<A?t=-1:B>A&&(t=1);break}}return t};l.prototype.gtn=function(m){return 1===this.cmpn(m)};l.prototype.gt=function(m){return 1===this.cmp(m)};l.prototype.gten=function(m){return 0<=this.cmpn(m)};l.prototype.gte=function(m){return 0<=this.cmp(m)};l.prototype.ltn=function(m){return-1===this.cmpn(m)};l.prototype.lt=function(m){return-1===this.cmp(m)};
l.prototype.lten=function(m){return 0>=this.cmpn(m)};l.prototype.lte=function(m){return 0>=this.cmp(m)};l.prototype.eqn=function(m){return 0===this.cmpn(m)};l.prototype.eq=function(m){return 0===this.cmp(m)};l.red=function(m){return new y(m)};l.prototype.toRed=function(m){k(!(this||lb).red,"Already a number in reduction context");k(0===(this||lb).negative,"red works only with positives");return m.convertTo(this||lb)._forceRed(m)};l.prototype.fromRed=function(){k((this||lb).red,"fromRed works only with numbers in reduction context");
return(this||lb).red.convertFrom(this||lb)};l.prototype._forceRed=function(m){(this||lb).red=m;return this||lb};l.prototype.forceRed=function(m){k(!(this||lb).red,"Already a number in reduction context");return this._forceRed(m)};l.prototype.redAdd=function(m){k((this||lb).red,"redAdd works only with red numbers");return(this||lb).red.add(this||lb,m)};l.prototype.redIAdd=function(m){k((this||lb).red,"redIAdd works only with red numbers");return(this||lb).red.iadd(this||lb,m)};l.prototype.redSub=function(m){k((this||
lb).red,"redSub works only with red numbers");return(this||lb).red.sub(this||lb,m)};l.prototype.redISub=function(m){k((this||lb).red,"redISub works only with red numbers");return(this||lb).red.isub(this||lb,m)};l.prototype.redShl=function(m){k((this||lb).red,"redShl works only with red numbers");return(this||lb).red.shl(this||lb,m)};l.prototype.redMul=function(m){k((this||lb).red,"redMul works only with red numbers");(this||lb).red._verify2(this||lb,m);return(this||lb).red.mul(this||lb,m)};l.prototype.redIMul=
function(m){k((this||lb).red,"redMul works only with red numbers");(this||lb).red._verify2(this||lb,m);return(this||lb).red.imul(this||lb,m)};l.prototype.redSqr=function(){k((this||lb).red,"redSqr works only with red numbers");(this||lb).red._verify1(this||lb);return(this||lb).red.sqr(this||lb)};l.prototype.redISqr=function(){k((this||lb).red,"redISqr works only with red numbers");(this||lb).red._verify1(this||lb);return(this||lb).red.isqr(this||lb)};l.prototype.redSqrt=function(){k((this||lb).red,
"redSqrt works only with red numbers");(this||lb).red._verify1(this||lb);return(this||lb).red.sqrt(this||lb)};l.prototype.redInvm=function(){k((this||lb).red,"redInvm works only with red numbers");(this||lb).red._verify1(this||lb);return(this||lb).red.invm(this||lb)};l.prototype.redNeg=function(){k((this||lb).red,"redNeg works only with red numbers");(this||lb).red._verify1(this||lb);return(this||lb).red.neg(this||lb)};l.prototype.redPow=function(m){k((this||lb).red&&!m.red,"redPow(normalNum)");(this||
lb).red._verify1(this||lb);return(this||lb).red.pow(this||lb,m)};var aa={k256:null,p224:null,p192:null,p25519:null};e.prototype._tmp=function(){var m=new l(null);m.words=Array(Math.ceil((this||lb).n/13));return m};e.prototype.ireduce=function(m){do{this.split(m,(this||lb).tmp);m=this.imulK(m);m=m.iadd((this||lb).tmp);var t=m.bitLength()}while(t>(this||lb).n);t=t<(this||lb).n?-1:m.ucmp((this||lb).p);0===t?(m.words[0]=0,m.length=1):0<t?m.isub((this||lb).p):void 0!==m.strip?m.strip():m._strip();return m};
e.prototype.split=function(m,t){m.iushrn((this||lb).n,0,t)};e.prototype.imulK=function(m){return m.imul((this||lb).k)};f(n,e);n.prototype.split=function(m,t){for(var u=Math.min(m.length,9),B=0;B<u;B++)t.words[B]=m.words[B];t.length=u;if(9>=m.length)m.words[0]=0,m.length=1;else{u=m.words[9];t.words[t.length++]=u&4194303;for(B=10;B<m.length;B++)t=m.words[B]|0,m.words[B-10]=(t&4194303)<<4|u>>>22,u=t;u>>>=22;m.words[B-10]=u;m.length=0===u&&10<m.length?m.length-10:m.length-9}};n.prototype.imulK=function(m){m.words[m.length]=
0;m.words[m.length+1]=0;m.length+=2;for(var t=0,u=0;u<m.length;u++){var B=m.words[u]|0;t+=977*B;m.words[u]=t&67108863;t=64*B+(t/67108864|0)}0===m.words[m.length-1]&&(m.length--,0===m.words[m.length-1]&&m.length--);return m};f(q,e);f(r,e);f(v,e);v.prototype.imulK=function(m){for(var t=0,u=0;u<m.length;u++){t=19*(m.words[u]|0)+t;var B=t&67108863;t>>>=26;m.words[u]=B}0!==t&&(m.words[m.length++]=t);return m};l._prime=function(m){if(aa[m])return aa[m];if("k256"===m)var t=new n;else if("p224"===m)t=new q;
else if("p192"===m)t=new r;else if("p25519"===m)t=new v;else throw Error("Unknown prime "+m);return aa[m]=t};y.prototype._verify1=function(m){k(0===m.negative,"red works only with positives");k(m.red,"red works only with red numbers")};y.prototype._verify2=function(m,t){k(0===(m.negative|t.negative),"red works only with positives");k(m.red&&m.red===t.red,"red works only with red numbers")};y.prototype.imod=function(m){return(this||lb).prime?(this||lb).prime.ireduce(m)._forceRed(this||lb):m.umod((this||
lb).m)._forceRed(this||lb)};y.prototype.neg=function(m){return m.isZero()?m.clone():(this||lb).m.sub(m)._forceRed(this||lb)};y.prototype.add=function(m,t){this._verify2(m,t);m=m.add(t);0<=m.cmp((this||lb).m)&&m.isub((this||lb).m);return m._forceRed(this||lb)};y.prototype.iadd=function(m,t){this._verify2(m,t);m=m.iadd(t);0<=m.cmp((this||lb).m)&&m.isub((this||lb).m);return m};y.prototype.sub=function(m,t){this._verify2(m,t);m=m.sub(t);0>m.cmpn(0)&&m.iadd((this||lb).m);return m._forceRed(this||lb)};
y.prototype.isub=function(m,t){this._verify2(m,t);m=m.isub(t);0>m.cmpn(0)&&m.iadd((this||lb).m);return m};y.prototype.shl=function(m,t){this._verify1(m);return this.imod(m.ushln(t))};y.prototype.imul=function(m,t){this._verify2(m,t);return this.imod(m.imul(t))};y.prototype.mul=function(m,t){this._verify2(m,t);return this.imod(m.mul(t))};y.prototype.isqr=function(m){return this.imul(m,m.clone())};y.prototype.sqr=function(m){return this.mul(m,m)};y.prototype.sqrt=function(m){if(m.isZero())return m.clone();
var t=(this||lb).m.andln(3);k(1===t%2);if(3===t)return t=(this||lb).m.add(new l(1)).iushrn(2),this.pow(m,t);for(var u=(this||lb).m.subn(1),B=0;!u.isZero()&&0===u.andln(1);)B++,u.iushrn(1);k(!u.isZero());t=(new l(1)).toRed(this||lb);var A=t.redNeg(),H=(this||lb).m.subn(1).iushrn(1),F=(this||lb).m.bitLength();for(F=(new l(2*F*F)).toRed(this||lb);0!==this.pow(F,H).cmp(A);)F.redIAdd(A);H=this.pow(F,u);A=this.pow(m,u.addn(1).iushrn(1));m=this.pow(m,u);for(u=B;0!==m.cmp(t);){F=m;for(B=0;0!==F.cmp(t);B++)F=
F.redSqr();k(B<u);H=this.pow(H,(new l(1)).iushln(u-B-1));A=A.redMul(H);H=H.redSqr();m=m.redMul(H);u=B}return A};y.prototype.invm=function(m){m=m._invmp((this||lb).m);return 0!==m.negative?(m.negative=0,this.imod(m).redNeg()):this.imod(m)};y.prototype.pow=function(m,t){if(t.isZero())return(new l(1)).toRed(this||lb);if(0===t.cmpn(1))return m.clone();var u=Array(16);u[0]=(new l(1)).toRed(this||lb);u[1]=m;for(var B=2;B<u.length;B++)u[B]=this.mul(u[B-1],m);m=u[0];var A=0,H=0,F=t.bitLength()%26;0===F&&
(F=26);for(B=t.length-1;0<=B;B--){var L=t.words[B];for(--F;0<=F;F--){var U=L>>F&1;m!==u[0]&&(m=this.sqr(m));if(0===U&&0===A)H=0;else if(A<<=1,A|=U,H++,4===H||0===B&&0===F)m=this.mul(m,u[A]),A=H=0}F=26}return m};y.prototype.convertTo=function(m){var t=m.umod((this||lb).m);return t===m?t.clone():t};y.prototype.convertFrom=function(m){m=m.clone();m.red=null;return m};l.mont=function(m){return new D(m)};f(D,y);D.prototype.convertTo=function(m){return this.imod(m.ushln((this||lb).shift))};D.prototype.convertFrom=
function(m){m=this.imod(m.mul((this||lb).rinv));m.red=null;return m};D.prototype.imul=function(m,t){if(m.isZero()||t.isZero())return m.words[0]=0,m.length=1,m;m=m.imul(t);t=m.maskn((this||lb).shift).mul((this||lb).minv).imaskn((this||lb).shift).mul((this||lb).m);t=m=m.isub(t).iushrn((this||lb).shift);0<=m.cmp((this||lb).m)?t=m.isub((this||lb).m):0>m.cmpn(0)&&(t=m.iadd((this||lb).m));return t._forceRed(this||lb)};D.prototype.mul=function(m,t){if(m.isZero()||t.isZero())return(new l(0))._forceRed(this||
lb);m=m.mul(t);t=m.maskn((this||lb).shift).mul((this||lb).minv).imaskn((this||lb).shift).mul((this||lb).m);t=m=m.isub(t).iushrn((this||lb).shift);0<=m.cmp((this||lb).m)?t=m.isub((this||lb).m):0>m.cmpn(0)&&(t=m.iadd((this||lb).m));return t._forceRed(this||lb)};D.prototype.invm=function(m){return this.imod(m._invmp((this||lb).m).mul((this||lb).r2))._forceRed(this||lb)}})(wP,j4);return wP.exports}function xP(){if(k4)return l4;k4=!0;var g=Jg,c=Yg,k=c.Buffer,f={},l;for(l in c)c.hasOwnProperty(l)&&"SlowBuffer"!==
l&&"Buffer"!==l&&(f[l]=c[l]);c=f.Buffer={};for(l in k)k.hasOwnProperty(l)&&"allocUnsafe"!==l&&"allocUnsafeSlow"!==l&&(c[l]=k[l]);f.Buffer.prototype=k.prototype;c.from&&c.from!==Uint8Array.from||(c.from=function(p,b,d){if("number"===typeof p)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof p);if(p&&"undefined"===typeof p.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof p);return k(p,b,d)});c.alloc||(c.alloc=function(p,b,d){if("number"!==typeof p)throw new TypeError('The "size" argument must be of type number. Received type '+typeof p);if(0>p||2147483648<=p)throw new RangeError('The value "'+p+'" is invalid for option "size"');p=k(p);b&&0!==b.length?"string"===typeof d?p.fill(b,d):p.fill(b):p.fill(0);return p});if(!f.kStringMaxLength)try{f.kStringMaxLength=g.binding("buffer").kStringMaxLength}catch(p){}f.constants||(f.constants={MAX_LENGTH:f.kMaxLength},f.kStringMaxLength&&
(f.constants.MAX_STRING_LENGTH=f.kStringMaxLength));return l4=f}function yP(){function g(f){this._reporterState={obj:null,path:[],options:f||{},errors:[]}}function c(f,l){this.path=f;this.rethrow(l)}if(m4)return zP;m4=!0;var k=Fh();zP.Reporter=g;g.prototype.isError=function(f){return f instanceof c};g.prototype.save=function(){var f=this._reporterState;return{obj:f.obj,pathLen:f.path.length}};g.prototype.restore=function(f){var l=this._reporterState;l.obj=f.obj;l.path=l.path.slice(0,f.pathLen)};g.prototype.enterKey=
function(f){return this._reporterState.path.push(f)};g.prototype.exitKey=function(f){var l=this._reporterState;l.path=l.path.slice(0,f-1)};g.prototype.leaveKey=function(f,l,p){var b=this._reporterState;this.exitKey(f);null!==b.obj&&(b.obj[l]=p)};g.prototype.path=function(){return this._reporterState.path.join("/")};g.prototype.enterObject=function(){var f=this._reporterState,l=f.obj;f.obj={};return l};g.prototype.leaveObject=function(f){var l=this._reporterState,p=l.obj;l.obj=f;return p};g.prototype.error=
function(f){var l=this._reporterState,p=f instanceof c;f=p?f:new c(l.path.map(function(b){return"["+JSON.stringify(b)+"]"}).join(""),f.message||f,f.stack);if(!l.options.partial)throw f;p||l.errors.push(f);return f};g.prototype.wrapResult=function(f){var l=this._reporterState;return l.options.partial?{result:this.isError(f)?null:f,errors:l.errors}:f};k(c,Error);c.prototype.rethrow=function(f){this.message=f+" at: "+(this.path||"(shallow)");Error.captureStackTrace&&Error.captureStackTrace(this,c);if(!this.stack)try{throw Error(this.message);
}catch(l){this.stack=l.stack}return this};return zP}function SA(){function g(p,b){f.call(this,b);l.isBuffer(p)?(this.base=p,this.offset=0,this.length=p.length):this.error("Input not Buffer")}function c(p,b){if(Array.isArray(p))this.length=0,this.value=p.map(function(d){c.isEncoderBuffer(d)||(d=new c(d,b));this.length+=d.length;return d},this);else if("number"===typeof p){if(!(0<=p&&255>=p))return b.error("non-byte EncoderBuffer value");this.value=p;this.length=1}else if("string"===typeof p)this.value=
p,this.length=l.byteLength(p);else if(l.isBuffer(p))this.value=p,this.length=p.length;else return b.error("Unsupported type: "+typeof p)}if(n4)return pG;n4=!0;var k=Fh(),f=yP().Reporter,l=xP().Buffer;k(g,f);pG.DecoderBuffer=g;g.isDecoderBuffer=function(p){return p instanceof g?!0:"object"===typeof p&&l.isBuffer(p.base)&&"DecoderBuffer"===p.constructor.name&&"number"===typeof p.offset&&"number"===typeof p.length&&"function"===typeof p.save&&"function"===typeof p.restore&&"function"===typeof p.isEmpty&&
"function"===typeof p.readUInt8&&"function"===typeof p.skip&&"function"===typeof p.raw};g.prototype.save=function(){return{offset:this.offset,reporter:f.prototype.save.call(this)}};g.prototype.restore=function(p){var b=new g(this.base);b.offset=p.offset;b.length=this.offset;this.offset=p.offset;f.prototype.restore.call(this,p.reporter);return b};g.prototype.isEmpty=function(){return this.offset===this.length};g.prototype.readUInt8=function(p){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,
!0):this.error(p||"DecoderBuffer overrun")};g.prototype.skip=function(p,b){if(!(this.offset+p<=this.length))return this.error(b||"DecoderBuffer overrun");b=new g(this.base);b._reporterState=this._reporterState;b.offset=this.offset;b.length=this.offset+p;this.offset+=p;return b};g.prototype.raw=function(p){return this.base.slice(p?p.offset:this.offset,this.length)};pG.EncoderBuffer=c;c.isEncoderBuffer=function(p){return p instanceof c?!0:"object"===typeof p&&"EncoderBuffer"===p.constructor.name&&"number"===
typeof p.length&&"function"===typeof p.join};c.prototype.join=function(p,b){p||(p=l.alloc(this.length));b||(b=0);if(0===this.length)return p;Array.isArray(this.value)?this.value.forEach(function(d){d.join(p,b);b+=d.length}):("number"===typeof this.value?p[b]=this.value:"string"===typeof this.value?p.write(this.value,b):l.isBuffer(this.value)&&this.value.copy(p,b),b+=this.length);return p};return pG}function AP(){function g(h,a,e){var n={};this._baseState=n;n.name=e;n.enc=h;n.parent=a||null;n.children=
null;n.tag=null;n.args=null;n.reverseArgs=null;n.choice=null;n.optional=!1;n.any=!1;n.obj=!1;n.use=null;n.useDecoder=null;n.key=null;n["default"]=null;n.explicit=null;n.implicit=null;n.contains=null;n.parent||(n.children=[],this._wrap())}if(o4)return BP;o4=!0;var c=yP().Reporter,k=SA().EncoderBuffer,f=SA().DecoderBuffer,l=Rp(),p="seq seqof set setof objid bool gentime utctime null_ enum int objDesc bitstr bmpstr charstr genstr graphstr ia5str iso646str numstr octstr printstr t61str unistr utf8str videostr".split(" "),
b="key obj use optional explicit implicit def choice any contains".split(" ").concat(p);BP=g;var d="enc parent children tag args reverseArgs choice optional any obj use alteredUse key default explicit implicit contains".split(" ");g.prototype.clone=function(){var h=this._baseState,a={};d.forEach(function(n){a[n]=h[n]});var e=new this.constructor(a.parent);e._baseState=a;return e};g.prototype._wrap=function(){var h=this._baseState;b.forEach(function(a){this[a]=function(){var e=new this.constructor(this);
h.children.push(e);return e[a].apply(e,arguments)}},this)};g.prototype._init=function(h){var a=this._baseState;l(null===a.parent);h.call(this);a.children=a.children.filter(function(e){return e._baseState.parent===this},this);l.equal(a.children.length,1,"Root node can have only one child")};g.prototype._useArgs=function(h){var a=this._baseState,e=h.filter(function(n){return n instanceof this.constructor},this);h=h.filter(function(n){return!(n instanceof this.constructor)},this);0!==e.length&&(l(null===
a.children),a.children=e,e.forEach(function(n){n._baseState.parent=this},this));0!==h.length&&(l(null===a.args),a.args=h,a.reverseArgs=h.map(function(n){if("object"!==typeof n||n.constructor!==Object)return n;var q={};Object.keys(n).forEach(function(r){r==(r|0)&&(r|=0);q[n[r]]=r});return q}))};"_peekTag _decodeTag _use _decodeStr _decodeObjid _decodeTime _decodeNull _decodeInt _decodeBool _decodeList _encodeComposite _encodeStr _encodeObjid _encodeTime _encodeNull _encodeInt _encodeBool".split(" ").forEach(function(h){g.prototype[h]=
function(){throw Error(h+" not implemented for encoding: "+this._baseState.enc);}});p.forEach(function(h){g.prototype[h]=function(){var a=this._baseState,e=Array.prototype.slice.call(arguments);l(null===a.tag);a.tag=h;this._useArgs(e);return this}});g.prototype.use=function(h){l(h);var a=this._baseState;l(null===a.use);a.use=h;return this};g.prototype.optional=function(){this._baseState.optional=!0;return this};g.prototype.def=function(h){var a=this._baseState;l(null===a["default"]);a["default"]=
h;a.optional=!0;return this};g.prototype.explicit=function(h){var a=this._baseState;l(null===a.explicit&&null===a.implicit);a.explicit=h;return this};g.prototype.implicit=function(h){var a=this._baseState;l(null===a.explicit&&null===a.implicit);a.implicit=h;return this};g.prototype.obj=function(){var h=this._baseState,a=Array.prototype.slice.call(arguments);h.obj=!0;0!==a.length&&this._useArgs(a);return this};g.prototype.key=function(h){var a=this._baseState;l(null===a.key);a.key=h;return this};g.prototype.any=
function(){this._baseState.any=!0;return this};g.prototype.choice=function(h){var a=this._baseState;l(null===a.choice);a.choice=h;this._useArgs(Object.keys(h).map(function(e){return h[e]}));return this};g.prototype.contains=function(h){var a=this._baseState;l(null===a.use);a.contains=h;return this};g.prototype._decode=function(h,a){var e=this._baseState;if(null===e.parent)return h.wrapResult(e.children[0]._decode(h,a));var n=e["default"],q=!0,r=null;null!==e.key&&(r=h.enterKey(e.key));if(e.optional){var v=
null;null!==e.explicit?v=e.explicit:null!==e.implicit?v=e.implicit:null!==e.tag&&(v=e.tag);if(null!==v||e.any){if(q=this._peekTag(h,v,e.any),h.isError(q))return q}else{v=h.save();try{null===e.choice?this._decodeGeneric(e.tag,h,a):this._decodeChoice(h,a),q=!0}catch(I){q=!1}h.restore(v)}}var y;e.obj&&q&&(y=h.enterObject());if(q){if(null!==e.explicit){v=this._decodeTag(h,e.explicit);if(h.isError(v))return v;h=v}v=h.offset;if(null===e.use&&null===e.choice){var D;e.any&&(D=h.save());var E=this._decodeTag(h,
null!==e.implicit?e.implicit:e.tag,e.any);if(h.isError(E))return E;e.any?n=h.raw(D):h=E}a&&a.track&&null!==e.tag&&a.track(h.path(),v,h.length,"tagged");a&&a.track&&null!==e.tag&&a.track(h.path(),h.offset,h.length,"content");e.any||(n=null===e.choice?this._decodeGeneric(e.tag,h,a):this._decodeChoice(h,a));if(h.isError(n))return n;e.any||null!==e.choice||null===e.children||e.children.forEach(function(I){I._decode(h,a)});!e.contains||"octstr"!==e.tag&&"bitstr"!==e.tag||(n=new f(n),n=this._getUse(e.contains,
h._reporterState.obj)._decode(n,a))}e.obj&&q&&(n=h.leaveObject(y));null===e.key||null===n&&!0!==q?null!==r&&h.exitKey(r):h.leaveKey(r,e.key,n);return n};g.prototype._decodeGeneric=function(h,a,e){var n=this._baseState;return"seq"===h||"set"===h?null:"seqof"===h||"setof"===h?this._decodeList(a,h,n.args[0],e):/str$/.test(h)?this._decodeStr(a,h,e):"objid"===h&&n.args?this._decodeObjid(a,n.args[0],n.args[1],e):"objid"===h?this._decodeObjid(a,null,null,e):"gentime"===h||"utctime"===h?this._decodeTime(a,
h,e):"null_"===h?this._decodeNull(a,e):"bool"===h?this._decodeBool(a,e):"objDesc"===h?this._decodeStr(a,h,e):"int"===h||"enum"===h?this._decodeInt(a,n.args&&n.args[0],e):null!==n.use?this._getUse(n.use,a._reporterState.obj)._decode(a,e):a.error("unknown tag: "+h)};g.prototype._getUse=function(h,a){var e=this._baseState;e.useDecoder=this._use(h,a);l(null===e.useDecoder._baseState.parent);e.useDecoder=e.useDecoder._baseState.children[0];e.implicit!==e.useDecoder._baseState.implicit&&(e.useDecoder=e.useDecoder.clone(),
e.useDecoder._baseState.implicit=e.implicit);return e.useDecoder};g.prototype._decodeChoice=function(h,a){var e=this._baseState,n=null,q=!1;Object.keys(e.choice).some(function(r){var v=h.save(),y=e.choice[r];try{var D=y._decode(h,a);if(h.isError(D))return!1;n={type:r,value:D};q=!0}catch(E){return h.restore(v),!1}return!0},this);return q?n:h.error("Choice not matched")};g.prototype._createEncoderBuffer=function(h){return new k(h,this.reporter)};g.prototype._encode=function(h,a,e){var n=this._baseState;
if(null===n["default"]||n["default"]!==h)if(h=this._encodeValue(h,a,e),void 0!==h&&!this._skipDefault(h,a,e))return h};g.prototype._encodeValue=function(h,a,e){var n=this._baseState;if(null===n.parent)return n.children[0]._encode(h,a||new c);var q=null;this.reporter=a;if(n.optional&&void 0===h)if(null!==n["default"])h=n["default"];else return;var r=null,v=!1;if(n.any)q=this._createEncoderBuffer(h);else if(n.choice)q=this._encodeChoice(h,a);else if(n.contains)r=this._getUse(n.contains,e)._encode(h,
a),v=!0;else if(n.children)r=n.children.map(function(D){if("null_"===D._baseState.tag)return D._encode(null,a,h);if(null===D._baseState.key)return a.error("Child should have a key");var E=a.enterKey(D._baseState.key);if("object"!==typeof h)return a.error("Child expected, but input is not object");D=D._encode(h[D._baseState.key],a,h);a.leaveKey(E);return D},this).filter(function(D){return D}),r=this._createEncoderBuffer(r);else if("seqof"===n.tag||"setof"===n.tag){if(!n.args||1!==n.args.length)return a.error("Too many args for : "+
n.tag);if(!Array.isArray(h))return a.error("seqof/setof, but data is not Array");r=this.clone();r._baseState.implicit=null;r=this._createEncoderBuffer(h.map(function(D){return this._getUse(this._baseState.args[0],h)._encode(D,a)},r))}else null!==n.use?q=this._getUse(n.use,e)._encode(h,a):(r=this._encodePrimitive(n.tag,h),v=!0);if(!n.any&&null===n.choice){e=null!==n.implicit?n.implicit:n.tag;var y=null===n.implicit?"universal":"context";null===e?null===n.use&&a.error("Tag could be omitted only for .use()"):
null===n.use&&(q=this._encodeComposite(e,v,y,r))}null!==n.explicit&&(q=this._encodeComposite(n.explicit,!1,"context",q));return q};g.prototype._encodeChoice=function(h,a){var e=this._baseState,n=e.choice[h.type];n||l(!1,h.type+" not found in "+JSON.stringify(Object.keys(e.choice)));return n._encode(h.value,a)};g.prototype._encodePrimitive=function(h,a){var e=this._baseState;if(/str$/.test(h))return this._encodeStr(a,h);if("objid"===h&&e.args)return this._encodeObjid(a,e.reverseArgs[0],e.args[1]);
if("objid"===h)return this._encodeObjid(a,null,null);if("gentime"===h||"utctime"===h)return this._encodeTime(a,h);if("null_"===h)return this._encodeNull();if("int"===h||"enum"===h)return this._encodeInt(a,e.args&&e.reverseArgs[0]);if("bool"===h)return this._encodeBool(a);if("objDesc"===h)return this._encodeStr(a,h);throw Error("Unsupported tag: "+h);};g.prototype._isNumstr=function(h){return/^[0-9 ]*$/.test(h)};g.prototype._isPrintstr=function(h){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(h)};return BP}
function CP(){function g(c){var k={};Object.keys(c).forEach(function(f){(f|0)==f&&(f|=0);k[c[f]]=f});return k}if(p4)return Ms;p4=!0;Ms.tagClass={0:"universal",1:"application",2:"context",3:"private"};Ms.tagClassByName=g(Ms.tagClass);Ms.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",
25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"};Ms.tagByName=g(Ms.tag);return Ms}function q4(){function g(d){this.enc="der";this.name=d.name;this.entity=d;this.tree=new c;this.tree._init(d.body)}function c(d){p.call(this,"der",d)}function k(d){return 10>d?"0"+d:d}if(r4)return DP;r4=!0;var f=Fh(),l=xP().Buffer,p=AP(),b=CP();DP=g;g.prototype.encode=function(d,h){return this.tree._encode(d,h).join()};f(c,p);c.prototype._encodeComposite=function(d,h,a,e){a:{var n=d;d=this.reporter;
"seqof"===n?n="seq":"setof"===n&&(n="set");if(b.tagByName.hasOwnProperty(n))n=b.tagByName[n];else if("number"!==typeof n||(n|0)!==n){h=d.error("Unknown tag: "+n);break a}31<=n?h=d.error("Multi-octet tag encoding unsupported"):(h||(n|=32),h=n|=b.tagClassByName[a||"universal"]<<6)}if(128>e.length)return a=l.alloc(2),a[0]=h,a[1]=e.length,this._createEncoderBuffer([a,e]);d=1;for(a=e.length;256<=a;a>>=8)d++;a=l.alloc(2+d);a[0]=h;a[1]=128|d;h=1+d;for(d=e.length;0<d;h--,d>>=8)a[h]=d&255;return this._createEncoderBuffer([a,
e])};c.prototype._encodeStr=function(d,h){if("bitstr"===h)return this._createEncoderBuffer([d.unused|0,d.data]);if("bmpstr"===h){h=l.alloc(2*d.length);for(var a=0;a<d.length;a++)h.writeUInt16BE(d.charCodeAt(a),2*a);return this._createEncoderBuffer(h)}return"numstr"===h?this._isNumstr(d)?this._createEncoderBuffer(d):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===h?this._isPrintstr(d)?this._createEncoderBuffer(d):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):
/str$/.test(h)?this._createEncoderBuffer(d):"objDesc"===h?this._createEncoderBuffer(d):this.reporter.error("Encoding of string type: "+h+" unsupported")};c.prototype._encodeObjid=function(d,h,a){if("string"===typeof d){if(!h)return this.reporter.error("string objid given, but no values map found");if(!h.hasOwnProperty(d))return this.reporter.error("objid not found in values map");d=h[d].split(/[\s.]+/g);for(h=0;h<d.length;h++)d[h]|=0}else if(Array.isArray(d))for(d=d.slice(),h=0;h<d.length;h++)d[h]|=
0;if(!Array.isArray(d))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(d));if(!a){if(40<=d[1])return this.reporter.error("Second objid identifier OOB");d.splice(0,2,40*d[0]+d[1])}for(h=a=0;h<d.length;h++){var e=d[h];for(a++;128<=e;e>>=7)a++}a=l.alloc(a);h=a.length-1;for(e=d.length-1;0<=e;e--){var n=d[e];for(a[h--]=n&127;0<(n>>=7);)a[h--]=128|n&127}return this._createEncoderBuffer(a)};c.prototype._encodeTime=function(d,h){var a;d=new Date(d);"gentime"===
h?a=[k(d.getUTCFullYear()),k(d.getUTCMonth()+1),k(d.getUTCDate()),k(d.getUTCHours()),k(d.getUTCMinutes()),k(d.getUTCSeconds()),"Z"].join(""):"utctime"===h?a=[k(d.getUTCFullYear()%100),k(d.getUTCMonth()+1),k(d.getUTCDate()),k(d.getUTCHours()),k(d.getUTCMinutes()),k(d.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+h+" time is not supported yet");return this._encodeStr(a,"octstr")};c.prototype._encodeNull=function(){return this._createEncoderBuffer("")};c.prototype._encodeInt=function(d,
h){if("string"===typeof d){if(!h)return this.reporter.error("String int or enum given, but no values map");if(!h.hasOwnProperty(d))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(d));d=h[d]}"number"===typeof d||l.isBuffer(d)||(h=d.toArray(),!d.sign&&h[0]&128&&h.unshift(0),d=l.from(h));if(l.isBuffer(d))return h=d.length,0===d.length&&h++,h=l.alloc(h),d.copy(h),0===d.length&&(h[0]=0),this._createEncoderBuffer(h);if(128>d)return this._createEncoderBuffer(d);if(256>d)return this._createEncoderBuffer([0,
d]);h=1;for(var a=d;256<=a;a>>=8)h++;h=Array(h);for(a=h.length-1;0<=a;a--)h[a]=d&255,d>>=8;h[0]&128&&h.unshift(0);return this._createEncoderBuffer(l.from(h))};c.prototype._encodeBool=function(d){return this._createEncoderBuffer(d?255:0)};c.prototype._use=function(d,h){"function"===typeof d&&(d=d(h));return d._getEncoder("der").tree};c.prototype._skipDefault=function(d,h,a){var e=this._baseState;if(null===e["default"])return!1;d=d.join();void 0===e.defaultBuffer&&(e.defaultBuffer=this._encodeValue(e["default"],
h,a).join());if(d.length!==e.defaultBuffer.length)return!1;for(h=0;h<d.length;h++)if(d[h]!==e.defaultBuffer[h])return!1;return!0};return DP}function wja(){function g(f){k.call(this,f);this.enc="pem"}if(s4)return EP;s4=!0;var c=Fh(),k=q4();c(g,k);EP=g;g.prototype.encode=function(f,l){f=k.prototype.encode.call(this,f).toString("base64");for(var p=["-----BEGIN "+l.label+"-----"],b=0;b<f.length;b+=64)p.push(f.slice(b,b+64));p.push("-----END "+l.label+"-----");return p.join("\n")};return EP}function t4(){if(u4)return FP;
u4=!0;var g=FP;g.der=q4();g.pem=wja();return FP}function v4(){function g(a){this.enc="der";this.name=a.name;this.entity=a;this.tree=new c;this.tree._init(a.body)}function c(a){d.call(this,"der",a)}function k(a,e){var n=a.readUInt8(e);if(a.isError(n))return n;var q=h.tagClass[n>>6],r=0===(n&32);if(31===(n&31)){var v=n;for(n=0;128===(v&128);){v=a.readUInt8(e);if(a.isError(v))return v;n<<=7;n|=v&127}}else n&=31;return{cls:q,primitive:r,tag:n,tagStr:h.tag[n]}}function f(a,e,n){var q=a.readUInt8(n);if(a.isError(q))return q;
if(!e&&128===q)return null;if(0===(q&128))return q;e=q&127;if(4<e)return a.error("length octect is too long");for(var r=q=0;r<e;r++){q<<=8;var v=a.readUInt8(n);if(a.isError(v))return v;q|=v}return q}if(w4)return GP;w4=!0;var l=Fh(),p=h4(),b=SA().DecoderBuffer,d=AP(),h=CP();GP=g;g.prototype.decode=function(a,e){b.isDecoderBuffer(a)||(a=new b(a,e));return this.tree._decode(a,e)};l(c,d);c.prototype._peekTag=function(a,e,n){if(a.isEmpty())return!1;var q=a.save(),r=k(a,'Failed to peek tag: "'+e+'"');if(a.isError(r))return r;
a.restore(q);return r.tag===e||r.tagStr===e||r.tagStr+"of"===e||n};c.prototype._decodeTag=function(a,e,n){var q=k(a,'Failed to decode tag of "'+e+'"');if(a.isError(q))return q;var r=f(a,q.primitive,'Failed to get length of "'+e+'"');if(a.isError(r))return r;if(!n&&q.tag!==e&&q.tagStr!==e&&q.tagStr+"of"!==e)return a.error('Failed to match tag: "'+e+'"');if(q.primitive||null!==r)return a.skip(r,'Failed to match body of: "'+e+'"');n=a.save();r=this._skipUntilEnd(a,'Failed to skip indefinite length body: "'+
this.tag+'"');if(a.isError(r))return r;r=a.offset-n.offset;a.restore(n);return a.skip(r,'Failed to match body of: "'+e+'"')};c.prototype._skipUntilEnd=function(a,e){for(;;){var n=k(a,e);if(a.isError(n))return n;var q=f(a,n.primitive,e);if(a.isError(q))return q;q=n.primitive||null!==q?a.skip(q):this._skipUntilEnd(a,e);if(a.isError(q))return q;if("end"===n.tagStr)break}};c.prototype._decodeList=function(a,e,n,q){for(e=[];!a.isEmpty();){var r=this._peekTag(a,"end");if(a.isError(r))return r;var v=n.decode(a,
"der",q);if(a.isError(v)&&r)break;e.push(v)}return e};c.prototype._decodeStr=function(a,e){if("bitstr"===e)return e=a.readUInt8(),a.isError(e)?e:{unused:e,data:a.raw()};if("bmpstr"===e){e=a.raw();if(1===e.length%2)return a.error("Decoding of string type: bmpstr length mismatch");a="";for(var n=0;n<e.length/2;n++)a+=String.fromCharCode(e.readUInt16BE(2*n));return a}return"numstr"===e?(e=a.raw().toString("ascii"),this._isNumstr(e)?e:a.error("Decoding of string type: numstr unsupported characters")):
"octstr"===e||"objDesc"===e?a.raw():"printstr"===e?(e=a.raw().toString("ascii"),this._isPrintstr(e)?e:a.error("Decoding of string type: printstr unsupported characters")):/str$/.test(e)?a.raw().toString():a.error("Decoding of string type: "+e+" unsupported")};c.prototype._decodeObjid=function(a,e,n){for(var q=[],r=0,v=0;!a.isEmpty();)v=a.readUInt8(),r<<=7,r|=v&127,0===(v&128)&&(q.push(r),r=0);v&128&&q.push(r);a=q[0]/40|0;r=q[0]%40;n=n?q:[a,r].concat(q.slice(1));e&&(q=e[n.join(" ")],void 0===q&&(q=
e[n.join(".")]),void 0!==q&&(n=q));return n};c.prototype._decodeTime=function(a,e){var n=a.raw().toString();if("gentime"===e){a=n.slice(0,4)|0;e=n.slice(4,6)|0;var q=n.slice(6,8)|0;var r=n.slice(8,10)|0;var v=n.slice(10,12)|0;n=n.slice(12,14)|0}else if("utctime"===e)a=n.slice(0,2)|0,e=n.slice(2,4)|0,q=n.slice(4,6)|0,r=n.slice(6,8)|0,v=n.slice(8,10)|0,n=n.slice(10,12)|0,a=70>a?2E3+a:1900+a;else return a.error("Decoding "+e+" time is not supported yet");return Date.UTC(a,e-1,q,r,v,n,0)};c.prototype._decodeNull=
function(){return null};c.prototype._decodeBool=function(a){var e=a.readUInt8();return a.isError(e)?e:0!==e};c.prototype._decodeInt=function(a,e){a=a.raw();a=new p(a);e&&(a=e[a.toString(10)]||a);return a};c.prototype._use=function(a,e){"function"===typeof a&&(a=a(e));return a._getDecoder("der").tree};return GP}function xja(){function g(l){f.call(this,l);this.enc="pem"}if(x4)return HP;x4=!0;var c=Fh(),k=xP().Buffer,f=v4();c(g,f);HP=g;g.prototype.decode=function(l,p){l=l.toString().split(/[\r\n]+/g);
for(var b=p.label.toUpperCase(),d=/^-----(BEGIN|END) ([^-]+)-----$/,h=-1,a=-1,e=0;e<l.length;e++){var n=l[e].match(d);if(null!==n&&n[2]===b)if(-1===h){if("BEGIN"!==n[1])break;h=e}else{if("END"!==n[1])break;a=e;break}}if(-1===h||-1===a)throw Error("PEM section not found for: "+b);l=l.slice(h+1,a).join("");l.replace(/[^a-z0-9+/=]+/gi,"");l=k.from(l,"base64");return f.prototype.decode.call(this,l,p)};return HP}function y4(){if(z4)return IP;z4=!0;var g=IP;g.der=v4();g.pem=xja();return IP}function yja(){function g(l,
p){this.name=l;this.body=p;this.decoders={};this.encoders={}}if(A4)return JP;A4=!0;var c=t4(),k=y4(),f=Fh();JP.define=function(l,p){return new g(l,p)};g.prototype._createNamed=function(l){function p(d){this._initNamed(d,b)}var b=this.name;f(p,l);p.prototype._initNamed=function(d,h){l.call(this,d,h)};return new p(this)};g.prototype._getDecoder=function(l){l=l||"der";this.decoders.hasOwnProperty(l)||(this.decoders[l]=this._createNamed(k[l]));return this.decoders[l]};g.prototype.decode=function(l,p,
b){return this._getDecoder(p).decode(l,b)};g.prototype._getEncoder=function(l){l=l||"der";this.encoders.hasOwnProperty(l)||(this.encoders[l]=this._createNamed(c[l]));return this.encoders[l]};g.prototype.encode=function(l,p,b){return this._getEncoder(p).encode(l,b)};return JP}function zja(){if(B4)return KP;B4=!0;var g=KP;g._reverse=function(c){var k={};Object.keys(c).forEach(function(f){(f|0)==f&&(f|=0);k[c[f]]=f});return k};g.der=CP();return KP}function C4(){if(D4)return LP;D4=!0;var g=LP;g.bignum=
h4();g.define=yja().define;if(!E4){E4=!0;var c=F4;c.Reporter=yP().Reporter;c.DecoderBuffer=SA().DecoderBuffer;c.EncoderBuffer=SA().EncoderBuffer;c.Node=AP()}c=F4;g.base=c;g.constants=zja();g.decoders=y4();g.encoders=t4();return LP}function Aja(){if(G4)return H4;G4=!0;var g=C4(),c=g.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),k=g.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),f=g.define("AlgorithmIdentifier",
function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),l=g.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(f),this.key("subjectPublicKey").bitstr())}),p=g.define("RelativeDistinguishedName",function(){this.setof(k)}),b=g.define("RDNSequence",function(){this.seqof(p)}),d=g.define("Name",function(){this.choice({rdnSequence:this.use(b)})}),h=g.define("Validity",function(){this.seq().obj(this.key("notBefore").use(c),
this.key("notAfter").use(c))}),a=g.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),e=g.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(f),this.key("issuer").use(d),this.key("validity").use(h),this.key("subject").use(d),this.key("subjectPublicKeyInfo").use(l),this.key("issuerUniqueID").implicit(1).bitstr().optional(),
this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(a).optional())});return H4=g.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(e),this.key("signatureAlgorithm").use(f),this.key("signatureValue").bitstr())})}function Bja(){if(I4)return bo;I4=!0;var g=C4();bo.certificate=Aja();var c=g.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),
this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});bo.RSAPrivateKey=c;c=g.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});bo.RSAPublicKey=c;c=g.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(k),this.key("subjectPublicKey").bitstr())});bo.PublicKey=c;var k=g.define("AlgorithmIdentifier",
function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())});c=g.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(k),this.key("subjectPrivateKey").octstr())});bo.PrivateKey=c;c=g.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),
this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});bo.EncryptedPrivateKey=c;c=g.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});
bo.DSAPrivateKey=c;bo.DSAparam=g.define("DSAparam",function(){this.int()});c=g.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(f),this.key("publicKey").optional().explicit(1).bitstr())});bo.ECPrivateKey=c;var f=g.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});bo.signature=g.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});return bo}
function Cja(){if(J4)return K4;J4=!0;var g=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,c=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,k=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,f=KF(),l=iO(),p=Nh().Buffer;return K4=function(b,d){b=b.toString();var h=b.match(g);if(h){var a="aes"+h[1],e=p.from(h[2],"hex");var n=p.from(h[3].replace(/[\r\n]/g,""),"base64");h=f(d,e.slice(0,8),parseInt(h[1],
10)).key;d=[];a=l.createDecipheriv(a,h,e);d.push(a.update(n));d.push(a.final());n=p.concat(d)}else n=b.match(k),n=p.from(n[2].replace(/[\r\n]/g,""),"base64");return{tag:b.match(c)[1],data:n}}}function qG(){function g(d){if("object"===typeof d&&!b.isBuffer(d)){var h=d.passphrase;d=d.key}"string"===typeof d&&(d=b.from(d));var a=f(d,h);d=a.tag;a=a.data;switch(d){case "CERTIFICATE":var e=c.certificate.decode(a,"der").tbsCertificate.subjectPublicKeyInfo;case "PUBLIC KEY":switch(e||(e=c.PublicKey.decode(a,
"der")),h=e.algorithm.algorithm.join("."),h){case "1.2.840.113549.1.1.1":return c.RSAPublicKey.decode(e.subjectPublicKey.data,"der");case "1.2.840.10045.2.1":return e.subjectPrivateKey=e.subjectPublicKey,{type:"ec",data:e};case "1.2.840.10040.4.1":return e.algorithm.params.pub_key=c.DSAparam.decode(e.subjectPublicKey.data,"der"),{type:"dsa",data:e.algorithm.params};default:throw Error("unknown key id "+h);}case "ENCRYPTED PRIVATE KEY":var n=a=c.EncryptedPrivateKey.decode(a,"der");a=h;var q=n.algorithm.decrypt.kde.kdeparams.salt,
r=parseInt(n.algorithm.decrypt.kde.kdeparams.iters.toString(),10);e=k[n.algorithm.decrypt.cipher.algo.join(".")];d=n.algorithm.decrypt.cipher.iv;h=n.subjectPrivateKey;n=parseInt(e.split("-")[1],10)/8;a=p.pbkdf2Sync(a,q,r,n,"sha1");e=l.createDecipheriv(e,a,d);d=[];d.push(e.update(h));d.push(e.final());a=b.concat(d);case "PRIVATE KEY":switch(e=c.PrivateKey.decode(a,"der"),h=e.algorithm.algorithm.join("."),h){case "1.2.840.113549.1.1.1":return c.RSAPrivateKey.decode(e.subjectPrivateKey,"der");case "1.2.840.10045.2.1":return{curve:e.algorithm.curve,
privateKey:c.ECPrivateKey.decode(e.subjectPrivateKey,"der").privateKey};case "1.2.840.10040.4.1":return e.algorithm.params.priv_key=c.DSAparam.decode(e.subjectPrivateKey,"der"),{type:"dsa",params:e.algorithm.params};default:throw Error("unknown key id "+h);}case "RSA PUBLIC KEY":return c.RSAPublicKey.decode(a,"der");case "RSA PRIVATE KEY":return c.RSAPrivateKey.decode(a,"der");case "DSA PRIVATE KEY":return{type:"dsa",params:c.DSAPrivateKey.decode(a,"der")};case "EC PRIVATE KEY":return a=c.ECPrivateKey.decode(a,
"der"),{curve:a.parameters.value,privateKey:a.privateKey};default:throw Error("unknown key type "+d);}}if(L4)return MP;L4=!0;var c=Bja(),k=Dja,f=Cja(),l=iO(),p=P0(),b=Nh().Buffer;MP=g;g.signature=c.signature;return MP}function Eja(){function g(e,n,q,r){e=f.from(e.toArray());if(e.length<n.byteLength()){var v=f.alloc(n.byteLength()-e.length);e=f.concat([v,e])}v=q.length;q=c(q,n);q=q.mod(n);q=f.from(q.toArray());q.length<n.byteLength()&&(n=f.alloc(n.byteLength()-q.length),q=f.concat([n,q]));n=q;q=f.alloc(v);
q.fill(1);v=f.alloc(v);v=l(r,v).update(q).update(f.from([0])).update(e).update(n).digest();q=l(r,v).update(q).digest();v=l(r,v).update(q).update(f.from([1])).update(e).update(n).digest();q=l(r,v).update(q).digest();return{k:v,v:q}}function c(e,n){var q=new d(e);e=(e.length<<3)-n.bitLength();0<e&&q.ishrn(e);return q}function k(e,n,q){var r;do{for(r=f.alloc(0);8*r.length<e.bitLength();)n.v=l(q,n.k).update(n.v).digest(),r=f.concat([r,n.v]);r=c(r,e);n.k=l(q,n.k).update(n.v).update(f.from([0])).digest();
n.v=l(q,n.k).update(n.v).digest()}while(-1!==r.cmp(e));return r}if(M4)return TA;M4=!0;var f=Nh().Buffer,l=y0(),p=$O(),b=uP().ec,d=YO(),h=qG(),a=N4;TA=function(e,n,q,r,v){n=h(n);if(n.curve){if("ecdsa"!==r&&"ecdsa/rsa"!==r)throw Error("wrong private key type");q=e;e=a[n.curve.join(".")];if(!e)throw Error("unknown curve "+n.curve.join("."));q=(new b(e)).keyFromPrivate(n.privateKey).sign(q);return f.from(q.toDER())}if("dsa"===n.type){if("dsa"!==r)throw Error("wrong private key type");var y=e;e=n.params.priv_key;
r=n.params.p;v=n.params.q;n=n.params.g;var D=new d(0),E=c(y,v).mod(v);var I=!1;for(y=g(e,v,y,q);!1===I;){D=I=k(v,y,q);var K=v;D=n.toRed(d.mont(r)).redPow(D).fromRed().mod(K);I=I.invm(v).imul(E.add(e.mul(D))).mod(v);0===I.cmpn(0)&&(I=!1,D=new d(0))}q=I;n=D.toArray();q=q.toArray();n[0]&128&&(n=[0].concat(n));q[0]&128&&(q=[0].concat(q));e=[48,n.length+q.length+4,2,n.length];e=e.concat(n,[2,q.length],q);return f.from(e)}if("rsa"!==r&&"ecdsa/rsa"!==r)throw Error("wrong private key type");e=f.concat([v,
e]);r=n.modulus.byteLength();for(q=[0,1];e.length+q.length+1<r;)q.push(255);q.push(0);for(r=-1;++r<e.length;)q.push(e[r]);return p(q,n)};TA.getKey=g;TA.makeKey=k;return TA}function Fja(){function g(b,d){if(0>=b.cmpn(0))throw Error("invalid sig");if(b.cmp(d)>=d)throw Error("invalid sig");}if(O4)return P4;O4=!0;var c=Nh().Buffer,k=YO(),f=uP().ec,l=qG(),p=N4;return P4=function(b,d,h,a,e){h=l(h);if("ec"===h.type){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");a=p[h.data.algorithm.curve.join(".")];
if(!a)throw Error("unknown curve "+h.data.algorithm.curve.join("."));return(new f(a)).verify(d,b,h.data.subjectPrivateKey.data)}if("dsa"===h.type){if("dsa"!==a)throw Error("wrong public key type");a=h.data.p;e=h.data.q;var n=h.data.g;h=h.data.pub_key;var q=l.signature.decode(b,"der");b=q.s;q=q.r;g(b,e);g(q,e);var r=k.mont(a);b=b.invm(e);return 0===n.toRed(r).redPow((new k(d)).mul(b).mod(e)).fromRed().mul(h.toRed(r).redPow(q.mul(b).mod(e)).fromRed()).mod(a).mod(e).cmp(q)}if("rsa"!==a&&"ecdsa/rsa"!==
a)throw Error("wrong public key type");d=c.concat([e,d]);e=h.modulus.byteLength();a=[1];for(n=0;d.length+a.length+2<e;)a.push(255),n++;a.push(0);for(q=-1;++q<d.length;)a.push(d[q]);a=c.from(a);d=k.mont(h.modulus);b=(new k(b)).toRed(d);b=b.redPow(new k(h.publicExponent));b=c.from(b.fromRed().toArray());h=8>n?1:0;e=Math.min(b.length,a.length);b.length!==a.length&&(h=1);for(q=-1;++q<e;)h|=b[q]^a[q];return 0===h}}function Gja(){function g(n){b.Writable.call(this||Zj);n=e[n];if(!n)throw Error("Unknown message digest");
(this||Zj)._hashType=n.hash;(this||Zj)._hash=p(n.hash);(this||Zj)._tag=n.id;(this||Zj)._signType=n.sign}function c(n){b.Writable.call(this||Zj);n=e[n];if(!n)throw Error("Unknown message digest");(this||Zj)._hash=p(n.hash);(this||Zj)._tag=n.id;(this||Zj)._signType=n.sign}function k(n){return new g(n)}function f(n){return new c(n)}if(Q4)return R4;Q4=!0;var l=Nh().Buffer,p=AA(),b=m_(),d=Fh(),h=Eja(),a=Fja(),e=S4;Object.keys(e).forEach(function(n){e[n].id=l.from(e[n].id,"hex");e[n.toLowerCase()]=e[n]});
d(g,b.Writable);g.prototype._write=function(n,q,r){(this||Zj)._hash.update(n);r()};g.prototype.update=function(n,q){"string"===typeof n&&(n=l.from(n,q));(this||Zj)._hash.update(n);return this||Zj};g.prototype.sign=function(n,q){this.end();var r=(this||Zj)._hash.digest();n=h(r,n,(this||Zj)._hashType,(this||Zj)._signType,(this||Zj)._tag);return q?n.toString(q):n};d(c,b.Writable);c.prototype._write=function(n,q,r){(this||Zj)._hash.update(n);r()};c.prototype.update=function(n,q){"string"===typeof n&&
(n=l.from(n,q));(this||Zj)._hash.update(n);return this||Zj};c.prototype.verify=function(n,q,r){"string"===typeof q&&(q=l.from(q,r));this.end();r=(this||Zj)._hash.digest();return a(q,r,n,(this||Zj)._signType,(this||Zj)._tag)};return R4={Sign:k,Verify:f,createSign:k,createVerify:f}}function Hja(){if(T4)return NP.exports;T4=!0;(function(g,c){function k(m,t){if(!m)throw Error(t||"Assertion failed");}function f(m,t){m.super_=t;var u=function(){};u.prototype=t.prototype;m.prototype=new u;m.prototype.constructor=
m}function l(m,t,u){if(l.isBN(m))return m;(this||mb).negative=0;(this||mb).words=null;(this||mb).length=0;(this||mb).red=null;if(null!==m){if("le"===t||"be"===t)u=t,t=10;this._init(m||0,t||10,u||"be")}}function p(m,t){m=m.charCodeAt(t);return 65<=m&&70>=m?m-55:97<=m&&102>=m?m-87:m-48&15}function b(m,t,u){var B=p(m,u);u-1>=t&&(B|=p(m,u-1)<<4);return B}function d(m,t,u,B){var A=0;for(u=Math.min(m.length,u);t<u;t++){var H=m.charCodeAt(t)-48;A*=B;A=49<=H?A+(H-49+10):17<=H?A+(H-17+10):A+H}return A}function h(m,
t,u){u.negative=t.negative^m.negative;var B=m.length+t.length|0;u.length=B;B=B-1|0;var A=m.words[0]|0,H=t.words[0]|0;A*=H;var F=A/67108864|0;u.words[0]=A&67108863;for(var L=1;L<B;L++){var U=F>>>26,T=F&67108863;F=Math.min(L,t.length-1);for(var Y=Math.max(0,L-m.length+1);Y<=F;Y++)A=m.words[L-Y|0]|0,H=t.words[Y]|0,A=A*H+T,U+=A/67108864|0,T=A&67108863;u.words[L]=T|0;F=U|0}0!==F?u.words[L]=F|0:u.length--;return u.strip()}function a(m,t){(this||mb).x=m;(this||mb).y=t}function e(m,t){(this||mb).name=m;(this||
mb).p=new l(t,16);(this||mb).n=(this||mb).p.bitLength();(this||mb).k=(new l(1)).iushln((this||mb).n).isub((this||mb).p);(this||mb).tmp=this._tmp()}function n(){e.call(this||mb,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function q(){e.call(this||mb,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function r(){e.call(this||mb,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){e.call(this||mb,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}
function y(m){"string"===typeof m?(m=l._prime(m),(this||mb).m=m.p,(this||mb).prime=m):(k(m.gtn(1),"modulus must be greater than 1"),(this||mb).m=m,(this||mb).prime=null)}function D(m){y.call(this||mb,m);(this||mb).shift=(this||mb).m.bitLength();0!==(this||mb).shift%26&&((this||mb).shift+=26-(this||mb).shift%26);(this||mb).r=(new l(1)).iushln((this||mb).shift);(this||mb).r2=this.imod((this||mb).r.sqr());(this||mb).rinv=(this||mb).r._invmp((this||mb).m);(this||mb).minv=(this||mb).rinv.mul((this||mb).r).isubn(1).div((this||
mb).m);(this||mb).minv=(this||mb).minv.umod((this||mb).r);(this||mb).minv=(this||mb).r.sub((this||mb).minv)}"object"===typeof g?g.exports=l:c.BN=l;l.BN=l;l.wordSize=26;try{var E="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:Yg.Buffer}catch(m){}l.isBN=function(m){return m instanceof l?!0:null!==m&&"object"===typeof m&&m.constructor.wordSize===l.wordSize&&Array.isArray(m.words)};l.max=function(m,t){return 0<m.cmp(t)?m:t};l.min=function(m,t){return 0>m.cmp(t)?m:t};l.prototype._init=
function(m,t,u){if("number"===typeof m)return this._initNumber(m,t,u);if("object"===typeof m)return this._initArray(m,t,u);"hex"===t&&(t=16);k(t===(t|0)&&2<=t&&36>=t);m=m.toString().replace(/\s+/g,"");var B=0;"-"===m[0]&&(B++,(this||mb).negative=1);B<m.length&&(16===t?this._parseHex(m,B,u):(this._parseBase(m,t,B),"le"===u&&this._initArray(this.toArray(),t,u)))};l.prototype._initNumber=function(m,t,u){0>m&&((this||mb).negative=1,m=-m);67108864>m?((this||mb).words=[m&67108863],(this||mb).length=1):
4503599627370496>m?((this||mb).words=[m&67108863,m/67108864&67108863],(this||mb).length=2):(k(9007199254740992>m),(this||mb).words=[m&67108863,m/67108864&67108863,1],(this||mb).length=3);"le"===u&&this._initArray(this.toArray(),t,u)};l.prototype._initArray=function(m,t,u){k("number"===typeof m.length);if(0>=m.length)return(this||mb).words=[0],(this||mb).length=1,this||mb;(this||mb).length=Math.ceil(m.length/3);(this||mb).words=Array((this||mb).length);for(t=0;t<(this||mb).length;t++)(this||mb).words[t]=
0;var B=0;if("be"===u)for(t=m.length-1,u=0;0<=t;t-=3){var A=m[t]|m[t-1]<<8|m[t-2]<<16;(this||mb).words[u]|=A<<B&67108863;(this||mb).words[u+1]=A>>>26-B&67108863;B+=24;26<=B&&(B-=26,u++)}else if("le"===u)for(u=t=0;t<m.length;t+=3)A=m[t]|m[t+1]<<8|m[t+2]<<16,(this||mb).words[u]|=A<<B&67108863,(this||mb).words[u+1]=A>>>26-B&67108863,B+=24,26<=B&&(B-=26,u++);return this.strip()};l.prototype._parseHex=function(m,t,u){(this||mb).length=Math.ceil((m.length-t)/6);(this||mb).words=Array((this||mb).length);
for(var B=0;B<(this||mb).length;B++)(this||mb).words[B]=0;var A=0,H=0;if("be"===u)for(B=m.length-1;B>=t;B-=2)u=b(m,t,B)<<A,(this||mb).words[H]|=u&67108863,18<=A?(A-=18,H+=1,(this||mb).words[H]|=u>>>26):A+=8;else for(B=0===(m.length-t)%2?t+1:t;B<m.length;B+=2)u=b(m,t,B)<<A,(this||mb).words[H]|=u&67108863,18<=A?(A-=18,H+=1,(this||mb).words[H]|=u>>>26):A+=8;this.strip()};l.prototype._parseBase=function(m,t,u){(this||mb).words=[0];(this||mb).length=1;for(var B=0,A=1;67108863>=A;A*=t)B++;B--;A=A/t|0;var H=
m.length-u,F=H%B;H=Math.min(H,H-F)+u;for(var L=u;L<H;L+=B)u=d(m,L,L+B,t),this.imuln(A),67108864>(this||mb).words[0]+u?(this||mb).words[0]+=u:this._iaddn(u);if(0!==F){B=1;u=d(m,L,m.length,t);for(L=0;L<F;L++)B*=t;this.imuln(B);67108864>(this||mb).words[0]+u?(this||mb).words[0]+=u:this._iaddn(u)}this.strip()};l.prototype.copy=function(m){m.words=Array((this||mb).length);for(var t=0;t<(this||mb).length;t++)m.words[t]=(this||mb).words[t];m.length=(this||mb).length;m.negative=(this||mb).negative;m.red=
(this||mb).red};l.prototype.clone=function(){var m=new l(null);this.copy(m);return m};l.prototype._expand=function(m){for(;(this||mb).length<m;)(this||mb).words[(this||mb).length++]=0;return this||mb};l.prototype.strip=function(){for(;1<(this||mb).length&&0===(this||mb).words[(this||mb).length-1];)(this||mb).length--;return this._normSign()};l.prototype._normSign=function(){1===(this||mb).length&&0===(this||mb).words[0]&&((this||mb).negative=0);return this||mb};l.prototype.inspect=function(){return((this||
mb).red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var I=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),K=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],
P=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];l.prototype.toString=function(m,t){m=m||10;t=t|0||1;if(16===m||"hex"===m){var u="";for(var B=m=0,A=0;A<(this||mb).length;A++){var H=(this||mb).words[A],F=((H<<m|B)&16777215).toString(16);B=H>>>24-
m&16777215;u=0!==B||A!==(this||mb).length-1?I[6-F.length]+F+u:F+u;m+=2;26<=m&&(m-=26,A--)}for(0!==B&&(u=B.toString(16)+u);0!==u.length%t;)u="0"+u;0!==(this||mb).negative&&(u="-"+u);return u}if(m===(m|0)&&2<=m&&36>=m){B=K[m];A=P[m];u="";H=this.clone();for(H.negative=0;!H.isZero();)F=H.modn(A).toString(m),H=H.idivn(A),u=H.isZero()?F+u:I[B-F.length]+F+u;for(this.isZero()&&(u="0"+u);0!==u.length%t;)u="0"+u;0!==(this||mb).negative&&(u="-"+u);return u}k(!1,"Base should be between 2 and 36")};l.prototype.toNumber=
function(){var m=(this||mb).words[0];2===(this||mb).length?m+=67108864*(this||mb).words[1]:3===(this||mb).length&&1===(this||mb).words[2]?m+=4503599627370496+67108864*(this||mb).words[1]:2<(this||mb).length&&k(!1,"Number can only safely store up to 53 bits");return 0!==(this||mb).negative?-m:m};l.prototype.toJSON=function(){return this.toString(16)};l.prototype.toBuffer=function(m,t){k("undefined"!==typeof E);return this.toArrayLike(E,m,t)};l.prototype.toArray=function(m,t){return this.toArrayLike(Array,
m,t)};l.prototype.toArrayLike=function(m,t,u){var B=this.byteLength();u=u||Math.max(1,B);k(B<=u,"byte array longer than desired length");k(0<u,"Requested array length <= 0");this.strip();var A="le"===t;m=new m(u);t=this.clone();if(A){for(A=0;!t.isZero();A++)B=t.andln(255),t.iushrn(8),m[A]=B;for(;A<u;A++)m[A]=0}else{for(A=0;A<u-B;A++)m[A]=0;for(A=0;!t.isZero();A++)B=t.andln(255),t.iushrn(8),m[u-A-1]=B}return m};l.prototype._countBits=Math.clz32?function(m){return 32-Math.clz32(m)}:function(m){var t=
0;4096<=m&&(t+=13,m>>>=13);64<=m&&(t+=7,m>>>=7);8<=m&&(t+=4,m>>>=4);2<=m&&(t+=2,m>>>=2);return t+m};l.prototype._zeroBits=function(m){if(0===m)return 26;var t=0;0===(m&8191)&&(t+=13,m>>>=13);0===(m&127)&&(t+=7,m>>>=7);0===(m&15)&&(t+=4,m>>>=4);0===(m&3)&&(t+=2,m>>>=2);0===(m&1)&&t++;return t};l.prototype.bitLength=function(){var m=this._countBits((this||mb).words[(this||mb).length-1]);return 26*((this||mb).length-1)+m};l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var m=0,t=0;t<(this||
mb).length;t++){var u=this._zeroBits((this||mb).words[t]);m+=u;if(26!==u)break}return m};l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};l.prototype.toTwos=function(m){return 0!==(this||mb).negative?this.abs().inotn(m).iaddn(1):this.clone()};l.prototype.fromTwos=function(m){return this.testn(m-1)?this.notn(m).iaddn(1).ineg():this.clone()};l.prototype.isNeg=function(){return 0!==(this||mb).negative};l.prototype.neg=function(){return this.clone().ineg()};l.prototype.ineg=function(){this.isZero()||
((this||mb).negative^=1);return this||mb};l.prototype.iuor=function(m){for(;(this||mb).length<m.length;)(this||mb).words[(this||mb).length++]=0;for(var t=0;t<m.length;t++)(this||mb).words[t]|=m.words[t];return this.strip()};l.prototype.ior=function(m){k(0===((this||mb).negative|m.negative));return this.iuor(m)};l.prototype.or=function(m){return(this||mb).length>m.length?this.clone().ior(m):m.clone().ior(this||mb)};l.prototype.uor=function(m){return(this||mb).length>m.length?this.clone().iuor(m):m.clone().iuor(this||
mb)};l.prototype.iuand=function(m){var t=(this||mb).length>m.length?m:this||mb;for(var u=0;u<t.length;u++)(this||mb).words[u]&=m.words[u];(this||mb).length=t.length;return this.strip()};l.prototype.iand=function(m){k(0===((this||mb).negative|m.negative));return this.iuand(m)};l.prototype.and=function(m){return(this||mb).length>m.length?this.clone().iand(m):m.clone().iand(this||mb)};l.prototype.uand=function(m){return(this||mb).length>m.length?this.clone().iuand(m):m.clone().iuand(this||mb)};l.prototype.iuxor=
function(m){if((this||mb).length>m.length)var t=this||mb;else t=m,m=this||mb;for(var u=0;u<m.length;u++)(this||mb).words[u]=t.words[u]^m.words[u];if((this||mb)!==t)for(;u<t.length;u++)(this||mb).words[u]=t.words[u];(this||mb).length=t.length;return this.strip()};l.prototype.ixor=function(m){k(0===((this||mb).negative|m.negative));return this.iuxor(m)};l.prototype.xor=function(m){return(this||mb).length>m.length?this.clone().ixor(m):m.clone().ixor(this||mb)};l.prototype.uxor=function(m){return(this||
mb).length>m.length?this.clone().iuxor(m):m.clone().iuxor(this||mb)};l.prototype.inotn=function(m){k("number"===typeof m&&0<=m);var t=Math.ceil(m/26)|0;m%=26;this._expand(t);0<m&&t--;for(var u=0;u<t;u++)(this||mb).words[u]=~(this||mb).words[u]&67108863;0<m&&((this||mb).words[u]=~(this||mb).words[u]&67108863>>26-m);return this.strip()};l.prototype.notn=function(m){return this.clone().inotn(m)};l.prototype.setn=function(m,t){k("number"===typeof m&&0<=m);var u=m/26|0;m%=26;this._expand(u+1);(this||mb).words[u]=
t?(this||mb).words[u]|1<<m:(this||mb).words[u]&~(1<<m);return this.strip()};l.prototype.iadd=function(m){if(0!==(this||mb).negative&&0===m.negative)return(this||mb).negative=0,this.isub(m),(this||mb).negative^=1,this._normSign();if(0===(this||mb).negative&&0!==m.negative){m.negative=0;var t=this.isub(m);m.negative=1;return t._normSign()}if((this||mb).length>m.length)var u=this||mb;else u=m,m=this||mb;for(var B=t=0;B<m.length;B++)t=(u.words[B]|0)+(m.words[B]|0)+t,(this||mb).words[B]=t&67108863,t>>>=
26;for(;0!==t&&B<u.length;B++)t=(u.words[B]|0)+t,(this||mb).words[B]=t&67108863,t>>>=26;(this||mb).length=u.length;if(0!==t)(this||mb).words[(this||mb).length]=t,(this||mb).length++;else if(u!==(this||mb))for(;B<u.length;B++)(this||mb).words[B]=u.words[B];return this||mb};l.prototype.add=function(m){if(0!==m.negative&&0===(this||mb).negative){m.negative=0;var t=this.sub(m);m.negative^=1;return t}return 0===m.negative&&0!==(this||mb).negative?((this||mb).negative=0,t=m.sub(this||mb),(this||mb).negative=
1,t):(this||mb).length>m.length?this.clone().iadd(m):m.clone().iadd(this||mb)};l.prototype.isub=function(m){if(0!==m.negative){m.negative=0;var t=this.iadd(m);m.negative=1;return t._normSign()}if(0!==(this||mb).negative)return(this||mb).negative=0,this.iadd(m),(this||mb).negative=1,this._normSign();t=this.cmp(m);if(0===t)return(this||mb).negative=0,(this||mb).length=1,(this||mb).words[0]=0,this||mb;if(0<t)var u=this||mb;else u=m,m=this||mb;for(var B=0,A=0;A<m.length;A++)t=(u.words[A]|0)-(m.words[A]|
0)+B,B=t>>26,(this||mb).words[A]=t&67108863;for(;0!==B&&A<u.length;A++)t=(u.words[A]|0)+B,B=t>>26,(this||mb).words[A]=t&67108863;if(0===B&&A<u.length&&u!==(this||mb))for(;A<u.length;A++)(this||mb).words[A]=u.words[A];(this||mb).length=Math.max((this||mb).length,A);u!==(this||mb)&&((this||mb).negative=1);return this.strip()};l.prototype.sub=function(m){return this.clone().isub(m)};var N=function(m,t,u){var B=m.words,A=t.words,H=u.words,F=0,L=B[0]|0,U=L&8191,T=L>>>13,Y=B[1]|0;L=Y&8191;var wa=Y>>>13,
Ga=B[2]|0;Y=Ga&8191;var na=Ga>>>13,ea=B[3]|0;Ga=ea&8191;var da=ea>>>13,ia=B[4]|0;ea=ia&8191;var Oa=ia>>>13,Va=B[5]|0;ia=Va&8191;var eb=Va>>>13,Sa=B[6]|0;Va=Sa&8191;var Bb=Sa>>>13,Z=B[7]|0;Sa=Z&8191;var sa=Z>>>13,Da=B[8]|0;Z=Da&8191;Da>>>=13;var X=B[9]|0;B=X&8191;X>>>=13;var ma=A[0]|0,ta=ma&8191,Pa=ma>>>13,Za=A[1]|0;ma=Za&8191;var Zb=Za>>>13,Pb=A[2]|0;Za=Pb&8191;var Db=Pb>>>13,sc=A[3]|0;Pb=sc&8191;var wc=sc>>>13,Lc=A[4]|0;sc=Lc&8191;var Xc=Lc>>>13,Qc=A[5]|0;Lc=Qc&8191;var hd=Qc>>>13,Wc=A[6]|0;Qc=Wc&
8191;var ld=Wc>>>13,Yc=A[7]|0;Wc=Yc&8191;var od=Yc>>>13,Vc=A[8]|0;Yc=Vc&8191;Vc>>>=13;var cd=A[9]|0;A=cd&8191;cd>>>=13;u.negative=m.negative^t.negative;u.length=19;var W=Math.imul(U,ta);m=Math.imul(U,Pa);m=m+Math.imul(T,ta)|0;t=Math.imul(T,Pa);var af=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(af>>>26)|0;af&=67108863;W=Math.imul(L,ta);m=Math.imul(L,Pa);m=m+Math.imul(wa,ta)|0;t=Math.imul(wa,Pa);W=W+Math.imul(U,ma)|0;m=m+Math.imul(U,Zb)|0;m=m+Math.imul(T,ma)|0;t=t+Math.imul(T,Zb)|0;var zc=(F+W|0)+((m&
8191)<<13)|0;F=(t+(m>>>13)|0)+(zc>>>26)|0;zc&=67108863;W=Math.imul(Y,ta);m=Math.imul(Y,Pa);m=m+Math.imul(na,ta)|0;t=Math.imul(na,Pa);W=W+Math.imul(L,ma)|0;m=m+Math.imul(L,Zb)|0;m=m+Math.imul(wa,ma)|0;t=t+Math.imul(wa,Zb)|0;W=W+Math.imul(U,Za)|0;m=m+Math.imul(U,Db)|0;m=m+Math.imul(T,Za)|0;t=t+Math.imul(T,Db)|0;var pi=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(pi>>>26)|0;pi&=67108863;W=Math.imul(Ga,ta);m=Math.imul(Ga,Pa);m=m+Math.imul(da,ta)|0;t=Math.imul(da,Pa);W=W+Math.imul(Y,ma)|0;m=m+Math.imul(Y,
Zb)|0;m=m+Math.imul(na,ma)|0;t=t+Math.imul(na,Zb)|0;W=W+Math.imul(L,Za)|0;m=m+Math.imul(L,Db)|0;m=m+Math.imul(wa,Za)|0;t=t+Math.imul(wa,Db)|0;W=W+Math.imul(U,Pb)|0;m=m+Math.imul(U,wc)|0;m=m+Math.imul(T,Pb)|0;t=t+Math.imul(T,wc)|0;var ad=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ad>>>26)|0;ad&=67108863;W=Math.imul(ea,ta);m=Math.imul(ea,Pa);m=m+Math.imul(Oa,ta)|0;t=Math.imul(Oa,Pa);W=W+Math.imul(Ga,ma)|0;m=m+Math.imul(Ga,Zb)|0;m=m+Math.imul(da,ma)|0;t=t+Math.imul(da,Zb)|0;W=W+Math.imul(Y,Za)|0;m=m+
Math.imul(Y,Db)|0;m=m+Math.imul(na,Za)|0;t=t+Math.imul(na,Db)|0;W=W+Math.imul(L,Pb)|0;m=m+Math.imul(L,wc)|0;m=m+Math.imul(wa,Pb)|0;t=t+Math.imul(wa,wc)|0;W=W+Math.imul(U,sc)|0;m=m+Math.imul(U,Xc)|0;m=m+Math.imul(T,sc)|0;t=t+Math.imul(T,Xc)|0;var bd=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(bd>>>26)|0;bd&=67108863;W=Math.imul(ia,ta);m=Math.imul(ia,Pa);m=m+Math.imul(eb,ta)|0;t=Math.imul(eb,Pa);W=W+Math.imul(ea,ma)|0;m=m+Math.imul(ea,Zb)|0;m=m+Math.imul(Oa,ma)|0;t=t+Math.imul(Oa,Zb)|0;W=W+Math.imul(Ga,
Za)|0;m=m+Math.imul(Ga,Db)|0;m=m+Math.imul(da,Za)|0;t=t+Math.imul(da,Db)|0;W=W+Math.imul(Y,Pb)|0;m=m+Math.imul(Y,wc)|0;m=m+Math.imul(na,Pb)|0;t=t+Math.imul(na,wc)|0;W=W+Math.imul(L,sc)|0;m=m+Math.imul(L,Xc)|0;m=m+Math.imul(wa,sc)|0;t=t+Math.imul(wa,Xc)|0;W=W+Math.imul(U,Lc)|0;m=m+Math.imul(U,hd)|0;m=m+Math.imul(T,Lc)|0;t=t+Math.imul(T,hd)|0;var qi=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(qi>>>26)|0;qi&=67108863;W=Math.imul(Va,ta);m=Math.imul(Va,Pa);m=m+Math.imul(Bb,ta)|0;t=Math.imul(Bb,Pa);W=W+
Math.imul(ia,ma)|0;m=m+Math.imul(ia,Zb)|0;m=m+Math.imul(eb,ma)|0;t=t+Math.imul(eb,Zb)|0;W=W+Math.imul(ea,Za)|0;m=m+Math.imul(ea,Db)|0;m=m+Math.imul(Oa,Za)|0;t=t+Math.imul(Oa,Db)|0;W=W+Math.imul(Ga,Pb)|0;m=m+Math.imul(Ga,wc)|0;m=m+Math.imul(da,Pb)|0;t=t+Math.imul(da,wc)|0;W=W+Math.imul(Y,sc)|0;m=m+Math.imul(Y,Xc)|0;m=m+Math.imul(na,sc)|0;t=t+Math.imul(na,Xc)|0;W=W+Math.imul(L,Lc)|0;m=m+Math.imul(L,hd)|0;m=m+Math.imul(wa,Lc)|0;t=t+Math.imul(wa,hd)|0;W=W+Math.imul(U,Qc)|0;m=m+Math.imul(U,ld)|0;m=m+Math.imul(T,
Qc)|0;t=t+Math.imul(T,ld)|0;var ei=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ei>>>26)|0;ei&=67108863;W=Math.imul(Sa,ta);m=Math.imul(Sa,Pa);m=m+Math.imul(sa,ta)|0;t=Math.imul(sa,Pa);W=W+Math.imul(Va,ma)|0;m=m+Math.imul(Va,Zb)|0;m=m+Math.imul(Bb,ma)|0;t=t+Math.imul(Bb,Zb)|0;W=W+Math.imul(ia,Za)|0;m=m+Math.imul(ia,Db)|0;m=m+Math.imul(eb,Za)|0;t=t+Math.imul(eb,Db)|0;W=W+Math.imul(ea,Pb)|0;m=m+Math.imul(ea,wc)|0;m=m+Math.imul(Oa,Pb)|0;t=t+Math.imul(Oa,wc)|0;W=W+Math.imul(Ga,sc)|0;m=m+Math.imul(Ga,Xc)|
0;m=m+Math.imul(da,sc)|0;t=t+Math.imul(da,Xc)|0;W=W+Math.imul(Y,Lc)|0;m=m+Math.imul(Y,hd)|0;m=m+Math.imul(na,Lc)|0;t=t+Math.imul(na,hd)|0;W=W+Math.imul(L,Qc)|0;m=m+Math.imul(L,ld)|0;m=m+Math.imul(wa,Qc)|0;t=t+Math.imul(wa,ld)|0;W=W+Math.imul(U,Wc)|0;m=m+Math.imul(U,od)|0;m=m+Math.imul(T,Wc)|0;t=t+Math.imul(T,od)|0;var Zh=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Zh>>>26)|0;Zh&=67108863;W=Math.imul(Z,ta);m=Math.imul(Z,Pa);m=m+Math.imul(Da,ta)|0;t=Math.imul(Da,Pa);W=W+Math.imul(Sa,ma)|0;m=m+Math.imul(Sa,
Zb)|0;m=m+Math.imul(sa,ma)|0;t=t+Math.imul(sa,Zb)|0;W=W+Math.imul(Va,Za)|0;m=m+Math.imul(Va,Db)|0;m=m+Math.imul(Bb,Za)|0;t=t+Math.imul(Bb,Db)|0;W=W+Math.imul(ia,Pb)|0;m=m+Math.imul(ia,wc)|0;m=m+Math.imul(eb,Pb)|0;t=t+Math.imul(eb,wc)|0;W=W+Math.imul(ea,sc)|0;m=m+Math.imul(ea,Xc)|0;m=m+Math.imul(Oa,sc)|0;t=t+Math.imul(Oa,Xc)|0;W=W+Math.imul(Ga,Lc)|0;m=m+Math.imul(Ga,hd)|0;m=m+Math.imul(da,Lc)|0;t=t+Math.imul(da,hd)|0;W=W+Math.imul(Y,Qc)|0;m=m+Math.imul(Y,ld)|0;m=m+Math.imul(na,Qc)|0;t=t+Math.imul(na,
ld)|0;W=W+Math.imul(L,Wc)|0;m=m+Math.imul(L,od)|0;m=m+Math.imul(wa,Wc)|0;t=t+Math.imul(wa,od)|0;W=W+Math.imul(U,Yc)|0;m=m+Math.imul(U,Vc)|0;m=m+Math.imul(T,Yc)|0;t=t+Math.imul(T,Vc)|0;var xi=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(xi>>>26)|0;xi&=67108863;W=Math.imul(B,ta);m=Math.imul(B,Pa);m=m+Math.imul(X,ta)|0;t=Math.imul(X,Pa);W=W+Math.imul(Z,ma)|0;m=m+Math.imul(Z,Zb)|0;m=m+Math.imul(Da,ma)|0;t=t+Math.imul(Da,Zb)|0;W=W+Math.imul(Sa,Za)|0;m=m+Math.imul(Sa,Db)|0;m=m+Math.imul(sa,Za)|0;t=t+Math.imul(sa,
Db)|0;W=W+Math.imul(Va,Pb)|0;m=m+Math.imul(Va,wc)|0;m=m+Math.imul(Bb,Pb)|0;t=t+Math.imul(Bb,wc)|0;W=W+Math.imul(ia,sc)|0;m=m+Math.imul(ia,Xc)|0;m=m+Math.imul(eb,sc)|0;t=t+Math.imul(eb,Xc)|0;W=W+Math.imul(ea,Lc)|0;m=m+Math.imul(ea,hd)|0;m=m+Math.imul(Oa,Lc)|0;t=t+Math.imul(Oa,hd)|0;W=W+Math.imul(Ga,Qc)|0;m=m+Math.imul(Ga,ld)|0;m=m+Math.imul(da,Qc)|0;t=t+Math.imul(da,ld)|0;W=W+Math.imul(Y,Wc)|0;m=m+Math.imul(Y,od)|0;m=m+Math.imul(na,Wc)|0;t=t+Math.imul(na,od)|0;W=W+Math.imul(L,Yc)|0;m=m+Math.imul(L,
Vc)|0;m=m+Math.imul(wa,Yc)|0;t=t+Math.imul(wa,Vc)|0;W=W+Math.imul(U,A)|0;m=m+Math.imul(U,cd)|0;m=m+Math.imul(T,A)|0;t=t+Math.imul(T,cd)|0;U=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(U>>>26)|0;U&=67108863;W=Math.imul(B,ma);m=Math.imul(B,Zb);m=m+Math.imul(X,ma)|0;t=Math.imul(X,Zb);W=W+Math.imul(Z,Za)|0;m=m+Math.imul(Z,Db)|0;m=m+Math.imul(Da,Za)|0;t=t+Math.imul(Da,Db)|0;W=W+Math.imul(Sa,Pb)|0;m=m+Math.imul(Sa,wc)|0;m=m+Math.imul(sa,Pb)|0;t=t+Math.imul(sa,wc)|0;W=W+Math.imul(Va,sc)|0;m=m+Math.imul(Va,
Xc)|0;m=m+Math.imul(Bb,sc)|0;t=t+Math.imul(Bb,Xc)|0;W=W+Math.imul(ia,Lc)|0;m=m+Math.imul(ia,hd)|0;m=m+Math.imul(eb,Lc)|0;t=t+Math.imul(eb,hd)|0;W=W+Math.imul(ea,Qc)|0;m=m+Math.imul(ea,ld)|0;m=m+Math.imul(Oa,Qc)|0;t=t+Math.imul(Oa,ld)|0;W=W+Math.imul(Ga,Wc)|0;m=m+Math.imul(Ga,od)|0;m=m+Math.imul(da,Wc)|0;t=t+Math.imul(da,od)|0;W=W+Math.imul(Y,Yc)|0;m=m+Math.imul(Y,Vc)|0;m=m+Math.imul(na,Yc)|0;t=t+Math.imul(na,Vc)|0;W=W+Math.imul(L,A)|0;m=m+Math.imul(L,cd)|0;m=m+Math.imul(wa,A)|0;t=t+Math.imul(wa,cd)|
0;L=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(L>>>26)|0;L&=67108863;W=Math.imul(B,Za);m=Math.imul(B,Db);m=m+Math.imul(X,Za)|0;t=Math.imul(X,Db);W=W+Math.imul(Z,Pb)|0;m=m+Math.imul(Z,wc)|0;m=m+Math.imul(Da,Pb)|0;t=t+Math.imul(Da,wc)|0;W=W+Math.imul(Sa,sc)|0;m=m+Math.imul(Sa,Xc)|0;m=m+Math.imul(sa,sc)|0;t=t+Math.imul(sa,Xc)|0;W=W+Math.imul(Va,Lc)|0;m=m+Math.imul(Va,hd)|0;m=m+Math.imul(Bb,Lc)|0;t=t+Math.imul(Bb,hd)|0;W=W+Math.imul(ia,Qc)|0;m=m+Math.imul(ia,ld)|0;m=m+Math.imul(eb,Qc)|0;t=t+Math.imul(eb,
ld)|0;W=W+Math.imul(ea,Wc)|0;m=m+Math.imul(ea,od)|0;m=m+Math.imul(Oa,Wc)|0;t=t+Math.imul(Oa,od)|0;W=W+Math.imul(Ga,Yc)|0;m=m+Math.imul(Ga,Vc)|0;m=m+Math.imul(da,Yc)|0;t=t+Math.imul(da,Vc)|0;W=W+Math.imul(Y,A)|0;m=m+Math.imul(Y,cd)|0;m=m+Math.imul(na,A)|0;t=t+Math.imul(na,cd)|0;Y=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Y>>>26)|0;Y&=67108863;W=Math.imul(B,Pb);m=Math.imul(B,wc);m=m+Math.imul(X,Pb)|0;t=Math.imul(X,wc);W=W+Math.imul(Z,sc)|0;m=m+Math.imul(Z,Xc)|0;m=m+Math.imul(Da,sc)|0;t=t+Math.imul(Da,
Xc)|0;W=W+Math.imul(Sa,Lc)|0;m=m+Math.imul(Sa,hd)|0;m=m+Math.imul(sa,Lc)|0;t=t+Math.imul(sa,hd)|0;W=W+Math.imul(Va,Qc)|0;m=m+Math.imul(Va,ld)|0;m=m+Math.imul(Bb,Qc)|0;t=t+Math.imul(Bb,ld)|0;W=W+Math.imul(ia,Wc)|0;m=m+Math.imul(ia,od)|0;m=m+Math.imul(eb,Wc)|0;t=t+Math.imul(eb,od)|0;W=W+Math.imul(ea,Yc)|0;m=m+Math.imul(ea,Vc)|0;m=m+Math.imul(Oa,Yc)|0;t=t+Math.imul(Oa,Vc)|0;W=W+Math.imul(Ga,A)|0;m=m+Math.imul(Ga,cd)|0;m=m+Math.imul(da,A)|0;t=t+Math.imul(da,cd)|0;Ga=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>
13)|0)+(Ga>>>26)|0;Ga&=67108863;W=Math.imul(B,sc);m=Math.imul(B,Xc);m=m+Math.imul(X,sc)|0;t=Math.imul(X,Xc);W=W+Math.imul(Z,Lc)|0;m=m+Math.imul(Z,hd)|0;m=m+Math.imul(Da,Lc)|0;t=t+Math.imul(Da,hd)|0;W=W+Math.imul(Sa,Qc)|0;m=m+Math.imul(Sa,ld)|0;m=m+Math.imul(sa,Qc)|0;t=t+Math.imul(sa,ld)|0;W=W+Math.imul(Va,Wc)|0;m=m+Math.imul(Va,od)|0;m=m+Math.imul(Bb,Wc)|0;t=t+Math.imul(Bb,od)|0;W=W+Math.imul(ia,Yc)|0;m=m+Math.imul(ia,Vc)|0;m=m+Math.imul(eb,Yc)|0;t=t+Math.imul(eb,Vc)|0;W=W+Math.imul(ea,A)|0;m=m+Math.imul(ea,
cd)|0;m=m+Math.imul(Oa,A)|0;t=t+Math.imul(Oa,cd)|0;ea=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ea>>>26)|0;ea&=67108863;W=Math.imul(B,Lc);m=Math.imul(B,hd);m=m+Math.imul(X,Lc)|0;t=Math.imul(X,hd);W=W+Math.imul(Z,Qc)|0;m=m+Math.imul(Z,ld)|0;m=m+Math.imul(Da,Qc)|0;t=t+Math.imul(Da,ld)|0;W=W+Math.imul(Sa,Wc)|0;m=m+Math.imul(Sa,od)|0;m=m+Math.imul(sa,Wc)|0;t=t+Math.imul(sa,od)|0;W=W+Math.imul(Va,Yc)|0;m=m+Math.imul(Va,Vc)|0;m=m+Math.imul(Bb,Yc)|0;t=t+Math.imul(Bb,Vc)|0;W=W+Math.imul(ia,A)|0;m=m+Math.imul(ia,
cd)|0;m=m+Math.imul(eb,A)|0;t=t+Math.imul(eb,cd)|0;ia=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ia>>>26)|0;ia&=67108863;W=Math.imul(B,Qc);m=Math.imul(B,ld);m=m+Math.imul(X,Qc)|0;t=Math.imul(X,ld);W=W+Math.imul(Z,Wc)|0;m=m+Math.imul(Z,od)|0;m=m+Math.imul(Da,Wc)|0;t=t+Math.imul(Da,od)|0;W=W+Math.imul(Sa,Yc)|0;m=m+Math.imul(Sa,Vc)|0;m=m+Math.imul(sa,Yc)|0;t=t+Math.imul(sa,Vc)|0;W=W+Math.imul(Va,A)|0;m=m+Math.imul(Va,cd)|0;m=m+Math.imul(Bb,A)|0;t=t+Math.imul(Bb,cd)|0;Va=(F+W|0)+((m&8191)<<13)|0;F=(t+
(m>>>13)|0)+(Va>>>26)|0;Va&=67108863;W=Math.imul(B,Wc);m=Math.imul(B,od);m=m+Math.imul(X,Wc)|0;t=Math.imul(X,od);W=W+Math.imul(Z,Yc)|0;m=m+Math.imul(Z,Vc)|0;m=m+Math.imul(Da,Yc)|0;t=t+Math.imul(Da,Vc)|0;W=W+Math.imul(Sa,A)|0;m=m+Math.imul(Sa,cd)|0;m=m+Math.imul(sa,A)|0;t=t+Math.imul(sa,cd)|0;Sa=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Sa>>>26)|0;Sa&=67108863;W=Math.imul(B,Yc);m=Math.imul(B,Vc);m=m+Math.imul(X,Yc)|0;t=Math.imul(X,Vc);W=W+Math.imul(Z,A)|0;m=m+Math.imul(Z,cd)|0;m=m+Math.imul(Da,A)|
0;t=t+Math.imul(Da,cd)|0;Z=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Z>>>26)|0;Z&=67108863;W=Math.imul(B,A);m=Math.imul(B,cd);m=m+Math.imul(X,A)|0;t=Math.imul(X,cd);T=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(T>>>26)|0;H[0]=af;H[1]=zc;H[2]=pi;H[3]=ad;H[4]=bd;H[5]=qi;H[6]=ei;H[7]=Zh;H[8]=xi;H[9]=U;H[10]=L;H[11]=Y;H[12]=Ga;H[13]=ea;H[14]=ia;H[15]=Va;H[16]=Sa;H[17]=Z;H[18]=T&67108863;0!==F&&(H[19]=F,u.length++);return u};Math.imul||(N=h);l.prototype.mulTo=function(m,t){var u=(this||mb).length+m.length;
if(10===(this||mb).length&&10===m.length)m=N(this||mb,m,t);else if(63>u)m=h(this||mb,m,t);else if(1024>u){u=this||mb;t.negative=m.negative^u.negative;t.length=u.length+m.length;for(var B=0,A=0,H=0;H<t.length-1;H++){var F=A;A=0;B&=67108863;for(var L=Math.min(H,m.length-1),U=Math.max(0,H-u.length+1);U<=L;U++){var T=(u.words[H-U]|0)*(m.words[U]|0),Y=T&67108863;F=F+(T/67108864|0)|0;Y=Y+B|0;B=Y&67108863;F=F+(Y>>>26)|0;A+=F>>>26;F&=67108863}t.words[H]=B;B=F}0!==B?t.words[H]=B:t.length--;m=t.strip()}else u=
this||mb,m=(new a).mulp(u,m,t);return m};a.prototype.makeRBT=function(m){for(var t=Array(m),u=l.prototype._countBits(m)-1,B=0;B<m;B++)t[B]=this.revBin(B,u,m);return t};a.prototype.revBin=function(m,t,u){if(0===m||m===u-1)return m;for(var B=u=0;B<t;B++)u|=(m&1)<<t-B-1,m>>=1;return u};a.prototype.permute=function(m,t,u,B,A,H){for(var F=0;F<H;F++)B[F]=t[m[F]],A[F]=u[m[F]]};a.prototype.transform=function(m,t,u,B,A,H){this.permute(H,m,t,u,B,A);for(m=1;m<A;m<<=1){t=m<<1;H=Math.cos(2*Math.PI/t);for(var F=
Math.sin(2*Math.PI/t),L=0;L<A;L+=t)for(var U=H,T=F,Y=0;Y<m;Y++){var wa=u[L+Y],Ga=B[L+Y],na=u[L+Y+m],ea=B[L+Y+m],da=U*na-T*ea;ea=U*ea+T*na;na=da;u[L+Y]=wa+na;B[L+Y]=Ga+ea;u[L+Y+m]=wa-na;B[L+Y+m]=Ga-ea;Y!==t&&(da=H*U-F*T,T=H*T+F*U,U=da)}}};a.prototype.guessLen13b=function(m,t){m=Math.max(t,m)|1;t=m&1;var u=0;for(m=m/2|0;m;m>>>=1)u++;return 1<<u+1+t};a.prototype.conjugate=function(m,t,u){if(!(1>=u))for(var B=0;B<u/2;B++){var A=m[B];m[B]=m[u-B-1];m[u-B-1]=A;A=t[B];t[B]=-t[u-B-1];t[u-B-1]=-A}};a.prototype.normalize13b=
function(m,t){for(var u=0,B=0;B<t/2;B++)u=8192*Math.round(m[2*B+1]/t)+Math.round(m[2*B]/t)+u,m[B]=u&67108863,u=67108864>u?0:u/67108864|0;return m};a.prototype.convert13b=function(m,t,u,B){for(var A=0,H=0;H<t;H++)A+=m[H]|0,u[2*H]=A&8191,A>>>=13,u[2*H+1]=A&8191,A>>>=13;for(H=2*t;H<B;++H)u[H]=0;k(0===A);k(0===(A&-8192))};a.prototype.stub=function(m){for(var t=Array(m),u=0;u<m;u++)t[u]=0;return t};a.prototype.mulp=function(m,t,u){var B=2*this.guessLen13b(m.length,t.length),A=this.makeRBT(B),H=this.stub(B),
F=Array(B),L=Array(B),U=Array(B),T=Array(B),Y=Array(B),wa=Array(B),Ga=u.words;Ga.length=B;this.convert13b(m.words,m.length,F,B);this.convert13b(t.words,t.length,T,B);this.transform(F,H,L,U,B,A);this.transform(T,H,Y,wa,B,A);for(F=0;F<B;F++)T=L[F]*Y[F]-U[F]*wa[F],U[F]=L[F]*wa[F]+U[F]*Y[F],L[F]=T;this.conjugate(L,U,B);this.transform(L,U,Ga,H,B,A);this.conjugate(Ga,H,B);this.normalize13b(Ga,B);u.negative=m.negative^t.negative;u.length=m.length+t.length;return u.strip()};l.prototype.mul=function(m){var t=
new l(null);t.words=Array((this||mb).length+m.length);return this.mulTo(m,t)};l.prototype.mulf=function(m){var t=new l(null);t.words=Array((this||mb).length+m.length);var u=this||mb;return(new a).mulp(u,m,t)};l.prototype.imul=function(m){return this.clone().mulTo(m,this||mb)};l.prototype.imuln=function(m){k("number"===typeof m);k(67108864>m);for(var t=0,u=0;u<(this||mb).length;u++){var B=((this||mb).words[u]|0)*m,A=(B&67108863)+(t&67108863);t>>=26;t+=B/67108864|0;t+=A>>>26;(this||mb).words[u]=A&67108863}0!==
t&&((this||mb).words[u]=t,(this||mb).length++);return this||mb};l.prototype.muln=function(m){return this.clone().imuln(m)};l.prototype.sqr=function(){return this.mul(this||mb)};l.prototype.isqr=function(){return this.imul(this.clone())};l.prototype.pow=function(m){for(var t=Array(m.bitLength()),u=0;u<t.length;u++){var B=u%26;t[u]=(m.words[u/26|0]&1<<B)>>>B}if(0===t.length)return new l(1);m=this||mb;for(u=0;u<t.length&&0===t[u];u++,m=m.sqr());if(++u<t.length)for(B=m.sqr();u<t.length;u++,B=B.sqr())0!==
t[u]&&(m=m.mul(B));return m};l.prototype.iushln=function(m){k("number"===typeof m&&0<=m);var t=m%26;m=(m-t)/26;var u=67108863>>>26-t<<26-t,B;if(0!==t){var A=0;for(B=0;B<(this||mb).length;B++){var H=(this||mb).words[B]&u;(this||mb).words[B]=((this||mb).words[B]|0)-H<<t|A;A=H>>>26-t}A&&((this||mb).words[B]=A,(this||mb).length++)}if(0!==m){for(B=(this||mb).length-1;0<=B;B--)(this||mb).words[B+m]=(this||mb).words[B];for(B=0;B<m;B++)(this||mb).words[B]=0;(this||mb).length+=m}return this.strip()};l.prototype.ishln=
function(m){k(0===(this||mb).negative);return this.iushln(m)};l.prototype.iushrn=function(m,t,u){k("number"===typeof m&&0<=m);var B=m%26,A=Math.min((m-B)/26,(this||mb).length);m=67108863^67108863>>>B<<B;t=Math.max(0,(t?(t-t%26)/26:0)-A);if(u){for(var H=0;H<A;H++)u.words[H]=(this||mb).words[H];u.length=A}if(0!==A)if((this||mb).length>A)for((this||mb).length-=A,H=0;H<(this||mb).length;H++)(this||mb).words[H]=(this||mb).words[H+A];else(this||mb).words[0]=0,(this||mb).length=1;A=0;for(H=(this||mb).length-
1;0<=H&&(0!==A||H>=t);H--){var F=(this||mb).words[H]|0;(this||mb).words[H]=A<<26-B|F>>>B;A=F&m}u&&0!==A&&(u.words[u.length++]=A);0===(this||mb).length&&((this||mb).words[0]=0,(this||mb).length=1);return this.strip()};l.prototype.ishrn=function(m,t,u){k(0===(this||mb).negative);return this.iushrn(m,t,u)};l.prototype.shln=function(m){return this.clone().ishln(m)};l.prototype.ushln=function(m){return this.clone().iushln(m)};l.prototype.shrn=function(m){return this.clone().ishrn(m)};l.prototype.ushrn=
function(m){return this.clone().iushrn(m)};l.prototype.testn=function(m){k("number"===typeof m&&0<=m);var t=m%26;m=(m-t)/26;return(this||mb).length<=m?!1:!!((this||mb).words[m]&1<<t)};l.prototype.imaskn=function(m){k("number"===typeof m&&0<=m);var t=m%26;m=(m-t)/26;k(0===(this||mb).negative,"imaskn works only with positive numbers");if((this||mb).length<=m)return this||mb;0!==t&&m++;(this||mb).length=Math.min(m,(this||mb).length);0!==t&&((this||mb).words[(this||mb).length-1]&=67108863^67108863>>>
t<<t);return this.strip()};l.prototype.maskn=function(m){return this.clone().imaskn(m)};l.prototype.iaddn=function(m){k("number"===typeof m);k(67108864>m);if(0>m)return this.isubn(-m);if(0!==(this||mb).negative){if(1===(this||mb).length&&((this||mb).words[0]|0)<m)return(this||mb).words[0]=m-((this||mb).words[0]|0),(this||mb).negative=0,this||mb;(this||mb).negative=0;this.isubn(m);(this||mb).negative=1;return this||mb}return this._iaddn(m)};l.prototype._iaddn=function(m){(this||mb).words[0]+=m;for(m=
0;m<(this||mb).length&&67108864<=(this||mb).words[m];m++)(this||mb).words[m]-=67108864,m===(this||mb).length-1?(this||mb).words[m+1]=1:(this||mb).words[m+1]++;(this||mb).length=Math.max((this||mb).length,m+1);return this||mb};l.prototype.isubn=function(m){k("number"===typeof m);k(67108864>m);if(0>m)return this.iaddn(-m);if(0!==(this||mb).negative)return(this||mb).negative=0,this.iaddn(m),(this||mb).negative=1,this||mb;(this||mb).words[0]-=m;if(1===(this||mb).length&&0>(this||mb).words[0])(this||mb).words[0]=
-(this||mb).words[0],(this||mb).negative=1;else for(m=0;m<(this||mb).length&&0>(this||mb).words[m];m++)(this||mb).words[m]+=67108864,--(this||mb).words[m+1];return this.strip()};l.prototype.addn=function(m){return this.clone().iaddn(m)};l.prototype.subn=function(m){return this.clone().isubn(m)};l.prototype.iabs=function(){(this||mb).negative=0;return this||mb};l.prototype.abs=function(){return this.clone().iabs()};l.prototype._ishlnsubmul=function(m,t,u){var B;this._expand(m.length+u);var A=0;for(B=
0;B<m.length;B++){var H=((this||mb).words[B+u]|0)+A;A=(m.words[B]|0)*t;H-=A&67108863;A=(H>>26)-(A/67108864|0);(this||mb).words[B+u]=H&67108863}for(;B<(this||mb).length-u;B++)H=((this||mb).words[B+u]|0)+A,A=H>>26,(this||mb).words[B+u]=H&67108863;if(0===A)return this.strip();k(-1===A);for(B=A=0;B<(this||mb).length;B++)H=-((this||mb).words[B]|0)+A,A=H>>26,(this||mb).words[B]=H&67108863;(this||mb).negative=1;return this.strip()};l.prototype._wordDiv=function(m,t){var u=this.clone(),B=m,A=B.words[B.length-
1]|0;m=26-this._countBits(A);0!==m&&(B=B.ushln(m),u.iushln(m),A=B.words[B.length-1]|0);var H=u.length-B.length;if("mod"!==t){var F=new l(null);F.length=H+1;F.words=Array(F.length);for(var L=0;L<F.length;L++)F.words[L]=0}L=u.clone()._ishlnsubmul(B,1,H);0===L.negative&&(u=L,F&&(F.words[H]=1));for(--H;0<=H;H--){L=67108864*(u.words[B.length+H]|0)+(u.words[B.length+H-1]|0);L=Math.min(L/A|0,67108863);for(u._ishlnsubmul(B,L,H);0!==u.negative;)L--,u.negative=0,u._ishlnsubmul(B,1,H),u.isZero()||(u.negative^=
1);F&&(F.words[H]=L)}F&&F.strip();u.strip();"div"!==t&&0!==m&&u.iushrn(m);return{div:F||null,mod:u}};l.prototype.divmod=function(m,t,u){k(!m.isZero());if(this.isZero())return{div:new l(0),mod:new l(0)};var B;if(0!==(this||mb).negative&&0===m.negative){var A=this.neg().divmod(m,t);"mod"!==t&&(B=A.div.neg());if("div"!==t){var H=A.mod.neg();u&&0!==H.negative&&H.iadd(m)}return{div:B,mod:H}}return 0===(this||mb).negative&&0!==m.negative?(A=this.divmod(m.neg(),t),"mod"!==t&&(B=A.div.neg()),{div:B,mod:A.mod}):
0!==((this||mb).negative&m.negative)?(A=this.neg().divmod(m.neg(),t),"div"!==t&&(H=A.mod.neg(),u&&0!==H.negative&&H.isub(m)),{div:A.div,mod:H}):m.length>(this||mb).length||0>this.cmp(m)?{div:new l(0),mod:this||mb}:1===m.length?"div"===t?{div:this.divn(m.words[0]),mod:null}:"mod"===t?{div:null,mod:new l(this.modn(m.words[0]))}:{div:this.divn(m.words[0]),mod:new l(this.modn(m.words[0]))}:this._wordDiv(m,t)};l.prototype.div=function(m){return this.divmod(m,"div",!1).div};l.prototype.mod=function(m){return this.divmod(m,
"mod",!1).mod};l.prototype.umod=function(m){return this.divmod(m,"mod",!0).mod};l.prototype.divRound=function(m){var t=this.divmod(m);if(t.mod.isZero())return t.div;var u=0!==t.div.negative?t.mod.isub(m):t.mod,B=m.ushrn(1);m=m.andln(1);u=u.cmp(B);return 0>u||1===m&&0===u?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)};l.prototype.modn=function(m){k(67108863>=m);for(var t=67108864%m,u=0,B=(this||mb).length-1;0<=B;B--)u=(t*u+((this||mb).words[B]|0))%m;return u};l.prototype.idivn=function(m){k(67108863>=
m);for(var t=0,u=(this||mb).length-1;0<=u;u--)t=((this||mb).words[u]|0)+67108864*t,(this||mb).words[u]=t/m|0,t%=m;return this.strip()};l.prototype.divn=function(m){return this.clone().idivn(m)};l.prototype.egcd=function(m){k(0===m.negative);k(!m.isZero());var t=this||mb,u=m.clone();t=0!==t.negative?t.umod(m):t.clone();m=new l(1);for(var B=new l(0),A=new l(0),H=new l(1),F=0;t.isEven()&&u.isEven();)t.iushrn(1),u.iushrn(1),++F;for(var L=u.clone(),U=t.clone();!t.isZero();){for(var T=0,Y=1;0===(t.words[0]&
Y)&&26>T;++T,Y<<=1);if(0<T)for(t.iushrn(T);0<T--;){if(m.isOdd()||B.isOdd())m.iadd(L),B.isub(U);m.iushrn(1);B.iushrn(1)}T=0;for(Y=1;0===(u.words[0]&Y)&&26>T;++T,Y<<=1);if(0<T)for(u.iushrn(T);0<T--;){if(A.isOdd()||H.isOdd())A.iadd(L),H.isub(U);A.iushrn(1);H.iushrn(1)}0<=t.cmp(u)?(t.isub(u),m.isub(A),B.isub(H)):(u.isub(t),A.isub(m),H.isub(B))}return{a:A,b:H,gcd:u.iushln(F)}};l.prototype._invmp=function(m){k(0===m.negative);k(!m.isZero());var t=this||mb,u=m.clone();t=0!==t.negative?t.umod(m):t.clone();
for(var B=new l(1),A=new l(0),H=u.clone();0<t.cmpn(1)&&0<u.cmpn(1);){for(var F=0,L=1;0===(t.words[0]&L)&&26>F;++F,L<<=1);if(0<F)for(t.iushrn(F);0<F--;)B.isOdd()&&B.iadd(H),B.iushrn(1);F=0;for(L=1;0===(u.words[0]&L)&&26>F;++F,L<<=1);if(0<F)for(u.iushrn(F);0<F--;)A.isOdd()&&A.iadd(H),A.iushrn(1);0<=t.cmp(u)?(t.isub(u),B.isub(A)):(u.isub(t),A.isub(B))}t=0===t.cmpn(1)?B:A;0>t.cmpn(0)&&t.iadd(m);return t};l.prototype.gcd=function(m){if(this.isZero())return m.abs();if(m.isZero())return this.abs();var t=
this.clone();m=m.clone();t.negative=0;for(var u=m.negative=0;t.isEven()&&m.isEven();u++)t.iushrn(1),m.iushrn(1);do{for(;t.isEven();)t.iushrn(1);for(;m.isEven();)m.iushrn(1);var B=t.cmp(m);if(0>B)B=t,t=m,m=B;else if(0===B||0===m.cmpn(1))break;t.isub(m)}while(1);return m.iushln(u)};l.prototype.invm=function(m){return this.egcd(m).a.umod(m)};l.prototype.isEven=function(){return 0===((this||mb).words[0]&1)};l.prototype.isOdd=function(){return 1===((this||mb).words[0]&1)};l.prototype.andln=function(m){return(this||
mb).words[0]&m};l.prototype.bincn=function(m){k("number"===typeof m);var t=m%26;m=(m-t)/26;t=1<<t;if((this||mb).length<=m)return this._expand(m+1),(this||mb).words[m]|=t,this||mb;for(;0!==t&&m<(this||mb).length;m++){var u=(this||mb).words[m]|0;u+=t;t=u>>>26;u&=67108863;(this||mb).words[m]=u}0!==t&&((this||mb).words[m]=t,(this||mb).length++);return this||mb};l.prototype.isZero=function(){return 1===(this||mb).length&&0===(this||mb).words[0]};l.prototype.cmpn=function(m){var t=0>m;if(0!==(this||mb).negative&&
!t)return-1;if(0===(this||mb).negative&&t)return 1;this.strip();1<(this||mb).length?m=1:(t&&(m=-m),k(67108863>=m,"Number is too big"),t=(this||mb).words[0]|0,m=t===m?0:t<m?-1:1);return 0!==(this||mb).negative?-m|0:m};l.prototype.cmp=function(m){if(0!==(this||mb).negative&&0===m.negative)return-1;if(0===(this||mb).negative&&0!==m.negative)return 1;m=this.ucmp(m);return 0!==(this||mb).negative?-m|0:m};l.prototype.ucmp=function(m){if((this||mb).length>m.length)return 1;if((this||mb).length<m.length)return-1;
for(var t=0,u=(this||mb).length-1;0<=u;u--){var B=(this||mb).words[u]|0,A=m.words[u]|0;if(B!==A){B<A?t=-1:B>A&&(t=1);break}}return t};l.prototype.gtn=function(m){return 1===this.cmpn(m)};l.prototype.gt=function(m){return 1===this.cmp(m)};l.prototype.gten=function(m){return 0<=this.cmpn(m)};l.prototype.gte=function(m){return 0<=this.cmp(m)};l.prototype.ltn=function(m){return-1===this.cmpn(m)};l.prototype.lt=function(m){return-1===this.cmp(m)};l.prototype.lten=function(m){return 0>=this.cmpn(m)};l.prototype.lte=
function(m){return 0>=this.cmp(m)};l.prototype.eqn=function(m){return 0===this.cmpn(m)};l.prototype.eq=function(m){return 0===this.cmp(m)};l.red=function(m){return new y(m)};l.prototype.toRed=function(m){k(!(this||mb).red,"Already a number in reduction context");k(0===(this||mb).negative,"red works only with positives");return m.convertTo(this||mb)._forceRed(m)};l.prototype.fromRed=function(){k((this||mb).red,"fromRed works only with numbers in reduction context");return(this||mb).red.convertFrom(this||
mb)};l.prototype._forceRed=function(m){(this||mb).red=m;return this||mb};l.prototype.forceRed=function(m){k(!(this||mb).red,"Already a number in reduction context");return this._forceRed(m)};l.prototype.redAdd=function(m){k((this||mb).red,"redAdd works only with red numbers");return(this||mb).red.add(this||mb,m)};l.prototype.redIAdd=function(m){k((this||mb).red,"redIAdd works only with red numbers");return(this||mb).red.iadd(this||mb,m)};l.prototype.redSub=function(m){k((this||mb).red,"redSub works only with red numbers");
return(this||mb).red.sub(this||mb,m)};l.prototype.redISub=function(m){k((this||mb).red,"redISub works only with red numbers");return(this||mb).red.isub(this||mb,m)};l.prototype.redShl=function(m){k((this||mb).red,"redShl works only with red numbers");return(this||mb).red.shl(this||mb,m)};l.prototype.redMul=function(m){k((this||mb).red,"redMul works only with red numbers");(this||mb).red._verify2(this||mb,m);return(this||mb).red.mul(this||mb,m)};l.prototype.redIMul=function(m){k((this||mb).red,"redMul works only with red numbers");
(this||mb).red._verify2(this||mb,m);return(this||mb).red.imul(this||mb,m)};l.prototype.redSqr=function(){k((this||mb).red,"redSqr works only with red numbers");(this||mb).red._verify1(this||mb);return(this||mb).red.sqr(this||mb)};l.prototype.redISqr=function(){k((this||mb).red,"redISqr works only with red numbers");(this||mb).red._verify1(this||mb);return(this||mb).red.isqr(this||mb)};l.prototype.redSqrt=function(){k((this||mb).red,"redSqrt works only with red numbers");(this||mb).red._verify1(this||
mb);return(this||mb).red.sqrt(this||mb)};l.prototype.redInvm=function(){k((this||mb).red,"redInvm works only with red numbers");(this||mb).red._verify1(this||mb);return(this||mb).red.invm(this||mb)};l.prototype.redNeg=function(){k((this||mb).red,"redNeg works only with red numbers");(this||mb).red._verify1(this||mb);return(this||mb).red.neg(this||mb)};l.prototype.redPow=function(m){k((this||mb).red&&!m.red,"redPow(normalNum)");(this||mb).red._verify1(this||mb);return(this||mb).red.pow(this||mb,m)};
var aa={k256:null,p224:null,p192:null,p25519:null};e.prototype._tmp=function(){var m=new l(null);m.words=Array(Math.ceil((this||mb).n/13));return m};e.prototype.ireduce=function(m){do{this.split(m,(this||mb).tmp);m=this.imulK(m);m=m.iadd((this||mb).tmp);var t=m.bitLength()}while(t>(this||mb).n);t=t<(this||mb).n?-1:m.ucmp((this||mb).p);0===t?(m.words[0]=0,m.length=1):0<t?m.isub((this||mb).p):void 0!==m.strip?m.strip():m._strip();return m};e.prototype.split=function(m,t){m.iushrn((this||mb).n,0,t)};
e.prototype.imulK=function(m){return m.imul((this||mb).k)};f(n,e);n.prototype.split=function(m,t){for(var u=Math.min(m.length,9),B=0;B<u;B++)t.words[B]=m.words[B];t.length=u;if(9>=m.length)m.words[0]=0,m.length=1;else{u=m.words[9];t.words[t.length++]=u&4194303;for(B=10;B<m.length;B++)t=m.words[B]|0,m.words[B-10]=(t&4194303)<<4|u>>>22,u=t;u>>>=22;m.words[B-10]=u;m.length=0===u&&10<m.length?m.length-10:m.length-9}};n.prototype.imulK=function(m){m.words[m.length]=0;m.words[m.length+1]=0;m.length+=2;
for(var t=0,u=0;u<m.length;u++){var B=m.words[u]|0;t+=977*B;m.words[u]=t&67108863;t=64*B+(t/67108864|0)}0===m.words[m.length-1]&&(m.length--,0===m.words[m.length-1]&&m.length--);return m};f(q,e);f(r,e);f(v,e);v.prototype.imulK=function(m){for(var t=0,u=0;u<m.length;u++){t=19*(m.words[u]|0)+t;var B=t&67108863;t>>>=26;m.words[u]=B}0!==t&&(m.words[m.length++]=t);return m};l._prime=function(m){if(aa[m])return aa[m];if("k256"===m)var t=new n;else if("p224"===m)t=new q;else if("p192"===m)t=new r;else if("p25519"===
m)t=new v;else throw Error("Unknown prime "+m);return aa[m]=t};y.prototype._verify1=function(m){k(0===m.negative,"red works only with positives");k(m.red,"red works only with red numbers")};y.prototype._verify2=function(m,t){k(0===(m.negative|t.negative),"red works only with positives");k(m.red&&m.red===t.red,"red works only with red numbers")};y.prototype.imod=function(m){return(this||mb).prime?(this||mb).prime.ireduce(m)._forceRed(this||mb):m.umod((this||mb).m)._forceRed(this||mb)};y.prototype.neg=
function(m){return m.isZero()?m.clone():(this||mb).m.sub(m)._forceRed(this||mb)};y.prototype.add=function(m,t){this._verify2(m,t);m=m.add(t);0<=m.cmp((this||mb).m)&&m.isub((this||mb).m);return m._forceRed(this||mb)};y.prototype.iadd=function(m,t){this._verify2(m,t);m=m.iadd(t);0<=m.cmp((this||mb).m)&&m.isub((this||mb).m);return m};y.prototype.sub=function(m,t){this._verify2(m,t);m=m.sub(t);0>m.cmpn(0)&&m.iadd((this||mb).m);return m._forceRed(this||mb)};y.prototype.isub=function(m,t){this._verify2(m,
t);m=m.isub(t);0>m.cmpn(0)&&m.iadd((this||mb).m);return m};y.prototype.shl=function(m,t){this._verify1(m);return this.imod(m.ushln(t))};y.prototype.imul=function(m,t){this._verify2(m,t);return this.imod(m.imul(t))};y.prototype.mul=function(m,t){this._verify2(m,t);return this.imod(m.mul(t))};y.prototype.isqr=function(m){return this.imul(m,m.clone())};y.prototype.sqr=function(m){return this.mul(m,m)};y.prototype.sqrt=function(m){if(m.isZero())return m.clone();var t=(this||mb).m.andln(3);k(1===t%2);
if(3===t)return t=(this||mb).m.add(new l(1)).iushrn(2),this.pow(m,t);for(var u=(this||mb).m.subn(1),B=0;!u.isZero()&&0===u.andln(1);)B++,u.iushrn(1);k(!u.isZero());t=(new l(1)).toRed(this||mb);var A=t.redNeg(),H=(this||mb).m.subn(1).iushrn(1),F=(this||mb).m.bitLength();for(F=(new l(2*F*F)).toRed(this||mb);0!==this.pow(F,H).cmp(A);)F.redIAdd(A);H=this.pow(F,u);A=this.pow(m,u.addn(1).iushrn(1));m=this.pow(m,u);for(u=B;0!==m.cmp(t);){F=m;for(B=0;0!==F.cmp(t);B++)F=F.redSqr();k(B<u);H=this.pow(H,(new l(1)).iushln(u-
B-1));A=A.redMul(H);H=H.redSqr();m=m.redMul(H);u=B}return A};y.prototype.invm=function(m){m=m._invmp((this||mb).m);return 0!==m.negative?(m.negative=0,this.imod(m).redNeg()):this.imod(m)};y.prototype.pow=function(m,t){if(t.isZero())return(new l(1)).toRed(this||mb);if(0===t.cmpn(1))return m.clone();var u=Array(16);u[0]=(new l(1)).toRed(this||mb);u[1]=m;for(var B=2;B<u.length;B++)u[B]=this.mul(u[B-1],m);m=u[0];var A=0,H=0,F=t.bitLength()%26;0===F&&(F=26);for(B=t.length-1;0<=B;B--){var L=t.words[B];
for(--F;0<=F;F--){var U=L>>F&1;m!==u[0]&&(m=this.sqr(m));if(0===U&&0===A)H=0;else if(A<<=1,A|=U,H++,4===H||0===B&&0===F)m=this.mul(m,u[A]),A=H=0}F=26}return m};y.prototype.convertTo=function(m){var t=m.umod((this||mb).m);return t===m?t.clone():t};y.prototype.convertFrom=function(m){m=m.clone();m.red=null;return m};l.mont=function(m){return new D(m)};f(D,y);D.prototype.convertTo=function(m){return this.imod(m.ushln((this||mb).shift))};D.prototype.convertFrom=function(m){m=this.imod(m.mul((this||mb).rinv));
m.red=null;return m};D.prototype.imul=function(m,t){if(m.isZero()||t.isZero())return m.words[0]=0,m.length=1,m;m=m.imul(t);t=m.maskn((this||mb).shift).mul((this||mb).minv).imaskn((this||mb).shift).mul((this||mb).m);t=m=m.isub(t).iushrn((this||mb).shift);0<=m.cmp((this||mb).m)?t=m.isub((this||mb).m):0>m.cmpn(0)&&(t=m.iadd((this||mb).m));return t._forceRed(this||mb)};D.prototype.mul=function(m,t){if(m.isZero()||t.isZero())return(new l(0))._forceRed(this||mb);m=m.mul(t);t=m.maskn((this||mb).shift).mul((this||
mb).minv).imaskn((this||mb).shift).mul((this||mb).m);t=m=m.isub(t).iushrn((this||mb).shift);0<=m.cmp((this||mb).m)?t=m.isub((this||mb).m):0>m.cmpn(0)&&(t=m.iadd((this||mb).m));return t._forceRed(this||mb)};D.prototype.invm=function(m){return this.imod(m._invmp((this||mb).m).mul((this||mb).r2))._forceRed(this||mb)}})(NP,U4);return NP.exports}function Ija(){function g(b){(this||Qk).curveType=p[b];(this||Qk).curveType||((this||Qk).curveType={name:b});(this||Qk).curve=new f.ec((this||Qk).curveType.name);
(this||Qk).keys=void 0}function c(b,d,h){Array.isArray(b)||(b=b.toArray());b=new k(b);h&&b.length<h&&(h=new k(h-b.length),h.fill(0),b=k.concat([h,b]));return d?b.toString(d):b}if(V4)return OP;V4=!0;var k=Yg.Buffer,f=uP(),l=Hja();OP=function(b){return new g(b)};var p={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},
secp521r1:{name:"p521",byteLength:66}};p.p224=p.secp224r1;p.p256=p.secp256r1=p.prime256v1;p.p192=p.secp192r1=p.prime192v1;p.p384=p.secp384r1;p.p521=p.secp521r1;g.prototype.generateKeys=function(b,d){(this||Qk).keys=(this||Qk).curve.genKeyPair();return this.getPublicKey(b,d)};g.prototype.computeSecret=function(b,d,h){d=d||"utf8";k.isBuffer(b)||(b=new k(b,d));b=(this||Qk).curve.keyFromPublic(b).getPublic().mul((this||Qk).keys.getPrivate()).getX();return c(b,h,(this||Qk).curveType.byteLength)};g.prototype.getPublicKey=
function(b,d){var h=(this||Qk).keys.getPublic("compressed"===d,!0);"hybrid"===d&&(h[0]=h[h.length-1]%2?7:6);return c(h,b)};g.prototype.getPrivateKey=function(b){return c((this||Qk).keys.getPrivate(),b)};g.prototype.setPublicKey=function(b,d){d=d||"utf8";k.isBuffer(b)||(b=new k(b,d));(this||Qk).keys._importPublic(b);return this||Qk};g.prototype.setPrivateKey=function(b,d){d=d||"utf8";k.isBuffer(b)||(b=new k(b,d));b=new l(b);b=b.toString(16);(this||Qk).keys=(this||Qk).curve.genKeyPair();(this||Qk).keys._importPrivate(b);
return this||Qk};return OP}function W4(){if(X4)return Y4;X4=!0;var g=AA(),c=Nh().Buffer;return Y4=function(k,f){for(var l=c.alloc(0),p=0,b;l.length<f;){b=p++;var d=c.allocUnsafe(4);d.writeUInt32BE(b,0);b=d;l=c.concat([l,g("sha1").update(k).update(b).digest()])}return l.slice(0,f)}}function Z4(){if($4)return a5;$4=!0;return a5=function(g,c){for(var k=g.length,f=-1;++f<k;)g[f]^=c[f];return g}}function PP(){if(b5)return QP.exports;b5=!0;(function(g,c){function k(m,t){if(!m)throw Error(t||"Assertion failed");
}function f(m,t){m.super_=t;var u=function(){};u.prototype=t.prototype;m.prototype=new u;m.prototype.constructor=m}function l(m,t,u){if(l.isBN(m))return m;(this||nb).negative=0;(this||nb).words=null;(this||nb).length=0;(this||nb).red=null;if(null!==m){if("le"===t||"be"===t)u=t,t=10;this._init(m||0,t||10,u||"be")}}function p(m,t){m=m.charCodeAt(t);return 65<=m&&70>=m?m-55:97<=m&&102>=m?m-87:m-48&15}function b(m,t,u){var B=p(m,u);u-1>=t&&(B|=p(m,u-1)<<4);return B}function d(m,t,u,B){var A=0;for(u=Math.min(m.length,
u);t<u;t++){var H=m.charCodeAt(t)-48;A*=B;A=49<=H?A+(H-49+10):17<=H?A+(H-17+10):A+H}return A}function h(m,t,u){u.negative=t.negative^m.negative;var B=m.length+t.length|0;u.length=B;B=B-1|0;var A=m.words[0]|0,H=t.words[0]|0;A*=H;var F=A/67108864|0;u.words[0]=A&67108863;for(var L=1;L<B;L++){var U=F>>>26,T=F&67108863;F=Math.min(L,t.length-1);for(var Y=Math.max(0,L-m.length+1);Y<=F;Y++)A=m.words[L-Y|0]|0,H=t.words[Y]|0,A=A*H+T,U+=A/67108864|0,T=A&67108863;u.words[L]=T|0;F=U|0}0!==F?u.words[L]=F|0:u.length--;
return u.strip()}function a(m,t){(this||nb).x=m;(this||nb).y=t}function e(m,t){(this||nb).name=m;(this||nb).p=new l(t,16);(this||nb).n=(this||nb).p.bitLength();(this||nb).k=(new l(1)).iushln((this||nb).n).isub((this||nb).p);(this||nb).tmp=this._tmp()}function n(){e.call(this||nb,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function q(){e.call(this||nb,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function r(){e.call(this||nb,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}
function v(){e.call(this||nb,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function y(m){"string"===typeof m?(m=l._prime(m),(this||nb).m=m.p,(this||nb).prime=m):(k(m.gtn(1),"modulus must be greater than 1"),(this||nb).m=m,(this||nb).prime=null)}function D(m){y.call(this||nb,m);(this||nb).shift=(this||nb).m.bitLength();0!==(this||nb).shift%26&&((this||nb).shift+=26-(this||nb).shift%26);(this||nb).r=(new l(1)).iushln((this||nb).shift);(this||nb).r2=this.imod((this||
nb).r.sqr());(this||nb).rinv=(this||nb).r._invmp((this||nb).m);(this||nb).minv=(this||nb).rinv.mul((this||nb).r).isubn(1).div((this||nb).m);(this||nb).minv=(this||nb).minv.umod((this||nb).r);(this||nb).minv=(this||nb).r.sub((this||nb).minv)}"object"===typeof g?g.exports=l:c.BN=l;l.BN=l;l.wordSize=26;try{var E="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:Yg.Buffer}catch(m){}l.isBN=function(m){return m instanceof l?!0:null!==m&&"object"===typeof m&&m.constructor.wordSize===
l.wordSize&&Array.isArray(m.words)};l.max=function(m,t){return 0<m.cmp(t)?m:t};l.min=function(m,t){return 0>m.cmp(t)?m:t};l.prototype._init=function(m,t,u){if("number"===typeof m)return this._initNumber(m,t,u);if("object"===typeof m)return this._initArray(m,t,u);"hex"===t&&(t=16);k(t===(t|0)&&2<=t&&36>=t);m=m.toString().replace(/\s+/g,"");var B=0;"-"===m[0]&&(B++,(this||nb).negative=1);B<m.length&&(16===t?this._parseHex(m,B,u):(this._parseBase(m,t,B),"le"===u&&this._initArray(this.toArray(),t,u)))};
l.prototype._initNumber=function(m,t,u){0>m&&((this||nb).negative=1,m=-m);67108864>m?((this||nb).words=[m&67108863],(this||nb).length=1):4503599627370496>m?((this||nb).words=[m&67108863,m/67108864&67108863],(this||nb).length=2):(k(9007199254740992>m),(this||nb).words=[m&67108863,m/67108864&67108863,1],(this||nb).length=3);"le"===u&&this._initArray(this.toArray(),t,u)};l.prototype._initArray=function(m,t,u){k("number"===typeof m.length);if(0>=m.length)return(this||nb).words=[0],(this||nb).length=1,
this||nb;(this||nb).length=Math.ceil(m.length/3);(this||nb).words=Array((this||nb).length);for(t=0;t<(this||nb).length;t++)(this||nb).words[t]=0;var B=0;if("be"===u)for(t=m.length-1,u=0;0<=t;t-=3){var A=m[t]|m[t-1]<<8|m[t-2]<<16;(this||nb).words[u]|=A<<B&67108863;(this||nb).words[u+1]=A>>>26-B&67108863;B+=24;26<=B&&(B-=26,u++)}else if("le"===u)for(u=t=0;t<m.length;t+=3)A=m[t]|m[t+1]<<8|m[t+2]<<16,(this||nb).words[u]|=A<<B&67108863,(this||nb).words[u+1]=A>>>26-B&67108863,B+=24,26<=B&&(B-=26,u++);return this.strip()};
l.prototype._parseHex=function(m,t,u){(this||nb).length=Math.ceil((m.length-t)/6);(this||nb).words=Array((this||nb).length);for(var B=0;B<(this||nb).length;B++)(this||nb).words[B]=0;var A=0,H=0;if("be"===u)for(B=m.length-1;B>=t;B-=2)u=b(m,t,B)<<A,(this||nb).words[H]|=u&67108863,18<=A?(A-=18,H+=1,(this||nb).words[H]|=u>>>26):A+=8;else for(B=0===(m.length-t)%2?t+1:t;B<m.length;B+=2)u=b(m,t,B)<<A,(this||nb).words[H]|=u&67108863,18<=A?(A-=18,H+=1,(this||nb).words[H]|=u>>>26):A+=8;this.strip()};l.prototype._parseBase=
function(m,t,u){(this||nb).words=[0];(this||nb).length=1;for(var B=0,A=1;67108863>=A;A*=t)B++;B--;A=A/t|0;var H=m.length-u,F=H%B;H=Math.min(H,H-F)+u;for(var L=u;L<H;L+=B)u=d(m,L,L+B,t),this.imuln(A),67108864>(this||nb).words[0]+u?(this||nb).words[0]+=u:this._iaddn(u);if(0!==F){B=1;u=d(m,L,m.length,t);for(L=0;L<F;L++)B*=t;this.imuln(B);67108864>(this||nb).words[0]+u?(this||nb).words[0]+=u:this._iaddn(u)}this.strip()};l.prototype.copy=function(m){m.words=Array((this||nb).length);for(var t=0;t<(this||
nb).length;t++)m.words[t]=(this||nb).words[t];m.length=(this||nb).length;m.negative=(this||nb).negative;m.red=(this||nb).red};l.prototype.clone=function(){var m=new l(null);this.copy(m);return m};l.prototype._expand=function(m){for(;(this||nb).length<m;)(this||nb).words[(this||nb).length++]=0;return this||nb};l.prototype.strip=function(){for(;1<(this||nb).length&&0===(this||nb).words[(this||nb).length-1];)(this||nb).length--;return this._normSign()};l.prototype._normSign=function(){1===(this||nb).length&&
0===(this||nb).words[0]&&((this||nb).negative=0);return this||nb};l.prototype.inspect=function(){return((this||nb).red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var I=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
K=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],P=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];l.prototype.toString=function(m,t){m=m||10;t=t|0||1;if(16===m||"hex"===m){var u="";for(var B=m=0,A=0;A<(this||nb).length;A++){var H=
(this||nb).words[A],F=((H<<m|B)&16777215).toString(16);B=H>>>24-m&16777215;u=0!==B||A!==(this||nb).length-1?I[6-F.length]+F+u:F+u;m+=2;26<=m&&(m-=26,A--)}for(0!==B&&(u=B.toString(16)+u);0!==u.length%t;)u="0"+u;0!==(this||nb).negative&&(u="-"+u);return u}if(m===(m|0)&&2<=m&&36>=m){B=K[m];A=P[m];u="";H=this.clone();for(H.negative=0;!H.isZero();)F=H.modn(A).toString(m),H=H.idivn(A),u=H.isZero()?F+u:I[B-F.length]+F+u;for(this.isZero()&&(u="0"+u);0!==u.length%t;)u="0"+u;0!==(this||nb).negative&&(u="-"+
u);return u}k(!1,"Base should be between 2 and 36")};l.prototype.toNumber=function(){var m=(this||nb).words[0];2===(this||nb).length?m+=67108864*(this||nb).words[1]:3===(this||nb).length&&1===(this||nb).words[2]?m+=4503599627370496+67108864*(this||nb).words[1]:2<(this||nb).length&&k(!1,"Number can only safely store up to 53 bits");return 0!==(this||nb).negative?-m:m};l.prototype.toJSON=function(){return this.toString(16)};l.prototype.toBuffer=function(m,t){k("undefined"!==typeof E);return this.toArrayLike(E,
m,t)};l.prototype.toArray=function(m,t){return this.toArrayLike(Array,m,t)};l.prototype.toArrayLike=function(m,t,u){var B=this.byteLength();u=u||Math.max(1,B);k(B<=u,"byte array longer than desired length");k(0<u,"Requested array length <= 0");this.strip();var A="le"===t;m=new m(u);t=this.clone();if(A){for(A=0;!t.isZero();A++)B=t.andln(255),t.iushrn(8),m[A]=B;for(;A<u;A++)m[A]=0}else{for(A=0;A<u-B;A++)m[A]=0;for(A=0;!t.isZero();A++)B=t.andln(255),t.iushrn(8),m[u-A-1]=B}return m};l.prototype._countBits=
Math.clz32?function(m){return 32-Math.clz32(m)}:function(m){var t=0;4096<=m&&(t+=13,m>>>=13);64<=m&&(t+=7,m>>>=7);8<=m&&(t+=4,m>>>=4);2<=m&&(t+=2,m>>>=2);return t+m};l.prototype._zeroBits=function(m){if(0===m)return 26;var t=0;0===(m&8191)&&(t+=13,m>>>=13);0===(m&127)&&(t+=7,m>>>=7);0===(m&15)&&(t+=4,m>>>=4);0===(m&3)&&(t+=2,m>>>=2);0===(m&1)&&t++;return t};l.prototype.bitLength=function(){var m=this._countBits((this||nb).words[(this||nb).length-1]);return 26*((this||nb).length-1)+m};l.prototype.zeroBits=
function(){if(this.isZero())return 0;for(var m=0,t=0;t<(this||nb).length;t++){var u=this._zeroBits((this||nb).words[t]);m+=u;if(26!==u)break}return m};l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};l.prototype.toTwos=function(m){return 0!==(this||nb).negative?this.abs().inotn(m).iaddn(1):this.clone()};l.prototype.fromTwos=function(m){return this.testn(m-1)?this.notn(m).iaddn(1).ineg():this.clone()};l.prototype.isNeg=function(){return 0!==(this||nb).negative};l.prototype.neg=
function(){return this.clone().ineg()};l.prototype.ineg=function(){this.isZero()||((this||nb).negative^=1);return this||nb};l.prototype.iuor=function(m){for(;(this||nb).length<m.length;)(this||nb).words[(this||nb).length++]=0;for(var t=0;t<m.length;t++)(this||nb).words[t]|=m.words[t];return this.strip()};l.prototype.ior=function(m){k(0===((this||nb).negative|m.negative));return this.iuor(m)};l.prototype.or=function(m){return(this||nb).length>m.length?this.clone().ior(m):m.clone().ior(this||nb)};l.prototype.uor=
function(m){return(this||nb).length>m.length?this.clone().iuor(m):m.clone().iuor(this||nb)};l.prototype.iuand=function(m){var t=(this||nb).length>m.length?m:this||nb;for(var u=0;u<t.length;u++)(this||nb).words[u]&=m.words[u];(this||nb).length=t.length;return this.strip()};l.prototype.iand=function(m){k(0===((this||nb).negative|m.negative));return this.iuand(m)};l.prototype.and=function(m){return(this||nb).length>m.length?this.clone().iand(m):m.clone().iand(this||nb)};l.prototype.uand=function(m){return(this||
nb).length>m.length?this.clone().iuand(m):m.clone().iuand(this||nb)};l.prototype.iuxor=function(m){if((this||nb).length>m.length)var t=this||nb;else t=m,m=this||nb;for(var u=0;u<m.length;u++)(this||nb).words[u]=t.words[u]^m.words[u];if((this||nb)!==t)for(;u<t.length;u++)(this||nb).words[u]=t.words[u];(this||nb).length=t.length;return this.strip()};l.prototype.ixor=function(m){k(0===((this||nb).negative|m.negative));return this.iuxor(m)};l.prototype.xor=function(m){return(this||nb).length>m.length?
this.clone().ixor(m):m.clone().ixor(this||nb)};l.prototype.uxor=function(m){return(this||nb).length>m.length?this.clone().iuxor(m):m.clone().iuxor(this||nb)};l.prototype.inotn=function(m){k("number"===typeof m&&0<=m);var t=Math.ceil(m/26)|0;m%=26;this._expand(t);0<m&&t--;for(var u=0;u<t;u++)(this||nb).words[u]=~(this||nb).words[u]&67108863;0<m&&((this||nb).words[u]=~(this||nb).words[u]&67108863>>26-m);return this.strip()};l.prototype.notn=function(m){return this.clone().inotn(m)};l.prototype.setn=
function(m,t){k("number"===typeof m&&0<=m);var u=m/26|0;m%=26;this._expand(u+1);(this||nb).words[u]=t?(this||nb).words[u]|1<<m:(this||nb).words[u]&~(1<<m);return this.strip()};l.prototype.iadd=function(m){if(0!==(this||nb).negative&&0===m.negative)return(this||nb).negative=0,this.isub(m),(this||nb).negative^=1,this._normSign();if(0===(this||nb).negative&&0!==m.negative){m.negative=0;var t=this.isub(m);m.negative=1;return t._normSign()}if((this||nb).length>m.length)var u=this||nb;else u=m,m=this||
nb;for(var B=t=0;B<m.length;B++)t=(u.words[B]|0)+(m.words[B]|0)+t,(this||nb).words[B]=t&67108863,t>>>=26;for(;0!==t&&B<u.length;B++)t=(u.words[B]|0)+t,(this||nb).words[B]=t&67108863,t>>>=26;(this||nb).length=u.length;if(0!==t)(this||nb).words[(this||nb).length]=t,(this||nb).length++;else if(u!==(this||nb))for(;B<u.length;B++)(this||nb).words[B]=u.words[B];return this||nb};l.prototype.add=function(m){if(0!==m.negative&&0===(this||nb).negative){m.negative=0;var t=this.sub(m);m.negative^=1;return t}return 0===
m.negative&&0!==(this||nb).negative?((this||nb).negative=0,t=m.sub(this||nb),(this||nb).negative=1,t):(this||nb).length>m.length?this.clone().iadd(m):m.clone().iadd(this||nb)};l.prototype.isub=function(m){if(0!==m.negative){m.negative=0;var t=this.iadd(m);m.negative=1;return t._normSign()}if(0!==(this||nb).negative)return(this||nb).negative=0,this.iadd(m),(this||nb).negative=1,this._normSign();t=this.cmp(m);if(0===t)return(this||nb).negative=0,(this||nb).length=1,(this||nb).words[0]=0,this||nb;if(0<
t)var u=this||nb;else u=m,m=this||nb;for(var B=0,A=0;A<m.length;A++)t=(u.words[A]|0)-(m.words[A]|0)+B,B=t>>26,(this||nb).words[A]=t&67108863;for(;0!==B&&A<u.length;A++)t=(u.words[A]|0)+B,B=t>>26,(this||nb).words[A]=t&67108863;if(0===B&&A<u.length&&u!==(this||nb))for(;A<u.length;A++)(this||nb).words[A]=u.words[A];(this||nb).length=Math.max((this||nb).length,A);u!==(this||nb)&&((this||nb).negative=1);return this.strip()};l.prototype.sub=function(m){return this.clone().isub(m)};var N=function(m,t,u){var B=
m.words,A=t.words,H=u.words,F=0,L=B[0]|0,U=L&8191,T=L>>>13,Y=B[1]|0;L=Y&8191;var wa=Y>>>13,Ga=B[2]|0;Y=Ga&8191;var na=Ga>>>13,ea=B[3]|0;Ga=ea&8191;var da=ea>>>13,ia=B[4]|0;ea=ia&8191;var Oa=ia>>>13,Va=B[5]|0;ia=Va&8191;var eb=Va>>>13,Sa=B[6]|0;Va=Sa&8191;var Bb=Sa>>>13,Z=B[7]|0;Sa=Z&8191;var sa=Z>>>13,Da=B[8]|0;Z=Da&8191;Da>>>=13;var X=B[9]|0;B=X&8191;X>>>=13;var ma=A[0]|0,ta=ma&8191,Pa=ma>>>13,Za=A[1]|0;ma=Za&8191;var Zb=Za>>>13,Pb=A[2]|0;Za=Pb&8191;var Db=Pb>>>13,sc=A[3]|0;Pb=sc&8191;var wc=sc>>>
13,Lc=A[4]|0;sc=Lc&8191;var Xc=Lc>>>13,Qc=A[5]|0;Lc=Qc&8191;var hd=Qc>>>13,Wc=A[6]|0;Qc=Wc&8191;var ld=Wc>>>13,Yc=A[7]|0;Wc=Yc&8191;var od=Yc>>>13,Vc=A[8]|0;Yc=Vc&8191;Vc>>>=13;var cd=A[9]|0;A=cd&8191;cd>>>=13;u.negative=m.negative^t.negative;u.length=19;var W=Math.imul(U,ta);m=Math.imul(U,Pa);m=m+Math.imul(T,ta)|0;t=Math.imul(T,Pa);var af=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(af>>>26)|0;af&=67108863;W=Math.imul(L,ta);m=Math.imul(L,Pa);m=m+Math.imul(wa,ta)|0;t=Math.imul(wa,Pa);W=W+Math.imul(U,
ma)|0;m=m+Math.imul(U,Zb)|0;m=m+Math.imul(T,ma)|0;t=t+Math.imul(T,Zb)|0;var zc=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(zc>>>26)|0;zc&=67108863;W=Math.imul(Y,ta);m=Math.imul(Y,Pa);m=m+Math.imul(na,ta)|0;t=Math.imul(na,Pa);W=W+Math.imul(L,ma)|0;m=m+Math.imul(L,Zb)|0;m=m+Math.imul(wa,ma)|0;t=t+Math.imul(wa,Zb)|0;W=W+Math.imul(U,Za)|0;m=m+Math.imul(U,Db)|0;m=m+Math.imul(T,Za)|0;t=t+Math.imul(T,Db)|0;var pi=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(pi>>>26)|0;pi&=67108863;W=Math.imul(Ga,ta);m=Math.imul(Ga,
Pa);m=m+Math.imul(da,ta)|0;t=Math.imul(da,Pa);W=W+Math.imul(Y,ma)|0;m=m+Math.imul(Y,Zb)|0;m=m+Math.imul(na,ma)|0;t=t+Math.imul(na,Zb)|0;W=W+Math.imul(L,Za)|0;m=m+Math.imul(L,Db)|0;m=m+Math.imul(wa,Za)|0;t=t+Math.imul(wa,Db)|0;W=W+Math.imul(U,Pb)|0;m=m+Math.imul(U,wc)|0;m=m+Math.imul(T,Pb)|0;t=t+Math.imul(T,wc)|0;var ad=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ad>>>26)|0;ad&=67108863;W=Math.imul(ea,ta);m=Math.imul(ea,Pa);m=m+Math.imul(Oa,ta)|0;t=Math.imul(Oa,Pa);W=W+Math.imul(Ga,ma)|0;m=m+Math.imul(Ga,
Zb)|0;m=m+Math.imul(da,ma)|0;t=t+Math.imul(da,Zb)|0;W=W+Math.imul(Y,Za)|0;m=m+Math.imul(Y,Db)|0;m=m+Math.imul(na,Za)|0;t=t+Math.imul(na,Db)|0;W=W+Math.imul(L,Pb)|0;m=m+Math.imul(L,wc)|0;m=m+Math.imul(wa,Pb)|0;t=t+Math.imul(wa,wc)|0;W=W+Math.imul(U,sc)|0;m=m+Math.imul(U,Xc)|0;m=m+Math.imul(T,sc)|0;t=t+Math.imul(T,Xc)|0;var bd=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(bd>>>26)|0;bd&=67108863;W=Math.imul(ia,ta);m=Math.imul(ia,Pa);m=m+Math.imul(eb,ta)|0;t=Math.imul(eb,Pa);W=W+Math.imul(ea,ma)|0;m=m+
Math.imul(ea,Zb)|0;m=m+Math.imul(Oa,ma)|0;t=t+Math.imul(Oa,Zb)|0;W=W+Math.imul(Ga,Za)|0;m=m+Math.imul(Ga,Db)|0;m=m+Math.imul(da,Za)|0;t=t+Math.imul(da,Db)|0;W=W+Math.imul(Y,Pb)|0;m=m+Math.imul(Y,wc)|0;m=m+Math.imul(na,Pb)|0;t=t+Math.imul(na,wc)|0;W=W+Math.imul(L,sc)|0;m=m+Math.imul(L,Xc)|0;m=m+Math.imul(wa,sc)|0;t=t+Math.imul(wa,Xc)|0;W=W+Math.imul(U,Lc)|0;m=m+Math.imul(U,hd)|0;m=m+Math.imul(T,Lc)|0;t=t+Math.imul(T,hd)|0;var qi=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(qi>>>26)|0;qi&=67108863;W=
Math.imul(Va,ta);m=Math.imul(Va,Pa);m=m+Math.imul(Bb,ta)|0;t=Math.imul(Bb,Pa);W=W+Math.imul(ia,ma)|0;m=m+Math.imul(ia,Zb)|0;m=m+Math.imul(eb,ma)|0;t=t+Math.imul(eb,Zb)|0;W=W+Math.imul(ea,Za)|0;m=m+Math.imul(ea,Db)|0;m=m+Math.imul(Oa,Za)|0;t=t+Math.imul(Oa,Db)|0;W=W+Math.imul(Ga,Pb)|0;m=m+Math.imul(Ga,wc)|0;m=m+Math.imul(da,Pb)|0;t=t+Math.imul(da,wc)|0;W=W+Math.imul(Y,sc)|0;m=m+Math.imul(Y,Xc)|0;m=m+Math.imul(na,sc)|0;t=t+Math.imul(na,Xc)|0;W=W+Math.imul(L,Lc)|0;m=m+Math.imul(L,hd)|0;m=m+Math.imul(wa,
Lc)|0;t=t+Math.imul(wa,hd)|0;W=W+Math.imul(U,Qc)|0;m=m+Math.imul(U,ld)|0;m=m+Math.imul(T,Qc)|0;t=t+Math.imul(T,ld)|0;var ei=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ei>>>26)|0;ei&=67108863;W=Math.imul(Sa,ta);m=Math.imul(Sa,Pa);m=m+Math.imul(sa,ta)|0;t=Math.imul(sa,Pa);W=W+Math.imul(Va,ma)|0;m=m+Math.imul(Va,Zb)|0;m=m+Math.imul(Bb,ma)|0;t=t+Math.imul(Bb,Zb)|0;W=W+Math.imul(ia,Za)|0;m=m+Math.imul(ia,Db)|0;m=m+Math.imul(eb,Za)|0;t=t+Math.imul(eb,Db)|0;W=W+Math.imul(ea,Pb)|0;m=m+Math.imul(ea,wc)|0;
m=m+Math.imul(Oa,Pb)|0;t=t+Math.imul(Oa,wc)|0;W=W+Math.imul(Ga,sc)|0;m=m+Math.imul(Ga,Xc)|0;m=m+Math.imul(da,sc)|0;t=t+Math.imul(da,Xc)|0;W=W+Math.imul(Y,Lc)|0;m=m+Math.imul(Y,hd)|0;m=m+Math.imul(na,Lc)|0;t=t+Math.imul(na,hd)|0;W=W+Math.imul(L,Qc)|0;m=m+Math.imul(L,ld)|0;m=m+Math.imul(wa,Qc)|0;t=t+Math.imul(wa,ld)|0;W=W+Math.imul(U,Wc)|0;m=m+Math.imul(U,od)|0;m=m+Math.imul(T,Wc)|0;t=t+Math.imul(T,od)|0;var Zh=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Zh>>>26)|0;Zh&=67108863;W=Math.imul(Z,ta);m=Math.imul(Z,
Pa);m=m+Math.imul(Da,ta)|0;t=Math.imul(Da,Pa);W=W+Math.imul(Sa,ma)|0;m=m+Math.imul(Sa,Zb)|0;m=m+Math.imul(sa,ma)|0;t=t+Math.imul(sa,Zb)|0;W=W+Math.imul(Va,Za)|0;m=m+Math.imul(Va,Db)|0;m=m+Math.imul(Bb,Za)|0;t=t+Math.imul(Bb,Db)|0;W=W+Math.imul(ia,Pb)|0;m=m+Math.imul(ia,wc)|0;m=m+Math.imul(eb,Pb)|0;t=t+Math.imul(eb,wc)|0;W=W+Math.imul(ea,sc)|0;m=m+Math.imul(ea,Xc)|0;m=m+Math.imul(Oa,sc)|0;t=t+Math.imul(Oa,Xc)|0;W=W+Math.imul(Ga,Lc)|0;m=m+Math.imul(Ga,hd)|0;m=m+Math.imul(da,Lc)|0;t=t+Math.imul(da,hd)|
0;W=W+Math.imul(Y,Qc)|0;m=m+Math.imul(Y,ld)|0;m=m+Math.imul(na,Qc)|0;t=t+Math.imul(na,ld)|0;W=W+Math.imul(L,Wc)|0;m=m+Math.imul(L,od)|0;m=m+Math.imul(wa,Wc)|0;t=t+Math.imul(wa,od)|0;W=W+Math.imul(U,Yc)|0;m=m+Math.imul(U,Vc)|0;m=m+Math.imul(T,Yc)|0;t=t+Math.imul(T,Vc)|0;var xi=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(xi>>>26)|0;xi&=67108863;W=Math.imul(B,ta);m=Math.imul(B,Pa);m=m+Math.imul(X,ta)|0;t=Math.imul(X,Pa);W=W+Math.imul(Z,ma)|0;m=m+Math.imul(Z,Zb)|0;m=m+Math.imul(Da,ma)|0;t=t+Math.imul(Da,
Zb)|0;W=W+Math.imul(Sa,Za)|0;m=m+Math.imul(Sa,Db)|0;m=m+Math.imul(sa,Za)|0;t=t+Math.imul(sa,Db)|0;W=W+Math.imul(Va,Pb)|0;m=m+Math.imul(Va,wc)|0;m=m+Math.imul(Bb,Pb)|0;t=t+Math.imul(Bb,wc)|0;W=W+Math.imul(ia,sc)|0;m=m+Math.imul(ia,Xc)|0;m=m+Math.imul(eb,sc)|0;t=t+Math.imul(eb,Xc)|0;W=W+Math.imul(ea,Lc)|0;m=m+Math.imul(ea,hd)|0;m=m+Math.imul(Oa,Lc)|0;t=t+Math.imul(Oa,hd)|0;W=W+Math.imul(Ga,Qc)|0;m=m+Math.imul(Ga,ld)|0;m=m+Math.imul(da,Qc)|0;t=t+Math.imul(da,ld)|0;W=W+Math.imul(Y,Wc)|0;m=m+Math.imul(Y,
od)|0;m=m+Math.imul(na,Wc)|0;t=t+Math.imul(na,od)|0;W=W+Math.imul(L,Yc)|0;m=m+Math.imul(L,Vc)|0;m=m+Math.imul(wa,Yc)|0;t=t+Math.imul(wa,Vc)|0;W=W+Math.imul(U,A)|0;m=m+Math.imul(U,cd)|0;m=m+Math.imul(T,A)|0;t=t+Math.imul(T,cd)|0;U=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(U>>>26)|0;U&=67108863;W=Math.imul(B,ma);m=Math.imul(B,Zb);m=m+Math.imul(X,ma)|0;t=Math.imul(X,Zb);W=W+Math.imul(Z,Za)|0;m=m+Math.imul(Z,Db)|0;m=m+Math.imul(Da,Za)|0;t=t+Math.imul(Da,Db)|0;W=W+Math.imul(Sa,Pb)|0;m=m+Math.imul(Sa,
wc)|0;m=m+Math.imul(sa,Pb)|0;t=t+Math.imul(sa,wc)|0;W=W+Math.imul(Va,sc)|0;m=m+Math.imul(Va,Xc)|0;m=m+Math.imul(Bb,sc)|0;t=t+Math.imul(Bb,Xc)|0;W=W+Math.imul(ia,Lc)|0;m=m+Math.imul(ia,hd)|0;m=m+Math.imul(eb,Lc)|0;t=t+Math.imul(eb,hd)|0;W=W+Math.imul(ea,Qc)|0;m=m+Math.imul(ea,ld)|0;m=m+Math.imul(Oa,Qc)|0;t=t+Math.imul(Oa,ld)|0;W=W+Math.imul(Ga,Wc)|0;m=m+Math.imul(Ga,od)|0;m=m+Math.imul(da,Wc)|0;t=t+Math.imul(da,od)|0;W=W+Math.imul(Y,Yc)|0;m=m+Math.imul(Y,Vc)|0;m=m+Math.imul(na,Yc)|0;t=t+Math.imul(na,
Vc)|0;W=W+Math.imul(L,A)|0;m=m+Math.imul(L,cd)|0;m=m+Math.imul(wa,A)|0;t=t+Math.imul(wa,cd)|0;L=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(L>>>26)|0;L&=67108863;W=Math.imul(B,Za);m=Math.imul(B,Db);m=m+Math.imul(X,Za)|0;t=Math.imul(X,Db);W=W+Math.imul(Z,Pb)|0;m=m+Math.imul(Z,wc)|0;m=m+Math.imul(Da,Pb)|0;t=t+Math.imul(Da,wc)|0;W=W+Math.imul(Sa,sc)|0;m=m+Math.imul(Sa,Xc)|0;m=m+Math.imul(sa,sc)|0;t=t+Math.imul(sa,Xc)|0;W=W+Math.imul(Va,Lc)|0;m=m+Math.imul(Va,hd)|0;m=m+Math.imul(Bb,Lc)|0;t=t+Math.imul(Bb,
hd)|0;W=W+Math.imul(ia,Qc)|0;m=m+Math.imul(ia,ld)|0;m=m+Math.imul(eb,Qc)|0;t=t+Math.imul(eb,ld)|0;W=W+Math.imul(ea,Wc)|0;m=m+Math.imul(ea,od)|0;m=m+Math.imul(Oa,Wc)|0;t=t+Math.imul(Oa,od)|0;W=W+Math.imul(Ga,Yc)|0;m=m+Math.imul(Ga,Vc)|0;m=m+Math.imul(da,Yc)|0;t=t+Math.imul(da,Vc)|0;W=W+Math.imul(Y,A)|0;m=m+Math.imul(Y,cd)|0;m=m+Math.imul(na,A)|0;t=t+Math.imul(na,cd)|0;Y=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Y>>>26)|0;Y&=67108863;W=Math.imul(B,Pb);m=Math.imul(B,wc);m=m+Math.imul(X,Pb)|0;t=Math.imul(X,
wc);W=W+Math.imul(Z,sc)|0;m=m+Math.imul(Z,Xc)|0;m=m+Math.imul(Da,sc)|0;t=t+Math.imul(Da,Xc)|0;W=W+Math.imul(Sa,Lc)|0;m=m+Math.imul(Sa,hd)|0;m=m+Math.imul(sa,Lc)|0;t=t+Math.imul(sa,hd)|0;W=W+Math.imul(Va,Qc)|0;m=m+Math.imul(Va,ld)|0;m=m+Math.imul(Bb,Qc)|0;t=t+Math.imul(Bb,ld)|0;W=W+Math.imul(ia,Wc)|0;m=m+Math.imul(ia,od)|0;m=m+Math.imul(eb,Wc)|0;t=t+Math.imul(eb,od)|0;W=W+Math.imul(ea,Yc)|0;m=m+Math.imul(ea,Vc)|0;m=m+Math.imul(Oa,Yc)|0;t=t+Math.imul(Oa,Vc)|0;W=W+Math.imul(Ga,A)|0;m=m+Math.imul(Ga,
cd)|0;m=m+Math.imul(da,A)|0;t=t+Math.imul(da,cd)|0;Ga=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Ga>>>26)|0;Ga&=67108863;W=Math.imul(B,sc);m=Math.imul(B,Xc);m=m+Math.imul(X,sc)|0;t=Math.imul(X,Xc);W=W+Math.imul(Z,Lc)|0;m=m+Math.imul(Z,hd)|0;m=m+Math.imul(Da,Lc)|0;t=t+Math.imul(Da,hd)|0;W=W+Math.imul(Sa,Qc)|0;m=m+Math.imul(Sa,ld)|0;m=m+Math.imul(sa,Qc)|0;t=t+Math.imul(sa,ld)|0;W=W+Math.imul(Va,Wc)|0;m=m+Math.imul(Va,od)|0;m=m+Math.imul(Bb,Wc)|0;t=t+Math.imul(Bb,od)|0;W=W+Math.imul(ia,Yc)|0;m=m+Math.imul(ia,
Vc)|0;m=m+Math.imul(eb,Yc)|0;t=t+Math.imul(eb,Vc)|0;W=W+Math.imul(ea,A)|0;m=m+Math.imul(ea,cd)|0;m=m+Math.imul(Oa,A)|0;t=t+Math.imul(Oa,cd)|0;ea=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ea>>>26)|0;ea&=67108863;W=Math.imul(B,Lc);m=Math.imul(B,hd);m=m+Math.imul(X,Lc)|0;t=Math.imul(X,hd);W=W+Math.imul(Z,Qc)|0;m=m+Math.imul(Z,ld)|0;m=m+Math.imul(Da,Qc)|0;t=t+Math.imul(Da,ld)|0;W=W+Math.imul(Sa,Wc)|0;m=m+Math.imul(Sa,od)|0;m=m+Math.imul(sa,Wc)|0;t=t+Math.imul(sa,od)|0;W=W+Math.imul(Va,Yc)|0;m=m+Math.imul(Va,
Vc)|0;m=m+Math.imul(Bb,Yc)|0;t=t+Math.imul(Bb,Vc)|0;W=W+Math.imul(ia,A)|0;m=m+Math.imul(ia,cd)|0;m=m+Math.imul(eb,A)|0;t=t+Math.imul(eb,cd)|0;ia=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(ia>>>26)|0;ia&=67108863;W=Math.imul(B,Qc);m=Math.imul(B,ld);m=m+Math.imul(X,Qc)|0;t=Math.imul(X,ld);W=W+Math.imul(Z,Wc)|0;m=m+Math.imul(Z,od)|0;m=m+Math.imul(Da,Wc)|0;t=t+Math.imul(Da,od)|0;W=W+Math.imul(Sa,Yc)|0;m=m+Math.imul(Sa,Vc)|0;m=m+Math.imul(sa,Yc)|0;t=t+Math.imul(sa,Vc)|0;W=W+Math.imul(Va,A)|0;m=m+Math.imul(Va,
cd)|0;m=m+Math.imul(Bb,A)|0;t=t+Math.imul(Bb,cd)|0;Va=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Va>>>26)|0;Va&=67108863;W=Math.imul(B,Wc);m=Math.imul(B,od);m=m+Math.imul(X,Wc)|0;t=Math.imul(X,od);W=W+Math.imul(Z,Yc)|0;m=m+Math.imul(Z,Vc)|0;m=m+Math.imul(Da,Yc)|0;t=t+Math.imul(Da,Vc)|0;W=W+Math.imul(Sa,A)|0;m=m+Math.imul(Sa,cd)|0;m=m+Math.imul(sa,A)|0;t=t+Math.imul(sa,cd)|0;Sa=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Sa>>>26)|0;Sa&=67108863;W=Math.imul(B,Yc);m=Math.imul(B,Vc);m=m+Math.imul(X,Yc)|
0;t=Math.imul(X,Vc);W=W+Math.imul(Z,A)|0;m=m+Math.imul(Z,cd)|0;m=m+Math.imul(Da,A)|0;t=t+Math.imul(Da,cd)|0;Z=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(Z>>>26)|0;Z&=67108863;W=Math.imul(B,A);m=Math.imul(B,cd);m=m+Math.imul(X,A)|0;t=Math.imul(X,cd);T=(F+W|0)+((m&8191)<<13)|0;F=(t+(m>>>13)|0)+(T>>>26)|0;H[0]=af;H[1]=zc;H[2]=pi;H[3]=ad;H[4]=bd;H[5]=qi;H[6]=ei;H[7]=Zh;H[8]=xi;H[9]=U;H[10]=L;H[11]=Y;H[12]=Ga;H[13]=ea;H[14]=ia;H[15]=Va;H[16]=Sa;H[17]=Z;H[18]=T&67108863;0!==F&&(H[19]=F,u.length++);return u};
Math.imul||(N=h);l.prototype.mulTo=function(m,t){var u=(this||nb).length+m.length;if(10===(this||nb).length&&10===m.length)m=N(this||nb,m,t);else if(63>u)m=h(this||nb,m,t);else if(1024>u){u=this||nb;t.negative=m.negative^u.negative;t.length=u.length+m.length;for(var B=0,A=0,H=0;H<t.length-1;H++){var F=A;A=0;B&=67108863;for(var L=Math.min(H,m.length-1),U=Math.max(0,H-u.length+1);U<=L;U++){var T=(u.words[H-U]|0)*(m.words[U]|0),Y=T&67108863;F=F+(T/67108864|0)|0;Y=Y+B|0;B=Y&67108863;F=F+(Y>>>26)|0;A+=
F>>>26;F&=67108863}t.words[H]=B;B=F}0!==B?t.words[H]=B:t.length--;m=t.strip()}else u=this||nb,m=(new a).mulp(u,m,t);return m};a.prototype.makeRBT=function(m){for(var t=Array(m),u=l.prototype._countBits(m)-1,B=0;B<m;B++)t[B]=this.revBin(B,u,m);return t};a.prototype.revBin=function(m,t,u){if(0===m||m===u-1)return m;for(var B=u=0;B<t;B++)u|=(m&1)<<t-B-1,m>>=1;return u};a.prototype.permute=function(m,t,u,B,A,H){for(var F=0;F<H;F++)B[F]=t[m[F]],A[F]=u[m[F]]};a.prototype.transform=function(m,t,u,B,A,H){this.permute(H,
m,t,u,B,A);for(m=1;m<A;m<<=1){t=m<<1;H=Math.cos(2*Math.PI/t);for(var F=Math.sin(2*Math.PI/t),L=0;L<A;L+=t)for(var U=H,T=F,Y=0;Y<m;Y++){var wa=u[L+Y],Ga=B[L+Y],na=u[L+Y+m],ea=B[L+Y+m],da=U*na-T*ea;ea=U*ea+T*na;na=da;u[L+Y]=wa+na;B[L+Y]=Ga+ea;u[L+Y+m]=wa-na;B[L+Y+m]=Ga-ea;Y!==t&&(da=H*U-F*T,T=H*T+F*U,U=da)}}};a.prototype.guessLen13b=function(m,t){m=Math.max(t,m)|1;t=m&1;var u=0;for(m=m/2|0;m;m>>>=1)u++;return 1<<u+1+t};a.prototype.conjugate=function(m,t,u){if(!(1>=u))for(var B=0;B<u/2;B++){var A=m[B];
m[B]=m[u-B-1];m[u-B-1]=A;A=t[B];t[B]=-t[u-B-1];t[u-B-1]=-A}};a.prototype.normalize13b=function(m,t){for(var u=0,B=0;B<t/2;B++)u=8192*Math.round(m[2*B+1]/t)+Math.round(m[2*B]/t)+u,m[B]=u&67108863,u=67108864>u?0:u/67108864|0;return m};a.prototype.convert13b=function(m,t,u,B){for(var A=0,H=0;H<t;H++)A+=m[H]|0,u[2*H]=A&8191,A>>>=13,u[2*H+1]=A&8191,A>>>=13;for(H=2*t;H<B;++H)u[H]=0;k(0===A);k(0===(A&-8192))};a.prototype.stub=function(m){for(var t=Array(m),u=0;u<m;u++)t[u]=0;return t};a.prototype.mulp=function(m,
t,u){var B=2*this.guessLen13b(m.length,t.length),A=this.makeRBT(B),H=this.stub(B),F=Array(B),L=Array(B),U=Array(B),T=Array(B),Y=Array(B),wa=Array(B),Ga=u.words;Ga.length=B;this.convert13b(m.words,m.length,F,B);this.convert13b(t.words,t.length,T,B);this.transform(F,H,L,U,B,A);this.transform(T,H,Y,wa,B,A);for(F=0;F<B;F++)T=L[F]*Y[F]-U[F]*wa[F],U[F]=L[F]*wa[F]+U[F]*Y[F],L[F]=T;this.conjugate(L,U,B);this.transform(L,U,Ga,H,B,A);this.conjugate(Ga,H,B);this.normalize13b(Ga,B);u.negative=m.negative^t.negative;
u.length=m.length+t.length;return u.strip()};l.prototype.mul=function(m){var t=new l(null);t.words=Array((this||nb).length+m.length);return this.mulTo(m,t)};l.prototype.mulf=function(m){var t=new l(null);t.words=Array((this||nb).length+m.length);var u=this||nb;return(new a).mulp(u,m,t)};l.prototype.imul=function(m){return this.clone().mulTo(m,this||nb)};l.prototype.imuln=function(m){k("number"===typeof m);k(67108864>m);for(var t=0,u=0;u<(this||nb).length;u++){var B=((this||nb).words[u]|0)*m,A=(B&
67108863)+(t&67108863);t>>=26;t+=B/67108864|0;t+=A>>>26;(this||nb).words[u]=A&67108863}0!==t&&((this||nb).words[u]=t,(this||nb).length++);return this||nb};l.prototype.muln=function(m){return this.clone().imuln(m)};l.prototype.sqr=function(){return this.mul(this||nb)};l.prototype.isqr=function(){return this.imul(this.clone())};l.prototype.pow=function(m){for(var t=Array(m.bitLength()),u=0;u<t.length;u++){var B=u%26;t[u]=(m.words[u/26|0]&1<<B)>>>B}if(0===t.length)return new l(1);m=this||nb;for(u=0;u<
t.length&&0===t[u];u++,m=m.sqr());if(++u<t.length)for(B=m.sqr();u<t.length;u++,B=B.sqr())0!==t[u]&&(m=m.mul(B));return m};l.prototype.iushln=function(m){k("number"===typeof m&&0<=m);var t=m%26;m=(m-t)/26;var u=67108863>>>26-t<<26-t,B;if(0!==t){var A=0;for(B=0;B<(this||nb).length;B++){var H=(this||nb).words[B]&u;(this||nb).words[B]=((this||nb).words[B]|0)-H<<t|A;A=H>>>26-t}A&&((this||nb).words[B]=A,(this||nb).length++)}if(0!==m){for(B=(this||nb).length-1;0<=B;B--)(this||nb).words[B+m]=(this||nb).words[B];
for(B=0;B<m;B++)(this||nb).words[B]=0;(this||nb).length+=m}return this.strip()};l.prototype.ishln=function(m){k(0===(this||nb).negative);return this.iushln(m)};l.prototype.iushrn=function(m,t,u){k("number"===typeof m&&0<=m);var B=m%26,A=Math.min((m-B)/26,(this||nb).length);m=67108863^67108863>>>B<<B;t=Math.max(0,(t?(t-t%26)/26:0)-A);if(u){for(var H=0;H<A;H++)u.words[H]=(this||nb).words[H];u.length=A}if(0!==A)if((this||nb).length>A)for((this||nb).length-=A,H=0;H<(this||nb).length;H++)(this||nb).words[H]=
(this||nb).words[H+A];else(this||nb).words[0]=0,(this||nb).length=1;A=0;for(H=(this||nb).length-1;0<=H&&(0!==A||H>=t);H--){var F=(this||nb).words[H]|0;(this||nb).words[H]=A<<26-B|F>>>B;A=F&m}u&&0!==A&&(u.words[u.length++]=A);0===(this||nb).length&&((this||nb).words[0]=0,(this||nb).length=1);return this.strip()};l.prototype.ishrn=function(m,t,u){k(0===(this||nb).negative);return this.iushrn(m,t,u)};l.prototype.shln=function(m){return this.clone().ishln(m)};l.prototype.ushln=function(m){return this.clone().iushln(m)};
l.prototype.shrn=function(m){return this.clone().ishrn(m)};l.prototype.ushrn=function(m){return this.clone().iushrn(m)};l.prototype.testn=function(m){k("number"===typeof m&&0<=m);var t=m%26;m=(m-t)/26;return(this||nb).length<=m?!1:!!((this||nb).words[m]&1<<t)};l.prototype.imaskn=function(m){k("number"===typeof m&&0<=m);var t=m%26;m=(m-t)/26;k(0===(this||nb).negative,"imaskn works only with positive numbers");if((this||nb).length<=m)return this||nb;0!==t&&m++;(this||nb).length=Math.min(m,(this||nb).length);
0!==t&&((this||nb).words[(this||nb).length-1]&=67108863^67108863>>>t<<t);return this.strip()};l.prototype.maskn=function(m){return this.clone().imaskn(m)};l.prototype.iaddn=function(m){k("number"===typeof m);k(67108864>m);if(0>m)return this.isubn(-m);if(0!==(this||nb).negative){if(1===(this||nb).length&&((this||nb).words[0]|0)<m)return(this||nb).words[0]=m-((this||nb).words[0]|0),(this||nb).negative=0,this||nb;(this||nb).negative=0;this.isubn(m);(this||nb).negative=1;return this||nb}return this._iaddn(m)};
l.prototype._iaddn=function(m){(this||nb).words[0]+=m;for(m=0;m<(this||nb).length&&67108864<=(this||nb).words[m];m++)(this||nb).words[m]-=67108864,m===(this||nb).length-1?(this||nb).words[m+1]=1:(this||nb).words[m+1]++;(this||nb).length=Math.max((this||nb).length,m+1);return this||nb};l.prototype.isubn=function(m){k("number"===typeof m);k(67108864>m);if(0>m)return this.iaddn(-m);if(0!==(this||nb).negative)return(this||nb).negative=0,this.iaddn(m),(this||nb).negative=1,this||nb;(this||nb).words[0]-=
m;if(1===(this||nb).length&&0>(this||nb).words[0])(this||nb).words[0]=-(this||nb).words[0],(this||nb).negative=1;else for(m=0;m<(this||nb).length&&0>(this||nb).words[m];m++)(this||nb).words[m]+=67108864,--(this||nb).words[m+1];return this.strip()};l.prototype.addn=function(m){return this.clone().iaddn(m)};l.prototype.subn=function(m){return this.clone().isubn(m)};l.prototype.iabs=function(){(this||nb).negative=0;return this||nb};l.prototype.abs=function(){return this.clone().iabs()};l.prototype._ishlnsubmul=
function(m,t,u){var B;this._expand(m.length+u);var A=0;for(B=0;B<m.length;B++){var H=((this||nb).words[B+u]|0)+A;A=(m.words[B]|0)*t;H-=A&67108863;A=(H>>26)-(A/67108864|0);(this||nb).words[B+u]=H&67108863}for(;B<(this||nb).length-u;B++)H=((this||nb).words[B+u]|0)+A,A=H>>26,(this||nb).words[B+u]=H&67108863;if(0===A)return this.strip();k(-1===A);for(B=A=0;B<(this||nb).length;B++)H=-((this||nb).words[B]|0)+A,A=H>>26,(this||nb).words[B]=H&67108863;(this||nb).negative=1;return this.strip()};l.prototype._wordDiv=
function(m,t){var u=this.clone(),B=m,A=B.words[B.length-1]|0;m=26-this._countBits(A);0!==m&&(B=B.ushln(m),u.iushln(m),A=B.words[B.length-1]|0);var H=u.length-B.length;if("mod"!==t){var F=new l(null);F.length=H+1;F.words=Array(F.length);for(var L=0;L<F.length;L++)F.words[L]=0}L=u.clone()._ishlnsubmul(B,1,H);0===L.negative&&(u=L,F&&(F.words[H]=1));for(--H;0<=H;H--){L=67108864*(u.words[B.length+H]|0)+(u.words[B.length+H-1]|0);L=Math.min(L/A|0,67108863);for(u._ishlnsubmul(B,L,H);0!==u.negative;)L--,u.negative=
0,u._ishlnsubmul(B,1,H),u.isZero()||(u.negative^=1);F&&(F.words[H]=L)}F&&F.strip();u.strip();"div"!==t&&0!==m&&u.iushrn(m);return{div:F||null,mod:u}};l.prototype.divmod=function(m,t,u){k(!m.isZero());if(this.isZero())return{div:new l(0),mod:new l(0)};var B;if(0!==(this||nb).negative&&0===m.negative){var A=this.neg().divmod(m,t);"mod"!==t&&(B=A.div.neg());if("div"!==t){var H=A.mod.neg();u&&0!==H.negative&&H.iadd(m)}return{div:B,mod:H}}return 0===(this||nb).negative&&0!==m.negative?(A=this.divmod(m.neg(),
t),"mod"!==t&&(B=A.div.neg()),{div:B,mod:A.mod}):0!==((this||nb).negative&m.negative)?(A=this.neg().divmod(m.neg(),t),"div"!==t&&(H=A.mod.neg(),u&&0!==H.negative&&H.isub(m)),{div:A.div,mod:H}):m.length>(this||nb).length||0>this.cmp(m)?{div:new l(0),mod:this||nb}:1===m.length?"div"===t?{div:this.divn(m.words[0]),mod:null}:"mod"===t?{div:null,mod:new l(this.modn(m.words[0]))}:{div:this.divn(m.words[0]),mod:new l(this.modn(m.words[0]))}:this._wordDiv(m,t)};l.prototype.div=function(m){return this.divmod(m,
"div",!1).div};l.prototype.mod=function(m){return this.divmod(m,"mod",!1).mod};l.prototype.umod=function(m){return this.divmod(m,"mod",!0).mod};l.prototype.divRound=function(m){var t=this.divmod(m);if(t.mod.isZero())return t.div;var u=0!==t.div.negative?t.mod.isub(m):t.mod,B=m.ushrn(1);m=m.andln(1);u=u.cmp(B);return 0>u||1===m&&0===u?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)};l.prototype.modn=function(m){k(67108863>=m);for(var t=67108864%m,u=0,B=(this||nb).length-1;0<=B;B--)u=(t*u+((this||
nb).words[B]|0))%m;return u};l.prototype.idivn=function(m){k(67108863>=m);for(var t=0,u=(this||nb).length-1;0<=u;u--)t=((this||nb).words[u]|0)+67108864*t,(this||nb).words[u]=t/m|0,t%=m;return this.strip()};l.prototype.divn=function(m){return this.clone().idivn(m)};l.prototype.egcd=function(m){k(0===m.negative);k(!m.isZero());var t=this||nb,u=m.clone();t=0!==t.negative?t.umod(m):t.clone();m=new l(1);for(var B=new l(0),A=new l(0),H=new l(1),F=0;t.isEven()&&u.isEven();)t.iushrn(1),u.iushrn(1),++F;for(var L=
u.clone(),U=t.clone();!t.isZero();){for(var T=0,Y=1;0===(t.words[0]&Y)&&26>T;++T,Y<<=1);if(0<T)for(t.iushrn(T);0<T--;){if(m.isOdd()||B.isOdd())m.iadd(L),B.isub(U);m.iushrn(1);B.iushrn(1)}T=0;for(Y=1;0===(u.words[0]&Y)&&26>T;++T,Y<<=1);if(0<T)for(u.iushrn(T);0<T--;){if(A.isOdd()||H.isOdd())A.iadd(L),H.isub(U);A.iushrn(1);H.iushrn(1)}0<=t.cmp(u)?(t.isub(u),m.isub(A),B.isub(H)):(u.isub(t),A.isub(m),H.isub(B))}return{a:A,b:H,gcd:u.iushln(F)}};l.prototype._invmp=function(m){k(0===m.negative);k(!m.isZero());
var t=this||nb,u=m.clone();t=0!==t.negative?t.umod(m):t.clone();for(var B=new l(1),A=new l(0),H=u.clone();0<t.cmpn(1)&&0<u.cmpn(1);){for(var F=0,L=1;0===(t.words[0]&L)&&26>F;++F,L<<=1);if(0<F)for(t.iushrn(F);0<F--;)B.isOdd()&&B.iadd(H),B.iushrn(1);F=0;for(L=1;0===(u.words[0]&L)&&26>F;++F,L<<=1);if(0<F)for(u.iushrn(F);0<F--;)A.isOdd()&&A.iadd(H),A.iushrn(1);0<=t.cmp(u)?(t.isub(u),B.isub(A)):(u.isub(t),A.isub(B))}t=0===t.cmpn(1)?B:A;0>t.cmpn(0)&&t.iadd(m);return t};l.prototype.gcd=function(m){if(this.isZero())return m.abs();
if(m.isZero())return this.abs();var t=this.clone();m=m.clone();t.negative=0;for(var u=m.negative=0;t.isEven()&&m.isEven();u++)t.iushrn(1),m.iushrn(1);do{for(;t.isEven();)t.iushrn(1);for(;m.isEven();)m.iushrn(1);var B=t.cmp(m);if(0>B)B=t,t=m,m=B;else if(0===B||0===m.cmpn(1))break;t.isub(m)}while(1);return m.iushln(u)};l.prototype.invm=function(m){return this.egcd(m).a.umod(m)};l.prototype.isEven=function(){return 0===((this||nb).words[0]&1)};l.prototype.isOdd=function(){return 1===((this||nb).words[0]&
1)};l.prototype.andln=function(m){return(this||nb).words[0]&m};l.prototype.bincn=function(m){k("number"===typeof m);var t=m%26;m=(m-t)/26;t=1<<t;if((this||nb).length<=m)return this._expand(m+1),(this||nb).words[m]|=t,this||nb;for(;0!==t&&m<(this||nb).length;m++){var u=(this||nb).words[m]|0;u+=t;t=u>>>26;u&=67108863;(this||nb).words[m]=u}0!==t&&((this||nb).words[m]=t,(this||nb).length++);return this||nb};l.prototype.isZero=function(){return 1===(this||nb).length&&0===(this||nb).words[0]};l.prototype.cmpn=
function(m){var t=0>m;if(0!==(this||nb).negative&&!t)return-1;if(0===(this||nb).negative&&t)return 1;this.strip();1<(this||nb).length?m=1:(t&&(m=-m),k(67108863>=m,"Number is too big"),t=(this||nb).words[0]|0,m=t===m?0:t<m?-1:1);return 0!==(this||nb).negative?-m|0:m};l.prototype.cmp=function(m){if(0!==(this||nb).negative&&0===m.negative)return-1;if(0===(this||nb).negative&&0!==m.negative)return 1;m=this.ucmp(m);return 0!==(this||nb).negative?-m|0:m};l.prototype.ucmp=function(m){if((this||nb).length>
m.length)return 1;if((this||nb).length<m.length)return-1;for(var t=0,u=(this||nb).length-1;0<=u;u--){var B=(this||nb).words[u]|0,A=m.words[u]|0;if(B!==A){B<A?t=-1:B>A&&(t=1);break}}return t};l.prototype.gtn=function(m){return 1===this.cmpn(m)};l.prototype.gt=function(m){return 1===this.cmp(m)};l.prototype.gten=function(m){return 0<=this.cmpn(m)};l.prototype.gte=function(m){return 0<=this.cmp(m)};l.prototype.ltn=function(m){return-1===this.cmpn(m)};l.prototype.lt=function(m){return-1===this.cmp(m)};
l.prototype.lten=function(m){return 0>=this.cmpn(m)};l.prototype.lte=function(m){return 0>=this.cmp(m)};l.prototype.eqn=function(m){return 0===this.cmpn(m)};l.prototype.eq=function(m){return 0===this.cmp(m)};l.red=function(m){return new y(m)};l.prototype.toRed=function(m){k(!(this||nb).red,"Already a number in reduction context");k(0===(this||nb).negative,"red works only with positives");return m.convertTo(this||nb)._forceRed(m)};l.prototype.fromRed=function(){k((this||nb).red,"fromRed works only with numbers in reduction context");
return(this||nb).red.convertFrom(this||nb)};l.prototype._forceRed=function(m){(this||nb).red=m;return this||nb};l.prototype.forceRed=function(m){k(!(this||nb).red,"Already a number in reduction context");return this._forceRed(m)};l.prototype.redAdd=function(m){k((this||nb).red,"redAdd works only with red numbers");return(this||nb).red.add(this||nb,m)};l.prototype.redIAdd=function(m){k((this||nb).red,"redIAdd works only with red numbers");return(this||nb).red.iadd(this||nb,m)};l.prototype.redSub=function(m){k((this||
nb).red,"redSub works only with red numbers");return(this||nb).red.sub(this||nb,m)};l.prototype.redISub=function(m){k((this||nb).red,"redISub works only with red numbers");return(this||nb).red.isub(this||nb,m)};l.prototype.redShl=function(m){k((this||nb).red,"redShl works only with red numbers");return(this||nb).red.shl(this||nb,m)};l.prototype.redMul=function(m){k((this||nb).red,"redMul works only with red numbers");(this||nb).red._verify2(this||nb,m);return(this||nb).red.mul(this||nb,m)};l.prototype.redIMul=
function(m){k((this||nb).red,"redMul works only with red numbers");(this||nb).red._verify2(this||nb,m);return(this||nb).red.imul(this||nb,m)};l.prototype.redSqr=function(){k((this||nb).red,"redSqr works only with red numbers");(this||nb).red._verify1(this||nb);return(this||nb).red.sqr(this||nb)};l.prototype.redISqr=function(){k((this||nb).red,"redISqr works only with red numbers");(this||nb).red._verify1(this||nb);return(this||nb).red.isqr(this||nb)};l.prototype.redSqrt=function(){k((this||nb).red,
"redSqrt works only with red numbers");(this||nb).red._verify1(this||nb);return(this||nb).red.sqrt(this||nb)};l.prototype.redInvm=function(){k((this||nb).red,"redInvm works only with red numbers");(this||nb).red._verify1(this||nb);return(this||nb).red.invm(this||nb)};l.prototype.redNeg=function(){k((this||nb).red,"redNeg works only with red numbers");(this||nb).red._verify1(this||nb);return(this||nb).red.neg(this||nb)};l.prototype.redPow=function(m){k((this||nb).red&&!m.red,"redPow(normalNum)");(this||
nb).red._verify1(this||nb);return(this||nb).red.pow(this||nb,m)};var aa={k256:null,p224:null,p192:null,p25519:null};e.prototype._tmp=function(){var m=new l(null);m.words=Array(Math.ceil((this||nb).n/13));return m};e.prototype.ireduce=function(m){do{this.split(m,(this||nb).tmp);m=this.imulK(m);m=m.iadd((this||nb).tmp);var t=m.bitLength()}while(t>(this||nb).n);t=t<(this||nb).n?-1:m.ucmp((this||nb).p);0===t?(m.words[0]=0,m.length=1):0<t?m.isub((this||nb).p):void 0!==m.strip?m.strip():m._strip();return m};
e.prototype.split=function(m,t){m.iushrn((this||nb).n,0,t)};e.prototype.imulK=function(m){return m.imul((this||nb).k)};f(n,e);n.prototype.split=function(m,t){for(var u=Math.min(m.length,9),B=0;B<u;B++)t.words[B]=m.words[B];t.length=u;if(9>=m.length)m.words[0]=0,m.length=1;else{u=m.words[9];t.words[t.length++]=u&4194303;for(B=10;B<m.length;B++)t=m.words[B]|0,m.words[B-10]=(t&4194303)<<4|u>>>22,u=t;u>>>=22;m.words[B-10]=u;m.length=0===u&&10<m.length?m.length-10:m.length-9}};n.prototype.imulK=function(m){m.words[m.length]=
0;m.words[m.length+1]=0;m.length+=2;for(var t=0,u=0;u<m.length;u++){var B=m.words[u]|0;t+=977*B;m.words[u]=t&67108863;t=64*B+(t/67108864|0)}0===m.words[m.length-1]&&(m.length--,0===m.words[m.length-1]&&m.length--);return m};f(q,e);f(r,e);f(v,e);v.prototype.imulK=function(m){for(var t=0,u=0;u<m.length;u++){t=19*(m.words[u]|0)+t;var B=t&67108863;t>>>=26;m.words[u]=B}0!==t&&(m.words[m.length++]=t);return m};l._prime=function(m){if(aa[m])return aa[m];if("k256"===m)var t=new n;else if("p224"===m)t=new q;
else if("p192"===m)t=new r;else if("p25519"===m)t=new v;else throw Error("Unknown prime "+m);return aa[m]=t};y.prototype._verify1=function(m){k(0===m.negative,"red works only with positives");k(m.red,"red works only with red numbers")};y.prototype._verify2=function(m,t){k(0===(m.negative|t.negative),"red works only with positives");k(m.red&&m.red===t.red,"red works only with red numbers")};y.prototype.imod=function(m){return(this||nb).prime?(this||nb).prime.ireduce(m)._forceRed(this||nb):m.umod((this||
nb).m)._forceRed(this||nb)};y.prototype.neg=function(m){return m.isZero()?m.clone():(this||nb).m.sub(m)._forceRed(this||nb)};y.prototype.add=function(m,t){this._verify2(m,t);m=m.add(t);0<=m.cmp((this||nb).m)&&m.isub((this||nb).m);return m._forceRed(this||nb)};y.prototype.iadd=function(m,t){this._verify2(m,t);m=m.iadd(t);0<=m.cmp((this||nb).m)&&m.isub((this||nb).m);return m};y.prototype.sub=function(m,t){this._verify2(m,t);m=m.sub(t);0>m.cmpn(0)&&m.iadd((this||nb).m);return m._forceRed(this||nb)};
y.prototype.isub=function(m,t){this._verify2(m,t);m=m.isub(t);0>m.cmpn(0)&&m.iadd((this||nb).m);return m};y.prototype.shl=function(m,t){this._verify1(m);return this.imod(m.ushln(t))};y.prototype.imul=function(m,t){this._verify2(m,t);return this.imod(m.imul(t))};y.prototype.mul=function(m,t){this._verify2(m,t);return this.imod(m.mul(t))};y.prototype.isqr=function(m){return this.imul(m,m.clone())};y.prototype.sqr=function(m){return this.mul(m,m)};y.prototype.sqrt=function(m){if(m.isZero())return m.clone();
var t=(this||nb).m.andln(3);k(1===t%2);if(3===t)return t=(this||nb).m.add(new l(1)).iushrn(2),this.pow(m,t);for(var u=(this||nb).m.subn(1),B=0;!u.isZero()&&0===u.andln(1);)B++,u.iushrn(1);k(!u.isZero());t=(new l(1)).toRed(this||nb);var A=t.redNeg(),H=(this||nb).m.subn(1).iushrn(1),F=(this||nb).m.bitLength();for(F=(new l(2*F*F)).toRed(this||nb);0!==this.pow(F,H).cmp(A);)F.redIAdd(A);H=this.pow(F,u);A=this.pow(m,u.addn(1).iushrn(1));m=this.pow(m,u);for(u=B;0!==m.cmp(t);){F=m;for(B=0;0!==F.cmp(t);B++)F=
F.redSqr();k(B<u);H=this.pow(H,(new l(1)).iushln(u-B-1));A=A.redMul(H);H=H.redSqr();m=m.redMul(H);u=B}return A};y.prototype.invm=function(m){m=m._invmp((this||nb).m);return 0!==m.negative?(m.negative=0,this.imod(m).redNeg()):this.imod(m)};y.prototype.pow=function(m,t){if(t.isZero())return(new l(1)).toRed(this||nb);if(0===t.cmpn(1))return m.clone();var u=Array(16);u[0]=(new l(1)).toRed(this||nb);u[1]=m;for(var B=2;B<u.length;B++)u[B]=this.mul(u[B-1],m);m=u[0];var A=0,H=0,F=t.bitLength()%26;0===F&&
(F=26);for(B=t.length-1;0<=B;B--){var L=t.words[B];for(--F;0<=F;F--){var U=L>>F&1;m!==u[0]&&(m=this.sqr(m));if(0===U&&0===A)H=0;else if(A<<=1,A|=U,H++,4===H||0===B&&0===F)m=this.mul(m,u[A]),A=H=0}F=26}return m};y.prototype.convertTo=function(m){var t=m.umod((this||nb).m);return t===m?t.clone():t};y.prototype.convertFrom=function(m){m=m.clone();m.red=null;return m};l.mont=function(m){return new D(m)};f(D,y);D.prototype.convertTo=function(m){return this.imod(m.ushln((this||nb).shift))};D.prototype.convertFrom=
function(m){m=this.imod(m.mul((this||nb).rinv));m.red=null;return m};D.prototype.imul=function(m,t){if(m.isZero()||t.isZero())return m.words[0]=0,m.length=1,m;m=m.imul(t);t=m.maskn((this||nb).shift).mul((this||nb).minv).imaskn((this||nb).shift).mul((this||nb).m);t=m=m.isub(t).iushrn((this||nb).shift);0<=m.cmp((this||nb).m)?t=m.isub((this||nb).m):0>m.cmpn(0)&&(t=m.iadd((this||nb).m));return t._forceRed(this||nb)};D.prototype.mul=function(m,t){if(m.isZero()||t.isZero())return(new l(0))._forceRed(this||
nb);m=m.mul(t);t=m.maskn((this||nb).shift).mul((this||nb).minv).imaskn((this||nb).shift).mul((this||nb).m);t=m=m.isub(t).iushrn((this||nb).shift);0<=m.cmp((this||nb).m)?t=m.isub((this||nb).m):0>m.cmpn(0)&&(t=m.iadd((this||nb).m));return t._forceRed(this||nb)};D.prototype.invm=function(m){return this.imod(m._invmp((this||nb).m).mul((this||nb).r2))._forceRed(this||nb)}})(QP,c5);return QP.exports}function d5(){if(e5)return f5;e5=!0;var g=PP(),c=Nh().Buffer;return f5=function(k,f){return c.from(k.toRed(g.mont(f.modulus)).redPow(new g(f.publicExponent)).fromRed().toArray())}}
function Jja(){if(g5)return h5;g5=!0;var g=qG(),c=zx(),k=AA(),f=W4(),l=Z4(),p=PP(),b=d5(),d=$O(),h=Nh().Buffer;return h5=function(a,e,n){var q=a.padding?a.padding:n?1:4;a=g(a);if(4===q){q=a.modulus.byteLength();var r=e.length,v=k("sha1").update(h.alloc(0)).digest(),y=v.length,D=2*y;if(r>q-D-2)throw Error("message too long");D=h.alloc(q-r-D-2);var E=q-y-1;r=c(y);e=l(h.concat([v,D,h.alloc(1,1),e],E),f(r,E));y=l(r,f(e,y));e=new p(h.concat([h.alloc(1),y,e],q))}else if(1===q){y=e.length;q=a.modulus.byteLength();
if(y>q-11)throw Error("message too long");if(n)y=h.alloc(q-y-3,255);else{y=q-y-3;v=h.allocUnsafe(y);r=0;D=c(2*y);E=0;for(var I;r<y;)E===D.length&&(D=c(2*y),E=0),(I=D[E++])&&(v[r++]=I);y=v}e=new p(h.concat([h.from([0,n?1:2]),y,h.alloc(1),e],q))}else if(3===q){if(e=new p(e),0<=e.cmp(a.modulus))throw Error("data too long for modulus");}else throw Error("unknown padding");return n?d(e,a):b(e,a)}}function Kja(){if(i5)return j5;i5=!0;var g=qG(),c=W4(),k=Z4(),f=PP(),l=$O(),p=AA(),b=d5(),d=Nh().Buffer;return j5=
function(h,a,e){var n=h.padding?h.padding:e?1:4;h=g(h);var q=h.modulus.byteLength();if(a.length>q||0<=(new f(a)).cmp(h.modulus))throw Error("decryption error");a=e?b(new f(a),h):l(a,h);var r=d.alloc(q-a.length);a=d.concat([r,a],q);if(4===n){q=a;n=h.modulus.byteLength();h=p("sha1").update(d.alloc(0)).digest();e=h.length;if(0!==q[0])throw Error("decryption error");a=q.slice(1,e+1);q=q.slice(e+1);a=k(a,c(q,e));n=k(q,c(a,n-e-1));q=n.slice(0,e);h=d.from(h);q=d.from(q);a=0;r=h.length;h.length!==q.length&&
(a++,r=Math.min(h.length,q.length));for(var v=-1;++v<r;)a+=h[v]^q[v];if(a)throw Error("decryption error");for(;0===n[e];)e++;if(1!==n[e++])throw Error("decryption error");return n.slice(e)}if(1===n){n=a;h=n.slice(0,2);q=2;for(a=0;0!==n[q++];)if(q>=n.length){a++;break}r=n.slice(2,q-1);("0002"!==h.toString("hex")&&!e||"0001"!==h.toString("hex")&&e)&&a++;8>r.length&&a++;if(a)throw Error("decryption error");return n.slice(q)}if(3===n)return a;throw Error("unknown padding");}}function Lja(){if(k5)return Ns;
k5=!0;Ns.publicEncrypt=Jja();Ns.privateDecrypt=Kja();Ns.privateEncrypt=function(g,c){return Ns.publicEncrypt(g,c,!0)};Ns.publicDecrypt=function(g,c){return Ns.privateDecrypt(g,c,!0)};return Ns}function Mja(){function g(){throw Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11");}function c(r,v){if("number"!==typeof r||r!==r)throw new TypeError("offset must be a number");if(r>q||0>r)throw new TypeError("offset must be a uint32");if(r>
e||r>v)throw new RangeError("offset out of range");}function k(r,v,y){if("number"!==typeof r||r!==r)throw new TypeError("size must be a number");if(r>q||0>r)throw new TypeError("size must be a uint32");if(r+v>y||r>e)throw new RangeError("buffer too small");}function f(r,v,y,D){if(!(a.isBuffer(r)||r instanceof rG.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"===typeof v)D=v,v=0,y=r.length;else if("function"===typeof y)D=y,y=r.length-v;else if("function"!==
typeof D)throw new TypeError('"cb" argument must be a function');c(v,r.length);k(y,v,r.length);return l(r,v,y,D)}function l(r,v,y,D){if(b.browser){y=new Uint8Array(r.buffer,v,y);n.getRandomValues(y);if(D){b.nextTick(function(){D(null,r)});return}return r}if(D)h(y,function(E,I){if(E)return D(E);I.copy(r,v);D(null,r)});else return h(y).copy(r,v),r}function p(r,v,y){"undefined"===typeof v&&(v=0);if(!(a.isBuffer(r)||r instanceof rG.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');
c(v,r.length);void 0===y&&(y=r.length-v);k(y,v,r.length);return l(r,v,y)}if(l5)return Px;l5=!0;var b=Jg,d=Nh(),h=zx(),a=d.Buffer,e=d.kMaxLength,n=rG.crypto||rG.msCrypto,q=Math.pow(2,32)-1;n&&n.getRandomValues||!b.browser?(Px.randomFill=f,Px.randomFillSync=p):(Px.randomFill=g,Px.randomFillSync=g);return Px}function Nja(){function g(b){var d=b.length;if(0<d%4)throw Error("Invalid string. Length must be a multiple of 4");b=b.indexOf("=");-1===b&&(b=d);return[b,b===d?0:4-b%4]}function c(b,d,h){for(var a=
[],e=d;e<h;e+=3)d=(b[e]<<16&16711680)+(b[e+1]<<8&65280)+(b[e+2]&255),a.push(k[d>>18&63]+k[d>>12&63]+k[d>>6&63]+k[d&63]);return a.join("")}if(m5)return UA;m5=!0;UA.byteLength=function(b){b=g(b);var d=b[1];return 3*(b[0]+d)/4-d};UA.toByteArray=function(b){var d=g(b);var h=d[0];d=d[1];var a=new l(3*(h+d)/4-d),e=0,n=0<d?h-4:h,q;for(q=0;q<n;q+=4)h=f[b.charCodeAt(q)]<<18|f[b.charCodeAt(q+1)]<<12|f[b.charCodeAt(q+2)]<<6|f[b.charCodeAt(q+3)],a[e++]=h>>16&255,a[e++]=h>>8&255,a[e++]=h&255;2===d&&(h=f[b.charCodeAt(q)]<<
2|f[b.charCodeAt(q+1)]>>4,a[e++]=h&255);1===d&&(h=f[b.charCodeAt(q)]<<10|f[b.charCodeAt(q+1)]<<4|f[b.charCodeAt(q+2)]>>2,a[e++]=h>>8&255,a[e++]=h&255);return a};UA.fromByteArray=function(b){for(var d=b.length,h=d%3,a=[],e=0,n=d-h;e<n;e+=16383)a.push(c(b,e,e+16383>n?n:e+16383));1===h?(b=b[d-1],a.push(k[b>>2]+k[b<<4&63]+"==")):2===h&&(b=(b[d-2]<<8)+b[d-1],a.push(k[b>>10]+k[b>>4&63]+k[b<<2&63]+"="));return a.join("")};for(var k=[],f=[],l="undefined"!==typeof Uint8Array?Uint8Array:Array,p=0;64>p;++p)k[p]=
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[p],f["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(p)]=p;f[45]=62;f[95]=63;return UA}function Oja(){if(n5)return sG;n5=!0;sG.read=function(g,c,k,f,l){var p=8*l-f-1;var b=(1<<p)-1,d=b>>1,h=-7;l=k?l-1:0;var a=k?-1:1,e=g[c+l];l+=a;k=e&(1<<-h)-1;e>>=-h;for(h+=p;0<h;k=256*k+g[c+l],l+=a,h-=8);p=k&(1<<-h)-1;k>>=-h;for(h+=f;0<h;p=256*p+g[c+l],l+=a,h-=8);if(0===k)k=1-d;else{if(k===b)return p?NaN:Infinity*(e?
-1:1);p+=Math.pow(2,f);k-=d}return(e?-1:1)*p*Math.pow(2,k-f)};sG.write=function(g,c,k,f,l,p){var b,d=8*p-l-1,h=(1<<d)-1,a=h>>1,e=23===l?Math.pow(2,-24)-Math.pow(2,-77):0;p=f?0:p-1;var n=f?1:-1,q=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);isNaN(c)||Infinity===c?(c=isNaN(c)?1:0,f=h):(f=Math.floor(Math.log(c)/Math.LN2),1>c*(b=Math.pow(2,-f))&&(f--,b*=2),c=1<=f+a?c+e/b:c+e*Math.pow(2,1-a),2<=c*b&&(f++,b/=2),f+a>=h?(c=0,f=h):1<=f+a?(c=(c*b-1)*Math.pow(2,l),f+=a):(c=c*Math.pow(2,a-1)*Math.pow(2,l),f=0));for(;8<=
l;g[k+p]=c&255,p+=n,c/=256,l-=8);f=f<<l|c;for(d+=l;0<d;g[k+p]=f&255,p+=n,f/=256,d-=8);g[k+p-n]|=128*q};return sG}function Pja(g){var c=[];g.replace(/[a-fA-F0-9]{2}/g,function(k){c.push(parseInt(k,16))});return c}function tG(g){return g&&g.__esModule?g:{default:g}}function o5(g,c){g=g||[];c=c||{};try{return new Blob(g,c)}catch(l){if("TypeError"!==l.name)throw l;for(var k=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?
MozBlobBuilder:WebKitBlobBuilder),f=0;f<g.length;f+=1)k.append(g[f]);return k.getBlob(c.type)}}function p5(g){for(var c=g.length,k=new ArrayBuffer(c),f=new Uint8Array(k),l=0;l<c;l++)f[l]=g.charCodeAt(l);return k}function q5(g,c){return o5([p5(g)],{type:c})}function r5(g,c){var k=new FileReader,f="function"===typeof k.readAsBinaryString;k.onloadend=function(l){var p=l.target.result||"";if(f)return c(p);l="";p=new Uint8Array(p);for(var b=p.byteLength,d=0;d<b;d++)l+=String.fromCharCode(p[d]);c(l)};f?
k.readAsBinaryString(g):k.readAsArrayBuffer(g)}function s5(g,c){r5(g,function(k){c(k)})}function Qja(g,c,k){return g.webkitSlice?g.webkitSlice(c,k):g.slice(c,k)}function Rja(g,c,k,f,l){if(0<k||f<c.size)c=Qja(c,k,f);t5.readAsArrayBuffer(c,function(p){g.append(p);l()})}function Sja(g,c,k,f,l){if(0<k||f<c.length)c=c.substring(k,f);g.appendBinary(c);l()}function uG(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function VA(g){var c;if(!g||"object"!==typeof g)return g;if(Array.isArray(g)){var k=
[];var f=0;for(c=g.length;f<c;f++)k[f]=VA(g[f]);return k}if(g instanceof Date)return g.toISOString();if("undefined"!==typeof ArrayBuffer&&g instanceof ArrayBuffer||"undefined"!==typeof Blob&&g instanceof Blob)return g instanceof ArrayBuffer?"function"===typeof g.slice?g=g.slice(0):(f=new ArrayBuffer(g.byteLength),k=new Uint8Array(f),g=new Uint8Array(g),k.set(g),g=f):(f=g.size,k=g.type,g="function"===typeof g.slice?g.slice(0,f,k):g.webkitSlice(0,f,k)),g;k=Object.getPrototypeOf(g);null===k?k=!0:(k=
k.constructor,k="function"==typeof k&&k instanceof k&&u5.call(k)==Tja);if(!k)return g;k={};for(f in g)Object.prototype.hasOwnProperty.call(g,f)&&(c=VA(g[f]),"undefined"!==typeof c&&(k[f]=c));return k}function v5(g){var c=!1;return RP(function(k){if(c)throw Error("once called more than once");c=!0;g.apply(this,k)})}function w5(g){return RP(function(c){c=VA(c);var k=this,f="function"===typeof c[c.length-1]?c.pop():!1,l=new Promise(function(p,b){var d;try{var h=v5(function(a,e){a?b(a):p(e)});c.push(h);
(d=g.apply(k,c))&&"function"===typeof d.then&&p(d)}catch(a){b(a)}});f&&l.then(function(p){f(null,p)},f);return l})}function Uja(g,c,k){if(g.constructor.listeners("debug").length){for(var f=["api",g.name,c],l=0;l<k.length-1;l++)f.push(k[l]);g.constructor.emit("debug",f);var p=k[k.length-1];k[k.length-1]=function(b,d){var h=["api",g.name,c];h=h.concat(b?["error",b]:["success",d]);g.constructor.emit("debug",h);p(b,d)}}}function SP(g,c){for(var k={},f=0,l=c.length;f<l;f++){var p=c[f];p in g&&(k[p]=g[p])}return k}
function x5(g){return g}function Vja(g){return[{ok:g}]}function Wja(g){vG&&addEventListener("storage",function(c){g.emit(c.key)})}function Qx(){wG.call(this);this._listeners={};Wja(this)}function TP(g){if("undefined"!==typeof console&&"function"===typeof console[g]){var c=Array.prototype.slice.call(arguments,1);console[g].apply(console,c)}}function y5(g){if(!g)return null;var c=g.split("/");return 2===c.length?c:1===c.length?[g,g]:null}function z5(g,c,k){return new Promise(function(f,l){g.get(c,function(p,
b){if(p){if(404!==p.status)return l(p);b={}}p=b._rev;b=k(b);if(!b)return f({updated:!1,rev:p});b._id=c;b._rev=p;f(Xja(g,b,k))})})}function Xja(g,c,k){return g.put(c).then(function(f){return{updated:!0,rev:f.rev}},function(f){if(409!==f.status)throw f;return z5(g,c._id,k)})}function A5(g){var c=g.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");g=g.indexOf("=");-1===g&&(g=c);return[g,g===c?0:4-g%4]}function Yja(g,c,k){for(var f=[],l=c;l<k;l+=3)c=(g[l]<<16&16711680)+(g[l+
1]<<8&65280)+(g[l+2]&255),f.push(Xp[c>>18&63]+Xp[c>>12&63]+Xp[c>>6&63]+Xp[c&63]);return f.join("")}function nr(g){if(g>UP)throw new RangeError('The value "'+g+'" is invalid for option "size"');g=new Uint8Array(g);Object.setPrototypeOf(g,ge.prototype);return g}function ge(g,c,k){if("number"===typeof g){if("string"===typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return VP(g)}return B5(g,c,k)}function B5(g,c,k){if("string"===typeof g){var f=c;if("string"!==
typeof f||""===f)f="utf8";if(!ge.isEncoding(f))throw new TypeError("Unknown encoding: "+f);c=C5(g,f)|0;k=nr(c);g=k.write(g,f);g!==c&&(k=k.slice(0,g));return k}if(ArrayBuffer.isView(g))return Yp(g,Uint8Array)?(g=new Uint8Array(g),g=D5(g.buffer,g.byteOffset,g.byteLength)):g=WP(g),g;if(null==g)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(Yp(g,ArrayBuffer)||g&&Yp(g.buffer,ArrayBuffer)||"undefined"!==
typeof SharedArrayBuffer&&(Yp(g,SharedArrayBuffer)||g&&Yp(g.buffer,SharedArrayBuffer)))return D5(g,c,k);if("number"===typeof g)throw new TypeError('The "value" argument must not be of type number. Received type number');f=g.valueOf&&g.valueOf();if(null!=f&&f!==g)return ge.from(f,c,k);if(f=Zja(g))return f;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof g[Symbol.toPrimitive])return ge.from(g[Symbol.toPrimitive]("string"),c,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof g);}function E5(g){if("number"!==typeof g)throw new TypeError('"size" argument must be of type number');if(0>g)throw new RangeError('The value "'+g+'" is invalid for option "size"');}function VP(g){E5(g);return nr(0>g?0:XP(g)|0)}function WP(g){for(var c=0>g.length?0:XP(g.length)|0,k=nr(c),f=0;f<c;f+=1)k[f]=g[f]&255;return k}function D5(g,c,k){if(0>c||g.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<c+(k||0))throw new RangeError('"length" is outside of buffer bounds');
g=void 0===c&&void 0===k?new Uint8Array(g):void 0===k?new Uint8Array(g,c):new Uint8Array(g,c,k);Object.setPrototypeOf(g,ge.prototype);return g}function Zja(g){if(ge.isBuffer(g)){var c=XP(g.length)|0,k=nr(c);if(0===k.length)return k;g.copy(k,0,0,c);return k}if(void 0!==g.length)return(c="number"!==typeof g.length)||(c=g.length,c=c!==c),c?nr(0):WP(g);if("Buffer"===g.type&&Array.isArray(g.data))return WP(g.data)}function XP(g){if(g>=UP)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+
UP.toString(16)+" bytes");return g|0}function C5(g,c){if(ge.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||Yp(g,ArrayBuffer))return g.byteLength;if("string"!==typeof g)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);var k=g.length,f=2<arguments.length&&!0===arguments[2];if(!f&&0===k)return 0;for(var l=!1;;)switch(c){case "ascii":case "latin1":case "binary":return k;case "utf8":case "utf-8":return YP(g).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
k;case "hex":return k>>>1;case "base64":return xG.toByteArray(F5(g)).length;default:if(l)return f?-1:YP(g).length;c=(""+c).toLowerCase();l=!0}}function $ja(g,c,k){var f=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===k||k>this.length)k=this.length;if(0>=k)return"";k>>>=0;c>>>=0;if(k<=c)return"";for(g||(g="utf8");;)switch(g){case "hex":g=this.length;if(!c||0>c)c=0;if(!k||0>k||k>g)k=g;for(g="";c<k;++c)g+=aka[this[c]];return g;case "utf8":case "utf-8":return G5(this,c,k);case "ascii":g=
"";for(k=Math.min(this.length,k);c<k;++c)g+=String.fromCharCode(this[c]&127);return g;case "latin1":case "binary":g="";for(k=Math.min(this.length,k);c<k;++c)g+=String.fromCharCode(this[c]);return g;case "base64":return c=0===c&&k===this.length?xG.fromByteArray(this):xG.fromByteArray(this.slice(c,k)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,k);k="";for(g=0;g<c.length-1;g+=2)k+=String.fromCharCode(c[g]+256*c[g+1]);return k;default:if(f)throw new TypeError("Unknown encoding: "+
g);g=(g+"").toLowerCase();f=!0}}function Su(g,c,k){var f=g[c];g[c]=g[k];g[k]=f}function H5(g,c,k,f,l){if(0===g.length)return-1;"string"===typeof k?(f=k,k=0):2147483647<k?k=2147483647:-2147483648>k&&(k=-2147483648);k=+k;k!==k&&(k=l?0:g.length-1);0>k&&(k=g.length+k);if(k>=g.length){if(l)return-1;k=g.length-1}else if(0>k)if(l)k=0;else return-1;"string"===typeof c&&(c=ge.from(c,f));if(ge.isBuffer(c))return 0===c.length?-1:I5(g,c,k,f,l);if("number"===typeof c)return c&=255,"function"===typeof Uint8Array.prototype.indexOf?
l?Uint8Array.prototype.indexOf.call(g,c,k):Uint8Array.prototype.lastIndexOf.call(g,c,k):I5(g,[c],k,f,l);throw new TypeError("val must be string, number or Buffer");}function I5(g,c,k,f,l){function p(a,e){return 1===b?a[e]:a.readUInt16BE(e*b)}var b=1,d=g.length,h=c.length;if(void 0!==f&&(f=String(f).toLowerCase(),"ucs2"===f||"ucs-2"===f||"utf16le"===f||"utf-16le"===f)){if(2>g.length||2>c.length)return-1;b=2;d/=2;h/=2;k/=2}if(l)for(f=-1;k<d;k++)if(p(g,k)===p(c,-1===f?0:k-f)){if(-1===f&&(f=k),k-f+1===
h)return f*b}else-1!==f&&(k-=k-f),f=-1;else for(k+h>d&&(k=d-h);0<=k;k--){d=!0;for(f=0;f<h;f++)if(p(g,k+f)!==p(c,f)){d=!1;break}if(d)return k}return-1}function G5(g,c,k){k=Math.min(g.length,k);for(var f=[];c<k;){var l=g[c],p=null,b=239<l?4:223<l?3:191<l?2:1;if(c+b<=k)switch(b){case 1:128>l&&(p=l);break;case 2:var d=g[c+1];128===(d&192)&&(l=(l&31)<<6|d&63,127<l&&(p=l));break;case 3:d=g[c+1];var h=g[c+2];128===(d&192)&&128===(h&192)&&(l=(l&15)<<12|(d&63)<<6|h&63,2047<l&&(55296>l||57343<l)&&(p=l));break;
case 4:d=g[c+1];h=g[c+2];var a=g[c+3];128===(d&192)&&128===(h&192)&&128===(a&192)&&(l=(l&15)<<18|(d&63)<<12|(h&63)<<6|a&63,65535<l&&1114112>l&&(p=l))}null===p?(p=65533,b=1):65535<p&&(p-=65536,f.push(p>>>10&1023|55296),p=56320|p&1023);f.push(p);c+=b}g=f.length;if(g<=J5)f=String.fromCharCode.apply(String,f);else{k="";for(c=0;c<g;)k+=String.fromCharCode.apply(String,f.slice(c,c+=J5));f=k}return f}function ml(g,c,k){if(0!==g%1||0>g)throw new RangeError("offset is not uint");if(g+c>k)throw new RangeError("Trying to access beyond buffer length");
}function Mm(g,c,k,f,l,p){if(!ge.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>l||c<p)throw new RangeError('"value" argument is out of bounds');if(k+f>g.length)throw new RangeError("Index out of range");}function K5(g,c,k,f,l,p){if(k+f>g.length)throw new RangeError("Index out of range");if(0>k)throw new RangeError("Index out of range");}function L5(g,c,k,f,l){c=+c;k>>>=0;l||K5(g,c,k,4);Rx.write(g,c,k,f,23,4);return k+4}function M5(g,c,k,f,l){c=+c;k>>>=0;l||K5(g,
c,k,8);Rx.write(g,c,k,f,52,8);return k+8}function F5(g){g=g.split("=")[0];g=g.trim().replace(bka,"");if(2>g.length)return"";for(;0!==g.length%4;)g+="=";return g}function YP(g,c){c=c||Infinity;for(var k,f=g.length,l=null,p=[],b=0;b<f;++b){k=g.charCodeAt(b);if(55295<k&&57344>k){if(!l){if(56319<k){-1<(c-=3)&&p.push(239,191,189);continue}else if(b+1===f){-1<(c-=3)&&p.push(239,191,189);continue}l=k;continue}if(56320>k){-1<(c-=3)&&p.push(239,191,189);l=k;continue}k=(l-55296<<10|k-56320)+65536}else l&&-1<
(c-=3)&&p.push(239,191,189);l=null;if(128>k){if(0>--c)break;p.push(k)}else if(2048>k){if(0>(c-=2))break;p.push(k>>6|192,k&63|128)}else if(65536>k){if(0>(c-=3))break;p.push(k>>12|224,k>>6&63|128,k&63|128)}else if(1114112>k){if(0>(c-=4))break;p.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw Error("Invalid code point");}return p}function yG(g,c,k,f){for(var l=0;l<f&&!(l+k>=c.length||l>=g.length);++l)c[l+k]=g[l];return l}function Yp(g,c){return g instanceof c||null!=g&&null!=g.constructor&&
null!=g.constructor.name&&g.constructor.name===c.name}function Os(g){if("object"!==typeof g||null===g)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||or).db=g;(this||or)._ended=!1;(this||or)._nexting=!1}function Zo(g){if("object"!==typeof g||null===g)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||Rk).db=g;(this||Rk)._operations=[];(this||Rk)._written=!1}function Jj(g){(this||kn).status="new";(this||kn).supports=
cka(g,{status:!0})}function N5(g,c){var k={},f;for(f in c)if(dka.call(c,f)){var l=c[f];-1!==eka.indexOf(f)&&(l=g._serializeKey(l));k[f]=l}return k}function Sx(g,c){O5.call(this||$o,g);(this||$o)._options=c;(this||$o)._iterator=null;(this||$o)._operations=[]}function Tu(g){P5.call(this||nl,g.supports||{});fka.forEach(function(c){"function"!==typeof g[c]||(this||nl).supports.additionalMethods[c]||((this||nl).supports.additionalMethods[c]=!0)},this||nl);(this||nl)._db=g;(this||nl)._operations=[];Q5(this||
nl)}function gka(g){R5.concat("iterator").forEach(function(c){g["_"+c]=function(){return(this||nl)._db[c].apply((this||nl)._db,arguments)}});Object.keys(g.supports.additionalMethods).forEach(function(c){g[c]=function(){return(this||nl)._db[c].apply((this||nl)._db,arguments)}})}function Q5(g){R5.forEach(function(c){g["_"+c]=function(){(this||nl)._operations.push({method:c,args:arguments})}});Object.keys(g.supports.additionalMethods).forEach(function(c){g[c]=function(){(this||nl)._operations.push({method:c,
args:arguments})}});g._iterator=function(c){c=new S5(g,c);(this||nl)._operations.push({iterator:c});return c}}function T5(){if(U5)return V5;U5=!0;return V5=Fl.EventEmitter}function Tx(){function g(f,l,p){p||(p=Error);var b=function(d,h,a){return p.call(this,"string"===typeof l?l:l(d,h,a))||this};$jscomp.inherits(b,p);b.prototype.name=p.name;b.prototype.code=f;k[f]=b}function c(f,l){if(Array.isArray(f)){var p=f.length;f=f.map(function(b){return String(b)});return 2<p?"one of "+l+" "+f.slice(0,p-1).join(", ")+
", or "+f[p-1]:2===p?"one of "+l+" "+f[0]+" or "+f[1]:"of "+l+" "+f[0]}return"of "+l+" "+String(f)}if(W5)return ZP;W5=!0;var k={};g("ERR_INVALID_OPT_VALUE",function(f,l){return'The value "'+l+'" is invalid for option "'+f+'"'},TypeError);g("ERR_INVALID_ARG_TYPE",function(f,l,p){var b;if(b="string"===typeof l)b="not "===l.substr(0,4);b?(b="must not be",l=l.replace(/^not /,"")):b="must be";var d=void 0;if(void 0===d||d>f.length)d=f.length;" argument"===f.substring(d-9,d)?f="The "+f+" "+b+" "+c(l,"type"):
(d=void 0,"number"!==typeof d&&(d=0),d=d+1>f.length?!1:-1!==f.indexOf(".",d),f='The "'+f+'" '+(d?"property":"argument")+" "+b+" "+c(l,"type"));return f+(". Received type "+typeof p)},TypeError);g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");g("ERR_METHOD_NOT_IMPLEMENTED",function(f){return"The "+f+" method is not implemented"});g("ERR_STREAM_PREMATURE_CLOSE","Premature close");g("ERR_STREAM_DESTROYED",function(f){return"Cannot call "+f+" after a stream was destroyed"});g("ERR_MULTIPLE_CALLBACK",
"Callback called multiple times");g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");g("ERR_STREAM_WRITE_AFTER_END","write after end");g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);g("ERR_UNKNOWN_ENCODING",function(f){return"Unknown encoding: "+f},TypeError);g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");ZP.codes=k;return ZP}function $P(g){try{if(!aQ.localStorage)return!1}catch(c){return!1}g=aQ.localStorage[g];return null==g?!1:"true"===
String(g).toLowerCase()}function X5(g,c){for(var k in g)c[k]=g[k]}function Uu(g,c,k){return Zp(g,c,k)}function hka(g){if(!g)return"utf8";for(var c;;)switch(g){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return g;default:if(c)return;g=(""+g).toLowerCase();c=!0}}function WA(g){var c=hka(g);if("string"!==typeof c&&(bQ.isEncoding===Y5||!Y5(g)))throw Error("Unknown encoding: "+
g);this.encoding=c||g;switch(this.encoding){case "utf16le":this.text=ika;this.end=jka;g=4;break;case "utf8":this.fillLast=kka;g=4;break;case "base64":this.text=lka;this.end=mka;g=3;break;default:this.write=nka;this.end=oka;return}this.lastTotal=this.lastNeed=0;this.lastChar=bQ.allocUnsafe(g)}function cQ(g){return 127>=g?0:6===g>>5?2:14===g>>4?3:30===g>>3?4:2===g>>6?-1:-2}function pka(g,c,k){var f=c.length-1;if(f<k)return 0;var l=cQ(c[f]);if(0<=l)return 0<l&&(g.lastNeed=l-1),l;if(--f<k||-2===l)return 0;
l=cQ(c[f]);if(0<=l)return 0<l&&(g.lastNeed=l-2),l;if(--f<k||-2===l)return 0;l=cQ(c[f]);return 0<=l?(0<l&&(2===l?l=0:g.lastNeed=l-3),l):0}function kka(g){var c=this.lastTotal-this.lastNeed;a:if(128!==(g[0]&192)){this.lastNeed=0;var k="\ufffd"}else{if(1<this.lastNeed&&1<g.length){if(128!==(g[1]&192)){this.lastNeed=1;k="\ufffd";break a}if(2<this.lastNeed&&2<g.length&&128!==(g[2]&192)){this.lastNeed=2;k="\ufffd";break a}}k=void 0}if(void 0!==k)return k;if(this.lastNeed<=g.length)return g.copy(this.lastChar,
c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,c,0,g.length);this.lastNeed-=g.length}function ika(g,c){if(0===(g.length-c)%2){if(c=g.toString("utf16le",c)){var k=c.charCodeAt(c.length-1);if(55296<=k&&56319>=k)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],c.slice(0,-1)}return c}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=g[g.length-1];return g.toString("utf16le",c,g.length-1)}function jka(g){g=
g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):g}function lka(g,c){var k=(g.length-c)%3;if(0===k)return g.toString("base64",c);this.lastNeed=3-k;this.lastTotal=3;1===k?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]);return g.toString("base64",c,g.length-k)}function mka(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function nka(g){return g.toString(this.encoding)}
function oka(g){return g&&g.length?this.write(g):""}function dQ(){function g(l){var p=!1;return function(){if(!p){p=!0;for(var b=arguments.length,d=Array(b),h=0;h<b;h++)d[h]=arguments[h];l.apply(this,d)}}}function c(){}function k(l,p,b){if("function"===typeof p)return k(l,null,p);p||(p={});b=g(b||c);var d=p.readable||!1!==p.readable&&l.readable,h=p.writable||!1!==p.writable&&l.writable,a=function(){l.writable||n()},e=l._writableState&&l._writableState.finished,n=function(){h=!1;e=!0;d||b.call(l)},
q=l._readableState&&l._readableState.endEmitted,r=function(){d=!1;q=!0;h||b.call(l)},v=function(E){b.call(l,E)},y=function(){var E;if(d&&!q)return l._readableState&&l._readableState.ended||(E=new f),b.call(l,E);if(h&&!e)return l._writableState&&l._writableState.ended||(E=new f),b.call(l,E)},D=function(){l.req.on("finish",n)};if(l.setHeader&&"function"===typeof l.abort)if(l.on("complete",n),l.on("abort",y),l.req)D();else l.on("request",D);else h&&!l._writableState&&(l.on("end",a),l.on("close",a));
l.on("end",r);l.on("finish",n);if(!1!==p.error)l.on("error",v);l.on("close",y);return function(){l.removeListener("complete",n);l.removeListener("abort",y);l.removeListener("request",D);l.req&&l.req.removeListener("finish",n);l.removeListener("end",a);l.removeListener("close",a);l.removeListener("finish",n);l.removeListener("end",r);l.removeListener("error",v);l.removeListener("close",y)}}if(Z5)return $5;Z5=!0;var f=Tx().codes.ERR_STREAM_PREMATURE_CLOSE;return $5=k}function qka(){if(a6)return b6;
a6=!0;return b6=function(){throw Error("Readable.from is not available in the browser");}}function rka(){function g(d,h){var a=Object.keys(d);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(d);h&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(d,n).enumerable}));a.push.apply(a,e)}return a}function c(d){for(var h=1;h<arguments.length;h++){var a=null!=arguments[h]?arguments[h]:{};h%2?g(Object(a),!0).forEach(function(e){var n=a[e];e in d?Object.defineProperty(d,e,{value:n,
enumerable:!0,configurable:!0,writable:!0}):d[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach(function(e){Object.defineProperty(d,e,Object.getOwnPropertyDescriptor(a,e))})}return d}function k(d,h){for(var a=0;a<h.length;a++){var e=h[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(d,e.key,e)}}function f(d,h,a){h&&k(d.prototype,h);a&&k(d,a);return d}if(c6)return d6;c6=!0;
var l=ol.Buffer,p=e6.inspect,b=p&&p.custom||"inspect";return d6=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.tail=this.head=null;this.length=0}f(d,[{key:"push",value:function(h){h={data:h,next:null};0<this.length?this.tail.next=h:this.head=h;this.tail=h;++this.length}},{key:"unshift",value:function(h){h={data:h,next:this.head};0===this.length&&(this.tail=h);this.head=h;++this.length}},{key:"shift",value:function(){if(0!==this.length){var h=
this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return h}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(h){if(0===this.length)return"";for(var a=this.head,e=""+a.data;a=a.next;)e+=h+a.data;return e}},{key:"concat",value:function(h){if(0===this.length)return l.alloc(0);h=l.allocUnsafe(h>>>0);for(var a=this.head,e=0;a;)l.prototype.copy.call(a.data,h,e),e+=a.data.length,a=a.next;return h}},{key:"consume",value:function(h,
a){h<this.head.data.length?(a=this.head.data.slice(0,h),this.head.data=this.head.data.slice(h)):a=h===this.head.data.length?this.shift():a?this._getString(h):this._getBuffer(h);return a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(h){var a=this.head,e=1,n=a.data;for(h-=n.length;a=a.next;){var q=a.data,r=h>q.length?q.length:h;n=r===q.length?n+q:n+q.slice(0,h);h-=r;if(0===h){r===q.length?(++e,this.head=a.next?a.next:this.tail=null):(this.head=a,a.data=q.slice(r));
break}++e}this.length-=e;return n}},{key:"_getBuffer",value:function(h){var a=l.allocUnsafe(h),e=this.head,n=1;e.data.copy(a);for(h-=e.data.length;e=e.next;){var q=e.data,r=h>q.length?q.length:h;q.copy(a,a.length-h,0,r);h-=r;if(0===h){r===q.length?(++n,this.head=e.next?e.next:this.tail=null):(this.head=e,e.data=q.slice(r));break}++n}this.length-=n;return a}},{key:b,value:function(h,a){return p(this,c({},a,{depth:0,customInspect:!1}))}}]);return d}()}function f6(){function g(l,p){k(l,p);c(l)}function c(l){l._writableState&&
!l._writableState.emitClose||l._readableState&&!l._readableState.emitClose||l.emit("close")}function k(l,p){l.emit("error",p)}if(g6)return h6;g6=!0;var f=sk;return h6={destroy:function(l,p){var b=this,d=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||d)return p?p(l):l&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,f.nextTick(k,this,l)):f.nextTick(k,this,l)),this;this._readableState&&(this._readableState.destroyed=
!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(l||null,function(h){!p&&h?b._writableState?b._writableState.errorEmitted?f.nextTick(c,b):(b._writableState.errorEmitted=!0,f.nextTick(g,b,h)):f.nextTick(g,b,h):p?(f.nextTick(c,b),p(h)):f.nextTick(c,b)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=
!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(l,p){var b=l._readableState,d=l._writableState;b&&b.autoDestroy||d&&d.autoDestroy?l.destroy(p):l.emit("error",p)}}}function i6(){if(j6)return k6;j6=!0;var g=Tx().codes.ERR_INVALID_OPT_VALUE;return k6={getHighWaterMark:function(c,k,f,l){k=null!=k.highWaterMark?k.highWaterMark:
l?k[f]:null;if(null!=k){if(!isFinite(k)||Math.floor(k)!==k||0>k)throw new g(l?f:"highWaterMark",k);return Math.floor(k)}return c.objectMode?16:16384}}}function l6(){function g(F){var L=this;this.entry=this.next=null;this.finish=function(){var U=L.entry;for(L.entry=null;U;){var T=U.callback;F.pendingcb--;T(void 0);U=U.next}F.corkedRequestsFree.next=L}}function c(){}function k(F,L,U){n=n||Ux();F=F||{};"boolean"!==typeof U&&(U=L instanceof n);this.objectMode=!!F.objectMode;U&&(this.objectMode=this.objectMode||
!!F.writableObjectMode);this.highWaterMark=E(this,F,"writableHighWaterMark",U);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==F.decodeStrings;this.defaultEncoding=F.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(T){var Y=L._writableState,wa=Y.sync,Ga=Y.writecb;if("function"!==typeof Ga)throw new N;Y.writing=!1;Y.writecb=null;Y.length-=Y.writelen;Y.writelen=
0;T?(--Y.pendingcb,wa?(e.nextTick(Ga,T),e.nextTick(a,L,Y),L._writableState.errorEmitted=!0,A(L,T)):(Ga(T),L._writableState.errorEmitted=!0,A(L,T),a(L,Y))):((T=d(Y)||L.destroyed)||Y.corked||Y.bufferProcessing||!Y.bufferedRequest||b(L,Y),wa?e.nextTick(p,L,Y,T,Ga):p(L,Y,T,Ga))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==F.emitClose;this.autoDestroy=!!F.autoDestroy;this.bufferedRequestCount=
0;this.corkedRequestsFree=new g(this)}function f(F){n=n||Ux();var L=this instanceof n;if(!L&&!H.call(f,this))return new f(F);this._writableState=new k(F,this,L);this.writable=!0;F&&("function"===typeof F.write&&(this._write=F.write),"function"===typeof F.writev&&(this._writev=F.writev),"function"===typeof F.destroy&&(this._destroy=F.destroy),"function"===typeof F.final&&(this._final=F.final));r.call(this)}function l(F,L,U,T,Y,wa,Ga){L.writelen=T;L.writecb=Ga;L.writing=!0;L.sync=!0;if(L.destroyed)L.onwrite(new m("write"));
else U?F._writev(Y,L.onwrite):F._write(Y,wa,L.onwrite);L.sync=!1}function p(F,L,U,T){!U&&0===L.length&&L.needDrain&&(L.needDrain=!1,F.emit("drain"));L.pendingcb--;T();a(F,L)}function b(F,L){L.bufferProcessing=!0;var U=L.bufferedRequest;if(F._writev&&U&&U.next){var T=Array(L.bufferedRequestCount),Y=L.corkedRequestsFree;Y.entry=U;for(var wa=0,Ga=!0;U;)T[wa]=U,U.isBuf||(Ga=!1),U=U.next,wa+=1;T.allBuffers=Ga;l(F,L,!0,L.length,T,"",Y.finish);L.pendingcb++;L.lastBufferedRequest=null;Y.next?(L.corkedRequestsFree=
Y.next,Y.next=null):L.corkedRequestsFree=new g(L);L.bufferedRequestCount=0}else{for(;U&&(T=U.chunk,l(F,L,!1,L.objectMode?1:T.length,T,U.encoding,U.callback),U=U.next,L.bufferedRequestCount--,!L.writing););null===U&&(L.lastBufferedRequest=null)}L.bufferedRequest=U;L.bufferProcessing=!1}function d(F){return F.ending&&0===F.length&&null===F.bufferedRequest&&!F.finished&&!F.writing}function h(F,L){F._final(function(U){L.pendingcb--;U&&A(F,U);L.prefinished=!0;F.emit("prefinish");a(F,L)})}function a(F,
L){var U=d(L);U&&(L.prefinished||L.finalCalled||("function"!==typeof F._final||L.destroyed?(L.prefinished=!0,F.emit("prefinish")):(L.pendingcb++,L.finalCalled=!0,e.nextTick(h,F,L))),0===L.pendingcb&&(L.finished=!0,F.emit("finish"),L.autoDestroy&&(L=F._readableState,(!L||L.autoDestroy&&L.endEmitted)&&F.destroy())));return U}if(m6)return eQ;m6=!0;var e=sk;eQ=f;var n;f.WritableState=k;var q={deprecate:ska},r=T5(),v=ol.Buffer,y=tka.Uint8Array||function(){},D=f6(),E=i6().getHighWaterMark,I=Tx().codes,
K=I.ERR_INVALID_ARG_TYPE,P=I.ERR_METHOD_NOT_IMPLEMENTED,N=I.ERR_MULTIPLE_CALLBACK,aa=I.ERR_STREAM_CANNOT_PIPE,m=I.ERR_STREAM_DESTROYED,t=I.ERR_STREAM_NULL_VALUES,u=I.ERR_STREAM_WRITE_AFTER_END,B=I.ERR_UNKNOWN_ENCODING,A=D.errorOrDestroy;Dj(f,r);k.prototype.getBuffer=function(){for(var F=this.bufferedRequest,L=[];F;)L.push(F),F=F.next;return L};(function(){try{Object.defineProperty(k.prototype,"buffer",{get:q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.",
"DEP0003")})}catch(F){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var H=Function.prototype[Symbol.hasInstance];Object.defineProperty(f,Symbol.hasInstance,{value:function(F){return H.call(this,F)?!0:this!==f?!1:F&&F._writableState instanceof k}})}else H=function(F){return F instanceof this};f.prototype.pipe=function(){A(this,new aa)};f.prototype.write=function(F,L,U){var T=this._writableState,Y=!1,wa;if(wa=!T.objectMode)wa=F,
wa=v.isBuffer(wa)||wa instanceof y;wa&&!v.isBuffer(F)&&(F=v.from(F));"function"===typeof L&&(U=L,L=null);wa?L="buffer":L||(L=T.defaultEncoding);"function"!==typeof U&&(U=c);if(T.ending)T=U,U=new u,A(this,U),e.nextTick(T,U);else{var Ga;if(!(Ga=wa)){Ga=F;var na=U,ea;null===Ga?ea=new t:"string"===typeof Ga||T.objectMode||(ea=new K("chunk",["string","Buffer"],Ga));ea?(A(this,ea),e.nextTick(na,ea),Ga=!1):Ga=!0}Ga&&(T.pendingcb++,Y=wa,Y||(ea=F,T.objectMode||!1===T.decodeStrings||"string"!==typeof ea||(ea=
v.from(ea,L)),F!==ea&&(Y=!0,L="buffer",F=ea)),wa=T.objectMode?1:F.length,T.length+=wa,ea=T.length<T.highWaterMark,ea||(T.needDrain=!0),T.writing||T.corked?(wa=T.lastBufferedRequest,T.lastBufferedRequest={chunk:F,encoding:L,isBuf:Y,callback:U,next:null},wa?wa.next=T.lastBufferedRequest:T.bufferedRequest=T.lastBufferedRequest,T.bufferedRequestCount+=1):l(this,T,!1,wa,F,L,U),Y=ea)}return Y};f.prototype.cork=function(){this._writableState.corked++};f.prototype.uncork=function(){var F=this._writableState;
F.corked&&(F.corked--,F.writing||F.corked||F.bufferProcessing||!F.bufferedRequest||b(this,F))};f.prototype.setDefaultEncoding=function(F){"string"===typeof F&&(F=F.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((F+"").toLowerCase())))throw new B(F);this._writableState.defaultEncoding=F;return this};Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});
Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});f.prototype._write=function(F,L,U){U(new P("_write()"))};f.prototype._writev=null;f.prototype.end=function(F,L,U){var T=this._writableState;"function"===typeof F?(U=F,L=F=null):"function"===typeof L&&(U=L,L=null);null!==F&&void 0!==F&&this.write(F,L);T.corked&&(T.corked=1,this.uncork());if(!T.ending){F=U;T.ending=!0;a(this,T);if(F)if(T.finished)e.nextTick(F);else this.once("finish",
F);T.ended=!0;this.writable=!1}return this};Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(F){this._writableState&&(this._writableState.destroyed=F)}});f.prototype.destroy=D.destroy;f.prototype._undestroy=D.undestroy;f.prototype._destroy=function(F,L){L(F)};return eQ}function Ux(){function g(a){if(!(this instanceof
g))return new g(a);p.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||f.nextTick(k,this)}function k(a){a.end()}if(n6)return fQ;n6=!0;var f=sk,l=Object.keys||function(a){var e=[],n;for(n in a)e.push(n);return e};fQ=g;var p=o6(),b=l6();Dj(g,p);l=l(b.prototype);for(var d=0;d<l.length;d++){var h=l[d];g.prototype[h]||(g.prototype[h]=
b.prototype[h])}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===
this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}});return fQ}function uka(){function g(E,I,K){I in E?Object.defineProperty(E,I,{value:K,enumerable:!0,configurable:!0,writable:!0}):E[I]=K;return E}function c(E,I){return{value:E,done:I}}function k(E){var I=E[h];if(null!==I){var K=E[v].read();null!==
K&&(E[q]=null,E[h]=null,E[a]=null,I(c(K,!1)))}}function f(E){p.nextTick(k,E)}function l(E,I){return function(K,P){E.then(function(){if(I[n])K(c(void 0,!0));else I[r](K,P)},P)}}if(p6)return q6;p6=!0;var p=sk,b,d=dQ(),h=Symbol("lastResolve"),a=Symbol("lastReject"),e=Symbol("error"),n=Symbol("ended"),q=Symbol("lastPromise"),r=Symbol("handlePromise"),v=Symbol("stream"),y=Object.getPrototypeOf(function(){}),D=Object.setPrototypeOf((b={get stream(){return this[v]},next:function(){var E=this,I=this[e];if(null!==
I)return Promise.reject(I);if(this[n])return Promise.resolve(c(void 0,!0));if(this[v].destroyed)return new Promise(function(K,P){p.nextTick(function(){E[e]?P(E[e]):K(c(void 0,!0))})});if(I=this[q])I=new Promise(l(I,this));else{I=this[v].read();if(null!==I)return Promise.resolve(c(I,!1));I=new Promise(this[r])}return this[q]=I}},g(b,Symbol.asyncIterator,function(){return this}),g(b,"return",function(){var E=this;return new Promise(function(I,K){E[v].destroy(null,function(P){P?K(P):I(c(void 0,!0))})})}),
b),y);return q6=function(E){var I,K=Object.create(D,(I={},g(I,v,{value:E,writable:!0}),g(I,h,{value:null,writable:!0}),g(I,a,{value:null,writable:!0}),g(I,e,{value:null,writable:!0}),g(I,n,{value:E._readableState.endEmitted,writable:!0}),g(I,r,{value:function(P,N){var aa=K[v].read();aa?(K[q]=null,K[h]=null,K[a]=null,P(c(aa,!1))):(K[h]=P,K[a]=N)},writable:!0}),I));K[q]=null;d(E,function(P){if(P&&"ERR_STREAM_PREMATURE_CLOSE"!==P.code){var N=K[a];null!==N&&(K[q]=null,K[h]=null,K[a]=null,N(P));K[e]=P}else P=
K[h],null!==P&&(K[q]=null,K[h]=null,K[a]=null,P(c(void 0,!0))),K[n]=!0});E.on("readable",f.bind(null,K));return K}}function o6(){function g(da,ia,Oa){if("function"===typeof da.prependListener)return da.prependListener(ia,Oa);if(da._events&&da._events[ia])Array.isArray(da._events[ia])?da._events[ia].unshift(Oa):da._events[ia]=[Oa,da._events[ia]];else da.on(ia,Oa)}function c(da,ia,Oa){P=P||Ux();da=da||{};"boolean"!==typeof Oa&&(Oa=ia instanceof P);this.objectMode=!!da.objectMode;Oa&&(this.objectMode=
this.objectMode||!!da.readableObjectMode);this.highWaterMark=A(this,da,"readableHighWaterMark",Oa);this.buffer=new B;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==da.emitClose;this.autoDestroy=!!da.autoDestroy;this.destroyed=!1;this.defaultEncoding=da.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=
!1;this.encoding=this.decoder=null;da.encoding&&(Y||(Y=gQ.StringDecoder),this.decoder=new Y(da.encoding),this.encoding=da.encoding)}function k(da){P=P||Ux();if(!(this instanceof k))return new k(da);this._readableState=new c(da,this,this instanceof P);this.readable=!0;da&&("function"===typeof da.read&&(this._read=da.read),"function"===typeof da.destroy&&(this._destroy=da.destroy));N.call(this)}function f(da,ia,Oa,Va,eb){u("readableAddChunk",ia);var Sa=da._readableState;if(null===ia)Sa.reading=!1,u("onEofChunk"),
Sa.ended||(Sa.decoder&&(ia=Sa.decoder.end())&&ia.length&&(Sa.buffer.push(ia),Sa.length+=Sa.objectMode?1:ia.length),Sa.ended=!0,Sa.sync?b(da):(Sa.needReadable=!1,Sa.emittedReadable||(Sa.emittedReadable=!0,d(da))));else{if(!eb){eb=ia;var Bb;aa.isBuffer(eb)||eb instanceof m||"string"===typeof eb||void 0===eb||Sa.objectMode||(Bb=new F("chunk",["string","Buffer","Uint8Array"],eb));var Z=Bb}if(Z)na(da,Z);else if(Sa.objectMode||ia&&0<ia.length)if("string"===typeof ia||Sa.objectMode||Object.getPrototypeOf(ia)===
aa.prototype||(ia=aa.from(ia)),Va)Sa.endEmitted?na(da,new T):l(da,Sa,ia,!0);else if(Sa.ended)na(da,new L);else{if(Sa.destroyed)return!1;Sa.reading=!1;Sa.decoder&&!Oa?(ia=Sa.decoder.write(ia),Sa.objectMode||0!==ia.length?l(da,Sa,ia,!1):h(da,Sa)):l(da,Sa,ia,!1)}else Va||(Sa.reading=!1,h(da,Sa))}return!Sa.ended&&(Sa.length<Sa.highWaterMark||0===Sa.length)}function l(da,ia,Oa,Va){ia.flowing&&0===ia.length&&!ia.sync?(ia.awaitDrain=0,da.emit("data",Oa)):(ia.length+=ia.objectMode?1:Oa.length,Va?ia.buffer.unshift(Oa):
ia.buffer.push(Oa),ia.needReadable&&b(da));h(da,ia)}function p(da,ia){if(0>=da||0===ia.length&&ia.ended)return 0;if(ia.objectMode)return 1;if(da!==da)return ia.flowing&&ia.length?ia.buffer.head.data.length:ia.length;if(da>ia.highWaterMark){var Oa=da;1073741824<=Oa?Oa=1073741824:(Oa--,Oa|=Oa>>>1,Oa|=Oa>>>2,Oa|=Oa>>>4,Oa|=Oa>>>8,Oa|=Oa>>>16,Oa++);ia.highWaterMark=Oa}return da<=ia.length?da:ia.ended?ia.length:(ia.needReadable=!0,0)}function b(da){var ia=da._readableState;u("emitReadable",ia.needReadable,
ia.emittedReadable);ia.needReadable=!1;ia.emittedReadable||(u("emitReadable",ia.flowing),ia.emittedReadable=!0,K.nextTick(d,da))}function d(da){var ia=da._readableState;u("emitReadable_",ia.destroyed,ia.length,ia.ended);ia.destroyed||!ia.length&&!ia.ended||(da.emit("readable"),ia.emittedReadable=!1);ia.needReadable=!ia.flowing&&!ia.ended&&ia.length<=ia.highWaterMark;v(da)}function h(da,ia){ia.readingMore||(ia.readingMore=!0,K.nextTick(a,da,ia))}function a(da,ia){for(;!ia.reading&&!ia.ended&&(ia.length<
ia.highWaterMark||ia.flowing&&0===ia.length);){var Oa=ia.length;u("maybeReadMore read 0");da.read(0);if(Oa===ia.length)break}ia.readingMore=!1}function e(da){return function(){var ia=da._readableState;u("pipeOnDrain",ia.awaitDrain);ia.awaitDrain&&ia.awaitDrain--;0===ia.awaitDrain&&da.listeners("data").length&&(ia.flowing=!0,v(da))}}function n(da){var ia=da._readableState;ia.readableListening=0<da.listenerCount("readable");ia.resumeScheduled&&!ia.paused?ia.flowing=!0:0<da.listenerCount("data")&&da.resume()}
function q(da){u("readable nexttick read 0");da.read(0)}function r(da,ia){u("resume",ia.reading);ia.reading||da.read(0);ia.resumeScheduled=!1;da.emit("resume");v(da);ia.flowing&&!ia.reading&&da.read(0)}function v(da){var ia=da._readableState;for(u("flow",ia.flowing);ia.flowing&&null!==da.read(););}function y(da,ia){if(0===ia.length)return null;ia.objectMode?da=ia.buffer.shift():!da||da>=ia.length?(da=ia.decoder?ia.buffer.join(""):1===ia.buffer.length?ia.buffer.first():ia.buffer.concat(ia.length),
ia.buffer.clear()):da=ia.buffer.consume(da,ia.decoder);return da}function D(da){var ia=da._readableState;u("endReadable",ia.endEmitted);ia.endEmitted||(ia.ended=!0,K.nextTick(E,ia,da))}function E(da,ia){u("endReadableNT",da.endEmitted,da.length);da.endEmitted||0!==da.length||(da.endEmitted=!0,ia.readable=!1,ia.emit("end"),da.autoDestroy&&(da=ia._writableState,(!da||da.autoDestroy&&da.finished)&&ia.destroy()))}function I(da,ia){for(var Oa=0,Va=da.length;Oa<Va;Oa++)if(da[Oa]===ia)return Oa;return-1}
if(r6)return hQ;r6=!0;var K=sk;hQ=k;var P;k.ReadableState=c;var N=T5(),aa=ol.Buffer,m=vka.Uint8Array||function(){},t=e6;var u=t&&t.debuglog?t.debuglog("stream"):function(){};var B=rka();t=f6();var A=i6().getHighWaterMark,H=Tx().codes,F=H.ERR_INVALID_ARG_TYPE,L=H.ERR_STREAM_PUSH_AFTER_EOF,U=H.ERR_METHOD_NOT_IMPLEMENTED,T=H.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Y,wa,Ga;Dj(k,N);var na=t.errorOrDestroy,ea=["error","close","destroy","pause","resume"];Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,
get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(da){this._readableState&&(this._readableState.destroyed=da)}});k.prototype.destroy=t.destroy;k.prototype._undestroy=t.undestroy;k.prototype._destroy=function(da,ia){ia(da)};k.prototype.push=function(da,ia){var Oa=this._readableState;if(Oa.objectMode)var Va=!0;else"string"===typeof da&&(ia=ia||Oa.defaultEncoding,ia!==Oa.encoding&&(da=aa.from(da,ia),ia=""),Va=!0);return f(this,da,ia,!1,Va)};k.prototype.unshift=
function(da){return f(this,da,null,!0,!1)};k.prototype.isPaused=function(){return!1===this._readableState.flowing};k.prototype.setEncoding=function(da){Y||(Y=gQ.StringDecoder);da=new Y(da);this._readableState.decoder=da;this._readableState.encoding=this._readableState.decoder.encoding;for(var ia=this._readableState.buffer.head,Oa="";null!==ia;)Oa+=da.write(ia.data),ia=ia.next;this._readableState.buffer.clear();""!==Oa&&this._readableState.buffer.push(Oa);this._readableState.length=Oa.length;return this};
k.prototype.read=function(da){u("read",da);da=parseInt(da,10);var ia=this._readableState,Oa=da;0!==da&&(ia.emittedReadable=!1);if(0===da&&ia.needReadable&&((0!==ia.highWaterMark?ia.length>=ia.highWaterMark:0<ia.length)||ia.ended))return u("read: emitReadable",ia.length,ia.ended),0===ia.length&&ia.ended?D(this):b(this),null;da=p(da,ia);if(0===da&&ia.ended)return 0===ia.length&&D(this),null;var Va=ia.needReadable;u("need readable",Va);if(0===ia.length||ia.length-da<ia.highWaterMark)Va=!0,u("length less than watermark",
Va);ia.ended||ia.reading?u("reading or ended",!1):Va&&(u("do read"),ia.reading=!0,ia.sync=!0,0===ia.length&&(ia.needReadable=!0),this._read(ia.highWaterMark),ia.sync=!1,ia.reading||(da=p(Oa,ia)));Va=0<da?y(da,ia):null;null===Va?(ia.needReadable=ia.length<=ia.highWaterMark,da=0):(ia.length-=da,ia.awaitDrain=0);0===ia.length&&(ia.ended||(ia.needReadable=!0),Oa!==da&&ia.ended&&D(this));null!==Va&&this.emit("data",Va);return Va};k.prototype._read=function(da){na(this,new U("_read()"))};k.prototype.pipe=
function(da,ia){function Oa(Pa,Za){u("onunpipe");Pa===Da&&Za&&!1===Za.hasUnpiped&&(Za.hasUnpiped=!0,u("cleanup"),da.removeListener("close",Bb),da.removeListener("finish",Z),da.removeListener("drain",ma),da.removeListener("error",Sa),da.removeListener("unpipe",Oa),Da.removeListener("end",Va),Da.removeListener("end",sa),Da.removeListener("data",eb),ta=!0,!X.awaitDrain||da._writableState&&!da._writableState.needDrain||ma())}function Va(){u("onend");da.end()}function eb(Pa){u("ondata");Pa=da.write(Pa);
u("dest.write",Pa);!1===Pa&&((1===X.pipesCount&&X.pipes===da||1<X.pipesCount&&-1!==I(X.pipes,da))&&!ta&&(u("false write response, pause",X.awaitDrain),X.awaitDrain++),Da.pause())}function Sa(Pa){u("onerror",Pa);sa();da.removeListener("error",Sa);0===da.listeners("error").length&&na(da,Pa)}function Bb(){da.removeListener("finish",Z);sa()}function Z(){u("onfinish");da.removeListener("close",Bb);sa()}function sa(){u("unpipe");Da.unpipe(da)}var Da=this,X=this._readableState;switch(X.pipesCount){case 0:X.pipes=
da;break;case 1:X.pipes=[X.pipes,da];break;default:X.pipes.push(da)}X.pipesCount+=1;u("pipe count=%d opts=%j",X.pipesCount,ia);ia=ia&&!1===ia.end||da===K.stdout||da===K.stderr?sa:Va;if(X.endEmitted)K.nextTick(ia);else Da.once("end",ia);da.on("unpipe",Oa);var ma=e(Da);da.on("drain",ma);var ta=!1;Da.on("data",eb);g(da,"error",Sa);da.once("close",Bb);da.once("finish",Z);da.emit("pipe",Da);X.flowing||(u("pipe resume"),Da.resume());return da};k.prototype.unpipe=function(da){var ia=this._readableState,
Oa={hasUnpiped:!1};if(0===ia.pipesCount)return this;if(1===ia.pipesCount){if(da&&da!==ia.pipes)return this;da||(da=ia.pipes);ia.pipes=null;ia.pipesCount=0;ia.flowing=!1;da&&da.emit("unpipe",this,Oa);return this}if(!da){da=ia.pipes;Oa=ia.pipesCount;ia.pipes=null;ia.pipesCount=0;ia.flowing=!1;for(ia=0;ia<Oa;ia++)da[ia].emit("unpipe",this,{hasUnpiped:!1});return this}var Va=I(ia.pipes,da);if(-1===Va)return this;ia.pipes.splice(Va,1);--ia.pipesCount;1===ia.pipesCount&&(ia.pipes=ia.pipes[0]);da.emit("unpipe",
this,Oa);return this};k.prototype.on=function(da,ia){ia=N.prototype.on.call(this,da,ia);var Oa=this._readableState;"data"===da?(Oa.readableListening=0<this.listenerCount("readable"),!1!==Oa.flowing&&this.resume()):"readable"!==da||Oa.endEmitted||Oa.readableListening||(Oa.readableListening=Oa.needReadable=!0,Oa.flowing=!1,Oa.emittedReadable=!1,u("on readable",Oa.length,Oa.reading),Oa.length?b(this):Oa.reading||K.nextTick(q,this));return ia};k.prototype.addListener=k.prototype.on;k.prototype.removeListener=
function(da,ia){ia=N.prototype.removeListener.call(this,da,ia);"readable"===da&&K.nextTick(n,this);return ia};k.prototype.removeAllListeners=function(da){var ia=N.prototype.removeAllListeners.apply(this,arguments);"readable"!==da&&void 0!==da||K.nextTick(n,this);return ia};k.prototype.resume=function(){var da=this._readableState;da.flowing||(u("resume"),da.flowing=!da.readableListening,da.resumeScheduled||(da.resumeScheduled=!0,K.nextTick(r,this,da)));da.paused=!1;return this};k.prototype.pause=function(){u("call pause flowing=%j",
this._readableState.flowing);!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};k.prototype.wrap=function(da){var ia=this,Oa=this._readableState,Va=!1;da.on("end",function(){u("wrapped end");if(Oa.decoder&&!Oa.ended){var Sa=Oa.decoder.end();Sa&&Sa.length&&ia.push(Sa)}ia.push(null)});da.on("data",function(Sa){u("wrapped data");Oa.decoder&&(Sa=Oa.decoder.write(Sa));Oa.objectMode&&(null===Sa||void 0===Sa)||!(Oa.objectMode||
Sa&&Sa.length)||ia.push(Sa)||(Va=!0,da.pause())});for(var eb in da)void 0===this[eb]&&"function"===typeof da[eb]&&(this[eb]=function(Sa){return function(){return da[Sa].apply(da,arguments)}}(eb));for(eb=0;eb<ea.length;eb++)da.on(ea[eb],this.emit.bind(this,ea[eb]));this._read=function(Sa){u("wrapped _read",Sa);Va&&(Va=!1,da.resume())};return this};"function"===typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){void 0===wa&&(wa=uka());return wa(this)});Object.defineProperty(k.prototype,"readableHighWaterMark",
{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(da){this._readableState&&(this._readableState.flowing=da)}});k._fromList=y;Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});
"function"===typeof Symbol&&(k.from=function(da,ia){void 0===Ga&&(Ga=qka());return Ga(k,da,ia)});return hQ}function s6(){function g(e,n){var q=this._transformState;q.transforming=!1;var r=q.writecb;if(null===r)return this.emit("error",new b);q.writechunk=null;q.writecb=null;null!=n&&this.push(n);r(e);e=this._readableState;e.reading=!1;(e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);a.call(this,e);this._transformState={afterTransform:g.bind(this),
needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush));this.on("prefinish",k)}function k(){var e=this;"function"!==typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(n,q){f(e,n,q)})}function f(e,n,q){if(n)return e.emit("error",n);null!=q&&e.push(q);if(e._writableState.length)throw new h;
if(e._transformState.transforming)throw new d;return e.push(null)}if(t6)return iQ;t6=!0;iQ=c;var l=Tx().codes,p=l.ERR_METHOD_NOT_IMPLEMENTED,b=l.ERR_MULTIPLE_CALLBACK,d=l.ERR_TRANSFORM_ALREADY_TRANSFORMING,h=l.ERR_TRANSFORM_WITH_LENGTH_0,a=Ux();Dj(c,a);c.prototype.push=function(e,n){this._transformState.needTransform=!1;return a.prototype.push.call(this,e,n)};c.prototype._transform=function(e,n,q){q(new p("_transform()"))};c.prototype._write=function(e,n,q){var r=this._transformState;r.writecb=q;
r.writechunk=e;r.writeencoding=n;r.transforming||(e=this._readableState,(r.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark))};c.prototype._read=function(e){e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))};c.prototype._destroy=function(e,n){a.prototype._destroy.call(this,e,function(q){n(q)})};return iQ}function Vx(g,c){if(!((this||ap)instanceof Vx))return new Vx(g,
c);c=c||{};u6.call(this||ap,wka(c,{objectMode:!0}));(this||ap)._iterator=g;(this||ap)._options=c;this.on("end",(this||ap).destroy.bind(this||ap,null,null))}function v6(g,c,k){c&&"string"!=typeof c&&(c=c.message||c.name);xka(this||vk,{type:g,name:g,cause:"string"!=typeof c?c:k,message:c},"ewr")}function jQ(g,c){Error.call(this||vk);Error.captureStackTrace&&Error.captureStackTrace(this||vk,(this||vk).constructor);v6.call(this||vk,"CustomError",g,c)}function yka(g,c,k){var f=function(l,p){v6.call(this||
vk,c,l,p);"FilesystemError"==c&&((this||vk).code=(this||vk).cause.code,(this||vk).path=(this||vk).cause.path,(this||vk).errno=(this||vk).cause.errno,(this||vk).message=(g.errno[(this||vk).cause.errno]?g.errno[(this||vk).cause.errno].description:(this||vk).cause.message)+((this||vk).cause.path?" ["+(this||vk).cause.path+"]":""));Error.call(this||vk);Error.captureStackTrace&&Error.captureStackTrace(this||vk,f)};f.prototype=k?new k:new jQ;return f}function XA(g){(this||wk).db=(this||wk)._levelup=g;(this||
wk).batch=g.db.batch();(this||wk).ops=[];(this||wk).length=0}function w6(g,c){if(null==g)throw new TypeError("Cannot convert first argument to object");for(var k=Object(g),f=1;f<arguments.length;f++){var l=arguments[f];if(null!=l)for(var p=Object.keys(Object(l)),b=0,d=p.length;b<d;b++){var h=p[b],a=Object.getOwnPropertyDescriptor(l,h);void 0!==a&&a.enumerable&&(k[h]=l[h])}}return k}function x6(){function g(h){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:
function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(h)}function c(h){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(h)}function k(h,a){return(k=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(h,a)}function f(h,a,e){e||(e=Error);e=function(n){function q(r,v,y){if(!(this instanceof q))throw new TypeError("Cannot call a class as a function");!0;r=c(q).call(this,
"string"==typeof a?a:a(r,v,y));if(!r||"object"!==g(r)&&"function"!=typeof r){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");r=this}return r.code=h,r}return!function(r,v){if("function"!=typeof v&&null!==v)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(v&&v.prototype,{constructor:{value:r,writable:!0,configurable:!0}});v&&k(r,v)}(q,n),q}(e);d[h]=e}function l(h,a){if(Array.isArray(h)){var e=h.length;
return h=h.map(function(n){return String(n)}),2<e?"one of ".concat(a," ").concat(h.slice(0,e-1).join(", "),", or ")+h[e-1]:2===e?"one of ".concat(a," ").concat(h[0]," or ").concat(h[1]):"of ".concat(a," ").concat(h[0])}return"of ".concat(a," ").concat(String(h))}if(y6)return kQ;y6=!0;var p,b,d={};return f("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),f("ERR_INVALID_ARG_TYPE",function(h,a,e){var n;if(void 0===p&&(p=lQ()),p("string"==typeof h,"'name' must be a string"),"string"==
typeof a&&"not "===a.substr(0,4)?(n="must not be",a=a.replace(/^not /,"")):n="must be",function(r,v,y){return(void 0===y||y>r.length)&&(y=r.length),r.substring(y-v.length,y)===v}(h," argument"))h="The ".concat(h," ").concat(n," ").concat(l(a,"type"));else{var q=function(r,v,y){return"number"!=typeof y&&(y=0),!(y+v.length>r.length)&&-1!==r.indexOf(v,y)}(h,".")?"property":"argument";h='The "'.concat(h,'" ').concat(q," ").concat(n," ").concat(l(a,"type"))}return h+=". Received type ".concat(g(e))},TypeError),
f("ERR_INVALID_ARG_VALUE",function(h,a){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===b&&(b=Cg);var n=b.inspect(a);return 128<n.length&&(n="".concat(n.slice(0,128),"...")),"The argument '".concat(h,"' ").concat(e,". Received ").concat(n)},TypeError),f("ERR_INVALID_RETURN_VALUE",function(h,a,e){var n;return n=e&&e.constructor&&e.constructor.name?"instance of ".concat(e.constructor.name):"type ".concat(g(e)),"Expected ".concat(h,' to be returned from the "').concat(a,
'"')+" function but got ".concat(n,".")},TypeError),f("ERR_MISSING_ARGS",function(){for(var h=arguments.length,a=Array(h),e=0;e<h;e++)a[e]=arguments[e];void 0===p&&(p=lQ());p(0<a.length,"At least one arg needs to be specified");h="The ";e=a.length;switch(a=a.map(function(n){return'"'.concat(n,'"')}),e){case 1:h+="".concat(a[0]," argument");break;case 2:h+="".concat(a[0]," and ").concat(a[1]," arguments");break;default:h+=a.slice(0,e-1).join(", "),h+=", and ".concat(a[e-1]," arguments")}return"".concat(h,
" must be specified")},TypeError),kQ.codes=d,kQ}function zka(){function g(N,aa){for(var m=0;m<aa.length;m++){var t=aa[m];t.enumerable=t.enumerable||!1;t.configurable=!0;"value"in t&&(t.writable=!0);Object.defineProperty(N,t.key,t)}}function c(N,aa){return!aa||"object"!==h(aa)&&"function"!=typeof aa?k(N):aa}function k(N){if(void 0===N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function f(N){var aa="function"==typeof Map?new Map:void 0;return(f=function(m){function t(){return p(m,
arguments,d(this).constructor)}if(null===m||(u=m,-1===Function.toString.call(u).indexOf("[native code]")))return m;var u;if("function"!=typeof m)throw new TypeError("Super expression must either be null or a function");if(void 0!==aa){if(aa.has(m))return aa.get(m);aa.set(m,t)}return t.prototype=Object.create(m.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),b(t,m)})(N)}function l(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==
typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(N){return!1}}function p(N,aa,m){return(p=l()?Reflect.construct:function(t,u,B){var A=[null];A.push.apply(A,u);t=new (Function.bind.apply(t,A));return B&&b(t,B.prototype),t}).apply(null,arguments)}function b(N,aa){return(b=Object.setPrototypeOf||function(m,t){return m.__proto__=t,m})(N,aa)}function d(N){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(aa){return aa.__proto__||
Object.getPrototypeOf(aa)})(N)}function h(N){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(aa){return typeof aa}:function(aa){return aa&&"function"==typeof Symbol&&aa.constructor===Symbol&&aa!==Symbol.prototype?"symbol":typeof aa})(N)}function a(N,aa,m){return(void 0===m||m>N.length)&&(m=N.length),N.substring(m-aa.length,m)===aa}function e(N){var aa=Object.keys(N),m=Object.create(Object.getPrototypeOf(N));return aa.forEach(function(t){m[t]=N[t]}),Object.defineProperty(m,
"message",{value:N.message}),m}function n(N){return v(N,{compact:!1,customInspect:!1,depth:1E3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function q(N,aa,m){var t="",u="",B=0,A="",H=!1,F=n(N),L=F.split("\n"),U=n(aa).split("\n"),T=0,Y="";if("strictEqual"===m&&"object"===h(N)&&"object"===h(aa)&&null!==N&&null!==aa&&(m="strictEqualObject"),1===L.length&&1===U.length&&L[0]!==U[0]){var wa=L[0].length+U[0].length;if(10>=wa){if(!("object"===h(N)&&null!==N||"object"===
h(aa)&&null!==aa||0===N&&0===aa))return"".concat(P[m],"\n\n")+"".concat(L[0]," !== ").concat(U[0],"\n")}else if("strictEqualObject"!==m&&wa<(r.stderr&&r.stderr.isTTY?r.stderr.columns:80)){for(;L[0][T]===U[0][T];)T++;2<T&&(Y="\n  ".concat(function(da,ia){if(ia=Math.floor(ia),0==da.length||0==ia)return"";var Oa=da.length*ia;for(ia=Math.floor(Math.log(ia)/Math.log(2));ia;)da+=da,ia--;return da+da.substring(0,Oa-da.length)}(" ",T),"^"),T=0)}}N=L[L.length-1];for(aa=U[U.length-1];N===aa&&(2>T++?A="\n  ".concat(N).concat(A):
t=N,L.pop(),U.pop(),0!==L.length&&0!==U.length);)N=L[L.length-1],aa=U[U.length-1];N=Math.max(L.length,U.length);if(0===N){t=F.split("\n");if(30<t.length)for(t[26]="".concat(D,"...").concat(K);27<t.length;)t.pop();return"".concat(P.notIdentical,"\n\n").concat(t.join("\n"),"\n")}3<T&&(A="\n".concat(D,"...").concat(K).concat(A),H=!0);""!==t&&(A="\n  ".concat(t).concat(A),t="");F=0;m=P[m]+"\n".concat(E,"+ actual").concat(K," ").concat(I,"- expected").concat(K);aa=" ".concat(D,"...").concat(K," Lines skipped");
for(T=0;T<N;T++){wa=T-B;if(L.length<T+1)1<wa&&2<T&&(4<wa?(u+="\n".concat(D,"...").concat(K),H=!0):3<wa&&(u+="\n  ".concat(U[T-2]),F++),u+="\n  ".concat(U[T-1]),F++),B=T,t+="\n".concat(I,"-").concat(K," ").concat(U[T]),F++;else if(U.length<T+1)1<wa&&2<T&&(4<wa?(u+="\n".concat(D,"...").concat(K),H=!0):3<wa&&(u+="\n  ".concat(L[T-2]),F++),u+="\n  ".concat(L[T-1]),F++),B=T,u+="\n".concat(E,"+").concat(K," ").concat(L[T]),F++;else{var Ga=U[T],na=L[T],ea=na!==Ga&&(!a(na,",")||na.slice(0,-1)!==Ga);ea&&a(Ga,
",")&&Ga.slice(0,-1)===na&&(ea=!1,na+=",");ea?(1<wa&&2<T&&(4<wa?(u+="\n".concat(D,"...").concat(K),H=!0):3<wa&&(u+="\n  ".concat(L[T-2]),F++),u+="\n  ".concat(L[T-1]),F++),B=T,u+="\n".concat(E,"+").concat(K," ").concat(na),t+="\n".concat(I,"-").concat(K," ").concat(Ga),F+=2):(u+=t,t="",1!==wa&&0!==T||(u+="\n  ".concat(na),F++))}if(20<F&&T<N-2)return"".concat(m).concat(aa,"\n").concat(u,"\n").concat(D,"...").concat(K).concat(t,"\n")+"".concat(D,"...").concat(K)}return"".concat(m).concat(H?aa:"","\n").concat(u).concat(t).concat(A).concat(Y)}
if(z6)return A6;z6=!0;var r=Jg,v=Cg.inspect,y=x6().codes.ERR_INVALID_ARG_TYPE,D="",E="",I="",K="",P={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',
notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};return A6=function(N){function aa(t){if(!(this instanceof aa))throw new TypeError("Cannot call a class as a function");if(!0,"object"!==h(t)||null===t)throw new y("options","Object",t);var u=t.message,B=t.operator,A=t.stackStartFn,H=t.actual;
t=t.expected;var F=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=u)var L=c(this,d(aa).call(this,String(u)));else if(r.stderr&&r.stderr.isTTY&&(r.stderr&&r.stderr.getColorDepth&&1!==r.stderr.getColorDepth()?(D="\u001b[34m",E="\u001b[32m",K="\u001b[39m",I="\u001b[31m"):(D="",E="",K="",I="")),"object"===h(H)&&null!==H&&"object"===h(t)&&null!==t&&"stack"in H&&H instanceof Error&&"stack"in t&&t instanceof Error&&(H=e(H),t=e(t)),"deepStrictEqual"===B||"strictEqual"===B)L=c(this,d(aa).call(this,
q(H,t,B)));else if("notDeepStrictEqual"===B||"notStrictEqual"===B){L=P[B];var U=n(H).split("\n");if("notStrictEqual"===B&&"object"===h(H)&&null!==H&&(L=P.notStrictEqualObject),30<U.length)for(U[26]="".concat(D,"...").concat(K);27<U.length;)U.pop();L=1===U.length?c(this,d(aa).call(this,"".concat(L," ").concat(U[0]))):c(this,d(aa).call(this,"".concat(L,"\n\n").concat(U.join("\n"),"\n")))}else{L=n(H);U="";var T=P[B];"notDeepEqual"===B||"notEqual"===B?1024<(L="".concat(P[B],"\n\n").concat(L)).length&&
(L="".concat(L.slice(0,1021),"...")):(U="".concat(n(t)),512<L.length&&(L="".concat(L.slice(0,509),"...")),512<U.length&&(U="".concat(U.slice(0,509),"...")),"deepEqual"===B||"equal"===B?L="".concat(T,"\n\n").concat(L,"\n\nshould equal\n\n"):U=" ".concat(B," ").concat(U));L=c(this,d(aa).call(this,"".concat(L).concat(U)))}return Error.stackTraceLimit=F,L.generatedMessage=!u,Object.defineProperty(k(L),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),L.code="ERR_ASSERTION",
L.actual=H,L.expected=t,L.operator=B,Error.captureStackTrace&&Error.captureStackTrace(k(L),A),L.stack,L.name="AssertionError",c(L)}var m;return!function(t,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(u&&u.prototype,{constructor:{value:t,writable:!0,configurable:!0}});u&&b(t,u)}(aa,N),m=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:v.custom,
value:function(t,u){return v(this,function(B){for(var A=1;A<arguments.length;A++){var H=null!=arguments[A]?arguments[A]:{},F=Object.keys(H);"function"==typeof Object.getOwnPropertySymbols&&(F=F.concat(Object.getOwnPropertySymbols(H).filter(function(L){return Object.getOwnPropertyDescriptor(H,L).enumerable})));F.forEach(function(L){var U=H[L];L in B?Object.defineProperty(B,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):B[L]=U})}return B}({},u,{customInspect:!1,depth:0}))}}],g(aa.prototype,
m),aa}(f(Error))}function B6(g,c){if(!(g=function(k){if(Array.isArray(k))return k}(g)||function(k,f){var l=[],p=!0,b=!1,d=void 0;try{for(var h,a=k[Symbol.iterator]();!(p=(h=a.next()).done)&&(l.push(h.value),!f||l.length!==f);p=!0);}catch(e){b=!0,d=e}finally{try{p||null==a.return||a.return()}finally{if(b)throw d;}}return l}(g,c)))throw new TypeError("Invalid attempt to destructure non-iterable instance");return g}function bp(g){return(bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?
function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(g)}function mQ(g){return g.call.bind(g)}function Aka(g){if(0===g.length||10<g.length)return!0;for(var c=0;c<g.length;c++){var k=g.charCodeAt(c);if(48>k||57<k)return!0}return 10===g.length&&g>=Math.pow(2,32)}function zG(g){return Object.keys(g).filter(Aka).concat(AG(g).filter(Object.prototype.propertyIsEnumerable.bind(g)))}function C6(g,c){if(g===c)return 0;
for(var k=g.length,f=c.length,l=0,p=Math.min(k,f);l<p;++l)if(g[l]!==c[l]){k=g[l];f=c[l];break}return k<f?-1:f<k?1:0}function co(g,c,k,f){if(g===c)return 0!==g||!k||D6(g,c);if(k){if("object"!==bp(g))return"number"==typeof g&&nQ(g)&&nQ(c);if("object"!==bp(c)||null===g||null===c||Object.getPrototypeOf(g)!==Object.getPrototypeOf(c))return!1}else{if(null===g||"object"!==bp(g))return(null===c||"object"!==bp(c))&&g==c;if(null===c||"object"!==bp(c))return!1}var l=E6(g);if(l!==E6(c))return!1;if(Array.isArray(g)){if(g.length!==
c.length)return!1;l=zG(g);var p=zG(c);return l.length===p.length&&YA(g,c,k,f,1,l)}if("[object Object]"===l&&(!BG(g)&&BG(c)||!CG(g)&&CG(c)))return!1;if(F6(g)){if(!F6(c)||Date.prototype.getTime.call(g)!==Date.prototype.getTime.call(c))return!1}else if(G6(g)){if(!G6(c)||(Bka?g.source!==c.source||g.flags!==c.flags:RegExp.prototype.toString.call(g)!==RegExp.prototype.toString.call(c)))return!1}else if(Cka(g)||g instanceof Error){if(g.message!==c.message||g.name!==c.name)return!1}else{if(Dka(g)){if(k||
!Eka(g)&&!Fka(g)){if(!function(b,d){return b.byteLength===d.byteLength&&0===C6(new Uint8Array(b.buffer,b.byteOffset,b.byteLength),new Uint8Array(d.buffer,d.byteOffset,d.byteLength))}(g,c))return!1}else if(!function(b,d){if(b.byteLength!==d.byteLength)return!1;for(var h=0;h<b.byteLength;h++)if(b[h]!==d[h])return!1;return!0}(g,c))return!1;l=zG(g);p=zG(c);return l.length===p.length&&YA(g,c,k,f,0,l)}if(CG(g))return!(!CG(c)||g.size!==c.size)&&YA(g,c,k,f,2);if(BG(g))return!(!BG(c)||g.size!==c.size)&&YA(g,
c,k,f,3);if(Gka(g)){if(g.byteLength!==c.byteLength||0!==C6(new Uint8Array(g),new Uint8Array(c)))return!1}else if(Hka(g)&&!function(b,d){return H6(b)?H6(d)&&D6(Number.prototype.valueOf.call(b),Number.prototype.valueOf.call(d)):I6(b)?I6(d)&&String.prototype.valueOf.call(b)===String.prototype.valueOf.call(d):J6(b)?J6(d)&&Boolean.prototype.valueOf.call(b)===Boolean.prototype.valueOf.call(d):K6(b)?K6(d)&&BigInt.prototype.valueOf.call(b)===BigInt.prototype.valueOf.call(d):Ika(d)&&Symbol.prototype.valueOf.call(b)===
Symbol.prototype.valueOf.call(d)}(g,c))return!1}return YA(g,c,k,f,0)}function L6(g,c){return c.filter(function(k){return DG(g,k)})}function YA(g,c,k,f,l,p){if(5===arguments.length){p=Object.keys(g);var b=Object.keys(c);if(p.length!==b.length)return!1}for(var d=0;d<p.length;d++)if(!ZA(c,p[d]))return!1;if(k&&5===arguments.length)if(b=AG(g),0!==b.length){var h=0;for(d=0;d<b.length;d++){var a=b[d];if(DG(g,a)){if(!DG(c,a))return!1;p.push(a);h++}else if(DG(c,a))return!1}d=AG(c);if(b.length!==d.length&&
L6(c,d).length!==h)return!1}else if(b=AG(c),0!==b.length&&0!==L6(c,b).length)return!1;if(0===p.length&&(0===l||1===l&&0===g.length||0===g.size))return!0;if(void 0===f)f={val1:new Map,val2:new Map,position:0};else{b=f.val1.get(g);if(void 0!==b&&(h=f.val2.get(c),void 0!==h))return b===h;f.position++}f.val1.set(g,f.position);f.val2.set(c,f.position);b=Jka(g,c,k,p,f,l);return f.val1.delete(g),f.val2.delete(c),b}function M6(g,c,k,f){for(var l=EG(g),p=0;p<l.length;p++){var b=l[p];if(co(c,b,k,f))return g.delete(b),
!0}return!1}function N6(g){switch(bp(g)){case "undefined":return null;case "object":return;case "symbol":return!1;case "string":g=+g;case "number":if(nQ(g))return!1}return!0}function O6(g,c,k,f,l,p){for(var b=EG(g),d=0;d<b.length;d++){var h=b[d];if(co(k,h,l,p)&&co(f,c.get(h),l,p))return g.delete(h),!0}return!1}function Jka(g,c,k,f,l,p){var b=0;if(2===p){if(!function(d,h,a,e){for(var n=null,q=EG(d),r=0;r<q.length;r++){var v=q[r];if("object"===bp(v)&&null!==v)null===n&&(n=new Set),n.add(v);else if(!h.has(v)){if(a)return!1;
var y=d,D=h,E=N6(v);if(null!=E?!E:!D.has(E)||y.has(E))return!1;null===n&&(n=new Set);n.add(v)}}if(null!==n){h=EG(h);for(q=0;q<h.length;q++)if(r=h[q],"object"===bp(r)&&null!==r){if(!M6(n,r,a,e))return!1}else if(!a&&!d.has(r)&&!M6(n,r,a,e))return!1;return 0===n.size}return!0}(g,c,k,l))return!1}else if(3===p){if(!function(d,h,a,e){for(var n=null,q=P6(d),r=0;r<q.length;r++){var v=B6(q[r],2),y=v[0],D=v[1];if("object"===bp(y)&&null!==y)null===n&&(n=new Set),n.add(y);else if(v=h.get(y),void 0===v&&!h.has(y)||
!co(D,v,a,e)){if(a)return!1;v=d;var E=h,I=e,K=N6(y);if(null!=K)v=K;else{var P=E.get(K);v=!(void 0===P&&!E.has(K)||!co(D,P,!1,I))&&!v.has(K)&&co(D,P,!1,I)}if(!v)return!1;null===n&&(n=new Set);n.add(y)}}if(null!==n){h=P6(h);for(q=0;q<h.length;q++)if(r=B6(h[q],2),r=(y=r[0],r[1]),"object"===bp(y)&&null!==y){if(!O6(n,d,y,r,a,e))return!1}else if(!(a||d.has(y)&&co(d.get(y),r,!1,e)||O6(n,d,y,r,!1,e)))return!1;return 0===n.size}return!0}(g,c,k,l))return!1}else if(1===p)for(;b<g.length;b++){if(!ZA(g,b)){if(ZA(c,
b))return!1;for(f=Object.keys(g);b<f.length;b++)if(p=f[b],!ZA(c,p)||!co(g[p],c[p],k,l))return!1;return f.length===Object.keys(c).length}if(!ZA(c,b)||!co(g[b],c[b],k,l))return!1}for(b=0;b<f.length;b++)if(p=f[b],!co(g[p],c[p],k,l))return!1;return!0}function lQ(){function g(L){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(U){return typeof U}:function(U){return U&&"function"==typeof Symbol&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(L)}function c(){r=
Q6.isDeepEqual;v=Q6.isDeepStrictEqual}function k(L){if(L.message instanceof Error)throw L.message;throw new N(L);}function f(L,U,T,Y){if(!T){var wa=!1;if(0===U)wa=!0,Y="No value argument passed to `assert.ok()`";else if(Y instanceof Error)throw Y;L=new N({actual:T,expected:!0,message:Y,operator:"==",stackStartFn:L});throw L.generatedMessage=wa,L;}}function l(){for(var L=arguments.length,U=Array(L),T=0;T<L;T++)U[T]=arguments[T];f.apply(void 0,[l,U.length].concat(U))}function p(L,U,T,Y){if("function"!=
typeof U){if(t(U))return U.test(L);if(2===arguments.length)throw new E("expected",["Function","RegExp"],U);if("object"!==g(L)||null===L){var wa=new N({actual:L,expected:U,message:T,operator:"deepStrictEqual",stackStartFn:Y});throw wa.operator=Y.name,wa;}var Ga=Object.keys(U);if(U instanceof Error)Ga.push("name","message");else if(0===Ga.length)throw new I("error",U,"may not be an empty object");return void 0===r&&c(),Ga.forEach(function(na){if(!("string"==typeof L[na]&&t(U[na])&&U[na].test(L[na])||
na in L&&v(L[na],U[na]))){if(!T){na=new F(L,Ga);var ea=new F(U,Ga,L);na=new N({actual:na,expected:ea,operator:"deepStrictEqual",stackStartFn:Y});throw na.actual=L,na.expected=U,na.operator=Y.name,na;}k({actual:L,expected:U,message:T,operator:Y.name,stackStartFn:Y})}}),!0}return void 0!==U.prototype&&L instanceof U||!Error.isPrototypeOf(U)&&!0===U.call({},L)}function b(L){if("function"!=typeof L)throw new E("fn","Function",L);try{L()}catch(U){return U}return H}function d(L){return m(L)||null!==L&&
"object"===g(L)&&"function"==typeof L.then&&"function"==typeof L.catch}function h(L){return Promise.resolve().then(function(){var U;if("function"==typeof L){if(!d(U=L()))throw new K("instance of Promise","promiseFn",U);}else{if(!d(L))throw new E("promiseFn",["Function","Promise"],L);U=L}return Promise.resolve().then(function(){return U}).then(function(){return H}).catch(function(T){return T})})}function a(L,U,T,Y){if("string"==typeof T){if(4===arguments.length)throw new E("error",["Object","Error",
"Function","RegExp"],T);if("object"===g(U)&&null!==U){if(U.message===T)throw new D("error/message",'The error message "'.concat(U.message,'" is identical to the message.'));}else if(U===T)throw new D("error/message",'The error "'.concat(U,'" is identical to the message.'));Y=T;T=void 0}else if(null!=T&&"object"!==g(T)&&"function"!=typeof T)throw new E("error",["Object","Error","Function","RegExp"],T);if(U===H){var wa="";T&&T.name&&(wa+=" (".concat(T.name,")"));wa+=Y?": ".concat(Y):".";k({actual:void 0,
expected:T,operator:L.name,message:"Missing expected ".concat("rejects"===L.name?"rejection":"exception").concat(wa),stackStartFn:L})}if(T&&!p(U,T,Y,L))throw U;}function e(L,U,T,Y){if(U!==H){if("string"==typeof T&&(Y=T,T=void 0),!T||p(U,T))Y=Y?": ".concat(Y):".",k({actual:U,expected:T,operator:L.name,message:"Got unwanted ".concat("doesNotReject"===L.name?"rejection":"exception").concat(Y,"\n")+'Actual message: "'.concat(U&&U.message,'"'),stackStartFn:L});throw U;}}function n(){for(var L=arguments.length,
U=Array(L),T=0;T<L;T++)U[T]=arguments[T];f.apply(void 0,[n,U.length].concat(U))}if(R6)return oQ;R6=!0;var q=Jg,r,v,y=x6().codes,D=y.ERR_AMBIGUOUS_ARGUMENT,E=y.ERR_INVALID_ARG_TYPE,I=y.ERR_INVALID_ARG_VALUE,K=y.ERR_INVALID_RETURN_VALUE,P=y.ERR_MISSING_ARGS,N=zka(),aa=Cg.inspect;y=Cg.types;var m=y.isPromise,t=y.isRegExp;y=Object.assign?Object.assign:Kka.assign;var u=Object.is?Object.is:S6,B=!1,A=oQ=l,H={};A.fail=function na(U,T,Y,wa,Ga){var ea=arguments.length;if(0===ea)var da="Failed";else 1===ea?
(Y=U,U=void 0):(!1===B&&(B=!0,(q.emitWarning?q.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===ea&&(wa="!="));if(Y instanceof Error)throw Y;ea={actual:U,expected:T,operator:void 0===wa?"fail":wa,stackStartFn:Ga||na};void 0!==Y&&(ea.message=Y);ea=new N(ea);throw da&&(ea.message=da,ea.generatedMessage=!0),ea;};A.AssertionError=N;A.ok=l;A.equal=function Ga(T,
Y,wa){if(2>arguments.length)throw new P("actual","expected");T!=Y&&k({actual:T,expected:Y,message:wa,operator:"==",stackStartFn:Ga})};A.notEqual=function na(Y,wa,Ga){if(2>arguments.length)throw new P("actual","expected");Y==wa&&k({actual:Y,expected:wa,message:Ga,operator:"!=",stackStartFn:na})};A.deepEqual=function ea(wa,Ga,na){if(2>arguments.length)throw new P("actual","expected");void 0===r&&c();r(wa,Ga)||k({actual:wa,expected:Ga,message:na,operator:"deepEqual",stackStartFn:ea})};A.notDeepEqual=
function da(Ga,na,ea){if(2>arguments.length)throw new P("actual","expected");void 0===r&&c();r(Ga,na)&&k({actual:Ga,expected:na,message:ea,operator:"notDeepEqual",stackStartFn:da})};A.deepStrictEqual=function ia(na,ea,da){if(2>arguments.length)throw new P("actual","expected");void 0===r&&c();v(na,ea)||k({actual:na,expected:ea,message:da,operator:"deepStrictEqual",stackStartFn:ia})};A.notDeepStrictEqual=function Oa(ea,da,ia){if(2>arguments.length)throw new P("actual","expected");void 0===r&&c();v(ea,
da)&&k({actual:ea,expected:da,message:ia,operator:"notDeepStrictEqual",stackStartFn:Oa})};A.strictEqual=function Va(da,ia,Oa){if(2>arguments.length)throw new P("actual","expected");u(da,ia)||k({actual:da,expected:ia,message:Oa,operator:"strictEqual",stackStartFn:Va})};A.notStrictEqual=function eb(ia,Oa,Va){if(2>arguments.length)throw new P("actual","expected");u(ia,Oa)&&k({actual:ia,expected:Oa,message:Va,operator:"notStrictEqual",stackStartFn:eb})};var F=function Sa(Oa,Va,eb){var Bb=this;if(!(this instanceof
Sa))throw new TypeError("Cannot call a class as a function");!0;Va.forEach(function(Z){Z in Oa&&(void 0!==eb&&"string"==typeof eb[Z]&&t(Oa[Z])&&Oa[Z].test(eb[Z])?Bb[Z]=eb[Z]:Bb[Z]=Oa[Z])})};return A.throws=function eb(Va){for(var Sa=arguments.length,Bb=Array(1<Sa?Sa-1:0),Z=1;Z<Sa;Z++)Bb[Z-1]=arguments[Z];a.apply(void 0,[eb,b(Va)].concat(Bb))},A.rejects=function Sa(eb){for(var Bb=arguments.length,Z=Array(1<Bb?Bb-1:0),sa=1;sa<Bb;sa++)Z[sa-1]=arguments[sa];return h(eb).then(function(Da){return a.apply(void 0,
[Sa,Da].concat(Z))})},A.doesNotThrow=function Bb(Sa){for(var Z=arguments.length,sa=Array(1<Z?Z-1:0),Da=1;Da<Z;Da++)sa[Da-1]=arguments[Da];e.apply(void 0,[Bb,b(Sa)].concat(sa))},A.doesNotReject=function Z(Bb){for(var sa=arguments.length,Da=Array(1<sa?sa-1:0),X=1;X<sa;X++)Da[X-1]=arguments[X];return h(Bb).then(function(ma){return e.apply(void 0,[Z,ma].concat(Da))})},A.ifError=function sa(Z){if(null!=Z){var Da="ifError got unwanted exception: ";"object"===g(Z)&&"string"==typeof Z.message?0===Z.message.length&&
Z.constructor?Da+=Z.constructor.name:Da+=Z.message:Da+=aa(Z);Da=new N({actual:Z,expected:null,operator:"ifError",message:Da,stackStartFn:sa});Z=Z.stack;if("string"==typeof Z){Z=Z.split("\n");Z.shift();for(var X=Da.stack.split("\n"),ma=0;ma<Z.length;ma++){var ta=X.indexOf(Z[ma]);if(-1!==ta){X=X.slice(0,ta);break}}Da.stack="".concat(X.join("\n"),"\n").concat(Z.join("\n"))}throw Da;}},A.strict=y(n,A,{equal:A.strictEqual,deepEqual:A.deepStrictEqual,notEqual:A.notStrictEqual,notDeepEqual:A.notDeepStrictEqual}),
A.strict.strict=A.strict,oQ}function mj(g,c,k){if(!((this||lh)instanceof mj))return new mj(g,c,k);var f=this||lh;FG.call(this||lh);this.setMaxListeners(Infinity);"function"===typeof c&&(k=c,c={});c=c||{};if(!g||"object"!==typeof g){g=new Lka("First argument must be an abstract-leveldown compliant store");if("function"===typeof k)return GG.nextTick(k,g);throw g;}Mka.strictEqual(typeof g.status,"string",".status required, old abstract-leveldown");(this||lh).options=Wx(c);(this||lh)._db=g;(this||lh).db=
new T6(g);this.open(k||function(l){l&&f.emit("error",l)});(this||lh).supports=Nka((this||lh).db.supports,{status:!1,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0});Object.keys((this||lh).supports.additionalMethods).forEach(function(l){null==(this||lh)[l]&&((this||lh)[l]=function(){return(this||lh).db[l].apply((this||lh).db,arguments)})},this||lh)}function $A(g,c){if(!g._isOpening()&&!g.isOpen())return GG.nextTick(c,new U6("Database is not open")),!0}function $p(g,c){return Object.hasOwnProperty.call(g,
c)&&c}function Oka(g){return g}function HG(g){return g}function pQ(g){return void 0===g||null===g||qQ.isBuffer(g)}function im(g){if(!((this||pr)instanceof im))return new im(g);(this||pr).opts=g||{};(this||pr).encodings=rQ}function Pka(g){return g.toString((this||Tf).encoding)}function Qka(g){(this||Tf).charReceived=g.length%2;(this||Tf).charLength=(this||Tf).charReceived?2:0}function Rka(g){(this||Tf).charReceived=g.length%3;(this||Tf).charLength=(this||Tf).charReceived?3:0}function V6(){function g(E,
I,K){(this||mh).chunk=E;(this||mh).encoding=I;(this||mh).callback=K}function c(E,I){var K=Xx();E=E||{};var P=E.highWaterMark,N=E.objectMode?16:16384;(this||mh).highWaterMark=P||0===P?P:N;(this||mh).objectMode=!!E.objectMode;I instanceof K&&((this||mh).objectMode=(this||mh).objectMode||!!E.writableObjectMode);(this||mh).highWaterMark=~~(this||mh).highWaterMark;(this||mh).needDrain=!1;(this||mh).ending=!1;(this||mh).ended=!1;(this||mh).finished=!1;(this||mh).decodeStrings=!1!==E.decodeStrings;(this||
mh).defaultEncoding=E.defaultEncoding||"utf8";(this||mh).length=0;(this||mh).writing=!1;(this||mh).corked=0;(this||mh).sync=!0;(this||mh).bufferProcessing=!1;(this||mh).onwrite=function(aa){a(I,aa)};(this||mh).writecb=null;(this||mh).writelen=0;(this||mh).buffer=[];(this||mh).pendingcb=0;(this||mh).prefinished=!1;(this||mh).errorEmitted=!1}function k(E){var I=Xx();if(!((this||mh)instanceof k||(this||mh)instanceof I))return new k(E);(this||mh)._writableState=new c(E,this||mh);(this||mh).writable=!0;
D.call(this||mh)}function f(E,I,K){var P=Error("write after end");E.emit("error",P);r.nextTick(function(){K(P)})}function l(E,I,K,P){var N=!0;if(!(y.isBuffer(K)||y.isString(K)||y.isNullOrUndefined(K)||I.objectMode)){var aa=new TypeError("Invalid non-string/buffer chunk");E.emit("error",aa);r.nextTick(function(){P(aa)});N=!1}return N}function p(E,I,K,P,N){var aa=P;!I.objectMode&&!1!==I.decodeStrings&&y.isString(K)&&(K=new v(K,aa));y.isBuffer(K)&&(P="buffer");aa=I.objectMode?1:K.length;I.length+=aa;
var m=I.length<I.highWaterMark;m||(I.needDrain=!0);I.writing||I.corked?I.buffer.push(new g(K,P,N)):b(E,I,!1,aa,K,P,N);return m}function b(E,I,K,P,N,aa,m){I.writelen=P;I.writecb=m;I.writing=!0;I.sync=!0;K?E._writev(N,I.onwrite):E._write(N,aa,I.onwrite);I.sync=!1}function d(E,I,K,P,N){K?r.nextTick(function(){I.pendingcb--;N(P)}):(I.pendingcb--,N(P));E._writableState.errorEmitted=!0;E.emit("error",P)}function h(E){E.writing=!1;E.writecb=null;E.length-=E.writelen;E.writelen=0}function a(E,I){var K=E._writableState,
P=K.sync,N=K.writecb;h(K);if(I)d(E,K,P,I,N);else{var aa=K.ending&&0===K.length&&!K.finished&&!K.writing;aa||K.corked||K.bufferProcessing||!K.buffer.length||n(E,K);P?r.nextTick(function(){e(E,K,aa,N)}):e(E,K,aa,N)}}function e(E,I,K,P){!K&&0===I.length&&I.needDrain&&(I.needDrain=!1,E.emit("drain"));I.pendingcb--;P();q(E,I)}function n(E,I){I.bufferProcessing=!0;if(E._writev&&1<I.buffer.length){for(var K=[],P=0;P<I.buffer.length;P++)K.push(I.buffer[P].callback);I.pendingcb++;b(E,I,!0,I.length,I.buffer,
"",function(m){for(var t=0;t<K.length;t++)I.pendingcb--,K[t](m)});I.buffer=[]}else{for(P=0;P<I.buffer.length;P++){var N=I.buffer[P],aa=N.chunk;b(E,I,!1,I.objectMode?1:aa.length,aa,N.encoding,N.callback);if(I.writing){P++;break}}P<I.buffer.length?I.buffer=I.buffer.slice(P):I.buffer.length=0}I.bufferProcessing=!1}function q(E,I){var K=I.ending&&0===I.length&&!I.finished&&!I.writing;K&&(0===I.pendingcb?(I.prefinished||(I.prefinished=!0,E.emit("prefinish")),I.finished=!0,E.emit("finish")):I.prefinished||
(I.prefinished=!0,E.emit("prefinish")));return K}if(W6)return sQ;W6=!0;var r=sk;sQ=k;var v=ol.Buffer;k.WritableState=c;var y=xk;y.inherits=Dj;var D=Yx;y.inherits(k,D);k.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))};k.prototype.write=function(E,I,K){var P=(this||mh)._writableState,N=!1;y.isFunction(I)&&(K=I,I=null);y.isBuffer(E)?I="buffer":I||(I=P.defaultEncoding);y.isFunction(K)||(K=function(){});P.ended?f(this||mh,P,K):l(this||mh,P,E,K)&&(P.pendingcb++,N=p(this||
mh,P,E,I,K));return N};k.prototype.cork=function(){(this||mh)._writableState.corked++};k.prototype.uncork=function(){var E=(this||mh)._writableState;E.corked&&(E.corked--,E.writing||E.corked||E.finished||E.bufferProcessing||!E.buffer.length||n(this||mh,E))};k.prototype._write=function(E,I,K){K(Error("not implemented"))};k.prototype._writev=null;k.prototype.end=function(E,I,K){var P=(this||mh)._writableState;y.isFunction(E)?(K=E,I=E=null):y.isFunction(I)&&(K=I,I=null);y.isNullOrUndefined(E)||this.write(E,
I);P.corked&&(P.corked=1,this.uncork());if(!P.ending&&!P.finished){E=this||mh;P.ending=!0;q(E,P);if(K)if(P.finished)r.nextTick(K);else E.once("finish",K);P.ended=!0}};return sQ}function Xx(){function g(d){if(!((this||cp)instanceof g))return new g(d);p.call(this||cp,d);b.call(this||cp,d);d&&!1===d.readable&&((this||cp).readable=!1);d&&!1===d.writable&&((this||cp).writable=!1);(this||cp).allowHalfOpen=!0;d&&!1===d.allowHalfOpen&&((this||cp).allowHalfOpen=!1);this.once("end",c)}function c(){(this||cp).allowHalfOpen||
(this||cp)._writableState.ended||k.nextTick((this||cp).end.bind(this||cp))}if(X6)return tQ;X6=!0;var k=sk;tQ=g;var f=Object.keys||function(d){var h=[],a;for(a in d)h.push(a);return h},l=xk;l.inherits=Dj;var p=Y6(),b=V6();l.inherits(g,p);(function(d,h){for(var a=0,e=d.length;a<e;a++)h(d[a],a)})(f(b.prototype),function(d){g.prototype[d]||(g.prototype[d]=b.prototype[d])});return tQ}function Y6(){function g(N,aa){var m=Xx();N=N||{};var t=N.highWaterMark,u=N.objectMode?16:16384;(this||lf).highWaterMark=
t||0===t?t:u;(this||lf).highWaterMark=~~(this||lf).highWaterMark;(this||lf).buffer=[];(this||lf).length=0;(this||lf).pipes=null;(this||lf).pipesCount=0;(this||lf).flowing=null;(this||lf).ended=!1;(this||lf).endEmitted=!1;(this||lf).reading=!1;(this||lf).sync=!0;(this||lf).needReadable=!1;(this||lf).emittedReadable=!1;(this||lf).readableListening=!1;(this||lf).objectMode=!!N.objectMode;aa instanceof m&&((this||lf).objectMode=(this||lf).objectMode||!!N.readableObjectMode);(this||lf).defaultEncoding=
N.defaultEncoding||"utf8";(this||lf).ranOut=!1;(this||lf).awaitDrain=0;(this||lf).readingMore=!1;(this||lf).decoder=null;(this||lf).encoding=null;N.encoding&&(K||(K=uQ.StringDecoder),(this||lf).decoder=new K(N.encoding),(this||lf).encoding=N.encoding)}function c(N){Xx();if(!((this||lf)instanceof c))return new c(N);(this||lf)._readableState=new g(N,this||lf);(this||lf).readable=!0;E.call(this||lf)}function k(N,aa,m,t,u){var B=m;var A=null;I.isBuffer(B)||I.isString(B)||I.isNullOrUndefined(B)||aa.objectMode||
(A=new TypeError("Invalid non-string/buffer chunk"));(B=A)?N.emit("error",B):I.isNullOrUndefined(m)?(aa.reading=!1,aa.ended||(aa.decoder&&!aa.ended&&(m=aa.decoder.end())&&m.length&&(aa.buffer.push(m),aa.length+=aa.objectMode?1:m.length),aa.ended=!0,l(N))):aa.objectMode||m&&0<m.length?aa.ended&&!u?(m=Error("stream.push() after EOF"),N.emit("error",m)):aa.endEmitted&&u?(m=Error("stream.unshift() after end event"),N.emit("error",m)):(!aa.decoder||u||t||(m=aa.decoder.write(m)),u||(aa.reading=!1),aa.flowing&&
0===aa.length&&!aa.sync?(N.emit("data",m),N.read(0)):(aa.length+=aa.objectMode?1:m.length,u?aa.buffer.unshift(m):aa.buffer.push(m),aa.needReadable&&l(N)),b(N,aa)):u||(aa.reading=!1);return!aa.ended&&(aa.needReadable||aa.length<aa.highWaterMark||0===aa.length)}function f(N,aa){if(0===aa.length&&aa.ended)return 0;if(aa.objectMode)return 0===N?0:1;if(isNaN(N)||I.isNull(N))return aa.flowing&&aa.buffer.length?aa.buffer[0].length:aa.length;if(0>=N)return 0;if(N>aa.highWaterMark){var m=N;if(8388608<=m)m=
8388608;else{m--;for(var t=1;32>t;t<<=1)m|=m>>t;m++}aa.highWaterMark=m}if(N>aa.length){if(aa.ended)return aa.length;aa.needReadable=!0;return 0}return N}function l(N){var aa=N._readableState;aa.needReadable=!1;aa.emittedReadable||(P("emitReadable",aa.flowing),aa.emittedReadable=!0,aa.sync?r.nextTick(function(){p(N)}):p(N))}function p(N){P("emit readable");N.emit("readable");a(N)}function b(N,aa){aa.readingMore||(aa.readingMore=!0,r.nextTick(function(){for(var m=aa.length;!aa.reading&&!aa.flowing&&
!aa.ended&&aa.length<aa.highWaterMark&&(P("maybeReadMore read 0"),N.read(0),m!==aa.length);)m=aa.length;aa.readingMore=!1}))}function d(N){return function(){var aa=N._readableState;P("pipeOnDrain",aa.awaitDrain);aa.awaitDrain&&aa.awaitDrain--;0===aa.awaitDrain&&D.listenerCount(N,"data")&&(aa.flowing=!0,a(N))}}function h(N,aa){aa.resumeScheduled||(aa.resumeScheduled=!0,r.nextTick(function(){aa.resumeScheduled=!1;N.emit("resume");a(N);aa.flowing&&!aa.reading&&N.read(0)}))}function a(N){var aa=N._readableState;
P("flow",aa.flowing);if(aa.flowing){do var m=N.read();while(null!==m&&aa.flowing)}}function e(N,aa){var m=aa.buffer,t=aa.length,u=!!aa.decoder;aa=!!aa.objectMode;if(0===m.length)return null;if(0===t)t=null;else if(aa)t=m.shift();else if(!N||N>=t)t=u?m.join(""):y.concat(m,t),m.length=0;else if(N<m[0].length)aa=m[0],t=aa.slice(0,N),m[0]=aa.slice(N);else if(N===m[0].length)t=m.shift();else{t=u?"":new y(N);for(var B=0,A=0,H=m.length;A<H&&B<N;A++){aa=m[0];var F=Math.min(N-B,aa.length);u?t+=aa.slice(0,
F):aa.copy(t,B,0,F);F<aa.length?m[0]=aa.slice(F):m.shift();B+=F}}return t}function n(N){var aa=N._readableState;if(0<aa.length)throw Error("endReadable called on non-empty stream");aa.endEmitted||(aa.ended=!0,r.nextTick(function(){aa.endEmitted||0!==aa.length||(aa.endEmitted=!0,N.readable=!1,N.emit("end"))}))}function q(N,aa){for(var m=0,t=N.length;m<t;m++)aa(N[m],m)}if(Z6)return vQ;Z6=!0;var r=sk;vQ=c;var v=Ska,y=ol.Buffer;c.ReadableState=g;var D=Fl.EventEmitter;D.listenerCount||(D.listenerCount=
function(N,aa){return N.listeners(aa).length});var E=Yx,I=xk;I.inherits=Dj;var K,P=Tka;P=P&&P.debuglog?P.debuglog("stream"):function(){};I.inherits(c,E);c.prototype.push=function(N,aa){var m=(this||lf)._readableState;I.isString(N)&&!m.objectMode&&(aa=aa||m.defaultEncoding,aa!==m.encoding&&(N=new y(N,aa),aa=""));return k(this||lf,m,N,aa,!1)};c.prototype.unshift=function(N){return k(this||lf,(this||lf)._readableState,N,"",!0)};c.prototype.setEncoding=function(N){K||(K=uQ.StringDecoder);(this||lf)._readableState.decoder=
new K(N);(this||lf)._readableState.encoding=N;return this||lf};c.prototype.read=function(N){P("read",N);var aa=(this||lf)._readableState,m=N;if(!I.isNumber(N)||0<N)aa.emittedReadable=!1;if(0===N&&aa.needReadable&&(aa.length>=aa.highWaterMark||aa.ended))return P("read: emitReadable",aa.length,aa.ended),0===aa.length&&aa.ended?n(this||lf):l(this||lf),null;N=f(N,aa);if(0===N&&aa.ended)return 0===aa.length&&n(this||lf),null;var t=aa.needReadable;P("need readable",t);if(0===aa.length||aa.length-N<aa.highWaterMark)t=
!0,P("length less than watermark",t);if(aa.ended||aa.reading)t=!1,P("reading or ended",t);t&&(P("do read"),aa.reading=!0,aa.sync=!0,0===aa.length&&(aa.needReadable=!0),this._read(aa.highWaterMark),aa.sync=!1);t&&!aa.reading&&(N=f(m,aa));t=0<N?e(N,aa):null;I.isNull(t)&&(aa.needReadable=!0,N=0);aa.length-=N;0!==aa.length||aa.ended||(aa.needReadable=!0);m!==N&&aa.ended&&0===aa.length&&n(this||lf);I.isNull(t)||this.emit("data",t);return t};c.prototype._read=function(N){this.emit("error",Error("not implemented"))};
c.prototype.pipe=function(N,aa){function m(wa){P("onunpipe");wa===U&&u()}function t(){P("onend");N.end()}function u(){P("cleanup");N.removeListener("close",H);N.removeListener("finish",F);N.removeListener("drain",Y);N.removeListener("error",A);N.removeListener("unpipe",m);U.removeListener("end",t);U.removeListener("end",u);U.removeListener("data",B);!T.awaitDrain||N._writableState&&!N._writableState.needDrain||Y()}function B(wa){P("ondata");!1===N.write(wa)&&(P("false write response, pause",U._readableState.awaitDrain),
U._readableState.awaitDrain++,U.pause())}function A(wa){P("onerror",wa);L();N.removeListener("error",A);0===D.listenerCount(N,"error")&&N.emit("error",wa)}function H(){N.removeListener("finish",F);L()}function F(){P("onfinish");N.removeListener("close",H);L()}function L(){P("unpipe");U.unpipe(N)}var U=this||lf,T=(this||lf)._readableState;switch(T.pipesCount){case 0:T.pipes=N;break;case 1:T.pipes=[T.pipes,N];break;default:T.pipes.push(N)}T.pipesCount+=1;P("pipe count=%d opts=%j",T.pipesCount,aa);aa=
aa&&!1===aa.end||N===r.stdout||N===r.stderr?u:t;if(T.endEmitted)r.nextTick(aa);else U.once("end",aa);N.on("unpipe",m);var Y=d(U);N.on("drain",Y);U.on("data",B);if(N._events&&N._events.error)v(N._events.error)?N._events.error.unshift(A):N._events.error=[A,N._events.error];else N.on("error",A);N.once("close",H);N.once("finish",F);N.emit("pipe",U);T.flowing||(P("pipe resume"),U.resume());return N};c.prototype.unpipe=function(N){var aa=(this||lf)._readableState;if(0===aa.pipesCount)return this||lf;if(1===
aa.pipesCount){if(N&&N!==aa.pipes)return this||lf;N||(N=aa.pipes);aa.pipes=null;aa.pipesCount=0;aa.flowing=!1;N&&N.emit("unpipe",this||lf);return this||lf}if(!N){N=aa.pipes;var m=aa.pipesCount;aa.pipes=null;aa.pipesCount=0;aa.flowing=!1;for(var t=0;t<m;t++)N[t].emit("unpipe",this||lf);return this||lf}a:{t=aa.pipes;m=0;for(var u=t.length;m<u;m++)if(t[m]===N){t=m;break a}t=-1}if(-1===t)return this||lf;aa.pipes.splice(t,1);--aa.pipesCount;1===aa.pipesCount&&(aa.pipes=aa.pipes[0]);N.emit("unpipe",this||
lf);return this||lf};c.prototype.on=function(N,aa){aa=E.prototype.on.call(this||lf,N,aa);"data"===N&&!1!==(this||lf)._readableState.flowing&&this.resume();if("readable"===N&&(this||lf).readable&&(N=(this||lf)._readableState,!N.readableListening))if(N.readableListening=!0,N.emittedReadable=!1,N.needReadable=!0,N.reading)N.length&&l(this||lf);else{var m=this||lf;r.nextTick(function(){P("readable nexttick read 0");m.read(0)})}return aa};c.prototype.addListener=c.prototype.on;c.prototype.resume=function(){var N=
(this||lf)._readableState;N.flowing||(P("resume"),N.flowing=!0,N.reading||(P("resume read 0"),this.read(0)),h(this||lf,N));return this||lf};c.prototype.pause=function(){P("call pause flowing=%j",(this||lf)._readableState.flowing);!1!==(this||lf)._readableState.flowing&&(P("pause"),(this||lf)._readableState.flowing=!1,this.emit("pause"));return this||lf};c.prototype.wrap=function(N){var aa=(this||lf)._readableState,m=!1,t=this||lf;N.on("end",function(){P("wrapped end");if(aa.decoder&&!aa.ended){var B=
aa.decoder.end();B&&B.length&&t.push(B)}t.push(null)});N.on("data",function(B){P("wrapped data");aa.decoder&&(B=aa.decoder.write(B));B&&(aa.objectMode||B.length)&&!t.push(B)&&(m=!0,N.pause())});for(var u in N)I.isFunction(N[u])&&I.isUndefined((this||lf)[u])&&((this||lf)[u]=function(B){return function(){return N[B].apply(N,arguments)}}(u));q(["error","close","destroy","pause","resume"],function(B){N.on(B,t.emit.bind(t,B))});t._read=function(B){P("wrapped _read",B);m&&(m=!1,N.resume())};return t};c._fromList=
e;return vQ}function $6(){function g(p,b){(this||pl).afterTransform=function(d,h){var a=b._transformState;a.transforming=!1;var e=a.writecb;e?(a.writechunk=null,a.writecb=null,l.isNullOrUndefined(h)||b.push(h),e&&e(d),d=b._readableState,d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&b._read(d.highWaterMark),d=void 0):d=b.emit("error",Error("no writecb in Transform class"));return d};(this||pl).needTransform=!1;(this||pl).transforming=!1;(this||pl).writecb=null;(this||pl).writechunk=null}
function c(p){if(!((this||pl)instanceof c))return new c(p);f.call(this||pl,p);(this||pl)._transformState=new g(p,this||pl);var b=this||pl;(this||pl)._readableState.needReadable=!0;(this||pl)._readableState.sync=!1;this.once("prefinish",function(){l.isFunction((this||pl)._flush)?this._flush(function(d){k(b,d)}):k(b)})}function k(p,b){if(b)return p.emit("error",b);b=p._transformState;if(p._writableState.length)throw Error("calling transform done when ws.length != 0");if(b.transforming)throw Error("calling transform done when still transforming");
return p.push(null)}if(a7)return wQ;a7=!0;wQ=c;var f=Xx(),l=xk;l.inherits=Dj;l.inherits(c,f);c.prototype.push=function(p,b){(this||pl)._transformState.needTransform=!1;return f.prototype.push.call(this||pl,p,b)};c.prototype._transform=function(p,b,d){throw Error("not implemented");};c.prototype._write=function(p,b,d){var h=(this||pl)._transformState;h.writecb=d;h.writechunk=p;h.writeencoding=b;h.transforming||(p=(this||pl)._readableState,(h.needTransform||p.needReadable||p.length<p.highWaterMark)&&
this._read(p.highWaterMark))};c.prototype._read=function(p){p=(this||pl)._transformState;l.isNull(p.writechunk)||!p.writecb||p.transforming?p.needTransform=!0:(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform))};return wQ}function Uka(){function g(f){if(!((this||b7)instanceof g))return new g(f);c.call(this||b7,f)}if(c7)return xQ;c7=!0;xQ=g;var c=$6(),k=xk;k.inherits=Dj;k.inherits(g,c);g.prototype._transform=function(f,l,p){p(null,f)};return xQ}function aB(g){return g&&
"object"===typeof g&&"default"in g?g["default"]:g}function Vka(g){var c={},k;for(k in g)c[k]=g[k];return c}function Wka(g,c,k){g.open(function(){});return{apply:function(f,l,p){l=l||{};for(var b=[],d=-1,h=f.length;++d<h;){var a=f[d],e=a,n=a.prefix;n&&n.options&&(e.keyEncoding=e.keyEncoding||n.options.keyEncoding,e.valueEncoding=e.valueEncoding||n.options.valueEncoding);e=a;n=a.prefix;n="function"===typeof n.prefix?n.prefix():n;e.prefix=n;b.push({key:c.encode([a.prefix,k.encodeKey(a.key,l,a)]),value:"del"!==
a.type&&k.encodeValue(a.value,l,a),type:a.type})}g.db.batch(b,l,p)},get:function(f,l,p,b){p.asBuffer=k.valueAsBuffer(p);return g.db.get(c.encode([l,k.encodeKey(f,p,void 0)]),p,function(d,h){d?b(d):b(null,k.decodeValue(h,p))})},createDecoder:function(f){return function(l,p){return{key:k.decodeKey(c.decode(l)[1],f),value:k.decodeValue(p,f)}}},isClosed:function(){return g.isClosed()},close:function(f){return g.close(f)},iterator:function(f){var l=Vka(f||{}),p=f.prefix||[];Xka.toLtgt(f,l,function(b){return c.encode([p,
k.encodeKey(b,l,{})])},c.lowerBound,c.upperBound);l.prefix=null;l.keyAsBuffer=l.valueAsBuffer=!1;"number"!==typeof l.limit&&(l.limit=-1);l.keyAsBuffer=c.buffer;l.valueAsBuffer=k.valueAsBuffer(l);return function(b){return{next:function(d){return b.next(d)},end:function(d){b.end(d)}}}(g.db.iterator(l))}}}function yQ(){Error.call(this)}function Ps(g,c){if(!(this instanceof Ps))return new Ps(g,c);d7.call(this,{objectMode:!0,highWaterMark:g.highWaterMark});this._waiting=!1;this._options=g;this._makeData=
c}function Zx(g){e7.call(this||qr,g);(this||qr)._destroyed=!1}function Yka(g,c,k){k(null,g)}function zQ(g){return function(c,k,f){"function"==typeof c&&(f=k,k=c,c={});"function"!=typeof k&&(k=Yka);"function"!=typeof f&&(f=null);return g(c,k,f)}}function Li(g){this._capacity=f7(g);this._front=this._length=0;if(g7(g)){for(var c=g.length,k=0;k<c;++k)this[k]=g[k];this._length=c}}function f7(g){if("number"!==typeof g)if(g7(g))g=g.length;else return 16;g=Math.min(Math.max(16,g),1073741824);g=(g>>>0)-1;
g|=g>>1;g|=g>>2;g|=g>>4;g|=g>>8;return(g|g>>16)+1}function AQ(g){g=g.rev_tree.slice();for(var c;c=g.pop();){var k=c.ids,f=k[2];c=c.pos;if(f.length){k=0;for(var l=f.length;k<l;k++)g.push({pos:c+1,ids:f[k]})}else if(f=!!k[1].deleted,k=k[0],!p||(d!==f?d:b!==c?b<c:p<k)){var p=k;var b=c;var d=f}}return b+"-"+p}function IG(g,c){g=g.slice();for(var k;k=g.pop();){var f=k.pos,l=k.ids,p=l[2];k=c(0===p.length,f,l[0],k.ctx,l[1]);l=0;for(var b=p.length;l<b;l++)g.push({pos:f+1,ids:p[l],ctx:k})}}function Zka(g,
c){return g.pos-c.pos}function h7(g){var c=[];IG(g,function(f,l,p,b,d){f&&c.push({rev:l+"-"+p,pos:l,opts:d})});c.sort(Zka).reverse();g=0;for(var k=c.length;g<k;g++)delete c[g].pos;return c}function i7(g){var c=[];g=g.slice();for(var k;k=g.pop();){var f=k.pos,l=k.ids,p=l[0],b=l[1];l=l[2];var d=0===l.length;k=k.history?k.history.slice():[];k.push({id:p,opts:b});d&&c.push({pos:f+1-k.length,ids:k});p=0;for(b=l.length;p<b;p++)g.push({pos:f+1,ids:l[p],history:k})}return c.reverse()}function $ka(g,c){return g.pos-
c.pos}function j7(g,c){for(var k,f,l=g.length;c<l;c++){var p=g[c];p=[p.id,p.opts,[]];f?(f[2].push(p),f=p):k=f=p}return k}function ala(g,c){return g[0]<c[0]?-1:1}function k7(g,c){c=[{tree1:g,tree2:c}];for(var k=!1;0<c.length;){var f=c.pop(),l=f.tree1;f=f.tree2;if(l[1].status||f[1].status)l[1].status="available"===l[1].status||"available"===f[1].status?"available":"missing";for(var p=0;p<f[2].length;p++)if(l[2][0]){for(var b=!1,d=0;d<l[2].length;d++)l[2][d][0]===f[2][p][0]&&(c.push({tree1:l[2][d],tree2:f[2][p]}),
b=!0);if(!b){k="new_branch";b=l[2];d=f[2][p];for(var h,a=b,e=d,n=ala,q=0,r=a.length;q<r;)h=q+r>>>1,0>n(a[h],e)?q=h+1:r=h;b.splice(q,0,d)}}else k="new_leaf",l[2][0]=f[2][p]}return{conflicts:k,tree:g}}function l7(g,c,k){var f=[],l=!1,p=!1;if(!g.length)return{tree:[c],conflicts:"new_leaf"};for(var b=0,d=g.length;b<d;b++){var h=g[b];if(h.pos===c.pos&&h.ids[0]===c.ids[0])p=k7(h.ids,c.ids),f.push({pos:h.pos,ids:p.tree}),l=l||p.conflicts,p=!0;else if(!0!==k){var a=h.pos<c.pos?h:c,e=h.pos<c.pos?c:h,n=[],
q=[];for(q.push({ids:a.ids,diff:e.pos-a.pos,parent:null,parentIdx:null});0<q.length;){var r=q.pop();if(0===r.diff)r.ids[0]===e.ids[0]&&n.push(r);else for(var v=r.ids[2],y=0,D=v.length;y<D;y++)q.push({ids:v[y],diff:r.diff-1,parent:r.ids,parentIdx:y})}(n=n[0])?(p=k7(n.ids,e.ids),n.parent[2][n.parentIdx]=p.tree,f.push({pos:a.pos,ids:a.ids}),l=l||p.conflicts,p=!0):f.push(h)}else f.push(h)}p||f.push(c);f.sort($ka);return{tree:f,conflicts:l||"internal_node"}}function bla(g,c){g=i7(g);for(var k,f,l=0,p=
g.length;l<p;l++){var b=g[l],d=b.ids;if(d.length>c){k||(k={});var h=d.length-c;var a={pos:b.pos+h,ids:j7(d,h)};for(var e=0;e<h;e++)k[b.pos+e+"-"+d[e].id]=!0}else a={pos:b.pos,ids:j7(d,0)};f=f?l7(f,a,!0).tree:[a]}k&&IG(f,function(n,q,r){delete k[q+"-"+r]});return{tree:f,revs:k?Object.keys(k):[]}}function cla(g){return g.ids}function m7(g){return g.reduce(function(c,k){c[k]=!0;return c},{})}function n7(g){if(!/^\d+-/.test(g))return ln.createError(ln.INVALID_REV);var c=g.indexOf("-"),k=g.substring(0,
c);g=g.substring(c+1);return{prefix:parseInt(k,10),id:g}}function o7(g,c,k){k||(k={deterministic_revs:!0});var f={status:"available"};g._deleted&&(f.deleted=!0);if(c){g._id||(g._id=Vu.uuid());var l=Vu.rev(g,k.deterministic_revs);if(g._rev){c=n7(g._rev);if(c.error)return c;g._rev_tree=[{pos:c.prefix,ids:[c.id,{status:"missing"},[[l,f,[]]]]}];var p=c.prefix+1}else g._rev_tree=[{pos:1,ids:[l,f,[]]}],p=1}else{if(g._revisions){l=g._revisions;p=l.start-l.ids.length+1;l=l.ids;c=[l[0],f,[]];k=1;for(var b=
l.length;k<b;k++)c=[l[k],{status:"missing"},[c]];g._rev_tree=[{pos:p,ids:c}];p=g._revisions.start;l=g._revisions.ids[0]}if(!g._rev_tree){c=n7(g._rev);if(c.error)return c;p=c.prefix;l=c.id;g._rev_tree=[{pos:p,ids:[l,f,[]]}]}}Vu.invalidIdError(g._id);g._rev=p+"-"+l;f={metadata:{},data:{}};for(var d in g)if(Object.prototype.hasOwnProperty.call(g,d)){if((p="_"===d[0])&&!dla[d])throw g=ln.createError(ln.DOC_VALIDATION,d),g.message=ln.DOC_VALIDATION.message+": "+d,g;p&&!ela[d]?f.metadata[d.slice(1)]=g[d]:
f.data[d]=g[d]}return f}function fla(g,c,k){try{var f=bB.atob(g.data)}catch(l){f={error:ln.createError(ln.BAD_ARG,"Attachment is not a valid base64 string")}}if(f.error)return k(f.error);g.length=f.length;g.data="blob"===c?bB.binaryStringToBlobOrBuffer(f,g.content_type):"base64"===c?bB.btoa(f):f;p7.binaryMd5(f,function(l){g.digest="md5-"+l;k()})}function gla(g,c,k){p7.binaryMd5(g.data,function(f){g.digest="md5-"+f;g.length=g.data.size||g.data.length||0;"binary"===c?bB.blobOrBufferToBinaryString(g.data,
function(l){g.data=l;k()}):"base64"===c?bB.blobOrBufferToBase64(g.data,function(l){g.data=l;k()}):k()})}function hla(g,c,k){if(g.stub)return k();"string"===typeof g.data?fla(g,c,k):gla(g,c,k)}function q7(g,c,k,f,l,p,b,d){if(Nm.revExists(c.rev_tree,k.metadata.rev)&&!d)return f[l]=k,p();var h=c.winningRev||Nm.winningRev(c),a="deleted"in c?c.deleted:Nm.isDeleted(c,h),e="deleted"in k.metadata?k.metadata.deleted:Nm.isDeleted(k.metadata),n=/^1-/.test(k.metadata.rev);a&&!e&&d&&n&&(n=k.data,n._rev=h,n._id=
k.metadata.id,k=o7(n,d));g=Nm.merge(c.rev_tree,k.metadata.rev_tree[0],g);if(d&&(a&&e&&"new_leaf"!==g.conflicts||!a&&"new_leaf"!==g.conflicts||a&&!e&&"new_branch"===g.conflicts))return k=ln.createError(ln.REV_CONFLICT),f[l]=k,p();f=k.metadata.rev;k.metadata.rev_tree=g.tree;k.stemmedRevs=g.stemmedRevs||[];c.rev_map&&(k.metadata.rev_map=c.rev_map);c=Nm.winningRev(k.metadata);d=Nm.isDeleted(k.metadata,c);a=a===d?0:a<d?-1:1;f=f===c?d:Nm.isDeleted(k.metadata,f);b(k,c,d,f,!0,a,l,p)}function cB(g){return g&&
"object"===typeof g&&"default"in g?g["default"]:g}function r7(g,c){g=new Uint8Array(g);return dB.blob([g],{type:c})}function ila(g,c){dB.readAsBinaryString(g,c)}function s7(g,c){c=c.prefix()[0];g=g._cache;var k=g.get(c);k||(k=new dp.Map,g.set(c,k));return k}function Wu(){this._batch=[];this._cache=new dp.Map}function BQ(g){return"winningRev"in g?g.winningRev:eB.winningRev(g)}function jla(g,c,k){var f=g.content_type;return new Promise(function(l,p){c.binaryStore.get(g.digest,function(b,d){if(b){if("NotFoundError"!==
b.name)return p(b);b=k.binary?dB.binaryStringToBlobOrBuffer("",f):""}else b=k.binary?r7(d,f):d.toString("base64");delete g.stub;delete g.length;g.data=b;l()})})}function CQ(g,c,k){var f=[];g.forEach(function(l){l.doc&&l.doc._attachments&&Object.keys(l.doc._attachments).forEach(function(p){p=l.doc._attachments[p];"data"in p||f.push(p)})});return Promise.all(f.map(function(l){return jla(l,c,k)}))}function DQ(g){(this||Xu).db=g;(this||Xu)._ended=!1;(this||Xu)._nexting=!1}function Qs(g){(this||Kj)._db=
g;(this||Kj)._operations=[];(this||Kj)._written=!1}function jm(g){if(!arguments.length||void 0===g)throw Error("constructor requires at least a location argument");if("string"!=typeof g)throw Error("constructor requires a location string argument");(this||hk).location=g;(this||hk).status="new"}function mn(g,c,k,f,l,p){this._color=g;this.key=c;this.value=k;this.left=f;this.right=l;this._count=p}function aq(g){return new mn(g._color,g.key,g.value,g.left,g.right,g._count)}function Rs(g,c){return new mn(g,
c.key,c.value,c.left,c.right,c._count)}function Lj(g){g._count=1+(g.left?g.left._count:0)+(g.right?g.right._count:0)}function $x(g,c){this._compare=g;this.root=c}function EQ(g,c){if(c.left){var k=EQ(g,c.left);if(k)return k}if(k=g(c.key,c.value))return k;if(c.right)return EQ(g,c.right)}function FQ(g,c,k,f){if(0>=c(g,f.key)){if(f.left){var l=FQ(g,c,k,f.left);if(l)return l}if(l=k(f.key,f.value))return l}if(f.right)return FQ(g,c,k,f.right)}function GQ(g,c,k,f,l){var p=k(g,l.key),b=k(c,l.key);if(0>=p&&
(l.left&&(p=GQ(g,c,k,f,l.left))||0<b&&(p=f(l.key,l.value))))return p;if(0<b&&l.right)return GQ(g,c,k,f,l.right)}function nn(g,c){this.tree=g;this._stack=c}function t7(g,c){g.key=c.key;g.value=c.value;g.left=c.left;g.right=c.right;g._color=c._color;g._count=c._count}function kla(g,c){return g<c?-1:g>c?1:0}function u7(g,c){for(var k in g)c[k]=g[k]}function ay(g,c,k){return rr(g,c,k)}function lla(g){return 0<on.compare(g,(this||bf)._end)}function mla(g){return 0<=on.compare(g,(this||bf)._end)}function nla(g){return 0>
on.compare(g,(this||bf)._end)}function ola(g){return 0>=on.compare(g,(this||bf)._end)}function JG(g,c){v7.call(this||bf,g);(this||bf)._limit=c.limit;-1===(this||bf)._limit&&((this||bf)._limit=Infinity);g=g._store[g._location];(this||bf).keyAsBuffer=!1!==c.keyAsBuffer;(this||bf).valueAsBuffer=!1!==c.valueAsBuffer;(this||bf)._reverse=c.reverse;(this||bf)._options=c;(this||bf)._done=0;(this||bf)._reverse?((this||bf)._incr="prev",(this||bf)._start=on.upperBound(c),(this||bf)._end=on.lowerBound(c),"undefined"===
typeof(this||bf)._start?(this||bf)._tree=g.end:on.upperBoundInclusive(c)?(this||bf)._tree=g.le((this||bf)._start):(this||bf)._tree=g.lt((this||bf)._start),(this||bf)._end&&(on.lowerBoundInclusive(c)?(this||bf)._test=mla:(this||bf)._test=lla)):((this||bf)._incr="next",(this||bf)._start=on.lowerBound(c),(this||bf)._end=on.upperBound(c),"undefined"===typeof(this||bf)._start?(this||bf)._tree=g.begin:on.lowerBoundInclusive(c)?(this||bf)._tree=g.ge((this||bf)._start):(this||bf)._tree=g.gt((this||bf)._start),
(this||bf)._end&&(on.upperBoundInclusive(c)?(this||bf)._test=ola:(this||bf)._test=nla))}function Om(g){if(!((this||bf)instanceof Om))return new Om(g);w7.call(this||bf,"string"===typeof g?g:"");(this||bf)._location=(this||bf).location?"$"+(this||bf).location:"_tree";(this||bf)._store=(this||bf).location?by:this||bf;(this||bf)._store[(this||bf)._location]=(this||bf)._store[(this||bf)._location]||pla(on.compare)}function x7(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function HQ(g,
c){g=qla.assign({db:rla},g);sla.call(this,g,c)}function IQ(g){g&&(g.__serialize__=function(){return{__expr__:'({type: "'+g.type+'", name: "'+g.name+'", _id: "'+g._id+'"})'}});return g}function fB(g){var c,k,f,l,p,b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){if(!g||lg.obj.isEmpty(g))return h.return(!1);if(g&&g._rev)return h.return(g);c=g;k=c.type;f=c.name;l=c._id;h.setFinallyBlock(2);p=Object;b=p.assign;d=g;return h.yield(lg.MorphicDB.default.fetchCommit(k,
f,l),4)}2!=h.nextAddress&&b.call(p,d,h.yieldResult);h.enterFinallyBlock();return h.return(g)})}function gB(g){return Object.values(g).filter(function(c){return 1==pd.Path("props.isComponent.value").get(c)}).map(function(c){return c.props.name.value})}function KG(g){var c,k,f,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){1==b.nextAddress&&(c=[{label:"core elements...",url:"styleguide://System/buttons/light"},{label:"core elements...",url:"styleguide://System/window/light/inactive"},
{label:"top bar...",url:"styleguide://SystemIDE/lively top bar master"},{label:"styling palette...",url:"styleguide://SystemIDE/styling side bar master"},{label:"scene graph...",url:"styleguide://SystemIDE/scene graph side bar master"},{label:"world loader...",url:"styleguide://partial freezing/project browser"},{label:"object editor...",url:"styleguide://SystemIDE/objectEditor/light"},{label:"world loader...",url:"styleguide://SystemIDE/new system browser"}],g.label="loading System Elements",k=g.progress=
0,f=$jscomp.makeIterator(c),l=f.next());if(3!=b.nextAddress){if(l.done)return b.yield(pd.promise.delay(500),0);p=l.value;k++;g.status=p.label;g.progress=k/c.length;return b.yield(pd.resource(p.url).read(),3)}l=f.next();return b.jumpTo(2)})}function LG(){pd.localNamePromise=null}function JQ(g){delete pd.fetchedSnapshots[g]}function Ss(g,c,k,f){f=void 0===f?k.name:f;(g[c]=Pm.fun.wrap(g[c],k)).hookFunc=k;k.hookName=f}function Yu(g,c,k){for(var f=[],l=g[c];l;)f.push(l),l=l.originalFunction;l="string"===
typeof k?f.find(function(p){return p.hookFunc&&p.hookFunc.hookName===k}):f.find(function(p){return p.hookFunc===k});if(!l)return!1;Pm.arr.remove(f,l);g[c]=f.reduceRight(function(p,b){return Pm.fun.wrap(p,b.hookFunc||b)});return!0}function Ts(g,c,k){for(g=g[c];g;){if(g.hookFunc&&("string"===typeof k&&g.hookFunc.hookName===k||g.hookFunc===k))return!0;g=g.originalFunction}return!1}function hB(g){if(g.loads){var c=g.loads;return sr.arr.uniq(Object.keys(sr.loadedModules(g)).concat(Object.keys(c))).reduce(function(k,
f){var l=c[f]?c[f].depMap:{};k[f]=Object.keys(l).map(function(p){var b=l[p];return"@empty"===b?b+"/"+p:b});return k},{})}return Object.keys(g._loader.moduleRecords).reduce(function(k,f){k[f]=g._loader.moduleRecords[f].dependencies.filter(Boolean).map(function(l){return l.name});return k},{})}function iB(g,c,k,f,l){var p=g.get("@lively-env").pendingExportChanges;(g=$l.module(g,c).record())&&(k in g.exports||l)&&((p[c]||(p[c]={}))[k]=f)}function MG(g,c){var k=g.get("@lively-env").pendingExportChanges[c];
k&&($l.clearPendingModuleExportChanges(g,c),$l.updateModuleExports(g,c,k))}function jB(g,c,k,f,l){var p,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:d.setCatchFinallyBlocks(2);g.debug&&console.log("[module change] "+c+" "+k.slice(0,50).replace(/\n/g,"")+" "+f);if(!f||"es6"===f||"esm"===f||"register"===f||"defined"===f)return d.yield(bj.moduleSourceChangeEsm(g,c,k,l),8);if("global"!==f)throw Error("moduleSourceChange is not supported for module "+c+
" with format "+f);return d.yield(bj.moduleSourceChangeGlobal(g,c,k,l),7);case 7:p=d.yieldResult;d.jumpTo(5);break;case 8:p=d.yieldResult;case 5:return bj.emit("lively.modules/modulechanged",{module:c,newSource:k,options:l},Date.now(),g),d.return(p);case 2:throw b=d.enterCatchBlock(),bj.emit("lively.modules/modulechanged",{module:c,newSource:k,error:b,options:l},Date.now(),g),b;}})}function KQ(g){return/\.js/i.test(g)}function LQ(g){return ql.isJsFile(g)?g.replace(/\/[^\/]*$/,""):g.replace(/\/$/,
"")}function Zu(g){return/^[^:\\]+:\/\//.test(g)}function NG(g){var c=g.match(/^([^:]+:\/\/)(.*)/);if(!c)return g;g=c[1];var k=c=c[2];do c=k,k=c.replace(/\/[^\/]+\/\.\./,"");while(k!=c);k=k.replace(/(^|[^:])[\/]+/g,"$1/");k=k.replace(/\/\.\//g,"/");return g+k}function OG(g,c,k){k=void 0===k?!1:k;var f=Ce.classHolder.PackageRegistry.ofSystem(g),l=f.allPackageURLs();g=k?c:Ce.normalizePackageURL(g,c,l);return{pkg:f.findPackageWithURL(g),url:g,allPackageURLs:l,registry:f}}function PG(g,c,k){g=Ce.lookupPackage(g,
c,void 0===k?!1:k);c=g.url;k=g.registry;return g.pkg||k.addPackageAt(c,"devPackageDirs")}function kB(g,c,k){g=Ce.lookupPackage(g,c,void 0===k?!1:k);if(k=g.pkg)return k;throw Error("[getPackage] package "+c+" (as "+g.url+") not found");}function QG(g,c,k){return Ce.getPackage(g,k).updateConfig(c)}function RG(g,c){return Promise.resolve(Ce.ensurePackage(g,c)).then(function(k){return k.import()})}function SG(g,c){return(g=Ce.lookupPackage(g,c).pkg)?g.remove():null}function TG(g,c,k){return Ce.getPackage(g,
c).reload(k)}function UG(g,c,k){return Promise.resolve(Ce.ensurePackage(g,c)).then(function(f){return f.register(k)})}function VG(g){return Ce.Package.allPackages(g).map(function(c){return c.asSpec()})}function tr(g,c){g="string"===typeof g?ed.parse(g):g;c.scope=ed.query.resolveReferences(ed.query.scopes(g));return ed.ClassReplaceVisitor.run(g,c)}function WG(g,c,k){k=km.ensureParent(g,c);var f=g.System._nodeRequire("module");c.startsWith(".")&&(c=km.relative(g,c));return f._load(c,k)}function XG(g,
c,k){k=km.ensureParent(g,c);var f=g.System._nodeRequire("module");c.startsWith(".")&&(c=km.relative(g,c));return f._resolveFilename(c,k)}function $u(g,c,k){var f=Ae.livelySystemEnv(g);c=g.decanonicalize(c,k);return f.loadedModules[c]||(f.loadedModules[c]=new Ae.ModuleInterface(g,c))}function YG(g,c,k){k=void 0===k?!1:k;var f=Ae.livelySystemEnv(g);return(k?c:g.normalizeSync(c))in f.loadedModules}function ZG(g,c,k){k=void 0===k?!1:k;var f,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress){Ae.livelySystemEnv(g);f=k?c:g.normalizeSync(c);if(Ae.isModuleLoaded(g,f,!0))return b.return(!0);l=Ae.Package.forModuleId(g,f);return l&&"no group"!==l.name?b.yield(l.hasResource(f),3):(p=g.resource(f).exists(),b.jumpTo(2))}2!=b.nextAddress&&(p=b.yieldResult);return b.return(p)})}function MQ(){return he.exceptions}function NQ(g){return he.exceptions=g}function OQ(g,c,k,f,l){c=String(c);g=f.sourceAccessorName;var p=f.recorder,b=f.recorderName,d=f.dontTransform,h=f.varDefinitionCallbackName,
a=void 0===f.embedOriginalCode?!0:f.embedOriginalCode;g=a?g:void 0;f={topLevelVarRecorder:p,varRecorderName:b,sourceAccessorName:g,dontTransform:d,jsx:k.endsWith(".jsx"),recordGlobals:!0,keepPreviouslyDeclaredValues:!0,declarationWrapperName:h,evalId:f.nextEvalId(),classTransform:he.classToFunctionTransform,currentModuleAccessor:he.funcCall(he.member(he.funcCall(he.member(he.member("__lvVarRecorder","System"),"get"),he.literal("@lively-env")),"moduleEnv"),he.literal(k))};p=l?'console.log("[lively.modules] executing module '+
k+'");\n':"";d="";"System.global"===b?delete f.declarationWrapperName:(p+='SystemJS.get("@lively-env").evaluationStart("'+k+'");\nvar '+(b+' = SystemJS.get("@lively-env").moduleEnv("'+k+'").recorder;\n')+(a?"\nvar "+g+" = "+JSON.stringify(c)+";\n":""),d+='\nSystemJS.get("@lively-env").evaluationEnd("'+k+'");');try{var e=p+he.evalCodeTransform(c,f)+d;l&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=e);return{source:e,options:f}}catch(n){return console.error("Error in prepareCodeForCustomCompile of "+
k+" "+n.stack),{source:c,options:f}}}function PQ(g,c,k,f,l,p){c=String(c);g=Object.assign({},l,{classTransform:he.classToFunctionTransform,topLevelVarRecorder:f.recorder,varRecorderName:f.recorderName,dontTransform:f.dontTransform,recordGlobals:!0,declarationWrapperName:f.varDefinitionCallbackName,currentModuleAccessor:he.funcCall(he.member(he.funcCall(he.member(he.member("__lvVarRecorder","System"),"get"),he.literal("@lively-env")),"moduleEnv"),he.literal(k))});try{var b=he.evalCodeTransformOfSystemRegisterSetters(c,
g);p&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString+=b);return b}catch(d){return console.error("Error in prepareTranslatedCodeForSetterCapture",d.stack),c}}function $G(g,c){return g.translate(c).then(function(k){var f=he.parse(k).body.find(function(p){return p.expression&&"CallExpression"===p.expression.type&&"register"===p.expression.callee.property.name});if(!f)throw Error("Cannot find register call in translated source of "+c.name);var l=
f.expression;f=l.arguments[0].elements.map(function(p){return p.value});l=l.arguments[1];k=k.slice(l.start,l.end);k=eval('var __moduleName = "'+c.name+'";('+k+");\n//# sourceURL="+c.name+"\n");g.debug&&"undefined"!==$world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=k);return{localDeps:f,declare:k}})}function aH(g,c){return g.translate(c).then(function(k){return{translated:k}})}function lB(g){he.isHookInstalled(g,"translate","lively_modules_translate_hook")||he.installHook(g,
"translate",function(c,k){return he.customTranslate.call(g,c,k)},"lively_modules_translate_hook")}function bH(g){he.removeHook(g,"translate","lively_modules_translate_hook")}function cH(g){g.resource=vg.resource;vg.isHookInstalled(g,"fetch",vg.fetchResource)&&vg.removeHook(g,"fetch","fetchResource");vg.installHook(g,"fetch",vg.fetchResource);vg.isHookInstalled(g,"resource","livelyProtocol")&&vg.removeHook(g,"fetch","livelyProtocol");vg.installHook(g,"resource",vg.livelyProtocol)}function QQ(g){vg.removeHook(g,
"fetch","fetchResource");vg.removeHook(g,"resource","livelyProtocol");delete g.resource}function dH(g){Bd.isHookInstalled(g,"normalize","normalizeHook")||Bd.installHook(g,"normalize",Bd.normalizeHook,"normalizeHook");Bd.isHookInstalled(g,"decanonicalize","decanonicalizeHook")||Bd.installHook(g,"decanonicalize",Bd.decanonicalizeHook,"decanonicalizeHook");Bd.isHookInstalled(g,"normalizeSync","decanonicalizeHook")||Bd.installHook(g,"normalizeSync",Bd.decanonicalizeHook,"decanonicalizeHook");Bd.isHookInstalled(g,
"newModule","newModule_volatile")||Bd.installHook(g,"newModule",Bd.newModule_volatile,"newModule_volatile");Bd.isHookInstalled(g,"instantiate","instantiate_triggerOnLoadCallbacks")||Bd.installHook(g,"instantiate",Bd.instantiate_triggerOnLoadCallbacks,"instantiate_triggerOnLoadCallbacks");Bd.isHookInstalled(g,"locate","locateHook")||Bd.installHook(g,"locate",Bd.locateHook,"locateHook")}function eH(g){Bd.removeHook(g,"normalize","normalizeHook");Bd.removeHook(g,"decanonicalize","decanonicalizeHook");
Bd.removeHook(g,"normalizeSync","decanonicalizeHook");Bd.removeHook(g,"newModule","newModule_volatile");Bd.removeHook(g,"instantiate","instantiate_triggerOnLoadCallbacks");Bd.removeHook(g,"locate","locateHook")}function fH(g){return{moduleEnv:function(c){return Bd.classHolder.module(g,c)},get itself(){return g.get(g.decanonicalize("lively.modules/index.js"))},evaluationStart:function(c){Bd.classHolder.module(g,c).evaluationStart()},evaluationEnd:function(c){Bd.classHolder.module(g,c).evaluationEnd()},
dumpConfig:function(){return JSON.stringify({baseURL:g.baseURL,transpiler:g.transpiler,defaultJSExtensions:g.defaultJSExtensions,map:g.map,meta:g.meta,packages:g.packages,paths:g.paths,packageConfigPaths:g.packageConfigPaths},null,2)},get packageRegistry(){return g["__lively.modules__packageRegistry"]},set packageRegistry(c){g["__lively.modules__packageRegistry"]=c},packages:g["__lively.modules__packages"]||(g["__lively.modules__packages"]={}),loadedModules:g["__lively.modules__loadedModules"]||(g["__lively.modules__loadedModules"]=
{}),pendingExportChanges:g["__lively.modules__pendingExportChanges"]||(g["__lively.modules__pendingExportChanges"]={}),notifications:g["__lively.modules__notifications"]||(g["__lively.modules__notifications"]=[]),notificationSubscribers:g["__lively.modules__notificationSubscribers"]||(g["__lively.modules__notificationSubscribers"]={}),options:g["__lively.modules__options"]||(g["__lively.modules__options"]=Bd.obj.deepCopy(Bd.defaultOptions)),onLoadCallbacks:g["__lively.modules__onLoadCallbacks"]||
(g["__lively.modules__onLoadCallbacks"]=[]),modulePackageMapCache:g["__lively.modules__modulePackageMapCache"]}}function av(g,c){return g&&"string"!==typeof g?g:Bd.systems()[g]||(Bd.systems()[g]=Bd.makeSystem(c))}function bv(g){g=g&&"string"!==typeof g?Bd.nameOfSystem(g):g;delete Bd.systems()[g]}function gH(g,c){g.trace=!0;c=c||{};var k=c.hasOwnProperty("useModuleTranslationCache")?c.useModuleTranslationCache:!Bd.urlQuery().noModuleCache;g.useModuleTranslationCache=k;g.set("@lively-env",g.newModule(Bd.livelySystemEnv(g)));
"undefined"!==typeof Bd.WorkerGlobalScope&&g.set("@system-env",g.newModule(Object.assign({},g.get("@system-env"),{browser:!0,worker:!0,location:Bd.location})));(k="undefined"!==typeof Bd.process&&Bd.process.versions&&Bd.process.versions.electron)&&g.set("@system-env",g.newModule(Object.assign({electron:k},g.get("@system-env"))));Bd.wrapResource(g);Bd.wrapModuleLoad(g);Bd.wrapModuleResolution(g);k&&(k=["electron"].reduce(function(f,l){f[l]="@node/"+l;return f},{}),c.map=Bd.obj.merge(k,c.map));Bd.isNode&&
(k="addons assert buffer child_process cluster console crypto dgram dns domain events fs http https module net os path punycode querystring readline repl stream stringdecoder timers tls tty url util v8 vm zlib constants".split(" ").reduce(function(f,l){f[l]="@node/"+l;return f},{}),c.map=Bd.obj.merge(k,c.map));c.packageConfigPaths=c.packageConfigPaths||["./node_modules/*/package.json"];c.transpiler||"traceur"!==g.transpiler||(k=Bd.GLOBAL.System,"lively.transpiler"===k.transpiler?(g.set("lively.transpiler",
k.get("lively.transpiler")),g._loader.transpilerPromise=k._loader.transpilerPromise,g.config({transpiler:"lively.transpiler",babelOptions:Object.assign(k.babelOptions||{},c.babelOptions)})):g.config({map:{"plugin-babel":k.map["plugin-babel"],"systemjs-babel-build":k.map["systemjs-babel-build"]},transpiler:k.transpiler,babelOptions:Object.assign(k.babelOptions||{},c.babelOptions)}));g.config(c);return g}function hH(g){g=Bd.getSystem(g);return JSON.stringify({baseURL:g.baseURL,transpiler:g.transpiler,
defaultJSExtensions:g.defaultJSExtensions,defaultExtension:g.defaultExtension,map:g.map,meta:g.meta,packages:g.packages,paths:g.paths,packageConfigPaths:g.packageConfigPaths,bundles:g.bundles},null,2)}function iH(g,c,k){var f=g.decanonicalize(c);if(g.get(f))try{k(Bd.classHolder.module(g,f))}catch(l){console.error(l)}else g.get("@lively-env").onLoadCallbacks.push({moduleName:c,resolved:!1,callback:k})}function jH(g){return g.get("@lively-env").loadedModules}function kH(g){var c=g.loads?Object.keys(g.loads):
Object.keys(g._loader.moduleRecords);return Bd.arr.uniq(c.concat(Object.keys(Bd.loadedModules(g))))}function RQ(g,c,k){return Promise.all(Bd.obj.values(Bd.loadedModules(g)).map(function(f){return f.search(c,k)})).then(function(f){return Bd.arr.flatten(f,1)})}function mB(g,c,k,f){c=void 0===c?{maxDepth:0,excludes:[]}:c;k=void 0===k?{}:k;f=void 0===f?0:f;var l,p,b,d,h,a,e,n,q,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:l=c;p=l.maxDepth;b=l.excludes;
if(0<p&&f>p)return E.return(k);E.setCatchFinallyBlocks(2);d=JSON;h=d.parse;return E.yield(Sk.resource(g).join("package.json").read(),4);case 4:a=h.call(d,E.yieldResult);e=a.name+"@"+a.version;if(k[e]||b.includes(a.name))return E.return(k);k[e]=Object.assign({url:g},Sk.obj.select(a,["name","version","dependencies","devDependencies","main"]));E.leaveTryBlock(3);break;case 2:return E.enterCatchBlock(),E.return(k);case 3:return E.setCatchFinallyBlocks(5),E.yield(Sk.resource(g).join("node_modules").dirList(1),
7);case 7:n=E.yieldResult;E.leaveTryBlock(6);break;case 5:return E.enterCatchBlock(),E.return(k);case 6:q=$jscomp.makeIterator(n),r=q.next();case 8:if(r.done){E.jumpTo(10);break}y=v=r.value;D=y.url;return E.yield(mB(D,c,k,f+1),11);case 11:k=E.yieldResult;r=q.next();E.jumpTo(8);break;case 10:return E.return(k)}})}function lH(g,c){var k=Object.assign({},g.dependencies,{},g.devDependencies);return Object.keys(k).reduce(function(f,l){var p=k[l],b=Sk.obj.values(c).find(function(h){var a=h.version;return h.name===
l&&lively.modules.semver.satisfies(a,p)})||{},d=b.name;b=b.version;f[l]=d?d+"@"+b:void 0;return f},{})}function mH(g){function c(l,p){var b=l+"@"+p;if(b in f)return f[b];var d=k.find(function(a){var e=a.version;return a.name===l&&lively.modules.semver.satisfies(e,p)})||{},h=d.name;d=d.version;return f[b]=h?h+"@"+d:void 0}var k=Sk.obj.values(g),f={};return Object.keys(g).reduce(function(l,p){var b=g[p],d=Object.assign({},b.dependencies,{},b.devDependencies);l[p]=Object.keys(d).map(function(h){return c(h,
d[h])}).filter(function(h){return!!h});return l},{})}function nH(g,c){Rc.defaultSystem=g;c&&(Rc.GLOBAL.System=g);return g}function oH(){Rc._wrapModuleResolution(Rc.defaultSystem)}function pH(){Rc._unwrapModuleResolution(Rc.defaultSystem)}function qH(){return Object.keys(Rc.requireMap())}function nB(g){return Rc._module(Rc.defaultSystem,g)}function rH(g,c){return Rc._isModuleLoaded(Rc.defaultSystem,g,c)}function sH(g,c){return Rc._doesModuleExist(Rc.defaultSystem,g,c)}function tH(){return Rc._printSystemConfig(Rc.defaultSystem)}
function uH(g,c){return Rc._whenLoaded(Rc.defaultSystem,g,c)}function vH(g){return Rc._importPackage(Rc.defaultSystem,g)}function wH(g,c){return Rc._registerPackage(Rc.defaultSystem,g,c)}function xH(g){return Rc._removePackage(Rc.defaultSystem,g)}function yH(g,c){return Rc._reloadPackage(Rc.defaultSystem,g,c)}function zH(){return Rc.getPackageSpecs(Rc.defaultSystem)}function AH(g,c){return Rc._getPackage(Rc.defaultSystem,g,void 0===c?!1:c)}function BH(g){return Rc.Package.forModuleId(Rc.defaultSystem,
g)}function CH(g){return Rc._ensurePackage(Rc.defaultSystem,g)}function DH(g,c){return Rc._applyPackageConfig(Rc.defaultSystem,g,c)}function EH(g,c){return Rc._lookupPackage(Rc.defaultSystem,g,void 0===c?!1:c)}function FH(g,c,k){return Rc._moduleSourceChange(Rc.defaultSystem,g,c,k)}function GH(){return Rc.computeRequireMap(Rc.defaultSystem)}function HH(g,c){return Rc._isHookInstalled(Rc.defaultSystem,g,c)}function IH(g,c){return Rc._installHook(Rc.defaultSystem,g,c)}function JH(g,c){return Rc._removeHook(Rc.defaultSystem,
g,c)}function KH(){Rc._wrapModuleLoad(Rc.defaultSystem)}function LH(){Rc._unwrapModuleLoad(Rc.defaultSystem)}function SQ(g){return g&&g.__ref__}function oB(g,c){return ne.serialize(g,ne.normalizeOptions(c))}function pB(g,c){c=void 0===c?{}:c;return ne.deserializeWithMigrations(g,c.migrations||ne.migrations,ne.normalizeOptions(c))}function TQ(g){var c,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(c=ne,k=c.loadMorphFromSnapshot,f.yield(g.readJson(),2)):f.return(k.call(c,
f.yieldResult))})}function UQ(g,c,k){g=void 0===g?ne.MorphicEnv.default().world:g;var f,l,p,b,d,h,a,e,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:f=k||{};l=void 0===f.showIndicator?!0:f.showIndicator;p=void 0===f.changeName?!0:f.changeName;b=void 0===f.changeBrowserURL?!0:f.changeBrowserURL;c||(d=ne.resource(document.location.href),h=d.name(),c=d.join("../"+h.replace(/\.[^\.]+/,"-world.json")).withRelativePartsResolved());"string"===typeof c&&
(c=ne.resource(c));p&&(g.name=c.nameWithoutExt());b&&(a=encodeURI(k.pathForBrowserHistory||ne.pathForBrowserHistory(c.path())),window.location.pathname!==a&&window.history.pushState({},"lively.next",a));if(!l){v.jumpTo(2);break}return v.yield(System.import("lively.components/loading-indicator.js"),3);case 3:return n=v.yieldResult,q=n.LoadingIndicator,e=q.open("string"===typeof l?l:"Snapshotting..."),v.yield(e.whenRendered(),4);case 4:return v.yield(ne.promise.delay(100),2);case 2:return v.setFinallyBlock(6),
v.yield(ne.createMorphSnapshot(g,k),8);case 8:return r=v.yieldResult,e.label="Uploading...",v.yield(e.whenRendered(),9);case 9:return v.return(c.writeJson(r));case 6:v.enterFinallyBlock(),e&&e.remove(),v.leaveFinallyBlock(0)}})}function MH(g,c){if(void 0===c||!c)return ne.deserializeMorph(ne.serializeMorph(g),{migrations:ne.migrations,reinitializeIds:!0});c=g.comments;g.comments=[];var k=[];g.attributeConnections&&(k=g.attributeConnections.filter(function(l){return l.targetObj.isCommentIndicator}),
g.attributeConnections=g.attributeConnections.filter(function(l){return!(l.targetObj.isCommentIndicator||l.targetObj.isHalo)}));var f=ne.serializeMorph(g);g.comments=c;g.attributeConnections&&(g.attributeConnections=g.attributeConnections.concat(k));return ne.deserializeMorph(f,{migrations:ne.migrations,reinitializeIds:!0})}function cv(g,c){c=void 0===c?{}:c;var k,f,l,p,b,d,h,a,e,n,q,r,v,y,D,E,I,K,P,N,aa,m,t,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){switch(B.nextAddress){case 1:System.get("@system-env");
k=c;f=void 0===k.addPreview?!1:k.addPreview;l=void 0===k.previewWidth?100:k.previewWidth;p=void 0===k.previewHeight?100:k.previewHeight;b=void 0===k.previewType?"png":k.previewType;d=void 0===k.testLoad?!0:k.testLoad;h=void 0===k.addPackages?!0:k.addPackages;a=void 0===k.ignoreMorphs?[]:k.ignoreMorphs;e=void 0===k.frozenSnapshot?!1:k.frozenSnapshot;n=ne.serializeMorph(g,{frozenSnapshot:e});if(!h){B.jumpTo(2);break}return B.yield(ne.findRequiredPackagesOfSnapshot(n),3);case 3:q=B.yieldResult,r=q.packages,
v=q.depMap,n.packages=r,y=ne.findLocalComponents(n.snapshot),Object.values(r["local://lively-object-modules/"]||{}).forEach(function(A){Object.entries(A).forEach(function(H){var F=$jscomp.makeIterator(H);H=F.next().value;F=F.next().value;if(!H.endsWith(".json")){var L=ne.ast.parse(F),U=[],T=ne.Path("metadata.commit.name").get($world);ne.ast.AllNodesVisitor.run(L,function(Y,wa){"Literal"===Y.type&&"string"===typeof Y.value&&(Y.value.match(/^styleguide:\/\/\$world\/.+/)&&!y.includes(Y.value.replace("styleguide://$world/",
""))&&U.push({target:Y,replacementFunc:function(){return JSON.stringify(Y.value.replace("$world",T))}}),Y.value.match(/^part:\/\/\$world\/.+/)&&!y.includes(Y.value.replace("part://$world/",""))&&U.push({target:Y,replacementFunc:function(){return JSON.stringify(Y.value.replace("$world",T))}}))});A[H]=ne.ast.transform.replaceNodes(U,F).source}})}),n.packageDepMap=v;case 2:if(!f){B.jumpTo(4);break}return B.yield(System.import("lively.morphic/rendering/morph-to-image.js"),5);case 5:return D=B.yieldResult,
E=D.renderMorphToDataURI,I=l||g.width,K=p||g.height,P=b||"png",B.setCatchFinallyBlocks(6),N=n,B.yield(E(g,{width:I,height:K,type:P,ignoreMorphs:[]}),8);case 8:N.preview=B.yieldResult;B.leaveTryBlock(4);break;case 6:return aa=B.enterCatchBlock(),console.error("Error generating morph preview: "+aa),m=n,B.yield(E(ne.morph({fill:g.fill,width:I,height:K}),{width:I,height:K,type:P,ignoreMorphs:a}),9);case 9:m.preview=B.yieldResult;case 4:n.preview||(n.preview="");if(!d){B.jumpTo(10);break}B.setCatchFinallyBlocks(11);
return B.yield(ne.loadMorphFromSnapshot(n,{highlightBuggyMorphs:!0,rootObject:g}),13);case 13:t=B.yieldResult;if(!t||!t.isMorph)throw Error("reloading snapshot does not create a morph!");B.leaveTryBlock(10);break;case 11:throw u=B.enterCatchBlock(),Error("Error snapshotting morph: Cannot recreate morph from snapshot!\n"+u.stack);case 10:return B.return(n)}})}function bq(g,c){return ne.deserializeMorph(g,Object.assign({reinitializeIds:!0,ignoreClassNotFound:!1,onDeserializationStart:ne.loadPackagesAndModulesOfSnapshot,
migrations:ne.migrations},c))}function y7(g,c){var k,f,l,p,b,d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:if(!g.isDirectory())return d=c,h=g.name(),a.yield(g.read(),9);k=c[g.name()]={};return a.yield(g.dirList(),4);case 4:f=a.yieldResult,l=$jscomp.makeIterator(f),p=l.next();case 5:if(p.done)return a.return(c);b=p.value;return a.yield(y7(b,k),6);case 6:p=l.next();a.jumpTo(5);break;case 9:return d[h]=a.yieldResult,a.return(c)}})}function z7(g,c){c=
void 0===c?[]:c;var k=[];if(g.hasOwnProperty("package.json")){var f=c.slice(1).reduceRight(function(p,b){return p.join(b)},ne.resource(c[0])).url;k.push({files:g,url:f,requiredPackages:g.requiredPackages})}for(var l in g)"object"===typeof g[l]&&k.push.apply(k,$jscomp.arrayFromIterable(z7(g[l],c.concat(l))));return k}function VQ(g){var c=ne.findPackagesInFileSpec(g.packages),k={};g=g.packageDepMap;if(!g)return c;c=$jscomp.makeIterator(c);for(var f=c.next();!f.done;f=c.next())f=f.value,k[f.url]=f;return ne.arr.flatten(ne.graph.sortByReference(g)).map(function(l){return k[l]})}
function qB(g){var c,k,f,l,p,b,d,h,a,e,n,q,r,v,y,D,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:if(!g.packagesToRegister){I.jumpTo(2);break}c=$jscomp.makeIterator(g.packagesToRegister);k=c.next();case 3:if(k.done){I.jumpTo(2);break}f=k.value;I.setCatchFinallyBlocks(6);return I.yield(ne.registerPackage(f),8);case 8:I.leaveTryBlock(4);break;case 6:I.enterCatchBlock(),console.error("Failed to register package "+f);case 4:k=c.next();I.jumpTo(3);break;case 2:if(!g.packages){I.jumpTo(9);
break}l=ne.packagesOfSnapshot(g);p=$jscomp.makeIterator(l);b=p.next();case 10:if(b.done){I.jumpTo(9);break}h=d=b.value;a=h.files;e=h.url;if(q=(n=ne.lookupPackage(e))&&n.pkg){r=q.version;v=JSON.parse(a["package.json"]);y=v.version;try{if(y&&r&&ne.semver.lte(y,r,!0)){console.log("[load morph] Package "+e+" is loaded in version "+r+(" which is newer than "+y+". Will NOT load older variant."));I.jumpTo(11);break}}catch(K){console.warn("Error in package version comparison: ",K)}}return I.yield(ne.createFiles(e,
a),13);case 13:return I.yield(ne.ensurePackage(e),14);case 14:return q=I.yieldResult,I.yield(q.reload({forgetEnv:!1,forgetDeps:!1}),15);case 15:return I.yield(System.import("lively.classes/object-classes.js"),16);case 16:D=I.yieldResult,E=D.default,ne.objectScriptingEnabled=!!E,ne.objectScriptingEnabled&&E.withId(q.name);case 11:b=p.next();I.jumpTo(10);break;case 9:return I.yield(Promise.all(ne.requiredModulesOfSnapshot(g).map(function(K){return(System.get(K)?null:System.import(K)).catch(function(P){return console.error("Error loading "+
K,P)})})),0)}})}function NH(g){var c,k,f,l,p,b,d,h,a,e,n,q,r,v,y,D,E,I,K,P,N,aa,m,t,u,B,A,H,F,L,U,T,Y,wa,Ga,na,ea,da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ia){switch(ia.nextAddress){case 1:c={},k=g.snapshot,f=[],l={},p=!0,b={},d={},a=ia.forIn(k);case 2:if(null==(h=a.getNext())){ia.jumpTo(4);break}e=k[h]["lively.serializer-class-info"];if(!(e&&e.module&&e.module.package)){ia.jumpTo(5);break}n=ne.getPackage(e.module.package.name);if(!n.address.startsWith("local://")){ia.jumpTo(5);
break}return ia.yield(System.import("lively.classes/object-classes.js"),7);case 7:return q=ia.yieldResult,d.$jscomp$loop$prop$ObjectPackage$2789=q.default,ia.yield(System.import("lively.classes/util.js"),8);case 8:return r=ia.yieldResult,v=r.withSuperclasses,ne.objectScriptingEnabled=!!d.$jscomp$loop$prop$ObjectPackage$2789,y=d.$jscomp$loop$prop$ObjectPackage$2789.forSystemPackage(n),ia.yield(y.ensureSubModule(e.module.pathInPackage),9);case 9:D=ia.yieldResult,E=D.systemModule._recorder[e.className],
I=v(E),I.forEach(function(Oa){return function(Va){(Va=Oa.$jscomp$loop$prop$ObjectPackage$2789.lookupPackageForClass(Va))&&f.push(Va.systemPackage)}}(d));case 5:if(K=k[h].props.metadata)if(P=void 0,K.value&&K.value.__ref__?(N=k[K.value.id],N.props.externalPackages&&(P=N.props.externalPackages.value)):P=K.externalPackages,P)for(p=!0,aa=0;aa<P.length;aa++)l[P[aa]]=!0;d={$jscomp$loop$prop$ObjectPackage$2789:d.$jscomp$loop$prop$ObjectPackage$2789};ia.jumpTo(2);break;case 4:p&&(g.packagesToRegister=Object.keys(l)),
m=[],t=$jscomp.makeIterator(f),u=t.next();case 10:if(u.done)return f=[].concat($jscomp.arrayFromIterable(m),$jscomp.arrayFromIterable(f)),ia.yield(Promise.all(f.map(function(Oa){var Va,eb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sa){if(1==Sa.nextAddress)return Va=ne.resource(Oa.address).asDirectory(),Sa.yield(ne.resourceToJSON(Va,{}),2);eb=Sa.yieldResult;c[Va.parent().url]||(c[Va.parent().url]={});Object.assign(c[Va.parent().url],eb);b[Oa.url]||(b[Oa.url]=[]);Sa.jumpToEnd()})})),
17);B=u.value;A=$jscomp.makeIterator(B.modules());H=A.next();case 13:if(H.done){u=t.next();ia.jumpTo(10);break}F=H.value;if(F.id.endsWith(".json")){ia.jumpTo(14);break}L=$jscomp;U=L.makeIterator;return ia.yield(F.imports(),16);case 16:for(T=U.call(L,ia.yieldResult),Y=T.next();!Y.done;Y=T.next())if(Ga=wa=Y.value,na=Ga.fromModule,ea=ne.module(na).package())da=ea.config,da.lively&&da.lively.isObjectPackage&&(m.push(ea),b[B.url]?ne.arr.pushIfNotIncluded(b[B.url],ea.url):b[B.url]=[ea.url]);case 14:H=A.next();
ia.jumpTo(13);break;case 17:return ia.return({packages:c,depMap:b})}})}function WQ(g){return[]}function OH(g,c){c=void 0===c?{}:c;var k,f,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return k=c.morphicDB||ve.MorphicDB.default,b.yield(k.load("part","string"===typeof g?g:g.name,c,"string"===typeof g?void 0:g),2);case 2:f=b.yieldResult;if(!f.isWindow||!f.targetMorph){b.jumpTo(3);break}l=f.targetMorph;return b.yield(ve.ensureCommitInfo(f.metadata&&f.metadata.commit),
4);case 4:(p=b.yieldResult)&&l.changeMetaData("commit",p,!0,!1);case 3:return b.return(f)}})}function XQ(g,c,k,f,l,p){var b,d,h,a,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:y.setCatchFinallyBlocks(2);if(g.isMorph){y.jumpTo(4);break}if("function"!==typeof g.beforePublish){y.jumpTo(5);break}return y.yield(g.beforePublish(c,g),5);case 4:b=[],g.withAllSubmorphsDo(function(D){"function"===typeof D.beforePublish&&b.push(D)}),d=$jscomp.makeIterator(b),
h=d.next();case 8:if(h.done){y.jumpTo(5);break}a=h.value;return y.yield(a.beforePublish(),9);case 9:h=d.next();y.jumpTo(8);break;case 5:y.leaveTryBlock(3);break;case 2:e=y.enterCatchBlock(),n="Error in beforePublish of "+g+"\n"+e.stack,"function"===typeof g.world&&g.world()?g.world().logError(Error(n)):console.error(n);case 3:return q=Object.assign({previewWidth:100,previewHeight:100,previewType:"png"},k),r=k.morphicDB||ve.MorphicDB.default,y.yield(r.snapshotAndCommit("part",c,g,q,f,l,p),12);case 12:return v=
y.yieldResult,ve.emit("lively.partsbin/partpublished",v),y.return(v)}})}function rB(g,c){c=void 0===c?{}:c;var k,f,l,p,b,d,h,a,e,n,q,r,v,y,D,E,I,K,P,N,aa,m,t,u,B,A,H,F,L,U,T,Y,wa,Ga,na,ea,da,ia,Oa,Va,eb,Sa,Bb,Z,sa,Da,X,ma,ta,Pa,Za,Zb,Pb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Db){switch(Db.nextAddress){case 1:return k=c,f=void 0===k.showPublishDialog?!0:k.showPublishDialog,l=void 0===k.notifications?!0:k.notifications,p=void 0===k.loadingIndicator?!0:k.loadingIndicator,b=void 0===
k.preferWindow?!0:k.preferWindow,a=g,e=g.world()||g.env.world,n=g.name,q=[],r="",Db.yield(ve.ensureCommitInfo(ve.Path("metadata.commit").get(g)||ve.Path("metadata.commit").get(a)),2);case 2:v=Db.yieldResult;y=c.morphicDB||ve.MorphicDB.default;v||(v={type:"part",name:g.name,author:e.getCurrentUser(),tags:[],description:"no description"});if(!f){v&&(D=v,n=D.name,q=D.tags,r=D.description);Db.jumpTo(3);break}E=e;I=E.openPrompt;return Db.yield(ve.loadPart("publish part dialog"),5);case 5:return Db.yield(I.call(E,
Db.yieldResult,{part:g}),4);case 4:K=Db.yieldResult;P=K.db;N=K.commit;if(!N)return Db.return(null);P&&(c.morphicDB=y=P);aa=N;n=aa.name;q=aa.tags;r=aa.description;case 3:if(!p){Db.jumpTo(6);break}m=$world.execCommand("open loading indicator","saving "+n+"...");return Db.yield(ve.promise.delay(80),6);case 6:Db.setCatchFinallyBlocks(8,9);t="HEAD";u=v?v.name:g.name;if(u===n){B=v?v._id:void 0;Db.jumpTo(11);break}return Db.yield(y.exists("part",n),12);case 12:A=Db.yieldResult;H=A.exists;F=A.commitId;if(!H){Db.jumpTo(13);
break}return Db.yield(e.confirm('A part "'+n+'" already exists, overwrite?'),14);case 14:L=Db.yieldResult;if(!L)return Db.return(null);B=F;case 13:a.name=n;case 11:return b&&!g.isWindow&&(U=g.getWindow())&&U.targetMorph===g&&(g=U,h=U.metadata,d=!0),T={author:g.world().getCurrentUser(),message:"published",tags:q,description:r},Db.yield(ve.savePart(g,n,c,T,t,B),15);case 15:Y=Db.yieldResult;if(!d){Db.jumpTo(16);break}if(a.metadata)return Ga=a.metadata,Db.yield(ve.ensureCommitInfo(U.metadata.commit),
20);wa=a;return Db.yield(ve.ensureCommitInfo(U.metadata.commit),19);case 19:wa.metadata={commit:Db.yieldResult};Db.jumpTo(18);break;case 20:Ga.commit=Db.yieldResult;case 18:U.metadata=h;case 16:return l&&g.setStatusMessage("saved part "+n),Db.return(Y);case 9:Db.enterFinallyBlock();m&&m.remove();Db.leaveFinallyBlock(0);break;case 8:na=Db.enterCatchBlock();ea=$jscomp.makeIterator(na.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||
[]);ea.next();ea.next();da=ea.next().value;ia=ea.next().value;if(!da||!ia){Db.jumpTo(21);break}Oa=$jscomp;Va=Oa.makeIterator;return Db.yield(y.log(ia,1,!0),22);case 22:return eb=Va.call(Oa,Db.yieldResult),Bb=Sa=eb.next().value,Z=Bb.author,sa=Z.name,Da=Bb.timestamp,X='The current version of part "'+n+'" is not the most recent!\nA newer version by '+(sa+" was saved on ")+(ve.date.format(new Date(Da),"yyyy-mm-dd HH:MM")+". Overwrite?"),Db.yield(e.confirm(["Version Mismatch\n",{},X,{fontWeight:"normal",
fontSize:16}]),23);case 23:ma=Db.yieldResult;if(!ma)return Db.return(null);ta=ve.obj.dissoc(Sa,["preview"]);a.changeMetaData("commit",ta,!0,!1);return Db.return(rB(a,Object.assign({},c,{morphicDB:y,showPublishDialog:!1})));case 21:Pa=$jscomp.makeIterator(na.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but no version entry exists/)||[]);Pa.next();Pa.next();Za=Pa.next().value;if(!Za){Db.jumpTo(24);break}Zb="Part "+n+" no longer exist in the object database.\nDo you still want to publish it?";
return Db.yield(e.confirm(Zb),25);case 25:Pb=Db.yieldResult;if(!Pb)return Db.return(null);a.changeMetaData("commit",null,!0,!1);return Db.return(rB(a,Object.assign({},c,{morphicDB:y,showPublishDialog:!1})));case 24:throw console.error(na),l&&e.logError("Error saving part: "+na),na;}})}function YQ(g){g=void 0===g?{}:g;var c,k,f,l,p,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return c=g.morphicDB||ve.MorphicDB.default,d.yield(c.latestCommits("part"),2);if(3!=
d.nextAddress)return k=d.yieldResult,f=k.map(function(h){return{isListItem:!0,string:h.name,value:h}}),d.yield($world.filterableListPrompt("Select part to load",f,{fuzzy:!0}),3);l=d.yieldResult;p=$jscomp.makeIterator(l.selected);b=p.next().value;return d.return(b?ve.loadPart(b):null)})}function ZQ(g){var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield($world.prompt("Enter part name to publish object under",{input:g.name||"part-name",historyId:"lively.partsbin-partname-publish-to-folder-input-hist"}),
2);c=k.yieldResult;if(!c)throw"canceled";return k.return(ve.saveObjectToPartsbinFolder(g,c,{previewWidth:g.width,previewHeight:g.height}))})}function $Q(g,c,k){k=void 0===k?{}:k;var f,l,p,b,d,h,a,e,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:k=Object.assign({preferWindow:!0},k);k.preferWindow&&(g=(f=g.getWindow())&&f.targetMorph===g?f:g);q.setCatchFinallyBlocks(2);if(g.isMorph){q.jumpTo(4);break}if("function"!==typeof g.beforePublish){q.jumpTo(5);
break}return q.yield(g.beforePublish(c,g),5);case 4:l=[],g.withAllSubmorphsDo(function(r){"function"===typeof r.beforePublish&&l.push(r)}),p=$jscomp.makeIterator(l),b=p.next();case 8:if(b.done){q.jumpTo(5);break}d=b.value;return q.yield(d.beforePublish(),9);case 9:b=p.next();q.jumpTo(8);break;case 5:q.leaveTryBlock(3);break;case 2:h=q.enterCatchBlock(),a="Error in beforePublish of "+g+"\n"+h.stack,"function"===typeof g.world&&g.world()?g.world().logError(Error(a)):console.error(a);case 3:return q.yield(ve.resource(k.partsbinFolder).ensureExistance(),
12);case 12:return e=ve.resource(k.partsbinFolder).join(c+".json"),q.yield(ve.createMorphSnapshot(g,k),13);case 13:return n=q.yieldResult,q.yield(e.write(JSON.stringify(n,null,2)),14);case 14:return q.return({partName:c,url:e.url})}})}function PH(g,c){c=void 0===c?{}:c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(ve.loadPart(g,c))})}function aR(g){return new ve.CommitEditor(g)}function tla(g,c){var k={};c.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(f,l,p){l&&(k[l]=
p)});return k}function ula(g){g=String(g);if(!(100<g.length)&&(g=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(g))){var c=parseFloat(g[1]);switch((g[2]||"ms").toLowerCase()){case "years":case "year":case "yrs":case "yr":case "y":return c*vla;case "days":case "day":case "d":return c*sB;case "hours":case "hour":case "hrs":case "hr":case "h":return 36E5*c;case "minutes":case "minute":case "mins":case "min":case "m":return 6E4*
c;case "seconds":case "second":case "secs":case "sec":case "s":return 1E3*c;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return c}}}function QH(g,c,k){if(!(g<c))return g<1.5*c?Math.floor(g/c)+" "+k:Math.ceil(g/c)+" "+k+"s"}function wla(g){var c=0,k;for(k in g)c=(c<<5)-c+g.charCodeAt(k),c|=0;return Oh.colors[Math.abs(c)%Oh.colors.length]}function bR(g){function c(){if(c.enabled){var f=+new Date;c.diff=f-(k||f);c.prev=k;k=c.curr=f;var l=Array(arguments.length);for(f=0;f<
l.length;f++)l[f]=arguments[f];l[0]=Oh.coerce(l[0]);"string"!==typeof l[0]&&l.unshift("%O");var p=0;l[0]=l[0].replace(/%([a-zA-Z%])/g,function(b,d){if("%%"===b)return b;p++;d=Oh.formatters[d];"function"===typeof d&&(b=d.call(c,l[p]),l.splice(p,1),p--);return b});Oh.formatArgs.call(c,l);(c.log||Oh.log||console.log.bind(console)).apply(c,l)}}var k;c.namespace=g;c.enabled=Oh.enabled(g);c.useColors=Oh.useColors();c.color=wla(g);c.destroy=xla;"function"===typeof Oh.init&&Oh.init(c);Oh.instances.push(c);
return c}function xla(){var g=Oh.instances.indexOf(this||yla);return-1!==g?(Oh.instances.splice(g,1),!0):!1}function A7(){try{var g=am.storage.debug}catch(c){}!g&&"undefined"!==typeof cR&&"env"in cR&&(g=cR.env.DEBUG);return g}function pn(g){if(g){for(var c in pn.prototype)g[c]=pn.prototype[c];return g}}function dR(g,c){if(!g)return g;if(B7(g)){var k={_placeholder:!0,num:c.length};c.push(g);return k}if(eR(g)){k=Array(g.length);for(var f=0;f<g.length;f++)k[f]=dR(g[f],c);return k}if("object"===typeof g&&
!(g instanceof Date)){k={};for(f in g)k[f]=dR(g[f],c);return k}return g}function fR(g,c){if(!g)return g;if(g&&g._placeholder)return c[g.num];if(eR(g))for(var k=0;k<g.length;k++)g[k]=fR(g[k],c);else if("object"===typeof g)for(k in g)g[k]=fR(g[k],c);return g}function C7(){}function D7(g){var c=""+g.type;if(nj.BINARY_EVENT===g.type||nj.BINARY_ACK===g.type)c+=g.attachments+"-";g.nsp&&"/"!==g.nsp&&(c+=g.nsp+",");null!=g.id&&(c+=g.id);if(null!=g.data){try{var k=JSON.stringify(g.data)}catch(f){k=!1}if(!1!==
k)c+=k;else return zla}gR("encoded %j as %s",g,c);return c}function Ala(g,c){hR.removeBlobs(g,function(k){var f=hR.deconstructPacket(k);k=D7(f.packet);f=f.buffers;f.unshift(k);c(f)})}function RH(){(this||Jl).reconstructor=null}function iR(g){(this||Jl).reconPack=g;(this||Jl).buffers=[]}function SH(g){if(!g||"object"!==typeof g)return!1;if(Bla(g)){for(var c=0,k=g.length;c<k;c++)if(SH(g[c]))return!0;return!1}if("function"===typeof jR&&jR.isBuffer&&jR.isBuffer(g)||"function"===typeof ArrayBuffer&&g instanceof
ArrayBuffer||Cla&&g instanceof Blob||Dla&&g instanceof File)return!0;if(g.toJSON&&"function"===typeof g.toJSON&&1===arguments.length)return SH(g.toJSON(),!0);for(c in g)if(Object.prototype.hasOwnProperty.call(g,c)&&SH(g[c]))return!0;return!1}function Ela(){}function E7(g){return g.map(function(c){if(c.buffer instanceof ArrayBuffer){var k=c.buffer;if(c.byteLength!==k.byteLength){var f=new Uint8Array(c.byteLength);f.set(new Uint8Array(k,c.byteOffset,c.byteLength));k=f.buffer}return k}return c})}function F7(g,
c){c=c||{};var k=new cy;E7(g).forEach(function(f){k.append(f)});return c.type?k.getBlob(c.type):k.getBlob()}function G7(g,c){return new Blob(E7(g),c||{})}function H7(g){for(var c=[],k=0,f=g.length,l,p;k<f;)l=g.charCodeAt(k++),55296<=l&&56319>=l&&k<f?(p=g.charCodeAt(k++),56320==(p&64512)?c.push(((l&1023)<<10)+(p&1023)+65536):(c.push(l),k--)):c.push(l);return c}function I7(g,c){if(55296<=g&&57343>=g){if(c)throw Error("Lone surrogate U+"+g.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}
function dy(){if(Us>=TH)throw Error("Invalid byte index");var g=UH[Us]&255;Us++;if(128==(g&192))return g&63;throw Error("Invalid continuation byte");}function Fla(g){if(Us>TH)throw Error("Invalid byte index");if(Us==TH)return!1;var c=UH[Us]&255;Us++;if(0==(c&128))return c;if(192==(c&224)){var k=dy();c=(c&31)<<6|k;if(128<=c)return c;throw Error("Invalid continuation byte");}if(224==(c&240)){k=dy();var f=dy();c=(c&15)<<12|k<<6|f;if(2048<=c)return I7(c,g)?c:65533;throw Error("Invalid continuation byte");
}if(240==(c&248)&&(k=dy(),f=dy(),g=dy(),c=(c&7)<<18|k<<12|f<<6|g,65536<=c&&1114111>=c))return c;throw Error("Invalid UTF-8 detected");}function Gla(g,c,k){if(!c)return Ei.encodeBase64Packet(g,k);var f=new FileReader;f.onload=function(){Ei.encodePacket({type:g.type,data:f.result},c,!0,k)};return f.readAsArrayBuffer(g.data)}function kR(g,c,k){var f=Array(g.length);k=Hla(g.length,k);for(var l=function(b,d,h){c(d,function(a,e){f[b]=e;h(a,f)})},p=0;p<g.length;p++)l(p,g[p],k)}function lR(g){var c="";do c=
J7[g%64]+c,g=Math.floor(g/64);while(0<g);return c}function mR(){var g=lR(+new Date);return g!==K7?(L7=0,K7=g):g+"."+lR(L7++)}function cq(g){(this||$h).path=g.path;(this||$h).hostname=g.hostname;(this||$h).port=g.port;(this||$h).secure=g.secure;(this||$h).query=g.query;(this||$h).timestampParam=g.timestampParam;(this||$h).timestampRequests=g.timestampRequests;(this||$h).readyState="";(this||$h).agent=g.agent||!1;(this||$h).socket=g.socket;(this||$h).enablesXDR=g.enablesXDR;(this||$h).withCredentials=
g.withCredentials;(this||$h).pfx=g.pfx;(this||$h).key=g.key;(this||$h).passphrase=g.passphrase;(this||$h).cert=g.cert;(this||$h).ca=g.ca;(this||$h).ciphers=g.ciphers;(this||$h).rejectUnauthorized=g.rejectUnauthorized;(this||$h).forceNode=g.forceNode;(this||$h).isReactNative=g.isReactNative;(this||$h).extraHeaders=g.extraHeaders;(this||$h).localAddress=g.localAddress}function dq(g){var c=g&&g.forceBase64;if(!Ila||c)(this||yi).supportsBinary=!1;M7.call(this||yi,g)}function N7(){}function ey(g){O7.call(this||
Je,g);(this||Je).requestTimeout=g.requestTimeout;(this||Je).extraHeaders=g.extraHeaders;if("undefined"!==typeof location){var c="https:"===location.protocol,k=location.port;k||(k=c?443:80);(this||Je).xd="undefined"!==typeof location&&g.hostname!==location.hostname||k!==g.port;(this||Je).xs=g.secure!==c}}function Tk(g){(this||Je).method=g.method||"GET";(this||Je).uri=g.uri;(this||Je).xd=!!g.xd;(this||Je).xs=!!g.xs;(this||Je).async=!1!==g.async;(this||Je).data=void 0!==g.data?g.data:null;(this||Je).agent=
g.agent;(this||Je).isBinary=g.isBinary;(this||Je).supportsBinary=g.supportsBinary;(this||Je).enablesXDR=g.enablesXDR;(this||Je).withCredentials=g.withCredentials;(this||Je).requestTimeout=g.requestTimeout;(this||Je).pfx=g.pfx;(this||Je).key=g.key;(this||Je).passphrase=g.passphrase;(this||Je).cert=g.cert;(this||Je).ca=g.ca;(this||Je).ciphers=g.ciphers;(this||Je).rejectUnauthorized=g.rejectUnauthorized;(this||Je).extraHeaders=g.extraHeaders;this.create()}function P7(){for(var g in Tk.requests)Tk.requests.hasOwnProperty(g)&&
Tk.requests[g].abort()}function Jla(){}function fy(g){nR.call(this||hi,g);(this||hi).query=(this||hi).query||{};VH||(VH=Q7.___eio=Q7.___eio||[]);(this||hi).index=VH.length;var c=this||hi;VH.push(function(k){c.onData(k)});(this||hi).query.j=(this||hi).index;"function"===typeof addEventListener&&addEventListener("beforeunload",function(){c.script&&(c.script.onerror=Jla)},!1)}function eo(g){g&&g.forceBase64&&((this||dg).supportsBinary=!1);(this||dg).perMessageDeflate=g.perMessageDeflate;(this||dg).usingBrowserWebSocket=
WH&&!g.forceNode;(this||dg).protocols=g.protocols;(this||dg).usingBrowserWebSocket||(gy=R7);oR.call(this||dg,g)}function ii(g,c){if(!((this||Cd)instanceof ii))return new ii(g,c);c=c||{};g&&"object"===typeof g&&(c=g,g=null);g?(g=S7(g),c.hostname=g.host,c.secure="https"===g.protocol||"wss"===g.protocol,c.port=g.port,g.query&&(c.query=g.query)):c.host&&(c.hostname=S7(c.host).host);(this||Cd).secure=null!=c.secure?c.secure:"undefined"!==typeof location&&"https:"===location.protocol;c.hostname&&!c.port&&
(c.port=(this||Cd).secure?"443":"80");(this||Cd).agent=c.agent||!1;(this||Cd).hostname=c.hostname||("undefined"!==typeof location?location.hostname:"localhost");(this||Cd).port=c.port||("undefined"!==typeof location&&location.port?location.port:(this||Cd).secure?443:80);(this||Cd).query=c.query||{};"string"===typeof(this||Cd).query&&((this||Cd).query=Kla.decode((this||Cd).query));(this||Cd).upgrade=!1!==c.upgrade;(this||Cd).path=(c.path||"/engine.io").replace(/\/$/,"")+"/";(this||Cd).forceJSONP=!!c.forceJSONP;
(this||Cd).jsonp=!1!==c.jsonp;(this||Cd).forceBase64=!!c.forceBase64;(this||Cd).enablesXDR=!!c.enablesXDR;(this||Cd).withCredentials=!1!==c.withCredentials;(this||Cd).timestampParam=c.timestampParam||"t";(this||Cd).timestampRequests=c.timestampRequests;(this||Cd).transports=c.transports||["polling","websocket"];(this||Cd).transportOptions=c.transportOptions||{};(this||Cd).readyState="";(this||Cd).writeBuffer=[];(this||Cd).prevBufferLen=0;(this||Cd).policyPort=c.policyPort||843;(this||Cd).rememberUpgrade=
c.rememberUpgrade||!1;(this||Cd).binaryType=null;(this||Cd).onlyBinaryUpgrades=c.onlyBinaryUpgrades;(this||Cd).perMessageDeflate=!1!==c.perMessageDeflate?c.perMessageDeflate||{}:!1;!0===(this||Cd).perMessageDeflate&&((this||Cd).perMessageDeflate={});(this||Cd).perMessageDeflate&&null==(this||Cd).perMessageDeflate.threshold&&((this||Cd).perMessageDeflate.threshold=1024);(this||Cd).pfx=c.pfx||null;(this||Cd).key=c.key||null;(this||Cd).passphrase=c.passphrase||null;(this||Cd).cert=c.cert||null;(this||
Cd).ca=c.ca||null;(this||Cd).ciphers=c.ciphers||null;(this||Cd).rejectUnauthorized=void 0===c.rejectUnauthorized?!0:c.rejectUnauthorized;(this||Cd).forceNode=!!c.forceNode;(this||Cd).isReactNative="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();if("undefined"===typeof self||(this||Cd).isReactNative)c.extraHeaders&&0<Object.keys(c.extraHeaders).length&&((this||Cd).extraHeaders=c.extraHeaders),c.localAddress&&((this||Cd).localAddress=
c.localAddress);(this||Cd).id=null;(this||Cd).upgrades=null;(this||Cd).pingInterval=null;(this||Cd).pingTimeout=null;(this||Cd).pingIntervalTimer=null;(this||Cd).pingTimeoutTimer=null;this.open()}function ak(g,c,k){(this||Se).io=g;(this||Se).nsp=c;(this||Se).json=this||Se;(this||Se).ids=0;(this||Se).acks={};(this||Se).receiveBuffer=[];(this||Se).sendBuffer=[];(this||Se).connected=!1;(this||Se).disconnected=!0;(this||Se).flags={};k&&k.query&&((this||Se).query=k.query);(this||Se).io.autoConnect&&this.open()}
function hy(g){g=g||{};(this||lm).ms=g.min||100;(this||lm).max=g.max||1E4;(this||lm).factor=g.factor||2;(this||lm).jitter=0<g.jitter&&1>=g.jitter?g.jitter:0;(this||lm).attempts=0}function Fi(g,c){if(!((this||Sd)instanceof Fi))return new Fi(g,c);g&&"object"===typeof g&&(c=g,g=void 0);c=c||{};c.path=c.path||"/socket.io";(this||Sd).nsps={};(this||Sd).subs=[];(this||Sd).opts=c;this.reconnection(!1!==c.reconnection);this.reconnectionAttempts(c.reconnectionAttempts||Infinity);this.reconnectionDelay(c.reconnectionDelay||
1E3);this.reconnectionDelayMax(c.reconnectionDelayMax||5E3);this.randomizationFactor(c.randomizationFactor||.5);(this||Sd).backoff=new Lla({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==c.timeout?2E4:c.timeout);(this||Sd).readyState="closed";(this||Sd).uri=g;(this||Sd).connecting=[];(this||Sd).lastPing=null;(this||Sd).encoding=!1;(this||Sd).packetBuffer=[];g=c.parser||Mla;(this||Sd).encoder=new g.Encoder;(this||Sd).decoder=new g.Decoder;
(this||Sd).autoConnect=!1!==c.autoConnect;(this||Sd).autoConnect&&this.open()}function T7(g,c){"object"===typeof g&&(c=g,g=void 0);c=c||{};g=Nla(g);var k=g.source,f=g.id,l=g.path;l=tB[f]&&l in tB[f].nsps;c.forceNew||c["force new connection"]||!1===c.multiplex||l?(U7("ignoring socket cache for %s",k),k=V7(k,c)):(tB[f]||(U7("new io instance for %s",k),tB[f]=V7(k,c)),k=tB[f]);g.query&&!c.query&&(c.query=g.query);return k.socket(g.path,c)}function dv(g,c){c=void 0===c?{}:c;var k=c.l2lClient;if(!k)throw Error("lively.shell client side runCommand needs opts.l2lClient!");
Zf.ClientCommand.installLively2LivelyServices(k);k=new Zf.ClientCommand(k);k.spawn(Object.assign({command:g},Zf.obj.dissoc(c,["l2lClient"])));return k}function uB(g){return Zf.dirCache[g.trackerId]?Zf.dirCache[g.trackerId]:Promise.resolve().then(function(){var c,k,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(g.sendToAndWait(g.trackerId,"lively.shell.info",{}),2);c=l.yieldResult;k=c.data;f=k.defaultDirectory;return l.return(Zf.dirCache[g.trackerId]=
f)})})}function vB(g){var c,k,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(g.sendToAndWait(g.trackerId,"lively.shell.env",{}),2);c=l.yieldResult;k=c.data;f=k.env;return l.return(f)})}function XH(g,c){c=(c=void 0===c?{}:c)||{};var k=Zf.runCommand('cat "'+g+'"',c);return k.whenDone().then(function(){if(k.exitCode)throw Error("Read "+g+" failed: "+k.stderr);return k.output})}function YH(g,c,k){!k&&c&&c.content&&(k=c,c=k.content);var f=Zf.runCommand('tee "'+
g+'"',Object.assign({stdin:c||""},k));return f.whenDone().then(function(){if(f.exitCode)throw Error("Write "+g+" failed: "+f.stderr);return f})}function ZH(g,c){c=void 0===c?{}:c;return Sh._runCommand(g,Object.assign({l2lClient:Sh.L2LClient.ensure(Sh.defaultConnection)},c))}function wB(){return Sh._defaultDirectory(Sh.L2LClient.ensure(Sh.defaultConnection))}function pR(){return Sh._env(Sh.L2LClient.ensure(Sh.defaultConnection))}function qR(g){function c(){0<f.length&&k.push(f);f=""}for(var k=[],f=
"",l="normal",p=0,b;b=g[p];p++)if("normal"===l&&/\s/.test(b))c();else{if('"'===b||"'"===b){if("normal"===l){l=b;continue}if(l===b){l="normal";continue}}"\\"===b&&l===g[p+1]&&(p++,b=g[p]);f+=b}c();return k}function rR(g,c,k){var f=k=void 0===k?{}:k,l=f.exclusions,p=void 0===f.fileTypes?[]:f.fileTypes,b=void 0===f.sizeLimit?"+1M":f.sizeLimit;k=void 0===f.charsBefore?80:f.charsBefore;f=void 0===f.charsAfter?80:f.charsAfter;l||(l=Sh.defaultGrepExclusions);l=(l=[l.length?"-iname "+l.map(JSON.stringify).join(" -o -iname "):
"",b?"-size "+b:""].filter(Boolean).join(" -o "))?"\\( "+l+" \\) -prune -o":"";p=(p=p.length?"-iname "+p.map(JSON.stringify).join(" -o -iname "):"")?"-a \\( "+p+" \\)":"";b='find %s %s -type f %s -a -print0 | xargs -0 grep -IinH -o ".\\{0,%s\\}%s.\\{0,%s\\}" '.replace(/([\(\);])/g,"\\$1");g=Sh.string.format(b,c,l,p,k,g,f);var d=Sh.runCommand(g);d.whenDone().then(function(h){var a=h.exitCode;a&&1!==a||(d.results=h.stdout.split("\n").map(function(e){e=e.match(/(.*):([0-9]+):(.*)/);if(!e)return null;
var n=$jscomp.makeIterator(e);n.next();e=n.next().value;var q=n.next().value;n=n.next().value;return{filename:e,lineno:Number(q)-1,match:n}}).filter(Boolean))});return d}function $H(g,c){var k,f,l,p,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return k=Ah.fileInfoCommandString(g,c),f=Ah.runCommand(k,c),d.yield(f.whenDone(),2);if(l=0!=f.exitCode?f.output:null)throw l;p=$jscomp.makeIterator(Ah.parseDirectoryListFromLs(f.stdout,c.rootDirectory||"."));b=p.next().value;
return d.return(b)})}function sR(g,c){return Ah.string.lines(g).map(function(k){return k.trim().length?(new Ah.FileInfo(c)).readFromDirectoryListLine(k):null}).filter(Boolean)}function aI(g,c){var k,f,l,p,b,d,h,a,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){k=Object.assign({findFilesGroup:"default-find-files-process"},c);f=k.findFilesGroup;l=k.rootDirectory;b=p=Ah.findFilesProcesses[f]||(Ah.findFilesProcesses[f]={promiseState:null,commands:[]});d=b.commands;h=b.promiseState;h||
(p.promiseState=h=Ah.promise.deferred());a=Ah.findFilesCommandString(g,c);d.forEach(function(q){return q.kill()});e=Ah.runCommand(a,c);d.push(e);e.whenDone().then(function(){Ah.arr.remove(d,e);if(d.some(function(r){return r.startTime>e.startTime}))console.log("[findFiles] command "+e+" exited but a newer findFiles command was started for group "+f+", discarding output");else{var q=0!=e.exitCode?e.output:null;q&&console.warn(q);q=q?[]:Ah.parseDirectoryListFromLs(e.stdout,l)||[];h.resolve(q);Object.assign(p,
{promiseState:null,commands:[]})}}).catch(function(q){return console.error(q)});return n.return(h.promise)})}function tR(g){function c(k){return Array.prototype.concat.apply([k],k.children?k.children.map(c):[])}return c(g).map(function(k){var f=k.fullPath.replace(/^\//,"");return{fileName:f,path:f,rootDirectory:"./",isDirectory:k.isDirectory,isLink:void 0,lastModified:void 0,linkCount:void 0,mode:void 0,size:void 0,group:void 0,user:void 0}})}function bI(g,c,k){var f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){f=
g.isResource?g:jf.resource(System.decanonicalize(g));l=f.nameWithoutExt();return p.return(jf.loadWorldFromDB(l,void 0,c,k))})}function cI(g,c,k){var f,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return c&&(jf.reset(),c.name=null,c.metadata&&(c.metadata.commit={})),f=jf.MorphicDB.default,b.yield(f.load("world",void 0,k,g),2);l=b.yieldResult;p="undefined"!==typeof document?document.location.search:"";k=Object.assign({pathForBrowserHistory:jf.pathForBrowserHistory(l.name,
p)},k);return b.return(jf.loadWorld(l,c,k))})}function dI(g,c,k,f){var l,p,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return k&&(jf.reset(),k.name=null,k.metadata&&(k.metadata.commit={})),l=jf.MorphicDB.default,d.yield(l.load("world",g,f,void 0,c||void 0),2);p=d.yieldResult;b="undefined"!==typeof document?document.location.search:"";f=Object.assign({pathForBrowserHistory:jf.pathForBrowserHistory(g,b)},f);return d.return(jf.loadWorld(p,k,f))})}function eI(g,
c,k){k=void 0===k?{}:k;var f,l,p,b,d,h,a,e,n,q,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:f=k;l=f.env;p=f.root;b=void 0===f.verbose?!0:f.verbose;d=void 0===f.localconfig?!0:f.localconfig;h=void 0===f.l2l?!0:f.l2l;a=void 0===f.shell?!0:f.shell;e=void 0===f.worldLoadDialog?!1:f.worldLoadDialog;n=void 0===f.showUserFlap?"undefined"===typeof g.showsUserFlap?!0:g.showsUserFlap:f.showUserFlap;l=l||(c?c.env:jf.MorphicEnv.default());q=l.domEnv.document||
document;r=q.getElementById("dom-loading-indicator");E.setCatchFinallyBlocks(2,3);if(!(v=h)){E.jumpTo(5);break}return E.yield(jf.setupLively2Lively(g),6);case 6:v=E.yieldResult;case 5:y=v;if(!y||!a){E.jumpTo(7);break}return E.yield(jf.setupLivelyShell({l2lClient:y}),7);case 7:b&&r&&(r.style.display="");if(!d){E.jumpTo(9);break}return E.yield(jf.loadLocalConfig(),10);case 10:case 9:return E.yield(l.setWorld(g,p),11);case 11:e&&g.execCommand("load world");k.pathForBrowserHistory&&window.history.pushState({},
"lively.next",k.pathForBrowserHistory);g.showsUserFlap=n;if(c)c.onUnload();jf.emit("world/loaded",g);return E.return(g);case 3:E.enterFinallyBlock();r&&(r.style.display="none");E.leaveFinallyBlock(0);break;case 2:D=E.enterCatchBlock();console.error("Error loading world: ",D);if(!c){E.jumpTo(12);break}return E.yield(l.setWorld(c),13);case 13:c.showError(D);case 12:throw D;}})}function iy(g,c){var k,f,l,p,b,d,h,a,e,n,q,r,v,y,D,E,I,K,P,N,aa,m,t,u,B,A,H,F,L,U,T,Y,wa,Ga,na,ea,da,ia,Oa,Va,eb,Sa,Bb,Z,sa,
Da,X,ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ta){switch(ta.nextAddress){case 1:return c=Object.assign({showSaveDialog:!0,useExpectedCommit:!0,errorOnMissingExpectedCommit:!1,confirmOverwrite:!0},c),k=g.name,f=[],l="",ta.yield(jf.ensureCommitInfo(jf.Path("metadata.commit").get(g)),2);case 2:p=ta.yieldResult;b=c.morphicdb||jf.MorphicDB.default;d="";h="db";if(!c.showSaveDialog){p&&(a=p,k=a.name,f=a.tags,l=a.description);ta.jumpTo(3);break}return ta.yield(jf.resource("part://SystemDialogs/save world dialog").read(),
4);case 4:return e=ta.yieldResult,ta.yield(g.openPrompt(e,{targetWorld:g}),5);case 5:if(n=ta.yieldResult,q=n.commit,r=n.db,v=n.mode,y=n.filePath,r&&(b=r),h=v,d=y,D=q||{},k=D.name,f=D.tags,l=D.description,!k)return ta.return(null);case 3:return E=$world.execCommand("open loading indicator","saving "+k+"..."),ta.yield(jf.promise.delay(80),6);case 6:if("json"!=h){ta.jumpTo(7);break}I=jf.resource(System.baseURL).join(d).withRelativePartsResolved();return ta.yield(I.exists(),8);case 8:return ta.yieldResult?
(E.visible=!1,ta.yield($world.confirm(["File Conflict\n",{},"The file you want to save the world to\n",{fontSize:15,fontWeight:"normal"},I.url,{textStyle:"italic",fontSize:15,fontWeight:"normal"},"\n already exists. Overwrite?",{fontSize:15,fontWeight:"normal"}],{lineWrapping:!1}),12)):ta.yield(I.ensureExistance(),10);case 12:K=ta.yieldResult;if(!K)return E.remove(),ta.return();E.visible=!0;case 10:return g.changeMetaData("file",d,!1,!1),ta.yield(jf.createMorphSnapshot(g),13);case 13:return P=ta.yieldResult,
ta.yield(I.writeJson(P),14);case 14:return N=JSON.stringify(P),aa=d.replace(".json",".br.json"),m=jf,t=m.resource,ta.yield(jf.defaultDirectory(jf.ShellClientResource.defaultL2lClient),16);case 16:return ta.yield(t.call(m,ta.yieldResult+"/..").join(aa).withRelativePartsResolved().brotli(N),15);case 15:return jf.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(k).read(),E.remove(),g.setStatusMessage("saved world "+k+" to file: "+I.url),ta.return();case 7:ta.setCatchFinallyBlocks(17,
18);u={previewWidth:200,previewHeight:200,previewType:"png",ignoreMorphs:[E]};B="HEAD";A=p?p.name:g.name;if(!c.useExpectedCommit){ta.jumpTo(20);break}if(A===k||!c.confirmOverwrite){H=p?p._id:void 0;ta.jumpTo(20);break}return ta.yield(b.exists("world",k),22);case 22:F=ta.yieldResult;L=F.exists;U=F.commitId;if(!L){ta.jumpTo(23);break}E.center=g.windowBounds().center();E.visible=!1;return ta.yield(g.confirm(["The world\n",{fontWeight:"normal"},'"'+k+'"',{},"\nalready exists, overwrite?",{fontWeight:"normal"}],
{hasFixedPosition:!0,width:350}),24);case 24:T=ta.yieldResult;E.visible=!0;if(!T)return ta.return(null);H=U;case 23:g.name=k;case 20:return Y={author:g.getCurrentUser(),message:"world save",tags:f,description:l},ta.yield(b.snapshotAndCommit("world",k,g,u,Y,B,H),25);case 25:return wa=ta.yieldResult,window.history&&(Ga=jf.pathForBrowserHistory(k),window.history.pushState({},"lively.next",Ga)),jf.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(k).read(),g.setStatusMessage("saved world "+
k),g.get("world-list")&&g.get("world-list").onWorldSaved(k),ta.return(wa);case 18:ta.enterFinallyBlock();E.remove();ta.leaveFinallyBlock(0);break;case 17:na=ta.enterCatchBlock();if(na.message.includes("but no version entry exists")&&!c.errorOnMissingExpectedCommit)return ta.return(iy(g,Object.assign({},c,{morphicdb:b,useExpectedCommit:!1,showSaveDialog:!1})));ea=$jscomp.makeIterator(na.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||
[]);ea.next();ea.next();da=ea.next().value;ia=ea.next().value;if(!da||!ia){ta.jumpTo(26);break}Oa=$jscomp;Va=Oa.makeIterator;return ta.yield(b.log(ia,1,!0),27);case 27:eb=Va.call(Oa,ta.yieldResult);Sa=eb.next().value;Bb=!0;if(!c.confirmOverwrite){ta.jumpTo(28);break}Z=Sa;sa=Z.author;Da=sa.name;X=Z.timestamp;ma="The current version of world "+k+" is not the most recent!\nA newer version by "+(Da+" was saved on ")+(jf.date.format(new Date(X),"yyyy-mm-dd HH:MM")+". Overwrite?");return ta.yield(g.confirm(["Version Conflict\n",
null,ma,{fontSize:16,fontWeight:"normal"}],{width:600}),29);case 29:Bb=ta.yieldResult;case 28:if(!Bb)return ta.return(null);g.changeMetaData("commit",jf.obj.dissoc(Sa,["preview"]),!0,!1);return ta.return(iy(g,Object.assign({},c,{morphicdb:b,showSaveDialog:!1})));case 26:console.error(na),g.logError("Error saving world: "+na),ta.jumpTo(18)}})}function uR(g,c){var k=g.row;g=g.column;var f=c.row;c=c.column;return k<f?-2:k===f?g<c?-1:g===c?0:1:2}function eq(g,c){return 0>Oj.comparePosition(g,c)}function jy(g,
c){return 0>=Oj.comparePosition(g,c)}function fq(g,c){return 0===Oj.comparePosition(g,c)}function ky(g,c){return Oj.lessPosition(g,c)?g:c}function ly(g,c){return Oj.lessPosition(g,c)?c:g}function vR(g,c){if(!g||!c)return g==c;var k=!0,f={},l;for(l in g)if(f[l]=!0,!c.hasOwnProperty(l)||g[l]!==c[l]){k=!1;break}if(k)for(var p in c)if(!(f[p]||g.hasOwnProperty(p)&&g[p]===c[p])){k=!1;break}return k}function fI(g,c,k,f,l){l=void 0===l?"":l;var p="string"!==typeof g,b="string"!==typeof k;if(p||b){var d=[];
p?d.push(g,c):d.push(g+l,c);b?d.push(k,f):d.push(k+l,f);return d}return!c&&!f||c==f?[g+l+k,c]:c&&f?Kg.shallowEquals(c,f)?[g+l+k,c]:[g+l,c,k,f]:[g+l,c,k,f]}function gI(g,c){c=void 0===c?"":c;if(2>=g.length)return g;var k=[],f=$jscomp.makeIterator(g),l=f.next().value,p=f.next().value;for(f=2;f<g.length;f+=2)p=Kg.concatAttributePair(l,p,g[f],g[f+1],c),2>=p.length?(l=p[0],p=p[1]):(k.push.apply(k,$jscomp.arrayFromIterable(p.slice(0,-2))),p=$jscomp.makeIterator(p.slice(-2)),l=p.next().value,p=p.next().value);
k.push(l,p);return k}function hI(g,c){for(var k=0,f=0;f<g.length;f+=2){var l=g[f],p=k+("string"===typeof l?l.length:1);if(p<c)k=p;else{if(k===c)return[g.slice(0,f),g.slice(f)];if(p===c)return[g.slice(0,f+2),g.slice(f+2)];if("string"!==typeof l)throw Error("Assuming text is a string for splitting it, got "+l+" instead!");var b=g[f+1],d=c-k;p=[].concat($jscomp.arrayFromIterable(g.slice(0,f)),[l.slice(0,d),b]);g=l.length===d?g.slice(f+2):[l.slice(c-k),b].concat($jscomp.arrayFromIterable(g.slice(f+2)));
return[p,g]}}return[g,[]]}function iI(g,c){var k=g;g=0;for(var f=[],l=0;l<c.length;l++){var p=$jscomp.makeIterator(Kg.splitTextAndAttributesAt(k,c[l]-g));k=p.next().value;p=p.next().value;f.push(k);for(var b=0;b<k.length;b+=2)g+="string"===typeof k[b]?k[b].length:1;k=p}f.push(k);return f}function jI(g,c,k){k=void 0===k?!1:k;if(!g.length||2===g.length&&""==g[0])return k?c:c.slice();if(!c.length||2===c.length&&""==c[0])return k?g:g.slice();g=k?g:g.slice();for(k=0;k<c.length;k+=2)g.push(c[k],c[k+1]);
return g}function kI(g,c,k){var f=c.start;c=c.end;if(Kg.eqPosition(f,c))return null;Kg.lessPosition(c,f)&&(c=$jscomp.makeIterator([c,f]),f=c.next().value,c=c.next().value);var l=f;f=l.row;var p=l.column;l=c;c=l.row;l=l.column;var b=g.getLine(f),d=b.textAndAttributes,h=0;p=$jscomp.makeIterator(Kg.splitTextAndAttributesAt(d,p));g=p.next().value;p=p.next().value;d.length=0;Kg.textAndAttributesDo(g,function(n,q){h+="string"===typeof n?n.length:1;d.push(n,q)});if(f===c){var a=$jscomp.makeIterator(Kg.splitTextAndAttributesAt(p,
l-h));p=a.next().value;a=a.next().value}Kg.textAndAttributesDo(p,function(n,q){return d.push(n,k(b,q))});f===c&&Kg.textAndAttributesDo(a,function(n,q){return d.push(n,q)});b._textAttributes=null;b.textAndAttributes=Kg.joinTextAttributes(d);if(f!==c){a={};for(f+=1;f<c;a={$jscomp$loop$prop$textAndAttributes$1682$2794:a.$jscomp$loop$prop$textAndAttributes$1682$2794},f++)b=b.nextLine(),a.$jscomp$loop$prop$textAndAttributes$1682$2794=b.textAndAttributes,g=a.$jscomp$loop$prop$textAndAttributes$1682$2794.slice(),
a.$jscomp$loop$prop$textAndAttributes$1682$2794.length=0,Kg.textAndAttributesDo(g,function(n){return function(q,r){return n.$jscomp$loop$prop$textAndAttributes$1682$2794.push(q,k(b,r))}}(a)),b._textAttributes=null,b.textAndAttributes=Kg.joinTextAttributes(a.$jscomp$loop$prop$textAndAttributes$1682$2794);b=b.nextLine();var e=b.textAndAttributes;f=$jscomp.makeIterator(Kg.splitTextAndAttributesAt(e,l));a=f.next().value;f=f.next().value;e.length=0;Kg.textAndAttributesDo(a,function(n,q){return e.push(n,
k(b,q))});Kg.textAndAttributesDo(f,function(n,q){return e.push(n,q)});b._textAttributes=null;b.textAndAttributes=Kg.joinTextAttributes(e)}}function lI(g,c){var k=g.column;g=g.row;var f=[],l=[];c=$jscomp.makeIterator(Kg.splitTextAndAttributesIntoLines(c));for(var p=c.next();!p.done;p=c.next()){p=p.value;for(var b=0;b<p.length;b+=2){var d=p[b];d=k+("string"===typeof d?d.length:1);f.push({start:{row:g,column:k},end:{row:g,column:d}});l.push(p[b],p[b+1]);k=d}k=0;g++}return{ranges:f,textAndAttributes:l}}
function my(g,c){c=void 0===c?"\n":c;if(!g.length)return[];for(var k=[],f=[],l=0;l<g.length;l+=2){var p=g[l],b=g[l+1];if("string"!==typeof p)f.push(p,b);else for(;p.length;){var d=p.indexOf(c);if(-1===d){f.push(p,b);break}0<d&&f.push(p.slice(0,d),b);k.push(f);p=p.slice(d+1);f=[]}}f.length?k.push(f):(f=$jscomp.makeIterator(g.slice(-2)),g=f.next().value,f=f.next().value,"string"===typeof g&&g.endsWith(c)&&k.push(["",f]));return k}function mI(g,c){c=void 0===c?g.textAndAttributesInRange(g.selection.range):
c;var k=new g.constructor(Object.assign({},g.defaultTextStyle,{width:g.width,textAndAttributes:c}));c=k.textRenderer.directRenderTextLayerFn(k);g=k.textRenderer.directRenderLineFn(k);c=c();var f=System.global&&System.global.getComputedStyle?System.global.getComputedStyle(c):null;f&&(c.ownerDocument.body.appendChild(c),c.style.whiteSpace=f.whiteSpace,c.style.overflowWrap=f.overflowWrap,c.style.wordBreak=f.wordBreak,c.style.minWidth=f.minWidth,c.parentNode.removeChild(c));k=$jscomp.makeIterator(k.document.lines);
for(f=k.next();!f.done;f=k.next())c.appendChild(g(f.value));return c.outerHTML}function ur(g){return g?g.replace(/^\s+|\s+$/g,""):""}function wR(g,c){var k=g&&"string"===typeof g.type,f=k?g:c,l;for(l in g){var p=g[l];Array.isArray(p)?p.forEach(function(b){wR(b,f)}):p&&"object"===typeof p&&wR(p,f)}k&&Object.defineProperty(g,"parent",{configurable:!0,writable:!0,enumerable:!1,value:c||null});return g}function nI(g){(this||Ola).options=g||{}}function yk(g){g=g||{};W7.call(this||Vs,g);(this||Vs).indentation=
g.indent}function ev(g){throw new RangeError(Pla[g]);}function X7(g,c){var k=g.split("@"),f="";1<k.length&&(f=k[0]+"@",g=k[1]);g=g.replace(Qla,".").split(".");k=[];for(var l=g.length;l--;)k[l]=c(g[l]);c=k.join(".");return f+c}function Y7(g){for(var c=[],k=0,f=g.length;k<f;){var l=g.charCodeAt(k++);if(55296<=l&&56319>=l&&k<f){var p=g.charCodeAt(k++);56320==(64512&p)?c.push(((1023&l)<<10)+(1023&p)+65536):(c.push(l),k--)}else c.push(l)}return c}function fo(){this.href=this.path=this.pathname=this.query=
this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function xB(g,c,k){if(g&&gq.isObject(g)&&g instanceof fo)return g;var f=new fo;return f.parse(g,c,k),f}function xR(g,c){try{return decodeURIComponent(g.join(""))}catch(f){}if(1===g.length)return g;c=c||1;var k=g.slice(0,c);g=g.slice(c);return Array.prototype.concat.call([],xR(k),xR(g))}function yR(){return Array.prototype.reduce.call(arguments,function(g,c){return Rla.resolve(g,c)})}function Z7(g){return"\\"===
Sla.sep?g.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):g}function yB(g){return Tla(g.replace(/\+/g,"%2B"))}function oI(g,c,k){Ula.nextTick(function(){g(c,k)})}function ny(g,c){try{return JSON.parse(g.replace(/^\)\]\}'/,""))}catch(k){throw k.sourceMapData=c,k;}}function $7(g,c,k){c=yB(c);try{return String(g(c))}catch(f){throw f.sourceMapData=k,f;}}function a8(g,c,k,f){try{var l=b8(g,c)}catch(p){return oI(f,p)}if(!l||l.map)return oI(f,null,l);g=yB(l.url);k(g,function(p,b){if(p)return p.sourceMapData=
l,f(p);l.map=String(b);try{l.map=ny(l.map,l)}catch(d){return f(d)}f(null,l)})}function c8(g,c,k){g=b8(g,c);if(!g||g.map)return g;g.map=$7(k,g.url,g);g.map=ny(g.map,g);return g}function b8(g,c){c=Z7(c);g=(g=g.match(Vla))?g[1]||g[2]||"":null;if(!g)return null;var k=g.match(Wla);if(k){var f=k[1]||"text/plain",l=k[2]||"";k=k[3]||"";c={sourceMappingURL:g,url:null,sourcesRelativeTo:c,map:k};if(!Xla.test(f)){var p=Error("Unuseful data uri mime type: "+f);p.sourceMapData=c;throw p;}try{if(";base64"===l)if("undefined"===
typeof TextDecoder||"undefined"===typeof Uint8Array)p=d8(k);else{var b=d8(k),d=b.length,h=new Uint8Array(d);for(g=0;g<d;g++)h[g]=b.charCodeAt(g);p=(new TextDecoder(Yla,{fatal:!0})).decode(h)}else p=decodeURIComponent(k);c.map=ny(p,c)}catch(a){throw a.sourceMapData=c,a;}return c}p=yR(c,g);return{sourceMappingURL:g,url:p,sourcesRelativeTo:p,map:null}}function e8(g,c,k,f,l){"function"===typeof f&&(l=f,f={});var p=g.sources?g.sources.length:0,b={sourcesResolved:[],sourcesContent:[]};if(0===p)oI(l,null,
b);else{var d=function(){p--;0===p&&l(null,b)};f8(g,c,f,function(h,a,e){b.sourcesResolved[e]=h;"string"===typeof a?(b.sourcesContent[e]=a,oI(d,null)):(h=yB(h),k(h,function(n,q){b.sourcesContent[e]=n?n:String(q);d()}))})}}function g8(g,c,k,f){var l={sourcesResolved:[],sourcesContent:[]};if(!g.sources||0===g.sources.length)return l;f8(g,c,f,function(p,b,d){l.sourcesResolved[d]=p;if(null!==k)if("string"===typeof b)l.sourcesContent[d]=b;else{p=yB(p);try{l.sourcesContent[d]=String(k(p))}catch(h){l.sourcesContent[d]=
h}}});return l}function f8(g,c,k,f){k=k||{};c=Z7(c);for(var l,p,b=0,d=g.sources.length;b<d;b++)l=null,"string"===typeof k.sourceRoot?l=k.sourceRoot:"string"===typeof g.sourceRoot&&!1!==k.sourceRoot&&(l=g.sourceRoot),l=null===l||""===l?yR(c,g.sources[b]):yR(c,l.replace(Zla,"/"),g.sources[b]),p=(g.sourcesContent||[])[b],f(l,p,b)}function Ag(){throw Error("Node.js fs promises module is not supported by JSPM core in the browser");}function rl(g){h8.call(this||zR,g)}function pI(g){if(g&&g.isListItem&&
"string"===typeof g.string)return g;if(!g||!g.isListItem)return{isListItem:!0,string:String(g),value:g};var c=g.string||g.label||"no item.string";g.string=c&&"string"!==typeof c?Array.isArray(c)?c.map(function(k,f){return 0==f%2?String(k):""}).join(""):String(c):String(c);return g}function qI(g){var c=g.filePath,k=g.worldName,f=g.snapshot,l=g.commit,p=g.loadingIndicator,b=g.progress,d=void 0===g.logError?function(U){return console.log(U)}:g.logError,h,a,e,n,q,r,v,y,D,E,I,K,P,N,aa,m,t,u,B,A,H,F,L;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(U){switch(U.nextAddress){case 1:return U.setCatchFinallyBlocks(2),h=JSON.parse(localStorage.getItem("lively.load-config")||'{"lively.lang":"dynamic","lively.ast":"dynamic","lively.source-transform":"dynamic","lively.classes":"dynamic","lively.vm":"dynamic","lively.modules":"dynamic","lively.user":"dynamic","lively.storage":"dynamic","lively.morphic":"dynamic"}'),b.opacity=0,b.hasFixedPosition=!0,b.openInWorld(),b.bottomCenter=p.topCenter,
U.yield(Vd.polyfills(),4);case 4:return a=$world.env,Vd.doBootstrap?U.yield(Vd.bootstrapLivelySystem(p,b,h),8):U.yield(Vd.fastPrepLivelySystem(p),7);case 7:U.jumpTo(6);break;case 8:case 6:return p.label="Loading lively.2lively...",U.yield(lively.modules.registerPackage("lively.2lively"),9);case 9:Vd.askBeforeQuit&&window.addEventListener("beforeunload",function(T){return T.returnValue="Really?"},!0);if("dynamic"!=h["lively.morphic"]||Vd.fastLoad){e=lively.morphic;U.jumpTo(10);break}p.label="Loading lively.morphic...";
return U.yield(lively.modules.importPackage("lively.morphic"),11);case 11:e=U.yieldResult,b.finishPackage({packageName:"lively.morphic",loaded:!0});case 10:p.label="Loading world...";window.onresize=null;window.loadCompiledFrozenPart=lively.modules.module("lively.morphic/partsbin.js")._recorder.loadPart;Vd.unregisterExtension("part");Vd.registerExtension(Vd.partResourceExtension);Vd.unregisterExtension("styleguide");Vd.registerExtension(Vd.styleguideResourceExtension);lively.FreezerRuntime=!1;n=document.location;
window.worldLoadingIndicator=p;U.setCatchFinallyBlocks(12);q={root:$world.env.renderer.rootNode,verbose:!0,localconfig:!0,l2l:!0,shell:!0};if(f)return f.startsWith("http")||(f=Vd.resource(System.baseURL).join(f).url),U.yield(lively.modules.module("lively.morphic/world.js").recorder,33);if(l)return U.yield(e.World.loadFromCommit(l,void 0,Object.assign({},q,{browserURL:"/worlds/load?name="+l.name})),15);if(k)return"__newWorld__"==k?Object.values(h).every(function(T){return"frozen"==T})||Vd.fastLoad?
U.yield(lively.modules.module("lively.ide/world.js").recorder,29):U.yield(lively.modules.System.import("lively.ide/world.js"),27):U.yield(e.World.loadFromDB(k,void 0,void 0,Object.assign({},q,{browserURL:"/worlds/load?name="+k.replace(/\.json($|\?)/,"")})),15);if(!c){U.jumpTo(15);break}return U.yield(e.World.loadFromResource(Vd.resource(System.baseURL).join(c),void 0,Object.assign({},q,{browserURL:"/worlds/load?file="+c})),15);case 27:return y=U.yieldResult,r=y.LivelyWorld,U.yield(lively.modules.System.import("lively.morphic/world-loading.js"),
28);case 28:D=U.yieldResult;v=D.loadWorld;U.jumpTo(26);break;case 29:return E=U.yieldResult,r=E.LivelyWorld,U.yield(lively.modules.module("lively.morphic/world-loading.js").recorder,30);case 30:I=U.yieldResult,v=I.loadWorld;case 26:return U.yield(v(new r({openNewProjectPrompt:!0}),void 0,q),15);case 33:return aa=U.yieldResult,K=aa.World,U.yield(lively.modules.module("lively.morphic/world-loading.js").recorder,34);case 34:return m=U.yieldResult,N=m.loadWorld,U.yield(lively.modules.module("lively.morphic/serialization.js").recorder,
35);case 35:return t=U.yieldResult,u=P=t.loadMorphFromSnapshot,U.yield(Vd.resource(f).readJson(),37);case 37:return U.yield(u(U.yieldResult),36);case 36:return B=U.yieldResult,U.yield(N(new K({showsUserFlap:!1,extent:$world.extent}),void 0,q),38);case 38:A=U.yieldResult,A.addMorph(B),A.onWindowResize();case 15:U.leaveTryBlock(13,2);break;case 12:H=U.enterCatchBlock(2),window.__loadError__=H;case 13:return b.finishPackage({packageName:"world",loaded:!0}),b.fadeIntoBack(),window.addEventListener("popstate",
function(T){document.location==n&&document.location.reload()}),Vd.worldLoaded=!0,U.yield($world.whenReady(),39);case 39:return p.remove(),U.yield(a.renderer.worldMorph.whenRendered(),40);case 40:"dynamic"!=h["lively.morphic"]||Vd.fastLoad||(a.renderer.clear(),a.fontMetric.uninstall(),a.eventDispatcher.uninstall());U.leaveTryBlock(0);break;case 2:throw F=U.enterCatchBlock(),F.originalErr&&(F=F.originalErr),L=F.message,F.stack!==F.message&&(L+=F.stack.includes(F.message)?F.stack.replace(F.message,"\n"):
F.stack),d(L),F;}})}Ka({$:cl,G:rE,H:$w,J:tr,P:Eg,Z:Io,_:Hp,a$:Ww,a4:PH,a5:iy,aU:oB,aV:qB,aW:NH,a_:Xw,ad:sg,at:dx,au:KG,ax:ax,b:xh,b0:Pz,b1:Qz,b2:Uq,b4:Gp,b5:Tq,b6:BE,b7:zE,b8:AE,b9:CE,bA:mi,bD:Uz,bF:ns,bH:Qq,bP:function(g){g=void 0===g?document.body:g;var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){go.default().world||(c=window.$world=window.$$world=new vr({name:i8.name,extent:xh(window.innerWidth,window.innerHeight)}),c.stealFocus=!0,go.default().setWorldRenderedOn(c,g,window.prerenderNode));
window.$world.dontRecordChangesWhile(function(){var f=Wz(i8,{reinitializeIds:function(l){return l}});if(f.isWorld)f.position=xh(0,0),f.isEmbedded=!0,go.default().setWorldRenderedOn(f,g,window.prerenderNode),"elastic"===f.resizePolicy&&f.execCommand("resize to fit window");else try{g!=document.body?(new window.ResizeObserver(function(l){return f.execCommand("resize on client",l[0])})).observe(g):window.onresize=lively.FreezerRuntime.resizeHandler=function(){return f.execCommand("resize on client")},
f.openInWorld(xh(0,0)),f.execCommand("resize on client",g)}catch(l){f.position=xh(0,0)}});k.jumpToEnd()})},ba:ZH,bb:wB,bc:nB,bu:ce,by:Dn,c:Ik,d:Jk,i:ac,j:cv,l:bq,m:zj,n:OH,o:Sq,p:bg,r:Uc,u:ex,v:gk,w:Vw,x:Yf,y:js,z:Zw});var Ze=lively.FreezerRuntime.recorderFor("lively.resources/src/helpers.js");Ze.applyExclude=gc;Ze.parseQuery=Kb;Ze.stringifyQuery=Zc;Ze.withRelativePartsResolved=Kc;Ze._relativePathBetween_checkPathes=function(g,c){g.startsWith("/")&&(g=g.slice(1));c.startsWith("/")&&(c=c.slice(1));
g=g.split("/");c=c.split("/");for(var k=0;k<c.length&&g[k]&&g[k]==c[k];k++);return"../".repeat(Math.max(0,c.length-k-1))+g.splice(k,g.length).join("/")};Ze.relativePathBetween=md;Ze.join=Fc;Ze.parent=Bc;Ze.parents=Nc;Ze.resource=Uc;Ze.createFiles=ce;Ze.registerExtension=Zd;Ze.unregisterExtension=pe;Ze.applyExclude=gc;Ze.applyExclude=gc;Ze.parseQuery=Kb;Ze.parseQuery=Kb;Ze.stringifyQuery=Zc;Ze.stringifyQuery=Zc;Ze.slashEndRe=/\/+$/;Ze.slashStartRe=/^\/+/;Ze.protocolRe=/^[a-z0-9-_\.]+:/;Ze.urlRe=/^([^:\/]+):\/\/([^\/]*)(.*)/;
Ze.slashslashRe=/^\/\/[^\/]+/;Ze.pathDotRe=/\/\.\//g;Ze.pathDoubleDotRe=/\/[^\/]+\/\.\./;Ze.pathDoubleSlashRe=/(^|[^:])[\/]+/g;Ze.withRelativePartsResolved=Kc;Ze.withRelativePartsResolved=Kc;Ze.relativePathBetween=md;Ze.relativePathBetween=md;Ze.join=Fc;Ze.join=Fc;Ze.parent=Bc;Ze.parent=Bc;Ze.parents=Nc;Ze.parents=Nc;var fv=Ze.extensions||[];Ze.extensions=fv;Ze.extensions=fv;Ze.extensions=fv;Ze.resource=Uc;Ze.resource=Uc;Ze.createFiles=ce;Ze.createFiles=ce;Ze.registerExtension=Zd;Ze.registerExtension=
Zd;Ze.unregisterExtension=pe;Ze.unregisterExtension=pe;var rI=/^file:\/\/\/[a-z]:\//i;Ze.windowsURLPrefixRe=rI;Ze.windowsURLPrefixRe=rI;Ze.windowsURLPrefixRe=rI;var sI=/^[a-z]:\//i;Ze.windowsPathPrefixRe=sI;Ze.windowsPathPrefixRe=sI;Ze.windowsPathPrefixRe=sI;var tI=/^[a-z]:\/$/i;Ze.windowsRootPathRe=tI;Ze.windowsRootPathRe=tI;Ze.windowsRootPathRe=tI;var ri=lively.FreezerRuntime.recorderFor("lively.resources/src/resource.js");ri.nyi=function(g,c){throw Error(c+" for "+g.constructor.name+" not yet implemented");
};ri.resource=Uc;ri.parseQuery=Kb;ri.withRelativePartsResolved=Kc;ri.relativePathBetween=md;ri.windowsPathPrefixRe=sI;ri.stringifyQuery=Zc;ri.slashEndRe=/\/+$/;ri.slashStartRe=/^\/+/;ri.protocolRe=/^[a-z0-9-_\.]+:/;ri.slashslashRe=/^\/\/[^\/]+/;var Uf=function(g,c){if(!g)throw Error("Cannot create resource without url");this.url=String(g);this.binary=!1;this.linkCount=this._isLink=this._isDirectory=this.mode=this.group=this.user=this.contentType=this.type=this.size=this.etag=this.created=this.lastModified=
void 0};Uf.fromProps=function(g){g=void 0===g?{}:g;return(new this(g.url)).assignProperties(g)};Uf.prototype.equals=function(g){if(!g||this.constructor!==g.constructor)return!1;var c=this.url;g=g.url;"/"===c[c.length-1]&&(c=c.slice(0,-1));"/"===g[g.length-1]&&(g=g.slice(0,-1));return c===g};Uf.prototype.toString=function(){return this.constructor.name+'("'+this.url+'")'};Uf.prototype.newResource=function(g){return ri.resource(g,this)};Uf.prototype.path=function(){var g=this.url.replace(ri.protocolRe,
"").replace(ri.slashslashRe,"");return""===g?"/":g};Uf.prototype.pathWithoutQuery=function(){return this.path().split("?")[0]};Uf.prototype.name=function(){var g=this.path(),c=g.lastIndexOf("?");-1<c&&(g=g.slice(0,c));g.endsWith("/")&&(g=g.slice(0,-1));g=g.split("/");return decodeURIComponent(g[g.length-1])};Uf.prototype.ext=function(){var g=this.url;if(g.endsWith("/"))return"";g=$jscomp.makeIterator(g.match(/\.([^\/\.]+$)/)||["",""]);g.next();return g.next().value.toLowerCase()};Uf.prototype.nameWithoutExt=
function(){var g=this.name(),c=g.lastIndexOf(".");0<c&&(g=g.slice(0,c));return g};Uf.prototype.scheme=function(){return this.url.split(":")[0]};Uf.prototype.host=function(){var g=this.url.indexOf("://");if(-1===g)return null;g=this.url.slice(g+3);var c=g.indexOf("/");return g.slice(0,-1<c?c:g.length)};Uf.prototype.schemeAndHost=function(){return this.isRoot()?this.asFile().url:this.url.slice(0,this.url.length-this.path().length)};Uf.prototype.parent=function(){return this.isRoot()?null:this.newResource(this.url.split("?")[0].replace(ri.slashEndRe,
"").split("/").slice(0,-1).join("/")+"/")};Uf.prototype.parents=function(){for(var g=[],c=this.parent();c;)g.unshift(c),c=c.parent();return g};Uf.prototype.isParentOf=function(g){var c=this;return g.schemeAndHost()===this.schemeAndHost()&&g.parents().some(function(k){return k.equals(c)})};Uf.prototype.query=function(){return ri.parseQuery(this.url)};Uf.prototype.withQuery=function(g){var c=Object.assign({},this.query(),{},g);g=$jscomp.makeIterator(this.url.split("?")).next().value;c=ri.stringifyQuery(c);
return this.newResource(g+"?"+c)};Uf.prototype.commonDirectory=function(g){if(g.schemeAndHost()!==this.schemeAndHost())return null;if(this.isDirectory()&&this.equals(g))return this;if(this.isRoot())return this.asDirectory();if(g.isRoot())return g.asDirectory();g=g.parents();for(var c=this.parents(),k=this.root(),f=0;f<c.length;f++){var l=c[f],p=g[f];if(!p||!l.equals(p))break;k=l}return k};Uf.prototype.withRelativePartsResolved=function(){var g=this.path(),c=ri.withRelativePartsResolved(g);if(c===
g)return this;c.startsWith("/")&&(c=c.slice(1));c[1]===":".startsWith("/")?c=c.slice(1):":"===c[1]&&c.match(ri.windowsPathPrefixRe)&&(c=c.slice(3));return this.newResource(this.root().url+c)};Uf.prototype.relativePathFrom=function(g){return ri.relativePathBetween(g.url,this.url)};Uf.prototype.withPath=function(g){return(this.isRoot()?this:this.root()).join(g)};Uf.prototype.join=function(g){return this.newResource(this.url.replace(ri.slashEndRe,"")+"/"+g.replace(ri.slashStartRe,""))};Uf.prototype.isRoot=
function(){return"/"===this.path()};Uf.prototype.isFile=function(){return!this.isRoot()&&!this.url.match(ri.slashEndRe)};Uf.prototype.isDirectory=function(){return!this.isFile()};Uf.prototype.asDirectory=function(){return this.url.endsWith("/")?this:this.newResource(this.url.replace(ri.slashEndRe,"")+"/")};Uf.prototype.root=function(){if(this.isRoot())return this;var g=this.url.slice(0,-this.path().length);return this.newResource(g+"/")};Uf.prototype.asFile=function(){return this.url.endsWith("/")?
this.newResource(this.url.replace(ri.slashEndRe,"")):this};Uf.prototype.assignProperties=function(g){for(var c in g)if("url"!==c){var k=c;if("isLink"===c||"isDirectory"===c)k="_"+c;this[k]=g[c]}return this};Uf.prototype.ensureExistance=function(g){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:return k.yield(c.exists(),2);case 2:return k.yieldResult?k.return(c):k.yield(c.parent().ensureExistance(),3);case 3:return c.isFile()?k.yield(c.write(g||
""),5):k.yield(c.mkdir(),5);case 5:return k.return(c)}})};Uf.prototype.copyTo=function(g,c){c=void 0===c?!0:c;var k=this,f,l,p,b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){switch(h.nextAddress){case 1:if(k.isFile()){p=g.isFile()?g:g.join(k.name());if(!c){h.jumpTo(8);break}return h.yield(p.parent().ensureExistance(),8)}if(!g.isDirectory())throw Error("Cannot copy a directory to a file!");return h.yield(k.dirList("infinity"),4);case 4:return f=h.yieldResult,l=f.map(function(a){return g.join(a.relativePathFrom(k))}),
h.yield(g.ensureExistance(),5);case 5:return h.yield(f.reduceRight(function(a,e,n){return function(){return Promise.resolve(e.isDirectory()&&l[n].ensureExistance()).then(a)}},function(){return Promise.resolve()})(),6);case 6:return h.yield(f.reduceRight(function(a,e,n){return function(){return Promise.resolve(e.isFile()&&e.copyTo(l[n],!1)).then(a)}},function(){return Promise.resolve()})(),3);case 8:return b=p,d=b.write,h.yield(k.read(),11);case 11:return h.yield(d.call(b,h.yieldResult),3);case 3:return h.return(k)}})};
Uf.prototype.rename=function(g){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(c.copyTo(g),2);c.remove();return k.return(g)})};Uf.prototype.beBinary=function(g){return this.setBinary(!0)};Uf.prototype.setBinary=function(g){this.binary=g;return this};Uf.prototype.read=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){ri.nyi(g,"read");c.jumpToEnd()})};Uf.prototype.write=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){ri.nyi(g,
"write");c.jumpToEnd()})};Uf.prototype.mkdir=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){ri.nyi(g,"mkdir");c.jumpToEnd()})};Uf.prototype.exists=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){ri.nyi(g,"exists");c.jumpToEnd()})};Uf.prototype.remove=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){ri.nyi(g,"remove");c.jumpToEnd()})};Uf.prototype.dirList=function(g,c){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){ri.nyi(k,
"dirList");f.jumpToEnd()})};Uf.prototype.readProperties=function(g){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){ri.nyi(c,"readProperties");k.jumpToEnd()})};Uf.prototype.writeJson=function(g,c){return this.write((void 0===c?0:c)?JSON.stringify(g,null,2):JSON.stringify(g))};Uf.prototype.readJson=function(g){var c=this,k,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?(k=JSON,f=k.parse,l.yield(c.read(),2)):l.return(f.call(k,l.yieldResult))})};
Uf.prototype.__serialize__=function(){return{__expr__:'var r = null; try { r = resource("'+this.url+'");} catch (err) {}; r',bindings:{"lively.resources":["resource"]}}};$jscomp.global.Object.defineProperties(Uf.prototype,{isResource:{configurable:!0,enumerable:!0,get:function(){return!0}},canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!1}}});ri.Resource=Uf;ri.default=Uf;var oy=lively.FreezerRuntime.recorderFor("lively.lang/closure.js");oy.evalJS=Gj;oy.parameterRegex=/function[^\(]*\(([^\)]*)\)|\(?([^\)=]*)\)?\s*=>/;
var Gi=function(g,c,k,f){this.originalFunc=g;this.varMapping=c||{};this.setFuncSource(k||g);this.setFuncProperties(g||f)};Gi.fromFunction=function(g,c){return new this(g,c||{})};Gi.fromSource=function(g,c){return new this(null,c||{},g)};Gi.prototype.setFuncSource=function(g){return this.source=g="undefined"!==typeof lively&&lively.sourceTransform&&"function"===typeof lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder?lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder(g):
String(g)};Gi.prototype.getFuncSource=function(){return this.source||this.setFuncSource(this.originalFunc)};Gi.prototype.hasFuncSource=function(){return this.source&&!0};Gi.prototype.getFunc=function(){return this.originalFunc||this.recreateFunc()};Gi.prototype.getFuncProperties=function(){return this.funcProperties||(this.funcProperties={})};Gi.prototype.setFuncProperties=function(g){var c=this.getFuncProperties(),k;for(k in g)g.hasOwnProperty(k)&&(c[k]=g[k])};Gi.prototype.lookup=function(g){return this.varMapping[g]};
Gi.prototype.parameterNames=function(g){return"undefined"!==typeof lively&&lively.ast&&lively.ast.parseFunction?(lively.ast.parseFunction(g).params||[]).map(function(c){return"Identifier"===c.type?c.name:c.left&&"Identifier"===c.left.type?c.left.name:null}).filter(Boolean):(g=oy.parameterRegex.exec(g))?(g[1]||g[2]||"").split(",").map(function(c){return c.trim()}):[]};Gi.prototype.firstParameter=function(g){return this.parameterNames(g)[0]||null};Gi.prototype.recreateFunc=function(){return this.recreateFuncFromSource(this.getFuncSource(),
this.originalFunc)};Gi.prototype.recreateFuncFromSource=function(g,c){c=[];var k="$super"===this.firstParameter(g);for(f in this.varMapping)this.varMapping.hasOwnProperty(f)&&"this"!=f&&c.push("var "+f+" = this.varMapping."+f+";\n");var f="";0<c.length&&(f+=c.join("\n"));k&&(f+="(function superWrapperForClosure() { return ");f+="("+g+")";k&&(f+=".apply(this, [$super.bind(this)].concat(Array.from(arguments))) })");try{var l=oy.evalJS.call(this,f)||this.couldNotCreateFunc(f);this.addFuncProperties(l);
return this.originalFunc=l}catch(p){throw g="Cannot create function "+p+" src: "+f,console.error(g),Error(g);}};Gi.prototype.addFuncProperties=function(g){var c=this.getFuncProperties(),k;for(k in c)c.hasOwnProperty(k)&&(g[k]=c[k]);this.addClosureInformation(g)};Gi.prototype.couldNotCreateFunc=function(g){var c="Could not recreate closure from source: \n"+g;console.error(c);return function(){throw Error(c);}};Gi.prototype.asFunction=function(){return this.recreateFunc()};Gi.prototype.addClosureInformation=
function(g){g.hasLivelyClosure=!0;g.livelyClosure=this;return g};$jscomp.global.Object.defineProperties(Gi.prototype,{isLivelyClosure:{configurable:!0,enumerable:!0,get:function(){return!0}},doNotSerialize:{configurable:!0,enumerable:!0,get:function(){return["originalFunc"]}}});Ka("X",Gi);oy.Closure=Gi;oy.default=Gi;var Ws=lively.FreezerRuntime.recorderFor("lively.lang/Group.js");Ws.groupBy=Ee;var Kl=function(){};Kl.fromArray=function(g,c,k){for(var f=new Ws.Group,l=0,p=g.length;l<p;l++){var b=c.call(k,
g[l],l);Ws.Group.prototype.hasOwnProperty(b)&&(b="_"+b);f[b]||(f[b]=[]);f[b].push(g[l])}return f};Kl.prototype.toArray=function(){return this.reduceGroups(function(g,c,k){return g.concat([k])},[])};Kl.prototype.forEach=function(g,c){var k=this;Object.keys(k).forEach(function(f){k[f].forEach(g.bind(c,f))});return k};Kl.prototype.forEachGroup=function(g,c){var k=this;Object.keys(k).forEach(function(f){g.call(c,f,k[f])});return k};Kl.prototype.map=function(g,c){var k=new Ws.Group;this.forEachGroup(function(f,
l){k[f]=l.map(g.bind(c,f))});return k};Kl.prototype.mapGroups=function(g,c){var k=new Ws.Group;this.forEachGroup(function(f,l){k[f]=g.call(c,f,l)});return k};Kl.prototype.keys=function(){return Object.keys(this)};Kl.prototype.reduceGroups=function(g,c,k){this.forEachGroup(function(f,l){c=g.call(k,c,f,l)});return c};Kl.prototype.count=function(){return this.reduceGroups(function(g,c,k){g[c]=k.length;return g},{})};$jscomp.global.Object.defineProperties(Kl,{by:{configurable:!0,enumerable:!0,get:function(){return Ws.groupBy}}});
Ws.Group=Kl;Ws.default=Kl;var Rb=lively.FreezerRuntime.recorderFor("lively.lang/array.js");Rb.range=Mc;Rb.withN=Kd;Rb.genN=Jb;Rb.filter=Dc;Rb.binarySearchFor=nd;Rb.findAndGet=Hc;Rb.filterByKey=wd;Rb.grep=Qd;Rb.mask=Eb;Rb.reject=ic;Rb.rejectByKey=jd;Rb.without=jc;Rb.withoutAll=kd;Rb.uniq=vb;Rb.uniqBy=db;Rb.uniqByKey=ec;Rb.compact=Mb;Rb.mutableCompact=Hb;Rb.forEach=pc;Rb.zip=Ma;Rb.flatten=Ib;Rb.flatmap=pb;Rb.interpose=Ub;Rb.delimWith=dc;Rb.map=vc;Rb.invoke=gd;Rb.pluck=Nb;Rb.reduce=Fb;Rb.reduceRight=
sb;Rb.some=Ea;Rb.every=ua;Rb.equals=V;Rb.deepEquals=ra;Rb.isSorted=ja;Rb.sort=Ca;Rb.sortBy=va;Rb.sortByKey=cb;Rb.reverse=hc;Rb.reversed=gb;Rb.reMatches=Oc;Rb.first=Cb;Rb.last=Gd;Rb.intersect=Ec;Rb.union=oc;Rb.pushAt=rb;Rb.removeAt=Md;Rb.remove=yb;Rb.pushAll=qb;Rb.pushAllAt=Ia;Rb.pushIfNotIncluded=Q;Rb.replaceAt=za;Rb.clear=Ta;Rb.isSubset=xb;Rb.doAndContinue=Yb;Rb.nestedDelay=Ac;Rb.forEachShowingProgress=mc;Rb.swap=qd;Rb.rotate=zd;Rb.groupBy=Ee;Rb.groupByKey=se;Rb.partition=ke;Rb.batchify=w;Rb.toTuples=
we;Rb.combinationsPick=ue;Rb.combinations=Od;Rb.take=He;Rb.drop=Te;Rb.takeWhile=Ue;Rb.dropWhile=ff;Rb.shuffle=gf;Rb.max=Wb;Rb.min=Kh;Rb.sum=ef;Rb.count=Fd;Rb.size=$d;Rb.histogram=Fa;Rb.clone=Wa;Rb.toArray=Gb;Rb.each=pa;Rb.all=xa;Rb.any=Ha;Rb.collect=S;Rb.findAll=ob;Rb.inject=fa;Rb.mapAsyncSeries=Ba;Rb.mapAsync=Na;Rb.objectEquals=Am;Rb.delay=wf;Rb.once=mf;Rb.NullFunction=lc;Rb.Group=Kl;Rb.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;Rb.features={from:!!Array.from,
filter:!!Array.prototype.filter,find:!!Array.prototype.find,findIndex:!!Array.prototype.findIndex,includes:!!Array.prototype.includes};Rb.from=Rb.features.from?Array.from:function(g){if(!g)return[];if(Array.isArray(g))return g;if(g.toArray)return g.toArray();for(var c=g.length,k=Array(c);c--;)k[c]=g[c];return k};Rb.detect=Rb.features.find?function(g,c,k){return g.find(c,k)}:function(g,c,k){for(var f,l=0,p=g.length;l<p;l++)if(f=g[l],c.call(k,f,l))return f};Rb.findIndex=Rb.features.findIndex?function(g,
c,k){return g.findIndex(c,k)}:function(g,c,k){var f=-1;return g.find(function(l,p){f=p;return c.call(l,k)})?f:-1};Rb.isArray=Array.isArray;Rb.includes=Rb.features.includes?function(g,c){return g.includes(c)}:function(g,c){return-1!==g.indexOf(c)};Rb.include=Rb.includes;Rb.permutations=function(){function g(c,k){return c.length?Rb.flatmap(c,function(f,l){return g(c.slice(0,l).concat(c.slice(l+1)),k.concat([f]))}):[k]}return function(c){return g(c,[])}}();Rb.features.from||(Array.from=Rb.from);Rb.features.filter||
(Array.prototype.filter=function(g,c){return Rb.filter(this,g,c)});Rb.features.find||(Array.prototype.find=function(g,c){return Rb.detect(this,g,c)});Rb.features.findIndex||(Array.prototype.findIndex=function(g,c){return Rb.findIndex(this,g,c)});Rb.features.includes||(Array.prototype.includes=function(g){return Rb.includes(this,g)});var AR=Rb.from,BR=Rb.detect,CR=Rb.findIndex,DR=Rb.isArray,ER=Rb.includes,FR=Rb.include,GR=Rb.permutations;Rb.range=Mc;Rb.range=Mc;Rb.from=AR;Rb.from=AR;Rb.withN=Kd;Rb.withN=
Kd;Rb.genN=Jb;Rb.genN=Jb;Rb.filter=Dc;Rb.filter=Dc;Rb.detect=BR;Rb.detect=BR;Rb.binarySearchFor=nd;Rb.binarySearchFor=nd;Rb.findIndex=CR;Rb.findIndex=CR;Rb.findAndGet=Hc;Rb.findAndGet=Hc;Rb.filterByKey=wd;Rb.filterByKey=wd;Rb.grep=Qd;Rb.grep=Qd;Rb.mask=Eb;Rb.mask=Eb;Rb.reject=ic;Rb.reject=ic;Rb.rejectByKey=jd;Rb.rejectByKey=jd;Rb.without=jc;Rb.without=jc;Rb.withoutAll=kd;Rb.withoutAll=kd;Rb.uniq=vb;Rb.uniq=vb;Rb.uniqBy=db;Rb.uniqBy=db;Rb.uniqByKey=ec;Rb.uniqByKey=ec;Rb.compact=Mb;Rb.compact=Mb;Rb.mutableCompact=
Hb;Rb.mutableCompact=Hb;Rb.forEach=pc;Rb.forEach=pc;Rb.zip=Ma;Rb.zip=Ma;Rb.flatten=Ib;Rb.flatten=Ib;Rb.flatmap=pb;Rb.flatmap=pb;Rb.interpose=Ub;Rb.interpose=Ub;Rb.delimWith=dc;Rb.delimWith=dc;Rb.map=vc;Rb.map=vc;Rb.invoke=gd;Rb.invoke=gd;Rb.pluck=Nb;Rb.pluck=Nb;Rb.reduce=Fb;Rb.reduce=Fb;Rb.reduceRight=sb;Rb.reduceRight=sb;Rb.isArray=DR;Rb.isArray=DR;Rb.includes=ER;Rb.includes=ER;Rb.include=FR;Rb.include=FR;Rb.some=Ea;Rb.some=Ea;Rb.every=ua;Rb.every=ua;Rb.equals=V;Rb.equals=V;Rb.deepEquals=ra;Rb.deepEquals=
ra;Rb.isSorted=ja;Rb.isSorted=ja;Rb.sort=Ca;Rb.sort=Ca;Rb.sortBy=va;Rb.sortBy=va;Rb.sortByKey=cb;Rb.sortByKey=cb;Rb.reverse=hc;Rb.reverse=hc;Rb.reversed=gb;Rb.reversed=gb;Rb.reMatches=Oc;Rb.reMatches=Oc;Rb.first=Cb;Rb.first=Cb;Rb.last=Gd;Rb.last=Gd;Rb.intersect=Ec;Rb.intersect=Ec;Rb.union=oc;Rb.union=oc;Rb.pushAt=rb;Rb.pushAt=rb;Rb.removeAt=Md;Rb.removeAt=Md;Rb.remove=yb;Rb.remove=yb;Rb.pushAll=qb;Rb.pushAll=qb;Rb.pushAllAt=Ia;Rb.pushAllAt=Ia;Rb.pushIfNotIncluded=Q;Rb.pushIfNotIncluded=Q;Rb.replaceAt=
za;Rb.replaceAt=za;Rb.clear=Ta;Rb.clear=Ta;Rb.isSubset=xb;Rb.isSubset=xb;Rb.doAndContinue=Yb;Rb.doAndContinue=Yb;Rb.nestedDelay=Ac;Rb.nestedDelay=Ac;Rb.forEachShowingProgress=mc;Rb.forEachShowingProgress=mc;Rb.swap=qd;Rb.swap=qd;Rb.rotate=zd;Rb.rotate=zd;Rb.groupBy=Ee;Rb.groupBy=Ee;Rb.groupByKey=se;Rb.groupByKey=se;Rb.partition=ke;Rb.partition=ke;Rb.batchify=w;Rb.batchify=w;Rb.toTuples=we;Rb.toTuples=we;Rb.permutations=GR;Rb.permutations=GR;Rb.combinationsPick=ue;Rb.combinationsPick=ue;Rb.combinations=
Od;Rb.combinations=Od;Rb.take=He;Rb.take=He;Rb.drop=Te;Rb.drop=Te;Rb.takeWhile=Ue;Rb.takeWhile=Ue;Rb.dropWhile=ff;Rb.dropWhile=ff;Rb.shuffle=gf;Rb.shuffle=gf;Rb.max=Wb;Rb.max=Wb;Rb.min=Kh;Rb.min=Kh;Rb.sum=ef;Rb.sum=ef;Rb.count=Fd;Rb.count=Fd;Rb.size=$d;Rb.size=$d;Rb.histogram=Fa;Rb.histogram=Fa;Rb.clone=Wa;Rb.clone=Wa;Rb.toArray=Gb;Rb.toArray=Gb;Rb.each=pa;Rb.each=pa;Rb.all=xa;Rb.all=xa;Rb.any=Ha;Rb.any=Ha;Rb.collect=S;Rb.collect=S;Rb.findAll=ob;Rb.findAll=ob;Rb.inject=fa;Rb.inject=fa;Rb.mapAsyncSeries=
Ba;Rb.mapAsyncSeries=Ba;Rb.mapAsync=Na;Rb.mapAsync=Na;var cf=Object.freeze({__proto__:null,range:Mc,from:AR,withN:Kd,genN:Jb,filter:Dc,detect:BR,binarySearchFor:nd,findIndex:CR,findAndGet:Hc,filterByKey:wd,grep:Qd,mask:Eb,reject:ic,rejectByKey:jd,without:jc,withoutAll:kd,uniq:vb,uniqBy:db,uniqByKey:ec,compact:Mb,mutableCompact:Hb,forEach:pc,zip:Ma,flatten:Ib,flatmap:pb,interpose:Ub,delimWith:dc,map:vc,invoke:gd,pluck:Nb,reduce:Fb,reduceRight:sb,isArray:DR,includes:ER,include:FR,some:Ea,every:ua,equals:V,
deepEquals:ra,isSorted:ja,sort:Ca,sortBy:va,sortByKey:cb,reverse:hc,reversed:gb,reMatches:Oc,first:Cb,last:Gd,intersect:Ec,union:oc,pushAt:rb,removeAt:Md,remove:yb,pushAll:qb,pushAllAt:Ia,pushIfNotIncluded:Q,replaceAt:za,clear:Ta,isSubset:xb,doAndContinue:Yb,nestedDelay:Ac,forEachShowingProgress:mc,swap:qd,rotate:zd,groupBy:Ee,groupByKey:se,partition:ke,batchify:w,toTuples:we,permutations:GR,combinationsPick:ue,combinations:Od,take:He,drop:Te,takeWhile:Ue,dropWhile:ff,shuffle:gf,max:Wb,min:Kh,sum:ef,
count:Fd,size:$d,histogram:Fa,clone:Wa,toArray:Gb,each:pa,all:xa,any:Ha,collect:S,findAll:ob,inject:fa,mapAsyncSeries:Ba,mapAsync:Na});Ka("a",cf);var dd=lively.FreezerRuntime.recorderFor("lively.lang/function.js");dd.Empty=tb;dd.K=Sb;dd.Null=lc;dd.False=uc;dd.True=rc;dd.notYetImplemented=$c;dd.all=Jd;dd.own=je;dd.argumentNames=td;dd.qualifiedMethodName=qe;dd.extractBody=Wd;dd.timeToRun=Ud;dd.timeToRunN=Re;dd.delay=wf;dd.throttle=Bf;dd.debounce=Wf;dd.throttleNamed=Gf;dd.debounceNamed=Mf;dd.createQueue=
ph;dd.workerWithCallbackQueue=uh;dd._composeAsyncDefaultEndCallback=function(g,c){g&&console.error("lively.lang.composeAsync error",g)};dd.composeAsync=Oe;dd.compose=Ch;dd.flip=Nf;dd.withNull=Xf;dd.waitFor=Qg;dd.waitForAll=xe;dd.curry=Jh;dd.wrap=Vb;dd.getOriginal=Pc;dd.wrapperChain=ud;dd.replaceMethodForOneCall=Ld;dd.once=mf;dd.either=pf;dd.eitherNamed=rg;dd.evalJS=Gj;dd.fromString=qj;dd.asScript=rj;dd.asScriptOf=zl;dd.addToObject=Rj;dd.binds=Al;dd.setLocalVarValue=bl;dd.getVarMapping=Bl;dd.setProperty=
Sj;dd.functionNames=ci;dd.localFunctionNames=nk;dd.logErrors=vf;dd.logCompletion=Bi;dd.logCalls=Hj;dd.traceCalls=Cl;dd.webkitStack=Gk;dd.objectMerge=z;dd.safeToString=Ja;dd.Closure=Gi;dd.arr=cf;dd._throttledByName={};dd._debouncedByName={};dd._queues={};dd._queueUntilCallbacks={};dd._eitherNameRegistry={};dd.Empty=tb;dd.Empty=tb;dd.K=Sb;dd.K=Sb;dd.Null=lc;dd.Null=lc;dd.False=uc;dd.False=uc;dd.True=rc;dd.True=rc;dd.notYetImplemented=$c;dd.notYetImplemented=$c;dd.withNull=Xf;dd.withNull=Xf;dd.all=Jd;
dd.all=Jd;dd.own=je;dd.own=je;dd.argumentNames=td;dd.argumentNames=td;dd.qualifiedMethodName=qe;dd.qualifiedMethodName=qe;dd.extractBody=Wd;dd.extractBody=Wd;dd.timeToRun=Ud;dd.timeToRun=Ud;dd.timeToRunN=Re;dd.timeToRunN=Re;dd.delay=wf;dd.delay=wf;dd.throttle=Bf;dd.throttle=Bf;dd.debounce=Wf;dd.debounce=Wf;dd.throttleNamed=Gf;dd.throttleNamed=Gf;dd.debounceNamed=Mf;dd.debounceNamed=Mf;dd.createQueue=ph;dd.createQueue=ph;dd.workerWithCallbackQueue=uh;dd.workerWithCallbackQueue=uh;dd.composeAsync=Oe;
dd.composeAsync=Oe;dd.compose=Ch;dd.compose=Ch;dd.waitFor=Qg;dd.waitFor=Qg;dd.waitForAll=xe;dd.waitForAll=xe;dd.flip=Nf;dd.flip=Nf;dd.curry=Jh;dd.curry=Jh;dd.wrap=Vb;dd.wrap=Vb;dd.binds=Al;dd.binds=Al;dd.getOriginal=Pc;dd.getOriginal=Pc;dd.wrapperChain=ud;dd.wrapperChain=ud;dd.replaceMethodForOneCall=Ld;dd.replaceMethodForOneCall=Ld;dd.once=mf;dd.once=mf;dd.either=pf;dd.either=pf;dd.eitherNamed=rg;dd.eitherNamed=rg;dd.evalJS=Gj;dd.evalJS=Gj;dd.fromString=qj;dd.fromString=qj;dd.asScript=rj;dd.asScript=
rj;dd.asScriptOf=zl;dd.asScriptOf=zl;dd.addToObject=Rj;dd.addToObject=Rj;dd.setLocalVarValue=bl;dd.setLocalVarValue=bl;dd.getVarMapping=Bl;dd.getVarMapping=Bl;dd.setProperty=Sj;dd.setProperty=Sj;dd.functionNames=ci;dd.functionNames=ci;dd.localFunctionNames=nk;dd.localFunctionNames=nk;dd.logErrors=vf;dd.logErrors=vf;dd.logCompletion=Bi;dd.logCompletion=Bi;dd.logCalls=Hj;dd.logCalls=Hj;dd.traceCalls=Cl;dd.traceCalls=Cl;dd.webkitStack=Gk;dd.webkitStack=Gk;var ik=Object.freeze({__proto__:null,Empty:tb,
K:Sb,Null:lc,False:uc,True:rc,notYetImplemented:$c,withNull:Xf,all:Jd,own:je,argumentNames:td,qualifiedMethodName:qe,extractBody:Wd,timeToRun:Ud,timeToRunN:Re,delay:wf,throttle:Bf,debounce:Wf,throttleNamed:Gf,debounceNamed:Mf,createQueue:ph,workerWithCallbackQueue:uh,composeAsync:Oe,compose:Ch,waitFor:Qg,waitForAll:xe,flip:Nf,curry:Jh,wrap:Vb,binds:Al,getOriginal:Pc,wrapperChain:ud,replaceMethodForOneCall:Ld,once:mf,either:pf,eitherNamed:rg,evalJS:Gj,fromString:qj,asScript:rj,asScriptOf:zl,addToObject:Rj,
setLocalVarValue:bl,getVarMapping:Bl,setProperty:Sj,functionNames:ci,localFunctionNames:nk,logErrors:vf,logCompletion:Bi,logCalls:Hj,traceCalls:Cl,webkitStack:Gk});Ka("f",ik);var Rd=lively.FreezerRuntime.recorderFor("lively.lang/object.js");Rd.print=ok;Rd.indent=function(g,c,k){if(!k||0>=k)return g;for(;0<k;)k--,g=c+g;return g};Rd.isArray=pk;Rd.isElement=Co;Rd.isFunction=em;Rd.isBoolean=zm;Rd.isString=$f;Rd.isNumber=sj;Rd.isUndefined=Ql;Rd.isRegExp=ym;Rd.isObject=Bn;Rd.isPrimitive=Rl;Rd.isEmpty=fm;
Rd.equals=Am;Rd.values=Do;Rd.select=Eo;Rd.dissoc=fc;Rd.addScript=Lh;Rd.extend=oa;Rd.clone=x;Rd.extract=C;Rd.inspect=G;Rd.merge=z;Rd.deepMerge=J;Rd.sortKeysWithBeforeAndAfterConstraints=M;Rd.inherit=O;Rd.valuesInPropertyHierarchy=ca;Rd.mergePropertyInHierarchy=qa;Rd.deepCopy=R;Rd.typeStringOf=ba;Rd.shortPrintStringOf=la;Rd.isMutableType=ka;Rd.safeToString=Ja;Rd.asObject=Ra;Rd.newKeyIn=ab;Rd.functionFromString=qj;Rd.asScriptOf=zl;Rd.argumentNames=td;Rd.arrayDeepEquals=ra;Rd.isSubset=xb;Rd.flatten=Ib;
Rd.getOwnPropertyDescriptors="function"===typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:function(g){var c={},k;for(k in g)Object.prototype.hasOwnProperty.call(g,k)&&Object.defineProperty(c,k,{configurable:!0,enumerable:!0,writable:!0,value:Object.getOwnPropertyDescriptor(g,k)});return c};Rd.keys=Object.keys;var HR=Rd.keys,IR=Rd.getOwnPropertyDescriptors;Rd.isArray=pk;Rd.isArray=pk;Rd.isElement=Co;Rd.isElement=Co;Rd.isFunction=em;Rd.isFunction=em;Rd.isBoolean=zm;Rd.isBoolean=
zm;Rd.isString=$f;Rd.isString=$f;Rd.isNumber=sj;Rd.isNumber=sj;Rd.isUndefined=Ql;Rd.isUndefined=Ql;Rd.isRegExp=ym;Rd.isRegExp=ym;Rd.isObject=Bn;Rd.isObject=Bn;Rd.isPrimitive=Rl;Rd.isPrimitive=Rl;Rd.isEmpty=fm;Rd.isEmpty=fm;Rd.equals=Am;Rd.equals=Am;Rd.keys=HR;Rd.keys=HR;Rd.values=Do;Rd.values=Do;Rd.select=Eo;Rd.select=Eo;Rd.dissoc=fc;Rd.dissoc=fc;Rd.addScript=Lh;Rd.addScript=Lh;Rd.extend=oa;Rd.extend=oa;Rd.clone=x;Rd.clone=x;Rd.extract=C;Rd.extract=C;Rd.inspect=G;Rd.inspect=G;Rd.merge=z;Rd.merge=
z;Rd.deepMerge=J;Rd.deepMerge=J;Rd.inherit=O;Rd.inherit=O;Rd.valuesInPropertyHierarchy=ca;Rd.valuesInPropertyHierarchy=ca;Rd.mergePropertyInHierarchy=qa;Rd.mergePropertyInHierarchy=qa;Rd.sortKeysWithBeforeAndAfterConstraints=M;Rd.sortKeysWithBeforeAndAfterConstraints=M;Rd.deepCopy=R;Rd.deepCopy=R;Rd.typeStringOf=ba;Rd.typeStringOf=ba;Rd.shortPrintStringOf=la;Rd.shortPrintStringOf=la;Rd.isMutableType=ka;Rd.isMutableType=ka;Rd.safeToString=Ja;Rd.safeToString=Ja;Rd.asObject=Ra;Rd.asObject=Ra;Rd.newKeyIn=
ab;Rd.newKeyIn=ab;Rd.getOwnPropertyDescriptors=IR;Rd.getOwnPropertyDescriptors=IR;var xf=Object.freeze({__proto__:null,isArray:pk,isElement:Co,isFunction:em,isBoolean:zm,isString:$f,isNumber:sj,isUndefined:Ql,isRegExp:ym,isObject:Bn,isPrimitive:Rl,isEmpty:fm,equals:Am,keys:HR,values:Do,select:Eo,dissoc:fc,addScript:Lh,extend:oa,clone:x,extract:C,inspect:G,merge:z,deepMerge:J,inherit:O,valuesInPropertyHierarchy:ca,mergePropertyInHierarchy:qa,sortKeysWithBeforeAndAfterConstraints:M,deepCopy:R,typeStringOf:ba,
shortPrintStringOf:la,isMutableType:ka,safeToString:Ja,asObject:Ra,newKeyIn:ab,getOwnPropertyDescriptors:IR});Ka("Y",xf);var JR={};(function(){var g=[].slice;var c={0:{8:{_:"an"},9:{_:"an"},"-":{1:{1:{_:"an"}},4:{" ":{_:"a"},_:"an"},6:{"-":{_:"an"}},8:{_:"an"}}},1:{1:{0:{_:"a"},1:{_:"a"},2:{_:"a"},3:{_:"a"},4:{_:"a"},5:{_:"a"},6:{_:"a"},7:{_:"a"},8:{_:"a"},9:{_:"a"},_:"an",".":{4:{_:"a"}}},8:{0:{0:{_:"an"},1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},7:{_:"an"},8:{_:"an"},9:{_:"an"},
_:"a"},1:{"-":{_:"a"}," ":{_:"a"}},2:{"-":{_:"a"}," ":{_:"a"}},3:{"-":{_:"a"}," ":{_:"a"}},4:{"-":{_:"a"}," ":{_:"a"}},5:{"-":{_:"a"}," ":{_:"a"}},6:{"-":{_:"a"}," ":{_:"a"}},7:{"-":{_:"a"}," ":{_:"a"}},8:{"-":{_:"a"}," ":{_:"a"}},9:{"-":{_:"a"}," ":{_:"a"}},_:"an"}},8:{0:{0:{x:{_:"a"}}},9:{0:{_:"a"}},_:"an",",":{1:{_:"a"}}},"`":{a:{_:"an"}},"\u00a3":{8:{_:"an"}},"\u221e":{_:"an"},a:{" ":{_:"a"},b:{o:{u:{t:{"-":{_:"an"}},_:"a"}}},g:{a:{i:{_:"a"}}},l:{"-":{I:{_:"a"}},g:{u:{_:"a"}},t:{h:{_:"a"}}},m:{o:{n:{_:"a"}}},
n:{" ":{_:"a"},d:{a:{_:"an"},e:{_:"an"},r:{_:"an"},_:"a"},o:{t:{_:"a"}},y:{w:{_:"a"}}},p:{r:{e:{_:"a"}}},r:{e:{" ":{_:"a"},":":{_:"a"}},t:{"\u00ed":{_:"a"}}},_:"an"},A:{$:{_:"a"},A:{A:{_:"a"}},n:{d:{a:{l:{u:{c:{_:"a"}}}}}},r:{m:{a:{t:{_:"a"}}}},s:{t:{u:{r:{i:{a:{s:{_:"a"}}}}}}},t:{h:{l:{e:{t:{i:{_:"an"}}},o:{_:"an"},_:"a"}}},U:{$:{_:"a"},D:{_:"a"},S:{C:{_:"a"}}},_:"an"},"\u00c1":{_:"an"},"\u00e1":{";":{_:"an"}},"\u00e0":{_:"an"},"\u00c4":{_:"an"},"\u0101":{_:"an"},"\u00c5":{_:"an"},"\u00e6":{_:"an"},
"\u00c6":{n:{_:"a"},_:"an"},D:{"\u00fa":{n:{_:"a"}}},e:{".":{g:{_:"a"}},a:{c:{h:{" ":{_:"a"}}}},i:{t:{h:{e:{r:{" ":{_:"a"},".":{_:"a"}}}}}},l:{"-":{_:"a"},l:{a:{_:"a"}}},m:{p:{e:{z:{_:"a"}}}},n:{o:{u:{g:{_:"a"}}}},u:{p:{" ":{_:"an"}},_:"a"},w:{_:"a"},x:{i:{s:{t:{s:{_:"a"}}}}},_:"an"},E:{m:{p:{e:{z:{_:"a"}}}},n:{a:{m:{_:"a"}}},s:{p:{a:{d:{_:"an"}},e:{_:"an"},o:{_:"an"},_:"a"}},u:{l:{_:"an"},_:"a"},U:{R:{_:"a"}},_:"an"},"\u00e9":{g:{_:"a"},t:{a:{_:"an"},u:{_:"an"},_:"a"},_:"an"},"\u00c9":{_:"an"},f:{"-":{_:"an"},
" ":{_:"an"},"/":{_:"an"},M:{_:"an"},p:{_:"an"},t:{_:"an"}},F:{0:{_:"an"},1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},9:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"#":{_:"an"},",":{_:"an"},".":{_:"an"},"/":{_:"an"},"\u201d":{_:"an"},A:{C:{_:"a"},D:{_:"a"},I:{R:{_:"a"}},L:{_:"a"},M:{_:"a"},N:{_:"a"},P:{_:"a"},Q:{_:"a"},R:{_:"a"},S:{_:"a"},T:{_:"a"},_:"an"},B:{_:"an"},C:{_:"an"},c:{_:"an"},D:{_:"an"},E:{C:{_:"an"},I:{_:"an"}},F:{" ":{_:"a"},_:"an"},f:{_:"an"},
h:{_:"an"},H:{_:"an"},I:{A:{T:{_:"a"},_:"an"},D:{" ":{_:"an"}},R:{" ":{_:"an"}},S:{" ":{_:"an"}}},K:{_:"an"},L:{C:{_:"an"},N:{_:"an"},P:{_:"an"}},M:{R:{_:"a"},_:"an"},O:{" ":{_:"an"},I:{" ":{_:"an"}}},P:{".":{_:"a"},"?":{_:"a"},C:{"?":{_:"a"}},_:"an"},R:{C:{_:"an"},S:{_:"an"}},S:{_:"an"},T:{S:{_:"a"},T:{_:"a"},_:"an"},U:{" ":{_:"an"},",":{_:"an"},".":{_:"an"}},V:{_:"an"},W:{D:{_:"a"},_:"an"},X:{_:"an"},Y:{_:"an"},"\u03c3":{_:"an"}},G:{h:{a:{e:{_:"an"},i:{_:"an"}}}},h:{"'":{_:"an"},"-":{U:{_:"a"},
_:"an"}," ":{_:"an"},'"':{_:"an"},",":{_:"an"},C:{_:"an"},e:{i:{r:{a:{_:"a"},_:"an"}}},i:{m:{s:{_:"an"}},s:{t:{o:{r:{i:{c:{_:"a"}}}}}}},o:{m:{a:{_:"an"},m:{_:"an"}},n:{e:{y:{_:"a"}},k:{_:"a"},v:{_:"a"},_:"an"},r:{s:{" ":{_:"an"}}},u:{r:{_:"an"}}},t:{t:{p:{" ":{_:"an"}},_:"a"},_:"an"}},H:{1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{A:{_:"a"},_:"an"},"+":{_:"an"},a:{b:{i:{l:{i:{t:{a:{t:{i:{o:{n:{s:{_:"an"}}}}}}}}}}}},
B:{_:"an"},C:{_:"an"},D:{B:{_:"a"},_:"an"},e:{i:{r:{_:"an"}}},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{D:{_:"a"},G:{_:"a"},M:{_:"a"},P:{_:"a"},_:"an"},L:{A:{"-":{D:{_:"a"}}},_:"an"},M:{_:"an"},N:{_:"an"},o:{n:{d:{_:"a"},e:{s:{_:"an"},_:"a"},g:{_:"a"},k:{_:"a"},o:{l:{_:"a"}},_:"an"},u:{r:{_:"an"}}},O:{" ":{_:"an"},V:{_:"an"}},P:{_:"an"},Q:{_:"an"},R:{T:{_:"a"},_:"an"},S:{" ":{_:"a"},R:{_:"a"},T:{_:"a"},_:"an"},T:{P:{_:"a"},_:"an"},V:{_:"an"},W:{T:{_:"an"}}},i:{".":{e:{_:"a"}},b:{n:{_:"a"}},f:{" ":{_:"a"}},
i:{_:"a"},n:{c:{l:{u:{d:{i:{_:"a"}}}}},d:{i:{c:{a:{t:{e:{s:{_:"a"}}}}}}},s:{t:{e:{a:{d:{"?":{_:"an"}},_:"a"}}}}},s:{" ":{_:"a"},".":{_:"a"}},t:{" ":{_:"a"}},u:{_:"a"},_:"an"},I:{"-":{A:{_:"a"},I:{_:"a"}},I:{I:{_:"a"}},l:{b:{_:"a"}},M:{H:{_:"a"}},m:{a:{m:{s:{_:"a"}}}},R:{"\u00a3":{_:"a"}},s:{l:{a:{m:{" ":{_:"a"},",":{_:"a"},".":{_:"a"}},n:{d:{s:{_:"a"}}}}}},_:"an"},"\u0130":{_:"an"},J:{i:{a:{n:{_:"a"},_:"an"}}},k:{u:{" ":{_:"an"}}},l:{" ":{_:"an"},'"':{_:"an"},p:{_:"an"}},L:{1:{_:"an"},2:{_:"an"},
3:{_:"an"},5:{_:"an"},"'":{A:{_:"a"},_:"an"},"-":{a:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{_:"an"},"/":{_:"an"},a:{e:{_:"an"},o:{i:{g:{_:"an"}}}},A:{" ":{_:"an"},L:{_:"an"},P:{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{A:{_:"a"},E:{_:"a"},G:{_:"a"},O:{_:"a"},P:{_:"a"},T:{_:"a"},_:"an"},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{R:{_:"an"}},L:{_:"an"},M:{X:{_:"a"},_:"an"},N:{_:"an"},o:{c:{h:{a:{_:"an"}}}},O:{E:{_:"an"}},P:{_:"an"},R:{_:"an"},S:{_:"an"},T:{_:"an"},U:{" ":{_:"an"}},
V:{_:"an"},X:{_:"an"},Z:{_:"an"}},m:{"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},a:{k:{e:{s:{" ":{_:"an"}}}}},b:{_:"an"},e:{i:{n:{_:"an"}},n:{t:{i:{o:{n:{s:{_:"an"}}}}}}},f:{_:"an"},p:{_:"an"},R:{_:"an"},t:{_:"an"}},M:{1:{9:{0:{_:"an"},_:"a"},_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},7:{_:"an"},8:{_:"an"},9:{_:"an"},"'":{_:"an"},"-":{t:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{A:{".":{S:{_:"a"}}},_:"an"},"/":{_:"an"},A:{C:{_:"a"},D:{_:"a"},
F:{_:"a"},G:{_:"a"},J:{_:"a"},L:{_:"a"},M:{_:"a"},N:{_:"a"},P:{_:"a"},R:{_:"a"},S:{_:"a"},T:{_:"a"},X:{_:"a"},Y:{_:"a"},_:"an"},B:{_:"an"},C:{_:"an"},D:{_:"an"},e:{"-":{_:"an"}},E:{d:{_:"an"},n:{_:"an"},P:{_:"an"}},F:{_:"an"},f:{_:"an"},G:{_:"an"},H:{_:"an"},h:{_:"an"},i:{e:{_:"an"}},I:{5:{_:"an"},6:{_:"an"}," ":{_:"an"},A:{_:"an"},T:{_:"an"}},K:{_:"an"},L:{_:"an"},M:{T:{_:"a"},_:"an"},N:{_:"an"},o:{U:{_:"an"}},O:{" ":{_:"an"},T:{" ":{_:"an"}},U:{_:"an"}},P:{_:"an"},R:{_:"an"},S:{_:"an"},s:{c:{_:"an"}},
T:{R:{_:"a"},_:"an"},U:{V:{_:"an"}},V:{_:"an"},X:{_:"an"}},N:{4:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{a:{_:"a"},S:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},",":{_:"an"},".":{Y:{_:"a"},_:"an"},"=":{_:"an"},"\u00b2":{_:"an"},a:{o:{_:"an"}},A:{" ":{_:"an"},A:{F:{_:"a"},_:"an"},I:{_:"an"},S:{L:{_:"an"}}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{A:{_:"an"},H:{_:"an"},S:{" ":{_:"an"}}},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{C:{_:"a"},L:{_:"a"},M:{H:{_:"an"},_:"a"},N:{_:"a"},S:{_:"a"},_:"an"},J:{C:{_:"an"}},K:{_:"an"},
L:{S:{_:"a"},_:"an"},M:{_:"an"},N:{R:{_:"an"},T:{_:"an"}},P:{O:{V:{"-":{_:"an"}},_:"a"},_:"an"},R:{J:{_:"a"},T:{_:"a"},_:"an"},S:{W:{_:"a"},_:"an"},T:{$:{_:"a"},_:"an"},U:{S:{_:"an"}},V:{_:"an"},v:{_:"an"},W:{A:{_:"an"}},X:{_:"an"},Y:{P:{_:"an"},U:{_:"an"}}},n:{"-":{_:"an"},"\u2212":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},"+":{_:"an"},"\u00d7":{_:"an"},d:{a:{_:"an"}},p:{a:{_:"an"}},t:{_:"an"},V:{_:"an"},W:{_:"an"}},o:{b:{r:{_:"a"}},c:{c:{u:{r:{s:{_:"a"}}}},h:{o:{_:"a"}}},f:{" ":{_:"a"}},
n:{"-":{_:"an"},"/":{_:"an"},b:{_:"an"},c:{o:{_:"an"}},d:{_:"an"},e:{r:{_:"an"}},g:{_:"an"},i:{_:"an"},l:{_:"an"},m:{_:"an"},o:{_:"an"},r:{_:"an"},s:{_:"an"},t:{_:"an"},u:{_:"an"},w:{_:"an"},y:{_:"an"},_:"a"},r:{" ":{_:"a"},",":{_:"a"}},u:{i:{_:"a"}},_:"an"},O:{b:{e:{r:{s:{t:{" ":{_:"an"},l:{_:"an"}},_:"a"}}}},l:{v:{_:"a"}},n:{e:{i:{_:"an"},_:"a"}},N:{E:{_:"a"}},o:{p:{_:"a"}},u:{i:{_:"a"}},_:"an"},"\u00d3":{_:"an"},"\u00d6":{_:"an"},"\u00f6":{_:"an"},"\u014c":{_:"an"},"\u014d":{_:"an"},P:{h:{o:{b:{_:"an"},
i:{_:"an"}}}},r:{"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},".":{_:"an"},e:{f:{e:{r:{s:{_:"an"}}}}},f:{_:"an"},m:{_:"an"},s:{_:"an"}},R:{1:{0:{_:"a"},_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{C:{_:"a"},_:"an"},"/":{_:"an"},A:{" ":{_:"an"},F:{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{" ":{_:"an"},R:{_:"an"}},F:{_:"an"},f:{_:"an"},G:{_:"an"},H:{S:{_:"an"}},I:{A:{_:"an"},C:{" ":{_:"an"}}},
J:{_:"an"},K:{_:"an"},L:{" ":{_:"a"},_:"an"},M:{1:{_:"a"},_:"an"},N:{G:{_:"a"},_:"an"},O:{T:{_:"an"}},P:{_:"an"},Q:{_:"an"},R:{_:"an"},S:{" ":{_:"a"},")":{_:"a"},",":{_:"a"},".":{_:"a"},"?":{_:"a"},T:{_:"a"},_:"an"},T:{_:"an"},U:{_:"an"},V:{_:"an"},X:{_:"an"}},s:{"-":{_:"an"},'"':{_:"an"},")":{_:"an"},",":{_:"an"},".":{_:"an"},a:{y:{s:{_:"an"}}},i:{c:{h:{_:"an"}}},p:{3:{_:"an"},r:{o:{t:{_:"an"}}}},s:{h:{_:"an"}},t:{a:{t:{e:{s:{" ":{_:"an"},":":{_:"an"}}}}}},v:{a:{_:"a"},e:{_:"a"},_:"an"}},S:{1:{_:"an"},
2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{W:{_:"a"},_:"an"},",":{_:"an"},".":{B:{_:"an"},M:{_:"an"},O:{_:"an"}},"\u201d":{_:"an"},A:{"-":{1:{_:"a"},_:"an"}," ":{_:"an"},C:{D:{_:"an"}},E:{_:"an"},S:{E:{_:"a"},_:"an"},T:{" ":{_:"an"},B:{_:"an"}}},B:{_:"an"},C:{A:{" ":{_:"an"}},C:{_:"an"},M:{_:"an"},O:{" ":{_:"an"}},R:{A:{_:"a"},_:"an"},T:{_:"an"}},D:{_:"an"},E:{" ":{_:"an"},C:{O:{_:"a"},R:{_:"a"},_:"an"},I:{_:"an"},O:{_:"an"}},F:{_:"an"},
G:{_:"an"},H:{2:{_:"an"},3:{_:"an"},"-":{_:"an"}},I:{" ":{_:"an"}},J:{_:"an"},K:{_:"an"},L:{A:{_:"a"},I:{_:"a"},O:{_:"a"},_:"an"},M:{A:{_:"a"},E:{" ":{_:"an"},_:"a"},I:{_:"a"},_:"an"},N:{A:{_:"a"},E:{_:"a"},O:{_:"a"},_:"an"},O:{"(":{_:"an"},A:{" ":{_:"an"},I:{_:"an"}},E:{_:"an"},I:{_:"an"},S:{_:"an"},V:{_:"an"}},P:{A:{C:{_:"a"},D:{_:"a"},M:{_:"a"},N:{_:"a"},R:{_:"a"}},E:{" ":{_:"an"},_:"a"},I:{C:{_:"a"}},O:{_:"a"},U:{_:"a"},_:"an"},R:{_:"an"},S:{_:"an"},T:{"-":{_:"an"},A:{" ":{_:"an"}},B:{_:"an"},
C:{_:"an"},D:{_:"an"},F:{_:"an"},L:{_:"an"},M:{_:"an"},S:{_:"an"},V:{_:"an"}},u:{r:{a:{" ":{_:"an"}}}},U:{B:{_:"a"},L:{_:"a"},N:{_:"a"},P:{_:"a"},S:{_:"a"},_:"an"},V:{_:"an"},W:{F:{_:"an"},P:{_:"an"},R:{_:"an"}},X:{S:{_:"a"},_:"an"}},t:{"-":{S:{_:"an"}},S:{_:"an"}},T:{a:{v:{e:{s:{_:"an"}}}},"\u00e0":{_:"an"}},u:{"-":{_:"a"}," ":{_:"a"},'"':{_:"a"},".":{_:"a"},b:{e:{_:"an"},_:"a"},f:{_:"a"},k:{a:{_:"an"},_:"a"},l:{u:{_:"a"}},m:{" ":{_:"a"}},n:{" ":{_:"a"},a:{" ":{_:"a"},n:{a:{_:"an"},n:{_:"an"},s:{_:"an"},
t:{_:"an"},_:"a"},r:{y:{_:"a"}}},e:{" ":{_:"a"}},i:{c:{o:{r:{p:{_:"an"}}}},d:{i:{_:"a"},_:"an"},m:{o:{_:"a"},_:"an"},n:{_:"an"},v:{o:{_:"an"}},_:"a"},l:{e:{s:{_:"a"}}}},p:{o:{_:"a"}},r:{a:{_:"a"},e:{_:"a"},i:{_:"a"},l:{_:"a"},o:{_:"a"}},s:{"-":{_:"an"}," ":{_:"an"},h:{_:"an"},_:"a"},t:{m:{_:"an"},t:{_:"an"},_:"a"},v:{_:"a"},w:{_:"a"},_:"an"},U:{1:{_:"an"},"-":{B:{o:{_:"a"},_:"an"}},a:{_:"an"},b:{i:{_:"a"},_:"an"},D:{P:{"-":{_:"an"}}},d:{_:"an"},g:{l:{_:"an"}},h:{_:"an"},i:{_:"an"},l:{i:{_:"a"},_:"an"},
m:{_:"an"},M:{N:{_:"an"}},n:{"-":{_:"an"},a:{n:{_:"a"},_:"an"},b:{_:"an"},c:{_:"an"},d:{_:"an"},e:{s:{_:"a"},_:"an"},f:{_:"an"},g:{_:"an"},h:{_:"an"},i:{d:{_:"an"},n:{_:"an"}},k:{_:"an"},l:{_:"an"},m:{_:"an"},n:{_:"an"},o:{_:"an"},p:{_:"an"},r:{_:"an"},s:{_:"an"},t:{e:{r:{s:{_:"a"}}},_:"an"},u:{_:"an"},w:{_:"an"}},p:{_:"an"},r:{a:{_:"a"},i:{_:"a"},u:{g:{u:{a:{y:{a:{n:{"-":{_:"an"}}}}}}},k:{_:"an"},_:"a"},_:"an"},s:{h:{_:"an"},t:{_:"an"}},t:{n:{_:"an"},o:{"-":{_:"an"}},r:{_:"an"},t:{_:"an"}},x:{_:"an"},
z:{_:"an"}},"\u00fc":{_:"an"},"\u00dc":{_:"an"},V:{I:{I:{_:"an"}}},x:{a:{_:"a"},e:{_:"a"},i:{_:"a"},o:{_:"a"},x:{_:"a"},y:{_:"a"},_:"an"},X:{a:{_:"a"},A:{_:"a"},e:{_:"a"},h:{_:"a"},i:{_:"a"},I:{V:{_:"a"},X:{_:"a"}},o:{_:"a"},u:{_:"a"},U:{_:"a"},V:{_:"a"},X:{" ":{_:"an"},_:"a"},y:{_:"a"},_:"an"},Y:{p:{_:"an"}},"\u03b1":{_:"an"},"\u03b5":{_:"an"},"\u03c9":{_:"an"}};var k=function(f,l,p){null==l&&(l=c);null==p&&(p="a");if(null==f)return p;var b=f.slice(0,1);l=l[b];return null!=b&&null!=l?k(f.slice(1),
l,l._||p):p};JR={find:k,articlize:function(){var f=1<=arguments.length?g.call(arguments,0):[];var l;var p=[];var b=0;for(l=f.length;b<l;b++){var d=f[b];null!=d&&p.push(k(d)+" "+d)}return 1===f.length?p[0]:p}}}).call(JR);var $la=JR,Cc=lively.FreezerRuntime.recorderFor("lively.lang/string.js");Cc.format=Ya;Cc.formatFromArray=Qb;Cc.indent=xc;Cc.minIndent=Ic;Cc.changeIndent=Gc;Cc.quote=Sc;Cc.articlize=xd;Cc.findArticle=Nd;Cc.print=Tb;Cc.printNested=fe;Cc.pad=df;Cc.printTable=Tc;Cc.printTree=Cf;Cc.toArray=
qg;Cc.lines=uf;Cc.paragraphs=Qe;Cc.nonEmptyLines=ae;Cc.tokens=fg;Cc.tableize=Mh;Cc.unescapeCharacterEntities=Hf;Cc.toQueryParams=li;Cc.base64EncodeUnicode=Dl;Cc.base64DecodeUnicode=Wi;Cc.normalizePath=ee;Cc.joinPath=sg;Cc.newUUID=mi;Cc.createDataURI=tj;Cc.hashCode=Cn;Cc.md5=Sl;Cc.reMatches=rf;Cc.stringMatch=Ci;Cc.peekRight=kf;Cc.peekLeft=Mg;Cc.lineIndexComputer=Xh;Cc.lineNumberToIndexesComputer=qk;Cc.lineRanges=gm;Cc.findLineWithIndexInLineRanges=Wv;Cc.regexIndexOf=Vr;Cc.regexLastIndexOf=Wm;Cc.diff=
Xv;Cc.empty=Yv;Cc.startsWithVowel=At;Cc.withDecimalPrecision=Bt;Cc.capitalize=Fq;Cc.camelCaseString=Fo;Cc.camelize=Go;Cc.truncate=Xm;Cc.truncateLeft=Bm;Cc.regExpEscape=Gq;Cc.succ=Ct;Cc.digitValue=Dt;Cc.longestCommonSubstring=Et;Cc.applyChange=Zv;Cc.applyChanges=Ft;Cc.levenshtein=Ho;Cc.inspectObject=G;Cc.min=Kh;Cc.last=Gd;Cc.articles=$la;Cc.features={repeat:!!String.prototype.repeat,includes:!!String.prototype.includes,startsWith:!!String.prototype.startsWith,endsWith:!!String.prototype.endsWith};
Cc.pathDotRe=/\/\.\//g;Cc.pathDoubleDotRe=/\/[^\/]+\/\.\./;Cc.pathDoubleSlashRe=/(^|[^:])[\/]+/g;Cc.urlStartRe=/^[a-z0-9-_\.]+:\/\//;Cc.newUUIDTemplate="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";Cc.newUUIDRe=/[xy]/g;Cc.newUUIDReplacer=function(g){var c=16*Math.random()|0;return("x"==g?c:c&3|8).toString(16)};Cc.includes=Cc.features.includes?function(g,c){return g.includes(c)}:function(g,c){return-1<g.indexOf(c)};Cc.include=Cc.includes;Cc.startsWith=Cc.features.startsWith?function(g,c){return g.startsWith(c)}:
function(g,c){return 0===g.indexOf(c)};Cc.endsWith=Cc.features.endsWith?function(g,c){return g.endsWith(c)}:function(g,c){var k=g.length-c.length;return 0<=k&&g.lastIndexOf(c)===k};Cc.times=Cc.features.repeat?function(g,c){return g.repeat(c)}:function(g,c){return 1>c?"":Array(c+1).join(g)};var KR=Cc.includes,LR=Cc.include,MR=Cc.startsWith,NR=Cc.endsWith,OR=Cc.times;Cc.format=Ya;Cc.format=Ya;Cc.formatFromArray=Qb;Cc.formatFromArray=Qb;Cc.indent=xc;Cc.indent=xc;Cc.minIndent=Ic;Cc.minIndent=Ic;Cc.changeIndent=
Gc;Cc.changeIndent=Gc;Cc.quote=Sc;Cc.quote=Sc;Cc.articlize=xd;Cc.articlize=xd;Cc.findArticle=Nd;Cc.findArticle=Nd;Cc.print=Tb;Cc.print=Tb;Cc.printNested=fe;Cc.printNested=fe;Cc.pad=df;Cc.pad=df;Cc.printTable=Tc;Cc.printTable=Tc;Cc.printTree=Cf;Cc.printTree=Cf;Cc.toArray=qg;Cc.toArray=qg;Cc.lines=uf;Cc.lines=uf;Cc.paragraphs=Qe;Cc.paragraphs=Qe;Cc.nonEmptyLines=ae;Cc.nonEmptyLines=ae;Cc.tokens=fg;Cc.tokens=fg;Cc.tableize=Mh;Cc.tableize=Mh;Cc.unescapeCharacterEntities=Hf;Cc.unescapeCharacterEntities=
Hf;Cc.base64EncodeUnicode=Dl;Cc.base64EncodeUnicode=Dl;Cc.base64DecodeUnicode=Wi;Cc.base64DecodeUnicode=Wi;Cc.toQueryParams=li;Cc.toQueryParams=li;Cc.normalizePath=ee;Cc.normalizePath=ee;Cc.joinPath=sg;Cc.joinPath=sg;Cc.newUUID=mi;Cc.newUUID=mi;Cc.createDataURI=tj;Cc.createDataURI=tj;Cc.hashCode=Cn;Cc.hashCode=Cn;Cc.md5=Sl;Cc.md5=Sl;Cc.reMatches=rf;Cc.reMatches=rf;Cc.stringMatch=Ci;Cc.stringMatch=Ci;Cc.peekRight=kf;Cc.peekRight=kf;Cc.peekLeft=Mg;Cc.peekLeft=Mg;Cc.lineIndexComputer=Xh;Cc.lineIndexComputer=
Xh;Cc.lineNumberToIndexesComputer=qk;Cc.lineNumberToIndexesComputer=qk;Cc.findLineWithIndexInLineRanges=Wv;Cc.findLineWithIndexInLineRanges=Wv;Cc.regexIndexOf=Vr;Cc.regexIndexOf=Vr;Cc.regexLastIndexOf=Wm;Cc.regexLastIndexOf=Wm;Cc.lineRanges=gm;Cc.lineRanges=gm;Cc.diff=Xv;Cc.diff=Xv;Cc.empty=Yv;Cc.empty=Yv;Cc.includes=KR;Cc.includes=KR;Cc.include=LR;Cc.include=LR;Cc.startsWith=MR;Cc.startsWith=MR;Cc.startsWithVowel=At;Cc.startsWithVowel=At;Cc.endsWith=NR;Cc.endsWith=NR;Cc.withDecimalPrecision=Bt;Cc.withDecimalPrecision=
Bt;Cc.capitalize=Fq;Cc.capitalize=Fq;Cc.camelCaseString=Fo;Cc.camelCaseString=Fo;Cc.camelize=Go;Cc.camelize=Go;Cc.truncate=Xm;Cc.truncate=Xm;Cc.truncateLeft=Bm;Cc.truncateLeft=Bm;Cc.regExpEscape=Gq;Cc.regExpEscape=Gq;Cc.succ=Ct;Cc.succ=Ct;Cc.digitValue=Dt;Cc.digitValue=Dt;Cc.times=OR;Cc.times=OR;Cc.longestCommonSubstring=Et;Cc.longestCommonSubstring=Et;Cc.applyChange=Zv;Cc.applyChange=Zv;Cc.applyChanges=Ft;Cc.applyChanges=Ft;Cc.levenshtein=Ho;Cc.levenshtein=Ho;var Ng=Object.freeze({__proto__:null,
format:Ya,formatFromArray:Qb,indent:xc,minIndent:Ic,changeIndent:Gc,quote:Sc,articlize:xd,findArticle:Nd,print:Tb,printNested:fe,pad:df,printTable:Tc,printTree:Cf,toArray:qg,lines:uf,paragraphs:Qe,nonEmptyLines:ae,tokens:fg,tableize:Mh,unescapeCharacterEntities:Hf,base64EncodeUnicode:Dl,base64DecodeUnicode:Wi,toQueryParams:li,normalizePath:ee,joinPath:sg,newUUID:mi,createDataURI:tj,hashCode:Cn,md5:Sl,reMatches:rf,stringMatch:Ci,peekRight:kf,peekLeft:Mg,lineIndexComputer:Xh,lineNumberToIndexesComputer:qk,
findLineWithIndexInLineRanges:Wv,regexIndexOf:Vr,regexLastIndexOf:Wm,lineRanges:gm,diff:Xv,empty:Yv,includes:KR,include:LR,startsWith:MR,startsWithVowel:At,endsWith:NR,withDecimalPrecision:Bt,capitalize:Fq,camelCaseString:Fo,camelize:Go,truncate:Xm,truncateLeft:Bm,regExpEscape:Gq,succ:Ct,digitValue:Dt,times:OR,longestCommonSubstring:Et,applyChange:Zv,applyChanges:Ft,levenshtein:Ho});Ka("s",Ng);var Kf=lively.FreezerRuntime.recorderFor("lively.lang/number.js");Kf.random=$v;Kf.randomSmallerInteger=aw;
Kf.humanReadableByteSize=bw;Kf.average=cw;Kf.averageInc=dw;Kf.median=ew;Kf.between=fw;Kf.clamp=gw;Kf.sort=hw;Kf.parseLength=iw;Kf.precision=jw;Kf.roundTo=kw;Kf.detent=lw;Kf.toDegrees=mw;Kf.toRadians=nw;Kf.backoff=ow;Kf.interpolate=pw;Kf.normalRandom=function(g,c){var k,f=!1;return function(l,p){if(f)return f=!1,k*p+l;do{var b=2*Math.random()-1;var d=2*Math.random()-1;var h=b*b+d*d}while(1<=h||0==h);h=Math.sqrt(-2*Math.log(h)/h);k=d*h;f=!0;return l+p*b*h}}();Kf.convertLength=function(){function g(c,
k){if("cm"===k)return c;if("mm"===k)return.1*c;if("in"===k)return 2.54*c;if("px"===k)return c*g(1/96,"in");if("pt"===k)return c*g(1/72,"in");if("pc"===k)return c*g(12,"pt")}return function p(k,f,l){return f===l?k:"cm"===l?g(k,f):"cm"===f?k/g(1,l):p(p(k,f,"cm"),"cm",l)}}();var PR=Kf.normalRandom,QR=Kf.convertLength;Kf.random=$v;Kf.random=$v;Kf.normalRandom=PR;Kf.normalRandom=PR;Kf.randomSmallerInteger=aw;Kf.randomSmallerInteger=aw;Kf.humanReadableByteSize=bw;Kf.humanReadableByteSize=bw;Kf.average=
cw;Kf.average=cw;Kf.averageInc=dw;Kf.averageInc=dw;Kf.median=ew;Kf.median=ew;Kf.between=fw;Kf.between=fw;Kf.sort=hw;Kf.sort=hw;Kf.parseLength=iw;Kf.parseLength=iw;Kf.convertLength=QR;Kf.convertLength=QR;Kf.roundTo=kw;Kf.roundTo=kw;Kf.detent=lw;Kf.detent=lw;Kf.toDegrees=mw;Kf.toDegrees=mw;Kf.toRadians=nw;Kf.toRadians=nw;Kf.backoff=ow;Kf.backoff=ow;Kf.interpolate=pw;Kf.interpolate=pw;Kf.clamp=gw;Kf.clamp=gw;Kf.precision=jw;Kf.precision=jw;var jk=Object.freeze({__proto__:null,random:$v,normalRandom:PR,
randomSmallerInteger:aw,humanReadableByteSize:bw,average:cw,averageInc:dw,median:ew,between:fw,sort:hw,parseLength:iw,convertLength:QR,roundTo:kw,detent:lw,toDegrees:mw,toRadians:nw,backoff:ow,interpolate:pw,clamp:gw,precision:jw});Ka("ac",jk);var Qi=lively.FreezerRuntime.recorderFor("lively.lang/properties.js");Qi.all=qw;Qi.allOwnPropertiesOrFunctions=Gt;Qi.own=Ht;Qi.forEachOwn=It;Qi.nameFor=rw;Qi.values=sw;Qi.ownValues=Bp;Qi.any=Hq;Qi.allProperties=Jt;Qi.hash=Wr;Qi.all=qw;Qi.all=qw;Qi.allOwnPropertiesOrFunctions=
Gt;Qi.allOwnPropertiesOrFunctions=Gt;Qi.own=Ht;Qi.own=Ht;Qi.forEachOwn=It;Qi.forEachOwn=It;Qi.nameFor=rw;Qi.nameFor=rw;Qi.values=sw;Qi.values=sw;Qi.ownValues=Bp;Qi.ownValues=Bp;Qi.any=Hq;Qi.any=Hq;Qi.allProperties=Jt;Qi.allProperties=Jt;Qi.hash=Wr;Qi.hash=Wr;var Qm=Object.freeze({__proto__:null,all:qw,allOwnPropertiesOrFunctions:Gt,own:Ht,forEachOwn:It,nameFor:rw,values:sw,ownValues:Bp,any:Hq,allProperties:Jt,hash:Wr});Ka("aw",Qm);var Cm=lively.FreezerRuntime.recorderFor("lively.lang/date.js");Cm.format=
Kt;Cm.equals=Iq;Cm.relativeTo=tw;Cm.dateFormat=function(){var g=function(){var c=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,k=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,f=/[^-+\dA-Z]/g,l=function(p,b){p=String(p);for(b=b||2;p.length<b;)p="0"+p;return p};return function(p,b,d){var h=g;1!=arguments.length||"[object String]"!=Object.prototype.toString.call(p)||/\d/.test(p)||(b=p,p=void 0);
p=p?new Date(p):new Date;if(isNaN(p))throw SyntaxError("invalid date");b=String(h.masks[b]||b||h.masks.default);"UTC:"==b.slice(0,4)&&(b=b.slice(4),d=!0);var a=d?"getUTC":"get",e=p[a+"Date"](),n=p[a+"Day"](),q=p[a+"Month"](),r=p[a+"FullYear"](),v=p[a+"Hours"](),y=p[a+"Minutes"](),D=p[a+"Seconds"]();a=p[a+"Milliseconds"]();var E=d?0:p.getTimezoneOffset(),I={d:e,dd:l(e),ddd:h.i18n.dayNames[n],dddd:h.i18n.dayNames[n+7],m:q+1,mm:l(q+1),mmm:h.i18n.monthNames[q],mmmm:h.i18n.monthNames[q+12],yy:String(r).slice(2),
yyyy:r,h:v%12||12,hh:l(v%12||12),H:v,HH:l(v),M:y,MM:l(y),s:D,ss:l(D),l:l(a,3),L:l(99<a?Math.round(a/10):a),t:12>v?"a":"p",tt:12>v?"am":"pm",T:12>v?"A":"P",TT:12>v?"AM":"PM",Z:d?"UTC":(String(p).match(k)||[""]).pop().replace(f,""),o:(0<E?"-":"+")+l(100*Math.floor(Math.abs(E)/60)+Math.abs(E)%60,4),S:["th","st","nd","rd"][3<e%10?0:(10!=e%100-e%10)*e%10]};return b.replace(c,function(K){return K in I?I[K]:K.slice(1,K.length-1)})}}();g.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",
longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};g.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")};
return g}();var RR=Cm.dateFormat;Cm.format=Kt;Cm.format=Kt;Cm.equals=Iq;Cm.equals=Iq;Cm.relativeTo=tw;Cm.relativeTo=tw;Cm.dateFormat=RR;Cm.dateFormat=RR;var hq=Object.freeze({__proto__:null,format:Kt,equals:Iq,relativeTo:tw,dateFormat:RR});Ka("a1",hq);var Of=lively.FreezerRuntime.recorderFor("lively.lang/promise.js");Of.promise=bg;Of.delay=Lt;Of.delayReject=Xr;Of.timeout=uw;Of.timeToRun=vw;Of.clearPendingWaitFors=function(){Object.kets(Of.waitForClosures).forEach(function(g){delete Of.waitForClosures[g];
clearInterval(g)})};Of.waitFor=Yr;Of.deferred=jz;Of.convertCallbackFun=kz;Of.convertCallbackFunWithManyArgs=lz;Of._chainResolveNext=$C;Of.chain=mz;Of.promise_finally=nz;Of.parallel=oz;Of.newUUID=mi;Of.pushIfNotIncluded=Q;Of.removeAt=Md;Of.waitForClosures={};Object.assign(Of.promise,{delay:Of.delay,delayReject:Of.delayReject,timeout:Of.timeout,waitFor:Of.waitFor,deferred:Of.deferred,convertCallbackFun:Of.convertCallbackFun,convertCallbackFunWithManyArgs:Of.convertCallbackFunWithManyArgs,chain:Of.chain,
finally:Of.promise_finally,parallel:Of.parallel});Of.promise=bg;Of.promise=bg;Of.delay=Lt;Of.delay=Lt;Of.delayReject=Xr;Of.delayReject=Xr;Of.timeout=uw;Of.timeout=uw;Of.timeToRun=vw;Of.timeToRun=vw;Of.waitFor=Yr;Of.waitFor=Yr;Of.deferred=jz;Of.deferred=jz;Of.convertCallbackFun=kz;Of.convertCallbackFun=kz;Of.convertCallbackFunWithManyArgs=lz;Of.convertCallbackFunWithManyArgs=lz;Of.chain=mz;Of.chain=mz;Of.finally=nz;Of.promise_finally=nz;Of.parallel=oz;Of.parallel=oz;Of.default=bg;var iq=lively.FreezerRuntime.recorderFor("lively.lang/Path.js");
iq.Path=Eg;iq.inspect=G;Object.assign(iq.Path.prototype,{get isPathAccessor(){return!0},fromPath:function(g){"string"===typeof g&&""!==g&&g!==this.splitter?(this._parts=g.split(this.splitter),this._path=g):Array.isArray(g)?(this._parts=[].concat(g),this._path=g.join(this.splitter)):(this._parts=[],this._path="");return this},setSplitter:function(g){g&&(this.splitter=g);return this},map:function(g){this._mapper=g;return this},parts:function(){return this._parts},size:function(){return this._parts.length},
slice:function(g,c){return iq.Path(this.parts().slice(g,c))},normalizePath:function(){return this._path},isRoot:function(g){return 0===this._parts.length},isIn:function(g){return this.isRoot()?!0:(g=this.get(g,-1))&&g.hasOwnProperty(this._parts[this._parts.length-1])},equals:function(g){return g&&g.isPathAccessor&&this.parts().equals(g.parts())},isParentPathOf:function(g){g=g&&g.isPathAccessor?g:iq.Path(g);var c=this.parts();g=g.parts();for(var k=0;k<c.length;k++)if(c[k]!=g[k])return!1;return!0},
relativePathTo:function(g){g=iq.Path(g);return this.isParentPathOf(g)?g.slice(this.size(),g.size()):void 0},del:function(g){if(this.isRoot())return!1;for(var c=0;c<this._parts.length-1;c++){var k=this._parts[c];if(g.hasOwnProperty(k))g=g[k];else return!1}return delete g[this._parts[this._parts.length-1]]},withParentAndKeyDo:function(g,c,k){if(this.isRoot())return k(null,null);for(var f=0;f<this._parts.length-1;f++){var l=this._parts[f];if(!g.hasOwnProperty(l)||"object"!==typeof g[l]&&"function"!==
typeof g[l])if(c)g=g[l]={};else return k(null,l);else g=g[l]}return k(g,this._parts[this._parts.length-1])},set:function(g,c,k){return this.withParentAndKeyDo(g,k,function(f,l){return f?f[l]=c:void 0})},defineProperty:function(g,c,k){return this.withParentAndKeyDo(g,k,function(f,l){return f?Object.defineProperty(f,l,c):void 0})},get:function(g,c){var k=this;return(c?this._parts.slice(0,c):this._parts).reduce(function(f,l){return f?k._mapper?k._mapper(l,f[l]):f[l]:f},g)},concat:function(g,c){return iq.Path(this.parts().concat(iq.Path(g,
c).parts()))},toString:function(){return this.normalizePath()},serializeExpr:function(){return"lively.lang.Path("+iq.inspect(this.parts())+")"},watch:function(g){if(g&&!this.isRoot()){var c=g.target,k=this.get(c,-1),f=this.parts().slice(-1)[0],l="propertyWatcher$"+f,p=k&&k.hasOwnProperty(l),b=g.uninstall,d=g.haltWhenChanged,h=g.showStack,a=k.__lookupGetter__(f),e=k.__lookupSetter__(f);c&&f&&k&&(b?p&&(delete k[f],k[f]=k[l],delete k[l]):p||(a||e?console.log(k+'["'+f+'"] is a getter/setter, watching not support'):
(k[l]=k[f],k.__defineSetter__(f,function(n){var q=k[l];if(g.onSet)g.onSet(n,q);q=k+"."+f+" changed: "+q+" -> "+n;h&&(q+="\n"+("undefined"!==typeof lively?lively.printStack():console.trace()));g.verbose&&console.log(q);if(d)debugger;return k[l]=n}),k.__defineGetter__(f,function(){if(g.onGet)g.onGet(k[l]);return k[l]}),console.log("Watcher for "+k+"."+f+" installed"))))}},debugFunctionWrapper:function(g){var c=g.target,k=this.get(c,-1),f=this.parts().slice(-1)[0],l=void 0===g.haltWhenChanged?!0:g.haltWhenChanged,
p=k&&f&&k[f],b=p&&p.isDebugFunctionWrapper;c&&f&&p&&k&&(g.uninstall?b&&(k[f]=k[f].debugTargetFunction,console.log("Uninstalled debugFunctionWrapper for "+k+"."+f)):b?console.log("debugFunctionWrapper for "+k+"."+f+" already installed"):(g=k[f]=p.wrap(function(d){var h=Array.from(arguments);if(l)debugger;return h.shift().apply(k,h)}),g.isDebugFunctionWrapper=!0,g.debugTargetFunction=p,console.log("debugFunctionWrapper for "+k+"."+f+" installed")))}});iq.default=Eg;var ni=lively.FreezerRuntime.recorderFor("lively.lang/graph.js");
ni.clone=ww;ni.without=Mt;ni.hull=Zr;ni.subgraphReachableBy=xw;ni.invert=yw;ni.sortByReference=$r;ni.reduce=as;ni.random=bs;ni.range=Mc;ni.shuffle=gf;ni.withoutAll=kd;ni.flatten=Ib;ni.uniq=vb;ni.values=Do;ni.clone=ww;ni.clone=ww;ni.without=Mt;ni.without=Mt;ni.hull=Zr;ni.hull=Zr;ni.subgraphReachableBy=xw;ni.subgraphReachableBy=xw;ni.invert=yw;ni.invert=yw;ni.sortByReference=$r;ni.sortByReference=$r;ni.reduce=as;ni.reduce=as;ni.random=bs;ni.random=bs;var wr=Object.freeze({__proto__:null,clone:ww,without:Mt,
hull:Zr,subgraphReachableBy:xw,invert:yw,sortByReference:$r,reduce:as,random:bs}),dh=lively.FreezerRuntime.recorderFor("lively.lang/interval.js");dh.isInterval=zw;dh.sort=Aw;dh.compare=Nt;dh.coalesce=Ot;dh.coalesceOverlapping=Pt;dh.mergeOverlapping=Bw;dh.intervalsInRangeDo=Qt;dh.intervalsInbetween=Rt;dh.mapToMatchingIndexes=Cw;dh.benchmark=function(){function g(c,k,f){return c.name+" "+dh.timeToRunN(function(){return c.apply(null,k,1E5)},f)+"ms"}return["Friday, 20. July 2012:\ncoalesceOverlapping: 0.0003ms\nintervalsInbetween: 0.002ms\nmapToMatchingIndexes: 0.02ms",
"vs.\n"+new Date+":",g(dh.coalesceOverlapping,[[[9,10],[1,8],[3,7],[15,20],[14,21]]],1E5),g(dh.intervalsInbetween,[0,10,[[8,10],[0,2],[3,5]]],1E5),g(dh.mapToMatchingIndexes,[dh.range(0,1E3).map(function(c){return[c,c+1]}),[[4,8],[500,504],[900,1004]]],1E3)].join("\n")};dh.range=Mc;dh.timeToRunN=Re;dh.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;dh.isInterval=zw;dh.isInterval=zw;dh.sort=Aw;dh.sort=Aw;dh.compare=Nt;dh.compare=Nt;dh.coalesce=Ot;dh.coalesce=
Ot;dh.coalesceOverlapping=Pt;dh.coalesceOverlapping=Pt;dh.mergeOverlapping=Bw;dh.mergeOverlapping=Bw;dh.intervalsInRangeDo=Qt;dh.intervalsInRangeDo=Qt;dh.intervalsInbetween=Rt;dh.intervalsInbetween=Rt;dh.mapToMatchingIndexes=Cw;dh.mapToMatchingIndexes=Cw;var uI=Object.freeze({__proto__:null,isInterval:zw,sort:Aw,compare:Nt,coalesce:Ot,coalesceOverlapping:Pt,mergeOverlapping:Bw,intervalsInRangeDo:Qt,intervalsInbetween:Rt,mapToMatchingIndexes:Cw}),Tl=lively.FreezerRuntime.recorderFor("lively.lang/array-projection.js");
Tl.create=Dw;Tl.toArray=Ew;Tl.originalToProjectedIndex=Jq;Tl.projectedToOriginalIndex=Kq;Tl.transformToIncludeIndex=Cp;Tl.create=Dw;Tl.create=Dw;Tl.toArray=Ew;Tl.toArray=Ew;Tl.originalToProjectedIndex=Jq;Tl.originalToProjectedIndex=Jq;Tl.projectedToOriginalIndex=Kq;Tl.projectedToOriginalIndex=Kq;Tl.transformToIncludeIndex=Cp;Tl.transformToIncludeIndex=Cp;var vI=Object.freeze({__proto__:null,create:Dw,toArray:Ew,originalToProjectedIndex:Jq,projectedToOriginalIndex:Kq,transformToIncludeIndex:Cp}),Fg=
lively.FreezerRuntime.recorderFor("lively.lang/grid.js");Fg.get=cs;Fg.set=St;Fg.getRow=Tt;Fg.setRow=Ut;Fg.getCol=Fw;Fg.setCol=Gw;Fg.create=Hw;Fg.mapCreate=Iw;Fg.forEach=ds;Fg.map=Vt;Fg.toObjects=es;Fg.tableFromObjects=Wt;Fg.benchmark=function(){var g=[],c=Fg.create(1E3,200,1);var k=Fg.timeToRunN(function(){Fg.forEach(c,function(l){})},10);g.push("forEach: "+k.toFixed(2)+"ms");k=Fg.timeToRunN(function(){Fg.map(c,function(l,p,b){return p+b+Math.round(100*Math.random())})},10);g.push("map: "+k.toFixed(2)+
"ms");var f=Fg.create(1E3,2E3);k=Fg.timeToRunN(function(){f=Array(1E3);for(var l=0;1E3>l;l++)f[l]=Array(2E3);Fg.forEach(c,function(p,b,d){f[b][d]=b+d+Math.round(100*Math.random())})},10);g.push("map with forEach: "+k+"ms");g.push("--= 2012-09-22 =--\nforEach: 14.9ms\nmap: 19.8ms\nmap with forEach: 38.7ms\n");return g.join("\n")};Fg.arrayWithN=Kd;Fg.timeToRunN=Re;Fg.get=cs;Fg.get=cs;Fg.set=St;Fg.set=St;Fg.getRow=Tt;Fg.getRow=Tt;Fg.setRow=Ut;Fg.setRow=Ut;Fg.getCol=Fw;Fg.getCol=Fw;Fg.setCol=Gw;Fg.setCol=
Gw;Fg.create=Hw;Fg.create=Hw;Fg.mapCreate=Iw;Fg.mapCreate=Iw;Fg.forEach=ds;Fg.forEach=ds;Fg.map=Vt;Fg.map=Vt;Fg.toObjects=es;Fg.toObjects=es;Fg.tableFromObjects=Wt;Fg.tableFromObjects=Wt;var py=Object.freeze({__proto__:null,get:cs,set:St,getRow:Tt,setRow:Ut,getCol:Fw,setCol:Gw,create:Hw,mapCreate:Iw,forEach:ds,map:Vt,toObjects:es,tableFromObjects:Wt}),uj=lively.FreezerRuntime.recorderFor("lively.lang/tree.js");uj.prewalk=Xt;uj.postwalk=fs;uj.find=gs;uj.filter=Lq;uj.map=hs;uj.mapTree=Yt;uj.flatten=
Ib;uj.detect=uj.find;var SR=uj.detect;uj.prewalk=Xt;uj.prewalk=Xt;uj.postwalk=fs;uj.postwalk=fs;uj.find=gs;uj.find=gs;uj.detect=SR;uj.detect=SR;uj.filter=Lq;uj.filter=Lq;uj.map=hs;uj.map=hs;uj.mapTree=Yt;uj.mapTree=Yt;var xr=Object.freeze({__proto__:null,prewalk:Xt,postwalk:fs,find:gs,detect:SR,filter:Lq,map:hs,mapTree:Yt});Ka("a0",xr);var jq=lively.FreezerRuntime.recorderFor("lively.lang/events.js");jq.isNode="undefined"!==typeof jq.process&&jq.process.versions&&jq.process.versions.node;jq.makeEmitter=
jq.isNode?function(g,c){if(g.on&&g.removeListener)return g;var k="undefined"!==typeof System?System._nodeRequire("events"):jq.require("events");Object.assign(g,k.EventEmitter.prototype);k.EventEmitter.call(g);c&&c.maxListenerLimit&&g.setMaxListeners(c.maxListenerLimit);return g}:function(g){if(g.on&&g.removeListener)return g;g.listeners={};g.on=function(c,k){k&&(g.listeners[c]||(g.listeners[c]=[]),g.listeners[c].push(k))};g.once=function(c,k){function f(){g.removeListener(c,f);k.apply(this,arguments)}
if(k)g.on(c,f)};g.removeListener=function(c,k){g.listeners[c]&&(g.listeners[c]=g.listeners[c].filter(function(f){return f!==k}))};g.removeAllListeners=function(c){g.listeners[c]&&(g.listeners[c]=[])};g.emit=function(){var c=Array.prototype.slice.call(arguments),k=c.shift();(k=g.listeners[k])&&k.length&&k.forEach(function(f){try{f.apply(null,c)}catch(l){console.error("Error in event handler: %s",l.stack||String(l))}})};return g};var Yw=jq.makeEmitter;jq.makeEmitter=Yw;jq.makeEmitter=Yw;var gv=Object.freeze({__proto__:null,
makeEmitter:Yw}),Tj=lively.FreezerRuntime.recorderFor("lively.lang/messenger.js");Tj.create=Zt;Tj.remove=yb;Tj.pluck=Nb;Tj.makeEmitter=Yw;Tj.newUUID=mi;Tj.OFFLINE="offline";Tj.ONLINE="online";Tj.CONNECTING="connecting";Tj.create=Zt;Tj.create=Zt;var wI=Object.freeze({__proto__:null,create:Zt}),Gg=lively.FreezerRuntime.recorderFor("lively.lang/worker.js");Gg.fork=$t;Gg.create=Jw;Gg.makeEmitter=Yw;Gg.newUUID=mi;Gg.waitFor=Qg;Gg.messengerCreate=Zt;Gg.Closure=Gi;Gg.isNodejs="undefined"!==typeof require&&
"undefined"!==typeof process;Gg.WorkerSetup={loadDependenciesBrowser:function(g){importScripts.apply("undefined"!==typeof self?self:this,g.scriptsToLoad||[])},loadDependenciesNodejs:function(g){(global.lively||(global.lively={})).lang=require(require("path").join(g.libLocation,"index"))},initBrowserGlobals:function(g){remoteWorker.send=function(c){postMessage(c)};g="undefined"!==typeof self?self:this;g=g.Global=g;g.window=g;g.console=g.console||function(){var c={};["log","error","warn"].forEach(function(k){c[k]=
function(){for(var f=arguments[0],l=1;l<arguments.length;l++)f=f.replace("%s",arguments[l]);remoteWorker.send({type:k,message:["[",k.toUpperCase(),"] ",f].join("")})}});return c}()},initOnMessageHandler:function(g){function c(k){k=k.data.data?k.data:k;if(remoteWorker.messenger)remoteWorker.messenger.onMessage(k);else"close"==k.action&&(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())}if(remoteWorker.on)remoteWorker.on("message",c);else remoteWorker.onmessage=c},initWorkerInterface:function(g){remoteWorker.callStringifiedFunction=
function(c,k,f){try{var l=eval("("+c+")")}catch(d){f(Error("Cannot create function from string: "+d.stack||d));return}c=l.length===k.length+1;var p=lively.lang.fun.once(function(d,h){remoteWorker.isBusy=!1;f(d,h)});remoteWorker.isBusy=!0;c&&k.push(p);try{var b=l.apply(remoteWorker,k.concat([p]))}catch(d){p(d,null);return}c||p(null,b)};remoteWorker.httpRequest=function(c){if(c.url){var k=new XMLHttpRequest,f=c.method||"GET";k.onreadystatechange=function(){4===k.readyState&&c.done&&c.done(k)};k.open(f,
c.url);k.send()}else console.log("Error, httpRequest needs url")};remoteWorker.terminateIfNotBusyIn=function(c){setTimeout(function(){remoteWorker.isBusy?remoteWorker.terminateIfNotBusyIn(c):(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())},c)}},initWorkerMessenger:function(g){if(!g.useMessenger)return null;if(!lively.lang.messenger)throw Error("worker.create requires messenger.js to be loaded!");if(!lively.lang.events)throw Error("worker.create requires events.js to be loaded!");
return remoteWorker.messenger=lively.lang.messenger.create({services:{remoteEval:function(c,k){try{var f=eval(c.data.expr)}catch(l){f=l.stack||l}k.answer(c,{result:String(f)})},run:function(c,k){var f=c.data.func,l=c.data.args;f?remoteWorker.callStringifiedFunction(f,l,function(p,b){k.answer(c,{error:p?String(p):null,result:b})}):k.answer(c,{error:"no funcString"})},close:function(c,k){k.answer(c,{status:"OK"});remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}},isOnline:function(){return!0},
send:function(c,k){remoteWorker.send(c);k()},listen:function(c){c()},close:function(c){remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}})}};Gg.BrowserWorker={create:function(g){g=g||{};if(!g.libLocation&&!g.scriptsToLoad){var c=document.querySelector('script[src$="worker.js"]');if(!c)throw Error('Cannot find library path to start worker. Use worker.create({libLocation: "..."}) to explicitly define the path!');g.libLocation=c.src.replace(/worker.js$/,"")}c=String(function(){self.onmessage=
function(k){if("setup"!==k.data.action)throw Error("expected setup to be first message but got "+JSON.stringify(k.data));k=k.data.options||{};initBrowserGlobals(k);loadDependenciesBrowser(k);initOnMessageHandler(k);initWorkerInterface(k);initWorkerMessenger(k);postMessage({workerReady:!0})};__FUNCTIONDECLARATIONS__}).split("__lvVarRecorder.").join("").replace("__FUNCTIONDECLARATIONS__",[Gg.WorkerSetup.initBrowserGlobals,Gg.WorkerSetup.loadDependenciesBrowser,Gg.WorkerSetup.initOnMessageHandler,Gg.WorkerSetup.initWorkerInterface,
Gg.WorkerSetup.initWorkerMessenger].join("\n"));c="("+Gg.Closure.fromSource(c).getFuncSource()+")();";c=new Worker(function(k){try{var f=new Blob([k],{type:"text/javascript"})}catch(l){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,f=new BlobBuilder,f.append(k),f=f.getBlob()}return("undefined"!==typeof webkitURL?webkitURL:URL).createObjectURL(f)}(c));(function(k,f){Gg.makeEmitter(f);k.scriptsToLoad||(k.scriptsToLoad="base.js events.js object.js collection.js function.js string.js number.js date.js messenger.js worker.js".split(" ").map(function(p){return k.libLocation+
p}));var l=Object.keys(k).reduce(function(p,b){"function"!==typeof k[b]&&(p[b]=k[b]);return p},{});f.onmessage=function(p){void 0!==p.data.workerReady?(f.ready=!!p.data.workerReady,f.ready?f.emit("ready"):f.emit("close")):f.emit("message",p.data)};f.errors=[];f.onerror=function(p){console.error(p);f.errors.push(p);f.emit("error",p)};f.postMessage({action:"setup",options:l})})(g,c);return c}};Gg.NodejsWorker={debug:!1,initCodeFileCreated:!1,create:function(g){g=g||{};var c,k=Gg.makeEmitter({ready:!1,
errors:[],postMessage:function(f){c?k.ready?c.send(f):k.emit("error",Error("nodejs worker process not ready or already closed")):k.emit("error",Error("nodejs worker process not yet created"))}});Gg.NodejsWorker.startWorker(g,function(f,l){f?(k.ready=!1,k.emit("error",f)):(c=l,c.on("message",function(p){Gg.NodejsWorker.debug&&console.log("[WORKER PARENT] got message:",p);k.emit("message",p)}),c.on("close",function(){console.log("[WORKER PARENT] worker closed");k.emit("close")}),c.on("error",function(p){console.log("[WORKER PARENT] error ",
p);k.errors.push(p);k.emit("error",p)}),k.ready=!0,k.emit("ready"))});return k},workerSetupFunction:function(){var g=process;console.log("[WORKER] Starting init");g.on("message",function(c){if("setup"!==c.action)throw Error("expected setup to be first message but got "+JSON.stringify(c.data));g.removeAllListeners("message");c=c.data.options||{};console.log("[WORKER] running setup with options",c);loadDependenciesNodejs(c);initOnMessageHandler(c);initWorkerInterface(c);initWorkerMessenger(c);g.send({workerReady:!0})});
__FUNCTIONDECLARATIONS__},ensureInitCodeFile:function(g,c,k){var f=require("path"),l=require("os"),p=require("fs");l=f.join(l.tmpDir(),"lively-nodejs-workers/");var b=f.join(l,"nodejs-worker-init.js");Gg.NodejsWorker.initCodeFileCreated?p.exists(b,function(d){d?k(null,b):Gg.NodejsWorker.createWorkerCodeFile(g,b,c,k)}):Gg.NodejsWorker.createWorkerCodeFile(g,b,c,k)},createWorkerCodeFile:function(g,c,k,f){g=require("path");var l=require("fs"),p=require("child_process").exec;p("mkdir -p "+g.dirname(c),
function(b,d,h){b?f(Error(["[WORKER PARENT] Could not create worker temp dir:",d,h].join("\n"))):l.writeFile(c,k,function(a){Gg.NodejsWorker.debug&&console.log("worker code file %s created",c);Gg.NodejsWorker.initCodeFileCreated=!0;f(a,c)})})},startWorker:function(g,c){var k=require("util"),f=require("child_process").fork,l=String(Gg.NodejsWorker.workerSetupFunction).replace("__FUNCTIONDECLARATIONS__",[Gg.WorkerSetup.loadDependenciesNodejs,Gg.WorkerSetup.initOnMessageHandler,Gg.WorkerSetup.initWorkerInterface,
Gg.WorkerSetup.initWorkerMessenger].join("\n"));k=k.format("(%s)();\n",l);Gg.NodejsWorker.ensureInitCodeFile(g,k,function(p,b){if(p)return c(p);var d=f(b,{});Gg.NodejsWorker.debug&&console.log("worker forked");d.on("message",function(h){"pong"===h.action?console.log("[WORKER pong] ",h):"log"===h.action&&console.log("[Message from WORKER] ",h.data)});d.once("message",function(h){Gg.NodejsWorker.debug&&console.log("worker setup done");c(null,d,h)});d.on("close",function(){Gg.NodejsWorker.debug&&console.log("[WORKER PARENT] worker closed")});
d.send({action:"setup",data:{options:g}});global.WORKER=d})}};Gg.fork=$t;Gg.fork=$t;Gg.create=Jw;Gg.create=Jw;var xI=Object.freeze({__proto__:null,fork:$t,create:Jw}),Ad=lively.FreezerRuntime.recorderFor("lively.lang/index.js");Ad.createLivelyLangObject=function(){return{chain:Ad.chain,noConflict:Ad.noConflict,installGlobals:Ad.installGlobals,uninstallGlobals:Ad.uninstallGlobals,globalInterfaceSpec:Ad.globalInterfaceSpec,toString:function(){return"[object lively.lang]"}}};Ad.globalInstall=Kw;Ad.chain=
Dn;Ad.createChain=function(g,c){return Object.keys(g).reduce(function(k,f){k[f]=function(){var l=Array.prototype.slice.call(arguments);l=g[f].apply(null,[c].concat(l));return Ad.chain(l)};return k},{value:function(){return c}})};Ad.noConflict=Dp;Ad.installGlobals=Lw;Ad.installProperty=function(g,c){if(!g.isIn(Ad.livelyLang))throw c=Error("property not provided by lively.lang: "+g),console.error(c.stack||c),c;g=g.get(Ad.livelyLang);if("function"===typeof g&&"prototype"===c.slice(-2,-1).toString()){var k=
g;g=function(){var f=Array.prototype.slice.call(arguments);f.unshift(this);return k.apply(null,f)};g.toString=function(){return k.toString()}}c.set(Ad.GLOBAL,g,!0)};Ad.uninstallGlobals=Mw;Ad.string=Ng;Ad.num=jk;Ad.fun=ik;Ad.Closure=Gi;Ad.arr=cf;Ad.obj=xf;Ad.properties=Qm;Ad.date=hq;Ad.promise=bg;Ad.Path=Eg;Ad.graph=wr;Ad.interval=uI;Ad.arrayProjection=vI;Ad.Group=Kl;Ad.grid=py;Ad.tree=xr;Ad.events=gv;Ad.messenger=wI;Ad.worker=xI;Ad.worker=xI;Ad.worker=xI;Ad.messenger=wI;Ad.messenger=wI;Ad.events=
gv;Ad.events=gv;Ad.tree=xr;Ad.tree=xr;Ad.grid=py;Ad.grid=py;Ad.arrayProjection=vI;Ad.arrayProjection=vI;Ad.interval=uI;Ad.interval=uI;Ad.graph=wr;Ad.graph=wr;Ad.date=hq;Ad.date=hq;Ad.properties=Qm;Ad.properties=Qm;Ad.obj=xf;Ad.obj=xf;Ad.arr=cf;Ad.arr=cf;Ad.fun=ik;Ad.fun=ik;Ad.num=jk;Ad.num=jk;Ad.string=Ng;Ad.string=Ng;Ad.Closure=Gi;Ad.Closure=Gi;Ad.promise=bg;Ad.promise=bg;Ad.Path=Eg;Ad.Path=Eg;Ad.Group=Kl;Ad.Group=Kl;Ad.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:
"undefined"!==typeof self?self:void 0;Ad.isNode="undefined"!==typeof Ad.process&&Ad.process.env&&"function"===typeof Ad.process.exit;Ad.globalInterfaceSpec=[{action:"installMethods",target:"Array",sources:["arr"],methods:["from","genN","range","withN"]},{action:"installMethods",target:"Array.prototype",sources:["arr"],methods:"all any batchify clear clone collect compact delimWith detect doAndContinue each equals filterByKey findAll first flatten forEachShowingProgress grep groupBy groupByKey histogram include inject intersect invoke last mapAsync mapAsyncSeries mask max min mutableCompact nestedDelay partition pluck pushAll pushAllAt pushAt pushIfNotIncluded reMatches reject rejectByKey remove removeAt replaceAt rotate shuffle size sortBy sortByKey sum swap toArray toTuples union uniq uniqBy without withoutAll zip".split(" "),
alias:[["select","filter"]]},{action:"installMethods",target:"Date",sources:["date"],methods:[]},{action:"installMethods",target:"Date.prototype",sources:["date"],methods:["equals","format","relativeTo"]},{action:"installMethods",target:"Function",sources:["fun"],methods:["fromString"]},{action:"installMethods",target:"Function.prototype",sources:["fun"],methods:"addToObject argumentNames asScript asScriptOf binds curry delay functionNames localFunctionNames getOriginal getVarMapping logCalls logCompletion logErrors qualifiedMethodName setProperty traceCalls wrap".split(" ")},
{action:"installMethods",target:"Number",sources:["num"],methods:[]},{action:"installMethods",target:"Number.prototype",sources:["num"],methods:["detent","randomSmallerInteger","roundTo","toDegrees","toRadians"]},{action:"installMethods",target:"Object",sources:["obj"],methods:"addScript clone deepCopy extend inherit isArray isBoolean isElement isEmpty isFunction isNumber isObject isRegExp isString isUndefined merge mergePropertyInHierarchy values valuesInPropertyHierarchy".split(" ")},{action:"installMethods",
target:"Object.prototype",sources:["obj"],methods:[]},{action:"installMethods",target:"String.prototype",sources:["string"],methods:"camelize capitalize digitValue empty hashCode include pad regExpEscape startsWithVowel succ times toArray toQueryParams truncate".split(" ")},{action:"installObject",target:"Numbers",source:"num",methods:"average between convertLength humanReadableByteSize median normalRandom parseLength random sort".split(" ")},{action:"installObject",target:"Properties",source:"properties",
methods:"all allOwnPropertiesOrFunctions allProperties any forEachOwn hash nameFor own ownValues values".split(" ")},{action:"installObject",target:"Strings",source:"string",methods:"camelCaseString createDataURI diff format formatFromArray indent lineIndexComputer lines md5 newUUID nonEmptyLines pad paragraphs peekLeft peekRight print printNested printTable printTree quote reMatches stringMatch tableize tokens unescapeCharacterEntities withDecimalPrecision".split(" ")},{action:"installObject",target:"Objects",
source:"obj",methods:"asObject equals inspect isMutableType safeToString shortPrintStringOf typeStringOf".split(" ")},{action:"installObject",target:"Functions",source:"fun",methods:"all compose composeAsync createQueue debounce debounceNamed either extractBody flip notYetImplemented once own throttle throttleNamed timeToRun timeToRunN waitFor workerWithCallbackQueue wrapperChain".split(" ")},{action:"installObject",target:"Grid",source:"grid"},{action:"installObject",target:"Interval",source:"interval"},
{action:"installObject",target:"lively.ArrayProjection",source:"arrayProjection"},{action:"installObject",target:"lively.Closure",source:"Closure"},{action:"installObject",target:"lively.Grouping",source:"Group"},{action:"installObject",target:"lively.PropertyPath",source:"Path"},{action:"installObject",target:"lively.Worker",source:"worker"},{action:"installObject",target:"lively.Class",source:"classHelper"}];var yI=Ad.createLivelyLangObject();Ad.livelyLang=yI;Ad.livelyLang=yI;Ad.livelyLang=yI;Ad.globalInstall=
Kw;Ad.globalInstall=Kw;Ad.chain=Dn;Ad.chain=Dn;Ad.noConflict=Dp;Ad.noConflict=Dp;Ad.installGlobals=Lw;Ad.installGlobals=Lw;Ad.uninstallGlobals=Mw;Ad.uninstallGlobals=Mw;var j8=Object.freeze({__proto__:null,worker:xI,messenger:wI,events:gv,tree:xr,grid:py,arrayProjection:vI,interval:uI,graph:wr,date:hq,properties:Qm,obj:xf,arr:cf,fun:ik,num:jk,string:Ng,Closure:Gi,promise:bg,Path:Eg,Group:Kl,livelyLang:yI,globalInstall:Kw,chain:Dn,noConflict:Dp,installGlobals:Lw,uninstallGlobals:Mw}),Qf=lively.FreezerRuntime.recorderFor("lively.resources/src/http-resource.js");
Qf.davNs=function(g){return(g=g.match(/\/([a-z]+?):multistatus/i))?g[1]:"d"};Qf.propfindRequestPayload=function(){return'<?xml version="1.0" encoding="utf-8" ?>\n    <D:propfind xmlns:D="DAV:">\n      <D:prop>\n        <D:creationdate/>\n        <D:getcontentlength/>\n        <D:getcontenttype/>\n        <D:getetag/>\n        <D:getlastmodified/>\n        <D:resourcetype/>\n      </D:prop>\n    </D:propfind>'};Qf.readPropertyNode=function(g,c){c=void 0===c?{}:c;var k=g.tagName.replace(/[^:]+:/,"");
k=Qf.propertyNodeMap[k];g=g.textContent;switch(k){case "lastModified":case "created":g=new Date(g);break;case "size":g=Number(g)}c[k]=g;return c};Qf.readXMLPropfindResult=function(g){var c=(new Qf.DOMParser).parseFromString(g,"text/xml");g=Qf.davNs(g);c=(new Qf.XPathQuery("/"+g+":multistatus/"+g+":response")).findAll(c.documentElement);var k=new Qf.XPathQuery(g+":href"),f=new Qf.XPathQuery(g+":propstat/"+g+":prop");return c.map(function(l){var p=f.findFirst(l);p=Array.from(p.childNodes).reduce(function(b,
d){return Qf.readPropertyNode(d,b)},{});l=k.findFirst(l);p.url=l.textContent||l.text;return p})};Qf.defaultOrigin=function(){return System.baseURL||document.location.origin};Qf.makeRequest=function(g,c,k,f,l){f=void 0===f?{}:f;l=g.url;var p=g.useCors,b=g.useProxy,d=g.headers;p="undefined"!==typeof p?p:!0;c={method:void 0===c?"GET":c};if("undefined"!==typeof b?b:1)Object.assign(f,{"cache-control":"no-cache","x-lively-proxy-request":l}),l=g.proxyDomain||Qf.defaultOrigin();p&&(c.mode="cors");k&&(c.body=
k);c.redirect="follow";c.headers=Object.assign({},f,{},d);return fetch(l,c)};Qf.upload=Mq;Qf.Resource=Uf;Qf.applyExclude=gc;Qf.promise=bg;Qf.num=jk;var zB=function(g){this.expression=g;this.contextNode=null;this.xpe=new Qf.XPathEvaluator};zB.prototype.establishContext=function(g){this.nsResolver||(g=g.ownerDocument?g.ownerDocument.documentElement:g.documentElement,g!==this.contextNode&&(this.contextNode=g,this.nsResolver=this.xpe.createNSResolver(g)))};zB.prototype.manualNSLookup=function(){this.nsResolver=
function(g){return Qf.Namespace[g.toUpperCase()]||null};return this};zB.prototype.findAll=function(g,c){this.establishContext(g);g=this.xpe.evaluate(this.expression,g,this.nsResolver,Qf.XPathResult.ANY_TYPE,null);for(var k=[],f;f=g.iterateNext();)k.push(f);return 0<k.length||void 0===c?k:c};zB.prototype.findFirst=function(g){this.establishContext(g);return this.xpe.evaluate(this.expression,g,this.nsResolver,Qf.XPathResult.ANY_TYPE,null).iterateNext()};Qf.XPathQuery=zB;Qf.propertyNodeMap={getlastmodified:"lastModified",
creationDate:"created",getetag:"etag",getcontentlength:"size",resourcetype:"type",getcontenttype:"contentType"};Qf.binaryExtensions="3ds 3g2 3gp 7z a aac adp ai aif aiff alz ape apk ar arj asf au avi bak bh bin bk bmp btif bz2 bzip2 cab caf cgm class cmx cpio cr2 csv cur dat deb dex djvu dll dmg dng doc docm docx dot dotm dra DS_Store dsk dts dtshd dvb dwg dxf ecelp4800 ecelp7470 ecelp9600 egg eol eot epub exe f4v fbs fh fla flac fli flv fpx fst fvt g3 gif graffle gz gzip h261 h263 h264 icns ico ief img ipa iso jar jpeg jpg jpgv jpm jxr key ktx lha lvp lz lzh lzma lzo m3u m4a m4v mar mdi mht mid midi mj2 mka mkv mmr mng mobi mov movie mp3 mp4 mp4a mpeg mpg mpga mxu nef npx numbers o oga ogg ogv otf pages pbm pcx pdf pea pgm pic png pnm pot potm potx ppa ppam ppm pps ppsm ppsx ppt pptm pptx psd pya pyc pyo pyv qt rar ras raw rgb rip rlc rmf rmvb rtf rz s3m s7z scpt sgi shar sil sketch slk smv so sub swf tar tbz tbz2 tga tgz thmx tif tiff tlz ttc ttf txz udf uvh uvi uvm uvp uvs uvu viv vob war wav wax wbmp wdp weba webm webp whl wim wm wma wmv wmx woff woff2 wvx xbm xif xla xlam xls xlsb xlsm xlsx xlt xltm xltx xm xmind xpi xpm xwd xz z zip zipx".split(" ");
Qf.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==typeof global&&"undefined"!==typeof Qf.process;Qf.upload=Mq;Qf.upload=Mq;var zk=function(g,c){c=void 0===c?{}:c;g=Qf.Resource.call(this,g,c)||this;g.onLoad=c.onLoad||function(){};g.onProgress=c.onProgress||function(){};g.useProxy=c.hasOwnProperty("useProxy")?c.useProxy:!1;g.proxyDomain=c.proxyDomain||void 0;g.useCors=c.hasOwnProperty("useCors")?c.useCors:!1;g.headers=c.headers||{};g.binary=g.isFile()?Qf.binaryExtensions.includes(g.ext()):
!1;g.errorOnHTTPStatusCodes=c.hasOwnProperty("errorOnHTTPStatusCodes")?c.errorOnHTTPStatusCodes:!0;return g};$jscomp.inherits(zk,Qf.Resource);zk.prototype.join=function(g){return Object.assign(Qf.Resource.prototype.join.call(this,g),{headers:this.headers,useCors:this.useCors,useProxy:this.useProxy,proxyDomain:this.proxyDomain})};zk.prototype.makeProxied=function(g){void 0!==g&&(this.proxyDomain=g);return this.useProxy?this:new this.constructor(this.url,{headers:this.headers,useCors:this.useCors,useProxy:!0,
proxyDomain:this.proxyDomain})};zk.prototype.noErrorOnHTTPStatusCodes=function(){this.errorOnHTTPStatusCodes=!1;return this};zk.prototype.read=function(){var g=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(Qf.makeRequest(g),2);c=k.yieldResult;if(!c.ok&&g.errorOnHTTPStatusCodes)throw Error("Cannot read "+g.url+": "+c.statusText+" "+c.status);if(!g.binary)return k.return(c.text());if("blob"===g.binary)return k.return(c.blob());if("function"===
typeof c.arrayBuffer)return k.return(c.arrayBuffer());if("function"===typeof c.buffer)return k.return(c.buffer());throw Error("Don't now how to read binary resource "+g+"'");})};zk.prototype.write=function(g){var c=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress){if(!c.isFile())throw Error("Cannot write a non-file: "+c.url);return f.yield(Qf.upload(c,g),2)}k=f.yieldResult;if(!Qf.num.between(k.status,200,300)&&c.errorOnHTTPStatusCodes)throw Error("Cannot write "+
c.url+": "+k.statusText+" "+k.status);return f.return(c)})};zk.prototype.mkdir=function(){var g=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){if(g.isFile())throw Error("Cannot mkdir on a file: "+g.url);return k.yield(Qf.makeRequest(g,"MKCOL"),2)}c=k.yieldResult;if(!c.ok&&g.errorOnHTTPStatusCodes)throw Error("Cannot create directory "+g.url+": "+c.statusText+" "+c.status);return k.return(g)})};zk.prototype.exists=function(){var g=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==
k.nextAddress)return g.isRoot()?(c=!0,k.jumpTo(2)):k.yield(Qf.makeRequest(g,"HEAD"),3);2!=k.nextAddress&&(c=!!k.yieldResult.ok);return k.return(c)})};zk.prototype.remove=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?c.yield(Qf.makeRequest(g,"DELETE"),2):c.return(g)})};zk.prototype._propfind=function(){var g=this,c,k,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(Qf.makeRequest(g,"PROPFIND",
null,{"Content-Type":"text/xml"}),2);if(3!=l.nextAddress){c=l.yieldResult;if(!c.ok&&g.errorOnHTTPStatusCodes)throw Error("Error in dirList for "+g.url+": "+c.statusText);return l.yield(c.text(),3)}k=l.yieldResult;f=g.root();return l.return(Qf.readXMLPropfindResult(k).map(function(p){return f.join(p.url).assignProperties(p)}))})};zk.prototype.dirList=function(g,c){g=void 0===g?1:g;c=void 0===c?{}:c;var k=this,f,l,p,b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){if("number"!==
typeof g&&"infinity"!==g)throw Error("dirList \u2013 invalid depth argument: "+g);f=c;l=f.exclude;0>=g&&(g=1);return 1===g?h.yield(k._propfind(),5):h.yield(k.dirList(1,c),4)}if(5!=h.nextAddress)return p=h.yieldResult,b=p.filter(function(a){return a.isDirectory()}),h.return(Promise.all(b.map(function(a){return a.dirList("number"===typeof g?g-1:g,c)})).then(function(a){return a.reduce(function(e,n){return e.concat(n)},p)}));d=h.yieldResult;d.shift();l&&(d=Qf.applyExclude(l,d));return h.return(d)})};
zk.prototype.readProperties=function(g){var c=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(c._propfind(),2);k=f.yieldResult[0];return f.return(c.assignProperties(k))})};zk.prototype.post=function(g){g=void 0===g?null:g;var c=this,k,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:return"string"!==typeof g&&(g=JSON.stringify(g)),p.yield(Qf.makeRequest(c,"POST",g,{}),2);case 2:return k=p.yieldResult,
p.setCatchFinallyBlocks(3),p.yield(k.text(),5);case 5:f=p.yieldResult;p.leaveTryBlock(4);break;case 3:p.enterCatchBlock();case 4:if(f&&"application/json"===k.headers.get("content-type"))try{l=JSON.parse(f)}catch(b){}if(!k.ok&&c.errorOnHTTPStatusCodes)throw Error("Error in POST "+c.url+": "+(f||k.statusText));return p.return(l||f)}})};zk.prototype.copyTo=function(g,c){c=void 0===c?!0:c;var k=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(k.isFile()&&(f=g.isFile()?g:g.join(k.name()),
Qf.isNode)){if(f.isHTTPResource)return l.return(k._copyTo_file_nodejs_http(f,c));if(f.isNodeJSFileResource)return l.return(k._copyTo_file_nodejs_fs(f,c))}return l.return(Qf.Resource.prototype.copyTo.call(k,g,c))})};zk.prototype._copyFrom_file_nodejs_fs=function(g,c){c=void 0===c?!0:c;var k=this,f,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return c?b.yield(k.parent().ensureExistance(),2):b.jumpTo(2);if(4!=b.nextAddress)return l=g._createReadStream(),l.on("error",
function(d){return f=d}),b.yield(Qf.makeRequest(k,"PUT",l),4);p=b.yieldResult;if(f)throw f;if(!p.ok&&k.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+p.statusText+" "+p.status);return b.return(k)})};zk.prototype._copyTo_file_nodejs_fs=function(g,c){c=void 0===c?!0:c;var k=this,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return c?p.yield(g.parent().ensureExistance(),2):p.jumpTo(2);if(4!=p.nextAddress)return p.yield(Qf.makeRequest(k,"GET"),4);f=
p.yieldResult;if(!f.ok&&k.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+f.statusText+" "+f.status);return p.return(new Promise(function(b,d){return f.body.pipe(g._createWriteStream()).on("error",function(h){return l=h}).on("finish",function(){return l?d(l):b(k)})}))})};zk.prototype._copyTo_file_nodejs_http=function(g,c){c=void 0===c?!0:c;var k=this,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:if(!c){p.jumpTo(2);break}return p.yield(g.parent().ensureExistance(),
2);case 2:return p.yield(Qf.makeRequest(k,"GET"),4);case 4:f=p.yieldResult;if(!f.ok&&k.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+f.statusText+" "+f.status);return p.yield(Qf.makeRequest(g,"PUT",f.body),5);case 5:l=p.yieldResult;if(!f.ok&&k.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot PUT: "+l.statusText+" "+l.status);p.jumpToEnd()}})};$jscomp.global.Object.defineProperties(zk.prototype,{isHTTPResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});Qf.WebDAVResource=
zk;var zI={name:"http-webdav-resource",matches:function(g){return g.startsWith("http:")||g.startsWith("https:")},resourceClass:Qf.WebDAVResource};Qf.resourceExtension=zI;Qf.resourceExtension=zI;Qf.resourceExtension=zI;Qf.default=zk;var ep=System.get("@system-env").node?require("fs"):{},ama=ep.readFile,bma=ep.writeFile,cma=ep.exists,dma=ep.readdir,ema=ep.mkdir,fma=ep.rmdir,gma=ep.unlink,hma=ep.lstat,ima=ep.rename,jma=ep.createWriteStream,kma=ep.createReadStream,nf=lively.FreezerRuntime.recorderFor("lively.resources/src/fs-resource.js");
nf.wrapInPromise=function(g){return function(c){for(var k=[],f=0;f<arguments.length;++f)k[f-0]=arguments[f];return new Promise(function(l,p){return g.apply(null,k.concat(function(b,d){return b?p(b):l(d)}))})}};nf.Resource=Uf;nf.applyExclude=gc;nf.windowsURLPrefixRe=rI;nf.windowsRootPathRe=tI;nf.createWriteStream=jma;nf.createReadStream=kma;nf.readFile=ama;nf.writeFile=bma;nf.exists=cma;nf.mkdir=ema;nf.rmdir=fma;nf.unlink=gma;nf.readdir=dma;nf.lstat=hma;nf.rename=ima;nf.readFileP=nf.wrapInPromise(nf.readFile);
nf.writeFileP=nf.wrapInPromise(nf.writeFile);nf.existsP=function(g){return new Promise(function(c,k){return nf.exists(g,function(f){return c(!!f)})})};nf.readdirP=nf.wrapInPromise(nf.readdir);nf.mkdirP=nf.wrapInPromise(nf.mkdir);nf.rmdirP=nf.wrapInPromise(nf.rmdir);nf.unlinkP=nf.wrapInPromise(nf.unlink);nf.lstatP=nf.wrapInPromise(nf.lstat);nf.renameP=nf.wrapInPromise(nf.rename);var sl=function(){return nf.Resource.apply(this,arguments)||this};$jscomp.inherits(sl,nf.Resource);sl.prototype.path=function(){return this.url.replace("file://",
"")};sl.prototype.stat=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return c.return(nf.lstatP(g.path()))})};sl.prototype.read=function(){var g=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){c=nf.readFileP(g.path());return k.return(g.binary?c:c.then(String))})};sl.prototype.write=function(g){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){if(c.isDirectory())throw Error("Cannot write into a directory: "+
c.path());return k.yield(nf.writeFileP(c.path(),g),2)}return k.return(c)})};sl.prototype.mkdir=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress){if(g.isFile())throw Error("Cannot mkdir on a file: "+g.path());return c.yield(nf.mkdirP(g.path()),2)}return c.return(g)})};sl.prototype.exists=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return c.return(g.isRoot()?!0:nf.existsP(g.path()))})};sl.prototype.dirList=
function(g,c){g=void 0===g?1:g;c=void 0===c?{}:c;var k=this,f,l,p,b,d,h,a,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if("number"!==typeof g&&"infinity"!==g)throw Error("dirList \u2013 invalid depth argument: "+g);f=c;l=f.exclude;0>=g&&(g=1);if(1!==g){y.jumpTo(2);break}p=[];b=$jscomp;d=b.makeIterator;return y.yield(nf.readdirP(k.path()),3);case 3:h=d.call(b,y.yieldResult),a=h.next();case 4:if(a.done){y.jumpTo(6);break}e=a.value;n=k.join(e);
return y.yield(n.stat(),7);case 7:q=y.yieldResult;n=q.isDirectory()?n.asDirectory():n;n._assignPropsFromStat(q);p.push(n);a=h.next();y.jumpTo(4);break;case 6:return l&&(p=nf.applyExclude(l,p)),y.return(p);case 2:return y.yield(k.dirList(1,c),8);case 8:return r=y.yieldResult,v=r.filter(function(D){return D.isDirectory()}),y.return(Promise.all(v.map(function(D){return D.dirList("number"===typeof g?g-1:g,c)})).then(function(D){return D.reduce(function(E,I){return E.concat(I)},r)}))}})};sl.prototype.isEmptyDirectory=
function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?c.yield(g.dirList(),2):c.return(0===c.yieldResult.length)})};sl.prototype.rename=function(g){var c=this,k,f,l,p,b,d,h,a,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(!(g instanceof c.constructor))return y.return(nf.Resource.prototype.rename.call(c,g));if(c.isFile()){g=g.asFile();nf.renameP(c.path(),g.path());y.jumpTo(2);break}g=g.asDirectory();
return y.yield(g.ensureExistance(),3);case 3:return k=[],f=[],l=$jscomp,p=l.makeIterator,y.yield(c.dirList("infinity"),4);case 4:b=p.call(l,y.yieldResult);for(d=b.next();!d.done;d=b.next())h=d.value,h.isDirectory()?f.push(h):k.push(h);a=$jscomp.makeIterator(f);e=a.next();case 5:if(e.done){y.jumpTo(7);break}n=e.value;return y.yield(g.join(n.relativePathFrom(c)).ensureExistance(),6);case 6:e=a.next();y.jumpTo(5);break;case 7:q=$jscomp.makeIterator(k),r=q.next();case 9:if(r.done)return y.yield(c.remove(),
2);v=r.value;return y.yield(v.rename(g.join(v.relativePathFrom(c))),10);case 10:r=q.next();y.jumpTo(9);break;case 2:return y.return(g)}})};sl.prototype.remove=function(){var g=this,c,k,f,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return b.yield(g.exists(),2);case 2:if(!b.yieldResult){b.jumpTo(3);break}return g.isDirectory()?(c=$jscomp,k=c.makeIterator,b.yield(g.dirList(),7)):b.yield(nf.unlinkP(g.path()),3);case 7:f=k.call(c,b.yieldResult),l=f.next();
case 8:if(l.done)return b.yield(nf.rmdirP(g.path()),3);p=l.value;return b.yield(p.remove(),9);case 9:l=f.next();b.jumpTo(8);break;case 3:return b.return(g)}})};sl.prototype.readProperties=function(){var g=this,c,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(c=g,k=c._assignPropsFromStat,f.yield(g.stat(),2)):f.return(k.call(c,f.yieldResult))})};sl.prototype.copyTo=function(g,c){c=void 0===c?!0:c;var k=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return k.isFile()&&
(f=g.isFile()?g:g.join(k.name()),f.isHTTPResource)?l.return(f._copyFrom_file_nodejs_fs(k,c=!0)):l.return(nf.Resource.prototype.copyTo.call(k,g,c))})};sl.prototype._assignPropsFromStat=function(g){return this.assignProperties({lastModified:g.mtime,created:g.ctime,size:g.size,type:g.isDirectory()?"directory":"file",isLink:g.isSymbolicLink()})};sl.prototype._createWriteStream=function(){return nf.createWriteStream(this.path())};sl.prototype._createReadStream=function(){return nf.createReadStream(this.path())};
$jscomp.global.Object.defineProperties(sl.prototype,{isNodeJSFileResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});nf.NodeJSFileResource=sl;var AB=function(g,c){"file:///"!==g.slice(0,8)&&"file://"===g.slice(0,7)&&(g="file:///"+g.slice(7));g.includes("\\")&&(g=g.replace(/\\/g,"/"));return nf.NodeJSFileResource.call(this,g,c)||this};$jscomp.inherits(AB,nf.NodeJSFileResource);AB.prototype.path=function(){return this.url.replace("file:///","")};AB.prototype.isRoot=function(){return!!this.path().match(nf.windowsRootPathRe)};
AB.prototype.root=function(){if(this.isRoot())return this;console.log(this.url);var g=this.url.match(nf.windowsURLPrefixRe);if(g)return this.newResource(g[0]);throw Error("Could not determine root path of windows file resource for url "+this.url);};nf.NodeJSWindowsFileResource=AB;var AI={name:"nodejs-file-resource",matches:function(g){return g.startsWith("file:")},resourceClass:"undefined"!==typeof nf.process&&"win32"===nf.process.platform?nf.NodeJSWindowsFileResource:nf.NodeJSFileResource};nf.resourceExtension=
AI;nf.resourceExtension=AI;nf.resourceExtension=AI;var Ej=lively.FreezerRuntime.recorderFor("lively.resources/src/local-resource.js");Ej.applyExclude=function(g,c){return c?"string"===typeof c?!g.url.includes(c):"function"===typeof c?!c(g):c instanceof RegExp?!c.test(g.url):!0:!0};Ej.Resource=Uf;Ej.createFiles=ce;Ej.debug=!1;Ej.slashRe=/\//g;var ho=function(g,c){c=void 0===c?{}:c;if(!g||"string"!==typeof g)throw Error("LocalResourceInMemoryBackend needs name!");this.name=g;this._filespec=c};ho.removeHost=
function(g){delete this.hosts[g]};ho.ensure=function(g,c){var k=this;c=void 0===c?{}:c;var f=this.named(c.host);return Promise.resolve().then(function(){return g?Ej.createFiles("local://"+f.name,g):null}).then(function(){return k})};ho.named=function(g){g||(g="default");return this.hosts[g]||(this.hosts[g]=new this(g))};ho.prototype.get=function(g){return this._filespec[g]};ho.prototype.set=function(g,c){this._filespec[g]=c};ho.prototype.write=function(g,c){var k=this._filespec[g];k||(k=this._filespec[g]=
{created:new Date});k.content=c;k.isDirectory=!1;k.lastModified=new Date};ho.prototype.read=function(g){return(g=this._filespec[g])&&g.content?g.content:""};ho.prototype.mkdir=function(g){var c=this._filespec[g];c&&c.isDirectory||(c||(c=this._filespec[g]={created:new Date}),c.content&&delete c.content,c.isDirectory=!0,c.lastModified=new Date)};ho.prototype.partialFilespec=function(g,c){g=void 0===g?"/":g;c=void 0===c?Infinity:c;for(var k={},f=this.filespec,l=Object.keys(f),p=0;p<l.length;p++){var b=
l[p];if(b.startsWith(g)&&g!==b){var d=b.slice(g.length);(d.includes("/")?d.match(Ej.slashRe).length+1:1)>c||(k[b]=f[b])}}return k};$jscomp.global.Object.defineProperties(ho.prototype,{filespec:{configurable:!0,enumerable:!0,get:function(){return this._filespec},set:function(g){this._filespec=g}}});$jscomp.global.Object.defineProperties(ho,{hosts:{configurable:!0,enumerable:!0,get:function(){return this._hosts||(this._hosts={})}}});Ej.LocalResourceInMemoryBackend=ho;var fp=function(){return Ej.Resource.apply(this,
arguments)||this};$jscomp.inherits(fp,Ej.Resource);fp.prototype.read=function(){return Promise.resolve(this.localBackend.read(this.path()))};fp.prototype.write=function(g){Ej.debug&&console.log("["+this+"] write");if(this.isDirectory())throw Error("Cannot write into a directory! ("+this.url+")");var c=this.localBackend.get(this.path());if(c&&c.isDirectory)throw Error(this.url+" already exists and is a directory (cannot write into it!)");this.localBackend.write(this.path(),g);return Promise.resolve(this)};
fp.prototype.mkdir=function(){Ej.debug&&console.log("["+this+"] mkdir");if(!this.isDirectory())throw Error("Cannot mkdir a file! ("+this.url+")");var g=this.localBackend.get(this.path());if(g&&g.isDirectory)return Promise.resolve(this);if(g&&!g.isDirectory)throw Error(this.url+" already exists and is a file (cannot mkdir it!)");this.localBackend.mkdir(this.path());return Promise.resolve(this)};fp.prototype.exists=function(){Ej.debug&&console.log("["+this+"] exists");return Promise.resolve(this.isRoot()||
this.path()in this.localBackend.filespec)};fp.prototype.remove=function(){var g=this;Ej.debug&&console.log("["+this+"] remove");var c=this.path();Object.keys(this.localBackend.filespec).forEach(function(k){return k.startsWith(c)&&delete g.localBackend.filespec[k]});return Promise.resolve(this)};fp.prototype.readProperties=function(){Ej.debug&&console.log("["+this+"] readProperties");throw Error("not yet implemented");};fp.prototype.dirList=function(g,c){g=void 0===g?1:g;c=void 0===c?{}:c;Ej.debug&&
console.log("["+this+"] dirList");if(!this.isDirectory())return this.asDirectory().dirList(g,c);c=c.exclude;var k=this.path(),f=[],l=Object.keys(this.localBackend.filespec);"infinity"===g&&(g=Infinity);for(var p={},b=0;b<l.length;p={$jscomp$loop$prop$dirToChild$2756:p.$jscomp$loop$prop$dirToChild$2756},b++){var d=l[b];d.startsWith(k)&&k!==d&&(d=d.slice(k.length),(d.includes("/")?d.match(Ej.slashRe).length+1:1)>g?(p.$jscomp$loop$prop$dirToChild$2756=this.join(d.split("/").slice(0,g).join("/")+"/"),
f.some(function(h){return function(a){return a.equals(h.$jscomp$loop$prop$dirToChild$2756)}}(p))||f.push(p.$jscomp$loop$prop$dirToChild$2756)):(d=this.join(d),c&&!Ej.applyExclude(d,c)||f.push(d)))}return Promise.resolve(f)};$jscomp.global.Object.defineProperties(fp.prototype,{localBackend:{configurable:!0,enumerable:!0,get:function(){return Ej.LocalResourceInMemoryBackend.named(this.host())}}});Ej.LocalResource=fp;var BI={name:"local-resource",matches:function(g){return g.startsWith("local:")},resourceClass:Ej.LocalResource};
Ej.resourceExtension=BI;Ej.resourceExtension=BI;Ej.resourceExtension=BI;Ej.default=fp;var Xg=lively.FreezerRuntime.recorderFor("lively.resources/index.js");Xg.createFileSpec=En;Xg.importModuleViaNative=au;Xg.loadViaScript=Nq;Xg.ensureFetch=bu;Xg.default=Uf;Xg.Resource=Uf;Xg.unregisterExtension=pe;Xg.registerExtension=Zd;Xg.parseQuery=Kb;Xg.extensions=fv;Xg.createFiles=ce;Xg.resource=Uc;Xg.httpResourceExtension=zI;Xg.fileResourceExtension=AI;Xg.localResourceExtension=BI;Xg.newUUID=mi;Xg.waitFor=Yr;
Xg.registerExtension(Xg.localResourceExtension);Xg.registerExtension(Xg.httpResourceExtension);Xg.registerExtension(Xg.fileResourceExtension);Xg.createFileSpec=En;Xg.createFileSpec=En;Xg.importModuleViaNative=au;Xg.importModuleViaNative=au;Xg.loadViaScript=Nq;Xg.loadViaScript=Nq;Xg.ensureFetch=bu;Xg.ensureFetch=bu;Xg.registerExtension=Zd;Xg.registerExtension=Zd;Xg.unregisterExtension=pe;Xg.unregisterExtension=pe;Xg.parseQuery=Kb;Xg.parseQuery=Kb;Xg.extensions=fv;Xg.extensions=fv;Xg.createFiles=ce;
Xg.createFiles=ce;Xg.resource=Uc;Xg.resource=Uc;var lma=Object.freeze({__proto__:null,Resource:Uf,createFileSpec:En,importModuleViaNative:au,loadViaScript:Nq,ensureFetch:bu,registerExtension:Zd,unregisterExtension:pe,parseQuery:Kb,extensions:fv,createFiles:ce,resource:Uc}),k8=lively.FreezerRuntime.recorderFor("lively.ast/generated/estree-visitor.js"),de=function(){};de.prototype.accept=function(g,c,k){if(!g)throw Error("Undefined AST node in Visitor.accept:\n  "+k.join(".")+"\n  "+g);if(!g.type)throw Error("Strangee AST node without type in Visitor.accept:\n  "+
k.join(".")+"\n  "+JSON.stringify(g));switch(g.type){case "Node":return this.visitNode(g,c,k);case "SourceLocation":return this.visitSourceLocation(g,c,k);case "Position":return this.visitPosition(g,c,k);case "Program":return this.visitProgram(g,c,k);case "Function":return this.visitFunction(g,c,k);case "Statement":return this.visitStatement(g,c,k);case "Directive":return this.visitDirective(g,c,k);case "SwitchCase":return this.visitSwitchCase(g,c,k);case "CatchClause":return this.visitCatchClause(g,
c,k);case "VariableDeclarator":return this.visitVariableDeclarator(g,c,k);case "Expression":return this.visitExpression(g,c,k);case "Property":return this.visitProperty(g,c,k);case "Pattern":return this.visitPattern(g,c,k);case "Super":return this.visitSuper(g,c,k);case "SpreadElement":return this.visitSpreadElement(g,c,k);case "TemplateElement":return this.visitTemplateElement(g,c,k);case "Class":return this.visitClass(g,c,k);case "ClassBody":return this.visitClassBody(g,c,k);case "MethodDefinition":return this.visitMethodDefinition(g,
c,k);case "ModuleDeclaration":return this.visitModuleDeclaration(g,c,k);case "ModuleSpecifier":return this.visitModuleSpecifier(g,c,k);case "JSXEmptyExpression":return this.visitJSXEmptyExpression(g,c,k);case "JSXExpressionContainer":return this.visitJSXExpressionContainer(g,c,k);case "JSXSpreadChild":return this.visitJSXSpreadChild(g,c,k);case "JSXBoundaryElement":return this.visitJSXBoundaryElement(g,c,k);case "JSXAttribute":return this.visitJSXAttribute(g,c,k);case "JSXText":return this.visitJSXText(g,
c,k);case "JSXOpeningFragment":return this.visitJSXOpeningFragment(g,c,k);case "JSXClosingFragment":return this.visitJSXClosingFragment(g,c,k);case "Identifier":return this.visitIdentifier(g,c,k);case "Literal":return this.visitLiteral(g,c,k);case "ExpressionStatement":return this.visitExpressionStatement(g,c,k);case "BlockStatement":return this.visitBlockStatement(g,c,k);case "EmptyStatement":return this.visitEmptyStatement(g,c,k);case "DebuggerStatement":return this.visitDebuggerStatement(g,c,k);
case "WithStatement":return this.visitWithStatement(g,c,k);case "ReturnStatement":return this.visitReturnStatement(g,c,k);case "LabeledStatement":return this.visitLabeledStatement(g,c,k);case "BreakStatement":return this.visitBreakStatement(g,c,k);case "ContinueStatement":return this.visitContinueStatement(g,c,k);case "IfStatement":return this.visitIfStatement(g,c,k);case "SwitchStatement":return this.visitSwitchStatement(g,c,k);case "ThrowStatement":return this.visitThrowStatement(g,c,k);case "TryStatement":return this.visitTryStatement(g,
c,k);case "WhileStatement":return this.visitWhileStatement(g,c,k);case "DoWhileStatement":return this.visitDoWhileStatement(g,c,k);case "ForStatement":return this.visitForStatement(g,c,k);case "ForInStatement":return this.visitForInStatement(g,c,k);case "Declaration":return this.visitDeclaration(g,c,k);case "ThisExpression":return this.visitThisExpression(g,c,k);case "ArrayExpression":return this.visitArrayExpression(g,c,k);case "ObjectExpression":return this.visitObjectExpression(g,c,k);case "FunctionExpression":return this.visitFunctionExpression(g,
c,k);case "UnaryExpression":return this.visitUnaryExpression(g,c,k);case "UpdateExpression":return this.visitUpdateExpression(g,c,k);case "BinaryExpression":return this.visitBinaryExpression(g,c,k);case "AssignmentExpression":return this.visitAssignmentExpression(g,c,k);case "LogicalExpression":return this.visitLogicalExpression(g,c,k);case "MemberExpression":return this.visitMemberExpression(g,c,k);case "ConditionalExpression":return this.visitConditionalExpression(g,c,k);case "CallExpression":return this.visitCallExpression(g,
c,k);case "NewExpression":return this.visitNewExpression(g,c,k);case "SequenceExpression":return this.visitSequenceExpression(g,c,k);case "ArrowFunctionExpression":return this.visitArrowFunctionExpression(g,c,k);case "YieldExpression":return this.visitYieldExpression(g,c,k);case "TemplateLiteral":return this.visitTemplateLiteral(g,c,k);case "TaggedTemplateExpression":return this.visitTaggedTemplateExpression(g,c,k);case "AssignmentProperty":return this.visitAssignmentProperty(g,c,k);case "ObjectPattern":return this.visitObjectPattern(g,
c,k);case "ArrayPattern":return this.visitArrayPattern(g,c,k);case "RestElement":return this.visitRestElement(g,c,k);case "AssignmentPattern":return this.visitAssignmentPattern(g,c,k);case "ClassExpression":return this.visitClassExpression(g,c,k);case "MetaProperty":return this.visitMetaProperty(g,c,k);case "ImportDeclaration":return this.visitImportDeclaration(g,c,k);case "ImportSpecifier":return this.visitImportSpecifier(g,c,k);case "ImportDefaultSpecifier":return this.visitImportDefaultSpecifier(g,
c,k);case "ImportNamespaceSpecifier":return this.visitImportNamespaceSpecifier(g,c,k);case "ExportNamedDeclaration":return this.visitExportNamedDeclaration(g,c,k);case "ExportSpecifier":return this.visitExportSpecifier(g,c,k);case "AnonymousDefaultExportedFunctionDeclaration":return this.visitAnonymousDefaultExportedFunctionDeclaration(g,c,k);case "AnonymousDefaultExportedClassDeclaration":return this.visitAnonymousDefaultExportedClassDeclaration(g,c,k);case "ExportDefaultDeclaration":return this.visitExportDefaultDeclaration(g,
c,k);case "ExportAllDeclaration":return this.visitExportAllDeclaration(g,c,k);case "AwaitExpression":return this.visitAwaitExpression(g,c,k);case "JSXMemberExpression":return this.visitJSXMemberExpression(g,c,k);case "JSXNamespacedName":return this.visitJSXNamespacedName(g,c,k);case "JSXOpeningElement":return this.visitJSXOpeningElement(g,c,k);case "JSXClosingElement":return this.visitJSXClosingElement(g,c,k);case "JSXSpreadAttribute":return this.visitJSXSpreadAttribute(g,c,k);case "JSXElement":return this.visitJSXElement(g,
c,k);case "JSXFragment":return this.visitJSXFragment(g,c,k);case "ImportExpression":return this.visitImportExpression(g,c,k);case "RegExpLiteral":return this.visitRegExpLiteral(g,c,k);case "FunctionBody":return this.visitFunctionBody(g,c,k);case "FunctionDeclaration":return this.visitFunctionDeclaration(g,c,k);case "VariableDeclaration":return this.visitVariableDeclaration(g,c,k);case "ForOfStatement":return this.visitForOfStatement(g,c,k);case "ClassDeclaration":return this.visitClassDeclaration(g,
c,k);case "JSXIdentifier":return this.visitJSXIdentifier(g,c,k);case "BigIntLiteral":return this.visitBigIntLiteral(g,c,k)}throw Error("No visit function in AST visitor Visitor for:\n  "+k.join(".")+"\n  "+JSON.stringify(g));};de.prototype.visitNode=function(g,c,k){return g};de.prototype.visitSourceLocation=function(g,c,k){g.start=this.accept(g.start,c,k.concat(["start"]));g.end=this.accept(g.end,c,k.concat(["end"]));return g};de.prototype.visitPosition=function(g,c,k){return g};de.prototype.visitProgram=
function(g,c,k){for(var f=[],l=0;l<g.body.length;l++){var p=g.body[l];p=p?this.accept(p,c,k.concat(["body",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.body=f;return g};de.prototype.visitFunction=function(g,c,k){g.id&&(g.id=this.accept(g.id,c,k.concat(["id"])));for(var f=[],l=0;l<g.params.length;l++){var p=g.params[l];p=p?this.accept(p,c,k.concat(["params",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.params=f;g.body=this.accept(g.body,c,k.concat(["body"]));return g};de.prototype.visitStatement=
function(g,c,k){return g};de.prototype.visitDirective=function(g,c,k){g.expression=this.accept(g.expression,c,k.concat(["expression"]));return g};de.prototype.visitSwitchCase=function(g,c,k){g.test&&(g.test=this.accept(g.test,c,k.concat(["test"])));for(var f=[],l=0;l<g.consequent.length;l++){var p=g.consequent[l];p=p?this.accept(p,c,k.concat(["consequent",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.consequent=f;return g};de.prototype.visitCatchClause=function(g,c,k){g.param&&(g.param=this.accept(g.param,
c,k.concat(["param"])));g.body=this.accept(g.body,c,k.concat(["body"]));return g};de.prototype.visitVariableDeclarator=function(g,c,k){g.id=this.accept(g.id,c,k.concat(["id"]));g.init&&(g.init=this.accept(g.init,c,k.concat(["init"])));return g};de.prototype.visitExpression=function(g,c,k){return g};de.prototype.visitProperty=function(g,c,k){g.key=this.accept(g.key,c,k.concat(["key"]));g.value=this.accept(g.value,c,k.concat(["value"]));return g};de.prototype.visitPattern=function(g,c,k){return g};
de.prototype.visitSuper=function(g,c,k){return g};de.prototype.visitSpreadElement=function(g,c,k){g.argument=this.accept(g.argument,c,k.concat(["argument"]));return g};de.prototype.visitTemplateElement=function(g,c,k){return g};de.prototype.visitClass=function(g,c,k){g.id&&(g.id=this.accept(g.id,c,k.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,c,k.concat(["superClass"])));g.body=this.accept(g.body,c,k.concat(["body"]));return g};de.prototype.visitClassBody=function(g,c,k){for(var f=
[],l=0;l<g.body.length;l++){var p=g.body[l];p=p?this.accept(p,c,k.concat(["body",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.body=f;return g};de.prototype.visitMethodDefinition=function(g,c,k){g.key=this.accept(g.key,c,k.concat(["key"]));g.value=this.accept(g.value,c,k.concat(["value"]));return g};de.prototype.visitModuleDeclaration=function(g,c,k){return g};de.prototype.visitModuleSpecifier=function(g,c,k){g.local=this.accept(g.local,c,k.concat(["local"]));return g};de.prototype.visitJSXEmptyExpression=
function(g,c,k){return g};de.prototype.visitJSXExpressionContainer=function(g,c,k){g.expression=this.accept(g.expression,c,k.concat(["expression"]));return g};de.prototype.visitJSXSpreadChild=function(g,c,k){g.expression=this.accept(g.expression,c,k.concat(["expression"]));return g};de.prototype.visitJSXBoundaryElement=function(g,c,k){g.name=this.accept(g.name,c,k.concat(["name"]));return g};de.prototype.visitJSXAttribute=function(g,c,k){g.name=this.accept(g.name,c,k.concat(["name"]));g.value&&(g.value=
this.accept(g.value,c,k.concat(["value"])));return g};de.prototype.visitJSXText=function(g,c,k){return g};de.prototype.visitJSXOpeningFragment=function(g,c,k){return g};de.prototype.visitJSXClosingFragment=function(g,c,k){return g};de.prototype.visitIdentifier=function(g,c,k){return g};de.prototype.visitLiteral=function(g,c,k){return g};de.prototype.visitExpressionStatement=function(g,c,k){g.expression=this.accept(g.expression,c,k.concat(["expression"]));return g};de.prototype.visitBlockStatement=
function(g,c,k){for(var f=[],l=0;l<g.body.length;l++){var p=g.body[l];p=p?this.accept(p,c,k.concat(["body",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.body=f;return g};de.prototype.visitEmptyStatement=function(g,c,k){return g};de.prototype.visitDebuggerStatement=function(g,c,k){return g};de.prototype.visitWithStatement=function(g,c,k){g.object=this.accept(g.object,c,k.concat(["object"]));g.body=this.accept(g.body,c,k.concat(["body"]));return g};de.prototype.visitReturnStatement=function(g,
c,k){g.argument&&(g.argument=this.accept(g.argument,c,k.concat(["argument"])));return g};de.prototype.visitLabeledStatement=function(g,c,k){g.label=this.accept(g.label,c,k.concat(["label"]));g.body=this.accept(g.body,c,k.concat(["body"]));return g};de.prototype.visitBreakStatement=function(g,c,k){g.label&&(g.label=this.accept(g.label,c,k.concat(["label"])));return g};de.prototype.visitContinueStatement=function(g,c,k){g.label&&(g.label=this.accept(g.label,c,k.concat(["label"])));return g};de.prototype.visitIfStatement=
function(g,c,k){g.test=this.accept(g.test,c,k.concat(["test"]));g.consequent=this.accept(g.consequent,c,k.concat(["consequent"]));g.alternate&&(g.alternate=this.accept(g.alternate,c,k.concat(["alternate"])));return g};de.prototype.visitSwitchStatement=function(g,c,k){g.discriminant=this.accept(g.discriminant,c,k.concat(["discriminant"]));for(var f=[],l=0;l<g.cases.length;l++){var p=g.cases[l];p=p?this.accept(p,c,k.concat(["cases",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.cases=f;return g};
de.prototype.visitThrowStatement=function(g,c,k){g.argument=this.accept(g.argument,c,k.concat(["argument"]));return g};de.prototype.visitTryStatement=function(g,c,k){g.block=this.accept(g.block,c,k.concat(["block"]));g.handler&&(g.handler=this.accept(g.handler,c,k.concat(["handler"])));g.finalizer&&(g.finalizer=this.accept(g.finalizer,c,k.concat(["finalizer"])));return g};de.prototype.visitWhileStatement=function(g,c,k){g.test=this.accept(g.test,c,k.concat(["test"]));g.body=this.accept(g.body,c,k.concat(["body"]));
return g};de.prototype.visitDoWhileStatement=function(g,c,k){g.body=this.accept(g.body,c,k.concat(["body"]));g.test=this.accept(g.test,c,k.concat(["test"]));return g};de.prototype.visitForStatement=function(g,c,k){g.init&&(g.init=this.accept(g.init,c,k.concat(["init"])));g.test&&(g.test=this.accept(g.test,c,k.concat(["test"])));g.update&&(g.update=this.accept(g.update,c,k.concat(["update"])));g.body=this.accept(g.body,c,k.concat(["body"]));return g};de.prototype.visitForInStatement=function(g,c,k){g.left=
this.accept(g.left,c,k.concat(["left"]));g.right=this.accept(g.right,c,k.concat(["right"]));g.body=this.accept(g.body,c,k.concat(["body"]));return g};de.prototype.visitDeclaration=function(g,c,k){return g};de.prototype.visitThisExpression=function(g,c,k){return g};de.prototype.visitArrayExpression=function(g,c,k){if(g.elements){for(var f=[],l=0;l<g.elements.length;l++){var p=g.elements[l];p=p?this.accept(p,c,k.concat(["elements",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.elements=f}return g};
de.prototype.visitObjectExpression=function(g,c,k){for(var f=[],l=0;l<g.properties.length;l++){var p=g.properties[l];p=p?this.accept(p,c,k.concat(["properties",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.properties=f;return g};de.prototype.visitFunctionExpression=function(g,c,k){g.id&&(g.id=this.accept(g.id,c,k.concat(["id"])));for(var f=[],l=0;l<g.params.length;l++){var p=g.params[l];p=p?this.accept(p,c,k.concat(["params",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.params=f;g.body=
this.accept(g.body,c,k.concat(["body"]));return g};de.prototype.visitUnaryExpression=function(g,c,k){g.argument=this.accept(g.argument,c,k.concat(["argument"]));return g};de.prototype.visitUpdateExpression=function(g,c,k){g.argument=this.accept(g.argument,c,k.concat(["argument"]));return g};de.prototype.visitBinaryExpression=function(g,c,k){g.left=this.accept(g.left,c,k.concat(["left"]));g.right=this.accept(g.right,c,k.concat(["right"]));return g};de.prototype.visitAssignmentExpression=function(g,
c,k){g.left=this.accept(g.left,c,k.concat(["left"]));g.right=this.accept(g.right,c,k.concat(["right"]));return g};de.prototype.visitLogicalExpression=function(g,c,k){g.left=this.accept(g.left,c,k.concat(["left"]));g.right=this.accept(g.right,c,k.concat(["right"]));return g};de.prototype.visitMemberExpression=function(g,c,k){g.object=this.accept(g.object,c,k.concat(["object"]));g.property=this.accept(g.property,c,k.concat(["property"]));return g};de.prototype.visitConditionalExpression=function(g,
c,k){g.test=this.accept(g.test,c,k.concat(["test"]));g.alternate=this.accept(g.alternate,c,k.concat(["alternate"]));g.consequent=this.accept(g.consequent,c,k.concat(["consequent"]));return g};de.prototype.visitCallExpression=function(g,c,k){g.callee=this.accept(g.callee,c,k.concat(["callee"]));for(var f=[],l=0;l<g.arguments.length;l++){var p=g.arguments[l];p=p?this.accept(p,c,k.concat(["arguments",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.arguments=f;return g};de.prototype.visitNewExpression=
function(g,c,k){g.callee=this.accept(g.callee,c,k.concat(["callee"]));for(var f=[],l=0;l<g.arguments.length;l++){var p=g.arguments[l];p=p?this.accept(p,c,k.concat(["arguments",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.arguments=f;return g};de.prototype.visitSequenceExpression=function(g,c,k){for(var f=[],l=0;l<g.expressions.length;l++){var p=g.expressions[l];p=p?this.accept(p,c,k.concat(["expressions",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.expressions=f;return g};de.prototype.visitArrowFunctionExpression=
function(g,c,k){g.body=this.accept(g.body,c,k.concat(["body"]));g.id&&(g.id=this.accept(g.id,c,k.concat(["id"])));for(var f=[],l=0;l<g.params.length;l++){var p=g.params[l];p=p?this.accept(p,c,k.concat(["params",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.params=f;return g};de.prototype.visitYieldExpression=function(g,c,k){g.argument&&(g.argument=this.accept(g.argument,c,k.concat(["argument"])));return g};de.prototype.visitTemplateLiteral=function(g,c,k){for(var f=[],l=0;l<g.quasis.length;l++){var p=
g.quasis[l];p=p?this.accept(p,c,k.concat(["quasis",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.quasis=f;f=[];for(l=0;l<g.expressions.length;l++)p=(p=g.expressions[l])?this.accept(p,c,k.concat(["expressions",l])):p,Array.isArray(p)?f.push.apply(f,p):f.push(p);g.expressions=f;return g};de.prototype.visitTaggedTemplateExpression=function(g,c,k){g.tag=this.accept(g.tag,c,k.concat(["tag"]));g.quasi=this.accept(g.quasi,c,k.concat(["quasi"]));return g};de.prototype.visitAssignmentProperty=function(g,
c,k){g.value=this.accept(g.value,c,k.concat(["value"]));g.key=this.accept(g.key,c,k.concat(["key"]));return g};de.prototype.visitObjectPattern=function(g,c,k){for(var f=[],l=0;l<g.properties.length;l++){var p=g.properties[l];p=p?this.accept(p,c,k.concat(["properties",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.properties=f;return g};de.prototype.visitArrayPattern=function(g,c,k){if(g.elements){for(var f=[],l=0;l<g.elements.length;l++){var p=g.elements[l];p=p?this.accept(p,c,k.concat(["elements",
l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.elements=f}return g};de.prototype.visitRestElement=function(g,c,k){g.argument=this.accept(g.argument,c,k.concat(["argument"]));return g};de.prototype.visitAssignmentPattern=function(g,c,k){g.left=this.accept(g.left,c,k.concat(["left"]));g.right=this.accept(g.right,c,k.concat(["right"]));return g};de.prototype.visitClassExpression=function(g,c,k){g.id&&(g.id=this.accept(g.id,c,k.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,
c,k.concat(["superClass"])));g.body=this.accept(g.body,c,k.concat(["body"]));return g};de.prototype.visitMetaProperty=function(g,c,k){g.meta=this.accept(g.meta,c,k.concat(["meta"]));g.property=this.accept(g.property,c,k.concat(["property"]));return g};de.prototype.visitImportDeclaration=function(g,c,k){for(var f=[],l=0;l<g.specifiers.length;l++){var p=g.specifiers[l];p=p?this.accept(p,c,k.concat(["specifiers",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.specifiers=f;g.source=this.accept(g.source,
c,k.concat(["source"]));return g};de.prototype.visitImportSpecifier=function(g,c,k){g.imported=this.accept(g.imported,c,k.concat(["imported"]));g.local=this.accept(g.local,c,k.concat(["local"]));return g};de.prototype.visitImportDefaultSpecifier=function(g,c,k){g.local=this.accept(g.local,c,k.concat(["local"]));return g};de.prototype.visitImportNamespaceSpecifier=function(g,c,k){g.local=this.accept(g.local,c,k.concat(["local"]));return g};de.prototype.visitExportNamedDeclaration=function(g,c,k){g.declaration&&
(g.declaration=this.accept(g.declaration,c,k.concat(["declaration"])));for(var f=[],l=0;l<g.specifiers.length;l++){var p=g.specifiers[l];p=p?this.accept(p,c,k.concat(["specifiers",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.specifiers=f;g.source&&(g.source=this.accept(g.source,c,k.concat(["source"])));return g};de.prototype.visitExportSpecifier=function(g,c,k){g.exported=this.accept(g.exported,c,k.concat(["exported"]));g.local=this.accept(g.local,c,k.concat(["local"]));return g};de.prototype.visitAnonymousDefaultExportedFunctionDeclaration=
function(g,c,k){g.id&&(g.id=this.accept(g.id,c,k.concat(["id"])));for(var f=[],l=0;l<g.params.length;l++){var p=g.params[l];p=p?this.accept(p,c,k.concat(["params",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.params=f;g.body=this.accept(g.body,c,k.concat(["body"]));return g};de.prototype.visitAnonymousDefaultExportedClassDeclaration=function(g,c,k){g.id&&(g.id=this.accept(g.id,c,k.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,c,k.concat(["superClass"])));g.body=this.accept(g.body,
c,k.concat(["body"]));return g};de.prototype.visitExportDefaultDeclaration=function(g,c,k){g.declaration=this.accept(g.declaration,c,k.concat(["declaration"]));return g};de.prototype.visitExportAllDeclaration=function(g,c,k){g.source=this.accept(g.source,c,k.concat(["source"]));return g};de.prototype.visitAwaitExpression=function(g,c,k){g.argument=this.accept(g.argument,c,k.concat(["argument"]));return g};de.prototype.visitJSXMemberExpression=function(g,c,k){g.object=this.accept(g.object,c,k.concat(["object"]));
g.property=this.accept(g.property,c,k.concat(["property"]));return g};de.prototype.visitJSXNamespacedName=function(g,c,k){g.namespace=this.accept(g.namespace,c,k.concat(["namespace"]));g.name=this.accept(g.name,c,k.concat(["name"]));return g};de.prototype.visitJSXOpeningElement=function(g,c,k){for(var f=[],l=0;l<g.attributes.length;l++){var p=g.attributes[l];p=p?this.accept(p,c,k.concat(["attributes",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.attributes=f;g.name=this.accept(g.name,c,k.concat(["name"]));
return g};de.prototype.visitJSXClosingElement=function(g,c,k){g.name=this.accept(g.name,c,k.concat(["name"]));return g};de.prototype.visitJSXSpreadAttribute=function(g,c,k){g.argument=this.accept(g.argument,c,k.concat(["argument"]));return g};de.prototype.visitJSXElement=function(g,c,k){g.openingElement=this.accept(g.openingElement,c,k.concat(["openingElement"]));for(var f=[],l=0;l<g.children.length;l++){var p=g.children[l];p=p?this.accept(p,c,k.concat(["children",l])):p;Array.isArray(p)?f.push.apply(f,
p):f.push(p)}g.children=f;g.closingElement&&(g.closingElement=this.accept(g.closingElement,c,k.concat(["closingElement"])));return g};de.prototype.visitJSXFragment=function(g,c,k){g.openingFragment=this.accept(g.openingFragment,c,k.concat(["openingFragment"]));for(var f=[],l=0;l<g.children.length;l++){var p=g.children[l];p=p?this.accept(p,c,k.concat(["children",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.children=f;g.closingFragment=this.accept(g.closingFragment,c,k.concat(["closingFragment"]));
return g};de.prototype.visitImportExpression=function(g,c,k){g.source=this.accept(g.source,c,k.concat(["source"]));return g};de.prototype.visitRegExpLiteral=function(g,c,k){return g};de.prototype.visitFunctionBody=function(g,c,k){for(var f=[],l=0;l<g.body.length;l++){var p=g.body[l];p=p?this.accept(p,c,k.concat(["body",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.body=f;return g};de.prototype.visitFunctionDeclaration=function(g,c,k){g.id&&(g.id=this.accept(g.id,c,k.concat(["id"])));for(var f=
[],l=0;l<g.params.length;l++){var p=g.params[l];p=p?this.accept(p,c,k.concat(["params",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.params=f;g.body=this.accept(g.body,c,k.concat(["body"]));return g};de.prototype.visitVariableDeclaration=function(g,c,k){for(var f=[],l=0;l<g.declarations.length;l++){var p=g.declarations[l];p=p?this.accept(p,c,k.concat(["declarations",l])):p;Array.isArray(p)?f.push.apply(f,p):f.push(p)}g.declarations=f;return g};de.prototype.visitForOfStatement=function(g,c,
k){g.left=this.accept(g.left,c,k.concat(["left"]));g.right=this.accept(g.right,c,k.concat(["right"]));g.body=this.accept(g.body,c,k.concat(["body"]));return g};de.prototype.visitClassDeclaration=function(g,c,k){g.id=this.accept(g.id,c,k.concat(["id"]));g.superClass&&(g.superClass=this.accept(g.superClass,c,k.concat(["superClass"])));g.body=this.accept(g.body,c,k.concat(["body"]));return g};de.prototype.visitJSXIdentifier=function(g,c,k){return g};de.prototype.visitBigIntLiteral=function(g,c,k){return g};
Ka("bL",de);k8.Visitor=de;k8.default=de;var Tg=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitors.js");Tg.obj=xf;Tg.Path=Eg;Tg.Visitor=de;var qy=function(){return Tg.Visitor.apply(this,arguments)||this};$jscomp.inherits(qy,Tg.Visitor);qy.prototype.accept=function(g,c,k){var f=k.map(function(p){return"string"===typeof p?"."+p:"["+p+"]"}).join(""),l=[];k=Tg.Visitor.prototype.accept.call(this,g,{index:c.index,tree:l},k);c.tree.push({node:g,path:f,index:c.index++,children:l});return k};
Tg.PrinterVisitor=qy;var wj=function(){return Tg.Visitor.apply(this,arguments)||this};$jscomp.inherits(wj,Tg.Visitor);wj.prototype.recordNotEqual=function(g,c,k,f){k.comparisons.errors.push({node1:g,node2:c,path:k.completePath,msg:f})};wj.prototype.compareType=function(g,c,k){return this.compareField("type",g,c,k)};wj.prototype.compareField=function(g,c,k,f){k=Tg.Path(f.completePath.join(".")).get(k);if(c&&k&&c[g]===k[g]||c&&"*"===c[g]||k&&"*"===k[g])return!0;var l=f.completePath.join(".")+"."+g;
this.recordNotEqual(c,k,f,c?k?l+" is not equal: "+c[g]+" vs. "+k[g]:"node2 not defined but node1 ("+l+") is: "+c[g]:"node1 on "+l+" not defined");return!1};wj.prototype.accept=function(g,c,k,f){var l=Tg.Path(f.join(".")).get(c);if("*"!==g&&"*"!==l&&(k={completePath:f,comparisons:k.comparisons},this.compareType(g,c,k)))this["visit"+g.type](g,c,k,f)};wj.prototype.visitFunction=function(g,c,k,f){g.generator&&this.compareField("generator",g,c,k);g.expression&&this.compareField("expression",g,c,k);return Tg.Visitor.prototype.visitFunction.call(this,
g,c,k,f)};wj.prototype.visitSwitchStatement=function(g,c,k,f){g.lexical&&this.compareField("lexical",g,c,k);return Tg.Visitor.prototype.visitSwitchStatement.call(this,g,c,k,f)};wj.prototype.visitForInStatement=function(g,c,k,f){g.each&&this.compareField("each",g,c,k);return Tg.Visitor.prototype.visitForInStatement.call(this,g,c,k,f)};wj.prototype.visitFunctionDeclaration=function(g,c,k,f){g.generator&&this.compareField("generator",g,c,k);g.expression&&this.compareField("expression",g,c,k);return Tg.Visitor.prototype.visitFunctionDeclaration.call(this,
g,c,k,f)};wj.prototype.visitVariableDeclaration=function(g,c,k,f){this.compareField("kind",g,c,k);return Tg.Visitor.prototype.visitVariableDeclaration.call(this,g,c,k,f)};wj.prototype.visitUnaryExpression=function(g,c,k,f){this.compareField("operator",g,c,k);g.prefix&&this.compareField("prefix",g,c,k);return Tg.Visitor.prototype.visitUnaryExpression.call(this,g,c,k,f)};wj.prototype.visitBinaryExpression=function(g,c,k,f){this.compareField("operator",g,c,k);return Tg.Visitor.prototype.visitBinaryExpression.call(this,
g,c,k,f)};wj.prototype.visitAssignmentExpression=function(g,c,k,f){this.compareField("operator",g,c,k);return Tg.Visitor.prototype.visitAssignmentExpression.call(this,g,c,k,f)};wj.prototype.visitUpdateExpression=function(g,c,k,f){this.compareField("operator",g,c,k);g.prefix&&this.compareField("prefix",g,c,k);return Tg.Visitor.prototype.visitUpdateExpression.call(this,g,c,k,f)};wj.prototype.visitLogicalExpression=function(g,c,k,f){this.compareField("operator",g,c,k);return Tg.Visitor.prototype.visitLogicalExpression.call(this,
g,c,k,f)};wj.prototype.visitMemberExpression=function(g,c,k,f){g.computed&&this.compareField("computed",g,c,k);return Tg.Visitor.prototype.visitMemberExpression.call(this,g,c,k,f)};wj.prototype.visitComprehensionBlock=function(g,c,k,f){g.each&&this.compareField("each",g,c,k);return Tg.Visitor.prototype.visitComprehensionBlock.call(this,g,c,k,f)};wj.prototype.visitIdentifier=function(g,c,k,f){this.compareField("name",g,c,k);return Tg.Visitor.prototype.visitIdentifier.call(this,g,c,k,f)};wj.prototype.visitLiteral=
function(g,c,k,f){this.compareField("value",g,c,k);return Tg.Visitor.prototype.visitLiteral.call(this,g,c,k,f)};wj.prototype.visitClassDeclaration=function(g,c,k,f){this.compareField("id",g,c,k);g.superClass&&this.compareField("superClass",g,c,k);this.compareField("body",g,c,k);return Tg.Visitor.prototype.visitClassDeclaration.call(this,g,c,k,f)};wj.prototype.visitClassBody=function(g,c,k,f){this.compareField("body",g,c,k);return Tg.Visitor.prototype.visitClassBody.call(this,g,c,k,f)};wj.prototype.visitMethodDefinition=
function(g,c,k,f){this.compareField("static",g,c,k);this.compareField("computed",g,c,k);this.compareField("kind",g,c,k);this.compareField("key",g,c,k);this.compareField("value",g,c,k);return Tg.Visitor.prototype.visitMethodDefinition.call(this,g,c,k,f)};Tg.ComparisonVisitor=wj;var Mi=function(){return Tg.Visitor.apply(this,arguments)||this};$jscomp.inherits(Mi,Tg.Visitor);Mi.prototype.newScope=function(g,c){g={node:g,varDecls:[],varDeclPaths:[],funcDecls:[],funcDeclPaths:[],classDecls:[],classDeclPaths:[],
classExprs:[],classExprPaths:[],methodDecls:[],methodDeclPaths:[],importSpecifiers:[],importSpecifierPaths:[],exportDecls:[],exportDeclPaths:[],refs:[],thisRefs:[],params:[],catches:[],subScopes:[],resolvedRefMap:new Map};c&&c.subScopes.push(g);return g};Mi.prototype.visitVariableDeclaration=function(g,c,k){c.varDecls.push(g);c.varDeclPaths.push(k);return Tg.Visitor.prototype.visitVariableDeclaration.call(this,g,c,k)};Mi.prototype.visitVariableDeclarator=function(g,c,k){g.init&&(g.init=this.accept(g.init,
c,k.concat(["init"])));return g};Mi.prototype.visitFunction=function(g,c,k){var f=this,l=this.newScope(g,c);g.params.forEach(function(p,b){"AssignmentPattern"===p.type&&f.accept(p.right,l,k.concat("params",b,"right"))});l.params=Array.prototype.slice.call(g.params);return l};Mi.prototype.visitFunctionDeclaration=function(g,c,k){var f=this.visitFunction(g,c,k);c.funcDecls.push(g);c.funcDeclPaths.push(k);var l=this;g.defaults&&(g.defaults=g.defaults.reduce(function(p,b,d){b=l.accept(b,f,k.concat(["defaults",
d]));Array.isArray(b)?p.push.apply(p,b):p.push(b);return p},[]));g.rest&&(g.rest=l.accept(g.rest,f,k.concat(["rest"])));g.body=l.accept(g.body,f,k.concat(["body"]));g.loc&&(g.loc=l.accept(g.loc,f,k.concat(["loc"])));return g};Mi.prototype.visitFunctionExpression=function(g,c,k){var f=this.visitFunction(g,c,k),l=this;g.defaults&&(g.defaults=g.defaults.reduce(function(p,b,d){b=l.accept(b,f,k.concat(["defaults",d]));Array.isArray(b)?p.push.apply(p,b):p.push(b);return p},[]));g.rest&&(g.rest=l.accept(g.rest,
f,k.concat(["rest"])));g.body=l.accept(g.body,f,k.concat(["body"]));g.loc&&(g.loc=l.accept(g.loc,f,k.concat(["loc"])));return g};Mi.prototype.visitArrowFunctionExpression=function(g,c,k){var f=this.visitFunction(g,c,k),l=this;g.defaults&&(g.defaults=g.defaults.reduce(function(p,b,d){b=l.accept(b,f,k.concat(["defaults",d]));Array.isArray(b)?p.push.apply(p,b):p.push(b);return p},[]));g.rest&&(g.rest=l.accept(g.rest,f,k.concat(["rest"])));g.body=l.accept(g.body,f,k.concat(["body"]));g.loc&&(g.loc=l.accept(g.loc,
f,k.concat(["loc"])));return g};Mi.prototype.visitIdentifier=function(g,c,k){c.refs.push(g);return Tg.Visitor.prototype.visitIdentifier.call(this,g,c,k)};Mi.prototype.visitMemberExpression=function(g,c,k){g.object=this.accept(g.object,c,k.concat(["object"]));g.computed&&(g.property=this.accept(g.property,c,k.concat(["property"])));return g};Mi.prototype.visitProperty=function(g,c,k){g.computed&&(g.key=this.accept(g.key,c,k.concat(["key"])));g.value=this.accept(g.value,c,k.concat(["value"]));return g};
Mi.prototype.visitThisExpression=function(g,c,k){c.thisRefs.push(g);return Tg.Visitor.prototype.visitThisExpression.call(this,g,c,k)};Mi.prototype.visitTryStatement=function(g,c,k){g.block=this.accept(g.block,c,k.concat(["block"]));g.handler&&(g.handler=this.accept(g.handler,c,k.concat(["handler"])),c.catches.push(g.handler.param));g.finalizer&&(g.finalizer=this.accept(g.finalizer,c,k.concat(["finalizer"])));return g};Mi.prototype.visitLabeledStatement=function(g,c,k){g.body=this.accept(g.body,c,
k.concat(["body"]));return g};Mi.prototype.visitClassDeclaration=function(g,c,k){c.classDecls.push(g);c.classDeclPaths.push(k);g.superClass&&(g.superClass=this.accept(g.superClass,c,k.concat(["superClass"])));g.body=this.accept(g.body,c,k.concat(["body"]));return g};Mi.prototype.visitClassExpression=function(g,c,k){g.id&&(c.classExprs.push(g),c.classExprPaths.push(k));g.superClass&&(g.superClass=this.accept(g.superClass,c,k.concat(["superClass"])));g.body=this.accept(g.body,c,k.concat(["body"]));
return g};Mi.prototype.visitMethodDefinition=function(g,c,k){g.value=this.accept(g.value,c,k.concat(["value"]));return g};Mi.prototype.visitMetaProperty=function(g,c,k){return g};Mi.prototype.visitBreakStatement=function(g,c,k){return g};Mi.prototype.visitContinueStatement=function(g,c,k){return g};Mi.prototype.visitImportSpecifier=function(g,c,k){c.importSpecifiers.push(g.local);c.importSpecifierPaths.push(k);return g};Mi.prototype.visitImportDefaultSpecifier=function(g,c,k){c.importSpecifiers.push(g.local);
c.importSpecifierPaths.push(k);return g};Mi.prototype.visitImportNamespaceSpecifier=function(g,c,k){c.importSpecifiers.push(g.local);c.importSpecifierPaths.push(k);return g};Mi.prototype.visitExportSpecifier=function(g,c,k){g.local=this.accept(g.local,c,k.concat(["local"]));return g};Mi.prototype.visitExportNamedDeclaration=function(g,c,k){c.exportDecls.push(g);c.exportDeclPaths.push(k);g.source||Tg.Visitor.prototype.visitExportNamedDeclaration.call(this,g,c,k);return g};Mi.prototype.visitExportDefaultDeclaration=
function(g,c,k){c.exportDecls.push(g);c.exportDeclPaths.push(k);return Tg.Visitor.prototype.visitExportDefaultDeclaration.call(this,g,c,k)};Mi.prototype.visitExportAllDeclaration=function(g,c,k){c.exportDecls.push(g);c.exportDeclPaths.push(k);return Tg.Visitor.prototype.visitExportAllDeclaration.call(this,g,c,k)};Tg.ScopeVisitor=Mi;Tg.BaseVisitor=de;Tg.Visitor=de;Tg.PrinterVisitor=qy;Tg.PrinterVisitor=qy;Tg.ComparisonVisitor=wj;Tg.ComparisonVisitor=wj;Tg.ScopeVisitor=Mi;Tg.ScopeVisitor=Mi;var eg=
"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,TR={};(function k(c){function f(I){var K={},P;for(P in I)if(I.hasOwnProperty(P)){var N=I[P];K[P]="object"===typeof N&&null!==N?f(N):N}return K}function l(I,K){var P;var N=I.length;for(P=0;N;){var aa=N>>>1;var m=P+aa;K(I[m])?N=aa:(P=m+1,N-=aa+1)}return P}function p(I,K){(this||eg).parent=I;(this||eg).key=K}function b(I,K,P,N){(this||eg).node=I;(this||eg).path=K;(this||eg).wrap=P;(this||eg).ref=N}function d(){}function h(I){return null==
I?!1:"object"===typeof I&&"string"===typeof I.type}function a(I,K){for(var P=I.length-1;0<=P;--P)if(I[P].node===K)return!0;return!1}function e(I,K){return(new d).traverse(I,K)}function n(I,K){var P=l(K,function(N){return N.range[0]>I.range[0]});I.extendedRange=[I.range[0],I.range[1]];P!==K.length&&(I.extendedRange[1]=K[P].range[0]);--P;0<=P&&(I.extendedRange[0]=K[P].range[1]);return I}var q={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",
ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",
ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",
ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",
ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};var r={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],
BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],
DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter",
"body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],
ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],
VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};var v={};var y={};var D={};var E={Break:v,Skip:y,Remove:D};p.prototype.replace=function(I){(this||eg).parent[(this||eg).key]=I};p.prototype.remove=function(){if(Array.isArray((this||eg).parent))return(this||eg).parent.splice((this||eg).key,1),!0;this.replace(null);return!1};d.prototype.path=function(){function I(u,B){if(Array.isArray(B))for(P=
0,N=B.length;P<N;++P)u.push(B[P]);else u.push(B)}var K,P,N;if(!(this||eg).__current.path)return null;var aa=[];var m=2;for(K=(this||eg).__leavelist.length;m<K;++m){var t=(this||eg).__leavelist[m];I(aa,t.path)}I(aa,(this||eg).__current.path);return aa};d.prototype.type=function(){return this.current().type||(this||eg).__current.wrap};d.prototype.parents=function(){var I;var K=[];var P=1;for(I=(this||eg).__leavelist.length;P<I;++P)K.push((this||eg).__leavelist[P].node);return K};d.prototype.current=
function(){return(this||eg).__current.node};d.prototype.__execute=function(I,K){var P=void 0;var N=(this||eg).__current;(this||eg).__current=K;(this||eg).__state=null;I&&(P=I.call(this||eg,K.node,(this||eg).__leavelist[(this||eg).__leavelist.length-1].node));(this||eg).__current=N;return P};d.prototype.notify=function(I){(this||eg).__state=I};d.prototype.skip=function(){this.notify(y)};d.prototype["break"]=function(){this.notify(v)};d.prototype.remove=function(){this.notify(D)};d.prototype.__initialize=
function(I,K){(this||eg).visitor=K;(this||eg).root=I;(this||eg).__worklist=[];(this||eg).__leavelist=[];(this||eg).__current=null;(this||eg).__state=null;(this||eg).__fallback=null;"iteration"===K.fallback?(this||eg).__fallback=Object.keys:"function"===typeof K.fallback&&((this||eg).__fallback=K.fallback);(this||eg).__keys=r;K.keys&&((this||eg).__keys=Object.assign(Object.create((this||eg).__keys),K.keys))};d.prototype.traverse=function(I,K){var P,N,aa;this.__initialize(I,K);var m={};var t=(this||
eg).__worklist;var u=(this||eg).__leavelist;t.push(new b(I,null,null,null));for(u.push(new b(null,null,null,null));t.length;)if(I=t.pop(),I===m){I=u.pop();var B=this.__execute(K.leave,I);if((this||eg).__state===v||B===v)break}else if(I.node){B=this.__execute(K.enter,I);if((this||eg).__state===v||B===v)break;t.push(m);u.push(I);if((this||eg).__state!==y&&B!==y){B=I.node;var A=B.type||I.wrap;var H=(this||eg).__keys[A];if(!H)if((this||eg).__fallback)H=this.__fallback(B);else throw Error("Unknown node type "+
A+".");for(P=H.length;0<=--P;){var F=H[P];if(aa=B[F])if(Array.isArray(aa))for(N=aa.length;0<=--N;){if(aa[N]&&!a(u,aa[N])){if(A!==q.ObjectExpression&&A!==q.ObjectPattern||"properties"!==H[P])if(h(aa[N]))I=new b(aa[N],[F,N],null,null);else continue;else I=new b(aa[N],[F,N],"Property",null);t.push(I)}}else h(aa)&&!a(u,aa)&&t.push(new b(aa,F,null,null))}}}};d.prototype.replace=function(I,K){function P(T){if(T.ref.remove()){var Y=T.ref.key;var wa=T.ref.parent;for(T=u.length;T--;){var Ga=u[T];if(Ga.ref&&
Ga.ref.parent===wa){if(Ga.ref.key<Y)break;--Ga.ref.key}}}}var N,aa,m;this.__initialize(I,K);var t={};var u=(this||eg).__worklist;var B=(this||eg).__leavelist;var A={root:I};var H=new b(I,null,null,new p(A,"root"));u.push(H);for(B.push(H);u.length;)if(H=u.pop(),H===t){H=B.pop();var F=this.__execute(K.leave,H);void 0!==F&&F!==v&&F!==y&&F!==D&&H.ref.replace(F);(this||eg).__state!==D&&F!==D||P(H);if((this||eg).__state===v||F===v)break}else{F=this.__execute(K.enter,H);void 0!==F&&F!==v&&F!==y&&F!==D&&
(H.ref.replace(F),H.node=F);if((this||eg).__state===D||F===D)P(H),H.node=null;if((this||eg).__state===v||F===v)break;if(I=H.node)if(u.push(t),B.push(H),(this||eg).__state!==y&&F!==y){F=I.type||H.wrap;var L=(this||eg).__keys[F];if(!L)if((this||eg).__fallback)L=this.__fallback(I);else throw Error("Unknown node type "+F+".");for(N=L.length;0<=--N;){var U=L[N];if(m=I[U])if(Array.isArray(m))for(aa=m.length;0<=--aa;){if(m[aa]){if(F!==q.ObjectExpression&&F!==q.ObjectPattern||"properties"!==L[N])if(h(m[aa]))H=
new b(m[aa],[U,aa],null,new p(m,aa));else continue;else H=new b(m[aa],[U,aa],"Property",new p(m,aa));u.push(H)}}else h(m)&&u.push(new b(m,U,null,new p(I,U)))}}}return A.root};c.Syntax=q;c.traverse=e;c.replace=function(I,K){return(new d).replace(I,K)};c.attachComments=function(I,K,P){var N=[],aa;if(!I.range)throw Error("attachComments needs range information");if(!P.length){if(K.length){var m=0;for(aa=K.length;m<aa;m+=1)P=f(K[m]),P.extendedRange=[0,I.range[0]],N.push(P);I.leadingComments=N}return I}m=
0;for(aa=K.length;m<aa;m+=1)N.push(n(f(K[m]),P));var t=0;e(I,{enter:function(u){for(var B;t<N.length;){B=N[t];if(B.extendedRange[1]>u.range[0])break;B.extendedRange[1]===u.range[0]?(u.leadingComments||(u.leadingComments=[]),u.leadingComments.push(B),N.splice(t,1)):t+=1}if(t===N.length)return E.Break;if(N[t].extendedRange[0]>u.range[1])return E.Skip}});t=0;e(I,{leave:function(u){for(var B;t<N.length;){B=N[t];if(u.range[1]<B.extendedRange[0])break;u.range[1]===B.extendedRange[0]?(u.trailingComments||
(u.trailingComments=[]),u.trailingComments.push(B),N.splice(t,1)):t+=1}if(t===N.length)return E.Break;if(N[t].extendedRange[0]>u.range[1])return E.Skip}});return I};c.VisitorKeys=r;c.VisitorOption=E;c.Controller=d;c.cloneEnvironment=function(){return k({})};return c})(TR);var l8={};(function(){function c(f){if(null==f)return!1;switch(f.type){case "BlockStatement":case "BreakStatement":case "ContinueStatement":case "DebuggerStatement":case "DoWhileStatement":case "EmptyStatement":case "ExpressionStatement":case "ForInStatement":case "ForStatement":case "IfStatement":case "LabeledStatement":case "ReturnStatement":case "SwitchStatement":case "ThrowStatement":case "TryStatement":case "VariableDeclaration":case "WhileStatement":case "WithStatement":return!0}return!1}
function k(f){switch(f.type){case "IfStatement":return null!=f.alternate?f.alternate:f.consequent;case "LabeledStatement":case "ForStatement":case "ForInStatement":case "WhileStatement":case "WithStatement":return f.body}return null}l8={isExpression:function(f){if(null==f)return!1;switch(f.type){case "ArrayExpression":case "AssignmentExpression":case "BinaryExpression":case "CallExpression":case "ConditionalExpression":case "FunctionExpression":case "Identifier":case "Literal":case "LogicalExpression":case "MemberExpression":case "NewExpression":case "ObjectExpression":case "SequenceExpression":case "ThisExpression":case "UnaryExpression":case "UpdateExpression":return!0}return!1},
isStatement:c,isIterationStatement:function(f){if(null==f)return!1;switch(f.type){case "DoWhileStatement":case "ForInStatement":case "ForStatement":case "WhileStatement":return!0}return!1},isSourceElement:function(f){return c(f)||null!=f&&"FunctionDeclaration"===f.type},isProblematicIfStatement:function(f){if("IfStatement"!==f.type||null==f.alternate)return!1;f=f.consequent;do{if("IfStatement"===f.type&&null==f.alternate)return!0;f=k(f)}while(f);return!1},trailingStatement:k}})();var mma=l8,m8={};
(function(){function c(e){if(65535>=e)return String.fromCharCode(e);var n=String.fromCharCode(Math.floor((e-65536)/1024)+55296);e=String.fromCharCode((e-65536)%1024+56320);return n+e}var k;var f=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var l=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var p=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/;
var b=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
var d=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];var h=Array(128);for(k=0;128>k;++k)h[k]=97<=k&&122>=k||65<=k&&90>=k||36===k||95===k;var a=Array(128);for(k=0;128>k;++k)a[k]=97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||36===k||95===k;m8={isDecimalDigit:function(e){return 48<=e&&57>=e},isHexDigit:function(e){return 48<=e&&57>=e||97<=e&&102>=e||65<=e&&70>=e},isOctalDigit:function(e){return 48<=e&&55>=e},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===
e||160===e||5760<=e&&0<=d.indexOf(e)},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStartES5:function(e){return 128>e?h[e]:f.test(c(e))},isIdentifierPartES5:function(e){return 128>e?a[e]:l.test(c(e))},isIdentifierStartES6:function(e){return 128>e?h[e]:p.test(c(e))},isIdentifierPartES6:function(e){return 128>e?a[e]:b.test(c(e))}}})();var n8=m8,o8={};(function(){function c(h,a){return a||"yield"!==h?k(h,a):!1}function k(h,a){if(a)a:switch(h){case "implements":case "interface":case "package":case "private":case "protected":case "public":case "static":case "let":a=
!0;break a;default:a=!1}if(a)return!0;switch(h.length){case 2:return"if"===h||"in"===h||"do"===h;case 3:return"var"===h||"for"===h||"new"===h||"try"===h;case 4:return"this"===h||"else"===h||"case"===h||"void"===h||"with"===h||"enum"===h;case 5:return"while"===h||"break"===h||"catch"===h||"throw"===h||"const"===h||"yield"===h||"class"===h||"super"===h;case 6:return"return"===h||"typeof"===h||"delete"===h||"switch"===h||"export"===h||"import"===h;case 7:return"default"===h||"finally"===h||"extends"===
h;case 8:return"function"===h||"continue"===h||"debugger"===h;case 10:return"instanceof"===h;default:return!1}}function f(h,a){return"null"===h||"true"===h||"false"===h||c(h,a)}function l(h,a){return"null"===h||"true"===h||"false"===h||k(h,a)}function p(h){var a;if(0===h.length)return!1;var e=h.charCodeAt(0);if(!d.isIdentifierStartES5(e))return!1;var n=1;for(a=h.length;n<a;++n)if(e=h.charCodeAt(n),!d.isIdentifierPartES5(e))return!1;return!0}function b(h){var a;if(0===h.length)return!1;var e=d.isIdentifierStartES6;
var n=0;for(a=h.length;n<a;++n){var q=h.charCodeAt(n);if(55296<=q&&56319>=q){++n;if(n>=a)return!1;var r=h.charCodeAt(n);if(!(56320<=r&&57343>=r))return!1;q=1024*(q-55296)+(r-56320)+65536}if(!e(q))return!1;e=d.isIdentifierPartES6}return!0}var d=n8;o8={isKeywordES5:c,isKeywordES6:k,isReservedWordES5:f,isReservedWordES6:l,isRestrictedWord:function(h){return"eval"===h||"arguments"===h},isIdentifierNameES5:p,isIdentifierNameES6:b,isIdentifierES5:function(h,a){return p(h)&&!f(h,a)},isIdentifierES6:function(h,
a){return b(h)&&!l(h,a)}}})();var nma=o8,BB={};BB.ast=mma;BB.code=n8;BB.keyword=nma;var Hk={getArg:function(c,k,f){if(k in c)return c[k];if(3===arguments.length)return f;throw Error('"'+k+'" is a required argument.');}},eV=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,nda=/^data:.+,.+$/;Hk.urlParse=cu;Hk.urlGenerate=Ep;Hk.normalize=pz;Hk.join=qz;Hk.isAbsolute=function(c){return"/"===c.charAt(0)||eV.test(c)};Hk.relative=function(c,k){""===c&&(c=".");c=c.replace(/\/$/,"");for(var f=
0;0!==k.indexOf(c+"/");){var l=c.lastIndexOf("/");if(0>l)return k;c=c.slice(0,l);if(c.match(/^([^\/]+:\/)?\/*$/))return k;++f}return Array(f+1).join("../")+k.substr(c.length+1)};var p8=!("__proto__"in Object.create(null));Hk.toSetString=p8?rz:sz;Hk.fromSetString=p8?rz:BL;Hk.compareByOriginalPositions=function(c,k,f){var l=Aa(c.source,k.source);if(0!==l)return l;l=c.originalLine-k.originalLine;if(0!==l)return l;l=c.originalColumn-k.originalColumn;if(0!==l||f)return l;l=c.generatedColumn-k.generatedColumn;
if(0!==l)return l;l=c.generatedLine-k.generatedLine;return 0!==l?l:Aa(c.name,k.name)};Hk.compareByGeneratedPositionsDeflated=function(c,k,f){var l=c.generatedLine-k.generatedLine;if(0!==l)return l;l=c.generatedColumn-k.generatedColumn;if(0!==l||f)return l;l=Aa(c.source,k.source);if(0!==l)return l;l=c.originalLine-k.originalLine;if(0!==l)return l;l=c.originalColumn-k.originalColumn;return 0!==l?l:Aa(c.name,k.name)};Hk.compareByGeneratedPositionsInflated=function(c,k){var f=c.generatedLine-k.generatedLine;
if(0!==f)return f;f=c.generatedColumn-k.generatedColumn;if(0!==f)return f;f=Aa(c.source,k.source);if(0!==f)return f;f=c.originalLine-k.originalLine;if(0!==f)return f;f=c.originalColumn-k.originalColumn;return 0!==f?f:Aa(c.name,k.name)};Hk.parseSourceMapInput=function(c){return JSON.parse(c.replace(/^\)]}'[^\n]*\n/,""))};Hk.computeSourceURL=function(c,k,f){k=k||"";c&&("/"!==c[c.length-1]&&"/"!==k[0]&&(c+="/"),k=c+k);if(f){c=cu(f);if(!c)throw Error("sourceMapURL could not be parsed");c.path&&(f=c.path.lastIndexOf("/"),
0<=f&&(c.path=c.path.substring(0,f+1)));k=qz(Ep(c),k)}return pz(k)};var CI={},q8="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");CI.encode=function(c){if(0<=c&&c<q8.length)return q8[c];throw new TypeError("Must be between 0 and 63: "+c);};CI.decode=function(c){return 65<=c&&90>=c?c-65:97<=c&&122>=c?c-97+26:48<=c&&57>=c?c-48+52:43==c?62:47==c?63:-1};var ry={encode:function(c){var k="",f=0>c?(-c<<1)+1:c<<1;do c=f&31,f>>>=5,0<f&&(c|=32),k+=CI.encode(c);while(0<f);return k},
decode:function(c,k,f){var l=c.length,p=0,b=0;do{if(k>=l)throw Error("Expected more digits in base 64 VLQ value.");var d=CI.decode(c.charCodeAt(k++));if(-1===d)throw Error("Invalid base64 digit: "+c.charAt(k-1));var h=!!(d&32);d&=31;p+=d<<b;b+=5}while(h);c=p>>1;f.value=1===(p&1)?-c:c;f.rest=k}},El="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,UR=Hk,VR=Object.prototype.hasOwnProperty,du="undefined"!==typeof Map;$a.fromArray=function(c,k){for(var f=new $a,l=0,p=c.length;l<
p;l++)f.add(c[l],k);return f};$a.prototype.size=function(){return du?(this||El)._set.size:Object.getOwnPropertyNames((this||El)._set).length};$a.prototype.add=function(c,k){var f=du?c:UR.toSetString(c),l=du?this.has(c):VR.call((this||El)._set,f),p=(this||El)._array.length;l&&!k||(this||El)._array.push(c);l||(du?(this||El)._set.set(c,p):(this||El)._set[f]=p)};$a.prototype.has=function(c){if(du)return(this||El)._set.has(c);c=UR.toSetString(c);return VR.call((this||El)._set,c)};$a.prototype.indexOf=
function(c){if(du){var k=(this||El)._set.get(c);if(0<=k)return k}else if(k=UR.toSetString(c),VR.call((this||El)._set,k))return(this||El)._set[k];throw Error('"'+c+'" is not in the set.');};$a.prototype.at=function(c){if(0<=c&&c<(this||El)._array.length)return(this||El)._array[c];throw Error("No element indexed by "+c);};$a.prototype.toArray=function(){return(this||El)._array.slice()};var Fn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,r8=Hk;zb.prototype.unsortedForEach=
function(c,k){(this||Fn)._array.forEach(c,k)};zb.prototype.add=function(c){var k=(this||Fn)._last,f=k.generatedLine,l=c.generatedLine,p=k.generatedColumn,b=c.generatedColumn;l>f||l==f&&b>=p||0>=r8.compareByGeneratedPositionsInflated(k,c)?(this||Fn)._last=c:(this||Fn)._sorted=!1;(this||Fn)._array.push(c)};zb.prototype.toArray=function(){(this||Fn)._sorted||((this||Fn)._array.sort(r8.compareByGeneratedPositionsInflated),(this||Fn)._sorted=!0);return(this||Fn)._array};var eh="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,rk=Hk,aD=$a,oda=zb;bc.prototype._version=3;bc.fromSourceMap=function(c){var k=c.sourceRoot,f=new bc({file:c.file,sourceRoot:k});c.eachMapping(function(l){var p={generated:{line:l.generatedLine,column:l.generatedColumn}};null!=l.source&&(p.source=l.source,null!=k&&(p.source=rk.relative(k,p.source)),p.original={line:l.originalLine,column:l.originalColumn},null!=l.name&&(p.name=l.name));f.addMapping(p)});c.sources.forEach(function(l){var p=l;null!==k&&
(p=rk.relative(k,l));f._sources.has(p)||f._sources.add(p);p=c.sourceContentFor(l);null!=p&&f.setSourceContent(l,p)});return f};bc.prototype.addMapping=function(c){var k=rk.getArg(c,"generated"),f=rk.getArg(c,"original",null),l=rk.getArg(c,"source",null);c=rk.getArg(c,"name",null);(this||eh)._skipValidation||this._validateMapping(k,f,l,c);null!=l&&(l=String(l),(this||eh)._sources.has(l)||(this||eh)._sources.add(l));null!=c&&(c=String(c),(this||eh)._names.has(c)||(this||eh)._names.add(c));(this||eh)._mappings.add({generatedLine:k.line,
generatedColumn:k.column,originalLine:null!=f&&f.line,originalColumn:null!=f&&f.column,source:l,name:c})};bc.prototype.setSourceContent=function(c,k){null!=(this||eh)._sourceRoot&&(c=rk.relative((this||eh)._sourceRoot,c));null!=k?((this||eh)._sourcesContents||((this||eh)._sourcesContents=Object.create(null)),(this||eh)._sourcesContents[rk.toSetString(c)]=k):(this||eh)._sourcesContents&&(delete (this||eh)._sourcesContents[rk.toSetString(c)],0===Object.keys((this||eh)._sourcesContents).length&&((this||
eh)._sourcesContents=null))};bc.prototype.applySourceMap=function(c,k,f){var l=k;if(null==k){if(null==c.file)throw Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');l=c.file}var p=(this||eh)._sourceRoot;null!=p&&(l=rk.relative(p,l));var b=new aD,d=new aD;(this||eh)._mappings.unsortedForEach(function(h){if(h.source===l&&null!=h.originalLine){var a=c.originalPositionFor({line:h.originalLine,column:h.originalColumn});
null!=a.source&&(h.source=a.source,null!=f&&(h.source=rk.join(f,h.source)),null!=p&&(h.source=rk.relative(p,h.source)),h.originalLine=a.line,h.originalColumn=a.column,null!=a.name&&(h.name=a.name))}a=h.source;null==a||b.has(a)||b.add(a);h=h.name;null==h||d.has(h)||d.add(h)},this||eh);(this||eh)._sources=b;(this||eh)._names=d;c.sources.forEach(function(h){var a=c.sourceContentFor(h);null!=a&&(null!=f&&(h=rk.join(f,h)),null!=p&&(h=rk.relative(p,h)),this.setSourceContent(h,a))},this||eh)};bc.prototype._validateMapping=
function(c,k,f,l){if(k&&"number"!==typeof k.line&&"number"!==typeof k.column)throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(c&&"line"in c&&"column"in c&&0<c.line&&0<=c.column&&!k&&!f&&!l||c&&"line"in c&&"column"in c&&k&&"line"in k&&"column"in k&&0<c.line&&0<=c.column&&0<k.line&&0<=k.column&&
f))throw Error("Invalid mapping: "+JSON.stringify({generated:c,source:f,original:k,name:l}));};bc.prototype._serializeMappings=function(){for(var c=0,k=1,f=0,l=0,p=0,b=0,d="",h,a,e,n=(this||eh)._mappings.toArray(),q=0,r=n.length;q<r;q++){a=n[q];h="";if(a.generatedLine!==k)for(c=0;a.generatedLine!==k;)h+=";",k++;else if(0<q){if(!rk.compareByGeneratedPositionsInflated(a,n[q-1]))continue;h+=","}h+=ry.encode(a.generatedColumn-c);c=a.generatedColumn;null!=a.source&&(e=(this||eh)._sources.indexOf(a.source),
h+=ry.encode(e-b),b=e,h+=ry.encode(a.originalLine-1-l),l=a.originalLine-1,h+=ry.encode(a.originalColumn-f),f=a.originalColumn,null!=a.name&&(a=(this||eh)._names.indexOf(a.name),h+=ry.encode(a-p),p=a));d+=h}return d};bc.prototype._generateSourcesContent=function(c,k){return c.map(function(f){if(!(this||eh)._sourcesContents)return null;null!=k&&(f=rk.relative(k,f));f=rk.toSetString(f);return Object.prototype.hasOwnProperty.call((this||eh)._sourcesContents,f)?(this||eh)._sourcesContents[f]:null},this||
eh)};bc.prototype.toJSON=function(){var c={version:(this||eh)._version,sources:(this||eh)._sources.toArray(),names:(this||eh)._names.toArray(),mappings:this._serializeMappings()};null!=(this||eh)._file&&(c.file=(this||eh)._file);null!=(this||eh)._sourceRoot&&(c.sourceRoot=(this||eh)._sourceRoot);(this||eh)._sourcesContents&&(c.sourcesContent=this._generateSourcesContent(c.sources,c.sourceRoot));return c};bc.prototype.toString=function(){return JSON.stringify(this.toJSON())};var bD={GREATEST_LOWER_BOUND:1,
LEAST_UPPER_BOUND:2,search:function(c,k,f,l){if(0===k.length)return-1;c=tc(-1,k.length,c,k,f,l||bD.GREATEST_LOWER_BOUND);if(0>c)return-1;for(;0<=c-1&&0===f(k[c],k[c-1],!0);)--c;return c}},ye="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Df=Hk,WR=bD,Nw=$a,CB=function(c,k){ze(c,k,0,c.length-1)};le.fromSourceMap=function(c,k){return Pe.fromSourceMap(c,k)};le.prototype._version=3;le.prototype.__generatedMappings=null;Object.defineProperty(le.prototype,"_generatedMappings",
{configurable:!0,enumerable:!0,get:function(){(this||ye).__generatedMappings||this._parseMappings((this||ye)._mappings,(this||ye).sourceRoot);return(this||ye).__generatedMappings}});le.prototype.__originalMappings=null;Object.defineProperty(le.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){(this||ye).__originalMappings||this._parseMappings((this||ye)._mappings,(this||ye).sourceRoot);return(this||ye).__originalMappings}});le.prototype._charIsMappingSeparator=function(c,
k){c=c.charAt(k);return";"===c||","===c};le.prototype._parseMappings=function(c,k){throw Error("Subclasses must implement _parseMappings");};le.GENERATED_ORDER=1;le.ORIGINAL_ORDER=2;le.GREATEST_LOWER_BOUND=1;le.LEAST_UPPER_BOUND=2;le.prototype.eachMapping=function(c,k,f){k=k||null;switch(f||le.GENERATED_ORDER){case le.GENERATED_ORDER:f=(this||ye)._generatedMappings;break;case le.ORIGINAL_ORDER:f=(this||ye)._originalMappings;break;default:throw Error("Unknown order of iteration.");}var l=(this||ye).sourceRoot;
f.map(function(p){var b=null===p.source?null:(this||ye)._sources.at(p.source);b=Df.computeSourceURL(l,b,(this||ye)._sourceMapURL);return{source:b,generatedLine:p.generatedLine,generatedColumn:p.generatedColumn,originalLine:p.originalLine,originalColumn:p.originalColumn,name:null===p.name?null:(this||ye)._names.at(p.name)}},this||ye).forEach(c,k)};le.prototype.allGeneratedPositionsFor=function(c){var k=Df.getArg(c,"line"),f={source:Df.getArg(c,"source"),originalLine:k,originalColumn:Df.getArg(c,"column",
0)};f.source=this._findSourceIndex(f.source);if(0>f.source)return[];var l=[];f=this._findMapping(f,(this||ye)._originalMappings,"originalLine","originalColumn",Df.compareByOriginalPositions,WR.LEAST_UPPER_BOUND);if(0<=f){var p=(this||ye)._originalMappings[f];if(void 0===c.column)for(k=p.originalLine;p&&p.originalLine===k;)l.push({line:Df.getArg(p,"generatedLine",null),column:Df.getArg(p,"generatedColumn",null),lastColumn:Df.getArg(p,"lastGeneratedColumn",null)}),p=(this||ye)._originalMappings[++f];
else for(c=p.originalColumn;p&&p.originalLine===k&&p.originalColumn==c;)l.push({line:Df.getArg(p,"generatedLine",null),column:Df.getArg(p,"generatedColumn",null),lastColumn:Df.getArg(p,"lastGeneratedColumn",null)}),p=(this||ye)._originalMappings[++f]}return l};Pe.prototype=Object.create(le.prototype);Pe.prototype.consumer=le;Pe.prototype._findSourceIndex=function(c){var k=c;null!=(this||ye).sourceRoot&&(k=Df.relative((this||ye).sourceRoot,k));if((this||ye)._sources.has(k))return(this||ye)._sources.indexOf(k);
for(k=0;k<(this||ye)._absoluteSources.length;++k)if((this||ye)._absoluteSources[k]==c)return k;return-1};Pe.fromSourceMap=function(c,k){var f=Object.create(Pe.prototype),l=f._names=Nw.fromArray(c._names.toArray(),!0),p=f._sources=Nw.fromArray(c._sources.toArray(),!0);f.sourceRoot=c._sourceRoot;f.sourcesContent=c._generateSourcesContent(f._sources.toArray(),f.sourceRoot);f.file=c._file;f._sourceMapURL=k;f._absoluteSources=f._sources.toArray().map(function(q){return Df.computeSourceURL(f.sourceRoot,
q,k)});c=c._mappings.toArray().slice();for(var b=f.__generatedMappings=[],d=f.__originalMappings=[],h=0,a=c.length;h<a;h++){var e=c[h],n=new Rf;n.generatedLine=e.generatedLine;n.generatedColumn=e.generatedColumn;e.source&&(n.source=p.indexOf(e.source),n.originalLine=e.originalLine,n.originalColumn=e.originalColumn,e.name&&(n.name=l.indexOf(e.name)),d.push(n));b.push(n)}CB(f.__originalMappings,Df.compareByOriginalPositions);return f};Pe.prototype._version=3;Object.defineProperty(Pe.prototype,"sources",
{get:function(){return(this||ye)._absoluteSources.slice()}});Pe.prototype._parseMappings=function(c,k){k=1;for(var f=0,l=0,p=0,b=0,d=0,h=c.length,a=0,e={},n={},q=[],r=[],v,y,D,E,I;a<h;)if(";"===c.charAt(a))k++,a++,f=0;else if(","===c.charAt(a))a++;else{v=new Rf;v.generatedLine=k;for(E=a;E<h&&!this._charIsMappingSeparator(c,E);E++);y=c.slice(a,E);if(D=e[y])a+=y.length;else{for(D=[];a<E;)ry.decode(c,a,n),I=n.value,a=n.rest,D.push(I);if(2===D.length)throw Error("Found a source, but no line and column");
if(3===D.length)throw Error("Found a source and line, but no column");e[y]=D}v.generatedColumn=f+D[0];f=v.generatedColumn;1<D.length&&(v.source=b+D[1],b+=D[1],v.originalLine=l+D[2],l=v.originalLine,v.originalLine+=1,v.originalColumn=p+D[3],p=v.originalColumn,4<D.length&&(v.name=d+D[4],d+=D[4]));r.push(v);"number"===typeof v.originalLine&&q.push(v)}CB(r,Df.compareByGeneratedPositionsDeflated);(this||ye).__generatedMappings=r;CB(q,Df.compareByOriginalPositions);(this||ye).__originalMappings=q};Pe.prototype._findMapping=
function(c,k,f,l,p,b){if(0>=c[f])throw new TypeError("Line must be greater than or equal to 1, got "+c[f]);if(0>c[l])throw new TypeError("Column must be greater than or equal to 0, got "+c[l]);return WR.search(c,k,p,b)};Pe.prototype.computeColumnSpans=function(){for(var c=0;c<(this||ye)._generatedMappings.length;++c){var k=(this||ye)._generatedMappings[c];if(c+1<(this||ye)._generatedMappings.length){var f=(this||ye)._generatedMappings[c+1];if(k.generatedLine===f.generatedLine){k.lastGeneratedColumn=
f.generatedColumn-1;continue}}k.lastGeneratedColumn=Infinity}};Pe.prototype.originalPositionFor=function(c){var k={generatedLine:Df.getArg(c,"line"),generatedColumn:Df.getArg(c,"column")};c=this._findMapping(k,(this||ye)._generatedMappings,"generatedLine","generatedColumn",Df.compareByGeneratedPositionsDeflated,Df.getArg(c,"bias",le.GREATEST_LOWER_BOUND));if(0<=c&&(c=(this||ye)._generatedMappings[c],c.generatedLine===k.generatedLine)){k=Df.getArg(c,"source",null);null!==k&&(k=(this||ye)._sources.at(k),
k=Df.computeSourceURL((this||ye).sourceRoot,k,(this||ye)._sourceMapURL));var f=Df.getArg(c,"name",null);null!==f&&(f=(this||ye)._names.at(f));return{source:k,line:Df.getArg(c,"originalLine",null),column:Df.getArg(c,"originalColumn",null),name:f}}return{source:null,line:null,column:null,name:null}};Pe.prototype.hasContentsOfAllSources=function(){return(this||ye).sourcesContent?(this||ye).sourcesContent.length>=(this||ye)._sources.size()&&!(this||ye).sourcesContent.some(function(c){return null==c}):
!1};Pe.prototype.sourceContentFor=function(c,k){if(!(this||ye).sourcesContent)return null;var f=this._findSourceIndex(c);if(0<=f)return(this||ye).sourcesContent[f];null!=(this||ye).sourceRoot&&(c=Df.relative((this||ye).sourceRoot,c));var l;if(null!=(this||ye).sourceRoot&&(l=Df.urlParse((this||ye).sourceRoot))){f=c.replace(/^file:\/\//,"");if("file"==l.scheme&&(this||ye)._sources.has(f))return(this||ye).sourcesContent[(this||ye)._sources.indexOf(f)];if((!l.path||"/"==l.path)&&(this||ye)._sources.has("/"+
c))return(this||ye).sourcesContent[(this||ye)._sources.indexOf("/"+c)]}if(k)return null;throw Error('"'+c+'" is not in the SourceMap.');};Pe.prototype.generatedPositionFor=function(c){var k=Df.getArg(c,"source");k=this._findSourceIndex(k);if(0>k)return{line:null,column:null,lastColumn:null};k={source:k,originalLine:Df.getArg(c,"line"),originalColumn:Df.getArg(c,"column")};c=this._findMapping(k,(this||ye)._originalMappings,"originalLine","originalColumn",Df.compareByOriginalPositions,Df.getArg(c,"bias",
le.GREATEST_LOWER_BOUND));return 0<=c&&(c=(this||ye)._originalMappings[c],c.source===k.source)?{line:Df.getArg(c,"generatedLine",null),column:Df.getArg(c,"generatedColumn",null),lastColumn:Df.getArg(c,"lastGeneratedColumn",null)}:{line:null,column:null,lastColumn:null}};fh.prototype=Object.create(le.prototype);fh.prototype.constructor=le;fh.prototype._version=3;Object.defineProperty(fh.prototype,"sources",{get:function(){for(var c=[],k=0;k<(this||ye)._sections.length;k++)for(var f=0;f<(this||ye)._sections[k].consumer.sources.length;f++)c.push((this||
ye)._sections[k].consumer.sources[f]);return c}});fh.prototype.originalPositionFor=function(c){var k={generatedLine:Df.getArg(c,"line"),generatedColumn:Df.getArg(c,"column")},f=WR.search(k,(this||ye)._sections,function(l,p){var b=l.generatedLine-p.generatedOffset.generatedLine;return b?b:l.generatedColumn-p.generatedOffset.generatedColumn});return(f=(this||ye)._sections[f])?f.consumer.originalPositionFor({line:k.generatedLine-(f.generatedOffset.generatedLine-1),column:k.generatedColumn-(f.generatedOffset.generatedLine===
k.generatedLine?f.generatedOffset.generatedColumn-1:0),bias:c.bias}):{source:null,line:null,column:null,name:null}};fh.prototype.hasContentsOfAllSources=function(){return(this||ye)._sections.every(function(c){return c.consumer.hasContentsOfAllSources()})};fh.prototype.sourceContentFor=function(c,k){for(var f=0;f<(this||ye)._sections.length;f++){var l=(this||ye)._sections[f].consumer.sourceContentFor(c,!0);if(l)return l}if(k)return null;throw Error('"'+c+'" is not in the SourceMap.');};fh.prototype.generatedPositionFor=
function(c){for(var k=0;k<(this||ye)._sections.length;k++){var f=(this||ye)._sections[k];if(-1!==f.consumer._findSourceIndex(Df.getArg(c,"source"))){var l=f.consumer.generatedPositionFor(c);if(l)return{line:l.line+(f.generatedOffset.generatedLine-1),column:l.column+(f.generatedOffset.generatedLine===l.line?f.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}};fh.prototype._parseMappings=function(c,k){(this||ye).__generatedMappings=[];(this||ye).__originalMappings=[];for(c=0;c<(this||
ye)._sections.length;c++){k=(this||ye)._sections[c];for(var f=k.consumer._generatedMappings,l=0;l<f.length;l++){var p=f[l],b=k.consumer._sources.at(p.source);b=Df.computeSourceURL(k.consumer.sourceRoot,b,(this||ye)._sourceMapURL);(this||ye)._sources.add(b);b=(this||ye)._sources.indexOf(b);var d=null;p.name&&(d=k.consumer._names.at(p.name),(this||ye)._names.add(d),d=(this||ye)._names.indexOf(d));p={source:b,generatedLine:p.generatedLine+(k.generatedOffset.generatedLine-1),generatedColumn:p.generatedColumn+
(k.generatedOffset.generatedLine===p.generatedLine?k.generatedOffset.generatedColumn-1:0),originalLine:p.originalLine,originalColumn:p.originalColumn,name:d};(this||ye).__generatedMappings.push(p);"number"===typeof p.originalLine&&(this||ye).__originalMappings.push(p)}}CB((this||ye).__generatedMappings,Df.compareByGeneratedPositionsDeflated);CB((this||ye).__originalMappings,Df.compareByOriginalPositions)};var Yh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,DI=Hk,
oma=/(\r?\n)/;vh.fromStringWithSourceMap=function(c,k,f){function l(q,r){if(null===q||void 0===q.source)p.add(r);else{var v=f?DI.join(f,q.source):q.source;p.add(new vh(q.originalLine,q.originalColumn,v,r,q.name))}}var p=new vh,b=c.split(oma),d=0,h=function(){var q=d<b.length?b[d++]:void 0,r=(d<b.length?b[d++]:void 0)||"";return q+r},a=1,e=0,n=null;k.eachMapping(function(q){if(null!==n)if(a<q.generatedLine)l(n,h()),a++,e=0;else{var r=b[d]||"",v=r.substr(0,q.generatedColumn-e);b[d]=r.substr(q.generatedColumn-
e);e=q.generatedColumn;l(n,v);n=q;return}for(;a<q.generatedLine;)p.add(h()),a++;e<q.generatedColumn&&(r=b[d]||"",p.add(r.substr(0,q.generatedColumn)),b[d]=r.substr(q.generatedColumn),e=q.generatedColumn);n=q},this||Yh);d<b.length&&(n&&l(n,h()),p.add(b.splice(d).join("")));k.sources.forEach(function(q){var r=k.sourceContentFor(q);null!=r&&(null!=f&&(q=DI.join(f,q)),p.setSourceContent(q,r))});return p};vh.prototype.add=function(c){if(Array.isArray(c))c.forEach(function(k){this.add(k)},this||Yh);else if(c.$$$isSourceNode$$$||
"string"===typeof c)c&&(this||Yh).children.push(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this||Yh};vh.prototype.prepend=function(c){if(Array.isArray(c))for(var k=c.length-1;0<=k;k--)this.prepend(c[k]);else if(c.$$$isSourceNode$$$||"string"===typeof c)(this||Yh).children.unshift(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this||Yh};vh.prototype.walk=function(c){for(var k,
f=0,l=(this||Yh).children.length;f<l;f++)k=(this||Yh).children[f],k.$$$isSourceNode$$$?k.walk(c):""!==k&&c(k,{source:(this||Yh).source,line:(this||Yh).line,column:(this||Yh).column,name:(this||Yh).name})};vh.prototype.join=function(c){var k,f=(this||Yh).children.length;if(0<f){var l=[];for(k=0;k<f-1;k++)l.push((this||Yh).children[k]),l.push(c);l.push((this||Yh).children[k]);(this||Yh).children=l}return this||Yh};vh.prototype.replaceRight=function(c,k){var f=(this||Yh).children[(this||Yh).children.length-
1];f.$$$isSourceNode$$$?f.replaceRight(c,k):"string"===typeof f?(this||Yh).children[(this||Yh).children.length-1]=f.replace(c,k):(this||Yh).children.push("".replace(c,k));return this||Yh};vh.prototype.setSourceContent=function(c,k){(this||Yh).sourceContents[DI.toSetString(c)]=k};vh.prototype.walkSourceContents=function(c){for(var k=0,f=(this||Yh).children.length;k<f;k++)(this||Yh).children[k].$$$isSourceNode$$$&&(this||Yh).children[k].walkSourceContents(c);var l=Object.keys((this||Yh).sourceContents);
k=0;for(f=l.length;k<f;k++)c(DI.fromSetString(l[k]),(this||Yh).sourceContents[l[k]])};vh.prototype.toString=function(){var c="";this.walk(function(k){c+=k});return c};vh.prototype.toStringWithSourceMap=function(c){var k="",f=1,l=0,p=new bc(c),b=!1,d=null,h=null,a=null,e=null;this.walk(function(n,q){k+=n;null!==q.source&&null!==q.line&&null!==q.column?(d===q.source&&h===q.line&&a===q.column&&e===q.name||p.addMapping({source:q.source,original:{line:q.line,column:q.column},generated:{line:f,column:l},
name:q.name}),d=q.source,h=q.line,a=q.column,e=q.name,b=!0):b&&(p.addMapping({generated:{line:f,column:l}}),d=null,b=!1);for(var r=0,v=n.length;r<v;r++)10===n.charCodeAt(r)?(f++,l=0,r+1===v?(d=null,b=!1):b&&p.addMapping({source:q.source,original:{line:q.line,column:q.column},generated:{line:f,column:l},name:q.name})):l++});this.walkSourceContents(function(n,q){p.setSourceContent(n,q)});return{code:k,map:p}};var Uk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,bm=
{};(function(){function c(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function k(X,
ma){var ta="";for(ma|=0;0<ma;ma>>>=1,X+=X)ma&1&&(ta+=X);return ta}function f(X){var ma=X.length;return ma&&Sa.code.isLineTerminator(X.charCodeAt(ma-1))}function l(X,ma){for(var ta in ma)ma.hasOwnProperty(ta)&&(X[ta]=ma[ta]);return X}function p(X,ma){function ta(Zb){return"object"===typeof Zb&&Zb instanceof Object&&!(Zb instanceof RegExp)}var Pa;for(Pa in ma)if(ma.hasOwnProperty(Pa)){var Za=ma[Pa];ta(Za)?ta(X[Pa])?p(X[Pa],Za):X[Pa]=p({},Za):X[Pa]=Za}return X}function b(X,ma){return 8232===(X&-2)?(ma?
"u":"\\u")+(8232===X?"2028":"2029"):10===X||13===X?(ma?"":"\\")+(10===X?"n":"r"):String.fromCharCode(X)}function d(X,ma){if(8===X)return"\\b";if(12===X)return"\\f";if(9===X)return"\\t";var ta=X.toString(16).toUpperCase();return A||255<X?"\\u"+"0000".slice(ta.length)+ta:0!==X||Sa.code.isDecimalDigit(ma)?11===X?"\\x0B":"\\x"+"00".slice(ta.length)+ta:"\\0"}function h(X){if(92===X)return"\\\\";if(10===X)return"\\n";if(13===X)return"\\r";if(8232===X)return"\\u2028";if(8233===X)return"\\u2029";throw Error("Incorrectly classified character");
}function a(X){var ma,ta="";var Pa=0;for(ma=X.length;Pa<ma;++Pa){var Za=X[Pa];ta+=Array.isArray(Za)?a(Za):Za}return ta}function e(X,ma){if(!Oa)return Array.isArray(X)?a(X):X;if(null==ma){if(X instanceof t)return X;ma={}}return null==ma.loc?new t(null,null,Oa,X,ma.name||null):new t(ma.loc.start.line,ma.loc.start.column,!0===Oa?ma.loc.source||null:Oa,X,ma.name||null)}function n(){return Y?Y:" "}function q(X,ma){var ta=e(X).toString();if(0===ta.length)return[ma];var Pa=e(ma).toString();if(0===Pa.length)return[X];
ta=ta.charCodeAt(ta.length-1);Pa=Pa.charCodeAt(0);return(43===ta||45===ta)&&ta===Pa||Sa.code.isIdentifierPartES5(ta)&&Sa.code.isIdentifierPartES5(Pa)||47===ta&&105===Pa?[X,n(),ma]:Sa.code.isWhiteSpace(ta)||Sa.code.isLineTerminator(ta)||Sa.code.isWhiteSpace(Pa)||Sa.code.isLineTerminator(Pa)?[X,ma]:[X,Y,ma]}function r(X){var ma=u;u+=B;X(u);u=ma}function v(X,ma){if("Line"===X.type){if(f(X.value))return"//"+X.value;ma="//"+X.value;eb||(ma+="\n");return ma}if(da.format.indent.adjustMultilineComment&&/[\n\r]/.test(X.value)){var ta,
Pa;X=("/*"+X.value+"*/").split(/\r\n|[\r\n]/);var Za=Number.MAX_VALUE;var Zb=1;for(ta=X.length;Zb<ta;++Zb){var Pb=X[Zb];for(Pa=0;Pa<Pb.length&&Sa.code.isWhiteSpace(Pb.charCodeAt(Pa));)++Pa;Za>Pa&&(Za=Pa)}"undefined"!==typeof ma?(Pb=u,"*"===X[1][Za]&&(ma+=" "),u=ma):(Za&1&&--Za,Pb=u);Zb=1;for(ta=X.length;Zb<ta;++Zb)ma=e([u,X[Zb].slice(Za)]),X[Zb]=Oa?ma.join(""):ma;u=Pb;return X.join("\n")}return"/*"+X.value+"*/"}function y(X,ma){var ta;if(X.leadingComments&&0<X.leadingComments.length){var Pa=ma;if(eb){var Za=
X.leadingComments[0];ma=[];var Zb=Za.extendedRange;var Pb=Za.range;var Db=Va.substring(Zb[0],Pb[0]);var sc=(Db.match(/\n/g)||[]).length;0<sc?(ma.push(k("\n",sc)),ma.push([u,v(Za)])):(ma.push(Db),ma.push(v(Za)));sc=Pb;Db=1;for(ta=X.leadingComments.length;Db<ta;Db++)Za=X.leadingComments[Db],Pb=Za.range,sc=Va.substring(sc[1],Pb[0]),sc=(sc.match(/\n/g)||[]).length,ma.push(k("\n",sc)),ma.push([u,v(Za)]),sc=Pb;Db=Va.substring(Pb[1],Zb[1]);sc=(Db.match(/\n/g)||[]).length;ma.push(k("\n",sc))}else for(Za=
X.leadingComments[0],ma=[],na&&X.type===Bb.Program&&0===X.body.length&&ma.push("\n"),ma.push(v(Za)),f(e(ma).toString())||ma.push("\n"),Db=1,ta=X.leadingComments.length;Db<ta;++Db)Za=X.leadingComments[Db],Za=[v(Za)],f(e(Za).toString())||Za.push("\n"),ma.push([u,Za]);ma.push([u,Pa])}if(X.trailingComments)if(eb)Za=X.trailingComments[0],Zb=Za.extendedRange,Pb=Za.range,Db=Va.substring(Zb[0],Pb[0]),sc=(Db.match(/\n/g)||[]).length,0<sc?(ma.push(k("\n",sc)),ma.push([u,v(Za)])):(ma.push(Db),ma.push(v(Za)));
else{Pa=!f(e(ma).toString());Db=e([u,ma,B]).toString();for(ta=Db.length-1;0<=ta&&!Sa.code.isLineTerminator(Db.charCodeAt(ta));--ta);Zb=k(" ",Db.length-1-ta);Db=0;for(ta=X.trailingComments.length;Db<ta;++Db)Za=X.trailingComments[Db],Pa?(ma=0===Db?[ma,B]:[ma,Zb],ma.push(v(Za,Zb))):ma=[ma,[u,v(Za)]],Db===ta-1||f(e(ma).toString())||(ma=[ma,"\n"])}return ma}function D(X,ma,ta){for(var Pa=0;X<ma;X++)"\n"===Va[X]&&Pa++;for(X=1;X<Pa;X++)ta.push(T)}function E(X,ma,ta){return ma<ta?["(",X,")"]:X}function I(X){var ma;
var ta=X.split(/\r\n|\n/);X=1;for(ma=ta.length;X<ma;X++)ta[X]=T+u+ta[X];return ta}function K(){}function P(X){return e(X.name,X)}function N(X,ma){return X.async?"async"+(ma?n():Y):""}function aa(X){return X.generator&&!da.moz.starlessGenerator?"*"+Y:""}function m(X){var ma=X.value,ta="";ma.async&&(ta+=N(ma,!X.computed));ma.generator&&(ta+=aa(ma)?"*":"");return ta}var t,u,B,A,H,F,L,U,T,Y,wa,Ga,na,ea,da,ia,Oa,Va,eb;var Sa=BB;var Bb=TR.Syntax;var Z={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,
LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,OptionalChaining:16,Call:17,New:18,TaggedTemplate:19,Member:20,Primary:21};var sa={"||":Z.LogicalOR,"&&":Z.LogicalAND,"|":Z.BitwiseOR,"^":Z.BitwiseXOR,"&":Z.BitwiseAND,"==":Z.Equality,"!=":Z.Equality,"===":Z.Equality,"!==":Z.Equality,is:Z.Equality,isnt:Z.Equality,"<":Z.Relational,">":Z.Relational,"<=":Z.Relational,">=":Z.Relational,
"in":Z.Relational,"instanceof":Z.Relational,"<<":Z.BitwiseSHIFT,">>":Z.BitwiseSHIFT,">>>":Z.BitwiseSHIFT,"+":Z.Additive,"-":Z.Additive,"*":Z.Multiplicative,"%":Z.Multiplicative,"/":Z.Multiplicative,"**":Z.Exponentiation};K.prototype.maybeBlock=function(X,ma){var ta,Pa=this||Uk;var Za=!da.comment||!X.leadingComments;if(X.type===Bb.BlockStatement&&Za)return[Y,this.generateStatement(X,ma)];if(X.type===Bb.EmptyStatement&&Za)return";";r(function(){ta=[T,[u,Pa.generateStatement(X,ma)]]});return ta};K.prototype.maybeBlockSuffix=
function(X,ma){var ta=f(e(ma).toString());return X.type!==Bb.BlockStatement||da.comment&&X.leadingComments||ta?ta?[ma,u]:[ma,T,u]:[ma,Y]};K.prototype.generatePattern=function(X,ma,ta){return X.type===Bb.Identifier?P(X):this.generateExpression(X,ma,ta)};K.prototype.generateFunctionParams=function(X){var ma;var ta=!1;if(X.type!==Bb.ArrowFunctionExpression||X.rest||X.defaults&&0!==X.defaults.length||1!==X.params.length||X.params[0].type!==Bb.Identifier){var Pa=X.type===Bb.ArrowFunctionExpression?[N(X,
!1)]:[];Pa.push("(");X.defaults&&(ta=!0);var Za=0;for(ma=X.params.length;Za<ma;++Za)ta&&X.defaults[Za]?Pa.push(this.generateAssignment(X.params[Za],X.defaults[Za],"=",Z.Assignment,7)):Pa.push(this.generatePattern(X.params[Za],Z.Assignment,7)),Za+1<ma&&Pa.push(","+Y);X.rest&&(X.params.length&&Pa.push(","+Y),Pa.push("..."),Pa.push(P(X.rest)));Pa.push(")")}else Pa=[N(X,!0),P(X.params[0])];return Pa};K.prototype.generateFunctionBody=function(X){var ma=this.generateFunctionParams(X);X.type===Bb.ArrowFunctionExpression&&
(ma.push(Y),ma.push("=>"));X.expression?(ma.push(Y),X=this.generateExpression(X.body,Z.Assignment,7),"{"===X.toString().charAt(0)&&(X=["(",X,")"]),ma.push(X)):ma.push(this.maybeBlock(X.body,9));return ma};K.prototype.generateIterationForStatement=function(X,ma,ta){var Pa=["for"+(ma.await?n()+"await":"")+Y+"("],Za=this||Uk;r(function(){ma.left.type===Bb.VariableDeclaration?r(function(){Pa.push(ma.left.kind+n());Pa.push(Za.generateStatement(ma.left.declarations[0],0))}):Pa.push(Za.generateExpression(ma.left,
Z.Call,7));Pa=q(Pa,X);Pa=[q(Pa,Za.generateExpression(ma.right,Z.Assignment,7)),")"]});Pa.push(this.maybeBlock(ma.body,ta));return Pa};K.prototype.generatePropertyKey=function(X,ma){var ta=[];ma&&ta.push("[");ta.push(this.generateExpression(X,Z.Assignment,7));ma&&ta.push("]");return ta};K.prototype.generateAssignment=function(X,ma,ta,Pa,Za){Z.Assignment<Pa&&(Za|=1);return E([this.generateExpression(X,Z.Call,Za),Y+ta+Y,this.generateExpression(ma,Z.Assignment,Za)],Z.Assignment,Pa)};K.prototype.semicolon=
function(X){return!Ga&&X&32?"":";"};K.Statement={BlockStatement:function(X,ma){var ta,Pa,Za=["{",T],Zb=this||Uk;r(function(){0===X.body.length&&eb&&(ta=X.range,2<ta[1]-ta[0]&&(Pa=Va.substring(ta[0]+1,ta[1]-1),"\n"===Pa[0]&&(Za=["{"]),Za.push(Pa)));var Pb;var Db=1;ma&8&&(Db|=16);var sc=0;for(Pb=X.body.length;sc<Pb;++sc){eb&&(0===sc&&(X.body[0].leadingComments&&(ta=X.body[0].leadingComments[0].extendedRange,Pa=Va.substring(ta[0],ta[1]),"\n"===Pa[0]&&(Za=["{"])),X.body[0].leadingComments||D(X.range[0],
X.body[0].range[0],Za)),0<sc&&(X.body[sc-1].trailingComments||X.body[sc].leadingComments||D(X.body[sc-1].range[1],X.body[sc].range[0],Za)));sc===Pb-1&&(Db|=32);var wc=X.body[sc].leadingComments&&eb?Zb.generateStatement(X.body[sc],Db):[u,Zb.generateStatement(X.body[sc],Db)];Za.push(wc);f(e(wc).toString())||(eb&&sc<Pb-1?X.body[sc+1].leadingComments||Za.push(T):Za.push(T));eb&&sc===Pb-1&&(X.body[sc].trailingComments||D(X.body[sc].range[1],X.range[1],Za))}});Za.push([u,"}"]);return Za},BreakStatement:function(X,
ma){return X.label?"break "+X.label.name+this.semicolon(ma):"break"+this.semicolon(ma)},ContinueStatement:function(X,ma){return X.label?"continue "+X.label.name+this.semicolon(ma):"continue"+this.semicolon(ma)},ClassBody:function(X,ma){var ta=["{",T],Pa=this||Uk;r(function(Za){var Zb;var Pb=0;for(Zb=X.body.length;Pb<Zb;++Pb)ta.push(Za),ta.push(Pa.generateExpression(X.body[Pb],Z.Sequence,7)),Pb+1<Zb&&ta.push(T)});f(e(ta).toString())||ta.push(T);ta.push(u);ta.push("}");return ta},ClassDeclaration:function(X,
ma){ma=["class"];X.id&&(ma=q(ma,this.generateExpression(X.id,Z.Sequence,7)));if(X.superClass){var ta=q("extends",this.generateExpression(X.superClass,Z.Unary,7));ma=q(ma,ta)}ma.push(Y);ma.push(this.generateStatement(X.body,33));return ma},DirectiveStatement:function(X,ma){if(da.raw&&X.raw)return X.raw+this.semicolon(ma);X=X.directive;var ta;var Pa="double"===L?'"':"'";var Za=0;for(ta=X.length;Za<ta;++Za){var Zb=X.charCodeAt(Za);if(39===Zb){Pa='"';break}else if(34===Zb){Pa="'";break}else 92===Zb&&
++Za}return Pa+X+Pa+this.semicolon(ma)},DoWhileStatement:function(X,ma){var ta=q("do",this.maybeBlock(X.body,1));ta=this.maybeBlockSuffix(X.body,ta);return q(ta,["while"+Y+"(",this.generateExpression(X.test,Z.Sequence,7),")"+this.semicolon(ma)])},CatchClause:function(X,ma){var ta,Pa=this||Uk;r(function(){if(X.param){if(ta=["catch"+Y+"(",Pa.generateExpression(X.param,Z.Sequence,7),")"],X.guard){var Za=Pa.generateExpression(X.guard,Z.Sequence,7);ta.splice(2,0," if ",Za)}}else ta=["catch"]});ta.push(this.maybeBlock(X.body,
1));return ta},DebuggerStatement:function(X,ma){return"debugger"+this.semicolon(ma)},EmptyStatement:function(X,ma){return";"},ExportDefaultDeclaration:function(X,ma){var ta=["export"];var Pa=ma&32?33:1;ta=q(ta,"default");return ta=K.Statement.hasOwnProperty(X.declaration.type)?q(ta,this.generateStatement(X.declaration,Pa)):q(ta,this.generateExpression(X.declaration,Z.Assignment,7)+this.semicolon(ma))},ExportNamedDeclaration:function(X,ma){var ta=["export"],Pa=this||Uk;var Za=ma&32?33:1;if(X.declaration)return q(ta,
this.generateStatement(X.declaration,Za));X.specifiers&&(0===X.specifiers.length?ta=q(ta,"{"+Y+"}"):X.specifiers[0].type===Bb.ExportBatchSpecifier?ta=q(ta,this.generateExpression(X.specifiers[0],Z.Sequence,7)):(ta=q(ta,"{"),r(function(Zb){var Pb;ta.push(T);var Db=0;for(Pb=X.specifiers.length;Db<Pb;++Db)ta.push(Zb),ta.push(Pa.generateExpression(X.specifiers[Db],Z.Sequence,7)),Db+1<Pb&&ta.push(","+T)}),f(e(ta).toString())||ta.push(T),ta.push(u+"}")),X.source?ta=q(ta,["from"+Y,this.generateExpression(X.source,
Z.Sequence,7),this.semicolon(ma)]):ta.push(this.semicolon(ma)));return ta},ExportAllDeclaration:function(X,ma){return["export"+Y,"*"+Y,"from"+Y,this.generateExpression(X.source,Z.Sequence,7),this.semicolon(ma)]},ExpressionStatement:function(X,ma){function ta(Db){if("class"!==Db.slice(0,5))return!1;Db=Db.charCodeAt(5);return 123===Db||Sa.code.isWhiteSpace(Db)||Sa.code.isLineTerminator(Db)}function Pa(Db){if("function"!==Db.slice(0,8))return!1;Db=Db.charCodeAt(8);return 40===Db||Sa.code.isWhiteSpace(Db)||
42===Db||Sa.code.isLineTerminator(Db)}function Za(Db){var sc;if("async"!==Db.slice(0,5)||!Sa.code.isWhiteSpace(Db.charCodeAt(5)))return!1;var wc=6;for(sc=Db.length;wc<sc&&Sa.code.isWhiteSpace(Db.charCodeAt(wc));++wc);if(wc===sc||"function"!==Db.slice(wc,wc+8))return!1;Db=Db.charCodeAt(wc+8);return 40===Db||Sa.code.isWhiteSpace(Db)||42===Db||Sa.code.isLineTerminator(Db)}var Zb=[this.generateExpression(X.expression,Z.Sequence,7)];var Pb=e(Zb).toString();123===Pb.charCodeAt(0)||ta(Pb)||Pa(Pb)||Za(Pb)||
ea&&ma&16&&X.expression.type===Bb.Literal&&"string"===typeof X.expression.value?Zb=["(",Zb,")"+this.semicolon(ma)]:Zb.push(this.semicolon(ma));return Zb},ImportDeclaration:function(X,ma){var ta=this||Uk;if(0===X.specifiers.length)return["import",Y,this.generateExpression(X.source,Z.Sequence,7),this.semicolon(ma)];var Pa=["import"];var Za=0;X.specifiers[Za].type===Bb.ImportDefaultSpecifier&&(Pa=q(Pa,[this.generateExpression(X.specifiers[Za],Z.Sequence,7)]),++Za);X.specifiers[Za]&&(0!==Za&&Pa.push(","),
X.specifiers[Za].type===Bb.ImportNamespaceSpecifier?Pa=q(Pa,[Y,this.generateExpression(X.specifiers[Za],Z.Sequence,7)]):(Pa.push(Y+"{"),1===X.specifiers.length-Za?(Pa.push(Y),Pa.push(this.generateExpression(X.specifiers[Za],Z.Sequence,7)),Pa.push(Y+"}"+Y)):(r(function(Zb){var Pb;Pa.push(T);var Db=Za;for(Pb=X.specifiers.length;Db<Pb;++Db)Pa.push(Zb),Pa.push(ta.generateExpression(X.specifiers[Db],Z.Sequence,7)),Db+1<Pb&&Pa.push(","+T)}),f(e(Pa).toString())||Pa.push(T),Pa.push(u+"}"+Y))));return Pa=
q(Pa,["from"+Y,this.generateExpression(X.source,Z.Sequence,7),this.semicolon(ma)])},VariableDeclarator:function(X,ma){ma=ma&1?7:6;return X.init?[this.generateExpression(X.id,Z.Assignment,ma),Y,"=",Y,this.generateExpression(X.init,Z.Assignment,ma)]:this.generatePattern(X.id,Z.Assignment,ma)},VariableDeclaration:function(X,ma){function ta(){Zb=X.declarations[0];da.comment&&Zb.leadingComments?(Db.push("\n"),Db.push([u,Pb.generateStatement(Zb,sc)])):(Db.push(n()),Db.push(Pb.generateStatement(Zb,sc)));
Pa=1;for(Za=X.declarations.length;Pa<Za;++Pa)Zb=X.declarations[Pa],da.comment&&Zb.leadingComments?(Db.push(","+T),Db.push([u,Pb.generateStatement(Zb,sc)])):(Db.push(","+Y),Db.push(Pb.generateStatement(Zb,sc)))}var Pa,Za,Zb,Pb=this||Uk;var Db=[X.kind];var sc=ma&1?1:0;1<X.declarations.length?r(ta):ta();Db.push(this.semicolon(ma));return Db},ThrowStatement:function(X,ma){return[q("throw",this.generateExpression(X.argument,Z.Sequence,7)),this.semicolon(ma)]},TryStatement:function(X,ma){var ta;ma=["try",
this.maybeBlock(X.block,1)];ma=this.maybeBlockSuffix(X.block,ma);if(X.handlers){var Pa=0;for(ta=X.handlers.length;Pa<ta;++Pa)if(ma=q(ma,this.generateStatement(X.handlers[Pa],1)),X.finalizer||Pa+1!==ta)ma=this.maybeBlockSuffix(X.handlers[Pa].body,ma)}else{var Za=X.guardedHandlers||[];Pa=0;for(ta=Za.length;Pa<ta;++Pa)if(ma=q(ma,this.generateStatement(Za[Pa],1)),X.finalizer||Pa+1!==ta)ma=this.maybeBlockSuffix(Za[Pa].body,ma);if(X.handler)if(Array.isArray(X.handler))for(Pa=0,ta=X.handler.length;Pa<ta;++Pa){if(ma=
q(ma,this.generateStatement(X.handler[Pa],1)),X.finalizer||Pa+1!==ta)ma=this.maybeBlockSuffix(X.handler[Pa].body,ma)}else ma=q(ma,this.generateStatement(X.handler,1)),X.finalizer&&(ma=this.maybeBlockSuffix(X.handler.body,ma))}X.finalizer&&(ma=q(ma,["finally",this.maybeBlock(X.finalizer,1)]));return ma},SwitchStatement:function(X,ma){var ta,Pa,Za=this||Uk;r(function(){ta=["switch"+Y+"(",Za.generateExpression(X.discriminant,Z.Sequence,7),")"+Y+"{"+T]});if(X.cases){var Zb=1;var Pb=0;for(Pa=X.cases.length;Pb<
Pa;++Pb)Pb===Pa-1&&(Zb|=32),ma=[u,this.generateStatement(X.cases[Pb],Zb)],ta.push(ma),f(e(ma).toString())||ta.push(T)}ta.push([u,"}"]);return ta},SwitchCase:function(X,ma){var ta,Pa,Za,Zb,Pb,Db=this||Uk;r(function(){ta=X.test?[q("case",Db.generateExpression(X.test,Z.Sequence,7)),":"]:["default:"];Za=0;(Zb=X.consequent.length)&&X.consequent[0].type===Bb.BlockStatement&&(Pa=Db.maybeBlock(X.consequent[0],1),ta.push(Pa),Za=1);Za===Zb||f(e(ta).toString())||ta.push(T);for(Pb=1;Za<Zb;++Za)Za===Zb-1&&ma&
32&&(Pb|=32),Pa=[u,Db.generateStatement(X.consequent[Za],Pb)],ta.push(Pa),Za+1===Zb||f(e(Pa).toString())||ta.push(T)});return ta},IfStatement:function(X,ma){var ta=this||Uk;r(function(){Za=["if"+Y+"(",ta.generateExpression(X.test,Z.Sequence,7),")"]});var Pa=1;ma&32&&(Pa|=32);if(X.alternate){Za.push(this.maybeBlock(X.consequent,1));var Za=this.maybeBlockSuffix(X.consequent,Za);Za=X.alternate.type===Bb.IfStatement?q(Za,["else ",this.generateStatement(X.alternate,Pa)]):q(Za,q("else",this.maybeBlock(X.alternate,
Pa)))}else Za.push(this.maybeBlock(X.consequent,Pa));return Za},ForStatement:function(X,ma){var ta,Pa=this||Uk;r(function(){ta=["for"+Y+"("];X.init?X.init.type===Bb.VariableDeclaration?ta.push(Pa.generateStatement(X.init,0)):(ta.push(Pa.generateExpression(X.init,Z.Sequence,6)),ta.push(";")):ta.push(";");X.test&&(ta.push(Y),ta.push(Pa.generateExpression(X.test,Z.Sequence,7)));ta.push(";");X.update&&(ta.push(Y),ta.push(Pa.generateExpression(X.update,Z.Sequence,7)));ta.push(")")});ta.push(this.maybeBlock(X.body,
ma&32?33:1));return ta},ForInStatement:function(X,ma){return this.generateIterationForStatement("in",X,ma&32?33:1)},ForOfStatement:function(X,ma){return this.generateIterationForStatement("of",X,ma&32?33:1)},LabeledStatement:function(X,ma){return[X.label.name+":",this.maybeBlock(X.body,ma&32?33:1)]},Program:function(X,ma){var ta;var Pa=X.body.length;ma=[na&&0<Pa?"\n":""];var Za=17;for(ta=0;ta<Pa;++ta){na||ta!==Pa-1||(Za|=32);eb&&(0===ta&&(X.body[0].leadingComments||D(X.range[0],X.body[ta].range[0],
ma)),0<ta&&(X.body[ta-1].trailingComments||X.body[ta].leadingComments||D(X.body[ta-1].range[1],X.body[ta].range[0],ma)));var Zb=[u,this.generateStatement(X.body[ta],Za)];ma.push(Zb);ta+1<Pa&&!f(e(Zb).toString())&&(eb?X.body[ta+1].leadingComments||ma.push(T):ma.push(T));eb&&ta===Pa-1&&(X.body[ta].trailingComments||D(X.body[ta].range[1],X.range[1],ma))}return ma},FunctionDeclaration:function(X,ma){return[N(X,!0),"function",aa(X)||n(),X.id?P(X.id):"",this.generateFunctionBody(X)]},ReturnStatement:function(X,
ma){return X.argument?[q("return",this.generateExpression(X.argument,Z.Sequence,7)),this.semicolon(ma)]:["return"+this.semicolon(ma)]},WhileStatement:function(X,ma){var ta,Pa=this||Uk;r(function(){ta=["while"+Y+"(",Pa.generateExpression(X.test,Z.Sequence,7),")"]});ta.push(this.maybeBlock(X.body,ma&32?33:1));return ta},WithStatement:function(X,ma){var ta,Pa=this||Uk;r(function(){ta=["with"+Y+"(",Pa.generateExpression(X.object,Z.Sequence,7),")"]});ta.push(this.maybeBlock(X.body,ma&32?33:1));return ta}};
l(K.prototype,K.Statement);K.Expression={SequenceExpression:function(X,ma,ta){var Pa;Z.Sequence<ma&&(ta|=1);var Za=[];var Zb=0;for(Pa=X.expressions.length;Zb<Pa;++Zb)Za.push(this.generateExpression(X.expressions[Zb],Z.Assignment,ta)),Zb+1<Pa&&Za.push(","+Y);return E(Za,Z.Sequence,ma)},AssignmentExpression:function(X,ma,ta){return this.generateAssignment(X.left,X.right,X.operator,ma,ta)},ArrowFunctionExpression:function(X,ma,ta){return E(this.generateFunctionBody(X),Z.ArrowFunction,ma)},ConditionalExpression:function(X,
ma,ta){Z.Conditional<ma&&(ta|=1);return E([this.generateExpression(X.test,Z.LogicalOR,ta),Y+"?"+Y,this.generateExpression(X.consequent,Z.Assignment,ta),Y+":"+Y,this.generateExpression(X.alternate,Z.Assignment,ta)],Z.Conditional,ma)},LogicalExpression:function(X,ma,ta){return this.BinaryExpression(X,ma,ta)},BinaryExpression:function(X,ma,ta){var Pa=sa[X.operator];var Za="**"===X.operator?Z.Postfix:Pa;var Zb="**"===X.operator?Pa:Pa+1;Pa<ma&&(ta|=1);Za=this.generateExpression(X.left,Za,ta);var Pb=Za.toString();
Pb=47===Pb.charCodeAt(Pb.length-1)&&Sa.code.isIdentifierPartES5(X.operator.charCodeAt(0))?[Za,n(),X.operator]:q(Za,X.operator);Za=this.generateExpression(X.right,Zb,ta);"/"===X.operator&&"/"===Za.toString().charAt(0)||"<"===X.operator.slice(-1)&&"!--"===Za.toString().slice(0,3)?(Pb.push(n()),Pb.push(Za)):Pb=q(Pb,Za);return"in"!==X.operator||ta&1?E(Pb,Pa,ma):["(",Pb,")"]},CallExpression:function(X,ma,ta){var Pa;var Za=[this.generateExpression(X.callee,Z.Call,3)];X.optional&&Za.push("?.");Za.push("(");
var Zb=0;for(Pa=X.arguments.length;Zb<Pa;++Zb)Za.push(this.generateExpression(X.arguments[Zb],Z.Assignment,7)),Zb+1<Pa&&Za.push(","+Y);Za.push(")");return ta&2?E(Za,Z.Call,ma):["(",Za,")"]},ChainExpression:function(X,ma,ta){Z.OptionalChaining<ma&&(ta|=2);X=this.generateExpression(X.expression,Z.OptionalChaining,ta);return E(X,Z.OptionalChaining,ma)},NewExpression:function(X,ma,ta){var Pa=X.arguments.length;var Za=q("new",this.generateExpression(X.callee,Z.New,ta&4&&!wa&&0===Pa?5:1));if(!(ta&4)||wa||
0<Pa){Za.push("(");for(ta=0;ta<Pa;++ta)Za.push(this.generateExpression(X.arguments[ta],Z.Assignment,7)),ta+1<Pa&&Za.push(","+Y);Za.push(")")}return E(Za,Z.New,ma)},MemberExpression:function(X,ma,ta){var Pa=[this.generateExpression(X.object,Z.Call,ta&2?3:1)];X.computed?(X.optional&&Pa.push("?."),Pa.push("["),Pa.push(this.generateExpression(X.property,Z.Sequence,ta&2?7:5)),Pa.push("]")):(X.optional||X.object.type!==Bb.Literal||"number"!==typeof X.object.value||(ta=e(Pa).toString(),0>ta.indexOf(".")&&
!/[eExX]/.test(ta)&&Sa.code.isDecimalDigit(ta.charCodeAt(ta.length-1))&&!(2<=ta.length&&48===ta.charCodeAt(0))&&Pa.push(" ")),Pa.push(X.optional?"?.":"."),Pa.push(P(X.property)));return E(Pa,Z.Member,ma)},MetaProperty:function(X,ma,ta){ta=[];ta.push("string"===typeof X.meta?X.meta:P(X.meta));ta.push(".");ta.push("string"===typeof X.property?X.property:P(X.property));return E(ta,Z.Member,ma)},UnaryExpression:function(X,ma,ta){var Pa=this.generateExpression(X.argument,Z.Unary,7);if(""===Y)ta=q(X.operator,
Pa);else if(ta=[X.operator],2<X.operator.length)ta=q(ta,Pa);else{X=e(ta).toString();var Za=X.charCodeAt(X.length-1);X=Pa.toString().charCodeAt(0);((43===Za||45===Za)&&Za===X||Sa.code.isIdentifierPartES5(Za)&&Sa.code.isIdentifierPartES5(X))&&ta.push(n());ta.push(Pa)}return E(ta,Z.Unary,ma)},YieldExpression:function(X,ma,ta){ta=X.delegate?"yield*":"yield";X.argument&&(ta=q(ta,this.generateExpression(X.argument,Z.Yield,7)));return E(ta,Z.Yield,ma)},AwaitExpression:function(X,ma,ta){X=q(X.all?"await*":
"await",this.generateExpression(X.argument,Z.Await,7));return E(X,Z.Await,ma)},UpdateExpression:function(X,ma,ta){return X.prefix?E([X.operator,this.generateExpression(X.argument,Z.Unary,7)],Z.Unary,ma):E([this.generateExpression(X.argument,Z.Postfix,7),X.operator],Z.Postfix,ma)},FunctionExpression:function(X,ma,ta){ma=[N(X,!0),"function"];X.id?(ma.push(aa(X)||n()),ma.push(P(X.id))):ma.push(aa(X)||Y);ma.push(this.generateFunctionBody(X));return ma},ArrayPattern:function(X,ma,ta){return this.ArrayExpression(X,
ma,ta,!0)},ArrayExpression:function(X,ma,ta,Pa){var Za=this||Uk;if(!X.elements.length)return"[]";var Zb=Pa?!1:1<X.elements.length;var Pb=["[",Zb?T:""];r(function(Db){var sc;var wc=0;for(sc=X.elements.length;wc<sc;++wc)X.elements[wc]?(Pb.push(Zb?Db:""),Pb.push(Za.generateExpression(X.elements[wc],Z.Assignment,7))):(Zb&&Pb.push(Db),wc+1===sc&&Pb.push(",")),wc+1<sc&&Pb.push(","+(Zb?T:Y))});Zb&&!f(e(Pb).toString())&&Pb.push(T);Pb.push(Zb?u:"");Pb.push("]");return Pb},RestElement:function(X,ma,ta){return"..."+
this.generatePattern(X.argument)},ClassExpression:function(X,ma,ta){ma=["class"];X.id&&(ma=q(ma,this.generateExpression(X.id,Z.Sequence,7)));X.superClass&&(ta=q("extends",this.generateExpression(X.superClass,Z.Unary,7)),ma=q(ma,ta));ma.push(Y);ma.push(this.generateStatement(X.body,33));return ma},MethodDefinition:function(X,ma,ta){ma=X["static"]?["static"+Y]:[];X="get"===X.kind||"set"===X.kind?[q(X.kind,this.generatePropertyKey(X.key,X.computed)),this.generateFunctionBody(X.value)]:[m(X),this.generatePropertyKey(X.key,
X.computed),this.generateFunctionBody(X.value)];return q(ma,X)},Property:function(X,ma,ta){return"get"===X.kind||"set"===X.kind?[X.kind,n(),this.generatePropertyKey(X.key,X.computed),this.generateFunctionBody(X.value)]:X.shorthand?"AssignmentPattern"===X.value.type?this.AssignmentPattern(X.value,Z.Sequence,7):this.generatePropertyKey(X.key,X.computed):X.method?[m(X),this.generatePropertyKey(X.key,X.computed),this.generateFunctionBody(X.value)]:[this.generatePropertyKey(X.key,X.computed),":"+Y,this.generateExpression(X.value,
Z.Assignment,7)]},ObjectExpression:function(X,ma,ta){var Pa,Za,Zb=this||Uk;if(!X.properties.length)return"{}";var Pb=1<X.properties.length;r(function(){Za=Zb.generateExpression(X.properties[0],Z.Sequence,7)});if(!Pb&&!/[\r\n]/g.test(e(Za).toString()))return["{",Y,Za,Y,"}"];r(function(Db){var sc;Pa=["{",T,Db,Za];if(Pb){Pa.push(","+T);var wc=1;for(sc=X.properties.length;wc<sc;++wc)Pa.push(Db),Pa.push(Zb.generateExpression(X.properties[wc],Z.Sequence,7)),wc+1<sc&&Pa.push(","+T)}});f(e(Pa).toString())||
Pa.push(T);Pa.push(u);Pa.push("}");return Pa},AssignmentPattern:function(X,ma,ta){return this.generateAssignment(X.left,X.right,"=",ma,ta)},ObjectPattern:function(X,ma,ta){var Pa=this||Uk;if(!X.properties.length)return"{}";var Za=!1;if(1===X.properties.length){var Zb=X.properties[0];Zb.type===Bb.Property&&Zb.value.type!==Bb.Identifier&&(Za=!0)}else for(ma=0,ta=X.properties.length;ma<ta;++ma)if(Zb=X.properties[ma],Zb.type===Bb.Property&&!Zb.shorthand){Za=!0;break}var Pb=["{",Za?T:""];r(function(Db){var sc;
var wc=0;for(sc=X.properties.length;wc<sc;++wc)Pb.push(Za?Db:""),Pb.push(Pa.generateExpression(X.properties[wc],Z.Sequence,7)),wc+1<sc&&Pb.push(","+(Za?T:Y))});Za&&!f(e(Pb).toString())&&Pb.push(T);Pb.push(Za?u:"");Pb.push("}");return Pb},ThisExpression:function(X,ma,ta){return"this"},Super:function(X,ma,ta){return"super"},Identifier:function(X,ma,ta){return P(X)},ImportDefaultSpecifier:function(X,ma,ta){return P(X.id||X.local)},ImportNamespaceSpecifier:function(X,ma,ta){ma=["*"];(X=X.id||X.local)&&
ma.push(Y+"as"+n()+P(X));return ma},ImportSpecifier:function(X,ma,ta){ma=X.imported;ta=[ma.name];(X=X.local)&&X.name!==ma.name&&ta.push(n()+"as"+n()+P(X));return ta},ExportSpecifier:function(X,ma,ta){ma=X.local;ta=[ma.name];(X=X.exported)&&X.name!==ma.name&&ta.push(n()+"as"+n()+P(X));return ta},Literal:function(X,ma,ta){if(X.hasOwnProperty("raw")&&ia&&da.raw)try{var Pa=ia(X.raw).body[0].expression;if(Pa.type===Bb.Literal&&Pa.value===X.value)return X.raw}catch(wc){}if(X.regex)return"/"+X.regex.pattern+
"/"+X.regex.flags;if(null===X.value)return"null";if("string"===typeof X.value){X=X.value;ma="";var Za=0,Zb=0,Pb;ta=0;for(Pa=X.length;ta<Pa;++ta){var Db=X.charCodeAt(ta);if(39===Db)++Za;else if(34===Db)++Zb;else if(47===Db&&A)ma+="\\";else if(Sa.code.isLineTerminator(Db)||92===Db){ma+=h(Db);continue}else if(!Sa.code.isIdentifierPartES5(Db)&&(A&&32>Db||!A&&!U&&(32>Db||126<Db))){ma+=d(Db,X.charCodeAt(ta+1));continue}ma+=String.fromCharCode(Db)}var sc=(Pb=!("double"===L||"auto"===L&&Zb<Za))?"'":'"';if(Pb?
Za:Zb){X=ma;ma=sc;ta=0;for(Pa=X.length;ta<Pa;++ta){Db=X.charCodeAt(ta);if(39===Db&&Pb||34===Db&&!Pb)ma+="\\";ma+=String.fromCharCode(Db)}X=ma+sc}else X=sc+ma+sc;return X}if("number"===typeof X.value){X=X.value;if(X!==X)throw Error("Numeric literal whose value is NaN");if(0>X||0===X&&0>1/X)throw Error("Numeric literal whose value is negative");if(X===1/0)X=A?"null":H?"1e400":"1e+400";else{ma=""+X;if(H&&!(3>ma.length)){ta=ma.indexOf(".");A||48!==ma.charCodeAt(0)||1!==ta||(ta=0,ma=ma.slice(1));Pa=ma;
ma=ma.replace("e+","e");Db=0;0<(Za=Pa.indexOf("e"))&&(Db=+Pa.slice(Za+1),Pa=Pa.slice(0,Za));0<=ta&&(Db-=Pa.length-ta-1,Pa=+(Pa.slice(0,ta)+Pa.slice(ta+1))+"");for(Za=0;48===Pa.charCodeAt(Pa.length+Za-1);)--Za;0!==Za&&(Db-=Za,Pa=Pa.slice(0,Za));0!==Db&&(Pa+="e"+Db);(Pa.length<ma.length||F&&1E12<X&&Math.floor(X)===X&&(Pa="0x"+X.toString(16)).length<ma.length)&&+Pa===X&&(ma=Pa)}X=ma}return X}if("boolean"===typeof X.value)return X.value?"true":"false";X=X.value;ma=X.toString();if(X.source)if(ta=ma.match(/\/([^/]*)$/)){ta=
ta[1];ma="";Pb=Zb=!1;Pa=0;for(Db=X.source.length;Pa<Db;++Pa)Za=X.source.charCodeAt(Pa),Pb?(ma+=b(Za,Pb),Pb=!1):(Zb?93===Za&&(Zb=!1):47===Za?ma+="\\":91===Za&&(Zb=!0),ma+=b(Za,Pb),Pb=92===Za);X="/"+ma+"/"+ta}else X=ma;else X=ma;return X},GeneratorExpression:function(X,ma,ta){return this.ComprehensionExpression(X,ma,ta)},ComprehensionExpression:function(X,ma,ta){var Pa,Za,Zb=this||Uk;var Pb=X.type===Bb.GeneratorExpression?["("]:["["];if(da.moz.comprehensionExpressionStartsWithAssignment){var Db=this.generateExpression(X.body,
Z.Assignment,7);Pb.push(Db)}X.blocks&&r(function(){Pa=0;for(Za=X.blocks.length;Pa<Za;++Pa)Db=Zb.generateExpression(X.blocks[Pa],Z.Sequence,7),0<Pa||da.moz.comprehensionExpressionStartsWithAssignment?Pb=q(Pb,Db):Pb.push(Db)});X.filter&&(Pb=q(Pb,"if"+Y),Db=this.generateExpression(X.filter,Z.Sequence,7),Pb=q(Pb,["(",Db,")"]));da.moz.comprehensionExpressionStartsWithAssignment||(Db=this.generateExpression(X.body,Z.Assignment,7),Pb=q(Pb,Db));Pb.push(X.type===Bb.GeneratorExpression?")":"]");return Pb},
ComprehensionBlock:function(X,ma,ta){ma=X.left.type===Bb.VariableDeclaration?[X.left.kind,n(),this.generateStatement(X.left.declarations[0],0)]:this.generateExpression(X.left,Z.Call,7);ma=q(ma,X.of?"of":"in");ma=q(ma,this.generateExpression(X.right,Z.Sequence,7));return["for"+Y+"(",ma,")"]},SpreadElement:function(X,ma,ta){return["...",this.generateExpression(X.argument,Z.Assignment,7)]},TaggedTemplateExpression:function(X,ma,ta){var Pa=3;ta&2||(Pa=1);X=[this.generateExpression(X.tag,Z.Call,Pa),this.generateExpression(X.quasi,
Z.Primary,4)];return E(X,Z.TaggedTemplate,ma)},TemplateElement:function(X,ma,ta){return X.value.raw},TemplateLiteral:function(X,ma,ta){var Pa;ma=["`"];ta=0;for(Pa=X.quasis.length;ta<Pa;++ta)ma.push(this.generateExpression(X.quasis[ta],Z.Primary,7)),ta+1<Pa&&(ma.push("${"+Y),ma.push(this.generateExpression(X.expressions[ta],Z.Sequence,7)),ma.push(Y+"}"));ma.push("`");return ma},ModuleSpecifier:function(X,ma,ta){return this.Literal(X,ma,ta)},ImportExpression:function(X,ma,ta){return E(["import(",this.generateExpression(X.source,
Z.Assignment,7),")"],Z.Call,ma)}};l(K.prototype,K.Expression);K.prototype.generateExpression=function(X,ma,ta){var Pa=X.type||Bb.Property;if(da.verbatim&&X.hasOwnProperty(da.verbatim))return Pa=X[da.verbatim],"string"===typeof Pa?ta=E(I(Pa),Z.Sequence,ma):(ta=I(Pa.content),Pa=null!=Pa.precedence?Pa.precedence:Z.Sequence,ta=E(ta,Pa,ma)),e(ta,X);ma=this[Pa](X,ma,ta);da.comment&&(ma=y(X,ma));return e(ma,X)};K.prototype.generateStatement=function(X,ma){ma=this[X.type](X,ma);da.comment&&(ma=y(X,ma));var ta=
e(ma).toString();X.type!==Bb.Program||na||""!==T||"\n"!==ta.charAt(ta.length-1)||(ma=Oa?e(ma).replaceRight(/\s+$/,""):ta.replace(/\s+$/,""));return e(ma,X)};var Da=c().format;bm.version="2.0.0";bm.generate=function(X,ma){var ta=c();null!=ma?("string"===typeof ma.indent&&(ta.format.indent.style=ma.indent),"number"===typeof ma.base&&(ta.format.indent.base=ma.base),ma=p(ta,ma),B=ma.format.indent.style,u="string"===typeof ma.base?ma.base:k(B,ma.format.indent.base)):(ma=ta,B=ma.format.indent.style,u=k(B,
ma.format.indent.base));A=ma.format.json;H=ma.format.renumber;F=A?!1:ma.format.hexadecimal;L=A?"double":ma.format.quotes;U=ma.format.escapeless;T=ma.format.newline;Y=ma.format.space;ma.format.compact&&(T=Y=B=u="");wa=ma.format.parentheses;Ga=ma.format.semicolons;na=ma.format.safeConcatenation;ea=ma.directive;ia=A?null:ma.parse;Oa=ma.sourceMap;Va=ma.sourceCode;eb=ma.format.preserveBlankLines&&null!==Va;da=ma;Oa&&(t=bm.browser?Uk.sourceMap.SourceNode:vh);ta=new K;if(K.Statement.hasOwnProperty(X.type))X=
ta.generateStatement(X,1);else if(K.Expression.hasOwnProperty(X.type))X=ta.generateExpression(X,Z.Sequence,7);else throw Error("Unknown node type: "+X.type);if(!Oa)return X={code:X.toString(),map:null},ma.sourceMapWithCode?X:X.code;X=X.toStringWithSourceMap({file:ma.file,sourceRoot:ma.sourceMapRoot});ma.sourceContent&&X.map.setSourceContent(ma.sourceMap,ma.sourceContent);return ma.sourceMapWithCode?X:X.map.toString()};bm.attachComments=TR.attachComments;bm.Precedence=p({},Z);bm.browser=!1;bm.FORMAT_MINIFY=
{indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1};bm.FORMAT_DEFAULTS=Da})();var pma=Object.freeze({__proto__:null,"default":bm,FORMAT_DEFAULTS:bm.FORMAT_DEFAULTS,FORMAT_MINIFY:bm.FORMAT_MINIFY,Precedence:bm.Precedence,attachComments:bm.attachComments,browser:bm.browser,generate:bm.generate,version:bm.version}),Ym=lively.FreezerRuntime.recorderFor("lively.ast/lib/stringify.js");Ym.stringify=Yf;Ym.obj=xf;Ym.escodegen=pma;Ym.es=
Ym.escodegen.escodegen||Ym.escodegen;var sy=Ym.es;Ym.escodegen=sy;Ym.es=sy;Ym.default=Yf;var YR={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},qma={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",
"5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},rma=/^in(stanceof)?$/,ZR="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
s8="\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",
pda=new RegExp("["+ZR+"]"),qda=new RegExp("["+ZR+s8+"]");ZR=s8=null;var fV=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,
14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,
0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],rda=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,
13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,
9,787719,239],vi=function(c,k){void 0===k&&(k={});this.label=c;this.keyword=k.keyword;this.beforeExpr=!!k.beforeExpr;this.startsExpr=!!k.startsExpr;this.isLoop=!!k.isLoop;this.isAssign=!!k.isAssign;this.prefix=!!k.prefix;this.postfix=!!k.postfix;this.binop=k.binop||null;this.updateContext=null},io={beforeExpr:!0},qn={startsExpr:!0},cD={},$b={num:new vi("num",qn),regexp:new vi("regexp",qn),string:new vi("string",qn),name:new vi("name",qn),eof:new vi("eof"),bracketL:new vi("[",{beforeExpr:!0,startsExpr:!0}),
bracketR:new vi("]"),braceL:new vi("{",{beforeExpr:!0,startsExpr:!0}),braceR:new vi("}"),parenL:new vi("(",{beforeExpr:!0,startsExpr:!0}),parenR:new vi(")"),comma:new vi(",",io),semi:new vi(";",io),colon:new vi(":",io),dot:new vi("."),question:new vi("?",io),questionDot:new vi("?."),arrow:new vi("=>",io),template:new vi("template"),invalidTemplate:new vi("invalidTemplate"),ellipsis:new vi("...",io),backQuote:new vi("`",qn),dollarBraceL:new vi("${",{beforeExpr:!0,startsExpr:!0}),eq:new vi("=",{beforeExpr:!0,
isAssign:!0}),assign:new vi("_=",{beforeExpr:!0,isAssign:!0}),incDec:new vi("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new vi("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Uj("||",1),logicalAND:Uj("&&",2),bitwiseOR:Uj("|",3),bitwiseXOR:Uj("^",4),bitwiseAND:Uj("&",5),equality:Uj("==/!=/===/!==",6),relational:Uj("</>/<=/>=",7),bitShift:Uj("<</>>/>>>",8),plusMin:new vi("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Uj("%",10),star:Uj("*",10),slash:Uj("/",10),starstar:new vi("**",
{beforeExpr:!0}),coalesce:Uj("??",1),_break:Dh("break"),_case:Dh("case",io),_catch:Dh("catch"),_continue:Dh("continue"),_debugger:Dh("debugger"),_default:Dh("default",io),_do:Dh("do",{isLoop:!0,beforeExpr:!0}),_else:Dh("else",io),_finally:Dh("finally"),_for:Dh("for",{isLoop:!0}),_function:Dh("function",qn),_if:Dh("if"),_return:Dh("return",io),_switch:Dh("switch"),_throw:Dh("throw",io),_try:Dh("try"),_var:Dh("var"),_const:Dh("const"),_while:Dh("while",{isLoop:!0}),_with:Dh("with"),_new:Dh("new",{beforeExpr:!0,
startsExpr:!0}),_this:Dh("this",qn),_super:Dh("super",qn),_class:Dh("class",qn),_extends:Dh("extends",io),_export:Dh("export"),_import:Dh("import",qn),_null:Dh("null",qn),_true:Dh("true",qn),_false:Dh("false",qn),_in:Dh("in",{beforeExpr:!0,binop:7}),_instanceof:Dh("instanceof",{beforeExpr:!0,binop:7}),_typeof:Dh("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Dh("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Dh("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},rn=/\r\n?|\n|\u2028|\u2029/,
Ow=new RegExp(rn.source,"g"),$R=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,jo=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,t8=Object.prototype,eD=t8.hasOwnProperty,sma=t8.toString,hV=Array.isArray||function(c){return"[object Array]"===sma.call(c)},Pw=function(c,k){this.line=c;this.column=k};Pw.prototype.offset=function(c){return new Pw(this.line,this.column+c)};var tz=function(c,k,f){this.start=k;this.end=f;null!==c.sourceFile&&(this.source=c.sourceFile)},dD={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,
onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},gV=!1,bk=function(c,k,f){this.options=c=Qw(c);this.sourceFile=c.sourceFile;this.keywords=Zm(qma[6<=c.ecmaVersion?6:"module"===c.sourceType?"5module":5]);var l="";!0!==c.allowReserved&&(l=YR[6<=c.ecmaVersion?6:5===c.ecmaVersion?5:3],"module"===
c.sourceType&&(l+=" await"));this.reservedWords=Zm(l);l=(l?l+" ":"")+YR.strict;this.reservedWordsStrict=Zm(l);this.reservedWordsStrictBind=Zm(l+" "+YR.strictBind);this.input=String(k);this.containsEsc=!1;f?(this.pos=f,this.lineStart=this.input.lastIndexOf("\n",f-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(rn).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=$b.eof;this.value=null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=
this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===c.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports={};0===this.pos&&c.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null},Xs={inFunction:{configurable:!0},
inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};bk.prototype.parse=function(){var c=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(c)};Xs.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};Xs.inGenerator.get=function(){return 0<(this.currentVarScope().flags&8)};Xs.inAsync.get=function(){return 0<(this.currentVarScope().flags&
4)};Xs.allowSuper.get=function(){return 0<(this.currentThisScope().flags&64)};Xs.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};Xs.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Xs.inNonArrowFunction.get=function(){return 0<(this.currentThisScope().flags&2)};bk.extend=function(){for(var c=[],k=arguments.length;k--;)c[k]=arguments[k];k=this;for(var f=0;f<c.length;f++)k=c[f](k);return k};bk.parse=function(c,k){return(new this(k,
c)).parse()};bk.parseExpressionAt=function(c,k,f){c=new this(f,c,k);c.nextToken();return c.parseExpression()};bk.tokenizer=function(c,k){return new this(k,c)};Object.defineProperties(bk.prototype,Xs);var mm=bk.prototype,tma=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;mm.strictDirective=function(c){for(;;){jo.lastIndex=c;c+=jo.exec(this.input)[0].length;var k=tma.exec(this.input.slice(c));if(!k)return!1;if("use strict"===(k[1]||k[2])){jo.lastIndex=c+k[0].length;c=jo.exec(this.input);k=c.index+
c[0].length;var f=this.input.charAt(k);return";"===f||"}"===f||rn.test(c[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(f)||"!"===f&&"="===this.input.charAt(k+1))}c+=k[0].length;jo.lastIndex=c;c+=jo.exec(this.input)[0].length;";"===this.input[c]&&c++}};mm.eat=function(c){return this.type===c?(this.next(),!0):!1};mm.isContextual=function(c){return this.type===$b.name&&this.value===c&&!this.containsEsc};mm.eatContextual=function(c){if(!this.isContextual(c))return!1;this.next();return!0};mm.expectContextual=function(c){this.eatContextual(c)||
this.unexpected()};mm.canInsertSemicolon=function(){return this.type===$b.eof||this.type===$b.braceR||rn.test(this.input.slice(this.lastTokEnd,this.start))};mm.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};mm.semicolon=function(){this.eat($b.semi)||this.insertSemicolon()||this.unexpected()};mm.afterTrailingComma=function(c,k){if(this.type===c){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,
this.lastTokStartLoc);k||this.next();return!0}};mm.expect=function(c){this.eat(c)||this.unexpected()};mm.unexpected=function(c){this.raise(null!=c?c:this.start,"Unexpected token")};mm.checkPatternErrors=function(c,k){c&&(-1<c.trailingComma&&this.raiseRecoverable(c.trailingComma,"Comma is not permitted after the rest element"),c=k?c.parenthesizedAssign:c.parenthesizedBind,-1<c&&this.raiseRecoverable(c,"Parenthesized pattern"))};mm.checkExpressionErrors=function(c,k){if(!c)return!1;var f=c.shorthandAssign;
c=c.doubleProto;if(!k)return 0<=f||0<=c;0<=f&&this.raise(f,"Shorthand property assignments are valid only in destructuring patterns");0<=c&&this.raiseRecoverable(c,"Redefinition of __proto__ property")};mm.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};mm.isSimpleAssignTarget=function(c){return"ParenthesizedExpression"===
c.type?this.isSimpleAssignTarget(c.expression):"Identifier"===c.type||"MemberExpression"===c.type};var nh=bk.prototype;nh.parseTopLevel=function(c){var k={};c.body||(c.body=[]);for(;this.type!==$b.eof;){var f=this.parseStatement(null,!0,k);c.body.push(f)}if(this.inModule)for(k=0,f=Object.keys(this.undefinedExports);k<f.length;k+=1){var l=f[k];this.raiseRecoverable(this.undefinedExports[l].start,"Export '"+l+"' is not defined")}this.adaptDirectivePrologue(c.body);this.next();c.sourceType=this.options.sourceType;
return this.finishNode(c,"Program")};var aS={kind:"loop"},uma={kind:"switch"};nh.isLet=function(c){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;jo.lastIndex=this.pos;var k=jo.exec(this.input);k=this.pos+k[0].length;var f=this.input.charCodeAt(k);if(91===f)return!0;if(c)return!1;if(123===f)return!0;if(Pi(f,!0)){for(c=k+1;ui(this.input.charCodeAt(c),!0);)++c;c=this.input.slice(k,c);if(!rma.test(c))return!0}return!1};nh.isAsyncFunction=function(){if(8>this.options.ecmaVersion||!this.isContextual("async"))return!1;
jo.lastIndex=this.pos;var c=jo.exec(this.input);c=this.pos+c[0].length;return!rn.test(this.input.slice(this.pos,c))&&"function"===this.input.slice(c,c+8)&&(c+8===this.input.length||!ui(this.input.charAt(c+8)))};nh.parseStatement=function(c,k,f){var l=this.type,p=this.startNode();if(this.isLet(c)){l=$b._var;var b="let"}switch(l){case $b._break:case $b._continue:return this.parseBreakContinueStatement(p,l.keyword);case $b._debugger:return this.parseDebuggerStatement(p);case $b._do:return this.parseDoStatement(p);
case $b._for:return this.parseForStatement(p);case $b._function:return c&&(this.strict||"if"!==c&&"label"!==c)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(p,!1,!c);case $b._class:return c&&this.unexpected(),this.parseClass(p,!0);case $b._if:return this.parseIfStatement(p);case $b._return:return this.parseReturnStatement(p);case $b._switch:return this.parseSwitchStatement(p);case $b._throw:return this.parseThrowStatement(p);case $b._try:return this.parseTryStatement(p);
case $b._const:case $b._var:return b=b||this.value,c&&"var"!==b&&this.unexpected(),this.parseVarStatement(p,b);case $b._while:return this.parseWhileStatement(p);case $b._with:return this.parseWithStatement(p);case $b.braceL:return this.parseBlock(!0,p);case $b.semi:return this.parseEmptyStatement(p);case $b._export:case $b._import:if(10<this.options.ecmaVersion&&l===$b._import&&(jo.lastIndex=this.pos,c=jo.exec(this.input),c=this.input.charCodeAt(this.pos+c[0].length),40===c||46===c))return this.parseExpressionStatement(p,
this.parseExpression());this.options.allowImportExportEverywhere||(k||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return l===$b._import?this.parseImport(p):this.parseExport(p,f);default:if(this.isAsyncFunction())return c&&this.unexpected(),this.next(),this.parseFunctionStatement(p,!0,!c);k=this.value;f=this.parseExpression();return l===$b.name&&"Identifier"===
f.type&&this.eat($b.colon)?this.parseLabeledStatement(p,k,f,c):this.parseExpressionStatement(p,f)}};nh.parseBreakContinueStatement=function(c,k){var f="break"===k;this.next();this.eat($b.semi)||this.insertSemicolon()?c.label=null:this.type!==$b.name?this.unexpected():(c.label=this.parseIdent(),this.semicolon());for(var l=0;l<this.labels.length;++l){var p=this.labels[l];if(null==c.label||p.name===c.label.name){if(null!=p.kind&&(f||"loop"===p.kind))break;if(c.label&&f)break}}l===this.labels.length&&
this.raise(c.start,"Unsyntactic "+k);return this.finishNode(c,f?"BreakStatement":"ContinueStatement")};nh.parseDebuggerStatement=function(c){this.next();this.semicolon();return this.finishNode(c,"DebuggerStatement")};nh.parseDoStatement=function(c){this.next();this.labels.push(aS);c.body=this.parseStatement("do");this.labels.pop();this.expect($b._while);c.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat($b.semi):this.semicolon();return this.finishNode(c,"DoWhileStatement")};nh.parseForStatement=
function(c){this.next();var k=9<=this.options.ecmaVersion&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(aS);this.enterScope(0);this.expect($b.parenL);if(this.type===$b.semi)return-1<k&&this.unexpected(k),this.parseFor(c,null);var f=this.isLet();if(this.type===$b._var||this.type===$b._const||f){var l=this.startNode();f=f?"let":this.value;this.next();this.parseVar(l,!0,f);this.finishNode(l,"VariableDeclaration");
if((this.type===$b._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===l.declarations.length)return 9<=this.options.ecmaVersion&&(this.type===$b._in?-1<k&&this.unexpected(k):c.await=-1<k),this.parseForIn(c,l);-1<k&&this.unexpected(k);return this.parseFor(c,l)}l=new fD;f=this.parseExpression(!0,l);if(this.type===$b._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return 9<=this.options.ecmaVersion&&(this.type===$b._in?-1<k&&this.unexpected(k):c.await=-1<k),this.toAssignable(f,
!1,l),this.checkLValPattern(f),this.parseForIn(c,f);this.checkExpressionErrors(l,!0);-1<k&&this.unexpected(k);return this.parseFor(c,f)};nh.parseFunctionStatement=function(c,k,f){this.next();return this.parseFunction(c,DB|(f?0:bS),!1,k)};nh.parseIfStatement=function(c){this.next();c.test=this.parseParenExpression();c.consequent=this.parseStatement("if");c.alternate=this.eat($b._else)?this.parseStatement("if"):null;return this.finishNode(c,"IfStatement")};nh.parseReturnStatement=function(c){this.inFunction||
this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat($b.semi)||this.insertSemicolon()?c.argument=null:(c.argument=this.parseExpression(),this.semicolon());return this.finishNode(c,"ReturnStatement")};nh.parseSwitchStatement=function(c){this.next();c.discriminant=this.parseParenExpression();c.cases=[];this.expect($b.braceL);this.labels.push(uma);this.enterScope(0);for(var k,f=!1;this.type!==$b.braceR;)if(this.type===$b._case||this.type===
$b._default){var l=this.type===$b._case;k&&this.finishNode(k,"SwitchCase");c.cases.push(k=this.startNode());k.consequent=[];this.next();l?k.test=this.parseExpression():(f&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),f=!0,k.test=null);this.expect($b.colon)}else k||this.unexpected(),k.consequent.push(this.parseStatement(null));this.exitScope();k&&this.finishNode(k,"SwitchCase");this.next();this.labels.pop();return this.finishNode(c,"SwitchStatement")};nh.parseThrowStatement=
function(c){this.next();rn.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");c.argument=this.parseExpression();this.semicolon();return this.finishNode(c,"ThrowStatement")};var vma=[];nh.parseTryStatement=function(c){this.next();c.block=this.parseBlock();c.handler=null;if(this.type===$b._catch){var k=this.startNode();this.next();if(this.eat($b.parenL)){k.param=this.parseBindingAtom();var f="Identifier"===k.param.type;this.enterScope(f?32:
0);this.checkLValPattern(k.param,f?4:2);this.expect($b.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),k.param=null,this.enterScope(0);k.body=this.parseBlock(!1);this.exitScope();c.handler=this.finishNode(k,"CatchClause")}c.finalizer=this.eat($b._finally)?this.parseBlock():null;c.handler||c.finalizer||this.raise(c.start,"Missing catch or finally clause");return this.finishNode(c,"TryStatement")};nh.parseVarStatement=function(c,k){this.next();this.parseVar(c,!1,k);this.semicolon();return this.finishNode(c,
"VariableDeclaration")};nh.parseWhileStatement=function(c){this.next();c.test=this.parseParenExpression();this.labels.push(aS);c.body=this.parseStatement("while");this.labels.pop();return this.finishNode(c,"WhileStatement")};nh.parseWithStatement=function(c){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();c.object=this.parseParenExpression();c.body=this.parseStatement("with");return this.finishNode(c,"WithStatement")};nh.parseEmptyStatement=function(c){this.next();return this.finishNode(c,
"EmptyStatement")};nh.parseLabeledStatement=function(c,k,f,l){for(var p=0,b=this.labels;p<b.length;p+=1)b[p].name===k&&this.raise(f.start,"Label '"+k+"' is already declared");p=this.type.isLoop?"loop":this.type===$b._switch?"switch":null;for(b=this.labels.length-1;0<=b;b--){var d=this.labels[b];if(d.statementStart===c.start)d.statementStart=this.start,d.kind=p;else break}this.labels.push({name:k,kind:p,statementStart:this.start});c.body=this.parseStatement(l?-1===l.indexOf("label")?l+"label":l:"label");
this.labels.pop();c.label=f;return this.finishNode(c,"LabeledStatement")};nh.parseExpressionStatement=function(c,k){c.expression=k;this.semicolon();return this.finishNode(c,"ExpressionStatement")};nh.parseBlock=function(c,k,f){void 0===c&&(c=!0);void 0===k&&(k=this.startNode());k.body=[];this.expect($b.braceL);for(c&&this.enterScope(0);this.type!==$b.braceR;){var l=this.parseStatement(null);k.body.push(l)}f&&(this.strict=!1);this.next();c&&this.exitScope();return this.finishNode(k,"BlockStatement")};
nh.parseFor=function(c,k){c.init=k;this.expect($b.semi);c.test=this.type===$b.semi?null:this.parseExpression();this.expect($b.semi);c.update=this.type===$b.parenR?null:this.parseExpression();this.expect($b.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,"ForStatement")};nh.parseForIn=function(c,k){var f=this.type===$b._in;this.next();"VariableDeclaration"===k.type&&null!=k.declarations[0].init&&(!f||8>this.options.ecmaVersion||this.strict||"var"!==
k.kind||"Identifier"!==k.declarations[0].id.type)&&this.raise(k.start,(f?"for-in":"for-of")+" loop variable declaration may not have an initializer");c.left=k;c.right=f?this.parseExpression():this.parseMaybeAssign();this.expect($b.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,f?"ForInStatement":"ForOfStatement")};nh.parseVar=function(c,k,f){c.declarations=[];for(c.kind=f;;){var l=this.startNode();this.parseVarId(l,f);this.eat($b.eq)?l.init=this.parseMaybeAssign(k):
"const"!==f||this.type===$b._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===l.id.type||k&&(this.type===$b._in||this.isContextual("of"))?l.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected();c.declarations.push(this.finishNode(l,"VariableDeclarator"));if(!this.eat($b.comma))break}return c};nh.parseVarId=function(c,k){c.id=this.parseBindingAtom();this.checkLValPattern(c.id,"var"===k?1:2,!1)};var DB=1,bS=2;nh.parseFunction=
function(c,k,f,l){this.initFunction(c);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!l)this.type===$b.star&&k&bS&&this.unexpected(),c.generator=this.eat($b.star);8<=this.options.ecmaVersion&&(c.async=!!l);k&DB&&(c.id=k&4&&this.type!==$b.name?null:this.parseIdent(),!c.id||k&bS||this.checkLValSimple(c.id,this.strict||c.generator||c.async?this.treatFunctionsAsVar?1:2:3));l=this.yieldPos;var p=this.awaitPos,b=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|
(c.async?4:0)|(c.generator?8:0));k&DB||(c.id=this.type===$b.name?this.parseIdent():null);this.parseFunctionParams(c);this.parseFunctionBody(c,f,!1);this.yieldPos=l;this.awaitPos=p;this.awaitIdentPos=b;return this.finishNode(c,k&DB?"FunctionDeclaration":"FunctionExpression")};nh.parseFunctionParams=function(c){this.expect($b.parenL);c.params=this.parseBindingList($b.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};nh.parseClass=function(c,k){this.next();var f=this.strict;
this.strict=!0;this.parseClassId(c,k);this.parseClassSuper(c);var l=this.startNode(),p=!1;l.body=[];for(this.expect($b.braceL);this.type!==$b.braceR;){var b=this.parseClassElement(null!==c.superClass);b&&(l.body.push(b),"MethodDefinition"===b.type&&"constructor"===b.kind&&(p&&this.raise(b.start,"Duplicate constructor in the same class"),p=!0))}this.strict=f;this.next();c.body=this.finishNode(l,"ClassBody");return this.finishNode(c,k?"ClassDeclaration":"ClassExpression")};nh.parseClassElement=function(c){var k=
this;if(this.eat($b.semi))return null;var f=this.startNode(),l=function(h,a){void 0===a&&(a=!1);var e=k.start,n=k.startLoc;if(!k.eatContextual(h))return!1;if(!(k.type===$b.parenL||a&&k.canInsertSemicolon()))return!0;f.key&&k.unexpected();f.computed=!1;f.key=k.startNodeAt(e,n);f.key.name=h;k.finishNode(f.key,"Identifier");return!1};f.kind="method";f.static=l("static");var p=this.eat($b.star),b=!1;p||(8<=this.options.ecmaVersion&&l("async",!0)?(b=!0,p=9<=this.options.ecmaVersion&&this.eat($b.star)):
l("get")?f.kind="get":l("set")&&(f.kind="set"));f.key||this.parsePropertyName(f);l=f.key;var d=!1;f.computed||f.static||!("Identifier"===l.type&&"constructor"===l.name||"Literal"===l.type&&"constructor"===l.value)?f.static&&"Identifier"===l.type&&"prototype"===l.name&&this.raise(l.start,"Classes may not have a static property named prototype"):("method"!==f.kind&&this.raise(l.start,"Constructor can't have get/set modifier"),p&&this.raise(l.start,"Constructor can't be a generator"),b&&this.raise(l.start,
"Constructor can't be an async method"),f.kind="constructor",d=c);this.parseClassMethod(f,p,b,d);"get"===f.kind&&0!==f.value.params.length&&this.raiseRecoverable(f.value.start,"getter should have no params");"set"===f.kind&&1!==f.value.params.length&&this.raiseRecoverable(f.value.start,"setter should have exactly one param");"set"===f.kind&&"RestElement"===f.value.params[0].type&&this.raiseRecoverable(f.value.params[0].start,"Setter cannot use rest params");return f};nh.parseClassMethod=function(c,
k,f,l){c.value=this.parseMethod(k,f,l);return this.finishNode(c,"MethodDefinition")};nh.parseClassId=function(c,k){this.type===$b.name?(c.id=this.parseIdent(),k&&this.checkLValSimple(c.id,2,!1)):(!0===k&&this.unexpected(),c.id=null)};nh.parseClassSuper=function(c){c.superClass=this.eat($b._extends)?this.parseExprSubscripts():null};nh.parseExport=function(c,k){this.next();if(this.eat($b.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(c.exported=this.parseIdent(!0),this.checkExport(k,
c.exported.name,this.lastTokStart)):c.exported=null),this.expectContextual("from"),this.type!==$b.string&&this.unexpected(),c.source=this.parseExprAtom(),this.semicolon(),this.finishNode(c,"ExportAllDeclaration");if(this.eat($b._default)){this.checkExport(k,"default",this.lastTokStart);var f;this.type===$b._function||(f=this.isAsyncFunction())?(k=this.startNode(),this.next(),f&&this.next(),c.declaration=this.parseFunction(k,DB|4,!1,f)):this.type===$b._class?(f=this.startNode(),c.declaration=this.parseClass(f,
"nullableID")):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())c.declaration=this.parseStatement(null),"VariableDeclaration"===c.declaration.type?this.checkVariableExport(k,c.declaration.declarations):this.checkExport(k,c.declaration.id.name,c.declaration.id.start),c.specifiers=[],c.source=null;else{c.declaration=null;c.specifiers=this.parseExportSpecifiers(k);if(this.eatContextual("from"))this.type!==
$b.string&&this.unexpected(),c.source=this.parseExprAtom();else{f=0;for(k=c.specifiers;f<k.length;f+=1){var l=k[f];this.checkUnreserved(l.local);this.checkLocalExport(l.local)}c.source=null}this.semicolon()}return this.finishNode(c,"ExportNamedDeclaration")};nh.checkExport=function(c,k,f){c&&(eD.call(c,k)&&this.raiseRecoverable(f,"Duplicate export '"+k+"'"),c[k]=!0)};nh.checkPatternExport=function(c,k){var f=k.type;if("Identifier"===f)this.checkExport(c,k.name,k.start);else if("ObjectPattern"===f)for(f=
0,k=k.properties;f<k.length;f+=1)this.checkPatternExport(c,k[f]);else if("ArrayPattern"===f)for(f=0,k=k.elements;f<k.length;f+=1){var l=k[f];l&&this.checkPatternExport(c,l)}else"Property"===f?this.checkPatternExport(c,k.value):"AssignmentPattern"===f?this.checkPatternExport(c,k.left):"RestElement"===f?this.checkPatternExport(c,k.argument):"ParenthesizedExpression"===f&&this.checkPatternExport(c,k.expression)};nh.checkVariableExport=function(c,k){if(c)for(var f=0;f<k.length;f+=1)this.checkPatternExport(c,
k[f].id)};nh.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};nh.parseExportSpecifiers=function(c){var k=[],f=!0;for(this.expect($b.braceL);!this.eat($b.braceR);){if(f)f=!1;else if(this.expect($b.comma),this.afterTrailingComma($b.braceR))break;var l=this.startNode();l.local=this.parseIdent(!0);l.exported=this.eatContextual("as")?this.parseIdent(!0):
l.local;this.checkExport(c,l.exported.name,l.exported.start);k.push(this.finishNode(l,"ExportSpecifier"))}return k};nh.parseImport=function(c){this.next();this.type===$b.string?(c.specifiers=vma,c.source=this.parseExprAtom()):(c.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),c.source=this.type===$b.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(c,"ImportDeclaration")};nh.parseImportSpecifiers=function(){var c=[],k=!0;if(this.type===$b.name){var f=
this.startNode();f.local=this.parseIdent();this.checkLValSimple(f.local,2);c.push(this.finishNode(f,"ImportDefaultSpecifier"));if(!this.eat($b.comma))return c}if(this.type===$b.star)return k=this.startNode(),this.next(),this.expectContextual("as"),k.local=this.parseIdent(),this.checkLValSimple(k.local,2),c.push(this.finishNode(k,"ImportNamespaceSpecifier")),c;for(this.expect($b.braceL);!this.eat($b.braceR);){if(k)k=!1;else if(this.expect($b.comma),this.afterTrailingComma($b.braceR))break;f=this.startNode();
f.imported=this.parseIdent(!0);this.eatContextual("as")?f.local=this.parseIdent():(this.checkUnreserved(f.imported),f.local=f.imported);this.checkLValSimple(f.local,2);c.push(this.finishNode(f,"ImportSpecifier"))}return c};nh.adaptDirectivePrologue=function(c){for(var k=0;k<c.length&&this.isDirectiveCandidate(c[k]);++k)c[k].directive=c[k].expression.raw.slice(1,-1)};nh.isDirectiveCandidate=function(c){return"ExpressionStatement"===c.type&&"Literal"===c.expression.type&&"string"===typeof c.expression.value&&
('"'===this.input[c.start]||"'"===this.input[c.start])};var gp=bk.prototype;gp.toAssignable=function(c,k,f){if(6<=this.options.ecmaVersion&&c)switch(c.type){case "Identifier":this.inAsync&&"await"===c.name&&this.raise(c.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;case "ObjectExpression":c.type="ObjectPattern";f&&this.checkPatternErrors(f,!0);f=0;for(var l=c.properties;f<l.length;f+=
1){var p=l[f];this.toAssignable(p,k);"RestElement"!==p.type||"ArrayPattern"!==p.argument.type&&"ObjectPattern"!==p.argument.type||this.raise(p.argument.start,"Unexpected token")}break;case "Property":"init"!==c.kind&&this.raise(c.key.start,"Object pattern can't contain getter or setter");this.toAssignable(c.value,k);break;case "ArrayExpression":c.type="ArrayPattern";f&&this.checkPatternErrors(f,!0);this.toAssignableList(c.elements,k);break;case "SpreadElement":c.type="RestElement";this.toAssignable(c.argument,
k);"AssignmentPattern"===c.argument.type&&this.raise(c.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==c.operator&&this.raise(c.left.end,"Only '=' operator can be used for specifying default value.");c.type="AssignmentPattern";delete c.operator;this.toAssignable(c.left,k);break;case "ParenthesizedExpression":this.toAssignable(c.expression,k,f);break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");
break;case "MemberExpression":if(!k)break;default:this.raise(c.start,"Assigning to rvalue")}else f&&this.checkPatternErrors(f,!0);return c};gp.toAssignableList=function(c,k){for(var f=c.length,l=0;l<f;l++){var p=c[l];p&&this.toAssignable(p,k)}f&&(f=c[f-1],6===this.options.ecmaVersion&&k&&f&&"RestElement"===f.type&&"Identifier"!==f.argument.type&&this.unexpected(f.argument.start));return c};gp.parseSpread=function(c){var k=this.startNode();this.next();k.argument=this.parseMaybeAssign(!1,c);return this.finishNode(k,
"SpreadElement")};gp.parseRestBinding=function(){var c=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==$b.name&&this.unexpected();c.argument=this.parseBindingAtom();return this.finishNode(c,"RestElement")};gp.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case $b.bracketL:var c=this.startNode();this.next();c.elements=this.parseBindingList($b.bracketR,!0,!0);return this.finishNode(c,"ArrayPattern");case $b.braceL:return this.parseObj(!0)}return this.parseIdent()};
gp.parseBindingList=function(c,k,f){for(var l=[],p=!0;!this.eat(c);)if(p?p=!1:this.expect($b.comma),k&&this.type===$b.comma)l.push(null);else if(f&&this.afterTrailingComma(c))break;else if(this.type===$b.ellipsis){k=this.parseRestBinding();this.parseBindingListItem(k);l.push(k);this.type===$b.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(c);break}else{var b=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(b);l.push(b)}return l};
gp.parseBindingListItem=function(c){return c};gp.parseMaybeDefault=function(c,k,f){f=f||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat($b.eq))return f;c=this.startNodeAt(c,k);c.left=f;c.right=this.parseMaybeAssign();return this.finishNode(c,"AssignmentPattern")};gp.checkLValSimple=function(c,k,f){void 0===k&&(k=0);var l=0!==k;switch(c.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(c.name)&&this.raiseRecoverable(c.start,(l?"Binding ":"Assigning to ")+c.name+
" in strict mode");l&&(2===k&&"let"===c.name&&this.raiseRecoverable(c.start,"let is disallowed as a lexically bound name"),f&&(eD.call(f,c.name)&&this.raiseRecoverable(c.start,"Argument name clash"),f[c.name]=!0),5!==k&&this.declareName(c.name,k,c.start));break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":l&&this.raiseRecoverable(c.start,"Binding member expression");break;case "ParenthesizedExpression":return l&&
this.raiseRecoverable(c.start,"Binding parenthesized expression"),this.checkLValSimple(c.expression,k,f);default:this.raise(c.start,(l?"Binding":"Assigning to")+" rvalue")}};gp.checkLValPattern=function(c,k,f){void 0===k&&(k=0);switch(c.type){case "ObjectPattern":var l=0;for(c=c.properties;l<c.length;l+=1)this.checkLValInnerPattern(c[l],k,f);break;case "ArrayPattern":l=0;for(c=c.elements;l<c.length;l+=1){var p=c[l];p&&this.checkLValInnerPattern(p,k,f)}break;default:this.checkLValSimple(c,k,f)}};gp.checkLValInnerPattern=
function(c,k,f){void 0===k&&(k=0);switch(c.type){case "Property":this.checkLValInnerPattern(c.value,k,f);break;case "AssignmentPattern":this.checkLValPattern(c.left,k,f);break;case "RestElement":this.checkLValPattern(c.argument,k,f);break;default:this.checkLValPattern(c,k,f)}};var Gh=bk.prototype;Gh.checkPropClash=function(c,k,f){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===c.type||6<=this.options.ecmaVersion&&(c.computed||c.method||c.shorthand))){var l=c.key;switch(l.type){case "Identifier":var p=
l.name;break;case "Literal":p=String(l.value);break;default:return}c=c.kind;6<=this.options.ecmaVersion?"__proto__"===p&&"init"===c&&(k.proto&&(f?0>f.doubleProto&&(f.doubleProto=l.start):this.raiseRecoverable(l.start,"Redefinition of __proto__ property")),k.proto=!0):(p="$"+p,(f=k[p])?("init"===c?this.strict&&f.init||f.get||f.set:f.init||f[c])&&this.raiseRecoverable(l.start,"Redefinition of property"):f=k[p]={init:!1,get:!1,set:!1},f[c]=!0)}};Gh.parseExpression=function(c,k){var f=this.start,l=this.startLoc,
p=this.parseMaybeAssign(c,k);if(this.type===$b.comma){f=this.startNodeAt(f,l);for(f.expressions=[p];this.eat($b.comma);)f.expressions.push(this.parseMaybeAssign(c,k));return this.finishNode(f,"SequenceExpression")}return p};Gh.parseMaybeAssign=function(c,k,f){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(c);this.exprAllowed=!1}var l=!1,p=-1,b=-1;k?(p=k.parenthesizedAssign,b=k.trailingComma,k.parenthesizedAssign=k.trailingComma=-1):(k=new fD,l=!0);var d=this.start,h=this.startLoc;
if(this.type===$b.parenL||this.type===$b.name)this.potentialArrowAt=this.start;var a=this.parseMaybeConditional(c,k);f&&(a=f.call(this,a,d,h));if(this.type.isAssign)return f=this.startNodeAt(d,h),f.operator=this.value,this.type===$b.eq&&(a=this.toAssignable(a,!1,k)),l||(k.parenthesizedAssign=k.trailingComma=k.doubleProto=-1),k.shorthandAssign>=a.start&&(k.shorthandAssign=-1),this.type===$b.eq?this.checkLValPattern(a):this.checkLValSimple(a),f.left=a,this.next(),f.right=this.parseMaybeAssign(c),this.finishNode(f,
"AssignmentExpression");l&&this.checkExpressionErrors(k,!0);-1<p&&(k.parenthesizedAssign=p);-1<b&&(k.trailingComma=b);return a};Gh.parseMaybeConditional=function(c,k){var f=this.start,l=this.startLoc,p=this.parseExprOps(c,k);return this.checkExpressionErrors(k)?p:this.eat($b.question)?(k=this.startNodeAt(f,l),k.test=p,k.consequent=this.parseMaybeAssign(),this.expect($b.colon),k.alternate=this.parseMaybeAssign(c),this.finishNode(k,"ConditionalExpression")):p};Gh.parseExprOps=function(c,k){var f=this.start,
l=this.startLoc,p=this.parseMaybeUnary(k,!1);return this.checkExpressionErrors(k)?p:p.start===f&&"ArrowFunctionExpression"===p.type?p:this.parseExprOp(p,f,l,-1,c)};Gh.parseExprOp=function(c,k,f,l,p){var b=this.type.binop;if(null!=b&&(!p||this.type!==$b._in)&&b>l){var d=this.type===$b.logicalOR||this.type===$b.logicalAND,h=this.type===$b.coalesce;h&&(b=$b.logicalAND.binop);var a=this.value;this.next();var e=this.start,n=this.startLoc;b=this.parseExprOp(this.parseMaybeUnary(null,!1),e,n,b,p);c=this.buildBinary(k,
f,c,b,a,d||h);(d&&this.type===$b.coalesce||h&&(this.type===$b.logicalOR||this.type===$b.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(c,k,f,l,p)}return c};Gh.buildBinary=function(c,k,f,l,p,b){c=this.startNodeAt(c,k);c.left=f;c.operator=p;c.right=l;return this.finishNode(c,b?"LogicalExpression":"BinaryExpression")};Gh.parseMaybeUnary=function(c,k){var f=this.start,l=this.startLoc;if(this.isContextual("await")&&
(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var p=this.parseAwait();k=!0}else if(this.type.prefix){p=this.startNode();var b=this.type===$b.incDec;p.operator=this.value;p.prefix=!0;this.next();p.argument=this.parseMaybeUnary(null,!0);this.checkExpressionErrors(c,!0);b?this.checkLValSimple(p.argument):this.strict&&"delete"===p.operator&&"Identifier"===p.argument.type?this.raiseRecoverable(p.start,"Deleting local variable in strict mode"):k=!0;p=this.finishNode(p,b?"UpdateExpression":
"UnaryExpression")}else{p=this.parseExprSubscripts(c);if(this.checkExpressionErrors(c))return p;for(;this.type.postfix&&!this.canInsertSemicolon();)c=this.startNodeAt(f,l),c.operator=this.value,c.prefix=!1,c.argument=p,this.checkLValSimple(p),this.next(),p=this.finishNode(c,"UpdateExpression")}return!k&&this.eat($b.starstar)?this.buildBinary(f,l,p,this.parseMaybeUnary(null,!1),"**",!1):p};Gh.parseExprSubscripts=function(c){var k=this.start,f=this.startLoc,l=this.parseExprAtom(c);if("ArrowFunctionExpression"===
l.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return l;k=this.parseSubscripts(l,k,f);c&&"MemberExpression"===k.type&&(c.parenthesizedAssign>=k.start&&(c.parenthesizedAssign=-1),c.parenthesizedBind>=k.start&&(c.parenthesizedBind=-1));return k};Gh.parseSubscripts=function(c,k,f,l){for(var p=8<=this.options.ecmaVersion&&"Identifier"===c.type&&"async"===c.name&&this.lastTokEnd===c.end&&!this.canInsertSemicolon()&&5===c.end-c.start&&this.potentialArrowAt===c.start,b=!1;;){var d=this.parseSubscript(c,
k,f,l,p,b);d.optional&&(b=!0);if(d===c||"ArrowFunctionExpression"===d.type)return b&&(c=this.startNodeAt(k,f),c.expression=d,d=this.finishNode(c,"ChainExpression")),d;c=d}};Gh.parseSubscript=function(c,k,f,l,p,b){var d=11<=this.options.ecmaVersion,h=d&&this.eat($b.questionDot);l&&h&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var a=this.eat($b.bracketL);if(a||h&&this.type!==$b.parenL&&this.type!==$b.backQuote||this.eat($b.dot))k=this.startNodeAt(k,
f),k.object=c,k.property=a?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),k.computed=!!a,a&&this.expect($b.bracketR),d&&(k.optional=h),c=this.finishNode(k,"MemberExpression");else if(!l&&this.eat($b.parenL)){l=new fD;b=this.yieldPos;var e=this.awaitPos,n=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;a=this.parseExprList($b.parenR,8<=this.options.ecmaVersion,!1,l);if(p&&!h&&!this.canInsertSemicolon()&&this.eat($b.arrow))return this.checkPatternErrors(l,
!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=b,this.awaitPos=e,this.awaitIdentPos=n,this.parseArrowExpression(this.startNodeAt(k,f),a,!0);this.checkExpressionErrors(l,!0);this.yieldPos=b||this.yieldPos;this.awaitPos=e||this.awaitPos;this.awaitIdentPos=n||this.awaitIdentPos;k=this.startNodeAt(k,f);k.callee=c;k.arguments=a;d&&(k.optional=h);c=this.finishNode(k,"CallExpression")}else this.type===
$b.backQuote&&((h||b)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),d=this.startNodeAt(k,f),d.tag=c,d.quasi=this.parseTemplate({isTagged:!0}),c=this.finishNode(d,"TaggedTemplateExpression"));return c};Gh.parseExprAtom=function(c){this.type===$b.slash&&this.readRegexp();var k=this.potentialArrowAt===this.start;switch(this.type){case $b._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),k=this.startNode(),this.next(),
this.type!==$b.parenL||this.allowDirectSuper||this.raise(k.start,"super() call outside constructor of a subclass"),this.type!==$b.dot&&this.type!==$b.bracketL&&this.type!==$b.parenL&&this.unexpected(),this.finishNode(k,"Super");case $b._this:return k=this.startNode(),this.next(),this.finishNode(k,"ThisExpression");case $b.name:c=this.start;var f=this.startLoc,l=this.containsEsc,p=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!l&&"async"===p.name&&!this.canInsertSemicolon()&&this.eat($b._function))return this.parseFunction(this.startNodeAt(c,
f),0,!1,!0);if(k&&!this.canInsertSemicolon()){if(this.eat($b.arrow))return this.parseArrowExpression(this.startNodeAt(c,f),[p],!1);if(8<=this.options.ecmaVersion&&"async"===p.name&&this.type===$b.name&&!l)return p=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat($b.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(c,f),[p],!0)}return p;case $b.regexp:return c=this.value,k=this.parseLiteral(c.value),k.regex={pattern:c.pattern,flags:c.flags},k;case $b.num:case $b.string:return this.parseLiteral(this.value);
case $b._null:case $b._true:case $b._false:return k=this.startNode(),k.value=this.type===$b._null?null:this.type===$b._true,k.raw=this.type.keyword,this.next(),this.finishNode(k,"Literal");case $b.parenL:return f=this.start,k=this.parseParenAndDistinguishExpression(k),c&&(0>c.parenthesizedAssign&&!this.isSimpleAssignTarget(k)&&(c.parenthesizedAssign=f),0>c.parenthesizedBind&&(c.parenthesizedBind=f)),k;case $b.bracketL:return k=this.startNode(),this.next(),k.elements=this.parseExprList($b.bracketR,
!0,!0,c),this.finishNode(k,"ArrayExpression");case $b.braceL:return this.parseObj(!1,c);case $b._function:return k=this.startNode(),this.next(),this.parseFunction(k,0);case $b._class:return this.parseClass(this.startNode(),!1);case $b._new:return this.parseNew();case $b.backQuote:return this.parseTemplate();case $b._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};Gh.parseExprImport=function(){var c=this.startNode();this.containsEsc&&
this.raiseRecoverable(this.start,"Escape sequence in keyword import");var k=this.parseIdent(!0);switch(this.type){case $b.parenL:return this.parseDynamicImport(c);case $b.dot:return c.meta=k,this.parseImportMeta(c);default:this.unexpected()}};Gh.parseDynamicImport=function(c){this.next();c.source=this.parseMaybeAssign();if(!this.eat($b.parenR)){var k=this.start;this.eat($b.comma)&&this.eat($b.parenR)?this.raiseRecoverable(k,"Trailing comma is not allowed in import()"):this.unexpected(k)}return this.finishNode(c,
"ImportExpression")};Gh.parseImportMeta=function(c){this.next();var k=this.containsEsc;c.property=this.parseIdent(!0);"meta"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for import is 'import.meta'");k&&this.raiseRecoverable(c.start,"'import.meta' must not contain escaped characters");"module"!==this.options.sourceType&&this.raiseRecoverable(c.start,"Cannot use 'import.meta' outside a module");return this.finishNode(c,"MetaProperty")};Gh.parseLiteral=function(c){var k=
this.startNode();k.value=c;k.raw=this.input.slice(this.start,this.end);110===k.raw.charCodeAt(k.raw.length-1)&&(k.bigint=k.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(k,"Literal")};Gh.parseParenExpression=function(){this.expect($b.parenL);var c=this.parseExpression();this.expect($b.parenR);return c};Gh.parseParenAndDistinguishExpression=function(c){var k=this.start,f=this.startLoc,l=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var p=this.start,b=
this.startLoc,d=[],h=!0,a=!1,e=new fD,n=this.yieldPos,q=this.awaitPos;for(this.awaitPos=this.yieldPos=0;this.type!==$b.parenR;)if(h?h=!1:this.expect($b.comma),l&&this.afterTrailingComma($b.parenR,!0)){a=!0;break}else if(this.type===$b.ellipsis){var r=this.start;d.push(this.parseParenItem(this.parseRestBinding()));this.type===$b.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else d.push(this.parseMaybeAssign(!1,e,this.parseParenItem));l=this.start;h=this.startLoc;
this.expect($b.parenR);if(c&&!this.canInsertSemicolon()&&this.eat($b.arrow))return this.checkPatternErrors(e,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=n,this.awaitPos=q,this.parseParenArrowList(k,f,d);d.length&&!a||this.unexpected(this.lastTokStart);r&&this.unexpected(r);this.checkExpressionErrors(e,!0);this.yieldPos=n||this.yieldPos;this.awaitPos=q||this.awaitPos;1<d.length?(c=this.startNodeAt(p,b),c.expressions=d,this.finishNodeAt(c,"SequenceExpression",l,h)):c=d[0]}else c=this.parseParenExpression();
return this.options.preserveParens?(k=this.startNodeAt(k,f),k.expression=c,this.finishNode(k,"ParenthesizedExpression")):c};Gh.parseParenItem=function(c){return c};Gh.parseParenArrowList=function(c,k,f){return this.parseArrowExpression(this.startNodeAt(c,k),f)};var wma=[];Gh.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var c=this.startNode(),k=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat($b.dot))return c.meta=k,k=this.containsEsc,
c.property=this.parseIdent(!0),"target"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for new is 'new.target'"),k&&this.raiseRecoverable(c.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(c.start,"'new.target' can only be used in functions"),this.finishNode(c,"MetaProperty");k=this.start;var f=this.startLoc,l=this.type===$b._import;c.callee=this.parseSubscripts(this.parseExprAtom(),k,f,!0);l&&"ImportExpression"===
c.callee.type&&this.raise(k,"Cannot use new with import()");this.eat($b.parenL)?c.arguments=this.parseExprList($b.parenR,8<=this.options.ecmaVersion,!1):c.arguments=wma;return this.finishNode(c,"NewExpression")};Gh.parseTemplateElement=function(c){c=c.isTagged;var k=this.startNode();this.type===$b.invalidTemplate?(c||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),k.value={raw:this.value,cooked:null}):k.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,
"\n"),cooked:this.value};this.next();k.tail=this.type===$b.backQuote;return this.finishNode(k,"TemplateElement")};Gh.parseTemplate=function(c){void 0===c&&(c={});c=c.isTagged;void 0===c&&(c=!1);var k=this.startNode();this.next();k.expressions=[];var f=this.parseTemplateElement({isTagged:c});for(k.quasis=[f];!f.tail;)this.type===$b.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect($b.dollarBraceL),k.expressions.push(this.parseExpression()),this.expect($b.braceR),k.quasis.push(f=
this.parseTemplateElement({isTagged:c}));this.next();return this.finishNode(k,"TemplateLiteral")};Gh.isAsyncProp=function(c){return!c.computed&&"Identifier"===c.key.type&&"async"===c.key.name&&(this.type===$b.name||this.type===$b.num||this.type===$b.string||this.type===$b.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===$b.star)&&!rn.test(this.input.slice(this.lastTokEnd,this.start))};Gh.parseObj=function(c,k){var f=this.startNode(),l=!0,p={};f.properties=[];for(this.next();!this.eat($b.braceR);){if(l)l=
!1;else if(this.expect($b.comma),5<=this.options.ecmaVersion&&this.afterTrailingComma($b.braceR))break;var b=this.parseProperty(c,k);c||this.checkPropClash(b,p,k);f.properties.push(b)}return this.finishNode(f,c?"ObjectPattern":"ObjectExpression")};Gh.parseProperty=function(c,k){var f=this.startNode(),l;if(9<=this.options.ecmaVersion&&this.eat($b.ellipsis)){if(c)return f.argument=this.parseIdent(!1),this.type===$b.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(f,
"RestElement");this.type===$b.parenL&&k&&(0>k.parenthesizedAssign&&(k.parenthesizedAssign=this.start),0>k.parenthesizedBind&&(k.parenthesizedBind=this.start));f.argument=this.parseMaybeAssign(!1,k);this.type===$b.comma&&k&&0>k.trailingComma&&(k.trailingComma=this.start);return this.finishNode(f,"SpreadElement")}if(6<=this.options.ecmaVersion){f.method=!1;f.shorthand=!1;if(c||k){var p=this.start;var b=this.startLoc}c||(l=this.eat($b.star))}var d=this.containsEsc;this.parsePropertyName(f);if(!c&&!d&&
8<=this.options.ecmaVersion&&!l&&this.isAsyncProp(f)){var h=!0;l=9<=this.options.ecmaVersion&&this.eat($b.star);this.parsePropertyName(f,k)}else h=!1;this.parsePropertyValue(f,c,l,h,p,b,k,d);return this.finishNode(f,"Property")};Gh.parsePropertyValue=function(c,k,f,l,p,b,d,h){(f||l)&&this.type===$b.colon&&this.unexpected();this.eat($b.colon)?(c.value=k?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,d),c.kind="init"):6<=this.options.ecmaVersion&&this.type===$b.parenL?(k&&
this.unexpected(),c.kind="init",c.method=!0,c.value=this.parseMethod(f,l)):k||h||!(5<=this.options.ecmaVersion)||c.computed||"Identifier"!==c.key.type||"get"!==c.key.name&&"set"!==c.key.name||this.type===$b.comma||this.type===$b.braceR||this.type===$b.eq?6<=this.options.ecmaVersion&&!c.computed&&"Identifier"===c.key.type?((f||l)&&this.unexpected(),this.checkUnreserved(c.key),"await"!==c.key.name||this.awaitIdentPos||(this.awaitIdentPos=p),c.kind="init",k?c.value=this.parseMaybeDefault(p,b,this.copyNode(c.key)):
this.type===$b.eq&&d?(0>d.shorthandAssign&&(d.shorthandAssign=this.start),c.value=this.parseMaybeDefault(p,b,this.copyNode(c.key))):c.value=this.copyNode(c.key),c.shorthand=!0):this.unexpected():((f||l)&&this.unexpected(),c.kind=c.key.name,this.parsePropertyName(c),c.value=this.parseMethod(!1),c.value.params.length!==("get"===c.kind?0:1)?(k=c.value.start,"get"===c.kind?this.raiseRecoverable(k,"getter should have no params"):this.raiseRecoverable(k,"setter should have exactly one param")):"set"===
c.kind&&"RestElement"===c.value.params[0].type&&this.raiseRecoverable(c.value.params[0].start,"Setter cannot use rest params"))};Gh.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat($b.bracketL))return c.computed=!0,c.key=this.parseMaybeAssign(),this.expect($b.bracketR),c.key;c.computed=!1}return c.key=this.type===$b.num||this.type===$b.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};Gh.initFunction=function(c){c.id=null;6<=this.options.ecmaVersion&&
(c.generator=c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};Gh.parseMethod=function(c,k,f){var l=this.startNode(),p=this.yieldPos,b=this.awaitPos,d=this.awaitIdentPos;this.initFunction(l);6<=this.options.ecmaVersion&&(l.generator=c);8<=this.options.ecmaVersion&&(l.async=!!k);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(k?4:0)|(l.generator?8:0)|64|(f?128:0));this.expect($b.parenL);l.params=this.parseBindingList($b.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();
this.parseFunctionBody(l,!1,!0);this.yieldPos=p;this.awaitPos=b;this.awaitIdentPos=d;return this.finishNode(l,"FunctionExpression")};Gh.parseArrowExpression=function(c,k,f){var l=this.yieldPos,p=this.awaitPos,b=this.awaitIdentPos;this.enterScope((f?4:0)|18);this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!f);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;c.params=this.toAssignableList(k,!0);this.parseFunctionBody(c,!0,!1);this.yieldPos=l;this.awaitPos=p;this.awaitIdentPos=b;return this.finishNode(c,
"ArrowFunctionExpression")};Gh.parseFunctionBody=function(c,k,f){var l=this.strict,p=!1;if(k&&this.type!==$b.braceL)c.body=this.parseMaybeAssign(),c.expression=!0,this.checkParams(c,!1);else{var b=7<=this.options.ecmaVersion&&!this.isSimpleParamList(c.params);(!l||b)&&(p=this.strictDirective(this.end))&&b&&this.raiseRecoverable(c.start,"Illegal 'use strict' directive in function with non-simple parameter list");b=this.labels;this.labels=[];p&&(this.strict=!0);this.checkParams(c,!l&&!p&&!k&&!f&&this.isSimpleParamList(c.params));
this.strict&&c.id&&this.checkLValSimple(c.id,5);c.body=this.parseBlock(!1,void 0,p&&!l);c.expression=!1;this.adaptDirectivePrologue(c.body.body);this.labels=b}this.exitScope()};Gh.isSimpleParamList=function(c){for(var k=0;k<c.length;k+=1)if("Identifier"!==c[k].type)return!1;return!0};Gh.checkParams=function(c,k){var f={},l=0;for(c=c.params;l<c.length;l+=1)this.checkLValInnerPattern(c[l],1,k?null:f)};Gh.parseExprList=function(c,k,f,l){for(var p=[],b=!0;!this.eat(c);){if(b)b=!1;else if(this.expect($b.comma),
k&&this.afterTrailingComma(c))break;if(f&&this.type===$b.comma)var d=null;else this.type===$b.ellipsis?(d=this.parseSpread(l),l&&this.type===$b.comma&&0>l.trailingComma&&(l.trailingComma=this.start)):d=this.parseMaybeAssign(!1,l);p.push(d)}return p};Gh.checkUnreserved=function(c){var k=c.start,f=c.end;c=c.name;this.inGenerator&&"yield"===c&&this.raiseRecoverable(k,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&"await"===c&&this.raiseRecoverable(k,"Cannot use 'await' as identifier inside an async function");
this.keywords.test(c)&&this.raise(k,"Unexpected keyword '"+c+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(k,f).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(c)||(this.inAsync||"await"!==c||this.raiseRecoverable(k,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(k,"The keyword '"+c+"' is reserved"))};Gh.parseIdent=function(c,k){k=this.startNode();this.type===$b.name?k.name=this.value:this.type.keyword?(k.name=this.type.keyword,
"class"!==k.name&&"function"!==k.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!c);this.finishNode(k,"Identifier");c||(this.checkUnreserved(k),"await"!==k.name||this.awaitIdentPos||(this.awaitIdentPos=k.start));return k};Gh.parseYield=function(c){this.yieldPos||(this.yieldPos=this.start);var k=this.startNode();this.next();this.type===$b.semi||this.canInsertSemicolon()||this.type!==$b.star&&!this.type.startsExpr?
(k.delegate=!1,k.argument=null):(k.delegate=this.eat($b.star),k.argument=this.parseMaybeAssign(c));return this.finishNode(k,"YieldExpression")};Gh.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var c=this.startNode();this.next();c.argument=this.parseMaybeUnary(null,!0);return this.finishNode(c,"AwaitExpression")};var EI=bk.prototype;EI.raise=function(c,k){var f=Oq(this.input,c);k+=" ("+f.line+":"+f.column+")";k=new SyntaxError(k);k.pos=c;k.loc=f;k.raisedAt=this.pos;throw k;};EI.raiseRecoverable=
EI.raise;EI.curPosition=function(){if(this.options.locations)return new Pw(this.curLine,this.pos-this.lineStart)};var Ys=bk.prototype,xma=function(c){this.flags=c;this.var=[];this.lexical=[];this.functions=[]};Ys.enterScope=function(c){this.scopeStack.push(new xma(c))};Ys.exitScope=function(){this.scopeStack.pop()};Ys.treatFunctionsAsVarInScope=function(c){return c.flags&2||!this.inModule&&c.flags&1};Ys.declareName=function(c,k,f){var l=!1;if(2===k)k=this.currentScope(),l=-1<k.lexical.indexOf(c)||
-1<k.functions.indexOf(c)||-1<k.var.indexOf(c),k.lexical.push(c),this.inModule&&k.flags&1&&delete this.undefinedExports[c];else if(4===k)this.currentScope().lexical.push(c);else if(3===k)k=this.currentScope(),l=this.treatFunctionsAsVar?-1<k.lexical.indexOf(c):-1<k.lexical.indexOf(c)||-1<k.var.indexOf(c),k.functions.push(c);else for(k=this.scopeStack.length-1;0<=k;--k){var p=this.scopeStack[k];if(-1<p.lexical.indexOf(c)&&!(p.flags&32&&p.lexical[0]===c)||!this.treatFunctionsAsVarInScope(p)&&-1<p.functions.indexOf(c)){l=
!0;break}p.var.push(c);this.inModule&&p.flags&1&&delete this.undefinedExports[c];if(p.flags&3)break}l&&this.raiseRecoverable(f,"Identifier '"+c+"' has already been declared")};Ys.checkLocalExport=function(c){-1===this.scopeStack[0].lexical.indexOf(c.name)&&-1===this.scopeStack[0].var.indexOf(c.name)&&(this.undefinedExports[c.name]=c)};Ys.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Ys.currentVarScope=function(){for(var c=this.scopeStack.length-1;;c--){var k=this.scopeStack[c];
if(k.flags&3)return k}};Ys.currentThisScope=function(){for(var c=this.scopeStack.length-1;;c--){var k=this.scopeStack[c];if(k.flags&3&&!(k.flags&16))return k}};var EB=function(c,k,f){this.type="";this.start=k;this.end=0;c.options.locations&&(this.loc=new tz(c,f));c.options.directSourceFile&&(this.sourceFile=c.options.directSourceFile);c.options.ranges&&(this.range=[k,0])},FB=bk.prototype;FB.startNode=function(){return new EB(this,this.start,this.startLoc)};FB.startNodeAt=function(c,k){return new EB(this,
c,k)};FB.finishNode=function(c,k){return iV.call(this,c,k,this.lastTokEnd,this.lastTokEndLoc)};FB.finishNodeAt=function(c,k,f,l){return iV.call(this,c,k,f,l)};FB.copyNode=function(c){var k=new EB(this,c.start,this.startLoc),f;for(f in c)k[f]=c[f];return k};var ko=function(c,k,f,l,p){this.token=c;this.isExpr=!!k;this.preserveSpace=!!f;this.override=l;this.generator=!!p},Pj={b_stat:new ko("{",!1),b_expr:new ko("{",!0),b_tmpl:new ko("${",!1),p_stat:new ko("(",!1),p_expr:new ko("(",!0),q_tmpl:new ko("`",
!0,!0,function(c){return c.tryReadTemplateToken()}),f_stat:new ko("function",!1),f_expr:new ko("function",!0),f_expr_gen:new ko("function",!0,!1,null,!0),f_gen:new ko("function",!1,!1,null,!0)},FI=bk.prototype;FI.initialContext=function(){return[Pj.b_stat]};FI.braceIsBlock=function(c){var k=this.curContext();return k===Pj.f_expr||k===Pj.f_stat?!0:c!==$b.colon||k!==Pj.b_stat&&k!==Pj.b_expr?c===$b._return||c===$b.name&&this.exprAllowed?rn.test(this.input.slice(this.lastTokEnd,this.start)):c===$b._else||
c===$b.semi||c===$b.eof||c===$b.parenR||c===$b.arrow?!0:c===$b.braceL?k===Pj.b_stat:c===$b._var||c===$b._const||c===$b.name?!1:!this.exprAllowed:!k.isExpr};FI.inGeneratorContext=function(){for(var c=this.context.length-1;1<=c;c--){var k=this.context[c];if("function"===k.token)return k.generator}return!1};FI.updateContext=function(c){var k,f=this.type;f.keyword&&c===$b.dot?this.exprAllowed=!1:(k=f.updateContext)?k.call(this,c):this.exprAllowed=f.beforeExpr};$b.parenR.updateContext=$b.braceR.updateContext=
function(){if(1===this.context.length)this.exprAllowed=!0;else{var c=this.context.pop();c===Pj.b_stat&&"function"===this.curContext().token&&(c=this.context.pop());this.exprAllowed=!c.isExpr}};$b.braceL.updateContext=function(c){this.context.push(this.braceIsBlock(c)?Pj.b_stat:Pj.b_expr);this.exprAllowed=!0};$b.dollarBraceL.updateContext=function(){this.context.push(Pj.b_tmpl);this.exprAllowed=!0};$b.parenL.updateContext=function(c){this.context.push(c===$b._if||c===$b._for||c===$b._with||c===$b._while?
Pj.p_stat:Pj.p_expr);this.exprAllowed=!0};$b.incDec.updateContext=function(){};$b._function.updateContext=$b._class.updateContext=function(c){!c.beforeExpr||c===$b._else||c===$b.semi&&this.curContext()!==Pj.p_stat||c===$b._return&&rn.test(this.input.slice(this.lastTokEnd,this.start))||(c===$b.colon||c===$b.braceL)&&this.curContext()===Pj.b_stat?this.context.push(Pj.f_stat):this.context.push(Pj.f_expr);this.exprAllowed=!1};$b.backQuote.updateContext=function(){this.curContext()===Pj.q_tmpl?this.context.pop():
this.context.push(Pj.q_tmpl);this.exprAllowed=!1};$b.star.updateContext=function(c){c===$b._function&&(c=this.context.length-1,this.context[c]=this.context[c]===Pj.f_expr?Pj.f_expr_gen:Pj.f_gen);this.exprAllowed=!0};$b.name.updateContext=function(c){var k=!1;6<=this.options.ecmaVersion&&c!==$b.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(k=!0);this.exprAllowed=k};var tda={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
uda={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
jV={};gD(9);gD(10);gD(11);gD(12);var mg=bk.prototype,yr=function(c){this.parser=c;this.validFlags="gim"+(6<=c.options.ecmaVersion?"uy":"")+(9<=c.options.ecmaVersion?"s":"");this.unicodeProperties=jV[12<=c.options.ecmaVersion?12:c.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=[];this.backReferenceNames=[]};
yr.prototype.reset=function(c,k,f){var l=-1!==f.indexOf("u");this.start=c|0;this.source=k+"";this.flags=f;this.switchU=l&&6<=this.parser.options.ecmaVersion;this.switchN=l&&9<=this.parser.options.ecmaVersion};yr.prototype.raise=function(c){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+c)};yr.prototype.at=function(c,k){void 0===k&&(k=!1);var f=this.source,l=f.length;if(c>=l)return-1;var p=f.charCodeAt(c);if(!k&&!this.switchU||55295>=p||57344<=p||c+1>=l)return p;
c=f.charCodeAt(c+1);return 56320<=c&&57343>=c?(p<<10)+c-56613888:p};yr.prototype.nextIndex=function(c,k){void 0===k&&(k=!1);var f=this.source,l=f.length;if(c>=l)return l;var p=f.charCodeAt(c),b;return!k&&!this.switchU||55295>=p||57344<=p||c+1>=l||56320>(b=f.charCodeAt(c+1))||57343<b?c+1:c+2};yr.prototype.current=function(c){void 0===c&&(c=!1);return this.at(this.pos,c)};yr.prototype.lookahead=function(c){void 0===c&&(c=!1);return this.at(this.nextIndex(this.pos,c),c)};yr.prototype.advance=function(c){void 0===
c&&(c=!1);this.pos=this.nextIndex(this.pos,c)};yr.prototype.eat=function(c,k){void 0===k&&(k=!1);return this.current(k)===c?(this.advance(k),!0):!1};mg.validateRegExpFlags=function(c){for(var k=c.validFlags,f=c.flags,l=0;l<f.length;l++){var p=f.charAt(l);-1===k.indexOf(p)&&this.raise(c.start,"Invalid regular expression flag");-1<f.indexOf(p,l+1)&&this.raise(c.start,"Duplicate regular expression flag")}};mg.validateRegExpPattern=function(c){this.regexp_pattern(c);!c.switchN&&9<=this.options.ecmaVersion&&
0<c.groupNames.length&&(c.switchN=!0,this.regexp_pattern(c))};mg.regexp_pattern=function(c){c.pos=0;c.lastIntValue=0;c.lastStringValue="";c.lastAssertionIsQuantifiable=!1;c.numCapturingParens=0;c.maxBackReference=0;c.groupNames.length=0;c.backReferenceNames.length=0;this.regexp_disjunction(c);c.pos!==c.source.length&&(c.eat(41)&&c.raise("Unmatched ')'"),(c.eat(93)||c.eat(125))&&c.raise("Lone quantifier brackets"));c.maxBackReference>c.numCapturingParens&&c.raise("Invalid escape");for(var k=0,f=c.backReferenceNames;k<
f.length;k+=1)-1===c.groupNames.indexOf(f[k])&&c.raise("Invalid named capture referenced")};mg.regexp_disjunction=function(c){for(this.regexp_alternative(c);c.eat(124);)this.regexp_alternative(c);this.regexp_eatQuantifier(c,!0)&&c.raise("Nothing to repeat");c.eat(123)&&c.raise("Lone quantifier brackets")};mg.regexp_alternative=function(c){for(;c.pos<c.source.length&&this.regexp_eatTerm(c););};mg.regexp_eatTerm=function(c){return this.regexp_eatAssertion(c)?(c.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(c)&&
c.switchU&&c.raise("Invalid quantifier"),!0):(c.switchU?this.regexp_eatAtom(c):this.regexp_eatExtendedAtom(c))?(this.regexp_eatQuantifier(c),!0):!1};mg.regexp_eatAssertion=function(c){var k=c.pos;c.lastAssertionIsQuantifiable=!1;if(c.eat(94)||c.eat(36))return!0;if(c.eat(92)){if(c.eat(66)||c.eat(98))return!0;c.pos=k}if(c.eat(40)&&c.eat(63)){var f=!1;9<=this.options.ecmaVersion&&(f=c.eat(60));if(c.eat(61)||c.eat(33))return this.regexp_disjunction(c),c.eat(41)||c.raise("Unterminated group"),c.lastAssertionIsQuantifiable=
!f,!0}c.pos=k;return!1};mg.regexp_eatQuantifier=function(c,k){void 0===k&&(k=!1);return this.regexp_eatQuantifierPrefix(c,k)?(c.eat(63),!0):!1};mg.regexp_eatQuantifierPrefix=function(c,k){return c.eat(42)||c.eat(43)||c.eat(63)||this.regexp_eatBracedQuantifier(c,k)};mg.regexp_eatBracedQuantifier=function(c,k){var f=c.pos;if(c.eat(123)){var l=-1;if(this.regexp_eatDecimalDigits(c)){var p=c.lastIntValue;c.eat(44)&&this.regexp_eatDecimalDigits(c)&&(l=c.lastIntValue);if(c.eat(125))return-1!==l&&l<p&&!k&&
c.raise("numbers out of order in {} quantifier"),!0}c.switchU&&!k&&c.raise("Incomplete quantifier");c.pos=f}return!1};mg.regexp_eatAtom=function(c){return this.regexp_eatPatternCharacters(c)||c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)};mg.regexp_eatReverseSolidusAtomEscape=function(c){var k=c.pos;if(c.eat(92)){if(this.regexp_eatAtomEscape(c))return!0;c.pos=k}return!1};mg.regexp_eatUncapturingGroup=
function(c){var k=c.pos;if(c.eat(40)){if(c.eat(63)&&c.eat(58)){this.regexp_disjunction(c);if(c.eat(41))return!0;c.raise("Unterminated group")}c.pos=k}return!1};mg.regexp_eatCapturingGroup=function(c){if(c.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(c):63===c.current()&&c.raise("Invalid group");this.regexp_disjunction(c);if(c.eat(41))return c.numCapturingParens+=1,!0;c.raise("Unterminated group")}return!1};mg.regexp_eatExtendedAtom=function(c){return c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||
this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)||this.regexp_eatInvalidBracedQuantifier(c)||this.regexp_eatExtendedPatternCharacter(c)};mg.regexp_eatInvalidBracedQuantifier=function(c){this.regexp_eatBracedQuantifier(c,!0)&&c.raise("Nothing to repeat");return!1};mg.regexp_eatSyntaxCharacter=function(c){var k=c.current();return kV(k)?(c.lastIntValue=k,c.advance(),!0):!1};mg.regexp_eatPatternCharacters=function(c){for(var k=c.pos,f=0;-1!==(f=c.current())&&
!kV(f);)c.advance();return c.pos!==k};mg.regexp_eatExtendedPatternCharacter=function(c){var k=c.current();return-1===k||36===k||40<=k&&43>=k||46===k||63===k||91===k||94===k||124===k?!1:(c.advance(),!0)};mg.regexp_groupSpecifier=function(c){c.eat(63)&&(this.regexp_eatGroupName(c)?(-1!==c.groupNames.indexOf(c.lastStringValue)&&c.raise("Duplicate capture group name"),c.groupNames.push(c.lastStringValue)):c.raise("Invalid group"))};mg.regexp_eatGroupName=function(c){c.lastStringValue="";if(c.eat(60)){if(this.regexp_eatRegExpIdentifierName(c)&&
c.eat(62))return!0;c.raise("Invalid capture group name")}return!1};mg.regexp_eatRegExpIdentifierName=function(c){c.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(c)){for(c.lastStringValue+=hD(c.lastIntValue);this.regexp_eatRegExpIdentifierPart(c);)c.lastStringValue+=hD(c.lastIntValue);return!0}return!1};mg.regexp_eatRegExpIdentifierStart=function(c){var k=c.pos,f=11<=this.options.ecmaVersion,l=c.current(f);c.advance(f);92===l&&this.regexp_eatRegExpUnicodeEscapeSequence(c,f)&&(l=c.lastIntValue);
f=l;if(Pi(f,!0)||36===f||95===f)return c.lastIntValue=l,!0;c.pos=k;return!1};mg.regexp_eatRegExpIdentifierPart=function(c){var k=c.pos,f=11<=this.options.ecmaVersion,l=c.current(f);c.advance(f);92===l&&this.regexp_eatRegExpUnicodeEscapeSequence(c,f)&&(l=c.lastIntValue);f=l;if(ui(f,!0)||36===f||95===f||8204===f||8205===f)return c.lastIntValue=l,!0;c.pos=k;return!1};mg.regexp_eatAtomEscape=function(c){if(this.regexp_eatBackReference(c)||this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)||
c.switchN&&this.regexp_eatKGroupName(c))return!0;c.switchU&&(99===c.current()&&c.raise("Invalid unicode escape"),c.raise("Invalid escape"));return!1};mg.regexp_eatBackReference=function(c){var k=c.pos;if(this.regexp_eatDecimalEscape(c)){var f=c.lastIntValue;if(c.switchU)return f>c.maxBackReference&&(c.maxBackReference=f),!0;if(f<=c.numCapturingParens)return!0;c.pos=k}return!1};mg.regexp_eatKGroupName=function(c){if(c.eat(107)){if(this.regexp_eatGroupName(c))return c.backReferenceNames.push(c.lastStringValue),
!0;c.raise("Invalid named reference")}return!1};mg.regexp_eatCharacterEscape=function(c){return this.regexp_eatControlEscape(c)||this.regexp_eatCControlLetter(c)||this.regexp_eatZero(c)||this.regexp_eatHexEscapeSequence(c)||this.regexp_eatRegExpUnicodeEscapeSequence(c,!1)||!c.switchU&&this.regexp_eatLegacyOctalEscapeSequence(c)||this.regexp_eatIdentityEscape(c)};mg.regexp_eatCControlLetter=function(c){var k=c.pos;if(c.eat(99)){if(this.regexp_eatControlLetter(c))return!0;c.pos=k}return!1};mg.regexp_eatZero=
function(c){return 48!==c.current()||iD(c.lookahead())?!1:(c.lastIntValue=0,c.advance(),!0)};mg.regexp_eatControlEscape=function(c){var k=c.current();return 116===k?(c.lastIntValue=9,c.advance(),!0):110===k?(c.lastIntValue=10,c.advance(),!0):118===k?(c.lastIntValue=11,c.advance(),!0):102===k?(c.lastIntValue=12,c.advance(),!0):114===k?(c.lastIntValue=13,c.advance(),!0):!1};mg.regexp_eatControlLetter=function(c){var k=c.current();return 65<=k&&90>=k||97<=k&&122>=k?(c.lastIntValue=k%32,c.advance(),!0):
!1};mg.regexp_eatRegExpUnicodeEscapeSequence=function(c,k){void 0===k&&(k=!1);var f=c.pos;k=k||c.switchU;if(c.eat(117)){if(this.regexp_eatFixedHexDigits(c,4)){f=c.lastIntValue;if(k&&55296<=f&&56319>=f){k=c.pos;if(c.eat(92)&&c.eat(117)&&this.regexp_eatFixedHexDigits(c,4)){var l=c.lastIntValue;if(56320<=l&&57343>=l)return c.lastIntValue=1024*(f-55296)+(l-56320)+65536,!0}c.pos=k;c.lastIntValue=f}return!0}if(l=k&&c.eat(123)&&this.regexp_eatHexDigits(c)&&c.eat(125))l=c.lastIntValue,l=0<=l&&1114111>=l;
if(l)return!0;k&&c.raise("Invalid unicode escape");c.pos=f}return!1};mg.regexp_eatIdentityEscape=function(c){if(c.switchU)return this.regexp_eatSyntaxCharacter(c)?!0:c.eat(47)?(c.lastIntValue=47,!0):!1;var k=c.current();return 99===k||c.switchN&&107===k?!1:(c.lastIntValue=k,c.advance(),!0)};mg.regexp_eatDecimalEscape=function(c){c.lastIntValue=0;var k=c.current();if(49<=k&&57>=k){do c.lastIntValue=10*c.lastIntValue+(k-48),c.advance();while(48<=(k=c.current())&&57>=k);return!0}return!1};mg.regexp_eatCharacterClassEscape=
function(c){var k=c.current();if(100===k||68===k||115===k||83===k||119===k||87===k)return c.lastIntValue=-1,c.advance(),!0;if(c.switchU&&9<=this.options.ecmaVersion&&(80===k||112===k)){c.lastIntValue=-1;c.advance();if(c.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(c)&&c.eat(125))return!0;c.raise("Invalid property name")}return!1};mg.regexp_eatUnicodePropertyValueExpression=function(c){var k=c.pos;if(this.regexp_eatUnicodePropertyName(c)&&c.eat(61)){var f=c.lastStringValue;if(this.regexp_eatUnicodePropertyValue(c))return this.regexp_validateUnicodePropertyNameAndValue(c,
f,c.lastStringValue),!0}c.pos=k;return this.regexp_eatLoneUnicodePropertyNameOrValue(c)?(this.regexp_validateUnicodePropertyNameOrValue(c,c.lastStringValue),!0):!1};mg.regexp_validateUnicodePropertyNameAndValue=function(c,k,f){eD.call(c.unicodeProperties.nonBinary,k)||c.raise("Invalid property name");c.unicodeProperties.nonBinary[k].test(f)||c.raise("Invalid property value")};mg.regexp_validateUnicodePropertyNameOrValue=function(c,k){c.unicodeProperties.binary.test(k)||c.raise("Invalid property name")};
mg.regexp_eatUnicodePropertyName=function(c){var k;for(c.lastStringValue="";lV(k=c.current());)c.lastStringValue+=hD(k),c.advance();return""!==c.lastStringValue};mg.regexp_eatUnicodePropertyValue=function(c){var k;for(c.lastStringValue="";vda(k=c.current());)c.lastStringValue+=hD(k),c.advance();return""!==c.lastStringValue};mg.regexp_eatLoneUnicodePropertyNameOrValue=function(c){return this.regexp_eatUnicodePropertyValue(c)};mg.regexp_eatCharacterClass=function(c){if(c.eat(91)){c.eat(94);this.regexp_classRanges(c);
if(c.eat(93))return!0;c.raise("Unterminated character class")}return!1};mg.regexp_classRanges=function(c){for(;this.regexp_eatClassAtom(c);){var k=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassAtom(c)){var f=c.lastIntValue;!c.switchU||-1!==k&&-1!==f||c.raise("Invalid character class");-1!==k&&-1!==f&&k>f&&c.raise("Range out of order in character class")}}};mg.regexp_eatClassAtom=function(c){var k=c.pos;if(c.eat(92)){if(this.regexp_eatClassEscape(c))return!0;if(c.switchU){var f=c.current();(99===
f||48<=f&&55>=f)&&c.raise("Invalid class escape");c.raise("Invalid escape")}c.pos=k}k=c.current();return 93!==k?(c.lastIntValue=k,c.advance(),!0):!1};mg.regexp_eatClassEscape=function(c){var k=c.pos;if(c.eat(98))return c.lastIntValue=8,!0;if(c.switchU&&c.eat(45))return c.lastIntValue=45,!0;if(!c.switchU&&c.eat(99)){if(this.regexp_eatClassControlLetter(c))return!0;c.pos=k}return this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)};mg.regexp_eatClassControlLetter=function(c){var k=
c.current();return iD(k)||95===k?(c.lastIntValue=k%32,c.advance(),!0):!1};mg.regexp_eatHexEscapeSequence=function(c){var k=c.pos;if(c.eat(120)){if(this.regexp_eatFixedHexDigits(c,2))return!0;c.switchU&&c.raise("Invalid escape");c.pos=k}return!1};mg.regexp_eatDecimalDigits=function(c){var k=c.pos,f;for(c.lastIntValue=0;iD(f=c.current());)c.lastIntValue=10*c.lastIntValue+(f-48),c.advance();return c.pos!==k};mg.regexp_eatHexDigits=function(c){var k=c.pos,f;for(c.lastIntValue=0;mV(f=c.current());)c.lastIntValue=
16*c.lastIntValue+nV(f),c.advance();return c.pos!==k};mg.regexp_eatLegacyOctalEscapeSequence=function(c){if(this.regexp_eatOctalDigit(c)){var k=c.lastIntValue;if(this.regexp_eatOctalDigit(c)){var f=c.lastIntValue;3>=k&&this.regexp_eatOctalDigit(c)?c.lastIntValue=64*k+8*f+c.lastIntValue:c.lastIntValue=8*k+f}else c.lastIntValue=k;return!0}return!1};mg.regexp_eatOctalDigit=function(c){var k=c.current();if(48<=k&&55>=k)return c.lastIntValue=k-48,c.advance(),!0;c.lastIntValue=0;return!1};mg.regexp_eatFixedHexDigits=
function(c,k){for(var f=c.pos,l=c.lastIntValue=0;l<k;++l){var p=c.current();if(!mV(p))return c.pos=f,!1;c.lastIntValue=16*c.lastIntValue+nV(p);c.advance()}return!0};var GI=function(c){this.type=c.type;this.value=c.value;this.start=c.start;this.end=c.end;c.options.locations&&(this.loc=new tz(c,c.startLoc,c.endLoc));c.options.ranges&&(this.range=[c.start,c.end])},ai=bk.prototype;ai.next=function(c){!c&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+
this.type.keyword);if(this.options.onToken)this.options.onToken(new GI(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};ai.getToken=function(){this.next();return new GI(this)};"undefined"!==typeof Symbol&&(ai[Symbol.iterator]=function(){var c=this;return{next:function(){var k=c.getToken();return{done:k.type===$b.eof,value:k}}}});ai.curContext=function(){return this.context[this.context.length-1]};ai.nextToken=
function(){var c=this.curContext();c&&c.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken($b.eof);if(c.override)return c.override(this);this.readToken(this.fullCharCodeAtPos())};ai.readToken=function(c){return Pi(c,6<=this.options.ecmaVersion)||92===c?this.readWord():this.getTokenFromCode(c)};ai.fullCharCodeAtPos=function(){var c=this.input.charCodeAt(this.pos);if(55295>=c||57344<=c)return c;
var k=this.input.charCodeAt(this.pos+1);return(c<<10)+k-56613888};ai.skipBlockComment=function(){var c=this.options.onComment&&this.curPosition(),k=this.pos,f=this.input.indexOf("*/",this.pos+=2);-1===f&&this.raise(this.pos-2,"Unterminated comment");this.pos=f+2;if(this.options.locations){Ow.lastIndex=k;for(var l;(l=Ow.exec(this.input))&&l.index<this.pos;)++this.curLine,this.lineStart=l.index+l[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(k+2,f),k,this.pos,c,this.curPosition())};
ai.skipLineComment=function(c){for(var k=this.pos,f=this.options.onComment&&this.curPosition(),l=this.input.charCodeAt(this.pos+=c);this.pos<this.input.length&&!Em(l);)l=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(k+c,this.pos),k,this.pos,f,this.curPosition())};ai.skipSpace=function(){a:for(;this.pos<this.input.length;){var c=this.input.charCodeAt(this.pos);switch(c){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+
1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<c&&14>c||5760<=c&&$R.test(String.fromCharCode(c)))++this.pos;else break a}}};ai.finishToken=function(c,k){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());var f=this.type;this.type=c;this.value=
k;this.updateContext(f)};ai.readToken_dot=function(){var c=this.input.charCodeAt(this.pos+1);if(48<=c&&57>=c)return this.readNumber(!0);var k=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===c&&46===k)return this.pos+=3,this.finishToken($b.ellipsis);++this.pos;return this.finishToken($b.dot)};ai.readToken_slash=function(){var c=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===c?this.finishOp($b.assign,2):this.finishOp($b.slash,1)};
ai.readToken_mult_modulo_exp=function(c){var k=this.input.charCodeAt(this.pos+1),f=1,l=42===c?$b.star:$b.modulo;7<=this.options.ecmaVersion&&42===c&&42===k&&(++f,l=$b.starstar,k=this.input.charCodeAt(this.pos+2));return 61===k?this.finishOp($b.assign,f+1):this.finishOp(l,f)};ai.readToken_pipe_amp=function(c){var k=this.input.charCodeAt(this.pos+1);return k===c?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp($b.assign,3):this.finishOp(124===c?$b.logicalOR:$b.logicalAND,
2):61===k?this.finishOp($b.assign,2):this.finishOp(124===c?$b.bitwiseOR:$b.bitwiseAND,1)};ai.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp($b.assign,2):this.finishOp($b.bitwiseXOR,1)};ai.readToken_plus_min=function(c){var k=this.input.charCodeAt(this.pos+1);return k===c?45!==k||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!rn.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp($b.incDec,2):(this.skipLineComment(3),
this.skipSpace(),this.nextToken()):61===k?this.finishOp($b.assign,2):this.finishOp($b.plusMin,1)};ai.readToken_lt_gt=function(c){var k=this.input.charCodeAt(this.pos+1),f=1;if(k===c)return f=62===c&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+f)?this.finishOp($b.assign,f+1):this.finishOp($b.bitShift,f);if(33===k&&60===c&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),this.skipSpace(),
this.nextToken();61===k&&(f=2);return this.finishOp($b.relational,f)};ai.readToken_eq_excl=function(c){var k=this.input.charCodeAt(this.pos+1);return 61===k?this.finishOp($b.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===c&&62===k&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken($b.arrow)):this.finishOp(61===c?$b.eq:$b.prefix,1)};ai.readToken_question=function(){var c=this.options.ecmaVersion;if(11<=c){var k=this.input.charCodeAt(this.pos+1);if(46===k){var f=this.input.charCodeAt(this.pos+
2);if(48>f||57<f)return this.finishOp($b.questionDot,2)}if(63===k)return 12<=c&&61===this.input.charCodeAt(this.pos+2)?this.finishOp($b.assign,3):this.finishOp($b.coalesce,2)}return this.finishOp($b.question,1)};ai.getTokenFromCode=function(c){switch(c){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken($b.parenL);case 41:return++this.pos,this.finishToken($b.parenR);case 59:return++this.pos,this.finishToken($b.semi);case 44:return++this.pos,this.finishToken($b.comma);case 91:return++this.pos,
this.finishToken($b.bracketL);case 93:return++this.pos,this.finishToken($b.bracketR);case 123:return++this.pos,this.finishToken($b.braceL);case 125:return++this.pos,this.finishToken($b.braceR);case 58:return++this.pos,this.finishToken($b.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken($b.backQuote);case 48:c=this.input.charCodeAt(this.pos+1);if(120===c||88===c)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===c||79===c)return this.readRadixNumber(8);
if(98===c||66===c)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(c);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(c);case 124:case 38:return this.readToken_pipe_amp(c);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(c);case 60:case 62:return this.readToken_lt_gt(c);case 61:case 33:return this.readToken_eq_excl(c);
case 63:return this.readToken_question();case 126:return this.finishOp($b.prefix,1)}this.raise(this.pos,"Unexpected character '"+CL(c)+"'")};ai.finishOp=function(c,k){var f=this.input.slice(this.pos,this.pos+k);this.pos+=k;return this.finishToken(c,f)};ai.readRegexp=function(){for(var c,k,f=this.pos;;){this.pos>=this.input.length&&this.raise(f,"Unterminated regular expression");var l=this.input.charAt(this.pos);rn.test(l)&&this.raise(f,"Unterminated regular expression");if(c)c=!1;else{if("["===l)k=
!0;else if("]"===l&&k)k=!1;else if("/"===l&&!k)break;c="\\"===l}++this.pos}c=this.input.slice(f,this.pos);++this.pos;l=this.pos;k=this.readWord1();this.containsEsc&&this.unexpected(l);l=this.regexpState||(this.regexpState=new yr(this));l.reset(f,c,k);this.validateRegExpFlags(l);this.validateRegExpPattern(l);f=null;try{f=new RegExp(c,k)}catch(p){}return this.finishToken($b.regexp,{pattern:c,flags:k,value:f})};ai.readInt=function(c,k,f){var l=12<=this.options.ecmaVersion&&void 0===k;f=f&&48===this.input.charCodeAt(this.pos);
for(var p=this.pos,b=0,d=0,h=0,a=null==k?Infinity:k;h<a;++h,++this.pos){var e=this.input.charCodeAt(this.pos);if(l&&95===e)f&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===d&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===h&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),d=e;else{var n=97<=e?e-97+10:65<=e?e-65+10:48<=e&&57>=e?e-48:Infinity;if(n>=c)break;d=e;
b=b*c+n}}l&&95===d&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===p||null!=k&&this.pos-p!==k?null:b};ai.readRadixNumber=function(c){var k=this.pos;this.pos+=2;var f=this.readInt(c);null==f&&this.raise(this.start+2,"Expected number in radix "+c);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(f=oV(this.input.slice(k,this.pos)),++this.pos):Pi(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");
return this.finishToken($b.num,f)};ai.readNumber=function(c){var k=this.pos;c||null!==this.readInt(10,void 0,!0)||this.raise(k,"Invalid number");var f=2<=this.pos-k&&48===this.input.charCodeAt(k);f&&this.strict&&this.raise(k,"Invalid number");var l=this.input.charCodeAt(this.pos);if(!f&&!c&&11<=this.options.ecmaVersion&&110===l)return f=oV(this.input.slice(k,this.pos)),++this.pos,Pi(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken($b.num,f);f&&/[89]/.test(this.input.slice(k,
this.pos))&&(f=!1);46!==l||f||(++this.pos,this.readInt(10),l=this.input.charCodeAt(this.pos));69!==l&&101!==l||f||(l=this.input.charCodeAt(++this.pos),43!==l&&45!==l||++this.pos,null===this.readInt(10)&&this.raise(k,"Invalid number"));Pi(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");c=this.input.slice(k,this.pos);f=f?parseInt(c,8):parseFloat(c.replace(/_/g,""));return this.finishToken($b.num,f)};ai.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>
this.options.ecmaVersion&&this.unexpected();var c=++this.pos;var k=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<k&&this.invalidStringToken(c,"Code point out of bounds")}else k=this.readHexChar(4);return k};ai.readString=function(c){for(var k="",f=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var l=this.input.charCodeAt(this.pos);if(l===c)break;92===l?(k+=this.input.slice(f,this.pos),k+=this.readEscapedChar(!1),f=
this.pos):(Em(l,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}k+=this.input.slice(f,this.pos++);return this.finishToken($b.string,k)};var u8={};ai.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(c){if(c===u8)this.readInvalidTemplateToken();else throw c;}this.inTemplateElement=!1};ai.invalidStringToken=function(c,k){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw u8;this.raise(c,k)};ai.readTmplToken=
function(){for(var c="",k=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var f=this.input.charCodeAt(this.pos);if(96===f||36===f&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&(this.type===$b.template||this.type===$b.invalidTemplate)){if(36===f)return this.pos+=2,this.finishToken($b.dollarBraceL);++this.pos;return this.finishToken($b.backQuote)}c+=this.input.slice(k,this.pos);return this.finishToken($b.template,c)}if(92===f)c+=this.input.slice(k,
this.pos),c+=this.readEscapedChar(!0),k=this.pos;else if(Em(f)){c+=this.input.slice(k,this.pos);++this.pos;switch(f){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:c+="\n";break;default:c+=String.fromCharCode(f)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);k=this.pos}else++this.pos}};ai.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;
case "`":return this.finishToken($b.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};ai.readEscapedChar=function(c){var k=this.input.charCodeAt(++this.pos);++this.pos;switch(k){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return CL(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;
case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),c)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(48<=k&&55>=k){var f=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],l=parseInt(f,8);255<l&&(f=f.slice(0,-1),l=parseInt(f,8));this.pos+=f.length-1;k=this.input.charCodeAt(this.pos);"0"===f&&56!==k&&57!==k||!this.strict&&
!c||this.invalidStringToken(this.pos-1-f.length,c?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(l)}return Em(k)?"":String.fromCharCode(k)}};ai.readHexChar=function(c){var k=this.pos;c=this.readInt(16,c);null===c&&this.invalidStringToken(k,"Bad character escape sequence");return c};ai.readWord1=function(){this.containsEsc=!1;for(var c="",k=!0,f=this.pos,l=6<=this.options.ecmaVersion;this.pos<this.input.length;){var p=this.fullCharCodeAtPos();if(ui(p,
l))this.pos+=65535>=p?1:2;else if(92===p)this.containsEsc=!0,c+=this.input.slice(f,this.pos),f=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,p=this.readCodePoint(),(k?Pi:ui)(p,l)||this.invalidStringToken(f,"Invalid Unicode escape"),c+=CL(p),f=this.pos;else break;k=!1}return c+this.input.slice(f,this.pos)};ai.readWord=function(){var c=this.readWord1(),k=$b.name;this.keywords.test(c)&&(k=cD[c]);return this.finishToken(k,
c)};bk.acorn={Parser:bk,version:"8.0.4",defaultOptions:dD,Position:Pw,SourceLocation:tz,getLineInfo:Oq,Node:EB,TokenType:vi,tokTypes:$b,keywordTypes:cD,TokContext:ko,tokContexts:Pj,isIdentifierChar:ui,isIdentifierStart:Pi,Token:GI,isNewLine:Em,lineBreak:rn,lineBreakG:Ow,nonASCIIwhitespace:$R};var kq=Object.freeze({__proto__:null,Node:EB,Parser:bk,Position:Pw,SourceLocation:tz,TokContext:ko,Token:GI,TokenType:vi,defaultOptions:dD,getLineInfo:Oq,isIdentifierChar:ui,isIdentifierStart:Pi,isNewLine:Em,
keywordTypes:cD,lineBreak:rn,lineBreakG:Ow,nonASCIIwhitespace:$R,parse:function(c,k){return bk.parse(c,k)},parseExpressionAt:function(c,k,f){return bk.parseExpressionAt(c,k,f)},tokContexts:Pj,tokTypes:$b,tokenizer:function(c,k){return bk.tokenizer(c,k)},version:"8.0.4"});Ka("bI",kq);var hv=function(c,k){this.node=c;this.state=k},Le={};Le.Program=Le.BlockStatement=function(c,k,f){var l=0;for(c=c.body;l<c.length;l+=1)f(c[l],k,"Statement")};Le.Statement=DL;Le.EmptyStatement=eu;Le.ExpressionStatement=
Le.ParenthesizedExpression=Le.ChainExpression=function(c,k,f){return f(c.expression,k,"Expression")};Le.IfStatement=function(c,k,f){f(c.test,k,"Expression");f(c.consequent,k,"Statement");c.alternate&&f(c.alternate,k,"Statement")};Le.LabeledStatement=function(c,k,f){return f(c.body,k,"Statement")};Le.BreakStatement=Le.ContinueStatement=eu;Le.WithStatement=function(c,k,f){f(c.object,k,"Expression");f(c.body,k,"Statement")};Le.SwitchStatement=function(c,k,f){f(c.discriminant,k,"Expression");var l=0;
for(c=c.cases;l<c.length;l+=1){var p=c[l];p.test&&f(p.test,k,"Expression");var b=0;for(p=p.consequent;b<p.length;b+=1)f(p[b],k,"Statement")}};Le.SwitchCase=function(c,k,f){c.test&&f(c.test,k,"Expression");var l=0;for(c=c.consequent;l<c.length;l+=1)f(c[l],k,"Statement")};Le.ReturnStatement=Le.YieldExpression=Le.AwaitExpression=function(c,k,f){c.argument&&f(c.argument,k,"Expression")};Le.ThrowStatement=Le.SpreadElement=function(c,k,f){return f(c.argument,k,"Expression")};Le.TryStatement=function(c,
k,f){f(c.block,k,"Statement");c.handler&&f(c.handler,k);c.finalizer&&f(c.finalizer,k,"Statement")};Le.CatchClause=function(c,k,f){c.param&&f(c.param,k,"Pattern");f(c.body,k,"Statement")};Le.WhileStatement=Le.DoWhileStatement=function(c,k,f){f(c.test,k,"Expression");f(c.body,k,"Statement")};Le.ForStatement=function(c,k,f){c.init&&f(c.init,k,"ForInit");c.test&&f(c.test,k,"Expression");c.update&&f(c.update,k,"Expression");f(c.body,k,"Statement")};Le.ForInStatement=Le.ForOfStatement=function(c,k,f){f(c.left,
k,"ForInit");f(c.right,k,"Expression");f(c.body,k,"Statement")};Le.ForInit=function(c,k,f){"VariableDeclaration"===c.type?f(c,k):f(c,k,"Expression")};Le.DebuggerStatement=eu;Le.FunctionDeclaration=function(c,k,f){return f(c,k,"Function")};Le.VariableDeclaration=function(c,k,f){var l=0;for(c=c.declarations;l<c.length;l+=1)f(c[l],k)};Le.VariableDeclarator=function(c,k,f){f(c.id,k,"Pattern");c.init&&f(c.init,k,"Expression")};Le.Function=function(c,k,f){c.id&&f(c.id,k,"Pattern");for(var l=0,p=c.params;l<
p.length;l+=1)f(p[l],k,"Pattern");f(c.body,k,c.expression?"Expression":"Statement")};Le.Pattern=function(c,k,f){"Identifier"===c.type?f(c,k,"VariablePattern"):"MemberExpression"===c.type?f(c,k,"MemberPattern"):f(c,k)};Le.VariablePattern=eu;Le.MemberPattern=DL;Le.RestElement=function(c,k,f){return f(c.argument,k,"Pattern")};Le.ArrayPattern=function(c,k,f){var l=0;for(c=c.elements;l<c.length;l+=1){var p=c[l];p&&f(p,k,"Pattern")}};Le.ObjectPattern=function(c,k,f){var l=0;for(c=c.properties;l<c.length;l+=
1){var p=c[l];"Property"===p.type?(p.computed&&f(p.key,k,"Expression"),f(p.value,k,"Pattern")):"RestElement"===p.type&&f(p.argument,k,"Pattern")}};Le.Expression=DL;Le.ThisExpression=Le.Super=Le.MetaProperty=eu;Le.ArrayExpression=function(c,k,f){var l=0;for(c=c.elements;l<c.length;l+=1){var p=c[l];p&&f(p,k,"Expression")}};Le.ObjectExpression=function(c,k,f){var l=0;for(c=c.properties;l<c.length;l+=1)f(c[l],k)};Le.FunctionExpression=Le.ArrowFunctionExpression=Le.FunctionDeclaration;Le.SequenceExpression=
function(c,k,f){var l=0;for(c=c.expressions;l<c.length;l+=1)f(c[l],k,"Expression")};Le.TemplateLiteral=function(c,k,f){for(var l=0,p=c.quasis;l<p.length;l+=1)f(p[l],k);l=0;for(c=c.expressions;l<c.length;l+=1)f(c[l],k,"Expression")};Le.TemplateElement=eu;Le.UnaryExpression=Le.UpdateExpression=function(c,k,f){f(c.argument,k,"Expression")};Le.BinaryExpression=Le.LogicalExpression=function(c,k,f){f(c.left,k,"Expression");f(c.right,k,"Expression")};Le.AssignmentExpression=Le.AssignmentPattern=function(c,
k,f){f(c.left,k,"Pattern");f(c.right,k,"Expression")};Le.ConditionalExpression=function(c,k,f){f(c.test,k,"Expression");f(c.consequent,k,"Expression");f(c.alternate,k,"Expression")};Le.NewExpression=Le.CallExpression=function(c,k,f){f(c.callee,k,"Expression");if(c.arguments){var l=0;for(c=c.arguments;l<c.length;l+=1)f(c[l],k,"Expression")}};Le.MemberExpression=function(c,k,f){f(c.object,k,"Expression");c.computed&&f(c.property,k,"Expression")};Le.ExportNamedDeclaration=Le.ExportDefaultDeclaration=
function(c,k,f){c.declaration&&f(c.declaration,k,"ExportNamedDeclaration"===c.type||c.declaration.id?"Statement":"Expression");c.source&&f(c.source,k,"Expression")};Le.ExportAllDeclaration=function(c,k,f){c.exported&&f(c.exported,k);f(c.source,k,"Expression")};Le.ImportDeclaration=function(c,k,f){for(var l=0,p=c.specifiers;l<p.length;l+=1)f(p[l],k);f(c.source,k,"Expression")};Le.ImportExpression=function(c,k,f){f(c.source,k,"Expression")};Le.ImportSpecifier=Le.ImportDefaultSpecifier=Le.ImportNamespaceSpecifier=
Le.Identifier=Le.PrivateIdentifier=Le.Literal=eu;Le.TaggedTemplateExpression=function(c,k,f){f(c.tag,k,"Expression");f(c.quasi,k,"Expression")};Le.ClassDeclaration=Le.ClassExpression=function(c,k,f){return f(c,k,"Class")};Le.Class=function(c,k,f){c.id&&f(c.id,k,"Pattern");c.superClass&&f(c.superClass,k,"Expression");f(c.body,k)};Le.ClassBody=function(c,k,f){var l=0;for(c=c.body;l<c.length;l+=1)f(c[l],k)};Le.MethodDefinition=Le.PropertyDefinition=Le.Property=function(c,k,f){c.computed&&f(c.key,k,"Expression");
c.value&&f(c.value,k,"Expression")};var lo=Object.freeze({__proto__:null,ancestor:function(c,k,f,l,p){var b=[];f||(f=Le);(function n(h,a,e){e=e||h.type;var q=k[e],r=h!==b[b.length-1];r&&b.push(h);f[e](h,a,n);q&&q(h,a||b,b);r&&b.pop()})(c,l,p)},base:Le,findNodeAfter:function(c,k,f,l,p){f=jD(f);l||(l=Le);try{(function e(d,h,a){if(!(d.end<k)){a=a||d.type;if(d.start>=k&&f(a,d))throw new hv(d,h);l[a](d,h,e)}})(c,p)}catch(b){if(b instanceof hv)return b;throw b;}},findNodeAround:function(c,k,f,l,p){f=jD(f);
l||(l=Le);try{(function e(d,h,a){a=a||d.type;if(!(d.start>k||d.end<k)&&(l[a](d,h,e),f(a,d)))throw new hv(d,h);})(c,p)}catch(b){if(b instanceof hv)return b;throw b;}},findNodeAt:function(c,k,f,l,p,b){p||(p=Le);l=jD(l);try{(function n(h,a,e){e=e||h.type;if((null==k||h.start<=k)&&(null==f||h.end>=f))p[e](h,a,n);if(!(null!=k&&h.start!==k||null!=f&&h.end!==f)&&l(e,h))throw new hv(h,a);})(c,b)}catch(d){if(d instanceof hv)return d;throw d;}},findNodeBefore:function(c,k,f,l,p){f=jD(f);l||(l=Le);var b;(function n(h,
a,e){h.start>k||(e=e||h.type,h.end<=k&&(!b||b.node.end<h.end)&&f(e,h)&&(b=new hv(h,a)),l[e](h,a,n))})(c,p);return b},full:function(c,k,f,l,p){f||(f=Le);var b;(function n(h,a,e){e=e||h.type;f[e](h,a,n);b!==h&&(k(h,a,e),b=h)})(c,l,p)},fullAncestor:function(c,k,f,l){f||(f=Le);var p=[],b;(function n(h,a,e){e=e||h.type;var q=h!==p[p.length-1];q&&p.push(h);f[e](h,a,n);b!==h&&(k(h,a||p,p,e),b=h);q&&p.pop()})(c,l)},make:pV,recursive:function(c,k,f,l,p){var b=f?pV(f,l||void 0):l;(function n(h,a,e){b[e||h.type](h,
a,n)})(c,k,p)},simple:function(c,k,f,l,p){f||(f=Le);(function e(d,h,a){a=a||d.type;var n=k[a];f[a](d,h,e);n&&n(d,h)})(c,l,p)}});Ka("bK",lo);var cS={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",
strictBind:"eval arguments"},yma={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this","5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},
zma=/^in(stanceof)?$/,dS="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
v8="\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",
wda=new RegExp("["+dS+"]"),xda=new RegExp("["+dS+v8+"]");dS=v8=null;var qV=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,
14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,
0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],yda=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,
13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,
9,787719,239],wi=function(c,k){void 0===k&&(k={});this.label=c;this.keyword=k.keyword;this.beforeExpr=!!k.beforeExpr;this.startsExpr=!!k.startsExpr;this.isLoop=!!k.isLoop;this.isAssign=!!k.isAssign;this.prefix=!!k.prefix;this.postfix=!!k.postfix;this.binop=k.binop||null;this.updateContext=null},mo={beforeExpr:!0},Rm={startsExpr:!0},FL={},Ua={num:new wi("num",Rm),regexp:new wi("regexp",Rm),string:new wi("string",Rm),name:new wi("name",Rm),privateId:new wi("privateId",Rm),eof:new wi("eof"),bracketL:new wi("[",
{beforeExpr:!0,startsExpr:!0}),bracketR:new wi("]"),braceL:new wi("{",{beforeExpr:!0,startsExpr:!0}),braceR:new wi("}"),parenL:new wi("(",{beforeExpr:!0,startsExpr:!0}),parenR:new wi(")"),comma:new wi(",",mo),semi:new wi(";",mo),colon:new wi(":",mo),dot:new wi("."),question:new wi("?",mo),questionDot:new wi("?."),arrow:new wi("=>",mo),template:new wi("template"),invalidTemplate:new wi("invalidTemplate"),ellipsis:new wi("...",mo),backQuote:new wi("`",Rm),dollarBraceL:new wi("${",{beforeExpr:!0,startsExpr:!0}),
eq:new wi("=",{beforeExpr:!0,isAssign:!0}),assign:new wi("_=",{beforeExpr:!0,isAssign:!0}),incDec:new wi("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new wi("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Gn("||",1),logicalAND:Gn("&&",2),bitwiseOR:Gn("|",3),bitwiseXOR:Gn("^",4),bitwiseAND:Gn("&",5),equality:Gn("==/!=/===/!==",6),relational:Gn("</>/<=/>=",7),bitShift:Gn("<</>>/>>>",8),plusMin:new wi("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Gn("%",10),star:Gn("*",
10),slash:Gn("/",10),starstar:new wi("**",{beforeExpr:!0}),coalesce:Gn("??",1),_break:di("break"),_case:di("case",mo),_catch:di("catch"),_continue:di("continue"),_debugger:di("debugger"),_default:di("default",mo),_do:di("do",{isLoop:!0,beforeExpr:!0}),_else:di("else",mo),_finally:di("finally"),_for:di("for",{isLoop:!0}),_function:di("function",Rm),_if:di("if"),_return:di("return",mo),_switch:di("switch"),_throw:di("throw",mo),_try:di("try"),_var:di("var"),_const:di("const"),_while:di("while",{isLoop:!0}),
_with:di("with"),_new:di("new",{beforeExpr:!0,startsExpr:!0}),_this:di("this",Rm),_super:di("super",Rm),_class:di("class",Rm),_extends:di("extends",mo),_export:di("export"),_import:di("import",Rm),_null:di("null",Rm),_true:di("true",Rm),_false:di("false",Rm),_in:di("in",{beforeExpr:!0,binop:7}),_instanceof:di("instanceof",{beforeExpr:!0,binop:7}),_typeof:di("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:di("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:di("delete",{beforeExpr:!0,
prefix:!0,startsExpr:!0})},sn=/\r\n?|\n|\u2028|\u2029/,gu=new RegExp(sn.source,"g"),w8=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,no=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,x8=Object.prototype,wz=x8.hasOwnProperty,Ama=x8.toString,sV=Array.isArray||function(c){return"[object Array]"===Ama.call(c)},vz=function(c,k){this.line=c;this.column=k};vz.prototype.offset=function(c){return new vz(this.line,this.column+c)};var Sw=function(c,k,f){this.start=k;this.end=f;null!==c.sourceFile&&(this.source=c.sourceFile)},
kD={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},rV=!1,Vk=function(c,k,f){this.options=c=zda(c);this.sourceFile=c.sourceFile;this.keywords=fu(yma[6<=c.ecmaVersion?6:"module"===c.sourceType?
"5module":5]);var l="";!0!==c.allowReserved&&(l=cS[6<=c.ecmaVersion?6:5===c.ecmaVersion?5:3],"module"===c.sourceType&&(l+=" await"));this.reservedWords=fu(l);l=(l?l+" ":"")+cS.strict;this.reservedWordsStrict=fu(l);this.reservedWordsStrictBind=fu(l+" "+cS.strictBind);this.input=String(k);this.containsEsc=!1;f?(this.pos=f,this.lineStart=this.input.lastIndexOf("\n",f-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(sn).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=Ua.eof;this.value=
null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===c.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.potentialArrowInForAwait=!1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports=Object.create(null);0===this.pos&&c.allowHashBang&&
"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null;this.privateNameStack=[]},zr={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};Vk.prototype.parse=function(){var c=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(c)};
zr.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};zr.inGenerator.get=function(){return 0<(this.currentVarScope().flags&8)&&!this.currentVarScope().inClassFieldInit};zr.inAsync.get=function(){return 0<(this.currentVarScope().flags&4)&&!this.currentVarScope().inClassFieldInit};zr.canAwait.get=function(){for(var c=this.scopeStack.length-1;0<=c;c--){var k=this.scopeStack[c];if(k.inClassFieldInit)return!1;if(k.flags&2)return 0<(k.flags&4)}return this.inModule&&13<=this.options.ecmaVersion||
this.options.allowAwaitOutsideFunction};zr.allowSuper.get=function(){var c=this.currentThisScope(),k=c.inClassFieldInit;return 0<(c.flags&64)||k||this.options.allowSuperOutsideMethod};zr.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};zr.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};zr.inNonArrowFunction.get=function(){var c=this.currentThisScope(),k=c.inClassFieldInit;return 0<(c.flags&2)||k};Vk.extend=function(){for(var c=
[],k=arguments.length;k--;)c[k]=arguments[k];k=this;for(var f=0;f<c.length;f++)k=c[f](k);return k};Vk.parse=function(c,k){return(new this(k,c)).parse()};Vk.parseExpressionAt=function(c,k,f){c=new this(f,c,k);c.nextToken();return c.parseExpression()};Vk.tokenizer=function(c,k){return new this(k,c)};Object.defineProperties(Vk.prototype,zr);var nm=Vk.prototype,Bma=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;nm.strictDirective=function(c){for(;;){no.lastIndex=c;c+=no.exec(this.input)[0].length;var k=
Bma.exec(this.input.slice(c));if(!k)return!1;if("use strict"===(k[1]||k[2])){no.lastIndex=c+k[0].length;c=no.exec(this.input);k=c.index+c[0].length;var f=this.input.charAt(k);return";"===f||"}"===f||sn.test(c[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(f)||"!"===f&&"="===this.input.charAt(k+1))}c+=k[0].length;no.lastIndex=c;c+=no.exec(this.input)[0].length;";"===this.input[c]&&c++}};nm.eat=function(c){return this.type===c?(this.next(),!0):!1};nm.isContextual=function(c){return this.type===Ua.name&&this.value===
c&&!this.containsEsc};nm.eatContextual=function(c){if(!this.isContextual(c))return!1;this.next();return!0};nm.expectContextual=function(c){this.eatContextual(c)||this.unexpected()};nm.canInsertSemicolon=function(){return this.type===Ua.eof||this.type===Ua.braceR||sn.test(this.input.slice(this.lastTokEnd,this.start))};nm.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};nm.semicolon=
function(){this.eat(Ua.semi)||this.insertSemicolon()||this.unexpected()};nm.afterTrailingComma=function(c,k){if(this.type===c){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc);k||this.next();return!0}};nm.expect=function(c){this.eat(c)||this.unexpected()};nm.unexpected=function(c){this.raise(null!=c?c:this.start,"Unexpected token")};nm.checkPatternErrors=function(c,k){c&&(-1<c.trailingComma&&this.raiseRecoverable(c.trailingComma,"Comma is not permitted after the rest element"),
c=k?c.parenthesizedAssign:c.parenthesizedBind,-1<c&&this.raiseRecoverable(c,"Parenthesized pattern"))};nm.checkExpressionErrors=function(c,k){if(!c)return!1;var f=c.shorthandAssign;c=c.doubleProto;if(!k)return 0<=f||0<=c;0<=f&&this.raise(f,"Shorthand property assignments are valid only in destructuring patterns");0<=c&&this.raiseRecoverable(c,"Redefinition of __proto__ property")};nm.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,
"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};nm.isSimpleAssignTarget=function(c){return"ParenthesizedExpression"===c.type?this.isSimpleAssignTarget(c.expression):"Identifier"===c.type||"MemberExpression"===c.type};var Og=Vk.prototype;Og.parseTopLevel=function(c){var k=Object.create(null);c.body||(c.body=[]);for(;this.type!==Ua.eof;){var f=this.parseStatement(null,!0,k);c.body.push(f)}if(this.inModule)for(k=0,f=
Object.keys(this.undefinedExports);k<f.length;k+=1){var l=f[k];this.raiseRecoverable(this.undefinedExports[l].start,"Export '"+l+"' is not defined")}this.adaptDirectivePrologue(c.body);this.next();c.sourceType=this.options.sourceType;return this.finishNode(c,"Program")};var eS={kind:"loop"},Cma={kind:"switch"};Og.isLet=function(c){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;no.lastIndex=this.pos;var k=no.exec(this.input);k=this.pos+k[0].length;var f=this.input.charCodeAt(k);
if(91===f||92===f||55295<f&&56320>f)return!0;if(c)return!1;if(123===f)return!0;if(Pq(f,!0)){for(c=k+1;Rw(f=this.input.charCodeAt(c),!0);)++c;if(92===f||55295<f&&56320>f)return!0;c=this.input.slice(k,c);if(!zma.test(c))return!0}return!1};Og.isAsyncFunction=function(){if(8>this.options.ecmaVersion||!this.isContextual("async"))return!1;no.lastIndex=this.pos;var c=no.exec(this.input);c=this.pos+c[0].length;var k;return!sn.test(this.input.slice(this.pos,c))&&"function"===this.input.slice(c,c+8)&&(c+8===
this.input.length||!(Rw(k=this.input.charCodeAt(c+8))||55295<k&&56320>k))};Og.parseStatement=function(c,k,f){var l=this.type,p=this.startNode();if(this.isLet(c)){l=Ua._var;var b="let"}switch(l){case Ua._break:case Ua._continue:return this.parseBreakContinueStatement(p,l.keyword);case Ua._debugger:return this.parseDebuggerStatement(p);case Ua._do:return this.parseDoStatement(p);case Ua._for:return this.parseForStatement(p);case Ua._function:return c&&(this.strict||"if"!==c&&"label"!==c)&&6<=this.options.ecmaVersion&&
this.unexpected(),this.parseFunctionStatement(p,!1,!c);case Ua._class:return c&&this.unexpected(),this.parseClass(p,!0);case Ua._if:return this.parseIfStatement(p);case Ua._return:return this.parseReturnStatement(p);case Ua._switch:return this.parseSwitchStatement(p);case Ua._throw:return this.parseThrowStatement(p);case Ua._try:return this.parseTryStatement(p);case Ua._const:case Ua._var:return b=b||this.value,c&&"var"!==b&&this.unexpected(),this.parseVarStatement(p,b);case Ua._while:return this.parseWhileStatement(p);
case Ua._with:return this.parseWithStatement(p);case Ua.braceL:return this.parseBlock(!0,p);case Ua.semi:return this.parseEmptyStatement(p);case Ua._export:case Ua._import:if(10<this.options.ecmaVersion&&l===Ua._import&&(no.lastIndex=this.pos,c=no.exec(this.input),c=this.input.charCodeAt(this.pos+c[0].length),40===c||46===c))return this.parseExpressionStatement(p,this.parseExpression());this.options.allowImportExportEverywhere||(k||this.raise(this.start,"'import' and 'export' may only appear at the top level"),
this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return l===Ua._import?this.parseImport(p):this.parseExport(p,f);default:if(this.isAsyncFunction())return c&&this.unexpected(),this.next(),this.parseFunctionStatement(p,!0,!c);k=this.value;f=this.parseExpression();return l===Ua.name&&"Identifier"===f.type&&this.eat(Ua.colon)?this.parseLabeledStatement(p,k,f,c):this.parseExpressionStatement(p,f)}};Og.parseBreakContinueStatement=function(c,k){var f=
"break"===k;this.next();this.eat(Ua.semi)||this.insertSemicolon()?c.label=null:this.type!==Ua.name?this.unexpected():(c.label=this.parseIdent(),this.semicolon());for(var l=0;l<this.labels.length;++l){var p=this.labels[l];if(null==c.label||p.name===c.label.name){if(null!=p.kind&&(f||"loop"===p.kind))break;if(c.label&&f)break}}l===this.labels.length&&this.raise(c.start,"Unsyntactic "+k);return this.finishNode(c,f?"BreakStatement":"ContinueStatement")};Og.parseDebuggerStatement=function(c){this.next();
this.semicolon();return this.finishNode(c,"DebuggerStatement")};Og.parseDoStatement=function(c){this.next();this.labels.push(eS);c.body=this.parseStatement("do");this.labels.pop();this.expect(Ua._while);c.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat(Ua.semi):this.semicolon();return this.finishNode(c,"DoWhileStatement")};Og.parseForStatement=function(c){this.next();var k=9<=this.options.ecmaVersion&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(eS);
this.enterScope(0);this.expect(Ua.parenL);if(this.type===Ua.semi)return-1<k&&this.unexpected(k),this.parseFor(c,null);var f=this.isLet();if(this.type===Ua._var||this.type===Ua._const||f){var l=this.startNode();f=f?"let":this.value;this.next();this.parseVar(l,!0,f);this.finishNode(l,"VariableDeclaration");if((this.type===Ua._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===l.declarations.length)return 9<=this.options.ecmaVersion&&(this.type===Ua._in?-1<k&&this.unexpected(k):c.await=-1<
k),this.parseForIn(c,l);-1<k&&this.unexpected(k);return this.parseFor(c,l)}l=new lD;f=this.parseExpression(-1<k?"await":!0,l);if(this.type===Ua._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return 9<=this.options.ecmaVersion&&(this.type===Ua._in?-1<k&&this.unexpected(k):c.await=-1<k),this.toAssignable(f,!1,l),this.checkLValPattern(f),this.parseForIn(c,f);this.checkExpressionErrors(l,!0);-1<k&&this.unexpected(k);return this.parseFor(c,f)};Og.parseFunctionStatement=function(c,k,f){this.next();
return this.parseFunction(c,GB|(f?0:fS),!1,k)};Og.parseIfStatement=function(c){this.next();c.test=this.parseParenExpression();c.consequent=this.parseStatement("if");c.alternate=this.eat(Ua._else)?this.parseStatement("if"):null;return this.finishNode(c,"IfStatement")};Og.parseReturnStatement=function(c){this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(Ua.semi)||this.insertSemicolon()?c.argument=null:(c.argument=this.parseExpression(),
this.semicolon());return this.finishNode(c,"ReturnStatement")};Og.parseSwitchStatement=function(c){this.next();c.discriminant=this.parseParenExpression();c.cases=[];this.expect(Ua.braceL);this.labels.push(Cma);this.enterScope(0);for(var k,f=!1;this.type!==Ua.braceR;)if(this.type===Ua._case||this.type===Ua._default){var l=this.type===Ua._case;k&&this.finishNode(k,"SwitchCase");c.cases.push(k=this.startNode());k.consequent=[];this.next();l?k.test=this.parseExpression():(f&&this.raiseRecoverable(this.lastTokStart,
"Multiple default clauses"),f=!0,k.test=null);this.expect(Ua.colon)}else k||this.unexpected(),k.consequent.push(this.parseStatement(null));this.exitScope();k&&this.finishNode(k,"SwitchCase");this.next();this.labels.pop();return this.finishNode(c,"SwitchStatement")};Og.parseThrowStatement=function(c){this.next();sn.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");c.argument=this.parseExpression();this.semicolon();return this.finishNode(c,
"ThrowStatement")};var Dma=[];Og.parseTryStatement=function(c){this.next();c.block=this.parseBlock();c.handler=null;if(this.type===Ua._catch){var k=this.startNode();this.next();if(this.eat(Ua.parenL)){k.param=this.parseBindingAtom();var f="Identifier"===k.param.type;this.enterScope(f?32:0);this.checkLValPattern(k.param,f?4:2);this.expect(Ua.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),k.param=null,this.enterScope(0);k.body=this.parseBlock(!1);this.exitScope();c.handler=this.finishNode(k,
"CatchClause")}c.finalizer=this.eat(Ua._finally)?this.parseBlock():null;c.handler||c.finalizer||this.raise(c.start,"Missing catch or finally clause");return this.finishNode(c,"TryStatement")};Og.parseVarStatement=function(c,k){this.next();this.parseVar(c,!1,k);this.semicolon();return this.finishNode(c,"VariableDeclaration")};Og.parseWhileStatement=function(c){this.next();c.test=this.parseParenExpression();this.labels.push(eS);c.body=this.parseStatement("while");this.labels.pop();return this.finishNode(c,
"WhileStatement")};Og.parseWithStatement=function(c){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();c.object=this.parseParenExpression();c.body=this.parseStatement("with");return this.finishNode(c,"WithStatement")};Og.parseEmptyStatement=function(c){this.next();return this.finishNode(c,"EmptyStatement")};Og.parseLabeledStatement=function(c,k,f,l){for(var p=0,b=this.labels;p<b.length;p+=1)b[p].name===k&&this.raise(f.start,"Label '"+k+"' is already declared");p=this.type.isLoop?
"loop":this.type===Ua._switch?"switch":null;for(b=this.labels.length-1;0<=b;b--){var d=this.labels[b];if(d.statementStart===c.start)d.statementStart=this.start,d.kind=p;else break}this.labels.push({name:k,kind:p,statementStart:this.start});c.body=this.parseStatement(l?-1===l.indexOf("label")?l+"label":l:"label");this.labels.pop();c.label=f;return this.finishNode(c,"LabeledStatement")};Og.parseExpressionStatement=function(c,k){c.expression=k;this.semicolon();return this.finishNode(c,"ExpressionStatement")};
Og.parseBlock=function(c,k,f){void 0===c&&(c=!0);void 0===k&&(k=this.startNode());k.body=[];this.expect(Ua.braceL);for(c&&this.enterScope(0);this.type!==Ua.braceR;){var l=this.parseStatement(null);k.body.push(l)}f&&(this.strict=!1);this.next();c&&this.exitScope();return this.finishNode(k,"BlockStatement")};Og.parseFor=function(c,k){c.init=k;this.expect(Ua.semi);c.test=this.type===Ua.semi?null:this.parseExpression();this.expect(Ua.semi);c.update=this.type===Ua.parenR?null:this.parseExpression();this.expect(Ua.parenR);
c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,"ForStatement")};Og.parseForIn=function(c,k){var f=this.type===Ua._in;this.next();"VariableDeclaration"===k.type&&null!=k.declarations[0].init&&(!f||8>this.options.ecmaVersion||this.strict||"var"!==k.kind||"Identifier"!==k.declarations[0].id.type)&&this.raise(k.start,(f?"for-in":"for-of")+" loop variable declaration may not have an initializer");c.left=k;c.right=f?this.parseExpression():this.parseMaybeAssign();
this.expect(Ua.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,f?"ForInStatement":"ForOfStatement")};Og.parseVar=function(c,k,f){c.declarations=[];for(c.kind=f;;){var l=this.startNode();this.parseVarId(l,f);this.eat(Ua.eq)?l.init=this.parseMaybeAssign(k):"const"!==f||this.type===Ua._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===l.id.type||k&&(this.type===Ua._in||this.isContextual("of"))?l.init=null:this.raise(this.lastTokEnd,
"Complex binding patterns require an initialization value"):this.unexpected();c.declarations.push(this.finishNode(l,"VariableDeclarator"));if(!this.eat(Ua.comma))break}return c};Og.parseVarId=function(c,k){c.id=this.parseBindingAtom();this.checkLValPattern(c.id,"var"===k?1:2,!1)};var GB=1,fS=2;Og.parseFunction=function(c,k,f,l){this.initFunction(c);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!l)this.type===Ua.star&&k&fS&&this.unexpected(),c.generator=this.eat(Ua.star);8<=this.options.ecmaVersion&&
(c.async=!!l);k&GB&&(c.id=k&4&&this.type!==Ua.name?null:this.parseIdent(),!c.id||k&fS||this.checkLValSimple(c.id,this.strict||c.generator||c.async?this.treatFunctionsAsVar?1:2:3));l=this.yieldPos;var p=this.awaitPos,b=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(c.async?4:0)|(c.generator?8:0));k&GB||(c.id=this.type===Ua.name?this.parseIdent():null);this.parseFunctionParams(c);this.parseFunctionBody(c,f,!1);this.yieldPos=l;this.awaitPos=p;this.awaitIdentPos=
b;return this.finishNode(c,k&GB?"FunctionDeclaration":"FunctionExpression")};Og.parseFunctionParams=function(c){this.expect(Ua.parenL);c.params=this.parseBindingList(Ua.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};Og.parseClass=function(c,k){this.next();var f=this.strict;this.strict=!0;this.parseClassId(c,k);this.parseClassSuper(c);var l=this.enterClassBody(),p=this.startNode(),b=!1;p.body=[];for(this.expect(Ua.braceL);this.type!==Ua.braceR;){var d=this.parseClassElement(null!==
c.superClass);if(d)if(p.body.push(d),"MethodDefinition"===d.type&&"constructor"===d.kind)b&&this.raise(d.start,"Duplicate constructor in the same class"),b=!0;else{var h;if(h="PrivateIdentifier"===d.key.type){h=l;var a=d.key.name,e=h[a],n="true";"MethodDefinition"!==d.type||"get"!==d.kind&&"set"!==d.kind||(n=(d.static?"s":"i")+d.kind);"iget"===e&&"iset"===n||"iset"===e&&"iget"===n||"sget"===e&&"sset"===n||"sset"===e&&"sget"===n?(h[a]="true",h=!1):e?h=!0:(h[a]=n,h=!1)}h&&this.raiseRecoverable(d.key.start,
"Identifier '#"+d.key.name+"' has already been declared")}}this.strict=f;this.next();c.body=this.finishNode(p,"ClassBody");this.exitClassBody();return this.finishNode(c,k?"ClassDeclaration":"ClassExpression")};Og.parseClassElement=function(c){if(this.eat(Ua.semi))return null;var k=this.options.ecmaVersion,f=this.startNode(),l="",p=!1,b=!1,d="method";f.static=!1;this.eatContextual("static")&&(this.isClassElementNameStart()||this.type===Ua.star?f.static=!0:l="static");!l&&8<=k&&this.eatContextual("async")&&
(!this.isClassElementNameStart()&&this.type!==Ua.star||this.canInsertSemicolon()?l="async":b=!0);!l&&(9<=k||!b)&&this.eat(Ua.star)&&(p=!0);if(!l&&!b&&!p){var h=this.value;if(this.eatContextual("get")||this.eatContextual("set"))this.isClassElementNameStart()?d=h:l=h}l?(f.computed=!1,f.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),f.key.name=l,this.finishNode(f.key,"Identifier")):this.parseClassElementName(f);13>k||this.type===Ua.parenL||"method"!==d||p||b?(c=(k=!f.static&&mD(f,"constructor"))&&
c,k&&"method"!==d&&this.raise(f.key.start,"Constructor can't have get/set modifier"),f.kind=k?"constructor":d,this.parseClassMethod(f,p,b,c)):this.parseClassField(f);return f};Og.isClassElementNameStart=function(){return this.type===Ua.name||this.type===Ua.privateId||this.type===Ua.num||this.type===Ua.string||this.type===Ua.bracketL||this.type.keyword};Og.parseClassElementName=function(c){this.type===Ua.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),
c.computed=!1,c.key=this.parsePrivateIdent()):this.parsePropertyName(c)};Og.parseClassMethod=function(c,k,f,l){var p=c.key;"constructor"===c.kind?(k&&this.raise(p.start,"Constructor can't be a generator"),f&&this.raise(p.start,"Constructor can't be an async method")):c.static&&mD(c,"prototype")&&this.raise(p.start,"Classes may not have a static property named prototype");k=c.value=this.parseMethod(k,f,l);"get"===c.kind&&0!==k.params.length&&this.raiseRecoverable(k.start,"getter should have no params");
"set"===c.kind&&1!==k.params.length&&this.raiseRecoverable(k.start,"setter should have exactly one param");"set"===c.kind&&"RestElement"===k.params[0].type&&this.raiseRecoverable(k.params[0].start,"Setter cannot use rest params");return this.finishNode(c,"MethodDefinition")};Og.parseClassField=function(c){mD(c,"constructor")?this.raise(c.key.start,"Classes can't have a field named 'constructor'"):c.static&&mD(c,"prototype")&&this.raise(c.key.start,"Classes can't have a static field named 'prototype'");
if(this.eat(Ua.eq)){var k=this.currentThisScope(),f=k.inClassFieldInit;k.inClassFieldInit=!0;c.value=this.parseMaybeAssign();k.inClassFieldInit=f}else c.value=null;this.semicolon();return this.finishNode(c,"PropertyDefinition")};Og.parseClassId=function(c,k){this.type===Ua.name?(c.id=this.parseIdent(),k&&this.checkLValSimple(c.id,2,!1)):(!0===k&&this.unexpected(),c.id=null)};Og.parseClassSuper=function(c){c.superClass=this.eat(Ua._extends)?this.parseExprSubscripts():null};Og.enterClassBody=function(){var c=
{declared:Object.create(null),used:[]};this.privateNameStack.push(c);return c.declared};Og.exitClassBody=function(){var c=this.privateNameStack.pop(),k=c.declared;c=c.used;var f=this.privateNameStack.length;f=0===f?null:this.privateNameStack[f-1];for(var l=0;l<c.length;++l){var p=c[l];wz.call(k,p.name)||(f?f.used.push(p):this.raiseRecoverable(p.start,"Private field '#"+p.name+"' must be declared in an enclosing class"))}};Og.parseExport=function(c,k){this.next();if(this.eat(Ua.star))return 11<=this.options.ecmaVersion&&
(this.eatContextual("as")?(c.exported=this.parseIdent(!0),this.checkExport(k,c.exported.name,this.lastTokStart)):c.exported=null),this.expectContextual("from"),this.type!==Ua.string&&this.unexpected(),c.source=this.parseExprAtom(),this.semicolon(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(Ua._default)){this.checkExport(k,"default",this.lastTokStart);var f;this.type===Ua._function||(f=this.isAsyncFunction())?(k=this.startNode(),this.next(),f&&this.next(),c.declaration=this.parseFunction(k,
GB|4,!1,f)):this.type===Ua._class?(f=this.startNode(),c.declaration=this.parseClass(f,"nullableID")):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())c.declaration=this.parseStatement(null),"VariableDeclaration"===c.declaration.type?this.checkVariableExport(k,c.declaration.declarations):this.checkExport(k,c.declaration.id.name,c.declaration.id.start),c.specifiers=[],c.source=null;else{c.declaration=null;
c.specifiers=this.parseExportSpecifiers(k);if(this.eatContextual("from"))this.type!==Ua.string&&this.unexpected(),c.source=this.parseExprAtom();else{f=0;for(k=c.specifiers;f<k.length;f+=1){var l=k[f];this.checkUnreserved(l.local);this.checkLocalExport(l.local)}c.source=null}this.semicolon()}return this.finishNode(c,"ExportNamedDeclaration")};Og.checkExport=function(c,k,f){c&&(wz.call(c,k)&&this.raiseRecoverable(f,"Duplicate export '"+k+"'"),c[k]=!0)};Og.checkPatternExport=function(c,k){var f=k.type;
if("Identifier"===f)this.checkExport(c,k.name,k.start);else if("ObjectPattern"===f)for(f=0,k=k.properties;f<k.length;f+=1)this.checkPatternExport(c,k[f]);else if("ArrayPattern"===f)for(f=0,k=k.elements;f<k.length;f+=1){var l=k[f];l&&this.checkPatternExport(c,l)}else"Property"===f?this.checkPatternExport(c,k.value):"AssignmentPattern"===f?this.checkPatternExport(c,k.left):"RestElement"===f?this.checkPatternExport(c,k.argument):"ParenthesizedExpression"===f&&this.checkPatternExport(c,k.expression)};
Og.checkVariableExport=function(c,k){if(c)for(var f=0;f<k.length;f+=1)this.checkPatternExport(c,k[f].id)};Og.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};Og.parseExportSpecifiers=function(c){var k=[],f=!0;for(this.expect(Ua.braceL);!this.eat(Ua.braceR);){if(f)f=!1;else if(this.expect(Ua.comma),this.afterTrailingComma(Ua.braceR))break;var l=this.startNode();
l.local=this.parseIdent(!0);l.exported=this.eatContextual("as")?this.parseIdent(!0):l.local;this.checkExport(c,l.exported.name,l.exported.start);k.push(this.finishNode(l,"ExportSpecifier"))}return k};Og.parseImport=function(c){this.next();this.type===Ua.string?(c.specifiers=Dma,c.source=this.parseExprAtom()):(c.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),c.source=this.type===Ua.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(c,"ImportDeclaration")};
Og.parseImportSpecifiers=function(){var c=[],k=!0;if(this.type===Ua.name){var f=this.startNode();f.local=this.parseIdent();this.checkLValSimple(f.local,2);c.push(this.finishNode(f,"ImportDefaultSpecifier"));if(!this.eat(Ua.comma))return c}if(this.type===Ua.star)return k=this.startNode(),this.next(),this.expectContextual("as"),k.local=this.parseIdent(),this.checkLValSimple(k.local,2),c.push(this.finishNode(k,"ImportNamespaceSpecifier")),c;for(this.expect(Ua.braceL);!this.eat(Ua.braceR);){if(k)k=!1;
else if(this.expect(Ua.comma),this.afterTrailingComma(Ua.braceR))break;f=this.startNode();f.imported=this.parseIdent(!0);this.eatContextual("as")?f.local=this.parseIdent():(this.checkUnreserved(f.imported),f.local=f.imported);this.checkLValSimple(f.local,2);c.push(this.finishNode(f,"ImportSpecifier"))}return c};Og.adaptDirectivePrologue=function(c){for(var k=0;k<c.length&&this.isDirectiveCandidate(c[k]);++k)c[k].directive=c[k].expression.raw.slice(1,-1)};Og.isDirectiveCandidate=function(c){return"ExpressionStatement"===
c.type&&"Literal"===c.expression.type&&"string"===typeof c.expression.value&&('"'===this.input[c.start]||"'"===this.input[c.start])};var hp=Vk.prototype;hp.toAssignable=function(c,k,f){if(6<=this.options.ecmaVersion&&c)switch(c.type){case "Identifier":this.inAsync&&"await"===c.name&&this.raise(c.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;case "ObjectExpression":c.type="ObjectPattern";
f&&this.checkPatternErrors(f,!0);f=0;for(var l=c.properties;f<l.length;f+=1){var p=l[f];this.toAssignable(p,k);"RestElement"!==p.type||"ArrayPattern"!==p.argument.type&&"ObjectPattern"!==p.argument.type||this.raise(p.argument.start,"Unexpected token")}break;case "Property":"init"!==c.kind&&this.raise(c.key.start,"Object pattern can't contain getter or setter");this.toAssignable(c.value,k);break;case "ArrayExpression":c.type="ArrayPattern";f&&this.checkPatternErrors(f,!0);this.toAssignableList(c.elements,
k);break;case "SpreadElement":c.type="RestElement";this.toAssignable(c.argument,k);"AssignmentPattern"===c.argument.type&&this.raise(c.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==c.operator&&this.raise(c.left.end,"Only '=' operator can be used for specifying default value.");c.type="AssignmentPattern";delete c.operator;this.toAssignable(c.left,k);break;case "ParenthesizedExpression":this.toAssignable(c.expression,k,f);break;case "ChainExpression":this.raiseRecoverable(c.start,
"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":if(!k)break;default:this.raise(c.start,"Assigning to rvalue")}else f&&this.checkPatternErrors(f,!0);return c};hp.toAssignableList=function(c,k){for(var f=c.length,l=0;l<f;l++){var p=c[l];p&&this.toAssignable(p,k)}f&&(f=c[f-1],6===this.options.ecmaVersion&&k&&f&&"RestElement"===f.type&&"Identifier"!==f.argument.type&&this.unexpected(f.argument.start));return c};hp.parseSpread=function(c){var k=this.startNode();this.next();
k.argument=this.parseMaybeAssign(!1,c);return this.finishNode(k,"SpreadElement")};hp.parseRestBinding=function(){var c=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==Ua.name&&this.unexpected();c.argument=this.parseBindingAtom();return this.finishNode(c,"RestElement")};hp.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case Ua.bracketL:var c=this.startNode();this.next();c.elements=this.parseBindingList(Ua.bracketR,!0,!0);return this.finishNode(c,
"ArrayPattern");case Ua.braceL:return this.parseObj(!0)}return this.parseIdent()};hp.parseBindingList=function(c,k,f){for(var l=[],p=!0;!this.eat(c);)if(p?p=!1:this.expect(Ua.comma),k&&this.type===Ua.comma)l.push(null);else if(f&&this.afterTrailingComma(c))break;else if(this.type===Ua.ellipsis){k=this.parseRestBinding();this.parseBindingListItem(k);l.push(k);this.type===Ua.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(c);break}else{var b=this.parseMaybeDefault(this.start,
this.startLoc);this.parseBindingListItem(b);l.push(b)}return l};hp.parseBindingListItem=function(c){return c};hp.parseMaybeDefault=function(c,k,f){f=f||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat(Ua.eq))return f;c=this.startNodeAt(c,k);c.left=f;c.right=this.parseMaybeAssign();return this.finishNode(c,"AssignmentPattern")};hp.checkLValSimple=function(c,k,f){void 0===k&&(k=0);var l=0!==k;switch(c.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(c.name)&&this.raiseRecoverable(c.start,
(l?"Binding ":"Assigning to ")+c.name+" in strict mode");l&&(2===k&&"let"===c.name&&this.raiseRecoverable(c.start,"let is disallowed as a lexically bound name"),f&&(wz.call(f,c.name)&&this.raiseRecoverable(c.start,"Argument name clash"),f[c.name]=!0),5!==k&&this.declareName(c.name,k,c.start));break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":l&&this.raiseRecoverable(c.start,"Binding member expression");break;
case "ParenthesizedExpression":return l&&this.raiseRecoverable(c.start,"Binding parenthesized expression"),this.checkLValSimple(c.expression,k,f);default:this.raise(c.start,(l?"Binding":"Assigning to")+" rvalue")}};hp.checkLValPattern=function(c,k,f){void 0===k&&(k=0);switch(c.type){case "ObjectPattern":var l=0;for(c=c.properties;l<c.length;l+=1)this.checkLValInnerPattern(c[l],k,f);break;case "ArrayPattern":l=0;for(c=c.elements;l<c.length;l+=1){var p=c[l];p&&this.checkLValInnerPattern(p,k,f)}break;
default:this.checkLValSimple(c,k,f)}};hp.checkLValInnerPattern=function(c,k,f){void 0===k&&(k=0);switch(c.type){case "Property":this.checkLValInnerPattern(c.value,k,f);break;case "AssignmentPattern":this.checkLValPattern(c.left,k,f);break;case "RestElement":this.checkLValPattern(c.argument,k,f);break;default:this.checkLValPattern(c,k,f)}};var Bh=Vk.prototype;Bh.checkPropClash=function(c,k,f){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===c.type||6<=this.options.ecmaVersion&&(c.computed||c.method||
c.shorthand))){var l=c.key;switch(l.type){case "Identifier":var p=l.name;break;case "Literal":p=String(l.value);break;default:return}c=c.kind;6<=this.options.ecmaVersion?"__proto__"===p&&"init"===c&&(k.proto&&(f?0>f.doubleProto&&(f.doubleProto=l.start):this.raiseRecoverable(l.start,"Redefinition of __proto__ property")),k.proto=!0):(p="$"+p,(f=k[p])?("init"===c?this.strict&&f.init||f.get||f.set:f.init||f[c])&&this.raiseRecoverable(l.start,"Redefinition of property"):f=k[p]={init:!1,get:!1,set:!1},
f[c]=!0)}};Bh.parseExpression=function(c,k){var f=this.start,l=this.startLoc,p=this.parseMaybeAssign(c,k);if(this.type===Ua.comma){f=this.startNodeAt(f,l);for(f.expressions=[p];this.eat(Ua.comma);)f.expressions.push(this.parseMaybeAssign(c,k));return this.finishNode(f,"SequenceExpression")}return p};Bh.parseMaybeAssign=function(c,k,f){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(c);this.exprAllowed=!1}var l=!1,p=-1,b=-1;k?(p=k.parenthesizedAssign,b=k.trailingComma,k.parenthesizedAssign=
k.trailingComma=-1):(k=new lD,l=!0);var d=this.start,h=this.startLoc;if(this.type===Ua.parenL||this.type===Ua.name)this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===c;var a=this.parseMaybeConditional(c,k);f&&(a=f.call(this,a,d,h));if(this.type.isAssign)return f=this.startNodeAt(d,h),f.operator=this.value,this.type===Ua.eq&&(a=this.toAssignable(a,!1,k)),l||(k.parenthesizedAssign=k.trailingComma=k.doubleProto=-1),k.shorthandAssign>=a.start&&(k.shorthandAssign=-1),this.type===
Ua.eq?this.checkLValPattern(a):this.checkLValSimple(a),f.left=a,this.next(),f.right=this.parseMaybeAssign(c),this.finishNode(f,"AssignmentExpression");l&&this.checkExpressionErrors(k,!0);-1<p&&(k.parenthesizedAssign=p);-1<b&&(k.trailingComma=b);return a};Bh.parseMaybeConditional=function(c,k){var f=this.start,l=this.startLoc,p=this.parseExprOps(c,k);return this.checkExpressionErrors(k)?p:this.eat(Ua.question)?(k=this.startNodeAt(f,l),k.test=p,k.consequent=this.parseMaybeAssign(),this.expect(Ua.colon),
k.alternate=this.parseMaybeAssign(c),this.finishNode(k,"ConditionalExpression")):p};Bh.parseExprOps=function(c,k){var f=this.start,l=this.startLoc,p=this.parseMaybeUnary(k,!1);return this.checkExpressionErrors(k)?p:p.start===f&&"ArrowFunctionExpression"===p.type?p:this.parseExprOp(p,f,l,-1,c)};Bh.parseExprOp=function(c,k,f,l,p){var b=this.type.binop;if(null!=b&&(!p||this.type!==Ua._in)&&b>l){var d=this.type===Ua.logicalOR||this.type===Ua.logicalAND,h=this.type===Ua.coalesce;h&&(b=Ua.logicalAND.binop);
var a=this.value;this.next();var e=this.start,n=this.startLoc;b=this.parseExprOp(this.parseMaybeUnary(null,!1),e,n,b,p);c=this.buildBinary(k,f,c,b,a,d||h);(d&&this.type===Ua.coalesce||h&&(this.type===Ua.logicalOR||this.type===Ua.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(c,k,f,l,p)}return c};Bh.buildBinary=function(c,k,f,l,p,b){c=this.startNodeAt(c,k);c.left=f;c.operator=p;c.right=
l;return this.finishNode(c,b?"LogicalExpression":"BinaryExpression")};Bh.parseMaybeUnary=function(c,k,f){var l=this.start,p=this.startLoc;if(this.isContextual("await")&&this.canAwait){var b=this.parseAwait();k=!0}else if(this.type.prefix){b=this.startNode();var d=this.type===Ua.incDec;b.operator=this.value;b.prefix=!0;this.next();b.argument=this.parseMaybeUnary(null,!0,d);this.checkExpressionErrors(c,!0);d?this.checkLValSimple(b.argument):this.strict&&"delete"===b.operator&&"Identifier"===b.argument.type?
this.raiseRecoverable(b.start,"Deleting local variable in strict mode"):"delete"===b.operator&&tV(b.argument)?this.raiseRecoverable(b.start,"Private fields can not be deleted"):k=!0;b=this.finishNode(b,d?"UpdateExpression":"UnaryExpression")}else{b=this.parseExprSubscripts(c);if(this.checkExpressionErrors(c))return b;for(;this.type.postfix&&!this.canInsertSemicolon();)c=this.startNodeAt(l,p),c.operator=this.value,c.prefix=!1,c.argument=b,this.checkLValSimple(b),this.next(),b=this.finishNode(c,"UpdateExpression")}if(!f&&
this.eat(Ua.starstar))if(k)this.unexpected(this.lastTokStart);else return this.buildBinary(l,p,b,this.parseMaybeUnary(null,!1),"**",!1);else return b};Bh.parseExprSubscripts=function(c){var k=this.start,f=this.startLoc,l=this.parseExprAtom(c);if("ArrowFunctionExpression"===l.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return l;k=this.parseSubscripts(l,k,f);c&&"MemberExpression"===k.type&&(c.parenthesizedAssign>=k.start&&(c.parenthesizedAssign=-1),c.parenthesizedBind>=k.start&&
(c.parenthesizedBind=-1),c.trailingComma>=k.start&&(c.trailingComma=-1));return k};Bh.parseSubscripts=function(c,k,f,l){for(var p=8<=this.options.ecmaVersion&&"Identifier"===c.type&&"async"===c.name&&this.lastTokEnd===c.end&&!this.canInsertSemicolon()&&5===c.end-c.start&&this.potentialArrowAt===c.start,b=!1;;){var d=this.parseSubscript(c,k,f,l,p,b);d.optional&&(b=!0);if(d===c||"ArrowFunctionExpression"===d.type)return b&&(c=this.startNodeAt(k,f),c.expression=d,d=this.finishNode(c,"ChainExpression")),
d;c=d}};Bh.parseSubscript=function(c,k,f,l,p,b){var d=11<=this.options.ecmaVersion,h=d&&this.eat(Ua.questionDot);l&&h&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var a=this.eat(Ua.bracketL);if(a||h&&this.type!==Ua.parenL&&this.type!==Ua.backQuote||this.eat(Ua.dot))k=this.startNodeAt(k,f),k.object=c,a?(k.property=this.parseExpression(),this.expect(Ua.bracketR)):k.property=this.type===Ua.privateId&&"Super"!==c.type?this.parsePrivateIdent():this.parseIdent("never"!==
this.options.allowReserved),k.computed=!!a,d&&(k.optional=h),c=this.finishNode(k,"MemberExpression");else if(!l&&this.eat(Ua.parenL)){l=new lD;b=this.yieldPos;var e=this.awaitPos,n=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;a=this.parseExprList(Ua.parenR,8<=this.options.ecmaVersion,!1,l);if(p&&!h&&!this.canInsertSemicolon()&&this.eat(Ua.arrow))return this.checkPatternErrors(l,!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),
this.yieldPos=b,this.awaitPos=e,this.awaitIdentPos=n,this.parseArrowExpression(this.startNodeAt(k,f),a,!0);this.checkExpressionErrors(l,!0);this.yieldPos=b||this.yieldPos;this.awaitPos=e||this.awaitPos;this.awaitIdentPos=n||this.awaitIdentPos;k=this.startNodeAt(k,f);k.callee=c;k.arguments=a;d&&(k.optional=h);c=this.finishNode(k,"CallExpression")}else this.type===Ua.backQuote&&((h||b)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),d=this.startNodeAt(k,
f),d.tag=c,d.quasi=this.parseTemplate({isTagged:!0}),c=this.finishNode(d,"TaggedTemplateExpression"));return c};Bh.parseExprAtom=function(c){this.type===Ua.slash&&this.readRegexp();var k=this.potentialArrowAt===this.start;switch(this.type){case Ua._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),k=this.startNode(),this.next(),this.type!==Ua.parenL||this.allowDirectSuper||this.raise(k.start,"super() call outside constructor of a subclass"),this.type!==Ua.dot&&
this.type!==Ua.bracketL&&this.type!==Ua.parenL&&this.unexpected(),this.finishNode(k,"Super");case Ua._this:return k=this.startNode(),this.next(),this.finishNode(k,"ThisExpression");case Ua.name:c=this.start;var f=this.startLoc,l=this.containsEsc,p=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!l&&"async"===p.name&&!this.canInsertSemicolon()&&this.eat(Ua._function))return this.parseFunction(this.startNodeAt(c,f),0,!1,!0);if(k&&!this.canInsertSemicolon()){if(this.eat(Ua.arrow))return this.parseArrowExpression(this.startNodeAt(c,
f),[p],!1);if(8<=this.options.ecmaVersion&&"async"===p.name&&this.type===Ua.name&&!l&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return p=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(Ua.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(c,f),[p],!0)}return p;case Ua.regexp:return c=this.value,k=this.parseLiteral(c.value),k.regex={pattern:c.pattern,flags:c.flags},k;case Ua.num:case Ua.string:return this.parseLiteral(this.value);case Ua._null:case Ua._true:case Ua._false:return k=
this.startNode(),k.value=this.type===Ua._null?null:this.type===Ua._true,k.raw=this.type.keyword,this.next(),this.finishNode(k,"Literal");case Ua.parenL:return f=this.start,k=this.parseParenAndDistinguishExpression(k),c&&(0>c.parenthesizedAssign&&!this.isSimpleAssignTarget(k)&&(c.parenthesizedAssign=f),0>c.parenthesizedBind&&(c.parenthesizedBind=f)),k;case Ua.bracketL:return k=this.startNode(),this.next(),k.elements=this.parseExprList(Ua.bracketR,!0,!0,c),this.finishNode(k,"ArrayExpression");case Ua.braceL:return this.parseObj(!1,
c);case Ua._function:return k=this.startNode(),this.next(),this.parseFunction(k,0);case Ua._class:return this.parseClass(this.startNode(),!1);case Ua._new:return this.parseNew();case Ua.backQuote:return this.parseTemplate();case Ua._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};Bh.parseExprImport=function(){var c=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var k=this.parseIdent(!0);
switch(this.type){case Ua.parenL:return this.parseDynamicImport(c);case Ua.dot:return c.meta=k,this.parseImportMeta(c);default:this.unexpected()}};Bh.parseDynamicImport=function(c){this.next();c.source=this.parseMaybeAssign();if(!this.eat(Ua.parenR)){var k=this.start;this.eat(Ua.comma)&&this.eat(Ua.parenR)?this.raiseRecoverable(k,"Trailing comma is not allowed in import()"):this.unexpected(k)}return this.finishNode(c,"ImportExpression")};Bh.parseImportMeta=function(c){this.next();var k=this.containsEsc;
c.property=this.parseIdent(!0);"meta"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for import is 'import.meta'");k&&this.raiseRecoverable(c.start,"'import.meta' must not contain escaped characters");"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(c.start,"Cannot use 'import.meta' outside a module");return this.finishNode(c,"MetaProperty")};Bh.parseLiteral=function(c){var k=this.startNode();k.value=c;k.raw=
this.input.slice(this.start,this.end);110===k.raw.charCodeAt(k.raw.length-1)&&(k.bigint=k.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(k,"Literal")};Bh.parseParenExpression=function(){this.expect(Ua.parenL);var c=this.parseExpression();this.expect(Ua.parenR);return c};Bh.parseParenAndDistinguishExpression=function(c){var k=this.start,f=this.startLoc,l=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var p=this.start,b=this.startLoc,d=[],h=!0,a=!1,e=new lD,
n=this.yieldPos,q=this.awaitPos;for(this.awaitPos=this.yieldPos=0;this.type!==Ua.parenR;)if(h?h=!1:this.expect(Ua.comma),l&&this.afterTrailingComma(Ua.parenR,!0)){a=!0;break}else if(this.type===Ua.ellipsis){var r=this.start;d.push(this.parseParenItem(this.parseRestBinding()));this.type===Ua.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else d.push(this.parseMaybeAssign(!1,e,this.parseParenItem));l=this.start;h=this.startLoc;this.expect(Ua.parenR);if(c&&!this.canInsertSemicolon()&&
this.eat(Ua.arrow))return this.checkPatternErrors(e,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=n,this.awaitPos=q,this.parseParenArrowList(k,f,d);d.length&&!a||this.unexpected(this.lastTokStart);r&&this.unexpected(r);this.checkExpressionErrors(e,!0);this.yieldPos=n||this.yieldPos;this.awaitPos=q||this.awaitPos;1<d.length?(c=this.startNodeAt(p,b),c.expressions=d,this.finishNodeAt(c,"SequenceExpression",l,h)):c=d[0]}else c=this.parseParenExpression();return this.options.preserveParens?(k=
this.startNodeAt(k,f),k.expression=c,this.finishNode(k,"ParenthesizedExpression")):c};Bh.parseParenItem=function(c){return c};Bh.parseParenArrowList=function(c,k,f){return this.parseArrowExpression(this.startNodeAt(c,k),f)};var Ema=[];Bh.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var c=this.startNode(),k=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Ua.dot))return c.meta=k,k=this.containsEsc,c.property=this.parseIdent(!0),
"target"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for new is 'new.target'"),k&&this.raiseRecoverable(c.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(c.start,"'new.target' can only be used in functions"),this.finishNode(c,"MetaProperty");k=this.start;var f=this.startLoc,l=this.type===Ua._import;c.callee=this.parseSubscripts(this.parseExprAtom(),k,f,!0);l&&"ImportExpression"===c.callee.type&&this.raise(k,
"Cannot use new with import()");this.eat(Ua.parenL)?c.arguments=this.parseExprList(Ua.parenR,8<=this.options.ecmaVersion,!1):c.arguments=Ema;return this.finishNode(c,"NewExpression")};Bh.parseTemplateElement=function(c){c=c.isTagged;var k=this.startNode();this.type===Ua.invalidTemplate?(c||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),k.value={raw:this.value,cooked:null}):k.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value};
this.next();k.tail=this.type===Ua.backQuote;return this.finishNode(k,"TemplateElement")};Bh.parseTemplate=function(c){void 0===c&&(c={});c=c.isTagged;void 0===c&&(c=!1);var k=this.startNode();this.next();k.expressions=[];var f=this.parseTemplateElement({isTagged:c});for(k.quasis=[f];!f.tail;)this.type===Ua.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Ua.dollarBraceL),k.expressions.push(this.parseExpression()),this.expect(Ua.braceR),k.quasis.push(f=this.parseTemplateElement({isTagged:c}));
this.next();return this.finishNode(k,"TemplateLiteral")};Bh.isAsyncProp=function(c){return!c.computed&&"Identifier"===c.key.type&&"async"===c.key.name&&(this.type===Ua.name||this.type===Ua.num||this.type===Ua.string||this.type===Ua.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===Ua.star)&&!sn.test(this.input.slice(this.lastTokEnd,this.start))};Bh.parseObj=function(c,k){var f=this.startNode(),l=!0,p={};f.properties=[];for(this.next();!this.eat(Ua.braceR);){if(l)l=!1;else if(this.expect(Ua.comma),
5<=this.options.ecmaVersion&&this.afterTrailingComma(Ua.braceR))break;var b=this.parseProperty(c,k);c||this.checkPropClash(b,p,k);f.properties.push(b)}return this.finishNode(f,c?"ObjectPattern":"ObjectExpression")};Bh.parseProperty=function(c,k){var f=this.startNode(),l;if(9<=this.options.ecmaVersion&&this.eat(Ua.ellipsis)){if(c)return f.argument=this.parseIdent(!1),this.type===Ua.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(f,"RestElement");this.type===
Ua.parenL&&k&&(0>k.parenthesizedAssign&&(k.parenthesizedAssign=this.start),0>k.parenthesizedBind&&(k.parenthesizedBind=this.start));f.argument=this.parseMaybeAssign(!1,k);this.type===Ua.comma&&k&&0>k.trailingComma&&(k.trailingComma=this.start);return this.finishNode(f,"SpreadElement")}if(6<=this.options.ecmaVersion){f.method=!1;f.shorthand=!1;if(c||k){var p=this.start;var b=this.startLoc}c||(l=this.eat(Ua.star))}var d=this.containsEsc;this.parsePropertyName(f);if(!c&&!d&&8<=this.options.ecmaVersion&&
!l&&this.isAsyncProp(f)){var h=!0;l=9<=this.options.ecmaVersion&&this.eat(Ua.star);this.parsePropertyName(f,k)}else h=!1;this.parsePropertyValue(f,c,l,h,p,b,k,d);return this.finishNode(f,"Property")};Bh.parsePropertyValue=function(c,k,f,l,p,b,d,h){(f||l)&&this.type===Ua.colon&&this.unexpected();this.eat(Ua.colon)?(c.value=k?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,d),c.kind="init"):6<=this.options.ecmaVersion&&this.type===Ua.parenL?(k&&this.unexpected(),c.kind="init",
c.method=!0,c.value=this.parseMethod(f,l)):k||h||!(5<=this.options.ecmaVersion)||c.computed||"Identifier"!==c.key.type||"get"!==c.key.name&&"set"!==c.key.name||this.type===Ua.comma||this.type===Ua.braceR||this.type===Ua.eq?6<=this.options.ecmaVersion&&!c.computed&&"Identifier"===c.key.type?((f||l)&&this.unexpected(),this.checkUnreserved(c.key),"await"!==c.key.name||this.awaitIdentPos||(this.awaitIdentPos=p),c.kind="init",k?c.value=this.parseMaybeDefault(p,b,this.copyNode(c.key)):this.type===Ua.eq&&
d?(0>d.shorthandAssign&&(d.shorthandAssign=this.start),c.value=this.parseMaybeDefault(p,b,this.copyNode(c.key))):c.value=this.copyNode(c.key),c.shorthand=!0):this.unexpected():((f||l)&&this.unexpected(),c.kind=c.key.name,this.parsePropertyName(c),c.value=this.parseMethod(!1),c.value.params.length!==("get"===c.kind?0:1)?(k=c.value.start,"get"===c.kind?this.raiseRecoverable(k,"getter should have no params"):this.raiseRecoverable(k,"setter should have exactly one param")):"set"===c.kind&&"RestElement"===
c.value.params[0].type&&this.raiseRecoverable(c.value.params[0].start,"Setter cannot use rest params"))};Bh.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Ua.bracketL))return c.computed=!0,c.key=this.parseMaybeAssign(),this.expect(Ua.bracketR),c.key;c.computed=!1}return c.key=this.type===Ua.num||this.type===Ua.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};Bh.initFunction=function(c){c.id=null;6<=this.options.ecmaVersion&&(c.generator=
c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};Bh.parseMethod=function(c,k,f){var l=this.startNode(),p=this.yieldPos,b=this.awaitPos,d=this.awaitIdentPos;this.initFunction(l);6<=this.options.ecmaVersion&&(l.generator=c);8<=this.options.ecmaVersion&&(l.async=!!k);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(k?4:0)|(l.generator?8:0)|64|(f?128:0));this.expect(Ua.parenL);l.params=this.parseBindingList(Ua.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();
this.parseFunctionBody(l,!1,!0);this.yieldPos=p;this.awaitPos=b;this.awaitIdentPos=d;return this.finishNode(l,"FunctionExpression")};Bh.parseArrowExpression=function(c,k,f){var l=this.yieldPos,p=this.awaitPos,b=this.awaitIdentPos;this.enterScope((f?4:0)|18);this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!f);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;c.params=this.toAssignableList(k,!0);this.parseFunctionBody(c,!0,!1);this.yieldPos=l;this.awaitPos=p;this.awaitIdentPos=b;return this.finishNode(c,
"ArrowFunctionExpression")};Bh.parseFunctionBody=function(c,k,f){var l=this.strict,p=!1;if(k&&this.type!==Ua.braceL)c.body=this.parseMaybeAssign(),c.expression=!0,this.checkParams(c,!1);else{var b=7<=this.options.ecmaVersion&&!this.isSimpleParamList(c.params);(!l||b)&&(p=this.strictDirective(this.end))&&b&&this.raiseRecoverable(c.start,"Illegal 'use strict' directive in function with non-simple parameter list");b=this.labels;this.labels=[];p&&(this.strict=!0);this.checkParams(c,!l&&!p&&!k&&!f&&this.isSimpleParamList(c.params));
this.strict&&c.id&&this.checkLValSimple(c.id,5);c.body=this.parseBlock(!1,void 0,p&&!l);c.expression=!1;this.adaptDirectivePrologue(c.body.body);this.labels=b}this.exitScope()};Bh.isSimpleParamList=function(c){for(var k=0;k<c.length;k+=1)if("Identifier"!==c[k].type)return!1;return!0};Bh.checkParams=function(c,k){var f=Object.create(null),l=0;for(c=c.params;l<c.length;l+=1)this.checkLValInnerPattern(c[l],1,k?null:f)};Bh.parseExprList=function(c,k,f,l){for(var p=[],b=!0;!this.eat(c);){if(b)b=!1;else if(this.expect(Ua.comma),
k&&this.afterTrailingComma(c))break;if(f&&this.type===Ua.comma)var d=null;else this.type===Ua.ellipsis?(d=this.parseSpread(l),l&&this.type===Ua.comma&&0>l.trailingComma&&(l.trailingComma=this.start)):d=this.parseMaybeAssign(!1,l);p.push(d)}return p};Bh.checkUnreserved=function(c){var k=c.start,f=c.end;c=c.name;this.inGenerator&&"yield"===c&&this.raiseRecoverable(k,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&"await"===c&&this.raiseRecoverable(k,"Cannot use 'await' as identifier inside an async function");
this.currentThisScope().inClassFieldInit&&"arguments"===c&&this.raiseRecoverable(k,"Cannot use 'arguments' in class field initializer");this.keywords.test(c)&&this.raise(k,"Unexpected keyword '"+c+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(k,f).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(c)||(this.inAsync||"await"!==c||this.raiseRecoverable(k,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(k,"The keyword '"+c+"' is reserved"))};
Bh.parseIdent=function(c,k){k=this.startNode();this.type===Ua.name?k.name=this.value:this.type.keyword?(k.name=this.type.keyword,"class"!==k.name&&"function"!==k.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!c);this.finishNode(k,"Identifier");c||(this.checkUnreserved(k),"await"!==k.name||this.awaitIdentPos||(this.awaitIdentPos=k.start));return k};Bh.parsePrivateIdent=function(){var c=this.startNode();this.type===
Ua.privateId?c.name=this.value:this.unexpected();this.next();this.finishNode(c,"PrivateIdentifier");0===this.privateNameStack.length?this.raise(c.start,"Private field '#"+c.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(c);return c};Bh.parseYield=function(c){this.yieldPos||(this.yieldPos=this.start);var k=this.startNode();this.next();this.type===Ua.semi||this.canInsertSemicolon()||this.type!==Ua.star&&!this.type.startsExpr?(k.delegate=
!1,k.argument=null):(k.delegate=this.eat(Ua.star),k.argument=this.parseMaybeAssign(c));return this.finishNode(k,"YieldExpression")};Bh.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var c=this.startNode();this.next();c.argument=this.parseMaybeUnary(null,!0);return this.finishNode(c,"AwaitExpression")};var HI=Vk.prototype;HI.raise=function(c,k){var f=uz(this.input,c);k+=" ("+f.line+":"+f.column+")";k=new SyntaxError(k);k.pos=c;k.loc=f;k.raisedAt=this.pos;throw k;};HI.raiseRecoverable=
HI.raise;HI.curPosition=function(){if(this.options.locations)return new vz(this.curLine,this.pos-this.lineStart)};var Zs=Vk.prototype,Fma=function(c){this.flags=c;this.var=[];this.lexical=[];this.functions=[];this.inClassFieldInit=!1};Zs.enterScope=function(c){this.scopeStack.push(new Fma(c))};Zs.exitScope=function(){this.scopeStack.pop()};Zs.treatFunctionsAsVarInScope=function(c){return c.flags&2||!this.inModule&&c.flags&1};Zs.declareName=function(c,k,f){var l=!1;if(2===k)k=this.currentScope(),l=
-1<k.lexical.indexOf(c)||-1<k.functions.indexOf(c)||-1<k.var.indexOf(c),k.lexical.push(c),this.inModule&&k.flags&1&&delete this.undefinedExports[c];else if(4===k)this.currentScope().lexical.push(c);else if(3===k)k=this.currentScope(),l=this.treatFunctionsAsVar?-1<k.lexical.indexOf(c):-1<k.lexical.indexOf(c)||-1<k.var.indexOf(c),k.functions.push(c);else for(k=this.scopeStack.length-1;0<=k;--k){var p=this.scopeStack[k];if(-1<p.lexical.indexOf(c)&&!(p.flags&32&&p.lexical[0]===c)||!this.treatFunctionsAsVarInScope(p)&&
-1<p.functions.indexOf(c)){l=!0;break}p.var.push(c);this.inModule&&p.flags&1&&delete this.undefinedExports[c];if(p.flags&3)break}l&&this.raiseRecoverable(f,"Identifier '"+c+"' has already been declared")};Zs.checkLocalExport=function(c){-1===this.scopeStack[0].lexical.indexOf(c.name)&&-1===this.scopeStack[0].var.indexOf(c.name)&&(this.undefinedExports[c.name]=c)};Zs.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Zs.currentVarScope=function(){for(var c=this.scopeStack.length-
1;;c--){var k=this.scopeStack[c];if(k.flags&3)return k}};Zs.currentThisScope=function(){for(var c=this.scopeStack.length-1;;c--){var k=this.scopeStack[c];if(k.flags&3&&!(k.flags&16))return k}};var iv=function(c,k,f){this.type="";this.start=k;this.end=0;c.options.locations&&(this.loc=new Sw(c,f));c.options.directSourceFile&&(this.sourceFile=c.options.directSourceFile);c.options.ranges&&(this.range=[k,0])},HB=Vk.prototype;HB.startNode=function(){return new iv(this,this.start,this.startLoc)};HB.startNodeAt=
function(c,k){return new iv(this,c,k)};HB.finishNode=function(c,k){return uV.call(this,c,k,this.lastTokEnd,this.lastTokEndLoc)};HB.finishNodeAt=function(c,k,f,l){return uV.call(this,c,k,f,l)};HB.copyNode=function(c){var k=new iv(this,c.start,this.startLoc),f;for(f in c)k[f]=c[f];return k};var ip=function(c,k,f,l,p){this.token=c;this.isExpr=!!k;this.preserveSpace=!!f;this.override=l;this.generator=!!p},ck={b_stat:new ip("{",!1),b_expr:new ip("{",!0),b_tmpl:new ip("${",!1),p_stat:new ip("(",!1),p_expr:new ip("(",
!0),q_tmpl:new ip("`",!0,!0,function(c){return c.tryReadTemplateToken()}),f_stat:new ip("function",!1),f_expr:new ip("function",!0),f_expr_gen:new ip("function",!0,!1,null,!0),f_gen:new ip("function",!1,!1,null,!0)},II=Vk.prototype;II.initialContext=function(){return[ck.b_stat]};II.braceIsBlock=function(c){var k=this.curContext();return k===ck.f_expr||k===ck.f_stat?!0:c!==Ua.colon||k!==ck.b_stat&&k!==ck.b_expr?c===Ua._return||c===Ua.name&&this.exprAllowed?sn.test(this.input.slice(this.lastTokEnd,
this.start)):c===Ua._else||c===Ua.semi||c===Ua.eof||c===Ua.parenR||c===Ua.arrow?!0:c===Ua.braceL?k===ck.b_stat:c===Ua._var||c===Ua._const||c===Ua.name?!1:!this.exprAllowed:!k.isExpr};II.inGeneratorContext=function(){for(var c=this.context.length-1;1<=c;c--){var k=this.context[c];if("function"===k.token)return k.generator}return!1};II.updateContext=function(c){var k,f=this.type;f.keyword&&c===Ua.dot?this.exprAllowed=!1:(k=f.updateContext)?k.call(this,c):this.exprAllowed=f.beforeExpr};Ua.parenR.updateContext=
Ua.braceR.updateContext=function(){if(1===this.context.length)this.exprAllowed=!0;else{var c=this.context.pop();c===ck.b_stat&&"function"===this.curContext().token&&(c=this.context.pop());this.exprAllowed=!c.isExpr}};Ua.braceL.updateContext=function(c){this.context.push(this.braceIsBlock(c)?ck.b_stat:ck.b_expr);this.exprAllowed=!0};Ua.dollarBraceL.updateContext=function(){this.context.push(ck.b_tmpl);this.exprAllowed=!0};Ua.parenL.updateContext=function(c){this.context.push(c===Ua._if||c===Ua._for||
c===Ua._with||c===Ua._while?ck.p_stat:ck.p_expr);this.exprAllowed=!0};Ua.incDec.updateContext=function(){};Ua._function.updateContext=Ua._class.updateContext=function(c){!c.beforeExpr||c===Ua._else||c===Ua.semi&&this.curContext()!==ck.p_stat||c===Ua._return&&sn.test(this.input.slice(this.lastTokEnd,this.start))||(c===Ua.colon||c===Ua.braceL)&&this.curContext()===ck.b_stat?this.context.push(ck.f_stat):this.context.push(ck.f_expr);this.exprAllowed=!1};Ua.backQuote.updateContext=function(){this.curContext()===
ck.q_tmpl?this.context.pop():this.context.push(ck.q_tmpl);this.exprAllowed=!1};Ua.star.updateContext=function(c){c===Ua._function&&(c=this.context.length-1,this.context[c]=this.context[c]===ck.f_expr?ck.f_expr_gen:ck.f_gen);this.exprAllowed=!0};Ua.name.updateContext=function(c){var k=!1;6<=this.options.ecmaVersion&&c!==Ua.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(k=!0);this.exprAllowed=k};var Bda={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
Cda={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
vV={};nD(9);nD(10);nD(11);nD(12);var ng=Vk.prototype,Ar=function(c){this.parser=c;this.validFlags="gim"+(6<=c.options.ecmaVersion?"uy":"")+(9<=c.options.ecmaVersion?"s":"")+(13<=c.options.ecmaVersion?"d":"");this.unicodeProperties=vV[12<=c.options.ecmaVersion?12:c.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=
[];this.backReferenceNames=[]};Ar.prototype.reset=function(c,k,f){var l=-1!==f.indexOf("u");this.start=c|0;this.source=k+"";this.flags=f;this.switchU=l&&6<=this.parser.options.ecmaVersion;this.switchN=l&&9<=this.parser.options.ecmaVersion};Ar.prototype.raise=function(c){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+c)};Ar.prototype.at=function(c,k){void 0===k&&(k=!1);var f=this.source,l=f.length;if(c>=l)return-1;var p=f.charCodeAt(c);if(!k&&!this.switchU||
55295>=p||57344<=p||c+1>=l)return p;c=f.charCodeAt(c+1);return 56320<=c&&57343>=c?(p<<10)+c-56613888:p};Ar.prototype.nextIndex=function(c,k){void 0===k&&(k=!1);var f=this.source,l=f.length;if(c>=l)return l;var p=f.charCodeAt(c),b;return!k&&!this.switchU||55295>=p||57344<=p||c+1>=l||56320>(b=f.charCodeAt(c+1))||57343<b?c+1:c+2};Ar.prototype.current=function(c){void 0===c&&(c=!1);return this.at(this.pos,c)};Ar.prototype.lookahead=function(c){void 0===c&&(c=!1);return this.at(this.nextIndex(this.pos,
c),c)};Ar.prototype.advance=function(c){void 0===c&&(c=!1);this.pos=this.nextIndex(this.pos,c)};Ar.prototype.eat=function(c,k){void 0===k&&(k=!1);return this.current(k)===c?(this.advance(k),!0):!1};ng.validateRegExpFlags=function(c){for(var k=c.validFlags,f=c.flags,l=0;l<f.length;l++){var p=f.charAt(l);-1===k.indexOf(p)&&this.raise(c.start,"Invalid regular expression flag");-1<f.indexOf(p,l+1)&&this.raise(c.start,"Duplicate regular expression flag")}};ng.validateRegExpPattern=function(c){this.regexp_pattern(c);
!c.switchN&&9<=this.options.ecmaVersion&&0<c.groupNames.length&&(c.switchN=!0,this.regexp_pattern(c))};ng.regexp_pattern=function(c){c.pos=0;c.lastIntValue=0;c.lastStringValue="";c.lastAssertionIsQuantifiable=!1;c.numCapturingParens=0;c.maxBackReference=0;c.groupNames.length=0;c.backReferenceNames.length=0;this.regexp_disjunction(c);c.pos!==c.source.length&&(c.eat(41)&&c.raise("Unmatched ')'"),(c.eat(93)||c.eat(125))&&c.raise("Lone quantifier brackets"));c.maxBackReference>c.numCapturingParens&&c.raise("Invalid escape");
for(var k=0,f=c.backReferenceNames;k<f.length;k+=1)-1===c.groupNames.indexOf(f[k])&&c.raise("Invalid named capture referenced")};ng.regexp_disjunction=function(c){for(this.regexp_alternative(c);c.eat(124);)this.regexp_alternative(c);this.regexp_eatQuantifier(c,!0)&&c.raise("Nothing to repeat");c.eat(123)&&c.raise("Lone quantifier brackets")};ng.regexp_alternative=function(c){for(;c.pos<c.source.length&&this.regexp_eatTerm(c););};ng.regexp_eatTerm=function(c){return this.regexp_eatAssertion(c)?(c.lastAssertionIsQuantifiable&&
this.regexp_eatQuantifier(c)&&c.switchU&&c.raise("Invalid quantifier"),!0):(c.switchU?this.regexp_eatAtom(c):this.regexp_eatExtendedAtom(c))?(this.regexp_eatQuantifier(c),!0):!1};ng.regexp_eatAssertion=function(c){var k=c.pos;c.lastAssertionIsQuantifiable=!1;if(c.eat(94)||c.eat(36))return!0;if(c.eat(92)){if(c.eat(66)||c.eat(98))return!0;c.pos=k}if(c.eat(40)&&c.eat(63)){var f=!1;9<=this.options.ecmaVersion&&(f=c.eat(60));if(c.eat(61)||c.eat(33))return this.regexp_disjunction(c),c.eat(41)||c.raise("Unterminated group"),
c.lastAssertionIsQuantifiable=!f,!0}c.pos=k;return!1};ng.regexp_eatQuantifier=function(c,k){void 0===k&&(k=!1);return this.regexp_eatQuantifierPrefix(c,k)?(c.eat(63),!0):!1};ng.regexp_eatQuantifierPrefix=function(c,k){return c.eat(42)||c.eat(43)||c.eat(63)||this.regexp_eatBracedQuantifier(c,k)};ng.regexp_eatBracedQuantifier=function(c,k){var f=c.pos;if(c.eat(123)){var l=-1;if(this.regexp_eatDecimalDigits(c)){var p=c.lastIntValue;c.eat(44)&&this.regexp_eatDecimalDigits(c)&&(l=c.lastIntValue);if(c.eat(125))return-1!==
l&&l<p&&!k&&c.raise("numbers out of order in {} quantifier"),!0}c.switchU&&!k&&c.raise("Incomplete quantifier");c.pos=f}return!1};ng.regexp_eatAtom=function(c){return this.regexp_eatPatternCharacters(c)||c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)};ng.regexp_eatReverseSolidusAtomEscape=function(c){var k=c.pos;if(c.eat(92)){if(this.regexp_eatAtomEscape(c))return!0;c.pos=k}return!1};ng.regexp_eatUncapturingGroup=
function(c){var k=c.pos;if(c.eat(40)){if(c.eat(63)&&c.eat(58)){this.regexp_disjunction(c);if(c.eat(41))return!0;c.raise("Unterminated group")}c.pos=k}return!1};ng.regexp_eatCapturingGroup=function(c){if(c.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(c):63===c.current()&&c.raise("Invalid group");this.regexp_disjunction(c);if(c.eat(41))return c.numCapturingParens+=1,!0;c.raise("Unterminated group")}return!1};ng.regexp_eatExtendedAtom=function(c){return c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||
this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)||this.regexp_eatInvalidBracedQuantifier(c)||this.regexp_eatExtendedPatternCharacter(c)};ng.regexp_eatInvalidBracedQuantifier=function(c){this.regexp_eatBracedQuantifier(c,!0)&&c.raise("Nothing to repeat");return!1};ng.regexp_eatSyntaxCharacter=function(c){var k=c.current();return wV(k)?(c.lastIntValue=k,c.advance(),!0):!1};ng.regexp_eatPatternCharacters=function(c){for(var k=c.pos,f=0;-1!==(f=c.current())&&
!wV(f);)c.advance();return c.pos!==k};ng.regexp_eatExtendedPatternCharacter=function(c){var k=c.current();return-1===k||36===k||40<=k&&43>=k||46===k||63===k||91===k||94===k||124===k?!1:(c.advance(),!0)};ng.regexp_groupSpecifier=function(c){c.eat(63)&&(this.regexp_eatGroupName(c)?(-1!==c.groupNames.indexOf(c.lastStringValue)&&c.raise("Duplicate capture group name"),c.groupNames.push(c.lastStringValue)):c.raise("Invalid group"))};ng.regexp_eatGroupName=function(c){c.lastStringValue="";if(c.eat(60)){if(this.regexp_eatRegExpIdentifierName(c)&&
c.eat(62))return!0;c.raise("Invalid capture group name")}return!1};ng.regexp_eatRegExpIdentifierName=function(c){c.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(c)){for(c.lastStringValue+=oD(c.lastIntValue);this.regexp_eatRegExpIdentifierPart(c);)c.lastStringValue+=oD(c.lastIntValue);return!0}return!1};ng.regexp_eatRegExpIdentifierStart=function(c){var k=c.pos,f=11<=this.options.ecmaVersion,l=c.current(f);c.advance(f);92===l&&this.regexp_eatRegExpUnicodeEscapeSequence(c,f)&&(l=c.lastIntValue);
f=l;if(Pq(f,!0)||36===f||95===f)return c.lastIntValue=l,!0;c.pos=k;return!1};ng.regexp_eatRegExpIdentifierPart=function(c){var k=c.pos,f=11<=this.options.ecmaVersion,l=c.current(f);c.advance(f);92===l&&this.regexp_eatRegExpUnicodeEscapeSequence(c,f)&&(l=c.lastIntValue);f=l;if(Rw(f,!0)||36===f||95===f||8204===f||8205===f)return c.lastIntValue=l,!0;c.pos=k;return!1};ng.regexp_eatAtomEscape=function(c){if(this.regexp_eatBackReference(c)||this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)||
c.switchN&&this.regexp_eatKGroupName(c))return!0;c.switchU&&(99===c.current()&&c.raise("Invalid unicode escape"),c.raise("Invalid escape"));return!1};ng.regexp_eatBackReference=function(c){var k=c.pos;if(this.regexp_eatDecimalEscape(c)){var f=c.lastIntValue;if(c.switchU)return f>c.maxBackReference&&(c.maxBackReference=f),!0;if(f<=c.numCapturingParens)return!0;c.pos=k}return!1};ng.regexp_eatKGroupName=function(c){if(c.eat(107)){if(this.regexp_eatGroupName(c))return c.backReferenceNames.push(c.lastStringValue),
!0;c.raise("Invalid named reference")}return!1};ng.regexp_eatCharacterEscape=function(c){return this.regexp_eatControlEscape(c)||this.regexp_eatCControlLetter(c)||this.regexp_eatZero(c)||this.regexp_eatHexEscapeSequence(c)||this.regexp_eatRegExpUnicodeEscapeSequence(c,!1)||!c.switchU&&this.regexp_eatLegacyOctalEscapeSequence(c)||this.regexp_eatIdentityEscape(c)};ng.regexp_eatCControlLetter=function(c){var k=c.pos;if(c.eat(99)){if(this.regexp_eatControlLetter(c))return!0;c.pos=k}return!1};ng.regexp_eatZero=
function(c){return 48!==c.current()||pD(c.lookahead())?!1:(c.lastIntValue=0,c.advance(),!0)};ng.regexp_eatControlEscape=function(c){var k=c.current();return 116===k?(c.lastIntValue=9,c.advance(),!0):110===k?(c.lastIntValue=10,c.advance(),!0):118===k?(c.lastIntValue=11,c.advance(),!0):102===k?(c.lastIntValue=12,c.advance(),!0):114===k?(c.lastIntValue=13,c.advance(),!0):!1};ng.regexp_eatControlLetter=function(c){var k=c.current();return 65<=k&&90>=k||97<=k&&122>=k?(c.lastIntValue=k%32,c.advance(),!0):
!1};ng.regexp_eatRegExpUnicodeEscapeSequence=function(c,k){void 0===k&&(k=!1);var f=c.pos;k=k||c.switchU;if(c.eat(117)){if(this.regexp_eatFixedHexDigits(c,4)){f=c.lastIntValue;if(k&&55296<=f&&56319>=f){k=c.pos;if(c.eat(92)&&c.eat(117)&&this.regexp_eatFixedHexDigits(c,4)){var l=c.lastIntValue;if(56320<=l&&57343>=l)return c.lastIntValue=1024*(f-55296)+(l-56320)+65536,!0}c.pos=k;c.lastIntValue=f}return!0}if(l=k&&c.eat(123)&&this.regexp_eatHexDigits(c)&&c.eat(125))l=c.lastIntValue,l=0<=l&&1114111>=l;
if(l)return!0;k&&c.raise("Invalid unicode escape");c.pos=f}return!1};ng.regexp_eatIdentityEscape=function(c){if(c.switchU)return this.regexp_eatSyntaxCharacter(c)?!0:c.eat(47)?(c.lastIntValue=47,!0):!1;var k=c.current();return 99===k||c.switchN&&107===k?!1:(c.lastIntValue=k,c.advance(),!0)};ng.regexp_eatDecimalEscape=function(c){c.lastIntValue=0;var k=c.current();if(49<=k&&57>=k){do c.lastIntValue=10*c.lastIntValue+(k-48),c.advance();while(48<=(k=c.current())&&57>=k);return!0}return!1};ng.regexp_eatCharacterClassEscape=
function(c){var k=c.current();if(100===k||68===k||115===k||83===k||119===k||87===k)return c.lastIntValue=-1,c.advance(),!0;if(c.switchU&&9<=this.options.ecmaVersion&&(80===k||112===k)){c.lastIntValue=-1;c.advance();if(c.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(c)&&c.eat(125))return!0;c.raise("Invalid property name")}return!1};ng.regexp_eatUnicodePropertyValueExpression=function(c){var k=c.pos;if(this.regexp_eatUnicodePropertyName(c)&&c.eat(61)){var f=c.lastStringValue;if(this.regexp_eatUnicodePropertyValue(c))return this.regexp_validateUnicodePropertyNameAndValue(c,
f,c.lastStringValue),!0}c.pos=k;return this.regexp_eatLoneUnicodePropertyNameOrValue(c)?(this.regexp_validateUnicodePropertyNameOrValue(c,c.lastStringValue),!0):!1};ng.regexp_validateUnicodePropertyNameAndValue=function(c,k,f){wz.call(c.unicodeProperties.nonBinary,k)||c.raise("Invalid property name");c.unicodeProperties.nonBinary[k].test(f)||c.raise("Invalid property value")};ng.regexp_validateUnicodePropertyNameOrValue=function(c,k){c.unicodeProperties.binary.test(k)||c.raise("Invalid property name")};
ng.regexp_eatUnicodePropertyName=function(c){var k;for(c.lastStringValue="";xV(k=c.current());)c.lastStringValue+=oD(k),c.advance();return""!==c.lastStringValue};ng.regexp_eatUnicodePropertyValue=function(c){var k;for(c.lastStringValue="";Dda(k=c.current());)c.lastStringValue+=oD(k),c.advance();return""!==c.lastStringValue};ng.regexp_eatLoneUnicodePropertyNameOrValue=function(c){return this.regexp_eatUnicodePropertyValue(c)};ng.regexp_eatCharacterClass=function(c){if(c.eat(91)){c.eat(94);this.regexp_classRanges(c);
if(c.eat(93))return!0;c.raise("Unterminated character class")}return!1};ng.regexp_classRanges=function(c){for(;this.regexp_eatClassAtom(c);){var k=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassAtom(c)){var f=c.lastIntValue;!c.switchU||-1!==k&&-1!==f||c.raise("Invalid character class");-1!==k&&-1!==f&&k>f&&c.raise("Range out of order in character class")}}};ng.regexp_eatClassAtom=function(c){var k=c.pos;if(c.eat(92)){if(this.regexp_eatClassEscape(c))return!0;if(c.switchU){var f=c.current();(99===
f||48<=f&&55>=f)&&c.raise("Invalid class escape");c.raise("Invalid escape")}c.pos=k}k=c.current();return 93!==k?(c.lastIntValue=k,c.advance(),!0):!1};ng.regexp_eatClassEscape=function(c){var k=c.pos;if(c.eat(98))return c.lastIntValue=8,!0;if(c.switchU&&c.eat(45))return c.lastIntValue=45,!0;if(!c.switchU&&c.eat(99)){if(this.regexp_eatClassControlLetter(c))return!0;c.pos=k}return this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)};ng.regexp_eatClassControlLetter=function(c){var k=
c.current();return pD(k)||95===k?(c.lastIntValue=k%32,c.advance(),!0):!1};ng.regexp_eatHexEscapeSequence=function(c){var k=c.pos;if(c.eat(120)){if(this.regexp_eatFixedHexDigits(c,2))return!0;c.switchU&&c.raise("Invalid escape");c.pos=k}return!1};ng.regexp_eatDecimalDigits=function(c){var k=c.pos,f;for(c.lastIntValue=0;pD(f=c.current());)c.lastIntValue=10*c.lastIntValue+(f-48),c.advance();return c.pos!==k};ng.regexp_eatHexDigits=function(c){var k=c.pos,f;for(c.lastIntValue=0;yV(f=c.current());)c.lastIntValue=
16*c.lastIntValue+zV(f),c.advance();return c.pos!==k};ng.regexp_eatLegacyOctalEscapeSequence=function(c){if(this.regexp_eatOctalDigit(c)){var k=c.lastIntValue;if(this.regexp_eatOctalDigit(c)){var f=c.lastIntValue;3>=k&&this.regexp_eatOctalDigit(c)?c.lastIntValue=64*k+8*f+c.lastIntValue:c.lastIntValue=8*k+f}else c.lastIntValue=k;return!0}return!1};ng.regexp_eatOctalDigit=function(c){var k=c.current();if(48<=k&&55>=k)return c.lastIntValue=k-48,c.advance(),!0;c.lastIntValue=0;return!1};ng.regexp_eatFixedHexDigits=
function(c,k){for(var f=c.pos,l=c.lastIntValue=0;l<k;++l){var p=c.current();if(!yV(p))return c.pos=f,!1;c.lastIntValue=16*c.lastIntValue+zV(p);c.advance()}return!0};var JI=function(c){this.type=c.type;this.value=c.value;this.start=c.start;this.end=c.end;c.options.locations&&(this.loc=new Sw(c,c.startLoc,c.endLoc));c.options.ranges&&(this.range=[c.start,c.end])},Th=Vk.prototype;Th.next=function(c){!c&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+
this.type.keyword);if(this.options.onToken)this.options.onToken(new JI(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};Th.getToken=function(){this.next();return new JI(this)};"undefined"!==typeof Symbol&&(Th[Symbol.iterator]=function(){var c=this;return{next:function(){var k=c.getToken();return{done:k.type===Ua.eof,value:k}}}});Th.curContext=function(){return this.context[this.context.length-1]};Th.nextToken=
function(){var c=this.curContext();c&&c.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(Ua.eof);if(c.override)return c.override(this);this.readToken(this.fullCharCodeAtPos())};Th.readToken=function(c){return Pq(c,6<=this.options.ecmaVersion)||92===c?this.readWord():this.getTokenFromCode(c)};Th.fullCharCodeAtPos=function(){var c=this.input.charCodeAt(this.pos);if(55295>=c||56320<=c)return c;
var k=this.input.charCodeAt(this.pos+1);return 56319>=k||57344<=k?c:(c<<10)+k-56613888};Th.skipBlockComment=function(){var c=this.options.onComment&&this.curPosition(),k=this.pos,f=this.input.indexOf("*/",this.pos+=2);-1===f&&this.raise(this.pos-2,"Unterminated comment");this.pos=f+2;if(this.options.locations){gu.lastIndex=k;for(var l;(l=gu.exec(this.input))&&l.index<this.pos;)++this.curLine,this.lineStart=l.index+l[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(k+
2,f),k,this.pos,c,this.curPosition())};Th.skipLineComment=function(c){for(var k=this.pos,f=this.options.onComment&&this.curPosition(),l=this.input.charCodeAt(this.pos+=c);this.pos<this.input.length&&!is(l);)l=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(k+c,this.pos),k,this.pos,f,this.curPosition())};Th.skipSpace=function(){a:for(;this.pos<this.input.length;){var c=this.input.charCodeAt(this.pos);switch(c){case 32:case 160:++this.pos;break;
case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<c&&14>c||5760<=c&&w8.test(String.fromCharCode(c)))++this.pos;else break a}}};Th.finishToken=function(c,k){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());
var f=this.type;this.type=c;this.value=k;this.updateContext(f)};Th.readToken_dot=function(){var c=this.input.charCodeAt(this.pos+1);if(48<=c&&57>=c)return this.readNumber(!0);var k=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===c&&46===k)return this.pos+=3,this.finishToken(Ua.ellipsis);++this.pos;return this.finishToken(Ua.dot)};Th.readToken_slash=function(){var c=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===c?this.finishOp(Ua.assign,
2):this.finishOp(Ua.slash,1)};Th.readToken_mult_modulo_exp=function(c){var k=this.input.charCodeAt(this.pos+1),f=1,l=42===c?Ua.star:Ua.modulo;7<=this.options.ecmaVersion&&42===c&&42===k&&(++f,l=Ua.starstar,k=this.input.charCodeAt(this.pos+2));return 61===k?this.finishOp(Ua.assign,f+1):this.finishOp(l,f)};Th.readToken_pipe_amp=function(c){var k=this.input.charCodeAt(this.pos+1);return k===c?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Ua.assign,3):this.finishOp(124===
c?Ua.logicalOR:Ua.logicalAND,2):61===k?this.finishOp(Ua.assign,2):this.finishOp(124===c?Ua.bitwiseOR:Ua.bitwiseAND,1)};Th.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Ua.assign,2):this.finishOp(Ua.bitwiseXOR,1)};Th.readToken_plus_min=function(c){var k=this.input.charCodeAt(this.pos+1);return k===c?45!==k||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!sn.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Ua.incDec,
2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===k?this.finishOp(Ua.assign,2):this.finishOp(Ua.plusMin,1)};Th.readToken_lt_gt=function(c){var k=this.input.charCodeAt(this.pos+1),f=1;if(k===c)return f=62===c&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+f)?this.finishOp(Ua.assign,f+1):this.finishOp(Ua.bitShift,f);if(33===k&&60===c&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),
this.skipSpace(),this.nextToken();61===k&&(f=2);return this.finishOp(Ua.relational,f)};Th.readToken_eq_excl=function(c){var k=this.input.charCodeAt(this.pos+1);return 61===k?this.finishOp(Ua.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===c&&62===k&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(Ua.arrow)):this.finishOp(61===c?Ua.eq:Ua.prefix,1)};Th.readToken_question=function(){var c=this.options.ecmaVersion;if(11<=c){var k=this.input.charCodeAt(this.pos+1);if(46===k){var f=
this.input.charCodeAt(this.pos+2);if(48>f||57<f)return this.finishOp(Ua.questionDot,2)}if(63===k)return 12<=c&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Ua.assign,3):this.finishOp(Ua.coalesce,2)}return this.finishOp(Ua.question,1)};Th.readToken_numberSign=function(){var c=35;if(13<=this.options.ecmaVersion&&(++this.pos,c=this.fullCharCodeAtPos(),Pq(c,!0)||92===c))return this.finishToken(Ua.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+qD(c)+"'")};Th.getTokenFromCode=
function(c){switch(c){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Ua.parenL);case 41:return++this.pos,this.finishToken(Ua.parenR);case 59:return++this.pos,this.finishToken(Ua.semi);case 44:return++this.pos,this.finishToken(Ua.comma);case 91:return++this.pos,this.finishToken(Ua.bracketL);case 93:return++this.pos,this.finishToken(Ua.bracketR);case 123:return++this.pos,this.finishToken(Ua.braceL);case 125:return++this.pos,this.finishToken(Ua.braceR);case 58:return++this.pos,
this.finishToken(Ua.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken(Ua.backQuote);case 48:c=this.input.charCodeAt(this.pos+1);if(120===c||88===c)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===c||79===c)return this.readRadixNumber(8);if(98===c||66===c)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(c);case 47:return this.readToken_slash();
case 37:case 42:return this.readToken_mult_modulo_exp(c);case 124:case 38:return this.readToken_pipe_amp(c);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(c);case 60:case 62:return this.readToken_lt_gt(c);case 61:case 33:return this.readToken_eq_excl(c);case 63:return this.readToken_question();case 126:return this.finishOp(Ua.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+qD(c)+"'")};Th.finishOp=function(c,k){var f=
this.input.slice(this.pos,this.pos+k);this.pos+=k;return this.finishToken(c,f)};Th.readRegexp=function(){for(var c,k,f=this.pos;;){this.pos>=this.input.length&&this.raise(f,"Unterminated regular expression");var l=this.input.charAt(this.pos);sn.test(l)&&this.raise(f,"Unterminated regular expression");if(c)c=!1;else{if("["===l)k=!0;else if("]"===l&&k)k=!1;else if("/"===l&&!k)break;c="\\"===l}++this.pos}c=this.input.slice(f,this.pos);++this.pos;l=this.pos;k=this.readWord1();this.containsEsc&&this.unexpected(l);
l=this.regexpState||(this.regexpState=new Ar(this));l.reset(f,c,k);this.validateRegExpFlags(l);this.validateRegExpPattern(l);f=null;try{f=new RegExp(c,k)}catch(p){}return this.finishToken(Ua.regexp,{pattern:c,flags:k,value:f})};Th.readInt=function(c,k,f){var l=12<=this.options.ecmaVersion&&void 0===k;f=f&&48===this.input.charCodeAt(this.pos);for(var p=this.pos,b=0,d=0,h=0,a=null==k?Infinity:k;h<a;++h,++this.pos){var e=this.input.charCodeAt(this.pos);if(l&&95===e)f&&this.raiseRecoverable(this.pos,
"Numeric separator is not allowed in legacy octal numeric literals"),95===d&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===h&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),d=e;else{var n=97<=e?e-97+10:65<=e?e-65+10:48<=e&&57>=e?e-48:Infinity;if(n>=c)break;d=e;b=b*c+n}}l&&95===d&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===p||null!=k&&this.pos-p!==k?
null:b};Th.readRadixNumber=function(c){var k=this.pos;this.pos+=2;var f=this.readInt(c);null==f&&this.raise(this.start+2,"Expected number in radix "+c);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(f=AV(this.input.slice(k,this.pos)),++this.pos):Pq(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");return this.finishToken(Ua.num,f)};Th.readNumber=function(c){var k=this.pos;c||null!==this.readInt(10,void 0,!0)||this.raise(k,"Invalid number");var f=
2<=this.pos-k&&48===this.input.charCodeAt(k);f&&this.strict&&this.raise(k,"Invalid number");var l=this.input.charCodeAt(this.pos);if(!f&&!c&&11<=this.options.ecmaVersion&&110===l)return f=AV(this.input.slice(k,this.pos)),++this.pos,Pq(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Ua.num,f);f&&/[89]/.test(this.input.slice(k,this.pos))&&(f=!1);46!==l||f||(++this.pos,this.readInt(10),l=this.input.charCodeAt(this.pos));69!==l&&101!==l||f||(l=this.input.charCodeAt(++this.pos),
43!==l&&45!==l||++this.pos,null===this.readInt(10)&&this.raise(k,"Invalid number"));Pq(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");c=this.input.slice(k,this.pos);f=f?parseInt(c,8):parseFloat(c.replace(/_/g,""));return this.finishToken(Ua.num,f)};Th.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>this.options.ecmaVersion&&this.unexpected();var c=++this.pos;var k=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<
k&&this.invalidStringToken(c,"Code point out of bounds")}else k=this.readHexChar(4);return k};Th.readString=function(c){for(var k="",f=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var l=this.input.charCodeAt(this.pos);if(l===c)break;92===l?(k+=this.input.slice(f,this.pos),k+=this.readEscapedChar(!1),f=this.pos):(is(l,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}k+=this.input.slice(f,this.pos++);
return this.finishToken(Ua.string,k)};var y8={};Th.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(c){if(c===y8)this.readInvalidTemplateToken();else throw c;}this.inTemplateElement=!1};Th.invalidStringToken=function(c,k){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw y8;this.raise(c,k)};Th.readTmplToken=function(){for(var c="",k=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var f=this.input.charCodeAt(this.pos);
if(96===f||36===f&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&(this.type===Ua.template||this.type===Ua.invalidTemplate)){if(36===f)return this.pos+=2,this.finishToken(Ua.dollarBraceL);++this.pos;return this.finishToken(Ua.backQuote)}c+=this.input.slice(k,this.pos);return this.finishToken(Ua.template,c)}if(92===f)c+=this.input.slice(k,this.pos),c+=this.readEscapedChar(!0),k=this.pos;else if(is(f)){c+=this.input.slice(k,this.pos);++this.pos;switch(f){case 13:10===this.input.charCodeAt(this.pos)&&
++this.pos;case 10:c+="\n";break;default:c+=String.fromCharCode(f)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);k=this.pos}else++this.pos}};Th.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;case "`":return this.finishToken(Ua.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Th.readEscapedChar=
function(c){var k=this.input.charCodeAt(++this.pos);++this.pos;switch(k){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return qD(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),
c)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(48<=k&&55>=k){var f=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],l=parseInt(f,8);255<l&&(f=f.slice(0,-1),l=parseInt(f,8));this.pos+=f.length-1;k=this.input.charCodeAt(this.pos);"0"===f&&56!==k&&57!==k||!this.strict&&!c||this.invalidStringToken(this.pos-1-f.length,c?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(l)}return is(k)?"":String.fromCharCode(k)}};
Th.readHexChar=function(c){var k=this.pos;c=this.readInt(16,c);null===c&&this.invalidStringToken(k,"Bad character escape sequence");return c};Th.readWord1=function(){this.containsEsc=!1;for(var c="",k=!0,f=this.pos,l=6<=this.options.ecmaVersion;this.pos<this.input.length;){var p=this.fullCharCodeAtPos();if(Rw(p,l))this.pos+=65535>=p?1:2;else if(92===p)this.containsEsc=!0,c+=this.input.slice(f,this.pos),f=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),
++this.pos,p=this.readCodePoint(),(k?Pq:Rw)(p,l)||this.invalidStringToken(f,"Invalid Unicode escape"),c+=qD(p),f=this.pos;else break;k=!1}return c+this.input.slice(f,this.pos)};Th.readWord=function(){var c=this.readWord1(),k=Ua.name;this.keywords.test(c)&&(k=FL[c]);return this.finishToken(k,c)};Vk.acorn={Parser:Vk,version:"8.4.1",defaultOptions:kD,Position:vz,SourceLocation:Sw,getLineInfo:uz,Node:iv,TokenType:wi,tokTypes:Ua,keywordTypes:FL,TokContext:ip,tokContexts:ck,isIdentifierChar:Rw,isIdentifierStart:Pq,
Token:JI,isNewLine:is,lineBreak:sn,lineBreakG:gu,nonASCIIwhitespace:w8};var cj=function(c,k){void 0===k&&(k={});this.toks=this.constructor.BaseParser.tokenizer(c,k);this.options=this.toks.options;this.input=this.toks.input;this.tok=this.last={type:Ua.eof,start:0,end:0};this.tok.validateRegExpFlags=BV;this.tok.validateRegExpPattern=BV;this.options.locations&&(c=this.toks.curPosition(),this.tok.loc=new Sw(this.toks,c,c));this.ahead=[];this.context=[];this.curLineStart=this.curIndent=0;this.nextLineStart=
this.lineEnd(this.curLineStart)+1;this.inFunction=this.inGenerator=this.inAsync=!1};cj.prototype.startNode=function(){return new iv(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)};cj.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:this.tok.start};cj.prototype.startNodeAt=function(c){return this.options.locations?new iv(this.toks,c[0],c[1]):new iv(this.toks,c)};cj.prototype.finishNode=function(c,k){c.type=k;c.end=this.last.end;
this.options.locations&&(c.loc.end=this.last.loc.end);this.options.ranges&&(c.range[1]=this.last.end);return c};cj.prototype.dummyNode=function(c){var k=this.startNode();k.type=c;k.end=k.start;this.options.locations&&(k.loc.end=k.loc.start);this.options.ranges&&(k.range[1]=k.start);this.last={type:Ua.name,start:k.start,end:k.start,loc:k.loc};return k};cj.prototype.dummyIdent=function(){var c=this.dummyNode("Identifier");c.name="\u2716";return c};cj.prototype.dummyString=function(){var c=this.dummyNode("Literal");
c.value=c.raw="\u2716";return c};cj.prototype.eat=function(c){return this.tok.type===c?(this.next(),!0):!1};cj.prototype.isContextual=function(c){return this.tok.type===Ua.name&&this.tok.value===c};cj.prototype.eatContextual=function(c){return this.tok.value===c&&this.eat(Ua.name)};cj.prototype.canInsertSemicolon=function(){return this.tok.type===Ua.eof||this.tok.type===Ua.braceR||sn.test(this.input.slice(this.last.end,this.tok.start))};cj.prototype.semicolon=function(){return this.eat(Ua.semi)};
cj.prototype.expect=function(c){if(this.eat(c))return!0;for(var k=1;2>=k;k++)if(this.lookAhead(k).type===c){for(c=0;c<k;c++)this.next();return!0}};cj.prototype.pushCx=function(){this.context.push(this.curIndent)};cj.prototype.popCx=function(){this.curIndent=this.context.pop()};cj.prototype.lineEnd=function(c){for(;c<this.input.length&&!is(this.input.charCodeAt(c));)++c;return c};cj.prototype.indentationAfter=function(c){for(var k=0;;++c){var f=this.input.charCodeAt(c);if(32===f)++k;else if(9===f)k+=
this.options.tabSize;else return k}};cj.prototype.closes=function(c,k,f,l){return this.tok.type===c||this.tok.type===Ua.eof?!0:f!==this.curLineStart&&this.curIndent<k&&this.tokenStartsLine()&&(!l||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<k)};cj.prototype.tokenStartsLine=function(){for(var c=this.tok.start-1;c>=this.curLineStart;--c){var k=this.input.charCodeAt(c);if(9!==k&&32!==k)return!1}return!0};cj.prototype.extend=function(c,k){this[c]=k(this[c])};cj.prototype.parse=
function(){this.next();return this.parseTopLevel()};cj.extend=function(){for(var c=[],k=arguments.length;k--;)c[k]=arguments[k];k=this;for(var f=0;f<c.length;f++)k=c[f](k);return k};cj.parse=function(c,k){return(new this(c,k)).parse()};cj.BaseParser=Vk;var KI=cj.prototype;KI.next=function(){this.last=this.tok;this.tok=this.ahead.length?this.ahead.shift():this.readToken();if(this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=
this.lineEnd(this.curLineStart)+1;this.curIndent=this.indentationAfter(this.curLineStart)}};KI.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===Ua.dot&&"."===this.input.substr(this.toks.end,1)&&6<=this.options.ecmaVersion&&(this.toks.end++,this.toks.type=Ua.ellipsis),new JI(this.toks)}catch(l){if(!(l instanceof SyntaxError))throw l;var c=l.message,k=l.raisedAt,f=!0;if(/unterminated/i.test(c))if(k=this.lineEnd(l.pos+1),/string/.test(c))f={start:l.pos,end:k,type:Ua.string,value:this.input.slice(l.pos+
1,k)};else if(/regular expr/i.test(c)){f=this.input.slice(l.pos,k);try{f=new RegExp(f)}catch(p){}f={start:l.pos,end:k,type:Ua.regexp,value:f}}else f=/template/.test(c)?{start:l.pos,end:k,type:Ua.template,value:this.input.slice(l.pos,k)}:!1;else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(c))for(;k<this.input.length&&!Eda(this.input.charCodeAt(k));)++k;else if(/character escape|expected hexadecimal/i.test(c))for(;k<
this.input.length&&(c=this.input.charCodeAt(k++),34!==c&&39!==c&&!is(c)););else if(/unexpected character/i.test(c))k++,f=!1;else if(/regular expression/i.test(c))f=!0;else throw l;this.resetTo(k);!0===f&&(f={start:k,end:k,type:Ua.name,value:"\u2716"});if(f)return this.options.locations&&(f.loc=new Sw(this.toks,uz(this.input,f.start),uz(this.input,f.end))),f}};KI.resetTo=function(c){this.toks.pos=c;var k=this.input.charAt(c-1);this.toks.exprAllowed=!k||/[[{(,;:?/*=+\-~!|&%^<>]/.test(k)||/[enwfd]/.test(k)&&
/\b(case|else|return|throw|new|in|(instance|type)?of|delete|void)$/.test(this.input.slice(c-10,c));if(this.options.locations){this.toks.curLine=1;this.toks.lineStart=gu.lastIndex=0;for(var f;(f=gu.exec(this.input))&&f.index<c;)++this.toks.curLine,this.toks.lineStart=f.index+f[0].length}};KI.lookAhead=function(c){for(;c>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[c-1]};var om=cj.prototype;om.parseTopLevel=function(){var c=this.startNodeAt(this.options.locations?[0,uz(this.input,
0)]:0);for(c.body=[];this.tok.type!==Ua.eof;)c.body.push(this.parseStatement());this.toks.adaptDirectivePrologue(c.body);this.last=this.tok;c.sourceType=this.options.sourceType;return this.finishNode(c,"Program")};om.parseStatement=function(){var c=this.tok.type,k=this.startNode();if(this.toks.isLet()){c=Ua._var;var f="let"}switch(c){case Ua._break:case Ua._continue:this.next();var l=c===Ua._break;this.semicolon()||this.canInsertSemicolon()?k.label=null:(k.label=this.tok.type===Ua.name?this.parseIdent():
null,this.semicolon());return this.finishNode(k,l?"BreakStatement":"ContinueStatement");case Ua._debugger:return this.next(),this.semicolon(),this.finishNode(k,"DebuggerStatement");case Ua._do:return this.next(),k.body=this.parseStatement(),k.test=this.eat(Ua._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(k,"DoWhileStatement");case Ua._for:this.next();l=9<=this.options.ecmaVersion&&this.eatContextual("await");this.pushCx();this.expect(Ua.parenL);if(this.tok.type===
Ua.semi)return this.parseFor(k,null);if((c=this.toks.isLet())||this.tok.type===Ua._var||this.tok.type===Ua._const)return c=this.parseVar(this.startNode(),!0,c?"let":this.tok.value),1!==c.declarations.length||this.tok.type!==Ua._in&&!this.isContextual("of")?this.parseFor(k,c):(9<=this.options.ecmaVersion&&this.tok.type!==Ua._in&&(k.await=l),this.parseForIn(k,c));c=this.parseExpression(!0);return this.tok.type===Ua._in||this.isContextual("of")?(9<=this.options.ecmaVersion&&this.tok.type!==Ua._in&&(k.await=
l),this.parseForIn(k,this.toAssignable(c))):this.parseFor(k,c);case Ua._function:return this.next(),this.parseFunction(k,!0);case Ua._if:return this.next(),k.test=this.parseParenExpression(),k.consequent=this.parseStatement(),k.alternate=this.eat(Ua._else)?this.parseStatement():null,this.finishNode(k,"IfStatement");case Ua._return:return this.next(),this.eat(Ua.semi)||this.canInsertSemicolon()?k.argument=null:(k.argument=this.parseExpression(),this.semicolon()),this.finishNode(k,"ReturnStatement");
case Ua._switch:c=this.curIndent;f=this.curLineStart;this.next();k.discriminant=this.parseParenExpression();k.cases=[];this.pushCx();for(this.expect(Ua.braceL);!this.closes(Ua.braceR,c,f,!0);)if(this.tok.type===Ua._case||this.tok.type===Ua._default){var p=this.tok.type===Ua._case;l&&this.finishNode(l,"SwitchCase");k.cases.push(l=this.startNode());l.consequent=[];this.next();l.test=p?this.parseExpression():null;this.expect(Ua.colon)}else l||(k.cases.push(l=this.startNode()),l.consequent=[],l.test=
null),l.consequent.push(this.parseStatement());l&&this.finishNode(l,"SwitchCase");this.popCx();this.eat(Ua.braceR);return this.finishNode(k,"SwitchStatement");case Ua._throw:return this.next(),k.argument=this.parseExpression(),this.semicolon(),this.finishNode(k,"ThrowStatement");case Ua._try:return this.next(),k.block=this.parseBlock(),k.handler=null,this.tok.type===Ua._catch&&(l=this.startNode(),this.next(),this.eat(Ua.parenL)?(l.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(Ua.parenR)):
l.param=null,l.body=this.parseBlock(),k.handler=this.finishNode(l,"CatchClause")),k.finalizer=this.eat(Ua._finally)?this.parseBlock():null,k.handler||k.finalizer?this.finishNode(k,"TryStatement"):k.block;case Ua._var:case Ua._const:return this.parseVar(k,!1,f||this.tok.value);case Ua._while:return this.next(),k.test=this.parseParenExpression(),k.body=this.parseStatement(),this.finishNode(k,"WhileStatement");case Ua._with:return this.next(),k.object=this.parseParenExpression(),k.body=this.parseStatement(),
this.finishNode(k,"WithStatement");case Ua.braceL:return this.parseBlock();case Ua.semi:return this.next(),this.finishNode(k,"EmptyStatement");case Ua._class:return this.parseClass(!0);case Ua._import:return 10<this.options.ecmaVersion&&(l=this.lookAhead(1).type,l===Ua.parenL||l===Ua.dot)?(k.expression=this.parseExpression(),this.semicolon(),this.finishNode(k,"ExpressionStatement")):this.parseImport();case Ua._export:return this.parseExport();default:if(this.toks.isAsyncFunction())return this.next(),
this.next(),this.parseFunction(k,!0,!0);l=this.parseExpression();if(Fp(l))return this.next(),this.tok.type===Ua.eof?this.finishNode(k,"EmptyStatement"):this.parseStatement();if(c===Ua.name&&"Identifier"===l.type&&this.eat(Ua.colon))return k.body=this.parseStatement(),k.label=l,this.finishNode(k,"LabeledStatement");k.expression=l;this.semicolon();return this.finishNode(k,"ExpressionStatement")}};om.parseBlock=function(){var c=this.startNode();this.pushCx();this.expect(Ua.braceL);var k=this.curIndent,
f=this.curLineStart;for(c.body=[];!this.closes(Ua.braceR,k,f,!0);)c.body.push(this.parseStatement());this.popCx();this.eat(Ua.braceR);return this.finishNode(c,"BlockStatement")};om.parseFor=function(c,k){c.init=k;c.test=c.update=null;this.eat(Ua.semi)&&this.tok.type!==Ua.semi&&(c.test=this.parseExpression());this.eat(Ua.semi)&&this.tok.type!==Ua.parenR&&(c.update=this.parseExpression());this.popCx();this.expect(Ua.parenR);c.body=this.parseStatement();return this.finishNode(c,"ForStatement")};om.parseForIn=
function(c,k){var f=this.tok.type===Ua._in?"ForInStatement":"ForOfStatement";this.next();c.left=k;c.right=this.parseExpression();this.popCx();this.expect(Ua.parenR);c.body=this.parseStatement();return this.finishNode(c,f)};om.parseVar=function(c,k,f){c.kind=f;this.next();c.declarations=[];do f=this.startNode(),f.id=6<=this.options.ecmaVersion?this.toAssignable(this.parseExprAtom(),!0):this.parseIdent(),f.init=this.eat(Ua.eq)?this.parseMaybeAssign(k):null,c.declarations.push(this.finishNode(f,"VariableDeclarator"));
while(this.eat(Ua.comma));c.declarations.length||(f=this.startNode(),f.id=this.dummyIdent(),c.declarations.push(this.finishNode(f,"VariableDeclarator")));k||this.semicolon();return this.finishNode(c,"VariableDeclaration")};om.parseClass=function(c){var k=this.startNode();this.next();k.id=this.tok.type===Ua.name?this.parseIdent():!0===c?this.dummyIdent():null;k.superClass=this.eat(Ua._extends)?this.parseExpression():null;k.body=this.startNode();k.body.body=[];this.pushCx();var f=this.curIndent+1,l=
this.curLineStart;this.eat(Ua.braceL);this.curIndent+1<f&&(f=this.curIndent,l=this.curLineStart);for(;!this.closes(Ua.braceR,f,l);){var p=this.parseClassElement();p&&k.body.body.push(p)}this.popCx();this.eat(Ua.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));this.semicolon();this.finishNode(k.body,"ClassBody");return this.finishNode(k,c?"ClassDeclaration":"ClassExpression")};om.parseClassElement=function(){if(this.eat(Ua.semi))return null;var c=
this.options,k=c.ecmaVersion,f=c.locations,l=this.curIndent,p=this.curLineStart;c=this.startNode();var b="",d=!1,h=!1,a="method";c.static=!1;this.eatContextual("static")&&(this.isClassElementNameStart()||this.toks.type===Ua.star?c.static=!0:b="static");!b&&8<=k&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.toks.type!==Ua.star||this.canInsertSemicolon()?b="async":h=!0);if(!b){d=this.eat(Ua.star);var e=this.toks.value;if(this.eatContextual("get")||this.eatContextual("set"))this.isClassElementNameStart()?
a=e:b=e}if(b)c.computed=!1,c.key=this.startNodeAt(f?[this.toks.lastTokStart,this.toks.lastTokStartLoc]:this.toks.lastTokStart),c.key.name=b,this.finishNode(c.key,"Identifier");else if(this.parseClassElementName(c),Fp(c.key))return Fp(this.parseMaybeAssign())&&this.next(),this.eat(Ua.comma),null;13>k||this.toks.type===Ua.parenL||"method"!==a||d||h?(c.kind=c.computed||c.static||d||h||"method"!==a||!("Identifier"===c.key.type&&"constructor"===c.key.name||"Literal"===c.key.type&&"constructor"===c.key.value)?
a:"constructor",c.value=this.parseMethod(d,h),this.finishNode(c,"MethodDefinition")):(this.eat(Ua.eq)?this.curLineStart!==p&&this.curIndent<=l&&this.tokenStartsLine()?c.value=null:(k=this.inAsync,f=this.inGenerator,this.inGenerator=this.inAsync=!1,c.value=this.parseMaybeAssign(),this.inAsync=k,this.inGenerator=f):c.value=null,this.semicolon(),this.finishNode(c,"PropertyDefinition"));return c};om.isClassElementNameStart=function(){return this.toks.isClassElementNameStart()};om.parseClassElementName=
function(c){this.toks.type===Ua.privateId?(c.computed=!1,c.key=this.parsePrivateIdent()):this.parsePropertyName(c)};om.parseFunction=function(c,k,f){var l=this.inAsync,p=this.inGenerator,b=this.inFunction;this.initFunction(c);6<=this.options.ecmaVersion&&(c.generator=this.eat(Ua.star));8<=this.options.ecmaVersion&&(c.async=!!f);this.tok.type===Ua.name?c.id=this.parseIdent():!0===k&&(c.id=this.dummyIdent());this.inAsync=c.async;this.inGenerator=c.generator;this.inFunction=!0;c.params=this.parseFunctionParams();
c.body=this.parseBlock();this.toks.adaptDirectivePrologue(c.body.body);this.inAsync=l;this.inGenerator=p;this.inFunction=b;return this.finishNode(c,k?"FunctionDeclaration":"FunctionExpression")};om.parseExport=function(){var c=this.startNode();this.next();if(this.eat(Ua.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?c.exported=this.parseExprAtom():c.exported=null),c.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),this.finishNode(c,"ExportAllDeclaration");
if(this.eat(Ua._default)){var k;if(this.tok.type===Ua._function||(k=this.toks.isAsyncFunction())){var f=this.startNode();this.next();k&&this.next();c.declaration=this.parseFunction(f,"nullableID",k)}else this.tok.type===Ua._class?c.declaration=this.parseClass("nullableID"):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}this.tok.type.keyword||this.toks.isLet()||this.toks.isAsyncFunction()?(c.declaration=this.parseStatement(),c.specifiers=
[],c.source=null):(c.declaration=null,c.specifiers=this.parseExportSpecifierList(),c.source=this.eatContextual("from")?this.parseExprAtom():null,this.semicolon());return this.finishNode(c,"ExportNamedDeclaration")};om.parseImport=function(){var c=this.startNode();this.next();if(this.tok.type===Ua.string)c.specifiers=[],c.source=this.parseExprAtom();else{if(this.tok.type===Ua.name&&"from"!==this.tok.value){var k=this.startNode();k.local=this.parseIdent();this.finishNode(k,"ImportDefaultSpecifier");
this.eat(Ua.comma)}c.specifiers=this.parseImportSpecifiers();c.source=this.eatContextual("from")&&this.tok.type===Ua.string?this.parseExprAtom():this.dummyString();k&&c.specifiers.unshift(k)}this.semicolon();return this.finishNode(c,"ImportDeclaration")};om.parseImportSpecifiers=function(){var c=[];if(this.tok.type===Ua.star){var k=this.startNode();this.next();k.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent();c.push(this.finishNode(k,"ImportNamespaceSpecifier"))}else{k=this.curIndent;
var f=this.curLineStart,l=this.nextLineStart;this.pushCx();this.eat(Ua.braceL);this.curLineStart>l&&(l=this.curLineStart);for(;!this.closes(Ua.braceR,k+(this.curLineStart<=l?1:0),f);){var p=this.startNode();if(this.eat(Ua.star))p.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent(),this.finishNode(p,"ImportNamespaceSpecifier");else{if(this.isContextual("from"))break;p.imported=this.parseIdent();if(Fp(p.imported))break;p.local=this.eatContextual("as")?this.parseIdent():p.imported;this.finishNode(p,
"ImportSpecifier")}c.push(p);this.eat(Ua.comma)}this.eat(Ua.braceR);this.popCx()}return c};om.parseExportSpecifierList=function(){var c=[],k=this.curIndent,f=this.curLineStart,l=this.nextLineStart;this.pushCx();this.eat(Ua.braceL);this.curLineStart>l&&(l=this.curLineStart);for(;!this.closes(Ua.braceR,k+(this.curLineStart<=l?1:0),f)&&!this.isContextual("from");){var p=this.startNode();p.local=this.parseIdent();if(Fp(p.local))break;p.exported=this.eatContextual("as")?this.parseIdent():p.local;this.finishNode(p,
"ExportSpecifier");c.push(p);this.eat(Ua.comma)}this.eat(Ua.braceR);this.popCx();return c};var Ri=cj.prototype;Ri.checkLVal=function(c){if(!c)return c;switch(c.type){case "Identifier":case "MemberExpression":return c;case "ParenthesizedExpression":return c.expression=this.checkLVal(c.expression),c;default:return this.dummyIdent()}};Ri.parseExpression=function(c){var k=this.storeCurrentPos(),f=this.parseMaybeAssign(c);if(this.tok.type===Ua.comma){k=this.startNodeAt(k);for(k.expressions=[f];this.eat(Ua.comma);)k.expressions.push(this.parseMaybeAssign(c));
return this.finishNode(k,"SequenceExpression")}return f};Ri.parseParenExpression=function(){this.pushCx();this.expect(Ua.parenL);var c=this.parseExpression();this.popCx();this.expect(Ua.parenR);return c};Ri.parseMaybeAssign=function(c){if(this.inGenerator&&this.toks.isContextual("yield"))return c=this.startNode(),this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!==Ua.star&&!this.tok.type.startsExpr?(c.delegate=!1,c.argument=null):(c.delegate=this.eat(Ua.star),c.argument=this.parseMaybeAssign()),
this.finishNode(c,"YieldExpression");var k=this.storeCurrentPos(),f=this.parseMaybeConditional(c);return this.tok.type.isAssign?(k=this.startNodeAt(k),k.operator=this.tok.value,k.left=this.tok.type===Ua.eq?this.toAssignable(f):this.checkLVal(f),this.next(),k.right=this.parseMaybeAssign(c),this.finishNode(k,"AssignmentExpression")):f};Ri.parseMaybeConditional=function(c){var k=this.storeCurrentPos(),f=this.parseExprOps(c);return this.eat(Ua.question)?(k=this.startNodeAt(k),k.test=f,k.consequent=this.parseMaybeAssign(),
k.alternate=this.expect(Ua.colon)?this.parseMaybeAssign(c):this.dummyIdent(),this.finishNode(k,"ConditionalExpression")):f};Ri.parseExprOps=function(c){var k=this.storeCurrentPos(),f=this.curIndent,l=this.curLineStart;return this.parseExprOp(this.parseMaybeUnary(!1),k,-1,c,f,l)};Ri.parseExprOp=function(c,k,f,l,p,b){if(this.curLineStart!==b&&this.curIndent<p&&this.tokenStartsLine())return c;var d=this.tok.type.binop;if(null!=d&&(!l||this.tok.type!==Ua._in)&&d>f){var h=this.startNodeAt(k);h.left=c;
h.operator=this.tok.value;this.next();this.curLineStart!==b&&this.curIndent<p&&this.tokenStartsLine()?h.right=this.dummyIdent():(c=this.storeCurrentPos(),h.right=this.parseExprOp(this.parseMaybeUnary(!1),c,d,l,p,b));this.finishNode(h,/&&|\|\||\?\?/.test(h.operator)?"LogicalExpression":"BinaryExpression");return this.parseExprOp(h,k,f,l,p,b)}return c};Ri.parseMaybeUnary=function(c){var k=this.storeCurrentPos();if(8<=this.options.ecmaVersion&&this.toks.isContextual("await")&&(this.inAsync||!this.inFunction&&
this.options.allowAwaitOutsideFunction)){var f=this.parseAwait();c=!0}else if(this.tok.type.prefix){f=this.startNode();var l=this.tok.type===Ua.incDec;l||(c=!0);f.operator=this.tok.value;f.prefix=!0;this.next();f.argument=this.parseMaybeUnary(!0);l&&(f.argument=this.checkLVal(f.argument));f=this.finishNode(f,l?"UpdateExpression":"UnaryExpression")}else if(this.tok.type===Ua.ellipsis)f=this.startNode(),this.next(),f.argument=this.parseMaybeUnary(c),f=this.finishNode(f,"SpreadElement");else for(f=this.parseExprSubscripts();this.tok.type.postfix&&
!this.canInsertSemicolon();)l=this.startNodeAt(k),l.operator=this.tok.value,l.prefix=!1,l.argument=this.checkLVal(f),this.next(),f=this.finishNode(l,"UpdateExpression");return!c&&this.eat(Ua.starstar)?(c=this.startNodeAt(k),c.operator="**",c.left=f,c.right=this.parseMaybeUnary(!1),this.finishNode(c,"BinaryExpression")):f};Ri.parseExprSubscripts=function(){var c=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),c,!1,this.curIndent,this.curLineStart)};Ri.parseSubscripts=function(c,
k,f,l,p){for(var b=11<=this.options.ecmaVersion,d=!1;;){if(this.curLineStart!==p&&this.curIndent<=l&&this.tokenStartsLine())if(this.tok.type===Ua.dot&&this.curIndent===l)--l;else break;var h="Identifier"===c.type&&"async"===c.name&&!this.canInsertSemicolon(),a=b&&this.eat(Ua.questionDot);a&&(d=!0);if(a&&this.tok.type!==Ua.parenL&&this.tok.type!==Ua.bracketL&&this.tok.type!==Ua.backQuote||this.eat(Ua.dot)){var e=this.startNodeAt(k);e.object=c;this.curLineStart!==p&&this.curIndent<=l&&this.tokenStartsLine()?
e.property=this.dummyIdent():e.property=this.parsePropertyAccessor()||this.dummyIdent();e.computed=!1;b&&(e.optional=a);c=this.finishNode(e,"MemberExpression")}else if(this.tok.type===Ua.bracketL)this.pushCx(),this.next(),e=this.startNodeAt(k),e.object=c,e.property=this.parseExpression(),e.computed=!0,b&&(e.optional=a),this.popCx(),this.expect(Ua.bracketR),c=this.finishNode(e,"MemberExpression");else if(f||this.tok.type!==Ua.parenL)if(this.tok.type===Ua.backQuote)a=this.startNodeAt(k),a.tag=c,a.quasi=
this.parseTemplate(),c=this.finishNode(a,"TaggedTemplateExpression");else break;else{e=this.parseExprList(Ua.parenR);if(h&&this.eat(Ua.arrow))return this.parseArrowExpression(this.startNodeAt(k),e,!0);h=this.startNodeAt(k);h.callee=c;h.arguments=e;b&&(h.optional=a);c=this.finishNode(h,"CallExpression")}}d&&(k=this.startNodeAt(k),k.expression=c,c=this.finishNode(k,"ChainExpression"));return c};Ri.parseExprAtom=function(){switch(this.tok.type){case Ua._this:case Ua._super:var c=this.tok.type===Ua._this?
"ThisExpression":"Super";var k=this.startNode();this.next();return this.finishNode(k,c);case Ua.name:k=this.storeCurrentPos();c=this.parseIdent();var f=!1;if("async"===c.name&&!this.canInsertSemicolon()){if(this.eat(Ua._function))return this.parseFunction(this.startNodeAt(k),!1,!0);this.tok.type===Ua.name&&(c=this.parseIdent(),f=!0)}return this.eat(Ua.arrow)?this.parseArrowExpression(this.startNodeAt(k),[c],f):c;case Ua.regexp:return k=this.startNode(),c=this.tok.value,k.regex={pattern:c.pattern,
flags:c.flags},k.value=c.value,k.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(k,"Literal");case Ua.num:case Ua.string:return k=this.startNode(),k.value=this.tok.value,k.raw=this.input.slice(this.tok.start,this.tok.end),this.tok.type===Ua.num&&110===k.raw.charCodeAt(k.raw.length-1)&&(k.bigint=k.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(k,"Literal");case Ua._null:case Ua._true:case Ua._false:return k=this.startNode(),k.value=this.tok.type===Ua._null?
null:this.tok.type===Ua._true,k.raw=this.tok.type.keyword,this.next(),this.finishNode(k,"Literal");case Ua.parenL:k=this.storeCurrentPos();this.next();c=this.parseExpression();this.expect(Ua.parenR);if(this.eat(Ua.arrow))return c=c.expressions||[c],c.length&&Fp(c[c.length-1])&&c.pop(),this.parseArrowExpression(this.startNodeAt(k),c);this.options.preserveParens&&(k=this.startNodeAt(k),k.expression=c,c=this.finishNode(k,"ParenthesizedExpression"));return c;case Ua.bracketL:return k=this.startNode(),
k.elements=this.parseExprList(Ua.bracketR,!0),this.finishNode(k,"ArrayExpression");case Ua.braceL:return this.parseObj();case Ua._class:return this.parseClass(!1);case Ua._function:return k=this.startNode(),this.next(),this.parseFunction(k,!1);case Ua._new:return this.parseNew();case Ua.backQuote:return this.parseTemplate();case Ua._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.dummyIdent();default:return this.dummyIdent()}};Ri.parseExprImport=function(){var c=this.startNode(),
k=this.parseIdent(!0);switch(this.tok.type){case Ua.parenL:return this.parseDynamicImport(c);case Ua.dot:return c.meta=k,this.parseImportMeta(c);default:return c.name="import",this.finishNode(c,"Identifier")}};Ri.parseDynamicImport=function(c){c.source=this.parseExprList(Ua.parenR)[0]||this.dummyString();return this.finishNode(c,"ImportExpression")};Ri.parseImportMeta=function(c){this.next();c.property=this.parseIdent(!0);return this.finishNode(c,"MetaProperty")};Ri.parseNew=function(){var c=this.startNode(),
k=this.curIndent,f=this.curLineStart,l=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Ua.dot))return c.meta=l,c.property=this.parseIdent(!0),this.finishNode(c,"MetaProperty");l=this.storeCurrentPos();c.callee=this.parseSubscripts(this.parseExprAtom(),l,!0,k,f);c.arguments=this.tok.type===Ua.parenL?this.parseExprList(Ua.parenR):[];return this.finishNode(c,"NewExpression")};Ri.parseTemplateElement=function(){var c=this.startNode();c.value=this.tok.type===Ua.invalidTemplate?{raw:this.tok.value,
cooked:null}:{raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,"\n"),cooked:this.tok.value};this.next();c.tail=this.tok.type===Ua.backQuote;return this.finishNode(c,"TemplateElement")};Ri.parseTemplate=function(){var c=this.startNode();this.next();c.expressions=[];var k=this.parseTemplateElement();for(c.quasis=[k];!k.tail;)this.next(),c.expressions.push(this.parseExpression()),this.expect(Ua.braceR)?k=this.parseTemplateElement():(k=this.startNode(),k.value={cooked:"",raw:""},k.tail=
!0,this.finishNode(k,"TemplateElement")),c.quasis.push(k);this.expect(Ua.backQuote);return this.finishNode(c,"TemplateLiteral")};Ri.parseObj=function(){var c=this.startNode();c.properties=[];this.pushCx();var k=this.curIndent+1,f=this.curLineStart;this.eat(Ua.braceL);this.curIndent+1<k&&(k=this.curIndent,f=this.curLineStart);for(;!this.closes(Ua.braceR,k,f);){var l=this.startNode(),p=void 0,b=void 0;if(9<=this.options.ecmaVersion&&this.eat(Ua.ellipsis))l.argument=this.parseMaybeAssign(),c.properties.push(this.finishNode(l,
"SpreadElement"));else{6<=this.options.ecmaVersion&&(b=this.storeCurrentPos(),l.method=!1,l.shorthand=!1,p=this.eat(Ua.star));this.parsePropertyName(l);if(this.toks.isAsyncProp(l)){var d=!0;p=9<=this.options.ecmaVersion&&this.eat(Ua.star);this.parsePropertyName(l)}else d=!1;Fp(l.key)?Fp(this.parseMaybeAssign())&&this.next():(this.eat(Ua.colon)?(l.kind="init",l.value=this.parseMaybeAssign()):6<=this.options.ecmaVersion&&(this.tok.type===Ua.parenL||this.tok.type===Ua.braceL)?(l.kind="init",l.method=
!0,l.value=this.parseMethod(p,d)):5<=this.options.ecmaVersion&&"Identifier"===l.key.type&&!l.computed&&("get"===l.key.name||"set"===l.key.name)&&this.tok.type!==Ua.comma&&this.tok.type!==Ua.braceR&&this.tok.type!==Ua.eq?(l.kind=l.key.name,this.parsePropertyName(l),l.value=this.parseMethod(!1)):(l.kind="init",6<=this.options.ecmaVersion?this.eat(Ua.eq)?(p=this.startNodeAt(b),p.operator="=",p.left=l.key,p.right=this.parseMaybeAssign(),l.value=this.finishNode(p,"AssignmentExpression")):l.value=l.key:
l.value=this.dummyIdent(),l.shorthand=!0),c.properties.push(this.finishNode(l,"Property")))}this.eat(Ua.comma)}this.popCx();this.eat(Ua.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return this.finishNode(c,"ObjectExpression")};Ri.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Ua.bracketL)){c.computed=!0;c.key=this.parseExpression();this.expect(Ua.bracketR);return}c.computed=!1}var k=this.tok.type===Ua.num||this.tok.type===
Ua.string?this.parseExprAtom():this.parseIdent();c.key=k||this.dummyIdent()};Ri.parsePropertyAccessor=function(){if(this.tok.type===Ua.name||this.tok.type.keyword)return this.parseIdent();if(this.tok.type===Ua.privateId)return this.parsePrivateIdent()};Ri.parseIdent=function(){var c=this.tok.type===Ua.name?this.tok.value:this.tok.type.keyword;if(!c)return this.dummyIdent();var k=this.startNode();this.next();k.name=c;return this.finishNode(k,"Identifier")};Ri.parsePrivateIdent=function(){var c=this.startNode();
c.name=this.tok.value;this.next();return this.finishNode(c,"PrivateIdentifier")};Ri.initFunction=function(c){c.id=null;c.params=[];6<=this.options.ecmaVersion&&(c.generator=!1,c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};Ri.toAssignable=function(c,k){if(c&&"Identifier"!==c.type&&("MemberExpression"!==c.type||k))if("ParenthesizedExpression"===c.type)this.toAssignable(c.expression,k);else{if(6>this.options.ecmaVersion)return this.dummyIdent();if("ObjectExpression"===c.type){c.type="ObjectPattern";
for(var f=0,l=c.properties;f<l.length;f+=1)this.toAssignable(l[f],k)}else if("ArrayExpression"===c.type)c.type="ArrayPattern",this.toAssignableList(c.elements,k);else if("Property"===c.type)this.toAssignable(c.value,k);else if("SpreadElement"===c.type)c.type="RestElement",this.toAssignable(c.argument,k);else if("AssignmentExpression"===c.type)c.type="AssignmentPattern",delete c.operator;else return this.dummyIdent()}return c};Ri.toAssignableList=function(c,k){for(var f=0;f<c.length;f+=1)this.toAssignable(c[f],
k);return c};Ri.parseFunctionParams=function(c){c=this.parseExprList(Ua.parenR);return this.toAssignableList(c,!0)};Ri.parseMethod=function(c,k){var f=this.startNode(),l=this.inAsync,p=this.inGenerator,b=this.inFunction;this.initFunction(f);6<=this.options.ecmaVersion&&(f.generator=!!c);8<=this.options.ecmaVersion&&(f.async=!!k);this.inAsync=f.async;this.inGenerator=f.generator;this.inFunction=!0;f.params=this.parseFunctionParams();f.body=this.parseBlock();this.toks.adaptDirectivePrologue(f.body.body);
this.inAsync=l;this.inGenerator=p;this.inFunction=b;return this.finishNode(f,"FunctionExpression")};Ri.parseArrowExpression=function(c,k,f){var l=this.inAsync,p=this.inGenerator,b=this.inFunction;this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!f);this.inAsync=c.async;this.inGenerator=!1;this.inFunction=!0;c.params=this.toAssignableList(k,!0);c.expression=this.tok.type!==Ua.braceL;c.expression?c.body=this.parseMaybeAssign():(c.body=this.parseBlock(),this.toks.adaptDirectivePrologue(c.body.body));
this.inAsync=l;this.inGenerator=p;this.inFunction=b;return this.finishNode(c,"ArrowFunctionExpression")};Ri.parseExprList=function(c,k){this.pushCx();var f=this.curIndent,l=this.curLineStart,p=[];for(this.next();!this.closes(c,f+1,l);)if(this.eat(Ua.comma))p.push(k?null:this.dummyIdent());else{var b=this.parseMaybeAssign();if(Fp(b)){if(this.closes(c,f,l))break;this.next()}else p.push(b);this.eat(Ua.comma)}this.popCx();this.eat(c)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=
this.tok.loc.start));return p};Ri.parseAwait=function(){var c=this.startNode();this.next();c.argument=this.parseMaybeUnary();return this.finishNode(c,"AwaitExpression")};kD.tabSize=4;var LI=Object.freeze({__proto__:null,LooseParser:cj,isDummy:Fp,parse:function(c,k){return cj.parse(c,k)}}),Ie=lively.FreezerRuntime.recorderFor("lively.ast/lib/acorn-extension.js");Ie.forEachNode=function(c,k,f,l){l=l||{};var p=l.traversal||"preorder",b=Ie.obj.clone(l.visitors?l.visitors:Ie.walk.make(Ie.custom.visitors.withMemberExpression)),
d="preorder"===p?function(h,a,e,n,q){k(e,f,n,a);return h(e,n+1,q)}:function(h,a,e,n,q){h=h(e,n+1,q);k(e,f,n,a);return h};Object.keys(b).forEach(function(h){var a=b[h];b[h]=function(e,n,q){return d(a,h,e,n,q)}});Ie.walk.recursive(c,0,null,b);return c};Ie.matchNodes=function(c,k,f,l){return Ie.forEachNode(c,function(p,b,d,h){if(k[p.type])k[p.type](p,b,d,h)},f,l)};Ie.findNodesIncluding=rD;Ie.withParentInfo=function(c,k,f){function l(a){var e={id:Ie.string.newUUID(),parentScope:a,containingScopes:[]};
a&&a.containingScopes.push(e);return e}f=f||{};var p=Ie.walk.make({Function:function(a,e,n){e&&e.scope&&(e.scope=l(e.scope));n(a.body,e,"ScopeBody")},VariableDeclarator:function(a,e,n){a.init&&n(a.init,e,"Expression")},VariableDeclaration:function(a,e,n){for(var q=0;q<a.declarations.length;++q){var r=a.declarations[q];r&&n(r,e,"VariableDeclarator")}},ObjectExpression:function(a,e,n){for(var q=0;q<a.properties.length;++q){var r=a.properties[q];n(r.key,e,"Expression");n(r.value,e,"Expression")}},MemberExpression:function(a,
e,n){n(a.object,e,"Expression");n(a.property,e,"Expression")}},Ie.walk.base),b,d=[];Ie.forEachNode(c,function(a){Ie.arr.withoutAll(Object.keys(a),["end","start","type","source","raw"]).forEach(function(e){if(!a.__lookupGetter__(e)){var n=a[e];a.__defineGetter__(e,function(){b=e;return n});d.push([a,e,a[e]])}})},null,{visitors:p});var h=[];Object.keys(p).forEach(function(a){var e=p[a];p[a]=function(n,q,r){return a===n.type||f.visitAllNodes?(h.push(k.call(null,n,{scope:q.scope,depth:q.depth,parent:q.parent,
type:a,propertyInParent:b})),e(n,{scope:q.scope,parent:n,depth:q.depth+1},r)):e(n,q,r)}});Ie.walk.recursive(c,{scope:l(),parent:null,propertyInParent:"",depth:0},null,p);d.forEach(function(a){delete a[0][a[1]];a[0][a[1]]=a[2]});return h};Ie.copy=GL;Ie.findSiblings=HL;Ie.findNodeByAstIndex=IL;Ie.findStatementOfNode=JL;Ie.addAstIndex=xz;Ie.obj=xf;Ie.arr=cf;Ie.string=Ng;Ie.Path=Eg;Ie.withMozillaAstDo=jv;Ie.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?
self:void 0;Ie.acorn=kq;Ie.walk=lo;Ie.loose=LI;Ie.custom={};Ie.custom.forEachNode=Ie.forEachNode;Ie.custom.matchNodes=Ie.matchNodes;Ie.custom.findNodesIncluding=Ie.findNodesIncluding;Ie.custom.withParentInfo=Ie.withParentInfo;Ie.custom.copy=Ie.copy;Ie.custom.findSiblings=Ie.findSiblings;Ie.custom.findNodeByAstIndex=Ie.findNodeByAstIndex;Ie.custom.findStatementOfNode=Ie.findStatementOfNode;Ie.custom.addAstIndex=Ie.addAstIndex;var $s=Ka("bJ",Ie.custom);Ie.walk=lo;Ie.walk=lo;Ie.loose=LI;Ie.loose=LI;
Ie.acorn=kq;Ie.acorn=kq;Ie.custom=$s;Ie.custom=$s;Ie.findStatementOfNode=JL;Ie.findStatementOfNode=JL;Ie.addAstIndex=xz;Ie.addAstIndex=xz;Ie.findNodesIncluding=rD;Ie.findNodesIncluding=rD;Ie.findSiblings=HL;Ie.findSiblings=HL;Ie.findNodeByAstIndex=IL;Ie.findNodeByAstIndex=IL;Ie.copy=GL;Ie.copy=GL;Ie.custom.visitors={stopAtFunctions:Ie.walk.make(Object.assign({Function:function(){}},Ie.walk.base)),withMemberExpression:Ie.walk.make({MemberExpression:function(c,k,f){f(c.object,k,"Expression");f(c.property,
k,"Expression")}},Ie.walk.base)};var ji=lively.FreezerRuntime.recorderFor("lively.ast/lib/visitors.js");ji.blockInliner=function(c){if(Array.isArray(c.body))for(var k=c.body.length-1;0<=k;k--){var f=c.body[k];"BlockStatement"===f.type&&f[ji.canBeInlinedSym]&&c.body.splice.apply(c.body,[k,1].concat(f.body))}return c};ji.block=function(c){return{type:"BlockStatement",body:c}};ji.Visitor=de;var lq=function(){return ji.Visitor.apply(this,arguments)||this};$jscomp.inherits(lq,ji.Visitor);lq.prototype.accept=
function(c,k,f){this.doFunc(c,k,f);return ji.Visitor.prototype.accept.call(this,c,k,f)};lq.run=function(c,k,f){var l=new this;l.doFunc=k;l.accept(c,f,[]);return f};ji.AllNodesVisitor=lq;var kv=function(){return ji.Visitor.apply(this,arguments)||this};$jscomp.inherits(kv,ji.Visitor);kv.prototype.accept=function(c,k,f){switch(c.type){case "ArrowFunctionExpression":return c;case "FunctionExpression":return c;case "FunctionDeclaration":return k.unshift({node:c,path:f}),c;default:return ji.Visitor.prototype.accept.call(this,
c,k,f)}};kv.run=function(c){var k=[];(new this).accept(c,k,[]);return k};ji.FindToplevelFuncDeclVisitor=kv;ji.canBeInlinedSym=Symbol("canBeInlined");var oo=function(){return ji.Visitor.apply(this,arguments)||this};$jscomp.inherits(oo,ji.Visitor);oo.prototype.accept=function(c,k,f){c=this.replacer(ji.Visitor.prototype.accept.call(this,c,k,f));k={};return Array.isArray(c)?1===c.length?c[0]:Object.assign(ji.block(c),(k[ji.canBeInlinedSym]=!0,k)):c};oo.prototype.visitBlockStatement=function(c,k,f){return ji.blockInliner(ji.Visitor.prototype.visitBlockStatement.call(this,
c,k,f))};oo.prototype.visitProgram=function(c,k,f){return ji.blockInliner(ji.Visitor.prototype.visitProgram.call(this,c,k,f))};oo.run=function(c,k){var f=new this;f.replacer=k;return f.accept(c,null,[])};ji.ReplaceManyVisitor=oo;var jp=function(){return ji.Visitor.apply(this,arguments)||this};$jscomp.inherits(jp,ji.Visitor);jp.prototype.accept=function(c,k,f){return this.replacer(ji.Visitor.prototype.accept.call(this,c,k,f),f)};jp.run=function(c,k){var f=new this;f.replacer=k;return f.accept(c,null,
[])};ji.ReplaceVisitor=jp;ji.AllNodesVisitor=lq;ji.AllNodesVisitor=lq;ji.FindToplevelFuncDeclVisitor=kv;ji.FindToplevelFuncDeclVisitor=kv;ji.ReplaceVisitor=jp;ji.ReplaceVisitor=jp;ji.ReplaceManyVisitor=oo;ji.ReplaceManyVisitor=oo;var Hg=lively.FreezerRuntime.recorderFor("lively.ast/lib/parser.js");Hg.addSource=sD;Hg.nodesAt=function(c,k){k="string"===typeof k?this.parse(k):k;return Hg.findNodesIncluding(k,c)};Hg.parseFunction=js;Hg.fuzzyParse=Qq;Hg.acornParseAsyncAware=function(c,k){if(k.onComment){var f=
k.onComment;k.onComment=function(b,d,h,a,e,n){return f.call(this,b,d,h-14,a-14,e,n)}}var l=Hg.acorn.parse("async () => {\n"+c+"\n}",k);if(l.loc)var p=l.loc.constructor;l={body:l.body[0].expression.body.body,sourceType:"module",type:"Program"};Hg.AllNodesVisitor.run(l,function(b,d,h){if(!b._positionFixed){b._positionFixed=!0;if(b.start||0===b.start)b.start-=14,b.end-=14;b.loc&&p&&(h=b.loc,d=h.start,h=h.end,b.loc=new p(k,{column:d.column,line:d.line-1},{column:h.column,line:h.line-1}));k.addSource&&
!b.source&&(b.source=c.slice(b.start,b.end))}});l.start=l.body[0].start;l.end=Hg.arr.last(l.body).end;k.addSource&&(l.source=c);l.body[0].loc&&p&&(l.loc=new p(k,l.body[0].loc.start,Hg.arr.last(l.body).loc.end));return l};Hg.parse=gk;Hg.arr=cf;Hg.acorn=kq;Hg.loose=LI;Hg.walk=lo;Hg.addAstIndex=xz;Hg.findNodesIncluding=rD;Hg.custom=$s;Hg.AllNodesVisitor=lq;Hg.walk=lo;Hg.walk=lo;Hg.parse=gk;Hg.parse=gk;Hg.parseFunction=js;Hg.parseFunction=js;Hg.fuzzyParse=Qq;Hg.fuzzyParse=Qq;Hg.addSource=sD;Hg.addSource=
sD;Hg.custom.addSource=Hg.addSource;var wg=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitor-interface.js");wg.string=Ng;wg.Path=Eg;wg.BaseVisitor=de;wg.PrinterVisitor=qy;wg.ComparisonVisitor=wj;wg.stringify=Yf;wg.addAstIndex=xz;wg.parse=gk;wg.addSource=sD;wg.methods={withMozillaAstDo:function(c,k,f){var l=new wg.BaseVisitor,p=l.accept;l.accept=function(b,d,h){k=f(function(){p.call(l,b,d,h)},b,d,h);return b};l.accept(c,k,[]);return k},printAst:function(c,k){k=k||{};var f=k.printSource||
!1,l=k.printPositions||!1,p=k.printIndex||!1,b=[];if("string"===typeof c){var d=c;c=wg.parse(c)}else d=k.source||c.source;f&&!c.source&&(d||(d=wg.stringify(c),c=wg.parse(d)),wg.addSource(c,d));(new wg.PrinterVisitor).accept(c,{index:0,tree:b},[]);return wg.string.printTree(b[0],function(h){var a=h.path+":"+h.node.type,e=[];p&&e.push(h.index);l&&e.push(h.node.start+"-"+h.node.end);f&&(h=h.node.source||d.slice(h.node.start,h.node.end),h=wg.string.print(h.truncate(60).replace(/\n/g,"").replace(/\s+/g,
" ")),e.push(h));e.length&&(a+="("+e.join(",")+")");return a},function(h){return h.children},"  ")},compareAst:function(c,k){if(!c||!k)throw Error("node"+(c?"1":"2")+" not defined");var f={completePath:[],comparisons:{errors:[]}};(new wg.ComparisonVisitor).accept(c,k,f,[]);return f.comparisons.errors.length?f.comparisons.errors.pluck("msg"):null},pathToNode:function(c,k,f){c.astIndex||wg.addAstIndex(c);f=new wg.BaseVisitor;var l=null;(f.accept=function(p,b,d,h){if(!l)return b=b.concat(h),p.astIndex===
k&&(l={pathString:b.map(function(a){return"string"===typeof a?"."+a:"["+a+"]"}).join(""),path:b,node:p}),this["visit"+p.type](p,b,d,h)}).call(f,c,[],{},[]);return l},rematchAstWithSource:function(c,k,f,l){f=!!f;k=wg.parse(k,f?{locations:!0}:void 0);var p=new wg.BaseVisitor;l&&(k=wg.Path(l).get(k));p.accept=function(b,d,h){h=h||[];var a=h.reduce(function(e,n){return e[n]},c);a.start=b.start;a.end=b.end;f&&(a.loc=b.loc);return this["visit"+b.type](b,d,h)};p.accept(k)}};wg.withMozillaAstDo=wg.methods.withMozillaAstDo;
wg.printAst=wg.methods.printAst;wg.compareAst=wg.methods.compareAst;wg.pathToNode=wg.methods.pathToNode;wg.rematchAstWithSource=wg.methods.rematchAstWithSource;var jv=wg.withMozillaAstDo,IB=wg.printAst,JB=wg.compareAst,KB=wg.pathToNode,LB=wg.rematchAstWithSource;wg.BaseVisitor=de;wg.BaseVisitor=de;wg.withMozillaAstDo=jv;wg.withMozillaAstDo=jv;wg.printAst=IB;wg.printAst=IB;wg.compareAst=JB;wg.compareAst=JB;wg.pathToNode=KB;wg.pathToNode=KB;wg.rematchAstWithSource=LB;wg.rematchAstWithSource=LB;var Be=
lively.FreezerRuntime.recorderFor("lively.ast/lib/nodes.js");Be.isIdentifier=tD;Be.id=yz;Be.literal=uD;Be.exprStmt=zz;Be.returnStmt=Az;Be.empty=vD;Be.binaryExpr=wD;Be.funcExpr=Bz;Be.funcCall=Tw;Be.varDecl=Cz;Be.member=Dz;Be.memberChain=Ez;Be.assign=xD;Be.block=Fz;Be.program=Gz;Be.tryStmt=Hz;Be.prop=yD;Be.objectLiteral=zD;Be.ifStmt=AD;Be.forIn=BD;Be.conditional=CD;Be.logical=DD;Be.isIdentifier=tD;Be.isIdentifier=tD;Be.id=yz;Be.id=yz;Be.literal=uD;Be.literal=uD;Be.objectLiteral=zD;Be.objectLiteral=
zD;Be.prop=yD;Be.prop=yD;Be.exprStmt=zz;Be.exprStmt=zz;Be.returnStmt=Az;Be.returnStmt=Az;Be.empty=vD;Be.empty=vD;Be.binaryExpr=wD;Be.binaryExpr=wD;Be.funcExpr=Bz;Be.funcExpr=Bz;Be.funcCall=Tw;Be.funcCall=Tw;Be.varDecl=Cz;Be.varDecl=Cz;Be.member=Dz;Be.member=Dz;Be.memberChain=Ez;Be.memberChain=Ez;Be.assign=xD;Be.assign=xD;Be.block=Fz;Be.block=Fz;Be.program=Gz;Be.program=Gz;Be.tryStmt=Hz;Be.tryStmt=Hz;Be.ifStmt=AD;Be.ifStmt=AD;Be.forIn=BD;Be.forIn=BD;Be.conditional=CD;Be.conditional=CD;Be.logical=DD;
Be.logical=DD;Be.identifierRe=/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;var Br=Object.freeze({__proto__:null,isIdentifier:tD,id:yz,literal:uD,objectLiteral:zD,prop:yD,exprStmt:zz,returnStmt:Az,empty:vD,binaryExpr:wD,funcExpr:Bz,funcCall:Tw,varDecl:Cz,member:Dz,memberChain:Ez,assign:xD,block:Fz,program:Gz,tryStmt:Hz,ifStmt:AD,forIn:BD,conditional:CD,logical:DD}),Dd=lively.FreezerRuntime.recorderFor("lively.ast/lib/query.js");Dd.scopes=Iz;Dd.nodesAtIndex=ED;Dd.scopesAtIndex=FD;Dd.scopeAtIndex=
GD;Dd.scopesAtPos=HD;Dd.nodesInScopeOf=ID;Dd.declarationsOfScope=JD;Dd.declarationsWithIdsOfScope=function(c){var k=Dd.arr.compact(Dd.helpers.declIds(c.params).concat(c.catches)),f=[].concat($jscomp.arrayFromIterable(c.node.id&&c.node.id.name?[c.node]:[]),$jscomp.arrayFromIterable(Dd.arr.filter(c.funcDecls,function(l){return l.id})),$jscomp.arrayFromIterable(Dd.arr.filter(c.classDecls,function(l){return l.id})));return k.map(function(l){return[l,l]}).concat(f.map(function(l){return[l,l.id]})).concat(Dd.helpers.varDecls(c)).concat(c.importSpecifiers.map(function(l){return[Dd.statementOf(c.node,
l),l]}))};Dd._declaredVarNames=KD;Dd._findJsLintGlobalDeclarations=LD;Dd.topLevelFuncDecls=Jz;Dd.resolveReference=CV;Dd.resolveReferences=MD;Dd.refWithDeclAt=ND;Dd.topLevelDeclsAndRefs=Kz;Dd.findGlobalVarRefs=OD;Dd.findNodesIncludingLines=PD;Dd.__varDeclIdsFor=function(c,k){for(var f=[],l=$jscomp.makeIterator(c.params),p=l.next();!p.done;p=l.next())p=p.value,p.name===k&&f.push(p);l=$jscomp.makeIterator(c.funcDecls);for(p=l.next();!p.done;p=l.next())p=p.value,p.id&&p.id.name===k&&f.push(p.id);l=$jscomp.makeIterator(c.classDecls);
for(p=l.next();!p.done;p=l.next())p=p.value,p.id&&p.id.name===k&&f.push(p.id);l=$jscomp.makeIterator(c.importSpecifiers);for(p=l.next();!p.done;p=l.next())p=p.value,p.name===k&&f.push(p);c=$jscomp.makeIterator(Dd.helpers.varDeclIds(c));for(p=c.next();!p.done;p=c.next())p=p.value,p.name===k&&f.push(p);return f};Dd.findReferencesAndDeclsInScope=Lz;Dd.findDeclarationClosestToIndex=QD;Dd.nodesAt=RD;Dd.statementOf=Mz;Dd.imports=SD;Dd.exports=TD;Dd.arr=cf;Dd.chain=Dn;Dd.num=jk;Dd.tree=xr;Dd.fun=ik;Dd.obj=
xf;Dd.BaseVisitor=de;Dd.ScopeVisitor=Mi;Dd.FindToplevelFuncDeclVisitor=kv;Dd.withMozillaAstDo=jv;Dd.parse=gk;Dd.acorn=kq;Dd.walk=lo;Dd.custom=$s;Dd.stringify=Yf;Dd.helpers={declIds:function(c,k){k=void 0===k?[]:k;for(var f=0;f<c.length;f++){var l=c[f];if(l)if("Identifier"===l.type)k.push(l);else if("RestElement"===l.type)k.push(l.argument);else if("AssignmentPattern"===l.type)Dd.helpers.declIds([l.left],k);else if("ObjectPattern"===l.type)for(var p=0;p<l.properties.length;p++){var b=l.properties[p];
Dd.helpers.declIds([b.value||b],k)}else"ArrayPattern"===l.type&&Dd.helpers.declIds(l.elements,k)}return k},varDecls:function(c,k){k=void 0===k?[]:k;c=$jscomp.makeIterator(c.varDecls);for(var f=c.next();!f.done;f=c.next()){f=$jscomp.makeIterator(f.value.declarations);for(var l=f.next();!l.done;l=f.next()){l=l.value;for(var p=$jscomp.makeIterator(Dd.helpers.declIds([l.id])),b=p.next();!b.done;b=p.next())k.push([l,b.value])}}return k},varDeclIds:function(c,k){k=void 0===k?[]:k;c=$jscomp.makeIterator(c.varDecls);
for(var f=c.next();!f.done;f=c.next()){f=$jscomp.makeIterator(f.value.declarations);for(var l=f.next();!l.done;l=f.next())Dd.helpers.declIds([l.value.id],k)}return k},objPropertiesAsList:function(c,k,f,l){l=void 0===l?[]:l;c=$jscomp.makeIterator(c.properties);for(var p=c.next();!p.done;p=c.next()){p=p.value;var b=p.key.name,d={key:k.concat([b]),value:p.value};switch(p.value.type){case "ArrayExpression":case "ArrayPattern":f||l.push(d);for(d=0;d<p.value.elements.length;d++)Dd.helpers.objPropertiesAsList(p.value.elements[d],
k.concat([b,d]),f,l);break;case "ObjectExpression":case "ObjectPattern":f||l.push(d);Dd.helpers.objPropertiesAsList(p.value,k.concat([b]),f,l);break;case "AssignmentPattern":f||l.push(d);Dd.helpers.objPropertiesAsList(p.left,k.concat([b]),f,l);break;default:l.push(d)}}return l},isDeclaration:function(c){return"FunctionDeclaration"===c.type||"VariableDeclaration"===c.type||"ClassDeclaration"===c.type}};Dd.knownGlobals="closed true false null undefined arguments Object Function Array Number parseFloat parseInt Infinity NaN Boolean String Symbol Date Promise RegExp Error EvalError RangeError ReferenceError SyntaxError TypeError URIError JSON Math console ArrayBuffer Uint8Array Int8Array Uint16Array Int16Array Uint32Array Int32Array Float32Array Float64Array Uint8ClampedArray DataView Map Set WeakMap WeakSet Proxy Reflect decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape eval isFinite isNaN Intl navigator window document Blob setTimeout clearTimeout setInterval clearInterval requestAnimationFrame cancelAnimationFrame btoa atob sessionStorage localStorage $world lively System customElements performance addEventListener closed".split(" ");
Dd.globalDeclRe=/^\s*global\s*/;Dd._stmtTypes="EmptyStatement BlockStatement ExpressionStatement IfStatement BreakStatement ContinueStatement WithStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement ForOfStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration ImportDeclaration ImportDeclaration ExportNamedDeclaration ExportDefaultDeclaration ExportAllDeclaration".split(" ");var MI=Dd.helpers,gS=Dd.knownGlobals;
Dd.helpers=MI;Dd.helpers=MI;Dd.knownGlobals=gS;Dd.knownGlobals=gS;Dd.scopes=Iz;Dd.scopes=Iz;Dd.nodesAtIndex=ED;Dd.nodesAtIndex=ED;Dd.scopesAtIndex=FD;Dd.scopesAtIndex=FD;Dd.scopeAtIndex=GD;Dd.scopeAtIndex=GD;Dd.scopesAtPos=HD;Dd.scopesAtPos=HD;Dd.nodesInScopeOf=ID;Dd.nodesInScopeOf=ID;Dd.declarationsOfScope=JD;Dd.declarationsOfScope=JD;Dd._declaredVarNames=KD;Dd._declaredVarNames=KD;Dd._findJsLintGlobalDeclarations=LD;Dd._findJsLintGlobalDeclarations=LD;Dd.topLevelDeclsAndRefs=Kz;Dd.topLevelDeclsAndRefs=
Kz;Dd.topLevelFuncDecls=Jz;Dd.topLevelFuncDecls=Jz;Dd.findGlobalVarRefs=OD;Dd.findGlobalVarRefs=OD;Dd.findNodesIncludingLines=PD;Dd.findNodesIncludingLines=PD;Dd.findReferencesAndDeclsInScope=Lz;Dd.findReferencesAndDeclsInScope=Lz;Dd.findDeclarationClosestToIndex=QD;Dd.findDeclarationClosestToIndex=QD;Dd.nodesAt=RD;Dd.nodesAt=RD;Dd.statementOf=Mz;Dd.statementOf=Mz;Dd.resolveReferences=MD;Dd.resolveReferences=MD;Dd.refWithDeclAt=ND;Dd.refWithDeclAt=ND;Dd.imports=SD;Dd.imports=SD;Dd.exports=TD;Dd.exports=
TD;var kp=Object.freeze({__proto__:null,helpers:MI,knownGlobals:gS,scopes:Iz,nodesAtIndex:ED,scopesAtIndex:FD,scopeAtIndex:GD,scopesAtPos:HD,nodesInScopeOf:ID,declarationsOfScope:JD,_declaredVarNames:KD,_findJsLintGlobalDeclarations:LD,topLevelDeclsAndRefs:Kz,topLevelFuncDecls:Jz,findGlobalVarRefs:OD,findNodesIncludingLines:PD,findReferencesAndDeclsInScope:Lz,findDeclarationClosestToIndex:QD,nodesAt:RD,statementOf:Mz,resolveReferences:MD,refWithDeclAt:ND,imports:SD,exports:TD});Ka("bG",kp);var $m=
lively.FreezerRuntime.recorderFor("lively.ast/lib/object-spread-transform.js");$m.objectSpreadTransform=Uw;$m.Visitor=de;$m.funcCall=Tw;$m.member=Dz;var NI=function(){return $m.Visitor.apply(this,arguments)||this};$jscomp.inherits(NI,$m.Visitor);NI.prototype.accept=function(c,k,f){"ObjectExpression"===c.type&&(c=this.transformSpreadElement(c));return $m.Visitor.prototype.accept.call(this,c,k,f)};NI.prototype.transformSpreadElement=function(c){var k=[],f=[k];c.properties.forEach(function(l){"SpreadElement"!==
l.type?(l.shorthand=!1,k.push(l)):(f.push(l),k=[],f.push(k))});if(1===f.length)return c;k.length||f.pop();return $m.funcCall.apply($m,[$m.member("Object","assign")].concat($jscomp.arrayFromIterable(f.map(function(l){return"SpreadElement"===l.type?l.argument:{properties:l,type:"ObjectExpression"}}))))};$m.ObjectSpreadTransformer=NI;$m.default=Uw;var Td=lively.FreezerRuntime.recorderFor("lively.ast/lib/transform.js");Td._node2string=function(c){return c.source||Td.stringify(c)};Td._findIndentAt=function(c,
k){var f=Td.string.peekLeft(c,k,/\s+$/);c="number"===typeof f?c.slice(f,k):"";"\n"===c[0]&&(c=c.slice(1));return c};Td._applyChanges=function(c,k){for(var f=0;f<c.length;f++){var l=c[f];if("del"===l.type)k=k.slice(0,l.pos)+k.slice(l.pos+l.length);else if("add"===l.type)k=k.slice(0,l.pos)+l.string+k.slice(l.pos);else throw Error("Unexpected change "+Td.obj.inspect(l));}return k};Td._compareNodesForReplacement=UD;Td.replaceNode=VD;Td.replaceNodes=WD;Td.replace=XD;Td.__findVarDecls=DV;Td.oneDeclaratorPerVarDecl=
YD;Td.oneDeclaratorForVarsInDestructoring=ZD;Td.returnLastStatement=$D;Td.wrapInFunction=aE;Td.wrapInStartEndCall=bE;Td.transformSingleExpression=cE;Td.arr=cf;Td.obj=xf;Td.string=Ng;Td.chain=Dn;Td.Path=Eg;Td.helpers=MI;Td.scopes=Iz;Td.topLevelDeclsAndRefs=Kz;Td.topLevelFuncDecls=Jz;Td.parse=gk;Td.fuzzyParse=Qq;Td.objectSpreadTransform=Uw;Td.varDecl=Cz;Td.memberChain=Ez;Td.id=yz;Td.exprStmt=zz;Td.funcCall=Tw;Td.returnStmt=Az;Td.tryStmt=Hz;Td.program=Gz;Td.block=Fz;Td.funcExpr=Bz;Td.stringify=Yf;Td.isProbablySingleExpressionRe=
/^\s*(\{|function\s*\()/;Td.replaceNode=VD;Td.replaceNode=VD;Td.replaceNodes=WD;Td.replaceNodes=WD;Td.replace=XD;Td.replace=XD;Td._compareNodesForReplacement=UD;Td._compareNodesForReplacement=UD;Td.oneDeclaratorPerVarDecl=YD;Td.oneDeclaratorPerVarDecl=YD;Td.oneDeclaratorForVarsInDestructoring=ZD;Td.oneDeclaratorForVarsInDestructoring=ZD;Td.returnLastStatement=$D;Td.returnLastStatement=$D;Td.wrapInFunction=aE;Td.wrapInFunction=aE;Td.wrapInStartEndCall=bE;Td.wrapInStartEndCall=bE;Td.transformSingleExpression=
cE;Td.transformSingleExpression=cE;Td.objectSpreadTransform=Uw;Td.objectSpreadTransform=Uw;var lv=Object.freeze({__proto__:null,replaceNode:VD,replaceNodes:WD,replace:XD,_compareNodesForReplacement:UD,oneDeclaratorPerVarDecl:YD,oneDeclaratorForVarsInDestructoring:ZD,returnLastStatement:$D,wrapInFunction:aE,wrapInStartEndCall:bE,transformSingleExpression:cE,objectSpreadTransform:Uw});Ka("bt",lv);var sf=lively.FreezerRuntime.recorderFor("lively.ast/lib/comments.js");sf.getCommentPrecedingNode=dE;sf.extractComments=
eE;sf.obj=xf;sf.string=Ng;sf.Path=Eg;sf.chain=Dn;sf.arr=cf;sf.fun=ik;sf.parse=gk;sf.statementOf=Mz;sf.Visitor=de;sf.stringify=Yf;sf.getCommentPrecedingNode=dE;sf.getCommentPrecedingNode=dE;sf.extractComments=eE;sf.extractComments=eE;var OI=Object.freeze({__proto__:null,getCommentPrecedingNode:dE,extractComments:eE}),tg=lively.FreezerRuntime.recorderFor("lively.ast/lib/code-categorizer.js");tg.findDecls=fE;tg.es6ClassDef=function(c){if("ClassDeclaration"!==c.type)return null;var k={type:"class-decl",
name:c.id.name,node:c,children:[]};k.children.push.apply(k.children,$jscomp.arrayFromIterable(tg.arr.compact(c.body.body.map(function(f,l){return tg.es6ClassMethod(f,k,l)}))));return[k].concat($jscomp.arrayFromIterable(k.children))};tg.es6ClassMethod=function(c,k,f){if("MethodDefinition"!==c.type)return null;var l;"constructor"===c.kind?l="class-constructor":"method"===c.kind?l=c.static?"class-class-method":"class-instance-method":"get"===c.kind?l=c.static?"class-class-getter":"class-instance-getter":
"set"===c.kind&&(l=c.static?"class-class-setter":"class-instance-setter");return"class-instance-getter"==l&&"commands"==c.key.name?tg.parseCommandsMethod(c,k,l):"class-class-getter"==l&&"properties"==c.key.name?tg.parsePropertiesMethod(c,k,l):l?{type:l,parent:k,node:c,name:c.key.name}:null};tg.parsePropertiesMethod=function(c,k,f){var l={type:f,parent:k,node:c,name:c.key.name};try{var p=[];l.node.value.body.body[0].argument.properties.forEach(function(b){p.push({type:b.type,parent:l,node:b,name:b.key?
b.key.name:b.argument.arguments[0].value})});l.children=p}finally{return l}};tg.parseCommandsMethod=function(c,k,f){var l={type:f,parent:k,node:c,name:c.key.name};try{var p=[];if(l.node.value.body.body){var b=l.node.value.body.body[0].argument.elements;b&&(b.forEach(function(d){p.push({type:d.type,parent:l,node:d,name:d.properties[0].value.value})}),l.children=p)}}finally{return l}};tg.varDefs=function(c){if("VariableDeclaration"!==c.type)return null;var k=[],f={};c=$jscomp.makeIterator(tg.withVarDeclIds(c));
for(var l=c.next();!l.done;f={$jscomp$loop$prop$def$2763:f.$jscomp$loop$prop$def$2763},l=c.next())if(l=l.value,f.$jscomp$loop$prop$def$2763={name:l.id.name,node:l.node,type:"var-decl"},k.push(f.$jscomp$loop$prop$def$2763),f.$jscomp$loop$prop$def$2763.node.init){for(l=f.$jscomp$loop$prop$def$2763.node.init;"AssignmentExpression"===l.type;)l=l.right;if("ObjectExpression"===l.type)f.$jscomp$loop$prop$def$2763.type="object-decl",f.$jscomp$loop$prop$def$2763.children=tg.objectKeyValsAsDefs(l).map(function(p){return function(b){return Object.assign({},
b,{type:"object-"+b.type,parent:p.$jscomp$loop$prop$def$2763})}}(f)),k.push.apply(k,$jscomp.arrayFromIterable(f.$jscomp$loop$prop$def$2763.children));else{if("ArrayExpression"===l.type){f.$jscomp$loop$prop$def$2763.type="array-decl";try{f.$jscomp$loop$prop$def$2763.children=tg.arrayEntriesAsDefs(l).map(function(p){return function(b){return Object.assign({},b,{type:"object-"+b.type,parent:p.$jscomp$loop$prop$def$2763})}}(f)),k.push.apply(k,$jscomp.arrayFromIterable(f.$jscomp$loop$prop$def$2763.children))}finally{continue}}if(l=
tg.someObjectExpressionCall(l,f.$jscomp$loop$prop$def$2763))f.$jscomp$loop$prop$def$2763.children=l.map(function(p){return function(b){return Object.assign({},b,{parent:p.$jscomp$loop$prop$def$2763})}}(f)),k.push.apply(k,$jscomp.arrayFromIterable(f.$jscomp$loop$prop$def$2763.children))}}return k};tg.funcDef=function(c){return"FunctionStatement"!==c.type&&"FunctionDeclaration"!==c.type||!c.id?null:[{name:c.id.name,node:c,type:"function-decl"}]};tg.someObjectExpressionCall=function(c,k){"ExpressionStatement"===
c.type&&(c=c.expression);return"CallExpression"!==c.type?null:(c=c.arguments.find(function(f){return"ObjectExpression"===f.type}))?tg.objectKeyValsAsDefs(c,k):null};tg.functionWrapper=function(c,k){if(!tg.isFunctionWrapper(c))return null;var f=tg.Path("expression.arguments.0").get(c);k=f&&"FunctionExpression"===f.type&&5<tg.string.lines(f.source||"").length?tg.findDecls(f,k):tg.findDecls(tg.Path("expression.callee").get(c),k);var l={node:c,name:tg.Path("expression.callee.id.name").get(c)};k.forEach(function(p){return p.parent||
(p.parent=l)});return k};tg.unwrapExport=function(c){return"ExportNamedDeclaration"!==c.type&&"ExportDefaultDeclaration"!==c.type||!c.declaration?c:c.declaration};tg.objectKeyValsAsDefs=function(c,k){return c.properties.map(function(f){return{name:f.key.name||f.key.value,type:"FunctionExpression"===f.value.type?"method":"property",node:f,parent:k}})};tg.arrayEntriesAsDefs=function(c,k){return c.elements.map(function(f){return{name:f.value||f.properties[0].value.value,type:f.type,node:f,parent:k}})};
tg.isFunctionWrapper=function(c){return"CallExpression"===tg.Path("expression.type").get(c)&&"FunctionExpression"===tg.Path("expression.callee.type").get(c)};tg.declIds=KL;tg.withVarDeclIds=function(c){return c.declarations.map(function(k){!k.source&&k.init&&(k.source=k.id.name+" = "+k.init.source);return{node:k,id:k.id}})};tg.parse=gk;tg.arr=cf;tg.Path=Eg;tg.string=Ng;tg.obj=xf;tg.findDecls=fE;tg.findDecls=fE;var MB=Object.freeze({__proto__:null,findDecls:fE}),Ef=lively.FreezerRuntime.recorderFor("lively.ast/index.js");
Ef.isValidIdentifier=Vw;Ef.BaseVisitor=de;Ef.BaseVisitor=de;Ef.withMozillaAstDo=jv;Ef.withMozillaAstDo=jv;Ef.printAst=IB;Ef.printAst=IB;Ef.compareAst=JB;Ef.compareAst=JB;Ef.pathToNode=KB;Ef.pathToNode=KB;Ef.rematchAstWithSource=LB;Ef.rematchAstWithSource=LB;Ef.ReplaceManyVisitor=oo;Ef.ReplaceManyVisitor=oo;Ef.ReplaceVisitor=jp;Ef.ReplaceVisitor=jp;Ef.AllNodesVisitor=lq;Ef.AllNodesVisitor=lq;Ef.parse=gk;Ef.parse=gk;Ef.parseFunction=js;Ef.parseFunction=js;Ef.fuzzyParse=Qq;Ef.fuzzyParse=Qq;Ef.acorn=
kq;Ef.walk=lo;Ef.custom=$s;Ef.stringify=Yf;Ef.escodegen=sy;Ef.escodegen=sy;Ef.escodegen=sy;Ef.acorn=kq;Ef.acorn=kq;Ef.walk=lo;Ef.walk=lo;Ef.nodes=Br;Ef.query=kp;Ef.transform=lv;Ef.comments=OI;Ef.categorizer=MB;Ef.query=kp;Ef.query=kp;Ef.transform=lv;Ef.transform=lv;Ef.comments=OI;Ef.comments=OI;Ef.categorizer=MB;Ef.categorizer=MB;Ef.stringify=Yf;Ef.stringify=Yf;Ef.nodes=Br;Ef.nodes=Br;Ef.custom=$s;Ef.custom=$s;Ef.isValidIdentifierRe=/^(?!(?:do|if|in|for|let|new|try|var|case|default|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/;
Ef.isValidIdentifier=Vw;Ef.isValidIdentifier=Vw;Ef.parse=gk;Ef.Node=Ef.parse("").constructor;Object.defineProperty(Ef.Node.prototype,"__serialize__",{configurable:!0,value:function(){return{__expr__:"("+JSON.stringify(this)+")"}}});var PI=Object.freeze({__proto__:null,BaseVisitor:de,withMozillaAstDo:jv,printAst:IB,compareAst:JB,pathToNode:KB,rematchAstWithSource:LB,ReplaceManyVisitor:oo,ReplaceVisitor:jp,AllNodesVisitor:lq,parse:gk,parseFunction:js,fuzzyParse:Qq,escodegen:sy,acorn:kq,walk:lo,query:kp,
transform:lv,comments:OI,categorizer:MB,stringify:Yf,nodes:Br,custom:$s,isValidIdentifier:Vw});Ka("aY",PI);var ug=lively.FreezerRuntime.recorderFor("lively.vm/lib/util.js");ug.getGlobal=ks;ug.signatureOf=gE;ug.isClass=LL;ug.pluck=hE;ug.printSymbol=iE;ug.safeToString=Nz;ug.printEvalResult=Oz;ug.obj=xf;ug.string=Ng;ug.getGlobal=ks;ug.getGlobal=ks;ug.signatureOf=gE;ug.signatureOf=gE;ug.isClass=LL;ug.isClass=LL;ug.pluck=hE;ug.pluck=hE;ug.knownSymbols=function(){return Object.getOwnPropertyNames(Symbol).filter(function(c){return"symbol"===
typeof Symbol[c]}).reduce(function(c,k){return c.set(Symbol[k],"Symbol."+k)},new Map)}();ug.symMatcher=/^Symbol\((.*)\)$/;ug.printSymbol=iE;ug.printSymbol=iE;ug.safeToString=Nz;ug.safeToString=Nz;ug.printEvalResult=Oz;ug.printEvalResult=Oz;var hS=function(){function c(p,b){"object"===typeof b&&(b=b.maxDepth||2);if(!p)return String(p);if("string"===typeof p)return b=p.includes("\n")?"`":'"',p=p.split("\n").slice(0,1E3).join("\n"),b+p+b;if(p instanceof Error)return p.stack||ug.safeToString(p);if(!ug.obj.isObject(p))return ug.safeToString(p);
try{var d=ug.obj.inspect(p,{customPrinter:f,maxNumberOfKeys:100,maxDepth:b,printFunctionSource:!0})}catch(h){}return"{}"===d?ug.safeToString(p):d}function k(p,b){if("string"===typeof p||Array.isArray(p)||!l||"function"!==typeof p[l])return b;var d="function"===typeof p.entries,h=d?p.entries():p[l](),a=[];b=d?"{":"[";var e=d?"}":"]";p=p.constructor&&p.constructor.name||"Iterable";for(var n=0,q;10>n;n++){q=h.next();if(q.done)break;a.push(q.value)}h=a.map(function(r){return d?String(r[0])+": "+String(r[1]):
c(r,2)}).join(", ");return p+"("+b+h+e+")"}function f(p,b,d){if(!p)return b;if("symbol"===typeof p)return ug.printSymbol(p);if("string"===typeof p)return ug.string.print(ug.string.truncate(p,100));if(p.isMorph)return ug.safeToString(p);if(p instanceof Promise)return"Promise()";if("undefined"!==typeof ug.Node&&p instanceof ug.Node||"undefined"!==typeof ug.ImageData&&p instanceof ug.ImageData)return ug.safeToString(p);var h=p.length||p.byteLength;if(void 0!==h&&10<h&&p.slice)return"["+("string"===typeof p||
p.byteLength?ug.safeToString(p.slice(0,10)):p.slice(0,10).map(d))+",...]";p=k(p,b);return p!==b?p:b}var l="undefined"!==typeof Symbol&&Symbol.iterator;return c}();ug.printInspectEvalValue=hS;ug.printInspectEvalValue=hS;ug.printInspectEvalValue=hS;var wh=lively.FreezerRuntime.recorderFor("lively.vm/lib/completions.js");wh.getObjectForCompletion=jE;wh.propertyExtract=function(c,k,f){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k).map(wh.printSymbol)).filter(function(l){return-1===
c.indexOf(l)}).map(f).filter(function(l){return!!l}).sort(function(l,p){return l.name<p.name?-1:l.name>p.name?1:0})};wh.getMethodsOf=function(c,k){return wh.propertyExtract(c,k,function(f){return k.__lookupGetter__&&k.__lookupGetter__(f)||"function"!==typeof k[f]?null:{name:f,completion:wh.signatureOf(f,k[f])}})};wh.getAttributesOf=function(c,k){return wh.propertyExtract(c,k,function(f){return k.__lookupGetter__&&!k.__lookupGetter__(f)&&"function"===typeof k[f]?null:{name:f,completion:f}})};wh.getProtoChain=
function(c){for(var k=[];c;)k.push(c),c=c.__proto__;return k};wh.getDescriptorOf=function(c,k){function f(l,p){l.length>p&&(l=l.slice(0,p)+"...");return l.replace(/\n/g,"").replace(/\s+/g," ")}if(c===k){if("function"!==typeof c)return f(wh.safeToString(c),50);k=c.toString();k=f(k.slice(k.indexOf("{")+1,k.lastIndexOf("}")),50);return wh.signatureOf(c.displayName||c.name||"function",c)+" {"+k+"}"}return(c=k.hasOwnProperty("constructor")&&k.constructor)?"string"===typeof c.type&&c.type.length?f(c.type,
50):"string"===typeof c.name&&c.name.length?f(c.name,50):"anonymous class":"prototype"};wh.getCompletionsOfObj=function(c,k){try{var f=[];var l=wh.getProtoChain(c).map(function(b){var d=wh.getDescriptorOf(c,b);b=wh.getMethodsOf(f,b).concat(wh.getAttributesOf(f,b));f=f.concat(wh.pluck(b,"name"));return[d,wh.pluck(b,"completion")]})}catch(b){var p=b}k(p,l)};wh.descriptorsOfObjAndProtoProperties=function(c){var k=[];return wh.getProtoChain(c).map(function(f){var l=wh.getDescriptorOf(c,f);f=wh.getMethodsOf(k,
f).concat(wh.getAttributesOf(k,f));k=k.concat(wh.pluck(f,"name"));return[l,wh.pluck(f,"completion")]})};wh.getCompletions=kE;wh.lang=j8;wh.signatureOf=gE;wh.pluck=hE;wh.safeToString=Nz;wh.printSymbol=iE;wh.getObjectForCompletion=jE;wh.getObjectForCompletion=jE;wh.getCompletions=kE;wh.getCompletions=kE;var NB=Object.freeze({__proto__:null,getObjectForCompletion:jE,getCompletions:kE});Ka("as",NB);var kc=lively.FreezerRuntime.recorderFor("lively.source-transform/capturing.js");kc.rewriteToCaptureTopLevelVariables=
Pz;kc.removeJspmGlobalRef=function(c){var k=!1;return kc.ReplaceVisitor.run(c,function(f){k||"VariableDeclarator"!=f.type||"_global"!=f.id.name||(k='_global = typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : global'==kc.stringify(f));return k&&"LogicalExpression"==f.type&&"_global"==f.right.name?f.left:f})};kc.transformImportMeta=function(c,k){return kc.ReplaceVisitor.run(c,function(f){return"MetaProperty"==f.type&&"import"==f.meta.name?k.classToFunction.currentModuleAccessor?
kc.nodes.objectLiteral(["url",kc.nodes.member(k.classToFunction.currentModuleAccessor,"id")]):kc.parse('({url: eval("_context").id})').body[0].expression:f})};kc.rewriteToRegisterModuleToCaptureSetters=lE;kc.clearEmptyExports=function(c,k){k=kc.topLevelDeclsAndRefs(c);k=$jscomp.makeIterator(k.scope.exportDecls);for(var f=k.next();!f.done;f=k.next())f=f.value,f.declaration||!f.specifiers||f.specifiers.length||kc.arr.remove(c.body,f);return c};kc.replaceRefs=function(c,k){var f=kc.topLevelDeclsAndRefs(c),
l=f.refs.filter(function(b){return kc.shouldRefBeCaptured(b,f,k)}),p=[];c=kc.ReplaceVisitor.run(c,function(b,d){if("Property"===b.type&&l.includes(b.key)&&b.shorthand)return kc.prop(kc.id(b.key.name),b.value);if("ExportNamedDeclaration"===b.type){d=b.declaration;var h=b.specifiers;d&&(d.id?p.push(d.id):d.declarations&&p.push.apply(p,$jscomp.arrayFromIterable(d.declarations.map(function(a){return a.id}))));h&&h.forEach(function(a){return p.push(a.local)});return b}return"AssignmentExpression"===b.type&&
l.includes(b.left)&&k.declarationWrapper?Object.assign({},b,{right:kc.declarationWrapperCall(k.declarationWrapper,null,kc.literal(b.left.name),kc.literal("assignment"),b.right,k.captureObj,k)}):b});return kc.ReplaceVisitor.run(c,function(b,d,h){return l.includes(b)&&!p.includes(b)?kc.member(k.captureObj,b):b})};kc.replaceVarDecls=function(c,k){var f=kc.topLevelDeclsAndRefs(c);return kc.ReplaceManyVisitor.run(c,function(l){if(!f.varDecls.includes(l)||l.declarations.every(function(n){return!kc.shouldDeclBeCaptured(n,
k)}))return l;for(var p=[],b=0;b<l.declarations.length;b++){var d=l.declarations[b];if(kc.shouldDeclBeCaptured(d,k)){var h=d.init||{operator:"||",type:"LogicalExpression",left:{computed:!1,object:k.captureObj,property:d.id,type:"MemberExpression"},right:{name:"undefined",type:"Identifier"}};h=k.declarationWrapper&&d.id.name?kc.declarationWrapperCall(k.declarationWrapper,d,kc.literal(d.id.name),kc.literal(l.kind),h,k.captureObj,k):h;if(d.id.type.includes("Pattern")){var a=kc.generateUniqueName(f.declaredNames,
"destructured_1"),e={type:"Identifier",name:a};d=kc.transformPattern(d.id,{parent:e,declaredNames:f.declaredNames}).map(function(n){return n[kc.annotationSym]&&n[kc.annotationSym].capture?kc.assignExpr(k.captureObj,n.declarations[0].id,k.declarationWrapper?kc.declarationWrapperCall(k.declarationWrapper,null,kc.literal(n.declarations[0].id.name),kc.literal(l.kind),n.declarations[0].init,k.captureObj,k):n.declarations[0].init,!1):n});f.declaredNames.push(a);p.push.apply(p,$jscomp.arrayFromIterable([kc.varDecl(e,
h,l.kind)].concat(d)))}else p.push(kc.assignExpr(k.captureObj,d.id,h,!1)),k.keepTopLevelVarDecls&&p.push(kc.varDecl(d.id,kc.member(k.captureObj,d.id)))}else p.push({type:"VariableDeclaration",kind:l.kind||"var",declarations:[d]})}return p})};kc.generateUniqueName=function(c,k){for(var f=1;-1<c.indexOf(k);){if(1E3<f)throw Error("Endless loop searching for unique variable "+k);k=k.replace(/_[0-9]+$|$/,"_"+ ++f)}return k};kc.additionalIgnoredDecls=function(c,k){k=kc.topLevelDeclsAndRefs(c);for(var f=
[],l=0;l<k.scope.varDecls.length;l++){var p=k.scope.varDecls[l],b=kc.Path(k.scope.varDeclPaths[l]).slice(0,-1).get(c);"ForStatement"!==b.type&&"ForInStatement"!==b.type&&"ForOfStatement"!==b.type&&"ExportNamedDeclaration"!==b.type||f.push.apply(f,$jscomp.arrayFromIterable(p.declarations))}return k.scope.catches.map(function(d){return d.name}).concat(f.map(function(d){return d.id.name}))};kc.additionalIgnoredRefs=function(c,k){k=kc.topLevelDeclsAndRefs(c);for(var f=[],l=0;l<k.scope.varDecls.length;l++){var p=
k.scope.varDecls[l],b=kc.Path(k.scope.varDeclPaths[l]).slice(0,-1).get(c);"ForStatement"!==b.type&&"ForInStatement"!==b.type&&"ForOfStatement"!==b.type||f.push.apply(f,$jscomp.arrayFromIterable(p.declarations))}return k.scope.catches.map(function(d){return d.name}).concat(kc.queryHelpers.declIds(f.map(function(d){return d.id})).map(function(d){return d.name}))};kc.shouldDeclBeCaptured=function(c,k){return-1===k.excludeDecls.indexOf(c.id.name)&&(!k.includeDecls||-1<k.includeDecls.indexOf(c.id.name))};
kc.shouldRefBeCaptured=function(c,k,f){if(k.scope.importSpecifiers.includes(c))return!1;for(var l=0;l<k.scope.exportDecls.length;l++){var p=k.scope.exportDecls[l];if(p.declarations&&p.declarations.includes(c)||p.declaration===c)return!1}return f.excludeRefs.includes(c.name)||f.includeRefs&&!f.includeRefs.includes(c.name)?!1:!0};kc.replaceClassDecls=function(c,k){if(k.classToFunction)return k.classToFunction.transform(c,k.classToFunction);var f=kc.topLevelDeclsAndRefs(c);if(!f.classDecls.length)return c;
for(var l=c.body.length-1;0<=l;l--){var p=c.body[l];p.id&&f.classDecls.includes(p)&&c.body.splice(l+1,0,kc.assignExpr(k.captureObj,p.id,p.id,!1))}return c};kc.splitExportDeclarations=function(c,k){k=c.body;for(var f=c.body=[],l=0;l<k.length;l++){var p=k[l];if("ExportNamedDeclaration"!==p.type||!p.declaration||"VariableDeclaration"!==p.declaration.type||1>=p.declaration.declarations.length)f.push(p);else for(var b=p.declaration.declarations,d=0;d<b.length;d++)f.push({type:"ExportNamedDeclaration",
specifiers:[],declaration:kc.varDecl(b[d].id,b[d].init,p.declaration.kind)})}return c};kc.insertCapturesForExportedImports=Qz;kc.insertCapturesForExportDeclarations=function(c,k){for(var f=[],l=0;l<c.body.length;l++){var p=c.body[l];f.push(p);if(("ExportNamedDeclaration"===p.type||"ExportDefaultDeclaration"===p.type)&&p.declaration)if("ExportDefaultDeclaration"===p.type&&"Literal"===p.declaration.type){var b=p.declaration,d=kc.generateUniqueName(kc.topLevelDeclsAndRefs(c).declaredNames,"$"+b.raw.split('"').join(""));
p.declaration=kc.id(d);kc.arr.pushAt(f,kc.assignExpr(k.captureObj,d,b.raw,!1),f.indexOf(p))}else p.declaration.declarations?f.push.apply(f,$jscomp.arrayFromIterable(p.declaration.declarations.map(function(h){var a=h.id;k.declarationWrapper&&(h.init.callee&&h.init.callee.name===k.declarationWrapper.name||(a=kc.declarationWrapperCall(k.declarationWrapper,h,kc.literal(h.id.name),kc.literal("assignment"),h.id,k.captureObj,k)));return kc.assignExpr(k.captureObj,h.id,a,!1)}))):"FunctionDeclaration"!==p.declaration.type&&
"ClassDeclaration"===p.declaration.type&&f.push(kc.assignExpr(k.captureObj,p.declaration.id,p.declaration.id,!1))}c.body=f;return c};kc.insertCapturesForImportDeclarations=function(c,k){c.body=c.body.reduce(function(f,l){return f.concat("ImportDeclaration"===l.type&&l.specifiers.length?[l].concat(l.specifiers.map(function(p){return kc.assignExpr(k.captureObj,p.local,p.local,!1)})):[l])},[]);return c};kc.insertDeclarationsForExports=function(c,k){for(var f=kc.topLevelDeclsAndRefs(c),l=[],p=0;p<c.body.length;p++){var b=
c.body[p];k.classToFunction&&"ExportDefaultDeclaration"===b.type&&b.declaration&&!b.declaration.type.includes("Declaration")&&("Identifier"===b.declaration.type||b.declaration.id)?l=l.concat([kc.varDeclOrAssignment(c,{type:"VariableDeclarator",id:b.declaration,init:kc.member(k.captureObj,b.declaration)}),b]):"ExportNamedDeclaration"!==b.type||!b.specifiers.length||b.source?l.push(b):l=l.concat(b.specifiers.map(function(d){return f.declaredNames.includes(d.local.name)?null:kc.varDeclOrAssignment(c,
{type:"VariableDeclarator",id:d.local,init:kc.member(k.captureObj,d.local)})}).filter(Boolean)).concat(b)}c.body=l;return c};kc.fixDefaultAsyncFunctionExportForRegeneratorBug=function(c,k){k=[];for(var f=0;f<c.body.length;f++){var l=c.body[f];"ExportDefaultDeclaration"===l.type&&"FunctionDeclaration"===l.declaration.type&&l.declaration.id&&l.declaration.async&&(k.push(l.declaration),l.declaration={type:"Identifier",name:l.declaration.id.name});k.push(l)}c.body=k;return c};kc.es6ModuleTransforms=function(c,
k){c.body=c.body.reduce(function(f,l){if("ExportNamedDeclaration"===l.type)if(l.source){var p=d=l.source;var b=l.specifiers.map(function(h){return{type:"ExpressionStatement",expression:kc.exportFromImport({type:"Literal",value:h.exported.name},{type:"Literal",value:h.local.name},d,k.moduleExportFunc,k.moduleImportFunc)}})}else b=l.declaration?(b=l.declaration.declarations)?b.map(function(h){k.excludeDecls.push(h.id);return kc.varDecl(h.id,kc.assignExpr(k.captureObj,h.id,k.declarationWrapper?kc.declarationWrapperCall(k.declarationWrapper,
null,kc.literal(h.id.name),kc.literal(l.declaration.kind),h,k.captureObj,k):h.init,!1),l.declaration.kind)}).concat(b.map(function(h){return kc.exportCallStmt(k.moduleExportFunc,h.id.name,h.id)})):[l.declaration].concat(kc.exportCallStmt(k.moduleExportFunc,l.declaration.id.name,l.declaration.id)):l.specifiers.map(function(h){return kc.exportCallStmt(k.moduleExportFunc,h.exported.name,kc.shouldDeclBeCaptured({id:h.local},k)?kc.member(k.captureObj,h.local):h.local)});else if("ExportDefaultDeclaration"===
l.type)b=l.declaration&&l.declaration.id?[l.declaration].concat(kc.exportCallStmt(k.moduleExportFunc,"default",l.declaration.id)):[kc.exportCallStmt(k.moduleExportFunc,"default",l.declaration)];else if("ExportAllDeclaration"===l.type){p={name:k.es6ExportFuncId+"__iterator__",type:"Identifier"};var d=l.source;b=[{type:"ForInStatement",body:{type:"ExpressionStatement",expression:kc.exportFromImport(p,p,d,k.moduleExportFunc,k.moduleImportFunc)},left:{type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",
id:p,init:null}]},right:kc.importCall(null,d,k.moduleImportFunc)}];k.excludeRefs.push(p.name);k.excludeDecls.push(p.name)}else b="ImportDeclaration"===l.type?l.specifiers.length?l.specifiers.map(function(h){return kc.varDeclAndImportCall(c,h.local,"ImportSpecifier"===h.type&&h.imported.name||"ImportDefaultSpecifier"===h.type&&"default"||null,l.source,k.moduleImportFunc)}):kc.importCallStmt(null,l.source,k.moduleImportFunc):[l];return f.concat(b)},[]);return c};kc.putFunctionDeclsInFront=function(c,
k){var f=kc.topLevelDeclsAndRefs(c).scope,l=f.funcDecls;if(!l.length)return c;for(var p=[],b=l.length;b--;){var d=l[b];if(d.id&&kc.shouldDeclBeCaptured(d,k)){var h=f.funcDeclPaths[b].slice(0,-1),a=kc.Path(h).get(f.node);h={type:"Identifier",name:d.id.name};var e=k.declarationWrapper?kc.declarationWrapperCall(k.declarationWrapper,d,kc.literal(h.name),kc.literal("function"),h,k.captureObj,k):h,n=Object.assign({},d);Array.isArray(a)?a.splice(a.indexOf(d),1,kc.exprStmt(d.id)):"ExportNamedDeclaration"===
a.type?(a=f.node.body.indexOf(a),-1<a&&f.node.body.splice(a,1,{type:"ExportNamedDeclaration",specifiers:[{type:"ExportSpecifier",exported:d.id,local:d.id}]})):"ExportDefaultDeclaration"===a.type&&(a.declaration=d.id);p.unshift(kc.assignExpr(k.captureObj,h,e,!1));p.unshift(n)}}c.body=p.concat(c.body);return c};kc.computeDefRanges=function(c,k){c=kc.topLevelDeclsAndRefs(c);return kc.chain(c.scope.varDecls).pluck("declarations").flatten().value().concat(c.scope.funcDecls.filter(function(f){return f.id})).reduce(function(f,
l){f[l.id.name]||(f[l.id.name]=[]);f[l.id.name].push({type:l.type,start:l.start,end:l.end});return f},{})};kc.transformPattern=function(c,k){return"ArrayPattern"===c.type?kc.transformArrayPattern(c,k):"ObjectPattern"===c.type?kc.transformObjectPattern(c,k):[]};kc.transformArrayPattern=function(c,k){for(var f=k.declaredNames,l=kc.annotationSym,p=[],b=0;b<c.elements.length;b++){var d=c.elements[b];if("Identifier"===d.type)d=kc.varDecl(d,kc.member(k.parent,kc.id(b),!0)),d[l]={capture:!0},p.push(d);else if("RestElement"===
d.type)d=kc.varDecl(d.argument,{type:"CallExpression",arguments:[{type:"Literal",value:b}],callee:kc.member(k.parent,kc.id("slice"),!1)}),d[l]={capture:!0},p.push(d);else if("AssignmentPattern"==d.type)d=kc.varDecl(d.left,kc.conditional(kc.binaryExpr(kc.member(k.parent,kc.id(b),!0),"===",kc.id("undefined")),d.right,kc.member(k.parent,kc.id(b),!0))),d[l]={capture:!0},p.push(d);else{var h=kc.id(kc.generateUniqueName(f,k.parent.name+"$"+b)),a=kc.varDecl(h,kc.member(k.parent,b));f.push(h.name);p.push(a);
p.push.apply(p,$jscomp.arrayFromIterable(kc.transformPattern(d,{parent:h,declaredNames:f})))}}return p};kc.transformObjectPattern=function(c,k){for(var f=k.declaredNames,l=kc.annotationSym,p=[],b=0;b<c.properties.length;b++){var d=c.properties[b];if("RestElement"==d.type){var h=c.properties.map(function(n){return n.key&&n.key.name}).filter(Boolean),a=kc.nodes.varDecl(d.argument.name,kc.nodes.objectLiteral([])),e=kc.nodes.varDecl(d.argument.name,kc.id(d.argument.name));d=kc.nodes.exprStmt(kc.nodes.funcCall(kc.nodes.funcExpr({},
[],kc.nodes.forIn("__key",k.parent,kc.nodes.block.apply(kc.nodes,[].concat($jscomp.arrayFromIterable(h.length?h.map(function(n){return kc.nodes.ifStmt(kc.nodes.binaryExpr(kc.nodes.id("__key"),"===",kc.nodes.literal(n)),{type:"ContinueStatement",label:null},null)}):[]),[kc.nodes.exprStmt(kc.nodes.assign(kc.nodes.member(d.argument.name,kc.nodes.id("__key"),!0),kc.nodes.member(k.parent,kc.nodes.id("__key"),!0)))]))))));e[l]={capture:!0};p.push(a,e,d)}else"Identifier"==d.value.type?(a=kc.varDecl(d.value,
kc.member(k.parent,d.key)),a[l]={capture:!0},p.push(a)):"AssignmentPattern"==d.value.type?(a=kc.varDecl(d.value.left,kc.conditional(kc.binaryExpr(kc.member(k.parent,d.key),"===",kc.id("undefined")),d.value.right,kc.member(k.parent,d.key))),a[l]={capture:!0},p.push(a)):(a=kc.id(kc.generateUniqueName(f,k.parent.name+"$"+d.key.name)),e=kc.varDecl(a,kc.member(k.parent,d.key)),e[l]={capture:!1},f.push(a.name),p.push.apply(p,$jscomp.arrayFromIterable([e].concat(kc.transformPattern(d.value,{parent:a,declaredNames:f})))))}return p};
kc.varDeclOrAssignment=function(c,k,f){return-1<kc.topLevelDeclsAndRefs(c).declaredNames.indexOf(k.id.name)?kc.exprStmt(kc.assign(k.id,k.init)):{declarations:[k],kind:f||"var",type:"VariableDeclaration"}};kc.assignExpr=function(c,k,f,l){return kc.exprStmt(kc.assign(kc.member(c,k,l),f||kc.id("undefined")))};kc.exportFromImport=function(c,k,f,l,p){return kc.exportCall(l,c,kc.importCall(k,f,p))};kc.varDeclAndImportCall=function(c,k,f,l,p){return kc.varDecl(k,kc.importCall(f,l,p))};kc.importCall=function(c,
k,f){"string"===typeof c&&(c=kc.literal(c));return{arguments:[k].concat(c||[]),callee:f,type:"CallExpression"}};kc.importCallStmt=function(c,k,f){return kc.exprStmt(kc.importCall(c,k,f))};kc.exportCall=function(c,k,f){"string"===typeof k&&(k=kc.literal(k));f=kc.obj.deepCopy(f);return kc.funcCall(c,k,f)};kc.exportCallStmt=function(c,k,f){return kc.exprStmt(kc.exportCall(c,k,f))};kc.declarationWrapperCall=function(c,k,f,l,p,b,d){if(k){var h=[],a=!1;if(k["x-lively-object-meta"]){a=k["x-lively-object-meta"];
k=a.start;var e=a.end,n=a.evalId,q=a.sourceAccessorName;a=!0;h.push("start",kc.nodes.literal(k),"end",kc.nodes.literal(e))}void 0===n&&d.hasOwnProperty("evalId")&&(n=d.evalId,a=!0);void 0===q&&d.hasOwnProperty("sourceAccessorName")&&(q=d.sourceAccessorName,a=!0);void 0!==n&&h.push("evalId",kc.nodes.literal(n));q&&h.push("moduleSource",kc.nodes.id(q));if(a)return kc.funcCall(c,f,l,p,b,kc.nodes.objectLiteral(h))}return kc.funcCall(c,f,l,p,b)};kc.obj=xf;kc.string=Ng;kc.chain=Dn;kc.arr=cf;kc.fun=ik;kc.Path=
Eg;kc.parse=gk;kc.stringify=Yf;kc.query=kp;kc.transform=lv;kc.nodes=Br;kc.Visitor=de;kc.ReplaceManyVisitor=oo;kc.ReplaceVisitor=jp;var mq=kc.nodes;kc.member=mq.member;kc.prop=mq.prop;kc.varDecl=mq.varDecl;kc.assign=mq.assign;kc.id=mq.id;kc.literal=mq.literal;kc.exprStmt=mq.exprStmt;kc.conditional=mq.conditional;kc.binaryExpr=mq.binaryExpr;kc.funcCall=mq.funcCall;var z8=kc.query;kc.topLevelDeclsAndRefs=z8.topLevelDeclsAndRefs;kc.queryHelpers=z8.helpers;var A8=kc.transform;kc.transformSingleExpression=
A8.transformSingleExpression;kc.wrapInStartEndCall=A8.wrapInStartEndCall;kc.rewriteToCaptureTopLevelVariables=Pz;kc.rewriteToCaptureTopLevelVariables=Pz;kc.rewriteToRegisterModuleToCaptureSetters=lE;kc.rewriteToRegisterModuleToCaptureSetters=lE;kc.insertCapturesForExportedImports=Qz;kc.insertCapturesForExportedImports=Qz;kc.annotationSym=Symbol("lively.ast-destructuring-transform");var OB=Object.freeze({__proto__:null,rewriteToCaptureTopLevelVariables:Pz,rewriteToRegisterModuleToCaptureSetters:lE,
insertCapturesForExportedImports:Qz}),B8={__esModule:!0,default:function(){return{manipulateOptions:function(c,k){k.plugins.push("jsx")}}}},Gma=B8=B8["default"],Hma={},C8=Hma=Array.isArray,QI="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,D8={};D8="object"==typeof QI&&QI&&QI.Object===Object&&QI;var Ima={},Jma="object"==typeof self&&self&&self.Object===Object&&self,mv=Ima=D8||Jma||Function("return this")(),Kma={},RI=Kma=mv.Symbol,Lma={},E8=Object.prototype,Mma=E8.hasOwnProperty,
Nma=E8.toString,PB=RI?RI.toStringTag:void 0,Oma=Lma=function(c){var k=Mma.call(c,PB),f=c[PB];try{c[PB]=void 0;var l=!0}catch(b){}var p=Nma.call(c);l&&(k?c[PB]=f:delete c[PB]);return p},F8={},Pma=Object.prototype.toString;F8=function(c){return Pma.call(c)};var Qma={},Rma=F8,G8=RI?RI.toStringTag:void 0,iS=Qma=function(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":G8&&G8 in Object(c)?Oma(c):Rma(c)},Sma={},jS=Sma=function(c){return null!=c&&"object"==typeof c},Tma={},Uma=Tma=function(c){return"string"==
typeof c||!C8(c)&&jS(c)&&"[object String]"==iS(c)},Vma={},kS=Vma=function(c){return c},Wma={},Xma=Wma=function(c){return"symbol"==typeof c||jS(c)&&"[object Symbol]"==iS(c)},Yma={},ty=Yma=function(c){var k=typeof c;return null!=c&&("object"==k||"function"==k)},Zma={},$ma=Zma=function(c){if(!ty(c))return!1;c=iS(c);return"[object Function]"==c||"[object GeneratorFunction]"==c||"[object AsyncFunction]"==c||"[object Proxy]"==c},H8={};H8=mv["__core-js_shared__"];var ana={},lS=H8,I8=function(){var c=/[^.]+$/.exec(lS&&
lS.keys&&lS.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),bna=ana=function(c){return!!I8&&I8 in c},J8={},cna=Function.prototype.toString;J8=function(c){if(null!=c){try{return cna.call(c)}catch(k){}return c+""}return""};var dna={},ena=J8,fna=/^\[object .+?Constructor\]$/,gna=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hna=dna=function(c){return!ty(c)||
bna(c)?!1:($ma(c)?gna:fna).test(ena(c))},K8={};K8=function(c,k){return null==c?void 0:c[k]};var ina={},jna=K8,L8=ina=function(c,k){c=jna(c,k);return hna(c)?c:void 0},kna={},M8=kna=function(){try{var c=L8(Object,"defineProperty");c({},"",{});return c}catch(k){}}(),lna={},N8=lna=function(c,k){var f=-1,l=c.length;for(k||(k=Array(l));++f<l;)k[f]=c[f];return k},mna={},O8=Object.create,mS=mna=function(){function c(){}return function(k){if(!ty(k))return{};if(O8)return O8(k);c.prototype=k;k=new c;c.prototype=
void 0;return k}}(),nna={},ona=/^(?:0|[1-9]\d*)$/,pna=nna=function(c,k){var f=typeof c;k=null==k?9007199254740991:k;return!!k&&("number"==f||"symbol"!=f&&ona.test(c))&&-1<c&&0==c%1&&c<k},qna={},P8=qna=function(c,k,f){switch(f.length){case 0:return c.call(k);case 1:return c.call(k,f[0]);case 2:return c.call(k,f[0],f[1]);case 3:return c.call(k,f[0],f[1],f[2])}return c.apply(k,f)},Q8={};Q8=function(c){return function(){return c}};var rna={},sna=Q8,tna=rna=M8?function(c,k){return M8(c,"toString",{configurable:!0,
enumerable:!1,value:sna(k),writable:!0})}:kS,una={},vna=Date.now,R8=una=function(c){var k=0,f=0;return function(){var l=vna(),p=16-(l-f);f=l;if(0<p){if(800<=++k)return arguments[0]}else k=0;return c.apply(void 0,arguments)}},wna={},xna=wna=R8(tna),yna={},S8=yna=L8(mv,"WeakMap"),zna={},Ana=zna=function(c,k){for(var f=-1,l=null==c?0:c.length;++f<l&&!1!==k(c[f],f,c););return c},T8={},Bna=/\s/;T8=function(c){for(var k=c.length;k--&&Bna.test(c.charAt(k)););return k};var U8={},Cna=T8,Dna=/^\s+/;U8=function(c){return c?
c.slice(0,Cna(c)+1).replace(Dna,""):c};var Ena={},Fna=U8,V8=0/0,Gna=/^[-+]0x[0-9a-f]+$/i,Hna=/^0b[01]+$/i,Ina=/^0o[0-7]+$/i,Jna=parseInt,Kna=Ena=function(c){if("number"==typeof c)return c;if(Xma(c))return V8;ty(c)&&(c="function"==typeof c.valueOf?c.valueOf():c,c=ty(c)?c+"":c);if("string"!=typeof c)return 0===c?c:+c;c=Fna(c);var k=Hna.test(c);return k||Ina.test(c)?Jna(c.slice(2),k?2:8):Gna.test(c)?V8:+c},Lna={},Mna=Lna=function(c,k,f,l){var p=c.length;for(f+=l?1:-1;l?f--:++f<p;)if(k(c[f],f,c))return f;
return-1},W8={},X8=1/0;W8=function(c){if(!c)return 0===c?c:0;c=Kna(c);return c===X8||c===-X8?1.7976931348623157E308*(0>c?-1:1):c===c?c:0};var Nna={},Ona=W8,Y8=Nna=function(c){c=Ona(c);var k=c%1;return c===c?k?c-k:c:0},Pna={},Qna=Pna=function(c){return c!==c},Z8={};Z8=function(c,k,f){--f;for(var l=c.length;++f<l;)if(c[f]===k)return f;return-1};var $8={},Rna=Z8;$8=function(c,k,f){return k===k?Rna(c,k,f):Mna(c,Qna,f)};var Sna={},Tna=$8,Una=Sna=function(c,k){return!(null==c||!c.length)&&-1<Tna(c,k,0)},
Vna={},Wna=Vna=function(){},Xna={},nS=Xna=function(){},hu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Yna={};ML.prototype=mS(nS.prototype);var oS=Yna=ML.prototype.constructor=ML,Rz="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Zna={};NL.prototype=mS(nS.prototype);var a9=Zna=NL.prototype.constructor=NL,b9={};b9=function(c){if(c instanceof oS)return c.clone();var k=new a9(c.__wrapped__,c.__chain__);k.__actions__=N8(c.__actions__);
k.__index__=c.__index__;k.__values__=c.__values__;return k};var $na={},Hda=oS,EV=a9,Gda=C8,Fda=jS,Jda=b9,Ida=Object.prototype.hasOwnProperty;OL.prototype=nS.prototype;var aoa=$na=OL.prototype.constructor=OL,boa={},SI=boa=S8&&new S8,coa={},c9=coa=SI?function(c){return SI.get(c)}:Wna,d9={};d9={};var e9={},f9=d9,doa=Object.prototype.hasOwnProperty;e9=function(c){for(var k=c.name+"",f=f9[k],l=doa.call(f9,k)?f.length:0;l--;){var p=f[l],b=p.func;if(null==b||b==c)return p.name}return k};var eoa={},foa=e9,
goa=eoa=function(c){var k=foa(c),f=aoa[k];if("function"!=typeof f||!(k in oS.prototype))return!1;if(c===f)return!0;k=c9(f);return!!k&&c===k[0]},hoa={},g9=hoa=SI?function(c,k){SI.set(c,k);return c}:kS,ioa={},TI=ioa=function(c){return function(){var k=arguments;switch(k.length){case 0:return new c;case 1:return new c(k[0]);case 2:return new c(k[0],k[1]);case 3:return new c(k[0],k[1],k[2]);case 4:return new c(k[0],k[1],k[2],k[3]);case 5:return new c(k[0],k[1],k[2],k[3],k[4]);case 6:return new c(k[0],
k[1],k[2],k[3],k[4],k[5]);case 7:return new c(k[0],k[1],k[2],k[3],k[4],k[5],k[6])}var f=mS(c.prototype);k=c.apply(f,k);return ty(k)?k:f}},UI="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,joa={},koa=joa=function(c,k,f){function l(){return((this||UI)&&(this||UI)!==mv&&(this||UI)instanceof l?b:c).apply(p?f:this||UI,arguments)}var p=k&1,b=TI(c);return l},loa={},moa=Math.max,h9=loa=function(c,k,f,l){var p=-1,b=c.length,d=f.length,h=-1,a=k.length,e=moa(b-d,0),n=Array(a+
e);for(l=!l;++h<a;)n[h]=k[h];for(;++p<d;)if(l||p<b)n[f[p]]=c[p];for(;e--;)n[h++]=c[p++];return n},noa={},ooa=Math.max,i9=noa=function(c,k,f,l){var p=-1,b=c.length,d=-1,h=f.length,a=-1,e=k.length,n=ooa(b-h,0),q=Array(n+e);for(l=!l;++p<n;)q[p]=c[p];for(n=p;++a<e;)q[n+a]=k[a];for(;++d<h;)if(l||p<b)q[n+f[d]]=c[p++];return q},poa={},qoa=poa=function(c,k){for(var f=c.length,l=0;f--;)c[f]===k&&++l;return l},roa={},j9=roa=R8(g9),soa={},toa=/\{\n\/\* \[wrapped with (.+)\] \*/,uoa=/,? & /,voa=soa=function(c){return(c=
c.match(toa))?c[1].split(uoa):[]},woa={},xoa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,yoa=woa=function(c,k){var f=k.length;if(!f)return c;var l=f-1;k[l]=(1<f?"& ":"")+k[l];k=k.join(2<f?", ":" ");return c.replace(xoa,"{\n/* [wrapped with "+k+"] */\n")},k9={},zoa=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];k9=function(c,k){Ana(zoa,function(f){var l="_."+f[0];k&f[1]&&!Una(c,l)&&c.push(l)});return c.sort()};var Aoa=
{},Boa=k9,l9=Aoa=function(c,k,f){k+="";return xna(c,yoa(k,Boa(voa(k),f)))},Coa={},m9=Coa=function(c,k,f,l,p,b,d,h,a,e){var n=k&8;k=(k|(n?32:64))&~(n?64:32);k&4||(k&=-4);p=[c,k,p,n?b:void 0,n?d:void 0,n?void 0:b,n?void 0:d,h,a,e];f=f.apply(void 0,p);goa(c)&&j9(f,p);f.placeholder=l;return l9(f,c,k)},Doa={},n9=Doa=function(c){return c.placeholder},Eoa={},Foa=Math.min,Goa=Eoa=function(c,k){for(var f=c.length,l=Foa(k.length,f),p=N8(c);l--;){var b=k[l];c[l]=pna(b,f)?p[b]:void 0}return c},Hoa={},VI=Hoa=
function(c,k){for(var f=-1,l=c.length,p=0,b=[];++f<l;){var d=c[f];if(d===k||"__lodash_placeholder__"===d)c[f]="__lodash_placeholder__",b[p++]=f}return b},mE="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Ioa={},Mda=h9,Nda=i9,Lda=qoa,GV=TI,Pda=m9,Kda=n9,Qda=Goa,Oda=VI,Rda=mv,o9=Ioa=FV,WI="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Joa={},Koa=Joa=function(c,k,f){function l(){for(var b=arguments.length,d=Array(b),h=b,a=n9(l);h--;)d[h]=
arguments[h];h=3>b&&d[0]!==a&&d[b-1]!==a?[]:VI(d,a);b-=h.length;return b<f?m9(c,k,o9,l.placeholder,void 0,d,h,void 0,void 0,f-b):P8((this||WI)&&(this||WI)!==mv&&(this||WI)instanceof l?p:c,this||WI,d)}var p=TI(c);return l},XI="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Loa={},Moa=Loa=function(c,k,f,l){function p(){for(var h=-1,a=arguments.length,e=-1,n=l.length,q=Array(n+a),r=(this||XI)&&(this||XI)!==mv&&(this||XI)instanceof p?d:c;++e<n;)q[e]=l[e];for(;a--;)q[e++]=
arguments[++h];return P8(r,b?f:this||XI,q)}var b=k&1,d=TI(c);return p},p9={},Noa=Math.min;p9=function(c,k){var f=c[1],l=k[1],p=f|l,b=128==l&&8==f||128==l&&256==f&&c[7].length<=k[8]||384==l&&k[7].length<=k[8]&&8==f;if(!(131>p||b))return c;l&1&&(c[2]=k[2],p|=f&1?0:4);if(f=k[3])b=c[3],c[3]=b?h9(b,f,k[4]):f,c[4]=b?VI(c[3],"__lodash_placeholder__"):k[4];if(f=k[5])b=c[5],c[5]=b?i9(b,f,k[6]):f,c[6]=b?VI(c[5],"__lodash_placeholder__"):k[6];(f=k[7])&&(c[7]=f);l&128&&(c[8]=null==c[8]?k[8]:Noa(c[8],k[8]));null==
c[9]&&(c[9]=k[9]);c[0]=k[0];c[1]=p;return c};var q9={},Ooa=p9,r9=Math.max;q9=function(c,k,f,l,p,b,d,h){var a=k&2;if(!a&&"function"!=typeof c)throw new TypeError("Expected a function");var e=l?l.length:0;e||(k&=-97,l=p=void 0);d=void 0===d?d:r9(Y8(d),0);h=void 0===h?h:Y8(h);e-=p?p.length:0;if(k&64){var n=l,q=p;l=p=void 0}var r=a?void 0:c9(c);b=[c,k,f,l,p,n,q,b,d,h];r&&Ooa(b,r);c=b[0];k=b[1];f=b[2];l=b[3];p=b[4];h=b[9]=void 0===b[9]?a?0:c.length:r9(b[9]-e,0);!h&&k&24&&(k&=-25);f=k&&1!=k?8==k||16==k?
Koa(c,k,h):32!=k&&33!=k||p.length?o9.apply(void 0,b):Moa(c,k,f,l):koa(c,k,f);return l9((r?g9:j9)(f,b),c,k)};var Poa={},Qoa=q9,Roa=Poa=function(c,k,f){k=f?void 0:k;k=c&&null==k?c.length:k;return Qoa(c,128,void 0,void 0,void 0,void 0,k)},pS={};Object.defineProperty(pS,"__esModule",{value:!0});pS.default=function(c){var k=c.types,f=function(p){return function(b){var d=p[b.type];if(d)return d(b);throw Error(b.type+" could not be transformed");}},l=function(p,b){var d=b.opts;b=d.useNew;var h=void 0===
b?!1:b;b=d.module;var a=d.function;d=d.useVariables;var e=void 0===d?!1:d,n=d=void 0;!0===e?d=/^[A-Z]/:(0,Soa.default)(e)&&(d=new RegExp(e));var q=h?k.newExpression:k.callExpression;n=function(r){return function(v){return q(r,[v])}};b?(h=p.scope.generateUidIdentifier(h?"JSXNode":"jsx"),n=n(h),b=k.importDeclaration([k.importDefaultSpecifier(h)],k.stringLiteral(b)),p.findParent(function(r){return r.isProgram()}).unshiftContainer("body",b)):a?(p=a.split(".").map((0,s9.default)(k.identifier,1)).reduce((0,
s9.default)(k.memberExpression,2)),n=n(p)):n=Toa.default;return{variablesRegex:d,jsxObjectTransformer:n}};return{inherits:Gma,visitor:{JSXElement:function(p,b){b.get("jsxConfig")||b.set("jsxConfig",l(p,b));var d=b.get("jsxConfig"),h=d.variablesRegex,a=d.jsxObjectTransformer,e=function(K){return k.stringLiteral(K.name)},n=function(K){return k.stringLiteral(K.namespace.name+":"+K.name.name)},q=f({JSXIdentifier:function(K){return k.identifier(K.name)},JSXMemberExpression:function(K){return k.memberExpression(q(K.object),
q(K.property))}}),r=f({JSXIdentifier:h?function(K){return h.test(K.name)?k.identifier(K.name):e(K)}:e,JSXNamespacedName:n,JSXMemberExpression:q});d=function(K){return K.expression};var v=f({JSXIdentifier:e,JSXNamespacedName:n,JSXMemberExpression:q}),y=f({StringLiteral:function(K){return K},JSXExpressionContainer:d}),D=function(K){var P=[],N=[];K.forEach(function(aa){switch(aa.type){case "JSXAttribute":P||(P=[]);var m=v(aa.name);m=Uoa.default.keyword.isIdentifierNameES6(m.value)?k.identifier(m.value):
m;P.push(k.objectProperty(m,y(aa.value)));break;case "JSXSpreadAttribute":P&&(N.push(k.objectExpression(P)),P=null);N.push(aa.argument);break;default:throw Error(aa.type+" cannot be used as a JSX attribute");}});P&&0<P.length&&N.push(k.objectExpression(P));return 0===N.length?k.objectExpression([]):1===N.length?N[0]:k.callExpression(b.addHelper("extends"),N)};n=function(K){return a(k.objectExpression([k.objectProperty(k.identifier(Voa),r(K.openingElement.name)),k.objectProperty(k.identifier(Woa),
D(K.openingElement.attributes)),k.objectProperty(k.identifier(Xoa),K.closingElement?I(K.children):k.nullLiteral())]))};var E=f({JSXText:function(K){if(b.opts.noTrim)return k.stringLiteral(K.value);K=K.value.replace(/\n\s*/g,"");return""===K?null:k.stringLiteral(K)},JSXElement:n,JSXExpressionContainer:d}),I=function(K){return k.arrayExpression(K.map(E).filter(Boolean).reduce(function(P,N){var aa=0<P.length?P[P.length-1]:null;return"StringLiteral"===N.type&&aa&&"StringLiteral"===aa.type?[].concat(HV(P.slice(0,
-1)),[k.stringLiteral(aa.value+N.value)]):[].concat(HV(P),[N])},[]))};p.replaceWith(n(p.node))}}}};var Soa=nE(Uma),Toa=nE(kS),s9=nE(Roa),Uoa=nE(BB),Voa="elementName",Woa="attributes",Xoa="children",at={};Object.defineProperty(at,"__esModule",{value:!0});at.declare=function(c){return function(k,f,l){for(var p,b,d=$jscomp.makeIterator(Object.keys(t9)),h=d.next();!h.done;h=d.next())if(h=h.value,!k[h]){if(null==b){b=k;var a=null;"string"===typeof b.version&&/^7\./.test(b.version)&&(a=Object.getPrototypeOf(b),
!a||Object.prototype.hasOwnProperty.call(a,"version")&&Object.prototype.hasOwnProperty.call(a,"transform")&&Object.prototype.hasOwnProperty.call(a,"template")&&Object.prototype.hasOwnProperty.call(a,"types")||(a=null));b=Object.assign({},a,b)}b[h]=t9[h](b)}return c(null!=(p=b)?p:k,f||{},l)}};var t9={assertVersion:function(c){return function(k){var f=c.version;if("number"===typeof k){if(!Number.isInteger(k))throw Error("Expected string or integer value.");k="^"+k+".0.0-0"}if("string"!==typeof k)throw Error("Expected string or integer value.");
var l=Error.stackTraceLimit;"number"===typeof l&&25>l&&(Error.stackTraceLimit=25);var p="7."===f.slice(0,2)?Error('Requires Babel "^7.0.0-beta.41", but was loaded with "'+f+"\". You'll need to update your @babel/core version."):Error('Requires Babel "'+k+'", but was loaded with "'+f+'". If you are sure you have a compatible version of @babel/core, it is likely that something in your build process is loading the wrong version. Inspect the stack trace of this error to look for the first entry that doesn\'t mention "@babel/core" or "babel-core" to see what is calling Babel.');
"number"===typeof l&&(Error.stackTraceLimit=l);throw Object.assign(p,{code:"BABEL_VERSION_UNSUPPORTED",version:f,range:k});}},targets:function(){return function(){return{}}},assumption:function(){return function(){}}},u9=Object.freeze({__proto__:null,"default":at,__esModule:at.__esModule,declare:at.declare}),uy={};Object.defineProperty(uy,"__esModule",{value:!0});uy.default=void 0;var Yoa=(0,at.declare)(function(c){c.assertVersion(7);return{name:"syntax-optional-catch-binding",manipulateOptions:function(k,
f){f.plugins.push("optionalCatchBinding")}}});uy.default=Yoa;var v9=Object.freeze({__proto__:null,"default":uy,__esModule:uy.__esModule}),Zoa="default"in u9?at:u9,$oa="default"in v9?uy:v9,YI={};Object.defineProperty(YI,"__esModule",{value:!0});YI.default=void 0;var apa=(0,Zoa.declare)(function(c){c.assertVersion(7);return{name:"proposal-optional-catch-binding",inherits:$oa.default,visitor:{CatchClause:function(k){if(!k.node.param){var f=k.scope.generateUidIdentifier("unused");k.get("param").replaceWith(f)}}}}});
YI.default=apa;var ZI={};Object.defineProperty(ZI,"__esModule",{value:!0});ZI.default=void 0;var bpa=(0,at.declare)(function(c){c.assertVersion(7);return{name:"syntax-import-meta",manipulateOptions:function(k,f){f.plugins.push("importMeta")}}});ZI.default=bpa;var jh=lively.FreezerRuntime.recorderFor("lively.source-transform/index.js");jh.ensureJSXPlugin=function(){jh.transformJSX&&("undefined"===typeof jh.babel||jh.babel.availablePlugins["transform-jsx"]||(lively||global.lively).FreezerRuntime||jh.babel.registerPlugin("transform-jsx",
jh.transformJSX.default))};jh.ensureOptionalCatchBinding=function(){jh.catchBinding&&("undefined"===typeof jh.babel||jh.babel.availablePlugins["optional-catch-binding"]||(lively||global.lively).FreezerRuntime||jh.babel.registerPlugin("optional-catch-binding",jh.catchBinding.default))};jh.ensureImportMeta=function(){jh.importMeta&&("undefined"===typeof jh.babel||jh.babel.availablePlugins["syntax-import-meta"]||(lively||global.lively).FreezerRuntime||jh.babel.registerPlugin("syntax-import-meta",jh.importMeta.default))};
jh.stringifyFunctionWithoutToplevelRecorder=Ww;jh.es5Transpilation=Xw;jh.capturing=OB;jh.capturing=OB;jh.capturing=OB;jh.parseFunction=js;jh.stringify=Yf;jh.ReplaceVisitor=jp;jh.transformJSX=pS;jh.catchBinding=YI;jh.importMeta=ZI;jh.stringifyFunctionWithoutToplevelRecorder=Ww;jh.stringifyFunctionWithoutToplevelRecorder=Ww;jh.es5Transpilation=Xw;jh.es5Transpilation=Xw;var cpa=Object.freeze({__proto__:null,capturing:OB,stringifyFunctionWithoutToplevelRecorder:Ww,es5Transpilation:Xw}),Sf=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-support.js");
Sf.processInlineCodeTransformOptions=function(c,k){if(!c.comments)return k;c=c.comments.find(function(l){return l.text.startsWith("lively.vm ")});if(!c)return k;try{var f=eval("inlineOptions = {"+c.text.slice(10)+"};");return Object.assign(k,f)}catch(l){return k}};Sf.evalCodeTransform=ls;Sf.evalCodeTransformOfSystemRegisterSetters=iu;Sf.copyProperties=function(c,k,f){f=void 0===f?[]:f;Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c)).forEach(function(l){return-1===f.indexOf(l)&&
Object.defineProperty(k,l,Object.getOwnPropertyDescriptor(c,l))})};Sf.arr=cf;Sf.Path=Eg;Sf.parse=gk;Sf.stringify=Yf;Sf.transform=lv;Sf.query=kp;Sf.nodes=Br;Sf.capturing=OB;Sf.es5Transpilation=Xw;Sf.getGlobal=ks;var $I=Sf.nodes;Sf.id=$I.id;Sf.literal=$I.literal;Sf.member=$I.member;Sf.objectLiteral=$I.objectLiteral;Sf.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Sf.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Sf.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";
Sf.defaultClassToFunctionConverterName="initializeES6ClassForLively";Sf.defaultClassToFunctionConverterName="initializeES6ClassForLively";Sf.defaultClassToFunctionConverterName="initializeES6ClassForLively";Sf.evalCodeTransform=ls;Sf.evalCodeTransform=ls;Sf.evalCodeTransformOfSystemRegisterSetters=iu;Sf.evalCodeTransformOfSystemRegisterSetters=iu;var kg=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval.js");kg._normalizeEvalOptions=function(c){c||(c={});c=Object.assign({targetModule:null,sourceURL:c.targetModule,
runtime:null,context:kg.getGlobal(),varRecorderName:kg.defaultTopLevelVarRecorderName,dontTransform:[],recordGlobals:null,returnPromise:!0,promiseTimeout:200,waitForPromise:!0,wrapInStartEndCall:!1,onStartEval:null,onEndEval:null},c);if(c.targetModule){var k=c.runtime&&c.runtime.modules&&c.runtime.modules[c.targetModule];k&&(c=Object.assign(c,k))}c.wrapInStartEndCall&&(c.startFuncNode={type:"MemberExpression",object:{type:"Identifier",name:c.varRecorderName},property:{type:"Literal",value:kg.startEvalFunctionName},
computed:!0},c.endFuncNode={type:"MemberExpression",object:{type:"Identifier",name:c.varRecorderName},property:{type:"Literal",value:kg.endEvalFunctionName},computed:!0});return c};kg.runEval=Sz;kg.finishEval=function(c,k,f,l,p,b,d){l.wrapInStartEndCall&&(delete p[kg.startEvalFunctionName],delete p[kg.endEvalFunctionName]);c?(f.isError=!0,f.value=c):f.value=k;f.value instanceof Promise&&(f.isPromise=!0);if(l.sync){if(f.processSync(l),"function"===typeof l.onEndEval)l.onEndEval(c,k)}else f.process(l).then(function(){"function"===
typeof d&&d(null,f);"function"===typeof l.onEndEval&&l.onEndEval(c,k);return f},function(h){"function"===typeof d&&d(h,void 0);"function"===typeof l.onEndEval&&l.onEndEval(h,void 0);return f}).then(b.resolve,b.reject)};kg.syncEval=oE;kg.tryToWaitForPromise=function(c,k){console.assert(c.isPromise,"no promise in tryToWaitForPromise???");var f={},l=new Promise(function(p){return setTimeout(p,k,f)});return Promise.race([l,c.value]).then(function(p){return Object.assign(c,p!==f?{promiseStatus:"fulfilled",
promisedValue:p}:{promiseStatus:"pending"})}).catch(function(p){return Object.assign(c,{promiseStatus:"rejected",promisedValue:p})})};kg.arr=cf;kg.obj=xf;kg.string=Ng;kg.Path=Eg;kg.promise=bg;kg.Closure=Gi;kg.evalCodeTransform=ls;kg.printEvalResult=Oz;kg.getGlobal=ks;kg.defaultTopLevelVarRecorderName="__lvVarRecorder";kg.startEvalFunctionName="lively.vm-on-eval-start";kg.endEvalFunctionName="lively.vm-on-eval-end";kg._eval=kg.Closure.fromSource("function _eval(__lvEvalStatement, __lvVarRecorder/*needed as arg for capturing*/, __lvOriginalCode) {\n  return eval(__lvEvalStatement);\n}").getFunc();
var QB=function(){this.isEvalResult=!0;this.value=void 0;this.warnings=[];this.isPromise=this.isError=!1;this.promisedValue=void 0;this.promiseStatus="unknown"};QB.prototype.addWarning=function(c){this.warnings.push(c);return c};QB.prototype.printed=function(c){c=void 0===c?{}:c;this.value=kg.printEvalResult(this,c)};QB.prototype.processSync=function(c){if(c.inspect||c.asString)this.value=this.print(this.value,c);return this};QB.prototype.process=function(c){var k=this;if(k.isPromise&&c.waitForPromise)return kg.tryToWaitForPromise(k,
c.promiseTimeout).then(function(){(c.inspect||c.asString)&&k.printed(c);return k});(c.inspect||c.asString)&&k.printed(c);return Promise.resolve(k)};kg.EvalResult=QB;var vy=kg.defaultTopLevelVarRecorderName;kg.defaultTopLevelVarRecorderName=vy;kg.defaultTopLevelVarRecorderName=vy;kg.getGlobal=ks;kg.getGlobal=ks;kg.runEval=Sz;kg.runEval=Sz;kg.syncEval=oE;kg.syncEval=oE;var dpa=Object.freeze({__proto__:null,defaultTopLevelVarRecorderName:vy,getGlobal:ks,runEval:Sz,syncEval:oE}),gh=lively.FreezerRuntime.recorderFor("lively.vm/lib/esm-eval.js");
gh.ensureImportsAreImported=function(c,k,f){var l,p,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(l=gh.parse(k),p=l.body,b=p.filter(function(h){return"ImportDeclaration"===h.type}),d.yield(Promise.all(b.map(function(h){return c.normalize(h.source.value,f).then(function(a){h.source.value=a;return c.get(a)||c.import(a)})})).catch(function(h){console.error("Error ensuring imports: "+h.message);throw h;}),2)):d.return(gh.stringify(l))})};gh.hasUnimportedImports=
function(c,k,f){k=gh.parse(k).body.filter(function(l){return"ImportDeclaration"===l.type});return 0<gh.arr.uniq(k.map(function(l){return l.source.value})).filter(Boolean).filter(function(l){return!c.get(c.decanonicalize(l,f))}).length};gh.babelTranspilerForAsyncAwaitCode=function(c,k,f,l){return function(p,b){b=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:f,code:!0,ast:!1},b);p=k.transform("(async function(__rec) {\n"+p+"\n}).call(this);",b).code;return p=p.replace(/\}\)\.call\(undefined\);$/,
"}).call(this)")}};gh.babelPluginTranspilerForAsyncAwaitCode=function(c,k,f,l){return function(p,b){var d=c.babelOptions||{},h=[];h.push(k.presetES2015);d.stage3&&h.push({plugins:k.pluginsStage3});d.stage2&&h.push({plugins:k.pluginsStage2});d.stage1&&h.push({plugins:k.pluginsStage1});b=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:f,babelrc:!1,presets:h,moduleIds:!1,code:!0,ast:!1},b);p=k.babel.transform("(async function(__rec) {\n"+p+"\n}).call(this);",b).code;return p=p.replace(/\}\)\.call\(undefined\);$/,
"}).call(this)")}};gh.getEs6Transpiler=function(c,k,f){if(k.transpiler)return k.transpiler;if(!k.es6Transpile)return null;if("babel"===c.transpiler){var l=c.global[c.transpiler]||c.get(c.decanonicalize(c.transpiler));return l?gh.babelTranspilerForAsyncAwaitCode(c,l,k.targetModule,f):c.import(c.transpiler).then(function(d){return gh.babelTranspilerForAsyncAwaitCode(c,d,k.targetModule,f)})}if("plugin-babel"===c.transpiler){l=c.decanonicalize("plugin-babel").split("/").slice(0,-1).concat("systemjs-babel-browser.js").join("/");
var p=c.get(l);return p?gh.babelPluginTranspilerForAsyncAwaitCode(c,p,k.targetModule,f):c.import(l).then(function(d){return gh.babelPluginTranspilerForAsyncAwaitCode(c,d,k.targetModule,f)})}if("lively.transpiler"===c.transpiler){var b=new (c.get(c.decanonicalize("lively.transpiler")).default)(c,k.targetModule,f);return function(d,h){return b.transpileDoit(d,h)}}throw Error("Sorry, currently only babel is supported as es6 transpiler for runEval!");};gh.runEval=ju;gh.evalEnd=function(c,k,f,l){c.get("@lively-env").evaluationEnd(f.targetModule);
c.debug&&console.log("[lively.module] runEval in module "+f.targetModule+" done");gh.emit("lively.vm/doitresult",{code:k,result:l,waitForPromise:f.waitForPromise,targetModule:f.targetModule},Date.now(),c);return l};gh.parse=gk;gh.nodes=Br;gh.stringify=Yf;gh.emit=Rq;var aJ=gh.nodes;gh.funcCall=aJ.funcCall;gh.member=aJ.member;gh.id=aJ.id;gh.literal=aJ.literal;gh.arr=cf;gh.vmRunEval=Sz;gh.runEval=ju;gh.runEval=ju;var epa=Object.freeze({__proto__:null,runEval:ju}),Si=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-strategies.js");
Si.obj=xf;var wy=function(){};wy.prototype.runEval=function(c,k){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(Promise.reject("runEval(source, options) not yet implemented for "+f.constructor.name))})};wy.prototype.keysOfObject=function(c,k){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(Promise.reject("keysOfObject(prefix, options) not yet implemented for "+f.constructor.name))})};Si.EvalStrategy=wy;var nv=function(){return Si.EvalStrategy.apply(this,
arguments)||this};$jscomp.inherits(nv,Si.EvalStrategy);nv.prototype.runEval=function(c,k){return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.return(Promise.resolve().then(function(){try{return Promise.resolve({value:eval(c)})}catch(l){return{isError:!0,value:l}}}))})};nv.prototype.keysOfObject=function(c,k){var f=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(lively.vm.completions.getCompletions(function(b){return f.runEval(b,
k)},c),2);l=p.yieldResult;return p.return({completions:l.completions,prefix:l.startLetters})})};Si.SimpleEvalStrategy=nv;var bt=function(){return Si.EvalStrategy.apply(this,arguments)||this};$jscomp.inherits(bt,Si.EvalStrategy);bt.prototype.normalizeOptions=function(c){if(!c.targetModule)throw Error("runEval called but options.targetModule not specified!");return Object.assign({sourceURL:c.targetModule+"_doit_"+Date.now()},c)};bt.prototype.runEval=function(c,k){var f=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){k=
f.normalizeOptions(k);l=k.System||lively.modules.System;p={};l.config({meta:(p[k.targetModule]={format:"esm"},p)});return b.return(lively.vm.runEval(c,k))})};bt.prototype.keysOfObject=function(c,k){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(lively.vm.completions.getCompletions(function(p){return lively.vm.runEval(p,k)},c),2);f=l.yieldResult;return l.return({completions:f.completions,prefix:f.startLetters})})};Si.LivelyVmEvalStrategy=bt;
var ct=function(){return Si.LivelyVmEvalStrategy.apply(this,arguments)||this};$jscomp.inherits(ct,Si.LivelyVmEvalStrategy);ct.prototype.sourceForRemote=function(c,k,f){var l=Si.obj.isString(f.context)?f.context:!1;f=Si.obj.dissoc(f,["systemInterface","System","context","classTransform"]);return"\n(function() {\n  var arg = "+JSON.stringify(k)+",\n      options = "+JSON.stringify(f)+';\n  if (typeof lively === "undefined" || !lively.vm) {\n    return Promise.resolve({\n      isEvalResult: true,\n      isError: true,\n      value: \'lively.vm not available!\'\n    });\n  }\n  var hasSystem = typeof System !== "undefined"\n  options.context = '+
l+';\n  options.classTransform = lively.classes.classToFunctionTransform;\n  if (!options.context) {\n    options.context = hasSystem\n      ? System.global\n      : typeof window !== "undefined"\n          ? window\n          : typeof global !== "undefined"\n              ? global\n              : typeof self !== "undefined" ? self : this;\n  }\n  async function evalFunction(source, options) {\n    if (hasSystem) {\n      var conf = {meta: {}}; conf.meta[options.targetModule] = {format: "esm"};\n      System.config(conf);\n    } else {\n      options = Object.assign({topLevelVarRecorderName: "GLOBAL"}, options);\n      delete options.targetModule;\n    }\n    let res = await lively.vm.runEval(source, options);\n    try {\n       JSON.stringify(res.value);\n    } catch(e) {\n       res.value = String(res.value);\n    }\n    return res;\n  }\n  function keysOfObjectFunction(prefix, options) {\n    return lively.vm.completions.getCompletions(code => evalFunction(code, options), prefix)\n      .then(result => ({isEvalResult: true, completions: result.completions, prefix: result.startLetters}));\n  }\n  return '+
("eval"===c?"evalFunction":"keysOfObjectFunction")+"(arg, options)\n    .catch(err => ({isEvalResult: true, isError: true, value: String(err.stack || err)}));\n})();\n"};ct.prototype.runEval=function(c,k){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(f.remoteEval(f.sourceForRemote("eval",c,k),k))})};ct.prototype.keysOfObject=function(c,k){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(f.remoteEval(f.sourceForRemote("keysOfObject",
c,k),k))})};ct.prototype.remoteEval=function(c,k){var f=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.setCatchFinallyBlocks(2),b.yield(f.basicRemoteEval(c,k),4);if(2!=b.nextAddress)return l=b.yieldResult,b.return("string"===typeof l?JSON.parse(l):l);p=b.enterCatchBlock();return b.return({isError:!0,value:"Remote eval failed: "+(l||p)})})};ct.prototype.basicRemoteEval=function(c,k){return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){throw Error("Not yet implemented");
})};Si.RemoteEvalStrategy=ct;var nq=function(c){var k=Si.RemoteEvalStrategy.call(this)||this;k.url=c||k.constructor.defaultURL;return k};$jscomp.inherits(nq,Si.RemoteEvalStrategy);nq.prototype.normalizeOptions=function(c){c=Si.RemoteEvalStrategy.prototype.normalizeOptions.call(this,c);return Object.assign({serverEvalURL:this.url},c,{context:null})};nq.prototype.basicRemoteEval=function(c,k){var f=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){return 1==p.nextAddress?(k=f.normalizeOptions(k),
l="basicRemoteEval_"+(System.get("@system-env").node?"node":"web"),p.yield(f[l]({method:"POST",body:c},k.serverEvalURL),2)):p.return(p.yieldResult)})};nq.prototype.basicRemoteEval_web=function(c,k){var f,l,p,b,d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:f=$jscomp.makeIterator(k.match(/[^:]+:\/\/[^\/]+/)||[k]);l=f.next().value;p=System.get("@system-env").worker?window.location:document.location;if(b=p.origin!==l)c.headers=Object.assign({},c.headers,
{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":k}),k=p.origin;a.setCatchFinallyBlocks(2);return a.yield(window.fetch(k,c),4);case 4:d=a.yieldResult;a.leaveTryBlock(3);break;case 2:throw h=a.enterCatchBlock(),Error("Cannot reach server at "+k+": "+h.message);case 3:if(!d.ok)throw Error("Server at "+k+": "+d.statusText);return a.return(d.text())}})};nq.prototype.basicRemoteEval_node=function(c,k){var f,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){f=System._nodeRequire("url").parse;
l=System._nodeRequire(k.startsWith("https:")?"https":"http");p=Object.assign({method:c.method||"GET"},f(k));return b.return(new Promise(function(d,h){var a=l.request(p,function(e){e.setEncoding("utf8");var n="";e.on("data",function(q){return n+=q});e.on("end",function(){return d(n)});e.on("error",function(q){return h(q)})});a.on("error",function(e){return h(e)});a.end(c.body)}))})};$jscomp.global.Object.defineProperties(nq,{defaultURL:{configurable:!0,enumerable:!0,get:function(){return"http://localhost:3000/lively"}}});
Si.HttpEvalStrategy=nq;var xy=function(c,k){var f=Si.RemoteEvalStrategy.call(this)||this;f.l2lClient=c;f.targetId=k;return f};$jscomp.inherits(xy,Si.RemoteEvalStrategy);xy.prototype.basicRemoteEval=function(c,k){var f=this,l,p,b,d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return l=f,p=l.l2lClient,b=l.targetId,a.yield(p.sendToAndWait(b,"remote-eval",{source:c},{ackTimeout:k.ackTimeout||3500}),2);d=a.yieldResult;(h=d.data)&&h.value&&h.value.isEvalResult&&(h=
h.value);return a.return(h)})};Si.L2LEvalStrategy=xy;Si.EvalStrategy=wy;Si.EvalStrategy=wy;Si.SimpleEvalStrategy=nv;Si.SimpleEvalStrategy=nv;Si.LivelyVmEvalStrategy=bt;Si.LivelyVmEvalStrategy=bt;Si.HttpEvalStrategy=nq;Si.HttpEvalStrategy=nq;Si.L2LEvalStrategy=xy;Si.L2LEvalStrategy=xy;var RB=Object.freeze({__proto__:null,RemoteEvalStrategy:ct,EvalStrategy:wy,SimpleEvalStrategy:nv,LivelyVmEvalStrategy:bt,HttpEvalStrategy:nq,L2LEvalStrategy:xy});Ka("bw",RB);var yj=lively.FreezerRuntime.recorderFor("lively.vm/index.js");
yj.runEval=Zw;yj.syncEval=Uz;yj.completions=NB;yj.completions=NB;yj.completions=NB;yj.globalEval=dpa;yj.esmEval=epa;yj.defaultTopLevelVarRecorderName=vy;yj.defaultTopLevelVarRecorderName=vy;yj.defaultClassToFunctionConverterName="initializeES6ClassForLively";yj.defaultClassToFunctionConverterName="initializeES6ClassForLively";yj.evalCodeTransform=ls;yj.evalCodeTransform=ls;yj.evalCodeTransformOfSystemRegisterSetters=iu;yj.evalCodeTransformOfSystemRegisterSetters=iu;yj.runEval=Zw;yj.runEval=Zw;yj.syncEval=
Uz;yj.syncEval=Uz;yj.evalStrategies=RB;yj.evalStrategies=RB;yj.evalStrategies=RB;var w9=Object.freeze({__proto__:null,completions:NB,defaultTopLevelVarRecorderName:vy,defaultClassToFunctionConverterName:"initializeES6ClassForLively",evalCodeTransform:ls,evalCodeTransformOfSystemRegisterSetters:iu,runEval:Zw,syncEval:Uz,evalStrategies:RB});Ka("bv",w9);var Ph=lively.FreezerRuntime.recorderFor("lively.classes/source-descriptors.js");Ph.string=Ng;Ph.arr=cf;Ph.parse=gk;Ph.query=kp;Ph.runEval=Zw;Ph.objMetaSym=
Symbol.for("lively-object-meta");Ph.moduleSym=Symbol.for("lively-module-meta");Ph.descriptorCache=new Map;var yy=function(c,k){c&&k?this.update(k,c):this.reset()};yy.prototype.reset=function(){this._sourceLocation=null;this._source="";this._ast=null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};yy.prototype.update=function(c,k){this._moduleSource===c&&k&&this._sourceLocation&&k.start===this._sourceLocation.start&&k.end===this._sourceLocation.end||
(this.reset(),this._moduleSource=c,this._sourceLocation=k)};yy.prototype.changeSource=function(c){var k=this.moduleSource,f=this.sourceLocation,l=f.start;f=f.end;k=k.slice(0,l)+c+k.slice(f);this.update(k,{start:l,end:l+c.length});this._source=c;return this};yy.prototype.toString=function(){var c=Ph.string.truncate(this._source||"NO SOURCE",35).replace(/\n/g,"");return this.constructor.name+"("+c+")"};$jscomp.global.Object.defineProperties(yy.prototype,{sourceLocation:{configurable:!0,enumerable:!0,
get:function(){if(!this._sourceLocation)throw Error("_sourceLocation not defined");return this._sourceLocation}},moduleSource:{configurable:!0,enumerable:!0,get:function(){if(!this._moduleSource)throw Error("_moduleSource not defined!");return this._moduleSource}},moduleAst:{configurable:!0,enumerable:!0,get:function(){return this._moduleAst||(this._moduleAst=Ph.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){return this._moduleScope||(this._moduleScope=
Ph.query.topLevelDeclsAndRefs(this.ast).scope)}},moduleImports:{configurable:!0,enumerable:!0,get:function(){return this._moduleImports||(this._moduleImports=Ph.query.imports(this.moduleScope))}},ast:{configurable:!0,enumerable:!0,get:function(){if(this._ast)return this._ast;var c=Ph.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===c.type&&(c=c.expression);return this._ast=c}},source:{configurable:!0,enumerable:!0,get:function(){if(this._source)return this._source;var c=this.sourceLocation;
return this._source=this.moduleSource.slice(c.start,c.end)}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var c=this.ast,k=Ph.query.topLevelDeclsAndRefs(this.moduleAst).declaredNames,f=Ph.arr.uniq(this.moduleImports.map(function(p){return p.local})),l=Ph.arr.withoutAll(k,f);c=Ph.arr.withoutAll(Ph.query.findGlobalVarRefs(c).map(function(p){return p.name}),
k);return this._declaredAndUndeclaredNames={declaredNames:k,declaredImports:f,localDeclaredNames:l,undeclaredNames:c}}}});Ph.SourceDescriptor=yy;var Sm=function(c,k){this.obj=c;this.System=k;this.reset()};Sm.forObjectWithModuleSource=function(c,k,f){c=this.for(c,f);c.ensureSourceDescriptor(c.sourceLocation,k);return c};Sm.for=function(c,k){var f=Ph.descriptorCache.get(c);f||(f=new this(c,k),Ph.descriptorCache.set(c,f));return f};Sm.prototype.reset=function(){this._source="";this._ast=this._sourceLocation=
null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};Sm.prototype.resetIfChanged=function(){var c=this.meta.moduleSource;this._moduleSource&&c&&this._moduleSource!==c&&this.reset()};Sm.prototype.changeSourceSync=function(c){var k=this.System;this._basicChangeSource(c);this.module.changeSource(this.moduleSource,{doSave:!0});c=Ph.runEval(c,{sync:!0,targetModule:this.module.id,System:k});if(c.isError)throw c.value;return this};Sm.prototype.changeSource=
function(c){var k=this,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){return 1==p.nextAddress?(f=k,l=f.module,p.yield(l.changeSourceAction(function(b){if(b!==k.moduleSource)throw Error("source of module "+l.id+" and source of "+k+" don't match");k._basicChangeSource(c);return k.moduleSource}),2)):p.return(k)})};Sm.prototype._modifiedSource=function(c){var k=this.moduleSource,f=this.sourceLocation,l=f.start;f=f.end;return{moduleSource:k.slice(0,l)+c+k.slice(f),sourceLocation:{start:l,
end:l+c.length}}};Sm.prototype._renamedSource=function(c){var k=this.ast,f=k.type,l=k.id;k=l.start;l=l.end;if("ClassDeclaration"!==f)throw Error("Don't know how to rename "+f);return this._modifiedSource(this.source.slice(0,k)+c+this.source.slice(l))};Sm.prototype._basicChangeSource=function(c){var k=this.meta,f=this._modifiedSource(c),l=f.moduleSource;f=f.sourceLocation;this.reset();this.meta=Object.assign({},k,{moduleSource:l},f);this._sourceLocation=f;this._moduleSource=l;this._source=c;return this};
Sm.prototype.toString=function(){var c=Ph.string.truncate(this.source||String(this.obj),35).replace(/\n/g,"");try{var k=this.module.shortName()}catch(f){k="NO MODULE!"}return this.constructor.name+"("+c+" in "+k+")"};$jscomp.global.Object.defineProperties(Sm.prototype,{System:{configurable:!0,enumerable:!0,get:function(){return this._System||System},set:function(c){this._System=c}},module:{configurable:!0,enumerable:!0,get:function(){var c=this.obj,k=this.System;if(!c[Ph.moduleSym])throw Error("runtime object of source descriptor has no module data");
var f=c[Ph.moduleSym];c=f.package.name;f=f.pathInPackage;c=f.includes("://")?f:c+"/"+f;k=this.System._scripting.module(k,c);k._frozenModule||k._source||!this.moduleSource||k.setSource(this.moduleSource);return k}},meta:{configurable:!0,enumerable:!0,get:function(){var c=this.obj;if(!c[Ph.objMetaSym])throw Error("runtime object of source descriptor has no lively meta data");return c[Ph.objMetaSym]},set:function(c){this.obj[Ph.objMetaSym]=c;c.hasOwnProperty("start")&&c.hasOwnProperty("end")&&(this._sourceLocation=
{start:c.start,end:c.end});c.hasOwnProperty("moduleSource")&&(this._moduleSource=c.moduleSource)}},sourceLocation:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._sourceLocation)return this._sourceLocation;var c=this.meta,k=c.start;c=c.end;if(void 0===k||void 0===c)throw Error("lively meta data has no start/end");return this._sourceLocation={start:k,end:c}}},moduleSource:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._moduleSource)return this._moduleSource;
var c=this.meta.moduleSource;if(void 0===c)throw Error("lively meta data has no moduleSource");return this._moduleSource=c}},moduleAst:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleAst||(this._moduleAst=Ph.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleScope||(this._moduleScope=Ph.query.topLevelDeclsAndRefs(this.moduleAst).scope)}},moduleImports:{configurable:!0,
enumerable:!0,get:function(){this.resetIfChanged();return this._moduleImports||(this._moduleImports=Ph.query.imports(this.moduleScope))}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var c=this.ast,k=Ph.query.topLevelDeclsAndRefs(this.moduleAst,{jslintGlobalComment:!0}).declaredNames,f=Ph.arr.uniq(this.moduleImports.map(function(p){return p.local})),l=Ph.arr.withoutAll(k,f);
c=Ph.arr.withoutAll(Ph.query.findGlobalVarRefs(c).map(function(p){return p.name}),k);return this._declaredAndUndeclaredNames={declaredNames:k,declaredImports:f,localDeclaredNames:l,undeclaredNames:c}}},source:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._source)return this._source;var c=this.sourceLocation;return this._source=this.moduleSource.slice(c.start,c.end)}},ast:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._ast)return this._ast;
var c=Ph.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===c.type&&(c=c.expression);return this._ast=c}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},name:{configurable:!0,enumerable:!0,get:function(){if("ClassDeclaration"===this.type){var c=this.ast.id;return this.source.slice(c.start,c.end)}return"unknown"}}});Ka("D",Sm);Ph.RuntimeSourceDescriptor=Sm;var Me=lively.FreezerRuntime.recorderFor("lively.classes/util.js");Me.superclasses=QL;Me.getClassHierarchy=
qE;Me.withSuperclasses=rE;Me.inheritsFrom=RL;Me.changeClass=SL;Me.isClass=TL;Me.isOverridden=function(c,k){for(;c!=Object;)if(c=c[Symbol.for("lively-instance-superclass")],c.prototype.hasOwnProperty(k))return!0;return!1};Me.lexicalClassMembers=UL;Me.runtimeClassMembers=VL;Me.runtimeClassMembersInProtoChain=function(c){return Me.arr.uniq(Me.arr.flatmap(Me.arr.without(Me.withSuperclasses(c),Object),function(k){return Me.runtimeClassMembers(k)}))};Me.runtimeNonStaticMembers=function(c){var k=c.prototype,
f=Me.obj.getOwnPropertyDescriptors(k);return Me.arr.withoutAll(Object.keys(f),["constructor"]).map(function(l){var p=f[l],b="function"===typeof p.value?"method":"get"in p?"get":"set"in p?"set":"unknown";return{static:!1,name:l,value:"method"===b?p.value:"get"===b?p.get:"set"===b?p.set:null,kind:b,owner:k}})};Me.runtimeNonstaticClassMembersInProtoChain=function(c){return Me.arr.uniq(Me.arr.flatmap(Me.arr.without(Me.withSuperclasses(c),Object),function(k){return Me.runtimeNonStaticMembers(k)}))};Me.runtimeStaticClassMembers=
WL;Me.runtimeStaticClassMembersInProtoChain=XL;Me.arr=cf;Me.obj=xf;Me.Path=Eg;Me.RuntimeSourceDescriptor=Sm;Me.superclasses=QL;Me.superclasses=QL;var bJ=Symbol.for("lively-instance-initialize");Me.initializeSymbol=bJ;Me.initializeSymbol=bJ;Me.initializeSymbol=bJ;var qS=Symbol.for("lively-instance-restorer");Me.instanceRestorerSymbol=qS;Me.instanceRestorerSymbol=qS;Me.instanceRestorerSymbol=qS;var cJ=Symbol.for("lively-instance-superclass");Me.superclassSymbol=cJ;Me.superclassSymbol=cJ;Me.superclassSymbol=
cJ;var dJ=Symbol.for("lively-module-meta");Me.moduleMetaSymbol=dJ;Me.moduleMetaSymbol=dJ;Me.moduleMetaSymbol=dJ;var eJ=Symbol.for("lively-object-meta");Me.objMetaSymbol=eJ;Me.objMetaSymbol=eJ;Me.objMetaSymbol=eJ;var fJ=Symbol.for("lively-klass-changes-subscriber");Me.moduleSubscribeToToplevelChangesSym=fJ;Me.moduleSubscribeToToplevelChangesSym=fJ;Me.moduleSubscribeToToplevelChangesSym=fJ;Me.getClassHierarchy=qE;Me.getClassHierarchy=qE;Me.withSuperclasses=rE;Me.withSuperclasses=rE;Me.inheritsFrom=
RL;Me.inheritsFrom=RL;Me.changeClass=SL;Me.changeClass=SL;Me.isClass=TL;Me.isClass=TL;Me.lexicalClassMembers=UL;Me.lexicalClassMembers=UL;Me.runtimeClassMembers=VL;Me.runtimeClassMembers=VL;Me.runtimeStaticClassMembers=WL;Me.runtimeStaticClassMembers=WL;Me.runtimeStaticClassMembersInProtoChain=XL;Me.runtimeStaticClassMembersInProtoChain=XL;var rS=Ka("F",function(){function c(d){return d.replace(b,function(h,a){return a[a.length-1].toUpperCase()})}var k="break case catch class const continue debugger default delete do else enum export extends false finally for function if implements import in instanceof interface let new null package private protected public return static switch super this throw true try typeof undefined var void while with yield".split(" "),
f={"~":"_tilde_","`":"_backtick_","!":"_exclamationmark_","@":"_at_","#":"_pound_","%":"_percent_","^":"_carat_","&":"_amperstand_","*":"_asterisk_","(":"_leftparen_",")":"_rightparen_","+":"_plus_","=":"_equals_","{":"_leftcurly_","}":"_rightcurly_","[":"_leftsquare_","]":"_rightsquare_","|":"_pipe_","-":"_dash_","\\":"_backslash_",'"':"_doublequote_","'":"_singlequote_",":":"_colon_",";":"_semicolon_","<":"_leftangle_",">":"_rightangle_",",":"_comma_",".":"_period_","?":"_questionmark_","/":"_forwardslash_",
"\t":"_tab_","\n":"_newline_","\r":"_carriagereturn_"},l={0:"_zero_",1:"_one_",2:"_two_",3:"_three_",4:"_four_",5:"_five_",6:"_siz_",7:"_seven_",8:"_eight_",9:"_nine_"},p=function(d){return f[d]||"ASCII_"+d.charCodeAt(0)},b=/([\s-]+.)/g;return function(d){d=c(d);return 0<=k.indexOf(d)?d:0===d.length?"_null_":d.replace(/^\d/,function(h){return l[h]}).replace(/[^\w\$_]/g,p)}}());Me.toJsIdentifier=rS;Me.toJsIdentifier=rS;Me.toJsIdentifier=rS;var Rh=lively.FreezerRuntime.recorderFor("lively.classes/properties.js");
Rh.hasManagedProperties=function(c){return c.hasOwnProperty(Rh.defaultPropertiesKey)};Rh.prepareClassForManagedPropertiesAfterCreation=sE;Rh.prepareClassForProperties=function(c,k,f){Rh.ensurePropertyInitializer(c);var l=k.valueStoreProperty,p=k.defaultGetter,b=k.defaultSetter,d=c.prototype;Object.keys(f).forEach(function(h){var a=f[h],e=d.hasOwnProperty(h)&&d.__lookupGetter__(h);if(!e||e._wasGenerated)e=a.get||"function"===typeof p&&function(){return p.call(this,h)}||function(){return this[l][h]},
e._wasGenerated=!0,d.__defineGetter__(h,e);e=d.hasOwnProperty(h)&&d.__lookupSetter__(h);if(!e||e._wasGenerated)if(a.hasOwnProperty("set")||!a.readOnly)a=a.set||"function"===typeof b&&function(n){b.call(this,h,n)}||function(n){this[l][h]=n},a._wasGenerated=!0,d.__defineSetter__(h,a)})};Rh.ensurePropertyInitializer=function(c){Object.defineProperty(c.prototype,"propertiesAndPropertySettings",{enumerable:!1,configurable:!0,writable:!0,value:function(){var k=this.constructor,f=k[Rh.propertiesAndSettingsCacheSym];
if(f)if(f.classHierarchy!=Rh.getClassHierarchy(k)){var l=Rh.propertiesAndSettingsInHierarchyOf(k);f=l.properties;l=l.propertySettings;k[Rh.propertiesAndSettingsCacheSym]={properties:f,propertySettings:l,order:Rh.obj.sortKeysWithBeforeAndAfterConstraints(f),classHierarchy:Rh.getClassHierarchy(k)};Rh.prepareClassForProperties(k,l,f)}else return f;return k[Rh.propertiesAndSettingsCacheSym]||Rh.propertiesAndSettingsInHierarchyOf(k)}});Object.defineProperty(c.prototype,"initializeProperties",{enumerable:!1,
configurable:!0,writable:!0,value:function(k){var f=this.propertiesAndPropertySettings();Rh.prepareInstanceForProperties(this,f.propertySettings,f.properties,k,f.order);return this}})};Rh.propertiesAndSettingsInHierarchyOf=function(c){for(var k=Object.assign({},Rh.defaultPropertySettings),f={},l=Rh.obj.valuesInPropertyHierarchy(c,"propertySettings"),p=Rh.obj.valuesInPropertyHierarchy(c,"properties"),b=0;b<l.length;b++){var d=l[b];d&&"object"===typeof d&&Object.assign(k,d)}for(b=0;b<p.length;b++)if(l=
p[b],"object"!==typeof l)console.error("[initializeProperties] "+c+" encountered property declaration that is not a JS object: "+l);else for(var h in l)f.hasOwnProperty(h)?Object.assign(f[h],l[h]):f[h]=l[h];return{properties:f,propertySettings:k}};Rh.prepareInstanceForProperties=function(c,k,f,l,p){var b=k.valueStoreProperty;p=p||Rh.obj.sortKeysWithBeforeAndAfterConstraints(f);k=[];var d={};c.hasOwnProperty(b)||(c[b]={});for(var h=0;h<p.length;h++){var a=p[h],e=f[a],n=e.derived,q=!!e.foldable,r=e.hasOwnProperty("defaultValue")?
e.defaultValue:void 0;Array.isArray(r)&&(r=r.slice());n||q||(c[b][a]=r);var v=void 0;e.hasOwnProperty("initialize")?(v=d[a]={initialize:r},k.push(a)):n&&void 0!==r?(v=d[a]={derived:r},k.push(a)):q&&void 0!==r&&(v=d[a]={folded:r},k.push(a));l&&a in l&&(e.readOnly?console.warn("Trying to initialize read-only property "+a+" in "+c+", skipping setting value"):(v||(v=d[a]={},k.push(a)),v.value=l[a]))}for(h=0;h<k.length;h++)l=k[h],p=d[l],b=p.hasOwnProperty("value"),p.hasOwnProperty("initialize")?(f[l].initialize.call(c,
b?p.value:p.initialize),b&&(c[l]=p.value)):p.hasOwnProperty("derived")?c[l]=b?p.value:p.derived:p.hasOwnProperty("folded")?c[l]=b?p.value:p.folded:b&&(c[l]=p.value)};Rh.obj=xf;Rh.getClassHierarchy=qE;Rh.defaultPropertiesSettingKey="propertySettings";Rh.defaultPropertiesKey="properties";Rh.defaultInstanceInitializerMethod="initializeProperties";Rh.propertiesAndSettingsCacheSym=Symbol.for("lively.classes-properties-and-settings");Rh.defaultPropertySettings={defaultSetter:null,defaultGetter:null,valueStoreProperty:"_state"};
Rh.prepareClassForManagedPropertiesAfterCreation=sE;Rh.prepareClassForManagedPropertiesAfterCreation=sE;var tf=lively.FreezerRuntime.recorderFor("lively.classes/runtime.js");tf.adoptObject=$w;tf.setSuperclass=tE;tf.installValueDescriptor=function(c,k,f){f=Object.assign(f,tf.defaultPropertyDescriptorForValue);f.value.displayName=f.key;if(f.needsDeclaringClass){var l=f.value.originalFunction||f.value;f.value=Object.assign(function(){return l.call.apply(l,[this,k].concat($jscomp.arrayFromIterable(arguments)))},
{originalFunction:l,toString:function(){return l.toString()},displayName:f.key})}Object.defineProperty(c,f.key,f)};tf.installGetterSetterDescriptor=function(c,k){k=Object.assign(k,tf.defaultPropertyDescriptorForGetterSetter);Object.defineProperty(c,k.key,k)};tf.installMethods=function(c,k,f){f&&f.forEach(function(d){d.value?tf.installValueDescriptor(c,c,d):tf.installGetterSetterDescriptor(c,d)});k&&k.forEach(function(d){d.value?tf.installValueDescriptor(c.prototype,c,d):tf.installGetterSetterDescriptor(c.prototype,
d)});c.prototype[tf.initializeSymbol]?Object.getOwnPropertySymbols(c.prototype).includes(tf.initializeSymbol)&&c.prototype[tf.initializeSymbol].isDefaultInitializer&&c[tf.superclassSymbol].prototype[tf.initializeSymbol]&&delete c.prototype[tf.initializeSymbol]:(Object.defineProperty(c.prototype,tf.initializeSymbol,{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),c.prototype[tf.initializeSymbol].isDefaultInitializer=!0,c.prototype[tf.initializeSymbol].displayName="lively-initialize");
k=k.map(function(d){return d.key}).concat(["constructor","arguments","caller"]);for(var l=Object.getOwnPropertyNames(c.prototype),p=0;p<l.length;p++){var b=l[p];k.includes(b)||delete c.prototype[b]}f=f.map(function(d){return d.key}).concat(["length","name","prototype","arguments","caller"]);k=Object.getOwnPropertyNames(c);for(l=0;l<k.length;l++)p=k[l],f.includes(p)||delete c[p]};tf.ensureInitializeStub=function(c){c===Object||c.prototype[tf.initializeSymbol]||(Object.defineProperty(c.prototype,tf.initializeSymbol,
{enumerable:!1,configurable:!0,writable:!0,value:function(){c.apply(this,arguments)}}),c.prototype[tf.initializeSymbol].displayName="lively-initialize-stub")};tf.initializeClass=ac;tf.prepareClassForManagedPropertiesAfterCreation=sE;tf.superclassSymbol=cJ;tf.moduleSubscribeToToplevelChangesSym=fJ;tf.moduleMetaSymbol=dJ;tf.objMetaSymbol=eJ;tf.initializeSymbol=bJ;tf.constructorArgMatcher=/\([^\\)]*\)/;tf.defaultPropertyDescriptorForGetterSetter={enumerable:!1,configurable:!0};tf.defaultPropertyDescriptorForValue=
{enumerable:!1,configurable:!0,writable:!0};var gJ="function"===typeof Object.setPrototypeOf?function(c,k){return Object.setPrototypeOf(c,k)}:function(c,k){return c.__proto__=k};tf.setPrototypeOf=gJ;tf.setPrototypeOf=gJ;tf.setPrototypeOf=gJ;tf.adoptObject=$w;tf.adoptObject=$w;tf.setSuperclass=tE;tf.setSuperclass=tE;tf.initializeClass=ac;tf.initializeClass=ac;tf.initializeClass._get=function p(k,f,l){null===k&&(k=Function.prototype);var b=Object.getOwnPropertyDescriptor(k,f);if(void 0===b)return k=
Object.getPrototypeOf(k),null===k?void 0:p(k,f,l);if("value"in b)return b.value;f=b.get;return void 0===f?void 0:f.call(l)};tf.initializeClass._set=function d(f,l,p,b){var h=Object.getOwnPropertyDescriptor(f,l);void 0===h?(f=Object.getPrototypeOf(f),null!==f&&d(f,l,p,b)):"value"in h&&h.writable?h.value=p:(l=h.set,void 0!==l&&l.call(b,p));return p};var zy=Object.freeze({__proto__:null,setPrototypeOf:gJ,adoptObject:$w,setSuperclass:tE,initializeClass:ac}),yd=lively.FreezerRuntime.recorderFor("lively.graphics/color-parser.js");
yd.parse=uE;yd.Color=function(f){this._listeners={};this.subscribe(yd.Events.RGB_UPDATED,this._RGBUpdated);this.subscribe(yd.Events.HEX_UPDATED,this._HEXUpdated);this.subscribe(yd.Events.HSL_UPDATED,this._HSLUpdated);this.subscribe(yd.Events.HSV_UPDATED,this._HSVUpdated);this.subscribe(yd.Events.INT_UPDATED,this._INTUpdated);this.parse(f)};yd.parse=uE;yd.parse=uE;yd.Events={RGB_UPDATED:"RGBUpdated",HSL_UPDATED:"HSLUpdated",HSV_UPDATED:"HSVUpdated",HEX_UPDATED:"HexUpdated",INT_UPDATED:"IntUpdated",
UPDATED:"updated"};yd.namedColors={transparent:"rgba(0, 0, 0, 0)",aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",
darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",
fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",
lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370D8",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",
mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",
sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE"};yd.absround=function(f){return.5+f<<0};yd.hue2rgb=function(f,l,p){0>p&&(p+=1);1<p&&--p;return p<1/6?f+6*(l-f)*p:.5>p?l:p<2/3?f+(l-f)*(2/3-p)*6:f};yd.p2v=function(f){return yd.isPercent.test(f)?
yd.absround(2.55*parseInt(f)):f};yd.isHex=/^#?([0-9a-f]{3}|[0-9a-f]{6})$/i;yd.isHSL=/^hsla?\((\d{1,3}?),\s*(\d{1,3}%),\s*(\d{1,3}%)(,\s*[01]?\.?\d*)?\)$/;yd.isRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*[01]?\.?\d*)?\)$/;yd.isPercent=/^\d+(\.\d+)*%$/;yd.hexBit=/([0-9a-f])/gi;yd.leadHex=/^#/;yd.matchHSL=/^hsla?\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%(,\s*([01]?\.?\d*))?\)$/;yd.matchRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*([01]?\.?\d*))?\)$/;yd.Color.prototype._decimal=
0;yd.Color.prototype._hex="#000000";yd.Color.prototype._red=0;yd.Color.prototype._green=0;yd.Color.prototype._blue=0;yd.Color.prototype._hue=0;yd.Color.prototype._saturation=0;yd.Color.prototype._lightness=0;yd.Color.prototype._brightness=0;yd.Color.prototype._alpha=1;yd.Color.prototype.parse=function(f){if("undefined"===typeof f)return this;switch(!0){case isFinite(f):this.decimal(f);this.output=yd.Color.INT;break;case f instanceof yd.Color:this.copy(f);break;default:switch(typeof f){case "object":this.set(f);
break;case "string":switch(!0){case yd.namedColors.hasOwnProperty(f):f=yd.namedColors[f];f=f.replace(yd.leadHex,"");this.decimal(parseInt(f,16));break;case yd.isHex.test(f):f=f.replace(yd.leadHex,"");3==f.length&&(f=f.replace(yd.hexBit,"$1$1"));this.decimal(parseInt(f,16));break;case yd.isRGB.test(f):f=f.match(yd.matchRGB);this.red(yd.p2v(f[1]));this.green(yd.p2v(f[2]));this.blue(yd.p2v(f[3]));this.alpha(parseFloat(f[5])||1);this.output=(yd.isPercent.test(f[1])?2:1)+(f[5]?2:0);break;case yd.isHSL.test(f):f=
f.match(yd.matchHSL),this.hue(parseInt(f[1])),this.saturation(parseInt(f[2])),this.lightness(parseInt(f[3])),this.alpha(parseFloat(f[5])||1),this.output=f[5]?6:5}}}return this};yd.Color.prototype.clone=function(){return new yd.Color(this.decimal())};yd.Color.prototype.copy=function(f){this.set(f.decimal());return this};yd.Color.prototype.set=function(f,l){if(1==arguments.length)if("object"===typeof f)for(var p in f){if("function"===typeof this[p])this[p](f[p])}else isFinite(f)&&this.decimal(f);else if("function"===
typeof this[f])this[f](l);return this};yd.Color.prototype.interpolate=function(f,l){f instanceof yd.Color||(f=new yd.Color(f));this._red=yd.absround(+this._red+(f._red-this._red)*l);this._green=yd.absround(+this._green+(f._green-this._green)*l);this._blue=yd.absround(+this._blue+(f._blue-this._blue)*l);this._alpha=yd.absround(+this._alpha+(f._alpha-this._alpha)*l);this.broadcast(yd.Events.RGB_UPDATED);this.broadcast(yd.Events.UPDATED);return this};yd.Color.prototype._RGB2HSL=function(){var f=this._red/
255,l=this._green/255,p=this._blue/255,b=Math.max(f,l,p),d=Math.min(f,l,p),h=(b+d)/2;if(b==d)this._saturation=this._hue=0;else{var a=b-d;d=a/(.5>=h?b+d:2-b-d);this._hue=yd.absround((b==f?(l-p)/a+(l<p?6:0):b==l?(p-f)/a+2:(f-l)/a+4)/6*360);this._saturation=yd.absround(100*d)}this._lightness=yd.absround(100*h);this._brightness=yd.absround(100*b)};yd.Color.prototype._HSL2RGB=function(){var f=this._hue/360,l=this._saturation/100,p=this._lightness/100;l=.5>p?p*(1+l):p+l-p*l;p=2*p-l;this._red=yd.absround(255*
yd.hue2rgb(p,l,f+1/3));this._green=yd.absround(255*yd.hue2rgb(p,l,f));this._blue=yd.absround(255*yd.hue2rgb(p,l,f-1/3))};yd.Color.prototype._HSV2RGB=function(){var f=this._hue/360,l=this._saturation/100,p=this._brightness/100,b=0,d=0,h=0,a=Math.floor(6*f),e=6*f-a;f=p*(1-l);var n=p*(1-e*l);l=p*(1-(1-e)*l);switch(a%6){case 0:b=p;d=l;h=f;break;case 1:b=n;d=p;h=f;break;case 2:b=f;d=p;h=l;break;case 3:b=f;d=n;h=p;break;case 4:b=l;d=f;h=p;break;case 5:b=p,d=f,h=n}this._red=yd.absround(255*b);this._green=
yd.absround(255*d);this._blue=yd.absround(255*h)};yd.Color.prototype._INT2HEX=function(){var f=this._decimal.toString(16);f="000000".substr(0,6-f.length)+f;this._hex="#"+f.toUpperCase()};yd.Color.prototype._INT2RGB=function(){this._red=this._decimal>>16;this._green=this._decimal>>8&255;this._blue=this._decimal&255};yd.Color.prototype._HEX2INT=function(){this._decimal=parseInt(this._hex,16)};yd.Color.prototype._RGB2INT=function(){this._decimal=this._red<<16|this._green<<8&65535|this._blue};yd.Color.prototype._RGBUpdated=
function(){this._RGB2INT();this._RGB2HSL();this._INT2HEX()};yd.Color.prototype._HSLUpdated=function(){this._HSL2RGB();this._RGB2INT();this._INT2HEX()};yd.Color.prototype._HSVUpdated=function(){this._HSV2RGB();this._RGB2INT();this._INT2HEX()};yd.Color.prototype._HEXUpdated=function(){this._HEX2INT();this._INT2RGB();this._RGB2HSL()};yd.Color.prototype._INTUpdated=function(){this._INT2RGB();this._RGB2HSL();this._INT2HEX()};yd.Color.prototype._broadcastUpdate=function(){this.broadcast(yd.Events.UPDATED)};
yd.Color.prototype.decimal=function(f){return this._handle("_decimal",f,yd.Events.INT_UPDATED)};yd.Color.prototype.hex=function(f){return this._handle("_hex",f,yd.Events.HEX_UPDATED)};yd.Color.prototype.red=function(f){return this._handle("_red",f,yd.Events.RGB_UPDATED)};yd.Color.prototype.green=function(f){return this._handle("_green",f,yd.Events.RGB_UPDATED)};yd.Color.prototype.blue=function(f){return this._handle("_blue",f,yd.Events.RGB_UPDATED)};yd.Color.prototype.hue=function(f){return this._handle("_hue",
f,yd.Events.HSL_UPDATED)};yd.Color.prototype.saturation=function(f){return this._handle("_saturation",f,yd.Events.HSL_UPDATED)};yd.Color.prototype.lightness=function(f){return this._handle("_lightness",f,yd.Events.HSL_UPDATED)};yd.Color.prototype.brightness=function(f){return this._handle("_brightness",f,yd.Events.HSV_UPDATED)};yd.Color.prototype.alpha=function(f){return this._handle("_alpha",f)};yd.Color.prototype._handle=function(f,l,p){"undefined"!==typeof this[f]&&"undefined"!==typeof l&&(l!=
this[f]&&(this[f]=l,p&&this.broadcast(p)),this.broadcast(yd.Events.UPDATED));return this[f]};yd.Color.prototype.getHex=function(){return this._hex};yd.Color.prototype.getRGB=function(){return"rgb("+[yd.absround(this._red),yd.absround(this._green),yd.absround(this._blue)].join(", ")+")"};yd.Color.prototype.getPRGB=function(){return"rgb("+[yd.absround(100*this._red/255)+"%",yd.absround(100*this._green/255)+"%",yd.absround(100*this._blue/255)+"%"].join(", ")+")"};yd.Color.prototype.getRGBA=function(){return"rgba("+
[yd.absround(this._red),yd.absround(this._green),yd.absround(this._blue),this._alpha].join(", ")+")"};yd.Color.prototype.getPRGBA=function(){return"rgba("+[yd.absround(100*this._red/255)+"%",yd.absround(100*this._green/255)+"%",yd.absround(100*this._blue/255)+"%",this._alpha].join(", ")+")"};yd.Color.prototype.getHSL=function(){return"hsl("+[yd.absround(this._hue),yd.absround(this._saturation)+"%",yd.absround(this._lightness)+"%"].join(", ")+")"};yd.Color.prototype.getHSLA=function(){return"hsla("+
[yd.absround(this._hue),yd.absround(this._saturation)+"%",yd.absround(this._lightness)+"%",this._alpha].join(", ")+")"};yd.Color.prototype.format=function(f){var l={r:this._red,g:this._green,b:this._blue,h:this._hue,s:this._saturation,l:this._lightness,v:this._brightness,a:this._alpha,x:this._hex,d:this._decimal},p;for(p in l)f=f.split("%"+p+"%").join(l[p]);return f};yd.Color.prototype.output=0;yd.Color.HEX=0;yd.Color.RGB=1;yd.Color.PRGB=2;yd.Color.RGBA=3;yd.Color.PRGBA=4;yd.Color.HSL=5;yd.Color.HSLA=
6;yd.Color.INT=7;yd.Color.prototype.toString=function(){switch(this.output){case 1:return this.getRGB();case 2:return this.getPRGB();case 3:return this.getRGBA();case 4:return this.getPRGBA();case 5:return this.getHSL();case 6:return this.getHSLA();case 7:return this._decimal}return this.getHex()};yd.Color.prototype._listeners=null;yd.Color.prototype._isSubscribed=function(f){return null!=this._listeners[f]};yd.Color.prototype.subscribe=function(f,l){this._isSubscribed(f)||(this._listeners[f]=[]);
this._listeners[f].push(l)};yd.Color.prototype.unsubscribe=function(f,l){if(this._isSubscribed(f))for(var p=this._listeners[f],b=0,d=p.length;b<d;b++)if(p[b]===l)return p.splice(b,1),this.unsubscribe(f,l)};yd.Color.prototype.broadcast=function(f,l){if(this._isSubscribed(f)){f=this._listeners[f];for(var p=f.length,b=0;b<p;b++)f[b].apply(this,l)}};yd.Color.prototype.tween=function(f,l){l instanceof yd.Color||(l=new yd.Color(l));var p=+new Date,b=this;this.broadcast("tweenStart");var d=setInterval(function(){var h=
Math.min(1,(+new Date-p)/f);b.interpolate(l,h);b.broadcast("tweenProgress");1==h&&(clearInterval(d),b.broadcast("tweenComplete"))},20);return d};yd.Color.prototype.bind=function(f,l){var p=this;this.subscribe("updated",function(){f[l]=p.toString()})};yd.Color.random=function(){return new yd.Color(yd.absround(16777215*Math.random()))};yd.Color.bind=function(f,l){var p=new yd.Color(f[l]);p.bind(f,l);return p};var Eh=lively.FreezerRuntime.recorderFor("lively.graphics/convert-css-length.js");Eh.parseUnit=
function(f,l){l||(l=[0,""]);f=String(f);var p=parseFloat(f,10);l[0]=p;l[1]=f.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return l};Eh.unit=function(f){return Eh.parseUnit(f)[1]};Eh.unitLess=function(f){return Eh.parseUnit(f)[0]};Eh.genericCssLengthParser=YL;Eh.cssLengthToPixels=vE;Eh.baseFontSize="16px";if(System.get("@system-env").browser)try{Eh.newBaseFontSize=Eh.genericCssLengthParser(Eh.baseFontSize)(window.getComputedStyle(document.body).fontSize),Eh.newBaseFontSize&&"NaN"!==Eh.newBaseFontSize.slice(0,
3)&&(Eh.baseFontSize=Eh.newBaseFontSize)}catch(f){}Eh.genericCssLengthParser=YL;Eh.genericCssLengthParser=YL;var sS=Eh.genericCssLengthParser(Eh.baseFontSize);Eh.parseCssLength=sS;Eh.parseCssLength=sS;Eh.parseCssLength=sS;Eh.cssLengthToPixels=vE;Eh.cssLengthToPixels=vE;var Hd=lively.FreezerRuntime.recorderFor("lively.graphics/geometry-2d.js");Hd.rect=cl;Hd.pt=xh;Hd.num=jk;Hd.string=Ng;Hd.grid=py;Hd.cssLengthToPixels=vE;var Pf=function(f,l){this.x=f||0;this.y=l||0};Pf.ensure=function(f){return f instanceof
Hd.Point?f:new Hd.Point(f.x,f.y)};Pf.polar=function(f,l){return new Hd.Point(f*Math.cos(l),f*Math.sin(l))};Pf.random=function(f){return new Hd.Point(Hd.num.randomSmallerInteger(f.x),Hd.num.randomSmallerInteger(f.y))};Pf.fromLiteral=function(f){return Hd.pt(f.x,f.y)};Pf.fromTuple=function(f){return Hd.pt(f[0],f[1])};Pf.prototype.getX=function(){return this.x};Pf.prototype.getY=function(){return this.y};Pf.prototype.toFixed=function(f){return new Hd.Point(this.x.toFixed(f),this.y.toFixed(f))};Pf.prototype.addPt=
function(f){return new Hd.Point(this.x+f.x,this.y+f.y)};Pf.prototype.addXY=function(f,l){return new Hd.Point(this.x+f,this.y+l)};Pf.prototype.midPt=function(f){return new Hd.Point((this.x+f.x)/2,(this.y+f.y)/2)};Pf.prototype.subPt=function(f){return new Hd.Point(this.x-f.x,this.y-f.y)};Pf.prototype.subXY=function(f,l){return new Hd.Point(this.x-f,this.y-l)};Pf.prototype.scaleBy=function(f,l){return new Hd.Point(this.x*f,this.y*(l||f))};Pf.prototype.scaleByPt=function(f){return new Hd.Point(this.x*
f.x,this.y*f.y)};Pf.prototype.negated=function(){return new Hd.Point(-this.x,-this.y)};Pf.prototype.inverted=function(){return new Hd.Point(1/this.x,1/this.y)};Pf.prototype.invertedSafely=function(){return new Hd.Point(this.x&&1/this.x,this.y&&1/this.y)};Pf.prototype.lessPt=function(f){return this.x<f.x&&this.y<f.y};Pf.prototype.leqPt=function(f){return this.x<=f.x&&this.y<=f.y};Pf.prototype.eqPt=function(f){return this.x==f.x&&this.y==f.y};Pf.prototype.equals=function(f){return this.x==f.x&&this.y==
f.y};Pf.prototype.withX=function(f){return Hd.pt(f,this.y)};Pf.prototype.withY=function(f){return Hd.pt(this.x,f)};Pf.prototype.copy=function(){return new Hd.Point(this.x,this.y)};Pf.prototype.minPt=function(f,l){l||(l=new Hd.Point(0,0));l.x=Math.min(this.x,f.x);l.y=Math.min(this.y,f.y);return l};Pf.prototype.maxPt=function(f,l){l||(l=new Hd.Point(0,0));l.x=Math.max(this.x,f.x);l.y=Math.max(this.y,f.y);return l};Pf.prototype.random=function(){return Hd.Point.random(this)};Pf.prototype.normalized=
function(){var f=this.r();return Hd.pt(this.x/f,this.y/f)};Pf.prototype.fastNormalized=function(){var f=this.fastR();return Hd.pt(this.x/f,this.y/f)};Pf.prototype.dotProduct=function(f){return this.x*f.x+this.y*f.y};Pf.prototype.matrixTransform=function(f,l){var p=f.a*this.x+f.c*this.y+f.e;f=f.b*this.x+f.d*this.y+f.f;return l?Object.assign(l,{x:p,y:f}):Hd.pt(p,f)};Pf.prototype.matrixTransformDirection=function(f,l){var p=f.a*this.x+f.c*this.y;f=f.b*this.x+f.d*this.y;return l?Object.assign(l,{x:p,
y:f}):Hd.pt(p,f)};Pf.prototype.griddedBy=function(f){return Hd.pt(this.x-this.x%f.x,this.y-this.y%f.y)};Pf.prototype.roundTo=function(f){return new Hd.Point(Hd.num.roundTo(this.x,f),Hd.num.roundTo(this.y,f))};Pf.prototype.dist=function(f){var l=this.x-f.x;f=this.y-f.y;return Math.sqrt(l*l+f*f)};Pf.prototype.distSquared=function(f){var l=this.x-f.x;f=this.y-f.y;return l*l+f*f};Pf.prototype.nearestPointOnLineBetween=function(f,l){if(f.x==l.x)return Hd.pt(f.x,this.y);if(f.y==l.y)return Hd.pt(this.x,
f.y);var p=f.x;f=f.y;var b=l.x-p;l=l.y-f;var d=((this.y-f)/b+(this.x-p)/l)/(b/l+l/b);return Hd.pt(p+d*b,f+d*l)};Pf.prototype.interpolate=function(f,l,p){return void 0===p||p?Hd.pt(Hd.num.interpolate(f,this.x,l.x),Hd.num.interpolate(f,this.y,l.y)):Hd.Point.polar(Hd.num.interpolate(f,this.r(),l.r()),Hd.num.interpolate(f,this.theta(),l.theta()))};Pf.prototype.r=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};Pf.prototype.fastR=function(){for(var f=this.x*this.x+this.y*this.y,l=17,p=0;6>p;p++)l=
(l+f/l)/2;return l};Pf.prototype.theta=function(){return Math.atan2(this.y,this.x)};Pf.prototype.asRectangle=function(){return new Hd.Rectangle(this.x,this.y,0,0)};Pf.prototype.extent=function(f){return new Hd.Rectangle(this.x,this.y,f.x,f.y)};Pf.prototype.extentAsRectangle=function(){return new Hd.Rectangle(0,0,this.x,this.y)};Pf.prototype.lineTo=function(f){return new Hd.Line(this,f)};Pf.prototype.toTuple=function(){return[this.x,this.y]};Pf.prototype.toLiteral=function(){return{x:this.x,y:this.y}};
Pf.prototype.toString=function(f){return void 0===f||f?Hd.string.format("pt(%1.f,%1.f)",this.x,this.y):Hd.string.format("pt(%10.d,%10.d)",this.x,this.y)};Pf.prototype.inspect=function(){return JSON.stringify(this)};Pf.prototype.__serialize__=function(){return{__expr__:this.toString(!1),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}};$jscomp.global.Object.defineProperties(Pf.prototype,{isPoint:{configurable:!0,enumerable:!0,get:function(){return!0}}});Ka("a8",Pf);Hd.Point=Pf;var ie=function(f,
l,p,b){this.x=f||0;this.y=l||0;this.width=p||0;this.height=b||0};ie.fromAny=function(f,l){return Hd.rect(f.minPt(l),f.maxPt(l))};ie.fromLiteral=function(f){return new Hd.Rectangle(f.x,f.y,f.width,f.height)};ie.fromTuple=function(f){return new Hd.Rectangle(f[0],f[1],f[2],f[3])};ie.unionPts=function(f){for(var l=f[0],p=f[0],b=1;b<f.length;b++)l=l.minPt(f[b]),p=p.maxPt(f[b]);return Hd.rect(l,p)};ie.ensure=function(f){return f instanceof Hd.Rectangle?f:new Hd.Rectangle(f.x,f.y,f.width,f.height)};ie.fromElement=
function(f){if("function"===typeof f.getBoundingClientRect){var l=f.getBoundingClientRect();return Hd.rect(l.left,l.top,l.width,l.height)}if("http://www.w3.org/1999/xhtml"==f.namespaceURI){l=Hd.cssLengthToPixels(f.style.left||"0px");var p=Hd.cssLengthToPixels(f.style.top||"0px"),b=Hd.cssLengthToPixels(f.style.width||"0px");f=Hd.cssLengthToPixels(f.style.hieght||"0px");return new Hd.Rectangle(l,p,b,f)}if("http://www.w3.org/2000/svg"==f.namespaceURI)return new Hd.Rectangle(f.x.baseVal.value,f.y.baseVal.value,
f.width.baseVal.value,f.height.baseVal.value);throw Error("Cannot create Rectangle from "+f);};ie.inset=function(f,l,p,b){void 0===l&&(l=f);void 0===p&&(p=f);void 0===b&&(b=l);return new Hd.Rectangle(f,l,p-f,b-l)};ie.prototype.getX=function(){return this.x};ie.prototype.getY=function(){return this.y};ie.prototype.getWidth=function(){return this.width};ie.prototype.getHeight=function(){return this.height};ie.prototype.copy=function(){return new Hd.Rectangle(this.x,this.y,this.width,this.height)};ie.prototype.toFixed=
function(f){return new Hd.Rectangle(this.x.toFixed(f),this.y.toFixed(f),this.width.toFixed(f),this.height.toFixed(f))};ie.prototype.withWidth=function(f){return new Hd.Rectangle(this.x,this.y,f,this.height)};ie.prototype.withHeight=function(f){return new Hd.Rectangle(this.x,this.y,this.width,f)};ie.prototype.withX=function(f){return new Hd.Rectangle(f,this.y,this.width,this.height)};ie.prototype.withY=function(f){return new Hd.Rectangle(this.x,f,this.width,this.height)};ie.prototype.withExtent=function(f){return new Hd.Rectangle(this.x,
this.y,f.x,f.y)};ie.prototype.withTopLeft=function(f){return Hd.Rectangle.fromAny(f,this.bottomRight())};ie.prototype.withTopRight=function(f){return Hd.Rectangle.fromAny(this.bottomLeft(),f)};ie.prototype.withBottomRight=function(f){return Hd.Rectangle.fromAny(f,this.topLeft())};ie.prototype.withBottomLeft=function(f){return Hd.Rectangle.fromAny(f,this.topRight())};ie.prototype.withLeftCenter=function(f){return new Hd.Rectangle(f.x,this.y,this.width+(this.x-f.x),this.height)};ie.prototype.withRightCenter=
function(f){return new Hd.Rectangle(this.x,this.y,f.x-this.x,this.height)};ie.prototype.withTopCenter=function(f){return new Hd.Rectangle(this.x,f.y,this.width,this.height+(this.y-f.y))};ie.prototype.withBottomCenter=function(f){return new Hd.Rectangle(this.x,this.y,this.width,f.y-this.y)};ie.prototype.withCenter=function(f){return new Hd.Rectangle(f.x-this.width/2,f.y-this.height/2,this.width,this.height)};ie.prototype.insetBy=function(f){return new Hd.Rectangle(this.x+f,this.y+f,this.width-2*f,
this.height-2*f)};ie.prototype.insetByPt=function(f){return new Hd.Rectangle(this.x+f.x,this.y+f.y,this.width-2*f.x,this.height-2*f.y)};ie.prototype.grid=function(f,l){var p=this.width/l,b=this.height/f;return Hd.grid.mapCreate(f,l,function(d,h){return new Hd.Rectangle(p*h,b*d,p,b)})};ie.prototype.divide=function(f){var l=this;return f.map(function(p){return Hd.rect(l.x+l.width*p.x,l.y+l.height*p.y,l.width*p.width,l.height*p.height)})};ie.prototype.toTuple=function(){return[this.x,this.y,this.width,
this.height]};ie.prototype.lineTo=function(f){var l=this.center(),p=f.center();p=l.lineTo(p);l=this.lineIntersection(p)[0];f=f.lineIntersection(p)[0];return l&&f&&l.lineTo(f)};ie.prototype.equals=function(f){return f?this.x==f.x&&this.y==f.y&&this.width==f.width&&this.height==f.height:!1};ie.prototype.inspect=function(){return JSON.stringify(this)};ie.prototype.topLeft=function(){return new Hd.Point(this.x,this.y)};ie.prototype.topRight=function(){return new Hd.Point(this.maxX(),this.y)};ie.prototype.bottomRight=
function(){return new Hd.Point(this.maxX(),this.maxY())};ie.prototype.bottomLeft=function(){return new Hd.Point(this.x,this.maxY())};ie.prototype.leftCenter=function(){return new Hd.Point(this.x,this.center().y)};ie.prototype.rightCenter=function(){return new Hd.Point(this.maxX(),this.center().y)};ie.prototype.topCenter=function(){return new Hd.Point(this.center().x,this.y)};ie.prototype.bottomCenter=function(){return new Hd.Point(this.center().x,this.maxY())};ie.prototype.extent=function(){return new Hd.Point(this.width,
this.height)};ie.prototype.center=function(){return new Hd.Point(this.x+this.width/2,this.y+this.height/2)};ie.prototype.topEdge=function(){return new Hd.Line(this.topLeft(),this.topRight())};ie.prototype.bottomEdge=function(){return new Hd.Line(this.bottomLeft(),this.bottomRight())};ie.prototype.leftEdge=function(){return new Hd.Line(this.topLeft(),this.bottomLeft())};ie.prototype.rightEdge=function(){return new Hd.Line(this.topRight(),this.bottomRight())};ie.prototype.edges=function(){return[this.topEdge(),
this.rightEdge(),this.bottomEdge(),this.leftEdge()]};ie.prototype.allPoints=function(){for(var f=this.x,l=this.y,p=this.width,b=this.height,d=[],h=l;h<l+b;h++)for(var a=f;a<f+p;a++)d.push(Hd.pt(a,h));return d};ie.prototype.isNonEmpty=function(f){return 0<this.width&&0<this.height};ie.prototype.containsRect=function(f){return this.x<=f.x&&this.y<=f.y&&f.maxX()<=this.maxX()&&f.maxY()<=this.maxY()};ie.prototype.intersects=function(f){return this.intersection(f).isNonEmpty()};ie.prototype.containsPoint=
function(f){return this.x<=f.x&&f.x<=this.x+this.width&&this.y<=f.y&&f.y<=this.y+this.height};ie.prototype.translatedBy=function(f){return new Hd.Rectangle(this.x+f.x,this.y+f.y,this.width,this.height)};ie.prototype.scaleByRect=function(f){return new Hd.Rectangle(this.x+f.x*this.width,this.y+f.y*this.height,f.width*this.width,f.height*this.height)};ie.prototype.scaleRectIn=function(f){return new Hd.Rectangle((this.x-f.x)/f.width,(this.y-f.y)/f.height,this.width/f.width,this.height/f.height)};ie.prototype.scaleRectTo=
function(f){var l,p;this.width>this.height?p=this.width:l=this.height;f=p?f.width/p:f.height/l;return this.withExtent(this.extent().scaleBy(f)).withCenter(this.center())};ie.prototype.expandBy=function(f){return this.insetBy(0-f)};ie.prototype.translateForInclusion=function(f){var l=f.x,p=f.y,b=l+f.width,d=p+f.height;b>this.right()&&(l-=b-this.right());d>this.bottom()&&(p-=d-this.bottom());l<this.x&&(l=this.x);p<this.y&&(p=this.y);return Hd.rect(l,p,f.width,f.height)};ie.prototype.transformRectForInclusion=
function(f){var l=this.topLeft().maxPt(f.topLeft());f=l.addPt(f.extent());f=this.bottomRight().minPt(f);return Hd.rect(l,f)};ie.prototype.insetByRect=function(f){return new Hd.Rectangle(this.x+f.left(),this.y+f.top(),this.width-(f.left()+f.right()),this.height-(f.top()+f.bottom()))};ie.prototype.outsetByRect=function(f){return new Hd.Rectangle(this.x-f.left(),this.y-f.top(),this.width+(f.left()+f.right()),this.height+(f.top()+f.bottom()))};ie.prototype.interpolate=function(f,l){var p=this.topLeft(),
b=this.bottomRight(),d=l.topLeft();l=l.bottomRight();return Hd.Rectangle.fromAny(p.interpolate(f,d),b.interpolate(f,l))};ie.prototype.intersection=function(f){var l=Math.max(this.x,f.x),p=Math.max(this.y,f.y);return new Hd.Rectangle(l,p,Math.min(this.x+this.width,f.x+f.width)-l,Math.min(this.y+this.height,f.y+f.height)-p)};ie.prototype.union=function(f){return Hd.rect(this.topLeft().minPt(f.topLeft()),this.bottomRight().maxPt(f.bottomRight()))};ie.prototype.lineIntersection=function(f){return this.edges().map(function(l){return l.intersection(f)}).filter(function(l){return!!l})};
ie.prototype.dist=function(f){var l=this.closestPointToPt(f.center());f=f.closestPointToPt(l);return l.dist(f)};ie.prototype.relativeToAbsPoint=function(f){return new Hd.Point(this.x+this.width*f.x,this.y+this.height*f.y)};ie.prototype.closestPointToPt=function(f){return Hd.pt(Math.min(Math.max(this.x,f.x),this.maxX()),Math.min(Math.max(this.y,f.y),this.maxY()))};ie.prototype.maxX=function(){return this.x+this.width};ie.prototype.maxY=function(){return this.y+this.height};ie.prototype.realWidth=function(){return 0>
this.x?-this.x+this.width:this.width};ie.prototype.realHeight=function(){return 0>this.y?-this.y+this.height:this.height};ie.prototype.area=function(){return(0>this.width&&0>this.height?-1:1)*this.width*this.height};ie.prototype.randomPoint=function(){return Hd.Point.random(Hd.pt(this.width,this.height)).addPt(this.topLeft())};ie.prototype.constrainPt=function(f){return f.maxPt(this.topLeft()).minPt(this.bottomRight())};ie.prototype.left=function(){return this.x};ie.prototype.right=function(){return this.maxX()};
ie.prototype.top=function(){return this.y};ie.prototype.bottom=function(){return this.maxY()};ie.prototype.toInsetTuple=function(){return[this.left(),this.top(),this.right(),this.bottom()]};ie.prototype.toAttributeValue=function(f){f=.01;var l=[this.left()];this.top()===this.bottom()&&this.left()===this.right()?this.top()===this.left()&&l.push(this.top()):l=l.concat([this.top(),this.right(),this.bottom()]);return l.invoke("roundTo",f||.01)};ie.prototype.toLiteral=function(){return{x:this.x,y:this.y,
width:this.width,height:this.height}};ie.prototype.partNamed=function(f){return this[f].call(this)};ie.prototype.withPartNamed=function(f,l){return this[this.setterName(f)].call(this,l)};ie.prototype.setterName=function(f){return"with"+f[0].toUpperCase()+f.slice(1)};ie.prototype.partNameNear=function(f,l,p){f=this.partNameNearest(f,l);return l.dist(this.partNamed(f))<p?f:null};ie.prototype.partNameNearest=function(f,l){for(var p=1E99,b,d=0;d<f.length;d++){b=f[d];var h=l.dist(this.partNamed(b));if(h<
p){var a=b;p=h}}return a};ie.prototype.toString=function(){return Hd.string.format("rect(%s,%s,%s,%s)",this.x,this.y,this.width,this.height)};ie.prototype.__serialize__=function(){return{__expr__:this.toString(),bindings:{"lively.graphics/geometry-2d.js":["rect"]}}};$jscomp.global.Object.defineProperties(ie.prototype,{corners:{configurable:!0,enumerable:!0,get:function(){return["topLeft","topRight","bottomRight","bottomLeft"]}},sides:{configurable:!0,enumerable:!0,get:function(){return["leftCenter",
"rightCenter","topCenter","bottomCenter"]}},isRectangle:{configurable:!0,enumerable:!0,get:function(){return!0}}});Ka("R",ie);Hd.Rectangle=ie;var oj=function(f,l,p){f?f instanceof Hd.Point?(l=l||0,void 0===p&&(p=Hd.pt(1,1)),this.a=this.ensureNumber(p.x*Math.cos(l)),this.b=this.ensureNumber(p.y*Math.sin(l)),this.c=this.ensureNumber(p.x*-Math.sin(l)),this.d=this.ensureNumber(p.y*Math.cos(l)),this.e=this.ensureNumber(f.x),this.f=this.ensureNumber(f.y),1<this.a&&(this.a=Math.round(this.a*Math.pow(10,
2))/Math.pow(10,2)),1<this.d&&(this.d=Math.round(this.d*Math.pow(10,2))/Math.pow(10,2))):this.fromMatrix(f):(this.a=this.d=1,this.b=this.c=this.e=this.f=0)};oj.prototype.copy=function(){return new Hd.Transform(this)};oj.prototype.fromMatrix=function(f){this.a=this.ensureNumber(f.a);this.b=this.ensureNumber(f.b);this.c=this.ensureNumber(f.c);this.d=this.ensureNumber(f.d);this.e=this.ensureNumber(f.e);this.f=this.ensureNumber(f.f)};oj.prototype.getRotation=function(){var f=Hd.num.toDegrees(Math.atan2(-this.c,
this.a));return Math.abs(f)<this.eps?0:f};oj.prototype.getScale=function(){var f=this.a,l=this.c;f=Math.sqrt(f*f+l*l);return Math.abs(f-1)<this.eps?1:f};oj.prototype.getScalePoint=function(){var f=this.a,l=this.b,p=this.c,b=this.d,d=Math.atan2(-p,f);return Hd.pt(Math.sqrt(f*f+p*p),Math.abs(l)>Math.abs(b)?l/Math.sin(d):b/Math.cos(d))};oj.prototype.getTranslation=function(){return Hd.pt(this.e,this.f)};oj.prototype.isTranslation=function(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d};oj.prototype.toSVGAttributeValue=
function(){var f=this.getTranslation();f="translate("+f.x+","+f.y+")";var l=this.getRotation(),p=this.getScalePoint();0!=l&&(f+=" rotate("+this.getRotation()+")");if(1!=p.x||1!=p.y)f+=" scale("+p.x+","+p.y+")";return f};oj.prototype.toCSSValue=function(f){var l="",p=this.getTranslation();l+="translate("+p.x.toFixed(2)+"px,"+p.y.toFixed(2)+"px)";if(f){p=f.width/2;var b=f.height/2;l+=" translate("+p.toFixed(2)+"px,"+b.toFixed(2)+"px)"}0!=this.getRotation()&&(l+=" rotate("+this.getRotation().toFixed(2)+
"deg)");f&&(p=f.width/2,b=f.height/2,l+=" translate("+(-1*p).toFixed(2)+"px,"+(-1*b).toFixed(2)+"px)");f=this.getScalePoint();if(1!=f.x||1!=f.y)l+=" scale("+f.x.toFixed(2)+","+f.y.toFixed(2)+")";return l};oj.prototype.toCSSTransformString=function(){var f=this.getRotation(),l=this.getScale();return"translate("+this.e+"px,"+this.f+"px) rotate("+f+"deg) scale("+l+","+l+")"};oj.prototype.toString=function(){return this.toCSSTransformString()};oj.prototype.toMatrix=function(){return this.copy()};oj.prototype.transformPoint=
function(f,l){return f.matrixTransform(this,l)};oj.prototype.transformDirection=function(f,l){return f.matrixTransformDirection(this,l)};oj.prototype.matrixTransformForMinMax=function(f,l,p){var b=this.a*f.x+this.c*f.y+this.e;f=this.b*f.x+this.d*f.y+this.f;b>p.x&&(p.x=b);f>p.y&&(p.y=f);b<l.x&&(l.x=b);f<l.y&&(l.y=f)};oj.prototype.transformRectToRect=function(f){var l=Hd.pt(Infinity,Infinity),p=Hd.pt(-Infinity,-Infinity);this.matrixTransformForMinMax(f.topLeft(),l,p);this.matrixTransformForMinMax(f.bottomRight(),
l,p);this.isTranslation()||(this.matrixTransformForMinMax(f.topRight(),l,p),this.matrixTransformForMinMax(f.bottomLeft(),l,p));return Hd.rect(l,p)};oj.prototype.preConcatenate=function(f){var l=this.matrix_||this.toMatrix();this.a=f.a*l.a+f.c*l.b;this.b=f.b*l.a+f.d*l.b;this.c=f.a*l.c+f.c*l.d;this.d=f.b*l.c+f.d*l.d;this.e=f.a*l.e+f.c*l.f+f.e;this.f=f.b*l.e+f.d*l.f+f.f;this.matrix_=this.toMatrix();return this};oj.prototype.invert=function(){var f=this.copy(),l=1/(f.a*f.d-f.c*f.b);this.a=f.d*l;this.b=
-f.b*l;this.c=-f.c*l;this.d=f.a*l;this.e=(f.c*f.f-f.e*f.d)*l;this.f=-(f.a*f.f-f.b*f.e)*l;return this};oj.prototype.inverse=function(){var f=this.matrix_||this.toMatrix();f=new this.constructor(f);f.invert();return f};oj.prototype.ensureNumber=function(f){if(isNaN(f))throw Error("not a number");return f};oj.prototype.__serialize__=function(){return{__expr__:"new Transform({a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", e: "+this.e+", f: "+this.f+"})",bindings:{"lively.graphics/geometry-2d.js":["Transform"]}}};
$jscomp.global.Object.defineProperties(oj.prototype,{exp:{configurable:!0,enumerable:!0,get:function(){return 1E-4}},isTransform:{configurable:!0,enumerable:!0,get:function(){return!0}}});Hd.Transform=oj;var Wk=function(f,l){this.start=f;this.end=l};Wk.fromCoords=function(f,l,p,b){return new Hd.Line(Hd.pt(f,l),Hd.pt(p,b))};Wk.prototype.withStart=function(f){return new Hd.Line(f,this.end)};Wk.prototype.withEnd=function(f){return new Hd.Line(this.start,f)};Wk.prototype.sampleN=function(f){f=f||10;for(var l=
this.end.subPt(this.start).scaleBy(1/f),p=[],b=0;b<=f;b++)p.push(this.start.addPt(l.scaleBy(b)));return p};Wk.prototype.sample=function(f){return this.sampleN(this.length()/f)};Wk.prototype.length=function(){return this.start.dist(this.end)};Wk.prototype.equals=function(f){return f?this.start.eqPt(f.start)&&this.end.eqPt(f.end):!1};Wk.prototype.distanceFromLine=function(f){var l=this.start.x,p=this.start.y,b=this.end.x,d=this.end.y;return Math.abs((d-p)*f.x-(b-l)*f.y+b*p-d*l)/Math.sqrt(Math.pow(d-
p,2)+Math.pow(b-l,2))};Wk.prototype.includesPoint=function(f,l){var p=this.start.x,b=this.start.y,d=this.end.x,h=this.end.y,a=f.x;f=f.y;var e=0===(d-p)*(f-b)-(a-p)*(h-b);if(l||!e)return e;l=Math.min(b,h);e=Math.max(p,d);b=Math.max(b,h);return Math.min(p,d)<=a&&a<=e&&l<=f&&f<=b};Wk.prototype.intersection=function(f,l){var p=this.start,b=this.end,d=f.start,h=f.end;f=p.x;p=p.y;var a=b.x;b=b.y;var e=d.x;d=d.y;var n=h.x;h=h.y;var q=((f*b-p*a)*(e-n)-(f-a)*(e*h-d*n))/((f-a)*(d-h)-(p-b)*(e-n)),r=((f*b-p*
a)*(d-h)-(p-b)*(e*h-d*n))/((f-a)*(d-h)-(p-b)*(e-n));return Infinity!==q&&Infinity!==r&&(l||Hd.num.between(q,f,a,1E-4)&&Hd.num.between(r,p,b,1E-4)&&Hd.num.between(q,e,n,1E-4)&&Hd.num.between(r,d,h,1E-4))?Hd.pt(q,r):null};Wk.prototype.perpendicularLine=function(f,l,p){f=void 0===f?0:f;l=void 0===l?1:l;p=void 0===p?"cc":p;var b=this.start,d=this.toVector();f=b.addPt(d.scaleBy(f));p=d.theta()+("cc"===p?-1:1)*Math.PI/2;return new Hd.Line(f,f.addPt(Hd.Point.polar(l,p)))};Wk.prototype.toVector=function(){return this.end.subPt(this.start)};
Wk.prototype.toString=function(){return Hd.string.format("Line((%s,%s), (%s,%s))",this.start.x,this.start.y,this.end.x,this.end.y)};Wk.prototype.__serialize__=function(){return{__expr__:"Line.fromCoords("+this.start.x+", "+this.start.y+", "+this.end.x+", "+this.end.y+")",bindings:{"lively.graphics/geometry-2d.js":["Line"]}}};$jscomp.global.Object.defineProperties(Wk.prototype,{isLine:{configurable:!0,enumerable:!0,get:function(){return!0}}});Hd.Line=Wk;Hd.rect=cl;Hd.rect=cl;Hd.pt=xh;Hd.pt=xh;var fpa=
Object.freeze({__proto__:null,Point:Pf,Rectangle:ie,Transform:oj,Line:Wk,rect:cl,pt:xh}),Ed=lively.FreezerRuntime.recorderFor("lively.graphics/color.js");Ed.floor=function(f){return Math.floor(255.99*f)};Ed.pad=function(f,l,p){p=void 0===p?Ed.arr.last:p;return[].concat($jscomp.arrayFromIterable(f),$jscomp.arrayFromIterable(Array(Math.max(l-f.length,0)).fill(p(f))))};Ed.num=jk;Ed.obj=xf;Ed.arr=cf;Ed.parse=uE;Ed.Rectangle=ie;Ed.rect=cl;Ed.pt=xh;Ed.Point=Pf;Ed.rgbaRegex=/\s*rgba?\s*\(\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*(?:,\s*([0-9\.]+)\s*)?\)\s*/;
var Ay=function(){};Ay.prototype.offsets=function(){return null};Ay.prototype.stepCount=function(){return 0};Ay.prototype.stepSize=function(){return 0};Ay.prototype.chord=function(f){var l=this,p=f.hue,b=f.saturation,d=f.brightness;return(this.offsets()||Ed.arr.range(0,this.steps()).map(function(h){return h*l.stepSize()})).map(function(h){return Ed.Color.hsb(p+h%360,b,d)})};$jscomp.global.Object.defineProperties(Ay.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Color Harmony"}}});
Ed.ColorHarmony=Ay;var dt=function(){return Ed.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(dt,Ed.ColorHarmony);dt.prototype.steps=function(){return 1};dt.prototype.stepSize=function(){return 180};$jscomp.global.Object.defineProperties(dt.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Complement"}}});Ka("bd",dt);Ed.Complementary=dt;var et=function(){return Ed.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(et,Ed.ColorHarmony);et.prototype.steps=function(){return 2};
et.prototype.stepSize=function(){return 120};$jscomp.global.Object.defineProperties(et.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Triadic"}}});Ka("be",et);Ed.Triadic=et;var ov=function(){return Ed.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(ov,Ed.ColorHarmony);ov.prototype.offsets=function(){return[0,60,180,240]};$jscomp.global.Object.defineProperties(ov.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Tetradic"}}});Ka("bf",ov);Ed.Tetradic=
ov;var ft=function(){return Ed.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(ft,Ed.ColorHarmony);ft.prototype.steps=function(){return 3};ft.prototype.stepSize=function(){return 90};$jscomp.global.Object.defineProperties(ft.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Quadratic"}}});Ka("bg",ft);Ed.Quadratic=ft;var gt=function(){return Ed.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(gt,Ed.ColorHarmony);gt.prototype.steps=function(){return 5};gt.prototype.offsets=
function(){return[-60,-30,0,30,60]};$jscomp.global.Object.defineProperties(gt.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Analogous"}}});Ka("bh",gt);Ed.Analogous=gt;var pv=function(){return Ed.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(pv,Ed.ColorHarmony);pv.prototype.offsets=function(){return[-30,-15,0,15,30]};$jscomp.global.Object.defineProperties(pv.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Neutral"}}});Ka("bi",pv);Ed.Neutral=
pv;var If=function(f,l,p,b){this.r=f||0;this.g=l||0;this.b=p||0;this.a=b||(0===b?0:1)};If.random=function(f,l){void 0===f&&(f=0);void 0===l&&(l=255);return Ed.Color.rgb(Ed.num.random(f,l),Ed.num.random(f,l),Ed.num.random(f,l))};If.hsb=function(f,l,p){if(0==l)return new Ed.Color(p,p,p);var b=f%360/60;f=Math.floor(b);var d=b-f;b=(1-l)*p;var h=(1-l*d)*p;l=(1-l*(1-d))*p;switch(f){case 0:return new Ed.Color(p,l,b);case 1:return new Ed.Color(h,p,b);case 2:return new Ed.Color(b,p,l);case 3:return new Ed.Color(b,
h,p);case 4:return new Ed.Color(l,b,p);case 5:return new Ed.Color(p,b,h);default:return new Ed.Color(0,0,0)}};If.wheel=function(f){return Ed.Color.wheelHsb(void 0===f?10:f,0,.9,.7)};If.wheelHsb=function(f,l,p,b){for(var d=Array(f),h=360/Math.max(f,1),a=0;a<f;a++)d[a]=Ed.Color.hsb(l+a*h,p,b);return d};If.rgb=function(f,l,p){return new Ed.Color(f/255,l/255,p/255)};If.rgbHex=function(f){return(f=this.parseHex(f))&&0<=f[0]&&0<=f[1]&&0<=f[2]?new Ed.Color(f[0],f[1],f[2]):null};If.rgba=function(f,l,p,b){return new Ed.Color(f/
255,l/255,p/255,b)};If.fromLiteral=function(f){return new Ed.Color(f.r,f.g,f.b,f.a)};If.fromTuple=function(f){return new Ed.Color(f[0],f[1],f[2],f[3])};If.fromTuple8Bit=function(f){return new Ed.Color(f[0]/255,f[1]/255,f[2]/255,f[3]/255)};If.fromString=function(f){return f&&"none"!==f?this.fromTuple(this.parse(f)):null};If.parse=function(f){return f&&"none"!==f?(f=Ed.parse(f),[f.red,f.green,f.blue,f.alpha]):null};If.parseRGB=function(f){var l=f.match(this.rgbaRegex);if(l){f=parseInt(l[1])/(l[2]?100:
255);var p=parseInt(l[3])/(l[4]?100:255),b=parseInt(l[5])/(l[6]?100:255);l=l[7]?parseFloat(l[7]):1;return[f,p,b,l]}return null};If.parseHex=function(f){var l;var p="";for(l=0;l<f.length;l++){var b=f[l].toLowerCase();if("a"==b||"b"==b||"c"==b||"d"==b||"e"==b||"f"==b||"0"==b||"1"==b||"2"==b||"3"==b||"4"==b||"5"==b||"6"==b||"7"==b||"8"==b||"9"==b)p+=b}if(6==p.length)l=p.substring(0,2),f=p.substring(2,4),p=p.substring(4,6);else if(3==p.length)l=p.substring(0,1),l+=l,f=p.substring(1,2),f+=f,p=p.substring(2,
3),p+=p;else return null;l=parseInt(l,16)/255;f=parseInt(f,16)/255;p=parseInt(p,16)/255;return[l,f,p]};If.prototype.grayValue=function(){return(this.r+this.g+this.b)/3};If.prototype.equals=function(f){return f?this.r===f.r&&this.g===f.g&&this.b===f.b&&this.a===f.a:!1};If.prototype.darker=function(f){var l=this.mixedWith(Ed.Color.black,.5);return 1<f?l.darker(f-1):l};If.prototype.lighter=function(f){if(0==f)return this;var l=this.mixedWith(Ed.Color.white,.5);return 1<f?l.lighter(f-1):l};If.prototype.interpolate=
function(f,l){if(l.isGradient)return l.interpolate(1-f,this);l=Ed.obj.isArray(l)?l:l.toTuple();return Ed.Color.fromTuple(this.toTuple().map(function(p,b){return Ed.num.interpolate(f,p,l[b])}))};If.prototype.toString=function(){return 1===this.a?"rgb("+Ed.floor(this.r)+","+Ed.floor(this.g)+","+Ed.floor(this.b)+")":this.toRGBAString()};If.prototype.toRGBAString=function(){return"rgba("+Math.floor(255.99*this.r)+","+Math.floor(255.99*this.g)+","+Math.floor(255.99*this.b)+","+this.a+")"};If.prototype.toHexString=
function(){function f(l){for(;2>l.length;)l="0"+l;return l}return f(Math.floor(255.99*this.r).toString(16))+f(Math.floor(255.99*this.g).toString(16))+f(Math.floor(255.99*this.b).toString(16))};If.prototype.toTuple=function(){return[this.r,this.g,this.b,this.a]};If.prototype.toTuple8Bit=function(){return[255*this.r,255*this.g,255*this.b,255*this.a]};If.prototype.toHSB=function(){var f=Math.max(this.r,this.g,this.b),l=Math.min(this.r,this.g,this.b),p;f==l?p=0:f==this.r?p=(this.g-this.b)/(f-l)*60:f==
this.g?p=60*(2+(this.b-this.r)/(f-l)):f==this.b&&(p=60*(4+(this.r-this.g)/(f-l)));return[(p+360)%360,0==f?0:(f-l)/f,f]};If.prototype.withA=function(f){return new Ed.Color(this.r,this.g,this.b,f)};If.prototype.mixedWith=function(f,l){var p=1-l;return new Ed.Color(this.r*l+f.r*p,this.g*l+f.g*p,this.b*l+f.b*p,this.a*l+f.a*p)};If.prototype.invert=function(){return Ed.Color.rgb(255*(1-this.r),255*(1-this.g),255*(1-this.b))};If.prototype.toCSSString=function(){return this.toRGBAString()};If.prototype.__serialize__=
function(){return{__expr__:"Color."+this.toString(),bindings:{"lively.graphics/color.js":["Color"]}}};If.prototype.toJSExpr=function(){return"Color."+(this.name||this.toString())};$jscomp.global.Object.defineProperties(If.prototype,{isColor:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){var f=this,l=Ed.Color.named;return Object.keys(l).find(function(p){return l[p].equals(f)})}}});$jscomp.global.Object.defineProperties(If,{rgbaRegex:{configurable:!0,
enumerable:!0,get:function(){return Ed.rgbaRegex}},named:{configurable:!0,enumerable:!0,get:function(){return this._named?this._named:this._named={black:new Ed.Color(0,0,0),almostBlack:Ed.Color.rgb(64,64,64),white:new Ed.Color(1,1,1),gray:new Ed.Color(.8,.8,.8),red:new Ed.Color(.8,0,0),green:new Ed.Color(0,.8,0),yellow:new Ed.Color(.8,.8,0),blue:new Ed.Color(0,0,.8),purple:new Ed.Color(.5,0,.5),magenta:new Ed.Color(1,0,1),pink:Ed.Color.rgb(255,30,153),turquoise:Ed.Color.rgb(0,240,255),tangerine:Ed.Color.rgb(242,
133,0),orange:Ed.Color.rgb(255,153,0),cyan:Ed.Color.rgb(0,255,255),brown:Ed.Color.rgb(182,67,0),limeGreen:Ed.Color.rgb(51,255,0),darkGray:Ed.Color.rgb(102,102,102),lightGray:Ed.Color.rgb(230,230,230),veryLightGray:Ed.Color.rgb(243,243,243),transparent:Ed.Color.rgba(0,0,0,0),lively:Ed.Color.rgb(245,124,0)}}}});Ka("C",If);Ed.Color=If;Object.assign(Ed.Color,Ed.Color.named);var Cr=function(f){this.stops=f?f.map(function(l){return l}):[]};Cr.create=function(f){var l=[],p;for(p in f)l.push({offset:Number(p),
color:f[p]});return new this({stops:l})};Cr.parse=function(f){return f.startsWith("radial-gradient")?Ed.RadialGradient.parse(f):f.startsWith("linear-gradient")?Ed.LinearGradient.parse(f):Ed.Color.fromTuple(Ed.Color.parse(f))};Cr.prototype.equals=function(f){return f&&f.isGradient?this.toString()==f.toString():!1};Cr.prototype.getStopsLighter=function(f){return Ed.arr.collect(this.stops,function(l){return{offset:l.offset,color:l.color.lighter(f)}})};Cr.prototype.getStopsDarker=function(f){return Ed.arr.collect(this.stops,
function(l){return{offset:l.offset,color:l.color.darker(f)}})};Cr.prototype.interpolateStops=function(f,l){var p=Ed.pad(this.stops,l.length);l=Ed.pad(l,this.stops.length);var b=[],d;for(d=0;d<p.length;d++){var h=p[d];var a=h.color;var e=h.offset;var n=l[d];h=n.color;n=n.offset;b.push({color:a.interpolate(f,h),offset:Ed.num.interpolate(f,e,n)})}return b};Cr.prototype.__serialize__=function(){return{__expr__:this.toJSExpr(),bindings:{"lively.graphics/color.js":["Color","RadialGradient","LinearGradient"],
"lively.graphics/geometry-2d.js":["pt","rect"]}}};$jscomp.global.Object.defineProperties(Cr.prototype,{isGradient:{configurable:!0,enumerable:!0,get:function(){return!0}}});Ed.Gradient=Cr;var Xk=function(f){var l=void 0===f?{}:f;f=l.vector;l=Ed.Gradient.call(this,l.stops)||this;l.vector=f;return l};$jscomp.inherits(Xk,Ed.Gradient);Xk.parse=function(f){f.match(/\((.*)\)/)[1].split(",")};Xk.prototype.angleToRect=function(f){return Ed.Point.polar(1,f).extentAsRectangle().withCenter(Ed.pt(.5,.5))};Xk.prototype.vectorAsAngle=
function(){return this.vector.extent().theta()};Xk.prototype.toString=function(){return this.toCSSString()};Xk.prototype.lighter=function(f){return new this.constructor({stops:this.getStopsLighter(f),vector:this.vector})};Xk.prototype.darker=function(f){return new this.constructor({stops:this.getStopsDarker(f),vector:this.vector})};Xk.prototype.interpolate=function(f,l,p){p=void 0===p?{width:1E3,height:1E3}:p;l.isColor&&(l=new Ed.LinearGradient({vector:this.vector,stops:this.stops.map(function(b){return{color:l,
offset:b.offset}})}));if("radialGradient"==l.type){if(.5>f)return new Ed.LinearGradient({vector:this.vector.interpolate(f,Ed.rect(0,0,0,1)),stops:this.interpolateStops(f,l.stops.map(function(b,d){return{color:b.color,offset:1}}))});if(.5<=f)return new Ed.RadialGradient({stops:this.interpolateStops(f,l.stops),focus:Ed.pt(.5,0).interpolate(f,l.focus),bounds:Ed.rect(0,0,100*p.width,2*p.height).interpolate(f,l.bounds)})}return new Ed.LinearGradient({stops:this.interpolateStops(f,l.stops),vector:this.vector.interpolate(f,
l.vector)})};Xk.prototype.toCSSString=function(){var f="linear-gradient("+(Ed.num.toDegrees(this.vectorAsAngle())+90+"deg,")+this.stops.map(function(l){return l.color.toRGBAString()+" "+((100*l.offset).toFixed()+"%")}).join(",");return f+")"};Xk.prototype.toJSExpr=function(){return"new LinearGradient({stops: ["+this.stops.map(function(f){return"{offset: "+f.offset+", color: "+f.color.toJSExpr()+"}"}).join(", ")+"], vector: "+this.vector+"})"};$jscomp.global.Object.defineProperties(Xk.prototype,{type:{configurable:!0,
enumerable:!0,get:function(){return"linearGradient"}},vectors:{configurable:!0,enumerable:!0,get:function(){return{northsouth:Ed.rect(Ed.pt(0,0),Ed.pt(0,1)),northeast:Ed.rect(Ed.pt(1,0),Ed.pt(0,1)),westeast:Ed.rect(Ed.pt(1,0),Ed.pt(0,0)),southeast:Ed.rect(Ed.pt(1,1),Ed.pt(0,0)),southnorth:Ed.rect(Ed.pt(0,1),Ed.pt(0,0)),southwest:Ed.rect(Ed.pt(0,1),Ed.pt(1,0)),eastwest:Ed.rect(Ed.pt(0,0),Ed.pt(1,0)),northwest:Ed.rect(Ed.pt(0,0),Ed.pt(1,1))}}},vector:{configurable:!0,enumerable:!0,get:function(){return this._vector},
set:function(f){this._vector=f?"string"===typeof f?this.vectors[f.toLowerCase()]:"number"===typeof f?this.angleToRect(f):f:this.vectors.northsouth}}});Ka("a9",Xk);Ed.LinearGradient=Xk;var pm=function(f){var l=void 0===f?{}:f;f=l.focus;var p=l.bounds;l=Ed.Gradient.call(this,l.stops)||this;l.focus=f||Ed.pt(.5,.5);l.bounds=p||new Ed.Rectangle(0,0,20,20);return l};$jscomp.inherits(pm,Ed.Gradient);pm.parse=function(f){f.match(/\((.*)\)/)[1].split(",")};pm.prototype.toString=function(){return this.toCSSString()};
pm.prototype.lighter=function(f){return new this.constructor({stops:this.getStopsLighter(f),focus:this.focus,bounds:this.bounds})};pm.prototype.darker=function(){return new this.constructor({stops:this.getStopsDarker(),focus:this.focus,bounds:this.bounds})};pm.prototype.interpolate=function(f,l,p){p=void 0===p?{height:1E3,width:1E3}:p;l.isColor&&(l=new Ed.RadialGradient({vector:this.vector,bounds:this.bounds,stops:this.stops.map(function(b){return{color:l,offset:b.offset}})}));return"linearGradient"==
l.type?l.interpolate(1-f,this,p):new Ed.RadialGradient({bounds:this.bounds.interpolate(f,l.bounds),stops:this.interpolateStops(f,l.stops),focus:this.focus.interpolate(f,l.focus)})};pm.prototype.toCSSString=function(){var f=this.focus.scaleBy(100),l=this.bounds.extent();f="radial-gradient("+l.x/2+"px "+l.y/2+"px at "+f.x+"% "+f.y+"%";for(l=0;l<this.stops.length;l++)f+=","+this.stops[l].color.toRGBAString()+" "+((100*this.stops[l].offset).toFixed()+"%");return f+")"};pm.prototype.toJSExpr=function(){return"new RadialGradient({stops: ["+
this.stops.map(function(f){return"{offset: "+f.offset+", color: "+f.color.toJSExpr()+"}"}).join(", ")+"], bounds: "+this.bounds+", focus: "+this.focus.toString(!1)+"})"};$jscomp.global.Object.defineProperties(pm.prototype,{type:{configurable:!0,enumerable:!0,get:function(){return"radialGradient"}}});Ka("a7",pm);Ed.RadialGradient=pm;var SB=Ka("bj","#1abc9c #e8f8f5 #d1f2eb #a3e4d7 #76d7c4 #48c9b0 #1abc9c #17a589 #148f77 #117864 #0e6251 #16a085 #e8f6f3 #d0ece7 #a2d9ce #73c6b6 #45b39d #16a085 #138d75 #117a65 #0e6655 #0b5345 #2ecc71 #eafaf1 #d5f5e3 #abebc6 #82e0aa #58d68d #2ecc71 #28b463 #239b56 #1d8348 #186a3b #27ae60 #e9f7ef #d4efdf #a9dfbf #7dcea0 #52be80 #27ae60 #229954 #1e8449 #196f3d #145a32 #3498db #ebf5fb #d6eaf8 #aed6f1 #85c1e9 #5dade2 #3498db #2e86c1 #2874a6 #21618c #1b4f72 #2980b9 #eaf2f8 #d4e6f1 #a9cce3 #7fb3d5 #5499c7 #2980b9 #2471a3 #1f618d #1a5276 #154360 #9b59b6 #f5eef8 #ebdef0 #d7bde2 #c39bd3 #af7ac5 #9b59b6 #884ea0 #76448a #633974 #512e5f #8e44ad #f4ecf7 #e8daef #d2b4de #bb8fce #a569bd #8e44ad #7d3c98 #6c3483 #5b2c6f #4a235a #34495e #ebedef #d6dbdf #aeb6bf #85929e #5d6d7e #34495e #2e4053 #283747 #212f3c #1b2631 #2c3e50 #eaecee #d5d8dc #abb2b9 #808b96 #566573 #2c3e50 #273746 #212f3d #1c2833 #17202a #f1c40f #fef9e7 #fcf3cf #f9e79f #f7dc6f #f4d03f #f1c40f #d4ac0d #b7950b #9a7d0a #7d6608 #f39c12 #fef5e7 #fdebd0 #fad7a0 #f8c471 #f5b041 #f39c12 #d68910 #b9770e #9c640c #7e5109 #e67e22 #fdf2e9 #fae5d3 #f5cba7 #f0b27a #eb984e #e67e22 #ca6f1e #af601a #935116 #784212 #d35400 #fbeee6 #f6ddcc #edbb99 #e59866 #dc7633 #d35400 #ba4a00 #a04000 #873600 #6e2c00 #e74c3c #fdedec #fadbd8 #f5b7b1 #f1948a #ec7063 #e74c3c #cb4335 #b03a2e #943126 #78281f #c0392b #f9ebea #f2d7d5 #e6b0aa #d98880 #cd6155 #c0392b #a93226 #922b21 #7b241c #641e16 #ecf0f1 #fdfefe #fbfcfc #f7f9f9 #f4f6f7 #f0f3f4 #ecf0f1 #d0d3d4 #b3b6b7 #979a9a #7b7d7d #bdc3c7 #f8f9f9 #f2f3f4 #e5e7e9 #d7dbdd #cacfd2 #bdc3c7 #a6acaf #909497 #797d7f #626567 #95a5a6 #f4f6f6 #eaeded #d5dbdb #bfc9ca #aab7b8 #95a5a6 #839192 #717d7e #5f6a6a #4d5656 #7f8c8d #f2f4f4 #e5e8e8 #ccd1d1 #b2babb #99a3a4 #7f8c8d #707b7c #616a6b #515a5a #424949".split(" "));
Ed.flatDesignColors=SB;Ed.flatDesignColors=SB;Ed.flatDesignColors=SB;var TB=Ka("bk","#f44336 #ffebee #ffcdd2 #ef9a9a #e57373 #ef5350 #f44336 #e53935 #d32f2f #c62828 #b71c1c #ff8a80 #ff5252 #ff1744 #d50000 #e91e63 #fce4ec #f8bbd0 #f48fb1 #f06292 #ec407a #e91e63 #d81b60 #c2185b #ad1457 #880e4f #ff80ab #ff4081 #f50057 #c51162 #9c27b0 #f3e5f5 #e1bee7 #ce93d8 #ba68c8 #ab47bc #9c27b0 #8e24aa #7b1fa2 #6a1b9a #4a148c #ea80fc #e040fb #d500f9 #aa00ff #673ab7 #ede7f6 #d1c4e9 #b39ddb #9575cd #7e57c2 #673ab7 #5e35b1 #512da8 #4527a0 #311b92 #b388ff #7c4dff #651fff #6200ea #3f51b5 #e8eaf6 #c5cae9 #9fa8da #7986cb #5c6bc0 #3f51b5 #3949ab #303f9f #283593 #1a237e #8c9eff #536dfe #3d5afe #304ffe #2196f3 #e3f2fd #bbdefb #90caf9 #64b5f6 #42a5f5 #2196f3 #1e88e5 #1976d2 #1565c0 #0d47a1 #82b1ff #448aff #2979ff #2962ff #03a9f4 #e1f5fe #b3e5fc #81d4fa #4fc3f7 #29b6f6 #03a9f4 #039be5 #0288d1 #0277bd #01579b #80d8ff #40c4ff #00b0ff #0091ea #00bcd4 #e0f7fa #b2ebf2 #80deea #4dd0e1 #26c6da #00bcd4 #00acc1 #0097a7 #00838f #006064 #84ffff #18ffff #00e5ff #00b8d4 #009688 #e0f2f1 #b2dfdb #80cbc4 #4db6ac #26a69a #009688 #00897b #00796b #00695c #004d40 #a7ffeb #64ffda #1de9b6 #00bfa5 #4caf50 #e8f5e9 #c8e6c9 #a5d6a7 #81c784 #66bb6a #4caf50 #43a047 #388e3c #2e7d32 #1b5e20 #b9f6ca #69f0ae #00e676 #00c853 #8bc34a #f1f8e9 #dcedc8 #c5e1a5 #aed581 #9ccc65 #8bc34a #7cb342 #689f38 #558b2f #33691e #ccff90 #b2ff59 #76ff03 #64dd17 #cddc39 #f9fbe7 #f0f4c3 #e6ee9c #dce775 #d4e157 #cddc39 #c0ca33 #afb42b #9e9d24 #827717 #f4ff81 #eeff41 #c6ff00 #aeea00 #ffeb3b #fffde7 #fff9c4 #fff59d #fff176 #ffee58 #ffeb3b #fdd835 #fbc02d #f9a825 #f57f17 #ffff8d #ffff00 #ffea00 #ffd600 #ffc107 #fff8e1 #ffecb3 #ffe082 #ffd54f #ffca28 #ffc107 #ffb300 #ffa000 #ff8f00 #ff6f00 #ffe57f #ffd740 #ffc400 #ffab00 #ff9800 #fff3e0 #ffe0b2 #ffcc80 #ffb74d #ffa726 #ff9800 #fb8c00 #f57c00 #ef6c00 #e65100 #ffd180 #ffab40 #ff9100 #ff6d00 #ff5722 #fbe9e7 #ffccbc #ffab91 #ff8a65 #ff7043 #ff5722 #f4511e #e64a19 #d84315 #bf360c #ff9e80 #ff6e40 #ff3d00 #dd2c00 #795548 #efebe9 #d7ccc8 #bcaaa4 #a1887f #8d6e63 #795548 #6d4c41 #5d4037 #4e342e #3e2723 #9e9e9e #fafafa #f5f5f5 #eeeeee #e0e0e0 #bdbdbd #9e9e9e #757575 #616161 #424242 #212121 #607d8b #eceff1 #cfd8dc #b0bec5 #90a4ae #78909c #607d8b #546e7a #455a64 #37474f #263238 #ffffff #000000".split(" "));
Ed.materialDesignColors=TB;Ed.materialDesignColors=TB;Ed.materialDesignColors=TB;var UB=Ka("bl","ccff00 ccff33 ccff66 ccff99 ccffcc ccffff ffffff ffffcc ffff99 ffff66 ffff33 ffff00 cccc00 cccc33 cccc66 cccc99 cccccc ccccff ffccff ffcccc ffcc99 ffcc66 ffcc33 ffcc00 cc9900 cc9933 cc9966 cc9999 cc99cc cc99ff ff99ff ff99cc ff9999 ff9966 ff9933 ff9900 cc6600 cc6633 cc6666 cc6699 cc66cc cc66ff ff66ff ff66cc ff6699 ff6666 ff6633 ff6600 cc3300 cc3333 cc3366 cc3399 cc33cc cc33ff ff33ff ff33cc ff3399 ff3366 ff3333 ff3300 cc0000 cc0033 cc0066 cc0099 cc00cc cc00ff ff00ff ff00cc ff0099 ff0066 ff0033 ff0000 660000 660033 660066 660099 6600cc 6600ff 9900ff 9900cc 990099 990066 990033 990000 663300 663333 663366 663399 6633cc 6633ff 9933ff 9933cc 993399 993366 993333 993300 666600 666633 666666 666699 6666cc 6666ff 9966ff 9966cc 996699 996666 996633 996600 669900 669933 669966 669999 6699cc 6699ff 9999ff 9999cc 999999 999966 999933 999900 66cc00 66cc33 66cc66 66cc99 66cccc 66ccff 99ccff 99cccc 99cc99 99cc66 99cc33 99cc00 66ff00 66ff33 66ff66 66ff99 66ffcc 66ffff 99ffff 99ffcc 99ff99 99ff66 99ff33 99ff00 00ff00 00ff33 00ff66 00ff99 00ffcc 00ffff 33ffff 33ffcc 33ff99 33ff66 33ff33 33ff00 00cc00 00cc33 00cc66 00cc99 00cccc 00ccff 33ccff 33cccc 33cc99 33cc66 33cc33 33cc00 009900 009933 009966 009999 0099cc 0099ff 3399ff 3399cc 339999 339966 339933 339900 006600 006633 006666 006699 0066cc 0066ff 3366ff 3366cc 336699 336666 336633 336600 003300 003333 003366 003399 0033cc 0033ff 3333ff 3333cc 333399 333366 333333 333300 000000 000033 000066 000099 0000cc 0000ff 3300ff 3300cc 330099 330066 330033 330000".split(" "));
Ed.webSafeColors=UB;Ed.webSafeColors=UB;Ed.webSafeColors=UB;var gpa=Object.freeze({__proto__:null,Complementary:dt,Triadic:et,Tetradic:ov,Quadratic:ft,Analogous:gt,Neutral:pv,Color:If,LinearGradient:Xk,RadialGradient:pm,flatDesignColors:SB,materialDesignColors:TB,webSafeColors:UB}),x9=lively.FreezerRuntime.recorderFor("lively.graphics/index.js");Object.assign(x9,gpa);Object.assign(x9,fpa);var hpa=Object.freeze({__proto__:null,Complementary:dt,Triadic:et,Tetradic:ov,Quadratic:ft,Analogous:gt,Neutral:pv,
Color:If,LinearGradient:Xk,RadialGradient:pm,flatDesignColors:SB,materialDesignColors:TB,webSafeColors:UB,Point:Pf,Rectangle:ie,Transform:oj,Line:Wk,rect:cl,pt:xh}),oi=lively.FreezerRuntime.recorderFor("lively.serializer2/class-helper.js");oi.getClassName=Io;oi.getSerializableClassMeta=ms;oi.locateClass=Gp;oi.arr=cf;oi.string=Ng;oi.classMetaForSerializationProp="lively.serializer-class-info";oi.classSuperClassProp=Symbol.for("lively-instance-superclass");oi.classNameProp=Symbol.for("__LivelyClassName__");
oi.moduleMetaInClassProp=Symbol.for("lively-module-meta");oi.getClassName=Io;oi.getClassName=Io;oi.getSerializableClassMeta=ms;oi.getSerializableClassMeta=ms;oi.locateClass=Gp;oi.locateClass=Gp;var oq=function(f){this.options=Object.assign({ignoreClassNotFound:!0},f);this[Symbol.for("lively-instance-restorer")]=!0};oq.prototype.addClassInfo=function(f,l,p){(f=oi.getSerializableClassMeta(l))&&(p[oi.classMetaForSerializationProp]=f)};oq.prototype.restoreIfClassInstance=function(f,l){if(l.hasOwnProperty(oi.classMetaForSerializationProp)&&
(f=l[oi.classMetaForSerializationProp],f.className)){l=oi.locateClass(f);if(!l||"function"!==typeof l){l="Trying to deserialize instance of "+JSON.stringify(f)+" but this class cannot be found!";if(!this.options.ignoreClassNotFound)throw Error(l);console.error(l);return{isClassPlaceHolder:!0,className:f.className}}return l.hasOwnProperty(Symbol.for("lively-instance-superclass"))?new l(this):new l}};oq.sourceModulesInObjRef=function(f){var l=[];(f=f&&f[oi.classMetaForSerializationProp])&&f.module&&
l.push(f.module);return l};oq.sourceModulesIn=function(f){var l=[];Object.keys(f).forEach(function(p){(p=f[p])&&p[oi.classMetaForSerializationProp]&&l.push(p[oi.classMetaForSerializationProp])});return oi.arr.uniqBy(l,function(p,b){var d=p.module,h=b.module;return!d&&!h||d&&!h||!d&&h?p.className===b.className:p.className===b.className&&d.package.name==h.package.name&&d.package.pathInPackage==h.package.pathInPackage})};$jscomp.global.Object.defineProperties(oq.prototype,{sourceModuleNameProperty:{configurable:!0,
enumerable:!0,get:function(){return"__SourceModuleName__"}}});$jscomp.global.Object.defineProperties(oq,{moduleMetaInClassProp:{configurable:!0,enumerable:!0,get:function(){return oi.moduleMetaInClassProp}},classMetaForSerializationProp:{configurable:!0,enumerable:!0,get:function(){return oi.classMetaForSerializationProp}},classSuperClassProp:{configurable:!0,enumerable:!0,get:function(){return oi.classSuperClassProp}},classNameProperty:{configurable:!0,enumerable:!0,get:function(){return oi.classNameProp}}});
oi.ClassHelper=oq;oi.default=oq;var qh=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins/expression-serializer.js");qh.deserializeSpec=Jo;qh.serializeSpec=an;qh.string=Ng;qh.Closure=Gi;qh.Path=Eg;qh.obj=xf;qh.properties=Qm;qh.arr=cf;qh.getSerializableClassMeta=ms;qh.connect=Ik;qh.joinPath=sg;var kk=function(f){f=Object.assign({prefix:"__lv_expr__"},f).prefix;this._decanonicalized={};this.prefix=f+":"};kk.prototype.isSerializedExpression=function(f){return 0===f.indexOf(this.prefix)};kk.prototype.requiredModulesOf__expr__=
function(f){return this.isSerializedExpression(f)?(f=this.exprStringDecode(f).bindings)?Object.keys(f):null:null};kk.prototype.exprStringDecode=function(f){var l=f.indexOf(":");f.slice(0,l);f=f.slice(l+1);for(var p={},b=!1;f&&f.startsWith("{")&&0<=(l=f.indexOf("}:"));){b=!0;var d=f.slice(1,l);f=f.slice(l+2);f.includes("https:")&&f.indexOf("https:")<f.indexOf(":")?(f=f.replace("https:","__HTTP_PLACEHOLDER__"),l=f.indexOf(":")-20+6,f=f.replace("__HTTP_PLACEHOLDER__","https:")):l=f.indexOf(":");var h=
f.slice(0,l);d=d.split(",").filter(function(a){return!!a.trim()}).map(function(a){if(!a.includes(":"))return a;var e=$jscomp.makeIterator(a.split(":"));a=e.next().value;e=e.next().value;return{exported:a,local:e}});p[h]=d;f=f.slice(l+1)}return{__expr__:f,bindings:b?p:null}};kk.prototype.exprStringEncode=function(f){var l=f.bindings;f=String(f.__expr__);if(l)for(var p=Object.keys(l),b=0;b<p.length;b++){var d=p[b],h=l[d];Array.isArray(h)&&(h=h.map(function(a){return"string"===typeof a?a:a.exported+
":"+a.local}).join(","));f="{"+h+"}:"+d+":"+f}return this.prefix+f};kk.prototype.getExpressionForFunction=function(f){var l=f[Symbol.for("lively-module-meta")],p={};return this.exprStringEncode({__expr__:f.name,bindings:(p[qh.joinPath(l.package.name,l.pathInPackage)]=[f.name],p)})};kk.prototype.convert__expr__obj=function(f){console.assert("__expr__"in f,"obj has no property __expr__");return this.prefix+f.__expr__};kk.prototype.__eval__=function(f,l){return qh.__eval__(f,l)};kk.prototype.deserializeExpr=
function(f){if(!f.startsWith(this.prefix))throw Error('"'+f+'" is not a serialized expression, missing prefix "'+this.prefix+'"');return this.deserializeExprObj(this.exprStringDecode(f))};kk.prototype.resolveModule=function(f){return this._decanonicalized[f]||(this._decanonicalized[f]=System.decanonicalize(f))};kk.prototype.deserializeExprObj=function(f){var l=f.__expr__;f=f.bindings;var p={};if(f)for(var b=f?Object.keys(f):[],d=0;d<b.length;d++){var h=b[d],a=f[h];if(lively.FreezerRuntime){var e=
lively.FreezerRuntime.get(lively.FreezerRuntime.decanonicalize(h));if(!e){var n=lively.FreezerRuntime.fetchStandaloneFor(h);n&&(e=n.exports)}e.exports&&(e=e.exports)}else e=System.get(this.resolveModule(h));if(!e)throw Error("[lively.serializer] expression eval: bindings specify to import "+h+" but this module is not loaded!\nSource: "+l);for(h=0;h<a.length;h++){var q=a[h],r=n=void 0;"string"===typeof q?r=n=q:"object"===typeof q&&(n=q.local,r=q.exported);p[n]=e[r];l="var "+n+" = __boundValues__."+
n+";\n"+l}}return this.__eval__(l,p)};Ka("b3",kk);qh.ExpressionSerializer=kk;qh.__eval__=qh.Closure.fromSource("function __eval__(__source__, __boundValues__) { \n  return eval(__source__); \n}").getFunc();qh.deserializeSpec=Jo;qh.deserializeSpec=Jo;qh.serializeSpec=an;qh.serializeSpec=an;qh.default=kk;var gg=lively.FreezerRuntime.recorderFor("lively.bindings/index.js");gg.connect=Ik;gg.disconnect=Hp;gg.disconnectAll=ax;gg.once=Sq;gg.signal=Jk;gg.callWhenNotNull=wE;gg.callWhenPathNotNull=xE;gg.noUpdate=
ns;gg.string=Ng;gg.arr=cf;gg.Closure=Gi;gg.obj=xf;gg.stringifyFunctionWithoutToplevelRecorder=Ww;gg.ExpressionSerializer=kk;gg.connect=Ik;gg.connect=Ik;gg.disconnect=Hp;gg.disconnect=Hp;gg.disconnectAll=ax;gg.disconnectAll=ax;gg.once=Sq;gg.once=Sq;gg.signal=Jk;gg.signal=Jk;gg.noUpdate=ns;gg.noUpdate=ns;var hJ=function(f){var l=lively.FreezerRuntime.recorderFor("lively.bindings/index.js"),p=l.hasOwnProperty("AttributeConnection")&&"function"===typeof l.AttributeConnection?l.AttributeConnection:l.AttributeConnection=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,h,a,e){this.init(b,d,h,a,e)}},{key:"init",value:function(b,d,h,a,e){this.doNotSerialize=["isActive","converter","updater"];this.sourceObj=b;this.sourceAttrName=d;this.targetObj=h;this.targetMethodName=a;this.varMapping={source:b,target:h};e=Object.assign({removeAfterUpdate:!1,forceAttributeConnection:!1,
garbageCollect:!1,signalOnAssignment:!0},e);e.removeAfterUpdate&&(this.removeAfterUpdate=!0);e.forceAttributeConnection&&(this.forceAttributeConnection=!0);"boolean"===typeof e.garbageCollect&&(this.garbageCollect=e.garbageCollect);"boolean"===typeof e.signalOnAssignment&&(this.signalOnAssignment=e.signalOnAssignment);e.converter&&this.setConverter(e.converter);e.updater&&this.setUpdater(e.updater);e.varMapping&&(this.varMapping=Object.assign(e.varMapping,this.varMapping));this.getSpec();return this}},
{key:"__additionally_serialize__",value:function(b,d,h,a){delete this.varMapping._rev;gg.arr.equals(Object.keys(this.varMapping),["source","target"])?delete b.props.varMapping:a("varMapping",this._getSerializableVarMapping())}},{key:"__after_deserialize__",value:function(b,d){this.varMapping||(this.varMapping={},this.varMapping.source=this.sourceObj,this.varMapping.target=this.targetObj);this.onSourceAndTargetRestored()}},{key:"_getSerializableVarMapping",value:function(){for(var b=Object.assign({},
this.varMapping),d=$jscomp.makeIterator(Object.keys(b)),h=d.next();!h.done;h=d.next()){h=h.value;try{gg.obj.isFunction(b[h])&&(b[h]=(new gg.ExpressionSerializer).getExpressionForFunction(b[h]))}catch(a){throw Error("Cannot be serialized due to lack of module information: "+h+" in "+this);}}return b}},{key:"onSourceAndTargetRestored",value:function(){this.sourceObj&&this.targetObj&&this.connect()}},{key:"copy",value:function(b){return gg.AttributeConnection.fromLiteral(this.toLiteral(),b)}},{key:"fixInstanceAfterCopyingFromSite",
value:function(b,d,h){this.disconnect()}},{key:"clone",value:function(){var b=new this.constructor(this.getSourceObj(),this.getSourceAttrName(),this.getTargetObj(),this.getTargetMethodName(),this.getSpec());this.dependedBy&&(b.dependedBy=this.dependedBy);return b}},{key:"getTargetObj",value:function(){return this.targetObj}},{key:"getSourceObj",value:function(){return this.sourceObj}},{key:"getSourceAttrName",value:function(){return this.sourceAttrName}},{key:"getTargetMethodName",value:function(){return this.targetMethodName}},
{key:"getSourceValue",value:function(){return this.getSourceObj()[this.getSourceAttrName()]}},{key:"getPrivateSourceValue",value:function(){return this.sourceObj[this.privateAttrName(this.sourceAttrName)]}},{key:"getConverter",value:function(){if(!this.converterString)return null;this.converter||(this.converter=gg.Closure.fromSource(this.converterString,this.varMapping).recreateFunc());return this.converter}},{key:"setConverter",value:function(b){delete this.converter;return this.converterString=
b?String(b):null}},{key:"getUpdater",value:function(){if(!this.updaterString)return null;this.updater||(this.updater=gg.Closure.fromSource(this.updaterString,this.varMapping).recreateFunc());return this.updater}},{key:"setUpdater",value:function(b){delete this.updater;return this.updaterString=b?gg.stringifyFunctionWithoutToplevelRecorder(b):null}},{key:"getSpec",value:function(){var b={};this.updaterString&&(b.updater=this.getUpdater());this.converterString&&(b.converter=this.getConverter());this.removeAfterUpdate&&
(b.removeAfterUpdate=!0);this.forceAttributeConnection&&(b.forceAttributeConnection=!0);this.hasOwnProperty("garbageCollect")&&(b.garbageCollect=this.garbageCollect);this.hasOwnProperty("signalOnAssignment")&&(b.signalOnAssignment=this.signalOnAssignment);return b}},{key:"resetSpec",value:function(){delete this.garbageCollect;delete this.signalOnAssignment;delete this.removeAfterUpdate;delete this.forceAttributeConnection;delete this.converter;delete this.converterString;delete this.updater;delete this.updaterString}},
{key:"privateAttrName",value:function(b){return"$$"+b}},{key:"activate",value:function(){this.isActive=!0}},{key:"deactivate",value:function(){delete this.isActive}},{key:"connect",value:function(){var b=this.getExistingConnection();b!==this&&(b&&b.disconnect(),this.addAttributeConnection());b=this.sourceObj;var d=this.sourceAttrName,h=this.forceAttributeConnection,a=b.__lookupSetter__(d),e=b.__lookupGetter__(d),n=!a&&!e&&(this.getSourceValue()||this.getPrivateSourceValue());"function"!==typeof n||
h?this.addSourceObjGetterAndSetter(e,a):n.isWrapped||this.addConnectionWrapper(b,d,n);return this}},{key:"disconnect",value:function(){var b=this,d=this.sourceObj;if(!d||!d.attributeConnections)return this.removeSourceObjGetterAndSetter();d.attributeConnections=d.attributeConnections.filter(function(a){return!b.isSimilarConnection(a)});var h=d.attributeConnections.filter(function(a){return b.getSourceAttrName()==a.getSourceAttrName()});0==d.attributeConnections.length&&delete d.attributeConnections;
0==h.length&&this.removeSourceObjGetterAndSetter();return null}},{key:"update",value:function(b,d){if(this.isActive)return null;var h=this,a=this.getUpdater(),e=this.getConverter(),n=this.targetObj,q=this.targetMethodName;if(!n||!q)return d="Cannot update "+this.toString(b)+" because of no target ("+n+") or targetProp ("+q+") ",this.isWeakConnection&&this.disconnect(),console.error(d),null;var r=n[q],v=function(D,E,I,K,P,N){I=[D,E,I,K,P,N];e&&(b=e.call(h,D,E),D=I[0]=b);D="function"===typeof r?r.apply(n,
I):n[q]=D;h.removeAfterUpdate&&h.disconnect();return D};try{return this.isActive=!0,a?a.call(this,v,b,d):v(b,d)}catch(D){var y=this.sourceObj&&"function"===typeof this.sourceObj.world&&this.sourceObj.world()||this.targetObj&&"function"===typeof this.targetObj.world&&this.targetObj.world();y?y.logError(D,"AttributeConnection>>update: "):console.error("Error when trying to update "+this+" with value "+b+":\n"+D+"\n"+D.stack)}finally{delete this.isActive}return null}},{key:"addSourceObjGetterAndSetter",
value:function(b,d){if(!(b&&b.isAttributeConnectionGetter||d&&d.isAttributeConnectionSetter)){var h=this.sourceObj,a=this.sourceAttrName,e=this.privateAttrName(a);h[e]&&console.warn("newAttrName "+e+" already exists.Are there already other connections?");h.hasOwnProperty("doNotSerialize")||(h.doNotSerialize=[]);gg.arr.pushIfNotIncluded(h.doNotSerialize,e);h.hasOwnProperty("doNotCopyProperties")||(h.doNotCopyProperties=[]);gg.arr.pushIfNotIncluded(h.doNotCopyProperties,e);b&&(h.hasOwnProperty(a)?h.__defineGetter__(e,
b):h.__defineGetter__(e,function(){return h.constructor.prototype.__lookupGetter__(a).bind(h)()}));d&&(h.hasOwnProperty(a)?h.__defineSetter__(e,d):h.__defineSetter__(e,function(n){h.constructor.prototype.__lookupSetter__(a).bind(h)(n)}));b||d||!h.hasOwnProperty(a)||(h[e]=h[a]);h.__defineSetter__(a,function(n){var q=h[e];h[e]=n;if(void 0===h.attributeConnections)return console.error("Sth wrong with sourceObj, has no attributeConnections"),null;h.attributeConnections.forEach(function(r){r&&r.getSourceAttrName()===
a&&r.signalOnAssignment&&r.update(n,q)});return n});h.__lookupSetter__(a).isAttributeConnectionSetter=!0;h.__defineGetter__(a,function(){return h[e]});h.__lookupGetter__(a).isAttributeConnectionGetter=!0}}},{key:"addConnectionWrapper",value:function(b,d,h){if("function"!==typeof h)throw Error("addConnectionWrapper didnt get a method to wrap");var a;if(a=b.hasOwnProperty(d)){b[this.privateAttrName(d)]=h;var e=function(){return h}}else e=function(){return Object.getPrototypeOf(b)[d]};b[d]=function(){if(void 0===
this.attributeConnections)throw Error("[lively.bindings] Something is wrong with connection source object, it has no attributeConnections");for(var n=this.attributeConnections.slice(),q=this[d].originalFunction.apply(this,arguments),r=0;r<n.length;r++){var v=n[r];v.getSourceAttrName()===d&&v.update(arguments[0])}return q};b[d].isOwnProperty=a;b[d].isWrapped=!0;b[d].isConnectionWrapper=!0;Object.defineProperty(b[d],"originalFunction",{get:e});b[d].toString=function(){return"<Wrapped "+e()+">"}}},{key:"removeSourceObjGetterAndSetter",
value:function(){var b=this.sourceAttrName,d=this.privateAttrName(b),h=this.sourceObj;if(h){if(h.__lookupGetter__(b)){if(delete h[b],h.hasOwnProperty(d)){try{h[b]=h[d]}catch(e){}delete h[d]}}else if(h[b]&&h[b].isConnectionWrapper){var a=h[b];delete h[b];h[b]||(h[b]=a.originalFunction)}h.doNotSerialize&&h.doNotSerialize.includes(d)&&(h.doNotSerialize=gg.arr.without(h.doNotSerialize,d),0==h.doNotSerialize.length&&delete h.doNotSerialize);h.doNotCopyProperties&&h.doNotCopyProperties.includes(d)&&(h.doNotCopyProperties=
gg.arr.without(h.doNotCopyProperties,d),0==h.doNotCopyProperties.length&&delete h.doNotCopyProperties)}}},{key:"addAttributeConnection",value:function(){this.sourceObj.attributeConnections||(this.sourceObj.attributeConnections=[]);this.sourceObj.attributeConnections.push(this)}},{key:"getExistingConnection",value:function(){var b=this.sourceObj&&this.sourceObj.attributeConnections;if(!b)return null;for(var d=0,h=b.length;d<h;d++)if(this.isSimilarConnection(b[d]))return b[d];return null}},{key:"isRecursivelyActivated",
value:function(){return this.isActive}},{key:"isSimilarConnection",value:function(b){return b&&b.constructor==this.constructor?this.sourceObj==b.sourceObj&&this.sourceAttrName==b.sourceAttrName&&this.targetObj==b.targetObj&&this.targetMethodName==b.targetMethodName:!1}},{key:"toString",value:function(b){try{return gg.string.format("AttributeConnection(%s.%s %s %s.%s)",this.getSourceObj(),this.getSourceAttrName(),b?"--\x3e"+String(b)+"--\x3e":"--\x3e",this.getTargetObj(),this.getTargetMethodName())}catch(d){return"<Error in AttributeConnection>>toString>"}}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AttributeConnection"}}],l,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.bindings",version:"0.1.2"}}},{start:309,end:17530})}(void 0);gg.AttributeConnection=hJ;gg.AttributeConnection=hJ;gg.AttributeConnection=hJ;gg.callWhenNotNull=wE;gg.callWhenNotNull=wE;gg.callWhenPathNotNull=
xE;gg.callWhenPathNotNull=xE;var ipa=Object.freeze({__proto__:null,connect:Ik,disconnect:Hp,disconnectAll:ax,once:Sq,signal:Jk,noUpdate:ns,AttributeConnection:hJ,callWhenNotNull:wE,callWhenPathNotNull:xE}),sd=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js");sd.nyi=function(f){throw Error("Not yet implemented: "+f);};sd.pt=xh;sd.Rectangle=ie;sd.rect=cl;sd.arr=cf;sd.promise=bg;sd.fun=ik;sd.Closure=Gi;sd.num=jk;sd.grid=py;sd.obj=xf;sd.once=Sq;sd.signal=Jk;(function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
p=l.hasOwnProperty("Layout")&&"function"===typeof l.Layout?l.Layout:l.Layout=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){var d=b=void 0===b?{}:b;b=d.spacing;var h=d.padding,a=d.border,e=d.container,n=d.manualUpdate,q=d.autoResize,r=d.ignore,v=d.onScheduleApply,y=d.layoutOrder;d=d.reactToSubmorphAnimations;this.applyRequests=!1;this.border=
Object.assign({top:0,left:0,right:0,bottom:0},a);this.ignore=r||[];this.lastBoundsExtent=this.container&&this.container.bounds().extent();this.active=!1;this.container=e;this.manualUpdate=n;this.reactToSubmorphAnimations=d||!1;this.autoResize=void 0!=q?q:!0;this.onScheduleApply=v||function(D,E,I){};y&&(this.layoutOrder=y,this.layoutOrderSource=JSON.stringify(String(y)));this.spacing=b||0;this._padding=h?"number"===typeof h?sd.Rectangle.inset(h):sd.Rectangle.fromLiteral(h):sd.Rectangle.inset(0)}},
{key:"attach",value:function(){var b=this;this.renderViaCSS||(this.apply(),this.container.master&&this.container.master.whenApplied().then(function(){b.applyRequests=!0;b.forceLayout()}),this.refreshBoundsCache())}},{key:"copy",value:function(){return new this.constructor(this)}},{key:"description",value:function(){return"Describe the layout behavior here."}},{key:"name",value:function(){return"Name presented to the user."}},{key:"isEnabled",value:function(){return!this.active}},{key:"disable",value:function(){this.active=
!0}},{key:"enable",value:function(b){this.active=!1;this.scheduleApply(null,b)}},{key:"padding",get:function(){return this._padding}},{key:"padding",set:function(b){"number"===typeof b&&(b=sd.Rectangle.inset(b));this._padding=b;this.apply()}},{key:"boundsChanged",value:function(b){return!(this.lastBoundsExtent&&b.bounds().extent().equals(this.lastBoundsExtent))}},{key:"extentChanged",value:function(b){return!(this.lastExtent&&b.extent.equals(this.lastExtent))}},{key:"equals",value:function(b){return b.name()==
this.name()}},{key:"layoutableSubmorphs",get:function(){var b=this;this.layoutOrder||(this.layoutOrder=sd.Closure.fromSource(JSON.parse(this.layoutOrderSource)).recreateFunc());return this.container?sd.arr.sortBy(this.container.submorphs.filter(function(d){return d.isLayoutable&&!b.ignore.includes(d.name)}),function(d){return b.layoutOrder(d)}):[]}},{key:"layoutOrder",value:function(b){return this.container.submorphs.indexOf(b)}},{key:"submorphBoundsChanged",get:function(){var b=this.layoutableSubmorphs,
d=this.layoutableSubmorphBounds;if(!d||b.length!=d.length)return!0;for(var h=0;h<b.length;h++)if(!d[h].equals(b[h].bounds()))return!0;return!1}},{key:"refreshBoundsCache",value:function(){this.lastExtent=this.container.extent;this.layoutableSubmorphBounds=this.layoutableSubmorphs.map(function(b){return b.bounds()})}},{key:"onContainerRender",value:function(){this.forceLayout()}},{key:"noLayoutActionNeeded",get:function(){return!this.submorphBoundsChanged&&!this.boundsChanged(this.container)&&!this.extentChanged(this.container)&&
!this.submorphsChanged}},{key:"__dont_serialize__",get:function(){return["lastAnim","animationPromise"]}},{key:"forceLayout",value:function(){var b=this;this.applyRequests&&(this.applyRequests=!1,this.noLayoutActionNeeded||(this.refreshBoundsCache(),this.container.withMetaDo({isLayoutAction:!0,animation:this.lastAnim},function(){return b.apply(b.lastAnim)}),this.lastAnim=!1))}},{key:"forceLayoutsOfMorph",value:function(b){var d=this;b.layout?b.layout.forceLayout():b.submorphs.forEach(function(h){return d.forceLayoutsOfMorph(h)})}},
{key:"forceLayoutsInNextLevel",value:function(){var b=this;this.layoutableSubmorphs.forEach(function(d){return b.forceLayoutsOfMorph(d)})}},{key:"scheduleApply",value:function(b,d,h){h=void 0===h?{}:h;if("function"===typeof this.onScheduleApply)this.onScheduleApply(b,d,h);this.active||(d&&(this.lastAnim=d),this.applyRequests=!0)}},{key:"onSubmorphResized",value:function(b,d){this.scheduleApply(b,this.reactToSubmorphAnimations&&d.meta.animation,d)}},{key:"onSubmorphAdded",value:function(b,d){this.submorphsChanged=
!0;this.scheduleApply(b,d)}},{key:"onSubmorphRemoved",value:function(b,d){this.submorphsChanged=!0;this.scheduleApply(b,d)}},{key:"onChange",value:function(b){var d=b.args,h=b.prop,a=b.value,e=b.prevValue,n=b.meta;n=this.reactToSubmorphAnimations&&n&&n.animation;d=d&&d[0];switch(b.selector){case "removeMorph":this.onSubmorphRemoved(d,n);break;case "addMorphAt":this.onSubmorphAdded(d,n)}"extent"===h&&a&&e&&(e.x!==a.x||e.y!==a.y)&&this.scheduleApply(d,n)}},{key:"affectsLayout",value:function(b,d){b=
d.value;var h=d.prevValue;return["position","scale","rotation","isLayoutable","extent"].includes(d.prop)&&!sd.obj.equals(b,h)}},{key:"onSubmorphChange",value:function(b,d){if(d.meta&&d.meta.isLayoutAction)return this.scheduleApply(b,this.reactToSubmorphAnimation&&d.meta.animation);if(this.affectsLayout(b,d))this.onSubmorphResized(b,d)}},{key:"changePropertyAnimated",value:function(b,d,h,a){if(a){var e=a.duration;a=a.easing;var n={};this.animationPromise=b.animate((n[d]=h,n.duration=e,n.easing=a,n))}else b[d]=
h}},{key:"attachAnimated",value:function(b,d,h){this.active||(this.container=d,this.active=!0,d.layout=this,this.active=!1,this.lastAnim={duration:void 0===b?0:b,easing:h})}},{key:"apply",value:function(b){this.active||(this.active=!0,this.submorphsChanged=!1,this.lastBoundsExtent=this.container&&this.container.bounds().extent(),this.active=!1)}},{key:"ensureBoundsMonitor",value:function(b,d){var h=this;if(d.isLayoutable){var a=this._resizeObservers.get(d);if(a)return a;a=new window.ResizeObserver(function(e){e=
$jscomp.makeIterator(e).next().value;h.onDomResize(a,e,d)});a.observe(b);this._resizeObservers.set(d,a);return a}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Layout"}}],l,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:250,end:7357})})(void 0);(function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
p=l.hasOwnProperty("FloatLayout")&&"function"===typeof l.FloatLayout?l.FloatLayout:l.FloatLayout=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;ac._get(Object.getPrototypeOf(p.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this._orderByIndex=b.orderByIndex||!1;this._resizeSubmorphs="undefined"!==typeof b.resizeSubmorphs?
b.resizeSubmorphs:!1;this.renderViaCSS=b.renderViaCSS||!0;this._resizeObservers=new WeakMap}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"layoutOrder",value:function(b){return this.orderByIndex?this.container.submorphs.indexOf(b):b.left}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(b){this._orderByIndex=b;this.apply()}},{key:"direction",get:function(){return this._direction}},{key:"direction",set:function(b){this._direction=
b;this.onConfigUpdate()}},{key:"align",get:function(){return this._align}},{key:"align",set:function(b){this._align=b;this.onConfigUpdate()}},{key:"autoResize",get:function(){return this._autoResize}},{key:"autoResize",set:function(b){this._autoResize=b;this.onConfigUpdate()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(b){this._spacing=b;this.onConfigUpdate()}},{key:"resizeSubmorphs",get:function(){return this._resizeSubmorphs}},{key:"resizeSubmorphs",set:function(b){this._resizeSubmorphs=
b;this.onConfigUpdate()}},{key:"renderViaCSS",set:function(b){this._renderViaCSS=b;this.layoutableSubmorphs.forEach(function(d){return d.makeDirty()})}},{key:"renderViaCSS",get:function(){return this._renderViaCSS}},{key:"onConfigUpdate",value:function(){this.apply();this.renderViaCSS&&this.layoutableSubmorphs.forEach(function(b){return b.makeDirty()})}},{key:"measureAfterRender",value:function(b){var d=this;b.whenRendered().then(function(){var h=b.env.renderer.getNodeForMorph(b);h&&d.onDomResize(d._resizeObservers.get(b),
{target:h,contentRect:h.getBoundingClientRect()},b)})}},{key:"onDomResize",value:function(b,d,h,a){var e=this,n=d.contentRect,q=d.target;if(h==this.container)return this.updateContainerViaDom(n,!0);h.withMetaDo({isLayoutAction:!0},function(){e.updateSubmorphViaDom(h,q,n,!0)})}},{key:"updateSubmorphViaDom",value:function(b,d,h,a){sd.nyi("updateSubmorphViaDom")}},{key:"updateContainerViaDom",value:function(b,d){sd.nyi("updateContainerViaDom")}},{key:"addSubmorphCSS",value:function(b,d){if(b.isLayoutable){var h=
b.env.renderer.getNodeForMorph(b),a=!h||"visible"!=b.clipMode;h&&this.updateSubmorphViaDom(b,h,h.getBoundingClientRect());h=sd.pt(0,0);a=a?sd.rect(0,0,b.width,b.height):b.submorphBounds().union(b.innerBounds());1!=b.scale&&(a=a.withWidth(a.width*b.scale).withHeight(a.height*b.scale));0!=b.rotation&&(h=b.bounds().topLeft().subPt(b.position).negated());var e=this.computeOffset(b),n={};n.top=Math.max(0,-a.top())+h.y-e.top;n.bottom=a.bottom()-b.height-h.y-e.bottom;n.left=Math.max(0,-a.left())+h.x-e.left;
n.right=a.right()-b.width-h.x-e.right;this.adjustMargin(n);this.resizeSubmorphs&&(d.width="calc(100% - "+2*this.spacing+"px + "+n.offset+"px)");d.position="relative";d.top="unset";d.left="unset";d.marginTop=n.top+"px";d.marginBottom=n.bottom+"px";d.marginLeft=n.left+"px";d.marginRight=n.right+"px";d["flex-shrink"]=0;this.measureAfterRender(b)}}},{key:"adjustMargin",value:function(b){sd.nyi("adjustMargin")}},{key:"computeOffset",value:function(b){sd.nyi("computeOffset")}},{key:"onSubmorphAdded",value:function(b,
d){var h=this;this.renderViaCSS?(this.measureAfterRender(this.container),this.layoutableSubmorphs.forEach(function(a){return h.measureAfterRender(a)})):ac._get(Object.getPrototypeOf(p.prototype),"onSubmorphAdded",this).call(this,b,d)}},{key:"onSubmorphRemoved",value:function(b,d){var h=this;this.renderViaCSS?(this.measureAfterRender(this.container),this.layoutableSubmorphs.forEach(function(a){return h.measureAfterRender(a)})):ac._get(Object.getPrototypeOf(p.prototype),"onSubmorphRemoved",this).call(this,
b,d)}},{key:"onSubmorphResized",value:function(b,d){var h=this;this.renderViaCSS?(b=[b].concat($jscomp.arrayFromIterable(b.ownerChain())).find(function(a){return a.owner==h.container}),b.isLayoutable&&this.expressMeasure(b)):ac._get(Object.getPrototypeOf(p.prototype),"onSubmorphResized",this).call(this,b,d)}},{key:"expressMeasure",value:function(b){var d=b.env.renderer.getNodeForMorph(b);d?this.updateSubmorphViaDom(b,d,d.getBoundingClientRect()):this.measureAfterRender(b)}},{key:"equals",value:function(b){return this.spacing!=
b.spacing||this.align!=b.align||this.direction!=b.direction?!1:!0}},{key:"getSpec",value:function(){return{spacing:this.spacing,resizeSubmorphs:this.resizeSubmorphs,autoResize:this.autoResize,align:this.align,direction:this.direction,padding:this.padding,reactToSubmorphAnimations:this.reactToSubmorphAnimations,orderByIndex:this.orderByIndex,renderViaCSS:this.renderViaCSS}}},{key:"inspect",value:function(b){}},{key:"apply",value:function(b){b=void 0===b?!1:b;var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(d.active||
!d.container||!d.container.submorphs.length||d.renderViaCSS||!d.layoutableSubmorphs.length)return a.return();d.layoutableSubmorphBounds||d.refreshBoundsCache();ac._get(Object.getPrototypeOf(p.prototype),"apply",d).call(d,b);d.active=!0;try{h=d.computeMinContainerExtent(),d.layoutSubmorphs(h,b),h=d.computeMinContainerExtent(),d.resizeContainer(h,b),d.lastBoundsExtent=d.container.bounds().extent()}finally{d.active=!1,d.layoutRequests=!1}return a.return(d.animationPromise)})}},{key:"resizeContainer",
value:function(){sd.nyi("resizeContainer")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FloatLayout"}}],l,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7359,end:14072})})(sd.Layout);var Dr=Ka("aa",function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
p=l.hasOwnProperty("VerticalLayout")&&"function"===typeof l.VerticalLayout?l.VerticalLayout:l.VerticalLayout=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;ac._get(Object.getPrototypeOf(p.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this._align=b.align||"left";this._direction=b.direction||"topToBottom"}},
{key:"name",value:function(){return"Vertical"}},{key:"description",value:function(){return"Assemble the submorphs in a vertically growing list."}},{key:"equals",value:function(b){return ac._get(Object.getPrototypeOf(p.prototype),"equals",this).call(this,b)&&b.name&&"Vertical"==b.name()?!0:!1}},{key:"possibleDirectionValues",get:function(){return["topToBottom","bottomToTop","centered"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"__serialize__",value:function(){return{__expr__:"new VerticalLayout("+
sd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["VerticalLayout"]}}}},{key:"ensureBoundsMonitor",value:function(b,d){if(d.isLayoutable)this.onDomResize(this._resizeObservers.get(d),{target:b,contentRect:b.getBoundingClientRect()},d)}},{key:"layoutSubmorphs",value:function(b,d){var h=this,a=this.container,e=this.layoutableSubmorphs,n=this.spacing,q=this.autoResize,r=this.align,v=this.resizeSubmorphs,y=this.getStartY(b),D=[];b=v?a.width:b.x;q=q&&!v;var E=function(I,K){e.reduce(function(P,
N){v&&h.changePropertyAnimated(N,"width",a.width-2*n,d);h.forceLayoutsOfMorph(N);h.changePropertyAnimated(N,I,P,d);P=N.bounds();D.push(P);return P[I]().addXY(0,P.height+n)},K)};this.layoutableSubmorphBounds=D;"left"===r?E("topLeft",sd.pt(n,y)):"right"===r?E("topRight",sd.pt(b+(q?n:-n),y)):E("topCenter",sd.pt((b+(q?2*n:0))/2,y))}},{key:"resizeContainer",value:function(b,d){var h=this.direction,a=this.layoutableSubmorphs,e=this.resizeSubmorphs,n=this.spacing,q=this.container;this.autoResize&&("centered"===
h?(h=a[0].top,a=sd.arr.last(a).bottom+h):a=sd.arr.last(a).bottom+n,b=sd.pt(e?q.width:b.x+2*n,Math.max(a,b.y)),this.changePropertyAnimated(q,"extent",b,d))}},{key:"getStartY",value:function(b){var d=this.layoutableSubmorphBounds,h=this.spacing,a=this.direction;var e=(d.length-1)*h;d=$jscomp.makeIterator(d);for(var n=d.next();!n.done;n=d.next())e+=n.value.height;return Math.max(0,"bottomToTop"===a?b.y-e-2*h:"centered"===a?b.y/2-e/2-h:0)+h}},{key:"computeMinContainerExtent",value:function(){for(var b=
this.container,d=this.layoutableSubmorphs,h=this.autoResize,a=(d.length+1)*this.spacing,e=0,n=0,q=0;q<d.length;q++){var r=d[q].bounds(),v=r.width;n+=r.height;e=Math.max(v,e)}d=sd.pt(e,n+a);h||(d=d.maxPt(b.extent));return d}},{key:"layoutOrder",value:function(b){return this.orderByIndex?this.container.submorphs.indexOf(b):b.top}},{key:"updateContainerViaDom",value:function(b,d){d=Math.round(b.width);b=Math.round(b.height);(0!=d||0!=b)&&this.autoResize&&0<this.container.submorphs.length&&(this.container.height!=
b&&(this.container.height=b),this.resizeSubmorphs||this.container.width==d||(this.container.width=d))}},{key:"updateSubmorphViaDom",value:function(b,d,h,a){a=void 0===a?!1:a;var e=Math.round(h.width),n=Math.round(h.height);if(0!=e||0!=n)n=this.container,d=sd.pt(d.offsetLeft+n.borderWidthLeft,d.offsetTop+n.borderWidthTop),d.equals(b.position)||(a?b.position=d:(b.position.x=d.x,b.position.y=d.y,b.updateTransform({position:b.position}),sd.signal(b,"position",d))),b.layout&&b.layout.renderViaCSS&&b.layout.updateContainerViaDom(h),
this.resizeSubmorphs&&b.width!=e&&(a?b.width=e:(b.extent.x=e,sd.signal(b,"extent",b.extent)))}},{key:"contentRectChanged",value:function(b,d){return b._lastContentRect&&b._lastContentRect.height!=d.height}},{key:"adjustMargin",value:function(b){var d=this.container;b.top+=this.spacing/2;b.bottom+=this.spacing/2;b.left+=this.spacing;b.right+=this.spacing;b.offset=d.borderWidthLeft+d.borderWidthRight}},{key:"computeOffset",value:function(b){var d=this.container,h=this.layoutableSubmorphs,a={top:0,bottom:0,
left:0,right:0};0==h.indexOf(b)&&(a.top=d.borderWidthTop);h.indexOf(b)==h.length-1&&(a.bottom=d.borderWidthBottom);"left"==this.align&&(a.left=d.borderWidthLeft);"right"==this.align&&(a.right=d.borderWidthRight);this.autoResize&&(a.left=d.borderWidthLeft,a.right=d.borderWidthRight);return a}},{key:"addContainerCSS",value:function(b,d){var h=b.env.renderer.getNodeForMorph(b);h&&this.updateContainerViaDom(h.getBoundingClientRect());b.visible&&(d.display=this.autoResize?"inline-flex":"flex");this.autoResize&&
0<b.submorphs.length&&(d.height="auto",this.resizeSubmorphs||(d.width="auto"));d.justifyContent={topToBottom:"flex-start",bottomToTop:"flex-end",centered:"center"}[this.direction];d.alignItems={center:"center",left:"flex-start",right:"flex-end"}[this.align];d.flexDirection="column";d.paddingTop=this.spacing/2+"px";d.paddingBottom=this.spacing/2+"px";this.measureAfterRender(b);this.layoutableSubmorphs.forEach(function(a){return a._dirty=!0})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VerticalLayout"}}],
l,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14081,end:22057})}(sd.FloatLayout));sd.VerticalLayout=Dr;sd.VerticalLayout=Dr;sd.VerticalLayout=Dr;var lp=Ka("af",function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),p=l.hasOwnProperty("HorizontalLayout")&&"function"===
typeof l.HorizontalLayout?l.HorizontalLayout:l.HorizontalLayout=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;ac._get(Object.getPrototypeOf(p.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this._direction=b.direction||"leftToRight";this._align=b.align||"top"}},{key:"name",value:function(){return"Horizontal"}},
{key:"description",value:function(){return"Assemble the submorphs in a horizontally growing list."}},{key:"possibleDirectionValues",get:function(){return["leftToRight","rightToLeft","centered"]}},{key:"possibleAlignValues",get:function(){return["top","center","bottom"]}},{key:"__serialize__",value:function(){return{__expr__:"new HorizontalLayout("+sd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["HorizontalLayout"]}}}},{key:"ensureBoundsMonitor",value:function(b,d){if(d.isLayoutable)this.onDomResize(this._resizeObservers.get(d),
{target:b,contentRect:b.getBoundingClientRect()},d)}},{key:"equals",value:function(b){return ac._get(Object.getPrototypeOf(p.prototype),"equals",this).call(this,b)&&b.name&&"Horizontal"==b.name()?!0:!1}},{key:"layoutSubmorphs",value:function(b,d){var h=this,a=this.container,e=this.layoutableSubmorphs,n=this.resizeSubmorphs,q=this.spacing,r=this.autoResize,v=this.align,y=this.getStartX(b),D=[];b=n?a.height:b.y;r=r&&!n;var E=function(I,K){e.reduce(function(P,N){n&&h.changePropertyAnimated(N,"height",
a.height-2*q,d);h.forceLayoutsOfMorph(N);h.changePropertyAnimated(N,I,P,d);P=N.bounds();D.push(P);return P[I]().addXY(P.width+q,0)},K)};this.layoutableSubmorphBounds=D;"top"===v?E("topLeft",sd.pt(y,q)):"bottom"===v?E("bottomLeft",sd.pt(y,b+(r?q:-q))):E("leftCenter",sd.pt(y,(b+(r?2*q:0))/2))}},{key:"resizeContainer",value:function(b,d){var h=this.direction,a=this.layoutableSubmorphBounds,e=this.resizeSubmorphs,n=this.spacing,q=this.container;this.autoResize&&("centered"===h?(h=a[0].left(),a=sd.arr.last(a).right()+
h):a=sd.arr.last(a).right()+n,b=sd.pt(Math.max(b.x,a),e?q.height:b.y+2*n),this.changePropertyAnimated(q,"extent",b,d))}},{key:"getStartX",value:function(b){var d=this.layoutableSubmorphBounds,h=this.spacing,a=this.direction;var e=(d.length-1)*h;d=$jscomp.makeIterator(d);for(var n=d.next();!n.done;n=d.next())e+=n.value.width;return Math.max(0,"rightToLeft"===a?b.x-e-2*h:"centered"===a?b.x/2-e/2-h:0)+h}},{key:"computeMinContainerExtent",value:function(){for(var b=this.container,d=this.layoutableSubmorphBounds,
h=this.autoResize,a=(d.length+1)*this.spacing,e=0,n=0,q=0;q<d.length;q++){var r=d[q],v=r.height;e+=r.width;n=Math.max(v,n)}d=sd.pt(e+a,n);h||(d=d.maxPt(b.extent));return d}},{key:"updateContainerViaDom",value:function(b,d){d=void 0===d?!1:d;var h=Math.round(b.width);b=Math.round(b.height);if(0!=h||0!=b){var a=this.container;this.autoResize&&0<a.submorphs.length&&(a.width!=h&&(d?a.width=h:(a.extent.x=h,sd.signal(a,"extent",a.extent))),this.resizeSubmorphs||a.height==b||(d?a.height=b:(a.extent.y=b,
sd.signal(a,"extent",a.extent))))}}},{key:"updateSubmorphViaDom",value:function(b,d,h,a){a=void 0===a?!1:a;var e=Math.round(h.height),n=Math.round(d.offsetLeft+this.container.borderWidthLeft);d=Math.round(d.offsetTop+this.container.borderWidthTop);if(0!=Math.round(h.width)||0!=e){if(n!=b.position.x||d!=b.position.y)a?b.position=sd.pt(n,d):(b.position.x=n,b.position.y=d,b.updateTransform({position:b.position}),sd.signal(b,"position",b.position));b.layout&&b.layout.renderViaCSS&&b.layout.updateContainerViaDom(h);
this.resizeSubmorphs&&b.height!=e&&(a?b.height=e:(b.extent.y=e,sd.signal(b,"extent",b.extent)))}}},{key:"contentRectChanged",value:function(b,d){return b._lastContentRect&&b._lastContentRect.width!=d.width}},{key:"adjustMargin",value:function(b){var d=this.container;b.top+=this.spacing;b.bottom+=this.spacing;b.left+=this.spacing/2;b.right+=this.spacing/2;b.offset=d.borderWidthTop+d.borderWidthBottom}},{key:"computeOffset",value:function(b){var d=this.container,h=this.layoutableSubmorphs,a={top:0,
left:0,right:0,bottom:0};0==h.indexOf(b)&&(a.left=d.borderWidthLeft);h.indexOf(b)==h.length-1&&(a.right=d.borderWidthRight);"top"==this.align&&(a.top=d.borderWidthTop);"bottom"==this.align&&(a.bottom=d.borderWidthBottom);this.autoResize&&(a.top=d.borderWidthTop,a.bottom=d.borderWidthBottom);return a}},{key:"addContainerCSS",value:function(b,d){var h=b.env.renderer.getNodeForMorph(b);h&&this.updateContainerViaDom(h.getBoundingClientRect(),!0);b.visible&&(d.display=this.autoResize?"inline-flex":"flex");
this.autoResize&&0<b.submorphs.length&&(d.width="auto",this.resizeSubmorphs||(d.height="auto"));d.justifyContent={leftToRight:"flex-start",rightToLeft:"flex-end",centered:"center"}[this.direction];d.alignItems={center:"center",top:"flex-start",bottom:"flex-end"}[this.align];d.flexDirection="row";d.paddingLeft=this.spacing/2+"px";d.paddingRight=this.spacing/2+"px";this.measureAfterRender(b);this.layoutableSubmorphs.forEach(function(a){return a._dirty=!0})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"HorizontalLayout"}}],l,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:22066,end:30308})}(sd.FloatLayout));sd.HorizontalLayout=lp;sd.HorizontalLayout=lp;sd.HorizontalLayout=lp;var VB=Ka("ay",function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
p=l.hasOwnProperty("TilingLayout")&&"function"===typeof l.TilingLayout?l.TilingLayout:l.TilingLayout=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;ac._get(Object.getPrototypeOf(p.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this._renderViaCSS=b.renderViaCSS||!1;this._axis=b.axis||"row";this._align=
b.align||"left";this._verticalAlign=b.verticalAlign||"top";this._axisAlign=b.axisAlign||"left";this._justifySubmorphs=b.justifySubmorphs||"packed";this._hugContentsVertially=b.hugContentsVertically||!1;this._hugContentsHorizontally=b.hugContentsHorizontally||!1;this._orderByIndex=b.orderByIndex||!1;this._resizePolicies=b.resizePolicies||new WeakMap;this._wrapSubmorphs=!0;"undefined"!==typeof b.wrapSubmorphs&&(this._wrapSubmorphs=b.wrapSubmorphs);delete this.autoResize}},{key:"name",value:function(){return"Tiling"}},
{key:"description",value:function(){return"Make the submorphs fill their owner, inserting breaks to defer intersecting the bounds as much as possible."}},{key:"inspect",value:function(b){}},{key:"onConfigUpdate",value:function(){this.apply();this.renderViaCSS&&!this._configChanged&&(this._configChanged=!0,this.layoutableSubmorphs.forEach(function(b){return b.makeDirty()}))}},{key:"__serialize__",value:function(){return{__expr__:"new TilingLayout("+sd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["TilingLayout"]}}}},
{key:"attach",value:function(){this.initializeResizePolicies();ac._get(Object.getPrototypeOf(p.prototype),"attach",this).call(this)}},{key:"initializeResizePolicies",value:function(){var b=this,d=this._resizePolicies,h=this.layoutableSubmorphs;this._resizePolicies=new WeakMap;Array.isArray(d)?d.map(function(a){a=$jscomp.makeIterator(a);var e=a.next().value;a=a.next().value;var n=h.find(function(q){return q.name==e});n&&b.setResizePolicyFor(n,a);sd.arr.remove(h,n)}):this.layoutableSubmorphs.forEach(function(a){b.setResizePolicyFor(a,
{width:"fixed",height:"fixed"})})}},{key:"resizePolicies",get:function(){var b=this;return this.layoutableSubmorphs.map(function(d){return[d.name,b._resizePolicies.get(d)]})}},{key:"padding",set:function(b){this._padding=b;this.onConfigUpdate()}},{key:"padding",get:function(){return this._padding}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"getSpec",value:function(){return{axis:this.axis,align:this.align,spacing:this.spacing,orderByIndex:this.orderByIndex,reactToSubmorphAnimations:this.reactToSubmorphAnimations,
resizePolicies:this.resizePolicies,renderViaCSS:this.renderViaCSS,padding:this.padding,wrapSubmorphs:this.wrapSubmorphs}}},{key:"possibleAxisValues",get:function(){return["row","column"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(b){this._orderByIndex=b;this.onConfigUpdate()}},{key:"axis",get:function(){return this._axis}},{key:"axis",set:function(b){this._axis=b;this.onConfigUpdate()}},
{key:"align",get:function(){return this._align}},{key:"align",set:function(b){this._align=b;this.onConfigUpdate()}},{key:"axisAlign",get:function(){return this._axisAlign}},{key:"axisAlign",set:function(b){this._axisAlign=b;this.onConfigUpdate()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(b){this._spacing=b;this.onConfigUpdate()}},{key:"wrapSubmorphs",get:function(){return this._wrapSubmorphs}},{key:"wrapSubmorphs",set:function(b){this._wrapSubmorphs=b;this.onConfigUpdate()}},
{key:"hugContentsVertically",get:function(){return this.wrapSubmorphs&&"column"==this.axis?!1:this._hugContentsVertically}},{key:"hugContentsVertically",set:function(b){this._hugContentsVertically=b;this.onConfigUpdate()}},{key:"hugContentsHorizontally",get:function(){return this.wrapSubmorphs&&"row"==this.axis?!1:this._hugContentsHorizontally}},{key:"hugContentsHorizontally",set:function(b){this._hugContentsHorizontally=b;this.onConfigUpdate()}},{key:"justifySubmorphs",get:function(){return this.wrapSubmorphs&&
"column"==this.axis?!1:this._justifySubmorphs}},{key:"justifySubmorphs",set:function(b){this._justifySubmorphs=b;this.onConfigUpdate()}},{key:"getResizeHeightPolicyFor",value:function(b){b=this._resizePolicies.get(b);return this.wrapSubmorphs||this.hugContentsVertically?"fixed":b.height}},{key:"getResizeWidthPolicyFor",value:function(b){b=this._resizePolicies.get(b);return this.wrapSubmorphs||this.hugContentsHorizontally?"fixed":b.width}},{key:"setResizePolicyFor",value:function(b,d){this._resizePolicies.set(b,
d);this.onConfigUpdate()}},{key:"renderViaCSS",get:function(){return this._renderViaCSS}},{key:"renderViaCSS",set:function(b){this._renderViaCSS=b;this.onConfigUpdate()}},{key:"onDomResize",value:function(b,d,h,a){var e=this,n=d.contentRect,q=d.target;if(h==this.container)return this.updateContainerViaDom(n,!0);h.withMetaDo({isLayoutAction:!0},function(){e.updateSubmorphViaDom(h,q,n,!0)})}},{key:"onSubmorphAdded",value:function(b,d){this._resizePolicies.get(b)||this.setResizePolicyFor(b,{width:"fixed",
height:"fixed"})}},{key:"onSubmorphResized",value:function(b,d){var h=this;this.renderViaCSS?(b=[b].concat($jscomp.arrayFromIterable(b.ownerChain())).find(function(a){return a.owner==h.container}),b.isLayoutable&&this.tryToMeasureNodeNow(b)):ac._get(Object.getPrototypeOf(p.prototype),"onSubmorphResized",this).call(this,b,d)}},{key:"tryToMeasureNodeNow",value:function(b){var d=b.env.renderer.getNodeForMorph(b);d&&this.orderByIndex?this.updateSubmorphViaDom(b,d,d.getBoundingClientRect()):this.measureAfterRender(b)}},
{key:"updateSubmorphViaDom",value:function(b,d,h,a){a=void 0===a?!1:a;var e=this.container,n=Math.floor(d.offsetLeft+e.borderWidthLeft);d=Math.floor(d.offsetTop+e.borderWidthTop);e=Math.floor(h.width);var q=Math.floor(h.height),r=this.getResizeHeightPolicyFor(b),v=this.getResizeWidthPolicyFor(b);this._resizePolicies.get(b);if(n!=b.position.x||d!=b.position.y)a?b.position=sd.pt(n,d):(b.position.x=n,b.position.y=d,b.updateTransform({position:b.position}),sd.signal(b,"position",b.position));"fill"==
v&&e!=b.width&&(a?b.width=e:(b.extent.x=e,b.updateTransform({extent:b.extent}),sd.signal(b,"position",b.position)));"fill"==r&&q!=b.height&&(a?b.height=q:(b.extent.y=q,b.updateTransform({extent:b.extent}),sd.signal(b,"position",b.position)));b.layout&&b.layout.renderViaCSS&&b.layout.updateContainerViaDom(h)}},{key:"updateContainerViaDom",value:function(b,d){d=this.container;var h=this.hugContentsVertically,a=this.hugContentsHorizontally,e=Math.round(b.width);b=Math.round(b.height);(0!=e||0!=b)&&0<
this.container.submorphs.length&&(h&&d.height!=b&&(d.height=b),a&&d.width!=e&&(d.width=e))}},{key:"updateBoundsFor",value:function(b){var d=b.env.renderer.getNodeForMorph(b);d?this.updateSubmorphViaDom(b,d,d.getBoundingClientRect()):(this.measureAfterRender(b),b.makeDirty());b._askLayoutForBounds=!1}},{key:"addSubmorphCSS",value:function(b,d){if(b.isLayoutable){var h=this.axis,a=this.layoutableSubmorphs,e=b.env.renderer.getNodeForMorph(b),n=!e||"visible"!=b.clipMode;h="column"==h;e&&this.updateSubmorphViaDom(b,
e,e.getBoundingClientRect());e=sd.pt(0,0);n=n?sd.rect(0,0,b.width,b.height):b.submorphBounds().union(b.innerBounds());1!=b.scale&&(n=n.withWidth(n.width*b.scale).withHeight(n.height*b.scale));0!=b.rotation&&(e=b.getInverseTransform().transformRectToRect(n),n.width=e.width,n.height=e.height,e=b.bounds().topLeft().subPt(b.position).negated());var q=this.computeOffset(b),r={};r.top=Math.max(0,-n.top())+e.y-q.top;r.bottom=n.bottom()-b.height-e.y-q.bottom;r.left=Math.max(0,-n.left())+e.x-q.left;r.right=
n.right()-b.width-e.x-q.right;this.adjustMargin(r,b);"fill"==this.getResizeWidthPolicyFor(b)&&(h?d.width="calc(100% + "+r.offset+"px)":(d.width="unset",d.flexGrow=1));"fill"==this.getResizeHeightPolicyFor(b)&&(h?(d.height="unset",d.flexGrow=1):d.height="calc(100% + "+r.offset+"px)");d.position="relative";d.top="unset";d.left="unset";d.order=a.indexOf(b);d.marginTop=r.top+"px";d.marginBottom=r.bottom+"px";d.marginLeft=r.left+"px";d.marginRight=r.right+"px";d["flex-shrink"]=0;this.measureAfterRender(b)}}},
{key:"measureAfterRender",value:function(b){var d=this;b.whenRendered().then(function(){var h=b.env.renderer.getNodeForMorph(b);h&&d.ensureBoundsMonitor(h,b)})}},{key:"ensureBoundsMonitor",value:function(b,d){if(d.isLayoutable)this.onDomResize(null,{target:b,contentRect:b.getBoundingClientRect()},d)}},{key:"adjustMargin",value:function(b,d){d=this.container;b.offset="column"==this.axis?d.borderWidthLeft+d.borderWidthRight:d.borderWidthTop+d.borderWidthBottom}},{key:"computeOffset",value:function(b){b=
this.container;var d={top:0,bottom:0,left:0,right:0};"column"==this.axis?(d.top=b.borderWidthTop,d.bottom=b.borderWidthBottom,d.left=b.borderWidthLeft,d.right=b.borderWidthRight):(d.left=b.borderWidthLeft,d.right=b.borderWidthRight,d.top=b.borderWidthTop,d.bottom=b.borderWidthBottom);return d}},{key:"addContainerCSS",value:function(b,d){var h=this.axis,a=this.padding,e=this.align,n=this.hugContentsHorizontally,q=this.hugContentsVertically,r=this.wrapSubmorphs;this._configChanged=!1;d.display="flex";
d.gap=this.spacing+"px";d.justifyContent={left:"flex-start",center:"center",right:"flex-end"}[e];d.flexFlow=h;r&&(d.flexFlow+=" wrap");d.alignItems={center:"center",left:"flex-start",right:"flex-end"}[this.axisAlign];d.alignContent={center:"center",left:"flex-start",right:"flex-end"}[this.axisAlign];"spaced"==this.justifySubmorphs&&(d.justifyContent="space-between");d.paddingTop=a.top()+"px";d.paddingLeft=a.left()+"px";d.paddingRight=a.right()+"px";d.paddingBottom=a.bottom()+"px";n&&(d.width="auto");
q&&(d.height="auto");this.measureAfterRender(b);this.delaySubmorphBounds()}},{key:"hasBoundsConnection",value:function(b){return b.attributeConnections&&b.attributeConnections.find(function(d){return["position","extent","width","height"].includes(d.sourceAttrName)})}},{key:"delaySubmorphBounds",value:function(){var b=this;this.layoutableSubmorphs.forEach(function(d){b.hasBoundsConnection(d)?b.measureAfterRender(d):d._askLayoutForBounds=!0;d.layout&&"Tiling"==d.layout.name()&&d.layout.delaySubmorphBounds()})}},
{key:"apply",value:function(b){var d=this;b=void 0===b?!1:b;if(!this.active&&this.container&&!this.renderViaCSS){this.active=!0;ac._get(Object.getPrototypeOf(p.prototype),"apply",this).call(this,b);var h=this.container,a=this.axis,e=this.align,n=this.spacing,q=this.axisAlign,r=this.layoutableSubmorphs,v=this.padding,y=this.wrapSubmorphs,D=this.hugContentsVertically,E=this.hugContentsHorizontally,I="spaced"==this.justifySubmorphs,K=this.getOptimalWidth(h),P="row"==a;a=P?"left":"top";var N=P?"x":"y",
aa=P?"y":"x",m;"left"==q&&(m="topLeft");"right"==q&&(m="bottomLeft");"center"==q&&(m="leftCenter");q=[];for(var t,u={};r.length;){var B=K+n,A=sd.arr.takeWhile(r,function(wa){wa=wa.bounds().extent();wa=B-(Math.round(wa[N])+n);if(y&&0>wa)return!1;B=wa;return!0});0<A.length?r.splice(0,A.length):(A=[r.shift()],B=0);u.$jscomp$loop$prop$fixedHeight$2772=v.top()+v.bottom()-this.spacing;u.$jscomp$loop$prop$fixedWidth$2770=v.left()+v.right()-this.spacing;u.$jscomp$loop$prop$numDynamic$2771=0;A.forEach(function(wa){return function(Ga){P&&
(wa.$jscomp$loop$prop$fixedWidth$2770+=d.spacing,"fill"==d.getResizeHeightPolicyFor(Ga)&&(Ga.height=h.height-v.top()-v.bottom()),"fixed"==d.getResizeWidthPolicyFor(Ga)?wa.$jscomp$loop$prop$fixedWidth$2770+=Ga.width:wa.$jscomp$loop$prop$numDynamic$2771++);P||(wa.$jscomp$loop$prop$fixedHeight$2772+=d.spacing,"fill"==d.getResizeWidthPolicyFor(Ga)&&(Ga.width=h.width-v.left()-v.right()),"fixed"==d.getResizeHeightPolicyFor(Ga)?wa.$jscomp$loop$prop$fixedHeight$2772+=Ga.height:wa.$jscomp$loop$prop$numDynamic$2771++)}}(u));
A.forEach(function(wa){return function(Ga){P&&"fill"==d.getResizeWidthPolicyFor(Ga)&&(Ga.width=Math.max(0,h.width-wa.$jscomp$loop$prop$fixedWidth$2770)/wa.$jscomp$loop$prop$numDynamic$2771);P||"fill"!=d.getResizeHeightPolicyFor(Ga)||(Ga.height=Math.max(0,h.height-wa.$jscomp$loop$prop$fixedHeight$2772)/wa.$jscomp$loop$prop$numDynamic$2771)}}(u));q.push(t=[sd.arr.max(A.map(function(wa){return wa.bounds().extent()[aa]}))]);if(I){var H=void 0,F=void 0;P?(H=v.left(),F=v.right()):(H=v.top(),F=v.bottom());
var L=H;H=(h.extent[N]-H-F-sd.arr.sum(A.map(function(wa){return wa.bounds().extent()[N]})))/Math.max(1,A.length-1);A=$jscomp.makeIterator(A);for(F=A.next();!F.done;F=A.next())F=F.value,t.push([F,L]),L=L+F.bounds().extent()[N]+H}else{switch(e){case "left":L=v[a]();break;case "center":L=B/2+v[a]();break;case "right":L=B-v[a]()}H=$jscomp.makeIterator(A);for(F=H.next();!F.done;F=H.next())A=F.value,t.push([A,L]),L=L+n+A.bounds().extent()[N]}u={$jscomp$loop$prop$fixedWidth$2770:u.$jscomp$loop$prop$fixedWidth$2770,
$jscomp$loop$prop$numDynamic$2771:u.$jscomp$loop$prop$numDynamic$2771,$jscomp$loop$prop$fixedHeight$2772:u.$jscomp$loop$prop$fixedHeight$2772}}var U=[];if("center"==this.axisAlign){var T=-n;q.map(function(wa){wa=$jscomp.makeIterator(wa).next().value;return T+=wa+n});var Y=h.extent[aa]/2-T/2;q.map(function(wa){wa=$jscomp.makeIterator(wa).next().value;U.push(Y+wa/2);Y+=wa+n})}"right"==this.axisAlign&&(Y=h.extent[aa]-v.bottom(),q=q.reverse(),q.map(function(wa){wa=$jscomp.makeIterator(wa).next().value;
U.push(Y);Y-=wa+n}));"left"==this.axisAlign&&(Y=v.top(),q.map(function(wa){wa=$jscomp.makeIterator(wa).next().value;U.push(Y);Y+=n;Y+=wa}));q.forEach(function(wa,Ga){wa=$jscomp.makeIterator(wa);wa.next();$jscomp.arrayFromIterator(wa).forEach(function(na){var ea=$jscomp.makeIterator(na);na=ea.next().value;ea=ea.next().value;ea=P?sd.pt(ea,U[Ga]):sd.pt(U[Ga],ea);d.changePropertyAnimated(na,m,ea,b)})});D&&(h.height=h.submorphBounds(function(wa){return r.includes(wa)}).height);E&&(h.width=h.submorphBounds(function(wa){return r.includes(wa)}).width);
this.active=!1;this.forceLayoutsInNextLevel()}}},{key:"forceLayout",value:function(){this.renderViaCSS||ac._get(Object.getPrototypeOf(p.prototype),"forceLayout",this).call(this)}},{key:"getMinWidth",value:function(){var b=this.border,d=b.left;b=b.right;return this.layoutableSubmorphs.reduce(function(h,a){return a.bounds().width>h?a.bounds().width:h},0)+d+b}},{key:"getMinHeight",value:function(){var b=this.border,d=b.top;b=b.bottom;return this.layoutableSubmorphs.reduce(function(h,a){return a.bounds().height>
h?a.bounds().height:h},0)+d+b}},{key:"getOptimalWidth",value:function(b){var d=this.axis,h=this.border,a=h.left,e=h.top,n=h.right;h=h.bottom;b="row"==d?b.width-a-n:b.height-e-h;d="row"==d?this.getMinWidth():this.getMinHeight();return Math.max(b,d)}},{key:"layoutOrder",value:function(b){return this.orderByIndex?this.container.getProperty("submorphs").indexOf(b):"row"===this.axis?1E6*(b.top-b.top%15)+b.left:1E6*(b.left-b.left%15)+b.top}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayout"}}],
l,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:30966,end:56625})}(sd.Layout));sd.TilingLayout=VB;sd.TilingLayout=VB;sd.TilingLayout=VB;var By=Ka("ag",function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),p=l.hasOwnProperty("ProportionalLayout")&&"function"===
typeof l.ProportionalLayout?l.ProportionalLayout:l.ProportionalLayout=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:"name",value:function(){return"Proportional"}},{key:"description",value:function(){return"Resizes, scales, and moves morphs according to their original position."}},{key:Symbol.for("lively-instance-initialize"),value:function(b){ac._get(Object.getPrototypeOf(p.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,b);this.extentDelta=sd.pt(0,0);this.proportionalLayoutSettingsForMorphs=new WeakMap;this.submorphSettings=b&&b.submorphSettings||[];this.lastExtent=b.lastExtent;delete this.spacing;delete this.autoResize}},{key:"getSpec",value:function(){return{submorphSettings:this.submorphSettings,reactToSubmorphAnimations:this.reactToSubmorphAnimations,lastExtent:this.lastExtent}}},{key:"__serialize__",value:function(){return{__expr__:"new ProportionalLayout("+sd.obj.inspect(this.getSpec())+")",
bindings:{"lively.morphic":["ProportionalLayout"]}}}},{key:"__dont_serialize__",get:function(){return[].concat($jscomp.arrayFromIterable(ac._get(Object.getPrototypeOf(p.prototype),"__dont_serialize__",this)),["extentDelta","lastExtent"])}},{key:"__after_deserialize__",value:function(b,d){var h=this._submorphSettings;b=this.container;d=this.proportionalLayoutSettingsForMorphs||new WeakMap;this.extentDelta=sd.pt(0,0);if(h&&b){h=$jscomp.makeIterator(h);for(var a=h.next();!a.done;a=h.next()){var e=$jscomp.makeIterator(a.value);
a=e.next().value;e=e.next().value;(a=$jscomp.makeIterator(this._morphsMatchingSelector(b,a)).next().value)&&d.set(a,e)}this.proportionalLayoutSettingsForMorphs=d}}},{key:"onSubmorphChange",value:function(b,d,h,a){"name"===d.prop&&(h=this.proportionalLayoutSettingsForMorphs.get(b))&&this.changeSettingsFor(b,h,!0);return ac._get(Object.getPrototypeOf(p.prototype),"onSubmorphChange",this).call(this,b,d)}},{key:"settingsFor",value:function(b){return this.proportionalLayoutSettingsForMorphs.get(b)||{x:"scale",
y:"scale"}}},{key:"changeSettingsFor",value:function(b,d,h){h=void 0===h?!1:h;"string"===typeof d&&(d={x:d,y:d});this.proportionalLayoutSettingsForMorphs.set(b,Object.assign({},this.settingsFor(b),{},d));h&&(d=this.submorphSettings.filter(function(a){return a[0]!==b.name}),d.push([b.name,this.settingsFor(b)]),this._submorphSettings=d)}},{key:"submorphSettings",get:function(){return this._submorphSettings}},{key:"submorphSettings",set:function(b){if(this.container)this._submorphSettings=b,this.changeSubmorphSettings(b);
else sd.once(this,"container",this,"submorphSettings",{converter:"function () { return submorphSettings }",varMapping:{submorphSettings:b}})}},{key:"changeSubmorphSettings",value:function(b){var d=this,h={};b=$jscomp.makeIterator(b);for(var a=b.next();!a.done;h={$jscomp$loop$prop$setting$2774:h.$jscomp$loop$prop$setting$2774},a=b.next()){a=$jscomp.makeIterator(a.value);var e=a.next().value;h.$jscomp$loop$prop$setting$2774=a.next().value;this._morphsMatchingSelector(this.container,e).forEach(function(n){return function(q){return d.changeSettingsFor(q,
n.$jscomp$loop$prop$setting$2774)}}(h))}}},{key:"_morphsMatchingSelector",value:function(b,d){var h=this,a=[];if(!d)return a;d.isMorph?a=[d]:d instanceof RegExp?a=b.submorphs.filter(function(e){return e.name.match(d)}):"string"===typeof d?a=b.submorphs.filter(function(e){return e.name===d}):Array.isArray(d)&&(a=sd.arr.flatmap(d,function(e){return h._morphsMatchingSelector(b,e)}));return a}},{key:"refreshBoundsCache",value:function(){var b=this.container.extent,d=this.lastExtent;d&&!b.eqPt(d)&&(this.extentDelta=
this.extentDelta.addPt(b.subPt(d)));this.lastExtent=b;this.layoutableSubmorphBounds=this.layoutableSubmorphs.map(function(h){return h.bounds()})}},{key:"apply",value:function(b){b=void 0===b?!1:b;var d=this.container,h=this.extentDelta,a=h.x;h=h.y;var e=(d||{}).extent;if(!this.active&&d&&(0!=a||0!=h)){this.extentDelta=sd.pt(0,0);this.active=!0;ac._get(Object.getPrototypeOf(p.prototype),"apply",this).call(this,b);var n=this.layoutableSubmorphs;d=e.scaleByPt(e.addXY(-a,-h).invertedSafely());e=$jscomp.makeIterator(n);
for(n=e.next();!n.done;n=e.next()){n=n.value;var q=this.settingsFor(n),r=q.x,v=q.y,y=q=0,D=0,E=0;"move"===r&&(q=a);"move"===v&&(y=h);"resize"===r&&(D=a);"resize"===v&&(E=h);if("scale"===r||"scale"===v)r=sd.pt("scale"===r?d.x:1,"scale"===v?d.y:1),this.changePropertyAnimated(n,"position",n.position.scaleByPt(r),b),this.changePropertyAnimated(n,"extent",n.extent.scaleByPt(r),b);(q||y)&&this.changePropertyAnimated(n,"position",n.position.addXY(q,y),b);(D||E)&&this.changePropertyAnimated(n,"extent",n.extent.addXY(D,
E),b)}this.forceLayoutsInNextLevel();this.active=!1}}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayout"}}],l,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:56634,end:62080})}(sd.Layout));
sd.ProportionalLayout=By;sd.ProportionalLayout=By;sd.ProportionalLayout=By;var WB=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),p=l.hasOwnProperty("CellGroup")&&"function"===typeof l.CellGroup?l.CellGroup:l.CellGroup=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){var d=b.morph,h=b.layout;this.state={cells:[b.cell],
layout:h,align:b.align,resize:void 0===b.resize?h.fitToCell:b.resize};h&&h.addGroup(this);this.morph=d}},{key:"morph",get:function(){var b=this.state,d=b.morph;b=b.layout;return d?d.isMorph?d:b.layoutableSubmorphs.find(function(h){return h.name==d}):null}},{key:"resize",get:function(){return this.state.resize}},{key:"resize",set:function(b){this.state.resize=b;this.layout.apply()}},{key:"align",get:function(){return this.state.align||"topLeft"}},{key:"align",set:function(b){this.state.align=b;this.layout.apply()}},
{key:"area",get:function(){var b,d,h,a;this.cells.map(function(q){var r=q.before.length;if(void 0==b||b>r)b=r;if(void 0==d||d<r)d=r;q=q.above.length;if(void 0==h||h>q)h=q;if(void 0==a||a<q)a=q});var e=this.layout.row(h).col(b).padding,n=this.layout.row(a).col(d).padding;return{minCol:b,maxCol:d,minRow:h,maxRow:a,padding:sd.Rectangle.inset(e.left(),e.top(),n.right(),n.bottom())}}},{key:"morph",set:function(b){var d=b&&this.layout.getCellGroupFor(b);d&&(d.morph=null);this.state.morph=b;this.layout.apply()}},
{key:"manages",value:function(b){return this.morph&&(this.morph==b||this.morph.name==b)}},{key:"apply",value:function(b){b=void 0===b?!1:b;var d=this.morph;if(d){var h=this.bounds(),a=this.layout.container.origin.negated();if(b){var e=this.resize?h.extent():d.extent,n=b;b=n.duration;n=n.easing;var q={};d.animate((q[this.alignedProperty||this.align]=h[this.align]().addPt(a),q.extent=e,q.duration=b,q.easing=n,q))}else this.resize&&!d.extent.equals(h.extent())&&(d.extent=h.extent()),d[this.alignedProperty||
this.align]=h[this.align]().addPt(a);this.layout.forceLayoutsInNextLevel()}}},{key:"cells",get:function(){return this.state.cells}},{key:"layout",get:function(){return this.state.layout}},{key:"bounds",value:function(){return 0<this.cells.length?this.cells.map(function(b){return b.bounds()}).reduce(function(b,d){return b.union(d)}):sd.rect(0,0,0,0)}},{key:"includes",value:function(b){return this.cells.find(function(d){return d==b})}},{key:"connect",value:function(b){void 0==this.morph&&(this.morph=
b.group.morph);b.group?b.group.disconnect(b,this):b.group=this;this.cells.push(b)}},{key:"disconnect",value:function(b,d){b.group=(void 0===d?null:d)||new sd.CellGroup({morph:null,layout:this.layout,cell:b});sd.arr.remove(this.cells,b);1>this.cells.length&&this.layout&&this.layout.removeGroup(this)}},{key:"merge",value:function(b){var d=this;b.cells.forEach(function(h){d.connect(h)})}},{key:"topLeft",get:function(){var b=this;return this.cells.find(function(d){return(null==d.left||d.left.group!=b)&&
(null==d.top||d.top.group!=b)})}},{key:"bottomRight",get:function(){var b=this;return this.cells.find(function(d){return(null==d.right||d.right.group!=b)&&(null==d.bottom||d.bottom.group!=b)})}},{key:"position",get:function(){return this.topLeft.position}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGroup"}}],l,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:62089,end:65992})}(void 0);sd.CellGroup=WB;sd.CellGroup=WB;sd.CellGroup=WB;(function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),p=l.hasOwnProperty("LayoutAxis")&&"function"===typeof l.LayoutAxis?l.LayoutAxis:l.LayoutAxis=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),
value:function(b){this.origin=b}},{key:"otherAxis",get:function(){return[].concat($jscomp.arrayFromIterable(this.axisBefore),$jscomp.arrayFromIterable(this.axisAfter))}},{key:"axisBefore",get:function(){for(var b=this,d=[];b=b.before;)d=[b].concat($jscomp.arrayFromIterable(d));return d}},{key:"axisAfter",get:function(){for(var b=this,d=[];b=b.after;)d=[].concat($jscomp.arrayFromIterable(d),[b]);return d}},{key:"before",get:function(){throw Error("before() not implemented!");}},{key:"after",get:function(){throw Error("after() not implemented!");
}},{key:"containerLength",get:function(){return this.container[this.dimension]}},{key:"containerLength",set:function(b){this.container[this.dimension]=b}},{key:"getRoot",value:function(){return(this.axisBefore[0]||this).items[0]}},{key:"container",get:function(){return this.origin.container}},{key:"layout",get:function(){return this.origin.layout}},{key:"frozen",get:function(){return this.origin.frozen[this.dimension]}},{key:"frozen",set:function(b){this.origin.frozen[this.dimension]=b}},{key:"align",
set:function(b){this.items.forEach(function(d){return d.group.state.align=b})}},{key:"fixed",get:function(){return this.origin.fixed[this.dimension]}},{key:"fixed",set:function(b){var d=this;if(sd.obj.isNumber(b)){var h=b;b=!0}this.items.forEach(function(e){e.fixed[d.dimension]=b});var a=this.containerLength;void 0!=h&&(this[this.dimension]=h);this.adjustOtherProportions(b);this.containerLength=a}},{key:"length",get:function(){return this.origin[this.dimension]}},{key:"length",set:function(b){var d=
this;this.items.forEach(function(h){h[d.dimension]=sd.num.roundTo(b,1)})}},{key:"proportion",get:function(){return this.origin.proportion[this.dimension]}},{key:"proportion",set:function(b){var d=this;this.items.forEach(function(h){h.proportion[d.dimension]=b})}},{key:"min",get:function(){return this.origin.min[this.dimension]}},{key:"min",set:function(b){this.adjustMin(b-this.min)}},{key:"adjustMin",value:function(b){var d=this;this.items.forEach(function(h){h.min[d.dimension]=0>h.min[d.dimension]+
b?0:h.min[d.dimension]+b});this.layout.apply()}},{key:"adjustProportion",value:function(){this.fixed||(this.proportion=0<this.dynamicLength?this.length/this.dynamicLength:0)}},{key:"adjustOtherProportions",value:function(b){var d=this,h=this.axisBefore,a=this.axisAfter,e=sd.arr.sum([].concat($jscomp.arrayFromIterable(h),$jscomp.arrayFromIterable(a)).filter(function(r){return!r.fixed}).map(function(r){return r.proportion})),n=function(r){return r.proportion/=e},q=function(r){return r.proportion*=d.origin.removedDynamicProportions};
b&&(this.origin.removedDynamicProportions=e);h.forEach(b?n:q);a.forEach(b?n:q)}},{key:"prepareForResize",value:function(b){b=this.proportion*Math.max(0,b-this.staticLength);this.frozen&&b>=this.min?(this.fixed=this.frozen=!1,this.length=b):!this.frozen&&this.min>b&&(this.fixed=this.frozen=!0,this.length=this.min);return this}},{key:"adjustLength",value:function(b){var d;0>this.length+b&&(b=-this.length);(d=this.axisAfter.find(function(h){return!h.fixed}))?(b=Math.min(b,d.length),this.length+=b,d.length-=
b,this.adjustProportion(),d.adjustProportion()):(d=this.axisBefore.reverse().find(function(h){return!h.fixed}))?(d.length-=b,this.length+=b,this.adjustProportion(),d.adjustProportion()):(this.length+=b,this.adjustProportion(),this.otherAxis.forEach(function(h){return h.adjustProportion()}),this.containerLength+=b)}},{key:"equalizeDynamicAxis",value:function(){var b=[].concat($jscomp.arrayFromIterable(this.otherAxis.filter(function(h){return!h.fixed})),$jscomp.arrayFromIterable(this.fixed?[]:[this])),
d=(this.containerLength-this.staticLength)/b.length;b.map(function(h){h.fixed||(h.length=d);return h}).forEach(function(h){return h.adjustProportion()})}},{key:"addBefore",value:function(){var b=this.emptyAxis();this.before&&this.before.attachTo(b);b.attachTo(this);this.equalizeDynamicAxis();this.layout.grid=this.getRoot()}},{key:"addAfter",value:function(){var b=this.emptyAxis();this.after&&b.attachTo(this.after);this.attachTo(b);this.equalizeDynamicAxis();this.layout.grid=this.getRoot()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"LayoutAxis"}}],l,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:66661,end:72378})})(void 0);var XB=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),p=l.hasOwnProperty("LayoutColumn")&&"function"===typeof l.LayoutColumn?l.LayoutColumn:
l.LayoutColumn=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){ac._get(Object.getPrototypeOf(p.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.items=[].concat($jscomp.arrayFromIterable(b.above),[b],$jscomp.arrayFromIterable(b.below))}},{key:"dimension",get:function(){return"width"}},{key:"before",get:function(){return this._before||
(this._before=this.origin.left&&new sd.LayoutColumn(this.origin.left))}},{key:"after",get:function(){return this._after||(this._after=this.origin.right&&new sd.LayoutColumn(this.origin.right))}},{key:"row",value:function(b){return this.items[b]}},{key:"dynamicLength",get:function(){return this.origin.dynamicWidth}},{key:"staticLength",get:function(){return this.origin.totalStaticWidth}},{key:"width",get:function(){return this.length}},{key:"width",set:function(b){b-=this.width;this.fixed?(this.length+=
b,this.container.width+=b):this.adjustLength(b);this.layout.renderViaCSS&&(this.layout.patchContainer(),this.layout.measureMorphsIn(this,this.after));!this.layout.manualUpdate&&this.layout.apply()}},{key:"paddingLeft",set:function(b){this.items.forEach(function(d){d.padding.x=b});this.layout.apply()}},{key:"paddingLeft",get:function(){return this.items[0].padding.x}},{key:"paddingRight",set:function(b){this.items.forEach(function(d){d.padding.width=b});this.layout.apply()}},{key:"paddingRight",get:function(){return this.items[0].padding.width}},
{key:"emptyAxis",value:function(){var b=new sd.LayoutColumn(new sd.LayoutCell({column:sd.arr.withN(this.items.length,null),layout:this.layout}));sd.arr.zip(b.items,this.items).forEach(function(d){var h=$jscomp.makeIterator(d);d=h.next().value;h=h.next().value;d.height=h.height;d.fixed.height=h.fixed.height;d.frozen.height=h.frozen.height;d.proportion.height=h.proportion.height;d.min.height=h.min.height});return b}},{key:"attachTo",value:function(b){this.after&&(this.after._before=null);this._after=
null;sd.arr.zip(this.items,b.items).forEach(function(d){var h=$jscomp.makeIterator(d);d=h.next().value;h=h.next().value;d.right=h;h.left=d});this.equalizeDynamicAxis();return b}},{key:"remove",value:function(){var b=this,d=this.before||this.after;this.items.forEach(function(h){h.left&&(h.left.right=h.right);h.right&&(h.right.left=h.left);h.group.disconnect(h);b.layout.removeGroup(h.group)});this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=
this.after.getRoot());d.equalizeDynamicAxis()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutColumn"}}],l,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:72465,end:74970})}(sd.LayoutAxis);sd.LayoutColumn=XB;sd.LayoutColumn=XB;sd.LayoutColumn=XB;var YB=function(f){var l=
lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),p=l.hasOwnProperty("LayoutRow")&&"function"===typeof l.LayoutRow?l.LayoutRow:l.LayoutRow=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){ac._get(Object.getPrototypeOf(p.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.items=[].concat($jscomp.arrayFromIterable(b.before),
[b],$jscomp.arrayFromIterable(b.after))}},{key:"dimension",get:function(){return"height"}},{key:"emptyAxis",value:function(){var b=new sd.LayoutRow(new sd.LayoutCell({row:sd.arr.withN(this.items.length,null),layout:this.layout}));sd.arr.zip(b.items,this.items).forEach(function(d){var h=$jscomp.makeIterator(d);d=h.next().value;h=h.next().value;d.width=h.width;d.fixed.width=h.fixed.width;d.frozen.width=h.frozen.width;d.proportion.width=h.proportion.width;d.min.width=h.min.width});return b}},{key:"paddingTop",
set:function(b){this.items.forEach(function(d){d.padding.y=b});this.layout.apply()}},{key:"paddingTop",get:function(){return this.items[0].padding.y}},{key:"paddingBottom",set:function(b){this.items.forEach(function(d){d.padding.height=b});this.layout.apply()}},{key:"paddingBottom",get:function(){return this.items[0].padding.height}},{key:"before",get:function(){return this._before||(this._before=this.origin.top&&new sd.LayoutRow(this.origin.top))}},{key:"after",get:function(){return this._after||
(this._after=this.origin.bottom&&new sd.LayoutRow(this.origin.bottom))}},{key:"dynamicLength",get:function(){return this.origin.dynamicHeight}},{key:"staticLength",get:function(){return this.origin.totalStaticHeight}},{key:"attachTo",value:function(b){this.after&&(this.after._before=null);this._after=null;sd.arr.zip(this.items,b.items).forEach(function(d){var h=$jscomp.makeIterator(d);d=h.next().value;h=h.next().value;d.bottom=h;h.top=d});this.equalizeDynamicAxis();return b}},{key:"col",value:function(b){return this.items[b]}},
{key:"height",get:function(){return this.length}},{key:"height",set:function(b){b-=this.height;this.fixed?(this.length+=b,this.container.height+=b):(this.adjustLength(b),this.proportion=0<this.origin.dynamicHeight?this.height/this.origin.dynamicHeight:0);this.layout.renderViaCSS&&(this.layout.patchContainer(),this.layout.measureMorphsIn(this,this.after));!this.layout.manualUpdate&&this.layout.apply()}},{key:"remove",value:function(){var b=this,d=this.before||this.after;this.items.forEach(function(h){h.top&&
(h.top.bottom=h.bottom);h.bottom&&(h.bottom.top=h.top);h.group.disconnect(h);b.layout.removeGroup(h.group)});this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=this.after.getRoot());d.equalizeDynamicAxis()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutRow"}}],l,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:75054,end:77646})}(sd.LayoutAxis);sd.LayoutRow=YB;sd.LayoutRow=YB;sd.LayoutRow=YB;var ZB=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),p=l.hasOwnProperty("LayoutCell")&&"function"===typeof l.LayoutCell?l.LayoutCell:l.LayoutCell=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),
value:function(b){var d=b.row,h=b.column,a=b.top,e=b.left,n=b.right,q=b.bottom;b=b.layout;var r;d=$jscomp.makeIterator(d||[]);var v=d.next().value;d=$jscomp.arrayFromIterator(d);h=$jscomp.makeIterator(h||[]);var y=h.next().value;h=$jscomp.arrayFromIterator(h);this.layout=b;this.fixed={width:!1,height:!1};this.frozen={width:!1,height:!1};this.min={width:0,height:0};this.top=a;this.left=e;this.bottom=q;this.right=n;this.padding=sd.rect(0,0,0,0);0<d.length?this.right=new sd.LayoutCell({row:d,left:this,
layout:b}):0<h.length&&(this.bottom=new sd.LayoutCell({column:h,top:this,layout:b}));this.proportion={width:1/(1+this.before.length+this.after.length),height:1/(1+this.above.length+this.below.length)};this.height=this.container.height*this.proportion.height;this.width=this.container.width*this.proportion.width;(r=b&&b.getCellGroupFor(v||y))?r.connect(this):this.group=new sd.CellGroup({cell:this,morph:v||y,layout:b})}},{key:"container",get:function(){return this.layout.container}},{key:"above",get:function(){return this.collect({neighbor:"top",
prepend:!0})}},{key:"below",get:function(){return this.collect({neighbor:"bottom",append:!0})}},{key:"before",get:function(){return this.collect({neighbor:"left",prepend:!0})}},{key:"after",get:function(){return this.collect({neighbor:"right",append:!0})}},{key:"collect",value:function(b){var d=b.neighbor,h=b.prepend;b=b.append;for(var a=[],e=this;e=e[d];)h&&(a=[e].concat($jscomp.arrayFromIterable(a))),b&&(a=[].concat($jscomp.arrayFromIterable(a),[e]));return a}},{key:"col",value:function(b){for(var d=
this,h=b;0<h&&d;)d=d.right,h--;if(!d)throw Error(b+" out of bounds! Last column was "+(b-h-1));return new sd.LayoutColumn(d)}},{key:"row",value:function(b){for(var d=this,h=b;0<h&&d;)d=d.bottom,h--;if(!d)throw Error(b+" out of bounds! Last row was "+(b-h-1));return new sd.LayoutRow(d)}},{key:"extent",get:function(){return sd.pt(this.width,this.height)}},{key:"staticWidth",get:function(){return this.fixed.width||this.min.width==this.width}},{key:"staticHeight",get:function(){return this.fixed.height||
this.min.height==this.height}},{key:"totalStaticWidth",get:function(){return sd.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),$jscomp.arrayFromIterable(this.after)).filter(function(b){return b.staticWidth}).map(function(b){return b.width}))}},{key:"totalStaticHeight",get:function(){return sd.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(b){return b.staticHeight}).map(function(b){return b.height}))}},{key:"dynamicWidth",
get:function(){return sd.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),$jscomp.arrayFromIterable(this.after)).filter(function(b){return!b.staticWidth}).map(function(b){return b.width}))}},{key:"dynamicHeight",get:function(){return sd.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(b){return!b.staticHeight}).map(function(b){return b.height}))}},{key:"height",get:function(){return Math.max(this.min.height,this._height||
0)}},{key:"height",set:function(b){this._height=b}},{key:"width",get:function(){return Math.max(this.min.width,this._width||0)}},{key:"width",set:function(b){this._width=b}},{key:"position",get:function(){return sd.pt(sd.arr.sum(this.before.map(function(b){return b.width})),sd.arr.sum(this.above.map(function(b){return b.height})))}},{key:"bounds",value:function(){return this.position.addPt(this.padding.topLeft()).extent(this.extent.subPt(this.padding.extent()).subPt(this.padding.topLeft()))}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"LayoutCell"}}],l,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:77708,end:81360})}(void 0);sd.LayoutCell=ZB;sd.LayoutCell=ZB;sd.LayoutCell=ZB;var Er=Ka("ab",function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),p=l.hasOwnProperty("GridLayout")&&
"function"===typeof l.GridLayout?l.GridLayout:l.GridLayout=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){ac._get(Object.getPrototypeOf(p.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);b=Object.assign({autoAssign:!0,fitToCell:!0},b);this.cellGroups=[];this.config=b;this.renderViaCSS=b.renderViaCSS||!1;this._resizeObservers=
new WeakMap}},{key:"name",value:function(){return"Grid"}},{key:"attach",value:function(){this.renderViaCSS?this.initGrid():ac._get(Object.getPrototypeOf(p.prototype),"attach",this).call(this)}},{key:"disable",value:function(){this.renderViaCSS&&(this.renderViaCSS=!1,this._revertToCSSOnEnable=!0,this.apply());ac._get(Object.getPrototypeOf(p.prototype),"disable",this).call(this)}},{key:"enable",value:function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(ac._get(Object.getPrototypeOf(p.prototype),
"enable",d).call(d,b),2);if(3!=h.nextAddress)return h.yield(sd.promise.delay(b.duration),3);d._revertToCSSOnEnable&&(d.renderViaCSS=!0,delete d._revertToCSSOnEnble);h.jumpToEnd()})}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"getSpec",value:function(){for(var b=[],d=[],h=[],a={},e=$jscomp.makeIterator(sd.arr.range(0,this.rowCount-1)),n=e.next();!n.done;n=e.next())b.push(this.grid.row(n.value).items.map(function(r){return r.group.state.morph?r.group.state.morph.name||
r.group.state.morph:null}));e=$jscomp.makeIterator(sd.arr.range(0,this.rowCount-1));for(n=e.next();!n.done;n=e.next()){n=n.value;var q=this.grid.row(n);d.push(n,Object.assign({},q.fixed?{fixed:q.length}:{height:q.height},{paddingTop:q.paddingTop,paddingBottom:q.paddingBottom}))}e=$jscomp.makeIterator(sd.arr.range(0,this.columnCount-1));for(n=e.next();!n.done;n=e.next())n=n.value,q=this.grid.col(n),h.push(n,Object.assign({},q.fixed?{fixed:q.length}:{},{paddingLeft:q.paddingLeft,paddingRight:q.paddingRight}));
e=$jscomp.makeIterator(this.cellGroups);for(n=e.next();!n.done;n=e.next())n=n.value,n.state.morph&&(a["string"===typeof n.state.morph?n.state.morph:n.morph.name]=sd.obj.select(n,["align","resize"]));return{autoAssign:!1,grid:b,rows:d,columns:h,groups:a}}},{key:"__serialize__",value:function(){return{__expr__:"new GridLayout("+sd.obj.inspect(this.getSpec(),{escapeKeys:!0})+")",bindings:{"lively.morphic":["GridLayout"]}}}},{key:"initGrid",value:function(){var b=this,d=this.sanitizeGrid(this.config).map(function(h){return new sd.LayoutRow(new sd.LayoutCell({row:h,
layout:b}))});d.reduce(function(h,a){return h.attachTo(a)});this.config.autoAssign&&this.autoAssign(this.notInLayout);this.grid=d[0].col(0);this.col(0).equalizeDynamicAxis();this.row(0).equalizeDynamicAxis();this._initRowsAndColumns();this._initGroups()}},{key:"_initGroups",value:function(){var b=this.config.groups;if(b)for(var d in b){var h=this.getCellGroupFor(this.container.getSubmorphNamed(d)),a=b[d],e=a.resize,n=void 0===a.align?"topLeft":a.align;a=void 0===a.alignedProperty?"topLeft":a.alignedProperty;
h&&(void 0!=e&&(h.resize=e),h.align=n,h.alignedProperty=a)}}},{key:"_initRowsAndColumns",value:function(){var b=this.config,d=void 0===b.columns?[]:b.columns,h=$jscomp.makeIterator(sd.arr.toTuples(void 0===b.rows?[]:b.rows,2));for(b=h.next();!b.done;b=h.next()){var a=$jscomp.makeIterator(b.value);b=a.next().value;a=a.next().value;Object.assign(this.row(b),a)}d=$jscomp.makeIterator(sd.arr.toTuples(d,2));for(b=d.next();!b.done;b=d.next())h=$jscomp.makeIterator(b.value),b=h.next().value,a=h.next().value,
Object.assign(this.col(b),a)}},{key:"fitToCell",get:function(){return this.config.fitToCell}},{key:"fitToCell",set:function(b){this.config.fitToCell=b;this.cellGroups.forEach(function(d){return d.resize=b});this.apply()}},{key:"notInLayout",get:function(){return sd.arr.withoutAll(this.layoutableSubmorphs,this.cellGroups.map(function(b){return b.morph}))}},{key:"col",value:function(b){return this.grid.col(b)}},{key:"row",value:function(b){return this.grid.row(b)}},{key:"rowCount",get:function(){return this.grid.col(0).items.length}},
{key:"columnCount",get:function(){return this.grid.row(0).items.length}},{key:"addGroup",value:function(b){this.cellGroups.push(b)}},{key:"removeGroup",value:function(b){sd.arr.remove(this.cellGroups,b)}},{key:"getCellGroupFor",value:function(b){return b&&this.cellGroups.find(function(d){return d.morph==b})}},{key:"submorphBoundsChanged",get:function(){for(var b=$jscomp.makeIterator(this.cellGroups),d=b.next();!d.done;d=b.next())if(d=d.value,d.morph&&!d.bounds().equals(d.morph.bounds()))return!0;
return!1}},{key:"sanitizeGrid",value:function(b){var d=this,h=b.grid,a=b.rowCount,e=b.columnCount;h=h||[[]];a=a||h.length;e=e||sd.arr.max(h.map(function(n){return n.length}));h.length<a&&(h=h.concat(sd.arr.withN(a-h.length,[])));return h=h.map(function(n){n.length<e&&(n=n.concat(sd.arr.withN(e-n.length,null)));return n.map(function(q){return q&&q.isMorph?(q.owner!=d.container&&d.container.addMorph(q),q):q?d.container.getSubmorphNamed(q)||q:q})})}},{key:"autoAssign",value:function(b){var d=this;b.forEach(function(h){var a,
e=Infinity;d.cellGroups.forEach(function(n){n.morph||n.cells.forEach(function(q){q=q.position.dist(h.position);q<e&&(a=n,e=q)})});a&&(a.morph=h)})}},{key:"apply",value:function(b){b=void 0===b?!1:b;this.active||this.renderViaCSS||(this.active=!0,ac._get(Object.getPrototypeOf(p.prototype),"apply",this).call(this,b),this.grid||this.initGrid(),this.fitAxis(),this.container.extent=sd.pt(Math.max(this.grid.totalStaticWidth,this.container.width),Math.max(this.grid.totalStaticHeight,this.container.height)),
this.fitAxis(),this.cellGroups.forEach(function(d){d&&d.apply(b)}),this.lastBoundsExtent=this.container.bounds().extent(),this.active=!1)}},{key:"fitAxis",value:function(){var b=this,d,h;[this.grid.row(0)].concat($jscomp.arrayFromIterable(this.grid.row(0).axisAfter)).map(function(a){a.prepareForResize(b.container.height);d=b.grid.totalStaticHeight;return a}).forEach(function(a){a.fixed||(a.length=a.proportion*Math.max(0,b.container.height-d))});[this.grid.col(0)].concat($jscomp.arrayFromIterable(this.grid.col(0).axisAfter)).map(function(a){a.prepareForResize(b.container.width);
h=b.grid.totalStaticWidth;return a}).forEach(function(a){a.fixed||(a.length=a.proportion*Math.max(0,b.container.width-h))})}},{key:"renderViaCSS",set:function(b){this._renderViaCSS=b;this.layoutableSubmorphs.forEach(function(d){return d.makeDirty()})}},{key:"renderViaCSS",get:function(){return this._renderViaCSS}},{key:"onSubmorphAdded",value:function(b,d){var h=this;ac._get(Object.getPrototypeOf(p.prototype),"onSubmorphAdded",this).call(this,b,d);this.renderViaCSS&&this.layoutableSubmorphs.forEach(function(a){return h.measureAfterRender(a)})}},
{key:"onSubmorphRemoved",value:function(b,d){var h=this.getCellGroupFor(b);h&&(h.morph=null);ac._get(Object.getPrototypeOf(p.prototype),"onSubmorphRemoved",this).call(this,b,d)}},{key:"onSubmorphResized",value:function(b,d){this.renderViaCSS?b.isLayoutable&&b.owner==this.container&&this.measureAfterRender(b):ac._get(Object.getPrototypeOf(p.prototype),"onSubmorphResized",this).call(this,b,d)}},{key:"measureAfterRender",value:function(b){var d=this;b.whenRendered().then(function(){b.env.renderer.getNodeForMorph(b)&&
d.onDomResize()})}},{key:"tryToMeasureNodeNow",value:function(b){var d=this.getCellGroupFor(b);if(d){var h=b.env.renderer.getNodeForMorph(b);h?this.updateSubmorphViaDom(b,h,d.resize):this.measureAfterRender(b)}}},{key:"onDomResize",value:function(){for(var b=$jscomp.makeIterator(this.cellGroups),d=b.next();!d.done;d=b.next()){var h=d.value;d=h.resize;if(h=h.morph){var a=h.env.renderer.getNodeForMorph(h);a&&this.updateSubmorphViaDom(h,a,d,!0)}}}},{key:"updateSubmorphViaDom",value:function(b,d,h,a){a=
void 0===a?!1:a;b.withMetaDo({isLayoutAction:!0},function(){if(h){var e=sd.pt(d.offsetWidth,d.offsetHeight);b.extent.equals(e)||(a?b.extent=e:(b.extent.x=e.x,b.extent.y=e.y,b.updateTransform({extent:e}),sd.signal(b,"extent")))}e=sd.pt(d.offsetLeft,d.offsetTop);b.position.equals(e)||(a?b.position=e:(b.position.x=e.x,b.position.y=e.y,b.updateTransform({position:e}),sd.signal(b,"position")))})}},{key:"addSubmorphCSS",value:function(b,d){if(b.isLayoutable){var h=this.getCellGroupFor(b)||{},a=h.area;b=
h.resize;h=h.align;if(a){var e=a.minCol,n=a.maxCol,q=a.minRow,r=a.maxRow;a=a.padding;d.margin=a.top()+"px "+a.right()+"px "+a.bottom()+"px "+a.left()+"px";d.gridColumnStart=e+1;d.gridColumnEnd=n+2;d.gridRowStart=q+1;d.gridRowEnd=r+2;d.position="relative";d.top="unset";d.left="unset";Object.assign(d,{topLeft:{},topRight:{justifySelf:"end",alignSelf:"start"},bottomRight:{justifySelf:"end",alignSelf:"end"},bottomLeft:{justifySelf:"start",alignSelf:"end"},center:{justifySelf:"center",alignSelf:"center"},
topCenter:{justifySelf:"center",alignSelf:"start"},bottomCenter:{justifySelf:"center",alignSelf:"end"},leftCenter:{justifySelf:"start",alignSelf:"center"},rightCenter:{justifySelf:"end",alignSelf:"center"}}[h]);b&&(d.width="auto",d.height="auto")}}}},{key:"addContainerCSS",value:function(b,d){var h=this;b.visible&&(d.display="grid");b=sd.arr.range(0,this.columnCount-1).map(function(e){e=h.col(e);return e.fixed?e.length+"px":e.proportion+"fr"});var a=sd.arr.range(0,this.rowCount-1).map(function(e){e=
h.row(e);return e.fixed?e.length+"px":e.proportion+"fr"});d.gridTemplateColumns=b.join(" ");d.gridTemplateRows=a.join(" ")}},{key:"patchContainer",value:function(){var b=this.container,d=b.env.renderer.getNodeForMorph(b);d&&this.addContainerCSS(b,d.style)}},{key:"measureMorphsIn",value:function(b){for(var d=[],h=0;h<arguments.length;++h)d[h-0]=arguments[h];var a=this;sd.arr.flatten(sd.arr.compact(d).map(function(e){return e.items.map(function(n){return n.group})})).forEach(function(e){var n=e.morph;
e=e.resize;if(n){var q=n.env.renderer.getNodeForMorph(n);q&&a.updateSubmorphViaDom(n,q,e)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayout"}}],l,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:81636,end:101696})}(sd.Layout));sd.GridLayout=Er;sd.GridLayout=Er;
sd.GridLayout=Er;var y9=Object.freeze({__proto__:null,VerticalLayout:Dr,HorizontalLayout:lp,TilingLayout:VB,ProportionalLayout:By,CellGroup:WB,LayoutColumn:XB,LayoutRow:YB,LayoutCell:ZB,GridLayout:Er});Ka("bM",y9);lively.FreezerRuntime.recorderFor("lively.serializer2/object-extensions.js");Object.defineProperty(Symbol.prototype,"__serialize__",{configurable:!0,value:function(){var f=function(){return Object.getOwnPropertyNames(Symbol).filter(function(p){return"symbol"===typeof Symbol[p]}).reduce(function(p,
b){return p.set(Symbol[b],"Symbol."+b)},new Map)}(),l=/^Symbol\((.*)\)$/;return function(){var p="function"===typeof this[Symbol.toPrimitive]?this[Symbol.toPrimitive]():this,b=Symbol.keyFor(p);if(b)return{__expr__:'Symbol.for("'+b+'")'};if(f.get(p))return{__expr__:f.get(p)};p=String(p).match(l);return{__expr__:p?'Symbol("'+p[1]+'")':"Symbol()"}}}()});Object.defineProperty(System,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System"}}});Object.defineProperty(System.global,"__serialize__",
{configurable:!0,value:function(){return{__expr__:"System.global"}}});Object.defineProperty(Map.prototype,"__serialize__",{configurable:!0,value:function(f,l,p){var b=f.add(this),d=b.currentRev,h=b.currentSnapshot,a=h.entries=[],e=0;l[b.id]=h;f.classHelper.addClassInfo(b,this,h);h=$jscomp.makeIterator(this);for(var n=h.next();!n.done;n=h.next()){var q=$jscomp.makeIterator(n.value);n=q.next().value;q=q.next().value;e++;n=b.snapshotProperty(b.id,n,p.concat("key",String(e)),l,f);q=b.snapshotProperty(b.id,
q,p.concat("value",String(e)),l,f);a.push(n,q)}return b.asRefForSerializedObjMap(d)}});Object.defineProperty(Map.prototype,"__deserialize__",{configurable:!0,value:function(f,l,p,b,d){f=f.entries;for(var h=0;h<f.length;h+=2){var a=f[h+1],e=l.recreateProperty("key."+h,f[h],p,b,d.concat("key",h));a=l.recreateProperty("value."+h,a,p,b,d.concat("value",h));this.set(e,a)}}});Object.defineProperty(Set.prototype,"__serialize__",{configurable:!0,value:function(f,l,p){var b=f.add(this),d=b.currentRev,h=b.currentSnapshot,
a=h.entries=[],e=0;l[b.id]=h;f.classHelper.addClassInfo(b,this,h);h=$jscomp.makeIterator(this);for(var n=h.next();!n.done;n=h.next())n=n.value,e++,n=b.snapshotProperty(b.id,n,p.concat("entry",String(e)),l,f),a.push(n);return b.asRefForSerializedObjMap(d)}});Object.defineProperty(Set.prototype,"__deserialize__",{configurable:!0,value:function(f,l,p,b,d){f=f.entries;for(var h=0;h<f.length;h++){var a=l.recreateProperty("entry."+h,f[h],p,b,d.concat("key",h));this.add(a)}}});var tS=lively.FreezerRuntime.recorderFor("lively.serializer2/util.js");
tS.isPrimitive=yE;tS.isPrimitive=yE;tS.isPrimitive=yE;var Hh=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins.js");Hh.obj=xf;Hh.properties=Qm;Hh.Plugin=function(){};var uS=function(){};uS.prototype.serializeObject=function(f,l,p,b,d){if("function"!==typeof f.__serialize__)return null;(f=f.__serialize__(p,b,d))&&f.hasOwnProperty("__expr__")&&(p=p.expressionSerializer.exprStringEncode(f),f=l?p:{__expr__:p});return f};uS.prototype.deserializeObject=function(f,l,p,b){return(l=p.__expr__)?
f.expressionSerializer.deserializeExpr(l):null};Hh.CustomSerializePlugin=uS;var vS=function(){};vS.prototype.additionallySerialize=function(f,l,p,b){f.classHelper.addClassInfo(l,l.realObj,p)};vS.prototype.deserializeObject=function(f,l,p,b){return f.classHelper.restoreIfClassInstance(l,p)};Hh.ClassPlugin=vS;var z9=function(){};z9.prototype.serializeObject=function(f,l,p,b,d){f&&f.isMorph&&(f.__isBeingSerialized__=!0);return null};Hh.SerializationIndicationPlugin=z9;var A9=function(){};A9.prototype.additionallySerialize=
function(f,l,p,b){l.realObj&&l.realObj.isMorph&&(l.realObj.__isBeingSerialized__=!1)};Hh.SerializationFinishPlugin=A9;var iJ=function(){};iJ.prototype.additionallySerialize=function(f,l,p,b){var d=l.realObj;d&&"function"===typeof d.__additionally_serialize__&&d.__additionally_serialize__(p,l,f,b)};iJ.prototype.additionallyDeserializeBeforeProperties=function(f,l,p,b,d,h,a){"function"===typeof p.__deserialize__&&p.__deserialize__(d,l,h,f,a)};iJ.prototype.additionallyDeserializeAfterProperties=function(f,
l,p,b,d,h){"function"===typeof p.__after_deserialize__&&p.__after_deserialize__(b,l,f)};Hh.AdditionallySerializePlugin=iJ;var B9=function(){};B9.prototype.propertiesToSerialize=function(f,l,p,b){return(f=l.realObj)&&f.__only_serialize__||null};Hh.OnlySerializePropsPlugin=B9;var C9=function(){};C9.prototype.propertiesToSerialize=function(f,l,p,b){f=l.realObj;if(!f||!f.__dont_serialize__)return null;f=Hh.obj.mergePropertyInHierarchy(f,"__dont_serialize__");l=[];for(p=0;p<b.length;p++){var d=b[p];f.includes(d)||
l.push(d)}return l};Hh.DontSerializePropsPlugin=C9;var wS=function(){};wS.prototype.propertiesToSerialize=function(f,l,p,b){var d=l.realObj;l=d.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!l)return null;f=l.properties;p=l.propertySettings.valueStoreProperty||"_state";l=[];if(d[p]){if(d.__only_serialize__){for(var h=0;h<b.length;h++){d=b[h];var a=f[d];d!==p&&(a&&a&&(a.derived||a.readOnly||a.hasOwnProperty("serialize")&&!a.serialize)||l.push(d))}return l}p=b.indexOf(p);-1<p&&
b.splice(p,1);for(h in f)p=f[h],d=b.indexOf(h),p.derived||p.readOnly||p.hasOwnProperty("serialize")&&!p.serialize?-1<d&&b.splice(d,1):-1===d&&l.push(h);return l.concat(b)}};wS.prototype.additionallyDeserializeBeforeProperties=function(f,l,p,b,d,h,a){var e=p.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!e)return b;var n=e.order;e=e.propertySettings.valueStoreProperty||"_state";b=d.props;if(b[e])return b;b=Hh.obj.clone(b);p.hasOwnProperty(e)||p.initializeProperties();for(d=0;d<
n.length;d++)e=n[d],b.hasOwnProperty(e)&&(l.recreatePropertyAndSetProperty(p,b,e,h,f,a),delete b[e]);return b};Hh.LivelyClassPropertiesPlugin=wS;var xS=function(){};xS.prototype.additionallySerialize=function(f,l,p,b){var d=this,h=l.realObj;h&&(this._serializable(h)?Hh.properties.allOwnPropertiesOrFunctions(h,function(a,e){d._serializable(h[e])||console.warn("Attribute cannot be serialized: "+e+" of "+h+". Might be an anonymous function?")}):console.warn("Cannot serialize anonymous function "+h))};
xS.prototype._serializable=function(f){return"function"!==typeof f||!!f.isWrapped||!!f.hasLivelyClosure};Hh.SerializableCheckPlugin=xS;var yS={livelyClassPropertiesPlugin:new Hh.LivelyClassPropertiesPlugin,dontSerializePropsPlugin:new Hh.DontSerializePropsPlugin,onlySerializePropsPlugin:new Hh.OnlySerializePropsPlugin,additionallySerializePlugin:new Hh.AdditionallySerializePlugin,classPlugin:new Hh.ClassPlugin,customSerializePlugin:new Hh.CustomSerializePlugin,indicationPlugin:new Hh.SerializationIndicationPlugin,
serializableCheckPlugin:new Hh.SerializableCheckPlugin,finishPlugin:new Hh.SerializationFinishPlugin};Hh.plugins=yS;Hh.plugins=yS;Hh.plugins=yS;var pq=[Hh.plugins.indicationPlugin,Hh.plugins.customSerializePlugin,Hh.plugins.classPlugin,Hh.plugins.additionallySerializePlugin,Hh.plugins.onlySerializePropsPlugin,Hh.plugins.dontSerializePropsPlugin,Hh.plugins.livelyClassPropertiesPlugin,Hh.plugins.serializableCheckPlugin,Hh.plugins.finishPlugin];Hh.allPlugins=pq;Hh.allPlugins=pq;Hh.allPlugins=pq;var Ni=
lively.FreezerRuntime.recorderFor("lively.serializer2/object-pool.js");Ni.__additionally_serialize__addObjectFunction=function(f,l,p,b,d){d=void 0===d?[]:d;return function(h,a,e){e=void 0===e?!1:e;return l.props[h]=e?{value:a,verbatim:e}:{value:f.snapshotProperty(f.id,a,d.concat([h]),p,b)}}};Ni.arr=cf;Ni.Path=Eg;Ni.obj=xf;Ni.string=Ng;Ni.isPrimitive=yE;Ni.ClassHelper=oq;Ni.ExpressionSerializer=kk;Ni.allPlugins=pq;Ni.debugSerialization=!1;Ni.debugDeserialization=!1;var zi=function(f){this.options=
Object.assign({checkForLeaks:!1,ignoreClassNotFound:!0,idPropertyName:"id"},f);this.reset()};zi.withDefaultPlugins=function(f){return new this(Object.assign({plugins:Ni.allPlugins},f))};zi.resolveFromSnapshotAndId=function(f,l){return(new this(l)).resolveFromSnapshotAndId(f)};zi.fromSnapshot=function(f,l){return(new this(l)).readSnapshot(f)};zi.withObject=function(f,l){l=new this(l);l.add(f);return l};zi.prototype.reset=function(){this.uuidGen=Ni.string.newUUID;this._obj_ref_map=new Map;this._id_ref_map=
{};var f=this.options;this.classHelper=new Ni.ClassHelper(f);this.expressionSerializer=new Ni.ExpressionSerializer;f.idPropertyName&&(this.idPropertyName=f.idPropertyName);f.uuidGen&&(this.uuidGen=f.uuidGen);f.reinitializeIds&&(this.reinitializeIds=f.reinitializeIds);f.hasOwnProperty("ignoreClassNotFound")&&(this.classHelper.options.ignoreClassNotFound=f.ignoreClassNotFound);var l=this.plugins={serializeObject:[],additionallySerialize:[],propertiesToSerialize:[],deserializeObject:[],additionallyDeserializeBeforeProperties:[],
additionallyDeserializeAfterProperties:[],afterDeserialization:[],beforeDeserialization:[],afterSerialization:[],beforeSerialization:[]};f.plugins&&f.plugins.forEach(function(p){"function"===typeof p.serializeObject&&l.serializeObject.push(p);"function"===typeof p.additionallySerialize&&l.additionallySerialize.push(p);"function"===typeof p.propertiesToSerialize&&l.propertiesToSerialize.push(p);"function"===typeof p.deserializeObject&&l.deserializeObject.push(p);"function"===typeof p.additionallyDeserializeBeforeProperties&&
l.additionallyDeserializeBeforeProperties.push(p);"function"===typeof p.additionallyDeserializeAfterProperties&&l.additionallyDeserializeAfterProperties.push(p);"function"===typeof p.beforeDeserialization&&l.beforeDeserialization.push(p);"function"===typeof p.afterDeserialization&&l.afterDeserialization.push(p);"function"===typeof p.beforeSerialization&&l.beforeSerialization.push(p);"function"===typeof p.afterSerialization&&l.afterSerialization.push(p)})};zi.prototype.knowsId=function(f){return!!this._id_ref_map[f]};
zi.prototype.refForId=function(f){return this._id_ref_map[f]};zi.prototype.resolveToObj=function(f){return(f=this._id_ref_map[f])?f.realObj:void 0};zi.prototype.ref=function(f){return this._obj_ref_map.get(f)};zi.prototype.objects=function(){return Array.from(this._obj_ref_map.keys())};zi.prototype.objectRefs=function(){return Array.from(this._obj_ref_map.values())};zi.prototype.internalAddRef=function(f){f.realObj&&this._obj_ref_map.set(f.realObj,f);return this._id_ref_map[f.id]=f};zi.prototype.add=
function(f){var l=this;if(!Ni.isPrimitive(f)){if(Array.isArray(f))return f.map(function(b){return l.add(b)});var p=f.__serialization_id_property__||this.idPropertyName;return this.ref(f)||this.internalAddRef(new Ni.ObjectRef(f[p]||this.uuidGen(),f,void 0,this.idPropertyName))}};zi.prototype.snapshot=function(f){var l={};this.plugin_beforeSerialization(l,f);for(var p=0,b=Object.keys(this._id_ref_map);p<b.length;p++)this._id_ref_map[b[p]].snapshotObject(l,this);return l=this.plugin_afterSerialization(l,
f)};zi.prototype.snapshotObject=function(f){f=this.add(f).id;var l=this.snapshot(f);return{id:f,snapshot:l}};zi.prototype.readSnapshot=function(f,l){if(f.hasOwnProperty("id"))throw Error("readSnapshot expects simple serialized object map, not id-snapshot pair!");if(this.options.skipMigrations)Ni.ObjectRef.fromSnapshot(l,f,this,[],this.idPropertyName);else{l=0;for(var p=Object.keys(f);l<p.length;l++)this.resolveToObj(p[l])||Ni.ObjectRef.fromSnapshot(p[l],f,this,[],this.idPropertyName)}return this};
zi.prototype.resolveFromSnapshotAndId=function(f){if(!f.hasOwnProperty("id"))throw Error("idAndSnapshot does not have id");if(!f.hasOwnProperty("snapshot"))throw Error("idAndSnapshot does not have snapshot");var l=f=this.plugin_beforeDeserialization(f),p=l.id;this.readSnapshot(l.snapshot,p);this.plugin_afterDeserialization(f);return this.resolveToObj(p)};zi.prototype.plugin_beforeSerialization=function(f,l){for(var p=0;p<this.plugins.beforeSerialization.length;p++)this.plugins.beforeSerialization[p].beforeSerialization(this,
f,l)};zi.prototype.plugin_afterSerialization=function(f,l){for(var p=0;p<this.plugins.afterSerialization.length;p++){var b=this.plugins.afterSerialization[p].afterSerialization(this,f,l);b&&(f=b)}return f};zi.prototype.plugin_beforeDeserialization=function(f){for(var l=0;l<this.plugins.beforeDeserialization.length;l++){var p=this.plugins.beforeDeserialization[l].beforeDeserialization(this,f);p&&(f=p)}return f};zi.prototype.plugin_afterDeserialization=function(f){for(var l=0;l<this.plugins.afterDeserialization.length;l++)this.plugins.afterDeserialization[l].afterDeserialization(this,
f)};zi.prototype.plugin_serializeObject=function(f,l,p,b){for(var d=0;d<this.plugins.serializeObject.length;d++){var h=this.plugins.serializeObject[d].serializeObject(f,l,this,p,b);if(h)return h}};zi.prototype.plugin_propertiesToSerialize=function(f,l,p){for(var b=0;b<this.plugins.propertiesToSerialize.length;b++){var d=this.plugins.propertiesToSerialize[b].propertiesToSerialize(this,f,l,p);d&&(p=d)}return p};zi.prototype.plugin_additionallySerialize=function(f,l,p,b){p=this.plugins.additionallySerialize.length?
Ni.__additionally_serialize__addObjectFunction(f,l,p,this,b):null;for(b=0;b<this.plugins.additionallySerialize.length;b++)this.plugins.additionallySerialize[b].additionallySerialize(this,f,l,p)};zi.prototype.plugin_deserializeObject=function(f,l,p){for(var b=0;b<this.plugins.deserializeObject.length;b++){var d=this.plugins.deserializeObject[b].deserializeObject(this,f,l,p);if(d)return d}};zi.prototype.plugin_additionallyDeserializeBeforeProperties=function(f,l,p,b,d,h){for(var a=0;a<this.plugins.additionallyDeserializeBeforeProperties.length;a++){var e=
this.plugins.additionallyDeserializeBeforeProperties[a].additionallyDeserializeBeforeProperties(this,f,l,p,b,d,h);e&&(p=e)}return p};zi.prototype.plugin_additionallyDeserializeAfterProperties=function(f,l,p,b,d){for(var h=0;h<this.plugins.additionallyDeserializeAfterProperties.length;h++)this.plugins.additionallyDeserializeAfterProperties[h].additionallyDeserializeAfterProperties(this,f,l,p,b,d)};Ni.ObjectPool=zi;var po=function(f,l,p,b){this.id=f;this.idPropertyName=void 0===b?"id":b;this.realObj=
l;this.snapshotVersions=[];this.snapshots={};p&&(f=p.rev||0,this.snapshotVersions.push(f),this.snapshots[f]=p)};po.fromSnapshot=function(f,l,p,b,d){b=void 0===b?[]:b;f=new this(f,void 0,void 0,d);try{return p.internalAddRef(f).recreateObjFromSnapshot(l,p,b)}catch(h){if(p.options.highlightBuggyMorphs)for(;b.length;){if((l=Ni.Path(b).map(function(a,e){return"submorphs"==a?e.filter(function(n){return!n.isHand&&!n.isEpiMorph}):e}).get(p.options.rootObject))&&l.isMorph&&l.world()){l.show(!0);p.options.highlightBuggyMorphs=
!1;break}b.pop()}throw h;}};po.prototype.asRefForSerializedObjMap=function(f){return{__ref__:!0,id:this.id,rev:void 0===f?"????":f}};po.prototype.snapshotObject=function(f,l,p){p=void 0===p?[]:p;Ni.debugSerialization&&console.log("[serialize] "+p.join("."));if(100<p.length)throw Error("Stopping serializer, encountered a possibly infinit loop: "+p.join("."));var b=this.id,d=this.realObj,h=this.snapshots;if(!d)return console.error("Cannot marshall object ref "+b+", no real object!"),Object.assign({},
this.asRefForSerializedObjMap(),{isMissing:!0});var a=d._rev||0;var e=this.asRefForSerializedObjMap(a);Ni.arr.pushIfNotIncluded(this.snapshotVersions,a);if(h[a])return f[b]||(f[b]=h[a]),e;var n=typeof b;"number"===n&&(b=String(b),n="string");if("string"!==n)throw Error("Error snapshoting "+d+": id is not a string but "+(b+" (serialization path: ")+(p.join(".")+")"));if(n=l.plugin_serializeObject(d,!1,f,p))return h[a]=f[b]=n,e;n=Object.getOwnPropertyNames(d);var q={};h=h[a]=f[b]={rev:a,props:q};(a=
l.plugin_propertiesToSerialize(this,h,n))&&(n=a);for(a=0;a<n.length;a++){var r=n[a];q[r]={value:this.snapshotProperty(b,d[r],p.concat([r]),f,l)}}l.plugin_additionallySerialize(this,h,f,p);return e};po.prototype.snapshotProperty=function(f,l,p,b,d){var h=this;if(Ni.isPrimitive(l))return l;var a=d.plugin_serializeObject(l,!0,b,p);if(a)return a;if("function"!==typeof l)return Array.isArray(l)?l.map(function(e,n){return h.snapshotProperty(f,e,p.concat(n),b,d)}):(l=d.add(l))&&l.isObjectRef?l.snapshotObject(b,
d,p):l};po.prototype.recreateObjFromSnapshot=function(f,l,p){if(this.realObj)return this;Ni.debugDeserialization&&console.log("[deserialize] "+this.id+" (via "+p.join(".")+")");var b=f[this.id];if(!b)return console.error("Cannot recreateObjFromSnapshot ObjectRef "+(this.id+" b/c of missing snapshot in snapshot map!")),this;var d=b.rev,h;d=d||0;this.snapshotVersions.push(d);this.snapshots[d]=b;(h=l.plugin_deserializeObject(this,b,p))||(h={});"undefined"===typeof h._rev&&"object"===typeof h&&(h._rev=
d||0);this.realObj=h;l.internalAddRef(this);if(!h)return this;d=b.props;var a=l.plugin_additionallyDeserializeBeforeProperties(this,h,d,b,f,p);a&&(d=a);if(d)for(var e in d)this.recreatePropertyAndSetProperty(h,d,e,f,l,p);e=h.__serialization_id_property__||this.idPropertyName;l.reinitializeIds&&h.hasOwnProperty(e)&&(h[e]=l.reinitializeIds(this.id,this));l.plugin_additionallyDeserializeAfterProperties(this,h,b,f,p);return this};po.prototype.recreatePropertyAndSetProperty=function(f,l,p,b,d,h){try{var a=
l[p]||{value:"NON EXISTING"},e=a.value;f[p]=a.verbatim?e:this.recreateProperty(p,e,b,d,h.concat(p))}catch(q){try{var n=String(f)}catch(r){n="[some "+f.constructor.name+"]"}q.__seen?console.error("Error deserializing property "+p+" of "+n):(f=p+" of "+n+" ("+JSON.stringify(e)+")",console.error("Error deserializing property "+f),q.__seen=!0)}};po.prototype.recreateProperty=function(f,l,p,b,d){var h=this;if("string"===typeof l&&b.expressionSerializer.isSerializedExpression(l))return b.expressionSerializer.deserializeExpr(l);
if(Ni.isPrimitive(l))return l;if(Array.isArray(l))return l.map(function(a,e){return h.recreateProperty(e,a,p,b,d.concat(e))});f=l.__serialization_id_property__||this.idPropertyName;return(b.refForId(l[f])||Ni.ObjectRef.fromSnapshot(l[f],p,b,d,this.idPropertyName)).realObj};$jscomp.global.Object.defineProperties(po.prototype,{isObjectRef:{configurable:!0,enumerable:!0,get:function(){return!0}},currentSnapshot:{configurable:!0,enumerable:!0,get:function(){if(this.snapshotVersions.length)var f=Ni.arr.last(this.snapshotVersions);
else f=0,this.snapshotVersions.push(f);return this.snapshots[f]||(this.snapshots[f]={rev:f,props:{}})}},currentRev:{configurable:!0,enumerable:!0,get:function(){return this.snapshotVersions.length?Ni.arr.last(this.snapshotVersions):0}}});Ni.ObjectRef=po;var $e=lively.FreezerRuntime.recorderFor("lively.serializer2/snapshot-navigation.js");$e.referenceGraph=ZL;$e.isReference=zE;$e.referencesOfRef=$L;$e.referencesOfId=AE;$e.referencesInArray=IV;$e.moduleOfId=BE;$e.referencesAndClassNamesOfId=aM;$e.classNameOfId=
CE;$e.findPathFromToId=bM;$e.lookupPath=cM;$e.modifyProperty=dM;$e.removeUnreachableObjects=Tq;$e.clearDanglingConnections=DE;$e.requiredModulesOfSnapshot=Uq;$e.ClassHelper=oq;$e.Path=Eg;$e.obj=xf;$e.arr=cf;$e.graph=wr;$e.ExpressionSerializer=kk;$e.referenceGraph=ZL;$e.referenceGraph=ZL;$e.isReference=zE;$e.isReference=zE;$e.referencesOfRef=$L;$e.referencesOfRef=$L;$e.referencesOfId=AE;$e.referencesOfId=AE;$e.moduleOfId=BE;$e.moduleOfId=BE;$e.referencesAndClassNamesOfId=aM;$e.referencesAndClassNamesOfId=
aM;$e.classNameOfId=CE;$e.classNameOfId=CE;$e.findPathFromToId=bM;$e.findPathFromToId=bM;$e.lookupPath=cM;$e.lookupPath=cM;$e.modifyProperty=dM;$e.modifyProperty=dM;$e.removeUnreachableObjects=Tq;$e.removeUnreachableObjects=Tq;$e.clearDanglingConnections=DE;$e.clearDanglingConnections=DE;$e.defaultExprSerializer=new $e.ExpressionSerializer;$e.requiredModulesOfSnapshot=Uq;$e.requiredModulesOfSnapshot=Uq;var zS={},D9=!1,Cy="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,
sk=Ka("aT",function(){function f(){throw Error("setTimeout has not been defined");}function l(){throw Error("clearTimeout has not been defined");}function p(I){if(q===setTimeout)return setTimeout(I,0);if((q===f||!q)&&setTimeout)return q=setTimeout,setTimeout(I,0);try{return q(I,0)}catch(K){try{return q.call(null,I,0)}catch(P){return q.call(this||Cy,I,0)}}}function b(I){if(r===clearTimeout)return clearTimeout(I);if((r===l||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(I);try{return r(I)}catch(K){try{return r.call(null,
I)}catch(P){return r.call(this||Cy,I)}}}function d(){y&&D&&(y=!1,D.length?v=D.concat(v):E=-1,v.length&&h())}function h(){if(!y){var I=p(d);y=!0;for(var K=v.length;K;){D=v;for(v=[];++E<K;)D&&D[E].run();E=-1;K=v.length}D=null;y=!1;b(I)}}function a(I,K){(this||Cy).fun=I;(this||Cy).array=K}function e(){}if(D9)return zS;D9=!0;var n=zS={};try{var q="function"===typeof setTimeout?setTimeout:f}catch(I){q=f}try{var r="function"===typeof clearTimeout?clearTimeout:l}catch(I){r=l}var v=[],y=!1,D,E=-1;n.nextTick=
function(I){var K=Array(arguments.length-1);if(1<arguments.length)for(var P=1;P<arguments.length;P++)K[P-1]=arguments[P];v.push(new a(I,K));1!==v.length||y||p(h)};a.prototype.run=function(){(this||Cy).fun.apply(null,(this||Cy).array)};n.title="browser";n.browser=!0;n.env={};n.argv=[];n.version="";n.versions={};n.on=e;n.addListener=e;n.once=e;n.off=e;n.removeListener=e;n.removeAllListeners=e;n.emit=e;n.prependListener=e;n.prependOnceListener=e;n.listeners=function(I){return[]};n.binding=function(I){throw Error("process.binding is not supported");
};n.cwd=function(){return"/"};n.chdir=function(I){throw Error("process.chdir is not supported");};n.umask=function(){return 0};return zS}());sk.platform="browser";var KV={},JV=!1,MV={},LV=!1,Ip={},NV=!1,PV={},OV=!1,RV={},QV=!1,TV={},SV=!1,VV={},UV=!1,XV={},WV=!1,ZV={},YV=!1,aW={},$V=!1,cW={},bW=!1,eW={},dW=!1,gW={},fW=!1,iW={},hW=!1,kW={},jW=!1,mW={},lW=!1,oW={},nW=!1,qW={},pW=!1,sW={},rW=!1,vW={},uW=!1,xW={},wW=!1,AW={},zW=!1,CW={},BW=!1,jpa={},kpa=jpa=function(f){f.prototype[Symbol.iterator]=function p(){var b=
this,d;return $jscomp.generator.createGenerator(p,function(h){1==h.nextAddress&&(d=b.head);if(3!=h.nextAddress)return d?h.yield(d.value,3):h.jumpTo(0);d=d.next;return h.jumpTo(2)})}},E9={};E9=Di;Di.Node=ku;Di.create=Di;Di.prototype.removeNode=function(f){if(f.list!==this)throw Error("removing node which does not belong to this list");var l=f.next,p=f.prev;l&&(l.prev=p);p&&(p.next=l);f===this.head&&(this.head=l);f===this.tail&&(this.tail=p);f.list.length--;f.next=null;f.prev=null;f.list=null;return l};
Di.prototype.unshiftNode=function(f){if(f!==this.head){f.list&&f.list.removeNode(f);var l=this.head;f.list=this;if(f.next=l)l.prev=f;this.head=f;this.tail||(this.tail=f);this.length++}};Di.prototype.pushNode=function(f){if(f!==this.tail){f.list&&f.list.removeNode(f);var l=this.tail;f.list=this;if(f.prev=l)l.next=f;this.tail=f;this.head||(this.head=f);this.length++}};Di.prototype.push=function(){for(var f=0,l=arguments.length;f<l;f++)this.tail=new ku(arguments[f],this.tail,null,this),this.head||(this.head=
this.tail),this.length++;return this.length};Di.prototype.unshift=function(){for(var f=0,l=arguments.length;f<l;f++)this.head=new ku(arguments[f],null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length};Di.prototype.pop=function(){if(this.tail){var f=this.tail.value;(this.tail=this.tail.prev)?this.tail.next=null:this.head=null;this.length--;return f}};Di.prototype.shift=function(){if(this.head){var f=this.head.value;(this.head=this.head.next)?this.head.prev=null:this.tail=
null;this.length--;return f}};Di.prototype.forEach=function(f,l){l=l||this;for(var p=this.head,b=0;null!==p;b++)f.call(l,p.value,b,this),p=p.next};Di.prototype.forEachReverse=function(f,l){l=l||this;for(var p=this.tail,b=this.length-1;null!==p;b--)f.call(l,p.value,b,this),p=p.prev};Di.prototype.get=function(f){for(var l=0,p=this.head;null!==p&&l<f;l++)p=p.next;if(l===f&&null!==p)return p.value};Di.prototype.getReverse=function(f){for(var l=0,p=this.tail;null!==p&&l<f;l++)p=p.prev;if(l===f&&null!==
p)return p.value};Di.prototype.map=function(f,l){l=l||this;for(var p=new Di,b=this.head;null!==b;)p.push(f.call(l,b.value,this)),b=b.next;return p};Di.prototype.mapReverse=function(f,l){l=l||this;for(var p=new Di,b=this.tail;null!==b;)p.push(f.call(l,b.value,this)),b=b.prev;return p};Di.prototype.reduce=function(f,l){var p=this.head;if(1<arguments.length)var b=l;else if(this.head)p=this.head.next,b=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var d=0;null!==
p;d++)b=f(b,p.value,d),p=p.next;return b};Di.prototype.reduceReverse=function(f,l){var p=this.tail;if(1<arguments.length)var b=l;else if(this.tail)p=this.tail.prev,b=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var d=this.length-1;null!==p;d--)b=f(b,p.value,d),p=p.prev;return b};Di.prototype.toArray=function(){for(var f=Array(this.length),l=0,p=this.head;null!==p;l++)f[l]=p.value,p=p.next;return f};Di.prototype.toArrayReverse=function(){for(var f=Array(this.length),
l=0,p=this.tail;null!==p;l++)f[l]=p.value,p=p.prev;return f};Di.prototype.slice=function(f,l){l=l||this.length;0>l&&(l+=this.length);f=f||0;0>f&&(f+=this.length);var p=new Di;if(l<f||0>l)return p;0>f&&(f=0);l>this.length&&(l=this.length);for(var b=0,d=this.head;null!==d&&b<f;b++)d=d.next;for(;null!==d&&b<l;b++,d=d.next)p.push(d.value);return p};Di.prototype.sliceReverse=function(f,l){l=l||this.length;0>l&&(l+=this.length);f=f||0;0>f&&(f+=this.length);var p=new Di;if(l<f||0>l)return p;0>f&&(f=0);l>
this.length&&(l=this.length);for(var b=this.length,d=this.tail;null!==d&&b>l;b--)d=d.prev;for(;null!==d&&b>f;b--,d=d.prev)p.push(d.value);return p};Di.prototype.splice=function(f,l,p){for(var b=[],d=2;d<arguments.length;++d)b[d-2]=arguments[d];f>this.length&&(f=this.length-1);0>f&&(f=this.length+f);d=0;for(var h=this.head;null!==h&&d<f;d++)h=h.next;var a=[];for(d=0;h&&d<l;d++)a.push(h.value),h=this.removeNode(h);null===h&&(h=this.tail);h!==this.head&&h!==this.tail&&(h=h.prev);for(d=0;d<b.length;d++){var e=
b[d];h=h===this.head?new ku(e,null,h,this):new ku(e,h,h.next,this);null===h.next&&(this.tail=h);null===h.prev&&(this.head=h);this.length++}return a};Di.prototype.reverse=function(){for(var f=this.head,l=this.tail,p=f;null!==p;p=p.prev){var b=p.prev;p.prev=p.next;p.next=b}this.head=l;this.tail=f;return this};try{kpa(Di)}catch(f){}var lpa={},mpa=E9,qv=Symbol("max"),tn=Symbol("length"),Dy=Symbol("lengthCalculator"),$B=Symbol("allowStale"),rv=Symbol("maxAge"),Fr=Symbol("dispose"),F9=Symbol("noDisposeOnSet"),
tl=Symbol("lruList"),mp=Symbol("cache"),G9=Symbol("updateAgeOnGet"),AS=function(){return 1},Ll=function(f){"number"===typeof f&&(f={max:f});f||(f={});if(f.max&&("number"!==typeof f.max||0>f.max))throw new TypeError("max must be a non-negative number");this[qv]=f.max||Infinity;var l=f.length||AS;this[Dy]="function"!==typeof l?AS:l;this[$B]=f.stale||!1;if(f.maxAge&&"number"!==typeof f.maxAge)throw new TypeError("maxAge must be a number");this[rv]=f.maxAge||0;this[Fr]=f.dispose;this[F9]=f.noDisposeOnSet||
!1;this[G9]=f.updateAgeOnGet||!1;this.reset()};Ll.prototype.rforEach=function(f,l){l=l||this;for(var p=this[tl].tail;null!==p;){var b=p.prev;H9(this,f,p,l);p=b}};Ll.prototype.forEach=function(f,l){l=l||this;for(var p=this[tl].head;null!==p;){var b=p.next;H9(this,f,p,l);p=b}};Ll.prototype.keys=function(){return this[tl].toArray().map(function(f){return f.key})};Ll.prototype.values=function(){return this[tl].toArray().map(function(f){return f.value})};Ll.prototype.reset=function(){var f=this;this[Fr]&&
this[tl]&&this[tl].length&&this[tl].forEach(function(l){return f[Fr](l.key,l.value)});this[mp]=new Map;this[tl]=new mpa;this[tn]=0};Ll.prototype.dump=function(){var f=this;return this[tl].map(function(l){return jJ(f,l)?!1:{k:l.key,v:l.value,e:l.now+(l.maxAge||0)}}).toArray().filter(function(l){return l})};Ll.prototype.dumpLru=function(){return this[tl]};Ll.prototype.set=function(f,l,p){if((p=p||this[rv])&&"number"!==typeof p)throw new TypeError("maxAge must be a number");var b=p?Date.now():0,d=this[Dy](l,
f);if(this[mp].has(f)){if(d>this[qv])return Ey(this,this[mp].get(f)),!1;var h=this[mp].get(f).value;if(this[Fr]&&!this[F9])this[Fr](f,h.value);h.now=b;h.maxAge=p;h.value=l;this[tn]+=d-h.length;h.length=d;this.get(f);aC(this);return!0}p=new npa(f,l,d,b,p);if(p.length>this[qv]){if(this[Fr])this[Fr](f,l);return!1}this[tn]+=p.length;this[tl].unshift(p);this[mp].set(f,this[tl].head);aC(this);return!0};Ll.prototype.has=function(f){if(!this[mp].has(f))return!1;f=this[mp].get(f).value;return!jJ(this,f)};
Ll.prototype.get=function(f){return BS(this,f,!0)};Ll.prototype.peek=function(f){return BS(this,f,!1)};Ll.prototype.pop=function(){var f=this[tl].tail;if(!f)return null;Ey(this,f);return f.value};Ll.prototype.del=function(f){Ey(this,this[mp].get(f))};Ll.prototype.load=function(f){this.reset();for(var l=Date.now(),p=f.length-1;0<=p;p--){var b=f[p],d=b.e||0;0===d?this.set(b.k,b.v):(d-=l,0<d&&this.set(b.k,b.v,d))}};Ll.prototype.prune=function(){var f=this;this[mp].forEach(function(l,p){return BS(f,p,
!1)})};$jscomp.global.Object.defineProperties(Ll.prototype,{max:{configurable:!0,enumerable:!0,set:function(f){if("number"!==typeof f||0>f)throw new TypeError("max must be a non-negative number");this[qv]=f||Infinity;aC(this)},get:function(){return this[qv]}},allowStale:{configurable:!0,enumerable:!0,set:function(f){this[$B]=!!f},get:function(){return this[$B]}},maxAge:{configurable:!0,enumerable:!0,set:function(f){if("number"!==typeof f)throw new TypeError("maxAge must be a non-negative number");
this[rv]=f;aC(this)},get:function(){return this[rv]}},lengthCalculator:{configurable:!0,enumerable:!0,set:function(f){var l=this;"function"!==typeof f&&(f=AS);f!==this[Dy]&&(this[Dy]=f,this[tn]=0,this[tl].forEach(function(p){p.length=l[Dy](p.value,p.key);l[tn]+=p.length}));aC(this)},get:function(){return this[Dy]}},length:{configurable:!0,enumerable:!0,get:function(){return this[tn]}},itemCount:{configurable:!0,enumerable:!0,get:function(){return this[tl].length}}});var BS=function(f,l,p){if(l=f[mp].get(l)){var b=
l.value;if(jJ(f,b)){if(Ey(f,l),!f[$B])return}else p&&(f[G9]&&(l.value.now=Date.now()),f[tl].unshiftNode(l));return b.value}},jJ=function(f,l){if(!l||!l.maxAge&&!f[rv])return!1;var p=Date.now()-l.now;return l.maxAge?p>l.maxAge:f[rv]&&p>f[rv]},aC=function(f){if(f[tn]>f[qv])for(var l=f[tl].tail;f[tn]>f[qv]&&null!==l;){var p=l.prev;Ey(f,l);l=p}},Ey=function(f,l){if(l){var p=l.value;if(f[Fr])f[Fr](p.key,p.value);f[tn]-=p.length;f[mp].delete(p.key);f[tl].removeNode(l)}},npa=function(f,l,p,b,d){this.key=
f;this.value=l;this.length=p;this.now=b;this.maxAge=d||0},H9=function(f,l,p,b){var d=p.value;jJ(f,d)&&(Ey(f,p),f[$B]||(d=void 0));d&&l.call(b,d.value,d.key,f)},I9=lpa=Ll,J9=Object.freeze({__proto__:null,"default":I9}),Zda="default"in J9?I9:J9,kM={},DW=!1,lM={},EW=!1,GW={},FW=!1,IW={},HW=!1,KW={},JW=!1,MW={},LW=!1,OW={},NW=!1,QW={},PW=!1,SW={},RW=!1,UW={},TW=!1,WW={},VW=!1,YW={},XW=!1,$W={},ZW=!1,bX={},aX=!1,dX={},cX=!1,fX={},eX=!1,hX={},gX=!1,jX={},iX=!1,lX={},kX=!1,nX={},mX=!1,K9={},L9=!1,bC=function(){if(L9)return K9;
L9=!0;var f=bx();return K9={re:f.re,src:f.src,tokens:f.t,SEMVER_SPEC_VERSION:EE().SEMVER_SPEC_VERSION,SemVer:hm(),compareIdentifiers:eM().compareIdentifiers,rcompareIdentifiers:eM().rcompareIdentifiers,parse:cx(),valid:Sda(),clean:cea(),inc:Tda(),diff:dea(),major:Uda(),minor:eea(),patch:fea(),prerelease:Vda(),compare:Ko(),rcompare:Wda(),compareLoose:gea(),compareBuild:gM(),sort:hea(),rsort:Xda(),gt:HE(),lt:hM(),eq:fM(),neq:tW(),gte:iM(),lte:jM(),cmp:yW(),coerce:Yda(),Comparator:IE(),Range:Lo(),satisfies:JE(),
toComparators:iea(),maxSatisfying:$da(),minSatisfying:jea(),minVersion:kea(),validRange:aea(),outside:mM(),gtr:lea(),ltr:mea(),intersects:bea(),simplifyRange:nea(),subset:oea()}}(),hf=lively.FreezerRuntime.recorderFor("lively.serializer2/index.js");hf.normalizeOptions=Vz;hf.normalizeMigrations=function(f){f=void 0===f?[]:f;return{before:f.filter(function(l){return"function"===typeof l.snapshotConverter}),after:f.filter(function(l){return"function"===typeof l.objectConverter})}};hf.runMigrations=function(f,
l,p,b){for(var d=0;d<f.length;d++){var h=f[d];try{p=h[l](p,b)}catch(a){console.error("migration "+h.name+" failed:"),console.error(a)}}return p};hf.serialize=dx;hf.deserialize=Wz;hf.deserializeWithMigrations=Xz;hf.copy=Yz;hf.ObjectPool=zi;hf.serializerVersion="0.1.3";hf.requiredModulesOfSnapshot=Uq;hf.removeUnreachableObjects=Tq;hf.clearDanglingConnections=DE;hf.allPlugins=pq;hf.semver=bC;hf.normalizeOptions=Vz;hf.normalizeOptions=Vz;hf.majorAndMinorVersionRe=/\.[^\.]+$/;hf.ObjectRef=po;hf.ObjectRef=
po;hf.ObjectPool=zi;hf.ObjectPool=zi;hf.requiredModulesOfSnapshot=Uq;hf.requiredModulesOfSnapshot=Uq;hf.removeUnreachableObjects=Tq;hf.removeUnreachableObjects=Tq;hf.serialize=dx;hf.serialize=dx;hf.deserialize=Wz;hf.deserialize=Wz;hf.deserializeWithMigrations=Xz;hf.deserializeWithMigrations=Xz;hf.copy=Yz;hf.copy=Yz;hf.ExpressionSerializer=kk;hf.serializeSpec=an;hf.deserializeSpec=Jo;hf.getSerializableClassMeta=ms;hf.locateClass=Gp;hf.getClassName=Io;hf.ExpressionSerializer=kk;hf.ExpressionSerializer=
kk;hf.getSerializableClassMeta=ms;hf.getSerializableClassMeta=ms;hf.locateClass=Gp;hf.locateClass=Gp;hf.serializeSpec=an;hf.serializeSpec=an;hf.deserializeSpec=Jo;hf.deserializeSpec=Jo;hf.getClassName=Io;hf.getClassName=Io;hf.allPlugins=pq;hf.allPlugins=pq;var opa=Object.freeze({__proto__:null,normalizeOptions:Vz,ObjectRef:po,ObjectPool:zi,requiredModulesOfSnapshot:Uq,removeUnreachableObjects:Tq,serialize:dx,deserialize:Wz,deserializeWithMigrations:Xz,copy:Yz,ExpressionSerializer:kk,getSerializableClassMeta:ms,
locateClass:Gp,serializeSpec:an,deserializeSpec:Jo,getClassName:Io,allPlugins:pq}),kh=lively.FreezerRuntime.recorderFor("lively.morphic/helpers.js");kh.sanitizeFont=Zz;kh.pathForBrowserHistory=ex;kh.addClassMappings=$z;kh.morph=zj;kh.newMorphId=aA;kh.lazyInspect=function(f){var l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(System.import("lively.ide/js/inspector.js"),2);l=b.yieldResult;p=l.inspect;kh.inspect=p;return b.return(p(f))})};kh.locateClass=
Gp;kh.string=Ng;kh.parseQuery=Kb;kh.stringifyQuery=Zc;kh.touchInput=kh.touchInput||void 0;try{document.createEvent("TouchEvent"),kh.touchInput=!0}catch(f){kh.touchInput=!1}var qm=Ka("t",kh.touchInput);kh.touchInputDevice=qm;kh.touchInputDevice=qm;kh.touchInputDevice=qm;kh.nameToClassMapping=kh.nameToClassMapping||{};kh.sanitizeFont=Zz;kh.sanitizeFont=Zz;kh.pathForBrowserHistory=ex;kh.pathForBrowserHistory=ex;kh.addClassMappings=$z;kh.addClassMappings=$z;kh.morph=zj;kh.morph=zj;kh.newMorphId=aA;kh.newMorphId=
aA;var sv=Ka("a2",kh.lazyInspect);kh.inspect=sv;kh.inspect=sv;kh.inspect=sv;var ppa={},qea=Object.prototype.toString,CS=ppa=Array.isArray||pea,qpa={},cC=qpa="2",nM="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,M9={};Hn.NONE=0;Hn.VTEXT=1;Hn.VNODE=2;Hn.WIDGET=3;Hn.PROPS=4;Hn.ORDER=5;Hn.INSERT=6;Hn.REMOVE=7;Hn.THUNK=8;M9=Hn;Hn.prototype.version=cC;Hn.prototype.type="VirtualPatch";var Gr=M9,rpa={},dC=rpa=function(f){return f&&"VirtualNode"===f.type&&f.version===cC},
spa={},kJ=spa=function(f){return f&&"VirtualText"===f.type&&f.version===cC},tpa={},ht=tpa=function(f){return f&&"Widget"===f.type},upa={},eC=upa=function(f){return f&&"Thunk"===f.type},vpa={},rea=dC,sea=kJ,tea=ht,N9=vpa=function(f,l){var p=f,b=l;eC(l)&&(b=oX(l,f));eC(f)&&(p=oX(f,null));return{a:p,b:b}},wpa={},lJ=wpa=function(f){return"object"===typeof f&&null!==f},xpa={},fC=xpa=function(f){return f&&("function"===typeof f.hook&&!f.hasOwnProperty("hook")||"function"===typeof f.unhook&&!f.hasOwnProperty("unhook"))},
O9={},qX=lJ,uea=fC;O9=pX;var P9={},xea=CS,Ij=Gr,lu=dC,vX=kJ,LE=ht,KE=eC,wea=N9,vea=O9;P9=sX;var ypa={},zpa=ypa=P9,Apa=Object.freeze({}),Q9="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Bpa={},R9="undefined"!==typeof Q9?Q9:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var DS=document;else(DS=R9["__GLOBAL_DOCUMENT_CACHE@4"])||(DS=R9["__GLOBAL_DOCUMENT_CACHE@4"]=Apa);var S9=Bpa=DS,Cpa={},xX=fC,T9=Cpa=function(f,l,p){for(var b in l){var d=l[b];
if(void 0===d)wX(f,b,d,p);else if(xX(d))wX(f,b,d,p),d.hook&&d.hook(f,b,p?p[b]:void 0);else if(lJ(d)){var h=void 0,a=void 0,e=f,n=b,q=p?p[n]:void 0;if("attributes"===n)for(a in d)h=d[a],void 0===h?e.removeAttribute(a):e.setAttribute(a,h);else if(q&&lJ(q)&&yX(q)!==yX(d))e[n]=d;else for(h in lJ(e[n])||(e[n]={}),a="style"===n?"":void 0,d)q=d[h],e[n][h]=void 0===q?a:q}else f[b]=d}},Dpa={},AX=S9,Cea=T9,Bea=dC,Aea=kJ,zea=ht,yea=N9,U9=Dpa=zX,Epa={},Fpa=Epa=function(f,l){return ht(f)&&ht(l)?"name"in f&&"name"in
l?f.id===l.id:f.init===l.init:!1},Gpa={},Dea={},Hpa=Gpa=function(f,l,p,b){return p&&0!==p.length?(p.sort(Eea),BX(f,l,p,b,0)):{}},V9={},Fea=ht;V9=function(f,l,p){var b=f.vNode,d=f.patch;switch(f.type){case Gr.REMOVE:return(d=l.parentNode)&&d.removeChild(l),DX(l,b),null;case Gr.INSERT:return d=p.render(d,p),l&&l.appendChild(d),l;case Gr.VTEXT:return 3===l.nodeType?(l.replaceData(0,l.length,d.text),d=l):(b=l.parentNode,d=p.render(d,p),b&&d!==l&&b.replaceChild(d,l)),d;case Gr.WIDGET:return d=(f=Fpa(b,
d))?d.update(b,l)||l:p.render(d,p),(p=l.parentNode)&&d!==l&&p.replaceChild(d,l),f||DX(l,b),d;case Gr.VNODE:return b=l.parentNode,d=p.render(d,p),b&&d!==l&&b.replaceChild(d,l),d;case Gr.ORDER:b=l.childNodes;p={};for(var h,a=0;a<d.removes.length;a++)h=d.removes[a],f=b[h.from],h.key&&(p[h.key]=f),l.removeChild(f);a=b.length;for(var e=0;e<d.inserts.length;e++)h=d.inserts[e],f=p[h.key],l.insertBefore(f,h.to>=a++?null:b[h.to]);return l;case Gr.PROPS:return T9(l,d,b.properties),l;case Gr.THUNK:return d=
p.patch(l,d,p),l&&d&&l!==d&&l.parentNode&&l.parentNode.replaceChild(d,l),d;default:return l}};var W9={},Jea=S9,Kea=CS,Hea=U9,Iea=Hpa,FX=V9;W9=EX;var Ipa={},Jpa=Ipa=W9,Jp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,X9={},Oea=dC,Pea=ht,Qea=eC,Nea=fC;X9=rM;var Lea={},Mea=[];rM.prototype.version=cC;rM.prototype.type="VirtualNode";var ES=X9,Rea="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Y9={};Y9=sM;sM.prototype.version=cC;sM.prototype.type=
"VirtualText";var FS=Y9,Z9={};Z9=function(f){var l=String.prototype.split,p=/()??/.exec("")[1]===f;return function(b,d,h){if("[object RegExp]"!==Object.prototype.toString.call(d))return l.call(b,d,h);var a=[],e=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.extended?"x":"")+(d.sticky?"y":""),n=0;d=new RegExp(d.source,e+"g");var q,r;b+="";p||(q=new RegExp("^"+d.source+"$(?!\\s)",e));for(h=h===f?4294967295:h>>>0;r=d.exec(b);){e=r.index+r[0].length;if(e>n){a.push(b.slice(n,r.index));!p&&1<r.length&&r[0].replace(q,
function(){for(var y=1;y<arguments.length-2;y++)arguments[y]===f&&(r[y]=f)});1<r.length&&r.index<b.length&&Array.prototype.push.apply(a,r.slice(1));var v=r[0].length;n=e;if(a.length>=h)break}d.lastIndex===r.index&&d.lastIndex++}n===b.length?(v||!d.test(""))&&a.push(""):a.push(b.slice(n));return a.length>h?a.slice(0,h):a}}();var Kpa={},Lpa=Z9,Mpa=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,Npa=/^\.|#/,Opa=Kpa=function(f,l){if(!f)return"DIV";var p=!l.hasOwnProperty("id");f=Lpa(f,Mpa);var b=null;Npa.test(f[1])&&
(b="DIV");var d,h;for(h=0;h<f.length;h++)if(d=f[h]){var a=d.charAt(0);if(b)if("."===a){var e=e||[];e.push(d.substring(1,d.length))}else"#"===a&&p&&(l.id=d.substring(1,d.length));else b=d}e&&(l.className&&e.push(l.className),l.className=e.join(" "));return l.namespace?b:b.toUpperCase()},$9={};$9=NE;NE.prototype.hook=function(f,l){f[l]!==this.value&&(f[l]=this.value)};var Ppa=$9,a$="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,b$={},GS="undefined"!==typeof window?
window:"undefined"!==typeof a$?a$:{};b$=function(f,l){return f in GS?GS[f]:GS[f]=l};var c$={},d$=b$;c$=function(f,l,p){var b="__INDIVIDUAL_ONE_VERSION_"+f,d=d$(b+"_ENFORCE_SINGLETON",l);if(d!==l)throw Error("Can only have one copy of "+f+".\nYou already have version "+d+" installed.\nThis means you cannot install version "+l);return d$(b,p)};var e$={};c$("ev-store","7");e$=function(f){var l=f["__EV_STORE_KEY@7"];l||(l=f["__EV_STORE_KEY@7"]={});return l};var f$={},g$=e$;f$=bA;bA.prototype.hook=function(f,
l){f=g$(f);l=l.substr(3);f[l]=this.value};bA.prototype.unhook=function(f,l){f=g$(f);l=l.substr(3);f[l]=void 0};var h$={},JX=CS,HX=FS,Sea=dC,Tea=kJ,Uea=ht,Vea=eC,Qpa=f$;h$=function(f,l,p){var b=[],d;if(d=!p)d="string"===typeof l||JX(l)||IX(l);if(d){p=l;var h={}}h=h||l||{};f=Opa(f,h);if(h.hasOwnProperty("key")){var a=h.key;h.key=void 0}if(h.hasOwnProperty("namespace")){var e=h.namespace;h.namespace=void 0}"INPUT"!==f||e||!h.hasOwnProperty("value")||void 0===h.value||fC(h.value)||(h.value=Ppa(h.value));
l=h;for(var n in l)l.hasOwnProperty(n)&&(d=l[n],fC(d)||"ev-"===n.substr(0,3)&&(l[n]=Qpa(d)));void 0!==p&&null!==p&&GX(p,b,f,h);return new ES(f,h,b,a,e)};var Rpa={},Spa=Rpa=h$,i$={};i$=U9;var Tpa={},gC=Tpa={diff:zpa,patch:Jpa,h:Spa,create:i$,VNode:ES,VText:FS},Upa={},Vpa=Upa={abbr:"abbr",accept:"accept","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",alt:"alt",async:"async",autocomplete:"autoComplete",autofocus:"autoFocus",
autoplay:"autoPlay",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charset",checked:"checked",cite:"cite","class":"className",cols:"cols",colspan:"colSpan",command:"command",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",coords:"coords",crossorigin:"crossOrigin",data:"data",datetime:"dateTime","default":"default",defer:"defer",dir:"dir",disabled:"disabled",download:"download",draggable:"draggable",dropzone:"dropzone",
enctype:"encType","for":"htmlFor",form:"form",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameBorder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang","http-equiv":"httpEquiv",icon:"icon",id:"id",inputmode:"inputMode",ismap:"isMap",itemid:"itemId",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",kind:"kind",label:"label",lang:"lang",
list:"list",loop:"loop",manifest:"manifest",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",ping:"ping",placeholder:"placeholder",poster:"poster",preload:"preload",radiogroup:"radioGroup",readonly:"readOnly",rel:"rel",required:"required",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",
scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",sortable:"sortable",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srcset:"srcSet",start:"start",step:"step",style:"style",tabindex:"tabIndex",target:"target",title:"title",translate:"translate",type:"type",typemustmatch:"typeMustMatch",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap"},j$={};j$={about:null,"accent-height":null,accumulate:null,additive:null,"alignment-baseline":null,
alphabetic:null,amplitude:null,"arabic-form":null,ascent:null,attributeName:null,attributeType:null,azimuth:null,bandwidth:null,baseFrequency:null,baseProfile:null,"baseline-shift":null,bbox:null,begin:null,bias:null,by:null,calcMode:null,"cap-height":null,"class":null,clip:null,"clip-path":null,"clip-rule":null,clipPathUnits:null,color:null,"color-interpolation":null,"color-interpolation-filters":null,"color-profile":null,"color-rendering":null,content:null,contentScriptType:null,contentStyleType:null,
cursor:null,cx:null,cy:null,d:null,datatype:null,defaultAction:null,descent:null,diffuseConstant:null,direction:null,display:null,divisor:null,"dominant-baseline":null,dur:null,dx:null,dy:null,edgeMode:null,editable:null,elevation:null,"enable-background":null,end:null,"ev:event":"http://www.w3.org/2001/xml-events",event:null,exponent:null,externalResourcesRequired:null,fill:null,"fill-opacity":null,"fill-rule":null,filter:null,filterRes:null,filterUnits:null,"flood-color":null,"flood-opacity":null,
focusHighlight:null,focusable:null,"font-family":null,"font-size":null,"font-size-adjust":null,"font-stretch":null,"font-style":null,"font-variant":null,"font-weight":null,format:null,from:null,fx:null,fy:null,g1:null,g2:null,"glyph-name":null,"glyph-orientation-horizontal":null,"glyph-orientation-vertical":null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:null,height:null,"horiz-adv-x":null,"horiz-origin-x":null,"horiz-origin-y":null,id:null,ideographic:null,"image-rendering":null,
"in":null,in2:null,initialVisibility:null,intercept:null,k:null,k1:null,k2:null,k3:null,k4:null,kernelMatrix:null,kernelUnitLength:null,kerning:null,keyPoints:null,keySplines:null,keyTimes:null,lang:null,lengthAdjust:null,"letter-spacing":null,"lighting-color":null,limitingConeAngle:null,local:null,"marker-end":null,"marker-mid":null,"marker-start":null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,
mediaContentEncodings:null,mediaSize:null,mediaTime:null,method:null,min:null,mode:null,name:null,"nav-down":null,"nav-down-left":null,"nav-down-right":null,"nav-left":null,"nav-next":null,"nav-prev":null,"nav-right":null,"nav-up":null,"nav-up-left":null,"nav-up-right":null,numOctaves:null,observer:null,offset:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,"overline-position":null,"overline-thickness":null,"panose-1":null,path:null,pathLength:null,
patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,playbackOrder:null,"pointer-events":null,points:null,pointsAtX:null,pointsAtY:null,pointsAtZ:null,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:null,r:null,radius:null,refX:null,refY:null,rel:null,"rendering-intent":null,repeatCount:null,repeatDur:null,requiredExtensions:null,requiredFeatures:null,requiredFonts:null,requiredFormats:null,resource:null,restart:null,result:null,rev:null,
role:null,rotate:null,rx:null,ry:null,scale:null,seed:null,"shape-rendering":null,slope:null,snapshotTime:null,spacing:null,specularConstant:null,specularExponent:null,spreadMethod:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,"stop-color":null,"stop-opacity":null,"strikethrough-position":null,"strikethrough-thickness":null,string:null,stroke:null,"stroke-dasharray":null,"stroke-dashoffset":null,"stroke-linecap":null,"stroke-linejoin":null,"stroke-miterlimit":null,
"stroke-opacity":null,"stroke-width":null,surfaceScale:null,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:null,tableValues:null,target:null,targetX:null,targetY:null,"text-anchor":null,"text-decoration":null,"text-rendering":null,textLength:null,timelineBegin:null,title:null,to:null,transform:null,transformBehavior:null,type:null,"typeof":null,u1:null,u2:null,"underline-position":null,"underline-thickness":null,unicode:null,
"unicode-bidi":null,"unicode-range":null,"units-per-em":null,"v-alphabetic":null,"v-hanging":null,"v-ideographic":null,"v-mathematical":null,values:null,version:null,"vert-adv-y":null,"vert-origin-x":null,"vert-origin-y":null,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,"word-spacing":null,"writing-mode":null,x:null,"x-height":null,x1:null,x2:null,xChannelSelector:null,"xlink:actuate":"http://www.w3.org/1999/xlink","xlink:arcrole":"http://www.w3.org/1999/xlink","xlink:href":"http://www.w3.org/1999/xlink",
"xlink:role":"http://www.w3.org/1999/xlink","xlink:show":"http://www.w3.org/1999/xlink","xlink:title":"http://www.w3.org/1999/xlink","xlink:type":"http://www.w3.org/1999/xlink","xml:base":"http://www.w3.org/XML/1998/namespace","xml:id":"http://www.w3.org/XML/1998/namespace","xml:lang":"http://www.w3.org/XML/1998/namespace","xml:space":"http://www.w3.org/XML/1998/namespace",y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null};var Wpa={},Xea=ES,LX=FS,HS,MX=Vpa,Wea=j$,Xpa=Wpa=function(f,
l){if(!f)return tM(document.createTextNode(""));if("string"===typeof f){if(!("DOMParser"in window))throw Error("DOMParser is not available, so parsing string to DOM node is not possible.");HS=HS||new DOMParser;f=HS.parseFromString(f,"text/html");f=f.body.firstChild?f.getElementsByTagName("body")[0].firstChild:f.head.firstChild&&("TITLE"!==f.head.firstChild.tagName||f.title)?f.head.firstChild:f.firstChild&&"HTML"!==f.firstChild.tagName?f.firstChild:document.createTextNode("")}if("object"!==typeof f||
!f||!f.nodeType)throw Error("invalid dom node",f);return tM(f,l)},Ypa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,IS={};!function(f,l){IS?IS=l():(this||Ypa)[f]=l()}("bowser",function(){function f(h){function a(F){return(F=h.match(F))&&1<F.length&&F[1]||""}function e(F){return(F=h.match(F))&&1<F.length&&F[2]||""}var n=a(/(ipod|iphone|ipad)/i).toLowerCase(),q=!/like android/i.test(h)&&/android/i.test(h),r=/nexus\s*[0-6]\s*/i.test(h),v=!r&&/nexus\s*[0-9]+/i.test(h),
y=/CrOS/.test(h),D=/silk/i.test(h),E=/sailfish/i.test(h),I=/tizen/i.test(h),K=/(web|hpw)os/i.test(h),P=/windows phone/i.test(h),N=!P&&/windows/i.test(h),aa=!n&&!D&&/macintosh/i.test(h),m=!q&&!E&&!I&&!K&&/linux/i.test(h),t=a(/edge\/(\d+(\.\d+)?)/i),u=a(/version\/(\d+(\.\d+)?)/i),B=/tablet/i.test(h),A=!B&&/[^-]mobi/i.test(h),H=/xbox/i.test(h);/opera|opr|opios/i.test(h)?y={name:"Opera",opera:!0,version:u||a(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(h)?y={name:"Opera Coast",coast:!0,version:u||
a(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(h)?y={name:"Yandex Browser",yandexbrowser:!0,version:u||a(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(h)?y={name:"UC Browser",ucbrowser:!0,version:a(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(h)?y={name:"Maxthon",maxthon:!0,version:a(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(h)?y={name:"Epiphany",epiphany:!0,version:a(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(h)?y={name:"Puffin",puffin:!0,version:a(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:
/sleipnir/i.test(h)?y={name:"Sleipnir",sleipnir:!0,version:a(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(h)?y={name:"K-Meleon",kMeleon:!0,version:a(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:P?(y={name:"Windows Phone",windowsphone:!0},t?(y.msedge=!0,y.version=t):(y.msie=!0,y.version=a(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(h)?y={name:"Internet Explorer",msie:!0,version:a(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:y?y={name:"Chrome",chromeos:!0,chromeBook:!0,chrome:!0,version:a(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:
/chrome.+? edge/i.test(h)?y={name:"Microsoft Edge",msedge:!0,version:t}:/vivaldi/i.test(h)?y={name:"Vivaldi",vivaldi:!0,version:a(/vivaldi\/(\d+(\.\d+)?)/i)||u}:E?y={name:"Sailfish",sailfish:!0,version:a(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(h)?y={name:"SeaMonkey",seamonkey:!0,version:a(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(h)?(y={name:"Firefox",firefox:!0,version:a(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(h)&&
(y.firefoxos=!0)):D?y={name:"Amazon Silk",silk:!0,version:a(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(h)?y={name:"PhantomJS",phantom:!0,version:a(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(h)?y={name:"SlimerJS",slimer:!0,version:a(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(h)||/rim\stablet/i.test(h)?y={name:"BlackBerry",blackberry:!0,version:u||a(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:K?(y={name:"WebOS",webos:!0,version:u||a(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(h)&&
(y.touchpad=!0)):/bada/i.test(h)?y={name:"Bada",bada:!0,version:a(/dolfin\/(\d+(\.\d+)?)/i)}:I?y={name:"Tizen",tizen:!0,version:a(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||u}:/qupzilla/i.test(h)?y={name:"QupZilla",qupzilla:!0,version:a(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||u}:/chromium/i.test(h)?y={name:"Chromium",chromium:!0,version:a(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||u}:/chrome|crios|crmo/i.test(h)?y={name:"Chrome",chrome:!0,version:a(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:q?y={name:"Android",
version:u}:/safari|applewebkit/i.test(h)?(y={name:"Safari",safari:!0},u&&(y.version=u)):n?(y={name:"iphone"==n?"iPhone":"ipad"==n?"iPad":"iPod"},u&&(y.version=u)):y=/googlebot/i.test(h)?{name:"Googlebot",googlebot:!0,version:a(/googlebot\/(\d+(\.\d+))/i)||u}:{name:a(/^(.*)\/(.*) /),version:e(/^(.*)\/(.*) /)};!y.msedge&&/(apple)?webkit/i.test(h)?(/(apple)?webkit\/537\.36/i.test(h)?(y.name=y.name||"Blink",y.blink=!0):(y.name=y.name||"Webkit",y.webkit=!0),!y.version&&u&&(y.version=u)):!y.opera&&/gecko\//i.test(h)&&
(y.name=y.name||"Gecko",y.gecko=!0,y.version=y.version||a(/gecko\/(\d+(\.\d+)?)/i));y.msedge||!q&&!y.silk?n?(y[n]=!0,y.ios=!0):aa?y.mac=!0:H?y.xbox=!0:N?y.windows=!0:m&&(y.linux=!0):y.android=!0;N="";y.windowsphone?N=a(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):n?(N=a(/os (\d+([_\s]\d+)*) like mac os x/i),N=N.replace(/[_\s]/g,".")):q?N=a(/android[ \/-](\d+(\.\d+)*)/i):y.webos?N=a(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):y.blackberry?N=a(/rim\stablet\sos\s(\d+(\.\d+)*)/i):y.bada?N=a(/bada\/(\d+(\.\d+)*)/i):
y.tizen&&(N=a(/tizen[\/\s](\d+(\.\d+)*)/i));N&&(y.osversion=N);N=N.split(".")[0];if(B||v||"ipad"==n||q&&(3==N||4<=N&&!A)||y.silk)y.tablet=!0;else if(A||"iphone"==n||"ipod"==n||q||r||y.blackberry||y.webos||y.bada)y.mobile=!0;y.msedge||y.msie&&10<=y.version||y.yandexbrowser&&15<=y.version||y.vivaldi&&1<=y.version||y.chrome&&20<=y.version||y.firefox&&20<=y.version||y.safari&&6<=y.version||y.opera&&10<=y.version||y.ios&&y.osversion&&6<=y.osversion.split(".")[0]||y.blackberry&&10.1<=y.version||y.chromium&&
20<=y.version?y.a=!0:y.msie&&10>y.version||y.chrome&&20>y.version||y.firefox&&20>y.version||y.safari&&6>y.version||y.opera&&10>y.version||y.ios&&y.osversion&&6>y.osversion.split(".")[0]||y.chromium&&20>y.version?y.c=!0:y.x=!0;return y}function l(h,a){var e=[],n;if(Array.prototype.map)return Array.prototype.map.call(h,a);for(n=0;n<h.length;n++)e=a(h[n]);return e}function p(h){var a=Math.max(h[0].split(".").length,h[1].split(".").length);for(h=l(h,function(e){var n=a-e.split(".").length;e+=Array(n+
1).join(".0");return l(e.split("."),function(q){return Array(20-q.length).join("0")+q}).reverse()});0<=--a;){if(h[0][a]>h[1][a])return 1;if(h[0][a]===h[1][a]){if(0===a)return 0}else return-1}}function b(h,a,e){var n=d;"string"===typeof a&&(e=a,a=void 0);void 0===a&&(a=!1);e&&(n=f(e));e=""+n.version;for(var q in h)if(h.hasOwnProperty(q)&&n[q])return 0>p([e,h[q]]);return a}var d=f("undefined"!==typeof navigator?navigator.userAgent:"");d.test=function(h){for(var a=0;a<h.length;++a){var e=h[a];if("string"===
typeof e&&e in d)return!0}return!1};d.isUnsupportedBrowser=b;d.compareVersions=p;d.check=function(h,a,e){return!b(h,a,e)};d._detect=f;return d});var qo=IS,Ak=lively.FreezerRuntime.recorderFor("lively.morphic/config.js");Ak.parseURLQuery=function(){if("undefined"===typeof document||!document.location)return{};var f=(document.location.hash||document.location.search).slice(1);f=f&&f.split("&");var l={};if(f)for(var p=0;p<f.length;p++){var b=f[p].split("="),d=b[0],h=!0;if(1<b.length&&(h=decodeURIComponent(b.slice(1).join("=")),
h.match(/^(true|false|null|[0-9"[{].*)$/)))try{h=JSON.parse(h)}catch(a){"["===h[0]&&(h=h.slice(1,-1).split(","))}l[d]=h}return l};Ak.Rectangle=ie;Ak.Color=If;Ak.bowser=qo;Ak.joinPath=sg;Ak.isMac=!!Ak.bowser.mac;Ak.baseURL=window.SERVER_URL||System.baseURL||document.location.origin;"undefined"!==typeof $world&&$world.withAllSubmorphsDo(function(f){return f.hasOwnProperty("_cachedKeyhandlers")&&(f._cachedKeyhandlers=null)});Ak.config={onloadURLQuery:Ak.parseURLQuery(),defaultShadow:{fast:!0,distance:18,
blur:30,color:Ak.Color.black.withA(.2),spread:0},undoLevels:20,halosEnabled:!0,altClickDefinesThat:!0,verboseLogging:!0,maxStatusMessages:5,repeatClickInterval:250,longClick:{minDur:500,maxDur:1E3,maxDist:2},showTooltipsAfter:.8,users:{authServerURL:window.AUTH_SERVER_URL||"https://auth.lively-next.org",autoLoginAsGuest:!1},ide:{workerEnabled:!1,js:{ignoredPackages:["lively.web","no group",function(f){return f.includes("lively.morphic/objectdb")||f.includes("lively.next-node_modules")||f.includes("node_modules")||
f.includes("custom-npm-modules")||f.includes("mocha-es6")||f.includes("test-resources/es6")}]},modes:{aliases:{text:"text",sh:"shell",markdown:"md",javascript:"js",htmlmixed:"html",haskell:"hs",python:"py",less:"css/less"}}},globalKeyBindings:[{keys:{mac:"Meta-Z",win:"Ctrl-Z"},command:"undo"},{keys:{mac:"Meta-Shift-Z",win:"Ctrl-Shift-Z"},command:"redo"},{keys:"Alt-X",command:"run command"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"save world"},{keys:"Meta-Shift-L s a v e",command:"save this world"},
{keys:"Meta-H",command:"show halo for focused morph"},{keys:"Meta-Shift-L C O P Y",command:"copy morph"},{keys:"Alt-M",command:"select morph"},{keys:"Escape",command:"escape"},{keys:{win:"Ctrl-Escape",mac:"Meta-Escape"},command:"close active window or morph"},{keys:"Alt-Shift-C",command:"toggle minimize active window"},{keys:{mac:"Meta-Shift-L W S",win:"Ctrl-Shift-L W S"},command:"search workspaces"},{keys:{mac:"Meta-O",win:"Ctrl-O"},command:"open status message of focused morph"},{keys:{win:"Ctrl-K",
mac:"Meta-K"},command:{command:"open javascript workspace",onlyWhenFocused:!1}},{keys:"Alt-Shift-1",command:{command:"open shell terminal",onlyWhenFocused:!1}},{keys:{win:"Ctrl-B",mac:"Meta-B"},command:{command:"open browser",onlyWhenFocused:!1}},{keys:{win:"Ctrl-P",mac:"Meta-P"},command:{command:"open PartsBin",onlyWhenFocused:!0}},{keys:"Alt-T",command:{command:"choose and browse module",onlyWhenFocused:!1}},{keys:"Alt-Shift-T",command:{command:"choose and browse package resources",onlyWhenFocused:!1}},
{keys:{mac:"Ctrl-X D"},command:"open file browser"},{keys:{mac:"Ctrl-X Ctrl-F"},command:"open file"},{keys:{win:"Ctrl-Shift-F",mac:"Meta-Shift-F"},command:{command:"open code search",onlyWhenFocused:!1}},{keys:"Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:1}}},{keys:"Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:1}}},{keys:"Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",
offset:1}}},{keys:"Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:1}}},{keys:"Meta-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:10}}},{keys:"Meta-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:10}}},{keys:"Meta-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:10}}},{keys:"Meta-Down",command:{command:"move or resize halo target",
args:{what:"move",direction:"down",offset:10}}},{keys:"Alt-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:100}}},{keys:"Alt-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:100}}},{keys:"Alt-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:100}}},{keys:"Alt-Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:100}}},{keys:"Shift-Left",
command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:1}}},{keys:"Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:1}}},{keys:"Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:1}}},{keys:"Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:1}}},{keys:"Meta-Shift-Left",command:{command:"move or resize halo target",
args:{what:"resize",direction:"left",offset:10}}},{keys:"Meta-Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:10}}},{keys:"Meta-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:10}}},{keys:"Meta-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:10}}},{keys:"Alt-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",
offset:100}}},{keys:"Alt-Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:100}}},{keys:"Alt-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:100}}},{keys:"Alt-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:100}}},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},command:"close halo target"},{keys:{win:"Ctrl-`|Alt-`",mac:"Meta-1"},command:"window switcher"},
{keys:{mac:"Meta-Shift-L R E S 1",win:"Ctrl-Shift-L R E S 1"},command:{command:"resize active window",args:{how:"col1"}}},{keys:{mac:"Meta-Shift-L R E S 2",win:"Ctrl-Shift-L R E S 2"},command:{command:"resize active window",args:{how:"col2"}}},{keys:{mac:"Meta-Shift-L R E S 3",win:"Ctrl-Shift-L R E S 3"},command:{command:"resize active window",args:{how:"col3"}}},{keys:{mac:"Meta-Shift-L R E S C",win:"Ctrl-Shift-L R E S C"},command:{command:"resize active window",args:{how:"center"}}},{keys:{mac:"Meta-Shift-L R E S L",
win:"Ctrl-Shift-L R E S L"},command:{command:"resize active window",args:{how:"left"}}},{keys:{mac:"Meta-Shift-L R E S R",win:"Ctrl-Shift-L R E S R"},command:{command:"resize active window",args:{how:"right"}}},{keys:{mac:"Meta-Shift-L R E S F",win:"Ctrl-Shift-L R E S F"},command:{command:"resize active window",args:{how:"full"}}},{keys:{mac:"Meta-Shift-L R E S T",win:"Ctrl-Shift-L R E S T"},command:{command:"resize active window",args:{how:"top"}}},{keys:{mac:"Meta-Shift-L R E S B",win:"Ctrl-Shift-L R E S B"},
command:{command:"resize active window",args:{how:"bottom"}}},{keys:{mac:"Meta-Shift-L R E S Escape",win:"Ctrl-Shift-L R E S Escape"},command:{command:"resize active window",args:{how:"reset"}}}],text:{basicFontItems:"Sans-serif;serif;Monospace;Arial Black;Arial Narrow;Comic Sans MS;Garamond;Tahoma;Trebuchet MS;Verdana;custom...".split(";"),cursorBlinkPeriod:.5,useSoftTabs:!0,tabWidth:2,markStackSize:16,undoLevels:50,clipboardBufferLength:100,useMultiSelect:!0,undoGroupDelay:600,defaultKeyBindings:[{keys:{win:"Ctrl-C",
mac:"Meta-C"},command:{command:"clipboard copy",passEvent:!0}},{keys:"Ctrl-W",command:{command:"manual clipboard copy",args:{delete:!0}}},{keys:"Alt-W",command:"manual clipboard copy"},{keys:"Ctrl-Y",command:"manual clipboard paste"},{keys:"Alt-Y",command:{command:"manual clipboard paste",args:{killRingCycleBack:!0}}},{keys:{win:"Ctrl-X",mac:"Meta-X"},command:{command:"clipboard cut",passEvent:!0}},{keys:{win:"Ctrl-V",mac:"Meta-V"},command:{command:"clipboard paste",passEvent:!0}},{keys:{win:"Ctrl-Z|Ctrl-Shift--",
mac:"Meta-Z|Ctrl-Shift--|Ctrl-x u"},command:"text undo"},{keys:{win:"Ctrl-Shift-Z",mac:"Meta-Shift-Z"},command:"text redo"},{keys:{win:"Ctrl-A|Ctrl-X H",mac:"Meta-A|Ctrl-X H"},command:"select all"},{keys:{win:"Alt-Enter",mac:"Meta-D|Alt-Enter"},command:"doit"},{keys:{mac:"Meta-Shift-L X B"},command:"eval all"},{keys:{win:"Alt-Ctrl-Enter",mac:"Meta-P"},command:"printit"},{keys:{win:"Alt-Ctrl-Shift-Enter",mac:"Meta-I"},command:"print inspectit"},{keys:{win:"Ctrl-Shift-I",mac:"Meta-Shift-I"},command:"inspectit"},
{keys:{win:"Ctrl-Shift-E",mac:"Meta-Shift-E"},command:"editit"},{keys:{win:"Ctrl-Shift-U",mac:"Meta-Shift-U"},command:"undefine variable"},{keys:"Backspace",command:"delete backwards"},{keys:"Shift-Backspace",command:"delete backwards"},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},command:"delete"},{keys:{win:"Left|Ctrl-B",mac:"Left|Ctrl-B"},command:"go left"},{keys:{win:"Right|Ctrl-F",mac:"Right|Ctrl-F"},command:"go right"},{keys:{win:"Up|Ctrl-P",mac:"Up|Ctrl-P"},command:"go up"},{keys:{win:"Down|Ctrl-N",
mac:"Down|Ctrl-N"},command:"go down"},{keys:"Shift-Left",command:"select left"},{keys:"Shift-Right",command:"select right"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-Right",mac:"Alt-Right|Alt-F"},command:"goto word right"},{keys:{win:"Ctrl-Left",mac:"Alt-Left|Alt-B"},command:"goto word left"},{keys:{win:"Ctrl-Shift-Right",mac:"Alt-Shift-Right|Alt-Shift-F"},command:{command:"goto word right",args:{select:!0}}},{keys:{win:"Ctrl-Shift-Left",mac:"Alt-Shift-Left|Alt-Shift-B"},
command:{command:"goto word left",args:{select:!0}}},{keys:{win:"Ctrl-Backspace",mac:"Alt-Backspace"},command:"delete word left"},{keys:"Alt-D",command:"delete word right"},{keys:{win:"Alt-Ctrl-K",mac:"Alt-Ctrl-K"},command:"delete word right"},{keys:"Alt-Shift-2",command:"select word right"},{keys:"Ctrl-X Ctrl-X",command:"reverse selection"},{keys:{win:"Ctrl-Shift-L",mac:"Meta-L"},command:"select line"},{keys:{win:"Shift-Home",mac:"Shift-Home|Ctrl-Shift-A"},command:{command:"goto line start",args:{select:!0}}},
{keys:{win:"Home",mac:"Home|Ctrl-A"},command:{command:"goto line start",args:{select:!1}}},{keys:{win:"Shift-End",mac:"Shift-End|Ctrl-Shift-E"},command:{command:"goto line end",args:{select:!0}}},{keys:{win:"End",mac:"End|Ctrl-E"},command:{command:"goto line end",args:{select:!1}}},{keys:"Ctrl-C J",command:{command:"join line",args:{withLine:"before"}}},{keys:"Ctrl-C Shift-J",command:{command:"join line",args:{withLine:"after"}}},{keys:{win:"Ctrl-Shift-D",mac:"Meta-Shift-D|Ctrl-C P"},command:"duplicate line or selection"},
{keys:{win:"Ctrl-Shift-Backspace",mac:"Meta-Backspace"},command:"delete left until beginning of line"},{keys:"Ctrl-K",command:"delete emtpy line or until end of line"},{keys:{win:"Ctrl-Alt-Up|Ctrl-Alt-P",mac:"Ctrl-Meta-Up|Ctrl-Meta-P"},command:"move lines up"},{keys:{win:"Ctrl-Alt-Down|Ctrl-Alt-N",mac:"Ctrl-Meta-Down|Ctrl-Meta-N"},command:"move lines down"},{keys:{win:"PageDown",mac:"PageDown|Ctrl-V"},command:"goto page down"},{keys:{win:"PageUp",mac:"PageUp|Alt-V"},command:"goto page up"},{keys:{win:"Shift-PageDown",
mac:"Shift-PageDown"},command:"goto page down and select"},{keys:{win:"Shift-PageUp",mac:"Shift-PageUp"},command:"goto page up and select"},{keys:"Alt-Ctrl-,",command:"move cursor to screen top in 1/3 steps"},{keys:"Alt-Ctrl-.",command:"move cursor to screen bottom in 1/3 steps"},{keys:{win:"Alt-Left",mac:"Meta-Left"},command:"goto matching left"},{keys:{win:"Alt-Shift-Left",mac:"Meta-Shift-Left"},command:{command:"goto matching left",args:{select:!0}}},{keys:{win:"Alt-Right",mac:"Meta-Right"},command:"goto matching right"},
{keys:{win:"Alt-Shift-Right",mac:"Meta-Shift-Right"},command:{command:"goto matching right",args:{select:!0}}},{keys:"Alt-Ctrl-B",command:"goto matching left"},{keys:"Alt-Ctrl-F",command:"goto matching right"},{keys:"Ctrl-Up",command:"goto paragraph above"},{keys:"Ctrl-Down",command:"goto paragraph below"},{keys:{win:"Ctrl-Shift-Home",mac:"Meta-Shift-Up"},command:{command:"goto start",args:{select:!0}}},{keys:{win:"Ctrl-Shift-End",mac:"Meta-Shift-Down"},command:{command:"goto end",args:{select:!0}}},
{keys:{win:"Ctrl-Home",mac:"Meta-Up|Meta-Home|Alt-Shift-,"},command:"goto start"},{keys:{win:"Ctrl-End",mac:"Meta-Down|Meta-End|Alt-Shift-."},command:"goto end"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{win:"Ctrl-Shift-L",mac:"Ctrl-Shift-L|Alt-G G"},command:"goto line"},{keys:"Enter",command:"newline"},{keys:"Space",command:{command:"insertstring",args:{string:" ",undoGroup:!0}}},{keys:"Tab",command:{command:"tab - snippet expand or indent"}},{keys:{win:"Ctrl-]",mac:"Meta-]"},command:"indent"},
{keys:{win:"Ctrl-[",mac:"Meta-["},command:"outdent"},{keys:{win:"Ctrl-Enter",mac:"Meta-Enter"},command:{command:"insert line",args:{where:"below"}}},{keys:"Shift-Enter",command:{command:"insert line",args:{where:"above"}}},{keys:"Ctrl-O",command:"split line"},{keys:{mac:"Ctrl-X Ctrl-T"},command:"transpose chars"},{keys:{mac:"Ctrl-C Ctrl-U"},command:"uppercase"},{keys:{mac:"Ctrl-C Ctrl-L"},command:"lowercase"},{keys:{mac:"Meta-Shift-L W t"},command:"remove trailing whitespace"},{keys:{mac:"Ctrl-Space"},
command:"toggle active mark"},{keys:{mac:"Meta-Shift-L M O D E"},command:"change editor mode"},{keys:{mac:"Meta-Shift-L L T"},command:"toggle line wrapping"},{keys:"Esc|Ctrl-G",command:"cancel input"},{keys:{win:"Ctrl-/",mac:"Meta-/"},command:"toggle comment"},{keys:{win:"Alt-Ctrl-/",mac:"Alt-Meta-/|Alt-Meta-\u00f7"},command:"toggle block comment"},{keys:"Meta-Shift-L /  D",command:"comment box"},{keys:{win:"Ctrl-.",mac:"Meta-."},command:"[IyGotoChar] activate"},{keys:{win:"Ctrl-,",mac:"Meta-,"},
command:{command:"[IyGotoChar] activate",args:{backwards:!0}}},{keys:{win:"Ctrl-Space|Ctrl-Shift-P",mac:"Alt-Shift-Space|Alt-Space|Meta-Shift-P"},command:"text completion"},{keys:"\u00f7|Alt-/",command:"text completion first match"},{keys:"Alt-Q",command:"fit text to column"},{keys:{win:"Ctrl-F|Ctrl-G|F3",mac:"Meta-F|Meta-G|Ctrl-S"},command:"search in text"},{keys:{win:"Ctrl-Shift-F|Ctrl-Shift-G",mac:"Meta-Shift-F|Meta-Shift-G|Ctrl-R"},command:{command:"search in text",args:{backwards:!0}}},{keys:"Ctrl-Shift-/|Ctrl-C Ctrl-Shift-,",
command:"[multi select] all like this"},{keys:"Alt-Ctrl-P",command:"[multi select] add cursor above"},{keys:"Alt-Ctrl-N",command:"[multi select] add cursor below"},{keys:"Ctrl-Shift-,",command:"[multi select] more like this backward"},{keys:"Ctrl-Shift-.",command:"[multi select] more like this forward"},{keys:{mac:"Meta-Shift-,"},command:"[multi select] goto previous focused cursor"},{keys:{mac:"Meta-Shift-."},command:"[multi select] goto next focused cursor"},{keys:"Ctrl-Shift-;",command:"[multi select] remove focused cursor"},
{keys:"Alt-Ctrl-A",command:"[multi select] align cursors"},{keys:"Ctrl-X R",command:"[multi select] create rectangular selection"},{keys:{win:"Shift-Ctrl-S|Ctrl-Alt-Space",mac:"Ctrl-Command-space|Ctrl-Alt-Space"},command:"contractRegion"},{keys:{win:"Shift-Ctrl-E|Ctrl-Shift-Space",mac:"Shift-Command-Space|Ctrl-Shift-Space"},command:"expandRegion"},{keys:"Ctrl-Alt-h",command:"markDefun"},{keys:"Ctrl-Alt-d|Ctrl-Alt-Down",command:"forwardDownSexp"},{keys:"Ctrl-Alt-u|Ctrl-Alt-Up",command:"backwardUpSexp"},
{keys:"Ctrl-Alt-b|Ctrl-Alt-Left",command:"backwardSexp"},{keys:"Ctrl-Alt-f|Ctrl-Alt-Right",command:"forwardSexp"},{keys:"Alt-.",command:"selectDefinition"},{keys:"Ctrl-Shift-'",command:"selectSymbolReferenceOrDeclaration"},{keys:"Ctrl-Shift-[",command:"selectSymbolReferenceOrDeclarationPrev"},{keys:"Ctrl-Shift-]",command:"selectSymbolReferenceOrDeclarationNext"},{keys:{win:"Ctrl-=",mac:"Meta-="},command:"increase font size"},{keys:{win:"Ctrl--",mac:"Meta--"},command:"decrease font size"},{keys:"Alt-K",
command:"set link of selection"},{keys:"Alt-O",command:"set doit of selection"},{keys:{win:"Ctrl-\\",mac:"Meta-\\"},command:"reset text style"},{keys:{win:"Ctrl-Shift-L T U I",mac:"Meta-Shift-L T U I"},command:"open text attribute controls"},{keys:{win:"Ctrl-Shift-L T D",mac:"Meta-Shift-L T D"},command:"[todo] toggle todo marker"},{keys:{win:"Ctrl-Shift-L D A T E",mac:"Meta-Shift-L D A T E"},command:"insert date"},{keys:"Ctrl-C Ctrl-I",command:"change string inflection"},{keys:"Alt-Shift-4",command:"spell check word"},
{keys:"Alt-Shift-\\",command:"[shell] run shell command on region"},{keys:"Alt-Shift-;",command:"run code on text morph"},{keys:{win:"Ctrl-Shift-L O P E N",mac:"Meta-Shift-L O P E N"},command:"open file at cursor"},{keys:"Meta-F1",command:"report token at cursor"}]},codeEditor:{defaultTheme:"default",collapseSelection:!1,search:{maxCharsPerLine:1E4,fastHighlightLineCount:4E3,showTextMap:!0},defaultStyle:{fontFamily:"IBM Plex Mono",padding:Ak.Rectangle.inset(4,2,4,2),fontSize:12,clipMode:"auto"},modes:{text:{style:{}}}},
systemBrowser:{fixUndeclaredVarsOnSave:!0},objectEditor:{fixUndeclaredVarsOnSave:!0},remotes:{server:System.get("@system-env").browser?document.location.origin+"/eval":null},css:{ibmPlex:Ak.joinPath(Ak.baseURL,"lively.morphic/assets/ibm-plex/css/ibm-plex.css"),fontAwesome:Ak.joinPath(Ak.baseURL,"/lively.morphic/assets/fontawesome-free-5.12.1/css/all.css"),inconsolata:Ak.joinPath(Ak.baseURL,"/lively.morphic/assets/inconsolata/inconsolata.css")},defaultImage:"data:image/svg+xml;base64,PCEtLT94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8tLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHY9IiIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSI+CiAgPHRpdGxlPkxpdmVseSBXZWIgTG9nbzwvdGl0bGU+CiAgPGRlc2NyaXB0aW9uPmh0dHBzOi8vbGl2ZWx5LW5leHQub3JnPC9kZXNjcmlwdGlvbj4KICA8ZGVmcz48L2RlZnM+CiAgPGcgaWQ9ImxvZ28iIHRyYW5zZm9ybT0ic2NhbGUoMikiPgogICAgPHBhdGggZD0iTTU3LjExMzEwNzksMTQuNzA3IEM1Ni4zMDUxMDc5LDE3LjAxNyA1NS42MDcxMDc5LDE5LjM2MiA1NC43OTkxMDc5LDIxLjY3MSBDNTQuMzYxMTA3OSwyMi45MjYgNTMuODk0MTA3OSwyMy41MTggNTMuMjAxMTA3OSwyMy41MTggQzUyLjc0MzEwNzksMjMuNTE4IDUyLjE4NTEwNzksMjMuMjYgNTEuNDc0MTA3OSwyMi43NjcgQzQ5LjQwMTEwNzksMjEuMzIgNDcuNDAzMTA3OSwxOS43NjUgNDUuMzE4MTA3OSwxOC4zMjggQzQ0LjIyNzEwNzksMTcuNTczIDQzLjE4NTEwNzksMTcuMTk2IDQyLjIwMTEwNzksMTcuMTk2IEM0MC44NDcxMDc5LDE3LjE5NiAzOS41OTgxMDc5LDE3LjkwNCAzOC40NTUxMDc5LDE5LjMyNCBDMzcuMzE2MTA3OSwyMC43MzcgMzYuMjY5MTA3OSwyMi4yMzEgMzUuMjMyMTA3OSwyMy43MjUgQzMzLjI3NjEwNzksMjYuNTI1IDMzLjY0NDEwNzksMjguODUgMzYuMzcxMTA3OSwzMC45MDMgQzM4LjMzMTEwNzksMzIuMzc3IDQwLjM1MTEwNzksMzMuNzY4IDQyLjMwOTEwNzksMzUuMjQ0IEM0NC4xNTExMDc5LDM2LjYyOSA0NC4xMjgxMDc5LDM3LjQ2NyA0Mi4yMzcxMDc5LDM4Ljg3IEM0MC4yMDYxMDc5LDQwLjM4MiAzOC4xMDUxMDc5LDQxLjggMzYuMTEyMTA3OSw0My4zNTMgQzMzLjczNDEwNzksNDUuMjAzIDMzLjM1OTEwNzksNDcuNTMzIDM1LjAxNjEwNzksNTAuMDE0IEMzNi4xMTIxMDc5LDUxLjY1NyAzNy4yNjQxMDc5LDUzLjI3MSAzOC41MTkxMDc5LDU0Ljc5NyBDMzkuNjY1MTA3OSw1Ni4xOTggNDAuODcyMTA3OSw1Ni44ODcgNDIuMTgyMTA3OSw1Ni44ODcgQzQzLjE4MDEwNzksNTYuODg3IDQ0LjIzNjEwNzksNTYuNDg4IDQ1LjM4MDEwNzksNTUuNjk1IEM0Ny4zMzAxMDc5LDU0LjM0NCA0OS4yMTcxMDc5LDUyLjkwMSA1MS4xNDIxMDc5LDUxLjUxOSBDNTIuMDg3MTA3OSw1MC44MzggNTIuNzQ0MTA3OSw1MC40NzcgNTMuMjUzMTA3OSw1MC40NzcgQzUzLjk0NzEwNzksNTAuNDc3IDU0LjM2NDEwNzksNTEuMTYgNTQuODcwMTA3OSw1Mi42MzggQzU1LjY3OTEwNzksNTUuMDI4IDU2LjM4NTEwNzksNTcuNDU4IDU3LjI1NTEwNzksNTkuODI1IEM1OC4wNTExMDc5LDYxLjk5NSA1OS41MDUxMDc5LDYzLjA5NCA2MS40NDAxMDc5LDYzLjA5NCBDNjIuMDE4MTA3OSw2My4wOTQgNjIuNjM5MTA3OSw2Mi45OTYgNjMuMzAxMTA3OSw2Mi44IEM2NC45NjQxMDc5LDYyLjMwNyA2Ni42MjAxMDc5LDYxLjc4IDY4LjI2MTEwNzksNjEuMjE2IEM3MS43MjExMDc5LDYwLjAzMSA3Mi44MDQxMDc5LDU3Ljk0NCA3MS43MzYxMDc5LDU0LjQwNyBDNzEuMDI4MTA3OSw1Mi4wNjYgNzAuMjMxMTA3OSw0OS43NTEgNjkuNDQ1MTA3OSw0Ny40MzcgQzY4LjgwNDEwNzksNDUuNTUgNjkuNTU2MTA3OSw0NC43MzcgNzEuNDM4MTA3OSw0NC43MzQgQzcxLjU5NzEwNzksNDQuNzM0IDcxLjc2MDEwNzksNDQuNzMyIDcxLjkyMjEwNzksNDQuNzMyIEM3My4xOTcxMDc5LDQ0LjczMiA3NC40NzMxMDc5LDQ0Ljc0MyA3NS43NTExMDc5LDQ0Ljc0MyBDNzYuOTI0MTA3OSw0NC43NDMgNzguMDk2MTA3OSw0NC43MzQgNzkuMjcwMTA3OSw0NC42OTggQzgyLjM5NDEwNzksNDQuNiA4NC4wNDMxMDc5LDQyLjkwOSA4NC4xNDQxMDc5LDM5Ljc4MSBDODQuMTk1MTA3OSwzOC4xMTkgODQuMTY2MTA3OSwzNi40NTcgODQuMTUzMTA3OSwzNC43OTUgQzg0LjEyMTEwNzksMzEuMTY0IDgyLjQ2NDEwNzksMjkuMzkxIDc4Ljg0NzEwNzksMjkuMjUgQzc4LjAxODEwNzksMjkuMjE5IDc3LjE4ODEwNzksMjkuMjEgNzYuMzU5MTA3OSwyOS4yMSBDNzUuMTMwMTA3OSwyOS4yMSA3My44OTkxMDc5LDI5LjIzIDcyLjY2OTEwNzksMjkuMjMgTDcyLjIwMTEwNzksMjkuMjMgQzY5LjAwODEwNzksMjkuMjE0IDY4Ljc2MzEwNzksMjguODM4IDY5Ljc1NDEwNzksMjUuNzQyIEM3MC42NDMxMDc5LDIyLjk2OSA3MS40OTIxMDc5LDIwLjE4MiA3Mi4xNjExMDc5LDE4LjAzMiBDNzIuMDk2MTA3OSwxNS4zNTQgNzEuMDI4MTA3OSwxMy44NDQgNjguOTQ2MTA3OSwxMy4wNzUgQzY3LjE3MjEwNzksMTIuNDIyIDY1LjM1NzEwNzksMTEuODY1IDYzLjUzODEwNzksMTEuMzM0IEM2Mi43NzcxMDc5LDExLjExMSA2Mi4wODIxMDc5LDExIDYxLjQ1MTEwNzksMTEgQzU5LjM4MjEwNzksMTEgNTcuOTg3MTA3OSwxMi4yMDcgNTcuMTEzMTA3OSwxNC43MDcgWiBNNjIuMTA3MjE5OCwxNS4zMjQ0ODc0IEM2My42NjI2MzIsMTUuNzc5NTA4MSA2NS40OTQ1ODQxLDE2LjMzMTUzMzIgNjcuMjQyNjc1OCwxNi45NzY1NjI1IEM2Ny40OTcyNTIyLDE3LjA3MDU2NjggNjcuNjEyMDYxMiwxNy4xNTM1NzA1IDY3LjYzMTAyOTcsMTcuMTczNTcxNSBDNjcuNjMxMDI5NywxNy4xNzU1NzE1IDY3LjcxMjg5MzUsMTcuMjk3NTc3MSA2Ny43NjU4MDU0LDE3LjY2MDU5MzYgTDY3LjM0MjUwOTcsMTkuMDI4NjU1OCBDNjYuODEyMzkxNywyMC43NDc3MzM5IDY2LjQxNDcyNTYsMjIuNTMyMzQyNCA2NS43OTg3NTA0LDI0LjQ1NzQyOTkgQzY1LjI0ODY2NTYsMjYuMTY4NTA3NyA2NC40MjQwMzc1LDI4Ljc1MzYyNTIgNjYuMDM5MzUwMSwzMC45ODM3MjY1IEM2Ny42NTE2Njc2LDMzLjIxMDgyNzggNzAuMzEwMjQ0NSwzMy4yMjI4MjgzIDcyLjA2OTMxNzksMzMuMjI4ODI4NiBMNzIuNTU2NTA3MywzMy4yMzE4Mjg3IEM3My4xODE0Njc1LDMzLjIzMTgyODcgNzMuODA2NDI3OCwzMy4yMjQ4Mjg0IDc0LjQzMjM4NjQsMzMuMjIwODI4MiBDNzUuMDM0Mzg0OCwzMy4yMTY4MjggNzQuNzE5NjA1NywzMy4xNzc3MzI1IDc1LjMyMTYwNDEsMzMuMTc3NzMyNSBDNzYuMjI5MDk0MywzMy4xNzc3MzI1IDc0LjgzMjY2NTksMzMuMTcwOTkyNCA3NS41MTE1MzY0LDMzLjE5Njk5MzUgQzc2LjM2NjExNDYsMzMuMjI4OTk1IDc2LjY5MDU3NDgsMzMuMzkxMDAyNCA3Ni43MTU1MzMzLDMzLjM5MTAwMjQgQzc2Ljc0MDQ5MTgsMzMuNDM0MDA0MyA3Ni45MTMyMDQ0LDMzLjc3ODAyIDc2LjkyMDE5MjgsMzQuNzMyMDYzMyBMNzYuOTI5MTc3OCwzNS41NTAxMDA1IEM3Ni45NDMxNTQ2LDM2LjkzOTE2MzYgNzYuOTU3MTMxMywzOC4yNDkyMjMyIDc2LjkxNDIwMjgsMzkuNTUxMjgyNCBDNzYuOTAwMjI2LDQwLjA0MDMwNDYgNzYuODIwMzU4OSw0MC4zMTczMTcyIDc2Ljc3MzQzNyw0MC40MjQzMjIxIEM3Ni42NzI2MDQ3LDQwLjQ2NTMyMzkgNzYuNDE1MDMzMiw0MC41MzgzMjcyIDc1Ljk2Mzc4NCw0MC41NTMzMjc5IEM3NC45ODQ0MTM0LDQwLjU4MzMyOTMgNzYuMDc5MzQzNCw0MC42MTYwNzA2IDc0LjcxNDYxNCw0MC42MTYwNzA2IEM3NC4wODE2NjcsNDAuNjE2MDcwNiA3NC4zNzA0ODkzLDQwLjY0NjE2NTcgNzMuNzM5NTM5MSw0MC42NDQxNjU2IEM3My4wOTc2MDcxLDQwLjY0MDE2NTUgNzIuNDUwNjgzNCw0MC42MzYxNjUzIDcxLjgxMDc0ODEsNDAuNjM2MTY1MyBMNzEuMzE2NTcwMiw0MC42MzkxNjU0IEM2OC4zNzk0NTY4LDQwLjY0NDE2NTYgNjYuODQyMDE0Nyw0MS45MzUyMjQzIDY2LjA2ODMwMTksNDMuMDE3MjczNSBDNjUuMzAxNTc3Niw0NC4wOTUzMjI1IDY0LjU4MDc3NjgsNDUuOTU0NDA3IDY1LjUxMDIzMDQsNDguNjkzNTMxNSBMNjUuNzUwODMwMSw0OS4zOTE1NjMzIEM2Ni40MzE2OTczLDUxLjQwNjY1NDggNjUuNTE2MTIzNiw0OC4zMDA1NDIzIDY2LjEyNzEwNzEsNTAuMzM4NjM0OSBDNjYuMzUxNzMzMyw1MS4wODA2Njg2IDY2LjM1NzcyMzQsNTEuNDYxNjg1OSA2Ni4zNDY3NDE3LDUxLjYwMTY5MjMgQzY2LjI0MDkxNzcsNTEuNjkwNjk2NCA2NS45MzU0MjYsNTEuOTAzNzA2IDY1LjIxOTYxNjksNTIuMTQ4NzE3MiBDNjMuNjM3MjQ5NSw1Mi42OTE3NDE5IDYyLjAyNzkyNyw1My4yMDU3NjUyIDYwLjQyNzU4OTUsNTMuNjgwNzg2OCBDNjAuMDU4MjA0MSw1My43ODk3OTE4IDU5LjgyNjU4OTQsNTMuODA2NzkyNSA1OS43MjA3NjU1LDUzLjgwNjc5MjUgQzU5LjU4Nzk4NjQsNTMuNzI5Nzg5IDU5LjQ2MzE5NCw1My41Mzc3ODAzIDU5LjMzNDQwODMsNTMuMTg3NzY0NCBDNTguODM2MjM3MSw1MS44Mjc3MDI2IDU5LjEzNjE0ODcsNTIuOTQzNjQxMSA1OC42Njg5MjYsNTEuNDgyNTc0NiBDNTguMzYwNDM5Myw1MC41MTc1MzA4IDU4LjkzNzE2NjIsNTIuMjQ3NjkzMSA1OC42MTA3MDkzLDUxLjI4NzY0OTQgQzU4LjE5OTM5MzcsNTAuMDc0NTk0MyA1Ni45NDc0NzY1LDQ2LjM4MjQyNjUgNTMuMTcyNzU2Niw0Ni4zODI0MjY1IEM1MS4zNjQ3NjQ2LDQ2LjM4MjQyNjUgNDkuOTIwMTY4MSw0Ny4zMTI0Njg3IDQ4LjcwNzE4NjEsNDguMTgzNTA4MyBDNDcuOTM5NDYzNCw0OC43Mzc1MzM1IDQ5LjM0OTQxNCw0Ny43MjEwNDU4IDQ4LjU4NjY4Myw0OC4yODMwNzE0IEM0Ny40MTc2MjgsNDkuMTQ2MTEwNiA0OC44NTIwMzYxLDQ4LjA1MjEyNzcgNDcuNzE3OTIzLDQ4Ljg0MDE2MzUgQzQ3LjI3OTY1MjIsNDkuMTQ0MTc3MyA0Ny4wMTAxMDA2LDQ5LjI1MzE4MjMgNDYuODk1MjkxNiw0OS4yOTIxODQxIEM0Ni43OTY0NTYxLDQ5LjIyNDE4MSA0Ni41ODg4MDE1LDQ5LjA1NzE3MzQgNDYuMjk4Mjg0OSw0OC43MDIxNTcyIEM0NS4yNjc5OTksNDcuNDQyMSA0NC4yMDE3NzI5LDQ1Ljk4NDAzMzcgNDMuMDM2NzExMyw0NC4yMzU5NTQyIEM0Mi43OTQxMTQ5LDQzLjg3MTkzNzcgNDIuNzI3MjI2Miw0My42NTE5Mjc3IDQyLjcwOTI1NjEsNDMuNTY4OTIzOSBDNDIuNzUyMTg0Niw0My40OTQ5MjA1IDQyLjg4OTk1NTQsNDMuMzAxOTExOCA0My4yNDkzNTc1LDQzLjAxNzg5ODkgQzQ0LjM3MzQ4NzIsNDIuMTQyODU5MSA0Mi45ODk5OTQ0LDQzLjIyMjg0MTQgNDQuMjE1OTU0Nyw0Mi4zNDU4MDE1IEM0NS4wNjY1Mzk2LDQxLjczNDc3MzcgNDMuNzQ3NDM3OCw0Mi42OTkyNTkxIDQ0LjU4NzA0MDksNDIuMDczMjMwNiBDNDUuNDIyNjUwNyw0MS40NTEyMDIzIDQ3LjY0Mjk1NjcsMzkuNzk5MTI3MiA0Ny42NDg5NDY4LDM2Ljk5Njk5OTkgQzQ3LjY1OTkyODUsMzQuMjA4ODczMSA0NS40OTM1MzI4LDMyLjU3Njc5ODkgNDQuNjc4ODg4MSwzMS45NjA3NzA5IEM0My42Nzk1NTA4LDMxLjIwOTczNjggNDIuNjY0MjQsMzAuNDczNzAzNCA0MS42NDQ5MzU4LDI5Ljc0MTY3MDEgQzQwLjY3NTU0ODYsMjkuMDQzNjM4MyA0Mi42MzkxNTI0LDMwLjU5NTkyOTEgNDEuNjg1NzM4NiwyOS44NzY4OTY0IEM0MS4yMDU1Mzc2LDI5LjUxMzg3OTkgNDEuMDEwODYxNCwyOS4yNjY4Njg3IDQwLjk0MTk3NjEsMjkuMTU5ODYzOCBDNDAuOTc1OTE5NiwyOS4wMzY4NTgyIDQxLjA4NTczNjksMjguNzM4ODQ0NyA0MS40MjcxNjg4LDI4LjI0MzgyMjIgQzQyLjQwNjUzOTQsMjYuODQxNzU4NSA0My40MTI4NjUyLDI1LjM5MjY5MjYgNDQuNDc5MDkxMywyNC4wNjk2MzI1IEM0NC43ODA1ODk2LDIzLjY5MjYxNTMgNDUuMDA3MjEyNiwyMy41MTc2MDc0IDQ1LjExMDA0MTUsMjMuNDU5NjA0NyBDNDUuMjI3ODQ1NSwyMy40ODY2MDYgNDUuNDk0NDAyLDIzLjU4OTYxMDYgNDUuODkyNzM5MywyMy44NjQ2MjMxIEM0Ni45MjMwMjUyLDI0LjU3NzY1NTUgNDQuOTk3MzU4MywyMy4wNjYzNjY3IDQ2LjA2MDU4OTQsMjMuODUxNDAyMyBDNDcuMDM5OTU5OSwyNC41NzM0MzUyIDQ4LjA1MjI3NTcsMjUuMzE1NDY4OSA0OS4wODc1NTMzLDI2LjAzOTUwMTggQzQ5Ljk5NjA0MTgsMjYuNjc1NTMwNyA1MS40MDM2OTk5LDI3LjUxODU2OSA1My4xMjA4NDMsMjcuNTE4NTY5IEM1NC44NjE5NDYzLDI3LjUxODU2OSA1Ny4yMTQwMzMsMjYuNzI2NTMzIDU4LjUyOTg0MzksMjIuOTU5MzYxOCBDNTguOTQ0MTU0NiwyMS43NjgzMDc3IDU5LjMzNDUwNTEsMjAuNTcwMjUzMiA1OS43MjM4NTc0LDE5LjM3MDE5ODYgQzYwLjA4NzI1MjgsMTguMjQyMTQ3NCA2MC4yNTMzMDQyLDE3LjI2NDU3NTYgNjAuNjQxNjU4MSwxNi4xNDU1MjQ3IEM2MC44NTQzMDQzLDE1LjU0MjQ5NzMgNjEuMDM3MDAwMywxNS4yNjA0ODQ1IDYxLjEyMzg1NTgsMTUuMTQ5NDc5NSBDNjEuMjkzNTczNSwxNS4xNDk0Nzk1IDYxLjU5NTA3MTksMTUuMTcxNDgwNSA2Mi4xMDcyMTk4LDE1LjMyNDQ4NzQgWiIgaWQ9ImVuZ2luZSIgZmlsbD0iI2ZmNzcwMCI+PC9wYXRoPgogIDwvZz4KPC9zdmc+Cg=="};
var Yk=Ka("g",Ak.config);Ak.default=Yk;var Ig=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/property-dom-mapping.js");Ig.styleProps=cA;Ig.canBePromotedToCompositionLayer=OE;Ig.addTransform=uM;Ig.addTransformOrigin=function(f,l){if(f=f.origin)l.transformOrigin=f.x+"px "+f.y+"px"};Ig.addDisplay=function(f,l){f=f.visible;null!=f&&(l.display=f?"":"none")};Ig.addBorderRadius=function(f,l){var p=f.borderRadiusLeft,b=f.borderRadiusRight,d=f.borderRadiusBottom;f=f.borderRadiusTop;l.borderRadius=
f+"px "+f+"px "+d+"px "+d+"px / "+p+"px "+b+"px "+b+"px "+p+"px"};Ig.addBorder=function(f,l){var p=f.borderWidthLeft,b=f.borderColorLeft,d=f.borderStyleLeft,h=f.borderWidthRight,a=f.borderColorRight,e=f.borderStyleRight,n=f.borderColor,q=f.borderWidthBottom,r=f.borderColorBottom,v=f.borderStyleBottom,y=f.borderWidthTop,D=f.borderColorTop;f=f.borderStyleTop;var E=function(I){return Ig.bowser.safari?Ig.string.camelize(I):I};l[E("border-left-style")]=""+d;l[E("border-right-style")]=""+e;l[E("border-bottom-style")]=
""+v;l[E("border-top-style")]=""+f;l[E("border-left-width")]=p+"px";l[E("border-right-width")]=h+"px";l[E("border-bottom-width")]=q+"px";l[E("border-top-width")]=y+"px";l[E("border-top-color")]=D?D.toString():"transparent";l[E("border-right-color")]=a?a.toString():"transparent";l[E("border-bottom-color")]=r?r.toString():"transparent";l[E("border-left-color")]=b?b.toString():"transparent";n&&n.isGradient&&(l["border-image"]=n.toString())};Ig.addFill=function(f,l){(f=f.fill)?f.isGradient?l.backgroundImage=
f.toString():l.background=f.toString():l.background=Ig.Color.transparent.toString()};Ig.addExtentStyle=function(f,l){f=f.extent;l.width=f.x+"px";l.height=f.y+"px"};Ig.shadowCss=function(f){return f.dropShadow?f.dropShadow.toFilterCss():""};Ig.addShadowStyle=function(f,l){f.isSvgMorph||f.isImage?l.filter=Ig.shadowCss(f):(f=f.dropShadow)&&f.fast||f&&f.inset?l.boxShadow=f?f.toCss():"none":l.filter=f?f.toFilterCss():""};Ig.addSvgAttributes=dA;Ig.getSvgVertices=fx;Ig.addPathAttributes=eA;Ig.addSvgBorderStyle=
function(f,l){var p=f.borderStyle.valueOf();"dashed"===p?(f=f.borderWidth.valueOf(),l["stroke-dasharray"]=1.61*f+" "+f):"dotted"===p&&(l["stroke-dasharray"]="1 "+2*f.borderWidth.valueOf(),l["stroke-linecap"]="round",l["stroke-linejoin"]="round");return l};Ig.Color=If;Ig.string=Ng;Ig.Path=Eg;Ig.bowser=qo;Ig.styleProps=cA;Ig.styleProps=cA;Ig.canBePromotedToCompositionLayer=OE;Ig.canBePromotedToCompositionLayer=OE;Ig.addTransform=uM;Ig.addTransform=uM;Ig.addSvgAttributes=dA;Ig.addSvgAttributes=dA;Ig.getSvgVertices=
fx;Ig.getSvgVertices=fx;Ig.addPathAttributes=eA;Ig.addPathAttributes=eA;var me=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js");me.defaultStyle=gx;me.MorphAfterRenderHook=function(f,l){this.morph=f;this.renderer=l};me.Animation=function(f){this.morph=f};me.SvgAnimation=vM;me.defaultAttributes=hx;me.svgAttributes=PE;me.pathAttributes=QE;me.renderGradient=RE;me.initDOMState=function(f,l){f.rootNode.appendChild(f.domNode);f.ensureDefaultCSS().then(function(){return me.promise.delay(500)}).then(function(){return l.env.fontMetric&&
l.env.fontMetric.reset()}).then(function(){return l.withAllSubmorphsDo(function(p){if(p.isText||p.isLabel){var b=(p.metadata||{}).serializationInfo;b&&b.recoveredTextBounds||p.forceRerender()}})}).catch(function(p){return console.error(p)})};me.renderMorph=SE;me.renderSubTree=TE;me.renderRootMorph=UE;me.vdom=gC;me.parser=Xpa;me.num=jk;me.Path=Eg;me.obj=xf;me.arr=cf;me.properties=Qm;me.promise=bg;me.Color=If;me.RadialGradient=pm;me.pt=xh;me.Point=Pf;me.LinearGradient=Xk;me.rect=cl;me.config=Yk;me.styleProps=
cA;me.addSvgAttributes=dA;me.addPathAttributes=eA;me.bowser=qo;var mJ=me.vdom;me.h=mJ.h;me.diff=mJ.diff;me.patch=mJ.patch;me.createNode=mJ.create;me.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
me.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
me.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
var ro=Ka("bo",function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js"),p=l.hasOwnProperty("ShadowObject")&&"function"===typeof l.ShadowObject?l.ShadowObject:l.ShadowObject=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){me.obj.isBoolean(b)&&(b=me.config.defaultShadow);var d=b;b=d.rotation;var h=d.distance,
a=d.blur,e=d.color,n=d.morph,q=d.inset,r=d.spread;d=d.fast;this.rotation=me.obj.isNumber(b)?b:45;this.distance=me.obj.isNumber(h)?h:2;this.blur=me.obj.isNumber(a)?a:6;this.inset=q||!1;this.spread=r||0;this.color=e||me.Color.gray.darker();this.morph=n;this.fast=d}},{key:"__dont_serialize__",get:function(){return["morph"]}},{key:"distance",get:function(){return this._distance}},{key:"blur",get:function(){return this._blur}},{key:"rotation",get:function(){return this._rotation}},{key:"color",get:function(){return this._color}},
{key:"inset",get:function(){return this._inset}},{key:"inset",set:function(b){this._inset=b;this.morph&&(this.morph.dropShadow=this)}},{key:"distance",set:function(b){this._distance=b;this.morph&&(this.morph.dropShadow=this)}},{key:"blur",set:function(b){this._blur=b;this.morph&&(this.morph.dropShadow=this)}},{key:"rotation",set:function(b){this._rotation=b;this.morph&&(this.morph.dropShadow=this)}},{key:"color",set:function(b){this._color=b;this.morph&&(this.morph.dropShadow=this)}},{key:"isShadowObject",
get:function(){return!0}},{key:"__serialize__",value:function(){var b=this.toJson(),d=b.distance,h=b.rotation,a=b.color,e=b.inset,n=b.blur,q=b.spread;b=b.fast;a=a.toJSExpr();return{__expr__:"new ShadowObject({"+Object.entries({distance:d,rotation:h,color:a,inset:e,blur:n,spread:q,fast:b}).map(function(r){var v=$jscomp.makeIterator(r);r=v.next().value;v=v.next().value;return r+":"+v})+"})",bindings:{"lively.graphics/color.js":["Color"],"lively.morphic":["ShadowObject"]}}}},{key:"with",value:function(b){return new me.ShadowObject(Object.assign({distance:this.distance,
rotation:this.rotation,color:this.color,inset:this.inset,blur:this.blur,spread:this.spread,fast:this.fast},b))}},{key:"toCss",value:function(){var b=this.color,d=this.inset,h=this.blur,a=this.spread,e=me.Point.polar(this.distance,me.num.toRadians(this.rotation)),n=e.y;return(d?"inset":"")+" "+b.toString()+" "+e.x.toFixed(2)+"px "+n.toFixed(2)+"px "+h+"px "+a+"px"}},{key:"toJson",value:function(){return me.obj.select(this,"rotation distance blur color inset spread fast".split(" "))}},{key:"equals",
value:function(b){return!!b&&me.obj.equals(this.toJson(),b.toJson())}},{key:"toFilterCss",value:function(){var b=this.blur,d=this.color,h=me.Point.polar(this.distance,me.num.toRadians(this.rotation)),a=h.x;h=h.y;b=me.bowser.chrome?b/3:b/2;return"drop-shadow("+a.toFixed(2)+"px "+h.toFixed(2)+"px "+b.toFixed(2)+"px "+d.toString()+")"}},{key:"interpolate",value:function(b,d){return new me.ShadowObject({distance:me.num.interpolate(b,this.distance,d.distance),rotation:me.num.interpolate(b,this.rotation,
d.rotation),color:this.color.interpolate(b,d.color),blur:me.num.interpolate(b,this.blur,d.blur),spread:me.num.interpolate(b,this.spread,d.spread),inset:d.inset,fast:d.fast})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowObject"}}],l,{pathInPackage:function(){return"rendering/morphic-default.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:3444,end:7103})}(void 0));me.ShadowObject=ro;me.ShadowObject=ro;me.ShadowObject=ro;me.defaultStyle=gx;me.defaultStyle=gx;me.MorphAfterRenderHook.prototype.hook=function(f,l,p,b){var d=this;b=void 0===b?0:b;var h=!!f.parentNode;h&&(this.morph._submorphOrderChanged&&this.morph.submorphs.length?(this.morph._submorphOrderChanged=!1,this.updateScrollOfSubmorphs(this.morph,this.renderer)):this.morph.isClip()&&this.updateScroll(this.morph,f),me.Path("morph.owner.layout.renderViaCSS").get(this)&&
this.morph.owner.layout.ensureBoundsMonitor(f,this.morph),me.Path("morph.layout.renderViaCSS").get(this)&&this.morph.layout.ensureBoundsMonitor(f,this.morph),setTimeout(function(){me.Path("morph.owner.layout.renderViaCSS").get(d)&&d.morph.owner.layout.ensureBoundsMonitor(f,d.morph);me.Path("morph.layout.renderViaCSS").get(d)&&d.morph.layout.ensureBoundsMonitor(f,d.morph)}));h||3<b?(this.morph._rendering=!1,this.morph.onAfterRender(f)):(b++,setTimeout(function(){return d.hook(f,l,p,b)},20*b))};me.MorphAfterRenderHook.prototype.updateScroll=
function(f,l,p){var b=this,d=f.env.eventDispatcher.eventState.scroll.interactiveScrollInProgress;if(l&&d)return d.then(function(){return b.updateScroll(f,l,!0)});if(!f.isWorld&&l){d=f.scroll;var h=d.x,a=d.y;if(!f._animationQueue.animations.find(function(n){return n.animatedProps.scroll})){var e=f.isText&&f.viewState.fastScroll?l.querySelector(".scrollLayer"):l;!f._skipScrollUpdate&&e&&(e.scrollTop!==a&&(e.scrollTop=a),e.scrollLeft!==h&&(e.scrollLeft=h),!p&&requestAnimationFrame(function(){e.scrollTop!==
a&&(e.scrollTop=a);e.scrollLeft!==h&&(e.scrollLeft=h)},f.id))}}};me.MorphAfterRenderHook.prototype.unhook=function(f,l,p){me.Path("morph.layout.renderViaCSS").get(this)&&!p&&(this.morph.layout._resizeObservers=new WeakMap)};me.MorphAfterRenderHook.prototype.updateScrollOfSubmorphs=function(f,l){var p=this;f.submorphs.forEach(function(b){b.isClip()&&p.updateScroll(b,l.getNodeForMorph(b));p.updateScrollOfSubmorphs(b,l)})};me.Animation.prototype.hook=function(f){this.morph._animationQueue.startAnimationsFor(f)};
me.SvgAnimation=vM;me.SvgAnimation=vM;me.SvgAnimation.prototype.hook=function(f){this.morph._animationQueue.startSvgAnimationsFor(f,this.type)};me.defaultAttributes=hx;me.defaultAttributes=hx;me.svgAttributes=PE;me.svgAttributes=PE;me.pathAttributes=QE;me.pathAttributes=QE;me.renderGradient=RE;me.renderGradient=RE;me.renderMorph=SE;me.renderMorph=SE;me.renderSubTree=TE;me.renderSubTree=TE;me.renderRootMorph=UE;me.renderRootMorph=UE;var yc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,JS={};!function(f,l){l(JS)}(JS,function(f){function l(ya){return 10===ya||13===ya||8232===ya||8233===ya||32===ya||9===ya||11===ya||12===ya||160===ya||5760<=ya&&0<=xi.indexOf(ya)}function p(ya){return 48<=ya&&57>=ya}function b(ya){(this||yc).index=0;(this||yc).path=ya;(this||yc).max=ya.length;(this||yc).result=[];(this||yc).param=0;(this||yc).err="";(this||yc).segmentStart=0;(this||yc).data=[]}function d(ya){for(;ya.index<ya.max&&l(ya.path.charCodeAt(ya.index));)ya.index++}function h(ya){var Qa,
La=ya.index,Xa=La,ub=ya.max,cc=!1,bb=!1,Xb=!1,Lb=!1;if(Xa>=ub)return void(ya.err="SvgPath: missed param (at pos "+Xa+")");if(Qa=ya.path.charCodeAt(Xa),43!==Qa&&45!==Qa||(Xa++,Qa=Xa<ub?ya.path.charCodeAt(Xa):0),!p(Qa)&&46!==Qa)return void(ya.err="SvgPath: param should start with 0..9 or `.` (at pos "+Xa+")");if(46!==Qa){if(cc=48===Qa,Xa++,Qa=Xa<ub?ya.path.charCodeAt(Xa):0,cc&&Xa<ub&&Qa&&p(Qa))return void(ya.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+La+")");for(;Xa<ub&&
p(ya.path.charCodeAt(Xa));)Xa++,bb=!0;Qa=Xa<ub?ya.path.charCodeAt(Xa):0}if(46===Qa){Lb=!0;for(Xa++;p(ya.path.charCodeAt(Xa));)Xa++,Xb=!0;Qa=Xa<ub?ya.path.charCodeAt(Xa):0}if(101===Qa||69===Qa){if(Lb&&!bb&&!Xb||(Xa++,Qa=Xa<ub?ya.path.charCodeAt(Xa):0,43!==Qa&&45!==Qa||Xa++,!(Xa<ub&&p(ya.path.charCodeAt(Xa)))))return void(ya.err="SvgPath: invalid float exponent (at pos "+Xa+")");for(;Xa<ub&&p(ya.path.charCodeAt(Xa));)Xa++}ya.index=Xa;ya.param=parseFloat(ya.path.slice(La,Xa))+0}function a(){if(!((this||
yc)instanceof a))return new a;(this||yc).queue=[];(this||yc).cache=null}function e(ya,Qa,La,Xa){var ub=(ya*La+Qa*Xa)/(Math.sqrt(ya*ya+Qa*Qa)*Math.sqrt(ya*ya+Qa*Qa));return 1<ub&&(ub=1),-1>ub&&(ub=-1),(0>ya*Xa-Qa*La?-1:1)*Math.acos(ub)}function n(ya,Qa,La,Xa,ub,cc,bb,Xb,Lb,Jc){var Ob=Jc*(ya-La)/2+Lb*(Qa-Xa)/2,Id=-Lb*(ya-La)/2+Jc*(Qa-Xa)/2,be=bb*bb,We=Xb*Xb,Xe=Ob*Ob,re=Id*Id,Ye=be*We-be*re-We*Xe;0>Ye&&(Ye=0);Ye=Math.sqrt(Ye/(be*re+We*Xe))*(ub===cc?-1:1);ub=Ye*bb/Xb*Id;Ye=Ye*-Xb/bb*Ob;ya=Jc*ub-Lb*Ye+
(ya+La)/2;Qa=Lb*ub+Jc*Ye+(Qa+Xa)/2;Xa=(Ob-ub)/bb;Lb=(Id-Ye)/Xb;bb=(-Ob-ub)/bb;Id=(-Id-Ye)/Xb;Xb=e(1,0,Xa,Lb);Id=e(Xa,Lb,bb,Id);return 0===cc&&0<Id&&(Id-=hC),1===cc&&0>Id&&(Id+=hC),[ya,Qa,Xb,Id]}function q(ya,Qa){var La=4/3*Math.tan(Qa/4),Xa=Math.cos(ya),ub=Math.sin(ya),cc=Math.cos(ya+Qa);ya=Math.sin(ya+Qa);return[Xa,ub,Xa-ub*La,ub+Xa*La,cc+ya*La,ya-cc*La,cc,ya]}function r(ya,Qa,La){if(!((this||yc)instanceof r))return new r(ya,Qa,La);(this||yc).rx=ya;(this||yc).ry=Qa;(this||yc).ax=La}function v(ya){if(!((this||
yc)instanceof v))return new v(ya);ya=new b(ya);var Qa=ya.max;for(d(ya);ya.index<Qa&&!ya.err.length;)a:{var La,Xa=void 0,ub=ya,cc=ub.max;ub.segmentStart=ub.index;var bb=ub.path.charCodeAt(ub.index);b:{switch(32|bb){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:bb=!0;break b}bb=!1}if(bb){if(Xa=Zh[ub.path[ub.index].toLowerCase()],ub.index++,d(ub),ub.data=[],Xa)for(bb=!1;;){for(La=Xa;0<La;La--){if(h(ub),ub.err.length)break a;ub.data.push(ub.param);d(ub);
bb=!1;ub.index<cc&&44===ub.path.charCodeAt(ub.index)&&(ub.index++,d(ub),bb=!0)}if(!bb){if(ub.index>=ub.max)break;La=ub.path.charCodeAt(ub.index);if(!(48<=La&&57>=La||43===La||45===La||46===La))break}}cc=ub;ub=cc.path[cc.segmentStart];Xa=ub.toLowerCase();bb=cc.data;if("m"===Xa&&2<bb.length&&(cc.result.push([ub,bb[0],bb[1]]),bb=bb.slice(2),Xa="l",ub="m"===ub?"l":"L"),"r"===Xa)cc.result.push([ub].concat(bb));else for(;bb.length>=Zh[Xa]&&(cc.result.push([ub].concat(bb.splice(0,Zh[Xa]))),Zh[Xa]););}else ub.err=
"SvgPath: bad command "+ub.path[ub.index]+" (at pos "+ub.index+")"}ya=(ya.err.length?ya.result=[]:ya.result.length&&(0>"mM".indexOf(ya.result[0][0])?(ya.err="SvgPath: string should start with `M` or `m`",ya.result=[]):ya.result[0][0]="M"),{err:ya.err,segments:ya.result});(this||yc).segments=ya.segments;(this||yc).err=ya.err;(this||yc).__stack=[]}function y(ya,Qa,La,Xa,ub,cc,bb,Xb){(this||yc).a={x:ya,y:Qa};(this||yc).b={x:La,y:Xa};(this||yc).c={x:ub,y:cc};(this||yc).d={x:bb,y:Xb};null!==bb&&void 0!==
bb&&null!==Xb&&void 0!==Xb?((this||yc).getArcLength=m,(this||yc).getPoint=P,(this||yc).getDerivative=E):((this||yc).getArcLength=N,(this||yc).getPoint=K,(this||yc).getDerivative=D);this.init()}function D(ya,Qa,La){return{x:2*(1-La)*(ya[1]-ya[0])+2*La*(ya[2]-ya[1]),y:2*(1-La)*(Qa[1]-Qa[0])+2*La*(Qa[2]-Qa[1])}}function E(ya,Qa,La){return K([3*(ya[1]-ya[0]),3*(ya[2]-ya[1]),3*(ya[3]-ya[2])],[3*(Qa[1]-Qa[0]),3*(Qa[2]-Qa[1]),3*(Qa[3]-Qa[2])],La)}function I(ya,Qa,La,Xa,ub){for(var cc=1,bb=ya/Qa,Xb=(ya-La(Xa,
ub,bb))/Qa;.001<cc;){var Lb=La(Xa,ub,bb+Xb),Jc=La(Xa,ub,bb-Xb);Lb=Math.abs(ya-Lb)/Qa;Jc=Math.abs(ya-Jc)/Qa;Lb<cc?(cc=Lb,bb+=Xb):Jc<cc?(cc=Jc,bb-=Xb):Xb/=2}return bb}function K(ya,Qa,La){return{x:(1-La)*(1-La)*ya[0]+2*(1-La)*La*ya[1]+La*La*ya[2],y:(1-La)*(1-La)*Qa[0]+2*(1-La)*La*Qa[1]+La*La*Qa[2]}}function P(ya,Qa,La){return{x:(1-La)*(1-La)*(1-La)*ya[0]+3*(1-La)*(1-La)*La*ya[1]+3*(1-La)*La*La*ya[2]+La*La*La*ya[3],y:(1-La)*(1-La)*(1-La)*Qa[0]+3*(1-La)*(1-La)*La*Qa[1]+3*(1-La)*La*La*Qa[2]+La*La*La*Qa[3]}}
function N(ya,Qa,La){void 0===La&&(La=1);var Xa=ya[0]-2*ya[1]+ya[2],ub=Qa[0]-2*Qa[1]+Qa[2],cc=2*ya[1]-2*ya[0],bb=2*Qa[1]-2*Qa[0],Xb=4*(Xa*Xa+ub*ub);if(0===Xb)return La*Math.sqrt(Math.pow(ya[2]-ya[0],2)+Math.pow(Qa[2]-Qa[0],2));ya=4*(Xa*cc+ub*bb)/(2*Xb);La+=ya;cc=(cc*cc+bb*bb)/Xb-ya*ya;return Math.sqrt(Xb)/2*(La*Math.sqrt(La*La+cc)-ya*Math.sqrt(ya*ya+cc)+cc*Math.log(Math.abs((La+Math.sqrt(La*La+cc))/(ya+Math.sqrt(ya*ya+cc)))))}function aa(ya,Qa,La){var Xa,ub=La.length-1;if(0===ub)return 0;if(0===ya){for(Xa=
ya=0;Xa<=ub;Xa++)ya+=Zpa[ub][Xa]*Math.pow(1-Qa,ub-Xa)*Math.pow(Qa,Xa)*La[Xa];return ya}var cc=Array(ub);for(Xa=0;Xa<ub;Xa++)cc[Xa]=ub*(La[Xa+1]-La[Xa]);return aa(ya-1,Qa,cc)}function m(ya,Qa,La){var Xa,ub;void 0===La&&(La=1);La/=2;for(ub=Xa=0;20>ub;ub++){var cc=La*$pa[20][ub]+La;var bb=aqa[20][ub],Xb=Qa,Lb=cc;cc=aa(1,Lb,ya);Xb=aa(1,Lb,Xb);Xa+=bb*Math.sqrt(cc*cc+Xb*Xb)}return La*Xa}function t(ya,Qa,La,Xa){var ub=ya*La+Qa*Xa;return 1<ub&&(ub=1),-1>ub&&(ub=-1),(0>ya*Xa-Qa*La?-1:1)*Math.acos(ub)}function u(ya,
Qa,La,Xa,ub,cc,bb,Xb,Lb,Jc){var Ob=Jc*(ya-La)/2+Lb*(Qa-Xa)/2,Id=-Lb*(ya-La)/2+Jc*(Qa-Xa)/2,be=bb*bb,We=Xb*Xb,Xe=Ob*Ob,re=Id*Id,Ye=be*We-be*re-We*Xe;0>Ye&&(Ye=0);Ye=Math.sqrt(Ye/(be*re+We*Xe))*(ub===cc?-1:1);ub=Ye*bb/Xb*Id;Ye=Ye*-Xb/bb*Ob;ya=Jc*ub-Lb*Ye+(ya+La)/2;Qa=Lb*ub+Jc*Ye+(Qa+Xa)/2;Xa=(Ob-ub)/bb;Lb=(Id-Ye)/Xb;bb=(-Ob-ub)/bb;Id=(-Id-Ye)/Xb;Xb=t(1,0,Xa,Lb);Id=t(Xa,Lb,bb,Id);return 0===cc&&0<Id&&(Id-=iC),1===cc&&0>Id&&(Id+=iC),[ya,Qa,Xb,Id]}function B(ya,Qa){var La=4/3*Math.tan(Qa/4),Xa=Math.cos(ya),
ub=Math.sin(ya),cc=Math.cos(ya+Qa);ya=Math.sin(ya+Qa);return[Xa,ub,Xa-ub*La,ub+Xa*La,cc+ya*La,ya-cc*La,cc,ya]}function A(ya,Qa,La,Xa,ub,cc,bb,Xb,Lb){var Jc=0,Ob=[],Id=[];bqa(ya,Qa,La,Xa,ub,cc,bb,Xb,Lb).forEach(function(be){be=new np(be[0],be[1],be[2],be[3],be[4],be[5],be[6],be[7]);var We=be.getTotalLength();Jc+=We;Ob.push(We);Id.push(be)});(this||yc).length=Jc;(this||yc).partialLengths=Ob;(this||yc).curves=Id}function H(ya,Qa,La,Xa){(this||yc).x0=ya;(this||yc).x1=Qa;(this||yc).y0=La;(this||yc).y1=
Xa}function F(ya,Qa){return Math.sqrt((ya[0]-Qa[0])*(ya[0]-Qa[0])+(ya[1]-Qa[1])*(ya[1]-Qa[1]))}function L(ya,Qa,La){return[ya[0]+(Qa[0]-ya[0])*La,ya[1]+(Qa[1]-ya[1])*La]}function U(ya,Qa,La){var Xa=ya.map(function(ub,cc){return T(ub,Qa[cc])});return function(ub){var cc=Xa.map(function(bb){return bb(ub)});return La?na(cc):cc}}function T(ya,Qa){return function(La){return ya.map(function(Xa,ub){return Xa+La*(Qa[ub]-Xa)})}}function Y(ya){return"number"==typeof ya&&isFinite(ya)}function wa(ya){var Qa;
a:{for(Qa=0;Qa<ya.length-2;Qa++){var La=ya[Qa],Xa=ya[Qa+1],ub=ya[Qa+2];if(La[0]*(Xa[1]-ub[1])+Xa[0]*(ub[1]-La[1])+ub[0]*(La[1]-Xa[1])){Qa=!0;break a}}Qa=!1}if(Qa){ub=-1;var cc=ya.length,bb=0,Xb=0,Lb=ya[cc-1];for(Qa=0;++ub<cc;)La=Lb,Lb=ya[ub],Qa+=Xa=La[0]*Lb[1]-Lb[0]*La[1],bb+=(La[0]+Lb[0])*Xa,Xb+=(La[1]+Lb[1])*Xa;ya=(Qa*=3,[bb/Qa,Xb/Qa])}else ya=[(ya[0][0]+ya[ya.length-1][0])/2,(ya[0][1]+ya[ya.length-1][1])/2];return ya}function Ga(ya){return ya.toString().split("M").map(function(Qa,La){return Qa=
Qa.trim(),La&&Qa?"M"+Qa:Qa}).filter(function(Qa){return Qa})}function na(ya){return"M"+ya.join("L")+"Z"}function ea(ya,Qa){var La=ya.length+Qa;Qa=ei(ya)/Qa;for(var Xa=0,ub=0,cc=Qa/2;ya.length<La;){var bb=ya[Xa],Xb=ya[(Xa+1)%ya.length],Lb=F(bb,Xb);cc<=ub+Lb?(ya.splice(Xa+1,0,Lb?L(bb,Xb,(cc-ub)/Lb):bb.slice(0)),cc+=Qa):(ub+=Lb,Xa++)}}function da(ya,Qa){var La;if("string"==typeof ya){ya=(new k$(ya)).abs();a:{var Xa=ya.segments||[];var ub=[];if(Xa.length&&"M"===Xa[0][0]){for(var cc=0;cc<Xa.length;cc++){var bb=
Xa[cc],Xb=bb[0],Lb=bb[1];bb=bb[2];if("M"===Xb&&cc||"Z"===Xb)break;if("M"===Xb||"L"===Xb)ub.push([Lb,bb]);else if("H"===Xb)ub.push([Lb,ub[ub.length-1][1]]);else{if("V"!==Xb){Xa=!1;break a}ub.push([ub[ub.length-1][0],Lb])}}Xa=!!ub.length&&{ring:ub}}else Xa=!1}if(!Xa){ub=Ga(ya)[0];ya=[];Xa=3;if(!ub)throw new TypeError(KS);a:{if("undefined"!=typeof window&&window&&window.document)try{var Jc=window.document.createElementNS("http://www.w3.org/2000/svg","path");var Ob=(Jc.setAttributeNS(null,"d",ub),Jc);
break a}catch(Id){}Ob=cqa(ub)}Jc=Ob;Ob=Jc.getTotalLength();Qa&&Y(Qa)&&0<Qa&&(Xa=Math.max(Xa,Math.ceil(Ob/Qa)));for(ub=0;ub<Xa;ub++)cc=Jc.getPointAtLength(Ob*ub/Xa),ya.push([cc.x,cc.y]);Xa={ring:ya,skipBisect:!0}}Ob=Xa;ya=Ob.ring;Xa=Ob.skipBisect}else if(!Array.isArray(ya))throw new TypeError(KS);if(La=ya.slice(0),!ia(La))throw new TypeError(KS);1<La.length&&1E-9>F(La[0],La[La.length-1])&&La.pop();0<qi(La)&&La.reverse();if(!Xa&&Qa&&Y(Qa)&&0<Qa)for(void 0===Qa&&(Qa=1/0),Ob=0;Ob<La.length;Ob++)for(Jc=
La[Ob],ya=Ob===La.length-1?La[0]:La[Ob+1];F(Jc,ya)>Qa;)ya=L(Jc,ya,.5),La.splice(Ob+1,0,ya);return La}function ia(ya){return ya.every(function(Qa){return Array.isArray(Qa)&&2<=Qa.length&&Y(Qa[0])&&Y(Qa[1])})}function Oa(ya,Qa,La){var Xa;return Xa=ya.length-Qa.length,ea(ya,0>Xa?-1*Xa:0),ea(Qa,0<Xa?Xa:0),dqa(ya,Qa),U(ya,Qa,La)}function Va(ya,Qa,La){La=La||2;var Xa=Qa&&Qa.length,ub=Xa?Qa[0]*La:ya.length,cc=eb(ya,0,ub,La,!0),bb=[];if(!cc)return bb;var Xb;if(Xa){var Lb=La,Jc;var Ob=[];Xa=0;for(Jc=Qa.length;Xa<
Jc;Xa++){var Id=Qa[Xa]*Lb;var be=Xa<Jc-1?Qa[Xa+1]*Lb:ya.length;Id=eb(ya,Id,be,Lb,!1);Id===Id.next&&(Id.steiner=!0);Ob.push(X(Id))}Ob.sort(Z);for(Xa=0;Xa<Ob.length;Xa++){Qa=Ob[Xa];Lb=cc;if(Lb=sa(Qa,Lb))Qa=Pb(Lb,Qa),Sa(Qa,Qa.next);cc=Sa(cc,cc.next)}}if(ya.length>80*La){var We=Xb=ya[0];var Xe=Xa=ya[1];for(Lb=La;Lb<ub;Lb+=La)Ob=ya[Lb],Qa=ya[Lb+1],Ob<We&&(We=Ob),Qa<Xe&&(Xe=Qa),Ob>Xb&&(Xb=Ob),Qa>Xa&&(Xa=Qa);Xb=Math.max(Xb-We,Xa-Xe)}return Bb(cc,bb,La,We,Xe,Xb),bb}function eb(ya,Qa,La,Xa,ub){if(ub===0<Lc(ya,
Qa,La,Xa))for(ub=Qa;ub<La;ub+=Xa)var cc=Db(ub,ya[ub],ya[ub+1],cc);else for(ub=La-Xa;ub>=Qa;ub-=Xa)cc=Db(ub,ya[ub],ya[ub+1],cc);return cc&&Pa(cc,cc.next)&&(sc(cc),cc=cc.next),cc}function Sa(ya,Qa){if(!ya)return ya;Qa||(Qa=ya);var La=ya;do if(ya=!1,La.steiner||!Pa(La,La.next)&&0!==ta(La.prev,La,La.next))La=La.next;else{if(sc(La),(La=Qa=La.prev)===La.next)return null;ya=!0}while(ya||La!==Qa);return Qa}function Bb(ya,Qa,La,Xa,ub,cc,bb){if(ya){if(!bb&&cc){var Xb=ya,Lb=Xb;do null===Lb.z&&(Lb.z=Da(Lb.x,
Lb.y,Xa,ub,cc)),Lb.prevZ=Lb.prev,Lb=Lb.nextZ=Lb.next;while(Lb!==Xb);Lb.prevZ.nextZ=null;Lb.prevZ=null;Xb=Lb;var Jc,Ob,Id,be,We=1;do{Lb=Xb;var Xe=Xb=null;for(Id=0;Lb;){Id++;var re=Lb;for(Jc=be=0;Jc<We&&(be++,re=re.nextZ);Jc++);for(Jc=We;0<be||0<Jc&&re;)0===be?(Ob=re,re=re.nextZ,Jc--):0!==Jc&&re?Lb.z<=re.z?(Ob=Lb,Lb=Lb.nextZ,be--):(Ob=re,re=re.nextZ,Jc--):(Ob=Lb,Lb=Lb.nextZ,be--),Xe?Xe.nextZ=Ob:Xb=Ob,Ob.prevZ=Xe,Xe=Ob;Lb=re}Xe.nextZ=null;We*=2}while(1<Id)}for(Lb=ya;ya.prev!==ya.next;){Ob=ya.prev;Xb=
ya.next;if(cc)a:{re=ya;Jc=Xa;var Ye=ub,Tm=cc;Xe=re.prev;Id=re;be=re.next;if(0<=ta(Xe,Id,be))re=!1;else{var eqa=Xe.x>Id.x?Xe.x>be.x?Xe.x:be.x:Id.x>be.x?Id.x:be.x,fqa=Xe.y>Id.y?Xe.y>be.y?Xe.y:be.y:Id.y>be.y?Id.y:be.y;We=Da(Xe.x<Id.x?Xe.x<be.x?Xe.x:be.x:Id.x<be.x?Id.x:be.x,Xe.y<Id.y?Xe.y<be.y?Xe.y:be.y:Id.y<be.y?Id.y:be.y,Jc,Ye,Tm);Jc=Da(eqa,fqa,Jc,Ye,Tm);for(Ye=re.nextZ;Ye&&Ye.z<=Jc;){if(Ye!==re.prev&&Ye!==re.next&&ma(Xe.x,Xe.y,Id.x,Id.y,be.x,be.y,Ye.x,Ye.y)&&0<=ta(Ye.prev,Ye,Ye.next)){re=!1;break a}Ye=
Ye.nextZ}for(Ye=re.prevZ;Ye&&Ye.z>=We;){if(Ye!==re.prev&&Ye!==re.next&&ma(Xe.x,Xe.y,Id.x,Id.y,be.x,be.y,Ye.x,Ye.y)&&0<=ta(Ye.prev,Ye,Ye.next)){re=!1;break a}Ye=Ye.prevZ}re=!0}}else a:if(re=ya,Xe=re.prev,Id=re,be=re.next,0<=ta(Xe,Id,be))re=!1;else{for(We=re.next.next;We!==re.prev;){if(ma(Xe.x,Xe.y,Id.x,Id.y,be.x,be.y,We.x,We.y)&&0<=ta(We.prev,We,We.next)){re=!1;break a}We=We.next}re=!0}if(re)Qa.push(Ob.i/La),Qa.push(ya.i/La),Qa.push(Xb.i/La),sc(ya),Lb=ya=Xb.next;else if((ya=Xb)===Lb){if(bb)if(1===
bb){bb=Qa;Ob=La;Xb=ya;do Lb=Xb.prev,re=Xb.next.next,!Pa(Lb,re)&&Za(Lb,Xb,Xb.next,re)&&Zb(Lb,re)&&Zb(re,Lb)&&(bb.push(Lb.i/Ob),bb.push(Xb.i/Ob),bb.push(re.i/Ob),sc(Xb),sc(Xb.next),Xb=ya=re),Xb=Xb.next;while(Xb!==ya);ya=Xb;Bb(ya,Qa,La,Xa,ub,cc,2)}else{if(2===bb)a:{bb=ya;do{for(Ob=bb.next.next;Ob!==bb.prev;){if(Xb=bb.i!==Ob.i){Xb=bb;Lb=Ob;if(re=Xb.next.i!==Lb.i&&Xb.prev.i!==Lb.i){b:{re=Xb;do{if(re.i!==Xb.i&&re.next.i!==Xb.i&&re.i!==Lb.i&&re.next.i!==Lb.i&&Za(re,re.next,Xb,Lb)){re=!0;break b}re=re.next}while(re!==
Xb);re=!1}re=!re}if(re=re&&Zb(Xb,Lb)&&Zb(Lb,Xb)){re=Xb;Xe=!1;Id=(Xb.x+Lb.x)/2;Lb=(Xb.y+Lb.y)/2;do re.y>Lb!=re.next.y>Lb&&Id<(re.next.x-re.x)*(Lb-re.y)/(re.next.y-re.y)+re.x&&(Xe=!Xe),re=re.next;while(re!==Xb);re=Xe}Xb=re}if(Xb){ya=Pb(bb,Ob);bb=Sa(bb,bb.next);ya=Sa(ya,ya.next);Bb(bb,Qa,La,Xa,ub,cc);Bb(ya,Qa,La,Xa,ub,cc);break a}Ob=Ob.next}bb=bb.next}while(bb!==ya)}}else Bb(Sa(ya),Qa,La,Xa,ub,cc,1);break}}}}function Z(ya,Qa){return ya.x-Qa.x}function sa(ya,Qa){var La=Qa,Xa=ya.x,ub=ya.y,cc=-1/0;do{if(ub<=
La.y&&ub>=La.next.y){var bb=La.x+(ub-La.y)*(La.next.x-La.x)/(La.next.y-La.y);if(bb<=Xa&&bb>cc){if(cc=bb,bb===Xa){if(ub===La.y)return La;if(ub===La.next.y)return La.next}var Xb=La.x<La.next.x?La:La.next}}La=La.next}while(La!==Qa);if(!Xb)return null;if(Xa===cc)return Xb.prev;var Lb;Qa=Xb;bb=Xb.x;var Jc=Xb.y,Ob=1/0;for(La=Xb.next;La!==Qa;)Xa>=La.x&&La.x>=bb&&ma(ub<Jc?Xa:cc,ub,bb,Jc,ub<Jc?cc:Xa,ub,La.x,La.y)&&((Lb=Math.abs(ub-La.y)/(Xa-La.x))<Ob||Lb===Ob&&La.x>Xb.x)&&Zb(La,ya)&&(Xb=La,Ob=Lb),La=La.next;
return Xb}function Da(ya,Qa,La,Xa,ub){return ya=32767*(ya-La)/ub,Qa=32767*(Qa-Xa)/ub,ya=16711935&(ya|ya<<8),ya=252645135&(ya|ya<<4),ya=858993459&(ya|ya<<2),ya=1431655765&(ya|ya<<1),Qa=16711935&(Qa|Qa<<8),Qa=252645135&(Qa|Qa<<4),Qa=858993459&(Qa|Qa<<2),Qa=1431655765&(Qa|Qa<<1),ya|Qa<<1}function X(ya){var Qa=ya,La=ya;do Qa.x<La.x&&(La=Qa),Qa=Qa.next;while(Qa!==ya);return La}function ma(ya,Qa,La,Xa,ub,cc,bb,Xb){return 0<=(ub-bb)*(Qa-Xb)-(ya-bb)*(cc-Xb)&&0<=(ya-bb)*(Xa-Xb)-(La-bb)*(Qa-Xb)&&0<=(La-bb)*
(cc-Xb)-(ub-bb)*(Xa-Xb)}function ta(ya,Qa,La){return(Qa.y-ya.y)*(La.x-Qa.x)-(Qa.x-ya.x)*(La.y-Qa.y)}function Pa(ya,Qa){return ya.x===Qa.x&&ya.y===Qa.y}function Za(ya,Qa,La,Xa){return!!(Pa(ya,Qa)&&Pa(La,Xa)||Pa(ya,Xa)&&Pa(La,Qa))||0<ta(ya,Qa,La)!=0<ta(ya,Qa,Xa)&&0<ta(La,Xa,ya)!=0<ta(La,Xa,Qa)}function Zb(ya,Qa){return 0>ta(ya.prev,ya,ya.next)?0<=ta(ya,Qa,ya.next)&&0<=ta(ya,ya.prev,Qa):0>ta(ya,Qa,ya.prev)||0>ta(ya,ya.next,Qa)}function Pb(ya,Qa){var La=new wc(ya.i,ya.x,ya.y),Xa=new wc(Qa.i,Qa.x,Qa.y),
ub=ya.next,cc=Qa.prev;return ya.next=Qa,Qa.prev=ya,La.next=ub,ub.prev=La,Xa.next=La,La.prev=Xa,cc.next=Xa,Xa.prev=cc,Xa}function Db(ya,Qa,La,Xa){ya=new wc(ya,Qa,La);return Xa?(ya.next=Xa.next,ya.prev=Xa,Xa.next.prev=ya,Xa.next=ya):(ya.prev=ya,ya.next=ya),ya}function sc(ya){ya.next.prev=ya.prev;ya.prev.next=ya.next;ya.prevZ&&(ya.prevZ.nextZ=ya.nextZ);ya.nextZ&&(ya.nextZ.prevZ=ya.prevZ)}function wc(ya,Qa,La){(this||yc).i=ya;(this||yc).x=Qa;(this||yc).y=La;(this||yc).prev=null;(this||yc).next=null;(this||
yc).z=null;(this||yc).prevZ=null;(this||yc).nextZ=null;(this||yc).steiner=!1}function Lc(ya,Qa,La,Xa){for(var ub=0,cc=La-Xa;Qa<La;Qa+=Xa)ub+=(ya[cc]-ya[Qa])*(ya[Qa+1]+ya[cc+1]),cc=Qa;return ub}function Xc(ya,Qa){var La=Qa.id,Xa=Qa.bbox,ub=null==Qa.properties?{}:Qa.properties;ya=Qc(ya,Qa);return null==La&&null==Xa?{type:"Feature",properties:ub,geometry:ya}:null==Xa?{type:"Feature",id:La,properties:ub,geometry:ya}:{type:"Feature",id:La,bbox:Xa,properties:ub,geometry:ya}}function Qc(ya,Qa){function La(Jc){return Xb(Jc)}
function Xa(Jc){for(var Ob=[],Id=0,be=Jc.length;Id<be;++Id){var We=Jc[Id],Xe=Ob;Xe.length&&Xe.pop();for(var re=Lb[0>We?~We:We],Ye=0,Tm=re.length;Ye<Tm;++Ye)Xe.push(Xb(re[Ye],Ye));if(0>We)for(We=Xe,Xe=We.length,re=Xe-Tm;re<--Xe;)Tm=We[re],We[re++]=We[Xe],We[Xe]=Tm}return 2>Ob.length&&Ob.push(Ob[0]),Ob}function ub(Jc){for(Jc=Xa(Jc);4>Jc.length;)Jc.push(Jc[0]);return Jc}function cc(Jc){return Jc.map(ub)}function bb(Jc){var Ob=Jc.type;switch(Ob){case "GeometryCollection":return{type:Ob,geometries:Jc.geometries.map(bb)};
case "Point":Jc=Xb(Jc.coordinates);break;case "MultiPoint":Jc=Jc.coordinates.map(La);break;case "LineString":Jc=Xa(Jc.arcs);break;case "MultiLineString":Jc=Jc.arcs.map(Xa);break;case "Polygon":Jc=cc(Jc.arcs);break;case "MultiPolygon":Jc=Jc.arcs.map(cc);break;default:return null}return{type:Ob,coordinates:Jc}}var Xb=gqa(ya.transform),Lb=ya.arcs;return bb(Qa)}function hd(ya,Qa){function La(Lb){switch(Lb.type){case "GeometryCollection":Lb.geometries.forEach(La);break;case "Polygon":Xa(Lb.arcs);break;
case "MultiPolygon":Lb.arcs.forEach(Xa)}}function Xa(Lb){Lb.forEach(function(Jc){Jc.forEach(function(Ob){(cc[Ob=0>Ob?~Ob:Ob]||(cc[Ob]=[])).push(Lb)})});bb.push(Lb)}function ub(Lb){Lb=Qc(ya,{type:"Polygon",arcs:[Lb]}).coordinates[0];for(var Jc,Ob=-1,Id=Lb.length,be=Lb[Id-1],We=0;++Ob<Id;)Jc=be,be=Lb[Ob],We+=Jc[0]*be[1]-Jc[1]*be[0];return Math.abs(We)}var cc={},bb=[],Xb=[];return Qa.forEach(La),bb.forEach(function(Lb){if(!Lb._){var Jc=[],Ob=[Lb];Lb._=1;for(Xb.push(Jc);Lb=Ob.pop();)Jc.push(Lb),Lb.forEach(function(Id){Id.forEach(function(be){cc[0>
be?~be:be].forEach(function(We){We._||(We._=1,Ob.push(We))})})})}}),bb.forEach(function(Lb){delete Lb._}),{type:"MultiPolygon",arcs:Xb.map(function(Lb){var Jc=[];if(Lb.forEach(function(Xe){Xe.forEach(function(re){re.forEach(function(Ye){2>cc[0>Ye?~Ye:Ye].length&&Jc.push(Ye)})})}),Jc=hqa(ya,Jc),1<(Lb=Jc.length))for(var Ob,Id,be=1,We=ub(Jc[0]);be<Lb;++be)(Ob=ub(Jc[be]))>We&&(Id=Jc[0],Jc[0]=Jc[be],Jc[be]=Id,We=Ob);return Jc})}}function Wc(ya){return function(Qa,La){return l$(ya(Qa),La)}}function ld(ya,
Qa){var La={},Xa={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};return ya.forEach(function(ub){var cc=[];ub.forEach(function(bb,Xb){Xb=bb[0]<bb[1]?bb.join(","):bb[1]+","+bb[0];bb=bb.map(function(Lb){return Qa[Lb]});Xb in La?cc.push(~La[Xb]):(cc.push(La[Xb]=Xa.arcs.length),Xa.arcs.push(bb))});Xa.objects.triangles.geometries.push({type:"Polygon",area:Math.abs(qi(ub.map(function(bb){return Qa[bb[0]]}))),arcs:[cc]})}),Xa.objects.triangles.geometries.sort(function(ub,
cc){return ub.area-cc.area}),Xa}function Yc(ya,Qa){for(var La=ya.objects.triangles.geometries,Xa=m$(function(ub){return ub.area}).left;La.length>Qa;)!function(){var ub=La[0],cc=iqa(La)[0][0],bb=La[cc],Xb=hd(ya,[ub,bb]);Xb.area=ub.area+bb.area;Xb.type="Polygon";Xb.arcs=Xb.arcs[0];La.splice(cc,1);La.shift();La.splice(Xa(La,Xb.area),0,Xb)}();if(Qa>La.length)throw new RangeError("Can't collapse topology into "+Qa+" pieces.");return jqa(ya,ya.objects.triangles).features.map(function(ub){return ub.geometry.coordinates[0].pop(),
ub.geometry.coordinates[0]})}function od(ya){ya=kqa(ya.reduce(function(ub,cc){return ub.concat([cc[0]],[cc[1]])},[]));for(var Qa=[],La=0,Xa=ya.length;La<Xa;La+=3)Qa.push([[ya[La],ya[La+1]],[ya[La+1],ya[La+2]],[ya[La+2],ya[La]]]);return Qa}function Vc(ya,Qa,La){function Xa(bb,Xb,Lb){void 0===Xb&&(Xb=[]);void 0===Lb&&(Lb=0);for(var Jc=0;Jc<bb.length;Jc++){var Ob=bb.splice(Jc,1),Id=La[Ob[0]][Xb.length];Lb+Id<ub&&(bb.length?Xa(bb.slice(),Xb.concat(Ob),Lb+Id):(ub=Lb+Id,cc=Xb.concat(Ob)));bb.length&&bb.splice(Jc,
0,Ob[0])}}var ub=1/0,cc=ya.map(function(bb,Xb){return Xb});return Xa(cc),cc}function cd(ya,Qa,La){void 0===La&&(La={});var Xa=La.maxSegmentLength;void 0===Xa&&(Xa=10);var ub=La.string;void 0===ub&&(ub=!0);La=La.single;void 0===La&&(La=!1);var cc=da(ya,Xa);cc.length<Qa.length+2&&ea(cc,Qa.length+2-cc.length);var bb;cc=lqa(cc,Qa.length);var Xb=Qa.map(function(Lb){return da(Lb,Xa)});ya="string"==typeof ya&&ya;return La&&!Qa.every(function(Lb){return"string"==typeof Lb})||(bb=Qa.slice(0)),W(cc,Xb,{match:!0,
string:ub,single:La,t0:ya,t1:bb})}function W(ya,Qa,La){void 0===La&&(La={});var Xa=La.string,ub=La.single,cc=La.t0,bb=La.t1,Xb=(La=La.match)?mqa(ya,Qa):ya.map(function(Ob,Id){return Id}),Lb=Xb.map(function(Ob,Id){return Oa(ya[Ob],Qa[Id],Xa)});if(La&&Array.isArray(cc)&&(cc=Xb.map(function(Ob){return cc[Ob]})),ub&&Xa&&(Array.isArray(cc)&&(cc=cc.join(" ")),Array.isArray(bb)&&(bb=bb.join(" "))),ub){var Jc=Xa?function(Ob){return Lb.map(function(Id){return Id(Ob)}).join(" ")}:function(Ob){return Lb.map(function(Id){return Id(Ob)})};
return Xa&&(cc||bb)?function(Ob){return 1E-4>Ob&&cc||1E-4>1-Ob&&bb||Jc(Ob)}:Jc}return Xa?(cc=Array.isArray(cc)?cc.map(function(Ob){return"string"==typeof Ob&&Ob}):[],bb=Array.isArray(bb)?bb.map(function(Ob){return"string"==typeof Ob&&Ob}):[],Lb.map(function(Ob,Id){return cc[Id]||bb[Id]?function(be){return 1E-4>be&&cc[Id]||1E-4>1-be&&bb[Id]||Ob(be)}:Ob})):Lb}function af(ya,Qa,La,Xa,ub){var cc=ad(ya,Qa,La),bb=ya-La+","+Qa,Xb="A"+La+","+La+",0,1,1,";return pi(cc,Xa,"M"+bb+Xb+(ya+La+","+Qa)+Xb+bb+"Z",
2*Math.PI*La,ub)}function zc(ya,Qa,La,Xa,ub,cc){var bb=bd(ya,Qa,La,Xa),Xb=ya+La,Lb=Qa+Xa;return pi(bb,ub,"M"+ya+","+Qa+"L"+Xb+","+Qa+"L"+Xb+","+Lb+"L"+ya+","+Lb+"Z",2*La+2*Xa,cc)}function pi(ya,Qa,La,Xa,ub){void 0===ub&&(ub={});var cc=ub.maxSegmentLength;void 0===cc&&(cc=10);ub=ub.string;void 0===ub&&(ub=!0);var bb,Xb;Qa=da(Qa,cc);return Y(Xa)&&Qa.length<Xa/cc&&ea(Qa,Math.ceil(Xa/cc-Qa.length)),bb=ya(Qa),Xb=U(bb,Qa,ub),ub?function(Lb){return 1E-4>Lb?La:Xb(Lb)}:Xb}function ad(ya,Qa,La){return function(Xa){var ub=
wa(Xa),cc=ei(Xa.concat([Xa[0]])),bb=Math.atan2(Xa[0][1]-ub[1],Xa[0][0]-ub[0]),Xb=0;return Xa.map(function(Lb,Jc){var Ob;return Jc&&(Xb+=F(Lb,Xa[Jc-1])),Ob=bb+2*Math.PI*(cc?Xb/cc:Jc/Xa.length),[Math.cos(Ob)*La+ya,Math.sin(Ob)*La+Qa]})}}function bd(ya,Qa,La,Xa){return function(ub){var cc=wa(ub),bb=ei(ub.concat([ub[0]]));cc=Math.atan2(ub[0][1]-cc[1],ub[0][0]-cc[0]);var Xb=0;0>cc&&(cc=2*Math.PI+cc);var Lb=cc/(2*Math.PI);return ub.map(function(Jc,Ob){Ob&&(Xb+=F(Jc,ub[Ob-1]));Jc=(Lb+(bb?Xb/bb:Ob/ub.length))%
1;Jc=.125>=Jc?[1,.5+4*Jc]:.375>=Jc?[1.5-4*Jc,1]:.625>=Jc?[0,2.5-4*Jc]:.875>=Jc?[4*Jc-2.5,0]:[1,4*Jc-3.5];return[ya+Jc[0]*La,Qa+Jc[1]*Xa]})}}var qi=function(ya){for(var Qa,La=-1,Xa=ya.length,ub=ya[Xa-1],cc=0;++La<Xa;)Qa=ub,ub=ya[La],cc+=Qa[1]*ub[0]-Qa[0]*ub[1];return cc/2},ei=function(ya){var Qa=-1,La=ya.length,Xa=ya[La-1],ub=Xa[0];Xa=Xa[1];for(var cc=0;++Qa<La;){var bb=ub;var Xb=Xa;Xa=ya[Qa];ub=Xa[0];Xa=Xa[1];bb-=ub;Xb-=Xa;cc+=Math.sqrt(bb*bb+Xb*Xb)}return cc},Zh={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,
t:2,v:1,z:0},xi=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];a.prototype.matrix=function(ya){return 1===ya[0]&&0===ya[1]&&0===ya[2]&&1===ya[3]&&0===ya[4]&&0===ya[5]?this||yc:((this||yc).cache=null,(this||yc).queue.push(ya),this||yc)};a.prototype.translate=function(ya,Qa){return 0===ya&&0===Qa||((this||yc).cache=null,(this||yc).queue.push([1,0,0,1,ya,Qa])),this||yc};a.prototype.scale=function(ya,Qa){return 1===ya&&1===Qa||((this||yc).cache=null,(this||yc).queue.push([ya,
0,0,Qa,0,0])),this||yc};a.prototype.rotate=function(ya,Qa,La){var Xa,ub,cc;return 0!==ya&&(this.translate(Qa,La),Xa=ya*Math.PI/180,ub=Math.cos(Xa),cc=Math.sin(Xa),(this||yc).queue.push([ub,cc,-cc,ub,0,0]),(this||yc).cache=null,this.translate(-Qa,-La)),this||yc};a.prototype.skewX=function(ya){return 0!==ya&&((this||yc).cache=null,(this||yc).queue.push([1,0,Math.tan(ya*Math.PI/180),1,0,0])),this||yc};a.prototype.skewY=function(ya){return 0!==ya&&((this||yc).cache=null,(this||yc).queue.push([1,Math.tan(ya*
Math.PI/180),0,1,0,0])),this||yc};a.prototype.toArray=function(){var ya=this||yc;if((this||yc).cache)return(this||yc).cache;if(!(this||yc).queue.length)return(this||yc).cache=[1,0,0,1,0,0],(this||yc).cache;if((this||yc).cache=(this||yc).queue[0],1===(this||yc).queue.length)return(this||yc).cache;for(var Qa=1;Qa<(this||yc).queue.length;Qa++){var La=ya.cache,Xa=ya.queue[Qa];ya.cache=[La[0]*Xa[0]+La[2]*Xa[1],La[1]*Xa[0]+La[3]*Xa[1],La[0]*Xa[2]+La[2]*Xa[3],La[1]*Xa[2]+La[3]*Xa[3],La[0]*Xa[4]+La[2]*Xa[5]+
La[4],La[1]*Xa[4]+La[3]*Xa[5]+La[5]]}return(this||yc).cache};a.prototype.calc=function(ya,Qa,La){var Xa;return(this||yc).queue.length?((this||yc).cache||((this||yc).cache=this.toArray()),Xa=(this||yc).cache,[ya*Xa[0]+Qa*Xa[2]+(La?0:Xa[4]),ya*Xa[1]+Qa*Xa[3]+(La?0:Xa[5])]):[ya,Qa]};var kr={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},lr=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,jC=/[\s,]+/,kC=function(ya){var Qa,La,Xa=new a;return ya.split(lr).forEach(function(ub){if(ub.length){if(void 0!==
kr[ub])return void(Qa=ub);switch(La=ub.split(jC).map(function(cc){return+cc||0}),Qa){case "matrix":return void(6===La.length&&Xa.matrix(La));case "scale":return void(1===La.length?Xa.scale(La[0],La[0]):2===La.length&&Xa.scale(La[0],La[1]));case "rotate":return void(1===La.length?Xa.rotate(La[0],0,0):3===La.length&&Xa.rotate(La[0],La[1],La[2]));case "translate":return void(1===La.length?Xa.translate(La[0],0):2===La.length&&Xa.translate(La[0],La[1]));case "skewX":return void(1===La.length&&Xa.skewX(La[0]));
case "skewY":return void(1===La.length&&Xa.skewY(La[0]))}}}),Xa},hC=2*Math.PI,nqa=function(ya,Qa,La,Xa,ub,cc,bb,Xb,Lb){var Jc=Math.sin(Lb*hC/360),Ob=Math.cos(Lb*hC/360);Lb=Ob*(ya-La)/2+Jc*(Qa-Xa)/2;var Id=-Jc*(ya-La)/2+Ob*(Qa-Xa)/2;if(0===Lb&&0===Id||0===bb||0===Xb)return[];bb=Math.abs(bb);Xb=Math.abs(Xb);Lb=Lb*Lb/(bb*bb)+Id*Id/(Xb*Xb);1<Lb&&(bb*=Math.sqrt(Lb),Xb*=Math.sqrt(Lb));var be=n(ya,Qa,La,Xa,ub,cc,bb,Xb,Jc,Ob);ya=[];Qa=be[2];La=be[3];Xa=Math.max(Math.ceil(Math.abs(La)/(hC/4)),1);La/=Xa;for(ub=
0;ub<Xa;ub++)ya.push(q(Qa,La)),Qa+=La;return ya.map(function(We){for(var Xe=0;Xe<We.length;Xe+=2){var re=We[Xe+0],Ye=We[Xe+1];re*=bb;Ye*=Xb;var Tm=Jc*re+Ob*Ye;We[Xe+0]=Ob*re-Jc*Ye+be[0];We[Xe+1]=Tm+be[1]}return We})},n$=Math.PI/180;r.prototype.transform=function(ya){var Qa=Math.cos((this||yc).ax*n$),La=Math.sin((this||yc).ax*n$),Xa=[(this||yc).rx*(ya[0]*Qa+ya[2]*La),(this||yc).rx*(ya[1]*Qa+ya[3]*La),(this||yc).ry*(-ya[0]*La+ya[2]*Qa),(this||yc).ry*(-ya[1]*La+ya[3]*Qa)];ya=Xa[0]*Xa[0]+Xa[2]*Xa[2];
Qa=Xa[1]*Xa[1]+Xa[3]*Xa[3];La=((Xa[0]-Xa[3])*(Xa[0]-Xa[3])+(Xa[2]+Xa[1])*(Xa[2]+Xa[1]))*((Xa[0]+Xa[3])*(Xa[0]+Xa[3])+(Xa[2]-Xa[1])*(Xa[2]-Xa[1]));var ub=(ya+Qa)/2;if(La<1E-10*ub)return(this||yc).rx=(this||yc).ry=Math.sqrt(ub),(this||yc).ax=0,this||yc;Xa=Xa[0]*Xa[1]+Xa[2]*Xa[3];La=Math.sqrt(La);var cc=ub+La/2;La=ub-La/2;return(this||yc).ax=1E-10>Math.abs(Xa)&&1E-10>Math.abs(cc-Qa)?90:180*Math.atan(Math.abs(Xa)>Math.abs(cc-Qa)?(cc-ya)/Xa:Xa/(cc-Qa))/Math.PI,0<=(this||yc).ax?((this||yc).rx=Math.sqrt(cc),
(this||yc).ry=Math.sqrt(La)):((this||yc).ax+=90,(this||yc).rx=Math.sqrt(La),(this||yc).ry=Math.sqrt(cc)),this||yc};r.prototype.isDegenerate=function(){return(this||yc).rx<1E-10*(this||yc).ry||(this||yc).ry<1E-10*(this||yc).rx};v.prototype.__matrix=function(ya){var Qa,La=this||yc;ya.queue.length&&this.iterate(function(Xa,ub,cc,bb){switch(Xa[0]){case "v":var Xb=ya.calc(0,Xa[1],!0);cc=0===Xb[0]?["v",Xb[1]]:["l",Xb[0],Xb[1]];break;case "V":Xb=ya.calc(cc,Xa[1],!1);cc=Xb[0]===ya.calc(cc,bb,!1)[0]?["V",
Xb[1]]:["L",Xb[0],Xb[1]];break;case "h":Xb=ya.calc(Xa[1],0,!0);cc=0===Xb[1]?["h",Xb[0]]:["l",Xb[0],Xb[1]];break;case "H":Xb=ya.calc(Xa[1],bb,!1);cc=Xb[1]===ya.calc(cc,bb,!1)[1]?["H",Xb[0]]:["L",Xb[0],Xb[1]];break;case "a":case "A":Xb=ya.toArray();var Lb=r(Xa[1],Xa[2],Xa[3]).transform(Xb);if(0>Xb[0]*Xb[3]-Xb[1]*Xb[2]&&(Xa[5]=Xa[5]?"0":"1"),Xb=ya.calc(Xa[6],Xa[7],"a"===Xa[0]),"A"===Xa[0]&&Xa[6]===cc&&Xa[7]===bb||"a"===Xa[0]&&0===Xa[6]&&0===Xa[7]){cc=["a"===Xa[0]?"l":"L",Xb[0],Xb[1]];break}cc=Lb.isDegenerate()?
["a"===Xa[0]?"l":"L",Xb[0],Xb[1]]:[Xa[0],Lb.rx,Lb.ry,Lb.ax,Xa[4],Xa[5],Xb[0],Xb[1]];break;case "m":Xb=ya.calc(Xa[1],Xa[2],0<ub);cc=["m",Xb[0],Xb[1]];break;default:for(Xb=Xa[0],cc=[Xb],bb=Xb.toLowerCase()===Xb,Qa=1;Qa<Xa.length;Qa+=2)Xb=ya.calc(Xa[Qa],Xa[Qa+1],bb),cc.push(Xb[0],Xb[1])}La.segments[ub]=cc},!0)};v.prototype.__evaluateStack=function(){var ya,Qa=this||yc;if((this||yc).__stack.length){if(1===(this||yc).__stack.length)return this.__matrix((this||yc).__stack[0]),void((this||yc).__stack=[]);
var La=a();for(ya=(this||yc).__stack.length;0<=--ya;)La.matrix(Qa.__stack[ya].toArray());this.__matrix(La);(this||yc).__stack=[]}};v.prototype.toString=function(){var ya=this||yc,Qa=[];this.__evaluateStack();for(var La=0;La<(this||yc).segments.length;La++){var Xa=ya.segments[La][0];Xa=0<La&&"m"!==Xa&&"M"!==Xa&&Xa===ya.segments[La-1][0];Qa=Qa.concat(Xa?ya.segments[La].slice(1):ya.segments[La])}return Qa.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")};v.prototype.translate=
function(ya,Qa){return(this||yc).__stack.push(a().translate(ya,Qa||0)),this||yc};v.prototype.scale=function(ya,Qa){return(this||yc).__stack.push(a().scale(ya,Qa||0===Qa?Qa:ya)),this||yc};v.prototype.rotate=function(ya,Qa,La){return(this||yc).__stack.push(a().rotate(ya,Qa||0,La||0)),this||yc};v.prototype.skewX=function(ya){return(this||yc).__stack.push(a().skewX(ya)),this||yc};v.prototype.skewY=function(ya){return(this||yc).__stack.push(a().skewY(ya)),this||yc};v.prototype.matrix=function(ya){return(this||
yc).__stack.push(a().matrix(ya)),this||yc};v.prototype.transform=function(ya){return ya.trim()?((this||yc).__stack.push(kC(ya)),this||yc):this||yc};v.prototype.round=function(ya){var Qa,La=0,Xa=0,ub=0,cc=0;return ya=ya||0,this.__evaluateStack(),(this||yc).segments.forEach(function(bb){var Xb=bb[0].toLowerCase()===bb[0];switch(bb[0]){case "H":case "h":return Xb&&(bb[1]+=ub),ub=bb[1]-bb[1].toFixed(ya),void(bb[1]=+bb[1].toFixed(ya));case "V":case "v":return Xb&&(bb[1]+=cc),cc=bb[1]-bb[1].toFixed(ya),
void(bb[1]=+bb[1].toFixed(ya));case "Z":case "z":return ub=La,void(cc=Xa);case "M":case "m":return Xb&&(bb[1]+=ub,bb[2]+=cc),ub=bb[1]-bb[1].toFixed(ya),cc=bb[2]-bb[2].toFixed(ya),La=ub,Xa=cc,bb[1]=+bb[1].toFixed(ya),void(bb[2]=+bb[2].toFixed(ya));case "A":case "a":return Xb&&(bb[6]+=ub,bb[7]+=cc),ub=bb[6]-bb[6].toFixed(ya),cc=bb[7]-bb[7].toFixed(ya),bb[1]=+bb[1].toFixed(ya),bb[2]=+bb[2].toFixed(ya),bb[3]=+bb[3].toFixed(ya+2),bb[6]=+bb[6].toFixed(ya),void(bb[7]=+bb[7].toFixed(ya));default:return Qa=
bb.length,Xb&&(bb[Qa-2]+=ub,bb[Qa-1]+=cc),ub=bb[Qa-2]-bb[Qa-2].toFixed(ya),cc=bb[Qa-1]-bb[Qa-1].toFixed(ya),void bb.forEach(function(Lb,Jc){Jc&&(bb[Jc]=+bb[Jc].toFixed(ya))})}}),this||yc};v.prototype.iterate=function(ya,Qa){var La,Xa=(this||yc).segments,ub={},cc=!1,bb=0,Xb=0,Lb=0,Jc=0;if(Qa||this.__evaluateStack(),Xa.forEach(function(Id,be){var We=ya(Id,be,bb,Xb);Array.isArray(We)&&(ub[be]=We,cc=!0);be=Id[0]===Id[0].toLowerCase();switch(Id[0]){case "m":case "M":return bb=Id[1]+(be?bb:0),Xb=Id[2]+
(be?Xb:0),Lb=bb,void(Jc=Xb);case "h":case "H":return void(bb=Id[1]+(be?bb:0));case "v":case "V":return void(Xb=Id[1]+(be?Xb:0));case "z":case "Z":return bb=Lb,void(Xb=Jc);default:bb=Id[Id.length-2]+(be?bb:0),Xb=Id[Id.length-1]+(be?Xb:0)}}),!cc)return this||yc;var Ob=[];for(Qa=0;Qa<Xa.length;Qa++)if(void 0!==ub[Qa])for(La=0;La<ub[Qa].length;La++)Ob.push(ub[Qa][La]);else Ob.push(Xa[Qa]);return(this||yc).segments=Ob,this||yc};v.prototype.abs=function(){return this.iterate(function(ya,Qa,La,Xa){Qa=ya[0];
var ub=Qa.toUpperCase();if(Qa!==ub)switch(ya[0]=ub,Qa){case "v":return void(ya[1]+=Xa);case "a":return ya[6]+=La,void(ya[7]+=Xa);default:for(Qa=1;Qa<ya.length;Qa++)ya[Qa]+=Qa%2?La:Xa}},!0),this||yc};v.prototype.rel=function(){return this.iterate(function(ya,Qa,La,Xa){var ub=ya[0],cc=ub.toLowerCase();if(ub!==cc&&(0!==Qa||"M"!==ub))switch(ya[0]=cc,ub){case "V":return void(ya[1]-=Xa);case "A":return ya[6]-=La,void(ya[7]-=Xa);default:for(Qa=1;Qa<ya.length;Qa++)ya[Qa]-=Qa%2?La:Xa}},!0),this||yc};v.prototype.unarc=
function(){return this.iterate(function(ya,Qa,La,Xa){var ub,cc,bb,Xb=[];Qa=ya[0];return"A"!==Qa&&"a"!==Qa?null:("a"===Qa?(cc=La+ya[6],bb=Xa+ya[7]):(cc=ya[6],bb=ya[7]),ub=nqa(La,Xa,cc,bb,ya[4],ya[5],ya[1],ya[2],ya[3]),0===ub.length?[["a"===ya[0]?"l":"L",ya[6],ya[7]]]:(ub.forEach(function(Lb){Xb.push(["C",Lb[2],Lb[3],Lb[4],Lb[5],Lb[6],Lb[7]])}),Xb))}),this||yc};v.prototype.unshort=function(){var ya,Qa,La,Xa,ub,cc=(this||yc).segments;return this.iterate(function(bb,Xb,Lb,Jc){var Ob,Id=bb[0],be=Id.toUpperCase();
Xb&&("T"===be?(Ob="t"===Id,La=cc[Xb-1],"Q"===La[0]?(ya=La[1]-Lb,Qa=La[2]-Jc):"q"===La[0]?(ya=La[1]-La[3],Qa=La[2]-La[4]):(ya=0,Qa=0),Xa=-ya,ub=-Qa,Ob||(Xa+=Lb,ub+=Jc),cc[Xb]=[Ob?"q":"Q",Xa,ub,bb[1],bb[2]]):"S"===be&&(Ob="s"===Id,La=cc[Xb-1],"C"===La[0]?(ya=La[3]-Lb,Qa=La[4]-Jc):"c"===La[0]?(ya=La[3]-La[5],Qa=La[4]-La[6]):(ya=0,Qa=0),Xa=-ya,ub=-Qa,Ob||(Xa+=Lb,ub+=Jc),cc[Xb]=[Ob?"c":"C",Xa,ub,bb[1],bb[2],bb[3],bb[4]]))}),this||yc};var k$=v,LS={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},oqa=/([astvzqmhlc])([^astvzqmhlc]*)/gi,
qqa=function(ya){var Qa=[];return ya.replace(oqa,function(La,Xa,ub){La=Xa.toLowerCase();ub=(ub=ub.match(pqa))?ub.map(Number):[];for("m"===La&&2<ub.length&&(Qa.push([Xa].concat(ub.splice(0,2))),La="l",Xa="m"===Xa?"l":"L");0<=ub.length;){if(ub.length===LS[La])return ub.unshift(Xa),Qa.push(ub);if(ub.length<LS[La])throw Error("malformed path data");Qa.push([Xa].concat(ub.splice(0,LS[La])))}}),Qa},pqa=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,np=function(ya,Qa,La,Xa,ub,cc,bb,Xb){return new y(ya,Qa,La,Xa,ub,
cc,bb,Xb)};y.prototype={constructor:y,init:function(){(this||yc).length=this.getArcLength([(this||yc).a.x,(this||yc).b.x,(this||yc).c.x,(this||yc).d.x],[(this||yc).a.y,(this||yc).b.y,(this||yc).c.y,(this||yc).d.y])},getTotalLength:function(){return(this||yc).length},getPointAtLength:function(ya){ya=I(ya,(this||yc).length,(this||yc).getArcLength,[(this||yc).a.x,(this||yc).b.x,(this||yc).c.x,(this||yc).d.x],[(this||yc).a.y,(this||yc).b.y,(this||yc).c.y,(this||yc).d.y]);return this.getPoint([(this||
yc).a.x,(this||yc).b.x,(this||yc).c.x,(this||yc).d.x],[(this||yc).a.y,(this||yc).b.y,(this||yc).c.y,(this||yc).d.y],ya)},getTangentAtLength:function(ya){ya=I(ya,(this||yc).length,(this||yc).getArcLength,[(this||yc).a.x,(this||yc).b.x,(this||yc).c.x,(this||yc).d.x],[(this||yc).a.y,(this||yc).b.y,(this||yc).c.y,(this||yc).d.y]);ya=this.getDerivative([(this||yc).a.x,(this||yc).b.x,(this||yc).c.x,(this||yc).d.x],[(this||yc).a.y,(this||yc).b.y,(this||yc).c.y,(this||yc).d.y],ya);var Qa=Math.sqrt(ya.x*ya.x+
ya.y*ya.y);return 0<Qa?{x:ya.x/Qa,y:ya.y/Qa}:{x:0,y:0}},getPropertiesAtLength:function(ya){ya=I(ya,(this||yc).length,(this||yc).getArcLength,[(this||yc).a.x,(this||yc).b.x,(this||yc).c.x,(this||yc).d.x],[(this||yc).a.y,(this||yc).b.y,(this||yc).c.y,(this||yc).d.y]);var Qa=this.getDerivative([(this||yc).a.x,(this||yc).b.x,(this||yc).c.x,(this||yc).d.x],[(this||yc).a.y,(this||yc).b.y,(this||yc).c.y,(this||yc).d.y],ya);var La=Math.sqrt(Qa.x*Qa.x+Qa.y*Qa.y);Qa=0<La?{x:Qa.x/La,y:Qa.y/La}:{x:0,y:0};ya=
this.getPoint([(this||yc).a.x,(this||yc).b.x,(this||yc).c.x,(this||yc).d.x],[(this||yc).a.y,(this||yc).b.y,(this||yc).c.y,(this||yc).d.y],ya);return{x:ya.x,y:ya.y,tangentX:Qa.x,tangentY:Qa.y}}};var $pa=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,
-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,
.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,
-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,
.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,
-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,
.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,
-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,
.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,
-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,
.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,
-.9951872199970213,.9951872199970213]],aqa=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,
.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,
.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,
.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,
.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,
.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,
.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,
.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,
.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,
.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,
.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,
.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Zpa=[[1],[1,1],[1,2,1],[1,3,3,1]],iC=2*Math.PI,bqa=function(ya,Qa,La,Xa,ub,cc,bb,Xb,Lb){var Jc=Math.sin(ub*iC/360),Ob=Math.cos(ub*iC/360);ub=Ob*(ya-Xb)/2+Jc*(Qa-Lb)/2;var Id=-Jc*(ya-Xb)/2+Ob*(Qa-Lb)/2;if(0===ub&&0===Id||0===La||0===Xa)return[];La=Math.abs(La);Xa=Math.abs(Xa);ub=ub*ub/(La*La)+Id*Id/(Xa*Xa);1<ub&&(La*=Math.sqrt(ub),Xa*=Math.sqrt(ub));var be=u(ya,Qa,Xb,Lb,cc,bb,La,Xa,Jc,Ob);ya=[];Qa=be[2];cc=be[3];bb=Math.max(Math.ceil(Math.abs(cc)/
(iC/4)),1);cc/=bb;for(Xb=0;Xb<bb;Xb++)ya.push(B(Qa,cc)),Qa+=cc;return ya.map(function(We){for(var Xe=0;Xe<We.length;Xe+=2){var re=We[Xe+0],Ye=We[Xe+1];re*=La;Ye*=Xa;var Tm=Jc*re+Ob*Ye;We[Xe+0]=Ob*re-Jc*Ye+be[0];We[Xe+1]=Tm+be[1]}return We})},o$=function(ya,Qa,La,Xa,ub,cc,bb,Xb,Lb){return new A(ya,Qa,La,Xa,ub,cc,bb,Xb,Lb)};A.prototype={constructor:A,init:function(){},getTotalLength:function(){return(this||yc).length},getPointAtLength:function(ya){var Qa=this||yc;0>ya?ya=0:ya>(this||yc).length&&(ya=
(this||yc).length);for(var La=(this||yc).partialLengths.length-1;(this||yc).partialLengths[La]>=ya&&0<(this||yc).partialLengths[La];)La--;La<(this||yc).partialLengths.length-1&&La++;for(var Xa=0,ub=0;ub<La;ub++)Xa+=Qa.partialLengths[ub];return(this||yc).curves[La].getPointAtLength(ya-Xa)},getTangentAtLength:function(ya){var Qa=this||yc;0>ya?ya=0:ya>(this||yc).length&&(ya=(this||yc).length);for(var La=(this||yc).partialLengths.length-1;(this||yc).partialLengths[La]>=ya&&0<(this||yc).partialLengths[La];)La--;
La<(this||yc).partialLengths.length-1&&La++;for(var Xa=0,ub=0;ub<La;ub++)Xa+=Qa.partialLengths[ub];return(this||yc).curves[La].getTangentAtLength(ya-Xa)},getPropertiesAtLength:function(ya){var Qa=this.getTangentAtLength(ya);ya=this.getPointAtLength(ya);return{x:ya.x,y:ya.y,tangentX:Qa.x,tangentY:Qa.y}}};var Hr=function(ya,Qa,La,Xa){return new H(ya,Qa,La,Xa)};H.prototype.getTotalLength=function(){return Math.sqrt(Math.pow((this||yc).x0-(this||yc).x1,2)+Math.pow((this||yc).y0-(this||yc).y1,2))};H.prototype.getPointAtLength=
function(ya){ya/=Math.sqrt(Math.pow((this||yc).x0-(this||yc).x1,2)+Math.pow((this||yc).y0-(this||yc).y1,2));return{x:(this||yc).x0+((this||yc).x1-(this||yc).x0)*ya,y:(this||yc).y0+((this||yc).y1-(this||yc).y0)*ya}};H.prototype.getTangentAtLength=function(){var ya=Math.sqrt(((this||yc).x1-(this||yc).x0)*((this||yc).x1-(this||yc).x0)+((this||yc).y1-(this||yc).y0)*((this||yc).y1-(this||yc).y0));return{x:((this||yc).x1-(this||yc).x0)/ya,y:((this||yc).y1-(this||yc).y0)/ya}};H.prototype.getPropertiesAtLength=
function(ya){ya=this.getPointAtLength(ya);var Qa=this.getTangentAtLength();return{x:ya.x,y:ya.y,tangentX:Qa.x,tangentY:Qa.y}};var cqa=function(ya){function Qa(bb){if(!bb)return null;var Xb;bb=qqa(bb);for(var Lb=[0,0],Jc=[0,0],Ob=0;Ob<bb.length;Ob++)"M"===bb[Ob][0]?(Lb=[bb[Ob][1],bb[Ob][2]],ub.push(null)):"m"===bb[Ob][0]?(Lb=[bb[Ob][1]+Lb[0],bb[Ob][2]+Lb[1]],ub.push(null)):"L"===bb[Ob][0]?(La+=Math.sqrt(Math.pow(Lb[0]-bb[Ob][1],2)+Math.pow(Lb[1]-bb[Ob][2],2)),ub.push(new Hr(Lb[0],bb[Ob][1],Lb[1],bb[Ob][2])),
Lb=[bb[Ob][1],bb[Ob][2]]):"l"===bb[Ob][0]?(La+=Math.sqrt(Math.pow(bb[Ob][1],2)+Math.pow(bb[Ob][2],2)),ub.push(new Hr(Lb[0],bb[Ob][1]+Lb[0],Lb[1],bb[Ob][2]+Lb[1])),Lb=[bb[Ob][1]+Lb[0],bb[Ob][2]+Lb[1]]):"H"===bb[Ob][0]?(La+=Math.abs(Lb[0]-bb[Ob][1]),ub.push(new Hr(Lb[0],bb[Ob][1],Lb[1],Lb[1])),Lb[0]=bb[Ob][1]):"h"===bb[Ob][0]?(La+=Math.abs(bb[Ob][1]),ub.push(new Hr(Lb[0],Lb[0]+bb[Ob][1],Lb[1],Lb[1])),Lb[0]=bb[Ob][1]+Lb[0]):"V"===bb[Ob][0]?(La+=Math.abs(Lb[1]-bb[Ob][1]),ub.push(new Hr(Lb[0],Lb[0],Lb[1],
bb[Ob][1])),Lb[1]=bb[Ob][1]):"v"===bb[Ob][0]?(La+=Math.abs(bb[Ob][1]),ub.push(new Hr(Lb[0],Lb[0],Lb[1],Lb[1]+bb[Ob][1])),Lb[1]=bb[Ob][1]+Lb[1]):"z"===bb[Ob][0]||"Z"===bb[Ob][0]?(La+=Math.sqrt(Math.pow(bb[0][1]-Lb[0],2)+Math.pow(bb[0][2]-Lb[1],2)),ub.push(new Hr(Lb[0],bb[0][1],Lb[1],bb[0][2])),Lb=[bb[0][1],bb[0][2]]):"C"===bb[Ob][0]?(Xb=new np(Lb[0],Lb[1],bb[Ob][1],bb[Ob][2],bb[Ob][3],bb[Ob][4],bb[Ob][5],bb[Ob][6]),La+=Xb.getTotalLength(),Lb=[bb[Ob][5],bb[Ob][6]],ub.push(Xb)):"c"===bb[Ob][0]?(Xb=new np(Lb[0],
Lb[1],Lb[0]+bb[Ob][1],Lb[1]+bb[Ob][2],Lb[0]+bb[Ob][3],Lb[1]+bb[Ob][4],Lb[0]+bb[Ob][5],Lb[1]+bb[Ob][6]),La+=Xb.getTotalLength(),Lb=[bb[Ob][5]+Lb[0],bb[Ob][6]+Lb[1]],ub.push(Xb)):"S"===bb[Ob][0]?(Xb=0<Ob&&-1<["C","c","S","s"].indexOf(bb[Ob-1][0])?new np(Lb[0],Lb[1],2*Lb[0]-bb[Ob-1][bb[Ob-1].length-4],2*Lb[1]-bb[Ob-1][bb[Ob-1].length-3],bb[Ob][1],bb[Ob][2],bb[Ob][3],bb[Ob][4]):new np(Lb[0],Lb[1],Lb[0],Lb[1],bb[Ob][1],bb[Ob][2],bb[Ob][3],bb[Ob][4]),La+=Xb.getTotalLength(),Lb=[bb[Ob][3],bb[Ob][4]],ub.push(Xb)):
"s"===bb[Ob][0]?(Xb=0<Ob&&-1<["C","c","S","s"].indexOf(bb[Ob-1][0])?new np(Lb[0],Lb[1],Lb[0]+Xb.d.x-Xb.c.x,Lb[1]+Xb.d.y-Xb.c.y,Lb[0]+bb[Ob][1],Lb[1]+bb[Ob][2],Lb[0]+bb[Ob][3],Lb[1]+bb[Ob][4]):new np(Lb[0],Lb[1],Lb[0],Lb[1],Lb[0]+bb[Ob][1],Lb[1]+bb[Ob][2],Lb[0]+bb[Ob][3],Lb[1]+bb[Ob][4]),La+=Xb.getTotalLength(),Lb=[bb[Ob][3]+Lb[0],bb[Ob][4]+Lb[1]],ub.push(Xb)):"Q"===bb[Ob][0]?(Xb=new np(Lb[0],Lb[1],bb[Ob][1],bb[Ob][2],bb[Ob][3],bb[Ob][4]),La+=Xb.getTotalLength(),ub.push(Xb),Lb=[bb[Ob][3],bb[Ob][4]],
Jc=[bb[Ob][1],bb[Ob][2]]):"q"===bb[Ob][0]?(Xb=new np(Lb[0],Lb[1],Lb[0]+bb[Ob][1],Lb[1]+bb[Ob][2],Lb[0]+bb[Ob][3],Lb[1]+bb[Ob][4]),La+=Xb.getTotalLength(),Jc=[Lb[0]+bb[Ob][1],Lb[1]+bb[Ob][2]],Lb=[bb[Ob][3]+Lb[0],bb[Ob][4]+Lb[1]],ub.push(Xb)):"T"===bb[Ob][0]?(Xb=0<Ob&&-1<["Q","q","T","t"].indexOf(bb[Ob-1][0])?new np(Lb[0],Lb[1],2*Lb[0]-Jc[0],2*Lb[1]-Jc[1],bb[Ob][1],bb[Ob][2]):new Hr(Lb[0],bb[Ob][1],Lb[1],bb[Ob][2]),ub.push(Xb),La+=Xb.getTotalLength(),Jc=[2*Lb[0]-Jc[0],2*Lb[1]-Jc[1]],Lb=[bb[Ob][1],bb[Ob][2]]):
"t"===bb[Ob][0]?(Xb=0<Ob&&-1<["Q","q","T","t"].indexOf(bb[Ob-1][0])?new np(Lb[0],Lb[1],2*Lb[0]-Jc[0],2*Lb[1]-Jc[1],Lb[0]+bb[Ob][1],Lb[1]+bb[Ob][2]):new Hr(Lb[0],Lb[0]+bb[Ob][1],Lb[1],Lb[1]+bb[Ob][2]),La+=Xb.getTotalLength(),Jc=[2*Lb[0]-Jc[0],2*Lb[1]-Jc[1]],Lb=[bb[Ob][1]+Lb[0],bb[Ob][2]+Lb[0]],ub.push(Xb)):"A"===bb[Ob][0]?(Xb=new o$(Lb[0],Lb[1],bb[Ob][1],bb[Ob][2],bb[Ob][3],bb[Ob][4],bb[Ob][5],bb[Ob][6],bb[Ob][7]),La+=Xb.getTotalLength(),Lb=[bb[Ob][6],bb[Ob][7]],ub.push(Xb)):"a"===bb[Ob][0]&&(Xb=new o$(Lb[0],
Lb[1],bb[Ob][1],bb[Ob][2],bb[Ob][3],bb[Ob][4],bb[Ob][5],Lb[0]+bb[Ob][6],Lb[1]+bb[Ob][7]),La+=Xb.getTotalLength(),Lb=[Lb[0]+bb[Ob][6],Lb[1]+bb[Ob][7]],ub.push(Xb)),Xa.push(La);return Qa}var La=0,Xa=[],ub=[];Qa.getTotalLength=function(){return La};Qa.getPointAtLength=function(bb){bb=cc(bb);return ub[bb.i].getPointAtLength(bb.fraction)};Qa.getTangentAtLength=function(bb){bb=cc(bb);return ub[bb.i].getTangentAtLength(bb.fraction)};Qa.getPropertiesAtLength=function(bb){bb=cc(bb);return ub[bb.i].getPropertiesAtLength(bb.fraction)};
var cc=function(bb){0>bb?bb=0:bb>La&&(bb=La);for(var Xb=Xa.length-1;Xa[Xb]>=bb&&0<Xa[Xb];)Xb--;return Xb++,{fraction:bb-Xa[Xb-1],i:Xb}};return Qa(ya)},KS='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n',dqa=function(ya,Qa){for(var La,Xa,ub,cc=ya.length,bb=1/0,Xb=0;Xb<cc;Xb++)!function(Lb){Xa=0;Qa.forEach(function(Jc,
Ob){Jc=F(ya[(Lb+Ob)%cc],Jc);Xa+=Jc*Jc});Xa<bb&&(bb=Xa,La=Lb)}(Xb);La&&(ub=ya.splice(0,La),ya.splice.apply(ya,[ya.length,0].concat(ub)))},kqa=Va;Va.deviation=function(ya,Qa,La,Xa){var ub=Qa&&Qa.length,cc=Math.abs(Lc(ya,0,ub?Qa[0]*La:ya.length,La));if(ub){ub=0;for(var bb=Qa.length;ub<bb;ub++)cc-=Math.abs(Lc(ya,Qa[ub]*La,ub<bb-1?Qa[ub+1]*La:ya.length,La))}for(ub=Qa=0;ub<Xa.length;ub+=3){bb=Xa[ub]*La;var Xb=Xa[ub+1]*La,Lb=Xa[ub+2]*La;Qa+=Math.abs((ya[bb]-ya[Lb])*(ya[Xb+1]-ya[bb+1])-(ya[bb]-ya[Xb])*(ya[Lb+
1]-ya[bb+1]))}return 0===cc&&0===Qa?0:Math.abs((Qa-cc)/cc)};Va.flatten=function(ya){for(var Qa=ya[0][0].length,La={vertices:[],holes:[],dimensions:Qa},Xa=0,ub=0;ub<ya.length;ub++){for(var cc=0;cc<ya[ub].length;cc++)for(var bb=0;bb<Qa;bb++)La.vertices.push(ya[ub][cc][bb]);0<ub&&(Xa+=ya[ub-1].length,La.holes.push(Xa))}return La};var rqa=function(ya){return ya},gqa=function(ya){if(null==ya)return rqa;var Qa,La,Xa=ya.scale[0],ub=ya.scale[1],cc=ya.translate[0],bb=ya.translate[1];return function(Xb,Lb){Lb||
(Qa=La=0);Lb=2;var Jc=Xb.length,Ob=Array(Jc);Ob[0]=(Qa+=Xb[0])*Xa+cc;for(Ob[1]=(La+=Xb[1])*ub+bb;Lb<Jc;)Ob[Lb]=Xb[Lb],++Lb;return Ob}},jqa=function(ya,Qa){return"GeometryCollection"===Qa.type?{type:"FeatureCollection",features:Qa.geometries.map(function(La){return Xc(ya,La)})}:Xc(ya,Qa)},hqa=function(ya,Qa){function La(Jc){var Ob,Id=ya.arcs[0>Jc?~Jc:Jc],be=Id[0];return ya.transform?(Ob=[0,0],Id.forEach(function(We){Ob[0]+=We[0];Ob[1]+=We[1]})):Ob=Id[Id.length-1],0>Jc?[Ob,be]:[be,Ob]}function Xa(Jc,
Ob){for(var Id in Jc){var be=Jc[Id];delete Ob[be.start];delete be.start;delete be.end;be.forEach(function(We){ub[0>We?~We:We]=1});Xb.push(be)}}var ub={},cc={},bb={},Xb=[],Lb=-1;return Qa.forEach(function(Jc,Ob){var Id,be=ya.arcs[0>Jc?~Jc:Jc];3>be.length&&!be[1][0]&&!be[1][1]&&(Id=Qa[++Lb],Qa[Lb]=Jc,Qa[Ob]=Id)}),Qa.forEach(function(Jc){var Ob=La(Jc);var Id=Ob[0],be=Ob[1];(Ob=bb[Id])?(delete bb[Ob.end],Ob.push(Jc),Ob.end=be,Jc=cc[be])?(delete cc[Jc.start],Id=Jc===Ob?Ob:Ob.concat(Jc),cc[Id.start=Ob.start]=
bb[Id.end=Jc.end]=Id):cc[Ob.start]=bb[Ob.end]=Ob:(Ob=cc[be])?(delete cc[Ob.start],Ob.unshift(Jc),Ob.start=Id,Jc=bb[Id])?(delete bb[Jc.end],Id=Jc===Ob?Ob:Jc.concat(Ob),cc[Id.start=Jc.start]=bb[Id.end=Ob.end]=Id):cc[Ob.start]=bb[Ob.end]=Ob:(Ob=[Jc],cc[Ob.start=Id]=bb[Ob.end=be]=Ob)}),Xa(bb,cc),Xa(cc,bb),Qa.forEach(function(Jc){ub[0>Jc?~Jc:Jc]||Xb.push([Jc])}),Xb},p$=function(ya,Qa){for(var La=0,Xa=ya.length;La<Xa;){var ub=La+Xa>>>1;ya[ub]<Qa?La=ub+1:Xa=ub}return La},iqa=function(ya){function Qa(Xe,
re){Xe.forEach(function(Ye){0>Ye&&(Ye=~Ye);var Tm=ub[Ye];Tm?Tm.push(re):ub[Ye]=[re]})}function La(Xe,re){Xe.forEach(function(Ye){Qa(Ye,re)})}function Xa(Xe,re){"GeometryCollection"===Xe.type?Xe.geometries.forEach(function(Ye){Xa(Ye,re)}):Xe.type in bb&&bb[Xe.type](Xe.arcs,re)}var ub={},cc=ya.map(function(){return[]}),bb={LineString:Qa,MultiLineString:La,Polygon:La,MultiPolygon:function(Xe,re){Xe.forEach(function(Ye){La(Ye,re)})}};ya.forEach(Xa);for(var Xb in ub){ya=ub[Xb];for(var Lb=ya.length,Jc=
0;Jc<Lb;++Jc)for(var Ob=Jc+1;Ob<Lb;++Ob){var Id,be=ya[Jc],We=ya[Ob];(Id=cc[be])[Xb=p$(Id,We)]!==We&&Id.splice(Xb,0,We);(Id=cc[We])[Xb=p$(Id,be)]!==be&&Id.splice(Xb,0,be)}}return cc},l$=function(ya,Qa){return ya<Qa?-1:ya>Qa?1:ya>=Qa?0:NaN},m$=function(ya){return 1===ya.length&&(ya=Wc(ya)),{left:function(Qa,La,Xa,ub){null==Xa&&(Xa=0);for(null==ub&&(ub=Qa.length);Xa<ub;){var cc=Xa+ub>>>1;0>ya(Qa[cc],La)?Xa=cc+1:ub=cc}return Xa},right:function(Qa,La,Xa,ub){null==Xa&&(Xa=0);for(null==ub&&(ub=Qa.length);Xa<
ub;){var cc=Xa+ub>>>1;0<ya(Qa[cc],La)?ub=cc:Xa=cc+1}return Xa}}};m$(l$);var lqa=function(ya,Qa){return Yc(ld(od(ya),ya),Qa)},mqa=function(ya,Qa){if(8<ya.length)return ya.map(function(Xa,ub){return ub});var La=ya.map(function(Xa){return Qa.map(function(ub){ub=F(wa(Xa),wa(ub));return ub*ub})});return Vc(ya,Qa,La)};f.interpolate=function(ya,Qa,La){void 0===La&&(La={});var Xa=La.maxSegmentLength;void 0===Xa&&(Xa=10);La=La.string;void 0===La&&(La=!0);var ub=da(ya,Xa);Xa=da(Qa,Xa);var cc=Oa(ub,Xa,La);return!La||
"string"!=typeof ya&&"string"!=typeof Qa?cc:function(bb){return 1E-4>bb&&"string"==typeof ya?ya:1E-4>1-bb&&"string"==typeof Qa?Qa:cc(bb)}};f.separate=cd;f.combine=function(ya,Qa,La){void 0===La&&(La={});var Xa=La.maxSegmentLength;void 0===Xa&&(Xa=10);var ub=La.string;void 0===ub&&(ub=!0);La=La.single;void 0===La&&(La=!1);var cc=cd(Qa,ya,{maxSegmentLength:Xa,string:ub,single:La});return La?function(bb){return cc(1-bb)}:cc.map(function(bb){return function(Xb){return bb(1-Xb)}})};f.interpolateAll=function(ya,
Qa,La){void 0===La&&(La={});var Xa=La.maxSegmentLength;void 0===Xa&&(Xa=10);var ub=La.string;void 0===ub&&(ub=!0);La=La.single;if(void 0===La&&(La=!1),!Array.isArray(ya)||!Array.isArray(Qa)||ya.length!==Qa.length||!ya.length)throw new TypeError("flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).");var cc,bb,Xb=function(Jc){return da(Jc,Xa)},
Lb=ya.map(Xb);Xb=Qa.map(Xb);return La?(ya.every(function(Jc){return"string"==typeof Jc})&&(cc=ya.slice(0)),Qa.every(function(Jc){return"string"==typeof Jc})&&(bb=Qa.slice(0))):(cc=ya.slice(0),bb=Qa.slice(0)),W(Lb,Xb,{string:ub,single:La,t0:cc,t1:bb,match:!1})};f.splitPathString=function(ya){return Ga((new k$(ya)).abs())};f.toPathString=na;f.fromCircle=af;f.toCircle=function(ya,Qa,La,Xa,ub){var cc=af(Qa,La,Xa,ya,ub);return function(bb){return cc(1-bb)}};f.fromRect=zc;f.toRect=function(ya,Qa,La,Xa,
ub,cc){var bb=zc(Qa,La,Xa,ub,ya,cc);return function(Xb){return bb(1-Xb)}};Object.defineProperty(f,"__esModule",{value:!0})});var sqa={},tqa="function"===typeof Float32Array,uqa=sqa=function(f,l,p,b){if(!(0<=f&&1>=f&&0<=p&&1>=p))throw Error("bezier x values must be in [0, 1] range");if(f===l&&p===b)return Yea;for(var d=tqa?new Float32Array(11):Array(11),h=0;11>h;++h)d[h]=VE(.1*h,f,p);return function(a){if(0===a)return 0;if(1===a)return 1;for(var e=0,n=1;10!==n&&d[n]<=a;++n)e+=.1;--n;n=e+(a-d[n])/(d[n+
1]-d[n])*.1;var q=3*(1-3*p+3*f)*n*n+2*(3*p-6*f)*n+3*f;if(.001<=q){for(e=0;4>e;++e){q=3*(1-3*p+3*f)*n*n+2*(3*p-6*f)*n+3*f;if(0===q)break;var r=VE(n,f,p)-a;n-=r/q}a=n}else if(0===q)a=n;else{n=e;e+=.1;var v=0;do r=n+(e-n)/2,q=VE(r,f,p)-a,0<q?e=r:n=r;while(1E-7<Math.abs(q)&&10>++v);a=r}return VE(a,l,b)}},nc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;!function(){var f={},l={};!function(p,b){function d(){(this||nc)._delay=0;(this||nc)._endDelay=0;(this||nc)._fill="none";
(this||nc)._iterationStart=0;(this||nc)._iterations=1;(this||nc)._duration=0;(this||nc)._playbackRate=1;(this||nc)._direction="normal";(this||nc)._easing="linear";(this||nc)._easingFunction=E}function h(){return p.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function a(L,U,T){var Y=new d;return U&&(Y.fill="both",Y.duration="auto"),"number"!=typeof L||isNaN(L)?void 0!==L&&Object.getOwnPropertyNames(L).forEach(function(wa){"auto"==L[wa]||("number"==
typeof Y[wa]||"duration"==wa)&&("number"!=typeof L[wa]||isNaN(L[wa]))||"fill"==wa&&-1==y.indexOf(L[wa])||"direction"==wa&&-1==D.indexOf(L[wa])||"playbackRate"==wa&&1!==L[wa]&&p.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead.")||(Y[wa]=L[wa])}):Y.duration=L,Y}function e(L,U,T,Y){return 0>L||1<L||0>T||1<T?E:function(wa){if(0>=wa){var Ga=0;return 0<L?Ga=U/L:!U&&0<T&&(Ga=Y/T),Ga*wa}if(1<=wa)return Ga=0,1>T?Ga=(Y-1)/(T-1):1==T&&1>L&&(Ga=(U-1)/(L-1)),
1+Ga*(wa-1);Ga=0;for(var na=1;Ga<na;){var ea=(Ga+na)/2,da=3*L*(1-ea)*(1-ea)*ea+3*T*(1-ea)*ea*ea+ea*ea*ea;if(1E-5>Math.abs(wa-da))break;da<wa?Ga=ea:na=ea}return 3*U*(1-ea)*(1-ea)*ea+3*Y*(1-ea)*ea*ea+ea*ea*ea}}function n(L,U){return function(T){if(1<=T)return 1;var Y=1/L;return(T+=U*Y)-T%Y}}function q(L){aa||(aa=document.createElement("div").style);aa.animationTimingFunction="";aa.animationTimingFunction=L;var U=aa.animationTimingFunction;if(""==U&&h())throw new TypeError(L+" is not a valid value for easing");
return U}function r(L){if("linear"==L)return E;var U=m.exec(L);return U?e.apply(this||nc,U.slice(1).map(Number)):(U=t.exec(L))?n(Number(U[1]),P):(U=u.exec(L))?n(Number(U[1]),{start:I,middle:K,end:P}[U[2]]):N[L]||E}function v(L,U,T){if(null==U)return B;var Y=T.delay+L+T.endDelay;return U<Math.min(T.delay,Y)?A:U>=Math.min(T.delay+L,Y)?H:F}var y=["backwards","forwards","both","none"],D=["reverse","alternate","alternate-reverse"],E=function(L){return L};d.prototype={_setMember:function(L,U){(this||nc)["_"+
L]=U;(this||nc)._effect&&((this||nc)._effect._timingInput[L]=U,(this||nc)._effect._timing=p.normalizeTimingInput((this||nc)._effect._timingInput),(this||nc)._effect.activeDuration=p.calculateActiveDuration((this||nc)._effect._timing),(this||nc)._effect._animation&&(this||nc)._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return(this||nc)._playbackRate},set delay(L){this._setMember("delay",L)},get delay(){return(this||nc)._delay},set endDelay(L){this._setMember("endDelay",L)},
get endDelay(){return(this||nc)._endDelay},set fill(L){this._setMember("fill",L)},get fill(){return(this||nc)._fill},set iterationStart(L){if((isNaN(L)||0>L)&&h())throw new TypeError("iterationStart must be a non-negative number, received: "+L);this._setMember("iterationStart",L)},get iterationStart(){return(this||nc)._iterationStart},set duration(L){if("auto"!=L&&(isNaN(L)||0>L)&&h())throw new TypeError("duration must be non-negative or auto, received: "+L);this._setMember("duration",L)},get duration(){return(this||
nc)._duration},set direction(L){this._setMember("direction",L)},get direction(){return(this||nc)._direction},set easing(L){(this||nc)._easingFunction=r(q(L));this._setMember("easing",L)},get easing(){return(this||nc)._easing},set iterations(L){if((isNaN(L)||0>L)&&h())throw new TypeError("iterations must be non-negative, received: "+L);this._setMember("iterations",L)},get iterations(){return(this||nc)._iterations}};var I=1,K=.5,P=0,N={ease:e(.25,.1,.25,1),"ease-in":e(.42,0,1,1),"ease-out":e(0,0,.58,
1),"ease-in-out":e(.42,0,.58,1),"step-start":n(1,I),"step-middle":n(1,K),"step-end":n(1,P)},aa=null,m=/cubic-bezier\(\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*\)/,t=/steps\(\s*(\d+)\s*\)/,u=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,B=0,A=1,H=2,F=3;p.cloneTimingInput=function(L){if("number"==typeof L)return L;var U={},T;for(T in L)U[T]=L[T];return U};p.makeTiming=a;p.numericTimingToObject=function(L){return"number"==typeof L&&
(L=isNaN(L)?{duration:0}:{duration:L}),L};p.normalizeTimingInput=function(L,U){return L=p.numericTimingToObject(L),a(L,U)};p.calculateActiveDuration=function(L){return Math.abs((0===L.duration||0===L.iterations?0:L.duration*L.iterations)/L.playbackRate)};p.calculateIterationProgress=function(L,U,T){var Y=v(L,U,T);a:{var wa=T.fill;switch(Y){case A:L="backwards"==wa||"both"==wa?0:null;break a;case F:L=U-T.delay;break a;case H:L="forwards"==wa||"both"==wa?L:null;break a;case B:L=null;break a}L=void 0}if(null===
L)return null;U=T.duration;wa=T.iterationStart;U=(0===U?Y!==A&&(wa+=T.iterations):wa+=L/U,wa);wa=U===1/0?T.iterationStart%1:U%1;L=(0!==wa||Y!==H||0===T.iterations||0===L&&0!==T.duration||(wa=1),wa);wa=Y===H&&T.iterations===1/0?1/0:1===L?Math.floor(U)-1:Math.floor(U);U=Y=T.direction;"normal"!==Y&&"reverse"!==Y&&("alternate-reverse"===Y&&(wa+=1),U="normal",wa!==1/0&&0!=wa%2&&(U="reverse"));return T._easingFunction("normal"===U?L:1-L)};p.calculatePhase=v;p.normalizeEasing=q;p.parseEasingFunction=r}(f);
(function(p,b){function d(n){var q=[],r;for(r in n)if(!(r in["easing","offset","composite"])){var v=n[r];Array.isArray(v)||(v=[v]);for(var y,D=v.length,E=0;E<D;E++)y={},y.offset="offset"in n?n.offset:1==D?1:E/(D-1),"easing"in n&&(y.easing=n.easing),"composite"in n&&(y.composite=n.composite),y[r]=v[E],q.push(y)}return q.sort(function(I,K){return I.offset-K.offset}),q}var h={background:"backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundAttachment backgroundOrigin backgroundClip backgroundColor".split(" "),
border:"borderTopColor borderTopStyle borderTopWidth borderRightColor borderRightStyle borderRightWidth borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth".split(" "),borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius",
"borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:"fontFamily fontSize fontStyle fontVariant fontWeight lineHeight".split(" "),margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle",
"outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},a=document.createElementNS("http://www.w3.org/1999/xhtml","div");b={thin:"1px",medium:"3px",thick:"5px"};var e={borderBottomWidth:b,borderLeftWidth:b,borderRightWidth:b,borderTopWidth:b,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:b,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};
p.convertToArrayForm=d;p.normalizeKeyframes=function(n){function q(){var E=r.length;null==r[E-1].offset&&(r[E-1].offset=1);1<E&&null==r[0].offset&&(r[0].offset=0);for(var I=0,K=r[0].offset,P=1;P<E;P++){var N=r[P].offset;if(null!=N){for(var aa=1;aa<P-I;aa++)r[I+aa].offset=K+(N-K)*aa/(P-I);I=P;K=N}}}if(null==n)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&n[Symbol.iterator]&&(n=Array.from(n));Array.isArray(n)||(n=d(n));var r=n.map(function(E){var I={},K;for(K in E){var P=E[K];if("offset"==
K){if(null!=P){if(P=Number(P),!isFinite(P))throw new TypeError("Keyframe offsets must be numbers.");if(0>P||1<P)throw new TypeError("Keyframe offsets must be between 0 and 1.");}}else if("composite"==K){if("add"==P||"accumulate"==P)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};if("replace"!=P)throw new TypeError("Invalid composite mode "+P+".");}else P="easing"==K?p.normalizeEasing(P):""+P;var N=void 0,aa=K,m=P;P=I;var t=aa;if("display"!==
t&&0!==t.lastIndexOf("animation",0)&&0!==t.lastIndexOf("transition",0))if(t=h[aa])for(N in a.style[aa]=m,t)aa=t[N],m=a.style[aa],P[aa]=aa in e?e[aa][m]||m:m;else P[aa]=aa in e?e[aa][m]||m:m}return void 0==I.offset&&(I.offset=null),void 0==I.easing&&(I.easing="linear"),I});n=!0;for(var v=-1/0,y=0;y<r.length;y++){var D=r[y].offset;if(null!=D){if(D<v)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");v=D}else n=!1}return r=r.filter(function(E){return 0<=E.offset&&
1>=E.offset}),n||q(),r}})(f);(function(p){var b={};p.isDeprecated=function(d,h,a,e){e=e?"are":"is";var n=new Date;h=new Date(h);return h.setMonth(h.getMonth()+3),!(n<h&&(d in b||console.warn("Web Animations: "+d+" "+e+" deprecated and will stop working on "+h.toDateString()+". "+a),b[d]=!0,1))};p.deprecated=function(d,h,a,e){var n=e?"are":"is";if(p.isDeprecated(d,h,a,e))throw Error(d+" "+n+" no longer supported. "+a);}})(f);(function(){if(document.documentElement.animate){var p=document.documentElement.animate([],
0),b=!0;if(p&&(b=!1,"play currentTime pause reverse playbackRate cancel finish startTime playState".split(" ").forEach(function(d){void 0===p[d]&&(b=!0)})),!b)return}!function(d,h,a){function e(q){for(var r={},v=0;v<q.length;v++)for(var y in q[v])if("offset"!=y&&"easing"!=y&&"composite"!=y){var D={offset:q[v].offset,easing:q[v].easing,value:q[v][y]};r[y]=r[y]||[];r[y].push(D)}for(var E in r)if(q=r[E],0!=q[0].offset||1!=q[q.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",
message:"Partial keyframes are not supported"};return r}function n(q){var r=[],v;for(v in q)for(var y=q[v],D=0;D<y.length-1;D++){var E=D,I=D+1,K=y[E].offset,P=y[I].offset,N=K,aa=P;0==D&&(N=-1/0,0==P&&(I=E));D==y.length-2&&(aa=1/0,1==K&&(E=I));r.push({applyFrom:N,applyTo:aa,startOffset:y[E].offset,endOffset:y[I].offset,easingFunction:d.parseEasingFunction(y[E].easing),property:v,interpolation:h.propertyInterpolation(v,y[E].value,y[I].value)})}return r.sort(function(m,t){return m.startOffset-t.startOffset}),
r}h.convertEffectInput=function(q){q=d.normalizeKeyframes(q);var r=e(q),v=n(r);return function(y,D){if(null!=D)v.filter(function(I){return D>=I.applyFrom&&D<I.applyTo}).forEach(function(I){var K=D-I.startOffset,P=I.endOffset-I.startOffset;K=0==P?0:I.easingFunction(K/P);h.apply(y,I.property,I.interpolation(K))});else for(var E in r)"offset"!=E&&"easing"!=E&&"composite"!=E&&h.clear(y,E)}}}(f,l);(function(d,h,a){function e(r){return r.replace(/-(.)/g,function(v,y){return y.toUpperCase()})}var n={};h.addPropertiesHandler=
function(r,v,y){for(var D=0;D<y.length;D++){var E=r,I=v,K=e(y[D]);n[K]=n[K]||[];n[K].push([E,I])}};var q={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",
bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",
textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};h.propertyInterpolation=function(r,v,y){var D=r;/-/.test(r)&&!d.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(D=e(r));"initial"!=v&&"initial"!=y||("initial"==v&&(v=q[D]),"initial"==y&&(y=q[D]));r=v==y?[]:n[D];for(D=0;r&&D<r.length;D++){var E=r[D][0](v),I=r[D][0](y);if(void 0!==E&&void 0!==I&&(E=
r[D][1](E,I))){var K=h.Interpolation.apply(null,E);return function(P){return 0==P?v:1==P?y:K(P)}}}return h.Interpolation(!1,!0,function(P){return P?y:v})}})(f,l);(function(d,h,a){function e(n){var q=d.calculateActiveDuration(n),r=function(v){return d.calculateIterationProgress(q,v,n)};return r._totalDuration=n.delay+q+n.endDelay,r}h.KeyframeEffect=function(n,q,r,v){var y,D=e(d.normalizeTimingInput(r)),E=h.convertEffectInput(q);q=function(){E(n,y)};return q._update=function(I){return null!==(y=D(I))},
q._clear=function(){E(n,null)},q._hasSameTarget=function(I){return n===I},q._target=n,q._totalDuration=D._totalDuration,q._id=v,q}})(f,l);(function(d,h){function a(E,I,K){K.enumerable=!0;K.configurable=!0;Object.defineProperty(E,I,K)}function e(E){(this||nc)._element=E;(this||nc)._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style;(this||nc)._style=E.style;(this||nc)._length=0;(this||nc)._isAnimatedProperty={};var I=window;E=!(!E.namespaceURI||-1==E.namespaceURI.indexOf("/svg"))&&
(q in I||(I[q]=/Trident|MSIE|IEMobile|Edge|Android 4/i.test(I.navigator.userAgent)),I[q]);(this||nc)._updateSvgTransformAttr=E;(this||nc)._savedTransformAttr=null;for(E=0;E<(this||nc)._style.length;E++)I=(this||nc)._style[E],(this||nc)._surrogateStyle[I]=(this||nc)._style[I];this._updateIndices()}function n(E){if(!E._webAnimationsPatchedStyle){var I=new e(E);try{a(E,"style",{get:function(){return I}})}catch(K){E.style._set=function(P,N){E.style[P]=N},E.style._clear=function(P){E.style[P]=""}}E._webAnimationsPatchedStyle=
E.style}}var q="_webAnimationsUpdateSvgTransformAttr";h={cssText:1,length:1,parentRule:1};var r={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},v={removeProperty:1,setProperty:1};e.prototype={get cssText(){return(this||nc)._surrogateStyle.cssText},set cssText(E){for(var I={},K=0;K<(this||nc)._surrogateStyle.length;K++)I[(this||nc)._surrogateStyle[K]]=!0;(this||nc)._surrogateStyle.cssText=E;this._updateIndices();for(K=0;K<(this||nc)._surrogateStyle.length;K++)I[(this||
nc)._surrogateStyle[K]]=!0;for(var P in I)(this||nc)._isAnimatedProperty[P]||(this||nc)._style.setProperty(P,(this||nc)._surrogateStyle.getPropertyValue(P))},get length(){return(this||nc)._surrogateStyle.length},get parentRule(){return(this||nc)._style.parentRule},_updateIndices:function(){for(;(this||nc)._length<(this||nc)._surrogateStyle.length;)Object.defineProperty(this||nc,(this||nc)._length,{configurable:!0,enumerable:!1,get:function(E){return function(){return(this||nc)._surrogateStyle[E]}}((this||
nc)._length)}),(this||nc)._length++;for(;(this||nc)._length>(this||nc)._surrogateStyle.length;)(this||nc)._length--,Object.defineProperty(this||nc,(this||nc)._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(E,I){(this||nc)._style[E]=I;(this||nc)._isAnimatedProperty[E]=!0;(this||nc)._updateSvgTransformAttr&&"transform"==d.unprefixedPropertyName(E)&&(null==(this||nc)._savedTransformAttr&&((this||nc)._savedTransformAttr=(this||nc)._element.getAttribute("transform")),(this||nc)._element.setAttribute("transform",
d.transformToSvgMatrix(I)))},_clear:function(E){(this||nc)._style[E]=(this||nc)._surrogateStyle[E];(this||nc)._updateSvgTransformAttr&&"transform"==d.unprefixedPropertyName(E)&&((this||nc)._savedTransformAttr?(this||nc)._element.setAttribute("transform",(this||nc)._savedTransformAttr):(this||nc)._element.removeAttribute("transform"),(this||nc)._savedTransformAttr=null);delete (this||nc)._isAnimatedProperty[E]}};for(var y in r)e.prototype[y]=function(E,I){return function(){var K=(this||nc)._surrogateStyle[E].apply((this||
nc)._surrogateStyle,arguments);return I&&((this||nc)._isAnimatedProperty[arguments[0]]||(this||nc)._style[E].apply((this||nc)._style,arguments),this._updateIndices()),K}}(y,y in v);for(var D in document.documentElement.style)D in h||D in r||function(E){a(e.prototype,E,{get:function(){return(this||nc)._surrogateStyle[E]},set:function(I){(this||nc)._surrogateStyle[E]=I;this._updateIndices();(this||nc)._isAnimatedProperty[E]||((this||nc)._style[E]=I)}})}(D);d.apply=function(E,I,K){n(E);E.style._set(d.propertyName(I),
K)};d.clear=function(E,I){E._webAnimationsPatchedStyle&&E.style._clear(d.propertyName(I))}})(l);(function(d){window.Element.prototype.animate=function(h,a){var e="";return a&&a.id&&(e=a.id),d.timeline._play(d.KeyframeEffect(this||nc,h,a,e))}})(l);(function(d,h){function a(e,n,q){if("number"==typeof e&&"number"==typeof n)return e*(1-q)+n*q;if("boolean"==typeof e&&"boolean"==typeof n)return.5>q?e:n;if(e.length==n.length){for(var r=[],v=0;v<e.length;v++)r.push(a(e[v],n[v],q));return r}throw"Mismatched interpolation arguments "+
e+":"+n;}d.Interpolation=function(e,n,q){return function(r){return q(a(e,n,r))}}})(l);(function(d,h){h=function(){function a(e,n){for(var q=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;4>r;r++)for(var v=0;4>v;v++)for(var y=0;4>y;y++)q[r][v]+=n[r][y]*e[y][v];return q}return function(e,n,q,r,v){for(var y=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],D=0;4>D;D++)y[D][3]=v[D];for(D=0;3>D;D++)for(v=0;3>v;v++)y[3][D]+=e[v]*y[v][D];e=r[0];D=r[1];v=r[2];r=r[3];var E=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];
E[0][0]=1-2*(D*D+v*v);E[0][1]=2*(e*D-v*r);E[0][2]=2*(e*v+D*r);E[1][0]=2*(e*D+v*r);E[1][1]=1-2*(e*e+v*v);E[1][2]=2*(D*v-e*r);E[2][0]=2*(e*v-D*r);E[2][1]=2*(D*v+e*r);E[2][2]=1-2*(e*e+D*D);y=a(y,E);r=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];q[2]&&(r[2][1]=q[2],y=a(y,r));q[1]&&(r[2][1]=0,r[2][0]=q[0],y=a(y,r));q[0]&&(r[2][0]=0,r[1][0]=q[0],y=a(y,r));for(D=0;3>D;D++)for(v=0;3>v;v++)y[D][v]*=n[D];return 0==y[0][2]&&0==y[0][3]&&0==y[1][2]&&0==y[1][3]&&0==y[2][0]&&0==y[2][1]&&1==y[2][2]&&0==y[2][3]&&0==
y[3][2]&&1==y[3][3]?[y[0][0],y[0][1],y[1][0],y[1][1],y[3][0],y[3][1]]:y[0].concat(y[1],y[2],y[3])}}();d.composeMatrix=h;d.quat=function(a,e,n){var q=d.dot(a,e);q=Math.max(Math.min(q,1),-1);var r=[];if(1===q)r=a;else for(var v=Math.acos(q),y=1*Math.sin(n*v)/Math.sqrt(1-q*q),D=0;4>D;D++)r.push(a[D]*(Math.cos(n*v)-q*y)+e[D]*y);return r}})(l);(function(d,h,a){d.sequenceNumber=0;var e=function(n,q,r){(this||nc).target=n;(this||nc).currentTime=q;(this||nc).timelineTime=r;(this||nc).type="finish";(this||
nc).bubbles=!1;(this||nc).cancelable=!1;(this||nc).currentTarget=n;(this||nc).defaultPrevented=!1;(this||nc).eventPhase=Event.AT_TARGET;(this||nc).timeStamp=Date.now()};h.Animation=function(n){(this||nc).id="";n&&n._id&&((this||nc).id=n._id);(this||nc)._sequenceNumber=d.sequenceNumber++;(this||nc)._currentTime=0;(this||nc)._startTime=null;(this||nc)._paused=!1;(this||nc)._playbackRate=1;(this||nc)._inTimeline=!0;(this||nc)._finishedFlag=!0;(this||nc).onfinish=null;(this||nc)._finishHandlers=[];(this||
nc)._effect=n;(this||nc)._inEffect=(this||nc)._effect._update(0);(this||nc)._idle=!0;(this||nc)._currentTimePending=!1};h.Animation.prototype={_ensureAlive:function(){0>(this||nc).playbackRate&&0===(this||nc).currentTime?(this||nc)._inEffect=(this||nc)._effect._update(-1):(this||nc)._inEffect=(this||nc)._effect._update((this||nc).currentTime);(this||nc)._inTimeline||!(this||nc)._inEffect&&(this||nc)._finishedFlag||((this||nc)._inTimeline=!0,h.timeline._animations.push(this||nc))},_tickCurrentTime:function(n,
q){n!=(this||nc)._currentTime&&((this||nc)._currentTime=n,(this||nc)._isFinished&&!q&&((this||nc)._currentTime=0<(this||nc)._playbackRate?(this||nc)._totalDuration:0),this._ensureAlive())},get currentTime(){return(this||nc)._idle||(this||nc)._currentTimePending?null:(this||nc)._currentTime},set currentTime(n){n=+n;isNaN(n)||(h.restart(),(this||nc)._paused||null==(this||nc)._startTime||((this||nc)._startTime=(this||nc)._timeline.currentTime-n/(this||nc)._playbackRate),(this||nc)._currentTimePending=
!1,(this||nc)._currentTime!=n&&((this||nc)._idle&&((this||nc)._idle=!1,(this||nc)._paused=!0),this._tickCurrentTime(n,!0),h.applyDirtiedAnimation(this||nc)))},get startTime(){return(this||nc)._startTime},set startTime(n){n=+n;isNaN(n)||(this||nc)._paused||(this||nc)._idle||((this||nc)._startTime=n,this._tickCurrentTime(((this||nc)._timeline.currentTime-(this||nc)._startTime)*(this||nc).playbackRate),h.applyDirtiedAnimation(this||nc))},get playbackRate(){return(this||nc)._playbackRate},set playbackRate(n){if(n!=
(this||nc)._playbackRate){var q=(this||nc).currentTime;(this||nc)._playbackRate=n;(this||nc)._startTime=null;"paused"!=(this||nc).playState&&"idle"!=(this||nc).playState&&((this||nc)._finishedFlag=!1,(this||nc)._idle=!1,this._ensureAlive(),h.applyDirtiedAnimation(this||nc));null!=q&&((this||nc).currentTime=q)}},get _isFinished(){return!(this||nc)._idle&&(0<(this||nc)._playbackRate&&(this||nc)._currentTime>=(this||nc)._totalDuration||0>(this||nc)._playbackRate&&0>=(this||nc)._currentTime)},get _totalDuration(){return(this||
nc)._effect._totalDuration},get playState(){return(this||nc)._idle?"idle":null==(this||nc)._startTime&&!(this||nc)._paused&&0!=(this||nc).playbackRate||(this||nc)._currentTimePending?"pending":(this||nc)._paused?"paused":(this||nc)._isFinished?"finished":"running"},_rewind:function(){if(0<=(this||nc)._playbackRate)(this||nc)._currentTime=0;else{if(!((this||nc)._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");
(this||nc)._currentTime=(this||nc)._totalDuration}},play:function(){(this||nc)._paused=!1;((this||nc)._isFinished||(this||nc)._idle)&&(this._rewind(),(this||nc)._startTime=null);(this||nc)._finishedFlag=!1;(this||nc)._idle=!1;this._ensureAlive();h.applyDirtiedAnimation(this||nc)},pause:function(){(this||nc)._isFinished||(this||nc)._paused||(this||nc)._idle?(this||nc)._idle&&(this._rewind(),(this||nc)._idle=!1):(this||nc)._currentTimePending=!0;(this||nc)._startTime=null;(this||nc)._paused=!0},finish:function(){(this||
nc)._idle||((this||nc).currentTime=0<(this||nc)._playbackRate?(this||nc)._totalDuration:0,(this||nc)._startTime=(this||nc)._totalDuration-(this||nc).currentTime,(this||nc)._currentTimePending=!1,h.applyDirtiedAnimation(this||nc))},cancel:function(){(this||nc)._inEffect&&((this||nc)._inEffect=!1,(this||nc)._idle=!0,(this||nc)._paused=!1,(this||nc)._finishedFlag=!0,(this||nc)._currentTime=0,(this||nc)._startTime=null,(this||nc)._effect._update(null),h.applyDirtiedAnimation(this||nc))},reverse:function(){(this||
nc).playbackRate*=-1;this.play()},addEventListener:function(n,q){"function"==typeof q&&"finish"==n&&(this||nc)._finishHandlers.push(q)},removeEventListener:function(n,q){"finish"==n&&(n=(this||nc)._finishHandlers.indexOf(q),0<=n&&(this||nc)._finishHandlers.splice(n,1))},_fireEvents:function(n){if((this||nc)._isFinished){if(!(this||nc)._finishedFlag){var q=new e(this||nc,(this||nc)._currentTime,n),r=(this||nc)._finishHandlers.concat((this||nc).onfinish?[(this||nc).onfinish]:[]);setTimeout(function(){r.forEach(function(v){v.call(q.target,
q)})},0);(this||nc)._finishedFlag=!0}}else(this||nc)._finishedFlag=!1},_tick:function(n,q){(this||nc)._idle||(this||nc)._paused||(null==(this||nc)._startTime?q&&((this||nc).startTime=n-(this||nc)._currentTime/(this||nc).playbackRate):(this||nc)._isFinished||this._tickCurrentTime((n-(this||nc)._startTime)*(this||nc).playbackRate));q&&((this||nc)._currentTimePending=!1,this._fireEvents(n))},get _needsTick(){return(this||nc).playState in{pending:1,running:1}||!(this||nc)._finishedFlag},_targetAnimations:function(){var n=
(this||nc)._effect._target;return n._activeAnimations||(n._activeAnimations=[]),n._activeAnimations},_markTarget:function(){var n=this._targetAnimations();-1===n.indexOf(this||nc)&&n.push(this||nc)},_unmarkTarget:function(){var n=this._targetAnimations(),q=n.indexOf(this||nc);-1!==q&&n.splice(q,1)}}})(f,l);(function(d,h,a){function e(m){var t=D;D=[];m<aa.currentTime&&(m=aa.currentTime);aa._animations.sort(n);aa._animations=v(m,!0,aa._animations)[0];t.forEach(function(u){u[1](m)});r()}function n(m,
t){return m._sequenceNumber-t._sequenceNumber}function q(){(this||nc)._animations=[];(this||nc).currentTime=window.performance&&performance.now?performance.now():0}function r(){P.forEach(function(m){m()});P.length=0}function v(m,t,u){N=!0;K=!1;h.timeline.currentTime=m;I=!1;var B=[],A=[],H=[],F=[];return u.forEach(function(L){L._tick(m,t);L._inEffect?(A.push(L._effect),L._markTarget()):(B.push(L._effect),L._unmarkTarget());L._needsTick&&(I=!0);var U=L._inEffect||L._needsTick;(L._inTimeline=U)?H.push(L):
F.push(L)}),P.push.apply(P,B),P.push.apply(P,A),I&&requestAnimationFrame(function(){}),N=!1,[H,F]}var y=window.requestAnimationFrame,D=[],E=0;window.requestAnimationFrame=function(m){var t=E++;return 0==D.length&&y(e),D.push([t,m]),t};window.cancelAnimationFrame=function(m){D.forEach(function(t){t[0]==m&&(t[1]=function(){})})};q.prototype={_play:function(m){m._timing=d.normalizeTimingInput(m.timing);m=new h.Animation(m);return m._idle=!1,m._timeline=this||nc,(this||nc)._animations.push(m),h.restart(),
h.applyDirtiedAnimation(m),m}};var I=!1,K=!1;h.restart=function(){return I||(I=!0,requestAnimationFrame(function(){}),K=!0),K};h.applyDirtiedAnimation=function(m){N||(m._markTarget(),m=m._targetAnimations(),m.sort(n),v(h.timeline.currentTime,!1,m.slice())[1].forEach(function(t){t=aa._animations.indexOf(t);-1!==t&&aa._animations.splice(t,1)}),r())};var P=[],N=!1,aa=new q;h.timeline=aa})(f,l);(function(d,h){function a(y,D){for(var E=0,I=0;I<y.length;I++)E+=y[I]*D[I];return E}function e(y,D){return[y[0]*
D[0]+y[4]*D[1]+y[8]*D[2]+y[12]*D[3],y[1]*D[0]+y[5]*D[1]+y[9]*D[2]+y[13]*D[3],y[2]*D[0]+y[6]*D[1]+y[10]*D[2]+y[14]*D[3],y[3]*D[0]+y[7]*D[1]+y[11]*D[2]+y[15]*D[3],y[0]*D[4]+y[4]*D[5]+y[8]*D[6]+y[12]*D[7],y[1]*D[4]+y[5]*D[5]+y[9]*D[6]+y[13]*D[7],y[2]*D[4]+y[6]*D[5]+y[10]*D[6]+y[14]*D[7],y[3]*D[4]+y[7]*D[5]+y[11]*D[6]+y[15]*D[7],y[0]*D[8]+y[4]*D[9]+y[8]*D[10]+y[12]*D[11],y[1]*D[8]+y[5]*D[9]+y[9]*D[10]+y[13]*D[11],y[2]*D[8]+y[6]*D[9]+y[10]*D[10]+y[14]*D[11],y[3]*D[8]+y[7]*D[9]+y[11]*D[10]+y[15]*D[11],
y[0]*D[12]+y[4]*D[13]+y[8]*D[14]+y[12]*D[15],y[1]*D[12]+y[5]*D[13]+y[9]*D[14]+y[13]*D[15],y[2]*D[12]+y[6]*D[13]+y[10]*D[14]+y[14]*D[15],y[3]*D[12]+y[7]*D[13]+y[11]*D[14]+y[15]*D[15]]}function n(y){return 2*((y.deg||0)/360+(y.grad||0)/400+(y.turn||0))*Math.PI+(y.rad||0)}function q(y){switch(y.t){case "rotatex":return y=n(y.d[0]),[1,0,0,0,0,Math.cos(y),Math.sin(y),0,0,-Math.sin(y),Math.cos(y),0,0,0,0,1];case "rotatey":return y=n(y.d[0]),[Math.cos(y),0,-Math.sin(y),0,0,1,0,0,Math.sin(y),0,Math.cos(y),
0,0,0,0,1];case "rotate":case "rotatez":return y=n(y.d[0]),[Math.cos(y),Math.sin(y),0,0,-Math.sin(y),Math.cos(y),0,0,0,0,1,0,0,0,0,1];case "rotate3d":var D=y.d[0],E=y.d[1],I=y.d[2];y=n(y.d[3]);var K=D*D+E*E+I*I;0===K?(D=1,I=E=0):1!==K&&(K=Math.sqrt(K),D/=K,E/=K,I/=K);K=Math.sin(y/2);y=K*Math.cos(y/2);K*=K;return[1-2*(E*E+I*I)*K,2*(D*E*K+I*y),2*(D*I*K-E*y),0,2*(D*E*K-I*y),1-2*(D*D+I*I)*K,2*(E*I*K+D*y),0,2*(D*I*K+E*y),2*(E*I*K-D*y),1-2*(D*D+E*E)*K,0,0,0,0,1];case "scale":return[y.d[0],0,0,0,0,y.d[1],
0,0,0,0,1,0,0,0,0,1];case "scalex":return[y.d[0],0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "scaley":return[1,0,0,0,0,y.d[0],0,0,0,0,1,0,0,0,0,1];case "scalez":return[1,0,0,0,0,1,0,0,0,0,y.d[0],0,0,0,0,1];case "scale3d":return[y.d[0],0,0,0,0,y.d[1],0,0,0,0,y.d[2],0,0,0,0,1];case "skew":return D=n(y.d[0]),E=n(y.d[1]),[1,Math.tan(E),0,0,Math.tan(D),1,0,0,0,0,1,0,0,0,0,1];case "skewx":return y=n(y.d[0]),[1,0,0,0,Math.tan(y),1,0,0,0,0,1,0,0,0,0,1];case "skewy":return y=n(y.d[0]),[1,Math.tan(y),0,0,0,1,0,0,0,
0,1,0,0,0,0,1];case "translate":return D=y.d[0].px||0,E=y.d[1].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,D,E,0,1];case "translatex":return D=y.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,D,0,0,1];case "translatey":return E=y.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,E,0,1];case "translatez":return I=y.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,I,1];case "translate3d":return D=y.d[0].px||0,E=y.d[1].px||0,I=y.d[2].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,D,E,I,1];case "perspective":return[1,0,0,0,0,1,0,0,0,0,1,y.d[0].px?-1/y.d[0].px:
0,0,0,0,1];case "matrix":return[y.d[0],y.d[1],0,0,y.d[2],y.d[3],0,0,0,0,1,0,y.d[4],y.d[5],0,1];case "matrix3d":return y.d}}function r(y){return 0===y.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:y.map(q).reduce(e)}var v=function(){function y(K){return K[0][0]*K[1][1]*K[2][2]+K[1][0]*K[2][1]*K[0][2]+K[2][0]*K[0][1]*K[1][2]-K[0][2]*K[1][1]*K[2][0]-K[1][2]*K[2][1]*K[0][0]-K[2][2]*K[0][1]*K[1][0]}function D(K){var P=E(K);return[K[0]/P,K[1]/P,K[2]/P]}function E(K){return Math.sqrt(K[0]*K[0]+K[1]*K[1]+K[2]*
K[2])}function I(K,P,N,aa){return[N*K[0]+aa*P[0],N*K[1]+aa*P[1],N*K[2]+aa*P[2]]}return function(K){K=[K.slice(0,4),K.slice(4,8),K.slice(8,12),K.slice(12,16)];if(1!==K[3][3])return null;for(var P=[],N=0;4>N;N++)P.push(K[N].slice());for(N=0;3>N;N++)P[N][3]=0;if(0===y(P))return null;var aa=[];if(K[0][3]||K[1][3]||K[2][3]){aa.push(K[0][3]);aa.push(K[1][3]);aa.push(K[2][3]);aa.push(K[3][3]);var m=1/y(P),t=P[0][0],u=P[0][1];N=P[0][2];var B=P[1][0],A=P[1][1],H=P[1][2],F=P[2][0],L=P[2][1],U=P[2][2];m=[[(A*
U-H*L)*m,(N*L-u*U)*m,(u*H-N*A)*m,0],[(H*F-B*U)*m,(t*U-N*F)*m,(N*B-t*H)*m,0],[(B*L-A*F)*m,(F*u-t*L)*m,(t*A-u*B)*m,0]];t=[];for(u=0;3>u;u++){for(B=N=0;3>B;B++)N+=P[3][B]*m[B][u];t.push(N)}P=(t.push(1),m.push(t),m);P=[[P[0][0],P[1][0],P[2][0],P[3][0]],[P[0][1],P[1][1],P[2][1],P[3][1]],[P[0][2],P[1][2],P[2][2],P[3][2]],[P[0][3],P[1][3],P[2][3],P[3][3]]];m=[];for(t=0;4>t;t++){for(N=u=0;4>N;N++)u+=aa[N]*P[N][t];m.push(u)}aa=m}else aa=[0,0,0,1];P=K[3].slice(0,3);m=[];m.push(K[0].slice(0,3));t=[];t.push(E(m[0]));
m[0]=D(m[0]);u=[];m.push(K[1].slice(0,3));u.push(a(m[0],m[1]));m[1]=I(m[1],m[0],1,-u[0]);t.push(E(m[1]));m[1]=D(m[1]);u[0]/=t[1];m.push(K[2].slice(0,3));u.push(a(m[0],m[2]));m[2]=I(m[2],m[0],1,-u[1]);u.push(a(m[1],m[2]));m[2]=I(m[2],m[1],1,-u[2]);t.push(E(m[2]));m[2]=D(m[2]);u[1]/=t[2];u[2]/=t[2];K=m[1];N=m[2];if(0>a(m[0],[K[1]*N[2]-K[2]*N[1],K[2]*N[0]-K[0]*N[2],K[0]*N[1]-K[1]*N[0]]))for(N=0;3>N;N++)t[N]*=-1,m[N][0]*=-1,m[N][1]*=-1,m[N][2]*=-1;var T,Y;K=m[0][0]+m[1][1]+m[2][2]+1;return 1E-4<K?(T=
.5/Math.sqrt(K),Y=[(m[2][1]-m[1][2])*T,(m[0][2]-m[2][0])*T,(m[1][0]-m[0][1])*T,.25/T]):m[0][0]>m[1][1]&&m[0][0]>m[2][2]?(T=2*Math.sqrt(1+m[0][0]-m[1][1]-m[2][2]),Y=[.25*T,(m[0][1]+m[1][0])/T,(m[0][2]+m[2][0])/T,(m[2][1]-m[1][2])/T]):m[1][1]>m[2][2]?(T=2*Math.sqrt(1+m[1][1]-m[0][0]-m[2][2]),Y=[(m[0][1]+m[1][0])/T,.25*T,(m[1][2]+m[2][1])/T,(m[0][2]-m[2][0])/T]):(T=2*Math.sqrt(1+m[2][2]-m[0][0]-m[1][1]),Y=[(m[0][2]+m[2][0])/T,(m[1][2]+m[2][1])/T,.25*T,(m[1][0]-m[0][1])/T]),[P,t,u,Y,aa]}}();d.dot=a;d.makeMatrixDecomposition=
function(y){return[v(r(y))]};d.transformListToMatrix=r})(l);(function(d){function h(q,r){var v=q.exec(r);if(v)return v=q.ignoreCase?v[0].toLowerCase():v[0],[v,r.substr(v.length)]}function a(q,r){r=r.replace(/^\s*/,"");if(q=q(r))return[q[0],q[1].replace(/^\s*/,"")]}function e(q,r){for(var v=q,y=r;v&&y;)v>y?v%=y:y%=v;return q*r/(v+y)}function n(q,r,v,y,D){for(var E=[],I=[],K=[],P=e(y.length,D.length),N=0;N<P;N++){var aa=r(y[N%y.length],D[N%D.length]);if(!aa)return;E.push(aa[0]);I.push(aa[1]);K.push(aa[2])}return[E,
I,function(m){m=m.map(function(t,u){return K[u](t)}).join(v);return q?q(m):m}]}d.consumeToken=h;d.consumeTrimmed=a;d.consumeRepeated=function(q,r,v){q=a.bind(null,q);for(var y=[];;){var D=q(v);if(!D||(y.push(D[0]),v=D[1],!(D=h(r,v))||""==D[1]))return[y,v];v=D[1]}};d.consumeParenthesised=function(q,r){for(var v=0,y=0;y<r.length&&(!/\s|,/.test(r[y])||0!=v);y++)if("("==r[y])v++;else if(")"==r[y]&&(v--,0==v&&y++,0>=v))break;q=q(r.substr(0,y));return void 0==q?void 0:[q,r.substr(y)]};d.ignore=function(q){return function(r){r=
q(r);return r&&(r[0]=void 0),r}};d.optional=function(q,r){return function(v){return q(v)||[r,v]}};d.consumeList=function(q,r){for(var v=[],y=0;y<q.length;y++){r=d.consumeTrimmed(q[y],r);if(!r||""==r[0])return;void 0!==r[0]&&v.push(r[0]);r=r[1]}if(""==r)return v};d.mergeNestedRepeated=n.bind(null,null);d.mergeWrappedNestedRepeated=n;d.mergeList=function(q,r,v){for(var y=[],D=[],E=[],I=0,K=0;K<v.length;K++)if("function"==typeof v[K]){var P=v[K](q[I],r[I++]);y.push(P[0]);D.push(P[1]);E.push(P[2])}else!function(N){y.push(!1);
D.push(!1);E.push(function(){return v[N]})}(K);return[y,D,function(N){for(var aa="",m=0;m<N.length;m++)aa+=E[m](N[m]);return aa}]}})(l);(function(d){function h(e){var n={inset:!1,lengths:[],color:null};if((e=d.consumeRepeated(function(q){var r=d.consumeToken(/^inset/i,q);return r?(n.inset=!0,r):(r=d.consumeLengthOrPercent(q))?(n.lengths.push(r[0]),r):(r=d.consumeColor(q),r?(n.color=r[0],r):void 0)},/^/,e))&&e[0].length)return[n,e[1]]}var a=function(e,n,q,r){function v(P){return{inset:P,color:[0,0,
0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var y=[],D=[],E=0;E<q.length||E<r.length;E++){var I=q[E]||v(r[E].inset),K=r[E]||v(q[E].inset);y.push(I);D.push(K)}return d.mergeNestedRepeated(e,n,y,D)}.bind(null,function(e,n){for(;e.lengths.length<Math.max(e.lengths.length,n.lengths.length);)e.lengths.push({px:0});for(;n.lengths.length<Math.max(e.lengths.length,n.lengths.length);)n.lengths.push({px:0});if(e.inset==n.inset&&!!e.color==!!n.color){for(var q,r=[],v=[[],0],y=[[],0],D=0;D<e.lengths.length;D++){var E=
d.mergeDimensions(e.lengths[D],n.lengths[D],2==D);v[0].push(E[0]);y[0].push(E[1]);r.push(E[2])}e.color&&n.color&&(n=d.mergeColors(e.color,n.color),v[1]=n[0],y[1]=n[1],q=n[2]);return[v,y,function(I){for(var K=e.inset?"inset ":" ",P=0;P<r.length;P++)K+=r[P](I[0][P])+" ";return q&&(K+=q(I[1])),K}]}},", ");d.addPropertiesHandler(function(e){if((e=d.consumeRepeated(h,/^,/,e))&&""==e[1])return e[0]},a,["box-shadow","text-shadow"])})(l);(function(d,h){function a(v){return v.toFixed(3).replace(/0+$/,"").replace(/\.$/,
"")}function e(v,y,D){return Math.min(y,Math.max(v,D))}function n(v){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(v))return Number(v)}function q(v,y){return function(D,E){return[D,E,function(I){return a(e(v,y,I))}]}}function r(v){v=v.trim().split(/\s*[\s,]\s*/);if(0!==v.length){for(var y=[],D=0;D<v.length;D++){var E=n(v[D]);if(void 0===E)return;y.push(E)}return y}}d.clamp=e;d.addPropertiesHandler(r,function(v,y){if(v.length==y.length)return[v,y,function(D){return D.map(a).join(" ")}]},["stroke-dasharray"]);
d.addPropertiesHandler(n,q(0,1/0),["border-image-width","line-height"]);d.addPropertiesHandler(n,q(0,1),["opacity","shape-image-threshold"]);d.addPropertiesHandler(n,function(v,y){if(0!=v)return q(0,1/0)(v,y)},["flex-grow","flex-shrink"]);d.addPropertiesHandler(n,function(v,y){return[v,y,function(D){return Math.round(e(1,1/0,D))}]},["orphans","widows"]);d.addPropertiesHandler(n,function(v,y){return[v,y,Math.round]},["z-index"]);d.parseNumber=n;d.parseNumberList=r;d.mergeNumbers=function(v,y){return[v,
y,a]};d.numberToString=a})(l);(function(d,h){d.addPropertiesHandler(String,function(a,e){if("visible"==a||"visible"==e)return[0,1,function(n){return 0>=n?a:1<=n?e:"visible"}]},["visibility"])})(l);(function(d,h){function a(q){q=q.trim();n.fillStyle="#000";n.fillStyle=q;var r=n.fillStyle;if(n.fillStyle="#fff",n.fillStyle=q,r==n.fillStyle)return n.fillRect(0,0,1,1),q=n.getImageData(0,0,1,1).data,n.clearRect(0,0,1,1),r=q[3]/255,[q[0]*r,q[1]*r,q[2]*r,r]}function e(q,r){return[q,r,function(v){if(v[3])for(var y=
0;3>y;y++)v[y]=Math.round(Math.max(0,Math.min(255,v[y]/v[3])));return v[3]=d.numberToString(d.clamp(0,1,v[3])),"rgba("+v.join(",")+")"}]}h=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");h.width=h.height=1;var n=h.getContext("2d");d.addPropertiesHandler(a,e,"background-color border-bottom-color border-left-color border-right-color border-top-color color fill flood-color lighting-color outline-color stop-color stroke text-decoration-color".split(" "));d.consumeColor=d.consumeParenthesised.bind(null,
a);d.mergeColors=e})(l);(function(d,h){function a(D){function E(){var m=aa.exec(D);N=m?m[0]:void 0}function I(){if("("!==N){var m=Number(N);return E(),m}E();m=P();return")"!==N?NaN:(E(),m)}function K(){for(var m=I();"*"===N||"/"===N;){var t=N;E();var u=I();"*"===t?m*=u:m/=u}return m}function P(){for(var m=K();"+"===N||"-"===N;){var t=N;E();var u=K();"+"===t?m+=u:m-=u}return m}var N,aa=/([\+\-\w\.]+|[\(\)\*\/])/g;return E(),P()}function e(D,E){if("0"==(E=E.trim().toLowerCase())&&0<="px".search(D))return{px:0};
if(/^[^(]*$|^calc/.test(E)){E=E.replace(/calc\(/g,"(");var I={};E=E.replace(D,function(m){return I[m]=null,"U"+m});D="U("+D.source+")";for(var K=E.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+D,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),P=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],N=0;N<P.length;)P[N].test(K)?(K=K.replace(P[N],"$1"),N=0):N++;if("D"==K){for(var aa in I){K=a(E.replace(new RegExp("U"+aa,"g"),"").replace(new RegExp(D,"g"),"*0"));if(!isFinite(K))return;
I[aa]=K}return I}}}function n(D,E){return q(D,E,!0)}function q(D,E,I){var K,P=[];for(K in D)P.push(K);for(K in E)0>P.indexOf(K)&&P.push(K);return D=P.map(function(N){return D[N]||0}),E=P.map(function(N){return E[N]||0}),[D,E,function(N){var aa=N.map(function(m,t){return 1==N.length&&I&&(m=Math.max(m,0)),d.numberToString(m)+P[t]}).join(" + ");return 1<N.length?"calc("+aa+")":aa}]}var r=e.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc/g);h=e.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|%/g);
var v=e.bind(null,/deg|rad|grad|turn/g);d.parseLength=r;d.parseLengthOrPercent=h;d.consumeLengthOrPercent=d.consumeParenthesised.bind(null,h);d.parseAngle=v;d.mergeDimensions=q;r=d.consumeParenthesised.bind(null,r);r=d.consumeRepeated.bind(void 0,r,/^/);var y=d.consumeRepeated.bind(void 0,r,/^,/);d.consumeSizePairList=y;r=d.mergeNestedRepeated.bind(void 0,n," ");v=d.mergeNestedRepeated.bind(void 0,r,",");d.mergeNonNegativeSizePair=r;d.addPropertiesHandler(function(D){if((D=y(D))&&""==D[1])return D[0]},
v,["background-size"]);d.addPropertiesHandler(h,n,"border-bottom-width border-image-width border-left-width border-right-width border-top-width flex-basis font-size height line-height max-height max-width outline-width width".split(" "));d.addPropertiesHandler(h,q,"border-bottom-left-radius border-bottom-right-radius border-top-left-radius border-top-right-radius bottom left letter-spacing margin-bottom margin-left margin-right margin-top min-height min-width outline-offset padding-bottom padding-left padding-right padding-top perspective right shape-margin stroke-dashoffset text-indent top vertical-align word-spacing".split(" "))})(l);
(function(d,h){function a(n){return d.consumeLengthOrPercent(n)||d.consumeToken(/^auto/,n)}function e(n){if((n=d.consumeList([d.ignore(d.consumeToken.bind(null,/^rect/)),d.ignore(d.consumeToken.bind(null,/^\(/)),d.consumeRepeated.bind(null,a,/^,/),d.ignore(d.consumeToken.bind(null,/^\)/))],n))&&4==n[0].length)return n[0]}h=d.mergeWrappedNestedRepeated.bind(null,function(n){return"rect("+n+")"},function(n,q){return"auto"==n||"auto"==q?[!0,!1,function(r){r=r?n:q;if("auto"==r)return"auto";r=d.mergeDimensions(r,
r);return r[2](r[0])}]:d.mergeDimensions(n,q)},", ");d.parseBox=e;d.mergeBoxes=h;d.addPropertiesHandler(e,h,["clip"])})(l);(function(d,h){function a(K){return function(P){var N=0;return K.map(function(aa){return aa===y?P[N++]:aa})}}function e(K){return K}function n(K){if("none"==(K=K.toLowerCase().trim()))return[];for(var P,N=/\s*(\w+)\(([^)]*)\)/g,aa=[],m=0;(P=N.exec(K))&&P.index==m;){m=P.index+P[0].length;var t=P[1],u=I[t];if(!u)break;P=P[2].split(",");u=u[0];if(u.length<P.length)break;for(var B=
[],A=0;A<u.length;A++){var H=P[A];var F=u[A];if(void 0===(H=H?{A:function(L){return"0"==L.trim()?E:d.parseAngle(L)},N:d.parseNumber,T:d.parseLengthOrPercent,L:d.parseLength}[F.toUpperCase()](H):{a:E,n:B[0],t:D}[F]))return;B.push(H)}if(aa.push({t:t,d:B}),N.lastIndex==K.length)return aa}}function q(K){return K.toFixed(6).replace(".000000","")}function r(K,P){if(K.decompositionPair!==P){K.decompositionPair=P;var N=d.makeMatrixDecomposition(K)}if(P.decompositionPair!==K){P.decompositionPair=K;var aa=
d.makeMatrixDecomposition(P)}return null==N[0]||null==aa[0]?[[!1],[!0],function(m){return m?P[0].d:K[0].d}]:(N[0].push(0),aa[0].push(1),[N,aa,function(m){var t=d.quat(N[0][3],aa[0][3],m[5]);return d.composeMatrix(m[0],m[1],m[2],t,m[4]).map(q).join(",")}])}function v(K){return K.replace(/(x|y|z|3d)?$/,"3d")}var y=null,D={px:0},E={deg:0},I={matrix:["NNNNNN",[y,y,0,0,y,y,0,0,0,0,1,0,y,y,0,1],e],matrix3d:["NNNNNNNNNNNNNNNN",e],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],
scale:["Nn",a([y,y,1]),e],scalex:["N",a([y,1,1]),a([y,1])],scaley:["N",a([1,y,1]),a([1,y])],scalez:["N",a([1,1,y])],scale3d:["NNN",e],skew:["Aa",null,e],skewx:["A",null,a([y,E])],skewy:["A",null,a([E,y])],translate:["Tt",a([y,y,D]),e],translatex:["T",a([y,D,D]),a([y,D])],translatey:["T",a([D,y,D]),a([D,y])],translatez:["L",a([D,D,y])],translate3d:["TTL",e]};d.addPropertiesHandler(n,function(K,P){var N=d.makeMatrixDecomposition&&!0,aa=!1;if(!K.length||!P.length){K.length||(aa=!0,K=P,P=[]);for(var m=
0;m<K.length;m++){var t=K[m].t,u=K[m].d,B="scale"==t.substr(0,5)?1:0;P.push({t:t,d:u.map(function(na){if("number"==typeof na)return B;var ea={},da;for(da in na)ea[da]=B;return ea})})}}u=[];var A=[],H=[];if(K.length!=P.length){if(!N)return;var F=r(K,P);u=[F[0]];A=[F[1]];H=[["matrix",[F[2]]]]}else for(m=0;m<K.length;m++){t=K[m].t;var L=P[m].t,U=K[m].d,T=P[m].d;F=I[t];var Y=I[L];if("perspective"==t&&"perspective"==L||!("matrix"!=t&&"matrix3d"!=t||"matrix"!=L&&"matrix3d"!=L)){if(!N)return;F=r([K[m]],
[P[m]]);u.push(F[0]);A.push(F[1]);H.push(["matrix",[F[2]]])}else{if(t!=L)if(F[2]&&Y[2]&&t.replace(/[xy]/,"")==L.replace(/[xy]/,""))t=t.replace(/[xy]/,""),U=F[2](U),T=Y[2](T);else{if(!F[1]||!Y[1]||v(t)!=v(L)){if(!N)return;F=r(K,P);u=[F[0]];A=[F[1]];H=[["matrix",[F[2]]]];break}t=v(t);U=F[1](U);T=Y[1](T)}Y=[];L=[];for(var wa=[],Ga=0;Ga<U.length;Ga++)F=("number"==typeof U[Ga]?d.mergeNumbers:d.mergeDimensions)(U[Ga],T[Ga]),Y[Ga]=F[0],L[Ga]=F[1],wa.push(F[2]);u.push(Y);A.push(L);H.push([t,wa])}}aa&&(K=
u,u=A,A=K);return[u,A,function(na){return na.map(function(ea,da){ea=ea.map(function(ia,Oa){return H[da][1][Oa](ia)}).join(",");return"matrix"==H[da][0]&&16==ea.split(",").length&&(H[da][0]="matrix3d"),H[da][0]+"("+ea+")"}).join(" ")}]},["transform"]);d.transformToSvgMatrix=function(K){K=d.transformListToMatrix(n(K));return"matrix("+q(K[0])+" "+q(K[1])+" "+q(K[4])+" "+q(K[5])+" "+q(K[12])+" "+q(K[13])+")"}})(l);(function(d){function h(a){return a=100*Math.round(a/100),a=d.clamp(100,900,a),400===a?
"normal":700===a?"bold":String(a)}d.addPropertiesHandler(function(a){a=Number(a);if(!(isNaN(a)||100>a||900<a||0!=a%100))return a},function(a,e){return[a,e,h]},["font-weight"])})(l);(function(d){function h(r){return d.consumeToken(/^(left|center|right|top|bottom)\b/i,r)||d.consumeLengthOrPercent(r)}function a(r,v){if((v=d.consumeRepeated(h,/^/,v))&&""==v[1]&&(v=v[0],v[0]=v[0]||"center",v[1]=v[1]||"center",3==r&&(v[2]=v[2]||{px:0}),v.length==r)){if(/top|bottom/.test(v[0])||/left|right/.test(v[1]))r=
v[0],v[0]=v[1],v[1]=r;if(/left|right|center|Object/.test(v[0])&&/top|bottom|center|Object/.test(v[1]))return v.map(function(y){return"object"==typeof y?y:n[y]})}}function e(r){if(r=d.consumeRepeated(h,/^/,r)){for(var v=r[0],y=[{"%":50},{"%":50}],D=0,E=!1,I=0;I<v.length;I++){var K=v[I];if("string"==typeof K)E=/bottom|right/.test(K),D={left:0,right:0,center:D,top:1,bottom:1}[K],y[D]=n[K],"center"==K&&D++;else{if(E){E=void 0;var P={};for(E in K)P[E]=-K[E];K=P;K["%"]=(K["%"]||0)+100}y[D]=K;D++;E=!1}}return[y,
r[1]]}}var n={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},q=d.mergeNestedRepeated.bind(null,d.mergeDimensions," ");d.addPropertiesHandler(a.bind(null,3),q,["transform-origin"]);d.addPropertiesHandler(a.bind(null,2),q,["perspective-origin"]);d.consumePosition=e;d.mergeOffsetList=q;q=d.mergeNestedRepeated.bind(null,q,", ");d.addPropertiesHandler(function(r){if((r=d.consumeRepeated(e,/^,/,r))&&""==r[1])return r[0]},q,["background-position","object-position"])})(l);(function(d){var h=
d.consumeParenthesised.bind(null,d.parseLengthOrPercent),a=d.consumeRepeated.bind(void 0,h,/^/),e=d.mergeNestedRepeated.bind(void 0,d.mergeDimensions," "),n=d.mergeNestedRepeated.bind(void 0,e,",");d.addPropertiesHandler(function(q){var r=d.consumeToken(/^circle/,q);return r&&r[0]?["circle"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),h,d.ignore(d.consumeToken.bind(void 0,/^at/)),d.consumePosition,d.ignore(d.consumeToken.bind(void 0,/^\)/))],r[1])):(r=d.consumeToken(/^ellipse/,
q))&&r[0]?["ellipse"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),a,d.ignore(d.consumeToken.bind(void 0,/^at/)),d.consumePosition,d.ignore(d.consumeToken.bind(void 0,/^\)/))],r[1])):(q=d.consumeToken(/^polygon/,q))&&q[0]?["polygon"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),d.optional(d.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),d.consumeSizePairList,d.ignore(d.consumeToken.bind(void 0,/^\)/))],q[1])):void 0},function(q,r){if(q[0]===
r[0])return"circle"==q[0]?d.mergeList(q.slice(1),r.slice(1),["circle(",d.mergeDimensions," at ",d.mergeOffsetList,")"]):"ellipse"==q[0]?d.mergeList(q.slice(1),r.slice(1),["ellipse(",d.mergeNonNegativeSizePair," at ",d.mergeOffsetList,")"]):"polygon"==q[0]&&q[1]==r[1]?d.mergeList(q.slice(2),r.slice(2),["polygon(",q[1],n,")"]):void 0},["shape-outside"])})(l);(function(d,h){function a(q,r){r.concat([q]).forEach(function(v){v in document.documentElement.style&&(e[q]=v);n[v]=q})}var e={},n={};a("transform",
["webkitTransform","msTransform"]);a("transformOrigin",["webkitTransformOrigin"]);a("perspective",["webkitPerspective"]);a("perspectiveOrigin",["webkitPerspectiveOrigin"]);d.propertyName=function(q){return e[q]||q};d.unprefixedPropertyName=function(q){return n[q]||q}})(l)})();(function(){if(void 0===document.createElement("div").animate([]).oncancel){var p=window.performance&&performance.now?function(){return performance.now()}:function(){return Date.now()};var b=function(h,a,e){(this||nc).target=
h;(this||nc).currentTime=a;(this||nc).timelineTime=e;(this||nc).type="cancel";(this||nc).bubbles=!1;(this||nc).cancelable=!1;(this||nc).currentTarget=h;(this||nc).defaultPrevented=!1;(this||nc).eventPhase=Event.AT_TARGET;(this||nc).timeStamp=Date.now()},d=window.Element.prototype.animate;window.Element.prototype.animate=function(h,a){h=d.call(this||nc,h,a);h._cancelHandlers=[];h.oncancel=null;var e=h.cancel;h.cancel=function(){e.call(this||nc);var r=new b(this||nc,null,p()),v=(this||nc)._cancelHandlers.concat((this||
nc).oncancel?[(this||nc).oncancel]:[]);setTimeout(function(){v.forEach(function(y){y.call(r.target,r)})},0)};var n=h.addEventListener;h.addEventListener=function(r,v){"function"==typeof v&&"cancel"==r?(this||nc)._cancelHandlers.push(v):n.call(this||nc,r,v)};var q=h.removeEventListener;return h.removeEventListener=function(r,v){"cancel"==r?(r=(this||nc)._cancelHandlers.indexOf(v),0<=r&&(this||nc)._cancelHandlers.splice(r,1)):q.call(this||nc,r,v)},h}}})();(function(p){var b=document.documentElement,
d=null,h=!1;try{var a="0"==getComputedStyle(b).getPropertyValue("opacity")?"1":"0";d=b.animate({opacity:[a,a]},{duration:1});d.currentTime=0;h=getComputedStyle(b).getPropertyValue("opacity")==a}catch(n){}finally{d&&d.cancel()}if(!h){var e=window.Element.prototype.animate;window.Element.prototype.animate=function(n,q){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&n[Symbol.iterator]&&(n=Array.from(n)),Array.isArray(n)||null===n||(n=p.convertToArrayForm(n)),e.call(this||nc,n,q)}}})(f)}();
var Ve=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js");Ve.convertToSvgEasing=function(f){for(var l in Ve.easings)if(Ve.easings[l]===f){if(l.includes("inOut"))return l.replace("inOut","").toLowerCase()+"InOut";if(l.includes("out"))return l.replace("out","").toLowerCase()+"Out";if(l.includes("in"))return l.replace("in","").toLowerCase()+"In"}};Ve.stringToEasing=os;Ve.obj=xf;Ve.promise=bg;Ve.fun=ik;Ve.num=jk;Ve.properties=Qm;Ve.arr=cf;Ve.string=Ng;Ve.Color=If;Ve.styleProps=
cA;Ve.addPathAttributes=eA;Ve.addSvgAttributes=dA;Ve.flubber=JS;Ve.Bezier=uqa;Ve.ShadowObject=ro;var so=Ka("e",{inQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",inCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",inQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",inQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",inSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",inExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",inCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",inBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",
outQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",outCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",outQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",outQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",outSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",outExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",outCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",outBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",inOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",inOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",
inOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",inOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",inOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)",inOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",inOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",inOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",linear:"cubic-bezier(0.5, 0.5, 0.5, 0.5)"});Ve.easings=so;Ve.easings=so;Ve.easings=so;Ve.stringToEasing=os;Ve.stringToEasing=os;var nJ=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),
p=l.hasOwnProperty("AnimationQueue")&&"function"===typeof l.AnimationQueue?l.AnimationQueue:l.AnimationQueue=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.morph=b;this.animations=[]}},{key:"maskedProps",value:function(b){return 0<this.animations.length?Ve.obj.merge(this.animations.map(function(d){return d.getAnimationProps(b)[0]})):{}}},
{key:"animationsActive",get:function(){return!0}},{key:"registerAnimation",value:function(b){var d=this,h=new Ve.PropertyAnimation(this,this.morph,b);this.morph.makeDirty();return this.morph.withMetaDo({animation:h},function(){var a=h.affectsMorph&&d.animations.find(function(n){return n.equals(h)});if(!a){var e;if(e=d.animations.find(function(n){return n.canMerge(h)}))return e.mergeWith(h),e;if(h.affectsMorph)return h.assignProps(),d.animations.push(h),h}return a})}},{key:"startAnimationsFor",value:function(b){for(var d=
0;d<this.animations.length;d++)this.animations[d].start(b)}},{key:"startSvgAnimationsFor",value:function(b,d){this.animations.forEach(function(h){return h.startSvg(b,d)})}},{key:"removeAnimation",value:function(b){Ve.arr.remove(this.animations,b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AnimationQueue"}}],l,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2443,end:3747})}(void 0);Ve.AnimationQueue=nJ;Ve.AnimationQueue=nJ;Ve.AnimationQueue=nJ;var MS=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),p=l.hasOwnProperty("PropertyAnimation")&&"function"===typeof l.PropertyAnimation?l.PropertyAnimation:l.PropertyAnimation=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,h){var a=this;this.queue=b;this.morph=d;if(d.isPath&&"fill"in h){var e=d.fill||Ve.Color.transparent,n=h.fill;h.customTween=Ve.fun.compose(function(D){d.fill=e.interpolate(D,n);return D},h.customTween||function(D){});delete h.fill;d.fill=e}if("dropShadow"in h){var q=d.dropShadow||new Ve.ShadowObject({blur:0,distance:0,spread:0}),r=h.dropShadow;h.customTween=Ve.fun.compose(function(D){d.dropShadow=q.interpolate(D,r||new Ve.ShadowObject({blur:0,
distance:0,spread:0}));1==D&&(d.dropShadow=r);return D},h.customTween||function(D){});delete h.dropShadow;d.dropShadow=q}if("visible"in h&&h.visible!=d.visible){var v=void 0===b.originalOpacity?d.opacity:b.originalOpacity;b.originalOpacity=v;var y=h.visible;h.customTween=Ve.fun.compose(function(D){if(a._otherVisibleTransformationInProgress)return D;0==D&&1==y&&(d.visible=!0);d.opacity=y?Ve.num.interpolate(D,0,v):Ve.num.interpolate(D,v,0);1==D&&(d.visible=y,d.opacity=v,delete b.originalOpacity);return D},
h.customTween||function(D){});this.queue.animations.forEach(function(D){return D._otherVisibleTransformationInProgress=!0});delete h.visible}this.config=this.convertBounds(h);this.needsAnimation={svg:d.isSvgMorph,path:d.isPath};this.capturedProperties=Ve.obj.select(this.morph,this.propsToCapture)}},{key:"propsToCapture",get:function(){return["fill","origin"]}},{key:"asPromise",value:function(){var b=this;return this._promise||(this._promise=new Promise(function(d,h){b.resolveCallback=function(){b.onFinish(b);
b.subAnimations?b.subAnimations.then(d):d(b.morph)}}))}},{key:"finish",value:function(b){var d=this;this.config.scale&&this.morph.whenRendered().then(function(){return d.morph.withAllSubmorphsDo(function(h){return h.isText&&h.invalidateTextLayout(!0,!0)})});this.needsAnimation[b]=!1;Ve.arr.any(Ve.obj.values(this.needsAnimation),Boolean)||(this.queue.removeAnimation(this),this.resolveCallback?this.resolveCallback():this.onFinish())}},{key:"convertBounds",value:function(b){var d=b.bounds,h=b.origin,
a=b.rotation,e=b.scale;h=h||this.morph.origin;a=a||this.morph.rotation;e=e||this.morph.scale;return d?Object.assign({},Ve.obj.dissoc(b,["bounds"]),{origin:h,rotation:a,scale:e,position:d.topLeft().addPt(h),extent:d.extent()}):b}},{key:"equals",value:function(b){return!this.config.customTween&&!b.config.customTweem&&Ve.obj.equals(this.animatedProps,b.animatedProps)}},{key:"canMerge",value:function(b){return this.easing==b.easing&&this.duration==b.duration}},{key:"mergeWith",value:function(b){var d=
this.config.customTween;Object.assign(this.morph,b.animatedProps);Object.assign(this.config,b.config);this.config.customTween=function(h){d&&d(h);b.config.customTween&&b.config.customTween(h);return h};this.afterProps=this.gatherAnimationProps()}},{key:"affectsMorph",get:function(){var b=this;return!!this.config.customTween||Ve.properties.any(this.animatedProps,function(d,h){return!Ve.obj.equals(d[h],b.morph[h])})}},{key:"animatedProps",get:function(){return Ve.obj.dissoc(this.config,["customTween",
"easing","onFinish","duration"])}},{key:"easing",get:function(){return this.config.easing||Ve.easings.inOutQuad}},{key:"onFinish",get:function(){return this.config.onFinish||function(){}}},{key:"setonFinish",value:function(b){this.config.onFinish=b}},{key:"duration",get:function(){return this.config.duration||1E3}},{key:"getChangedProps",value:function(b,d){var h=[],a;for(a in b)Ve.obj.equals(d[a],b[a])&&h.push(a);return[Ve.obj.dissoc(b,h),Ve.obj.dissoc(d,h)]}},{key:"getAnimationProps",value:function(b){var d=
$jscomp.makeIterator(this.getChangedProps(this.beforeProps[b],this.afterProps[b])),h=d.next().value;d=d.next().value;var a=this.capturedProperties.fill,e=this.config.fill;this.morph.isPolygon&&"css"==b&&(a=e=!1,delete h.background,delete d.background,delete h.backgroundImage,delete d.backgroundImage);"none"==h.filter&&d.boxShadow&&(delete h.filter,h.boxShadow="none");"none"==d.filter&&h.boxShadow&&(delete d.filter,d.boxShadow="none");a&&e&&(a.isGradient||e.isGradient)&&(this.tweenGradient=this.interpolate("gradient",
a,e));b=$jscomp.makeIterator(Ve.arr.union(Ve.obj.keys(h),Ve.obj.keys(d)));for(a=b.next();!a.done;a=b.next())a=a.value,a in h||(h[a]=d[a]),a in d||(d[a]=h[a]);return[Ve.obj.isEmpty(h)?!1:h,Ve.obj.isEmpty(d)?!1:d]}},{key:"gatherAnimationProps",value:function(){var b=this.morph,d=b.isSvgMorph,h=b.isPath,a=b.isPolygon,e={};e.css=Ve.styleProps(this.morph);d&&(e.svg=Ve.addSvgAttributes(b,{}));h&&(e.path=Ve.addPathAttributes(b,{}));a&&(e.polygon=Ve.addPathAttributes(b,{}));return e}},{key:"assignProps",
value:function(){var b=this.morph.styleClasses;this.beforeProps=this.gatherAnimationProps();Object.assign(this.morph,this.animatedProps);this.afterProps=this.gatherAnimationProps();this.config.styleClasses&&(this.morph._animatedStyleClasses={removed:Ve.arr.withoutAll(b,this.morph.styleClasses),added:Ve.arr.withoutAll(this.morph.styleClasses,b),animation:this})}},{key:"interpolate",value:function(b,d,h){var a=this;switch(b){case "scrollTop":case "scrollLeft":return function(e){return Ve.num.interpolate(e,
d,h)};case "d":return Ve.flubber.interpolate(d,h);case "stroke-width":return function(e){return Ve.num.interpolate(e,d,h)};case "stroke":return function(e){return Ve.Color.fromString(d).interpolate(e,Ve.Color.fromString(h),a.morph.bounds())};case "gradient":return function(e){return d.interpolate(e,h,a.morph.bounds())};case "fill":return d=Ve.Color.fromString(d),h=Ve.Color.fromString(h),function(e){return d.interpolate(e,h)}}}},{key:"startSvg",value:function(b,d){var h=this;if(this.needsAnimation[d]){this.needsAnimation[d]=
!1;var a=$jscomp.makeIterator(this.getAnimationProps(d)),e=a.next().value;a=a.next().value;var n={},q=Ve.stringToEasing(this.easing),r;for(r in e)n[r]=this.interpolate(r,e[r],a[r]);var v,y=function(D){v||(v=D);D-=v;if(1<D/h.duration)return h.finish(d);for(var E in n)n[E]&&b.setAttribute(E,n[E](q(D/h.duration)));requestAnimationFrame(y)};requestAnimationFrame(y)}}},{key:"start",value:function(b){if(!this.active)try{this.active=!0;var d=$jscomp.makeIterator(this.getAnimationProps("css")),h=d.next().value,
a=d.next().value;b&&this.tween(b,h,a);if(this.config.origin){var e=this.capturedProperties.origin,n=this.config.origin,q=b.childNodes[0];q&&this.tween(q,q.style.top?{left:e.x+"px",top:e.y+"px"}:{transform:"translate3d("+e.x+"px, "+e.y+"px, 0px)"},q.style.top?{left:e.x+"px",top:e.y+"px"}:{transform:"translate3d("+n.x+"px, "+n.y+"px, 0px)"})}}catch(r){this.active=!1}}},{key:"tween",value:function(b,d,h,a){var e=this;a=void 0===a?!0:a;var n=this.animatedProps.scroll,q=this.config.customTween,r=!1,v=
function(){a&&(e.finish("css"),e.morph.makeDirty())};if(q){var y,D=Ve.stringToEasing(this.easing),E=function(T){y||(y=T);var Y=Math.min(1,(T-y)/e.duration);e.morph.dontRecordChangesWhile(function(){return q(D(Y))});if(1<=Y)return e.finish("css");requestAnimationFrame(E)};requestAnimationFrame(E);r=!0}if(n){var I,K=this.morph.env.eventDispatcher.eventState;r=Ve.promise.deferred();var P=r.promise,N=r.resolve,aa=this.interpolate("scrollLeft",b.scrollLeft,n.x),m=this.interpolate("scrollTop",b.scrollTop,
n.y),t=Ve.stringToEasing(this.easing),u=function(T){I||(I=T);T-=I;var Y=Math.min(1,T/e.duration);b.scrollTop=m(t(Y));b.scrollLeft=aa(t(Y));if(1<=T/e.duration)return K.scroll.interactiveScrollInProgress=null,N(),e.finish("css");requestAnimationFrame(u)};P.debounce=function(){};requestAnimationFrame(u);r=!0}if(this.tweenGradient&&!this.morph.isPolygon){var B,A=Ve.stringToEasing(this.easing),H=function(T){B||(B=T);T-=B;if(1<=T/e.duration)return e.finish("css");b.style.setProperty("background-image",
e.tweenGradient(A(T/e.duration)));requestAnimationFrame(H)};delete d.backgroundImage;delete h.backgroundImage;delete d.background;delete h.background;requestAnimationFrame(H);r=!0}else this.tweenGradient&&(r=!0);if(b&&d&&h){n={};P={};for(var F in d)n[Ve.string.camelize(F)]=d[F];for(var L in h)P[Ve.string.camelize(L)]=h[L];try{var U=b.animate([n,P],{duration:this.duration,easing:this.easing,fill:"forwards",composite:"replace"});U.onfinish=function(){v();setTimeout(function(){return U.cancel()},200)};
r=!0}catch(T){r=!1}}r||v()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PropertyAnimation"}}],l,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3756,end:17169})}(void 0);Ve.PropertyAnimation=MS;Ve.PropertyAnimation=MS;Ve.PropertyAnimation=MS;var zg=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js");
zg.cumulativeOffset=ix;zg.createIFrame=function(f,l,p){l=void 0===l?"about:blank":l;p=void 0===p?new zg.Rectangle(0,0,700,700):p;return new Promise(function(b,d){if(!f)throw Error("Need parent element!");var h=document.createElement("iframe");h.style.position="absolute";h.style.top=p.top()+"px";h.style.left=p.left()+"px";h.style.width=p.width+"px";h.style.height=p.height+"px";h.src=l;var a=!1;h.onload=function(e){a=!0;h.onload=null;b(h)};zg.promise.waitFor(1E3,function(){return!!a}).catch(function(e){return d(Error("iframe load timeout"))});
f.appendChild(h)})};zg.requestAnimationFramePolyfill=function(f){for(var l=0,p=["ms","moz","webkit","o"],b=0;b<p.length&&!f.requestAnimationFrame;++b)f.requestAnimationFrame=f[p[b]+"RequestAnimationFrame"],f.cancelAnimationFrame=f[p[b]+"CancelAnimationFrame"]||f[p[b]+"CancelRequestAnimationFrame"];f.requestAnimationFrame||(f.requestAnimationFrame=function(d,h){var a=Date.now(),e=Math.max(0,16-(a-l));h=f.setTimeout(function(){d(a+e)},e);l=a+e;return h});f.cancelAnimationFrame||(f.cancelAnimationFrame=
function(d){clearTimeout(d)})};zg.createDOMEnvironment_browser=function(){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?(f=zg.IFramedDomEnvironment,l.yield(zg.createIFrame(document.body),2)):l.return(new f(l.yieldResult))})};zg.createDOMEnvironment_node=function(){System.decanonicalize("lively.morphic/").replace(/file:\/\//,"");var f=System._nodeRequire("jsdom"),l=f.createVirtualConsole().sendTo(console);return new Promise(function(p,b){f.env("<div></div>",
["https://code.jquery.com/pep/0.4.1/pep.js"],{virtualConsole:l},function(d,h){return d?b(d):p(new zg.DomEnvironment(h,h.document,function(){return h.close()}))})})};zg.createDOMEnvironment=wM;zg.defaultDOMEnv=WE;zg.setCSSDef=function(f,l,p){zg.arr.from(f.childNodes).forEach(function(b){return f.removeChild(b)});l=document.createTextNode(l);f.styleSheet?f.styleSheet.cssText=l.nodeValue:f.appendChild(l);return f};zg.addCSSDef=function(f,l,p){var b=document.createElement("style");b.type="text/css";f&&
b.setAttribute("id",f);zg.setCSSDef(b,l,p);(p.head||p).appendChild(b);return b};zg.addOrChangeCSSDeclaration=Kp;zg.addOrChangeLinkedCSS=mu;zg.promise=bg;zg.obj=xf;zg.arr=cf;zg.Rectangle=ie;zg.cumulativeOffset=ix;zg.cumulativeOffset=ix;zg.createDOMEnvironment=wM;zg.createDOMEnvironment=wM;(function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),p=l.hasOwnProperty("DomEnvironment")&&"function"===typeof l.DomEnvironment?l.DomEnvironment:l.DomEnvironment=function(b){b&&
b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,h){zg.requestAnimationFramePolyfill(b);this.window=b;this.document=d;this.destroyFn=h}},{key:"destroy",value:function(){"function"===typeof this.destroyFn&&this.destroyFn()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DomEnvironment"}}],l,{pathInPackage:function(){return"rendering/dom-helper.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3079,end:3372})})(void 0);(function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),p=l.hasOwnProperty("IFramedDomEnvironment")&&"function"===typeof l.IFramedDomEnvironment?l.IFramedDomEnvironment:l.IFramedDomEnvironment=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){ac._get(Object.getPrototypeOf(p.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b.contentWindow,b.contentWindow.document,function(){b.contentWindow&&b.contentWindow.close();b.parentNode&&b.parentNode.removeChild(b)});this.iframe=b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFramedDomEnvironment"}}],l,{pathInPackage:function(){return"rendering/dom-helper.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3374,end:3718})})(zg.DomEnvironment);zg._defaultEnv=zg._defaultEnv||void 0;zg.defaultDOMEnv=WE;zg.defaultDOMEnv=WE;zg.addOrChangeCSSDeclaration=Kp;zg.addOrChangeCSSDeclaration=Kp;zg.addOrChangeLinkedCSS=mu;zg.addOrChangeLinkedCSS=mu;var oJ=function(){return function(f){f=void 0===f?window.document:
f;return function(l,p,b){var d=p||void 0;"undefined"===typeof b&&(b=p,d=void 0);var h=l.split(".");if(1<h.length)for(l=h.shift(),p=0;p<h.length;p++){var a=h[p],e;-1<(e=a.indexOf("#"))&&(a.slice(e+1),a.slice(0,e))}p=l.split("#");1<p.length&&(l=p[0]);l=f.createElement(l);if(d){for(var n in d)"style"!==n&&"dataset"!==n&&"attributes"!==n&&(l[n]=d[n]);if(n=d.style)for(var q in n)l.style[q]=n[q];if(q=d.dataset)if(l.dataset)for(var r in q)l.dataset[r]=q[r];else for(r in q)l.setAttribute("data-"+r,q[r]);
if(d=d.attributes)for(var v in d)d[v]&&zg.obj.isBoolean(d[v])?l.toggleAttribute(v):l.setAttribute(v,d[v])}b||(b="");if("string"===typeof b)l.appendChild(f.createTextNode(b));else if(Array.isArray(b))for(p=0;p<b.length;p++)v=b[p],l.appendChild("string"===typeof v?f.createTextNode(v):v);else l.appendChild("string"===typeof b?f.createTextNode(b):b);return l}}}();zg.hyperscriptFnForDocument=oJ;zg.hyperscriptFnForDocument=oJ;zg.hyperscriptFnForDocument=oJ;var to=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js");
to.obj=xf;to.morph=zj;var rm=Ka("I",function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js"),p=l.hasOwnProperty("Icon")&&"function"===typeof l.Icon?l.Icon:l.Icon=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Icon"}},{key:"makeLabel",value:function(b,d){var h=d=void 0===d?{prefix:"",suffix:""}:d,a=h.prefix;h=
h.suffix;var e=[];a&&e.push.apply(e,$jscomp.arrayFromIterable("string"===typeof a?[a||"",{}]:a));e.push.apply(e,$jscomp.arrayFromIterable(this.textAttribute(b,to.obj.dissoc(d,["fontSize"]))));h&&e.push.apply(e,$jscomp.arrayFromIterable("string"===typeof h?[h||"",{}]:h));return to.morph(Object.assign({type:"label",value:e},to.obj.dissoc(d,["prefix","suffix"])))}},{key:"textAttribute",value:function(b,d){d=void 0===d?{}:d;var h=d.textStyleClasses&&d.textStyleClasses.includes("far");return[to.Icons[b].code||
"icon "+b+" not found",Object.assign({fontFamily:'"Font Awesome 5 Free", "Font Awesome 5 Brands"',fontWeight:h?"400":"900",textStyleClasses:["fas"]},d)]}},{key:"setIcon",value:function(b,d){b.textAndAttributes=this.textAttribute(d)}}],l,{pathInPackage:function(){return"text/icons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:683,
end:1811})}(void 0));to.Icon=rm;to.Icon=rm;to.Icon=rm;var pJ=Ka("bs",{"500px":{code:"\uf26e"},"accessible-icon":{code:"\uf368"},accusoft:{code:"\uf369"},"acquisitions-incorporated":{code:"\uf6af"},ad:{code:"\uf641"},"address-book":{code:"\uf2b9"},"address-card":{code:"\uf2bb"},adjust:{code:"\uf042"},adn:{code:"\uf170"},adobe:{code:"\uf778"},adversal:{code:"\uf36a"},affiliatetheme:{code:"\uf36b"},"air-freshener":{code:"\uf5d0"},airbnb:{code:"\uf834"},algolia:{code:"\uf36c"},"align-center":{code:"\uf037"},
"align-justify":{code:"\uf039"},"align-left":{code:"\uf036"},"align-right":{code:"\uf038"},alipay:{code:"\uf642"},allergies:{code:"\uf461"},amazon:{code:"\uf270"},"amazon-pay":{code:"\uf42c"},ambulance:{code:"\uf0f9"},"american-sign-language-interpreting":{code:"\uf2a3"},amilia:{code:"\uf36d"},anchor:{code:"\uf13d"},android:{code:"\uf17b"},angellist:{code:"\uf209"},"angle-double-down":{code:"\uf103"},"angle-double-left":{code:"\uf100"},"angle-double-right":{code:"\uf101"},"angle-double-up":{code:"\uf102"},
"angle-down":{code:"\uf107"},"angle-left":{code:"\uf104"},"angle-right":{code:"\uf105"},"angle-up":{code:"\uf106"},angry:{code:"\uf556"},angrycreative:{code:"\uf36e"},angular:{code:"\uf420"},ankh:{code:"\uf644"},"app-store":{code:"\uf36f"},"app-store-ios":{code:"\uf370"},apper:{code:"\uf371"},apple:{code:"\uf179"},"apple-alt":{code:"\uf5d1"},"apple-pay":{code:"\uf415"},archive:{code:"\uf187"},archway:{code:"\uf557"},"arrow-alt-circle-down":{code:"\uf358"},"arrow-alt-circle-left":{code:"\uf359"},"arrow-alt-circle-right":{code:"\uf35a"},
"arrow-alt-circle-up":{code:"\uf35b"},"arrow-circle-down":{code:"\uf0ab"},"arrow-circle-left":{code:"\uf0a8"},"arrow-circle-right":{code:"\uf0a9"},"arrow-circle-up":{code:"\uf0aa"},"arrow-down":{code:"\uf063"},"arrow-left":{code:"\uf060"},"arrow-right":{code:"\uf061"},"arrow-up":{code:"\uf062"},"arrows-alt":{code:"\uf0b2"},"arrows-alt-h":{code:"\uf337"},"arrows-alt-v":{code:"\uf338"},artstation:{code:"\uf77a"},"assistive-listening-systems":{code:"\uf2a2"},asterisk:{code:"\uf069"},asymmetrik:{code:"\uf372"},
at:{code:"\uf1fa"},atlas:{code:"\uf558"},atlassian:{code:"\uf77b"},atom:{code:"\uf5d2"},audible:{code:"\uf373"},"audio-description":{code:"\uf29e"},autoprefixer:{code:"\uf41c"},avianex:{code:"\uf374"},aviato:{code:"\uf421"},award:{code:"\uf559"},aws:{code:"\uf375"},baby:{code:"\uf77c"},"baby-carriage":{code:"\uf77d"},backspace:{code:"\uf55a"},backward:{code:"\uf04a"},bacon:{code:"\uf7e5"},bahai:{code:"\uf666"},"balance-scale":{code:"\uf24e"},"balance-scale-left":{code:"\uf515"},"balance-scale-right":{code:"\uf516"},
ban:{code:"\uf05e"},"band-aid":{code:"\uf462"},bandcamp:{code:"\uf2d5"},barcode:{code:"\uf02a"},bars:{code:"\uf0c9"},"baseball-ball":{code:"\uf433"},"basketball-ball":{code:"\uf434"},bath:{code:"\uf2cd"},"battery-empty":{code:"\uf244"},"battery-full":{code:"\uf240"},"battery-half":{code:"\uf242"},"battery-quarter":{code:"\uf243"},"battery-three-quarters":{code:"\uf241"},"battle-net":{code:"\uf835"},bed:{code:"\uf236"},beer:{code:"\uf0fc"},behance:{code:"\uf1b4"},"behance-square":{code:"\uf1b5"},bell:{code:"\uf0f3"},
"bell-slash":{code:"\uf1f6"},"bezier-curve":{code:"\uf55b"},bible:{code:"\uf647"},bicycle:{code:"\uf206"},biking:{code:"\uf84a"},bimobject:{code:"\uf378"},binoculars:{code:"\uf1e5"},biohazard:{code:"\uf780"},"birthday-cake":{code:"\uf1fd"},bitbucket:{code:"\uf171"},bitcoin:{code:"\uf379"},bity:{code:"\uf37a"},"black-tie":{code:"\uf27e"},blackberry:{code:"\uf37b"},blender:{code:"\uf517"},"blender-phone":{code:"\uf6b6"},blind:{code:"\uf29d"},blog:{code:"\uf781"},blogger:{code:"\uf37c"},"blogger-b":{code:"\uf37d"},
bluetooth:{code:"\uf293"},"bluetooth-b":{code:"\uf294"},bold:{code:"\uf032"},bolt:{code:"\uf0e7"},bomb:{code:"\uf1e2"},bone:{code:"\uf5d7"},bong:{code:"\uf55c"},book:{code:"\uf02d"},"book-dead":{code:"\uf6b7"},"book-medical":{code:"\uf7e6"},"book-open":{code:"\uf518"},"book-reader":{code:"\uf5da"},bookmark:{code:"\uf02e"},bootstrap:{code:"\uf836"},"border-all":{code:"\uf84c"},"border-none":{code:"\uf850"},"border-style":{code:"\uf853"},"bowling-ball":{code:"\uf436"},box:{code:"\uf466"},"box-open":{code:"\uf49e"},
boxes:{code:"\uf468"},braille:{code:"\uf2a1"},brain:{code:"\uf5dc"},"bread-slice":{code:"\uf7ec"},briefcase:{code:"\uf0b1"},"briefcase-medical":{code:"\uf469"},"broadcast-tower":{code:"\uf519"},broom:{code:"\uf51a"},brush:{code:"\uf55d"},btc:{code:"\uf15a"},buffer:{code:"\uf837"},bug:{code:"\uf188"},building:{code:"\uf1ad"},bullhorn:{code:"\uf0a1"},bullseye:{code:"\uf140"},burn:{code:"\uf46a"},buromobelexperte:{code:"\uf37f"},bus:{code:"\uf207"},"bus-alt":{code:"\uf55e"},"business-time":{code:"\uf64a"},
"buy-n-large":{code:"\uf8a6"},buysellads:{code:"\uf20d"},calculator:{code:"\uf1ec"},calendar:{code:"\uf133"},"calendar-alt":{code:"\uf073"},"calendar-check":{code:"\uf274"},"calendar-day":{code:"\uf783"},"calendar-minus":{code:"\uf272"},"calendar-plus":{code:"\uf271"},"calendar-times":{code:"\uf273"},"calendar-week":{code:"\uf784"},camera:{code:"\uf030"},"camera-retro":{code:"\uf083"},campground:{code:"\uf6bb"},"canadian-maple-leaf":{code:"\uf785"},"candy-cane":{code:"\uf786"},cannabis:{code:"\uf55f"},
capsules:{code:"\uf46b"},car:{code:"\uf1b9"},"car-alt":{code:"\uf5de"},"car-battery":{code:"\uf5df"},"car-crash":{code:"\uf5e1"},"car-side":{code:"\uf5e4"},caravan:{code:"\uf8ff"},"caret-down":{code:"\uf0d7"},"caret-left":{code:"\uf0d9"},"caret-right":{code:"\uf0da"},"caret-square-down":{code:"\uf150"},"caret-square-left":{code:"\uf191"},"caret-square-right":{code:"\uf152"},"caret-square-up":{code:"\uf151"},"caret-up":{code:"\uf0d8"},carrot:{code:"\uf787"},"cart-arrow-down":{code:"\uf218"},"cart-plus":{code:"\uf217"},
"cash-register":{code:"\uf788"},cat:{code:"\uf6be"},"cc-amazon-pay":{code:"\uf42d"},"cc-amex":{code:"\uf1f3"},"cc-apple-pay":{code:"\uf416"},"cc-diners-club":{code:"\uf24c"},"cc-discover":{code:"\uf1f2"},"cc-jcb":{code:"\uf24b"},"cc-mastercard":{code:"\uf1f1"},"cc-paypal":{code:"\uf1f4"},"cc-stripe":{code:"\uf1f5"},"cc-visa":{code:"\uf1f0"},centercode:{code:"\uf380"},centos:{code:"\uf789"},certificate:{code:"\uf0a3"},chair:{code:"\uf6c0"},chalkboard:{code:"\uf51b"},"chalkboard-teacher":{code:"\uf51c"},
"charging-station":{code:"\uf5e7"},"chart-area":{code:"\uf1fe"},"chart-bar":{code:"\uf080"},"chart-line":{code:"\uf201"},"chart-pie":{code:"\uf200"},check:{code:"\uf00c"},"check-circle":{code:"\uf058"},"check-double":{code:"\uf560"},"check-square":{code:"\uf14a"},cheese:{code:"\uf7ef"},chess:{code:"\uf439"},"chess-bishop":{code:"\uf43a"},"chess-board":{code:"\uf43c"},"chess-king":{code:"\uf43f"},"chess-knight":{code:"\uf441"},"chess-pawn":{code:"\uf443"},"chess-queen":{code:"\uf445"},"chess-rook":{code:"\uf447"},
"chevron-circle-down":{code:"\uf13a"},"chevron-circle-left":{code:"\uf137"},"chevron-circle-right":{code:"\uf138"},"chevron-circle-up":{code:"\uf139"},"chevron-down":{code:"\uf078"},"chevron-left":{code:"\uf053"},"chevron-right":{code:"\uf054"},"chevron-up":{code:"\uf077"},child:{code:"\uf1ae"},chrome:{code:"\uf268"},chromecast:{code:"\uf838"},church:{code:"\uf51d"},circle:{code:"\uf111"},"circle-notch":{code:"\uf1ce"},city:{code:"\uf64f"},"clinic-medical":{code:"\uf7f2"},clipboard:{code:"\uf328"},
"clipboard-check":{code:"\uf46c"},"clipboard-list":{code:"\uf46d"},clock:{code:"\uf017"},clone:{code:"\uf24d"},"closed-captioning":{code:"\uf20a"},cloud:{code:"\uf0c2"},"cloud-download-alt":{code:"\uf381"},"cloud-meatball":{code:"\uf73b"},"cloud-moon":{code:"\uf6c3"},"cloud-moon-rain":{code:"\uf73c"},"cloud-rain":{code:"\uf73d"},"cloud-showers-heavy":{code:"\uf740"},"cloud-sun":{code:"\uf6c4"},"cloud-sun-rain":{code:"\uf743"},"cloud-upload-alt":{code:"\uf382"},cloudscale:{code:"\uf383"},cloudsmith:{code:"\uf384"},
cloudversify:{code:"\uf385"},cocktail:{code:"\uf561"},code:{code:"\uf121"},"code-branch":{code:"\uf126"},codepen:{code:"\uf1cb"},codiepie:{code:"\uf284"},coffee:{code:"\uf0f4"},cog:{code:"\uf013"},cogs:{code:"\uf085"},coins:{code:"\uf51e"},columns:{code:"\uf0db"},comment:{code:"\uf075"},"comment-alt":{code:"\uf27a"},"comment-dollar":{code:"\uf651"},"comment-dots":{code:"\uf4ad"},"comment-medical":{code:"\uf7f5"},"comment-slash":{code:"\uf4b3"},comments:{code:"\uf086"},"comments-dollar":{code:"\uf653"},
"compact-disc":{code:"\uf51f"},compass:{code:"\uf14e"},compress:{code:"\uf066"},"compress-alt":{code:"\uf422"},"compress-arrows-alt":{code:"\uf78c"},"concierge-bell":{code:"\uf562"},confluence:{code:"\uf78d"},connectdevelop:{code:"\uf20e"},contao:{code:"\uf26d"},cookie:{code:"\uf563"},"cookie-bite":{code:"\uf564"},copy:{code:"\uf0c5"},copyright:{code:"\uf1f9"},"cotton-bureau":{code:"\uf89e"},couch:{code:"\uf4b8"},cpanel:{code:"\uf388"},"creative-commons":{code:"\uf25e"},"creative-commons-by":{code:"\uf4e7"},
"creative-commons-nc":{code:"\uf4e8"},"creative-commons-nc-eu":{code:"\uf4e9"},"creative-commons-nc-jp":{code:"\uf4ea"},"creative-commons-nd":{code:"\uf4eb"},"creative-commons-pd":{code:"\uf4ec"},"creative-commons-pd-alt":{code:"\uf4ed"},"creative-commons-remix":{code:"\uf4ee"},"creative-commons-sa":{code:"\uf4ef"},"creative-commons-sampling":{code:"\uf4f0"},"creative-commons-sampling-plus":{code:"\uf4f1"},"creative-commons-share":{code:"\uf4f2"},"creative-commons-zero":{code:"\uf4f3"},"credit-card":{code:"\uf09d"},
"critical-role":{code:"\uf6c9"},crop:{code:"\uf125"},"crop-alt":{code:"\uf565"},cross:{code:"\uf654"},crosshairs:{code:"\uf05b"},crow:{code:"\uf520"},crown:{code:"\uf521"},crutch:{code:"\uf7f7"},css3:{code:"\uf13c"},"css3-alt":{code:"\uf38b"},cube:{code:"\uf1b2"},cubes:{code:"\uf1b3"},cut:{code:"\uf0c4"},cuttlefish:{code:"\uf38c"},"d-and-d":{code:"\uf38d"},"d-and-d-beyond":{code:"\uf6ca"},dailymotion:{code:"\uf952"},dashcube:{code:"\uf210"},database:{code:"\uf1c0"},deaf:{code:"\uf2a4"},delicious:{code:"\uf1a5"},
democrat:{code:"\uf747"},deploydog:{code:"\uf38e"},deskpro:{code:"\uf38f"},desktop:{code:"\uf108"},dev:{code:"\uf6cc"},deviantart:{code:"\uf1bd"},dharmachakra:{code:"\uf655"},dhl:{code:"\uf790"},diagnoses:{code:"\uf470"},diaspora:{code:"\uf791"},dice:{code:"\uf522"},"dice-d20":{code:"\uf6cf"},"dice-d6":{code:"\uf6d1"},"dice-five":{code:"\uf523"},"dice-four":{code:"\uf524"},"dice-one":{code:"\uf525"},"dice-six":{code:"\uf526"},"dice-three":{code:"\uf527"},"dice-two":{code:"\uf528"},digg:{code:"\uf1a6"},
"digital-ocean":{code:"\uf391"},"digital-tachograph":{code:"\uf566"},directions:{code:"\uf5eb"},discord:{code:"\uf392"},discourse:{code:"\uf393"},divide:{code:"\uf529"},dizzy:{code:"\uf567"},dna:{code:"\uf471"},dochub:{code:"\uf394"},docker:{code:"\uf395"},dog:{code:"\uf6d3"},"dollar-sign":{code:"\uf155"},dolly:{code:"\uf472"},"dolly-flatbed":{code:"\uf474"},donate:{code:"\uf4b9"},"door-closed":{code:"\uf52a"},"door-open":{code:"\uf52b"},"dot-circle":{code:"\uf192"},dove:{code:"\uf4ba"},download:{code:"\uf019"},
draft2digital:{code:"\uf396"},"drafting-compass":{code:"\uf568"},dragon:{code:"\uf6d5"},"draw-polygon":{code:"\uf5ee"},dribbble:{code:"\uf17d"},"dribbble-square":{code:"\uf397"},dropbox:{code:"\uf16b"},drum:{code:"\uf569"},"drum-steelpan":{code:"\uf56a"},"drumstick-bite":{code:"\uf6d7"},drupal:{code:"\uf1a9"},dumbbell:{code:"\uf44b"},dumpster:{code:"\uf793"},"dumpster-fire":{code:"\uf794"},dungeon:{code:"\uf6d9"},dyalog:{code:"\uf399"},earlybirds:{code:"\uf39a"},ebay:{code:"\uf4f4"},edge:{code:"\uf282"},
edit:{code:"\uf044"},egg:{code:"\uf7fb"},eject:{code:"\uf052"},elementor:{code:"\uf430"},"ellipsis-h":{code:"\uf141"},"ellipsis-v":{code:"\uf142"},ello:{code:"\uf5f1"},ember:{code:"\uf423"},empire:{code:"\uf1d1"},envelope:{code:"\uf0e0"},"envelope-open":{code:"\uf2b6"},"envelope-open-text":{code:"\uf658"},"envelope-square":{code:"\uf199"},envira:{code:"\uf299"},equals:{code:"\uf52c"},eraser:{code:"\uf12d"},erlang:{code:"\uf39d"},ethereum:{code:"\uf42e"},ethernet:{code:"\uf796"},etsy:{code:"\uf2d7"},
"euro-sign":{code:"\uf153"},evernote:{code:"\uf839"},"exchange-alt":{code:"\uf362"},exclamation:{code:"\uf12a"},"exclamation-circle":{code:"\uf06a"},"exclamation-triangle":{code:"\uf071"},expand:{code:"\uf065"},"expand-alt":{code:"\uf424"},"expand-arrows-alt":{code:"\uf31e"},expeditedssl:{code:"\uf23e"},"external-link-alt":{code:"\uf35d"},"external-link-square-alt":{code:"\uf360"},eye:{code:"\uf06e"},"eye-dropper":{code:"\uf1fb"},"eye-slash":{code:"\uf070"},facebook:{code:"\uf09a"},"facebook-f":{code:"\uf39e"},
"facebook-messenger":{code:"\uf39f"},"facebook-square":{code:"\uf082"},fan:{code:"\uf863"},"fantasy-flight-games":{code:"\uf6dc"},"fast-backward":{code:"\uf049"},"fast-forward":{code:"\uf050"},fax:{code:"\uf1ac"},feather:{code:"\uf52d"},"feather-alt":{code:"\uf56b"},fedex:{code:"\uf797"},fedora:{code:"\uf798"},female:{code:"\uf182"},"fighter-jet":{code:"\uf0fb"},figma:{code:"\uf799"},file:{code:"\uf15b"},"file-alt":{code:"\uf15c"},"file-archive":{code:"\uf1c6"},"file-audio":{code:"\uf1c7"},"file-code":{code:"\uf1c9"},
"file-contract":{code:"\uf56c"},"file-csv":{code:"\uf6dd"},"file-download":{code:"\uf56d"},"file-excel":{code:"\uf1c3"},"file-export":{code:"\uf56e"},"file-image":{code:"\uf1c5"},"file-import":{code:"\uf56f"},"file-invoice":{code:"\uf570"},"file-invoice-dollar":{code:"\uf571"},"file-medical":{code:"\uf477"},"file-medical-alt":{code:"\uf478"},"file-pdf":{code:"\uf1c1"},"file-powerpoint":{code:"\uf1c4"},"file-prescription":{code:"\uf572"},"file-signature":{code:"\uf573"},"file-upload":{code:"\uf574"},
"file-video":{code:"\uf1c8"},"file-word":{code:"\uf1c2"},fill:{code:"\uf575"},"fill-drip":{code:"\uf576"},film:{code:"\uf008"},filter:{code:"\uf0b0"},fingerprint:{code:"\uf577"},fire:{code:"\uf06d"},"fire-alt":{code:"\uf7e4"},"fire-extinguisher":{code:"\uf134"},firefox:{code:"\uf269"},"firefox-browser":{code:"\uf907"},"first-aid":{code:"\uf479"},"first-order":{code:"\uf2b0"},"first-order-alt":{code:"\uf50a"},firstdraft:{code:"\uf3a1"},fish:{code:"\uf578"},"fist-raised":{code:"\uf6de"},flag:{code:"\uf024"},
"flag-checkered":{code:"\uf11e"},"flag-usa":{code:"\uf74d"},flask:{code:"\uf0c3"},flickr:{code:"\uf16e"},flipboard:{code:"\uf44d"},flushed:{code:"\uf579"},fly:{code:"\uf417"},folder:{code:"\uf07b"},"folder-minus":{code:"\uf65d"},"folder-open":{code:"\uf07c"},"folder-plus":{code:"\uf65e"},font:{code:"\uf031"},"font-awesome":{code:"\uf2b4"},"font-awesome-alt":{code:"\uf35c"},"font-awesome-flag":{code:"\uf425"},"font-awesome-logo-full":{code:"\uf4e6"},fonticons:{code:"\uf280"},"fonticons-fi":{code:"\uf3a2"},
"football-ball":{code:"\uf44e"},"fort-awesome":{code:"\uf286"},"fort-awesome-alt":{code:"\uf3a3"},forumbee:{code:"\uf211"},forward:{code:"\uf04e"},foursquare:{code:"\uf180"},"free-code-camp":{code:"\uf2c5"},freebsd:{code:"\uf3a4"},frog:{code:"\uf52e"},frown:{code:"\uf119"},"frown-open":{code:"\uf57a"},fulcrum:{code:"\uf50b"},"funnel-dollar":{code:"\uf662"},futbol:{code:"\uf1e3"},"galactic-republic":{code:"\uf50c"},"galactic-senate":{code:"\uf50d"},gamepad:{code:"\uf11b"},"gas-pump":{code:"\uf52f"},
gavel:{code:"\uf0e3"},gem:{code:"\uf3a5"},genderless:{code:"\uf22d"},"get-pocket":{code:"\uf265"},gg:{code:"\uf260"},"gg-circle":{code:"\uf261"},ghost:{code:"\uf6e2"},gift:{code:"\uf06b"},gifts:{code:"\uf79c"},git:{code:"\uf1d3"},"git-alt":{code:"\uf841"},"git-square":{code:"\uf1d2"},github:{code:"\uf09b"},"github-alt":{code:"\uf113"},"github-square":{code:"\uf092"},gitkraken:{code:"\uf3a6"},gitlab:{code:"\uf296"},gitter:{code:"\uf426"},"glass-cheers":{code:"\uf79f"},"glass-martini":{code:"\uf000"},
"glass-martini-alt":{code:"\uf57b"},"glass-whiskey":{code:"\uf7a0"},glasses:{code:"\uf530"},glide:{code:"\uf2a5"},"glide-g":{code:"\uf2a6"},globe:{code:"\uf0ac"},"globe-africa":{code:"\uf57c"},"globe-americas":{code:"\uf57d"},"globe-asia":{code:"\uf57e"},"globe-europe":{code:"\uf7a2"},gofore:{code:"\uf3a7"},"golf-ball":{code:"\uf450"},goodreads:{code:"\uf3a8"},"goodreads-g":{code:"\uf3a9"},google:{code:"\uf1a0"},"google-drive":{code:"\uf3aa"},"google-play":{code:"\uf3ab"},"google-plus":{code:"\uf2b3"},
"google-plus-g":{code:"\uf0d5"},"google-plus-square":{code:"\uf0d4"},"google-wallet":{code:"\uf1ee"},gopuram:{code:"\uf664"},"graduation-cap":{code:"\uf19d"},gratipay:{code:"\uf184"},grav:{code:"\uf2d6"},"greater-than":{code:"\uf531"},"greater-than-equal":{code:"\uf532"},grimace:{code:"\uf57f"},grin:{code:"\uf580"},"grin-alt":{code:"\uf581"},"grin-beam":{code:"\uf582"},"grin-beam-sweat":{code:"\uf583"},"grin-hearts":{code:"\uf584"},"grin-squint":{code:"\uf585"},"grin-squint-tears":{code:"\uf586"},
"grin-stars":{code:"\uf587"},"grin-tears":{code:"\uf588"},"grin-tongue":{code:"\uf589"},"grin-tongue-squint":{code:"\uf58a"},"grin-tongue-wink":{code:"\uf58b"},"grin-wink":{code:"\uf58c"},"grip-horizontal":{code:"\uf58d"},"grip-lines":{code:"\uf7a4"},"grip-lines-vertical":{code:"\uf7a5"},"grip-vertical":{code:"\uf58e"},gripfire:{code:"\uf3ac"},grunt:{code:"\uf3ad"},guitar:{code:"\uf7a6"},gulp:{code:"\uf3ae"},"h-square":{code:"\uf0fd"},"hacker-news":{code:"\uf1d4"},"hacker-news-square":{code:"\uf3af"},
hackerrank:{code:"\uf5f7"},hamburger:{code:"\uf805"},hammer:{code:"\uf6e3"},hamsa:{code:"\uf665"},"hand-holding":{code:"\uf4bd"},"hand-holding-heart":{code:"\uf4be"},"hand-holding-usd":{code:"\uf4c0"},"hand-lizard":{code:"\uf258"},"hand-middle-finger":{code:"\uf806"},"hand-paper":{code:"\uf256"},"hand-peace":{code:"\uf25b"},"hand-point-down":{code:"\uf0a7"},"hand-point-left":{code:"\uf0a5"},"hand-point-right":{code:"\uf0a4"},"hand-point-up":{code:"\uf0a6"},"hand-pointer":{code:"\uf25a"},"hand-rock":{code:"\uf255"},
"hand-scissors":{code:"\uf257"},"hand-spock":{code:"\uf259"},hands:{code:"\uf4c2"},"hands-helping":{code:"\uf4c4"},handshake:{code:"\uf2b5"},hanukiah:{code:"\uf6e6"},"hard-hat":{code:"\uf807"},hashtag:{code:"\uf292"},"hat-cowboy":{code:"\uf8c0"},"hat-cowboy-side":{code:"\uf8c1"},"hat-wizard":{code:"\uf6e8"},hdd:{code:"\uf0a0"},heading:{code:"\uf1dc"},headphones:{code:"\uf025"},"headphones-alt":{code:"\uf58f"},headset:{code:"\uf590"},heart:{code:"\uf004"},"heart-broken":{code:"\uf7a9"},heartbeat:{code:"\uf21e"},
helicopter:{code:"\uf533"},highlighter:{code:"\uf591"},hiking:{code:"\uf6ec"},hippo:{code:"\uf6ed"},hips:{code:"\uf452"},"hire-a-helper":{code:"\uf3b0"},history:{code:"\uf1da"},"hockey-puck":{code:"\uf453"},"holly-berry":{code:"\uf7aa"},home:{code:"\uf015"},hooli:{code:"\uf427"},hornbill:{code:"\uf592"},horse:{code:"\uf6f0"},"horse-head":{code:"\uf7ab"},hospital:{code:"\uf0f8"},"hospital-alt":{code:"\uf47d"},"hospital-symbol":{code:"\uf47e"},"hot-tub":{code:"\uf593"},hotdog:{code:"\uf80f"},hotel:{code:"\uf594"},
hotjar:{code:"\uf3b1"},hourglass:{code:"\uf254"},"hourglass-end":{code:"\uf253"},"hourglass-half":{code:"\uf252"},"hourglass-start":{code:"\uf251"},"house-damage":{code:"\uf6f1"},houzz:{code:"\uf27c"},hryvnia:{code:"\uf6f2"},html5:{code:"\uf13b"},hubspot:{code:"\uf3b2"},"i-cursor":{code:"\uf246"},"ice-cream":{code:"\uf810"},icicles:{code:"\uf7ad"},icons:{code:"\uf86d"},"id-badge":{code:"\uf2c1"},"id-card":{code:"\uf2c2"},"id-card-alt":{code:"\uf47f"},ideal:{code:"\uf913"},igloo:{code:"\uf7ae"},image:{code:"\uf03e"},
images:{code:"\uf302"},imdb:{code:"\uf2d8"},inbox:{code:"\uf01c"},indent:{code:"\uf03c"},industry:{code:"\uf275"},infinity:{code:"\uf534"},info:{code:"\uf129"},"info-circle":{code:"\uf05a"},instagram:{code:"\uf16d"},"instagram-square":{code:"\uf955"},intercom:{code:"\uf7af"},"internet-explorer":{code:"\uf26b"},invision:{code:"\uf7b0"},ioxhost:{code:"\uf208"},italic:{code:"\uf033"},"itch-io":{code:"\uf83a"},itunes:{code:"\uf3b4"},"itunes-note":{code:"\uf3b5"},java:{code:"\uf4e4"},jedi:{code:"\uf669"},
"jedi-order":{code:"\uf50e"},jenkins:{code:"\uf3b6"},jira:{code:"\uf7b1"},joget:{code:"\uf3b7"},joint:{code:"\uf595"},joomla:{code:"\uf1aa"},"journal-whills":{code:"\uf66a"},js:{code:"\uf3b8"},"js-square":{code:"\uf3b9"},jsfiddle:{code:"\uf1cc"},kaaba:{code:"\uf66b"},kaggle:{code:"\uf5fa"},key:{code:"\uf084"},keybase:{code:"\uf4f5"},keyboard:{code:"\uf11c"},keycdn:{code:"\uf3ba"},khanda:{code:"\uf66d"},kickstarter:{code:"\uf3bb"},"kickstarter-k":{code:"\uf3bc"},kiss:{code:"\uf596"},"kiss-beam":{code:"\uf597"},
"kiss-wink-heart":{code:"\uf598"},"kiwi-bird":{code:"\uf535"},korvue:{code:"\uf42f"},landmark:{code:"\uf66f"},language:{code:"\uf1ab"},laptop:{code:"\uf109"},"laptop-code":{code:"\uf5fc"},"laptop-medical":{code:"\uf812"},laravel:{code:"\uf3bd"},lastfm:{code:"\uf202"},"lastfm-square":{code:"\uf203"},laugh:{code:"\uf599"},"laugh-beam":{code:"\uf59a"},"laugh-squint":{code:"\uf59b"},"laugh-wink":{code:"\uf59c"},"layer-group":{code:"\uf5fd"},leaf:{code:"\uf06c"},leanpub:{code:"\uf212"},lemon:{code:"\uf094"},
less:{code:"\uf41d"},"less-than":{code:"\uf536"},"less-than-equal":{code:"\uf537"},"level-down-alt":{code:"\uf3be"},"level-up-alt":{code:"\uf3bf"},"life-ring":{code:"\uf1cd"},lightbulb:{code:"\uf0eb"},line:{code:"\uf3c0"},link:{code:"\uf0c1"},linkedin:{code:"\uf08c"},"linkedin-in":{code:"\uf0e1"},linode:{code:"\uf2b8"},linux:{code:"\uf17c"},"lira-sign":{code:"\uf195"},list:{code:"\uf03a"},"list-alt":{code:"\uf022"},"list-ol":{code:"\uf0cb"},"list-ul":{code:"\uf0ca"},"location-arrow":{code:"\uf124"},
lock:{code:"\uf023"},"lock-open":{code:"\uf3c1"},"long-arrow-alt-down":{code:"\uf309"},"long-arrow-alt-left":{code:"\uf30a"},"long-arrow-alt-right":{code:"\uf30b"},"long-arrow-alt-up":{code:"\uf30c"},"low-vision":{code:"\uf2a8"},"luggage-cart":{code:"\uf59d"},lyft:{code:"\uf3c3"},magento:{code:"\uf3c4"},magic:{code:"\uf0d0"},magnet:{code:"\uf076"},"mail-bulk":{code:"\uf674"},mailchimp:{code:"\uf59e"},male:{code:"\uf183"},mandalorian:{code:"\uf50f"},map:{code:"\uf279"},"map-marked":{code:"\uf59f"},
"map-marked-alt":{code:"\uf5a0"},"map-marker":{code:"\uf041"},"map-marker-alt":{code:"\uf3c5"},"map-pin":{code:"\uf276"},"map-signs":{code:"\uf277"},markdown:{code:"\uf60f"},marker:{code:"\uf5a1"},mars:{code:"\uf222"},"mars-double":{code:"\uf227"},"mars-stroke":{code:"\uf229"},"mars-stroke-h":{code:"\uf22b"},"mars-stroke-v":{code:"\uf22a"},mask:{code:"\uf6fa"},mastodon:{code:"\uf4f6"},maxcdn:{code:"\uf136"},mdb:{code:"\uf8ca"},medal:{code:"\uf5a2"},medapps:{code:"\uf3c6"},medium:{code:"\uf23a"},"medium-m":{code:"\uf3c7"},
medkit:{code:"\uf0fa"},medrt:{code:"\uf3c8"},meetup:{code:"\uf2e0"},megaport:{code:"\uf5a3"},meh:{code:"\uf11a"},"meh-blank":{code:"\uf5a4"},"meh-rolling-eyes":{code:"\uf5a5"},memory:{code:"\uf538"},mendeley:{code:"\uf7b3"},menorah:{code:"\uf676"},mercury:{code:"\uf223"},meteor:{code:"\uf753"},microblog:{code:"\uf91a"},microchip:{code:"\uf2db"},microphone:{code:"\uf130"},"microphone-alt":{code:"\uf3c9"},"microphone-alt-slash":{code:"\uf539"},"microphone-slash":{code:"\uf131"},microscope:{code:"\uf610"},
microsoft:{code:"\uf3ca"},minus:{code:"\uf068"},"minus-circle":{code:"\uf056"},"minus-square":{code:"\uf146"},mitten:{code:"\uf7b5"},mix:{code:"\uf3cb"},mixcloud:{code:"\uf289"},mixer:{code:"\uf956"},mizuni:{code:"\uf3cc"},mobile:{code:"\uf10b"},"mobile-alt":{code:"\uf3cd"},modx:{code:"\uf285"},monero:{code:"\uf3d0"},"money-bill":{code:"\uf0d6"},"money-bill-alt":{code:"\uf3d1"},"money-bill-wave":{code:"\uf53a"},"money-bill-wave-alt":{code:"\uf53b"},"money-check":{code:"\uf53c"},"money-check-alt":{code:"\uf53d"},
monument:{code:"\uf5a6"},moon:{code:"\uf186"},"mortar-pestle":{code:"\uf5a7"},mosque:{code:"\uf678"},motorcycle:{code:"\uf21c"},mountain:{code:"\uf6fc"},mouse:{code:"\uf8cc"},"mouse-pointer":{code:"\uf245"},"mug-hot":{code:"\uf7b6"},music:{code:"\uf001"},napster:{code:"\uf3d2"},neos:{code:"\uf612"},"network-wired":{code:"\uf6ff"},neuter:{code:"\uf22c"},newspaper:{code:"\uf1ea"},nimblr:{code:"\uf5a8"},node:{code:"\uf419"},"node-js":{code:"\uf3d3"},"not-equal":{code:"\uf53e"},"notes-medical":{code:"\uf481"},
npm:{code:"\uf3d4"},ns8:{code:"\uf3d5"},nutritionix:{code:"\uf3d6"},"object-group":{code:"\uf247"},"object-ungroup":{code:"\uf248"},odnoklassniki:{code:"\uf263"},"odnoklassniki-square":{code:"\uf264"},"oil-can":{code:"\uf613"},"old-republic":{code:"\uf510"},om:{code:"\uf679"},opencart:{code:"\uf23d"},openid:{code:"\uf19b"},opera:{code:"\uf26a"},"optin-monster":{code:"\uf23c"},orcid:{code:"\uf8d2"},osi:{code:"\uf41a"},otter:{code:"\uf700"},outdent:{code:"\uf03b"},page4:{code:"\uf3d7"},pagelines:{code:"\uf18c"},
pager:{code:"\uf815"},"paint-brush":{code:"\uf1fc"},"paint-roller":{code:"\uf5aa"},palette:{code:"\uf53f"},palfed:{code:"\uf3d8"},pallet:{code:"\uf482"},"paper-plane":{code:"\uf1d8"},paperclip:{code:"\uf0c6"},"parachute-box":{code:"\uf4cd"},paragraph:{code:"\uf1dd"},parking:{code:"\uf540"},passport:{code:"\uf5ab"},pastafarianism:{code:"\uf67b"},paste:{code:"\uf0ea"},patreon:{code:"\uf3d9"},pause:{code:"\uf04c"},"pause-circle":{code:"\uf28b"},paw:{code:"\uf1b0"},paypal:{code:"\uf1ed"},peace:{code:"\uf67c"},
pen:{code:"\uf304"},"pen-alt":{code:"\uf305"},"pen-fancy":{code:"\uf5ac"},"pen-nib":{code:"\uf5ad"},"pen-square":{code:"\uf14b"},"pencil-alt":{code:"\uf303"},"pencil-ruler":{code:"\uf5ae"},"penny-arcade":{code:"\uf704"},"people-carry":{code:"\uf4ce"},"pepper-hot":{code:"\uf816"},percent:{code:"\uf295"},percentage:{code:"\uf541"},periscope:{code:"\uf3da"},"person-booth":{code:"\uf756"},phabricator:{code:"\uf3db"},"phoenix-framework":{code:"\uf3dc"},"phoenix-squadron":{code:"\uf511"},phone:{code:"\uf095"},
"phone-alt":{code:"\uf879"},"phone-slash":{code:"\uf3dd"},"phone-square":{code:"\uf098"},"phone-square-alt":{code:"\uf87b"},"phone-volume":{code:"\uf2a0"},"photo-video":{code:"\uf87c"},php:{code:"\uf457"},"pied-piper":{code:"\uf2ae"},"pied-piper-alt":{code:"\uf1a8"},"pied-piper-hat":{code:"\uf4e5"},"pied-piper-pp":{code:"\uf1a7"},"pied-piper-square":{code:"\uf91e"},"piggy-bank":{code:"\uf4d3"},pills:{code:"\uf484"},pinterest:{code:"\uf0d2"},"pinterest-p":{code:"\uf231"},"pinterest-square":{code:"\uf0d3"},
"pizza-slice":{code:"\uf818"},"place-of-worship":{code:"\uf67f"},plane:{code:"\uf072"},"plane-arrival":{code:"\uf5af"},"plane-departure":{code:"\uf5b0"},play:{code:"\uf04b"},"play-circle":{code:"\uf144"},playstation:{code:"\uf3df"},plug:{code:"\uf1e6"},plus:{code:"\uf067"},"plus-circle":{code:"\uf055"},"plus-square":{code:"\uf0fe"},podcast:{code:"\uf2ce"},poll:{code:"\uf681"},"poll-h":{code:"\uf682"},poo:{code:"\uf2fe"},"poo-storm":{code:"\uf75a"},poop:{code:"\uf619"},portrait:{code:"\uf3e0"},"pound-sign":{code:"\uf154"},
"power-off":{code:"\uf011"},pray:{code:"\uf683"},"praying-hands":{code:"\uf684"},prescription:{code:"\uf5b1"},"prescription-bottle":{code:"\uf485"},"prescription-bottle-alt":{code:"\uf486"},print:{code:"\uf02f"},procedures:{code:"\uf487"},"product-hunt":{code:"\uf288"},"project-diagram":{code:"\uf542"},pushed:{code:"\uf3e1"},"puzzle-piece":{code:"\uf12e"},python:{code:"\uf3e2"},qq:{code:"\uf1d6"},qrcode:{code:"\uf029"},question:{code:"\uf128"},"question-circle":{code:"\uf059"},quidditch:{code:"\uf458"},
quinscape:{code:"\uf459"},quora:{code:"\uf2c4"},"quote-left":{code:"\uf10d"},"quote-right":{code:"\uf10e"},quran:{code:"\uf687"},"r-project":{code:"\uf4f7"},radiation:{code:"\uf7b9"},"radiation-alt":{code:"\uf7ba"},rainbow:{code:"\uf75b"},random:{code:"\uf074"},"raspberry-pi":{code:"\uf7bb"},ravelry:{code:"\uf2d9"},react:{code:"\uf41b"},reacteurope:{code:"\uf75d"},readme:{code:"\uf4d5"},rebel:{code:"\uf1d0"},receipt:{code:"\uf543"},"record-vinyl":{code:"\uf8d9"},recycle:{code:"\uf1b8"},"red-river":{code:"\uf3e3"},
reddit:{code:"\uf1a1"},"reddit-alien":{code:"\uf281"},"reddit-square":{code:"\uf1a2"},redhat:{code:"\uf7bc"},redo:{code:"\uf01e"},"redo-alt":{code:"\uf2f9"},registered:{code:"\uf25d"},"remove-format":{code:"\uf87d"},renren:{code:"\uf18b"},reply:{code:"\uf3e5"},"reply-all":{code:"\uf122"},replyd:{code:"\uf3e6"},republican:{code:"\uf75e"},researchgate:{code:"\uf4f8"},resolving:{code:"\uf3e7"},restroom:{code:"\uf7bd"},retweet:{code:"\uf079"},rev:{code:"\uf5b2"},ribbon:{code:"\uf4d6"},ring:{code:"\uf70b"},
road:{code:"\uf018"},robot:{code:"\uf544"},rocket:{code:"\uf135"},rocketchat:{code:"\uf3e8"},rockrms:{code:"\uf3e9"},route:{code:"\uf4d7"},rss:{code:"\uf09e"},"rss-square":{code:"\uf143"},"ruble-sign":{code:"\uf158"},ruler:{code:"\uf545"},"ruler-combined":{code:"\uf546"},"ruler-horizontal":{code:"\uf547"},"ruler-vertical":{code:"\uf548"},running:{code:"\uf70c"},"rupee-sign":{code:"\uf156"},"sad-cry":{code:"\uf5b3"},"sad-tear":{code:"\uf5b4"},safari:{code:"\uf267"},salesforce:{code:"\uf83b"},sass:{code:"\uf41e"},
satellite:{code:"\uf7bf"},"satellite-dish":{code:"\uf7c0"},save:{code:"\uf0c7"},schlix:{code:"\uf3ea"},school:{code:"\uf549"},screwdriver:{code:"\uf54a"},scribd:{code:"\uf28a"},scroll:{code:"\uf70e"},"sd-card":{code:"\uf7c2"},search:{code:"\uf002"},"search-dollar":{code:"\uf688"},"search-location":{code:"\uf689"},"search-minus":{code:"\uf010"},"search-plus":{code:"\uf00e"},searchengin:{code:"\uf3eb"},seedling:{code:"\uf4d8"},sellcast:{code:"\uf2da"},sellsy:{code:"\uf213"},server:{code:"\uf233"},servicestack:{code:"\uf3ec"},
shapes:{code:"\uf61f"},share:{code:"\uf064"},"share-alt":{code:"\uf1e0"},"share-alt-square":{code:"\uf1e1"},"share-square":{code:"\uf14d"},"shekel-sign":{code:"\uf20b"},"shield-alt":{code:"\uf3ed"},ship:{code:"\uf21a"},"shipping-fast":{code:"\uf48b"},shirtsinbulk:{code:"\uf214"},"shoe-prints":{code:"\uf54b"},shopify:{code:"\uf957"},"shopping-bag":{code:"\uf290"},"shopping-basket":{code:"\uf291"},"shopping-cart":{code:"\uf07a"},shopware:{code:"\uf5b5"},shower:{code:"\uf2cc"},"shuttle-van":{code:"\uf5b6"},
sign:{code:"\uf4d9"},"sign-in-alt":{code:"\uf2f6"},"sign-language":{code:"\uf2a7"},"sign-out-alt":{code:"\uf2f5"},signal:{code:"\uf012"},signature:{code:"\uf5b7"},"sim-card":{code:"\uf7c4"},simplybuilt:{code:"\uf215"},sistrix:{code:"\uf3ee"},sitemap:{code:"\uf0e8"},sith:{code:"\uf512"},skating:{code:"\uf7c5"},sketch:{code:"\uf7c6"},skiing:{code:"\uf7c9"},"skiing-nordic":{code:"\uf7ca"},skull:{code:"\uf54c"},"skull-crossbones":{code:"\uf714"},skyatlas:{code:"\uf216"},skype:{code:"\uf17e"},slack:{code:"\uf198"},
"slack-hash":{code:"\uf3ef"},slash:{code:"\uf715"},sleigh:{code:"\uf7cc"},"sliders-h":{code:"\uf1de"},slideshare:{code:"\uf1e7"},smile:{code:"\uf118"},"smile-beam":{code:"\uf5b8"},"smile-wink":{code:"\uf4da"},smog:{code:"\uf75f"},smoking:{code:"\uf48d"},"smoking-ban":{code:"\uf54d"},sms:{code:"\uf7cd"},snapchat:{code:"\uf2ab"},"snapchat-ghost":{code:"\uf2ac"},"snapchat-square":{code:"\uf2ad"},snowboarding:{code:"\uf7ce"},snowflake:{code:"\uf2dc"},snowman:{code:"\uf7d0"},snowplow:{code:"\uf7d2"},socks:{code:"\uf696"},
"solar-panel":{code:"\uf5ba"},sort:{code:"\uf0dc"},"sort-alpha-down":{code:"\uf15d"},"sort-alpha-down-alt":{code:"\uf881"},"sort-alpha-up":{code:"\uf15e"},"sort-alpha-up-alt":{code:"\uf882"},"sort-amount-down":{code:"\uf160"},"sort-amount-down-alt":{code:"\uf884"},"sort-amount-up":{code:"\uf161"},"sort-amount-up-alt":{code:"\uf885"},"sort-down":{code:"\uf0dd"},"sort-numeric-down":{code:"\uf162"},"sort-numeric-down-alt":{code:"\uf886"},"sort-numeric-up":{code:"\uf163"},"sort-numeric-up-alt":{code:"\uf887"},
"sort-up":{code:"\uf0de"},soundcloud:{code:"\uf1be"},sourcetree:{code:"\uf7d3"},spa:{code:"\uf5bb"},"space-shuttle":{code:"\uf197"},speakap:{code:"\uf3f3"},"speaker-deck":{code:"\uf83c"},"spell-check":{code:"\uf891"},spider:{code:"\uf717"},spinner:{code:"\uf110"},splotch:{code:"\uf5bc"},spotify:{code:"\uf1bc"},"spray-can":{code:"\uf5bd"},square:{code:"\uf0c8"},"square-full":{code:"\uf45c"},"square-root-alt":{code:"\uf698"},squarespace:{code:"\uf5be"},"stack-exchange":{code:"\uf18d"},"stack-overflow":{code:"\uf16c"},
stackpath:{code:"\uf842"},stamp:{code:"\uf5bf"},star:{code:"\uf005"},"star-and-crescent":{code:"\uf699"},"star-half":{code:"\uf089"},"star-half-alt":{code:"\uf5c0"},"star-of-david":{code:"\uf69a"},"star-of-life":{code:"\uf621"},staylinked:{code:"\uf3f5"},steam:{code:"\uf1b6"},"steam-square":{code:"\uf1b7"},"steam-symbol":{code:"\uf3f6"},"step-backward":{code:"\uf048"},"step-forward":{code:"\uf051"},stethoscope:{code:"\uf0f1"},"sticker-mule":{code:"\uf3f7"},"sticky-note":{code:"\uf249"},stop:{code:"\uf04d"},
"stop-circle":{code:"\uf28d"},stopwatch:{code:"\uf2f2"},store:{code:"\uf54e"},"store-alt":{code:"\uf54f"},strava:{code:"\uf428"},stream:{code:"\uf550"},"street-view":{code:"\uf21d"},strikethrough:{code:"\uf0cc"},stripe:{code:"\uf429"},"stripe-s":{code:"\uf42a"},stroopwafel:{code:"\uf551"},studiovinari:{code:"\uf3f8"},stumbleupon:{code:"\uf1a4"},"stumbleupon-circle":{code:"\uf1a3"},subscript:{code:"\uf12c"},subway:{code:"\uf239"},suitcase:{code:"\uf0f2"},"suitcase-rolling":{code:"\uf5c1"},sun:{code:"\uf185"},
superpowers:{code:"\uf2dd"},superscript:{code:"\uf12b"},supple:{code:"\uf3f9"},surprise:{code:"\uf5c2"},suse:{code:"\uf7d6"},swatchbook:{code:"\uf5c3"},swift:{code:"\uf8e1"},swimmer:{code:"\uf5c4"},"swimming-pool":{code:"\uf5c5"},symfony:{code:"\uf83d"},synagogue:{code:"\uf69b"},sync:{code:"\uf021"},"sync-alt":{code:"\uf2f1"},syringe:{code:"\uf48e"},table:{code:"\uf0ce"},"table-tennis":{code:"\uf45d"},tablet:{code:"\uf10a"},"tablet-alt":{code:"\uf3fa"},tablets:{code:"\uf490"},"tachometer-alt":{code:"\uf3fd"},
tag:{code:"\uf02b"},tags:{code:"\uf02c"},tape:{code:"\uf4db"},tasks:{code:"\uf0ae"},taxi:{code:"\uf1ba"},teamspeak:{code:"\uf4f9"},teeth:{code:"\uf62e"},"teeth-open":{code:"\uf62f"},telegram:{code:"\uf2c6"},"telegram-plane":{code:"\uf3fe"},"temperature-high":{code:"\uf769"},"temperature-low":{code:"\uf76b"},"tencent-weibo":{code:"\uf1d5"},tenge:{code:"\uf7d7"},terminal:{code:"\uf120"},"text-height":{code:"\uf034"},"text-width":{code:"\uf035"},th:{code:"\uf00a"},"th-large":{code:"\uf009"},"th-list":{code:"\uf00b"},
"the-red-yeti":{code:"\uf69d"},"theater-masks":{code:"\uf630"},themeco:{code:"\uf5c6"},themeisle:{code:"\uf2b2"},thermometer:{code:"\uf491"},"thermometer-empty":{code:"\uf2cb"},"thermometer-full":{code:"\uf2c7"},"thermometer-half":{code:"\uf2c9"},"thermometer-quarter":{code:"\uf2ca"},"thermometer-three-quarters":{code:"\uf2c8"},"think-peaks":{code:"\uf731"},"thumbs-down":{code:"\uf165"},"thumbs-up":{code:"\uf164"},thumbtack:{code:"\uf08d"},"ticket-alt":{code:"\uf3ff"},times:{code:"\uf00d"},"times-circle":{code:"\uf057"},
tint:{code:"\uf043"},"tint-slash":{code:"\uf5c7"},tired:{code:"\uf5c8"},"toggle-off":{code:"\uf204"},"toggle-on":{code:"\uf205"},toilet:{code:"\uf7d8"},"toilet-paper":{code:"\uf71e"},toolbox:{code:"\uf552"},tools:{code:"\uf7d9"},tooth:{code:"\uf5c9"},torah:{code:"\uf6a0"},"torii-gate":{code:"\uf6a1"},tractor:{code:"\uf722"},"trade-federation":{code:"\uf513"},trademark:{code:"\uf25c"},"traffic-light":{code:"\uf637"},trailer:{code:"\uf941"},train:{code:"\uf238"},tram:{code:"\uf7da"},transgender:{code:"\uf224"},
"transgender-alt":{code:"\uf225"},trash:{code:"\uf1f8"},"trash-alt":{code:"\uf2ed"},"trash-restore":{code:"\uf829"},"trash-restore-alt":{code:"\uf82a"},tree:{code:"\uf1bb"},trello:{code:"\uf181"},tripadvisor:{code:"\uf262"},trophy:{code:"\uf091"},truck:{code:"\uf0d1"},"truck-loading":{code:"\uf4de"},"truck-monster":{code:"\uf63b"},"truck-moving":{code:"\uf4df"},"truck-pickup":{code:"\uf63c"},tshirt:{code:"\uf553"},tty:{code:"\uf1e4"},tumblr:{code:"\uf173"},"tumblr-square":{code:"\uf174"},tv:{code:"\uf26c"},
twitch:{code:"\uf1e8"},twitter:{code:"\uf099"},"twitter-square":{code:"\uf081"},typo3:{code:"\uf42b"},uber:{code:"\uf402"},ubuntu:{code:"\uf7df"},uikit:{code:"\uf403"},umbraco:{code:"\uf8e8"},umbrella:{code:"\uf0e9"},"umbrella-beach":{code:"\uf5ca"},underline:{code:"\uf0cd"},undo:{code:"\uf0e2"},"undo-alt":{code:"\uf2ea"},uniregistry:{code:"\uf404"},unity:{code:"\uf949"},"universal-access":{code:"\uf29a"},university:{code:"\uf19c"},unlink:{code:"\uf127"},unlock:{code:"\uf09c"},"unlock-alt":{code:"\uf13e"},
untappd:{code:"\uf405"},upload:{code:"\uf093"},ups:{code:"\uf7e0"},usb:{code:"\uf287"},user:{code:"\uf007"},"user-alt":{code:"\uf406"},"user-alt-slash":{code:"\uf4fa"},"user-astronaut":{code:"\uf4fb"},"user-check":{code:"\uf4fc"},"user-circle":{code:"\uf2bd"},"user-clock":{code:"\uf4fd"},"user-cog":{code:"\uf4fe"},"user-edit":{code:"\uf4ff"},"user-friends":{code:"\uf500"},"user-graduate":{code:"\uf501"},"user-injured":{code:"\uf728"},"user-lock":{code:"\uf502"},"user-md":{code:"\uf0f0"},"user-minus":{code:"\uf503"},
"user-ninja":{code:"\uf504"},"user-nurse":{code:"\uf82f"},"user-plus":{code:"\uf234"},"user-secret":{code:"\uf21b"},"user-shield":{code:"\uf505"},"user-slash":{code:"\uf506"},"user-tag":{code:"\uf507"},"user-tie":{code:"\uf508"},"user-times":{code:"\uf235"},users:{code:"\uf0c0"},"users-cog":{code:"\uf509"},usps:{code:"\uf7e1"},ussunnah:{code:"\uf407"},"utensil-spoon":{code:"\uf2e5"},utensils:{code:"\uf2e7"},vaadin:{code:"\uf408"},"vector-square":{code:"\uf5cb"},venus:{code:"\uf221"},"venus-double":{code:"\uf226"},
"venus-mars":{code:"\uf228"},viacoin:{code:"\uf237"},viadeo:{code:"\uf2a9"},"viadeo-square":{code:"\uf2aa"},vial:{code:"\uf492"},vials:{code:"\uf493"},viber:{code:"\uf409"},video:{code:"\uf03d"},"video-slash":{code:"\uf4e2"},vihara:{code:"\uf6a7"},vimeo:{code:"\uf40a"},"vimeo-square":{code:"\uf194"},"vimeo-v":{code:"\uf27d"},vine:{code:"\uf1ca"},vk:{code:"\uf189"},vnv:{code:"\uf40b"},voicemail:{code:"\uf897"},"volleyball-ball":{code:"\uf45f"},"volume-down":{code:"\uf027"},"volume-mute":{code:"\uf6a9"},
"volume-off":{code:"\uf026"},"volume-up":{code:"\uf028"},"vote-yea":{code:"\uf772"},"vr-cardboard":{code:"\uf729"},vuejs:{code:"\uf41f"},walking:{code:"\uf554"},wallet:{code:"\uf555"},warehouse:{code:"\uf494"},water:{code:"\uf773"},"wave-square":{code:"\uf83e"},waze:{code:"\uf83f"},weebly:{code:"\uf5cc"},weibo:{code:"\uf18a"},weight:{code:"\uf496"},"weight-hanging":{code:"\uf5cd"},weixin:{code:"\uf1d7"},whatsapp:{code:"\uf232"},"whatsapp-square":{code:"\uf40c"},wheelchair:{code:"\uf193"},whmcs:{code:"\uf40d"},
wifi:{code:"\uf1eb"},"wikipedia-w":{code:"\uf266"},wind:{code:"\uf72e"},"window-close":{code:"\uf410"},"window-maximize":{code:"\uf2d0"},"window-minimize":{code:"\uf2d1"},"window-restore":{code:"\uf2d2"},windows:{code:"\uf17a"},"wine-bottle":{code:"\uf72f"},"wine-glass":{code:"\uf4e3"},"wine-glass-alt":{code:"\uf5ce"},wix:{code:"\uf5cf"},"wizards-of-the-coast":{code:"\uf730"},"wolf-pack-battalion":{code:"\uf514"},"won-sign":{code:"\uf159"},wordpress:{code:"\uf19a"},"wordpress-simple":{code:"\uf411"},
wpbeginner:{code:"\uf297"},wpexplorer:{code:"\uf2de"},wpforms:{code:"\uf298"},wpressr:{code:"\uf3e4"},wrench:{code:"\uf0ad"},"x-ray":{code:"\uf497"},xbox:{code:"\uf412"},xing:{code:"\uf168"},"xing-square":{code:"\uf169"},"y-combinator":{code:"\uf23b"},yahoo:{code:"\uf19e"},yammer:{code:"\uf840"},yandex:{code:"\uf413"},"yandex-international":{code:"\uf414"},yarn:{code:"\uf7e3"},yelp:{code:"\uf1e9"},"yen-sign":{code:"\uf157"},"yin-yang":{code:"\uf6ad"},yoast:{code:"\uf2b1"},youtube:{code:"\uf167"},
"youtube-square":{code:"\uf431"},zhihu:{code:"\uf63f"}});to.Icons=pJ;to.Icons=pJ;to.Icons=pJ;var Xd=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js");Xd.vdom=gC;Xd.promise=bg;Xd.arr=cf;Xd.tree=xr;Xd.obj=xf;Xd.string=Ng;Xd.addOrChangeCSSDeclaration=Kp;Xd.addOrChangeLinkedCSS=mu;Xd.defaultStyle=gx;Xd.renderGradient=RE;Xd.defaultAttributes=hx;Xd.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
Xd.pathAttributes=QE;Xd.svgAttributes=PE;Xd.renderMorph=SE;Xd.Transform=oj;Xd.pt=xh;Xd.getSvgVertices=fx;Xd.canBePromotedToCompositionLayer=OE;Xd.config=Yk;var qJ=Xd.vdom;Xd.h=qJ.h;Xd.diff=qJ.diff;Xd.patch=qJ.patch;Xd.createNode=qJ.create;Xd.svgNs="http://www.w3.org/2000/svg";Xd.CanvasHook=function(f){this.canvasMorph=f};Xd.CanvasHook.prototype.hook=function(f,l,p){this.canvasMorph.afterRender(f,this.canvasMorph._canvas!==f&&"CANVAS"==f.tagName)};Xd.InitStroke=function(f,l,p){this.path=f;this.renderer=
l;this.reverse=p};Xd.InitStroke.prototype.hook=function(f,l,p){l=this.path.drawnProportion||0;0!=l&&(f.setAttribute("stroke-width",this.path.borderWidth.valueOf()+1),f.setAttribute("stroke-dasharray",f.getTotalLength()),f.setAttribute("stroke-dashoffset",f.getTotalLength()*(this.reverse?1-l:-1+(1-l))))};var rJ=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js"),p=l.hasOwnProperty("Renderer")&&"function"===typeof l.Renderer?l.Renderer:l.Renderer=function(b){b&&
b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,h){if(!b||!b.isMorph)throw Error("Trying to initialize renderer with an invalid world morph: "+b);if(!(d&&"nodeType"in d))throw Error("Trying to initialize renderer with an invalid root node: "+d);h||(h=d.getRootNode(),h={window:System.global,document:h});this.worldMorph=b;b._renderer=this;this.rootNode=d;this.domNode=
null;this.domEnvironment=h;this.renderMap=new WeakMap;this.fixedMorphNodeMap=new Map;this.renderWorldLoopLater=this.renderWorldLoopProcess=null;this.requestAnimationFrame=h.window.requestAnimationFrame.bind(h.window)}},{key:"clear",value:function(){var b=this,d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return d=b.domNode,a.setCatchFinallyBlocks(2),a.yield(b.stopRenderWorldLoop(),4);case 4:a.leaveTryBlock(3);break;case 2:a.enterCatchBlock();case 3:d&&
(h=d.parentNode,h.removeChild(d),[].concat($jscomp.arrayFromIterable(b.fixedMorphNodeMap.values())).forEach(function(e){return h.removeChild(e)})),b.domNode=null,b.renderMap=new WeakMap,a.jumpToEnd()}})}},{key:"ensureDefaultCSS",value:function(){var b=this,d=this.worldMorph.env.fontMetric;return Xd.promise.waitFor(3E3,function(){return b.domNode.getRootNode()}).then(function(h){return Promise.all([Xd.addOrChangeCSSDeclaration("lively-morphic-css",Xd.defaultCSS,h),Xd.promise.waitFor(1E3,function(){return d.isFontSupported("IBM Plex Sans")},
!1).then(function(a){return!a&&Xd.addOrChangeLinkedCSS("lively-ibm-plex",Xd.config.css.ibmPlex)}),Xd.addOrChangeLinkedCSS("lively-font-awesome",Xd.config.css.fontAwesome,h,!1),Xd.addOrChangeLinkedCSS("lively-font-inconsolata",Xd.config.css.inconsolata,h,!1)])})}},{key:"startRenderWorldLoop",value:function(){var b=this;this._stopped=!1;this._renderWorldLoopLater=null;this.renderWorldLoopProcess=this.requestAnimationFrame(function(){return b.startRenderWorldLoop()});return this.renderStep()}},{key:"stopRenderWorldLoop",
value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){b._stopped=!0;b.domEnvironment.window.cancelAnimationFrame(b.renderWorldLoopProcess);b.renderWorldLoopProcess=null;b.domEnvironment.window.cancelAnimationFrame(b.renderWorldLoopLater);b.renderWorldLoopLater=null;return d.yield(Xd.promise.waitFor(2E3,function(){return!b.worldMorph.needsRerender()}),0)})}},{key:"renderLater",value:function(b){var d=this;this.renderWorldLoopLaterCounter=void 0===b?10:b;this.renderWorldLoopLater||
this._stopped||(this.renderWorldLoopLater=this.requestAnimationFrame(function(){d.renderWorldLoopLater=null;0<d.renderWorldLoopLaterCounter&&d.renderLater(d.renderWorldLoopLaterCounter-1);try{d.renderStep()}catch(h){console.error("Error rendering morphs:",h)}}))}},{key:"renderStep",value:function(){this.worldMorph.renderAsRoot(this);return this}},{key:"getNodeForMorph",value:function(b){var d="#"+Xd.string.regExpEscape(b.id),h=this.domNode&&this.domNode.querySelector(d);this.domNode&&this.domNode.id==
b.id&&(h=this.domNode);if(h)return h;b=$jscomp.makeIterator(this.fixedMorphNodeMap.values());for(h=b.next();!h.done;h=b.next())if(h=h.value.querySelector(d))return h;return null}},{key:"getMorphForNode",value:function(b){return this.worldMorph?this.worldMorph.withAllSubmorphsDetect(function(d){return d.id===b.id}):null}},{key:"render",value:function(b){if(!b.needsRerender()){var d=this.renderMap.get(b);if(d)return d}b.aboutToRender(this);d=b.render(this);this.renderMap.set(b,d);return d}},{key:"renderAsFixed",
value:function(b){var d=this.render(b);b.isHTMLMorph||(d.properties.style.position="fixed");if(this.worldMorph.isEmbedded){var h=this.domNode.getBoundingClientRect(),a=b.origin,e=b.owner,n=b.position,q=Math.round(n.x-a.x-(b._skipWrapping&&e?e.borderWidthLeft:0));a=Math.round(n.y-a.y-(b._skipWrapping&&e?e.borderWidthTop:0));b=Xd.canBePromotedToCompositionLayer(b)?Xd.pt(0,0):Xd.pt(q,a);q=b.x;d.properties.style.top=b.y+h.y+"px";d.properties.style.left=q+h.x+"px"}return d}},{key:"renderFixedMorphs",value:function(b,
d){var h=this;d=this.domNode;var a=this.fixedMorphNodeMap;if((b.length||a.size)&&d&&d.parentNode){d=d.parentNode;for(var e=$jscomp.makeIterator(a),n=e.next();!n.done;n=e.next()){var q=$jscomp.makeIterator(n.value);n=q.next().value;q=q.next().value;b.includes(n)||(q.parentNode&&q.parentNode.removeChild(q),a.delete(n))}n=b.map(function(I){return a.get(I)});var r=b.map(function(I){return I.id});e=[].concat($jscomp.arrayFromIterable(d.children)).map(function(I){return I.id}).filter(function(I){return r.includes(I)});
e=!Xd.arr.equals(r,e);var v=new WeakMap;if(e){var y=new WeakMap;q=Xd.arr.compact(Xd.arr.flatten(b.map(function(I){return I.withAllSubmorphsDo(function(K){return h.getNodeForMorph(K)})})));q.forEach(function(I){return y.set(I,I.scrollTop)});n.map(function(I){return I&&I.parentNode&&I.parentNode.removeChild(I)});q.forEach(function(I){y.get(I)!=I.scrollTop&&v.set(I,y.get(I))})}b=$jscomp.makeIterator(b);for(n=b.next();!n.done;n=b.next()){n=n.value;q=this.renderMap.get(n)||this.renderAsFixed(n);var D=
this.renderAsFixed(n);D=Xd.diff(q,D);var E=a.get(n);E||(E=Xd.createNode(q,this.domEnvironment),a.set(n,E));E.parentNode||d.appendChild(E);e&&n.withAllSubmorphsDo(function(I){return h.getNodeForMorph(I)}).forEach(function(I){v.has(I)&&(I.scrollTop=v.get(I))});Xd.patch(E,D)}}}},{key:"renderMorph",value:function(b){var d=this.renderSubmorphs(b);return Xd.h("div",Object.assign({},Xd.defaultAttributes(b,this),{style:Xd.defaultStyle(b)}),d)}},{key:"renderSubmorphs",value:function(b){return this.renderSelectedSubmorphs(b,
b.submorphs)}},{key:"renderSelectedSubmorphs",value:function(b,d){var h=b.borderWidthLeft,a=b.borderWidthTop,e=b.origin,n=e.x;e=e.y;for(var q=d.length-1,r=Array(q+1),v=b.layout&&b.layout.renderViaCSS;0<=q;q--)r[q]=this.render(d[q]);if(v||0==r.length)return r;d={};return Xd.h("div",{key:"submorphs-"+b.id,style:Object.assign({position:"absolute",left:n-(b.isPath?0:h)+"px",top:e-(b.isPath?0:a)+"px"},b.isPolygon?Object.assign({height:"100%",width:"100%",overflow:b.clipMode},"visible"!==b.clipMode?(d[navigator.userAgent.includes("AppleWebKit")?
"-webkit-clip-path":"clip-path"]="url(#clipPath"+b.id+")",d):{}):{})},r)}},{key:"renderWorld",value:function(b){for(var d=b.submorphs,h=[],a=[],e=0;e<d.length;e++){var n=d[e];n.hasFixedPosition?a.push(n):h.push(n)}d=this.renderSelectedSubmorphs(b,h);b=Xd.h("div",Object.assign({},Xd.defaultAttributes(b,this),{style:Xd.defaultStyle(b)}),d);b.fixedMorphs=a;return b}},{key:"renderImage",value:function(b){var d=b.imageUrl;if(d.startsWith("data:")){var h=d.indexOf(","),a=d.substring(5,h),e=$jscomp.makeIterator(a.split(";"));
a=e.next().value;e=e.next().value;h=d.substring(h+1);"base64"!==e&&(d=Xd.string.createDataURI(h,a))}return Xd.h("div",Object.assign({},Xd.defaultAttributes(b,this),{style:Xd.defaultStyle(b)}),[Xd.h("img",{src:d,alt:b.tooltip||"",draggable:!1,style:{"pointer-events":"none",position:"absolute",left:0,width:"100%",height:"100%"}}),this.renderSubmorphs(b)])}},{key:"renderCanvas",value:function(b){return Xd.h("div",Object.assign({},Xd.defaultAttributes(b,this),{style:Xd.defaultStyle(b)}),[Xd.h("canvas",
{width:b.width,height:b.height,style:{"pointer-events":"none",position:"absolute"},canvasHook:new Xd.CanvasHook(b)}),this.renderSubmorphs(b)])}},{key:"renderCheckBox",value:function(b){return Xd.h("div",Object.assign({},Xd.defaultAttributes(b,this),{style:Xd.defaultStyle(b)}),[Xd.h("input",{type:"checkbox",checked:b.checked,disabled:!b.active,draggable:!1,style:{"pointer-events":"none",width:"15px",height:"15px",position:"absolute"}}),this.renderSubmorphs(b)])}},{key:"renderPath",value:function(b){var d=
b.startMarker,h=b.endMarker,a=b.showControlPoints,e=Xd.getSvgVertices(b.vertices),n=Xd.h("path",Object.assign({namespace:Xd.svgNs,id:"svg"+b.id},Xd.pathAttributes(b))),q=Xd.h("mask",{namespace:Xd.svgNs,id:"mask"+b.id},[Xd.h("rect",{namespace:Xd.svgNs,attributes:{fill:"white",x:0,y:0,width:b.width+20,height:b.height+20}}),Xd.h("path",{namespace:Xd.svgNs,initStroke:new Xd.InitStroke(b,this,!0),attributes:{d:e,stroke:"black",fill:"none"}}),Xd.h("path",{namespace:Xd.svgNs,initStroke:new Xd.InitStroke(b,
this,!1),attributes:{d:e,stroke:"white",fill:"none"}})]);e=[Xd.h("clipPath",{namespace:Xd.svgNs,id:"clipPath"+b.id},Xd.h("path",{namespace:Xd.svgNs,attributes:{d:e,fill:"white"}})),q];d&&(d.id||(d.id="start-marker"),n.properties.attributes["marker-start"]="url(#"+b.id+"-"+d.id+")",e=[],e.push(this._renderPath_Marker(b,d)));h&&(h.id||(h.id="end-marker"),n.properties.attributes["marker-end"]="url(#"+b.id+"-"+h.id+")",e||(e=[]),e.push(this._renderPath_Marker(b,h)));var r;a&&(r=Xd.h("g",{namespace:Xd.svgNs},
this._renderPath_ControlPoints(b)));return this.renderSvgMorph(b,n,e,r)}},{key:"_renderPath_ControlPoints",value:function(b,d){function h(aa,m,t,u,B,A){var H=u?12:Math.min(8,Math.max(3,n));t="path-point path-point-"+t;u=u?"orange":q;"string"===typeof B&&(t+="-"+B);A&&(H=Math.max(3,Math.ceil(H/2)));return A?Xd.h("circle",{namespace:Xd.svgNs,style:{fill:"white","stroke-width":2,stroke:u},attributes:{class:t,cx:aa,cy:m,r:H}}):Xd.h("circle",{namespace:Xd.svgNs,style:{fill:u},attributes:{class:t,cx:aa,
cy:m,r:H}})}var a=b.vertices;d=b.borderWidth;var e=b.showControlPoints;b=b._controlPointDrag;var n=0==d?6:d+2,q="red";d=[];if("object"===typeof e){var r=e.radius;(e=e.fill)&&(q=String(e));"number"===typeof r&&(n=r)}if(a.length){e=0;var v=a[0];r=v.x;var y=v.y;v=v.controlPoints.next;var D=b&&b.maybeMerge&&b.maybeMerge.includes(e);d.push(h(r,y,e,D));for(e=1;e<a.length-1;e++){var E=a[e];D=E.isSmooth;var I=E.x,K=E.y,P=E.controlPoints;E=P.previous;P=P.next;var N=b&&b.maybeMerge&&b.maybeMerge.includes(e);
D?d.push(h(I,K,e,N),h(r+v.x,y+v.y,e-1,!1,"control-2",!0),h(I+E.x,K+E.y,e,!1,"control-1",!0)):d.push(h(I,K,e,N));r=I;y=K;v=P}K=a[a.length-1];a=K.isSmooth;D=K.x;I=K.y;K=K.controlPoints.previous;b=b&&b.maybeMerge&&b.maybeMerge.includes(e);a?d.push(h(D,I,e,b),h(r+v.x,y+v.y,e-1,!1,"control-2",!0),h(D+K.x,I+K.y,e,!1,"control-1",!0)):d.push(h(D,I,e,b))}return d}},{key:"_renderPath_Marker",value:function(b,d){function h(a){var e=a.tagName,n=a.id,q=a.children,r=a.style;q=q?q.map(h):void 0;n&&(n=b.id+"-"+n);
return Xd.h(e,{namespace:Xd.svgNs,id:n,style:r,attributes:Xd.obj.dissoc(a,["tagName","id","children","style"])},q)}return h(d)}},{key:"renderSvgMorph",value:function(b,d,h,a){a=void 0===a?[]:a;var e=Xd.svgAttributes(b),n=b.innerBounds(),q=n.width;n=n.height;var r,v=[];b.fill&&b.fill.isGradient&&(r||(r=[]),r.push(Xd.renderGradient("fill"+b.id,b.extent,b.fill)));b.borderColor&&b.borderColor.valueOf().isGradient&&(r||(r=[]),r.push(Xd.renderGradient("borderColor"+b.id,b.extent,b.borderColor)));h&&h.length&&
(r||(r=[]),r.push.apply(r,$jscomp.arrayFromIterable(h)));v.push(d);r&&v.push(Xd.h("defs",{namespace:Xd.svgNs},r));d=Xd.obj.select(Xd.defaultStyle(b),"position filter display opacity transform top left transformOrigin cursor overflow".split(" "));return Xd.h("div",Object.assign({},Xd.defaultAttributes(b,this),{style:Object.assign({},d,{width:q+"px",height:n+"px","pointer-events":b.reactsToPointer?"auto":"none"})}),[Xd.h("svg",Object.assign({namespace:Xd.svgNs,version:"1.1",style:{position:"absolute",
"stroke-linejoin":b.cornerStyle||"mint","stroke-linecap":b.endStyle||"round",overflow:"visible"}},e),v),this.renderSubmorphs(b),Xd.h("svg",Object.assign({namespace:Xd.svgNs,version:"1.1",style:{position:"absolute",overflow:"visible"}},e),a)])}},{key:"renderPreview",value:function(b,d){var h=void 0===d.center?!0:d.center,a=void 0===d.ignoreMorphs?[]:d.ignoreMorphs,e=void 0===d.asNode?!1:d.asNode,n=b.origin,q=b.rotation,r=void 0===d.width?100:d.width;d=void 0===d.height?100:d.height;var v=Math.max(.1,
1/b.scale);v=(new Xd.Transform(b.position.negated(),0,Xd.pt(v,v))).transformRectToRect(b.bounds());var y=Math.max(.1,Math.min(r/v.width,d/v.height));n=new Xd.Transform(v.topLeft().negated().scaleBy(y).subPt(n),q,Xd.pt(y,y));q=(q=this.getNodeForMorph(b))?q.cloneNode(!0):Xd.renderMorph(b);h&&(b=n.transformRectToRect(b.extent.extentAsRectangle()),n=n.preConcatenate(new Xd.Transform(Xd.pt(b.width<r?(r-b.width)/2:0,b.height<d?(d-b.height)/2:0))));q.style.transform=n.toCSSTransformString();q.style.pointerEvents=
"";Xd.tree.prewalk(q,function(D){if("string"===typeof D.className){var E=D.className.split(" ").map(function(I){return I.trim()}).filter(Boolean);E.includes("Morph")&&(D.className=Xd.arr.withoutAll(E,["morph","Morph"]).join(" "),a.find(function(I){return I.id===D.id})&&D.remove(),D.id="")}},function(D){return Array.from(D.childNodes)});return e?q:q.outerHTML}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Renderer"}},{key:"default",value:function(){return this._default||new this}}],
l,{pathInPackage:function(){return"rendering/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1439,end:22280})}(void 0);Xd.Renderer=rJ;Xd.Renderer=rJ;Xd.Renderer=rJ;var Fy=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),q$=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),
p=l.hasOwnProperty("FontDetector")&&"function"===typeof l.FontDetector?l.FontDetector:l.FontDetector=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.document=b;this.prepared=!1;this.defaultWidth={};this.defaultHeight={};this.possibleFontWeights="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ");this.namedToNumeric=
new Map("Thin;Extra Light;Light;Normal;Medium;Semi Bold;Bold;Extra Bold;Ultra Bold".split(";").map(function(d,h){return[d,String(100*(h+1))]}));this.baseFonts=["monospace","sans-serif","serif","Comic Sans MS"];this.span=null}},{key:"prepare",value:function(){var b=this.defaultWidth,d=this.defaultHeight,h=this.possibleFontWeights,a=this.baseFonts,e=this.document.getElementsByTagName("body")[0],n=this.span||this.document.createElement("span");n.style.fontSize="72px";n.style.opacity=0;n.innerHTML="mmmmmmmmmmlli";
if(!n.parentNode){var q=this.document.createElement("div");q.style.position="absolute";q.style.width="100%";q.style.overflow="hidden";q.style["pointer-events"]="none";q.style["-webkit-user-select"]="none";q.appendChild(n);e.appendChild(q)}for(var r in h)for(var v in a)n.style.fontFamily=a[v],n.style.fontWeight=h[r],b[a[v]+"@"+h[r]]=n.offsetWidth,d[a[v]+"@"+h[r]]=n.offsetHeight;this.span=n;this.prepared=!0}},{key:"isFontSupported",value:function(b,d){d=void 0===d?"normal":d;this.possibleFontWeights.includes(d)||
(d=this.namedToNumeric.get(d)||"normal");this.prepared||this.prepare();var h=this.defaultWidth,a=this.defaultHeight,e=this.baseFonts,n=this.span,q=this.document.body;n.parentNode||q.appendChild(n);for(var r in e)if(n.style.fontWeight=d,n.style.fontFamily=b+","+e[r],n.offsetWidth!=h[e[r]+"@"+d]||n.offsetHeight!=a[e[r]+"@"+d])return!0;return!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FontDetector"}},{key:"fonts",get:function(){return Fy.fonts}}],l,{pathInPackage:function(){return"rendering/font-detector.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:15,end:3680})}(void 0),vqa=q$=Fy.FontDetector,NS=[{name:"serif",type:"default"},{name:"sans-serif",type:"default"},{name:"monospace",type:"default"},{name:"Adobe Jenson",type:"serif"},{name:"Albertus",type:"serif"},{name:"Aldus",type:"serif"},{name:"Alexandria",type:"serif"},{name:"Algerian",
type:"serif"},{name:"American Typewriter",type:"serif"},{name:"Antiqua",type:"serif"},{name:"Arno",type:"serif"},{name:"Aster",type:"serif"},{name:"Aurora",type:"serif"},{name:"News 706",type:"serif"},{name:"Baskerville",type:"serif"},{name:"Bell",type:"serif"},{name:"Belwe Roman",type:"serif"},{name:"Bembo",type:"serif"},{name:"Berkeley Old Style",type:"serif"},{name:"Bernhard Modern",type:"serif"},{name:"Bodoni",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Bookman",type:"serif"},{name:"Bulmer",
type:"serif"},{name:"Caledonia",type:"serif"},{name:"Californian FB",type:"serif"},{name:"Calisto MT",type:"serif"},{name:"Cambria",type:"serif"},{name:"Capitals",type:"serif"},{name:"Cartier",type:"serif"},{name:"Caslon",type:"serif"},{name:"Wyld",type:"serif"},{name:"Caslon Antique / Fifteenth Century",type:"serif"},{name:"Catull",type:"serif"},{name:"Centaur",type:"serif"},{name:"Century Old Style",type:"serif"},{name:"Century Schoolbook",type:"serif"},{name:"New Century Schoolbook",type:"serif"},
{name:"Century Schoolbook Infant",type:"serif"},{name:"Charis SIL",type:"serif"},{name:"Charter (typeface)",type:"serif"},{name:"Cheltenham",type:"serif"},{name:"Clearface",type:"serif"},{name:"Cochin",type:"serif"},{name:"Colonna",type:"serif"},{name:"Computer Modern",type:"serif"},{name:"Concrete Roman",type:"serif"},{name:"Constantia",type:"serif"},{name:"Cooper Black",type:"serif"},{name:"Copperplate Gothic",type:"serif"},{name:"Corona",type:"serif"},{name:"News 705",type:"serif"},{name:"DejaVu Serif",
type:"serif"},{name:"Didot",type:"serif"},{name:"Droid Serif",type:"serif"},{name:"Elephant",type:"serif"},{name:"Emerson",type:"serif"},{name:"Excelsior",type:"serif"},{name:"News 702",type:"serif"},{name:"Fairfield",type:"serif"},{name:"FF Scala",type:"serif"},{name:"Footlight",type:"serif"},{name:"FreeSerif",type:"serif"},{name:"Friz Quadrata",type:"serif"},{name:"Garamond",type:"serif"},{name:"Gentium",type:"serif"},{name:"Georgia",type:"serif"},{name:"Gloucester",type:"serif"},{name:"Goudy",
type:"serif"},{name:"Granjon",type:"serif"},{name:"High Tower Text",type:"serif"},{name:"Hoefler Text",type:"serif"},{name:"Imprint",type:"serif"},{name:"Ionic No. 5",type:"serif"},{name:"News 701",type:"serif"},{name:"ITC Benguiat",type:"serif"},{name:"Janson",type:"serif"},{name:"Jokerman",type:"serif"},{name:"Joanna",type:"serif"},{name:"Korinna",type:"serif"},{name:"Lexicon",type:"serif"},{name:"Liberation Serif",type:"serif"},{name:"Linux Libertine",type:"serif"},{name:"Literaturnaya",type:"serif"},
{name:"Lucida Bright",type:"serif"},{name:"Melior",type:"serif"},{name:"Memphis",type:"serif"},{name:"Miller",type:"serif"},{name:"Minion",type:"serif"},{name:"Modern",type:"serif"},{name:"Mona Lisa",type:"serif"},{name:"Mrs Eaves",type:"serif"},{name:"MS Serif",type:"serif"},{name:"New York",type:"serif"},{name:"Nimbus Roman",type:"serif"},{name:"NPS Rawlinson Roadway",type:"serif"},{name:"OCR A Extended",type:"serif"},{name:"Palatino",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Perpetua",
type:"serif"},{name:"Plantin",type:"serif"},{name:"Playbill",type:"serif"},{name:"Primer",type:"serif"},{name:"Renault",type:"serif"},{name:"Requiem",type:"serif"},{name:"Rotis Serif",type:"serif"},{name:"Sabon",type:"serif"},{name:"Sistina",type:"serif"},{name:"Souvenir",type:"serif"},{name:"XITS",type:"serif"},{name:"Sylfaen",type:"serif"},{name:"Times New Roman",type:"serif"},{name:"Times",type:"serif"},{name:"Torino",type:"serif"},{name:"Trajan",type:"serif"},{name:"Trinit\u00e9",type:"serif"},
{name:"Trump Mediaeval",type:"serif"},{name:"Utopia",type:"serif"},{name:"Vera Serif",type:"serif"},{name:"Wide Latin",type:"serif"},{name:"Windsor",type:"serif"},{name:"XITS",type:"serif"},{name:"Playfair Display",type:"serif",isGoogleFont:!0},{name:"Cormorant",type:"serif",isGoogleFont:!0},{name:"Eczar",type:"serif",isGoogleFont:!0},{name:"Alegreya",type:"serif",isGoogleFont:!0},{name:"Lora",type:"serif",isGoogleFont:!0},{name:"Source Serif Pro",type:"serif",isGoogleFont:!0},{name:"Roboto Slab",
type:"serif",isGoogleFont:!0},{name:"BioRhyme",type:"serif",isGoogleFont:!0},{name:"Libre Baskerville",type:"serif",isGoogleFont:!0},{name:"Crimson Text",type:"serif",isGoogleFont:!0},{name:"Old Standard TT",type:"serif",isGoogleFont:!0},{name:"Domine",type:"serif",isGoogleFont:!0},{name:"Bitter",type:"serif",isGoogleFont:!0},{name:"Gentium Basic",type:"serif",isGoogleFont:!0},{name:"PT Serif",type:"serif",isGoogleFont:!0},{name:"Cardo",type:"serif",isGoogleFont:!0},{name:"Neuton",type:"serif",isGoogleFont:!0},
{name:"Arvo",type:"serif",isGoogleFont:!0},{name:"Merriweather",type:"serif",isGoogleFont:!0},{name:"Alexandria",type:"slab serif"},{name:"American Typewriter",type:"slab serif"},{name:"Archer",type:"slab serif"},{name:"Athens",type:"slab serif"},{name:"Candida",type:"slab serif"},{name:"Cholla Slab",type:"slab serif"},{name:"City",type:"slab serif"},{name:"Clarendon",type:"slab serif"},{name:"Concrete Roman",type:"slab serif"},{name:"Courier",type:"slab serif"},{name:"Egyptienne",type:"slab serif"},
{name:"Guardian Egyptian",type:"slab serif"},{name:"Ionic No. 5",type:"slab serif"},{name:"Lexia",type:"slab serif"},{name:"Memphis",type:"slab serif"},{name:"Nilland",type:"slab serif"},{name:"Roboto Slab",type:"slab serif"},{name:"Rockwell",type:"slab serif"},{name:"Schadow",type:"slab serif"},{name:"Serifa",type:"slab serif"},{name:"Skeleton Antique",type:"slab serif"},{name:"Sreda",type:"slab serif"},{name:"Swift",type:"slab serif"},{name:"Tower",type:"slab serif"},{name:"Agency FB",type:"sans-serif"},
{name:"Akzidenz-Grotesk",type:"sans-serif"},{name:"Andal\u00e9 Sans",type:"sans-serif"},{name:"Antique Olive",type:"sans-serif"},{name:"Arial",type:"sans-serif"},{name:"Arial Unicode MS",type:"sans-serif"},{name:"Avant Garde Gothic",type:"sans-serif"},{name:"Avenir",type:"sans-serif"},{name:"Bank Gothic",type:"sans-serif"},{name:"Bauhaus",type:"sans-serif"},{name:"Bell Centennial",type:"sans-serif"},{name:"Bell Gothic",type:"sans-serif"},{name:"Benguiat Gothic",type:"sans-serif"},{name:"Berlin Sans",
type:"sans-serif"},{name:"Brandon Grotesque",type:"sans-serif"},{name:"Calibri",type:"sans-serif"},{name:"Casey",type:"sans-serif"},{name:"Century Gothic",type:"sans-serif"},{name:"Charcoal",type:"sans-serif"},{name:"Chicago",type:"sans-serif"},{name:"Clearview",type:"sans-serif"},{name:"Comic Sans",type:"sans-serif"},{name:"Compacta",type:"sans-serif"},{name:"Corbel",type:"sans-serif"},{name:"DejaVu Sans",type:"sans-serif"},{name:"DIN",type:"sans-serif"},{name:"Dotum",type:"sans-serif"},{name:"Droid Sans",
type:"sans-serif"},{name:"Dyslexie",type:"sans-serif"},{name:"Ecofont",type:"sans-serif"},{name:"Eras",type:"sans-serif"},{name:"Esseltub",type:"sans-serif"},{name:"Espy Sans",type:"sans-serif"},{name:"Eurocrat",type:"sans-serif"},{name:"Eurostile",type:"sans-serif"},{name:"Square 721",type:"sans-serif"},{name:"FF Dax",type:"sans-serif"},{name:"FF Meta",type:"sans-serif"},{name:"FF Scala Sans",type:"sans-serif"},{name:"Fira Sans",type:"sans-serif"},{name:"Folio",type:"sans-serif"},{name:"Franklin Gothic",
type:"sans-serif"},{name:"FreeSans",type:"sans-serif"},{name:"Frutiger",type:"sans-serif"},{name:"Futura",type:"sans-serif"},{name:"Geneva",type:"sans-serif"},{name:"Gill Sans",type:"sans-serif"},{name:"Gill Sans Schoolbook",type:"sans-serif"},{name:"Gotham",type:"sans-serif"},{name:"Haettenschweiler",type:"sans-serif"},{name:"Handel Gothic",type:"sans-serif"},{name:"Hei",type:"sans-serif"},{name:"Helvetica",type:"sans-serif"},{name:"Helvetica Neue",type:"sans-serif"},{name:"Swiss 721",type:"sans-serif"},
{name:"Highway Gothic",type:"sans-serif"},{name:"Hobo",type:"sans-serif"},{name:"Impact",type:"sans-serif"},{name:"Industria",type:"sans-serif"},{name:"Interstate",type:"sans-serif"},{name:"Johnston/New Johnston",type:"sans-serif"},{name:"Kabel",type:"sans-serif"},{name:"Klavika",type:"sans-serif"},{name:"Lexia Readable",type:"sans-serif"},{name:"Liberation Sans",type:"sans-serif"},{name:"Linux Biolinum",type:"sans-serif"},{name:"Lucida Sans",type:"sans-serif"},{name:"Lucida Grande",type:"sans-serif"},
{name:"Lucida Sans Unicode",type:"sans-serif"},{name:"Lydian",type:"sans-serif"},{name:"Meiryo",type:"sans-serif"},{name:"Meta",type:"sans-serif"},{name:"Microgramma",type:"sans-serif"},{name:"Modern",type:"sans-serif"},{name:"Motorway",type:"sans-serif"},{name:"Arial",type:"sans-serif"},{name:"Myriad",type:"sans-serif"},{name:"Neutraface",type:"sans-serif"},{name:"Neuzeit S",type:"sans-serif"},{name:"News Gothic",type:"sans-serif"},{name:"Nimbus Sans L",type:"sans-serif"},{name:"Open Sans",type:"sans-serif"},
{name:"Optima",type:"sans-serif"},{name:"Paris",type:"sans-serif"},{name:"Product Sans",type:"sans-serif"},{name:"Proxima Nova",type:"sans-serif"},{name:"Russian Federation",type:"sans-serif"},{name:"Rail Alphabet",type:"sans-serif"},{name:"Roboto",type:"sans-serif"},{name:"Rotis Sans",type:"sans-serif"},{name:"Segoe UI",type:"sans-serif"},{name:"Skia",type:"sans-serif"},{name:"Source Sans Pro",type:"sans-serif"},{name:"Sweden Sans",type:"sans-serif"},{name:"Syntax",type:"sans-serif"},{name:"Tahoma",
type:"sans-serif"},{name:"Template Gothic",type:"sans-serif"},{name:"Thesis Sans",type:"sans-serif"},{name:"Tiresias",type:"sans-serif"},{name:"Trade Gothic",type:"sans-serif"},{name:"Transport",type:"sans-serif"},{name:"Trebuchet MS",type:"sans-serif"},{name:"Twentieth Century (Tw Cen MT)",type:"sans-serif"},{name:"Ubuntu",type:"sans-serif"},{name:"Univers",type:"sans-serif"},{name:"Zurich",type:"sans-serif"},{name:"Vera Sans",type:"sans-serif"},{name:"Verdana",type:"sans-serif"},{name:"Work Sans",
type:"sans-serif",isGoogleFont:!0},{name:"Rubik",type:"sans-serif",isGoogleFont:!0},{name:"Libre Franklin",type:"sans-serif",isGoogleFont:!0},{name:"Fira Sans",type:"sans-serif",isGoogleFont:!0},{name:"Alegreya Sans",type:"sans-serif",isGoogleFont:!0},{name:"Chivo",type:"sans-serif",isGoogleFont:!0},{name:"Source Sans Pro",type:"sans-serif",isGoogleFont:!0},{name:"Roboto",type:"sans-serif",isGoogleFont:!0},{name:"Poppins",type:"sans-serif",isGoogleFont:!0},{name:"Archivo Narrow",type:"sans-serif",
isGoogleFont:!0},{name:"Karla",type:"sans-serif",isGoogleFont:!0},{name:"Montserrat",type:"sans-serif",isGoogleFont:!0},{name:"Rajdhani",type:"sans-serif",isGoogleFont:!0},{name:"PT Sans",type:"sans-serif",isGoogleFont:!0},{name:"Lato",type:"sans-serif",isGoogleFont:!0},{name:"Open Sans",type:"sans-serif",isGoogleFont:!0},{name:"Cabin",type:"sans-serif",isGoogleFont:!0},{name:"Raleway",type:"sans-serif",isGoogleFont:!0},{name:"Nyala",type:"semi-serif"},{name:"Rotis Semi Serif",type:"semi-serif"},
{name:"Easyreading",type:"semi-serif"},{name:"Andal\u00e9 Mono",type:"monospace"},{name:"Arial",type:"monospace"},{name:"Bitstream Vera (Vera Sans Mono)",type:"monospace"},{name:"Consolas",type:"monospace"},{name:"Courier",type:"monospace"},{name:"Courier New",type:"monospace"},{name:"DejaVu Sans Mono",type:"monospace"},{name:"Droid Sans Mono",type:"monospace"},{name:"Everson Mono",type:"monospace"},{name:"Fixed",type:"monospace"},{name:"Fixedsys",type:"monospace"},{name:"Fixedsys Excelsior",type:"monospace"},
{name:"HyperFont",type:"monospace"},{name:"Inconsolata",type:"monospace"},{name:"Letter Gothic",type:"monospace"},{name:"Liberation Mono",type:"monospace"},{name:"Lucida Console",type:"monospace"},{name:"Lucida Sans Typewriter",type:"monospace"},{name:"Lucida Typewriter",type:"monospace"},{name:"Menlo",type:"monospace"},{name:"MICR",type:"monospace"},{name:"Monaco",type:"monospace"},{name:"Monospace",type:"monospace"},{name:"MS Gothic",type:"monospace"},{name:"MS Mincho",type:"monospace"},{name:"Nimbus Mono L",
type:"monospace"},{name:"OCR-A",type:"monospace"},{name:"OCR-B",type:"monospace"},{name:"PragmataPro",type:"monospace"},{name:"Prestige Elite",type:"monospace"},{name:"ProFont",type:"monospace"},{name:"Proggy programming fonts",type:"monospace"},{name:"SimHei",type:"monospace"},{name:"SimSun",type:"monospace"},{name:"Source Code Pro",type:"monospace"},{name:"Terminal",type:"monospace"},{name:"Trixie",type:"monospace"},{name:"Ubuntu Mono",type:"monospace"},{name:"Vera Sans Mono (Bitstream Vera)",type:"monospace"},
{name:"Space Mono",type:"monospace",isGoogleFont:!0},{name:"Inconsolata",type:"monospace",isGoogleFont:!0},{name:"Anonymous Pro",type:"monospace",isGoogleFont:!0},{name:"Balloon",type:"script"},{name:"Brush Script",type:"script"},{name:"Choc",type:"script"},{name:"Dom Casual",type:"script"},{name:"Mistral",type:"script"},{name:"Papyrus",type:"script"},{name:"Segoe Script",type:"script"},{name:"Utopia",type:"script"},{name:"Coronet",type:"script"},{name:"Curlz",type:"script"},{name:"Gravura",type:"script"},
{name:"Script",type:"script"},{name:"Wiesbaden Swing",type:"script"},{name:"American Scribe",type:"script"},{name:"AMS Euler",type:"script"},{name:"Apple Chancery",type:"script"},{name:"Forte",type:"script"},{name:"French Script",type:"script"},{name:"ITC Zapf Chancery",type:"script"},{name:"Kuenstler Script",type:"script"},{name:"Monotype Corsiva",type:"script"},{name:"Old English Text MT",type:"script"},{name:"Zapfino",type:"script"},{name:"Andy",type:"handwriting"},{name:"Ashley Script",type:"handwriting"},
{name:"C\u00e9zanne",type:"handwriting"},{name:"Chalkboard",type:"handwriting"},{name:"Comic Sans MS",type:"handwriting"},{name:"Dom Casual",type:"handwriting"},{name:"Kristen",type:"handwriting"},{name:"Lucida Handwriting",type:"handwriting"},{name:"Bastard",type:"blackletter"},{name:"Breitkopf Fraktur",type:"blackletter"},{name:"Cloister Black",type:"blackletter"},{name:"Fette Fraktur",type:"blackletter"},{name:"Fletcher",type:"blackletter"},{name:"Fraktur",type:"blackletter"},{name:"Lucida Blackletter",
type:"blackletter"},{name:"Old English Text",type:"blackletter"},{name:"Schwabacher",type:"blackletter"},{name:"Aharoni",type:"non-latin"},{name:"Aparajita",type:"non-latin"},{name:"Arial",type:"non-latin"},{name:"Calibri",type:"non-latin"},{name:"Chandas",type:"non-latin"},{name:"Gadugi",type:"non-latin"},{name:"Grecs du roi",type:"non-latin"},{name:"Javanese script",type:"non-latin"},{name:"Japanese Gothic",type:"non-latin"},{name:"Jomolhari",type:"non-latin"},{name:"Kiran",type:"non-latin"},{name:"Kochi",
type:"non-latin"},{name:"Koren",type:"non-latin"},{name:"Kruti Dev",type:"non-latin"},{name:"Malgun Gothic",type:"non-latin"},{name:"Meiryo",type:"non-latin"},{name:"Microsoft JhengHei",type:"non-latin"},{name:"Microsoft YaHei",type:"non-latin"},{name:"Minch\u014d",type:"non-latin"},{name:"Ming",type:"non-latin"},{name:"Mona",type:"non-latin"},{name:"MS Gothic",type:"non-latin"},{name:"Nastaliq Navees",type:"non-latin"},{name:"Porson",type:"non-latin"},{name:"Segoe UI Symbol",type:"non-latin"},{name:"Shruti",
type:"non-latin"},{name:"SimSun",type:"non-latin"},{name:"Sylfaen",type:"non-latin"},{name:"Tahoma",type:"non-latin"},{name:"Tengwar",type:"non-latin"},{name:"Tibetan Machine Uni",type:"non-latin"},{name:"Wilson Greek",type:"non-latin"},{name:"SMP",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Bitstream Cyberbit",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"Charis SIL",type:"unicode"},{name:"BMP",type:"unicode"},{name:"SMP",type:"unicode"},{name:"Code2002",type:"unicode"},
{name:"DejaVu fonts",type:"unicode"},{name:"IPA",type:"unicode"},{name:"Everson Mono",type:"unicode"},{name:"Windows",type:"unicode"},{name:"Fixedsys Excelsior",type:"unicode"},{name:"FreeFont",type:"unicode"},{name:"Gentium",type:"unicode"},{name:"GNU Unifont",type:"unicode"},{name:"Georgia Ref",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Junicode",type:"unicode"},{name:"Mac OS 8.5",type:"unicode"},{name:"macOS",type:"unicode"},{name:"ISO 8859-x",type:"unicode"},{name:"MS Gothic",
type:"unicode"},{name:"MS Mincho",type:"unicode"},{name:"Nimbus Sans Global",type:"unicode"},{name:"Noto",type:"unicode"},{name:"Fabrizio Schiavi",type:"unicode"},{name:"Squarish Sans CT",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Titus Cyberbit Basic",type:"unicode"},{name:"Verdana Ref",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Apple Symbols",type:"symbol"},{name:"Asana-Math",type:"symbol"},{name:"Blackboard bold",type:"symbol"},{name:"Bookshelf Symbol 7",type:"symbol"},{name:"Cambria Math",
type:"symbol"},{name:"Computer Modern",type:"symbol"},{name:"Lucida Math",type:"symbol"},{name:"Marlett",type:"symbol"},{name:"Symbol",type:"symbol"},{name:"Webdings",type:"symbol"},{name:"Wingdings",type:"symbol"},{name:"Wingdings 2",type:"symbol"},{name:"Wingdings 3",type:"symbol"},{name:"Zapf Dingbats",type:"symbol"},{name:"Ad Lib",type:"decorative"},{name:"Allegro",type:"decorative"},{name:"Andreas",type:"decorative"},{name:"Arnold B\u00f6cklin",type:"decorative"},{name:"Astur",type:"decorative"},
{name:"Banco",type:"decorative"},{name:"Bauhaus",type:"decorative"},{name:"Braggadocio",type:"decorative"},{name:"Broadway",type:"decorative"},{name:"Caslon Antique",type:"decorative"},{name:"Cooper Black",type:"decorative"},{name:"Curlz",type:"decorative"},{name:"Ellington",type:"decorative"},{name:"Exocet",type:"decorative"},{name:"FIG Script",type:"decorative"},{name:"Forte",type:"decorative"},{name:"Gabriola",type:"decorative"},{name:"Horizon",type:"decorative"},{name:"Jim Crow",type:"decorative"},
{name:"Lo-Type",type:"decorative"},{name:"Neuland",type:"decorative"},{name:"Peignot",type:"decorative"},{name:"San Francisco",type:"decorative"},{name:"Stencil",type:"decorative"},{name:"Umbra",type:"decorative"},{name:"Westminster",type:"decorative"},{name:"Willow",type:"decorative"},{name:"Windsor",type:"decorative"},{name:"Lithos",type:"mimicry"},{name:"Skia",type:"mimicry"},{name:"3x3",type:"misc"},{name:"Compatil",type:"misc"},{name:"Generis",type:"misc"},{name:"Grasset",type:"misc"},{name:"LED",
type:"misc"},{name:"Luxi",type:"misc"},{name:"System",type:"misc"}];Fy.fonts=NS;Fy.fonts=NS;Fy.fonts=NS;Fy.default=q$;var ih=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js");ih.textlayerNodeForFontMeasure=function(f){var l=f.viewState,p=l.text_layer_node;l=l.fontmetric_text_layer_node;p&&!p.className.includes("newtext-text-layer")&&(f.viewState.text_layer_node=p=p.parentNode.querySelector(".newtext-text-layer.actual"));l&&!l.className.includes("newtext-text-layer")&&(f.viewState.fontmetric_text_layer_node=
l=null);p&&!l&&p.parentNode&&(l=f.viewState.fontmetric_text_layer_node=p.parentNode.querySelector(".newtext-text-layer.font-measure"));return l};ih.isExtendingChar=function(f){return 768<=f.charCodeAt(0)&&ih.extendingChars.test(f)};ih.skipExtendingChars=function(f,l,p){for(;(0>p?0<l:l<f.length)&&ih.isExtendingChar(f.charAt(l));)l+=p;return l};ih.charBoundsOfBigMonospacedLine=function(f,l,p,b,d,h,a,e){d=void 0===d?0:d;h=void 0===h?0:h;p=p.text.length;if(500>p||l.isProportional(ih.getComputedFontFamily(b)))return null;
var n=Infinity,q=a.defaultTextStyle;a.lineWrapping&&(n=b.getBoundingClientRect().width);l=l._domMeasure.defaultCharExtent(f,{defaultTextStyle:q},e);f=l.width;l=l.height;b=Array(p);for(a=0;a<p;a++)d+f>n&&(d=0,h+=l),b[a]={x:d,y:h,width:f,height:l},d+=f;return b};ih.charBoundsOfLine=function(f,l,p,b){p=void 0===p?0:p;b=void 0===b?0:b;f=l.ELEMENT_NODE;var d=l.TEXT_NODE,h=l.ownerDocument,a=[],e=0;if(l)if(l.className.includes("line")){p-=l.offsetLeft;b-=l.offsetTop;var n=l.childNodes[0]}else n=l.getElementsByClassName("line")[0].childNodes[0],
p=p-l.offsetLeft+ih.getComputedMarginLeft(l),b-=l.offsetTop;else n=null;if(!n){var q=n=h.createElement("br");l.appendChild(q)}for(;n&&!(Infinity<e);){var r="BR"!==n.tagName&&n.nodeType===f&&n.childNodes[0]||n;if(r.nodeType===d)for(var v=r.length,y=0;y<v;y++){var D=ih.measureCharInner(h,r,y,"right");var E=D.left;var I=D.top;l=D.width;D=D.height;E+=p;I+=b;a[e++]={x:E,y:I,width:l,height:D}}else if(n.nodeType===f)r=n.getBoundingClientRect(),E=r.left,I=r.top,l=r.width,D=r.height,E+=p,I+=b,a[e++]={x:E,
y:I,width:l,height:D};else throw Error("Cannot deal with node "+n);n=n.nextSibling}q&&q.parentNode.removeChild(q);return a};ih.measureCharInner=function(f,l,p,b){b=void 0===b?"left":b;var d=p;p+=1;if(3==l.nodeType)for(var h=0;4>h;h++){var a=ih.getUsefulRect(ih.range(f,l,d,p).getClientRects(),b);if(a.left||a.right||0==d)break;p=d;--d}return a};ih.range=function(f,l,p,b,d){f=f.createRange();f.setEnd(d||l,b);f.setStart(l,p);return f};ih.getUsefulRect=function(f,l){var p={left:0,right:0,top:0,bottom:0};
if("left"==l)for(l=0;l<f.length&&(p=f[l]).left==p.right;l++);else for(l=f.length-1;0<=l&&(p=f[l]).left==p.right;l--);return p};ih.string=Ng;ih.arr=cf;ih.obj=xf;ih.FontDetector=vqa;ih.cumulativeOffset=ix;ih.config=Yk;ih.debug=!!ih.config.onloadURLQuery["debug-font-metric"];ih.checkTimeout=1E3;var r$=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),p=l.hasOwnProperty("FontMetric")&&"function"===typeof l.FontMetric?l.FontMetric:l.FontMetric=function(b){b&&
b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.charMap={};this.cachedBoundsInfo={};this.supportedFontCache={};this.element=null;this.isProportionalCache={}}},{key:"reset",value:function(b){if(this.element){var d=this.element.parentNode;var h=this.element.getRootNode()}this.uninstall();this.charMap={};this.cachedBoundsInfo={};h&&d&&this.install(h,d,b)}},
{key:"install",value:function(b,d,h){this.element=b.createElement("div");this.element.name="fontMetric";this.setMeasureNodeStyles(this.element.style,!0);d.appendChild(this.element);this._domMeasure=(new ih.DOMTextMeasure).install(b,d,h)}},{key:"uninstall",value:function(){this.element&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this._domMeasure&&this._domMeasure.uninstall())}},{key:"setMeasureNodeStyles",value:function(b,d){b.width=b.height="auto";
b.left=b.top="0px";b.visibility="hidden";b.position="absolute";b.whiteSpace="pre";b.font="inherit";b.overflow=d?"hidden":"visible"}},{key:"measure",value:function(b,d){var h=b.fontFamily,a=b.fontSize,e=b.fontWeight,n=b.fontStyle,q=b.textDecoration,r=b.textStyleClasses;b=b.transform;var v=this.element;b&&(b=b.inverse());v.textContent=d;Object.assign(v.style,{"-webkit-text-size-adjust":"none",fontFamily:h,fontWeight:e,fontStyle:n,textDecoration:q,transform:b,fontSize:a+"px"});v.className=r?r.join(" "):
"";try{var y=v.getBoundingClientRect();var D=y.width;var E=y.height}catch(I){return{width:0,height:0}}return{height:E,width:D}}},{key:"charBoundsFor",value:function(b,d){var h=d.length,a=Array(h),e=this.cachedBoundsInfo,n=e.bounds,q=e.str;e=e.style;if(this.isProportional(b.fontFamily)){e=n&&ih.obj.equals(e,b);for(var r=!b.fixedCharacterSpacing,v=0,y=0;v<h;v++){var D=d[v];if(r)if(e=e&&D===q[v]){var E=n[v];D=E.width;E=E.height}else D=d.substr(0,v+1),E=this.measure(b,D),D=E.width,E=E.height,D-=y;else E=
this.sizeFor(b,D),D=E.width,E=E.height;a[v]={x:y,y:0,width:Math.ceil(D),height:Math.ceil(E)};y+=D}r&&(this.cachedBoundsInfo={bounds:a,str:d,style:b})}else for(d=this.sizeFor(b,"x",!0),b=this.sizeFor(b,"xx",!0).width-d.width,d=d.height,q=0;q<h;q++)n=b*q,a[q]={x:n,y:0,width:b,height:d};return a}},{key:"isProportional",value:function(b){if(this.isProportionalCache.hasOwnProperty(b))return this.isProportionalCache[b];var d={fontFamily:b,fontSize:12},h=this.sizeFor(d,"w").width;d=this.sizeFor(d,"i").width;
return this.isProportionalCache[b]=h!==d}},{key:"sizeFor",value:function(b,d,h){d=void 0===d?"":d;var a=b.fontFamily,e=b.fontSize,n=b.fontWeight,q=b.fontStyle,r=b.textDecoration,v=b.textStyleClasses;b={fontFamily:a,fontSize:e,fontWeight:n,fontStyle:q,textDecoration:r,textStyleClasses:v};if((void 0===h||!h)&&1<d.length)return this.measure(b,d);h=v?v.join(" "):"";a=[a,e,n,q,r,h].join("-");this.charMap[a]||(this.charMap[a]={});this.charMap[a][d]||(this.charMap[a][d]=this.measure(b,d));return this.charMap[a][d]}},
{key:"defaultLineHeight",value:function(b){return this.sizeFor(b," ").height}},{key:"supportedFonts",get:function(){return ih.arr.uniq(Object.keys(this.supportedFontCache).map(function(b){return b.split(",")[0].replaceAll(/-bold|-Medium|"|-normal/g,"")}))}},{key:"isFontSupported",value:function(b,d){d=void 0===d?"normal":d;var h=this.fontDetector||(this.fontDetector=new ih.FontDetector(this.element.ownerDocument));if(this.supportedFontCache[b+"-"+d]){var a=this.supportedFontCache[b+"-"+d],e=a.ts;
a=a.value;if(Date.now()-e<ih.checkTimeout)return a}h=h.isFontSupported(b,d);this.supportedFontCache[b+"-"+d]={ts:Date.now(),value:h};return h}},{key:"defaultCharExtent",value:function(b,d,h){return this._domMeasure.defaultCharExtent(b,d,h)}},{key:"manuallyComputeCharBoundsOfLine",value:function(b,d,h,a,e,n,q){return this._domMeasure.computeCharBBoxes(b,d,0,0,e,n,q,this)}},{key:"manuallyComputeBoundsOfLines",value:function(b,d,h,a,e,n,q){return this._domMeasure.computeBBoxesOfLines(b,d,0,0,e,n,q)}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FontMetric"}},{key:"default",value:function(){if(!this._fontMetric)throw Error("FontMetric has not yet been initialized!");return this._fontMetric}},{key:"initDefault",value:function(b){if(!this._fontMetric){if(!b&&"undefined"===typeof document)throw Error("Cannot initialize FontMetric without document");b||(b={document:document});this._fontMetric=this.forDOMEnv(b)}return this._fontMetric}},{key:"removeDefault",value:function(){this._fontMetric&&
(this._fontMetric.uninstall(),this._fontMetric=null)}},{key:"forDOMEnv",value:function(b){b=b.document;var d=new ih.FontMetric;d.install(b,b.body);return d}}],l,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:321,end:7644})}(void 0),wqa=r$=ih.FontMetric;ih.extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
(function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),p=l.hasOwnProperty("DOMTextMeasure")&&"function"===typeof l.DOMTextMeasure?l.DOMTextMeasure:l.DOMTextMeasure=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:"reset",value:function(){if(this.element){var b=this.element.parentNode;var d=this.element.ownerDocument}this.uninstall();d&&b&&this.install(d,b);return this}},
{key:"install",value:function(b,d,h){this.maxLineBBoxCacheCount=(this.debug=h=void 0===h?!1:h)?1:3E3;this.lineBBoxCacheCount=0;this.lineBBoxCache={};this.maxTextlayerNodeCacheCount=h?1:30;this.textlayerNodeCacheCount=0;this.textlayerNodeCache={};this.defaultCharWidthHeightCache={};this.doc=b;b=this.element=b.createElement("div");b.className="dom-measure"+(h?" debug":"");this.setMeasureNodeStyles(b.style,!0);d.appendChild(b);return this}},{key:"uninstall",value:function(){var b=this.element;b&&(b.parentNode&&
b.parentNode.removeChild(b),this.element=null)}},{key:"setMeasureNodeStyles",value:function(b,d){b.width=b.height="auto";this.debug||(b.left=b.top="0px",b.visibility="hidden");b.position="absolute";b.whiteSpace="pre";b.font="inherit";b.overflow=d&&!this.debug?"hidden":"visible"}},{key:"generateStyleKey",value:function(b){var d=b.defaultTextStyle;return[d.fontFamily,d.fontSize,d.fontWeight,d.fontStyle,d.textDecoration,d.textStyleClasses,b.paddingLeft,b.paddingRight,b.paddingTop,b.paddingBottom,b.width,
b.height,b.clipMode,b.lineWrapping,b.textAlign].join("-")}},{key:"defaultCharExtent",value:function(b,d,h){var a=this,e=this.generateStyleKey(d),n=this.defaultCharWidthHeightCache[e];if("undefined"!==typeof n&&(0!==n.height||0!==n.width))return n;var q=this.doc;return this.withTextLayerNodeDo(b,h,d,e,function(r){var v=q.createElement("span");v.className="line";v.style.whiteSpace="pre";r.appendChild(v);v.textContent="abcdefghijklmnopqrstufwxyz ABCDEFGHIJKLMNOPQRSTUFWXYZ 1234567890 {}[];,./<>?'\"!@#$%^&*()-=_+";
var y=v.getBoundingClientRect().width,D=q.createElement("span");D.className="line";D.style.whiteSpace="pre";r.appendChild(D);D.textContent="H\ne\nll\no";var E=D.getBoundingClientRect().height;r.removeChild(v);r.removeChild(D);return a.defaultCharWidthHeightCache[e]={width:y/92,height:Math.ceil(E/4)}})}},{key:"computeBBoxesOfLines",value:function(b,d,h,a,e,n,q){var r=this;h=void 0===h?0:h;a=void 0===a?0:a;for(var v=this.generateStyleKey(e),y=Array(d.length),D=!0,E=0;E<d.length;E++){var I=!d[E].textAttributes.length&&
this.lineBBoxCache[v+"_"+d[E].text];I&&I.height&&I.width?y[E]=I:D=!1}return D?y:this.withTextLayerNodeDo(b,n,e,v,function(K,P,N){for(var aa=Array(d.length),m=Array(d.length),t=0;t<d.length;t++)if(!m[t]){var u=q(d[t]);u.style.display="inline-block";K.appendChild(u);aa[t]=u}for(t=0;t<aa.length;t++)if(!m[t]){u=aa[t];var B=u.getBoundingClientRect();r.lineBBoxCache[v+"_"+d[t].text]=m[t]={x:B.left-u.offsetLeft+h-P,y:B.top-u.offsetTop+a-N,width:B.width,height:B.height}}for(P=0;P<aa.length;P++)K.removeChild(aa[P]);
return m})}},{key:"computeCharBBoxes",value:function(b,d,h,a,e,n,q,r){var v=this;h=void 0===h?0:h;a=void 0===a?0:a;return this.withTextLayerNodeDo(b,n,e,this.generateStyleKey(e),function(y,D,E){var I=q(d);y.appendChild(I);y=1E4<d.stringSize&&ih.charBoundsOfBigMonospacedLine(b,r,d,I,h,a,e,n)||ih.charBoundsOfLine(d,I,h-D,a-E);v.debug||I.parentNode.removeChild(I);return y})}},{key:"withTextLayerNodeDo",value:function(b,d,h,a,e){var n=this.doc,q=this.textlayerNodeCache,r=this.element,v=ih.textlayerNodeForFontMeasure(b);
v||(v=q[a]);if(!v){this.textlayerNodeCacheCount++;v=q[a]=d(h,[]);v.id=a;d=h.width;var y=h.clipMode;h.width||h.clipMode&&"visible"!==h.clipMode?(h=n.createElement("div"),h.style.position="absolute",y&&(h.style.overflow=y),d&&(h.style.width=d+"px"),h.id=a,h.appendChild(v),r.appendChild(h)):r.appendChild(v)}a=b.getGlobalTransform().inverse();b.env.renderer&&b.env.renderer.getNodeForMorph(b)&&(1!=a.getScale()||0!=a.getRotation())&&(a.e=a.f=0,v.style.transform=a.toString());a=v.getBoundingClientRect();
b=a.left;a=a.top;try{return e(v,b,a)}finally{if(v.style.transform="",!this.debug&&this.textlayerNodeCacheCount>this.maxTextlayerNodeCacheCount){e=Math.ceil(this.maxTextlayerNodeCacheCount/2);for(var D;e--&&(D=r.childNodes[0]);)q[D.id]=null,r.removeChild(D);this.textlayerNodeCacheCount-=e}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DOMTextMeasure"}}],l,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:11314,end:19760})})(void 0);ih.GLOBAL="undefined"!==typeof System?System.global:window||global||self||void 0;ih.getComputedFontFamily="function"===typeof ih.GLOBAL.getComputedStyle?function(f){return ih.GLOBAL.getComputedStyle(f).fontFamily}:function(){return""};ih.getComputedMarginLeft="function"===typeof ih.GLOBAL.getComputedStyle?function(f){return parseInt(ih.GLOBAL.getComputedStyle(f).marginLeft)||
0}:function(){return 0};ih.default=r$;var Uh=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js");Uh.signalBindings=function(f,l,p){if(f=f.attributeConnections){f=f.slice();for(var b=0;b<f.length;b++)f[b].sourceAttrName===l&&f[b].update(p)}};Uh.informMorph=function(f,l,p){try{p.onChange(l);Uh.signalBindings(p,"change",l);for(var b=p.owner;b;)b.onSubmorphChange(l,p),b=b.owner}catch(d){console.error("Error in informMorph: "+d.stack)}};Uh.arr=cf;Uh.string=Ng;Uh.obj=xf;Uh.connect=Ik;Uh.signal=
Jk;Uh.disconnect=Hp;(function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),p=l.hasOwnProperty("Change")&&"function"===typeof l.Change?l.Change:l.Change=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.target=b;this.group=null}},{key:"type",get:function(){return"abstract change"}},{key:"apply",value:function(){throw Error("Not yet implemented");
}},{key:"reverseApply",value:function(){throw Error("Not yet implemented");}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Change"}}],l,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:769,end:1025})})(void 0);var OS=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),
p=l.hasOwnProperty("GroupChange")&&"function"===typeof l.GroupChange?l.GroupChange:l.GroupChange=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){ac._get(Object.getPrototypeOf(p.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.changes=[]}},{key:"consumesChanges",value:function(){return!0}},{key:"addChange",value:function(b){this.changes.push(b);
b.group=this}},{key:"apply",value:function(){this.changes.slice().forEach(function(b){return b.apply()});return this}},{key:"reverseApply",value:function(){this.changes.slice().reverse().forEach(function(b){return b.reverseApply()});return this}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GroupChange"}}],l,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1034,end:1463})}(Uh.Change);Uh.GroupChange=OS;Uh.GroupChange=OS;Uh.GroupChange=OS;var PS=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),p=l.hasOwnProperty("ValueChange")&&"function"===typeof l.ValueChange?l.ValueChange:l.ValueChange=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:"type",get:function(){return"setter"}},
{key:Symbol.for("lively-instance-initialize"),value:function(b,d,h,a){ac._get(Object.getPrototypeOf(p.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.prop=d;this.value=h;this.prevValue=null;this.meta=a}},{key:"apply",value:function(){this.target[this.prop]=this.value}},{key:"reverseApply",value:function(){this.target[this.prop]=this.prevValue}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ValueChange"}}],l,{pathInPackage:function(){return"changes.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1472,end:1893})}(Uh.Change);Uh.ValueChange=PS;Uh.ValueChange=PS;Uh.ValueChange=PS;var QS=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),p=l.hasOwnProperty("MethodCallChange")&&"function"===typeof l.MethodCallChange?l.MethodCallChange:l.MethodCallChange=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:"type",get:function(){return"method-call"}},{key:Symbol.for("lively-instance-initialize"),value:function(b,d,h,a,e){ac._get(Object.getPrototypeOf(p.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.selector=d;this.args=h;this.undo=a;this.meta=e}},{key:"apply",value:function(){var b=this.target;b[this.selector].apply(b,this.args)}},
{key:"reverseApply",value:function(){if(this.undo)if("function"===typeof this.undo)this.undo();else{var b=this.undo,d=b.target;d[b.selector].apply(d,b.args)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MethodCallChange"}}],l,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1902,end:2486})}(Uh.GroupChange);Uh.MethodCallChange=QS;Uh.MethodCallChange=QS;Uh.MethodCallChange=QS;var sJ=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),p=l.hasOwnProperty("ChangeManager")&&"function"===typeof l.ChangeManager?l.ChangeManager:l.ChangeManager=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},
{key:"reset",value:function(){this.changes=[];this.changeRecordedListeners=[];this.revision=0;this.changeRecordersPerMorph=new WeakMap;this.changeRecorders={};this.changeGroupStack=[];this.defaultMeta={};this.metaStack=[]}},{key:"changesFor",value:function(b){return this.changes.filter(function(d){return d.target===b})}},{key:"apply",value:function(b,d){d.apply()}},{key:"doWithValueChangeMeta",value:function(b,d,h){this.defaultMeta=b;this.metaStack.push(b);try{var a=h(d)}finally{return this.metaStack.pop(),
this.defaultMeta=Uh.arr.last(this.metaStack)||{},a}}},{key:"addValueChange",value:function(b,d,h,a){d=new Uh.ValueChange(b,d,h,Object.assign({},this.defaultMeta,{},a));return this._record(b,d)}},{key:"addMethodCallChangeDoing",value:function(b,d,h){var a=b.target,e=b.selector,n=b.args;(b=b.undo)||(b=function(){return console.warn("No undo recorded for "+a+"."+e)});n=new Uh.MethodCallChange(a,e,n,b,this.defaultMeta);d.groupChangesWhile(n,h);return n}},{key:"_record",value:function(b,d){Uh.signal(this,
"changeRecorded",d);d.hasOwnProperty("value")&&(d.prevValue=b._morphicState[d.prop],b._morphicState[d.prop]=d.value);b.makeDirty(d);var h=Uh.arr.last(this.changeGroupStack);h&&h.consumesChanges()?h.addChange(d):(this.changes.push(d),b._rev=++this.revision,this.informChangeListeners(d));Uh.informMorph(this,d,b);return d}},{key:"groupChangesWhile",value:function(b,d,h,a){a=void 0===a?!0:a;d||(d=new Uh.GroupChange(b));this.changeGroupStack.push(d);try{return h(),Uh.arr.remove(this.changeGroupStack,d),
a?this._record(b,d):d}catch(e){throw Uh.arr.remove(this.changeGroupStack,d),e;}}},{key:"dontRecordChangesWhile",value:function(b,d){return this.groupChangesWhile(b,void 0,d,!1)}},{key:"recordChangesWhile",value:function(b,d){var h=this.changes.length;b();b=this.changes.slice(h,this.changes.length);return d?b.filter(d):b}},{key:"addChangeListener",value:function(b){Uh.arr.pushIfNotIncluded(this.changeRecordedListeners,b)}},{key:"removeChangeListener",value:function(b){Uh.arr.remove(this.changeRecordedListeners,
b)}},{key:"informChangeListeners",value:function(b){this.changeRecordedListeners.forEach(function(d){return d(b)})}},{key:"recordChangesStart",value:function(b,d){d=Uh.obj.newKeyIn(this.changeRecorders,(void 0===d?"":d)+"__change_recorder_"+Date.now());var h=b?function(e){return b(e)&&a.changes.push(e)}:function(e){return a.changes.push(e)},a=this.changeRecorders[d]={id:d,filter:b,changes:[],listener:h};this.addChangeListener(h);return a}},{key:"recordChangesStop",value:function(b){if(!(b in this.changeRecorders))return[];
var d=this.changeRecorders[b],h=d.changes;d=d.listener;delete this.changeRecorders[b];this.removeChangeListener(d);return h}},{key:"recordChangesStartForMorph",value:function(b,d){d=this.recordChangesStart(d,b.id);var h=this.changeRecordersPerMorph.get(b);h||(h=[],this.changeRecordersPerMorph.set(b,h));h.push(d.id);return d}},{key:"recordChangesStopForMorph",value:function(b,d){var h=this.changeRecordersPerMorph.get(b);if(!h||!h.length)return console.warn("Cannot endMorphChangeRecorder for morph "+
b+": recorder not found"),[];(b=d)?Uh.arr.remove(h,b):b=h.pop();return this.recordChangesStop(b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ChangeManager"}}],l,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2495,end:7620})}(void 0);Uh.ChangeManager=sJ;Uh.ChangeManager=
sJ;Uh.ChangeManager=sJ;var Bk=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js");Bk.printArg=function(f){return Bk.obj.inspect(f,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};Bk.obj=xf;Bk.arr=cf;Bk.events=gv;Bk.fun=ik;(function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),p=l.hasOwnProperty("Undo")&&"function"===typeof l.Undo?l.Undo:l.Undo=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,h){d=void 0===d?[]:d;this.name=b;this.targets=d;this.timestamp=this.changes=this.recorder=null;this.no=void 0===h?0:h}},{key:"recorded",value:function(){return!!this.changes}},{key:"isRecording",value:function(){return!!this.recorder}},{key:"startRecording",value:function(b){var d=this;if(this.recorded()||this.isRecording())throw Error("Undo already recorded / recording");if(!this.targets.length)throw Error("Undo has no target morphs");
this.timestamp=Date.now();this.recorder=this.targets[0].recordChangesStart(function(h){var a=h.target;return a.isUsedAsEpiMorph()||!d.targets.some(function(e){return e===a||e.isAncestorOf(a)})?!1:"function"===typeof b?b(h):!0});return this}},{key:"stopRecording",value:function(){var b=this.recorder.id;this.changes=$jscomp.makeIterator(this.targets).next().value.recordChangesStop(b);this.recorder=this.targets=null}},{key:"apply",value:function(){if(!this.recorded())throw Error("Cannot apply undo that has no changes recorded yet");
this.changes.slice().forEach(function(b){return b.apply()});return this}},{key:"reverseApply",value:function(){if(!this.recorded())throw Error("Cannot reverseApply undo that has no changes recorded yet");this.changes.slice().reverse().forEach(function(b){return b.reverseApply()});return this}},{key:"addTarget",value:function(b){Bk.arr.pushIfNotIncluded(this.targets,b)}},{key:"addUndos",value:function(b){b=Bk.arr.sortBy(b.concat(this).filter(function(d){return d.recorded()}),function(d){return d.no});
b.length&&(this.changes=Bk.arr.flatmap(b,function(d){return d.changes}),this.timestamp=b[0].timestamp,this.no=b[0].no,this.name=b.map(function(d){return d.name}).join("-"))}},{key:"toString",value:function(){var b=this.name,d=this.changes,h=this.no,a=this.isRecording();d=d.length?"\n  "+d.map(function(e){var n=e.selector,q=e.args,r=e.prop,v=e.value;e=e.target;return n?e+"."+n+"("+q.map(Bk.printArg)+")":e+"."+r+" = "+Bk.printArg(v)}).join("\n  "):"no changes";return"Undo("+h+":"+b+" "+(a?"RECORDING ":
"")+d+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Undo"}}],l,{pathInPackage:function(){return"undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:54,end:2504})})(void 0);var lC=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),p=l.hasOwnProperty("UndoManager")&&"function"===
typeof l.UndoManager?l.UndoManager:l.UndoManager=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.reset();this.filter=b}},{key:"reset",value:function(){this.undos=[];this.redos=[];this.undoInProgress=null;this.counter=this.applyCount=0;this.grouping={current:[],debounce:null,debouncedCanceled:!1,debounceTime:31}}},{key:"group",value:function(b){b=
void 0===b?null:b;this.groupLaterCancel();b&&this.undos.includes(b)&&(this.grouping.current=Bk.arr.uniq(this.undos.slice(this.undos.indexOf(b)).concat(this.grouping.current)));this.grouping.current.length&&(b=this.grouping.current.slice(1),this.grouping.current[0].addUndos(b),this.undos=Bk.arr.withoutAll(this.undos,b),this.grouping.current=[])}},{key:"ensureNewGroup",value:function(b,d){d=void 0===d?"new undo group":d;this.group();this.undoStart(b,d);return this.undoStop()}},{key:"groupLaterCancel",
value:function(){var b=this.grouping;b.debounce&&(b.debouncedCanceled=!0,this.grouping=Object.assign({},b,{debounce:null,debouncedCanceled:!1}))}},{key:"groupLater",value:function(b){var d=this,h=this.grouping;(h.debounce||(h.debounce=Bk.fun.debounce(b||h.debounceTime,function(){h.debounce=null;h.debouncedCanceled||d.group()})))()}},{key:"undoStart",value:function(b,d){if(!this.applyCount)if(this.undoInProgress)console.warn("There is already an undo being recorded. Tried to start undo "+d+" for "+
b.name+", but "+this.undoInProgress.name+" is currently in progress.");else return this.undoInProgress=(new Bk.Undo(d,[b],this.counter++)).startRecording(this.filter)}},{key:"undoStop",value:function(){var b=this.undoInProgress;if(!b)return null;b.stopRecording();this.undoInProgress=null;this.undos.push(b);this.grouping.current.push(b);this.redos.length&&(this.redos.length=0);return b}},{key:"removeLatestUndo",value:function(){this.undoStop();var b=this.undos.pop();Bk.arr.remove(this.grouping.current,
b);return b}},{key:"undo",value:function(){var b=this.removeLatestUndo();if(b){Bk.arr.remove(this.grouping.current,b);this.redos.unshift(b);this.applyCount++;try{b.reverseApply()}finally{this.applyCount--}return b}}},{key:"redo",value:function(){this.undoStop();var b=this.redos.shift();if(b){this.undos.push(b);this.applyCount++;try{b.apply()}finally{this.applyCount--}return b}}},{key:"toString",value:function(){var b=0===this.undos.length?"":"\n  "+(20<this.undos.length?"...\n  ":"")+this.undos.slice(-20).join("\n  ");
return"UndoManager("+this.undos.length+" undos, "+this.redos.length+" redos, "+(this.undoInProgress?", UNDO IN PROGRESS":"")+b+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"UndoManager"}}],l,{pathInPackage:function(){return"undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2639,end:5941})}(void 0);Bk.UndoManager=
lC;Bk.UndoManager=lC;Bk.UndoManager=lC;var ul=lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js");ul.promise=bg;ul.bowser=qo;ul.touchInputDevice=qm;ul.placeholderValue="\u0001\u0001";ul.placeholderRe=/\u0001/g;var s$=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js"),p=l.hasOwnProperty("TextInput")&&"function"===typeof l.TextInput?l.TextInput:l.TextInput=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.eventDispatcher=b;this.domState={rootNode:null,textareaNode:null,eventHandlers:[],isInstalled:!1};this.inputState={composition:null,manualCopy:null,manualPaste:null,positionChangedTime:0,scrollLeftWhenChanged:0,scrollTopWhenChanged:0}}},{key:"install",value:function(b,d){var h=this,a=this.domState,e=a.isInstalled,n=a.rootNode;this.world=d;if(e){if(n===b)return;this.uninstall()}a.isInstalled=!0;a.rootNode=
b;b.tabIndex=1;d=a.textareaNode=b.ownerDocument.createElement("textarea");d.setAttribute("style","\n      position: absolute;\n      /*extent cannot be 0, input won't work correctly in Chrome 52.0*/\n      width: 20px; height: 20px;\n      z-index: 0;\n      opacity: 1;\n      background: transparent;\n      -moz-appearance: none;\n      appearance: none;\n      border: none;\n      resize: none;\n      outline: none;\n      overflow: hidden;\n      font: inherit;\n      padding: 0 1px;\n      margin: 0 -1px;\n      text-indent: -1em;\n      -ms-user-select: text;\n      -moz-user-select: text;\n      -webkit-user-select: text;\n      user-select: text;\n      /*with pre-line chrome inserts &nbsp; instead of space*/\n      white-space: pre!important;");
ul.touchInputDevice&&d.setAttribute("x-palm-disable-auto-cap",!0);d.setAttribute("wrap","off");d.setAttribute("autocorrect","off");d.setAttribute("autocapitalize","off");d.setAttribute("spellcheck",!1);d.setAttribute("aria-label","Lively Textinput Node");d.className="lively-text-input";d.value="";b.insertBefore(d,b.firstChild);ul.touchInputDevice&&(d.setAttribute("disabled",!0),d.style.setProperty("transform","scale(0)"));a.eventHandlers=[{type:"focusin",node:b,fn:function(q){return h.onRootNodeFocus(q)},
capturing:!0},{type:"focusin",node:a.textareaNode,fn:function(q){return h.onTextAreaFocus(q)},capturing:!0},{type:"blur",node:a.textareaNode,fn:function(q){return h.onTextAreaBlur(q)},capturing:!0},{type:"keydown",node:a.textareaNode,fn:function(q){return h.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"keyup",node:a.textareaNode,fn:function(q){return h.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"cut",node:a.textareaNode,fn:function(q){return h.eventDispatcher.dispatchDOMEvent(q)},
capturing:!1},{type:"copy",node:a.textareaNode,fn:function(q){return h.inputState.manualCopy?h.inputState.manualCopy.onEvent(q):h.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"paste",node:a.textareaNode,fn:function(q){return h.inputState.manualPaste?h.inputState.manualPaste.onEvent(q):h.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"compositionstart",node:a.textareaNode,fn:function(q){return h.onCompositionStart(q)},capturing:!1},{type:"compositionend",node:a.textareaNode,fn:function(q){return h.onCompositionEnd(q)},
capturing:!1},{type:"compositionupdate",node:a.textareaNode,fn:function(q){return h.onCompositionUpdate(q)},capturing:!1},{type:"input",node:a.textareaNode,fn:function(q){return h.onInput(q)},capturing:!1}];a.eventHandlers.forEach(function(q){return q.node.addEventListener(q.type,q.fn,q.capturing)});return this}},{key:"uninstall",value:function(){var b=this.domState;b.isInstalled=!1;b.eventHandlers.forEach(function(h){return h.node.removeEventListener(h.type,h.fn,h.capturing)});var d=b.textareaNode;
d&&d.parentNode&&d.parentNode.removeChild(d);b.rootNode=null;return this}},{key:"resetValue",value:function(){var b=this.domState.textareaNode;b&&(b.value=ul.placeholderValue)}},{key:"readValue",value:function(){var b=this.domState.textareaNode;return b?b.value.replace(ul.placeholderRe,""):""}},{key:"focus",value:function(b,d){var h=this.domState.textareaNode;h&&(ul.touchInputDevice&&b&&b.isText&&!b.readOnly&&h.removeAttribute("disabled"),b&&b.stealFocus||h.getRootNode().activeElement!==h&&h.focus(),
ul.bowser.firefox&&Promise.resolve().then(function(){return h.getRootNode().activeElement!==h&&h.focus()}),b&&b.isText&&b.focusable?(ul.touchInputDevice&&h.focus(),this.ensureBeingAtCursorOfText(b)):d&&this.ensureBeingInVisibleBoundsOfWorld(d))}},{key:"blur",value:function(){var b=this.domState.textareaNode;ul.touchInputDevice&&b.setAttribute("disabled",!0);b&&b.blur()}},{key:"doCopyWithMimeTypes",value:function(b){var d=this;return this.execCommand("manualCopy",function(){var h=d.domState.textareaNode,
a=function(e){h.removeEventListener("copy",a);e.preventDefault();b.forEach(function(n){return e.clipboardData.setData(n.type,n.data)})};setTimeout(function(){return h.removeEventListener("copy",a)},300);h.addEventListener("copy",a);h.value="";h.select();h.ownerDocument.execCommand("copy")})}},{key:"doCopy",value:function(b){var d=this;return this.execCommand("manualCopy",function(){var h=d.domState.textareaNode;h.value=b;h.select();h.ownerDocument.execCommand("copy")})}},{key:"doPaste",value:function(){var b=
this;return this.execCommand("manualPaste",function(){var d=b.domState.textareaNode;d.value="";d.select();d.ownerDocument.execCommand("paste")})}},{key:"execCommand",value:function(b,d){var h=this,a,e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:if(!h.domState.isInstalled)throw Error("Cannot copy to clipboard \u2013 input helper is not installed into DOM!");a=h.inputState;if(!a[b]){r.jumpTo(2);break}r.setCatchFinallyBlocks(3);return r.yield(a[b].promise,
5);case 5:r.leaveTryBlock(2);break;case 3:r.enterCatchBlock();case 2:return e=ul.promise.deferred(),n=!1,a[b]={onEvent:function(v){n||(a[b]=null,n=!0,e.resolve(v))},promise:e.promise},d(),r.setCatchFinallyBlocks(6),r.yield(ul.promise.waitFor(1E3,function(){return n}),8);case 8:r.leaveTryBlock(7);break;case 6:q=r.enterCatchBlock(),a[b]=null,n=!0,e.reject(q);case 7:return r.return(e.promise)}})}},{key:"onTextAreaBlur",value:function(b){var d=this;setTimeout(function(){var h=d.domState||{},a=h.textareaNode;
h=h.rootNode;if(a&&h){var e=a.getRootNode(),n=!(d.world.focusedMorph&&d.world.focusedMorph.stealFocus);(e.activeElement===h||d.world.isEmbedded&&!e.activeElement)&&n&&!ul.touchInputDevice&&a.focus()}})}},{key:"onTextAreaFocus",value:function(b){}},{key:"onRootNodeFocus",value:function(b){var d=this.domState||{},h=d.rootNode;if(b.target===d.textareaNode||b.target===h)this.world.focusedMorph&&this.world.focusedMorph.stealFocus||this.focus();this.inputState.composition=null}},{key:"onInput",value:function(b){if(!this.inputState.composition){if(!b.data){var d=
this.readValue();b.__defineGetter__("data",function(){return d})}this.resetValue();this.eventDispatcher.dispatchDOMEvent(b)}}},{key:"onCompositionStart",value:function(b){this.inputState.composition={};this.eventDispatcher.dispatchDOMEvent(b)}},{key:"onCompositionUpdate",value:function(b){var d=this.inputState.composition,h=this.readValue();d.lastValue!==h&&(d.lastValue=h,this.eventDispatcher.dispatchDOMEvent(b))}},{key:"onCompositionEnd",value:function(b){this.inputState.composition=null;this.eventDispatcher.dispatchDOMEvent(b)}},
{key:"setPosition",value:function(b){var d=(this.domState||{}).textareaNode;d&&(d.style.left=b.x+"px",d.style.top=b.y+"px")}},{key:"ensureBeingInVisibleBoundsOfWorld",value:function(b){this.setPosition(b.visibleBounds().center())}},{key:"ensureBeingAtCursorOfText",value:function(b){var d=b.world();if(d){var h=b.whatsVisible,a=b.cursorPosition,e=a.row;a=a.column;e=Math.max(h.startRow,Math.min(e,h.endRow));h=b.charBoundsFromTextPosition({row:e,column:a}).topLeft();b=d.visibleBounds().insetBy(10).constrainPt(b.worldPoint(h.subPt(b.scroll)));
this.inputState.positionChangedTime=Date.now();this.inputState.scrollLeftWhenChanged=document.documentElement.scrollLeft;this.inputState.scrollTopWhenChanged=document.documentElement.scrollTop;this.setPosition(b)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextInput"}}],l,{pathInPackage:function(){return"events/TextInput.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:237,end:12439})}(void 0),xqa=s$=ul.TextInput;ul.default=s$;var RS=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js");RS.arr=cf;var t$=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js"),p=l.hasOwnProperty("KillRing")&&"function"===typeof l.KillRing?l.KillRing:l.KillRing=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),
value:function(b){this.size=void 0===b?0:b;this.buffer=[];this.pointer=-1}},{key:"isCycling",value:function(){return this.pointer!==this.buffer.length-1}},{key:"add",value:function(b){var d=this.buffer;d.push(b);this.size&&d.length>this.size&&d.splice(0,d.length-this.size);this.pointer=this.buffer.length-1;return b}},{key:"yank",value:function(){return this.buffer[this.pointer]||""}},{key:"back",value:function(){this.pointer=(0>=this.pointer?this.buffer.length:this.pointer)-1;return this.yank()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KillRing"}}],l,{pathInPackage:function(){return"events/KillRing.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:51,end:621})}(void 0),yqa=t$=RS.KillRing;RS.default=t$;var ah=lively.FreezerRuntime.recorderFor("lively.morphic/events/Keys.js");ah.computeHashIdOfEvent=function(f){var l=
f.key;f=0|(f.ctrlKey?1:0)|(f.altKey?2:0)|(f.shiftKey?4:0)|(f.metaKey?8:0);0===f&&!ah.canonicalizeFunctionKey(l)&&l&&ah.letterRe.test(l)&&(f=-1);return f};ah.isModifier=function(f){if(ah.isNumber(f))return!1;f=f.replace(/-$/,"").toLowerCase();return ah.arr.withoutAll(Object.keys(ah.KEY_MODS),["","input-"]).includes(f)};ah.canonicalizeFunctionKey=function(f){f&&(f=f.toLowerCase());switch(f){case "space":f="space";break;case "esc":f="escape";break;case "return":f="enter";break;case "arrowleft":f="left";
break;case "arrowright":f="right";break;case "arrowup":f="up";break;case "arrowdown":f="down"}return ah.FUNCTION_KEYS.includes(f)?ah.string.capitalize(f):""};ah.decodeKeyIdentifier=function(f,l){var p=/u\+?([\d\w]{4})/gi,b=function(d,h){return String.fromCharCode(parseInt(h,16))};f=f&&f.replace(p,b);if("Command"===f||"Cmd"===f)f="Meta";" "===f&&(f="Space");8===l&&(f="Backspace");return f};ah.identifyKeyFromCode=function(f){f=f.code;if("string"!==typeof f)return null;if(f.startsWith("Key"))return f.slice(3);
if(f.startsWith("Numpad"))return f;if(f.startsWith("Digit")||f.startsWith("Arrow"))return f.slice(5);if(f.match(/^F[0-9]{1-2}$/))return f;switch(f){case "Insert":case "Home":case "PageUp":case "PageDown":return f;case "Period":return".";case "Comma":return",";case "Help":return"Insert";case "Equal":return"=";case "Backslash":case "IntlBackslash":return"\\";case "Equal":return"=";case "Minus":return"-";case "BracketRight":return"]";case "BracketLeft":return"[";case "Quote":return"'";case "Backquote":return"`";
case "Semicolon":return";"}return null};ah.dedasherize=function(f){for(var l=[];;){var p=f.indexOf("-");if(-1===p)return f&&l.push(f),l;0===p?(l.push(f[0]),f=f.slice(2)):(l.push(f.slice(0,p)),f=f.slice(p+1))}};ah.bowser=qo;ah.arr=cf;ah.string=Ng;ah.letterRe=/[a-z]/i;ah.MODIFIER_KEYS={16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"};ah.KEY_MODS=function(){for(var f={control:1,ctrl:1,alt:2,option:2,shift:4,super:8,win:8,meta:8,command:8,cmd:8},l=["alt","ctrl","meta","shift"],p=Math.pow(2,l.length);p--;)f[p]=
l.filter(function(b){return p&f[b]}).join("-")+"-";f[0]="";f[-1]="input-";return f}();ah.isNumber=function(){var f=/^[0-9]+$/;return function(l){return f.test(l)}}();ah.FUNCTION_KEYS="backspace;tab;enter;pause;escape; ;pageup;pagedown;end;home;left;up;right;down;print;insert;delete;numpad0;numpad1;numpad2;numpad3;numpad4;numpad5;numpad6;numpad7;numpad8;numpad9;numpadenter;f1;f2;f3;f4;f5;f6;f7;f8;f9;f10;f11;f12;numlock;scrolllock".split(";");ah.Keys={computeHashIdOfEvent:ah.computeHashIdOfEvent,keyComboToEventSpec:function(f,
l){l=Object.assign({_isLivelyKeyEventSpec:!0,keyCombo:"",key:"",ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,isFunctionKey:!1,isModified:!1,onlyModifiers:!1},l);var p=ah.dedasherize(f),b={shift:"shiftKey",control:"ctrlKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey",command:"metaKey",cmd:"metaKey"};if("input"===p[0]&&2===p.length)return l.keyCombo=f,l.key=p[1],l;for(var d=p.length-1;0<=d;d--){var h=b[p[d].toLowerCase()];h&&(p.splice(d,1),l.isModified=!0,l[h]=!0)}if(!p.length)return l.keyCombo=
ah.Keys.eventToKeyCombo(l),l.key=ah.arr.last(ah.dedasherize(l.keyCombo)),l.onlyModifiers=!0,l;1<p.length&&console.warn('Strange key "'+f+'" encountered in keyComboToEventSpec, parsing probably failed');f=ah.arr.last(p);(p=ah.canonicalizeFunctionKey(f))?(l.isFunctionKey=!0,l.key=p):l.key=l.isModified?ah.string.capitalize(f):f;l.keyCombo=ah.Keys.eventToKeyCombo(l);return l},eventToKeyCombo:function(f,l){Object.assign({ignoreModifiersIfNoCombo:!1,ignoreKeys:[]},l);l=f.key;var p=f.data,b=f.keyIdentifier;
if("string"===typeof p)return"input-"+p;if(!l&&b&&(l=ah.decodeKeyIdentifier(b,f.which||f.keyCode),f.key=l=l[f.shiftKey?"toUpperCase":"toLowerCase"](),ah.isModifier(l)))return ah.string.capitalize(l);p=ah.KEY_MODS[ah.computeHashIdOfEvent(f)];if("input-"===p)return p+l;f.code&&(l=ah.identifyKeyFromCode(f)||l);f=!l||ah.isModifier(l)?p.replace(/-$/,""):p+l;f.match(/\s$/)&&(f=f.replace(/\s$/,"Space"));return f.replace(/(^|-)([a-z])/g,function(d,h,a){return h+a.toUpperCase()})},canonicalizeKeyCombo:function(f){return ah.Keys.eventToKeyCombo(ah.Keys.keyComboToEventSpec(f))},
canonicalizeEvent:function(f){return f._isLivelyKeyEventSpec?f:ah.Keys.keyComboToEventSpec(ah.Keys.eventToKeyCombo(f))}};var SS=ah.Keys;ah.default=SS;var bh=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js");bh.bowser=qo;bh.obj=xf;bh.pt=xh;bh.Keys=SS;bh.cumulativeOffset=ix;var TS="pointerover pointerenter pointerout pointerleave pointerdown pointermove pointerup pointercancel gotpointercapture lostpointercapture".split(" ");bh.pointerEvents=TS;bh.pointerEvents=TS;bh.pointerEvents=
TS;var US="mouseover mouseenter mousedown mousemove mouseup mouseout mouseleave click dblclick contextmenu mousewheel".split(" ");bh.mouseEvents=US;bh.mouseEvents=US;bh.mouseEvents=US;var VS=["keydown","keyup","keypress"];bh.keyboardEvents=VS;bh.keyboardEvents=VS;bh.keyboardEvents=VS;var tJ=bh.keyboardEvents.concat("input","compositionstart","compositionupdate","compositionend");bh.keyLikeEvents=tJ;bh.keyLikeEvents=tJ;bh.keyLikeEvents=tJ;var uJ=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),
p=l.hasOwnProperty("Event")&&"function"===typeof l.Event?l.Event:l.Event=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,h,a,e,n,q){this.type=b;this.domEvt=d;this.dispatcher=h;this.targetMorphs=a;this.hand=e;this.halo=n;this.layoutHalo=q;this.stopped=!1;this._keyCombo=void 0;this.onDispatchCallbacks=[];this.onAfterDispatchCallbacks=[];this.onStopCallbacks=
[]}},{key:"onDispatch",value:function(b){this.onDispatchCallbacks.push(b);return this}},{key:"onAfterDispatch",value:function(b){this.onAfterDispatchCallbacks.push(b);return this}},{key:"onStop",value:function(b){this.onStopCallbacks.push(b);return this}},{key:"data",get:function(){return this.domEvt.data}},{key:"world",get:function(){return this.dispatcher.world}},{key:"state",get:function(){return this.dispatcher.eventState}},{key:"keyInputState",get:function(){return this.state.keyInputState}},
{key:"isMouseEvent",value:function(){return bh.pointerEvents.includes(this.type)||bh.mouseEvents.includes(this.type)}},{key:"isKeyboardEvent",value:function(){return!this.isMouseEvent()&&bh.keyboardEvents.includes(this.type)}},{key:"stop",value:function(){this.stopped=!0;this.domEvt&&"function"===typeof this.domEvt.stopPropagation&&this.domEvt.stopPropagation();this.domEvt&&"function"===typeof this.domEvt.preventDefault&&this.domEvt.preventDefault();this.onStopCallbacks.forEach(function(b){return b()})}},
{key:"targetMorph",get:function(){return this.targetMorphs[0]}},{key:"timestamp",get:function(){return this.domEvt.timeStamp}},{key:"position",get:function(){if(!this.domEvt)return bh.pt(0,0);for(var b=this.domEvt.composedPath()[0];b&&b.id!==this.world.id;)b=b.parentNode;if(!b){b=this.domEvt.composedPath()[0]||this.domEvt.target;var d=this.world.env.domEnv.document;b=(b.nodeType===b.DOCUMENT_NODE?b:d).getElementById(this.world.id)}if(!b)return console.error("event position: cannot find world node for determining the position!"),
bh.pt(0,0);b=bh.cumulativeOffset(b);d=this.domEvt;b=bh.pt((d.pageX||0)-b.left,(d.pageY||0)-b.top);1!==this.world.scale&&(b=b.scaleBy(1/this.world.scale));return b}},{key:"startPosition",get:function(){return this.state.clickedOnPosition}},{key:"pressure",get:function(){return this.domEvt?this.domEvt.pressure:.5}},{key:"positionIn",value:function(b){return b.localize(this.position)}},{key:"isClickTarget",value:function(b){var d=this.state.clickedOnMorph;return d&&(b===d||b.isAncestorOf(d))}},{key:"leftMouseButtonPressed",
value:function(){return this.domEvt?1===this.domEvt.buttons:!1}},{key:"rightMouseButtonPressed",value:function(){return this.domEvt?2===this.domEvt.buttons:!1}},{key:"middleMouseButtonPressed",value:function(){return this.domEvt?4===this.domEvt.buttons:!1}},{key:"isCommandKey",value:function(){var b=this.domEvt;if(!b)return!1;var d=!1;bh.bowser.mac||(d=d||b.ctrlKey);if(bh.bowser.tablet||bh.bowser.tablet)d=d||!1;return d||b.metaKey||"Meta"===b.keyIdentifier}},{key:"isShiftDown",value:function(){return this.domEvt&&
!!this.domEvt.shiftKey}},{key:"isCtrlDown",value:function(){return this.domEvt&&!!this.domEvt.ctrlKey}},{key:"isAltDown",value:function(){return this.domEvt&&!!this.domEvt.altKey}},{key:"keyCombo",get:function(){return this._keyCombo||(this._keyCombo=bh.Keys.eventToKeyCombo(this.domEvt))}},{key:"keyCombo",set:function(b){return this._keyCombo=b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Event"}}],l,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:957,end:4928})}(void 0);bh.Event=uJ;bh.Event=uJ;bh.Event=uJ;var vJ=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),p=l.hasOwnProperty("KeyEvent")&&"function"===typeof l.KeyEvent?l.KeyEvent:l.KeyEvent=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,h,a,e,n,q){console.assert(bh.keyLikeEvents.includes(b),"not a keyboard event: "+b);ac._get(Object.getPrototypeOf(p.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b,d,h,a,e,n,q);Object.assign(this,bh.Keys.canonicalizeEvent(d))}},{key:"isKeyEvent",get:function(){return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KeyEvent"}}],l,{pathInPackage:function(){return"events/Event.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4937,end:5307})}(bh.Event);bh.KeyEvent=vJ;bh.KeyEvent=vJ;bh.KeyEvent=vJ;var wJ=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),p=l.hasOwnProperty("SimulatedDOMEvent")&&"function"===typeof l.SimulatedDOMEvent?l.SimulatedDOMEvent:l.SimulatedDOMEvent=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;if(b.position){var d=b.position,h=d.x;d=d.y;b=bh.obj.dissoc(b,["position"]);b.pageX=h;b.pageY=d}!b.hasOwnProperty("pointerId")&&bh.mouseEvents.concat(bh.pointerEvents).includes(b.type)&&(b=Object.assign({},b,{pointerId:1}));Object.assign(this,Object.assign({type:void 0,target:void 0,
pageX:void 0,pageY:void 0,pointerId:void 0,pointerType:"mouse",buttons:0,keyCode:void 0,keyString:"",keyIdentifier:void 0,altKey:!1,ctrlKey:!1,shiftKey:!1,metaKey:!1,stopped:!1},b))}},{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"composedPath",value:function(){return[this.target]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SimulatedDOMEvent"}}],l,{pathInPackage:function(){return"events/Event.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5316,end:6265})}(void 0);bh.SimulatedDOMEvent=wJ;bh.SimulatedDOMEvent=wJ;bh.SimulatedDOMEvent=wJ;var Ke=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js");Ke.dragStartEvent=function(f,l,p,b,d,h,a){var e=(new Ke.Event("morphicdragstart",f,l,[p],d,h,a)).onDispatch(function(){b.draggedMorph=
p;b.dragStartMorphPosition=p.position;b.dragStartPosition=e.position;b.lastDragPosition=e.position;b.dragDelta=Ke.pt(0,0);b.absDragDelta=Ke.pt(0,0)}).onStop(function(){b.draggedMorph=null;l.schedule(Ke.dragEndEvent(f,l,p,b,d,h,a))});return e};Ke.dragEvent=function(f,l,p,b,d,h,a){var e=(new Ke.Event("morphicdrag",f,l,[b.draggedMorph],d,h,a)).onDispatch(function(){b.dragDelta=(b.draggedMorph.owner||l.world).getInverseTransform().transformDirection(e.position.subPt(b.lastDragPosition));b.absDragDelta=
e.position.subPt(b.clickedOnPosition)}).onAfterDispatch(function(){return b.lastDragPosition=e.position}).onStop(function(){b.draggedMorph=null;l.schedule(Ke.dragEndEvent(f,l,p,b,d,h,a))});return e};Ke.dragEndEvent=function(f,l,p,b,d,h,a){var e=b.draggedMorph||p,n=(new Ke.Event("morphicdragend",f,l,[e],d,h,a)).onDispatch(function(){b.dragDelta=(e.owner||l.world).getInverseTransform().transformDirection(n.position.subPt(b.lastDragPosition));b.absDragDelta=n.position.subPt(b.clickedOnPosition)}).onAfterDispatch(function(){b.draggedMorph=
null;b.lastDragPosition=null;b.dragDelta=Ke.pt(0,0);b.absDragDelta=Ke.pt(0,0);b.dragStartMorphPosition=null;b.dragStartPosition=null});return n};Ke.focusEvents=function(f,l){var p=f.eventState;if(p.focusedMorph===l)return[];f=[];p.focusedMorph&&f.push((new Ke.Event("blur",null,this,[p.focusedMorph],null,null,null)).onDispatch(function(){return p.focusedMorph=null}));f.push((new Ke.Event("focus",null,this,[l],null,null,null)).onDispatch(function(){return p.focusedMorph=l}));return f};Ke.arr=cf;Ke.fun=
ik;Ke.Path=Eg;Ke.promise=bg;Ke.pt=xh;Ke.config=Yk;Ke.TextInput=xqa;Ke.KillRing=yqa;Ke.Event=uJ;Ke.KeyEvent=vJ;Ke.SimulatedDOMEvent=wJ;Ke.keyLikeEvents=tJ;Ke.cumulativeOffset=ix;Ke.bowser=qo;Ke.touchInputDevice=qm;Ke.domEventsWeListenTo=[{type:"pointerdown",capturing:!1},{type:"pointerup",capturing:!1},{type:"pointermove",capturing:!1,passive:!1},{type:"pointerover",capturing:!1,passive:!1},{type:"pointerout",capturing:!1,passive:!1},{type:"contextmenu",capturing:!1},{type:"wheel",capturing:!1,passive:!1},
{type:"scroll",capturing:!0,passive:!1},{type:"drag",capturing:!1},{type:"dragstart",capturing:!1},{type:"dragend",capturing:!1},{type:"dragover",capturing:!1},{type:"dragenter",capturing:!1},{type:"dragleave",capturing:!1},{type:"drop",capturing:!1}];Ke.eventsCausingImmediateRender=new Set(["pointerdown","pointerup","keydown","keyup","input"]);Ke.globalDomEventsWeListenTo=[{type:"resize",capturing:!1,morphMethod:"onWindowResize"},{type:"orientationchange",capturing:!1,morphMethod:"onWindowResize"},
{type:"scroll",capturing:!1,passive:!1,morphMethod:"onWindowScroll"},{type:"wheel",capturing:!1,passive:!1,morphToMethod:"onMouseWheel"},{type:"beforeunload",capturing:!1,passive:!1,morphMethod:"onBeforeUnload"}];Ke.typeToMethodMap={pointerdown:"onMouseDown",pointerup:"onMouseUp",pointermove:"onMouseMove",longclick:"onLongClick",hoverin:"onHoverIn",hoverout:"onHoverOut",morphicdrag:"onDrag",morphicdragstart:"onDragStart",morphicdragend:"onDragEnd",grab:"onGrab",morphicdrop:"onDrop",morphicdrophoverin:"onDropHoverIn",
morphicdrophoverout:"onDropHoverOut",morphicdrophoverupdate:"onDropHoverUpdate",keydown:"onKeyDown",keyup:"onKeyUp",input:"onTextInput",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd",blur:"onBlur",focus:"onFocus",contextmenu:"onContextMenu",cut:"onCut",copy:"onCopy",paste:"onPaste",scroll:"onScroll",wheel:"onMouseWheel",drag:"onNativeDrag",dragstart:"onNativeDragstart",dragend:"onNativeDragend",dragover:"onNativeDragover",dragenter:"onNativeDragenter",
dragleave:"onNativeDragleave",drop:"onNativeDrop"};Ke.focusTargetingEvents="keydown keyup keypress input compositionstart compositionupdate compositionend cut copy paste".split(" ");Ke.textOnlyEvents=["input","compositionstart","compositionupdate","compositionend"];var u$=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js"),p=l.hasOwnProperty("EventDispatcher")&&"function"===typeof l.EventDispatcher?l.EventDispatcher:l.EventDispatcher=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d){this.activations=0;this.emitter=b;this.keyInputHelper=null;this.world=d;this.installed=!1;this.handlerFunctions=[];this.killRing=new Ke.KillRing(Ke.config.text.clipboardBufferLength);this.nodeMorphMap=new WeakMap;this.timestampBase=Ke.Path("performance.timing.navigationStart").get(b)||0;this.resetState()}},{key:"resetState",value:function(){this.eventState=
{timeOfLastActivity:0,focusedMorph:null,clickedOnPosition:null,clickedOnMorph:null,clickCount:0,prevClick:{},draggedMorph:null,dragDelta:null,absDragDelta:null,lastDragPosition:null,dragStartMorphPosition:null,dragStartPosition:null,hover:{hoveredOverMorphs:[],unresolvedPointerOut:!1},scroll:{interactiveScrollInProgress:null},keyInputState:null,pressedKeys:{},html5Drag:{},dropHoverTarget:null};this.resetKeyInputState()}},{key:"resetKeyInputState",value:function(){this.eventState.keyInputState={keyChain:"",
count:void 0}}},{key:"focusMorph",value:function(b){var d=this;this.keyInputHelper&&this.keyInputHelper.focus(b,this.world);Ke.focusEvents(this,b).forEach(function(h){return d.dispatchEvent(h)})}},{key:"isMorphFocused",value:function(b){return this.eventState.focusedMorph===b}},{key:"isMorphHovered",value:function(b){return this.eventState.hover.hoveredOverMorphs.includes(b)}},{key:"isMorphClicked",value:function(b){return this.eventState.clickedMorph==b}},{key:"isKeyPressed",value:function(b){return Object.keys(this.eventState.pressedKeys).map(function(d){return d.toLowerCase()}).includes(b.toLowerCase())}},
{key:"whenIdle",value:function(){var b=this;return Ke.promise.waitFor(function(){return 0===b.activations})}},{key:"install",value:function(b){var d=this;if(this.installed)return this;this.installed=!0;var h=this.emitter,a=System.global;Ke.domEventsWeListenTo.forEach(function(e){var n=e.type,q=e.capturing;e=e.passive;var r=function(v){return d.dispatchDOMEvent(v)};d.handlerFunctions.push({node:h,type:n,fn:r,capturing:q});h.addEventListener(n,r,{capture:q,passive:e})});a.addEventListener&&Ke.globalDomEventsWeListenTo.forEach(function(e){var n=
e.type,q=e.capturing,r=e.morphMethod;e=e.passive;var v=function(y){return d.dispatchDOMEvent(y,d.world,r)};d.handlerFunctions.push({node:a,type:n,fn:v,capturing:q});a.addEventListener(n,v,{capture:q,passive:e})});this.keyInputHelper=(new Ke.TextInput(this)).install(b,this.world);Ke.bowser.ios&&b.setAttribute("touch-action","auto");return this}},{key:"uninstallHandler",value:function(b){var d=this.handlerFuntions.find(function(h){return h.type==b});d&&d.node.removeEventListener(d.node,d.fn,d.capturing)}},
{key:"uninstall",value:function(){this.installed=!1;var b=this.handlerFunctions;b.forEach(function(d){d.node.removeEventListener(d.type,d.fn,d.capturing)});b.length=0;this.keyInputHelper&&this.keyInputHelper.uninstall();this.keyInputHelper=null;return this}},{key:"processDOMEvent",value:function(b,d){var h=this,a=b.type,e=this.eventState,n=[d].concat(d.ownerChain()),q="touch"===b.pointerType,r=b.pointerId,v=b.composedPath()[0],y="number"===typeof r&&(Ke.touchInputDevice||b.isPrimary),D=y?this.world.handForPointerId(r,
b.isPrimary):this.world.firstHand,E=y&&!q?this.world.haloForPointerId(r):null,I=y&&!q?this.world.layoutHaloForPointerId(r):null,K=new (Ke.keyLikeEvents.includes(a)?Ke.KeyEvent:Ke.Event)(a,b,this,n,D,E,I),P=[K];y=[];switch(a){case "keydown":e.pressedKeys[K.key]=!0;break;case "keyup":"Meta"===K.key?e.pressedKeys={}:delete e.pressedKeys[K.key];break;case "click":P=this.processDOMEvent(new Ke.SimulatedDOMEvent(Object.assign({},b,{type:"pointerdown"})),d).events;a=this.processDOMEvent(new Ke.SimulatedDOMEvent(Object.assign({},
b,{type:"pointerup"})),d).events;P=P.concat(a);break;case "pointerdown":K.onDispatch(function(){h.focusMorph(d);e.clickedOnMorph=d;e.clickedOnPosition=K.position;e.downTimeStamp=b.timeStamp;var N=!1,aa=0;if(e.prevClick){aa=e.prevClick;N=aa.clickedOnMorph;var m=aa.clickedAtTime;aa=aa.clickCount;m=Date.now()-m;N=N===d&&m<Ke.config.repeatClickInterval}e.clickCount=N?aa+1:1});break;case "pointerup":K.onAfterDispatch(function(){var N=e.clickedOnMorph,aa=e.clickedOnPosition,m=e.clickCount,t=Date.now();
e.prevClick={clickedOnMorph:N,clickedOnPosition:aa,clickedAtTime:t,clickCount:m};e.clickedOnMorph=null;e.clickCount=0;N=b.timeStamp-e.downTimeStamp;aa=e.clickedOnPosition.dist(K.position);m=Ke.config.longClick;t=m.minDur;var u=m.maxDur;aa<m.maxDist&&N>=t&&N<=u&&(N=new Ke.Event("longclick",b,h,n,D,E,I),h.schedule(N))});e.draggedMorph&&(P.push(Ke.dragEndEvent(b,this,d,e,D,E,I)),K.targetMorphs=Ke.arr.uniq([e.draggedMorph].concat($jscomp.arrayFromIterable(K.targetMorphs),[this.world])));D.carriesMorphs()&&
(e.dropHoverTarget?(P.push(new Ke.Event("morphicdrophoverout",b,this,[e.dropHoverTarget],D,E,I)),d=e.dropHoverTarget,e.dropHoverTarget=null):d=D.findDropTarget(K.position,D.grabbedMorphs),D.isAncestorOf(d)&&(d=this.world),P.push(new Ke.Event("morphicdrop",b,this,[d],D,E,I)),K.targetMorphs=[this.world]);break;case "pointermove":D.carriesMorphs()?(K.targetMorphs=[this.world],a=D.findDropTarget(K.position,D.grabbedMorphs)||this.world,e.dropHoverTarget===a?P.push(new Ke.Event("morphicdrophoverupdate",
b,this,[a],D,E,I)):(e.dropHoverTarget&&P.push(new Ke.Event("morphicdrophoverout",b,this,[e.dropHoverTarget],D,E,I)),e.dropHoverTarget=a,P.push(new Ke.Event("morphicdrophoverin",b,this,[a],D,E,I)))):e.draggedMorph?(K.targetMorphs=[this.world],P.push(Ke.dragEvent(b,this,d,e,D,E,I))):e.clickedOnMorph&&e.clickedOnPosition&&e.clickedOnMorph.draggable&&!e.draggedMorph&&!D.carriesMorphs()&&(a=e.clickedOnPosition.dist(K.position),q=e.clickedOnMorph,a>q.dragTriggerDistance&&(q.grabbable?P.push(new Ke.Event("grab",
b,this,[q],D,E,I)):q.draggable&&P.push(Ke.dragStartEvent(b,this,q,e,D,E,I)),K.targetMorphs=[this.world]));break;case "pointerover":e.hover.unresolvedPointerOut&&(e.hover.unresolvedPointerOut=!1);a=[d].concat(d.ownerChain()).reverse();P=Ke.arr.withoutAll(e.hover.hoveredOverMorphs,a).map(function(N){return(new Ke.Event("hoverout",b,h,[N],D,E,I)).onDispatch(function(){return Ke.arr.remove(e.hover.hoveredOverMorphs,N)})});a=Ke.arr.withoutAll(a,e.hover.hoveredOverMorphs).map(function(N){return(new Ke.Event("hoverin",
b,h,[N],D,E,I)).onDispatch(function(){return Ke.arr.pushIfNotIncluded(e.hover.hoveredOverMorphs,N)})});P=P.concat(a);break;case "pointerout":P=[];e.hover.unresolvedPointerOut=!0;y.push(function(){if(e.hover.unresolvedPointerOut)return Promise.all(e.hover.hoveredOverMorphs.map(function(N){return h.schedule((new Ke.Event("hoverout",b,h,[N],D,E,I)).onAfterDispatch(function(){return Ke.arr.remove(e.hover.hoveredOverMorphs,N)}))}))});q&&this.world.removeHandForPointerId(r);break;case "blur":P=[(new Ke.Event(a,
b,this,[d],D,E,I)).onDispatch(function(){return e.focusedMorph=null})];break;case "focus":P=Ke.focusEvents(this,d);break;case "scroll":P=[(new Ke.Event(a,b,this,[d],D,E,I)).onDispatch(function(){if(!e.scroll.interactiveScrollInProgress){var N=Ke.promise.deferred(),aa=N.promise,m=N.resolve;N="Firefox"==Ke.bowser.name?500:250;"Safari"==Ke.bowser.name&&(N=1E3);e.scroll.interactiveScrollInProgress=aa;aa.debounce=Ke.fun.debounce(N,function(){e.scroll.interactiveScrollInProgress=null;m()})}e.scroll.interactiveScrollInProgress.debounce();
aa=v.documentElement||v;N=aa.scrollLeft;var t=aa.scrollTop,u=d.scroll,B=u.x;u=u.y;if("hidden"!=aa.style.overflow&&B!==N||u!==t)d.scroll=Ke.pt(N,t)})];break;case "input":case "compositionstart":case "compositionupdate":case "compositionend":d.isText?K.targetMorphs=[d]:P=[];break;case "drag":case "dragstart":case "dragend":case "dragover":case "dragenter":case "dragleave":case "drop":"drop"!==a&&"dragover"!==a||b.preventDefault()}return{events:P,later:y}}},{key:"schedule",value:function(b){var d=this;
this.activations++;return Promise.resolve().then(function(){return d.dispatchEvent(b)}).then(function(){return d.activations--},function(h){d.activations--;throw h;})}},{key:"dispatchEvent",value:function(b,d){d=d||Ke.typeToMethodMap[b.type];if(!d)throw Error("dispatchEvent: "+b.type+" not yet supported!");b.onDispatchCallbacks.forEach(function(e){return e()});this.activations++;for(var h,a=b.targetMorphs.length-1;0<=a;a--){try{b.targetMorphs[a][d](b)}catch(e){h=Error("Error in event handler "+b.targetMorphs[a]+
"."+d+": "+(e.stack||e)),h.originalError=e,"undefined"!==typeof this.world?this.world.logError(h):console.error(h)}if(h||b.stopped)break}this.activations--;b.onAfterDispatchCallbacks.forEach(function(e){return e()});if(h)throw h;}},{key:"dispatchDOMEvent",value:function(b,d,h){var a=this,e=this.world,n=this.eventState,q=this.nodeMorphMap,r=b.type;n.timeOfLastActivity=this.timestampBase+b.timeStamp;if(!d&&Ke.focusTargetingEvents.includes(r))d=n.focusedMorph||e;else if(!d){for(n=b.composedPath()[0];;){d=
n.className||"";"string"!==typeof d&&"baseVal"in d&&(d=d.baseVal);if(d&&d.includes("Morph"))break;if(!(n=n.parentNode))return}d=q.get(n);if(!d){var v=n.id;(d=e.withAllSubmorphsDetect(function(y){return y.id===v}))&&q.set(n,d)}}d&&(b=this.processDOMEvent(b,d),q=b.events,b.later.map(function(y){a.activations++;return Ke.promise.delay(0).then(y).then(function(){return a.activations--},function(D){a.activations--;throw D;})}),q.forEach(function(y){return a.dispatchEvent(y,h)}),e&&e.needsRerender()&&Ke.eventsCausingImmediateRender.has(r)&&
e.env.renderer.renderLater())}},{key:"simulateDOMEvents",value:function(b){for(var d=[],h=0;h<arguments.length;++h)d[h-0]=arguments[h];h=this.emitter.document||this.emitter.ownerDocument;var a=[];d=$jscomp.makeIterator(d);for(var e=d.next();!e.done;e=d.next()){var n=e=e.value,q=n.target,r=n.position;n=n.type;if(Ke.focusTargetingEvents.includes(n)){if(!this.keyInputHelper.domState.textareaNode)throw Error("Cannot simulate event of type "+n+", no keyInputHelper installed!");e=Object.assign({},e,{target:this.keyInputHelper.textareaNode})}q||
(q=r?this.world.morphsContainingPoint(r)[0]:this.world);q.isMorph&&(e=Object.assign({},e,{target:h.getElementById(q.id)}));e.position&&(q=Ke.cumulativeOffset(h.getElementById(this.world.id)),e.position=e.position.addXY(q.left,q.top));"scroll"===n&&("scrollLeft"in e||"scrollTop"in e)&&(e.target.scrollLeft=e.scrollLeft||0,e.target.scrollTop=e.scrollTop||0);e=new Ke.SimulatedDOMEvent(e);a.push(e);this.dispatchDOMEvent(e)}return a}},{key:"doCopy",value:function(b){return this.keyInputHelper.doCopy(b)}},
{key:"doCopyWithMimeTypes",value:function(b){return this.keyInputHelper.doCopyWithMimeTypes(b)}},{key:"doPaste",value:function(){return this.keyInputHelper.doPaste()}},{key:"cancelGrab",value:function(b,d){var h=this,a=[],e=this.eventState;e.clickedOnMorph=null;e.dropHoverTarget&&(a.push(new Ke.Event("morphicdrophoverout",d.domEvt,this,[e.dropHoverTarget],b,null,null)),e.dropHoverTarget=null);a.forEach(function(n){return h.dispatchEvent(n)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EventDispatcher"}}],
l,{pathInPackage:function(){return"events/EventDispatcher.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7170,end:30089})}(void 0),zqa=u$=Ke.EventDispatcher;Ke.default=u$;var dk=lively.FreezerRuntime.recorderFor("lively.morphic/env.js");dk.defaultDOMEnv=WE;dk.Renderer=rJ;dk.FontMetric=wqa;dk.ChangeManager=sJ;dk.UndoManager=lC;
dk.EventDispatcher=zqa;dk.subscribe=Tz;dk.unsubscribe=PL;var go=Ka("av",function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/env.js"),p=l.hasOwnProperty("MorphicEnv")&&"function"===typeof l.MorphicEnv?l.MorphicEnv:l.MorphicEnv=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){var d=this;b=void 0===b?dk.defaultDOMEnv():b;this.initialized=
!1;this.synchronizer=this.objPool=this.systemChangeHandlers=this.world=this.eventDispatcher=this.renderer=this.fontMetric=null;this.changeManager=new dk.ChangeManager;this.undoManager=new dk.UndoManager;this.installSystemChangeHandlers();this.whenRenderedRequesters=new Map;this.whenRenderedTickingProcess=null;"function"===typeof b.then?this._waitForDOMEnv=b.then(function(h){d._waitForDOMEnv=null;d.initWithDOMEnv(h);d.initialized=!0}).catch(function(h){return console.error("Error initializing MorphicEnv with dom env: "+
h.stack)}):(this.initWithDOMEnv(b),this.initialized=!0)}},{key:"isDefault",value:function(){return this.constructor.default()===this}},{key:"initWithDOMEnv",value:function(b){this.domEnv=b;this.fontMetric=dk.FontMetric.forDOMEnv(b)}},{key:"uninstallWorldRelated",value:function(){this.renderer&&this.renderer.clear();this.eventDispatcher&&this.eventDispatcher.uninstall();this.world&&this.world.suspendSteppingAll()}},{key:"uninstall",value:function(){var b=this;if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return b.uninstall()});
this.deleteHistory();this.uninstallWorldRelated();this.fontMetric&&(this.fontMetric.uninstall(),this.fontMetric=null);this.domEnv&&this.whenRenderedTickingProcess&&(this.domEnv.window.cancelAnimationFrame(this.whenRenderedTickingProcess),this.whenRenderedTickingProcess=null);this.whenRenderedRequesters=new Map;this.domEnv&&this.domEnv.destroy();this.initialized=!1;return Promise.resolve()}},{key:"setWorld",value:function(b,d){var h=this;d=void 0===d?this.renderer?this.renderer.rootNode:this.domEnv.document.body:
d;return this._waitForDOMEnv?this._waitForDOMEnv.then(function(){return h.setWorld(b)}):this.setWorldRenderedOn(b,d)}},{key:"setWorldRenderedOn",value:function(b,d,h){var a=this;h=void 0===h?null:h;if(!b||!b.isWorld)throw Error("world object does not look like a morphic world");if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return a.setWorldRenderedOn(b,d,h)});this.deleteHistory();this.uninstallWorldRelated();this.world=b;this.renderer=new dk.Renderer(b,d,this.domEnv);this.renderer.domNode=
h;this.eventDispatcher=(new dk.EventDispatcher(b.isEmbedded?d:this.domEnv.window,b)).install(d);b.resumeSteppingAll();this.isDefault()&&(this.domEnv.window.$world=b);b.stealFocus||b.focus();b.makeDirty();this.renderer.renderLater();return b.whenRendered().then(function(){return a})}},{key:"installSystemChangeHandlers",value:function(){var b=this;if(!this.systemChangeHandlers){var d=this.systemChangeHandlers={};d["lively.modules/moduleloaded"]=[dk.subscribe("lively.modules/moduleloaded",function(h){return b.getTargetsFor("onModuleLoaded").forEach(function(a){return a.onModuleLoaded(h)})})];
d["lively.modules/modulechanged"]=[dk.subscribe("lively.modules/modulechanged",function(h){return b.getTargetsFor("onModuleChanged").forEach(function(a){return a.onModuleChanged(h)})})];d["lively.partsbin/partpublished"]=[dk.subscribe("lively.partsbin/partpublished",function(h){return b.getTargetsFor("onPartPublished").forEach(function(a){return a.onPartPublished(h)})})];d["lively.user/userchanged"]=[dk.subscribe("lively.user/userchanged",function(h){return b.getTargetsFor("onUserChanged").forEach(function(a){return a.onUserChanged(h)})})]}}},
{key:"uninstallSystemChangeHandlers",value:function(){var b=this.systemChangeHandlers;b&&(this.systemChangeHandlers=null,Object.keys(b).forEach(function(d){return b[d].forEach(function(h){return dk.unsubscribe(d,h)})}))}},{key:"getTargetsFor",value:function(b){var d=this.world,h=[];if(!d||!d.submorphs)return h;"function"===typeof d[b]&&h.push(d);d=$jscomp.makeIterator(d.submorphs);for(var a=d.next();!a.done;a=d.next())a=a.value,"function"===typeof a[b]&&h.push(a),a.isWindow&&a.targetMorph&&"function"===
typeof a.targetMorph[b]&&h.push(a.targetMorph);return h}},{key:"cleanupCaches",value:function(){this.world.withAllSubmorphsDo(function(b){return b._pathDependants=b._pathDependants.filter(function(d){return d.world()})})}},{key:"deleteHistory",value:function(){var b=this.changeManager,d=this.world,h=this.fontMetric;b&&(b.changes.length=0);d&&d.withAllSubmorphsDo(function(a){return a.undoManager&&a.undoManager.reset()});h&&h.reset()}},{key:"printStatus",value:function(){var b=this.changeManager,d=
this.world,h=0,a=0;d&&d.withAllSubmorphsDo(function(e){e.undoManager&&(h++,a+=e.undoManager.undos.length+e.undoManager.redos.length)});return b.changes.length+" changes recorded\n"+h+" morphs with undos\n"+a+" undo changes"}},{key:"updateWhenRenderedRequests",value:function(){for(var b=this,d=this.whenRenderedRequesters,h=0,a=$jscomp.makeIterator(d),e=a.next();!e.done;e=a.next()){var n=$jscomp.makeIterator(e.value);e=n.next().value;var q=n=n.next().value,r=q.maxAttempts,v=q.resolve;q=q.reject;e._dirty||
e._rendering?++n.currentAttempt>r?(d.delete(e),q(Error("Failed to wait for whenRendered of "+e+" (tried "+r+"x)"))):h++:(d.delete(e),v(e))}this.whenRenderedTickingProcess=h?this.domEnv.window.requestAnimationFrame(function(){return b.updateWhenRenderedRequests()}):null}},{key:"whenRendered",value:function(b,d){var h=this;d=void 0===d?50:d;var a=this.whenRenderedRequesters,e=this.whenRenderedTickingProcess,n=a.get(b);if(!n){var q,r;n=new Promise(function(v,y){q=v;r=y});a.set(b,n={maxAttempts:d,currentAttempt:0,
resolve:q,reject:r,promise:n})}e||(this.whenRenderedTickingProcess=this.domEnv.window.requestAnimationFrame(function(){return h.updateWhenRenderedRequests()}));return n.promise}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicEnv"}},{key:"reset",value:function(){for(;;){var b=this.popDefault();if(!b)break;try{b.uninstall()}catch(d){console.error("Error uninstalling MorphicEnv: "+(d.stack||d))}}}},{key:"default",value:function(){var b=this.envs;b.length||this.pushDefault(new this);
return b[b.length-1]}},{key:"pushDefault",value:function(b){this.envs.push(b);return b}},{key:"popDefault",value:function(){return this.envs.pop()}},{key:"envs",get:function(){return this._envs||(this._envs=[])}}],l,{pathInPackage:function(){return"env.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:405,end:8389})}(void 0));dk.MorphicEnv=
go;dk.MorphicEnv=go;dk.MorphicEnv=go;var Aqa=Object.freeze({__proto__:null,MorphicEnv:go}),Ir=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js");Ir.printArg=function(f){return Ir.obj.inspect(f,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};Ir.obj=xf;Ir.arr=cf;Ir.promise=bg;var v$=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js"),p=l.hasOwnProperty("CommandHandler")&&"function"===typeof l.CommandHandler?l.CommandHandler:l.CommandHandler=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.history=[];this.maxHistorySize=1E3}},{key:"addToHistory",value:function(b){this.history.push(b);this.history.length>this.maxHistorySize&&this.history.splice(0,this.history.length-this.maxHistorySize)}},{key:"printHistory",value:function(){return this.history.map(this.printCommand).join("\n")}},
{key:"printCommand",value:function(b){var d=b.target.string,h=b.args,a=b.count,e=b.evt,n=b.keyCombo;return'"'+b.name+'" '+(e?e+" ":"")+(n?n+" ":"")+(h?Ir.printArg(h):"")+("number"===typeof a?" x"+a:"")+" "+d}},{key:"lookupCommand",value:function(b,d){var h;if(!b)return{};"string"===typeof b&&(h=b);"string"===typeof b.command&&(h=b.command);if(b.exec){var a=b;h=a.name}a||(a=d.commands.find(function(e){return e.name===h}));return{name:h,command:a}}},{key:"exec",value:function(b,d,h,a,e){var n=this,
q=this.lookupCommand(b,d)||{},r=q.name,v=q.command;if(!v)return console.warn("Cannot find command "+(r||b)),null;if(r){if(e){var y=e.type;if(e.isKeyEvent)var D=e.keyCombo}this.addToHistory({name:r,target:{string:String(d),id:d.id},args:h,count:a,time:Date.now(),evt:y,keyCombo:D})}var E=d.world();"string"===typeof v.progressIndicator&&(this.progressIndicator=E.execCommand("open loading indicator",v.progressIndicator));if("function"===typeof v.exec)try{var I=v.exec(d,h,v.handlesCount?a:void 0,e)}catch(K){I=
K,b="Error in interactive command "+r+": "+(K.stack||K),E?E.logError(b):console.error(b)}else console.error("command "+r+" has no exec function!");this.progressIndicator&&this.progressIndicator.remove();I&&"function"===typeof I.catch?(I.catch(function(K){var P="Error in interactive command "+r+": "+K+"\n"+(K.stack||K);E?E.logError(P):console.error(P);throw K;}),this.progressIndicator&&Ir.promise.finally(I,function(){return n.progressIndicator.remove()})):this.progressIndicator&&this.progressIndicator.remove();
I&&"number"===typeof a&&1<a&&!v.handlesCount&&(I="function"===typeof I.then?I.then(function(){return n.exec(v,d,h,a-1,e,null)}):this.exec(v,d,h,a-1,e,null));return I}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CommandHandler"}}],l,{pathInPackage:function(){return"CommandHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:194,end:3656})}(void 0),Bqa=v$=Ir.CommandHandler;Ir.default=v$;var Jf=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js");Jf.ensureSpaces=function(f){return f.length?f:" "};Jf.invokeKeyHandlers=function(f,l,p){p=void 0===p?!1:p;var b=l=Jf.Keys.canonicalizeEvent(l),d=b.key,h=b.data,a,e=!1,n=f.keyhandlers,q=l.keyInputState||{};b=b.keyCombo.startsWith("input-");var r=!1,v=q.count,y=q.keyChain||"",D=!1;if(!n||p&&b)return!1;for(p=n.length;p--;)if((a=n[p].eventCommandLookup(f,
l))&&a.command){D=a;a=D.command;var E=D.args,I=D.passEvent,K=D.count;r=D.keyChain;var P=D.onlyWhenFocused;D=!0;v=K;y=r;r="null"===a;if(P&&(P=f.world())&&P.focusedMorph&&P.focusedMorph!==f)continue;e=r?!1:f.execCommand(a,E,K,l);!e||b&&"insertstring"===a||I||"function"!==typeof l.stop||l.stop();if(e||r)break}e||r||!b||!f.onTextInput||y||(e=f.execCommand("insertstring",{string:h||d,undoGroup:Jf.config.text.undoGroupDelay},q.count,l));if(D)if("function"===typeof l.onAfterDispatch)l.onAfterDispatch(function(){q.count=
e?void 0:v;q.keyChain=e?"":y});else q.count=e?void 0:v,q.keyChain=e?"":y;return e&&!r};Jf.simulateKeys=function(f,l,p){p=void 0===p?{keyChain:void 0,count:void 0}:p;var b,d,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){1==e.nextAddress&&(b=1===l.length?[l]:l.split(/ /g).map(Jf.ensureSpaces),d=$jscomp.makeIterator(b),h=d.next());if(3!=e.nextAddress){if(h.done)return e.jumpTo(0);a=h.value;return e.yield(Jf.simulateKey(f,a,p),3)}h=d.next();return e.jumpTo(2)})};Jf.simulateKey=function(f,
l,p){return Jf.invokeKeyHandlers(f,Object.assign({},Jf.Keys.keyComboToEventSpec(l),{keyInputState:p}))};Jf.bowserOS=function(){return Jf.bowser.mac?"mac":Jf.bowser.windows?"windows":Jf.bowser.windowsphone?"windowsphone":Jf.bowser.linux?"linux":Jf.bowser.chromeos?"chromeos":Jf.bowser.android?"android":Jf.bowser.ios?"ios":Jf.bowser.blackberry?"blackberry":Jf.bowser.firefoxos?"firefoxos":Jf.bowser.webos?"webos":Jf.bowser.bada?"bada":Jf.bowser.tizen?"tizen":Jf.bowser.sailfish?"sailfish":"unknown"};Jf.findKeysForPlatform=
XE;Jf.Keys=SS;Jf.bowser=qo;Jf.config=Yk;Jf.arr=cf;Jf.findKeysForPlatform=XE;Jf.findKeysForPlatform=XE;Jf.regexps={meta:/Meta|Cmd|Command/gi,alt:/Alt/gi,ctrl:/Ctrl|Control/gi,tab:/Tab/gi,enter:/Enter|Return/gi,shift:/Shift/gi,backspace:/Backspace/gi,delete:/del(ete)?/gi,left:/left/gi,right:/right/gi,up:/up/gi,down:/down/gi,keySpacer:/([^-])-/g,seqSpacer:/([^\s])\s/g};var WS=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js"),p=l.hasOwnProperty("KeyHandler")&&
"function"===typeof l.KeyHandler?l.KeyHandler:l.KeyHandler=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.platform=b=void 0===b?Jf.bowserOS():b;this.keyBindings={}}},{key:"eventCommandLookup",value:function(b,d){return this.lookup(d.keyCombo,d.keyInputState)}},{key:"lookup",value:function(b,d){var h=this;d=void 0===d?{keyChain:void 0,
count:void 0}:d;b=Jf.Keys.canonicalizeKeyCombo(b);var a=d.keyChain||"";d=d.count;if(!a&&b.startsWith("Ctrl-")){var e=b.match(/^Ctrl-([0-9]+)/);if(e)return{command:"null",count:parseInt(("number"===typeof d?d:"")+e[1])};if("Ctrl-U"===b)return{command:"null",count:4,keyChain:"Ctrl-U"}}e=[b];if(!q&&b.startsWith("input-")){q=b.replace(/^(input-)(.*)$/,function(r,v,y){return v+y.toUpperCase()});var n=b.replace(/^(input-)(.*)$/,function(r,v,y){return v+y.toLowerCase()});e.push(q,n)}var q=e.map(function(r){return h.keyBindings[r]})[0];
a&&(e=e.find(function(r){return h.keyBindings[a+" "+r]}))&&(a+=" "+e,q=this.keyBindings[a]||q);if(q&&"chainKeys"===q)return a=a||b,b={command:"null",keyChain:a},void 0!==d&&(b.count=d),b;if(q)return b="object"===typeof q?Object.assign({},q):{command:q},void 0!==d&&(b.count=d),b}},{key:"bindKey",value:function(b,d){var h=this;"object"===typeof b&&b&&!Array.isArray(b)&&(b=Jf.findKeysForPlatform(b,this.platform));if(b){if("function"===typeof d)return this.addCommand({exec:d,bindKey:b,name:d.name||b});
(Array.isArray(b)?b:b.includes("|")?b.split("|"):[b]).forEach(function(a){var e="";if(-1!=a.indexOf(" ")){var n=a.split(/\s+/);a=n.pop();n.forEach(function(q){q=Jf.Keys.canonicalizeKeyCombo(q);e+=(e?" ":"")+q;h.addCommandToBinding(e,"chainKeys")});e+=" "}h.addCommandToBinding(e+Jf.Keys.canonicalizeKeyCombo(a),d)});this.cleanupUnusedKeyChains()}}},{key:"unbindKey",value:function(b){this.bindKey(b,null)}},{key:"cleanupUnusedKeyChains",value:function(){var b=this,d=Object.keys(this.keyBindings),h=d.filter(function(a){return"chainKeys"===
b.keyBindings[a]});h=Jf.arr.sortBy(h,function(a){return a.length}).reverse();h.forEach(function(a){d.some(function(e){return a!==e&&e.startsWith(a)})||(delete b.keyBindings[a],Jf.arr.remove(d,a),Jf.arr.remove(h,a))})}},{key:"addCommand",value:function(b){return b&&b.bindKey?this.addCommandToBinding(b.bindKey,b):void 0}},{key:"addCommandToBinding",value:function(b,d){var h=this;"chainKeys"===this.keyBindings[b]&&"chainKeys"!=d&&Object.keys(this.keyBindings).forEach(function(a){a.startsWith(b)&&delete h.keyBindings[a]});
d?this.keyBindings[b]=d:delete this.keyBindings[b];"chainKeys"!==d&&this.cleanupUnusedKeyChains()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KeyHandler"}},{key:"invokeKeyHandlers",value:function(b,d,h){return Jf.invokeKeyHandlers(b,d,void 0===h?!1:h)}},{key:"simulateKeys",value:function(b,d,h){return Jf.simulateKeys(b,d,h)}},{key:"withBindings",value:function(b,d){var h=new this(d);b.forEach(function(a){return h.bindKey(a.keys,a.command)});return h}},{key:"prettyCombo",value:function(b){var d=
this._prettyCombos||(this._prettyCombos={});return this._prettyCombos[b]?d[b]:d[b]=b.replace(Jf.regexps.meta,"mac"==Jf.bowserOS()?"\u2318":"\u229e ").replace(Jf.regexps.alt,"mac"==Jf.bowserOS()?"\u2325":"Alt ").replace(Jf.regexps.ctrl,"mac"==Jf.bowserOS()?"\u2303":"Ctrl ").replace(Jf.regexps.tab,"\u21e5").replace(Jf.regexps.enter,"\u23ce").replace(Jf.regexps.shift,"\u21e7").replace(Jf.regexps.backspace,"\u232b").replace(Jf.regexps.delete,"\u2326").replace(Jf.regexps.left,"\u2192").replace(Jf.regexps.right,
"\u2190").replace(Jf.regexps.up,"\u2191").replace(Jf.regexps.down,"\u2193").replace(Jf.regexps.keySpacer,"$1").replace(Jf.regexps.seqSpacer,"$1-")}},{key:"generateCommandToKeybindingMap",value:function(b,d,h){function a(r){if(q[r.id])return q[r.id];var v=n[r.id]||(n[r.id]=r.keyCommandMap);return q[r.id]=Jf.arr.groupBy(Object.keys(v),function(y){return v[y].name})}var e=this;h=void 0===h?!0:h;var n={},q={};return((void 0===d?0:d)?b.commandsIncludingOwners:b.commands.map(function(r){return{command:r,
target:b}})).map(function(r){var v=r.target;r=r.command;var y=a(v)[r.name];return{keys:y,target:v,command:r,prettyKeys:y&&h?y.map(function(D){return e.prettyCombo(D)}):null}})}}],l,{pathInPackage:function(){return"events/KeyHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6052,end:13079})}(void 0);WS=Jf.KeyHandler;var XS=
Ka("a3",WS);Jf.default=WS;var it=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),w$=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),p=l.hasOwnProperty("Script")&&"function"===typeof l.Script?l.Script:l.Script=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.suspended=!1;this.stopped=!0;this.currentTimeout=
this.type=this.tickTime=null}},{key:"__additionally_serialize__",value:function(b,d,h){b.props.suspended.value=!0}},{key:"isScript",get:function(){return!0}},{key:"global",get:function(){return System.global}},{key:"execute",value:function(){throw Error("subclass responsibility");}},{key:"tick",value:function(){try{this.execute()}catch(b){console.error("Error executing script "+this+": "+b+"\n"+b.stack);return}this.stopped||this.startTicking(this.tickTime)}},{key:"startTicking",value:function(b){this.stopped=
!1;this.tickTime=b;this.type="number"===typeof b?"setTimeout":"requestAnimationFrame";this.currentTimeout="setTimeout"===this.type?this.global.setTimeout(this.tick.bind(this),b):this.global.requestAnimationFrame(this.tick.bind(this))}},{key:"stop",value:function(){this.global["setTimeout"===this.type?"clearTimeout":"cancelAnimationFrame"](this.currentTimeout);this.stopped=!0}},{key:"resume",value:function(b){b=void 0===b?this.tickTime:b;this.suspended&&(this.suspended=!1,this.startTicking(this.tickTime=
b))}},{key:"suspend",value:function(){this.stop();this.suspended=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Script"}}],l,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:21,end:1376})}(void 0),YS=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),
p=l.hasOwnProperty("TargetScript")&&"function"===typeof l.TargetScript?l.TargetScript:l.TargetScript=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,h){ac._get(Object.getPrototypeOf(p.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.target=b;this.selector=d;this.args=h||[]}},{key:"execute",value:function(){this.target.isMorph&&
!this.target.tickingScripts.includes(this)&&this.stop();"function"===typeof this.target[this.selector]&&this.target[this.selector].apply(this.target,this.args)}},{key:"equals",value:function(b){return b.isScript&&this.target==b.target&&this.selector==b.selector}},{key:"toString",value:function(){return"Script("+this.target+">>"+this.selector+"("+this.args.join(",")+"))"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TargetScript"}}],l,{pathInPackage:function(){return"ticking.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1378,end:2013})}(it.Script),x$=function(f){var l=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),p=l.hasOwnProperty("FunctionScript")&&"function"===typeof l.FunctionScript?l.FunctionScript:l.FunctionScript=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ac(p,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){ac._get(Object.getPrototypeOf(p.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.callback=b}},{key:"execute",value:function(){this.callback()}},{key:"equals",value:function(b){return b.isScript&&this.callback==b.callback}},{key:"toString",value:function(){return"Script("+(this.callback.toString().replace(/\n/g,"").slice(0,40)+"...)")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FunctionScript"}}],
l,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2015,end:2354})}(it.Script);it.Script=w$;it.Script=w$;it.TargetScript=YS;it.TargetScript=YS;it.FunctionScript=x$;it.FunctionScript=x$;var qq="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Cqa={},y$=qq.MutationObserver||
qq.WebKitMutationObserver;if(y$){var z$=0,Dqa=new y$(YE),A$=qq.document.createTextNode("");Dqa.observe(A$,{characterData:!0});var ZS=function(){A$.data=z$=++z$%2}}else if(qq.setImmediate||"undefined"===typeof qq.MessageChannel)ZS="document"in qq&&"onreadystatechange"in qq.document.createElement("script")?function(){var f=qq.document.createElement("script");f.onreadystatechange=function(){YE();f.onreadystatechange=null;f.parentNode.removeChild(f);f=null};qq.document.documentElement.appendChild(f)}:
function(){setTimeout(YE,0)};else{var B$=new qq.MessageChannel;B$.port1.onmessage=YE;ZS=function(){B$.port2.postMessage(0)}}var xM,fA=[],Eqa=Cqa=function(f){1!==fA.push(f)||xM||ZS()},$S={},C$="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(C$){var D$=new Uint8Array(16);$S=function(){C$(D$);return D$}}else{var E$=Array(16);$S=function(){for(var f=
0,l;16>f;f++)0===(f&3)&&(l=4294967296*Math.random()),E$[f]=l>>>((f&3)<<3)&255;return E$}}for(var F$=$S,Fqa={},Ml=[],xJ=0;256>xJ;++xJ)Ml[xJ]=(xJ+256).toString(16).substr(1);var G$=Fqa=function(f,l){l=l||0;return[Ml[f[l++]],Ml[f[l++]],Ml[f[l++]],Ml[f[l++]],"-",Ml[f[l++]],Ml[f[l++]],"-",Ml[f[l++]],Ml[f[l++]],"-",Ml[f[l++]],Ml[f[l++]],"-",Ml[f[l++]],Ml[f[l++]],Ml[f[l++]],Ml[f[l++]],Ml[f[l++]],Ml[f[l++]]].join("")},Gqa={},H$,aT,bT=0,cT=0,Hqa=Gqa=function(f,l,p){p=l&&p||0;var b=l||[];f=f||{};var d=f.node||
H$,h=void 0!==f.clockseq?f.clockseq:aT;if(null==d||null==h){var a=F$();null==d&&(d=H$=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]);null==h&&(h=aT=(a[6]<<8|a[7])&16383)}a=void 0!==f.msecs?f.msecs:(new Date).getTime();var e=void 0!==f.nsecs?f.nsecs:cT+1,n=a-bT+(e-cT)/1E4;0>n&&void 0===f.clockseq&&(h=h+1&16383);(0>n||a>bT)&&void 0===f.nsecs&&(e=0);if(1E4<=e)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");bT=a;cT=e;aT=h;a+=122192928E5;f=(1E4*(a&268435455)+e)%4294967296;b[p++]=f>>>24&255;b[p++]=f>>>
16&255;b[p++]=f>>>8&255;b[p++]=f&255;f=a/4294967296*1E4&268435455;b[p++]=f>>>8&255;b[p++]=f&255;b[p++]=f>>>24&15|16;b[p++]=f>>>16&255;b[p++]=h>>>8|128;b[p++]=h&255;for(h=0;6>h;++h)b[p+h]=d[h];return l?l:G$(b)},I$={};I$=function(f,l,p){p=l&&p||0;"string"==typeof f&&(l="binary"===f?Array(16):null,f=null);f=f||{};f=f.random||(f.rng||F$)();f[6]=f[6]&15|64;f[8]=f[8]&63|128;if(l)for(var b=0;16>b;++b)l[p+b]=f[b];return l||G$(f)};var Iqa={},dT=I$;dT.v1=Hqa;var Jqa=Iqa=dT.v4=dT,Ug="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Kqa={},Lqa=Kqa=function(f){function l(r,v){var y=r[0],D=r[1],E=r[2],I=r[3];y+=(D&E|~D&I)+v[0]-680876936|0;y=(y<<7|y>>>25)+D|0;I+=(y&D|~y&E)+v[1]-389564586|0;I=(I<<12|I>>>20)+y|0;E+=(I&y|~I&D)+v[2]+606105819|0;E=(E<<17|E>>>15)+I|0;D+=(E&I|~E&y)+v[3]-1044525330|0;D=(D<<22|D>>>10)+E|0;y+=(D&E|~D&I)+v[4]-176418897|0;y=(y<<7|y>>>25)+D|0;I+=(y&D|~y&E)+v[5]+1200080426|0;I=(I<<12|I>>>20)+y|0;E+=(I&y|~I&D)+v[6]-1473231341|0;E=(E<<17|E>>>15)+I|0;D+=(E&I|~E&y)+
v[7]-45705983|0;D=(D<<22|D>>>10)+E|0;y+=(D&E|~D&I)+v[8]+1770035416|0;y=(y<<7|y>>>25)+D|0;I+=(y&D|~y&E)+v[9]-1958414417|0;I=(I<<12|I>>>20)+y|0;E+=(I&y|~I&D)+v[10]-42063|0;E=(E<<17|E>>>15)+I|0;D+=(E&I|~E&y)+v[11]-1990404162|0;D=(D<<22|D>>>10)+E|0;y+=(D&E|~D&I)+v[12]+1804603682|0;y=(y<<7|y>>>25)+D|0;I+=(y&D|~y&E)+v[13]-40341101|0;I=(I<<12|I>>>20)+y|0;E+=(I&y|~I&D)+v[14]-1502002290|0;E=(E<<17|E>>>15)+I|0;D+=(E&I|~E&y)+v[15]+1236535329|0;D=(D<<22|D>>>10)+E|0;y+=(D&I|E&~I)+v[1]-165796510|0;y=(y<<5|y>>>
27)+D|0;I+=(y&E|D&~E)+v[6]-1069501632|0;I=(I<<9|I>>>23)+y|0;E+=(I&D|y&~D)+v[11]+643717713|0;E=(E<<14|E>>>18)+I|0;D+=(E&y|I&~y)+v[0]-373897302|0;D=(D<<20|D>>>12)+E|0;y+=(D&I|E&~I)+v[5]-701558691|0;y=(y<<5|y>>>27)+D|0;I+=(y&E|D&~E)+v[10]+38016083|0;I=(I<<9|I>>>23)+y|0;E+=(I&D|y&~D)+v[15]-660478335|0;E=(E<<14|E>>>18)+I|0;D+=(E&y|I&~y)+v[4]-405537848|0;D=(D<<20|D>>>12)+E|0;y+=(D&I|E&~I)+v[9]+568446438|0;y=(y<<5|y>>>27)+D|0;I+=(y&E|D&~E)+v[14]-1019803690|0;I=(I<<9|I>>>23)+y|0;E+=(I&D|y&~D)+v[3]-187363961|
0;E=(E<<14|E>>>18)+I|0;D+=(E&y|I&~y)+v[8]+1163531501|0;D=(D<<20|D>>>12)+E|0;y+=(D&I|E&~I)+v[13]-1444681467|0;y=(y<<5|y>>>27)+D|0;I+=(y&E|D&~E)+v[2]-51403784|0;I=(I<<9|I>>>23)+y|0;E+=(I&D|y&~D)+v[7]+1735328473|0;E=(E<<14|E>>>18)+I|0;D+=(E&y|I&~y)+v[12]-1926607734|0;D=(D<<20|D>>>12)+E|0;y+=(D^E^I)+v[5]-378558|0;y=(y<<4|y>>>28)+D|0;I+=(y^D^E)+v[8]-2022574463|0;I=(I<<11|I>>>21)+y|0;E+=(I^y^D)+v[11]+1839030562|0;E=(E<<16|E>>>16)+I|0;D+=(E^I^y)+v[14]-35309556|0;D=(D<<23|D>>>9)+E|0;y+=(D^E^I)+v[1]-1530992060|
0;y=(y<<4|y>>>28)+D|0;I+=(y^D^E)+v[4]+1272893353|0;I=(I<<11|I>>>21)+y|0;E+=(I^y^D)+v[7]-155497632|0;E=(E<<16|E>>>16)+I|0;D+=(E^I^y)+v[10]-1094730640|0;D=(D<<23|D>>>9)+E|0;y+=(D^E^I)+v[13]+681279174|0;y=(y<<4|y>>>28)+D|0;I+=(y^D^E)+v[0]-358537222|0;I=(I<<11|I>>>21)+y|0;E+=(I^y^D)+v[3]-722521979|0;E=(E<<16|E>>>16)+I|0;D+=(E^I^y)+v[6]+76029189|0;D=(D<<23|D>>>9)+E|0;y+=(D^E^I)+v[9]-640364487|0;y=(y<<4|y>>>28)+D|0;I+=(y^D^E)+v[12]-421815835|0;I=(I<<11|I>>>21)+y|0;E+=(I^y^D)+v[15]+530742520|0;E=(E<<16|
E>>>16)+I|0;D+=(E^I^y)+v[2]-995338651|0;D=(D<<23|D>>>9)+E|0;y+=(E^(D|~I))+v[0]-198630844|0;y=(y<<6|y>>>26)+D|0;I+=(D^(y|~E))+v[7]+1126891415|0;I=(I<<10|I>>>22)+y|0;E+=(y^(I|~D))+v[14]-1416354905|0;E=(E<<15|E>>>17)+I|0;D+=(I^(E|~y))+v[5]-57434055|0;D=(D<<21|D>>>11)+E|0;y+=(E^(D|~I))+v[12]+1700485571|0;y=(y<<6|y>>>26)+D|0;I+=(D^(y|~E))+v[3]-1894986606|0;I=(I<<10|I>>>22)+y|0;E+=(y^(I|~D))+v[10]-1051523|0;E=(E<<15|E>>>17)+I|0;D+=(I^(E|~y))+v[1]-2054922799|0;D=(D<<21|D>>>11)+E|0;y+=(E^(D|~I))+v[8]+1873313359|
0;y=(y<<6|y>>>26)+D|0;I+=(D^(y|~E))+v[15]-30611744|0;I=(I<<10|I>>>22)+y|0;E+=(y^(I|~D))+v[6]-1560198380|0;E=(E<<15|E>>>17)+I|0;D+=(I^(E|~y))+v[13]+1309151649|0;D=(D<<21|D>>>11)+E|0;y+=(E^(D|~I))+v[4]-145523070|0;y=(y<<6|y>>>26)+D|0;I+=(D^(y|~E))+v[11]-1120210379|0;I=(I<<10|I>>>22)+y|0;E+=(y^(I|~D))+v[2]+718787259|0;E=(E<<15|E>>>17)+I|0;D+=(I^(E|~y))+v[9]-343485551|0;r[0]=y+r[0]|0;r[1]=((D<<21|D>>>11)+E|0)+r[1]|0;r[2]=E+r[2]|0;r[3]=I+r[3]|0}function p(r){var v=[],y;for(y=0;64>y;y+=4)v[y>>2]=r.charCodeAt(y)+
(r.charCodeAt(y+1)<<8)+(r.charCodeAt(y+2)<<16)+(r.charCodeAt(y+3)<<24);return v}function b(r){var v=[],y;for(y=0;64>y;y+=4)v[y>>2]=r[y]+(r[y+1]<<8)+(r[y+2]<<16)+(r[y+3]<<24);return v}function d(r){var v=r.length,y=[1732584193,-271733879,-1732584194,271733878],D;for(D=64;D<=v;D+=64)l(y,p(r.substring(D-64,D)));r=r.substring(D-64);var E=r.length;var I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(D=0;D<E;D+=1)I[D>>2]|=r.charCodeAt(D)<<(D%4<<3);I[D>>2]|=128<<(D%4<<3);if(55<D)for(l(y,I),D=0;16>D;D+=1)I[D]=0;v=
(8*v).toString(16).match(/(.*?)(.{0,8})$/);r=parseInt(v[2],16);v=parseInt(v[1],16)||0;I[14]=r;I[15]=v;l(y,I);return y}function h(r){var v;for(v=0;v<r.length;v+=1){var y=v,D,E=r[v],I="";for(D=0;4>D;D+=1)I+=q[E>>8*D+4&15]+q[E>>8*D&15];r[y]=I}return r.join("")}function a(r){/[\u0080-\uFFFF]/.test(r)&&(r=unescape(encodeURIComponent(r)));return r}function e(r){var v=[],y=r.length,D;for(D=0;D<y-1;D+=2)v.push(parseInt(r.substr(D,2),16));return String.fromCharCode.apply(String,v)}function n(){this.reset()}
var q="0123456789abcdef".split("");h(d("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function r(v,y){v=v|0||0;return 0>v?Math.max(v+y,0):Math.min(v,y)}ArrayBuffer.prototype.slice=function(v,y){var D=(this||Ug).byteLength;v=r(v,D);var E=D;y!==f&&(E=r(y,D));if(v>E)return new ArrayBuffer(0);E-=v;y=new ArrayBuffer(E);D=new Uint8Array(y);v=new Uint8Array(this||Ug,v,E);D.set(v);return y}}();n.prototype.append=function(r){this.appendBinary(a(r));return this||Ug};n.prototype.appendBinary=
function(r){(this||Ug)._buff+=r;(this||Ug)._length+=r.length;r=(this||Ug)._buff.length;var v;for(v=64;v<=r;v+=64)l((this||Ug)._hash,p((this||Ug)._buff.substring(v-64,v)));(this||Ug)._buff=(this||Ug)._buff.substring(v-64);return this||Ug};n.prototype.end=function(r){var v=(this||Ug)._buff,y=v.length,D,E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(D=0;D<y;D+=1)E[D>>2]|=v.charCodeAt(D)<<(D%4<<3);this._finish(E,y);v=h((this||Ug)._hash);r&&(v=e(v));this.reset();return v};n.prototype.reset=function(){(this||
Ug)._buff="";(this||Ug)._length=0;(this||Ug)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Ug};n.prototype.getState=function(){return{buff:(this||Ug)._buff,length:(this||Ug)._length,hash:(this||Ug)._hash}};n.prototype.setState=function(r){(this||Ug)._buff=r.buff;(this||Ug)._length=r.length;(this||Ug)._hash=r.hash;return this||Ug};n.prototype.destroy=function(){delete (this||Ug)._hash;delete (this||Ug)._buff;delete (this||Ug)._length};n.prototype._finish=function(r,v){r[v>>2]|=128<<
(v%4<<3);if(55<v)for(l((this||Ug)._hash,r),v=0;16>v;v+=1)r[v]=0;var y=8*(this||Ug)._length;y=y.toString(16).match(/(.*?)(.{0,8})$/);v=parseInt(y[2],16);y=parseInt(y[1],16)||0;r[14]=v;r[15]=y;l((this||Ug)._hash,r)};n.hash=function(r,v){return n.hashBinary(a(r),v)};n.hashBinary=function(r,v){r=d(r);r=h(r);return v?e(r):r};n.ArrayBuffer=function(){this.reset()};n.ArrayBuffer.prototype.append=function(r){var v=(this||Ug)._buff.buffer,y=new Uint8Array(v.byteLength+r.byteLength);y.set(new Uint8Array(v));
y.set(new Uint8Array(r),v.byteLength);v=y.length;(this||Ug)._length+=r.byteLength;for(r=64;r<=v;r+=64)l((this||Ug)._hash,b(y.subarray(r-64,r)));(this||Ug)._buff=r-64<v?new Uint8Array(y.buffer.slice(r-64)):new Uint8Array(0);return this||Ug};n.ArrayBuffer.prototype.end=function(r){var v=(this||Ug)._buff,y=v.length,D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E;for(E=0;E<y;E+=1)D[E>>2]|=v[E]<<(E%4<<3);this._finish(D,y);v=h((this||Ug)._hash);r&&(v=e(v));this.reset();return v};n.ArrayBuffer.prototype.reset=function(){(this||
Ug)._buff=new Uint8Array(0);(this||Ug)._length=0;(this||Ug)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Ug};n.ArrayBuffer.prototype.getState=function(){var r=n.prototype.getState.call(this||Ug);r.buff=String.fromCharCode.apply(null,new Uint8Array(r.buff));return r};n.ArrayBuffer.prototype.setState=function(r){var v=r.buff,y=v.length,D=new ArrayBuffer(y);D=new Uint8Array(D);var E;for(E=0;E<y;E+=1)D[E]=v.charCodeAt(E);r.buff=D;return n.prototype.setState.call(this||Ug,r)};n.ArrayBuffer.prototype.destroy=
n.prototype.destroy;n.ArrayBuffer.prototype._finish=n.prototype._finish;n.ArrayBuffer.hash=function(r,v){var y=new Uint8Array(r),D=y.length;r=[1732584193,-271733879,-1732584194,271733878];var E;for(E=64;E<=D;E+=64)l(r,b(y.subarray(E-64,E)));y=E-64<D?y.subarray(E-64):new Uint8Array(0);var I=y.length;var K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(E=0;E<I;E+=1)K[E>>2]|=y[E]<<(E%4<<3);K[E>>2]|=128<<(E%4<<3);if(55<E)for(l(r,K),E=0;16>E;E+=1)K[E]=0;D=(8*D).toString(16).match(/(.*?)(.{0,8})$/);y=parseInt(D[2],
16);D=parseInt(D[1],16)||0;K[14]=y;K[15]=D;l(r,K);r=h(r);return v?e(r):r};return n}(),Gy={stringify:function(f){var l=[];l.push({obj:f});f="";for(var p,b,d,h,a,e,n;p=l.pop();)if(b=p.obj,d=p.prefix||"",p=p.val||"",f+=d,p)f+=p;else if("object"!==typeof b)f+="undefined"===typeof b?null:JSON.stringify(b);else if(null===b)f+="null";else if(Array.isArray(b)){l.push({val:"]"});for(d=b.length-1;0<=d;d--)p=0===d?"":",",l.push({obj:b[d],prefix:p});l.push({val:"["})}else{p=[];for(h in b)b.hasOwnProperty(h)&&
p.push(h);l.push({val:"}"});for(d=p.length-1;0<=d;d--)a=p[d],e=b[a],n=0<d?",":"",n+=JSON.stringify(a)+":",l.push({obj:e,prefix:n});l.push({val:"{"})}return f},parse:function(f){for(var l=[],p=[],b=0,d,h,a,e;;)if(d=f[b++],"}"===d||"]"===d||"undefined"===typeof d){if(1===l.length)return l.pop();jx(l.pop(),l,p)}else switch(d){case " ":case "\t":case "\n":case ":":case ",":break;case "n":b+=3;jx(null,l,p);break;case "t":b+=3;jx(!0,l,p);break;case "f":b+=4;jx(!1,l,p);break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case "-":d=
"";for(b--;;)if(h=f[b++],/[\d\.\-e\+]/.test(h))d+=h;else{b--;break}jx(parseFloat(d),l,p);break;case '"':d="";h=void 0;for(a=0;;)if(e=f[b++],'"'!==e||"\\"===h&&1===a%2)d+=e,h=e,"\\"===h?a++:a=0;else break;jx(JSON.parse('"'+d+'"'),l,p);break;case "[":d={element:[],index:l.length};l.push(d.element);p.push(d);break;case "{":d={element:{},index:l.length};l.push(d.element);p.push(d);break;default:throw Error("unexpectedly reached end of input: "+d);}}},Mqa={},eT=Mqa=function(f){return function(){var l=
arguments.length;if(l){for(var p=[],b=-1;++b<l;)p[b]=arguments[b];return f.call(this,p)}return f.call(this,[])}},Nqa={},Dj=Nqa="function"===typeof Object.create?function(f,l){l&&(f.super_=l,f.prototype=Object.create(l.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:function(f,l){if(l){f.super_=l;var p=function(){};p.prototype=l.prototype;f.prototype=new p;f.prototype.constructor=f}},Hy="object"==typeof Reflect?Reflect:null,J$=Hy&&"function"==typeof Hy.apply?Hy.apply:
function(f,l,p){return Function.prototype.apply.call(f,l,p)};var Oqa=Hy&&"function"==typeof Hy.ownKeys?Hy.ownKeys:Object.getOwnPropertySymbols?function(f){return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f))}:function(f){return Object.getOwnPropertyNames(f)};var K$=Number.isNaN||function(f){return f!=f};Xi.EventEmitter=Xi;Xi.prototype._events=void 0;Xi.prototype._eventsCount=0;Xi.prototype._maxListeners=void 0;var L$=10;Object.defineProperty(Xi,"defaultMaxListeners",{enumerable:!0,
get:function(){return L$},set:function(f){if("number"!=typeof f||0>f||K$(f))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+f+".");L$=f}});Xi.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};Xi.prototype.setMaxListeners=function(f){if("number"!=typeof f||0>f||K$(f))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+
f+".");return this._maxListeners=f,this};Xi.prototype.getMaxListeners=function(){return void 0===this._maxListeners?Xi.defaultMaxListeners:this._maxListeners};Xi.prototype.emit=function(f){for(var l=[],p=1;p<arguments.length;p++)l.push(arguments[p]);p="error"===f;var b=this._events;if(void 0!==b)p=p&&void 0===b.error;else if(!p)return!1;if(p){var d;if(0<l.length&&(d=l[0]),d instanceof Error)throw d;l=Error("Unhandled error."+(d?" ("+d.message+")":""));throw l.context=d,l;}p=b[f];if(void 0===p)return!1;
if("function"==typeof p)J$(p,this,l);else for(d=p.length,b=QX(p,d),p=0;p<d;++p)J$(b[p],this,l);return!0};Xi.prototype.addListener=function(f,l){return NX(this,f,l,!1)};Xi.prototype.on=Xi.prototype.addListener;Xi.prototype.prependListener=function(f,l){return NX(this,f,l,!0)};Xi.prototype.once=function(f,l){return ZE(l),this.on(f,OX(this,f,l)),this};Xi.prototype.prependOnceListener=function(f,l){return ZE(l),this.prependListener(f,OX(this,f,l)),this};Xi.prototype.removeListener=function(f,l){var p,
b,d;if((ZE(l),void 0===(b=this._events))||void 0===(p=b[f]))return this;if(p===l||p.listener===l)0==--this._eventsCount?this._events=Object.create(null):(delete b[f],b.removeListener&&this.emit("removeListener",f,p.listener||l));else if("function"!=typeof p){var h=-1;for(d=p.length-1;0<=d;d--)if(p[d]===l||p[d].listener===l){var a=p[d].listener;h=d;break}if(0>h)return this;if(0===h)p.shift();else{for(;h+1<p.length;h++)p[h]=p[h+1];p.pop();!0}1===p.length&&(b[f]=p[0]);void 0!==b.removeListener&&this.emit("removeListener",
f,a||l)}return this};Xi.prototype.off=Xi.prototype.removeListener;Xi.prototype.removeAllListeners=function(f){var l,p;if(void 0===(p=this._events))return this;if(void 0===p.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==p[f]&&(0==--this._eventsCount?this._events=Object.create(null):delete p[f]),this;if(0===arguments.length){var b=Object.keys(p);for(p=0;p<b.length;++p)"removeListener"!==(l=b[p])&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),
this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(l=p[f]))this.removeListener(f,l);else if(void 0!==l)for(p=l.length-1;0<=p;p--)this.removeListener(f,l[p]);return this};Xi.prototype.listeners=function(f){return PX(this,f,!0)};Xi.prototype.rawListeners=function(f){return PX(this,f,!1)};Xi.listenerCount=function(f,l){return"function"==typeof f.listenerCount?f.listenerCount(l):RX.call(f,l)};Xi.prototype.listenerCount=RX;Xi.prototype.eventNames=function(){return 0<this._eventsCount?
Oqa(this._events):[]};var Fl=Xi;Fl.EventEmitter;Fl.defaultMaxListeners;Fl.init;Fl.listenerCount;var M$="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Pqa={},hF=sk,Mp=kx(Eqa),fY=kx(Jqa),cF=kx(Lqa),zY=kx(Gy),lx=kx(eT),op=kx(Dj),Fm=Fl;ps.prototype.get=function(f){return this._store["$"+f]};ps.prototype.set=function(f,l){this._store["$"+f]=l;return!0};ps.prototype.has=function(f){return"$"+f in this._store};ps.prototype.delete=function(f){f="$"+f;var l=f in this._store;
delete this._store[f];return l};ps.prototype.forEach=function(f){for(var l=Object.keys(this._store),p=0,b=l.length;p<b;p++){var d=l[p],h=this._store[d];d=d.substring(1);f(h,d)}};Object.defineProperty(ps.prototype,"size",{get:function(){return Object.keys(this._store).length}});gA.prototype.add=function(f){return this._store.set(f,!0)};gA.prototype.has=function(f){return this._store.has(f)};gA.prototype.forEach=function(f){this._store.forEach(function(l,p){f(p)})};Object.defineProperty(gA.prototype,
"size",{get:function(){return this._store.size}});if(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var f=Object.getOwnPropertyDescriptor(Map,Symbol.species);return f&&"get"in f&&Map[Symbol.species]===Map}()){var oA=Set;var bn=Map}else oA=gA,bn=ps;var SX=Function.prototype.toString,$ea=SX.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var iA=!!localStorage.getItem("_pouch_check_localstorage")}catch(f){iA=!1}op(mx,Fm.EventEmitter);
mx.prototype.addListener=function(f,l,p,b){function d(){if(h._listeners[l])if(a)a="waiting";else{a=!0;var e=hA(b,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));p.changes(e).on("change",function(n){n.seq>b.since&&!b.cancelled&&(b.since=n.seq,b.onChange(n))}).on("complete",function(){"waiting"===a&&Mp(d);a=!1}).on("error",function(){a=!1})}}if(!this._listeners[l]){var h=this,a=!1;this._listeners[l]=d;this.on(f,d)}};mx.prototype.removeListener=
function(f,l){l in this._listeners&&(Fm.EventEmitter.prototype.removeListener.call(this,f,this._listeners[l]),delete this._listeners[l])};mx.prototype.notifyLocalWindows=function(f){iA&&(localStorage[f]="a"===localStorage[f]?"b":"a")};mx.prototype.notify=function(f){this.emit(f);this.notifyLocalWindows(f)};var qx="function"===typeof Object.assign?Object.assign:function(f){for(var l=Object(f),p=1;p<arguments.length;p++){var b=arguments[p];if(null!=b)for(var d in b)Object.prototype.hasOwnProperty.call(b,
d)&&(l[d]=b[d])}return l};op(ij,Error);ij.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new ij(401,"unauthorized","Name or password is incorrect.");var Qqa=new ij(400,"bad_request","Missing JSON list of 'docs'"),Oo=new ij(404,"not_found","missing"),px=new ij(409,"conflict","Document update conflict"),ZX=new ij(400,"bad_request","_id field must contain a string"),ffa=new ij(412,"missing_id","_id is required for puts"),
efa=new ij(400,"bad_request","Only reserved document ids may start with underscore.");new ij(412,"precondition_failed","Database not open");var XX=new ij(500,"unknown_error","Database encountered an unknown error"),yY=new ij(500,"badarg","Some query argument is invalid");new ij(400,"invalid_request","Request was invalid");var Rqa=new ij(400,"query_parse_error","Some query parameter is invalid"),xY=new ij(500,"doc_validation","Bad special document member"),$E=new ij(400,"bad_request","Something wrong with the request"),
fT=new ij(400,"bad_request","Document must be a JSON object");new ij(404,"not_found","Database not found");var MM=new ij(500,"indexed_db_went_bad","unknown");new ij(500,"web_sql_went_bad","unknown");new ij(500,"levelDB_went_went_bad","unknown");new ij(403,"forbidden","Forbidden by design doc validate_doc_update function");var vY=new ij(400,"bad_request","Invalid rev format");new ij(412,"file_exists","The database could not be created, the file already exists.");var Wfa=new ij(412,"missing_stub","A pre-existing attachment stub wasn't found");
new ij(413,"invalid_url","Provided URL is invalid");var bY="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),hfa=/(?:^|&)([^&=]*)=?([^&]*)/g,gfa=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,nfa=M$.setImmediate||M$.setTimeout,dF=fY.v4;op(jA,Fm.EventEmitter);jA.prototype.cancel=function(){this.isCancelled=
!0;this.db.taskqueue.isReady&&this.emit("cancel")};jA.prototype.validateChanges=function(f){var l=f.complete,p=this;rh._changesFilterPlugin?rh._changesFilterPlugin.validate(f,function(b){if(b)return l(b);p.doChanges(f)}):p.doChanges(f)};jA.prototype.doChanges=function(f){var l=this,p=f.complete;f=Kk(f);"live"in f&&!("continuous"in f)&&(f.continuous=f.live);f.processChange=vfa;"latest"===f.since&&(f.since="now");f.since||(f.since=0);if("now"===f.since)this.db.info().then(function(h){l.isCancelled?
p(null,{status:"cancelled"}):(f.since=h.update_seq,l.doChanges(f))},p);else{if(rh._changesFilterPlugin){if(rh._changesFilterPlugin.normalize(f),rh._changesFilterPlugin.shouldFilter(this,f))return rh._changesFilterPlugin.filter(this,f)}else["doc_ids","filter","selector","view"].forEach(function(h){h in f&&In("warn",'The "'+h+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in
f||(f.descending=!1);f.limit=0===f.limit?1:f.limit;f.complete=p;var b=this.db._changes(f);if(b&&"function"===typeof b.cancel){var d=l.cancel;l.cancel=lx(function(h){b.cancel();d.apply(this,h)})}}};op(Aj,Fm.EventEmitter);Aj.prototype.post=tk("post",function(f,l,p){"function"===typeof l&&(p=l,l={});if("object"!==typeof f||Array.isArray(f))return p(yh(fT));this.bulkDocs({docs:[f]},l,JM(p,f._id))});Aj.prototype.put=tk("put",function(f,l,p){function b(){var a=f._rev.split("-"),e=a[1];a=parseInt(a[0],10)+
1;var n=eY();f._revisions={start:a,ids:[n,e]};f._rev=a+"-"+n;l.new_edits=!1}function d(a){"function"===typeof h._put&&!1!==l.new_edits?h._put(f,l,a):h.bulkDocs({docs:[f]},l,JM(a,f._id))}"function"===typeof l&&(p=l,l={});if("object"!==typeof f||Array.isArray(f))return p(yh(fT));YX(f._id);if(pu(f._id)&&"function"===typeof this._putLocal)return f._deleted?this._removeLocal(f,p):this._putLocal(f,p);var h=this;l.force&&f._rev?(b(),d(function(a){p(a,a?null:{ok:!0,id:f._id,rev:f._rev})})):d(p)});Aj.prototype.putAttachment=
tk("putAttachment",function(f,l,p,b,d){function h(e){var n="_rev"in e?parseInt(e._rev,10):0;e._attachments=e._attachments||{};e._attachments[l]={content_type:d,data:b,revpos:++n};return a.put(e)}var a=this;"function"===typeof d&&(d=b,b=p,p=null);"undefined"===typeof d&&(d=b,b=p,p=null);d||In("warn","Attachment",l,"on document",f,"is missing content_type");return a.get(f).then(function(e){if(e._rev!==p)throw yh(px);return h(e)},function(e){if(e.reason===Oo.message)return h({_id:f});throw e;})});Aj.prototype.removeAttachment=
tk("removeAttachment",function(f,l,p,b){var d=this;d.get(f,function(h,a){if(h)b(h);else if(a._rev!==p)b(yh(px));else{if(!a._attachments)return b();delete a._attachments[l];0===Object.keys(a._attachments).length&&delete a._attachments;d.put(a,b)}})});Aj.prototype.remove=tk("remove",function(f,l,p,b){"string"===typeof l?(f={_id:f,_rev:l},"function"===typeof p&&(b=p,p={})):"function"===typeof l?(b=l,p={}):(b=p,p=l);p=p||{};p.was_delete=!0;l={_id:f._id,_rev:f._rev||p.rev,_deleted:!0};if(pu(l._id)&&"function"===
typeof this._removeLocal)return this._removeLocal(f,b);this.bulkDocs({docs:[l]},p,JM(b,l._id))});Aj.prototype.revsDiff=tk("revsDiff",function(f,l,p){function b(n,q){e.has(n)||e.set(n,{missing:[]});e.get(n).missing.push(q)}function d(n,q){var r=f[n].slice(0);ou(q,function(v,y,D,E,I){v=y+"-"+D;y=r.indexOf(v);-1!==y&&(r.splice(y,1),"available"!==I.status&&b(n,v))});r.forEach(function(v){b(n,v)})}"function"===typeof l&&(p=l,l={});var h=Object.keys(f);if(!h.length)return p(null,{});var a=0,e=new bn;h.map(function(n){this._getRevisionTree(n,
function(q,r){if(q&&404===q.status&&"missing"===q.message)e.set(n,{missing:f[n]});else{if(q)return p(q);d(n,r)}if(++a===h.length){var v={};e.forEach(function(y,D){v[D]=y});return p(null,v)}})},this)});Aj.prototype.bulkGet=tk("bulkGet",function(f,l){WX(this,f,l)});Aj.prototype.compactDocument=tk("compactDocument",function(f,l,p){var b=this;this._getRevisionTree(f,function(d,h){if(d)return p(d);var a=yfa(h),e=[],n=[];Object.keys(a).forEach(function(q){a[q]>l&&e.push(q)});ou(h,function(q,r,v,y,D){q=
r+"-"+v;"available"===D.status&&-1!==e.indexOf(q)&&n.push(q)});b._doCompaction(f,n,p)})});Aj.prototype.compact=tk("compact",function(f,l){"function"===typeof f&&(l=f,f={});f=f||{};this._compactionQueue=this._compactionQueue||[];this._compactionQueue.push({opts:f,callback:l});1===this._compactionQueue.length&&lY(this)});Aj.prototype._compact=function(f,l){var p=this,b=[];p.changes({return_docs:!1,last_seq:f.last_seq||0}).on("change",function(d){b.push(p.compactDocument(d.id,0))}).on("complete",function(d){var h=
d.last_seq;Promise.all(b).then(function(){return bF(p,"_local/compaction",function(a){return!a.last_seq||a.last_seq<h?(a.last_seq=h,a):!1})}).then(function(){l(null,{ok:!0})}).catch(l)}).on("error",l)};Aj.prototype.get=tk("get",function(f,l,p){function b(){var n=[],q=d.length;if(!q)return p(null,n);d.forEach(function(r){h.get(f,{rev:r,revs:l.revs,latest:l.latest,attachments:l.attachments,binary:l.binary},function(v,y){if(v)n.push({missing:r});else{v=0;for(var D=n.length;v<D;v++)if(n[v].ok&&n[v].ok._rev===
y._rev){var E=!0;break}E||n.push({ok:y})}q--;q||p(null,n)})})}"function"===typeof l&&(p=l,l={});if("string"!==typeof f)return p(yh(ZX));if(pu(f)&&"function"===typeof this._getLocal)return this._getLocal(f,p);var d=[],h=this;if(l.open_revs)if("all"===l.open_revs)this._getRevisionTree(f,function(n,q){if(n)return p(n);d=HM(q).map(function(r){return r.rev});b()});else if(Array.isArray(l.open_revs)){d=l.open_revs;for(var a=0;a<d.length;a++){var e=d[a];if("string"!==typeof e||!/^\d+-/.test(e))return p(yh(vY))}b()}else return p(yh(XX,
"function_clause"));else return this._get(f,l,function(n,q){if(n)return n.docId=f,p(n);var r=q.doc,v=q.metadata,y=q.ctx;l.conflicts&&(q=IM(v),q.length&&(r._conflicts=q));Vq(v,r._rev)&&(r._deleted=!0);if(l.revs||l.revs_info){n=r._rev.split("-");q=parseInt(n[0],10);n=n[1];var D=gY(v.rev_tree);v=null;for(var E=0;E<D.length;E++){var I=D[E],K=I.ids.map(function(t){return t.id}).indexOf(n);if(K===q-1||!v&&-1!==K)v=I}if(!v)return n=Error("invalid rev tree"),n.docId=f,p(n);q=v.ids.map(function(t){return t.id}).indexOf(r._rev.split("-")[1])+
1;v.ids.splice(q,v.ids.length-q);v.ids.reverse();l.revs&&(r._revisions={start:v.pos+v.ids.length-1,ids:v.ids.map(function(t){return t.id})});if(l.revs_info){var P=v.pos+v.ids.length;r._revs_info=v.ids.map(function(t){P--;return{rev:P+"-"+t.id,status:t.opts.status}})}}if(l.attachments&&r._attachments){var N=r._attachments,aa=Object.keys(N).length;if(0===aa)return p(null,r);Object.keys(N).forEach(function(t){this._getAttachment(r._id,t,N[t],{rev:r._rev,binary:l.binary,ctx:y},function(u,B){u=r._attachments[t];
u.data=B;delete u.stub;delete u.length;--aa||p(null,r)})},h)}else{if(r._attachments)for(var m in r._attachments)r._attachments.hasOwnProperty(m)&&(r._attachments[m].stub=!0);p(null,r)}})});Aj.prototype.getAttachment=tk("getAttachment",function(f,l,p,b){var d=this;p instanceof Function&&(b=p,p={});this._get(f,p,function(h,a){if(h)return b(h);if(a.doc._attachments&&a.doc._attachments[l])p.ctx=a.ctx,p.binary=!0,d._getAttachment(f,l,a.doc._attachments[l],p,b);else return b(yh(Oo))})});Aj.prototype.allDocs=
tk("allDocs",function(f,l){"function"===typeof f&&(l=f,f={});f.skip="undefined"!==typeof f.skip?f.skip:0;f.start_key&&(f.startkey=f.start_key);f.end_key&&(f.endkey=f.end_key);if("keys"in f){if(!Array.isArray(f.keys))return l(new TypeError("options.keys must be an array"));var p=["startkey","endkey","key"].filter(function(b){return b in f})[0];if(p){l(yh(Rqa,"Query parameter `"+p+"` is not compatible with multi-get"));return}if(!Lp(this)&&(zfa(f),0===f.keys.length))return this._allDocs({limit:0},l)}return this._allDocs(f,
l)});Aj.prototype.changes=function(f,l){"function"===typeof f&&(l=f,f={});f=f||{};f.return_docs="return_docs"in f?f.return_docs:!f.live;return new jA(this,f,l)};Aj.prototype.close=tk("close",function(f){this._closed=!0;this.emit("closed");return this._close(f)});Aj.prototype.info=tk("info",function(f){var l=this;this._info(function(p,b){if(p)return f(p);b.db_name=b.db_name||l.name;b.auto_compaction=!(!l.auto_compaction||Lp(l));b.adapter=l.adapter;f(null,b)})});Aj.prototype.id=tk("id",function(f){return this._id(f)});
Aj.prototype.type=function(){return"function"===typeof this._type?this._type():this.adapter};Aj.prototype.bulkDocs=tk("bulkDocs",function(f,l,p){"function"===typeof l&&(p=l,l={});l=l||{};Array.isArray(f)&&(f={docs:f});if(!f||!f.docs||!Array.isArray(f.docs))return p(yh(Qqa));for(var b=0;b<f.docs.length;++b)if("object"!==typeof f.docs[b]||Array.isArray(f.docs[b]))return p(yh(fT));var d;f.docs.forEach(function(e){e._attachments&&Object.keys(e._attachments).forEach(function(n){var q;(q=d)||(q="_"===n.charAt(0)?
n+" is not a valid attachment name, attachment names cannot start with '_'":!1);d=q;e._attachments[n].content_type||In("warn","Attachment",n,"on document",e._id,"is missing content_type")})});if(d)return p(yh($E,d));"new_edits"in l||(l.new_edits="new_edits"in f?f.new_edits:!0);var h=this;l.new_edits||Lp(h)||f.docs.sort(xfa);wfa(f.docs);var a=f.docs.map(function(e){return e._id});return this._bulkDocs(f,l,function(e,n){if(e)return p(e);l.new_edits||(n=n.filter(function(r){return r.error}));if(!Lp(h)){e=
0;for(var q=n.length;e<q;e++)n[e].id=n[e].id||a[e]}p(null,n)})});Aj.prototype.registerDependentDatabase=tk("registerDependentDatabase",function(f,l){var p=new this.constructor(f,this.__opts);bF(this,"_local/_pouch_dependentDbs",function(b){b.dependentDbs=b.dependentDbs||{};if(b.dependentDbs[f])return!1;b.dependentDbs[f]=!0;return b}).then(function(){l(null,{db:p})}).catch(l)});Aj.prototype.destroy=tk("destroy",function(f,l){function p(){b._destroy(f,function(h,a){if(h)return l(h);b._destroyed=!0;
b.emit("destroyed");l(null,a||{ok:!0})})}"function"===typeof f&&(l=f,f={});var b=this,d="use_prefix"in b?b.use_prefix:!0;if(Lp(b))return p();b.get("_local/_pouch_dependentDbs",function(h,a){if(h)return 404!==h.status?l(h):p();var e=b.constructor;h=Object.keys(a.dependentDbs).map(function(n){n=d?n.replace(new RegExp("^"+e.prefix),""):n;return(new e(n,b.__opts)).destroy()});Promise.all(h).then(p,l)})});kA.prototype.execute=function(){var f;if(this.failed)for(;f=this.queue.shift();)f(this.failed);else for(;f=
this.queue.shift();)f()};kA.prototype.fail=function(f){this.failed=f;this.execute()};kA.prototype.ready=function(f){this.isReady=!0;this.db=f;this.execute()};kA.prototype.addTask=function(f){this.queue.push(f);this.failed&&this.execute()};op(rh,Aj);var jga="undefined"!==typeof AbortController?AbortController:function(){return{abort:function(){}}},HY=fetch,sx=Headers;rh.adapters={};rh.preferredAdapters=[];rh.prefix="_pouch_";var N$=new Fm.EventEmitter;(function(f){Object.keys(Fm.EventEmitter.prototype).forEach(function(p){"function"===
typeof Fm.EventEmitter.prototype[p]&&(f[p]=N$[p].bind(N$))});var l=f._destructionListeners=new bn;f.on("ref",function(p){l.has(p.name)||l.set(p.name,[]);l.get(p.name).push(p)});f.on("unref",function(p){if(l.has(p.name)){var b=l.get(p.name),d=b.indexOf(p);0>d||(b.splice(d,1),1<b.length?l.set(p.name,b):l.delete(p.name))}});f.on("destroyed",function(p){if(l.has(p)){var b=l.get(p);l.delete(p);b.forEach(function(d){d.emit("destroyed",!0)})}})})(rh);rh.adapter=function(f,l,p){l.valid()&&(rh.adapters[f]=
l,p&&rh.preferredAdapters.push(f))};rh.plugin=function(f){if("function"===typeof f)f(rh);else{if("object"!==typeof f||0===Object.keys(f).length)throw Error('Invalid plugin: got "'+f+'", expected an object or a function');Object.keys(f).forEach(function(l){rh.prototype[l]=f[l]})}this.__defaults&&(rh.__defaults=qx({},this.__defaults));return rh};rh.defaults=function(f){function l(p,b){if(!(this instanceof l))return new l(p,b);b=b||{};p&&"object"===typeof p&&(b=p,p=b.name,delete b.name);b=qx({},l.__defaults,
b);rh.call(this,p,b)}op(l,rh);l.preferredAdapters=rh.preferredAdapters.slice();Object.keys(rh).forEach(function(p){p in l||(l[p]=rh[p])});l.__defaults=qx({},this.__defaults,f);return l};rh.fetch=function(f,l){return HY(f,l)};var oY=["$or","$nor","$not"],rY={$elemMatch:function(f,l,p,b){return Array.isArray(b)&&0!==b.length?"object"===typeof b[0]?b.some(function(d){return ox(d,l,Object.keys(l))}):b.some(function(d){return LM(l,f,p,d)}):!1},$allMatch:function(f,l,p,b){return Array.isArray(b)&&0!==b.length?
"object"===typeof b[0]?b.every(function(d){return ox(d,l,Object.keys(l))}):b.every(function(d){return LM(l,f,p,d)}):!1},$eq:function(f,l,p,b){return ru(b)&&0===dl(b,l)},$gte:function(f,l,p,b){return ru(b)&&0<=dl(b,l)},$gt:function(f,l,p,b){return ru(b)&&0<dl(b,l)},$lte:function(f,l,p,b){return ru(b)&&0>=dl(b,l)},$lt:function(f,l,p,b){return ru(b)&&0>dl(b,l)},$exists:function(f,l,p,b){return l?ru(b):!ru(b)},$mod:function(f,l,p,b){if(f=mA(b)){f=l[0];l=l[1];if(0===f)throw Error("Bad divisor, cannot divide by zero");
if(parseInt(f,10)!==f)throw Error("Divisor is not an integer");if(parseInt(l,10)!==l)throw Error("Modulus is not an integer");f=parseInt(b,10)!==b?!1:b%f===l}return f},$ne:function(f,l,p,b){return l.every(function(d){return 0!==dl(b,d)})},$in:function(f,l,p,b){return mA(b)&&sY(b,l)},$nin:function(f,l,p,b){return mA(b)&&!sY(b,l)},$size:function(f,l,p,b){return mA(b)&&b.length===l},$all:function(f,l,p,b){return Array.isArray(b)&&Ifa(b,l)},$regex:function(f,l,p,b){if(f=mA(b))f=(new RegExp(l)).test(b);
return f},$type:function(f,l,p,b){return Jfa(b,l)}};rh.plugin(function(f){f._changesFilterPlugin={validate:Kfa,normalize:Lfa,shouldFilter:Mfa,filter:Nfa}});rh.version="7.2.1";var Ofa=tY("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),Pfa=tY("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" ")),
nA=new mx,PM=!1,QM=[],rx=new bn,SM,RM=new bn;FY.valid=function(){return"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange};var VM={};UM.valid=function(){return!0};op(uu,Error);op(iF,Error);op(jF,Error);var mga=In.bind(null,"log"),nga=Array.isArray,oga=JSON.parse;pA.prototype.add=function(f){return this.promise=this.promise.catch(function(){}).then(function(){return f()})};pA.prototype.finish=function(){return this.promise};var O$={},P$=new pA,Sqa=function(f,l){return YM(l)},Tqa=function(f,
l){return l.length},Uqa=function(f,l){f=YM(l);for(var p=Math.min.apply(null,l),b=Math.max.apply(null,l),d=l.length,h=0,a=0,e=l.length;a<e;a++){var n=l[a];h+=n*n}return{sum:f,min:p,max:b,count:d,sumsqr:h}},Q$=function(f,l,p,b){function d(T,Y,wa,Ga,na){try{return{output:Y(wa,Ga,na)}}catch(ea){return OY(T,ea),{error:ea}}}function h(T,Y){var wa=dl(T.key,Y.key);return 0!==wa?wa:dl(T.value,Y.value)}function a(T,Y,wa){wa=wa||0;return"number"===typeof Y?T.slice(wa,Y+wa):0<wa?T.slice(wa):T}function e(T){var Y=
T.value;return Y&&"object"===typeof Y&&Y._id||T.id}function n(T){T.rows.forEach(function(Y){var wa=Y.doc&&Y.doc._attachments;wa&&Object.keys(wa).forEach(function(Ga){var na=wa[Ga];wa[Ga].data=EM(na.data,na.content_type)})})}function q(T){return function(Y){T.include_docs&&T.attachments&&T.binary&&n(Y);return Y}}function r(T,Y,wa,Ga){Y=Y[T];"undefined"!==typeof Y&&(Ga&&(Y=encodeURIComponent(JSON.stringify(Y))),wa.push(T+"="+Y))}function v(T){if("undefined"!==typeof T){var Y=Number(T);return isNaN(Y)||
Y!==parseInt(T,10)?T:Y}}function y(T){T.group_level=v(T.group_level);T.limit=v(T.limit);T.skip=v(T.skip);return T}function D(T,Y){var wa=T.descending?"endkey":"startkey",Ga=T.descending?"startkey":"endkey";if("undefined"!==typeof T[wa]&&"undefined"!==typeof T[Ga]&&0<dl(T[wa],T[Ga]))throw new uu("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(Y.reduce&&!1!==T.reduce){if(T.include_docs)throw new uu("{include_docs:true} is invalid for reduce");if(T.keys&&
1<T.keys.length&&!T.group&&!T.group_level)throw new uu("Multi-key fetches for reduce views must use {group: true}");}["group_level","limit","skip"].forEach(function(na){a:{if(na=T[na]){if("number"!==typeof na){na=new uu('Invalid value for integer: "'+na+'"');break a}if(0>na){na=new uu('Invalid value for positive integer: "'+na+'"');break a}}na=void 0}if(na)throw na;})}function E(T,Y,wa){var Ga=[],na,ea="GET",da,ia;r("reduce",wa,Ga);r("include_docs",wa,Ga);r("attachments",wa,Ga);r("limit",wa,Ga);r("descending",
wa,Ga);r("group",wa,Ga);r("group_level",wa,Ga);r("skip",wa,Ga);r("stale",wa,Ga);r("conflicts",wa,Ga);r("startkey",wa,Ga,!0);r("start_key",wa,Ga,!0);r("endkey",wa,Ga,!0);r("end_key",wa,Ga,!0);r("inclusive_end",wa,Ga);r("key",wa,Ga,!0);r("update_seq",wa,Ga);Ga=Ga.join("&");Ga=""===Ga?"":"?"+Ga;if("undefined"!==typeof wa.keys){var Oa="keys="+encodeURIComponent(JSON.stringify(wa.keys));2E3>=Oa.length+Ga.length+1?Ga+=("?"===Ga[0]?"&":"?")+Oa:(ea="POST","string"===typeof Y?na={keys:wa.keys}:Y.keys=wa.keys)}if("string"===
typeof Y)return Oa=ZM(Y),T.fetch("_design/"+Oa[0]+"/_view/"+Oa[1]+Ga,{headers:new sx({"Content-Type":"application/json"}),method:ea,body:JSON.stringify(na)}).then(function(Va){da=Va.ok;ia=Va.status;return Va.json()}).then(function(Va){if(!da)throw Va.status=ia,nx(Va);Va.rows.forEach(function(eb){if(eb.value&&eb.value.error&&"builtin_reduce_error"===eb.value.error)throw Error(eb.reason);});return Va}).then(q(wa));na=na||{};Object.keys(Y).forEach(function(Va){Array.isArray(Y[Va])?na[Va]=Y[Va]:na[Va]=
Y[Va].toString()});return T.fetch("_temp_view"+Ga,{headers:new sx({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(na)}).then(function(Va){da=Va.ok;ia=Va.status;return Va.json()}).then(function(Va){if(!da)throw Va.status=ia,nx(Va);return Va}).then(q(wa))}function I(T,Y,wa){return new Promise(function(Ga,na){T._query(Y,wa,function(ea,da){if(ea)return na(ea);Ga(da)})})}function K(T){return new Promise(function(Y,wa){T._viewCleanup(function(Ga,na){if(Ga)return wa(Ga);Y(na)})})}
function P(T){return function(Y){if(404===Y.status)return T;throw Y;}}function N(T,Y,wa){function Ga(ia,Oa){for(var Va=[],eb=new oA,Sa=0,Bb=Oa.rows.length;Sa<Bb;Sa++){var Z=Oa.rows[Sa].doc;if(Z&&(Va.push(Z),eb.add(Z._id),Z._deleted=!da.has(Z._id),!Z._deleted)){var sa=da.get(Z._id);"value"in sa&&(Z.value=sa.value)}}Oa=XM(da);Oa.forEach(function(Da){if(!eb.has(Da)){var X={_id:Da};Da=da.get(Da);"value"in Da&&(X.value=Da.value);Va.push(X)}});ia.keys=JY(Oa.concat(ia.keys));Va.push(ia);return Va}var na=
"_local/doc_"+T,ea={_id:na,keys:[]};T=wa.get(T);var da=T[0];na=qga(T[1])?Promise.resolve(ea):Y.db.get(na).catch(P(ea));return na.then(function(ia){return(ia.keys.length?Y.db.allDocs({keys:ia.keys,include_docs:!0}):Promise.resolve({rows:[]})).then(function(Oa){return Ga(ia,Oa)})})}function aa(T,Y,wa){return T.db.get("_local/lastSeq").catch(P({_id:"_local/lastSeq",seq:0})).then(function(Ga){var na=XM(Y);return Promise.all(na.map(function(ea){return N(ea,T,Y)})).then(function(ea){ea=aF(ea);Ga.seq=wa;
ea.push(Ga);return T.db.bulkDocs({docs:ea})})})}function m(T){T="string"===typeof T?T:T.name;var Y=O$[T];Y||(Y=O$[T]=new pA);return Y}function t(T){return WM(m(T),function(){return u(T)})()}function u(T){function Y(Va,eb){return function(){return aa(T,Va,eb)}}function wa(){return T.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:ia,limit:50}).then(Ga)}function Ga(Va){Va=Va.results;if(Va.length){for(var eb=new bn,Sa=0,Bb=Va.length;Sa<Bb;Sa++){var Z=Va[Sa];if("_"!==
Z.doc._id[0]){na=[];ea=Z.doc;if(!ea._deleted){var sa=T.sourceDB;try{da(ea)}catch(Zb){OY(sa,Zb)}}na.sort(h);sa=void 0;for(var Da=na,X=new bn,ma=0,ta=Da.length;ma<ta;ma++){var Pa=Da[ma],Za=[Pa.key,Pa.id];0<ma&&0===dl(Pa.key,sa)&&Za.push(ma);X.set(No(Za),Pa);sa=Pa.key}eb.set(Z.doc._id,[X,Z.changes])}ia=Z.seq}Oa.add(Y(eb,ia));if(!(50>Va.length))return wa()}}var na,ea,da=l(T.mapFun,function(Va,eb){Va={id:ea._id,key:qu(Va)};"undefined"!==typeof eb&&null!==eb&&(Va.value=qu(eb));na.push(Va)}),ia=T.seq||0,
Oa=new pA;return wa().then(function(){return Oa.finish()}).then(function(){T.seq=ia})}function B(T,Y,wa){0===wa.group_level&&delete wa.group_level;var Ga=wa.group||wa.group_level,na=p(T.reduceFun),ea=[],da=isNaN(wa.group_level)?Number.POSITIVE_INFINITY:wa.group_level;Y.forEach(function(Sa){var Bb=ea[ea.length-1],Z=Ga?Sa.key:null;Ga&&Array.isArray(Z)&&(Z=Z.slice(0,da));Bb&&0===dl(Bb.groupKey,Z)?(Bb.keys.push([Sa.key,Sa.id]),Bb.values.push(Sa.value)):ea.push({keys:[[Sa.key,Sa.id]],values:[Sa.value],
groupKey:Z})});Y=[];for(var ia=0,Oa=ea.length;ia<Oa;ia++){var Va=ea[ia],eb=d(T.sourceDB,na,Va.keys,Va.values,!1);if(eb.error&&eb.error instanceof jF)throw eb.error;Y.push({value:eb.error?null:eb.output,key:Va.groupKey})}return{rows:a(Y,wa.limit,wa.skip)}}function A(T,Y){return WM(m(T),function(){return H(T,Y)})()}function H(T,Y){function wa(eb){eb.include_docs=!0;return T.db.allDocs(eb).then(function(Sa){na=Sa.total_rows;return Sa.rows.map(function(Bb){if("value"in Bb.doc&&"object"===typeof Bb.doc.value&&
null!==Bb.doc.value){var Z=Object.keys(Bb.doc.value).sort(),sa=["id","key","value"];if(!(Z<sa||Z>sa))return Bb.doc.value}a:{Z=Bb.doc._id;sa=[];for(var Da=[],X=0;;){var ma=Z[X++];if("\x00"===ma)if(1===sa.length){Z=sa.pop();break a}else{var ta=sa;var Pa=Da;ma=ta.pop();if(Pa.length){var Za=Pa[Pa.length-1];ma===Za.element&&(Pa.pop(),Za=Pa[Pa.length-1]);Pa=Za.element;Za=Za.index;Array.isArray(Pa)?Pa.push(ma):Za===ta.length-2?(ta=ta.pop(),Pa[ta]=ma):ta.push(ma)}continue}switch(ma){case "1":sa.push(null);
break;case "2":sa.push("1"===Z[X]);X++;break;case "3":Za=Z;ta=ma=X;if("1"===Za[ma])Za=0,ma++;else{Pa="0"===Za[ma];ma++;var Zb="",Pb=Za.substring(ma,ma+3);Pb=parseInt(Pb,10)+-324;Pa&&(Pb=-Pb);for(ma+=3;;){var Db=Za[ma];if("\x00"===Db)break;else Zb+=Db;ma++}Zb=Zb.split(".");Za=1===Zb.length?parseInt(Zb,10):parseFloat(Zb[0]+"."+Zb[1]);Pa&&(Za-=10);0!==Pb&&(Za=parseFloat(Za+"e"+Pb))}Pa=Za;ma-=ta;sa.push(Pa);X+=ma;break;case "4":for(ma="";;){ta=Z[X];if("\x00"===ta)break;ma+=ta;X++}ma=ma.replace(/\u0001\u0001/g,
"\x00").replace(/\u0001\u0002/g,"\u0001").replace(/\u0002\u0002/g,"\u0002");sa.push(ma);break;case "5":ma={element:[],index:sa.length};sa.push(ma.element);Da.push(ma);break;case "6":ma={element:{},index:sa.length};sa.push(ma.element);Da.push(ma);break;default:throw Error("bad collationIndex or unexpectedly reached end of input: "+ma);}}}return{key:Z[0],id:Z[1],value:"value"in Bb.doc?Bb.doc.value:null}})})}function Ga(eb){var Sa=ea?B(T,eb,Y):{total_rows:na,offset:da,rows:eb};Y.update_seq&&(Sa.update_seq=
T.seq);if(Y.include_docs){var Bb=JY(eb.map(e));return T.sourceDB.allDocs({keys:Bb,include_docs:!0,conflicts:Y.conflicts,attachments:Y.attachments,binary:Y.binary}).then(function(Z){var sa=new bn;Z.rows.forEach(function(Da){sa.set(Da.id,Da.doc)});eb.forEach(function(Da){var X=e(Da);if(X=sa.get(X))Da.doc=X});return Sa})}return Sa}var na,ea=T.reduceFun&&!1!==Y.reduce,da=Y.skip||0;"undefined"===typeof Y.keys||Y.keys.length||(Y.limit=0,delete Y.keys);if("undefined"!==typeof Y.keys){var ia=Y.keys.map(function(eb){eb=
{startkey:No([eb]),endkey:No([eb,{}])};Y.update_seq&&(eb.update_seq=!0);return wa(eb)});return Promise.all(ia).then(aF).then(Ga)}ia={descending:Y.descending};Y.update_seq&&(ia.update_seq=!0);if("start_key"in Y)var Oa=Y.start_key;"startkey"in Y&&(Oa=Y.startkey);if("end_key"in Y)var Va=Y.end_key;"endkey"in Y&&(Va=Y.endkey);"undefined"!==typeof Oa&&(ia.startkey=Y.descending?No([Oa,{}]):No([Oa]));"undefined"!==typeof Va&&(Oa=!1!==Y.inclusive_end,Y.descending&&(Oa=!Oa),ia.endkey=No(Oa?[Va,{}]:[Va]));"undefined"!==
typeof Y.key&&(Va=No([Y.key]),Oa=No([Y.key,{}]),ia.descending?(ia.endkey=Va,ia.startkey=Oa):(ia.startkey=Va,ia.endkey=Oa));ea||("number"===typeof Y.limit&&(ia.limit=Y.limit),ia.skip=da);return wa(ia).then(Ga)}function F(T){return T.fetch("_view_cleanup",{headers:new sx({"Content-Type":"application/json"}),method:"POST"}).then(function(Y){return Y.json()})}function L(T){return T.get("_local/"+f).then(function(Y){var wa=new bn;Object.keys(Y.views).forEach(function(na){var ea=ZM(na);na="_design/"+ea[0];
ea=ea[1];var da=wa.get(na);da||(da=new oA,wa.set(na,da));da.add(ea)});var Ga={keys:XM(wa),include_docs:!0};return T.allDocs(Ga).then(function(na){var ea={};na.rows.forEach(function(da){var ia=da.key.substring(8);wa.get(da.key).forEach(function(Oa){var Va=ia+"/"+Oa;Y.views[Va]||(Va=Oa);Va=Object.keys(Y.views[Va]);var eb=da.doc&&da.doc.views&&da.doc.views[Oa];Va.forEach(function(Sa){ea[Sa]=ea[Sa]||eb})})});na=Object.keys(ea).filter(function(da){return!ea[da]}).map(function(da){return WM(m(da),function(){return(new T.constructor(da,
T.__opts)).destroy()})()});return Promise.all(na).then(function(){return{ok:!0}})})},P({ok:!0}))}function U(T,Y,wa){if("function"===typeof T._query)return I(T,Y,wa);if(Lp(T))return E(T,Y,wa);if("string"!==typeof Y)return D(wa,Y),P$.add(function(){return NY(T,"temp_view/temp_view",Y.map,Y.reduce,!0,f).then(function(ea){return lga(t(ea).then(function(){return A(ea,wa)}),function(){return ea.db.destroy()})})}),P$.finish();var Ga=ZM(Y),na=Ga[1];return T.get("_design/"+Ga[0]).then(function(ea){var da=
ea.views&&ea.views[na];if(!da)throw new iF("ddoc "+ea._id+" has no view named "+na);b(ea,na);D(wa,da);return NY(T,Y,da.map,da.reduce,!1,f).then(function(ia){return"ok"===wa.stale||"update_after"===wa.stale?("update_after"===wa.stale&&Mp(function(){t(ia)}),A(ia,wa)):t(ia).then(function(){return A(ia,wa)})})})}return{query:function(T,Y,wa){var Ga=this;"function"===typeof Y&&(wa=Y,Y={});Y=Y?y(Y):{};"function"===typeof T&&(T={map:T});var na=Promise.resolve().then(function(){return U(Ga,T,Y)});IY(na,wa);
return na},viewCleanup:kga(function(){return"function"===typeof this._viewCleanup?K(this):Lp(this)?F(this):L(this)})}}("mrviews",function(f,l){return"function"===typeof f&&2===f.length?function(p){return f(p,l)}:LY(f.toString(),l)},function(f){f=f.toString();if(/^_sum/.test(f))var l=Sqa;else if(/^_count/.test(f))l=Tqa;else if(/^_stats/.test(f))l=Uqa;else{if(/^_/.test(f))throw Error(f+" is not a supported reduce function.");l=void 0}return l?l:LY(f)},function(f,l){var p=f.views&&f.views[l];if("string"!==
typeof p.map)throw new iF("ddoc "+f._id+" has no string view named "+l+", instead found object of type: "+typeof p.map);});qA.prototype.writeCheckpoint=function(f,l){var p=this;return this.updateTarget(f,l).then(function(){return p.updateSource(f,l)})};qA.prototype.updateTarget=function(f,l){return this.opts.writeTargetCheckpoint?$M(this.target,this.id,f,l,this.returnValue):Promise.resolve(!0)};qA.prototype.updateSource=function(f,l){if(this.opts.writeSourceCheckpoint){var p=this;return $M(this.src,
this.id,f,l,this.returnValue).catch(function(b){if(RY(b))return p.opts.writeSourceCheckpoint=!1,!0;throw b;})}return Promise.resolve(!0)};var R$={undefined:function(f,l){return 0===dl(f.last_seq,l.last_seq)?l.last_seq:0},1:function(f,l){f=l.session_id===f.session_id?{last_seq:l.last_seq,history:l.history}:QY(l.history,f.history);return f.last_seq}};qA.prototype.getCheckpoint=function(){var f=this;return f.opts&&f.opts.writeSourceCheckpoint&&!f.opts.writeTargetCheckpoint?f.src.get(f.id).then(function(l){return l.last_seq||
0}).catch(function(l){if(404!==l.status)throw l;return 0}):f.target.get(f.id).then(function(l){return f.opts&&f.opts.writeTargetCheckpoint&&!f.opts.writeSourceCheckpoint?l.last_seq||0:f.src.get(f.id).then(function(p){if(l.version!==p.version)return 0;var b=l.version?l.version.toString():"undefined";return b in R$?R$[b](l,p):0},function(p){if(404===p.status&&l.last_seq)return f.src.put({_id:f.id,last_seq:0}).then(function(){return 0},function(b){return RY(b)?(f.opts.writeSourceCheckpoint=!1,l.last_seq):
0});throw p;})}).catch(function(l){if(404!==l.status)throw l;return 0})};op(kF,Fm.EventEmitter);kF.prototype.cancel=function(){this.cancelled=!0;this.state="cancelled";this.emit("cancel")};kF.prototype.ready=function(f,l){function p(){b.cancel()}var b=this;b._readyCalled||(b._readyCalled=!0,f.once("destroyed",p),l.once("destroyed",p),b.once("complete",function(){f.removeListener("destroyed",p);l.removeListener("destroyed",p)}))};op(cN,Fm.EventEmitter);cN.prototype.cancel=function(){this.canceled||
(this.canceled=!0,this.push.cancel(),this.pull.cancel())};rh.plugin(function(f){f.adapter("idb",FY,!0)}).plugin(function(f){f.adapter("http",UM,!1);f.adapter("https",UM,!1)}).plugin({query:function(f,l,p){return Q$.query.call(this,f,l,p)},viewCleanup:function(f){return Q$.viewCleanup.call(this,f)}}).plugin(function(f){f.replicate=bN;f.sync=xga;Object.defineProperty(f.prototype,"replicate",{get:function(){var l=this;"undefined"===typeof this.replicateMethods&&(this.replicateMethods={from:function(p,
b,d){return l.constructor.replicate(p,l,b,d)},to:function(p,b,d){return l.constructor.replicate(l,p,b,d)}});return this.replicateMethods}});f.prototype.sync=function(l,p,b){return this.constructor.sync(this,l,p,b)}});var Vqa=Pqa=rh,jt={};Object.defineProperty(jt,"__esModule",{value:!0});qs.prototype.get=function(f){return this._store["$"+f]};qs.prototype.set=function(f,l){this._store["$"+f]=l;return!0};qs.prototype.has=function(f){return"$"+f in this._store};qs.prototype.delete=function(f){f="$"+
f;var l=f in this._store;delete this._store[f];return l};qs.prototype.forEach=function(f){for(var l=Object.keys(this._store),p=0,b=l.length;p<b;p++){var d=l[p],h=this._store[d];d=d.substring(1);f(h,d)}};Object.defineProperty(qs.prototype,"size",{get:function(){return Object.keys(this._store).length}});rA.prototype.add=function(f){return this._store.set(f,!0)};rA.prototype.has=function(f){return this._store.has(f)};rA.prototype.forEach=function(f){this._store.forEach(function(l,p){f(p)})};Object.defineProperty(rA.prototype,
"size",{get:function(){return this._store.size}});(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var f=Object.getOwnPropertyDescriptor(Map,Symbol.species);return f&&"get"in f&&Map[Symbol.species]===Map})()?(jt.Set=Set,jt.Map=Map):(jt.Set=rA,jt.Map=qs);var gT={},hT=sk;gT.test=function(){return"undefined"!==typeof hT&&!hT.browser};gT.install=function(f){return function(){hT.nextTick(f)}};var S$="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof self?self:global,iT="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,jT={},T$=iT.MutationObserver||iT.WebKitMutationObserver;jT.test=function(){return T$};jT.install=function(f){var l=0;f=new T$(f);var p=iT.document.createTextNode("");f.observe(p,{characterData:!0});return function(){p.data=l=++l%2}};var kT="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,yJ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,Wqa={},mC=[gT,{test:function(){return"function"===typeof S$.queueMicrotask},install:function(f){return function(){S$.queueMicrotask(f)}}},jT,{test:function(){return kT.setImmediate?!1:"undefined"!==typeof kT.MessageChannel},install:function(f){var l=new kT.MessageChannel;l.port1.onmessage=f;return function(){l.port2.postMessage(0)}}},{test:function(){return"document"in yJ&&"onreadystatechange"in yJ.document.createElement("script")},install:function(f){return function(){var l=yJ.document.createElement("script");
l.onreadystatechange=function(){f();l.onreadystatechange=null;l.parentNode.removeChild(l);l=null};yJ.document.documentElement.appendChild(l);return f}}},{test:function(){return!0},install:function(f){return function(){setTimeout(f,0)}}}],tx,vu,sA=-1,rs=[],dN=!1,nC=-1,Xqa=mC.length;for(;++nC<Xqa;)if(mC[nC]&&mC[nC].test&&mC[nC].test()){var Yqa=mC[nC].install(TY);break}UY.prototype.run=function(){var f=this.fun,l=this.array;switch(l.length){case 0:return f();case 1:return f(l[0]);case 2:return f(l[0],
l[1]);case 3:return f(l[0],l[1],l[2]);default:return f.apply(null,l)}};var si=Wqa=function(f){var l=Array(arguments.length-1);if(1<arguments.length)for(var p=1;p<arguments.length;p++)l[p-1]=arguments[p];rs.push(new UY(f,l));dN||tx||(dN=!0,Yqa())},Vf={};Object.defineProperty(Vf,"__esModule",{value:!0});(Dj&&"object"===typeof Dj&&"default"in Dj?Dj["default"]:Dj)(jj,Error);jj.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};
var Zqa=new jj(401,"unauthorized","Name or password is incorrect."),$qa=new jj(400,"bad_request","Missing JSON list of 'docs'"),ara=new jj(404,"not_found","missing"),bra=new jj(409,"conflict","Document update conflict"),cra=new jj(400,"bad_request","_id field must contain a string"),dra=new jj(412,"missing_id","_id is required for puts"),era=new jj(400,"bad_request","Only reserved document ids may start with underscore."),fra=new jj(412,"precondition_failed","Database not open"),U$=new jj(500,"unknown_error",
"Database encountered an unknown error"),gra=new jj(500,"badarg","Some query argument is invalid"),hra=new jj(400,"invalid_request","Request was invalid"),ira=new jj(400,"query_parse_error","Some query parameter is invalid"),jra=new jj(500,"doc_validation","Bad special document member"),kra=new jj(400,"bad_request","Something wrong with the request"),lra=new jj(400,"bad_request","Document must be a JSON object"),mra=new jj(404,"not_found","Database not found"),nra=new jj(500,"indexed_db_went_bad",
"unknown"),ora=new jj(500,"web_sql_went_bad","unknown"),pra=new jj(500,"levelDB_went_went_bad","unknown"),qra=new jj(403,"forbidden","Forbidden by design doc validate_doc_update function"),rra=new jj(400,"bad_request","Invalid rev format"),sra=new jj(412,"file_exists","The database could not be created, the file already exists."),tra=new jj(412,"missing_stub","A pre-existing attachment stub wasn't found"),ura=new jj(413,"invalid_url","Provided URL is invalid");Vf.UNAUTHORIZED=Zqa;Vf.MISSING_BULK_DOCS=
$qa;Vf.MISSING_DOC=ara;Vf.REV_CONFLICT=bra;Vf.INVALID_ID=cra;Vf.MISSING_ID=dra;Vf.RESERVED_ID=era;Vf.NOT_OPEN=fra;Vf.UNKNOWN_ERROR=U$;Vf.BAD_ARG=gra;Vf.INVALID_REQUEST=hra;Vf.QUERY_PARSE_ERROR=ira;Vf.DOC_VALIDATION=jra;Vf.BAD_REQUEST=kra;Vf.NOT_AN_OBJECT=lra;Vf.DB_MISSING=mra;Vf.WSQ_ERROR=ora;Vf.LDB_ERROR=pra;Vf.FORBIDDEN=qra;Vf.INVALID_REV=rra;Vf.FILE_EXISTS=sra;Vf.MISSING_STUB=tra;Vf.IDB_ERROR=nra;Vf.INVALID_URL=ura;Vf.createError=function(f,l){function p(b){for(var d=Object.getOwnPropertyNames(f),
h=0,a=d.length;h<a;h++)"function"!==typeof f[d[h]]&&(this[d[h]]=f[d[h]]);void 0!==b&&(this.reason=b)}p.prototype=jj.prototype;return new p(l)};Vf.generateErrorFromResponse=function(f){if("object"!==typeof f){var l=f;f=U$;f.data=l}"error"in f&&"conflict"===f.error&&(f.name="conflict",f.status=409);"name"in f||(f.name=f.error||"unknown");"status"in f||(f.status=500);"message"in f||(f.message=f.message||f.reason);return f};for(var Op=[],uo=[],vra="undefined"!=typeof Uint8Array?Uint8Array:Array,Iy=0;64>
Iy;++Iy)Op[Iy]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[Iy],uo["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(Iy)]=Iy;uo[45]=62;uo[95]=63;var Yg={},iN={byteLength:function(f){f=VY(f);var l=f[1];return 3*(f[0]+l)/4-l},toByteArray:function(f){var l=VY(f);var p=l[0];l=l[1];var b=new vra(3*(p+l)/4-l),d=0,h=0<l?p-4:p;for(p=0;p<h;p+=4){var a=uo[f.charCodeAt(p)]<<18|uo[f.charCodeAt(p+1)]<<12|uo[f.charCodeAt(p+2)]<<6|uo[f.charCodeAt(p+3)];b[d++]=a>>
16&255;b[d++]=a>>8&255;b[d++]=255&a}2===l&&(a=uo[f.charCodeAt(p)]<<2|uo[f.charCodeAt(p+1)]>>4,b[d++]=255&a);1===l&&(a=uo[f.charCodeAt(p)]<<10|uo[f.charCodeAt(p+1)]<<4|uo[f.charCodeAt(p+2)]>>2,b[d++]=a>>8&255,b[d++]=255&a);return b},fromByteArray:function(f){for(var l,p=f.length,b=p%3,d=[],h=0,a=p-b;h<a;h+=16383)d.push(zga(f,h,h+16383>a?a:h+16383));1===b?(l=f[p-1],d.push(Op[l>>2]+Op[l<<4&63]+"==")):2===b&&(l=(f[p-2]<<8)+f[p-1],d.push(Op[l>>10]+Op[l>>4&63]+Op[l<<2&63]+"="));return d.join("")}},ux={read:function(f,
l,p,b,d){var h=8*d-b-1;var a=(1<<h)-1,e=a>>1,n=-7;d=p?d-1:0;var q=p?-1:1,r=f[l+d];d+=q;p=r&(1<<-n)-1;r>>=-n;for(n+=h;0<n;p=256*p+f[l+d],d+=q,n-=8);h=p&(1<<-n)-1;p>>=-n;for(n+=b;0<n;h=256*h+f[l+d],d+=q,n-=8);if(0===p)p=1-e;else{if(p===a)return h?NaN:1/0*(r?-1:1);h+=Math.pow(2,b);p-=e}return(r?-1:1)*h*Math.pow(2,p-b)},write:function(f,l,p,b,d,h){var a,e,n,q=8*h-d-1,r=(1<<q)-1,v=r>>1,y=23===d?Math.pow(2,-24)-Math.pow(2,-77):0;h=b?0:h-1;b=b?1:-1;var D=0>l||0===l&&0>1/l?1:0;l=Math.abs(l);for(isNaN(l)||
l===1/0?(e=isNaN(l)?1:0,a=r):(a=Math.floor(Math.log(l)/Math.LN2),1>l*(n=Math.pow(2,-a))&&(a--,n*=2),2<=(l+=1<=a+v?y/n:y*Math.pow(2,1-v))*n&&(a++,n/=2),a+v>=r?(e=0,a=r):1<=a+v?(e=(l*n-1)*Math.pow(2,d),a+=v):(e=l*Math.pow(2,v-1)*Math.pow(2,d),a=0));8<=d;f[p+h]=255&e,h+=b,e/=256,d-=8);a=a<<d|e;for(q+=d;0<q;f[p+h]=255&a,h+=b,a/=256,q-=8);f[p+h-b]|=128*D}},V$="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Yg.Buffer=te;Yg.SlowBuffer=function(f){+f!=
f&&(f=0);return te.alloc(+f)};Yg.INSPECT_MAX_BYTES=50;Yg.kMaxLength=2147483647;te.TYPED_ARRAY_SUPPORT=function(){try{var f=new Uint8Array(1),l={foo:function(){return 42}};return Object.setPrototypeOf(l,Uint8Array.prototype),Object.setPrototypeOf(f,l),42===f.foo()}catch(p){return!1}}();te.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(te.prototype,"parent",{enumerable:!0,get:function(){if(te.isBuffer(this))return this.buffer}});Object.defineProperty(te.prototype,"offset",{enumerable:!0,get:function(){if(te.isBuffer(this))return this.byteOffset}});te.poolSize=8192;te.from=function(f,l,p){return WY(f,l,p)};Object.setPrototypeOf(te.prototype,Uint8Array.prototype);Object.setPrototypeOf(te,Uint8Array);te.alloc=function(f,l,p){return YY(f),0>=f?Wq(f):void 0!==l?"string"==typeof p?Wq(f).fill(l,p):Wq(f).fill(l):Wq(f)};
te.allocUnsafe=function(f){return eN(f)};te.allocUnsafeSlow=function(f){return eN(f)};te.isBuffer=function(f){return null!=f&&!0===f._isBuffer&&f!==te.prototype};te.compare=function(f,l){if(Xq(f,Uint8Array)&&(f=te.from(f,f.offset,f.byteLength)),Xq(l,Uint8Array)&&(l=te.from(l,l.offset,l.byteLength)),!te.isBuffer(f)||!te.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===l)return 0;for(var p=f.length,b=l.length,d=0,h=Math.min(p,b);d<h;++d)if(f[d]!==
l[d]){p=f[d];b=l[d];break}return p<b?-1:b<p?1:0};te.isEncoding=function(f){switch(String(f).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};te.concat=function(f,l){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(0===f.length)return te.alloc(0);var p;if(void 0===l)for(p=l=0;p<f.length;++p)l+=f[p].length;l=te.allocUnsafe(l);
var b=0;for(p=0;p<f.length;++p){var d=f[p];if(Xq(d,Uint8Array)&&(d=te.from(d)),!te.isBuffer(d))throw new TypeError('"list" argument must be an Array of Buffers');d.copy(l,b);b+=d.length}return l};te.byteLength=XY;te.prototype._isBuffer=!0;te.prototype.swap16=function(){var f=this.length;if(0!=f%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var l=0;l<f;l+=2)wu(this,l,l+1);return this};te.prototype.swap32=function(){var f=this.length;if(0!=f%4)throw new RangeError("Buffer size must be a multiple of 32-bits");
for(var l=0;l<f;l+=4)wu(this,l,l+3),wu(this,l+1,l+2);return this};te.prototype.swap64=function(){var f=this.length;if(0!=f%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var l=0;l<f;l+=8)wu(this,l,l+7),wu(this,l+1,l+6),wu(this,l+2,l+5),wu(this,l+3,l+4);return this};te.prototype.toString=function(){var f=this.length;return 0===f?"":0===arguments.length?$Y(this,0,f):Bga.apply(this,arguments)};te.prototype.toLocaleString=te.prototype.toString;te.prototype.equals=function(f){if(!te.isBuffer(f))throw new TypeError("Argument must be a Buffer");
return this===f||0===te.compare(this,f)};te.prototype.inspect=function(){var f="",l=Yg.INSPECT_MAX_BYTES;return f=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(f+=" ... "),"<Buffer "+f+">"};V$&&(te.prototype[V$]=te.prototype.inspect);te.prototype.compare=function(f,l,p,b,d){if(Xq(f,Uint8Array)&&(f=te.from(f,f.offset,f.byteLength)),!te.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(void 0===l&&
(l=0),void 0===p&&(p=f?f.length:0),void 0===b&&(b=0),void 0===d&&(d=this.length),0>l||p>f.length||0>b||d>this.length)throw new RangeError("out of range index");if(b>=d&&l>=p)return 0;if(b>=d)return-1;if(l>=p)return 1;if(this===f)return 0;var h=(d>>>=0)-(b>>>=0),a=(p>>>=0)-(l>>>=0),e=Math.min(h,a);b=this.slice(b,d);f=f.slice(l,p);for(l=0;l<e;++l)if(b[l]!==f[l]){h=b[l];a=f[l];break}return h<a?-1:a<h?1:0};te.prototype.includes=function(f,l,p){return-1!==this.indexOf(f,l,p)};te.prototype.indexOf=function(f,
l,p){return aZ(this,f,l,p,!0)};te.prototype.lastIndexOf=function(f,l,p){return aZ(this,f,l,p,!1)};te.prototype.write=function(f,l,p,b){if(void 0===l)b="utf8",p=this.length,l=0;else if(void 0===p&&"string"==typeof l)b=l,p=this.length,l=0;else{if(!isFinite(l))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");l>>>=0;isFinite(p)?(p>>>=0,void 0===b&&(b="utf8")):(b=p,p=void 0)}var d=this.length-l;if((void 0===p||p>d)&&(p=d),0<f.length&&(0>p||0>l)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");
b||(b="utf8");for(d=!1;;)switch(b){case "hex":a:{l=Number(l)||0;b=this.length-l;p?(p=Number(p))>b&&(p=b):p=b;b=f.length;p>b/2&&(p=b/2);for(b=0;b<p;++b){d=parseInt(f.substr(2*b,2),16);if(d!=d){p=b;break a}this[l+b]=d}p=b}return p;case "utf8":case "utf-8":return mF(hN(f,this.length-l),this,l,p);case "ascii":return cZ(this,f,l,p);case "latin1":case "binary":return cZ(this,f,l,p);case "base64":return mF(ZY(f),this,l,p);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=p;d=this.length-l;for(var h=
[],a=0;a<f.length&&!(0>(d-=2));++a){var e=f.charCodeAt(a);p=e>>8;e%=256;h.push(e);h.push(p)}return mF(h,this,l,b);default:if(d)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase();d=!0}};te.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};te.prototype.slice=function(f,l){var p=this.length;0>(f=~~f)?0>(f+=p)&&(f=0):f>p&&(f=p);0>(l=void 0===l?p:~~l)?0>(l+=p)&&(l=0):l>p&&(l=p);l<f&&(l=f);f=this.subarray(f,l);return Object.setPrototypeOf(f,
te.prototype),f};te.prototype.readUIntLE=function(f,l,p){f>>>=0;l>>>=0;p||el(f,l,this.length);p=this[f];for(var b=1,d=0;++d<l&&(b*=256);)p+=this[f+d]*b;return p};te.prototype.readUIntBE=function(f,l,p){f>>>=0;l>>>=0;p||el(f,l,this.length);p=this[f+--l];for(var b=1;0<l&&(b*=256);)p+=this[f+--l]*b;return p};te.prototype.readUInt8=function(f,l){return f>>>=0,l||el(f,1,this.length),this[f]};te.prototype.readUInt16LE=function(f,l){return f>>>=0,l||el(f,2,this.length),this[f]|this[f+1]<<8};te.prototype.readUInt16BE=
function(f,l){return f>>>=0,l||el(f,2,this.length),this[f]<<8|this[f+1]};te.prototype.readUInt32LE=function(f,l){return f>>>=0,l||el(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+16777216*this[f+3]};te.prototype.readUInt32BE=function(f,l){return f>>>=0,l||el(f,4,this.length),16777216*this[f]+(this[f+1]<<16|this[f+2]<<8|this[f+3])};te.prototype.readIntLE=function(f,l,p){f>>>=0;l>>>=0;p||el(f,l,this.length);p=this[f];for(var b=1,d=0;++d<l&&(b*=256);)p+=this[f+d]*b;return p>=128*b&&(p-=Math.pow(2,
8*l)),p};te.prototype.readIntBE=function(f,l,p){f>>>=0;l>>>=0;p||el(f,l,this.length);p=l;for(var b=1,d=this[f+--p];0<p&&(b*=256);)d+=this[f+--p]*b;return d>=128*b&&(d-=Math.pow(2,8*l)),d};te.prototype.readInt8=function(f,l){return f>>>=0,l||el(f,1,this.length),128&this[f]?-1*(255-this[f]+1):this[f]};te.prototype.readInt16LE=function(f,l){f>>>=0;l||el(f,2,this.length);f=this[f]|this[f+1]<<8;return 32768&f?4294901760|f:f};te.prototype.readInt16BE=function(f,l){f>>>=0;l||el(f,2,this.length);f=this[f+
1]|this[f]<<8;return 32768&f?4294901760|f:f};te.prototype.readInt32LE=function(f,l){return f>>>=0,l||el(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24};te.prototype.readInt32BE=function(f,l){return f>>>=0,l||el(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]};te.prototype.readFloatLE=function(f,l){return f>>>=0,l||el(f,4,this.length),ux.read(this,f,!0,23,4)};te.prototype.readFloatBE=function(f,l){return f>>>=0,l||el(f,4,this.length),ux.read(this,f,!1,23,4)};te.prototype.readDoubleLE=
function(f,l){return f>>>=0,l||el(f,8,this.length),ux.read(this,f,!0,52,8)};te.prototype.readDoubleBE=function(f,l){return f>>>=0,l||el(f,8,this.length),ux.read(this,f,!1,52,8)};te.prototype.writeUIntLE=function(f,l,p,b){(f=+f,l>>>=0,p>>>=0,b)||Gm(this,f,l,p,Math.pow(2,8*p)-1,0);b=1;var d=0;for(this[l]=255&f;++d<p&&(b*=256);)this[l+d]=f/b&255;return l+p};te.prototype.writeUIntBE=function(f,l,p,b){(f=+f,l>>>=0,p>>>=0,b)||Gm(this,f,l,p,Math.pow(2,8*p)-1,0);b=p-1;var d=1;for(this[l+b]=255&f;0<=--b&&
(d*=256);)this[l+b]=f/d&255;return l+p};te.prototype.writeUInt8=function(f,l,p){return f=+f,l>>>=0,p||Gm(this,f,l,1,255,0),this[l]=255&f,l+1};te.prototype.writeUInt16LE=function(f,l,p){return f=+f,l>>>=0,p||Gm(this,f,l,2,65535,0),this[l]=255&f,this[l+1]=f>>>8,l+2};te.prototype.writeUInt16BE=function(f,l,p){return f=+f,l>>>=0,p||Gm(this,f,l,2,65535,0),this[l]=f>>>8,this[l+1]=255&f,l+2};te.prototype.writeUInt32LE=function(f,l,p){return f=+f,l>>>=0,p||Gm(this,f,l,4,4294967295,0),this[l+3]=f>>>24,this[l+
2]=f>>>16,this[l+1]=f>>>8,this[l]=255&f,l+4};te.prototype.writeUInt32BE=function(f,l,p){return f=+f,l>>>=0,p||Gm(this,f,l,4,4294967295,0),this[l]=f>>>24,this[l+1]=f>>>16,this[l+2]=f>>>8,this[l+3]=255&f,l+4};te.prototype.writeIntLE=function(f,l,p,b){(f=+f,l>>>=0,b)||(b=Math.pow(2,8*p-1),Gm(this,f,l,p,b-1,-b));b=0;var d=1,h=0;for(this[l]=255&f;++b<p&&(d*=256);)0>f&&0===h&&0!==this[l+b-1]&&(h=1),this[l+b]=(f/d>>0)-h&255;return l+p};te.prototype.writeIntBE=function(f,l,p,b){(f=+f,l>>>=0,b)||(b=Math.pow(2,
8*p-1),Gm(this,f,l,p,b-1,-b));b=p-1;var d=1,h=0;for(this[l+b]=255&f;0<=--b&&(d*=256);)0>f&&0===h&&0!==this[l+b+1]&&(h=1),this[l+b]=(f/d>>0)-h&255;return l+p};te.prototype.writeInt8=function(f,l,p){return f=+f,l>>>=0,p||Gm(this,f,l,1,127,-128),0>f&&(f=255+f+1),this[l]=255&f,l+1};te.prototype.writeInt16LE=function(f,l,p){return f=+f,l>>>=0,p||Gm(this,f,l,2,32767,-32768),this[l]=255&f,this[l+1]=f>>>8,l+2};te.prototype.writeInt16BE=function(f,l,p){return f=+f,l>>>=0,p||Gm(this,f,l,2,32767,-32768),this[l]=
f>>>8,this[l+1]=255&f,l+2};te.prototype.writeInt32LE=function(f,l,p){return f=+f,l>>>=0,p||Gm(this,f,l,4,2147483647,-2147483648),this[l]=255&f,this[l+1]=f>>>8,this[l+2]=f>>>16,this[l+3]=f>>>24,l+4};te.prototype.writeInt32BE=function(f,l,p){return f=+f,l>>>=0,p||Gm(this,f,l,4,2147483647,-2147483648),0>f&&(f=4294967295+f+1),this[l]=f>>>24,this[l+1]=f>>>16,this[l+2]=f>>>8,this[l+3]=255&f,l+4};te.prototype.writeFloatLE=function(f,l,p){return eZ(this,f,l,!0,p)};te.prototype.writeFloatBE=function(f,l,p){return eZ(this,
f,l,!1,p)};te.prototype.writeDoubleLE=function(f,l,p){return fZ(this,f,l,!0,p)};te.prototype.writeDoubleBE=function(f,l,p){return fZ(this,f,l,!1,p)};te.prototype.copy=function(f,l,p,b){if(!te.isBuffer(f))throw new TypeError("argument should be a Buffer");if((p||(p=0),b||0===b||(b=this.length),l>=f.length&&(l=f.length),l||(l=0),0<b&&b<p&&(b=p),b===p)||0===f.length||0===this.length)return 0;if(0>l)throw new RangeError("targetStart out of bounds");if(0>p||p>=this.length)throw new RangeError("Index out of range");
if(0>b)throw new RangeError("sourceEnd out of bounds");b>this.length&&(b=this.length);f.length-l<b-p&&(b=f.length-l+p);var d=b-p;if(this===f&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(l,p,b);else if(this===f&&p<l&&l<b)for(b=d-1;0<=b;--b)f[b+l]=this[b+p];else Uint8Array.prototype.set.call(f,this.subarray(p,b),l);return d};te.prototype.fill=function(f,l,p,b){if("string"==typeof f){if("string"==typeof l?(b=l,l=0,p=this.length):"string"==typeof p&&(b=p,p=this.length),void 0!==
b&&"string"!=typeof b)throw new TypeError("encoding must be a string");if("string"==typeof b&&!te.isEncoding(b))throw new TypeError("Unknown encoding: "+b);if(1===f.length){var d=f.charCodeAt(0);("utf8"===b&&128>d||"latin1"===b)&&(f=d)}}else"number"==typeof f?f&=255:"boolean"==typeof f&&(f=Number(f));if(0>l||this.length<l||this.length<p)throw new RangeError("Out of range index");if(p<=l)return this;if(l>>>=0,p=void 0===p?this.length:p>>>0,f||(f=0),"number"==typeof f)for(b=l;b<p;++b)this[b]=f;else{d=
te.isBuffer(f)?f:te.from(f,b);var h=d.length;if(0===h)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(b=0;b<p-l;++b)this[b+l]=d[b%h]}return this};var Dga=/[^+/0-9A-Za-z-_]/g,Cga=function(){for(var f=Array(256),l=0;16>l;++l)for(var p=16*l,b=0;16>b;++b)f[p+b]="0123456789abcdef"[l]+"0123456789abcdef"[b];return f}(),zJ={},AJ=Yg,Pp=AJ.Buffer;Pp.from&&Pp.alloc&&Pp.allocUnsafe&&Pp.allocUnsafeSlow?zJ=AJ:(gZ(AJ,zJ),zJ.Buffer=xu);xu.prototype=Object.create(Pp.prototype);gZ(Pp,xu);
xu.from=function(f,l,p){if("number"==typeof f)throw new TypeError("Argument must not be a number");return Pp(f,l,p)};xu.alloc=function(f,l,p){if("number"!=typeof f)throw new TypeError("Argument must be a number");f=Pp(f);return void 0!==l?"string"==typeof p?f.fill(l,p):f.fill(l):f.fill(0),f};xu.allocUnsafe=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return Pp(f)};xu.allocUnsafeSlow=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");
return AJ.SlowBuffer(f)};var bi=zJ,$q={},jN=bi.Buffer,hZ=jN.isEncoding||function(f){switch((f=""+f)&&f.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};$q.StringDecoder=tA;tA.prototype.write=function(f){if(0===f.length)return"";var l;if(this.lastNeed){if(void 0===(l=this.fillLast(f)))return"";var p=this.lastNeed;this.lastNeed=0}else p=0;return p<f.length?l?l+this.text(f,
p):this.text(f,p):l||""};tA.prototype.end=function(f){f=f&&f.length?this.write(f):"";return this.lastNeed?f+"\ufffd":f};tA.prototype.text=function(f,l){var p=f.length-1;if(p<l)p=0;else{var b=kN(f[p]);p=0<=b?(0<b&&(this.lastNeed=b-1),b):--p<l||-2===b?0:0<=(b=kN(f[p]))?(0<b&&(this.lastNeed=b-2),b):--p<l||-2===b?0:0<=(b=kN(f[p]))?(0<b&&(2===b?b=0:this.lastNeed=b-3),b):0}if(!this.lastNeed)return f.toString("utf8",l);this.lastTotal=p;b=f.length-(p-this.lastNeed);return f.copy(this.lastChar,0,b),f.toString("utf8",
l,b)};tA.prototype.fillLast=function(f){if(this.lastNeed<=f.length)return f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,f.length);this.lastNeed-=f.length};var W$,vx="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,lk=W$={};try{var ss="function"==typeof setTimeout?setTimeout:lN}catch(f){ss=lN}try{var ts="function"==typeof clearTimeout?clearTimeout:
mN}catch(f){ts=mN}!0;var yu,Yq=[],wx=!1,nF=-1;lk.nextTick=function(f){var l=Array(arguments.length-1);if(1<arguments.length)for(var p=1;p<arguments.length;p++)l[p-1]=arguments[p];Yq.push(new kZ(f,l));1!==Yq.length||wx||iZ(jZ)};kZ.prototype.run=function(){(this||vx).fun.apply(null,(this||vx).array)};lk.title="browser";lk.browser=!0;lk.env={};lk.argv=[];lk.version="";lk.versions={};lk.on=Zq;lk.addListener=Zq;lk.once=Zq;lk.off=Zq;lk.removeListener=Zq;lk.removeAllListeners=Zq;lk.emit=Zq;lk.prependListener=
Zq;lk.prependOnceListener=Zq;lk.listeners=function(f){return[]};lk.binding=function(f){throw Error("process.binding is not supported");};lk.cwd=function(){return"/"};lk.chdir=function(f){throw Error("process.chdir is not supported");};lk.umask=function(){return 0};var Jg=W$;Jg.addListener;Jg.argv;Jg.binding;Jg.browser;Jg.chdir;Jg.cwd;Jg.emit;Jg.env;Jg.listeners;Jg.nextTick;Jg.off;Jg.on;Jg.once;Jg.prependListener;Jg.prependOnceListener;Jg.removeAllListeners;Jg.removeListener;Jg.title;Jg.umask;Jg.version;
Jg.versions;var wra="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,lT=Object.prototype.toString,BJ=function(f){return!(wra&&f&&"object"==typeof f&&Symbol.toStringTag in f)&&"[object Arguments]"===lT.call(f)},X$=function(f){return!!BJ(f)||null!==f&&"object"==typeof f&&"number"==typeof f.length&&0<=f.length&&"[object Array]"!==lT.call(f)&&"[object Function]"===lT.call(f.callee)},xra=function(){return BJ(arguments)}();BJ.isLegacyArguments=X$;var yra=xra?BJ:X$,zra=Object.prototype.toString,
Ara=Function.prototype.toString,Bra=/^\s*(?:function)?\*/,Y$="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,Z$=Object.getPrototypeOf;a:if(Y$){try{var CJ=Function("return function*() {}")();break a}catch(f){}CJ=void 0}else CJ=!1;var Cra=CJ?Z$(CJ):{},hh="function"==typeof Object.create?function(f,l){l&&(f.super_=l,f.prototype=Object.create(l.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:function(f,l){if(l){f.super_=l;var p=function(){};p.prototype=l.prototype;
f.prototype=new p;f.prototype.constructor=f}},$$=function(f){return f&&"object"==typeof f&&"function"==typeof f.copy&&"function"==typeof f.fill&&"function"==typeof f.readUInt8},Vh={},Mga=$$,EZ="undefined"!=typeof BigInt,oN="undefined"!=typeof Symbol,cn=oN&&void 0!==Symbol.toStringTag,Hm="undefined"!=typeof Uint8Array,Dra="undefined"!=typeof ArrayBuffer;if(Hm&&cn)var Era=Object.getPrototypeOf(Uint8Array.prototype),Jn=zu(Object.getOwnPropertyDescriptor(Era,Symbol.toStringTag).get);var Nj=zu(Object.prototype.toString),
Nga=zu(Number.prototype.valueOf),Oga=zu(String.prototype.valueOf),Pga=zu(Boolean.prototype.valueOf);if(EZ)var Qga=zu(BigInt.prototype.valueOf);if(oN)var Rga=zu(Symbol.prototype.valueOf);Vh.isArgumentsObject=yra;Vh.isGeneratorFunction=function(f){return"function"==typeof f&&(!!Bra.test(Ara.call(f))||(Y$?Z$(f)===Cra:"[object GeneratorFunction]"===zra.call(f)))};Vh.isPromise=function(f){return"undefined"!=typeof Promise&&f instanceof Promise||null!==f&&"object"==typeof f&&"function"==typeof f.then&&
"function"==typeof f.catch};Vh.isArrayBufferView=function(f){return Dra&&ArrayBuffer.isView?ArrayBuffer.isView(f):lZ(f)||yZ(f)};Vh.isTypedArray=lZ;Vh.isUint8Array=mZ;Vh.isUint8ClampedArray=nZ;Vh.isUint16Array=oZ;Vh.isUint32Array=pZ;Vh.isInt8Array=qZ;Vh.isInt16Array=rZ;Vh.isInt32Array=sZ;Vh.isFloat32Array=tZ;Vh.isFloat64Array=uZ;Vh.isBigInt64Array=vZ;Vh.isBigUint64Array=wZ;oF.working="undefined"!=typeof Map&&oF(new Map);Vh.isMap=function(f){return"undefined"!=typeof Map&&(oF.working?oF(f):f instanceof
Map)};pF.working="undefined"!=typeof Set&&pF(new Set);Vh.isSet=function(f){return"undefined"!=typeof Set&&(pF.working?pF(f):f instanceof Set)};qF.working="undefined"!=typeof WeakMap&&qF(new WeakMap);Vh.isWeakMap=function(f){return"undefined"!=typeof WeakMap&&(qF.working?qF(f):f instanceof WeakMap)};nN.working="undefined"!=typeof WeakSet&&nN(new WeakSet);Vh.isWeakSet=function(f){return nN(f)};rF.working="undefined"!=typeof ArrayBuffer&&rF(new ArrayBuffer);Vh.isArrayBuffer=xZ;sF.working="undefined"!=
typeof ArrayBuffer&&"undefined"!=typeof DataView&&sF(new DataView(new ArrayBuffer(1),0,1));Vh.isDataView=yZ;tF.working="undefined"!=typeof SharedArrayBuffer&&tF(new SharedArrayBuffer);Vh.isSharedArrayBuffer=zZ;Vh.isAsyncFunction=function(f){return"[object AsyncFunction]"===Nj(f)};Vh.isMapIterator=function(f){return"[object Map Iterator]"===Nj(f)};Vh.isSetIterator=function(f){return"[object Set Iterator]"===Nj(f)};Vh.isGeneratorObject=function(f){return"[object Generator]"===Nj(f)};Vh.isWebAssemblyCompiledModule=
function(f){return"[object WebAssembly.Module]"===Nj(f)};Vh.isNumberObject=AZ;Vh.isStringObject=BZ;Vh.isBooleanObject=CZ;Vh.isBigIntObject=DZ;Vh.isSymbolObject=FZ;Vh.isBoxedPrimitive=function(f){return AZ(f)||BZ(f)||CZ(f)||DZ(f)||FZ(f)};Vh.isAnyArrayBuffer=function(f){return Hm&&(xZ(f)||zZ(f))};["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(f){Object.defineProperty(Vh,f,{enumerable:!1,value:function(){throw Error(f+" is not supported in userland");}})});var oC="undefined"!=typeof globalThis?
globalThis:"undefined"!=typeof self?self:global,Cg={},rq=Jg,aaa=Object.getOwnPropertyDescriptors||function(f){for(var l=Object.keys(f),p={},b=0;b<l.length;b++)p[l[b]]=Object.getOwnPropertyDescriptor(f,l[b]);return p},Fra=/%[sdj%]/g;Cg.format=function(f){if(!wF(f)){for(var l=[],p=0;p<arguments.length;p++)l.push(us(arguments[p]));return l.join(" ")}p=1;var b=arguments,d=b.length;l=String(f).replace(Fra,function(a){if("%%"===a)return"%";if(p>=d)return a;switch(a){case "%s":return String(b[p++]);case "%d":return Number(b[p++]);
case "%j":try{return JSON.stringify(b[p++])}catch(e){return"[Circular]"}default:return a}});for(var h=b[p];p<d;h=b[++p])null!==h&&xx(h)?l+=" "+us(h):l+=" "+h;return l};Cg.deprecate=function(f,l){if(void 0!==rq&&!0===rq.noDeprecation)return f;if(void 0===rq)return function(){return Cg.deprecate(f,l).apply(this||oC,arguments)};var p=!1;return function(){if(!p){if(rq.throwDeprecation)throw Error(l);rq.traceDeprecation?console.trace(l):console.error(l);p=!0}return f.apply(this||oC,arguments)}};var DJ=
{},baa=/^$/;if(rq.env.NODE_DEBUG){var mT=rq.env.NODE_DEBUG;mT=mT.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase();baa=new RegExp("^"+mT+"$","i")}Cg.debuglog=function(f){if(f=f.toUpperCase(),!DJ[f])if(baa.test(f)){var l=rq.pid;DJ[f]=function(){var p=Cg.format.apply(Cg,arguments);console.error("%s %d: %s",f,l,p)}}else DJ[f]=function(){};return DJ[f]};Cg.inspect=us;us.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],
black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};us.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};Cg.types=Vh;Cg.isArray=HZ;Cg.isBoolean=pN;Cg.isNull=function(f){return null===f};Cg.isNullOrUndefined=function(f){return null==f};Cg.isNumber=GZ;Cg.isString=wF;Cg.isSymbol=function(f){return"symbol"==typeof f};Cg.isUndefined=Au;Cg.isRegExp=wA;Cg.types.isRegExp=wA;Cg.isObject=
xx;Cg.isDate=xF;Cg.types.isDate=xF;Cg.isError=vA;Cg.types.isNativeError=vA;Cg.isFunction=vF;Cg.isPrimitive=function(f){return null===f||"boolean"==typeof f||"number"==typeof f||"string"==typeof f||"symbol"==typeof f||void 0===f};Cg.isBuffer=$$;var Vga="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");Cg.log=function(){console.log("%s - %s",Uga(),Cg.format.apply(Cg,arguments))};Cg.inherits=hh;Cg._extend=function(f,l){if(!l||!xx(l))return f;for(var p=Object.keys(l),b=p.length;b--;)f[p[b]]=
l[p[b]];return f};var tv="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;Cg.promisify=function(f){function l(){for(var p,b,d=new Promise(function(e,n){p=e;b=n}),h=[],a=0;a<arguments.length;a++)h.push(arguments[a]);h.push(function(e,n){e?b(e):p(n)});try{f.apply(this||oC,h)}catch(e){b(e)}return d}if("function"!=typeof f)throw new TypeError('The "original" argument must be of type Function');if(tv&&f[tv]){if("function"!=typeof(l=f[tv]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');
return Object.defineProperty(l,tv,{value:l,enumerable:!1,writable:!1,configurable:!0}),l}return Object.setPrototypeOf(l,Object.getPrototypeOf(f)),tv&&Object.defineProperty(l,tv,{value:l,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(l,aaa(f))};Cg.promisify.custom=tv;Cg.callbackify=function(f){function l(){for(var p=[],b=0;b<arguments.length;b++)p.push(arguments[b]);var d=p.pop();if("function"!=typeof d)throw new TypeError("The last argument must be of type Function");var h=this||
oC,a=function(){return d.apply(h,arguments)};f.apply(this||oC,p).then(function(e){rq.nextTick(a.bind(null,null,e))},function(e){rq.nextTick(Wga.bind(null,e,a))})}if("function"!=typeof f)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(l,Object.getPrototypeOf(f)),Object.defineProperties(l,aaa(f)),l};var JZ={},IZ=!1,MZ={},LZ=!1,OZ={},NZ=!1,RZ={},QZ=!1,tN={},SZ=!1,VZ={},UZ=!1,XZ={},WZ=!1,uN="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,wN={},YZ=!1,Zga="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,xN={},ZZ=!1,a_={},$Z=!1,c_={},b_=!1,e_={},d_=!1,zN={},f_=!1,bha="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,BN={},g_=!1,CN={},i_=!1,l_={},k_=!1,Im={},n_=!1,xA={},o_=!1,q_={},p_=!1,r_="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,u_={},t_=!1,w_={},v_=!1,y_={},x_=!1,A_={},z_=!1,Bj="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,C_={},B_=!1,Yi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,E_={},D_=!1,Zi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,H_={},G_=!1,Zg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,J_={},I_=!1,fl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,M_={},L_=!1,Fe="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,O_={},N_=!1,Hi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,P_=!1,GN={exports:{}},AF=Fl.EventEmitter,Qo={},Q_={};Kn("ERR_INVALID_OPT_VALUE",function(f,l){return'The value "'+l+'" is invalid for option "'+f+'"'},TypeError);Kn("ERR_INVALID_ARG_TYPE",function(f,l,p){var b;f=("string"==typeof l&&"not "===l.substr(0,4)?(b="must not be",l=l.replace(/^not /,"")):b="must be",function(d,h,a){return(void 0===a||a>d.length)&&(a=d.length),d.substring(a-h.length,
a)===h}(f," argument"))?"The "+f+" "+b+" "+R_(l,"type"):'The "'+f+'" '+(function(d,h,a){return"number"!=typeof a&&(a=0),!(a+h.length>d.length)&&-1!==d.indexOf(h,a)}(f,".")?"property":"argument")+" "+b+" "+R_(l,"type");return f+=". Received type "+typeof p,f},TypeError);Kn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Kn("ERR_METHOD_NOT_IMPLEMENTED",function(f){return"The "+f+" method is not implemented"});Kn("ERR_STREAM_PREMATURE_CLOSE","Premature close");Kn("ERR_STREAM_DESTROYED",function(f){return"Cannot call "+
f+" after a stream was destroyed"});Kn("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Kn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Kn("ERR_STREAM_WRITE_AFTER_END","write after end");Kn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Kn("ERR_UNKNOWN_ENCODING",function(f){return"Unknown encoding: "+f},TypeError);Kn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Qo.codes=Q_;var Z_=function(){throw Error("Readable.from is not available in the browser");
},IN="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,a0=function(f,l){if(HN("noDeprecation"))return f;var p=!1;return function(){if(!p){if(HN("throwDeprecation"))throw Error(l);HN("traceDeprecation")?console.trace(l):console.warn(l);p=!0}return f.apply(this||IN,arguments)}},EJ=Yg.Buffer,nT=Cg.inspect,Gra=nT&&nT.custom||"inspect",lha=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");!0;this.tail=this.head=null;this.length=
0}var l;return l=[{key:"push",value:function(p){p={data:p,next:null};0<this.length?this.tail.next=p:this.head=p;this.tail=p;++this.length}},{key:"unshift",value:function(p){p={data:p,next:this.head};0===this.length&&(this.tail=p);this.head=p;++this.length}},{key:"shift",value:function(){if(0!==this.length){var p=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,p}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",
value:function(p){if(0===this.length)return"";for(var b=this.head,d=""+b.data;b=b.next;)d+=p+b.data;return d}},{key:"concat",value:function(p){if(0===this.length)return EJ.alloc(0);for(var b,d,h=EJ.allocUnsafe(p>>>0),a=this.head,e=0;a;)p=a.data,b=h,d=e,void EJ.prototype.copy.call(p,b,d),e+=a.data.length,a=a.next;return h}},{key:"consume",value:function(p,b){var d;return p<this.head.data.length?(d=this.head.data.slice(0,p),this.head.data=this.head.data.slice(p)):d=p===this.head.data.length?this.shift():
b?this._getString(p):this._getBuffer(p),d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(p){var b=this.head,d=1,h=b.data;for(p-=h.length;b=b.next;){var a=b.data,e=p>a.length?a.length:p;if(e===a.length?h+=a:h+=a.slice(0,p),0==(p-=e)){e===a.length?(++d,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=a.slice(e));break}++d}return this.length-=d,h}},{key:"_getBuffer",value:function(p){var b=EJ.allocUnsafe(p),d=this.head,h=1;d.data.copy(b);
for(p-=d.data.length;d=d.next;){var a=d.data,e=p>a.length?a.length:p;if(a.copy(b,b.length-p,0,e),0==(p-=e)){e===a.length?(++h,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=a.slice(e));break}++h}return this.length-=h,b}},{key:Gra,value:function(p,b){return nT(this,function(d){for(var h=1;h<arguments.length;h++){var a=null!=arguments[h]?arguments[h]:{};h%2?S_(Object(a),!0).forEach(function(e){var n=a[e];e in d?Object.defineProperty(d,e,{value:n,enumerable:!0,configurable:!0,
writable:!0}):d[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(a)):S_(Object(a)).forEach(function(e){Object.defineProperty(d,e,Object.getOwnPropertyDescriptor(a,e))})}return d}({},b,{depth:0,customInspect:!1}))}}],gha(f.prototype,l),f}(),uv=Jg,X_={destroy:function(f,l){var p=this,b=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||b?(l?l(f):f&&(this._writableState?this._writableState.errorEmitted||
(this._writableState.errorEmitted=!0,uv.nextTick(JN,this,f)):uv.nextTick(JN,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(d){!l&&d?p._writableState?p._writableState.errorEmitted?uv.nextTick(zF,p):(p._writableState.errorEmitted=!0,uv.nextTick(T_,p,d)):uv.nextTick(T_,p,d):l?(uv.nextTick(zF,p),l(d)):uv.nextTick(zF,p)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=
!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(f,l){var p=f._readableState,b=f._writableState;p&&p.autoDestroy||b&&b.autoDestroy?f.destroy(l):f.emit("error",l)}},Hra=Qo.codes.ERR_INVALID_OPT_VALUE,
Y_={getHighWaterMark:function(f,l,p,b){l=null!=l.highWaterMark?l.highWaterMark:b?l[p]:null;if(null!=l){if(!isFinite(l)||Math.floor(l)!==l||0>l)throw new Hra(b?p:"highWaterMark",l);return Math.floor(l)}return f.objectMode?16:16384}},caa=Qo.codes.ERR_STREAM_PREMATURE_CLOSE,oT,U_=Jg,Ira=function d(l,p,b){if("function"==typeof p)return d(l,null,p);p||(p={});b=function(I){var K=!1;return function(){if(!K){K=!0;for(var P=arguments.length,N=Array(P),aa=0;aa<P;aa++)N[aa]=arguments[aa];I.apply(this,N)}}}(b||
hha);var h=p.readable||!1!==p.readable&&l.readable,a=p.writable||!1!==p.writable&&l.writable,e=function(){l.writable||q()},n=l._writableState&&l._writableState.finished,q=function(){a=!1;n=!0;h||b.call(l)},r=l._readableState&&l._readableState.endEmitted,v=function(){h=!1;r=!0;a||b.call(l)},y=function(I){b.call(l,I)},D=function(){var I;return h&&!r?(l._readableState&&l._readableState.ended||(I=new caa),b.call(l,I)):a&&!n?(l._writableState&&l._writableState.ended||(I=new caa),b.call(l,I)):void 0},E=
function(){l.req.on("finish",q)};return l.setHeader&&"function"==typeof l.abort?(l.on("complete",q),l.on("abort",D),l.req?E():l.on("request",E)):a&&!l._writableState&&(l.on("end",e),l.on("close",e)),l.on("end",v),l.on("finish",q),!1!==p.error&&l.on("error",y),l.on("close",D),function(){l.removeListener("complete",q);l.removeListener("abort",D);l.removeListener("request",E);l.req&&l.req.removeListener("finish",q);l.removeListener("end",e);l.removeListener("close",e);l.removeListener("finish",q);l.removeListener("end",
v);l.removeListener("error",y);l.removeListener("close",D)}},xs=Symbol("lastResolve"),Eu=Symbol("lastReject"),pC=Symbol("error"),FJ=Symbol("ended"),Du=Symbol("lastPromise"),pT=Symbol("handlePromise"),Cu=Symbol("stream"),Jra=Object.getPrototypeOf(function(){}),Kra=Object.setPrototypeOf((vs(oT={get stream(){return this[Cu]},next:function(){var l=this,p=this[pC];if(null!==p)return Promise.reject(p);if(this[FJ])return Promise.resolve(ws(void 0,!0));if(this[Cu].destroyed)return new Promise(function(b,
d){U_.nextTick(function(){l[pC]?d(l[pC]):b(ws(void 0,!0))})});if(p=this[Du])p=new Promise(function(b,d){return function(h,a){b.then(function(){if(d[FJ])return h(ws(void 0,!0)),void 0;d[pT](h,a)},a)}}(p,this));else{p=this[Cu].read();if(null!==p)return Promise.resolve(ws(p,!1));p=new Promise(this[pT])}return this[Du]=p,p}},Symbol.asyncIterator,function(){return this}),vs(oT,"return",function(){var l=this;return new Promise(function(p,b){l[Cu].destroy(null,function(d){if(d)return b(d),void 0;p(ws(void 0,
!0))})})}),oT),Jra),mha=function(l){var p,b=Object.create(Kra,(vs(p={},Cu,{value:l,writable:!0}),vs(p,xs,{value:null,writable:!0}),vs(p,Eu,{value:null,writable:!0}),vs(p,pC,{value:null,writable:!0}),vs(p,FJ,{value:l._readableState.endEmitted,writable:!0}),vs(p,pT,{value:function(d,h){var a=b[Cu].read();a?(b[Du]=null,b[xs]=null,b[Eu]=null,d(ws(a,!1))):(b[xs]=d,b[Eu]=h)},writable:!0}),p));return b[Du]=null,Ira(l,function(d){if(d&&"ERR_STREAM_PREMATURE_CLOSE"!==d.code){var h=b[Eu];return null!==h&&(b[Du]=
null,b[xs]=null,b[Eu]=null,h(d)),b[pC]=d,void 0}d=b[xs];null!==d&&(b[Du]=null,b[xs]=null,b[Eu]=null,d(ws(void 0,!0)));b[FJ]=!0}),l.on("readable",jha.bind(null,b)),b},KN={},W_=!1,kha="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,LN={},$_=!1,oha="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,MN={},b0=!1,Lra=V_(),daa=Qo.codes.ERR_STREAM_PREMATURE_CLOSE,SN=function h(p,b,d){if("function"==typeof b)return h(p,null,b);b||(b={});d=function(K){var P=
!1;return function(){if(!P){P=!0;for(var N=arguments.length,aa=Array(N),m=0;m<N;m++)aa[m]=arguments[m];K.apply(this,aa)}}}(d||pha);var a=b.readable||!1!==b.readable&&p.readable,e=b.writable||!1!==b.writable&&p.writable,n=function(){p.writable||r()},q=p._writableState&&p._writableState.finished,r=function(){e=!1;q=!0;a||d.call(p)},v=p._readableState&&p._readableState.endEmitted,y=function(){a=!1;v=!0;e||d.call(p)},D=function(K){d.call(p,K)},E=function(){var K;return a&&!v?(p._readableState&&p._readableState.ended||
(K=new daa),d.call(p,K)):e&&!q?(p._writableState&&p._writableState.ended||(K=new daa),d.call(p,K)):void 0},I=function(){p.req.on("finish",r)};return p.setHeader&&"function"==typeof p.abort?(p.on("complete",r),p.on("abort",E),p.req?I():p.on("request",I)):e&&!p._writableState&&(p.on("end",n),p.on("close",n)),p.on("end",y),p.on("finish",r),!1!==b.error&&p.on("error",D),p.on("close",E),function(){p.removeListener("complete",r);p.removeListener("abort",E);p.removeListener("request",I);p.req&&p.req.removeListener("finish",
r);p.removeListener("end",n);p.removeListener("close",n);p.removeListener("finish",r);p.removeListener("end",y);p.removeListener("error",D);p.removeListener("close",E)}},GJ=Yg.Buffer,qT=Cg.inspect,Mra=qT&&qT.custom||"inspect",vha=function(){function p(){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");!0;this.tail=this.head=null;this.length=0}var b;return b=[{key:"push",value:function(d){d={data:d,next:null};0<this.length?this.tail.next=d:this.head=d;this.tail=d;++this.length}},
{key:"unshift",value:function(d){d={data:d,next:this.head};0===this.length&&(this.tail=d);this.head=d;++this.length}},{key:"shift",value:function(){if(0!==this.length){var d=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,d}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(d){if(0===this.length)return"";for(var h=this.head,a=""+h.data;h=h.next;)a+=d+h.data;return a}},{key:"concat",value:function(d){if(0===
this.length)return GJ.alloc(0);for(var h,a,e=GJ.allocUnsafe(d>>>0),n=this.head,q=0;n;)d=n.data,h=e,a=q,void GJ.prototype.copy.call(d,h,a),q+=n.data.length,n=n.next;return e}},{key:"consume",value:function(d,h){var a;return d<this.head.data.length?(a=this.head.data.slice(0,d),this.head.data=this.head.data.slice(d)):a=d===this.head.data.length?this.shift():h?this._getString(d):this._getBuffer(d),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(d){var h=this.head,
a=1,e=h.data;for(d-=e.length;h=h.next;){var n=h.data,q=d>n.length?n.length:d;if(q===n.length?e+=n:e+=n.slice(0,d),0==(d-=q)){q===n.length?(++a,h.next?this.head=h.next:this.head=this.tail=null):(this.head=h,h.data=n.slice(q));break}++a}return this.length-=a,e}},{key:"_getBuffer",value:function(d){var h=GJ.allocUnsafe(d),a=this.head,e=1;a.data.copy(h);for(d-=a.data.length;a=a.next;){var n=a.data,q=d>n.length?n.length:d;if(n.copy(h,h.length-d,0,q),0==(d-=q)){q===n.length?(++e,a.next?this.head=a.next:
this.head=this.tail=null):(this.head=a,a.data=n.slice(q));break}++e}return this.length-=e,h}},{key:Mra,value:function(d,h){return qT(this,function(a){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c0(Object(n),!0).forEach(function(q){var r=n[q];q in a?Object.defineProperty(a,q,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[q]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):c0(Object(n)).forEach(function(q){Object.defineProperty(a,
q,Object.getOwnPropertyDescriptor(n,q))})}return a}({},h,{depth:0,customInspect:!1}))}}],qha(p.prototype,b),p}(),vv=Jg,g0={destroy:function(p,b){var d=this,h=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||h?(b?b(p):p&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,vv.nextTick(NN,this,p)):vv.nextTick(NN,this,p)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&
(this._writableState.destroyed=!0),this._destroy(p||null,function(a){!b&&a?d._writableState?d._writableState.errorEmitted?vv.nextTick(BF,d):(d._writableState.errorEmitted=!0,vv.nextTick(d0,d,a)):vv.nextTick(d0,d,a):b?(vv.nextTick(BF,d),b(a)):vv.nextTick(BF,d)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=
!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(p,b){var d=p._readableState,h=p._writableState;d&&d.autoDestroy||h&&h.autoDestroy?p.destroy(b):p.emit("error",b)}},Nra=Qo.codes.ERR_INVALID_OPT_VALUE,rT,h0={getHighWaterMark:function(p,b,d,h){b=null!=b.highWaterMark?b.highWaterMark:h?b[d]:null;if(null!=b){if(!isFinite(b)||Math.floor(b)!==b||0>b)throw new Nra(h?
d:"highWaterMark",b);return Math.floor(b)}return p.objectMode?16:16384}},e0=Jg,Ora=SN,As=Symbol("lastResolve"),Hu=Symbol("lastReject"),qC=Symbol("error"),HJ=Symbol("ended"),Gu=Symbol("lastPromise"),sT=Symbol("handlePromise"),Fu=Symbol("stream"),Pra=Object.getPrototypeOf(function(){}),Qra=Object.setPrototypeOf((ys(rT={get stream(){return this[Fu]},next:function(){var p=this,b=this[qC];if(null!==b)return Promise.reject(b);if(this[HJ])return Promise.resolve(zs(void 0,!0));if(this[Fu].destroyed)return new Promise(function(d,
h){e0.nextTick(function(){p[qC]?h(p[qC]):d(zs(void 0,!0))})});if(b=this[Gu])b=new Promise(function(d,h){return function(a,e){d.then(function(){if(h[HJ])return a(zs(void 0,!0)),void 0;h[sT](a,e)},e)}}(b,this));else{b=this[Fu].read();if(null!==b)return Promise.resolve(zs(b,!1));b=new Promise(this[sT])}return this[Gu]=b,b}},Symbol.asyncIterator,function(){return this}),ys(rT,"return",function(){var p=this;return new Promise(function(b,d){p[Fu].destroy(null,function(h){if(h)return d(h),void 0;b(zs(void 0,
!0))})})}),rT),Pra),wha=function(p){var b,d=Object.create(Qra,(ys(b={},Fu,{value:p,writable:!0}),ys(b,As,{value:null,writable:!0}),ys(b,Hu,{value:null,writable:!0}),ys(b,qC,{value:null,writable:!0}),ys(b,HJ,{value:p._readableState.endEmitted,writable:!0}),ys(b,sT,{value:function(h,a){var e=d[Fu].read();e?(d[Gu]=null,d[As]=null,d[Hu]=null,h(zs(e,!1))):(d[As]=h,d[Hu]=a)},writable:!0}),b));return d[Gu]=null,Ora(p,function(h){if(h&&"ERR_STREAM_PREMATURE_CLOSE"!==h.code){var a=d[Hu];return null!==a&&(d[Gu]=
null,d[As]=null,d[Hu]=null,a(h)),d[qC]=h,void 0}h=d[As];null!==h&&(d[Gu]=null,d[As]=null,d[Hu]=null,h(zs(void 0,!0)));d[HJ]=!0}),p.on("readable",sha.bind(null,d)),d},ON={},f0=!1,uha="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,PN={},j0=!1,xha="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,QN={},k0=!1,Rra=i0(),eaa=yA(),IJ=Qo.codes,Sra=IJ.ERR_METHOD_NOT_IMPLEMENTED,zha=IJ.ERR_MULTIPLE_CALLBACK,Cha=IJ.ERR_TRANSFORM_ALREADY_TRANSFORMING,
Bha=IJ.ERR_TRANSFORM_WITH_LENGTH_0,DF=eaa;hh(Qp,DF);Qp.prototype.push=function(p,b){return this._transformState.needTransform=!1,DF.prototype.push.call(this,p,b)};Qp.prototype._transform=function(p,b,d){d(new Sra("_transform()"))};Qp.prototype._write=function(p,b,d){var h=this._transformState;(h.writecb=d,h.writechunk=p,h.writeencoding=b,h.transforming)||(p=this._readableState,(h.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark))};Qp.prototype._read=function(p){p=
this._transformState;null===p.writechunk||p.transforming?p.needTransform=!0:(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform))};Qp.prototype._destroy=function(p,b){DF.prototype._destroy.call(this,p,function(d){b(d)})};var m0=Qp;hh(zA,m0);zA.prototype._transform=function(p,b,d){d(null,p)};var RN,faa=Qo.codes,Tra=faa.ERR_MISSING_ARGS,Eha=faa.ERR_STREAM_DESTROYED,UN="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,TN=Fl.EventEmitter;hh(Ln,
TN);Ln.Readable=Lra;Ln.Writable=Rra;Ln.Duplex=eaa;Ln.Transform=Qp;Ln.PassThrough=zA;Ln.finished=SN;Ln.pipeline=function(){for(var p=arguments.length,b=Array(p),d=0;d<p;d++)b[d]=arguments[d];var h,a=b.length?"function"!=typeof b[b.length-1]?n0:b.pop():n0;if(Array.isArray(b[0])&&(b=b[0]),2>b.length)throw new Tra("streams");var e=b.map(function(n,q){var r=q<b.length-1;return Dha(n,r,0<q,function(v){h||(h=v);v&&e.forEach(o0);r||(e.forEach(o0),a(h))})});return b.reduce(Fha)};Ln.Stream=Ln;Ln.prototype.pipe=
function(p,b){function d(y){p.writable&&!1===p.write(y)&&r.pause&&r.pause()}function h(){r.readable&&r.resume&&r.resume()}function a(){v||(v=!0,p.end())}function e(){v||(v=!0,"function"==typeof p.destroy&&p.destroy())}function n(y){if(q(),0===TN.listenerCount(this||UN,"error"))throw y;}function q(){r.removeListener("data",d);p.removeListener("drain",h);r.removeListener("end",a);r.removeListener("close",e);r.removeListener("error",n);p.removeListener("error",n);r.removeListener("end",q);r.removeListener("close",
q);p.removeListener("close",q)}var r=this||UN;r.on("data",d);p.on("drain",h);p._isStdio||b&&!1===b.end||(r.on("end",a),r.on("close",e));var v=!1;return r.on("error",n),p.on("error",n),r.on("end",q),r.on("close",q),p.on("close",q),p.emit("pipe",r),p};var Mn=Ln;Mn.Readable;Mn.Writable;Mn.Duplex;Mn.Transform;Mn.PassThrough;Mn.finished;Mn.pipeline;Mn.Stream;var q0={},p0=!1,Vj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,s0={},r0=!1,u0={},t0=!1,x0={},w0=!1,A0={},z0=
!1,S4={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",
hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",
hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",
hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}},gaa={},haa=!1,D0={},C0=!1,G0={},F0=!1,EF="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,J0={},I0=!1,M0={},L0=!1,Ro="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,O0={},N0=!1,dn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,FF={},Q0=!1,en={},S0=!1,VN={},T0=!1,XN={},U0=!1,YN={},W0=!1,ZN={},X0=!1,$N={},Y0=!1,Bx={},$0=!1,aO={},Z0=!1,GF="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,HF={},a1=!1,c1={},b1=!1,IF={},d1=!1,bO={},e1=!1,cO={},f1=!1,dO={},g1=!1,eO={},h1=!1,k1={},j1=
!1,fO={},m1=!1,p1={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,
iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},
"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",
key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},o1={},n1=!1,hO={},q1=!1,Nn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,s1={},r1=!1,Gl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:
global,v1={},u1=!1,Rg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,y1={},x1=!1,So="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,A1={},z1=!1,LF={},B1=!1,kj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,MF={},C1=!1,Ii="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,On={},D1=!1,ar={},F1=!1,Pn={},E1=!1,I1={},H1=!1,jO={exports:I1},ib="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,K1={},J1=!1,kO={exports:K1},jb="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,JJ="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Nu={},Jy=function(p){if(Object.keys)return Object.keys(p);var b=[],d;for(d in p)b.push(d);return b},wv=function(p,b){if(p.forEach)return p.forEach(b);for(var d=0;d<p.length;d++)b(p[d],d,p)},Ura=function(){try{return Object.defineProperty({},"_",{}),function(p,
b,d){Object.defineProperty(p,b,{writable:!0,enumerable:!1,configurable:!0,value:d})}}catch(p){return function(b,d,h){b[d]=h}}}(),iaa="Array Boolean Date Error EvalError Function Infinity JSON Math NaN Number Object RangeError ReferenceError RegExp String SyntaxError TypeError URIError decodeURI decodeURIComponent encodeURI encodeURIComponent escape eval isFinite isNaN parseFloat parseInt undefined unescape".split(" ");NF.prototype={};var sq=Nu.Script=function(p){if(!((this||JJ)instanceof sq))return new sq(p);
(this||JJ).code=p};sq.prototype.runInContext=function(p){if(!(p instanceof NF))throw new TypeError("needs a 'context' argument.");var b=document.createElement("iframe");b.style||(b.style={});b.style.display="none";document.body.appendChild(b);var d=b.contentWindow,h=d.eval,a=d.execScript;!h&&a&&(a.call(d,"null"),h=d.eval);wv(Jy(p),function(n){d[n]=p[n]});wv(iaa,function(n){p[n]&&(d[n]=p[n])});var e=Jy(d);h=h.call(d,(this||JJ).code);return wv(Jy(d),function(n){var q;if(!(q=n in p)){a:if(e.indexOf)q=
e.indexOf(n);else{for(q=0;q<e.length;q++)if(e[q]===n)break a;q=-1}q=-1===q}q&&(p[n]=d[n])}),wv(iaa,function(n){n in p||Ura(p,n,d[n])}),document.body.removeChild(b),h};sq.prototype.runInThisContext=function(){return eval((this||JJ).code)};sq.prototype.runInNewContext=function(p){var b=sq.createContext(p),d=this.runInContext(b);return p&&wv(Jy(b),function(h){p[h]=b[h]}),d};wv(Jy(sq.prototype),function(p){Nu[p]=sq[p]=function(b){var d=sq(b);return d[p].apply(d,[].slice.call(arguments,1))}});Nu.isContext=
function(p){return p instanceof NF};Nu.createScript=function(p){return Nu.Script(p)};Nu.createContext=sq.createContext=function(p){var b=new NF;return"object"==typeof p&&wv(Jy(p),function(d){b[d]=p[d]}),b};var jaa="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Vra=Jg,Wra=bi.Buffer,KJ=jaa.crypto||jaa.msCrypto,kt=KJ&&KJ.getRandomValues?function(p,b){if(4294967295<p)throw new RangeError("requested too many random bytes");var d=Wra.allocUnsafe(p);if(0<p)if(65536<p)for(var h=
0;h<p;h+=65536)KJ.getRandomValues(d.slice(h,h+65536));else KJ.getRandomValues(d);return"function"==typeof b?Vra.nextTick(function(){b(null,d)}):d}:function(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11");},OF=bi.Buffer,L1=Mn.Transform;hh(br,L1);br.prototype._transform=function(p,b,d){var h=null;try{this.update(p,b)}catch(a){h=a}d(h)};br.prototype._flush=function(p){var b=null;try{this.push(this.digest())}catch(d){b=d}p(b)};
br.prototype.update=function(p,b){var d=p;if(!OF.isBuffer(d)&&"string"!=typeof d)throw new TypeError("Data must be a string or a buffer");if(!0,this._finalized)throw Error("Digest already called");OF.isBuffer(p)||(p=OF.from(p,b));b=this._block;for(d=0;this._blockOffset+p.length-d>=this._blockSize;){for(var h=this._blockOffset;h<this._blockSize;)b[h++]=p[d++];this._update();this._blockOffset=0}for(;d<p.length;)b[this._blockOffset++]=p[d++];b=0;for(p=8*p.length;0<p;++b)this._length[b]+=p,0<(p=this._length[b]/
4294967296|0)&&(this._length[b]-=4294967296*p);return this};br.prototype._update=function(){throw Error("_update is not implemented");};br.prototype.digest=function(p){if(this._finalized)throw Error("Digest already called");this._finalized=!0;var b=this._digest();void 0!==p&&(b=b.toString(p));this._block.fill(0);for(p=this._blockOffset=0;4>p;++p)this._length[p]=0;return b};br.prototype._digest=function(){throw Error("_digest is not implemented");};var M1=br,Xra=bi.Buffer,yf=Array(16);hh(Cx,M1);Cx.prototype._update=
function(){for(var p=0;16>p;++p)yf[p]=this._block.readInt32LE(4*p);p=this._a;var b=this._b,d=this._c,h=this._d;p=Ul(p,b,d,h,yf[0],3614090360,7);h=Ul(h,p,b,d,yf[1],3905402710,12);d=Ul(d,h,p,b,yf[2],606105819,17);b=Ul(b,d,h,p,yf[3],3250441966,22);p=Ul(p,b,d,h,yf[4],4118548399,7);h=Ul(h,p,b,d,yf[5],1200080426,12);d=Ul(d,h,p,b,yf[6],2821735955,17);b=Ul(b,d,h,p,yf[7],4249261313,22);p=Ul(p,b,d,h,yf[8],1770035416,7);h=Ul(h,p,b,d,yf[9],2336552879,12);d=Ul(d,h,p,b,yf[10],4294925233,17);b=Ul(b,d,h,p,yf[11],
2304563134,22);p=Ul(p,b,d,h,yf[12],1804603682,7);h=Ul(h,p,b,d,yf[13],4254626195,12);d=Ul(d,h,p,b,yf[14],2792965006,17);p=Vl(p,b=Ul(b,d,h,p,yf[15],1236535329,22),d,h,yf[1],4129170786,5);h=Vl(h,p,b,d,yf[6],3225465664,9);d=Vl(d,h,p,b,yf[11],643717713,14);b=Vl(b,d,h,p,yf[0],3921069994,20);p=Vl(p,b,d,h,yf[5],3593408605,5);h=Vl(h,p,b,d,yf[10],38016083,9);d=Vl(d,h,p,b,yf[15],3634488961,14);b=Vl(b,d,h,p,yf[4],3889429448,20);p=Vl(p,b,d,h,yf[9],568446438,5);h=Vl(h,p,b,d,yf[14],3275163606,9);d=Vl(d,h,p,b,yf[3],
4107603335,14);b=Vl(b,d,h,p,yf[8],1163531501,20);p=Vl(p,b,d,h,yf[13],2850285829,5);h=Vl(h,p,b,d,yf[2],4243563512,9);d=Vl(d,h,p,b,yf[7],1735328473,14);p=Wl(p,b=Vl(b,d,h,p,yf[12],2368359562,20),d,h,yf[5],4294588738,4);h=Wl(h,p,b,d,yf[8],2272392833,11);d=Wl(d,h,p,b,yf[11],1839030562,16);b=Wl(b,d,h,p,yf[14],4259657740,23);p=Wl(p,b,d,h,yf[1],2763975236,4);h=Wl(h,p,b,d,yf[4],1272893353,11);d=Wl(d,h,p,b,yf[7],4139469664,16);b=Wl(b,d,h,p,yf[10],3200236656,23);p=Wl(p,b,d,h,yf[13],681279174,4);h=Wl(h,p,b,d,
yf[0],3936430074,11);d=Wl(d,h,p,b,yf[3],3572445317,16);b=Wl(b,d,h,p,yf[6],76029189,23);p=Wl(p,b,d,h,yf[9],3654602809,4);h=Wl(h,p,b,d,yf[12],3873151461,11);d=Wl(d,h,p,b,yf[15],530742520,16);p=Xl(p,b=Wl(b,d,h,p,yf[2],3299628645,23),d,h,yf[0],4096336452,6);h=Xl(h,p,b,d,yf[7],1126891415,10);d=Xl(d,h,p,b,yf[14],2878612391,15);b=Xl(b,d,h,p,yf[5],4237533241,21);p=Xl(p,b,d,h,yf[12],1700485571,6);h=Xl(h,p,b,d,yf[3],2399980690,10);d=Xl(d,h,p,b,yf[10],4293915773,15);b=Xl(b,d,h,p,yf[1],2240044497,21);p=Xl(p,
b,d,h,yf[8],1873313359,6);h=Xl(h,p,b,d,yf[15],4264355552,10);d=Xl(d,h,p,b,yf[6],2734768916,15);b=Xl(b,d,h,p,yf[13],1309151649,21);p=Xl(p,b,d,h,yf[4],4149444226,6);h=Xl(h,p,b,d,yf[11],3174756917,10);d=Xl(d,h,p,b,yf[2],718787259,15);b=Xl(b,d,h,p,yf[9],3951481745,21);this._a=this._a+p|0;this._b=this._b+b|0;this._c=this._c+d|0;this._d=this._d+h|0};Cx.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=
0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var p=Xra.allocUnsafe(16);return p.writeInt32LE(this._a,0),p.writeInt32LE(this._b,4),p.writeInt32LE(this._c,8),p.writeInt32LE(this._d,12),p};var tT=Yg.Buffer,N1=br,pp=Array(16),rC=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,
14,1,3,8,11,6,15,13],sC=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],tC=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],uC=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,
11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],vC=[0,1518500249,1859775393,2400959708,2840853838],wC=[1352829926,1548603684,1836072691,2053994217,0];hh(Dx,N1);Dx.prototype._update=function(){for(var p=0;16>p;++p)pp[p]=this._block.readInt32LE(4*p);var b=0|this._a;p=0|this._b;for(var d=0|this._c,h=0|this._d,a=0|this._e,e=0|this._a,n=0|this._b,q=0|this._c,r=0|this._d,v=0|this._e,y=0;80>y;y+=1){if(16>y){var D=a;D=Qn(b+(p^d^h)+
pp[rC[y]]+vC[0]|0,tC[y])+D|0;b=v;var E=Qn(e+(n^(q|~r))+pp[sC[y]]+wC[0]|0,uC[y])+b|0}else 32>y?(D=a,D=Qn(b+(p&d|~p&h)+pp[rC[y]]+vC[1]|0,tC[y])+D|0,b=v,E=Qn(e+(n&r|q&~r)+pp[sC[y]]+wC[1]|0,uC[y])+b|0):48>y?(D=a,D=Qn(b+((p|~d)^h)+pp[rC[y]]+vC[2]|0,tC[y])+D|0,b=v,E=Qn(e+((n|~q)^r)+pp[sC[y]]+wC[2]|0,uC[y])+b|0):64>y?(D=a,D=Qn(b+(p&h|d&~h)+pp[rC[y]]+vC[3]|0,tC[y])+D|0,b=v,E=Qn(e+(n&q|~n&r)+pp[sC[y]]+wC[3]|0,uC[y])+b|0):(D=a,D=Qn(b+(p^(d|~h))+pp[rC[y]]+vC[4]|0,tC[y])+D|0,b=v,E=Qn(e+(n^q^r)+pp[sC[y]]+wC[4]|
0,uC[y])+b|0);b=a;a=h;h=Qn(d,10);d=p;p=D;e=v;v=r;r=Qn(q,10);q=n;n=E}d=this._b+d+r|0;this._b=this._c+h+v|0;this._c=this._d+a+e|0;this._d=this._e+b+n|0;this._e=this._a+p+q|0;this._a=d};Dx.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var p=
tT.alloc?tT.alloc(20):new tT(20);return p.writeInt32LE(this._a,0),p.writeInt32LE(this._b,4),p.writeInt32LE(this._c,8),p.writeInt32LE(this._d,12),p.writeInt32LE(this._e,16),p};var Cj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,O1=bi.Buffer;cr.prototype.update=function(p,b){"string"==typeof p&&(b=b||"utf8",p=O1.from(p,b));b=(this||Cj)._block;for(var d=(this||Cj)._blockSize,h=p.length,a=(this||Cj)._len,e=0;e<h;){for(var n=a%d,q=Math.min(h-e,d-n),r=0;r<q;r++)b[n+r]=
p[e+r];e+=q;0==(a+=q)%d&&this._update(b)}return(this||Cj)._len+=h,this||Cj};cr.prototype.digest=function(p){var b=(this||Cj)._len%(this||Cj)._blockSize;(this||Cj)._block[b]=128;(this||Cj)._block.fill(0,b+1);b>=(this||Cj)._finalSize&&(this._update((this||Cj)._block),(this||Cj)._block.fill(0));b=8*(this||Cj)._len;if(4294967295>=b)(this||Cj)._block.writeUInt32BE(b,(this||Cj)._blockSize-4);else{var d=(4294967295&b)>>>0;(this||Cj)._block.writeUInt32BE((b-d)/4294967296,(this||Cj)._blockSize-8);(this||Cj)._block.writeUInt32BE(d,
(this||Cj)._blockSize-4)}this._update((this||Cj)._block);b=this._hash();return p?b.toString(p):b};cr.prototype._update=function(){throw Error("_update must be implemented by subclass");};var $g="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,P1=cr,Yra=bi.Buffer,Zra=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,
604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Wha=Array(64);hh(Ex,
P1);Ex.prototype.init=function(){return(this||$g)._a=1779033703,(this||$g)._b=3144134277,(this||$g)._c=1013904242,(this||$g)._d=2773480762,(this||$g)._e=1359893119,(this||$g)._f=2600822924,(this||$g)._g=528734635,(this||$g)._h=1541459225,this||$g};Ex.prototype._update=function(p){for(var b,d=(this||$g)._w,h=0|(this||$g)._a,a=0|(this||$g)._b,e=0|(this||$g)._c,n=0|(this||$g)._d,q=0|(this||$g)._e,r=0|(this||$g)._f,v=0|(this||$g)._g,y=0|(this||$g)._h,D=0;16>D;++D)d[D]=p.readInt32BE(4*D);for(;64>D;++D){p=
D;var E=(((b=d[D-2])>>>17|b<<15)^(b>>>19|b<<13)^b>>>10)+d[D-7],I=d[D-15];d[p]=0|E+((I>>>7|I<<25)^(I>>>18|I<<14)^I>>>3)+d[D-16]}for(b=0;64>b;++b)D=y+((q>>>6|q<<26)^(q>>>11|q<<21)^(q>>>25|q<<7))+(v^q&(r^v))+Zra[b]+d[b]|0,p=((h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10))+(h&a|e&(h|a))|0,y=v,v=r,r=q,q=n+D|0,n=e,e=a,a=h,h=D+p|0;(this||$g)._a=h+(this||$g)._a|0;(this||$g)._b=a+(this||$g)._b|0;(this||$g)._c=e+(this||$g)._c|0;(this||$g)._d=n+(this||$g)._d|0;(this||$g)._e=q+(this||$g)._e|0;(this||$g)._f=r+(this||
$g)._f|0;(this||$g)._g=v+(this||$g)._g|0;(this||$g)._h=y+(this||$g)._h|0};Ex.prototype._hash=function(){var p=Yra.allocUnsafe(32);return p.writeInt32BE((this||$g)._a,0),p.writeInt32BE((this||$g)._b,4),p.writeInt32BE((this||$g)._c,8),p.writeInt32BE((this||$g)._d,12),p.writeInt32BE((this||$g)._e,16),p.writeInt32BE((this||$g)._f,20),p.writeInt32BE((this||$g)._g,24),p.writeInt32BE((this||$g)._h,28),p};var $i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Q1=cr,$ra=bi.Buffer,
asa=[1518500249,1859775393,-1894007588,-899497514],Xha=Array(80);hh(CA,Q1);CA.prototype.init=function(){return(this||$i)._a=1732584193,(this||$i)._b=4023233417,(this||$i)._c=2562383102,(this||$i)._d=271733878,(this||$i)._e=3285377520,this||$i};CA.prototype._update=function(p){for(var b,d=(this||$i)._w,h=0|(this||$i)._a,a=0|(this||$i)._b,e=0|(this||$i)._c,n=0|(this||$i)._d,q=0|(this||$i)._e,r=0;16>r;++r)d[r]=p.readInt32BE(4*r);for(;80>r;++r)d[r]=d[r-3]^d[r-8]^d[r-14]^d[r-16];for(p=0;80>p;++p)r=~~(p/
20),r=0|((b=h)<<5|b>>>27)+(0===r?a&e|~a&n:2===r?a&e|a&n|e&n:a^e^n)+q+d[p]+asa[r],q=n,n=e,e=a<<30|a>>>2,a=h,h=r;(this||$i)._a=h+(this||$i)._a|0;(this||$i)._b=a+(this||$i)._b|0;(this||$i)._c=e+(this||$i)._c|0;(this||$i)._d=n+(this||$i)._d|0;(this||$i)._e=q+(this||$i)._e|0};CA.prototype._hash=function(){var p=$ra.allocUnsafe(20);return p.writeInt32BE(0|(this||$i)._a,0),p.writeInt32BE(0|(this||$i)._b,4),p.writeInt32BE(0|(this||$i)._c,8),p.writeInt32BE(0|(this||$i)._d,12),p.writeInt32BE(0|(this||$i)._e,
16),p};var aj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,R1=cr,bsa=bi.Buffer,csa=[1518500249,1859775393,-1894007588,-899497514],Yha=Array(80);hh(DA,R1);DA.prototype.init=function(){return(this||aj)._a=1732584193,(this||aj)._b=4023233417,(this||aj)._c=2562383102,(this||aj)._d=271733878,(this||aj)._e=3285377520,this||aj};DA.prototype._update=function(p){for(var b,d=(this||aj)._w,h=0|(this||aj)._a,a=0|(this||aj)._b,e=0|(this||aj)._c,n=0|(this||aj)._d,q=0|(this||aj)._e,
r=0;16>r;++r)d[r]=p.readInt32BE(4*r);for(;80>r;++r)d[r]=(b=d[r-3]^d[r-8]^d[r-14]^d[r-16])<<1|b>>>31;for(p=0;80>p;++p)b=~~(p/20),b=(h<<5|h>>>27)+(0===b?a&e|~a&n:2===b?a&e|a&n|e&n:a^e^n)+q+d[p]+csa[b]|0,q=n,n=e,e=a<<30|a>>>2,a=h,h=b;(this||aj)._a=h+(this||aj)._a|0;(this||aj)._b=a+(this||aj)._b|0;(this||aj)._c=e+(this||aj)._c|0;(this||aj)._d=n+(this||aj)._d|0;(this||aj)._e=q+(this||aj)._e|0};DA.prototype._hash=function(){var p=bsa.allocUnsafe(20);return p.writeInt32BE(0|(this||aj)._a,0),p.writeInt32BE(0|
(this||aj)._b,4),p.writeInt32BE(0|(this||aj)._c,8),p.writeInt32BE(0|(this||aj)._d,12),p.writeInt32BE(0|(this||aj)._e,16),p};var gl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,$ha=cr,dsa=bi.Buffer,Zha=Array(64);hh(QF,Ex);QF.prototype.init=function(){return(this||gl)._a=3238371032,(this||gl)._b=914150663,(this||gl)._c=812702999,(this||gl)._d=4144912697,(this||gl)._e=4290775857,(this||gl)._f=1750603025,(this||gl)._g=1694076839,(this||gl)._h=3204075428,this||gl};QF.prototype._hash=
function(){var p=dsa.allocUnsafe(28);return p.writeInt32BE((this||gl)._a,0),p.writeInt32BE((this||gl)._b,4),p.writeInt32BE((this||gl)._c,8),p.writeInt32BE((this||gl)._d,12),p.writeInt32BE((this||gl)._e,16),p.writeInt32BE((this||gl)._f,20),p.writeInt32BE((this||gl)._g,24),p};var Ge="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,S1=cr,esa=bi.Buffer,kaa=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,
3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,
3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,
3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,
1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],aia=Array(160);hh(Fx,S1);Fx.prototype.init=function(){return(this||Ge)._ah=1779033703,(this||Ge)._bh=3144134277,(this||Ge)._ch=1013904242,(this||Ge)._dh=2773480762,(this||Ge)._eh=1359893119,(this||Ge)._fh=2600822924,(this||Ge)._gh=528734635,(this||Ge)._hh=1541459225,(this||Ge)._al=4089235720,(this||Ge)._bl=2227873595,(this||Ge)._cl=4271175723,(this||Ge)._dl=1595750129,(this||Ge)._el=2917565137,(this||Ge)._fl=725511199,
(this||Ge)._gl=4215389547,(this||Ge)._hl=327033209,this||Ge};Fx.prototype._update=function(p){for(var b=(this||Ge)._w,d=0|(this||Ge)._ah,h=0|(this||Ge)._bh,a=0|(this||Ge)._ch,e=0|(this||Ge)._dh,n=0|(this||Ge)._eh,q=0|(this||Ge)._fh,r=0|(this||Ge)._gh,v=0|(this||Ge)._hh,y=0|(this||Ge)._al,D=0|(this||Ge)._bl,E=0|(this||Ge)._cl,I=0|(this||Ge)._dl,K=0|(this||Ge)._el,P=0|(this||Ge)._fl,N=0|(this||Ge)._gl,aa=0|(this||Ge)._hl,m=0;32>m;m+=2)b[m]=p.readInt32BE(4*m),b[m+1]=p.readInt32BE(4*m+4);for(;160>m;m+=
2){p=b[m-30];var t=b[m-30+1],u=(p>>>1|t<<31)^(p>>>8|t<<24)^p>>>7,B=(t>>>1|p<<31)^(t>>>8|p<<24)^(t>>>7|p<<25);var A=p=b[m-4];var H=t=b[m-4+1];A=(A>>>19|H<<13)^(H>>>29|A<<3)^A>>>6;t=(t>>>19|p<<13)^(p>>>29|t<<3)^(t>>>6|p<<26);H=b[m-32];var F=b[m-32+1];p=B+b[m-14+1]|0;u=u+b[m-14]+hl(p,B)|0;u=(u=u+A+hl(p=p+t|0,t)|0)+H+hl(p=p+F|0,F)|0;b[m]=u;b[m+1]=p}for(m=0;160>m;m+=2){u=b[m];p=b[m+1];t=d&h|a&(d|h);var L=y&D|E&(y|D);H=(d>>>28|y<<4)^(y>>>2|d<<30)^(y>>>7|d<<25);F=(y>>>28|d<<4)^(d>>>2|y<<30)^(d>>>7|y<<25);
var U=kaa[m],T=kaa[m+1],Y=r^n&(q^r),wa=N^K&(P^N);B=aa+((K>>>14|n<<18)^(K>>>18|n<<14)^(n>>>9|K<<23))|0;A=v+((n>>>14|K<<18)^(n>>>18|K<<14)^(K>>>9|n<<23))+hl(B,aa)|0;A=(A=(A=A+Y+hl(B=B+wa|0,wa)|0)+U+hl(B=B+T|0,T)|0)+u+hl(B=B+p|0,p)|0;p=F+L|0;u=H+t+hl(p,F)|0;v=r;aa=N;r=q;N=P;q=n;P=K;n=e+A+hl(K=I+B|0,I)|0;e=a;I=E;a=h;E=D;h=d;D=y;d=A+u+hl(y=B+p|0,B)|0}(this||Ge)._al=(this||Ge)._al+y|0;(this||Ge)._bl=(this||Ge)._bl+D|0;(this||Ge)._cl=(this||Ge)._cl+E|0;(this||Ge)._dl=(this||Ge)._dl+I|0;(this||Ge)._el=(this||
Ge)._el+K|0;(this||Ge)._fl=(this||Ge)._fl+P|0;(this||Ge)._gl=(this||Ge)._gl+N|0;(this||Ge)._hl=(this||Ge)._hl+aa|0;(this||Ge)._ah=(this||Ge)._ah+d+hl((this||Ge)._al,y)|0;(this||Ge)._bh=(this||Ge)._bh+h+hl((this||Ge)._bl,D)|0;(this||Ge)._ch=(this||Ge)._ch+a+hl((this||Ge)._cl,E)|0;(this||Ge)._dh=(this||Ge)._dh+e+hl((this||Ge)._dl,I)|0;(this||Ge)._eh=(this||Ge)._eh+n+hl((this||Ge)._el,K)|0;(this||Ge)._fh=(this||Ge)._fh+q+hl((this||Ge)._fl,P)|0;(this||Ge)._gh=(this||Ge)._gh+r+hl((this||Ge)._gl,N)|0;(this||
Ge)._hh=(this||Ge)._hh+v+hl((this||Ge)._hl,aa)|0};Fx.prototype._hash=function(){function p(d,h,a){b.writeInt32BE(d,a);b.writeInt32BE(h,a+4)}var b=esa.allocUnsafe(64);return p((this||Ge)._ah,(this||Ge)._al,0),p((this||Ge)._bh,(this||Ge)._bl,8),p((this||Ge)._ch,(this||Ge)._cl,16),p((this||Ge)._dh,(this||Ge)._dl,24),p((this||Ge)._eh,(this||Ge)._el,32),p((this||Ge)._fh,(this||Ge)._fl,40),p((this||Ge)._gh,(this||Ge)._gl,48),p((this||Ge)._hh,(this||Ge)._hl,56),b};var Ji="undefined"!=typeof globalThis?globalThis:
"undefined"!=typeof self?self:global,cia=cr,fsa=bi.Buffer,bia=Array(160);hh(RF,Fx);RF.prototype.init=function(){return(this||Ji)._ah=3418070365,(this||Ji)._bh=1654270250,(this||Ji)._ch=2438529370,(this||Ji)._dh=355462360,(this||Ji)._eh=1731405415,(this||Ji)._fh=2394180231,(this||Ji)._gh=3675008525,(this||Ji)._hh=1203062813,(this||Ji)._al=3238371032,(this||Ji)._bl=914150663,(this||Ji)._cl=812702999,(this||Ji)._dl=4144912697,(this||Ji)._el=4290775857,(this||Ji)._fl=1750603025,(this||Ji)._gl=1694076839,
(this||Ji)._hl=3204075428,this||Ji};RF.prototype._hash=function(){function p(d,h,a){b.writeInt32BE(d,a);b.writeInt32BE(h,a+4)}var b=fsa.allocUnsafe(48);return p((this||Ji)._ah,(this||Ji)._al,0),p((this||Ji)._bh,(this||Ji)._bl,8),p((this||Ji)._ch,(this||Ji)._cl,16),p((this||Ji)._dh,(this||Ji)._dl,24),p((this||Ji)._eh,(this||Ji)._el,32),p((this||Ji)._fh,(this||Ji)._fl,40),b};var lt,laa=lt={};(lt=laa=function(p){p=p.toLowerCase();var b=lt[p];if(!b)throw Error(p+" is not supported (we accept pull requests)");
return new b}).sha=CA;lt.sha1=DA;lt.sha224=QF;lt.sha256=Ex;lt.sha384=RF;lt.sha512=Fx;var uT=laa,Wj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,maa=bi.Buffer,T1=Mn.Transform,gsa=$q.StringDecoder;hh(il,T1);il.prototype.update=function(p,b,d){"string"==typeof p&&(p=maa.from(p,b));p=this._update(p);return(this||Wj).hashMode?this||Wj:(d&&(p=this._toString(p,d)),p)};il.prototype.setAutoPadding=function(){};il.prototype.getAuthTag=function(){throw Error("trying to get auth tag in unsupported state");
};il.prototype.setAuthTag=function(){throw Error("trying to set auth tag in unsupported state");};il.prototype.setAAD=function(){throw Error("trying to set aad in unsupported state");};il.prototype._transform=function(p,b,d){try{(this||Wj).hashMode?this._update(p):this.push(this._update(p))}catch(a){var h=a}finally{d(h)}};il.prototype._flush=function(p){try{this.push(this.__final())}catch(d){var b=d}p(b)};il.prototype._finalOrDigest=function(p){var b=this.__final()||maa.alloc(0);return p&&(b=this._toString(b,
p,!0)),b};il.prototype._toString=function(p,b,d){if((this||Wj)._decoder||((this||Wj)._decoder=new gsa(b),(this||Wj)._encoding=b),(this||Wj)._encoding!==b)throw Error("can't switch encodings");p=(this||Wj)._decoder.write(p);return d&&(p+=(this||Wj)._decoder.end()),p};var U1=il;hh(SF,U1);SF.prototype._update=function(p){this._hash.update(p)};SF.prototype._final=function(){return this._hash.digest()};var xC=function(p){return"md5"===(p=p.toLowerCase())?new Cx:"rmd160"===p||"ripemd160"===p?new Dx:new SF(uT(p))},
naa=function(p){return(new Cx).update(p).digest()},hsa=hh,Iu=bi.Buffer,V1=il,dia=Iu.alloc(128);hsa(TF,V1);TF.prototype._update=function(p){this._hash.push(p)};TF.prototype._final=function(){var p=this._alg(Iu.concat(this._hash));return this._alg(Iu.concat([this._opad,p]))};var isa=hh,W1=il,FA=bi.Buffer,lO=Dx,mO=uT,eia=FA.alloc(128);isa(EA,W1);EA.prototype._update=function(p){this._hash.update(p)};EA.prototype._final=function(){var p=this._hash.digest();return("rmd160"===this._alg?new lO:mO(this._alg)).update(this._opad).update(p).digest()};
var oaa=function(p,b){return"rmd160"===(p=p.toLowerCase())||"ripemd160"===p?new EA("rmd160",b):"md5"===p?new TF(naa,b):new EA(p,b)},paa={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},
sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",
hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",
id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}},
fia=Yg.Buffer,jsa=Math.pow(2,30)-1,vT,qaa=function(p,b,d,h){if(X1(p,"Password"),X1(b,"Salt"),"number"!=typeof d)throw new TypeError("Iterations not a number");if(0>d)throw new TypeError("Bad iterations");if("number"!=typeof h)throw new TypeError("Key length not a number");if(0>h||h>jsa||h!=h)throw new TypeError("Bad key length");},raa=Jg;raa.browser?vT="utf-8":vT=6<=parseInt(raa.version.split(".")[0].slice(1),10)?"utf-8":"binary";var LJ=vT,Uo="undefined"!=typeof globalThis?globalThis:"undefined"!=
typeof self?self:global,iia=naa,hia=Dx,gia=uT,To=bi.Buffer,jia=To.alloc(128),UF={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};Y1.prototype.run=function(p,b){return p.copy(b,(this||Uo).blocksize),this.hash(b).copy((this||Uo).opad,(this||Uo).blocksize),this.hash((this||Uo).opad)};var wT,xT=function(p,b,d,h,a){qaa(p,b,d,h);To.isBuffer(p)||(p=To.from(p,LJ));To.isBuffer(b)||(b=To.from(b,LJ));p=new Y1(a=a||"sha1",p,b.length);var e=To.allocUnsafe(h),n=To.allocUnsafe(b.length+
4);b.copy(n,0,0,b.length);var q=0;a=UF[a];h=Math.ceil(h/a);for(var r=1;r<=h;r++){n.writeUInt32BE(r,b.length);for(var v=p.run(n,p.ipad1),y=v,D=1;D<d;D++){y=p.run(y,p.ipad2);for(var E=0;E<a;E++)v[E]^=y[E]}v.copy(e,q);q+=a}return e},yC="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,yT=Jg,Gx=bi.Buffer,GA=yC.crypto&&yC.crypto.subtle,ksa={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",
sha512:"SHA-512"},zT=[],MJ={pbkdf2:function(p,b,d,h,a,e){"function"==typeof a&&(e=a,a=void 0);var n=ksa[(a=a||"sha1").toLowerCase()];if(!n||"function"!=typeof yC.Promise)return yT.nextTick(function(){try{var q=xT(p,b,d,h,a)}catch(r){return e(r)}e(null,q)});if(qaa(p,b,d,h),"function"!=typeof e)throw Error("No callback provided to pbkdf2");Gx.isBuffer(p)||(p=Gx.from(p,LJ));Gx.isBuffer(b)||(b=Gx.from(b,LJ));(function(q,r){q.then(function(v){yT.nextTick(function(){r(null,v)})},function(v){yT.nextTick(function(){r(v)})})})(function(q){if(yC.process&&
!yC.process.browser||!GA||!GA.importKey||!GA.deriveBits)return Promise.resolve(!1);if(void 0!==zT[q])return zT[q];var r=Z1(wT=wT||Gx.alloc(8),wT,10,128,q).then(function(){return!0}).catch(function(){return!1});return zT[q]=r,r}(n).then(function(q){return q?Z1(p,b,d,h,n):xT(p,b,d,h,a)}),e)}};MJ.pbkdf2Sync=xT;$1.equal=function(p,b,d){if(p!=b)throw Error(d||"Assertion failed: "+p+" != "+b);};var $n=$1,Mj={readUInt32BE:function(p,b){return(p[0+b]<<24|p[1+b]<<16|p[2+b]<<8|p[3+b])>>>0},writeUInt32BE:function(p,
b,d){p[0+d]=b>>>24;p[1+d]=b>>>16&255;p[2+d]=b>>>8&255;p[3+d]=255&b},ip:function(p,b,d,h){for(var a=0,e=0,n=6;0<=n;n-=2){for(var q=0;24>=q;q+=8)a<<=1,a|=b>>>q+n&1;for(q=0;24>=q;q+=8)a<<=1,a|=p>>>q+n&1}for(n=6;0<=n;n-=2){for(q=1;25>=q;q+=8)e<<=1,e|=b>>>q+n&1;for(q=1;25>=q;q+=8)e<<=1,e|=p>>>q+n&1}d[h+0]=a>>>0;d[h+1]=e>>>0},rip:function(p,b,d,h){for(var a=0,e=0,n=0;4>n;n++)for(var q=24;0<=q;q-=8)a<<=1,a|=b>>>q+n&1,a<<=1,a|=p>>>q+n&1;for(n=4;8>n;n++)for(q=24;0<=q;q-=8)e<<=1,e|=b>>>q+n&1,e<<=1,e|=p>>>q+
n&1;d[h+0]=a>>>0;d[h+1]=e>>>0},pc1:function(p,b,d,h){for(var a=0,e=0,n=7;5<=n;n--){for(var q=0;24>=q;q+=8)a<<=1,a|=b>>q+n&1;for(q=0;24>=q;q+=8)a<<=1,a|=p>>q+n&1}for(q=0;24>=q;q+=8)a<<=1,a|=b>>q+n&1;for(n=1;3>=n;n++){for(q=0;24>=q;q+=8)e<<=1,e|=b>>q+n&1;for(q=0;24>=q;q+=8)e<<=1,e|=p>>q+n&1}for(q=0;24>=q;q+=8)e<<=1,e|=p>>q+n&1;d[h+0]=a>>>0;d[h+1]=e>>>0},r28shl:function(p,b){return p<<b&268435455|p>>>28-b}},NJ=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,
23,8,12,7,17,0,22,3,10,14,6,20,27,24];Mj.pc2=function(p,b,d,h){for(var a=0,e=0,n=NJ.length>>>1,q=0;q<n;q++)a<<=1,a|=p>>>NJ[q]&1;for(q=n;q<NJ.length;q++)e<<=1,e|=b>>>NJ[q]&1;d[h+0]=a>>>0;d[h+1]=e>>>0};Mj.expand=function(p,b,d){var h=0;var a=(1&p)<<5|p>>>27;for(var e=23;15<=e;e-=4)a<<=6,a|=p>>>e&63;for(e=11;3<=e;e-=4)h|=p>>>e&63,h<<=6;b[d+0]=a>>>0;b[d+1]=(h|(31&p)<<1|p>>>31)>>>0};var saa=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,
7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,
12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,
6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];Mj.substitute=function(p,b){for(var d=0,h=0;4>h;h++)d<<=4,d|=saa[64*h+(p>>>18-6*h&63)];for(h=0;4>h;h++)d<<=4,d|=saa[256+64*h+(b>>>18-6*h&63)];return d>>>0};var taa=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];Mj.permute=function(p){for(var b=0,d=0;d<taa.length;d++)b<<=1,b|=p>>>taa[d]&1;return b>>>0};Mj.padSplit=function(p,b,d){for(p=p.toString(2);p.length<
b;)p="0"+p;for(var h=[],a=0;a<b;a+=d)h.push(p.slice(a,a+d));return h.join(" ")};var lsa=$n;fn.prototype._init=function(){};fn.prototype.update=function(p){return 0===p.length?[]:"decrypt"===this.type?this._updateDecrypt(p):this._updateEncrypt(p)};fn.prototype._buffer=function(p,b){for(var d=Math.min(this.buffer.length-this.bufferOff,p.length-b),h=0;h<d;h++)this.buffer[this.bufferOff+h]=p[b+h];return this.bufferOff+=d,d};fn.prototype._flushBuffer=function(p,b){return this._update(this.buffer,0,p,b),
this.bufferOff=0,this.blockSize};fn.prototype._updateEncrypt=function(p){var b=0,d=0,h=Array(((this.bufferOff+p.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(b+=this._buffer(p,b),this.bufferOff===this.buffer.length&&(d+=this._flushBuffer(h,d)));for(var a=p.length-(p.length-b)%this.blockSize;b<a;b+=this.blockSize)this._update(p,b,h,d),d+=this.blockSize;for(;b<p.length;b++,this.bufferOff++)this.buffer[this.bufferOff]=p[b];return h};fn.prototype._updateDecrypt=function(p){for(var b=
0,d=0,h=Math.ceil((this.bufferOff+p.length)/this.blockSize)-1,a=Array(h*this.blockSize);0<h;h--)b+=this._buffer(p,b),d+=this._flushBuffer(a,d);return this._buffer(p,b),a};fn.prototype.final=function(p){var b,d;return p&&(b=this.update(p)),d="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),b?b.concat(d):d};fn.prototype._pad=function(p,b){if(0===b)return!1;for(;b<p.length;)p[b++]=0;return!0};fn.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var p=
Array(this.blockSize);return this._update(this.buffer,0,p,0),p};fn.prototype._unpad=function(p){return p};fn.prototype._finalDecrypt=function(){lsa.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var p=Array(this.blockSize);return this._flushBuffer(p,0),this._unpad(p)};var uaa=$n,a2=fn;hh(Rn,a2);Rn.create=function(p){return new Rn(p)};var msa=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];Rn.prototype.deriveKeys=function(p,b){p.keys=Array(32);uaa.equal(b.length,this.blockSize,"Invalid key length");
var d=Mj.readUInt32BE(b,0);b=Mj.readUInt32BE(b,4);Mj.pc1(d,b,p.tmp,0);d=p.tmp[0];b=p.tmp[1];for(var h=0;h<p.keys.length;h+=2){var a=msa[h>>>1];d=Mj.r28shl(d,a);b=Mj.r28shl(b,a);Mj.pc2(d,b,p.keys,h)}};Rn.prototype._update=function(p,b,d,h){var a=this._desState,e=Mj.readUInt32BE(p,b);p=Mj.readUInt32BE(p,b+4);Mj.ip(e,p,a.tmp,0);e=a.tmp[0];p=a.tmp[1];"encrypt"===this.type?this._encrypt(a,e,p,a.tmp,0):this._decrypt(a,e,p,a.tmp,0);e=a.tmp[0];p=a.tmp[1];Mj.writeUInt32BE(d,e,h);Mj.writeUInt32BE(d,p,h+4)};
Rn.prototype._pad=function(p,b){for(var d=p.length-b;b<p.length;b++)p[b]=d;return!0};Rn.prototype._unpad=function(p){for(var b=p[p.length-1],d=p.length-b;d<p.length;d++)uaa.equal(p[d],b);return p.slice(0,p.length-b)};Rn.prototype._encrypt=function(p,b,d,h,a){for(var e=0;e<p.keys.length;e+=2){var n=p.keys[e],q=p.keys[e+1];Mj.expand(d,p.tmp,0);n^=p.tmp[0];q^=p.tmp[1];n=Mj.substitute(n,q);q=d;d=(b^Mj.permute(n))>>>0;b=q}Mj.rip(d,b,h,a)};Rn.prototype._decrypt=function(p,b,d,h,a){for(var e=p.keys.length-
2;0<=e;e-=2){var n=p.keys[e],q=p.keys[e+1];Mj.expand(d,p.tmp,0);n^=p.tmp[0];q^=p.tmp[1];n=Mj.substitute(n,q);q=d;d=(b^Mj.permute(n))>>>0;b=q}Mj.rip(d,b,h,a)};var OJ={},mia=$n,nsa=hh,PJ={};OJ.instantiate=function(p){function b(e){p.call(this,e);this._cbcInit()}nsa(b,p);for(var d=Object.keys(PJ),h=0;h<d.length;h++){var a=d[h];b.prototype[a]=PJ[a]}return b.create=function(e){return new b(e)},b};PJ._cbcInit=function(){this._cbcState=new lia(this.options.iv)};PJ._update=function(p,b,d,h){var a=this.constructor.super_.prototype,
e=this._cbcState.iv;if("encrypt"===this.type){for(var n=0;n<this.blockSize;n++)e[n]^=p[b+n];a._update.call(this,e,0,d,h);for(n=0;n<this.blockSize;n++)e[n]=d[h+n]}else{a._update.call(this,p,b,d,h);for(n=0;n<this.blockSize;n++)d[h+n]^=e[n];for(n=0;n<this.blockSize;n++)e[n]=p[b+n]}};var oia=$n,b2=fn,Cs=Rn;hh(Sp,b2);Sp.create=function(p){return new Sp(p)};Sp.prototype._update=function(p,b,d,h){var a=this._edeState;a.ciphers[0]._update(p,b,d,h);a.ciphers[1]._update(d,h,d,h);a.ciphers[2]._update(d,h,d,
h)};Sp.prototype._pad=Cs.prototype._pad;Sp.prototype._unpad=Cs.prototype._unpad;var WF="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,c2=il,osa=hh,Ju=bi.Buffer,HA={"des-ede3-cbc":OJ.instantiate(Sp),"des-ede3":Sp,"des-ede-cbc":OJ.instantiate(Sp),"des-ede":Sp,"des-cbc":OJ.instantiate(Rn),"des-ecb":Rn};HA.des=HA["des-cbc"];HA.des3=HA["des-ede3-cbc"];osa(VF,c2);VF.prototype._update=function(p){return Ju.from((this||WF)._des.update(p))};VF.prototype._final=function(){return Ju.from((this||
WF)._des.final())};var psa=Yg.Buffer,Ky=function(p,b){for(var d=Math.min(p.length,b.length),h=new psa(d),a=0;a<d;++a)h[a]=p[a]^b[a];return h},vaa=function(p){for(var b,d=p.length;d--;){if(255!==(b=p.readUInt8(d))){b++;p.writeUInt8(b,d);break}p.writeUInt8(0,d)}},waa={},IA=bi.Buffer,pia=Ky;waa.encrypt=function(p,b,d){for(var h,a=IA.allocUnsafe(0);b.length;){if(0===p._cache.length&&(p._cache=p._cipher.encryptBlock(p._prev),p._prev=IA.allocUnsafe(0)),!(p._cache.length<=b.length)){a=IA.concat([a,d2(p,
b,d)]);break}h=p._cache.length;a=IA.concat([a,d2(p,b.slice(0,h),d)]);b=b.slice(h)}return a};var xaa={},AT=bi.Buffer;xaa.encrypt=function(p,b,d){for(var h=b.length,a=AT.allocUnsafe(h),e=-1;++e<h;){var n=e;var q=p;var r=b[e],v=d,y=q._cipher.encryptBlock(q._prev)[0]^r;q=(q._prev=AT.concat([q._prev.slice(1),AT.from([v?r:y])]),y);a[n]=q}return a};var yaa={},QJ=bi.Buffer;yaa.encrypt=function(p,b,d){for(var h=b.length,a=QJ.allocUnsafe(h),e=-1;++e<h;){for(var n=e,q,r,v=p,y=b[e],D=d,E=-1,I=0;8>++E;){r=y&1<<
7-E?128:0;I+=(128&(q=v._cipher.encryptBlock(v._prev)[0]^r))>>E%8;var K=v,P=v._prev;q=D?r:q;r=P.length;var N=-1,aa=QJ.allocUnsafe(P.length);for(P=QJ.concat([P,QJ.from([q])]);++N<r;)aa[N]=P[N]<<1|P[N+1]>>7;K._prev=aa}a[n]=I}return a};var zaa={},qsa=Yg.Buffer;zaa.encrypt=function(p,b){for(;p._cache.length<b.length;)p._cache=qsa.concat([p._cache,qia(p)]);var d=p._cache.slice(0,b.length);return p._cache=p._cache.slice(b.length),Ky(b,d)};var BT={},Aaa=bi.Buffer;BT.encrypt=function(p,b){var d=Math.ceil(b.length/
16),h=p._cache.length;p._cache=Aaa.concat([p._cache,Aaa.allocUnsafe(16*d)]);for(var a=0;a<d;a++){var e=p;var n=e._cipher.encryptBlockRaw(e._prev);e=(vaa(e._prev),n);n=h+16*a;p._cache.writeUInt32BE(e[0],n+0);p._cache.writeUInt32BE(e[1],n+4);p._cache.writeUInt32BE(e[2],n+8);p._cache.writeUInt32BE(e[3],n+12)}d=p._cache.slice(0,b.length);return p._cache=p._cache.slice(b.length),Ky(b,d)};var xv={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,
mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,
iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",
type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",
key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},rsa={ECB:{encrypt:function(p,b){return p._cipher.encryptBlock(b)},decrypt:function(p,b){return p._cipher.decryptBlock(b)}},CBC:{encrypt:function(p,b){b=Ky(b,p._prev);return p._prev=p._cipher.encryptBlock(b),p._prev},decrypt:function(p,b){var d=p._prev;p._prev=b;p=p._cipher.decryptBlock(b);return Ky(p,d)}},CFB:waa,CFB8:xaa,CFB1:yaa,
OFB:zaa,CTR:BT,GCM:BT},CT;for(CT in xv)xv[CT].module=rsa[xv[CT].mode];var Tn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,zC={},XF=bi.Buffer,ssa=[0,1,2,4,8,16,32,64,128,27,54],Ck=function(){for(var p=Array(256),b=0;256>b;b++)p[b]=128>b?b<<1:b<<1^283;b=[];for(var d=[],h=[[],[],[],[]],a=[[],[],[],[]],e=0,n=0,q=0;256>q;++q){var r=n^n<<1^n<<2^n<<3^n<<4;r=r>>>8^255&r^99;b[e]=r;d[r]=e;var v=p[e],y=p[v],D=p[y],E=257*p[r]^16843008*r;h[0][e]=E<<24|E>>>8;h[1][e]=E<<16|E>>>
16;h[2][e]=E<<8|E>>>24;h[3][e]=E;E=16843009*D^65537*y^257*v^16843008*e;a[0][r]=E<<24|E>>>8;a[1][r]=E<<16|E>>>16;a[2][r]=E<<8|E>>>24;a[3][r]=E;0===e?e=n=1:(e=v^p[p[p[D^v]]],n^=p[p[n]])}return{SBOX:b,INV_SBOX:d,SUB_MIX:h,INV_SUB_MIX:a}}();Sn.blockSize=16;Sn.keySize=32;Sn.prototype.blockSize=Sn.blockSize;Sn.prototype.keySize=Sn.keySize;Sn.prototype._reset=function(){for(var p=(this||Tn)._key,b=p.length,d=b+6,h=4*(d+1),a=[],e=0;e<b;e++)a[e]=p[e];for(e=b;e<h;e++)p=a[e-1],0==e%b?(p=p<<8|p>>>24,p=Ck.SBOX[p>>>
24]<<24|Ck.SBOX[p>>>16&255]<<16|Ck.SBOX[p>>>8&255]<<8|Ck.SBOX[255&p],p^=ssa[e/b|0]<<24):6<b&&4==e%b&&(p=Ck.SBOX[p>>>24]<<24|Ck.SBOX[p>>>16&255]<<16|Ck.SBOX[p>>>8&255]<<8|Ck.SBOX[255&p]),a[e]=a[e-b]^p;b=[];for(e=0;e<h;e++){p=h-e;var n=a[p-(e%4?0:4)];b[e]=4>e||4>=p?n:Ck.INV_SUB_MIX[0][Ck.SBOX[n>>>24]]^Ck.INV_SUB_MIX[1][Ck.SBOX[n>>>16&255]]^Ck.INV_SUB_MIX[2][Ck.SBOX[n>>>8&255]]^Ck.INV_SUB_MIX[3][Ck.SBOX[255&n]]}(this||Tn)._nRounds=d;(this||Tn)._keySchedule=a;(this||Tn)._invKeySchedule=b};Sn.prototype.encryptBlockRaw=
function(p){return e2(nO(p),(this||Tn)._keySchedule,Ck.SUB_MIX,Ck.SBOX,(this||Tn)._nRounds)};Sn.prototype.encryptBlock=function(p){p=this.encryptBlockRaw(p);var b=XF.allocUnsafe(16);return b.writeUInt32BE(p[0],0),b.writeUInt32BE(p[1],4),b.writeUInt32BE(p[2],8),b.writeUInt32BE(p[3],12),b};Sn.prototype.decryptBlock=function(p){var b=(p=nO(p))[1];p[1]=p[3];p[3]=b;p=e2(p,(this||Tn)._invKeySchedule,Ck.INV_SUB_MIX,Ck.INV_SBOX,(this||Tn)._nRounds);b=XF.allocUnsafe(16);return b.writeUInt32BE(p[0],0),b.writeUInt32BE(p[3],
4),b.writeUInt32BE(p[2],8),b.writeUInt32BE(p[1],12),b};Sn.prototype.scrub=function(){oO((this||Tn)._keySchedule);oO((this||Tn)._invKeySchedule);oO((this||Tn)._key)};zC.AES=Sn;var Hl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Hx=bi.Buffer,tsa=Hx.alloc(16,0);JA.prototype.ghash=function(p){for(var b=-1;++b<p.length;)(this||Hl).state[b]^=p[b];this._multiply()};JA.prototype._multiply=function(){for(var p,b,d=[(p=(this||Hl).h).readUInt32BE(0),p.readUInt32BE(4),p.readUInt32BE(8),
p.readUInt32BE(12)],h=[0,0,0,0],a=-1;128>++a;){0!=((this||Hl).state[~~(a/8)]&1<<7-a%8)&&(h[0]^=d[0],h[1]^=d[1],h[2]^=d[2],h[3]^=d[3]);b=0!=(1&d[3]);for(p=3;0<p;p--)d[p]=d[p]>>>1|(1&d[p-1])<<31;d[0]>>>=1;b&&(d[0]^=-520093696)}(this||Hl).state=f2(h)};JA.prototype.update=function(p){for((this||Hl).cache=Hx.concat([(this||Hl).cache,p]);16<=(this||Hl).cache.length;)p=(this||Hl).cache.slice(0,16),(this||Hl).cache=(this||Hl).cache.slice(16),this.ghash(p)};JA.prototype.final=function(p,b){return(this||Hl).cache.length&&
this.ghash(Hx.concat([(this||Hl).cache,tsa],16)),this.ghash(f2([0,p,0,b])),(this||Hl).state};var Sg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,ria=zC,Jm=bi.Buffer,g2=il,h2=JA,sia=vaa;hh(Ds,g2);Ds.prototype._update=function(p){if(!(this||Sg)._called&&(this||Sg)._alen){var b=16-(this||Sg)._alen%16;16>b&&(b=Jm.alloc(b,0),(this||Sg)._ghash.update(b))}(this||Sg)._called=!0;b=(this||Sg)._mode.encrypt(this||Sg,p);return(this||Sg)._decrypt?(this||Sg)._ghash.update(p):(this||
Sg)._ghash.update(b),(this||Sg)._len+=p.length,b};Ds.prototype._final=function(){if((this||Sg)._decrypt&&!(this||Sg)._authTag)throw Error("Unsupported state or unable to authenticate data");var p=Ky((this||Sg)._ghash.final(8*(this||Sg)._alen,8*(this||Sg)._len),(this||Sg)._cipher.encryptBlock((this||Sg)._finID)),b;if(b=(this||Sg)._decrypt){b=(this||Sg)._authTag;var d=0;p.length!==b.length&&d++;for(var h=Math.min(p.length,b.length),a=0;a<h;++a)d+=p[a]^b[a];b=d}if(b)throw Error("Unsupported state or unable to authenticate data");
(this||Sg)._authTag=p;(this||Sg)._cipher.scrub()};Ds.prototype.getAuthTag=function(){if((this||Sg)._decrypt||!Jm.isBuffer((this||Sg)._authTag))throw Error("Attempting to get auth tag in unsupported state");return(this||Sg)._authTag};Ds.prototype.setAuthTag=function(p){if(!(this||Sg)._decrypt)throw Error("Attempting to set auth tag in unsupported state");(this||Sg)._authTag=p};Ds.prototype.setAAD=function(p){if((this||Sg)._called)throw Error("Attempting to set AAD in unsupported state");(this||Sg)._ghash.update(p);
(this||Sg)._alen+=p.length};var Vo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,tia=zC,pO=bi.Buffer,i2=il;hh(KA,i2);KA.prototype._update=function(p){return(this||Vo)._mode.encrypt(this||Vo,p,(this||Vo)._decrypt)};KA.prototype._final=function(){(this||Vo)._cipher.scrub()};var yv=bi.Buffer,PA=function(p,b,d,h){if(yv.isBuffer(p)||(p=yv.from(p,"binary")),b&&(yv.isBuffer(b)||(b=yv.from(b,"binary")),8!==b.length))throw new RangeError("salt should be Buffer with 8 byte length");
d/=8;for(var a=yv.alloc(d),e=yv.alloc(h||0),n=yv.alloc(0);0<d||0<h;){var q=new Cx;q.update(n);q.update(p);b&&q.update(b);n=q.digest();q=0;if(0<d){var r=a.length-d;q=Math.min(d,n.length);n.copy(a,r,0,q);d-=q}q<n.length&&0<h&&(r=Math.min(h,n.length-q),n.copy(e,e.length-h,q,q+r),h-=r)}return n.fill(0),{key:a,iv:e}},Ki="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,wia=Ds,Ix=bi.Buffer,l2=xv,via=KA,j2=il,uia=zC;hh(LA,j2);LA.prototype._update=function(p){var b;(this||Ki)._cache.add(p);
for(p=[];b=(this||Ki)._cache.get((this||Ki)._autopadding);)b=(this||Ki)._mode.decrypt(this||Ki,b),p.push(b);return Ix.concat(p)};LA.prototype._final=function(){var p=(this||Ki)._cache.flush();if((this||Ki)._autopadding){p=(this||Ki)._mode.decrypt(this||Ki,p);var b=p[15];if(1>b||16<b)throw Error("unable to decrypt data");for(var d=-1;++d<b;)if(p[d+(16-b)]!==b)throw Error("unable to decrypt data");p=16===b?void 0:p.slice(0,16-b);return p}if(p)throw Error("data not multiple of block length");};LA.prototype.setAutoPadding=
function(p){return(this||Ki)._autopadding=!!p,this||Ki};YF.prototype.add=function(p){(this||Ki).cache=Ix.concat([(this||Ki).cache,p])};YF.prototype.get=function(p){var b;if(p){if(16<(this||Ki).cache.length)return b=(this||Ki).cache.slice(0,16),(this||Ki).cache=(this||Ki).cache.slice(16),b}else if(16<=(this||Ki).cache.length)return b=(this||Ki).cache.slice(0,16),(this||Ki).cache=(this||Ki).cache.slice(16),b;return null};YF.prototype.flush=function(){if((this||Ki).cache.length)return(this||Ki).cache};
var lj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,o2=xv,zia=Ds,dr=bi.Buffer,yia=KA,m2=il,xia=zC;hh(MA,m2);MA.prototype._update=function(p){var b;(this||lj)._cache.add(p);for(p=[];b=(this||lj)._cache.get();)b=(this||lj)._mode.encrypt(this||lj,b),p.push(b);return dr.concat(p)};var usa=dr.alloc(16,16);MA.prototype._final=function(){var p=(this||lj)._cache.flush();if((this||lj)._autopadding)return p=(this||lj)._mode.encrypt(this||lj,p),(this||lj)._cipher.scrub(),p;
if(!p.equals(usa))throw(this||lj)._cipher.scrub(),Error("data not multiple of block length");};MA.prototype.setAutoPadding=function(p){return(this||lj)._autopadding=!!p,this||lj};ZF.prototype.add=function(p){(this||lj).cache=dr.concat([(this||lj).cache,p])};ZF.prototype.get=function(){if(15<(this||lj).cache.length){var p=(this||lj).cache.slice(0,16);return(this||lj).cache=(this||lj).cache.slice(16),p}return null};ZF.prototype.flush=function(){for(var p=16-(this||lj).cache.length,b=dr.allocUnsafe(p),
d=-1;++d<p;)b.writeUInt8(p,d);return dr.concat([(this||lj).cache,b])};var hn={};hn.createCipher=hn.Cipher=function(p,b){var d=o2[p.toLowerCase()];if(!d)throw new TypeError("invalid suite type");b=PA(b,!1,d.key,d.iv);return n2(p,b.key,b.iv)};hn.createCipheriv=hn.Cipheriv=n2;hn.createDecipher=hn.Decipher=function(p,b){var d=l2[p.toLowerCase()];if(!d)throw new TypeError("invalid suite type");b=PA(b,!1,d.key,d.iv);return k2(p,b.key,b.iv)};hn.createDecipheriv=hn.Decipheriv=k2;hn.listCiphers=hn.getCiphers=
function(){return Object.keys(xv)};var mt={"des-ecb":{key:8,iv:0}};mt["des-cbc"]=mt.des={key:8,iv:8};mt["des-ede3-cbc"]=mt.des3={key:24,iv:8};mt["des-ede3"]={key:24,iv:0};mt["des-ede-cbc"]={key:16,iv:8};mt["des-ede"]={key:16,iv:0};var Baa,Caa,Daa,p2=VF,rO=hn,Es=xv,er=mt;var vsa=Baa=function(p,b){if(p=p.toLowerCase(),Es[p]){var d=Es[p].key;var h=Es[p].iv}else{if(!er[p])throw new TypeError("invalid suite type");d=8*er[p].key;h=er[p].iv}b=PA(b,!1,d,h);return qO(p,b.key,b.iv)};var wsa=Caa=function(p,
b){if(p=p.toLowerCase(),Es[p]){var d=Es[p].key;var h=Es[p].iv}else{if(!er[p])throw new TypeError("invalid suite type");d=8*er[p].key;h=er[p].iv}b=PA(b,!1,d,h);return sO(p,b.key,b.iv)};var xsa=Daa=function(){return Object.keys(er).concat(rO.getCiphers())};var ysa=Object.freeze({}),hb="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Eaa={},Faa={exports:Eaa};!function(p,b){function d(A,H){if(!A)throw Error(H||"Assertion failed");}function h(A,H){A.super_=H;var F=function(){};
F.prototype=H.prototype;A.prototype=new F;A.prototype.constructor=A}function a(A,H,F){if(a.isBN(A))return A;(this||hb).negative=0;(this||hb).words=null;(this||hb).length=0;(this||hb).red=null;null!==A&&("le"!==H&&"be"!==H||(F=H,H=10),this._init(A||0,H||10,F||"be"))}function e(A,H,F){var L=0;for(F=Math.min(A.length,F);H<F;H++){var U=A.charCodeAt(H)-48;L<<=4;L|=49<=U&&54>=U?U-49+10:17<=U&&22>=U?U-17+10:15&U}return L}function n(A,H,F,L){var U=0;for(F=Math.min(A.length,F);H<F;H++){var T=A.charCodeAt(H)-
48;U*=L;U+=49<=T?T-49+10:17<=T?T-17+10:T}return U}function q(A,H,F){F.negative=H.negative^A.negative;var L=A.length+H.length|0;F.length=L;L=L-1|0;var U=(0|A.words[0])*(0|H.words[0]),T=U/67108864|0;F.words[0]=67108863&U;for(var Y=1;Y<L;Y++){var wa=T>>>26;U=67108863&T;T=Math.min(Y,H.length-1);for(var Ga=Math.max(0,Y-A.length+1);Ga<=T;Ga++)wa+=(U=(0|A.words[Y-Ga|0])*(0|H.words[Ga])+U)/67108864|0,U&=67108863;F.words[Y]=0|U;T=0|wa}return 0!==T?F.words[Y]=0|T:F.length--,F.strip()}function r(A,H){(this||
hb).x=A;(this||hb).y=H}function v(A,H){(this||hb).name=A;(this||hb).p=new a(H,16);(this||hb).n=(this||hb).p.bitLength();(this||hb).k=(new a(1)).iushln((this||hb).n).isub((this||hb).p);(this||hb).tmp=this._tmp()}function y(){v.call(this||hb,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function D(){v.call(this||hb,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){v.call(this||hb,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}
function I(){v.call(this||hb,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function K(A){"string"==typeof A?(A=a._prime(A),(this||hb).m=A.p,(this||hb).prime=A):(d(A.gtn(1),"modulus must be greater than 1"),(this||hb).m=A,(this||hb).prime=null)}function P(A){K.call(this||hb,A);(this||hb).shift=(this||hb).m.bitLength();0!=(this||hb).shift%26&&((this||hb).shift+=26-(this||hb).shift%26);(this||hb).r=(new a(1)).iushln((this||hb).shift);(this||hb).r2=this.imod((this||hb).r.sqr());
(this||hb).rinv=(this||hb).r._invmp((this||hb).m);(this||hb).minv=(this||hb).rinv.mul((this||hb).r).isubn(1).div((this||hb).m);(this||hb).minv=(this||hb).minv.umod((this||hb).r);(this||hb).minv=(this||hb).r.sub((this||hb).minv)}"object"==typeof p?p.exports=a:b.BN=a;a.BN=a;a.wordSize=26;try{var N=ysa.Buffer}catch(A){}a.isBN=function(A){return A instanceof a||null!==A&&"object"==typeof A&&A.constructor.wordSize===a.wordSize&&Array.isArray(A.words)};a.max=function(A,H){return 0<A.cmp(H)?A:H};a.min=function(A,
H){return 0>A.cmp(H)?A:H};a.prototype._init=function(A,H,F){if("number"==typeof A)return this._initNumber(A,H,F);if("object"==typeof A)return this._initArray(A,H,F);"hex"===H&&(H=16);d(H===(0|H)&&2<=H&&36>=H);var L=0;"-"===(A=A.toString().replace(/\s+/g,""))[0]&&L++;16===H?this._parseHex(A,L):this._parseBase(A,H,L);"-"===A[0]&&((this||hb).negative=1);this.strip();"le"===F&&this._initArray(this.toArray(),H,F)};a.prototype._initNumber=function(A,H,F){0>A&&((this||hb).negative=1,A=-A);67108864>A?((this||
hb).words=[67108863&A],(this||hb).length=1):4503599627370496>A?((this||hb).words=[67108863&A,A/67108864&67108863],(this||hb).length=2):(d(9007199254740992>A),(this||hb).words=[67108863&A,A/67108864&67108863,1],(this||hb).length=3);"le"===F&&this._initArray(this.toArray(),H,F)};a.prototype._initArray=function(A,H,F){if(d("number"==typeof A.length),0>=A.length)return(this||hb).words=[0],(this||hb).length=1,this||hb;(this||hb).length=Math.ceil(A.length/3);(this||hb).words=Array((this||hb).length);for(H=
0;H<(this||hb).length;H++)(this||hb).words[H]=0;var L=0;if("be"===F)for(H=A.length-1,F=0;0<=H;H-=3){var U=A[H]|A[H-1]<<8|A[H-2]<<16;(this||hb).words[F]|=U<<L&67108863;(this||hb).words[F+1]=U>>>26-L&67108863;26<=(L+=24)&&(L-=26,F++)}else if("le"===F)for(F=H=0;H<A.length;H+=3)U=A[H]|A[H+1]<<8|A[H+2]<<16,(this||hb).words[F]|=U<<L&67108863,(this||hb).words[F+1]=U>>>26-L&67108863,26<=(L+=24)&&(L-=26,F++);return this.strip()};a.prototype._parseHex=function(A,H){(this||hb).length=Math.ceil((A.length-H)/
6);(this||hb).words=Array((this||hb).length);for(var F=0;F<(this||hb).length;F++)(this||hb).words[F]=0;var L,U=0;F=A.length-6;for(L=0;F>=H;F-=6){var T=e(A,F,F+6);(this||hb).words[L]|=T<<U&67108863;(this||hb).words[L+1]|=T>>>26-U&4194303;26<=(U+=24)&&(U-=26,L++)}F+6!==H&&(T=e(A,H,F+6),(this||hb).words[L]|=T<<U&67108863,(this||hb).words[L+1]|=T>>>26-U&4194303);this.strip()};a.prototype._parseBase=function(A,H,F){(this||hb).words=[0];(this||hb).length=1;for(var L=0,U=1;67108863>=U;U*=H)L++;L--;U=U/H|
0;var T=A.length-F,Y=T%L;T=Math.min(T,T-Y)+F;for(var wa=F;wa<T;wa+=L)F=n(A,wa,wa+L,H),this.imuln(U),67108864>(this||hb).words[0]+F?(this||hb).words[0]+=F:this._iaddn(F);if(0!==Y){L=1;F=n(A,wa,A.length,H);for(wa=0;wa<Y;wa++)L*=H;this.imuln(L);67108864>(this||hb).words[0]+F?(this||hb).words[0]+=F:this._iaddn(F)}};a.prototype.copy=function(A){A.words=Array((this||hb).length);for(var H=0;H<(this||hb).length;H++)A.words[H]=(this||hb).words[H];A.length=(this||hb).length;A.negative=(this||hb).negative;A.red=
(this||hb).red};a.prototype.clone=function(){var A=new a(null);return this.copy(A),A};a.prototype._expand=function(A){for(;(this||hb).length<A;)(this||hb).words[(this||hb).length++]=0;return this||hb};a.prototype.strip=function(){for(;1<(this||hb).length&&0===(this||hb).words[(this||hb).length-1];)(this||hb).length--;return this._normSign()};a.prototype._normSign=function(){return 1===(this||hb).length&&0===(this||hb).words[0]&&((this||hb).negative=0),this||hb};a.prototype.inspect=function(){return((this||
hb).red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var aa=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
5],t=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(A,H){if(H=0|H||1,16===(A=A||10)||"hex"===A){var F="";for(var L=A=0,U=0;U<(this||hb).length;U++){var T=(this||hb).words[U],Y=(16777215&(T<<A|L)).toString(16);F=0!==
(L=T>>>24-A&16777215)||U!==(this||hb).length-1?aa[6-Y.length]+Y+F:Y+F;26<=(A+=2)&&(A-=26,U--)}for(0!==L&&(F=L.toString(16)+F);0!=F.length%H;)F="0"+F;return 0!==(this||hb).negative&&(F="-"+F),F}if(A===(0|A)&&2<=A&&36>=A){L=m[A];U=t[A];F="";T=this.clone();for(T.negative=0;!T.isZero();)Y=T.modn(U).toString(A),F=(T=T.idivn(U)).isZero()?Y+F:aa[L-Y.length]+Y+F;for(this.isZero()&&(F="0"+F);0!=F.length%H;)F="0"+F;return 0!==(this||hb).negative&&(F="-"+F),F}d(!1,"Base should be between 2 and 36")};a.prototype.toNumber=
function(){var A=(this||hb).words[0];return 2===(this||hb).length?A+=67108864*(this||hb).words[1]:3===(this||hb).length&&1===(this||hb).words[2]?A+=4503599627370496+67108864*(this||hb).words[1]:2<(this||hb).length&&d(!1,"Number can only safely store up to 53 bits"),0!==(this||hb).negative?-A:A};a.prototype.toJSON=function(){return this.toString(16)};a.prototype.toBuffer=function(A,H){return d(void 0!==N),this.toArrayLike(N,A,H)};a.prototype.toArray=function(A,H){return this.toArrayLike(Array,A,H)};
a.prototype.toArrayLike=function(A,H,F){var L=this.byteLength();F=F||Math.max(1,L);d(L<=F,"byte array longer than desired length");d(0<F,"Requested array length <= 0");this.strip();var U="le"===H;A=new A(F);H=this.clone();if(U){for(U=0;!H.isZero();U++)L=H.andln(255),H.iushrn(8),A[U]=L;for(;U<F;U++)A[U]=0}else{for(U=0;U<F-L;U++)A[U]=0;for(U=0;!H.isZero();U++)L=H.andln(255),H.iushrn(8),A[F-U-1]=L}return A};Math.clz32?a.prototype._countBits=function(A){return 32-Math.clz32(A)}:a.prototype._countBits=
function(A){var H=0;return 4096<=A&&(H+=13,A>>>=13),64<=A&&(H+=7,A>>>=7),8<=A&&(H+=4,A>>>=4),2<=A&&(H+=2,A>>>=2),H+A};a.prototype._zeroBits=function(A){if(0===A)return 26;var H=0;return 0==(8191&A)&&(H+=13,A>>>=13),0==(127&A)&&(H+=7,A>>>=7),0==(15&A)&&(H+=4,A>>>=4),0==(3&A)&&(H+=2,A>>>=2),0==(1&A)&&H++,H};a.prototype.bitLength=function(){var A=this._countBits((this||hb).words[(this||hb).length-1]);return 26*((this||hb).length-1)+A};a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var A=
0,H=0;H<(this||hb).length;H++){var F=this._zeroBits((this||hb).words[H]);if(A+=F,26!==F)break}return A};a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};a.prototype.toTwos=function(A){return 0!==(this||hb).negative?this.abs().inotn(A).iaddn(1):this.clone()};a.prototype.fromTwos=function(A){return this.testn(A-1)?this.notn(A).iaddn(1).ineg():this.clone()};a.prototype.isNeg=function(){return 0!==(this||hb).negative};a.prototype.neg=function(){return this.clone().ineg()};a.prototype.ineg=
function(){return this.isZero()||((this||hb).negative^=1),this||hb};a.prototype.iuor=function(A){for(;(this||hb).length<A.length;)(this||hb).words[(this||hb).length++]=0;for(var H=0;H<A.length;H++)(this||hb).words[H]|=A.words[H];return this.strip()};a.prototype.ior=function(A){return d(0==((this||hb).negative|A.negative)),this.iuor(A)};a.prototype.or=function(A){return(this||hb).length>A.length?this.clone().ior(A):A.clone().ior(this||hb)};a.prototype.uor=function(A){return(this||hb).length>A.length?
this.clone().iuor(A):A.clone().iuor(this||hb)};a.prototype.iuand=function(A){var H=(this||hb).length>A.length?A:this||hb;for(var F=0;F<H.length;F++)(this||hb).words[F]&=A.words[F];return(this||hb).length=H.length,this.strip()};a.prototype.iand=function(A){return d(0==((this||hb).negative|A.negative)),this.iuand(A)};a.prototype.and=function(A){return(this||hb).length>A.length?this.clone().iand(A):A.clone().iand(this||hb)};a.prototype.uand=function(A){return(this||hb).length>A.length?this.clone().iuand(A):
A.clone().iuand(this||hb)};a.prototype.iuxor=function(A){var H,F;(this||hb).length>A.length?(H=this||hb,F=A):(H=A,F=this||hb);for(A=0;A<F.length;A++)(this||hb).words[A]=H.words[A]^F.words[A];if((this||hb)!==H)for(;A<H.length;A++)(this||hb).words[A]=H.words[A];return(this||hb).length=H.length,this.strip()};a.prototype.ixor=function(A){return d(0==((this||hb).negative|A.negative)),this.iuxor(A)};a.prototype.xor=function(A){return(this||hb).length>A.length?this.clone().ixor(A):A.clone().ixor(this||hb)};
a.prototype.uxor=function(A){return(this||hb).length>A.length?this.clone().iuxor(A):A.clone().iuxor(this||hb)};a.prototype.inotn=function(A){d("number"==typeof A&&0<=A);var H=0|Math.ceil(A/26);A%=26;this._expand(H);0<A&&H--;for(var F=0;F<H;F++)(this||hb).words[F]=67108863&~(this||hb).words[F];return 0<A&&((this||hb).words[F]=~(this||hb).words[F]&67108863>>26-A),this.strip()};a.prototype.notn=function(A){return this.clone().inotn(A)};a.prototype.setn=function(A,H){d("number"==typeof A&&0<=A);var F=
A/26|0;A%=26;return this._expand(F+1),(this||hb).words[F]=H?(this||hb).words[F]|1<<A:(this||hb).words[F]&~(1<<A),this.strip()};a.prototype.iadd=function(A){var H,F,L;if(0!==(this||hb).negative&&0===A.negative)return(this||hb).negative=0,this.isub(A),(this||hb).negative^=1,this._normSign();if(0===(this||hb).negative&&0!==A.negative)return A.negative=0,H=this.isub(A),A.negative=1,H._normSign();(this||hb).length>A.length?(F=this||hb,L=A):(F=A,L=this||hb);for(A=H=0;A<L.length;A++)H=(0|F.words[A])+(0|
L.words[A])+H,(this||hb).words[A]=67108863&H,H>>>=26;for(;0!==H&&A<F.length;A++)H=(0|F.words[A])+H,(this||hb).words[A]=67108863&H,H>>>=26;if((this||hb).length=F.length,0!==H)(this||hb).words[(this||hb).length]=H,(this||hb).length++;else if(F!==(this||hb))for(;A<F.length;A++)(this||hb).words[A]=F.words[A];return this||hb};a.prototype.add=function(A){var H;return 0!==A.negative&&0===(this||hb).negative?(A.negative=0,H=this.sub(A),A.negative^=1,H):0===A.negative&&0!==(this||hb).negative?((this||hb).negative=
0,H=A.sub(this||hb),(this||hb).negative=1,H):(this||hb).length>A.length?this.clone().iadd(A):A.clone().iadd(this||hb)};a.prototype.isub=function(A){if(0!==A.negative){A.negative=0;var H=this.iadd(A);return A.negative=1,H._normSign()}if(0!==(this||hb).negative)return(this||hb).negative=0,this.iadd(A),(this||hb).negative=1,this._normSign();var F,L;H=this.cmp(A);if(0===H)return(this||hb).negative=0,(this||hb).length=1,(this||hb).words[0]=0,this||hb;0<H?(F=this||hb,L=A):(F=A,L=this||hb);for(var U=A=0;U<
L.length;U++)A=(H=(0|F.words[U])-(0|L.words[U])+A)>>26,(this||hb).words[U]=67108863&H;for(;0!==A&&U<F.length;U++)A=(H=(0|F.words[U])+A)>>26,(this||hb).words[U]=67108863&H;if(0===A&&U<F.length&&F!==(this||hb))for(;U<F.length;U++)(this||hb).words[U]=F.words[U];return(this||hb).length=Math.max((this||hb).length,U),F!==(this||hb)&&((this||hb).negative=1),this.strip()};a.prototype.sub=function(A){return this.clone().isub(A)};var u=function(A,H,F){var L=A.words,U=H.words,T=F.words,Y=0|L[0],wa=8191&Y;Y>>>=
13;var Ga=0|L[1],na=8191&Ga;Ga>>>=13;var ea=0|L[2],da=8191&ea;ea>>>=13;var ia=0|L[3],Oa=8191&ia;ia>>>=13;var Va=0|L[4],eb=8191&Va;Va>>>=13;var Sa=0|L[5],Bb=8191&Sa;Sa>>>=13;var Z=0|L[6],sa=8191&Z;Z>>>=13;var Da=0|L[7],X=8191&Da;Da>>>=13;var ma=0|L[8],ta=8191&ma;ma>>>=13;var Pa=0|L[9];L=8191&Pa;Pa>>>=13;var Za=0|U[0],Zb=8191&Za,Pb=Za>>>13,Db=0|U[1];Za=8191&Db;var sc=Db>>>13,wc=0|U[2];Db=8191&wc;var Lc=wc>>>13,Xc=0|U[3];wc=8191&Xc;var Qc=Xc>>>13,hd=0|U[4];Xc=8191&hd;var Wc=hd>>>13,ld=0|U[5];hd=8191&
ld;var Yc=ld>>>13,od=0|U[6];ld=8191&od;var Vc=od>>>13,cd=0|U[7];od=8191&cd;var W=cd>>>13,af=0|U[8];cd=8191&af;af>>>=13;var zc=0|U[9];U=8191&zc;zc>>>=13;F.negative=A.negative^H.negative;F.length=19;var pi=(0+Math.imul(wa,Zb)|0)+((8191&(A=(A=Math.imul(wa,Pb))+Math.imul(Y,Zb)|0))<<13)|0;H=(Math.imul(Y,Pb)+(A>>>13)|0)+(pi>>>26)|0;pi&=67108863;var ad=Math.imul(na,Zb);A=(A=Math.imul(na,Pb))+Math.imul(Ga,Zb)|0;var bd=Math.imul(Ga,Pb);var qi=(H+(ad+Math.imul(wa,Za)|0)|0)+((8191&(A=(A=A+Math.imul(wa,sc)|0)+
Math.imul(Y,Za)|0))<<13)|0;H=((bd+Math.imul(Y,sc)|0)+(A>>>13)|0)+(qi>>>26)|0;qi&=67108863;ad=Math.imul(da,Zb);A=(A=Math.imul(da,Pb))+Math.imul(ea,Zb)|0;bd=Math.imul(ea,Pb);ad=ad+Math.imul(na,Za)|0;A=(A=A+Math.imul(na,sc)|0)+Math.imul(Ga,Za)|0;bd=bd+Math.imul(Ga,sc)|0;var ei=(H+(ad+Math.imul(wa,Db)|0)|0)+((8191&(A=(A=A+Math.imul(wa,Lc)|0)+Math.imul(Y,Db)|0))<<13)|0;H=((bd+Math.imul(Y,Lc)|0)+(A>>>13)|0)+(ei>>>26)|0;ei&=67108863;ad=Math.imul(Oa,Zb);A=(A=Math.imul(Oa,Pb))+Math.imul(ia,Zb)|0;bd=Math.imul(ia,
Pb);ad=ad+Math.imul(da,Za)|0;A=(A=A+Math.imul(da,sc)|0)+Math.imul(ea,Za)|0;bd=bd+Math.imul(ea,sc)|0;ad=ad+Math.imul(na,Db)|0;A=(A=A+Math.imul(na,Lc)|0)+Math.imul(Ga,Db)|0;bd=bd+Math.imul(Ga,Lc)|0;var Zh=(H+(ad+Math.imul(wa,wc)|0)|0)+((8191&(A=(A=A+Math.imul(wa,Qc)|0)+Math.imul(Y,wc)|0))<<13)|0;H=((bd+Math.imul(Y,Qc)|0)+(A>>>13)|0)+(Zh>>>26)|0;Zh&=67108863;ad=Math.imul(eb,Zb);A=(A=Math.imul(eb,Pb))+Math.imul(Va,Zb)|0;bd=Math.imul(Va,Pb);ad=ad+Math.imul(Oa,Za)|0;A=(A=A+Math.imul(Oa,sc)|0)+Math.imul(ia,
Za)|0;bd=bd+Math.imul(ia,sc)|0;ad=ad+Math.imul(da,Db)|0;A=(A=A+Math.imul(da,Lc)|0)+Math.imul(ea,Db)|0;bd=bd+Math.imul(ea,Lc)|0;ad=ad+Math.imul(na,wc)|0;A=(A=A+Math.imul(na,Qc)|0)+Math.imul(Ga,wc)|0;bd=bd+Math.imul(Ga,Qc)|0;var xi=(H+(ad+Math.imul(wa,Xc)|0)|0)+((8191&(A=(A=A+Math.imul(wa,Wc)|0)+Math.imul(Y,Xc)|0))<<13)|0;H=((bd+Math.imul(Y,Wc)|0)+(A>>>13)|0)+(xi>>>26)|0;xi&=67108863;ad=Math.imul(Bb,Zb);A=(A=Math.imul(Bb,Pb))+Math.imul(Sa,Zb)|0;bd=Math.imul(Sa,Pb);ad=ad+Math.imul(eb,Za)|0;A=(A=A+Math.imul(eb,
sc)|0)+Math.imul(Va,Za)|0;bd=bd+Math.imul(Va,sc)|0;ad=ad+Math.imul(Oa,Db)|0;A=(A=A+Math.imul(Oa,Lc)|0)+Math.imul(ia,Db)|0;bd=bd+Math.imul(ia,Lc)|0;ad=ad+Math.imul(da,wc)|0;A=(A=A+Math.imul(da,Qc)|0)+Math.imul(ea,wc)|0;bd=bd+Math.imul(ea,Qc)|0;ad=ad+Math.imul(na,Xc)|0;A=(A=A+Math.imul(na,Wc)|0)+Math.imul(Ga,Xc)|0;bd=bd+Math.imul(Ga,Wc)|0;var kr=(H+(ad+Math.imul(wa,hd)|0)|0)+((8191&(A=(A=A+Math.imul(wa,Yc)|0)+Math.imul(Y,hd)|0))<<13)|0;H=((bd+Math.imul(Y,Yc)|0)+(A>>>13)|0)+(kr>>>26)|0;kr&=67108863;
ad=Math.imul(sa,Zb);A=(A=Math.imul(sa,Pb))+Math.imul(Z,Zb)|0;bd=Math.imul(Z,Pb);ad=ad+Math.imul(Bb,Za)|0;A=(A=A+Math.imul(Bb,sc)|0)+Math.imul(Sa,Za)|0;bd=bd+Math.imul(Sa,sc)|0;ad=ad+Math.imul(eb,Db)|0;A=(A=A+Math.imul(eb,Lc)|0)+Math.imul(Va,Db)|0;bd=bd+Math.imul(Va,Lc)|0;ad=ad+Math.imul(Oa,wc)|0;A=(A=A+Math.imul(Oa,Qc)|0)+Math.imul(ia,wc)|0;bd=bd+Math.imul(ia,Qc)|0;ad=ad+Math.imul(da,Xc)|0;A=(A=A+Math.imul(da,Wc)|0)+Math.imul(ea,Xc)|0;bd=bd+Math.imul(ea,Wc)|0;ad=ad+Math.imul(na,hd)|0;A=(A=A+Math.imul(na,
Yc)|0)+Math.imul(Ga,hd)|0;bd=bd+Math.imul(Ga,Yc)|0;var lr=(H+(ad+Math.imul(wa,ld)|0)|0)+((8191&(A=(A=A+Math.imul(wa,Vc)|0)+Math.imul(Y,ld)|0))<<13)|0;H=((bd+Math.imul(Y,Vc)|0)+(A>>>13)|0)+(lr>>>26)|0;lr&=67108863;ad=Math.imul(X,Zb);A=(A=Math.imul(X,Pb))+Math.imul(Da,Zb)|0;bd=Math.imul(Da,Pb);ad=ad+Math.imul(sa,Za)|0;A=(A=A+Math.imul(sa,sc)|0)+Math.imul(Z,Za)|0;bd=bd+Math.imul(Z,sc)|0;ad=ad+Math.imul(Bb,Db)|0;A=(A=A+Math.imul(Bb,Lc)|0)+Math.imul(Sa,Db)|0;bd=bd+Math.imul(Sa,Lc)|0;ad=ad+Math.imul(eb,
wc)|0;A=(A=A+Math.imul(eb,Qc)|0)+Math.imul(Va,wc)|0;bd=bd+Math.imul(Va,Qc)|0;ad=ad+Math.imul(Oa,Xc)|0;A=(A=A+Math.imul(Oa,Wc)|0)+Math.imul(ia,Xc)|0;bd=bd+Math.imul(ia,Wc)|0;ad=ad+Math.imul(da,hd)|0;A=(A=A+Math.imul(da,Yc)|0)+Math.imul(ea,hd)|0;bd=bd+Math.imul(ea,Yc)|0;ad=ad+Math.imul(na,ld)|0;A=(A=A+Math.imul(na,Vc)|0)+Math.imul(Ga,ld)|0;bd=bd+Math.imul(Ga,Vc)|0;var jC=(H+(ad+Math.imul(wa,od)|0)|0)+((8191&(A=(A=A+Math.imul(wa,W)|0)+Math.imul(Y,od)|0))<<13)|0;H=((bd+Math.imul(Y,W)|0)+(A>>>13)|0)+(jC>>>
26)|0;jC&=67108863;ad=Math.imul(ta,Zb);A=(A=Math.imul(ta,Pb))+Math.imul(ma,Zb)|0;bd=Math.imul(ma,Pb);ad=ad+Math.imul(X,Za)|0;A=(A=A+Math.imul(X,sc)|0)+Math.imul(Da,Za)|0;bd=bd+Math.imul(Da,sc)|0;ad=ad+Math.imul(sa,Db)|0;A=(A=A+Math.imul(sa,Lc)|0)+Math.imul(Z,Db)|0;bd=bd+Math.imul(Z,Lc)|0;ad=ad+Math.imul(Bb,wc)|0;A=(A=A+Math.imul(Bb,Qc)|0)+Math.imul(Sa,wc)|0;bd=bd+Math.imul(Sa,Qc)|0;ad=ad+Math.imul(eb,Xc)|0;A=(A=A+Math.imul(eb,Wc)|0)+Math.imul(Va,Xc)|0;bd=bd+Math.imul(Va,Wc)|0;ad=ad+Math.imul(Oa,hd)|
0;A=(A=A+Math.imul(Oa,Yc)|0)+Math.imul(ia,hd)|0;bd=bd+Math.imul(ia,Yc)|0;ad=ad+Math.imul(da,ld)|0;A=(A=A+Math.imul(da,Vc)|0)+Math.imul(ea,ld)|0;bd=bd+Math.imul(ea,Vc)|0;ad=ad+Math.imul(na,od)|0;A=(A=A+Math.imul(na,W)|0)+Math.imul(Ga,od)|0;bd=bd+Math.imul(Ga,W)|0;var kC=(H+(ad+Math.imul(wa,cd)|0)|0)+((8191&(A=(A=A+Math.imul(wa,af)|0)+Math.imul(Y,cd)|0))<<13)|0;H=((bd+Math.imul(Y,af)|0)+(A>>>13)|0)+(kC>>>26)|0;kC&=67108863;ad=Math.imul(L,Zb);A=(A=Math.imul(L,Pb))+Math.imul(Pa,Zb)|0;bd=Math.imul(Pa,
Pb);ad=ad+Math.imul(ta,Za)|0;A=(A=A+Math.imul(ta,sc)|0)+Math.imul(ma,Za)|0;bd=bd+Math.imul(ma,sc)|0;ad=ad+Math.imul(X,Db)|0;A=(A=A+Math.imul(X,Lc)|0)+Math.imul(Da,Db)|0;bd=bd+Math.imul(Da,Lc)|0;ad=ad+Math.imul(sa,wc)|0;A=(A=A+Math.imul(sa,Qc)|0)+Math.imul(Z,wc)|0;bd=bd+Math.imul(Z,Qc)|0;ad=ad+Math.imul(Bb,Xc)|0;A=(A=A+Math.imul(Bb,Wc)|0)+Math.imul(Sa,Xc)|0;bd=bd+Math.imul(Sa,Wc)|0;ad=ad+Math.imul(eb,hd)|0;A=(A=A+Math.imul(eb,Yc)|0)+Math.imul(Va,hd)|0;bd=bd+Math.imul(Va,Yc)|0;ad=ad+Math.imul(Oa,ld)|
0;A=(A=A+Math.imul(Oa,Vc)|0)+Math.imul(ia,ld)|0;bd=bd+Math.imul(ia,Vc)|0;ad=ad+Math.imul(da,od)|0;A=(A=A+Math.imul(da,W)|0)+Math.imul(ea,od)|0;bd=bd+Math.imul(ea,W)|0;ad=ad+Math.imul(na,cd)|0;A=(A=A+Math.imul(na,af)|0)+Math.imul(Ga,cd)|0;bd=bd+Math.imul(Ga,af)|0;wa=(H+(ad+Math.imul(wa,U)|0)|0)+((8191&(A=(A=A+Math.imul(wa,zc)|0)+Math.imul(Y,U)|0))<<13)|0;H=((bd+Math.imul(Y,zc)|0)+(A>>>13)|0)+(wa>>>26)|0;wa&=67108863;ad=Math.imul(L,Za);A=(A=Math.imul(L,sc))+Math.imul(Pa,Za)|0;bd=Math.imul(Pa,sc);ad=
ad+Math.imul(ta,Db)|0;A=(A=A+Math.imul(ta,Lc)|0)+Math.imul(ma,Db)|0;bd=bd+Math.imul(ma,Lc)|0;ad=ad+Math.imul(X,wc)|0;A=(A=A+Math.imul(X,Qc)|0)+Math.imul(Da,wc)|0;bd=bd+Math.imul(Da,Qc)|0;ad=ad+Math.imul(sa,Xc)|0;A=(A=A+Math.imul(sa,Wc)|0)+Math.imul(Z,Xc)|0;bd=bd+Math.imul(Z,Wc)|0;ad=ad+Math.imul(Bb,hd)|0;A=(A=A+Math.imul(Bb,Yc)|0)+Math.imul(Sa,hd)|0;bd=bd+Math.imul(Sa,Yc)|0;ad=ad+Math.imul(eb,ld)|0;A=(A=A+Math.imul(eb,Vc)|0)+Math.imul(Va,ld)|0;bd=bd+Math.imul(Va,Vc)|0;ad=ad+Math.imul(Oa,od)|0;A=(A=
A+Math.imul(Oa,W)|0)+Math.imul(ia,od)|0;bd=bd+Math.imul(ia,W)|0;ad=ad+Math.imul(da,cd)|0;A=(A=A+Math.imul(da,af)|0)+Math.imul(ea,cd)|0;bd=bd+Math.imul(ea,af)|0;Y=(H+(ad+Math.imul(na,U)|0)|0)+((8191&(A=(A=A+Math.imul(na,zc)|0)+Math.imul(Ga,U)|0))<<13)|0;H=((bd+Math.imul(Ga,zc)|0)+(A>>>13)|0)+(Y>>>26)|0;Y&=67108863;ad=Math.imul(L,Db);A=(A=Math.imul(L,Lc))+Math.imul(Pa,Db)|0;bd=Math.imul(Pa,Lc);ad=ad+Math.imul(ta,wc)|0;A=(A=A+Math.imul(ta,Qc)|0)+Math.imul(ma,wc)|0;bd=bd+Math.imul(ma,Qc)|0;ad=ad+Math.imul(X,
Xc)|0;A=(A=A+Math.imul(X,Wc)|0)+Math.imul(Da,Xc)|0;bd=bd+Math.imul(Da,Wc)|0;ad=ad+Math.imul(sa,hd)|0;A=(A=A+Math.imul(sa,Yc)|0)+Math.imul(Z,hd)|0;bd=bd+Math.imul(Z,Yc)|0;ad=ad+Math.imul(Bb,ld)|0;A=(A=A+Math.imul(Bb,Vc)|0)+Math.imul(Sa,ld)|0;bd=bd+Math.imul(Sa,Vc)|0;ad=ad+Math.imul(eb,od)|0;A=(A=A+Math.imul(eb,W)|0)+Math.imul(Va,od)|0;bd=bd+Math.imul(Va,W)|0;ad=ad+Math.imul(Oa,cd)|0;A=(A=A+Math.imul(Oa,af)|0)+Math.imul(ia,cd)|0;bd=bd+Math.imul(ia,af)|0;na=(H+(ad+Math.imul(da,U)|0)|0)+((8191&(A=(A=
A+Math.imul(da,zc)|0)+Math.imul(ea,U)|0))<<13)|0;H=((bd+Math.imul(ea,zc)|0)+(A>>>13)|0)+(na>>>26)|0;na&=67108863;ad=Math.imul(L,wc);A=(A=Math.imul(L,Qc))+Math.imul(Pa,wc)|0;bd=Math.imul(Pa,Qc);ad=ad+Math.imul(ta,Xc)|0;A=(A=A+Math.imul(ta,Wc)|0)+Math.imul(ma,Xc)|0;bd=bd+Math.imul(ma,Wc)|0;ad=ad+Math.imul(X,hd)|0;A=(A=A+Math.imul(X,Yc)|0)+Math.imul(Da,hd)|0;bd=bd+Math.imul(Da,Yc)|0;ad=ad+Math.imul(sa,ld)|0;A=(A=A+Math.imul(sa,Vc)|0)+Math.imul(Z,ld)|0;bd=bd+Math.imul(Z,Vc)|0;ad=ad+Math.imul(Bb,od)|0;
A=(A=A+Math.imul(Bb,W)|0)+Math.imul(Sa,od)|0;bd=bd+Math.imul(Sa,W)|0;ad=ad+Math.imul(eb,cd)|0;A=(A=A+Math.imul(eb,af)|0)+Math.imul(Va,cd)|0;bd=bd+Math.imul(Va,af)|0;Ga=(H+(ad+Math.imul(Oa,U)|0)|0)+((8191&(A=(A=A+Math.imul(Oa,zc)|0)+Math.imul(ia,U)|0))<<13)|0;H=((bd+Math.imul(ia,zc)|0)+(A>>>13)|0)+(Ga>>>26)|0;Ga&=67108863;ad=Math.imul(L,Xc);A=(A=Math.imul(L,Wc))+Math.imul(Pa,Xc)|0;bd=Math.imul(Pa,Wc);ad=ad+Math.imul(ta,hd)|0;A=(A=A+Math.imul(ta,Yc)|0)+Math.imul(ma,hd)|0;bd=bd+Math.imul(ma,Yc)|0;ad=
ad+Math.imul(X,ld)|0;A=(A=A+Math.imul(X,Vc)|0)+Math.imul(Da,ld)|0;bd=bd+Math.imul(Da,Vc)|0;ad=ad+Math.imul(sa,od)|0;A=(A=A+Math.imul(sa,W)|0)+Math.imul(Z,od)|0;bd=bd+Math.imul(Z,W)|0;ad=ad+Math.imul(Bb,cd)|0;A=(A=A+Math.imul(Bb,af)|0)+Math.imul(Sa,cd)|0;bd=bd+Math.imul(Sa,af)|0;da=(H+(ad+Math.imul(eb,U)|0)|0)+((8191&(A=(A=A+Math.imul(eb,zc)|0)+Math.imul(Va,U)|0))<<13)|0;H=((bd+Math.imul(Va,zc)|0)+(A>>>13)|0)+(da>>>26)|0;da&=67108863;ad=Math.imul(L,hd);A=(A=Math.imul(L,Yc))+Math.imul(Pa,hd)|0;bd=Math.imul(Pa,
Yc);ad=ad+Math.imul(ta,ld)|0;A=(A=A+Math.imul(ta,Vc)|0)+Math.imul(ma,ld)|0;bd=bd+Math.imul(ma,Vc)|0;ad=ad+Math.imul(X,od)|0;A=(A=A+Math.imul(X,W)|0)+Math.imul(Da,od)|0;bd=bd+Math.imul(Da,W)|0;ad=ad+Math.imul(sa,cd)|0;A=(A=A+Math.imul(sa,af)|0)+Math.imul(Z,cd)|0;bd=bd+Math.imul(Z,af)|0;ea=(H+(ad+Math.imul(Bb,U)|0)|0)+((8191&(A=(A=A+Math.imul(Bb,zc)|0)+Math.imul(Sa,U)|0))<<13)|0;H=((bd+Math.imul(Sa,zc)|0)+(A>>>13)|0)+(ea>>>26)|0;ea&=67108863;ad=Math.imul(L,ld);A=(A=Math.imul(L,Vc))+Math.imul(Pa,ld)|
0;bd=Math.imul(Pa,Vc);ad=ad+Math.imul(ta,od)|0;A=(A=A+Math.imul(ta,W)|0)+Math.imul(ma,od)|0;bd=bd+Math.imul(ma,W)|0;ad=ad+Math.imul(X,cd)|0;A=(A=A+Math.imul(X,af)|0)+Math.imul(Da,cd)|0;bd=bd+Math.imul(Da,af)|0;Oa=(H+(ad+Math.imul(sa,U)|0)|0)+((8191&(A=(A=A+Math.imul(sa,zc)|0)+Math.imul(Z,U)|0))<<13)|0;H=((bd+Math.imul(Z,zc)|0)+(A>>>13)|0)+(Oa>>>26)|0;Oa&=67108863;ad=Math.imul(L,od);A=(A=Math.imul(L,W))+Math.imul(Pa,od)|0;bd=Math.imul(Pa,W);ad=ad+Math.imul(ta,cd)|0;A=(A=A+Math.imul(ta,af)|0)+Math.imul(ma,
cd)|0;bd=bd+Math.imul(ma,af)|0;ia=(H+(ad+Math.imul(X,U)|0)|0)+((8191&(A=(A=A+Math.imul(X,zc)|0)+Math.imul(Da,U)|0))<<13)|0;H=((bd+Math.imul(Da,zc)|0)+(A>>>13)|0)+(ia>>>26)|0;ia&=67108863;ad=Math.imul(L,cd);A=(A=Math.imul(L,af))+Math.imul(Pa,cd)|0;bd=Math.imul(Pa,af);eb=(H+(ad+Math.imul(ta,U)|0)|0)+((8191&(A=(A=A+Math.imul(ta,zc)|0)+Math.imul(ma,U)|0))<<13)|0;H=((bd+Math.imul(ma,zc)|0)+(A>>>13)|0)+(eb>>>26)|0;eb&=67108863;Va=(H+Math.imul(L,U)|0)+((8191&(A=(A=Math.imul(L,zc))+Math.imul(Pa,U)|0))<<13)|
0;return H=(Math.imul(Pa,zc)+(A>>>13)|0)+(Va>>>26)|0,Va&=67108863,T[0]=pi,T[1]=qi,T[2]=ei,T[3]=Zh,T[4]=xi,T[5]=kr,T[6]=lr,T[7]=jC,T[8]=kC,T[9]=wa,T[10]=Y,T[11]=na,T[12]=Ga,T[13]=da,T[14]=ea,T[15]=Oa,T[16]=ia,T[17]=eb,T[18]=Va,0!==H&&(T[19]=H,F.length++),F};Math.imul||(u=q);a.prototype.mulTo=function(A,H){var F=(this||hb).length+A.length;if(10===(this||hb).length&&10===A.length)A=u(this||hb,A,H);else if(63>F)A=q(this||hb,A,H);else if(1024>F){F=this||hb;H.negative=A.negative^F.negative;H.length=F.length+
A.length;for(var L=0,U=0,T=0;T<H.length-1;T++){var Y=U;U=0;L&=67108863;for(var wa=Math.min(T,A.length-1),Ga=Math.max(0,T-F.length+1);Ga<=wa;Ga++){var na=(0|F.words[T-Ga])*(0|A.words[Ga]),ea=67108863&na;L=67108863&(ea=ea+L|0);U+=(Y=(Y=Y+(na/67108864|0)|0)+(ea>>>26)|0)>>>26;Y&=67108863}H.words[T]=L;L=Y}A=(0!==L?H.words[T]=L:H.length--,H.strip())}else F=this||hb,A=(new r).mulp(F,A,H);return A};r.prototype.makeRBT=function(A){for(var H=Array(A),F=a.prototype._countBits(A)-1,L=0;L<A;L++)H[L]=this.revBin(L,
F,A);return H};r.prototype.revBin=function(A,H,F){if(0===A||A===F-1)return A;for(var L=F=0;L<H;L++)F|=(1&A)<<H-L-1,A>>=1;return F};r.prototype.permute=function(A,H,F,L,U,T){for(var Y=0;Y<T;Y++)L[Y]=H[A[Y]],U[Y]=F[A[Y]]};r.prototype.transform=function(A,H,F,L,U,T){this.permute(T,A,H,F,L,U);for(A=1;A<U;A<<=1){H=A<<1;T=Math.cos(2*Math.PI/H);for(var Y=Math.sin(2*Math.PI/H),wa=0;wa<U;wa+=H)for(var Ga=T,na=Y,ea=0;ea<A;ea++){var da=F[wa+ea],ia=L[wa+ea],Oa=F[wa+ea+A],Va=L[wa+ea+A],eb=Ga*Oa-na*Va;Va=Ga*Va+
na*Oa;Oa=eb;F[wa+ea]=da+Oa;L[wa+ea]=ia+Va;F[wa+ea+A]=da-Oa;L[wa+ea+A]=ia-Va;ea!==H&&(eb=T*Ga-Y*na,na=T*na+Y*Ga,Ga=eb)}}};r.prototype.guessLen13b=function(A,H){A=1|Math.max(H,A);H=1&A;var F=0;for(A=A/2|0;A;A>>>=1)F++;return 1<<F+1+H};r.prototype.conjugate=function(A,H,F){if(!(1>=F))for(var L=0;L<F/2;L++){var U=A[L];A[L]=A[F-L-1];A[F-L-1]=U;U=H[L];H[L]=-H[F-L-1];H[F-L-1]=-U}};r.prototype.normalize13b=function(A,H){for(var F=0,L=0;L<H/2;L++)F=8192*Math.round(A[2*L+1]/H)+Math.round(A[2*L]/H)+F,A[L]=67108863&
F,F=67108864>F?0:F/67108864|0;return A};r.prototype.convert13b=function(A,H,F,L){for(var U=0,T=0;T<H;T++)U+=0|A[T],F[2*T]=8191&U,U>>>=13,F[2*T+1]=8191&U,U>>>=13;for(T=2*H;T<L;++T)F[T]=0;d(0===U);d(0==(-8192&U))};r.prototype.stub=function(A){for(var H=Array(A),F=0;F<A;F++)H[F]=0;return H};r.prototype.mulp=function(A,H,F){var L=2*this.guessLen13b(A.length,H.length),U=this.makeRBT(L),T=this.stub(L),Y=Array(L),wa=Array(L),Ga=Array(L),na=Array(L),ea=Array(L),da=Array(L),ia=F.words;ia.length=L;this.convert13b(A.words,
A.length,Y,L);this.convert13b(H.words,H.length,na,L);this.transform(Y,T,wa,Ga,L,U);this.transform(na,T,ea,da,L,U);for(Y=0;Y<L;Y++)na=wa[Y]*ea[Y]-Ga[Y]*da[Y],Ga[Y]=wa[Y]*da[Y]+Ga[Y]*ea[Y],wa[Y]=na;return this.conjugate(wa,Ga,L),this.transform(wa,Ga,ia,T,L,U),this.conjugate(ia,T,L),this.normalize13b(ia,L),F.negative=A.negative^H.negative,F.length=A.length+H.length,F.strip()};a.prototype.mul=function(A){var H=new a(null);return H.words=Array((this||hb).length+A.length),this.mulTo(A,H)};a.prototype.mulf=
function(A){var H=new a(null);H.words=Array((this||hb).length+A.length);var F=this||hb;return(new r).mulp(F,A,H)};a.prototype.imul=function(A){return this.clone().mulTo(A,this||hb)};a.prototype.imuln=function(A){d("number"==typeof A);d(67108864>A);for(var H=0,F=0;F<(this||hb).length;F++){var L=(0|(this||hb).words[F])*A,U=(67108863&L)+(67108863&H);H>>=26;H+=L/67108864|0;H+=U>>>26;(this||hb).words[F]=67108863&U}return 0!==H&&((this||hb).words[F]=H,(this||hb).length++),this||hb};a.prototype.muln=function(A){return this.clone().imuln(A)};
a.prototype.sqr=function(){return this.mul(this||hb)};a.prototype.isqr=function(){return this.imul(this.clone())};a.prototype.pow=function(A){for(var H=Array(A.bitLength()),F=0;F<H.length;F++){var L=F%26;H[F]=(A.words[F/26|0]&1<<L)>>>L}if(0===H.length)return new a(1);A=this||hb;for(F=0;F<H.length&&0===H[F];F++,A=A.sqr());if(++F<H.length)for(L=A.sqr();F<H.length;F++,L=L.sqr())0!==H[F]&&(A=A.mul(L));return A};a.prototype.iushln=function(A){d("number"==typeof A&&0<=A);var H=A%26,F=(A-H)/26,L=67108863>>>
26-H<<26-H;if(0!==H){var U=0;for(A=0;A<(this||hb).length;A++){var T=(this||hb).words[A]&L;(this||hb).words[A]=(0|(this||hb).words[A])-T<<H|U;U=T>>>26-H}U&&((this||hb).words[A]=U,(this||hb).length++)}if(0!==F){for(A=(this||hb).length-1;0<=A;A--)(this||hb).words[A+F]=(this||hb).words[A];for(A=0;A<F;A++)(this||hb).words[A]=0;(this||hb).length+=F}return this.strip()};a.prototype.ishln=function(A){return d(0===(this||hb).negative),this.iushln(A)};a.prototype.iushrn=function(A,H,F){d("number"==typeof A&&
0<=A);H=H?(H-H%26)/26:0;var L=A%26,U=Math.min((A-L)/26,(this||hb).length);A=67108863^67108863>>>L<<L;if(H-=U,H=Math.max(0,H),F){for(var T=0;T<U;T++)F.words[T]=(this||hb).words[T];F.length=U}if(0!==U)if((this||hb).length>U)for((this||hb).length-=U,T=0;T<(this||hb).length;T++)(this||hb).words[T]=(this||hb).words[T+U];else(this||hb).words[0]=0,(this||hb).length=1;U=0;for(T=(this||hb).length-1;0<=T&&(0!==U||T>=H);T--){var Y=0|(this||hb).words[T];(this||hb).words[T]=U<<26-L|Y>>>L;U=Y&A}return F&&0!==U&&
(F.words[F.length++]=U),0===(this||hb).length&&((this||hb).words[0]=0,(this||hb).length=1),this.strip()};a.prototype.ishrn=function(A,H,F){return d(0===(this||hb).negative),this.iushrn(A,H,F)};a.prototype.shln=function(A){return this.clone().ishln(A)};a.prototype.ushln=function(A){return this.clone().iushln(A)};a.prototype.shrn=function(A){return this.clone().ishrn(A)};a.prototype.ushrn=function(A){return this.clone().iushrn(A)};a.prototype.testn=function(A){d("number"==typeof A&&0<=A);var H=A%26;
A=(A-H)/26;return!((this||hb).length<=A)&&!!((this||hb).words[A]&1<<H)};a.prototype.imaskn=function(A){d("number"==typeof A&&0<=A);var H=A%26;A=(A-H)/26;if(d(0===(this||hb).negative,"imaskn works only with positive numbers"),(this||hb).length<=A)return this||hb;if(0!==H&&A++,(this||hb).length=Math.min(A,(this||hb).length),0!==H)(this||hb).words[(this||hb).length-1]&=67108863^67108863>>>H<<H;return this.strip()};a.prototype.maskn=function(A){return this.clone().imaskn(A)};a.prototype.iaddn=function(A){return d("number"==
typeof A),d(67108864>A),0>A?this.isubn(-A):0!==(this||hb).negative?1===(this||hb).length&&(0|(this||hb).words[0])<A?((this||hb).words[0]=A-(0|(this||hb).words[0]),(this||hb).negative=0,this||hb):((this||hb).negative=0,this.isubn(A),(this||hb).negative=1,this||hb):this._iaddn(A)};a.prototype._iaddn=function(A){(this||hb).words[0]+=A;for(A=0;A<(this||hb).length&&67108864<=(this||hb).words[A];A++)(this||hb).words[A]-=67108864,A===(this||hb).length-1?(this||hb).words[A+1]=1:(this||hb).words[A+1]++;return(this||
hb).length=Math.max((this||hb).length,A+1),this||hb};a.prototype.isubn=function(A){if(d("number"==typeof A),d(67108864>A),0>A)return this.iaddn(-A);if(0!==(this||hb).negative)return(this||hb).negative=0,this.iaddn(A),(this||hb).negative=1,this||hb;if((this||hb).words[0]-=A,1===(this||hb).length&&0>(this||hb).words[0])(this||hb).words[0]=-(this||hb).words[0],(this||hb).negative=1;else for(A=0;A<(this||hb).length&&0>(this||hb).words[A];A++)(this||hb).words[A]+=67108864,--(this||hb).words[A+1];return this.strip()};
a.prototype.addn=function(A){return this.clone().iaddn(A)};a.prototype.subn=function(A){return this.clone().isubn(A)};a.prototype.iabs=function(){return(this||hb).negative=0,this||hb};a.prototype.abs=function(){return this.clone().iabs()};a.prototype._ishlnsubmul=function(A,H,F){var L;this._expand(A.length+F);var U=0;for(L=0;L<A.length;L++){var T=(0|(this||hb).words[L+F])+U;U=(0|A.words[L])*H;U=((T-=67108863&U)>>26)-(U/67108864|0);(this||hb).words[L+F]=67108863&T}for(;L<(this||hb).length-F;L++)U=
(T=(0|(this||hb).words[L+F])+U)>>26,(this||hb).words[L+F]=67108863&T;if(0===U)return this.strip();d(-1===U);for(L=U=0;L<(this||hb).length;L++)U=(T=-(0|(this||hb).words[L])+U)>>26,(this||hb).words[L]=67108863&T;return(this||hb).negative=1,this.strip()};a.prototype._wordDiv=function(A,H){var F=((this||hb).length,A.length),L=this.clone(),U=0|A.words[A.length-1];0!==(F=26-this._countBits(U))&&(A=A.ushln(F),L.iushln(F),U=0|A.words[A.length-1]);var T,Y=L.length-A.length;if("mod"!==H){(T=new a(null)).length=
Y+1;T.words=Array(T.length);for(var wa=0;wa<T.length;wa++)T.words[wa]=0}wa=L.clone()._ishlnsubmul(A,1,Y);0===wa.negative&&(L=wa,T&&(T.words[Y]=1));for(--Y;0<=Y;Y--){wa=67108864*(0|L.words[A.length+Y])+(0|L.words[A.length+Y-1]);wa=Math.min(wa/U|0,67108863);for(L._ishlnsubmul(A,wa,Y);0!==L.negative;)wa--,L.negative=0,L._ishlnsubmul(A,1,Y),L.isZero()||(L.negative^=1);T&&(T.words[Y]=wa)}return T&&T.strip(),L.strip(),"div"!==H&&0!==F&&L.iushrn(F),{div:T||null,mod:L}};a.prototype.divmod=function(A,H,F){return d(!A.isZero()),
this.isZero()?{div:new a(0),mod:new a(0)}:0!==(this||hb).negative&&0===A.negative?(T=this.neg().divmod(A,H),"mod"!==H&&(L=T.div.neg()),"div"!==H&&(U=T.mod.neg(),F&&0!==U.negative&&U.iadd(A)),{div:L,mod:U}):0===(this||hb).negative&&0!==A.negative?(T=this.divmod(A.neg(),H),"mod"!==H&&(L=T.div.neg()),{div:L,mod:T.mod}):0!=((this||hb).negative&A.negative)?(T=this.neg().divmod(A.neg(),H),"div"!==H&&(U=T.mod.neg(),F&&0!==U.negative&&U.isub(A)),{div:T.div,mod:U}):A.length>(this||hb).length||0>this.cmp(A)?
{div:new a(0),mod:this||hb}:1===A.length?"div"===H?{div:this.divn(A.words[0]),mod:null}:"mod"===H?{div:null,mod:new a(this.modn(A.words[0]))}:{div:this.divn(A.words[0]),mod:new a(this.modn(A.words[0]))}:this._wordDiv(A,H);var L,U,T};a.prototype.div=function(A){return this.divmod(A,"div",!1).div};a.prototype.mod=function(A){return this.divmod(A,"mod",!1).mod};a.prototype.umod=function(A){return this.divmod(A,"mod",!0).mod};a.prototype.divRound=function(A){var H=this.divmod(A);if(H.mod.isZero())return H.div;
var F=0!==H.div.negative?H.mod.isub(A):H.mod,L=A.ushrn(1);A=A.andln(1);F=F.cmp(L);return 0>F||1===A&&0===F?H.div:0!==H.div.negative?H.div.isubn(1):H.div.iaddn(1)};a.prototype.modn=function(A){d(67108863>=A);for(var H=67108864%A,F=0,L=(this||hb).length-1;0<=L;L--)F=(H*F+(0|(this||hb).words[L]))%A;return F};a.prototype.idivn=function(A){d(67108863>=A);for(var H=0,F=(this||hb).length-1;0<=F;F--)H=(0|(this||hb).words[F])+67108864*H,(this||hb).words[F]=H/A|0,H%=A;return this.strip()};a.prototype.divn=
function(A){return this.clone().idivn(A)};a.prototype.egcd=function(A){d(0===A.negative);d(!A.isZero());var H=this||hb,F=A.clone();H=0!==H.negative?H.umod(A):H.clone();A=new a(1);for(var L=new a(0),U=new a(0),T=new a(1),Y=0;H.isEven()&&F.isEven();)H.iushrn(1),F.iushrn(1),++Y;for(var wa=F.clone(),Ga=H.clone();!H.isZero();){for(var na=0,ea=1;0==(H.words[0]&ea)&&26>na;++na,ea<<=1);if(0<na)for(H.iushrn(na);0<na--;)(A.isOdd()||L.isOdd())&&(A.iadd(wa),L.isub(Ga)),A.iushrn(1),L.iushrn(1);na=0;for(ea=1;0==
(F.words[0]&ea)&&26>na;++na,ea<<=1);if(0<na)for(F.iushrn(na);0<na--;)(U.isOdd()||T.isOdd())&&(U.iadd(wa),T.isub(Ga)),U.iushrn(1),T.iushrn(1);0<=H.cmp(F)?(H.isub(F),A.isub(U),L.isub(T)):(F.isub(H),U.isub(A),T.isub(L))}return{a:U,b:T,gcd:F.iushln(Y)}};a.prototype._invmp=function(A){d(0===A.negative);d(!A.isZero());var H=this||hb,F=A.clone();H=0!==H.negative?H.umod(A):H.clone();for(var L,U=new a(1),T=new a(0),Y=F.clone();0<H.cmpn(1)&&0<F.cmpn(1);){for(var wa=0,Ga=1;0==(H.words[0]&Ga)&&26>wa;++wa,Ga<<=
1);if(0<wa)for(H.iushrn(wa);0<wa--;)U.isOdd()&&U.iadd(Y),U.iushrn(1);wa=0;for(Ga=1;0==(F.words[0]&Ga)&&26>wa;++wa,Ga<<=1);if(0<wa)for(F.iushrn(wa);0<wa--;)T.isOdd()&&T.iadd(Y),T.iushrn(1);0<=H.cmp(F)?(H.isub(F),U.isub(T)):(F.isub(H),T.isub(U))}return 0>(L=0===H.cmpn(1)?U:T).cmpn(0)&&L.iadd(A),L};a.prototype.gcd=function(A){if(this.isZero())return A.abs();if(A.isZero())return this.abs();var H=this.clone();A=A.clone();H.negative=0;for(var F=A.negative=0;H.isEven()&&A.isEven();F++)H.iushrn(1),A.iushrn(1);
for(;;){for(;H.isEven();)H.iushrn(1);for(;A.isEven();)A.iushrn(1);var L=H.cmp(A);if(0>L)L=H,H=A,A=L;else if(0===L||0===A.cmpn(1))break;H.isub(A)}return A.iushln(F)};a.prototype.invm=function(A){return this.egcd(A).a.umod(A)};a.prototype.isEven=function(){return 0==(1&(this||hb).words[0])};a.prototype.isOdd=function(){return 1==(1&(this||hb).words[0])};a.prototype.andln=function(A){return(this||hb).words[0]&A};a.prototype.bincn=function(A){d("number"==typeof A);var H=A%26;A=(A-H)/26;H=1<<H;if((this||
hb).length<=A)return this._expand(A+1),(this||hb).words[A]|=H,this||hb;for(;0!==H&&A<(this||hb).length;A++){var F=0|(this||hb).words[A];H=(F+=H)>>>26;F&=67108863;(this||hb).words[A]=F}return 0!==H&&((this||hb).words[A]=H,(this||hb).length++),this||hb};a.prototype.isZero=function(){return 1===(this||hb).length&&0===(this||hb).words[0]};a.prototype.cmpn=function(A){var H=0>A;if(0!==(this||hb).negative&&!H)return-1;if(0===(this||hb).negative&&H)return 1;(this.strip(),1<(this||hb).length)?A=1:(H&&(A=
-A),d(67108863>=A,"Number is too big"),H=0|(this||hb).words[0],A=H===A?0:H<A?-1:1);return 0!==(this||hb).negative?0|-A:A};a.prototype.cmp=function(A){if(0!==(this||hb).negative&&0===A.negative)return-1;if(0===(this||hb).negative&&0!==A.negative)return 1;A=this.ucmp(A);return 0!==(this||hb).negative?0|-A:A};a.prototype.ucmp=function(A){if((this||hb).length>A.length)return 1;if((this||hb).length<A.length)return-1;for(var H=0,F=(this||hb).length-1;0<=F;F--){var L=0|(this||hb).words[F],U=0|A.words[F];
if(L!==U){L<U?H=-1:L>U&&(H=1);break}}return H};a.prototype.gtn=function(A){return 1===this.cmpn(A)};a.prototype.gt=function(A){return 1===this.cmp(A)};a.prototype.gten=function(A){return 0<=this.cmpn(A)};a.prototype.gte=function(A){return 0<=this.cmp(A)};a.prototype.ltn=function(A){return-1===this.cmpn(A)};a.prototype.lt=function(A){return-1===this.cmp(A)};a.prototype.lten=function(A){return 0>=this.cmpn(A)};a.prototype.lte=function(A){return 0>=this.cmp(A)};a.prototype.eqn=function(A){return 0===
this.cmpn(A)};a.prototype.eq=function(A){return 0===this.cmp(A)};a.red=function(A){return new K(A)};a.prototype.toRed=function(A){return d(!(this||hb).red,"Already a number in reduction context"),d(0===(this||hb).negative,"red works only with positives"),A.convertTo(this||hb)._forceRed(A)};a.prototype.fromRed=function(){return d((this||hb).red,"fromRed works only with numbers in reduction context"),(this||hb).red.convertFrom(this||hb)};a.prototype._forceRed=function(A){return(this||hb).red=A,this||
hb};a.prototype.forceRed=function(A){return d(!(this||hb).red,"Already a number in reduction context"),this._forceRed(A)};a.prototype.redAdd=function(A){return d((this||hb).red,"redAdd works only with red numbers"),(this||hb).red.add(this||hb,A)};a.prototype.redIAdd=function(A){return d((this||hb).red,"redIAdd works only with red numbers"),(this||hb).red.iadd(this||hb,A)};a.prototype.redSub=function(A){return d((this||hb).red,"redSub works only with red numbers"),(this||hb).red.sub(this||hb,A)};a.prototype.redISub=
function(A){return d((this||hb).red,"redISub works only with red numbers"),(this||hb).red.isub(this||hb,A)};a.prototype.redShl=function(A){return d((this||hb).red,"redShl works only with red numbers"),(this||hb).red.shl(this||hb,A)};a.prototype.redMul=function(A){return d((this||hb).red,"redMul works only with red numbers"),(this||hb).red._verify2(this||hb,A),(this||hb).red.mul(this||hb,A)};a.prototype.redIMul=function(A){return d((this||hb).red,"redMul works only with red numbers"),(this||hb).red._verify2(this||
hb,A),(this||hb).red.imul(this||hb,A)};a.prototype.redSqr=function(){return d((this||hb).red,"redSqr works only with red numbers"),(this||hb).red._verify1(this||hb),(this||hb).red.sqr(this||hb)};a.prototype.redISqr=function(){return d((this||hb).red,"redISqr works only with red numbers"),(this||hb).red._verify1(this||hb),(this||hb).red.isqr(this||hb)};a.prototype.redSqrt=function(){return d((this||hb).red,"redSqrt works only with red numbers"),(this||hb).red._verify1(this||hb),(this||hb).red.sqrt(this||
hb)};a.prototype.redInvm=function(){return d((this||hb).red,"redInvm works only with red numbers"),(this||hb).red._verify1(this||hb),(this||hb).red.invm(this||hb)};a.prototype.redNeg=function(){return d((this||hb).red,"redNeg works only with red numbers"),(this||hb).red._verify1(this||hb),(this||hb).red.neg(this||hb)};a.prototype.redPow=function(A){return d((this||hb).red&&!A.red,"redPow(normalNum)"),(this||hb).red._verify1(this||hb),(this||hb).red.pow(this||hb,A)};var B={k256:null,p224:null,p192:null,
p25519:null};v.prototype._tmp=function(){var A=new a(null);return A.words=Array(Math.ceil((this||hb).n/13)),A};v.prototype.ireduce=function(A){do{this.split(A,(this||hb).tmp);var H=(A=(A=this.imulK(A)).iadd((this||hb).tmp)).bitLength()}while(H>(this||hb).n);H=H<(this||hb).n?-1:A.ucmp((this||hb).p);return 0===H?(A.words[0]=0,A.length=1):0<H?A.isub((this||hb).p):A.strip(),A};v.prototype.split=function(A,H){A.iushrn((this||hb).n,0,H)};v.prototype.imulK=function(A){return A.imul((this||hb).k)};h(y,v);
y.prototype.split=function(A,H){for(var F=Math.min(A.length,9),L=0;L<F;L++)H.words[L]=A.words[L];if(H.length=F,9>=A.length)return A.words[0]=0,A.length=1,void 0;F=A.words[9];H.words[H.length++]=4194303&F;for(L=10;L<A.length;L++)H=0|A.words[L],A.words[L-10]=(4194303&H)<<4|F>>>22,F=H;F>>>=22;A.words[L-10]=F;0===F&&10<A.length?A.length-=10:A.length-=9};y.prototype.imulK=function(A){A.words[A.length]=0;A.words[A.length+1]=0;A.length+=2;for(var H=0,F=0;F<A.length;F++){var L=0|A.words[F];H+=977*L;A.words[F]=
67108863&H;H=64*L+(H/67108864|0)}return 0===A.words[A.length-1]&&(A.length--,0===A.words[A.length-1]&&A.length--),A};h(D,v);h(E,v);h(I,v);I.prototype.imulK=function(A){for(var H=0,F=0;F<A.length;F++){H=19*(0|A.words[F])+H;var L=67108863&H;H>>>=26;A.words[F]=L}return 0!==H&&(A.words[A.length++]=H),A};a._prime=function(A){if(B[A])return B[A];if("k256"===A)var H=new y;else if("p224"===A)H=new D;else if("p192"===A)H=new E;else{if("p25519"!==A)throw Error("Unknown prime "+A);H=new I}return B[A]=H,H};K.prototype._verify1=
function(A){d(0===A.negative,"red works only with positives");d(A.red,"red works only with red numbers")};K.prototype._verify2=function(A,H){d(0==(A.negative|H.negative),"red works only with positives");d(A.red&&A.red===H.red,"red works only with red numbers")};K.prototype.imod=function(A){return(this||hb).prime?(this||hb).prime.ireduce(A)._forceRed(this||hb):A.umod((this||hb).m)._forceRed(this||hb)};K.prototype.neg=function(A){return A.isZero()?A.clone():(this||hb).m.sub(A)._forceRed(this||hb)};
K.prototype.add=function(A,H){this._verify2(A,H);A=A.add(H);return 0<=A.cmp((this||hb).m)&&A.isub((this||hb).m),A._forceRed(this||hb)};K.prototype.iadd=function(A,H){this._verify2(A,H);A=A.iadd(H);return 0<=A.cmp((this||hb).m)&&A.isub((this||hb).m),A};K.prototype.sub=function(A,H){this._verify2(A,H);A=A.sub(H);return 0>A.cmpn(0)&&A.iadd((this||hb).m),A._forceRed(this||hb)};K.prototype.isub=function(A,H){this._verify2(A,H);A=A.isub(H);return 0>A.cmpn(0)&&A.iadd((this||hb).m),A};K.prototype.shl=function(A,
H){return this._verify1(A),this.imod(A.ushln(H))};K.prototype.imul=function(A,H){return this._verify2(A,H),this.imod(A.imul(H))};K.prototype.mul=function(A,H){return this._verify2(A,H),this.imod(A.mul(H))};K.prototype.isqr=function(A){return this.imul(A,A.clone())};K.prototype.sqr=function(A){return this.mul(A,A)};K.prototype.sqrt=function(A){if(A.isZero())return A.clone();var H=(this||hb).m.andln(3);if(d(1==H%2),3===H)return H=(this||hb).m.add(new a(1)).iushrn(2),this.pow(A,H);for(var F=(this||hb).m.subn(1),
L=0;!F.isZero()&&0===F.andln(1);)L++,F.iushrn(1);d(!F.isZero());H=(new a(1)).toRed(this||hb);var U=H.redNeg(),T=(this||hb).m.subn(1).iushrn(1),Y=(this||hb).m.bitLength();for(Y=(new a(2*Y*Y)).toRed(this||hb);0!==this.pow(Y,T).cmp(U);)Y.redIAdd(U);T=this.pow(Y,F);U=this.pow(A,F.addn(1).iushrn(1));A=this.pow(A,F);for(F=L;0!==A.cmp(H);){Y=A;for(L=0;0!==Y.cmp(H);L++)Y=Y.redSqr();d(L<F);T=this.pow(T,(new a(1)).iushln(F-L-1));U=U.redMul(T);T=T.redSqr();A=A.redMul(T);F=L}return U};K.prototype.invm=function(A){A=
A._invmp((this||hb).m);return 0!==A.negative?(A.negative=0,this.imod(A).redNeg()):this.imod(A)};K.prototype.pow=function(A,H){if(H.isZero())return(new a(1)).toRed(this||hb);if(0===H.cmpn(1))return A.clone();var F=Array(16);F[0]=(new a(1)).toRed(this||hb);F[1]=A;for(var L=2;L<F.length;L++)F[L]=this.mul(F[L-1],A);A=F[0];var U=0,T=0,Y=H.bitLength()%26;0===Y&&(Y=26);for(L=H.length-1;0<=L;L--){var wa=H.words[L];for(--Y;0<=Y;Y--){var Ga=wa>>Y&1;A!==F[0]&&(A=this.sqr(A));0!==Ga||0!==U?(U<<=1,U|=Ga,(4===
++T||0===L&&0===Y)&&(A=this.mul(A,F[U]),T=0,U=0)):T=0}Y=26}return A};K.prototype.convertTo=function(A){var H=A.umod((this||hb).m);return H===A?H.clone():H};K.prototype.convertFrom=function(A){A=A.clone();return A.red=null,A};a.mont=function(A){return new P(A)};h(P,K);P.prototype.convertTo=function(A){return this.imod(A.ushln((this||hb).shift))};P.prototype.convertFrom=function(A){A=this.imod(A.mul((this||hb).rinv));return A.red=null,A};P.prototype.imul=function(A,H){if(A.isZero()||H.isZero())return A.words[0]=
0,A.length=1,A;A=A.imul(H);H=A.maskn((this||hb).shift).mul((this||hb).minv).imaskn((this||hb).shift).mul((this||hb).m);H=A=A.isub(H).iushrn((this||hb).shift);return 0<=A.cmp((this||hb).m)?H=A.isub((this||hb).m):0>A.cmpn(0)&&(H=A.iadd((this||hb).m)),H._forceRed(this||hb)};P.prototype.mul=function(A,H){if(A.isZero()||H.isZero())return(new a(0))._forceRed(this||hb);A=A.mul(H);H=A.maskn((this||hb).shift).mul((this||hb).minv).imaskn((this||hb).shift).mul((this||hb).m);H=A=A.isub(H).iushrn((this||hb).shift);
return 0<=A.cmp((this||hb).m)?H=A.isub((this||hb).m):0>A.cmpn(0)&&(H=A.iadd((this||hb).m)),H._forceRed(this||hb)};P.prototype.invm=function(A){return this.imod(A._invmp((this||hb).m).mul((this||hb).r2))._forceRed(this||hb)}}(Faa,Eaa);var uk=Faa.exports,RJ,DT,Gaa=Object.freeze({}),$F="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global;if((RJ=function(p){return DT||(DT=new Fs(null)),DT.generate(p)}).Rand=Fs,Fs.prototype.generate=function(p){return this._rand(p)},Fs.prototype._rand=
function(p){if((this||$F).rand.getBytes)return(this||$F).rand.getBytes(p);p=new Uint8Array(p);for(var b=0;b<p.length;b++)p[b]=(this||$F).rand.getByte();return p},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?Fs.prototype._rand=function(p){p=new Uint8Array(p);return self.crypto.getRandomValues(p),p}:self.msCrypto&&self.msCrypto.getRandomValues?Fs.prototype._rand=function(p){p=new Uint8Array(p);return self.msCrypto.getRandomValues(p),p}:"object"==typeof window&&(Fs.prototype._rand=
function(){throw Error("Not implemented yet");});else try{if("function"!=typeof Gaa.randomBytes)throw Error("Not supported");Fs.prototype._rand=function(p){return Gaa.randomBytes(p)}}catch(p){}var q2="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,zv=uk,Aia=RJ;Gs.create=function(p){return new Gs(p)};Gs.prototype._randbelow=function(p){var b=p.bitLength();b=Math.ceil(b/8);do var d=new zv((this||q2).rand.generate(b));while(0<=d.cmp(p));return d};Gs.prototype._randrange=
function(p,b){b=b.sub(p);return p.add(this._randbelow(b))};Gs.prototype.test=function(p,b,d){var h=p.bitLength(),a=zv.mont(p),e=(new zv(1)).toRed(a);b||(b=Math.max(1,h/48|0));h=p.subn(1);for(var n=0;!h.testn(n);n++);p=p.shrn(n);for(var q=h.toRed(a);0<b;b--){var r=this._randrange(new zv(2),h);d&&d(r);r=r.toRed(a).redPow(p);if(0!==r.cmp(e)&&0!==r.cmp(q)){for(var v=1;v<n;v++){if(0===(r=r.redSqr()).cmp(e))return!1;if(0===r.cmp(q))break}if(v===n)return!1}}return!0};Gs.prototype.getDivisor=function(p,b){var d=
p.bitLength(),h=zv.mont(p),a=(new zv(1)).toRed(h);b||(b=Math.max(1,d/48|0));d=p.subn(1);for(var e=0;!d.testn(e);e++);for(var n=p.shrn(e),q=d.toRed(h);0<b;b--){var r=this._randrange(new zv(2),d),v=p.gcd(r);if(0!==v.cmpn(1))return v;r=r.toRed(h).redPow(n);if(0!==r.cmp(a)&&0!==r.cmp(q)){for(v=1;v<e;v++){if(0===(r=r.redSqr()).cmp(a))return r.fromRed().subn(1).gcd(p);if(0===r.cmp(q))break}if(v===e)return r.redSqr().fromRed().subn(1).gcd(p)}}return!1};var Bia=kt;NA.simpleSieve=tO;NA.fermatTest=vO;var Yl=
uk,Gia=new Yl(24),s2=new Gs,Cia=new Yl(1),wO=new Yl(2),Dia=new Yl(5),Eia=(new Yl(16),new Yl(8),new Yl(10)),Fia=new Yl(3),Hia=(new Yl(7),new Yl(11)),r2=new Yl(4),uO=(new Yl(12),null),fi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Tp=Yg.Buffer,Un=uk,Haa=new Gs,zsa=new Un(24),Asa=new Un(11),Bsa=new Un(10),Csa=new Un(3),Dsa=new Un(7),SJ={};Object.defineProperty(Wo.prototype,"verifyError",{enumerable:!0,get:function(){if("number"!=typeof(this||fi)._primeCode){var p=(this||
fi).__prime;var b=(this||fi).__gen.toString("hex"),d=[b,p.toString(16)].join("_");if(d in SJ)p=SJ[d];else{var h,a=0;if(!p.isEven()&&NA.simpleSieve&&NA.fermatTest(p)&&Haa.test(p)){switch(Haa.test(p.shrn(1))||(a+=2),b){case "02":p.mod(zsa).cmp(Asa)&&(a+=8);break;case "05":(h=p.mod(Bsa)).cmp(Csa)&&h.cmp(Dsa)&&(a+=8);break;default:a+=4}p=(SJ[d]=a,a)}else p=(a+=1,a+="02"===b||"05"===b?8:4,SJ[d]=a,a)}(this||fi)._primeCode=p}return(this||fi)._primeCode}});Wo.prototype.generateKeys=function(){return(this||
fi)._priv||((this||fi)._priv=new Un(kt((this||fi)._primeLen))),(this||fi)._pub=(this||fi)._gen.toRed((this||fi)._prime).redPow((this||fi)._priv).fromRed(),this.getPublicKey()};Wo.prototype.computeSecret=function(p){p=(new Un(p)).toRed((this||fi)._prime).redPow((this||fi)._priv).fromRed();p=new Tp(p.toArray());var b=this.getPrime();p.length<b.length&&(b=new Tp(b.length-p.length),b.fill(0),p=Tp.concat([b,p]));return p};Wo.prototype.getPublicKey=function(p){return aG((this||fi)._pub,p)};Wo.prototype.getPrivateKey=
function(p){return aG((this||fi)._priv,p)};Wo.prototype.getPrime=function(p){return aG((this||fi).__prime,p)};Wo.prototype.getGenerator=function(p){return aG((this||fi)._gen,p)};Wo.prototype.setGenerator=function(p,b){return b=b||"utf8",Tp.isBuffer(p)||(p=new Tp(p,b)),(this||fi).__gen=p,(this||fi)._gen=new Un(p),this||fi};var Iaa,Jaa,Kaa,nt=Yg.Buffer,Laa={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},
modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},
modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},
modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},
modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},
modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},
modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}},
Esa={binary:!0,hex:!0,base64:!0};var Fsa=Iaa=Jaa=function(p){var b=new nt(Laa[p].prime,"hex");p=new nt(Laa[p].gen,"hex");return new Wo(b,p)};var Gsa=Kaa=function e(b,d,h,a){return nt.isBuffer(d)||void 0===Esa[d]?e(b,"binary",d,h):(d=d||"binary",a=a||"binary",h=h||new nt([2]),nt.isBuffer(h)||(h=new nt(h,a)),"number"==typeof b?new Wo(NA(b,h),h,!0):(nt.isBuffer(b)||(b=new nt(b,d)),new Wo(b,h,!0)))};var Kia=Yg.Buffer,Hs=uk,u2=kt;bG.getr=t2;var ot={toArray:function(b,d){if(Array.isArray(b))return b.slice();
if(!b)return[];var h=[];if("string"!=typeof b){for(d=0;d<b.length;d++)h[d]=0|b[d];return h}if("hex"===d)for(0!=(b=b.replace(/[^a-z0-9]+/gi,"")).length%2&&(b="0"+b),d=0;d<b.length;d+=2)h.push(parseInt(b[d]+b[d+1],16));else for(d=0;d<b.length;d++){var a=b.charCodeAt(d),e=a>>8;a&=255;e?h.push(e,a):h.push(a)}return h}};ot.zero2=v2;ot.toHex=w2;ot.encode=function(b,d){return"hex"===d?w2(b):b};var sh={},Hsa=uk;sh.assert=$n;sh.toArray=ot.toArray;sh.zero2=ot.zero2;sh.toHex=ot.toHex;sh.encode=ot.encode;sh.getNAF=
function(b,d,h){h=Array(Math.max(b.bitLength(),h)+1);h.fill(0);d=1<<d+1;b=b.clone();for(var a=0;a<h.length;a++){var e,n=b.andln(d-1);b.isOdd()?(e=n>(d>>1)-1?(d>>1)-n:n,b.isubn(e)):e=0;h[a]=e;b.iushrn(1)}return h};sh.getJSF=function(b,d){var h=[[],[]];b=b.clone();d=d.clone();for(var a=0,e=0;0<b.cmpn(-a)||0<d.cmpn(-e);){var n;var q=b.andln(3)+a&3;var r=d.andln(3)+e&3;var v=(3===q&&(q=-1),3===r&&(r=-1),0==(1&q))?0:3!==(n=b.andln(7)+a&7)&&5!==n||2!==r?q:-q;q=(h[0].push(v),0==(1&r))?0:3!==(n=d.andln(7)+
e&7)&&5!==n||2!==q?r:-r;h[1].push(q);2*a===v+1&&(a=1-a);2*e===q+1&&(e=1-e);b.iushrn(1);d.iushrn(1)}return h};sh.cachedProperty=function(b,d,h){var a="_"+d;b.prototype[d]=function(){return void 0!==this[a]?this[a]:this[a]=h.call(this)}};sh.parseBytes=function(b){return"string"==typeof b?sh.toArray(b,"hex"):b};sh.intFromLE=function(b){return new Hsa(b,"hex","le")};var cG=uk,Lia=sh.assert;Ku.prototype._importDER=function(b,d){b=sh.toArray(b,d);var h=new Mia;if(48!==b[h.place++]||xO(b,h)+h.place!==b.length||
2!==b[h.place++])return!1;var a=xO(b,h);d=b.slice(h.place,a+h.place);if(h.place+=a,2!==b[h.place++])return!1;a=xO(b,h);if(b.length!==a+h.place)return!1;b=b.slice(h.place,a+h.place);return 0===d[0]&&128&d[1]&&(d=d.slice(1)),0===b[0]&&128&b[1]&&(b=b.slice(1)),this.r=new cG(d),this.s=new cG(b),this.recoveryParam=null,!0};Ku.prototype.toDER=function(b){var d=this.r.toArray(),h=this.s.toArray();128&d[0]&&(d=[0].concat(d));128&h[0]&&(h=[0].concat(h));d=x2(d);for(h=x2(h);!(h[0]||128&h[1]);)h=h.slice(1);
var a=[2];yO(a,d.length);(a=a.concat(d)).push(2);yO(a,h.length);d=a.concat(h);h=[48];return yO(h,d.length),h=h.concat(d),sh.encode(h,b)};var qf={},Isa=$n;qf.inherits=hh;qf.toArray=function(b,d){if(Array.isArray(b))return b.slice();if(!b)return[];var h=[];if("string"==typeof b)if(d){if("hex"===d)for(0!=(b=b.replace(/[^a-z0-9]+/gi,"")).length%2&&(b="0"+b),a=0;a<b.length;a+=2)h.push(parseInt(b[a]+b[a+1],16))}else for(var a=d=0;a<b.length;a++){var e=b.charCodeAt(a);if(128>e)h[d++]=e;else if(2048>e)h[d++]=
e>>6|192,h[d++]=63&e|128;else{var n=b,q=a;55296!=(64512&n.charCodeAt(q))||0>q||q+1>=n.length||56320!=(64512&n.charCodeAt(q+1))?(h[d++]=e>>12|224,h[d++]=e>>6&63|128,h[d++]=63&e|128):(e=65536+((1023&e)<<10)+(1023&b.charCodeAt(++a)),h[d++]=e>>18|240,h[d++]=e>>12&63|128,h[d++]=e>>6&63|128,h[d++]=63&e|128)}}else for(a=0;a<b.length;a++)h[a]=0|b[a];return h};qf.toHex=function(b){for(var d="",h=0;h<b.length;h++)d+=z2(b[h].toString(16));return d};qf.htonl=y2;qf.toHex32=function(b,d){for(var h="",a=0;a<b.length;a++){var e=
b[a];"little"===d&&(e=y2(e));h+=A2(e.toString(16))}return h};qf.zero2=z2;qf.zero8=A2;qf.join32=function(b,d,h,a){h-=d;Isa(0==h%4);h=Array(h/4);for(var e=0;e<h.length;e++,d+=4)h[e]=("big"===a?b[d]<<24|b[d+1]<<16|b[d+2]<<8|b[d+3]:b[d+3]<<24|b[d+2]<<16|b[d+1]<<8|b[d])>>>0;return h};qf.split32=function(b,d){for(var h=Array(4*b.length),a=0,e=0;a<b.length;a++,e+=4){var n=b[a];"big"===d?(h[e]=n>>>24,h[e+1]=n>>>16&255,h[e+2]=n>>>8&255,h[e+3]=255&n):(h[e+3]=n>>>24,h[e+2]=n>>>16&255,h[e+1]=n>>>8&255,h[e]=255&
n)}return h};qf.rotr32=function(b,d){return b>>>d|b<<32-d};qf.rotl32=function(b,d){return b<<d|b>>>32-d};qf.sum32=function(b,d){return b+d>>>0};qf.sum32_3=function(b,d,h){return b+d+h>>>0};qf.sum32_4=function(b,d,h,a){return b+d+h+a>>>0};qf.sum32_5=function(b,d,h,a,e){return b+d+h+a+e>>>0};qf.sum64=function(b,d,h,a){var e=a+b[d+1]>>>0;b[d]=(e<a?1:0)+h+b[d]>>>0;b[d+1]=e};qf.sum64_hi=function(b,d,h,a){return(d+a>>>0<d?1:0)+b+h>>>0};qf.sum64_lo=function(b,d,h,a){return d+a>>>0};qf.sum64_4_hi=function(b,
d,h,a,e,n,q,r){var v=0,y=d;return v+=(y=y+a>>>0)<d?1:0,v+=(y=y+n>>>0)<n?1:0,b+h+e+q+(v+(y+r>>>0<r?1:0))>>>0};qf.sum64_4_lo=function(b,d,h,a,e,n,q,r){return d+a+n+r>>>0};qf.sum64_5_hi=function(b,d,h,a,e,n,q,r,v,y){var D=0,E=d;return D+=(E=E+a>>>0)<d?1:0,D+=(E=E+n>>>0)<n?1:0,D+=(E=E+r>>>0)<r?1:0,b+h+e+q+v+(D+(E+y>>>0<y?1:0))>>>0};qf.sum64_5_lo=function(b,d,h,a,e,n,q,r,v,y){return d+a+n+r+y>>>0};qf.rotr64_hi=function(b,d,h){return(d<<32-h|b>>>h)>>>0};qf.rotr64_lo=function(b,d,h){return(b<<32-h|d>>>h)>>>
0};qf.shr64_hi=function(b,d,h){return b>>>h};qf.shr64_lo=function(b,d,h){return(b<<32-h|d>>>h)>>>0};var Ly={},Jsa=$n;Ly.BlockHash=dG;dG.prototype.update=function(b,d){if(b=qf.toArray(b,d),this.pending?this.pending=this.pending.concat(b):this.pending=b,this.pendingTotal+=b.length,this.pending.length>=this._delta8)for(d=(b=this.pending).length%this._delta8,this.pending=b.slice(b.length-d,b.length),0===this.pending.length&&(this.pending=null),b=qf.join32(b,0,b.length-d,this.endian),d=0;d<b.length;d+=
this._delta32)this._update(b,d,d+this._delta32);return this};dG.prototype.digest=function(b){return this.update(this._pad()),Jsa(null===this.pending),this._digest(b)};dG.prototype._pad=function(){var b=this.pendingTotal,d=this._delta8,h=d-(b+this.padLength)%d;d=Array(h+this.padLength);d[0]=128;for(var a=1;a<h;a++)d[a]=0;if(b<<=3,"big"===this.endian){for(h=8;h<this.padLength;h++)d[a++]=0;d[a++]=0;d[a++]=0;d[a++]=0;d[a++]=0;d[a++]=b>>>24&255;d[a++]=b>>>16&255;d[a++]=b>>>8&255;d[a++]=255&b}else for(d[a++]=
255&b,d[a++]=b>>>8&255,d[a++]=b>>>16&255,d[a++]=b>>>24&255,d[a++]=0,d[a++]=0,d[a++]=0,d[a++]=0,h=8;h<this.padLength;h++)d[a++]=0;return d};var Ksa=$n,tq=qf.rotr64_hi,uq=qf.rotr64_lo,Maa=qf.shr64_hi,Naa=qf.shr64_lo,pt=qf.sum64,ET=qf.sum64_hi,FT=qf.sum64_lo,Lsa=qf.sum64_4_hi,Msa=qf.sum64_4_lo,Nsa=qf.sum64_5_hi,Osa=qf.sum64_5_lo,B2=Ly.BlockHash,Nia=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,
2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,
3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,
1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,
4234509866,1607167915,987167468,1816402316,1246189591];qf.inherits(Vn,B2);Vn.blockSize=1024;Vn.outSize=512;Vn.hmacStrength=192;Vn.padLength=128;Vn.prototype._prepareBlock=function(b,d){for(var h=this.W,a=0;32>a;a++)h[a]=b[d+a];for(;a<h.length;a+=2){b=h[a-4];d=h[a-3];d=tq(b,d,19)^tq(d,b,29)^Maa(b,d,6);b=(0>d&&(d+=4294967296),d);d=h[a-4];var e=h[a-3];e=uq(d,e,19)^uq(e,d,29)^Naa(d,e,6);d=(0>e&&(e+=4294967296),e);e=h[a-14];var n=h[a-13];var q=h[a-30];var r=h[a-29];r=tq(q,r,1)^tq(q,r,8)^Maa(q,r,7);q=(0>
r&&(r+=4294967296),r);r=h[a-30];var v=h[a-29];v=uq(r,v,1)^uq(r,v,8)^Naa(r,v,7);r=(0>v&&(v+=4294967296),v);v=h[a-32];var y=h[a-31];h[a]=Lsa(b,d,e,n,q,r,v,y);h[a+1]=Msa(b,d,e,n,q,r,v,y)}};Vn.prototype._update=function(b,d){this._prepareBlock(b,d);b=this.W;d=this.h[0];var h=this.h[1],a=this.h[2],e=this.h[3],n=this.h[4],q=this.h[5],r=this.h[6],v=this.h[7],y=this.h[8],D=this.h[9],E=this.h[10],I=this.h[11],K=this.h[12],P=this.h[13],N=this.h[14],aa=this.h[15];Ksa(this.k.length===b.length);for(var m=0;m<
b.length;m+=2){var t=y;var u=D;t=tq(t,u,14)^tq(t,u,18)^tq(u,t,9);u=(0>t&&(t+=4294967296),t);t=y;var B=D;t=uq(t,B,14)^uq(t,B,18)^uq(B,t,9);var A=(0>t&&(t+=4294967296),t);t=y&E^~y&K;B=(0>t&&(t+=4294967296),t);t=D&I^~D&P;var H=(0>t&&(t+=4294967296),t);var F=this.k[m],L=this.k[m+1],U=b[m],T=b[m+1];t=Nsa(N,aa,u,A,B,H,F,L,U,T);B=Osa(N,aa,u,A,B,H,F,L,U,T);N=d;aa=h;aa=tq(N,aa,28)^tq(aa,N,2)^tq(aa,N,7);N=(0>aa&&(aa+=4294967296),aa);aa=d;u=h;u=uq(aa,u,28)^uq(u,aa,2)^uq(u,aa,7);aa=(0>u&&(u+=4294967296),u);A=
d&a^d&n^a&n;u=(0>A&&(A+=4294967296),A);H=h&e^h&q^e&q;A=(0>H&&(H+=4294967296),H);H=ET(N,aa,u,A);u=FT(N,aa,u,A);N=K;aa=P;K=E;P=I;E=y;I=D;y=ET(r,v,t,B);D=FT(v,v,t,B);r=n;v=q;n=a;q=e;a=d;e=h;d=ET(t,B,H,u);h=FT(t,B,H,u)}pt(this.h,0,d,h);pt(this.h,2,a,e);pt(this.h,4,n,q);pt(this.h,6,r,v);pt(this.h,8,y,D);pt(this.h,10,E,I);pt(this.h,12,K,P);pt(this.h,14,N,aa)};Vn.prototype._digest=function(b){return"hex"===b?qf.toHex32(this.h,"big"):qf.split32(this.h,"big")};var vq=qf.rotr32,Psa=$n,qp=qf.sum32,Qsa=qf.sum32_4,
Rsa=qf.sum32_5,C2=Ly.BlockHash,Oia=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,
3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];qf.inherits(Xo,C2);Xo.blockSize=512;Xo.outSize=256;Xo.hmacStrength=192;Xo.padLength=64;Xo.prototype._update=function(b,d){for(var h=this.W,a=0;16>a;a++)h[a]=b[d+a];for(;a<h.length;a++){b=a;d=h[a-2];d=vq(d,17)^vq(d,19)^d>>>10;var e=h[a-7];var n=h[a-15];n=vq(n,7)^vq(n,18)^n>>>3;h[b]=Qsa(d,
e,n,h[a-16])}b=this.h[0];d=this.h[1];e=this.h[2];n=this.h[3];var q=this.h[4],r=this.h[5],v=this.h[6],y=this.h[7];Psa(this.k.length===h.length);for(a=0;a<h.length;a++){var D=y;y=q;y=vq(y,6)^vq(y,11)^vq(y,25);D=Rsa(D,y,q&r^~q&v,this.k[a],h[a]);y=b;y=vq(y,2)^vq(y,13)^vq(y,22);var E=qp(y,b&d^b&e^d&e);y=v;v=r;r=q;q=qp(n,D);n=e;e=d;d=b;b=qp(D,E)}this.h[0]=qp(this.h[0],b);this.h[1]=qp(this.h[1],d);this.h[2]=qp(this.h[2],e);this.h[3]=qp(this.h[3],n);this.h[4]=qp(this.h[4],q);this.h[5]=qp(this.h[5],r);this.h[6]=
qp(this.h[6],v);this.h[7]=qp(this.h[7],y)};Xo.prototype._digest=function(b){return"hex"===b?qf.toHex32(this.h,"big"):qf.split32(this.h,"big")};var GT=qf.rotl32,AC=qf.sum32,Ssa=qf.sum32_5,D2=Ly.BlockHash,Tsa=[1518500249,1859775393,2400959708,3395469782];qf.inherits(Up,D2);Up.blockSize=512;Up.outSize=160;Up.hmacStrength=80;Up.padLength=64;Up.prototype._update=function(b,d){for(var h=this.W,a=0;16>a;a++)h[a]=b[d+a];for(;a<h.length;a++)h[a]=GT(h[a-3]^h[a-8]^h[a-14]^h[a-16],1);b=this.h[0];d=this.h[1];
var e=this.h[2],n=this.h[3],q=this.h[4];for(a=0;a<h.length;a++){var r=~~(a/20);r=Ssa(GT(b,5),0===r?d&e^~d&n:1===r||3===r?d^e^n:2===r?d&e^d&n^e&n:void 0,q,h[a],Tsa[r]);q=n;n=e;e=GT(d,30);d=b;b=r}this.h[0]=AC(this.h[0],b);this.h[1]=AC(this.h[1],d);this.h[2]=AC(this.h[2],e);this.h[3]=AC(this.h[3],n);this.h[4]=AC(this.h[4],q)};Up.prototype._digest=function(b){return"hex"===b?qf.toHex32(this.h,"big"):qf.split32(this.h,"big")};var E2=Xo;qf.inherits(fr,E2);fr.blockSize=512;fr.outSize=224;fr.hmacStrength=
192;fr.padLength=64;fr.prototype._digest=function(b){return"hex"===b?qf.toHex32(this.h.slice(0,7),"big"):qf.split32(this.h.slice(0,7),"big")};var F2=Vn;qf.inherits(gr,F2);gr.blockSize=1024;gr.outSize=384;gr.hmacStrength=192;gr.padLength=128;gr.prototype._digest=function(b){return"hex"===b?qf.toHex32(this.h.slice(0,12),"big"):qf.split32(this.h.slice(0,12),"big")};var My={};My.sha1=Up;My.sha224=fr;My.sha256=Xo;My.sha384=gr;My.sha512=Vn;var Oaa={},TJ=qf.rotl32,Paa=qf.sum32,BC=qf.sum32_3,Qaa=qf.sum32_4,
G2=Ly.BlockHash;qf.inherits(Vp,G2);Oaa.ripemd160=Vp;Vp.blockSize=512;Vp.outSize=160;Vp.hmacStrength=192;Vp.padLength=64;Vp.prototype._update=function(b,d){for(var h=this.h[0],a=this.h[1],e=this.h[2],n=this.h[3],q=this.h[4],r=h,v=a,y=e,D=n,E=q,I=0;80>I;I++){var K=Paa(TJ(Qaa(h,H2(I,a,e,n),b[Usa[I]+d],15>=I?0:31>=I?1518500249:47>=I?1859775393:63>=I?2400959708:2840853838),Vsa[I]),q);h=q;q=n;n=TJ(e,10);e=a;a=K;K=Paa(TJ(Qaa(r,H2(79-I,v,y,D),b[Wsa[I]+d],15>=I?1352829926:31>=I?1548603684:47>=I?1836072691:
63>=I?2053994217:0),Xsa[I]),E);r=E;E=D;D=TJ(y,10);y=v;v=K}K=BC(this.h[1],e,D);this.h[1]=BC(this.h[2],n,E);this.h[2]=BC(this.h[3],q,r);this.h[3]=BC(this.h[4],h,v);this.h[4]=BC(this.h[0],a,y);this.h[0]=K};Vp.prototype._digest=function(b){return"hex"===b?qf.toHex32(this.h,"little"):qf.split32(this.h,"little")};var Usa=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,
15,13],Wsa=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Vsa=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Xsa=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,
11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Pia=qf,Ysa=$n;Jx.prototype._init=function(b){b.length>this.blockSize&&(b=(new this.Hash).update(b).digest());Ysa(b.length<=this.blockSize);for(var d=b.length;d<this.blockSize;d++)b.push(0);for(d=0;d<b.length;d++)b[d]^=54;this.inner=(new this.Hash).update(b);for(d=0;d<b.length;d++)b[d]^=106;this.outer=(new this.Hash).update(b)};Jx.prototype.update=function(b,d){return this.inner.update(b,
d),this};Jx.prototype.digest=function(b){return this.outer.update(this.inner.digest()),this.outer.digest(b)};var pj={};pj.utils=qf;pj.common=Ly;pj.sha=My;pj.ripemd=Oaa;pj.hmac=Jx;pj.sha1=pj.sha.sha1;pj.sha256=pj.sha.sha256;pj.sha224=pj.sha.sha224;pj.sha384=pj.sha.sha384;pj.sha512=pj.sha.sha512;pj.ripemd160=pj.ripemd.ripemd160;var Lu=ot,I2=$n;hr.prototype._init=function(b,d,h){b=b.concat(d).concat(h);this.K=Array(this.outLen/8);this.V=Array(this.outLen/8);for(d=0;d<this.V.length;d++)this.K[d]=0,this.V[d]=
1;this._update(b);this._reseed=1;this.reseedInterval=281474976710656};hr.prototype._hmac=function(){return new pj.hmac(this.hash,this.K)};hr.prototype._update=function(b){var d=this._hmac().update(this.V).update([0]);b&&(d=d.update(b));this.K=d.digest();this.V=this._hmac().update(this.V).digest();b&&(this.K=this._hmac().update(this.V).update([1]).update(b).digest(),this.V=this._hmac().update(this.V).digest())};hr.prototype.reseed=function(b,d,h,a){"string"!=typeof d&&(a=h,h=d,d=null);b=Lu.toArray(b,
d);h=Lu.toArray(h,a);I2(b.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(b.concat(h||[]));this._reseed=1};hr.prototype.generate=function(b,d,h,a){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!=typeof d&&(a=h,h=d,d=null);h&&(h=Lu.toArray(h,a||"hex"),this._update(h));for(a=[];a.length<b;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);b=a.slice(0,b);return this._update(h),this._reseed++,Lu.encode(b,d)};
var Mu=uk,UJ=sh.getNAF,Zsa=sh.getJSF,VJ=sh.assert;Yo.prototype.point=function(){throw Error("Not implemented");};Yo.prototype.validate=function(){throw Error("Not implemented");};Yo.prototype._fixedNafMul=function(b,d){VJ(b.precomputed);b=b._getDoubles();var h=UJ(d,1,this._bitLength),a=(1<<b.step+1)-(0==b.step%2?2:1);a/=3;for(var e=[],n=0;n<h.length;n+=b.step){var q=0;for(d=n+b.step-1;d>=n;d--)q=(q<<1)+h[d];e.push(q)}d=this.jpoint(null,null,null);for(h=this.jpoint(null,null,null);0<a;a--){for(n=0;n<
e.length;n++)(q=e[n])===a?h=h.mixedAdd(b.points[n]):q===-a&&(h=h.mixedAdd(b.points[n].neg()));d=d.add(h)}return d.toP()};Yo.prototype._wnafMul=function(b,d){var h=b._getNAFPoints(4),a=h.points;h=UJ(d,h.wnd,this._bitLength);for(var e=this.jpoint(null,null,null),n=h.length-1;0<=n;n--){for(d=0;0<=n&&0===h[n];n--)d++;if(0<=n&&d++,e=e.dblp(d),0>n)break;d=h[n];VJ(0!==d);e="affine"===b.type?0<d?e.mixedAdd(a[d-1>>1]):e.mixedAdd(a[-d-1>>1].neg()):0<d?e.add(a[d-1>>1]):e.add(a[-d-1>>1].neg())}return"affine"===
b.type?e.toP():e};Yo.prototype._wnafMulAdd=function(b,d,h,a,e){for(var n=this._wnafT1,q=this._wnafT2,r=this._wnafT3,v=0,y=0;y<a;y++){var D=(N=d[y])._getNAFPoints(b);n[y]=D.wnd;q[y]=D.points}for(y=a-1;1<=y;y-=2){D=y-1;var E=y;if(1===n[D]&&1===n[E]){var I=[d[D],null,null,d[E]];0===d[D].y.cmp(d[E].y)?(I[1]=d[D].add(d[E]),I[2]=d[D].toJ().mixedAdd(d[E].neg())):0===d[D].y.cmp(d[E].y.redNeg())?(I[1]=d[D].toJ().mixedAdd(d[E]),I[2]=d[D].add(d[E].neg())):(I[1]=d[D].toJ().mixedAdd(d[E]),I[2]=d[D].toJ().mixedAdd(d[E].neg()));
var K=[-3,-1,-5,-7,0,7,5,1,3],P=Zsa(h[D],h[E]);v=Math.max(P[0].length,v);r[D]=Array(v);r[E]=Array(v);for(b=0;b<v;b++)r[D][b]=K[3*((0|P[0][b])+1)+((0|P[1][b])+1)],r[E][b]=0,q[D]=I}else r[D]=UJ(h[D],n[D],this._bitLength),r[E]=UJ(h[E],n[E],this._bitLength),v=Math.max(r[D].length,v),v=Math.max(r[E].length,v)}d=this.jpoint(null,null,null);h=this._wnafT4;for(y=v;0<=y;y--){for(v=0;0<=y;){n=!0;for(b=0;b<a;b++)h[b]=0|r[b][y],0!==h[b]&&(n=!1);if(!n)break;v++;y--}if(0<=y&&v++,d=d.dblp(v),0>y)break;for(b=0;b<
a;b++){var N;v=h[b];0!==v&&(0<v?N=q[b][v-1>>1]:0>v&&(N=q[b][-v-1>>1].neg()),d="affine"===N.type?d.mixedAdd(N):d.add(N))}}for(y=0;y<a;y++)q[y]=null;return e?d:d.toP()};Yo.BasePoint=Wn;Wn.prototype.eq=function(){throw Error("Not implemented");};Wn.prototype.validate=function(){return this.curve.validate(this)};Yo.prototype.decodePoint=function(b,d){b=sh.toArray(b,d);d=this.p.byteLength();if((4===b[0]||6===b[0]||7===b[0])&&b.length-1==2*d)return 6===b[0]?VJ(0==b[b.length-1]%2):7===b[0]&&VJ(1==b[b.length-
1]%2),this.point(b.slice(1,1+d),b.slice(1+d,1+2*d));if((2===b[0]||3===b[0])&&b.length-1===d)return this.pointFromX(b.slice(1,1+d),3===b[0]);throw Error("Unknown point format");};Wn.prototype.encodeCompressed=function(b){return this.encode(b,!0)};Wn.prototype._encode=function(b){var d=this.curve.p.byteLength(),h=this.getX().toArray("be",d);return b?[this.getY().isEven()?2:3].concat(h):[4].concat(h,this.getY().toArray("be",d))};Wn.prototype.encode=function(b,d){return sh.encode(this._encode(d),b)};
Wn.prototype.precompute=function(b){if(this.precomputed)return this;var d={doubles:null,naf:null,beta:null};return d.naf=this._getNAFPoints(8),d.doubles=this._getDoubles(4,b),d.beta=this._getBeta(),this.precomputed=d,this};Wn.prototype._hasDoubles=function(b){if(!this.precomputed)return!1;var d=this.precomputed.doubles;return!!d&&d.points.length>=Math.ceil((b.bitLength()+1)/d.step)};Wn.prototype._getDoubles=function(b,d){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;
for(var h=[this],a=this,e=0;e<d;e+=b){for(var n=0;n<b;n++)a=a.dbl();h.push(a)}return{step:b,points:h}};Wn.prototype._getNAFPoints=function(b){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var d=[this],h=(1<<b)-1,a=1===h?null:this.dbl(),e=1;e<h;e++)d[e]=d[e-1].add(a);return{wnd:b,points:d}};Wn.prototype._getBeta=function(){return null};Wn.prototype.dblp=function(b){for(var d=this,h=0;h<b;h++)d=d.dbl();return d};var Xj=uk,HT=hh,Kx=Yo,$sa=sh.assert;HT(Xn,Kx);Xn.prototype._getEndomorphism=
function(b){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){if(b.beta)var d=(new Xj(b.beta,16)).toRed(this.red);else d=this._getEndoRoots(this.p),d=(d=0>d[0].cmp(d[1])?d[0]:d[1]).toRed(this.red);if(b.lambda)var h=new Xj(b.lambda,16);else{var a=this._getEndoRoots(this.n);0===this.g.mul(a[0]).x.cmp(this.g.x.redMul(d))?h=a[0]:(h=a[1],$sa(0===this.g.mul(h).x.cmp(this.g.x.redMul(d))))}return{beta:d,lambda:h,basis:b.basis?b.basis.map(function(e){return{a:new Xj(e.a,16),b:new Xj(e.b,16)}}):this._getEndoBasis(h)}}};
Xn.prototype._getEndoRoots=function(b){var d=b===this.p?this.red:Xj.mont(b),h=(new Xj(2)).toRed(d).redInvm();b=h.redNeg();d=(new Xj(3)).toRed(d).redNeg().redSqrt().redMul(h);return[b.redAdd(d).fromRed(),b.redSub(d).fromRed()]};Xn.prototype._getEndoBasis=function(b){for(var d,h,a,e,n,q,r,v=this.n.ushrn(Math.floor(this.n.bitLength()/2)),y=this.n.clone(),D=new Xj(1),E=new Xj(0),I=new Xj(0),K=new Xj(1),P=0;0!==b.cmpn(0);){var N=y.div(b);r=y.sub(N.mul(b));q=I.sub(N.mul(D));N=K.sub(N.mul(E));if(!a&&0>r.cmp(v))d=
n.neg(),h=D,a=r.neg(),e=q;else if(a&&2==++P)break;n=r;y=b;b=r;I=D;D=q;K=E;E=N}n=r.neg();r=a.sqr().add(e.sqr());return 0<=n.sqr().add(q.sqr()).cmp(r)&&(n=d,q=h),a.negative&&(a=a.neg(),e=e.neg()),n.negative&&(n=n.neg(),q=q.neg()),[{a:a,b:e},{a:n,b:q}]};Xn.prototype._endoSplit=function(b){var d=this.endo.basis,h=d[0],a=d[1],e=a.b.mul(b).divRound(this.n),n=h.b.neg().mul(b).divRound(this.n);d=e.mul(h.a);var q=n.mul(a.a);h=e.mul(h.b);a=n.mul(a.b);return{k1:b.sub(d).sub(q),k2:h.add(a).neg()}};Xn.prototype.pointFromX=
function(b,d){(b=new Xj(b,16)).red||(b=b.toRed(this.red));var h=b.redSqr().redMul(b).redIAdd(b.redMul(this.a)).redIAdd(this.b),a=h.redSqrt();if(0!==a.redSqr().redSub(h).cmp(this.zero))throw Error("invalid point");h=a.fromRed().isOdd();return(d&&!h||!d&&h)&&(a=a.redNeg()),this.point(b,a)};Xn.prototype.validate=function(b){if(b.inf)return!0;var d=b.x;b=b.y;var h=this.a.redMul(d);d=d.redSqr().redMul(d).redIAdd(h).redIAdd(this.b);return 0===b.redSqr().redISub(d).cmpn(0)};Xn.prototype._endoWnafMulAdd=
function(b,d,h){for(var a=this._endoWnafT1,e=this._endoWnafT2,n=0;n<b.length;n++){var q=this._endoSplit(d[n]),r=b[n],v=r._getBeta();q.k1.negative&&(q.k1.ineg(),r=r.neg(!0));q.k2.negative&&(q.k2.ineg(),v=v.neg(!0));a[2*n]=r;a[2*n+1]=v;e[2*n]=q.k1;e[2*n+1]=q.k2}b=this._wnafMulAdd(1,a,e,2*n,h);for(d=0;d<2*n;d++)a[d]=null,e[d]=null;return b};HT(jl,Kx.BasePoint);Xn.prototype.point=function(b,d,h){return new jl(this,b,d,h)};Xn.prototype.pointFromJSON=function(b,d){return jl.fromJSON(this,b,d)};jl.prototype._getBeta=
function(){if(this.curve.endo){var b=this.precomputed;if(b&&b.beta)return b.beta;var d=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(b){var h=this.curve,a=function(e){return h.point(e.x.redMul(h.endo.beta),e.y)};b.beta=d;d.precomputed={beta:null,naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(a)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(a)}}}return d}};jl.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&
{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};jl.fromJSON=function(b,d,h){function a(n){return b.point(n[0],n[1],h)}"string"==typeof d&&(d=JSON.parse(d));var e=b.point(d[0],d[1],h);if(!d[2])return e;d=d[2];return e.precomputed={beta:null,doubles:d.doubles&&{step:d.doubles.step,points:[e].concat(d.doubles.points.map(a))},naf:d.naf&&{wnd:d.naf.wnd,
points:[e].concat(d.naf.points.map(a))}},e};jl.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};jl.prototype.isInfinity=function(){return this.inf};jl.prototype.add=function(b){if(this.inf)return b;if(b.inf)return this;if(this.eq(b))return this.dbl();if(this.neg().eq(b)||0===this.x.cmp(b.x))return this.curve.point(null,null);var d=this.y.redSub(b.y);0!==d.cmpn(0)&&(d=d.redMul(this.x.redSub(b.x).redInvm()));
b=d.redSqr().redISub(this.x).redISub(b.x);d=d.redMul(this.x.redSub(b)).redISub(this.y);return this.curve.point(b,d)};jl.prototype.dbl=function(){if(this.inf)return this;var b=this.y.redAdd(this.y);if(0===b.cmpn(0))return this.curve.point(null,null);var d=this.curve.a,h=this.x.redSqr();b=b.redInvm();h=h.redAdd(h).redIAdd(h).redIAdd(d).redMul(b);d=h.redSqr().redISub(this.x.redAdd(this.x));h=h.redMul(this.x.redSub(d)).redISub(this.y);return this.curve.point(d,h)};jl.prototype.getX=function(){return this.x.fromRed()};
jl.prototype.getY=function(){return this.y.fromRed()};jl.prototype.mul=function(b){return b=new Xj(b,16),this.isInfinity()?this:this._hasDoubles(b)?this.curve._fixedNafMul(this,b):this.curve.endo?this.curve._endoWnafMulAdd([this],[b]):this.curve._wnafMul(this,b)};jl.prototype.mulAdd=function(b,d,h){d=[this,d];b=[b,h];return this.curve.endo?this.curve._endoWnafMulAdd(d,b):this.curve._wnafMulAdd(1,d,b,2)};jl.prototype.jmulAdd=function(b,d,h){d=[this,d];b=[b,h];return this.curve.endo?this.curve._endoWnafMulAdd(d,
b,!0):this.curve._wnafMulAdd(1,d,b,2,!0)};jl.prototype.eq=function(b){return this===b||this.inf===b.inf&&(this.inf||0===this.x.cmp(b.x)&&0===this.y.cmp(b.y))};jl.prototype.neg=function(b){if(this.inf)return this;var d=this.curve.point(this.x,this.y.redNeg());if(b&&this.precomputed){b=this.precomputed;var h=function(a){return a.neg()};d.precomputed={naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(h)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(h)}}}return d};jl.prototype.toJ=
function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)};HT(Il,Kx.BasePoint);Xn.prototype.jpoint=function(b,d,h){return new Il(this,b,d,h)};Il.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var b=this.z.redInvm(),d=b.redSqr(),h=this.x.redMul(d);b=this.y.redMul(d).redMul(b);return this.curve.point(h,b)};Il.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Il.prototype.add=function(b){if(this.isInfinity())return b;
if(b.isInfinity())return this;var d=b.z.redSqr(),h=this.z.redSqr(),a=this.x.redMul(d),e=b.x.redMul(h);d=this.y.redMul(d.redMul(b.z));h=b.y.redMul(h.redMul(this.z));e=a.redSub(e);h=d.redSub(h);if(0===e.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var n=e.redSqr(),q=n.redMul(e);n=a.redMul(n);a=h.redSqr().redIAdd(q).redISub(n).redISub(n);d=h.redMul(n.redISub(a)).redISub(d.redMul(q));b=this.z.redMul(b.z).redMul(e);return this.curve.jpoint(a,d,b)};Il.prototype.mixedAdd=function(b){if(this.isInfinity())return b.toJ();
if(b.isInfinity())return this;var d=this.z.redSqr(),h=this.x,a=b.x.redMul(d),e=this.y;b=b.y.redMul(d).redMul(this.z);a=h.redSub(a);b=e.redSub(b);if(0===a.cmpn(0))return 0!==b.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var n=a.redSqr();d=n.redMul(a);n=h.redMul(n);h=b.redSqr().redIAdd(d).redISub(n).redISub(n);e=b.redMul(n.redISub(h)).redISub(e.redMul(d));a=this.z.redMul(a);return this.curve.jpoint(h,e,a)};Il.prototype.dblp=function(b){if(0===b||this.isInfinity())return this;if(!b)return this.dbl();
if(this.curve.zeroA||this.curve.threeA){for(var d=this,h=0;h<b;h++)d=d.dbl();return d}d=this.curve.a;var a=this.curve.tinv,e=this.x;h=this.y;var n=this.z,q=n.redSqr().redSqr(),r=h.redAdd(h);for(h=0;h<b;h++){var v=e.redSqr(),y=r.redSqr(),D=y.redSqr();v=v.redAdd(v).redIAdd(v).redIAdd(d.redMul(q));y=e.redMul(y);e=v.redSqr().redISub(y.redAdd(y));y=y.redISub(e);v=v.redMul(y);v=v.redIAdd(v).redISub(D);n=r.redMul(n);h+1<b&&(q=q.redMul(D));r=v}return this.curve.jpoint(e,r.redMul(a),n)};Il.prototype.dbl=function(){return this.isInfinity()?
this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Il.prototype._zeroDbl=function(){if(this.zOne){var b=this.x.redSqr();var d=this.y.redSqr();var h=d.redSqr();d=this.x.redAdd(d).redSqr().redISub(b).redISub(h);d=d.redIAdd(d);b=b.redAdd(b).redIAdd(b);var a=b.redSqr().redISub(d).redISub(d),e=h.redIAdd(h);e=(e=e.redIAdd(e)).redIAdd(e);h=a;b=b.redMul(d.redISub(a)).redISub(e);d=this.y.redAdd(this.y)}else{a=this.x.redSqr();b=this.y.redSqr();h=b.redSqr();b=this.x.redAdd(b).redSqr().redISub(a).redISub(h);
b=b.redIAdd(b);a=a.redAdd(a).redIAdd(a);e=a.redSqr();var n=h.redIAdd(h);n=(n=n.redIAdd(n)).redIAdd(n);h=e.redISub(b).redISub(b);b=a.redMul(b.redISub(h)).redISub(n);d=(d=this.y.redMul(this.z)).redIAdd(d)}return this.curve.jpoint(h,b,d)};Il.prototype._threeDbl=function(){var b;if(this.zOne){var d=this.x.redSqr();var h=this.y.redSqr();var a=h.redSqr();h=this.x.redAdd(h).redSqr().redISub(d).redISub(a);h=h.redIAdd(h);var e=d.redAdd(d).redIAdd(d).redIAdd(this.curve.a);d=b=e.redSqr().redISub(h).redISub(h);
a=a.redIAdd(a);a=(a=a.redIAdd(a)).redIAdd(a);a=e.redMul(h.redISub(b)).redISub(a);b=this.y.redAdd(this.y)}else b=this.z.redSqr(),h=this.y.redSqr(),d=this.x.redMul(h),a=this.x.redSub(b).redMul(this.x.redAdd(b)),a=a.redAdd(a).redIAdd(a),e=d.redIAdd(d),d=(e=e.redIAdd(e)).redAdd(e),d=a.redSqr().redISub(d),b=this.y.redAdd(this.z).redSqr().redISub(h).redISub(b),h=h.redSqr(),h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h),a=a.redMul(e.redISub(d)).redISub(h);return this.curve.jpoint(d,a,b)};Il.prototype._dbl=
function(){var b=this.curve.a,d=this.x,h=this.y,a=this.z,e=a.redSqr().redSqr(),n=d.redSqr(),q=h.redSqr();b=n.redAdd(n).redIAdd(n).redIAdd(b.redMul(e));d=d.redAdd(d);e=d.redIAdd(d).redMul(q);d=b.redSqr().redISub(e.redAdd(e));e=e.redISub(d);q=q.redSqr();q=(q=(q=q.redIAdd(q)).redIAdd(q)).redIAdd(q);q=b.redMul(e).redISub(q);h=h.redAdd(h).redMul(a);return this.curve.jpoint(d,q,h)};Il.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var b=this.x.redSqr(),d=this.y.redSqr(),h=this.z.redSqr(),
a=d.redSqr(),e=b.redAdd(b).redIAdd(b),n=e.redSqr();b=this.x.redAdd(d).redSqr().redISub(b).redISub(a);var q=(b=(b=(b=b.redIAdd(b)).redAdd(b).redIAdd(b)).redISub(n)).redSqr();a=a.redIAdd(a);a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);e=e.redIAdd(b).redSqr().redISub(n).redISub(q).redISub(a);d=d.redMul(e);d=(d=d.redIAdd(d)).redIAdd(d);d=this.x.redMul(q).redISub(d);d=(d=d.redIAdd(d)).redIAdd(d);a=this.y.redMul(e.redMul(a.redISub(e)).redISub(b.redMul(q)));a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);h=
this.z.redAdd(b).redSqr().redISub(h).redISub(q);return this.curve.jpoint(d,a,h)};Il.prototype.mul=function(b,d){return b=new Xj(b,d),this.curve._wnafMul(this,b)};Il.prototype.eq=function(b){if("affine"===b.type)return this.eq(b.toJ());if(this===b)return!0;var d=this.z.redSqr(),h=b.z.redSqr();if(0!==this.x.redMul(h).redISub(b.x.redMul(d)).cmpn(0))return!1;d=d.redMul(this.z);h=h.redMul(b.z);return 0===this.y.redMul(h).redISub(b.y.redMul(d)).cmpn(0)};Il.prototype.eqXToP=function(b){var d=this.z.redSqr(),
h=b.toRed(this.curve.red).redMul(d);if(0===this.x.cmp(h))return!0;b=b.clone();for(d=this.curve.redN.redMul(d);;){if(b.iadd(this.curve.n),0<=b.cmp(this.curve.p))return!1;if(h.redIAdd(d),0===this.x.cmp(h))return!0}};Il.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Il.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Mx=uk,Raa=hh,eG=Yo;Raa(Lx,eG);Lx.prototype.validate=
function(b){b=b.normalize().x;var d=b.redSqr();b=d.redMul(b).redAdd(d.redMul(this.a)).redAdd(b);return 0===b.redSqrt().redSqr().cmp(b)};Raa(kl,eG.BasePoint);Lx.prototype.decodePoint=function(b,d){return this.point(sh.toArray(b,d),1)};Lx.prototype.point=function(b,d){return new kl(this,b,d)};Lx.prototype.pointFromJSON=function(b){return kl.fromJSON(this,b)};kl.prototype.precompute=function(){};kl.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};kl.fromJSON=function(b,
d){return new kl(b,d[0],d[1]||b.one)};kl.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};kl.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};kl.prototype.dbl=function(){var b=this.x.redAdd(this.z).redSqr(),d=this.x.redSub(this.z).redSqr(),h=b.redSub(d);b=b.redMul(d);d=h.redMul(d.redAdd(this.curve.a24.redMul(h)));return this.curve.point(b,d)};kl.prototype.add=function(){throw Error("Not supported on Montgomery curve");
};kl.prototype.diffAdd=function(b,d){var h=this.x.redAdd(this.z),a=this.x.redSub(this.z),e=b.x.redAdd(b.z);b=b.x.redSub(b.z).redMul(h);e=e.redMul(a);a=d.z.redMul(b.redAdd(e).redSqr());d=d.x.redMul(b.redISub(e).redSqr());return this.curve.point(a,d)};kl.prototype.mul=function(b){var d=b.clone();b=this;for(var h=this.curve.point(null,null),a=[];0!==d.cmpn(0);d.iushrn(1))a.push(d.andln(1));for(d=a.length-1;0<=d;d--)0===a[d]?(b=b.diffAdd(h,this),h=h.dbl()):(h=b.diffAdd(h,this),b=b.dbl());return h};kl.prototype.mulAdd=
function(){throw Error("Not supported on Montgomery curve");};kl.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve");};kl.prototype.eq=function(b){return 0===this.getX().cmp(b.getX())};kl.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};kl.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var ir=uk,Saa=hh,fG=Yo,Qia=sh.assert;Saa(Wp,fG);Wp.prototype._mulA=function(b){return this.mOneA?b.redNeg():this.a.redMul(b)};
Wp.prototype._mulC=function(b){return this.oneC?b:this.c.redMul(b)};Wp.prototype.jpoint=function(b,d,h,a){return this.point(b,d,h,a)};Wp.prototype.pointFromX=function(b,d){(b=new ir(b,16)).red||(b=b.toRed(this.red));var h=b.redSqr(),a=this.c2.redSub(this.a.redMul(h));h=this.one.redSub(this.c2.redMul(this.d).redMul(h));h=a.redMul(h.redInvm());a=h.redSqrt();if(0!==a.redSqr().redSub(h).cmp(this.zero))throw Error("invalid point");h=a.fromRed().isOdd();return(d&&!h||!d&&h)&&(a=a.redNeg()),this.point(b,
a)};Wp.prototype.pointFromY=function(b,d){(b=new ir(b,16)).red||(b=b.toRed(this.red));var h=b.redSqr(),a=h.redSub(this.c2);h=h.redMul(this.d).redMul(this.c2).redSub(this.a);a=a.redMul(h.redInvm());if(0===a.cmp(this.zero)){if(d)throw Error("invalid point");return this.point(this.zero,b)}h=a.redSqrt();if(0!==h.redSqr().redSub(a).cmp(this.zero))throw Error("invalid point");return h.fromRed().isOdd()!==d&&(h=h.redNeg()),this.point(h,b)};Wp.prototype.validate=function(b){if(b.isInfinity())return!0;b.normalize();
var d=b.x.redSqr(),h=b.y.redSqr();b=d.redMul(this.a).redAdd(h);d=this.c2.redMul(this.one.redAdd(this.d.redMul(d).redMul(h)));return 0===b.cmp(d)};Saa(vj,fG.BasePoint);Wp.prototype.pointFromJSON=function(b){return vj.fromJSON(this,b)};Wp.prototype.point=function(b,d,h,a){return new vj(this,b,d,h,a)};vj.fromJSON=function(b,d){return new vj(b,d[0],d[1],d[2])};vj.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,
2)+" z: "+this.z.fromRed().toString(16,2)+">"};vj.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))};vj.prototype._extDbl=function(){var b=this.x.redSqr(),d=this.y.redSqr(),h=this.z.redSqr();h=h.redIAdd(h);var a=this.curve._mulA(b),e=this.x.redAdd(this.y).redSqr().redISub(b).redISub(d);b=a.redAdd(d);h=b.redSub(h);var n=a.redSub(d);d=e.redMul(h);a=b.redMul(n);e=e.redMul(n);b=h.redMul(b);return this.curve.point(d,a,b,e)};vj.prototype._projDbl=
function(){var b=this.x.redAdd(this.y).redSqr();var d=this.x.redSqr();var h=this.y.redSqr();if(this.curve.twisted){var a=(n=this.curve._mulA(d)).redAdd(h);if(this.zOne)b=b.redSub(d).redSub(h).redMul(a.redSub(this.curve.two)),d=a.redMul(n.redSub(h)),a=a.redSqr().redSub(a).redSub(a);else{var e=this.z.redSqr();e=a.redSub(e).redISub(e);b=b.redSub(d).redISub(h).redMul(e);d=a.redMul(n.redSub(h));a=a.redMul(e)}}else{var n=d.redAdd(h);e=this.curve._mulC(this.z).redSqr();e=n.redSub(e).redSub(e);b=this.curve._mulC(b.redISub(n)).redMul(e);
d=this.curve._mulC(n).redMul(d.redISub(h));a=n.redMul(e)}return this.curve.point(b,d,a)};vj.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};vj.prototype._extAdd=function(b){var d=this.y.redSub(this.x).redMul(b.y.redSub(b.x)),h=this.y.redAdd(this.x).redMul(b.y.redAdd(b.x)),a=this.t.redMul(this.curve.dd).redMul(b.t),e=this.z.redMul(b.z.redAdd(b.z)),n=h.redSub(d);b=e.redSub(a);a=e.redAdd(a);e=h.redAdd(d);d=n.redMul(b);h=a.redMul(e);n=n.redMul(e);
b=b.redMul(a);return this.curve.point(d,h,b,n)};vj.prototype._projAdd=function(b){var d,h,a=this.z.redMul(b.z),e=a.redSqr(),n=this.x.redMul(b.x),q=this.y.redMul(b.y),r=this.curve.d.redMul(n).redMul(q),v=e.redSub(r);e=e.redAdd(r);b=this.x.redAdd(this.y).redMul(b.x.redAdd(b.y)).redISub(n).redISub(q);b=a.redMul(v).redMul(b);return this.curve.twisted?(d=a.redMul(e).redMul(q.redSub(this.curve._mulA(n))),h=v.redMul(e)):(d=a.redMul(e).redMul(q.redSub(n)),h=this.curve._mulC(v).redMul(e)),this.curve.point(b,
d,h)};vj.prototype.add=function(b){return this.isInfinity()?b:b.isInfinity()?this:this.curve.extended?this._extAdd(b):this._projAdd(b)};vj.prototype.mul=function(b){return this._hasDoubles(b)?this.curve._fixedNafMul(this,b):this.curve._wnafMul(this,b)};vj.prototype.mulAdd=function(b,d,h){return this.curve._wnafMulAdd(1,[this,d],[b,h],2,!1)};vj.prototype.jmulAdd=function(b,d,h){return this.curve._wnafMulAdd(1,[this,d],[b,h],2,!0)};vj.prototype.normalize=function(){if(this.zOne)return this;var b=this.z.redInvm();
return this.x=this.x.redMul(b),this.y=this.y.redMul(b),this.t&&(this.t=this.t.redMul(b)),this.z=this.curve.one,this.zOne=!0,this};vj.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};vj.prototype.getX=function(){return this.normalize(),this.x.fromRed()};vj.prototype.getY=function(){return this.normalize(),this.y.fromRed()};vj.prototype.eq=function(b){return this===b||0===this.getX().cmp(b.getX())&&0===this.getY().cmp(b.getY())};vj.prototype.eqXToP=
function(b){var d=b.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(d))return!0;b=b.clone();for(var h=this.curve.redN.redMul(this.z);;){if(b.iadd(this.curve.n),0<=b.cmp(this.curve.p))return!1;if(d.redIAdd(h),0===this.x.cmp(d))return!0}};vj.prototype.toP=vj.prototype.normalize;vj.prototype.mixedAdd=vj.prototype.add;var Ny={};Ny.base=Yo;Ny.short=Xn;Ny.mont=Lx;Ny.edwards=Wp;var ata={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],
["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],
["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],
["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],
["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],
["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],
["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],
["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],
["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],
["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],
["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],
["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],
["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],
["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],
["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],
["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],
["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},
naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],
["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],
["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],
["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],
["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],
["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],
["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],
["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],
["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],
["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],
["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],
["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],
["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],
["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],
["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],
["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],
["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],
["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],
["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],
["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],
["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],
["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],
["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],
["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],
["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],
["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],
["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],
["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],
["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],
["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],
["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],
["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}},WJ={},AO=WJ,zO=Ny,K2=sh.assert;AO.PresetCurve=J2;Is("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",
a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:pj.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});Is("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",
n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:pj.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});Is("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",
hash:pj.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});Is("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",
n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:pj.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});Is("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",
a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:pj.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66",
"00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});Is("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:pj.sha256,gRed:!1,g:["9"]});Is("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",
a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:pj.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{var Taa=ata}catch(b){Taa=void 0}Is("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",
h:"1",hash:pj.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",Taa]});var bta=uk,Uaa=sh.assert;
ll.fromPublic=function(b,d,h){return d instanceof ll?d:new ll(b,{pub:d,pubEnc:h})};ll.fromPrivate=function(b,d,h){return d instanceof ll?d:new ll(b,{priv:d,privEnc:h})};ll.prototype.validate=function(){var b=this.getPublic();return b.isInfinity()?{result:!1,reason:"Invalid public key"}:b.validate()?b.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};ll.prototype.getPublic=function(b,d){return"string"==
typeof b&&(d=b,b=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),d?this.pub.encode(d,b):this.pub};ll.prototype.getPrivate=function(b){return"hex"===b?this.priv.toString(16,2):this.priv};ll.prototype._importPrivate=function(b,d){this.priv=new bta(b,d||16);this.priv=this.priv.umod(this.ec.curve.n)};ll.prototype._importPublic=function(b,d){if(b.x||b.y)return"mont"===this.ec.curve.type?Uaa(b.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||Uaa(b.x&&b.y,"Need both x and y coordinate"),
this.pub=this.ec.curve.point(b.x,b.y),void 0;this.pub=this.ec.curve.decodePoint(b,d)};ll.prototype.derive=function(b){return b.mul(this.priv).getX()};ll.prototype.sign=function(b,d,h){return this.ec.sign(b,this,d,h)};ll.prototype.verify=function(b,d){return this.ec.verify(b,d,this)};ll.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Av=uk,BO=WJ,L2=sh.assert;Yn.prototype.keyPair=function(b){return new ll(this,
b)};Yn.prototype.keyFromPrivate=function(b,d){return ll.fromPrivate(this,b,d)};Yn.prototype.keyFromPublic=function(b,d){return ll.fromPublic(this,b,d)};Yn.prototype.genKeyPair=function(b){b||(b={});b=new hr({hash:this.hash,pers:b.pers,persEnc:b.persEnc||"utf8",entropy:b.entropy||RJ(this.hash.hmacStrength),entropyEnc:b.entropy&&b.entropyEnc||"utf8",nonce:this.n.toArray()});for(var d=this.n.byteLength(),h=this.n.sub(new Av(2));;){var a=new Av(b.generate(d));if(!(0<a.cmp(h)))return a.iaddn(1),this.keyFromPrivate(a)}};
Yn.prototype._truncateToN=function(b,d){var h=8*b.byteLength()-this.n.bitLength();return 0<h&&(b=b.ushrn(h)),!d&&0<=b.cmp(this.n)?b.sub(this.n):b};Yn.prototype.sign=function(b,d,h,a){"object"==typeof h&&(a=h,h=null);a||(a={});d=this.keyFromPrivate(d,h);b=this._truncateToN(new Av(b,16));var e=this.n.byteLength();h=d.getPrivate().toArray("be",e);e=b.toArray("be",e);e=new hr({hash:this.hash,entropy:h,nonce:e,pers:a.pers,persEnc:a.persEnc||"utf8"});for(var n=this.n.sub(new Av(1)),q=0;;q++){var r=a.k?
a.k(q):new Av(e.generate(this.n.byteLength()));if(!(0>=(r=this._truncateToN(r,!0)).cmpn(1)||0<=r.cmp(n))){var v=this.g.mul(r);if(!v.isInfinity()){var y=v.getX();h=y.umod(this.n);if(0!==h.cmpn(0)&&(r=r.invm(this.n).mul(h.mul(d.getPrivate()).iadd(b)),0!==(r=r.umod(this.n)).cmpn(0)))return b=(v.getY().isOdd()?1:0)|(0!==y.cmp(h)?2:0),a.canonical&&0<r.cmp(this.nh)&&(r=this.n.sub(r),b^=1),new Ku({r:h,s:r,recoveryParam:b})}}}};Yn.prototype.verify=function(b,d,h,a){b=this._truncateToN(new Av(b,16));h=this.keyFromPublic(h,
a);a=(d=new Ku(d,"hex")).r;d=d.s;if(0>a.cmpn(1)||0<=a.cmp(this.n)||0>d.cmpn(1)||0<=d.cmp(this.n))return!1;var e;d=d.invm(this.n);b=d.mul(b).umod(this.n);d=d.mul(a).umod(this.n);return this.curve._maxwellTrick?!(e=this.g.jmulAdd(b,h.getPublic(),d)).isInfinity()&&e.eqXToP(a):!(e=this.g.mulAdd(b,h.getPublic(),d)).isInfinity()&&0===e.getX().umod(this.n).cmp(a)};Yn.prototype.recoverPubKey=function(b,d,h,a){L2((3&h)===h,"The recovery param is more than two bits");d=new Ku(d,a);a=this.n;var e=new Av(b);
b=d.r;var n=d.s,q=1&h;h>>=1;if(0<=b.cmp(this.curve.p.umod(this.curve.n))&&h)throw Error("Unable to find sencond key candinate");b=h?this.curve.pointFromX(b.add(this.curve.n),q):this.curve.pointFromX(b,q);d=d.r.invm(a);h=a.sub(e).mul(d).umod(a);a=n.mul(d).umod(a);return this.g.mulAdd(h,b,a)};Yn.prototype.getKeyRecoveryParam=function(b,d,h,a){if(null!==(d=new Ku(d,a)).recoveryParam)return d.recoveryParam;for(a=0;4>a;a++){try{var e=this.recoverPubKey(b,d,a)}catch(n){continue}if(e.eq(h))return a}throw Error("Unable to find valid recovery factor");
};var Vaa=sh.assert,M2=sh.parseBytes,Oy=sh.cachedProperty;Mk.fromPublic=function(b,d){return d instanceof Mk?d:new Mk(b,{pub:d})};Mk.fromSecret=function(b,d){return d instanceof Mk?d:new Mk(b,{secret:d})};Mk.prototype.secret=function(){return this._secret};Oy(Mk,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Oy(Mk,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Oy(Mk,"privBytes",function(){var b=this.eddsa,d=this.hash(),
h=b.encodingLength-1;b=d.slice(0,b.encodingLength);return b[0]&=248,b[h]&=127,b[h]|=64,b});Oy(Mk,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Oy(Mk,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Oy(Mk,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Mk.prototype.sign=function(b){return Vaa(this._secret,"KeyPair can only verify"),this.eddsa.sign(b,this)};Mk.prototype.verify=function(b,d){return this.eddsa.verify(b,d,
this)};Mk.prototype.getSecret=function(b){return Vaa(this._secret,"KeyPair is public only"),sh.encode(this.secret(),b)};Mk.prototype.getPublic=function(b){return sh.encode(this.pubBytes(),b)};var Tia=uk,Sia=sh.assert,XJ=sh.cachedProperty,Ria=sh.parseBytes;XJ(Js,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});XJ(Js,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});XJ(Js,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});XJ(Js,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});
Js.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Js.prototype.toHex=function(){return sh.encode(this.toBytes(),"hex").toUpperCase()};var Wia=pj,Via=WJ,Uia=sh.assert,Waa=sh.parseBytes;Km.prototype.sign=function(b,d){b=Waa(b);var h=this.keyFromSecret(d),a=this.hashInt(h.messagePrefix(),b);d=this.g.mul(a);var e=this.encodePoint(d);b=this.hashInt(e,h.pubBytes(),b).mul(h.priv());b=a.add(b).umod(this.curve.n);return this.makeSignature({R:d,S:b,Rencoded:e})};Km.prototype.verify=
function(b,d,h){b=Waa(b);d=this.makeSignature(d);h=this.keyFromPublic(h);b=this.hashInt(d.Rencoded(),h.pubBytes(),b);var a=this.g.mul(d.S());return d.R().add(h.pub().mul(b)).eq(a)};Km.prototype.hashInt=function(){for(var b=this.hash(),d=0;d<arguments.length;d++)b.update(arguments[d]);return sh.intFromLE(b.digest()).umod(this.curve.n)};Km.prototype.keyFromPublic=function(b){return Mk.fromPublic(this,b)};Km.prototype.keyFromSecret=function(b){return Mk.fromSecret(this,b)};Km.prototype.makeSignature=
function(b){return b instanceof Js?b:new Js(this,b)};Km.prototype.encodePoint=function(b){var d=b.getY().toArray("le",this.encodingLength);return d[this.encodingLength-1]|=b.getX().isOdd()?128:0,d};Km.prototype.decodePoint=function(b){var d=(b=sh.parseBytes(b)).length-1,h=b.slice(0,d).concat(-129&b[d]);b=0!=(128&b[d]);h=sh.intFromLE(h);return this.curve.pointFromY(h,b)};Km.prototype.encodeInt=function(b){return b.toArray("le",this.encodingLength)};Km.prototype.decodeInt=function(b){return sh.intFromLE(b)};
Km.prototype.isPoint=function(b){return b instanceof this.pointClass};var Jr={version:"6.5.2"};Jr.utils=sh;Jr.rand=RJ;Jr.curve=Ny;Jr.curves=WJ;Jr.ec=Yn;Jr.eddsa=Km;var OO={},d3=!1,gn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Nk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Q2={},cta=hh;Q2.Reporter=Zn;Zn.prototype.isError=function(b){return b instanceof Nx};Zn.prototype.save=function(){var b=(this||Nk)._reporterState;return{obj:b.obj,
pathLen:b.path.length}};Zn.prototype.restore=function(b){var d=(this||Nk)._reporterState;d.obj=b.obj;d.path=d.path.slice(0,b.pathLen)};Zn.prototype.enterKey=function(b){return(this||Nk)._reporterState.path.push(b)};Zn.prototype.exitKey=function(b){var d=(this||Nk)._reporterState;d.path=d.path.slice(0,b-1)};Zn.prototype.leaveKey=function(b,d,h){var a=(this||Nk)._reporterState;this.exitKey(b);null!==a.obj&&(a.obj[d]=h)};Zn.prototype.path=function(){return(this||Nk)._reporterState.path.join("/")};Zn.prototype.enterObject=
function(){var b=(this||Nk)._reporterState,d=b.obj;return b.obj={},d};Zn.prototype.leaveObject=function(b){var d=(this||Nk)._reporterState,h=d.obj;return d.obj=b,h};Zn.prototype.error=function(b){var d=(this||Nk)._reporterState,h=b instanceof Nx;if(b=h?b:new Nx(d.path.map(function(a){return"["+JSON.stringify(a)+"]"}).join(""),b.message||b,b.stack),!d.options.partial)throw b;return h||d.errors.push(b),b};Zn.prototype.wrapResult=function(b){var d=(this||Nk)._reporterState;return d.options.partial?{result:this.isError(b)?
null:b,errors:d.errors}:b};cta(Nx,Error);Nx.prototype.rethrow=function(b){if((this||Nk).message=b+" at: "+((this||Nk).path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this||Nk,Nx),!(this||Nk).stack)try{throw Error((this||Nk).message);}catch(d){(this||Nk).stack=d.stack}return this||Nk};var gG={},O2=!1,Dg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,DO={},R2=!1,cg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,CO={},
P2=!1,Ks={},U2=!1,EO={},T2=!1,FO={},W2=!1,Ls="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,IO={},Y2=!1,HO="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,GO={},X2=!1,JO={},$2=!1,Ok="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,MO={},b3=!1,LO="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,KO={},a3=!1,NO={},c3=!1,ek=hG(),Xaa=ek.define("Time",function(){this.choice({utcTime:this.utctime(),
generalTime:this.gentime()})}),dta=ek.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),IT=ek.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),eta=ek.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(IT),this.key("subjectPublicKey").bitstr())}),fta=ek.define("RelativeDistinguishedName",function(){this.setof(dta)}),
gta=ek.define("RDNSequence",function(){this.seqof(fta)}),Yaa=ek.define("Name",function(){this.choice({rdnSequence:this.use(gta)})}),hta=ek.define("Validity",function(){this.seq().obj(this.key("notBefore").use(Xaa),this.key("notAfter").use(Xaa))}),ita=ek.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),jta=ek.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),
this.key("serialNumber").int(),this.key("signature").use(IT),this.key("issuer").use(Yaa),this.key("validity").use(hta),this.key("subject").use(Yaa),this.key("subjectPublicKeyInfo").use(eta),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(ita).optional())}),kta=ek.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(jta),this.key("signatureAlgorithm").use(IT),
this.key("signatureValue").bitstr())}),rp={};rp.certificate=kta;var lta=ek.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});rp.RSAPrivateKey=lta;var mta=ek.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});
rp.RSAPublicKey=mta;var nta=ek.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(Zaa),this.key("subjectPublicKey").bitstr())});rp.PublicKey=nta;var Zaa=ek.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),ota=ek.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),
this.key("algorithm").use(Zaa),this.key("subjectPrivateKey").octstr())});rp.PrivateKey=ota;var pta=ek.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});
rp.EncryptedPrivateKey=pta;var qta=ek.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});rp.DSAPrivateKey=qta;rp.DSAparam=ek.define("DSAparam",function(){this.int()});var sta=ek.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(rta),this.key("publicKey").optional().explicit(1).bitstr())});
rp.ECPrivateKey=sta;var rta=ek.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});rp.signature=ek.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});var Zia=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/=]+)[\n\r]+/m,aja=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,$ia=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/=]+)-----END \1-----$/m,iG=bi.Buffer,Lm=rp,bja={"2.16.840.1.101.3.4.1.1":"aes-128-ecb",
"2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"},dja=hn,cja=MJ,PO=bi.Buffer;Ox.signature=Lm.signature;var $aa={"1.3.132.0.10":"secp256k1",
"1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"},JT={},Zl=Yg.Buffer,Ou=oaa,tta=Jr.ec,jG=uk;(JT=function(b,d,h,a,e){d=Ox(d);if(d.curve){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong private key type");return function(n,q){var r=$aa[q.curve.join(".")];if(!r)throw Error("unknown curve "+q.curve.join("."));n=(new tta(r)).keyFromPrivate(q.privateKey).sign(n);return new Zl(n.toDER())}(b,d)}if("dsa"===d.type){if("dsa"!==a)throw Error("wrong private key type");
return function(n,q,r){var v=q.params.priv_key,y=q.params.p,D=q.params.q;q=q.params.g;var E=new jG(0),I=QO(n,D).mod(D);var K=!1;for(n=e3(v,D,n,r);!1===K;){E=K=f3(D,n,r);var P=D;E=q.toRed(jG.mont(y)).redPow(E).fromRed().mod(P);0===(K=K.invm(D).imul(I.add(v.mul(E))).mod(D)).cmpn(0)&&(K=!1,E=new jG(0))}r=K;v=E.toArray();r=r.toArray();128&v[0]&&(v=[0].concat(v));128&r[0]&&(r=[0].concat(r));y=[48,v.length+r.length+4,2,v.length];return y=y.concat(v,[2,r.length],r),new Zl(y)}(b,d,h)}if("rsa"!==a&&"ecdsa/rsa"!==
a)throw Error("wrong private key type");b=Zl.concat([e,b]);a=d.modulus.byteLength();for(h=[0,1];b.length+h.length+1<a;)h.push(255);h.push(0);for(a=-1;++a<b.length;)h.push(b[a]);return bG(h,d)}).getKey=e3;JT.makeKey=f3;var KT=Yg.Buffer,CC=uk,uta=Jr.ec,Yj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,YJ=Yg.Buffer,h3=xC,kG=Mn,aba=hh,vta=JT,wta=function(b,d,h,a,e){h=Ox(h);if("ec"===h.type){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");return function(r,
v,y){var D=$aa[y.data.algorithm.curve.join(".")];if(!D)throw Error("unknown curve "+y.data.algorithm.curve.join("."));return(new uta(D)).verify(v,r,y.data.subjectPrivateKey.data)}(b,d,h)}if("dsa"===h.type){if("dsa"!==a)throw Error("wrong public key type");return function(r,v,y){var D=y.data.p,E=y.data.q,I=y.data.g;y=y.data.pub_key;var K=Ox.signature.decode(r,"der");r=K.s;K=K.r;g3(r,E);g3(K,E);var P=CC.mont(D);r=r.invm(E);return 0===I.toRed(P).redPow((new CC(v)).mul(r).mod(E)).fromRed().mul(y.toRed(P).redPow(K.mul(r).mod(E)).fromRed()).mod(D).mod(E).cmp(K)}(b,
d,h)}if("rsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");d=KT.concat([e,d]);e=h.modulus.byteLength();a=[1];for(var n=0;d.length+a.length+2<e;)a.push(255),n++;a.push(0);for(var q=-1;++q<d.length;)a.push(d[q]);a=new KT(a);d=CC.mont(h.modulus);b=(b=(new CC(b)).toRed(d)).redPow(new CC(h.publicExponent));b=new KT(b.fromRed().toArray());d=8>n?1:0;e=Math.min(b.length,a.length);b.length!==a.length&&(d=1);for(q=-1;++q<e;)d|=b[q]^a[q];return 0===d},Pu=paa;Object.keys(Pu).forEach(function(b){Pu[b].id=
new YJ(Pu[b].id,"hex");Pu[b.toLowerCase()]=Pu[b]});aba(QA,kG.Writable);QA.prototype._write=function(b,d,h){(this||Yj)._hash.update(b);h()};QA.prototype.update=function(b,d){return"string"==typeof b&&(b=new YJ(b,d)),(this||Yj)._hash.update(b),this||Yj};QA.prototype.sign=function(b,d){this.end();var h=(this||Yj)._hash.digest();b=vta(h,b,(this||Yj)._hashType,(this||Yj)._signType,(this||Yj)._tag);return d?b.toString(d):b};aba(RA,kG.Writable);RA.prototype._write=function(b,d,h){(this||Yj)._hash.update(b);
h()};RA.prototype.update=function(b,d){return"string"==typeof b&&(b=new YJ(b,d)),(this||Yj)._hash.update(b),this||Yj};RA.prototype.verify=function(b,d,h){"string"==typeof d&&(d=new YJ(d,h));this.end();h=(this||Yj)._hash.digest();return wta(d,h,b,(this||Yj)._signType,(this||Yj)._tag)};var Pk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,jr=Yg.Buffer,eja=Jr,xta=uk,jn={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",
byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};jn.p224=jn.secp224r1;jn.p256=jn.secp256r1=jn.prime256v1;jn.p192=jn.secp192r1=jn.prime192v1;jn.p384=jn.secp384r1;jn.p521=jn.secp521r1;Qu.prototype.generateKeys=function(b,d){return(this||Pk).keys=(this||Pk).curve.genKeyPair(),this.getPublicKey(b,d)};Qu.prototype.computeSecret=function(b,d,h){return d=d||"utf8",jr.isBuffer(b)||(b=new jr(b,
d)),RO((this||Pk).curve.keyFromPublic(b).getPublic().mul((this||Pk).keys.getPrivate()).getX(),h,(this||Pk).curveType.byteLength)};Qu.prototype.getPublicKey=function(b,d){var h=(this||Pk).keys.getPublic("compressed"===d,!0);return"hybrid"===d&&(h[h.length-1]%2?h[0]=7:h[0]=6),RO(h,b)};Qu.prototype.getPrivateKey=function(b){return RO((this||Pk).keys.getPrivate(),b)};Qu.prototype.setPublicKey=function(b,d){return d=d||"utf8",jr.isBuffer(b)||(b=new jr(b,d)),(this||Pk).keys._importPublic(b),this||Pk};Qu.prototype.setPrivateKey=
function(b,d){d=d||"utf8";jr.isBuffer(b)||(b=new jr(b,d));b=new xta(b);return b=b.toString(16),(this||Pk).keys=(this||Pk).curve.genKeyPair(),(this||Pk).keys._importPrivate(b),this||Pk};var LT=bi.Buffer,ZJ=function(b,d){for(var h,a=LT.alloc(0),e=0;a.length<d;){h=e++;var n=LT.allocUnsafe(4);h=(n.writeUInt32BE(h,0),n);a=LT.concat([a,xC("sha1").update(b).update(h).digest()])}return a.slice(0,d)},$J=function(b,d){for(var h=b.length,a=-1;++a<h;)b[a]^=d[a];return b},bba=uk,yta=bi.Buffer,cba=function(b,d){return yta.from(b.toRed(bba.mont(d.modulus)).redPow(new bba(d.publicExponent)).fromRed().toArray())},
MT=uk,sp=bi.Buffer,dba=uk,DC=bi.Buffer,Py={publicEncrypt:function(b,d,h){var a=b.padding?b.padding:h?1:4;b=Ox(b);if(4===a)d=function(e,n){e=e.modulus.byteLength();var q=n.length,r=xC("sha1").update(sp.alloc(0)).digest(),v=r.length,y=2*v;if(q>e-y-2)throw Error("message too long");y=sp.alloc(e-q-y-2);var D=e-v-1;q=kt(v);n=$J(sp.concat([r,y,sp.alloc(1,1),n],D),ZJ(q,D));v=$J(q,ZJ(n,v));return new MT(sp.concat([sp.alloc(1),v,n],e))}(b,d);else if(1===a)d=function(e,n,q){var r=n.length;e=e.modulus.byteLength();
if(r>e-11)throw Error("message too long");if(q)var v=sp.alloc(e-r-3,255);else{r=e-r-3;for(var y=sp.allocUnsafe(r),D=0,E=kt(2*r),I=0;D<r;)I===E.length&&(E=kt(2*r),I=0),(v=E[I++])&&(y[D++]=v);v=y}return new MT(sp.concat([sp.from([0,q?1:2]),v,sp.alloc(1),n],e))}(b,d,h);else{if(3!==a)throw Error("unknown padding");if(0<=(d=new MT(d)).cmp(b.modulus))throw Error("data too long for modulus");}return h?bG(d,b):cba(d,b)},privateDecrypt:function(b,d,h){var a=b.padding?b.padding:h?1:4;b=Ox(b);var e=b.modulus.byteLength();
if(d.length>e||0<=(new dba(d)).cmp(b.modulus))throw Error("decryption error");d=h?cba(new dba(d),b):bG(d,b);var n=DC.alloc(e-d.length);if(d=DC.concat([n,d],e),4===a)return function(q,r){var v=q.modulus.byteLength(),y=xC("sha1").update(DC.alloc(0)).digest();q=y.length;if(0!==r[0])throw Error("decryption error");var D=r.slice(1,q+1);r=r.slice(q+1);D=$J(D,ZJ(r,q));v=$J(r,ZJ(D,v-q-1));r=v.slice(0,q);y=DC.from(y);r=DC.from(r);D=0;var E=y.length;y.length!==r.length&&(D++,E=Math.min(y.length,r.length));
for(var I=-1;++I<E;)D+=y[I]^r[I];if(D)throw Error("decryption error");for(;0===v[q];)q++;if(1!==v[q++])throw Error("decryption error");return v.slice(q)}(b,d);if(1===a)return function(q,r,v){q=r.slice(0,2);for(var y=2,D=0;0!==r[y++];)if(y>=r.length){D++;break}var E=r.slice(2,y-1);("0002"!==q.toString("hex")&&!v||"0001"!==q.toString("hex")&&v)&&D++;8>E.length&&D++;if(D)throw Error("decryption error");return r.slice(y)}(0,d,h);if(3===a)return d;throw Error("unknown padding");},privateEncrypt:function(b,
d){return Py.publicEncrypt(b,d,!0)},publicDecrypt:function(b,d){return Py.privateDecrypt(b,d,!0)}},aK="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,NT,OT,SO=Jg,q3=kt,eba=bi.Buffer,n3=bi.kMaxLength,TO=aK.crypto||aK.msCrypto,m3=Math.pow(2,32)-1;TO&&TO.getRandomValues||!SO.browser?(NT=function(b,d,h,a){if(!(eba.isBuffer(b)||b instanceof aK.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof d)a=d,d=0,h=b.length;else if("function"==
typeof h)a=h,h=b.length-d;else if("function"!=typeof a)throw new TypeError('"cb" argument must be a function');return l3(d,b.length),o3(h,d,b.length),p3(b,d,h,a)},OT=function(b,d,h){void 0===d&&(d=0);if(!(eba.isBuffer(b)||b instanceof aK.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');l3(d,b.length);void 0===h&&(h=b.length-d);return o3(h,d,b.length),p3(b,d,h)}):(NT=k3,OT=k3);var zh={};zh.randomBytes=zh.rng=zh.pseudoRandomBytes=zh.prng=kt;zh.createHash=zh.Hash=xC;zh.createHmac=
zh.Hmac=oaa;var zta=Object.keys(paa),Ata="sha1 sha224 sha256 sha384 sha512 md5 rmd160".split(" ").concat(zta);zh.getHashes=function(){return Ata};zh.pbkdf2=MJ.pbkdf2;zh.pbkdf2Sync=MJ.pbkdf2Sync;zh.Cipher=Baa;zh.createCipher=vsa;zh.Cipheriv=qO;zh.createCipheriv=qO;zh.Decipher=Caa;zh.createDecipher=wsa;zh.Decipheriv=sO;zh.createDecipheriv=sO;zh.getCiphers=Daa;zh.listCiphers=xsa;zh.DiffieHellmanGroup=Fsa;zh.createDiffieHellmanGroup=Iaa;zh.getDiffieHellman=Jaa;zh.createDiffieHellman=Gsa;zh.DiffieHellman=
Kaa;zh.createSign=i3;zh.Sign=i3;zh.createVerify=j3;zh.Verify=j3;zh.createECDH=function(b){return new Qu(b)};zh.publicEncrypt=Py.publicEncrypt;zh.privateEncrypt=Py.privateEncrypt;zh.publicDecrypt=Py.publicDecrypt;zh.privateDecrypt=Py.privateDecrypt;zh.randomFill=NT;zh.randomFillSync=OT;zh.createCredentials=function(){throw Error("sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/crypto-browserify/crypto-browserify");};zh.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,
DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6};var mG={},r3=!1,lG="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,VO={},u3=!1,t3="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,WO={},w3=!1,hja={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},
modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},
modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},
modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},
modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},
modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}},
XO={},x3=!1,gi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Ru={},y3=!1,A3={},z3=!1,ZO={exports:A3},fb="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,C3={},B3=!1,vja={_args:[["elliptic@6.5.4","C:\\Users\\guybe\\Projects\\rollup-plugin-jspm"]],_from:"elliptic@6.5.4",_id:"elliptic@6.5.4",_inBundle:!1,_integrity:"sha512-iLhC6ULemrljPZb+QutR5TQGB+pdW6KGD5RSegS+8sorOZT+rdQFbsQFJgvN3eRqNALqJer4oQ16YvJHlU8hzQ==",_location:"/@jspm/core/elliptic",
_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"elliptic@6.5.4",name:"elliptic",escapedName:"elliptic",rawSpec:"6.5.4",saveSpec:null,fetchSpec:"6.5.4"},_requiredBy:["/@jspm/core/browserify-sign","/@jspm/core/create-ecdh"],_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-6.5.4.tgz",_spec:"6.5.4",_where:"C:\\Users\\guybe\\Projects\\rollup-plugin-jspm",author:{name:"Fedor Indutny",email:"fedor@indutny.com"},bugs:{url:"https://github.com/indutny/elliptic/issues"},dependencies:{"bn.js":"^4.11.9",
brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},description:"EC cryptography",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},files:["lib"],
homepage:"https://github.com/indutny/elliptic",keywords:["EC","Elliptic","curve","Cryptography"],license:"MIT",main:"lib/elliptic.js",name:"elliptic",repository:{type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},version:"6.5.4"},E3={},D3=!1,aP={exports:E3},kb="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,bP={},G3=!1,cP={},H3=!1,dP={},I3=!1,eP={},J3=!1,fP={},K3=!1,gP={},L3=!1,hP={},N3=!1,fj={},O3=!1,iP={},Q3=!1,nja={},U3=!1,jP={},R3=!1,kP={},S3=!1,mP={},T3=!1,X3={},W3=!1,oP={},V3=!1,pP={},Y3=!1,qP={},Z3=!1,rP={},$3=!1,sP={},a4=!1,c4={},b4=!1,e4={},d4=!1,tP={},f4=!1,vP={},g4=!1,j4={},i4=!1,wP={exports:j4},lb="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,l4={},k4=!1,zP={},m4=!1,pG={},n4=!1,BP={},o4=!1,Ms={},p4=!1,DP=
{},r4=!1,EP={},s4=!1,FP={},u4=!1,GP={},w4=!1,HP={},x4=!1,IP={},z4=!1,JP={},A4=!1,F4={},E4=!1,KP={},B4=!1,LP={},D4=!1,H4={},G4=!1,bo={},I4=!1,Dja={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb",
"2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"},K4={},J4=!1,MP={},L4=!1,N4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"},TA={},M4=!1,P4={},O4=!1,R4={},Q4=!1,Zj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,U4={},T4=!1,NP={exports:U4},mb="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof self?self:global,OP={},V4=!1,Qk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Y4={},X4=!1,a5={},$4=!1,c5={},b5=!1,QP={exports:c5},nb="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,f5={},e5=!1,h5={},g5=!1,j5={},i5=!1,Ns={},k5=!1,Px={},l5=!1,rG="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,th={},fba=!1,vo=function(){if(fba)return th;fba=!0;th.randomBytes=th.rng=th.pseudoRandomBytes=th.prng=
zx();th.createHash=th.Hash=AA();th.createHmac=th.Hmac=y0();haa||(haa=!0,gaa=S4);var b=gaa;b=Object.keys(b);var d="sha1 sha224 sha256 sha384 sha512 md5 rmd160".split(" ").concat(b);th.getHashes=function(){return d};b=P0();th.pbkdf2=b.pbkdf2;th.pbkdf2Sync=b.pbkdf2Sync;b=Uha();th.Cipher=b.Cipher;th.createCipher=b.createCipher;th.Cipheriv=b.Cipheriv;th.createCipheriv=b.createCipheriv;th.Decipher=b.Decipher;th.createDecipher=b.createDecipher;th.Decipheriv=b.Decipheriv;th.createDecipheriv=b.createDecipheriv;
th.getCiphers=b.getCiphers;th.listCiphers=b.listCiphers;b=gja();th.DiffieHellmanGroup=b.DiffieHellmanGroup;th.createDiffieHellmanGroup=b.createDiffieHellmanGroup;th.getDiffieHellman=b.getDiffieHellman;th.createDiffieHellman=b.createDiffieHellman;th.DiffieHellman=b.DiffieHellman;b=Gja();th.createSign=b.createSign;th.Sign=b.Sign;th.createVerify=b.createVerify;th.Verify=b.Verify;th.createECDH=Ija();b=Lja();th.publicEncrypt=b.publicEncrypt;th.privateEncrypt=b.privateEncrypt;th.publicDecrypt=b.publicDecrypt;
th.privateDecrypt=b.privateDecrypt;b=Mja();th.randomFill=b.randomFill;th.randomFillSync=b.randomFillSync;th.createCredentials=function(){throw Error("sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/crypto-browserify/crypto-browserify");};th.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,
RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6};return th}(),UA={},m5=!1,sG={},n5=!1,Bv={},gba=!1,ol=function(){function b(Z){if(2147483647<Z)throw new RangeError('The value "'+Z+'" is invalid for option "size"');Z=new Uint8Array(Z);Object.setPrototypeOf(Z,d.prototype);return Z}function d(Z,sa,Da){if("number"===typeof Z){if("string"===typeof sa)throw new TypeError('The "string" argument must be of type string. Received type number');
return e(Z)}return h(Z,sa,Da)}function h(Z,sa,Da){if("string"===typeof Z){var X=sa;if("string"!==typeof X||""===X)X="utf8";if(!d.isEncoding(X))throw new TypeError("Unknown encoding: "+X);sa=y(Z,X)|0;Da=b(sa);Z=Da.write(Z,X);Z!==sa&&(Da=Da.slice(0,Z));return Da}if(ArrayBuffer.isView(Z))return na(Z,Uint8Array)?(Z=new Uint8Array(Z),Z=q(Z.buffer,Z.byteOffset,Z.byteLength)):Z=n(Z),Z;if(null==Z)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof Z);if(na(Z,ArrayBuffer)||Z&&na(Z.buffer,ArrayBuffer)||"undefined"!==typeof SharedArrayBuffer&&(na(Z,SharedArrayBuffer)||Z&&na(Z.buffer,SharedArrayBuffer)))return q(Z,sa,Da);if("number"===typeof Z)throw new TypeError('The "value" argument must not be of type number. Received type number');X=Z.valueOf&&Z.valueOf();if(null!=X&&X!==Z)return d.from(X,sa,Da);if(X=r(Z))return X;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof Z[Symbol.toPrimitive])return d.from(Z[Symbol.toPrimitive]("string"),
sa,Da);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Z);}function a(Z){if("number"!==typeof Z)throw new TypeError('"size" argument must be of type number');if(0>Z)throw new RangeError('The value "'+Z+'" is invalid for option "size"');}function e(Z){a(Z);return b(0>Z?0:v(Z)|0)}function n(Z){for(var sa=0>Z.length?0:v(Z.length)|0,Da=b(sa),X=0;X<sa;X+=1)Da[X]=Z[X]&255;return Da}function q(Z,sa,Da){if(0>sa||
Z.byteLength<sa)throw new RangeError('"offset" is outside of buffer bounds');if(Z.byteLength<sa+(Da||0))throw new RangeError('"length" is outside of buffer bounds');Z=void 0===sa&&void 0===Da?new Uint8Array(Z):void 0===Da?new Uint8Array(Z,sa):new Uint8Array(Z,sa,Da);Object.setPrototypeOf(Z,d.prototype);return Z}function r(Z){if(d.isBuffer(Z)){var sa=v(Z.length)|0,Da=b(sa);if(0===Da.length)return Da;Z.copy(Da,0,0,sa);return Da}if(void 0!==Z.length)return(sa="number"!==typeof Z.length)||(sa=Z.length,
sa=sa!==sa),sa?b(0):n(Z);if("Buffer"===Z.type&&Array.isArray(Z.data))return n(Z.data)}function v(Z){if(2147483647<=Z)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return Z|0}function y(Z,sa){if(d.isBuffer(Z))return Z.length;if(ArrayBuffer.isView(Z)||na(Z,ArrayBuffer))return Z.byteLength;if("string"!==typeof Z)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Z);
var Da=Z.length,X=2<arguments.length&&!0===arguments[2];if(!X&&0===Da)return 0;for(var ma=!1;;)switch(sa){case "ascii":case "latin1":case "binary":return Da;case "utf8":case "utf-8":return wa(Z).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*Da;case "hex":return Da>>>1;case "base64":return ia.toByteArray(Y(Z)).length;default:if(ma)return X?-1:wa(Z).length;sa=(""+sa).toLowerCase();ma=!0}}function D(Z,sa,Da){var X=!1;if(void 0===sa||0>sa)sa=0;if(sa>this.length)return"";if(void 0===
Da||Da>this.length)Da=this.length;if(0>=Da)return"";Da>>>=0;sa>>>=0;if(Da<=sa)return"";for(Z||(Z="utf8");;)switch(Z){case "hex":Z=this.length;if(!sa||0>sa)sa=0;if(!Da||0>Da||Da>Z)Da=Z;for(Z="";sa<Da;++sa)Z+=Bb[this[sa]];return Z;case "utf8":case "utf-8":return P(this,sa,Da);case "ascii":Z="";for(Da=Math.min(this.length,Da);sa<Da;++sa)Z+=String.fromCharCode(this[sa]&127);return Z;case "latin1":case "binary":Z="";for(Da=Math.min(this.length,Da);sa<Da;++sa)Z+=String.fromCharCode(this[sa]);return Z;case "base64":return sa=
0===sa&&Da===this.length?ia.fromByteArray(this):ia.fromByteArray(this.slice(sa,Da)),sa;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":sa=this.slice(sa,Da);Da="";for(Z=0;Z<sa.length-1;Z+=2)Da+=String.fromCharCode(sa[Z]+256*sa[Z+1]);return Da;default:if(X)throw new TypeError("Unknown encoding: "+Z);Z=(Z+"").toLowerCase();X=!0}}function E(Z,sa,Da){var X=Z[sa];Z[sa]=Z[Da];Z[Da]=X}function I(Z,sa,Da,X,ma){if(0===Z.length)return-1;"string"===typeof Da?(X=Da,Da=0):2147483647<Da?Da=2147483647:-2147483648>
Da&&(Da=-2147483648);Da=+Da;Da!==Da&&(Da=ma?0:Z.length-1);0>Da&&(Da=Z.length+Da);if(Da>=Z.length){if(ma)return-1;Da=Z.length-1}else if(0>Da)if(ma)Da=0;else return-1;"string"===typeof sa&&(sa=d.from(sa,X));if(d.isBuffer(sa))return 0===sa.length?-1:K(Z,sa,Da,X,ma);if("number"===typeof sa)return sa&=255,"function"===typeof Uint8Array.prototype.indexOf?ma?Uint8Array.prototype.indexOf.call(Z,sa,Da):Uint8Array.prototype.lastIndexOf.call(Z,sa,Da):K(Z,[sa],Da,X,ma);throw new TypeError("val must be string, number or Buffer");
}function K(Z,sa,Da,X,ma){function ta(Pb,Db){return 1===Pa?Pb[Db]:Pb.readUInt16BE(Db*Pa)}var Pa=1,Za=Z.length,Zb=sa.length;if(void 0!==X&&(X=String(X).toLowerCase(),"ucs2"===X||"ucs-2"===X||"utf16le"===X||"utf-16le"===X)){if(2>Z.length||2>sa.length)return-1;Pa=2;Za/=2;Zb/=2;Da/=2}if(ma)for(X=-1;Da<Za;Da++)if(ta(Z,Da)===ta(sa,-1===X?0:Da-X)){if(-1===X&&(X=Da),Da-X+1===Zb)return X*Pa}else-1!==X&&(Da-=Da-X),X=-1;else for(Da+Zb>Za&&(Da=Za-Zb);0<=Da;Da--){Za=!0;for(X=0;X<Zb;X++)if(ta(Z,Da+X)!==ta(sa,X)){Za=
!1;break}if(Za)return Da}return-1}function P(Z,sa,Da){Da=Math.min(Z.length,Da);for(var X=[];sa<Da;){var ma=Z[sa],ta=null,Pa=239<ma?4:223<ma?3:191<ma?2:1;if(sa+Pa<=Da)switch(Pa){case 1:128>ma&&(ta=ma);break;case 2:var Za=Z[sa+1];128===(Za&192)&&(ma=(ma&31)<<6|Za&63,127<ma&&(ta=ma));break;case 3:Za=Z[sa+1];var Zb=Z[sa+2];128===(Za&192)&&128===(Zb&192)&&(ma=(ma&15)<<12|(Za&63)<<6|Zb&63,2047<ma&&(55296>ma||57343<ma)&&(ta=ma));break;case 4:Za=Z[sa+1];Zb=Z[sa+2];var Pb=Z[sa+3];128===(Za&192)&&128===(Zb&
192)&&128===(Pb&192)&&(ma=(ma&15)<<18|(Za&63)<<12|(Zb&63)<<6|Pb&63,65535<ma&&1114112>ma&&(ta=ma))}null===ta?(ta=65533,Pa=1):65535<ta&&(ta-=65536,X.push(ta>>>10&1023|55296),ta=56320|ta&1023);X.push(ta);sa+=Pa}Z=X.length;if(4096>=Z)X=String.fromCharCode.apply(String,X);else{Da="";for(sa=0;sa<Z;)Da+=String.fromCharCode.apply(String,X.slice(sa,sa+=4096));X=Da}return X}function N(Z,sa,Da){if(0!==Z%1||0>Z)throw new RangeError("offset is not uint");if(Z+sa>Da)throw new RangeError("Trying to access beyond buffer length");
}function aa(Z,sa,Da,X,ma,ta){if(!d.isBuffer(Z))throw new TypeError('"buffer" argument must be a Buffer instance');if(sa>ma||sa<ta)throw new RangeError('"value" argument is out of bounds');if(Da+X>Z.length)throw new RangeError("Index out of range");}function m(Z,sa,Da,X,ma){L(sa,X,ma,Z,Da,7);X=Number(sa&BigInt(4294967295));Z[Da++]=X;X>>=8;Z[Da++]=X;X>>=8;Z[Da++]=X;Z[Da++]=X>>8;sa=Number(sa>>BigInt(32)&BigInt(4294967295));Z[Da++]=sa;sa>>=8;Z[Da++]=sa;sa>>=8;Z[Da++]=sa;Z[Da++]=sa>>8;return Da}function t(Z,
sa,Da,X,ma){L(sa,X,ma,Z,Da,7);X=Number(sa&BigInt(4294967295));Z[Da+7]=X;X>>=8;Z[Da+6]=X;X>>=8;Z[Da+5]=X;Z[Da+4]=X>>8;sa=Number(sa>>BigInt(32)&BigInt(4294967295));Z[Da+3]=sa;sa>>=8;Z[Da+2]=sa;sa>>=8;Z[Da+1]=sa;Z[Da]=sa>>8;return Da+8}function u(Z,sa,Da,X,ma,ta){if(Da+X>Z.length)throw new RangeError("Index out of range");if(0>Da)throw new RangeError("Index out of range");}function B(Z,sa,Da,X,ma){sa=+sa;Da>>>=0;ma||u(Z,sa,Da,4);Oa.write(Z,sa,Da,X,23,4);return Da+4}function A(Z,sa,Da,X,ma){sa=+sa;Da>>>=
0;ma||u(Z,sa,Da,8);Oa.write(Z,sa,Da,X,52,8);return Da+8}function H(Z,sa,Da){var X=function(){var ma=Da.call(this)||this;Object.defineProperty(ma,"message",{value:sa.apply(ma,arguments),writable:!0,configurable:!0});ma.name=ma.name+" ["+Z+"]";ma.stack;delete ma.name;return ma};$jscomp.inherits(X,Da);X.prototype.toString=function(){return this.name+" ["+Z+"]: "+this.message};$jscomp.global.Object.defineProperties(X.prototype,{code:{configurable:!0,enumerable:!0,get:function(){return Z},set:function(ma){Object.defineProperty(this,
"code",{configurable:!0,enumerable:!0,value:ma,writable:!0})}}});eb[Z]=X}function F(Z){for(var sa="",Da=Z.length,X="-"===Z[0]?1:0;Da>=X+4;Da-=3)sa="_"+Z.slice(Da-3,Da)+sa;return""+Z.slice(0,Da)+sa}function L(Z,sa,Da,X,ma,ta){if(Z>Da||Z<sa)throw X="bigint"===typeof sa?"n":"",new eb.ERR_OUT_OF_RANGE("value",3<ta?0===sa||sa===BigInt(0)?">= 0"+X+" and < 2"+X+" ** "+8*(ta+1)+X:">= -(2"+X+" ** "+(8*(ta+1)-1)+X+") and < 2 ** "+(""+(8*(ta+1)-1)+X):">= "+sa+X+" and <= "+Da+X,Z);U(ma,"offset");void 0!==X[ma]&&
void 0!==X[ma+ta]||T(ma,X.length-(ta+1))}function U(Z,sa){if("number"!==typeof Z)throw new eb.ERR_INVALID_ARG_TYPE(sa,"number",Z);}function T(Z,sa,Da){if(Math.floor(Z)!==Z)throw U(Z,Da),new eb.ERR_OUT_OF_RANGE(Da||"offset","an integer",Z);if(0>sa)throw new eb.ERR_BUFFER_OUT_OF_BOUNDS;throw new eb.ERR_OUT_OF_RANGE(Da||"offset",">= "+(Da?1:0)+" and <= "+sa,Z);}function Y(Z){Z=Z.split("=")[0];Z=Z.trim().replace(Sa,"");if(2>Z.length)return"";for(;0!==Z.length%4;)Z+="=";return Z}function wa(Z,sa){sa=sa||
Infinity;for(var Da,X=Z.length,ma=null,ta=[],Pa=0;Pa<X;++Pa){Da=Z.charCodeAt(Pa);if(55295<Da&&57344>Da){if(!ma){if(56319<Da){-1<(sa-=3)&&ta.push(239,191,189);continue}else if(Pa+1===X){-1<(sa-=3)&&ta.push(239,191,189);continue}ma=Da;continue}if(56320>Da){-1<(sa-=3)&&ta.push(239,191,189);ma=Da;continue}Da=(ma-55296<<10|Da-56320)+65536}else ma&&-1<(sa-=3)&&ta.push(239,191,189);ma=null;if(128>Da){if(0>--sa)break;ta.push(Da)}else if(2048>Da){if(0>(sa-=2))break;ta.push(Da>>6|192,Da&63|128)}else if(65536>
Da){if(0>(sa-=3))break;ta.push(Da>>12|224,Da>>6&63|128,Da&63|128)}else if(1114112>Da){if(0>(sa-=4))break;ta.push(Da>>18|240,Da>>12&63|128,Da>>6&63|128,Da&63|128)}else throw Error("Invalid code point");}return ta}function Ga(Z,sa,Da,X){var ma;for(ma=0;ma<X&&!(ma+Da>=sa.length||ma>=Z.length);++ma)sa[ma+Da]=Z[ma];return ma}function na(Z,sa){return Z instanceof sa||null!=Z&&null!=Z.constructor&&null!=Z.constructor.name&&Z.constructor.name===sa.name}function ea(Z){return"undefined"===typeof BigInt?da:
Z}function da(){throw Error("BigInt not supported");}if(gba)return Bv;gba=!0;var ia=Nja(),Oa=Oja(),Va="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;Bv.Buffer=d;Bv.SlowBuffer=function(Z){+Z!=Z&&(Z=0);return d.alloc(+Z)};Bv.INSPECT_MAX_BYTES=50;Bv.kMaxLength=2147483647;d.TYPED_ARRAY_SUPPORT=function(){try{var Z=new Uint8Array(1),sa={foo:function(){return 42}};Object.setPrototypeOf(sa,Uint8Array.prototype);Object.setPrototypeOf(Z,sa);return 42===
Z.foo()}catch(Da){return!1}}();d.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}});Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});
d.poolSize=8192;d.from=function(Z,sa,Da){return h(Z,sa,Da)};Object.setPrototypeOf(d.prototype,Uint8Array.prototype);Object.setPrototypeOf(d,Uint8Array);d.alloc=function(Z,sa,Da){a(Z);Z=0>=Z?b(Z):void 0!==sa?"string"===typeof Da?b(Z).fill(sa,Da):b(Z).fill(sa):b(Z);return Z};d.allocUnsafe=function(Z){return e(Z)};d.allocUnsafeSlow=function(Z){return e(Z)};d.isBuffer=function(Z){return null!=Z&&!0===Z._isBuffer&&Z!==d.prototype};d.compare=function(Z,sa){na(Z,Uint8Array)&&(Z=d.from(Z,Z.offset,Z.byteLength));
na(sa,Uint8Array)&&(sa=d.from(sa,sa.offset,sa.byteLength));if(!d.isBuffer(Z)||!d.isBuffer(sa))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Z===sa)return 0;for(var Da=Z.length,X=sa.length,ma=0,ta=Math.min(Da,X);ma<ta;++ma)if(Z[ma]!==sa[ma]){Da=Z[ma];X=sa[ma];break}return Da<X?-1:X<Da?1:0};d.isEncoding=function(Z){switch(String(Z).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};d.concat=function(Z,sa){if(!Array.isArray(Z))throw new TypeError('"list" argument must be an Array of Buffers');if(0===Z.length)return d.alloc(0);var Da;if(void 0===sa)for(Da=sa=0;Da<Z.length;++Da)sa+=Z[Da].length;sa=d.allocUnsafe(sa);var X=0;for(Da=0;Da<Z.length;++Da){var ma=Z[Da];if(na(ma,Uint8Array))X+ma.length>sa.length?(d.isBuffer(ma)||(ma=d.from(ma)),ma.copy(sa,X)):Uint8Array.prototype.set.call(sa,ma,X);else if(d.isBuffer(ma))ma.copy(sa,X);else throw new TypeError('"list" argument must be an Array of Buffers');
X+=ma.length}return sa};d.byteLength=y;d.prototype._isBuffer=!0;d.prototype.swap16=function(){var Z=this.length;if(0!==Z%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var sa=0;sa<Z;sa+=2)E(this,sa,sa+1);return this};d.prototype.swap32=function(){var Z=this.length;if(0!==Z%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var sa=0;sa<Z;sa+=4)E(this,sa,sa+3),E(this,sa+1,sa+2);return this};d.prototype.swap64=function(){var Z=this.length;if(0!==Z%8)throw new RangeError("Buffer size must be a multiple of 64-bits");
for(var sa=0;sa<Z;sa+=8)E(this,sa,sa+7),E(this,sa+1,sa+6),E(this,sa+2,sa+5),E(this,sa+3,sa+4);return this};d.prototype.toString=function(){var Z=this.length;return 0===Z?"":0===arguments.length?P(this,0,Z):D.apply(this,arguments)};d.prototype.toLocaleString=d.prototype.toString;d.prototype.equals=function(Z){if(!d.isBuffer(Z))throw new TypeError("Argument must be a Buffer");return this===Z?!0:0===d.compare(this,Z)};d.prototype.inspect=function(){var Z=Bv.INSPECT_MAX_BYTES;var sa=this.toString("hex",
0,Z).replace(/(.{2})/g,"$1 ").trim();this.length>Z&&(sa+=" ... ");return"<Buffer "+sa+">"};Va&&(d.prototype[Va]=d.prototype.inspect);d.prototype.compare=function(Z,sa,Da,X,ma){na(Z,Uint8Array)&&(Z=d.from(Z,Z.offset,Z.byteLength));if(!d.isBuffer(Z))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Z);void 0===sa&&(sa=0);void 0===Da&&(Da=Z?Z.length:0);void 0===X&&(X=0);void 0===ma&&(ma=this.length);if(0>sa||Da>Z.length||0>X||ma>this.length)throw new RangeError("out of range index");
if(X>=ma&&sa>=Da)return 0;if(X>=ma)return-1;if(sa>=Da)return 1;sa>>>=0;Da>>>=0;X>>>=0;ma>>>=0;if(this===Z)return 0;var ta=ma-X,Pa=Da-sa,Za=Math.min(ta,Pa);X=this.slice(X,ma);Z=Z.slice(sa,Da);for(sa=0;sa<Za;++sa)if(X[sa]!==Z[sa]){ta=X[sa];Pa=Z[sa];break}return ta<Pa?-1:Pa<ta?1:0};d.prototype.includes=function(Z,sa,Da){return-1!==this.indexOf(Z,sa,Da)};d.prototype.indexOf=function(Z,sa,Da){return I(this,Z,sa,Da,!0)};d.prototype.lastIndexOf=function(Z,sa,Da){return I(this,Z,sa,Da,!1)};d.prototype.write=
function(Z,sa,Da,X){if(void 0===sa)X="utf8",Da=this.length,sa=0;else if(void 0===Da&&"string"===typeof sa)X=sa,Da=this.length,sa=0;else if(isFinite(sa))sa>>>=0,isFinite(Da)?(Da>>>=0,void 0===X&&(X="utf8")):(X=Da,Da=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ma=this.length-sa;if(void 0===Da||Da>ma)Da=ma;if(0<Z.length&&(0>Da||0>sa)||sa>this.length)throw new RangeError("Attempt to write outside buffer bounds");X||(X="utf8");for(ma=!1;;)switch(X){case "hex":a:{sa=
Number(sa)||0;X=this.length-sa;Da?(Da=Number(Da),Da>X&&(Da=X)):Da=X;X=Z.length;Da>X/2&&(Da=X/2);for(X=0;X<Da;++X){ma=parseInt(Z.substr(2*X,2),16);if(ma!==ma){Z=X;break a}this[sa+X]=ma}Z=X}return Z;case "utf8":case "utf-8":return Ga(wa(Z,this.length-sa),this,sa,Da);case "ascii":case "latin1":case "binary":X=[];for(ma=0;ma<Z.length;++ma)X.push(Z.charCodeAt(ma)&255);return Ga(X,this,sa,Da);case "base64":return Ga(ia.toByteArray(Y(Z)),this,sa,Da);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":X=
Z;ma=this.length-sa;for(var ta=[],Pa=0;Pa<X.length&&!(0>(ma-=2));++Pa){var Za=X.charCodeAt(Pa);Z=Za>>8;Za%=256;ta.push(Za);ta.push(Z)}return Ga(ta,this,sa,Da);default:if(ma)throw new TypeError("Unknown encoding: "+X);X=(""+X).toLowerCase();ma=!0}};d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};d.prototype.slice=function(Z,sa){var Da=this.length;Z=~~Z;sa=void 0===sa?Da:~~sa;0>Z?(Z+=Da,0>Z&&(Z=0)):Z>Da&&(Z=Da);0>sa?(sa+=Da,0>sa&&(sa=0)):sa>Da&&
(sa=Da);sa<Z&&(sa=Z);Z=this.subarray(Z,sa);Object.setPrototypeOf(Z,d.prototype);return Z};d.prototype.readUintLE=d.prototype.readUIntLE=function(Z,sa,Da){Z>>>=0;sa>>>=0;Da||N(Z,sa,this.length);Da=this[Z];for(var X=1,ma=0;++ma<sa&&(X*=256);)Da+=this[Z+ma]*X;return Da};d.prototype.readUintBE=d.prototype.readUIntBE=function(Z,sa,Da){Z>>>=0;sa>>>=0;Da||N(Z,sa,this.length);Da=this[Z+--sa];for(var X=1;0<sa&&(X*=256);)Da+=this[Z+--sa]*X;return Da};d.prototype.readUint8=d.prototype.readUInt8=function(Z,sa){Z>>>=
0;sa||N(Z,1,this.length);return this[Z]};d.prototype.readUint16LE=d.prototype.readUInt16LE=function(Z,sa){Z>>>=0;sa||N(Z,2,this.length);return this[Z]|this[Z+1]<<8};d.prototype.readUint16BE=d.prototype.readUInt16BE=function(Z,sa){Z>>>=0;sa||N(Z,2,this.length);return this[Z]<<8|this[Z+1]};d.prototype.readUint32LE=d.prototype.readUInt32LE=function(Z,sa){Z>>>=0;sa||N(Z,4,this.length);return(this[Z]|this[Z+1]<<8|this[Z+2]<<16)+16777216*this[Z+3]};d.prototype.readUint32BE=d.prototype.readUInt32BE=function(Z,
sa){Z>>>=0;sa||N(Z,4,this.length);return 16777216*this[Z]+(this[Z+1]<<16|this[Z+2]<<8|this[Z+3])};d.prototype.readBigUInt64LE=ea(function(Z){Z>>>=0;U(Z,"offset");var sa=this[Z],Da=this[Z+7];void 0!==sa&&void 0!==Da||T(Z,this.length-8);sa=sa+this[++Z]*Math.pow(2,8)+this[++Z]*Math.pow(2,16)+this[++Z]*Math.pow(2,24);Z=this[++Z]+this[++Z]*Math.pow(2,8)+this[++Z]*Math.pow(2,16)+Da*Math.pow(2,24);return BigInt(sa)+(BigInt(Z)<<BigInt(32))});d.prototype.readBigUInt64BE=ea(function(Z){Z>>>=0;U(Z,"offset");
var sa=this[Z],Da=this[Z+7];void 0!==sa&&void 0!==Da||T(Z,this.length-8);sa=sa*Math.pow(2,24)+this[++Z]*Math.pow(2,16)+this[++Z]*Math.pow(2,8)+this[++Z];Z=this[++Z]*Math.pow(2,24)+this[++Z]*Math.pow(2,16)+this[++Z]*Math.pow(2,8)+Da;return(BigInt(sa)<<BigInt(32))+BigInt(Z)});d.prototype.readIntLE=function(Z,sa,Da){Z>>>=0;sa>>>=0;Da||N(Z,sa,this.length);Da=this[Z];for(var X=1,ma=0;++ma<sa&&(X*=256);)Da+=this[Z+ma]*X;Da>=128*X&&(Da-=Math.pow(2,8*sa));return Da};d.prototype.readIntBE=function(Z,sa,Da){Z>>>=
0;sa>>>=0;Da||N(Z,sa,this.length);Da=sa;for(var X=1,ma=this[Z+--Da];0<Da&&(X*=256);)ma+=this[Z+--Da]*X;ma>=128*X&&(ma-=Math.pow(2,8*sa));return ma};d.prototype.readInt8=function(Z,sa){Z>>>=0;sa||N(Z,1,this.length);return this[Z]&128?-1*(255-this[Z]+1):this[Z]};d.prototype.readInt16LE=function(Z,sa){Z>>>=0;sa||N(Z,2,this.length);Z=this[Z]|this[Z+1]<<8;return Z&32768?Z|4294901760:Z};d.prototype.readInt16BE=function(Z,sa){Z>>>=0;sa||N(Z,2,this.length);Z=this[Z+1]|this[Z]<<8;return Z&32768?Z|4294901760:
Z};d.prototype.readInt32LE=function(Z,sa){Z>>>=0;sa||N(Z,4,this.length);return this[Z]|this[Z+1]<<8|this[Z+2]<<16|this[Z+3]<<24};d.prototype.readInt32BE=function(Z,sa){Z>>>=0;sa||N(Z,4,this.length);return this[Z]<<24|this[Z+1]<<16|this[Z+2]<<8|this[Z+3]};d.prototype.readBigInt64LE=ea(function(Z){Z>>>=0;U(Z,"offset");var sa=this[Z],Da=this[Z+7];void 0!==sa&&void 0!==Da||T(Z,this.length-8);return(BigInt(this[Z+4]+this[Z+5]*Math.pow(2,8)+this[Z+6]*Math.pow(2,16)+(Da<<24))<<BigInt(32))+BigInt(sa+this[++Z]*
Math.pow(2,8)+this[++Z]*Math.pow(2,16)+this[++Z]*Math.pow(2,24))});d.prototype.readBigInt64BE=ea(function(Z){Z>>>=0;U(Z,"offset");var sa=this[Z],Da=this[Z+7];void 0!==sa&&void 0!==Da||T(Z,this.length-8);sa=(sa<<24)+this[++Z]*Math.pow(2,16)+this[++Z]*Math.pow(2,8)+this[++Z];return(BigInt(sa)<<BigInt(32))+BigInt(this[++Z]*Math.pow(2,24)+this[++Z]*Math.pow(2,16)+this[++Z]*Math.pow(2,8)+Da)});d.prototype.readFloatLE=function(Z,sa){Z>>>=0;sa||N(Z,4,this.length);return Oa.read(this,Z,!0,23,4)};d.prototype.readFloatBE=
function(Z,sa){Z>>>=0;sa||N(Z,4,this.length);return Oa.read(this,Z,!1,23,4)};d.prototype.readDoubleLE=function(Z,sa){Z>>>=0;sa||N(Z,8,this.length);return Oa.read(this,Z,!0,52,8)};d.prototype.readDoubleBE=function(Z,sa){Z>>>=0;sa||N(Z,8,this.length);return Oa.read(this,Z,!1,52,8)};d.prototype.writeUintLE=d.prototype.writeUIntLE=function(Z,sa,Da,X){Z=+Z;sa>>>=0;Da>>>=0;X||aa(this,Z,sa,Da,Math.pow(2,8*Da)-1,0);X=1;var ma=0;for(this[sa]=Z&255;++ma<Da&&(X*=256);)this[sa+ma]=Z/X&255;return sa+Da};d.prototype.writeUintBE=
d.prototype.writeUIntBE=function(Z,sa,Da,X){Z=+Z;sa>>>=0;Da>>>=0;X||aa(this,Z,sa,Da,Math.pow(2,8*Da)-1,0);X=Da-1;var ma=1;for(this[sa+X]=Z&255;0<=--X&&(ma*=256);)this[sa+X]=Z/ma&255;return sa+Da};d.prototype.writeUint8=d.prototype.writeUInt8=function(Z,sa,Da){Z=+Z;sa>>>=0;Da||aa(this,Z,sa,1,255,0);this[sa]=Z&255;return sa+1};d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(Z,sa,Da){Z=+Z;sa>>>=0;Da||aa(this,Z,sa,2,65535,0);this[sa]=Z&255;this[sa+1]=Z>>>8;return sa+2};d.prototype.writeUint16BE=
d.prototype.writeUInt16BE=function(Z,sa,Da){Z=+Z;sa>>>=0;Da||aa(this,Z,sa,2,65535,0);this[sa]=Z>>>8;this[sa+1]=Z&255;return sa+2};d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(Z,sa,Da){Z=+Z;sa>>>=0;Da||aa(this,Z,sa,4,4294967295,0);this[sa+3]=Z>>>24;this[sa+2]=Z>>>16;this[sa+1]=Z>>>8;this[sa]=Z&255;return sa+4};d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(Z,sa,Da){Z=+Z;sa>>>=0;Da||aa(this,Z,sa,4,4294967295,0);this[sa]=Z>>>24;this[sa+1]=Z>>>16;this[sa+2]=Z>>>8;this[sa+
3]=Z&255;return sa+4};d.prototype.writeBigUInt64LE=ea(function(Z,sa){return m(this,Z,void 0===sa?0:sa,BigInt(0),BigInt("0xffffffffffffffff"))});d.prototype.writeBigUInt64BE=ea(function(Z,sa){return t(this,Z,void 0===sa?0:sa,BigInt(0),BigInt("0xffffffffffffffff"))});d.prototype.writeIntLE=function(Z,sa,Da,X){Z=+Z;sa>>>=0;X||(X=Math.pow(2,8*Da-1),aa(this,Z,sa,Da,X-1,-X));X=0;var ma=1,ta=0;for(this[sa]=Z&255;++X<Da&&(ma*=256);)0>Z&&0===ta&&0!==this[sa+X-1]&&(ta=1),this[sa+X]=(Z/ma>>0)-ta&255;return sa+
Da};d.prototype.writeIntBE=function(Z,sa,Da,X){Z=+Z;sa>>>=0;X||(X=Math.pow(2,8*Da-1),aa(this,Z,sa,Da,X-1,-X));X=Da-1;var ma=1,ta=0;for(this[sa+X]=Z&255;0<=--X&&(ma*=256);)0>Z&&0===ta&&0!==this[sa+X+1]&&(ta=1),this[sa+X]=(Z/ma>>0)-ta&255;return sa+Da};d.prototype.writeInt8=function(Z,sa,Da){Z=+Z;sa>>>=0;Da||aa(this,Z,sa,1,127,-128);0>Z&&(Z=255+Z+1);this[sa]=Z&255;return sa+1};d.prototype.writeInt16LE=function(Z,sa,Da){Z=+Z;sa>>>=0;Da||aa(this,Z,sa,2,32767,-32768);this[sa]=Z&255;this[sa+1]=Z>>>8;return sa+
2};d.prototype.writeInt16BE=function(Z,sa,Da){Z=+Z;sa>>>=0;Da||aa(this,Z,sa,2,32767,-32768);this[sa]=Z>>>8;this[sa+1]=Z&255;return sa+2};d.prototype.writeInt32LE=function(Z,sa,Da){Z=+Z;sa>>>=0;Da||aa(this,Z,sa,4,2147483647,-2147483648);this[sa]=Z&255;this[sa+1]=Z>>>8;this[sa+2]=Z>>>16;this[sa+3]=Z>>>24;return sa+4};d.prototype.writeInt32BE=function(Z,sa,Da){Z=+Z;sa>>>=0;Da||aa(this,Z,sa,4,2147483647,-2147483648);0>Z&&(Z=4294967295+Z+1);this[sa]=Z>>>24;this[sa+1]=Z>>>16;this[sa+2]=Z>>>8;this[sa+3]=
Z&255;return sa+4};d.prototype.writeBigInt64LE=ea(function(Z,sa){return m(this,Z,void 0===sa?0:sa,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});d.prototype.writeBigInt64BE=ea(function(Z,sa){return t(this,Z,void 0===sa?0:sa,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});d.prototype.writeFloatLE=function(Z,sa,Da){return B(this,Z,sa,!0,Da)};d.prototype.writeFloatBE=function(Z,sa,Da){return B(this,Z,sa,!1,Da)};d.prototype.writeDoubleLE=function(Z,sa,Da){return A(this,Z,
sa,!0,Da)};d.prototype.writeDoubleBE=function(Z,sa,Da){return A(this,Z,sa,!1,Da)};d.prototype.copy=function(Z,sa,Da,X){if(!d.isBuffer(Z))throw new TypeError("argument should be a Buffer");Da||(Da=0);X||0===X||(X=this.length);sa>=Z.length&&(sa=Z.length);sa||(sa=0);0<X&&X<Da&&(X=Da);if(X===Da||0===Z.length||0===this.length)return 0;if(0>sa)throw new RangeError("targetStart out of bounds");if(0>Da||Da>=this.length)throw new RangeError("Index out of range");if(0>X)throw new RangeError("sourceEnd out of bounds");
X>this.length&&(X=this.length);Z.length-sa<X-Da&&(X=Z.length-sa+Da);var ma=X-Da;this===Z&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(sa,Da,X):Uint8Array.prototype.set.call(Z,this.subarray(Da,X),sa);return ma};d.prototype.fill=function(Z,sa,Da,X){if("string"===typeof Z){"string"===typeof sa?(X=sa,sa=0,Da=this.length):"string"===typeof Da&&(X=Da,Da=this.length);if(void 0!==X&&"string"!==typeof X)throw new TypeError("encoding must be a string");if("string"===typeof X&&!d.isEncoding(X))throw new TypeError("Unknown encoding: "+
X);if(1===Z.length){var ma=Z.charCodeAt(0);if("utf8"===X&&128>ma||"latin1"===X)Z=ma}}else"number"===typeof Z?Z&=255:"boolean"===typeof Z&&(Z=Number(Z));if(0>sa||this.length<sa||this.length<Da)throw new RangeError("Out of range index");if(Da<=sa)return this;sa>>>=0;Da=void 0===Da?this.length:Da>>>0;Z||(Z=0);if("number"===typeof Z)for(X=sa;X<Da;++X)this[X]=Z;else{ma=d.isBuffer(Z)?Z:d.from(Z,X);var ta=ma.length;if(0===ta)throw new TypeError('The value "'+Z+'" is invalid for argument "value"');for(X=
0;X<Da-sa;++X)this[X+sa]=ma[X%ta]}return this};var eb={};H("ERR_BUFFER_OUT_OF_BOUNDS",function(Z){return Z?Z+" is outside of buffer bounds":"Attempt to access memory outside buffer bounds"},RangeError);H("ERR_INVALID_ARG_TYPE",function(Z,sa){return'The "'+Z+'" argument must be of type number. Received type '+typeof sa},TypeError);H("ERR_OUT_OF_RANGE",function(Z,sa,Da){Z='The value of "'+Z+'" is out of range.';var X=Da;if(Number.isInteger(Da)&&Math.abs(Da)>Math.pow(2,32))X=F(String(Da));else if("bigint"===
typeof Da){X=String(Da);if(Da>Math.pow(BigInt(2),BigInt(32))||Da<-Math.pow(BigInt(2),BigInt(32)))X=F(X);X+="n"}return Z+(" It must be "+sa+". Received "+X)},RangeError);var Sa=/[^+/0-9A-Za-z-_]/g,Bb=function(){for(var Z=Array(256),sa=0;16>sa;++sa)for(var Da=16*sa,X=0;16>X;++X)Z[Da+X]="0123456789abcdef"[sa]+"0123456789abcdef"[X];return Z}();return Bv}(),wq={};Object.defineProperty(wq,"__esModule",{value:!0});wq.default=function(){return Bta.default.randomFillSync(Cta)};var Bta=vo&&vo.__esModule?vo:
{default:vo},Cta=new Uint8Array(16),sm={};Object.defineProperty(sm,"__esModule",{value:!0});sm.default=void 0;for(var Nl=[],PT=0;256>PT;++PT)Nl.push((PT+256).toString(16).substr(1));sm.default=function(b,d){d=d||0;return(Nl[b[d+0]]+Nl[b[d+1]]+Nl[b[d+2]]+Nl[b[d+3]]+"-"+Nl[b[d+4]]+Nl[b[d+5]]+"-"+Nl[b[d+6]]+Nl[b[d+7]]+"-"+Nl[b[d+8]]+Nl[b[d+9]]+"-"+Nl[b[d+10]]+Nl[b[d+11]]+Nl[b[d+12]]+Nl[b[d+13]]+Nl[b[d+14]]+Nl[b[d+15]]).toLowerCase()};var bK={};Object.defineProperty(bK,"__esModule",{value:!0});bK.default=
void 0;var Dta=wq&&wq.__esModule?wq:{default:wq},Eta=sm&&sm.__esModule?sm:{default:sm},hba,QT,RT=0,ST=0;bK.default=function(b,d,h){h=d&&h||0;var a=d||[];b=b||{};var e=b.node||hba,n=void 0!==b.clockseq?b.clockseq:QT;if(null==e||null==n){var q=b.random||(b.rng||Dta.default)();null==e&&(e=hba=[q[0]|1,q[1],q[2],q[3],q[4],q[5]]);null==n&&(n=QT=(q[6]<<8|q[7])&16383)}q=void 0!==b.msecs?b.msecs:Date.now();var r=void 0!==b.nsecs?b.nsecs:ST+1,v=q-RT+(r-ST)/1E4;0>v&&void 0===b.clockseq&&(n=n+1&16383);(0>v||
q>RT)&&void 0===b.nsecs&&(r=0);if(1E4<=r)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");RT=q;ST=r;QT=n;q+=122192928E5;b=(1E4*(q&268435455)+r)%4294967296;a[h++]=b>>>24&255;a[h++]=b>>>16&255;a[h++]=b>>>8&255;a[h++]=b&255;b=q/4294967296*1E4&268435455;a[h++]=b>>>8&255;a[h++]=b&255;a[h++]=b>>>24&15|16;a[h++]=b>>>16&255;a[h++]=n>>>8|128;a[h++]=n&255;for(n=0;6>n;++n)a[h+n]=e[n];return d||(0,Eta.default)(a)};var Um={};Object.defineProperty(Um,"__esModule",{value:!0});Um.default=function(b,
d,h){function a(e,n,q,r){r=q&&r||0;if("string"===typeof e){e=unescape(encodeURIComponent(e));for(var v=[],y=0;y<e.length;++y)v.push(e.charCodeAt(y));e=v}"string"===typeof n&&(n=Pja(n));if(!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(n)||16!==n.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");n=h(n.concat(e));n[6]=n[6]&15|d;n[8]=n[8]&63|128;if(q)for(e=0;16>e;++e)q[r+e]=n[e];return q||(0,Fta.default)(n)}try{a.name=b}catch(e){}a.DNS=
"6ba7b810-9dad-11d1-80b4-00c04fd430c8";a.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";return a};Um.URL=Um.DNS=void 0;var Fta=sm&&sm.__esModule?sm:{default:sm};Um.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Um.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";var Cv={},iba=ol.Buffer;Object.defineProperty(Cv,"__esModule",{value:!0});Cv.default=void 0;var Gta=vo&&vo.__esModule?vo:{default:vo};Cv.default=function(b){Array.isArray(b)?b=iba.from(b):"string"===typeof b&&(b=iba.from(b,"utf8"));return Gta.default.createHash("md5").update(b).digest()};
var cK={};Object.defineProperty(cK,"__esModule",{value:!0});cK.default=void 0;var Hta=Um&&Um.__esModule?Um:{default:Um},Ita=Cv&&Cv.__esModule?Cv:{default:Cv},Jta=(0,Hta.default)("v3",48,Ita.default);cK.default=Jta;var dK={};Object.defineProperty(dK,"__esModule",{value:!0});dK.default=void 0;var Kta=wq&&wq.__esModule?wq:{default:wq},Lta=sm&&sm.__esModule?sm:{default:sm};dK.default=function(b,d,h){"string"===typeof b&&(d="binary"===b?new Uint8Array(16):null,b=null);b=b||{};b=b.random||(b.rng||Kta.default)();
b[6]=b[6]&15|64;b[8]=b[8]&63|128;if(d){h=h||0;for(var a=0;16>a;++a)d[h+a]=b[a];return d}return(0,Lta.default)(b)};var Dv={},jba=ol.Buffer;Object.defineProperty(Dv,"__esModule",{value:!0});Dv.default=void 0;var Mta=vo&&vo.__esModule?vo:{default:vo};Dv.default=function(b){Array.isArray(b)?b=jba.from(b):"string"===typeof b&&(b=jba.from(b,"utf8"));return Mta.default.createHash("sha1").update(b).digest()};var eK={};Object.defineProperty(eK,"__esModule",{value:!0});eK.default=void 0;var Nta=Um&&Um.__esModule?
Um:{default:Um},Ota=Dv&&Dv.__esModule?Dv:{default:Dv},Pta=(0,Nta.default)("v5",80,Ota.default);eK.default=Pta;var Ev={};Object.defineProperty(Ev,"__esModule",{value:!0});Object.defineProperty(Ev,"v1",{enumerable:!0,get:function(){return Qta.default}});Object.defineProperty(Ev,"v3",{enumerable:!0,get:function(){return Rta.default}});Object.defineProperty(Ev,"v4",{enumerable:!0,get:function(){return Sta.default}});Object.defineProperty(Ev,"v5",{enumerable:!0,get:function(){return Tta.default}});var Qta=
tG(bK),Rta=tG(cK),Sta=tG(dK),Tta=tG(eK),Ol={};Object.defineProperty(Ol,"__esModule",{value:!0});Ol.atob=function(b){return kba(b)};Ol.btoa=function(b){return lba(b)};Ol.base64StringToBlobOrBuffer=function(b,d){return q5(kba(b),d)};Ol.binaryStringToArrayBuffer=p5;Ol.binaryStringToBlobOrBuffer=q5;Ol.blob=o5;Ol.blobOrBufferToBase64=function(b,d){s5(b,function(h){d(lba(h))})};Ol.blobOrBufferToBinaryString=s5;Ol.readAsArrayBuffer=function(b,d){var h=new FileReader;h.onloadend=function(a){a=a.target.result||
new ArrayBuffer(0);d(a)};h.readAsArrayBuffer(b)};Ol.readAsBinaryString=r5;Ol.typedBuffer=function(){};var kba=Ol.atob,lba=Ol.btoa,Vg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Uta={},EC=Uta=function(b){function d(D,E){var I=D[0],K=D[1],P=D[2],N=D[3];I+=(K&P|~K&N)+E[0]-680876936|0;I=(I<<7|I>>>25)+K|0;N+=(I&K|~I&P)+E[1]-389564586|0;N=(N<<12|N>>>20)+I|0;P+=(N&I|~N&K)+E[2]+606105819|0;P=(P<<17|P>>>15)+N|0;K+=(P&N|~P&I)+E[3]-1044525330|0;K=(K<<22|K>>>10)+P|0;I+=(K&
P|~K&N)+E[4]-176418897|0;I=(I<<7|I>>>25)+K|0;N+=(I&K|~I&P)+E[5]+1200080426|0;N=(N<<12|N>>>20)+I|0;P+=(N&I|~N&K)+E[6]-1473231341|0;P=(P<<17|P>>>15)+N|0;K+=(P&N|~P&I)+E[7]-45705983|0;K=(K<<22|K>>>10)+P|0;I+=(K&P|~K&N)+E[8]+1770035416|0;I=(I<<7|I>>>25)+K|0;N+=(I&K|~I&P)+E[9]-1958414417|0;N=(N<<12|N>>>20)+I|0;P+=(N&I|~N&K)+E[10]-42063|0;P=(P<<17|P>>>15)+N|0;K+=(P&N|~P&I)+E[11]-1990404162|0;K=(K<<22|K>>>10)+P|0;I+=(K&P|~K&N)+E[12]+1804603682|0;I=(I<<7|I>>>25)+K|0;N+=(I&K|~I&P)+E[13]-40341101|0;N=(N<<12|
N>>>20)+I|0;P+=(N&I|~N&K)+E[14]-1502002290|0;P=(P<<17|P>>>15)+N|0;K+=(P&N|~P&I)+E[15]+1236535329|0;K=(K<<22|K>>>10)+P|0;I+=(K&N|P&~N)+E[1]-165796510|0;I=(I<<5|I>>>27)+K|0;N+=(I&P|K&~P)+E[6]-1069501632|0;N=(N<<9|N>>>23)+I|0;P+=(N&K|I&~K)+E[11]+643717713|0;P=(P<<14|P>>>18)+N|0;K+=(P&I|N&~I)+E[0]-373897302|0;K=(K<<20|K>>>12)+P|0;I+=(K&N|P&~N)+E[5]-701558691|0;I=(I<<5|I>>>27)+K|0;N+=(I&P|K&~P)+E[10]+38016083|0;N=(N<<9|N>>>23)+I|0;P+=(N&K|I&~K)+E[15]-660478335|0;P=(P<<14|P>>>18)+N|0;K+=(P&I|N&~I)+E[4]-
405537848|0;K=(K<<20|K>>>12)+P|0;I+=(K&N|P&~N)+E[9]+568446438|0;I=(I<<5|I>>>27)+K|0;N+=(I&P|K&~P)+E[14]-1019803690|0;N=(N<<9|N>>>23)+I|0;P+=(N&K|I&~K)+E[3]-187363961|0;P=(P<<14|P>>>18)+N|0;K+=(P&I|N&~I)+E[8]+1163531501|0;K=(K<<20|K>>>12)+P|0;I+=(K&N|P&~N)+E[13]-1444681467|0;I=(I<<5|I>>>27)+K|0;N+=(I&P|K&~P)+E[2]-51403784|0;N=(N<<9|N>>>23)+I|0;P+=(N&K|I&~K)+E[7]+1735328473|0;P=(P<<14|P>>>18)+N|0;K+=(P&I|N&~I)+E[12]-1926607734|0;K=(K<<20|K>>>12)+P|0;I+=(K^P^N)+E[5]-378558|0;I=(I<<4|I>>>28)+K|0;N+=(I^
K^P)+E[8]-2022574463|0;N=(N<<11|N>>>21)+I|0;P+=(N^I^K)+E[11]+1839030562|0;P=(P<<16|P>>>16)+N|0;K+=(P^N^I)+E[14]-35309556|0;K=(K<<23|K>>>9)+P|0;I+=(K^P^N)+E[1]-1530992060|0;I=(I<<4|I>>>28)+K|0;N+=(I^K^P)+E[4]+1272893353|0;N=(N<<11|N>>>21)+I|0;P+=(N^I^K)+E[7]-155497632|0;P=(P<<16|P>>>16)+N|0;K+=(P^N^I)+E[10]-1094730640|0;K=(K<<23|K>>>9)+P|0;I+=(K^P^N)+E[13]+681279174|0;I=(I<<4|I>>>28)+K|0;N+=(I^K^P)+E[0]-358537222|0;N=(N<<11|N>>>21)+I|0;P+=(N^I^K)+E[3]-722521979|0;P=(P<<16|P>>>16)+N|0;K+=(P^N^I)+E[6]+
76029189|0;K=(K<<23|K>>>9)+P|0;I+=(K^P^N)+E[9]-640364487|0;I=(I<<4|I>>>28)+K|0;N+=(I^K^P)+E[12]-421815835|0;N=(N<<11|N>>>21)+I|0;P+=(N^I^K)+E[15]+530742520|0;P=(P<<16|P>>>16)+N|0;K+=(P^N^I)+E[2]-995338651|0;K=(K<<23|K>>>9)+P|0;I+=(P^(K|~N))+E[0]-198630844|0;I=(I<<6|I>>>26)+K|0;N+=(K^(I|~P))+E[7]+1126891415|0;N=(N<<10|N>>>22)+I|0;P+=(I^(N|~K))+E[14]-1416354905|0;P=(P<<15|P>>>17)+N|0;K+=(N^(P|~I))+E[5]-57434055|0;K=(K<<21|K>>>11)+P|0;I+=(P^(K|~N))+E[12]+1700485571|0;I=(I<<6|I>>>26)+K|0;N+=(K^(I|~P))+
E[3]-1894986606|0;N=(N<<10|N>>>22)+I|0;P+=(I^(N|~K))+E[10]-1051523|0;P=(P<<15|P>>>17)+N|0;K+=(N^(P|~I))+E[1]-2054922799|0;K=(K<<21|K>>>11)+P|0;I+=(P^(K|~N))+E[8]+1873313359|0;I=(I<<6|I>>>26)+K|0;N+=(K^(I|~P))+E[15]-30611744|0;N=(N<<10|N>>>22)+I|0;P+=(I^(N|~K))+E[6]-1560198380|0;P=(P<<15|P>>>17)+N|0;K+=(N^(P|~I))+E[13]+1309151649|0;K=(K<<21|K>>>11)+P|0;I+=(P^(K|~N))+E[4]-145523070|0;I=(I<<6|I>>>26)+K|0;N+=(K^(I|~P))+E[11]-1120210379|0;N=(N<<10|N>>>22)+I|0;P+=(I^(N|~K))+E[2]+718787259|0;P=(P<<15|P>>>
17)+N|0;K+=(N^(P|~I))+E[9]-343485551|0;D[0]=I+D[0]|0;D[1]=((K<<21|K>>>11)+P|0)+D[1]|0;D[2]=P+D[2]|0;D[3]=N+D[3]|0}function h(D){var E=[],I;for(I=0;64>I;I+=4)E[I>>2]=D.charCodeAt(I)+(D.charCodeAt(I+1)<<8)+(D.charCodeAt(I+2)<<16)+(D.charCodeAt(I+3)<<24);return E}function a(D){var E=[],I;for(I=0;64>I;I+=4)E[I>>2]=D[I]+(D[I+1]<<8)+(D[I+2]<<16)+(D[I+3]<<24);return E}function e(D){var E=D.length,I=[1732584193,-271733879,-1732584194,271733878],K;for(K=64;K<=E;K+=64)d(I,h(D.substring(K-64,K)));D=D.substring(K-
64);var P=D.length;var N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(K=0;K<P;K+=1)N[K>>2]|=D.charCodeAt(K)<<(K%4<<3);N[K>>2]|=128<<(K%4<<3);if(55<K)for(d(I,N),K=0;16>K;K+=1)N[K]=0;E=(8*E).toString(16).match(/(.*?)(.{0,8})$/);D=parseInt(E[2],16);E=parseInt(E[1],16)||0;N[14]=D;N[15]=E;d(I,N);return I}function n(D){var E;for(E=0;E<D.length;E+=1){var I=E,K,P=D[E],N="";for(K=0;4>K;K+=1)N+=y[P>>8*K+4&15]+y[P>>8*K&15];D[I]=N}return D.join("")}function q(D){/[\u0080-\uFFFF]/.test(D)&&(D=unescape(encodeURIComponent(D)));
return D}function r(D){var E=[],I=D.length,K;for(K=0;K<I-1;K+=2)E.push(parseInt(D.substr(K,2),16));return String.fromCharCode.apply(String,E)}function v(){this.reset()}var y="0123456789abcdef".split("");n(e("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function D(E,I){E=E|0||0;return 0>E?Math.max(E+I,0):Math.min(E,I)}ArrayBuffer.prototype.slice=function(E,I){var K=(this||Vg).byteLength;E=D(E,K);var P=K;I!==b&&(P=D(I,K));if(E>P)return new ArrayBuffer(0);P-=E;I=
new ArrayBuffer(P);K=new Uint8Array(I);E=new Uint8Array(this||Vg,E,P);K.set(E);return I}}();v.prototype.append=function(D){this.appendBinary(q(D));return this||Vg};v.prototype.appendBinary=function(D){(this||Vg)._buff+=D;(this||Vg)._length+=D.length;D=(this||Vg)._buff.length;var E;for(E=64;E<=D;E+=64)d((this||Vg)._hash,h((this||Vg)._buff.substring(E-64,E)));(this||Vg)._buff=(this||Vg)._buff.substring(E-64);return this||Vg};v.prototype.end=function(D){var E=(this||Vg)._buff,I=E.length,K,P=[0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0];for(K=0;K<I;K+=1)P[K>>2]|=E.charCodeAt(K)<<(K%4<<3);this._finish(P,I);E=n((this||Vg)._hash);D&&(E=r(E));this.reset();return E};v.prototype.reset=function(){(this||Vg)._buff="";(this||Vg)._length=0;(this||Vg)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Vg};v.prototype.getState=function(){return{buff:(this||Vg)._buff,length:(this||Vg)._length,hash:(this||Vg)._hash.slice()}};v.prototype.setState=function(D){(this||Vg)._buff=D.buff;(this||Vg)._length=D.length;
(this||Vg)._hash=D.hash;return this||Vg};v.prototype.destroy=function(){delete (this||Vg)._hash;delete (this||Vg)._buff;delete (this||Vg)._length};v.prototype._finish=function(D,E){D[E>>2]|=128<<(E%4<<3);if(55<E)for(d((this||Vg)._hash,D),E=0;16>E;E+=1)D[E]=0;var I=8*(this||Vg)._length;I=I.toString(16).match(/(.*?)(.{0,8})$/);E=parseInt(I[2],16);I=parseInt(I[1],16)||0;D[14]=E;D[15]=I;d((this||Vg)._hash,D)};v.hash=function(D,E){return v.hashBinary(q(D),E)};v.hashBinary=function(D,E){D=e(D);D=n(D);return E?
r(D):D};v.ArrayBuffer=function(){this.reset()};v.ArrayBuffer.prototype.append=function(D){var E=(this||Vg)._buff.buffer,I=new Uint8Array(E.byteLength+D.byteLength);I.set(new Uint8Array(E));I.set(new Uint8Array(D),E.byteLength);E=I.length;(this||Vg)._length+=D.byteLength;for(D=64;D<=E;D+=64)d((this||Vg)._hash,a(I.subarray(D-64,D)));(this||Vg)._buff=D-64<E?new Uint8Array(I.buffer.slice(D-64)):new Uint8Array(0);return this||Vg};v.ArrayBuffer.prototype.end=function(D){var E=(this||Vg)._buff,I=E.length,
K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],P;for(P=0;P<I;P+=1)K[P>>2]|=E[P]<<(P%4<<3);this._finish(K,I);E=n((this||Vg)._hash);D&&(E=r(E));this.reset();return E};v.ArrayBuffer.prototype.reset=function(){(this||Vg)._buff=new Uint8Array(0);(this||Vg)._length=0;(this||Vg)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Vg};v.ArrayBuffer.prototype.getState=function(){var D=v.prototype.getState.call(this||Vg);D.buff=String.fromCharCode.apply(null,new Uint8Array(D.buff));return D};v.ArrayBuffer.prototype.setState=
function(D){var E=D.buff,I=E.length,K=new ArrayBuffer(I);K=new Uint8Array(K);var P;for(P=0;P<I;P+=1)K[P]=E.charCodeAt(P);D.buff=K;return v.prototype.setState.call(this||Vg,D)};v.ArrayBuffer.prototype.destroy=v.prototype.destroy;v.ArrayBuffer.prototype._finish=v.prototype._finish;v.ArrayBuffer.hash=function(D,E){var I=new Uint8Array(D),K=I.length;D=[1732584193,-271733879,-1732584194,271733878];var P;for(P=64;P<=K;P+=64)d(D,a(I.subarray(P-64,P)));I=P-64<K?I.subarray(P-64):new Uint8Array(0);var N=I.length;
var aa=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(P=0;P<N;P+=1)aa[P>>2]|=I[P]<<(P%4<<3);aa[P>>2]|=128<<(P%4<<3);if(55<P)for(d(D,aa),P=0;16>P;P+=1)aa[P]=0;K=(8*K).toString(16).match(/(.*?)(.{0,8})$/);I=parseInt(K[2],16);K=parseInt(K[1],16)||0;aa[14]=I;aa[15]=K;d(D,aa);D=n(D);return E?r(D):D};return v}(),Qy={};Object.defineProperty(Qy,"__esModule",{value:!0});var t5=Ol,TT=EC&&"object"===typeof EC&&"default"in EC?EC["default"]:EC,Vta=self.setImmediate||self.setTimeout;Qy.binaryMd5=function(b,d){function h(){Vta(e)}
function a(){var I=D.end(!0);I=t5.btoa(I);d(I);D.destroy()}function e(){var I=y*r,K=I+r;y++;y<v?E(D,b,I,K,h):E(D,b,I,K,a)}var n="string"===typeof b,q=n?b.length:b.size,r=Math.min(32768,q),v=Math.ceil(q/r),y=0,D=n?new TT:new TT.ArrayBuffer,E=n?Sja:Rja;e()};Qy.stringMd5=function(b){return TT.hash(b)};var Bg={};Object.defineProperty(Bg,"__esModule",{value:!0});var RP=uG(eT),Wta=uG(Dj),mba=uG(si),wG=uG(Fl),u5=Function.prototype.toString,Tja=u5.call(Object);try{localStorage.setItem("_pouch_check_localstorage",
1);var vG=!!localStorage.getItem("_pouch_check_localstorage")}catch(b){vG=!1}Wta(Qx,wG);Qx.prototype.addListener=function(b,d,h,a){function e(){if(n._listeners[d])if(q)q="waiting";else{q=!0;var r=SP(a,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));h.changes(r).on("change",function(v){v.seq>a.since&&!a.cancelled&&(a.since=v.seq,a.onChange(v))}).on("complete",function(){"waiting"===q&&mba(e);q=!1}).on("error",function(){q=!1})}}if(!this._listeners[d]){var n=
this,q=!1;this._listeners[d]=e;this.on(b,e)}};Qx.prototype.removeListener=function(b,d){d in this._listeners&&(wG.prototype.removeListener.call(this,b,this._listeners[d]),delete this._listeners[d])};Qx.prototype.notifyLocalWindows=function(b){vG&&(localStorage[b]="a"===localStorage[b]?"b":"a")};Qx.prototype.notify=function(b){this.emit(b);this.notifyLocalWindows(b)};var Xta="function"===typeof Object.assign?Object.assign:function(b){for(var d=Object(b),h=1;h<arguments.length;h++){var a=arguments[h];
if(null!=a)for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(d[e]=a[e])}return d},Yta=function(){}.name?function(b){return b.name}:function(b){return(b=b.toString().match(/^\s*function\s*(?:(\S+)\s*)?\(/))&&b[1]?b[1]:""},nba="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Zta=/(?:^|&)([^&=]*)=?([^&]*)/g,$ta=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
aua=Ev.v4;Bg.adapterFun=function(b,d){return w5(RP(function(h){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var a=this;Uja(a,b,h);return this.taskqueue.isReady?d.apply(this,h):new Promise(function(e,n){a.taskqueue.addTask(function(q){q?n(q):e(a[b].apply(a,h))})})}))};Bg.assign=Xta;Bg.bulkGetShim=function(b,d,h){function a(){var K=[];D.forEach(function(P){P.docs.forEach(function(N){K.push({id:P.id,docs:[N]})})});
h(null,{results:K})}function e(){if(!(I>=E.length)){var K=E.slice(I,Math.min(I+6,E.length));n(K,I);I+=K.length}}function n(K,P){K.forEach(function(N,aa){var m=P+aa;aa=r.get(N);var t=SP(aa[0],["atts_since","attachments"]);t.open_revs=aa.map(function(B){return B.rev});t.open_revs=t.open_revs.filter(x5);var u=x5;0===t.open_revs.length&&(delete t.open_revs,u=Vja);["revs","attachments","binary","ajax","latest"].forEach(function(B){B in d&&(t[B]=d[B])});b.get(N,t,function(B,A){B=B?[{error:B}]:u(A);D[m]=
{id:N,docs:B};++y===v&&a();e()})})}var q=d.docs,r=new jt.Map;q.forEach(function(K){r.has(K.id)?r.get(K.id).push(K):r.set(K.id,[K])});var v=r.size,y=0,D=Array(v),E=[];r.forEach(function(K,P){E.push(P)});var I=0;e()};Bg.changesHandler=Qx;Bg.clone=VA;Bg.defaultBackOff=function(b){var d=0;b||(d=2E3);b=parseInt(b,10)||0;d=parseInt(d,10);d=d!==d||d<=b?(b||1)<<1:d+1;6E5<d&&(b=3E5,d=6E5);return~~((d-b)*Math.random()+b)};Bg.explainError=function(b,d){TP("info","The above "+b+" is totally normal. "+d)};Bg.filterChange=
function(b){var d={},h=b.filter&&"function"===typeof b.filter;d.query=b.query_params;return function(a){a.doc||(a.doc={});var e;if(e=h)try{e=!(0,b.filter)(a.doc,d)}catch(q){e=Vf.createError(Vf.BAD_REQUEST,"Filter function threw: "+q.toString())}if("object"===typeof e)return e;if(e)return!1;if(!b.include_docs)delete a.doc;else if(!b.attachments)for(var n in a.doc._attachments)a.doc._attachments.hasOwnProperty(n)&&(a.doc._attachments[n].stub=!0);return!0}};Bg.flatten=function(b){for(var d=[],h=0,a=
b.length;h<a;h++)d=d.concat(b[h]);return d};Bg.functionName=Yta;Bg.guardedConsole=TP;Bg.hasLocalStorage=function(){return vG};Bg.invalidIdError=function(b){var d;b?"string"!==typeof b?d=Vf.createError(Vf.INVALID_ID):/^_/.test(b)&&!/^_(design|local)/.test(b)&&(d=Vf.createError(Vf.RESERVED_ID)):d=Vf.createError(Vf.MISSING_ID);if(d)throw d;};Bg.isRemote=function(b){return"boolean"===typeof b._remote?b._remote:"function"===typeof b.type?(TP("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),
"http"===b.type()):!1};Bg.listenerCount=function(b,d){return"listenerCount"in b?b.listenerCount(d):wG.listenerCount(b,d)};Bg.nextTick=mba;Bg.normalizeDdocFunctionName=function(b){return(b=y5(b))?b.join("/"):null};Bg.once=v5;Bg.parseDdocFunctionName=y5;Bg.parseUri=function(b){b=$ta.exec(b);for(var d={},h=14;h--;){var a=nba[h],e=b[h]||"",n=-1!==["user","password"].indexOf(a);d[a]=n?decodeURIComponent(e):e}d.queryKey={};d[nba[12]].replace(Zta,function(q,r,v){r&&(d.queryKey[r]=v)});return d};Bg.pick=
SP;Bg.rev=function(b,d){b=VA(b);if(!d)return Ev.v4().replace(/-/g,"").toLowerCase();delete b._rev_tree;return Qy.stringMd5(JSON.stringify(b))};Bg.scopeEval=function(b,d){var h=[],a=[],e;for(e in d)d.hasOwnProperty(e)&&(h.push(e),a.push(d[e]));h.push(b);return Function.apply(null,h).apply(null,a)};Bg.toPromise=w5;Bg.upsert=z5;Bg.uuid=aua;var oba=Cg.promisify,pba={};pba=function(){for(var b={},d=0;d<arguments.length;d++){var h=arguments[d],a;for(a in h)bua.call(h,a)&&(b[a]=h[a])}return b};var bua=Object.prototype.hasOwnProperty,
qt=pba,qba={};qba=function(b){for(var d=1;d<arguments.length;d++){var h=arguments[d],a;for(a in h)cua.call(h,a)&&(b[a]=h[a])}return b};for(var cua=Object.prototype.hasOwnProperty,dua={},eua=qba,rba=dua=function(){var b=qt.apply(null,arguments);return eua(b,{bufferKeys:b.bufferKeys||!1,snapshots:b.snapshots||!1,permanence:b.permanence||!1,seek:b.seek||!1,clear:b.clear||!1,status:b.status||!1,createIfMissing:b.createIfMissing||!1,errorIfExists:b.errorIfExists||!1,deferredOpen:b.deferredOpen||!1,openCallback:b.openCallback||
!1,promises:b.promises||!1,streams:b.streams||!1,encodings:b.encodings||!1,additionalMethods:qt(b.additionalMethods)})},Xp=[],wo=[],fua="undefined"!==typeof Uint8Array?Uint8Array:Array,Ry=0;64>Ry;++Ry)Xp[Ry]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[Ry],wo["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(Ry)]=Ry;wo[45]=62;wo[95]=63;var xG={byteLength:function(b){b=A5(b);var d=b[1];return 3*(b[0]+d)/4-d},toByteArray:function(b){var d=A5(b);var h=
d[0];d=d[1];var a=new fua(3*(h+d)/4-d),e=0,n=0<d?h-4:h,q;for(q=0;q<n;q+=4)h=wo[b.charCodeAt(q)]<<18|wo[b.charCodeAt(q+1)]<<12|wo[b.charCodeAt(q+2)]<<6|wo[b.charCodeAt(q+3)],a[e++]=h>>16&255,a[e++]=h>>8&255,a[e++]=h&255;2===d&&(h=wo[b.charCodeAt(q)]<<2|wo[b.charCodeAt(q+1)]>>4,a[e++]=h&255);1===d&&(h=wo[b.charCodeAt(q)]<<10|wo[b.charCodeAt(q+1)]<<4|wo[b.charCodeAt(q+2)]>>2,a[e++]=h>>8&255,a[e++]=h&255);return a},fromByteArray:function(b){for(var d=b.length,h=d%3,a=[],e=0,n=d-h;e<n;e+=16383)a.push(Yja(b,
e,e+16383>n?n:e+16383));1===h?(b=b[d-1],a.push(Xp[b>>2]+Xp[b<<4&63]+"==")):2===h&&(b=(b[d-2]<<8)+b[d-1],a.push(Xp[b>>10]+Xp[b>>4&63]+Xp[b<<2&63]+"="));return a.join("")}},Rx={read:function(b,d,h,a,e){var n=8*e-a-1;var q=(1<<n)-1,r=q>>1,v=-7;e=h?e-1:0;var y=h?-1:1,D=b[d+e];e+=y;h=D&(1<<-v)-1;D>>=-v;for(v+=n;0<v;h=256*h+b[d+e],e+=y,v-=8);n=h&(1<<-v)-1;h>>=-v;for(v+=a;0<v;n=256*n+b[d+e],e+=y,v-=8);if(0===h)h=1-r;else{if(h===q)return n?NaN:Infinity*(D?-1:1);n+=Math.pow(2,a);h-=r}return(D?-1:1)*n*Math.pow(2,
h-a)},write:function(b,d,h,a,e,n){var q,r=8*n-e-1,v=(1<<r)-1,y=v>>1,D=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;n=a?0:n-1;var E=a?1:-1,I=0>d||0===d&&0>1/d?1:0;d=Math.abs(d);isNaN(d)||Infinity===d?(d=isNaN(d)?1:0,a=v):(a=Math.floor(Math.log(d)/Math.LN2),1>d*(q=Math.pow(2,-a))&&(a--,q*=2),d=1<=a+y?d+D/q:d+D*Math.pow(2,1-y),2<=d*q&&(a++,q/=2),a+y>=v?(d=0,a=v):1<=a+y?(d=(d*q-1)*Math.pow(2,e),a+=y):(d=d*Math.pow(2,y-1)*Math.pow(2,e),a=0));for(;8<=e;b[h+n]=d&255,n+=E,d/=256,e-=8);a=a<<e|d;for(r+=e;0<r;b[h+
n]=a&255,n+=E,a/=256,r-=8);b[h+n-E]|=128*I}},sba="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;var tba=ge;var UP=2147483647;ge.TYPED_ARRAY_SUPPORT=function(){try{var b=new Uint8Array(1),d={foo:function(){return 42}};Object.setPrototypeOf(d,Uint8Array.prototype);Object.setPrototypeOf(b,d);return 42===b.foo()}catch(h){return!1}}();ge.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(ge.prototype,"parent",{enumerable:!0,get:function(){if(ge.isBuffer(this))return this.buffer}});Object.defineProperty(ge.prototype,"offset",{enumerable:!0,get:function(){if(ge.isBuffer(this))return this.byteOffset}});ge.poolSize=8192;ge.from=function(b,d,h){return B5(b,d,h)};Object.setPrototypeOf(ge.prototype,Uint8Array.prototype);Object.setPrototypeOf(ge,Uint8Array);ge.alloc=function(b,d,h){E5(b);b=0>=b?nr(b):void 0!==d?"string"===typeof h?nr(b).fill(d,h):nr(b).fill(d):nr(b);
return b};ge.allocUnsafe=function(b){return VP(b)};ge.allocUnsafeSlow=function(b){return VP(b)};ge.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==ge.prototype};ge.compare=function(b,d){Yp(b,Uint8Array)&&(b=ge.from(b,b.offset,b.byteLength));Yp(d,Uint8Array)&&(d=ge.from(d,d.offset,d.byteLength));if(!ge.isBuffer(b)||!ge.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===d)return 0;for(var h=b.length,a=d.length,e=0,n=Math.min(h,
a);e<n;++e)if(b[e]!==d[e]){h=b[e];a=d[e];break}return h<a?-1:a<h?1:0};ge.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};ge.concat=function(b,d){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return ge.alloc(0);var h;if(void 0===d)for(h=d=0;h<b.length;++h)d+=b[h].length;
d=ge.allocUnsafe(d);var a=0;for(h=0;h<b.length;++h){var e=b[h];if(Yp(e,Uint8Array))a+e.length>d.length?ge.from(e).copy(d,a):Uint8Array.prototype.set.call(d,e,a);else if(ge.isBuffer(e))e.copy(d,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=e.length}return d};ge.byteLength=C5;ge.prototype._isBuffer=!0;ge.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var d=0;d<b;d+=2)Su(this,d,d+1);return this};
ge.prototype.swap32=function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var d=0;d<b;d+=4)Su(this,d,d+3),Su(this,d+1,d+2);return this};ge.prototype.swap64=function(){var b=this.length;if(0!==b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var d=0;d<b;d+=8)Su(this,d,d+7),Su(this,d+1,d+6),Su(this,d+2,d+5),Su(this,d+3,d+4);return this};ge.prototype.toString=function(){var b=this.length;return 0===b?"":0===arguments.length?
G5(this,0,b):$ja.apply(this,arguments)};ge.prototype.toLocaleString=ge.prototype.toString;ge.prototype.equals=function(b){if(!ge.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===ge.compare(this,b)};ge.prototype.inspect=function(){var b=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim();50<this.length&&(b+=" ... ");return"<Buffer "+b+">"};sba&&(ge.prototype[sba]=ge.prototype.inspect);ge.prototype.compare=function(b,d,h,a,e){Yp(b,Uint8Array)&&(b=ge.from(b,b.offset,
b.byteLength));if(!ge.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);void 0===d&&(d=0);void 0===h&&(h=b?b.length:0);void 0===a&&(a=0);void 0===e&&(e=this.length);if(0>d||h>b.length||0>a||e>this.length)throw new RangeError("out of range index");if(a>=e&&d>=h)return 0;if(a>=e)return-1;if(d>=h)return 1;d>>>=0;h>>>=0;a>>>=0;e>>>=0;if(this===b)return 0;var n=e-a,q=h-d,r=Math.min(n,q);a=this.slice(a,e);b=b.slice(d,h);for(d=0;d<
r;++d)if(a[d]!==b[d]){n=a[d];q=b[d];break}return n<q?-1:q<n?1:0};ge.prototype.includes=function(b,d,h){return-1!==this.indexOf(b,d,h)};ge.prototype.indexOf=function(b,d,h){return H5(this,b,d,h,!0)};ge.prototype.lastIndexOf=function(b,d,h){return H5(this,b,d,h,!1)};ge.prototype.write=function(b,d,h,a){if(void 0===d)a="utf8",h=this.length,d=0;else if(void 0===h&&"string"===typeof d)a=d,h=this.length,d=0;else if(isFinite(d))d>>>=0,isFinite(h)?(h>>>=0,void 0===a&&(a="utf8")):(a=h,h=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
var e=this.length-d;if(void 0===h||h>e)h=e;if(0<b.length&&(0>h||0>d)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(e=!1;;)switch(a){case "hex":a:{d=Number(d)||0;a=this.length-d;h?(h=Number(h),h>a&&(h=a)):h=a;a=b.length;h>a/2&&(h=a/2);for(a=0;a<h;++a){e=parseInt(b.substr(2*a,2),16);if(e!==e){b=a;break a}this[d+a]=e}b=a}return b;case "utf8":case "utf-8":return yG(YP(b,this.length-d),this,d,h);case "ascii":case "latin1":case "binary":a=[];for(e=0;e<b.length;++e)a.push(b.charCodeAt(e)&
255);return yG(a,this,d,h);case "base64":return yG(xG.toByteArray(F5(b)),this,d,h);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=b;e=this.length-d;for(var n=[],q=0;q<a.length&&!(0>(e-=2));++q){var r=a.charCodeAt(q);b=r>>8;r%=256;n.push(r);n.push(b)}return yG(n,this,d,h);default:if(e)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();e=!0}};ge.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J5=4096;ge.prototype.slice=
function(b,d){var h=this.length;b=~~b;d=void 0===d?h:~~d;0>b?(b+=h,0>b&&(b=0)):b>h&&(b=h);0>d?(d+=h,0>d&&(d=0)):d>h&&(d=h);d<b&&(d=b);b=this.subarray(b,d);Object.setPrototypeOf(b,ge.prototype);return b};ge.prototype.readUintLE=ge.prototype.readUIntLE=function(b,d,h){b>>>=0;d>>>=0;h||ml(b,d,this.length);h=this[b];for(var a=1,e=0;++e<d&&(a*=256);)h+=this[b+e]*a;return h};ge.prototype.readUintBE=ge.prototype.readUIntBE=function(b,d,h){b>>>=0;d>>>=0;h||ml(b,d,this.length);h=this[b+--d];for(var a=1;0<
d&&(a*=256);)h+=this[b+--d]*a;return h};ge.prototype.readUint8=ge.prototype.readUInt8=function(b,d){b>>>=0;d||ml(b,1,this.length);return this[b]};ge.prototype.readUint16LE=ge.prototype.readUInt16LE=function(b,d){b>>>=0;d||ml(b,2,this.length);return this[b]|this[b+1]<<8};ge.prototype.readUint16BE=ge.prototype.readUInt16BE=function(b,d){b>>>=0;d||ml(b,2,this.length);return this[b]<<8|this[b+1]};ge.prototype.readUint32LE=ge.prototype.readUInt32LE=function(b,d){b>>>=0;d||ml(b,4,this.length);return(this[b]|
this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};ge.prototype.readUint32BE=ge.prototype.readUInt32BE=function(b,d){b>>>=0;d||ml(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};ge.prototype.readIntLE=function(b,d,h){b>>>=0;d>>>=0;h||ml(b,d,this.length);h=this[b];for(var a=1,e=0;++e<d&&(a*=256);)h+=this[b+e]*a;h>=128*a&&(h-=Math.pow(2,8*d));return h};ge.prototype.readIntBE=function(b,d,h){b>>>=0;d>>>=0;h||ml(b,d,this.length);h=d;for(var a=1,e=this[b+--h];0<h&&(a*=256);)e+=
this[b+--h]*a;e>=128*a&&(e-=Math.pow(2,8*d));return e};ge.prototype.readInt8=function(b,d){b>>>=0;d||ml(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};ge.prototype.readInt16LE=function(b,d){b>>>=0;d||ml(b,2,this.length);b=this[b]|this[b+1]<<8;return b&32768?b|4294901760:b};ge.prototype.readInt16BE=function(b,d){b>>>=0;d||ml(b,2,this.length);b=this[b+1]|this[b]<<8;return b&32768?b|4294901760:b};ge.prototype.readInt32LE=function(b,d){b>>>=0;d||ml(b,4,this.length);return this[b]|this[b+
1]<<8|this[b+2]<<16|this[b+3]<<24};ge.prototype.readInt32BE=function(b,d){b>>>=0;d||ml(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};ge.prototype.readFloatLE=function(b,d){b>>>=0;d||ml(b,4,this.length);return Rx.read(this,b,!0,23,4)};ge.prototype.readFloatBE=function(b,d){b>>>=0;d||ml(b,4,this.length);return Rx.read(this,b,!1,23,4)};ge.prototype.readDoubleLE=function(b,d){b>>>=0;d||ml(b,8,this.length);return Rx.read(this,b,!0,52,8)};ge.prototype.readDoubleBE=function(b,
d){b>>>=0;d||ml(b,8,this.length);return Rx.read(this,b,!1,52,8)};ge.prototype.writeUintLE=ge.prototype.writeUIntLE=function(b,d,h,a){b=+b;d>>>=0;h>>>=0;a||Mm(this,b,d,h,Math.pow(2,8*h)-1,0);a=1;var e=0;for(this[d]=b&255;++e<h&&(a*=256);)this[d+e]=b/a&255;return d+h};ge.prototype.writeUintBE=ge.prototype.writeUIntBE=function(b,d,h,a){b=+b;d>>>=0;h>>>=0;a||Mm(this,b,d,h,Math.pow(2,8*h)-1,0);a=h-1;var e=1;for(this[d+a]=b&255;0<=--a&&(e*=256);)this[d+a]=b/e&255;return d+h};ge.prototype.writeUint8=ge.prototype.writeUInt8=
function(b,d,h){b=+b;d>>>=0;h||Mm(this,b,d,1,255,0);this[d]=b&255;return d+1};ge.prototype.writeUint16LE=ge.prototype.writeUInt16LE=function(b,d,h){b=+b;d>>>=0;h||Mm(this,b,d,2,65535,0);this[d]=b&255;this[d+1]=b>>>8;return d+2};ge.prototype.writeUint16BE=ge.prototype.writeUInt16BE=function(b,d,h){b=+b;d>>>=0;h||Mm(this,b,d,2,65535,0);this[d]=b>>>8;this[d+1]=b&255;return d+2};ge.prototype.writeUint32LE=ge.prototype.writeUInt32LE=function(b,d,h){b=+b;d>>>=0;h||Mm(this,b,d,4,4294967295,0);this[d+3]=
b>>>24;this[d+2]=b>>>16;this[d+1]=b>>>8;this[d]=b&255;return d+4};ge.prototype.writeUint32BE=ge.prototype.writeUInt32BE=function(b,d,h){b=+b;d>>>=0;h||Mm(this,b,d,4,4294967295,0);this[d]=b>>>24;this[d+1]=b>>>16;this[d+2]=b>>>8;this[d+3]=b&255;return d+4};ge.prototype.writeIntLE=function(b,d,h,a){b=+b;d>>>=0;a||(a=Math.pow(2,8*h-1),Mm(this,b,d,h,a-1,-a));a=0;var e=1,n=0;for(this[d]=b&255;++a<h&&(e*=256);)0>b&&0===n&&0!==this[d+a-1]&&(n=1),this[d+a]=(b/e>>0)-n&255;return d+h};ge.prototype.writeIntBE=
function(b,d,h,a){b=+b;d>>>=0;a||(a=Math.pow(2,8*h-1),Mm(this,b,d,h,a-1,-a));a=h-1;var e=1,n=0;for(this[d+a]=b&255;0<=--a&&(e*=256);)0>b&&0===n&&0!==this[d+a+1]&&(n=1),this[d+a]=(b/e>>0)-n&255;return d+h};ge.prototype.writeInt8=function(b,d,h){b=+b;d>>>=0;h||Mm(this,b,d,1,127,-128);0>b&&(b=255+b+1);this[d]=b&255;return d+1};ge.prototype.writeInt16LE=function(b,d,h){b=+b;d>>>=0;h||Mm(this,b,d,2,32767,-32768);this[d]=b&255;this[d+1]=b>>>8;return d+2};ge.prototype.writeInt16BE=function(b,d,h){b=+b;d>>>=
0;h||Mm(this,b,d,2,32767,-32768);this[d]=b>>>8;this[d+1]=b&255;return d+2};ge.prototype.writeInt32LE=function(b,d,h){b=+b;d>>>=0;h||Mm(this,b,d,4,2147483647,-2147483648);this[d]=b&255;this[d+1]=b>>>8;this[d+2]=b>>>16;this[d+3]=b>>>24;return d+4};ge.prototype.writeInt32BE=function(b,d,h){b=+b;d>>>=0;h||Mm(this,b,d,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);this[d]=b>>>24;this[d+1]=b>>>16;this[d+2]=b>>>8;this[d+3]=b&255;return d+4};ge.prototype.writeFloatLE=function(b,d,h){return L5(this,b,d,
!0,h)};ge.prototype.writeFloatBE=function(b,d,h){return L5(this,b,d,!1,h)};ge.prototype.writeDoubleLE=function(b,d,h){return M5(this,b,d,!0,h)};ge.prototype.writeDoubleBE=function(b,d,h){return M5(this,b,d,!1,h)};ge.prototype.copy=function(b,d,h,a){if(!ge.isBuffer(b))throw new TypeError("argument should be a Buffer");h||(h=0);a||0===a||(a=this.length);d>=b.length&&(d=b.length);d||(d=0);0<a&&a<h&&(a=h);if(a===h||0===b.length||0===this.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");
if(0>h||h>=this.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length);b.length-d<a-h&&(a=b.length-d+h);var e=a-h;this===b&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(d,h,a):Uint8Array.prototype.set.call(b,this.subarray(h,a),d);return e};ge.prototype.fill=function(b,d,h,a){if("string"===typeof b){"string"===typeof d?(a=d,d=0,h=this.length):"string"===typeof h&&(a=h,h=this.length);if(void 0!==
a&&"string"!==typeof a)throw new TypeError("encoding must be a string");if("string"===typeof a&&!ge.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===b.length){var e=b.charCodeAt(0);if("utf8"===a&&128>e||"latin1"===a)b=e}}else"number"===typeof b?b&=255:"boolean"===typeof b&&(b=Number(b));if(0>d||this.length<d||this.length<h)throw new RangeError("Out of range index");if(h<=d)return this;d>>>=0;h=void 0===h?this.length:h>>>0;b||(b=0);if("number"===typeof b)for(a=d;a<h;++a)this[a]=b;else{e=
ge.isBuffer(b)?b:ge.from(b,a);var n=e.length;if(0===n)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(a=0;a<h-d;++a)this[a+d]=e[a%n]}return this};var bka=/[^+/0-9A-Za-z-_]/g,aka=function(){for(var b=Array(256),d=0;16>d;++d)for(var h=16*d,a=0;16>a;++a)b[h+a]="0123456789abcdef"[d]+"0123456789abcdef"[a];return b}(),or="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,gua={};Os.prototype.next=function(b){var d=this||or;if("function"!==typeof b)throw Error("next() requires a callback argument");
if(d._ended)return si(b,Error("cannot call next() after end()")),d;if(d._nexting)return si(b,Error("cannot call next() before previous next() has completed")),d;d._nexting=!0;d._next(function(){d._nexting=!1;b.apply(null,arguments)});return d};Os.prototype._next=function(b){si(b)};Os.prototype.seek=function(b){if((this||or)._ended)throw Error("cannot call seek() after end()");if((this||or)._nexting)throw Error("cannot call seek() before next() has completed");b=(this||or).db._serializeKey(b);this._seek(b)};
Os.prototype._seek=function(b){};Os.prototype.end=function(b){if("function"!==typeof b)throw Error("end() requires a callback argument");if((this||or)._ended)return si(b,Error("end() already called on iterator"));(this||or)._ended=!0;this._end(b)};Os.prototype._end=function(b){si(b)};Os.prototype._nextTick=si;var uba=gua=Os,Rk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,hua={};Zo.prototype._checkWritten=function(){if((this||Rk)._written)throw Error("write() already called on this batch");
};Zo.prototype.put=function(b,d){this._checkWritten();var h=(this||Rk).db._checkKey(b)||(this||Rk).db._checkValue(d);if(h)throw h;b=(this||Rk).db._serializeKey(b);d=(this||Rk).db._serializeValue(d);this._put(b,d);return this||Rk};Zo.prototype._put=function(b,d){(this||Rk)._operations.push({type:"put",key:b,value:d})};Zo.prototype.del=function(b){this._checkWritten();var d=(this||Rk).db._checkKey(b);if(d)throw d;b=(this||Rk).db._serializeKey(b);this._del(b);return this||Rk};Zo.prototype._del=function(b){(this||
Rk)._operations.push({type:"del",key:b})};Zo.prototype.clear=function(){this._checkWritten();this._clear();return this||Rk};Zo.prototype._clear=function(){(this||Rk)._operations=[]};Zo.prototype.write=function(b,d){this._checkWritten();"function"===typeof b&&(d=b);if("function"!==typeof d)throw Error("write() requires a callback argument");if("object"!==typeof b||null===b)b={};(this||Rk)._written=!0;this._write(b,d)};Zo.prototype._write=function(b,d){(this||Rk).db._batch((this||Rk)._operations,b,
d)};Zo.prototype._nextTick=si;var iua=hua=Zo,kn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,vba={},cka=rba,dka=Object.prototype.hasOwnProperty,eka="start end gt gte lt lte".split(" ");Jj.prototype.open=function(b,d){var h=this||kn,a=(this||kn).status;"function"===typeof b&&(d=b);if("function"!==typeof d)throw Error("open() requires a callback argument");if("object"!==typeof b||null===b)b={};b.createIfMissing=!1!==b.createIfMissing;b.errorIfExists=!!b.errorIfExists;
(this||kn).status="opening";this._open(b,function(e){if(e)return h.status=a,d(e);h.status="open";d()})};Jj.prototype._open=function(b,d){si(d)};Jj.prototype.close=function(b){var d=this||kn,h=(this||kn).status;if("function"!==typeof b)throw Error("close() requires a callback argument");(this||kn).status="closing";this._close(function(a){if(a)return d.status=h,b(a);d.status="closed";b()})};Jj.prototype._close=function(b){si(b)};Jj.prototype.get=function(b,d,h){"function"===typeof d&&(h=d);if("function"!==
typeof h)throw Error("get() requires a callback argument");var a=this._checkKey(b);if(a)return si(h,a);b=this._serializeKey(b);if("object"!==typeof d||null===d)d={};d.asBuffer=!1!==d.asBuffer;this._get(b,d,h)};Jj.prototype._get=function(b,d,h){si(function(){h(Error("NotFound"))})};Jj.prototype.put=function(b,d,h,a){"function"===typeof h&&(a=h);if("function"!==typeof a)throw Error("put() requires a callback argument");var e=this._checkKey(b)||this._checkValue(d);if(e)return si(a,e);b=this._serializeKey(b);
d=this._serializeValue(d);if("object"!==typeof h||null===h)h={};this._put(b,d,h,a)};Jj.prototype._put=function(b,d,h,a){si(a)};Jj.prototype.del=function(b,d,h){"function"===typeof d&&(h=d);if("function"!==typeof h)throw Error("del() requires a callback argument");var a=this._checkKey(b);if(a)return si(h,a);b=this._serializeKey(b);if("object"!==typeof d||null===d)d={};this._del(b,d,h)};Jj.prototype._del=function(b,d,h){si(h)};Jj.prototype.batch=function(b,d,h){if(!arguments.length)return this._chainedBatch();
"function"===typeof d&&(h=d);"function"===typeof b&&(h=b);if("function"!==typeof h)throw Error("batch(array) requires a callback argument");if(!Array.isArray(b))return si(h,Error("batch(array) requires an array argument"));if(0===b.length)return si(h);if("object"!==typeof d||null===d)d={};for(var a=Array(b.length),e=0;e<b.length;e++){if("object"!==typeof b[e]||null===b[e])return si(h,Error("batch(array) element must be an object and not `null`"));var n=qt(b[e]);if("put"!==n.type&&"del"!==n.type)return si(h,
Error("`type` must be 'put' or 'del'"));var q=this._checkKey(n.key);if(q)return si(h,q);n.key=this._serializeKey(n.key);if("put"===n.type){if(q=this._checkValue(n.value))return si(h,q);n.value=this._serializeValue(n.value)}a[e]=n}this._batch(a,d,h)};Jj.prototype._batch=function(b,d,h){si(h)};Jj.prototype.clear=function(b,d){if("function"===typeof b)d=b;else if("function"!==typeof d)throw Error("clear() requires a callback argument");b=N5(this||kn,b);b.reverse=!!b.reverse;b.limit="limit"in b?b.limit:
-1;this._clear(b,d)};Jj.prototype._clear=function(b,d){b.keys=!0;b.values=!1;b.keyAsBuffer=!0;b.valueAsBuffer=!0;var h=this._iterator(b),a={},e=this||kn,n=function(q){if(q)return h.end(function(){d(q)});h.next(function(r,v){if(r)return n(r);if(void 0===v)return h.end(d);e._del(v,a,n)})};n()};Jj.prototype._setupIteratorOptions=function(b){b=N5(this||kn,b);b.reverse=!!b.reverse;b.keys=!1!==b.keys;b.values=!1!==b.values;b.limit="limit"in b?b.limit:-1;b.keyAsBuffer=!1!==b.keyAsBuffer;b.valueAsBuffer=
!1!==b.valueAsBuffer;return b};Jj.prototype.iterator=function(b){if("object"!==typeof b||null===b)b={};b=this._setupIteratorOptions(b);return this._iterator(b)};Jj.prototype._iterator=function(b){return new uba(this||kn)};Jj.prototype._chainedBatch=function(){return new iua(this||kn)};Jj.prototype._serializeKey=function(b){return b};Jj.prototype._serializeValue=function(b){return b};Jj.prototype._checkKey=function(b){if(null===b||void 0===b)return Error("key cannot be `null` or `undefined`");if(tba.isBuffer(b)&&
0===b.length)return Error("key cannot be an empty Buffer");if(""===b)return Error("key cannot be an empty String");if(Array.isArray(b)&&0===b.length)return Error("key cannot be an empty Array")};Jj.prototype._checkValue=function(b){if(null===b||void 0===b)return Error("value cannot be `null` or `undefined`")};Jj.prototype._nextTick=si;vba=Jj;var jua=vba;var $o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,wba={},O5=uba;Dj(Sx,O5);Sx.prototype.setDb=function(b){var d=
(this||$o)._iterator=b.iterator((this||$o)._options);(this||$o)._operations.forEach(function(h){d[h.method].apply(d,h.args)})};Sx.prototype._operation=function(b,d){if((this||$o)._iterator)return(this||$o)._iterator[b].apply((this||$o)._iterator,d);(this||$o)._operations.push({method:b,args:d})};["next","end"].forEach(function(b){Sx.prototype["_"+b]=function(){this._operation(b,arguments)}});Sx.prototype.seek=function(){this._operation("seek",arguments)};wba=Sx;var nl="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,UT={},P5=jua,S5=wba,R5=["put","get","del","batch","clear"],fka=["approximateSize","compactRange"];Dj(Tu,P5);Tu.prototype.type="deferred-leveldown";Tu.prototype._open=function(b,d){var h=this||nl;(this||nl)._db.open(b,function(a){if(a)return d(a);h._operations.forEach(function(e){e.iterator?e.iterator.setDb(h._db):h._db[e.method].apply(h._db,e.args)});h._operations=[];gka(h);d()})};Tu.prototype._close=function(b){var d=this||nl;(this||nl)._db.close(function(h){if(h)return b(h);
Q5(d);b()})};Tu.prototype._serializeKey=function(b){return b};Tu.prototype._serializeValue=function(b){return b};UT=Tu;UT.DeferredIterator=S5;var kua=UT,V5={},U5=!1,ZP={},W5=!1,aQ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,lua={},ska=lua=function(b,d){if($P("noDeprecation"))return b;var h=!1;return function(){if(!h){if($P("throwDeprecation"))throw Error(d);$P("traceDeprecation")?console.trace(d):console.warn(d);h=!0}return b.apply(this||aQ,arguments)}},fK={},
gK=ol,Zp=gK.Buffer;Zp.from&&Zp.alloc&&Zp.allocUnsafe&&Zp.allocUnsafeSlow?fK=gK:(X5(gK,fK),fK.Buffer=Uu);Uu.prototype=Object.create(Zp.prototype);X5(Zp,Uu);Uu.from=function(b,d,h){if("number"===typeof b)throw new TypeError("Argument must not be a number");return Zp(b,d,h)};Uu.alloc=function(b,d,h){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=Zp(b);void 0!==d?"string"===typeof h?b.fill(d,h):b.fill(d):b.fill(0);return b};Uu.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");
return Zp(b)};Uu.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return gK.SlowBuffer(b)};var gQ={},bQ=fK.Buffer,Y5=bQ.isEncoding||function(b){b=""+b;switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};gQ.StringDecoder=WA;WA.prototype.write=function(b){if(0===b.length)return"";if(this.lastNeed){var d=
this.fillLast(b);if(void 0===d)return"";var h=this.lastNeed;this.lastNeed=0}else h=0;return h<b.length?d?d+this.text(b,h):this.text(b,h):d||""};WA.prototype.end=function(b){b=b&&b.length?this.write(b):"";return this.lastNeed?b+"\ufffd":b};WA.prototype.text=function(b,d){var h=pka(this,b,d);if(!this.lastNeed)return b.toString("utf8",d);this.lastTotal=h;h=b.length-(h-this.lastNeed);b.copy(this.lastChar,0,h);return b.toString("utf8",d,h)};WA.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length);this.lastNeed-=b.length};var $5={},Z5=!1,b6={},a6=!1,e6=Object.freeze({}),d6={},c6=!1,h6={},g6=!1,k6={},j6=!1,eQ={},m6=!1,tka="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,fQ={},n6=!1,q6={},p6=!1,hQ={},r6=!1,vka="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,iQ={},t6=!1,
VT={},xba=!1,yba={},zba=!1,un={},Aba=!1;Aba||(Aba=!0,un=un=o6(),un.Stream=un,un.Readable=un,un.Writable=l6(),un.Duplex=Ux(),un.Transform=s6(),un.PassThrough=function(){function b(h){if(!(this instanceof b))return new b(h);d.call(this,h)}if(xba)return VT;xba=!0;VT=b;var d=s6();Dj(b,d);b.prototype._transform=function(h,a,e){e(null,h)};return VT}(),un.finished=dQ(),un.pipeline=function(){function b(y){var D=!1;return function(){D||(D=!0,y.apply(void 0,arguments))}}function d(y){if(y)throw y;}function h(y,
D,E,I){I=b(I);var K=!1;y.on("close",function(){K=!0});void 0===n&&(n=dQ());n(y,{readable:D,writable:E},function(N){if(N)return I(N);K=!0;I()});var P=!1;return function(N){if(!K&&!P){P=!0;if(y.setHeader&&"function"===typeof y.abort)return y.abort();if("function"===typeof y.destroy)return y.destroy();I(N||new v("pipe"))}}}function a(y){y()}function e(y,D){return y.pipe(D)}if(zba)return yba;zba=!0;var n,q=Tx().codes,r=q.ERR_MISSING_ARGS,v=q.ERR_STREAM_DESTROYED;return yba=function(){for(var y=arguments.length,
D=Array(y),E=0;E<y;E++)D[E]=arguments[E];var I=D.length?"function"!==typeof D[D.length-1]?d:D.pop():d;Array.isArray(D[0])&&(D=D[0]);if(2>D.length)throw new r("streams");var K,P=D.map(function(N,aa){var m=aa<D.length-1;return h(N,m,0<aa,function(t){K||(K=t);t&&P.forEach(a);m||(P.forEach(a),I(K))})});return D.reduce(e)}}());var Bba=un;var ap="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Cba={},mua=Dj,u6=Bba.Readable,wka=qt;Cba=Vx;mua(Vx,u6);Vx.prototype._read=function(){var b=
this||ap,d=(this||ap)._options;(this||ap).destroyed||(this||ap)._iterator.next(function(h,a,e){if(!b.destroyed){if(h)return b.destroy(h);void 0===a&&void 0===e?b.push(null):!1!==d.keys&&!1===d.values?b.push(a):!1===d.keys&&!1!==d.values?b.push(e):b.push({key:a,value:e})}})};Vx.prototype._destroy=function(b,d){(this||ap)._iterator.end(function(h){d(b||h)})};var nua=Cba,hK={};(function(b,d,h){hK?hK=h():d[b]=h()})("prr",hK,function(){var b="function"==typeof Object.defineProperty?function(h,a,e){Object.defineProperty(h,
a,e);return h}:function(h,a,e){h[a]=e.value;return h},d=function(h,a){var e="object"==typeof a,n=!e&&"string"==typeof a,q=function(r){return e?!!a[r]:n?-1<a.indexOf(r[0]):!1};return{enumerable:q("enumerable"),configurable:q("configurable"),writable:q("writable"),value:h}};return function(h,a,e,n){var q;n=d(e,n);if("object"==typeof a){for(q in a)Object.hasOwnProperty.call(a,q)&&(n.value=a[q],b(h,q,n));return h}return b(h,a,n)}});var vk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,oua={},xka=hK;jQ.prototype=Error();var pua=oua=function(b){var d=function(h,a){return yka(b,h,a)};return{CustomError:jQ,FilesystemError:d("FilesystemError"),createError:d}},xq={},qua=xq.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},
{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},
{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},
{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",
description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},
{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},
{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},
{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];xq.errno={};xq.code={};qua.forEach(function(b){xq.errno[b.errno]=b;xq.code[b.code]=b});xq.custom=pua(xq);
xq.create=xq.custom.createError;var rua={},Fv=xq.create,Gv=Fv("LevelUPError"),WT=Fv("NotFoundError",Gv);WT.prototype.notFound=!0;WT.prototype.status=404;var Hv=rua={LevelUPError:Gv,InitializationError:Fv("InitializationError",Gv),OpenError:Fv("OpenError",Gv),ReadError:Fv("ReadError",Gv),WriteError:Fv("WriteError",Gv),NotFoundError:WT,EncodingError:Fv("EncodingError",Gv)},sua={},rt=sua=function(){var b,d=new Promise(function(h,a){b=function(e,n){e?a(e):h(n)}});b.promise=d;return b};var Sy=function(b,
d){return"function"===typeof b?b:d};var Dba=function(b){return"object"===typeof b&&null!==b?b:{}};var wk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,tua={},FC=Hv.WriteError;XA.prototype.put=function(b,d){try{(this||wk).batch.put(b,d)}catch(h){throw new FC(h);}(this||wk).ops.push({type:"put",key:b,value:d});(this||wk).length++;return this||wk};XA.prototype.del=function(b){try{(this||wk).batch.del(b)}catch(d){throw new FC(d);}(this||wk).ops.push({type:"del",key:b});
(this||wk).length++;return this||wk};XA.prototype.clear=function(){try{(this||wk).batch.clear()}catch(b){throw new FC(b);}(this||wk).ops=[];(this||wk).length=0;return this||wk};XA.prototype.write=function(b,d){var h=(this||wk)._levelup,a=(this||wk).ops;d=Sy(b,d);if(!d){d=rt();var e=d.promise}b=Dba(b);try{(this||wk).batch.write(b,function(n){if(n)return d(new FC(n));h.emit("batch",a);d()})}catch(n){throw new FC(n);}return e};var uua=tua=XA,Kka={assign:w6,polyfill:function(){Object.assign||Object.defineProperty(Object,
"assign",{enumerable:!1,configurable:!0,writable:!0,value:w6})}},Eba=Object.prototype.toString,Fba=function(b){var d=Eba.call(b),h="[object Arguments]"===d;return h||(h="[object Array]"!==d&&null!==b&&"object"==typeof b&&"number"==typeof b.length&&0<=b.length&&"[object Function]"===Eba.call(b.callee)),h};if(!Object.keys){var iK=Object.prototype.hasOwnProperty,Gba=Object.prototype.toString,Hba=Object.prototype.propertyIsEnumerable,vua=!Hba.call({toString:null},"toString"),wua=Hba.call(function(){},
"prototype"),jK="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),XT=function(b){var d=b.constructor;return d&&d.prototype===b},xua={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,
$webkitStorageInfo:!0,$window:!0},yua=function(){if("undefined"==typeof window)return!1;for(var b in window)try{if(!xua["$"+b]&&iK.call(window,b)&&null!==window[b]&&"object"==typeof window[b])try{XT(window[b])}catch(d){return!0}}catch(d){return!0}return!1}();var zua=function(b){var d=null!==b&&"object"==typeof b,h="[object Function]"===Gba.call(b),a=Fba(b),e=d&&"[object String]"===Gba.call(b),n=[];if(!d&&!h&&!a)throw new TypeError("Object.keys called on a non-object");d=wua&&h;if(e&&0<b.length&&!iK.call(b,
0))for(e=0;e<b.length;++e)n.push(String(e));if(a&&0<b.length)for(a=0;a<b.length;++a)n.push(String(a));else for(var q in b)d&&"prototype"===q||!iK.call(b,q)||n.push(String(q));if(vua){if("undefined"!=typeof window&&yua)try{var r=XT(b)}catch(v){r=!1}else r=XT(b);for(a=0;a<jK.length;++a)r&&"constructor"===jK[a]||!iK.call(b,jK[a])||n.push(jK[a])}return n}}var Aua=zua,Bua=Array.prototype.slice,Iba=Object.keys,kK=Iba?function(b){return Iba(b)}:Aua,Jba=Object.keys;kK.shim=function(){Object.keys?function(){var b=
Object.keys(arguments);return b&&b.length===arguments.length}(1,2)||(Object.keys=function(b){return Fba(b)?Jba(Bua.call(b)):Jba(b)}):Object.keys=kK;return Object.keys||kK};var Cua="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Dua=Object.prototype.toString,Eua=Array.prototype.concat,YT=Object.defineProperty,Kba=YT&&function(){var b={};try{for(var d in YT(b,"x",{enumerable:!1,value:b}),b)return!1;return b.x===b}catch(h){return!1}}(),GC=function(b,d){var h=2<arguments.length?arguments[2]:
{},a=kK(d);Cua&&(a=Eua.call(a,Object.getOwnPropertySymbols(d)));for(var e=0;e<a.length;e+=1){var n=void 0,q=b,r=a[e],v=d[a[e]],y=h[a[e]];(!(r in q)||"function"==typeof(n=y)&&"[object Function]"===Dua.call(n)&&y())&&(Kba?YT(q,r,{configurable:!0,enumerable:!1,value:v,writable:!0}):q[r]=v)}};GC.supportsDescriptors=!!Kba;var Lba=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global).Symbol,Fua=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;
if("symbol"==typeof Symbol.iterator)return!0;var b={},d=Symbol("test"),h=Object(d);if("string"==typeof d||"[object Symbol]"!==Object.prototype.toString.call(d)||"[object Symbol]"!==Object.prototype.toString.call(h))return!1;for(d in b[d]=42,b)return!1;if("function"==typeof Object.keys&&0!==Object.keys(b).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(b).length)return!1;h=Object.getOwnPropertySymbols(b);return 1!==h.length||h[0]!==d||!Object.prototype.propertyIsEnumerable.call(b,
d)||"function"==typeof Object.getOwnPropertyDescriptor&&(b=Object.getOwnPropertyDescriptor(b,d),42!==b.value||!0!==b.enumerable)?!1:!0},ZT=Array.prototype.slice,Gua=Object.prototype.toString,Hua=function(b){var d=this;if("function"!=typeof d||"[object Function]"!==Gua.call(d))throw new TypeError("Function.prototype.bind called on incompatible "+d);for(var h,a=ZT.call(arguments,1),e=Math.max(0,d.length-a.length),n=[],q=0;q<e;q++)n.push("$"+q);if(h=Function("binder","return function ("+n.join(",")+
"){ return binder.apply(this,arguments); }")(function(){if(this instanceof h){var r=d.apply(this,a.concat(ZT.call(arguments)));return Object(r)===r?r:this}return d.apply(b,a.concat(ZT.call(arguments)))}),d.prototype)e=function(){},e.prototype=d.prototype,h.prototype=new e,e.prototype=null;return h},$T=Function.prototype.bind||Hua,HC=TypeError,Iv=Object.getOwnPropertyDescriptor;if(Iv)try{Iv({},"")}catch(b){Iv=null}var aU=function(){throw new HC;},Iua=Iv?function(){try{return arguments.callee,aU}catch(b){try{return Iv(arguments,
"callee").get}catch(d){return aU}}}():aU,Jv="function"==typeof Lba&&"function"==typeof Symbol&&"symbol"==typeof Lba("foo")&&"symbol"==typeof Symbol("bar")&&Fua(),Kv=Object.getPrototypeOf||function(b){return b.__proto__},bU="undefined"==typeof Uint8Array?void 0:Kv(Uint8Array),cU={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":Jv?Kv([][Symbol.iterator]()):
void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,
"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,
"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?
void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Jv?Kv(Kv([][Symbol.iterator]())):void 0,"%JSON%":"object"==
typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&Jv?Kv((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,
"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,
"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&Jv?Kv((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:
SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":Jv?Kv(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":Jv?Symbol:void 0,"%SymbolPrototype%":Jv?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":Iua,"%TypedArray%":bU,"%TypedArrayPrototype%":bU?bU.prototype:void 0,"%TypeError%":HC,"%TypeErrorPrototype%":HC.prototype,
"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==
typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},Mba=$T.call(Function.call,String.prototype.replace),Jua=
/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Kua=/\\(\\)?/g,Lua=function(b){var d=[];return Mba(b,Jua,function(h,a,e,n){d[d.length]=e?Mba(n,Kua,"$1"):a||h}),d},Nba,Oba=function(b,d){if("string"!=typeof b||0===b.length)throw new TypeError("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof d)throw new TypeError('"allowMissing" argument must be a boolean');var h=Lua(b);var a="%"+(0<h.length?h[0]:"")+"%";if(!(a in
cU))throw new SyntaxError("intrinsic "+a+" does not exist!");if(void 0===cU[a]&&!d)throw new HC("intrinsic "+a+" exists, but is not available. Please file an issue!");a=cU[a];for(var e=1;e<h.length;e+=1)if(null!=a)if(Iv&&e+1>=h.length){var n=Iv(a,h[e]);if(!(d||h[e]in a))throw new HC("base intrinsic for "+b+" exists, but the property is not available.");a=n?n.get||n.value:a[h[e]]}else a=a[h[e]];return a}("%Function%"),Mua=Oba.apply,Nua=Oba.call;(Nba=function(){return $T.apply(Nua,arguments)}).apply=
function(){return $T.apply(Mua,arguments)};var dU,lK,Oua=(dU=function(b,d){return 0===b&&0===d?1/b==1/d:b===d||!(b==b||d==d)},dU),Pua=(lK=function(){return"function"==typeof Object.is?Object.is:Oua},lK),Pba=Nba(lK(),Object);GC(Pba,{getPolyfill:lK,implementation:dU,shim:function(){var b=Pua();return GC(Object,{is:b},{is:function(){return Object.is!==b}}),b}});var S6=Pba;var Qba=function(b){return b!=b};var mK,Qua=Qba,Rua=(mK=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:
Qua},GC),Sua=Qba,Rba=mK();GC(Rba,{getPolyfill:mK,implementation:Sua,shim:function(){var b=mK();return Rua(Number,{isNaN:b},{isNaN:function(){return Number.isNaN!==b}}),b}});var kQ={},y6=!1,A6={},z6=!1,Bka=void 0!==/a/g.flags,EG=function(b){var d=[];return b.forEach(function(h){return d.push(h)}),d},P6=function(b){var d=[];return b.forEach(function(h,a){return d.push([a,h])}),d},D6=Object.is?Object.is:S6,AG=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},nQ=Number.isNaN?
Number.isNaN:Rba,ZA=mQ(Object.prototype.hasOwnProperty),DG=mQ(Object.prototype.propertyIsEnumerable),E6=mQ(Object.prototype.toString),tm=Cg.types,Gka=tm.isAnyArrayBuffer,Dka=tm.isArrayBufferView,F6=tm.isDate,BG=tm.isMap,G6=tm.isRegExp,CG=tm.isSet,Cka=tm.isNativeError,Hka=tm.isBoxedPrimitive,H6=tm.isNumberObject,I6=tm.isStringObject,J6=tm.isBooleanObject,K6=tm.isBigIntObject,Ika=tm.isSymbolObject,Eka=tm.isFloat32Array,Fka=tm.isFloat64Array,Q6={isDeepEqual:function(b,d){return co(b,d,!1)},isDeepStrictEqual:function(b,
d){return co(b,d,!0)}},oQ={},R6=!1,vl=lQ();vl.AssertionError;vl.deepEqual;vl.deepStrictEqual;vl.doesNotReject;vl.doesNotThrow;vl.equal;vl.fail;vl.ifError;vl.notDeepEqual;vl.notDeepStrictEqual;vl.notEqual;vl.notStrictEqual;vl.ok;vl.rejects;vl.strict;vl.strictEqual;vl.throws;var lh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Tua={},GG=sk,FG=Fl.EventEmitter,Uua=Cg.inherits,T6=kua,Nka=rba,Mka=vl,Wx=Dba,nK=Hv.WriteError,U6=Hv.ReadError,Vua=Hv.NotFoundError,Wua=Hv.OpenError,
Lka=Hv.InitializationError;mj.prototype.emit=FG.prototype.emit;mj.prototype.once=FG.prototype.once;Uua(mj,FG);mj.prototype.open=function(b,d){var h=this||lh;"function"===typeof b&&(d=b,b=null);if(!d){d=rt();var a=d.promise}b||(b=(this||lh).options);if(this.isOpen())return GG.nextTick(d,null,h),a;if(this._isOpening())return this.once("open",function(){d(null,h)}),a;this.emit("opening");(this||lh).db.open(b,function(e){if(e)return d(new Wua(e));h.db=h._db;d(null,h);h.emit("open");h.emit("ready")});
return a};mj.prototype.close=function(b){var d=this||lh;if(!b){b=rt();var h=b.promise}if(this.isOpen())(this||lh).db.close(function(){d.emit("closed");b.apply(null,arguments)}),this.emit("closing"),(this||lh).db=new T6((this||lh)._db);else if(this.isClosed())GG.nextTick(b);else if("closing"===(this||lh).db.status)this.once("closed",b);else if(this._isOpening())this.once("open",function(){d.close(b)});return h};mj.prototype.isOpen=function(){return"open"===(this||lh).db.status};mj.prototype._isOpening=
function(){return"opening"===(this||lh).db.status};mj.prototype.isClosed=function(){return/^clos|new/.test((this||lh).db.status)};mj.prototype.get=function(b,d,h){h=Sy(d,h);if(!h){h=rt();var a=h.promise}if($A(this||lh,h))return a;d=Wx(d);(this||lh).db.get(b,d,function(e,n){if(e)return e=/notfound/i.test(e)||e.notFound?new Vua("Key not found in database ["+b+"]",e):new U6(e),h(e);h(null,n)});return a};mj.prototype.put=function(b,d,h,a){var e=this||lh;a=Sy(h,a);if(!a){a=rt();var n=a.promise}if($A(this||
lh,a))return n;h=Wx(h);(this||lh).db.put(b,d,h,function(q){if(q)return a(new nK(q));e.emit("put",b,d);a()});return n};mj.prototype.del=function(b,d,h){var a=this||lh;h=Sy(d,h);if(!h){h=rt();var e=h.promise}if($A(this||lh,h))return e;d=Wx(d);(this||lh).db.del(b,d,function(n){if(n)return h(new nK(n));a.emit("del",b);h()});return e};mj.prototype.batch=function(b,d,h){if(!arguments.length)return new uua(this||lh);var a=this||lh;h="function"===typeof b?b:Sy(d,h);if(!h){h=rt();var e=h.promise}if($A(this||
lh,h))return e;d=Wx(d);(this||lh).db.batch(b,d,function(n){if(n)return h(new nK(n));a.emit("batch",b);h()});return e};mj.prototype.iterator=function(b){return(this||lh).db.iterator(b)};mj.prototype.clear=function(b,d){var h=this||lh;d=Sy(b,d);b=Wx(b);if(!d){d=rt();var a=d.promise}if($A(this||lh,d))return a;(this||lh).db.clear(b,function(e){if(e)return d(new nK(e));h.emit("clear",b);d()});return a};mj.prototype.readStream=mj.prototype.createReadStream=function(b){b=qt({keys:!0,values:!0},b);"number"!==
typeof b.limit&&(b.limit=-1);return new nua((this||lh).db.iterator(b),b)};mj.prototype.keyStream=mj.prototype.createKeyStream=function(b){return this.createReadStream(qt(b,{keys:!0,values:!1}))};mj.prototype.valueStream=mj.prototype.createValueStream=function(b){return this.createReadStream(qt(b,{keys:!1,values:!0}))};mj.prototype.toString=function(){return"LevelUP"};mj.prototype.type="levelup";mj.errors=Hv;var Xua=Tua=mj.default=mj,fk={},Yua=ol.Buffer;fk.compare=function(b,d){if(Yua.isBuffer(b)){for(var h=
Math.min(b.length,d.length),a=0;a<h;a++){var e=b[a]-d[a];if(e)return e}return b.length-d.length}return b<d?-1:b>d?1:0};var Zua=fk.lowerBoundKey=function(b){return $p(b,"gt")||$p(b,"gte")||$p(b,"min")||(b.reverse?$p(b,"end"):$p(b,"start"))||void 0},eU=fk.lowerBound=function(b,d){var h=Zua(b);return h?b[h]:d},fU=fk.lowerBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"gt")?!1:!0},gU=fk.upperBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"lt")?!1:!0},$ua=fk.lowerBoundExclusive=
function(b){return!fU(b)},ava=fk.upperBoundExclusive=function(b){return!gU(b)},bva=fk.upperBoundKey=function(b){return $p(b,"lt")||$p(b,"lte")||$p(b,"max")||(b.reverse?$p(b,"start"):$p(b,"end"))||void 0},hU=fk.upperBound=function(b,d){var h=bva(b);return h?b[h]:d};fk.start=function(b,d){return b.reverse?hU(b,d):eU(b,d)};fk.end=function(b,d){return b.reverse?eU(b,d):hU(b,d)};fk.startInclusive=function(b){return b.reverse?gU(b):fU(b)};fk.endInclusive=function(b){return b.reverse?fU(b):gU(b)};fk.toLtgt=
function(b,d,h,a,e){d=d||{};h=h||Oka;var n=3<arguments.length,q=fk.lowerBoundKey(b),r=fk.upperBoundKey(b);q?"gt"===q?d.gt=h(b.gt,!1):d.gte=h(b[q],!1):n&&(d.gte=h(a,!1));r?"lt"===r?d.lt=h(b.lt,!0):d.lte=h(b[r],!0):n&&(d.lte=h(e,!0));null!=b.reverse&&(d.reverse=!!b.reverse);Object.hasOwnProperty.call(d,"max")&&delete d.max;Object.hasOwnProperty.call(d,"min")&&delete d.min;Object.hasOwnProperty.call(d,"start")&&delete d.start;Object.hasOwnProperty.call(d,"end")&&delete d.end;return d};fk.contains=function(b,
d,h){h=h||fk.compare;var a=eU(b);if(void 0!==a&&""!==a&&(a=h(d,a),0>a||0===a&&$ua(b)))return!1;a=hU(b);return void 0!==a&&""!==a&&(a=h(d,a),0<a||0===a&&ava(b))?!1:!0};fk.filter=function(b,d){return function(h){return fk.contains(b,h,d)}};var Kr={},qQ=tba;Kr.utf8=Kr["utf-8"]={encode:function(b){return pQ(b)?b:String(b)},decode:HG,buffer:!1,type:"utf8"};Kr.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"};Kr.binary={encode:function(b){return pQ(b)?b:qQ.from(b)},decode:HG,buffer:!0,
type:"binary"};Kr.none={encode:HG,decode:HG,buffer:!1,type:"id"};Kr.id=Kr.none;"hex ascii base64 ucs2 ucs-2 utf16le utf-16le".split(" ").forEach(function(b){Kr[b]={encode:function(d){return pQ(d)?d:qQ.from(d,b)},decode:function(d){return d.toString(b)},buffer:!0,type:b}});var pr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Sba={},rQ=Kr;Sba=im;im.prototype._encoding=function(b){"string"===typeof b&&(b=rQ[b]);b||(b=rQ.id);return b};im.prototype._keyEncoding=function(b,
d){return this._encoding(d&&d.keyEncoding||b&&b.keyEncoding||(this||pr).opts.keyEncoding)};im.prototype._valueEncoding=function(b,d){return this._encoding(d&&(d.valueEncoding||d.encoding)||b&&(b.valueEncoding||b.encoding)||(this||pr).opts.valueEncoding||(this||pr).opts.encoding)};im.prototype.encodeKey=function(b,d,h){return this._keyEncoding(d,h).encode(b)};im.prototype.encodeValue=function(b,d,h){return this._valueEncoding(d,h).encode(b)};im.prototype.decodeKey=function(b,d){return this._keyEncoding(d).decode(b)};
im.prototype.decodeValue=function(b,d){return this._valueEncoding(d).decode(b)};im.prototype.encodeBatch=function(b,d){var h=this||pr;return b.map(function(a){var e={type:a.type,key:h.encodeKey(a.key,d,a)};h.keyAsBuffer(d,a)&&(e.keyEncoding="binary");a.prefix&&(e.prefix=a.prefix);"value"in a&&(e.value=h.encodeValue(a.value,d,a),h.valueAsBuffer(d,a)&&(e.valueEncoding="binary"));return e})};var cva="lt gt lte gte start end".split(" ");im.prototype.encodeLtgt=function(b){var d=this||pr,h={};Object.keys(b).forEach(function(a){h[a]=
-1<cva.indexOf(a)?d.encodeKey(b[a],b):b[a]});return h};im.prototype.createStreamDecoder=function(b){var d=this||pr;return b.keys&&b.values?function(h,a){return{key:d.decodeKey(h,b),value:d.decodeValue(a,b)}}:b.keys?function(h){return d.decodeKey(h,b)}:b.values?function(h,a){return d.decodeValue(a,b)}:function(){}};im.prototype.keyAsBuffer=function(b){return this._keyEncoding(b).buffer};im.prototype.valueAsBuffer=function(b){return this._valueEncoding(b).buffer};var dva=Sba,eva={},Ska=eva=Array.isArray||
function(b){return"[object Array]"==Object.prototype.toString.call(b)},iU={},Tba=!1,jU="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Yx=function(){function b(){d.call(this||jU)}if(Tba)return iU;Tba=!0;iU=b;var d=Fl.EventEmitter;Fh()(b,d);b.Readable=yN();b.Writable=vN();b.Duplex=Bu();b.Transform=AN();b.PassThrough=h_();b.finished=yF();b.pipeline=j_();b.Stream=b;b.prototype.pipe=function(h,a){function e(I){h.writable&&!1===h.write(I)&&D.pause&&D.pause()}function n(){D.readable&&
D.resume&&D.resume()}function q(){E||(E=!0,h.end())}function r(){E||(E=!0,"function"===typeof h.destroy&&h.destroy())}function v(I){y();if(0===d.listenerCount(this||jU,"error"))throw I;}function y(){D.removeListener("data",e);h.removeListener("drain",n);D.removeListener("end",q);D.removeListener("close",r);D.removeListener("error",v);h.removeListener("error",v);D.removeListener("end",y);D.removeListener("close",y);h.removeListener("close",y)}var D=this||jU;D.on("data",e);h.on("drain",n);h._isStdio||
a&&!1===a.end||(D.on("end",q),D.on("close",r));var E=!1;D.on("error",v);h.on("error",v);D.on("end",y);D.on("close",y);h.on("close",y);h.emit("pipe",D);return h};return iU}();oba(Yx.finished);oba(Yx.pipeline);var xk={},fva=ol.Buffer;xk.isArray=function(b){return Array.isArray?Array.isArray(b):"[object Array]"===Object.prototype.toString.call(b)};xk.isBoolean=function(b){return"boolean"===typeof b};xk.isNull=function(b){return null===b};xk.isNullOrUndefined=function(b){return null==b};xk.isNumber=function(b){return"number"===
typeof b};xk.isString=function(b){return"string"===typeof b};xk.isSymbol=function(b){return"symbol"===typeof b};xk.isUndefined=function(b){return void 0===b};xk.isRegExp=function(b){return"[object RegExp]"===Object.prototype.toString.call(b)};xk.isObject=function(b){return"object"===typeof b&&null!==b};xk.isDate=function(b){return"[object Date]"===Object.prototype.toString.call(b)};xk.isError=function(b){return"[object Error]"===Object.prototype.toString.call(b)||b instanceof Error};xk.isFunction=
function(b){return"function"===typeof b};xk.isPrimitive=function(b){return null===b||"boolean"===typeof b||"number"===typeof b||"string"===typeof b||"symbol"===typeof b||"undefined"===typeof b};xk.isBuffer=fva.isBuffer;var Tf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,uQ={},Uba=ol.Buffer,gva=Uba.isEncoding||function(b){switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;
default:return!1}},kU=uQ.StringDecoder=function(b){(this||Tf).encoding=(b||"utf8").toLowerCase().replace(/[-_]/,"");if(b&&!gva(b))throw Error("Unknown encoding: "+b);switch((this||Tf).encoding){case "utf8":(this||Tf).surrogateSize=3;break;case "ucs2":case "utf16le":(this||Tf).surrogateSize=2;(this||Tf).detectIncompleteChar=Qka;break;case "base64":(this||Tf).surrogateSize=3;(this||Tf).detectIncompleteChar=Rka;break;default:(this||Tf).write=Pka;return}(this||Tf).charBuffer=new Uba(6);(this||Tf).charReceived=
0;(this||Tf).charLength=0};kU.prototype.write=function(b){for(var d="";(this||Tf).charLength;){d=b.length>=(this||Tf).charLength-(this||Tf).charReceived?(this||Tf).charLength-(this||Tf).charReceived:b.length;b.copy((this||Tf).charBuffer,(this||Tf).charReceived,0,d);(this||Tf).charReceived+=d;if((this||Tf).charReceived<(this||Tf).charLength)return"";b=b.slice(d,b.length);d=(this||Tf).charBuffer.slice(0,(this||Tf).charLength).toString((this||Tf).encoding);var h=d.charCodeAt(d.length-1);if(55296<=h&&
56319>=h)(this||Tf).charLength+=(this||Tf).surrogateSize,d="";else{(this||Tf).charReceived=(this||Tf).charLength=0;if(0===b.length)return d;break}}this.detectIncompleteChar(b);var a=b.length;(this||Tf).charLength&&(b.copy((this||Tf).charBuffer,0,b.length-(this||Tf).charReceived,a),a-=(this||Tf).charReceived);d+=b.toString((this||Tf).encoding,0,a);a=d.length-1;h=d.charCodeAt(a);return 55296<=h&&56319>=h?(h=(this||Tf).surrogateSize,(this||Tf).charLength+=h,(this||Tf).charReceived+=h,(this||Tf).charBuffer.copy((this||
Tf).charBuffer,h,0,h),b.copy((this||Tf).charBuffer,0,0,h),d.substring(0,a)):d};kU.prototype.detectIncompleteChar=function(b){for(var d=3<=b.length?3:b.length;0<d;d--){var h=b[b.length-d];if(1==d&&6==h>>5){(this||Tf).charLength=2;break}if(2>=d&&14==h>>4){(this||Tf).charLength=3;break}if(3>=d&&30==h>>3){(this||Tf).charLength=4;break}}(this||Tf).charReceived=d};kU.prototype.end=function(b){var d="";b&&b.length&&(d=this.write(b));(this||Tf).charReceived&&(b=(this||Tf).encoding,d+=(this||Tf).charBuffer.slice(0,
(this||Tf).charReceived).toString(b));return d};var Tka=Object.freeze({}),sQ={},W6=!1,mh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,tQ={},X6=!1,cp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,vQ={},Z6=!1,lf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,wQ={},a7=!1,pl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,xQ={},c7=!1,b7="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,xo={},Vba=!1,hva=function(){if(Vba)return xo;Vba=!0;var b=sk;xo=xo=Y6();xo.Stream=Yx;xo.Readable=xo;xo.Writable=V6();xo.Duplex=Xx();xo.Transform=$6();xo.PassThrough=Uka();b.browser||"disable"!==b.env.READABLE_STREAM||(xo=Yx);return xo}(),iva={},Xka=aB(fk),jva=aB(Fl),kva=aB(dva),lva=aB(hva),Wba=aB(Dj);Wba(yQ,Error);yQ.prototype.name="NotFoundError";var mva=jva.EventEmitter,nva=new yQ,Xba=function(b,d,h,a){function e(q){var r={},v;if(a)for(v in a)"undefined"!==
typeof a[v]&&(r[v]=a[v]);if(q)for(v in q)"undefined"!==typeof q[v]&&(r[v]=q[v]);return r}var n=new mva;n.sublevels={};n.options=a;n.version="6.5.4";n.methods={};d=d||[];n.put=function(q,r,v,y){"function"===typeof v&&(y=v,v={});b.apply([{key:q,value:r,prefix:d.slice(),type:"put"}],e(v),function(D){if(D)return y(D);n.emit("put",q,r);y(null)})};n.prefix=function(){return d.slice()};n.batch=function(q,r,v){"function"===typeof r&&(v=r,r={});q=q.map(function(y){return{key:y.key,value:y.value,prefix:y.prefix||
d,keyEncoding:y.keyEncoding,valueEncoding:y.valueEncoding,type:y.type}});b.apply(q,e(r),function(y){if(y)return v(y);n.emit("batch",q);v(null)})};n.get=function(q,r,v){"function"===typeof r&&(v=r,r={});b.get(q,d,e(r),function(y,D){y?v(nva):v(null,D)})};n.sublevel=function(q,r){return n.sublevels[q]=n.sublevels[q]||Xba(b,d.concat(q),h,e(r))};n.readStream=n.createReadStream=function(q){q=e(q);q.prefix=d;var r=b.iterator(q);q=h(q,b.createDecoder(q));q.setIterator(r);return q};n.close=function(q){b.close(q)};
n.isOpen=b.isOpen;n.isClosed=b.isClosed;return n},d7=lva.Readable;Wba(Ps,d7);Ps.prototype.setIterator=function(b){this._iterator=b;return this._destroyed?b.end(function(){}):this._waiting?(this._waiting=!1,this._read()):this};Ps.prototype._read=function(){var b=this;if(!b._destroyed){if(!b._iterator)return this._waiting=!0;b._iterator.next(function(d,h,a){if(d||void 0===h&&void 0===a)return d||b._destroyed||b.push(null),b._cleanup(d);a=b._makeData(h,a);b._destroyed||b.push(a)})}};Ps.prototype._cleanup=
function(b){if(!this._destroyed){this._destroyed=!0;var d=this;b&&"iterator has ended"!==b.message&&d.emit("error",b);d._iterator?d._iterator.end(function(){d._iterator=null;d.emit("close")}):d.emit("close")}};Ps.prototype.destroy=function(){this._cleanup()};var ova={encode:function(b){return"\u00ff"+b[0]+"\u00ff"+b[1]},decode:function(b){b=b.toString();var d=b.indexOf("\u00ff",1);return[b.substring(1,d),b.substring(d+1)]},lowerBound:"\x00",upperBound:"\u00ff"},pva=new kva,qva=iva=function(b){return Xba(Wka(b,
ova,pva),[],Ps,b.options)},qr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,oK={},rva=sk,e7=Bba.Transform,Yba=Dj;Yba(Zx,e7);Zx.prototype.destroy=function(b){if(!(this||qr)._destroyed){(this||qr)._destroyed=!0;var d=this||qr;rva.nextTick(function(){b&&d.emit("error",b);d.emit("close")})}};oK=zQ(function(b,d,h){b=new Zx(b);b._transform=d;h&&(b._flush=h);return b});oK.ctor=zQ(function(b,d,h){function a(e){if(!((this||qr)instanceof a))return new a(e);(this||qr).options=
Object.assign({},b,e);Zx.call(this||qr,(this||qr).options)}Yba(a,Zx);a.prototype._transform=d;h&&(a.prototype._flush=h);return a});oK.obj=zQ(function(b,d,h){b=new Zx(Object.assign({objectMode:!0,highWaterMark:16},b));b._transform=d;h&&(b._flush=h);return b});var Zba=oK,sva={};Li.prototype.toArray=function(){for(var b=this._length,d=Array(b),h=this._front,a=this._capacity,e=0;e<b;++e)d[e]=this[h+e&a-1];return d};Li.prototype.push=function(b){var d=arguments.length,h=this._length;if(1<d){var a=this._capacity;
if(h+d>a){for(var e=0;e<d;++e){this._checkCapacity(h+1);var n=this._front+h&this._capacity-1;this[n]=arguments[e];h++;this._length=h}return h}n=this._front;for(e=0;e<d;++e)this[n+h&a-1]=arguments[e],n++;this._length=h+d;return h+d}if(0===d)return h;this._checkCapacity(h+1);e=this._front+h&this._capacity-1;this[e]=b;this._length=h+1;return h+1};Li.prototype.pop=function(){var b=this._length;if(0!==b){var d=this._front+b-1&this._capacity-1,h=this[d];this[d]=void 0;this._length=b-1;return h}};Li.prototype.shift=
function(){var b=this._length;if(0!==b){var d=this._front,h=this[d];this[d]=void 0;this._front=d+1&this._capacity-1;this._length=b-1;return h}};Li.prototype.unshift=function(b){var d=this._length,h=arguments.length;if(1<h){var a=this._capacity;if(d+h>a){for(var e=h-1;0<=e;e--){this._checkCapacity(d+1);a=this._capacity;var n=(this._front-1&a-1^a)-a;this[n]=arguments[e];d++;this._length=d;this._front=n}return d}n=this._front;for(e=h-1;0<=e;e--)n=(n-1&a-1^a)-a,this[n]=arguments[e];this._front=n;this._length=
d+h;return d+h}if(0===h)return d;this._checkCapacity(d+1);a=this._capacity;e=(this._front-1&a-1^a)-a;this[e]=b;this._length=d+1;this._front=e;return d+1};Li.prototype.peekBack=function(){var b=this._length;if(0!==b)return this[this._front+b-1&this._capacity-1]};Li.prototype.peekFront=function(){if(0!==this._length)return this[this._front]};Li.prototype.get=function(b){if(b===(b|0)){var d=this._length;0>b&&(b+=d);if(!(0>b||b>=d))return this[this._front+b&this._capacity-1]}};Li.prototype.isEmpty=function(){return 0===
this._length};Li.prototype.clear=function(){for(var b=this._length,d=this._front,h=this._capacity,a=0;a<b;++a)this[d+a&h-1]=void 0;this._front=this._length=0};Li.prototype.toString=function(){return this.toArray().toString()};Li.prototype.valueOf=Li.prototype.toString;Li.prototype.removeFront=Li.prototype.shift;Li.prototype.removeBack=Li.prototype.pop;Li.prototype.insertFront=Li.prototype.unshift;Li.prototype.insertBack=Li.prototype.push;Li.prototype.enqueue=Li.prototype.push;Li.prototype.dequeue=
Li.prototype.shift;Li.prototype.toJSON=Li.prototype.toArray;Object.defineProperty(Li.prototype,"length",{get:function(){return this._length},set:function(){throw new RangeError("");}});Li.prototype._checkCapacity=function(b){this._capacity<b&&this._resizeTo(f7(1.5*this._capacity+16))};Li.prototype._resizeTo=function(b){var d=this._capacity;this._capacity=b;b=this._front;var h=this._length;if(b+h>d)for(b=b+h&d-1,h=0;h<b;++h)this[h+d]=this[h+0],this[h+0]=void 0};var g7=Array.isArray,tva=sva=Li,uva=
{},yq=ol.Buffer,vva=Object.prototype.toString,lU="function"===typeof yq.alloc&&"function"===typeof yq.allocUnsafe&&"function"===typeof yq.from,wva=uva=function(b,d,h){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("ArrayBuffer"===vva.call(b).slice(8,-1)){d>>>=0;var a=b.byteLength-d;if(0>a)throw new RangeError("'offset' is out of bounds");if(void 0===h)h=a;else if(h>>>=0,h>a)throw new RangeError("'length' is out of bounds");return lU?yq.from(b.slice(d,d+h)):
new yq(new Uint8Array(b.slice(d,d+h)))}if("string"===typeof b){h=d;if("string"!==typeof h||""===h)h="utf8";if(!yq.isEncoding(h))throw new TypeError('"encoding" must be a valid string encoding');return lU?yq.from(b,h):new yq(b,h)}return lU?yq.from(b):new yq(b)},Vm={};Object.defineProperty(Vm,"__esModule",{value:!0});Vm.collectConflicts=function(b){var d=AQ(b);b=h7(b.rev_tree);for(var h=[],a=0,e=b.length;a<e;a++){var n=b[a];n.rev===d||n.opts.deleted||h.push(n.rev)}return h};Vm.collectLeaves=h7;Vm.compactTree=
function(b){var d=[];IG(b.rev_tree,function(h,a,e,n,q){"available"!==q.status||h||(d.push(a+"-"+e),q.status="missing")});return d};Vm.isDeleted=function(b,d){d||(d=AQ(b));d=d.substring(d.indexOf("-")+1);b=b.rev_tree.map(cla);for(var h;h=b.pop();){if(h[0]===d)return!!h[1].deleted;b=b.concat(h[2])}};Vm.isLocalId=function(b){return/^_local/.test(b)};Vm.merge=function(b,d,h){b=l7(b,d);h=bla(b.tree,h);return{tree:h.tree,stemmedRevs:h.revs,conflicts:b.conflicts}};Vm.revExists=function(b,d){b=b.slice();
var h=d.split("-");d=parseInt(h[0],10);h=h[1];for(var a;a=b.pop();){if(a.pos===d&&a.ids[0]===h)return!0;for(var e=a.ids[2],n=0,q=e.length;n<q;n++)b.push({pos:a.pos+1,ids:e[n]})}return!1};Vm.rootToLeaf=i7;Vm.traverseRevTree=IG;Vm.winningRev=AQ;Vm.latest=function(b,d){for(var h=d.rev_tree.slice(),a;a=h.pop();){var e=a.pos,n=a.ids,q=n[0],r=n[1];n=n[2];var v=0===n.length;a=a.history?a.history.slice():[];a.push({id:q,pos:e,opts:r});if(v)for(r=0,v=a.length;r<v;r++){var y=a[r];if(y.pos+"-"+y.id===b)return e+
"-"+q}q=0;for(r=n.length;q<r;q++)h.push({pos:e+1,ids:n[q],history:a})}throw Error("Unable to resolve latest revision for id "+d.id+", rev "+b);};var Zk={};Object.defineProperty(Zk,"__esModule",{value:!0});var Vu=Bg,bB=Ol,p7=Qy,ln=Vf,Nm=Vm,dla=m7("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),ela=m7("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" "));
Zk.invalidIdError=Vu.invalidIdError;Zk.normalizeDdocFunctionName=Vu.normalizeDdocFunctionName;Zk.parseDdocFunctionName=Vu.parseDdocFunctionName;Zk.isDeleted=Nm.isDeleted;Zk.isLocalId=Nm.isLocalId;Zk.allDocsKeysQuery=function(b,d){var h={offset:d.skip};return Promise.all(d.keys.map(function(a){var e=Vu.assign({key:a,deleted:"ok"},d);["limit","skip","keys"].forEach(function(n){delete e[n]});return new Promise(function(n,q){b._allDocs(e,function(r,v){if(r)return q(r);d.update_seq&&void 0!==v.update_seq&&
(h.update_seq=v.update_seq);h.total_rows=v.total_rows;n(v.rows[0]||{key:a,error:"not_found"})})})})).then(function(a){h.rows=a;return h})};Zk.parseDoc=o7;Zk.preprocessAttachments=function(b,d,h){function a(){e++;b.length===e&&(n?h(n):h())}if(!b.length)return h();var e=0,n;b.forEach(function(q){function r(E){n=E;y++;y===v.length&&a()}var v=q.data&&q.data._attachments?Object.keys(q.data._attachments):[],y=0;if(!v.length)return a();for(var D in q.data._attachments)q.data._attachments.hasOwnProperty(D)&&
hla(q.data._attachments[D],d,r)})};Zk.processDocs=function(b,d,h,a,e,n,q,r,v){b=b||1E3;var y=r.new_edits,D=new jt.Map,E=0,I=d.length;d.forEach(function(K,P){if(K._id&&Nm.isLocalId(K._id))h[K._deleted?"_removeLocal":"_putLocal"](K,{ctx:e},function(aa,m){n[P]=aa||m;++E===I&&v&&v()});else{var N=K.metadata.id;D.has(N)?(I--,D.get(N).push([K,P])):D.set(N,[[K,P]])}});D.forEach(function(K,P){function N(){++m<K.length?aa():++E===I&&v&&v()}function aa(){var t=K[m],u=t[0];t=t[1];if(a.has(P))q7(b,a.get(P),u,
n,t,N,q,y);else{var B=Nm.merge([],u.metadata.rev_tree[0],b);u.metadata.rev_tree=B.tree;u.stemmedRevs=B.stemmedRevs||[];B=Nm.winningRev(u.metadata);var A=Nm.isDeleted(u.metadata,B);"was_delete"in r&&A?(n[t]=ln.createError(ln.MISSING_DOC,"deleted"),N()):y&&"missing"===u.metadata.rev_tree[0].ids[1].status?(u=ln.createError(ln.REV_CONFLICT),n[t]=u,N()):q(u,B,A,A,!1,A?0:1,t,N)}}var m=0;aa()})};Zk.updateDoc=q7;var IC={};Object.defineProperty(IC,"__esModule",{value:!0});var $ba=Gy&&"object"===typeof Gy&&
"default"in Gy?Gy["default"]:Gy;IC.safeJsonParse=function(b){try{return JSON.parse(b)}catch(d){return $ba.parse(b)}};IC.safeJsonStringify=function(b){try{return JSON.stringify(b)}catch(d){return $ba.stringify(b)}};var xva={},yva=cB(Xua),zva=cB(qva),pK=cB(eT),Ava=cB(tva),Bva=cB(wva),eB=Vm,dB=Ol,dp=jt;Wu.prototype.get=function(b,d,h){var a=s7(this,b),e=a.get(d);if(e)return Bg.nextTick(function(){h(null,e)});if(null===e)return Bg.nextTick(function(){h({name:"NotFoundError"})});b.get(d,function(n,q){if(n)return"NotFoundError"===
n.name&&a.set(d,null),h(n);a.set(d,q);h(null,q)})};Wu.prototype.batch=function(b){for(var d=0,h=b.length;d<h;d++){var a=b[d],e=s7(this,a.prefix);"put"===a.type?e.set(a.key,a.value):e.set(a.key,null)}this._batch=this._batch.concat(b)};Wu.prototype.execute=function(b,d){for(var h=new dp.Set,a=[],e=this._batch.length-1;0<=e;e--){var n=this._batch[e],q=n.prefix.prefix()[0]+"\u00ff"+n.key;h.has(q)||(h.add(q),a.push(n))}b.batch(a,d)};var JC=new dp.Map,Cva={encode:IC.safeJsonStringify,decode:IC.safeJsonParse,
buffer:!1,type:"cheap-json"},KC=new Bg.changesHandler,Dva=xva=function(b,d){function h(){N.docStore=A.sublevel("document-store",{valueEncoding:Cva});N.bySeqStore=A.sublevel("by-sequence",{valueEncoding:"json"});N.attachmentStore=A.sublevel("attach-store",{valueEncoding:"json"});N.binaryStore=A.sublevel("attach-binary-store",{valueEncoding:"binary"});N.localStore=A.sublevel("local-store",{valueEncoding:"json"});N.metaStore=A.sublevel("meta-store",{valueEncoding:"json"});"object"===typeof b.migrate?
b.migrate.doMigrationTwo(A,N,a):a()}function a(){N.metaStore.get("_local_last_update_seq",function(H,F){"undefined"===typeof A._updateSeq&&(A._updateSeq=F||0);N.metaStore.get("_local_doc_count",function(L,U){A._docCount=L?0:U;N.metaStore.get("_local_uuid",function(T,Y){P=T?Bg.uuid():Y;N.metaStore.put("_local_uuid",P,function(){Bg.nextTick(function(){d(null,K)})})})})})}function e(H){return A.isClosed()?H(Error("database is closed")):H(null,A._docCount)}function n(H,F){try{H.apply(null,F)}catch(L){F[F.length-
1](L)}}function q(){var H=A._queue.peekFront();"read"===H.type?r(H):v(H)}function r(H){var F=[H];H=1;for(var L=A._queue.get(H);"undefined"!==typeof L&&"read"===L.type;)F.push(L),H++,L=A._queue.get(H);var U=0;F.forEach(function(T){var Y=T.args,wa=Y[Y.length-1];Y[Y.length-1]=pK(function(Ga){wa.apply(null,Ga);++U===F.length&&Bg.nextTick(function(){F.forEach(function(){A._queue.shift()});A._queue.length&&q()})});n(T.fun,Y)})}function v(H){var F=H.args,L=F[F.length-1];F[F.length-1]=pK(function(U){L.apply(null,
U);Bg.nextTick(function(){A._queue.shift();A._queue.length&&q()})});n(H.fun,F)}function y(H){return pK(function(F){A._queue.push({fun:H,args:F,type:"write"});1===A._queue.length&&Bg.nextTick(q)})}function D(H){return pK(function(F){A._queue.push({fun:H,args:F,type:"read"});1===A._queue.length&&Bg.nextTick(q)})}function E(H){return("0000000000000000"+H).slice(-16)}function I(H,F){"destroy"in t?t.destroy(H,F):F(null)}b=Bg.clone(b);var K=this,P,N={},aa=b.revs_limit,m=b.name;"undefined"===typeof b.createIfMissing&&
(b.createIfMissing=!0);var t=b.db,u=Bg.functionName(t);if(JC.has(u))var B=JC.get(u);else B=new dp.Map,JC.set(u,B);if(B.has(m)){var A=B.get(m);h()}else B.set(m,zva(yva(t(m),b,function(H){if(H)return B.delete(m),d(H);A=B.get(m);A._docCount=-1;A._queue=new Ava;"object"===typeof b.migrate?b.migrate.doMigrationOne(m,A,h):h()})));K._remote=!1;K.type=function(){return"leveldb"};K._id=function(H){H(null,P)};K._info=function(H){var F={doc_count:A._docCount,update_seq:A._updateSeq,backend_adapter:Bg.functionName(t)};
return Bg.nextTick(function(){H(null,F)})};K._get=D(function(H,F,L){F=Bg.clone(F);N.docStore.get(H,function(U,T){if(U||!T)return L(Vf.createError(Vf.MISSING_DOC,"missing"));if(F.rev)var Y=F.latest?eB.latest(F.rev,T):F.rev;else if(Y=BQ(T),"deleted"in T?T.deleted:Zk.isDeleted(T,Y))return L(Vf.createError(Vf.MISSING_DOC,"deleted"));N.bySeqStore.get(E(T.rev_map[Y]),function(wa,Ga){if(!Ga)return L(Vf.createError(Vf.MISSING_DOC));if("_id"in Ga&&Ga._id!==T.id)return L(Error("wrong doc returned"));Ga._id=
T.id;if("_rev"in Ga){if(Ga._rev!==Y)return L(Error("wrong doc returned"))}else Ga._rev=Y;return L(null,{doc:Ga,metadata:T})})})});K._getAttachment=function(H,F,L,U,T){var Y=L.content_type;N.binaryStore.get(L.digest,function(wa,Ga){if(wa)return"NotFoundError"!==wa.name?T(wa):T(null,U.binary?dB.blob([""],{type:Y}):"");U.binary?T(null,r7(Ga,Y)):T(null,Ga.toString("base64"))})};K._bulkDocs=y(function(H,F,L){function U(ta,Pa){Bb.get(N.attachmentStore,ta,function(Za){Za?(Za=Vf.createError(Vf.MISSING_STUB,
"unknown stub attachment with digest "+ta),Pa(Za)):Pa()})}function T(ta){function Pa(){if(++Za===Da.length)return ta(Zb)}var Za=0,Zb;Da.forEach(function(Pb){if(Pb._id&&Zk.isLocalId(Pb._id))return Pa();Bb.get(N.docStore,Pb._id,function(Db,sc){Db?"NotFoundError"!==Db.name&&(Zb=Db):eb.set(Pb._id,sc);Pa()})})}function Y(ta,Pa){var Za=Promise.resolve();ta.forEach(function(Zb,Pb){Za=Za.then(function(){return new Promise(function(Db,sc){K._doCompactionNoLock(Pb,Zb,{ctx:Bb},function(wc){if(wc)return sc(wc);
Db()})})})});Za.then(function(){Pa()},Pa)}function wa(ta){var Pa=new dp.Map;eb.forEach(function(Za,Zb){Pa.set(Zb,eB.compactTree(Za))});Y(Pa,ta)}function Ga(){Y(Sa,function(ta){ta&&ia(ta);if(K.auto_compaction)return wa(ia);ia()})}function na(ta,Pa,Za,Zb,Pb,Db,sc,wc){function Lc(Vc){ld++;Wc||(Vc?(Wc=Vc,wc(Wc)):ld===Yc.length&&hd())}function Xc(Vc,cd,W,af){return function(zc){da(Vc,"md5-"+zc,cd,W,af)}}function Qc(Vc,cd,W){return function(af){Qy.binaryMd5(af,Xc(Vc,cd,af,W))}}function hd(){var Vc=ta.metadata.rev_map[ta.metadata.rev];
if(Vc)return wc();Vc=++sa;ta.metadata.rev_map[ta.metadata.rev]=ta.metadata.seq=Vc;Vc=[{key:E(Vc),value:ta.data,prefix:N.bySeqStore,type:"put"},{key:ta.metadata.id,value:ta.metadata,prefix:N.docStore,type:"put"}];Bb.batch(Vc);Va[sc]={ok:!0,id:ta.metadata.id,rev:ta.metadata.rev};eb.set(ta.metadata.id,ta.metadata);wc()}Z+=Db;var Wc=null,ld=0;ta.metadata.winningRev=Pa;ta.metadata.deleted=Za;ta.data._id=ta.metadata.id;ta.data._rev=ta.metadata.rev;Zb&&(ta.data._deleted=!0);ta.stemmedRevs.length&&Sa.set(ta.metadata.id,
ta.stemmedRevs);var Yc=ta.data._attachments?Object.keys(ta.data._attachments):[];for(Pa=0;Pa<Yc.length;Pa++)if(Za=Yc[Pa],Zb=ta.data._attachments[Za],Zb.stub)ea(ta.data._id,ta.data._rev,Zb.digest,Lc);else if("string"===typeof Zb.data){try{var od=dB.atob(Zb.data)}catch(Vc){L(Vf.createError(Vf.BAD_ARG,"Attachment is not a valid base64 string"));return}Qc(ta,Za,Lc)(od)}else ila(Zb.data,Qc(ta,Za,Lc));Yc.length||hd()}function ea(ta,Pa,Za,Zb){function Pb(){return new Promise(function(wc,Lc){Bb.get(N.attachmentStore,
Za,function(Xc,Qc){if(Xc&&"NotFoundError"!==Xc.name)return Lc(Xc);wc(Qc)})})}function Db(wc){var Lc=[ta,Pa].join("@"),Xc={};wc?wc.refs&&(Xc.refs=wc.refs,Xc.refs[Lc]=!0):(Xc.refs={},Xc.refs[Lc]=!0);return new Promise(function(Qc){Bb.batch([{type:"put",prefix:N.attachmentStore,key:Za,value:Xc}]);Qc(!wc)})}var sc=ma[Za]||Promise.resolve();ma[Za]=sc.then(function(){return Pb().then(Db).then(function(wc){Zb(null,wc)},Zb)})}function da(ta,Pa,Za,Zb,Pb){Za=ta.data._attachments[Za];delete Za.data;Za.digest=
Pa;Za.length=Zb.length;var Db=ta.metadata.id;ta=ta.metadata.rev;Za.revpos=parseInt(ta,10);ea(Db,ta,Pa,function(sc,wc){if(sc||0===Zb.length||!wc)return Pb(sc);Bb.batch([{type:"put",prefix:N.binaryStore,key:Pa,value:Bva(Zb,"binary")}]);Pb()})}function ia(ta){if(ta)return Bg.nextTick(function(){L(ta)});Bb.batch([{prefix:N.metaStore,type:"put",key:"_local_last_update_seq",value:sa},{prefix:N.metaStore,type:"put",key:"_local_doc_count",value:A._docCount+Z}]);Bb.execute(A,function(Pa){if(Pa)return L(Pa);
A._docCount+=Z;A._updateSeq=sa;KC.notify(m);Bg.nextTick(function(){L(null,Va)})})}var Oa=F.new_edits,Va=Array(H.docs.length),eb=new dp.Map,Sa=new dp.Map,Bb=new Wu,Z=0,sa=A._updateSeq,Da=H.docs,X=Da.map(function(ta){if(ta._id&&Zk.isLocalId(ta._id))return ta;ta=Zk.parseDoc(ta,Oa,K.__opts);ta.metadata&&!ta.metadata.rev_map&&(ta.metadata.rev_map={});return ta});H=X.filter(function(ta){return ta.error});if(H.length)return L(H[0]);var ma={};if(!X.length)return L(null,[]);(function(ta){var Pa=[];Da.forEach(function(Pb){Pb&&
Pb._attachments&&Object.keys(Pb._attachments).forEach(function(Db){Db=Pb._attachments[Db];Db.stub&&Pa.push(Db.digest)})});if(!Pa.length)return ta();var Za=0,Zb;Pa.forEach(function(Pb){U(Pb,function(Db){Db&&!Zb&&(Zb=Db);++Za===Pa.length&&ta(Zb)})})})(function(ta){if(ta)return L(ta);T(function(Pa){if(Pa)return L(Pa);Zk.processDocs(aa,X,K,eb,Bb,Va,na,F,Ga)})})});K._allDocs=function(H,F){return"keys"in H?Zk.allDocsKeysQuery(this,H):D(function(L,U){L=Bg.clone(L);e(function(T,Y){if(T)return U(T);T={};var wa=
L.skip||0;L.startkey&&(T.gte=L.startkey);L.endkey&&(T.lte=L.endkey);L.key&&(T.gte=T.lte=L.key);if(L.descending){T.reverse=!0;var Ga=T.lte;T.lte=T.gte;T.gte=Ga}if("number"===typeof L.limit)var na=L.limit;if(0===na||"gte"in T&&"lte"in T&&T.gte>T.lte)return T={total_rows:Y,offset:L.skip,rows:[]},L.update_seq&&(T.update_seq=A._updateSeq),U(null,T);var ea=[],da=N.docStore.readStream(T),ia=Zba.obj(function(Oa,Va,eb){function Sa(Da){var X={id:Bb.id,key:Bb.id,value:{rev:Z}};if(L.include_docs){X.doc=Da;X.doc._rev=
X.value.rev;L.conflicts&&(Da=eB.collectConflicts(Bb),Da.length&&(X.doc._conflicts=Da));for(var ma in X.doc._attachments)X.doc._attachments.hasOwnProperty(ma)&&(X.doc._attachments[ma].stub=!0)}if(!1===L.inclusive_end&&Bb.id===L.endkey)return eb();if(sa)if("ok"===L.deleted)X.value.deleted=!0,X.doc=null;else return eb();ea.push(X);eb()}var Bb=Oa.value,Z=BQ(Bb),sa="deleted"in Bb?Bb.deleted:Zk.isDeleted(Bb,Z);if(!sa){if(0<wa--){eb();return}if("number"===typeof na&&0>=na--){da.unpipe();da.destroy();eb();
return}}else if("ok"!==L.deleted){eb();return}L.include_docs?N.bySeqStore.get(E(Bb.rev_map[Z]),function(Da,X){Sa(X)}):Sa()},function(Oa){Promise.resolve().then(function(){if(L.include_docs&&L.attachments)return CQ(ea,N,L)}).then(function(){var Va={total_rows:Y,offset:L.skip,rows:ea};L.update_seq&&(Va.update_seq=A._updateSeq);U(null,Va)},U);Oa()}).on("unpipe",function(){ia.end()});da.on("error",U);da.pipe(ia)})})(H,F)};K._changes=function(H){function F(){H.done=!0;H.return_docs&&H.limit&&H.limit<T.length&&
(T.length=H.limit);Oa.unpipe(Va);Oa.destroy();H.continuous||H.cancelled||(H.include_docs&&H.attachments&&H.return_docs?CQ(T,N,H).then(function(){H.complete(null,{results:T,last_seq:Y})}):H.complete(null,{results:T,last_seq:Y}))}H=Bg.clone(H);if(H.continuous){var L=m+":"+Bg.uuid();KC.addListener(m,L,K,H);KC.notify(m);return{cancel:function(){KC.removeListener(m,L)}}}var U=H.descending,T=[],Y=H.since||0,wa=0,Ga={reverse:U};if("limit"in H&&0<H.limit)var na=H.limit;Ga.reverse||(Ga.start=E(H.since||0));
var ea=H.doc_ids&&new dp.Set(H.doc_ids),da=Bg.filterChange(H),ia=new dp.Map,Oa=N.bySeqStore.readStream(Ga),Va=Zba.obj(function(eb,Sa,Bb){function Z(X){function ma(Pa){var Za=H.processChange(Pa,X,H);Za.seq=X.seq;Pa=da(Za);if("object"===typeof Pa)return H.complete(Pa);if(Pa){wa++;if(H.attachments&&H.include_docs)CQ([Za],N,H).then(function(){H.onChange(Za)});else H.onChange(Za);H.return_docs&&T.push(Za)}Bb()}var ta=BQ(X);if(X.seq!==sa)return Bb();Y=sa;if(ta===Da._rev)return ma(Da);N.bySeqStore.get(E(X.rev_map[ta]),
function(Pa,Za){ma(Za)})}if(na&&wa>=na)return F(),Bb();if(H.cancelled||H.done)return Bb();var sa=parseInt(eb.key,10),Da=eb.value;if(sa===H.since&&!U||ea&&!ea.has(Da._id))return Bb();if(eb=ia.get(Da._id))return Z(eb);N.docStore.get(Da._id,function(X,ma){if(H.cancelled||H.done||A.isClosed()||Zk.isLocalId(ma.id))return Bb();ia.set(Da._id,ma);Z(ma)})},function(eb){if(H.cancelled)return eb();H.return_docs&&H.limit&&H.limit<T.length&&(T.length=H.limit);eb()}).on("unpipe",function(){Va.end();F()});Oa.pipe(Va);
return{cancel:function(){H.cancelled=!0;F()}}};K._close=function(H){if(A.isClosed())return H(Vf.createError(Vf.NOT_OPEN));A.close(function(F){F?H(F):(B.delete(m),H())})};K._getRevisionTree=function(H,F){N.docStore.get(H,function(L,U){L?F(Vf.createError(Vf.MISSING_DOC)):F(null,U.rev_tree)})};K._doCompaction=y(function(H,F,L,U){K._doCompactionNoLock(H,F,L,U)});K._doCompactionNoLock=function(H,F,L,U){"function"===typeof L&&(U=L,L={});if(!F.length)return U();var T=L.ctx||new Wu;T.get(N.docStore,H,function(Y,
wa){function Ga(eb){eb&&(Va=eb);if(++Oa===F.length){if(Va)return U(Va);ea()}}function na(eb){if(eb)return U(eb);T.batch(da);if(L.ctx)return U();T.execute(A,U)}function ea(){function eb(Da){Da&&(Z=Da);++Bb===Sa.length&&na(Z)}var Sa=Object.keys(ia);if(!Sa.length)return na();var Bb=0,Z,sa=new dp.Map;F.forEach(function(Da){sa.set(H+"@"+Da,!0)});Sa.forEach(function(Da){T.get(N.attachmentStore,Da,function(X,ma){if(X)return"NotFoundError"===X.name?eb():eb(X);X=Object.keys(ma.refs||{}).filter(function(Pa){return!sa.has(Pa)});
var ta={};X.forEach(function(Pa){ta[Pa]=!0});X.length?da.push({key:Da,type:"put",value:{refs:ta},prefix:N.attachmentStore}):da=da.concat([{key:Da,type:"del",prefix:N.attachmentStore},{key:Da,type:"del",prefix:N.binaryStore}]);eb()})})}if(Y)return U(Y);Y=F.map(function(eb){var Sa=wa.rev_map[eb];delete wa.rev_map[eb];return Sa});eB.traverseRevTree(wa.rev_tree,function(eb,Sa,Bb,Z,sa){-1!==F.indexOf(Sa+"-"+Bb)&&(sa.status="missing")});var da=[];da.push({key:wa.id,value:wa,type:"put",prefix:N.docStore});
var ia={},Oa=0,Va;Y.forEach(function(eb){da.push({key:E(eb),type:"del",prefix:N.bySeqStore});T.get(N.bySeqStore,E(eb),function(Sa,Bb){if(Sa)return"NotFoundError"===Sa.name?Ga():Ga(Sa);Object.keys(Bb._attachments||{}).forEach(function(Z){ia[Bb._attachments[Z].digest]=!0});Ga()})})})};K._getLocal=function(H,F){N.localStore.get(H,function(L,U){L?F(Vf.createError(Vf.MISSING_DOC)):F(null,U)})};K._putLocal=function(H,F,L){"function"===typeof F&&(L=F,F={});F.ctx?K._putLocalNoLock(H,F,L):K._putLocalWithLock(H,
F,L)};K._putLocalWithLock=y(function(H,F,L){K._putLocalNoLock(H,F,L)});K._putLocalNoLock=function(H,F,L){delete H._revisions;var U=H._rev,T=H._id,Y=F.ctx||new Wu;Y.get(N.localStore,T,function(wa,Ga){if(wa&&U||Ga&&Ga._rev!==U)return L(Vf.createError(Vf.REV_CONFLICT));H._rev=U?"0-"+(parseInt(U.split("-")[1],10)+1):"0-1";Y.batch([{type:"put",prefix:N.localStore,key:T,value:H}]);var na={ok:!0,id:H._id,rev:H._rev};if(F.ctx)return L(null,na);Y.execute(A,function(ea){if(ea)return L(ea);L(null,na)})})};K._removeLocal=
function(H,F,L){"function"===typeof F&&(L=F,F={});F.ctx?K._removeLocalNoLock(H,F,L):K._removeLocalWithLock(H,F,L)};K._removeLocalWithLock=y(function(H,F,L){K._removeLocalNoLock(H,F,L)});K._removeLocalNoLock=function(H,F,L){var U=F.ctx||new Wu;U.get(N.localStore,H._id,function(T,Y){if(T)return"NotFoundError"!==T.name?L(T):L(Vf.createError(Vf.MISSING_DOC));if(Y._rev!==H._rev)return L(Vf.createError(Vf.REV_CONFLICT));U.batch([{prefix:N.localStore,type:"del",key:H._id}]);var wa={ok:!0,id:H._id,rev:"0-0"};
if(F.ctx)return L(null,wa);U.execute(A,function(Ga){if(Ga)return L(Ga);L(null,wa)})})};K._destroy=function(H,F){H=Bg.functionName(t);if(JC.has(H))var L=JC.get(H);else return I(m,F);L.has(m)?(KC.removeAllListeners(m),L.get(m).close(function(){L.delete(m);I(m,F)})):I(m,F)}},Xu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Eva={},aca=sk;DQ.prototype.next=function(b){var d=this||Xu;if("function"!=typeof b)throw Error("next() requires a callback argument");if(d._ended)return b(Error("cannot call next() after end()"));
if(d._nexting)return b(Error("cannot call next() before previous next() has completed"));d._nexting=!0;if("function"==typeof d._next)return d._next(function(){d._nexting=!1;b.apply(null,arguments)});aca.nextTick(function(){d._nexting=!1;b()})};DQ.prototype.end=function(b){if("function"!=typeof b)throw Error("end() requires a callback argument");if((this||Xu)._ended)return b(Error("end() already called on iterator"));(this||Xu)._ended=!0;if("function"==typeof(this||Xu)._end)return this._end(b);aca.nextTick(b)};
var bca=Eva=DQ,Kj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Fva={},Gva=sk;Qs.prototype._serializeKey=function(b){return(this||Kj)._db._serializeKey(b)};Qs.prototype._serializeValue=function(b){return(this||Kj)._db._serializeValue(b)};Qs.prototype._checkWritten=function(){if((this||Kj)._written)throw Error("write() already called on this batch");};Qs.prototype.put=function(b,d){this._checkWritten();var h=(this||Kj)._db._checkKey(b,"key",(this||Kj)._db._isBuffer);
if(h)throw h;b=this._serializeKey(b);d=this._serializeValue(d);"function"==typeof(this||Kj)._put?this._put(b,d):(this||Kj)._operations.push({type:"put",key:b,value:d});return this||Kj};Qs.prototype.del=function(b){this._checkWritten();var d=(this||Kj)._db._checkKey(b,"key",(this||Kj)._db._isBuffer);if(d)throw d;b=this._serializeKey(b);"function"==typeof(this||Kj)._del?this._del(b):(this||Kj)._operations.push({type:"del",key:b});return this||Kj};Qs.prototype.clear=function(){this._checkWritten();(this||
Kj)._operations=[];"function"==typeof(this||Kj)._clear&&this._clear();return this||Kj};Qs.prototype.write=function(b,d){this._checkWritten();"function"==typeof b&&(d=b);if("function"!=typeof d)throw Error("write() requires a callback argument");"object"!=typeof b&&(b={});(this||Kj)._written=!0;if("function"==typeof(this||Kj)._write)return this._write(d);if("function"==typeof(this||Kj)._db._batch)return(this||Kj)._db._batch((this||Kj)._operations,b,d);Gva.nextTick(d)};var Hva=Fva=Qs,hk="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof self?self:global,cca={},Iva=ol.Buffer,st=sk;jm.prototype.open=function(b,d){var h=this||hk,a=(this||hk).status;"function"==typeof b&&(d=b);if("function"!=typeof d)throw Error("open() requires a callback argument");"object"!=typeof b&&(b={});b.createIfMissing=0!=b.createIfMissing;b.errorIfExists=!!b.errorIfExists;"function"==typeof(this||hk)._open?((this||hk).status="opening",this._open(b,function(e){if(e)return h.status=a,d(e);h.status="open";d()})):
((this||hk).status="open",st.nextTick(d))};jm.prototype.close=function(b){var d=this||hk,h=(this||hk).status;if("function"!=typeof b)throw Error("close() requires a callback argument");"function"==typeof(this||hk)._close?((this||hk).status="closing",this._close(function(a){if(a)return d.status=h,b(a);d.status="closed";b()})):((this||hk).status="closed",st.nextTick(b))};jm.prototype.get=function(b,d,h){var a;"function"==typeof d&&(h=d);if("function"!=typeof h)throw Error("get() requires a callback argument");
if(a=this._checkKey(b,"key"))return h(a);b=this._serializeKey(b);"object"!=typeof d&&(d={});d.asBuffer=0!=d.asBuffer;if("function"==typeof(this||hk)._get)return this._get(b,d,h);st.nextTick(function(){h(Error("NotFound"))})};jm.prototype.put=function(b,d,h,a){var e;"function"==typeof h&&(a=h);if("function"!=typeof a)throw Error("put() requires a callback argument");if(e=this._checkKey(b,"key"))return a(e);b=this._serializeKey(b);d=this._serializeValue(d);"object"!=typeof h&&(h={});if("function"==
typeof(this||hk)._put)return this._put(b,d,h,a);st.nextTick(a)};jm.prototype.del=function(b,d,h){var a;"function"==typeof d&&(h=d);if("function"!=typeof h)throw Error("del() requires a callback argument");if(a=this._checkKey(b,"key"))return h(a);b=this._serializeKey(b);"object"!=typeof d&&(d={});if("function"==typeof(this||hk)._del)return this._del(b,d,h);st.nextTick(h)};jm.prototype.batch=function(b,d,h){if(!arguments.length)return this._chainedBatch();"function"==typeof d&&(h=d);"function"==typeof b&&
(h=b);if("function"!=typeof h)throw Error("batch(array) requires a callback argument");if(!Array.isArray(b))return h(Error("batch(array) requires an array argument"));d&&"object"==typeof d||(d={});for(var a=0,e=b.length,n,q;a<e;a++)if(n=b[a],"object"==typeof n&&((q=this._checkKey(n.type,"type"))||(q=this._checkKey(n.key,"key"))))return h(q);if("function"==typeof(this||hk)._batch)return this._batch(b,d,h);st.nextTick(h)};jm.prototype.approximateSize=function(b,d,h){if(null==b||null==d||"function"==
typeof b||"function"==typeof d)throw Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof h)throw Error("approximateSize() requires a callback argument");b=this._serializeKey(b);d=this._serializeKey(d);if("function"==typeof(this||hk)._approximateSize)return this._approximateSize(b,d,h);st.nextTick(function(){h(null,0)})};jm.prototype._setupIteratorOptions=function(b){var d=this||hk;b=qt(b);"start end gt gte lt lte".split(" ").forEach(function(h){b[h]&&
d._isBuffer(b[h])&&0===b[h].length&&delete b[h]});b.reverse=!!b.reverse;b.keys=0!=b.keys;b.values=0!=b.values;b.limit="limit"in b?b.limit:-1;b.keyAsBuffer=0!=b.keyAsBuffer;b.valueAsBuffer=0!=b.valueAsBuffer;return b};jm.prototype.iterator=function(b){"object"!=typeof b&&(b={});b=this._setupIteratorOptions(b);return"function"==typeof(this||hk)._iterator?this._iterator(b):new bca(this||hk)};jm.prototype._chainedBatch=function(){return new Hva(this||hk)};jm.prototype._isBuffer=function(b){return Iva.isBuffer(b)};
jm.prototype._serializeKey=function(b){return this._isBuffer(b)?b:String(b)};jm.prototype._serializeValue=function(b){return null==b?"":this._isBuffer(b)||st.browser?b:String(b)};jm.prototype._checkKey=function(b,d){if(null===b||void 0===b)return Error(d+" cannot be `null` or `undefined`");if(this._isBuffer(b)&&0===b.length)return Error(d+" cannot be an empty Buffer");if(""===String(b))return Error(d+" cannot be an empty String")};cca=jm;var Jva=cca;var dca={};dca=function(b){return new $x(b||kla,
null)};var um=$x.prototype;Object.defineProperty(um,"keys",{get:function(){var b=[];this.forEach(function(d,h){b.push(d)});return b}});Object.defineProperty(um,"values",{get:function(){var b=[];this.forEach(function(d,h){b.push(h)});return b}});Object.defineProperty(um,"length",{get:function(){return this.root?this.root._count:0}});um.insert=function(b,d){for(var h=this._compare,a=this.root,e=[],n=[];a;){var q=h(b,a.key);e.push(a);n.push(q);a=0>=q?a.left:a.right}e.push(new mn(0,b,d,null,null,1));
for(b=e.length-2;0<=b;--b)a=e[b],e[b]=0>=n[b]?new mn(a._color,a.key,a.value,e[b+1],a.right,a._count+1):new mn(a._color,a.key,a.value,a.left,e[b+1],a._count+1);for(b=e.length-1;1<b;--b){n=e[b-1];a=e[b];if(1===n._color||1===a._color)break;d=e[b-2];if(d.left===n)if(n.left===a)if((q=d.right)&&0===q._color)n._color=1,d.right=Rs(1,q),d._color=0,--b;else{d._color=0;d.left=n.right;n._color=1;n.right=d;e[b-2]=n;e[b-1]=a;Lj(d);Lj(n);3<=b&&(b=e[b-3],b.left===d?b.left=n:b.right=n);break}else if((q=d.right)&&
0===q._color)n._color=1,d.right=Rs(1,q),d._color=0,--b;else{n.right=a.left;d._color=0;d.left=a.right;a._color=1;a.left=n;a.right=d;e[b-2]=a;e[b-1]=n;Lj(d);Lj(n);Lj(a);3<=b&&(b=e[b-3],b.left===d?b.left=a:b.right=a);break}else if(n.right===a)if((q=d.left)&&0===q._color)n._color=1,d.left=Rs(1,q),d._color=0,--b;else{d._color=0;d.right=n.left;n._color=1;n.left=d;e[b-2]=n;e[b-1]=a;Lj(d);Lj(n);3<=b&&(b=e[b-3],b.right===d?b.right=n:b.left=n);break}else if((q=d.left)&&0===q._color)n._color=1,d.left=Rs(1,q),
d._color=0,--b;else{n.left=a.right;d._color=0;d.right=a.left;a._color=1;a.right=n;a.left=d;e[b-2]=a;e[b-1]=n;Lj(d);Lj(n);Lj(a);3<=b&&(b=e[b-3],b.right===d?b.right=a:b.left=a);break}}e[0]._color=1;return new $x(h,e[0])};um.forEach=function(b,d,h){if(this.root)switch(arguments.length){case 1:return EQ(b,this.root);case 2:return FQ(d,this._compare,b,this.root);case 3:if(!(0<=this._compare(d,h)))return GQ(d,h,this._compare,b,this.root)}};Object.defineProperty(um,"begin",{get:function(){for(var b=[],d=
this.root;d;)b.push(d),d=d.left;return new nn(this,b)}});Object.defineProperty(um,"end",{get:function(){for(var b=[],d=this.root;d;)b.push(d),d=d.right;return new nn(this,b)}});um.at=function(b){if(0>b)return new nn(this,[]);for(var d=this.root,h=[];;){h.push(d);if(d.left){if(b<d.left._count){d=d.left;continue}b-=d.left._count}if(!b)return new nn(this,h);--b;if(d.right){if(b>=d.right._count)break;d=d.right}else break}return new nn(this,[])};um.ge=function(b){for(var d=this._compare,h=this.root,a=
[],e=0;h;){var n=d(b,h.key);a.push(h);0>=n&&(e=a.length);h=0>=n?h.left:h.right}a.length=e;return new nn(this,a)};um.gt=function(b){for(var d=this._compare,h=this.root,a=[],e=0;h;){var n=d(b,h.key);a.push(h);0>n&&(e=a.length);h=0>n?h.left:h.right}a.length=e;return new nn(this,a)};um.lt=function(b){for(var d=this._compare,h=this.root,a=[],e=0;h;){var n=d(b,h.key);a.push(h);0<n&&(e=a.length);h=0>=n?h.left:h.right}a.length=e;return new nn(this,a)};um.le=function(b){for(var d=this._compare,h=this.root,
a=[],e=0;h;){var n=d(b,h.key);a.push(h);0<=n&&(e=a.length);h=0>n?h.left:h.right}a.length=e;return new nn(this,a)};um.find=function(b){for(var d=this._compare,h=this.root,a=[];h;){var e=d(b,h.key);a.push(h);if(0===e)return new nn(this,a);h=0>=e?h.left:h.right}return new nn(this,[])};um.remove=function(b){return(b=this.find(b))?b.remove():this};um.get=function(b){for(var d=this._compare,h=this.root;h;){var a=d(b,h.key);if(0===a)return h.value;h=0>=a?h.left:h.right}};var yo=nn.prototype;Object.defineProperty(yo,
"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(yo,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});yo.clone=function(){return new nn(this.tree,this._stack.slice())};yo.remove=function(){var b=this._stack;if(0===b.length)return this.tree;var d=Array(b.length),h=b[b.length-1];d[d.length-1]=new mn(h._color,h.key,h.value,h.left,h.right,h._count);for(var a=b.length-2;0<=a;--a)h=b[a],d[a]=h.left===b[a+1]?new mn(h._color,
h.key,h.value,d[a+1],h.right,h._count):new mn(h._color,h.key,h.value,h.left,d[a+1],h._count);h=d[d.length-1];if(h.left&&h.right){b=d.length;for(h=h.left;h.right;)d.push(h),h=h.right;a=d[b-1];d.push(new mn(h._color,a.key,a.value,h.left,h.right,h._count));d[b-1].key=h.key;d[b-1].value=h.value;for(a=d.length-2;a>=b;--a)h=d[a],d[a]=new mn(h._color,h.key,h.value,h.left,d[a+1],h._count);d[b-1].left=d[b]}h=d[d.length-1];if(0===h._color)for(a=d[d.length-2],a.left===h?a.left=null:a.right===h&&(a.right=null),
d.pop(),a=0;a<d.length;++a)d[a]._count--;else if(h.left||h.right)for(h.left?t7(h,h.left):h.right&&t7(h,h.right),h._color=1,a=0;a<d.length-1;++a)d[a]._count--;else{if(1===d.length)return new $x(this.tree._compare,null);for(a=0;a<d.length;++a)d[a]._count--;a=d[d.length-2];for(var e,n,q,r=d.length-1;0<=r;--r){b=d[r];if(0===r){b._color=1;break}e=d[r-1];if(e.left===b){n=e.right;if(n.right&&0===n.right._color){n=e.right=aq(n);q=n.right=aq(n.right);e.right=n.left;n.left=e;n.right=q;n._color=e._color;b._color=
1;e._color=1;q._color=1;Lj(e);Lj(n);if(1<r){var v=d[r-2];v.left===e?v.left=n:v.right=n}d[r-1]=n;break}else if(n.left&&0===n.left._color){n=e.right=aq(n);q=n.left=aq(n.left);e.right=q.left;n.left=q.right;q.left=e;q.right=n;q._color=e._color;e._color=1;n._color=1;b._color=1;Lj(e);Lj(n);Lj(q);1<r&&(v=d[r-2],v.left===e?v.left=q:v.right=q);d[r-1]=q;break}if(1===n._color)if(0===e._color){e._color=1;e.right=Rs(0,n);break}else e.right=Rs(0,n);else n=aq(n),e.right=n.left,n.left=e,n._color=e._color,e._color=
0,Lj(e),Lj(n),1<r&&(v=d[r-2],v.left===e?v.left=n:v.right=n),d[r-1]=n,d[r]=e,r+1<d.length?d[r+1]=b:d.push(b),r+=2}else{n=e.left;if(n.left&&0===n.left._color){n=e.left=aq(n);q=n.left=aq(n.left);e.left=n.right;n.right=e;n.left=q;n._color=e._color;b._color=1;e._color=1;q._color=1;Lj(e);Lj(n);1<r&&(v=d[r-2],v.right===e?v.right=n:v.left=n);d[r-1]=n;break}else if(n.right&&0===n.right._color){n=e.left=aq(n);q=n.right=aq(n.right);e.left=q.right;n.right=q.left;q.right=e;q.left=n;q._color=e._color;e._color=
1;n._color=1;b._color=1;Lj(e);Lj(n);Lj(q);1<r&&(v=d[r-2],v.right===e?v.right=q:v.left=q);d[r-1]=q;break}if(1===n._color)if(0===e._color){e._color=1;e.left=Rs(0,n);break}else e.left=Rs(0,n);else n=aq(n),e.left=n.right,n.right=e,n._color=e._color,e._color=0,Lj(e),Lj(n),1<r&&(v=d[r-2],v.right===e?v.right=n:v.left=n),d[r-1]=n,d[r]=e,r+1<d.length?d[r+1]=b:d.push(b),r+=2}}a.left===h?a.left=null:a.right=null}return new $x(this.tree._compare,d[0])};Object.defineProperty(yo,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-
1].key},enumerable:!0});Object.defineProperty(yo,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(yo,"index",{get:function(){var b=0,d=this._stack;if(0===d.length)return(b=this.tree.root)?b._count:0;d[d.length-1].left&&(b=d[d.length-1].left._count);for(var h=d.length-2;0<=h;--h)d[h+1]===d[h].right&&(++b,d[h].left&&(b+=d[h].left._count));return b},enumerable:!0});yo.next=function(){var b=this._stack;if(0!==b.length){var d=
b[b.length-1];if(d.right)for(d=d.right;d;)b.push(d),d=d.left;else for(b.pop();0<b.length&&b[b.length-1].right===d;)d=b[b.length-1],b.pop()}};Object.defineProperty(yo,"hasNext",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].right)return!0;for(var d=b.length-1;0<d;--d)if(b[d-1].left===b[d])return!0;return!1}});yo.update=function(b){var d=this._stack;if(0===d.length)throw Error("Can't update empty node!");var h=Array(d.length),a=d[d.length-1];h[h.length-1]=new mn(a._color,
a.key,b,a.left,a.right,a._count);for(b=d.length-2;0<=b;--b)a=d[b],h[b]=a.left===d[b+1]?new mn(a._color,a.key,a.value,h[b+1],a.right,a._count):new mn(a._color,a.key,a.value,a.left,h[b+1],a._count);return new $x(this.tree._compare,h[0])};yo.prev=function(){var b=this._stack;if(0!==b.length){var d=b[b.length-1];if(d.left)for(d=d.left;d;)b.push(d),d=d.right;else for(b.pop();0<b.length&&b[b.length-1].left===d;)d=b[b.length-1],b.pop()}};Object.defineProperty(yo,"hasPrev",{get:function(){var b=this._stack;
if(0===b.length)return!1;if(b[b.length-1].left)return!0;for(var d=b.length-1;0<d;--d)if(b[d-1].right===b[d])return!0;return!1}});var Kva=dca,qK={},rK=ol,rr=rK.Buffer;rr.from&&rr.alloc&&rr.allocUnsafe&&rr.allocUnsafeSlow?qK=rK:(u7(rK,qK),qK.Buffer=ay);u7(rr,ay);ay.from=function(b,d,h){if("number"===typeof b)throw new TypeError("Argument must not be a number");return rr(b,d,h)};ay.alloc=function(b,d,h){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=rr(b);void 0!==d?"string"===
typeof h?b.fill(d,h):b.fill(d):b.fill(0);return b};ay.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return rr(b)};ay.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return rK.SlowBuffer(b)};var bf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Lva={},eca=Dj,w7=Jva,v7=bca,on=fk,pla=Kva,sK=qK.Buffer,by={};eca(JG,v7);JG.prototype._next=function(b){if((this||bf)._done++>=
(this||bf)._limit||!(this||bf)._tree.valid)return si(b);var d=(this||bf)._tree.key;var h=(this||bf)._tree.value;if(!this._test(d))return si(b);(this||bf).keyAsBuffer&&(d=sK.from(d));(this||bf).valueAsBuffer&&(h=sK.from(h));(this||bf)._tree[(this||bf)._incr]();si(function(){b(null,d,h)})};JG.prototype._test=function(){return!0};Om.clearGlobalStore=function(b){b?Object.keys(by).forEach(function(d){delete by[d]}):by={}};eca(Om,w7);Om.prototype._open=function(b,d){var h=this||bf;si(function(){d(null,
h)})};Om.prototype._put=function(b,d,h,a){if("undefined"===typeof d||null===d)d="";h=(this||bf)._store[(this||bf)._location].find(b);(this||bf)._store[(this||bf)._location]=h.valid?h.update(d):(this||bf)._store[(this||bf)._location].insert(b,d);si(a)};Om.prototype._get=function(b,d,h){var a=(this||bf)._store[(this||bf)._location].get(b);if("undefined"===typeof a)return si(function(){h(Error("NotFound"))});!1===d.asBuffer||this._isBuffer(a)||(a=sK.from(String(a)));si(function(){h(null,a)})};Om.prototype._del=
function(b,d,h){(this||bf)._store[(this||bf)._location]=(this||bf)._store[(this||bf)._location].remove(b);si(h)};Om.prototype._batch=function(b,d,h){d=-1;for(var a,e,n,q=b.length,r=(this||bf)._store[(this||bf)._location];++d<q;)b[d]&&(a=this._isBuffer(b[d].key)?b[d].key:String(b[d].key),n=r.find(a),"put"===b[d].type?(e=this._isBuffer(b[d].value)?b[d].value:String(b[d].value),r=n.valid?n.update(e):r.insert(a,e)):r=n.remove());(this||bf)._store[(this||bf)._location]=r;si(h)};Om.prototype._iterator=
function(b){return new JG(this||bf,b)};Om.prototype._isBuffer=function(b){return sK.isBuffer(b)};Om.destroy=function(b,d){b="$"+b;b in by&&delete by[b];si(d)};var Mva=Lva=Om.default=Om,Nva={},qla=Bg,sla=x7(Dva),rla=x7(Mva);HQ.valid=function(){return!0};HQ.use_prefix=!1;var Ova=Nva=function(b){b.adapter("memory",HQ,!0)},Lg=lively.FreezerRuntime.recorderFor("lively.storage/database.js");Lg.nodejsRequire=function(b){if(!Lg.isNode)throw Error("nodejsRequire can only be used in nodejs!");return"undefined"!==
typeof System?System._nodeRequire(b):Lg.require("module")._load(b)};Lg.nodejs_leveldbPath=function(b){if(b.startsWith("/"))return b;if(b.match(/[^\/]+:\/\//))return b.startsWith("file:")&&(b=b.replace(/^file:\/\//,"")),b;if(!Lg.isNode)throw Error("nodejs_leveldbPath called under non-nodejs environment");var d="undefined"!==typeof System&&System.baseURL.startsWith("file://")?System.baseURL.replace("file://",""):Lg.GLOBAL.process.cwd(),h=Lg.nodejsRequire("path").join,a=Lg.nodejsRequire("fs"),e=a.mkdirSync,
n=a.existsSync;a=a.readFileSync;if(b.includes("/"))return h(d,b);try{var q=a(h(d,"../package.json")),r=JSON.parse(q);if("lively.web"===r.name||"lively.next"===r.name){var v=h(d,"../.livelydbs");n(v)||e(v);return h(v,b)}}catch(y){}d=h(d,".livelydbs");n(d)||e(d);return h(d,b)};Lg.nodejs_attemptToLoadProperPouchDB=function(){if(!Lg.isNode)throw Error("nodejs_attemptToLoadProperPouchDB called under non-nodejs environment");if("undefined"!==typeof System){var b=System._nodeRequire("path").join,d=System.normalizeSync("lively.storage/index.js");
d=System.normalizeSync("pouchdb",d).replace(/file:\/\//,"");b=b(d,"../../lib/index.js");try{return Lg.PouchDB=System._nodeRequire(b),Lg.PouchDB.plugin(Lg.pouchdbAdapterMem),!0}catch(h){return!1}}try{return Lg.PouchDB=Lg.require("pouchdb"),Lg.PouchDB.plugin(Lg.pouchdbAdapterMem),!0}catch(h){return!1}};Lg._PouchDB=Vqa;Lg.pouchdbAdapterMem=Ova;Lg.Path=Eg;Lg.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Lg.isNode="undefined"!==typeof global&&
"undefined"!==typeof Lg.process;Lg.PouchDB=Lg._PouchDB;Lg.PouchDB.plugin&&Lg.pouchdbAdapterMem&&Lg.PouchDB.plugin(Lg.pouchdbAdapterMem);Lg.createPouchDB=Lg.isNode?function(){var b=!1,d=!1;return function(h,a){a=void 0===a?{}:a;b||(b=!0,d=Lg.nodejs_attemptToLoadProperPouchDB());a.adapter||(a.adapter=h.startsWith("http")?"http":d?"leveldb":"memory");"leveldb"==a.adapter&&(h=Lg.nodejs_leveldbPath(h));a=Object.assign({},a,{name:h});return new Lg.PouchDB(a)}}():function(b,d){return new Lg.PouchDB(Object.assign({name:b},
d))};var xg=function(b,d){d=void 0===d?{}:d;this.name=b;this.options=d;this._pouchdb=null};xg.findDB=function(b){return this.databases.get(b)};xg.ensureDB=function(b,d){var h=this.findDB(b);if(h)return h;h=new this(b,d);this.databases.set(b,h);b.endsWith("lively.storage-meta")||this.createMetaEntryForDB(b,d);return h};xg.knownDBs=function(b,d){return Lg.Database.ensureDB("lively.storage-meta").getAll().then(function(h){return h.map(function(a){return a._id})})};xg.createMetaEntryForDB=function(b,
d){var h=Lg.Database.ensureDB("lively.storage-meta");h.has(b).then(function(a){return!a&&h.set(b,{created:Date.now(),options:d})})};xg.knowsDB=function(b){var d=this,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(h=d.ensureDB(b),e.yield(h.docCount(),2)):3!=e.nextAddress?(a=e.yieldResult,0<a?e.return(!0):e.yield(h.destroy(),3)):e.return(!1)})};xg.prototype.close=function(){this._pouchdb&&(this._pouchdb.close(),delete this._pouchdb)};xg.prototype.isDestroyed=
function(){return!!this.pouchdb._destroyed};xg.prototype.destroy=function(b){this.constructor.databases.delete(this.name);return this.isDestroyed()?{ok:!0}:this.pouchdb.destroy(b)};xg.prototype.update=function(b,d,h,a){a=void 0===a?0:a;var e=this,n,q,r,v,y,D,E,I,K,P,N,aa,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(t){switch(t.nextAddress){case 1:return n=h=h||{},q=void 0===n.ensure?!0:n.ensure,r=void 0===n.retryOnConflict?!0:n.retryOnConflict,v=void 0===n.maxUpdateAttempts?10:n.maxUpdateAttempts,
y={latest:!0},D=e,E=D.pouchdb,t.setCatchFinallyBlocks(2),t.yield(E.get(b,y),4);case 4:I=t.yieldResult;t.leaveTryBlock(3);break;case 2:if(P=t.enterCatchBlock(),"not_found"!==P.name||!q)throw P;case 3:return t.yield(d(I),5);case 5:K=t.yieldResult;if(!K||"object"!==typeof K)return t.return(null);K._id!==b&&(K._id=b);I&&K._rev!==I._rev&&(K._rev=I._rev);t.setCatchFinallyBlocks(6);return t.yield(E.put(K),8);case 8:return N=t.yieldResult,aa=N.rev,t.return(Object.assign(K,{_rev:aa}));case 6:m=t.enterCatchBlock();
if("conflict"===m.name&&r&&a<v)return t.return(e.update(b,d,h,a+1));throw m;}})};xg.prototype.mixin=function(b,d,h){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(a.update(b,function(n){return Object.assign(n||{_id:b},d)},h))})};xg.prototype.set=function(b,d,h){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(a.update(b,function(n){return d},h))})};xg.prototype.get=function(b,d){d=void 0===d?{}:d;var h=this,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return e.setCatchFinallyBlocks(2),e.yield(h.pouchdb.get(b,d),4);if(2!=e.nextAddress)return e.return(e.yieldResult);a=e.enterCatchBlock();if("not_found"===a.name)return e.return(void 0);throw a;})};xg.prototype.has=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return 1==h.nextAddress?h.yield(d.get(b),2):h.return(!!h.yieldResult)})};xg.prototype.add=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d.pouchdb.post(b))})};
xg.prototype.docList=function(b){b=void 0===b?{}:b;var d=this,h,a,e,n,q,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){if(1==D.nextAddress)return D.yield(d.pouchdb.allDocs(b),2);h=D.yieldResult;a=h.rows;e=[];for(n=0;n<a.length;n++)q=a[n],r=q.id,v=q.value,y=v.rev,e.push({id:r,rev:y});return D.return(e)})};xg.prototype.docCount=function(){var b=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(b.pouchdb.allDocs(),2);d=h.yieldResult;
return h.return(d.rows.length)})};xg.prototype.revList=function(b){var d=this,h,a,e,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(d.pouchdb.get(b,{revs:!0}),2);h=q.yieldResult;a=h._revisions;e=a.start;n=a.ids;return q.return(n.map(function(r){return e--+"-"+r}))})};xg.prototype.getAllRevisions=function(b,d){d=void 0===d?{}:d;var h=this,a,e,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==v.nextAddress?(a=d,e=void 0===
a.skip?0:a.skip,n=void 0===a.limit?0:a.limit,v.yield(h.revList(b),2)):3!=v.nextAddress?(q=v.yieldResult,0<e&&(q=q.slice(e)),0<n&&(q=q.slice(0,n)),r=q.map(function(y){return{rev:y,id:b}}),v.yield(h.getDocuments(r),3)):v.return(v.yieldResult)})};xg.prototype.getAll=function(b){b=void 0===b?{}:b;var d=this,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(d.pouchdb.allDocs(Object.assign({},b,{include_docs:!0})),2);h=e.yieldResult;a=h.rows;return e.return(a.map(function(n){return n.doc}))})};
xg.prototype.setDocuments=function(b,d){var h=this,a,e,n,q,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){switch(D.nextAddress){case 1:return D.yield(h.pouchdb.bulkDocs(b,d),2);case 2:a=D.yieldResult,e=0;case 3:if(!(e<a.length)){D.jumpTo(5);break}n=b[e];q=a[e];if(q.ok||"conflict"!==q.name||n._rev){D.jumpTo(4);break}return D.yield(h.set(n._id,n),7);case 7:r=D.yieldResult,v=r._id,y=r._rev,a[e]={ok:!0,id:v,rev:y};case 4:e++;D.jumpTo(3);break;case 5:return D.return(a)}})};xg.prototype.updateDocuments=
function(b,d,h){var a=this,e,n,q,r,v,y,D,E,I,K,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:return N.yield(a.pouchdb.bulkDocs(b,h),2);case 2:e=N.yieldResult,n=[],q={},r=0;case 3:if(!(r<e.length)){if(!n.length){N.jumpTo(8);break}I=Object;K=I.assign;P=q;return N.yield(a.updateDocuments(n,d,h),9)}v=b[r];y=e[r];q[y._id||v._id]=y;if(y.ok||"conflict"!==y.name){N.jumpTo(4);break}return N.yield(a.get(v._id),7);case 7:if(D=N.yieldResult,E=d(D,v))E._id||(E._id=
v._id),E._rev||(E._rev=D._rev),n.push(E);case 4:r++;N.jumpTo(3);break;case 9:q=K.call(I,{},P,{},N.yieldResult);case 8:return N.return(q)}})};xg.prototype.getDocuments=function(b,d){d=void 0===d?{}:d;var h=this,a,e,n,q,r,v,y,D,E,I,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){if(1==P.nextAddress)return a=d,e=void 0===a.ignoreErrors?!0:a.ignoreErrors,P.yield(h.pouchdb.bulkGet({docs:b}),2);n=P.yieldResult;q=n.results;r=[];for(v=0;v<q.length;v++)for(y=q[v],D=y.docs,E=y.id,console.assert(1===
D.length,"getDocuments: expected only one doc for "+E),I=0;I<D.length;I++)K=D[I],e&&!K.ok||r.push(K.ok||K.error||K);return P.return(r)})};xg.prototype.query=function(b,d){return this.pouchdb.query(b,d)};xg.prototype.remove=function(b,d,h){var a=this,e,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return"undefined"!==typeof d?(e={_id:b,_rev:d},q.jumpTo(2)):q.yield(a.get(b),3);2!=q.nextAddress&&(e=q.yieldResult);n=e;return q.return(n?a.pouchdb.remove(n):void 0)})};
xg.prototype.removeAll=function(){var b=this,d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?(d=b.pouchdb,a.yield(d.allDocs(),2)):3!=a.nextAddress?(h=a.yieldResult,a.yield(Promise.all(h.rows.map(function(e){return d.remove(e.id,e.value.rev)})),3)):a.return(a.yieldResult)})};xg.prototype.replicateTo=function(b,d){b instanceof Lg.Database&&(b=b.pouchdb);return this.pouchdb.replicate.to(b,d)};xg.prototype.replicateFrom=function(b,d){b instanceof Lg.Database&&
(b=b.pouchdb);return this.pouchdb.replicate.from(b,d)};xg.prototype.sync=function(b,d){b instanceof Lg.Database&&(b=b.pouchdb);return this.pouchdb.sync(b,d)};xg.prototype.getConflicts=function(b){var d=this,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(d.pouchdb.query("conflict_index/conflict_index",Object.assign({reduce:!1,include_docs:!0,conflicts:!0},b)),2);h=e.yieldResult;a=h.rows;return e.return(a.map(function(n){var q={id:n.id,rev:n.doc._rev,
doc:n.doc};n.doc._conflicts&&(q.conflicts=n.doc._conflicts,delete n.doc._conflicts);return q}))})};xg.prototype.resolveConflicts=function(b,d){var h=this,a,e,n,q,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){switch(D.nextAddress){case 1:return D.yield(h.pouchdb.get(b,{conflicts:!0}),2);case 2:return a=D.yieldResult,e=a._conflicts.map(function(E){return{id:b,rev:E}}),D.yield(h.getDocuments(e),3);case 3:n=D.yieldResult,q=a,r=$jscomp.makeIterator(n),v=r.next();case 4:if(v.done){D.jumpTo(6);
break}y=v.value;return D.yield(d(q,y),7);case 7:return(q=D.yieldResult)?D.yield(h.set(b,q),8):D.return(null);case 8:return q=D.yieldResult,D.yield(h.pouchdb.remove(y),5);case 5:v=r.next();D.jumpTo(4);break;case 6:return D.return(q)}})};xg.prototype.diffWith=function(b){var d=this,h,a,e,n,q,r,v,y,D,E,I,K,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==N.nextAddress)return N.yield(b.docList(),2);if(3!=N.nextAddress)return h=N.yieldResult,N.yield(d.docList(),3);a=N.yieldResult;
e=h.reduce(function(aa,m){var t={};return Object.assign(aa,(t[m.id]=m.rev,t))},{});n=a.reduce(function(aa,m){var t={};return Object.assign(aa,(t[m.id]=m.rev,t))},{});q=[];r=[];v=[];for(y in e)D=e[y],(E=n[y])?D!=E&&v.push({right:{id:y,rev:D},left:{id:y,rev:E}}):r.push({id:y,rev:D});for(I in n)K=n[I],(P=e[I])||q.push({id:I,rev:K});return N.return({inLeft:q,inRight:r,changed:v})})};xg.loadDump=function(b,d){d=void 0===d?{}:d;var h=this,a,e,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==
v.nextAddress?(a=b,e=a.header,n=a.docs,q=d.name||e.name,r=h.ensureDB(q),v.yield(r.setDocuments(n,{new_edits:!1}),2)):v.return(r)})};xg.prototype.dump=function(b){b=void 0===b?{}:b;var d=this,h,a,e,n,q,r,v,y,D,E,I,K,P,N,aa,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(t){if(1==t.nextAddress)return h=b,a=h.filterFn,e=h.name,n=h.type,q=h.dbInfo,r=d,v=r.name,y=r.pouchdb,E=D=e||v,I=n||y.type(),K=(new Date).toJSON(),P=Object,N=P.assign,t.yield(y.info(),2);if(3!=t.nextAddress)return aa={name:E,
db_type:I,start_time:K,db_info:N.call(P,{},t.yieldResult,{db_name:D},q)},t.yield(d.getAll({attachments:!0}),3);m=t.yieldResult;"function"===typeof a&&(m=a(m,aa));return t.return({header:aa,docs:m})})};xg.prototype.backup=function(b){b=void 0===b?1:b;var d=this,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(h=d.name+"_backup_"+b,a=d.constructor.ensureDB(h),e.yield(d.replicateTo(a),2)):e.return(a)})};xg.prototype.migrate=function(b){var d=this,h,a,e,n,q,
r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(d.getAll(),2);if(3!=v.nextAddress){h=v.yieldResult;a=[];e=[];for(n=0;n<h.length;n++)q=h[n],(r=b(q,n))?(r.hasOwnProperty("_id")||(r._id=q._id),r.hasOwnProperty("_rev")&&delete r._rev,a.push(r)):e.push(q);return v.yield(d.setDocuments(a),3)}return v.return({migrated:a.length,unchanged:e.length})})};xg.prototype.createDesignDocs=function(b){return b.map(this.createDesignDoc)};xg.prototype.createDesignDoc=
function(b){var d=b.name,h=b.mapFn,a=b.reduceFn,e=b.filterFn;b={_id:"_design/"+d,version:void 0===b.version?1:b.version};e&&Lg.Path("filters."+d).set(b,e.toString(),!0);h&&Lg.Path("views."+d+".map").set(b,h.toString(),!0);a&&Lg.Path("views."+d+".reduce").set(b,a.toString(),!0);return b};xg.prototype.addDesignDocs=function(b,d){d=void 0===d?!1:d;var h=this,a,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(a=h.createDesignDocs(b),n.yield(h.updateDocuments(a,
function(q,r){return!q.hasOwnProperty("version")||r.hasOwnProperty("version")&&r.version>q.version?r:null}),2)):3!=n.nextAddress?(e=n.yieldResult,d?n.yield(Promise.all(a.map(function(q){return h.designDocDoQueryStale(q._id)})),3):n.jumpTo(3)):n.return(e)})};xg.prototype.addDesignDoc=function(b,d){var h=b.name,a=b.mapFn,e=b.reduceFn,n=b.version;d=void 0===d?!1:d;var q=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==y.nextAddress?(r=q.createDesignDoc({name:h,mapFn:a,
reduceFn:e,version:n}),y.yield(q.set(r._id,r),2)):3!=y.nextAddress?(v=y.yieldResult,d?y.yield(q.designDocDoQueryStale(r._id),3):y.jumpTo(3)):y.return(v)})};xg.prototype.removeDesignDoc=function(b){return this.remove("_design/"+b)};xg.prototype.designDocDoQueryStale=function(b){b=$jscomp.makeIterator(b.split("/"));b.next();b=b.next().value;return this.query(b,{stale:"update_after"})};$jscomp.global.Object.defineProperties(xg.prototype,{pouchdb:{configurable:!0,enumerable:!0,get:function(){return this._pouchdb?
this._pouchdb:this._pouchdb=Lg.createPouchDB(this.name,this.options)}}});$jscomp.global.Object.defineProperties(xg,{PouchDB:{configurable:!0,enumerable:!0,get:function(){return Lg.PouchDB},set:function(b){Lg.PouchDB=b}},databases:{configurable:!0,enumerable:!0,get:function(){return this._databases||(this._databases=new Map)}}});Lg.Database=xg;Lg.default=xg;var Yd=lively.FreezerRuntime.recorderFor("lively.storage/objectdb.js");Yd.isHash=function(b){return"string"===typeof b&&40===b.length&&b.match(Yd.hashRe)};
Yd.checkArg=function(b,d,h){if("undefined"===typeof d&&"string"===typeof h&&!h.includes("undefined"))throw Error("parameter "+b+" is undefined");if(null===d&&"string"===typeof h&&!h.includes("null"))throw Error("parameter "+b+" is null");if("string"===typeof h){var a=typeof d,e=d?d.constructor.name:"";if(!h.split("|").some(function(n){return a===n||e===n}))throw Error('parameter "'+b+'" expected to be of type '+h+" but is "+(e||a));}if("function"===typeof h&&(d=h(d))&&d.error)throw Error('check of parameter "'+
b+'" failed: '+d.error);};Yd.checkArgs=function(b,d,h){for(var a in d)Yd.checkArg(a,b[a],d[a]);if("function"===typeof h&&(d=h(b))&&d.error)throw Error(d.error);return b};Yd.Database=xg;Yd.resource=Uc;Yd.obj=xf;Yd.promise=bg;Yd.arr=cf;Yd.string=Ng;Yd.Path=Eg;Yd.parse=gk;Yd.categorizer=MB;Yd.sha1=function(){function b(){var n=e.createHash("sha1");return{update:function(q){return n.update(q)},digest:function(){return n.digest("hex")}}}function d(n){function q(t){y[N]|=(255&t)<<aa;aa?aa-=8:(N++,aa=24);
16===N&&r()}function r(){for(var t=16;80>t;t++){var u=y[t-3]^y[t-8]^y[t-14]^y[t-16];y[t]=u<<1|u>>>31}var B,A;u=D;var H=E,F=I,L=K,U=P;for(t=0;80>t;t++){20>t?(B=L^H&(F^L),A=1518500249):40>t?(B=H^F^L,A=1859775393):60>t?(B=H&F|L&(H|F),A=2400959708):(B=H^F^L,A=3395469782);var T=(u<<5|u>>>27)+B+U+A+(0|y[t]);U=L;L=F;F=H<<30|H>>>2;H=u;u=T}D=D+u|0;E=E+H|0;I=I+F|0;K=K+L|0;P=P+U|0;for(t=N=0;16>t;t++)y[t]=0}function v(t){for(var u="",B=28;0<=B;B-=4)u+=(t>>B&15).toString(16);return u}var y,D=1732584193,E=4023233417,
I=2562383102,K=271733878,P=3285377520,N=0,aa=24,m=0;return y=n?h:new Uint32Array(80),{update:function(t){if("string"===typeof t){var u=t.length;m+=8*u;for(var B=0;B<u;B++)q(t.charCodeAt(B))}else for(u=t.length,m+=8*u,B=0;B<u;B++)q(t[B])},digest:function(){q(128);(14<N||14===N&&24>aa)&&r();N=14;aa=24;q(0);q(0);q(0xffffffffff<m?m/1099511627776:0);q(4294967295<m?m/4294967296:0);for(var t=24;0<=t;t-=8)q(m>>t);return v(D)+v(E)+v(I)+v(K)+v(P)}}}var h,a,e;return"object"===typeof Yd.process&&"object"===typeof Yd.process.versions&&
Yd.process.versions.node&&"renderer"!==Yd.process.__atom_type?(e="undefined"!==typeof System?System._nodeRequire("crypto"):Yd.require("crypto"),a=b):(h=new Uint32Array(80),a=d),function(n){if(void 0===n)return a(!1);var q=a(!0);return q.update(n),q.digest()}}();Yd.hashRe=/^[0-9a-f]+$/i;Yd.objectDBs=Yd.objectDBs||new Map;var Wg=function(b,d){this.name=b;if(!d.snapshotLocation||!d.snapshotLocation.isResource)throw Error("ObjectDB needs snapshotLocation!");this.snapshotLocation=d.snapshotLocation;this.__versionDB=
this.__commitDB=null};Wg.dbList=function(){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(b=Yd.Database.ensureDB("internal__objectdb-meta"),d.yield(b.getAll(),2)):d.return(d.yieldResult.map(function(h){return h._id}))})};Wg.find=function(b){var d=this,h,a,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){if(h=Yd.objectDBs.get(b))return n.return(h);a=Yd.Database.ensureDB("internal__objectdb-meta");return n.yield(a.get(b),
2)}return(e=n.yieldResult)?n.return(d.named(b,e)):n.return()})};Wg.named=function(b,d){d=void 0===d?{}:d;var h=Yd.objectDBs.get(b);if(h)return h;if(!d||!d.snapshotLocation)throw Error("need snapshotLocation");if("string"===typeof d.snapshotLocation)try{d.snapshotLocation=Yd.resource(d.snapshotLocation)}catch(a){d.snapshotLocation=Yd.resource(System.baseURL).join(d.snapshotLocation)}h=new this(b,d);Yd.objectDBs.set(b,h);Yd.Database.ensureDB("internal__objectdb-meta").set(b,Object.assign({},d,{snapshotLocation:d.snapshotLocation.url})).catch(function(a){return console.error("error writing objectdb meta:",
a)});return h};Wg.prototype.destroy=function(){var b=this,d,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return(d=Yd.Database.findDB(b.name+"-commits"))?e.yield(d.destroy(),2):e.jumpTo(2);if(4!=e.nextAddress)return(h=Yd.Database.findDB(b.name+"-version-graph"))?e.yield(h.destroy(),4):e.jumpTo(4);Yd.objectDBs.delete(b.name);a=Yd.Database.ensureDB("internal__objectdb-meta");return e.yield(a.remove(b.name),0)})};Wg.prototype.snapshotResourceFor=function(b){var d=
b.content.slice(0,2);b=b.content.slice(2);return this.snapshotLocation.join(d+"/"+b+".json")};Wg.prototype.snapshotObject=function(b,d,h,a,e,n,q,r){var v=this,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return y=function(I){return I},E.yield(y(h),2);D=E.yieldResult;return E.return(v.commit(b,d,D,e,n,q,r))})};Wg.prototype.loadObject=function(b,d,h,a,e){var n=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(n.loadSnapshot(b,
d,a,e),2);q=v.yieldResult;r=function(y){return y};return v.return(r(q))})};Wg.prototype.has=function(b,d){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?a.yield(h.objectStats(b,d),2):a.return(!!a.yieldResult)})};Wg.prototype.objects=function(b){var d=this,h,a,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(d.objectStats(b),2);h=n.yieldResult;if(b)return n.return(Object.keys(h||{}));a={};for(e in h)a[e]=
Object.keys(h[e]);return n.return(a)})};Wg.prototype.objectStats=function(b,d){var h=this,a,e,n,q,r,v,y,D,E,I,K,P,N,aa,m,t,u,B,A,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:a={};if(e=h.__commitDB){F.jumpTo(2);break}return F.yield(h._commitDB(),3);case 3:e=F.yieldResult;case 2:return n=e,q={reduce:!0,group:!0},b&&d?q.key=b+"\x00"+d:b&&(q.startkey=b+"\x00",q.endkey=b+"\ufff0"),F.setCatchFinallyBlocks(4),F.yield(n.pouchdb.query("nameWithMaxMinTimestamp_index",
q),6);case 6:r=F.yieldResult;v=r.rows;y=$jscomp.makeIterator(v);for(D=y.next();!D.done;D=y.next())I=E=D.value,K=I.key,P=I.value,N=P.count,aa=P.max,m=P.min,t=$jscomp.makeIterator(K.split("\x00")),u=t.next().value,B=t.next().value,A=a[u]||(a[u]={}),A[B]={count:N,newest:aa,oldest:m};F.leaveTryBlock(5);break;case 4:return H=F.enterCatchBlock(),console.error(H),F.return(a);case 5:return b&&d?F.return((a[b]||{})[d]):b?F.return(a[b]):F.return(a)}})};Wg.prototype.getCommits=function(b,d,h,a){h=void 0===h?
"HEAD":h;a=void 0===a?Infinity:a;var e=this,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(e._log(b,d,h,a),2);case 2:n=y.yieldResult;if(!n.length)return y.return([]);if(q=e.__commitDB){y.jumpTo(3);break}return y.yield(e._commitDB(),4);case 4:q=y.yieldResult;case 3:return r=q,y.yield(r.getDocuments(n.map(function(D){return{id:D}})),5);case 5:return v=y.yieldResult,y.return(v)}})};Wg.prototype.getCommit=function(b){var d=this,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return(h=d.__commitDB)?e.jumpTo(2):e.yield(d._commitDB(),3);2!=e.nextAddress&&(h=e.yieldResult);a=h;return e.return(a.get(b))})};Wg.prototype.getCommitsWithIds=function(b){var d=this,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return b.length?(h=d.__commitDB)?e.jumpTo(2):e.yield(d._commitDB(),3):e.return([]);2!=e.nextAddress&&(h=e.yieldResult);a=h;return e.return(a.getDocuments(b.map(function(n){return{id:n}})))})};Wg.prototype.getLatestCommit=
function(b,d,h,a){h=void 0===h?"HEAD":h;a=void 0===a?!1:a;var e=this,n,q,r,v,y,D,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:return n=$jscomp,q=n.makeIterator,I.yield(e._log(b,d,h,1),2);case 2:r=q.call(n,I.yieldResult);v=r.next().value;if(!v)return I.return(null);if(y=e.__commitDB){I.jumpTo(3);break}return I.yield(e._commitDB(),4);case 4:y=I.yieldResult;case 3:return D=y,I.yield(D.get(v),5);case 5:return(E=I.yieldResult)&&E.deleted&&!a?I.return(null):
I.return(E)}})};Wg.prototype.commit=function(b,d,h,a,e,n,q){n=void 0===n?"HEAD":n;var r=this,v,y,D,E,I,K,P,N,aa,m,t,u,B,A,H,F,L,U,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Y){switch(Y.nextAddress){case 1:v=a;y=v.author;D=void 0===v.description?"no description":v.description;E=void 0===v.tags?[]:v.tags;I=v.timestamp;K=void 0===v.message?"":v.message;P=v.metadata;N=v.preview;if(!b)throw Error("object needs a type");if(!d)throw Error("object needs a name");if(!y)throw Error("Cannot commit "+
b+"/"+d+" without user");if(aa=r.__versionDB){Y.jumpTo(2);break}return Y.yield(r._versionDB(),3);case 3:aa=Y.yieldResult;case 2:return m=aa,Y.yield(r.versionGraph(b,d),4);case 4:B=(u=(t=Y.yieldResult)?t.refs[n]:null)?[u]:[];if(q){if(!t)throw Error('Trying to store "'+b+"/"+d+'" on top of expected version '+q+" but no version entry exists!");if(u!==q)throw Error('Trying to store "'+b+"/"+d+'" on top of expected version '+q+" but ref "+n+" is of version "+u+"!");}H=(A=Yd.isHash(h))?null:h?JSON.stringify(h):
null;F=r._createCommit(b,d,D,E,P,y,I,K,B,A?null:h,H,e||N,A?h:null);if(!h||A){Y.jumpTo(5);break}L=r.snapshotResourceFor(F);return Y.yield(L.parent().ensureExistance(),6);case 6:return L.canDealWithJSON?Y.yield(L.writeJson(h),5):Y.yield(L.write(H),5);case 5:if(U=r.__commitDB){Y.jumpTo(11);break}return Y.yield(r._commitDB(),12);case 12:U=Y.yieldResult;case 11:return T=U,Y.yield(T.set(F._id,F),13);case 13:return F=Y.yieldResult,t||(t={refs:{},history:{}}),t.refs[n]=F._id,t.history[F._id]=B,Y.yield(m.set(b+
"/"+d,t),14);case 14:return Y.return(F)}})};Wg.prototype.loadSnapshot=function(b,d,h,a){a=void 0===a?"HEAD":a;var e=this,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:if(h&&"string"!==typeof h){n=h;v.jumpTo(2);break}if(h){if(q=e.__commitDB){v.jumpTo(6);break}return v.yield(e._commitDB(),7)}return v.yield(e.getLatestCommit(b,d,a),5);case 5:n=v.yieldResult;v.jumpTo(2);break;case 7:q=v.yieldResult;case 6:return r=q,v.yield(r.get(h),8);case 8:n=v.yieldResult;
case 2:if(!n)throw Error("Cannot find commit to loadSnapshot for "+b+"/"+d+" (using "+h+")");return v.return(e.snapshotResourceFor(n).readJson())}})};Wg.prototype.revert=function(b,d,h,a){var e=this,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:if(n=e.__versionDB){v.jumpTo(2);break}return v.yield(e._versionDB(),3);case 3:n=v.yieldResult;case 2:return q=n,v.yield(q.get(b+"/"+d),4);case 4:return r=v.yieldResult,r.refs[h||"HEAD"]=a,delete r.deleted,
v.yield(q.set(b+"/"+d,r),5);case 5:return v.return(r)}})};Wg.prototype._createCommit=function(b,d,h,a,e,n,q,r,v,y,D,E,I){r=void 0===r?"":r;v=void 0===v?[]:v;!E&&y&&y.preview&&(E=y.preview);return this._createCommitFromSpec({name:d,type:b,timestamp:q||Date.now(),author:{name:n.name,email:n.email,realm:n.realm},tags:a,description:h,preview:E,message:r,content:I||D&&Yd.sha1(D)||null,deleted:!I&&!y,metadata:e,ancestors:v},!0)};Wg.prototype._createCommitFromSpec=function(b,d){d=void 0===d?!1:d;if(!b.name)throw Error("commit needs name");
if(!b.type)throw Error("commit needs type");if(!b.author)throw Error("commit needs author");if(!b.author.name)throw Error("commit needs author.name");b.timestamp||(b.timestamp=Date.now());b.tags||(b.tags=[]);!d&&b.content&&(d=Yd.isHash(b.content),d||(b.content=Yd.sha1(b.content)));d=Yd.obj.dissoc(b,["preview"]);d=Yd.sha1(JSON.stringify(d));return Object.assign(b,{_id:d})};Wg.prototype._commitDB=function(){var b=this,d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){if(b.__commitDB)return a.return(b.__commitDB);
d=b.name+"-commits";if(h=Yd.Database.findDB(d))return a.return(b.__commitDB=h);h=Yd.Database.ensureDB(d);return a.yield(h.addDesignDocs(b._commitdb_indexes),2)}return a.return(b.__commitDB=h)})};Wg.prototype.close=function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:if(!b.__commitDB){d.jumpTo(2);break}return d.yield(b.__commitDB.close(),3);case 3:b.__commitDB=null;case 2:if(!b.__versionDB){d.jumpTo(0);break}return d.yield(b.__versionDB.close(),
5);case 5:b.__versionDB=null,d.jumpToEnd()}})};Wg.prototype.versionGraph=function(b,d){var h=this,a,e,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:if(a=h.__versionDB){q.jumpTo(2);break}return q.yield(h._versionDB(),3);case 3:a=q.yieldResult;case 2:return e=a,q.yield(e.get(b+"/"+d),4);case 4:return n=q.yieldResult,q.return(!n||n.deleted||n._deleted?null:n)}})};Wg.prototype._log=function(b,d,h,a){a=void 0===a?Infinity:a;var e=this,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress)return y.yield(e.versionGraph(b,d),2);n=y.yieldResult;if(!n||n.deleted||n._deleted)return y.return([]);q=n.refs.HEAD;for(r=[];;){if(r.includes(q))throw Error("cyclic version graph???");r.push(q);v=$jscomp.makeIterator(n.history[q]||[]);q=v.next().value;if(!q||r.length>=a)break}return y.return(r)})};Wg.prototype._findTimestampedVersionsOfObjectNamed=function(b,d){d=void 0===d?{}:d;var h=this,a,e,n,q,r,v,y,D,E,I,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){switch(P.nextAddress){case 1:a=
d;e=void 0===a.include_docs?!0:a.include_docs;n=void 0===a.descending?!0:a.descending;q=void 0===a.startTime?"0".repeat(13):a.startTime;r=void 0===a.endTime?"9".repeat(13):a.endTime;v=b+"\x00"+(n?r:q);y=b+"\x00"+(n?q:r);if(D=h.__commitDB){P.jumpTo(2);break}return P.yield(h._commitDB(),3);case 3:D=P.yieldResult;case 2:return E=D,P.yield(E.pouchdb.query("nameAndTimestamp_index",Object.assign({},d,{descending:n,include_docs:e,startkey:v,endkey:y})),4);case 4:return I=P.yieldResult,K=I.rows,P.return(e?
K.map(function(N){return N.doc}):K.map(function(N){return N.id}))}})};Wg.prototype._versionDB=function(){var b=this,d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){if(b.__versionDB)return a.return(b.__versionDB);d=b.name+"-version-graph";if(h=Yd.Database.findDB(d))return a.return(b.__versionDB=h);h=Yd.Database.ensureDB(d);return a.yield(h.addDesignDocs(b._versiondb_indexes),2)}return a.return(b.__versionDB=h)})};Wg.prototype.exportToDir=function(b,d,h,a){h=
void 0===h?!1:h;a=void 0===a?!1:a;var e=this,n,q,r,v,y,D,E,I,K,P,N,aa,m,t,u,B,A,H,F,L,U,T,Y,wa,Ga,na,ea,da,ia,Oa,Va,eb,Sa,Bb,Z,sa,Da,X,ma,ta,Pa,Za,Zb,Pb,Db,sc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wc){switch(wc.nextAddress){case 1:"string"===typeof b&&(b=Yd.resource(b));if(e.__commitDB){wc.jumpTo(2);break}return wc.yield(e._commitDB(),3);case 3:case 2:if(n=e.__versionDB){wc.jumpTo(4);break}return wc.yield(e._versionDB(),5);case 5:n=wc.yieldResult;case 4:q=n;r=[];if(!d)return wc.yield(q.getAll(),
13);v=$jscomp.makeIterator(d);y=v.next();case 8:if(y.done){wc.jumpTo(7);break}E=D=y.value;I=E.name;K=E.type;P=b.join(K).join(I).asDirectory();return wc.yield(e.versionGraph(K,I),11);case 11:return N=wc.yieldResult,aa=N.refs,m=N.history,t=Object.keys(m),wc.yield(e.getCommitsWithIds(t),12);case 12:u=wc.yieldResult;r.push({refs:aa,history:m,currentExportDir:P,commits:u,name:I,type:K});y=v.next();wc.jumpTo(8);break;case 13:B=wc.yieldResult,A=$jscomp.makeIterator(B),H=A.next();case 14:if(H.done){wc.jumpTo(7);
break}L=F=H.value;U=L.refs;T=L.history;Y=L._id;if(Y.startsWith("_")){wc.jumpTo(15);break}return wc.yield(e.getCommit(U.HEAD||Object.keys(T)[0]),17);case 17:return wa=wc.yieldResult,Ga=wa.type,na=wa.name,ea=b.join(Ga).join(na).asDirectory(),da=Object.keys(T),wc.yield(e.getCommitsWithIds(da),18);case 18:ia=wc.yieldResult,r.push({refs:U,history:T,currentExportDir:ea,commits:ia,name:na,type:Ga});case 15:H=A.next();wc.jumpTo(14);break;case 7:Oa={},Va=$jscomp.makeIterator(r),eb=Va.next();case 19:if(eb.done){wc.jumpTo(0);
break}Bb=Sa=eb.value;Z=Bb.refs;sa=Bb.history;Oa.$jscomp$loop$prop$currentExportDir$1391$2783=Bb.currentExportDir;Da=Bb.commits;X=Bb.name;ma=Bb.type;a||(Da=Da.filter(function(Lc){return!Lc.deleted}));ta=h?Da.map(function(Lc){return function(Xc){if(Xc.deleted||Xc._deleted||!Xc.content)return null;delete Xc._rev;Xc=e.snapshotResourceFor(Xc);var Qc=Lc.$jscomp$loop$prop$currentExportDir$1391$2783.join(Xc.parent().name()+"/"+Xc.name());return{from:Xc,to:Qc}}}(Oa)).filter(Boolean):[];h||Da.forEach(function(Lc){delete Lc._rev});
return wc.yield(Oa.$jscomp$loop$prop$currentExportDir$1391$2783.ensureExistance(),22);case 22:return wc.yield(Oa.$jscomp$loop$prop$currentExportDir$1391$2783.join("index.json").writeJson({name:X,type:ma}),23);case 23:return wc.yield(Oa.$jscomp$loop$prop$currentExportDir$1391$2783.join("commits.json").writeJson(Da),24);case 24:return wc.yield(Oa.$jscomp$loop$prop$currentExportDir$1391$2783.join("history.json").writeJson({refs:Z,history:sa}),25);case 25:Pa=$jscomp.makeIterator(ta),Za=Pa.next();case 26:if(Za.done){Oa=
{$jscomp$loop$prop$currentExportDir$1391$2783:Oa.$jscomp$loop$prop$currentExportDir$1391$2783};eb=Va.next();wc.jumpTo(19);break}Pb=Zb=Za.value;Db=Pb.from;sc=Pb.to;return wc.yield(Db.copyTo(sc),27);case 27:Za=Pa.next(),wc.jumpTo(26)}})};Wg.prototype.exportToSpecs=function(b,d){d=void 0===d?!1:d;var h=this,a,e,n,q,r,v,y,D,E,I,K,P,N,aa,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(t){switch(t.nextAddress){case 1:a=[];if(b){t.jumpTo(2);break}b=[];return t.yield(h.objectStats(),3);case 3:for(n in e=
t.yieldResult||{},e)for(q in e[n])b.push({type:n,name:q});case 2:r=$jscomp.makeIterator(b),v=r.next();case 4:if(v.done){t.jumpTo(6);break}D=y=v.value;E=D.name;I=D.type;return t.yield(h.versionGraph(I,E),7);case 7:return K=t.yieldResult,P=K.refs,N=K.history,aa=Object.keys(N),t.yield(h.getCommitsWithIds(aa),8);case 8:m=t.yieldResult;d||(m=m.filter(function(u){return!u.deleted}));m.forEach(function(u){delete u._rev});a.push({type:I,name:E,commits:m,history:{refs:P,history:N}});v=r.next();t.jumpTo(4);
break;case 6:return t.return(a)}})};Wg.prototype.importFromDir=function(b,d,h){function a(K){var P,N,aa,m,t,u,B,A,H,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:return P=$jscomp,N=P.makeIterator,L.yield(Promise.all([K.join("index.json").readJson(),K.join("commits.json").readJson(),K.join("history.json").readJson()]),2);case 2:aa=N.call(P,L.yieldResult);m=aa.next().value;t=m.type;u=m.name;B=aa.next().value;A=aa.next().value;if(!h){H=[];L.jumpTo(3);break}return L.yield(K.dirList(1,
{exclude:function(U){return!U.isDirectory()}}),4);case 4:H=L.yieldResult;case 3:return F=H,L.return({dir:K,type:t,name:u,commits:B,history:A,snapshotDirs:F})}})}d=void 0===d?!1:d;h=void 0===h?!1:h;var e=this,n,q,r,v,y,D,E,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(K){switch(K.nextAddress){case 1:return K.yield(b.dirList(3,{exclude:function(P){return!P.isDirectory()&&"index.json"!==P.name()}}),2);case 2:n=K.yieldResult,n=n.filter(function(P){return"index.json"===P.name()}),q=n.map(function(P){return P.parent()}),
r=[],v=$jscomp.makeIterator(q),y=v.next();case 3:if(y.done){K.jumpTo(5);break}D=y.value;E=r;I=E.push;return K.yield(a(D),6);case 6:I.call(E,K.yieldResult);y=v.next();K.jumpTo(3);break;case 5:return K.return(e.importFromSpecs(r,d,h))}})};Wg.prototype.importFromSpecs=function(b,d,h){d=void 0===d?!1:d;h=void 0===h?!1:h;var a=this,e,n,q,r,v,y,D,E,I,K,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:if(d){N.jumpTo(2);break}if(e=a.__versionDB){N.jumpTo(3);break}return N.yield(a._versionDB(),
4);case 4:e=N.yieldResult;case 3:n=e,q=$jscomp.makeIterator(b),r=q.next();case 5:if(r.done){N.jumpTo(2);break}y=v=r.value;D=y.type;E=y.name;return N.yield(n.get(D+"/"+E),8);case 8:if(N.yieldResult)throw Error("Import failed: object "+D+"/"+E+" already exists and overwrite is not allowed");r=q.next();N.jumpTo(5);break;case 2:I=$jscomp.makeIterator(b),K=I.next();case 9:if(K.done){N.jumpTo(11);break}P=K.value;return N.yield(a.importFromSpec(P,!0,h),10);case 10:K=I.next();N.jumpTo(9);break;case 11:return N.return(b)}})};
Wg.prototype.importFromSpec=function(b,d,h){d=void 0===d?!1:d;h=void 0===h?!1:h;var a=this,e,n,q,r,v,y,D,E,I,K,P,N,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:if(e=a.__versionDB){m.jumpTo(2);break}return m.yield(a._versionDB(),3);case 3:e=m.yieldResult;case 2:n=e;if(q=a.__commitDB){m.jumpTo(4);break}return m.yield(a._commitDB(),5);case 5:q=m.yieldResult;case 4:r=q;v=a;y=v.snapshotLocation;D=b;E=D.type;I=D.name;K=D.commits;P=D.history;N=D.snapshotDirs;
if(!(aa=!d)){m.jumpTo(6);break}return m.yield(n.get(E+"/"+I),7);case 7:aa=m.yieldResult;case 6:if(aa)throw Error("Import failed: object "+E+"/"+I+" already exists and overwrite is not allowed");return m.yield(Promise.all([r.setDocuments(K),n.set(E+"/"+I,P)].concat($jscomp.arrayFromIterable(N&&h?N.map(function(t){return t.copyTo(y.join(t.name()).asDirectory())}):[]))),8);case 8:return m.return(b)}})};Wg.prototype.importFromResource=function(b,d,h,a,e){e=void 0===e?!1:e;var n=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(h.readJson(),
2);case 2:q=v.yieldResult;if(!(r=e)){v.jumpTo(3);break}return v.yield(n.has(b,d),4);case 4:r=v.yieldResult;case 3:if(!r){v.jumpTo(5);break}return v.yield(n.delete(b,d,!1),5);case 5:return v.return(n.commit(b,d,q,a))}})};Wg.prototype.replicateTo=function(b,d,h,a){return(new Yd.Synchronization(this,b,d,h,Object.assign({method:"replicateTo"},a))).start()};Wg.prototype.replicateFrom=function(b,d,h,a){return(new Yd.Synchronization(this,b,d,h,Object.assign({method:"replicateFrom"},a))).start()};Wg.prototype.sync=
function(b,d,h,a){return(new Yd.Synchronization(this,b,d,h,Object.assign({method:"sync"},a))).start()};Wg.prototype.getConflicts=function(b,d){function h(y,D){var E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){return 1==I.nextAddress?I.yield(y.getConflicts({include_docs:!0}),2):3!=I.nextAddress?(E=I.yieldResult,I.yield(Promise.all(E.map(function(K){var P,N,aa,m,t,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){if(1==B.nextAddress){P=K;N=P.id;aa=P.rev;m=P.conflicts;
t=P.doc;if(d&&d[D]&&!d[D][N])return B.return(null);if(!b)return B.jumpTo(2);u=m.map(function(A){return{id:N,rev:A}});return B.yield(y.getDocuments(u),3)}2!=B.nextAddress&&(m=B.yieldResult);b?Yd.obj.dissoc(t,["_conflicts"]):t=null;return B.return({id:N,rev:aa,conflicts:m,kind:D,doc:t})})})),3)):I.return(I.yieldResult.filter(Boolean))})}var a=this,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(e=a.__commitDB){y.jumpTo(2);break}return y.yield(a._commitDB(),
3);case 3:e=y.yieldResult;case 2:n=e;if(q=a.__versionDB){y.jumpTo(4);break}return y.yield(a._versionDB(),5);case 5:q=y.yieldResult;case 4:return r=q,y.yield(h(r,"versions"),6);case 6:return v=y.yieldResult,y.yield(h(n,"commits"),8);case 8:return y.yield(y.yieldResult,7);case 7:return y.return({versionConflicts:v,commitConflicts:y.yieldResult})}})};Wg.prototype.resolveConflict=function(b){var d=this,h,a,e,n,q,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){switch(D.nextAddress){case 1:h=
b;a=h.resolved;e=h.delete;n=h.kind;q=h.id;if("versions"===n){if(y=d.__versionDB){D.jumpTo(7);break}return D.yield(d._versionDB(),8)}if("commits"!==n)throw Error("Unknown conflict kind: "+n);if(v=d.__commitDB){D.jumpTo(5);break}return D.yield(d._commitDB(),6);case 6:v=D.yieldResult;case 5:r=v;D.jumpTo(3);break;case 8:y=D.yieldResult;case 7:r=y;case 3:return D.yield(r.set(q,a),9);case 9:return D.yield(Promise.all(e.map(function(E){return r.pouchdb.remove(q,E)})),0)}})};Wg.prototype.getDiff=function(b,
d){var h=this,a,e,n,q,r,v,y,D,E,I,K,P,N,aa,m,t,u,B,A,H,F,L,U,T,Y,wa,Ga,na,ea,da,ia,Oa,Va,eb,Sa,Bb,Z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sa){switch(sa.nextAddress){case 1:a=b;"string"===typeof b&&(a=Yd.Database.ensureDB(b+"-commits"),d=Yd.Database.ensureDB(b+"-version-graph"));if(e=h.__commitDB){sa.jumpTo(2);break}return sa.yield(h._commitDB(),3);case 3:e=sa.yieldResult;case 2:n=e;if(q=h.__versionDB){sa.jumpTo(4);break}return sa.yield(h._versionDB(),5);case 5:q=sa.yieldResult;
case 4:return r=q,sa.yield(n.diffWith(a),6);case 6:return v=sa.yieldResult,sa.yield(r.diffWith(d),7);case 7:return y=sa.yieldResult,sa.yield(Promise.all(y.inLeft.map(function(Da){var X;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ma){return 1==ma.nextAddress?(X=Da.id,ma.yield(r.get(Da.id),2)):ma.return({id:X,doc:ma.yieldResult})})})),8);case 8:return D=sa.yieldResult,E=Yd.arr,I=E.groupBy,sa.yield(d.getAll(),9);case 9:return K=I.call(E,sa.yieldResult,function(Da){return Da._id}),sa.yield(Promise.all(y.inRight.map(function(Da){return $jscomp.asyncExecutePromiseGeneratorProgram(function(X){return X.return({id:Da.id,
doc:K[Da.id]})})})),10);case 10:return P=sa.yieldResult,sa.yield(Promise.all(y.changed.map(function(Da){var X,ma,ta,Pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Za){return 1==Za.nextAddress?(X=Object,ma=X.assign,ta=Da.left,Za.yield(r.get(Da.left.id),2)):3!=Za.nextAddress?(Pa=Za.yieldResult,Za.yield(d.get(Da.right.id),3)):Za.return(ma.call(X,{},ta,{docA:Pa,docB:Za.yieldResult}))})})),11);case 11:return N=sa.yieldResult,aa=Yd.arr,m=aa.groupBy,sa.yield(a.getAll(),12);case 12:t=m.call(aa,
sa.yieldResult,function(Da){return Da._id}),u=[],B=[],A=[],H=$jscomp.makeIterator(v.inLeft),F=H.next();case 13:if(F.done){sa.jumpTo(15);break}L=F.value;U=u;T=U.push;return sa.yield(n.get(L.id),16);case 16:T.call(U,sa.yieldResult);F=H.next();sa.jumpTo(13);break;case 15:Y=$jscomp.makeIterator(v.inRight),F=Y.next();case 17:if(F.done){sa.jumpTo(19);break}wa=F.value;Ga=B;na=Ga.push;return sa.yield(t[wa.id],20);case 20:na.call(Ga,sa.yieldResult);F=Y.next();sa.jumpTo(17);break;case 19:ea=$jscomp.makeIterator(v.changed),
F=ea.next();case 21:if(F.done){sa.jumpTo(23);break}da=F.value;ia=A;Oa=ia.push;return sa.yield(n.get(da.left.id),24);case 24:return Oa.call(ia,sa.yieldResult),Va=A,eb=Va.push,sa.yield(a.get(da.right.id),25);case 25:eb.call(Va,sa.yieldResult);F=ea.next();sa.jumpTo(21);break;case 23:return Sa=u.map(function(Da){return Yd.obj.select(Da,["_id","name","type"])}),Bb=B.map(function(Da){return Yd.obj.select(Da,["_id","name","type"])}),Z=A.map(function(Da){return Yd.obj.select(Da,["_id","name","type"])}),sa.return({changed:N,
remote:P,local:D,changedCommitTypeAndNames:Z,remoteCommitTypeAndNames:Bb,localCommitTypeAndNames:Sa})}})};Wg.prototype.delete=function(b,d,h){h=void 0===h?!0:h;var a=this,e,n,q,r,v,y,D,E,I,K,P,N,aa,m,t,u,B,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){switch(H.nextAddress){case 1:e=[];n=[];if(q=a.__commitDB){H.jumpTo(2);break}return H.yield(a._commitDB(),3);case 3:q=H.yieldResult;case 2:return r=q,v={include_docs:!0,startkey:b+"\x00"+d+"\x00",endkey:b+"\x00"+d+"\uffff"},H.yield(r.query("nameAndTimestamp_index",
v),4);case 4:y=H.yieldResult;D=y.rows;E=$jscomp.makeIterator(D);for(I=E.next();!I.done;I=E.next())P=K=I.value,N=P.doc,N.deleted||N._deleted||!N.content||e.push(a.snapshotResourceFor(N)),n.push(Object.assign({},N,{_deleted:!0}));if(aa=a.__versionDB){H.jumpTo(5);break}return H.yield(a._versionDB(),6);case 6:aa=H.yieldResult;case 5:return m=aa,H.yield(m.get(b+"/"+d),7);case 7:t=H.yieldResult;u=t._id;B=t._rev;A={_id:u,_rev:B,_deleted:!0};if(h){H.jumpTo(8);break}return H.yield(r.setDocuments(n),9);case 9:return H.yield(m.setDocuments([A]),
10);case 10:Promise.all(e.map(function(F){return F.remove()}));case 8:return H.return({commits:n,history:A,resources:e})}})};Wg.prototype.deleteCommit=function(b,d,h){d=void 0===d?!0:d;h=void 0===h?"HEAD":h;var a=this,e,n,q,r,v,y,D,E,I,K,P,N,aa,m,t;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:if(b&&"string"!==typeof b){e=b;u.jumpTo(2);break}if(!b){u.jumpTo(2);break}if(n=a.__commitDB){u.jumpTo(4);break}return u.yield(a._commitDB(),5);case 5:n=u.yieldResult;
case 4:return q=n,u.yield(q.get(b),6);case 6:e=u.yieldResult;case 2:if(!e)throw Error("commit needed!");if(r=a.__versionDB){u.jumpTo(7);break}return u.yield(a._versionDB(),8);case 8:r=u.yieldResult;case 7:v=r;if(y=a.__commitDB){u.jumpTo(9);break}return u.yield(a._commitDB(),10);case 10:y=u.yieldResult;case 9:return D=y,E=e,I=E.name,K=E.type,P=e.deleted||e._deleted||!e.content?[]:[a.snapshotResourceFor(e)],N=[Object.assign({},e,{_deleted:!0})],u.yield(v.get(K+"/"+I),11);case 11:aa=u.yieldResult;if(!aa)throw Error("No history for "+
K+"/"+I+"@"+e._id);if(!aa.refs[h])throw Error("Cannot delete commit "+K+"/"+I+"@"+e._id+" b/c it is not where ref "+h+" is pointing!");m=$jscomp.makeIterator(aa.history[e._id]||[]);t=m.next().value;if(!t&&1>=Object.keys(aa.history).length)aa._deleted=!0;else if(t)delete aa.history[e._id],aa.refs[h]=t;else throw Error("Cannot delete commit "+K+"/"+I+"@"+e._id+" b/c it has no ancestor but there are still other commits!");if(d){u.jumpTo(12);break}return u.yield(v.set(K+"/"+I,aa),13);case 13:return u.yield(D.setDocuments(N),
14);case 14:return u.yield(Promise.all(P.map(function(B){return B.remove()})),12);case 12:return u.return({commits:N,history:aa,resources:P})}})};$jscomp.global.Object.defineProperties(Wg.prototype,{_commitdb_indexes:{configurable:!0,enumerable:!0,get:function(){return[{name:"name_index",version:4,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name); }'},{name:"nameAndTimestamp_index",version:3,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name + "\x00" + doc.timestamp + "\x00" + doc._id); }'},
{name:"nameWithMaxMinTimestamp_index",version:3,mapFn:'function(doc) { emit(doc.type + "\x00" + doc.name, doc.timestamp); }',reduceFn:"_stats"},{name:"nameTypeFilter",version:9,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames)\n            return !!req.query.onlyTypesAndNames[doc.type + "/" + doc.name];\n          return true;\n        }'},
{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}},_versiondb_indexes:{configurable:!0,enumerable:!0,get:function(){return[{name:"nameTypeFilter",version:3,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames) return !!req.query.onlyTypesAndNames[doc._id];\n          return true;\n        }'},
{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}}});Yd.ObjectDB=Wg;var Lr=function(b,d,h,a,e){e=void 0===e?{}:e;this.options=Object.assign({debug:!1,live:!1,method:"sync",replicationFilter:void 0},e);this.state="not started";this.method="";this.fromObjectDB=b;this.remoteCommitDB=d;this.remoteVersionDB=h;this.remoteLocation=a;this.deferred=Yd.promise.deferred();this.conflicts=[];this.changes=[];this.errors=[]};Lr.prototype.whenPaused=function(){var b=
this;return Promise.resolve().then(function(){return Yd.promise.waitFor(function(){return b.isPaused||b.isComplete})}).then(function(){return b})};Lr.prototype.waitForIt=function(){return this.deferred.promise};Lr.prototype.start=function(){this.isSynchonizing||this._startReplicationAndCopy().catch(function(b){return console.error("Error starting synchronization: ",b)});return this};Lr.prototype._startReplicationAndCopy=function(){function b(eb){return"paused"===Va&&"paused"===Oa&&0>=ia.copyCalls&&
0>=ia.copyCallsWaiting?eb.state="paused":"complete"===Va&&"complete"===Oa&&ia.isComplete()?eb.state="complete":eb.state="running"}function d(eb,Sa){if(Sa.length||"complete"===Oa&&"complete"===Va&&ia.isComplete()){L.cancel();if(Sa.length){eb.state="complete";eb.errors=Sa;ea.cancel();da.cancel();var Bb=Error("Synchronization error:\n  "+Sa.join("\n  "));Bb.errors=Sa;console.log(eb+" errored")}else console.log(eb+" completed");Bb?eb.deferred.reject(Bb):eb.deferred.resolve(eb)}}function h(eb){if(!eb.content)return null;
var Sa=eb.content.slice(0,2);eb=eb.content.slice(2);return Sa+"/"+eb+".json"}var a=this,e,n,q,r,v,y,D,E,I,K,P,N,aa,m,t,u,B,A,H,F,L,U,T,Y,wa,Ga,na,ea,da,ia,Oa,Va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){switch(eb.nextAddress){case 1:e=a;n=e.fromObjectDB;q=e.remoteCommitDB;r=e.remoteVersionDB;v=e.remoteLocation;y=e.options;D=y.debug;E=void 0===y.live?!1:y.live;I=void 0===y.retry?!1:y.retry;K=y.method;P=y.replicationFilter;N=void 0===y.pushDesignDocToRemote?!1:y.pushDesignDocToRemote;
if(aa=n.__versionDB){eb.jumpTo(2);break}return eb.yield(n._versionDB(),3);case 3:aa=eb.yieldResult;case 2:m=aa;if(t=n.__commitDB){eb.jumpTo(4);break}return eb.yield(n._commitDB(),5);case 5:t=eb.yieldResult;case 4:u=t;B=n;A=B._commitdb_indexes;H=B._versiondb_indexes;F=B.snapshotLocation;a.method=K;T=A.find(function(Sa){return"nameTypeFilter"===Sa.name});Y=H.find(function(Sa){return"nameTypeFilter"===Sa.name});if(!N){eb.jumpTo(6);break}console.log("adding commitNameTypeFilter");return eb.yield(q.addDesignDoc(T),
7);case 7:return console.log("adding versionNameTypeFilter"),eb.yield(r.addDesignDoc(Y),6);case 6:return wa={live:E,retry:I},Ga=Object.assign({},wa),na=Object.assign({},wa),P&&(Ga.filter=eval("("+T.filterFn+")"),Ga.query_params=P,na.filter=eval("("+Y.filterFn+")"),na.query_params=P),ea=u[K](q,Ga),da=m[K](r,na),ia={copyCalls:0,copyCallsWaiting:0,nFilesToCopy:0,nFilesCopied:0,stopped:!1,isComplete:function(){return this.stopped||0>=this.copyCalls&&0>=this.copyCallsWaiting}},Va=Oa="not started",a.versionReplication=
da,a.commitReplication=ea,a.snapshotReplication=ia,U=q.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),L=r.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),U.on("change",function(Sa){var Bb=Sa.id,Z=Sa.changes;Sa=Sa.doc._conflicts;D&&console.log("commit changes "+Bb+":",Z,Sa);Sa&&(console.log("commit conflict "+Bb+":",Z,Sa),a.conflicts.push({db:"commits",id:Bb,changes:Z,conflicts:Sa}))}),L.on("change",function(Sa){var Bb=Sa.id,Z=Sa.changes;Sa=Sa.doc._conflicts;D&&console.log("version changes "+
Bb+":",Z,Sa);Sa&&(console.log("version conflict "+Bb+":",Z,Sa),a.conflicts.push({db:"versions",id:Bb,changes:Z,conflicts:Sa}))}),ea.on("change",function(Sa){var Bb,Z,sa,Da,X,ma,ta,Pa,Za,Zb,Pb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Db){switch(Db.nextAddress){case 1:"replicateTo"===K?Sa={direction:"push",change:Sa}:"replicateFrom"===K&&(Sa={direction:"pull",change:Sa});Bb=Sa;Z=Bb.direction;sa=Bb.change;Da=sa.docs;console.log(a+" "+("push"===Z?"send":"received")+" "+Da.length+" commits");
Db.setCatchFinallyBlocks(2,3);ma=[];ta=$jscomp.makeIterator(Da);for(Pa=ta.next();!Pa.done;Pa=ta.next())Za=Pa.value,Za._id.startsWith("_")||(a.changes.push({direction:Z,kind:"commits",id:Za._id,type:Za.type,name:Za.name}),(Zb=h(Za))&&ma.push(Zb));ia.nFilesToCopy+=ma.length;if(!(0<ia.copyCalls)){Db.jumpTo(5);break}ia.copyCallsWaiting++;return Db.yield(Yd.promise.waitFor(function(){return 0>=ia.copyCalls}),6);case 6:ia.copyCallsWaiting--;case 5:return ia.copyCalls++,b(a),console.log(a+" copying "+ma.length+
" snapshots..."),Db.yield(Yd.promise.parallel(ma.map(function(sc){return function(){var wc=("push"===Z?F:v).join(sc),Lc=("push"===Z?v:F).join(sc);return ia.stopped?(console.warn(a+" Stopping copying resources b/c synchronization ended ("+ia.copyCalls+", "+wc.url+" => "+Lc.url+")"),Promise.resolve()):Lc.exists().then(function(Xc){function Qc(hd){hd=void 0===hd?0:hd;return wc.copyTo(Lc).catch(function(Wc){if(5<=hd)throw Wc;return Qc(hd+1)})}return Xc?(D&&console.log("Skip copying to "+Lc.url+", already exist"),
Promise.resolve()):wc.exists().then(function(hd){if(!hd)return console.warn("Skip copying "+wc.url+", does not exist"),Promise.resolve();D&&console.log(a+" Copying "+wc.url+" => "+Lc.url);return Qc(0).then(function(Wc){ia.nFilesCopied++;ia.stopped||0!==ia.nFilesCopied%10||console.log(a+" copied "+ia.nFilesCopied+" of "+ia.nFilesToCopy+" snapshots");return Wc})})})}}),5),7);case 7:console.log(a+" sending files done");case 3:Db.enterFinallyBlock();ia.copyCalls--;b(a);d(a,X?[X]:[]);Db.leaveFinallyBlock(0);
break;case 2:throw Pb=Db.enterCatchBlock(),console.error("error in commitReplication onChange",Pb),X=Pb,Pb;}})}).on("paused",function(){Oa="paused";b(a);D&&console.log(a+" commit replication paused")}).on("active",function(){Oa="active";b(a);D&&console.log(a+" commit replication active")}).on("error",function(Sa){Oa="complete";b(a);console.error(a+" commit replication error",Sa);d(a,[Sa])}).on("complete",function(Sa){Oa="complete";b(a);Sa="sync"===K?Sa.push.errors.concat(Sa.pull.errors):Sa.errors;
d(a,Sa)}),da.on("change",function(Sa){"replicateTo"===K?Sa={direction:"push",change:Sa}:"replicateFrom"===K&&(Sa={direction:"pull",change:Sa});var Bb=Sa.direction;Sa=Sa.change.docs;D&&console.log(a+" "+("push"===Bb?"send":"received")+" "+Sa.length+" histories");Sa.forEach(function(Z){Z._id.startsWith("_")||a.changes.push({direction:Bb,kind:"versions",id:Z._id})})}).on("paused",function(){Va="paused";b(a);D&&console.log(a+" version replication paused")}).on("active",function(Sa){Va="active";b(a);D&&
console.log(a+" version replication active",Sa)}).on("error",function(Sa){Va="complete";b(a);console.error(a+" version replication error",Sa);d(a,[Sa])}).on("complete",function(Sa){Va="complete";b(a);Sa="sync"===K?Sa.push.errors.concat(Sa.pull.errors):Sa.errors;d(a,Sa)}),a.state="running",eb.return(a)}})};Lr.prototype.safeStop=function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?"not started"!==b.state&&b.isSynchonizing?d.yield(b.whenPaused(),
2):d.return(b):d.return(b.stop())})};Lr.prototype.stop=function(){if("not started"===this.state||!this.isSynchonizing)return this;this.commitReplication.cancel();this.versionReplication.cancel();this.snapshotReplication.stopped=!0;return this};Lr.prototype.toString=function(){var b=this.method;return"Synchronization("+this.state+": "+this.fromObjectDB.name+" "+("sync"===b?"<=>":"replicateTo"===b?"=>":"replicateFrom"===b?"<=":"??")+")"};$jscomp.global.Object.defineProperties(Lr.prototype,{isSynchonizing:{configurable:!0,
enumerable:!0,get:function(){return this.isPaused||this.isRunning}},isComplete:{configurable:!0,enumerable:!0,get:function(){return"complete"===this.state}},isRunning:{configurable:!0,enumerable:!0,get:function(){return"running"===this.state}},isPaused:{configurable:!0,enumerable:!0,get:function(){return"paused"===this.state}},changesByTypeAndName:{configurable:!0,enumerable:!0,get:function(){var b={push:{},pull:{}};this.changes.forEach(function(d){var h=d.direction,a=d.id,e=d.kind;if("_"!==a[0]){if("versions"===
e)var n=b[h][a]||(b[h][a]=[]);else"commits"===e&&(a=d.type+"/"+d.name,n=b[h][a]||(b[h][a]=[]));n.push(d)}});return b}}});Yd.Synchronization=Lr;var Lv={describe:function(b){function d(r,v){r=r.find(function(I){return I.name===v}).node.value.body;var y=r.body||[],D=(r.comments||[]).find(function(I){return I.end<y[0].start});r={name:v,parameters:[],sideEffect:!1,returns:null,description:""};if(D&&D.text.trim()){D=Yd.string.changeIndent(D.text," ",0).split("\n");D=$jscomp.makeIterator(D);for(var E=D.next();!E.done;E=
D.next()){E=E.value;if(E.startsWith("ignore-in-doc")){r.description="";break}E.startsWith("side effect:")?r.sideEffect=JSON.parse(E.split(":")[1]):E.startsWith("returns:")?r.returns=E.split(":")[1].trim():r.description+=E+"\n"}}D=$jscomp.makeIterator(y);for(E=D.next();!E.done;E=D.next())if(E=E.value,"checkArgs"===Yd.Path("declarations.0.init.callee.name").get(E)&&(E=Yd.Path("declarations.0.id.properties").get(E)))r.parameters=E.map(function(I){return I.key.name});return r}var h=this,a,e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:r.setCatchFinallyBlocks(2);
if(h._methodSpecs){r.jumpTo(4);break}return r.yield(lively.modules.module("lively.storage/objectdb.js").source(),5);case 5:a=r.yieldResult,e=Yd.parse(a,{withComments:!0}),n=Yd.categorizer.findDecls(e),h._methodSpecs=n.filter(function(v){return v.parent&&"ObjectDBInterface"===v.parent.name});case 4:return r.return(b?d(h._methodSpecs,b):h._methodSpecs.map(function(v){return d(h._methodSpecs,v.name)}).filter(Boolean));case 2:return q=r.enterCatchBlock(),r.return("Error in describe "+q)}})},ensureDB:function(b){var d,
h,a,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return d=Yd.checkArgs(b,{db:"string",snapshotLocation:"string|Resource"}),h=d.db,a=d.snapshotLocation,n.yield(Yd.ObjectDB.find(h),2);if(e=n.yieldResult)return n.return(!1);Yd.ObjectDB.named(h,{snapshotLocation:a});return n.return(!0)})},destroyDB:function(b){var d,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(d=Yd.checkArgs(b,{db:"string"}),h=d.db,e.yield(Yd.ObjectDB.find(h),
2)):3!=e.nextAddress?(a=e.yieldResult)?e.yield(a.destroy(),3):e.return(!1):e.return(!0)})},fetchCommits:function(b){var d,h,a,e,n,q,r,v,y,D,E,I,K,P,N,aa,m,t,u,B,A,H,F,L,U,T,Y,wa,Ga,na,ea,da,ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){switch(Oa.nextAddress){case 1:return d=Yd.checkArgs(b,{db:"string",ref:"string|undefined",type:"string|undefined",typesAndNames:"Array|undefined",knownCommitIds:"object|undefined",includeDeleted:"boolean|undefined",filterFn:"string|undefined"}),
h=d.db,a=d.ref,e=d.type,n=d.typesAndNames,q=d.knownCommitIds,r=d.includeDeleted,v=d.filterFn,Oa.yield(Yd.ObjectDB.find(h),2);case 2:y=Oa.yieldResult;a||(a="HEAD");if(!y)throw Error("db "+h+" does not exist");if(y.__commitDB){Oa.jumpTo(3);break}return Oa.yield(y._commitDB(),4);case 4:case 3:if(D=y.__versionDB){Oa.jumpTo(5);break}return Oa.yield(y._versionDB(),6);case 6:D=Oa.yieldResult;case 5:E=D;I={};K={};if(n)for(P=I.keys=[],N=$jscomp.makeIterator(n),aa=N.next();!aa.done;aa=N.next())t=m=aa.value,
u=t.type,B=t.name,A=t.ref,P.push(u+"/"+B),A&&(K[u+"/"+B]=A);else e&&(I.startkey=e+'/\x00"',I.endkey=e+'/\uffff"');return Oa.yield(E.getAll(I),7);case 7:H=Oa.yieldResult;F=[];L=$jscomp.makeIterator(H);for(U=L.next();!U.done;U=L.next())!(T=U.value)||T.deleted||T._deleted||(Y=T,wa=Y._id,Ga=Y.refs,wa.startsWith("_")||(na=Ga[K[wa]||a]||a,!na||q&&q.hasOwnProperty(na)||F.push(na)));return Oa.yield(y.getCommitsWithIds(F),8);case 8:ea=Oa.yieldResult;r||(ea=ea.filter(function(Va){return Va&&!Va.deleted}));
if(v)try{da=eval("("+v+")");if("function"!==typeof da)throw Error(v+" does not eval to a function!");ia=ea.filter(da);if(Array.isArray(ia))ea=ia;else throw Error(v+" does not return an array!");}catch(Va){console.error("fetchCommits filterFn failed:",Va)}return Oa.return(ea)}})},fetchVersionGraph:function(b){var d,h,a,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return d=Yd.checkArgs(b,{db:"string",type:"string",name:"string"}),h=d.db,a=d.type,e=d.name,
y.yield(Yd.ObjectDB.find(h),2);if(3!=y.nextAddress){n=y.yieldResult;if(!n)throw Error("db "+h+" does not exist");return y.yield(n.versionGraph(a,e),3)}q=y.yieldResult;r=q.refs;v=q.history;return y.return({refs:r,history:v})})},exists:function(b){var d,h,a,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return d=Yd.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined"}),h=d.db,a=d.type,e=d.name,n=d.ref,y.yield(Yd.ObjectDB.find(h),2);
if(3!=y.nextAddress)return q=y.yieldResult,y.yield(q.versionGraph(a,e),3);r=y.yieldResult;if(!r)return y.return({exists:!1,commitId:void 0});n=n||"HEAD";return(v=r.refs[n])?y.return({exists:!0,commitId:v}):y.return({exists:!1,commitId:void 0})})},fetchLog:function(b){var d,h,a,e,n,q,r,v,y,D,E,I,K,P,N,aa,m,t,u,B,A,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:return d=Yd.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",
commit:"string|undefined",limit:"number|undefined",includeCommits:"boolean|undefined",knownCommitIds:"object|undefined"},function(L){return L.type&&L.name||L.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),h=d.db,a=d.type,e=d.name,n=d.ref,q=d.commit,r=d.limit,v=d.includeCommits,y=d.knownCommitIds,F.yield(Yd.ObjectDB.find(h),2);case 2:D=F.yieldResult;E=n||"HEAD";if(!D)throw Error("db "+h+" does not exist");r||(r=Infinity);q||n||(n=E);if(!q){F.jumpTo(3);break}I=q;if(a&&e){F.jumpTo(3);
break}return F.yield(D.getCommit(q),5);case 5:K=F.yieldResult;if(!K)throw Error("fetchLog: specified commit "+q+" but no commit with this id is in the database!");P=K;a=P.type;e=P.name;case 3:return F.yield(D.versionGraph(a,e),6);case 6:N=F.yieldResult;if(!N)throw Error("Unknown object "+a+"/"+e);aa=N;m=aa.refs;t=aa.history;I||(I=m[n]);u=I;for(B=[];B.length<r&&!B.includes(u);){B.push(u);A=t[u];if(!A||!A.length)break;H=$jscomp.makeIterator(A);u=H.next().value}if(!v){F.jumpTo(7);break}y&&(B=B.filter(function(L){return!y.hasOwnProperty(L)}));
return F.yield(D.getCommitsWithIds(B),8);case 8:B=F.yieldResult;case 7:return F.return(B)}})},fetchSnapshot:function(b){var d,h,a,e,n,q,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){switch(D.nextAddress){case 1:return d=Yd.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",commit:"string|undefined"},function(E){return E.type&&E.name||E.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),h=d.db,a=d.type,e=d.name,n=d.ref,
q=d.commit,D.yield(Yd.ObjectDB.find(h),2);case 2:r=D.yieldResult;n=n||"HEAD";if(!r)throw Error("db "+h+" does not exist");if(q){D.jumpTo(3);break}return D.yield(r.versionGraph(a,e),4);case 4:v=D.yieldResult;if(!v)throw Error("Unknown object "+a+"/"+e);q=v.refs[n];if(!q)throw Error("Cannot find commit for ref "+n+" of "+a+"/"+e);case 3:return D.yield(r.getCommit(q),5);case 5:y=D.yieldResult;if(!y)throw Error("Cannot find commit "+q);return D.return(r.loadSnapshot(void 0,void 0,y))}})},revert:function(b){var d,
h,a,e,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return d=Yd.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined",toCommitId:"string"}),h=d.db,a=d.type,e=d.name,n=d.ref,q=d.toCommitId,v.yield(Yd.ObjectDB.find(h),2);r=v.yieldResult;n||(n="HEAD");return v.return(r.revert(a,e,n,q))})},commit:function(b){var d,h,a,e,n,q,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return d=Yd.checkArgs(b,
{db:"string",type:"string",name:"string",ref:"string|undefined",snapshot:"object|string|undefined",preview:"string|undefined",commitSpec:"object",expectedParentCommit:"string|undefined"}),h=d.db,a=d.type,e=d.name,n=d.ref,q=d.expectedParentCommit,r=d.commitSpec,v=d.snapshot,y=d.preview,E.yield(Yd.ObjectDB.find(h),2);D=E.yieldResult;n||(n="HEAD");return E.return(D.commit(a,e,v,r,y,n,q))})},exportToSpecs:function(b){var d,h,a,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return d=
Yd.checkArgs(b,{db:"string",nameAndTypes:"Array|undefined",includeDeleted:"boolean|undefined"}),h=d.db,a=d.nameAndTypes,n.yield(Yd.ObjectDB.find(h),2);e=n.yieldResult;if(!e)throw Error("db "+h+" does not exist");return n.return(e.exportToSpecs(a))})},exportToDir:function(b){var d,h,a,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return d=Yd.checkArgs(b,{db:"string",url:"string",nameAndTypes:"Array|undefined",copyResources:"boolean|undefined",includeDeleted:"boolean|undefined"}),
h=d.db,a=d.url,e=d.nameAndTypes,n=d.copyResources,q=d.includeDeleted,y.yield(Yd.ObjectDB.find(h),2);r=y.yieldResult;if(!r)throw Error("db "+h+" does not exist");try{v=Yd.resource(a)}catch(D){v=Yd.resource(System.baseURL).join(a)}return y.return(r.exportToDir(v,e,n,q))})},importFromDir:function(b){var d,h,a,e,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return d=Yd.checkArgs(b,{db:"string",url:"string",overwrite:"boolean|undefined",copyResources:"boolean|undefined"}),
h=d.db,a=d.url,e=d.overwrite,n=d.copyResources,v.yield(Yd.ObjectDB.find(h),2);q=v.yieldResult;if(!q)throw Error("db "+h+" does not exist");try{r=Yd.resource(a)}catch(y){r=Yd.resource(System.baseURL).join(a)}return v.return(q.importFromDir(r,e,n))})},importFromSpecs:function(b){var d,h,a,e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return d=Yd.checkArgs(b,{db:"string",specs:"object",overwrite:"boolean|undefined",copyResources:"boolean|undefined"}),h=d.db,
a=d.specs,e=d.overwrite,n=d.copyResources,r.yield(Yd.ObjectDB.find(h),2);q=r.yieldResult;if(!q)throw Error("db "+h+" does not exist");return r.return(q.importFromSpecs(a,e,n))})},importFromResource:function(b){var d,h,a,e,n,q,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){if(1==D.nextAddress)return d=Yd.checkArgs(b,{db:"string",type:"string",name:"string",url:"string",commitSpec:"object",purgeHistory:"boolean|undefined"}),h=d.db,a=d.type,e=d.name,n=d.url,q=d.commitSpec,r=d.purgeHistory,
D.yield(Yd.ObjectDB.find(h),2);v=D.yieldResult;if(!v)throw Error("db "+h+" does not exist");try{y=Yd.resource(n)}catch(E){y=Yd.resource(System.baseURL).join(n)}return D.return(v.importFromResource(a,e,y,q,r))})},delete:function(b){var d,h,a,e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return d=Yd.checkArgs(b,{db:"string",type:"string",name:"string",dryRun:"boolean|undefined"}),h=d.db,a=d.type,e=d.name,n=d.dryRun,r.yield(Yd.ObjectDB.find(h),2);q=r.yieldResult;
return r.return(q.delete(a,e,"undefined"===typeof n||n))})},deleteCommit:function(b){var d,h,a,e,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return d=Yd.checkArgs(b,{db:"string",commit:"string",dryRun:"boolean|undefined"}),h=d.db,a=d.commit,e=d.dryRun,q.yield(Yd.ObjectDB.find(h),2);n=q.yieldResult;return q.return(n.deleteCommit(a,"undefined"===typeof e||e))})},fetchConflicts:function(b){var d,h,a,e,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==
q.nextAddress)return d=Yd.checkArgs(b,{db:"string",includeDocs:"boolean|undefined",only:"object|undefined"}),h=d.db,a=d.includeDocs,e=d.only,q.yield(Yd.ObjectDB.find(h),2);n=q.yieldResult;return q.return(n.getConflicts(a,e))})},resolveConflict:function(b){var d,h,a,e,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return d=Yd.checkArgs(b,{db:"string",id:"string",kind:"string",delete:"Array",resolved:"object"}),h=d.db,a=d.resolved,e=d.delete,n=d.kind,q=d.id,
v.yield(Yd.ObjectDB.find(h),2);r=v.yieldResult;return v.return(r.resolveConflict({resolved:a,delete:e,kind:n,id:q}))})},fetchDiff:function(b){var d,h,a,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return d=Yd.checkArgs(b,{db:"string",otherDB:"string"}),h=d.db,a=d.otherDB,n.yield(Yd.ObjectDB.find(h),2);e=n.yieldResult;return n.return(e.getDiff(a))})},synchronize:function(b){var d,h,a,e,n,q,r,v,y,D,E,I,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){switch(P.nextAddress){case 1:return d=
Yd.checkArgs(b,{db:"string",otherDB:"string",otherDBSnapshotLocation:"string|undefined",onlyTypesAndNames:"object|undefined",method:"string|undefined"}),h=d.db,a=d.otherDB,e=d.otherDBSnapshotLocation,n=d.onlyTypesAndNames,q=d.method,P.yield(Yd.ObjectDB.find(h),2);case 2:return e||(e=a.replace(/\/$/,"")+"/snapshots"),q||(q="replicateTo"),P.yield(Yd.ObjectDB.find(h),3);case 3:return r=P.yieldResult,P.yield(Yd.ObjectDB.named(a,{snapshotLocation:e}),4);case 4:return v=P.yieldResult,P.yield(v._commitDB(),
5);case 5:return y=P.yieldResult,P.yield(v._versionDB(),6);case 6:return D=P.yieldResult,E=v.snapshotLocation,I={replicationFilter:n?{onlyTypesAndNames:n}:void 0,retry:!0,live:!0},K=r[q](y,D,E,I),P.yield(K.whenPaused(),7);case 7:return P.yield(K.safeStop(),8);case 8:return P.yield(K.waitForIt(),9);case 9:return P.return(Yd.obj.select(K,["state","method","conflicts","errors","changesByTypeAndName"]))}})}};Yd.ObjectDBInterface=Lv;Yd.ObjectDBInterface=Lv;Yd.ObjectDBInterface=Lv;var Ti=function(b){this.serverURL=
b=void 0===b?document.location.origin+"/objectdb/":b};Ti.prototype._processResponse=function(b){var d,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return d=b.headers.get("content-type"),e.yield(b.text(),2);h=e.yieldResult;if("application/json"===d)try{a=JSON.parse(h)}catch(n){}if(!b.ok||a&&a.error)throw Error(a&&a.error||h||b.statusText);return e.return(a||h)})};Ti.prototype._GET=function(b,d){d=void 0===d?{}:d;var h=this,a,e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==
r.nextAddress?(a=Object.keys(d).map(function(v){var y=d[v];"object"===typeof y&&(y=JSON.stringify(y));return v+"="+encodeURIComponent(y)}).join("&"),e=h.serverURL+b+"?"+a,n=h,q=n._processResponse,r.yield(fetch(e),2)):r.return(q.call(n,r.yieldResult))})};Ti.prototype._POST=function(b,d){d=void 0===d?{}:d;var h=this,a,e,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(a=h.serverURL+b,e=h,n=e._processResponse,q.yield(fetch(a,{method:"POST",body:JSON.stringify(d),
headers:{"content-type":"application/json"}}),2)):q.return(n.call(e,q.yieldResult))})};Ti.prototype.describe=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._GET("describe",b))})};Ti.prototype.ensureDB=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._POST("ensureDB",b))})};Ti.prototype.destroyDB=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._POST("destroyDB",
b))})};Ti.prototype.fetchCommits=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._GET("fetchCommits",b))})};Ti.prototype.fetchVersionGraph=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._GET("fetchVersionGraph",b))})};Ti.prototype.exists=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._GET("exists",b))})};Ti.prototype.fetchLog=function(b){var d=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._GET("fetchLog",b))})};Ti.prototype.fetchSnapshot=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._GET("fetchSnapshot",b))})};Ti.prototype.revert=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._POST("revert",b))})};Ti.prototype.commit=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._POST("commit",
b))})};Ti.prototype.exportToSpecs=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._GET("exportToSpecs",b))})};Ti.prototype.exportToDir=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._POST("exportToDir",b))})};Ti.prototype.importFromDir=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._POST("importFromDir",b))})};Ti.prototype.importFromSpecs=
function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._POST("importFromSpecs",b))})};Ti.prototype.importFromResource=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._POST("importFromResource",b))})};Ti.prototype.delete=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._POST("delete",b))})};Ti.prototype.deleteCommit=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._POST("deleteCommit",
b))})};Ti.prototype.fetchConflicts=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._GET("fetchConflicts",b))})};Ti.prototype.resolveConflict=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._POST("resolveConflict",b))})};Ti.prototype.fetchDiff=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._GET("fetchDiff",b))})};Ti.prototype.synchronize=
function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d._POST("synchronize",b))})};Yd.ObjectDBHTTPInterface=Ti;Yd.default=Wg;var Ui=lively.FreezerRuntime.recorderFor("lively.storage/storage-resource.js");Ui.applyExclude=function(b,d){return d?"string"===typeof d?!b.url.includes(d):"function"===typeof d?!d(b):d instanceof RegExp?!d.test(b.url):!0:!0};Ui.Resource=Uf;Ui.Database=xg;Ui.debug=!1;Ui.slashRe=/\//g;var mU=function(){return Ui.Database.apply(this,
arguments)||this};$jscomp.inherits(mU,Ui.Database);mU.ensureDB=function(b,d){return Ui.Database.ensureDB.call(this,"lively.storage-"+b,d)};Ui.StorageDatabase=mU;var vn=function(){return Ui.Resource.apply(this,arguments)||this};$jscomp.inherits(vn,Ui.Resource);vn.prototype.read=function(){var b=this,d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return Ui.debug&&console.log("["+b+"] read"),a.yield(b.db.get(b.pathWithoutQuery()),2);h=(d=a.yieldResult)&&d.content;
return a.return(h?"string"===typeof h?h:JSON.stringify(h):"")})};vn.prototype.readJson=function(){var b=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(b.read(),2);d=h.yieldResult;return h.return("string"===typeof d?JSON.parse(d):d)})};vn.prototype.write=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){Ui.debug&&console.log("["+d+"] write");b||(b="");if(d.isDirectory())throw Error("Cannot write into a directory! ("+
d.url+")");return h.yield(d.db.update(d.pathWithoutQuery(),function(a){if(a&&a.isDirectory)throw Error(d.url+" already exists and is a directory (cannot write into it!)");var e=Date.now();return a?Object.assign({},a,{lastModified:e,size:b.length,content:b}):{etag:void 0,type:void 0,contentType:void 0,user:void 0,group:void 0,mode:void 0,lastModified:e,created:e,size:"string"===typeof b?b.length:0,content:b}}),2)}return h.return(d)})};vn.prototype.writeJson=function(b){return this.write(b)};vn.prototype.mkdir=
function(){var b=this,d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){Ui.debug&&console.log("["+b+"] mkdir");if(!b.isDirectory())throw Error("Cannot mkdir a file! ("+b.url+")");return a.yield(b.db.get(b.pathWithoutQuery()),2)}if(3!=a.nextAddress){if(d=a.yieldResult){if(!d.isDirectory)throw Error(b.url+" already exists and is a file (cannot mkdir it!)");return a.return(b)}h=Date.now();return a.yield(b.db.set(b.pathWithoutQuery(),{etag:void 0,type:void 0,contentType:void 0,
user:void 0,group:void 0,mode:void 0,lastModified:h,created:h,isDirectory:!0}),3)}return a.return(b)})};vn.prototype.exists=function(){var b=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return Ui.debug&&console.log("["+b+"] exists"),(d=b.isRoot())?h.jumpTo(2):h.yield(b.db.get(b.pathWithoutQuery()),3);2!=h.nextAddress&&(d=!!h.yieldResult);return h.return(d)})};vn.prototype.remove=function(){var b=this,d,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==
e.nextAddress?(Ui.debug&&console.log("["+b+"] remove"),d=b.pathWithoutQuery(),h=b.db,e.yield(h.docList({startkey:d,endkey:d+"\uffff"}),2)):3!=e.nextAddress?(a=e.yieldResult,e.yield(h.setDocuments(a.map(function(n){return{_id:n.id,_rev:n.rev,_deleted:!0}})),3)):e.return(b)})};vn.prototype.readProperties=function(){Ui.debug&&console.log("["+this+"] readProperties");return this.db.get(this.pathWithoutQuery())};vn.prototype.dirList=function(b,d){b=void 0===b?1:b;d=void 0===d?{}:d;var h=this,a,e,n,q,r,
v,y,D,E,I,K,P,N,aa,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(t){if(1==t.nextAddress){Ui.debug&&console.log("["+h+"] dirList");if(!h.isDirectory())return t.return(h.asDirectory().dirList(b,d));a=d;e=a.exclude;n=h.pathWithoutQuery();q=[];return t.yield(h.db.getAll({startkey:n,endkey:n+"\uffff"}),2)}r=t.yieldResult;"infinity"===b&&(b=Infinity);v={};for(y=0;y<r.length;v={$jscomp$loop$prop$dirToChild$2785:v.$jscomp$loop$prop$dirToChild$2785},y++)if(E=D=r[y],I=E._id,I.startsWith(n)&&
n!==I)if(K=I.slice(n.length),P=K.includes("/")?K.match(Ui.slashRe).length+1:1,P>b)v.$jscomp$loop$prop$dirToChild$2785=h.join(K.split("/").slice(0,b).join("/")+"/"),q.some(function(u){return function(B){return B.equals(u.$jscomp$loop$prop$dirToChild$2785)}}(v))||q.push(v.$jscomp$loop$prop$dirToChild$2785);else if(N=h.join(K),!e||Ui.applyExclude(N,e))for(q.push(N),aa="created lastModified mode group user contentType type etag size".split(" "),m=0;m<aa.length;m++)N[aa[m]]=D[aa[m]];return t.return(q)})};
$jscomp.global.Object.defineProperties(vn.prototype,{canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!0}},db:{configurable:!0,enumerable:!0,get:function(){return this._db||(this._db=Ui.StorageDatabase.ensureDB(this.host()))}}});Ui.LivelyStorageResource=vn;var nU={name:"lively.storage",matches:function(b){return b.startsWith("lively.storage:")},resourceClass:Ui.LivelyStorageResource};Ui.resourceExtension=nU;Ui.resourceExtension=nU;Ui.resourceExtension=nU;Ui.registerExtension=Zd;
Ui.registerExtension(Ui.resourceExtension);Ui.default=vn;var tp=lively.FreezerRuntime.recorderFor("lively.storage/index.js");tp.default=xg;tp.Database=xg;tp.ObjectDB=Wg;tp.ObjectDBInterface=Lv;tp.ObjectDBHTTPInterface=Ti;tp.ObjectDB=Wg;tp.ObjectDB=Wg;tp.ObjectDBInterface=Lv;tp.ObjectDBInterface=Lv;tp.ObjectDBHTTPInterface=Ti;tp.ObjectDBHTTPInterface=Ti;var Pva=Object.freeze({__proto__:null,Database:xg,ObjectDB:Wg,ObjectDBInterface:Lv,ObjectDBHTTPInterface:Ti}),lg=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js");
lg.convertToSerializableCommit=IQ;lg.ensureCommitInfo=fB;lg.ObjectDBHTTPInterface=Ti;lg.Database=xg;lg.loadMorphFromSnapshot=bq;lg.createMorphSnapshot=cv;lg.resource=Uc;lg.obj=xf;lg.Path=Eg;lg.arr=cf;lg.string=Ng;lg.morphicDBs=lg.morphicDBs||(lg.morphicDBs=new Map);lg.getDefaultServerUrl=function(){return lg.resource("undefined"!==typeof document?window.SERVER_URL||System.baseURL:"http://localhost:9001").join("objectdb/").url};lg.convertToSerializableCommit=IQ;lg.convertToSerializableCommit=IQ;lg.ensureCommitInfo=
fB;lg.ensureCommitInfo=fB;var oU=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),h=d.hasOwnProperty("MorphicDB")&&"function"===typeof d.MorphicDB?d.MorphicDB:d.MorphicDB=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,e){var n=e.snapshotLocation;e=e.serverURL;this.name=a;this.serverURL=e;this.snapshotLocation=
n||a+"/snapshots/";this.httpDB=new lg.ObjectDBHTTPInterface(e);this._initialized=!1}},{key:"__serialize__",value:function(){return{__expr__:'MorphicDB.named("'+this.name+'", {snapshotLocation: "'+this.snapshotLocation+'", serverURL: "'+this.serverURL+'"})',bindings:{"lively.morphic/morphicdb/index.js":["MorphicDB"]}}}},{key:"initializeIfNecessary",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return a._initialized?e.return():e.yield(a.ensureDB(),
2);a._initialized=!0;e.jumpToEnd()})}},{key:"snapshotResourceFor",value:function(a){var e=a.content.slice(0,2);a=a.content.slice(2);return lg.resource(System.decanonicalize(this.snapshotLocation)).join(e+"/"+a+".json")}},{key:"ensureDB",value:function(){return this.httpDB.ensureDB({db:this.name,snapshotLocation:this.snapshotLocation})}},{key:"destroyDB",value:function(){this._initialized=!1;return this.httpDB.destroyDB({db:this.name})}},{key:"latestCommits",value:function(a,e){a=void 0===a?"world":
a;e=void 0===e?!1:e;var n=this,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(n.initializeIfNecessary(),2);q=n;r=q.name;v={};return y.return(n.httpDB.fetchCommits({db:r,type:a,ref:"HEAD",knownCommitIds:v,includeDeleted:e}))})}},{key:"fetchCommit",value:function(a,e,n){var q=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(q.initializeIfNecessary(),2);if(3!=y.nextAddress)return r=[{type:a,
name:e,ref:n}],y.yield(q.httpDB.fetchCommits({db:q.name,ref:n,type:a,typesAndNames:r,knownCommitIds:{}}),3);v=y.yieldResult;return y.return(lg.convertToSerializableCommit(v[0]))})}},{key:"fetchSnapshot",value:function(a,e,n,q){var r=this,v=arguments,y,D,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return y=a,1===v.length&&y.type&&y.name&&(a=y.type,e=y.name,n=y._id),I.yield(r.initializeIfNecessary(),2);D=r;E=D.name;return I.return(r.httpDB.fetchSnapshot({db:E,
type:a,name:e,ref:q,commit:n}))})}},{key:"exists",value:function(a,e,n){var q=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(q.initializeIfNecessary(),2);r=q;v=r.name;return y.return(q.httpDB.exists({db:v,type:a,name:e,ref:n}))})}},{key:"history",value:function(a,e){var n=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(n.initializeIfNecessary(),2);q=n;r=q.name;return v.return(n.httpDB.fetchVersionGraph({db:r,
type:a,name:e}))})}},{key:"log",value:function(a,e,n,q){n=void 0===n?!1:n;var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){return 1==D.nextAddress?D.yield(r.initializeIfNecessary(),2):3!=D.nextAddress?(v=r,y=v.name,D.yield(r.httpDB.fetchLog({db:y,commit:a,limit:e,includeCommits:n,knownCommitIds:q}),3)):D.return(D.yieldResult.map(lg.convertToSerializableCommit))})}},{key:"revert",value:function(a,e,n,q){q=void 0===q?"HEAD":q;var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){if(1==
D.nextAddress)return D.yield(r.initializeIfNecessary(),2);v=r;y=v.name;return D.return(r.httpDB.revert({db:y,type:a,name:e,toCommitId:n,ref:q}))})}},{key:"snapshotAndCommit",value:function(a,e,n,q,r,v,y){var D=this,E,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(K){if(1==K.nextAddress)return K.yield(lg.createMorphSnapshot(n,q),2);if(3!=K.nextAddress)return E=K.yieldResult,K.yield(D.commit(a,e,E,r,v,y),3);I=K.yieldResult;I=lg.convertToSerializableCommit(I);n.changeMetaData("commit",
lg.obj.dissoc(I,["preview"]),!0,!1);return K.return(I)})}},{key:"commit",value:function(a,e,n,q,r,v){var y=this,D=arguments,E,I,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){if(1==P.nextAddress)return E=a,1===D.length&&E.type&&E.name&&(a=E.type,e=E.name,n=E.snapshot||E.content,q=lg.obj.dissoc(E,["snapshot","_rev","_id","ancestors","deleted"]),v=E._id),P.yield(y.initializeIfNecessary(),2);I=y;K=I.name;return P.return(y.httpDB.commit({db:K,type:a,name:e,ref:r,expectedParentCommit:v,
commitSpec:q,snapshot:n}))})}},{key:"load",value:function(a,e,n,q,r){var v=this,y,D,E,I,K,P,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){switch(aa.nextAddress){case 1:"object"===typeof a?q=a:y=a;D=q;if(!D)return aa.yield(v.fetchCommit(y,e,r),6);if("string"!==typeof D){aa.jumpTo(3);break}E=$jscomp;I=E.makeIterator;return aa.yield(v.log(D,1,!0),5);case 5:K=I.call(E,aa.yieldResult);D=K.next().value;aa.jumpTo(3);break;case 6:D=aa.yieldResult;case 3:return aa.yield(v.fetchSnapshot(void 0,
void 0,D._id),7);case 7:return P=aa.yieldResult,aa.yield(lg.loadMorphFromSnapshot(P,n),8);case 8:return N=aa.yieldResult,D=lg.convertToSerializableCommit(D),N.changeMetaData("commit",lg.obj.dissoc(D,["preview"]),!0,!1),aa.return(N)}})}},{key:"fetchDiff",value:function(a){var e=this,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(e.initializeIfNecessary(),2);n=e;q=n.name;return r.return(e.httpDB.fetchDiff({db:q,otherDB:a}))})}},{key:"fetchConflicts",
value:function(a,e){var n=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(n.initializeIfNecessary(),2);q=n;r=q.name;return v.return(n.httpDB.fetchConflicts({db:r,includeDocs:a,only:e}))})}},{key:"resolveConflict",value:function(a){var e=this,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(e.initializeIfNecessary(),2);n=e;q=n.name;return r.return(e.httpDB.resolveConflict(Object.assign({db:q},
a)))})}},{key:"synchronize",value:function(a){var e=a.method,n=a.otherDB,q=a.otherDBSnapshotLocation,r=a.onlyTypesAndNames,v=this,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return E.yield(v.initializeIfNecessary(),2);y=v;D=y.name;return E.return(v.httpDB.synchronize({db:D,method:e,otherDB:n,otherDBSnapshotLocation:q,onlyTypesAndNames:r}))})}},{key:"softDelete",value:function(a,e,n,q,r){var v=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return y.return(v.commit(a,
e,void 0,n,q,r))})}},{key:"delete",value:function(a,e,n){n=void 0===n?!0:n;var q=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(q.initializeIfNecessary(),2);r=q;v=r.name;return y.return(q.httpDB.delete({db:v,type:a,name:e,dryRun:n}))})}},{key:"deleteCommit",value:function(a,e){e=void 0===e?!0:e;var n=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(n.initializeIfNecessary(),2);q=n;
r=q.name;return v.return(n.httpDB.deleteCommit({db:r,commit:a,dryRun:e}))})}},{key:"codeSearchInPackages",value:function(a,e,n,q){e=void 0===e?"part":e;var r=this,v,y,D,E,I,K,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:return N.yield(r.latestCommits(e),2);case 2:v=N.yieldResult,y=[],D=0,"function"===typeof q&&(v=v.filter(q)),E=$jscomp.makeIterator(v),I=E.next();case 3:if(I.done){N.jumpTo(5);break}K=I.value;"function"===typeof n&&n(K.name,D++,v.length);
return N.yield(r._textSearchInSnapshotOfCommit(a,K),6);case 6:P=N.yieldResult;P.length&&y.push.apply(y,$jscomp.arrayFromIterable(P));I=E.next();N.jumpTo(3);break;case 5:return N.return(y)}})}},{key:"_textSearchInSnapshotOfCommit",value:function(a,e,n){var q=this,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return r=e,v=r._id,(y=n)?E.jumpTo(2):E.yield(q.fetchSnapshot(void 0,void 0,v),3);2!=E.nextAddress&&(y=E.yieldResult);D=y;return E.return((new lg.SnapshotPackageHelper(D)).textSearch(a,
e))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicDB"}},{key:"default",get:function(){return this.named("lively.morphic/objectdb/morphicdb",{serverURL:lg.getDefaultServerUrl()})}},{key:"named",value:function(a,e){var n=lg.morphicDBs.get(a);if(n)return n;if(!e.serverURL)throw Error("Needs serverURL!");e=new this(a,e);lg.morphicDBs.set(a,e);return e}},{key:"wellKnownMorphicDBs",value:function(){var a=this,e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return e=lg.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs"),r.yield(e.getAll(),2);n=r.yieldResult;q=n.reduce(function(v,y){var D={};return Object.assign(v,(D[y._id]=a.named(y.name,{serverURL:y.serverURL,snapshotLocation:y.snapshotLocation}),D))},{});q.default||(q.default=a.default);return r.return(q)})}},{key:"addWellKnownMorphicDB",value:function(a,e){var n,q,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){n=e;q=n.name;r=n.snapshotLocation;
v=n.serverURL;y=lg.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return D.yield(y.set(a,{name:q,snapshotLocation:r,serverURL:v}),0)})}},{key:"removeWellKnownMorphicDB",value:function(a){var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){e=lg.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return n.yield(e.remove(a),0)})}}],d,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1570,end:10352})}(void 0);oU=lg.MorphicDB;var zq=Ka("ae",oU),tK=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),h=d.hasOwnProperty("SnapshotPackageHelper")&&"function"===typeof d.SnapshotPackageHelper?d.SnapshotPackageHelper:d.SnapshotPackageHelper=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.snapshot=a}},{key:"textSearch",value:function(a,e){var n=a&&a instanceof RegExp,q=[];if(!a)return q;for(var r={},v=$jscomp.makeIterator(this.filesInPackages()),y=v.next();!y.done;r={$jscomp$loop$prop$file$2787:r.$jscomp$loop$prop$file$2787},y=v.next()){r.$jscomp$loop$prop$file$2787=y.value;y=r.$jscomp$loop$prop$file$2787.get(this.snapshot);var D=lg.string.lineIndexComputer(y),E=lg.string.lineRanges(y);
if(n)y=lg.string.reMatches(y,a),y.length&&q.push.apply(q,$jscomp.arrayFromIterable(y.map(function(t){return function(u){return Object.assign(u,{commit:e,file:t.$jscomp$loop$prop$file$2787})}}(r))));else for(var I=0,K=0;0<=(I=y.indexOf(a));){var P=I+K,N=P+a.length,aa=D(P),m=y.slice.apply(y,$jscomp.arrayFromIterable(E[aa]));q.push({match:a,start:P,end:N,length:a.length,line:aa,lineString:m,commit:e,file:r.$jscomp$loop$prop$file$2787});K+=I+a.length;y=y.slice(I+a.length)}}return q}},{key:"filesInPackages",
value:function(){function a(q,r,v,y,D){D=void 0===D?[]:D;if(q["package.json"]&&"string"===typeof q["package.json"])try{var E=JSON.parse(q["package.json"]);y={url:v,path:r,name:E.name||lg.arr.last(r)}}catch(K){}E=[];for(var I in q)"string"===typeof q[I]?D.push({path:r.concat(I),url:lg.string.joinPath(v,I),package:y,get:function(K){return lg.Path(this.path).get(K.packages)},set:function(K,P){lg.Path(this.path).set(K.packages,P)}}):E.push(I);E.forEach(function(K){return a(q[K],r.concat(K),lg.string.joinPath(v,
K),y,D)});return D}var e=[],n;for(n in this.snapshot.packages)a(this.snapshot.packages[n],[n],n,null,e);return e}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapshotPackageHelper"}}],d,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10361,end:13434})}(void 0);lg.SnapshotPackageHelper=
tK;lg.SnapshotPackageHelper=tK;lg.SnapshotPackageHelper=tK;lg.default=oU;var pd=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js");pd.ensureAbsoluteComponentRefs=function(b){var d=b.snapshotAndPackages,h=void 0===b.localComponents?gB(snapshot):b.localComponents,a=void 0===b.localWorldName?Eg("metadata.commit.name").get($world):b.localWorldName;Object.values(d.packages["local://lively-object-modules/"]||{}).forEach(function(e){Object.entries(e).forEach(function(n){var q=$jscomp.makeIterator(n);
n=q.next().value;q=q.next().value;if(!n.endsWith(".json")){var r=pd.ast.parse(q),v=[];pd.ast.AllNodesVisitor.run(r,function(y,D){"Literal"===y.type&&"string"===typeof y.value&&(y.value.match(/^styleguide:\/\/\$world\/.+/)&&!h.includes(y.value.replace("styleguide://$world/",""))&&v.push({target:y,replacementFunc:function(){return JSON.stringify(y.value.replace("$world",a))}}),y.value.match(/^part:\/\/\$world\/.+/)&&!h.includes(y.value.replace("part://$world/",""))&&v.push({target:y,replacementFunc:function(){return JSON.stringify(y.value.replace("$world",
a))}}))});e[n]=pd.ast.transform.replaceNodes(v,q).source}})})};pd.findLocalComponents=gB;pd.prefetchCoreStyleguides=KG;pd.getProjectName=function(b){return pd.Path("metadata.commit.name").get(b)||b.name};pd.reset=LG;pd.clearSnapshot=JQ;pd.arr=cf;pd.properties=Qm;pd.Path=Eg;pd.promise=bg;pd.obj=xf;pd.registerExtension=Zd;pd.Resource=Uf;pd.resource=Uc;pd.pt=xh;pd.MorphicDB=zq;pd.ProportionalLayout=By;pd.ObjectPool=zi;pd.allPlugins=pq;pd.normalizeOptions=Vz;pd.deserializeMorph=pB;pd.loadPackagesAndModulesOfSnapshot=
qB;pd.subscribeOnce=function(b,d,h){pE(h).emitter.once(b,d);return d};pd.once=Sq;pd.ast=PI;pd.findLocalComponents=gB;pd.findLocalComponents=gB;var uK=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),h=d.hasOwnProperty("StyleguidePlugin")&&"function"===typeof d.StyleguidePlugin?d.StyleguidePlugin:d.StyleguidePlugin=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"afterSerialization",
value:function(a,e,n){var q={},r="styleguide://"+pd.getProjectName($world);pd.findLocalComponents(e).forEach(function(v){return q[r+"/"+v]="styleguide://$world/"+v});Object.values(e).forEach(function(v){if((v=v.props.master)&&v.value)for(var y in q)Object.values(a.expressionSerializer.deserializeExpr(v.value)).includes(y)&&(v.value=v.value.split(y).join(q[y]))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleguidePlugin"}}],d,{pathInPackage:function(){return"style-guide.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3173,end:4407})}(void 0);pd.StyleguidePlugin=uK;pd.StyleguidePlugin=uK;pd.StyleguidePlugin=uK;pd.prefetchCoreStyleguides=KG;pd.prefetchCoreStyleguides=KG;var vK=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),h=d.hasOwnProperty("ComponentPolicy")&&
"function"===typeof d.ComponentPolicy?d.ComponentPolicy:d.ComponentPolicy=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,e){this.derivedMorph=a;this._overriddenProps=new WeakMap;if(e.isMorph||"string"===typeof e)this.auto=e,e.isMorph&&(this.auto.isComponent=!0),"string"===typeof e&&this.resolveMasterComponents();else{a=e.click;var n=e.auto,
q=e.hover,r=void 0===e.light?{}:e.light;e=void 0===e.dark?{}:e.dark;r&&(this.light=r);e&&(this.dark=e);a&&(this.click=a);n&&(this.auto=n);q&&(this.hover=q);this.resolveMasterComponents()}}},{key:"uses",value:function(a){return[this.auto,this.click,this.hover].includes(a)}},{key:"spec",value:function(){return pd.obj.select(this,["auto","click","hover","light","dark"])}},{key:"equals",value:function(a){if(!a)return!1;if("string"===typeof a){a=a.replace("styleguide://$world","styleguide://"+pd.getProjectName($world));
var e=this.getResourceUrlFor(this.auto);e&&(e=e.replace("styleguide://$world","styleguide://"+pd.getProjectName($world)));return e==a}e=$jscomp.makeIterator(["auto","click","hover"]);for(var n=e.next();!n.done;n=e.next())if(n=n.value,"string"===typeof a[n]){if(this.getResourceUrlFor(this[n])!=a[n])return!1}else if((this[n]||null)!=(a[n]||null))return!1;return!0}},{key:"getManagedMorphs",value:function(){var a=this,e=[];this.derivedMorph.withAllSubmorphsDo(function(n){a.managesMorph(n)&&0<Object.keys(a._overriddenProps.get(n)).filter(function(q){return"_rev"!=
q}).length&&e.push([n,Object.keys(a._overriddenProps.get(n))])});return e}},{key:"__dont_serialize__",get:function(){var a=["_overriddenProps","_applying","_appliedMaster","_hasUnresolvedMaster"];pd.obj.isEmpty(this.dark)&&a.push("dark");pd.obj.isEmpty(this.light)&&a.push("light");return a}},{key:"__serialize__",value:function(){var a=this,e={},n=function(q){return pd.obj.isString(q)?q:a.getResourceUrlFor(q)};this.auto&&(e.auto=n(this.auto));this.click&&(e.click=n(this.click));this.hover&&(e.hover=
n(this.hover));return{__expr__:"("+JSON.stringify(e)+")"}}},{key:"__after_deserialize__",value:function(a,e){this._overriddenProps=new WeakMap;delete this.managedMorphs;this.resolveMasterComponents()}},{key:"whenApplied",value:function(){var a=this,e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(e=pd.promise.deferred(),n=e.promise,q=e.resolve,pd.once(a,"_appliedMaster",q),r.yield(a._hasUnresolvedMaster,2)):3!=r.nextAddress?a._appliedMaster?r.jumpTo(3):
r.yield(n,3):r.return(!0)})}},{key:"whenReady",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.yield(a._hasUnresolvedMaster,0)})}},{key:"getResourceUrlFor",value:function(a){return a?a._resourceHandle?a._resourceHandle.url.replace("$world",pd.getProjectName($world)):void 0==a.name?null:"styleguide://"+pd.getProjectName($world)+"/"+a.name:null}},{key:"getWorldUrlFor",value:function(a){a=pd.resource("string "===typeof a?a:this.getResourceUrlFor(a)).worldName;
return a==pd.getProjectName($world)?document.location.href:pd.worldToUrl[a]}},{key:"resolveMasterComponents",value:function(){var a=this,e,n,q,r,v,y,D,E,I,K,P,N,aa,m,t,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){switch(B.nextAddress){case 1:e=pd.promise.deferred(),a._hasUnresolvedMaster=e.promise,n=a,q=void 0===n.light?{}:n.light,r=void 0===n.dark?{}:n.dark,v=["auto","click","hover"],y=[],B.setCatchFinallyBlocks(2),D=$jscomp.makeIterator(v),E=D.next();case 4:if(E.done){B.leaveTryBlock(3);
break}I=E.value;if("string"!==typeof a[I]){B.jumpTo(7);break}K=a;P=I;return B.yield(pd.resource(a[I]).read(),8);case 8:K[P]=B.yieldResult;case 7:if("string"!==typeof q[I]){B.jumpTo(9);break}N=q;aa=I;return B.yield(pd.resource(q[I]).read(),10);case 10:N[aa]=B.yieldResult;case 9:if("string"!==typeof r[I]){B.jumpTo(11);break}m=r;t=I;return B.yield(pd.resource(r[I]).read(),12);case 12:m[t]=B.yieldResult;case 11:y.push(a[I],q[I],r[I]);E=D.next();B.jumpTo(4);break;case 2:throw u=B.enterCatchBlock(),Error("Encountered invalid master component reference: "+
u.message);case 3:pd.arr.compact(y).forEach(function(A){A.isComponent||(A.isComponent=!0)}),e.resolve(),a._hasUnresolvedMaster=!1,B.jumpToEnd()}})}},{key:"applyAnimated",value:function(a){a=void 0===a?{duration:1E3}:a;var e=pd.promise.deferred(),n=e.promise;e=e.resolve;this.applyIfNeeded(!0,a);pd.once(this,"_animationConfig",e);return n}},{key:"applyIfNeeded",value:function(a,e){var n=this;a=void 0===a?!1:a;if(e=void 0===e?!1:e)this._animationConfig=e;var q=this.derivedMorph;if(q.env.world)if(q.env.eventDispatcher){if(this._hasUnresolvedMaster)return this._originalOpacity=
q.opacity,q.withMetaDo({metaInteraction:!0},function(){e||[q].concat($jscomp.arrayFromIterable(q.ownerChain())).find(function(v){return v.isComponent})||(q.opacity=0)}),this._hasUnresolvedMaster.then(function(){n.applyIfNeeded(a);q.withMetaDo({metaInteraction:!0},function(){var v="undefined"!==typeof n._overriddenProps.get(q).opacity;q.opacity=n._appliedMaster&&!v?n._appliedMaster.opacity:n._originalOpacity});delete n._originalOpacity;delete n._capturedExtents});var r=this.determineMaster(q);r&&this._appliedMaster!=
r&&(a=!0);r&&a&&(this.apply(q,r),this._appliedMaster=r)}else pd.once(q.env,"eventDispatcher",function(){n.applyIfNeeded(a,e)});else pd.once(q.env,"world",function(){n.applyIfNeeded(a,e)})}},{key:"getStyleProperties",value:function(a){var e=a.propertiesAndPropertySettings();a=e.properties;var n=[],q=!1;e=$jscomp.makeIterator(e.order);for(var r=e.next();!r.done;r=e.next())r=r.value,"layout"==r?q=!0:a[r].isStyleProp&&n.push(r);q&&n.push("layout");return n}},{key:"apply",value:function(a,e,n){var q=this;
n=void 0===n?this._animationConfig:n;if(!this._applying){this._applying=!0;try{var r=function(){return a.withMetaDo({metaInteraction:!0},function(){var v=q.prepareSubmorphsToBeManaged(a,e);e.withAllSubmorphsDoExcluding(function(y){var D=y==e,E=D?a:v[y.name];if(E)if(pd.obj.isArray(E)&&(E=E.pop()),!y.master||D||y.master.equals(E.master)||q._overriddenProps.get(E).master||(E.master=y.master.spec(),E.requestMasterStyling()),E.master&&!D)D=E.master._overriddenProps.get(E)||{},D.position||(E.position=y.position),
D.extent||(E.extent=y.extent);else{for(var I=$jscomp.makeIterator(q.getStyleProperties(y)),K=I.next();!K.done;K=I.next()){K=K.value;if(q._overriddenProps.get(E)[K])if("extent"!=K||pd.Path("owner.layout.constructor").get(E)!=pd.ProportionalLayout||E.master||D)continue;else if(q._appliedMaster)continue;if("layout"==K)E.layout&&y.layout&&E.layout.name()==y.layout.name()&&E.layout.equals(y.layout)||(E.layout=y.layout?y.layout.copy():void 0);else{if(y==e){if("extent"==K&&!E.extent.equals(pd.pt(10,10))&&
(!E.owner||E.owner.isWorld||E.ownerChain().find(function(P){return P.master&&P.master.managesMorph(E)})))continue;if("position"==K)continue}E.isLabel&&"extent"==K||["border","borderTop","borderBottom","borderRight","borderLeft"].includes(K)||(pd.obj.equals(E[K],y[K])||(E[K]=y[K]),["fixedHeight","fixedWidth"].includes(K)&&E._parametrizedProps&&E._parametrizedProps.extent&&(E.extent=E._parametrizedProps.extent))}}E._parametrizedProps&&delete E._parametrizedProps}},function(y){return e!=y&&y.master})})};
n?a.withAnimationDo(r,n).then(function(){q._animationConfig=!1;q._applying=!1}):a.dontRecordChangesWhile(r)}finally{n||(this._applying=!1),delete a._parametrizedProps}}}},{key:"clearOverriddenPropertiesFor",value:function(a,e){var n=this._overriddenProps.get(a);this._overriddenProps.set(a,pd.obj.dissoc(n,e))}},{key:"prepareSubmorphsToBeManaged",value:function(a,e){var n=this,q={};a.withAllSubmorphsDoExcluding(function(r){q[r.name]&&(pd.obj.isArray(q[r.name])?q[r.name].push(r):q[r.name]=[q[r.name],
r]);q[r.name]=r},function(r){return r!=a&&r.master});e.withAllSubmorphsDoExcluding(function(r){if(r=r==e?a:q[r.name])pd.obj.isArray(r)&&(r=r.pop()),n.prepareMorphToBeManaged(r)},function(r){return r!=e&&r.master});return q}},{key:"managedMorphs",get:function(){var a=this,e=pd.arr.groupBy(this.derivedMorph.withAllSubmorphsSelect(function(q){return a.managesMorph(q)}),function(q){return q.name}),n;for(n in e)e[n]=e[n][0];return e}},{key:"reconcileSubmorphs",value:function(){var a=this,e,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==
q.nextAddress)return q.yield(a.whenReady(),2);e=a.managedMorphs;n=a._appliedMaster||a.auto;e[n.name]=a.derivedMorph;if(!n)return q.return();a.derivedMorph.submorphs=n.copy().submorphs;a.derivedMorph.submorphs.forEach(function(r,v){r.position=n.submorphs[v].position});a.prepareSubmorphsToBeManaged(a.derivedMorph,n);q.jumpToEnd()})}},{key:"managesMorph",value:function(a){return this._overriddenProps.has(a)}},{key:"propsToSerializeForMorph",value:function(a,e){if(!this.managesMorph(a))return e;for(var n=
[],q=$jscomp.makeIterator(this.getStyleProperties(a)),r=q.next();!r.done;r=q.next())r=r.value,this._overriddenProps.get(a)[r]||!("position"==r&&a==this.derivedMorph||"extent"==r&&a==this.derivedMorph)&&n.push(r);return pd.arr.withoutAll(e,n)}},{key:"prepareMorphToBeManaged",value:function(a){if(!this._overriddenProps.has(a)){var e={},n;for(n in a._parametrizedProps)"__takenFromSnapshot__"!=n&&(e[n]=!0);this._overriddenProps.set(a,e)}}},{key:"determineMaster",value:function(a){var e=a.env.world.colorScheme,
n=a.env.eventDispatcher.isMorphHovered(a);a=a.env.eventDispatcher.isMorphClicked(a);var q=this.getMasterForState(this,{isHovered:n,isClicked:a});this.light&&"light"==e&&(q=this.getMasterForState(this.light,{isHovered:n,isClicked:a})||q);this.dark&&"dark"==e&&(q=this.getMasterForState(this.light,{isHovered:n,isClicked:a})||q);return q}},{key:"getMasterForState",value:function(a,e){var n=a.auto,q=a.hover,r=a.click,v=e.isClicked;a=n;if(e.isHovered)if(q)a=q;else for(e=a&&a.master,q=[];e;){if(e.hover){a=
e.hover;break}e=pd.Path("auto.master").get(e);if(q.includes(e))break;q.push(e)}if(v)if(a=n,r)a=r;else for(n=a&&a.master,r=[];n;){if(n.click){a=n.click;break}n=pd.Path("auto.master").get(n);if(r.includes(n))break;r.push(n)}return a}},{key:"onMorphChange",value:function(a,e){if(!this._applying&&!pd.Path("meta.metaInteraction").get(e)&&!["_rev","name"].includes(e.prop)&&("opacity"==e.prop&&delete this._originalOpacity,"master"==e.prop&&this.managesMorph(a)&&(this._overriddenProps.get(a).master=!0),a.styleProperties.includes(e.prop)))if(this.managesMorph(a)){if(!a.master||
a.master==this||["extent","position"].includes(e.prop))this._overriddenProps.get(a)[e.prop]=!0}else if(a._parametrizedProps)a._parametrizedProps[e.prop]=e.value;else{var n={};a._parametrizedProps=(n[e.prop]=e.value,n)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentPolicy"}},{key:"for",value:function(a,e){e=e.constructor===pd.ComponentPolicy?e:new this(a,e);a.master&&(e._overriddenProps=a.master._overriddenProps);return e}}],d,{pathInPackage:function(){return"style-guide.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5662,end:29722})}(void 0);pd.ComponentPolicy=vK;pd.ComponentPolicy=vK;pd.ComponentPolicy=vK;pd.styleGuideURLRe=/^styleguide:\/\/([^\/]+)\/(.*)$/;pd.fetchedSnapshots=pd.fetchedSnapshots||{};pd.fetchedMasters=pd.fetchedMasters||{};pd.resolvedMasters=pd.resolvedMasters||{};pd.modulesToLoad=
pd.modulesToLoad||{};pd.li=pd.li||void 0;pd.localNamePromise=pd.localNamePromise||void 0;pd.masterComponentFetches=pd.masterComponentFetches||{};pd.worldToUrl=pd.worldToUrl||{};var fca=Ka("bO",pd.resolvedMasters);pd.resolvedMasters=fca;pd.resolvedMasters=fca;pd.reset=LG;pd.reset=LG;pd.clearSnapshot=JQ;pd.clearSnapshot=JQ;var LC=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),h=d.hasOwnProperty("StyleGuideResource")&&"function"===typeof d.StyleGuideResource?d.StyleGuideResource:
d.StyleGuideResource=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"canDealWithJSON",get:function(){return!1}},{key:"componentName",get:function(){var a=this.url.match(pd.styleGuideURLRe);a=$jscomp.makeIterator(a);a.next();a.next();return a.next().value}},{key:"worldName",get:function(){var a=this.url.match(pd.styleGuideURLRe);a=$jscomp.makeIterator(a);a.next();var e=a.next().value;a.next();"$world"==
e&&(e=this.localWorldName());return e}},{key:"dirList",value:function(a,e){var n=this,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return n.worldName==pd.getProjectName($world)?r.return(pd.arr.uniq([].concat($jscomp.arrayFromIterable($world.localComponents),$jscomp.arrayFromIterable($world.withAllSubmorphsSelect(function(v){return v.isComponent}))))):(q=pd.resolvedMasters[n.worldName])?r.return(Object.values(q)):r.return([])})}},{key:"localWorldName",value:function(){var a;if(a=
pd.getProjectName($world))return a;if(pd.localNamePromise)return pd.localNamePromise;a=pd.promise.deferred();var e=a.resolve;pd.localNamePromise=a.promise;if("__newWorld__"==pd.resource(document.location.href).query().name)return e("__newWorld__"),pd.localNamePromise;pd.subscribeOnce("world/loaded",function(){e(pd.getProjectName($world))},System);return pd.localNamePromise}},{key:"fetchFromMasterDir",value:function(a,e){var n=a.join(this.worldName).join(e+".json");if(pd.masterComponentFetches[n.url])return pd.masterComponentFetches[n.url];
pd.masterComponentFetches[n.url]=function(){var q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==v.nextAddress?(q=pd,r=q.deserializeMorph,v.yield(n.readJson(),2)):v.return(r.call(q,v.yieldResult))})}();return pd.masterComponentFetches[n.url]}},{key:"read",value:function(){var a=this,e,n,q,r,v,y,D,E,I,K,P,N,aa,m,t;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return e=a.componentName,u.yield(a.worldName,2);case 2:n=u.yieldResult;
if(q=pd.Path([n,a.componentName]).get(pd.resolvedMasters))return u.return(q);r=pd.resource(System.baseURL).join("components_cache").join(n).join(e+".json");return"undefined"===typeof pd.fetchedMasters[r.url]?(y=pd.promise.deferred(),v=y.resolve,pd.fetchedMasters[r.url]=y.promise,u.yield(a.localWorldName(),6)):u.yield(pd.fetchedMasters[r.url],5);case 5:q=u.yieldResult;u.jumpTo(4);break;case 6:if(u.yieldResult==n){q="undefined"!==typeof $world&&$world.localComponents.find(function(B){return B.name==
e});if(!q)throw Error('Master component "'+e+'" can not be found in "'+n+'"');v(q);u.jumpTo(4);break}return u.yield(r.exists(),8);case 8:if(!u.yieldResult){v(null);u.jumpTo(4);break}pd.worldToUrl[n]=pd.resource(System.baseURL).join("worlds/load").withQuery({file:"lively.morphic/styleguides/"+n+".json"}).url;return u.yield(r.readJson(),10);case 10:return D=u.yieldResult,u.yield(pd.loadPackagesAndModulesOfSnapshot(D),11);case 11:return q=pd.deserializeMorph(D),u.yield(a.resolveComponent(q),12);case 12:v(q);
case 4:if(q)return u.return(q);pd.fetchedSnapshots[n]||(console.log("scheduling fetch of",n),I=pd.promise.deferred(),E=I.resolve,pd.fetchedSnapshots[n]=I.promise);return E?(P=pd.MorphicDB.default,u.yield(P.fetchCommit("world",n),16)):u.yield(pd.fetchedSnapshots[n],15);case 15:K=u.yieldResult;u.jumpTo(14);break;case 16:if(u.yieldResult)return u.yield(P.fetchSnapshot("world",n),22);N=pd.resource(System.baseURL).join("lively.morphic/styleguides").join(n+".json");return u.yield(N.exists(),19);case 19:if(!u.yieldResult){E(null);
u.jumpTo(18);break}return u.yield(N.readJson(),21);case 21:K=u.yieldResult;pd.worldToUrl[n]=pd.resource(System.baseURL).join("worlds/load").withQuery({file:"lively.morphic/styleguides/"+n+".json"}).url;u.jumpTo(18);break;case 22:K=u.yieldResult,pd.worldToUrl[n]=pd.resource(System.baseURL).join("worlds/load").withQuery({name:n}).url;case 18:return pd.ensureAbsoluteComponentRefs({snapshotAndPackages:K,localComponents:[],localWorldName:a.worldName}),u.yield(pd.loadPackagesAndModulesOfSnapshot(K),23);
case 23:Object.values(K.snapshot).filter(function(B){return B.props.master}).forEach(function(B){var A=B.props.master.value;pd.obj.isString(A)&&(B.props.master.value=A.split("$world").join(a.worldName))}),E(K);case 14:aa=new pd.ObjectPool(pd.normalizeOptions({plugins:[new pd.StyleguidePlugin].concat($jscomp.arrayFromIterable(pd.allPlugins))}));m=$jscomp.makeIterator(Object.entries(K.snapshot).find(function(B){B=$jscomp.makeIterator(B);B.next();B=B.next().value;return pd.Path("props.isComponent.value").get(B)&&
pd.Path("props.name.value").get(B)==e})||[]);t=m.next().value;if(!t)throw Error('Master component "'+e+'" can not be found in "'+n+'"');q=aa.resolveFromSnapshotAndId(Object.assign({},K,{id:t}));return u.yield(a.resolveComponent(q),24);case 24:return u.return(u.yieldResult)}})}},{key:"resolveComponent",value:function(a){var e=this,n,q,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){switch(D.nextAddress){case 1:n=e.componentName;pd.resolvedMasters[e.worldName]?pd.resolvedMasters[e.worldName][n]=
a:(q={},pd.resolvedMasters[e.worldName]=(q[n]=a,q));a._resourceHandle=e;if(!a._pool||!a._pool.mastersInSubHierarchy){D.jumpTo(2);break}r=$jscomp.makeIterator(a._pool.mastersInSubHierarchy);v=r.next();case 3:if(v.done){D.jumpTo(5);break}y=v.value;return D.yield(y.applyIfNeeded(!0),6);case 6:y.derivedMorph.ownerChain().includes(a)||y.derivedMorph.requestMasterStyling();v=r.next();D.jumpTo(3);break;case 5:delete a._pool;case 2:return D.return(a)}})}},{key:"write",value:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){throw Error("Master Components can not be written to!");
})}},{key:"exists",value:function(){var a=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){e="undefined"!==typeof $world&&$world.localComponents.find(function(q){return q.name==a.morphName});return n.return(e&&e.isComponent)})}},{key:"remove",value:function(){var a=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(e="undefined"!==typeof $world&&$world.localComponents.find(function(q){return q.name==a.morphName}))e.isComponent=!1;return n.return(!0)})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleGuideResource"}}],d,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:33803,end:41360})}(pd.Resource);pd.StyleGuideResource=LC;pd.StyleGuideResource=LC;pd.StyleGuideResource=LC;var wK={name:"styleguide",matches:function(b){return b.match(pd.styleGuideURLRe)},
resourceClass:pd.StyleGuideResource};pd.resourceExtension=wK;pd.resourceExtension=wK;pd.resourceExtension=wK;pd.registerExtension(pd.resourceExtension);var Pm=lively.FreezerRuntime.recorderFor("lively.modules/src/hooks.js");Pm.install=Ss;Pm.remove=Yu;Pm.isInstalled=Ts;Pm.arr=cf;Pm.fun=ik;Pm.install=Ss;Pm.install=Ss;Pm.remove=Yu;Pm.remove=Yu;Pm.isInstalled=Ts;Pm.isInstalled=Ts;var xK=lively.FreezerRuntime.recorderFor("lively.modules/src/cycle-breaker.js");xK.classHolder={};var Mr=xK.classHolder;xK.classHolder=
Mr;xK.classHolder=Mr;var sr=lively.FreezerRuntime.recorderFor("lively.modules/src/dependencies.js");sr.computeRequireMap=hB;sr.graph=wr;sr.arr=cf;sr.obj=xf;sr.loadedModules=jH;sr.computeRequireMap=hB;sr.computeRequireMap=hB;var $l=lively.FreezerRuntime.recorderFor("lively.modules/src/import-export.js");$l.scheduleModuleExportsChange=iB;$l.runScheduledExportChanges=MG;$l.clearPendingModuleExportChanges=function(b,d){delete b.get("@lively-env").pendingExportChanges[d]};$l.updateModuleExports=function(b,
d,h){var a=b.debug;$l.module(b,d).updateRecord(function(e){var n=[],q=[];Object.keys(h).forEach(function(K){var P=h[K];a&&console.log("[lively.vm es6 updateModuleExports] %s export %s = %s",d,K,String(P).slice(0,30).replace(/\n/g,"")+"...");var N=!(K in e.exports);N&&(e.__lively_modules__.evalOnlyExport[K]=!0);e.exports[K]=P;N?n.push(K):q.push(K)});if(n.length){var r=b.get(d);Object.isFrozen(r)?(console.warn("[lively.vm es6 updateModuleExports] Since module %s is frozen a new module object was installed in the system. Note that only(!) exisiting module bindings are updated. New exports that were added will only be available in already loaded modules after those are reloaded!",
d),b.set(d,b.newModule(e.exports))):(a&&console.log("[lively.vm es6 updateModuleExports] adding new exports to %s",d),n.forEach(function(K){Object.defineProperty(r,K,{configurable:!1,enumerable:!0,get:function(){return e.exports[K]},set:function(){throw Error("exports cannot be changed from the outside");}})}))}if(q.length){a&&console.log("[lively.vm es6 updateModuleExports] updating %s dependents of %s",e.importers.length,d);for(var v=0,y=e.importers.length;v<y;v++){var D=e.importers[v];if(!D.locked){var E;
if(D.dependencies.some(function(K,P){E=P;return K&&K.name===e.name})){if(a){var I=$l.module(b,D.name);console.log("[lively.vm es6 updateModuleExports] calling setters of "+I.package().name+"/"+I.pathInPackage())}$l.module(b,D.name).evaluationStart();D.setters[E](e.exports);$l.module(b,D.name).evaluationEnd()}}}}})};$l.module=$u;$l.scheduleModuleExportsChange=iB;$l.scheduleModuleExportsChange=iB;$l.runScheduledExportChanges=MG;$l.runScheduledExportChanges=MG;var bj=lively.FreezerRuntime.recorderFor("lively.modules/src/change.js");
bj.moduleSourceChange=jB;bj.moduleSourceChangeEsm=function(b,d,h,a){var e,n,q,r,v,y,D,E,I,K,P,N,aa,m,t;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return e=b.debug,n={status:"loading",source:h,name:d,address:d,linkSets:[],dependencies:[],metadata:{format:"esm"}},u.yield(bj.instrumentSourceOfEsmModuleLoad(b,n),2);case 2:q=u.yieldResult,r=function(B,A){return bj.scheduleModuleExportsChange(b,n.name,B,A,!0)},v=q.declare(r),e&&console.log("[lively.vm es6] sourceChange of %s with deps",
n.name,q.localDeps),y=[],D=$jscomp.makeIterator(q.localDeps),E=D.next();case 3:if(E.done){u.jumpTo(5);break}I=E.value;return u.yield(b.normalize(I,n.name),6);case 6:return K=u.yieldResult,P=bj.classHolder.module(b,K),u.yield(P.load(),7);case 7:N=u.yieldResult;y.push({name:I,fullname:K,module:P,exports:N});E=D.next();u.jumpTo(3);break;case 5:if(aa=b.loads&&b.loads[n.name])aa.deps=y.map(function(B){return B.name}),aa.depMap=y.reduce(function(B,A){B[A.name]=A.fullname;return B},{}),aa.metadata&&aa.metadata.entry&&
(aa.metadata.entry.deps=aa.deps,aa.metadata.entry.normalizedDeps=y.map(function(B){return B.fullname}),aa.metadata.entry.declare=q.declare);m=bj.classHolder.module(b,n.name);t=m.record();y.forEach(function(B,A){return m.addDependencyToModuleRecord(B.module,v.setters[A])});t&&(t.execute=v.execute);y.forEach(function(B,A){return v.setters[A](B.exports)});return u.return(v.execute())}})};bj.moduleSourceChangeGlobal=function(b,d,h,a){var e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return e={status:"loading",source:h,name:d,address:d,linkSets:[],dependencies:[],metadata:{format:"global"}},b.get(d)?r.jumpTo(2):r.yield(b.import(d),2);if(4!=r.nextAddress)return r.yield(bj.instrumentSourceOfGlobalModuleLoad(b,e),4);n=r.yieldResult;e.source=n.translated;q=bj.doInstantiateGlobalModule(b,e);b.delete(d);b.set(q.name,q.esModule);return r.return(q.module)})};bj.doInstantiateGlobalModule=function(b,d){var h=bj.__createEntry();h.name=d.name;h.esmExports=!0;d.metadata.entry=
h;h.deps=[];for(var a in d.metadata.globals){var e=d.metadata.globals[a];e&&h.deps.push(e)}h.execute=function(n,q,r){(q=(q=bj.classHolder.module(b,r.id).metadata())&&q.entry&&q.entry.module&&q.entry.module.exports)&&Object.keys(q).forEach(function(D){try{delete b.global[D]}catch(E){console.warn('[lively.modules] executeGlobalModule: Cannot delete global["'+D+'"]')}});if(d.metadata.globals){var v={};for(var y in d.metadata.globals)d.metadata.globals[y]&&(v[y]=n(d.metadata.globals[y]))}if(n=d.metadata.exports)d.source+=
'\nSystem.global["'+n+'"] = '+n+";";r=b.get("@@global-helpers").prepareGlobal(r.id,n,v);bj.__evaluateGlobalLoadSource(b,d);return r()};return bj.runExecuteOfGlobalModule(b,h)};bj.__createEntry=function(){return{name:null,deps:null,originalIndices:null,declare:null,execute:null,executingRequire:!1,declarative:!1,normalizedDeps:null,groupIndex:null,evaluated:!1,module:null,esModule:null,esmExports:!1}};bj.__evaluateGlobalLoadSource=function(b,d){function h(){0==--e&&(n.System=n.SystemJS=a)}var a,e=
0,n=b.global;return function(q){try{0==e++&&(a=n.System),n.System=n.SystemJS=this,(0,eval)(q.source),h()}catch(r){throw h(),Error("Error evaluating "+q.address+":\n"+r.stack);}}.call(b,d)};bj.runExecuteOfGlobalModule=function(b,d){var h={},a=d.module={exports:h,id:d.name};d.evaluated=!0;if(h=d.execute.call(b.global,function(e){var n=d.deps.find(function(q){return q===e});if(n=n&&b.get(d.normalizedDeps[d.deps.indexOf(n)])||b.get(b.decanonicalize(e,d.name)))return n;throw Error("Module "+e+" not declared as a dependency of "+
d.name);},h,a))a.exports=h;h=a.exports;a=b.get("@system-env").constructor;d.esModule=h&&(h.__esModule||h instanceof a)?h:d.esmExports&&h!==b.global?b.newModule(h):{default:h};return d};bj.arr=cf;bj.emit=Rq;bj.instrumentSourceOfEsmModuleLoad=$G;bj.instrumentSourceOfGlobalModuleLoad=aH;bj.scheduleModuleExportsChange=iB;bj.classHolder=Mr;bj.moduleSourceChange=jB;bj.moduleSourceChange=jB;var ql=lively.FreezerRuntime.recorderFor("lively.modules/src/url-helpers.js");ql.isJsFile=KQ;ql.asDir=LQ;ql.isURL=
Zu;ql.urlResolve=NG;ql.string=Ng;ql.isJsFile=KQ;ql.isJsFile=KQ;ql.asDir=LQ;ql.asDir=LQ;var MC=ql.string.joinPath;ql.join=MC;ql.join=MC;ql.join=MC;ql.isURL=Zu;ql.isURL=Zu;ql.urlResolve=NG;ql.urlResolve=NG;var zo=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/configuration.js");zo.arr=cf;zo.obj=xf;zo.isURL=Zu;zo.installHook=Ss;zo.isHookInstalled=Ts;var Aq=function(b){this.pkg=b};Aq.prototype.applyConfig=function(b){var d=this.System,h=this.packageURL,a=this.pkg;b=zo.obj.deepMerge(a.config,
b);var e=b.name||h.split("/").slice(-1)[0],n=b.version,q=b.systemjs||{},r=b.lively,v=b.main||"index.js",y={},D={};d.config({map:(y[e]=h,y),packages:(D[h]=Object.assign({},q,{meta:Object.assign({"package.json":{format:"json"}},q.meta),configured:!0}),D)});d.packages[h].configured=!0;d=d.getConfig().packages[h]||{};d.map||(d.map={});q&&(r&&r.main?v=r.main:q.main&&(v=q.main),this.applySystemJSConfig(q));v.match(/\.[^\/\.]+/)||(v+=".js");d.main=v;a.version=n;a.config=b;a._name=e;a.mergeWithConfig(d);
return r?this.applyLivelyConfig(r):{subPackages:[]}};Aq.prototype.applySystemJSConfig=function(b){var d=this.System;b.packageConfigPaths&&d.config({packageConfigPaths:zo.arr.uniq(d.packageConfigPaths.concat(b.packageConfigPaths))});b.packages&&d.config({packages:b.packages});b.globalmap&&d.config({map:b.globalmap});b.babelOptions&&d.config({babelOptions:b.babelOptions});b.meta&&d.config({meta:b.meta})};Aq.prototype.applyLivelyConfig=function(b){this.applyLivelyConfigMeta(b);this.applyLivelyConfigHooks(b);
this.applyLivelyConfigBundles(b)};Aq.prototype.applyLivelyConfigHooks=function(b){var d=this;(b.hooks||[]).forEach(function(h){try{var a=eval("("+h.source+")");a.name&&zo.isHookInstalled(d.System,h.target,a.name)||zo.installHook(d.System,h.target,a)}catch(e){console.error("Error installing hook for %s: %s",d.packageURL,e,h)}})};Aq.prototype.applyLivelyConfigBundles=function(b){var d=this;if(!b.bundles)return Promise.resolve();var h=Object.keys(b.bundles).reduce(function(a,e){var n=d.packageURL+"/"+
e;e=b.bundles[e].map(function(q){return d.System.decanonicalize(q,d.packageURL+"/")});a[n]=e;return a},{});this.System.config({bundles:h});return Promise.resolve()};Aq.prototype.applyLivelyConfigMeta=function(b){if(b.meta){var d=this.System.getConfig().packages[this.packageURL]||{},h={},a={meta:{},packages:(h[this.packageURL]=d,h)};Object.keys(b.meta).forEach(function(e){var n=b.meta[e];zo.isURL(e)?a.meta[e]=n:(d.meta||(d.meta={}),d.meta[e]=n)});this.System.config(a)}};$jscomp.global.Object.defineProperties(Aq.prototype,
{System:{configurable:!0,enumerable:!0,get:function(){return this.pkg.System}},packageURL:{configurable:!0,enumerable:!0,get:function(){return this.pkg.url}}});zo.PackageConfiguration=Aq;zo.default=Aq;var Ce=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package.js");Ce.normalizePackageURL=function(b,d,h){h=void 0===h?[]:h;if(h.some(function(a){return a===d}))return d;b=b.decanonicalize(d.replace(/[\/]+$/,"")+"/");if(!Ce.isURL(b))throw Error("Strange package URL: "+b+" is not a valid URL");
b.match(/\.js/)&&(b=-1<b.indexOf(b+".js")?b.replace(/\.js$/,""):b.split("/").slice(0,-1).join("/"));b.match(/\.js$/)&&console.warn("packageURL is expected to point to a directory but seems to be a .js file: "+b);return String(b).replace(/\/$/,"")};Ce.lookupPackage=OG;Ce.ensurePackage=PG;Ce.getPackage=kB;Ce.applyConfig=QG;Ce.importPackage=RG;Ce.removePackage=SG;Ce.reloadPackage=TG;Ce.registerPackage=UG;Ce.getPackageSpecs=VG;Ce.arr=cf;Ce.promise=bg;Ce.obj=xf;Ce.emit=Rq;Ce.module=$u;Ce.resource=Uc;Ce.PackageConfiguration=
Aq;Ce.isURL=Zu;Ce.join=MC;Ce.classHolder=Mr;var ki=function(b,d,h,a,e){e=void 0===e?{}:e;this.System=b;this.url=d;this.registerProcess=null;this.map={};this.setConfig(e)};ki.allPackages=function(b){return Ce.obj.values(Ce.classHolder.PackageRegistry.ofSystem(b).byURL)};ki.allPackageURLs=function(b){return Ce.classHolder.PackageRegistry.ofSystem(b).allPackageURLs()};ki.forModule=function(b,d){return this.forModuleId(b,d.id)};ki.forModuleId=function(b,d){return(d=Ce.classHolder.ModulePackageMapping.forSystem(b).getPackageURLForModuleId(d))?
Ce.getPackage(b,d,!0):null};ki.fromJSON=function(b,d){return(new Ce.Package(b)).fromJSON(d)};ki.prototype.setConfig=function(b){this._name=b.name;this.version=b.version;this.dependencies=b.dependencies||{};this.devDependencies=b.devDependencies||{};this.main=b.main||"index.js";this.systemjs=b.systemjs;this.lively=b.lively};ki.prototype.toJSON=function(){var b=this.System,d=Ce.obj.select(this,"url _name version map dependencies devDependencies main systemjs lively".split(" "));d.url.startsWith(b.baseURL)&&
(d.url=d.url.slice(b.baseURL.length).replace(/^\//,""));return d};ki.prototype.fromJSON=function(b){var d=this.System;this.url=b.url;this._name=b._name;this.version=b.version;this.map=b.map||{};this.main=b.main;this.dependencies=b.dependencies||{};this.devDependencies=b.devDependencies||{};this.systemjs=b.systemjs;this.lively=b.lively;Ce.isURL(this.url)||(this.url=Ce.join(d.baseURL,this.url));this.registerWithConfig();return this};ki.prototype.asSpec=function(){return Object.assign({},Ce.obj.select(this,
"name main map meta url address version lively".split(" ")),{modules:this.modules().map(function(b){return{name:b.id,deps:b.directRequirements().map(function(d){return d.id})}})})};ki.prototype.path=function(){var b=this.System.baseURL;return 0===this.url.indexOf(b)?this.url.slice(b.length):this.url};ki.prototype.modules=function(){var b=this.url,d=this.System;return Ce.classHolder.ModulePackageMapping.forSystem(d).getModuleIdsForPackageURL(b).map(function(h){return Ce.module(d,h)})};ki.prototype.resources=
function(b,d){d=void 0===d?[".git","node_modules",".module_cache","lively.next-node_modules"]:d;var h=this,a,e,n,q,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return a=h,e=a.System,n=a.url,q=Ce.Package.allPackageURLs(e),r=q.filter(function(I){return I!==n&&!n.startsWith(I)}),E.yield(Ce.resource(n).dirList("infinity",{exclude:d}),2);v=E.yieldResult;y=v.filter(function(I){return!I.isDirectory()&&!r.some(function(K){return I.url.startsWith(K)})}).map(function(I){return I.url});
D=Ce.arr.pluck(h.modules(),"id");b&&(y=y.filter(b));return E.return(y.map(function(I){var K=I.replace(n,"").replace(/^\//,"");return{isLoaded:D.includes(I),url:I,nameInPackage:K,package:h}}))})};ki.prototype.hasResource=function(b){var d=this.url;return(b.startsWith(d)?Ce.resource(b):Ce.resource(d).join(b)).exists()};ki.prototype.toString=function(){return"Package("+this.name+" - "+this.path()+"/)"};ki.prototype.mergeWithConfig=function(b){var d=b=Object.assign({},b),h=d.name;d=d.map;h&&(delete b.name,
this._name=h);d&&(delete b.map,Object.assign(this.map,d));Object.assign(this,b);return this};ki.prototype.addMapping=function(b,d){this.map[b]=d;var h={},a={};this.System.config({packages:(a[this.url]={map:(h[b]=d,h)},a)})};ki.prototype.tryToLoadPackageConfig=function(){var b=this,d,h,a,e,n,q,r,v,y,D,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:d=b;h=d.System;a=d.url;e=a+"/package.json";n={};q={};h.config({meta:(n[e]={format:"json"},n),packages:(q[a]=
{meta:{"package.json":{format:"json"}}},q)});h.debug&&console.log("[lively.modules package reading config] %s",e);I.setCatchFinallyBlocks(2);if(r=h.get(e)){I.jumpTo(4);break}return I.yield(h.import(e),5);case 5:r=I.yieldResult;case 4:return v=r,y=[].concat($jscomp.arrayFromIterable(h.packageConfigPaths)),Ce.arr.pushIfNotIncluded(y,e),h.config({packageConfigPaths:y}),I.return(v);case 2:return D=I.enterCatchBlock(),console.log("[lively.modules package] Unable loading package config %s for package: ",
e,D),delete h.meta[e],E=a.split("/").slice(-1)[0],I.return({name:E})}})};ki.prototype.import=function(){var b=this,d,h,a,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(b.register(),2);case 2:return d=b,h=d.url,a=d.System,e=Ce,n=e.module,q=a,y.yield(a.normalize(h),3);case 3:return r=n.call(e,q,y.yieldResult),y.yield(a.import(r.id),4);case 4:return v=y.yieldResult,y.yield(Ce.promise.waitFor(1E3,function(){return r.isLoaded()}),5);
case 5:return y.return(v)}})};ki.prototype.isRegistering=function(){return!!this.registerProcess};ki.prototype.register=function(b){var d=this,h,a,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(d.isRegistering())return y.return(d.registerProcess.promise);h=d;a=h.System;e=h.url;d.registerProcess=Ce.promise.deferred();n=d.registerProcess.promise;a.debug&&console.log("[lively.modules package register] %s",e);y.setCatchFinallyBlocks(2,3);if(q=
b){y.jumpTo(5);break}return y.yield(d.tryToLoadPackageConfig(),6);case 6:q=y.yieldResult;case 5:r=q,d.registerWithConfig(r),d.registerProcess.resolve(r);case 3:y.enterFinallyBlock();delete d.registerProcess;y.leaveFinallyBlock(4);break;case 2:throw v=y.enterCatchBlock(),d.registerProcess.reject(v),v;case 4:return y.return(n)}})};ki.prototype.updateConfig=function(b){b=Object.assign({},this.runtimeConfig,{},b);var d=this.name,h=this.version,a=b,e=a.name;a=a.version;(new Ce.PackageConfiguration(this)).applyConfig(b);
if(d!==b.name||h!==b.version)console.log("[lively.modules] Updating registry "+d+"@"+h+" => "+e+"@"+a),Ce.classHolder.PackageRegistry.ofSystem(this.System).updateNameAndVersionOf(this,d,h,e,a)};ki.prototype.registerWithConfig=function(b){b=void 0===b?this.runtimeConfig:b;var d=this.System,h=this.url,a=(new Ce.PackageConfiguration(this)).applyConfig(b),e=Ce.join(h,"package.json");d.get(e)||d.set(e,d.newModule(Object.assign({},b,{default:b})));Ce.emit("lively.modules/packageregistered",{package:h},
Date.now(),d);return a};ki.prototype.remove=function(b){b=Object.assign({forgetEnv:!0,forgetDeps:!1,unloadModules:!0},b);var d=this.System,h=this.url;h=h.replace(/\/$/,"");b.unloadModules&&this.modules().forEach(function(r){return r.unload(b)});Ce.classHolder.PackageRegistry.ofSystem(d).removePackage(this);var a=d.getConfig(),e=h+"/package.json";d.delete(String(e));Ce.arr.remove(a.packageConfigPaths||[],e);var n={},q={};d.config({meta:(n[e]={},n),packages:(q[h]={},q),packageConfigPaths:a.packageConfigPaths});
delete d.packages[h];Ce.emit("lively.modules/packageremoved",{package:this.url},Date.now(),d)};ki.prototype.reload=function(b){var d=this.url,h=Ce.classHolder.PackageRegistry.ofSystem(this.System),a=h.coversDirectory(d);this.remove(b);b={};h.addPackageAt(d,a||"devPackageDirs",(b[d]=this,b));return this.import()};ki.prototype.fork=function(b,d){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?(d||(d=Ce.resource(h.url).join("../"+b).withRelativePartsResolved().url),
a.yield(h.changeAddress(d,b,!1),2)):a.return(a.yieldResult)})};ki.prototype.rename=function(b){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?(h=Ce.resource(d.url).join("../"+b).withRelativePartsResolved().url,a.yield(d.changeAddress(h,b,!0),2)):a.return(a.yieldResult)})};ki.prototype.changeAddress=function(b,d,h){d=void 0===d?null:d;h=void 0===h?!0:h;var a=this,e,n,q,r,v,y,D,E,I,K,P,N,aa,m,t,u,B,A,H,F,L,U,T,Y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wa){switch(wa.nextAddress){case 1:return b=
b.replace(/\/?/,""),e=a,n=e.System,q=e.url,wa.yield(a.runtimeConfig,2);case 2:return r=wa.yieldResult,v=Ce.resource(q).asDirectory(),y=new Ce.Package(n,b),wa.yield(Ce.resource(b).asDirectory(),3);case 3:return D=wa.yieldResult,r.name=d||a.name,E=Ce.classHolder.PackageRegistry.ofSystem(n),I=E.coversDirectory(q),Ce.classHolder.ModulePackageMapping.forSystem(n).clearCache(),n.packages[q]&&(n.packages[b]=n.packages[q],h&&delete n.packages[q]),Object.assign(y,Ce.obj.select(a,["_name","map","config"])),
wa.yield(D.ensureExistance(),4);case 4:return wa.yield(a.resources(void 0,[]),5);case 5:K=wa.yieldResult.map(function(Ga){return Ga.url}),P=a.modules(),N=$jscomp.makeIterator(P),aa=N.next();case 6:if(aa.done){wa.jumpTo(8);break}m=aa.value;t=D.join(m.pathInPackage()).url;return h?wa.yield(m.renameTo(t),10):wa.yield(m.copyTo(t),10);case 10:u=K.indexOf(m.id);-1<u&&K.splice(u,1);aa=N.next();wa.jumpTo(6);break;case 8:B=$jscomp.makeIterator(K),A=B.next();case 13:if(A.done){if(!h){wa.jumpTo(17);break}return wa.yield(a.remove({forgetEnv:!0,
forgetDeps:!1}),18)}H=A.value;F=Ce.resource(H);L=F.relativePathFrom(v);return wa.yield(F.copyTo(D.join(L)),14);case 14:A=B.next();wa.jumpTo(13);break;case 18:return wa.yield(v.remove(),17);case 17:if(!d){wa.jumpTo(20);break}y.name=d;y.config.name=d;U=Ce.resource(b).join("package.json");wa.setCatchFinallyBlocks(21);return wa.yield(U.exists(),23);case 23:if(!wa.yieldResult){wa.jumpTo(24);break}return wa.yield(U.readJson(),25);case 25:T=wa.yieldResult;if(T.name!==a.name){wa.jumpTo(26);break}T.name=d;
return wa.yield(U.writeJson(T,!0),26);case 26:(Y=n.get(U.url))&&n.set(U.url,n.newModule(Object.assign({},Y,{name:d})));case 24:wa.leaveTryBlock(20);break;case 21:wa.enterCatchBlock();case 20:return I=I||"individualPackageDirs","individualPackageDirs"!==I&&"devPackageDirs"!==I||E._addPackageDir(b,I,!0),E._addPackageWithConfig(y,r,b,I),E.resetByURL(),E._updateLatestPackages(),wa.return(y)}})};ki.prototype.search=function(b,d){d=void 0===d?{}:d;var h=this,a,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==
n.nextAddress)return d.includeUnloaded?n.yield(h.resources(function(q){return q.endsWith(".js")},[".git","node_modules","dist",".module_cache","lively.next-node_modules"]),3):(a=h.modules().filter(function(q){return q.isLoaded()}),n.jumpTo(2));2!=n.nextAddress&&(a=n.yieldResult.map(function(q){return Ce.module(h.System,q.url)}));e=a;return n.return(Promise.all(e.map(function(q){return q.search(b,d).catch(function(r){console.error("Error searching module "+q.name+":\n"+r.stack);return[]})})).then(function(q){return Ce.arr.flatten(q,
1)}))})};$jscomp.global.Object.defineProperties(ki.prototype,{isPackage:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){if(this._name)return this._name;var b=this.System.get(this.url+"/package.json");return b&&b.name?b.name:Ce.arr.last(this.url.replace(/[\/]+$/,"").split("/"))},set:function(b){return this._name=b}},nameAndVersion:{configurable:!0,enumerable:!0,get:function(){return this.name+"@"+this.version}},address:{configurable:!0,enumerable:!0,
get:function(){return this.url},set:function(b){return this.url=b}},runtimeConfig:{configurable:!0,enumerable:!0,get:function(){var b=this.main,d=this.systemjs,h=this.lively,a={name:this.name,version:this.version,dependencies:this.dependencies||{},devDependencies:this.devDependencies||{}};b&&(a.main=b);d&&(a.systemjs=d);h&&(a.lively=h);return a}}});Ce.Package=ki;Ce.ensurePackage=PG;Ce.ensurePackage=PG;Ce.importPackage=RG;Ce.importPackage=RG;Ce.removePackage=SG;Ce.removePackage=SG;Ce.reloadPackage=
TG;Ce.reloadPackage=TG;Ce.registerPackage=UG;Ce.registerPackage=UG;Ce.getPackage=kB;Ce.getPackage=kB;Ce.lookupPackage=OG;Ce.lookupPackage=OG;Ce.applyConfig=QG;Ce.applyConfig=QG;Ce.getPackageSpecs=VG;Ce.getPackageSpecs=VG;Ce.Package=ki;Ce.Package=ki;var ed=lively.FreezerRuntime.recorderFor("lively.classes/class-to-function-transform.js");ed.isFunctionNode=function(b){return"ArrowFunctionExpression"===b.type||"FunctionExpression"===b.type||"FunctionDeclaration"===b.type};ed.ensureIdentifier=function(b){return b.replace(ed.firstIdRe,
"_").replace(ed.trailingIdRe,"_")};ed.constructorTemplate=function(b){return ed.funcExpr({id:b?ed.id(b):null},["__first_arg__"],ed.ifStmt(ed.binaryExpr(ed.id("__first_arg__"),"&&",ed.member("__first_arg__",ed.funcCall(ed.member("Symbol","for"),ed.literal("lively-instance-restorer")),!0)),ed.block(),ed.block(ed.exprStmt(ed.funcCall(ed.member(ed.member("this",ed.funcCall(ed.member("Symbol","for"),ed.literal("lively-instance-initialize")),!0),"apply"),ed.id("this"),ed.id("arguments"))))))};ed.replaceSuper=
function(b,d,h,a){console.assert("Super"===b.type);(d=d.currentMethod)||console.warn("[lively.classes] Trying to transform es6 class but got super call outside a method! "+ed.stringify(b)+" in "+h.join("."));a=$jscomp.makeIterator(h.slice(-2));h=a.next().value;a=a.next().value;return"callee"===h&&"object"===a||"callee"===a?b:d&&"static"===d[ed.methodKindSymbol]?ed.funcCall(ed.member("Object","getPrototypeOf"),ed.id(ed.tempLivelyClassVar)):ed.funcCall(ed.member("Object","getPrototypeOf"),ed.member(ed.id(ed.tempLivelyClassVar),
"prototype"))};ed.replaceSuperMethodCall=function(b,d,h,a){console.assert("CallExpression"===b.type);console.assert("Super"===b.callee.object.type);return ed.funcCall.apply(ed,[ed.member(ed.funcCall(ed.member(a.functionNode,"_get"),ed.replaceSuper(b.callee.object,d,h.concat(["callee","object"]),a),ed.literal(b.callee.property.value||b.callee.property.name),ed.id("this")),"call"),ed.id("this")].concat($jscomp.arrayFromIterable(b.arguments)))};ed.replaceDirectSuperCall=function(b,d,h,a){console.assert("CallExpression"===
b.type);console.assert("Super"===b.callee.type);return ed.funcCall.apply(ed,[ed.member(ed.funcCall(ed.member(a.functionNode,"_get"),ed.replaceSuper(b.callee,d,h.concat(["callee"]),a),ed.funcCall(ed.member("Symbol","for"),ed.literal("lively-instance-initialize")),ed.id("this")),"call"),ed.id("this")].concat($jscomp.arrayFromIterable(b.arguments)))};ed.replaceSuperGetter=function(b,d,h,a){console.assert("MemberExpression"===b.type);console.assert("Super"===b.object.type);return ed.funcCall(ed.member(a.functionNode,
"_get"),ed.replaceSuper(b.object,d,h.concat(["object"]),a),ed.literal(b.property.value||b.property.name),ed.id("this"))};ed.replaceSuperSetter=function(b,d,h,a){console.assert("AssignmentExpression"===b.type);console.assert("Super"===b.left.object.type);return ed.funcCall(ed.member(a.functionNode,"_set"),ed.replaceSuper(b.left.object,d,h.concat(["left","object"]),a),ed.literal(b.left.property.value||b.left.property.name),b.right,ed.id("this"))};ed.replaceClass=function(b,d,h,a){console.assert("ClassDeclaration"===
b.type||"ClassExpression"===b.type);var e=b.body.body,n=b.superClass;h=b.id;var q=b.type,r=b.start,v=b.end,y=void 0===a.addClassNameGetter?!0:a.addClassNameGetter,D=ed.id("undefined"),E=ed.id("undefined"),I=h?h.name:"anonymous_class",K=a.evalId,P=a.sourceAccessorName;b=b["x-lively-object-meta"]||{start:r,end:v};y=e.reduce(function(t,u){var B=u.key,A=u.kind,H=u.value,F=u.static;"Literal"!==B.type&&"Identifier"!==B.type&&console.warn("Unexpected key in classToFunctionTransform! "+JSON.stringify(B));
if("method"===A){A=ed.id(I+"_"+ed.ensureIdentifier(B.name||B.value||ed.Path("property.name").get(B))+"_");u={};H=["key",ed.literal(B.name||B.value||ed.Path("property.name").get(B)),"value",Object.assign({},H,(u.id=A,u[ed.methodKindSymbol]=F?"static":"proto",u))];var L=ed.objectLiteral(H)}else"get"===A||"set"===A?(u={},L=ed.objectLiteral(["key",ed.literal(B.name||B.value||ed.Path("property.name").get(B)),A,Object.assign({},H,(u.id=ed.id(A),u[ed.methodKindSymbol]=F?"static":"proto",u))])):"constructor"===
A?(B={},H=["key",ed.funcCall(ed.member("Symbol","for"),ed.literal("lively-instance-initialize")),"value",Object.assign({},H,(B.id=ed.id(I+"_initialize_"),B[ed.methodKindSymbol]="proto",B))],L=ed.objectLiteral(H)):console.warn("[lively.classes] classToFunctionTransform encountered unknown class property with kind "+A+", ignoring it, "+JSON.stringify(u));(F?t.clazz:t.inst).push(L);return t},{inst:[],clazz:y?[ed.parse('({ key: Symbol.for("__LivelyClassName__"), get: function get() { return "'+I+'"; } })').body[0].expression]:
[]});e=y.inst;y=y.clazz;e.length&&(D={type:"ArrayExpression",elements:e});y.length&&(E={type:"ArrayExpression",elements:y});e=a.scope;if(n&&a.currentModuleAccessor)if(a.classHolder===n.object){var N=n;var aa=n.property.name}else{var m=e&&e.resolvedRefMap&&e.resolvedRefMap.get(n);m&&m.decl&&e.decls&&e.decls.find(function(t){return $jscomp.makeIterator(t).next().value===m.decl})&&(N=n,aa=n.name)}aa=N?ed.objectLiteral(["referencedAs",ed.literal(aa),"value",N]):n||ed.id("undefined");N=h&&"ClassDeclaration"===
q;n=["start",ed.literal(b.start),"end",ed.literal(b.end)];"undefined"!==typeof K&&n.push("evalId",ed.literal(K));P&&n.push("moduleSource",ed.nodes.id(P));K=ed.objectLiteral(n);D=ed.funcCall(ed.funcExpr({},["superclass"],ed.varDecl(ed.tempLivelyClassHolderVar,d.classHolder),ed.varDecl(ed.tempLivelyClassVar,N?{type:"ConditionalExpression",test:ed.binaryExpr(ed.funcCall(ed.member(ed.tempLivelyClassHolderVar,"hasOwnProperty"),ed.literal(h.name)),"&&",ed.binaryExpr({argument:ed.member(ed.tempLivelyClassHolderVar,
h),operator:"typeof",prefix:!0,type:"UnaryExpression"},"===",ed.literal("function"))),consequent:ed.member(ed.tempLivelyClassHolderVar,h),alternate:ed.assign(ed.member(ed.tempLivelyClassHolderVar,h),ed.constructorTemplate(h.name))}:h?ed.constructorTemplate(h.name):ed.constructorTemplate(null)),ed.returnStmt(ed.funcCall(a.functionNode,ed.id(ed.tempLivelyClassVar),ed.id("superclass"),D,E,ed.id(ed.tempLivelyClassHolderVar),a.currentModuleAccessor||ed.id("undefined"),K))),aa);if("ClassExpression"===q)return D;
q=D;a.declarationWrapper&&d.classHolder===a.classHolder&&(q=ed.funcCall(a.declarationWrapper,ed.literal(h.name),ed.literal("class"),q,a.classHolder,K));q=ed.varDecl(h,q,"var");q[ed.isTransformedClassVarDeclSymbol]=!0;return q};ed.splitExportDefaultWithClass=function(b,d,h,a){return b.declaration&&b.declaration[ed.isTransformedClassVarDeclSymbol]?[b.declaration,{declaration:b.declaration.declarations[0].id,type:"ExportDefaultDeclaration"}]:b};ed.classToFunctionTransform=tr;ed.arr=cf;ed.Path=Eg;ed.parse=
gk;ed.stringify=Yf;ed.query=kp;ed.nodes=Br;ed.Visitor=de;var wn=ed.nodes;ed.assign=wn.assign;ed.member=wn.member;ed.id=wn.id;ed.exprStmt=wn.exprStmt;ed.funcCall=wn.funcCall;ed.literal=wn.literal;ed.objectLiteral=wn.objectLiteral;ed.varDecl=wn.varDecl;ed.funcExpr=wn.funcExpr;ed.returnStmt=wn.returnStmt;ed.binaryExpr=wn.binaryExpr;ed.ifStmt=wn.ifStmt;ed.block=wn.block;ed.firstIdRe=/^[^_a-z]/i;ed.trailingIdRe=/[^_a-z0-9]/ig;ed.isTransformedClassVarDeclSymbol=Symbol();ed.methodKindSymbol=Symbol();ed.tempLivelyClassVar=
"__lively_class__";ed.tempLivelyClassHolderVar="__lively_classholder__";var yK=function(){return ed.Visitor.apply(this,arguments)||this};$jscomp.inherits(yK,ed.Visitor);yK.prototype.accept=function(b,d,h){ed.isFunctionNode(b)&&(d=Object.assign({},d,{classHolder:ed.objectLiteral([]),currentMethod:b[ed.methodKindSymbol]?b:d.currentMethod}));if("ClassExpression"===b.type||"ClassDeclaration"===b.type)b=ed.replaceClass(b,d,h,d.options);"Super"===b.type&&(b=ed.replaceSuper(b,d,h,d.options));"MemberExpression"===
b.type&&b.object&&"Super"===b.object.type&&(b=ed.replaceSuperGetter(b,d,h,d.options));"AssignmentExpression"===b.type&&"MemberExpression"===b.left.type&&"Super"===b.left.object.type&&(b=ed.replaceSuperSetter(b,d,h,d.options));"CallExpression"===b.type&&"Super"===b.callee.type&&(b=ed.replaceDirectSuperCall(b,d,h,d.options));"CallExpression"===b.type&&b.callee.object&&"Super"===b.callee.object.type&&(b=ed.replaceSuperMethodCall(b,d,h,d.options));b=ed.Visitor.prototype.accept.call(this,b,d,h);return"ExportDefaultDeclaration"===
b.type?ed.splitExportDefaultWithClass(b,d,h,d.options):b};yK.run=function(b,d){var h=new this,a=d.classHolder||ed.objectLiteral([]);return h.accept(b,{options:d,classHolder:a},[])};ed.ClassReplaceVisitor=yK;ed.classToFunctionTransform=tr;ed.classToFunctionTransform=tr;var Ty=lively.FreezerRuntime.recorderFor("lively.classes/index.js");Ty.runtime=zy;Ty.classToFunctionTransform=tr;Ty.runtime=zy;Ty.runtime=zy;Ty.classToFunctionTransform=tr;Ty.classToFunctionTransform=tr;var gca=Object.freeze({__proto__:null,
runtime:zy,classToFunctionTransform:tr});Ka("aZ",gca);var ti=lively.FreezerRuntime.recorderFor("lively.modules/src/import-modification.js");ti.arr=cf;ti.Path=Eg;ti.fuzzyParse=Qq;ti.query=kp;ti.stringify=Yf;ti.resource=Uc;var Bq=function(b,d,h,a,e,n,q){this.System=b;this.intoModuleId=d;this.intoPackage=h;this.intoModuleSource=a;this.fromModuleId=e.moduleId;this.importData=e;this.alias=n;this.parsed=q||ti.fuzzyParse(a)};Bq.run=function(b,d,h,a,e,n,q){return(new this(b,d,h,a,e,n,q)).run()};Bq.prototype.run=
function(){var b=this.generateImportStatement(),d=b.standaloneImport,h=b.importedVarName,a=this.existingImportsOfFromModule(),e=a.imports,n=a.importsOfFromModule;a=a.importsOfVar;n=this.importsToBeReused(n,a,b);if(a.length)return{status:"not modified",newSource:this.intoModuleSource,generated:"",importedVarName:"",standaloneImport:d,from:a[0].start,to:a[0].end};if(n.length&&(b=this.modifyExistingImport(n,d)))return b;e=ti.arr.last(e);return this.insertNewImport(n,d,h,e?e.end:0)};Bq.prototype.importsToBeReused=
function(b,d,h){h.isDefault&&(b=b.filter(function(a){return!a.specifiers.some(function(e){return"ImportDefaultSpecifier"==e.type})}));return b};Bq.prototype.generateImportStatement=function(){var b=this.intoModuleId,d=this.fromModuleId,h=this.importData,a=this.intoPackage,e="default"===h.exported,n=this.alias||(e?h.local:h.exported),q=!e&&h.exported!==n;a=a&&a.name;var r=d,v=h.packageName,y=h.pathInPackage;if(h.isMain)r=v;else if(a===v)try{r=ti.resource(d).relativePathFrom(ti.resource(b)),r.startsWith(".")||
(r="./"+r)}catch(D){v&&"no group"!==v&&y&&(r=v+"/"+y)}else v&&"no group"!==v&&y&&(r=v+"/"+y);return{isDefault:e,standaloneImport:e?"import "+n+' from "'+r+'";':"import { "+h.exported+(q?" as "+n:"")+' } from "'+r+'";',importedVarName:n}};Bq.prototype.existingImportsOfFromModule=function(){var b=this.System,d=this.fromModuleId,h=this.intoModuleId,a=this.importData,e=a.exported,n=a.local,q=this.alias,r="default"===e;a=this.parsed.body.filter(function(y){return"ImportDeclaration"===y.type});var v=r?
q||n:q||e;n=a.filter(function(y){if(!y.source||"string"!==typeof y.source.value)return null;y=b.decanonicalize(y.source.value,h);return d===y});q=n.filter(function(y){return(y.specifiers||[]).some(function(D){return r?"ImportDefaultSpecifier"===D.type&&D.local.name===v:ti.Path("imported.name").get(D)===e&&ti.Path("local.name").get(D)===v})});return{imports:a,importsOfFromModule:n,importsOfVar:q}};Bq.prototype.modifyExistingImport=function(b,d){b=ti.arr.flatmap(b,function(v){return v.specifiers||[]});
if(!b.length)return null;b=$jscomp.makeIterator(ti.arr.partition(b,function(v){return"ImportDefaultSpecifier"===v.type}));var h=$jscomp.makeIterator(b.next().value).next().value,a=$jscomp.makeIterator(b.next().value).next().value;b=this.alias;var e=this.intoModuleSource,n=this.importData,q=n.exported;n=n.local;var r="default"===q;r?console.assert(!!a,"no ImportSpecifier found"):console.assert(a||h,"at least one kine of specifier is expected");if(r){h=e.slice(0,a.start).lastIndexOf("{")-1;if(0>h)return null;
a=(b||n)+",";q=e.slice(0,h);e=e.slice(h);q.endsWith(" ")&&q.endsWith("\n")||(a=" "+a);e.startsWith(" ")||(a+=" ");return{status:"modified",newSource:""+q+a+e,generated:a,standaloneImport:d,importedVarName:b||n,from:h,to:h+a.length}}h=a?a.end:h.end;r=(n=b&&b!==q)?q+" as "+b:q;a=a?", "+r:", { "+r+" }";return{status:"modified",newSource:""+e.slice(0,h)+a+e.slice(h),generated:a,standaloneImport:d,importedVarName:n?b:q,from:h,to:h+a.length}};Bq.prototype.insertNewImport=function(b,d,h,a){a=void 0===a?
0:a;b&&b.length&&(a=ti.arr.last(b).end);var e=this.intoModuleSource;b=e.slice(0,a);e=e.slice(a);var n=d;b.length&&!b.endsWith("\n")&&(n="\n"+n);e.length&&!e.startsWith("\n")&&(n+="\n");return{status:"modified",newSource:b+n+e,generated:n,standaloneImport:d,importedVarName:h,from:a,to:a+n.length}};ti.ImportInjector=Bq;var zK=function(){};zK.getGlobals=function(b,d){b=d||ti.fuzzyParse(b,{withComments:!0});d=(d=b.comments?b.comments.find(function(a){return a.isBlock&&a.text.startsWith("global")}):null)?
d.text.replace(/^global\s*/,"").split(",").map(function(a){return a.trim()}).filter(Boolean):[];var h=[].concat($jscomp.arrayFromIterable(d),$jscomp.arrayFromIterable(ti.query.knownGlobals));b=ti.query.findGlobalVarRefs(b,{jslintGlobalComment:!0}).filter(function(a){return!h.includes(a.name)}).map(function(a){return a.name});return ti.arr.compact([].concat($jscomp.arrayFromIterable(d),$jscomp.arrayFromIterable(b)))};zK.run=function(b,d,h){h=h||ti.fuzzyParse(b,{withComments:!0});var a=(h=h.comments?
h.comments.find(function(n){return n.isBlock&&n.text.startsWith("global")}):null)?h.text.replace(/^global\s*/,"").split(",").map(function(n){return n.trim()}).filter(Boolean):[],e=d.filter(function(n){return!a.includes(n)});if(!e.length)return{status:"not modified",newSource:b,generated:"",from:0,to:0};if(!h)return h="/*global "+e.join(",")+"*/\n",{status:"modified",newSource:h+b,generated:h,from:0,to:h.length};d=h.start+2+h.text.length;e=e.join(",");a.length?e=","+e:h.text.startsWith("global ")||
(e=" "+e);h=d+e.length;return{status:"modified",newSource:b.slice(0,d)+e+b.slice(d),generated:e,from:d,to:h}};ti.GlobalInjector=zK;var NC=function(){};NC.removeImports=function(b,d,h){h=h||ti.fuzzyParse(b);var a=ti.arr.flatmap(h.body,function(e){return"ImportDeclaration"===e.type&&e.specifiers.length?e.specifiers.map(function(n){return{local:n.local,importStmt:e}}):[]}).filter(function(e){return d.some(function(n){return n.local===e.local.name})});h=a.map(function(e){return{local:e.local.name,from:e.importStmt.source.value}});
b=ti.arr.uniq(a.map(function(e){var n=e.importStmt.specifiers.find(function(q){return e.local===q.local});ti.arr.remove(e.importStmt.specifiers,n);return e.importStmt})).slice().reverse().reduce(function(e,n){var q=e.source;e=e.changes;var r=n.start,v=n.end,y=n.specifiers,D=q.slice(0,r),E=q.slice(v);q=q.slice(r,v);(n=y.length?ti.stringify(n):"")&&n.includes("\n")&&!q.includes("\n")&&(n=n.replace(/\s+/g," "));q=D+n+E;e=e.concat({replacement:n,start:r,end:v});return{source:q,changes:e}},{source:b,changes:[]});
return Object.assign({},b,{removedImports:h})};NC.findUnusedImports=function(b){var d="string"===typeof b?ti.fuzzyParse(b):b;b=ti.arr.flatmap(d.body,function(e){return"ImportDeclaration"===e.type&&e.specifiers.length?e.specifiers.map(function(n){return{local:n.local,from:e.source?e.source.value:"",importStmt:e}}):[]});var h=b.map(function(e){return e.local});d=ti.query.resolveReferences(ti.query.scopes(d));d=Array.from(d.resolvedRefMap.keys()).filter(function(e){return!h.includes(e)});var a=ti.arr.uniq(d.map(function(e){return e.name}));
return b.filter(function(e){return!a.includes(e.local.name)}).map(function(e){return Object.assign({},e,{local:e.local.name})})};NC.removeUnusedImports=function(b){var d=ti.fuzzyParse(b);return this.removeImports(b,this.findUnusedImports(d),d)};ti.ImportRemover=NC;var km=lively.FreezerRuntime.recorderFor("lively.modules/src/nodejs.js");km.ensureParent=function(b,d,h){if(h)return h;h=b.id;var a=b.System;d=h.startsWith("file://")?h.replace("file://",""):h;if(h=a._nodeRequire("module").Module._cache[h])return h;
h={id:d,filename:d,paths:[]};(b=b.package())&&h.paths.push(km.resource(b.url).join("node_modules/").path());return h};km.relative=function(b,d){return km.resource(b.id).parent().join(d).url.replace("file://","")};km._require=WG;km._resolve=XG;km.resource=Uc;km._require=WG;km._require=WG;km._resolve=XG;km._resolve=XG;var Ae=lively.FreezerRuntime.recorderFor("lively.modules/src/module.js");Ae.module=$u;Ae.isModuleLoaded=YG;Ae.doesModuleExist=ZG;Ae.arr=cf;Ae.obj=xf;Ae.graph=wr;Ae.parse=gk;Ae.query=kp;
Ae.computeRequireMap=hB;Ae.moduleSourceChange=jB;Ae.scheduleModuleExportsChange=iB;Ae.runScheduledExportChanges=MG;Ae.livelySystemEnv=fH;Ae.Package=ki;Ae.isURL=Zu;Ae.emit=Rq;Ae.subscribe=Tz;Ae.defaultClassToFunctionConverterName="initializeES6ClassForLively";Ae.classRuntime=zy;Ae.ImportInjector=Bq;Ae.GlobalInjector=zK;Ae.ImportRemover=NC;Ae._require=WG;Ae._resolve=XG;Ae.classHolder=Mr;var AK=function(){var b=/['"]format (esm|es6)['"];/,d=/['"]format cjs['"];/,h=/(^\s*|[}\);\n]\s*)(import\s+(['"]|(\*\s+as\s+)?[^"'\(\)\n;]+\s+from\s+['"]|\{)|export\s+\*\s+from\s+["']|export\s+(\{|default|function|class|var|const|let|async\s+function))/;
return function(a,e){return e&&e.format?("es6"==e.format&&"esm"==e.format,e.format):b.test(a.slice(0,5E3))||!d.test(a.slice(0,5E3))&&h.test(a)?"esm":d.test(a.slice(0,5E3))?"cjs":"global"}}();Ae.detectModuleFormat=AK;Ae.detectModuleFormat=AK;Ae.detectModuleFormat=AK;Ae.classHolder.module=Ae.module;Ae.isModuleLoaded=YG;Ae.isModuleLoaded=YG;Ae.doesModuleExist=ZG;Ae.doesModuleExist=ZG;Ae.globalProps={initialized:!1,descriptors:{}};var Lf=function(b,d){var h=this;if(!Ae.isURL(d)&&!/^@/.test(d))throw Error("ModuleInterface constructor called with "+
d+" that does not seem to be a fully normalized module id.");this.System=b;this.id=d;this.recorderName="__lvVarRecorder";this.sourceAccessorName="__lvOriginalCode";this._scope=this._ast=this._source=this._recorder=null;this._observersOfTopLevelState=[];this._evaluationsInProgress=0;this._evalId=1;this.createdAt=this.lastModifiedAt=new Date;Ae.subscribe("lively.modules/modulechanged",function(a){a.module===h.id&&h.reset()})};Lf.prototype.fullName=function(){return this.id};Lf.prototype.shortName=function(){return this.package().name+
"/"+this.pathInPackage()};Lf.prototype.source=function(){var b=this;return"@empty"===this.id?Promise.resolve(""):this._source?Promise.resolve(this._source):this.System.resource(this.id).read().then(function(d){return b._source=d})};Lf.prototype.setSource=function(b){this.sourceAccessorName&&this.recorderName&&b.includes("var "+this.recorderName)&&b.includes("var "+this.sourceAccessorName)||this._source===b||(this.reset(),this._source=b)};Lf.prototype.ast=function(){var b=this,d,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress){if(b._ast)return e.return(b._ast);d=b;h=Ae;a=h.parse;return e.yield(b.source(),2)}return e.return(d._ast=a.call(h,e.yieldResult))})};Lf.prototype.scope=function(){var b=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return b._scope?h.return(b._scope):h.yield(b.ast(),2);d=h.yieldResult;return h.return(b._scope=Ae.query.topLevelDeclsAndRefs(d).scope)})};Lf.prototype.resolvedScope=function(){var b=this,d,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==
e.nextAddress?(d=b,h=Ae.query,a=h.resolveReferences,e.yield(b.scope(),2)):e.return(d._scope=a.call(h,e.yieldResult))})};Lf.prototype.metadata=function(){var b=this.System.loads?this.System.loads[this.id]:null;return b?b.metadata:null};Lf.prototype.addMetadata=function(b){var d=this.System,h=this.id,a=this.metadata();b=a?Object.assign(a,b):b;a={};d.config({meta:(a[h]=b,a)});return d.meta[h]};Lf.prototype.format=function(){var b=this.metadata();return b&&b.format?b.format:this._source?Ae.detectModuleFormat(this._source):
"global"};Lf.prototype.setFormat=function(b){return this.addMetadata({format:b})};Lf.prototype.reset=function(){this._scope=this._ast=this._source=null};Lf.prototype.get=function(){return this.System.get(this.id)};Lf.prototype.load=function(b){var d=this,h,a,e,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return h=d,a=h.id,e=h.System,b&&d.addMetadata(b),(n=e.get(a))?q.jumpTo(2):q.yield(e.import(a),3);2!=q.nextAddress&&(n=q.yieldResult);return q.return(n)})};
Lf.prototype.isLoaded=function(){return!!this.System.get(this.id)};Lf.prototype.unloadEnv=function(){this._recorder=null;this._observersOfTopLevelState=[];delete Ae.livelySystemEnv(this.System).loadedModules[this.id]};Lf.prototype.unloadDeps=function(b){var d=this;b=Ae.obj.merge({forgetDeps:!0,forgetEnv:!0},b);this.dependents().forEach(function(h){d.System.delete(h.id);d.System.loads&&delete d.System.loads[h.id];b.forgetEnv&&h.unloadEnv()})};Lf.prototype.unload=function(b){var d=this,h,a,e,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==
q.nextAddress)return b=Object.assign({reset:!0,forgetDeps:!0,forgetEnv:!0},b),h=d,a=h.System,e=h.id,b.reset&&d.reset(),b.forgetDeps&&d.unloadDeps(b),d.System.delete(e),a.loads&&delete a.loads[e],a.meta&&delete a.meta[e],b.forgetEnv&&d.unloadEnv(),(n=a._livelyModulesTranslationCache)?q.yield(n.deleteCachedData(e),2):q.jumpTo(2);Ae.emit("lively.modules/moduleunloaded",{module:d.id},Date.now(),d.System);q.jumpToEnd()})};Lf.prototype.reload=function(b){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==
a.nextAddress?(b=Ae.obj.merge({reloadDeps:!0,resetEnv:!0},b),h=[d],b.reloadDeps&&(h=d.dependents().concat(h)),a.yield(d.unload({forgetDeps:b.reloadDeps,forgetEnv:b.resetEnv}),2)):3!=a.nextAddress?a.yield(Promise.all(h.map(function(e){return e.id!==d.id&&e.load()})),3):a.yield(d.load(),0)})};Lf.prototype.copyTo=function(b){var d=this,h,a,e,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return h=d.System.resource(b),a=h.write,v.yield(d.source(),3);if(2!=v.nextAddress)return v.yield(a.call(h,
v.yieldResult),2);e=d;n=e.System;q=Ae.module(n,b);r=Ae.obj.select(d,"_observersOfTopLevelState _scope _ast _source _recorder sourceAccessorName recorderName".split(" "));Object.assign(q,r);n.set(b,n.newModule(n.get(d.id)));return v.return(q)})};Lf.prototype.renameTo=function(b,d){d=void 0===d?{}:d;var h=this,a,e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return a=d,e=void 0===a.unload?!0:a.unload,n=void 0===a.removeFile?!0:a.removeFile,r.yield(h.copyTo(b),
2);case 2:q=r.yieldResult;if(!e){r.jumpTo(3);break}return r.yield(h.unload({reset:!0,forgetDeps:!1,forgetEnv:!0}),3);case 3:if(!n){r.jumpTo(5);break}return r.yield(h.System.resource(h.id).remove(),5);case 5:return r.return(q)}})};Lf.prototype.whenLoaded=function(b){if(this.isLoaded())try{b(this)}catch(d){console.error(d)}else Ae.livelySystemEnv(this.System).onLoadCallbacks.push({moduleName:this.id,resolved:!0,callback:b})};Lf.prototype.changeSourceAction=function(b){var d=this;return Promise.resolve(this.source()).then(function(h){return b(h)}).then(function(h){return d.changeSource(h)})};
Lf.prototype.changeSource=function(b,d){d=Object.assign({doSave:!0,doEval:!0},d);var h=this.System,a=this.id,e=this.format(),n;this.reset();this.lastModifiedAt=new Date;return Promise.all([d.doSave&&this.System.resource(a).write(b),d.doEval&&Ae.moduleSourceChange(h,a,b,e,d).then(function(q){return n=q})]).then(function(){return n})};Lf.prototype.addDependencyToModuleRecord=function(b,d){var h=this;d=void 0===d?function(){}:d;var a=this.record(),e=b.record();if(a&&e){var n,q=a.dependencies.some(function(v,
y){if(v)return n=y,v&&v.name===b.id});q?e!==a.dependencies[n]&&a.dependencies.splice(n,1,e):a.dependencies.push(e);q&&a.setters[n]||(a.setters[q?n:a.dependencies.length-1]=d);var r;e.importers.some(function(v,y){if(v)return r=y,v&&v.name===h.id})?a!==e.importers[r]&&e.importers.splice(r,1,a):e.importers.push(a)}};Lf.prototype.dependents=function(){var b=this;return Ae.graph.hull(Ae.graph.invert(Ae.computeRequireMap(this.System)),this.id).map(function(d){return Ae.module(b.System,d)})};Lf.prototype.requirements=
function(){var b=this;return Ae.graph.hull(Ae.computeRequireMap(this.System),this.id).map(function(d){return Ae.module(b.System,d)})};Lf.prototype.directRequirements=function(){var b=this,d=(this.record()||{}).dependencies||[];return Ae.arr.pluck(d.filter(Boolean),"name").map(function(h){return Ae.module(b.System,h)})};Lf.prototype.isMochaTest=function(){if(!this._source)return!1;var b=this._scope||(this._scope=Ae.query.topLevelDeclsAndRefs(Ae.parse(this._source)).scope);return Ae.query.imports(b).map(function(d){return d.fromModule}).some(function(d){return d.endsWith("mocha-es6")||
d.endsWith("mocha-es6/index.js")})?!0:!1};Lf.prototype.define=function(b,d,h,a){h=void 0===h?!0:h;var e=this.System,n=this.id,q=this.recorder,r=Symbol.for("lively-object-meta"),v=Symbol.for("lively-module-meta");"function"!==typeof d||!a||"function"!==a.kind&&"class"!==a.kind||(d[r]=a);d&&d[r]&&!d[v]&&(a=this.pathInPackage(),r=this.package(),d[v]={package:r?{name:r.name,version:r.version}:{},pathInPackage:a});q[b]=d;Ae.scheduleModuleExportsChange(e,n,b,d,!1);this.notifyTopLevelObservers(b);(h=h||
!this.isEvalutionInProgress())&&Ae.runScheduledExportChanges(e,n);return d};Lf.prototype.undefine=function(b){delete this.recorder[b]};Lf.prototype.subscribeToToplevelDefinitionChanges=function(b){this._observersOfTopLevelState.push(b);return b};Lf.prototype.notifyTopLevelObservers=function(b){var d=this.recorder;Ae.arr.include(["createOrExtendES6ClassForLively","lively.capturing-declaration-wrapper"],b)||this._observersOfTopLevelState.forEach(function(h){return h(b,d[b])})};Lf.prototype.unsubscribeFromToplevelDefinitionChanges=
function(b){this._observersOfTopLevelState="string"===typeof b?this._observersOfTopLevelState.filter(function(d){return d.name!==b}):this._observersOfTopLevelState.filter(function(d){return d!==b})};Lf.prototype.evaluationStart=function(){this._evaluationsInProgress++};Lf.prototype.evaluationEnd=function(){this._evaluationsInProgress--;Ae.runScheduledExportChanges(this.System,this.id)};Lf.prototype.nextEvalId=function(){return this._evalId++};Lf.prototype.isEvalutionInProgress=function(){return 0<
this._evaluationsInProgress};Lf.prototype.env=function(){return this};Lf.prototype.package=function(){return Ae.Package.forModule(this.System,this)};Lf.prototype.pathInPackage=function(){var b=this.package();return b&&0===this.id.indexOf(b.address)?this.id.slice(b.address.length).replace(/^\//,""):this.id};Lf.prototype.imports=function(){var b=this,d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?(d=Ae.query,h=d.imports,a.yield(b.scope(),2)):a.return(h.call(d,
a.yieldResult))})};Lf.prototype.exports=function(){var b=this,d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?(d=Ae.query,h=d.exports,a.yield(b.scope(),2)):a.return(h.call(d,a.yieldResult))})};Lf.prototype.addImports=function(b){var d=this,h,a,e,n,q,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return E.yield(d.source(),2);h=E.yieldResult;a=$jscomp.makeIterator(b);for(e=a.next();!e.done;e=a.next())n=e.value,q=
Ae.module(d.System,n.from||n.moduleId),r=q.package(),v={exported:n.exported||n.local,moduleId:q.id,packageName:r.name,packageURL:r.url,pathInPackage:q.pathInPackage()},y=n.local,D=Ae.ImportInjector.run(d.System,d.id,d.package(),h,v,y),h=D.newSource;return E.yield(d.changeSource(h),0)})};Lf.prototype.addGlobalDeclaration=function(b){var d=this,h,a,e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?r.yield(d.source(),2):3!=r.nextAddress?(h=r.yieldResult,a=Ae.GlobalInjector.run(h,
b),e=a.status,n=a.newSource,(q="modified"===e)?r.yield(d.changeSource(n),3):r.jumpTo(3)):r.return(q)})};Lf.prototype.removeImports=function(b){var d=this,h,a,e,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return b.length?q.yield(d.source(),2):q.return();case 2:return h=q.yieldResult,q.yield(Ae.ImportRemover.removeImports(h,b),3);case 3:return a=q.yieldResult,e=a.source,n=a.removedImports,q.yield(d.changeSource(e),4);case 4:n.forEach(function(r){return delete d.recorder[r.local]}),
q.jumpToEnd()}})};Lf.prototype._localDeclForRefAt=function(b){var d=this,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(d.resolvedScope(),2);h=e.yieldResult;a=Ae.query.refWithDeclAt(b,h);return e.return(a&&{decl:a.decl,id:a.declId,declModule:d})})};Lf.prototype._localDeclForName=function(b){var d=this,h,a,e,n,q,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){if(1==D.nextAddress)return D.yield(d.resolvedScope(),2);h=D.yieldResult;
e=$jscomp.makeIterator(h.resolvedRefMap.values());for(n=e.next();!n.done;n=e.next())if(r=q=n.value,v=r.ref,y=v.name,b===y){a=q;break}return D.return(a&&{decl:a.decl,id:a.declId,declModule:d})})};Lf.prototype._importForNSRefAt=function(b){var d=this,h,a,e,n,q,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return E.yield(d.resolvedScope(),2);h=E.yieldResult;a=h.node;e=Ae.query.nodesAtIndex(a,b);if(2>e.length)return E.return([null,null]);n=e[e.length-1];q=
e[e.length-2];if("Identifier"!=n.type||"MemberExpression"!=q.type||q.computed||"Identifier"!==q.object.type)return E.return([null,null]);r=h.resolvedRefMap.get(q.object)||{};v=r.decl;if(!v||"ImportDeclaration"!==v.type)return E.return([null,null]);y=q.object.name;D=v.specifiers.find(function(I){return I.local.name===y});return E.return("ImportNamespaceSpecifier"!==D.type?[null,null]:[v,D.local,n.name])})};Lf.prototype._resolveImportedDecl=function(b){var d=this,h,a,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(!b)return y.return([]);
h=b.id;a=h.name;return y.yield(d.imports(),2);case 2:e=y.yieldResult;n=e.find(function(D){return D.local==a});if(!n){y.jumpTo(3);break}q=Ae.module(d.System,n.fromModule,d.id);r=[b];v=r.concat;return y.yield(q.bindingPathForExport(n.imported),4);case 4:return y.return(v.call(r,y.yieldResult));case 3:return y.return([b])}})};Lf.prototype.bindingPathFor=function(b){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?a.yield(d._localDeclForName(b),2):4!=
a.nextAddress?(h=a.yieldResult)?a.yield(d._resolveImportedDecl(h),4):a.jumpTo(0):a.return(a.yieldResult)})};Lf.prototype.bindingPathForExport=function(b){var d=this,h,a,e,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(d.resolvedScope(),2);case 2:return v.yield(d.exports(),3);case 3:h=v.yieldResult;a=h.find(function(y){return y.exported===b});if(!a.fromModule)return v.return(d._resolveImportedDecl({decl:a.decl,id:a.declId,declModule:a&&
a.decl?d:null}));e=Ae.module(d.System,a.fromModule,d.id);n={decl:a.node,id:a.declId,declModule:d};q=[n];r=q.concat;return v.yield(e.bindingPathForExport(a.imported),5);case 5:return v.return(r.call(q,v.yieldResult))}})};Lf.prototype.bindingPathForRefAt=function(b){var d=this,h,a,e,n,q,r,v,y,D,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:return I.yield(d._localDeclForRefAt(b),2);case 2:h=I.yieldResult;if(!h){I.jumpTo(3);break}return I.yield(d._resolveImportedDecl(h),
4);case 4:return I.return(I.yieldResult);case 3:return a=$jscomp,e=a.makeIterator,I.yield(d._importForNSRefAt(b),5);case 5:n=e.call(a,I.yieldResult);q=n.next().value;r=n.next().value;v=n.next().value;if(!q)return I.return([]);y=Ae.module(d.System,q.source.value,d.id);D=[{decl:q,declModule:d,id:r}];E=D.concat;return I.yield(y.bindingPathForExport(v),6);case 6:return I.return(E.call(D,I.yieldResult))}})};Lf.prototype.definitionForRefAt=function(b){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==
a.nextAddress)return a.yield(d.bindingPathForRefAt(b),2);h=a.yieldResult;return a.return(1>h.length?null:h[h.length-1].decl)})};Lf.prototype.ensureRecord=function(){var b=this.System,d=b._loader.moduleRecords;return d[this.id]?d[this.id]:d[this.id]={name:this.id,exports:b.newModule({}),dependencies:[],importers:[],setters:[]}};Lf.prototype.record=function(){var b=this.System._loader.moduleRecords[this.id];if(!b)return null;b.hasOwnProperty("__lively_modules__")||(b.__lively_modules__={evalOnlyExport:{}});
return b};Lf.prototype.updateRecord=function(b){var d=this.record();if(!d)throw Error("es6 environment global of "+this.id+": module not loaded, cannot get export object!");d.locked=!0;try{return b(d)}finally{d.locked=!1}};Lf.prototype.search=function(b,d){var h=this,a,e,n,q,r,v,y,D,E,I,K,P,N,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return d=Object.assign({excludedModules:[]},d),d.excludedModules.some(function(t){return"string"===typeof t?t===h.id:t instanceof
RegExp?t.test(h.id):"function"===typeof t?t(h.id):!1})?m.return([]):m.yield(h.source(),2);a=m.yieldResult;b instanceof RegExp?(n="g",b.ignoreCase&&(n+="i"),b.multiline&&(n+="m"),e=RegExp(b.source,n)):e=RegExp(b,"g");for(r=[];null!==(q=e.exec(a));)r.push([q.index,q[0].length]);y=v=0;D=1;for(E=0;v<a.length&&y<r.length;v++)"\n"==a[v]&&(D++,E=v+1),I=$jscomp.makeIterator(r[y]),K=I.next().value,P=I.next().value,v===K&&(N=a.slice(E).indexOf("\n"),N=-1===N?a.length:N+E,aa=h.package(),r[y]={moduleId:h.id,
packageName:aa?aa.name:void 0,pathInPackage:aa?h.pathInPackage():h.id,isLoaded:h.isLoaded(),length:P,line:D,column:v-E,lineString:1E3<N-E?"..."+a.slice(v-10,v+100)+"...":a.slice(E,N)},y++);return m.return(r)})};Lf.prototype.toString=function(){return"module("+this.id+")"};$jscomp.global.Object.defineProperties(Lf.prototype,{dontTransform:{configurable:!0,enumerable:!0,get:function(){return[this.recorderName,this.sourceAccessorName,"global","self","_moduleExport","_moduleImport","localStorage","prompt",
"alert","fetch","getComputedStyle"].concat($jscomp.arrayFromIterable(this.isMochaTest()?[]:Ae.GlobalInjector.getGlobals(this._source))).concat(Ae.query.knownGlobals)}},recorder:{configurable:!0,enumerable:!0,set:function(b){return this._recorder=b},get:function(){if(this._recorder)return this._recorder;var b=this.System,d=this;if(!Ae.globalProps.initialized){Ae.globalProps.initialized=!0;for(var h in b.global)if(b.global.__lookupGetter__(h)||"closed"==h)Ae.globalProps.descriptors[h]={value:void 0,
configurable:!0,writable:!0}}h={};if(b.get("@system-env").node){var a=Ae._require.bind(null,this);a.resolve=Ae._resolve.bind(null,this);h.require={configurable:!0,writable:!0,value:a}}a={};return this._recorder=Object.create(b.global,Object.assign({},Ae.globalProps.descriptors,{},h,(a.event={configurable:!0,writable:!0,value:void 0},a.System={configurable:!0,writable:!0,value:b},a.__currentLivelyModule={value:d},a[Ae.defaultClassToFunctionConverterName]={configurable:!0,writable:!0,value:Ae.classRuntime.initializeClass},
a[this.varDefinitionCallbackName]={value:function(e,n,q,r,v){v=v||{};v.kind=n;return d.define(e,q,!1,v)}},a._moduleExport={value:function(e,n){Ae.scheduleModuleExportsChange(b,d.id,e,n,!0)}},a._moduleImport={value:function(e,n){var q=b.decanonicalize(e,d.id),r=b.get(q);if(r){d.addDependencyToModuleRecord(Ae.module(b,q),function(v){return Object.assign(d.recorder,v)});if(void 0==n)return r;r.hasOwnProperty(n)||console.warn("import from "+r+": Has no export "+n+"!");return r[n]}console.warn("import of "+
n+" failed: "+e+" (tried as "+d.id+") is not loaded!")}},a)))}},varDefinitionCallbackName:{configurable:!0,enumerable:!0,get:function(){return"defVar_"+this.id}}});Ae.ModuleInterface=Lf;Ae.default=$u;var he=lively.FreezerRuntime.recorderFor("lively.modules/src/instrumentation.js");he.canonicalURL=function(b){var d=b.match(/([^:]+:\/\/)(.*)/);if(d){var h=d[1];b=d[2]}b=b.replace(/([^:])\/[\/]+/g,"$1/");return(h||"")+b};he.prepareNodejsCaching=function(){var b=System._nodeRequire("fs"),d=System._nodeRequire("path"),
h="win32"===he.process.platform;d=h||"/"!==he.process.cwd()?he.process.cwd():d.join(he.process.env.HOME,".lively.next");he.nodejsCacheDirURL=h?"file:///"+d.replace(/\\/g,"/"):"file://"+d;b.existsSync(d)||b.mkdirSync(d)};he.getExceptions=MQ;he.setExceptions=NQ;he.prepareCodeForCustomCompile=OQ;he.prepareTranslatedCodeForSetterCapture=PQ;he.getCachedNodejsModule=function(b,d){try{var h=b._nodeRequire("module").Module,a=h._resolveFilename(d.name.replace(/^file:\/\//,"").replace(/^\/([a-z]:\/)/i,"$1"));
return h._cache[a]}catch(e){b.debug&&console.log("[lively.modules getCachedNodejsModule] %s unknown to nodejs",d.name)}return null};he.addNodejsWrapperSource=function(b,d){var h=he.getCachedNodejsModule(b,d);if(h)return d.metadata.format="esm",d.source="var exports = System._nodeRequire('"+h.id+"'); export default exports;\n"+he.properties.allOwnPropertiesOrFunctions(h.exports).map(function(a){return he.isValidIdentifier(a)?"export var "+a+" = exports['"+a+"'];":'/*ignoring export "'+a+'" b/c it is not a valid identifier*/'}).join("\n"),
b.debug&&console.log("[lively.modules customTranslate] loading %s from nodejs module cache",d.name),!0;b.debug&&console.log("[lively.modules customTranslate] %s not yet in nodejs module cache",d.name);return!1};he.customTranslate=function(b,d){var h=this,a,e,n,q,r,v,y,D,E,I,K,P,N,aa,m,t,u,B,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){switch(H.nextAddress){case 1:a=h;e=a.debug;if(q=(n=d.metadata)&&n.hasOwnProperty("instrument")&&!n.instrument||he.exceptions.some(function(F){return F(d.name)}))return e&&
console.log("[lively.modules customTranslate ignoring] %s",d.name),H.return(b(d));if(he.isNode&&he.addNodejsWrapperSource(a,d))return e&&console.log("[lively.modules] loaded %s from nodejs cache",d.name),H.return(b(d));r=Date.now();v=he.detectModuleFormat(d.source,n);y=he.module(a,d.name);D=!1;E="esm"===v;y.setSource(d.source);H.setCatchFinallyBlocks(2);I=a.useModuleTranslationCache;K=a.global.indexedDB;P=I&&String(he.string.hashCode(d.source));if(I&&K&&E)return N=a._livelyModulesTranslationCache||
(a._livelyModulesTranslationCache=new he.BrowserModuleTranslationCache),H.yield(N.fetchStoredModuleSource(d.name),8);if(!(he.isNode&&I&&E)){H.jumpTo(5);break}N=a._livelyModulesTranslationCache||(a._livelyModulesTranslationCache=new he.NodeModuleTranslationCache);return H.yield(N.fetchStoredModuleSource(d.name),7);case 7:if((aa=H.yieldResult)&&aa.hash==P&&aa.timestamp>=he.NodeModuleTranslationCache.earliestDate&&aa.source)return n.format="register",n.deps=[],e&&console.log("[lively.modules customTranslate] loaded %s from filesystem cache after %sms",
d.name,Date.now()-r),H.return(Promise.resolve(aa.source));H.jumpTo(5);break;case 8:if((aa=H.yieldResult)&&aa.hash==P&&aa.timestamp>=he.BrowserModuleTranslationCache.earliestDate&&aa.source)return n.format="register",n.deps=[],e&&console.log("[lively.modules customTranslate] loaded %s from browser cache after %sms",d.name,Date.now()-r),H.return(Promise.resolve(aa.source));case 5:H.leaveTryBlock(3);break;case 2:m=H.enterCatchBlock(),console.error("[lively.modules customTranslate] error reading module translation cache: "+
m.stack);case 3:return t={},E?(y.recorderName="__lvVarRecorder",y.recorder===a.global&&y.unloadEnv(),d.metadata.format="esm",u=he.prepareCodeForCustomCompile(a,d.source,d.name,y,e),t=u.options,B=u.source,d.source=B,D=d.metadata["lively.modules instrumented"]=!0,e&&console.log("[lively.modules] loaded %s as es6 module",d.name)):"global"===d.metadata.format&&(y.recorderName="System.global",y.recorder=a.global,d.metadata.format="global",A=he.prepareCodeForCustomCompile(a,d.source,d.name,y,e),t=A.options,
B=A.source,d.source=B,D=d.metadata["lively.modules instrumented"]=!0,e&&console.log("[lively.modules] loaded %s as instrumented global module",d.name)),D||e&&console.log("[lively.modules] customTranslate ignoring %s b/c don't know how to handle format %s",d.name,d.metadata.format),H.return(b(d).then(function(F){var L,U,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Y){switch(Y.nextAddress){case 1:0===F.indexOf("System.register(")&&(e&&console.log("[lively.modules customTranslate] Installing System.register setter captures for %s",
d.name),F=he.prepareTranslatedCodeForSetterCapture(a,F,d.name,y,t,e));if(he.isNode&&I&&E)return L=a._livelyModulesTranslationCache||(a._livelyModulesTranslationCache=new he.NodeModuleTranslationCache),Y.setCatchFinallyBlocks(8),Y.yield(L.cacheModuleSource(d.name,P,F),10);if(!(I&&K&&E)){Y.jumpTo(3);break}L=a._livelyModulesTranslationCache||(a._livelyModulesTranslationCache=new he.BrowserModuleTranslationCache);Y.setCatchFinallyBlocks(5);return Y.yield(L.cacheModuleSource(d.name,P,F),7);case 7:e&&console.log("[lively.modules customTranslate] stored cached version for %s",
d.name);Y.leaveTryBlock(3);break;case 5:U=Y.enterCatchBlock();console.error("[lively.modules customTranslate] failed storing module cache: "+U.stack);Y.jumpTo(3);break;case 10:e&&console.log("[lively.modules customTranslate] stored cached version in filesystem for %s",d.name);Y.leaveTryBlock(3);break;case 8:T=Y.enterCatchBlock(),console.error("[lively.modules customTranslate] failed storing module cache: "+T.stack);case 3:return e&&console.log("[lively.modules customTranslate] done %s after %sms",
d.name,Date.now()-r),Y.return(F)}})}))}})};he.instrumentSourceOfEsmModuleLoad=$G;he.instrumentSourceOfGlobalModuleLoad=aH;he.wrapModuleLoad=lB;he.unwrapModuleLoad=bH;he.parse=gk;he.nodes=Br;he.isValidIdentifier=Vw;var pU=he.nodes;he.funcCall=pU.funcCall;he.member=pU.member;he.literal=pU.literal;he.evalCodeTransform=ls;he.evalCodeTransformOfSystemRegisterSetters=iu;he.arr=cf;he.string=Ng;he.properties=Qm;he.module=$u;he.detectModuleFormat=AK;he.resource=Uc;he.installHook=Ss;he.removeHook=Yu;he.isHookInstalled=
Ts;he.classToFunctionTransform=tr;he.isNode=System.get("@system-env").node;var OC=function(){};OC.prototype.cacheModuleSource=function(b,d,h){throw Error("not yet implemented");};OC.prototype.fetchStoredModuleSource=function(b){throw Error("not yet implemented");};OC.prototype.deleteCachedData=function(b){throw Error("not yet implemented");};$jscomp.global.Object.defineProperties(OC,{earliestDate:{configurable:!0,enumerable:!0,get:function(){return+new Date("Sun Oct 18 2020 16:00:00 GMT-0800 (PST)")}}});
he.ModuleTranslationCache=OC;he.nodejsCacheDirURL=null;var Nr=function(){return he.ModuleTranslationCache.apply(this,arguments)||this};$jscomp.inherits(Nr,he.ModuleTranslationCache);Nr.prototype.ensurePath=function(b){var d=this,h,a,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(d.moduleCacheDir.join(b).exists(),2);case 2:if(y.yieldResult)return y.return();h="";n=$jscomp.makeIterator(b.split("/"));q=n.next();case 3:if(q.done){y.jumpTo(0);
break}r=q.value;h+=r+"/";a=d.moduleCacheDir.join(h);return y.yield(a.exists(),6);case 6:if(y.yieldResult){y.jumpTo(7);break}y.setCatchFinallyBlocks(8);return y.yield(a.mkdir(),10);case 10:y.leaveTryBlock(7);break;case 8:if(v=y.enterCatchBlock(),"EEXIST"!=v.code)throw v;case 7:return a=he.resource("file://"+h+"/package.json"),y.yield(a.exists(),11);case 11:if(!y.yieldResult){y.jumpTo(4);break}return y.yield(a.read(),13);case 13:return e=y.yieldResult,y.yield(d.moduleCacheDir.join(h+"/package.json").write(e),
4);case 4:q=n.next(),y.jumpTo(3)}})};Nr.prototype.dumpModuleCache=function(){var b=this,d,h,a,e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:h=r.forIn(System._nodeRequire("module").Module._cache);case 2:if(null==(d=h.getNext())){r.jumpTo(0);break}a=he.resource("file://"+d);return r.yield(a.exists(),5);case 5:if(!r.yieldResult){r.jumpTo(2);break}e=b;n=e.cacheModuleSource;q=d;return r.yield(a.read(),8);case 8:return r.yield(n.call(e,q,"NO_HASH",r.yieldResult),
2)}})};Nr.prototype.getFileName=function(b){return b.match(/([^\/]*.)(\.js)?$/)[0]};Nr.prototype.fetchStoredModuleSource=function(b){var d=this,h,a,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return b=b.replace("file://",""),h=d.getFileName(b),a=b.replace(h,""),e=d.moduleCacheDir.join(b),y.yield(e.exists(),2);case 2:return y.yieldResult?y.yield(e.stat(),3):y.return(null);case 3:return n=y.yieldResult,q=n.birthtime,y.yield(e.read(),4);case 4:return r=
y.yieldResult,y.yield(d.moduleCacheDir.join(a+"/.hash_"+h).read(),5);case 5:return v=y.yieldResult,y.return({source:r,timestamp:q,hash:v})}})};Nr.prototype.cacheModuleSource=function(b,d,h){var a=this,e,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(b=b.replace("file://",""),e=a.getFileName(b),n=b.replace(e,""),q.yield(a.ensurePath(n),2)):3!=q.nextAddress?q.yield(a.moduleCacheDir.join(b).write(h),3):q.yield(a.moduleCacheDir.join(n+"/.hash_"+e).write(d),0)})};
Nr.prototype.deleteCachedData=function(b){var d=this,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(b=b.replace("file://",""),h=d.getFileName(b),b.replace(h,""),a=d.moduleCacheDir.join(b),e.yield(a.exists(),2)):3!=e.nextAddress?e.yieldResult?e.yield(a.remove(),3):e.return(!1):e.return(!0)})};$jscomp.global.Object.defineProperties(Nr.prototype,{moduleCacheDir:{configurable:!0,enumerable:!0,get:function(){he.nodejsCacheDirURL||he.prepareNodejsCaching();return he.resource(he.nodejsCacheDirURL+
"/.module_cache/")}}});he.NodeModuleTranslationCache=Nr;var Or=function(b){b=void 0===b?"lively.modules-module-translation-cache":b;var d=he.ModuleTranslationCache.call(this)||this;d.version=2;d.sourceCodeCacheStoreName="sourceCodeStore";d.dbName=b;d.db=d.openDb();return d};$jscomp.inherits(Or,he.ModuleTranslationCache);Or.prototype.openDb=function(){var b=this,d=System.global.indexedDB.open(this.version);return new Promise(function(h,a){d.onsuccess=function(e){h(this.result)};d.onerror=function(e){return a(e.target)};
d.onupgradeneeded=function(e){return e.currentTarget.result.createObjectStore(b.sourceCodeCacheStoreName,{keyPath:"moduleId"})}})};Or.prototype.deleteDb=function(){var b=System.global.indexedDB.deleteDatabase(this.dbName);return new Promise(function(d,h){b.onerror=function(a){return h(a.target)};b.onsuccess=function(a){return d(a)}})};Or.prototype.closeDb=function(){var b=this,d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.yield(b.db,2);d=a.yieldResult;
h=d.close();return a.return(new Promise(function(e,n){h.onsuccess=function(q){e(this.result)};h.onerror=function(q){return n(q.target.errorCode)}}))})};Or.prototype.cacheModuleSource=function(b,d,h){var a=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(a.db,2);e=n.yieldResult;return n.return(new Promise(function(q,r){var v=e.transaction([a.sourceCodeCacheStoreName],"readwrite"),y=v.objectStore(a.sourceCodeCacheStoreName),D=Date.now();y.put({moduleId:b,
hash:d,source:h,timestamp:D});v.oncomplete=q;v.onerror=r}))})};Or.prototype.fetchStoredModuleSource=function(b){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.yield(d.db,2);h=a.yieldResult;return a.return(new Promise(function(e,n){var q=h.transaction([d.sourceCodeCacheStoreName]).objectStore(d.sourceCodeCacheStoreName).get(b);q.onerror=n;q.onsuccess=function(r){return e(q.result)}}))})};Or.prototype.deleteCachedData=function(b){var d=this,
h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.yield(d.db,2);h=a.yieldResult;return a.return(new Promise(function(e,n){var q=h.transaction([d.sourceCodeCacheStoreName],"readwrite").objectStore(d.sourceCodeCacheStoreName).delete(b);q.onerror=n;q.onsuccess=function(r){return e(q.result)}}))})};Ka("a6",Or);he.BrowserModuleTranslationCache=Or;he.node_modulesDir=System.decanonicalize("lively.modules/node_modules/");he.exceptions=[function(b){return!b.endsWith(".js")&&
!b.endsWith(".jsx")&&!b.startsWith("https://jspm.dev")},function(b){return b.endsWith("dist/acorn.js")||b.endsWith("dist/escodegen.browser.js")||b.endsWith("bowser.js")||b.endsWith("TweenMax.min.js")},function(b){return b.endsWith("babel-core/browser.js")||b.endsWith("system.src.js")||b.includes("systemjs-plugin-babel")}];he.pendingConfigs=[];he.configInitialized=!1;he.prepareCodeForCustomCompile=OQ;he.prepareCodeForCustomCompile=OQ;he.prepareTranslatedCodeForSetterCapture=PQ;he.prepareTranslatedCodeForSetterCapture=
PQ;he.wrapModuleLoad=lB;he.wrapModuleLoad=lB;he.unwrapModuleLoad=bH;he.unwrapModuleLoad=bH;he.getExceptions=MQ;he.getExceptions=MQ;he.setExceptions=NQ;he.setExceptions=NQ;he.instrumentSourceOfEsmModuleLoad=$G;he.instrumentSourceOfEsmModuleLoad=$G;he.instrumentSourceOfGlobalModuleLoad=aH;he.instrumentSourceOfGlobalModuleLoad=aH;var vg=lively.FreezerRuntime.recorderFor("lively.modules/src/resource.js");vg.fetchResource=function(b,d){var h=this,a,e,n,q,r,v,y,D,E,I,K,P,N,aa,m,t,u,B,A,H,F,L,U;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){switch(T.nextAddress){case 1:a=
h;e=25E4;n=a.resource(d.name);q=a.get("@system-env").node&&!n.isNodeJSFileResource;if(!q){T.jumpTo(2);break}return T.yield(Qva(d.name),3);case 3:n=T.yieldResult;case 2:if(!n)return T.return(b(d));if(vg.jsFileHashMap||a.get("@system-env").node){T.jumpTo(4);break}y=vg;return T.yield(a.resource(a.baseURL).join("__JS_FILE_HASHES__").readJson(),5);case 5:y.jsFileHashMap=T.yieldResult;case 4:D=a.useModuleTranslationCache;E=a.global.indexedDB;I=a._livelyModulesTranslationCache;if(a.get("@system-env").node||
!D||!E||!I){T.jumpTo(6);break}return T.yield(I.fetchStoredModuleSource(d.name),7);case 7:if((K=T.yieldResult)&&(vg.jsFileHashMap[d.name.replace(a.baseURL,"/")]==K.hash||d.name.includes("jspm")))return d.metadata.instrument=!1,T.return(K.source);case 6:if(n.isResource&&n.ext()&&n.ext().startsWith("css"))return T.return("");T.setCatchFinallyBlocks(8);if(!n.isResource){P=n;T.jumpTo(10);break}return T.yield(n.read(),11);case 11:P=T.yieldResult;case 10:r=P;T.leaveTryBlock(9);break;case 8:v=N=T.enterCatchBlock();
case 9:if(!v||!a.get("@system-env").browser){T.jumpTo(12);break}aa=n.url.startsWith("http");m=!n.url.startsWith(document.location.origin);if(!aa||!m){T.jumpTo(12);break}T.setCatchFinallyBlocks(14);return T.yield(n.makeProxied(a.baseURL).read(),16);case 16:r=T.yieldResult;v=null;T.leaveTryBlock(12);break;case 14:T.enterCatchBlock();case 12:if(v)throw v;if(!q){T.jumpTo(17);break}t=r.headers||{};u=t._headers;B=$jscomp.makeIterator(u&&u["content-encoding"]||[]);A=B.next().value;return"br"==A?(H=vg.Buffer,
F=H.from,L=vg.brotli,U=L.decompress,T.yield(r.buffer(),21)):T.yield(r.text(),20);case 20:r=T.yieldResult;T.jumpTo(17);break;case 21:r=F.call(H,U.call(L,T.yieldResult)).toString();case 17:if(!(r.length>e&&$world)||a._loadingIndicator){T.jumpTo(22);break}a._loadingIndicator=$world.execCommand("open loading indicator",{label:"loading module",status:d.name.replace(a.baseURL,"")});return T.yield(vg.promise.delay(500),23);case 23:if(!a._loadingIndicator){T.jumpTo(22);break}return T.yield(a._loadingIndicator.whenRendered(),
22);case 22:return T.return(r)}})};vg.livelyProtocol=function(b,d){var h=d.match(vg.livelyURLRe);if(!h)return b(d);b=$jscomp.makeIterator(h);b.next();b.next();var a=b.next().value;return{read:function(){var e="undefined"!==typeof $world&&$world.getMorphWithId(a);return Promise.resolve(e?e.textString:"/*Could not locate "+a+"*/")},write:function(e){var n="undefined"!==typeof $world&&$world.getMorphWithId(a);if(!n)return Promise.reject("Could not save morph "+a);n.textString=e;return Promise.resolve(this)}}};
vg.wrapResource=cH;vg.unwrapResource=QQ;vg.resource=Uc;vg.Resource=Uf;vg.installHook=Ss;vg.removeHook=Yu;vg.isHookInstalled=Ts;vg.brotli=vg.brotli||void 0;if(System.get("@system-env").node){var Qva=System._nodeRequire("node-fetch");vg.brotli=System._nodeRequire("brotli")}vg.jsFileHashMap=vg.jsFileHashMap||void 0;vg.livelyURLRe=/^lively:\/\/([^\/]+)\/(.*)$/;vg.wrapResource=cH;vg.wrapResource=cH;vg.unwrapResource=QQ;vg.unwrapResource=QQ;var Mv=function(){return vg.Resource.apply(this,arguments)||this};
$jscomp.inherits(Mv,vg.Resource);Mv.prototype.read=function(){var b=this,d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){d=b.morphId;h="undefined"!==typeof $world&&$world.getMorphWithId(d);return a.return(Promise.resolve(h?h.textString:"/*Could not locate "+d+"*/"))})};Mv.prototype.write=function(b){var d=this,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){h=d.morphId;a="undefined"!==typeof $world&&$world.getMorphWithId(h);if(!a)return e.return(Promise.reject("Could not save morph "+
h));a.textString=b;return e.return(Promise.resolve(d))})};Mv.prototype.exists=function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return d.return("undefined"!==typeof $world&&$world.getMorphWithId(b.morphId))})};Mv.prototype.remove=function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){"undefined"!==typeof $world&&$world.getMorphWithId(b.morphId).remove();return d.return(!0)})};$jscomp.global.Object.defineProperties(Mv.prototype,{canDealWithJSON:{configurable:!0,
enumerable:!0,get:function(){return!1}},morphId:{configurable:!0,enumerable:!0,get:function(){var b=this.url.match(vg.livelyURLRe);b=$jscomp.makeIterator(b);b.next();b.next();return b.next().value}}});vg.LivelyResource=Mv;var qU={name:"lively.modules",matches:function(b){return b.match(vg.livelyURLRe)},resourceClass:vg.LivelyResource};vg.resourceExtension=qU;vg.resourceExtension=qU;vg.resourceExtension=qU;vg.registerExtension=Zd;vg.promise=bg;vg.registerExtension(vg.resourceExtension);var Bd=lively.FreezerRuntime.recorderFor("lively.modules/src/system.js");
Bd.wrapModuleResolution=dH;Bd.unwrapModuleResolution=eH;Bd.livelySystemEnv=fH;Bd.systems=function(){System.constructor.systems||(System.constructor.systems={});return System.constructor.systems};Bd.nameOfSystem=function(b){return Object.keys(Bd.systems()).detect(function(d){return Bd.systems()[d]===b})};Bd.getSystem=av;Bd.removeSystem=bv;Bd.makeSystem=function(b){return Bd.prepareSystem(new System.constructor,b)};Bd.prepareSystem=gH;Bd.urlQuery=function(){return"undefined"!==typeof document&&document.location?
(document.location.search||"").replace(/^\?/,"").split("&").reduce(function(b,d){var h=d.split("=");d=h[0];h=h[1];"true"===h||"false"===h?h=eval(h):isNaN(Number(h))||(h=Number(h));b[d]=h;return b},{}):{}};Bd.preNormalize=function(b,d,h){".."===d&&(d="../index.js");d=d.replace(Bd.doubleSlashRe,function(r){return":"===r[0]?r:r[0]+"/"});var a=b.get("@lively-env").packageRegistry;if(a){var e=h&&a.findPackageHavingURL(h);if(e){var n=e.map,q=e.url;if(n=n&&n[d]||b.map[d])"object"===typeof n&&(n=Bd.normalize_doMapWithObject(n,
e,b)),"string"===typeof n&&""!==n&&(d=n),d.startsWith(".")&&(d=Bd.urlResolve(Bd.join(q,d)))}}a&&(b=a.resolvePath(d,h))&&(b.endsWith("/")&&!d.endsWith("/")&&(b=b.slice(0,-1)),!b.endsWith("/")&&d.endsWith("/")&&(b+="/"),d=b);return d};Bd.postNormalize=function(b,d,h){h=d.replace(Bd.jsExtRe,"");if(d.endsWith("/"))return d;var a=b.get("@lively-env").packageRegistry;if(a){if(a=a.findPackageWithURL(h))return a=(a.main||"index.js").replace(Bd.dotSlashStartRe,""),b=h.replace(Bd.trailingSlashRe,"")+"/"+a}else if(h in
b.packages&&(a=b.packages[h].main))return b=h.replace(Bd.trailingSlashRe,"")+"/"+a.replace(Bd.dotSlashStartRe,"");h=d.match(Bd.jsonJsExtRe);b.debug&&console.log(">> [postNormalize] "+(h?h[1]:d));return h?h[1]:d};Bd.checkExistence=function(b,d){var h,a,e,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:d._fileCheckMap=d._fileCheckMap||{};if(b in d._fileCheckMap)return q.return(d._fileCheckMap[b]);h=d._livelyModulesTranslationCache;if(!(a=h)){q.jumpTo(2);
break}return q.yield(h.fetchStoredModuleSource(b),3);case 3:a=q.yieldResult;case 2:if(a)return q.return(d._fileCheckMap[b]=!0);e=d._fileCheckMap;n=b;return q.yield(Bd.resource(b).exists(),4);case 4:return q.return(e[n]=q.yieldResult)}})};Bd.normalizeHook=function(b,d,h,a){var e=this,n,q,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:if(h&&"cjs"==d)return E.return("cjs");n=e;q=Bd.preNormalize(n,d,h);return E.yield(b(q,h,a),2);case 2:r=E.yieldResult;
v=Bd.postNormalize(n,r||q,!1);y=v.startsWith("file:");n.debug&&console.log("[normalize] "+d+" => "+v);if(Bd.jsExtRe.test(d)||Bd.jsxExtRe.test(d)||Bd.jsonExtRe.test(v)||Bd.nodeModRe.test(v)||Bd.nodeExtRe.test(v)||n.loads&&n.loads[v]){E.jumpTo(3);break}if(Bd.jsExtRe.test(v))return E.yield(Bd.checkExistence(v,n),9);if(v.includes("jspm.dev")||"@empty"==v){E.jumpTo(3);break}return E.yield(Bd.checkExistence(v+".js",n),7);case 7:return E.yieldResult?E.return(v+".js"):E.yield(Bd.checkExistence(v+"/index.js",
n),8);case 8:if(E.yieldResult)return E.return(v+"/index.js");E.jumpTo(3);break;case 9:if(E.yieldResult)return E.return(v);D=v.replace(".js","/index.js");return E.yield(Bd.checkExistence(D,n),10);case 10:return E.yieldResult||!y?E.return(D):E.return(v.replace(".js","/index.node"));case 3:return Bd.jsxJsExtRe.test(v)&&(v=v.replace(".jsx.js",".jsx")),E.return(v)}})};Bd.decanonicalizeHook=function(b,d,h,a){if(d&&d.endsWith("!cjs")){d=d.replace("!cjs","");var e="!cjs"}var n=Bd.preNormalize(this,d,h);b=
b(n,h,a);b=Bd.postNormalize(this,b,!0);e&&(b+=e);this.debug&&console.log("[normalizeSync] "+d+" => "+b);return b};Bd.locateHook=function(b,d){var h,a,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return h=$jscomp.makeIterator(d.name.split("!")),a=h.next().value,h.next(),d.name=a,n.yield(b(d),2);e=n.yieldResult;return n.return(e)})};Bd.normalize_doMapWithObject=function(b,d,h){d=h.get(d.map["@env"]||"@system-env");var a;for(a in b){var e=(h="~"==a[0])?a.substr(1):
a,n=d;for(e=e.split(".");e.length;)n=n[e.shift()];if(!h&&n||h&&!n){var q=b[a];break}}if(q&&"string"!==typeof q)throw Error("Unable to map a package conditional to a package conditional.");return q};Bd.normalize_packageOfURL=function(b,d){var h=Object.keys(d.packages||{}).map(function(a){return 0===b.indexOf(a)?{url:a,penalty:b.slice(a.length).length}:null}).filter(function(a){return!!a});return(d=(h=h.length?h.reduce(function(a,e){return a.penalty>e.penalty?e:a}).url:null)&&d.packages[h])?{systemPackage:d,
packageURL:h}:null};Bd.newModule_volatile=function(b,d){var h=Object.freeze;Object.freeze=function(a){return a};b=b(d);Object.freeze=h;return b};Bd.printSystemConfig=hH;Bd.instantiate_triggerOnLoadCallbacks=function(b,d){var h=this;return b(d).then(function(a){var e={};Bd.promise.waitFor(6E4,function(){return h.get(d.name)},e).then(function(n){if(n===e)console.warn("[lively.modules] instantiate_triggerOnLoadCallbacks for "+d.name+" timed out");else{n=d.name;for(var q=Bd.classHolder.module(h,n),r=
h.get("@lively-env").onLoadCallbacks,v=r.length;v--;){var y=r[v],D=y.moduleName,E=y.callback;if((y.resolved?D:h.decanonicalize(D))===n){r.splice(v,1);try{E(q)}catch(I){console.error(I)}}}Bd.emit("lively.modules/moduleloaded",{module:d.name},Date.now(),h);h._loadingIndicator&&(h._loadingIndicator.remove(),h._loadingIndicator=null)}});return a})};Bd.whenLoaded=iH;Bd.loadedModules=jH;Bd.knownModuleNames=kH;Bd.searchLoadedModules=RQ;Bd.arr=cf;Bd.obj=xf;Bd.promise=bg;Bd.removeHook=Yu;Bd.installHook=Ss;
Bd.isHookInstalled=Ts;Bd.classHolder=Mr;Bd.isNode=System.get("@system-env").node;Bd.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Bd.defaultOptions={notificationLimit:null};Bd.wrapModuleResolution=dH;Bd.wrapModuleResolution=dH;Bd.unwrapModuleResolution=eH;Bd.unwrapModuleResolution=eH;Bd.wrapModuleLoad=lB;Bd.wrapResource=cH;Bd.emit=Rq;Bd.join=MC;Bd.urlResolve=NG;Bd.resource=Uc;Bd.dotSlashStartRe=/^\.?\//;Bd.trailingSlashRe=/\/$/;
Bd.jsExtRe=/\.js$/;Bd.jsxExtRe=/\.jsx$/;Bd.nodeExtRe=/\.node$/;Bd.jsonExtRe=/\.json$/;Bd.jsonJsExtRe=/(.*\.json)\.js$/i;Bd.jsxJsExtRe=/(.*\.jsx)\.js$/i;Bd.doubleSlashRe=/.\/{2,}/g;Bd.nodeModRe=/@node.*/;Bd.whenLoaded=iH;Bd.whenLoaded=iH;Bd.getSystem=av;Bd.getSystem=av;Bd.removeSystem=bv;Bd.removeSystem=bv;Bd.prepareSystem=gH;Bd.prepareSystem=gH;Bd.printSystemConfig=hH;Bd.printSystemConfig=hH;Bd.livelySystemEnv=fH;Bd.livelySystemEnv=fH;Bd.loadedModules=jH;Bd.loadedModules=jH;Bd.knownModuleNames=kH;
Bd.knownModuleNames=kH;Bd.searchLoadedModules=RQ;Bd.searchLoadedModules=RQ;var hg=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package-registry.js");hg.isAbsolute=function(b){return b.startsWith("/")||b.startsWith("http:")||b.startsWith("https:")||b.startsWith("file:")||b.match(hg.urlStartRe)};hg.ensureResource=function(b){return b.isResource?b:hg.resource(b)};hg.semver=bC;hg.arr=cf;hg.obj=xf;hg.promise=bg;hg.getPackage=kB;hg.Package=ki;hg.resource=Uc;hg.isURL=Zu;hg.classHolder=
Mr;hg.urlStartRe=/^[a-z\.-_\+]+:/i;var Qh=function(b,d){d=void 0===d?{}:d;this.System=b;this.packageBaseDirs=d.packageBaseDirs||[];this.devPackageDirs=d.devPackageDirs||[];this.individualPackageDirs=d.individualPackageDirs||[];this._readyPromise=null;this.packageMap={};this._byURL=null};Qh.ofSystem=function(b){var d=b.get("@lively-env").packageRegistry;d||(d=b["__lively.modules__packageRegistry"]=new this(b));return d};Qh.forDirectory=function(b,d){return new this(b,{packageBaseDirs:[hg.ensureResource(d)]})};
Qh.fromJSON=function(b,d){return(new this(b)).fromJSON(d)};Qh.prototype.resetByURL=function(){this._byURL=null};Qh.prototype.allPackageURLs=function(){return Object.keys(this.byURL)};Qh.prototype.toJSON=function(){function b(D){D=D.url;return D.startsWith(d.baseURL)?D.slice(d.baseURL.length).replace(/^\//,""):D}var d=this.System,h=this.packageMap,a=this.individualPackageDirs,e=this.devPackageDirs,n=this.packageBaseDirs,q={},r;for(r in h){var v=h[r];q[r]={};q[r].latest=v.latest;q[r].versions={};for(var y in v.versions)q[r].versions[y]=
v.versions[y].toJSON()}return{packageMap:q,individualPackageDirs:a.map(b),devPackageDirs:e.map(b),packageBaseDirs:n.map(b)}};Qh.prototype.fromJSON=function(b){function d(D){return hg.isURL(D)?hg.resource(D):hg.resource(a.baseURL).join(D)}var h={},a=this.System,e=hg.resource(a.baseURL),n;for(n in b.packageMap){var q=b.packageMap[n];h[n]={};h[n].latest=q.latest;h[n].versions={};for(var r in q.versions){var v=q.versions[r],y=v.url;hg.isAbsolute(y)||(y=e.join(y).url);v=hg.Package.fromJSON(a,Object.assign({},
v,{url:y}));h[n].versions[r]=v}}this.packageMap=h;this.individualPackageDirs=b.individualPackageDirs.map(d);this.devPackageDirs=b.devPackageDirs.map(d);this.packageBaseDirs=b.packageBaseDirs.map(d);this.resetByURL();hg.classHolder.ModulePackageMapping.forSystem(a).clearCache();return this};Qh.prototype.updateFromJSON=function(b){var d=this.packageMap,h;for(h in b.packageMap){var a=b.packageMap[h];d[h]||(d[h]={});d[h].latest?hg.semver.gt(a.latest,d[h].latest)&&(d[h].latest=a.latest):d[h].latest;d[h].versions||
(d[h].versions={});var e=this.System,n=hg.resource(e.baseURL),q;for(q in a.versions){var r=a.versions[q],v=r.url;hg.isAbsolute(v)||(v=n.join(v).url);r=new hg.Package.fromJSON(e,Object.assign({},r,{url:v}));d[h].versions[q]=r}}this.resetByURL();hg.classHolder.ModulePackageMapping.forSystem(System).clearCache();return this};Qh.prototype.whenReady=function(){return this._readyPromise||Promise.resolve()};Qh.prototype.isReady=function(){return!this._readyPromise};Qh.prototype.withPackagesDo=function(b){for(var d in this.packageMap){var h=
this.packageMap[d].versions,a;for(a in h)b(h[a])}};Qh.prototype.findPackage=function(b){for(var d in this.packageMap){var h=this.packageMap[d].versions,a;for(a in h){var e=h[a];if(b(e))return e}}return null};Qh.prototype.filterPackages=function(b){var d=[];this.withPackagesDo(function(h){return b(h)&&d.push(h)});return d};Qh.prototype.allPackages=function(){var b=[],d;for(d in this.packageMap){var h=this.packageMap[d].versions,a;for(a in h)b.push(h[a])}return b};Qh.prototype.sortPackagesByVersion=
function(b){return b.sort(function(d,h){return hg.semver.compare(d.version,h.version,!0)})};Qh.prototype.matches=function(b,d,h){var a=b.version;return b.name!==d?!1:!h||hg.semver.validRange(a||"",!0)&&hg.semver.satisfies(a,h,!0)?!0:!1};Qh.prototype.coversDirectory=function(b){b=hg.ensureResource(b).asDirectory();var d=this.packageBaseDirs,h=this.devPackageDirs;if(this.individualPackageDirs.some(function(e){return e.equals(b)}))return"individualPackageDirs";if(h.some(function(e){return e.equals(b)}))return"devPackageDirs";
var a=b.parent().parent();return d.some(function(e){return e.equals(a)})?this.allPackages().find(function(e){return hg.ensureResource(e.url).equals(b)})?"packageCollectionDirs":"maybe packageCollectionDirs":null};Qh.prototype.lookup=function(b,d){var h=this,a=this.packageMap[b];if(!a)return null;if(!d||"latest"===d)return a.versions[a.latest];if(!hg.semver.validRange(d,!0))throw Error("PackageRegistry>>lookup of "+b+": Invalid version - "+d);a=hg.obj.values(a.versions).filter(function(e){return h.matches(e,
b,d)});return 1>=a.length?a[0]:hg.arr.last(this.sortPackagesByVersion(a))};Qh.prototype.findPackageDependency=function(b,d,h){h||(h=b.dependencies[d]||b.devDependencies[d]);hg.semver.validRange(h,!0)||(h=null);return this.lookup(d,h)};Qh.prototype.findPackageWithURL=function(b){b.isResource&&(b=b.url);b.endsWith("/")&&(b=b.slice(0,-1));return this.byURL[b]};Qh.prototype.findPackageHavingURL=function(b){b.isResource&&(b=b.url);b.endsWith("/")&&(b=b.slice(0,-1));var d=Infinity,h=null,a=this.byURL,e;
for(e in a)if(0===b.indexOf(e)){var n=b.slice(e.length).length;n>=d||(d=n,h=a[e])}return h};Qh.prototype.findPackageForPath=function(b,d){if(hg.isAbsolute(b))return this.findPackageHavingURL(b);if(b.startsWith("."))return null;b=$jscomp.makeIterator(b.split("/")).next().value;if(!b)return null;var h=b.indexOf("@");if(-1<h){var a=b.slice(h+1);b=b.slice(0,h)}return!a&&d?this.findPackageDependency(d,b):this.lookup(b,a)};Qh.prototype.resolvePath=function(b,d){if(hg.isAbsolute(b))return b;var h=d&&d.isPackage||
null;if(!h&&d){if(b.startsWith("."))return d=hg.resource(d),d.isDirectory()||(d=d.parent()),d.join(b).withRelativePartsResolved().url;h=this.findPackageHavingURL(d)}d=this.findPackageForPath(b,h);if(!d)return null;h=b.indexOf("/");return(b=-1===h||h===b.length-1?"":b.slice(h))?hg.resource(d.url).join(b).url:d.url};Qh.prototype.update=function(){var b=this,d,h,a,e,n,q,r,v,y,D,E,I,K,P,N,aa,m,t,u,B,A,H,F,L,U;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){switch(T.nextAddress){case 1:if(!b.isReady())return T.return(b.whenReady().then(function(){return b.update()}));
d=hg.promise.deferred();b._readyPromise=d.promise;b.packageBaseDirs=b.packageBaseDirs.map(function(Y){return Y.asDirectory()});b.individualPackageDirs=b.individualPackageDirs.map(function(Y){return Y.asDirectory()});b.devPackageDirs=b.devPackageDirs.map(function(Y){return Y.asDirectory()});h={};T.setCatchFinallyBlocks(2,3);a=$jscomp.makeIterator(b.packageBaseDirs);e=a.next();case 5:if(e.done){T.jumpTo(7);break}n=e.value;q=$jscomp;r=q.makeIterator;return T.yield(n.dirList(1),8);case 8:v=r.call(q,T.yieldResult),
y=v.next();case 9:if(y.done){e=a.next();T.jumpTo(5);break}D=y.value;E=$jscomp;I=E.makeIterator;return T.yield(D.dirList(1),12);case 12:K=I.call(E,T.yieldResult.filter(function(Y){return Y.isDirectory()})),P=K.next();case 13:if(P.done){y=v.next();T.jumpTo(9);break}N=P.value;return T.yield(b._discoverPackagesIn(N,h,"packageCollectionDirs"),16);case 16:h=T.yieldResult;P=K.next();T.jumpTo(13);break;case 7:aa=$jscomp.makeIterator(b.individualPackageDirs),e=aa.next();case 17:if(e.done){T.jumpTo(19);break}m=
e.value;return T.yield(b._discoverPackagesIn(m,h,"individualPackageDirs"),20);case 20:h=T.yieldResult;e=aa.next();T.jumpTo(17);break;case 19:t=$jscomp.makeIterator(b.devPackageDirs),e=t.next();case 21:if(e.done){T.jumpTo(23);break}u=e.value;return T.yield(b._discoverPackagesIn(u,h,"devPackageDirs"),24);case 24:h=T.yieldResult;e=t.next();T.jumpTo(21);break;case 23:for(B in h)A=h[B],H=A.pkg,F=A.config,L=A.covered,b.System.debug&&console.log("[PackageRegistry] Adding discovered package "+B+" (from "+
L+")"),b._addPackageWithConfig(H,F,B+"/",L);b._updateLatestPackages();d.resolve();case 3:T.enterFinallyBlock();b._readyPromise=null;b.resetByURL();hg.classHolder.ModulePackageMapping.forSystem(b.System).clearCache();T.leaveFinallyBlock(4);break;case 2:U=T.enterCatchBlock();d.reject(U);T.jumpTo(3);break;case 4:return T.return(b)}})};Qh.prototype.addPackageAt=function(b,d,h){d=void 0===d?"individualPackageDirs":d;var a=this,e,n,q,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==
E.nextAddress){e=b.isResource?b.url:b;e.endsWith("/")&&e.slice(0,-1);if(a.byURL[e])throw Error("package in "+e+" already added to registry");return E.yield(a._discoverPackagesIn(hg.ensureResource(b).asDirectory(),{},void 0,h),2)}n=E.yieldResult;for(q in n)a.byURL[q]||(r=n[q],v=r.pkg,y=r.config,D=a._addPackageDir(q,d,!0),a._addPackageWithConfig(v,y,q+"/",D));a.resetByURL();hg.classHolder.ModulePackageMapping.forSystem(a.System).clearCache();a._updateLatestPackages();return E.return(a.findPackageWithURL(b))})};
Qh.prototype.removePackage=function(b,d){d=void 0===d?!0:d;var h=b.name,a=b.version,e=hg.ensureResource(b.url),n=this.coversDirectory(e);"devPackageDirs"===n?this.devPackageDirs=this.devPackageDirs.filter(function(q){return!q.equals(e)}):"individualPackageDirs"===n&&(this.individualPackageDirs=this.individualPackageDirs.filter(function(q){return!q.equals(e)}));n=this.packageMap;n[h]&&(delete n[h].versions[a],0===Object.keys(n[h].versions).length&&delete n[h]);this.resetByURL();hg.classHolder.ModulePackageMapping.forSystem(this.System).clearCache();
d&&this._updateLatestPackages(b.name)};Qh.prototype.updateNameAndVersionOf=function(b,d,h,a,e){var n=this.packageMap;n[d]?n[d].versions[h]||console.warn("[PackageRegistry>>updateNameAndVersionOf] No version entry "+h+" of "+d+" found in registry ("+b.url+")"):console.warn("[PackageRegistry>>updateNameAndVersionOf] "+d+"@"+h+" not found in registry ("+b.url+")");this._addToPackageMap(b,a,e);n[d]&&n[d].versions[h]&&(delete n[d].versions[h],0===Object.keys(n[d].versions).length&&delete n[d]);this._updateLatestPackages(b.name)};
Qh.prototype._updateLatestPackages=function(b){var d=this.packageMap;if(b&&d[b])d[b].latest=hg.arr.last(hg.semver.sort(Object.keys(d[b].versions),!0));else for(var h in d)d[h].latest=hg.arr.last(hg.semver.sort(Object.keys(d[h].versions),!0))};Qh.prototype._discoverPackagesIn=function(b,d,h,a){a=void 0===a?null:a;var e=this,n,q,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress){if(!b.isDirectory())return E.return(d);n=b.asFile().url;if(d.hasOwnProperty(n))return E.return(d);
E.setCatchFinallyBlocks(2);q=a&&a[n]||new hg.Package(e.System,n);return E.yield(q.tryToLoadPackageConfig(),4)}if(2!=E.nextAddress)return r=E.yieldResult,q.setConfig(r),d[n]={pkg:q,config:r,covered:h},e.System.debug&&(v=r,y=v.name,D=v.version,console.log("[lively.modules] package "+y+"@"+D+" discovered in "+b.url)),E.return(d);E.enterCatchBlock();return E.return(d)})};Qh.prototype._addToPackageMap=function(b,d,h,a){if(!d)throw Error("Cannot add package without name");h||(h="0.0.0");var e=this.packageMap;
d=e[d]||(e[d]={versions:{},latest:null});if(d.versions[h])if(e="Redefining version "+h+" of package "+b.url,void 0===a||a)console.warn(e);else throw Error(e+" not allowed");d.versions[h]=b};Qh.prototype._addPackageWithConfig=function(b,d,h,a){(void 0===a?0:a)||this._addPackageDir(h,"individualPackageDirs",!0);b.registerWithConfig(d);this._addToPackageMap(b,b.name,b.version);return b};Qh.prototype._addPackageDir=function(b,d,h){d=void 0===d?"individualPackageDirs":d;h=void 0===h?!0:h;b=hg.ensureResource(b).asDirectory();
if(("packageCollectionDirs"===d||"maybe packageCollectionDirs"===d)&&(this.coversDirectory(b)||"").includes("packageCollectionDirs"))return"packageCollectionDirs";b=this[d].concat(b);this[d]=h?hg.arr.uniqBy(b,function(a,e){return a.equals(e)}):b;return d};$jscomp.global.Object.defineProperties(Qh.prototype,{byURL:{configurable:!0,enumerable:!0,get:function(){if(!this._byURL){this._byURL={};for(var b=$jscomp.makeIterator(this.allPackages()),d=b.next();!d.done;d=b.next())d=d.value,this._byURL[d.url]=
d}return this._byURL}}});hg.PackageRegistry=Qh;var wl=lively.FreezerRuntime.recorderFor("lively.modules/src/export-lookup.js");wl.arr=cf;wl.obj=xf;wl.subscribe=Tz;wl.unsubscribe=PL;wl.module=$u;var Pl=function(b){this.System=b;this.subscribeToSystemChanges()};Pl.forSystem=function(b){this._forSystemMap||(this._forSystemMap=new WeakMap);var d=this._forSystemMap.get(b);if(d)return d;d=new this(b);this._forSystemMap.set(b,d);return d};Pl.run=function(b,d){b=void 0===b?System:b;return this.forSystem(b).systemExports(d)};
Pl.findExportOfValue=function(b,d){d=void 0===d?System:d;var h=this,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(h.run(d),2);a=e.yieldResult;return e.return(a.find(function(n){var q=n.local;n=wl.module(d,n.moduleId);n=n.recorder||d.get(n.id)||{};try{return n[q]===b}catch(r){return!1}}))})};Pl.prototype.subscribeToSystemChanges=function(){var b=this;if(!this._notificationHandlers){var d=this.System;this._notificationHandlers=[wl.subscribe("lively.modules/moduleloaded",
function(h){return b.clearCacheFor(h.module)},d),wl.subscribe("lively.modules/modulechanged",function(h){return b.clearCacheFor(h.module)},d),wl.subscribe("lively.vm/doitresult",function(h){return b.clearCacheFor(h.targetModule)},d)]}};Pl.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var b=this.System;wl.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],b);wl.unsubscribe("lively.modules/modulechanged",this._notificationHandlers[1],b);wl.unsubscribe("lively.vm/doitresult",
this._notificationHandlers[2],b);this._notificationHandlers=null}};Pl.prototype.clearCacheFor=function(b){this.exportByModuleCache[b]=null};Pl.prototype.systemExports=function(b){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.yield(d.rawExportsByModule(b),2);h=a.yieldResult;Object.keys(h).forEach(function(e){return d.resolveExportsOfModule(e,h)});return a.return(wl.arr.flatmap(Object.keys(h),function(e){return h[e]?h[e].resolvedExports||h[e].rawExports:
[]}))})};Pl.prototype.rawExportsByModule=function(b){var d=this,h,a,e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(b=b||{},h=d.System,a=h.get("@lively-env")||{},e=Object.keys(a.loadedModules||{}),n={},q=function(v){1>v%50&&b.progress.step&&b.progress.step("Scanning ...",v/e.length)},r.yield(Promise.all(e.map(function(v,y){b.progress&&q(y);return d.rawExportsOfModule(v,b,n).then(function(D){return D?n[v]=D:null})})),2)):r.return(n)})};Pl.prototype.rawExportsOfModule=
function(b,d){d=void 0===d?{}:d;var h=this,a,e,n,q,r,v,y,D,E,I,K,P,N,aa,m,t,u,B,A,H,F,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(U){switch(U.nextAddress){case 1:a=h;e=a.System;n=a.exportByModuleCache;q=d.excludedPackages||[];r=d.excludedURLs||(d.excludedURLs=q.filter(function(T){return"string"===typeof T}));v=d.excludeFns||(d.excludeFns=q.filter(function(T){return"function"===typeof T}));y=d.excludedPackageURLs||(d.excludedPackageURLs=r.concat(r.map(function(T){return e.decanonicalize(T.replace(/\/?$/,
"/")).replace(/\/$/,"")})));D=d.livelyEnv||(d.livelyEnv=e.get("@lively-env")||{});d.modes||(d.modes=Object.keys(D.loadedModules||{}));if(n[b])return E=n[b].rawExports,U.return(y.includes(E.packageURL)||v.some(function(T){return T(E.packageURL)})?null:n[b]);I=wl.module(e,b);K=I.pathInPackage();N=(P=I.package())&&P.main&&K===P.main;aa=P?P.url:"";m=P?P.name:"";t=P?P.version:"";u={moduleId:b,isMain:N,pathInPackage:K,packageName:m,packageURL:aa,packageVersion:t,exports:[]};if(y.includes(aa)||v.some(function(T){return T(aa)}))return U.return(null);
U.setCatchFinallyBlocks(2);B=I.format();return["register","es6","esm"].includes(B)?(F=u,U.yield(I.exports(),7)):U.yield(I.load(),6);case 6:A=U.yieldResult;u.exports=[];for(H in A)"__useDefault"!==H&&"default"!==H&&u.exports.push({exported:H,local:H,type:"id"});U.jumpTo(5);break;case 7:F.exports=U.yieldResult;case 5:U.leaveTryBlock(3);break;case 2:L=U.enterCatchBlock(),u.error=L;case 3:return U.return(n[b]={rawExports:u})}})};Pl.prototype.resolveExportsOfModule=function(b,d,h){var a=this;h=void 0===
h?{}:h;if(!h[b]){h[b]=!0;var e=d[b];if(e&&!e.resolvedExports){var n=this.System,q=wl.obj.select(e.rawExports,"moduleId isMain packageName packageURL packageVersion pathInPackage".split(" "));e.resolvedExports=wl.arr.flatmap(e.rawExports.exports,function(r){var v=r.type,y=r.exported,D=r.local,E=r.fromModule;if("all"!==v)return[Object.assign({},q,{type:v,exported:y,local:D,fromModule:E})];r=n.decanonicalize(E,b);a.resolveExportsOfModule(r,d,h);return(d[r]&&d[r].resolvedExports||[]).map(function(I){return Object.assign({},
q,{type:I.type,exported:I.exported,local:I.local,fromModule:I.fromModule||E})})});h[b]=!1}}};$jscomp.global.Object.defineProperties(Pl.prototype,{exportByModuleCache:{configurable:!0,enumerable:!0,get:function(){return this._exportByModuleCache||(this._exportByModuleCache={})}}});Ka("E",Pl);wl.ExportLookup=Pl;wl.default=Pl;var Sk=lively.FreezerRuntime.recorderFor("lively.modules/cjs/dependencies.js");Sk.buildPackageMap=mB;Sk.resolvePackageDependencies=lH;Sk.dependencyGraph=mH;Sk.arr=cf;Sk.fun=ik;
Sk.promise=bg;Sk.obj=xf;Sk.resource=Uc;Sk.buildPackageMap=mB;Sk.buildPackageMap=mB;Sk.resolvePackageDependencies=lH;Sk.resolvePackageDependencies=lH;Sk.dependencyGraph=mH;Sk.dependencyGraph=mH;var BK=Object.freeze({__proto__:null,buildPackageMap:mB,resolvePackageDependencies:lH,dependencyGraph:mH}),xl=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/module-package-mapping.js");xl.arr=cf;xl.unsubscribe=PL;xl.subscribe=Tz;xl.knownModuleNames=kH;xl.classHolder=Mr;var Ao=function(b){this.System=
b;this._notificationHandlers=null;this.clearCache();this.subscribeToSystemChanges()};Ao.forSystem=function(b){var d=b["__lively.modules__modulePackageMapCache"];if(d)return d;d=new this(b);return b["__lively.modules__modulePackageMapCache"]=d};Ao.prototype.subscribeToSystemChanges=function(){var b=this;if(!this._notificationHandlers){var d=this.System;this._notificationHandlers=[xl.subscribe("lively.modules/moduleloaded",function(h){return b.addModuleIdToCache(h.module)},d),xl.subscribe("lively.modules/moduleunloaded",
function(h){return b.removeModuleFromCache(h.module)},d),xl.subscribe("lively.modules/packageregistered",function(h){return b.clearCache()},d),xl.subscribe("lively.modules/packageremoved",function(h){return b.clearCache()},d)]}};Ao.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var b=this.System;xl.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],b);xl.unsubscribe("lively.modules/moduleunloaded",this._notificationHandlers[1],b);xl.unsubscribe("lively.modules/packageregistered",
this._notificationHandlers[2],b);xl.unsubscribe("lively.modules/packageremoved",this._notificationHandlers[3],b);this._notificationHandlers=null}};Ao.prototype.clearCache=function(){this._cacheInitialized=!1;this.packageToModule={};this.modulesToPackage={};this.modulesWithoutPackage={}};Ao.prototype.ensureCache=function(){var b=this.System,d=this.packageToModule,h=this.modulesToPackage,a=this.modulesWithoutPackage;if(this._cacheInitialized)return this;for(var e=xl.classHolder.Package.allPackageURLs(b),
n=0;n<e.length;n++)d[e[n]]=[];b=xl.knownModuleNames(b);for(n=0;n<b.length;n++){for(var q=b[n],r=void 0,v=0;v<e.length;v++){var y=e[v];q.startsWith(y)&&(!r||r.length<y.length)&&(r=y)}r?(d[r].push(q),h[q]=r):a[q]={}}this._cacheInitialized=!0;return this};Ao.prototype.addModuleIdToCache=function(b){this.ensureCache();var d=this.packageToModule,h=this.modulesToPackage,a=this.modulesWithoutPackage;if(h[b])return h[b];if(a[b])return null;for(var e=Object.keys(d),n,q=0;q<e.length;q++){var r=e[q];b.startsWith(r)&&
(!n||n.length<r.length)&&(n=r)}if(n)return(d[n]||(d[n]=[])).push(b),h[b]=n;a[b]={};return null};Ao.prototype.removeModuleFromCache=function(b){if(this._cacheInitialized){var d=this.packageToModule,h=this.modulesToPackage,a=this.modulesWithoutPackage;if(a.hasOwnProperty(b))delete a[b];else if(a=h[b])delete h[b],d[a]&&xl.arr.remove(d[a],b)}};Ao.prototype.getPackageURLForModuleId=function(b){return this.modulesToPackage[b]||this.addModuleIdToCache(b)};Ao.prototype.getModuleIdsForPackageURL=function(b){this.ensureCache();
return this.packageToModule[b]||[]};xl.ModulePackageMapping=Ao;xl.default=Ao;var Rc=lively.FreezerRuntime.recorderFor("lively.modules/index.js");Rc.changeSystem=nH;Rc.wrapModuleResolution=oH;Rc.unwrapModuleResolution=pH;Rc.loadedModules=qH;Rc.module=nB;Rc.isModuleLoaded=rH;Rc.doesModuleExist=sH;Rc.printSystemConfig=tH;Rc.whenLoaded=uH;Rc.importPackage=vH;Rc.registerPackage=wH;Rc.removePackage=xH;Rc.reloadPackage=yH;Rc.getPackages=zH;Rc.getPackage=AH;Rc.getPackageOfModule=BH;Rc.ensurePackage=CH;Rc.applyPackageConfig=
DH;Rc.lookupPackage=EH;Rc.moduleSourceChange=FH;Rc.requireMap=GH;Rc.isHookInstalled=HH;Rc.installHook=IH;Rc.removeHook=JH;Rc.wrapModuleLoad=KH;Rc.unwrapModuleLoad=LH;Rc.getSystem=av;Rc.removeSystem=bv;Rc.prepareSystem=gH;Rc._printSystemConfig=hH;Rc._unwrapModuleResolution=eH;Rc._wrapModuleResolution=dH;Rc._whenLoaded=iH;Rc._module=$u;Rc._doesModuleExist=ZG;Rc._isModuleLoaded=YG;Rc.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Rc.defaultSystem=
Rc.defaultSystem||Rc.prepareSystem(Rc.GLOBAL.System);var rU=Rc.defaultSystem;Rc.System=rU;Rc.defaultSystem=rU;Rc.getSystem=av;Rc.getSystem=av;Rc.removeSystem=bv;Rc.removeSystem=bv;Rc.loadedModules=qH;Rc.loadedModules=qH;Rc.printSystemConfig=tH;Rc.printSystemConfig=tH;Rc.whenLoaded=uH;Rc.whenLoaded=uH;Rc.changeSystem=nH;Rc.changeSystem=nH;Rc.module=nB;Rc.module=nB;Rc.doesModuleExist=sH;Rc.doesModuleExist=sH;Rc.isModuleLoaded=rH;Rc.isModuleLoaded=rH;Rc.unwrapModuleResolution=pH;Rc.unwrapModuleResolution=
pH;Rc.wrapModuleResolution=oH;Rc.wrapModuleResolution=oH;Rc.Package=ki;Rc._getPackage=kB;Rc._ensurePackage=PG;Rc.getPackageSpecs=VG;Rc._applyPackageConfig=QG;Rc._importPackage=RG;Rc._removePackage=SG;Rc._reloadPackage=TG;Rc._registerPackage=UG;Rc._lookupPackage=OG;Rc.importPackage=vH;Rc.importPackage=vH;Rc.registerPackage=wH;Rc.registerPackage=wH;Rc.removePackage=xH;Rc.removePackage=xH;Rc.reloadPackage=yH;Rc.reloadPackage=yH;Rc.getPackages=zH;Rc.getPackages=zH;Rc.getPackage=AH;Rc.getPackage=AH;Rc.getPackageOfModule=
BH;Rc.getPackageOfModule=BH;Rc.ensurePackage=CH;Rc.ensurePackage=CH;Rc.applyPackageConfig=DH;Rc.applyPackageConfig=DH;Rc.lookupPackage=EH;Rc.lookupPackage=EH;Rc.PackageRegistry=Qh;Rc.PackageRegistry=Qh;Rc.PackageRegistry=Qh;Rc._moduleSourceChange=jB;Rc.moduleSourceChange=FH;Rc.moduleSourceChange=FH;Rc.computeRequireMap=hB;Rc.requireMap=GH;Rc.requireMap=GH;Rc._isHookInstalled=Ts;Rc._installHook=Ss;Rc._removeHook=Yu;Rc.isHookInstalled=HH;Rc.isHookInstalled=HH;Rc.installHook=IH;Rc.installHook=IH;Rc.removeHook=
JH;Rc.removeHook=JH;Rc._wrapModuleLoad=lB;Rc._unwrapModuleLoad=bH;Rc.wrapModuleLoad=KH;Rc.wrapModuleLoad=KH;Rc.unwrapModuleLoad=LH;Rc.unwrapModuleLoad=LH;Rc.default=Pl;Rc.ExportLookup=Pl;Rc.cjs=BK;Rc.cjs=BK;Rc.cjs=BK;Rc.default=bC;Rc.semver=bC;Rc.ImportInjector=Bq;Rc.scripting=Rc.defaultSystem._scripting={module:Rc._module,ensurePackage:Rc._ensurePackage,registerPackage:Rc._registerPackage,importPackage:Rc._importPackage,lookupPackage:Rc._lookupPackage,ImportInjector:Rc.ImportInjector};Rc.defaultClassToFunctionConverterName=
"initializeES6ClassForLively";Rc.classRuntime=zy;Rc.defaultSystem.global[Rc.defaultClassToFunctionConverterName]=Rc.classRuntime.initializeClass;Rc.classHolder=Mr;Rc.ModulePackageMapping=Ao;Rc.classHolder.ModulePackageMapping=Rc.ModulePackageMapping;Rc.classHolder.Package=Rc.Package;Rc.classHolder.PackageRegistry=Rc.PackageRegistry;var sU=Ka("A",Rc.scripting);Rc.scripting=sU;Rc.scripting=sU;var CK=Object.freeze({__proto__:null,System:rU,getSystem:av,removeSystem:bv,loadedModules:qH,printSystemConfig:tH,
whenLoaded:uH,changeSystem:nH,module:nB,doesModuleExist:sH,isModuleLoaded:rH,unwrapModuleResolution:pH,wrapModuleResolution:oH,importPackage:vH,registerPackage:wH,removePackage:xH,reloadPackage:yH,getPackages:zH,getPackage:AH,getPackageOfModule:BH,ensurePackage:CH,applyPackageConfig:DH,lookupPackage:EH,PackageRegistry:Qh,moduleSourceChange:FH,requireMap:GH,isHookInstalled:HH,installHook:IH,removeHook:JH,wrapModuleLoad:KH,unwrapModuleLoad:LH,ExportLookup:Pl,cjs:BK,semver:bC,scripting:sU});Ka("aX",
CK);var $k=lively.FreezerRuntime.recorderFor("lively.morphic/object-migration.js");$k.isReference=SQ;$k.removeUnreachableObjects=Tq;$k.obj=xf;$k.Path=Eg;$k.connect=Ik;$k.disconnectAll=ax;$k.isReference=SQ;$k.isReference=SQ;var DK=[{date:"2017-04-08",name:"Text and Label textAndAttributes format change",description:"\nChanging the format from\n  [[string1, attr1_1, attr1_2], [string2, attr2_1, attr2_2], ...]\nto\n  [string1, attr1, string2, attr2, ...].\n    ",snapshotConverter:function(b){var d=b.snapshot,
h;for(h in d){var a=d[h],e=a.props&&a.props.textAndAttributes;if(e){var n=e.value;if(!Array.isArray(n))console.warn("object migrator found textAndAttributes field but it is not an Array!");else if(n.length&&"string"!==typeof n[0]){n=[].concat.apply([],n);for(var q=0;q<n.length;q+=2){var r=n[q+1];r&&Array.isArray(r)&&(n[q+1]=Object.assign.apply(Object,[{}].concat($jscomp.arrayFromIterable(r))))}a.props.textAndAttributes=Object.assign({},e,{value:n})}}}return b}},{date:"2017-04-29",name:"Window button fix",
description:'\nA recent change in the structure of windows, that now adds a "button wrapper"\nmorph breaks old windows without it.\n',objectConverter:function(b,d){(d=d.refForId(b.id).realObj)&&d.isMorph&&d.withAllSubmorphsDo(function(h){h.isWindow&&(h.submorphs.some(function(a){return"button wrapper"===a.name})&&h.get("button wrapper").submorphs.some(function(a){return"window menu button"===a.name}),h.minimizedBounds=null,$k.disconnectAll(h.get("minimize")),$k.connect(h.get("minimize"),"onMouseDown",
h,"minimized",{updater:function(a){a(!this.targetObj.minimized)}}))});return b}},{date:"2017-05-03",name:"Style Sheet Status Fix",description:"\nState management of the style sheets has changes substantially, moving all of the style sheets that are being applied to the world.\n",snapshotConverter:function(b){var d=b.id,h=b.snapshot,a;for(a in h){var e=h[a].props;e&&e.styleSheets&&(e.styleSheets.value||(e.styleSheets.value=[]),e.styleSheets.value=e.styleSheets.value&&e.styleSheets.value.filter(function(n){n=
h[n.id];var q=h[n.props.rules.value.id];return!n.props.styledMorphs&&!("lively.serializer-class-info"in q)}))}$k.removeUnreachableObjects([d],h);return b}},{date:"2017-05-22",name:"Removal of ChromeTheme and GithubTheme",description:"\nFor now only a simple default theme...\n",snapshotConverter:function(b){var d=b.snapshot,h;for(h in d){var a=d[h],e=a["lively.serializer-class-info"];e&&("ChromeTheme"===e.className||"GithubTheme"===e.className?(e.className="DefaultTheme",e.module.pathInPackage="ide/themes/default.js"):
"JavaScriptTokenizer"===e.className&&delete a["lively.serializer-class-info"])}return b}},{date:"2017-06-20",name:"Unwrapped Style Sheet Props",description:"Style Sheets now store foldable props in their nested format.",objectConverter:function(b,d){(d=d.refForId(b.id).realObj)&&d.isMorph&&d.withAllSubmorphsDo(function(h){h.styleSheets&&0<h.styleSheets.length&&h.styleSheets.forEach(function(a){for(var e in $k.obj.dissoc(a.rules,["_rev"]))a.rules[e]=a.unwrapFoldedProps(a.rules[e])})});return b}},{date:"2017-07-13",
name:"Renamed style-rules.js to style-sheets.js",snapshotConverter:function(b){var d=b.snapshot,h;for(h in d){var a=d[h]["lively.serializer-class-info"];a&&"StyleSheet"===a.className&&(a.module.pathInPackage="style-sheets.js")}return b}},{date:"2017-07-26",name:"components, ide, and halo extraction",snapshotConverter:function(b){var d=b.snapshot,h=b.packages,a=h&&h["local://lively-object-modules/"]||{};h=[["lively.morphic/halo","lively.halos"],["lively.morphic/components/markers.js","lively.halos"],
["lively.morphic/components/icons.js","lively.morphic"],["lively.morphic/components/loading-indicator.js","lively.components",function(I){return"{"+I+"}"}],["lively.morphic/components","lively.components"],["lively.components/markers.js","lively.halos"],["lively.morphic/ide","lively.ide"],["lively.morphic/text/ui.js","lively.ide",null,"text/ui.js"]];for(var e in a){for(var n=a[e]["index.js"],q=$jscomp.makeIterator(h),r=q.next();!r.done;r=q.next()){var v=$jscomp.makeIterator(r.value),y=v.next().value;
r=v.next().value;if(v=v.next().value){y=new RegExp('(import\\s)(.*)(\\sfrom \\"'+y+")","g");var D=y.exec(n);D&&(n=n.replace(y,"import "+v(D[2])+'from "'+r))}else n=n.replace(new RegExp(y,"g"),r)}a[e]["index.js"]=n}for(var E in d)if((e=d[E]["lively.serializer-class-info"])&&e.module)for(a=e.module.package.name+"/"+e.module.pathInPackage,n=$jscomp.makeIterator(h),q=n.next();!q.done;q=n.next())if(v=$jscomp.makeIterator(q.value),q=v.next().value,r=v.next().value,v.next(),v=v.next().value,a.includes(q)){e.module.package.name=
r;e.module.package.version="0.1.0";e.module.pathInPackage=v||a.substring(a.indexOf(q)+q.length+1)||"index.js";break}return b}},{date:"2017-10-16",name:"change scroll implementation of list items",objectConverter:function(b,d){d=$jscomp.makeIterator(d.objectRefs());for(var h=d.next();!h.done;h=d.next())h=h.value.realObj,h.isList&&"function"===typeof h.initializeSubmorphs&&h.initializeSubmorphs();return b}},{date:"2017-10-30",name:"change implementation of tree",snapshotConverter:function(b){var d=
b.snapshot,h;for(h in d){var a=d[h],e=a["lively.serializer-class-info"];e&&e.module&&("Tree"==e.className&&a.props.submorphs&&(a.props.submorphs.value=[]),"TreeNode"==e.className&&delete d[h],"InspectorTreeData"==e.className&&delete d[h],["PropertyNode","InspectionNode","MorphNode","FoldedNode"].includes(e.className)&&(e.module.pathInPackage="js/inspector/context.js"),"nodeItemContainer"==a.props.name&&delete d[h])}return b}},{date:"2019-02-17",name:"change storage of commit metadata",snapshotConverter:function(b){var d=
b.id,h=b.snapshot;Object.values(h).map(function(a){if(a.props.metadata&&$k.isReference(a.props.metadata.value)&&(a=h[a.props.metadata.value.id],a.props.commit&&$k.isReference(a.props.commit.value))){var e=h[a.props.commit.value.id].props,n=e.type,q=e.name;e=e._id;n&&q&&e&&(a.props.commit.value='__lv_expr__:({type: "'+n.value+'", name: "'+q.value+'", _id: "'+e.value+'"})')}});$k.removeUnreachableObjects([d],h);return b}},{date:"2019-07-25",name:"world superclass extraction",snapshotConverter:function(b){var d=
b.packages,h,a=$k.Path(["local://lively-object-modules/","EmptyWorld","index.js"]);if(h=a.get(d))h=h.replace('import { World, morph } from "lively.morphic";','import { morph } from "lively.morphic";\nimport { LivelyWorld as World } from "lively.ide/world.js"').replace('import { World } from "lively.morphic";','import { LivelyWorld as World } from "lively.ide/world.js"'),a.set(d,h);return b}},{date:"2019-08-05",name:"remove Camphor from system",snapshotConverter:function(b){Object.values(b.snapshot).map(function(d){d.props.fontFamily&&
"Camphor"==d.props.fontFamily.value&&(d.props.fontFamily.value="Nunito")});return b}},{date:"2020-10-09",name:"remove style guide",snapshotConverter:function(b){var d=b.snapshot;Object.values(d).map(function(h){h.props.master&&"string"===typeof h.props.master.value&&(h.props.master.value=h.props.master.value.split("styleguide://style guide").join("styleguide://System"));h.props.master&&h.props.master.value.id&&(h=d[h.props.master.value.id],h.props.auto.value=h.props.auto.value.split("styleguide://style guide").join("styleguide://System"))});
return b}}];$k.migrations=DK;$k.migrations=DK;$k.migrations=DK;var ne=lively.FreezerRuntime.recorderFor("lively.morphic/serialization.js");ne.normalizeOptions=function(b){b=Object.assign({reinitializeIds:!1,plugins:[].concat($jscomp.arrayFromIterable(ne.allPlugins),[new ne.StyleguidePlugin])},b);b.reinitializeIds&&(b.reinitializeIds="function"===typeof b.reinitializeIds?b.reinitializeIds:function(d,h){return h.realObj.isMorph?ne.newMorphId(h.realObj.constructor):null});return b};ne.serializeMorph=
oB;ne.deserializeMorph=pB;ne.loadWorldFromResource=TQ;ne.saveWorldToResource=UQ;ne.copyMorph=MH;ne.createMorphSnapshot=cv;ne.loadMorphFromSnapshot=bq;ne.resourceToJSON=y7;ne.findPackagesInFileSpec=z7;ne.packagesOfSnapshot=VQ;ne.loadPackagesAndModulesOfSnapshot=qB;ne.findRequiredPackagesOfSnapshot=NH;ne.requiredModulesOfSnapshot=Uq;ne.deserializeWithMigrations=Xz;ne.serialize=dx;ne.allPlugins=pq;ne.MorphicEnv=go;ne.resource=Uc;ne.newMorphId=aA;ne.morph=zj;ne.pathForBrowserHistory=ex;ne.ast=PI;ne.StyleguidePlugin=
uK;ne.findLocalComponents=gB;ne.serializeMorph=oB;ne.serializeMorph=oB;ne.deserializeMorph=pB;ne.deserializeMorph=pB;ne.loadWorldFromResource=TQ;ne.loadWorldFromResource=TQ;ne.saveWorldToResource=UQ;ne.saveWorldToResource=UQ;ne.copyMorph=MH;ne.copyMorph=MH;ne.modules=CK;ne.createFiles=ce;ne.promise=bg;ne.Path=Eg;ne.graph=wr;ne.arr=cf;ne.migrations=DK;var Uy=ne.modules;ne.registerPackage=Uy.registerPackage;ne.module=Uy.module;ne.getPackage=Uy.getPackage;ne.ensurePackage=Uy.ensurePackage;ne.lookupPackage=
Uy.lookupPackage;ne.semver=Uy.semver;ne.objectScriptingEnabled=!1;ne.createMorphSnapshot=cv;ne.createMorphSnapshot=cv;ne.loadMorphFromSnapshot=bq;ne.loadMorphFromSnapshot=bq;ne.packagesOfSnapshot=VQ;ne.packagesOfSnapshot=VQ;ne.loadPackagesAndModulesOfSnapshot=qB;ne.loadPackagesAndModulesOfSnapshot=qB;ne.findRequiredPackagesOfSnapshot=NH;ne.findRequiredPackagesOfSnapshot=NH;var qc=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js");qc.generateUnfolded=function(b,d,h){d=void 0===d?["top","left",
"right","bottom"]:d;h=void 0===h?"core":h;var a={},e={};d=$jscomp.makeIterator(d);for(var n=d.next();!n.done;e={$jscomp$loop$prop$m$1541$2792:e.$jscomp$loop$prop$m$1541$2792},n=d.next())e.$jscomp$loop$prop$m$1541$2792=n.value,a[b+qc.string.capitalize(e.$jscomp$loop$prop$m$1541$2792)]={group:h,derived:!0,generated:!0,after:[b],get:function(q){return function(){return this.getProperty(b)[q.$jscomp$loop$prop$m$1541$2792]}}(e),set:function(q){return function(r){var v={};this[b]=Object.assign({},this.getProperty(b),
(v[q.$jscomp$loop$prop$m$1541$2792]=r,v))}}(e)};return a};qc.Color=If;qc.Line=Wk;qc.Point=Pf;qc.pt=xh;qc.rect=cl;qc.Rectangle=ie;qc.Transform=oj;qc.string=Ng;qc.properties=Qm;qc.obj=xf;qc.arr=cf;qc.num=jk;qc.promise=bg;qc.tree=xr;qc.PropertyPath=Eg;qc.signal=Jk;qc.copy=Yz;qc.deserializeSpec=Jo;qc.ExpressionSerializer=kk;qc.serializeSpec=an;qc.getClassName=Io;qc.renderRootMorph=UE;qc.ShadowObject=ro;qc.AnimationQueue=nJ;qc.easings=so;qc.addOrChangeCSSDeclaration=Kp;qc.Icon=rm;qc.morph=zj;qc.newMorphId=
aA;qc.sanitizeFont=Zz;qc.MorphicEnv=go;qc.config=Yk;qc.CommandHandler=Bqa;qc.KeyHandler=XS;qc.findKeysForPlatform=XE;qc.TargetScript=YS;qc.copyMorph=MH;qc.ComponentPolicy=vK;qc.defaultCommandHandler=new qc.CommandHandler;var xj=Ka("M",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),h=d.hasOwnProperty("Morph")&&"function"===typeof d.Morph?d.Morph:d.Morph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a||(a={});var e=a.env||qc.MorphicEnv.default();this._env=e;this._rev=e.changeManager.revision;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=qc.newMorphId(qc.getClassName(this));this._animationQueue=new qc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=qc.obj.select(a,qc.arr.intersect(Object.keys(a),this.styleProperties));
this.initializeProperties(a);a.bounds&&(this.setBounds(a.bounds),this._parametrizedProps.extent=this.extent,this._parametrizedProps.position=this.position);if(void 0!=a.height||void 0!=a.width)this._parametrizedProps.extent=this.extent;a.layout&&(this.layout=a.layout);if("function"===typeof this.onLoad&&!this.isComponent)this.onLoad()}},{key:"__serialization_id_property__",get:function(){return"_id"}},{key:"__deserialize__",value:function(a,e,n,q){this._env=qc.MorphicEnv.default();this._rev=a.rev;
this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=e.id;this._animationQueue=new qc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=qc.obj.select(a.props,qc.arr.intersect(Object.keys(a.props),this.styleProperties));this._parametrizedProps.__takenFromSnapshot__=!0;a=q.expressionSerializer;for(var r in this._parametrizedProps)(e=this._parametrizedProps[r].value)&&qc.obj.isString(e)&&a.isSerializedExpression(e)&&
(this._parametrizedProps[r]=a.deserializeExpr(e));this.initializeProperties();this._pool=q}},{key:"__after_deserialize__",value:function(a,e,n){this.resumeStepping();if("function"===typeof this.onLoad)try{this.onLoad()}catch(q){console.error("[lively.morphic] "+this+".onLoad() error: "+q.stack)}this.isComponent&&!this.owner||delete this._pool;this.master&&(n.mastersInSubHierarchy?n.mastersInSubHierarchy.push(this.master):n.mastersInSubHierarchy=[this.master])}},{key:"__only_serialize__",get:function(){var a=
this.defaultProperties,e=this.propertiesAndPropertySettings().properties,n=[];0<this._tickingScripts.length&&n.push("_tickingScripts");this.attributeConnections&&n.push("attributeConnections");var q=[this].concat($jscomp.arrayFromIterable(this.ownerChain())).map(function(y){return y.__isBeingSerialized__&&y.master}).find(Boolean),r;for(r in e){var v=e[r];q&&q.managesMorph(this)&&void 0!=q._overriddenProps.get(this)[r]?n.push(r):v.readOnly||v.derived||qc.obj.equals(this[r],a[r])||v.hasOwnProperty("serialize")&&
!v.serialize||n.push(r)}return q&&!this.isComponent?q.propsToSerializeForMorph(this,n):n}},{key:"__additionally_serialize__",value:function(a,e,n,q){if((e=a.props.submorphs)&&!this.isEpiMorph)for(e=e.value,q=e.length;q--;)n.refForId(e[q].id).realObj.isEpiMorph&&qc.arr.removeAt(e,q);n=$jscomp.makeIterator(qc.arr.intersect(this.__only_serialize__,["borderColor","borderWidth","borderStyle","borderRadius"]));for(e=n.next();!e.done;e=n.next())e=e.value,a.props[e]={key:e,verbatim:!0,value:qc.obj.extract(this[e],
["top","right","bottom","left"],function(r,v){return v&&v.isColor?v.toTuple():v})}}},{key:"isMorph",get:function(){return!0}},{key:"id",get:function(){return this._id}},{key:"env",get:function(){return this._env}},{key:"spec",value:function(a,e){a=void 0===a?!0:a;e=void 0===e?new WeakMap:e;var n=this.defaultProperties,q=this.propertiesAndPropertySettings().properties,r={submorphs:!0},v={};if(e.has(this))return e.get(this);e.set(this,v);for(var y in q){var D=q[y];D&&(D.readOnly||D.derived||D.hasOwnProperty("serialize")&&
!D.serialize||y in r||a&&(qc.obj.equals(this[y],n[y])||this[y]&&n[y]&&this[y].valueOf&&n[y].valueOf&&qc.obj.equals(this[y].valueOf(),n[y].valueOf()))||(v[y]=this[y]&&this[y].isMorph?this[y].spec(a,e):this[y]&&"layout"===y?this[y].copy():this[y]))}v.submorphs=this.submorphs.map(function(E){return E.spec(a,e)});v.type=this.constructor;return v}},{key:"printSpec",value:function(a,e){e=void 0===e?0:e;a=(void 0===a?null:a)||this.spec();var n={name:!0,type:!0,submorphs:!0},q="  ".repeat(e+1),r="  ".repeat(e)+
"{\n"+(q+'name: "'+a.name+'",\n')+(q+'type: "'+a.type+'",\n'),v;for(v in a)n[v]||(r+=""+q+v+": "+qc.string.print(a[v])+",\n");if(a.submorphs){r+=q+"submorphs: [\n";a=$jscomp.makeIterator(a.submorphs);for(n=a.next();!n.done;n=a.next())r+=this.printSpec(n.value,e+1);r+="]\n"}return r+="  ".repeat(e)+"}\n"}},{key:"defaultProperties",get:function(){var a=this.constructor,e=a[Symbol.for("lively-instance-superclass")];if(!a._morphicDefaultPropertyValues||a._morphicDefaultPropertyValues==(e&&e._morphicDefaultPropertyValues)){a=
this.constructor._morphicDefaultPropertyValues={};e=this.propertiesAndPropertySettings().properties;for(var n in e){var q=e[n];q.hasOwnProperty("defaultValue")&&(q=q.defaultValue,Array.isArray(q)&&(q=q.slice()),a[n]=q)}}return this.constructor._morphicDefaultPropertyValues}},{key:"defaultProperty",value:function(a){return this.defaultProperties[a]}},{key:"getProperty",value:function(a){return this._morphicState[a]}},{key:"setProperty",value:function(a,e,n){return this.addValueChange(a,e,n)}},{key:"changeMetaData",
value:function(a,e,n,q){n=void 0===n?!0:n;q=void 0===q?!0:q;var r=this.metadata;r||(r={});(new qc.PropertyPath(a)).withParentAndKeyDo(r,!0,function(v,y){v[y]=q?Object.assign({},v[y],{},e):e;var D=v.__dont_serialize__;n?D&&D.includes(y)&&(qc.arr.remove(D,y),0===D.length&&delete v.__dont_serialize__):(D||(D=v.__dont_serialize__=[]),qc.arr.pushIfNotIncluded(D,y))});this.metadata=r}},{key:"installFont",value:function(a,e){var n={};this.installedFonts=Object.assign({},this.installedFonts,(n[a]=e,n));this.insertFontCSS(a,
e)}},{key:"uninstallFont",value:function(a){delete this.installedFonts[a];(a=document.getElementById(this.id+"-"+a))&&a.remove()}},{key:"ensureInstalledFonts",value:function(a,e){a=$jscomp.makeIterator(a);for(var n=a.next();!n.done;n=a.next())(n=document.getElementById(this.id+"-"+n.value))&&n.remove();e=$jscomp.makeIterator(e);for(n=e.next();!n.done;n=e.next())a=n.value,this.env.fontMetric.isFontSupported(qc.sanitizeFont(a))||this.insertFontCSS(a,this.installedFonts[a])}},{key:"insertFontCSS",value:function(a,
e){var n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(n.whenRendered(),2);e.endsWith(".otf")?qc.addOrChangeCSSDeclaration(n.id+"-"+a,"@font-face {\n             font-family: "+a+';\n             src: url("'+n.installedFonts[a]+'") format("opentype");\n         }'):qc.addOrChangeCSSDeclaration(n.id+"-"+a,'@import url("'+n.installedFonts[a]+'");');q.jumpToEnd()})}},{key:"toString",value:function(){return"<"+qc.getClassName(this)+" - "+(this.name?
this.name:this.id)+">"}},{key:"edit",value:function(a){return this.env.world.execCommand("open object editor",Object.assign({className:qc.getClassName(this)},a,{target:this}))}},{key:"inspect",value:function(a){return this.env.world.execCommand("open object inspector",Object.assign({},a,{target:this}))}},{key:"livelyCustomInspect",value:function(){var a={_id:!0,_owner:!0},e={},n=this.propertiesAndPropertySettings().properties,q=[],r;for(r in n)a[r]||n[r].derived&&!n[r].showInInspector||(e[r]=!0,q.push({key:r,
value:this[r]}));q.push({key:"id",value:this.id});q.push({key:"owner",value:this.owner});q=q.sort(function(y,D){y=y.key.toLowerCase();D=D.key.toLowerCase();return y<D?-1:y===D?0:1});if(this.attributeConnections)for(n=$jscomp.makeIterator(this.attributeConnections),r=n.next();!r.done;r=n.next())r=r.value,a["$$"+r.sourceAttrName,""+r.sourceAttrName]=!0;Object.assign(e,a);a=$jscomp.makeIterator("attributeConnections _animationQueue _morphicState _dirty doNotCopyProperties doNotSerialize _env _cachedPaths _pathDependants _rendering _rev _submorphOrderChanged _tickingScripts _transform _invTransform _styleSheetProps _renderer _tooltipViewer layout".split(" "));
for(n=a.next();!n.done;n=a.next())n=n.value,n in this&&(e[n]=!0,q.push({key:n,value:this[n],keyString:"[internal] "+n}));for(var v in this)!e[v]&&this.hasOwnProperty(v)&&q.unshift({key:v,value:this[v],keyString:"[UNKNOWN PROPERTY] "+v});return{sort:!1,includeDefault:!1,properties:q}}},{key:"show",value:function(a){return $world.execCommand("show morph",{morph:this,loop:a})}},{key:"setStatusMessage",value:function(a,e,n,q){var r=this.world();q=Object.assign({maxLines:7},q);return r?r.setStatusMessageFor(this,
a,e,n,q):console.log(a)}},{key:"showError",value:function(a){var e=this.world();return e?e.showErrorFor(this,a):console.error(a)}},{key:"onChange",value:function(a){var e=this,n=a.meta&&a.meta.animation,q=a.prop,r=a.value;if("position"===q||"rotation"===q||"scale"===q||"origin"===q||"reactsToPointer"===q)this.onBoundsChanged(this.bounds()),n={},this.updateTransform((n[q]=r,n));else if("extent"==q)this.onBoundsChanged(this.bounds());else"layout"==q&&(n?r&&r.attachAnimated(n.duration,this,n.easing):
r&&r.attach());this.layout&&this.layout.onChange(a);this.isComponent&&!qc.PropertyPath("meta.metaInteraction").get(a)&&(q=this.world(),delete this._preview,(q?q.withAllSubmorphsSelect(function(v){return v.master&&v.master.uses(e)}):[]).forEach(function(v){v.requestMasterStyling()}));if(this.master)this.master.onMorphChange(this,a)}},{key:"onBoundsChanged",value:function(a){var e=this;qc.signal(this,"bounds",a);[].concat($jscomp.arrayFromIterable(a.corners),$jscomp.arrayFromIterable(a.sides)).forEach(function(n){qc.signal(e,
n,a.partNamed(n))})}},{key:"onSubmorphChange",value:function(a,e){var n=this;if(this.isComponent&&!qc.PropertyPath("meta.metaInteraction").get(a)&&!qc.PropertyPath("meta.layoutAction").get(a)){var q=this.world();q&&q.withAllSubmorphsDo(function(r){r.master&&r.master.uses(n)&&r.requestMasterStyling()})}if(this.master)this.master.onMorphChange(e,a);this.layout&&this.layout.onSubmorphChange(e,a)}},{key:"changes",get:function(){return this.env.changeManager.changesFor(this)}},{key:"applyChange",value:function(a){this.env.changeManager.apply(this,
a)}},{key:"addValueChange",value:function(a,e,n){return this.env.changeManager.addValueChange(this,a,e,n)}},{key:"addMethodCallChangeDoing",value:function(a,e){return this.env.changeManager.addMethodCallChangeDoing(a,this,e)}},{key:"groupChangesWhile",value:function(a,e){return this.env.changeManager.groupChangesWhile(this,a,e)}},{key:"dontRecordChangesWhile",value:function(a){return this.env.changeManager.dontRecordChangesWhile(this,a)}},{key:"recordChangesWhile",value:function(a,e){return this.env.changeManager.recordChangesWhile(a,
e)}},{key:"recordChangesStart",value:function(a){return this.env.changeManager.recordChangesStartForMorph(this,a)}},{key:"recordChangesStop",value:function(a){return this.env.changeManager.recordChangesStopForMorph(this,a)}},{key:"withMetaDo",value:function(a,e){return this.env.changeManager.doWithValueChangeMeta(a,this,e)}},{key:"undoStart",value:function(a){return this.env.undoManager.undoStart(this,a)}},{key:"undoStop",value:function(a){return this.env.undoManager.undoStop(this,a)}},{key:"undoInProgress",
get:function(){return this.env.undoManager.undoInProgress}},{key:"animate",value:function(a){var e=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(n=e._animationQueue.registerAnimation(a),e._animationQueue.animationsActive?n?q.yield(n.asPromise(),3):q.jumpTo(2):(n&&n.finish(),q.return(Promise.resolve(e)))):2!=q.nextAddress?q.return(q.yieldResult):q.return(Promise.resolve(e))})}},{key:"withAnimationDo",value:function(a,e){var n=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){q=
n.groupChangesWhile(!1,a);r=q.changes;return v.yield(Promise.all(Object.values(qc.arr.groupBy(r,function(y){return y.target.id})).map(function(y){var D=Object.assign({},e),E;y.forEach(function(I){E=I.target;I.reverseApply();D[I.prop]=I.value});return E&&E.animate(D)})),0)})}},{key:"isClip",value:function(){return"visible"!==this.clipMode}},{key:"scrollExtent",get:function(){return(this.submorphs.length?this.innerBounds().union(this.submorphBounds()):this.innerBounds()).extent().addPt(this.scrollbarOffset)}},
{key:"scrollBounds",value:function(){var a=this.scroll,e=this.scrollExtent;return new qc.Rectangle(a.x,a.y,e.x,e.y)}},{key:"scrollDown",value:function(a){this.scroll=this.scroll.addXY(0,a)}},{key:"scrollUp",value:function(a){this.scrollDown(50*-a)}},{key:"scrollLeft",value:function(a){this.scroll=this.scroll.addXY(a,0)}},{key:"scrollRight",value:function(a){this.scrollLeft(-a)}},{key:"scrollPageDown",value:function(){this.scrollDown(this.height)}},{key:"scrollPageUp",value:function(){this.scrollUp(this.height)}},
{key:"addStyleClass",value:function(a){this.styleClasses=qc.arr.uniq(this.styleClasses.concat(a))}},{key:"removeStyleClass",value:function(a){this.styleClasses=this.styleClasses.filter(function(e){return e!=a})}},{key:"adjustOrigin",value:function(a){var e=this.origin,n=this.globalBounds().topLeft();this.origin=a;this.submorphs.forEach(function(r){return r.position=r.position.subPt(a.subPt(e))});var q=this.globalBounds().topLeft();n=n.subPt(q);this.globalPosition=this.globalPosition.addPt(n)}},{key:"setBounds",
value:function(a){this.extent=a.extent();this.position=a.topLeft().addPt(this.origin)}},{key:"innerBounds",value:function(){var a=this.extent;return qc.rect(0,0,a.x,a.y)}},{key:"relativeBounds",value:function(a){a=a||this.world();var e=this.origin.negated().extent(this.extent);e=a?this.transformRectToMorph(a,e):this.getGlobalTransform().transformRectToRect(e);this.isClip()||this.submorphs.forEach(function(n){e=e.union(n.relativeBounds(a))});return e}},{key:"bounds",value:function(){return this.relativeBounds(this.owner)}},
{key:"relativeSubmorphBounds",value:function(){var a=this.innerBounds();return this.submorphs.map(function(e){e=e.bounds();return qc.rect(e.x/a.width,e.y/a.height,e.width/a.width,e.height/a.height)})}},{key:"globalBounds",value:function(){return this.relativeBounds(this.world())}},{key:"submorphBounds",value:function(a){a=qc.arr.filter(this.submorphs,void 0===a?function(){return!0}:a);return 1>a.length?this.innerBounds():a.map(function(e){return e.bounds()}).reduce(function(e,n){return e.union(n)})}},
{key:"fitToSubmorphs",value:function(a){a=void 0===a?qc.Rectangle.inset(0):a;var e=this.submorphs;if(e.length){e=e.reduce(function(r,v){return r.union(v.bounds())},e[0].bounds());var n=e.top()-a.top(),q=e.left()-a.left();this.moveBy(qc.pt(q,n));qc.arr.invoke(this.submorphs,"moveBy",qc.pt(-q,-n));this.extent=qc.pt(e.width+a.left()+a.right(),e.height+a.top()+a.bottom())}}},{key:"align",value:function(a,e){return this.moveBy(e.subPt(a))}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);
return this}},{key:"rotateBy",value:function(a){this.rotation+=a}},{key:"resizeBy",value:function(a){this.extent=this.extent.addPt(a)}},{key:"snap",value:function(a){this.position=this.position.roundTo(a||1)}},{key:"isEpiMorph",get:function(){return this.getProperty("epiMorph")&&!this.isComponent}},{key:"isUsedAsEpiMorph",value:function(){for(var a=this;a;){if(a.isEpiMorph)return!0;a=a.owner}return!1}},{key:"replaceWith",value:function(a,e,n){n=void 0===n?!0:n;if(this===a||!a)return a;if(this===a.owner)return a.replaceWith(this),
a;var q=this.owner,r=this.submorphs,v=this.getTransform().copy();e="number"===typeof e?e:q?q.submorphs.indexOf(this):-1;var y=a.owner,D=qc.arr.without(a.submorphs,this),E=a.getTransform().copy(),I=y?y.submorphs.indexOf(a):-1;q&&this.remove();y&&a.remove();n&&(this.submorphs=[],a.submorphs=[]);q===a?(y&&y.addMorphAt(this,I),n&&(this.submorphs=D.slice(0,e).concat(a).concat(D.slice(e)),a.submorphs=r)):(q&&q.addMorphAt(a,e),y&&y.addMorphAt(this,I),n&&(a.submorphs=r,this.submorphs=D));a.setTransform(v);
this.setTransform(E);return a}},{key:"addMorphAt",value:function(a,e){var n=this;if(!a||"object"!==typeof a)throw Error(a+" cannot be added as a submorph to "+this);if(a.isMorph){if(a.isAncestorOf(this))return this.env.world.logError(Error("addMorph: Circular relationships between morphs not allowed\ntried to add "+a+" to "+this)),null;if(a===this)return this.env.world.logError(Error("addMorph: Trying to add itself as a submorph: "+this)),null}a.isMorph||(a=qc.morph(a));var q=this.submorphs.indexOf(a);
if(!(-1<q&&q===e))return this.requestMasterStyling(),this.addMethodCallChangeDoing({target:this,selector:"addMorphAt",args:[a,e],undo:{target:this,selector:"removeMorph",args:[a]}},function(){var r=a.owner,v=n.submorphs;if(r&&r!==n){var y=a.transformForNewOwner(n);a.remove()}a._env!==n._env&&(a._env=n._env);e=Math.min(v.length,Math.max(0,e));-1<q&&(v.splice(q,1),q<e&&e--);v.splice(e,0,a);a._owner=n;a._cachedPaths={};y&&a.setTransform(y);a.requestStyling();n._morphicState.submorphs=v;n._submorphOrderChanged=
!0;n.makeDirty();a.resumeSteppingAll();a.withAllSubmorphsDo(function(D){return D.onOwnerChanged(n)});n.world()&&a._requestMasterStyling&&(a.master&&a.master.applyIfNeeded(!0),a._requestMasterStyling=!1)}),a}},{key:"addMorph",value:function(a,e){var n=this.submorphs;e=e?n.indexOf(e):-1;return this.addMorphAt(a,-1===e?n.length:e)}},{key:"addMorphBack",value:function(a){return this.addMorph(a,a===this.submorphs[0]?this.submorphs[1]:this.submorphs[0])}},{key:"removeMorph",value:function(a){var e=this.submorphs.indexOf(a);
-1!==e&&((this.getProperty("submorphs")||[]).splice(e,1),this.addMethodCallChangeDoing({target:this,selector:"removeMorph",args:[a],undo:{target:this,selector:"addMorphAt",args:[a,e]}},function(){a.suspendSteppingAll();a._owner=null}),this._pathDependants=qc.arr.withoutAll(this._pathDependants,a._pathDependants))}},{key:"remove",value:function(){var a=this;qc.signal(this,"onRemove");this.ownerChain().forEach(function(e){e._stylingVisitor&&e._stylingVisitor.deleteFromCache(a)});this.owner&&this.owner.removeMorph(this);
this._cachedPaths={};this._pathDependants.forEach(function(e){return e._cachedPaths={}});this._pathDependants=[];this.withAllSubmorphsDo(function(e){return e.onOwnerChanged(null)});return this}},{key:"abandon",value:function(a){a=void 0===a?!0:a;qc.signal(this,"onAbandon");this.emptyComments();a&&this.remove();this.submorphs.forEach(function(e){return e.abandon(!1)})}},{key:"onOwnerChanged",value:function(a){a&&this.master&&this.requestMasterStyling()}},{key:"fadeOut",value:function(a){a=void 0===
a?1E3:a;var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(e.animate({opacity:0,duration:a,easing:qc.easings.outQuad}),2);e.remove();e.opacity=1;n.jumpToEnd()})}},{key:"fadeIn",value:function(a){a=void 0===a?1E3:a;var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){e.opacity=0;e.animate({opacity:1,duration:a});return n.return(e)})}},{key:"fadeIntoWorld",value:function(a,e){a=void 0===a?$world.visibleBounds().center():
a;e=void 0===e?200:e;var n=this,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return q=new qc.Morph({opacity:0,scale:0,epiMorph:!0,hasFixedPosition:!0,fill:qc.Color.transparent}),r=n.env.world,q.openInWorld(),q.addMorph(n),n.position=q.extent.scaleBy(.5),q.center=a,q.scale=.8,y.yield(q.animate({opacity:1,scale:1,duration:e}),2);v=n.globalBounds();r.addMorph(n);n.top=v.top();n.left=v.left();q.remove();return y.return(n)})}},{key:"removeAllMorphs",value:function(){this.submorphs=
[]}},{key:"bringToFront",value:function(){this.owner&&qc.arr.last(this.owner.submorphs)!==this&&this.owner.addMorph(this);return this}},{key:"owner",get:function(){return this._owner}},{key:"withAllSubmorphsDetect",value:function(a){if(a(this))return this;for(var e=$jscomp.makeIterator(this.submorphs),n=e.next();!n.done;n=e.next())if(n=n.value.withAllSubmorphsDetect(a))return n}},{key:"withAllSubmorphsDoExcluding",value:function(a,e){var n=[a(this)];if(e(this))return n;for(var q=$jscomp.makeIterator(this.submorphs),
r=q.next();!r.done;r=q.next())qc.arr.pushAll(n,r.value.withAllSubmorphsDoExcluding(a,e));return n}},{key:"withAllSubmorphsDo",value:function(a){for(var e=[a(this)],n=$jscomp.makeIterator(this.submorphs),q=n.next();!q.done;q=n.next())qc.arr.pushAll(e,q.value.withAllSubmorphsDo(a));return e}},{key:"withAllSubmorphsSelect",value:function(a){var e=[];this.withAllSubmorphsDo(function(n){return a(n)&&e.push(n)});return e}},{key:"ownerChain",value:function(){return this.owner?[this.owner].concat(this.owner.ownerChain()):
[]}},{key:"world",value:function(){return this.owner?this.owner.world():null}},{key:"getWindow",value:function(){return this.isWindow?this:this.ownerChain().find(function(a){return a.isWindow})}},{key:"openInWorldNear",value:function(a,e){var n=this;e=e||this.world()||this.env.world;if(!e)return this;this.master&&(this.opacity=0,this.master.whenApplied().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(n.whenRendered(),2);n.opacity=
1;q.jumpToEnd()})}));this.center=a;this.setBounds(e.visibleBoundsExcludingTopBar().translateForInclusion(this.bounds()));return this.openInWorld(this.position)}},{key:"openInWorldNearHand",value:function(a){a=a||this.world()||this.env.world;var e=a.firstHand?a.firstHand.position.addPt(this.hasFixedPosition?qc.pt(0,0):a.scroll):qc.pt(0,0);return a?this.openInWorldNear(e):void 0}},{key:"openInWorld",value:function(a,e){e=e||this.world()||this.env.world;if(!e)return console.warn("Cannot open morph "+
this+", world morph not found;"),this;a?this.position=a:(this.center=this.hasFixedPosition?e.visibleBounds().extent().scaleBy(.5,.5):e.visibleBounds().center(),this.snap());e.addMorph(this);return this}},{key:"openInHand",value:function(a){a||(a=(this.world()||this.env.world).firstHand);a.grab(this);this.center=qc.pt(0,0)}},{key:"openInWindow",value:function(a){a=void 0===a?{title:this.name,name:"window for "+this.name,world:null}:a;return(a.world||this.world()||this.env.world).openInWindow(this,
qc.obj.dissoc(a,["world"]))}},{key:"isAncestorOf",value:function(a){for(a=a.owner;a;){if(a===this)return!0;a=a.owner}return!1}},{key:"morphsContainingPoint",value:function(a,e){e||(e=[]);if(!this.fullContainsWorldPoint(a))return e;for(var n=this.submorphs.length-1;0<=n;n--)this.submorphs[n].morphsContainingPoint(a,e);this.innerBoundsContainsWorldPoint(a)&&e.push(this);return e}},{key:"morphBeneath",value:function(a){var e=this.world()||this.owner;if(!e)return null;a=e.morphsContainingPoint(a);e=a.indexOf(this);
return a[e+1]}},{key:"transformTillMorph",value:function(a,e){if("down"==(void 0===e?"up":e))return a.transformTillMorph(this,"up").inverse();e=new qc.Transform;for(var n=this;n&&n!=a;n=n.owner){var q=n,r=q.origin;q=q.scroll;0===r.x&&0===r.y||e.preConcatenate(new qc.Transform(n.origin));e.preConcatenate(n.getTransform());n!=this&&(0===q.x&&0===q.y||!n.owner||e.preConcatenate(new qc.Transform(q.negated())));n.hasFixedPosition&&n.owner&&e.preConcatenate(new qc.Transform(n.owner.scroll))}return e}},
{key:"localize",value:function(a){var e=this.world(),n=a.x,q=a.y;return e?e.transformPointToMorph(this,qc.pt(n,q)):a}},{key:"worldPoint",value:function(a){var e=this.world(),n=a.x,q=a.y;return e?this.transformPointToMorph(e,qc.pt(n,q)):a.addPt(this.position)}},{key:"transformToMorph",value:function(a){var e=this.getGlobalTransform(),n=a.getGlobalTransform().inverse();e.preConcatenate(n);n=a.scroll;0===n.x&&0===n.y||!a.owner||e.preConcatenate(new qc.Transform(n));return e}},{key:"transformPointToMorph",
value:function(a,e){var n=!!this.pathToMorph(a).find(function(y){y=$jscomp.makeIterator(y);y.next();y=y.next().value;return y.hasFixedPosition&&y.owner&&y.owner.isWorld});n&&this.isWorld&&(e.x=e.x+this.position.x-this.scroll.x,e.y=e.y+this.position.y-this.scroll.y);for(var q=$jscomp.makeIterator(this.pathToMorph(a)),r=q.next();!r.done;r=q.next()){var v=$jscomp.makeIterator(r.value);r=v.next().value;v=v.next().value;this!=v&&"up"==r&&(e.x-=v.scroll.x,e.y-=v.scroll.y,v.hasFixedPosition&&v.owner&&v.owner.owner&&
(e.x+=v.owner.scroll.x,e.y+=v.owner.scroll.y));this.applyTransform(r,v,e);this!=v&&"down"==r&&(e.x+=v.scroll.x,e.y+=v.scroll.y,v.hasFixedPosition&&v.owner&&v.owner.owner&&(e.x-=v.owner.scroll.x,e.y-=v.owner.scroll.y))}n&&a.isWorld&&(e.x=e.x-a.position.x+a.scroll.x,e.y=e.y-a.position.y+a.scroll.y);return e}},{key:"transformRectToMorph",value:function(a,e){var n=this,q,r,v;[q=e.topLeft(),r=e.topRight(),v=e.bottomRight(),e=e.bottomLeft()].forEach(function(y){return n.transformPointToMorph(a,y)});return qc.Rectangle.unionPts([q,
r,v,e])}},{key:"applyTransform",value:function(a,e,n){"up"==a?(n.x+=e.origin.x,n.y+=e.origin.y,n.matrixTransform(e.getTransform(),n)):(n.matrixTransform(e.getInverseTransform(),n),n.x-=e.origin.x,n.y-=e.origin.y)}},{key:"_addPathDependant",value:function(a){this._pathDependants.includes(a)||this._pathDependants.push(a)}},{key:"pathToMorph",value:function(a){var e;if(e=this._cachedPaths[a.id])return e;e=this.closestCommonAncestor(a)||this;var n=this,q=[],r=[];for(e._addPathDependant(this);n&&n!=e;)r.push(["up",
n]),n._addPathDependant(this),n=n.owner;for(n=a;n&&n!=e;)q.push(["down",n]),n._addPathDependant(this),n=n.owner;return this._cachedPaths[a.id]=e=[].concat($jscomp.arrayFromIterable(r),$jscomp.arrayFromIterable(q.reverse()))}},{key:"closestCommonAncestor",value:function(a){return qc.arr.intersect([this].concat($jscomp.arrayFromIterable(this.ownerChain())),[a].concat($jscomp.arrayFromIterable(a.ownerChain())))[0]}},{key:"transformForNewOwner",value:function(a){return new qc.Transform(this.transformToMorph(a))}},
{key:"localizePointFrom",value:function(a,e){var n=a.x;a=a.y;try{return e.transformPointToMorph(this,qc.pt(n,a))}catch(q){return console.warn("problem "+q+" in localizePointFrom"),qc.pt}}},{key:"getGlobalTransform",value:function(){return this.transformTillMorph(this.world())}},{key:"globalPosition",get:function(){return this.worldPoint(qc.pt(0,0))}},{key:"globalPosition",set:function(a){return this.position=this.owner?this.owner.localize(a):a}},{key:"ensureToBeInWorldBounds",value:function(){var a=
this.world();if(a){var e=this.globalBounds();a=a.innerBounds().translateForInclusion(e).topLeft().subPt(e.topLeft());this.moveBy(a)}}},{key:"getTransform",value:function(){this._transform||this.updateTransform();return this._transform}},{key:"getInverseTransform",value:function(){this._invTransform||this.updateTransform();return this._invTransform}},{key:"updateTransform",value:function(a){a=void 0===a?{}:a;var e=a.position,n=a.scale,q=a.origin,r=a.rotation;a=this._transform||new qc.Transform;var v=
this._invTransform||new qc.Transform;e=e||this.position;q=q||this.origin;n=n||this.scale;r=r||this.rotation;a.a=n*Math.cos(r);a.b=n*Math.sin(r);a.c=n*-Math.sin(r);a.d=n*Math.cos(r);a.e=a.a*-q.x+a.c*-q.y+e.x;a.f=a.b*-q.x+a.d*-q.y+e.y;e=a.a;n=a.b;q=a.c;r=a.d;var y=a.e,D=a.f,E=1/(e*r-q*n);v.a=r*E;v.b=-n*E;v.c=-q*E;v.d=e*E;v.e=(q*D-y*r)*E;v.f=-(e*D-n*y)*E;this._transform=a;this._invTransform=v}},{key:"setTransform",value:function(a){this.position=a.getTranslation();this.rotation=qc.num.toRadians(a.getRotation());
this.scale=a.getScalePoint().x;this.updateTransform(this)}},{key:"fullContainsWorldPoint",value:function(a){return this.fullContainsPoint(null==this.owner?a:this.owner.localize(a))}},{key:"fullContainsPoint",value:function(a){return this.bounds().containsPoint(a)}},{key:"innerBoundsContainsWorldPoint",value:function(a){return this.innerBoundsContainsPoint(this.localize(a))}},{key:"innerBoundsContainsPoint",value:function(a){return this.innerBounds().containsPoint(a.addPt(this.origin).subPt(this.scroll))}},
{key:"get",value:function(a){if(!a)return null;try{return this.getSubmorphNamed(a)||this.getNameTest(this,a)&&this||this.getOwnerOrOwnerSubmorphNamed(a)}catch(e){if(e.constructor==RangeError&&"Maximum call stack size exceeded"==e.message)throw Error("'get' failed due to a stack overflow. The most\nlikely source of the problem is using 'get' as part of\ntoString, because 'get' calls 'getOwnerOrOwnerSubmorphNamed', which\ncalls 'toString' on this. Try using 'getSubmorphNamed' instead,\nwhich only searches in this' children.\nOriginal error:\n"+
e.stack);throw e;}}},{key:"getNameTest",value:function(a,e){if(qc.obj.isRegExp(e)){if(e.test(a.name)||e.test(String(a)))return!0}else if(a.name===e||String(a)===e)return!0;return!1}},{key:"getAllNamed",value:function(a,e){e=void 0===e?[]:e;if(!this._morphicState||!this.submorphs.length)return e;for(var n=0;n<this.submorphs.length;n++){var q=this.submorphs[n];this.getNameTest(q,a)&&e.push(q)}for(n=0;n<this.submorphs.length;n++)this.submorphs[n].getAllNamed(a,e);return e}},{key:"getSubmorphNamed",value:function(a){if(!this._morphicState||
!this.submorphs.length)return null;for(var e=0;e<this.submorphs.length;e++){var n=this.submorphs[e];if(this.getNameTest(n,a))return n}for(e=0;e<this.submorphs.length;e++)if(n=this.submorphs[e].getSubmorphNamed(a))return n;return null}},{key:"getSubmorphsByStyleClassName",value:function(a){return this.withAllSubmorphsSelect(function(e){return e.styleClasses.includes(a)})}},{key:"getOwnerNamed",value:function(a){return this.ownerChain().find(function(e){return e.name===a})}},{key:"getOwnerOrOwnerSubmorphNamed",
value:function(a){var e=this.owner;if(!e)return null;if(e.name===a)return e;for(var n=0;n<e.submorphs.length;n++){var q=e.submorphs[n];if(q!==this&&(this.getNameTest(q,a)||(q=q.getSubmorphNamed(a))))return q}return this.owner.getOwnerOrOwnerSubmorphNamed(a)}},{key:"getMorphWithId",value:function(a){return this.withAllSubmorphsDetect(function(e){return a===e.id})}},{key:"setMirrored",value:function(a){a?this.removeStyleClass("hidden-in-mirror"):this.addStyleClass("hidden-in-mirror")}},{key:"isMirrored",
value:function(){return 0<=this.styleClasses.indexOf("hidden-in-mirror")?!0:!1}},{key:"dragTriggerDistance",get:function(){return 0}},{key:"onMouseDown",value:function(a){if(this===a.targetMorph&&(a.state.clickedMorph=this,1==a.state.prevClick.clickCount&&200>=Date.now()-a.state.prevClick.clickedAtTime)){this.onDoubleMouseDown(a);return}this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onDoubleMouseDown",value:function(a){}},{key:"onMouseUp",value:function(a){a.state.clickedMorph=
null;this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onMouseMove",value:function(a){}},{key:"onLongClick",value:function(a){}},{key:"addKeyBindings",value:function(a){var e=this;this.addMethodCallChangeDoing({target:this,selector:"addKeyBindings",args:[a],undo:null},function(){e._keybindings||(e._keybindings=[]);e._cachedKeyhandlers=null;e._keybindings.unshift.apply(e._keybindings,$jscomp.arrayFromIterable(a))})}},{key:"keybindings",get:function(){return this._keybindings||
[]}},{key:"keybindings",set:function(a){this._cachedKeyhandlers=null;return this._keybindings=a}},{key:"keyhandlers",get:function(){return this._cachedKeyhandlers||(this._cachedKeyhandlers=[qc.KeyHandler.withBindings(this.keybindings)])}},{key:"keyCommandMap",get:function(){var a=this.keyhandlers[0].platform;return this.keybindings.reduce(function(e,n){var q=qc.findKeysForPlatform(n.keys,a),r=n.command,v="string"===typeof r?r:r.command||r.name;return"string"!==typeof q?e:q.split("|").reduce(function(y,
D){var E={};return Object.assign(y,(E[D]={name:v,command:r,prettyKeys:qc.KeyHandler.prettyCombo(D)},E))},e)},{})}},{key:"keysForCommand",value:function(a,e){e=void 0===e?!0:e;var n=this.keyCommandMap,q=Object.keys(n).find(function(r){return n[r].name===a});return q&&e?n[q].prettyKeys:q}},{key:"simulateKeys",value:function(a){return qc.KeyHandler.simulateKeys(this,a)}},{key:"onKeyDown",value:function(a){qc.KeyHandler.invokeKeyHandlers(this,a,!1)&&a.stop()}},{key:"onKeyUp",value:function(a){}},{key:"onContextMenu",
value:function(a){var e=this;a.targetMorph===this&&(lively.FreezerRuntime||a.stop(),Promise.resolve(this.menuItems(a)).then(function(n){return e.openMenu(n,a)}).catch(function(n){return $world.logError(n)}))}},{key:"openMenu",value:function(a,e){var n=this.world();return a&&a.length&&n?n.openWorldMenu(e,a):null}},{key:"menuItems",value:function(a){return $world.defaultMenuItems(this,a)}},{key:"onCut",value:function(a){}},{key:"onCopy",value:function(a){}},{key:"onPaste",value:function(a){}},{key:"onDragStart",
value:function(a){this.undoStart("drag-move");a=a.state;this.position=a.dragStartMorphPosition.addPt(a.absDragDelta)}},{key:"onDragEnd",value:function(a){this.undoStop("drag-move");$world.execCommand("remove snap to guides",this)}},{key:"onDrag",value:function(a){var e=a.state;this.position=e.dragStartMorphPosition.addPt(e.absDragDelta);$world.execCommand("show and snap to guides",{target:this,showGuides:a.isCtrlDown(),snap:a.isCtrlDown()})}},{key:"onGrab",value:function(a){if(a.isShiftDown()){var e=
this.copy();e.position=this.transformPointToMorph(a.hand,qc.pt(0,0));a.hand.grab(e)}else a.hand.grab(this)}},{key:"onDrop",value:function(a){a.hand.dropMorphsOn(this)}},{key:"doNotAcceptDropsForThisAndSubmorphs",value:function(){this.withAllSubmorphsDo(function(a){return a.acceptsDrops=!1})}},{key:"acceptDropsForThisAndSubmorphs",value:function(){this.withAllSubmorphsDo(function(a){return a.acceptsDrops=!0})}},{key:"wantsToBeDroppedOn",value:function(a){return!0}},{key:"onDropHoverIn",value:function(a){}},
{key:"onDropHoverUpdate",value:function(a){}},{key:"onDropHoverOut",value:function(a){}},{key:"onBeingDroppedOn",value:function(a,e){e.addMorph(this)}},{key:"onHoverIn",value:function(a){this.master&&this.requestMasterStyling()}},{key:"onHoverOut",value:function(a){this.master&&this.requestMasterStyling()}},{key:"onScroll",value:function(a){}},{key:"onMouseWheel",value:function(a){}},{key:"onNativeDrop",value:function(a){}},{key:"onNativeDragleave",value:function(a){}},{key:"onNativeDragenter",value:function(a){}},
{key:"onNativeDragover",value:function(a){}},{key:"onNativeDragend",value:function(a){}},{key:"onNativeDragstart",value:function(a){}},{key:"onNativeDrag",value:function(a){}},{key:"focus",value:function(){var a=this.env.eventDispatcher;a&&a.focusMorph(this)}},{key:"onFocus",value:function(a){}},{key:"onBlur",value:function(a){}},{key:"isFocused",value:function(){var a=this.env.eventDispatcher;return a&&a.isMorphFocused(this)}},{key:"exportToJSON",value:function(a){return qc.serializeSpec(this,a)}},
{key:"initFromJSON",value:function(a){var e=this;this._env=a.env||a._env||qc.MorphicEnv.default();this._rev=0;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=a._id||qc.newMorphId(qc.getClassName(this));this._animationQueue=new qc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this.dontRecordChangesWhile(function(){e.initializeProperties();qc.deserializeSpec(a,function(n){return qc.morph(n)},e)});return this}},{key:"copyViaJSON",
value:function(){var a=this.exportToJSON();qc.tree.prewalk(a,function(e){return e._id=qc.newMorphId(e.type)},function(e){return e.submorphs});a.name=a.name.replace(/copy( [0-9]+)?$/,function(e,n){return"copy "+(n&&n.trim()?Number(n)+1:"1")});return qc.morph({type:a.type}).initFromJSON(a)}},{key:"canBeCopied",value:function(){return!0}},{key:"copy",value:function(a){return qc.copyMorph(this,void 0===a?!1:a)}},{key:"interactivelyPublish",value:function(){var a=this,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return e=
a.world()||a.env.world,y.setCatchFinallyBlocks(2),y.yield(System.import("lively.morphic/partsbin.js"),4);case 4:return n=y.yieldResult,q=n.interactivelySavePart,y.yield(q(a,{notifications:!1,loadingIndicator:!0}),5);case 5:r=y.yieldResult;e.setStatusMessage(r?"Published "+a+" as "+r.name:"Failed to publish part "+a,r?qc.Color.green:qc.Color.red);y.leaveTryBlock(0);break;case 2:v=y.enterCatchBlock(),"canceled"!=v&&e.showError(v),y.jumpToEnd()}})}},{key:"makeDirty",value:function(a){this._dirty=!0;
this.owner&&this.owner.makeDirty()}},{key:"needsRerender",value:function(){return this._dirty}},{key:"aboutToRender",value:function(a){this._dirty=!1;this._rendering=!0}},{key:"onAfterRender",value:function(a){}},{key:"whenRendered",value:function(a){return this.env.whenRendered(this,void 0===a?50:a).then(function(){return!0}).catch(function(){return!1})}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return a.renderMorph(this)}},
{key:"applyLayoutIfNeeded",value:function(){if(this._dirty){for(var a=0;a<this.submorphs.length;a++)this.submorphs[a].applyLayoutIfNeeded();this.layout&&!this.layout.manualUpdate&&this.layout.onContainerRender()}}},{key:"requestMasterStyling",value:function(){var a=this;this._rendering||(this.master&&this.master._hasUnresolvedMaster&&(this.master._capturedExtents=new WeakMap,this.withAllSubmorphsDo(function(e){return a.master._capturedExtents.set(e,e.extent)})),this.master&&(this._requestMasterStyling=
!0,this.makeDirty()))}},{key:"requestStyling",value:function(){this.withAllSubmorphsDo(function(a){a._wantsStyling=!0;a.makeDirty()})}},{key:"renderAsRoot",value:function(a){var e=this;this.dontRecordChangesWhile(function(){e.applyLayoutIfNeeded()});return qc.renderRootMorph(this,a)}},{key:"renderPreview",value:function(a,e){a=void 0===a?{}:a;e=void 0===e?this.env.renderer:e;return e.renderPreview(this,a)}},{key:"startStepping",value:function(){var a=Array.from(arguments),e="number"===typeof a[0]?
a.shift():null,n=a.shift();a=new qc.TargetScript(this,n,a);this.removeEqualScripts(a);this._tickingScripts.push(a);a.startTicking(e);return a}},{key:"tickingScripts",get:function(){return this._tickingScripts}},{key:"stopStepping",value:function(){qc.arr.invoke(this._tickingScripts,"stop");this._tickingScripts.length=[]}},{key:"stopSteppingScriptNamed",value:function(a){var e=this._tickingScripts.filter(function(n){return n.selector===a});this.stopScripts(e)}},{key:"stopScripts",value:function(a){qc.arr.invoke(a,
"stop");this._tickingScripts=qc.arr.withoutAll(this._tickingScripts,a)}},{key:"suspendStepping",value:function(){this._tickingScripts&&qc.arr.invoke(this._tickingScripts,"suspend")}},{key:"suspendSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return a.suspendStepping()})}},{key:"resumeStepping",value:function(){qc.arr.invoke(this._tickingScripts,"resume")}},{key:"resumeSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return qc.arr.invoke(a._tickingScripts,"resume")})}},
{key:"removeEqualScripts",value:function(a){this.stopScripts(this._tickingScripts.filter(function(e){return e.equals(a)}))}},{key:"addComment",value:function(a,e){e=void 0===e?qc.pt(0,0):e;var n=this,q,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){return 1==D.nextAddress?D.yield(System.import("lively.collab"),2):3!=D.nextAddress?(q=D.yieldResult,r=q.Comment,v=q.CommentBrowser,y=new r(a,e),n.comments.push(y),D.yield(v.addCommentForMorph(y,n),3)):D.return(y)})}},{key:"removeComment",
value:function(a){var e=this,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(System.import("lively.collab"),2);n=r.yieldResult;q=n.CommentBrowser;e.comments=e.comments.filter(function(v){return!a.equals(v)});q.removeCommentForMorph(a,e);r.jumpToEnd()})}},{key:"emptyComments",value:function(){var a=this,e,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(System.import("lively.collab"),2);e=q.yieldResult;
n=e.CommentBrowser;a.comments.forEach(function(r){return n.removeCommentForMorph(r,a)});a.comments=[];q.jumpToEnd()})}},{key:"commands",get:function(){return this._commands||[]}},{key:"commands",set:function(a){this._commands&&this.removeCommands(this._commands);this.addCommands(a)}},{key:"commandsIncludingOwners",get:function(){return qc.arr.flatmap([this].concat(this.ownerChain()),function(a){return qc.arr.sortByKey(a.commands,"name").map(function(e){return{target:a,command:e}})})}},{key:"addCommands",
value:function(a){var e=this;this.addMethodCallChangeDoing({target:this,selector:"addCommands",args:[a],undo:{target:this,selector:"removeCommands",args:[a]}},function(){e.removeCommands(a);e._commands=(e._commands||[]).concat(a)})}},{key:"removeCommands",value:function(a){var e=this;this.addMethodCallChangeDoing({target:this,selector:"removeCommands",args:[a],undo:{target:this,selector:"addCommands",args:[a]}},function(){var n=a.map(function(r){return"string"===typeof r?r:r.name}),q=(e._commands||
[]).filter(function(r){return!n.includes(r.name)});q.length?e._commands=q:delete e._commands})}},{key:"commandHandler",get:function(){return this._commandHandler||qc.defaultCommandHandler}},{key:"lookupCommand",value:function(a){return(a=this.commandHandler.lookupCommand(a,this))&&a.command?a:null}},{key:"execCommand",value:function(a,e,n,q){return this.commandHandler.exec(a,this,e,n,q)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Morph"}},{key:"propertySettings",get:function(){return{defaultGetter:function(a){return this.getProperty(a)},
defaultSetter:function(a,e){this.setProperty(a,e)},valueStoreProperty:"_morphicState"}}},{key:"properties",get:function(){return Object.assign({name:{group:"core",initialize:function(a){a||(a=qc.getClassName(this),a=qc.string.findArticle(a)+a);this.name=a}},isComponent:{group:"core",defaultValue:!1,after:["master"],set:function(a){this.setProperty("isComponent",a);a&&(this.master||delete this._parametrizedProps)}},master:{before:["metadata"],group:"core",set:function(a){this.master&&this.master.equals(a)||
(this.setProperty("master",a?qc.ComponentPolicy.for(this,a):0==a?!1:null),a&&this.requestMasterStyling())}},renderOnGPU:{group:"core",defaultValue:!1},draggable:{group:"interaction",isStyleProp:!0,defaultValue:!1},grabbable:{group:"interaction",isStyleProp:!0,defaultValue:!1,set:function(a){a&&!this.draggable&&(this.draggable=!0);this.setProperty("grabbable",a)}},acceptsDrops:{group:"interaction",isStyleProp:!0,defaultValue:!0},grayscale:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,
min:0,max:1,isFloat:!0},blur:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,isFloat:!0},dropShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null,set:function(a){a&&!a.isShadowObject&&(a=new qc.ShadowObject(a),a.morph=this);this.setProperty("dropShadow",a)}},tooltip:{group:"core",defaultValue:null},focusable:{group:"interaction",defaultValue:!0},nativeCursor:{group:"interaction",type:"Enum",values:"auto default none context-menu help pointer progress wait cell crosshair text vertical-text alias copy move no-drop not-allowed e-resize n-resize ne-resize nw-resize s-resize se-resize sw-resize w-resize ew-resize ns-resize nesw-resize nwse-resize col-resize row-resize all-scroll zoom-in zoom-out grab grabbing".split(" "),
isStyleProp:!0,defaultValue:"auto"},halosEnabled:{group:"interaction",isStyleProp:!0,defaultValue:!!qc.config.halosEnabled},reactsToPointer:{group:"interaction",isStyleProp:!0,defaultValue:!0},origin:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:qc.pt(0,0)},position:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:qc.pt(0,0),get:function(){this._askLayoutForBounds&&this.owner&&this.owner.layout&&(this._askLayoutForBounds=!1,this.owner.layout.updateBoundsFor(this));return this.getProperty("position")}},
extent:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:qc.pt(10,10),get:function(){this._askLayoutForBounds&&this.owner&&this.owner.layout&&(this._askLayoutForBounds=!1,this.owner.layout.updateBoundsFor(this));return this.getProperty("extent")},set:function(a){var e=this.extent;this.setProperty("extent",a);this.origin.equals(qc.pt(0,0))||(a=qc.pt(a.x/e.x,a.y/e.y),this.adjustOrigin(this.origin.scaleByPt(a)))}},width:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.x},
set:function(a){return this.extent=qc.pt(a,this.extent.y)}},height:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.y},set:function(a){return this.extent=qc.pt(this.extent.x,a)}},left:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().left()},set:function(a){return this.moveBy(qc.pt(a-this.left),0)}},right:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().right()},
set:function(a){return this.moveBy(qc.pt(a-this.right),0)}},top:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().top()},set:function(a){return this.moveBy(qc.pt(0,a-this.top))}},bottom:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottom()},set:function(a){return this.moveBy(qc.pt(0,a-this.bottom))}},center:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().center()},
set:function(a){return this.align(this.center,a)}},topLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topLeft()},set:function(a){return this.align(this.topLeft,a)}},topRight:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topRight()},set:function(a){return this.align(this.topRight,a)}},bottomRight:{group:"geometry",derived:!0,after:["extent","layout"],get:function(){return this.bounds().bottomRight()},
set:function(a){return this.align(this.bottomRight,a)}},bottomLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomLeft()},set:function(a){return this.align(this.bottomLeft,a)}},bottomCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomCenter()},set:function(a){return this.align(this.bottomCenter,a)}},topCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],
get:function(){return this.bounds().topCenter()},set:function(a){return this.align(this.topCenter,a)}},leftCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().leftCenter()},set:function(a){return this.align(this.leftCenter,a)}},rightCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().rightCenter()},set:function(a){return this.align(this.rightCenter,a)}},rotation:{group:"geometry",type:"Number",isFloat:!0,
isStyleProp:!0,defaultValue:0},flipped:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},tilted:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},perspective:{group:"geometry",type:"Number",isStyleProp:!0,defaultValue:0,min:0},scale:{group:"geometry",type:"Number",min:0,isFloat:!0,isStyleProp:!0,defaultValue:1},hasFixedPosition:{group:"geometry",doc:"When morph is submorph of world hasFixedPosition == true will keep the morph at the same position relative to top left of the browser window. This means, when the world is scrolled, the morph keeps its place.",
defaultValue:!1},opacity:{group:"styling",type:"Number",isFloat:!0,min:0,max:1,isStyleProp:!0,defaultValue:1},fill:{group:"styling",type:"ColorGradient",isStyleProp:!0,defaultValue:qc.Color.white},visible:{group:"styling",isStyleProp:!0,defaultValue:!0,set:function(a){a||this.makeDirty();this.setProperty("visible",a)}},submorphs:{group:"core",defaultValue:[],after:["isLayoutable","origin","position","rotation","scale"],get:function(){return(this.getProperty("submorphs")||[]).concat()},set:function(a){var e=
this,n=this.layout,q=n&&n.isEnabled();q&&n.disable();this.submorphs.forEach(function(r){return a.includes(r)||r.remove()});a.forEach(function(r,v){return e.submorphs[v]!==r&&e.addMorph(r,e.submorphs[v])});q&&n.enable()}},clipMode:{group:"styling",type:"Enum",values:["visible","hidden","scroll","auto"],isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.isClip()||(this.scroll=qc.pt(0,0))}},scroll:{group:"geometry",defaultValue:qc.pt(0,0),after:["clipMode","submorphs"],
type:"Point",set:function(a){var e=a.x;a=a.y;if(this.isClip()){var n=this.scrollExtent.subPt(this.extent),q=n.y;e=Math.max(0,Math.min(n.x,e));a=Math.max(0,Math.min(q,a));this.setProperty("scroll",qc.pt(e,a));this.makeDirty()}}},scrollbarOffset:{group:"styling",defaultValue:qc.pt(15,15)},styleClasses:{group:"styling",isStyleProp:!0,defaultValue:["morph"],get:function(){return this._cachedStyleClasses||(this._cachedStyleClasses=this.constructor.styleClasses.concat(this.getProperty("styleClasses")))},
set:function(a){this._cachedStyleClasses=null;this.setProperty("styleClasses",qc.arr.withoutAll(a,this.constructor.styleClasses));this.requestStyling()}},layout:{group:"layouting",isStyleProp:!0,type:"Layout",after:["submorphs","extent","origin","position","isLayoutable"],set:function(a){a&&(a.container=this);this.setProperty("layout",a)}},isLayoutable:{group:"layouting",isStyleProp:!0,defaultValue:!0},borderLeft:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleLeft","borderWidthLeft",
"borderColorLeft"],get:function(){return{style:this.borderStyleLeft,width:this.borderWidthLeft,color:this.borderColorLeft}},set:function(a){"style"in a&&(this.borderStyleLeft=a.style);"width"in a&&(this.borderWidthLeft=a.width);"color"in a&&(this.borderColorLeft=a.color);"radius"in a&&(this.borderRadiusLeft=a.radius)}},borderRight:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleRight","borderWidthRight","borderColorRight"],get:function(){return{style:this.borderStyleRight,width:this.borderWidthRight,
color:this.borderColorRight}},set:function(a){"style"in a&&(this.borderStyleRight=a.style);"width"in a&&(this.borderWidthRight=a.width);"color"in a&&(this.borderColorRight=a.color);"radius"in a&&(this.borderRadiusRight=a.radius)}},borderBottom:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleBottom","borderWidthBottom","borderColorBottom"],get:function(){return{style:this.borderStyleBottom,width:this.borderWidthBottom,color:this.borderColorBottom}},set:function(a){"style"in a&&(this.borderStyleBottom=
a.style);"width"in a&&(this.borderWidthBottom=a.width);"color"in a&&(this.borderColorBottom=a.color);"radius"in a&&(this.borderRadiusBottom=a.radius)}},borderTop:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleTop","borderWidthTop","borderColorTop"],get:function(){return{style:this.borderStyleTop,width:this.borderWidthTop,color:this.borderColorTop}},set:function(a){"style"in a&&(this.borderStyleTop=a.style);"width"in a&&(this.borderWidthTop=a.width);"color"in a&&(this.borderColorTop=
a.color);"radius"in a&&(this.borderRadiusTop=a.radius)}},borderWidth:{group:"styling",isStyleProp:!0,type:"Number",foldable:["top","left","right","bottom"],min:0,defaultValue:{top:0,bottom:0,left:0,right:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderWidth");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){qc.obj.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderWidth",a)}}},qc.generateUnfolded("borderWidth",void 0,
"styling"),{borderRadius:{group:"styling",isStyleProp:!0,type:"Number",min:0,foldable:["top","left","right","bottom"],defaultValue:{top:0,bottom:0,right:0,left:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderRadius");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){a||(a=0);qc.obj.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a});a.isRectangle&&(a={left:a.left(),right:a.right(),top:a.top(),bottom:a.bottom()});this.setProperty("borderRadius",
a)}}},qc.generateUnfolded("borderRadius",void 0,"styling"),{borderStyle:{group:"styling",isStyleProp:!0,type:"Enum",foldable:["top","left","right","bottom"],values:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),defaultValue:{top:"solid",left:"solid",bottom:"solid",right:"solid",valueOf:function(){return"solid"}},get:function(){var a=this.getProperty("borderStyle");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){qc.obj.isString(a)&&(a=
{left:a,right:a,top:a,bottom:a});this.setProperty("borderStyle",a)}}},qc.generateUnfolded("borderStyle",void 0,"styling"),{borderColor:{group:"styling",isStyleProp:!0,type:"Color",foldable:["top","left","right","bottom"],defaultValue:{top:qc.Color.white,left:qc.Color.white,bottom:qc.Color.white,right:qc.Color.white,valueOf:function(){return qc.Color.white}},get:function(){var a=this.getProperty("borderColor");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){a||(a=qc.Color.white);
a.isColor&&(a={top:a,left:a,right:a,bottom:a});this.setProperty("borderColor",a?qc.obj.extract(a,["top","left","right","bottom"],function(e,n){return qc.obj.isArray(n)?qc.Color.fromTuple(n):n}):a)}}},qc.generateUnfolded("borderColor",void 0,"styling"),{border:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyle","borderWidth","borderColor"],get:function(){var a=this;return{get style(){return a.borderStyle},set style(e){a.borderStyle=e},get width(){return a.borderWidth},set width(e){a.borderWidth=
e},get color(){return a.borderColor},set color(e){a.borderColor=e},get borderRadius(){return a.borderRadius},set borderRadius(e){a.borderRadius=e}}},set:function(a){"style"in a&&(this.borderStyle=a.style);"width"in a&&(this.borderWidth=a.width);"color"in a&&(this.borderColor=a.color);"radius"in a&&(this.borderRadius=a.radius)}},styleProperties:{group:"styling",derived:!0,readOnly:!0,get:function(){var a=this.propertiesAndPropertySettings(),e=a.properties,n=[];a=$jscomp.makeIterator(a.order);for(var q=
a.next();!q.done;q=a.next())q=q.value,e[q].isStyleProp&&n.push(q);return n}},style:{group:"styling",derived:!0,readOnly:!0,get:function(){for(var a=this.styleProperties,e={},n=0;n<a.length;n++){var q=a[n];e[q]=this[q]}return e}},epiMorph:{group:"core",doc:"epi morphs are 'transient' morphs, i.e. meta objects that should not be serialized like halo items, menus, etc.",defaultValue:!1},respondsToVisibleWindow:{group:"interaction",doc:"Morphs will respond to changes to the visible browser window and a call will be made to the morph's relayout function, supplying the event generated",
defaultValue:!1},installedFonts:{doc:"custom fonts can be installed from a respective morph, and are then kept as part of this morph's state in order to be loaded again the next time the it is cold loaded. (i.e. deserialization of a part)",defaultValue:{},set:function(a){var e=qc.arr.without(qc.obj.keys(this.installedFonts||{}),"_rev"),n=qc.arr.without(qc.obj.keys(a||{}),"_rev");this.setProperty("installedFonts",a);this.ensureInstalledFonts(e,n)},get:function(){return this.getProperty("installedFonts")||
{}}},comments:{doc:"Holds all comments belonging to this Morph.",type:"list",defaultValue:[]},metadata:{group:"core"}})}},{key:"styleClasses",get:function(){if(this.hasOwnProperty("_styclassNames"))return this._styleClasses;for(var a=this,e=[];a&&a!==Object;)e.push(a[Symbol.for("__LivelyClassName__")]),a=a[Symbol.for("lively-instance-superclass")];return this._styleClasses=e}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1667,end:83052})}(void 0));qc.Morph=xj;qc.Morph=xj;qc.Morph=xj;var Nv=Ka("W",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),h=d.hasOwnProperty("Ellipse")&&"function"===typeof d.Ellipse?d.Ellipse:d.Ellipse=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Ellipse"}},
{key:"properties",get:function(){return{borderRadius:{derived:!0,get:function(){var a=this;return{top:this.borderRadiusTop,right:this.borderRadiusRight,left:this.borderRadiusLeft,bottom:this.borderRadiusBottom,valueOf:function(){return a.borderRadiusLeft}}}},borderRadiusLeft:{get:function(){return this.height},set:function(){}},borderRadiusRight:{get:function(){return this.height},set:function(){}},borderRadiusTop:{get:function(){return this.width},set:function(){}},borderRadiusBottom:{get:function(){return this.width},
set:function(){}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:83061,end:83818})}(qc.Morph));qc.Ellipse=Nv;qc.Ellipse=Nv;qc.Ellipse=Nv;var Vy=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),h=d.hasOwnProperty("Triangle")&&"function"===typeof d.Triangle?
d.Triangle:d.Triangle=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;ac._get(Object.getPrototypeOf(h.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.update()}},{key:"onChange",value:function(a){("extent"==a.prop||"direction"==a.prop||"fill"==a.prop&&a.value)&&this.update();ac._get(Object.getPrototypeOf(h.prototype),
"onChange",this).call(this,a)}},{key:"update",value:function(){var a=this.extent,e=a.x;a=a.y;e!=a&&(this.extent=qc.pt(Math.max(e,a),Math.max(e,a)));this.origin=qc.pt(e/2,a/2);var n=this.triangleFill=this.fill||this.triangleFill;this.fill=null;e={width:e/2,style:"solid",color:n};a={width:a/2,style:"solid",color:qc.Color.transparent};switch(this.direction){case "down":var q="borderLeft";var r="borderRight";var v="borderTop";break;case "up":q="borderLeft";r="borderRight";v="borderBottom";break;case "left":q=
"borderBottom";r="borderTop";v="borderRight";break;case "right":q="borderBottom",r="borderTop",v="borderLeft"}n={};Object.assign(this,(n[q]=a,n[r]=a,n[v]=e,n))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Triangle"}},{key:"properties",get:function(){return{direction:{defaultValue:"up"},triangleFill:{after:["fill"],initialize:function(){this.triangleFill=this.fill}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:83827,end:85285})}(qc.Morph);qc.Triangle=Vy;qc.Triangle=Vy;qc.Triangle=Vy;var Ov=Ka("S",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),h=d.hasOwnProperty("Image")&&"function"===typeof d.Image?d.Image:d.Image=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return ac(h,b,[{key:"__deserialize__",value:function(a,e,n,q){this._isDeserializing=!0;ac._get(Object.getPrototypeOf(h.prototype),"__deserialize__",this).call(this,a,e,n,q)}},{key:"__after_deserialize__",value:function(a,e,n){delete this._isDeserializing;ac._get(Object.getPrototypeOf(h.prototype),"__after_deserialize__",this).call(this,a,e,n)}},{key:"isImage",get:function(){return!0}},{key:"ratio",get:function(){var a=this.naturalExtent;return a.x/a.y}},{key:"setWidthKeepingRatio",value:function(a){this.width=
a;this.height=a/this.ratio}},{key:"setHeightKeepingRatio",value:function(a){this.width=this.ratio*a;this.height=a}},{key:"loadUrl",value:function(a,e){var n=this;e=void 0===e?this.autoResize:e;var q=this.autoResize;this.autoResize=e;this.imageUrl=a;return qc.promise.finally(this.whenLoaded(),function(){return n.autoResize=q})}},{key:"whenLoaded",value:function(){var a=this;return this.isLoaded?Promise.resolve(this):new Promise(function(e,n){var q=a.imageUrl;a.imageElement(function(r){a.imageUrl!==
q&&n(Error("url changed ("+q+" => "+a.imageUrl+")"));a.naturalExtent=qc.pt(r.width,r.height);a.isLoaded=!0;e(a)})})}},{key:"determineNaturalExtent",value:function(){var a=this;return this.whenLoaded().then(function(){return a.naturalExtent})}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return a.renderImage(this)}},{key:"clear",value:function(){return this.loadUrl("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
!1)}},{key:"imageElement",value:function(a){var e=this;return new Promise(function(n,q){var r=e.env.domEnv.document.createElement("img");r.onload=function(){n(r);"function"===typeof a&&a(r)};r.src=e.imageUrl})}},{key:"canvasElementAndContext",value:function(){var a=this,e,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=a.env.domEnv.document,v.yield(a.imageElement(),2);n=v.yieldResult;q=e.createElement("canvas");r=q.getContext("2d");q.width=n.width;
q.height=n.height;r.drawImage(n,0,0,n.width,n.height);return v.return({canvas:q,ctx:r,image:n})})}},{key:"imageData",value:function(a){var e=this,n,q,r,v,y,D,E,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(K){if(1==K.nextAddress)return K.yield(e.canvasElementAndContext(),2);n=K.yieldResult;q=n.ctx;r=n.image;a||(a=qc.rect(0,0,r.width,r.height));v=a;y=v.x;D=v.y;E=v.width;I=v.height;return K.return(q.getImageData(y,D,E,I))})}},{key:"pixelAt",value:function(a){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==
n.nextAddress?n.yield(e.imageData(a.extent(qc.pt(1,1))),2):n.return(n.yieldResult.data)})}},{key:"colorAt",value:function(a){var e=this,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(n=qc.Color,q=n.fromTuple8Bit,r.yield(e.pixelAt(a),2)):r.return(q.call(n,r.yieldResult))})}},{key:"loadArrayBuffer",value:function(a,e){a=new Uint8Array(a);a=new Blob([a],{type:"image/jpeg"});this.imageUrl=(window.URL||window.webkitURL).createObjectURL(a);this.makeDirty()}},
{key:"convertToBase64",value:function(){var a=this,e,n,q,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return e=a.imageUrl,n=e.slice(e.lastIndexOf(".")+1,e.length).toLowerCase(),"jpg"===n?n="jpeg":"svg"===n&&(n="svg+xml"),["gif","jpeg","png","tiff","svg+xml"].includes(n)||(n="gif"),e.startsWith("http")||(e=qc.location.origin+"/"+e),E.yield(System.import("lively.ide/shell/shell-interface"),2);if(3!=E.nextAddress)return q=E.yieldResult,r=q.runCommand,v='curl --silent "'+
e+'" | openssl base64',E.yield(r(v).whenDone(),3);y=E.yieldResult;D=y.stdout;return E.return(a.loadUrl("data:image/"+n+";base64,"+D,!1))})}},{key:"downloadImage",value:function(){var a=this.imageUrl;if(a.match(/^data:image/)){var e=this.name||"image-from-lively";var n=a.match(/image\/([^;]+)/);n&&n[1]&&(e+="."+n[1])}else e||(e=qc.arr.last(a.split("/")));n=document.createElement("a");n.download=e;n.href=a;n.click()}},{key:"convertTo",value:function(a,e){e||(e=1);var n=this.canvasElementAndContext(),
q=n.ctx,r=n.canvas;n=n.image;var v=this.width,y=this.height;r.width=n.width;r.height=n.height;q.drawImage(n,0,0,v,y);return this.loadUrl(r.toDataURL(a,e),!1)}},{key:"resampleImageToFitBounds",value:function(){var a=this,e,n,q,r,v,y,D,E,I,K,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==N.nextAddress)return N.yield(a.canvasElementAndContext(),2);e=N.yieldResult;n=e.ctx;q=e.canvas;r=e.image;v=a;y=v.width;D=v.height;E=r;I=E.width;K=E.height;q.width=I;q.height=K;n.drawImage(r,
0,0,y,D);P=n.getImageData(0,0,I,K);q.width=y;q.height=D;n.putImageData(P,0,0);return N.return(a.loadUrl(q.toDataURL(),!1))})}},{key:"crop",value:function(a){var e=this.canvasElementAndContext(),n=e.ctx,q=e.canvas;e=e.image;var r=this.innerBounds(),v=e.width,y=e.height;a=r.intersection(a);a=new qc.Rectangle(a.x/r.width,a.y/r.height,a.width/r.width,a.height/r.height);a=$jscomp.makeIterator((new qc.Rectangle(0,0,v,y)).divide([a])).next().value;q.width=v;q.height=y;n.drawImage(e,0,0,v,y);e=n.getImageData(a.x,
a.y,a.width,a.height);q.width=a.width;q.height=a.height;n.putImageData(e,0,0);return this.loadUrl(q.toDataURL(),!1)}},{key:"interactivelyChangeImageURL",value:function(){var a=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(a.world().prompt("Enter image url",{historyId:"lively.morphic-image-url-inputs",input:a.imageUrl.startsWith("data:")?"":a.imageUrl,requester:a,selectInput:!0}),2);e=n.yieldResult;"string"===typeof e&&(a.imageUrl=e);n.jumpToEnd()})}},
{key:"menuItems",value:function(a){var e=this;a=ac._get(Object.getPrototypeOf(h.prototype),"menuItems",this).call(this,a);a.unshift(["change image url...",function(){return e.interactivelyChangeImageURL()}],["resize image to to fit world",function(){var n=Math.min(e.world().visibleBounds().width/e.naturalExtent.x,e.world().visibleBounds().height/e.naturalExtent.y);e.extent=e.naturalExtent.scaleBy(n)}],["resize image to its real image size",function(){var n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==
q.nextAddress?(n=e,q.yield(e.determineNaturalExtent(),2)):q.return(n.extent=q.yieldResult)})}],["resample image to fit current bounds",function(){return e.resampleImageToFitBounds()}],{isDivider:!0});return a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Image"}},{key:"properties",get:function(){return{imageUrl:{isStyleProp:!0,copyAssetOnFreeze:!0,after:["extent","autoResize"],defaultValue:qc.config.defaultImage,set:function(a){var e=this;this.isLoaded=!1;this.setProperty("imageUrl",
a);this.setProperty("naturalExtent",null);var n=this.autoResize&&!this._isDeserializing;this.whenLoaded().then(function(){e.imageUrl===a&&(e.isLoaded=!0,n&&(e.extent=e.naturalExtent))})}},fill:{defaultValue:qc.Color.transparent},naturalExtent:{defaultValue:null},isLoaded:{defaultValue:!1,serialize:!1},autoResize:{isStyleProp:!0,defaultValue:!1}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:85294,end:94617})}(qc.Morph));qc.Image=Ov;qc.Image=Ov;qc.Image=Ov;var PC=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),h=d.hasOwnProperty("PathPoint")&&"function"===typeof d.PathPoint?d.PathPoint:d.PathPoint=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a,e){e=void 0===e?{}:e;this.path=a;this._isSmooth=e.isSmooth||!1;this.x=e.position?e.position.x:e.x||0;this.y=e.position?e.position.y:e.y||0;this._controlPoints=e.controlPoints}},{key:"__dont_serialize__",get:function(){return["attributeConnections","$$controlPoints","$$position","doNotCopyProperties","doNotSerialize"]}},{key:"isPathPoint",get:function(){return!0}},{key:"isSmooth",get:function(){return this._isSmooth||!1}},{key:"isSmooth",set:function(a){this._isSmooth!==a&&(this._isSmooth=
a,this.adaptControlPoints(a))}},{key:"position",get:function(){return qc.pt(this.x,this.y)}},{key:"position",set:function(a){var e=a.y;this.x=a.x;this.y=e;this.path.makeDirty()}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);this.path.onVertexChanged(this);return this}},{key:"copy",value:function(){var a=new qc.ExpressionSerializer;return new qc.PathPoint(this.path,a.deserializeExprObj(this.__serialize__()))}},{key:"__serialize__",value:function(){return{__expr__:("({\n         position: "+
this.position.toString(!1)+",\n         isSmooth: "+this.isSmooth+",\n         controlPoints: {\n           next: "+this.controlPoints.next.toString(!1)+",\n           previous: "+this.controlPoints.previous.toString(!1)+"\n         }\n      })").replace(/[\n|\s]/g,""),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}}},{key:"controlPoints",get:function(){return this._controlPoints||{next:qc.pt(0,0),previous:qc.pt(0,0)}}},{key:"controlPoints",set:function(a){var e=a=void 0===a?{}:a;a=e.next;e=e.previous;
this._controlPoints={next:a?qc.Point.fromLiteral(a):qc.pt(0,0),previous:e?qc.Point.fromLiteral(e):qc.pt(0,0)};this.path.makeDirty()}},{key:"moveNextControlPoint",value:function(a){this.moveControlPoint("next",a)}},{key:"movePreviousControlPoint",value:function(a){this.moveControlPoint("previous",a)}},{key:"moveControlPoint",value:function(a,e){var n=this.controlPoints[a];n=n?n.addPt(e):e;e="next"==a?"previous":"next";var q=this.controlPoints[e];this.isSmooth&&(q=n.negated().normalized().scaleBy(q.r()));
var r={};this.controlPoints=(r[a]=n,r[e]=q,r);this.path.onVertexChanged(this)}},{key:"pointOnLine",value:function(a,e,n,q){a=qc.pt(a.x,a.y);e=qc.pt(e.x,e.y);a=e.subPt(a);var r=a.scaleBy(1/a.r());n=e.subPt(n).dotProduct(r);return e.subPt(r.scaleBy(Math.max(1,Math.min(n,a.r())))).addXY(q,q)}},{key:"nextVertex",get:function(){return this.path.vertexAfter(this)}},{key:"previousVertex",get:function(){return this.path.vertexBefore(this)}},{key:"interpolate",value:function(a,e){var n=this.copy();n.position=
n.position.interpolate(a,e);return n}},{key:"adaptControlPoints",value:function(a){var e=this.nextVertex,n=this.previousVertex,q=this.position,r=this.path,v=r.vertices,y=v.indexOf(this),D=0===y;v=y===v.length-1;n=n?n.position:q;e=e?e.position:q;a?(a=this.pointOnLine(n,e,q,r.borderWidth),this.controlPoints={previous:D?qc.pt(0,0):a.subPt(e),next:a.subPt(n)}):this.controlPoints={previous:D?qc.pt(0,0):n.subPt(q).scaleBy(.5),next:v?qc.pt(0,0):e.subPt(q).scaleBy(.5)};r.onVertexChanged(this)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"PathPoint"}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:94626,end:98591})}(void 0);qc.PathPoint=PC;qc.PathPoint=PC;qc.PathPoint=PC;var Pv=Ka("Q",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),h=d.hasOwnProperty("Path")&&"function"===
typeof d.Path?d.Path:d.Path=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;ac._get(Object.getPrototypeOf(h.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Object.assign({},qc.obj.dissoc(a,"origin")));this.adjustOrigin(a.origin||this.origin);this.position=a.position||this.position;this.updateBounds(this.vertices)}},
{key:"__after_deserialize__",value:function(a,e,n){ac._get(Object.getPrototypeOf(h.prototype),"__after_deserialize__",this).call(this,a,e,n);this.updateBounds(this.vertices)}},{key:"__additionally_serialize__",value:function(a,e,n,q){ac._get(Object.getPrototypeOf(h.prototype),"__additionally_serialize__",this).call(this,a,e,n,q);e=this.getProperty("draggable");e!=this.propertiesAndPropertySettings().properties.draggable.defaultValue&&(a.props.draggable={value:e});if(e=this.borderColor.valueOf())a.props.borderColor=
{key:"borderColor",value:n.expressionSerializer.exprStringEncode({__expr__:e.toJSExpr(),bindings:{"lively.graphics/geometry-2d.js":["pt","rect"],"lively.graphics/color.js":["Color",qc.getClassName(e)]}})}}},{key:"isPath",get:function(){return!0}},{key:"isSvgMorph",get:function(){return!0}},{key:"onVertexChanged",value:function(a){this.makeDirty();this.updateBounds(this.vertices)}},{key:"copyVertices",value:function(){return this.vertices.map(function(a){return a.copy()})}},{key:"updateBounds",value:function(a){a=
void 0===a?this.vertices:a;if(a.length&&!this._adjustingVertices){this._adjustingVertices=!0;var e=this.origin,n=this.extent,q=e.x/n.x;n=e.y/n.y;var r=[];a.forEach(function(y,D){var E=y.isSmooth,I=y.position,K=y.controlPoints||{};y=K.next;K=K.previous;r.push(I);E&&0<D&&D<a.length-1&&r.push(I.addPt(y),I.addPt(K))});e=qc.Rectangle.unionPts(r);q=qc.pt(e.width*q,e.height*n);var v=e.topLeft();a.forEach(function(y){return y.moveBy(v.negated())});this.moveBy(this.getTransform().transformDirection(v));this.extent=
e.extent().maxPt(qc.pt(this.borderWidth,this.borderWidth));this.origin=q;this._adjustingVertices=!1}}},{key:"onChange",value:function(a){var e=a.prop,n=a.value,q=a.prevValue,r=this._adjustingVertices,v=this._adjustingOrigin;"extent"==e&&n&&q&&!r&&this.adjustVertices(n.scaleByPt(q.inverted()));(!v&&"vertices"===e||"borderWidthLeft"===e)&&this.updateBounds("vertices"==e?n:this.vertices);r||"origin"!==e||this.updateBounds(this.vertices);ac._get(Object.getPrototypeOf(h.prototype),"onChange",this).call(this,
a)}},{key:"vertexBefore",value:function(a){a=this.vertices.indexOf(a)-1;return this.vertices[0<=a?a:this.vertices.length-1]}},{key:"vertexAfter",value:function(a){a=this.vertices.indexOf(a)+1;return this.vertices[a>this.vertices.length-1?0:a]}},{key:"adjustVertices",value:function(a){var e=this,n=this.vertices;n&&n.forEach(function(q){var r=q.controlPoints,v=r.next;r=r.previous;v=v.scaleByPt(a);r=r.scaleByPt(a);q.position=q.position.addPt(e.origin).scaleByPt(a).subPt(e.origin);q.controlPoints={next:v,
previous:r}})}},{key:"adjustOrigin",value:function(a){this._adjustingOrigin=!0;var e=this.origin;this.vertices.forEach(function(n){return n.position=e.subPt(a).addXY(n.x,n.y)});ac._get(Object.getPrototypeOf(h.prototype),"adjustOrigin",this).call(this,a);this._adjustingOrigin=!1}},{key:"addVertex",value:function(a,e){e=void 0===e?null:e;var n=this.vertices;e="number"===typeof e?e:e&&e.isPathPoint?n.indexOf(e):void 0;"number"===typeof e&&-1<e?n.splice(e,0,a):n.push(a);this.vertices=n}},{key:"addVertexCloseTo",
value:function(a){var e=this.verticesCloseTo(a),n=e.closest,q=n.length;n=n.vertex;e=e.next;a=this.findClosestPointOnPath(a,10,3);return this.addVertex(a.point,a.length<=q?n:e?e.vertex:null)}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return a.renderPath(this)}},{key:"_pathNode",get:function(){var a=qc.PropertyPath("env.renderer").get(this);return(a=a&&a.getNodeForMorph(this))&&a.querySelector("#svg"+qc.string.regExpEscape(this.id))}},
{key:"verticesCloseTo",value:function(a,e){e=void 0===e?!0:e;for(var n=this.vertices,q=Infinity,r=-1,v=0;v<n.length;v++){var y=n[v].position.dist(a);y>=q||(q=y,r=v)}a=0===r?null:{index:r-1,vertex:n[r-1]};q=r===n.length-1?null:{index:r+1,vertex:n[r+1]};n={index:r,vertex:n[r]};e&&(e=this._pathNode,a&&(r=this.findClosestPointOnPath(a.vertex.position,6,3,e).length,a.length=r),q&&(r=this.findClosestPointOnPath(q.vertex.position,6,3,e).length,q.length=r),e=this.findClosestPointOnPath(n.vertex.position,
20,3,e).length,n.length=e);return{previous:a,next:q,closest:n}}},{key:"findClosestPointOnPath",value:function(a,e,n,q){function r(v,y,D,E,I,K,P){D=void 0===D?10:D;E=void 0===E?3:E;I=void 0===I?0:I;K=void 0===K?v.getTotalLength():K;P=void 0===P?0:P;var N=K,aa=D;K=[];var m=(I-N)/(aa-1),t=0;K.push([qc.Point.ensure(v.getPointAtLength(N)),N,t]);for(t=1;t<aa-1;t++){var u=N+t*m;K.push([qc.Point.ensure(v.getPointAtLength(u)),u,t])}K.push([qc.Point.ensure(v.getPointAtLength(I)),I,t]);I=Infinity;N=-1;aa=$jscomp.makeIterator(K);
for(m=aa.next();!m.done;m=aa.next())t=$jscomp.makeIterator(m.value),m=t.next().value,t.next(),t=t.next().value,m=y.dist(m),m>=I||(I=m,N=t);if(P>=E)return y=$jscomp.makeIterator(K[N]),v=y.next().value,y=y.next().value,{point:v,length:y};I=K[Math.max(0,N-1)][1];K=K[Math.min(K.length-1,N+1)][1];return r(v,y,D,E,I,K,P+1)}q||(q=(q=this.env.renderer.getNodeForMorph(this))&&q.querySelector("#svg"+qc.string.regExpEscape(this.id)));return q?r(q,a,e,n):{length:0,point:a}}},{key:"onDragStart",value:function(a){var e=
a.domEvt.target,n=(new qc.PropertyPath("attributes.class.value")).get(e);if(n&&n.includes("path-point"))n=$jscomp.makeIterator(n.match(/path-point-([0-9]+)(?:-control-([0-9]+))?$/)),n.next(),a=n.next().value,n=n.next().value,this._controlPointDrag={marker:e,n:Number(a)},void 0!==n&&(this._controlPointDrag.ctrlN=Number(n));else return ac._get(Object.getPrototypeOf(h.prototype),"onDragStart",this).call(this,a)}},{key:"onDrag",value:function(a){if(!this._controlPointDrag)return ac._get(Object.getPrototypeOf(h.prototype),
"onDrag",this).call(this,a);var e=this._controlPointDrag,n=e.n,q=e.ctrlN,r=this.vertices;if(e=r[n])a=this.getInverseTransform().transformDirection(a.state.dragDelta),void 0===q?(e.moveBy(a),a=r[n-1],r=r[n+1],a&&10>a.position.dist(e.position)?this._controlPointDrag.maybeMerge=[n-1,n]:r&&10>r.position.dist(e.position)?this._controlPointDrag.maybeMerge=[n,n+1]:this._controlPointDrag.maybeMerge=void 0):1===q?e.movePreviousControlPoint(a):2===q&&e.moveNextControlPoint(a)}},{key:"onDragEnd",value:function(a){a=
this.vertices;var e=this._controlPointDrag;if(e&&(e=e.maybeMerge,delete this._controlPointDrag,e)){var n=$jscomp.makeIterator(e);e=n.next().value;n=n.next().value;a[e].controlPoints.next=a[n].controlPoints.next;a.splice(n,1);this.vertices=a}}},{key:"onDoubleMouseDown",value:function(a){this.showControlPoints&&this.addVertexCloseTo(this.localize(a.position))}},{key:"menuItems",value:function(){var a=this,e=qc.Icon.textAttribute("check-square",{textStyleClasses:["far"]}),n=qc.Icon.textAttribute("square",
{textStyleClasses:["far"]});n[1].paddingRight="7px";e[1].paddingRight="5px";return[[[].concat($jscomp.arrayFromIterable(this.showControlPoints?e:n),[" control points"]),function(){return a.showControlPoints=!a.showControlPoints}],[[].concat($jscomp.arrayFromIterable(this.isSmooth?e:n),[" smooth"]),function(){return a.isSmooth=!a.isSmooth}],{isDivider:!0}].concat($jscomp.arrayFromIterable(ac._get(Object.getPrototypeOf(h.prototype),"menuItems",this).call(this)))}},{key:"getPointOnPath",value:function(a){if(!this._pathNode)return qc.pt(0,
0);a=this._pathNode.getPointAtLength(this._pathNode.getTotalLength()*a)||qc.pt(0,0);return qc.pt(a.x,a.y)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Path"}},{key:"properties",get:function(){return{borderColor:{isStyleProp:!0,type:"ColorGradient",foldable:["top","left","right","bottom"],set:function(a){a||(a=qc.Color.white);if(a.isColor||a.isGradient)a={top:a,left:a,right:a,bottom:a};this.setProperty("borderColor",qc.obj.extract(a,["top","left","right","bottom"],function(e,n){return qc.obj.isArray(n)?
qc.Color.fromTuple(n):n}))}},showControlPoints:{defaultValue:!1},vertices:{defaultValue:[],isStyleProp:!0,after:["isSmooth","borderWidth"],before:["extent","origin"],type:"Vertices",set:function(a){var e=this,n=this.isSmooth;this._adjustingVertices=!0;a=a.map(function(q){return q.isPathPoint?Object.assign(q,{path:e}):new qc.PathPoint(e,Object.assign({isSmooth:n},q))});this.setProperty("vertices",a);this._adjustingVertices=!1;this.updateBounds(a)}},startMarker:{defaultValue:null,type:"Object"},endMarker:{defaultValue:null,
type:"Object"},endStyle:{isStyleProp:!0,type:"Enum",values:["butt","round","square"],defaultValue:"butt"},drawnProportion:{type:"Number",isStyleProp:!0,isFloat:!0,min:-1,max:1,defaultValue:0},cornerStyle:{type:"Enum",isStyleProp:!0,values:["arcs","bevel","miter","miter-clip","round"],defaultValue:"miter"},draggable:{get:function(){return this.getProperty("draggable")||this.showControlPoints}},isSmooth:{defaultValue:!1,before:["vertices"],type:"Boolean",set:function(a){this.setProperty("isSmooth",
a);this.vertices&&(this._adjustingVertices=!0,this.vertices.forEach(function(e){return e.isSmooth=a}),this._adjustingVertices=!1,this.updateBounds(this.vertices))}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:98600,end:112350})}(qc.Morph));qc.Path=Pv;qc.Path=Pv;qc.Path=Pv;var Wy=
Ka("N",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),h=d.hasOwnProperty("Polygon")&&"function"===typeof d.Polygon?d.Polygon:d.Polygon=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){if(a.vertices&&2<a.vertices.length)ac._get(Object.getPrototypeOf(h.prototype),Symbol.for("lively-instance-initialize"),this).call(this,
a);else throw Error("A polygon requires 3 or more vertices!");}},{key:"isPolygon",get:function(){return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Polygon"}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:112359,end:112613})}(qc.Path));qc.Polygon=Wy;qc.Polygon=
Wy;qc.Polygon=Wy;var Xy=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),h=d.hasOwnProperty("LineMorph")&&"function"===typeof d.LineMorph?d.LineMorph:d.LineMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"isPolygon",get:function(){return!0}},{key:"update",value:function(){if(!this._isUpdating){this._isUpdating=!0;var a=this.line,e=this.height,n=a.toVector();this.setProperty("position",
this.position.addPt(a.perpendicularLine(0,e,"cc").toVector()));this.width=n.fastR();this.rotation=n.theta();this.vec=n;this._isUpdating=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LineMorph"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:0},fill:{defaultValue:qc.Color.black},height:{defaultValue:1},line:{defaultValue:qc.Line.fromCoords(0,0,0,0),set:function(a){this.setProperty("line",a);this.update(a)}},start:{derived:!0,after:["line"],get:function(a){return this.line.start},
set:function(a){this.line=this.line.withStart(a)}},end:{derived:!0,after:["line"],get:function(a){return this.line.end},set:function(a){this.line=this.line.withEnd(a)}},position:{derived:!0,after:["line"],get:function(a){return this.start},set:function(a){var e=a.subPt(this.start),n=this.rotation;this.line=new qc.Line(a,this.end.addPt(e));this.rotation=n}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:112622,end:114114})}(qc.Morph);qc.LineMorph=Xy;qc.LineMorph=Xy;qc.LineMorph=Xy;var Rva=Object.freeze({__proto__:null,Morph:xj,Ellipse:Nv,Triangle:Vy,Image:Ov,PathPoint:PC,Path:Pv,Polygon:Wy,LineMorph:Xy}),ve=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js");ve.getAllPartResources=WQ;ve.loadPart=OH;ve.savePart=XQ;ve.interactivelySavePart=rB;ve.interactivelyLoadObjectFromPartsBinFolder=YQ;ve.interactivelySaveObjectToPartsBinFolder=
ZQ;ve.saveObjectToPartsbinFolder=$Q;ve.loadObjectFromPartsbinFolder=PH;ve.buildCommitEditor=aR;ve.resource=Uc;ve.Resource=Uf;ve.registerExtension=Zd;ve.Path=Eg;ve.obj=xf;ve.date=hq;ve.promise=bg;ve.HorizontalLayout=lp;ve.VerticalLayout=Dr;ve.morph=zj;ve.Morph=xj;ve.pt=xh;ve.Color=If;ve.Rectangle=ie;ve.connect=Ik;ve.emit=Rq;ve.SnapshotPackageHelper=tK;ve.ensureCommitInfo=fB;ve.MorphicDB=zq;ve.createMorphSnapshot=cv;ve.getClassName=Io;ve.getAllPartResources=WQ;ve.getAllPartResources=WQ;ve.loadPart=
OH;ve.loadPart=OH;ve.savePart=XQ;ve.savePart=XQ;ve.interactivelySavePart=rB;ve.interactivelySavePart=rB;ve.interactivelyLoadObjectFromPartsBinFolder=YQ;ve.interactivelyLoadObjectFromPartsBinFolder=YQ;ve.interactivelySaveObjectToPartsBinFolder=ZQ;ve.interactivelySaveObjectToPartsBinFolder=ZQ;ve.saveObjectToPartsbinFolder=$Q;ve.saveObjectToPartsbinFolder=$Q;ve.loadObjectFromPartsbinFolder=PH;ve.loadObjectFromPartsbinFolder=PH;var tU=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),
h=d.hasOwnProperty("SnapshotEditor")&&"function"===typeof d.SnapshotEditor?d.SnapshotEditor:d.SnapshotEditor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,e,n){this.commit=a;this.snapshot=e;this._db=n}},{key:"db",get:function(){return this._db||ve.MorphicDB.default}},{key:"saveModifiedSnapshot",value:function(a,e){var n=this,q,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){if(1==
D.nextAddress){q=a;r=q._id;v=q.name;y=q.type;if(!r)throw Error("No id of commit, cannot save!");return D.yield(n.db.commit(y,v,e,a,void 0,r),2)}a=D.yieldResult;n.commit=a;n.snapshot=e;return D.return(a)})}},{key:"interactivelySaveModifiedSnapshot",value:function(a,e){var n=this,q,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){q=ve.promise.deferred();r=q.promise;v=q.resolve;y=q.reject;D=n;Object.assign(ve.buildCommitEditor(),{commit:Object.assign({},n.commit,{},a),cancel:function(){(this.getWindow()||
this).remove();y("canceled")},accept:function(){var I=this,K,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==N.nextAddress)return N.setCatchFinallyBlocks(2),N.yield(D.saveModifiedSnapshot(I.commit,e),4);if(2!=N.nextAddress)return K=N.yieldResult,(I.getWindow()||I).remove(),v(I.commit=K),N.leaveTryBlock(0);P=N.enterCatchBlock();I.showError(P);y(P);N.jumpToEnd()})}}).openInWindow({title:"commit"});return E.return(r)})}},{key:"interactivelyEditMetadata",value:function(a){var e=
this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(e.interactivelySaveModifiedSnapshot(e.commit,e.snapshot),2);n=q.yieldResult;"function"===typeof a&&a({commit:n,snapshot:e.snapshot});return q.return(n)})}},{key:"interactivelyEditSnapshotJSON",value:function(a){var e=this,n,q,r,v,y,D,E,I,K,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==N.nextAddress)return n=e,q=n.commit,r=n.snapshot,v=q,y=v._id,D=v.name,E=v.type,N.yield(System.import("lively.ide/text-editor.js"),
2);K=N.yieldResult;P=K.default;P.openURL("<"+E+"/"+D+">",{historyId:"object-serialization-debugger-editor",customSaveAction:function(aa){var m,t,u,B,A,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:if(m=r){F.jumpTo(2);break}return F.yield(e.db.fetchSnapshot(void 0,void 0,y),3);case 3:m=F.yieldResult;case 2:t=m;u=JSON.stringify(t,null,2);if(u===I){F.jumpTo(4);break}return F.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",
{fontWeight:"normal"}]),5);case 5:if(B=F.yieldResult,!B)return F.return({saved:!1,message:"canceled"});case 4:return A=JSON.parse(aa.ui.contentText.textString),F.yield(e.interactivelySaveModifiedSnapshot(e.commit,A),6);case 6:return q=F.yieldResult,r=A,I=aa.ui.contentText.textString,H={saved:!0,snapshot:A,commit:q},"function"===typeof a&&a(H),F.return(H)}})},customLoadContentAction:function(aa,m){var t,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){if(1==B.nextAddress)return(t=r)?
B.jumpTo(2):B.yield(e.db.fetchSnapshot(void 0,void 0,y),3);2!=B.nextAddress&&(t=B.yieldResult);u=t;return B.return({content:I=JSON.stringify(u,null,2),url:E+"/"+D+".json"})})}});N.jumpToEnd()})}},{key:"interactivelyEditPackageCode",value:function(a){var e=this,n,q,r,v,y,D,E,I,K,P,N,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:n=e;q=n.commit;r=n.snapshot;v=q;y=v._id;if(D=r){m.jumpTo(2);break}return m.yield(e.db.fetchSnapshot(void 0,void 0,y),3);case 3:D=
m.yieldResult;case 2:return E=D,I=(new ve.SnapshotPackageHelper(E)).filesInPackages(),K=I.map(function(t){return{isListItem:!0,string:t.url,value:t}}),m.yield($world.filterableListPrompt("Select file to edit",K,{historyId:"object-serialization-debugger-hist"}),4);case 4:return P=m.yieldResult,N=$jscomp.makeIterator(P.selected),(aa=N.next().value)?m.return(e.interactivelyEditFileInSnapshotPackage(aa,a)):m.return()}})}},{key:"interactivelyEditFileInSnapshotPackage",value:function(a,e,n){var q=this,
r,v,y,D,E,I,K,P,N,aa,m,t;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:r=q;v=r.snapshot;y=r.commit;D=y._id;E=y.name;I=y.type;if(K=v){u.jumpTo(2);break}return u.yield(q.db.fetchSnapshot(void 0,void 0,D),3);case 3:K=u.yieldResult;case 2:return P=K,N=a.get(P),u.yield(System.import("lively.ide/text-editor.js"),4);case 4:return aa=u.yieldResult,m=aa.default,t=m.openURL("<"+I+"/"+E+" - "+a.path.slice(1).join("/")+">",{historyId:"interactivelyEditFileInSnapshotPackage-hist",
customSaveAction:function(B){var A,H,F,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(U){switch(U.nextAddress){case 1:A=a.get(P);if(A===N){U.jumpTo(2);break}return U.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]),3);case 3:if(H=U.yieldResult,!H)return U.return({saved:!1,message:"canceled"});case 2:return a.set(P,B.ui.contentText.textString),F=q,U.yield(q.interactivelySaveModifiedSnapshot(q.commit,
P),4);case 4:return F.commit=U.yieldResult,L={commit:q.commit,snapshot:P,saved:!0},"function"===typeof e&&e(L),U.return(L)}})},customLoadContentAction:function(B,A){return{content:a.get(P),url:a.url}}}),n&&t.whenRendered().then(function(){return t.lineNumber=n.row}),u.return(t)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapshotEditor"}}],d,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9614,end:14833})}(void 0);ve.SnapshotEditor=tU;ve.SnapshotEditor=tU;ve.SnapshotEditor=tU;ve.partURLRe=/^part:\/\/([^\/]+)\/(.*)$/;var Yy=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),h=d.hasOwnProperty("PartResource")&&"function"===typeof d.PartResource?d.PartResource:d.PartResource=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ac(h,b,[{key:"canDealWithJSON",get:function(){return!1}},{key:"dirList",value:function(a,e){var n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?q.yield(ve.resource(n.url.replace("part://","styleguide://")).dirList(a,e),2):q.return(q.yieldResult)})}},{key:"write",value:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){throw Error("Part urls are ready only! Please go to the world they are defined in and change the exported component directly.");
})}},{key:"read",value:function(){var a=this,e,n,q,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){switch(D.nextAddress){case 1:return D.yield(ve.resource(a.url.replace("part://","styleguide://")).read(),2);case 2:e=D.yieldResult;if(!e.master){D.jumpTo(3);break}return D.yield(e.master.whenReady(),3);case 3:n=e.copy();n.isComponent=!1;n.name="a"+ve.getClassName(n);n.withAllSubmorphsDoExcluding(function(E){E!=n&&E.master||delete E._parametrizedProps},function(E){return E.master&&
E!=n});q=n.master;n.master=e;if(!n._pool.mastersInSubHierarchy){D.jumpTo(5);break}r=$jscomp.makeIterator(n._pool.mastersInSubHierarchy);v=r.next();case 6:if(v.done){D.jumpTo(5);break}y=v.value;if(q==y){D.jumpTo(7);break}return D.yield(y.applyIfNeeded(!0),9);case 9:y.derivedMorph.ownerChain().includes(n)||y.derivedMorph.requestMasterStyling();case 7:v=r.next();D.jumpTo(6);break;case 5:return n.master.applyIfNeeded(!0),delete n._pool,n.withAllSubmorphsDo(function(E){if("function"===typeof E.onLoad)E.onLoad()}),
D.return(n)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PartResource"}}],d,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14890,end:16664})}(ve.Resource);ve.PartResource=Yy;ve.PartResource=Yy;ve.PartResource=Yy;var EK={name:"part",matches:function(b){return b.match(ve.partURLRe)},
resourceClass:ve.PartResource};ve.resourceExtension=EK;ve.resourceExtension=EK;ve.resourceExtension=EK;ve.registerExtension(ve.resourceExtension);(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),h=d.hasOwnProperty("CommitEditor")&&"function"===typeof d.CommitEditor?d.CommitEditor:d.CommitEditor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"onLoad",value:function(){ve.connect(this.ui.okButton,
"fire",this,"accept");ve.connect(this.ui.cancelButton,"fire",this,"cancel")}},{key:"accept",value:function(){}},{key:"cancel",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CommitEditor"}},{key:"properties",get:function(){return{name:{defaultValue:"commit editor"},extent:{defaultValue:ve.pt(420,24)},layout:{initialize:function(){this.layout=new ve.VerticalLayout({resizeSubmorphs:!0,spacing:3})}},commit:{set:function(a){this._commit=a;var e=a.type,n=a.timestamp,
q=a.author,r=a.tags,v=a.description,y=a.metadata,D=this.ui,E=D.typeInput,I=D.timestampInput,K=D.authorNameInput,P=D.authorEmailInput,N=D.authorRealmInput,aa=D.tagsInput,m=D.descriptionInput,t=D.messageInput,u=D.metadataInput;D.nameInput.input=a.name;E.input=e;I.input=String(new Date(n));K.input=q.name;P.input=q.email;N.input=q.realm;aa.input=r.join(" ");m.textString=v;t.textString="";u.textString=y?JSON.stringify(y,null,2):""},get:function(){var a=this._commit;if(!a)throw Error("commit editor does not have a _commit object");
var e=this.ui,n=e.authorNameInput,q=e.authorEmailInput,r=e.authorRealmInput,v=e.tagsInput,y=e.descriptionInput,D=e.messageInput,E=e.metadataInput,I=e.nameInput.input;e=e.typeInput.input;if(a.name!==I)throw Error("name does not match _commit.name: "+I+" vs "+a.name);if(a.type!==e)throw Error("type does not match _commit.type: "+e+" vs "+a.type);a.author.name=n.input;a.author.email=q.input;a.author.realm=r.input;a.tags=v.input.split(" ").map(function(K){return K.trim()}).filter(Boolean);a.description=
y.textString;a.message=D.textString;a.metadata=E.textString?JSON.parse(E.textString):null;return a}},ui:{get:function(){return{metadataInput:this.get("metadata input"),messageInput:this.get("message input"),descriptionInput:this.get("description input"),tagsInput:this.get("tags input"),authorRealmInput:this.get("author.realm input"),authorEmailInput:this.get("author.email input"),authorNameInput:this.get("author.name input"),timestampInput:this.get("timestamp input"),typeInput:this.get("type input"),
nameInput:this.get("name input"),cancelButton:this.get("cancel button"),okButton:this.get("ok button")}}},submorphs:{initialize:function(){var a={type:"input",extent:ve.pt(420,24),fixedWidth:!0,fixedHeight:!0,padding:ve.Rectangle.inset(4,4),border:{color:ve.Color.gray,width:1}};this.submorphs=[Object.assign({},a,{name:"name input",placeholder:"name"}),Object.assign({},a,{name:"type input",placeholder:"type"}),Object.assign({},a,{name:"timestamp input",placeholder:"timestamp"}),{layout:new ve.VerticalLayout({resizeSubmorphs:!0,
spacing:3}),submorphs:[Object.assign({},a,{name:"author.name input",placeholder:"author name"}),Object.assign({},a,{name:"author.email input",placeholder:"author email"}),Object.assign({},a,{name:"author.realm input",placeholder:"author realm"})]},Object.assign({},a,{name:"tags input",placeholder:"tags"}),Object.assign({},a,{height:70,name:"description input",type:"text"}),Object.assign({},a,{height:70,name:"message input",type:"text"}),Object.assign({},a,{height:70,name:"metadata input",type:"text"}),
{layout:new ve.HorizontalLayout({spacing:3,direction:"centered"}),submorphs:[{type:"button",name:"ok button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}]}}}}}],d,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:16850,end:21944})})(ve.Morph);ve.buildCommitEditor=aR;
ve.buildCommitEditor=aR;var yl=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js");yl.pt=xh;yl.Morph=xj;yl.morph=zj;yl.touchInputDevice=qm;yl.config=Yk;yl.fun=ik;var Zy=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),h=d.hasOwnProperty("TooltipViewer")&&"function"===typeof d.TooltipViewer?d.TooltipViewer:d.TooltipViewer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,
b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.currentMorph=a}},{key:"__dont_serialize__",get:function(){return["currentTooltip","currentMorph"]}},{key:"notPartOfCurrentTooltip",value:function(a){return!a.ownerChain().includes(this.currentMorph)}},{key:"invalidatesCurrentTooltip",value:function(a){return a.tooltip||this.notPartOfCurrentTooltip(a)}},{key:"mouseMove",value:function(a){var e=this;if(!yl.touchInputDevice&&!a.state.draggedMorph){var n=a.hand,q=$world.morphsContainingPoint(a.positionIn($world)).filter(function(D){return D.reactsToPointer||
D.tooltip});q=$jscomp.makeIterator(q.slice(q.indexOf(n)+1));for(var r=q.next();!r.done;r=q.next()){r=r.value;if(y&&!y.ownerChain().includes(r))break;if(r.tooltip){var v=r;break}var y=r}for(;v&&!v.visible;)v=v.morphBeneath(a.positionIn($world));v?this.currentMorph!==v&&this.invalidatesCurrentTooltip(v)&&(this.hoverOutOfMorph(this.currentMorph),this.hoverIntoMorph(v,n),this.currentMorph=v):this.currentTooltip?this.currentTooltip.softRemove().then(function(){e.currentTooltip&&!e.currentTooltip.owner&&
(e.currentTooltip=null)}):this.currentMorph=null}}},{key:"mouseDown",value:function(a){this.currentTooltip&&this.currentTooltip.remove();this.currentTooltip=null}},{key:"hoverIntoMorph",value:function(a,e){this.clearScheduledTooltip();this.currentTooltip?this.showTooltipFor(a,e):this.scheduleTooltipFor(a,e)}},{key:"hoverOutOfMorph",value:function(a){var e=this;this.currentTooltip&&this.currentTooltip.softRemove(function(n){return e.currentTooltip==n&&(e.currentTooltip=null)})}},{key:"scheduleTooltipFor",
value:function(a,e){var n=this;this.timer=setTimeout(function(){n.currentMorph&&n.showTooltipFor(a,e)},1E3*yl.config.showTooltipsAfter)}},{key:"clearScheduledTooltip",value:function(){clearTimeout(this.timer)}},{key:"clearCurrentTooltip",value:function(){var a=this.currentTooltip;a&&a.remove()}},{key:"showTooltipFor",value:function(a,e){a.tooltip&&a.world()&&!e.env.eventDispatcher.eventState.draggedMorph&&(this.clearCurrentTooltip(),e=e?e.position.addXY(10,7):a.globalBounds().bottomRight(),this.currentTooltip=
new yl.Tooltip({position:e,description:a.tooltip}),$world.addMorph(this.currentTooltip),this.currentTooltip.update(a))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TooltipViewer"}}],d,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:207,end:3202})}(void 0);yl.TooltipViewer=
Zy;yl.TooltipViewer=Zy;yl.TooltipViewer=Zy;var Qv=Ka("T",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),h=d.hasOwnProperty("Tooltip")&&"function"===typeof d.Tooltip?d.Tooltip:d.Tooltip=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"update",value:function(a){this.position=a.globalBounds().bottomCenter().subPt(a.world().scroll).addPt(yl.pt(0,7))}},{key:"softRemove",
value:function(a){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(e.animate({opacity:0,duration:300}),2);a&&a(e);e.remove();n.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Tooltip"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},reactsToPointer:{defaultValue:!1},isEpiMorph:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://System/tooltip"}}},description:{after:["submorphs"],
derived:!0,get:function(){return $jscomp.makeIterator(this.submorphs).next().value.value},set:function(a){var e=$jscomp.makeIterator(this.submorphs).next().value;e.value=a;e.fit()}},submorphs:{initialize:function(){this.submorphs=[new yl.morph({reactsToPointer:!1,type:"label",width:200})]}}}}}],d,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:3211,end:4406})}(yl.Morph));yl.Tooltip=Qv;yl.Tooltip=Qv;yl.Tooltip=Qv;var Sva=Object.freeze({__proto__:null,TooltipViewer:Zy,Tooltip:Qv}),hca=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/index.js");hca.default=zq;hca.MorphicDB=zq;var Tva=Object.freeze({__proto__:null,MorphicDB:zq}),Dk=lively.FreezerRuntime.recorderFor("lively.2lively/interface.js");Dk.nyi=function(b){throw Error("Not yet implemented: "+b);};Dk.string=Ng;Dk.promise=bg;Dk.debugMessageOrder=!1;
var gj=function(b){this.id=Dk.string.newUUID();this.actions={};this.options={ackTimeout:3500,debug:!1};this._incomingOrderNumberingBySenders=new Map;this._outgoingOrderNumberingByTargets=new Map;this._outOfOrderCacheBySenders=new Map};gj.prototype.isOnline=function(){Dk.nyi("isOnline")};gj.prototype.open=function(){Dk.nyi("open")};gj.prototype.close=function(){Dk.nyi("close")};gj.prototype.remove=function(){Dk.nyi("remove")};gj.prototype.whenOnline=function(b){var d=this;return Dk.promise.waitFor(b,
function(){return d.isOnline()}).then(function(){return d}).catch(function(h){return Promise.reject(/timeout/i.test(String(h))?Error("Timeout in "+d+".whenOnline"):h)})};gj.prototype.onError=function(b){this.debug&&console.log("["+this+"] error: "+b)};gj.prototype.removeService=function(b){delete this.actions[b]};gj.prototype.removeServices=function(b){var d=this;b.forEach(function(h){return d.removeService(h)})};gj.prototype.addService=function(b,d){this.actions[b]=d};gj.prototype.addServices=function(b){var d=
this;Object.keys(b).forEach(function(h){return d.addService(h,b[h])})};gj.prototype.ping=function(b){var d=this,h,a,e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return h=Date.now(),r.yield(d.sendToAndWait(b,"l2l-ping",{timestamp:h}),2);a=r.yieldResult;e=a.data;n=e.timestamp;q=Date.now();return r.return({to:n-h,from:q-n,roundtrip:q-h})})};gj.prototype.send=function(b,d){Dk.nyi("send")};gj.prototype.sendAndWait=function(b){var d=this,h,a,e,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return h=
new Promise(function(r,v){return d.send(b,r)}),a={},e=d.options.ackTimeout+400,"ackTimeout"in b&&(e=!b.ackTimeout||0>b.ackTimeout?null:b.ackTimeout+400),e?q.yield(Promise.race([Dk.promise.delay(e,a),h]),5):q.yield(h,4);case 4:n=q.yieldResult;q.jumpTo(3);break;case 5:n=q.yieldResult;case 3:if(n===a)throw Error("Timeout sending "+b.action);return q.return(n)}})};gj.prototype.sendTo=function(b,d,h,a){return this.send({target:b,action:d,data:h},a)};gj.prototype.sendToAndWait=function(b,d,h,a){return this.sendAndWait(Object.assign({target:b,
action:d,data:h},a))};gj.prototype.prepareSend=function(b,d){var h=b.target,a=b.action,e=b.messageId,n=b.sender;if(!a)throw Error("Trying to send a message without specifying action!");if(!h)throw Error("Trying to send message "+a+" without specifying target!");e||(b.messageId=Dk.string.newUUID());n||(b.sender=this.id);a=b.n=this._outgoingOrderNumberingByTargets.get(h)||0;this._outgoingOrderNumberingByTargets.set(h,a+1);if("function"===typeof d){n=this;var q=d;d=function(r){var v=n._incomingOrderNumberingBySenders.get(r.sender)||
0;n.debug&&Dk.debugMessageOrder&&console.log("[MSG ORDER] "+n+" received ack for "+r.action+" as msg "+v);try{q.apply(null,arguments)}catch(y){console.error("Error in ack fn of "+n+": "+y.stack)}n._incomingOrderNumberingBySenders.set(r.sender,v+1);setTimeout(function(){return n.invokeOutOfOrderMessages(r.sender)},0)}}this.debug&&Dk.debugMessageOrder&&console.log("[MSG ORDER] "+this+" sending "+a+" ("+b.action+") to "+h);return[b,d]};gj.prototype.prepareAnswerMessage=function(b,d){return{action:b.action+
"-response",inResponseTo:b.messageId,target:b.sender,data:d,sender:this.id}};gj.prototype.installEventToMessageTranslator=function(b){var d=this,h=b.onevent;b.onevent=function(a){var e=a.data||[];h.call(this,a);a.data=["*"].concat(e);h.call(this,a)};b.on("*",function(a,e){a&&"object"===typeof a&&a.action&&(e=a,a=e.action);var n=arguments[arguments.length-1];n="function"===typeof n?n:null;(e=e===n?null:e)&&e.data&&("number"===typeof e.n||e.broadcast)&&e.sender?d.receive(e,b,n):(console.warn(d+" received non-conformant message "+
a+":",arguments),"function"===typeof n&&n({data:{error:"invalid l2l message"}}))})};gj.prototype.receive=function(b,d,h){this.dispatchL2LMessageToSelf(b,d,h)};gj.prototype.dispatchL2LMessageToSelf=function(b,d,h){var a=this,e=b.action;if(b.broadcast)this.safeInvokeServiceHandler(e,b,h,d);else try{var n=this._incomingOrderNumberingBySenders.get(b.sender)||0,q="register"===e||"unregister";if(!q&&b.n<n)console.error("[MSG ORDER] ["+this+"] received message no. "+b.n+" but expected >= "+n+", dropping "+
e);else if(!q&&b.n>n){this.debug&&Dk.debugMessageOrder&&console.log("[MSG ORDER] ["+this+"] storing out of order message "+e+" ("+b.n+") for later invocation");var r=this._outOfOrderCacheBySenders.get(b.sender);r||(r=[],this._outOfOrderCacheBySenders.set(b.sender,r));r.push([e,b,h,d])}else this.safeInvokeServiceHandler(e,b,h,d),setTimeout(function(){return a.invokeOutOfOrderMessages(b.sender)},0)}catch(v){console.error("Error message ordering when handling "+e+": "+(v.stack||v)),"function"===typeof h&&
h(this.prepareAnswerMessage(b,{isError:!0,error:String(v.stack||v)}))}};gj.prototype.invokeOutOfOrderMessages=function(b){var d=this._outOfOrderCacheBySenders.get(b);if(d&&d.length){var h=this._incomingOrderNumberingBySenders.get(b)||0;b=d.findIndex(function(a){a=$jscomp.makeIterator(a);a.next();return a.next().value.n===h});-1!==b&&(d.splice(b,1),this.invokeServiceHandler.apply(this,d[b]))}};gj.prototype.renameTarget=function(b,d){if(b!==d){var h=this._outgoingOrderNumberingByTargets.get(b);this._outgoingOrderNumberingByTargets.delete(b);
this._outgoingOrderNumberingByTargets.set(d,h)}};gj.prototype.safeInvokeServiceHandler=function(b,d,h,a){try{"function"===typeof this.actions[b]?this.invokeServiceHandler(b,d,h,a):a._events&&Object.keys(a._events).includes(b)||(console.warn("WARNING ["+this+"] Unhandled message: "+b),"function"===typeof h&&h(this.prepareAnswerMessage(d,{isError:!0,error:"message not understood: "+b})))}catch(e){console.error("Error when handling "+b+": "+(e.stack||e)),"function"===typeof h&&h(this.prepareAnswerMessage(d,
{isError:!0,error:String(e.stack||e)}))}};gj.prototype.invokeServiceHandler=function(b,d,h,a){var e=this;this.debug&&Dk.debugMessageOrder&&console.log("[MSG ORDER] "+this+" received "+d.n+" ("+d.action+") from "+d.sender);this._incomingOrderNumberingBySenders.set(d.sender,d.n+1);if("function"===typeof h){var n=!1,q=!1,r="ackTimeout"in d?d.ackTimeout:this.options.ackTimeout,v=this._outgoingOrderNumberingByTargets.get(d.sender)||0;this._outgoingOrderNumberingByTargets.set(d.sender,v+1);var y=function(D){q?
console.warn("["+e+"] ackFn for "+d.action+" called after it timed out, dropping answer!"):n?console.warn("["+e+"] ack function called repeatedly when handling "+d.action):(n=!0,h(e.prepareAnswerMessage(d,D)),e.debug&&Dk.debugMessageOrder&&console.log("[MSG ORDER] "+e+" sending "+v+" (ack for "+d.action+")"))};r&&setTimeout(function(){n||(y({isError:!0,error:"Timeout error: "+e+" did not send answer for "+d.action+" after "+r+"ms"}),q=!0)},r)}try{this.actions[b].call(this,this,d,y,a)}catch(D){console.error("["+
this+"] Error handling "+b+": "+(D.stack||D)),y&&y({error:D.stack})}};$jscomp.global.Object.defineProperties(gj.prototype,{debug:{configurable:!0,enumerable:!0,get:function(){return this.options.debug},set:function(b){this.options.debug=b}}});Dk.L2LConnection=gj;Dk.default=gj;var Pr=lively.FreezerRuntime.recorderFor("lively.2lively/default-actions.js"),FK={"l2l-ping":function(b,d,h,a){a=d.sender;d=d.data.timestamp;var e=Date.now();"function"===typeof h&&h({timestamp:e});b.debug&&console.log("[undefined] got ping from "+
a+", time: "+(e-d)+"ms")},"remote-eval":function(b,d,h,a){var e=d.data.source;Promise.resolve().then(function(){return eval(e)}).then(function(n){return h({value:n})}).catch(function(n){n.originalErr&&(n=n.originalErr);console.error("eval error: "+n);"function"===typeof h&&h({isError:!0,value:String(n.stack||n)})})},"remote-eval-2":function(b,d,h,a){var e=d.data.source;Promise.resolve().then(function(){var n=eval(e);if(!(n instanceof Promise))throw console.error("unexpected eval result:"+n),Error("unexpected eval result:"+
n);return n}).then(function(n){return h(n)}).catch(function(n){console.error("eval error: "+n);n.originalErr&&(n=n.originalErr);"function"===typeof h&&h({isError:!0,value:String(n.stack||n)})})}};Pr.defaultActions=FK;Pr.defaultActions=FK;Pr.defaultActions=FK;var tt={},uU=(tt["[broadcast] send"]=function(b,d,h,a){var e=d.sender,n=d.data,q,r,v,y,D,E,I,K,P,N,aa,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(t){q=n;r=q.action;v=q.broadcast;y=q.room;D=q.namespace;E=q.isSystemBroadcast;I=
q.isMultiServerBroadcast;K=[];I?(console.log(".......isMultiServerBroadcast"),P=b,N=P.id,aa=b.getTrackerList(),console.log(aa),K=aa.map(function(u){return u.id!=N?u.io.nsps["/"+u.namespace]:a.broadcast})):(E&&(D=b.namespace),K.push(D?b.io.nsps["/"+D]:a.broadcast));K.forEach(function(u){console.log(r,{action:r,sender:e,broadcast:!0,data:v});u.to(y).emit(r,{action:r,sender:e,broadcast:!0,data:v})});h&&"function"===typeof h&&(m="message broadcasted to "+y,D&&(m+=" in namespace "+D),1<K.length&&(m+=" "+
K.length+" trackers"),console.log(m),h({status:m}));t.jumpToEnd()})},tt["[broadcast] join room"]=function(b,d,h,a){var e=d.sender,n=d.data.room,q,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){if(1==D.nextAddress)return r=!1,v=b.io.nsps["/"+b.namespace].adapter.rooms,(y=v[n]&&v[n].sockets&&v[n].sockets[a.id])?(q=e+" already in "+n,D.jumpTo(2)):D.yield(new Promise(function(E,I){return a.join(n,function(K){return K?I(K):E()})}),3);2!=D.nextAddress&&(q=e+" joined "+n,r=!0);h&&"function"===
typeof h&&h({status:q,joined:r});D.jumpToEnd()})},tt["[broadcast] leave room"]=function(b,d,h,a){var e=d.sender,n=d.data.room,q,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){if(1==D.nextAddress)return r=!1,v=b.io.nsps["/"+b.namespace].adapter.rooms,y=v[n]&&v[n].sockets&&v[n].sockets[a.id],y?D.yield(new Promise(function(E,I){return a.leave(n,function(K){return K?I(K):E()})}),3):(q=e+" not in "+n,D.jumpTo(2));2!=D.nextAddress&&(q=e+" left room "+n,r=!0);console.log(q);h&&"function"===
typeof h&&h({left:r,status:q});D.jumpToEnd()})},tt["[broadcast] my rooms"]=function(b,d,h,a){h(a.rooms)},tt["[broadcast] all rooms"]=function(b,d,h,a){h(b.io.nsps["/"+b.namespace].adapter.rooms)},tt["[broadcast] list room members"]=function(b,d,h,a){d=d.data.room;a=b.io;d?(b=a.nsps["/"+b.namespace].adapter.rooms[d],h({room:d,sockets:b?b.sockets:{},length:b?b.length:0})):h({isError:!0,error:"`room` paramerter missing!"})},tt.getClients=function(b,d,h){b.removeDisconnectedClients();h(Array.from(b.clients))},
tt);Pr.defaultTrackerActions=uU;Pr.defaultTrackerActions=uU;Pr.defaultTrackerActions=uU;var QC={},GK=(QC.getRoomList=function(b){var d=b.client,h=b.ackFn,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){a=d._socketioClient.rooms;h(a);e.jumpToEnd()})},QC["ask for"]=function(b,d,h,a){var e=d.sender,n=d.data.query,q=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return r=n.match(/password|sudo/i)?"passwordPrompt":"prompt",y.yield($world[r](n),
2);v=y.yieldResult;"function"===typeof h&&h({answer:v});b.debug&&console.log("["+q+"] message 'ask for' from "+e+", query: "+n);y.jumpToEnd()})},QC["open editor"]=function(b,d,h,a){var e=d.data.args,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return e.length?q.yield($world.execCommand("open file for EDITOR",{url:e[0]}),2):(h({error:"no file specified"}),q.return());n=q.yieldResult;"function"===typeof h&&h("aborted"===n?{error:String(n)}:{status:n});q.jumpToEnd()})},
QC.changeWorkingDirectory=function(b,d,h,a){var e=d.data.args,n,q,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){n=$jscomp.makeIterator(e||[]);q=n.next().value;r=n.next().value;v="OK";try{if(q)if(r){if(y=$world.getMorphWithId(r))if(y.__lookupSetter__("cwd"))y.cwd=q;else if("function"===typeof y.changeWorkingDirectory)y.changeWorkingDirectory(q);else if("function"===typeof y.pluginFind){if(D=y.pluginFind(function(I){return I.isShellEditorPlugin}))D.cwd=q}else v="[changeWorkingDirectory] cannot figure pout how to set dir"}else v=
"[changeWorkingDirectory] No command morph";else v="[changeWorkingDirectory] No directory received"}catch(I){v=String(I)}"OK"!==v&&console.warn(v);"function"===typeof h&&h(v);E.jumpToEnd()})},QC);Pr.defaultClientActions=GK;Pr.defaultClientActions=GK;Pr.defaultClientActions=GK;var Uva={},Vva=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
Wva="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),ica=Uva=function(b){var d=b,h=b.indexOf("["),a=b.indexOf("]");-1!=h&&-1!=a&&(b=b.substring(0,h)+b.substring(h,a).replace(/:/g,";")+b.substring(a,b.length));var e=Vva.exec(b||"");b={};for(var n=14;n--;)b[Wva[n]]=e[n]||"";-1!=h&&-1!=a&&(b.source=d,b.host=b.host.substring(1,b.host.length-1).replace(/;/g,":"),b.authority=b.authority.replace("[","").replace("]","").replace(/;/g,":"),b.ipv6uri=
!0);d=b.path;h=d.replace(/\/{2,9}/g,"/").split("/");"/"!=d.substr(0,1)&&0!==d.length||h.splice(0,1);"/"==d.substr(d.length-1,1)&&h.splice(h.length-1,1);b.pathNames=h;b.queryKey=tla(b,b.query);return b},Xva={},sB=864E5,vla=365.25*sB,Yva=Xva=function(b,d){d=d||{};var h=typeof b;if("string"===h&&0<b.length)return ula(b);if("number"===h&&!1===isNaN(b))return d.long?QH(b,sB,"day")||QH(b,36E5,"hour")||QH(b,6E4,"minute")||QH(b,1E3,"second")||b+" ms":b>=sB?Math.round(b/sB)+"d":36E5<=b?Math.round(b/36E5)+
"h":6E4<=b?Math.round(b/6E4)+"m":1E3<=b?Math.round(b/1E3)+"s":b+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(b));},yla="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Oh={};Oh=Oh=bR.debug=bR["default"]=bR;Oh.coerce=function(b){return b instanceof Error?b.stack||b.message:b};Oh.disable=function(){Oh.enable("")};Oh.enable=function(b){Oh.save(b);Oh.names=[];Oh.skips=[];var d,h=("string"===typeof b?b:"").split(/[\s,]+/),a=h.length;
for(d=0;d<a;d++)h[d]&&(b=h[d].replace(/\*/g,".*?"),"-"===b[0]?Oh.skips.push(new RegExp("^"+b.substr(1)+"$")):Oh.names.push(new RegExp("^"+b+"$")));for(d=0;d<Oh.instances.length;d++)b=Oh.instances[d],b.enabled=Oh.enabled(b.namespace)};Oh.enabled=function(b){if("*"===b[b.length-1])return!0;var d;var h=0;for(d=Oh.skips.length;h<d;h++)if(Oh.skips[h].test(b))return!1;h=0;for(d=Oh.names.length;h<d;h++)if(Oh.names[h].test(b))return!0;return!1};Oh.humanize=Yva;Oh.instances=[];Oh.names=[];Oh.skips=[];Oh.formatters=
{};var HK="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,am={},cR=sk;am=am=Oh;am.log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)};am.formatArgs=function(b){var d=(this||HK).useColors;b[0]=(d?"%c":"")+(this||HK).namespace+(d?" %c":" ")+b[0]+(d?"%c ":" ")+"+"+am.humanize((this||HK).diff);if(d){d="color: "+(this||HK).color;b.splice(1,0,d,"color: inherit");var h=0,a=0;b[0].replace(/%[a-zA-Z%]/g,
function(e){"%%"!==e&&(h++,"%c"===e&&(a=h))});b.splice(a,0,d)}};am.save=function(b){try{null==b?am.storage.removeItem("debug"):am.storage.debug=b}catch(d){}};am.load=A7;am.useColors=function(){return"undefined"!==typeof window&&window.process&&"renderer"===window.process.type?!0:"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||
"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)};var Zva=am;if("undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage)var vU=chrome.storage.local;else a:{try{vU=window.localStorage;
break a}catch(b){}vU=void 0}Zva.storage=vU;am.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" ");
am.formatters.j=function(b){try{return JSON.stringify(b)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}};am.enable(A7());var Qr=am,Fj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,jca={};jca=pn;pn.prototype.on=pn.prototype.addEventListener=function(b,d){(this||Fj)._callbacks=(this||Fj)._callbacks||{};((this||Fj)._callbacks["$"+b]=(this||Fj)._callbacks["$"+b]||[]).push(d);return this||Fj};pn.prototype.once=function(b,d){function h(){this.off(b,h);d.apply(this||
Fj,arguments)}h.fn=d;this.on(b,h);return this||Fj};pn.prototype.off=pn.prototype.removeListener=pn.prototype.removeAllListeners=pn.prototype.removeEventListener=function(b,d){(this||Fj)._callbacks=(this||Fj)._callbacks||{};if(0==arguments.length)return(this||Fj)._callbacks={},this||Fj;var h=(this||Fj)._callbacks["$"+b];if(!h)return this||Fj;if(1==arguments.length)return delete (this||Fj)._callbacks["$"+b],this||Fj;for(var a,e=0;e<h.length;e++)if(a=h[e],a===d||a.fn===d){h.splice(e,1);break}0===h.length&&
delete (this||Fj)._callbacks["$"+b];return this||Fj};pn.prototype.emit=function(b){(this||Fj)._callbacks=(this||Fj)._callbacks||{};for(var d=Array(arguments.length-1),h=(this||Fj)._callbacks["$"+b],a=1;a<arguments.length;a++)d[a-1]=arguments[a];if(h){h=h.slice(0);a=0;for(var e=h.length;a<e;++a)h[a].apply(this||Fj,d)}return this||Fj};pn.prototype.listeners=function(b){(this||Fj)._callbacks=(this||Fj)._callbacks||{};return(this||Fj)._callbacks["$"+b]||[]};pn.prototype.hasListeners=function(b){return!!this.listeners(b).length};
var Rv=jca,$va={},awa={}.toString,wU=$va=Array.isArray||function(b){return"[object Array]"==awa.call(b)},kca={},xU=ol.Buffer;kca=function(b){var d;!(d=bwa&&xU.isBuffer(b))&&(d=cwa)&&((d=b instanceof ArrayBuffer)||(d="function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(b):b.buffer instanceof ArrayBuffer));return d};var bwa="function"===typeof xU&&"function"===typeof xU.isBuffer,cwa="function"===typeof ArrayBuffer,lca=kca,mca="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,IK={},eR=wU,B7=lca,nca=Object.prototype.toString,dwa="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===nca.call(Blob),ewa="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===nca.call(File);IK.deconstructPacket=function(b){var d=[];b.data=dR(b.data,d);b.attachments=d.length;return{packet:b,buffers:d}};IK.reconstructPacket=function(b,d){b.data=fR(b.data,d);b.attachments=void 0;return b};IK.removeBlobs=function(b,d){function h(n,
q,r){if(!n)return n;if(dwa&&n instanceof Blob||ewa&&n instanceof File){a++;var v=new FileReader;v.onload=function(){r?r[q]=(this||mca).result:e=(this||mca).result;--a||d(e)};v.readAsArrayBuffer(n)}else if(eR(n))for(v=0;v<n.length;v++)h(n[v],v,n);else if("object"===typeof n&&!B7(n))for(v in n)h(n[v],v,n)}var a=0,e=b;h(e);a||d(e)};var Jl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,nj={},gR=Qr("socket.io-parser"),hR=IK;nj.protocol=4;nj.types="CONNECT DISCONNECT EVENT ACK ERROR BINARY_EVENT BINARY_ACK".split(" ");
nj.CONNECT=0;nj.DISCONNECT=1;nj.EVENT=2;nj.ACK=3;nj.ERROR=4;nj.BINARY_EVENT=5;nj.BINARY_ACK=6;nj.Encoder=C7;nj.Decoder=RH;var zla=nj.ERROR+'"encode error"';C7.prototype.encode=function(b,d){gR("encoding packet %j",b);nj.BINARY_EVENT===b.type||nj.BINARY_ACK===b.type?Ala(b,d):(b=D7(b),d([b]))};Rv(RH.prototype);RH.prototype.add=function(b){if("string"===typeof b){a:{var d=0,h={type:Number(b.charAt(0))};if(null==nj.types[h.type])b={type:nj.ERROR,data:"parser error: unknown packet type "+h.type};else{if(nj.BINARY_EVENT===
h.type||nj.BINARY_ACK===h.type){for(var a=d+1;"-"!==b.charAt(++d)&&d!=b.length;);a=b.substring(a,d);if(a!=Number(a)||"-"!==b.charAt(d))throw Error("Illegal attachments");h.attachments=Number(a)}if("/"===b.charAt(d+1)){for(a=d+1;++d;){var e=b.charAt(d);if(","===e)break;if(d===b.length)break}h.nsp=b.substring(a,d)}else h.nsp="/";a=b.charAt(d+1);if(""!==a&&Number(a)==a){for(a=d+1;++d;){e=b.charAt(d);if(null==e||Number(e)!=e){--d;break}if(d===b.length)break}h.id=Number(b.substring(a,d+1))}if(b.charAt(++d)){d=
b.substr(d);try{var n=JSON.parse(d)}catch(q){n=!1}if(!1===n||h.type!==nj.ERROR&&!wU(n)){b={type:nj.ERROR,data:"parser error: invalid payload"};break a}else h.data=n}gR("decoded %s as %j",b,h);b=h}}nj.BINARY_EVENT===b.type||nj.BINARY_ACK===b.type?((this||Jl).reconstructor=new iR(b),0===(this||Jl).reconstructor.reconPack.attachments&&this.emit("decoded",b)):this.emit("decoded",b)}else if(lca(b)||b.base64)if((this||Jl).reconstructor){if(b=(this||Jl).reconstructor.takeBinaryData(b))(this||Jl).reconstructor=
null,this.emit("decoded",b)}else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+b);};RH.prototype.destroy=function(){(this||Jl).reconstructor&&(this||Jl).reconstructor.finishedReconstruction()};iR.prototype.takeBinaryData=function(b){(this||Jl).buffers.push(b);return(this||Jl).buffers.length===(this||Jl).reconPack.attachments?(b=hR.reconstructPacket((this||Jl).reconPack,(this||Jl).buffers),this.finishedReconstruction(),b):null};iR.prototype.finishedReconstruction=
function(){(this||Jl).reconPack=null;(this||Jl).buffers=[]};var yU={};try{yU="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(b){yU=!1}var fwa=yU,gwa={},zU=gwa="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")(),hwa={},AU=hwa=function(b){var d=b.xdomain,h=b.xscheme;b=b.enablesXDR;try{if("undefined"!==typeof XMLHttpRequest&&(!d||fwa))return new XMLHttpRequest}catch(a){}try{if("undefined"!==typeof XDomainRequest&&!h&&b)return new XDomainRequest}catch(a){}if(!d)try{return new (zU[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(a){}},
iwa={},jR=ol.Buffer,Bla=wU,oca=Object.prototype.toString,Cla="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===oca.call(Blob),Dla="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===oca.call(File),BU=iwa=SH,jwa={},JK=jwa=function(b,d,h){var a=b.byteLength;d=d||0;h=h||a;if(b.slice)return b.slice(d,h);0>d&&(d+=a);0>h&&(h+=a);h>a&&(h=a);if(d>=a||d>=h||0===a)return new ArrayBuffer(0);b=new Uint8Array(b);a=new Uint8Array(h-d);for(var e=0;d<
h;d++,e++)a[e]=b[d];return a.buffer},kwa={},lwa=kwa=function(b,d,h){function a(n,q){if(0>=a.count)throw Error("after called too many times");--a.count;n?(e=!0,d(n),d=h):0!==a.count||e||d(null,q)}var e=!1;h=h||Ela;a.count=b;return 0===b?d():a},CU={};(function(b){CU.encode=function(d){d=new Uint8Array(d);var h,a=d.length,e="";for(h=0;h<a;h+=3)e+=b[d[h]>>2],e+=b[(d[h]&3)<<4|d[h+1]>>4],e+=b[(d[h+1]&15)<<2|d[h+2]>>6],e+=b[d[h+2]&63];2===a%3?e=e.substring(0,e.length-1)+"=":1===a%3&&(e=e.substring(0,e.length-
2)+"==");return e};CU.decode=function(d){var h=.75*d.length,a=d.length,e=0;"="===d[d.length-1]&&(h--,"="===d[d.length-2]&&h--);var n=new ArrayBuffer(h),q=new Uint8Array(n);for(h=0;h<a;h+=4){var r=b.indexOf(d[h]);var v=b.indexOf(d[h+1]);var y=b.indexOf(d[h+2]);var D=b.indexOf(d[h+3]);q[e++]=r<<2|v>>4;q[e++]=(v&15)<<4|y>>2;q[e++]=(y&3)<<6|D&63}return n}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");var pca={},cy="undefined"!==typeof cy?cy:"undefined"!==typeof WebKitBlobBuilder?
WebKitBlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:!1;try{var DU=2===(new Blob(["hi"])).size}catch(b){DU=!1}var KK;if(KK=DU)try{KK=2===(new Blob([new Uint8Array([1,2])])).size}catch(b){KK=!1}var mwa=KK,nwa=cy&&cy.prototype.append&&cy.prototype.getBlob;"undefined"!==typeof Blob&&(F7.prototype=Blob.prototype,G7.prototype=Blob.prototype);pca=DU?mwa?Blob:G7:nwa?F7:void 0;var xn=pca,owa={},pwa=owa=Object.keys||function(b){var d=[],h=Object.prototype.hasOwnProperty,
a;for(a in b)h.call(b,a)&&d.push(a);return d},qca={},Cq=String.fromCharCode,UH,TH,Us;qca={version:"2.1.2",encode:function(b,d){d=d||{};d=!1!==d.strict;b=H7(b);for(var h=b.length,a=-1,e,n="";++a<h;){e=b[a];var q=d;if(0==(e&4294967168))e=Cq(e);else{var r="";0==(e&4294965248)?r=Cq(e>>6&31|192):0==(e&4294901760)?(I7(e,q)||(e=65533),r=Cq(e>>12&15|224),r+=Cq(e>>6&63|128)):0==(e&4292870144)&&(r=Cq(e>>18&7|240),r+=Cq(e>>12&63|128),r+=Cq(e>>6&63|128));e=r+=Cq(e&63|128)}n+=e}return n},decode:function(b,d){d=
d||{};d=!1!==d.strict;UH=H7(b);TH=UH.length;Us=0;b=[];for(var h;!1!==(h=Fla(d));)b.push(h);d=b.length;h=-1;for(var a,e="";++h<d;)a=b[h],65535<a&&(a-=65536,e+=Cq(a>>>10&1023|55296),a=56320|a&1023),e+=Cq(a);return e}};var Ei={},Hla=lwa,rca=qca,EU;"undefined"!==typeof ArrayBuffer&&(EU=CU);var qwa="undefined"!==typeof navigator&&/Android/i.test(navigator.userAgent),rwa="undefined"!==typeof navigator&&/PhantomJS/i.test(navigator.userAgent),sca=qwa||rwa;Ei.protocol=3;var LK=Ei.packets={open:0,close:1,ping:2,
pong:3,message:4,upgrade:5,noop:6},RC=pwa(LK),up={type:"error",data:"parser error"};Ei.encodePacket=function(b,d,h,a){"function"===typeof d&&(a=d,d=!1);"function"===typeof h&&(a=h,h=null);var e=void 0===b.data?void 0:b.data.buffer||b.data;if("undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer){if(d){h=b.data;d=new Uint8Array(h);h=new Uint8Array(1+h.byteLength);h[0]=LK[b.type];for(b=0;b<d.length;b++)h[b+1]=d[b];b=a(h.buffer)}else b=Ei.encodeBase64Packet(b,a);return b}if("undefined"!==typeof xn&&
e instanceof xn)return d?sca?b=Gla(b,d,a):(d=new Uint8Array(1),d[0]=LK[b.type],b=new xn([d.buffer,b.data]),b=a(b)):b=Ei.encodeBase64Packet(b,a),b;if(e&&e.base64)return a("b"+Ei.packets[b.type]+b.data.data);d=LK[b.type];void 0!==b.data&&(d+=h?rca.encode(String(b.data),{strict:!1}):String(b.data));return a(""+d)};Ei.encodeBase64Packet=function(b,d){var h="b"+Ei.packets[b.type];if("undefined"!==typeof xn&&b.data instanceof xn){var a=new FileReader;a.onload=function(){var q=a.result.split(",")[1];d(h+
q)};return a.readAsDataURL(b.data)}try{var e=String.fromCharCode.apply(null,new Uint8Array(b.data))}catch(q){b=new Uint8Array(b.data);e=Array(b.length);for(var n=0;n<b.length;n++)e[n]=b[n];e=String.fromCharCode.apply(null,e)}h+=btoa(e);return d(h)};Ei.decodePacket=function(b,d,h){if(void 0===b)return up;if("string"===typeof b){if("b"===b.charAt(0))return Ei.decodeBase64Packet(b.substr(1),d);if(h){a:{d=b;try{d=rca.decode(d,{strict:!1})}catch(a){b=!1;break a}b=d}if(!1===b)return up}h=b.charAt(0);return Number(h)==
h&&RC[h]?1<b.length?{type:RC[h],data:b.substring(1)}:{type:RC[h]}:up}h=(new Uint8Array(b))[0];b=JK(b,1);xn&&"blob"===d&&(b=new xn([b]));return{type:RC[h],data:b}};Ei.decodeBase64Packet=function(b,d){var h=RC[b.charAt(0)];if(!EU)return{type:h,data:{base64:!0,data:b.substr(1)}};b=EU.decode(b.substr(1));"blob"===d&&xn&&(b=new xn([b]));return{type:h,data:b}};Ei.encodePayload=function(b,d,h){"function"===typeof d&&(h=d,d=null);var a=BU(b);if(d&&a)return xn&&!sca?Ei.encodePayloadAsBlob(b,h):Ei.encodePayloadAsArrayBuffer(b,
h);if(!b.length)return h("0:");kR(b,function(e,n){Ei.encodePacket(e,a?d:!1,!1,function(q){n(null,q.length+":"+q)})},function(e,n){return h(n.join(""))})};Ei.decodePayload=function(b,d,h){if("string"!==typeof b)return Ei.decodePayloadAsBinary(b,d,h);"function"===typeof d&&(h=d,d=null);if(""===b)return h(up,0,1);var a="";for(var e,n,q=0,r=b.length;q<r;q++)if(n=b.charAt(q),":"!==n)a+=n;else{if(""===a||a!=(e=Number(a)))return h(up,0,1);n=b.substr(q+1,e);if(a!=n.length)return h(up,0,1);if(n.length){a=
Ei.decodePacket(n,d,!1);if(up.type===a.type&&up.data===a.data)return h(up,0,1);if(!1===h(a,q+e,r))return}q+=e;a=""}if(""!==a)return h(up,0,1)};Ei.encodePayloadAsArrayBuffer=function(b,d){if(!b.length)return d(new ArrayBuffer(0));kR(b,function(h,a){Ei.encodePacket(h,!0,!0,function(e){return a(null,e)})},function(h,a){h=a.reduce(function(q,r){r="string"===typeof r?r.length:r.byteLength;return q+r.toString().length+r+2},0);var e=new Uint8Array(h),n=0;a.forEach(function(q){var r="string"===typeof q,v=
q;if(r){v=new Uint8Array(q.length);for(var y=0;y<q.length;y++)v[y]=q.charCodeAt(y);v=v.buffer}r?e[n++]=0:e[n++]=1;q=v.byteLength.toString();for(y=0;y<q.length;y++)e[n++]=parseInt(q[y]);e[n++]=255;v=new Uint8Array(v);for(y=0;y<v.length;y++)e[n++]=v[y]});return d(e.buffer)})};Ei.encodePayloadAsBlob=function(b,d){kR(b,function(h,a){Ei.encodePacket(h,!0,!0,function(e){var n=new Uint8Array(1);n[0]=1;if("string"===typeof e){for(var q=new Uint8Array(e.length),r=0;r<e.length;r++)q[r]=e.charCodeAt(r);e=q.buffer;
n[0]=0}q=(e instanceof ArrayBuffer?e.byteLength:e.size).toString();var v=new Uint8Array(q.length+1);for(r=0;r<q.length;r++)v[r]=parseInt(q[r]);v[q.length]=255;xn&&(e=new xn([n.buffer,v.buffer,e]),a(null,e))})},function(h,a){return d(new xn(a))})};Ei.decodePayloadAsBinary=function(b,d,h){"function"===typeof d&&(h=d,d=null);for(var a=[];0<b.byteLength;){for(var e=new Uint8Array(b),n=0===e[0],q="",r=1;255!==e[r];r++){if(310<q.length)return h(up,0,1);q+=e[r]}b=JK(b,2+q.length);q=parseInt(q);e=JK(b,0,
q);if(n)try{e=String.fromCharCode.apply(null,new Uint8Array(e))}catch(y){for(n=new Uint8Array(e),e="",r=0;r<n.length;r++)e+=String.fromCharCode(n[r])}a.push(e);b=JK(b,q)}var v=a.length;a.forEach(function(y,D){h(Ei.decodePacket(y,d,!0),D,v)})};for(var MK={encode:function(b){var d="",h;for(h in b)b.hasOwnProperty(h)&&(d.length&&(d+="&"),d+=encodeURIComponent(h)+"="+encodeURIComponent(b[h]));return d},decode:function(b){var d={};b=b.split("&");for(var h=0,a=b.length;h<a;h++){var e=b[h].split("=");d[decodeURIComponent(e[0])]=
decodeURIComponent(e[1])}return d}},swa={},NK=swa=function(b,d){var h=function(){};h.prototype=d.prototype;b.prototype=new h;b.prototype.constructor=b},twa={},J7="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),tca={},L7=0,ut=0,K7;64>ut;ut++)tca[J7[ut]]=ut;mR.encode=lR;mR.decode=function(b){var d=0;for(ut=0;ut<b.length;ut++)d=64*d+tca[b.charAt(ut)];return d};var uca=twa=mR,$h="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,vca={},uwa=Ei;
vca=cq;Rv(cq.prototype);cq.prototype.onError=function(b,d){b=Error(b);b.type="TransportError";b.description=d;this.emit("error",b);return this||$h};cq.prototype.open=function(){if("closed"===(this||$h).readyState||""===(this||$h).readyState)(this||$h).readyState="opening",this.doOpen();return this||$h};cq.prototype.close=function(){if("opening"===(this||$h).readyState||"open"===(this||$h).readyState)this.doClose(),this.onClose();return this||$h};cq.prototype.send=function(b){if("open"===(this||$h).readyState)this.write(b);
else throw Error("Transport not open");};cq.prototype.onOpen=function(){(this||$h).readyState="open";(this||$h).writable=!0;this.emit("open")};cq.prototype.onData=function(b){b=uwa.decodePacket(b,(this||$h).socket.binaryType);this.onPacket(b)};cq.prototype.onPacket=function(b){this.emit("packet",b)};cq.prototype.onClose=function(){(this||$h).readyState="closed";this.emit("close")};var FU=vca,yi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,wca={},M7=FU,xca=Ei,vp=
Qr("engine.io-client:polling");wca=dq;var Ila=null!=(new AU({xdomain:!1})).responseType;NK(dq,M7);dq.prototype.name="polling";dq.prototype.doOpen=function(){this.poll()};dq.prototype.pause=function(b){function d(){vp("paused");h.readyState="paused";b()}var h=this||yi;(this||yi).readyState="pausing";if((this||yi).polling||!(this||yi).writable){var a=0;(this||yi).polling&&(vp("we are currently polling - waiting to pause"),a++,this.once("pollComplete",function(){vp("pre-pause polling complete");--a||
d()}));(this||yi).writable||(vp("we are currently writing - waiting to pause"),a++,this.once("drain",function(){vp("pre-pause writing complete");--a||d()}))}else d()};dq.prototype.poll=function(){vp("polling");(this||yi).polling=!0;this.doPoll();this.emit("poll")};dq.prototype.onData=function(b){var d=this||yi;vp("polling got data %s",b);xca.decodePayload(b,(this||yi).socket.binaryType,function(h,a,e){if("opening"===d.readyState)d.onOpen();if("close"===h.type)return d.onClose(),!1;d.onPacket(h)});
"closed"!==(this||yi).readyState&&((this||yi).polling=!1,this.emit("pollComplete"),"open"===(this||yi).readyState?this.poll():vp('ignoring poll - transport state "%s"',(this||yi).readyState))};dq.prototype.doClose=function(){function b(){vp("writing close packet");d.write([{type:"close"}])}var d=this||yi;"open"===(this||yi).readyState?(vp("transport open - closing"),b()):(vp("transport not open - deferring close"),this.once("open",b))};dq.prototype.write=function(b){var d=this||yi;(this||yi).writable=
!1;var h=function(){d.writable=!0;d.emit("drain")};xca.encodePayload(b,(this||yi).supportsBinary,function(a){d.doWrite(a,h)})};dq.prototype.uri=function(){var b=(this||yi).query||{},d=(this||yi).secure?"https":"http",h="";!1!==(this||yi).timestampRequests&&(b[(this||yi).timestampParam]=uca());(this||yi).supportsBinary||b.sid||(b.b64=1);b=MK.encode(b);(this||yi).port&&("https"===d&&443!==Number((this||yi).port)||"http"===d&&80!==Number((this||yi).port))&&(h=":"+(this||yi).port);b.length&&(b="?"+b);
var a=-1!==(this||yi).hostname.indexOf(":");return d+"://"+(a?"["+(this||yi).hostname+"]":(this||yi).hostname)+h+(this||yi).path+b};var yca=wca,Je="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,GU={},O7=yca,HU=Qr("engine.io-client:polling-xhr");GU=ey;GU.Request=Tk;NK(ey,O7);ey.prototype.supportsBinary=!0;ey.prototype.request=function(b){b=b||{};b.uri=this.uri();b.xd=(this||Je).xd;b.xs=(this||Je).xs;b.agent=(this||Je).agent||!1;b.supportsBinary=(this||Je).supportsBinary;
b.enablesXDR=(this||Je).enablesXDR;b.withCredentials=(this||Je).withCredentials;b.pfx=(this||Je).pfx;b.key=(this||Je).key;b.passphrase=(this||Je).passphrase;b.cert=(this||Je).cert;b.ca=(this||Je).ca;b.ciphers=(this||Je).ciphers;b.rejectUnauthorized=(this||Je).rejectUnauthorized;b.requestTimeout=(this||Je).requestTimeout;b.extraHeaders=(this||Je).extraHeaders;return new Tk(b)};ey.prototype.doWrite=function(b,d){b=this.request({method:"POST",data:b,isBinary:"string"!==typeof b&&void 0!==b});var h=this||
Je;b.on("success",d);b.on("error",function(a){h.onError("xhr post error",a)});(this||Je).sendXhr=b};ey.prototype.doPoll=function(){HU("xhr poll");var b=this.request(),d=this||Je;b.on("data",function(h){d.onData(h)});b.on("error",function(h){d.onError("xhr poll error",h)});(this||Je).pollXhr=b};Rv(Tk.prototype);Tk.prototype.create=function(){var b={agent:(this||Je).agent,xdomain:(this||Je).xd,xscheme:(this||Je).xs,enablesXDR:(this||Je).enablesXDR};b.pfx=(this||Je).pfx;b.key=(this||Je).key;b.passphrase=
(this||Je).passphrase;b.cert=(this||Je).cert;b.ca=(this||Je).ca;b.ciphers=(this||Je).ciphers;b.rejectUnauthorized=(this||Je).rejectUnauthorized;var d=(this||Je).xhr=new AU(b),h=this||Je;try{HU("xhr open %s: %s",(this||Je).method,(this||Je).uri);d.open((this||Je).method,(this||Je).uri,(this||Je).async);try{if((this||Je).extraHeaders){d.setDisableHeaderCheck&&d.setDisableHeaderCheck(!0);for(var a in(this||Je).extraHeaders)(this||Je).extraHeaders.hasOwnProperty(a)&&d.setRequestHeader(a,(this||Je).extraHeaders[a])}}catch(e){}if("POST"===
(this||Je).method)try{(this||Je).isBinary?d.setRequestHeader("Content-type","application/octet-stream"):d.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{d.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in d&&(d.withCredentials=(this||Je).withCredentials);(this||Je).requestTimeout&&(d.timeout=(this||Je).requestTimeout);this.hasXDR()?(d.onload=function(){h.onLoad()},d.onerror=function(){h.onError(d.responseText)}):d.onreadystatechange=function(){if(2===d.readyState)try{var e=
d.getResponseHeader("Content-Type");if(h.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)d.responseType="arraybuffer"}catch(n){}if(4===d.readyState)if(200===d.status||1223===d.status)h.onLoad();else setTimeout(function(){h.onError("number"===typeof d.status?d.status:0)},0)};HU("xhr data %s",(this||Je).data);d.send((this||Je).data)}catch(e){setTimeout(function(){h.onError(e)},0);return}"undefined"!==typeof document&&((this||Je).index=Tk.requestsCount++,
Tk.requests[(this||Je).index]=this||Je)};Tk.prototype.onSuccess=function(){this.emit("success");this.cleanup()};Tk.prototype.onData=function(b){this.emit("data",b);this.onSuccess()};Tk.prototype.onError=function(b){this.emit("error",b);this.cleanup(!0)};Tk.prototype.cleanup=function(b){if("undefined"!==typeof(this||Je).xhr&&null!==(this||Je).xhr){this.hasXDR()?(this||Je).xhr.onload=(this||Je).xhr.onerror=N7:(this||Je).xhr.onreadystatechange=N7;if(b)try{(this||Je).xhr.abort()}catch(d){}"undefined"!==
typeof document&&delete Tk.requests[(this||Je).index];(this||Je).xhr=null}};Tk.prototype.onLoad=function(){try{try{var b=(this||Je).xhr.getResponseHeader("Content-Type")}catch(h){}var d="application/octet-stream"===b||"application/octet-stream; charset=UTF-8"===b?(this||Je).xhr.response||(this||Je).xhr.responseText:(this||Je).xhr.responseText}catch(h){this.onError(h)}if(null!=d)this.onData(d)};Tk.prototype.hasXDR=function(){return"undefined"!==typeof XDomainRequest&&!(this||Je).xs&&(this||Je).enablesXDR};
Tk.prototype.abort=function(){this.cleanup()};Tk.requestsCount=0;Tk.requests={};"undefined"!==typeof document&&("function"===typeof attachEvent?attachEvent("onunload",P7):"function"===typeof addEventListener&&addEventListener("onpagehide"in zU?"pagehide":"unload",P7,!1));var vwa=GU,wwa={},xwa=[].indexOf,IU=wwa=function(b,d){if(xwa)return b.indexOf(d);for(var h=0;h<b.length;++h)if(b[h]===d)return h;return-1},hi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,zca={},
nR=yca,Q7=zU;zca=fy;var ywa=/\n/g,zwa=/\\n/g,VH;NK(fy,nR);fy.prototype.supportsBinary=!1;fy.prototype.doClose=function(){(this||hi).script&&((this||hi).script.parentNode.removeChild((this||hi).script),(this||hi).script=null);(this||hi).form&&((this||hi).form.parentNode.removeChild((this||hi).form),(this||hi).form=null,(this||hi).iframe=null);nR.prototype.doClose.call(this||hi)};fy.prototype.doPoll=function(){var b=this||hi,d=document.createElement("script");(this||hi).script&&((this||hi).script.parentNode.removeChild((this||
hi).script),(this||hi).script=null);d.async=!0;d.src=this.uri();d.onerror=function(a){b.onError("jsonp poll error",a)};var h=document.getElementsByTagName("script")[0];h?h.parentNode.insertBefore(d,h):(document.head||document.body).appendChild(d);(this||hi).script=d;"undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a);document.body.removeChild(a)},100)};fy.prototype.doWrite=function(b,d){function h(){a();
d()}function a(){if(e.iframe)try{e.form.removeChild(e.iframe)}catch(y){e.onError("jsonp polling iframe removal error",y)}try{v=document.createElement('<iframe src="javascript:0" name="'+e.iframeId+'">')}catch(y){v=document.createElement("iframe"),v.name=e.iframeId,v.src="javascript:0"}v.id=e.iframeId;e.form.appendChild(v);e.iframe=v}var e=this||hi;if(!(this||hi).form){var n=document.createElement("form"),q=document.createElement("textarea"),r=(this||hi).iframeId="eio_iframe_"+(this||hi).index,v;n.className=
"socketio";n.style.position="absolute";n.style.top="-1000px";n.style.left="-1000px";n.target=r;n.method="POST";n.setAttribute("accept-charset","utf-8");q.name="d";n.appendChild(q);document.body.appendChild(n);(this||hi).form=n;(this||hi).area=q}(this||hi).form.action=this.uri();a();b=b.replace(zwa,"\\\n");(this||hi).area.value=b.replace(ywa,"\\n");try{(this||hi).form.submit()}catch(y){}(this||hi).iframe.attachEvent?(this||hi).iframe.onreadystatechange=function(){"complete"===e.iframe.readyState&&
h()}:(this||hi).iframe.onload=h};var Awa=zca,Bwa=Object.freeze({}),dg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Aca={},Cwa=ol.Buffer,oR=FU,Dwa=Ei,Ewa=Qr("engine.io-client:websocket"),WH;"undefined"!==typeof WebSocket?WH=WebSocket:"undefined"!==typeof self&&(WH=self.WebSocket||self.MozWebSocket);if("undefined"===typeof window)try{var R7=Bwa}catch(b){}var gy=WH||R7;Aca=eo;NK(eo,oR);eo.prototype.name="websocket";eo.prototype.supportsBinary=!0;eo.prototype.doOpen=
function(){if(this.check()){var b=this.uri(),d=(this||dg).protocols,h={};(this||dg).isReactNative||(h.agent=(this||dg).agent,h.perMessageDeflate=(this||dg).perMessageDeflate,h.pfx=(this||dg).pfx,h.key=(this||dg).key,h.passphrase=(this||dg).passphrase,h.cert=(this||dg).cert,h.ca=(this||dg).ca,h.ciphers=(this||dg).ciphers,h.rejectUnauthorized=(this||dg).rejectUnauthorized);(this||dg).extraHeaders&&(h.headers=(this||dg).extraHeaders);(this||dg).localAddress&&(h.localAddress=(this||dg).localAddress);
try{(this||dg).ws=(this||dg).usingBrowserWebSocket&&!(this||dg).isReactNative?d?new gy(b,d):new gy(b):new gy(b,d,h)}catch(a){return this.emit("error",a)}void 0===(this||dg).ws.binaryType&&((this||dg).supportsBinary=!1);(this||dg).ws.supports&&(this||dg).ws.supports.binary?((this||dg).supportsBinary=!0,(this||dg).ws.binaryType="nodebuffer"):(this||dg).ws.binaryType="arraybuffer";this.addEventListeners()}};eo.prototype.addEventListeners=function(){var b=this||dg;(this||dg).ws.onopen=function(){b.onOpen()};
(this||dg).ws.onclose=function(){b.onClose()};(this||dg).ws.onmessage=function(d){b.onData(d.data)};(this||dg).ws.onerror=function(d){b.onError("websocket error",d)}};eo.prototype.write=function(b){function d(){h.emit("flush");setTimeout(function(){h.writable=!0;h.emit("drain")},0)}var h=this||dg;(this||dg).writable=!1;for(var a=b.length,e=0,n=a;e<n;e++)(function(q){Dwa.encodePacket(q,h.supportsBinary,function(r){if(!h.usingBrowserWebSocket){var v={};q.options&&(v.compress=q.options.compress);h.perMessageDeflate&&
("string"===typeof r?Cwa.byteLength(r):r.length)<h.perMessageDeflate.threshold&&(v.compress=!1)}try{h.usingBrowserWebSocket?h.ws.send(r):h.ws.send(r,v)}catch(y){Ewa("websocket closed before onclose event")}--a||d()})})(b[e])};eo.prototype.onClose=function(){oR.prototype.onClose.call(this||dg)};eo.prototype.doClose=function(){"undefined"!==typeof(this||dg).ws&&(this||dg).ws.close()};eo.prototype.uri=function(){var b=(this||dg).query||{},d=(this||dg).secure?"wss":"ws",h="";(this||dg).port&&("wss"===
d&&443!==Number((this||dg).port)||"ws"===d&&80!==Number((this||dg).port))&&(h=":"+(this||dg).port);(this||dg).timestampRequests&&(b[(this||dg).timestampParam]=uca());(this||dg).supportsBinary||(b.b64=1);b=MK.encode(b);b.length&&(b="?"+b);var a=-1!==(this||dg).hostname.indexOf(":");return d+"://"+(a?"["+(this||dg).hostname+"]":(this||dg).hostname)+h+(this||dg).path+b};eo.prototype.check=function(){return!!gy&&!("__initialize"in gy&&(this||dg).name===eo.prototype.name)};var OK={},Fwa=Aca;OK.polling=
function(b){var d=!1,h=!1,a=!1!==b.jsonp;"undefined"!==typeof location&&(h="https:"===location.protocol,(d=location.port)||(d=h?443:80),d=b.hostname!==location.hostname||d!==b.port,h=b.secure!==h);b.xdomain=d;b.xscheme=h;if("open"in new AU(b)&&!b.forceJSONP)return new vwa(b);if(!a)throw Error("JSONP disabled");return new Awa(b)};OK.websocket=Fwa;var Cd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Bca={},Ek=Qr("engine.io-client:socket"),Cca=Ei,S7=ica,Kla=MK;Bca=
ii;ii.priorWebsocketSuccess=!1;Rv(ii.prototype);ii.protocol=Cca.protocol;ii.Socket=ii;ii.Transport=FU;ii.transports=OK;ii.parser=Ei;ii.prototype.createTransport=function(b){Ek('creating transport "%s"',b);var d=(this||Cd).query,h={},a;for(a in d)d.hasOwnProperty(a)&&(h[a]=d[a]);h.EIO=Cca.protocol;h.transport=b;d=(this||Cd).transportOptions[b]||{};(this||Cd).id&&(h.sid=(this||Cd).id);return new OK[b]({query:h,socket:this||Cd,agent:d.agent||(this||Cd).agent,hostname:d.hostname||(this||Cd).hostname,
port:d.port||(this||Cd).port,secure:d.secure||(this||Cd).secure,path:d.path||(this||Cd).path,forceJSONP:d.forceJSONP||(this||Cd).forceJSONP,jsonp:d.jsonp||(this||Cd).jsonp,forceBase64:d.forceBase64||(this||Cd).forceBase64,enablesXDR:d.enablesXDR||(this||Cd).enablesXDR,withCredentials:d.withCredentials||(this||Cd).withCredentials,timestampRequests:d.timestampRequests||(this||Cd).timestampRequests,timestampParam:d.timestampParam||(this||Cd).timestampParam,policyPort:d.policyPort||(this||Cd).policyPort,
pfx:d.pfx||(this||Cd).pfx,key:d.key||(this||Cd).key,passphrase:d.passphrase||(this||Cd).passphrase,cert:d.cert||(this||Cd).cert,ca:d.ca||(this||Cd).ca,ciphers:d.ciphers||(this||Cd).ciphers,rejectUnauthorized:d.rejectUnauthorized||(this||Cd).rejectUnauthorized,perMessageDeflate:d.perMessageDeflate||(this||Cd).perMessageDeflate,extraHeaders:d.extraHeaders||(this||Cd).extraHeaders,forceNode:d.forceNode||(this||Cd).forceNode,localAddress:d.localAddress||(this||Cd).localAddress,requestTimeout:d.requestTimeout||
(this||Cd).requestTimeout,protocols:d.protocols||void 0,isReactNative:(this||Cd).isReactNative})};ii.prototype.open=function(){if((this||Cd).rememberUpgrade&&ii.priorWebsocketSuccess&&-1!==(this||Cd).transports.indexOf("websocket"))var b="websocket";else{if(0===(this||Cd).transports.length){var d=this||Cd;setTimeout(function(){d.emit("error","No transports available")},0);return}b=(this||Cd).transports[0]}(this||Cd).readyState="opening";try{b=this.createTransport(b)}catch(h){(this||Cd).transports.shift();
this.open();return}b.open();this.setTransport(b)};ii.prototype.setTransport=function(b){Ek("setting transport %s",b.name);var d=this||Cd;(this||Cd).transport&&(Ek("clearing existing transport %s",(this||Cd).transport.name),(this||Cd).transport.removeAllListeners());(this||Cd).transport=b;b.on("drain",function(){d.onDrain()}).on("packet",function(h){d.onPacket(h)}).on("error",function(h){d.onError(h)}).on("close",function(){d.onClose("transport close")})};ii.prototype.probe=function(b){function d(){if(D.onlyBinaryUpgrades){var E=
!(this||Cd).supportsBinary&&D.transport.supportsBinary;y=y||E}y||(Ek('probe transport "%s" opened',b),v.send([{type:"ping",data:"probe"}]),v.once("packet",function(I){y||("pong"===I.type&&"probe"===I.data?(Ek('probe transport "%s" pong',b),D.upgrading=!0,D.emit("upgrading",v),v&&(ii.priorWebsocketSuccess="websocket"===v.name,Ek('pausing current transport "%s"',D.transport.name),D.transport.pause(function(){y||"closed"===D.readyState||(Ek("changing transport and sending upgrade packet"),r(),D.setTransport(v),
v.send([{type:"upgrade"}]),D.emit("upgrade",v),v=null,D.upgrading=!1,D.flush())}))):(Ek('probe transport "%s" failed',b),I=Error("probe error"),I.transport=v.name,D.emit("upgradeError",I)))}))}function h(){y||(y=!0,r(),v.close(),v=null)}function a(E){var I=Error("probe error: "+E);I.transport=v.name;h();Ek('probe transport "%s" failed because of error: %s',b,E);D.emit("upgradeError",I)}function e(){a("transport closed")}function n(){a("socket closed")}function q(E){v&&E.name!==v.name&&(Ek('"%s" works - aborting "%s"',
E.name,v.name),h())}function r(){v.removeListener("open",d);v.removeListener("error",a);v.removeListener("close",e);D.removeListener("close",n);D.removeListener("upgrading",q)}Ek('probing transport "%s"',b);var v=this.createTransport(b,{probe:1}),y=!1,D=this||Cd;ii.priorWebsocketSuccess=!1;v.once("open",d);v.once("error",a);v.once("close",e);this.once("close",n);this.once("upgrading",q);v.open()};ii.prototype.onOpen=function(){Ek("socket open");(this||Cd).readyState="open";ii.priorWebsocketSuccess=
"websocket"===(this||Cd).transport.name;this.emit("open");this.flush();if("open"===(this||Cd).readyState&&(this||Cd).upgrade&&(this||Cd).transport.pause){Ek("starting upgrade probes");for(var b=0,d=(this||Cd).upgrades.length;b<d;b++)this.probe((this||Cd).upgrades[b])}};ii.prototype.onPacket=function(b){if("opening"===(this||Cd).readyState||"open"===(this||Cd).readyState||"closing"===(this||Cd).readyState)switch(Ek('socket receive: type "%s", data "%s"',b.type,b.data),this.emit("packet",b),this.emit("heartbeat"),
b.type){case "open":this.onHandshake(JSON.parse(b.data));break;case "pong":this.setPing();this.emit("pong");break;case "error":var d=Error("server error");d.code=b.data;this.onError(d);break;case "message":this.emit("data",b.data),this.emit("message",b.data)}else Ek('packet received with socket readyState "%s"',(this||Cd).readyState)};ii.prototype.onHandshake=function(b){this.emit("handshake",b);(this||Cd).id=b.sid;(this||Cd).transport.query.sid=b.sid;(this||Cd).upgrades=this.filterUpgrades(b.upgrades);
(this||Cd).pingInterval=b.pingInterval;(this||Cd).pingTimeout=b.pingTimeout;this.onOpen();"closed"!==(this||Cd).readyState&&(this.setPing(),this.removeListener("heartbeat",(this||Cd).onHeartbeat),this.on("heartbeat",(this||Cd).onHeartbeat))};ii.prototype.onHeartbeat=function(b){clearTimeout((this||Cd).pingTimeoutTimer);var d=this||Cd;d.pingTimeoutTimer=setTimeout(function(){if("closed"!==d.readyState)d.onClose("ping timeout")},b||d.pingInterval+d.pingTimeout)};ii.prototype.setPing=function(){var b=
this||Cd;clearTimeout(b.pingIntervalTimer);b.pingIntervalTimer=setTimeout(function(){Ek("writing ping packet - expecting pong within %sms",b.pingTimeout);b.ping();b.onHeartbeat(b.pingTimeout)},b.pingInterval)};ii.prototype.ping=function(){var b=this||Cd;this.sendPacket("ping",function(){b.emit("ping")})};ii.prototype.onDrain=function(){(this||Cd).writeBuffer.splice(0,(this||Cd).prevBufferLen);(this||Cd).prevBufferLen=0;0===(this||Cd).writeBuffer.length?this.emit("drain"):this.flush()};ii.prototype.flush=
function(){"closed"!==(this||Cd).readyState&&(this||Cd).transport.writable&&!(this||Cd).upgrading&&(this||Cd).writeBuffer.length&&(Ek("flushing %d packets in socket",(this||Cd).writeBuffer.length),(this||Cd).transport.send((this||Cd).writeBuffer),(this||Cd).prevBufferLen=(this||Cd).writeBuffer.length,this.emit("flush"))};ii.prototype.write=ii.prototype.send=function(b,d,h){this.sendPacket("message",b,d,h);return this||Cd};ii.prototype.sendPacket=function(b,d,h,a){"function"===typeof d&&(a=d,d=void 0);
"function"===typeof h&&(a=h,h=null);if("closing"!==(this||Cd).readyState&&"closed"!==(this||Cd).readyState){h=h||{};h.compress=!1!==h.compress;b={type:b,data:d,options:h};this.emit("packetCreate",b);(this||Cd).writeBuffer.push(b);if(a)this.once("flush",a);this.flush()}};ii.prototype.close=function(){function b(){a.onClose("forced close");Ek("socket closing - telling transport to close");a.transport.close()}function d(){a.removeListener("upgrade",d);a.removeListener("upgradeError",d);b()}function h(){a.once("upgrade",
d);a.once("upgradeError",d)}if("opening"===(this||Cd).readyState||"open"===(this||Cd).readyState){(this||Cd).readyState="closing";var a=this||Cd;if((this||Cd).writeBuffer.length)this.once("drain",function(){(this||Cd).upgrading?h():b()});else(this||Cd).upgrading?h():b()}return this||Cd};ii.prototype.onError=function(b){Ek("socket error %j",b);ii.priorWebsocketSuccess=!1;this.emit("error",b);this.onClose("transport error",b)};ii.prototype.onClose=function(b,d){if("opening"===(this||Cd).readyState||
"open"===(this||Cd).readyState||"closing"===(this||Cd).readyState){Ek('socket close with reason: "%s"',b);var h=this||Cd;clearTimeout((this||Cd).pingIntervalTimer);clearTimeout((this||Cd).pingTimeoutTimer);(this||Cd).transport.removeAllListeners("close");(this||Cd).transport.close();(this||Cd).transport.removeAllListeners();(this||Cd).readyState="closed";(this||Cd).id=null;this.emit("close",b,d);h.writeBuffer=[];h.prevBufferLen=0}};ii.prototype.filterUpgrades=function(b){for(var d=[],h=0,a=b.length;h<
a;h++)~IU((this||Cd).transports,b[h])&&d.push(b[h]);return d};var JU={};JU=Bca;JU.parser=Ei;var Gwa=JU,Hwa={},KU=Hwa=function(b,d){for(var h=[],a=(d=d||0)||0;a<b.length;a++)h[a-d]=b[a];return h},Iwa={},Dca=[].slice,Rr=Iwa=function(b,d){"string"==typeof d&&(d=b[d]);if("function"!=typeof d)throw Error("bind() requires a function");var h=Dca.call(arguments,2);return function(){return d.apply(b,h.concat(Dca.call(arguments)))}},Jwa={},wp=Jwa=function(b,d,h){b.on(d,h);return{destroy:function(){b.removeListener(d,
h)}}},Se="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,LU={},vm=nj,xp=Qr("socket.io-client:socket");LU=LU=ak;var Kwa={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},MU=Rv.prototype.emit;Rv(ak.prototype);ak.prototype.subEvents=function(){if(!(this||Se).subs){var b=(this||Se).io;(this||Se).subs=[wp(b,"open",Rr(this||Se,"onopen")),wp(b,"packet",
Rr(this||Se,"onpacket")),wp(b,"close",Rr(this||Se,"onclose"))]}};ak.prototype.open=ak.prototype.connect=function(){if((this||Se).connected)return this||Se;this.subEvents();(this||Se).io.reconnecting||(this||Se).io.open();if("open"===(this||Se).io.readyState)this.onopen();this.emit("connecting");return this||Se};ak.prototype.send=function(){var b=KU(arguments);b.unshift("message");(this||Se).emit.apply(this||Se,b);return this||Se};ak.prototype.emit=function(b){if(Kwa.hasOwnProperty(b))return MU.apply(this||
Se,arguments),this||Se;var d=KU(arguments),h={type:(void 0!==(this||Se).flags.binary?(this||Se).flags.binary:BU(d))?vm.BINARY_EVENT:vm.EVENT,data:d,options:{}};h.options.compress=!(this||Se).flags||!1!==(this||Se).flags.compress;"function"===typeof d[d.length-1]&&(xp("emitting packet with ack id %d",(this||Se).ids),(this||Se).acks[(this||Se).ids]=d.pop(),h.id=(this||Se).ids++);(this||Se).connected?this.packet(h):(this||Se).sendBuffer.push(h);(this||Se).flags={};return this||Se};ak.prototype.packet=
function(b){b.nsp=(this||Se).nsp;(this||Se).io.packet(b)};ak.prototype.onopen=function(){xp("transport is open - connecting");if("/"!==(this||Se).nsp)if((this||Se).query){var b="object"===typeof(this||Se).query?MK.encode((this||Se).query):(this||Se).query;xp("sending connect packet with query %s",b);this.packet({type:vm.CONNECT,query:b})}else this.packet({type:vm.CONNECT})};ak.prototype.onclose=function(b){xp("close (%s)",b);(this||Se).connected=!1;(this||Se).disconnected=!0;delete (this||Se).id;
this.emit("disconnect",b)};ak.prototype.onpacket=function(b){var d=b.type===vm.ERROR&&"/"===b.nsp;if(b.nsp===(this||Se).nsp||d)switch(b.type){case vm.CONNECT:this.onconnect();break;case vm.EVENT:this.onevent(b);break;case vm.BINARY_EVENT:this.onevent(b);break;case vm.ACK:this.onack(b);break;case vm.BINARY_ACK:this.onack(b);break;case vm.DISCONNECT:this.ondisconnect();break;case vm.ERROR:this.emit("error",b.data)}};ak.prototype.onevent=function(b){var d=b.data||[];xp("emitting event %j",d);null!=b.id&&
(xp("attaching ack callback to event"),d.push(this.ack(b.id)));(this||Se).connected?MU.apply(this||Se,d):(this||Se).receiveBuffer.push(d)};ak.prototype.ack=function(b){var d=this||Se,h=!1;return function(){if(!h){h=!0;var a=KU(arguments);xp("sending ack %j",a);d.packet({type:BU(a)?vm.BINARY_ACK:vm.ACK,id:b,data:a})}}};ak.prototype.onack=function(b){var d=(this||Se).acks[b.id];"function"===typeof d?(xp("calling ack %s with %j",b.id,b.data),d.apply(this||Se,b.data),delete (this||Se).acks[b.id]):xp("bad ack %s",
b.id)};ak.prototype.onconnect=function(){(this||Se).connected=!0;(this||Se).disconnected=!1;this.emit("connect");this.emitBuffered()};ak.prototype.emitBuffered=function(){var b;for(b=0;b<(this||Se).receiveBuffer.length;b++)MU.apply(this||Se,(this||Se).receiveBuffer[b]);(this||Se).receiveBuffer=[];for(b=0;b<(this||Se).sendBuffer.length;b++)this.packet((this||Se).sendBuffer[b]);(this||Se).sendBuffer=[]};ak.prototype.ondisconnect=function(){xp("server disconnect (%s)",(this||Se).nsp);this.destroy();
this.onclose("io server disconnect")};ak.prototype.destroy=function(){if((this||Se).subs){for(var b=0;b<(this||Se).subs.length;b++)(this||Se).subs[b].destroy();(this||Se).subs=null}(this||Se).io.destroy(this||Se)};ak.prototype.close=ak.prototype.disconnect=function(){(this||Se).connected&&(xp("performing disconnect (%s)",(this||Se).nsp),this.packet({type:vm.DISCONNECT}));this.destroy();if((this||Se).connected)this.onclose("io client disconnect");return this||Se};ak.prototype.compress=function(b){(this||
Se).flags.compress=b;return this||Se};ak.prototype.binary=function(b){(this||Se).flags.binary=b;return this||Se};var Eca=LU,lm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Fca={};Fca=hy;hy.prototype.duration=function(){var b=(this||lm).ms*Math.pow((this||lm).factor,(this||lm).attempts++);if((this||lm).jitter){var d=Math.random(),h=Math.floor(d*(this||lm).jitter*b);b=0==(Math.floor(10*d)&1)?b-h:b+h}return Math.min(b,(this||lm).max)|0};hy.prototype.reset=function(){(this||
lm).attempts=0};hy.prototype.setMin=function(b){(this||lm).ms=b};hy.prototype.setMax=function(b){(this||lm).max=b};hy.prototype.setJitter=function(b){(this||lm).jitter=b};var Lwa=Fca,Mwa={},Gca=Qr("socket.io-client:url"),Nwa=Mwa=function(b,d){var h=b;d=d||"undefined"!==typeof location&&location;null==b&&(b=d.protocol+"//"+d.host);"string"===typeof b&&("/"===b.charAt(0)&&(b="/"===b.charAt(1)?d.protocol+b:d.host+b),/^(https?|wss?):\/\//.test(b)||(Gca("protocol-less url %s",b),b="undefined"!==typeof d?
d.protocol+"//"+b:"https://"+b),Gca("parse %s",b),h=ica(b));h.port||(/^(http|ws)$/.test(h.protocol)?h.port="80":/^(http|ws)s$/.test(h.protocol)&&(h.port="443"));h.path=h.path||"/";b=-1!==h.host.indexOf(":")?"["+h.host+"]":h.host;h.id=h.protocol+"://"+b+":"+h.port;h.href=h.protocol+"://"+b+(d&&d.port===h.port?"":":"+h.port);return h},Sd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Hca={},Mla=nj,cm=Qr("socket.io-client:manager"),Lla=Lwa,Ica=Object.prototype.hasOwnProperty;
Hca=Fi;Fi.prototype.emitAll=function(){(this||Sd).emit.apply(this||Sd,arguments);for(var b in(this||Sd).nsps)Ica.call((this||Sd).nsps,b)&&(this||Sd).nsps[b].emit.apply((this||Sd).nsps[b],arguments)};Fi.prototype.updateSocketIds=function(){for(var b in(this||Sd).nsps)Ica.call((this||Sd).nsps,b)&&((this||Sd).nsps[b].id=this.generateId(b))};Fi.prototype.generateId=function(b){return("/"===b?"":b+"#")+(this||Sd).engine.id};Rv(Fi.prototype);Fi.prototype.reconnection=function(b){if(!arguments.length)return(this||
Sd)._reconnection;(this||Sd)._reconnection=!!b;return this||Sd};Fi.prototype.reconnectionAttempts=function(b){if(!arguments.length)return(this||Sd)._reconnectionAttempts;(this||Sd)._reconnectionAttempts=b;return this||Sd};Fi.prototype.reconnectionDelay=function(b){if(!arguments.length)return(this||Sd)._reconnectionDelay;(this||Sd)._reconnectionDelay=b;(this||Sd).backoff&&(this||Sd).backoff.setMin(b);return this||Sd};Fi.prototype.randomizationFactor=function(b){if(!arguments.length)return(this||Sd)._randomizationFactor;
(this||Sd)._randomizationFactor=b;(this||Sd).backoff&&(this||Sd).backoff.setJitter(b);return this||Sd};Fi.prototype.reconnectionDelayMax=function(b){if(!arguments.length)return(this||Sd)._reconnectionDelayMax;(this||Sd)._reconnectionDelayMax=b;(this||Sd).backoff&&(this||Sd).backoff.setMax(b);return this||Sd};Fi.prototype.timeout=function(b){if(!arguments.length)return(this||Sd)._timeout;(this||Sd)._timeout=b;return this||Sd};Fi.prototype.maybeReconnectOnOpen=function(){!(this||Sd).reconnecting&&(this||
Sd)._reconnection&&0===(this||Sd).backoff.attempts&&this.reconnect()};Fi.prototype.open=Fi.prototype.connect=function(b,d){cm("readyState %s",(this||Sd).readyState);if(~(this||Sd).readyState.indexOf("open"))return this||Sd;cm("opening %s",(this||Sd).uri);(this||Sd).engine=Gwa((this||Sd).uri,(this||Sd).opts);var h=(this||Sd).engine,a=this||Sd;(this||Sd).readyState="opening";(this||Sd).skipReconnect=!1;var e=wp(h,"open",function(){a.onopen();b&&b()});d=wp(h,"error",function(r){cm("connect_error");a.cleanup();
a.readyState="closed";a.emitAll("connect_error",r);if(b){var v=Error("Connection error");v.data=r;b(v)}else a.maybeReconnectOnOpen()});if(!1!==(this||Sd)._timeout){var n=(this||Sd)._timeout;cm("connect attempt will timeout after %d",n);0===n&&e.destroy();var q=setTimeout(function(){cm("connect attempt timed out after %d",n);e.destroy();h.close();h.emit("error","timeout");a.emitAll("connect_timeout",n)},n);(this||Sd).subs.push({destroy:function(){clearTimeout(q)}})}(this||Sd).subs.push(e);(this||Sd).subs.push(d);
return this||Sd};Fi.prototype.onopen=function(){cm("open");this.cleanup();(this||Sd).readyState="open";this.emit("open");var b=(this||Sd).engine;(this||Sd).subs.push(wp(b,"data",Rr(this||Sd,"ondata")));(this||Sd).subs.push(wp(b,"ping",Rr(this||Sd,"onping")));(this||Sd).subs.push(wp(b,"pong",Rr(this||Sd,"onpong")));(this||Sd).subs.push(wp(b,"error",Rr(this||Sd,"onerror")));(this||Sd).subs.push(wp(b,"close",Rr(this||Sd,"onclose")));(this||Sd).subs.push(wp((this||Sd).decoder,"decoded",Rr(this||Sd,"ondecoded")))};
Fi.prototype.onping=function(){(this||Sd).lastPing=new Date;this.emitAll("ping")};Fi.prototype.onpong=function(){this.emitAll("pong",new Date-(this||Sd).lastPing)};Fi.prototype.ondata=function(b){(this||Sd).decoder.add(b)};Fi.prototype.ondecoded=function(b){this.emit("packet",b)};Fi.prototype.onerror=function(b){cm("error",b);this.emitAll("error",b)};Fi.prototype.socket=function(b,d){function h(){~IU(e.connecting,a)||e.connecting.push(a)}var a=(this||Sd).nsps[b];if(!a){a=new Eca(this||Sd,b,d);(this||
Sd).nsps[b]=a;var e=this||Sd;a.on("connecting",h);a.on("connect",function(){a.id=e.generateId(b)});(this||Sd).autoConnect&&h()}return a};Fi.prototype.destroy=function(b){b=IU((this||Sd).connecting,b);~b&&(this||Sd).connecting.splice(b,1);(this||Sd).connecting.length||this.close()};Fi.prototype.packet=function(b){cm("writing packet %j",b);var d=this||Sd;b.query&&0===b.type&&(b.nsp+="?"+b.query);d.encoding?d.packetBuffer.push(b):(d.encoding=!0,(this||Sd).encoder.encode(b,function(h){for(var a=0;a<h.length;a++)d.engine.write(h[a],
b.options);d.encoding=!1;d.processPacketQueue()}))};Fi.prototype.processPacketQueue=function(){if(0<(this||Sd).packetBuffer.length&&!(this||Sd).encoding){var b=(this||Sd).packetBuffer.shift();this.packet(b)}};Fi.prototype.cleanup=function(){cm("cleanup");for(var b=(this||Sd).subs.length,d=0;d<b;d++)(this||Sd).subs.shift().destroy();(this||Sd).packetBuffer=[];(this||Sd).encoding=!1;(this||Sd).lastPing=null;(this||Sd).decoder.destroy()};Fi.prototype.close=Fi.prototype.disconnect=function(){cm("disconnect");
(this||Sd).skipReconnect=!0;(this||Sd).reconnecting=!1;"opening"===(this||Sd).readyState&&this.cleanup();(this||Sd).backoff.reset();(this||Sd).readyState="closed";(this||Sd).engine&&(this||Sd).engine.close()};Fi.prototype.onclose=function(b){cm("onclose");this.cleanup();(this||Sd).backoff.reset();(this||Sd).readyState="closed";this.emit("close",b);(this||Sd)._reconnection&&!(this||Sd).skipReconnect&&this.reconnect()};Fi.prototype.reconnect=function(){if((this||Sd).reconnecting||(this||Sd).skipReconnect)return this||
Sd;var b=this||Sd;if((this||Sd).backoff.attempts>=(this||Sd)._reconnectionAttempts)cm("reconnect failed"),(this||Sd).backoff.reset(),this.emitAll("reconnect_failed"),(this||Sd).reconnecting=!1;else{var d=(this||Sd).backoff.duration();cm("will wait %dms before reconnect attempt",d);(this||Sd).reconnecting=!0;var h=setTimeout(function(){b.skipReconnect||(cm("attempting reconnect"),b.emitAll("reconnect_attempt",b.backoff.attempts),b.emitAll("reconnecting",b.backoff.attempts),b.skipReconnect||b.open(function(a){a?
(cm("reconnect attempt error"),b.reconnecting=!1,b.reconnect(),b.emitAll("reconnect_error",a.data)):(cm("reconnect success"),b.onreconnect())}))},d);(this||Sd).subs.push({destroy:function(){clearTimeout(h)}})}};Fi.prototype.onreconnect=function(){var b=(this||Sd).backoff.attempts;(this||Sd).reconnecting=!1;(this||Sd).backoff.reset();this.updateSocketIds();this.emitAll("reconnect",b)};var Jca=Hca,vt={},Nla=Nwa,Owa=nj,V7=Jca,U7=Qr("socket.io-client");vt=vt=T7;var tB=vt.managers={};vt.protocol=Owa.protocol;
vt.connect=T7;vt.Manager=Jca;vt.Socket=Eca;var Pwa=vt,ig=lively.FreezerRuntime.recorderFor("lively.2lively/client.js");ig.determineLocation=function(){return"undefined"!==typeof document&&document.location?System.baseURL||document.location.origin:ig.isNode?System._nodeRequire("os").hostname():System.baseURL};ig.promise=bg;ig.fun=ik;ig.obj=xf;ig.events=gv;ig.num=jk;ig.L2LConnection=gj;ig.defaultActions=FK;ig.defaultClientActions=GK;ig.isNode="undefined"!==typeof System?System.get("@system-env").node:
"undefined"!==typeof ig.process&&ig.process.env;ig._ioClient=Pwa;ig.resource=Uc;ig.ioClient=ig.ioClient||void 0;ig.isNode?(ig.require=System._nodeRequire("module")._load,ig.ioClient=ig.require("socket.io-client")):ig.ioClient=ig._ioClient;ig.urlHelper={isRoot:function(b){return"/"===ig.urlHelper.path(b)},root:function(b){return ig.urlHelper.isRoot(b)?b:b.slice(0,-ig.urlHelper.path(b).length)+"/"},path:function(){var b=/^[a-z0-9-_\.]+:/,d=/^\/\/[^\/]+/;return function(h){h=h.replace(b,"").replace(d,
"");return""===h?"/":h}}(),join:function(b,d){b.endsWith("/")&&(b=b.slice(0,-1));d.startsWith("/")&&(d=d.slice(1));return b+"/"+d}};var Vi=function(b,d,h,a){var e=ig.L2LConnection.call(this)||this;ig.events.makeEmitter(e);e.info=a;e.origin=b;e.path=d;e.namespace=h.replace(/^\/?/,"/");e.trackerId=null;e._socketioClient=null;e._reconnectState={closed:!1,autoReconnect:!0,isReconnecting:!1,isReconnectingViaSocketio:!1,registerAttempt:0,registerProcess:null,isOpening:!1};Object.keys(ig.defaultActions).forEach(function(n){return e.addService(n,
ig.defaultActions[n])});Object.keys(ig.defaultClientActions).forEach(function(n){return e.addService(n,ig.defaultClientActions[n])});return e};$jscomp.inherits(Vi,ig.L2LConnection);Vi.clientKey=function(b,d,h){b=b.replace(/\/$/,"");d=d.replace(/^\//,"");h=h.replace(/^\//,"");return b+"-"+d+"-"+h};Vi.forLivelyInBrowser=function(b){var d=!!b;b=Object.assign({type:"lively.morphic browser"},b);var h=this.default();if(!h)return ig.L2LClient.ensure({url:ig.resource(ig.determineLocation()).join("/lively-socket.io").url,
namespace:"l2l",info:b});d&&!ig.obj.equals(h.info,b)&&h.isRegistered()&&(h.info=b,h.unregister().then(function(){return h.register()}).catch(function(a){return console.error("l2l re-register on info change errored: "+a)}));return h};Vi.default=function(){var b=ig.L2LClient.clients.keys().next().value;return ig.L2LClient.clients.get(b)};Vi.create=function(b){var d=b=void 0===b?{}:b;b=void 0===d.debug?!1:d.debug;var h=d.url,a=d.namespace,e=void 0===d.autoOpen?!0:d.autoOpen;d=void 0===d.info?{}:d.info;
if(!h)throw Error("L2LClient needs server url!");var n=ig.urlHelper.root(h).replace(/\/+$/,"");h=ig.urlHelper.path(h);a=new this(n,h,a||"",d);e&&a.register();a.debug=b;return a};Vi.ensure=function(b){var d=b=void 0===b?{}:b,h=d.url;d=d.namespace;if(!h)throw Error("L2LClient needs server url!");var a=ig.urlHelper.root(h).replace(/\/+$/,""),e=ig.urlHelper.path(h);a=this.clientKey(a,e,d||"");(e=this.clients.get(a))||this.clients.set(a,e=this.create(Object.assign({},b,{url:h,namespace:d})));return e};
Vi.prototype.isOnline=function(){return this.socket&&this.socket.connected};Vi.prototype.isRegistered=function(){return this.isOnline()&&!!this.trackerId};Vi.prototype.open=function(){var b=this,d,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return b.isOnline()||b._reconnectState.isOpening?e.return(b):e.yield(b.close(),2);b._reconnectState.closed=!1;d=ig.urlHelper.join(b.origin,b.namespace);h={path:b.path,transports:["websocket","polling"]};a=b._socketioClient=
ig.ioClient(d,h);b.debug&&console.log("["+b+"] connecting");a.on("error",function(n){b._reconnectState.isOpening=!1;b.debug&&console.log("["+b+"] errored: "+n)});a.on("close",function(n){return b.debug&&console.log("["+b+"] closed: "+n)});a.on("reconnect_failed",function(){return b.debug&&console.log("["+b+"] could not reconnect")});a.on("reconnect_error",function(n){return b.debug&&console.log("["+b+"] reconnect error "+n)});a.on("connect",function(){b.debug&&console.log("["+b+"] connected");b.emit("connected",
b);b._reconnectState.isOpening=!1;b._reconnectState.isReconnecting=!1;b._reconnectState.isReconnectingViaSocketio=!1});a.on("disconnect",function(){b._reconnectState.isOpening=!1;b.debug&&console.log("["+b+"] disconnected");b.emit("disconnected",b);b.trackerId?("tracker"!==b.trackerId&&(b.renameTarget(b.trackerId,"tracker"),b.trackerId=null),b._reconnectState.closed?b.debug&&console.log("["+b+"] won't reconnect b/c client is marked as closed"):b._reconnectState.autoReconnect?(b._reconnectState.isReconnecting=
!0,setTimeout(function(){b._reconnectState.closed?b.debug&&console.log("["+b+"] won't reconnect b/c client is marked as closed 2"):b._reconnectState.isReconnectingViaSocketio?b.debug&&console.log("["+b+"] won't reconnect again, client already reconnecting"):(b.debug&&console.log("["+b+"] initiating reconnection to tracker"),b.register())},20)):b.debug&&console.log("["+b+"] won't reconnect b/c client has reconnection disabled")):(b.debug&&console.log("["+b+"] disconnect: don't have a tracker id, won't try reconnect"),
b.trackerId="tracker")});a.on("reconnecting",function(){b.debug&&console.log("["+b+"] reconnecting",b._reconnectState);b.emit("reconnecting",b);b._reconnectState.closed?(b._reconnectState.isReconnecting=!1,b._reconnectState.isReconnectingViaSocketio=!1,a.close(),b.close()):(b._reconnectState.isReconnecting=!0,b._reconnectState.isReconnectingViaSocketio=!0)});a.on("reconnect",function(){b.debug&&console.log("["+b+"] reconnected");b._reconnectState.isReconnecting=!1;b._reconnectState.isReconnectingViaSocketio=
!1;b.register();if(b.onReconnect&&"function"===typeof b.onReconnect)b.onReconnect()});b.installEventToMessageTranslator(a);b._reconnectState.isOpening=!0;return e.return((new Promise(function(n,q){a.once("error",q);a.once("connect",n)})).then(function(){return b}))})};Vi.prototype.onReconnect=function(){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){b=(new Date).toTimeString();console.log("Reconnected at "+b);d.jumpToEnd()})};Vi.prototype.close=function(){var b=this,d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==
a.nextAddress){b._reconnectState.closed=!0;if(d=b.socket)d.removeAllListeners("reconnect"),d.removeAllListeners("reconnecting"),d.removeAllListeners("disconnect"),d.removeAllListeners("connect"),d.removeAllListeners("reconnect_error"),d.removeAllListeners("reconnect_failed"),d.removeAllListeners("close"),d.removeAllListeners("error"),d.close();b.debug&&console.log("["+b+"] closing...");return b.isRegistered()?a.yield(b.unregister(),2):a.jumpTo(2)}return b.isOnline()||b.socket?d&&!d.connected?(b.debug&&
console.log("["+b+"] socket not connected, considering client closed"),a.return(b)):a.return(Promise.race([ig.promise.delay(2E3).then(function(){return d.removeAllListeners("disconnect")}),new Promise(function(e){return d.once("disconnect",e)})]).then(function(){b.debug&&console.log("["+b+"] closed");return b})):(b.debug&&(h=b.isOnline()?"no socket":"not online",b.debug&&console.log("["+b+"] cannot close: "+h)),a.return(b))})};Vi.prototype.remove=function(){var b=this.constructor.clientKey(this.origin,
this.path,this.namespace);this.constructor.clients.delete(b);return this.close()};Vi.prototype.register=function(){var b=this,d,h,a,e,n,q,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:if(b.isRegistered())return E.return();if(b._reconnectState.closed)return b.debug&&console.log("["+b+"] not registering this b/c closed"),b._reconnectState.registerAttempt=0,E.return();if(b._reconnectState.registerProcess)return b.debug&&console.log("["+b+"] not registering this b/c register process exists"),
E.return();E.setCatchFinallyBlocks(2);if(b.isOnline()){E.jumpTo(4);break}return E.yield(b.open(),4);case 4:return b.debug&&console.log("["+b+"] register"),E.yield(b.sendToAndWait("tracker","register",Object.assign({userName:"unknown",type:"l2l "+(ig.isNode?"node":"browser"),location:ig.determineLocation()},b.info)),6);case 6:d=E.yieldResult;if(!d.data)throw h=Error("Register answer is empty!"),b.emit("error",h),h;if(d.data.isError)throw a=Error(d.data.error),b.emit("error",a),a;b._reconnectState.registerAttempt=
0;e=d;n=e.data;q=n.trackerId;r=n.messageNumber;b.trackerId=q;b._incomingOrderNumberingBySenders.set(q,r||0);b.emit("registered",{trackerId:q});if(b.onReconnect&&"function"===typeof b.onReconnect)b.onReconnect();E.leaveTryBlock(0);break;case 2:v=E.enterCatchBlock(),console.error("Error in register request of "+b+": "+v),y=b._reconnectState.registerAttempt++,D=ig.num.backoff(y,4,3E5),b._reconnectState.registerProcess=setTimeout(function(){b._reconnectState.registerProcess=null;b.register()},D),E.jumpToEnd()}})};
Vi.prototype.unregister=function(){var b=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){switch(h.nextAddress){case 1:if(!b.isRegistered())return h.return();b.debug&&console.log("["+b+"] unregister");d=b.trackerId;h.setCatchFinallyBlocks(2);return h.yield(b.sendToAndWait(b.trackerId,"unregister",{}),4);case 4:h.leaveTryBlock(3);break;case 2:h.enterCatchBlock();case 3:b.renameTarget(d,"tracker"),b.trackerId=null,b.emit("unregistered",b),h.jumpToEnd()}})};Vi.prototype.whenRegistered=
function(b){var d=this;return ig.promise.waitFor(b,function(){return d.isRegistered()}).catch(function(h){return Promise.reject(/timeout/i.test(String(h))?Error("Timeout in "+d+".whenRegistered"):h)})};Vi.prototype.send=function(b,d){var h=this,a=$jscomp.makeIterator(this.prepareSend(b,d));b=a.next().value;d=a.next().value;this.whenOnline().then(function(){var e=h.socket,n=b,q=n.action;n=n.target;if(!e)throw Error("Trying to send message "+q+" to "+n+" but cannot find a connection to it!");"function"===
typeof d?e.emit(q,b,d):e.emit(q,b)})};Vi.prototype.joinRoom=function(b){var d=this;return this.whenOnline().then(function(){return d.sendToAndWait(d.trackerId,"[broadcast] join room",{room:b})})};Vi.prototype.leaveRoom=function(b){var d=this;return this.whenOnline().then(function(){return d.sendToAndWait(d.trackerId,"[broadcast] leave room",{room:b})})};Vi.prototype.broadcast=function(b,d,h,a,e){var n=this,q={action:d,room:b,broadcast:h};if(void 0===a?0:a)q.isSystemBroadcast=!0;if(void 0===e?0:e)q.isMultiServerBroadcast=
!0;return this.whenOnline().then(function(){return n.sendToAndWait(n.trackerId,"[broadcast] send",q)})};Vi.prototype.listRoomMembers=function(b){var d=this,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(d.sendToAndWait(d.trackerId,"[broadcast] list room members",{room:b}),2);h=e.yieldResult;a=h.data;return e.return(a)})};Vi.prototype.joinedRooms=function(){var b=this,d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.yield(b.sendToAndWait(b.trackerId,
"[broadcast] my rooms",{}),2);d=a.yieldResult;h=d.data;return a.return(h)})};Vi.prototype.listRooms=function(){var b=this,d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.yield(b.sendToAndWait(b.trackerId,"[broadcast] all rooms",{}),2);d=a.yieldResult;h=d.data;return a.return(h)})};Vi.prototype.listPeers=function(b){b=void 0===b?!1:b;var d=this,h,a,e,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return h=d,a=
h._peersCached,e=Date.now(),!b&&a&&1E3>e-a.timestamp?v.return(d._peersCached.sessions):d.isOnline()?v.yield(d.sendToAndWait(d.trackerId,"getClients",{}),2):v.return([]);n=v.yieldResult;q=n.data;r=q.map(function(y){var D=$jscomp.makeIterator(y);y=D.next().value;var E=D.next().value,I=E.info||{};D=I.userRealm;var K=I.userToken,P=I.l2lUserToken,N=I.location,aa=I.type;I=I.world;y=Object.assign({},ig.obj.dissoc(E,["info"]),{id:y,world:I,location:N,type:aa});(K=K||P)&&"null"!==K&&(lively.user?y.user=lively.user.ClientUser.fromToken(K,
D):(y.userToken=K,y.userRealm=D));return y});d._peersCached={timestamp:e,sessions:r};return v.return(r)})};Vi.prototype.toString=function(){var b=this.origin,d=this.path,h=this.namespace,a=this.id,e=this.isOnline()?this.isRegistered()?"registered":"unregistered":"disconnected";return"L2LClient("+(a||"").slice(0,5)+" "+b+d+" - "+h+" "+e+")"};$jscomp.global.Object.defineProperties(Vi.prototype,{socket:{configurable:!0,enumerable:!0,get:function(){return this._socketioClient}},socketId:{configurable:!0,
enumerable:!0,get:function(){return this.socket?this.socket.id:null}}});$jscomp.global.Object.defineProperties(Vi,{clients:{configurable:!0,enumerable:!0,get:function(){return this._clients||(this._clients=new Map)}}});ig.L2LClient=Vi;ig.default=Vi;var Kca=Object.freeze({__proto__:null,"default":Vi});Ka("bQ",Kca);var Sv=lively.FreezerRuntime.recorderFor("lively.shell/command-interface.js");Sv.promise=bg;Sv.events=gv;var yn=function(){this._stderr=this._stdout="";this.exitCode=void 0;this.commandString=
"";this.process=null;this._whenDone=Sv.promise.deferred();this._whenStarted=Sv.promise.deferred();this.startTime=0;this.lastSignal=null;Sv.events.makeEmitter(this)};yn.findCommand=function(b){return this.commands.find(function(d){return d.pid===b})};yn.prototype.isRunning=function(){return this.process&&void 0===this.exitCode};yn.prototype.isDone=function(){return void 0!=this.exitCode};yn.prototype.whenStarted=function(){return this._whenStarted.promise};yn.prototype.whenDone=function(){return this._whenDone.promise};
yn.prototype.spawn=function(b){throw Error("not yet implemented");};yn.prototype.kill=function(b){this.lastSignal=void 0===b?"KILL":b};yn.prototype.toString=function(){return this.constructor.name+"("+this.commandString+", "+this.status+")"};$jscomp.global.Object.defineProperties(yn.prototype,{isShellCommand:{configurable:!0,enumerable:!0,get:function(){return!0}},status:{configurable:!0,enumerable:!0,get:function(){return this.process?void 0===this.exitCode?"running, pid "+this.pid:"exited "+this.exitCode+
", pid "+this.pid:"not started"}},pid:{configurable:!0,enumerable:!0,get:function(){return this.process?this.process.pid:null}},output:{configurable:!0,enumerable:!0,get:function(){return this.stdout+(this.stderr?"\n"+this.stderr:"")}},stdout:{configurable:!0,enumerable:!0,get:function(){return this._stdout}},stderr:{configurable:!0,enumerable:!0,get:function(){return this._stderr}}});$jscomp.global.Object.defineProperties(yn,{commands:{configurable:!0,enumerable:!0,get:function(){return this._commands||
(this._commands=[])}}});Sv.CommandInterface=yn;Sv.default=yn;var Zf=lively.FreezerRuntime.recorderFor("lively.shell/client-command.js");Zf.runCommand=dv;Zf.defaultDirectory=uB;Zf.env=vB;Zf.readFile=XH;Zf.writeFile=YH;Zf.CommandInterface=yn;Zf.promise=bg;Zf.arr=cf;Zf.obj=xf;Zf.signal=Jk;Zf.debug=!1;Zf.runCommand=dv;Zf.runCommand=dv;Zf.dirCache={};Zf.defaultDirectory=uB;Zf.defaultDirectory=uB;Zf.env=vB;Zf.env=vB;Zf.readFile=XH;Zf.readFile=XH;Zf.writeFile=YH;Zf.writeFile=YH;var Bo=function(b){var d=
Zf.CommandInterface.call(this)||this;d.debug=Zf.debug;d.l2lClient=b;return d};$jscomp.inherits(Bo,Zf.CommandInterface);Bo.installLively2LivelyServices=function(b){Object.keys(Zf.L2LServices).forEach(function(d){return b.addService(d,function(h,a,e){return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return n.return(Zf.L2LServices[d](h,a,e))})})})};Bo.prototype.envForCommand=function(b){var d=this.l2lClient,h=d.id,a=d.origin,e=d.path;d=d.namespace;var n=b||{};b=n.env;n=n.owner;b=b||{};n&&
(b.LIVELY_COMMAND_OWNER=n);return Object.assign({ASKPASS_SESSIONID:h,L2L_EDITOR_SESSIONID:h,L2L_SESSIONTRACKER_SERVER:a,L2L_SESSIONTRACKER_PATH:e,L2L_SESSIONTRACKER_NS:d},b)};Bo.prototype.spawn=function(b){b=void 0===b?{command:null,env:{},cwd:null,stdin:null}:b;var d=this,h,a,e,n,q,r,v,y,D,E,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(K){if(1==K.nextAddress)return h=d,a=h.l2lClient,e=b,n=e.command,q=e.env,r=e.cwd,v=e.stdin,d.startTime=new Date,q=d.envForCommand(b),d.debug&&console.log(d+
" spawning "+n),d.debug&&d.whenStarted().then(function(){return console.log(d+" started")}),d.debug&&d.whenDone().then(function(){return console.log(d+" exited")}),Zf.arr.pushIfNotIncluded(d.constructor.commands,d),d.commandString=Array.isArray(n)?n.join(""):n,K.yield(a.sendToAndWait(a.trackerId,"lively.shell.spawn",{command:n,env:q,cwd:r,stdin:v},{ackTimeout:3E4}),2);y=K.yieldResult;D=y.data;E=D.error;I=D.pid;if(E)throw Zf.debug&&console.error("["+d+"] error at start: "+E),d.process={error:E},d.exitCode=
1,Zf.signal(d,"error",E),Error(E);d.process={pid:I};Zf.debug&&console.log("["+d+"] got pid "+I);Zf.signal(d,"pid",I);d._whenStarted.resolve();return K.return(d)})};Bo.prototype.writeToStdin=function(b){var d=this,h,a,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(!d.isRunning())return n.return();h=d;a=h.l2lClient;e=h.pid;return n.yield(a.sendToAndWait(a.trackerId,"lively.shell.writeToStdin",{pid:e,stdin:String(b)}),0)})};Bo.prototype.kill=function(b){b=void 0===b?"KILL":b;var d=
this,h,a,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){if(!d.isRunning())return y.return();Zf.debug&&console.log(d+" signaling "+b);d.lastSignal=b;h=d;a=h.pid;e=h.l2lClient;return y.yield(e.sendToAndWait(e.trackerId,"lively.shell.kill",{pid:a}),2)}n=y.yieldResult;q=n.data;r=q.status;v=q.error;Zf.debug&&console.log(d+" kill send: "+(v||r));if(v)throw Error(v);return y.return(d.whenDone())})};Bo.prototype.onOutput=function(b){var d=b.stdout;b=b.stderr;
d&&(this._stdout+=d,Zf.signal(this,"stdout",d),this.emit("stdout",d));b&&(this._stderr+=b,Zf.signal(this,"stderr",b),this.emit("stderr",b))};Bo.prototype.onClose=function(b){Zf.arr.remove(this.constructor.commands,this);this.exitCode=b;this.emit("close",b);Zf.signal(this,"close",b);this._whenDone.resolve(this)};Bo.prototype.onError=function(b){Zf.arr.remove(this.constructor.commands,this);this._stderr+=b.stack;this.exitCode=1;this.emit("error",b.stack);Zf.signal(this,"error",b.stack);this._whenDone.reject(b)};
Zf.ClientCommand=Bo;Zf.L2LServices={"lively.shell.onOutput":function(b,d,h,a){b=d.data;var e=b.pid,n=b.stdout,q=b.stderr,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return Zf.debug&&console.log("[lively.shell] client received lively.shell.onOutput for command "+e),v.setCatchFinallyBlocks(2),v.yield(Zf.promise.waitFor(1E3,function(){return Zf.ClientCommand.findCommand(e)}),4);case 4:r=v.yieldResult;v.leaveTryBlock(3);break;case 2:return v.enterCatchBlock(),
console.warn("[lively.shell] received output for command "+e+" but it isn't registered!'"),v.return();case 3:r.onOutput({stdout:n,stderr:q}),v.jumpToEnd()}})},"lively.shell.onExit":function(b,d,h,a){b=d.data;var e=b.pid,n=b.code,q=b.error,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return Zf.debug&&console.log("[lively.shell] client received lively.shell.onExit for command "+e),v.setCatchFinallyBlocks(2),v.yield(Zf.promise.waitFor(1E3,function(){return Zf.ClientCommand.findCommand(e)}),
4);case 4:r=v.yieldResult;v.leaveTryBlock(3);break;case 2:return v.enterCatchBlock(),console.warn("[lively.shell] received exit message for command "+e+" but it isn't registered!'"),v.return();case 3:if(q)"string"===typeof q&&(q=Error(q)),r.onError(q);else r.onClose(n);v.jumpToEnd()}})}};Zf.default=Bo;var Qwa=Object.freeze({__proto__:null,runCommand:dv,defaultDirectory:uB,env:vB,readFile:XH,writeFile:YH,"default":Bo}),Sh=lively.FreezerRuntime.recorderFor("lively.ide/shell/shell-interface.js");Sh.runCommand=
ZH;Sh.defaultDirectory=wB;Sh.env=pR;Sh.readFile=function(b,d){d=(d=void 0===d?{}:d)||{};var h=Sh.runCommand('cat "'+b+'"',d);return h.whenDone().then(function(){return h.output})};Sh.writeFile=function(b,d,h){"string"===typeof d&&(d={content:d});d=d||{};d.content=d.content||"";"win32"!==this.PLATFORM&&(b='"'+b+'"');b=this.run("tee "+b,{stdin:d.content,cwd:d.cwd});d.onEnd&&lively.bindings.connect(b,"end",d,"onEnd");h&&lively.bindings.connect(b,"end",{thenDo:h},"thenDo");return b};Sh.parseCommand=qR;
Sh.doGrep=rR;Sh.L2LClient=Vi;Sh._runCommand=dv;Sh._env=vB;Sh._defaultDirectory=uB;Sh.string=Ng;Sh.defaultConnection={url:document.location.origin+"/lively-socket.io",namespace:"l2l"};Sh.runCommand=ZH;Sh.runCommand=ZH;Sh.defaultDirectory=wB;Sh.defaultDirectory=wB;Sh.env=pR;Sh.env=pR;Sh.parseCommand=qR;Sh.parseCommand=qR;Sh.defaultGrepExclusions=".svn .git node_modules dist .module_cache lively.next-node_modules".split(" ");Sh.doGrep=rR;Sh.doGrep=rR;var Ah=lively.FreezerRuntime.recorderFor("lively.shell/client-fs-helper.js");
Ah.fileInfo=$H;Ah.fileInfoCommandString=function(b,d){var h=d=void 0===d?{}:d;d=h.rootDirectory;h=h.platform;d=d||".";var a="win32"===h?"\\":"/";"win32"===h||d.endsWith(a)||(d+=a);return"win32"===h?"cd "+d+' && ls -lLd --time-style=locale "'+b+'"':'if [ "$(uname)" = "Darwin" ];\n      then timeformat=\'-T\'; else\n      timeformat="--time-style=+%b %d %T %Y";\n    fi && env TZ=GMT LANG=en_US.UTF-8 cd '+(d+' && ls -lLd "$timeformat" "'+b+'"')};Ah.parseDirectoryListFromLs=sR;Ah.findFiles=aI;Ah.findFilesCommandString=
function(b,d){var h=d=void 0===d?{}:d,a=h.rootDirectory,e=h.exclude,n=h.depth;h=h.platform;a=a||".";e=e||"-iname "+Ah.defaultExcludes.map(Ah.string.print).join(" -o -iname ");var q="win32"===h?"\\":"/";"win32"===h||a.endsWith(q)||(a+=q);b=Ah.string.format('%s "%s"',d.re?"-iregex":d.matchPath?"-ipath":"-iname",b);n="number"===typeof n?" -maxdepth "+n:"";return"win32"===h?Ah.string.format("find %s %s ( %s ) -prune -o %s %s -print0 | xargs -0 -I{} ls -lLd --time-style=locale {}",a,d.re?"-E ":"",e.replace(/"/g,
""),b.replace(/"/g,""),n):'if [ "$(uname)" = "Darwin" ];\n      then timeformat=\'-T\'; else\n      timeformat="--time-style=+%b %d %T %Y";\n    fi && '+Ah.string.format('env TZ=GMT LANG=en_US.UTF-8 find %s %s \\( %s \\) -prune -o %s %s -print0 | xargs -0 -I{} ls -lLd "$timeformat" "{}"',a,d.re?"-E ":"",e,b,n)};Ah.convertDirectoryUploadEntriesToFileInfos=tR;Ah.runCommand=dv;Ah.string=Ng;Ah.promise=bg;Ah.arr=cf;Ah.fileInfo=$H;Ah.fileInfo=$H;Ah.parseDirectoryListFromLs=sR;Ah.parseDirectoryListFromLs=
sR;var PK=function(b){this.rootDirectory=b;this.fileName=this.path="";this.isDirectory=!1;this.lastModified=null;this.mode="";this.isLink=!1;this.linkCount=0;this.group=this.user="";this.size=0;this.rootDirectory=null};PK.prototype.readFromDirectoryListLine=function(b){var d=this;if(!b.trim().length)return null;var h=b;this.reader.forEach(function(a){return h=a(h,d)});return this};PK.prototype.toString=function(){return this.path};$jscomp.global.Object.defineProperties(PK.prototype,{reader:{configurable:!0,
enumerable:!0,get:function(){return[function(b,d){var h=b.indexOf(" ");d.mode=b.slice(0,h);d.isDirectory="d"===d.mode[0];return b.slice(h+1).trim()},function(b,d){var h=b.indexOf(" ");d.linkCount=Number(b.slice(0,h));return b.slice(h+1).trim()},function(b,d){var h=b.indexOf(" ");d.user=b.slice(0,h);return b.slice(h+1).trim()},function(b,d){var h=Ah.string.peekRight(b,0,/\s+[0-9]/);d.group=b.slice(0,h).trim();return b.slice(h).trim()},function(b,d){var h=b.indexOf(" ");d.size=Number(b.slice(0,h));
return b.slice(h+1).trim()},function(b,d){var h=Ah.string.reMatches(b,/[^s]+\s+[0-9:\s]+/);if(!h||!h[0])return b;d.lastModified=new Date(h[0].match+" GMT");return b.slice(h[0].end).trim()},function(b,d){var h=(b=b.replace(/^\.\/+/g,"").replace(/\/\//g,"/"))&&b.split(" -> "),a=""===b?!1:b&&2===h.length,e=(h=a?h[0]:b)&&0===h.indexOf(d.rootDirectory)?h.slice(d.rootDirectory.length):h;d.fileName=""===b?".":e;d.path=h;d.isLink=a;return e}]}}});Ah.FileInfo=PK;Ah.findFilesProcesses={};Ah.findFiles=aI;Ah.findFiles=
aI;Ah.defaultExcludes=[".svn",".git","node_modules",".module_cache"];Ah.convertDirectoryUploadEntriesToFileInfos=tR;Ah.convertDirectoryUploadEntriesToFileInfos=tR;var Ai=lively.FreezerRuntime.recorderFor("lively.shell/client-resource.js");Ai.Resource=Uf;Ai.runCommand=dv;Ai.fileInfo=$H;Ai.findFiles=aI;Ai.string=Ng;Ai.promise=bg;Ai.arr=cf;Ai.obj=xf;var dm=function(b,d,h){h=void 0===h?{}:h;b=Ai.Resource.call(this,b)||this;b.options=Object.assign({},h,{l2lClient:d||b.constructor.defaultL2lClient});return b};
$jscomp.inherits(dm,Ai.Resource);dm.prototype.newResource=function(b){return new this.constructor(b,this.options.l2lClient,this.options)};dm.prototype.read=function(){var b=this,d=Ai.runCommand('cat "'+this.url+'"',this.options);return d.whenDone().then(function(){if(d.exitCode)throw Error("Read "+b.url+" failed: "+d.stderr);return d.output})};dm.prototype.write=function(b){var d=this,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return b?e.yield(Ai.runCommand('touch "'+
d.url+'" && tee "'+d.url+'"',Object.assign({stdin:String(b)},d.options)).whenDone(),4):e.yield(Ai.runCommand('echo -n > "'+d.url+'"',Object.assign({},d.options)).whenDone(),5);case 4:h=e.yieldResult;e.jumpTo(3);break;case 5:h=e.yieldResult;case 3:a=h;if(a.exitCode)throw Error("Write "+d.url+" failed: "+a.stderr);return e.return(d)}})};dm.prototype.mkdir=function(){var b=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(Ai.runCommand('mkdir -p "'+
b.url+'"',b.options).whenDone(),2);d=h.yieldResult;if(d.exitCode)throw Error(b+" cannot create directory: "+d.stderr);return h.return(b)})};dm.prototype.exists=function(){var b=Ai.runCommand('test -d "'+this.url+'" || test -f "'+this.url+'"',this.options);return b.whenDone().then(function(){return 0===b.exitCode})};dm.prototype.remove=function(){var b=this,d=Ai.runCommand('rm -rf "'+this.url+'"',this.options);return d.whenDone().then(function(){if(d.exitCode)throw Error("Remove of "+b.url+" failed: "+
d.stderr);return b})};dm.prototype.gzip=function(b){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){h=Ai.runCommand('gzip > "'+d.url+'"',Object.assign({stdin:String(b)},d.options));return a.return(h.whenDone().then(function(){if(h.exitCode)throw Error("Gzip compression of "+d.url+" failed: "+h.stderr);return d}))})};dm.prototype.brotli=function(b){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){h=Ai.runCommand('brotli > "'+d.url+'"',Object.assign({stdin:String(b)},
d.options));return a.return(h.whenDone().then(function(){if(h.exitCode)throw Error("Brotli compression of "+d.url+" failed: "+h.stderr);return d}))})};dm.prototype.readProperties=function(){var b=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(Ai.fileInfo(b.url,b.options),2);d=h.yieldResult;b.assignProperties(Ai.obj.dissoc(d,["fileName","path","rootDirectory"]));return h.return(b)})};dm.prototype.dirList=function(b,d){b=void 0===b?1:b;d=void 0===
d?{}:d;var h=this,a,e,n,q,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){if(1==D.nextAddress)return a=d,e=a.exclude,Array.isArray(e)&&(e="-iname "+e.map(Ai.string.print).join(" -o -iname ")),n=h,q=n.url,r=n.options,v=r.l2lClient,D.yield(Ai.findFiles("*",{exclude:e,depth:b,rootDirectory:q,l2lClient:v}),2);y=D.yieldResult;y[0].path.replace(/\/$/,"")===h.url.replace(/\/$/,"")&&y.shift();return D.return(y.map(function(E){var I=E.path;E.isDirectory&&(I=I.replace(/\/?$/,"/"));I=new h.constructor(I,
v,h.options);I.assignProperties(Ai.obj.dissoc(E,["fileName","path","rootDirectory"]));return I}))})};$jscomp.global.Object.defineProperties(dm,{defaultL2lClient:{configurable:!0,enumerable:!0,get:function(){return this._defaultL2lClient||Ai._defaultL2LClient},set:function(b){this._defaultL2lClient=Ai._defaultL2LClient=b}}});Ai.ShellClientResource=dm;Ai._defaultL2LClient=Ai._defaultL2LClient||void 0;var QK={name:"shell-client",matches:function(b){return b.startsWith("/")||b.match(/[a-z]:\\/i)},resourceClass:Ai.ShellClientResource};
Ai.resourceExtension=QK;Ai.resourceExtension=QK;Ai.resourceExtension=QK;Ai.default=dm;var Rwa=Object.freeze({__proto__:null,"default":dm,resourceExtension:QK}),jf=lively.FreezerRuntime.recorderFor("lively.morphic/world-loading.js");jf.loadWorldFromURL=bI;jf.loadWorldFromCommit=cI;jf.loadWorldFromDB=dI;jf.loadWorld=eI;jf.loadLocalConfig=function(){var b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){switch(h.nextAddress){case 1:return b=lively.modules.module("localconfig.js"),h.setCatchFinallyBlocks(2),
h.yield(jf.resource(b.id).exists(),4);case 4:if(!h.yieldResult){h.jumpTo(5);break}return h.yield(b.reload({resetEnv:!1,reloadDeps:!1}),5);case 5:h.leaveTryBlock(0);break;case 2:d=h.enterCatchBlock(),console.error("Error loading localconfig:",d),"undefined"!==typeof $world&&$world.showError("Error loading localconfig.js: "+d),h.jumpToEnd()}})};jf.setupLivelyShell=function(b){var d,h,a,e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return r.yield(lively.modules.importPackage("lively.shell"),
2);case 2:return r.yield(System.import("lively.shell/client-command.js"),3);case 3:return d=r.yieldResult,h=d.default,r.yield(System.import("lively.shell/client-resource.js"),4);case 4:a=r.yieldResult,e=a.resourceExtension,n=b,q=n.l2lClient,h.installLively2LivelyServices(q),e.resourceClass.defaultL2lClient=q,jf.registerResourceExension(e),console.log("[lively] lively.shell setup"),r.jumpToEnd()}})};jf.setupLively2Lively=function(b){var d,h,a,e,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return d=
b.getCurrentUser(),h={world:b.name},d&&(h.userToken=d.token,h.userRealm=d.realm),q.yield(lively.modules.importPackage("lively.2lively"),2);case 2:return q.yield(System.import("lively.2lively/client.js"),3);case 3:return a=q.yieldResult,e=a.default,q.yield(e.forLivelyInBrowser(h),4);case 4:return n=q.yieldResult,console.log("[lively] lively2lively client created "+n),n._onUserChange?jf.reportWorldLoad(b,d):(n._onUserChange=function(r){n.isOnline()&&r.user&&(r=r.user,n.info=Object.assign({},n.info,
{userToken:r.token,userRealm:r.realm}),n.unregister().then(function(){return n.register()}).then(function(){return console.log("re-registered after user change")}))},jf.subscribe("lively.user/userchanged",n._onUserChange,System),n.once("registered",function(){jf.reportWorldLoad(b,d)}),n.on("registered",function(){var r=b.get("user flap");r&&r.updateNetworkIndicator(n)}),n.on("connected",function(){var r=b.get("user flap");r&&r.updateNetworkIndicator(n)}),n.on("reconnecting",function(){var r=b.get("user flap");
r&&r.updateNetworkIndicator(n)}),n.on("disconnected",function(){var r=b.get("user flap");r&&r.updateNetworkIndicator(n)})),q.return(n)}})};jf.interactivelySaveWorld=iy;jf.reportWorldLoad=function(b,d){d=d?d.name+" ("+(d.token||"").slice(0,5)+")":"---";fetch(jf.joinPath(System.baseURL,"/report-world-load"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:d+" logged in at "+b.name+" ["+window._livelyLoadId+"]"})}).catch(function(h){return console.warn("report-world-load failed: "+
h)})};jf.resource=Uc;jf.registerResourceExension=Zd;jf.Color=If;jf.Path=Eg;jf.obj=xf;jf.date=hq;jf.promise=bg;jf.MorphicEnv=go;jf.createMorphSnapshot=cv;jf.MorphicDB=zq;jf.ensureCommitInfo=fB;jf.pathForBrowserHistory=ex;jf.subscribe=Tz;jf.emit=Rq;jf.defaultDirectory=wB;jf.ShellClientResource=dm;jf.joinPath=sg;jf.reset=LG;jf.loadWorldFromURL=bI;jf.loadWorldFromURL=bI;jf.loadWorldFromCommit=cI;jf.loadWorldFromCommit=cI;jf.loadWorldFromDB=dI;jf.loadWorldFromDB=dI;jf.loadWorld=eI;jf.loadWorld=eI;jf.interactivelySaveWorld=
iy;jf.interactivelySaveWorld=iy;var Oi=lively.FreezerRuntime.recorderFor("lively.user/client/user.js");Oi.jwtTokenDecode=function(b){b=$jscomp.makeIterator(b.split("."));b.next();var d=b.next().value;b.next();return JSON.parse(atob(d))};Oi.guid=function(){var b=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()};Oi.makeRequest=function(b,d,h,a){a=void 0===a?{}:a;d={method:void 0===d?"GET":d,mode:"cors"};h&&(d.body=
h);d.redirect="follow";d.headers=Object.assign({},a);return fetch(b,d)};Oi.POST=function(b,d){var h,a,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:return"string"!==typeof d&&(d=JSON.stringify(d)),n.yield(Oi.makeRequest(b,"POST",d,{}),2);case 2:return h=n.yieldResult,n.setCatchFinallyBlocks(3),n.yield(h.text(),5);case 5:a=n.yieldResult;n.leaveTryBlock(4);break;case 3:n.enterCatchBlock();case 4:if(a&&"application/json"===h.headers.get("content-type"))try{e=
JSON.parse(a)}catch(q){}if(!e)throw Error("Unexpected response: "+a);return n.return(e)}})};Oi.resource=Uc;var Tv=Ka("k",function(b){var d=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),h=d.hasOwnProperty("User")&&"function"===typeof d.User?d.User:d.User=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,e){this.realm=e;this.name=
a;this.roles={};this.createdAt=0;this.token=this.email=null}},{key:"isLoggedIn",value:function(){return!!this.token}},{key:"loginOrRegister",value:function(a,e,n){var q=this,r,v,y,D,E,I,K,P,N,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return r=q,v=r.email,y=r.createdAt,D=r.roles,E=r.name,I="register"===a?{password:e,email:v,createdAt:y,roles:D,name:E}:{password:e,name:E},m.yield(Oi.POST(n+"/"+a,I),2);K=m.yieldResult;if(K.error)return m.return(K);P=K;N=P.token;
aa=Oi.jwtTokenDecode(N);D=aa.roles;y=aa.createdAt;v=aa.email;Object.assign(q,{roles:D,createdAt:y,email:v,token:N});return m.return({status:K.status})})}},{key:"verify",value:function(){var a=this,e,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(Oi.POST(a.realm+"/verify",{token:a.token}),2);e=q.yieldResult;n=e.error;return q.return(!n)})}},{key:"login",value:function(a){return this.loginOrRegister("login",a,this.realm)}},{key:"register",value:function(a){return this.loginOrRegister("register",
a,this.realm)}},{key:"checkPassword",value:function(a){var e=this,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){if(!e.isLoggedIn)throw Error("To check password, user needs to login.");return v.yield(Oi.POST(e.realm+"/check-password",{token:e.token,password:a}),2)}n=v.yieldResult;q=n.error;r=n.status;if(q)throw Error(q);return v.return(r)})}},{key:"modify",value:function(a){var e=this,n,q,r,v,y,D,E,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(K){if(1==
K.nextAddress)return K.yield(Oi.POST(e.realm+"/modify",{token:e.token,changes:a}),2);n=K.yieldResult;q=n.error;r=n.status;v=n.token;if(q)return K.return({error:q});v&&(y=Oi.jwtTokenDecode(v),D=y.roles,E=y.createdAt,I=y.email,Object.assign(e,{roles:D,createdAt:E,email:I,token:v}));return K.return({status:r})})}},{key:"getDir",value:function(){return Oi.resource(System.baseURL).join("users").join(this.name)}},{key:"toString",value:function(){return"<"+this.constructor.name+" "+this.name+" "+(this.isLoggedIn()?
"":"not ")+"logged in>"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"User"}},{key:"guest",get:function(){return Oi.guestUser}},{key:"named",value:function(a,e){var n=a+"-"+e,q=Oi.userMap.get(n);q||(q=new this(a,e),Oi.userMap.set(n,q));return q}},{key:"fromToken",value:function(a,e){var n=Oi.jwtTokenDecode(a),q=n.roles,r=n.createdAt,v=n.email;return Object.assign(this.named(n.name,e),{roles:q,createdAt:r,email:v,token:a})}},{key:"clearCache",value:function(){Oi.userMap=new Map}}],
d,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:1106,end:3681})}(void 0));Oi.User=Tv;Oi.User=Tv;Oi.User=Tv;var Uv=function(b){var d=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),h=d.hasOwnProperty("GuestUser")&&"function"===typeof d.GuestUser?d.GuestUser:d.GuestUser=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"isGuestUser",get:function(){return!0}},{key:"isLoggedIn",value:function(){return!1}},{key:"loginOrRegister",value:function(a,e,n){return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){throw Error("Guest user cannot "+a+"!");})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GuestUser"}}],d,{pathInPackage:function(){return"client/user.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:3690,end:3918})}(Oi.User);Oi.GuestUser=Uv;Oi.GuestUser=Uv;Oi.GuestUser=Uv;Oi.userMap=Oi.userMap||new Map;Oi.guestUser=Oi.guestUser||Oi.GuestUser.named("guest-"+Oi.guid(),null);var yp=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js");yp.User=Tv;yp.GuestUser=Uv;yp.emit=
Rq;var NU=function(b){var d=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js"),h=d.hasOwnProperty("UserRegistry")&&"function"===typeof d.UserRegistry?d.UserRegistry:d.UserRegistry=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"isTrackingGuestUsers",get:function(){return!1}},{key:"hasUserStored",value:function(){try{return!!localStorage["lively.user"]||!!sessionStorage["lively.user"]}catch(a){return!1}}},
{key:"login",value:function(a,e){var n=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return a.isGuestUser?v.jumpTo(2):v.yield(a.login(e),3);if(2!=v.nextAddress&&(q=v.yieldResult,r=q.error))throw Error(r);n.saveUserToLocalStorage(a);return v.return(a)})}},{key:"logout",value:function(a){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){try{e.isTrackingGuestUsers||(delete localStorage["lively.user"],delete sessionStorage["lively.user"])}catch(q){}a=
a&&a.isGuestUser?a:yp.User.guest;yp.emit("lively.user/userchanged",{user:a},Date.now(),System);return n.return(a)})}},{key:"register",value:function(a,e){var n=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){if(!a||a.isGuestUser)throw Error("guest users cannot register");return v.yield(a.register(e),2)}q=v.yieldResult;if(r=q.error)throw Error(r);n.saveUserToLocalStorage(a);return v.return(a)})}},{key:"loadUserFromLocalStorage",value:function(a){try{var e=
localStorage["lively.user"]||sessionStorage["lively.user"];if(e)return e=JSON.parse(e),e.isGuest?yp.GuestUser.named(e.name,null):yp.User.fromToken(e.token,a)}catch(n){console.warn("Could not read user from localStorage: "+n)}return this.isTrackingGuestUsers?!1:yp.GuestUser.guest}},{key:"saveUserToLocalStorage",value:function(a){if(!a||!a.isGuestUser&&!a.token)return!1;yp.emit("lively.user/userchanged",{user:a},Date.now(),System);try{return a.isGuestUser&&!this.isTrackingGuestUsers?(sessionStorage["lively.user"]=
JSON.stringify({isGuest:!0,name:a.name}),delete localStorage["lively.user"]):localStorage["lively.user"]=a.isGuestUser&&this.isTrackingGuestUsers?JSON.stringify({isGuest:!0,name:a.name}):JSON.stringify({token:a.token}),!0}catch(e){return console.warn("Could not save user into local/sessionStorage: "+e),!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"UserRegistry"}},{key:"current",get:function(){return this._current||(this._current=new this)}}],d,{pathInPackage:function(){return"client/user-registry.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:135,end:2531})}(void 0);NU=yp.UserRegistry;var RK=Ka("U",NU);yp.default=NU;var $y=lively.FreezerRuntime.recorderFor("lively.user/index.js");$y.User=Tv;$y.ClientUser=Tv;$y.GuestUser=Uv;$y.GuestUser=Uv;$y.default=RK;$y.UserRegistry=RK;var Swa=Object.freeze({__proto__:null,ClientUser:Tv,GuestUser:Uv,
UserRegistry:RK}),zf=lively.FreezerRuntime.recorderFor("lively.morphic/world.js");zf.bowser=qo;zf.Rectangle=ie;zf.Color=If;zf.pt=xh;zf.arr=cf;zf.promise=bg;zf.Path=Eg;zf.obj=xf;zf.signal=Jk;zf.config=Yk;zf.MorphicEnv=go;zf.Morph=xj;zf.TooltipViewer=Zy;zf.Tooltip=Qv;zf.loadWorldFromURL=bI;zf.loadWorldFromDB=dI;zf.loadWorldFromCommit=cI;zf.loadWorld=eI;zf.touchInputDevice=qm;zf.UserRegistry=RK;zf.emit=Rq;zf.resource=Uc;zf.loadMorphFromSnapshot=bq;var vr=Ka("ah",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),
h=d.hasOwnProperty("World")&&"function"===typeof d.World?d.World:d.World=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){ac._get(Object.getPrototypeOf(h.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._renderer=null;this._tooltipViewer=new zf.TooltipViewer(this)}},{key:"__deserialize__",value:function(a,e,n,q){ac._get(Object.getPrototypeOf(h.prototype),
"__deserialize__",this).call(this,a,e,n,q);this._renderer=null;this._tooltipViewer=new zf.TooltipViewer(this)}},{key:"__additionally_serialize__",value:function(a,e,n,q){ac._get(Object.getPrototypeOf(h.prototype),"__additionally_serialize__",this).call(this,a,e,n,q);if(a.props.submorphs)for(a=a.props.submorphs.value,e=a.length;e--;)n.refForId(a[e].id).realObj.isHand&&zf.arr.removeAt(a,e)}},{key:"commands",get:function(){return[].concat($jscomp.arrayFromIterable(ac._get(Object.getPrototypeOf(h.prototype),
"commands",this)),[{name:"resize to fit window",exec:function(a){var e,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:e=function(){a.extent=lively.FreezerRuntime?a.windowBounds().extent():a.windowBounds().union(a.submorphBounds(function(y){return!y.isEpiMorph&&!y.hasFixedPosition})).extent()},n=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(a.whenRendered(),2);delete a._cachedWindowBounds;
return y.return(!a.windowBounds().extent().equals(a.extent))})},q=0;case 2:if(!(r=5>q)){v.jumpTo(4);break}return v.yield(n(),5);case 5:r=v.yieldResult;case 4:if(!r){v.jumpTo(3);break}q++;e();v.jumpTo(2);break;case 3:return a.relayout(),v.return(!0)}})}}])}},{key:"isWorld",get:function(){return!0}},{key:"whenReady",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.return(!0)})}},{key:"render",value:function(a){return a.renderWorld(this)}},{key:"grabbable",get:function(){return!1}},
{key:"grabbable",set:function(a){}},{key:"existingHandForPointerId",value:function(a){return this.submorphs.find(function(e){return e instanceof zf.Hand&&e.pointerId===a})}},{key:"layoutHaloForPointerId",value:function(a){}},{key:"haloForPointerId",value:function(a){}},{key:"handForPointerId",value:function(a,e){e=void 0===e?!1:e;var n=this.existingHandForPointerId(a);return n?n:!n&&this.firstHand&&e?(this.firstHand.pointerId=a,this.firstHand):this.addMorph(new zf.Hand(a),this.submorphs[0])}},{key:"removeHandForPointerId",
value:function(a){(a=this.existingHandForPointerId(a))&&1<this.hands.length&&a.remove()}},{key:"world",value:function(){return this}},{key:"makeDirty",value:function(){if(!this._dirty){this._dirty=!0;var a=this.env.renderer;a&&a.renderLater()}}},{key:"hands",get:function(){return zf.arr.sortBy(this.submorphs.filter(function(a){return a.isHand}),function(a){return a.pointerId})}},{key:"firstHand",get:function(){return this.hands[0]}},{key:"getCurrentUser",value:function(){return zf.UserRegistry.current.loadUserFromLocalStorage(window.AUTH_SERVER_URL||
zf.config.users.authServerURL)}},{key:"focusedMorph",get:function(){var a=this.env.eventDispatcher;return(a=a&&a.eventState.focusedMorph)&&a.world()===this?a:this}},{key:"onMouseMove",value:function(a){a.hand&&a.hand.update(a);this._tooltipViewer.mouseMove(a)}},{key:"onHoverOut",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onHoverOut",this).call(this,a);if(a.state.draggedMorph){var e=a.state;e.dragDelta=(e.draggedMorph.owner||this).getInverseTransform().transformDirection(a.position.subPt(e.lastDragPosition));
e.absDragDelta=a.position.subPt(e.clickedOnPosition);a.onAfterDispatch(function(){return e.lastDragPosition=a.position});a.state.draggedMorph.onDrag(a)}}},{key:"onMouseDown",value:function(a){a.state.menu&&a.state.menu.remove();this.onWindowScroll();this._tooltipViewer.mouseDown(a)}},{key:"onMouseUp",value:function(a){a.isCommandKey()&&a.stop();if(a.isAltDown()&&zf.config.altClickDefinesThat){var e=this.morphsContainingPoint(a.position)[0];setTimeout(function(){return System.global.that=e},100);e.show();
a.stop();console.log('Set global "that" to '+e)}}},{key:"onMouseWheel",value:function(a){a.isShiftDown()&&(window.scrollBy(-a.domEvt.wheelDeltaX,-a.domEvt.wheelDeltaY),a.stop())}},{key:"onBeforeUnload",value:function(a){return this.onUnload(a)}},{key:"onUnload",value:function(a){this.submorphs.forEach(function(e){if("function"===typeof e.onWorldUnload)e.onWorldUnload(a)})}},{key:"updateVisibleWindowMorphs",value:function(){this.withAllSubmorphsDo(function(a){if(a.respondsToVisibleWindow){if("function"!==
typeof a.relayout)return a.showError(Error(a+" listed as responding to visible window change, but has no relayout instruction"));a.relayout()}})}},{key:"onWindowScroll",value:function(){var a=this.env.eventDispatcher.keyInputHelper.inputState,e=a.positionChangedTime,n=a.scrollLeftWhenChanged;a=a.scrollTopWhenChanged;var q=document.documentElement;500>Date.now()-e&&!zf.bowser.firefox?(q.scrollLeft=n,q.scrollTop=a):(this.setProperty("scroll",zf.pt(q.scrollLeft,q.scrollTop)),this._cachedWindowBounds=
null,this.updateVisibleWindowMorphs())}},{key:"onWindowResize",value:function(a){var e=this,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(e.whenRendered(),2);if(3!=v.nextAddress)return e._cachedWindowBounds=null,"elastic"!==e.resizePolicy?v.jumpTo(3):v.yield(e.execCommand("resize to fit window"),3);e.updateVisibleWindowMorphs();n=$jscomp.makeIterator(e.submorphs);for(q=n.next();!q.done;q=n.next())if(r=q.value,"function"===typeof r.onWorldResize)r.onWorldResize(a);
v.jumpToEnd()})}},{key:"relayCommandExecutionToFocusedMorph",value:function(a){if(!a)return null;var e=this.focusedMorph,n=zf.arr.findAndGet(zf.arr.without([e].concat($jscomp.arrayFromIterable(e.ownerChain())),this),function(q){return zf.arr.findAndGet(q.keyhandlers,function(r){return(r=r.eventCommandLookup(q,a))?{command:r,morph:q}:null})})||{};e=n.command;n=n.morph;return e?n.execCommand(e):null}},{key:"visibleBounds",value:function(){return this.env.renderer?this.windowBounds().intersection(this.innerBounds()):
this.innerBounds()}},{key:"visibleBoundsExcludingTopBar",value:function(){return this.visibleBounds()}},{key:"windowBounds",value:function(a){if(this._cachedWindowBounds)return this._cachedWindowBounds;a=this.env.domEnv.window;var e=1/this.scale;return this._cachedWindowBounds=new zf.Rectangle(a.scrollX*e,a.scrollY*e,(a.innerWidth||this.width)*e,(a.innerHeight||this.height)*e)}},{key:"logError",value:function(a){console.log(a)}},{key:"relayout",value:function(){}},{key:"defaultMenuItems",value:function(a){return[]}},
{key:"serveFileAsDownload",value:function(a,e){var n=void 0===e?{}:e;e=void 0===n.fileName?"file.txt":n.fileName;n=void 0===n.type?"text/plain":n.type;var q=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+=[a-z\-]+)?)?(;base64)?,[a-z0-9!\$&',\(\)\*\+,;=\-\._~:@\/\?%\s]*\s*$/i,r=a instanceof Blob,v=window.document.createElement("a");v.href=zf.obj.isString(a)&&a.match(q)?a:window.URL.createObjectURL(r?a:new Blob([a],{type:n}));v.download=e;document.body.appendChild(v);v.click();document.body.removeChild(v)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"World"}},{key:"properties",get:function(){return{resizePolicy:{doc:"how the world behaves on window size changes 'elastic': resizes to window extent, 'static': leaves its extent unchanged",defaultValue:"elastic",after:["clipMode"],type:"Enum",values:["static","elastic"],set:function(a){this.setProperty("resizePolicy",a);this.clipMode="static"===a?"visible":"hidden";"elastic"==a&&this.execCommand("resize to fit window")}},colorScheme:{derived:!0,get:function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?
"dark":"light"}},showsUserFlap:{defaultValue:!0,set:function(a){var e=this,n=zf.resource(document.location.href).query().showsUserFlap;"undefined"!==typeof n&&(a=n);this.setProperty("showsUserFlap",a);System.import("lively.user/morphic/user-ui.js").then(function(q){return q.UserUI[a?"showUserFlap":"hideUserFlap"](e).then(function(){a&&(e.enableComments=!0)})})}},enableComments:{defaultValue:!0,set:function(a){this.setProperty("enableComments",a);a&&System.import("lively.collab").then(function(e){return e.CommentBrowser.initializeCommentBrowser()})}}}}},
{key:"defaultWorld",value:function(){return zf.MorphicEnv.default().world}},{key:"loadWorldFromURL",value:function(a,e,n){e=void 0===e?this.defaultWorld():e;n=void 0===n?{}:n;return zf.loadWorldFromURL(a,e,n)}},{key:"loadWorld",value:function(a,e,n){e=void 0===e?this.defaultWorld():e;n=void 0===n?{}:n;return zf.loadWorld(a,e,n)}},{key:"loadFromCommit",value:function(a,e,n){e=void 0===e?this.defaultWorld():e;n=void 0===n?{}:n;return zf.loadWorldFromCommit(a,e,n)}},{key:"loadFromDB",value:function(a,
e,n,q){n=void 0===n?this.defaultWorld():n;q=void 0===q?{}:q;return zf.loadWorldFromDB(a,e,n,q)}},{key:"loadFromResource",value:function(a,e,n){e=void 0===e?this.defaultWorld():e;n=void 0===n?{}:n;var q,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){switch(D.nextAddress){case 1:return q=zf,r=q.loadWorld,v=zf,y=v.loadMorphFromSnapshot,D.yield(a.readJson(),4);case 4:return D.yield(y.call(v,D.yieldResult),3);case 3:return D.yield(r.call(q,D.yieldResult,e,n),2);case 2:return D.return(D.yieldResult)}})}}],
d,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:774,end:12867})}(zf.Morph));zf.World=vr;zf.World=vr;zf.World=vr;var az=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),h=d.hasOwnProperty("Hand")&&"function"===typeof d.Hand?d.Hand:d.Hand=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){ac._get(Object.getPrototypeOf(h.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{pointerId:a})}},{key:"__deserialize__",value:function(a,e,n,q){ac._get(Object.getPrototypeOf(h.prototype),"__deserialize__",this).call(this,a,e,n,q);this.reset()}},{key:"reset",value:function(){this._grabbedMorphProperties=new WeakMap}},{key:"carriesMorphs",
value:function(){return!!this.grabbedMorphs.length}},{key:"morphsContainingPoint",value:function(a,e){return e}},{key:"update",value:function(a){this.position=a.position.subXY(window.scrollX,window.scrollY)}},{key:"cancelGrab",value:function(a,e){a=void 0===a?!0:a;var n=this,q,r,v,y,D,E,I,K,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(!n.grabbedMorphs.length)return N.return();n.env.eventDispatcher.cancelGrab(n,e);q=[];r=$jscomp.makeIterator(n.grabbedMorphs);for(v=r.next();!v.done;v=
r.next())y=v.value,D=n._grabbedMorphProperties.get(y)||{},E=D.prevOwner,I=D.prevIndex,K=D.prevPosition,P=D.pointerAndShadow,Object.assign(y,P),E?(E.addMorphAt(y,I),a?q.push(y.animate({position:K})):y.position=K):y.remove();return N.return(q.length?Promise.all(q):null)})}},{key:"grab",value:function(a){var e=this;if(zf.obj.isArray(a))return a.forEach(function(n){return e.grab(n)});this.withMetaDo({metaInteraction:!0},function(){e._grabbedMorphProperties.set(a,{prevOwner:a.owner,prevPosition:a.position,
prevIndex:a.owner?a.owner.submorphs.indexOf(a):-1,pointerAndShadow:zf.obj.select(a,["dropShadow","reactsToPointer"])});a.reactsToPointer=!1;a.dropShadow=!0;e.addMorph(a)});zf.signal(this,"grab",a)}},{key:"dropMorphsOn",value:function(a){var e=this;this.withMetaDo({metaInteraction:!0},function(){e.grabbedMorphs.forEach(function(n){try{var q=(e._grabbedMorphProperties.get(n)||{}).pointerAndShadow;Object.assign(n,q);zf.signal(e,"drop",n);n.onBeingDroppedOn(e,a)}catch(r){console.error(r),e.world().showError("Error dropping "+
n+" onto "+a+":\n"+r.stack),n.owner!==a&&e.world().addMorph(a)}})})}},{key:"findDropTarget",value:function(a,e,n){var q=this;a=void 0===a?this.globalPosition:a;e=void 0===e?this.grabbedMorphs:e;a=this.world().morphsContainingPoint(a);return zf.arr.sortBy(a,function(r){return[r].concat($jscomp.arrayFromIterable(r.ownerChain())).find(function(v){return zf.Path("owner.isWorld").get(v)&&v.hasFixedPosition})?0:1}).find("function"===typeof n?function(r,v){return!q.isAncestorOf(r)&&r.acceptsDrops&&!e.includes(r)&&
e.every(function(y){return y.wantsToBeDroppedOn(r)})&&n(r,v)}:function(r){return!q.isAncestorOf(r)&&r.acceptsDrops&&r.ownerChain().every(function(v){return v.visible})&&e.every(function(v){return v.wantsToBeDroppedOn(r)})})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Hand"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},fill:{defaultValue:zf.touchInputDevice?zf.Color.transparent:zf.Color.orange},extent:{defaultValue:zf.pt(1,1)},reactsToPointer:{defaultValue:!1},
pointerId:{},isHand:{readOnly:!0,get:function(){return!0}},draggable:{readOnly:!0,get:function(){return!1}},grabbable:{readOnly:!0,get:function(){return!1}},grabbedMorphs:{readOnly:!0,get:function(){return this.submorphs}},_grabbedMorphProperties:{serialize:!1,initialize:function(){this._grabbedMorphProperties=new WeakMap}}}}}],d,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:12876,end:16942})}(zf.Morph);zf.Hand=az;zf.Hand=az;zf.Hand=az;var Twa=Object.freeze({__proto__:null,World:vr,Hand:az}),Oj=lively.FreezerRuntime.recorderFor("lively.morphic/text/position.js");Oj.comparePosition=uR;Oj.lessPosition=eq;Oj.lessEqPosition=jy;Oj.eqPosition=fq;Oj.minPosition=ky;Oj.maxPosition=ly;Oj.comparePosition=uR;Oj.comparePosition=uR;Oj.lessPosition=eq;Oj.lessPosition=eq;Oj.lessEqPosition=jy;Oj.lessEqPosition=
jy;Oj.eqPosition=fq;Oj.eqPosition=fq;Oj.minPosition=ky;Oj.minPosition=ky;Oj.maxPosition=ly;Oj.maxPosition=ly;var og=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js");og.lessPosition=eq;og.lessEqPosition=jy;og.eqPosition=fq;og.minPosition=ky;og.maxPosition=ly;var wt=Ka("bx",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js"),h=d.hasOwnProperty("Range")&&"function"===typeof d.Range?d.Range:d.Range=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var e=a=void 0===a?{start:{row:0,column:0},end:{row:0,column:0}}:a,n=e.start;a=n.row;n=n.column;var q=e.end;e=q.row;q=q.column;if(e<a||e===a&&q<n)n=$jscomp.makeIterator([a,n,e,q]),e=n.next().value,q=n.next().value,a=n.next().value,n=n.next().value;this.start={row:a,column:n};this.end={row:e,column:q}}},{key:"isRange",get:function(){return!0}},{key:"isEmpty",
value:function(){return this.start.row===this.end.row&&this.start.column===this.end.column}},{key:"equals",value:function(a){return a&&a.start&&a.end?og.eqPosition(this.start,a.start)&&og.eqPosition(this.end,a.end):!1}},{key:"copy",value:function(){return new og.Range(this)}},{key:"toLiteral",value:function(){return{start:this.start,end:this.end}}},{key:"merge",value:function(a){a.isRange||(a=new og.Range(a));return og.lessPosition(this.end,a.start)||og.lessPosition(a.end,this.start)?this:og.Range.fromPositions(og.minPosition(this.start,
a.start),og.maxPosition(this.end,a.end))}},{key:"without",value:function(a){a.isRange||(a=new og.Range(a));var e=og.Range.compare(this,a);return 0===e?og.Range.fromPositions(this.start,this.start):5<=Math.abs(e)?this:0>e?og.Range.fromPositions(this.start,a.start):og.Range.fromPositions(a.end,this.end)}},{key:"intersect",value:function(a){a.isRange||(a=new og.Range(a));var e=og.Range.compare(this,a),n=0>e?this:a;a=0>e?a:this;switch(Math.abs(e)){case 0:case 1:return new og.Range(n);case 2:case 3:return new og.Range(a);
case 4:return og.Range.fromPositions(a.start,n.end);case 5:return og.Range.at(a.start);case 6:return og.Range.at(n.end)}}},{key:"subtract",value:function(a){a.isRange||(a=new og.Range(a));switch(og.Range.compare(this,a)){case -6:case -5:case 5:case 6:return[new og.Range(this)];case -1:case 0:case 2:case 3:return[og.Range.at(this.start)];case 1:case 4:return[og.Range.fromPositions(a.end,this.end)];case -4:case -3:return[og.Range.fromPositions(this.start,a.start)];case -2:return[og.Range.fromPositions(this.start,
a.start),og.Range.fromPositions(a.end,this.end)]}}},{key:"containsPosition",value:function(a){return og.lessEqPosition(this.start,a)&&og.lessEqPosition(a,this.end)}},{key:"toString",value:function(){var a=this.start,e=this.end;return"Range("+a.row+"/"+a.column+" -> "+e.row+"/"+e.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Range"}},{key:"sort",value:function(a){return a.sort(og.Range.compare)}},{key:"compare",value:function(a,e){var n=a.start,q=a.end,r=e.start,v=e.end;
return og.lessPosition(n,r)?og.lessPosition(q,r)?-6:og.eqPosition(q,r)?-5:og.lessPosition(q,v)?-4:og.eqPosition(q,v)?-3:-2:og.eqPosition(n,r)?og.eqPosition(q,v)?0:og.lessPosition(q,v)?-1:1:-1*og.Range.compare(e,a)}},{key:"at",value:function(a){return new this({start:a,end:a})}},{key:"fromPositions",value:function(a,e){return new this({start:a,end:e})}},{key:"create",value:function(a,e,n,q){return new this({start:{row:a,column:e},end:{row:n,column:q}})}},{key:"isValidLiteral",value:function(a){return a?
a.isRange?!0:a.start&&a.end&&"number"===typeof a.start.row&&"number"===typeof a.start.column&&"number"===typeof a.end.row&&"number"===typeof a.end.column:!1}}],d,{pathInPackage:function(){return"text/range.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:108,end:5369})}(void 0));og.Range=wt;og.Range=wt;og.Range=wt;var SK=new og.Range;
og.defaultRange=SK;og.defaultRange=SK;og.defaultRange=SK;var dj=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js");dj.lessPosition=eq;dj.Range=wt;dj.defaultRange=SK;dj.config=Yk;dj.string=Ng;dj.arr=cf;dj.signal=Jk;var TK=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),h=d.hasOwnProperty("Selection")&&"function"===typeof d.Selection?d.Selection:d.Selection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,e){this.textMorph=a;this.initialize(e)}},{key:"isSelection",get:function(){return!0}},{key:"initialize",value:function(a){this._goalX=this._goalColumn=void 0;this._isReverse=!1;var e=dj.string.newUUID();this.startAnchor=this.textMorph.addAnchor("selection-start-"+e);this.endAnchor=this.textMorph.addAnchor("selection-end-"+e);this.range=a;this._cursorVisible=!0;this.cursorBlinkProcess=null}},{key:"isSelection",
get:function(){return!0}},{key:"uninstall",value:function(){this.cursorBlinkStop();this.textMorph.removeAnchor(this.startAnchor);this.textMorph.removeAnchor(this.endAnchor)}},{key:"compareRangesForMerge",value:function(a,e){var n=a.start,q=n.row;n=n.column;var r=a.end,v=r.row;r=r.column;var y=e.start,D=y.row;y=y.column;var E=e.end,I=E.row;E=E.column;return q<D||q===D&&n<y?v<D||v===D&&r<y?"separate":v===D&&r===y?D===I&&y===E?"overlapping":"bordering":"overlapping":q===D&&n===y?v===I&&r===E?"equal":
"overlapping":this.compareRangesForMerge(e,a)}},{key:"mergeWith",value:function(a){if(!a||!a.isSelection)return!1;var e=this.compareRangesForMerge(this.range,a.range);if("separate"===e||"bordering"===e)return!1;this.range=this.range.merge(a.range);a.isReverse()!=this.isReverse()&&this.reverse();return!0}},{key:"range",get:function(){return this._range||dj.defaultRange}},{key:"range",set:function(a){if(a){var e=a,n=e.start;e=e.end;if(void 0!==n&&void 0!==e){var q=this.textMorph.document;"number"===
typeof n&&(a.start=n=q.indexToPosition(n));"number"===typeof e&&(a.end=e=q.indexToPosition(e));if(dj.Range.isValidLiteral(a)){n=q.clipPositionToLines(n);e=q.clipPositionToLines(e);if(this._isReverse=dj.lessPosition(e,n))e=$jscomp.makeIterator([e,n]),n=e.next().value,e=e.next().value;a.start=n;a.end=e;a.isRange||(a=new dj.Range(a));a.equals(this._range)||(this._range=a,this._goalColumn=this.textMorph.lineWrapping?this.textMorph.columnInWrappedLine(this.lead):this.lead.column,this._goalX=this.textMorph.charBoundsFromTextPosition(this.lead).x,
this.startAnchor.position=a.start,this.endAnchor.position=a.end,this.textMorph.makeDirty(),dj.signal(this.textMorph,"selectionChange",this))}}}}},{key:"directedRange",get:function(){return{end:this.lead,start:this.anchor}}},{key:"updateFromAnchors",value:function(){this.range={start:this.startAnchor.position,end:this.endAnchor.position}}},{key:"start",get:function(){return this.range.start}},{key:"start",set:function(a){this.range=dj.Range.fromPositions(a,this.end)}},{key:"end",get:function(){return this.range.end}},
{key:"end",set:function(a){this.range=dj.Range.fromPositions(this.start,a)}},{key:"selectionColor",get:function(){return this.textMorph.selectionColor||"#bed8f7"}},{key:"anchor",get:function(){return this.isReverse()?this.range.end:this.range.start}},{key:"anchor",set:function(a){this.range={start:a,end:this.lead}}},{key:"lead",get:function(){return this.isReverse()?this.range.start:this.range.end}},{key:"lead",set:function(a){this.range={start:this.anchor,end:a}}},{key:"text",get:function(){return this.textMorph.document.textInRange(this.range)}},
{key:"text",set:function(a){this.replace(a)}},{key:"replace",value:function(a,e,n,q){var r=this.range,v=this.textMorph,y=this.isReverse();this.range=v.replace(r,a,e,n,q);y&&this.reverse();return this.range}},{key:"selectedRows",get:function(){return{first:this.start.row,last:this.end.row}}},{key:"reverse",value:function(){this._isReverse=!this.isEmpty()&&!this._isReverse;return this}},{key:"isReverse",value:function(){return this._isReverse&&!this.isEmpty()}},{key:"isEmpty",value:function(){return this.range.isEmpty()}},
{key:"collapse",value:function(a){a=void 0===a?this.start:a;this.range={start:a,end:a};return this}},{key:"collapseToEnd",value:function(){this.collapse(this.end);return this}},{key:"growLeft",value:function(a){var e=this.textMorph.document,n=e.positionToIndex(this.end);a=Math.min(n,e.positionToIndex(this.start)-a);n=this.isReverse();this.start=e.indexToPosition(a);this._isReverse=n;return this}},{key:"growRight",value:function(a){var e=this.textMorph.document,n=e.positionToIndex(this.start);a=Math.max(n,
e.positionToIndex(this.end)+a);n=this.isReverse();this.end=e.indexToPosition(a);this._isReverse=n;return this}},{key:"selectAll",value:function(){this.range={start:{row:0,column:0},end:this.textMorph.document.endPosition};return this}},{key:"selectLine",value:function(a,e){a=void 0===a?this.lead.row:a;this.includingLineEnd=void 0===e?!1:e;this.range={start:{row:a,column:0},end:{row:a,column:this.textMorph.getLine(a).length}};return this}},{key:"gotoLineEnd",value:function(a){a=void 0===a?this.lead.row:
a;a={row:a,column:this.textMorph.getLine(a).length};this.range={start:a,end:a}}},{key:"selectLeft",value:function(a){a=void 0===a?1:a;this.isEmpty()?(this.growLeft(a),this.reverse()):this.isReverse()?this.growLeft(a):this.growRight(-a);return this}},{key:"selectRight",value:function(a){a=void 0===a?1:a;this.isReverse()?this.growLeft(-a):this.growRight(a);return this}},{key:"selectUp",value:function(a,e){return this.goUp(void 0===a?1:a,e,!0)}},{key:"selectDown",value:function(a,e){return this.selectUp(-(void 0===
a?1:a),e)}},{key:"goUp",value:function(a,e,n){a=void 0===a?1:a;n=void 0===n?!1:n;if(0===a)return this;var q=this._goalColumn,r=this._goalX;this.lead=this.textMorph.getPositionAboveOrBelow(a,this.lead,void 0===e?!1:e,q,r);n||(this.anchor=this.lead);this._goalColumn=q;this._goalX=r;return this}},{key:"goDown",value:function(a,e){return this.goUp(-(void 0===a?1:a),e)}},{key:"goLeft",value:function(a){a=void 0===a?1:a;this.isEmpty()&&this.growLeft(a);this.collapse();return this}},{key:"goRight",value:function(a){a=
void 0===a?1:a;this.isEmpty()&&this.growRight(a);this.collapseToEnd();return this}},{key:"cursorVisible",get:function(){return this._cursorVisible&&this.textMorph.isFocused()&&!this.textMorph.rejectsInput()}},{key:"cursorBlinkStart",value:function(){var a=this;this.cursorBlinkStop();var e=dj.config.text.cursorBlinkPeriod;if(e){var n=this.textMorph,q=n.env.renderer.getNodeForMorph(n);this.cursorBlinkProcess=setInterval(function(){q||(q=n.env.renderer.getNodeForMorph(n));if(q){a._cursorVisible=!a._cursorVisible;
var r=q.className.split(" "),v=r.indexOf("hidden-cursor");a._cursorVisible&&-1<v&&(r.splice(v,1),q.className=r.join(" "));a._cursorVisible||-1!==v||(q.className=[].concat($jscomp.arrayFromIterable(r),["hidden-cursor"]).join(" "))}},1E3*e)}}},{key:"cursorBlinkStop",value:function(){this.cursorBlinkProcess&&clearInterval(this.cursorBlinkProcess);this.cursorBlinkProcess=null;this._cursorVisible=!0;var a=this.textMorph;if(a=a.env.renderer.getNodeForMorph(a)){var e=a.className.split(" "),n=e.indexOf("hidden-cursor");
-1<n&&(e.splice(n,1),a.className=e.join(" "))}}},{key:"toString",value:function(){var a=this.anchor,e=this.lead;return"Selection("+a.row+"/"+a.column+" -> "+e.row+"/"+e.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Selection"}}],d,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:224,end:9224})}(void 0);dj.Selection=TK;dj.Selection=TK;dj.Selection=TK;var UK=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),h=d.hasOwnProperty("MultiSelection")&&"function"===typeof d.MultiSelection?d.MultiSelection:d.MultiSelection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"initialize",value:function(a){this._selections=[new dj.Selection(this.textMorph,
a)]}},{key:"__deserialize__",value:function(a,e){this._selections=[]}},{key:"selections",get:function(){return this._selections}},{key:"selections",set:function(a){var e=this._selections?this._selections.filter(function(n){return!a.includes(n)}):[];this._selections=a;e.forEach(function(n){return n.uninstall()})}},{key:"isMultiSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.selections.forEach(function(a){return a.uninstall()})}},{key:"defaultSelection",get:function(){return dj.arr.last(this.selections)}},
{key:"removeSelections",value:function(a){a=this.selections.slice(void 0===a?1:a);a.forEach(function(e){return e.uninstall()});this.selections=dj.arr.withoutAll(this.selections,a)}},{key:"disableMultiSelect",value:function(){dj.arr.without(this.selections,this.defaultSelection).forEach(function(a){return a.uninstall()});this.selections=[this.defaultSelection]}},{key:"range",get:function(){return this.defaultSelection.range}},{key:"range",set:function(a){this.disableMultiSelect();this.defaultSelection.range=
a}},{key:"updateFromAnchors",value:function(){this.selections.forEach(function(a){return a.updateFromAnchors()})}},{key:"start",get:function(){return this.defaultSelection.start}},{key:"start",set:function(a){this.defaultSelection.start=a}},{key:"end",get:function(){return this.defaultSelection.end}},{key:"end",set:function(a){this.defaultSelection.end=a}},{key:"anchor",get:function(){return this.defaultSelection.anchor}},{key:"anchor",set:function(a){this.defaultSelection.anchor=a}},{key:"lead",
get:function(){return this.defaultSelection.lead}},{key:"lead",set:function(a){this.defaultSelection.lead=a}},{key:"text",get:function(){return this.selections.map(function(a){return a.text}).join("\n")}},{key:"text",set:function(a){this.selections.forEach(function(e){return e.text=a})}},{key:"selectedRows",get:function(){return this.defaultSelection.selectedRows}},{key:"reverse",value:function(){this.defaultSelection.reverse()}},{key:"isReverse",value:function(){return this.defaultSelection.isReverse()}},
{key:"isEmpty",value:function(){return this.defaultSelection.isEmpty()}},{key:"collapse",value:function(a){this.defaultSelection.collapse(a);return this}},{key:"collapseToEnd",value:function(){this.defaultSelection.collapseToEnd();return this}},{key:"growLeft",value:function(a){this.defaultSelection.growLeft(a);return this}},{key:"growRight",value:function(a){this.defaultSelection.growRight(a);return this}},{key:"selectAll",value:function(){this.disableMultiSelect();this.defaultSelection.selectAll();
return this}},{key:"selectLine",value:function(a,e){this.includingLineEnd=e;this.defaultSelection.selectLine(a,e);return this}},{key:"gotoLineEnd",value:function(a){this.defaultSelection.gotoLineEnd(a)}},{key:"selectLeft",value:function(a){this.defaultSelection.selectLeft(a);return this}},{key:"selectRight",value:function(a){this.defaultSelection.selectRight(a);return this}},{key:"selectUp",value:function(a,e){this.defaultSelection.selectUp(a,e);return this}},{key:"selectDown",value:function(a,e){this.defaultSelection.selectDown(a,
e);return this}},{key:"goUp",value:function(a,e){return this.defaultSelection.goUp(a,e)}},{key:"goDown",value:function(a,e){return this.defaultSelection.goDown(a,e)}},{key:"goLeft",value:function(a){return this.defaultSelection.goLeft(a)}},{key:"goRight",value:function(a){return this.defaultSelection.goRight(a)}},{key:"cursorVisible",get:function(){return this.defaultSelection.cursorVisible}},{key:"style",set:function(a){this.defaultSelection.style=a}},{key:"getTextAttributes",value:function(){return this.defaultSelection.getTextAttributes()}},
{key:"toString",value:function(){return"MultiSelection("+this.selections.join(", ")+")"}},{key:"mergeSelections",value:function(){for(var a=this.selections.slice(),e=a.length-1;0<=e;e--)for(var n=a.length-1;0<=n;n--)if(e!==n&&a[n].mergeWith(a[e])){a.splice(e,1);break}this.selections=a}},{key:"ranges",get:function(){return this.selections.map(function(a){return a.range})}},{key:"ranges",set:function(a){for(var e=0;e<a.length;e++){var n=this.selections[e];n?n.range=a[e]:this.addRange(a[e],!1)}this.removeSelections(e);
this.mergeSelections()}},{key:"addRange",value:function(a,e){e=void 0===e?!0:e;this.selections.push(new dj.Selection(this.textMorph,a));e&&this.mergeSelections();return dj.arr.last(this.selections).range}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelection"}}],d,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:9233,end:13901})}(dj.Selection);dj.MultiSelection=UK;dj.MultiSelection=UK;dj.MultiSelection=UK;var Kg=lively.FreezerRuntime.recorderFor("lively.morphic/text/attributes.js");Kg.shallowEquals=vR;Kg.concatAttributePair=fI;Kg.joinTextAttributes=gI;Kg.splitTextAndAttributesAt=hI;Kg.splitTextAndAttributesAtColumns=iI;Kg.concatTextAndAttributes=jI;Kg.modifyAttributesInRange=kI;Kg.textAndAttributesWithSubRanges=lI;Kg.textAndAttributesDo=function(b,d){for(var h=0;h<b.length;h+=2)d(b[h],
b[h+1])};Kg.splitTextAndAttributesIntoLines=my;Kg.eqPosition=fq;Kg.lessPosition=eq;Kg.shallowEquals=vR;Kg.shallowEquals=vR;Kg.concatAttributePair=fI;Kg.concatAttributePair=fI;Kg.joinTextAttributes=gI;Kg.joinTextAttributes=gI;Kg.splitTextAndAttributesAt=hI;Kg.splitTextAndAttributesAt=hI;Kg.splitTextAndAttributesAtColumns=iI;Kg.splitTextAndAttributesAtColumns=iI;Kg.concatTextAndAttributes=jI;Kg.concatTextAndAttributes=jI;Kg.modifyAttributesInRange=kI;Kg.modifyAttributesInRange=kI;Kg.textAndAttributesWithSubRanges=
lI;Kg.textAndAttributesWithSubRanges=lI;Kg.splitTextAndAttributesIntoLines=my;Kg.splitTextAndAttributesIntoLines=my;var Pd=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js");Pd.arr=cf;Pd.num=jk;Pd.string=Ng;Pd.lessEqPosition=jy;Pd.minPosition=ky;Pd.maxPosition=ly;Pd.lessPosition=eq;Pd.eqPosition=fq;Pd.concatTextAndAttributes=jI;Pd.splitTextAndAttributesAtColumns=iI;Pd.splitTextAndAttributesIntoLines=my;Pd.joinTextAttributes=gI;Pd.modifyAttributesInRange=kI;Pd.concatAttributePair=
fI;Pd.splitTextAndAttributesAt=hI;Pd.objectReplacementChar="\ufffd";Pd.objectReplacementChar="\ufffd";Pd.objectReplacementChar="\ufffd";Pd.defaultOptions={maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5};(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),h=d.hasOwnProperty("TreeNode")&&"function"===typeof d.TreeNode?d.TreeNode:d.TreeNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.parent=a}},{key:"root",get:function(){return this.parent?this.parent.root:this}},{key:"isRoot",get:function(){return!this.parent}},{key:"withParents",value:function(){for(var a=this,e=[];a;)e.push(a),a=a.parent;return e}},{key:"traverse",value:function(a){var e=[a.call(null,this)];if(this.isLeaf)return e;for(var n=0;n<this.children.length;n++)e.push.apply(e,$jscomp.arrayFromIterable(this.children[n].traverse(a)));
return e}},{key:"consistencyCheck",value:function(){var a=[],e=this.isRoot,n=this.isLeaf,q=this.children,r=this.size,v=this.stringSize,y=this.height,D=this.width,E=this.options,I=E.maxLeafSize,K=E.maxNodeSize,P=E.minLeafSize;E=E.minNodeSize;e||0!==r||a.push({error:"size of "+this+" expected to be > 0!"});if(!Array.isArray(q))return a.push({error:this+".children is not an array but "+q}),a;var N=Pd.arr.sum(Pd.arr.pluck(q,"size"));N!=r&&a.push({error:"Sum of child sizes is not size of "+this+": "+N+
" != "+r});r=Pd.arr.sum(Pd.arr.pluck(q,"stringSize"));r!=v&&a.push({error:"Sum of child stringSize is not stringSIze of "+this+": "+r+" != "+v});v=Pd.arr.sum(Pd.arr.pluck(q,"height"));Number.parseInt(v)!=Number.parseInt(y)&&a.push({error:"Sum of child Height is not Height of "+this+": "+v+" != "+y});y=q.length?Math.max.apply(null,Pd.arr.pluck(q,"width")):0;(q.find(function(aa){return aa.isLine&&aa.hasEstimatedExtent})?Number.parseInt(y)>Number.parseInt(D):Number.parseInt(y)!=Number.parseInt(D))&&
a.push({error:"max width of children of "+this+" is not node width: "+y+" != "+D});D=n?I:K;!e&&q.length>D&&a.push({error:"children count of "+this+" expected to be between "+(n?P:E)+" and "+D+" but is "+q.length});for(e=0;e<q.length;e++)(P=q[e])?(n&&!P.isLine?a.push({error:"child "+e+" of leaf "+this+" is not a line!"}):!n&&P.isLine&&a.push({error:"child of non-leaf "+this+" is a line!"}),this!==P.parent&&a.push({error:"child.parent is "+P.parent+" but should be "+this})):a.push({error:"child "+e+
" of "+this+" is nullish!"});a.push.apply(a,$jscomp.arrayFromIterable(Pd.arr.flatmap(q,function(aa){return aa.consistencyCheck()})));return a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TreeNode"}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1422,end:4636})})(void 0);
(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),h=d.hasOwnProperty("InnerTreeNode")&&"function"===typeof d.InnerTreeNode?d.InnerTreeNode:d.InnerTreeNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){ac._get(Object.getPrototypeOf(h.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a.parent);
this.options=a.options;this.children=a.children;this.size=a.size;this.stringSize=a.stringSize;this.height=a.height;this.width=a.width;this.isLeaf=!0}},{key:"isNode",get:function(){return!0}},{key:"resize",value:function(a,e,n){this.size+=a;this.height+=e;this.stringSize+=n;for(var q=0,r=0;r<this.children.length;r++){var v=this.children[r].width;v>q&&(q=v)}this.width=q;this.parent&&this.parent.resize(a,e,n)}},{key:"lines",value:function(a){a=void 0===a?[]:a;if(this.isLeaf)return a.push.apply(a,$jscomp.arrayFromIterable(this.children)),
a;for(var e=0;e<this.children.length;e++)this.children[e].lines(a);return a}},{key:"findRow",value:function(a){if(0>a||a>=this.size)return null;if(this.isLeaf)return this.children[a];for(var e=0;e<this.children.length;e++){var n=this.children[e],q=n.size;if(a<q)return n.findRow(a);a-=q}return null}},{key:"findLineByVerticalOffset",value:function(a,e,n){e=void 0===e?0:e;n=void 0===n?0:n;if(0>a||a>this.height)return null;for(var q=0;q<this.children.length;q++){var r=this.children[q],v=r.height;if(a<=
v)return this.isLeaf?{line:r,offset:a,y:e,row:n}:r.findLineByVerticalOffset(a,e,n);a-=v;e+=v;n+=r.size}return null}},{key:"computeVerticalOffsetOf",value:function(a,e){e=void 0===e?0:e;if(0>a||a>=this.size)return console.warn("strange row in computeVerticalOffsetOf: "+a),e;if(this.isLeaf){for(var n=0;n<Math.min(a,this.children.length);n++)e+=this.children[n].height;return e}for(n=0;n<this.children.length;n++){var q=this.children[n],r=q.size;if(a<r)return q.computeVerticalOffsetOf(a,e);a-=r;e+=q.height}return e}},
{key:"ensureLine",value:function(a){a||(a="");var e="string"===typeof a;return!e&&a.isLine?(a.parent=this,a):new Pd.Line({parent:this,width:e?0:a.width||0,height:e?0:a.height||0,textAndAttributes:e?[a,null]:a.textAndAttributes||[a.text||"",null]})}},{key:"insert",value:function(a,e){e=void 0===e?this.size:e;var n=this.children,q=this.options;if(this.isLeaf){var r=[],v=0,y=0;for(q=0;q<a.length;q++){var D=this.ensureLine(a[q]);r.push(D);v+=D.height;y+=D.stringSize;n.splice(e++,0,D)}this.resize(r.length,
v,y);this.balanceAfterGrowth();return r}0===n.length&&n.push(new Pd.InnerTreeNode({parent:this,children:[],size:0,stringSize:0,width:0,height:0,options:q}));for(q=0;q<n.length;q++){r=n[q];v=r.size;if(e<=v)return r.insert(a,e);e-=v}e=n[q-1];return e.insert(a,e.size)}},{key:"withParentChainsUpToCommonParentDo",value:function(a,e,n){for(var q=this.withParents(),r,v=0;a;){if(q.includes(a)){r=a;break}e(a,v++);a=a.parent}e=q.indexOf(r);0>e&&(e=q.length);q=q.slice(0,e);for(e=0;e<q.length;e++)n(q[e],e)}},
{key:"findLineWithTextIndex",value:function(a,e){e=void 0===e?0:e;if(this.isLeaf){for(var n=0;n<this.children.length;n++){var q=this.children[n],r=q.stringSize;if(a<r)return{line:q,column:a,row:e};a-=r;e++}a=Pd.arr.last(this.children);return{line:a,row:e-1,column:a.stringSize-1}}for(q=n=0;q<this.children.length;q++){r=this.children[q];var v=r.stringSize;if(a<n+v)return r.findLineWithTextIndex(a-n,e);e+=r.size;n+=v}return Pd.arr.last(this.children).findLineWithTextIndex(a-n)}},{key:"findLeafs",value:function(a,
e,n){n=void 0===n?0:n;if(a>n+this.size||e<n)return[];if(this.isLeaf){a=Math.max(0,a-n);var q=this.children.length-1;e=Math.min(q,e-n);n=!1;0===a&&e===q&&(n=!0,e=q);return[{node:this,firstLine:a,lastLine:e,full:n}]}q=[];for(var r=0;r<this.children.length;r++){var v=this.children[r];q.push.apply(q,$jscomp.arrayFromIterable(v.findLeafs(a,e,n)));n+=v.size}return q}},{key:"removeFromToInRoot",value:function(a,e,n){var q=this;if(!this.isRoot)throw Error("removeFromTo() should be called on the root node");
a>e&&(e=$jscomp.makeIterator([e,a]),a=e.next().value,e=e.next().value);var r=this.size,v=this.options.minLeafSize,y=this.findLeafs(a,e),D=y.shift();e=y.pop();var E=[],I=!1,K=!1;if(!(a>=r)){e&&D.node===e.node&&(e=null);D.full?(n&&n.log("Removing complete first line "+D),y.push(D)):I=D.node.children.length-(D.lastLine-D.firstLine+1)<v;e&&(e.full?(n&&n.log("Removing complete last line "+e),y.push(e)):(K=e,K=K.node.children.length-(K.lastLine-K.firstLine+1)<v));if(I||K){var P=(P=D.node.children[0].prevLine())?
P.parent:null;var N=(N=Pd.arr.last(e?e.node.children:D.node.children).nextLine())?N.parent:null}for(a=0;a<y.length;a++){v=y[a].node;r=v.children.length;for(var aa=0,m=0,t=0;t<r;t++){var u=v.children[t];aa+=u.height;m+=u.stringSize;u.parent=null}v.children.length=0;v.resize(-r,-aa,-m);if(r=v.parent)v.parent=null,r.children.splice(r.children.indexOf(v),1),E.includes(r)||E.push(r)}if(!D.full){v=D.firstLine;y=D.node;a=D.lastLine-v+1;v=y.children.splice(v,a);for(m=aa=r=0;m<v.length;m++)t=v[m],r+=t.height,
aa+=t.stringSize,t.parent=null;y.resize(-a,-r,-aa)}if(e&&!e.full){a=e;v=a.firstLine;y=a.node;a=a.lastLine-v+1;v=y.children.splice(v,a);for(m=aa=r=0;m<v.length;m++)t=v[m],r+=t.height,aa+=t.stringSize,t.parent=null;y.resize(-a,-r,-aa)}n&&n.dump(""+this.print(!1));I&&D.node.balanceByMergeOrTheft(P,!e||e.full?N:e.node,n);e&&K&&e.node.root===this&&(K=!0,P=D.full||!D.node.parent?P:D.node,I&&(e.node.root!==this&&(K=!1),P&&P.root!==this&&(P=null),N&&N.root!==this&&(N=null)),K&&e.node.balanceByMergeOrTheft(P,
N,n));E.forEach(function(B){return B.root===q&&B.balanceAfterShrink(n)})}}},{key:"balanceByMergeOrTheft",value:function(a,e,n){var q=this,r=this.children,v=this.options,y=this.isLeaf,D=y?v.maxLeafSize:v.maxNodeSize;v=y?v.minLeafSize:v.minNodeSize;y=a&&a.children.length+r.length<=D;D=!y&&e&&e.children.length+r.length<=D;var E=y?a:D?e:null;if(E){n&&n.log("[balanceByMergeOrTheft] merging "+this+" "+(y?"left":"right")+" into "+E);var I=this.size,K=this.width,P=this.height,N=this.stringSize;r.forEach(function(F){return F.parent=
E});y?E.children.push.apply(E.children,$jscomp.arrayFromIterable(r)):E.children.unshift.apply(E.children,$jscomp.arrayFromIterable(r));this.width=r.length=0;this.withParentChainsUpToCommonParentDo(E,function(F){K>F.width&&(F.width=K);F.height+=P;F.size+=I;F.stringSize+=N},function(F){if(K===F.width)for(var L=0;L<F.children.length;L++){var U=F.children[L];U.width>F.width&&(F.width=U.width)}F.height-=P;F.size-=I;F.stringSize-=N})}else{y=a?Math.ceil((a.children.length-v)/2):0;var aa=e?Math.ceil((e.children.length-
v)/2):0;if((D=0<y&&y>=aa)||!D&&0<aa){v=D?a.children.splice(a.children.length-y,y):e.children.splice(0,aa);var m=D?a:e,t=D?y:aa,u=0,B=0,A=0,H=0;n&&n.log("[balanceByMergeOrTheft] "+this+" steals from "+(D?"left":"right")+" node "+m+" "+t+" nodes");for(a=0;a<v.length;a++)u+=v[a].height,B+=v[a].stringSize,A=Math.max(A,v[a].width);for(a=0;a<m.children.length;a++)H=Math.max(H,m.children[a].width);this.withParentChainsUpToCommonParentDo(m,function(F){if(H<A&&H<F.width){if(F===m)F.width=H;else{for(var L=
!1,U=0;U<F.children.length;U++)if(F.children[U].width>H){L=!0;break}L||(F.width=H)}F.width=A}F.height-=u;F.size-=t;F.stringSize-=B},function(F){F.width<A&&(F.width=A);F.height+=u;F.size+=t;F.stringSize+=B});v.forEach(function(F){return F.parent=q});D?this.children.unshift.apply(this.children,$jscomp.arrayFromIterable(v)):this.children.push.apply(this.children,$jscomp.arrayFromIterable(v))}}a=this.parent;0===r.length&&(this.parent=null,a&&a.children.splice(a.children.indexOf(this),1));a&&a.balanceAfterShrink(n)}},
{key:"balanceAfterGrowth",value:function(){var a=this.isLeaf,e=this.size,n=this.stringSize,q=this.parent,r=this.children,v=this.width,y=this.height,D=this.options,E=a?D.maxLeafSize:D.maxNodeSize;if(r.length>E){q||(q=this.parent=new Pd.InnerTreeNode({parent:null,children:[this],size:e,width:v,height:y,stringSize:n,options:D}),q.isLeaf=!1);var I=Math.floor(r.length/2),K=0,P=0,N=e=0,aa=n=0,m=v=0;for(y=0;K<I;K++)P+=r[K].size,N=Math.max(N,r[K].width),aa+=r[K].height,m+=r[K].stringSize;for(;K<r.length;K++)e+=
r[K].size,n=Math.max(n,r[K].width),v+=r[K].height,y+=r[K].stringSize;this.children=r.slice(0,I);this.size=P;this.width=N;this.height=aa;this.stringSize=m;K=q.children.indexOf(this);r=r.slice(I);var t=new Pd.InnerTreeNode({parent:q,children:r,size:e,height:v,width:n,stringSize:y,options:D});t.isLeaf=a;r.forEach(function(u){return u.parent=t});q.children.splice(K+1,0,t);t.children.length>E&&t.balanceAfterGrowth();this.children.length>E&&this.balanceAfterGrowth();this.parent.balanceAfterGrowth()}}},
{key:"balanceAfterShrink",value:function(a){var e=this,n=this.isLeaf,q=this.parent,r=this.children,v=this.options,y=v.maxLeafSize,D=v.maxNodeSize,E=v.minLeafSize,I=v.minNodeSize;v=n?y:D;E=n?E:I;I=!1;for(var K=r.length;K--;)0===r[K].size&&(r.splice(K,1),I=!0,a&&a.log("[balanceAfterShrink] "+this+" removes node "+K+" b/c it is empty, remaining children: "+r.length+" (min: "+E+", max: "+v+")"));I&&a&&a.dump(""+this.root.print(!1));if(r.length>=E)q&&q.balanceAfterShrink(a);else if(0===r.length)q&&q.balanceAfterShrink(a);
else if(n)q&&(1===q.children.length?(a&&a.log("[balanceAfterShrink] "+this+" is the only child - will remove it's parent and take its position"),a&&a.dump(""+this.root.print(!1)),this.parent=null,q.children.length=0,q.children.push.apply(q.children,$jscomp.arrayFromIterable(r)),r.forEach(function(N){return N.parent=q}),q.isLeaf=!0):(y=(y=r[0].prevLine())&&y.parent,r=Pd.arr.last(r).nextLine(),this.balanceByMergeOrTheft(y,r&&r.parent,a))),this.parent&&this.parent.balanceAfterShrink(a);else{n=[];v=I=
E=!1;for(K=0;K<r.length;K++){var P=r[K];!E&&P.isLeaf&&(E=!0);I||P.isLeaf||(I=!0);if(E&&I){v=!0;break}n.push.apply(n,$jscomp.arrayFromIterable(P.children))}!v&&n.length<=(E?y:D)&&(a&&a.log("[balanceAfterShrink] "+this+" grandChildren.length is "+n.length+" and <= max size so it is removing all its children and adopting their children"),r.forEach(function(N){return N.parent=null}),n.forEach(function(N){return N.parent=e}),r.length=0,r.push.apply(r,$jscomp.arrayFromIterable(n)),this.isLeaf=E,a&&a.log("[balanceAfterShrink] "+
r.join("\n")),a&&a.dump(""+this.root.print(!1)));q&&q.balanceAfterShrink(a)}}},{key:"print",value:function(a,e,n,q){a=void 0===a?!0:a;e=void 0===e?0:e;n=void 0===n?0:n;var r=this.isLeaf,v=this.size,y=this.stringSize,D=this.width,E=this.height,I=this.children;q=q||(r?"leaf":"node");y=""+" ".repeat(n)+q+" (size: "+v+" width: "+Math.round(D)+" height: "+Math.round(E)+" text length: "+y+")";if(I.length){D="";e+=v;for(v=I.length;v--;)E=I[v],e-=E.size,D="\n"+E.print(a,e,n+1)+D;y+=D}return y}},{key:"toString",
value:function(){var a=this.isLeaf,e=this.size,n=this.width,q=this.height,r=this.children;return"node ("+(a?"leaf, ":"")+(a&&r.length?"rows: "+r[0].row+"-"+Pd.arr.last(r).row+" ":"")+("size: "+e+" "+n+"x"+q+")")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InnerTreeNode"}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:4638,end:29081})})(Pd.TreeNode);var OU=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),h=d.hasOwnProperty("Line")&&"function"===typeof d.Line?d.Line:d.Line=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){ac._get(Object.getPrototypeOf(h.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,a.parent);this.textAndAttributes=Pd.joinTextAttributes(a.textAndAttributes||[]);this._text="";this._textAttributes=null;this.width=a.width;this.height=a.height;this.hasEstimatedExtent=!1;this.modeState=null;this.textAlign="left";this.lineHeight=null;this.marginBottom=this.marginTop=0}},{key:"isLine",get:function(){return!0}},{key:"size",get:function(){return 1}},{key:"stringSize",get:function(){return this.text.length+1}},{key:"text",get:function(){if(this._text)return this._text;
for(var a="",e=this.textAndAttributes,n=0;n<e.length;n+=2)a+="string"===typeof e[n]?e[n]:Pd.objectReplacementChar;return this._text=a}},{key:"textAttributes",get:function(){if(this._textAttributes)return this._textAttributes;for(var a=[],e=this.textAndAttributes,n=0;n<e.length;n+=2){var q=e[n+1];q&&!a.includes(q)&&a.push(q)}return this._textAttributes=a}},{key:"row",get:function(){if(!this.parent)return 0;var a=this.withParents();if(1===a.length)return a.children.indexOf(this);for(var e=0,n=a.length-
1;1<=n;n--)for(var q=a[n],r=q.children.indexOf(a[n-1]),v=0;v<r;v++)e+=q.children[v].size;return e}},{key:"nextLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)+1])?a:this.root.findRow(this.row+1):null}},{key:"prevLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)-1])?a:this.root.findRow(this.row-1):null}},{key:"changeExtent",value:function(a,e,n){var q=this.height,r=this.width,v=this.parent;this.width=a;this.height=e;this.hasEstimatedExtent=
void 0===n?!1:n;if(r!==a||q!==e)for(e-=q;v;){v.height+=e;if(a>=v.width)v.width=a;else if(r===v.width){for(q=n=0;q<v.children.length;q++){var y=v.children[q].width;y>n&&(n=y)}v.width=n}v=v.parent}return this}},{key:"changeText",value:function(a,e){e=void 0===e?null:e;var n=this.parent,q=this.height,r=a.length+1-(this.text.length+1),v=0;this.modeState&&this.modeState._string!==a&&(this.modeState=null);this.height||this.width?this.hasEstimatedExtent=!0:(this.width=this.height=0,this.hasEstimatedExtent=
!1,v=-q);this._text=a;this._textAttributes=null;this.textAndAttributes=e||(e=[a,null]);if(0!==e.length%2)throw Error("textAndAttributes list is strange, expected flat pairs of text/attr");for(a=0;a<e.length;a+=2)if((q=e[a+1])&&Array.isArray(q))throw Error("invalid attr part of text/attr pair, its an array: "+q);for(;n;){n.stringSize+=r;n.height+=v;for(a=e=0;a<n.children.length;a++)q=n.children[a].width,q>e&&(e=q);n.width=e;n=n.parent}return this}},{key:"changeTextAndAttributes",value:function(a){a=
Pd.joinTextAttributes(a);for(var e="",n=0;n<a.length;n+=2)e+="string"===typeof a[n]?a[n]:Pd.objectReplacementChar;return this.changeText(e,a)}},{key:"print",value:function(a,e,n){a=void 0===a?!0:a;e=void 0===e?0:e;e=" ".repeat(void 0===n?0:n)+"line "+e+" (size: 1 width: "+Math.round(this.width)+" height: "+Math.round(this.height)+" text length: "+this.stringSize;n=Pd.arr.toTuples(this.textAndAttributes,2).map(function(q){var r=$jscomp.makeIterator(q);q=r.next().value;r=r.next().value;return("string"===
typeof q?'"'+q+'"':String(q))+(","+JSON.stringify(r))}).join(",");return e+(a?")":" content: ["+n+"])")}},{key:"toString",value:function(){var a=this.width,e=this.height;return'line ("'+Pd.string.truncate(this._text,30)+'", '+a+"x"+e+")"}},{key:"consistencyCheck",value:function(){var a=[];if(!this.parent)return a.push("line "+this+" has no parent!"),a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Line"}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:29090,end:35532})}(Pd.TreeNode);Pd.Line=OU;Pd.Line=OU;Pd.Line=OU;Pd.documentFuzzier={makeString:function(b,d){b=void 0===b?5:b;d=void 0===d?50:d;var h=Pd.arr.range(65,90).map(function(a){return String.fromCharCode(a)}).join("");h+=h.toLowerCase()+" \n";b=Pd.num.random(b,d);return Pd.arr.shuffle(Array.from(h.repeat(Math.ceil(b/h.length)))).slice(0,b).join("")},
randomDocPosition:function(b){var d=0===b.rowCount?0:Pd.num.random(0,b.rowCount-1);b=Pd.num.random(0,b.getLineString(d).length-1);return{row:d,column:b}},insertRandom:function(b,d,h,a){h=[this.makeString(h,a),null];a=this.randomDocPosition(b);d.push(["insertTextAndAttributes",h,a]);b.insertTextAndAttributes(h,a)},deleteRandom:function(b,d,h,a){h={start:this.randomDocPosition(b),end:this.randomDocPosition(b)};d.push(["remove",h]);b.remove(h)},maybe:function(){return.5>Math.random()},replay:function(b,
d,h,a){h=void 0===h?!1:h;a=void 0===a?!1:a;h&&(b.debug=h,h=b.debugHelper(),h.reset());var e=new Pd.Document([""]);d.forEach(function(n,q){var r=$jscomp.makeIterator(n);n=r.next().value;r=$jscomp.arrayFromIterator(r);if(a&&q==d.length-1)debugger;e[n].apply(e,[].concat($jscomp.arrayFromIterable(r),[h]))});b.changeDocument(e)},run:function(){var b=Date.now(),d=0,h=new Pd.Document([],{maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5}),a=[];try{for(;1E4>h.stringSize&&
1E4>d++;)this.maybe()?this.deleteRandom(h,a):this.insertRandom(h,a),h.consistencyCheck()}catch(n){var e=n}b=Date.now()-b;return{error:e,doc:h,actions:a,time:b}}};Pd.newline="\n";Pd.newlineLength=1;var Lca=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),h=d.hasOwnProperty("Document")&&"function"===typeof d.Document?d.Document:d.Document=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,e){this.options=Object.assign({},Pd.defaultOptions,{},e);this.lines=a}},{key:"balance",value:function(){this.root.balanceAfterGrowth();this.fixRoot()}},{key:"fixRoot",value:function(){var a=this.root.root;this.root!==a&&(this.root=a)}},{key:"height",get:function(){return this.root.height}},{key:"width",get:function(){return this.root.width}},{key:"rowCount",get:function(){return this.root.size}},{key:"stringSize",get:function(){return 0===
this.rowCount?0:this.root.stringSize-1}},{key:"lineStrings",get:function(){return this.lines.map(function(a){return a.text})}},{key:"lines",get:function(){return this.root.lines()}},{key:"lines",set:function(a){a=void 0===a?[]:a;this.root=new Pd.InnerTreeNode({parent:null,children:[],size:0,width:0,height:0,stringSize:0,options:this.options});this.insertLines(a)}},{key:"clipRow",value:function(a){return Math.max(0,Math.min(a,this.rowCount-1))}},{key:"clipPositionToLines",value:function(a){var e=a.row;
a=a.column;var n=this.rowCount;if(0===n)return{row:0,column:0};0>e?e=0:e>=n&&(e=n-1,a=Infinity);0>a?a=0:(n=this.getLineString(e).length,a>n&&(a=n));return{row:e,column:a}}},{key:"findLineByVerticalOffset",value:function(a){return this.root.findLineByVerticalOffset(a)}},{key:"computeVerticalOffsetOf",value:function(a){return this.root.computeVerticalOffsetOf(a)}},{key:"getLine",value:function(a){return this.root.findRow(this.clipRow(a))}},{key:"getLineString",value:function(a){return(a=this.getLine(a))?
a.text:""}},{key:"insertLine",value:function(a,e){e=void 0===e?this.root.rowCount:e;return this.insertLines([a],e)[0]}},{key:"removeLine",value:function(a){this.root.removeFromToInRoot(a,a)}},{key:"removeLines",value:function(a,e,n){this.root.removeFromToInRoot(a,e,n)}},{key:"insertLines",value:function(a,e){a=this.root.insert(a,e);this.fixRoot();return a}},{key:"textString",get:function(){var a="",e=this.lines;if(!e.length)return a;for(var n=0;n<e.length-1;n++)a=a+e[n].text+Pd.newline;return a+=
e[n].text}},{key:"textString",set:function(a){this.lines=a.split(Pd.newline)}},{key:"endPosition",get:function(){var a=this.rowCount;if(0===a)return{row:0,column:0};--a;var e=this.getLine(a);return{row:a,column:e.stringSize-1}}},{key:"textAndAttributes",get:function(){var a=this.lines;if(!a.length)return[];for(var e=Pd.newline,n=a.length-1,q=a[0].textAndAttributes.slice(),r=1;r<=n;r++){var v=a[r],y=q.pop()||null,D=q.pop()||"";v=v.textAndAttributes;q.push.apply(q,$jscomp.arrayFromIterable(Pd.concatAttributePair(D,
y,v[0]||"",v[1]||null,e)));for(y=2;y<v.length;y+=2)q.push(v[y],v[y+1])}return q}},{key:"textAndAttributes",set:function(a){this.lines=Pd.splitTextAndAttributesIntoLines(a,Pd.newline).map(function(e){return new Pd.Line({parent:null,width:0,height:0,textAndAttributes:e})})}},{key:"getTextAndAttributesOfLine",value:function(a){return this.getLine(a).textAndAttributes}},{key:"setTextAndAttributesOfLine",value:function(a,e){this.getLine(a).changeTextAndAttributes(e);return e}},{key:"mixinTextAttribute",
value:function(a,e){Pd.modifyAttributesInRange(this,e,function(n,q){n._textAttributes=null;return Object.assign({},q,a)})}},{key:"setTextAttribute",value:function(a,e){Pd.modifyAttributesInRange(this,e,function(n,q){n._textAttributes=null;return a})}},{key:"mixoutTextAttribute",value:function(a,e){e=void 0===e?{start:{row:0,column:0},end:this.endPosition}:e;if(a){var n=Object.keys(a);Pd.modifyAttributesInRange(this,e,function(q,r){if(!r)return r;q._textAttributes=null;q=0;var v={},y;for(y in r)n.includes(y)||
(v[y]=r[y],q++);return 0===q?null:v})}}},{key:"setTextAttributesWithSortedRanges",value:function(a){function e(K,P,N,aa){aa=void 0===aa?0:aa;var m=0,t=P.length;if(0>=N.length-aa)return{attributes:[P,null],index:aa};for(var u=[];aa<N.length&&!(m>=t);aa+=2){var B=N[aa],A=B.start;B=B.end;var H=N[aa+1];if(B.row<K)m=0;else{A.row===K&&m<A.column&&(u.push(P.slice(m,A.column),null),m=A.column);if(B.row>K){u.push(H.embeddedMorph||P.slice(m,t),H);m=t;break}m<B.column&&u.push(H.embeddedMorph||P.slice(m,B.column),
H);m=B.column}}m<t&&u.push(P.slice(m,t),null);return{attributes:u,index:aa}}if(!(2>a.length)){var n=a[0].start,q=a.slice(-2)[0].end,r=this.getLine(n.row);if(n.row===q.row){if(!(n.column>=q.column)){var v=e(n.row,r.text,a,0).attributes,y=$jscomp.makeIterator(Pd.splitTextAndAttributesAtColumns(r.textAndAttributes,[n.column,q.column]));a=y.next().value;y.next();y=y.next().value;q=$jscomp.makeIterator(Pd.splitTextAndAttributesAtColumns(v,[n.column,q.column]));q.next();n=q.next().value;q.next();r.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(a),
$jscomp.arrayFromIterable(n),$jscomp.arrayFromIterable(y)))}}else{y=n.row;var D=n.column;n=e(y,r.text,a,0);var E=n.attributes;n=n.index;var I=$jscomp.makeIterator(Pd.splitTextAndAttributesAt(r.textAndAttributes,D));v=I.next().value;I.next();D=$jscomp.makeIterator(Pd.splitTextAndAttributesAt(E,D));D.next();D=D.next().value;for(r.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(v),$jscomp.arrayFromIterable(D)));r=r.nextLine();){y++;if(y===q.row)break;n=e(y,r.text,a,n);v=n.attributes;n=n.index;
r.changeTextAndAttributes(v)}r&&(q=q.column,a=e(y,r.text,a,n).attributes,y=$jscomp.makeIterator(Pd.splitTextAndAttributesAt(r.textAndAttributes,q)),y.next(),y=y.next().value,q=$jscomp.makeIterator(Pd.splitTextAndAttributesAt(a,q)).next().value,r.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(q),$jscomp.arrayFromIterable(y))))}}}},{key:"resetTextAttributes",value:function(){this.lines.forEach(function(a){return a.changeText(a.text)})}},{key:"textAttributeAt",value:function(a){var e=a.row;
a=a.column;a=Math.max(0,a);var n=this.getLine(e);if(!n)return null;e=0;n=n.textAndAttributes;for(var q=0;q<n.length;q+=2){var r=n[q],v=n[q+1];e+="string"===typeof r?r.length:1;if(a<e)return v}return n[n.length-1]}},{key:"textAndAttributesInRange",value:function(a){var e=a.start,n=a.end;if(Pd.eqPosition(e,n))return["",null];Pd.lessPosition(n,e)&&(a=$jscomp.makeIterator([n,e]),e=a.next().value,n=a.next().value);e=Pd.maxPosition(e,{column:0,row:0});n=Pd.minPosition(n,this.endPosition);var q=this.getLine(e.row),
r=q;if(n.row===e.row)return a=e.column,n=n.column,a===n&&n++,a=$jscomp.makeIterator(Pd.splitTextAndAttributesAtColumns(r.textAndAttributes,[a,n])),a.next(),a.next().value;a=[q];for(var v=0;v<n.row-e.row;v++)a.push(q=q.nextLine());q=a[a.length-1];e=$jscomp.makeIterator(Pd.splitTextAndAttributesAt(r.textAndAttributes,e.column));e.next();e=e.next().value;n=$jscomp.makeIterator(Pd.splitTextAndAttributesAt(q.textAndAttributes,n.column)).next().value;0===e.length&&(e=["",null]);if(1===a.length)return Pd.concatTextAndAttributes(e,
n,!0);for(r=1;r<a.length-1;r++)"string"===typeof e[e.length-2]&&(e[e.length-2]+=Pd.newline),Pd.concatTextAndAttributes(e,a[r].textAndAttributes,!0);"string"===typeof e[e.length-2]&&(e[e.length-2]+=Pd.newline);Pd.concatTextAndAttributes(e,n,!0);return Pd.joinTextAttributes(e,"")}},{key:"textInRange",value:function(a){var e=a.start,n=a.end;e=this.clipPositionToLines(e);n=this.clipPositionToLines(n);Pd.lessPosition(n,e)&&(a=$jscomp.makeIterator([n,e]),e=a.next().value,n=a.next().value);a=e;e=a.row;a=
a.column;var q=n;n=q.row;q=q.column;if(e===n)return a===q?"":this.getLineString(e).slice(a,q);var r=this.getLine(e);for(a=r.text.slice(a);(r=r.nextLine())&&++e<n;)a+=Pd.newline+r.text;return a+Pd.newline+this.getLineString(n).slice(0,q)}},{key:"setTextInRange",value:function(a,e){this.remove(e);return this.insertText(a,e.start,!1)}},{key:"indexToPosition",value:function(a){0>a&&(a=0);a=this.root.findLineWithTextIndex(a,0);return{row:a.row,column:a.column}}},{key:"positionToIndex",value:function(a){var e=
a.column,n=this.getLine(a.row);e=Math.max(0,Math.min(e,n.stringSize-1));for(a=n.parent;a;){n=a.children.indexOf(n);n=a.children.slice(0,n);for(var q=0;q<n.length;q++)e+=n[q].stringSize;n=a;a=a.parent}return e}},{key:"insertTextAndAttributes",value:function(a,e,n){n=void 0===n?!1:n;if(!a||!a.length||2===a.length&&!a[0])return{start:e,end:e};n&&!n.debugDocumentUpdate&&(n=!1);n&&!n.log&&(n=console);var q=e.row;e=e.column;0>q&&(q=0);0>e&&(e=0);var r=this.getLine(q);a=Pd.splitTextAndAttributesIntoLines(a,
Pd.newline);n&&(n.log||(n={log:console.log.bind(console),dump:console.log.bind(console)}));if(!r)return q=this.insertLines(a.map(function(aa){return new Pd.Line({parent:null,width:0,height:0,textAndAttributes:aa})})),n&&n.log("insert "+q.length+" lines into empty text"),{start:{row:0,column:0},end:{row:q.length,column:Pd.arr.last(q).text.length}};if(q>=this.rowCount){var v=this.endPosition;n&&n.log("insertion after doc end, "+q+"/"+e+", inserting "+(q-v.row)+" rows");for(e=0;e<q-v.row;e++)a.unshift(["",
null]);q=v.row;e=v.column}if(1===a.length&&""===a[0][0])return n&&n.log("insert just newline at "+q+"/"+e),q=this.splitLineAt({row:q,column:e}),n&&n.dump(""+this.root.print(!1)),q;var y=a.shift(),D=a.length;v={row:q,column:e};var E=r.stringSize-1;e>E&&(n&&n.log("filling up insertion column at "+q+"/"+e+": "+(e-E)),E=" ".repeat(e-E),y.length?"string"===typeof y[0]?y[0]=E+y[0]:y.unshift(E,null):y.push(E,null));E=$jscomp.makeIterator(Pd.splitTextAndAttributesAt(r.textAndAttributes,e));var I=E.next().value;
E=E.next().value;""===I[0]&&(I=[]);I=Pd.concatTextAndAttributes(I,y,!0);if(0===D){for(var K=0,P=0;P<y.length;P+=2){var N=y[P];K+="string"===typeof N?N.length:1}v.column=e+K;Pd.concatTextAndAttributes(I,E,!0)}r.changeTextAndAttributes(I);if(0===D)return n&&(n.log("single line inserted at "+q+"/"+e),n&&n.dump(""+this.root.print(!1))),{start:{row:q,column:e},end:v};r=a[D-1];for(I=y=0;I<r.length;I+=2)K=r[I],y+="string"===typeof K?K.length:1;v.row+=D;v.column=y;a=this.insertLines(a.map(function(aa){return new Pd.Line({parent:null,
width:0,height:0,textAndAttributes:aa})}),q+1);D=Pd.arr.last(a);D.changeTextAndAttributes(Pd.concatTextAndAttributes(D.textAndAttributes,E,!0));n&&(n.log(a.length+" inserted at "+q+"/"+e),n&&n.dump(""+this.root.print(!1)));return{start:{row:q,column:e},end:v}}},{key:"insertText",value:function(a,e,n){n=void 0===n?!1:n;if(!a)return{start:e,end:e};var q=e.row;e=e.column;0>q&&(q=0);0>e&&(e=0);var r=this.getLine(q);if(!r)return q=this.insertLines(a.split(Pd.newline)),{start:{row:0,column:0},end:{row:q.length,
column:Pd.arr.last(q).text.length}};q>=this.rowCount&&(e=this.endPosition,a="\n".repeat(q-e.row)+a,q=e.row,e=e.column);var v=a.split(Pd.newline),y=v.shift(),D=v.length;a={row:q,column:e};var E=r.stringSize-1;e>E&&(y=" ".repeat(e-E)+y);E=$jscomp.makeIterator(Pd.splitTextAndAttributesAt(r.textAndAttributes,e));var I=E.next().value;E=E.next().value;""===I[0]&&(I=[]);n=Pd.concatTextAndAttributes(I,[y,n&&I.length?I[I.length-1]:null],!0);0===D&&(a.column=e+y.length,Pd.concatTextAndAttributes(n,E,!0));r.changeTextAndAttributes(n);
if(0===D)return{start:{row:q,column:e},end:a};a.row+=D;a.column=v[D-1].length;n=this.insertLines(v,q+1);n=Pd.arr.last(n);n.changeTextAndAttributes(Pd.concatTextAndAttributes(n.textAndAttributes,E,!0));return{start:{row:q,column:e},end:a}}},{key:"remove",value:function(a,e){e=void 0===e?!1:e;if(0!==this.rowCount){var n=a.start,q=a.end;if(n.row!==q.row||n.column!==q.column){Pd.lessPosition(q,n)&&(q=$jscomp.makeIterator([q,n]),n=q.next().value,q=q.next().value);var r=this.endPosition;if(!Pd.lessEqPosition(r,
n)){var v=Pd.maxPosition(n,{column:0,row:0});n=v.row;v=v.column;r=Pd.minPosition(q,r);q=r.row;var y=r.column;0>v&&(v=0);0>y&&(y=0);e&&!e.debugDocumentUpdate&&(e=!1);e&&(e.log||(e={log:console.log.bind(console),dump:console.log.bind(console),group:console.group.bind(console),groupEnd:console.groupEnd.bind(console)}),e.group("document.remove "+JSON.stringify(a)),e.log("[text doc] removing "+n+"/"+v+" => "+q+"/"+y));var D=this.getLine(n);a=D;r=[D];for(var E=0;E<q-n;E++)r.push(D=D.nextLine());D=r[r.length-
1];v=$jscomp.makeIterator(Pd.splitTextAndAttributesAt(a.textAndAttributes,v)).next().value;y=$jscomp.makeIterator(Pd.splitTextAndAttributesAt(D.textAndAttributes,y));y.next();y=y.next().value;a.changeTextAndAttributes(Pd.concatTextAndAttributes(v,y,!0));e&&e.log('[text doc removal] what remains of start/end line: "'+a.textAndAttributes+'"');1<r.length&&this.removeLines(n+1,q,e);e&&e.groupEnd("[text doc removal]")}}}}},{key:"splitLineAt",value:function(a){var e=a.row;a=a.column;var n=this.getLine(e),
q=$jscomp.makeIterator(Pd.splitTextAndAttributesAt(n.textAndAttributes,a)),r=q.next().value;q=q.next().value;n.changeTextAndAttributes(r);n=new Pd.Line({parent:null,width:0,height:0,textAndAttributes:q});this.insertLines([n],e+1);return{start:{row:e,column:a},end:{row:e+1,column:0}}}},{key:"replace",value:function(a,e,n){var q=a.start;a=a.end;if(!e.length)return this.remove({start:q,end:a},n),{removed:{start:q,end:a},inserted:{start:q,end:q}};var r=this.clipPositionToLines(q),v=this.clipPositionToLines(a);
r.row===v.row&&this.remove({start:r,end:v},n);if(r.row===v.row||Pd.lessEqPosition(this.endPosition,q)){var y;"string"===typeof e?e.length&&(y=e.length&&this.insertText(e,q)):e.length&&(2!==e.length||e[0])&&(y=this.insertTextAndAttributes(e,q,n));y||(y={start:r,end:r});return{removed:{start:q,end:a},inserted:y}}q=r;a=v;n=q;y=n.row;v=n.column;r=a.row;if("string"===typeof e){n=[];e=e.split(Pd.newline);for(var D=0;D<e.length;D++)n.push([e[D],null])}else n=Pd.splitTextAndAttributesIntoLines(e,Pd.newline);
var E=!n.length||1===n.length&&(!n[0].length||!n[0][0].length);E&&(n=[]);var I=e=this.getLine(y);D=this.getLine(r);v=$jscomp.makeIterator(Pd.splitTextAndAttributesAt(I.textAndAttributes,v));var K=v.next().value;v.next();for(I.changeTextAndAttributes(E?K:Pd.concatTextAndAttributes(K,n.shift(),!0));n.length;){e=e.nextLine();y++;if(e===D)break;e.changeTextAndAttributes(n.shift())}if(!n.length)return n=e.stringSize-1,this.remove({start:{row:y,column:e.stringSize},end:a}),{removed:{start:q,end:a},inserted:{start:q,
end:{row:y,column:n}}};console.assert(y==r,"not end row");console.assert(e.row==y,"row != last line.row");this.remove({start:{row:y,column:0},end:a});r=[];e=n.length;for(v=0;v<e-1;v++)D=n[v],D.length||(D=["",null]),"string"===typeof D[D.length-2]?D[D.length-2]+=Pd.newline:D.push(Pd.newline,null),r.push.apply(r,$jscomp.arrayFromIterable(D));r.push.apply(r,$jscomp.arrayFromIterable(n[e-1]));n=this.insertTextAndAttributes(r,{row:y,column:0}).end;return{removed:{start:q,end:a},inserted:{start:q,end:n}}}},
{key:"wordsOfLine",value:function(a){for(var e=this.getLineString(a),n=[],q,r=0;r<e.length;r++)/[^a-z0-9_]/i.test(e[r])?q&&(q.range.end.column=r,n.push(q),q=null):(q=q||{index:n.length,string:"",range:{start:{row:a,column:r},end:{row:a,column:r}}},q.string+=e[r]);q&&(q.range.end.column=r,n.push(q));return n}},{key:"wordAt",value:function(a,e){var n=a.row,q=a.column;e=void 0===e?this.wordsOfLine(n):e;return e.find(function(r){r=r.range;var v=r.end.column;return r.start.column<=q&&q<=v})||{range:{start:{column:q,
row:n},end:{column:q,row:n}},string:""}}},{key:"wordLeft",value:function(a){var e=a.row,n=a.column,q=this.wordsOfLine(e);if(!q.length||Pd.lessEqPosition(a,q[0].range.start)){for(;0<=--e;)if(q=this.wordsOfLine(e),q.length)return Pd.arr.last(q);return{range:{start:a,end:a},string:""}}e=this.wordAt(a);return e.string?Pd.eqPosition(e.range.start,a)?q[e.index-1]:e:q.slice().reverse().find(function(r){return r.range.end.column<=n})||{range:{start:a,end:a},string:""}}},{key:"wordRight",value:function(a){var e=
a.column,n=a.row,q=this.wordsOfLine(a.row);if(!q.length||Pd.lessEqPosition(Pd.arr.last(q).range.end,a)){for(;++n<this.lines.length;)if(q=this.wordsOfLine(n),q.length)return q[0];return{range:{start:a,end:a},string:""}}n=this.wordAt(a);return n.string?Pd.eqPosition(n.range.end,a)?q[n.index+1]:n:q.find(function(r){return r.range.start.column>=e})||{range:{start:a,end:a},string:""}}},{key:"scanForward",value:function(a,e){var n=a.row,q=a.column;a=this.getLine(n);for(var r=a.text;q<a.stringSize-1;q++){var v=
e(r[q],{row:n,column:q});if(v)return v}for(;a=a.nextLine();)for(n++,r=a.text,q=0;q<a.stringSize-1;q++)if(v=e(r[q],{row:n,column:q}))return v;return null}},{key:"scanBackward",value:function(a,e){var n=a.row,q=a.column;a=this.getLine(n);var r=a.text;for(--q;0<=q;q--){var v=e(r[q],{row:n,column:q});if(v)return v}for(;a=a.prevLine();)for(n--,r=a.text,q=a.stringSize-2;0<=q;q--)if(v=e(r[q],{row:n,column:q}))return v;return null}},{key:"copy",value:function(){return new this.constructor(this.lines.slice(),
this.options)}},{key:"toString",value:function(){return"Document("+this.rowCount+" lines)"}},{key:"consistencyCheck",value:function(){var a=[],e=this.rowCount,n=this.stringSize,q=this.lines,r=this.textString,v=this.root;e!==q.length&&a.push({error:"document "+this+" row count: "+e+" !== "+q.length});r.length!==n&&a.push({error:"document "+this+" textString.length vs stringSize: "+r.length+" !== "+n});a.push.apply(a,$jscomp.arrayFromIterable(v.consistencyCheck()));e=0;for(n=q[0];n;)n!=q[e]&&a.push({error:"line iteration at "+
e+" is broken: nextLine() of "+q[e-1]+" is not "+q[e]+"!"}),e++,n=n.nextLine();q[e]&&a.push({error:"nextLine() of\n  "+q[e-1]+"\nis nullish but \n  "+q[e]+"\nexists in tree!"});if(a.length)throw Error("Consistency check of document revealed "+a.length+" error"+(1<a.length?"s":"")+":\n"+a.map(function(y){return y.error}).filter(Boolean).join("\n"));}},{key:"print",value:function(){return this.root.print(!1,0,0,"root")}},{key:"print2",value:function(){var a=System.decanonicalize("lively.lang/text-graphics.js"),
e=(System.get(a)||{}).printTree;return e?e(this.root,function(n){return n.toString()},function(n){return n.children},{padding:[2,1,2,1]}):(lively.module.module(a).load().then(function(){return console.log("lively.lang/text-graphics.js loaded")}).catch(function(n){return console.error(n)}),"Loading lively.lang/text-graphics.js lib, please try again later :P")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Document"}},{key:"fuzzyTest",value:function(){return Pd.documentFuzzier.run()}},
{key:"newline",get:function(){return Pd.newline}},{key:"fromString",value:function(a,e){return new this(a.split(Pd.newline),e)}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:37798,end:71716})}(void 0),Uwa=Lca=Pd.Document;Pd.default=Lca;var zn=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js");
zn.lessPosition=eq;zn.lessEqPosition=jy;zn.eqPosition=fq;var bz=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js"),h=d.hasOwnProperty("Anchor")&&"function"===typeof d.Anchor?d.Anchor:d.Anchor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,e,n){e=void 0===e?{column:0,row:0}:e;this.id=a||""+(this.constructor._id=
(this.constructor._id||0)+1);this.position=e;this.insertBehavior=void 0===n?"move":n}},{key:"isAnchor",get:function(){return!0}},{key:"onDelete",value:function(a){if(zn.lessEqPosition(this.position,a.start))return!1;if(zn.lessEqPosition(a.start,this.position)&&zn.lessEqPosition(this.position,a.end))return this.position=a.start,!0;var e=this.position,n=e.column,q=a.start,r=q.column,v=a.end;a=v.row;v=v.column;this.position={column:a!==this.position.row?n:r===v?n-(v-r):r+(n-v),row:e.row-(a-q.row)};return!0}},
{key:"onInsert",value:function(a){if(zn.lessPosition(this.position,a.start)||zn.eqPosition(this.position,a.start)&&"stay"===this.insertBehavior)return!1;var e=this.position,n=a.start,q=n.row;n=n.column;a=a.end;var r=a.column;this.position={column:e.column+(q!==this.position.row?0:r-n),row:e.row+(a.row-q)};return!0}},{key:"equalsPosition",value:function(a){return a?a.isAnchor?zn.eqPosition(this.position,a.position):zn.eqPosition(this.position,a):!1}},{key:"toString",value:function(){var a=this.position;
return"Anchor("+this.id+" "+a.row+"/"+a.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Anchor"}}],d,{pathInPackage:function(){return"text/anchors.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:82,end:3025})}(void 0);zn.Anchor=bz;zn.Anchor=bz;zn.Anchor=bz;var Vwa=Object.freeze({__proto__:null,Anchor:bz}),
Af=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js");Af.pt=xh;Af.Color=If;Af.connect=Ik;Af.once=Sq;Af.disconnect=Hp;Af.Path=Eg;Af.morph=zj;Af.GridLayout=Er;Af.config=Yk;Af.Morph=xj;Af.lessPosition=eq;Af.minPosition=ky;Af.maxPosition=ly;Af.Icon=rm;var VK=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),h=d.hasOwnProperty("TextSearcher")&&"function"===typeof d.TextSearcher?d.TextSearcher:d.TextSearcher=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.morph=a;this.STOP={}}},{key:"doc",get:function(){return this.morph.document}},{key:"processFind",value:function(a,e){var n=this.doc.positionToIndex(a);n=this.doc.indexToPosition(n+e.length);return{range:{start:a,end:n},match:e}}},{key:"stringSearch",value:function(a,e,n,q,r,v,y){if(r&&(Af.lessPosition(y,r.start)||Af.lessPosition(r.end,y)))return this.STOP;
n||(v=v.toLowerCase());if(v!==e[0])return null;r=y.row;y=y.column;v=a[r];a=1>=q?"":"\n"+a.slice(r+1,r+1+(q-1)).join("\n");a=v.slice(y)+a;return 0!==(n?a:a.toLowerCase()).indexOf(e)?null:this.processFind({row:r,column:y},a.slice(0,e.length))}},{key:"reSearch",value:function(a,e,n,q,r,v){if(q&&(Af.lessPosition(v,q.start)||Af.lessPosition(q.end,v)))return this.STOP;q=v.row;v=v.column;return(a=(a[q].slice(v)+(n?"\n"+a.slice(q+1).join("\n"):"")).match(e))?this.processFind({row:q,column:v},a[0]):null}},
{key:"search",value:function(a){var e=Object.assign({start:this.morph.cursorPosition,needle:"",backwards:!1,caseSensitive:!1,inRange:null},a);a=e.start;var n=e.needle,q=e.backwards,r=e.caseSensitive;e=e.inRange;if(!n)return null;e&&(a=q?Af.minPosition(e.end,a):Af.maxPosition(e.start,a));if(n instanceof RegExp){var v=(n.flags||"").split(""),y=!!n.multiline;v.splice(v.indexOf("m"),1);r||v.includes("i")||v.push("i");n=new RegExp("^"+n.source.replace(/^\^+/,""),v.join(""));n=this.reSearch.bind(this,this.doc.lineStrings,
n,y,e)}else n=String(n),r||(n=n.toLowerCase()),v=n.split(this.doc.constructor.newline).length,n=this.stringSearch.bind(this,this.doc.lineStrings,n,r,v,e);a=this.doc[q?"scanBackward":"scanForward"](a,n);return a===this.STOP?null:a}},{key:"searchForAll",value:function(a){for(var e=[],n=0;;){if(1E4<n++)throw Error("endless loop");var q=this.search(a);if(!q)return e;e.push(q);a=Object.assign({},a,{start:a.backwards?q.range.start:q.range.end})}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextSearcher"}}],
d,{pathInPackage:function(){return"text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:538,end:3748})}(void 0);Af.TextSearcher=VK;Af.TextSearcher=VK;Af.TextSearcher=VK;var PU=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),h=d.hasOwnProperty("SearchWidget")&&"function"===typeof d.SearchWidget?
d.SearchWidget:d.SearchWidget=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var e=this;a=void 0===a?{}:a;a.targetText&&(a.target=a.targetText);if(!a.target)throw Error("SearchWidget needs a target text morph!");ac._get(Object.getPrototypeOf(h.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);a=this.getSubmorphNamed("replaceButton");
var n=this.getSubmorphNamed("replaceAllButton");this.getSubmorphNamed("replaceInput");var q=this.getSubmorphNamed("searchInput"),r=this.getSubmorphNamed("prevButton"),v=this.getSubmorphNamed("nextButton"),y=this.getSubmorphNamed("cancelButton"),D=this.getSubmorphNamed("acceptButton");Af.connect(D,"fire",this,"execCommand",{converter:function(){return"accept search"}});Af.connect(y,"fire",this,"execCommand",{converter:function(){return"cancel search and reset cursor in text"}});Af.connect(v,"fire",
this,"execCommand",{converter:function(){return"search next"}});Af.connect(r,"fire",this,"execCommand",{converter:function(){return"search prev"}});Af.connect(q,"inputChanged",this,"search");Af.connect(a,"fire",this,"execCommand",{converter:function(){return"replace and go to next"}});Af.connect(n,"fire",this,"execCommand",{converter:function(){return"replace all"}});this.state={backwards:!1,before:null,position:null,inProgress:null,last:null};q.addCommands([{name:"realign top-bottom-center",exec:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){e.target.execCommand("realign top-bottom-center");
e.addSearchMarkersForPreview(e.state.inProgress&&e.state.inProgress.found,!1);return E.return(!0)})}}])}},{key:"focus",value:function(){var a=this;this.get("searchInput").focus();this.whenRendered().then(function(){return a.get("searchInput").invalidateTextLayout(!0,!0)})}},{key:"onBlur",value:function(a){var e=this,n=this.world();n&&setTimeout(function(){var q=n.focusedMorph;e.withAllSubmorphsDetect(function(r){return r.isFocused()})?e.get("searchInput")!=q&&e.get("replaceInput")!=q&&e.get("searchInput").focus():
e.cancelSearch(!1)})}},{key:"cleanup",value:function(){this.removeSearchMarkers();this.state.inProgress=null;this.textMap&&this.textMap.update()}},{key:"cancelSearch",value:function(a){this.state.inProgress&&(this.state.last=this.state.inProgress);this.cleanup();this.removeTextMap();if(this.state.before&&a){a=this.state.before;var e=a.scroll;this.target.selection=a.selectionRange;this.target.scroll=e;this.state.before=null}this.remove();this.target.focus()}},{key:"acceptSearch",value:function(){this.state.inProgress&&
(this.state.last=this.state.inProgress);this.applySearchResult(this.state.inProgress)&&this.state.before&&this.target.saveMark(this.state.before.position);this.get("searchInput").acceptInput();this.cleanup();this.removeTextMap();this.state.before=null;this.remove();this.target.focus()}},{key:"applySearchResult",value:function(a){if(!a||!a.found)return null;var e=this.target,n=e.selection,q=!!e.activeMark||!n.isEmpty(),r=a.found.range,v=r.start;r=r.end;v=a.backwards?v:r;q?n.lead=v:e.cursorPosition=
v;e.isLineFullyVisible(v.row)||e.centerRow();return a}},{key:"removeSearchMarkers",value:function(){var a=this;(this.target.markers||[]).forEach(function(e){e=e.id;return e.startsWith("search-highlight")&&a.target.removeMarker(e)})}},{key:"addSearchMarkers",value:function(a,e,n){n=void 0===n?!1:n;this.removeSearchMarkers();e=this.target;var q=this.textMap,r=e.whatsVisible,v=r.startRow;r=r.endRow;var y=e.document.lineStrings,D=0,E=Af.config.codeEditor.search,I=E.maxCharsPerLine;E=E.fastHighlightLineCount;
q&&3<=a.match.length&&y.length<E&&(v=0,r=y.length-1);E=!1;for(var K=window.performance.now();v<=r&&!E;v++)for(var P=y[v]||"",N=0;N<Math.min(P.length,I);N++){if(300<window.performance.now()-K){E=!0;break}if(n?0===P.slice(N).indexOf(a.match):0===P.slice(N).toLowerCase().indexOf(a.match.toLowerCase()))e.addMarker({id:"search-highlight-"+D++,range:{start:{row:v,column:N},end:{row:v,column:N+a.match.length}},style:{"border-radius":"4px","background-color":"rgba(255, 200, 0, 0.3)","box-shadow":"0 0 4px rgba(255, 200, 0, 0.3)",
"pointer-events":"none"}}),N+=a.match.length}this.state.backwards?(n=a.range.start,a=n.row,n=n.column,a={start:{row:a,column:n},end:{row:a,column:n+1}}):(n=a.range.end,a=n.row,n=n.column,a={start:{row:a,column:n-1},end:{row:a,column:n}});n={};e.addMarker({id:"search-highlight-cursor",range:a,style:(n["pointer-events"]="none",n["box-sizing"]="border-box",n[this.state.backwards?"border-left":"border-right"]="3px red solid",n)});q&&q.update()}},{key:"addSearchMarkersForPreview",value:function(a,e){e=
void 0===e?!0:e;a&&(this.addSearchMarkers(a),e&&this.target.removeMarker("search-highlight-cursor"))}},{key:"prepareForNewSearch",value:function(){var a=this.target,e=this.state,n=a.world();if(n){this.openInWorld(n.visibleBounds().center(),n);this.topRight=a.globalBounds().insetBy(5).topRight().addXY(0,a.padding.top());if(a.getWindow())Af.once(a.getWindow(),"remove",this,"remove");n=this.get("searchInput");var q=a.scroll;a=a.selection;e.position=a.lead;e.before={scroll:q,position:a.lead,selectionRange:a.range,
selectionReverse:a.isReverse()};e.last&&e.last.found&&(Af.disconnect(n,"inputChanged",this,"search"),this.input=e.last.needle,Af.connect(n,"inputChanged",this,"search"),this.addSearchMarkersForPreview(e.last.found));this.focus();n.selectAll()}}},{key:"advance",value:function(a){var e=this.state.inProgress;if(e&&e.found){var n=e.found.range;e=n.start;n=n.end;this.state.position=a!==this.state.backwards?a?n:e:a?e:n}this.state.backwards=a;return this.search()}},{key:"searchNext",value:function(){return this.advance(!1)}},
{key:"searchPrev",value:function(){return this.advance(!0)}},{key:"search",value:function(){if(!this.input)return this.cleanup(),null;var a=this.state,e=a.backwards,n={backwards:e,start:a.position};a=this.target.search(this.input,n);n=this.state.inProgress=Object.assign({},n,{needle:this.input,found:a});this.applySearchResult(n);a?this.addSearchMarkers(a,e):this.cleanup();return n}},{key:"showTextMap",value:function(){var a=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==
n.nextAddress)return n.yield(System.import("lively.morphic/text/map.js"),2);e=a.textMap=Af.morph({type:"textmap"});e.attachTo(a.target);e.isLayoutable=!1;a.addMorph(e);e.topRight=a.innerBounds().bottomRight().addXY(0,5);e.height=a.target.height-a.target.padding.top()-a.height-15;e.update();a.renderOnGPU=!0;return n.return(e)})}},{key:"removeTextMap",value:function(){this.textMap&&(this.textMap.remove(),this.textMap.detachFromCurrentTextMorph(),this.textMap=null)}},{key:"keybindings",get:function(){return[{keys:"Enter",
command:"search next or replace and go to next"},{keys:"Alt-Enter",command:"only search prev"},{keys:"Tab",command:"change focus"},{keys:{mac:"Ctrl-O",win:"Alt-O"},command:"occur with search term"},{keys:"Ctrl-W",command:"yank next word from text"},{keys:"Escape",command:"cancel search"},{keys:{win:"Ctrl-F|Ctrl-S|Ctrl-G",mac:"Meta-F|Ctrl-S|Meta-G"},command:"search next"},{keys:{win:"Ctrl-Shift-F|Ctrl-R|Ctrl-Shift-G",mac:"Meta-Shift-F|Ctrl-R|Meta-Shift-G"},command:"search prev"}]}},{key:"commands",
get:function(){var a=this;return[{name:"occur with search term",exec:function(){var e,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(System.import("lively.morphic/text/occur.js"),2);e=q.yieldResult;n=e.occurStartCommand;a.target.addCommands([n]);a.execCommand("accept search");return q.return(a.target.execCommand("occur",{needle:a.input}))})}},{name:"accept search",exec:function(){a.acceptSearch();return!0}},{name:"cancel search and reset cursor in text",
exec:function(){a.cancelSearch(!0);return!0}},{name:"cancel search",exec:function(){a.cancelSearch(!1);return!0}},{name:"search next",exec:function(){a.searchNext();return!0}},{name:"search prev",exec:function(){a.searchPrev();return!0}},{name:"only search prev",exec:function(){if(a.get("searchInput").isFocused())return a.searchPrev(),!0}},{name:"search next or replace and go to next",exec:function(e,n,q){a.get("searchInput").acceptInput();return a.execCommand(a.get("replaceInput").isFocused()?"replace and go to next":
"search next",n,q)}},{name:"replace current search location with replace input",exec:function(){var e=Af.Path("state.inProgress").get(a);if(e.found){var n=a.get("replaceInput").textString;a.get("replaceInput").get("replaceInput").acceptInput();e.needle instanceof RegExp&&(n=e.found.match.replace(e.needle,n));a.target.replace(e.found.range,n)}return!0}},{name:"replace and go to next",exec:function(){a.execCommand("replace current search location with replace input");a.execCommand(a.state.backwards?
"search prev":"search next");return!0}},{name:"replace all",exec:function(){var e=Af.Path("state.inProgress").get(a);if(e.found){e=Object.assign({},e,{start:{row:0,column:0}});var n=a.get("replaceInput").textString;a.get("replaceInput").get("replaceInput").acceptInput();var q=(new Af.TextSearcher(a.target)).searchForAll(e);a.target.undoManager.group();q.forEach(function(r){var v=r.range;r=r.match;e.needle instanceof RegExp&&(n=r.replace(e.needle,n));a.target.replace(v,n,!0,!0,!1)});a.target.undoManager.group();
a.acceptSearch()}return!0}},{name:"change focus",exec:function(){a.get("searchInput").isFocused()?a.get("replaceInput").focus():a.get("searchInput").focus();return!0}},{name:"yank next word from text",exec:function(){var e=a.target,n=e.wordRight(),q=a.get("searchInput");q.selection.isEmpty()||(q.selection.text="");e=e.textInRange({start:e.cursorPosition,end:n.range.end});q.textString+=e;return!0}}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchWidget"}},{key:"properties",
get:function(){return{name:{defaultValue:"search widget"},borderWidth:{defaultValue:1},borderColor:{defaultValue:Af.Color.gray},borderRadius:{defaultValue:3},fill:{defaultValue:Af.Color.black.withA(.6)},epiMorph:{defaultValue:!0},target:{},state:{},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search widget"}}},input:{after:["submorphs"],get:function(){var a=this.get("searchInput").textString,e=a.match(/^\/(.*)\/([a-z]*)$/);return e?new RegExp(e[1],e[2]):a},set:function(a){this.get("searchInput").textString=
String(a)}},fontSize:{after:["submorphs"],get:function(){return this.get("searchInput").fontSize},set:function(a){this.get("replaceInput").fontSize=a}},fontFamily:{after:["submorphs"],get:function(){return this.get("searchInput").fontFamily},set:function(a){this.get("searchInput").fontFamily=a;this.get("replaceInput").fontFamily=a}},layout:{initialize:function(){this.layout=new Af.GridLayout({groups:{nextButton:{resize:!1},prevButton:{resize:!1},acceptButton:{resize:!1},cancelButton:{resize:!1}},
rows:[0,{fixed:28,paddingTop:5,paddingBottom:2.5},1,{fixed:28,paddingTop:2.5,paddingBottom:5}],columns:[0,{paddingLeft:5,paddingRight:5},1,{fixed:25},2,{fixed:25},3,{fixed:5},4,{fixed:25},5,{fixed:25},6,{fixed:10}],grid:[["searchInput","nextButton","prevButton",null,"acceptButton","cancelButton",null],["replaceInput","replaceButton","replaceButton",null,"replaceAllButton","replaceAllButton",null]]})}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[Af.morph({type:"button",name:"acceptButton",
label:Af.Icon.textAttribute("check-circle")}).fit(),Af.morph({type:"button",name:"cancelButton",label:Af.Icon.textAttribute("times-circle")}).fit(),Af.morph({type:"button",name:"nextButton",label:Af.Icon.textAttribute("arrow-alt-circle-down",{textStyleClasses:["far"]})}).fit(),Af.morph({type:"button",name:"prevButton",label:Af.Icon.textAttribute("arrow-alt-circle-up",{textStyleClasses:["far"]})}).fit(),Af.morph({type:"input",name:"searchInput",placeholder:"search input",historyId:"lively.morphic-text search"}),
Af.morph({type:"input",name:"replaceInput",placeholder:"replace input",historyId:"lively.morphic-text replace"}),Af.morph({type:"button",styleClasses:["replace"],name:"replaceButton",label:"replace"}),Af.morph({type:"button",styleClasses:["replace"],name:"replaceAllButton",label:"replace all"})];Af.connect(this.get("searchInput"),"onBlur",this,"onBlur");Af.connect(this.get("replaceInput"),"onBlur",this,"onBlur")}},textMap:{after:["submorphs"]}}}}],d,{pathInPackage:function(){return"text/search.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3867,end:21734})}(Af.Morph);Af.SearchWidget=PU;Af.SearchWidget=PU;Af.SearchWidget=PU;var WK=[{name:"search in text",exec:function(b,d){d=void 0===d?{backwards:!1}:d;b=b._searchWidget||(b._searchWidget=new Af.SearchWidget({target:b,extent:Af.pt(300,20)}));b.state.backwards=d.backwards;
b.prepareForNewSearch();Af.config.codeEditor.search.showTextMap&&b.showTextMap();return!0}}];Af.searchCommands=WK;Af.searchCommands=WK;Af.searchCommands=WK;var mk=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js");mk.todo=function(b){throw Error("not yet implemented "+b);};mk.Rectangle=ie;mk.rect=cl;mk.pt=xh;mk.arr=cf;mk.Range=wt;var Mca=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js"),h=d.hasOwnProperty("TextLayout")&&"function"===typeof d.TextLayout?
d.TextLayout:d.TextLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},{key:"reset",value:function(){this.resetLineCharBoundsCache()}},{key:"restore",value:function(a,e){var n=function(v){var y=0;return mk.arr.flatten(mk.arr.histogram(v,v.length/3).map(function(D){var E=$jscomp.makeIterator(D);D=E.next().value;var I=E.next().value;
E=E.next().value;for(var K=[],P=0;P<D;P++)K.push(mk.rect(y,0,I,E)),y+=I;return K}))};a=$jscomp.makeIterator(a);for(var q=a.next();!q.done;q=a.next()){var r=$jscomp.makeIterator(q.value);q=r.next().value;r=r.next().value;r=n(r);this.lineCharBoundsCache.set(e.document.getLine(q),r)}}},{key:"resetLineCharBoundsCache",value:function(a){this.lineCharBoundsCache=new WeakMap;a&&!a._isDeserializing&&(this.estimateLineHeights(a),a.makeDirty())}},{key:"resetLineCharBoundsCacheOfLine",value:function(a){a&&this.lineCharBoundsCache.set(a,
null)}},{key:"resetLineCharBoundsCacheOfRow",value:function(a,e){var n=a.document;a._isDeserializing&&a._initializedByCachedBounds||n&&this.resetLineCharBoundsCacheOfLine(n.getLine(e))}},{key:"resetLineCharBoundsCacheOfRange",value:function(a,e){for(var n=e.start.row;n<=e.end.row;n++)this.resetLineCharBoundsCacheOfRow(a,n)}},{key:"estimateLineHeightsInRange",value:function(a,e){for(var n=a.document,q=a.getGlobalTransform(),r=e.start.row;r<=e.end.row;r++)this.resetLineCharBoundsCacheOfRow(a,n.getLine(r),
q)}},{key:"estimateExtentOfLine",value:function(a,e,n){n=void 0===n?a.getGlobalTransform():n;var q=a.fontMetric,r=a.lineWrapping,v=a.padding,y=a.textRenderer,D=a.debug,E=a.defaultTextStyle,I=a.getProperty("extent").x,K=v.left(),P=v.right(),N=v.top();v=v.bottom();y=y.directRenderTextLayerFn(a);var aa=e.textAndAttributes,m=[],t;I=I-K-P;if(aa&&aa.length)for(var u=0,B=0;u<aa.length;u+=2)(t=aa[u])&&t.isMorph?(t.position=this.pixelPositionFor(a,{row:e.row,column:B}).subPt(a.origin),B++):t&&(B+=t.length),
m.push(Object.assign({},E,{},aa[u+1]));else m.push(E);aa=m.length;for(u=E=t=0;u<aa;u++){B=q.defaultCharExtent(a,{defaultTextStyle:m[u],width:1E3,transform:n,paddingBottom:v,paddingTop:N,paddingRight:P,paddingLeft:K},y);var A=B.width;E=Math.max(B.height,E);t+=A}a=E;n=e.text.length||1;q=Math.round(t/aa);K=n*q;K=r?Math.min(K,I):K;r&&(a=Math.round((Math.ceil(n/Math.max(3,I/q))||1)*E));D&&console.log(e.row+": "+e.height+" => "+a);e.changeExtent(K,a,!0)}},{key:"estimateLineHeights",value:function(a,e){var n=
a.fontMetric,q=a.textRenderer,r=a.document,v=a.defaultTextStyle,y=a.clipMode,D=a.textAlign,E=a.padding,I=a.lineWrapping,K=a.debug,P=a.getProperty("extent"),N=P.x,aa=P.y;P=a.getGlobalTransform();var m=E.left(),t=E.right(),u=E.top();E=E.bottom();r=r.lines;var B=q.directRenderTextLayerFn(a);K&&(K=a.debugHelper(K),K.debugTextLayout||(K=!1));if(!K&&10>a.lineCount()&&3E3>a.document.stringSize&&!mk.arr.any(a.textAndAttributes,function(A){return A&&void 0!=A.fontFamily}))for(e=q.directRenderLineFn(a),e=n.manuallyComputeBoundsOfLines(a,
r,0,0,{defaultTextStyle:v,width:N,height:aa,clipMode:y,lineWrapping:I,textAlign:D,transform:P,paddingLeft:m,paddingRight:t,paddingTop:u,paddingBottom:E},B,e),v=0;v<r.length;v++)K=e[v],r[v].changeExtent(K.width,K.height,!n.isFontSupported(a.fontFamily,a.fontWeight));else{for(v=n=0;v<r.length;v++)y=r[v],!e&&0<y.height||(n++,this.estimateExtentOfLine(a,y,P));a.viewState._textLayoutStale=!1;K&&K.log("estimateLineHeights, "+n+"/"+r.length+" updated, force: "+e)}}},{key:"defaultCharExtent",value:function(a){var e=
a.textRenderer,n=a.fontMetric,q=a.defaultTextStyle,r=a.getGlobalTransform();e=e.directRenderTextLayerFn(a);return n.defaultCharExtent(a,{transform:r,defaultTextStyle:q,width:1E3},e)}},{key:"textBounds",value:function(a){var e=a.document,n=a.padding,q=a.borderWidthLeft,r=a.borderWidthRight,v=a.borderWidthTop;a=a.borderWidthBottom;return new mk.Rectangle(n.left(),n.top(),Math.round(e.width+q+r),Math.round(e.height+v+a))}},{key:"isFirstLineVisible",value:function(a){return 0>=a.viewState.firstVisibleRow}},
{key:"isLastLineVisible",value:function(a){return a.viewState.lastVisibleRow>=a.lineCount()-1}},{key:"isLineVisible",value:function(a,e){return e>=a.viewState.firstVisibleRow&&e<=a.viewState.lastVisibleRow}},{key:"isLineFullyVisible",value:function(a,e){return e>=a.viewState.firstFullyVisibleRow&&e<=a.viewState.lastFullyVisibleRow}},{key:"whatsVisible",value:function(a){var e=a.viewState.firstVisibleRow,n=a.viewState.lastVisibleRow;return{lines:a.document.lines.slice(e,n),startRow:e,endRow:n}}},{key:"firstFullVisibleLine",
value:function(a){return a.viewState.firstFullyVisibleRow}},{key:"lastFullVisibleLine",value:function(a){return a.viewState.lastFullyVisibleRow}},{key:"screenLineRange",value:function(a,e,n){var q=e.row,r=e.column;r=Math.max(0,r);q=Math.min(a.lineCount()-1,Math.max(0,q));var v=this.charBoundsOfRow(a,q);r>v.length-1&&(r=v.length-1);for(var y=v[r],D=e=r,E=r+1;E<v.length&&!(v[E].y+v[E].height>y.y+y.height);E++)D=E;D===v.length-1&&D++;for(E=r-1;0<=E&&!(v[E].y+v[E].height<y.y+y.height);E--)e=E;n&&(a=a.getLine(q).slice(e,
D).match(/^\s*/)[0].length,e+=a);return new mk.Range({start:{row:q,column:e},end:{row:q,column:D}})}},{key:"rangesOfWrappedLine",value:function(a,e){for(var n=a.getLine(e).length,q=0,r=[];;){var v=this.screenLineRange(a,{row:e,column:q},!1);r.push(v);if(v.end.column>=n)break;var y=v.end.column+1;if(y>=n)break;if(y<=q){if(!a.env.renderer.getNodeForMorph(a))break;throw Error("should not happen "+v.end.column+" vs "+q);}q=y}return r}},{key:"chunkAtPos",value:function(a,e){mk.todo("chunkAtPos")}},{key:"charBoundsOfRow",
value:function(a,e){e=a.document.getLine(e);a._initializedByCachedBounds&&!this._restored&&(this.restore(a._initializedByCachedBounds,a),this._restored=!0);var n=this.lineCharBoundsCache.get(e);if(n)return n;var q=a.getProperty("extent");n=q.x;q=q.y;var r=a.fontMetric,v=a.textRenderer,y=a.defaultTextStyle,D=a.clipMode,E=a.textAlign,I=a.padding,K=a.lineWrapping,P=a.getGlobalTransform(),N=I.left(),aa=I.right(),m=I.top();I=I.bottom();var t=v.directRenderLineFn(a);v=v.directRenderTextLayerFn(a);a=r.manuallyComputeCharBoundsOfLine(a,
e,0,0,{defaultTextStyle:y,width:n,height:q,clipMode:D,lineWrapping:K,textAlign:E,paddingLeft:N,paddingRight:aa,paddingTop:m,paddingBottom:I,transform:P},v,t);if(a.find(function(u){return void 0==u.width&&void 0==u.height}))return a;this.lineCharBoundsCache.set(e,a);return a}},{key:"computeMaxBoundsForLineSelection",value:function(a,e){var n=e.start,q=e.end,r=a.textLayout,v=r.rangesOfWrappedLine(a,n.row).find(function(y){return y.containsPosition(n)});q=a.lineWrapping&&v?v.intersect(e).end:q;q=q.row==
n.row?q:{row:q.row,column:-1};e=r.charBoundsOfRow(a,n.row);e=0>q.column?e.slice(n.column):e.slice(n.column,q.column+1);q=n.column+(e?e.indexOf(mk.arr.max(e,function(y){return y.height})):0);return r.boundsFor(a,{row:n.row,column:q})}},{key:"boundsFor",value:function(a,e){var n=e.row;e=e.column;e=Math.max(0,e);n=Math.min(a.lineCount()-1,Math.max(0,n));var q=this.charBoundsOfRow(a,n);if(0<q.length)if(e>=q.length){var r=q[q.length-1];r=new mk.Rectangle(r.x+r.width,r.y,0,r.height)}else r=mk.Rectangle.fromLiteral(q[e]);
r||(console.warn("Cannot compute bounds for line "+n+"/"+e),r=new mk.Rectangle(0,0,0,0));e=a.document;a=a.padding;r.x+=a.left();r.y=r.y+e.computeVerticalOffsetOf(n)+a.top();return r}},{key:"pixelPositionFor",value:function(a,e){return this.boundsFor(a,e).topLeft()}},{key:"textPositionFromPoint",value:function(a,e){var n=e.addPt(a.origin),q=n.x,r=n.y,v=a.document;n=a.padding;var y=n.left(),D=n.top();if(r>v.height+D)return v.endPosition;if(r<D)return{row:0,column:0};n=v.findLineByVerticalOffset(r-D);
if(!n)return{row:0,column:0};var E=n.line.row;a=this.charBoundsOfRow(a,E);var I=a.length,K=a[0],P=a[I-1];n={row:E,column:0};q-=y;r-=D+v.computeVerticalOffsetOf(E);if(0===I||q<=K.x+Math.round(K.width/2)&&r>=K.y&&r<=K.y+K.height)return n;if(q>P.x+Math.round(P.width/2)&&r>=P.y&&r<=P.y+P.height)return n.column=I,n;y=[];for(v=I-1;0<=v;v--)if(P=D=a[v],E=P.x,I=P.width,K=P.y,P=P.height,!(r<K||r>K+P)&&(y.push(D),q>=E+Math.round(I/2)))return n.column=1===y.length?v:v+1,n;if(y.length)return n.column=a.indexOf(mk.arr.last(y)),
n;q=Infinity;r=-1;for(v=0;v<a.length;v++)y=a[v],y=e.distSquared(mk.pt(y.x+y.width/2,y.y+y.height/2)),y>=q||(q=y,r=v);n.column=r;return n}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextLayout"}}],d,{pathInPackage:function(){return"text/layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:244,end:17233})}(void 0),
Wwa=Mca=mk.TextLayout;mk.default=Mca;var De=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js");De.printViewState=function(b){var d=b.viewState,h=d.scrollTop,a=d.scrollHeight,e=d.textHeight,n=d.firstVisibleRow;d=d.lastVisibleRow;var q=b.document.lines;console.log(b+" #"+b.id.slice(0,12)+"\nscroll: "+h+" + "+a+"\nlines: "+n+" - "+d+"\nvisible lines: "+(d-n)+"\nheight: "+e+", "+q.length+" lines")};De.installCSS=function(b){var d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==
h.nextAddress)return De.cssInstalled=!0,h.yield(De.waitFor(2E4,function(){return b.renderer&&b.renderer.domNode}),2);d=h.yieldResult;De.addOrChangeCSSDeclaration("new-text-css","\n\n    /* markers */\n\n    .newtext-marker-layer {\n      position: absolute;\n    }\n\n    /* selection / cursor */\n\n    .newtext-cursor {\n      z-index: 5;\n      pointer-events: none;\n      position: absolute;\n      background-color: black;\n    }\n\n    .hidden-cursor .newtext-cursor {\n      background-color: transparent !important;\n    }\n\n    .newtext-cursor.diminished {\n      background-color: gray;\n    }\n\n    .newtext-selection-layer {\n      position: absolute;\n    }\n\n    /*-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* text layer / content */\n\n    .newtext-text-layer {\n      box-sizing: border-box;\n      position: absolute;\n      white-space: pre;\n      z-index: 0;\n      min-width: 100%;\n      pointer-events: none;\n    }\n\n    .newtext-before-filler {}\n\n    .newtext-text-layer.wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-word;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.only-wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.wrap-by-chars {\n      white-space: pre-wrap;\n      word-break: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.no-wrapping {\n    }\n\n    .newtext-text-layer a {\n       pointer-events: auto;\n    }\n\n    .newtext-text-layer.auto-width .line {\n      width: fit-content;\n    }\n\n    .newtext-text-layer .line {\n      -moz-border-radius: 0;\n      -webkit-border-radius: 0;\n      border-radius: 0;\n      border-width: 0;\n      background: transparent;\n      font-family: inherit;\n      font-size: inherit;\n      margin: 0;\n      word-wrap: normal;\n      line-height: inherit;\n      color: inherit;\n      position: relative;\n      overflow: visible;\n      -webkit-tap-highlight-color: transparent;\n      -webkit-font-variant-ligatures: contextual;\n      font-variant-ligatures: contextual;\n    }\n\n    .line > .Morph {\n      display: inline-block !important;\n      vertical-align: top !important;\n    }\n\n    blockquote {\n      margin: 0;\n      -webkit-margin-start: 0;\n      -webkit-margin-end: 0;\n    }\n\n    .newtext-text-layer blockquote {\n      margin-left: 2em;\n      margin-right: 2em;\n      border-left: 2px lightgray solid;\n      padding-left: 2%;\n    }\n\n    /* -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* debug styling */\n\n    .debug-info {\n      position: absolute;\n      outline: 1px solid green;\n      pointer-events: none;\n      z-index: 4;\n      text-align: center;\n      font-family: monospace;\n      color: green;\n      background-color: white;\n      font-size: small;\n      vertical-align: baseline;\n    }\n\n    .debug-line {\n      position: absolute;\n      outline: 1px solid red;\n      pointer-events: none;\n      z-index: 4,\n      text-align: right;\n      font-family: monospace;\n      font-size: small;\n      vertical-align: baseline;\n      color: red;\n    }\n\n    .debug-char {\n      position: absolute;\n      outline: 1px solid orange;\n      pointer-events: none;\n      z-index: 3\n    }\n\n  ",
d.getRootNode());h.jumpToEnd()})};De.extractHTMLFromTextMorph=mI;De.obj=xf;De.Path=Eg;De.arr=cf;De.num=jk;De.pt=xh;De.Rectangle=ie;De.vdom=gC;De.splitTextAndAttributesIntoLines=my;De.defaultAttributes=hx;De.defaultStyle=gx;De.addOrChangeCSSDeclaration=Kp;De.hyperscriptFnForDocument=oJ;De.objectReplacementChar="\ufffd";De.config=Yk;De.getSvgVertices=fx;De.waitFor=Yr;var XK=De.vdom;De.h=XK.h;De.create=XK.create;De.patch=XK.patch;De.diff=XK.diff;De.cssInstalled=!1;De.debug=!!De.config.onloadURLQuery["debug-text"];
De.nextTick=function(b,d,h,a,e,n){for(;!e&&h<d.length;)e=b[d[h++]+"equestAnimationFrame"];return e&&e.bind(b)||b.setImmediate||function(q){b.setTimeout(q,0)}}("undefined"!==typeof window?window:global,["r","webkitR","mozR","msR","oR"],0);(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),h=d.hasOwnProperty("AfterTextRenderHook")&&"function"===typeof d.AfterTextRenderHook?d.AfterTextRenderHook:d.AfterTextRenderHook=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"reset",value:function(a){this.morph=a;this.needsRerender=this.called=!1}},{key:"updateLineHeightOfNode",value:function(a,e,n){if(0===e.height||e.hasEstimatedExtent){var q=a.getGlobalTransform().inverse();q.e=q.f=0;var r=1!=q.getScale()||0!=q.getRotation();r&&(n.style.transform=q.toString());var v=n.getBoundingClientRect();q=v.height;v=v.width;r&&(n.style.transform="");q&&v&&(e.height!==q||e.width!==v)&&a.fontMetric.isFontSupported(a.fontFamily,
a.fontWeight)&&(e.changeExtent(v,q,!1),a.textLayout.resetLineCharBoundsCacheOfLine(e),this.needsRerender=!0,a.viewState._needsFit=!0);if(e.textAndAttributes&&e.textAndAttributes.length)for(v=r=0;r<e.textAndAttributes.length;r+=2)(n=e.textAndAttributes[r])&&n.isMorph?(a._positioningSubmorph=n,n.position=a.textLayout.pixelPositionFor(a,{row:e.row,column:v}).subPt(a.origin),n._dirty=!1,a._positioningSubmorph=null,v++):n&&(v+=n.length);return q}return e.height}},{key:"updateExtentsOfLines",value:function(a){var e=
this.morph,n=e.viewState,q=e.fontMetric;n.dom_nodes=[];n.dom_nodeFirstRow=0;n.textWidth=a.scrollWidth;a=a.children;for(var r=0,v;r<a.length&&"line"!=a[r].className;)r++;if(r<a.length){v=a[r];var y=v.dataset;y=Number(y?y.row:v.getAttribute("data-row"));if("number"===typeof y&&!isNaN(y)){n.dom_nodeFirstRow=y;v=0;y=e.document.getLine(y);for(var D;r<a.length;r++){var E=a[r];n.dom_nodes.push(E);y&&(D||(D=y.hasEstimatedExtent),y.hasEstimatedExtent=D,v+=this.updateLineHeightOfNode(e,y,E),y.hasEstimatedExtent=
!q.isFontSupported(e.fontFamily,e.fontWeight),y=y.nextLine())}this.needsRerender?(e.fitIfNeeded(),e.makeDirty()):e._dirty=!!e.submorphs.find(function(I){return I.needsRerender()})}}}},{key:"hook",value:function(a,e,n){a&&a.parentNode&&(e=this.morph.viewState,e.text_layer_node=a,e.fontmetric_text_layer_node=null,this.called=!0,this.updateExtentsOfLines(a))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AfterTextRenderHook"}}],d,{pathInPackage:function(){return"text/renderer.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5177,end:9252})})(void 0);var Nca=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),h=d.hasOwnProperty("TextRenderer")&&"function"===typeof d.TextRenderer?d.TextRenderer:d.TextRenderer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a.domEnv?De.cssInstalled||De.installCSS(a):console.warn("Text renderer initialized without domEnv. Depending on what you want to do you might have bad luck...!");this.domEnv=a.domEnv}},{key:"directRenderLineFn",value:function(a){var e=this,n=a.viewState._renderLineFn;if(!n){var q=De.hyperscriptFnForDocument(this.domEnv.document);n=a.viewState._renderLineFn=function(r){return e.renderLine(q,null,a,r)}}return n}},
{key:"directRenderTextLayerFn",value:function(a){var e=this,n=a.viewState._renderTextLayerFn;if(!n){var q=De.hyperscriptFnForDocument(this.domEnv.document);n=a.viewState._renderTextLayerFn=function(r){return e.renderJustTextLayerNode(q,a,r,[])}}return n}},{key:"renderMorph",value:function(a,e){var n=a.getProperty("selection");return n&&!n.isEmpty()||!a.readOnly?this.renderInteractiveText(a,e):this.renderMorphFast(a,e)}},{key:"renderMorphFast",value:function(a,e){var n=this,q=this.renderJustTextLayerNode(De.h,
a,null,this.renderAllLines(De.h,e,a)),r=a.embeddedMorphMap,v=r?a.submorphs.filter(function(y){return!r.has(y)}):a.submorphs;q.properties.style.position="static";q.properties.className+=" actual";q.properties.style.overflow="visible"===a.clipMode?"visible":"hidden";this.ensureLayoutUpdateHook(a,q);v=e.renderSelectedSubmorphs(a,v);q=[q];Array.isArray(v)?q.push.apply(q,$jscomp.arrayFromIterable(v)):q.push(v);v=De.defaultStyle(a);a.fixedHeight||delete v.height;a.fixedWidth||delete v.width;De.nextTick(function(){n.manuallyTriggerTextRenderHook(a,
e)});return De.h("div",Object.assign({},De.defaultAttributes(a,e),{style:Object.assign({},v,{"-moz-user-select":"none",cursor:"auto"===a.nativeCursor?a.readOnly?"default":"text":a.nativeCursor})}),q)}},{key:"renderInteractiveText",value:function(a,e){var n=this.renderSelectionLayer(a),q=this.renderTextLayer(a,e),r=this.renderJustTextLayerNode(De.h,a,null,[]),v=this.renderMarkerLayer(a,e),y=this.renderScrollLayer(a),D=a.embeddedMorphMap,E=D?a.submorphs.filter(function(I){return!D.has(I)}):a.submorphs;
q.properties.className+=" actual";q.properties.style.overflow="visible"===a.clipMode?"visible":"hidden";r.properties.className+=" font-measure";E=e.renderSelectedSubmorphs(a,E);n=[].concat($jscomp.arrayFromIterable(n),[v,r,q]);Array.isArray(E)?n.push.apply(n,$jscomp.arrayFromIterable(E)):n.push(E);q=a.viewState.fastScroll&&!De.Path("layout.renderViaCSS").get(a);return De.h("div",Object.assign({},De.defaultAttributes(a,e),{style:Object.assign({},De.defaultStyle(a),{},a.viewState.fastScroll?{overflow:"visible"==
a.clipMode?"visible":"hidden"}:{},{"-moz-user-select":"none",cursor:"auto"===a.nativeCursor?a.readOnly?"default":"text":a.nativeCursor})}),[y].concat($jscomp.arrayFromIterable(q?[De.h("div",{className:"scrollWrapper",style:{"pointer-events":"none",position:"absolute",width:"100%",height:"100%",transform:"translate(-"+a.scroll.x+"px, -"+a.scroll.y+"px)"}},n)]:n)))}},{key:"renderScrollLayer",value:function(a){var e=a.document.width>a.width?a.scrollbarOffset:De.pt(0,0),n=a.padding.top()+a.padding.bottom();
return De.h("div",{className:"scrollLayer",style:Object.assign({position:"absolute",top:"0px"},a.viewState.fastScroll?{overflow:a.scrollActive?a.clipMode:"hidden"}:{},{width:a.width+"px",height:a.height+"px"})},[De.h("div",{style:{width:Math.max(a.document.width,a.width)+"px",height:Math.max(a.document.height,a.height)-e.y+n+"px"}})])}},{key:"renderSelectionLayer",value:function(a){var e=a.cursorWidth||1,n=a.selection;if(a.inMultiSelectMode()){e=[];n=n.selections;for(var q=0;q<n.length-1;q++)e.push.apply(e,
$jscomp.arrayFromIterable(this.renderSelectionPart(a,n[q],!0,2)));e.push.apply(e,$jscomp.arrayFromIterable(this.renderSelectionPart(a,n[q],!1,4)));return e}return this.renderSelectionPart(a,n,!1,e)}},{key:"renderTextLayer",value:function(a,e){var n=this,q=a.debug?[].concat($jscomp.arrayFromIterable(this.renderDebugLayer(a)),$jscomp.arrayFromIterable(this.renderVisibleLines(De.h,e,a))):this.renderVisibleLines(De.h,e,a);q=this.renderJustTextLayerNode(De.h,a,null,q);q.properties.style.position="absolute";
this.ensureLayoutUpdateHook(a,q);De.nextTick(function(){n.manuallyTriggerTextRenderHook(a,e)});return q}},{key:"ensureLayoutUpdateHook",value:function(a,e){var n=a.viewState.afterTextRenderHook||(a.viewState.afterTextRenderHook=new De.AfterTextRenderHook);n.reset(a);e.properties["after-text-render-hook"]=n}},{key:"manuallyTriggerTextRenderHook",value:function(a,e){var n=a.viewState.afterTextRenderHook;n&&!n.called&&((e=(e=e.getNodeForMorph(a))&&e.querySelector(".actual.newtext-text-layer"))&&n.hook(e),
a.ownerChain().every(function(q){return q.visible})&&a.fit())}},{key:"renderJustTextLayerNode",value:function(a,e,n,q){var r=e.padding,v=r.x,y=r.y,D=e.lineWrapping,E=e.fixedWidth,I=e.fixedHeight,K=e.backgroundColor,P=e.fontColor,N=e.textAlign,aa=e.fontSize,m=e.textDecoration,t=e.fontStyle,u=e.fontWeight,B=e.fontFamily,A=e.lineHeight,H=e.wordSpacing,F=e.letterSpacing,L=e.tabWidth,U={overflow:"hidden"},T=v+r.width;r=y+r.height;e=Math.max(e.document.height,e.height);var Y="newtext-text-layer";switch(E&&
D){case !0:case "by-words":Y+=" wrap-by-words";break;case "only-by-words":Y+=" only-wrap-by-words";break;case "by-chars":Y+=" wrap-by-chars";break;case !1:Y+=" no-wrapping"}E||(Y+=" auto-width");I||(Y+=" auto-height");D={className:Y,style:U};I&&(U.height=e+"px");0<v&&(U.paddingLeft=v+"px");0<T&&(U.paddingRight=T+"px");0<y&&(U.marginTop=y+"px");0<r&&(U.marginBottom=r+"px");F&&(U.letterSpacing=F);H&&(U.wordSpacing=H);A&&(U.lineHeight=A);B&&(U.fontFamily=B);u&&(U.fontWeight=u);t&&(U.fontStyle=t);m&&
(U.textDecoration=m);aa&&(U.fontSize=aa+"px");N&&(U.textAlign=N);P&&(U.color=String(P));K&&(U.backgroundColor=K);8!==L&&(U.tabSize=L);n&&(v=n.clipMode,y=n.height,n=n.width,"number"===typeof n&&(U.width=n+"px"),"number"===typeof y&&(U.height=y+"px"),v&&(U.overflow=v));return a("div",D,q)}},{key:"renderAllLines",value:function(a,e,n){var q=n.height,r=n.scroll;e.getNodeForMorph(n);r=r.y;for(var v=n.document.lines,y=v.length,D=[],E=[],I=0;I<v.length;I++){D.push(v[I]);var K=this.renderLine(a,e,n,v[I]);
E.push(K);K.key=I}Object.assign(n.viewState,{scrollTop:r,scrollHeight:q,scrollBottom:r+q,firstVisibleRow:0,lastVisibleRow:y,visibleLines:D});return E}},{key:"renderVisibleLines",value:function(a,e,n){var q=n.height,r=n.scroll,v=n.padding.y,y=n.document,D=n.clipMode;e.getNodeForMorph(n);r=r.y;var E=y.rowCount-1,I=y.height,K="visible"!==D,P=y.findLineByVerticalOffset(K?Math.max(0,K?r-v:0):0)||{row:0,y:0,offset:0,line:y.getLine(0)},N=P.line,aa=P.offset;D=P.y;P=P.row;v=y.findLineByVerticalOffset(K?Math.min(I,
r-v+q):I)||{row:E,offset:0,y:0,line:y.getLine(E)};y=v.line;var m=v.offset,t=v.row;v=K?P:0;aa=0===aa?P:P+1;E=K?t+1:E;K=y&&m!==y.height?t-1:t;this.maxVisibleLines=Math.max(this.maxVisibleLines||1,E-v+1);P=[];y=[];y.push(a("div.newtext-before-filler",{key:"filler",style:{height:D+"px"}}));for(m=0;m<this.maxVisibleLines&&(P.push(N),t=this.renderLine(a,e,n,N),y.push(t),t.key=N.row%this.maxVisibleLines,m++,N=N.nextLine(),N););Object.assign(n.viewState,{scrollTop:r,scrollHeight:q,scrollBottom:r+q,heightBefore:D,
textHeight:I,firstVisibleRow:v,lastVisibleRow:E,firstFullyVisibleRow:aa,lastFullyVisibleRow:K,visibleLines:P});n.debug&&De.printViewState(n);return y}},{key:"renderLine",value:function(a,e,n,q){var r=q.textAndAttributes,v=[],y=r.length,D=n.fontSize;if(0<y)for(var E=0;E<y;E+=2){var I=r[E]||"\u00a0";var K=r[E+1];if("string"!==typeof I)v.push(I.isMorph?this.renderEmbeddedSubmorph(a,e,I,K):De.objectReplacementChar);else if(K){var P=K.fontSize&&(De.obj.isString(K.fontSize)?K.fontSize:K.fontSize+"px");
var N=K.fontFamily;var aa=K.fontWeight;var m=K.fontStyle;var t=K.textDecoration;var u=K.fontColor;var B=K.backgroundColor;var A=K.nativeCursor;var H=K.textStyleClasses;var F=K.link;var L=K.lineHeight||L;var U=K.textAlign||U;var T=K.wordSpacing||T;var Y=K.letterSpacing||Y;var wa=K.paddingRight;var Ga=K.paddingLeft;var na=K.paddingTop;var ea=K.paddingBottom;var da=K.verticalAlign;var ia=K.textStroke;var Oa=K.quote||Oa;var Va="span";var eb={};var Sa={style:eb};P&&K.fontSize<D&&(D=K.fontSize);F&&(Va=
"a",(Sa.href=F)&&F.startsWith("http")&&(Sa.target="_blank"));if(F||A)eb.pointerEvents="auto";P&&(eb.fontSize=P);N&&(eb.fontFamily=N);aa&&(eb.fontWeight=aa);m&&(eb.fontStyle=m);t&&(eb.textDecoration=t);u&&(eb.color=String(u));B&&(eb.backgroundColor=String(B));A&&(eb.cursor=A);wa&&(eb.paddingRight=wa);Ga&&(eb.paddingLeft=Ga);na&&(eb.paddingTop=na);ea&&(eb.paddingBottom=ea);da&&(eb.verticalAlign=da);ia&&(eb["-webkit-text-stroke"]=ia);K.doit&&(eb.pointerEvents="auto",eb.cursor="pointer");H&&H.length&&
(Sa.className=H.join(" "));v.push(a(Va,Sa,I))}else v.push(I)}else v.push(a("br"));e={};n.fontSize>D&&(e.fontSize=D+"px");L&&(e.lineHeight=L);U&&(e.textAlign=U);Y&&(e.letterSpacing=Y);T&&(e.wordSpacing=T);n=a("div",{className:"line",style:e,dataset:{row:q.row}},v);if(Oa)for("number"!==typeof Oa&&(Oa=1);Oa--;)n=a("blockquote",{},n);return n}},{key:"renderEmbeddedSubmorph",value:function(a,e,n,q){q=q||{};if(e)return a=e.render(n),a.properties.style.position="relative",a.properties.style.transform="",
a.properties.style.textAlign="initial",q.paddingTop&&(a.properties.style.marginTop=q.paddingTop),q.paddingLeft&&(a.properties.style.marginLeft=q.paddingLeft),q.paddingRight&&(a.properties.style.marginRight=q.paddingRight),q.paddingBottom&&(a.properties.style.marginBottom=q.paddingBottom),a;e=n.extent;q=e.x+"px";e=e.y+"px";return a("div",{className:n.styleClasses.join(" "),style:{width:q,height:e}},[])}},{key:"renderSelectionPart",value:function(a,e,n,q){n=void 0===n?!1:n;q=void 0===q?2:q;if(!e)return[];
var r=a.textLayout,v=e.start,y=e.end,D=e.cursorVisible,E=e.selectionColor,I=a.document,K=a.cursorColor,P=e.isReverse();v=r.boundsFor(a,v);var N=r.computeMaxBoundsForLineSelection(a,e),aa=r.boundsFor(a,y);De.pt(v.x,N.y);N=De.pt(aa.x,aa.y);y=v.height;aa=aa.height;v=P?De.pt(v.x,v.y):N;n=this.cursor(v,P?y:aa,D,n,q,K);if(e.isEmpty())return[n];q=[];D=e.start.row;K=I.computeVerticalOffsetOf(D)+a.padding.top();P=a.padding.left();for(var m,t,u;D<=e.end.row;){y=I.getLine(D);if(!(D<a.viewState.firstVisibleRow-
50)){if(D>a.viewState.lastVisibleRow+50)break;v=r.charBoundsOfRow(a,D).map(De.Rectangle.fromLiteral);aa=D==e.start.row;if(u=v[0].bottom()<De.arr.last(v).top()){N=r.rangesOfWrappedLine(a,D).map(function(F){return F.intersect(e)});t=aa;var B=0,A=m=void 0,H=$jscomp.makeIterator(N);for(N=H.next();!N.done;N=H.next())N=N.value,N.isEmpty()||(m=v.slice(N.start.column,N.end.column),B=t?De.arr.min(m.map(function(F){return F.top()})):B,A=De.arr.max(m.map(function(F){return F.bottom()})),t=m[0],N=De.pt(P+t.left(),
K+B),t=De.arr.last(m),m=De.pt(P+t.right(),K+A),B=A,t=!1,q.push(De.Rectangle.fromAny(N,m)))}u||(u=D==e.end.row,N=aa?e.start.column:0,B=u?e.end.column:v.length-1,aa=aa&&De.arr.min(v.slice(N,B+1).map(function(F){return F.top()}))||0,H=N>=B?5:0,t=v[N],N=De.pt(P+(t?t.left():De.arr.last(v).right()),K+aa),t=v[B],e.includingLineEnd?m=De.pt(a.width-a.padding.right(),K+aa+y.height):(u=u&&e.end.column<=v.length-1,m=De.pt(P+(t?u?t.left():t.right():De.arr.last(v).right())+H,K+aa+y.height)),q.push(De.Rectangle.fromAny(N,
m)))}K+=y.height;D++}a=this.selectionLayerRounded(q,E,a);a.push(n);return a}},{key:"selectionLayerRounded",value:function(a,e,n){var q=[n={left:[],right:[]}];a=$jscomp.makeIterator(a);for(var r=a.next();!r.done;r=a.next()){r=r.value;v&&(v.left()>r.right()||v.right()<r.left())&&q.push(n={left:[],right:[]});n.left.push(r.topLeft(),r.bottomLeft());n.right.push(r.topRight(),r.bottomRight());var v=r}v=[];n={};q=$jscomp.makeIterator(q);for(a=q.next();!a.done;n={$jscomp$loop$prop$pos$2796:n.$jscomp$loop$prop$pos$2796},
a=q.next())if(a=a.value,a.left.length){n.$jscomp$loop$prop$pos$2796=a.left.reduce(function(P,N){return P.minPt(N)});r=a.left.concat(a.right.reverse());a=[];for(var y=0;y<r.length;y++){var D=r[y-1]||De.arr.last(r),E=r[y],I=r[y+1]||De.arr.first(r),K=D.subPt(E).normalized().scaleBy(6);D=E.addPt(K);D._next=K.scaleBy(-1);I=I.subPt(E).normalized().scaleBy(6);E=E.addPt(I);E._prev=I.scaleBy(-1);a.push(D,E)}a=a.map(function(P){return function(N){return{position:N.subPt(P.$jscomp$loop$prop$pos$2796),isSmooth:!0,
controlPoints:{next:N._next||De.pt(0),previous:N._prev||De.pt(0)}}}}(n));r=De.getSvgVertices(a);E=a.map(function(P){return P.position}).reduce(function(P,N){return P.minPt(N)});y=E.y;E=E.x;a=a.map(function(P){return P.position}).reduce(function(P,N){return P.maxPt(N)});v.push(De.h("svg",{namespace:"http://www.w3.org/2000/svg",version:"1.1",style:{position:"absolute",left:n.$jscomp$loop$prop$pos$2796.x+"px",top:n.$jscomp$loop$prop$pos$2796.y+"px",width:a.x-E,height:a.y-y}},De.h("path",{namespace:"http://www.w3.org/2000/svg",
attributes:{d:r,fill:e.toString()}})))}return v}},{key:"cursor",value:function(a,e,n,q,r,v){return De.h("div",{className:"newtext-cursor"+(q?" diminished":""),style:{left:a.x-Math.ceil(r/2)+"px",top:a.y+"px",width:r+"px",height:e+"px",display:n?"":"none",background:v||"black"}})}},{key:"renderMarkerLayer",value:function(a){var e=a.markers,n=a.viewState,q=n.firstVisibleRow;n=n.lastVisibleRow;var r=[];if(!e)return r;e=$jscomp.makeIterator(e);for(var v=e.next();!v.done;v=e.next()){var y=v.value;v=y.style;
y=y.range;var D=y.start;y=y.end;if(!(y.row<q||D.row>n))if(D.row===y.row)r.push(this.renderMarkerPart(a,D,y,v));else{r.push(this.renderMarkerPart(a,D,a.lineRange(D.row).end,v));for(D=D.row+1;D<=y.row-1;D++){var E=a.lineRange(D);r.push(this.renderMarkerPart(a,E.start,E.end,v,!0))}r.push(this.renderMarkerPart(a,{row:y.row,column:0},y,v))}}return r}},{key:"renderMarkerPart",value:function(a,e,n,q,r){r=void 0===r?!1:r;var v=a.document,y=a.textLayout;var D=v.getLine(e.row);r?(a=a.padding,r=a.left(),e=a.top()+
v.computeVerticalOffsetOf(e.row),a=r+D.width,D=D.height):(D=y.boundsFor(a,e),r=D.x,e=D.y,D=y.boundsFor(a,n),a=D.x,D=D.height);D=Math.ceil(D);return De.h("div.newtext-marker-layer",{style:Object.assign({},q,{left:r+"px",top:e+"px",height:D+"px",width:a-r+"px"})})}},{key:"renderDebugLayer",value:function(a){var e=[],n=a.viewState,q=n.heightBefore,r=n.firstVisibleRow,v=n.lastVisibleRow;n=n.visibleLines;var y=a.padding,D=a.scroll,E=D.x,I=D.y;D=y.left();var K=y.right();y.bottom();e.push(De.h("div.debug-info",
{style:{left:E+D+"px",top:I+"px",width:a.width-K+"px"}},De.h("span","visible rows: "+r+" - "+v)));for(y=0;r<v;y++,r++){var P=n[y];I=a.textLayout.lineCharBoundsCache.get(P);P=P.height;e.push(De.h("div.debug-line",{style:{left:E+D+"px",top:0+q+"px",width:a.width-K+"px",height:P+"px"}},De.h("span",String(r))));if(I)for(var N=0;N<I.length;N++){var aa=I[N];e.push(De.h("div.debug-char",{style:{left:D+aa.x+"px",top:0+q+aa.y+"px",width:aa.width+"px",height:aa.height+"px"}}))}q+=P}return e}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"TextRenderer"}}],d,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9269,end:45823})}(void 0),Xwa=Nca=De.TextRenderer;De.extractHTMLFromTextMorph=mI;De.extractHTMLFromTextMorph=mI;De.default=Nca;var An=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js");
An.arr=cf;An.eqPosition=fq;An.KeyHandler=XS;An.commands={activate:{name:"[IyGotoChar] activate",exec:function(b,d){d=void 0===d?{backwards:!1}:d;An.IyGotoCharKeyHandler.installInto(b,d.backwards);return!0}},moveTo:{name:"[IyGotoChar] move to",exec:function(b,d){b.saveMark();var h=b.selection,a=h.lead,e=a.row,n=a.column;a=!!b.activeMark||!h.isEmpty();var q={row:e,column:n-1};b=b.document[d.backwards?"scanBackward":"scanForward"](q,function(r,v){return r!==d.needle||An.eqPosition(q,v)?null:v});if(!b)return!0;
b.column++;h.lead=b;a||(h.anchor=b);return!0},multiSelectAction:"forEach",readOnly:!0}};var YK=An.commands.activate;An.activate=YK;An.activate=YK;An.activate=YK;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js"),h=d.hasOwnProperty("IyGotoCharKeyHandler")&&"function"===typeof d.IyGotoCharKeyHandler?d.IyGotoCharKeyHandler:d.IyGotoCharKeyHandler=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?!1:a;ac._get(Object.getPrototypeOf(h.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.charToFind=void 0;this.backwards=a}},{key:"isIyGoToChar",get:function(){return!0}},{key:"uninstallFrom",value:function(a){a._cachedKeyhandlers=null;An.arr.remove(a._keyhandlers||[],this)}},{key:"eventCommandLookup",value:function(a,e){var n=e.keyCombo,q=n.startsWith("input-");if(e.onlyModifiers||
n.startsWith("Shift-")||!q&&!e.isModified&&!e.isFunctionKey)return{command:"null",passEvent:!0};e=q&&n.slice(6);if(!this.charToFind)if(q)this.charToFind=e;else return this.uninstallFrom(a),null;return e!==this.charToFind?(this.uninstallFrom(a),null):{command:An.commands.moveTo,args:{backwards:this.backwards,needle:e}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IyGotoCharKeyHandler"}},{key:"installInto",value:function(a,e){e=void 0===e?!1:e;a.keyhandlers.filter(function(n){return n.isIyGoToChar}).forEach(function(n){return n.uninstallFrom(a)});
a._cachedKeyhandlers=null;a._keyhandlers=(a._keyhandlers||[]).concat(new this(e))}}],d,{pathInPackage:function(){return"text/iy-goto-char.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1063,end:3067})})(An.KeyHandler);var oh=lively.FreezerRuntime.recorderFor("lively.morphic/text/commands.js");oh.chain=Dn;oh.arr=cf;oh.string=Ng;
oh.date=hq;oh.pt=xh;oh.Range=wt;oh.eqPosition=fq;oh.commands=[{name:"clipboard copy",doc:"placeholder for native copy",scrollCursorIntoView:!1,exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row);return!0}},{name:"manual clipboard copy",doc:"attempts to copy selection via browser interface",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b,d){d=void 0===d?{collapseSelection:!0,delete:!1,dontTryNativeClipboard:!1}:d;var h=b.selection,a=h.text,e=d.hasOwnProperty("collapseSelection")?
d.collapseSelection:!0;b.saveMark(h.anchor);b.activeMark=null;(h.isMultiSelection?h.selections.slice():[h]).forEach(function(n){var q=n.isEmpty()?b.lineRange():n.range,r=b.textInRange(q);b.env.eventDispatcher.killRing.add(r);d.delete?b.deleteText(q):!n.isEmpty()&&e&&n.collapse(n.lead)});d.dontTryNativeClipboard||b.env.eventDispatcher.doCopy(a);return!0}},{name:"clipboard cut",doc:"placeholder for native cut",exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row,!0);return!0}},
{name:"clipboard paste",doc:"placeholder for native paste",exec:function(){return!0}},{name:"manual clipboard paste",doc:"attempts to paste from the clipboard to lively \u2013 currently requires browser extension!",multiSelectAction:"single",exec:function(b,d){d=void 0===d?{killRingCycleBack:!1}:d;var h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){a=b.env.eventDispatcher.killRing;d.killRingCycleBack&&(oh.arr.last(oh.arr.pluck(b.commandHandler.history,"name"))||"").includes("clipboard paste")&&
(h=a.back());!h&&a.isCycling()&&(h=a.yank());h||(h=a.yank());b.selection.isMultiSelection?(b.undoManager.group(),b.selection.selections.slice(0,-1).reverse().map(function(n,q){q=a.pointer-1-q;0>q&&(q=a.buffer.length-1);return{selection:n,pasted:a.buffer[q]||""}}).concat({selection:b.selection.defaultSelection,pasted:h}).forEach(function(n){return n.selection.text=n.pasted}),b.undoManager.group()):h&&(b.undoManager.group(),b.selection.text=h,b.undoManager.group());return e.return(!0)})}},{name:"browse clipboard",
exec:function(b){var d,h,a,e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return d=b.env.eventDispatcher.killRing,h=d.pointer,a=d.buffer,e=a.map(function(v){return{isListItem:!0,string:oh.string.truncate(v,80).replace(/\n/g,""),value:v}}),r.yield(b.world().filterableListPrompt("select items to paste",e,{preselect:h,multiSelect:!0}),2);n=r.yieldResult;q=n.selected;q.length&&(b.undoManager.group(),b.insertTextAndSelect(q.join("\n")),b.undoManager.group());return r.return(!0)})}},
{name:"text undo",doc:"undo text changes",multiSelectAction:"single",exec:function(b){b.textUndo();return!0}},{name:"text redo",doc:"redo text changes",multiSelectAction:"single",exec:function(b){b.textRedo();return!0}},{name:"select all",doc:"Selects entire text contents.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){b.saveMark();b.selectAll();return!0}},{name:"delete backwards",doc:"Delete the character in front of the cursor or the selection.",exec:function(b){if(b.rejectsInput())return!1;
if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&b.editorPlugin.cmd_delete_backwards())return!0;var d=b.selection;d.isEmpty()&&d.growLeft(1);d.text="";d.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"delete",doc:"Delete the character following the cursor or the selection.",exec:function(b){var d=b.selection;if(b.rejectsInput())return!1;d.isEmpty()&&d.growRight(1);d.text="";d.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"indent",scrollCursorIntoView:!1,
exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(d,h){return b.insertText(b.tab,h.start)});b.undoManager.group();return!0}},{name:"outdent",scrollCursorIntoView:!1,exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(d,h){return d.startsWith(b.tab)&&b.deleteText({start:h.start,end:{row:h.start.row,column:b.tab.length}})});b.undoManager.group();return!0}},{name:"indent according to mode",exec:function(b,d){d=void 0===d?{}:d;var h,a,e,n,q,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){if(1==
D.nextAddress){h=b.editorPlugin&&b.editorPlugin.mode;if(!h)return D.return(!0);n=d.hasOwnProperty("undo")?d.undo:!0;d.hasOwnProperty("firstRow")&&d.hasOwnProperty("lastRow")?(q=d,a=q.firstRow,e=q.lastRow):b.selection.isEmpty()?a=e=b.cursorPosition.row:(r=b.selection.selectedRows,a=r.first,e=r.last);return D.yield(System.import("lively.ide/editor-modes.js"),2)}v=D.yieldResult;y=v.indentLines;n&&b.undoManager.group();y(b,h,a,e,"smart",!0,d);n&&b.undoManager.group();return D.return(!0)})}},{name:"tab - snippet expand or indent",
scrollCursorIntoView:!0,exec:function(b){var d=b.snippets.find(function(h){return h.canExpand(b)});return d?(d.expandAtCursor(b),!0):b.selection.isEmpty()?b.execCommand("insertstring",{string:b.tab}):b.execCommand("indent according to mode")}},{name:"browse snippets",scrollCursorIntoView:!0,exec:function(b){var d,h,a,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return d=b.snippets.map(function(q){return{isListItem:!0,string:q.trigger+" - "+q.expansion,value:q}}),
n.yield(b.world().filterableListPrompt("select snippet",d,{requester:b}),2);h=n.yieldResult;a=$jscomp.makeIterator(h.selected);(e=a.next().value)&&e.expandAtCursor(b);return n.return(!0)})}},{name:"transpose chars",exec:function(b){if(b.selection.isEmpty()){var d=b.cursorPosition,h=d.row,a=d.column;d=oh.Range.create(h,a-1,h,a+1);var e=b.getLine(h);h=e[a-1];a=e[a];h&&a&&b.replace(d,a+h,!0)}return!0}},{name:"cycle selection contents",documentation:"If there are multiple selections, will take the text of the first one and replace the second one with it, the text of the second will replace the third, the last selection contents will replace the contents of the first.",
multiSelectAction:"single",exec:function(b){var d=b.selection.selections;b.undoManager.group();d.reduce(function(h,a){var e=a.text;a.text=h;return e},oh.arr.last(d).text);b.undoManager.group();return!0}},{name:"go left",doc:"Move the cursor 1 character left. At the beginning of a line move the cursor up. If a selection is active, collapse the selection left.",exec:function(b){b.activeMark?b.selection.selectLeft(1):b.selection.goLeft(1);return!0}},{name:"go right",doc:"Move the cursor 1 character right. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",
exec:function(b){b.activeMark?b.selection.selectRight(1):b.selection.goRight(1);return!0}},{name:"go up",doc:"Move the cursor 1 line. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",scrollCursorIntoView:!0,exec:function(b){b.activeMark?b.selection.selectUp(1):b.selection.goUp(1,!0);return!0}},{name:"go down",exec:function(b){b.activeMark?b.selection.selectDown(1):b.selection.goDown(1,!0);return!0}},{name:"select left",exec:function(b){b.selection.selectLeft(1);
return!0}},{name:"select right",exec:function(b){b.selection.selectRight(1);return!0}},{name:"select up",exec:function(b){b.selection.selectUp(1,!0);return!0}},{name:"select down",exec:function(b){b.selection.selectDown(1,!0);return!0}},{name:"select line",exec:function(b){var d=b.selection,h=d.lead.row,a=b.lineRange(h,!1);d.range=d.range.equals(a)?b.lineRange(h,!0):a;return!0}},{name:"goto line start",exec:function(b,d){d=void 0===d?{select:!1}:d;d=d.select||!!b.activeMark;var h=b.selection,a=h.lead;
b=b.screenLineRange(a,!0);h.lead=oh.eqPosition(a,b.start)?{column:0,row:a.row}:b.start;!d&&(h.anchor=h.lead);return!0}},{name:"goto line end",exec:function(b,d){d=void 0===d?{select:!1}:d;d=d.select||!!b.activeMark;var h=b.selection;b=b.screenLineRange(h.lead,!0);h.lead=b.end;!d&&(h.anchor=h.lead);return!0}},{name:"goto page up",exec:function(b){b.pageUpOrDown({direction:"up",select:!!b.activeMark});return!0}},{name:"goto page down",exec:function(b){b.pageUpOrDown({direction:"down",select:!!b.activeMark});
return!0}},{name:"goto page up and select",exec:function(b){b.pageUpOrDown({direction:"up",select:!0});return!0}},{name:"goto page down and select",exec:function(b){b.pageUpOrDown({direction:"down",select:!0});return!0}},{name:"goto start",exec:function(b,d){d=void 0===d?{select:!!b.activeMark}:d;b.gotoDocumentStart(Object.assign({},d));return!0}},{name:"goto end",exec:function(b,d){d=void 0===d?{select:!!b.activeMark}:d;b.gotoDocumentEnd(Object.assign({},d));return!0}},{name:"goto paragraph above",
exec:function(b,d){d=void 0===d?{select:!!b.activeMark}:d;var h=b.paragraphRangeAbove(b.cursorPosition.row);h.start.row--;b.selection.lead=h.start;d.select||b.collapseSelection();return!0}},{name:"goto paragraph below",exec:function(b,d){d=void 0===d?{select:!!b.activeMark}:d;var h=b.paragraphRangeBelow(b.cursorPosition.row);h.end.row++;b.selection.lead=h.end;d.select||b.collapseSelection();return!0}},{name:"move cursor to screen bottom in 1/3 steps",readOnly:!0,exec:function(b){var d=!!b.activeMark,
h=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),e=b.textLayout.lastFullVisibleLine(b),n=a+Math.floor((e-a)/2);if(h.row<a)h.row=a;else if(h.row<n)h.row=n;else if(h.row<e)h.row=e;else return!0;b.selection.lead=h;d||(b.selection.anchor=b.selection.lead);return!0}},{name:"move cursor to screen top in 1/3 steps",readOnly:!0,exec:function(b){var d=!!b.activeMark,h=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),e=b.textLayout.lastFullVisibleLine(b),n=a+Math.floor((e-a)/2);if(h.row<=a)return!0;
h.row=h.row<=n?a:h.row<=e?n:e;b.selection.lead=h;d||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto line",exec:function(b){var d,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return d=!!b.activeMark,h=Number,e.yield(b.world().prompt("Enter line number"),2);a=h(e.yieldResult);isNaN(a)||(d?b.selection.lead={row:a,column:0}:b.cursorPosition={row:a,column:0},b.scrollCursorIntoView(),b.focus());return e.return(!0)})}},{name:"join line",exec:function(b,
d){d=void 0===d?{withLine:"before"}:d;var h=b.selection,a=h.start,e=h.end;h=h.lead;if(!b.selection.isEmpty()){if(a.row===e.row)return!0;d=b.undoManager.ensureNewGroup(b,"join line");e=oh.arr.range(0,e.row-1-a.row).map(function(n){return b.joinLine(a.row)});b.undoManager.group(d);b.selection.isMultiSelection&&(b.cursorPosition=e[0],e.slice(1).forEach(function(n){return b.selection.addRange({start:n,end:n})}));return!0}e=h.row;if("before"===d.withLine&&0>=e||"after"===d.withLine&&e>=b.document.endPosition.row)return!0;
b.undoManager.group();b.cursorPosition=b.joinLine("before"===d.withLine?e-1:e);b.undoManager.group();return!0}},{name:"split line",exec:function(b){var d=b.cursorPosition,h=b.getLine(d.row).match(/^\s*/)[0].length;b.insertText("\n"+" ".repeat(h),d);b.cursorPosition=d;return!0}},{name:"insert line",exec:function(b,d){d=void 0===d?{where:"above"}:d;var h=b.cursorPosition.row,a=b.getLine(h).match(/^\s*/)[0].length;"below"===d.where&&h++;b.insertText(" ".repeat(a)+"\n",{column:0,row:h});b.cursorPosition=
{column:a,row:h};return!0}},{name:"duplicate line or selection",exec:function(b){b.undoManager.group();var d=b.selection.end;if(b.selection.isEmpty())b.insertText(b.getLine(d.row)+"\n",{column:0,row:d.row+1});else{var h=b.selection.range;b.insertText(b.selection.text,d);b.selection=h}b.undoManager.group();return!0}},{name:"delete emtpy line or until end of line",exec:function(b){var d=b.cursorPosition,h=b.getLine(d.row);if(oh.eqPosition(b.document.endPosition,d))return!0;d=h.trim()?{start:d,end:{row:d.row,
column:h.length}}:{start:{row:d.row,column:0},end:{row:d.row+1,column:0}};b.env.eventDispatcher.doCopy(b.textInRange(d));b.undoManager.group();b.deleteText(d);b.undoManager.group();return!0}},{name:"delete left until beginning of line",exec:function(b){b.activeMark&&(b.activeMark=null);if(!b.selection.isEmpty())return b.selection.text="",!0;var d=b.lineRange(),h=b.cursorPosition;if(oh.eqPosition({row:h.row,column:0},h))return!0;d={start:oh.eqPosition(d.start,h)?{row:h.row,column:0}:d.start,end:h};
b.deleteText(d);return!0}},{name:"move lines up",multiSelectAction:"single",exec:function(b){var d=b.selection;if(b.inMultiSelectMode()){var h=d.selections.map(function(n){return n.range});h.slice().sort(oh.Range.compare).forEach(function(n){b.selection=n;b.execCommand("move lines up")});h.forEach(function(n){n.start.row--;n.end.row--});b.selection.ranges=h;return!0}d.isEmpty()||0!==d.end.column||d.growRight(-1);h=d.start;d=d.end;var a=b.getLine(h.row-1),e=b.undoManager.ensureNewGroup(b);b.insertText(a+
"\n",{row:d.row+1,column:0});b.deleteText({start:{row:h.row-1,column:0},end:{row:h.row,column:0}});b.undoManager.group(e);return!0}},{name:"move lines down",multiSelectAction:"single",exec:function(b){var d=b.selection;if(b.inMultiSelectMode()){var h=d.selections.map(function(n){return n.range});h.slice().sort(oh.Range.compare).reverse().forEach(function(n){b.selection=n;b.execCommand("move lines down")});h.forEach(function(n){n.start.row++;n.end.row++});b.selection.ranges=h;return!0}d.isEmpty()||
0!==d.end.column||d.growRight(-1);var a=d.range,e=a;h=e.start;e=e.end;d.isEmpty()?a={start:{row:h.row,column:0},end:{row:h.row+1,column:0}}:0!==e.column&&(a={start:h,end:{row:e.row+1,column:0}});d=b.undoManager.ensureNewGroup(b);a=b.deleteText(a);b.insertText(a,{row:h.row+1,column:0});b.undoManager.group(d);b.selection={start:Object.assign({},h,{row:h.row+1}),end:Object.assign({},e,{row:e.row+1})};return!0}},{name:"old select word",exec:function(b){var d=b.selection;d.range=b.wordAt(d.lead).range;
return!0}},{name:"select word",exec:function(b){var d=b.selection;if(b=b.selectMatchingBrackets(b.textString,b.positionToIndex(d.lead)))d.range={start:b[0],end:b[1]+1};return!0}},{name:"select word right",exec:function(b){var d=b.selection;d.anchor=b.wordRight(d.end).range.end;return!0}},{name:"goto word left",exec:function(b,d){d=void 0===d?{select:!1}:d;d=d.select||!!b.activeMark;var h=b.wordLeft().range;b.selection.lead=h.start;d||(b.selection.anchor=h.start);return!0}},{name:"goto word right",
exec:function(b,d){d=void 0===d?{select:!1}:d;d=d.select||!!b.activeMark;var h=b.wordRight().range;b.selection.lead=h.end;d||(b.selection.anchor=h.end);return!0}},{name:"delete word right",exec:function(b){b.undoManager.group();var d=b.wordRight().range.end;d={start:b.cursorPosition,end:d};b.env.eventDispatcher.doCopy(b.textInRange(d));b.deleteText(d);b.undoManager.group();return!0}},{name:"delete word left",exec:function(b){b.undoManager.group();var d={start:b.wordLeft().range.start,end:b.cursorPosition};
b.deleteText(d);b.undoManager.group();return!0}},{name:"goto matching right",exec:function(b,d){d=void 0===d?{select:!!b.activeMark}:d;var h=d.pairs||{"{":"}","[":"]","(":")","<":">"};if(h=b.findMatchingForward(b.cursorPosition,"right",h)||b.findMatchingForward(b.cursorPosition,"left",h))b.selection.lead=h,d.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto matching left",exec:function(b,d){d=void 0===d?{select:!!b.activeMark}:d;var h=d.pairs||{"}":"{","]":"[",")":"(",">":"<"};
if(h=b.findMatchingBackward(b.cursorPosition,"left",h)||b.findMatchingBackward(b.cursorPosition,"right",h))b.selection.lead=h,d.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"realign top-bottom-center",doc:"Cycles through centering the cursor position, aligning it at the top, aligning it at the bottom.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){var d=b.charBoundsFromTextPosition(b.cursorPosition),h=d.topLeft();d=b.height-d.height;var a=b.scroll,e=a.x;a=a.y;
a=2>Math.abs(h.y-a)?h.y-d:2>Math.abs(h.y-a-.5*d)?h.y:h.y-.5*d;b.scroll=oh.pt(e,a);return!0}},{name:"reverse selection",doc:"switches the selection lead and anchor",exec:function(b){var d=b.selection;if(d.isEmpty()){var h=b.popSavedMark();h&&(b.saveMark(b.cursorPosition),d.lead=h.position)}else d.reverse();return!0}},{name:"toggle active mark",doc:"....",handlesCount:!0,multiSelectAction:"single",exec:function(b,d,h){var a=b.activeMark;d=b.selection;var e=!d.isEmpty();if(4===h){if(b=b.popSavedMark())d.lead=
b.position,e||(d.anchor=d.lead);return!0}if(!a&&!e)return b.activeMark=d.lead,!0;b.saveMark(a||d.anchor);b.activeMark=null;e&&(b.inMultiSelectMode()?d.selections:[d]).forEach(function(n){return n.anchor=n.lead});return!0}},{name:"fit text to column",handlesCount:!0,multiSelectAction:"forEach",exec:function(b,d,h){function a(v,y,D){if(v.length<=e)return[y+v.trim()];D=v.slice(0,e);var E=oh.arr.last(oh.string.reMatches(D,q)),I=E&&0<E.start?E.start:e;E=D.slice(0,I);v=y+(D.slice(I)+v.slice(e)).trimLeft();
return[E].concat(a(v,y))}if(4===h)return b.execCommand("join line");b.selection.isEmpty()&&b.selectLine();d=b.selection;var e=h||80,n=d.selectedRows;h=d.range;var q=/[ ]+/g,r=/^[\s\t]+/;d=oh.string.paragraphs(oh.arr.range(n.first,n.last).map(function(v){return b.getLine(v)}).join("\n"),{keepEmptyLines:!0});d=oh.chain(d.map(function(v){if(!/^\s*$/.test(v)){v=v.split("\n").join(" ");if(""===v.trim())v=[""];else{var y=v.match(r);y=y?y[0]:"";v=a(y+v.trim(),y)}v=v.join("\n")+"\n"}return v})).flatten().value().join("\n");
b.undoManager.group();b.replace(h,d);b.undoManager.group();return!0}},{name:"lowercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toLowerCase();b.undoManager.group();return!0}},{name:"remove trailing whitespace",exec:function(b){b.undoManager.group();var d=0;b.withLinesDo(0,b.documentEndPosition.row,function(h,a){return h.match(/\s+$/)&&++d&&b.replace(a,h.trimRight())});b.world().setStatusMessage(d+" lines cleaned up");
b.undoManager.group();return!0}},{name:"uppercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toUpperCase();b.undoManager.group();return!0}},{name:"newline",exec:function(b){var d=b.cursorPosition,h=b.getLine(d.row),a=h.match(/^\s*/)[0].length;b.undoManager.group();!h.trim()&&a&&(b.deleteText({start:{row:d.row,column:0},end:{row:d.row,column:a}}),d.column=0);if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&
b.editorPlugin.cmd_newline(d,h,a))return!0;b.selection.text="\n"+" ".repeat(a);b.selection.collapseToEnd();b.undoManager.group();return!0}},{name:"insertstring",exec:function(b,d){var h=d=void 0===d?{string:null,undoGroup:!1}:d;d=h.string;h=h.undoGroup;var a="string"===typeof d&&d.length;a||console.warn("command insertstring called with not string value");if(b.rejectsInput()||!a)return!1;b.saveActiveMarkAndDeactivate();if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_insertstring&&b.editorPlugin.cmd_insertstring(d))return!0;
a=b.selection;var e=!a.isEmpty();e&&b.undoManager.group();var n=a.lead;a.replace(d,!0,!0,!0,!(1===d.length&&"\n"!==d&&0<n.column));a.collapseToEnd();e&&b.undoManager.group();h&&(/^[\s\.,\?\+=]+$/.test(d)||"number"!==typeof h?b.undoManager.group():b.undoManager.groupLater(h));return!0}},{name:"toggle line wrapping",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){b.keepPosAtSameScrollOffsetWhile(function(){return b.lineWrapping=b.lineWrapping?!1:b.fontMetric.isProportional(b.fontFamily)?
!0:"by-chars"});return!0}},{name:"cancel input",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b,d,h,a){b.env.eventDispatcher.resetKeyInputState();b.selection.disableMultiSelect&&b.selection.disableMultiSelect();b.selection.isEmpty()||(b.selection.anchor=b.selection.lead);b.activeMark&&(b.activeMark=null);return!0}}];oh.usefulEditorCommands=[{name:"insert date",handlesCount:!0,exec:function(b,d,h){d=oh.date.format(new Date,h?"mediumDate":"isoDate");b.undoManager.group();b.insertText(d);
b.undoManager.group();return!0}},{name:"[todo] toggle todo marker",exec:function(b){var d=b.selection;d.isEmpty()&&b.selectLine();b=/\[\s*\]/g;var h=/\[X\]/g,a=d.text;a=b.test(a)?a.replace(b,"[X]"):h.test(a)?a.replace(h,"[ ]"):"[ ] "+a.trimLeft();d.text=a;return!0}},{name:"selected lines: sort",exec:function(b){var d=b.selection,h=d.start.row;d=d.end.row;var a=[];b.withLinesDo(h,d,function(e){var n=a.findIndex(function(q){return q>e});-1<n?a.splice(n,0,e):a.push(e)});b.undoManager.group();b.replace({start:{row:h,
column:0},end:{row:d+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: reverse",exec:function(b){var d=b.selection,h=d.start.row;d=d.end.row;var a=[];b.withLinesDo(h,d,function(e){return a.push(e)});b.undoManager.group();b.replace({start:{row:h,column:0},end:{row:d+1,column:0}},a.reverse().join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: remove duplicates (uniq)",exec:function(b){var d=b.selection,h=d.start.row;d=d.end.row;var a=[];b.withLinesDo(h,
d,function(e){return oh.arr.pushIfNotIncluded(a,e)});b.undoManager.group();b.replace({start:{row:h,column:0},end:{row:d+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"change string inflection",handlesCount:!0,multiSelectAction:"single",exec:function(b,d,h){function a(I,K){var P,N,aa=e(I).trim();"uppercased"===aa?P=/\s*[A-Z0-9]+/g:"dashed"===aa?P=/-\w/g:"spaced"===aa&&(P=/\s+.?/g);"uppercased"===K?N=function(m){return m.trim().replace(/^-/,"").toUpperCase()}:"dashed"===K?N=
function(m){return"-"+m.trim().replace(/^-/,"").toLowerCase()}:"spaced"===K&&(N=function(m){return" "+m.trim().replace(/^-/,"").toLowerCase()});return I.replace(P,N)}function e(I){return I.match(/[A-Z]/)?"uppercased":I.match(/-/)?"dashed":I.match(/\s/)?"spaced":"unknown"}var n,q,r,v,y,D,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress){b.selection.isEmpty()&&(b.selection=b.wordAt().range);n=b.selection.ranges;q=b.textInRange(n[0]);if(!q)return b.setStatusMessage("Please select some text"),
I.return(!0);r=e(q);v=oh.arr.without(["uppercased","dashed","spaced"],r);return I.yield(b.world().listPrompt("Convert "+r+" into?",v,{}),2)}y=I.yieldResult;D=$jscomp.makeIterator(y.selected);E=D.next().value;if(!E)return I.return(!0);b.undoManager.group();n.forEach(function(K,P){P=b.textInRange(K);P=a(P,E);b.replace(K,P)});b.undoManager.group();b.focus();return I.return(!0)})}},{name:"spell check word",exec:function(b,d){var h,a,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return h=
b.wordAt(),h.string?y.yield(System.import("lively.ide/shell/spell-checker.js"),2):(b.setStatusMessage("no word for spellcheck!"),y.return(!0));case 2:return a=y.yieldResult,e=a.spellCheckWord,y.yield(e(h.string),3);case 3:return n=y.yieldResult,n.length?y.yield(b.world().filterableListPrompt("Choose replacement for "+h.string,n),4):(b.setStatusMessage("no suggestions for word "+h.string),y.return(!0));case 4:q=y.yieldResult;r=$jscomp.makeIterator(q.selected);if(v=r.next().value)b.undoManager.group(),
b.replace(h.range,v),b.undoManager.group();return y.return(!0)}})}},{name:"[shell] run shell command on region",multiSelectAction:"single",exec:function(b,d){var h,a,e,n,q,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){switch(D.nextAddress){case 1:return a=(h=b.textInRange(b.selection))&&0!==h.length?{stdin:h}:{},D.yield(b.world().prompt("Enter shell command to run on region.",{historyId:"lively.ide.execShellCommand"}),2);case 2:return e=D.yieldResult,D.yield(System.import("lively.ide/shell/shell-interface.js"),
3);case 3:n=D.yieldResult;q=n.runCommand;if(!e)return D.return(b.setStatusMessage("No command entered, aborting...!"));r=q(e,a);D.setCatchFinallyBlocks(4);return D.yield(r.whenDone(),6);case 6:v=r.output.trim();b.undoManager.group();b.selection.selections.forEach(function(E){return E.text=v});b.undoManager.group();D.leaveTryBlock(5);break;case 4:y=D.enterCatchBlock(),b.showError(y);case 5:return D.return(!0)}})}},{name:"open file at cursor",exec:function(b,d){var h,a,e,n,q,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==
E.nextAddress)return b.getLine(),h=b.cursorPosition.row,a=b.document.scanBackward(b.cursorPosition,function(I,K){return(0>=K.column||I.match(/\s/))&&K})||{row:0,column:0},e=b.document.scanForward(b.cursorPosition,function(I,K){return(K.row!=h||I.match(/\s/))&&K})||b.documentEndPosition,n=b.textInRange({start:a,end:e}).replace(/\s/g,""),q=n.split(":"),r=q[0].match(/^file|http/)?q.shift()+":"+q.shift():q.shift(),q[0].match(/^[0-9]+$/)&&(r+=":"+q.shift()),E.yield(System.import("lively.ide/text-editor.js"),
2);v=E.yieldResult;y=v.default;D=y.openInWindow();D.location=r;return E.return(D)})}},{name:"run code on text morph",doc:"...",exec:function(b,d){var h,a,e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return h={targetModule:"lively://code-on-text-morph",context:b},r.yield(b.world().editPrompt("Run code on selection. Use this.selection.text to access it",{requester:b,mode:"js",evalEnvironment:h,historyId:"run-code-on-text-morph-hist"}),2);case 2:return a=
r.yieldResult,r.setCatchFinallyBlocks(3),b.undoManager.group(),r.yield(lively.vm.runEval(a,h),5);case 5:n=r.yieldResult;b.undoManager.group();e=n.isError?n.value:null;r.leaveTryBlock(4);break;case 3:e=q=r.enterCatchBlock();case 4:return e&&b.showError(e),r.return(void 0)}})}},{name:"change editor mode",exec:function(b){var d,h,a,e,n,q,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){switch(D.nextAddress){case 1:return d=function(E){return!E.endsWith("ide/editor-plugin.js")&&E.endsWith("editor-plugin.js")},
D.yield(lively.modules.getPackage("lively.ide").resources(d),2);case 2:return h=D.yieldResult,a=b.editorPlugin||{},e=a.shortName,n=0,q=["<no mode>"].concat(h.map(function(E,I){var K=E.url.match(/([^\/]+)\/editor-plugin.js/)[1];K===e&&(n=I);return{isListItem:!0,string:K,value:E}})),D.yield(b.world().filterableListPrompt("choose mode",q,{requester:b,preselect:n,historyId:"lively.morphic/text-change-editor-mode-hist",fuzzy:!0}),3);case 3:r=D.yieldResult;v=$jscomp.makeIterator(r.selected);y=v.next().value;
if(!y)return D.return();if("<no mode>"!==y){D.jumpTo(4);break}return D.yield(b.changeEditorMode(null),5);case 5:return b.resetTextAttributes(),D.return();case 4:if(y.isLoaded){D.jumpTo(6);break}return D.yield(lively.modules.module(y.url).load(),6);case 6:return D.yield(b.changeEditorMode(y.url),0)}})}},{name:"report token at cursor",exec:function(b){var d,h,a,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){d=b.tokenAt(b.cursorPosition)||{};h=d.token;a=d.start;e=d.end;b.setStatusMessage(h?
h+" "+a.column+" => "+e.column:"no token");return n.return(!0)})}}];oh.commands.push.apply(oh.commands,$jscomp.arrayFromIterable(oh.usefulEditorCommands));oh.iyGotoCharActivate=YK;oh.commands.push(oh.iyGotoCharActivate);oh.searchCommands=WK;oh.commands.push.apply(oh.commands,$jscomp.arrayFromIterable(oh.searchCommands));var Oca=oh.commands;oh.default=Oca;var fd=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js");fd.Rectangle=ie;fd.Point=Pf;fd.rect=cl;fd.Color=If;fd.pt=xh;fd.string=Ng;
fd.num=jk;fd.obj=xf;fd.fun=ik;fd.promise=bg;fd.arr=cf;fd.signal=Jk;fd.noUpdate=ns;fd.connect=Ik;fd.disconnect=Hp;fd.bowser=qo;fd.morph=zj;fd.touchInputDevice=qm;fd.sanitizeFont=Zz;fd.config=Yk;fd.Morph=xj;fd.Selection=TK;fd.MultiSelection=UK;fd.Document=Uwa;fd.objectReplacementChar="\ufffd";fd.Anchor=bz;fd.Range=wt;fd.eqPosition=fq;fd.lessPosition=eq;fd.KeyHandler=XS;fd.UndoManager=lC;fd.TextSearcher=VK;fd.TextLayout=Wwa;fd.Renderer=Xwa;fd.extractHTMLFromTextMorph=mI;fd.commands=Oca;fd.textAndAttributesWithSubRanges=
lI;fd.serializeMorph=oB;fd.deserializeMorph=pB;fd.getSvgVertices=fx;fd.renderSubTree=TE;fd.ShadowObject=ro;fd.getClassName=Io;var zp=Ka("K",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js"),h=d.hasOwnProperty("Text")&&"function"===typeof d.Text?d.Text:d.Text=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var e=
a=void 0===a?{}:a,n=e.position,q=e.rightCenter,r=e.leftCenter,v=e.topCenter,y=e.bottom,D=e.top,E=e.right,I=e.left,K=e.bottomCenter,P=e.bottomLeft,N=e.bottomRight,aa=e.topRight,m=e.topLeft;e=e.center;ac._get(Object.getPrototypeOf(h.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.undoManager.reset();this.fit();void 0!==n&&(this.position=n);void 0!==q&&(this.rightCenter=q);void 0!==r&&(this.leftCenter=r);void 0!==v&&(this.topCenter=v);void 0!==y&&(this.bottom=y);void 0!==
D&&(this.top=D);void 0!==E&&(this.right=E);void 0!==I&&(this.left=I);void 0!==K&&(this.bottomCenter=K);void 0!==P&&(this.bottomLeft=P);void 0!==N&&(this.bottomRight=N);void 0!==aa&&(this.topRight=aa);void 0!==m&&(this.topLeft=m);void 0!==e&&(this.center=e)}},{key:"__deserialize__",value:function(a,e,n,q){ac._get(Object.getPrototypeOf(h.prototype),"__deserialize__",this).call(this,a,e,n,q);this.viewState=this.defaultViewState;this.markers=[];this.textRenderer=new fd.Renderer(this.env);this.textLayout=
new fd.TextLayout(this);this.changeDocument(fd.Document.fromString(""));this.ensureUndoManager();a.cachedLineBounds&&(this._initializedByCachedBounds=a.cachedLineBounds);this._isDeserializing=!0}},{key:"__after_deserialize__",value:function(a,e,n){var q=this;ac._get(Object.getPrototypeOf(h.prototype),"__after_deserialize__",this).call(this,a,e,n);this._isDeserializing=!1;this.whenRendered().then(function(){q.embeddedMorphs.forEach(function(r){return r.top=0})})}},{key:"__only_serialize__",get:function(){return fd.arr.withoutAll(ac._get(Object.getPrototypeOf(h.prototype),
"__only_serialize__",this),["document","textRenderer","viewState","undoManager","markers","textLayout","embeddedMorphMap",this.displacingMorphMap.size?"":"displacingMorphMap"])}},{key:"__additionally_serialize__",value:function(a,e,n,q){ac._get(Object.getPrototypeOf(h.prototype),"__additionally_serialize__",this).call(this,a,e,n,q);a.props.selections={key:"selections",verbatim:!0,value:(this.selection.isMultiSelection?this.selection.ranges:[this.selection.range]).map(function(K){return fd.obj.select(K,
["start","end"])})};a.props.anchors&&this.selection.isEmpty()&&(a.props.anchors.value=a.props.anchors.value.filter(function(K){return!K.id.includes("selection-")}));a.props.textAndAttributes={key:"textAndAttributes",value:this.textAndAttributes.map(function(K){if(!K)return K;if(K.isMorph)return n.ref(K).asRefForSerializedObjMap();if(fd.obj.isObject(K)){var P={};K=JSON.stringify(K,function(N,aa){return aa&&aa.__serialize__?(aa=aa.__serialize__(),Object.assign(P,aa.bindings),"->["+(aa.__expr__+"]")):
aa});K=K.replace(/"->\[.*\]"/g,function(N){return N.slice(4,-2)});return n.expressionSerializer.exprStringEncode({__expr__:"("+K+")",bindings:P})}return K})};e=[];q=$jscomp.makeIterator(this.document.lines);for(var r=q.next();!r.done;r=q.next()){r=r.value;var v=this.textLayout.lineCharBoundsCache.get(r);if(v){var y=[],D=void 0,E=0;if(v){v=$jscomp.makeIterator(v);for(var I=v.next();!I.done;I=v.next()){I=I.value;if(D){if(fd.num.roundTo(D.width,.001)==fd.num.roundTo(I.width||0,.001)&&I.height==D.height){E++;
continue}y.push([E,fd.num.roundTo(D.width||0,.001),D.height||0])}E=1;D=I}}D&&y.push([E,fd.num.roundTo(D.width||0,.001),D.height||0]);e.push([r.row,fd.arr.flatten(y)])}}a.cachedLineBounds=e}},{key:"spec",value:function(){var a=ac._get(Object.getPrototypeOf(h.prototype),"spec",this).call(this);a.textString=this.textString;return fd.obj.dissoc(a,"anchors embeddedMorphMap plugins savedMarks textLayout textRenderer viewState undoManager metadata document displacingMorphMap".split(" "))}},{key:"isText",
get:function(){return!0}},{key:"makeDirty",value:function(){this._positioningSubmorph||ac._get(Object.getPrototypeOf(h.prototype),"makeDirty",this).call(this)}},{key:"onChange",value:function(a){var e=this,n=a.prop,q=a.selector,r=a.meta,v=this.lineWrapping,y=!1,D=!1,E=!1,I=!1,K=!1,P=!1;if(q)y="replace"===q,I="addTextAttribute"===q,this._displacementChange=!this._displacing&&y;else switch(n){case "scroll":K=D=!0;break;case "extent":D=!0;n=a.prevValue.subPt(a.value);P=(E=this.fixedWidth&&!!this.lineWrapping&&
!!n.x)&&(!this.fixedWidth||!this.fixedHeight);break;case "wordSpacing":case "letterSpacing":case "tabWidth":v&&(I=!0);break;case "fontFamily":case "fontSize":case "lineHeight":case "textAlign":case "fontWeight":case "fontStyle":case "textStyleClasses":case "fixedWidth":I=a.prevValue!=a.value;break;case "lineWrapping":I=!0;break;case "borderWidth":case "fixedHeight":E=a.prevValue!=a.value;break;case "padding":E=!0}ac._get(Object.getPrototypeOf(h.prototype),"onChange",this).call(this,a);n=function(){e._textChange=
!0;K&&(e.viewState.wasScrolled=!0);(I||P||E&&!r.styleSheetChange)&&e.invalidateTextLayout(I,I);(E||I)&&e.document&&e.world()&&e.document.lines.forEach(function(N){return N.hasEstimatedExtent=!0});e._displacementChange&&(e._displacementChange=!1);y&&fd.signal(e,"textChange",a);D&&fd.signal(e,"viewChange",a);e._textChange=!1};r.animation?fd.promise.delay(r.animation.duration).then(n):this.ownerChain().every(function(N){return N.visible})&&n()}},{key:"onSubmorphChange",value:function(a,e){var n=this,
q,r,v,y,D,E,I,K,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==N.nextAddress){if(a.meta&&a.meta.styleSheetChange)return N.return();ac._get(Object.getPrototypeOf(h.prototype),"onSubmorphChange",n).call(n,a,e);return a.meta.animation?N.yield(a.meta.animation.asPromise(),2):N.jumpTo(2)}if(n._textChange||n._positioningSubmorph===e)return N.return();q=a;r=q.prop;v="position"==r||"extent"==r||"scale"==r||"rotation"==r;n.displacingMorphMap.get(e)&&v&&[].concat($jscomp.arrayFromIterable(n.displacingMorphMap.keys())).filter(function(aa){return aa.top>=
e.top}).forEach(function(aa){n._intersectionShapeCache&&n._intersectionShapeCache.delete(aa);n.updateTextDisplacementFor(aa)});y=n.embeddedMorphMap.get(e)||{};if((D=y.anchor)&&v){if("position"==r)return n._positioningSubmorph=e,e.position=a.prevValue,n._positioningSubmorph=null,N.return();E=e.bounds();I=e._lastBounds;K=D.position.row;P=n.document.getLine(K);I&&I.height==E.height&&I.bottom()==E.bottom()||(P.hasEstimatedExtent=!0,e._lastBounds=E)}N.jumpToEnd()})}},{key:"removeMorph",value:function(a,
e){e=void 0===e?!0:e;var n=this.embeddedMorphMap,q=this.displacingMorphMap;q&&q.has(a)&&this.toggleTextWrappingAround(a,!1);if(n&&n.has(a)){if(q=n.get(a).anchor){var r=q.position;q=r.row;r=r.column;this.replace({start:{row:q,column:r},end:{row:q,column:r+1}},[],!0,e);this.replace}n.delete(a)}return ac._get(Object.getPrototypeOf(h.prototype),"removeMorph",this).call(this,a)}},{key:"toggleTextWrappingAround",value:function(a,e){var n=this;if(e)this.displacingMorphMap.has(a)||(this.embeddedMorphMap.has(a)&&
this.addMorph(a.remove()),this.displacingMorphMap.set(a,[]),this.updateTextDisplacementFor(a));else if(e=this.displacingMorphMap.get(a))this._displacing=!0,e.forEach(function(q){return n.removeMorph(q)}),this._displacing=!1,this.displacingMorphMap.delete(a)}},{key:"updateTextDisplacementFor",value:function(a){var e=this;if(!this._displacing){this._displacing=!0;var n=this.displacingMorphMap.get(a),q=this.computeDisplacementRectsFor(a).values(),r=[];n.forEach(function(I){return e.removeMorph(I,!1)});
this.textLayout.resetLineCharBoundsCacheOfRange(this,a._displacementRange);q=$jscomp.makeIterator(q);for(var v=q.next();!v.done;v=q.next()){v=v.value;var y=n.shift()||fd.morph({visible:!0,reactsToPointer:!1,isDisplacementMorph:!0}),D=this.textLayout.textPositionFromPoint(this,v.leftCenter());y.setBounds(v);this.insertText([y,{}],D);this.viewState._needsFit=!1;if(E==y.top)y.remove();else{var E=y.top;r.push(y)}}n.forEach(function(I){return e.removeMorph(I,!1)});this.displacingMorphMap.set(a,r);this._displacing=
!1}}},{key:"computeDisplacementRectsFor",value:function(a){var e=this.textLayout,n=e.textPositionFromPoint(this,a.topLeft),q=e.textPositionFromPoint(this,a.bottomLeft),r=[];a._displacementRange=fd.Range.fromPositions(n,q);for(n=n.row;n<q.row+1;n++)r.push.apply(r,$jscomp.arrayFromIterable(e.rangesOfWrappedLine(this,n)));this._intersectionShapeCache||(this._intersectionShapeCache=new Map);(q=this._intersectionShapeCache.get(a))||(q=a.isPath?fd.Shapes.path(fd.getSvgVertices(a.vertices)):"Ellipse"==fd.getClassName(a)?
fd.Shapes.ellipse(a.center.x,a.center.y,a.width/2,a.height/2):fd.Shapes.rectangle(a.left,a.top,a.width,a.height));this._intersectionShapeCache.set(a,q);a=this.width;n=new Map;r=$jscomp.makeIterator(r);for(var v=r.next();!v.done;v=r.next()){v=v.value;var y=e.computeMaxBoundsForLineSelection(this,v),D=y.height;y=y.y;var E=fd.Shapes.rectangle(a,D,0,y);E=fd.Intersection.intersect(E,q);1>E.points.length||(E=fd.Rectangle.unionPts(E.points.map(fd.Point.fromLiteral)),E.y=y,E.height=D,E.x-=15,E.width+=30,
n.set(v,E))}return n}},{key:"rejectsInput",value:function(){return this.readOnly}},{key:"addAnchor",value:function(a){if(a){"string"===typeof a&&(a={id:a,row:0,column:0});if(!a.isAnchor){var e=a,n=e.column,q=e.row;a=new fd.Anchor(e.id,"number"===typeof q&&"number"===typeof n?{row:q,column:n}:void 0,e.insertBehavior||"move")}if(e=a.id&&this.anchors.find(function(r){return r.id===a.id}))return Object.assign(e,a);this.anchors.push(a);return a}}},{key:"removeAnchor",value:function(a){for(var e=this.anchors,
n,q=e.length;q--;){var r=e[q];if(r.id==a||r===a)n=r,e.splice(q,1)}return n}},{key:"addMarker",value:function(a){this.removeMarker(a.id);this.markers.push(a);this.makeDirty();return a}},{key:"removeMarker",value:function(a){var e="string"===typeof a?a:a.id;this.markers=this.markers.filter(function(n){return n.id!==e});this.makeDirty()}},{key:"saveMark",value:function(a,e){a=void 0===a?this.cursorPosition:a;var n=this.activeMark;n&&n!==a&&!n.equalsPosition(a)&&(this.savedMarks=this.savedMarks.concat(n));
e?this.activeMark=a:this.savedMarks=this.savedMarks.concat(a)}},{key:"saveActiveMarkAndDeactivate",value:function(){var a=this.activeMark;a&&(this.saveMark(a),this.activeMark=null)}},{key:"popSavedMark",value:function(){var a=this.activeMark;if(a)return this.activeMark=null,a;a=fd.arr.last(this.savedMarks);this.savedMarks=this.savedMarks.slice(0,-1);return a}},{key:"lastSavedMark",get:function(){return this.activeMark||fd.arr.last(this.savedMarks)}},{key:"savedMarkForSelection",value:function(a){var e=
this.selection,n=this.savedMarks,q=this.multiSelect?this.multiSelect.getAllRanges().length:1;q=n.length-(q-(e.index||0));e=n[q]||e.anchor;a&&"row"in a&&"column"in a&&(this.savedMarks=n.slice(0,q).concat(a).concat(n.slice(q+1)));return e}},{key:"addPlugin",value:function(a){this.plugins.includes(a)||(this.plugins.push(a),this._cachedKeyhandlers=null,"function"===typeof a.attach&&a.attach(this));return a}},{key:"removePlugin",value:function(a){if(!this.plugins.includes(a))return!1;this._cachedKeyhandlers=
null;fd.arr.remove(this.plugins,a);"function"===typeof a.detach&&a.detach(this);return!0}},{key:"pluginCollect",value:function(a,e){e=void 0===e?[]:e;this.plugins.forEach(function(n){return"function"===typeof n[a]&&(e=n[a](e))});return e}},{key:"pluginInvokeFirst",value:function(a,e){for(var n=[],q=1;q<arguments.length;++q)n[q-1]=arguments[q];return(q=this.pluginFind(function(r){return"function"===typeof r[a]}))?q[a].apply(q,$jscomp.arrayFromIterable(n)):void 0}},{key:"pluginFind",value:function(a){return this.plugins.slice().reverse().find(a)}},
{key:"editorPlugin",get:function(){return this.pluginFind(function(a){return a.isEditorPlugin})}},{key:"lookupEditorPluginNamed",value:function(a){var e,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return a=fd.config.ide.modes.aliases[a]||a,n=(e=/^[^:\\]+:\/\//.test(a))?a:"lively.ide/"+a+"/editor-plugin.js",v.yield(lively.modules.doesModuleExist(n),2);if(3!=v.nextAddress)return v.yieldResult?v.yield(lively.modules.module(n).load(),3):v.return(null);q=v.yieldResult;
r=q.default;return v.return(r)})}},{key:"changeEditorMode",value:function(a){var e=this,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return n=e.plugins.filter(function(v){return!v.isEditorPlugin}),a?"string"!==typeof a?r.jumpTo(2):r.yield(e.lookupEditorPluginNamed(a),3):(e.plugins=n,r.return(null));if(2!=r.nextAddress){q=r.yieldResult;if(!q)throw Error("Cannot find editor mode "+a);a=new q(fd.config.codeEditor.defaultTheme);e.evalEnvironment&&(a.evalEnvironment=
e.evalEnvironment)}e.plugins=n.concat(a);return r.return(a)})}},{key:"invalidateTextLayout",value:function(a,e){e=void 0===e?!1:e;if(!this._isDeserializing){var n=this.viewState;n&&(this.fixedWidth&&this.fixedHeight||(n._needsFit=!0),n=this.textLayout)&&((void 0===a?0:a)&&n.resetLineCharBoundsCache(this),n.estimateLineHeights(this,e))}}},{key:"textBounds",value:function(){return this.textLayout.textBounds(this)}},{key:"defaultCharExtent",value:function(){return this.textLayout.defaultCharExtent(this)}},
{key:"scrollExtent",get:function(){return this.textBounds().extent().addPt(this.padding.topLeft()).addPt(this.padding.bottomRight()).addPt(this.scrollbarOffset).maxPt(ac._get(Object.getPrototypeOf(h.prototype),"scrollExtent",this))}},{key:"commands",get:function(){return this.pluginCollect("getCommands",(this._commands||[]).concat(fd.commands))}},{key:"execCommand",value:function(a,e,n,q){function r(m){(y.hasOwnProperty("scrollCursorIntoView")?y.scrollCursorIntoView:1)&&fd.fun.debounceNamed("execCommand-scrollCursorIntoView-"+
m.id,100,function(){return m.scrollCursorIntoView()})()}var v=this,y=(this.lookupCommand(a)||{}).command;if(y){var D=this.inMultiSelectMode(),E=y.hasOwnProperty("multiSelectAction")?y.multiSelectAction:"forEach";if(D&&"forEach"===E){var I=this.selection;D=this.selection.selections.slice().reverse();this.selection=D[0];this._multiSelection=I;try{var K=this.execCommand(a,e,n,q)}catch(m){throw this.selection=I,this._multiSelection=null,this.selection.mergeSelections(),m;}if(!K)return K;var P=[K];if("function"===
typeof K.then&&"function"===typeof K.catch)return fd.promise.finally(fd.promise.chain([function(){return K}].concat(D.slice(1).map(function(m){return function(){v.selection=m;return Promise.resolve(v.execCommand(a,e,n,q)).then(function(t){return P.push(t)})}}))).then(function(){return P}),function(){v.selection=I;v._multiSelection=null;v.selection.mergeSelections()});try{for(var N=$jscomp.makeIterator(D.slice(1)),aa=N.next();!aa.done;aa=N.next())this.selection=aa.value,P.push(this.execCommand(a,e,
n,q))}finally{this.selection=I,this._multiSelection=null,this.selection.mergeSelections()}return P}(K=this.commandHandler.exec(a,this,e,n,q))&&("function"===typeof K.then&&"function"===typeof K.catch?K.then(function(){return r(v)}):r(this));return K}}},{key:"changeDocument",value:function(a,e){e=void 0===e?!1:e;if(this.document)var n=this.defaultTextStyle;else e=!1;this.document=a;this.textLayout.reset();e&&(this.defaultTextStyle=n);this.makeDirty();this.consistencyCheck()}},{key:"textInRange",value:function(a){return this.document.textInRange(a)}},
{key:"charRight",value:function(a){a=void 0===a?this.cursorPosition:a;var e=a.column;return this.getLine(a.row).slice(e,e+1)}},{key:"charLeft",value:function(a){a=void 0===a?this.cursorPosition:a;var e=a.column;return this.getLine(a.row).slice(e-1,e)}},{key:"indexToPosition",value:function(a){return this.document.indexToPosition(a)}},{key:"positionToIndex",value:function(a){return this.document.positionToIndex(a)}},{key:"getVisibleLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.wrappedLines(this)[a].text}},
{key:"isLineVisible",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.isLineVisible(this,a)}},{key:"isLineFullyVisible",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.isLineFullyVisible(this,a)}},{key:"getLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.document.getLineString(a)}},{key:"lineCount",value:function(){return this.document.rowCount}},{key:"isLineEmpty",value:function(a){return!this.getLine(a).trim()}},
{key:"isAtLineEnd",value:function(a){a=void 0===a?this.cursorPosition:a;var e=this.getLine(a.row);return a.column===e.length}},{key:"wordsOfLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.document.wordsOfLine(a)}},{key:"wordAt",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordAt(a)}},{key:"wordLeft",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordLeft(a)}},{key:"wordRight",value:function(a){a=void 0===a?this.cursorPosition:
a;return this.document.wordRight(a)}},{key:"lineRange",value:function(a,e){a=void 0===a?this.cursorPosition.row:a;e=void 0===e?!0:e;"number"!==typeof a&&this.cursorPosition.row;var n=this.getLine(a);a={start:{column:0,row:a},end:{column:n.length,row:a}};n=n.match(/^\s*/);n[0].length&&e&&(a.start.column+=n[0].length);return new fd.Range(a)}},{key:"screenLineRange",value:function(a,e){a=void 0===a?this.cursorPosition:a;return this.textLayout.screenLineRange(this,a,void 0===e?!0:e)}},{key:"insertTextAndSelect",
value:function(a,e){e=void 0===e?null:e;a=String(a);e?this.selection.range=this.insertText(a,e):this.selection.text=a}},{key:"append",value:function(a){var e=this;return this.saveExcursion(function(){return e.insertText(a,e.documentEndPosition)})}},{key:"insertText",value:function(a,e,n,q){e=void 0===e?this.cursorPosition:e;return this.replace({start:e,end:e},a,void 0===n?!0:n,void 0===q?!0:q)}},{key:"deleteText",value:function(a,e){e=void 0===e?!0:e;var n=this.textAndAttributesInRange(a);this.replace(a,
[],!1,e);return n}},{key:"replace",value:function(a,e,n,q,r,v){var y=this;n=void 0===n?!0:n;q=void 0===q?!0:q;r=void 0===r?!0:r;v=void 0===v?!0:v;a=a.isRange?a:new fd.Range(a);var D="string"===typeof e?[e,null]:Array.isArray(e)?e:[String(e||""),null];e=!D.length||2==D.length&&!D[0];var E=a.isEmpty();if(e&&E)return a;var I;n&&(I=this.textAttributeAt({row:a.start.row,column:a.start.column-(0<a.start.column?1:0)}));var K=[];for(n=0;n<D.length;n+=2)e=D[n],E=D[n+1],e.isMorph&&K.push(e),I&&(D[n+1]=Object.assign({},
I,{},E));r&&this.undoManager.undoStart(this,"replace");var P=this.textAndAttributesInRange(a),N=this.document.replace(a,D,this.debug&&this.debugHelper(this.debug)).inserted;this.addMethodCallChangeDoing({target:this,selector:"replace",args:[a,D],undo:{target:this,selector:"replace",args:[N,P,!1]}},function(){q&&(y.invalidateTextLayout(!1,!1),y.textLayout.resetLineCharBoundsCacheOfRange(y,N));if(!fd.eqPosition(a.end,N.end)){if(fd.lessPosition(N.end,a.end)){var aa=$jscomp.makeIterator((new fd.Range(a)).subtract(N)).next().value;
y.anchors.forEach(function(t){return t.onDelete(aa)})}else{var m=$jscomp.makeIterator((new fd.Range(N)).subtract(a)).next().value;y.anchors.forEach(function(t){return t.onInsert(m)})}y.selectable&&(y._multiSelection?y._multiSelection.updateFromAnchors():y.selection.updateFromAnchors())}y._updateEmbeddedMorphsDuringReplace(K,N,D,P);y._isDeserializing&&y._initializedByCachedBounds||y.textLayout.estimateLineHeights(y,!1);v&&y.consistencyCheck()});r&&this.undoManager.undoStop();return N}},{key:"_updateEmbeddedMorphsDuringReplace",
value:function(a,e,n,q){for(var r=this.embeddedMorphMap,v=0;v<q.length;v+=2){var y=q[v];if(y.isMorph&&!a.includes(y)){if(r){var D=r.get(y);D&&D.anchor&&(this.removeAnchor(D.anchor),fd.disconnect(D.anchor,"position",y,"position"));r.set(y,Object.assign({},D,{anchor:null}))}y.remove()}}if(a.length)for(n=fd.textAndAttributesWithSubRanges(e.start,n),e=n.ranges,n=n.textAndAttributes,q=0;q<e.length;q++)v=n[2*q],v.isMorph&&(console.assert(a.includes(v),"????"),y=e[q].start,v.owner!==this&&this.addMorph(v),
r&&(r.has(v)?r.get(v).anchor.position=y:(y=this.addAnchor(Object.assign({id:"embedded-"+v.id},y)),fd.connect(y,"position",v,"position",{updater:function(E,I){var K=this.targetObj.owner,P=this.targetObj;I=K&&K.isText?K.charBoundsFromTextPosition(I).topLeft().subPt(K.origin):P.position;K&&(K._positioningSubmorph=P);E(I);K&&(K._positioningSubmorph=!1)}}).update(y.position),r.set(v,{anchor:y}))))}},{key:"applyJsDiffPatch",value:function(a){function e(E,I,K,P){var N=q.indexToPosition(E+K),aa=q.indexToPosition(I+
K);P.push(q.deleteText({start:N,end:aa}));return K-(I-E)}function n(E,I,K,P){P.push(q.insertText(I,q.indexToPosition(E+K)));return K}var q=this,r=[],v=0,y=0;a=$jscomp.makeIterator(a);for(var D=a.next();!D.done;D=a.next())D=D.value,D.removed?y=e(v,v+D.count,y,r):D.added&&(y=n(v,D.value,y,r)),v+=D.count;return r}},{key:"applyTextChanges",value:function(a,e,n,q){e=void 0===e?0:e;n=void 0===n?!0:n;var r=[];a=$jscomp.makeIterator(a);for(var v=a.next();!v.done;v=a.next()){var y=$jscomp.makeIterator(v.value);
v=y.next().value;var D=y.next().value;y=y.next().value;e&&(D="number"===typeof D?D:this.positionToIndex(D),y&&"string"!==typeof y&&!Array.isArray(y)&&(y=("number"===typeof y?y:this.positionToIndex(y))+e),D+=e);D="number"===typeof D?this.indexToPosition(D):D;switch(v){case "delete":case "remove":v="number"===typeof y?this.indexToPosition(y):y;r.push(this.deleteText({start:D,end:v},q));break;case "insert":r.push(this.insertText(y,D,n,q));break;default:console.warn("[applyTextChanges] unknown type: "+
v)}}return r}},{key:"modifyLines",value:function(a,e,n){var q=this;n=fd.arr.range(a,e).map(function(r){return q.getLine(r)}).map(n).join("\n")+"\n";this.deleteText({start:{row:a,column:0},end:{row:e+1,column:0}},!1);this.insertText(n,{row:a,column:0})}},{key:"modifySelectedLines",value:function(a){var e=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range;return this.modifyLines(e.start.row,e.end.row,a)}},{key:"withLinesDo",value:function(a,e,n){var q=this;return fd.arr.range(a,
e).map(function(r){var v=q.getLine(r);r=fd.Range.create(r,0,r,v.length);return n(v,r)})}},{key:"withSelectedLinesDo",value:function(a){var e=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range,n=e.start.row;e=e.end;var q=e.row;return this.withLinesDo(n,0===e.column&&q>n?q-1:q,a)}},{key:"joinLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;var e=this.getLine(a),n=this.getLine(a+1);n=e+n.replace(/^\s+/,"")+this.document.constructor.newline;this.replace({start:{column:0,
row:a},end:{column:0,row:a+2}},n,!0);return{row:a,column:e.length}}},{key:"whatsVisible",get:function(){return this.textLayout.whatsVisible(this)}},{key:"flash",value:function(a,e){var n=this;a=void 0===a?this.selection.range:a;e=Object.assign({time:1E3,fill:fd.Color.orange},e);var q=e.id||"flash"+fd.string.newUUID();this.addMarker({id:q,range:a,style:{"background-color":e.fill.toCSSString(),"pointer-events":"none"}});fd.fun.debounceNamed("flash-"+q,e.time,function(){return n.removeMarker(q)})()}},
{key:"addTextAttribute",value:function(a,e){var n=this;e=void 0===e?this.selection:e;var q={start:e.start,end:e.end};this.undoManager.undoStart(this,"addTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"addTextAttribute",args:[a,q],undo:{target:this,selector:"removeTextAttribute",args:[a,q]}},function(){n.document.mixinTextAttribute(a,q);n.onAttributesChanged(q);n.consistencyCheck()});this.undoManager.undoStop();return a}},{key:"removeTextAttribute",value:function(a,e){var n=this;
e=void 0===e?this.selection:e;var q={start:e.start,end:e.end};this.undoManager.undoStart(this,"removeTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"removeTextAttribute",args:[a,q],undo:{target:this,selector:"addTextAttribute",args:[a,q]}},function(){n.document.mixoutTextAttribute(a,q);n.onAttributesChanged(q);n.consistencyCheck()});this.undoManager.undoStop()}},{key:"setTextAttributesWithSortedRanges",value:function(a){this.document.setTextAttributesWithSortedRanges(a);this.consistencyCheck();
for(var e=0;e<a.length;)this.onAttributesChanged(a[e]),e+=2}},{key:"textAttributeAt",value:function(a){return this.document.textAttributeAt(a)}},{key:"textAttributeAtPoint",value:function(a){return this.textAttributeAt(this.textLayout.textPositionFromPoint(this,a))}},{key:"textAndAttributesInRange",value:function(a){a=void 0===a?this.selection.range:a;return this.document.textAndAttributesInRange(a)}},{key:"resetTextAttributes",value:function(){this.document.resetTextAttributes();this.onAttributesChanged(this.documentRange);
this.consistencyCheck()}},{key:"onAttributesChanged",value:function(a){this.invalidateTextLayout(!1,!1);var e=this.textLayout;e&&e.resetLineCharBoundsCacheOfRange(this,a);this.makeDirty()}},{key:"styleAt",value:function(a){return(a=this.textLayout.chunkAtPos(this,a))?a.style:Object.assign({},this.defaultTextStyle)}},{key:"getStyleInRange",value:function(a){a=void 0===a?this.selection:a;return this.textAndAttributesInRange(a).filter(function(e,n){return 0!=n%2}).reduce(function(e,n){for(var q in n){var r=
n[q];if(!e.hasOwnProperty(q)||void 0!==r&&null!==r)e[q]=r}return e},{})}},{key:"setStyleInRange",value:function(a,e){var n=this;e=void 0===e?this.selection:e;for(var q=this.textAndAttributesInRange(e),r={start:Object.assign({},e.start),end:Object.assign({},e.start)},v=[],y=0;y<q.length;y+=2){var D=q[y],E=q[y+1],I=-1;"string"!==typeof D&&(D=fd.objectReplacementChar);for(;-1<(I=D.indexOf("\n"));)0<I&&(r.end.column+=I,v.push(r,E)),r={row:r.end.row+1,column:0},r={start:r,end:Object.assign({},r)},D=D.slice(I+
1);r.end.column+=D.length;v.push(r,E);r={start:Object.assign({},r.end),end:Object.assign({},r.end)}}this.undoManager.undoStart(this,"setStyleInRange");this.addMethodCallChangeDoing({target:this,selector:"setStyleInRange",args:[a,e],undo:{target:this,selector:"setTextAttributesWithSortedRanges",args:[v]}},function(){n.document.setTextAttribute(a,e);n.consistencyCheck();n.onAttributesChanged(e)});this.undoManager.undoStop()}},{key:"resetStyleInRange",value:function(a){a=void 0===a?this.selection:a;
for(var e=this.document.textAndAttributesInRange(a),n={},q=0;q<e.length;q+=2)Object.assign(n,e[q+1]);this.removeTextAttribute(n,a)}},{key:"changeStyleProperty",value:function(a,e,n){var q=this;n=void 0===n?this.selection:n;n=this.getStyleInRange(n)[a];var r=e(n);this.selections.forEach(function(v){var y={};return q.addTextAttribute((y[a]=r,y),v)})}},{key:"inMultiSelectMode",value:function(){return this.selection.selections&&1<this.selection.selections.length}},{key:"selectionBounds",value:function(){var a=
this;return this.selections.map(function(e){var n=a.charBoundsFromTextPosition(e.start),q=a.charBoundsFromTextPosition(e.end);return e.start.row===e.end.row?n.union(q):fd.rect(fd.pt(a.padding.left(),n.top()),fd.pt(a.width-a.padding.left(),q.bottom()))}).reduce(function(e,n){return n.union(e)})}},{key:"documentEndPosition",get:function(){return this.document?this.document.endPosition:{row:0,column:0}}},{key:"isAtDocumentEnd",value:function(){return fd.eqPosition(this.cursorPosition,this.documentEndPosition)}},
{key:"documentRange",get:function(){return{start:{row:0,column:0},end:this.documentEndPosition}}},{key:"cursorUp",value:function(a){return this.selection.goUp(void 0===a?1:a)}},{key:"cursorDown",value:function(a){return this.selection.goDown(void 0===a?1:a)}},{key:"cursorLeft",value:function(a){return this.selection.goLeft(void 0===a?1:a)}},{key:"cursorRight",value:function(a){return this.selection.goRight(void 0===a?1:a)}},{key:"getPositionAboveOrBelow",value:function(a,e,n,q,r){function v(I,K){I=
I.slice();I.push({x:fd.arr.last(I).x+fd.arr.last(I).width});for(var P=0,N=Infinity,aa=0;aa<I.length;aa++){var m=Math.abs(I[aa].x-K);m<N&&(N=m,P=aa)}return P}a=void 0===a?1:a;e=void 0===e?this.cursorPosition:e;n=void 0===n?!1:n;if(0===a)return e;"number"===typeof r&&(r-=this.padding.left());var y=e.row,D=e.column;if(n&&this.lineWrapping){y=this.textLayout.rangesOfWrappedLine(this,e.row);if(!y.length)return e;D=y.length-1-y.slice().reverse().findIndex(function(I){return I.start.column<=e.column});if(1<=
a){var E=0===D?0>=e.row?null:fd.arr.last(this.textLayout.rangesOfWrappedLine(this,e.row-1)):y[D-1];if(!E)return e}else if(-1>=a&&(E=(y.length-1===D?e.row>=this.lineCount()-1?[]:this.textLayout.rangesOfWrappedLine(this,e.row+1):y.slice(D+1))[0],!E))return e;y=E.start.row;D=this.textLayout.charBoundsOfRow(this,y).slice(E.start.column,E.end.column+1);D=E.start.column+v(D,r)}else y=Math.min(Math.max(0,e.row-a),this.lineCount()-1),"number"===typeof r&&(E=this.textLayout.charBoundsOfRow(this,y),D=v(E,r));
E={row:y,column:D};return 1<Math.abs(a)?this.getPositionAboveOrBelow(a+(1<a?-1:1),E,n,q,r):E}},{key:"collapseSelection",value:function(){this.selection.collapse(this.selection.lead);return this.selection}},{key:"selectAll",value:function(){this.selection.selectAll();return this.selection}},{key:"selectLine",value:function(a,e){a=void 0===a?this.cursorPosition.row:a;this.selection.selectLine(a,void 0===e?!1:e);return this.selection}},{key:"selectionOrLineString",value:function(){var a=this.selection,
e=a.start;return a.text||this.getLine(e.row)}},{key:"scrollCursorIntoView",value:function(){this.scrollPositionIntoView(this.cursorPosition)}},{key:"centerRange",value:function(a,e,n){a=void 0===a?this.selection.range:a;e=void 0===e?fd.pt(0,0):e;n=void 0===n?!0:n;var q=this.charBoundsFromTextPosition(a.start).top();a=this.charBoundsFromTextPosition(a.end).bottom()-q;this.scroll=a<this.height||!1===n?this.scroll.withY(q+a/2-this.height/2).addPt(e):this.scroll.withY(q).addPt(e)}},{key:"centerRow",value:function(a,
e){a=void 0===a?this.cursorPosition.row:a;e=void 0===e?fd.pt(0,0):e;return this.alignRowAtTop(a,e.addXY(0,-this.height/2))}},{key:"alignRowAtTop",value:function(a,e){a=void 0===a?this.cursorPosition.row:a;e=void 0===e?fd.pt(0,0):e;this.scroll=this.charBoundsFromTextPosition({row:a,column:0}).topLeft().addXY(-this.padding.left(),0).addPt(e)}},{key:"alignRowAtBottom",value:function(a,e){a=void 0===a?this.cursorPosition.row:a;e=void 0===e?fd.pt(0,0):e;var n=this.charBoundsFromTextPosition({row:a,column:0}).height;
this.alignRowAtTop(a,e.addXY(0,-this.textPageHeight()+n))}},{key:"scrollPositionIntoView",value:function(a,e){e=void 0===e?fd.pt(0,0):e;if(this.isClip()){var n=this.scroll;n=this.innerBounds().translatedBy(n).insetByRect(this.padding).insetBy(this.borderWidth);a=this.charBoundsFromTextPosition(a);this.lineWrapping||(a=a.insetByPt(fd.pt(-20,0)));var q=20<n.bottom()-a.bottom()?"bottomLeft":"topLeft";n=a[q]().subPt(n.translateForInclusion(a)[q]()).addPt(e);if(0!=n.x||0!=n.y)this.scroll=this.scroll.addPt(n).addPt(e),
this.isFocused()&&this.ensureKeyInputHelperAtCursor()}}},{key:"keepPosAtSameScrollOffsetWhile",value:function(a,e){var n=this;e=void 0===e?this.cursorPosition:e;var q=this.scroll;e=this.selection.lead;var r=this.charBoundsFromTextPosition(e).y-q.y;q=!1;var v=function(){return n.scroll=n.scroll.withY(n.charBoundsFromTextPosition(e).y-r)};try{var y=a();q=y&&y instanceof Promise}finally{!q&&v()}q&&fd.promise.finally(y,v);return y}},{key:"saveExcursion",value:function(a,e){var n=this;e=Object.assign({useAnchors:!1},
e);var q=this.selection.isMultiSelection?this.selection.selections.map(function(D){return D.directedRange}):[this.selection],r=e.useAnchors?q.map(function(D){var E=D.end;return[n.addAnchor(Object.assign({},D.start,{id:"save-excursion-"+fd.string.newUUID()})),n.addAnchor(Object.assign({},E,{id:"save-excursion-"+fd.string.newUUID()}))]}):null,v=!1;e=e.useAnchors?function(){var D=r.map(function(E){var I=$jscomp.makeIterator(E);E=I.next().value.position;I=I.next().value.position;return{start:E,end:I}});
n.selections=D;r.forEach(function(E){var I=$jscomp.makeIterator(E);E=I.next().value;I=I.next().value;n.removeAnchor(E);n.removeAnchor(I)})}:function(){return n.selections=q};try{var y=this.keepPosAtSameScrollOffsetWhile(a);v=y&&y instanceof Promise}finally{!v&&e()}v&&fd.promise.finally(y,e);return y}},{key:"alignRow",value:function(a,e){e=void 0===e?"center":e;if(this.isClip()){var n=this.scroll,q=this.padding;n=this.innerBounds().insetByRect(q).translatedBy(n);a=this.charBoundsFromTextPosition({row:a,
column:0});if(e="top"===e||"bottom"===e?n[e]()-a[e]():"center"===e?n[e]().y-a[e]().y:0)this.scroll=this.scroll.addXY(0,-e)}}},{key:"fit",value:function(){var a=this,e=this.viewState,n=this.fixedWidth,q=this.fixedHeight;e._needsFit=!1;if(q&&n||!this.textLayout||this.master&&!this.master._appliedMaster)return this;var r=this.textBounds().outsetByRect(this.padding),v=function(){q||a.height==r.height||(a.height=r.height);n||a.width==r.width||(a.width=r.width);a.embeddedMorphs.forEach(function(y){y=a.embeddedMorphMap.get(y).anchor;
y.position=y.position})};e._needsFit=!1;this.document.lines.find(function(y){return y.hasEstimatedExtent})?this.whenRendered().then(v):v();return this}},{key:"fitIfNeeded",value:function(){this.viewState._needsFit&&this.fit()}},{key:"defaultLineHeight",get:function(){var a=this.padding;return a.top()+a.bottom()+this.fontMetric.defaultLineHeight({fontSize:this.fontSize,fontFamily:this.fontFamily})}},{key:"columnInWrappedLine",value:function(a){if(!this.lineWrapping)return a.column;var e=this.screenLineRange(a,
!0).start.column;return a.column-e}},{key:"textPositionFromPoint",value:function(a){return this.textLayout.textPositionFromPoint(this,a)}},{key:"charBoundsFromTextPosition",value:function(a){return this.textLayout.boundsFor(this,a)}},{key:"forceRerender",value:function(){this.textLayout.reset();this.makeDirty()}},{key:"aboutToRender",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"aboutToRender",this).call(this,a)}},{key:"applyLayoutIfNeeded",value:function(){this._requestMasterStyling&&
(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);this.fitIfNeeded();ac._get(Object.getPrototypeOf(h.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){return this.textRenderer.renderMorph(this,a)}},{key:"directRender",value:function(){var a=this.env.renderer,e=this.textRenderer;a&&e&&!a._stopped&&(fd.renderSubTree(this,a),e.manuallyTriggerTextRenderHook(this,a))}},{key:"onMouseDown",value:function(a){if(!a.rightMouseButtonPressed()){this.activeMark&&
(this.activeMark=null);var e=a.state;if(e.clickedOnMorph===this){e=(e.clickCount-1)%3+1;var n=this.localize(a.position),q=this.textPositionFromPoint(n);a.leftMouseButtonPressed()&&!a.isShiftDown()&&!a.isAltDown()&&this.callTextAttributeDoitFromMouseEvent(a,n);this.selectable&&(a.isShiftDown()?this.selection.lead=q:a.isAltDown()?this.selection.addRange(fd.Range.at(q)):(this.selection.disableMultiSelect(),1===e?a.isShiftDown()?this.selection.lead=q:this.selection={start:q,end:q}:2===e?this.execCommand("select word",
null,1,a):3===e&&this.execCommand("select line",null,1,a)),this.isFocused()&&this.ensureKeyInputHelperAtCursor())}}}},{key:"evalEnvForDoit",value:function(a){var e="lively://text-doit/"+this.id;lively.modules.module(e);return{context:a.context||this,format:"esm",targetModule:e}}},{key:"callTextAttributeDoitFromMouseEvent",value:function(a,e){var n=this;e=(e=this.textAttributeAtPoint(e)||[],e.doit);if(!e||!e.code)return!1;var q=this.evalEnvForDoit(e),r=lively.modules.module(q.targetModule);r.recorder.evt=
a;lively.vm.runEval(e.code,q).catch(function(v){return n.world().logError(Error("Error in text doit: "+v.stack))}).then(function(){return r.recorder.evt=null});return!0}},{key:"onMouseMove",value:function(a){a.leftMouseButtonPressed()&&this.selectable&&a.state.clickedOnMorph===this&&(this.selection.lead=this.textPositionFromPoint(this.localize(a.position)))}},{key:"selectMatchingBrackets",value:function(a,e){function n(E){return"\t"===E||" "===E}function q(E,I,K,P,N){for(var aa=1;(0>N?0<=P-1:P+1<
E.length)&&(P+=N,E[P]==I&&I!=K&&aa++,E[P]==K&&aa--,0!=aa););return P}function r(E,I,K,P){for(var N=I;0>K?0<=N-1:N+1<E.length;)if(N+=K,E[N]==P)return 0<K?[I,N]:[N+1,I];return 0<K?[I+1,E.length-1]:[0,I]}if(!a)return e;if(0==e||e==a.length)return[0,a.length-1];var v=e-1;if(0<e){if("\n"==a[e-1]||"\r"==a[e-1])return r(a,e,1,a[e-1]);var y="*({[<'\"`".indexOf(a[e-1]);"*"==a[e-1]&&(0>e-2||"/"!=a[e-2])&&(y=-1);if(0<=y)return v=q(a,"*({[<'\"`"[y],"*)}]>'\"`"[y],e-1,1),[e,v-1]}if(e<a.length){if("\n"==a[e]||
"\r"==a[e])return r(a,e,-1,a[e]);y="*)}]>'\"`".indexOf(a[e]);"*"==a[e]&&(e+1>=a.length||"/"!=a[e+1])&&(y=-1);if(0<=y)return e=q(a,"*)}]>'\"`"[y],"*({[<'\"`"[y],e,-1),[e+1,v]}if("/"===a[e-1]&&"/"===a[e-2]){for(;v+1<a.length&&"\n"!==a[v+1]&&"\r"!==a[v+1];)v++;return[e,v]}y=e;for(var D=v;0<=y-1&&n(a[y-1]);)y--;for(;D<a.length&&n(a[D+1]);)D++;if(1<=D-y)return[y,D];for(y=e<a.length?a[e]:"";0<=e-1&&((a[e-1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!=a[e-1]?0:0<="0123456789".indexOf(y)));)y=a[e-1],e--;for(;v+
1<a.length&&((a[v+1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!=a[v+1]?0:0<="0123456789".indexOf(y)));)y=a[v+1],v++;return[e,v]}},{key:"onContextMenu",value:function(a){var e=this;if(a.targetMorph===this){a.stop();var n=this.textPositionFromPoint(this.localize(a.position)),q=this.selection.selections||[this.selection];if(this.selection.isEmpty()||q.every(function(r){return!r.range.containsPosition(n)}))this.cursorPosition=n;Promise.resolve(this.menuItemsForContextMenu()).then(function(r){return e.openMenu(r,
a)}).catch(function(r){return $world.logError(r)})}}},{key:"onDrop",value:function(a){var e=a.hand.grabbedMorphs.filter(function(q){return q.isLayoutable});ac._get(Object.getPrototypeOf(h.prototype),"onDrop",this).call(this,a);if(e[0]){var n=this.textPositionFromPoint(this.localize(a.hand.globalPosition));this.insertText([e[0],null],n);e[0].opacity=a.state.originalOpacity||1}}},{key:"buildDropHoverGrid",value:function(a){var e=this;if(a.simpleDrop)return null;var n=this.whatsVisible,q=n.startRow;
n=Math.min(this.documentEndPosition.row,n.endRow);var r=this.document,v=this.padding.left(),y=this.padding.top();q=fd.arr.range(q,n).reduce(function(D,E){var I=e.textLayout.charBoundsOfRow(e,E).slice();1<=I.length&&0==fd.arr.last(I).width&&(fd.arr.last(I).width=12);if(1<I.length){var K=fd.arr.last(I);I.push({x:K.x+K.width,y:K.y,height:K.height,width:K.width||12})}I=I.map(function(P,N){P=fd.Rectangle.fromLiteral(P).translatedBy(fd.pt(v,y+r.computeVerticalOffsetOf(E)));var aa=e.getGlobalTransform().transformRectToRect(P);
return{textPos:{row:E,column:N},bounds:P,globalBounds:aa,morph:a.showDropGrid?fd.morph({reactsToPointer:!1,acceptsDrops:!1,bounds:P,border:{width:1,color:fd.Color.green},fill:null}):null}});return D.concat(I)},[]);q.forEach(function(D){return D.morph&&e.addMorph(D.morph)});return q}},{key:"onDropHoverIn",value:function(a){var e={simpleDrop:window.hasOwnProperty("simpleDrop")?window.simpleDrop:!0,showDropGrid:window.hasOwnProperty("showDropGrid")?window.showDropGrid:!1,useTextFlowPlaceholder:window.hasOwnProperty("useTextFlowPlaceholder")?
window.useTextFlowPlaceholder:!1},n=a.hand.grabbedMorphs[0];n&&(a.state.originalOpacity=n.opacity,n.opacity=.3);n=this.buildDropHoverGrid(e);a=a.state.dropHover||(a.state.dropHover=new WeakMap);var q=a.get(this);q||(q={},a.set(this,q));q.config=e;q.dropGrid=n}},{key:"onDropHoverUpdate",value:function(a){var e=a.hand.grabbedMorphs[0];if(e){var n=a.state.dropHover;if(n&&(n=n.get(this)))if(n.dropGrid){var q=n.config;a=a.positionIn(this);for(var r,v,y=Infinity,D=$jscomp.makeIterator(n.dropGrid),E=D.next();!E.done;E=
D.next()){E=E.value;if(E.bounds.containsPoint(a)){r=E;break}var I=E.bounds.closestPointToPt(a).dist(a);I<y&&(y=I,v=E)}r||(r=v);r&&(v=n.placeholder,v||(n.placeholder=v=fd.morph({fill:e.fill,extent:e.extent,reactsToPointer:!1,acceptsDrops:!1})),fd.obj.equals(v._textPos||{},r.textPos)||(this!==v.owner&&this.addMorph(v),v.position=r.bounds.topLeft(),q&&q.useTextFlowPlaceholder&&(v.remove(),v._textPos=r.textPos,this.insertText([v,null],r.textPos))))}else e=this.textPositionFromPoint(a.positionIn(this)),
this.focus(),this.cursorPosition=e}}},{key:"onDropHoverOut",value:function(a){var e=a.hand.grabbedMorphs[0];e&&(e.opacity=a.state.originalOpacity||1);if(a=a.state.dropHover)if(e=a.get(this))a.delete(this),e.dropGrid&&(e.dropGrid.forEach(function(n){return n.morph&&n.morph.remove()}),e.dropGrid=null),e.placeholder&&(e.placeholder.remove(),e.placeholder=null)}},{key:"menuItems",value:function(){var a=this,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return e=
$jscomp,n=e.makeIterator,y.yield(Promise.all([ac._get(Object.getPrototypeOf(h.prototype),"menuItems",a).call(a),a.menuItemsForContextMenu()]),2);q=n.call(e,y.yieldResult);r=q.next().value;v=q.next().value;return y.return(r.concat({isDivider:!0}).concat(v))})}},{key:"menuItemsForContextMenu",value:function(){var a=this,e,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:e=[{command:"text undo",alias:"undo",target:a,showKeyShortcuts:!0},{command:"text redo",
alias:"redo",target:a,showKeyShortcuts:!0},{command:"manual clipboard copy",alias:"copy",target:a,showKeyShortcuts:a.keysForCommand("clipboard copy"),args:{collapseSelection:!1,delete:!1}},{command:"manual clipboard paste",alias:"paste",target:a,showKeyShortcuts:a.keysForCommand("clipboard paste")},{command:"open text attribute controls",alias:"edit text attributes",target:a},{isDivider:!0},{command:"toggle line wrapping",alias:(a.lineWrapping?"disable":"enable")+" line wrapping",target:a,showKeyShortcuts:!0},
["run command",function(){a.focus();a.world().execCommand("run command")}]],n=$jscomp.makeIterator(a.plugins),q=n.next();case 2:if(q.done){v.jumpTo(4);break}r=q.value;if("function"!==typeof r.getMenuItems){v.jumpTo(3);break}return v.yield(r.getMenuItems(e),6);case 6:e=v.yieldResult;case 3:q=n.next();v.jumpTo(2);break;case 4:return v.return(e)}})}},{key:"keybindings",get:function(){var a=this.world();a=a&&a.getCurrentUser()&&a.getCurrentUser().config&&a.getCurrentUser().config.textKeyBindings||[];
a=ac._get(Object.getPrototypeOf(h.prototype),"keybindings",this).concat(a).concat(fd.config.text.defaultKeyBindings);return this.pluginCollect("getKeyBindings",a)}},{key:"keybindings",set:function(a){ac._set(Object.getPrototypeOf(h.prototype),"keybindings",a,this)}},{key:"keyhandlers",get:function(){if(this._cachedKeyhandlers)return this._cachedKeyhandlers;var a=ac._get(Object.getPrototypeOf(h.prototype),"keyhandlers",this).concat(this._keyhandlers||[]);return this._cachedKeyhandlers=a=this.pluginCollect("getKeyHandlers",
a)}},{key:"snippets",get:function(){return this.pluginCollect("getSnippets",[])}},{key:"onHoverIn",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onHoverIn",this).call(this,a);this.scrollActive=!0;this.makeDirty()}},{key:"onHoverOut",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onHoverOut",this).call(this,a);fd.touchInputDevice||(this.scrollActive=!1,this.makeDirty())}},{key:"onKeyDown",value:function(a){this.compositionRange||a.targetMorph!=this||(this.selection.cursorBlinkStart(),
fd.KeyHandler.invokeKeyHandlers(this,a,!0))}},{key:"onTextInput",value:function(a){fd.KeyHandler.invokeKeyHandlers(this,a,!1)}},{key:"onCompositionStart",value:function(a){this.insertTextAndSelect(a.data);this.compositionRange=this.selection.range}},{key:"onCompositionUpdate",value:function(a){this.selection.range=this.compositionRange;this.selection.text=[a.data,{textDecoration:"underline"}];this.compositionRange=this.selection.range}},{key:"onCompositionEnd",value:function(a){this.selection.range=
this.compositionRange;this.selection.text=a.data;this.cursorPosition=this.compositionRange.end;this.compositionRange=null}},{key:"onCut",value:function(a){if(!this.rejectsInput()&&this.isFocused()&&!fd.config.emacs)this.onCopy(a,!this.rejectsInput())}},{key:"onCopy",value:function(a,e){e=void 0===e?!1:e;if(this.isFocused()){a.stop();var n=this.selection;try{for(var q=this.textAndAttributesInRange(this.selection.range),r=this.defaultTextStyle,v={},y=0;y<q.length;y+=2){var D=q[y];if(D.isMorph)if(D.isDisplacementMorph)q[y]=
"";else{var E=v[y]=fd.serializeMorph(q[y]);q[y]=fd.deserializeMorph(E,{reinitializeIds:!0})}}var I=fd.extractHTMLFromTextMorph(this,q);a.domEvt.clipboardData.setData("text/html",I);for(var K in v)q[K]=v[K];var P=JSON.stringify({textAndAttributes:q,defaultTextStyle:r});a.domEvt.clipboardData.setData("application/x-lively-text",P)}catch(N){$world.logError(N)}a.domEvt.clipboardData.setData("text/plain",n.text);this.execCommand("manual clipboard copy",{collapseSelection:fd.config.codeEditor.collapseSelection||
!1,delete:e,dontTryNativeClipboard:!0})}}},{key:"onPaste",value:function(a){var e=this;if(!this.rejectsInput()){a.stop();var n="";try{n=a.domEvt.clipboardData.getData("text")}catch(y){console.warn(y)}if(!this.editorPlugin)try{var q=a.domEvt.clipboardData.getData("application/x-lively-text");var r=q&&JSON.parse(q);var v=r.textAndAttributes;for(a=0;a<v.length;a+=2)"string"!==typeof v[a]&&(v[a]=fd.deserializeMorph(v[a],{reinitializeIds:!0}))}catch(y){console.warn(y)}v=this.selection;v=v.isMultiSelection?
v.selections:[v];r&&this.undoManager.group();v.forEach(function(y){r?e.replace(y.range,r.textAndAttributes,!1,!0,!0):y.text=n;e.saveMark(y.start);y.collapseToEnd()});r&&this.undoManager.group()}}},{key:"onFocus",value:function(a){var e=this;ac._get(Object.getPrototypeOf(h.prototype),"onFocus",this).call(this,a);this.makeDirty();this.selection.cursorBlinkStart();if(!this._originalShadow){var n=this.haloShadow||this.propertiesAndPropertySettings().properties.haloShadow.defaultValue;n&&!n.equals&&(n=
new fd.ShadowObject(n));n&&!n.equals(this.dropShadow)&&(this._originalShadow=this.dropShadow);this.withMetaDo({metaInteraction:!0},function(){e.highlightWhenFocused&&e.animate({dropShadow:n,duration:200})})}}},{key:"onBlur",value:function(a){this.makeDirty();this.selection.cursorBlinkStop();this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null;ac._get(Object.getPrototypeOf(h.prototype),"onBlur",this).call(this,a)}},{key:"onScroll",
value:function(a){this.isFocused()&&this.ensureKeyInputHelperAtCursor();(a=this.env.renderer.getNodeForMorph(this))&&fd.signal(this,"viewChanged",{prop:"scroll",value:fd.pt(a.scrollLeft,a.scrollTop)})}},{key:"ensureKeyInputHelperAtCursor",value:function(){this.env.eventDispatcher.keyInputHelper&&this.env.eventDispatcher.keyInputHelper.ensureBeingAtCursorOfText(this)}},{key:"textPageHeight",value:function(){var a=this.padding,e=this.borderWidthBottom,n=this.borderWidthTop;return this.height-a.top()-
a.bottom()-e-n}},{key:"scrollPageDown",value:function(){this.scrollDown(this.textPageHeight())}},{key:"scrollPageUp",value:function(){this.scrollUp(this.textPageHeight())}},{key:"pageUpOrDown",value:function(a){var e=a=void 0===a?{direction:"up",select:!1}:a;a=e.direction;e=e.select;var n=this.textLayout["down"===a?"lastFullVisibleLine":"firstFullVisibleLine"](this),q=this.cursorPosition.column,r=this.padding;e?this.selection.lead={row:n,column:q}:this.cursorPosition={row:n,column:q};"down"===a?this.alignRowAtTop(n,
fd.pt(0,-r.top()-r.bottom())):(this.alignRowAtBottom(n,fd.pt(0,0)),this.alignRowAtBottom(n,fd.pt(0,r.top()+r.bottom())))}},{key:"gotoDocumentStart",value:function(a){a=void 0===a?{select:!1}:a;this.selection.lead={row:0,column:0};a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"gotoDocumentEnd",value:function(a){a=void 0===a?{select:!1}:a;this.selection.lead=this.documentEndPosition;a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"paragraphRangeAbove",value:function(a){if(this.isLineEmpty(a)){for(var e=
a-1;0<=e;e--)if(!this.isLineEmpty(e)){var n=e;break}if(void 0===n)return{start:{row:a,column:0},end:{row:a,column:0}}}else n=a;return this.paragraphRange(n)}},{key:"paragraphRangeBelow",value:function(a){var e=this.isLineEmpty(a),n=this.documentEndPosition;if(e){for(e=a+1;e<=n.row;e++)if(!this.isLineEmpty(e)){var q=e;break}if(void 0===q)return{start:{row:a,column:0},end:{row:a,column:0}}}else q=a;return this.paragraphRange(q)}},{key:"paragraphRange",value:function(a){if(this.isLineEmpty(a))return{start:{row:a,
column:0},end:{row:a,column:0}};var e=this.documentEndPosition;for(a+=1;a<=e.row;a++)if(this.isLineEmpty(a)){var n={row:a-1,column:this.getLine(a-1).length};break}n||(n=e);for(a=n.row-1;0<=a;a--)if(this.isLineEmpty(a)){var q={row:a+1,column:0};break}q||(q={row:0,column:0});return{start:q,end:n}}},{key:"astNodeRange",value:function(a){return{start:this.document.indexToPosition(a.start),end:this.document.indexToPosition(a.end)}}},{key:"parseIntoLines",value:function(a){return a.split("\n")}},{key:"computeTextRangeForChanges",
value:function(a){function e(y,D){for(var E="",I=0;I<y.length;I+=2)E+="string"===typeof y[I]?y[I]:fd.objectReplacementChar;y=q.parseIntoLines(E);return 1===y.length?fd.Range.fromPositions(D,{row:D.row,column:D.column+y[0].length}):1<y.length?fd.Range.fromPositions(D,{row:D.row+y.length-1,column:fd.arr.last(y).length}):fd.Range.at(D)}var n=fd.Range.at(this.cursorPosition);if(!a.length)return n;var q=this,r=a[0];n="replace"===r.selector?e(r.args[1],r.args[0].start):n;for(r=1;r<a.length;r++){var v=a[r];
n="replace"===v.selector?n.merge(e(v.args[1],v.args[0].start)):n}return n}},{key:"ensureUndoManager",value:function(){if(this.undoManager)return this.undoManager;var a=["addTextAttribute","removeTextAttribute","setStyleInRange","replace"];return this.undoManager=new fd.UndoManager(function(e){return a.includes(e.selector)})}},{key:"textUndo",value:function(){var a=this.undoManager.undo();a&&(a=a.changes.slice().reverse().map(function(e){return e.undo}),this.selection=this.computeTextRangeForChanges(a))}},
{key:"textRedo",value:function(){var a=this.undoManager.redo();a&&(a=a.changes.slice(),this.selection=this.computeTextRangeForChanges(a))}},{key:"findMatchingForward",value:function(a,e,n){e=void 0===e?"right":e;n=void 0===n?{}:n;var q=this["right"===e?"charRight":"charLeft"](a),r=n[q];if(!r)return null;var v="right"===e?-1:0;return this.document.scanForward(a,function(y,D){if(y===r){if(0===v)return"right"===e?{row:D.row,column:D.column+1}:D;v--}else y===q&&v++;return null})}},{key:"findMatchingBackward",
value:function(a,e,n){e=void 0===e?"right":e;n=void 0===n?{}:n;var q=this["right"===e?"charRight":"charLeft"](a),r=n[q];if(!r)return null;var v="left"===e?-1:0;return this.document.scanBackward(a,function(y,D){if(y===r){if(0===v)return"right"===e?{row:D.row,column:D.column+1}:D;v--}else y===q&&v++;return null})}},{key:"search",value:function(a,e){e=void 0===e?{start:this.cursorPosition,backwards:!1,caseSensitive:!1}:e;return(new fd.TextSearcher(this)).search(Object.assign({needle:a},e))}},{key:"searchForAll",
value:function(a,e){e=void 0===e?{caseSensitive:!1}:e;return(new fd.TextSearcher(this)).searchForAll(Object.assign({needle:a},e))}},{key:"tokenAt",value:function(a){return this.pluginInvokeFirst("tokenAt",a)}},{key:"astAt",value:function(a){return this.pluginInvokeFirst("astAt",a)}},{key:"evalEnvironment",get:function(){var a=this.editorPlugin;return a&&a.evalEnvironment}},{key:"evalEnvironment",set:function(a){var e=this.editorPlugin;e&&(e.evalEnvironment=a)}},{key:"doitContext",get:function(){return(this.evalEnvironment||
{}).context}},{key:"doitContext",set:function(a){(this.evalEnvironment||{}).context=a}},{key:"logDoit",value:function(a,e){e=void 0===e?{}:e;e=void 0===e.time?Date.now():e.time;if(!(12E4<a.length)){try{var n=JSON.parse(localStorage["lively.next-js-ide-doitlog"])}catch(q){}n||(n=[]);if(!n.some(function(q){return"string"===typeof q?q===a:q.source===a})){n.push({source:a,time:e});50<n.length&&(n=n.slice(-50));try{localStorage["lively.next-js-ide-doitlog"]=JSON.stringify(n)}catch(q){}}}}},{key:"doEval",
value:function(a,e,n){a=void 0===a?this.selection.isEmpty()?this.lineRange():this.selection.range:a;n=void 0===n?this.textInRange(a):n;a=this.pluginFind(function(q){return q.isEditorPlugin&&"function"===typeof q.runEval});if(!a)throw Error("doit not possible: cannot find js editor plugin of !"+this);e&&e.logDoit&&this.logDoit(n,e);return a.runEval(n,e)}},{key:"maybeSelectCommentOrLine",value:function(){var a=this.selection,e=a.lead,n=e.row;e=e.column;var q=this.selectionOrLineString();if(a.isEmpty()){var r=
q.indexOf("//");-1===r||e<r||0<r&&0<=":\"'".indexOf(q[r-1])?this.selectLine(n):a.range={start:{row:n,column:r+2},end:{row:n,column:q.length}}}}},{key:"debugHelper",value:function(a){a=Object.assign({debugDocumentUpdate:!0,debugTextLayout:!0},a);return this._debugHelper?Object.assign(this._debugHelper,a):this._debugHelper=Object.assign({},a,{logged:[],groups:[],reset:function(){this.groups=[[]];this.logged=this.groups[0]},log:function(e){for(var n=[],q=0;q<arguments.length;++q)n[q-0]=arguments[q];
console.log.apply(console,$jscomp.arrayFromIterable(n));this.logged.push({args:n})},dump:function(e){console.log(e.split("\n").map(function(n){return n.slice(0,100)}).join("\n"));this.logged.push({dump:e})},group:function(e){this.groups.push([]);this.logged=fd.arr.last(this.groups);console.group(e)},groupEnd:function(e){console.groupEnd(e)},steps:function(e){for(var n=[];e.length;){var q=fd.arr.takeWhile(e,function(v){return!v.dump});e=e.slice(q.length);var r=(e.shift()||{}).dump;n.push({actions:q,
dump:r})}return n},printToConsole:function(){var e=this;console.clear();this.groups.forEach(function(n){var q=e.steps(n);console.group(q.length);e.steps(n).forEach(function(r,v){r=r.actions;console.group("step "+(v+1));r.forEach(function(y){return console.log.apply(console,$jscomp.arrayFromIterable(y.args))});console.groupEnd("step "+(v+1))});console.groupEnd(q.length)})},report:function(){var e=this,n,q,r,v,y,D,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.yield(System.import("jsdiff",
System.decanonicalize("lively.morphic")),2);if(3!=I.nextAddress)return n=I.yieldResult,I.yield(System.import("lively.ide/diff/editor-plugin.js"),3);q=I.yieldResult;r=q.default;v=0;y="";D=[];E=0;e.groups.forEach(function(K,P){y+=">>> group "+(P+1)+"\n";E++;v++;var N=e.steps(K);N.forEach(function(aa,m){var t=aa.actions;aa=aa.dump;y+=fd.string.indent(">>> step "+(m+1)," ",v)+"\n";E++;v++;t.forEach(function(u){u=fd.string.indent(fd.string.formatFromArray(u.args.slice()).trim()," ",v);E+=u.split("\n").length;
y+=u+"\n"});1<=m&&aa&&N[m-1].dump&&(t=new r,aa=n.createPatch(String(m),N[m-1].dump,aa),t.tokenize(aa),D.push.apply(D,$jscomp.arrayFromIterable(t.styledRanges(E,v))),y+=aa,E+=aa.split("\n").length-1);y+=fd.string.indent("<< step "+(m+1)," ",v)+"\n";E++;v--});y+="<<< group "+(P+1)+"\n";E++;v--});return I.return({report:y,reportStyles:D})})},openReport:function(){var e=this,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(e.report(),2);n=v.yieldResult;
q=n.reportStyles;r=n.report;return v.return($world.execCommand("open text window",{title:"text debug",fontFamily:"monospace",content:r,rangesAndStyles:q}))})}})}},{key:"consistencyCheck",value:function(){if(this.debug)return this.document.consistencyCheck();try{return this.document.consistencyCheck()}catch(q){var a=this.document;this.brokenDocument||(this.brokenDocument=a);var e=this.world()||$world;try{var n=new fd.Document([]);n.textAndAttributes=a.textAndAttributes;this.changeDocument(n)}catch(r){e?
e.logError("Broken document could not be fixed"):console.error("Broken document could not be fixed")}e?e.logError(q):console.error(q)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Text"}},{key:"makeLabel",value:function(a,e){return new fd.morph(Object.assign({type:"label",value:a,fontFamily:"IBM Plex, Helvetica Neue, Arial, sans-serif",fontColor:fd.Color.almostBlack,fontSize:11},e))}},{key:"makeInputLine",value:function(a){return new (System.get(System.decanonicalize("lively.morphic")).InputLine)(a)}},
{key:"defaultTextStyle",get:function(){if(this._defaultTextStyle)return this._defaultTextStyle;for(var a=this.prototype.propertiesAndPropertySettings().properties,e=this.defaultTextStyleProps,n={},q=0;q<e.length;q++){var r=e[q];n[r]=a[r].defaultValue}return this._defaultTextStyle=n}},{key:"defaultTextStyleProps",get:function(){if(this._defaultTextStyleProps)return this._defaultTextStyleProps;var a=this.prototype.propertiesAndPropertySettings().properties,e=[],n;for(n in a)a[n].isDefaultTextStyleProp&&
e.push(n);return this._defaultTextStyleProps=e}},{key:"properties",get:function(){return{clipMode:{isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.fixedWidth=this.fixedHeight=this.isClip()}},fontMetric:{group:"_rendering",serialize:!1,get:function(){return this.getProperty("fontMetric")||this.env.fontMetric}},undoManager:{group:"core",before:["document"],initialize:function(){this.ensureUndoManager()}},textRenderer:{group:"_rendering",after:["viewState"],
initialize:function(){this.textRenderer=new fd.Renderer(this.env)}},debug:{group:"_debugging",isStyleProp:!0,after:["textRenderer","textLayout"],defaultValue:!1,doc:"For visualizing and debugging text layout and rendering"},defaultViewState:{group:"_rendering",derived:!0,readOnly:!0,get:function(){return{_needsFit:!0,text_layer_node:null,fontmetric_text_layer_node:null,dom_nodes:[],dom_nodeFirstRow:[],scrollTop:0,scrollHeight:0,scrollBottom:0,textHeight:0,textWidth:0,firstVisibleRow:0,lastVisibleRow:0,
heightBefore:0,wasScrolled:!1,afterTextRenderHook:null,fastScroll:!0}}},viewState:{group:"_rendering",initialize:function(){this.viewState=this.defaultViewState}},displacingMorphMap:{group:"_rendering",initialize:function(){this.displacingMorphMap=new Map}},embeddedMorphMap:{group:"_rendering",initialize:function(){this.embeddedMorphMap=new Map}},embeddedMorphs:{group:"text",derived:!0,readOnly:!0,after:["embeddedMorphMap"],get:function(){return this.embeddedMorphMap?Array.from(this.embeddedMorphMap.keys()):
[]}},textLayout:{group:"_rendering",after:["textRenderer"],initialize:function(){this.textLayout=new fd.TextLayout(this)}},document:{group:"text",initialize:function(){this.document=fd.Document.fromString("",{maxLeafSize:50,minLeafSize:25,maxNodeSize:35,minNodeSize:7});this.consistencyCheck()}},draggable:{defaultValue:!1},useSoftTabs:{group:"text",isStyleProp:!0,defaultValue:void 0!==fd.config.text.useSoftTabs?fd.config.text.useSoftTabs:!0},tabWidth:{group:"text",isStyleProp:!0,defaultValue:fd.config.text.tabWidth||
2},tab:{group:"text",after:["useSoftTabs","tabWidth"],readOnly:!0,derived:!0,get:function(){return this.useSoftTabs?" ".repeat(this.tabWidth):"\t"}},autoInsertPairs:{group:"text",defaultValue:!0},extent:{get:function(){var a=this,e=this.getProperty("extent");!this._textChange&&this.viewState&&this.viewState._needsFit&&!this._rendering&&!this._measuringTextBox&&e&&this.owner&&(this._measuringTextBox=!0,fd.noUpdate(function(){a.directRender()}),this._measuringTextBox=!1);return this.getProperty("extent")}},
fixedWidth:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},fixedHeight:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},readOnly:{group:"text",isStyleProp:!0,defaultValue:!1},selectable:{group:"selection",isStyleProp:!0,defaultValue:!0,set:function(a){this.setProperty("selectable",a);a||!this.getProperty("selection")||this.selection.isEmpty()||this.selection.collapse()}},padding:{group:"styling",type:"Rectangle",isStyleProp:!0,after:["textLayout",
"viewState"],defaultValue:fd.Rectangle.inset(0),set:function(a){this.setProperty("padding","number"===typeof a?fd.Rectangle.inset(a):a)}},haloShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null},highlightWhenFocused:{group:"styling",defaultValue:!1,after:["haloShadow"],set:function(a){this.setProperty("highlightWhenFocused",a);a&&!this.haloShadow&&(this.haloShadow={blur:6,color:fd.Color.rgb(52,152,219),distance:0,rotation:45})}},cursorPosition:{group:"selection",derived:!0,after:["selection",
"selectable","readOnly"],get:function(){return this.selection.lead},set:function(a){!this.readOnly&&this.selectable&&(this.selection.range={start:a,end:a})}},cursorWidth:{defaultValue:1,type:"Number"},selection:{group:"selection",derived:!0,after:["document","anchors","selectable"],get:function(){var a=this.getProperty("selection");if(a)return a;a=new (fd.config.text.useMultiSelect?fd.MultiSelection:fd.Selection)(this);this.setProperty("selection",a);return a},set:function(a){var e=this.getProperty("selection");
!a&&e?(e.isMultiSelection&&e.disableMultiSelect(),e.collapse()):a.isSelection?this.setProperty("selection",a):e&&(e.range=a)}},selections:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.isMultiSelection?this.selection.selections:[this.selection]},set:function(a){var e=this;this.selection=a[0];this.selection.isMultiSelection&&a.slice(1).forEach(function(n){return e.selection.addRange(n)})}},textString:{group:"text",after:["document"],derived:!0,get:function(){return this.document?
this.document.textString:""},set:function(a){a=null!=a?String(a):"";this.deleteText({start:{column:0,row:0},end:this.document.endPosition});this.insertText(a,{column:0,row:0})}},value:{group:"text",after:["document","embeddedMorphMap"],derived:!0,get:function(){var a=this.textAndAttributes;if(1===a.length){var e=$jscomp.makeIterator(a[0]),n=e.next().value;e=e.next().value;if(!Object.keys(e||{}).length)return n}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=
a}},textAndAttributes:{group:"text",derived:!0,after:["document"],get:function(){return this.document.textAndAttributes},set:function(a){this.replace({start:{row:0,column:0},end:this.documentEndPosition},a)}},defaultTextStyleProps:{group:"_internal",readOnly:!0,derived:!0,get:function(){return this.constructor.defaultTextStyleProps}},defaultTextStyle:{group:"styling",after:["viewState"],derived:!0,get:function(){return fd.obj.select(this,this.defaultTextStyleProps)},set:function(a){Object.assign(this,
a)}},customizedTextStyle:{group:"styling",readOnly:!0,derived:!0,get:function(){for(var a={},e=this.defaultTextStyleProps,n=this.constructor.defaultTextStyle,q=0;q<e.length;q++){var r=e[q],v=this[r];v!==n[r]&&(a[r]=v)}return a}},nativeCursor:{defaultValue:"text",isDefaultTextStyleProp:!0},fontFamily:{group:"text styling",type:"Enum",values:fd.config.text.basicFontItems,defaultValue:"IBM Plex Sans, Sans-Serif",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"],set:function(a){this.setProperty("fontFamily",
fd.sanitizeFont(a))}},fontSize:{group:"text styling",type:"Number",min:1,unit:"pt",defaultValue:12,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},selectionColor:{group:"text styling",type:"Color",defaultValue:fd.Color.rgba(212,230,241,.8),isStyleProp:!0,after:["defaultTextStyle"]},cursorColor:{group:"text styling",type:"Color",isStyleProp:!0,after:["defaultTextStyle"],defaultValue:fd.Color.black},fontColor:{group:"text styling",type:"Color",defaultValue:fd.Color.black,isStyleProp:!0,
isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontWeight:{group:"text styling",type:"Enum",values:["bold","bolder","light","lighter","normal"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontStyle:{group:"text styling",type:"Enum",values:["normal","italic","oblique"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textDecoration:{group:"text styling",type:"Enum",values:["none","underline"],defaultValue:"none",
isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textStyleClasses:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},backgroundColor:{group:"text styling",type:"Color",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textAlign:{group:"text styling",type:"Enum",values:["center","justify","left","right"],isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineHeight:{group:"text styling",
type:"Number",min:1,isFloat:!0,isStyleProp:!0,isDefaultTextStyleProp:!0,defaultValue:1.4,after:["document","defaultTextStyle","viewState"]},letterSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},wordSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineWrapping:{group:"text",type:"Enum",values:[!1,!0,"by-words","anywhere","only-by-words","wider","by-chars"],
isStyleProp:!0,defaultValue:!1,after:["document","viewState"]},anchors:{group:"core",defaultValue:[],set:function(a){var e=this,n=fd.arr.withoutAll(a,this.anchors);fd.arr.withoutAll(this.anchors,a).forEach(function(q){return e.removeAnchor(q)});n.forEach(function(q){return e.addAnchor(q)})}},markers:{group:"core",defaultValue:[]},savedMarks:{group:"core",defaultValue:[],after:["anchors"],set:function(a){var e=this;a=a.map(function(q){return q.isAnchor?q:e.addAnchor(Object.assign({},q,{id:"saved-mark-"+
fd.string.newUUID()}))});var n=this.savedMarks.filter(function(q){return!a.includes(q)});a>fd.config.text.markStackSize&&n.push.apply(n,$jscomp.arrayFromIterable(a.splice(0,a.length-fd.config.text.markStackSize)));n.map(function(q){return e.removeAnchor(q)});return this.setProperty("savedMarks",a)}},activeMarkPosition:{group:"_internal",after:["activeMark"],derived:!0,get:function(){var a=this.activeMark;return a?a.position:null}},activeMark:{group:"core",after:["anchors"],set:function(a){if(a)a=
this.addAnchor(a.isAnchor?a:Object.assign({},a,{id:"saved-mark-"+fd.string.newUUID()}));else{var e=this.activeMark;this.savedMarks.includes(e)||this.removeAnchor(e)}this.setProperty("activeMark",a)}},plugins:{group:"plugins",defaultValue:[],after:["value"],set:function(a){var e=this,n=this.getProperty("plugins");fd.arr.withoutAll(n,a).forEach(function(q){return q&&e.removePlugin(q)});a.forEach(function(q){return q&&e.addPlugin(q)})}},editorModeName:{group:"plugins",derived:!0,after:["plugins"],get:function(){var a=
this.editorPlugin;return a?a.shortName:null},set:function(a){this.changeEditorMode(a)}}}}}],d,{pathInPackage:function(){return"text/morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1319,end:113795})}(fd.Morph));fd.Text=zp;fd.Text=zp;fd.Text=zp;var Ywa=Object.freeze({__proto__:null,Text:zp}),Pg=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js");
Pg.obj=xf;Pg.promise=bg;Pg.string=Ng;Pg.properties=Qm;Pg.Rectangle=ie;Pg.Color=If;Pg.signal=Jk;Pg.vdom=gC;Pg.Morph=xj;Pg.config=Yk;Pg.defaultStyle=gx;Pg.defaultAttributes=hx;Pg.Icon=rm;Pg.Icons=pJ;Pg.splitTextAndAttributesIntoLines=my;Pg.h=Pg.vdom.h;var Ap=Ka("O",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js"),h=d.hasOwnProperty("Label")&&"function"===typeof d.Label?d.Label:d.Label=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ac(h,b,[{key:"onChange",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onChange",this).call(this,a);a.prop&&a.prop.includes("borderWidth")&&this.fit()}},{key:Symbol.for("lively-instance-initialize"),value:function(a){var e=a=void 0===a?{}:a,n=e.fontMetric,q=e.position,r=e.rightCenter,v=e.leftCenter,y=e.topCenter,D=e.bottom,E=e.top,I=e.right,K=e.left,P=e.bottomCenter,N=e.bottomLeft,aa=e.bottomRight,m=e.topRight,t=e.topLeft,u=e.center;e=e.extent;ac._get(Object.getPrototypeOf(h.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,Pg.obj.dissoc(a,["fontMetric"]));n&&(this._fontMetric=n);this._cachedTextBounds=null;this.fit();void 0!==e&&(this.extent=e);void 0!==q&&(this.position=q);void 0!==r&&(this.rightCenter=r);void 0!==v&&(this.leftCenter=v);void 0!==y&&(this.topCenter=y);void 0!==D&&(this.bottom=D);void 0!==E&&(this.top=E);void 0!==I&&(this.right=I);void 0!==K&&(this.left=K);void 0!==P&&(this.bottomCenter=P);void 0!==N&&(this.bottomLeft=N);void 0!==aa&&(this.bottomRight=
aa);void 0!==m&&(this.topRight=m);void 0!==t&&(this.topLeft=t);void 0!==u&&(this.center=u)}},{key:"__additionally_serialize__",value:function(a,e,n,q){ac._get(Object.getPrototypeOf(h.prototype),"__additionally_serialize__",this).call(this,a,e,n,q);this.autofit&&this.fitIfNeeded();a._cachedTextBounds=this._cachedTextBounds&&this._cachedTextBounds.toTuple()}},{key:"__after_deserialize__",value:function(a,e,n){ac._get(Object.getPrototypeOf(h.prototype),"__after_deserialize__",this).call(this,a,e,n);
a._cachedTextBounds&&(this.changeMetaData("deserializeInfo",{recoveredTextBounds:!0}),this._cachedTextBounds=Pg.Rectangle.fromTuple(a._cachedTextBounds))}},{key:"isLabel",get:function(){return!0}},{key:"textStyle",get:function(){return Pg.obj.select(this,"textStyleClasses textDecoration fontStyle fontWeight textShadow fontColor fontSize fontFamily".split(" "))}},{key:"fit",value:function(){this.extent=this.textBounds().extent().addXY(this.borderWidthLeft+this.borderWidthRight,this.borderWidthTop+
this.borderWidthBottom);this.visible?this._needsFit=!1:this._cachedTextBounds=null;return this}},{key:"fitIfNeeded",value:function(){this._needsFit&&this.allFontsLoaded()&&this.fit()}},{key:"textAndAttributesOfLines",get:function(){return Pg.splitTextAndAttributesIntoLines(this.textAndAttributes,"\n")}},{key:"allFontsLoaded",value:function(){var a=this,e=this.env.fontMetric;return[this].concat($jscomp.arrayFromIterable(this.textAndAttributes.map(function(n,q){if(q%2)return{fontFamily:n&&n.fontFamily||
a.fontFamily,fontWeight:n&&n.fontWeight||a.fontWeight}}).filter(Boolean))).every(function(n){return e.isFontSupported(n.fontFamily,n.fontWeight)})}},{key:"whenFontLoaded",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(Pg.promise.waitFor(5E3,function(){return a.allFontsLoaded()}))})}},{key:"textBoundsSingleChunk",value:function(){var a=this._fontMetric||this.env.fontMetric,e=$jscomp.makeIterator(this.textAndAttributes),n=e.next().value;e=
e.next().value;var q=Object.assign({},this.textStyle,{},e);e=this.padding;a.isProportional(q.fontFamily)?(a=a.sizeFor(q,n),n=a.width,a=a.height):(q=a.sizeFor(q,"x"),a=q.height,n=n.length*q.width);return new Pg.Rectangle(0,0,Math.ceil(e.left()+e.right()+n),Math.ceil(e.top()+e.bottom()+a))}},{key:"textBoundsAllChunks",value:function(){for(var a=this._fontMetric||this.env.fontMetric,e=this.padding,n=this.textStyle,q=this.textAndAttributesOfLines,r=!a.isProportional(n.fontFamily),v=a.sizeFor(n,"x").height,
y=0,D=0,E=0;E<q.length;E++){var I=q[E];if(I.length){for(var K=0,P=0,N=0;N<I.length;N+=2){var aa=I[N],m=I[N+1]||{},t=Object.assign({},n,{},m);r&&!m.fontFamily||!a.isProportional(t.fontFamily)?(t=a.sizeFor(t,"x"),m=t.height,P+=aa.length*t.width,K=Math.max(K,m)):(aa=a.sizeFor(t,aa),m=aa.height,P+=aa.width,t.paddingRight&&(P+=Number.parseInt(t.paddingRight)),t.paddingLeft&&(P+=Number.parseInt(t.paddingLeft)),K=Math.max(K,m))}y+=K;D=Math.max(D,P)}else y+=v}return new Pg.Rectangle(0,0,Math.ceil(e.left()+
e.right()+D),Math.ceil(e.top()+e.bottom()+y))}},{key:"invalidateTextLayout",value:function(){this._cachedTextBounds=null;this.autofit&&(this._needsFit=!0);this.makeDirty()}},{key:"textBounds",value:function(){var a=this.textAndAttributes;return this._cachedTextBounds||(this._cachedTextBounds=2>=a.length?this.textBoundsSingleChunk():this.textBoundsAllChunks())}},{key:"forceRerender",value:function(){this._cachedTextBounds=null;this.makeDirty()}},{key:"applyLayoutIfNeeded",value:function(){this.fitIfNeeded();
ac._get(Object.getPrototypeOf(h.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);for(var e=[],n=this.textAndAttributesOfLines.length,q=0;q<n;q++){for(var r=this.textAndAttributesOfLines[q],v=0;v<r.length;v+=2){var y=r[v+1];e.push(this.renderChunk(r[v],y))}q<n-1&&e.push(Pg.h("br"))}y=this.textStyle;var D=y.fontColor,E=y.fontSize;n=y.fontStyle;q=y.fontWeight;r=y.textShadow;
v=y.textDecoration;var I=y.textStyleClasses,K=this.padding;y={fontFamily:y.fontFamily,fontSize:"number"===typeof E?E+"px":E,color:D?String(D):"transparent",cursor:this.nativeCursor};D=Pg.defaultAttributes(this,a);r&&(y.textShadow=r);"normal"!==q&&(y.fontWeight=q);"normal"!==n&&(y.fontStyle=n);"none"!==v&&(y.textDecoration=v);I&&I.length&&(D.className=(D.className||"")+" "+I.join(" "));D.style=Object.assign({},Pg.defaultStyle(this),{},y);return Pg.h("div",D,[Pg.h("div",{style:{pointerEvents:"none",
position:"absolute",paddingLeft:K.left()+"px",paddingRight:K.right()+"px",paddingTop:K.top()+"px",paddingBottom:K.bottom()+"px",width:"calc(100% - "+K.left()+"px - "+K.right()+"px)"}},e),a.renderSubmorphs(this)])}},{key:"renderChunk",value:function(a,e){var n=e=e||{},q=n.backgroundColor,r=n.fontColor,v=n.fontFamily,y=n.fontStyle,D=n.fontWeight,E=n.textShadow,I=n.textDecoration,K=n.textStyleClasses,P=n.textAlign,N=n.float,aa=n.display,m=n.lineHeight,t=n.opacity;n={};var u={style:n};N&&(n.float=N);
aa&&(n.display=aa);q&&(n.backgroundColor=String(q));v&&(n.fontFamily=v);r&&(n.color=String(r));E&&(n.textShadow=E);"normal"!==D&&(n.fontWeight=D);"normal"!==y&&(n.fontStyle=y);"none"!==I&&(n.textDecoration=I);P&&(n.textAlign=P);m&&(n.lineHeight=m);t&&(n.opacity=t);K&&K.length&&(u.className=K.join(" "));q="fontSize width height maxWidth maxHeight top left padding paddingLeft paddingRight paddingBottom paddingTop marginTop marginRight marginLeft marginBottom".split(" ");for(r=0;r<q.length;r++)v=q[r],
e.hasOwnProperty(v)&&(y=e[v],n[v]="number"===typeof y?y+"px":y);return Pg.h("span",u,a)}},{key:"interactivelyChangeLabel",value:function(){var a=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(a.world().prompt("edit label",{input:a.textString,historyId:"lively.morphic-label-edit-hist",selectInput:!0}),2);e=n.yieldResult;"string"===typeof e&&(a.textString=e);n.jumpToEnd()})}},{key:"interactivelySetIcon",value:function(){var a=this,e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return r.yield(a.world().filterableListPrompt("Select Icon",Object.keys(Pg.Icons).map(function(v){return{isListItem:!0,label:[].concat($jscomp.arrayFromIterable(Pg.Icon.textAttribute(v,{paddingRight:"10px"})),[v,{}]),value:v}})),2);e=r.yieldResult;n=$jscomp.makeIterator(e.selected);if(q=n.next().value)a.value=Pg.Icon.textAttribute(q);r.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,e=ac._get(Object.getPrototypeOf(h.prototype),"menuItems",this).call(this);e.unshift({isDivider:!0});
e.unshift(["edit label as rich text",function(){var n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield($world.editPrompt("rich text",{input:a.value,resolveTextAttributes:!0}),2);if(n=q.yieldResult)a.value=n;q.jumpToEnd()})}]);e.unshift(["change label",function(){return a.interactivelyChangeLabel()}]);e.unshift(["set Icon",function(){return a.interactivelySetIcon()}]);return e}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Label"}},
{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fill:{defaultValue:Pg.Color.transparent},draggable:{defaultValue:!1},nativeCursor:{defaultValue:"default"},isIcon:{derived:!0,get:function(){return Pg.properties.values(Pg.Icons).map(function(a){return a.code}).includes(this.textString)}},value:{derived:!0,after:["textAndAttributes","textString"],get:function(){var a=this.textAndAttributes;if(2>=a.length){var e=$jscomp.makeIterator(a),n=e.next().value;e=e.next().value;if(!Object.keys(e||
{}).length)return n||""}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=a}},textString:{derived:!0,after:["textAndAttributes"],get:function(){return this.textAndAttributes.map(function(a,e){return 0==e%2?a:""}).join("")},set:function(a){this.textAndAttributes=[a,null]}},textAndAttributes:{after:["autofit"],get:function(){var a=this.getProperty("textAndAttributes");if(!a||1>a.length)a=["",null];return a},set:function(a){Array.isArray(a)||(a=[String(a),{}]);0===
a.length&&(a=["",{}]);this.setProperty("textAndAttributes",a);this.autofit&&this.invalidateTextLayout();Pg.signal(this,"value",a)}},valueAndAnnotation:{derived:!0,after:["textAndAttributes"],get:function(){var a=this.textAndAttributes,e=null;if(2<a.length){var n=$jscomp.makeIterator(a.slice(-2)),q=n.next().value;(n=n.next().value)&&n.textStyleClasses&&n.textStyleClasses.includes("annotation")&&(a=a.slice(0,-2),e=[q,n])}return{value:a,annotation:e}},set:function(a){var e=a.value;a=a.annotation;e||
(e="");"string"===typeof e&&(e=[e,null]);Array.isArray(e)||(e=[String(e),null]);e=e.slice();if(a){"string"===typeof a&&(a=[a,null]);var n=a[1];n||(n=a[1]={});e.push.apply(e,$jscomp.arrayFromIterable(a));n.textStyleClasses=(n.textStyleClasses||[]).concat("annotation");n.textStyleClasses.includes("annotation")||n.textStyleClasses.push("annotation")}this.textAndAttributes=e}},autofit:{defaultValue:!0,set:function(a){this.setProperty("autofit",a);a&&(this._needsFit=!0)}},padding:{type:"Rectangle",isStyleProp:!0,
defaultValue:Pg.Rectangle.inset(0),after:["autofit"],initialize:function(a){this.padding=a},set:function(a){a||(a=Pg.Rectangle.inset(0));var e=this.padding;this.setProperty("padding","number"===typeof a?Pg.Rectangle.inset(a):a);this.autofit&&!e.equals(a)&&this.invalidateTextLayout()}},fontFamily:{isStyleProp:!0,type:"Enum",values:Pg.config.text.basicFontItems,after:["autofit"],defaultValue:"IBM Plex Sans, Sans-Serif",set:function(a){var e=this.fontFamily;this.setProperty("fontFamily",a);this.autofit&&
e!=a&&this.invalidateTextLayout()}},fontSize:{type:"Number",min:1,isStyleProp:!0,defaultValue:12,after:["autofit"],set:function(a){var e=this.fontSize;this.setProperty("fontSize",a);this.autofit&&a!=e&&this.invalidateTextLayout()}},fontColor:{type:"Color",isStyleProp:!0,defaultValue:Pg.Color.black},fontWeight:{type:"Enum",values:["bold","bolder","light","lighter"],isStyleProp:!0,defaultValue:"normal",after:["autofit"],set:function(a){var e=this.fontWeight;this.setProperty("fontWeight",a);this.autofit&&
e!=a&&this.invalidateTextLayout()}},fontStyle:{type:"Enum",values:["normal","italic","oblique"],isStyleProp:!0,defaultValue:"normal",after:["autofit"],set:function(a){var e=this.fontStyle;this.setProperty("fontStyle",a);this.autofit&&e!=a&&this.invalidateTextLayout()}},textShadow:{type:"String",isStyleProp:!0,defaultValue:""},textDecoration:{defaultValue:"none"},textStyleClasses:{defaultValue:void 0,after:["autofit"],set:function(a){this.setProperty("textStyleClasses",a);this.autofit&&this.invalidateTextLayout()}}}}},
{key:"icon",value:function(a,e){e=void 0===e?{prefix:"",suffix:""}:e;return Pg.Icon.makeLabel(a,e)}}],d,{pathInPackage:function(){return"text/label.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:485,end:18869})}(Pg.Morph));Pg.Label=Ap;Pg.Label=Ap;Pg.Label=Ap;var Zwa=Object.freeze({__proto__:null,Label:Ap}),QU="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,$wa={},Pca=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,axa=$wa=function(b,d){function h(T){var Y=T.match(/\n/g);Y&&(B+=Y.length);Y=T.lastIndexOf("\n");A=~Y?T.length-Y:A+T.length}function a(){var T={line:B,column:A};return function(Y){Y.position=new e(T);y(/^\s*/);return Y}}function e(T){(this||QU).start=T;(this||QU).end={line:B,column:A};(this||QU).source=d.source}function n(T){var Y=Error(d.source+":"+B+":"+A+": "+T);Y.reason=T;Y.filename=d.source;Y.line=B;
Y.column=A;Y.source=b;if(d.silent)H.push(Y);else throw Y;}function q(){return y(/^{\s*/)}function r(){return y(/^}/)}function v(){var T,Y=[];y(/^\s*/);for(D(Y);b.length&&"}"!=b.charAt(0)&&(T=t()||u());)!1!==T&&(Y.push(T),D(Y));return Y}function y(T){if(T=T.exec(b)){var Y=T[0];h(Y);b=b.slice(Y.length);return T}}function D(T){var Y;for(T=T||[];Y=E();)!1!==Y&&T.push(Y);return T}function E(){var T=a();if("/"==b.charAt(0)&&"*"==b.charAt(1)){for(var Y=2;""!=b.charAt(Y)&&("*"!=b.charAt(Y)||"/"!=b.charAt(Y+
1));)++Y;Y+=2;if(""===b.charAt(Y-1))return n("End of comment missing");var wa=b.slice(2,Y-2);A+=2;h(wa);b=b.slice(Y);A+=2;return T({type:"comment",comment:wa})}}function I(){var T=y(/^([^{]+)/);if(T)return ur(T[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(Y){return Y.replace(/,/g,"\u200c")}).split(/\s*(?![^(]*\)),\s*/).map(function(Y){return Y.replace(/\u200C/g,",")})}function K(){var T=a(),Y=y(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);
if(Y){Y=ur(Y[0]);if(!y(/^:\s*/))return n("property missing ':'");var wa=y(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/);T=T({type:"declaration",property:Y.replace(Pca,""),value:wa?ur(wa[0]).replace(Pca,""):""});y(/^[;\s]*/);return T}}function P(){var T=[];if(!q())return n("missing '{'");D(T);for(var Y;Y=K();)!1!==Y&&(T.push(Y),D(T));return r()?T:n("missing '}'")}function N(){for(var T,Y=[],wa=a();T=y(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)Y.push(T[1]),y(/^,\s*/);if(Y.length)return wa({type:"keyframe",
values:Y,declarations:P()})}function aa(){var T=a(),Y=y(/^@([-\w]+)?keyframes\s*/);if(Y){var wa=Y[1];Y=y(/^([-\w]+)\s*/);if(!Y)return n("@keyframes missing name");Y=Y[1];if(!q())return n("@keyframes missing '{'");for(var Ga,na=D();Ga=N();)na.push(Ga),na=na.concat(D());return r()?T({type:"keyframes",name:Y,vendor:wa,keyframes:na}):n("@keyframes missing '}'")}}function m(T){var Y=new RegExp("^@"+T+"\\s*([^;]+);");return function(){var wa=a(),Ga=y(Y);if(Ga){var na={type:T};na[T]=Ga[1].trim();return wa(na)}}}
function t(){if("@"==b[0]){var T;if(!(T=aa())){T=a();var Y=y(/^@media *([^{]+)/);if(Y)if(Y=ur(Y[1]),q()){var wa=D().concat(v());T=r()?T({type:"media",media:Y,rules:wa}):n("@media missing '}'")}else T=n("@media missing '{'");else T=void 0}T||(T=a(),T=(Y=y(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/))?T({type:"custom-media",name:ur(Y[1]),media:ur(Y[2])}):void 0);T||(T=a(),(Y=y(/^@supports *([^{]+)/))?(Y=ur(Y[1]),q()?(wa=D().concat(v()),T=r()?T({type:"supports",supports:Y,rules:wa}):n("@supports missing '}'")):
T=n("@supports missing '{'")):T=void 0);if(!(T=T||F()||L()||U()))if(T=a(),wa=y(/^@([-\w]+)?document *([^{]+)/))if(Y=ur(wa[1]),wa=ur(wa[2]),q()){var Ga=D().concat(v());T=r()?T({type:"document",document:wa,vendor:Y,rules:Ga}):n("@document missing '}'")}else T=n("@document missing '{'");else T=void 0;if(!T)if(T=a(),y(/^@page */))if(Y=I()||[],q()){for(wa=D();Ga=K();)wa.push(Ga),wa=wa.concat(D());T=r()?T({type:"page",selectors:Y,declarations:wa}):n("@page missing '}'")}else T=n("@page missing '{'");else T=
void 0;T||(T=a(),y(/^@host\s*/)?q()?(Y=D().concat(v()),T=r()?T({type:"host",rules:Y}):n("@host missing '}'")):T=n("@host missing '{'"):T=void 0);if(!T)if(T=a(),y(/^@font-face\s*/))if(q()){for(Y=D();wa=K();)Y.push(wa),Y=Y.concat(D());T=r()?T({type:"font-face",declarations:Y}):n("@font-face missing '}'")}else T=n("@font-face missing '{'");else T=void 0;return T}}function u(){var T=a(),Y=I();if(!Y)return n("selector missing");D();return T({type:"rule",selectors:Y,declarations:P()})}d=d||{};var B=1,A=
1;e.prototype.content=b;var H=[],F=m("import"),L=m("charset"),U=m("namespace");return wR(function(){var T=v();return{type:"stylesheet",stylesheet:{source:d.source,rules:T,parsingErrors:H}}}())},Ola="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Qca={};Qca=nI;nI.prototype.emit=function(b){return b};nI.prototype.visit=function(b){return this[b.type](b)};nI.prototype.mapVisit=function(b,d){var h="";d=d||"";for(var a=0,e=b.length;a<e;a++)h+=this.visit(b[a]),d&&a<e-1&&
(h+=this.emit(d));return h};var Rca=Qca,Vs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Sca={},W7=Rca,bxa=Dj;Sca=yk;bxa(yk,W7);yk.prototype.compile=function(b){return this.stylesheet(b)};yk.prototype.stylesheet=function(b){return this.mapVisit(b.stylesheet.rules,"\n\n")};yk.prototype.comment=function(b){return this.emit(this.indent()+"/*"+b.comment+"*/",b.position)};yk.prototype.import=function(b){return this.emit("@import "+b.import+";",b.position)};yk.prototype.media=
function(b){return this.emit("@media "+b.media,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};yk.prototype.document=function(b){return this.emit("@"+(b.vendor||"")+"document "+b.document,b.position)+this.emit("  {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};yk.prototype.charset=function(b){return this.emit("@charset "+b.charset+";",b.position)};yk.prototype.namespace=function(b){return this.emit("@namespace "+
b.namespace+";",b.position)};yk.prototype.supports=function(b){return this.emit("@supports "+b.supports,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};yk.prototype.keyframes=function(b){return this.emit("@"+(b.vendor||"")+"keyframes "+b.name,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.keyframes,"\n")+this.emit(this.indent(-1)+"}")};yk.prototype.keyframe=function(b){var d=b.declarations;return this.emit(this.indent())+this.emit(b.values.join(", "),
b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(d,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")};yk.prototype.page=function(b){var d=b.selectors.length?b.selectors.join(", ")+" ":"";return this.emit("@page "+d,b.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(b.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};yk.prototype["font-face"]=function(b){return this.emit("@font-face ",b.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(b.declarations,
"\n")+this.emit(this.indent(-1))+this.emit("\n}")};yk.prototype.host=function(b){return this.emit("@host",b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};yk.prototype["custom-media"]=function(b){return this.emit("@custom-media "+b.name+" "+b.media+";",b.position)};yk.prototype.rule=function(b){var d=this.indent(),h=b.declarations;return h.length?this.emit(b.selectors.map(function(a){return d+a}).join(",\n"),b.position)+this.emit(" {\n")+
this.emit(this.indent(1))+this.mapVisit(h,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):""};yk.prototype.declaration=function(b){return this.emit(this.indent())+this.emit(b.property+": "+b.value,b.position)+this.emit(";")};yk.prototype.indent=function(b){(this||Vs).level=(this||Vs).level||1;return null!=b?((this||Vs).level+=b,""):Array((this||Vs).level).join((this||Vs).indentation||"  ")};var cxa=Sca,RU={},Tca=ol.Buffer;(function(b){var d=function(h){return"function"===typeof h?
h:"function"===typeof Tca?function(a){return(new Tca(a,"base64")).toString("binary")}:"object"===typeof b.base64js?function(a){a=b.base64js.b64ToByteArray(a);return Array.prototype.map.call(a,function(e){return String.fromCharCode(e)}).join("")}:function(){throw Error("You're probably in an old browser or an iOS webworker. It might help to include beatgammit's base64-js.");}}(b.atob);b.atob=d;RU&&(RU=d)})(window);var dxa=RU,exa=/^xn--/,fxa=/[^\0-\x7E]/,Qla=/[\x2E\u3002\uFF0E\uFF61]/g,Pla={overflow:"Overflow: input needs wider integers to process",
"not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Dq=Math.floor,SU=String.fromCharCode,Uca=function(b,d){return b+22+75*(26>b)-((0!=d)<<5)},Vca=function(b,d,h){var a=0;b=h?Dq(b/700):b>>1;for(b+=Dq(b/d);455<b;a+=36)b=Dq(b/35);return Dq(a+36*b/(b+38))},Wca=function(b){var d=[],h=b.length,a=0,e=128,n=72,q=b.lastIndexOf("-");0>q&&(q=0);for(var r=0;r<q;++r)128<=b.charCodeAt(r)&&ev("not-basic"),d.push(b.charCodeAt(r));for(q=0<q?q+1:0;q<h;){r=a;for(var v=1,y=36;;y+=
36){q>=h&&ev("invalid-input");var D=10>(I=b.charCodeAt(q++))-48?I-22:26>I-65?I-65:26>I-97?I-97:36;(36<=D||D>Dq((2147483647-a)/v))&&ev("overflow");a+=D*v;var E=y<=n?1:y>=n+26?26:y-n;if(D<E)break;D=36-E;v>Dq(2147483647/D)&&ev("overflow");v*=D}v=d.length+1;n=Vca(a-r,v,0==r);Dq(a/v)>2147483647-e&&ev("overflow");e+=Dq(a/v);a%=v;d.splice(a++,0,e)}var I;return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(d))},Xca=function(b){for(var d=[],h=(b=Y7(b)).length,a=128,e=0,n=72,q=$jscomp.makeIterator(b),
r=q.next();!r.done;r=q.next()){var v=r.value;128>v&&d.push(SU(v))}for((v=q=d.length)&&d.push("-");v<h;){var y=2147483647,D=$jscomp.makeIterator(b);for(r=D.next();!r.done;r=D.next())r=r.value,r>=a&&r<y&&(y=r);r=v+1;y-a>Dq((2147483647-e)/r)&&ev("overflow");e+=(y-a)*r;a=y;y=$jscomp.makeIterator(b);for(D=y.next();!D.done;D=y.next())if(D=D.value,D<a&&2147483647<++e&&ev("overflow"),D==a){var E=e;for(D=36;;D+=36){var I=D<=n?1:D>=n+26?26:D-n;if(E<I)break;E-=I;var K=36-I;d.push(SU(Uca(I+E%K,0)));E=Dq(E/K)}d.push(SU(Uca(E,
0)));n=Vca(e,r,v==q);e=0;++v}++e;++a}return d.join("")},gxa={version:"2.1.0",ucs2:{decode:Y7,encode:function(b){return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(b))}},decode:Wca,encode:Xca,toASCII:function(b){return X7(b,function(d){return fxa.test(d)?"xn--"+Xca(d):d})},toUnicode:function(b){return X7(b,function(d){return exa.test(d)?Wca(d.slice(4).toLowerCase()):d})}},SC=function(b){switch(typeof b){case "string":return b;case "boolean":return b?"true":"false";case "number":return isFinite(b)?
b:"";default:return""}},Vv={};Vv.decode=Vv.parse=function(b,d,h,a){h=h||"=";var e={};if("string"!=typeof b||0===b.length)return e;var n=/\+/g;b=b.split(d||"&");d=1E3;a&&"number"==typeof a.maxKeys&&(d=a.maxKeys);a=b.length;0<d&&a>d&&(a=d);for(d=0;d<a;++d){var q,r;var v=b[d].replace(n,"%20");var y=v.indexOf(h);0<=y?(q=v.substr(0,y),r=v.substr(y+1)):(q=v,r="");v=decodeURIComponent(q);y=decodeURIComponent(r);Object.prototype.hasOwnProperty.call(e,v)?Array.isArray(e[v])?e[v].push(y):e[v]=[e[v],y]:e[v]=
y}return e};Vv.encode=Vv.stringify=function(b,d,h,a){return d=d||"&",h=h||"=",null===b&&(b=void 0),"object"==typeof b?Object.keys(b).map(function(e){var n=encodeURIComponent(SC(e))+h;return Array.isArray(b[e])?b[e].map(function(q){return n+encodeURIComponent(SC(q))}).join(d):n+encodeURIComponent(SC(b[e]))}).join(d):a?encodeURIComponent(SC(a))+h+encodeURIComponent(SC(b)):""};var Sr={},gq={isString:function(b){return"string"==typeof b},isObject:function(b){return"object"==typeof b&&null!==b},isNull:function(b){return null===
b},isNullOrUndefined:function(b){return null==b}};Sr.parse=xB;Sr.resolve=function(b,d){return xB(b,!1,!0).resolve(d)};Sr.resolveObject=function(b,d){return b?xB(b,!1,!0).resolveObject(d):d};Sr.format=function(b){gq.isString(b)&&(b=xB(b));return b instanceof fo?b.format():fo.prototype.format.call(b)};Sr.Url=fo;var hxa=/^([a-z0-9.+-]+:)/i,ixa=/:[0-9]*$/,jxa=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,kxa="{}|\\^`".split("").concat('<>"` \r\n\t'.split("")),TU=["'"].concat(kxa),Yca=["%","/","?",";","#"].concat(TU),
Zca=["/","?","#"],$ca=/^[+a-z0-9A-Z_-]{0,63}$/,lxa=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,mxa={javascript:!0,"javascript:":!0},UU={javascript:!0,"javascript:":!0},cz={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};fo.prototype.parse=function(b,d,h){if(!gq.isString(b))throw new TypeError("Parameter 'url' must be a string, not "+typeof b);var a=b.indexOf("?");a=-1!==a&&a<b.indexOf("#")?"?":"#";b=b.split(a);b[0]=b[0].replace(/\\/g,"/");a=b=b.join(a);if(a=
a.trim(),!h&&1===b.split("#").length)if(b=jxa.exec(a))return this.path=a,this.href=a,this.pathname=b[1],b[2]?(this.search=b[2],this.query=d?Vv.parse(this.search.substr(1)):this.search.substr(1)):d&&(this.search="",this.query={}),this;if(b=hxa.exec(a)){var e=(b=b[0]).toLowerCase();this.protocol=e;a=a.substr(b.length)}if(h||b||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var n="//"===a.substr(0,2);!n||b&&UU[b]||(a=a.substr(2),this.slashes=!0)}if(!UU[b]&&(n||b&&!cz[b])){var q,r;n=-1;for(h=0;h<Zca.length;h++)-1!==
(v=a.indexOf(Zca[h]))&&(-1===n||v<n)&&(n=v);-1!==(r=-1===n?a.lastIndexOf("@"):a.lastIndexOf("@",n))&&(q=a.slice(0,r),a=a.slice(r+1),this.auth=decodeURIComponent(q));n=-1;for(h=0;h<Yca.length;h++){var v;-1!==(v=a.indexOf(Yca[h]))&&(-1===n||v<n)&&(n=v)}-1===n&&(n=a.length);this.host=a.slice(0,n);a=a.slice(n);this.parseHost();this.hostname=this.hostname||"";q="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!q)for(n=this.hostname.split(/\./),r=(h=0,n.length);h<r;h++)if((v=n[h])&&
!v.match($ca)){b="";for(var y=0,D=v.length;y<D;y++)127<v.charCodeAt(y)?b+="x":b+=v[y];if(!b.match($ca)){r=n.slice(0,h);h=n.slice(h+1);(v=v.match(lxa))&&(r.push(v[1]),h.unshift(v[2]));h.length&&(a="/"+h.join(".")+a);this.hostname=r.join(".");break}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase();q||(this.hostname=gxa.toASCII(this.hostname));h=this.port?":"+this.port:"";this.host=(this.hostname||"")+h;this.href+=this.host;q&&(this.hostname=this.hostname.substr(1,
this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!mxa[e])for(h=0,r=TU.length;h<r;h++)q=TU[h],-1!==a.indexOf(q)&&(v=encodeURIComponent(q),v===q&&(v=escape(q)),a=a.split(q).join(v));h=a.indexOf("#");-1!==h&&(this.hash=a.substr(h),a=a.slice(0,h));h=a.indexOf("?");if(-1!==h?(this.search=a.substr(h),this.query=a.substr(h+1),d&&(this.query=Vv.parse(this.query)),a=a.slice(0,h)):d&&(this.search="",this.query={}),a&&(this.pathname=a),cz[e]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||
this.search)h=this.pathname||"",this.path=h+(this.search||"");return this.href=this.format(),this};fo.prototype.format=function(){var b=this.auth||"";b&&(b=(b=encodeURIComponent(b)).replace(/%3A/i,":"),b+="@");var d=this.protocol||"",h=this.pathname||"",a=this.hash||"",e=!1,n="";this.host?e=b+this.host:this.hostname&&(e=b+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port));this.query&&gq.isObject(this.query)&&Object.keys(this.query).length&&(n=Vv.stringify(this.query));
b=this.search||n&&"?"+n||"";return d&&":"!==d.substr(-1)&&(d+=":"),this.slashes||(!d||cz[d])&&!1!==e?(e="//"+(e||""),h&&"/"!==h.charAt(0)&&(h="/"+h)):e||(e=""),a&&"#"!==a.charAt(0)&&(a="#"+a),b&&"?"!==b.charAt(0)&&(b="?"+b),d+e+(h=h.replace(/[?#]/g,function(q){return encodeURIComponent(q)}))+(b=b.replace("#","%23"))+a};fo.prototype.resolve=function(b){return this.resolveObject(xB(b,!1,!0)).format()};fo.prototype.resolveObject=function(b){if(gq.isString(b)){var d=new fo;d.parse(b,!1,!0);b=d}d=new fo;
for(var h=Object.keys(this),a=0;a<h.length;a++){var e=h[a];d[e]=this[e]}if(d.hash=b.hash,""===b.href)return d.href=d.format(),d;if(b.slashes&&!b.protocol){var n=Object.keys(b);for(h=0;h<n.length;h++)a=n[h],"protocol"!==a&&(d[a]=b[a]);return cz[d.protocol]&&d.hostname&&!d.pathname&&(d.path=d.pathname="/"),d.href=d.format(),d}if(b.protocol&&b.protocol!==d.protocol){if(!cz[b.protocol]){n=Object.keys(b);for(h=0;h<n.length;h++)a=n[h],d[a]=b[a];return d.href=d.format(),d}if(d.protocol=b.protocol,b.host||
UU[b.protocol])d.pathname=b.pathname;else{for(var q=(b.pathname||"").split("/");q.length&&!(b.host=q.shift()););b.host||(b.host="");b.hostname||(b.hostname="");""!==q[0]&&q.unshift("");2>q.length&&q.unshift("");d.pathname=q.join("/")}if(d.search=b.search,d.query=b.query,d.host=b.host||"",d.auth=b.auth,d.hostname=b.hostname||b.host,d.port=b.port,d.pathname||d.search)d.path=(d.pathname||"")+(d.search||"");return d.slashes=d.slashes||b.slashes,d.href=d.format(),d}h=d.pathname&&"/"===d.pathname.charAt(0);
var r=b.host||b.pathname&&"/"===b.pathname.charAt(0),v=h=r||h||d.host&&b.pathname;a=d.pathname&&d.pathname.split("/")||[];e=(q=b.pathname&&b.pathname.split("/")||[],d.protocol&&!cz[d.protocol]);if(e&&(d.hostname="",d.port=null,d.host&&(""===a[0]?a[0]=d.host:a.unshift(d.host)),d.host="",b.protocol&&(b.hostname=null,b.port=null,b.host&&(""===q[0]?q[0]=b.host:q.unshift(b.host)),b.host=null),h=h&&(""===q[0]||""===a[0])),r)d.host=b.host||""===b.host?b.host:d.host,d.hostname=b.hostname||""===b.hostname?
b.hostname:d.hostname,d.search=b.search,d.query=b.query,a=q;else if(q.length)a||(a=[]),a.pop(),a=a.concat(q),d.search=b.search,d.query=b.query;else if(!gq.isNullOrUndefined(b.search))return e&&(d.hostname=d.host=a.shift(),(n=!!(d.host&&0<d.host.indexOf("@"))&&d.host.split("@"))&&(d.auth=n.shift(),d.host=d.hostname=n.shift())),d.search=b.search,d.query=b.query,gq.isNull(d.pathname)&&gq.isNull(d.search)||(d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"")),d.href=d.format(),d;if(!a.length)return d.pathname=
null,d.search?d.path="/"+d.search:d.path=null,d.href=d.format(),d;r=a.slice(-1)[0];q=(d.host||b.host||1<a.length)&&("."===r||".."===r)||""===r;for(var y=0,D=a.length;0<=D;D--)"."===(r=a[D])?a.splice(D,1):".."===r?(a.splice(D,1),y++):y&&(a.splice(D,1),y--);if(!h&&!v)for(;y--;y)a.unshift("..");!h||""===a[0]||a[0]&&"/"===a[0].charAt(0)||a.unshift("");q&&"/"!==a.join("/").substr(-1)&&a.push("");v=""===a[0]||a[0]&&"/"===a[0].charAt(0);e&&(d.hostname=d.host=v?"":a.length?a.shift():"",(n=!!(d.host&&0<d.host.indexOf("@"))&&
d.host.split("@"))&&(d.auth=n.shift(),d.host=d.hostname=n.shift()));return(h||d.host&&a.length)&&!v&&a.unshift(""),a.length?d.pathname=a.join("/"):(d.pathname=null,d.path=null),gq.isNull(d.pathname)&&gq.isNull(d.search)||(d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"")),d.auth=b.auth||d.auth,d.slashes=d.slashes||b.slashes,d.href=d.format(),d};fo.prototype.parseHost=function(){var b=this.host,d=ixa.exec(b);d&&(":"!==(d=d[0])&&(this.port=d.substr(1)),b=b.substr(0,b.length-d.length));b&&(this.hostname=
b)};var ada={},bda=!1,Fk=Ka("aD",function(){function b(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e));}function d(e,n){for(var q="",r=0,v=-1,y=0,D,E=0;E<=e.length;++E){if(E<e.length)D=e.charCodeAt(E);else if(47===D)break;else D=47;if(47===D){if(v!==E-1&&1!==y)if(v!==E-1&&2===y){if(2>q.length||2!==r||46!==q.charCodeAt(q.length-1)||46!==q.charCodeAt(q.length-2))if(2<q.length){if(v=q.lastIndexOf("/"),v!==q.length-1){-1===v?(q="",r=0):(q=q.slice(0,
v),r=q.length-1-q.lastIndexOf("/"));v=E;y=0;continue}}else if(2===q.length||1===q.length){q="";r=0;v=E;y=0;continue}n&&(q=0<q.length?q+"/..":"..",r=2)}else q=0<q.length?q+("/"+e.slice(v+1,E)):e.slice(v+1,E),r=E-v-1;v=E;y=0}else 46===D&&-1!==y?++y:y=-1}return q}if(bda)return ada;bda=!0;var h=Jg,a={resolve:function(){for(var e="",n=!1,q,r=arguments.length-1;-1<=r&&!n;r--){if(0<=r)var v=arguments[r];else void 0===q&&(q=h.cwd()),v=q;b(v);0!==v.length&&(e=v+"/"+e,n=47===v.charCodeAt(0))}e=d(e,!n);return n?
0<e.length?"/"+e:"/":0<e.length?e:"."},normalize:function(e){b(e);if(0===e.length)return".";var n=47===e.charCodeAt(0),q=47===e.charCodeAt(e.length-1);e=d(e,!n);0!==e.length||n||(e=".");0<e.length&&q&&(e+="/");return n?"/"+e:e},isAbsolute:function(e){b(e);return 0<e.length&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var q=arguments[n];b(q);0<q.length&&(e=void 0===e?q:e+("/"+q))}return void 0===e?".":a.normalize(e)},relative:function(e,
n){b(e);b(n);if(e===n)return"";e=a.resolve(e);n=a.resolve(n);if(e===n)return"";for(var q=1;q<e.length&&47===e.charCodeAt(q);++q);for(var r=e.length,v=r-q,y=1;y<n.length&&47===n.charCodeAt(y);++y);for(var D=n.length-y,E=v<D?v:D,I=-1,K=0;K<=E;++K){if(K===E){if(D>E){if(47===n.charCodeAt(y+K))return n.slice(y+K+1);if(0===K)return n.slice(y+K)}else v>E&&(47===e.charCodeAt(q+K)?I=K:0===K&&(I=0));break}var P=e.charCodeAt(q+K),N=n.charCodeAt(y+K);if(P!==N)break;else 47===P&&(I=K)}v="";for(K=q+I+1;K<=r;++K)if(K===
r||47===e.charCodeAt(K))v=0===v.length?v+"..":v+"/..";if(0<v.length)return v+n.slice(y+I);y+=I;47===n.charCodeAt(y)&&++y;return n.slice(y)},_makeLong:function(e){return e},dirname:function(e){b(e);if(0===e.length)return".";for(var n=e.charCodeAt(0),q=47===n,r=-1,v=!0,y=e.length-1;1<=y;--y)if(n=e.charCodeAt(y),47===n){if(!v){r=y;break}}else v=!1;return-1===r?q?"/":".":q&&1===r?"//":e.slice(0,r)},basename:function(e,n){if(void 0!==n&&"string"!==typeof n)throw new TypeError('"ext" argument must be a string');
b(e);var q=0,r=-1,v=!0,y;if(void 0!==n&&0<n.length&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var D=n.length-1,E=-1;for(y=e.length-1;0<=y;--y){var I=e.charCodeAt(y);if(47===I){if(!v){q=y+1;break}}else-1===E&&(v=!1,E=y+1),0<=D&&(I===n.charCodeAt(D)?-1===--D&&(r=y):(D=-1,r=E))}q===r?r=E:-1===r&&(r=e.length);return e.slice(q,r)}for(y=e.length-1;0<=y;--y)if(47===e.charCodeAt(y)){if(!v){q=y+1;break}}else-1===r&&(v=!1,r=y+1);return-1===r?"":e.slice(q,r)},extname:function(e){b(e);for(var n=
-1,q=0,r=-1,v=!0,y=0,D=e.length-1;0<=D;--D){var E=e.charCodeAt(D);if(47===E){if(!v){q=D+1;break}}else-1===r&&(v=!1,r=D+1),46===E?-1===n?n=D:1!==y&&(y=1):-1!==n&&(y=-1)}return-1===n||-1===r||0===y||1===y&&n===r-1&&n===q+1?"":e.slice(n,r)},format:function(e){if(null===e||"object"!==typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);var n=e.dir||e.root,q=e.base||(e.name||"")+(e.ext||"");e=n?n===e.root?n+q:n+"/"+q:q;return e},parse:function(e){b(e);
var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var q=e.charCodeAt(0),r=47===q;if(r){n.root="/";var v=1}else v=0;for(var y=-1,D=0,E=-1,I=!0,K=e.length-1,P=0;K>=v;--K)if(q=e.charCodeAt(K),47===q){if(!I){D=K+1;break}}else-1===E&&(I=!1,E=K+1),46===q?-1===y?y=K:1!==P&&(P=1):-1!==y&&(P=-1);-1===y||-1===E||0===P||1===P&&y===E-1&&y===D+1?-1!==E&&(n.base=0===D&&r?n.name=e.slice(1,E):n.name=e.slice(D,E)):(0===D&&r?(n.name=e.slice(1,y),n.base=e.slice(1,E)):(n.name=e.slice(D,y),n.base=
e.slice(D,E)),n.ext=e.slice(y,E));0<D?n.dir=e.slice(0,D-1):r&&(n.dir="/");return n},sep:"/",delimiter:":",win32:null,posix:null};return ada=a.posix=a}()),nxa="undefined"!==typeof Deno?"windows"===Deno.build.os?"win32":Deno.build.os:void 0;Sr.URL="undefined"!==typeof URL?URL:null;Sr.pathToFileURL=function(b){var d=Fk.resolve(b);b=b.charCodeAt(b.length-1);(47===b||VU&&92===b)&&d[d.length-1]!==Fk.sep&&(d+="/");b=new URL("file://");d.includes("%")&&(d=d.replace(oxa,"%25"));!VU&&d.includes("\\")&&(d=d.replace(pxa,
"%5C"));d.includes("\n")&&(d=d.replace(qxa,"%0A"));d.includes("\r")&&(d=d.replace(rxa,"%0D"));d.includes("\t")&&(d=d.replace(sxa,"%09"));b.pathname=d;return b};Sr.fileURLToPath=function(b){if("string"===typeof b)b=new URL(b);else if(!(b instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if("file:"!==b.protocol)throw new Deno.errors.InvalidData("invalid url scheme");if(VU){var d=b.hostname;b=b.pathname;for(var h=0;h<b.length;h++)if("%"===b[h]){var a=
b.codePointAt(h+2)||32;if("2"===b[h+1]&&102===a||"5"===b[h+1]&&99===a)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters");}b=b.replace(txa,"\\");b=decodeURIComponent(b);if(""!==d)b="\\\\"+d+b;else{d=b.codePointAt(1)|32;h=b[2];if(97>d||122<d||":"!==h)throw new Deno.errors.InvalidData("file url path must be absolute");b=b.slice(1)}}else{if(""!==b.hostname)throw new Deno.errors.InvalidData("invalid file url hostname");b=b.pathname;for(d=0;d<b.length;d++)if("%"===b[d]&&(h=
b.codePointAt(d+2)||32,"2"===b[d+1]&&102===h))throw new Deno.errors.InvalidData("must not include encoded / characters");b=decodeURIComponent(b)}return b};var VU="win32"===nxa,txa=/\//g,oxa=/%/g,pxa=/\\/g,qxa=/\n/g,rxa=/\r/g,sxa=/\t/g;Ka("aE",Fk._makeLong);Ka("aF",Fk.basename);Ka("aG",Fk.delimiter);Ka("aH",Fk.dirname);Ka("aI",Fk.extname);Ka("aJ",Fk.format);Ka("aK",Fk.isAbsolute);Ka("aL",Fk.join);Ka("aM",Fk.normalize);Ka("aN",Fk.parse);Ka("aO",Fk.posix);Ka("aP",Fk.relative);Ka("aQ",Fk.resolve);Ka("aR",
Fk.sep);Ka("aS",Fk.win32);var cda={},dda=/%[a-f0-9]{2}/gi,eda=/(%[a-f0-9]{2})+/gi;cda=function(b){if("string"!==typeof b)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof b+"`");try{return b=b.replace(/\+/g," "),decodeURIComponent(b)}catch(q){for(var d={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},h=eda.exec(b);h;){try{d[h[0]]=decodeURIComponent(h[0])}catch(r){var a=h[0];try{var e=decodeURIComponent(a)}catch(v){e=a.match(dda);for(var n=1;n<e.length;n++)a=xR(e,n).join(""),
e=a.match(dda);e=a}e!==h[0]&&(d[h[0]]=e)}h=eda.exec(b)}d["%C2"]="\ufffd";h=Object.keys(d);for(a=0;a<h.length;a++)e=h[a],b=b.replace(new RegExp(e,"g"),d[e]);return b}};var uxa={},Ula=sk,d8=dxa,Rla=Sr,Sla=Fk,Tla=cda,fda=/[#@] sourceMappingURL=([^\s'"]*)/,Vla=RegExp("(?:/\\*(?:\\s*\r?\n(?://)?)?(?:"+fda.source+")\\s*\\*/|//(?:"+fda.source+"))\\s*"),Wla=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,Xla=/^(?:application|text)\/json$/,Yla="utf-8",Zla=/\/?$/,vxa=uxa={resolveSourceMap:a8,resolveSourceMapSync:c8,
resolveSources:e8,resolveSourcesSync:g8,resolve:function(b,d,h,a,e){function n(r){e8(r.map,r.sourcesRelativeTo,h,a,function(v,y){if(v)return e(v);r.sourcesResolved=y.sourcesResolved;r.sourcesContent=y.sourcesContent;e(null,r)})}"function"===typeof a&&(e=a,a={});if(null===b){var q={sourceMappingURL:null,url:d,sourcesRelativeTo:d,map:null};b=yB(d);h(b,function(r,v){if(r)return r.sourceMapData=q,e(r);q.map=String(v);try{q.map=ny(q.map,q)}catch(y){return e(y)}n(q)})}else a8(b,d,h,function(r,v){if(r)return e(r);
if(!v)return e(null,null);n(v)})},resolveSync:function(b,d,h,a){if(null===b)b={sourceMappingURL:null,url:d,sourcesRelativeTo:d,map:null},b.map=$7(h,d,b),b.map=ny(b.map,b);else if(b=c8(b,d,h),!b)return null;d=g8(b.map,b.sourcesRelativeTo,h,a);b.sourcesResolved=d.sourcesResolved;b.sourcesContent=d.sourcesContent;return b},parseMapToJSON:ny};Object.freeze({__proto__:null,"default":{access:Ag,copyFile:Ag,open:Ag,opendir:Ag,rename:Ag,truncate:Ag,rmdir:Ag,mkdir:Ag,readdir:Ag,readlink:Ag,symlink:Ag,lstat:Ag,
stat:Ag,link:Ag,unlink:Ag,chmod:Ag,lchmod:Ag,lchown:Ag,chown:Ag,utimes:Ag,realpath:Ag,mkdtemp:Ag,writeFile:Ag,appendFile:Ag,readFile:Ag},access:Ag,copyFile:Ag,open:Ag,opendir:Ag,rename:Ag,truncate:Ag,rmdir:Ag,mkdir:Ag,readdir:Ag,readlink:Ag,symlink:Ag,lstat:Ag,stat:Ag,link:Ag,unlink:Ag,chmod:Ag,lchmod:Ag,lchown:Ag,chown:Ag,utimes:Ag,realpath:Ag,mkdtemp:Ag,writeFile:Ag,appendFile:Ag,readFile:Ag});var wxa=function(){throw Error("Node.js fs module is not supported by JSPM core in the browser");},zR=
"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,gda={},h8=Rca,xxa=Dj;gda=rl;xxa(rl,h8);rl.prototype.compile=function(b){return b.stylesheet.rules.map((this||zR).visit,this||zR).join("")};rl.prototype.comment=function(b){return this.emit("",b.position)};rl.prototype.import=function(b){return this.emit("@import "+b.import+";",b.position)};rl.prototype.media=function(b){return this.emit("@media "+b.media,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};
rl.prototype.document=function(b){return this.emit("@"+(b.vendor||"")+"document "+b.document,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};rl.prototype.charset=function(b){return this.emit("@charset "+b.charset+";",b.position)};rl.prototype.namespace=function(b){return this.emit("@namespace "+b.namespace+";",b.position)};rl.prototype.supports=function(b){return this.emit("@supports "+b.supports,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};rl.prototype.keyframes=
function(b){return this.emit("@"+(b.vendor||"")+"keyframes "+b.name,b.position)+this.emit("{")+this.mapVisit(b.keyframes)+this.emit("}")};rl.prototype.keyframe=function(b){var d=b.declarations;return this.emit(b.values.join(","),b.position)+this.emit("{")+this.mapVisit(d)+this.emit("}")};rl.prototype.page=function(b){var d=b.selectors.length?b.selectors.join(", "):"";return this.emit("@page "+d,b.position)+this.emit("{")+this.mapVisit(b.declarations)+this.emit("}")};rl.prototype["font-face"]=function(b){return this.emit("@font-face",
b.position)+this.emit("{")+this.mapVisit(b.declarations)+this.emit("}")};rl.prototype.host=function(b){return this.emit("@host",b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};rl.prototype["custom-media"]=function(b){return this.emit("@custom-media "+b.name+" "+b.media+";",b.position)};rl.prototype.rule=function(b){var d=b.declarations;return d.length?this.emit(b.selectors.join(","),b.position)+this.emit("{")+this.mapVisit(d)+this.emit("}"):""};rl.prototype.declaration=function(b){return this.emit(b.property+
":"+b.value,b.position)+this.emit(";")};var yxa=gda,wm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Tr={};Tr=function(b){b._comment=b.comment;b.map=new bc;b.position={line:1,column:1};b.files={};for(var d in Tr)b[d]=Tr[d]};var hda=function(b){return"\\"===Fk.sep?b.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):b};Tr.updatePosition=function(b){var d=b.match(/\n/g);d&&((this||wm).position.line+=d.length);d=b.lastIndexOf("\n");(this||wm).position.column=~d?b.length-
d:(this||wm).position.column+b.length};Tr.emit=function(b,d){if(d){var h=hda(d.source||"source.css");(this||wm).map.addMapping({source:h,generated:{line:(this||wm).position.line,column:Math.max((this||wm).position.column-1,0)},original:{line:d.start.line,column:d.start.column-1}});this.addFile(h,d)}this.updatePosition(b);return b};Tr.addFile=function(b,d){"string"!==typeof d.content||Object.prototype.hasOwnProperty.call((this||wm).files,b)||((this||wm).files[b]=d.content)};Tr.applySourceMaps=function(){Object.keys((this||
wm).files).forEach(function(b){var d=(this||wm).files[b];(this||wm).map.setSourceContent(b,d);if(!1!==(this||wm).options.inputSourcemaps&&(d=vxa.resolveSync(d,b,wxa))){var h=new le(d.map);(this||wm).map.applySourceMap(h,b,hda(Fk.dirname(d.sourcesRelativeTo)))}},this||wm)};Tr.comment=function(b){return/^# sourceMappingURL=/.test(b.comment)?this.emit("",b.position):this._comment(b)};var zxa=Tr,Axa={},Bxa=Axa=function(b,d){d=d||{};var h=d.compress?new yxa(d):new cxa(d);return d.sourcemap?(zxa(h),b=h.compile(b),
h.applySourceMaps(),d="generator"===d.sourcemap?h.map:h.map.toJSON(),{code:b,map:d}):b=h.compile(b)},WU={};WU.parse=axa;WU.stringify=Bxa;var Wh=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js");Wh.obj=xf;Wh.promise=bg;Wh.string=Ng;Wh.pt=xh;Wh.Morph=xj;Wh.vdom=gC;Wh.addOrChangeCSSDeclaration=Kp;Wh.css=WU;var ZK=Wh.vdom;Wh.diff=ZK.diff;Wh.patch=ZK.patch;Wh.h=ZK.h;Wh.createElement=ZK.create;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),h=d.hasOwnProperty("CustomVNode")&&
"function"===typeof d.CustomVNode?d.CustomVNode:d.CustomVNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,e){this.morph=a;this.renderer=e;this.morphVtree=null;this.key="custom-"+a.id}},{key:"type",get:function(){return"Widget"}},{key:"renderMorph",value:function(){var a=this.morph,e=this.morphVtree=this.renderer.renderMorph(a),n="customNode-key-"+
a.id;e.children[0]&&e.children[0].key===n||e.children.unshift(Wh.h(a.domNodeTagName||"div",{key:n},[]));a._updateCSSDeclaration&&(a.ensureCSSDeclaration(),a._updateCSSDeclaration=!1);return e}},{key:"init",value:function(){var a=Wh.createElement(this.renderMorph(),this.renderer.domEnvironment);a.childNodes[0].appendChild(this.morph.domNode);this.morph.cssDeclaration&&this.morph.ensureCSSDeclaration();return a}},{key:"update",value:function(a,e){a=a.morphVtree||this.renderMorph();var n=this.renderMorph();
a=Wh.diff(a,n);Wh.patch(e,a);return null}},{key:"destroy",value:function(a){(a=this.renderer.domEnvironment.document.getElementById("css-for-"+this.morph.id))&&a.remove();console.log("[HTMLMorph] node of "+this.morph.name+" gets removed from DOM")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CustomVNode"}}],d,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:426,end:2427})})(void 0);var xt=Ka("V",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),h=d.hasOwnProperty("HTMLMorph")&&"function"===typeof d.HTMLMorph?d.HTMLMorph:d.HTMLMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"isHTMLMorph",get:function(){return!0}},{key:"ensureCSSDeclaration",
value:function(){var a=this;try{var e=Wh.css.parse(this.cssDeclaration);this.whenRendered().then(function(){e.stylesheet.rules.forEach(function(n){n.selectors&&(n.selectors=n.selectors.map(function(q){return"#"+a.id+" "+q}))});Wh.addOrChangeCSSDeclaration("css-for-"+a.id,Wh.css.stringify(e))})}catch(n){console.error("Error setting cssDeclaration of "+this+": "+n)}}},{key:"defaultHTML",get:function(){return'\n<div style="display: flex;\n            align-items: center;\n            justify-content: center;\n            height: 100%;\n            background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n  <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;HTML&#x2F;&gt;</p>\n</div>'}},
{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return new Wh.CustomVNode(this,a)}},{key:"menuItems",value:function(){var a=this,e=ac._get(Object.getPrototypeOf(h.prototype),"menuItems",this).call(this);e.unshift(["edit CSS...",function(){return a.world().execCommand("open workspace",{language:"css",content:a.cssDeclaration,target:a})}],["edit html...",function(){return a.world().execCommand("open workspace",{language:"html",
content:a.html,target:a})}],{isDivider:!0});return e}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HTMLMorph"}},{key:"properties",get:function(){return{extent:{defaultValue:Wh.pt(420,330)},html:{after:["cssDeclaration"],isStyleProp:!0,initialize:function(){this.html=this.defaultHTML},get:function(){return this.domNode.innerHTML},set:function(a){this.domNode.innerHTML=a;var e=[this].concat($jscomp.arrayFromIterable(this.ownerChain())).find(function(y){return y.master});if(e)e.master.onMorphChange(this,
{prop:"html",value:a});if(a.includes("<script"))for(a=this.domNode.querySelectorAll("script"),a=$jscomp.makeIterator(a),e=a.next();!e.done;e=a.next()){var n=e.value;e=n.parentNode;n.remove();for(var q=document.createElement("script"),r=$jscomp.makeIterator(n.attributes),v=r.next();!v.done;v=r.next())v=v.value,q.setAttribute(v.name,v.value);n=$jscomp.makeIterator(n.childNodes);for(r=n.next();!r.done;r=n.next())q.appendChild(r.value);e.appendChild(q)}}},domNodeTagName:{readOnly:!0,get:function(){return"div"}},
domNodeStyle:{readOnly:!0,get:function(){return"position: absolute; width: 100%; height: 100%;"}},domNode:{derived:!0,get:function(){this._domNode||(this._domNode=this.document.createElement(this.domNodeTagName),this._domNode.setAttribute("style",this.domNodeStyle));return this._domNode},set:function(a){this.domNode.parentNode&&this.domNode.parentNode.replaceChild(a,this.domNode);return this._domNode=a}},document:{readOnly:!0,get:function(){return this.env.domEnv.document}},scrollExtent:{readOnly:!0,
get:function(){return Wh.pt(this.domNode.scrollWidth,this.domNode.scrollHeight)}},cssDeclaration:{isStyleProp:!0,set:function(a){this.setProperty("cssDeclaration",a);a?(this.makeDirty(),this._updateCSSDeclaration=!0):(a=this.env.domEnv.document.getElementById("css-for-"+this.id))&&a.remove()}}}}}],d,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:2752,end:7157})}(Wh.Morph));Wh.HTMLMorph=xt;Wh.HTMLMorph=xt;Wh.HTMLMorph=xt;var TC=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),h=d.hasOwnProperty("IFrameMorph")&&"function"===typeof d.IFrameMorph?d.IFrameMorph:d.IFrameMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"isIFrameMorph",get:function(){return!0}},{key:"reload",value:function(){return this.src?
this.loadURL(this.src):this.srcDoc?this.displayHTML(this.srcDoc):null}},{key:"whenLoaded",value:function(){return this._whenLoaded||Promise.resolve()}},{key:"displayHTML",value:function(a,e){e=void 0===e?{}:e;var n=this,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){q=e;if(r=void 0===q.keepScroll?!0:q.keepScroll)v=n.iframeScroll;n.srcDoc=a;return y.yield(n.whenLoaded(),2)}r&&v&&(n.iframeScroll=v);return y.return(n)})}},{key:"loadURL",value:function(a,e){e=
void 0===e?{}:e;var n=this,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){q=e;if(r=void 0===q.keepScroll?!0:q.keepScroll)v=n.iframeScroll;n.src=a;return y.yield(n.whenLoaded(),2)}r&&v&&(n.iframeScroll=v);return y.return(n)})}},{key:"defaultSrcDoc",get:function(){return'\n    <div style="display: flex;\n                align-items: center;\n                justify-content: center;\n                height: 100%;\n                background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n      <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;iFrame&#x2F;&gt;</p>\n    </div>'}},
{key:"defaultHTML",get:function(){return'<iframe width="100%" height="100%" frameBorder="false" srcdoc=""></iframe>'}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"example",value:function(){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return a=(new Wh.IFrameMorph).openInWindow({title:"iframe"}).targetMorph,a.srcDoc="",a.src="http://localhost:9011/worlds/html%20export",e.yield(a.loadURL("https://google.com"),2);a.iframe.src;
a.iframe.srcDoc;a.src="";a.srcDoc="fooo";return e.yield(a.reload(),0)})}},{key:"properties",get:function(){return{html:{initialize:function(){this.html=this.defaultHTML;this.srcDoc=this.defaultSrcDoc}},iframe:{derived:!0,readOnly:!0,after:["domNode"],get:function(){return this.domNode.querySelector("iframe")}},src:{derived:!0,after:["iframe"],get:function(){return this.iframe.src},set:function(a){this.iframe.removeAttribute("srcDoc");this.iframe.src=a;var e=Wh.promise.deferred().resolve;this._whenLoaded=
Wh.promise;this.iframe.onload=function(n){return e(n)}}},srcDoc:{derived:!0,after:["iframe"],get:function(){return this.iframe.srcdoc},set:function(a){this.iframe.removeAttribute("src");this.iframe.srcdoc=a;this._whenLoaded=this.whenRendered().then(function(){return Wh.promise.delay(20)})}},iframeScroll:{derived:!0,after:["iframe"],get:function(){try{var a=this.iframe.contentWindow;return Wh.pt(a.scrollX,a.scrollY)}catch(e){return Wh.pt(0,0)}},set:function(a){try{this.iframe.contentWindow.scrollTo(a.x,
a.y)}catch(e){}}}}}}],d,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7167,end:10464})}(Wh.HTMLMorph);Wh.IFrameMorph=TC;Wh.IFrameMorph=TC;Wh.IFrameMorph=TC;var Cxa=Object.freeze({__proto__:null,HTMLMorph:xt,IFrameMorph:TC}),Qj=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js");
Qj.arr=cf;Qj.obj=xf;Qj.rect=cl;Qj.ShadowObject=ro;Qj.morph=zj;var Eq=Ka("bp",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js"),h=d.hasOwnProperty("StyleSheet")&&"function"===typeof d.StyleSheet?d.StyleSheet:d.StyleSheet=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,e){Qj.obj.isObject(a)&&!e&&(e=a,a=null);
this.rules=e;for(var n in e)e[n]=this.unwrapFoldedProps(e[n]);this.name=a}},{key:"copy",value:function(){var a={},e;for(e in this.rules)a[e]=Object.assign({},this.rules[e]);return new Qj.StyleSheet(this.name,a)}},{key:"__only_serialize__",get:function(){return["rules","context"]}},{key:"context",set:function(a){this._context=a}},{key:"context",get:function(){return this._context}},{key:"unwrapFoldedProps",value:function(a){["borderRadius","borderWidth","borderColor","borderStyle"].forEach(function(e){if(e in
a){var n=a[e];n||(n=0);a[e]=4==Qj.arr.intersect(Qj.obj.keys(n),["top","left","bottom","right"]).length?n:{top:n,bottom:n,right:n,left:n,valueOf:function(){return n}}}});return a}},{key:"removeRule",value:function(a){delete this.rules[a];this.context.requestStyling()}},{key:"setRule",value:function(a,e){this.rules[a]=this.unwrapFoldedProps(e);this.context.requestStyling()}},{key:"toggleRule",value:function(a,e){this.rules[a]._deactivated=!e;this.context.requestStyling()}},{key:"applicableRules",value:function(){var a=
{},e;for(e in this.rules)a[e]={styleSheet:this,rule:e};return a}},{key:"toJSExpr",value:function(){return"new StyleSheet("+Qj.obj.inspect(this.rules,{customPrinter:function(a,e,n){return a&&a.isColor||a&&a.isGradient?a.toJSExpr():a&&a.isPoint?a.toString():a&&Qj.arr.all([a.top,a.left,a.right,a.bottom],function(q){return q&&Qj.obj.equals(q,a.top)})?n(a.top):a&&Qj.obj.keys(a).includes("_rev")?n(Qj.obj.dissoc(a,["_rev","_deactivated"])):e},escapeKeys:!0})+")"}},{key:"applyRule",value:function(a,e,n){var q=
this.rules[a];if(q._deactivated)return{};q=Qj.obj.dissoc(q,["_deactivated"]);return e.withMetaDo({styleSheetChange:!0},function(){if("layout"in q){var r=q.layout.copy();r.container=e;q.layout=r}"dropShadow"in q&&(q.dropShadow=new Qj.ShadowObject(q.dropShadow),q.dropShadow.morph=e);"padding"in q&&(q.padding=q.padding.isRect?q.padding:Qj.rect(q.padding,q.padding));r=Qj.obj.keys(q).filter(function(E){return!Qj.obj.equals(e[E],q[E])});r=Qj.obj.select(q,r);var v=e.propertiesAndPropertySettings().properties,
y={},D;for(D in q)y[D]=v[D]&&v[D].defaultValue||e[D];n?e.animate(Object.assign({},r,{duration:n.duration,easing:n.easing})):Object.assign(e,r);return y})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleSheet"}}],d,{pathInPackage:function(){return"style-sheets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:203,
end:3712})}(void 0));Qj.StyleSheet=Eq;Qj.StyleSheet=Eq;Qj.StyleSheet=Eq;var ag=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js");ag.obj=xf;ag.arr=cf;ag.num=jk;ag.Rectangle=ie;ag.rect=cl;ag.Color=If;ag.pt=xh;ag.connect=Ik;ag.noUpdate=ns;ag.signal=Jk;ag.disconnect=Hp;ag.Text=zp;ag.Range=wt;ag.HTMLMorph=xt;ag.Icon=rm;ag.morph=zj;var XU=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),h=d.hasOwnProperty("InputLine")&&"function"===typeof d.InputLine?
d.InputLine:d.InputLine=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;ac._get(Object.getPrototypeOf(h.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);ag.connect(this,"textChange",this,"onInputChanged");ag.connect(this,"selectionChange",this,"fixCursor")}},{key:"menuItems",value:function(){var a=this,
e,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==v.nextAddress?(e=[{command:"change placeholder",target:a},{isDivider:!0}],n=e.concat,q=$jscomp,r=q.arrayFromIterable,v.yield(ac._get(Object.getPrototypeOf(h.prototype),"menuItems",a).call(a),2)):v.return(n.call(e,r.call(q,v.yieldResult)))})}},{key:"onChange",value:function(a){"extent fontSize padding fontFamily position selection".split(" ").includes(a.prop)&&this.updatePlaceholder();return ac._get(Object.getPrototypeOf(h.prototype),
"onChange",this).call(this,a)}},{key:"isInputLine",get:function(){return!0}},{key:"allowDuplicatesInHistory",get:function(){return!1}},{key:"resetHistory",value:function(){this.inputHistory={items:[],max:50,index:0}}},{key:"inputHistory",get:function(){return this._inputHistory?this._inputHistory:this._inputHistory=this.historyId?this.constructor.getHistory(this.historyId):{items:[],max:30,index:0}}},{key:"inputHistory",set:function(a){this._inputHistory=a;this.historyId&&this.constructor.setHistory(this.historyId,
this._inputHistory)}},{key:"clear",value:function(){this.input=""}},{key:"focus",value:function(){this.fixCursor();ac._get(Object.getPrototypeOf(h.prototype),"focus",this).call(this)}},{key:"onBlur",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onBlur",this).call(this,a);this.updatePlaceholder()}},{key:"fitToLineHeight",value:function(){this.height=this.defaultLineHeight+this.padding.top()+this.padding.bottom()}},{key:"indicateError",value:function(a){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==
n.nextAddress)return e.borderColor=ag.Color.red,e._errorIcon=e.addMorph(e._errorIcon||ag.morph({type:"label",value:[" "+a,{fontSize:e.fontSize}," ",{}].concat($jscomp.arrayFromIterable(ag.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:e.fontSize,fontColor:ag.Color.red,opacity:0,reactsToPointer:!1,fill:ag.Color.white.withA(.9)})),n.yield(e.whenRendered(),2);e._errorIcon.opacity=1;e._errorIcon.rightCenter=e.innerBounds().insetBy(10).rightCenter();n.jumpToEnd()})}},{key:"clearError",
value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=ag.Color.transparent)}},{key:"updatePlaceholder",value:function(){var a=this.getSubmorphNamed("placeholder");if(a)if(this.input.length)a.visible=!1;else{var e=this.innerBounds();a.fontSize=this.fontSize;a.visible=!0;a.height=this.height;a.padding=this.padding;a.defaultTextStyle=this.defaultTextStyle;a.lineHeight=this.height+"px";a.fit();a.topLeft=this.label.length?e.topLeft().addXY(0,
this.borderWidth):e.topLeft().withX(0)}}},{key:"fixCursor",value:function(){this.label&&(this.positionToIndex(this.selection.lead)<this.label.length&&(this.selection.lead=this.indexToPosition(this.label.length)),this.positionToIndex(this.selection.anchor)<this.label.length&&(this.selection.anchor=this.indexToPosition(this.label.length)))}},{key:"acceptInput",value:function(){var a=this.input;this.onInput(a);return a}},{key:"onInput",value:function(a){0<this.input.length&&this.addInputToHistory(this.input);
this.clearOnInput&&this.clear();ag.signal(this,"inputAccepted",a)}},{key:"onInputChanged",value:function(a){ag.signal(this,"inputChanged",a);this.clearError();this.updatePlaceholder()}},{key:"onMouseDown",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"deleteText",value:function(a){a=a.isRange?a:new ag.Range(a);if(!a.isEmpty())return a=a.subtract({start:{row:0,column:0},end:{row:0,column:this.label.length}})[0],
ac._get(Object.getPrototypeOf(h.prototype),"deleteText",this).call(this,a)}},{key:"addInputToHistory",value:function(a){var e=this.inputHistory,n=e.items;if(ag.arr.last(n)!==a){n.push(a);n.length>e.max&&(e.items=n=n.slice(-e.max));e.index=n.length-1;if(!this.allowDuplicatesInHistory)for(n=e.items.length-1;n--;)e.items[n]===a&&(e.items.splice(n,1),e.index--);this.historyId&&this.constructor.addHistoryToLocalStorage(this.historyId,e)}}},{key:"browseHistory",value:function(){var a=this,e,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==
v.nextAddress)return e=a.inputHistory.items.map(function(y,D){return{isListItem:!0,string:y,value:D}}).reverse(),v.yield(a.world().filterableListPrompt("Choose item:",e,{commands:[a.histEditCommandForHistBrowse()]}),2);n=v.yieldResult;q=$jscomp.makeIterator(n.selected);r=q.next().value;"number"===typeof r&&a.setAndShowHistItem(r);a.focus();v.jumpToEnd()})}},{key:"histEditCommandForHistBrowse",value:function(){var a=this;return{name:"edit history "+this.historyId,exec:function(e){var n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress)return n=a.inputHistory.items.slice().reverse(),y.yield(e.world().editListPrompt("edit history "+a.historyId,n),2);q=y.yieldResult;r=q.status;v=q.list;if("canceled"===r)return y.return(!0);n=n.filter(function(D){return D.isListItem?v.includes(D.value):v.includes(D)});a.inputHistory=Object.assign({},a.inputHistory,{items:n});e.get("list").items=n.map(function(D,E){return{isListItem:!0,string:D,value:E}}).reverse();return y.return(!0)})}}}},{key:"setAndShowHistItem",value:function(a){var e=
this.inputHistory,n=e.items,q=n.length-1;ag.num.between(a,0,q+1)?e.index=a:e.index=a=q;this.input!==n[a]&&"undefined"!==typeof n[a]&&(this.input=n[a])}},{key:"showHistItem",value:function(a){a=a||"next";var e=this.inputHistory,n=e.items,q=n.length-1,r=e.index;ag.num.between(r,0,q+1)||(e.index=r=q);if(this.input!==n[r]&&"undefined"!==typeof n[r])this.input=n[r];else{if("next"===a){if(r>q)return;r=++e.index}else{if(0>=r)return;r=--e.index}this.input=n[r]||""}}},{key:"commands",get:function(){var a=
this;return[{name:"change placeholder",exec:function(){var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(a.world().prompt("Enter Placeholder:",{input:a.placeholder}),2);if(e=n.yieldResult)a.placeholder=e;n.jumpToEnd()})}},{name:"accept input",exec:function(){a.acceptInput();return!0}},{name:"show previous input from history",exec:function(){a.showHistItem("prev");return!0}},{name:"show next input from history",exec:function(){a.showHistItem("next");
return!0}},{name:"browse history",exec:function(){a.browseHistory();return!0}},{name:"remove items from history",exec:function(e){var n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return n=e.inputHistory,q=n.items.map(function(D,E){return{isListItem:!0,string:D,value:E}}).reverse(),y.yield(e.world().filterableListPrompt("Choose items to delete:",q,{multiSelect:!0}),2);r=y.yieldResult;v=r.selected;ag.arr.sort(v).reverse().forEach(function(D){D<n.index&&
n.index--;n.items.splice(D,1)});e.inputHistory=n;return y.return(!0)})}}].concat(ac._get(Object.getPrototypeOf(h.prototype),"commands",this))}},{key:"keybindings",get:function(){return ac._get(Object.getPrototypeOf(h.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"},{keys:"Up|Ctrl-Up|Alt-P",command:"show previous input from history"},{keys:"Down|Ctrl-Down|Alt-N",command:"show next input from history"},{keys:"Alt-H",
command:"browse history"},{keys:"Alt-Shift-H",command:"remove items from history"}])}},{key:"htmlExport_transformNode",value:function(a){var e=a.getRootNode().createElement("input"),n=a.querySelector(".newtext-text-layer.actual");e.id=a.id;e.className=a.className;e.style=a.style.cssText;Object.assign(e.style,ag.obj.select(n.style,"padding font-family font-weight font-style text-decoration font-size color".split(" ")));e.placeholder=this.placeholder;e.type="text";e.autocomplete=e.name=this.name.replace(/[\s"]/g,
"-");return e}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InputLine"}},{key:"getHistoryFromLocalSorage",value:function(a){if("undefined"===typeof localStorage)return null;try{var e=localStorage.getItem("lively.morphic-inputline-"+a);return e?JSON.parse(e):null}catch(n){return null}}},{key:"addHistoryToLocalStorage",value:function(a,e){if("undefined"!==typeof localStorage)try{localStorage.setItem("lively.morphic-inputline-"+a,JSON.stringify(e))}catch(n){console.error(n)}}},{key:"histories",
get:function(){this._histories||(this._histories=new Map);return this._histories}},{key:"getHistory",value:function(a){var e=this.histories.get(a);if(e)return e;e=this.getHistoryFromLocalSorage(a)||{items:[],max:50,index:0};this.histories.set(a,e);return e}},{key:"setHistory",value:function(a,e){e=void 0===e?{items:[],max:50,index:0}:e;this.histories.set(a,e);this.addHistoryToLocalStorage(a,e);return e}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},
extent:{defaultValue:ag.pt(100,20)},padding:{defaultValue:ag.Rectangle.inset(2,4)},clipMode:{defaultValue:"hidden"},lineWrapping:{defaultValue:!1},historyId:{defaultValue:null},clearOnInput:{defaultValue:!1},label:{after:["textAndAttributes","extent","padding","submorphs"],defaultValue:"",set:function(a){var e=this;this.setProperty("label",a);this.textString.startsWith(a)||ag.noUpdate(function(){e.textString=a+e.input})}},input:{after:["label"],derived:!0,get:function(){return this.textString.slice(this.label.length)},
set:function(a){this.textString=this.label+(a?String(a):"");this.updatePlaceholder()}},placeholder:{after:["submorphs","label","defaultTextStyle"],dervied:!0,get:function(){var a=this.getSubmorphNamed("placeholder");return a?a.value:null},set:function(a){var e=this.getSubmorphNamed("placeholder");a?e?(e.defaultTextStyle=Object.assign({},this.defaultTextStyle,{fontColor:ag.Color.gray}),e.value=a):this.addMorph(ag.Text.makeLabel(a,Object.assign({},this.defaultTextStyle,{name:"placeholder",reactsToPointer:!1,
fontColor:ag.Color.gray}))):e&&e.remove();this.updatePlaceholder()}}}}}],d,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:466,end:14839})}(ag.Text);XU=ag.InputLine;var UC=Ka("az",XU),yt=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),h=d.hasOwnProperty("PasswordInputLine")&&
"function"===typeof d.PasswordInputLine?d.PasswordInputLine:d.PasswordInputLine=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"onChange",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onChange",this).call(this,a);"borderRadius"==a.prop&&this.updateHtml(this.input)}},{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;ac._get(Object.getPrototypeOf(h.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this.onLoad()}},{key:"onChange",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onChange",this).call(this,a);["fill","borderRadius"].includes(a.prop)&&this.updateHtml(this.input)}},{key:"onLoad",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(a.whenRendered(),2);a.ensureInputNode().then(function(n){a.updateHtml(a.input);n.onkeydown=function(q){return a.env.eventDispatcher.dispatchDOMEvent(q,
a,"onKeyDown")};n.onkeyup=function(q){return a.env.eventDispatcher.dispatchDOMEvent(q,a,"onKeyUp")}});e.jumpToEnd()})}},{key:"onMouseDown",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"onAfterRender",value:function(a){this.ensureInputNode()}},{key:"ensureInputNode",value:function(){var a=this;return this.whenRendered().then(function(){var e=a.domNode;e.parentNode&&"INPUT"==e.parentNode.tagName&&(e.parentNode.remove(),
e=a.env.renderer.getNodeForMorph(a),e.insertBefore(a.domNode,e.firstChild));return a.domNode})}},{key:"onKeyDown",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onKeyDown",this).call(this,a);if(this.input!=this.lastInput)this.onInputChanged(this.input);this.lastInput=this.input}},{key:"focus",value:function(){ac._get(Object.getPrototypeOf(h.prototype),"focus",this).call(this);this.domNode&&this.domNode.focus()}},{key:"onFocus",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),
"onFocus",this).call(this,a);this._originalShadow||(this._originalShadow=this.dropShadow,this.highlightWhenFocused&&this.animate({dropShadow:this.haloShadow,duration:200}))}},{key:"onBlur",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onBlur",this).call(this,a);this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null}},{key:"indicateError",value:function(a){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==
n.nextAddress)return e.borderWidth=3,e.borderColor=ag.Color.red,e._errorIcon=e.addMorph(e._errorIcon||ag.morph({type:"label",value:[" "+a,{fontSize:18}," ",{}].concat($jscomp.arrayFromIterable(ag.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:20,fontColor:ag.Color.red,opacity:0,reactsToPointer:!1,fill:ag.Color.white.withA(.9)})),n.yield(e.whenRendered(),2);e._errorIcon.opacity=1;e._errorIcon.rightCenter=e.innerBounds().insetBy(10).rightCenter();n.jumpToEnd()})}},{key:"clearError",
value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=ag.Color.transparent)}},{key:"acceptInput",value:function(){var a=this.input;ag.signal(this,"inputAccepted",a);return a}},{key:"onInputChanged",value:function(a){this.clearError();ag.signal(this,"inputChanged",a)}},{key:"updateHtml",value:function(a){var e=this,n,q,r,v,y,D,E,I,K,P,N,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return n=e,q=n.fontSize,
r=n.fontFamily,v=n.padding,y=n.placeholder,D=void 0===n.fill?If.white:n.fill,E=n.borderRadius,I=v.top(),K=v.right(),P=v.bottom(),N=v.left(),m.yield(e.ensureInputNode(),2);aa=m.yieldResult;aa.setAttribute("type","password");aa.setAttribute("placeholder",y);aa.setAttribute("value",a);Object.assign(aa.style,{position:"absolute",width:"calc(100% - "+N+"px - "+K+"px)","border-width":0,outline:"none","border-radius":E.valueOf()+"px",background:D.toString(),padding:I+"px "+K+"px "+P+"px "+N+"px","font-size":q+
"px","font-family":""+r});m.jumpToEnd()})}},{key:"commands",get:function(){var a=this;return[{name:"accept input",exec:function(){a.acceptInput();return!0}}].concat(ac._get(Object.getPrototypeOf(h.prototype),"commands",this))}},{key:"keybindings",get:function(){return ac._get(Object.getPrototypeOf(h.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"}])}},{key:"htmlExport_transformNode",value:function(a){var e=a.getRootNode(),
n=e.createElement("div"),q=a.querySelector("input");e=e.createElement("input");q.childNodes[0]&&"INPUT"===q.childNodes[0].tagName&&(q=q.childNodes[0]);e.id=a.id;e.className=a.className;n.style=a.style.cssText;Object.assign(e.style,ag.obj.select(q.style,"padding font-family font-weight font-style text-decoration font-size border-radius color".split(" ")));e.style.position="absolute";e.style.width=a.style.width;e.style.height=a.style.height;e.style["border-width"]=a.style["border-width"];e.placeholder=
this.placeholder;e.type="password";e.autocomplete=e.name=this.name.replace(/[\s"]/g,"-");n.appendChild(e);n.appendChild(a.childNodes[1]);return n}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PasswordInputLine"}},{key:"properties",get:function(){return{extent:{defaultValue:ag.pt(100,20)},html:{derived:!0,initialize:function(){},get:function(){return""},set:function(a){}},highlightWhenFocused:{defaultValue:!0},haloShadow:{type:"Shadow"},domNodeTagName:{readOnly:!0,get:function(){return"input"}},
domNodeStyle:{readOnly:!0,get:function(){return"background: grey"}},input:{derived:!0,after:["domNode"],get:function(){return this.domNode&&this.domNode.value||""},set:function(a){this.domNode.value=a;this.updateHtml(this.input)}},placeholder:{after:["domNode"],set:function(a){this.setProperty("placeholder",a);this.updateHtml(this.input)}},fontSize:{defaultValue:12,after:["input"],set:function(a){this.setProperty("fontSize",a);this.updateHtml(this.input)}},fontFamily:{defaultValue:"sans-serif",after:["input"],
set:function(a){this.setProperty("fontFamily",a);this.updateHtml(this.input)}},padding:{defaultValue:ag.Rectangle.inset(2),after:["input"],set:function(a){this.setProperty("padding",a);this.updateHtml(this.input)}}}}}],d,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14914,end:21842})}(ag.HTMLMorph);
ag.PasswordInputLine=yt;ag.PasswordInputLine=yt;ag.PasswordInputLine=yt;ag.default=XU;var of=lively.FreezerRuntime.recorderFor("lively.morphic/index.js");of.default=Yk;of.config=Yk;Object.assign(of,Rva);Object.assign(of,Twa);Object.assign(of,Ywa);Object.assign(of,Zwa);Object.assign(of,Vwa);Object.assign(of,Cxa);Object.assign(of,Aqa);Object.assign(of,y9);of.StyleSheet=Eq;of.StyleSheet=Eq;of.ShadowObject=ro;of.ShadowObject=ro;of.addOrChangeCSSDeclaration=Kp;of.addOrChangeCSSDeclaration=Kp;of.addOrChangeLinkedCSS=
mu;of.addOrChangeLinkedCSS=mu;of.easings=so;of.easings=so;of.stringToEasing=os;of.stringToEasing=os;Object.assign(of,Sva);of.Icon=rm;of.Icon=rm;of.loadMorphFromSnapshot=bq;of.loadMorphFromSnapshot=bq;Object.assign(of,Tva);of.World=vr;of.Hand=az;of.Morph=xj;of.Image=Ov;of.Ellipse=Nv;of.Triangle=Vy;of.Path=Pv;of.Polygon=Wy;of.LineMorph=Xy;of.Text=zp;of.Label=Ap;of.HTMLMorph=xt;of.InputLine=UC;of.PasswordInputLine=yt;of.InputLine=UC;of.InputLine=UC;of.PasswordInputLine=yt;of.PasswordInputLine=yt;of.locateClass=
Gp;of.morph=zj;of.addClassMappings=$z;of.inspect=sv;of.touchInputDevice=qm;of.addClassMappings({default:of.Morph,world:of.World,hand:of.Hand,image:of.Image,ellipse:of.Ellipse,triangle:of.Triangle,path:of.Path,text:of.Text,input:of.InputLine,label:of.Label,polygon:of.Polygon,line:of.LineMorph,html:of.HTMLMorph});of.morph=zj;of.morph=zj;of.inspect=sv;of.inspect=sv;of.touchInputDevice=qm;of.touchInputDevice=qm;var Dxa=Object.freeze({__proto__:null,config:Yk,StyleSheet:Eq,ShadowObject:ro,addOrChangeCSSDeclaration:Kp,
addOrChangeLinkedCSS:mu,easings:so,stringToEasing:os,Icon:rm,loadMorphFromSnapshot:bq,InputLine:UC,PasswordInputLine:yt,morph:zj,inspect:sv,touchInputDevice:qm,Morph:xj,Ellipse:Nv,Triangle:Vy,Image:Ov,PathPoint:PC,Path:Pv,Polygon:Wy,LineMorph:Xy,World:vr,Hand:az,Text:zp,Label:Ap,Anchor:bz,HTMLMorph:xt,IFrameMorph:TC,MorphicEnv:go,VerticalLayout:Dr,HorizontalLayout:lp,TilingLayout:VB,ProportionalLayout:By,CellGroup:WB,LayoutColumn:XB,LayoutRow:YB,LayoutCell:ZB,GridLayout:Er,TooltipViewer:Zy,Tooltip:Qv,
MorphicDB:zq}),al=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js");al.Morph=xj;al.stringToEasing=os;al.easings=so;al.pt=xh;al.num=jk;al.Path=Eg;al.promise=bg;al.fun=ik;var ida=function(b){var d=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js"),h=d.hasOwnProperty("ModuleProgress")&&"function"===typeof d.ModuleProgress?d.ModuleProgress:d.ModuleProgress=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return ac(h,b,[{key:"fadeIntoBack",value:function(){this.animate({blur:5})}},{key:"relayout",value:function(){!this.isComponent&&al.Path("owner.isWorld").get(this)&&(this.bottomCenter=$world.visibleBounds().center().subXY(0,100))}},{key:"reset",value:function(){var a=this.getAllNamed(/stage/);this.blur=0;this.stages=new Map(a.map(function(e){return[e,"not loaded"]}));this.updateProgressVisualization();this.getAllNamed(/label/).map(function(e){e._cachedTextBounds=null;e.fit()})}},{key:"updateProgressBar",
value:function(){if(this._lastWidth){this.relayout();var a=this.get("progress path"),e=al.stringToEasing(al.easings.inOutExpo)(al.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3);a.width=al.num.interpolate(e,this._lastWidth,this._currentProgress)}}},{key:"fastLoadTest",value:function(){var a=this,e,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){1==v.nextAddress&&(a.reset(),e="lively.lang lively.ast lively.source-transform lively.classes lively.vm lively.modules lively.user lively.storage lively.morphic".split(" "),
n=$jscomp.makeIterator(e),q=n.next());if(3!=v.nextAddress){if(q.done)return v.jumpTo(0);r=q.value;a.finishPackage({packageName:r,loaded:!0});return v.yield(al.promise.delay(200),3)}q=n.next();return v.jumpTo(2)})}},{key:"finishPackage",value:function(a){var e=this,n=a.frozen,q=a.loaded;a="stage "+a.packageName.replace("lively.","");a=this.get(a);n&&this.stages.set(a,"frozen");q&&this.stages.set(a,"loaded");al.fun.debounceNamed("update progress",200,function(){e.updateProgressVisualization()})()}},
{key:"updateProgressVisualization",value:function(){var a=this,e=this.getSubmorphNamed("progress path"),n=this.getAllNamed(/stage/),q=n[0];n.forEach(function(r){var v=r.get("checkmark"),y=r.get("frozen indicator"),D=r.get("icon");r=a.stages.get(r);if("not loaded"!=r){q=v;if("loaded"==r){if(v.visible)return;v.animate({duration:300,visible:!0})}if("frozen"==r){if(y.visible)return;y.animate({duration:300,visible:!0})}D.opacity=1}else v.visible=!1,y.visible=!1,D.opacity=.2});n=this.localizePointFrom(al.pt(-20,
0),q).x;n=Math.max(20,n-e.left);e.visible=20==n?!1:!0;this._lastWidth=e.width;this._timeStamp=Date.now();this._currentProgress=n}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleProgress"}},{key:"properties",get:function(){return{stages:{serialize:!1,after:["submorphs"],initialize:function(){var a=this;this.whenRendered().then(function(){a.reset()})}}}}}],d,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ModuleProgress",version:"0.1.1-109"}}},{start:192,end:3586})}(al.Morph);ida=al.ModuleProgress;al.default=ida;var yg=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js");yg.promise=bg;yg.fun=ik;yg.num=jk;yg.Icon=rm;yg.stringToEasing=os;yg.easings=so;yg.VerticalLayout=Dr;yg.ShadowObject=ro;yg.HorizontalLayout=lp;yg.morph=zj;yg.Morph=xj;yg.StyleSheet=Eq;yg.Image=Ov;yg.pt=xh;yg.RadialGradient=pm;yg.rect=cl;yg.Rectangle=ie;yg.Color=If;yg.connect=Ik;
(function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),h=d.hasOwnProperty("ProgressBar")&&"function"===typeof d.ProgressBar?d.ProgressBar:d.ProgressBar=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"test",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){1==e.nextAddress&&(a.progress=0);if(!(1>a.progress))return e.jumpTo(0);
a.progress+=.1;return e.yield(yg.promise.delay(1E3),2)})}},{key:"update",value:function(){var a=this;setTimeout(function(){a.world()||a.stopStepping()},1E3);if(this._lastWidth){var e=this.get("progress path"),n=yg.stringToEasing(yg.easings.inOutExpo)(yg.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3),q=this._targetWidth;e.topLeft=yg.pt(0,0);e.height=this.height;e.width=this._lastWidth>q?q:yg.num.interpolate(n,this._lastWidth,q)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProgressBar"}},
{key:"properties",get:function(){return{progress:{after:["submorphs"],initialize:function(){this.progress=0;this.startStepping("update")},set:function(a){var e=this.get("progress path");this._lastWidth=Math.max(e.width,this._targetWidth,1);this._targetWidth=this.width*a;this._timeStamp=Date.now();this.setProperty("progress",a)}},fill:{defaultValue:yg.Color.darkGray},borderRadius:{defaultValue:5},clipMode:{defaultValue:"hidden"},submorphs:{initialize:function(){this.submorphs=[{name:"progress path",
fill:yg.Color.orange,width:1}]}}}}}],d,{pathInPackage:function(){return"loading-indicator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:336,end:1943})})(yg.Morph);var YU=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),h=d.hasOwnProperty("LoadingIndicator")&&"function"===typeof d.LoadingIndicator?
d.LoadingIndicator:d.LoadingIndicator=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;ac._get(Object.getPrototypeOf(h.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);var e=this.ui;a=e.label;var n=e.closeButton;if(e=e.progressBar)e.opacity=0,e.isLayoutable=!1;yg.connect(this,"extent",this,"relayout");
yg.connect(a,"extent",this,"relayout");yg.connect(a,"value",this,"updateLabel");yg.connect(a,"fontSize",this,"updateLabel");yg.connect(a,"fontFamily",this,"updateLabel");yg.connect(n,"fire",this,"remove");n.fit();this.relayout()}},{key:"animateProgress",value:function(a){var e=this,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return n=e.ui,(q=n.progressBar)||(q=e.addMorph(new yg.ProgressBar({name:"progress bar"}))),r=e.center,0==a?(q.isLayoutable=!1,q.opacity=
0):(q.isLayoutable=!0,q.opacity=1),q.progress=a,v.yield(e.whenRendered(),2);e.center=r;v.jumpToEnd()})}},{key:"hideSpinner",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(!a.ui.spinner)return e.return();a.ui.spinner.visible=!1;a.ui.spinner.width=50;a.ui.spinner.remove();return e.yield(a.whenRendered(),0)})}},{key:"isEpiMorph",get:function(){return!0}},{key:"updateLabel",value:function(){var a=this.center;this.relayout();this.center=a}},{key:"relayout",
value:function(){yg.Rectangle.inset(20,12);var a=this.ui,e=a.label,n=a.progressBar,q=a.status;a.closeButton.topRight=this.innerBounds().insetBy(2).topRight();n.extent=yg.pt(e.owner.bounds().width,5);q[q.visible?"top":"bottom"]=e.height}},{key:"onHoverIn",value:function(a){this.ui.closeButton.visible=!0}},{key:"onHoverOut",value:function(a){this.ui.closeButton.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LoadingIndicator"}},{key:"open",value:function(a,e){var n=yg.morph(Object.assign({type:yg.LoadingIndicator},
e,{label:a}));if(e&&e.animated)return yg.promise.delay(e.delay||0).then(function(){n.openInWorld();n.opacity=0;n.whenRendered().then(function(){n.ui.spinner&&(n.ui.spinner.visible=!0);n.top+=25;n.animate({top:n.top-25,easing:yg.easings.outExpo});n.animate({opacity:1,easing:yg.easings.outExpo})})}),n;n.openInWorld();n.ui.label.whenRendered().then(function(){n.ui.spinner&&(n.ui.spinner.visible=!0);n.ui.label.fit()});return n}},{key:"forPromise",value:function(a,e,n){var q=this.open(e,n);yg.promise.finally(Promise.resolve(a),
function(){return q.remove()});return q}},{key:"runFn",value:function(a,e,n){var q=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return r=q.open(e,n),v.yield(r.whenRendered(),2);case 2:return v.setFinallyBlock(3),v.yield(a(r),5);case 5:return v.return(v.yieldResult);case 3:v.enterFinallyBlock(),r.remove(),v.leaveFinallyBlock(0)}})}},{key:"properties",get:function(){return{name:{defaultValue:"LoadingIndicator"},styleClasses:{defaultValue:["Halo"]},
hasFixedPosition:{defaultValue:!0},ui:{derived:!0,get:function(){return{progressBar:this.getSubmorphNamed("progress bar"),closeButton:this.getSubmorphNamed("closeButton"),spinner:this.getSubmorphNamed("spinner"),label:this.getSubmorphNamed("ld label"),status:this.getSubmorphNamed("status")}}},progress:{derived:!0,set:function(a){this.animateProgress(yg.num.clamp(a,0,1))}},label:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.value},set:function(a){this.ui.label.value=a}},status:{derived:!0,
after:["submorphs"],defaultValue:!1,get:function(){return this.getSubmorphNamed("status").value},set:function(a){var e=this.ui.status;a?(e.visible=!0,e.value=a):(e.visible=!1,e.value="");this.relayout()}},fontFamily:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontFamily},set:function(a){this.ui.label.fontFamily=a}},fontSize:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontSize},set:function(a){this.ui.label.fontSize=a}},loadingImage:{defaultValue:System.decanonicalize("lively.morphic/")+
"lively-web-logo-small-animate.svg"},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/loading indicator"}}},submorphs:{initialize:function(){this.submorphs=[{name:"wrapper",submorphs:[{type:"html",name:"spinner",extent:yg.pt(86.2,70.2)},{type:"label",name:"ld label",extent:yg.pt(20,100),submorphs:[{type:"label",name:"status"}]}]},{type:"button",name:"closeButton",label:yg.Icon.textAttribute("times")},{type:yg.ProgressBar,name:"progress bar"}]}}}}}],d,{pathInPackage:function(){return"loading-indicator.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:2099,end:8211})}(yg.Morph);YU=yg.LoadingIndicator;var dz=Ka("q",YU);yg.default=YU;var Ih=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js");Ih.Morph=xj;Ih.World=vr;Ih.HorizontalLayout=lp;Ih.morph=zj;Ih.MorphicDB=zq;Ih.graph=wr;Ih.promise=bg;Ih.date=hq;Ih.string=Ng;Ih.arr=
cf;Ih.Color=If;Ih.pt=xh;Ih.LoadingIndicator=dz;Ih.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
Ih.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
Ih.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
(function(b){var d=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js"),h=d.hasOwnProperty("WorldVersion")&&"function"===typeof d.WorldVersion?d.WorldVersion:d.WorldVersion=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"update",value:function(){var a=$jscomp.makeIterator(this.submorphs),e=a.next().value;a=a.next().value;e.imageUrl=this.commit.preview||Ih.missingSVG;a.textAndAttributes=
this.info;a.fontColor=this.selected?Ih.Color.white:Ih.Color.darkGray}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldVersion"}},{key:"properties",get:function(){return{commit:{},fill:{defaultValue:Ih.Color.transparent},info:{derived:!0,get:function(){var a=this.commit,e=a.message,n=a.name,q=a.timestamp;return[a._id.slice(0,6)+" ",{fontWeight:"bold"},Ih.string.truncate(e.split("\n")[0],40)+" ",{}," ("+n+" ",{},""+Ih.date.format(new Date(q),"yyyy-mm-dd HH:MM Z"),{}]}},selected:{set:function(a){this.setProperty("selected",
a);this.update()}},layout:{initialize:function(){this.layout=new Ih.HorizontalLayout({align:"center",spacing:5})}},submorphs:{initialize:function(){this.submorphs=[{type:"image",extent:Ih.pt(30,30),name:"preview",reactsToPointer:!1},{reactsToPointer:!1,type:"label",fill:null,name:"commit info",fontFamily:"Nunito",fontColor:Ih.Color.gray}]}}}}}],d,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"WorldVersionViewer",version:"0.1.1-34"}}},{start:1327,end:2884})})(Ih.Morph);var jda=function(b){var d=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js"),h=d.hasOwnProperty("WorldVersionViewer")&&"function"===typeof d.WorldVersionViewer?d.WorldVersionViewer:d.WorldVersionViewer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"reset",value:function(){this.getSubmorphNamed("version list").items=
[];this.getSubmorphNamed("version list spinner").visible=!1}},{key:"onMouseDown",value:function(a){switch(a.targetMorph.name){case "visit button":this.visitSelectedCommit();break;case "revert button":this.revertToSelectedCommit()}}},{key:"visitSelectedCommit",value:function(){var a=this,e,n,q,r,v,y,D,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:return e=a.get("version list").selection,n=Ih.LoadingIndicator.open("Loading "+e.name+"..."),q=$world,r=a.db||
Ih.MorphicDB.default,v=e._id,I.setCatchFinallyBlocks(2,3),v?I.yield(Ih.World.loadFromCommit(v,void 0,{morphicDB:r}),8):I.yield(Ih.World.loadFromDB(e.name,e.ref,void 0,{morphicDB:r}),7);case 7:y=I.yieldResult;I.jumpTo(6);break;case 8:y=I.yieldResult;case 6:return D=y,I.return(D);case 3:I.enterFinallyBlock();n.remove();I.leaveFinallyBlock(0);break;case 2:E=I.enterCatchBlock(),console.error(E),q.showError("Error loading world:"+E),I.jumpTo(3)}})}},{key:"revertToSelectedCommit",value:function(){var a=
this,e,n,q,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){if(1==D.nextAddress){e=a.get("version list").selection;if(!e)return D.return();n=a.db||Ih.MorphicDB.default;q=e;r=q._id;v=q.name;y=q.type;return D.yield(n.revert(y,v,r,"HEAD"),2)}return D.return(a.initializeFromStartCommit(e,n,{showRevertButton:!0}))})}},{key:"initializeFromStartCommit",value:function(a,e,n){e=void 0===e?Ih.MorphicDB.default:e;n=void 0===n?{}:n;var q=this,r,v,y,D,E,I,K,P,N,aa,m,t,u,B,A,H,F,L,U,T,Y,wa,
Ga;return $jscomp.asyncExecutePromiseGeneratorProgram(function(na){switch(na.nextAddress){case 1:return r=n,v=void 0===r.showRefs?!0:r.showRefs,y=q.startCommit=a,D=y._id,E=y.type,I=y.name,K=q.getSubmorphNamed("version list spinner"),K.visible=!0,K.center=q.get("version list").center,q.db=e,na.yield(e.history(E,I),2);case 2:P=na.yieldResult,N=P.refs,aa=P.history,m=D,t=Ih.graph.invert(aa),u=Ih.graph.hull(t,D),B={_id:!0},A=[a],H=$jscomp.makeIterator(u),F=H.next();case 3:if(F.done)return T=Ih.arr.max(A,
function(ea){return ea.timestamp}),m=T._id,na.yield(e.log(m,void 0,!0),7);L=F.value;return na.yield(e.log(L,void 0,!0,B),6);case 6:U=na.yieldResult;A.push.apply(A,$jscomp.arrayFromIterable(U));U.forEach(function(ea){return B[ea._id]=!0});F=H.next();na.jumpTo(3);break;case 7:Y=na.yieldResult;if(v)for(wa in N);Ga=Y.map(function(ea){var da=new Ih.WorldVersion({reactsToPointer:!1,commit:ea});da.update();return{isListItem:!0,morph:da,value:ea}});q.get("version list").items=Ga;K.visible=!1;na.jumpToEnd()}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldVersionViewer"}}],d,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"WorldVersionViewer",version:"0.1.1-34"}}},{start:2901,end:6778})}(Ih.Morph);jda=Ih.WorldVersionViewer;Ih.default=jda;var ch=lively.FreezerRuntime.recorderFor("lively.components/buttons.js");ch.Morph=
xj;ch.morph=zj;ch.Icon=rm;ch.touchInputDevice=qm;ch.Rectangle=ie;ch.LinearGradient=Xk;ch.Color=If;ch.pt=xh;ch.signal=Jk;ch.connect=Ik;ch.arr=cf;ch.obj=xf;ch.Closure=Gi;var ez=Ka("B",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),h=d.hasOwnProperty("Button")&&"function"===typeof d.Button?d.Button:d.Button=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){ac._get(Object.getPrototypeOf(h.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a)}},{key:"__additionally_serialize__",value:function(a,e,n,q){ac._get(Object.getPrototypeOf(h.prototype),"__additionally_serialize__",this).call(this,a,e,n,q);q("fontSize",this.fontSize);this.label!=this.labelMorph.value&&q("label",this.labelMorph.value)}},{key:"isButton",get:function(){return!0}},{key:"enable",value:function(){this.deactivated=!1}},{key:"disable",value:function(){this.deactivated=
!0}},{key:"onChange",value:function(a){var e=a.prop;if(this.label)switch(e){case "extent":case "fontSize":case "fontFamily":this.relayout();break;case "padding":this.fit()}return ac._get(Object.getPrototypeOf(h.prototype),"onChange",this).call(this,a)}},{key:"onSubmorphChange",value:function(a,e){e===this.labelMorph&&"extent"===a.prop&&this.relayout();return ac._get(Object.getPrototypeOf(h.prototype),"onSubmorphChange",this).call(this,a,e)}},{key:"fitLabelMorph",value:function(){var a=this;this.labelMorph.whenFontLoaded().then(function(){a.labelMorph.invalidateTextLayout();
a.labelMorph.fit()})}},{key:"relayout",value:function(){var a=this.labelMorph;if(a&&!this._relayouting){this._relayouting=!0;try{var e=this.padding,n=e.top(),q=e.bottom(),r=e.left(),v=e.right(),y=a.height+n+q,D=a.width+r+v;y>this.height&&(this.height=y);D>this.width&&(this.width=D);var E=this.innerBounds().insetByRect(e);a.center=E.center().subPt(this.origin)}finally{this._relayouting=!1}}}},{key:"fit",value:function(){var a=this.padding,e=this.labelMorph;e.fit();this.extent=a.bottomLeft().addPt(a.bottomRight()).addPt(e.extent);
this.relayout();return this}},{key:"trigger",value:function(){try{ch.signal(this,"fire"),"function"===typeof this.action&&this.action()}catch(e){var a=this.world();a?a.logError(e):console.error(e)}}},{key:"considerPress",value:function(a){return ch.touchInputDevice?!0:this.innerBoundsContainsPoint(a.positionIn(this))}},{key:"onMouseDown",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onMouseDown",this).call(this,a);a.isAltDown()||this.deactivated||!this.considerPress(a)||(this.pressed=
{originalFill:this.fill})}},{key:"onMouseUp",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onMouseUp",this).call(this,a);a.isClickTarget(this)&&this.pressed&&(this.trigger(),this.pressed=null)}},{key:"onDragStart",value:function(a){ch.touchInputDevice?(this.draggable=!0,this.pressed=null):ac._get(Object.getPrototypeOf(h.prototype),"onDragStart",this).call(this,a)}},{key:"onDrag",value:function(a){}},{key:"onHoverOut",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onHoverOut",
this).call(this,a);!ch.touchInputDevice&&this.pressed&&a.isClickTarget(this)&&(this.pressed=null)}},{key:"onHoverIn",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onHoverIn",this).call(this,a);ch.touchInputDevice||this.deactivated||!a.isClickTarget(this)||(this.pressed={originalFill:this.fill})}},{key:"interactivelyChangeLabel",value:function(){var a=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(a.world().prompt("edit button label",
{input:a.labelMorph.textString,historyId:"lively.morphic-button-edit-label-hist"}),2);e=n.yieldResult;"string"===typeof e&&(a.label=e);n.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,e=ac._get(Object.getPrototypeOf(h.prototype),"menuItems",this).call(this);e.unshift({isDivider:!0});e.unshift(["change label",function(){return a.interactivelyChangeLabel()}]);return e}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Button"}},{key:"properties",get:function(){return{padding:{isStyleProp:!0,
defaultValue:ch.Rectangle.inset(5,2)},draggable:{defaultValue:!1},extent:{defaultValue:ch.pt(100,20)},borderColor:{defaultValue:ch.Color.gray},borderWidth:{defaultValue:1},borderRadius:{defaultValue:5},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:new ch.LinearGradient({stops:[{offset:0,color:ch.Color.white},{offset:1,color:ch.Color.rgb(236,240,241)}],vector:0})},deactivated:{group:"button",defaultValue:!1,after:["labelMorph"],set:function(a){this.setProperty("deactivated",a);this.nativeCursor=
a?"not-allowed":"pointer";this.labelMorph.opacity=a?.3:1}},pressed:{group:"_internal",defaultValue:null,set:function(a){this.getProperty("pressed");this.setProperty("pressed",a)}},fontSize:{group:"button styling",derived:!0,type:"Number",min:4,isStyleProp:!0,after:["label"],set:function(a){this.labelMorph.fontSize=a},get:function(){return this.labelMorph.fontSize}},fontColor:{group:"button styling",derived:!0,isStyleProp:!0,after:["labelMorph"],set:function(a){this.labelMorph.fontColor=a},get:function(){return this.labelMorph.fontColor}},
labelMorph:{group:"_internal",after:["submorphs"],serialize:!1,initialize:function(){this.labelMorph=this.getSubmorphNamed("label")||this.addMorph({type:"label",name:"label",value:"no label yet"})},get:function(){return this.getSubmorphNamed("label")},set:function(a){var e=this.labelMorph;e&&e.remove();a.name="label";a.reactsToPointer=!1;this.addMorphAt(a,0)}},labelWithTextAttributes:{group:"_internal",after:["labelMorph"],derived:!0,get:function(){return this.labelMorph.textAndAttributes},set:function(a){this.labelMorph.textAndAttributes=
a}},label:{group:"button",after:["labelMorph"],isStyleProp:!0,type:"RichText",set:function(a){a.isMorph?(this.setProperty("label",a.value),this.labelMorph=a):(this.setProperty("label",a),this.labelMorph.value=a,this.labelMorph._parametrizedProps&&(this.labelMorph._parametrizedProps.value=a));this.fitLabelMorph()}},fire:{group:"button",derived:!0,readOnly:!0,isSignal:!0},action:{serialize:!1}}}}],d,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:251,end:8293})}(ch.Morph));ch.Button=ez;ch.Button=ez;ch.Button=ez;var VC=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),h=d.hasOwnProperty("RadioButton")&&"function"===typeof d.RadioButton?d.RadioButton:d.RadioButton=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ac(h,b,[{key:"getMaster",value:function(a){return a?"styleguide://SystemPrompts/prompts/buttons/selection/selected":"styleguide://SystemPrompts/prompts/buttons/selection/unselected"}},{key:"reset",value:function(){var a=this.indicator;a.borderWidth=1;a.borderColor=ch.Color.gray;this.selected=!1;ch.connect(a,"onMouseUp",this,"select")}},{key:"morph",get:function(){var a=this.indicator;return this.submorphs.find(function(e){return e!==a})}},{key:"morph",set:function(a){var e=this.indicator;
this.submorphs.forEach(function(n){n!==e&&n.remove()});a.position=ch.pt(50,0);this.addMorph(a)}},{key:"value",get:function(){if(!this.valueFn){try{var a=JSON.parse(this.valueFunctionString)}catch(e){a=this.valueFunctionString}this.valueFn=ch.Closure.fromSource(a).recreateFunc()}return this.morph?this.valueFn(this.morph):void 0}},{key:"onMouseDown",value:function(a){this.select()}},{key:"select",value:function(){this.selected=!0;this.owner.setSelection(this)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"RadioButton"}},{key:"properties",get:function(){return{indicator:{get:function(){return this.getSubmorphNamed("indicator")}},master:{after:["selected"],initialize:function(){this.master={auto:this.getMaster(this.selected)}}},selectionColor:{},selectionStyle:{},selected:{after:["indicator"],defaultValue:!1,set:function(a){var e=this;this.whenRendered().then(function(n){e.master={auto:e.getMaster(a)}});this.setProperty("selected",!!a)}},valueFunctionString:{defaultValue:'"function (morph) { return morph.value; }"',
set:function(a){this.setProperty("valueFunctionString",a.toString());this.valueFn=void 0}},submorphs:{initialize:function(){this.submorphs=[{type:"ellipse",name:"indicator"}]}}}}}],d,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8302,end:10679})}(ch.Morph);ch.RadioButton=VC;ch.RadioButton=
VC;ch.RadioButton=VC;var WC=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),h=d.hasOwnProperty("RadioButtonGroup")&&"function"===typeof d.RadioButtonGroup?d.RadioButtonGroup:d.RadioButtonGroup=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"reset",value:function(){this.submorphs.forEach(function(a){return a.reset()});this.layout.layoutableSubmorphs[0].selected=!0}},
{key:"removeAllButtons",value:function(){this.removeAllMorphs();this.height=10}},{key:"addButton",value:function(a,e){var n=new ch.RadioButton;n.reset();n.morph=a;void 0!=e&&(n.internalValue=e,n.valueFunctionString="function (morph) { return morph.owner.internalValue; }");this.addMorph(n);return n}},{key:"setSelection",value:function(a){this.submorphs.forEach(function(e){e!==a&&(e.selected=!1)});a.selected=!0}},{key:"selectedButton",get:function(){return this.submorphs.find(function(a){return a.selected})}},
{key:"value",get:function(){var a=this.selectedButton;return a?a.value:null}},{key:"value",set:function(a){var e=this.submorphs.find(function(n){try{return n.value===a}catch(q){return!1}});e?e.select():this.setSelection(null)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RadioButtonGroup"}},{key:"properties",get:function(){return{choices:{derived:!0,defaultValue:[],get:function(){return this.submorphs.map(function(a){return a.value})},set:function(a){var e=this;this.removeAllButtons();
if(ch.obj.isArray(a)){if(0==a.length)return;a.forEach(function(n){e.addButton(ch.morph({name:"label",type:"label",value:n,reactsToPointer:!1}))})}else{a=[].concat($jscomp.arrayFromIterable(a.entries()));if(0==a.length)return;a.forEach(function(n){var q=$jscomp.makeIterator(n);n=q.next().value;q=q.next().value;e.addButton(ch.morph({name:"label",type:"label",value:n,reactsToPointer:!1}),q)})}this.submorphs[0].master.whenApplied().then(function(){return e.setSelection(e.submorphs[0])})},value:{derived:!0,
after:["submorphs"],get:function(){var a=this.selectedButton;return a?a.value:null},set:function(a){var e=this.submorphs.find(function(n){try{return n.value===a}catch(q){return!1}});e?e.select():this.setSelection(null)}}}}}}],d,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10688,end:13602})}(ch.Morph);
ch.RadioButtonGroup=WC;ch.RadioButtonGroup=WC;ch.RadioButtonGroup=WC;var Exa=Object.freeze({__proto__:null,Button:ez,RadioButton:VC,RadioButtonGroup:WC}),rd=lively.FreezerRuntime.recorderFor("lively.components/list.js");rd.asItem=pI;rd.Morph=xj;rd.VerticalLayout=Dr;rd.Text=zp;rd.StyleSheet=Eq;rd.Label=Ap;rd.Icon=rm;rd.morph=zj;rd.touchInputDevice=qm;rd.pt=xh;rd.LinearGradient=Xk;rd.Color=If;rd.Rectangle=ie;rd.rect=cl;rd.arr=cf;rd.Path=Eg;rd.string=Ng;rd.signal=Jk;rd.noUpdate=ns;rd.once=Sq;rd.Button=
ez;rd.bowser=qo;rd.asItem=pI;rd.asItem=pI;var $K=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),h=d.hasOwnProperty("ListItemMorph")&&"function"===typeof d.ListItemMorph?d.ListItemMorph:d.ListItemMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"displayItem",value:function(a,e,n,q,r,v,y){v=void 0===v?!1:v;var D=a.morph,E=D?"":a.label||a.string||"no item.string";
a.annotation?this.valueAndAnnotation={value:E,annotation:a.annotation}:"string"===typeof E?this.textString=E:this.value=E;this.tooltip=a.tooltip||this.tooltip||this.textString;0==a.tooltip&&(this.tooltip=!1);this.itemIndex=e;this.position=r;if(y){e=y.fontFamily;r=y.selectionColor;E=y.selectionFontColor;var I=y.nonSelectionFontColor,K=y.borderRadius,P=y.fontSize;y=y.padding;E&&this.selectionFontColor!==E&&(this.selectionFontColor=E);I&&this.nonSelectionFontColor!==I&&(this.nonSelectionFontColor=I);
r&&this.selectionColor!==r&&(this.selectionColor=r);K&&K!=this.borderRadius&&(this.borderRadius=K);P&&this.fontSize!==P&&(this.fontSize=P);e&&this.fontFamily!==e&&(this.fontFamily=e);y&&!this.padding.equals(y)&&(this.padding=y)}a.autoFit&&(D.width=n);this.extent=rd.pt(D?Math.max(D.width,n):n,q);D?(a=D.getTransform().copy(),this.submorphs=[D],D.setTransform(a),D.position=rd.pt(0,0)):this.submorphs.length&&(this.submorphs=[]);this.isSelected=v}},{key:"onDragStart",value:function(a){var e=this.owner.owner;
this._dragState={sourceIsSelected:this.isSelected,source:this,itemsTouched:[]};if(!e.multiSelect||!e.multiSelectViaDrag)e.onItemMorphDragged(a,this)}},{key:"onMouseDown",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onMouseDown",this).call(this,a);this.owner.owner.clickOnItem(a)}},{key:"onDrag",value:function(a){var e=this.owner.owner;if(e.multiSelect&&e.multiSelectViaDrag){a=a.hand.morphBeneath(a.position);var n=e.selectedIndexes,q=e.itemMorphs;a!==this&&q.includes(a)&&(this._dragState.sourceIsSelected&&
!a.isSelected?(rd.arr.pushIfNotIncluded(n,a.itemIndex),e.selectedIndexes=n):!this._dragState.sourceIsSelected&&a.isSelected&&(rd.arr.remove(n,a.itemIndex),e.selectedIndexes=n))}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListItemMorph"}},{key:"properties",get:function(){return{clipMode:{defaultValue:"hidden"},autofit:{defaultValue:!1},isSelected:{defaultValue:!1},draggable:{defaultValue:!rd.touchInputDevice},fill:{derived:!0,get:function(){return rd.touchInputDevice&&this.pressed?
rd.Color.gray.withA(.5):this.isSelected?this.selectionColor:rd.Color.transparent}},itemIndex:{defaultValue:void 0},selectionFontColor:{isStyleProp:!0,defaultValue:rd.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:rd.Color.blue},nonSelectionFontColor:{isStyleProp:!0,defaultValue:rd.Color.rgbHex("333")},fontColor:{derived:!0,get:function(){return this.isSelected?this.selectionFontColor:this.nonSelectionFontColor}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:940,end:5208})}(rd.Label);rd.ListItemMorph=$K;rd.ListItemMorph=$K;rd.ListItemMorph=$K;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),h=d.hasOwnProperty("ListScroller")&&"function"===typeof d.ListScroller?d.ListScroller:d.ListScroller=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ac(h,b,[{key:"onScroll",value:function(a){return this.owner.update()}},{key:"onMouseDown",value:function(a){var e=this,n=this.scroll.y;if(rd.touchInputDevice){var q=this.owner.itemForClick(a);q&&(q.pressed=!0,q.makeDirty(),setTimeout(function(){q.pressed=!1;if(0==n-e.scroll.y)return e.owner.clickOnItem(a)},300))}else return this.owner.clickOnItem(a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListScroller"}},{key:"properties",get:function(){return{name:{defaultValue:"scroller"},
fill:{defaultValue:rd.Color.transparent},clipMode:{defaultValue:"auto"},scrollbar:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.submorphs[0]}},submorphs:{initialize:function(){this.submorphs=[{name:"scrollbar"}]}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5210,
end:6172})})(rd.Morph);rd.listCommands=[{name:"page up",exec:function(b){b.gotoIndex(Math.max(0,b.selectedIndex-Math.round(b.height/b.itemHeight)));return!0}},{name:"page down",exec:function(b){b.gotoIndex(Math.min(b.items.length-1,b.selectedIndex+Math.round(b.height/b.itemHeight)));return!0}},{name:"goto first item",exec:function(b){b.gotoIndex(0);return!0}},{name:"goto last item",exec:function(b){b.gotoIndex(b.items.length-1);return!0}},{name:"arrow up",exec:function(b){b.gotoIndex(b.indexUp());
return!0}},{name:"arrow down",exec:function(b){b.gotoIndex(b.indexDown());return!0}},{name:"select up",exec:function(b){var d=b.selectedIndexes;if(!b.multiSelect||!d.length)return b.execCommand("arrow up");var h=d[0];if("number"!==typeof h)b.selectedIndexes=[h];else{var a=b.indexUp(h);d.includes(h)&&d.includes(a)?b.selectedIndexes=d.filter(function(e){return e!==h}):b.selectedIndexes=[a].concat(d.filter(function(e){return e!==a}))}return!0}},{name:"select down",exec:function(b){var d=b.selectedIndexes;
if(!b.multiSelect||!d.length)return b.execCommand("arrow down");var h=d[0],a=b.indexDown(h);d.includes(h)&&d.includes(a)?b.selectedIndexes=d.filter(function(e){return e!==h}):b.selectedIndexes=[a].concat(d.filter(function(e){return e!==a}));return!0}},{name:"select all",exec:function(b){b.selectedIndexes=rd.arr.range(b.items.length-1,0);b.scrollIndexIntoView(b.selectedIndexes[0]);return!0}},{name:"select via filter",exec:function(b){var d,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return d=b.selectedIndex||0,e.yield(b.world().filterableListPrompt("Select item",b.items,{preselect:d,requester:b.getWindow()||b,itemPadding:rd.Rectangle.inset(0,2),multiSelect:!0}),2);h=e.yieldResult;a=h.selected;a.length&&(b.multiSelect?b.selections=a:b.selection=a[0],b.scrollSelectionIntoView(),b.update());return e.return(!0)})}},{name:"realign top-bottom-center",exec:function(b){if(b.selection){var d=b.padding,h=b.itemHeight,a=b.scroll,e=a.x;a=a.y;var n=rd.pt(0,b.selectedIndex*h);
d=b.height-h-d.top()-d.bottom();a=2>Math.abs(n.y-a)?n.y-d:2>Math.abs(n.y-a-.5*d)?n.y:n.y-.5*d;b.scroll=rd.pt(e,a);return!0}}},{name:"print contents in text window",exec:function(b){var d="items of "+b.name,h=b.items.map(function(a){if("string"===typeof a)return a;var e=a.string,n=a.label;a=a.annotation;var q="";n?q="string"===typeof n?q+n:q+n.map(function(r,v){return 0==v%2?r:""}).join(""):e&&(q+=e);a&&(q+=" ",q="string"===typeof a?q+a:q+a[0]);return q}).join("\n");return b.world().execCommand("open text window",
{title:d,content:h,name:d,fontFamily:"Monaco, monospace"})}}];var fz=Ka("L",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),h=d.hasOwnProperty("List")&&"function"===typeof d.List?d.List:d.List=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"__additionally_serialize__",value:function(a,e,n,q){var r=this;ac._get(Object.getPrototypeOf(h.prototype),"__additionally_serialize__",
this).call(this,a,e,n,q);this.whenRendered().then(function(){return r.update()})}},{key:"onLoad",value:function(){this.scroller.visible=rd.touchInputDevice}},{key:"initializeSubmorphs",value:function(a){this.submorphs=a=a||this.submorphs||[];for(var e=0;e<a.length;e++)switch(a[e].name){case "listItemContainer":var n=a[e];continue;case "scroller":var q=a[e]}q||(q=this.addMorph(new rd.ListScroller({draggable:!1,grabbable:!1,acceptsDrops:!1,halosEnabled:!1,name:"scroller"})));n||this.addMorph({name:"listItemContainer",
fill:rd.Color.transparent,halosEnabled:!1,reactsToPointer:!1,acceptsDrops:!1,draggable:!1});(n||q)&&this.update()}},{key:"isList",get:function(){return!0}},{key:"onChange",value:function(a){"fontFamily fontColor fontSize padding selectionFontColor selectionColor nonSelectionFontColor itemPadding items".split(" ").includes(a.prop)&&this.update();return ac._get(Object.getPrototypeOf(h.prototype),"onChange",this).call(this,a)}},{key:"itemForClick",value:function(a){a=a.positionIn(this.world()).subPt(this.scroll);
a=this.listItemContainer.morphsContainingPoint(a);return a.find(function(e){return e.isListItem})||a[0]}},{key:"clickOnItem",value:function(a){var e=this.itemForClick(a),n=a.state.clickCount;if(!(a.positionIn(this).x>this.width-this.scrollbarOffset.x))this[2===n?"onItemMorphDoubleClicked":"onItemMorphClicked"](a,e)}},{key:"connections",get:function(){return{selection:{signalOnAssignment:!1}}}},{key:"invalidateCache",value:function(){this.manualItemHeight||this.setProperty("itemHeight",null)}},{key:"find",
value:function(a){return this.items.find(function(e){return e===a||e.value===a})}},{key:"findIndex",value:function(a){return this.items.findIndex(function(e){return e===a||e.value===a})}},{key:"addItem",value:function(a){return this.addItemAt(a)}},{key:"addItemAt",value:function(a,e){var n=this;e=void 0===e?this.items.length:e;var q=this.items;e=Math.min(q.length,Math.max(0,e));q.splice(e,0,rd.asItem(a));this.addMethodCallChangeDoing({target:this,selector:"addItemAt",args:[a,e],undo:{target:this,
selector:"removeItem",args:[a]}},function(){return n.update()})}},{key:"removeItem",value:function(a){var e=this;a=this.find(a);var n=this.items,q=n.indexOf(a);-1!==q&&(n.splice(q,1),this.addMethodCallChangeDoing({target:this,selector:"removeItem",args:[a],undo:{target:this,selector:"addItemAt",args:[a,q]}},function(){return e.update()}))}},{key:"selectItemMorph",value:function(a){this.selectedIndexes=[a.itemIndex]}},{key:"gotoIndex",value:function(a){this.scrollIndexIntoView(this.selectedIndex=a)}},
{key:"indexUp",value:function(a){a="number"===typeof a?a:this.selectedIndex;return(a||this.items.length)-1}},{key:"indexDown",value:function(a){a=void 0===a?this.selectedIndex:a;return(("number"===typeof a?a:-1)+1)%this.items.length}},{key:"update",value:function(){var a=this,e=this.items;e&&this.scroller&&this.dontRecordChangesWhile(function(){var n=a.itemHeight,q=a.itemMorphs,r=a.listItemContainer,v=a.selectedIndexes,y=a.extent.y,D=a.fontSize,E=a.fontFamily,I=a.fontColor,K=a.padding,P=a.itemPadding,
N=a.selectionColor,aa=a.selectionFontColor,m=a.nonSelectionFontColor,t=a.itemBorderRadius,u=a.scrollBar,B=a.scroller,A=a.scrollable,H=B.scroll.y;K=K||rd.Rectangle.inset(0);var F=K.top(),L=K.left(),U=K.bottom();K=K.right();var T=Math.max(0,Math.floor(H/n)),Y=Math.min(e.length,T+y/n+2);y=0;K=a.width-(L+K);q=rd.arr.sortBy(q,function(ia){return ia.itemIndex});var wa=$jscomp.makeIterator(rd.arr.partition(q,function(ia){return ia.itemIndex<T}));q=wa.next().value;var Ga=wa.next().value;Ga=$jscomp.makeIterator(rd.arr.partition(Ga,
function(ia){return ia.itemIndex>Y-1}));wa=Ga.next().value;Ga=Ga.next().value;q=[].concat($jscomp.arrayFromIterable(wa),$jscomp.arrayFromIterable(Ga),$jscomp.arrayFromIterable(q));for(wa=0;wa<Y-T;wa++){Ga=T+wa;var na=e[Ga];if(!na){q.slice(wa).forEach(function(ia){ia.remove()});break}var ea={fontSize:D,fontFamily:E,fontColor:m||I,padding:P,borderRadius:t||0,selectionFontColor:aa,nonSelectionFontColor:m,selectionColor:N},da=q[wa];da||(da=q[wa]=r.addMorph(new rd.ListItemMorph(ea)));da.reactsToPointer=
!A;da.displayItem(na,Ga,K,n,rd.pt(0,n*Ga),v.includes(Ga),ea);y=Math.max(y,da.width)}q.slice(Y-T).forEach(function(ia){return ia.remove()});n=Math.max(F+U+n*e.length,a.height);r.setBounds(rd.pt(L,F).subXY(0,H).extent(rd.pt(a.width,n)));B.extent=a.extent.subXY(a.borderWidthRight,a.borderWidthBottom);u.left=y/2;B.position=rd.pt(0,0);u.extent=rd.pt(1,n)})}},{key:"scrollSelectionIntoView",value:function(){this.selection&&this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(a){var e=
this.itemHeight,n=this.itemScroll;a=new rd.Rectangle(0,a*e,this.width,e);e=this.innerBounds().insetByRect(this.padding).translatedBy(n);var q=0;a.bottom()>e.bottom()&&(q=a.bottom()-e.bottom());a.top()<e.top()&&(q=a.top()-e.top());this.itemScroll=n.addXY(0,q);this.update()}},{key:"onItemMorphDoubleClicked",value:function(a,e){}},{key:"onItemMorphClicked",value:function(a,e){var n=e.itemIndex;e=this.selectedIndexes;var q=e.includes(n),r=[];if(this.multiSelect)if(a.isShiftDown())if(q)r=e.filter(function(y){return y!=
n});else{a=e[0];var v="number"===typeof a?rd.arr.range(n,a):[n];r=v.concat(e.filter(function(y){return!v.includes(y)}))}else r=this.multiSelectWithSimpleClick||a.isCommandKey()?q?e.filter(function(y){return y!=n}):[n].concat(e.filter(function(y){return y!=n})):[n];else r=[n];this.selectedIndexes=r}},{key:"onItemMorphDragged",value:function(a,e){}},{key:"onHoverIn",value:function(a){this.scrollable&&(this.scroller.visible=!0)}},{key:"onHoverOut",value:function(a){rd.touchInputDevice||(this.scroller.visible=
!1)}},{key:"onDragStart",value:function(a){}},{key:"onDrag",value:function(a){}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-A",mac:"Meta-A"},command:"select all"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},
{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"}].concat(ac._get(Object.getPrototypeOf(h.prototype),"keybindings",this))}},{key:"commands",get:function(){return rd.listCommands}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"List"}},{key:"properties",get:function(){return{fill:{defaultValue:rd.Color.white},clipMode:{defaultValue:"hidden"},selectionFontColor:{isStyleProp:!0,defaultValue:rd.Color.white},selectionColor:{type:"ColorGradient",
isStyleProp:!0,defaultValue:rd.Color.rgb(21,101,192)},nonSelectionFontColor:{isStyleProp:!0,defaultValue:rd.Color.rgbHex("333")},fontColor:{isStyleProp:!0,defaultValue:rd.Color.rgbHex("333")},styleClasses:{defaultValue:["default"]},itemScroll:{derived:!0,after:["submorphs"],get:function(){return this.scroller?this.scroller.scroll:rd.pt(0,0)},set:function(a){this.scroller&&(this.scroller.scroll=a)}},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/list/light"}}},extent:{defaultValue:rd.pt(400,
360),set:function(a){a.eqPt(this.extent)||(this.setProperty("extent",a),this.update())}},fontFamily:{isStyleProp:!0,defaultValue:"Helvetica Neue, Arial, sans-serif",set:function(a){this.setProperty("fontFamily",a);this.invalidateCache()}},fontSize:{isStyleProp:!0,defaultValue:12,set:function(a){this.setProperty("fontSize",a);this.invalidateCache()}},padding:{isStyleProp:!0,defaultValue:rd.Rectangle.inset(3)},itemBorderRadius:{isStyleProp:!0,defaultValue:0,set:function(a){this.setProperty("itemBorderRadius",
a);this.invalidateCache()}},itemPadding:{isStyleProp:!0,defaultValue:rd.Rectangle.inset(1),set:function(a){this.setProperty("itemPadding",a);this.invalidateCache()}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(a){this.setProperty("items",a.map(rd.asItem));this.itemScroll=rd.pt(0,0);this.update();this.attributeConnections&&rd.signal(this,"values",this.values)}},multiSelect:{defaultValue:!1},multiSelectWithSimpleClick:{description:"Does a simple click toggle selections without deselecting?",
defaultValue:!1},multiSelectViaDrag:{description:"Does dragging extend selection?",defaultValue:!0},values:{group:"list",after:["items"],readOnly:!0,get:function(){return this.items.map(function(a){return a.value})}},selectedIndex:{group:"list",defaultValue:[],after:["selectedIndexes"],get:function(){return this.selectedIndexes[0]},set:function(a){return this.selectedIndexes="number"===typeof a?[a]:[]}},selectedIndexes:{get:function(){return this.getProperty("selectedIndexes")||[]},set:function(a){var e=
this.items.length;this.setProperty("selectedIndexes",(a||[]).filter(function(n){return 0<=n&&n<e}));this.update();rd.signal(this,"selection",this.selection)}},selection:{group:"list",after:["selections"],get:function(){return this.selections[0]},set:function(a){this.selections=[a]}},selections:{group:"list",after:["selectedIndexes"],get:function(){var a=this;return this.selectedIndexes.map(function(e){return a.items[e]&&a.items[e].value})},set:function(a){var e=this;this.selectedIndexes=a.map(function(n){return e.findIndex(n)})}},
selectedItems:{after:["selectedIndexes"],readOnly:!0,get:function(){var a=this;return this.selectedIndexes.map(function(e){return a.items[e]})}},submorphs:{initialize:function(a){this.initializeSubmorphs(a)}},listItemContainer:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("listItemContainer")}},itemMorphs:{after:["submorphs"],readOnly:!0,get:function(){return this.listItemContainer.submorphs}},scrollBar:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scrollbar")}},
scroller:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scroller")}},scrollable:{derived:!0,get:function(){return this.padding.top()+this.items.length*this.itemHeight>this.height}},manualItemHeight:{type:"Boolean"},itemHeight:{isStyleProp:!0,after:["fontFamily","fontSize","itemPadding"],defaultValue:10,set:function(a){this.setProperty("itemHeight",a);this.manualItemHeight="number"===typeof a;this.update()},get:function(){var a=this.getProperty("itemHeight");if(a)return a;
a=this.env.fontMetric.defaultLineHeight({fontFamily:this.fontFamily,fontSize:this.fontSize});var e=this.itemPadding;e&&(a+=e.top()+e.bottom());this.setProperty("itemHeight",a);return a}},theme:{after:["styleClasses"],defaultValue:"default",set:function(a){this.removeStyleClass(this.theme);this.addStyleClass(a);this.setProperty("theme",a)}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10576,end:27191})}(rd.Morph));rd.List=fz;rd.List=fz;rd.List=fz;rd.connect=Ik;var XC=Ka("ar",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),h=d.hasOwnProperty("FilterableList")&&"function"===typeof d.FilterableList?d.FilterableList:d.FilterableList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,
[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;a.bounds||a.extent||(a.extent=rd.pt(400,360));ac._get(Object.getPrototypeOf(h.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);rd.connect(this.inputMorph,"inputChanged",this,"updateFilter");rd.connect(this.listMorph,"selection",this,"selectionChanged");rd.connect(this.listMorph,"onItemMorphDoubleClicked",this,"acceptInput");this.updateFilter();rd.connect(this,"extent",this,"relayout")}},{key:"resetConnections",
value:function(){var a=this,e=this.attributeConnections;if(e){var n=["accepted","canceled","remove"];e.filter(function(q){return n.includes(q.sourceAttrName)&&q.targetObj!==a}).forEach(function(q){return q.disconnect()})}}},{key:"isList",get:function(){return!0}},{key:"relayout",value:function(){var a=this.listMorph,e=this.inputMorph,n=this.paddingMorph,q=this.borderWidth;e.topLeft=rd.pt(q,q);e.width=a.width=this.width-2*q;n&&(n.topLeft=e.bottomLeft);a.position=n?n.bottomLeft:e.bottomLeft;a.height=
Math.floor(this.height-a.top-q)}},{key:"focus",value:function(){this.get("input").focus()}},{key:"selectionChanged",value:function(a){rd.signal(this,"selection",a)}},{key:"scrollSelectionIntoView",value:function(){return this.listMorph.scrollSelectionIntoView()}},{key:"parseInput",value:function(){var a=this.get("input").textString,e=Array.from(a).reduce(function(q,r){if("\\"===r&&!q.escaped)return q.escaped=!0,q;" "!==r||q.escaped?(q.spaceSeen=!1,q.current+=r):(!q.spaceSeen&&q.current&&(q.tokens.push(q.current),
q.current=""),q.spaceSeen=!0);q.escaped=!1;return q},{tokens:[],current:"",escaped:!1,spaceSeen:!1});e.current&&e.tokens.push(e.current);var n=e.tokens.map(function(q){return q.toLowerCase()});return{tokens:e.tokens,lowercasedTokens:n,input:a}}},{key:"updateFilter",value:function(){var a=this,e=this.parseInput(),n=this.filterFunction,q=this.sortFunction,r=this.items.filter(function(D){return n.call(a,e,D)});q&&(r=rd.arr.sortBy(r,function(D){return q.call(a,e,D)}));var v=this.listMorph,y=this.updateSelectionsAfterFilter?
v.selectedIndexes.map(function(D){return r.indexOf(v.items[D])}).filter(function(D){return-1!==D}):v.selectedIndexes;v.items=r;v.selectedIndexes=y.length?y:r.length?[0]:[];this.scrollSelectionIntoView();rd.signal(this,"filterChanged",{parsedInput:e,items:v.items})}},{key:"acceptInput",value:function(){var a=this.listMorph;this.get("input").acceptInput();a={filtered:this.items,selected:a.selections,action:this.selectedAction,status:"accepted"};rd.signal(this,"accepted",a);return a}},{key:"keybindings",
get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Enter",command:"accept input"},{keys:"Escape|Ctrl-G",command:"cancel"},{keys:"Tab",command:"choose action"}].concat($jscomp.arrayFromIterable(rd.arr.range(0,
8).map(function(a){return{keys:"Alt-"+(a+1),command:{command:"choose action and accept input",args:{actionNo:a}}}}))).concat(ac._get(Object.getPrototypeOf(h.prototype),"keybindings",this))}},{key:"commands",get:function(){var a=this;return ac._get(Object.getPrototypeOf(h.prototype),"commands",this).concat([{name:"accept input",exec:function(e){a.acceptInput();return!0}},{name:"cancel",exec:function(e){rd.signal(e,"canceled");return!0}},{name:"choose action and accept input",exec:function(e,n){n=void 0===
n?{}:n;e.selectedAction=(e.actions||[])[void 0===n.actionNo?0:n.actionNo];return e.execCommand("accept input")}},{name:"choose action",exec:function(e){var n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(!e.actions)return v.return(!0);n=Object.assign({},e.style,{extent:e.extent});q=new rd.FilterableList(n);q.openInWorld(e.globalPosition);q.items=e.actions;r=e.actions.indexOf(e.selectedAction);-1===r&&(r=0);q.selectedIndex=r;rd.connect(q,"accepted",e,"selectedAction",{converter:function(y){this.targetObj.focus();
this.disconnect();this.sourceObj.remove();return y.selected[0]}});rd.connect(q,"canceled",e,"selectedAction",{converter:function(y){this.targetObj.focus();this.disconnect();this.sourceObj.remove();return this.targetObj.selectedAction}});q.focus();return v.return(!0)})}}].concat($jscomp.arrayFromIterable(rd.listCommands.map(function(e){return Object.assign({},e,{exec:function(n,q,r){return e.exec(a.listMorph,q,r)}})}))))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FilterableList"}},
{key:"properties",get:function(){return{fill:{defaultValue:rd.Color.transparent},borderWidth:{defaultValue:1},updateSelectionsAfterFilter:{defaultValue:!1},theme:{after:["styleClasses","listMorph"],defaultValue:"default",set:function(a){this.removeStyleClass(this.theme);this.listMorph.removeStyleClass(this.theme);this.addStyleClass(a);this.listMorph.addStyleClass(a);this.setProperty("theme",a)}},submorphs:{initialize:function(){var a=this;this.submorphs=[rd.Text.makeInputLine({name:"input",highlightWhenFocused:!1,
fixedHeight:!1,autofit:!1}),new rd.morph({name:"padding",fill:rd.Color.transparent}),new rd.List({name:"list",items:[]})];this.get("list").whenRendered().then(function(){return a.get("list").update()})}},paddingMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("padding")}},listMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("list")}},inputMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("input")}},
fontFamily:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontFamily},set:function(a){this.listMorph.fontFamily=a;this.inputMorph.fontFamily=a}},padding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.padding},set:function(a){this.listMorph.padding=a;this.inputMorph.padding=a}},fontSize:{isStyleProp:!0,group:"styling",derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontSize},set:function(a){this.listMorph.fontSize=
a}},itemPadding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.itemPadding},set:function(a){this.listMorph.itemPadding=a}},inputPadding:{isStyleProp:!0,derived:!0,after:["submorphs","padding"],get:function(){return this.inputMorph.padding},set:function(a){this.inputMorph.padding=a}},input:{derived:!0,after:["submorphs"],defaultValue:"",get:function(){return this.inputMorph.input},set:function(a){this.inputMorph.input=a}},historyId:{derived:!0,after:["submorphs"],
defaultValue:null,get:function(){return this.inputMorph.historyId},set:function(a){this.inputMorph.historyId=a}},multiSelect:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.multiSelect},set:function(a){this.listMorph.multiSelect=a}},items:{after:["submorphs","fuzzy","fuzzySortFunction","fuzzyFilterFunction"],defaultValue:[],set:function(a){this.setProperty("items",a.map(rd.asItem));this.updateFilter()}},visibleItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.items}},
selection:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selection},set:function(a){this.listMorph.selection=a}},selectedIndex:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndex},set:function(a){this.listMorph.selectedIndex=a}},selectedIndexes:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndexes},set:function(a){this.listMorph.selectedIndexes=a}},selectedItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedItems},
set:function(a){this.listMorph.selectedItems=a}},selections:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selections},set:function(a){this.listMorph.selections=a}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(a){this.setProperty("fuzzy",a);a?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=
null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var a=this.getProperty("filterFunction");if(!a)return this.defaultFilterFunction;"string"===typeof a&&(a=eval("("+a+")"));return a}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(a,e){return a.lowercasedTokens.every(function(n){return e.string.toLowerCase().includes(n)})})}},
fuzzySortFunction:{get:function(){var a=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(e,n){var q=String(rd.Path("string"===typeof a.fuzzy?a.fuzzy:"string").get(n)).toLowerCase(),r=0;e.lowercasedTokens.forEach(function(v){q.startsWith(v)?r-=10:q.includes(v)&&(r-=5)});return rd.arr.sum(e.lowercasedTokens.map(function(v){return rd.string.levenshtein(q.toLowerCase(),v)}))+r})}},fuzzyFilterFunction:{get:function(){var a=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=
function(e,n){var q="string"===typeof a.fuzzy?a.fuzzy:"string";if(e.lowercasedTokens.every(function(v){return n.string.toLowerCase().includes(v)}))return!0;var r=String(rd.Path(q).get(n)).toLowerCase();return 3>=rd.arr.sum(e.lowercasedTokens.map(function(v){return rd.string.levenshtein(r,v)}))})}},selectedAction:{get:function(){return this.getProperty("selectedAction")||"default"}},actions:{}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:27304,end:41783})}(rd.Morph));rd.FilterableList=XC;rd.FilterableList=XC;rd.FilterableList=XC;var YC=Ka("bC",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),h=d.hasOwnProperty("DropDownList")&&"function"===typeof d.DropDownList?d.DropDownList:d.DropDownList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ac(h,b,[{key:"fitLabelMorph",value:function(){}},{key:Symbol.for("lively-instance-initialize"),value:function(a){ac._get(Object.getPrototypeOf(h.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);rd.connect(this,"fire",this,"toggleList")}},{key:"onLoad",value:function(){this.listMorph.selection||(this.listMorph.selection=this.labelMorph.value[0])}},{key:"isListVisible",value:function(){return!!this.listMorph.world()}},{key:"removeWhenFocusLost",value:function(a){var e=
this;setTimeout(function(){var n=e.listMorph,q=e.world()&&e.world().focusedMorph;q!==n&&q!==e&&n.world()&&!n.withAllSubmorphsDetect(function(r){return r==q})?n.fadeOut(200):n.world()&&(n=rd.touchInputDevice?n.scroller:n,rd.once(n,"onBlur",e,"removeWhenFocusLost"),n.focus())},100)}},{key:"adjustLableFor",value:function(a){a=a.label||[a.string,null];a=[].concat($jscomp.arrayFromIterable(a),[" ",null],$jscomp.arrayFromIterable(rd.Icon.textAttribute("caret-"+("bottom"===this.listAlign?"down":"up"))));
a[5]&&(a[5].paddingRight="0px",a[5].textStyleClasses=["fa","annotation"]);this.label=a;this.relayout()}},{key:"toggleList",value:function(){var a=this,e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress){e=a.listMorph;if(a.isListVisible())return rd.signal(a,"deactivated"),a.selection=e.selection,e.epiMorph=!1,e.remove(),r.jumpTo(0);rd.signal(a,"activated");a.openListInWorld?(e.openInWorld(),e.epiMorph=!0,e.hasFixedPosition=!0,e.setTransform(a.getGlobalTransform()),
n=a.globalBounds()):(n=a.innerBounds(),a.addMorph(e));q=e.items.length*e.itemHeight+e.padding.top()+e.padding.bottom();e.extent=rd.pt(a.width,Math.min(a.listHeight,q));"top"===a.listAlign?e.bottomLeft=n.topLeft():e.topLeft=n.bottomLeft();e.moveBy(a.listOffset||rd.pt(0,0));rd.once(e,"onItemMorphClicked",a,"toggleList");rd.once(rd.touchInputDevice?e.scroller:e,"onBlur",a,"removeWhenFocusLost");return r.yield(e.whenRendered(),3)}if(4!=r.nextAddress)return r.yield(e.whenRendered(),4);rd.touchInputDevice?
e.scroller.focus():e.focus();e.scrollSelectionIntoView();r.jumpToEnd()})}},{key:"commands",get:function(){var a=this;return[{name:"accept",exec:function(){a.isListVisible()&&a.toggleList();return!0}},{name:"cancel",exec:function(){a.isListVisible()&&a.listMorph.remove();return!0}}].concat(ac._get(Object.getPrototypeOf(h.prototype),"commands",this))}},{key:"keybindings",get:function(){return ac._get(Object.getPrototypeOf(h.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept"},{keys:"Escape|Ctrl-G",
command:"cancel"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropDownList"}},{key:"properties",get:function(){return{padding:{defaultValue:rd.Rectangle.inset(3,2)},listHeight:{defaultValue:100},listAlign:{type:"Enum",values:["bottom","top"],defaultValue:"bottom"},listOffset:{isStyleProp:!0,defaultValue:rd.pt(0,0)},openListInWorld:{defaultValue:!1},listMorph:{after:["labelMorph"],get:function(){var a=this.getProperty("listMorph");if(a)return a;a=new rd.List({name:"dropDownList"});
this.setProperty("listMorph",a);return a}},items:{derived:!0,after:["listMorph"],get:function(){return this.listMorph.items},set:function(a){var e=this,n=this.items.find(function(q){return q.value==e.selection});this.listMorph.items=a;n&&rd.noUpdate(function(){e.selection=e.items[0].value})}},selection:{after:["listMorph","items"],derived:!0,get:function(){return this.listMorph.selection},set:function(a){var e=this.listMorph;if(a){var n=e.items,q=e.find(a);q||"string"!==typeof a||(q=n.find(function(r){return r.string===
a}));if(!q)return;this.adjustLableFor(q);e.selectedIndex=n.indexOf(q)}else e.selection=null,this.label="";rd.signal(this,"selection",e.selection)}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:41793,end:46875})}(rd.Button));rd.DropDownList=YC;rd.DropDownList=YC;rd.DropDownList=
YC;var aL=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),h=d.hasOwnProperty("InteractiveItem")&&"function"===typeof d.InteractiveItem?d.InteractiveItem:d.InteractiveItem=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"fit",value:function(){}},{key:"onHaloGrabover",value:function(a){this.list.showDropPreviewFor(this,a)}},{key:"onDrop",value:function(a){var e=this,n;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress){if(!e.item.isPreview)return q.jumpTo(0);n=a.hand.grabbedMorphs[0];ac._get(Object.getPrototypeOf(h.prototype),"onDrop",e).call(e,a);return q.yield(e.list.whenRendered(),3)}e.list.addItemAt({morph:n,isListItem:!0},e.itemIndex);e.list.clearPreviews();q.jumpToEnd()})}},{key:"select",value:function(){this.list.selectedIndex=this.itemIndex;this.item.morph.focus()}},{key:"onMouseDown",value:function(a){rd.touchInputDevice?
this._touchDown=Date.now():this.select()}},{key:"onMouseUp",value:function(a){rd.touchInputDevice&&500>Date.now()-this._touchDown&&this.select()}},{key:"displayItem",value:function(a,e,n,q,r,v,y){v=void 0===v?!1:v;ac._get(Object.getPrototypeOf(h.prototype),"displayItem",this).call(this,a,e,n,q,r,v,y);a.morph&&(a.morph.selected=v)}},{key:"onGrab",value:function(a){var e=this.list,n=a.halo&&a.halo.target===this;n&&a.halo.detachFromTarget();var q=this.submorphs.length?this.submorphs[0]:rd.morph({type:"label",
value:this.value});a.hand.grab(q);q.position=a.hand.localize(this.globalPosition);n&&a.halo.refocus(q);e.removeItem(this.list.items[this.itemIndex]);e.itemMorphs.forEach(function(r){return r.remove()});e.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveItem"}},{key:"properties",get:function(){return{draggable:{defaultValue:!rd.touchInputDevice},item:{derived:!0,get:function(){return this.list.items[this.itemIndex]}},list:{drived:!0,get:function(){return this.owner.owner}},
isListItem:{get:function(){return!0}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:46884,end:49133})}(rd.ListItemMorph);rd.InteractiveItem=aL;rd.InteractiveItem=aL;rd.InteractiveItem=aL;var bL=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),h=d.hasOwnProperty("MorphList")&&
"function"===typeof d.MorphList?d.MorphList:d.MorphList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"onLoad",value:function(){ac._get(Object.getPrototypeOf(h.prototype),"onLoad",this).call(this);this.clipMode=this.touchInput?"auto":"hidden"}},{key:"showDropPreviewFor",value:function(a,e){a=a.itemIndex;this.items[a].isPreview&&e||(this.clearPreviews(),e&&this.addItemAt({isListItem:!0,isPreview:!0,
morph:rd.morph({reactsToPointer:!1,acceptsDrops:!1,width:this.width-5,height:this.itemHeight,fill:rd.Color.orange.withA(.5)})},a))}},{key:"clearPreviews",value:function(){var a=this;this.items.filter(function(e){return e.morph&&e.morph.owner&&!rd.Path("morph.owner.isListItem").get(e)}).map(function(e){return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return n.return(a.removeItem(e))})});this.items.filter(function(e){return e.isPreview}).map(function(e){return a.removeItem(e)})}},{key:"update",
value:function(){var a=this,e=this.items;e&&this.listItemContainer&&(this.scroller&&(this.scroller.visible=!1),this.dontRecordChangesWhile(function(){var n=a.itemHeight,q=a.itemMorphs,r=a.listItemContainer,v=a.selectedIndexes,y=a.extent.y,D=a.fontSize,E=a.fontFamily,I=a.fontColor,K=a.padding,P=a.itemPadding,N=a.selectionColor,aa=a.selectionFontColor,m=a.nonSelectionFontColor,t=a.itemBorderRadius,u=a.scrollBar,B=a.scroll.y;K=K||rd.Rectangle.inset(0);var A=K.top(),H=K.left(),F=K.bottom();K=K.right();
var L=Math.max(0,Math.floor(B/n)),U=Math.min(e.length,Math.ceil((B+y)/n));y=0;B=a.width-(H+K);q=rd.arr.sortBy(q,function(wa){return wa.itemIndex});var T=$jscomp.makeIterator(rd.arr.partition(q,function(wa){return wa.itemIndex<L}));q=T.next().value;var Y=T.next().value;Y=$jscomp.makeIterator(rd.arr.partition(Y,function(wa){return wa.itemIndex>U}));T=Y.next().value;Y=Y.next().value;q=[].concat($jscomp.arrayFromIterable(T),$jscomp.arrayFromIterable(Y),$jscomp.arrayFromIterable(q));D={fontSize:D,fontFamily:E,
fontColor:m||I,padding:P,borderRadius:t||0,selectionFontColor:aa,nonSelectionFontColor:m,selectionColor:N};q.length&&U-L>q.length&&(L!=q[0].itemIndex?rd.arr.pushAt(q,r.addMorph(new rd.InteractiveItem(D)),0):U!=rd.arr.last(q).itemIndex&&q.push(r.addMorph(new rd.InteractiveItem(D))));for(E=0;E<U-L;E++){I=L+E;P=e[I];if(!P){q.slice(E).forEach(function(wa){return wa.remove()});break}N=q[E];N||(N=q[E]=r.addMorph(new rd.InteractiveItem(D)),N.clipMode="visible");N.displayItem(P,I,B,n,rd.pt(0,n*I),v.includes(I),
D);y=Math.max(y,N.width)}n=Math.max(A+F+n*e.length,a.height);v=rd.pt(a.width,n).subPt(rd.pt(H+K,0));r.setBounds(rd.pt(H,A).extent(v));u.left=y-10;u.fill=null;u.top=0;u.extent=rd.pt(1,n)}))}},{key:"onHoverIn",value:function(a){this.clipMode="auto"}},{key:"onHoverOut",value:function(a){this.touchInput||(this.clipMode="hidden")}},{key:"onScroll",value:function(a){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphList"}},{key:"properties",get:function(){return{touchInput:{get:function(){return rd.touchInputDevice}},
items:{group:"list",defaultValue:[],after:["submorphs"],set:function(a){this.setProperty("items",a.map(rd.asItem));this.itemMorphs.forEach(function(e){return e.remove()});this.update();this.attributeConnections&&rd.signal(this,"values",this.values)}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},
{start:49142,end:54374})}(rd.List);rd.MorphList=bL;rd.MorphList=bL;rd.MorphList=bL;var Fxa=Object.freeze({__proto__:null,asItem:pI,ListItemMorph:$K,List:fz,FilterableList:XC,DropDownList:YC,InteractiveItem:aL,MorphList:bL}),pg=lively.FreezerRuntime.recorderFor("lively.components/menus.js");pg.Label=Ap;pg.config=Yk;pg.Morph=xj;pg.obj=xf;pg.promise=bg;pg.fun=ik;pg.pt=xh;pg.Color=If;pg.Rectangle=ie;var cL=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),h=d.hasOwnProperty("MenuDivider")&&
"function"===typeof d.MenuDivider?d.MenuDivider:d.MenuDivider=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuDivider"}},{key:"properties",get:function(){return{isMenuDevider:{defaultValue:!0},fill:{defaultValue:pg.Color.gray.lighter()},extent:{defaultValue:pg.pt(100,5)},reactsToPointer:{defaultValue:!1}}}}],d,{pathInPackage:function(){return"menus.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:168,end:444})}(pg.Morph);pg.MenuDivider=cL;pg.MenuDivider=cL;pg.MenuDivider=cL;var dL=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),h=d.hasOwnProperty("MenuItem")&&"function"===typeof d.MenuItem?d.MenuItem:d.MenuItem=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"onHoverIn",value:function(a){var e=this;this.owner.itemMorphs.forEach(function(n){return n!==e&&(n.selected=!1)});this.selected=!0;this.submenu&&this.owner.openSubMenuDelayed(a,this,this.submenu)}},{key:"onHoverOut",value:function(a){var e=this,n=a.hand;setTimeout(function(){(e.owner?e.owner.submenus:[]).some(function(q){return q.fullContainsWorldPoint(n.globalPosition)})||(e.selected=!1)},20);this.owner.maybeRemoveSubmenu()}},
{key:"onMouseDown",value:function(a){var e=this,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress){if(e.submenu)return r.return();r.setCatchFinallyBlocks(2);e.owner.startFinish();if("function"!==typeof e.action)throw Error("Menu item "+e.textString+" has no executable action!");return r.yield(e.action(),4)}if(2!=r.nextAddress)return e.owner.completeFinish(),r.leaveTryBlock(0);n=r.enterCatchBlock();(q=e.world())?q.logError(n):console.error(n);r.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuItem"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},fill:{defaultValue:pg.Color.transparent},fontSize:{defaultValue:14},draggable:{defaultValue:!1},readOnly:{defaultValue:!0},nativeCursor:{defaultValue:"pointer"},selected:{defaultValue:!1,set:function(a){this.selected!==a&&(this.addValueChange("selected",a),a?(this.fontColor=pg.Color.white,this.fill=
pg.Color.rgb(21,101,192)):(this.fill=pg.Color.transparent,this.fontColor=pg.Color.black))}},isMenuItem:{derived:!0,readOnly:!0,get:function(){return!0}},label:{get:function(){return this.valueAndAnnotation.value.map(function(a,e){return 0===e%2?a:""}).join("\n")},set:function(a){this.valueAndAnnotation={value:a,annotation:this.annotation}}},annotation:{get:function(){return this.valueAndAnnotation.annotation},set:function(a){this.valueAndAnnotation={value:this.value,annotation:a}}},action:{},submenu:{}}}}],
d,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:453,end:2976})}(pg.Label);pg.MenuItem=dL;pg.MenuItem=dL;pg.MenuItem=dL;pg.invalidItem={string:"invalid item",action:function(){return $world.setStatusMessage("invalid item")}};var eL=Ka("h",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),
h=d.hasOwnProperty("Menu")&&"function"===typeof d.Menu?d.Menu:d.Menu=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"startFinish",value:function(){this.ownerMenu&&this.ownerMenu.startFinish();this._waitingForFinish=!0}},{key:"completeFinish",value:function(){this.ownerMenu&&this.ownerMenu.completeFinish();this.finishedPromise.resolve(!0)}},{key:"whenFinished",value:function(){return this.finishedPromise.promise}},
{key:"onChange",value:function(a){switch(a.prop){case "itemPadding":case "fontSize":case "fontFamily":this.updateMorphs()}ac._get(Object.getPrototypeOf(h.prototype),"onChange",this).call(this,a)}},{key:"remove",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(a.animate({opacity:0,duration:300}),2);a._waitingForFinish||a.completeFinish();ac._get(Object.getPrototypeOf(h.prototype),"remove",a).call(a);e.jumpToEnd()})}},{key:"ensureItem",
value:function(a){if(!a)return pg.invalidItem;if(a.title)return this.title=a.title,null;if(a.isDivider)return a;if(a.hasOwnProperty("string")&&a.hasOwnProperty("action"))return pg.obj.select(a,["string","action","annotation"]);if(Array.isArray(a)){var e=$jscomp.makeIterator(a),n=e.next().value;e=e.next().value;return"string"===typeof n||Array.isArray(n)?e&&"function"!==typeof e?"object"===typeof e&&e.getItems?{label:n,submenu:e.getItems,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:
Array.isArray(e)?{label:n,submenu:e,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:pg.invalidItem:{label:n,action:e||function(){return $world.setStatusMessage(n)}}:pg.invalidItem}if(a.command){var q=a.command,r=a.showKeyShortcuts,v=a.target;e=a.alias;var y=a.args;a=a.tooltip;if(!q||!v)return pg.invalidItem;void 0===r&&(r=!0);r=r?"string"===typeof r?r:v.keysForCommand(q):null;return{tooltip:a,string:e||q,annotation:r?["\t"+r,{fontSize:"70%"}]:["",{}],action:function(){return v.execCommand(q,
y)}}}return pg.invalidItem}},{key:"updateMorphs",value:function(){var a=this;this.submorphs=[];var e=this.padding.left(),n=this.padding.right(),q=this.padding.top(),r=this.padding.bottom(),v=0,y=pg.pt(e,q),D={};this.fontFamily&&(D.fontFamily=this.fontFamily);this.fontSize&&(D.fontSize=this.fontSize);this.itemPadding&&(D.padding=this.itemPadding);this.title&&(q=this.addMorph(Object.assign({type:"label",value:this.title,name:"title",position:y,fontWeight:"bold"},D)),y=q.bottomLeft,v=Math.max(q.width,
v));this.items.forEach(function(E){var I=E.label,K=E.string,P=E.annotation,N=E.action,aa=E.submenu,m=E.tooltip;E=a.addMorph(E.isDivider?new pg.MenuDivider({position:y}):new pg.MenuItem(Object.assign({label:I||K,annotation:P,action:N,submenu:aa,tooltip:m,position:y},D)));y=E.bottomLeft;v=Math.max(E.width,v)});this.submorphs.forEach(function(E){E.isLabel&&(E.fit(),E.autofit=!1,E.fixedWidth=!0,E.fixedHeight=!0);E.width=v});this.extent=pg.pt(v+n+e,y.y+r)}},{key:"openSubMenuDelayed",value:function(a,e,
n){var q=this;this.openingSubMenuProcess&&clearTimeout(this.openingSubMenuProcess);this.openingSubMenuProcess=setTimeout(function(){try{q.openSubMenu(a,e,n)}catch(v){var r=q.world();r?r.logError(v):console.error(v)}},200)}},{key:"openSubMenu",value:function(a,e,n){if(e.selected){var q=this.submenu;if(q){if(q.ownerItemMorph===e||this.morphsContainingPoint(a.position).includes(q))return;this.removeSubMenu()}"function"===typeof n&&(n=n());a=this.submenu=this.addMorph(new pg.Menu({items:n,ownerItemMorph:e,
ownerMenu:this}));a.updateMorphs();a.offsetForOwnerMenu()}}},{key:"maybeRemoveSubmenu",value:function(){var a=this;pg.fun.debounceNamed(this.id+"-maybeRemoveSubmenu",300,function(){var e=a.world();if(e){var n=a.submenu,q=a.selectedItemMorph;e=e&&n&&n.fullContainsWorldPoint(e.firstHand.position);n&&n.ownerItemMorph!==q&&!n.ownerItemMorph.selected&&(e?(q&&(q.selected=!1),n.ownerItemMorph.selected=!0):a.removeSubMenu())}})();return this.removeOnMouseOut}},{key:"removeSubMenu",value:function(){if(this.submenu){var a=
this.submenu;this.submenu=a.ownerMenu=null;a.remove()}}},{key:"moveBoundsForVisibility",value:function(a,e){var n=0,q=0;a.right()>e.right()&&(n=-1*(a.right()-e.right()));var r=a.left()+n;0>r&&(n+=-r);a.bottom()>e.bottom()&&(q=-1*(a.bottom()-e.bottom()),n+=1);e=a.top()+q;0>e&&(q+=-e);return a.translatedBy(pg.pt(n,q))}},{key:"moveSubMenuBoundsForVisibility",value:function(a,e,n,q){q||(q=e.right()+a.width>n.right()?"left":"right");a=a.extent();a="left"===q?e.topLeft().addXY(-a.x,0).extent(a):e.topRight().extent(a);
a.bottom()>n.bottom()&&(e=-1*(a.bottom()-n.bottom()),a=a.translatedBy(pg.pt(0,e)));a.top()<n.top()&&(n=n.top()-a.top(),a=a.translatedBy(pg.pt(0,n)));return a}},{key:"offsetForOwnerMenu",value:function(){var a=this.ownerMenu,e=this.world().visibleBounds(),n=a.getGlobalTransform().inverse().transformRectToRect(e);a=this.clipForVisibility(this.moveSubMenuBoundsForVisibility(this.innerBounds(),a.selectedItemMorph?a.selectedItemMorph.bounds():a.innerBounds(),n),e);this.setBounds(a)}},{key:"clipForVisibility",
value:function(a,e){a=void 0===a?this.bounds():a;e=void 0===e?this.world().visibleBounds():e;var n=this.transformRectToMorph(this.world(),a.withX(0).withY(0));e.containsRect(n.insetBy(10))||(a=a.withExtent(pg.pt(5+a.width,Math.min(n.height,e.height))));return a}},{key:"offsetForWorld",value:function(a){a=this.innerBounds().translatedBy(a);if(this.owner.visibleBounds){var e=this.owner.visibleBounds();a=this.clipForVisibility(this.moveBoundsForVisibility(a,e),e)}this.setBounds(a)}},{key:"onHoverOut",
value:function(){this.removeOnMouseOut&&this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Menu"}},{key:"forItems",value:function(a,e){e=void 0===e?{title:""}:e;return new this(Object.assign({},e,{items:a}))}},{key:"openAt",value:function(a,e,n){n=void 0===n?{title:""}:n;e=this.forItems(e,n).openInWorldNear(a);e.offsetForWorld(a);return e}},{key:"openAtHand",value:function(a,e){e=void 0===e?{title:""}:e;var n=e.hand;a=this.forItems(a,pg.obj.dissoc(e,["hand"]));n=n?n.position:
pg.pt(0,0);a.titleMorph&&(n=n.addXY(0,-a.titleMorph.height));a.openInWorld(n);a.offsetForWorld(n);return a}},{key:"properties",get:function(){return{dropShadow:{initialize:function(){if(pg.config.fastShadows||!this.ownerMenu)this.dropShadow=!0,this.dropShadow.fast=!1}},submorphs:{initialize:function(){this.updateMorphs()}},epiMorph:{defaultValue:!0},acceptsDrops:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},padding:{defaultValue:pg.Rectangle.inset(0,2)},itemPadding:{defaultValue:pg.Rectangle.inset(8,
4)},borderWidth:{defaultValue:1},fill:{defaultValue:pg.Color.white},borderColor:{defaultValue:pg.Color.gray.lighter()},borderRadius:{defaultValue:4},opacity:{defaultValue:.95},fontSize:{defaultValue:16},title:{get:function(){return this.getProperty("title")},set:function(a){this.addValueChange("title",a)}},finishedPromise:{initialize:function(){this.finishedPromise=pg.promise.deferred()}},ownerMenu:{},submenu:{},styleClasses:{defaultValue:["Halo"]},submenus:{readOnly:!0,get:function(){return this.submenu?
[this.submenu].concat(this.submenu.submenus):[]}},ownerItemMorph:{},removeOnMouseOut:{},items:{set:function(a){a=a.map(this.ensureItem.bind(this)).filter(Boolean);this.setProperty("items",a)}},selectedItemMorph:{derived:!0,readOnly:!0,get:function(){return this.itemMorphs.find(function(a){return a.selected})}},titleMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("title")}},itemMorphs:{derived:!0,readOnly:!0,get:function(){return this.submorphs.filter(function(a){return a.isMenuItem})}}}}}],
d,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3089,end:16006})}(pg.Morph));pg.Menu=eL;pg.Menu=eL;pg.Menu=eL;var Gxa=Object.freeze({__proto__:null,MenuDivider:cL,MenuItem:dL,Menu:eL}),hj=lively.FreezerRuntime.recorderFor("lively.components/resizers.js");hj.arr=cf;hj.pt=xh;hj.Color=If;
hj.Morph=xj;var fL=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),h=d.hasOwnProperty("VerticalResizer")&&"function"===typeof d.VerticalResizer?d.VerticalResizer:d.VerticalResizer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"onDrag",value:function(a){this.movedHorizontallyBy(a.position.x-a.state.lastDragPosition.x)}},{key:"divideRelativeToParent",value:function(a){if(!(!this.owner||
"number"!==typeof a||0>a||1<a)){var e=this.owner.extent.x-this.extent.x;if(!(0>e)){var n=this.getRelativeDivide();this.movedHorizontallyBy(e*(a-n))}}}},{key:"getRelativeDivide",value:function(a){var e=this.bounds();a=e.left();e=this.owner.extent.x-e.width;return 0>e?NaN:a/e}},{key:"movedHorizontallyBy",value:function(a){this.resizeIsSave(a)&&(this.fixed.concat(this.scalingRight).forEach(function(e){var n=e.position;e.position=hj.pt(n.x+a,n.y)}),this.scalingLeft.forEach(function(e){var n=e.extent;
e.extent=hj.pt(n.x+a,n.y)}),this.scalingRight.forEach(function(e){var n=e.extent;e.extent=hj.pt(n.x-a,n.y)}),this.position=this.position.addPt(hj.pt(a,0)))}},{key:"resizeIsSave",value:function(a){var e=this;return this.scalingLeft.every(function(n){return n.extent.x+a>=e.minWidth})&&this.scalingRight.every(function(n){return n.extent.x-a>=e.minWidth})}},{key:"addFixed",value:function(a){hj.arr.pushIfNotIncluded(this.fixed,a)}},{key:"addScalingLeft",value:function(a){hj.arr.pushIfNotIncluded(this.scalingLeft,
a)}},{key:"addScalingRight",value:function(a){hj.arr.pushIfNotIncluded(this.scalingRight,a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VerticalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:hj.Color.gray.lighter()},nativeCursor:{defaultValue:"ew-resize"},fixed:{defaultValue:[]},scalingLeft:{defaultValue:[]},scalingRight:{defualtValue:[]},minWidth:{defaultValue:20},draggable:{defaultValue:!0}}}}],d,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:128,end:2722})}(hj.Morph);hj.VerticalResizer=fL;hj.VerticalResizer=fL;hj.VerticalResizer=fL;var gL=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),h=d.hasOwnProperty("HorizontalResizer")&&"function"===typeof d.HorizontalResizer?d.HorizontalResizer:d.HorizontalResizer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"onDrag",value:function(a){this.movedVerticallyBy(a.position.y-a.state.lastDragPosition.y)}},{key:"divideRelativeToParent",value:function(a){if(!(!this.owner||"number"!==typeof a||0>a||1<a)){var e=this.owner.extent.y-this.extent.y;if(!(0>e)){var n=this.getRelativeDivide();this.movedVerticallyBy(e*(a-n))}}}},{key:"getRelativeDivide",value:function(a){var e=this.bounds();a=e.top();e=this.owner.extent.y-e.height;
return 0>e?NaN:a/e}},{key:"movedVerticallyBy",value:function(a){this.resizeIsSave(a)&&(this.fixed.concat(this.scalingBelow).forEach(function(e){var n=e.position;e.position=hj.pt(n.x,n.y+a)}),this.scalingAbove.forEach(function(e){var n=e.extent;e.extent=hj.pt(n.x,n.y+a)}),this.scalingBelow.forEach(function(e){var n=e.extent;e.extent=hj.pt(n.x,n.y-a)}),this.position=this.position.addPt(hj.pt(0,a)))}},{key:"resizeIsSave",value:function(a){var e=this;return this.scalingAbove.every(function(n){return n.extent.y+
a>=e.minHeight})&&this.scalingBelow.every(function(n){return n.extent.y-a>=e.minHeight})}},{key:"addFixed",value:function(a){hj.arr.pushIfNotIncluded(this.fixed,a)}},{key:"addScalingAbove",value:function(a){hj.arr.pushIfNotIncluded(this.scalingAbove,a)}},{key:"addScalingBelow",value:function(a){hj.arr.pushIfNotIncluded(this.scalingBelow,a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HorizontalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:hj.Color.gray.lighter()},
nativeCursor:{defaultValue:"ns-resize"},fixed:{defaultValue:[]},scalingBelow:{defaultValue:[]},scalingAbove:{defaultValue:[]},minHeight:{defaultValue:20},draggable:{defaultValue:!0}}}}],d,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:2731,end:5358})}(hj.Morph);hj.HorizontalResizer=
gL;hj.HorizontalResizer=gL;hj.HorizontalResizer=gL;var Hxa=Object.freeze({__proto__:null,VerticalResizer:fL,HorizontalResizer:gL}),Ff=lively.FreezerRuntime.recorderFor("lively.components/tree.js");Ff.arr=cf;Ff.fun=ik;Ff.obj=xf;Ff.tree=xr;Ff.string=Ng;Ff.promise=bg;Ff.pt=xh;Ff.Rectangle=ie;Ff.Color=If;Ff.Morph=xj;Ff.Text=zp;Ff.config=Yk;Ff.touchInputDevice=qm;Ff.Label=Ap;Ff.connect=Ik;Ff.signal=Jk;Ff.bowser=qo;var hL=Ka("bB",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),
h=d.hasOwnProperty("Tree")&&"function"===typeof d.Tree?d.Tree:d.Tree=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;if(!a.treeData)throw Error("Cannot create tree without TreeData!");ac._get(Object.getPrototypeOf(h.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.resetCache();this.update()}},{key:"onChange",
value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onChange",this).call(this,a);"fontSize fontColor selectionColor disableIndent nonSelectionFontColor selectionFontColor".split(" ").includes(a.prop)&&this.update(!0)}},{key:"resetCache",value:function(){this._lineHeightCache=null}},{key:"isTree",get:function(){return!0}},{key:"nodeStyle",get:function(){return{fontFamily:this.fontFamily,fontSize:this.fontSize,fontWeight:this.fontWeight,autofit:!this.resizeNodes}}},{key:"lineBounds",value:function(a){var e=
this.textLayout.charBoundsOfRow(this,a);a=Ff.Rectangle.fromLiteral(Ff.arr.first(e)).topLeft();e=Ff.Rectangle.fromLiteral(Ff.arr.last(e)).bottomRight();return Ff.Rectangle.fromAny(a,e)}},{key:"recoverOriginalLine",value:function(a){for(var e=this.document.getTextAndAttributesOfLine(a),n=0;n<e.length;n++){var q=this._originalColor[n];q&&!Ff.obj.isString(e[n])&&(e[n]?e[n].fontColor=q:e[n]={fontColor:q})}this.document.setTextAndAttributesOfLine(a,e)}},{key:"renderSelectedLine",value:function(a){var e=
this.document.getTextAndAttributesOfLine(a);this._originalColor=Array(e.length);for(var n=0;n<e.length;n++)0===n%2?e[n]&&e[n].isMorph&&(this._originalColor[n]=e[n]?e[n].fontColor||this.nonSelectionFontColor:null,e[n].fontColor=this.selectionFontColor,e[n].isSelected=!0):(this._originalColor[n]=(e[n]?e[n].fontColor:null)||this.nonSelectionFontColor,e[n]?e[n].fontColor=this.selectionFontColor:e[n]={fontColor:this.selectionFontColor});this.document.setTextAndAttributesOfLine(a,e);this.selectLine(a,!0);
this._lastSelectedIndex=this.selectedIndex}},{key:"computeTreeAttributes",value:function(a){if(!a.length)return[];for(var e=Ff.arr.genN(8*(a.length-1),function(){return null}),n=1,q,r,v=this.disableIndent?0:1.3*this.fontSize;n<a.length;n++){q=8*(n-1);r=this.selectedIndex==n;a[n].node.isSelected=r;e[q]=" ";e[q+1]={fontSize:v,fontColor:Ff.Color.transparent,textStyleClasses:["fas"],paddingRight:v*(a[n].depth-1)+"px"};e[q+3]={fontColor:Ff.Color.transparent,textStyleClasses:["fas"],paddingTop:this.fontSize/
10+"px",paddingRight:this.fontSize/8+"px"};this.treeData.isLeaf(a[n].node)?e[q+2]=this.disableIndent?"":"    ":(e[q+2]=this.treeData.isCollapsed(a[n].node)?" \uf0da ":" \uf0d7 ",Object.assign(e[q+3],{paddingRight:this.treeData.isCollapsed(a[n].node)?this.fontSize/4+"px":"0px",paddingTop:"0px",nativeCursor:"pointer",fontColor:this.fontColor}));var y=this.treeData.safeDisplay(a[n].node);y.isMorph&&(y._capturedProps&&Object.assign(y,y._capturedProps),r&&(y._capturedProps=Ff.obj.select(y,["fontColor"])),
y.fontColor=this.nonSelectionFontColor);e[q+4]=y;Ff.arr.isArray(y)?e[q+5]=[]:e[q+5]={fontColor:this.fontColor};e[q+6]="\n";e[q+7]={}}e.push(" ",{fontSize:1.3*this.fontSize,textStyleClasses:["far"]});return 1<a.length?Ff.arr.flatten(e):[]}},{key:"update",value:function(a){var e=this;if(!this._updating&&this.treeData&&this.nodeItemContainer){this._updating=!0;try{this.withMetaDo({isLayoutAction:!0},function(){var n=e.treeData.asListWithIndexAndDepth();e.treeData!==e.lastTreeData||e.lastNumberOfNodes!==
n.length||a?(e.replace({start:{row:0,column:0},end:e.documentEndPosition},e.computeTreeAttributes(n),!1,!1),e.invalidateTextLayout(!0,!1),e.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){e.makeDirty();q.jumpToEnd()})})):e._lastSelectedIndex&&e.recoverOriginalLine(e._lastSelectedIndex-1);e.lastTreeData=e.treeData;e.lastNumberOfNodes=n.length;e.cursorPosition={row:0,column:0};0<e.selectedIndex?e.renderSelectedLine(e.selectedIndex-1):(n=e.getProperty("selection"))&&
!n.isEmpty()&&n.collapse(n.lead)})}finally{this._updating=!1}}}},{key:"buildViewState",value:function(a){var e=this;"function"!==typeof a&&(a=function(r){return r});var n=this.selectedNode?a(this.selectedNode):null,q=new Map;Ff.tree.prewalk(this.treeData.root,function(r){return q.set(a(r),e.treeData.isCollapsed(r))},function(r){return e.treeData.getChildrenIfUncollapsed(r)});return{selectionId:n,collapsedMap:q,scroll:this.scroll}}},{key:"applyViewState",value:function(a,e){var n=this,q,r,v,y,D,E,
I,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){switch(P.nextAddress){case 1:"function"!==typeof e&&(e=function(N){return N}),q=a,r=q.selectionId,v=q.collapsedMap,y=q.scroll,D=0,E=-1;case 2:I=n.nodes;if(D>=I.length){P.jumpTo(3);break}K=e(I[D]);r===K&&(E=D);if(!v.has(K)||v.get(K)){P.jumpTo(4);break}return P.yield(n.treeData.collapse(I[D],!1),4);case 4:D++;P.jumpTo(2);break;case 3:return n.selectedIndex=E,n.update(),n.scroll=y,n.scrollSelectionIntoView(),P.yield(Ff.promise.delay(0),
0)}})}},{key:"maintainViewStateWhile",value:function(a,e){var n=this,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(q=n.buildViewState(e),r.yield(a(),2)):r.yield(n.applyViewState(q,e),0)})}},{key:"onNodeCollapseChanged",value:function(a){var e=a.node,n=a.isCollapsed,q=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return q.resetCache(),v.setCatchFinallyBlocks(2),v.yield(q.treeData.collapse(e,n),4);if(2!=v.nextAddress)return Ff.signal(q,
"nodeCollapseChanged",{node:e,isCollapsed:n}),q.update(),v.leaveTryBlock(0);r=v.enterCatchBlock();q.showError(r);v.jumpToEnd()})}},{key:"uncollapse",value:function(a){a=void 0===a?this.selectedNode:a;var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?a&&e.treeData.isCollapsed(a)?n.yield(e.onNodeCollapseChanged({node:a,isCollapsed:!1}),2):n.return():n.return(a)})}},{key:"collapse",value:function(a){a=void 0===a?this.selectedNode:a;var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==
n.nextAddress?!a||e.treeData.isCollapsed(a)?n.return():n.yield(e.onNodeCollapseChanged({node:a,isCollapsed:!0}),2):n.return(a)})}},{key:"selectedPath",value:function(){return this.treeData.pathOf(this.selectedNode)}},{key:"selectPath",value:function(a){var e=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(n=e,q.yield(e.treeData.followPath(a),2)):q.return(n.selectedNode=q.yieldResult)})}},{key:"gotoIndex",value:function(a){this.selectedNode=this.nodes[a];
this.scrollIndexIntoView(a)}},{key:"scrollSelectionIntoView",value:function(){this.selectedNode&&this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(a){this.scrollToIndex(a,"into view")}},{key:"centerSelection",value:function(){this.selectedNode&&this.scrollToIndex(this.selectedIndex,"center")}},{key:"scrollToIndex",value:function(a){this.scrollPositionIntoView({row:a-1,column:0})}},{key:"contextMenuForNode",value:function(a,e){Ff.signal(this,"contextMenuRequested",
{node:a,evt:e})}},{key:"onKeyDown",value:function(a){var e=this.world().focusedMorph;if(!e.isText||e.readOnly)return ac._get(Object.getPrototypeOf(h.prototype),"onKeyDown",this).call(this,a)}},{key:"onDragStart",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onDragStart",this).call(this,a);var e=this.textAttributeAtPoint(a.positionIn(this))||{},n=e.onDragStart,q=e.onDrag;e=e.onDragEnd;q&&(this._onDragHandler=q);e&&(this._onDragEndHandler=e);n&&n(a)}},{key:"onDrag",value:function(a){this._onDragHandler?
this._onDragHandler(a):ac._get(Object.getPrototypeOf(h.prototype),"onDrag",this).call(this,a)}},{key:"onDragEnd",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onDragEnd",this).call(this,a);delete this._onDragHandler;this._onDragEndHandler&&this._onDragEndHandler(a);delete this._onDragEndHandler}},{key:"onMouseDown",value:function(a){var e=this,n,q,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return n=e.textPositionFromPoint(a.positionIn(e)),
q=n.row,r=n.column,v=e.nodes[q+1],v?!e.treeData.isLeaf(v)&&4>r?E.yield(v.isCollapsed,3):(e.selectedIndex!=q+1&&(e.selectedIndex=q+1),E.jumpTo(2)):E.return();2!=E.nextAddress&&(E.yieldResult?e.uncollapse(v):e.collapse(v));y=e.textAttributeAt({row:q,column:r})||{};(D=y.onMouseDown)&&D(a);E.jumpToEnd()})}},{key:"onMouseUp",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onMouseUp",this).call(this,a);var e=(this.textAttributeAtPoint(a.positionIn(this))||{}).onMouseUp;e&&e(a)}},{key:"onHoverIn",
value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onHoverIn",this).call(this,a);this.activateOnHover&&(this.clipMode="auto")}},{key:"onHoverOut",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onHoverOut",this).call(this,a);!Ff.touchInputDevice&&this.activateOnHover&&(this.clipMode="hidden")}},{key:"onContextMenu",value:function(a){if(a.targetMorph===this){a.stop();var e=this.textPositionFromPoint(a.positionIn(this));(e=this.nodes[e.row+1])&&this.contextMenuForNode(e,a)}}},
{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"select node above"},{keys:"Down|Ctrl-N",command:"select node below"},{keys:"Left",command:"collapse selected node"},{keys:"Right",command:"uncollapse selected node"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"},
{keys:{mac:"Meta-[",win:"Ctrl-["},command:{command:"collapse or uncollapse all siblings",args:{what:"collapse"}}},{keys:{mac:"Meta-]",win:"Ctrl-]"},command:{command:"collapse or uncollapse all siblings",args:{what:"uncollapse"}}},{keys:"Alt-N",command:"goto next sibling"},{keys:"Alt-P",command:"goto prev sibling"},{keys:"Alt-U",command:"goto parent"}]}},{key:"commands",get:function(){return Ff.treeCommands}},{key:"highlightChangedNodes",value:function(a){this.treeData.diff(a).forEach(function(e){e=
$jscomp.makeIterator(e);var n=e.next().value;e.next();return n.renderedNode&&n.renderedNode.highlight()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Tree"}},{key:"properties",get:function(){return{selectionColor:{type:"ColorGradient",defaultValue:Ff.Color.rgb(21,101,192)},fontFamily:{defaultValue:Ff.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"auto"},selectable:{defaultValue:!1},acceptsDrops:{defaultValue:!1},fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},
disableIndent:{defaultValue:!1},activateOnHover:{defaultValue:!0},readOnly:{defaultValue:!0},lineHeight:{defaultValue:1.5},clipMode:{defaultValue:"auto"},padding:{defaultValue:Ff.Rectangle.inset(3)},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/tree/light"}}},resizeNodes:{defaultValue:!1,set:function(a){this.setProperty("resizeNodes",a);this.resetCache();this.update()}},treeData:{after:["selection"],set:function(a){this.setProperty("treeData",a);this.resetCache();this.update()}},
selectedIndex:{derived:!0,after:["selectedNode","nodes"],get:function(){return this.selectedNode?this.nodes.indexOf(this.selectedNode):-1},set:function(a){this.selectedNode=this.nodes[a]}},nodes:{derived:!0,after:["treeData"],get:function(){return this.treeData.asList()}},defaultViewState:{get:function(){return Object.assign({},ac._get(Object.getPrototypeOf(h),"prototype",this).defaultViewState,{fastScroll:!1})}},selectedNode:{set:function(a){this.setProperty("selectedNode",a);this.update()}},selectedNodeAndSiblings:{readOnly:!0,
derived:!0,after:["selectedNode","treeData"],get:function(){return this.selectedNode?this.treeData.nodeWithSiblings(this.selectedNode):[]}},selectionFontColor:{isStyleProp:!0,defaultValue:Ff.Color.white,set:function(a){this.setProperty("selectionFontColor",a)}},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Ff.Color.rgbHex("333"),set:function(a){this.setProperty("nonSelectionFontColor",a)}},nodeItemContainer:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this}},nodeMorphs:{derived:!0,
readOnly:!0,after:["submorphs"],get:function(){return this.nodeItemContainer.submorphs.slice()}}}}}],d,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:1472,end:17743})}(Ff.Text));Ff.Tree=hL;Ff.Tree=hL;Ff.Tree=hL;var iL=Ka("bz",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),
h=d.hasOwnProperty("TreeData")&&"function"===typeof d.TreeData?d.TreeData:d.TreeData=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.root=a;this.parentMap=new WeakMap}},{key:"__dont_serialize__",get:function(){return["parentMap"]}},{key:"__deserialize__",value:function(){this.parentMap=new WeakMap}},{key:"display",value:function(a){throw Error("Not yet implemented");
}},{key:"isCollapsed",value:function(a){throw Error("Not yet implemented");}},{key:"collapse",value:function(a,e){throw Error("Not yet implemented");}},{key:"getChildren",value:function(a){throw Error("Not yet implemented");}},{key:"isLeaf",value:function(a){throw Error("Not yet implemented");}},{key:"getChildrenIfUncollapsed",value:function(a){return this.isCollapsed(a)?[]:this.getChildren(a)}},{key:"safeDisplay",value:function(a){try{return this.display(a)}catch(e){return"[TreeData] Error when trying to display node: "+
e}}},{key:"nodeToString",value:function(a){a=this.safeDisplay(a);return"string"===typeof a?a:a&&Array.isArray(a)?a.map(function(e,n){return 0===n%2?e:""}).join(""):String(a)}},{key:"parentNode",value:function(a){var e=this;return this.parentMap.get(a)||Ff.tree.detect(this.root,function(n){return!e.isLeaf(n)&&e.getChildrenIfUncollapsed(n).includes(a)},function(n){return e.getChildrenIfUncollapsed(n)})}},{key:"nodeWithSiblings",value:function(a){return(a=this.parentNode(a))?this.getChildrenIfUncollapsed(a):
[]}},{key:"asList",value:function(){return this.asListWithIndexAndDepth().map(function(a){return a.node})}},{key:"asListWithIndexAndDepth",value:function(a){var e=this;a=void 0===a?!1:a;var n=[];Ff.tree.prewalk(this.root,function(q,r,v){return n.push({node:q,depth:v,i:r})},function(q){return e.getChildrenIfUncollapsed(q)});return a?Ff.arr.filter(n,a):n}},{key:"pathOf",value:function(a){for(var e=[];a;)e.unshift(a),a=this.parentNode(a);return e}},{key:"followPath",value:function(a,e,n){n=void 0===
n?this.root:n;var q=this,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:e||(e=function(I,K){return I===K});r=a.findIndex(function(I){return e(I,n)});a=a.slice(r+1);if(!a.length)return E.return(null);v=n;case 2:if(!a.length){E.jumpTo(3);break}if(!q.isCollapsed(v)){E.jumpTo(4);break}return E.yield(q.collapse(v,!1),4);case 4:y=a.shift();D=q.getChildrenIfUncollapsed(v).find(function(I){return e(y,I)});if(!D)throw Error("Cannot descend into tree, next node of "+
a.join(".")+" not found at "+q.safeDisplay(v));v=D;E.jumpTo(2);break;case 3:return E.return(v)}})}},{key:"diff",value:function(a){var e=[],n=this.asListWithIndexAndDepth();a=a.asListWithIndexAndDepth();if(n.length!=a.length)return[];n=$jscomp.makeIterator(Ff.arr.zip(n,a));for(a=n.next();!a.done;a=n.next()){var q=$jscomp.makeIterator(a.value);a=q.next().value;q=q.next().value;Ff.obj.equals(a.node.value,q&&q.node.value)||e.push([a.node,q.node])}return e}},{key:"patch",value:function(a){var e=this.diff(a);
if(0<e.length){a=$jscomp.makeIterator(e);for(e=a.next();!e.done;e=a.next()){var n=$jscomp.makeIterator(e.value);e=n.next().value;n=n.next().value;e.value=n.value}return this}return a}},{key:"uncollapseAll",value:function(a,e,n){e=void 0===e?0:e;var q=this,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){switch(D.nextAddress){case 1:if(n){D.jumpTo(2);break}return D.yield(q.uncollapseAll(a,e,q.root),3);case 3:return D.return(D.yieldResult);case 2:if(!a(n,e)){D.jumpTo(0);break}if(!n.isCollapsed){D.jumpTo(5);
break}return D.yield(q.collapse(n,!1),6);case 6:case 5:r=q.getChildren(n),y=D.forIn(r);case 7:if(null==(v=y.getNext()))D.jumpTo(0);else return D.yield(q.uncollapseAll(a,e+1,r[v]),7)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TreeData"}}],d,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:17752,end:22810})}(void 0));Ff.TreeData=iL;Ff.TreeData=iL;Ff.TreeData=iL;Ff.treeCommands=[{name:"select via filter",exec:function(b){var d,h,a,e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return d=b.treeData,d.asListWithIndexAndDepth(),d.asListWithIndexAndDepth().map(function(v){return Object.assign(v,{string:d.nodeToString(v.node)})}),h=Ff.string.lines(Ff.string.printTree(d.root,d.nodeToString.bind(d),d.getChildrenIfUncollapsed.bind(d))),
a=d.asList().map(function(v,y){return{isListItem:!0,string:h[y],value:v}}),r.yield(b.world().filterableListPrompt("Select item",a),2);e=r.yieldResult;n=$jscomp.makeIterator(e.selected);if(q=n.next().value)b.selectedNode=q,b.scrollSelectionIntoView();return r.return(!0)})}},{name:"page up",exec:function(b){b.scrollPageUp(1);var d=b.scroll,h=b.padding.top(),a=d.y;d=b.lineHeightCache.findIndex(function(e){return a<=(h+=e)});d--;b.gotoIndex(Math.max(1,d));return!0}},{name:"page down",exec:function(b){b.scrollPageDown(1);
var d=b.scroll,h=b.padding.top(),a=d.y+b.height;d=b.lineHeightCache.findIndex(function(e){return a<=(h+=e)});d--;b.gotoIndex(Math.min(d,b.nodes.length-1));return!0}},{name:"goto first item",exec:function(b){b.gotoIndex(1);return!0}},{name:"goto last item",exec:function(b){b.gotoIndex(b.nodes.length-1);return!0}},{name:"goto next sibling",exec:function(b){var d=b.selectedNodeAndSiblings;if(d=d[d.indexOf(b.selectedNode)+1])b.selectedNode=d,b.scrollSelectionIntoView();return!0}},{name:"goto prev sibling",
exec:function(b){var d=b.selectedNodeAndSiblings;if(d=d[d.indexOf(b.selectedNode)-1])b.selectedNode=d,b.scrollSelectionIntoView();return!0}},{name:"goto parent",exec:function(b){b.selectedNode&&(b.selectedNode=b.treeData.parentNode(b.selectedNode),b.scrollSelectionIntoView());return!0}},{name:"collapse selected node",exec:function(b){var d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return 1==h.nextAddress?(d=b.selectedNode,d?b.treeData.isCollapsed(d)?(b.selectedNode=b.treeData.parentNode(d),
b.scrollSelectionIntoView(),h.jumpTo(2)):h.yield(b.onNodeCollapseChanged({node:b.selectedNode,isCollapsed:!0}),2):h.return(!0)):h.return(!0)})}},{name:"uncollapse selected node",exec:function(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?b.selectedNode?d.yield(b.onNodeCollapseChanged({node:b.selectedNode,isCollapsed:!1}),2):d.jumpTo(2):d.return(!0)})}},{name:"collapse or uncollapse all siblings",exec:function(b,d){function h(E){return Ff.arr.filter(n.getChildrenIfUncollapsed(E),
function(I){return!n.isLeaf(I)})}function a(E,I){return Promise.all(E.map(function(K){return b.onNodeCollapseChanged({node:K,isCollapsed:I})}))}d=void 0===d?{what:"collapse"}:d;var e,n,q,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress){e="collapse"===d.what;n=b.treeData;if(e){if(n.isCollapsed(b.selectedNode))return E.return(!0);r=n.parentNode(b.selectedNode);v=-1;Ff.tree.prewalk(r,function(I,K,P){P<v||(P>v&&(v=P,q=[]),P===v&&Ff.arr.pushIfNotIncluded(q,n.parentNode(I)))},
n.getChildrenIfUncollapsed.bind(n))}else for(y=Ff.arr.compact([n.parentNode(b.selectedNode)]);y.length;){q=Ff.arr.flatmap(y,function(I){return h(I)});D=q.every(function(I){return n.isCollapsed(I)===e});if(!D)break;y=q}return E.yield(a(q,e),2)}b.scrollSelectionIntoView();return E.return(!0)})}},{name:"select node above",exec:function(b){var d=b.nodes,h=b.selectedIndex;1>=h&&(h=d.length);b.selectedNode=d[h-1];b.scrollSelectionIntoView();return!0}},{name:"select node below",exec:function(b){var d=b.nodes,
h=b.selectedIndex;if(-1>=h||h>=d.length-1)h=0;b.selectedNode=d[h+1];b.scrollSelectionIntoView();return!0}},{name:"realign top-bottom-center",exec:function(b){if(b.selectedNode){var d=b.scroll,h=d.x;d=d.y;var a=b.lineBounds(b.selectedIndex),e=a.topLeft();a=b.height-a.height;d=2>Math.abs(e.y-d)?e.y-a:2>Math.abs(e.y-d-.5*a)?e.y:e.y-.5*a;b.scroll=Ff.pt(h,d);return!0}}},{name:"print contents in text window",exec:function(b){var d=b.treeData;d=Ff.string.printTree(d.root,d.nodeToString.bind(d),d.getChildrenIfUncollapsed.bind(d));
var h=b.getWindow()?"printed "+b.getWindow().title:b.name;return b.world().execCommand("open text window",{title:h,content:d,name:h,fontFamily:Ff.config.codeEditor.defaultStyle.fontFamily})}}];var Ixa=Object.freeze({__proto__:null,Tree:hL,TreeData:iL}),zt=lively.FreezerRuntime.recorderFor("lively.components/iframe.js");zt.promise=bg;zt.HTMLMorph=xt;var jL=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/iframe.js"),h=d.hasOwnProperty("IFrameMorph")&&"function"===typeof d.IFrameMorph?
d.IFrameMorph:d.IFrameMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a.src||a.srcdoc||(a.srcdoc="<p>Empty iframe</p>");ac._get(Object.getPrototypeOf(h.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a)}},{key:"changeSrc",value:function(a,e){var n=this,q=this.iframe,r=this._loadPromise;r&&!r.loaded&&r.reject();this._loadPromise=
zt.promise.deferred();this._loadPromise.loaded=!1;q.onload=function(v){n._loadPromise.loaded=!0;n._loadPromise.resolve(v)};e=a||e;r=a?"src":"srcdoc";a=a?"srcdoc":"src";this.addValueChange(a,null);this.addValueChange(r,e);q.removeAttribute(a);q.setAttribute(r,e);this._loadPromise[r]=e}},{key:"whenLoaded",value:function(){return this._loadPromise.promise}},{key:"reload",value:function(){return this.iframe.src=this.src}},{key:"run",value:function(a){return this.innerWindow.eval("("+a+")();")}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"IFrameMorph"}},{key:"printTextMorph",value:function(a){var e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(a.whenRendered(),2);if(3!=y.nextAddress)return e=a.env.renderer.getNodeForMorph(a),n=zt.IFrameMorph.open({srcdoc:e.outerHTML}),y.yield(n.whenLoaded(),3);q=n.innerWindow.document;q.body.style.whiteSpace="normal";q.body.style.margin="0.5cm";q.querySelector(".Text").style.width="100%";q.querySelector(".Text").style.overflow=
"visible";q.querySelectorAll(".marker-layer-part").forEach(function(D){return D.parentNode.removeChild(D)});r=q.querySelector(".text-layer");r.style.whiteSpace="pre-wrap";v=Array.from(r.querySelectorAll("div"));v.forEach(function(D){D.childNodes[0]&&(Array.from(D.childNodes).forEach(function(E){return r.insertBefore(E,D)}),r.insertBefore(q.createElement("br"),D),r.removeChild(D))});n.innerWindow.print();n.getWindow().remove();y.jumpToEnd()})}},{key:"open",value:function(a){a=void 0===a?{}:a;return(new this(a)).openInWindow({title:a.title||
"iframe"}).targetMorph}},{key:"properties",get:function(){return{iframe:{after:["domNode"],readOnly:!0,get:function(){return this.domNode}},innerWindow:{after:["iframe"],readOnly:!0,get:function(){return this.iframe.contentWindow}},innerWorld:{after:["innerWindow"],readOnly:!0,get:function(){return this.innerWindow.$world}},src:{after:["domNode"],set:function(a){this.changeSrc(a,null)}},srcdoc:{after:["domNode"],set:function(a){this.changeSrc(null,a)}},domNode:{get:function(){this._domNode||(this._domNode=
this.document.createElement("iframe"),this._domNode.setAttribute("style","position: absolute; width: 100%; height: 100%;"),this._domNode.setAttribute("allowfullscreen",!0));return this._domNode},set:function(a){return this._domNode=a}}}}}],d,{pathInPackage:function(){return"iframe.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:621,
end:6201})}(zt.HTMLMorph);zt.IFrameMorph=jL;zt.IFrameMorph=jL;zt.IFrameMorph=jL;var Jxa=Object.freeze({__proto__:null,IFrameMorph:jL}),Ne=lively.FreezerRuntime.recorderFor("lively.components/window.js");Ne.arr=cf;Ne.promise=bg;Ne.pt=xh;Ne.LinearGradient=Xk;Ne.Color=If;Ne.Rectangle=ie;Ne.Label=Ap;Ne.GridLayout=Er;Ne.morph=zj;Ne.Morph=xj;Ne.HorizontalLayout=lp;Ne.StyleSheet=Eq;Ne.connect=Ik;Ne.signal=Jk;Ne.easings=so;var ZU=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/window.js"),
h=d.hasOwnProperty("Window")&&"function"===typeof d.Window?d.Window:d.Window=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"build",value:function(){this.submorphs=[this.buildHeader(),this.buildResizer()]}},{key:"openWindowMenu",value:function(){var a=this,e,n,q,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){return 1==E.nextAddress?(e=a.world()||a.env.world,n=a.targetMorph.world(),
q=n.openMenu,r=[["Change Window Title",function(){var I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(K){if(1==K.nextAddress)return K.yield(e.prompt("Enter New Name",{input:a.title}),2);if(I=K.yieldResult)a.title=I;K.jumpToEnd()})}],["Align and resize",[{alias:"full",target:e,command:"resize active window",args:{window:a,how:"full"}},{alias:"left",target:e,command:"resize active window",args:{window:a,how:"left"}},{alias:"center",target:e,command:"resize active window",args:{window:a,
how:"center"}},{alias:"right",target:e,command:"resize active window",args:{window:a,how:"right"}},{alias:"top",target:e,command:"resize active window",args:{window:a,how:"top"}},{alias:"bottom",target:e,command:"resize active window",args:{window:a,how:"bottom"}},{alias:"reset",target:e,command:"resize active window",args:{window:a,how:"reset"}}]],["Window Management",[{alias:"minimize all except this",target:e,command:"toggle minimize all except active window"},{alias:"close all except this",target:e,
command:"close all except active window"},{isDivider:!0},{alias:"minimize all",target:e,command:"toggle minimize all windows"},{alias:"close all",target:e,command:"close all windows"}]],{isDivider:!0}],v=r.concat,y=$jscomp,D=y.arrayFromIterable,E.yield(a.targetMorph.menuItems(),2)):E.return(q.call(n,v.call(r,D.call(y,E.yieldResult))))})}},{key:"toggleFader",value:function(a){var e=this,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:n=e.getSubmorphNamed("fader")||
e.addMorph({name:"fader",fill:Ne.Color.black.withA(.5),opacity:0,extent:e.extent});if(a){q=e.world().visibleBoundsExcludingTopBar().translateForInclusion(e.bounds());e._originalBounds=e.bounds();e.animate({bounds:q,duration:300});e.borderColor=Ne.Color.gray.darker();e._faderTriggered=!0;n.opacity=1;r.jumpTo(0);break}e._originalBounds&&(e.animate({bounds:e._originalBounds,duration:300}),e._originalBounds=null);e._faderTriggered=!1;return r.yield(e.whenRendered(),3);case 3:return r.yield(Ne.promise.delay(100),
4);case 4:return e.borderColor=Ne.Color.gray,e._faderTriggered?r.return():r.yield(n.animate({opacity:0,duration:300}),5);case 5:n.remove(),r.jumpToEnd()}})}},{key:"isWindow",get:function(){return!0}},{key:"targetMorphBounds",value:function(){return new Ne.Rectangle(0,25,this.width,this.height-25)}},{key:"relayoutWindowControls",value:function(){var a=this.innerBounds(),e=this.ui.windowTitle,n=this.ui.resizer,q=a.withHeight(25),r=this.ui.header,v=this.ui.windowControls.bounds().right()+3,y=q.withLeftCenter(Ne.pt(v,
q.height/2));n.bottomRight=a.bottomRight();e.textBounds().width<q.width-2*v?e.center=q.center():e.leftCenter=y.leftCenter();!this.minimized&&this.targetMorph&&this.targetMorph.isLayoutable&&this.targetMorph.setBounds(this.targetMorphBounds());r.width=this.width}},{key:"ensureNotOverTheTop",value:function(){var a=this,e=this.world();if(e){var n=this.globalBounds();e.withTopBarDo(function(q){n.top()<q.height&&a.moveBy(Ne.pt(0,q.height-n.top()))})}}},{key:"buildHeader",value:function(){return Ne.morph({name:"header",
extent:Ne.pt(this.width,50),submorphs:[Ne.morph({name:"window controls",styleClasses:["buttonGroup"],submorphs:this.buildButtons()}),this.buildTitleLabel()]})}},{key:"buildButtons",value:function(){var a=this.getSubmorphNamed("close")||Ne.morph({name:"close",styleClasses:["windowButton","closeButton"],tooltip:"close window",submorphs:[Ne.Label.icon("times",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});Ne.connect(a,"onMouseDown",this,"close");var e=this.getSubmorphNamed("minimize")||
Ne.morph({name:"minimize",styleClasses:["windowButton","minimizeButton"],tooltip:"collapse window",submorphs:[Ne.Label.icon("minus",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});Ne.connect(e,"onMouseDown",this,"minimized",{updater:function(q){q(!this.targetObj.minimized)}});if(this.resizable){var n=this.getSubmorphNamed("menu")||Ne.morph({name:"menu",styleClasses:["windowButton","windowMenuButton"],tooltip:"Open Window Menu",submorphs:[Ne.Label.icon("chevron-down",{name:"label",
styleClasses:["defaultLabelStyle","default"]})]});Ne.connect(n,"onMouseDown",this,"openWindowMenu")}return Ne.arr.compact([a,e,n])}},{key:"buildTitleLabel",value:function(){var a=Ne.morph({padding:Ne.Rectangle.inset(0,2,0,0),styleClasses:["windowTitleLabel"],type:"label",name:"window title",tooltip:"double click to maximize/reset",reactsToPointer:!0,value:""});Ne.connect(this,"onDoubleMouseDown",this,"toggleMaximize",{updater:"($upd, evt) => {\n        if (source.fullContainsWorldPoint(evt.position)) {\n          $upd();\n        }\n      }"});
return this.addMorph(a)}},{key:"resizeBy",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"resizeBy",this).call(this,a);this.relayoutWindowControls()}},{key:"resizeAt",value:function(a){a=$jscomp.makeIterator(a);var e=a.next().value;a=a.next().value;var n=this.bounds();switch(e){case "right":this.resizeBy(a.withY(0));break;case "bottom right":this.resizeBy(a);break;case "bottom":this.resizeBy(a.withX(0));break;case "left":e=this.right;this.resizeBy(a.withY(0).negated());this.right=e;
break;case "bottom left":e=this.right;this.resizeBy(a.scaleByPt(Ne.pt(-1,1)));this.right=e;break;case "top":e=n.x;var q=n.y+a.y;var r=n.width;a=n.height-a.y;this.setBounds(new Ne.Rectangle(e,q,r,a));break;case "top left":e=n.x+a.x;q=n.y+a.y;r=n.width-a.x;a=n.height-a.y;this.setBounds(new Ne.Rectangle(e,q,r,a));break;case "top right":e=n.x,q=n.y+a.y,r=n.width+a.x,a=n.height-a.y,this.setBounds(new Ne.Rectangle(e,q,r,a))}this.relayoutResizer()}},{key:"relayoutResizer",value:function(){try{var a=this.getSubmorphNamed("resizer"),
e=$jscomp.makeIterator(a.submorphs),n=e.next().value,q=e.next().value,r=e.next().value,v=e.next().value,y=e.next().value,D=e.next().value,E=e.next().value,I=e.next().value;n.height=this.height-10;n.bottomRight=this.extent.subXY(0,10);q.bottomRight=this.extent;r.height=this.height-10;r.bottomLeft=Ne.pt(0,this.height-10);v.bottomLeft=Ne.pt(0,this.height);y.width=this.width-20;y.bottomLeft=Ne.pt(10,this.height);D.width=this.width-20;D.bottomLeft=Ne.pt(10,2.5);E.topLeft=Ne.pt(0,0);I.topRight=Ne.pt(this.width,
0);a.position=Ne.pt(0,0)}catch(K){}}},{key:"buildResizer",value:function(){var a,e,n,q,r,v,y;var D=Ne.Color.transparent;var E=Ne.morph({name:"resizer",fill:Ne.Color.transparent,position:Ne.pt(0,0),submorphs:[a=Ne.morph({name:"right resizer",fill:D,width:10,draggable:!0,nativeCursor:"ew-resize"}),e=Ne.morph({name:"bottom right resizer",fill:D,extent:Ne.pt(10,10),draggable:!0,nativeCursor:"nwse-resize"}),n=Ne.morph({name:"left resizer",fill:D,width:10,draggable:!0,nativeCursor:"ew-resize"}),q=Ne.morph({name:"bottom left resizer",
draggable:!0,fill:D,extent:Ne.pt(10,10),nativeCursor:"nesw-resize"}),r=Ne.morph({name:"bottom resizer",draggable:!0,fill:D,height:10,nativeCursor:"ns-resize"}),v=Ne.morph({name:"top resizer",draggable:!0,fill:D,height:2.5,nativeCursor:"ns-resize"}),y=Ne.morph({name:"top left resizer",draggable:!0,fill:D,extent:Ne.pt(10,10),nativeCursor:"nwse-resize"}),D=Ne.morph({name:"top rigth resizer",draggable:!0,fill:D,extent:Ne.pt(10,10),nativeCursor:"nesw-resize"})]});Ne.connect(v,"onDrag",this,"resizeAt",
{converter:function(I){return["top",I.state.dragDelta]}});Ne.connect(D,"onDrag",this,"resizeAt",{converter:function(I){return["top right",I.state.dragDelta]}});Ne.connect(y,"onDrag",this,"resizeAt",{converter:function(I){return["top left",I.state.dragDelta]}});Ne.connect(e,"onDrag",this,"resizeAt",{converter:function(I){return["bottom right",I.state.dragDelta]}});Ne.connect(a,"onDrag",this,"resizeAt",{converter:function(I){return["right",I.state.dragDelta]}});Ne.connect(r,"onDrag",this,"resizeAt",
{converter:function(I){return["bottom",I.state.dragDelta]}});Ne.connect(n,"onDrag",this,"resizeAt",{converter:function(I){return["left",I.state.dragDelta]}});Ne.connect(q,"onDrag",this,"resizeAt",{converter:function(I){return["bottom left",I.state.dragDelta]}});this.addMorph(E);this.relayoutResizer();return E}},{key:"toggleMaximize",value:function(){this.minized||(this.maximized=!this.maximized)}},{key:"applyMaximize",value:function(){this.maximized?$world.execCommand("resize active window",{window:this,
how:"full"}):$world.execCommand("resize active window",{window:this,how:"reset"})}},{key:"toggleMinimize",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){a.minimized=!a.minimized;e.jumpToEnd()})}},{key:"applyMinimize",value:function(){var a=this,e,n,q,r,v,y,D,E,I,K,P,N,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){if(!a.targetMorph)return m.return();e=a;n=e.nonMinizedBounds;q=e.minimized;r=e.width;v=a.ui;y=v.windowTitle;
D=v.resizer;E=a.bounds();I=a.getSubmorphNamed("minimize");K=Ne.easings.outQuad;if(!q)return a.minimizedBounds=E,a.withMetaDo({metaInteraction:!0},function(){a.targetMorph&&(a.targetMorph.visible=!0)}),n=a.world().visibleBoundsExcludingTopBar().translateForInclusion(n||E),a.animate({bounds:n,styleClasses:["neutral","active"].concat($jscomp.arrayFromIterable(Ne.arr.without(a.styleClasses,"minimzed"))),duration:100,easing:K}),I.tooltip="collapse window",m.jumpTo(2);a.nonMinizedBounds=E;P=(a.minimizedBounds||
E).withExtent(Ne.pt(r,28));N=y.textBounds();aa=a.get("window controls").bounds().right()+3;N.width+2*aa<P.width&&(P=P.withWidth(N.width+aa+5));a.minimizedBounds=P;I.tooltip="uncollapse window";return m.yield(a.animate({styleClasses:["minimized","active"].concat($jscomp.arrayFromIterable(Ne.arr.without(a.styleClasses,"neutral"))),bounds:P,duration:100,easing:K}),3)}2!=m.nextAddress&&a.targetMorph&&(a.targetMorph.isComponent?a.targetMorph.top=a.height:a.targetMorph.visible=!1);y.reactsToPointer=!a.minimized;
D.visible=!a.minimized;a.relayoutWindowControls();m.jumpToEnd()})}},{key:"setBounds",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"setBounds",this).call(this,a);this.relayoutResizer();this.relayoutWindowControls()}},{key:"setBounds",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"setBounds",this).call(this,a);this.relayoutResizer();this.relayoutWindowControls()}},{key:"close",value:function(){var a=this,e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return a.targetMorph&&"function"===typeof a.targetMorph.onWindowClose?r.yield(a.targetMorph.onWindowClose(),3):r.jumpTo(2);2!=r.nextAddress&&(e=r.yieldResult);if(!1===e)return r.return();n=a.world();a.deactivate();a.remove();(q=n.activeWindow()||Ne.arr.last(n.getWindows()))&&q.activate();Ne.signal(a,"windowClosed",a);r.jumpToEnd()})}},{key:"onMouseUp",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onMouseUp",this).call(this,a);this.minimized||(this.ui.resizer.visible=
!0)}},{key:"onMouseDown",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onMouseDown",this).call(this,a);this.activate(a);this.minimized||this.ui.resizer.submorphs.includes(a.targetMorph)||(this.ui.resizer.visible=!1)}},{key:"onDragStart",value:function(a){var e=this;ac._get(Object.getPrototypeOf(h.prototype),"onDragStart",this).call(this,a);this.targetMorph&&(a.state.origReactsToPointer=this.targetMorph.reactsToPointer,this.withMetaDo({metaInteraction:!0},function(){e.targetMorph.reactsToPointer=
!1}))}},{key:"onDragEnd",value:function(a){var e=this;ac._get(Object.getPrototypeOf(h.prototype),"onDragEnd",this).call(this,a);this.targetMorph&&this.withMetaDo({metaInteraction:!0},function(){e.targetMorph.reactsToPointer=a.state.origReactsToPointer});this.minimized||(this.ui.resizer.visible=!0)}},{key:"onDrag",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onDrag",this).call(this,a);this.ensureNotOverTheTop()}},{key:"focus",value:function(){var a=this.world(),e=this.targetMorph;
a&&e&&(!a.focusedMorph||a.focusedMorph!==e&&!e.isAncestorOf(a.focusedMorph))&&e.focus()}},{key:"isActive",value:function(){var a=this.world();return a&&"bold"==this.ui.windowTitle.fontWeight?Ne.arr.last(a.getWindows())===this:!1}},{key:"activate",value:function(a){var e=this;if(this.isActive())return this.bringToFront(),this.focus(a),this.renderOnGPU=!0,this.relayoutWindowControls(),this;this.master.whenApplied().then(function(){e.master={auto:"styleguide://System/window/light/active"}});this.world()?
this.bringToFront():this.openInWorldNearHand();var n=this.world()||this.env.world;Ne.arr.without(n.getWindows(),this).forEach(function(q){return q.deactivate()});this.focus(a);Ne.signal(this,"windowActivated",this);Promise.resolve(this.master.applyIfNeeded(!0)).then(function(){return e.relayoutWindowControls()});return this}},{key:"deactivate",value:function(){var a=this;this.master&&"styleguide://System/window/light/inactive"==this.master.auto||(this.master.whenApplied().then(function(){a.master=
{auto:"styleguide://System/window/light/inactive"}}),this.relayoutWindowControls(),this.renderOnGPU=!1)}},{key:"keybindings",get:function(){return ac._get(Object.getPrototypeOf(h.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Shift-L R E N",win:"Ctrl-Shift-L R E N"},command:"[window] change title"}])}},{key:"commands",get:function(){return ac._get(Object.getPrototypeOf(h.prototype),"commands",this).concat([{name:"[window] change title",exec:function(a,e){e=void 0===e?{}:e;var n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return(n=e.title)?r.jumpTo(2):r.yield(a.world().prompt("Enter new title",{input:a.title,historyId:"lively.morphic-window-title-hist"}),3);2!=r.nextAddress&&(n=r.yieldResult);if(q=n)a.title=q;return r.return(!0)})}}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Window"}},{key:"properties",get:function(){return{submorphs:{initialize:function(){this.build()}},position:{set:function(a){this.setProperty("position",a.roundTo(1))}},ui:{derived:!0,get:function(){return{header:this.get("header"),
resizer:this.get("resizer"),windowControls:this.get("window controls"),windowTitle:this.get("window title")}}},master:{initialize:function(){this.master={auto:"styleguide://System/window/light/active"}}},styleClasses:{defaultValue:["active"]},clipMode:{defaultValue:"hidden"},resizable:{defaultValue:!0},title:{after:["submorphs"],derived:!0,get:function(){return this.ui.windowTitle.textString},set:function(a){var e=this,n,q,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==
E.nextAddress){n="string"===typeof a?[a,{}]:a;q=[];for(r=0;r<n.length;r+=2)v=n[r],y=n[r+1],v=v.replace(/\n/g,""),D=v.length+0-100,0<D&&(v=v.slice(0,-D)),q.push(v,y||{});e.ui.windowTitle.value=q;return E.yield(e.whenRendered(),2)}e.ui.windowTitle.reactsToPointer=!1;e.relayoutWindowControls();E.jumpToEnd()})}},targetMorph:{after:["submorphs"],derived:!0,get:function(){return Ne.arr.withoutAll(this.submorphs,[this.get("header"),this.get("resizer")])[0]},set:function(a){var e=[this.get("header"),this.get("resizer")];
Ne.arr.withoutAll(this.submorphs,e).forEach(function(n){return n.remove()});a&&this.addMorph(a,this.resizable?this.get("resizer"):!1);this.relayoutWindowControls()}},minimizedBounds:{serialize:!1},nonMinizedBounds:{},nonMaximizedBounds:{},minimized:{set:function(a){this.setProperty("minimized",a);this.applyMinimize()}},maximized:{set:function(a){this.setProperty("maximized",a);this.applyMaximize()}}}}}],d,{pathInPackage:function(){return"window.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:355,end:21159})}(Ne.Morph);ZU=Ne.Window;var $U=Ka("aq",ZU);Ne.default=ZU;var oe=lively.FreezerRuntime.recorderFor("lively.components/prompts.js");oe.Rectangle=ie;oe.rect=cl;oe.Color=If;oe.pt=xh;oe.morph=zj;oe.VerticalLayout=Dr;oe.Morph=xj;oe.StyleSheet=Eq;oe.Text=zp;oe.GridLayout=Er;oe.Icon=rm;oe.HorizontalLayout=lp;oe.InputLine=UC;oe.PasswordInputLine=
yt;oe.arr=cf;oe.obj=xf;oe.promise=bg;oe.connect=Ik;oe.List=fz;oe.FilterableList=XC;oe.RadioButtonGroup=WC;oe.RadioButton=VC;var kL=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),h=d.hasOwnProperty("AbstractPrompt")&&"function"===typeof d.AbstractPrompt?d.AbstractPrompt:d.AbstractPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){a=void 0===a?{}:a;ac._get(Object.getPrototypeOf(h.prototype),Symbol.for("lively-instance-initialize"),this).call(this,oe.obj.dissoc(a,["label","commands","keybindings"]));this.build(a);a.commands&&this.addCommands(a.commands);a.keybindings&&this.addKeyBindings(a.keybindings)}},{key:"isPrompt",get:function(){return!0}},{key:"resolve",value:function(a){return this.answer.resolve(a)}},{key:"reject",value:function(a){return this.answer.resolve(a)}},{key:"activate",value:function(){var a=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){a.focus();a.answer=oe.promise.deferred();a._isActive=!0;oe.promise.finally(a.answer.promise,function(){return a._isActive=!1});a.autoRemove&&oe.promise.finally(a.answer.promise,function(){return a.fadeOut(200)});return e.return(a.answer.promise)})}},{key:"isActive",value:function(){return!!this.world()&&this._isActive}},{key:"build",value:function(){throw Error("Not yet implemented");}},{key:"applyLayout",value:function(){throw Error("Not yet implemented");
}},{key:"keybindings",get:function(){return ac._get(Object.getPrototypeOf(h.prototype),"keybindings",this).concat([{keys:"Enter",command:"resolve"},{keys:"Escape",command:"reject"},{keys:{mac:"Meta-."},command:"reject"}])}},{key:"commands",get:function(){var a=this;return ac._get(Object.getPrototypeOf(h.prototype),"commands",this).concat([{name:"resolve",exec:function(e,n){a.resolve(n);return!0}},{name:"reject",exec:function(e,n){a.reject(n);return!0}}])}},{key:"transitionTo",value:function(a,e){e=
void 0===e?300:e;var n=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){q=oe.morph({fill:n.fill,borderRadius:n.borderRadius});r=oe.morph({fill:null,origin:oe.pt(5,5)});a.opacity=0;a.fill=oe.Color.transparent;a.openInWorld();n.fill=oe.Color.transparent;$world.addMorph(q,n);q.setBounds(n.bounds());r.openInWorld();r.addMorph(a);a.center=r.origin;r.center=q.center=n.center;r.scale=a.width/n.width;q.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress)return n.animate({scale:n.width/a.width,opacity:0,duration:e}),a.animate({opacity:1,duration:e}),r.animate({scale:1,duration:e}),y.yield(q.animate({bounds:r.bounds(),duration:e}),2);a.fill=q.fill;$world.addMorph(a);q.remove();n.remove();r.remove();y.jumpToEnd()})});v.jumpToEnd()})}},{key:"addNamed",value:function(a,e){var n=this.getSubmorphNamed(a)||this.addMorph(e.isMorph?e:oe.morph(Object.assign({},e,{name:a})));e.label&&(n.label=e.label);e.isMorph&&(n.name=a);return n}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"AbstractPrompt"}},{key:"properties",get:function(){return{fill:{defaultValue:oe.Color.black.withA(.6)},extent:{defaultValue:oe.pt(300,80)},borderRadius:{defaultValue:5},dropShadow:{initialize:function(){this.dopShadow=!0}},clipMode:{defaultValue:"hidden"},_isActive:{defaultValue:!1},autoRemove:{defaultValue:!0},epiMorph:{defaultValue:!0},answer:{defaultValue:null,derived:!0},label:{derived:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("promptTitle").value},
set:function(a){this.getSubmorphNamed("promptTitle").value=a}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:446,end:3935})}(oe.Morph);oe.AbstractPrompt=kL;oe.AbstractPrompt=kL;oe.AbstractPrompt=kL;var lL=Ka("ai",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),
h=d.hasOwnProperty("InformPrompt")&&"function"===typeof d.InformPrompt?d.InformPrompt:d.InformPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"build",value:function(a){var e=this,n=a=void 0===a?{}:a,q=n.label,r=this.addNamed("promptTitle",{type:"text",lineWrapping:n.lineWrapping});n=this.addNamed("ok button",{type:"button",label:"OK",width:100});this.addNamed("button wrapper",{submorphs:[n]});
r.textString=q;oe.connect(n,"fire",this,"resolve");a.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){if(r.document){var v=e.center;e.width=Math.max(e.width,r.document.width+100);e.align(e.center,v)}e.opacity=1}))}},{key:"keybindings",get:function(){return ac._get(Object.getPrototypeOf(h.prototype),"keybindings",this).concat([{keys:"Escape",command:"resolve"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InformPrompt"}},{key:"example",value:function(){$world.inform("Computer says no.")}},
{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/inform"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3944,end:5259})}(oe.AbstractPrompt));oe.InformPrompt=lL;oe.InformPrompt=
lL;oe.InformPrompt=lL;var mL=Ka("aj",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),h=d.hasOwnProperty("ConfirmPrompt")&&"function"===typeof d.ConfirmPrompt?d.ConfirmPrompt:d.ConfirmPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"build",value:function(a){var e=this,n=this.addNamed("promptTitle",{type:"text"});n.value=a.label;a=this.addNamed("ok button",{type:"button",
label:this.confirmLabel});var q=this.addNamed("cancel button",{type:"button",label:this.rejectLabel});this.addNamed("button wrapper",{submorphs:[a,q]});oe.connect(a,"fire",this,"resolve");oe.connect(q,"fire",this,"reject");n.lineWrapping=this.lineWrapping;this.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){n.lineWrapping=e.lineWrapping;var r=e.center;e.width=Math.max(e.width,n.document.width+100);e.center=r;e.opacity=1}))}},{key:"resolve",value:function(){ac._get(Object.getPrototypeOf(h.prototype),
"resolve",this).call(this,!0)}},{key:"reject",value:function(){ac._get(Object.getPrototypeOf(h.prototype),"resolve",this).call(this,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConfirmPrompt"}},{key:"example",value:function(){$world.confirm("Isn't this a nice prompt.")}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/confirm"}}}}}}],
d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5306,end:6757})}(oe.AbstractPrompt));oe.ConfirmPrompt=mL;oe.ConfirmPrompt=mL;oe.ConfirmPrompt=mL;var nL=Ka("ak",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),h=d.hasOwnProperty("MultipleChoicePrompt")&&
"function"===typeof d.MultipleChoicePrompt?d.MultipleChoicePrompt:d.MultipleChoicePrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"resolve",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"resolve",this).call(this,a||this.getSubmorphNamed("choices").value)}},{key:"build",value:function(a){var e=a=void 0===a?{choices:["No choice"]}:a;a=e.label;var n=e.choices;e=this.addNamed("ok button",
{type:"button"});var q=this.addNamed("cancel button",{type:"button"});a&&(this.addNamed("promptTitle",{type:"text"}).value=a);var r=this.addNamed("choices",{name:"choices",type:oe.RadioButtonGroup});this.addNamed("button wrapper",{submorphs:[e,q]});e&&oe.connect(e,"fire",this,"resolve");q&&oe.connect(q,"fire",this,"reject");this.whenRendered().then(function(){r.choices=n})}},{key:"onKeyDown",value:function(a){if(/^[0-9]$/.test(a.keyCombo)){var e=this.getSubmorphNamed("button "+(Number(a.keyCombo)-
1));if(e)return e.trigger(),a.stop()}return ac._get(Object.getPrototypeOf(h.prototype),"onKeyDown",this).call(this,a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultipleChoicePrompt"}},{key:"example",value:function(){$world.multipleChoicePrompt("Choose wisely:",{choices:[1,2,3]})}},{key:"properties",get:function(){return{title:{derived:!0,after:["submorphs"],set:function(a){this.getSubmorphNamed("title").value=a}},choices:{after:["submorphs"],derived:!0,set:function(a){var e;
if(e=this.getSubmorphNamed("choices"))e.choices=a}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/multiple choice"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:6846,end:8787})}(oe.AbstractPrompt));oe.MultipleChoicePrompt=nL;oe.MultipleChoicePrompt=
nL;oe.MultipleChoicePrompt=nL;var oL=Ka("al",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),h=d.hasOwnProperty("TextPrompt")&&"function"===typeof d.TextPrompt?d.TextPrompt:d.TextPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"maxWidth",get:function(){return this.env.world.visibleBounds().width-20}},{key:"resolve",value:function(){var a=this.getSubmorphNamed("input");
this.validate(a.input)?ac._get(Object.getPrototypeOf(h.prototype),"resolve",this).call(this,a.acceptInput()):a.indicateError(this.errorMessage)}},{key:"build",value:function(a){var e=this,n=a.label,q=a.input,r=a.historyId,v=a.useLastInput;a=a.selectInput;var y=this.addNamed("promptTitle",{type:"text"});y.value=n;n=this.addNamed("input",oe.Text.makeInputLine({historyId:r,highlightWhenFocused:!1}));n.viewState.fastScroll=!1;n.textString=q||"";r&&v&&(q=oe.arr.last(n.inputHistory.items))&&(n.textString=
q);this.lineWrapping||(this.width=Math.max(this.width,y.textBounds().width+50));q=this.addNamed("ok button",{type:"button",label:this.confirmLabel});r=this.addNamed("cancel button",{type:"button",label:this.rejectLabel});this.addNamed("button wrapper",{submorphs:[q,r]});oe.connect(q,"fire",this,"resolve");oe.connect(r,"fire",this,"reject");y.lineWrapping=this.lineWrapping;this.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){var D=e.center;e.width=Math.max(350,y.document.width+100);
e.opacity=1;e.center=D}));n.gotoDocumentEnd();n.scrollCursorIntoView();a&&n.selectAll()}},{key:"initLayout",value:function(){var a=this;if(!this.layout){var e=this.getSubmorphNamed("promptTitle"),n=this.getSubmorphNamed("input");e.fit();this.whenRendered().then(function(){var q=Math.max(n.textBounds().width,e.textBounds().width)+20;a.width=Math.min(a.maxWidth,q);a.opacity=1});this.layout=new oe.GridLayout({columns:[0,{paddingLeft:5},1,{paddingLeft:5,paddingRight:2.5,fixed:100},2,{paddingRight:5,paddingLeft:2.5,
fixed:100},3,{paddingRight:5}],rows:[0,{fixed:e.textBounds().height+5,paddingBottom:5},1,{fixed:n.height},2,{fixed:35,paddingTop:5,paddingBottom:5}],grid:[["promptTitle","promptTitle","promptTitle","promptTitle"],["input","input","input","input"],[null,"ok button","cancel button",null]]})}}},{key:"focus",value:function(){this.getSubmorphNamed("input").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==
a.nextAddress?a.yield($world.prompt("enter",{input:"a little longer text"}),2):a.yield($world.prompt("enter\nsomething",{input:"???"}),0)})}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},errorMessage:{defaultValue:"Invalid Input"},confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},validate:{serialize:!1,initialize:function(){this.validate=function(){return!0}}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/text"}}}}}}],
d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8796,end:12404})}(oe.AbstractPrompt));oe.TextPrompt=oL;oe.TextPrompt=oL;oe.TextPrompt=oL;var pL=Ka("am",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),h=d.hasOwnProperty("EditPrompt")&&"function"===
typeof d.EditPrompt?d.EditPrompt:d.EditPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"maxWidth",get:function(){return this.env.world.visibleBounds().width-20}},{key:"build",value:function(a){var e=a.input,n=a.mode,q=a.textStyle,r=a.evalEnvironment,v=void 0===a.resolveTextAttributes?!1:a.resolveTextAttributes;this.addNamed("promptTitle",{type:"text",value:a.label});this.resolveTextAttributes=
v;q||(q={});n&&!q.fontFamily&&(q.fontFamily="Monaco, monospace");var y=this.addNamed("editor",{type:"text"});y.value=e||"";Object.assign(y,q);y.changeEditorMode(n).then(function(){r&&y.editorPlugin&&Object.assign(y.editorPlugin.evalEnvironment,r)});a=y.textBounds().width+50;a>this.width-25&&(this.width=Math.min(this.maxWidth,a+125));a=this.addNamed("ok button",{type:"button"});e=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[a,e]});oe.connect(a,"fire",this,
"resolve");oe.connect(e,"fire",this,"reject");y.gotoDocumentEnd();y.scrollCursorIntoView()}},{key:"resolve",value:function(a){if(this.resolveTextAttributes)return ac._get(Object.getPrototypeOf(h.prototype),"resolve",this).call(this,this.getSubmorphNamed("editor").textAndAttributes);var e=this.getSubmorphNamed("editor").textString.trim();if(this.historyId){a=oe.InputLine.getHistory(this.historyId);a.items=a.items.filter(function(n){return n!==e});for(a.items.push(e);a.items.length>a.items.max;)a.items.shift();
a.index=a.items.length;oe.InputLine.setHistory(this.historyId,a)}return ac._get(Object.getPrototypeOf(h.prototype),"resolve",this).call(this,e)}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-Enter|Meta-S",win:"Ctrl-Enter|Ctrl-S"},command:"resolve"},{keys:"Escape",command:"reject"},{keys:"Alt-P|Alt-Up",command:"history back"},{keys:"Alt-N|Alt-Down",command:"history forward"},{keys:"Alt-H",command:"browse history"}]}},{key:"commands",get:function(){var a=this;return ac._get(Object.getPrototypeOf(h.prototype),
"commands",this).concat([{name:"history back",exec:function(e,n){if(a.historyId){e=oe.InputLine.getHistory(a.historyId);n=e.items;var q=e.index;e.index=--q;0>q&&(e.index=q=n.length-1);a.get("editor").undoManager.group();a.get("editor").textString=n[q];a.get("editor").undoManager.group()}return!0}},{name:"browse history",exec:function(e,n){var q,r,v,y,D,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress){if(!a.historyId)return I.jumpTo(2);q=oe.InputLine.getHistory(a.historyId);
return I.yield(a.world().editListPrompt("input history "+a.historyId,q.items,{requester:a}),3)}2!=I.nextAddress&&(r=I.yieldResult,v=r.status,y=r.list,D=$jscomp.makeIterator(r.selections),E=D.next().value,"canceled"!==v&&(q.items=y,oe.InputLine.setHistory(a.historyId,q),E&&(q.index=q.items.indexOf(E),a.get("editor").textString=E)));return I.return(!0)})}},{name:"history forward",exec:function(e,n){if(a.historyId){e=oe.InputLine.getHistory(a.historyId);n=e.items;var q=e.index;e.index=++q;q>=n.length&&
(e.index=q=0);a.get("editor").undoManager.group();a.get("editor").textString=n[q];a.get("editor").undoManager.group()}return!0}}])}},{key:"focus",value:function(){this.getSubmorphNamed("editor").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditPrompt"}},{key:"example",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield($world.editPrompt("enter",{input:"$world.show()",mode:"js",evalEnvironment:{context:23}}),
2);a.editorPlugin.evalEnvironment;e.jumpToEnd()})}},{key:"properties",get:function(){return{extent:{defaultValue:oe.pt(500,300)},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:12413,end:17125})}(oe.AbstractPrompt));
oe.EditPrompt=pL;oe.EditPrompt=pL;oe.EditPrompt=pL;var qL=Ka("an",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),h=d.hasOwnProperty("PasswordPrompt")&&"function"===typeof d.PasswordPrompt?d.PasswordPrompt:d.PasswordPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"build",value:function(a){var e=a.placeholder;this.addNamed("promptTitle",{type:"text",value:a.label,
fixedHeight:!0});this.addNamed("input",{type:oe.PasswordInputLine,fontSize:22,padding:oe.rect(5,5,0,0),name:"input",placeholder:e||""});a=this.addNamed("ok button",{type:"button",label:"OK"});e=this.addNamed("cancel button",{type:"button",label:"CANCEL"});oe.connect(a,"fire",this,"resolve");oe.connect(e,"fire",this,"reject");this.addNamed("button wrapper",{submorphs:[a,e]})}},{key:"resolve",value:function(){ac._get(Object.getPrototypeOf(h.prototype),"resolve",this).call(this,this.get("input").acceptInput())}},
{key:"focus",value:function(){var a=this.get("input");a.whenRendered().then(function(){return a.focus()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PasswordPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.passwordPrompt("Enter your secret password:"),0)})}},{key:"properties",get:function(){return{maxWidth:{readOnly:!0,get:function(){return 800}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/password"}}}}}}],
d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17134,end:18532})}(oe.AbstractPrompt));oe.PasswordPrompt=qL;oe.PasswordPrompt=qL;oe.PasswordPrompt=qL;var rL=Ka("ao",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),h=d.hasOwnProperty("ListPrompt")&&
"function"===typeof d.ListPrompt?d.ListPrompt:d.ListPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"getMaster",value:function(){return this.filterable?"styleguide://SystemPrompts/prompts/list":"styleguide://SystemPrompts/prompts/edit list"}},{key:"reset",value:function(){this.items=[]}},{key:"build",value:function(a){var e=a.label,n=a.filterable,q=a.multiSelect,r=a.historyId,v=a.useLastInput,
y=a.fuzzy,D=a.filterFunction,E=a.sortFunction,I=a.actions,K=a.selectedAction,P=a.items,N=a.onSelection,aa=a.onFilter;this.extent=a.extent||oe.pt(500,500);this.addNamed("promptTitle",{type:"text"}).value=e;var m=this.addNamed("prompt list",{type:n?oe.FilterableList:oe.List,multiSelect:q,historyId:r,useLastInput:v});n?this.get("list").master=!1:this.get("prompt list").master=!1;m.items=P;n&&y&&(m.fuzzy=y);n&&"function"===typeof D&&(m.filterFunction=D);n&&"function"===typeof E&&(m.sortFunction=E);N&&
"function"===typeof N&&(this.onSelection=N);n&&I&&(m.actions=I);n&&K&&(m.selectedAction=K);a=this.addNamed("ok button",{type:"button"});e=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[a,e]});oe.connect(a,"fire",this,"resolve");oe.connect(e,"fire",this,"reject");n&&(oe.connect(m,"accepted",this,"resolve"),oe.connect(m,"canceled",this,"reject"),aa&&oe.connect(m,"updateFilter",function(){return aa(m)}),m.whenRendered().then(function(){return m.relayout()}))}},
{key:"resolve",value:function(a){var e=this.getSubmorphNamed("prompt list");a=a||e instanceof oe.FilterableList?e.acceptInput():{selected:e.selections,status:"accepted",actions:"default"};return this.answer.resolve(a)}},{key:"reject",value:function(){return this.answer.resolve({prompt:this,selected:[],filtered:[],status:"canceled"})}},{key:"focus",value:function(){this.getSubmorphNamed("prompt list").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListPrompt"}},{key:"example",
value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.listPrompt("hello",[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",get:function(){return{items:{derived:!0,after:["submorphs"],set:function(a){0<this.submorphs.length&&(this.getSubmorphNamed("prompt list").items=a||[])}},filterable:{},master:{after:["filterable"],initialize:function(){this.master={auto:this.getMaster()}}},preselect:{derived:!0,after:["items"],set:function(a){var e=this.getSubmorphNamed("prompt list");
e&&(e.selectedIndex=a,e.scrollSelectionIntoView)}},onSelection:{derived:!0,after:["preselect","submorphs"],set:function(a){var e=this,n=this.getSubmorphNamed("prompt list");n&&oe.connect(n,"selection",function(q){return a(q,e)})}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:18630,
end:22288})}(oe.AbstractPrompt));oe.ListPrompt=rL;oe.ListPrompt=rL;oe.ListPrompt=rL;var sL=Ka("ap",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),h=d.hasOwnProperty("EditListPrompt")&&"function"===typeof d.EditListPrompt?d.EditListPrompt:d.EditListPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"build",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),
"build",this).call(this,a);this.getSubmorphNamed("prompt list").items=a.items;a=this.addNamed("add item button",{type:"button",label:oe.Icon.makeLabel("plus")});var e=this.addNamed("remove item button",{type:"button",label:oe.Icon.makeLabel("minus")});this.getSubmorphNamed("button wrapper").addMorph(a);this.getSubmorphNamed("button wrapper").addMorph(e);oe.connect(a,"fire",this,"addItemToList");oe.connect(e,"fire",this,"removeSelectedItemsFromList")}},{key:"removeSelectedItemsFromList",value:function(){var a=
this,e,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){e=a.get("prompt list");n=1!=e.selectedItems.length?-1:0===e.selectedIndex?0:e.selectedIndex-1;e.items=oe.arr.withoutAll(e.items,e.selectedItems);0>n?e.selection=null:e.selectedIndex=n;e.focus();q.jumpToEnd()})}},{key:"addItemToList",value:function(){var a=this,e,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=a.get("prompt list"),n=e.selection?e.items[e.selectedIndex].string:"",
v.yield(a.world().prompt("Input to add to the list",{historyId:a.historyId||"EditListPrompt-input-history",input:n}),2);q=v.yieldResult;if(!q)return v.return();e=a.get("list");r=e.selection?e.selectedIndex+1:e.items.length;e.addItemAt(q,r);e.focus();e.selectedIndex=r;v.jumpToEnd()})}},{key:"keybindings",get:function(){return ac._get(Object.getPrototypeOf(h.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Enter",win:"Ctrl-Enter"},command:"resolve"},{keys:"Ctrl-G",command:"deselect"},{keys:"Shift-=|+",
command:"add item to list"},{keys:"Delete|-|Backspace",command:"remove item from list"}])}},{key:"commands",get:function(){var a=this;return ac._get(Object.getPrototypeOf(h.prototype),"commands",this).concat([{name:"deselect",exec:function(){a.get("list").selection=null;return!0}},{name:"add item to list",exec:function(){a.addItemToList();return!0}},{name:"remove item from list",exec:function(){a.removeSelectedItemsFromList();return!0}}])}},{key:"resolve",value:function(){var a=this.get("prompt list");
return this.answer.resolve({list:a.values,selections:a.selections})}},{key:"reject",value:function(){return this.answer.resolve({list:[],selections:[],status:"canceled"})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.editListPrompt("hello",[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",get:function(){return{master:{initialize:function(){this.master=
{auto:"styleguide://SystemPrompts/prompts/edit list"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:22298,end:25186})}(oe.ListPrompt));oe.EditListPrompt=sL;oe.EditListPrompt=sL;oe.EditListPrompt=sL;var aV=Object.freeze({__proto__:null,AbstractPrompt:kL,InformPrompt:lL,ConfirmPrompt:mL,
MultipleChoicePrompt:nL,TextPrompt:oL,EditPrompt:pL,PasswordPrompt:qL,ListPrompt:rL,EditListPrompt:sL}),id=lively.FreezerRuntime.recorderFor("lively.components/widgets.js");id.obj=xf;id.PropertyPath=Eg;id.string=Ng;id.num=jk;id.arr=cf;id.properties=Qm;id.pt=xh;id.Color=If;id.Rectangle=ie;id.rect=cl;id.signal=Jk;id.connect=Ik;id.disconnect=Hp;id.Morph=xj;id.ShadowObject=ro;id.morph=zj;id.Text=zp;id.GridLayout=Er;id.HorizontalLayout=lp;id.Path=Pv;id.Ellipse=Nv;id.Label=Ap;id.Tooltip=Qv;id.Icon=rm;id.kld=
Ab;var kda=id.kld;id.Shapes=kda.Shapes;id.Intersection=kda.Intersection;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),h=d.hasOwnProperty("LeashEndpoint")&&"function"===typeof d.LeashEndpoint?d.LeashEndpoint:d.LeashEndpoint=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"dragTriggerDistance",get:function(){return this.connectedMorph?20:0}},{key:"onDragStart",value:function(a){var e=
a.state;a.state.dragDelta=e.lastDragPosition.subPt(e.clickedOnPosition);a.state.endpoint=this;this.leash.onEndpointDrag(a)}},{key:"canConnectTo",value:function(a){return!a.isWorld&&!a.isHaloItem&&this.leash.canConnectTo(a)&&!a.isHighlighter&&!a.ownerChain().some(function(e){return e.isHaloItem})}},{key:"onDrag",value:function(a){var e=this;if(this.connectedMorph)this.clearConnection();else{var n=a.hand.findDropTarget(a.hand.globalPosition,[this.leash,this.leash.endPoint,this.leash.startPoint],function(q){return e.canConnectTo(q)});
this.possibleTarget!=n&&this.highlighter&&this.highlighter.deactivate();if(this.possibleTarget=n)this.closestSide=this.possibleTarget.globalBounds().partNameNearest(id.obj.keys(id.Leash.connectionPoints),this.globalPosition),this.highlighter=$world.highlightMorph($world,this.possibleTarget,!1,[this.closestSide]),this.highlighter.show(),this.highlighter.get("name tag").value=this.leash.getLabelFor(this.possibleTarget)}a.state.endpoint=this;this.leash.onEndpointDrag(a)}},{key:"onDragEnd",value:function(){$world.removeHighlighters();
this.possibleTarget&&this.closestSide&&this.attachTo(this.possibleTarget,this.closestSide)}},{key:"getConnectionPoint",value:function(){var a=this.connectedMorph,e=a.isPath,n=a.isPolygon,q=a.vertices,r=a.origin;a=this.connectedMorph.globalBounds();if((e||n)&&"center"!=this.attachedSide){e=q.map(function(y){return id.pt(y.x,y.y).addPt(r)});n=id.Rectangle.unionPts(e);var v=n[this.attachedSide]();n=n.center().addPt(n.center().subPt(v));n=id.Shapes.line(v.x,v.y,n.x,n.y);e=id.Shapes.polyline(id.arr.flatten(e.map(function(y){return[y.x,
y.y]})));e=id.arr.min(id.Intersection.intersect(e,n).points,function(y){return id.pt(y.x,y.y).dist(v)});return id.pt(e.x,e.y).addPt(a.topLeft())}return a[this.attachedSide]()}},{key:"update",value:function(a){a&&!["position","extent","rotation","scale"].includes(a.prop)&&a.target!=this.connectedMorph||!this.connectedMorph||(a=this.getConnectionPoint(),a=this.leash.localize(a),this.vertex.position=a,this.relayout())}},{key:"clearConnection",value:function(){this.connectedMorph&&(id.disconnect(this.connectedMorph,
"onChange",this,"update"),this.connectedMorph=null)}},{key:"relayout",value:function(a){var e=this.vertex.position,n=e.x;e=e.y;var q=this.leash.borderWidth;a&&a.meta&&a.meta.animation?this.animate({center:id.pt(n+q,e+q),duration:a.duration}):this.center=id.pt(n+q,e+q)}},{key:"attachTo",value:function(a,e){this.clearConnection();this.leash.world()||this.leash.openInWorld(a.globalPosition);this.connectedMorph=a;this.attachedSide=e;this.vertex.controlPoints=this.leash.controlPointsFor(e,this);this.update();
id.connect(this.connectedMorph,"onChange",this,"update")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LeashEndpoint"}},{key:"properties",get:function(){return{index:{},leash:{},nativeCursor:{defaultValue:"-webkit-grab"},attachedSide:{},connectedMorph:{},draggable:{defaultValue:!0},vertex:{after:["leash"],get:function(){return this.leash.vertices[this.index]},set:function(a){this.leash.vertices[this.index]=a;this.leash.vertices=this.leash.vertices}}}}}],d,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:444,end:4597})})(id.Ellipse);var tL=Ka("bE",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),h=d.hasOwnProperty("Leash")&&"function"===typeof d.Leash?d.Leash:d.Leash=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ac(h,b,[{key:"onMouseDown",value:function(a){this.updateEndpointStyles()}},{key:"updateEndpointStyles",value:function(){Object.assign(this.startPoint,this.getEndpointStyle(0));Object.assign(this.endPoint,this.getEndpointStyle(1));this.relayout()}},{key:"remove",value:function(){ac._get(Object.getPrototypeOf(h.prototype),"remove",this).call(this);this.startPoint.clearConnection();this.endPoint.clearConnection()}},{key:"onEndpointDrag",value:function(a){a.state.endpoint.vertex.position=
a.state.endpoint.vertex.position.addPt(a.state.dragDelta);this.relayout()}},{key:"getEndpointStyle",value:function(a){return Object.assign({},this.endpointStyle,{},0==a?this.endpointStyle.start:this.endpointStyle.end)}},{key:"endpoint",value:function(a){var e=this.vertices[a];return new id.LeashEndpoint({index:a,leash:this,position:id.pt(e.x,e.y)})}},{key:"controlPointsFor",value:function(a,e){a=id.Leash.connectionPoints[a];a=e==this.startPoint?a.negated():a;return{previous:a.scaleBy(100),next:a.negated().scaleBy(100)}}},
{key:"relayout",value:function(a){if(!a||["vertices","position"].includes(a.prop))this.startPoint.relayout(a),this.endPoint.relayout(a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Leash"}},{key:"connectionPoints",get:function(){return{topCenter:id.pt(0,-1),topLeft:id.pt(-1,-1),rightCenter:id.pt(1,0),bottomRight:id.pt(1,1),bottomCenter:id.pt(0,1),bottomLeft:id.pt(-1,1),leftCenter:id.pt(-1,0),topRight:id.pt(1,-1),center:id.pt(0,0)}}},{key:"properties",get:function(){return{start:{defaultValue:id.pt(0,
0)},end:{defaultValue:id.pt(0,0)},canConnectTo:{defaultValue:function(a){return!0}},getLabelFor:{defaultValue:function(a){return a.name}},reactsToPointer:{defaultValue:!1},acceptsDroppedMorphs:{defaultValue:!1},direction:{type:"Enum",values:["unidirectional","outward","inward"],defaultValue:"unidirectional"},endpointStyle:{isStyleProp:!0,defaultValue:{fill:id.Color.black,origin:id.pt(3.5,3.5),extent:id.pt(10,10),nativeCursor:"-webkit-grab"}},borderWidth:{defaultValue:2},borderColor:{defaultValue:id.Color.black},
fill:{defaultValue:id.Color.transparent},vertices:{after:["start","end","borderWidth"],initialize:function(){this.vertices=[this.start,this.end]}},submorphs:{initialize:function(){this.submorphs=[this.startPoint=this.endpoint(0),this.endPoint=this.endpoint(1)];id.connect(this,"onChange",this,"relayout");this.updateEndpointStyles()}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:4606,end:7493})}(id.Path));id.Leash=tL;id.Leash=tL;id.Leash=tL;var uL=Ka("bn",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),h=d.hasOwnProperty("Slider")&&"function"===typeof d.Slider?d.Slider:d.Slider=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"normalize",value:function(a){return Math.abs(a/
(this.max-this.min))}},{key:"update",value:function(a){a=void 0===a?this.value:a;a=(this.width-15)*this.normalize(a);this.getSubmorphNamed("slideHandle").center=id.pt(a+7.5,10)}},{key:"onSlide",value:function(a,e){a=id.num.roundTo(this.value+e.x/this.width,.01);this.value=a=Math.max(this.min,Math.min(this.max,a));this.update(a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Slider"}},{key:"properties",get:function(){return{value:{},min:{},max:{},height:{defaultValue:20},fill:{defaultValue:id.Color.transparent},
draggable:{defaultValue:!1},submorphs:{after:["value","max","min"],initialize:function(){var a=new id.SliderHandle({slider:this,name:"slideHandle"});this.submorphs=[new id.Path({borderColor:id.Color.gray.darker(),borderWidth:2,vertices:[id.pt(0,0),id.pt(this.width,0)],position:id.pt(0,this.height/2)}),a];id.connect(this,"extent",this,"update");this.update()}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:7502,end:8800})}(id.Morph));id.Slider=uL;id.Slider=uL;id.Slider=uL;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),h=d.hasOwnProperty("SliderHandle")&&"function"===typeof d.SliderHandle?d.SliderHandle:d.SliderHandle=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"onDragStart",value:function(a){this.valueView=
(new id.Tooltip({description:""})).openInWorld(a.hand.position.addXY(10,10))}},{key:"onDrag",value:function(a){this.slider.onSlide(this,a.state.dragDelta);this.valueView.description=this.slider.value;this.valueView.position=a.hand.position.addXY(10,10)}},{key:"onDragEnd",value:function(a){this.valueView.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SliderHandle"}},{key:"properties",get:function(){return{slider:{},fill:{defaultValue:id.Color.gray},borderColor:{defaultValue:id.Color.gray.darker()},
borderWidth:{defaultValue:1},dropShadow:{defaultValue:new id.ShadowObject({blur:5})},extent:{defaultValue:id.pt(15,15)},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8802,end:9638})})(id.Ellipse);var vL=Ka("aA",
function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),h=d.hasOwnProperty("ValueScrubber")&&"function"===typeof d.ValueScrubber?d.ValueScrubber:d.ValueScrubber=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"relayout",value:function(){this.scaleToBounds&&(this.scale=Math.min(1,this.width/(this.textBounds().width+0)))}},{key:"onKeyDown",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),
"onKeyDown",this).call(this,a);if("Enter"==a.keyCombo){var e=$jscomp.makeIterator(this.textString.replace("\n","").split(" ")),n=e.next().value;e.next();"string"===typeof n&&(this.value=parseFloat(n),this.scrub(this.scrubbedValue));a.stop()}}},{key:"scrub",value:function(a){this.field.update(a)}},{key:"onDragStart",value:function(a){this.execCommand("toggle active mark");this.initPos=a.position;this.factorLabel=(new id.Tooltip({description:"1x"})).openInWorld(a.hand.position.addXY(10,10));a.hand.extent=
id.pt(30,30);a.hand.nativeCursor="ew-resize";a.hand.fill=id.Color.transparent;a.hand.reactsToPointer=!0}},{key:"getScaleAndOffset",value:function(a){var e=a.position.subPt(this.initPos);a=e.x;e=id.num.roundTo(Math.exp(-e.y/$world.height*4),.01)*this.baseFactor;return{offset:a,scale:e}}},{key:"onDrag",value:function(a){var e=this.getScaleAndOffset(a),n=e.scale;e=this.getCurrentValue(e.offset,n);this.scrub(e);e=this.floatingPoint?e.toFixed(3):id.obj.safeToString(e);this.unit&&(e+=" "+this.unit);this.replace(this.documentRange,
e,!1,this.scaleToBounds,!1,!1);this.factorLabel.description=n.toFixed(3)+"x";this.factorLabel.position=a.hand.position.addXY(10,10);a.hand.moveBy(id.pt(-5,-5));this.relayout()}},{key:"getCurrentValue",value:function(a,e){return Math.max(this.min,Math.min(this.max,this.scrubbedValue+(this.floatingPoint?a*e:Math.round(a*e))))}},{key:"onDragEnd",value:function(a){var e=this.getScaleAndOffset(a);this.value=this.getCurrentValue(e.offset,e.scale);this.factorLabel.softRemove();a.hand.extent=id.pt(1,1);a.hand.fill=
id.Color.orange;a.hand.reactsToPointer=!1}},{key:"value",set:function(a){this.scrubbedValue=a=Math.max(this.min,Math.min(this.max,a));a=this.floatingPoint?a.toFixed(3):id.obj.safeToString(a);a=this.unit?a+(" "+this.unit):a+"";this.replace(this.documentRange,a,!1,!0);this.relayout()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ValueScrubber"}},{key:"properties",get:function(){return{scaleToBounds:{defaultValue:!1,set:function(a){this.fixedWidth=!0;this.setProperty("scaleToBounds",
a)}},field:{derived:!0,get:function(){return this.owner}},value:{defaultValue:0},fill:{defaultValue:id.Color.transparent},draggable:{defaultValue:!0},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},baseFactor:{defaultValue:1},floatingPoint:{defaultValue:!1}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:9647,end:12810})}(id.Text));id.ValueScrubber=vL;id.ValueScrubber=vL;id.ValueScrubber=vL;var ZC=Ka("br",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),h=d.hasOwnProperty("CheckBox")&&"function"===typeof d.CheckBox?d.CheckBox:d.CheckBox=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"trigger",value:function(){try{this.checked=!this.checked,
id.signal(this,"toggle",this.checked)}catch(e){var a=this.world();a?a.logError(e):console.error(e)}}},{key:"onMouseDown",value:function(a){this.active&&this.trigger()}},{key:"render",value:function(a){return a.renderCheckBox(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CheckBox"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},extent:{defaultValue:id.pt(15,15)},borderWidth:{defaultValue:0},active:{defaultValue:!0},checked:{defaultValue:!1},fill:{defaultValue:id.Color.transparent},
nativeCursor:{defaultValue:"pointer"}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:12819,end:13565})}(id.Morph));id.CheckBox=ZC;id.CheckBox=ZC;id.CheckBox=ZC;var wL=Ka("aB",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),h=d.hasOwnProperty("LabeledCheckBox")&&
"function"===typeof d.LabeledCheckBox?d.LabeledCheckBox:d.LabeledCheckBox=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"disable",value:function(){this.active=!1;this.labelMorph.opacity=.5}},{key:"enable",value:function(){this.active=!0;this.labelMorph.opacity=1}},{key:"trigger",value:function(){this.checkboxMorph.trigger()}},{key:"onMouseDown",value:function(a){this.active&&this.trigger();a.stop()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LabeledCheckBox"}},{key:"example",value:function(){(new id.LabeledCheckBox({label:"foo"})).openInWorld()}},{key:"properties",get:function(){return{name:{defaultValue:"LabeledCheckBox"},alignCheckBox:{defaultValue:"left",type:"Enum",values:["left","right"],set:function(a){this.layout=new id.HorizontalLayout({direction:"left"==a?"leftToRight":"rightToLeft"});this.setProperty("alignCheckBox",a)}},layout:{initialize:function(){this.layout=
new id.HorizontalLayout({direction:"left"==this.alignCheckBox?"leftToRight":"rightToLeft"})}},label:{defaultValue:"label",after:["submorphs"],derived:!0,get:function(){return this.labelMorph.value},set:function(a){this.labelMorph.value=a}},checked:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.checked},set:function(a){this.checkboxMorph.checked=a;id.signal(this,"checked",a)}},active:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.active},set:function(a){this.checkboxMorph.active=
a}},labelMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("label")}},checkboxMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("checkbox")}},submorphs:{initialize:function(){this.submorphs=[new id.CheckBox({name:"checkbox"}),new id.Label({nativeCursor:"pointer",name:"label",padding:id.Rectangle.inset(5,3)})];id.connect(this,"alignCheckBox",this,"extent");id.connect(this.checkboxMorph,"checked",this,"checked")}}}}}],d,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:13574,end:16133})}(id.Morph));id.LabeledCheckBox=wL;id.LabeledCheckBox=wL;id.LabeledCheckBox=wL;var xL=Ka("bm",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),h=d.hasOwnProperty("ModeSelector")&&"function"===typeof d.ModeSelector?d.ModeSelector:d.ModeSelector=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"createLabels",value:function(a,e,n){var q=this;n=void 0===n?{}:n;return id.arr.zip(a,e).map(function(r){r=$jscomp.makeIterator(r);var v=r.next().value,y=r.next().value;r=n[v];r=id.morph(Object.assign({name:v+"Label",master:"styleguide://SystemWidgets/mode label",type:"label",value:v},r&&{tooltip:r}));id.connect(r,"onMouseDown",q,"update",{updater:function(D){D(v,
y)},varMapping:{name:v,value:y}});return r})}},{key:"relayout",value:function(a){a=void 0===a?!0:a;var e=this,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress){if(!e.currentLabel||!e.layout)return r.return();e.layout.forceLayout();n=e.get("typeMarker");q=e.currentLabel.bounds();return a?r.yield(n.animate({bounds:q,duration:200}),3):(n.setBounds(q),r.jumpTo(2))}r.jumpToEnd()})}},{key:"animateFontColor",value:function(a,e,n){var q=a.fontColor;a.animate({customTween:function(r){return a.fontColor=
q.interpolate(r,e)},duration:n})}},{key:"update",value:function(a,e,n){n=void 0===n?!1:n;var q=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){r=q.get(a+"Label");if(r==q.currentLabel)return v.return();q.getSubmorphsByStyleClassName("Label").forEach(function(y){y!=r&&q.animateFontColor(y,q.fontColor,200)});q.currentLabel=r;!n&&id.signal(q,a,e);!n&&id.signal(q,"switchLabel",e);q.relayout(!n);return v.yield(q.animateFontColor(r,q.selectionFontColor,200),0)})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ModeSelector"}},{key:"example",value:function(){(new id.ModeSelector({items:{foo:{},trottel:{},babbel:{}}})).openInWorld()}},{key:"properties",get:function(){return{items:{derived:!0,set:function(a){id.obj.isArray(a)?this.keys=this.values=a:(this.keys=id.obj.keys(a),this.values=id.obj.values(a))}},height:{defaultValue:30},init:{},keys:{before:["layout"]},values:{before:["layout"]},tooltips:{},fontColor:{defaultValue:id.Color.black},selectionFontColor:{defaultValue:id.Color.white},
master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/mode selector"}}},layout:{after:["items","keys","values"],initialize:function(){this.keys&&(this.layout=new id.GridLayout({rows:[0,{paddingBottom:10}],columns:[0,{fixed:5},this.keys.length+2,{fixed:5}],grid:[[null].concat($jscomp.arrayFromIterable(id.arr.interpose(this.keys.map(function(a){return a+"Label"}),null)),[null])],autoAssign:!1,fitToCell:!1}))}},submorphs:{after:["items","keys","values","fontColor"],initialize:function(){this.keys&&
(this.submorphs=[{name:"typeMarker",isLayoutable:!1}].concat($jscomp.arrayFromIterable(this.createLabels(this.keys,this.values,this.tooltips))),id.connect(this,"extent",this,"relayout"),this.update(this.init?this.init:this.keys[0],this.values[this.keys.includes(this.init)?this.keys.indexOf(this.init):0],!0))}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:16142,end:19750})}(id.Morph));id.ModeSelector=xL;id.ModeSelector=xL;id.ModeSelector=xL;var yL=Ka("aC",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),h=d.hasOwnProperty("DropDownSelector")&&"function"===typeof d.DropDownSelector?d.DropDownSelector:d.DropDownSelector=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return ac(h,b,[{key:"build",value:function(){this.dropDownLabel=id.Icon.makeLabel("chevron-circle-down",{opacity:0,name:"dropDownIcon"});this.submorphs=[{type:"label",name:"currentValue"},this.dropDownLabel]}},{key:"getMenuEntries",value:function(){var a=this,e=this.getNameFor(this.selectedValue);return[].concat($jscomp.arrayFromIterable(void 0!=this.selectedValue?[{command:e,target:this}]:[]),$jscomp.arrayFromIterable(id.arr.compact(this.commands.map(function(n){return n.name!=e&&{command:n.name,
target:a}}))))}},{key:"commands",get:function(){var a=this;return id.obj.isArray(this.values)?this.values.map(function(e){return{name:String(e),exec:function(){id.signal(a,"update",e);a.selectedValue=e}}}):id.properties.forEachOwn(this.values,function(e,n){return{name:e,exec:function(){id.signal(a,"update",n);a.selectedValue=n}}})}},{key:"getNameFor",value:function(a){return this.getCurrentValue?this.getCurrentValue():id.obj.isArray(this.values)?id.obj.safeToString(a):id.obj.safeToString(id.properties.nameFor(this.values,
a))}},{key:"relayout",value:function(){var a=this.getNameFor(this.selectedValue),e=this.get("currentValue");"undefined"==a?(e.value="Not set",e.fontColor=id.Color.gray):(e.value=a,e.fontColor=id.Color.black)}},{key:"onHoverIn",value:function(){this.dropDownLabel.animate({opacity:1,duration:300})}},{key:"onHoverOut",value:function(){this.dropDownLabel.animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(a){this.menu=this.world().openWorldMenu(a,this.getMenuEntries());this.menu.hasFixedPosition=
!0;this.menu.topLeft=this.globalPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropDownSelector"}},{key:"properties",get:function(){return{values:{defaultValue:[]},getCurrentValue:{defaultValue:void 0},selectedValue:{after:["submorphs","values","getCurrentValue"],set:function(a){this.setProperty("selectedValue",a);this.relayout()}},fontColor:{isStyleProp:!0,defaultValue:id.Color.black},fontSize:{isStyleProp:!0,defaultValue:12},fontFamily:{isStyleProp:!0,defaultValue:"Sans-Serif"},
border:{defaultValue:{radius:3,color:id.Color.gray.darker(),style:"solid"}},padding:{defaultValue:1},isSelected:{defaultValue:"false",set:function(a){this.setProperty("isSelected",a);this.fontColor=a?id.Color.white:id.Color.black}},layout:{initialize:function(){this.layout=new id.HorizontalLayout({spacing:this.padding})}},submorphs:{initialize:function(){this.build()}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:19759,end:23034})}(id.Morph));id.DropDownSelector=yL;id.DropDownSelector=yL;id.DropDownSelector=yL;var zL=Ka("bq",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),h=d.hasOwnProperty("SearchField")&&"function"===typeof d.SearchField?d.SearchField:d.SearchField=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,
b,[{key:"parseInput",value:function(){var a=Array.from(this.textString).reduce(function(n,q){if("\\"===q&&!n.escaped)return n.escaped=!0,n;" "!==q||n.escaped?(n.spaceSeen=!1,n.current+=q):(!n.spaceSeen&&n.current&&(n.tokens.push(n.current),n.current=""),n.spaceSeen=!0);n.escaped=!1;return n},{tokens:[],current:"",escaped:!1,spaceSeen:!1});a.current&&a.tokens.push(a.current);var e=a.tokens.map(function(n){return n.toLowerCase()});return{tokens:a.tokens,lowercasedTokens:e}}},{key:"clearInput",value:function(){this.textString=
"";id.signal(this,"searchInput",this.parseInput());this.onBlur()}},{key:"matches",value:function(a){return this.textString?this.filterFunction.call(this,this.parseInput(),{string:a}):!0}},{key:"onChange",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onChange",this).call(this,a);a="replace"===a.selector;this.isFocused();this.get("placeholder icon")&&(this.get("placeholder icon").visible=!!this.textString);this.textString.includes("\n")&&(this.textString=this.textString.replace("\n",
""),this.owner.focus());this.active&&a&&id.signal(this,"searchInput",this.parseInput())}},{key:"onBlur",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onBlur",this).call(this,a);this.active=!1;this.get("placeholder").visible=!this.textString;this.animate({styleClasses:["idle"],duration:300})}},{key:"onFocus",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onFocus",this).call(this,a);this.animate({styleClasses:["selected"],duration:300});this.get("placeholder").visible=
!1;this.active=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchField"}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search field"}}},selectedFontColor:{isStyleProp:!0,defaultValue:id.Color.black},idleFontColor:{isStyleProp:!0,defaultValue:id.Color.gray},borderColor:{defaultValue:id.Color.gray},layout:{initialize:function(){this.layout=new id.HorizontalLayout({autoResize:!1,
direction:"rightToLeft"})}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(a){this.setProperty("fuzzy",a);a?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var a=this.getProperty("filterFunction");
if(!a)return this.defaultFilterFunction;"string"===typeof a&&(a=eval("("+a+")"));return a}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(a,e){return a.lowercasedTokens.every(function(n){return e.string.toLowerCase().includes(n)})})}},fuzzySortFunction:{get:function(){var a=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(e,n){var q=String(id.PropertyPath("string"===typeof a.fuzzy?a.fuzzy:
"string").get(n)).toLowerCase(),r=0;e.lowercasedTokens.forEach(function(v){q.startsWith(v)?r-=10:q.includes(v)&&(r-=5)});return id.arr.sum(e.lowercasedTokens.map(function(v){return id.string.levenshtein(q.toLowerCase(),v)}))+r})}},fuzzyFilterFunction:{get:function(){var a=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(e,n){var q="string"===typeof a.fuzzy?a.fuzzy:"string";if(e.lowercasedTokens.every(function(v){return n.string.toLowerCase().includes(v)}))return!0;var r=
String(id.PropertyPath(q).get(n)).toLowerCase();return 3>=id.arr.sum(e.lowercasedTokens.map(function(v){return id.string.levenshtein(r,v)}))})}},placeHolder:{defaultValue:"Search"},submorphs:{after:["placeHolder"],initialize:function(){this.submorphs=[{type:"label",name:"placeholder",isLayoutable:!1,value:this.placeHolder,reactsToPointer:!1},id.Icon.makeLabel("times-circle",{padding:id.rect(2,4,3,0),fontSize:14,visible:!1,fixedHeight:!0,autofit:!1,extent:id.pt(20,22),name:"placeholder icon",fontColor:id.Color.gray,
nativeCursor:"pointer"})];id.connect(this.get("placeholder icon"),"onMouseDown",this,"clearInput")}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:23078,end:29598})}(id.Text));id.SearchField=zL;id.SearchField=zL;id.SearchField=zL;var bV=Object.freeze({__proto__:null,Leash:tL,
Slider:uL,ValueScrubber:vL,CheckBox:ZC,LabeledCheckBox:wL,ModeSelector:xL,DropDownSelector:yL,SearchField:zL}),ej=lively.FreezerRuntime.recorderFor("lively.components/index.js");Object.assign(ej,Fxa);Object.assign(ej,Exa);Object.assign(ej,Gxa);Object.assign(ej,Hxa);Object.assign(ej,Ixa);Object.assign(ej,Jxa);ej.Window=$U;ej.prompts=aV;ej.widgets=bV;ej.LoadingIndicator=dz;ej.addClassMappings=$z;ej.List=fz;ej.DropDownList=YC;ej.Button=ez;ej.CheckBox=ZC;ej.addClassMappings({list:ej.List,dropdownlist:ej.DropDownList,
button:ej.Button,checkbox:ej.CheckBox,labeledcheckbox:ej.widgets.LabeledCheckBox});ej.Window=$U;ej.Window=$U;ej.LoadingIndicator=dz;ej.LoadingIndicator=dz;ej.prompts=aV;ej.prompts=aV;ej.widgets=bV;ej.widgets=bV;var xm=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js");xm.Morph=xj;xm.MorphicDB=zq;xm.LoadingIndicator=dz;xm.resource=Uc;var gz=function(b){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js"),h=d.hasOwnProperty("WorldLoadingScreen")&&"function"===
typeof d.WorldLoadingScreen?d.WorldLoadingScreen:d.WorldLoadingScreen=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"commands",get:function(){var a=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;a.setBounds($world.windowBounds());a.get("json target indicator").topRight=a.innerBounds().insetBy(25).topRight()}}]}},{key:"__head_html__",get:function(){return'\n<script> window.AUTH_SERVER_URL; \x3c/script>\n<style type="text/css">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"onLoad",value:function(){var a=this,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){if(!lively.FreezerRuntime)return y.jumpTo(0);e=a.get("package loading indicator");n=a.get("css loading screen");q=a.getWorldName();r=a.getFilePath();(v=a.getSnapshot())?(e.isLayoutable=e.visible=!1,n.isLayoutable=n.visible=!0):(e.startStepping("updateProgressBar"),document.body.style.backgroundColor="black");r&&a.get("json target indicator").animate({opacity:1,duration:300});
return y.yield(a.transitionToLivelyWorld({worldName:q,filePath:r,snapshot:v},e),3)}e.stopStepping();y.jumpToEnd()})}},{key:"transitionToLivelyWorld",value:function(a,e){var n=a.worldName,q=a.filePath,r=a.snapshot,v=this,y,D,E,I,K,P,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){switch(aa.nextAddress){case 1:return y=xm.resource(window.SYSTEM_BASE_URL||document.location.origin).join("objectdb/").url,D=v.get("package loading indicator"),aa.yield(Promise.resolve().then(function(){return lda}),
2);case 2:E=aa.yieldResult;I=E.bootstrap;if(!(K=n&&"__newWorld__"!=n)){aa.jumpTo(3);break}return aa.yield(xm.MorphicDB.named("lively.morphic/objectdb/morphicdb",{serverURL:y}).exists("world",n),4);case 4:K=!aa.yieldResult.exists;case 3:if(K)return aa.return(v.indicateMissingWorld(!0));if(!(P=q)){aa.jumpTo(5);break}return aa.yield(xm.resource(document.location.origin).join(q).exists(),6);case 6:P=!aa.yieldResult;case 5:if(P)return aa.return(v.indicateMissingWorld(!0));N=xm.LoadingIndicator.open("...starting bootstrap process...",
{animated:!0,delay:1E3});r&&(N.visible=!1);e.opacity=1;return aa.yield(I({worldName:n,filePath:q,loadingIndicator:N,progress:D,snapshot:r}),0)}})}},{key:"getWorldName",value:function(){return document.location.href.endsWith("worlds/new")?"__newWorld__":xm.resource(document.location.href).query().name||window.WORLD_NAME||!1}},{key:"getFilePath",value:function(){return xm.resource(document.location.href).query().file||!1}},{key:"getSnapshot",value:function(){return xm.resource(document.location.href).query().snapshot||
window.SNAPSHOT_PATH||!1}},{key:"indicateMissingWorld",value:function(a){this.get("package loading indicator").visible=!a;this.get("broken heart").visible=this.get("broken heart").isLayoutable=a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldLoadingScreen"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}}}}}],d,{pathInPackage:function(){return"loading-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:158,end:3675})}(xm.Morph);xm.WorldLoadingScreen=gz;xm.WorldLoadingScreen=gz;xm.WorldLoadingScreen=gz;var jg=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js");jg.Morph=xj;jg.MorphicDB=zq;jg.World=vr;jg.easings=so;jg.morph=zj;jg.promise=bg;jg.string=Ng;jg.date=hq;jg.Color=If;jg.pt=xh;jg.LoadingIndicator=dz;jg.resource=Uc;jg.missingSVG=
'data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
var cV=function(b){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),h=d.hasOwnProperty("TitleWrapper")&&"function"===typeof d.TitleWrapper?d.TitleWrapper:d.TitleWrapper=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"startMovingRight",value:function(){var a=this;this.animate({customTween:function(e){a._hoverDelta=e}})}},{key:"stopMovingRight",value:function(){var a=this;this.animate({customTween:function(e){a._hoverDelta=
1-e}})}},{key:"startMovingLeft",value:function(){var a=this;this.animate({customTween:function(e){a._hoverDelta=-e}})}},{key:"stopMovingLeft",value:function(){var a=this;this.animate({customTween:function(e){a._hoverDelta=-1+e}})}},{key:"startOnce",value:function(a){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){if(e._fn)return n.return();e._fn=a;return n.yield(a(),2)}e._fn=null;n.jumpToEnd()})}},{key:"updateTitle",value:function(){var a=this;if(this.title){var e=
$jscomp.makeIterator(this.submorphs).next().value;e.left+=this._hoverDelta;e.right<this.width-20&&-1==this._hoverDelta?this.startOnce(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?n.yield(a.stopMovingLeft(),2):n.yield(a.startMovingRight(),0)})}):20<e.left&&1==this._hoverDelta&&this.startOnce(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?n.yield(a.stopMovingRight(),2):n.yield(a.startMovingLeft(),
0)})})}}},{key:"startShowingFullTitle",value:function(){var a=this,e,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress){if(!a.title)return q.return();e=$jscomp.makeIterator(a.submorphs);n=e.next().value;n.textString=a.title;return q.yield(n.whenRendered(),2)}a._hoverDelta=0;a.startStepping("updateTitle");n.right>a.width&&a.startMovingLeft();q.jumpToEnd()})}},{key:"stopShowingFullTitle",value:function(){if(this.title){var a=this.submorphs[0];a.textString=jg.string.truncate(this.title,
18,"...");this.stopStepping("updateTitle");this._hoverDelta=0;a.left=0}}},{key:"onHoverIn",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onHoverIn",this).call(this,a);this.startShowingFullTitle()}},{key:"onHoverOut",value:function(a){ac._get(Object.getPrototypeOf(h.prototype),"onHoverOut",this).call(this,a);this.stopShowingFullTitle()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TitleWrapper"}},{key:"properties",get:function(){return{title:{derived:!0,set:function(a){this.setProperty("title",
a);a&&(this.submorphs[0].textString=jg.string.truncate(a,18,"..."))}}}}}],d,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:350,end:2487})}(jg.Morph);jg.TitleWrapper=cV;jg.TitleWrapper=cV;jg.TitleWrapper=cV;var hz=function(b){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),
h=d.hasOwnProperty("WorldPreview")&&"function"===typeof d.WorldPreview?d.WorldPreview:d.WorldPreview=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(h,b,[{key:"relayout",value:function(){this.setBounds(this.world().visibleBounds())}},{key:"onLoad",value:function(){this.ui.spinner.visible=!1}},{key:"displayPreview",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.yield(a.initWithCommit(a._commit),
0)})}},{key:"initWithCommit",value:function(a){var e=this,n,q,r,v,y,D,E,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(K){if(1==K.nextAddress)return n=e.ui,q=n.preview,r=n.timestamp,v=n.title,y=n.description,D=n.previewContainer,e.opacity=.5,D.opacity=0,K.yield(e.whenRendered(),2);if(3!=K.nextAddress)return e._commit=a,q.imageUrl=a.preview||jg.missingSVG,E=a.author,I=E.name,I=I.startsWith("guest-")?"guest":I,r.value=[I,{fontSize:13,fontWeight:"bold",paddingTop:"1px"},jg.date.format(a.timestamp,
" - d.m.yy HH:MM"),{fontWeight:"bold",fontSize:12,paddingTop:"2px"}],v.title=a.name,y.value=a.description,K.yield(e.whenRendered(),3);D.opacity=1;e.animate({opacity:1,duration:300});K.jumpToEnd()})}},{key:"openAnimated",value:function(a){a=void 0===a?$world.visibleBounds():a;var e=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return n=jg.morph(Object.assign({},e.spec(),{reactsToPointer:!1,renderOnGPU:!0,submorphs:[e.ui.spinner.spec()]})).openInWorld(),
n.hasFixedPosition=!0,n.globalPosition=e.globalPosition,n.opacity=0,q.yield(n.whenRendered(),2);case 2:return q.yield(n.animate({opacity:1,duration:300}),3);case 3:return n.dropShadow=!1,n.animate({bounds:a,borderRadius:0,duration:500,easing:jg.easings.inOutQuint}),n.respondsToVisibleWindow=!0,q.yield(n.ui.spinner.animate({center:n.innerBounds().center(),duration:500,easing:jg.easings.inOutQuint}),4);case 4:return q.yield(jg.promise.delay(1E3),5);case 5:return q.return(n)}})}},{key:"openWorld",value:function(){var a=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(a.openAnimated(),2);a.loadWorld();e.jumpToEnd()})}},{key:"loadWorld",value:function(){var a=this,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){e=a._commit;n=e._id;q=e.name;if(lively.FreezerRuntime)return r=jg.LoadingIndicator.open("...starting bootstrap process...",{animated:!0,delay:1E3}),a.transitionToLivelyWorld(document.location.origin,a._commit,
r),y.jumpTo(0);v=jg.LoadingIndicator.open("loading "+q);return y.yield(jg.World.loadFromCommit(n,void 0,{morphicDB:jg.MorphicDB.default}),3)}v.remove();y.jumpToEnd()})}},{key:"transitionToLivelyWorld",value:function(a,e,n){var q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(jg.resource("part://partial freezing/package loading progress indicator").read(),2);if(3!=y.nextAddress)return q=y.yieldResult,y.yield(Promise.resolve().then(function(){return lda}),
3);r=y.yieldResult;v=r.bootstrap;return y.yield(v({commit:e,loadingIndicator:n,progress:q}),0)})}},{key:"showVersions",value:function(){var a=this,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return e=200,n=jg.easings.inOutExpo,q=a.ui,r=q.previewContainer,y.yield(jg.resource("part://partial freezing/version container").read(),2);if(3!=y.nextAddress)return v=y.yieldResult,v.name="version container",v.position=jg.pt(0,0),a.addMorph(v),v.reactsToPointer=
v.visible=!0,v.initializeFromStartCommit(a._commit),a.animate({width:515,duration:e,easing:n}),r.animate({opacity:0,duration:e}),y.yield(v.animate({opacity:1,duration:e}),3);r.reactsToPointer=r.visible=!1;y.jumpToEnd()})}},{key:"hideVersions",value:function(){var a=this,e,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=jg.easings.inOutExpo,n=a.ui,q=n.previewContainer,r=n.versionContainer,q.reactsToPointer=q.visible=!0,a.animate({width:245,duration:200,
easing:e}),q.animate({opacity:1,duration:200}),v.yield(r.animate({opacity:0,duration:200}),2);r.reset();r.remove();v.jumpToEnd()})}},{key:"toggleDeleteButton",value:function(a){this.ui.deleteButton.visible=a}},{key:"onHoverIn",value:function(a){this.toggleDeleteButton(!0)}},{key:"onHoverOut",value:function(a){this.toggleDeleteButton(!1)}},{key:"tryToDelete",value:function(){var a=this,e,n,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=300,n=a.ui,q=
n.previewContainer,v.yield(jg.resource("part://partial freezing/delete world prompt").read(),2);r=v.yieldResult;Object.assign(r,{name:"delete world prompt",position:jg.pt(0,0),opacity:0});a.addMorph(r);r.visible=!0;return v.yield(a.withAnimationDo(function(){r.opacity=1;a.dropShadow=a.dropShadow.with({color:jg.Color.black.withA(.5),blur:50});q.opacity=.3;q.blur=1},{duration:e}),0)})}},{key:"confirmDelete",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return e.yield(jg.MorphicDB.default.commit(Object.assign({},a._commit,{content:void 0,snapshot:null})),2);a.isComponent||a.owner.isWorld||a.owner.remove();e.jumpToEnd()})}},{key:"cancelDelete",value:function(){var a=this,e,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return e=a.ui,n=e.previewContainer,q=e.deleteWorldPrompt,r.yield(a.withAnimationDo(function(){Object.assign(n,{opacity:1,blur:0});a.dropShadow=a.dropShadow.with({color:jg.Color.rgba(0,
0,0,.11)});q.opacity=0},{duration:300}),2);q.remove();r.jumpToEnd()})}},{key:"onMouseUp",value:function(a){var e=this.ui,n=e.openButton,q=e.versionButton,r=e.deleteButton,v=e.closeVersionsButton,y=e.cancelDeleteButton;e=e.confirmDeleteButton;switch(a.targetMorph){case n:this.openWorld();break;case q:this.showVersions();break;case r:this.tryToDelete();break;case v:this.hideVersions();break;case e:this.confirmDelete();break;case y:this.cancelDelete()}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldPreview"}},
{key:"properties",get:function(){return{ui:{readOnly:!0,get:function(){return{previewContainer:this.getSubmorphNamed("preview container"),versionContainer:this.getSubmorphNamed("version container"),preview:this.getSubmorphNamed("preview"),timestamp:this.getSubmorphNamed("timestamp"),title:this.getSubmorphNamed("title wrapper"),description:this.getSubmorphNamed("description"),openButton:this.getSubmorphNamed("open button"),versionButton:this.getSubmorphNamed("version button"),spinner:this.getSubmorphNamed("spinner"),
deleteButton:this.getSubmorphNamed("delete button"),closeVersionsButton:this.getSubmorphNamed("close versions button"),versionList:this.getSubmorphNamed("version list"),deleteWorldPrompt:this.getSubmorphNamed("delete world prompt"),cancelDeleteButton:this.getSubmorphNamed("cancel delete button"),confirmDeleteButton:this.getSubmorphNamed("confirm delete button")}}}}}}],d,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:2500,end:10197})}(jg.Morph);jg.WorldPreview=hz;jg.WorldPreview=hz;jg.WorldPreview=hz;var iz=function(b){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),h=d.hasOwnProperty("WorldLandingPage")&&"function"===typeof d.WorldLandingPage?d.WorldLandingPage:d.WorldLandingPage=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return ac(h,b,[{key:"__loading_html__",get:function(){return"\n      <style>\n        "+this.loadingScreen.cssDeclaration+"\n      </style>\n      "+this.loadingScreen.html+"\n    "}},{key:"__head_html__",get:function(){return'\n<script> window.AUTH_SERVER_URL; \x3c/script>\n<link type="text/css" rel="stylesheet" id="lively-font-awesome" href="/lively.morphic/assets/font-awesome/css/font-awesome.css">\n<link type="text/css" rel="stylesheet" id="lively-font-inconsolata" href="/lively.morphic/assets/inconsolata/inconsolata.css">\n<style type="text/css" id="WorldLandingPage_7068CDA9_749E_4EC1_9BC4_50DF06EAA2BA-Nunito">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"commands",get:function(){var a=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;document.body.style.overflowY="hidden";a.setBounds($world.windowBounds());a.getSubmorphNamed("globe").extent=a.extent;a.ensureUserFlap();var e=a.getSubmorphNamed("a project browser");e&&(e.center=a.extent.scaleBy(.5))}}]}},{key:"ensureUserFlap",value:function(){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return $world.get("user flap")?
e.return():e.yield(jg.resource("part://SystemIDE/user flap master/dark").read(),2);if(3!=e.nextAddress)return a=e.yieldResult,a.name="user flap",a.showMorphControls=!1,a.hasFixedPosition=!0,a.openInWorld(),a.opacity=0,a.alignInWorld(),a.get("fast load toggler").refresh(),e.yield(jg.promise.delay(1E3),3);a.animate({opacity:1});e.jumpToEnd()})}},{key:"beforePublish",value:function(){var a=this.getSubmorphNamed("a project browser");a&&a.remove()}},{key:"onLoad",value:function(){var a=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==
n.nextAddress)return n.yield(a.whenRendered(),2);if(!lively.FreezerRuntime)return n.return();$world.fill=jg.Color.black;document.documentElement.style.background=jg.Color.black;a.showWorldList().then(function(){return document.getElementById("loading-screen").remove()});a.getSubmorphNamed("globe").fullyLoaded();(e=document.getElementById("loading screen"))&&e.remove();n.jumpToEnd()})}},{key:"showWorldList",value:function(){var a=this,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress){if(e=a.getSubmorphNamed("a poject browser"))return y.jumpTo(2);n=a;q=n.addMorph;r=n;return y.yield(jg.resource("part://partial freezing/project browser").read(),3)}2!=y.nextAddress&&(e=q.call(r,y.yieldResult));v=e;v.name="a project browser";a.reset();v.showCloseButton=!1;v.extent=jg.pt(1110,800).minPt(a.extent.subPt(jg.pt(50,150)));v.center=a.innerBounds().center();v.animate({opacity:1,duration:300});v.displayWorlds();v.hasFixedPosition=!1;y.jumpToEnd()})}},{key:"reset",value:function(){var a=
this.getSubmorphNamed("a project browser");a.opacity=0;a.center=this.innerBounds().center()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldLandingPage"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}},loadingScreen:{}}}}],d,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:10208,end:13426})}(jg.Morph);jg.WorldLandingPage=iz;jg.WorldLandingPage=iz;jg.WorldLandingPage=iz;var Ur=lively.FreezerRuntime.recorderFor("PartialFreezing/index.js");Ur.WorldLoadingScreen=gz;Ur.WorldLandingPage=iz;Ur.WorldPreview=hz;Ur.WorldLoadingScreen=gz;Ur.WorldLoadingScreen=gz;Ur.WorldLandingPage=iz;Ur.WorldLandingPage=iz;Ur.WorldPreview=hz;Ur.WorldPreview=hz;var Vd=lively.FreezerRuntime.recorderFor("PartialFreezing/bootstrap.js");
Vd.bootstrap=qI;Vd.fastPrepLivelySystem=function(b){return Promise.resolve().then(function(){b.status="starting fast system preparation..."}).then(function(){return Vd.resource(System.baseURL).join("package-registry.json").readJson()}).then(function(d){System["__lively.modules__packageRegistry"]=lively.modules.PackageRegistry.fromJSON(System,d);return System}).then(function(){return Vd.loadViaScript(Vd.resource(System.baseURL).join("/lively.user/dist/lively.user-client.js").url)})};Vd.installFetchHook=
function(b){function d(h,a){Vd.loads++;b.status="loading "+Vd.string.truncateLeft(a.name.replace(window.System.baseURL,""),25,"...");b.progress=Vd.loads/(800-4*Object.keys(Vd.extractedModules).length);b.center=$world.innerBounds().center();return h(a)}window.__logFetch=d;lively.modules.installHook("fetch",d)};Vd.extractModules=function(b){Object.keys(lively.FreezerRuntime.registry).filter(function(d){return d.startsWith(b)}).forEach(function(d){Vd.extractedModules[Vd.resource(System.baseURL).join(d).url]=
Object.assign({},lively.FreezerRuntime.registry[d].exports)})};Vd.loadComponents=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return b.yield(wb.import("./world-68a8c34d.js").then(function(d){return d.w}),2);case 2:return b.yield(wb.import("./editor-plugin-0bd751e4.js").then(function(d){return d.e}),3);case 3:return b.yield(wb.import("./editor-plugin-43860d5b.js"),4);case 4:return b.yield(wb.import("./index-a98bf65c.js"),5);case 5:return b.yield(Promise.resolve().then(function(){return Qwa}),
6);case 6:return b.yield(Promise.resolve().then(function(){return Rwa}),7);case 7:return b.yield(Promise.resolve().then(function(){return ipa}),8);case 8:Vd.extractModules("lively.bindings"),Vd.extractModules("lively.shell"),Vd.extractModules("lively.ide"),Vd.extractModules("lively.components"),b.jumpToEnd()}})};Vd.bootstrapLivelySystem=function(b,d,h){return Promise.resolve().then(function(){b.status="starting bootstrap process..."}).then(function(){var a,e,n,q,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(d.whenRendered(),
2);case 2:if("frozen"!=h["lively.lang"]&&!Vd.fastLoad){y.jumpTo(3);break}return y.yield(Promise.resolve().then(function(){return j8}),4);case 4:a=y.yieldResult,Vd.extractModules("lively.lang"),d.finishPackage({packageName:"lively.lang",frozen:!0}),delete a._prevLivelyGlobal;case 3:if("frozen"!=h["lively.ast"]&&!Vd.fastLoad){y.jumpTo(5);break}e=lively;return y.yield(Promise.resolve().then(function(){return PI}),6);case 6:e.ast=y.yieldResult,Vd.extractModules("lively.ast"),d.finishPackage({packageName:"lively.ast",
frozen:!0});case 5:if("frozen"!=h["lively.source-transform"]&&!Vd.fastLoad){y.jumpTo(7);break}n=lively;return y.yield(Promise.resolve().then(function(){return cpa}),8);case 8:n.sourceTransform=y.yieldResult,Vd.extractModules("lively.source-transform"),d.finishPackage({packageName:"lively.source-transform",frozen:!0});case 7:if("frozen"!=h["lively.classes"]&&!Vd.fastLoad){y.jumpTo(9);break}return y.yield(wb.import("./object-classes-e1436cbe.js"),10);case 10:return q=lively,y.yield(Promise.resolve().then(function(){return gca}),
11);case 11:q.classes=y.yieldResult,Vd.extractModules("lively.class"),d.finishPackage({packageName:"lively.classes",frozen:!0});case 9:if("frozen"!=h["lively.vm"]&&!Vd.fastLoad){y.jumpTo(12);break}r=lively;return y.yield(Promise.resolve().then(function(){return w9}),13);case 13:r.vm=y.yieldResult,Vd.extractModules("lively.vm"),d.finishPackage({packageName:"lively.vm",frozen:!0});case 12:if("frozen"!=h["lively.modules"]&&!Vd.fastLoad){y.jumpTo(14);break}return y.yield(Promise.resolve().then(function(){return CK}),
15);case 15:Vd.extractModules("lively.modules"),d.finishPackage({packageName:"lively.modules",frozen:!0});case 14:if("frozen"!=h["lively.user"]&&!Vd.fastLoad){y.jumpTo(16);break}return y.yield(Promise.resolve().then(function(){return Swa}),17);case 17:return y.yield(wb.import("./user-ui-a47e164e.js"),18);case 18:Vd.extractModules("lively.user"),d.finishPackage({packageName:"lively.user",frozen:!0});case 16:if("frozen"!=h["lively.storage"]&&!Vd.fastLoad){y.jumpTo(19);break}return y.yield(Promise.resolve().then(function(){return Pva}),
20);case 20:Vd.extractModules("lively.storage"),d.finishPackage({packageName:"lively.storage",frozen:!0});case 19:if("frozen"!=h["lively.morphic"]&&!Vd.fastLoad){y.jumpTo(0);break}return y.yield(Promise.resolve().then(function(){return lma}),22);case 22:return Vd.extractModules("lively.resources"),y.yield(Promise.resolve().then(function(){return Kca}),23);case 23:return y.yield(wb.import("./index-792c91c7.js"),24);case 24:return Vd.extractModules("lively.2lively"),y.yield(Promise.resolve().then(function(){return opa}),
25);case 25:return Vd.extractModules("lively.serializer2"),y.yield(Vd.loadComponents(),26);case 26:return y.yield(wb.import("./index-f2f18556.js").then(function(D){return D.i}),27);case 27:return Vd.extractModules("lively.halos"),y.yield(wb.import("./index-00525174.js"),28);case 28:return Vd.extractModules("lively-system-interface"),y.yield(Promise.resolve().then(function(){return hpa}),29);case 29:return Vd.extractModules("lively.graphics"),v=lively,y.yield(Promise.resolve().then(function(){return Dxa}),
30);case 30:v.morphic=y.yieldResult,Vd.extractModules("lively.morphic"),d.finishPackage({packageName:"lively.morphic",frozen:!0}),y.jumpToEnd()}})}).then(function(){var a,e,n,q,r,v,y,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return a=window.SYSTEM_BASE_URL||document.location.origin,e=window.System,n=e.baseURL,n.endsWith("/")&&(n=n.slice(0,-1)),E.yield(Vd.resource(a).join("package-registry.json").readJson(),2);case 2:return q=E.yieldResult,E.yield(Vd.loadViaScript(Vd.resource(a).join("/lively.next-node_modules/babel-standalone/babel.js").url),
3);case 3:return E.yield(Vd.loadViaScript(Vd.resource(a).join("/lively.next-node_modules/systemjs/dist/system.src.js").url),4);case 4:return E.yield(Vd.loadViaScript(Vd.resource(a).join("/lively.modules/systemjs-init.js").url),5);case 5:r=lively.modules.getSystem("bootstrapped",{baseURL:a});lively.modules.changeSystem(r,!0);r["__lively.modules__packageRegistry"]=lively.modules.PackageRegistry.fromJSON(r,q);for(v in Vd.extractedModules)y=v.replace(n,a),r.set(y,r.newModule(Vd.extractedModules[v])),
D=lively.modules.module(y),D._recorder=Vd.extractedModules[v],D._frozenModule=!0;e.config({baseURL:a});Vd.installFetchHook(b);E.jumpToEnd()}})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==h["lively.lang"]&&!Vd.fastLoad)return a.return(Vd.importPackageAndDo("lively.lang",function(e){d.finishPackage({packageName:"lively.lang",loaded:!0});delete e._prevLivelyGlobal},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){d.animate({opacity:1,
easing:Vd.easings.outExpo,duration:300});if("dynamic"==h["lively.ast"]&&!Vd.fastLoad)return a.return(Vd.importPackageAndDo("lively.ast",function(e){d.finishPackage({packageName:"lively.ast",loaded:!0});lively.ast=e},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==h["lively.source-transform"]&&!Vd.fastLoad)return a.return(Vd.importPackageAndDo("lively.source-transform",function(e){d.finishPackage({packageName:"lively.source-transform",
loaded:!0});lively.sourceTransform=e},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==h["lively.classes"]&&!Vd.fastLoad)return a.return(Vd.importPackageAndDo("lively.classes",function(e){d.finishPackage({packageName:"lively.classes",loaded:!0});lively.classes=e},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==h["lively.vm"]&&!Vd.fastLoad)return a.return(Vd.importPackageAndDo("lively.vm",
function(e){d.finishPackage({packageName:"lively.vm",loaded:!0});lively.vm=e},b));a.jumpToEnd()})}).then(function(){function a(e){lively.modules=e;lively.modules.unwrapModuleLoad();lively.modules.unwrapModuleResolution();lively.modules.wrapModuleLoad();lively.modules.wrapModuleResolution();Vd.installFetchHook(b);var n=System["__lively.modules__packageRegistry"];delete System["__lively.modules__packageRegistry"];e=System["__lively.modules__packageRegistry"]=e.PackageRegistry.ofSystem(System);Object.assign(e,
Vd.obj.select(n,["packageMap","individualPackageDirs","devPackageDirs","packageBaseDirs"]));e.resetByURL();n=e.allPackages();var q=lively.modules.module("lively.modules/src/packages/package.js").recorder.Package;n.filter(function(v){return!v.constructor[Symbol.for("lively-module-meta")]}).forEach(function(v){Vd.adoptObject(v,q)});n=Object.values(System["__lively.modules__loadedModules"]);var r=lively.modules.module("lively.modules/src/module.js").recorder.ModuleInterface;n.filter(function(v){return!v.constructor[Symbol.for("lively-module-meta")]}).forEach(function(v){Vd.adoptObject(v,
r)})}return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return"frozen"==h["lively.modules"]||Vd.fastLoad?(System._scripting=lively.modules.scripting,e.jumpTo(2)):e.yield(Vd.importPackageAndDo("lively.modules",a,b),2);d.finishPackage({packageName:"lively.modules",loaded:!0});e.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==h["lively.user"]&&!Vd.fastLoad)return a.return(Vd.importPackageAndDo("lively.user",
function(e){d.finishPackage({packageName:"lively.user",loaded:!0});lively.user=e},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==h["lively.storage"]&&!Vd.fastLoad)return a.return(Vd.importPackageAndDo("lively.storage",function(e){d.finishPackage({packageName:"lively.storage",loaded:!0});lively.storage=e},b));a.jumpToEnd()})})};Vd.importPackageAndDo=function(b,d,h){var a=b.split("/").slice(-1)[0];h.label="loading "+a;return lively.modules.importPackage(b).then(d||
function(){})};Vd.polyfills=function(){var b=[];"PointerEvent"in window||b.push(Vd.loadViaScript(Vd.resource(System.baseURL).join("/lively.next-node_modules/pepjs/dist/pep.js").url));"fetch"in window||b.push(Vd.loadViaScript("//cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.js"));return Promise.all(b)};Vd.resource=Uc;Vd.unregisterExtension=pe;Vd.registerExtension=Zd;Vd.loadViaScript=Nq;Vd.promise=bg;Vd.string=Ng;Vd.obj=xf;Vd.modulePackage=CK;Vd.easings=so;Vd.adoptObject=$w;Vd.Color=If;Vd.styleguideResourceExtension=
wK;Vd.partResourceExtension=EK;lively.modules=Vd.modulePackage;Vd.loginDone=!0;Vd.doBootstrap=!0;Vd.askBeforeQuit=!0;Vd.worldLoaded=!1;Vd.loc=document.location;Vd.query=Vd.resource(Vd.loc.href).query();Vd.fastLoad=1==Vd.query.fastLoad||window.FORCE_FAST_LOAD;Vd.bootstrap=qI;Vd.bootstrap=qI;Vd.loads=0;Vd.extractedModules={};var lda=Object.freeze({__proto__:null,bootstrap:qI}),Kxa=/^part:\/\/([^\/]+)\/(.*)$/,dV=function(){return Yy.apply(this,arguments)||this};$jscomp.inherits(dV,Yy);dV.prototype.read=
function(){var b=this,d=function(){return Yy.prototype.read},h,a,e,n,q,r,v,y,D,E,I,K,P,N,aa,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(t){switch(t.nextAddress){case 1:switch(b.url){case "part://partial freezing/package loading progress indicator":return t.jumpTo(2);case "part://partial freezing/version container":return t.jumpTo(3);case "part://partial freezing/delete world prompt":return t.jumpTo(4);case "part://SystemIDE/user flap master/dark":return t.jumpTo(5);case "part://SystemIDE/lively top bar master":return t.jumpTo(6);
case "part://SystemUserUI/version checker":return t.jumpTo(7);case "part://SystemUserUI/login widget":return t.jumpTo(8);case "part://SystemUserUI/user info":return t.jumpTo(9);case "part://SystemUserUI/register widget":return t.jumpTo(10);case "part://SystemIDE/user menu master":return t.jumpTo(11);case "part://SystemIDE/scene graph side bar master":return t.jumpTo(12);case "part://SystemIDE/styling side bar master":return t.jumpTo(13);case "part://SystemWidgets/new color picker":return t.jumpTo(14);
case "part://SystemWidgets/gradient editor/color stop":return t.jumpTo(15);case "part://partial freezing/project browser":return t.jumpTo(16);case "part://partial freezing/world preview":return t.jumpTo(17);default:return t.jumpTo(18)}case 2:return t.yield(wb.import("./package loading progress indicator-fd1af17d.js"),20);case 20:if(!(h=t.yieldResult)){t.jumpTo(21);break}return t.yield(d().call(b),22);case 22:h=t.yieldResult;case 21:return t.return(h);case 3:return t.yield(wb.import("./version container-f68a6b3f.js"),
23);case 23:if(!(a=t.yieldResult)){t.jumpTo(24);break}return t.yield(d().call(b),25);case 25:a=t.yieldResult;case 24:return t.return(a);case 4:return t.yield(wb.import("./delete world prompt-2ea15fe6.js"),26);case 26:if(!(e=t.yieldResult)){t.jumpTo(27);break}return t.yield(d().call(b),28);case 28:e=t.yieldResult;case 27:return t.return(e);case 5:return t.yield(wb.import("./dark-cad7595c.js"),29);case 29:if(!(n=t.yieldResult)){t.jumpTo(30);break}return t.yield(d().call(b),31);case 31:n=t.yieldResult;
case 30:return t.return(n);case 6:return t.yield(wb.import("./lively top bar master-69f9653a.js"),32);case 32:if(!(q=t.yieldResult)){t.jumpTo(33);break}return t.yield(d().call(b),34);case 34:q=t.yieldResult;case 33:return t.return(q);case 7:return t.yield(wb.import("./version checker-940fb7b5.js"),35);case 35:if(!(r=t.yieldResult)){t.jumpTo(36);break}return t.yield(d().call(b),37);case 37:r=t.yieldResult;case 36:return t.return(r);case 8:return t.yield(wb.import("./login widget-c011964a.js"),38);
case 38:if(!(v=t.yieldResult)){t.jumpTo(39);break}return t.yield(d().call(b),40);case 40:v=t.yieldResult;case 39:return t.return(v);case 9:return t.yield(wb.import("./user info-af60d940.js"),41);case 41:if(!(y=t.yieldResult)){t.jumpTo(42);break}return t.yield(d().call(b),43);case 43:y=t.yieldResult;case 42:return t.return(y);case 10:return t.yield(wb.import("./register widget-519974bd.js"),44);case 44:if(!(D=t.yieldResult)){t.jumpTo(45);break}return t.yield(d().call(b),46);case 46:D=t.yieldResult;
case 45:return t.return(D);case 11:return t.yield(wb.import("./user menu master-752f1388.js"),47);case 47:if(!(E=t.yieldResult)){t.jumpTo(48);break}return t.yield(d().call(b),49);case 49:E=t.yieldResult;case 48:return t.return(E);case 12:return t.yield(wb.import("./scene graph side bar master-d27d1002.js"),50);case 50:if(!(I=t.yieldResult)){t.jumpTo(51);break}return t.yield(d().call(b),52);case 52:I=t.yieldResult;case 51:return t.return(I);case 13:return t.yield(wb.import("./styling side bar master-5d6170cc.js"),
53);case 53:if(!(K=t.yieldResult)){t.jumpTo(54);break}return t.yield(d().call(b),55);case 55:K=t.yieldResult;case 54:return t.return(K);case 14:return t.yield(wb.import("./new color picker-dccbc3b5.js"),56);case 56:if(!(P=t.yieldResult)){t.jumpTo(57);break}return t.yield(d().call(b),58);case 58:P=t.yieldResult;case 57:return t.return(P);case 15:return t.yield(wb.import("./color stop-1a4c927b.js"),59);case 59:if(!(N=t.yieldResult)){t.jumpTo(60);break}return t.yield(d().call(b),61);case 61:N=t.yieldResult;
case 60:return t.return(N);case 16:return t.yield(wb.import("./project browser-8a515e7b.js"),62);case 62:if(!(aa=t.yieldResult)){t.jumpTo(63);break}return t.yield(d().call(b),64);case 64:aa=t.yieldResult;case 63:return t.return(aa);case 17:return t.yield(wb.import("./world preview-a449450d.js"),65);case 65:if(!(m=t.yieldResult)){t.jumpTo(66);break}return t.yield(d().call(b),67);case 67:m=t.yieldResult;case 66:return t.return(m);case 18:return t.yield(d().call(b),68);case 68:return t.return(t.yieldResult)}})};
var Lxa={name:"part",matches:function(b){return b.match(Kxa)},resourceClass:dV};pe("part");Zd(Lxa);var AL=function(){return LC.apply(this,arguments)||this};$jscomp.inherits(AL,LC);AL.prototype.read=function(){var b=this,d,h,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(d=Uc(System.baseURL),d.isFile()&&(d=d.parent()),h=d.join("masters/"),e.yield(b.fetchFromMasterDir(h,b.componentName),2)):3!=e.nextAddress?(a=e.yieldResult,e.yield(b.resolveComponent(a),3)):
e.return(e.yieldResult)})};$jscomp.global.Object.defineProperties(AL.prototype,{worldName:{configurable:!0,enumerable:!0,get:function(){var b=this.url.match(mda);b=$jscomp.makeIterator(b);b.next();var d=b.next().value;b.next();return d}}});var mda=/^styleguide:\/\/([^\/]+)\/(.*)$/,Mxa={name:"styleguide",matches:function(b){return b.match(mda)},resourceClass:AL};pe("styleguide");Zd(Mxa);var i8=JSON.parse('{"id":"WorldLoadingScreen_4E2BB94E_7826_481B_9AF4_7F927425CB9A","snapshot":{"WorldLoadingScreen_4E2BB94E_7826_481B_9AF4_7F927425CB9A":{"rev":1254894,"props":{"name":{"value":"world loading screen"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(61.03749999999991,651.92578125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1012.7413741929706,539.71484375)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_71D85B8D_0EE7_4820_A4E2_7BB1127C23C7","rev":2639},{"__ref__":true,"id":"Label_6D11AF3E_9AB7_4CEE_B974_58952FBCC909","rev":606824},{"__ref__":true,"id":"ModuleProgress_ED383AB3_C302_4C48_AB8A_48A7690E19A4","rev":398288},{"__ref__":true,"id":"HTMLMorph_1FA68A28_D1C2_41FD_8D96_6F21786A877D","rev":3697}]},"styleClasses":{"value":["WorldLoadingScreen","Morph","WorldLandingPage","morph"]},"layout":{"value":"__lv_expr__:{VerticalLayout}:lively.morphic:new VerticalLayout({\\n  align: \\"center\\",\\n  autoResize: false,\\n  direction: \\"centered\\",\\n  orderByIndex: false,\\n  padding: {\\n    height: 0,\\n    width: 0,\\n    x: 0,\\n    y: 0\\n  },\\n  reactToSubmorphAnimations: false,\\n  renderViaCSS: true,\\n  resizeSubmorphs: false,\\n  spacing: 0\\n})"},"metadata":{"value":{"__ref__":true,"id":"8BA3D59D-46F5-47EE-9617-8143263FEFE1","rev":0}}},"lively.serializer-class-info":{"className":"WorldLoadingScreen","module":{"package":{"name":"PartialFreezing","version":"0.1.1-119"},"pathInPackage":"loading-page.js"}}},"Label_71D85B8D_0EE7_4820_A4E2_7BB1127C23C7":{"rev":2639,"props":{"name":{"value":"json target indicator"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(919.7413741929706,25)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(72,35)"},"opacity":{"value":0},"styleClasses":{"value":["Label","Morph","morph"]},"isLayoutable":{"value":false},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":2,"right":2,"bottom":2,"left":2}},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":6,"right":6,"bottom":6,"left":6}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0,0,0,1],"right":[0,0,0,1],"bottom":[0,0,0,1],"left":[0,0,0,1]}},"metadata":{"value":{"__ref__":true,"id":"9340D2A0-3849-40C8-A79E-0C22DDFA0B24","rev":0}},"textAndAttributes":{"value":["JSON",null]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(5,2,5,2)"},"fontSize":{"value":20},"fontWeight":{"value":"bold"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"9340D2A0-3849-40C8-A79E-0C22DDFA0B24":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"2662050B-9FDF-4AFA-9FA5-DD96FFB5F0FA","rev":0}}}},"2662050B-9FDF-4AFA-9FA5-DD96FFB5F0FA":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Label_6D11AF3E_9AB7_4CEE_B974_58952FBCC909":{"rev":606824,"props":{"name":{"value":"broken heart"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(400.37068709648537,111.970703125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(212,211)"},"visible":{"value":false},"submorphs":{"value":[{"__ref__":true,"id":"Text_9C123693_69AE_4CC2_94D1_29DEA69B1335","rev":2687}]},"styleClasses":{"value":["Label","Morph","morph"]},"isLayoutable":{"value":false},"textAndAttributes":{"value":["\uf7a9",{"__ref__":true,"id":"06C105B6-9A0D-4457-A899-1FEF41276C03","rev":0}]},"fontSize":{"value":211.064},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(231,76,60)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"Text_9C123693_69AE_4CC2_94D1_29DEA69B1335":{"rev":2687,"props":{"name":{"value":"error text"},"nativeCursor":{"value":"default"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(-66.55859375,211)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(345.1171875,104.7734375)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(0,0,0,0)"},"styleClasses":{"value":["Text","Morph","morph"]},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.09019607843137255,0.6274509803921569,0.984313725490196,1],"right":[0.09019607843137255,0.6274509803921569,0.984313725490196,1],"bottom":[0.09019607843137255,0.6274509803921569,0.984313725490196,1],"left":[0.09019607843137255,0.6274509803921569,0.984313725490196,1]}},"fixedWidth":{"value":true},"fixedHeight":{"value":true},"readOnly":{"value":true},"fontSize":{"value":22},"fontWeight":{"value":"bold"},"textAlign":{"value":"center"},"lineWrapping":{"value":true},"anchors":{"value":[]},"selections":{"key":"selections","verbatim":true,"value":[{"start":{"row":0,"column":62},"end":{"row":0,"column":62}}]},"textAndAttributes":{"key":"textAndAttributes","value":["Sorry, the world you requested can not be found on the server.",null]}},"lively.serializer-class-info":{"className":"Text","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/morph.js"}},"cachedLineBounds":[]},"06C105B6-9A0D-4457-A899-1FEF41276C03":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"heart-broken"}}},"ModuleProgress_ED383AB3_C302_4C48_AB8A_48A7690E19A4":{"rev":398288,"props":{"_tickingScripts":{"value":[{"__ref__":true,"id":"C3132A15-C04B-4F31-8A61-58310C31E591","rev":0}]},"name":{"value":"package loading indicator"},"master":{"value":"__lv_expr__:({\\"auto\\":\\"styleguide://partial freezing/package loading progress indicator\\"})"},"blur":{"value":0},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(15,188)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(983,164)"},"opacity":{"value":0},"submorphs":{"value":[{"__ref__":true,"id":"Path_1E239741_0319_48BB_AA5E_8683A0A36D51","rev":1254888},{"__ref__":true,"id":"Morph_EDACF17E_66B3_4E5F_981B_A54FA9E535C6","rev":3882},{"__ref__":true,"id":"Morph_7E86BC59_07F2_4526_AC1B_A1240DCE5166","rev":377900},{"__ref__":true,"id":"Morph_93840062_8EDB_4967_A1AD_59FD75B4E0DA","rev":372321},{"__ref__":true,"id":"Morph_B35A2D05_925F_407A_9EED_F78CC2FEAB02","rev":366607},{"__ref__":true,"id":"Morph_1A49C667_B322_4F0F_A392_3222E768AB07","rev":381098},{"__ref__":true,"id":"Morph_C3C77ABC_1FDB_4F89_AE08_2E3DEB215EB9","rev":383437},{"__ref__":true,"id":"Morph_B768BEA4_A2AF_4D95_B814_1920B431694D","rev":385889},{"__ref__":true,"id":"Morph_E9A6EC8D_B083_4862_B6B2_F2091B4C4A99","rev":388163},{"__ref__":true,"id":"Morph_A3B9EED8_7D5E_4513_997A_A92079A4CBF4","rev":390587},{"__ref__":true,"id":"Morph_B25AD0E7_76E3_4456_9D37_8FAE723CAD27","rev":392945}]},"styleClasses":{"value":["ModuleProgress","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"96BDD19A-D8BB-4E2B-B87A-B4D037C160AE","rev":0}}},"lively.serializer-class-info":{"className":"ModuleProgress","module":{"package":{"name":"ModuleProgress","version":"0.1.1-109"},"pathInPackage":"index.js"}}},"C3132A15-C04B-4F31-8A61-58310C31E591":{"rev":0,"props":{"_rev":{"value":0},"suspended":{"value":true},"stopped":{"value":false},"tickTime":{"value":null},"type":{"value":"requestAnimationFrame"},"currentTimeout":{"value":1328384},"target":{"value":{"__ref__":true,"id":"ModuleProgress_ED383AB3_C302_4C48_AB8A_48A7690E19A4","rev":398288}},"selector":{"value":"updateProgressBar"},"args":{"value":[]}},"lively.serializer-class-info":{"className":"TargetScript","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"ticking.js"}}},"Path_1E239741_0319_48BB_AA5E_8683A0A36D51":{"rev":1254888,"props":{"name":{"value":"progress path"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(20,0)"},"visible":{"value":false},"styleClasses":{"value":["Path","Morph","morph"]},"borderColor":{"key":"borderColor","value":"__lv_expr__:{Color,Color}:lively.graphics/color.js:{pt,rect}:lively.graphics/geometry-2d.js:Color.rgb(127,140,141)"},"metadata":{"value":{"__ref__":true,"id":"BEBF4FA8-DF16-47C0-AD62-A166EDE3C674","rev":0}},"vertices":{"value":["__lv_expr__:{pt}:lively.graphics/geometry-2d.js:({position:pt(0,0),isSmooth:false,controlPoints:{next:pt(0,0),previous:pt(0,0)}})","__lv_expr__:{pt}:lively.graphics/geometry-2d.js:({position:pt(20,0),isSmooth:false,controlPoints:{next:pt(0,0),previous:pt(0,0)}})"]},"endMarker":{"value":{"__ref__":true,"id":"end-marker","rev":0}}},"lively.serializer-class-info":{"className":"Path","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"BEBF4FA8-DF16-47C0-AD62-A166EDE3C674":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"arrow\\", _id: \\"f5486b4a5f64aed6413e16fdb4e4def6b7648b7f\\"})"}}},"end-marker":{"rev":0,"props":{"_rev":{"value":0},"tagName":{"value":"marker"},"id":{"value":"end-marker"},"viewBox":{"value":"0 0 10 10"},"refX":{"value":"5"},"refY":{"value":"5"},"markerWidth":{"value":"5"},"markerHeight":{"value":"5"},"orient":{"value":"auto"},"children":{"value":[{"__ref__":true,"id":"A26E29BE-1831-41B5-9EE3-65AD3E234B26","rev":0}]},"fill":{"value":"rgba(127,140,141,1)"}}},"A26E29BE-1831-41B5-9EE3-65AD3E234B26":{"rev":0,"props":{"_rev":{"value":0},"tagName":{"value":"path"},"d":{"value":"M0,0 L10,5 L0,10 z"}}},"Morph_EDACF17E_66B3_4E5F_981B_A54FA9E535C6":{"rev":3882,"props":{"name":{"value":"stage lang"},"tooltip":{"value":""},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(58,118)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_DDF83F61_9A6C_4F75_B61A_015530BABBD7","rev":6860},{"__ref__":true,"id":"Label_A81B6F27_8A7F_4882_AE6E_7C01D47E3F15","rev":6889},{"__ref__":true,"id":"Ellipse_5891E184_0FB5_44DF_AF6C_6AC55BFD20A1","rev":2814}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"70C33109-B848-4B43-906F-8367F235F593","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_DDF83F61_9A6C_4F75_B61A_015530BABBD7":{"rev":6860,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"29DDB7D3-EAAB-4B30-9B2A-359855AEE1CE","rev":0}},"textAndAttributes":{"value":["\uf1ab",{"__ref__":true,"id":"1B318425-ABEE-4D9C-8CEB-1F19D50DD864","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"29DDB7D3-EAAB-4B30-9B2A-359855AEE1CE":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"D3C7A200-2CDA-4ADD-8ECF-60ABA4F480A3","rev":0}}}},"D3C7A200-2CDA-4ADD-8ECF-60ABA4F480A3":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"1B318425-ABEE-4D9C-8CEB-1F19D50DD864":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"language"}}},"Label_A81B6F27_8A7F_4882_AE6E_7C01D47E3F15":{"rev":6889,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(31,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"19E3DD73-744C-4B99-AC56-70AF1D11B0AB","rev":0}},"textAndAttributes":{"value":["lang",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,31,20]},"19E3DD73-744C-4B99-AC56-70AF1D11B0AB":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"F9E2820C-9BEF-4DCA-9DFF-3F9937F2449D","rev":0}}}},"F9E2820C-9BEF-4DCA-9DFF-3F9937F2449D":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_5891E184_0FB5_44DF_AF6C_6AC55BFD20A1":{"rev":2814,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(11,81)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_960AF907_24AB_476B_81D3_8EA1EB7E1189","rev":606827},{"__ref__":true,"id":"Label_469FAE8C_B4AC_4E4E_9AE3_2E3913C30450","rev":606828}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"972F4D09-5A0F-4C6B-AFA2-59278009DB9E","rev":0}},"metadata":{"value":{"__ref__":true,"id":"AD376475-DDD5-4B8D-9704-8446F285C36A","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_960AF907_24AB_476B_81D3_8EA1EB7E1189":{"rev":606827,"props":{"name":{"value":"checkmark"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500227,12.1396484375)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"8717A204-C6B1-4B68-93B2-E1E54C8B3FD4","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"5F36E0A4-7445-4C41-9645-4C0D323931A0","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"8717A204-C6B1-4B68-93B2-E1E54C8B3FD4":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"A2E0AFA6-0995-4938-9BE3-C60DB515AE33","rev":0}}}},"A2E0AFA6-0995-4938-9BE3-C60DB515AE33":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"5F36E0A4-7445-4C41-9645-4C0D323931A0":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_469FAE8C_B4AC_4E4E_9AE3_2E3913C30450":{"rev":606828,"props":{"name":{"value":"frozen indicator"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(15,0)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"91A5F886-5A63-46B1-AF25-B53876515CAF","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"EE201915-961F-4D82-9511-88383A80E9AC","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"91A5F886-5A63-46B1-AF25-B53876515CAF":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"D3D1E4F9-A991-47AD-A928-22567CADB808","rev":0}}}},"D3D1E4F9-A991-47AD-A928-22567CADB808":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"EE201915-961F-4D82-9511-88383A80E9AC":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"972F4D09-5A0F-4C6B-AFA2-59278009DB9E":{"rev":0,"props":{"_rev":{"value":0}}},"AD376475-DDD5-4B8D-9704-8446F285C36A":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"70C33109-B848-4B43-906F-8367F235F593":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_7E86BC59_07F2_4526_AC1B_A1240DCE5166":{"rev":377900,"props":{"name":{"value":"stage ast"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(104,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(47,118)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_9DC04560_AF20_42FD_AB03_B67D2362A8A7","rev":377903},{"__ref__":true,"id":"Label_9F556F0C_B073_4232_8880_219E64EDDF48","rev":377904},{"__ref__":true,"id":"Ellipse_B4D09F2D_6796_44BA_BB27_45E0EE54716A","rev":377902}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"3A2F6BBA-9AA2-4A16-9328-BA89F86B4152","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_9DC04560_AF20_42FD_AB03_B67D2362A8A7":{"rev":377903,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"D79123D8-A136-4E26-86EB-52CF89C33331","rev":0}},"textAndAttributes":{"value":["\uf1bb",{"__ref__":true,"id":"83998814-2CE5-447A-A2AF-C482AF9B5234","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"D79123D8-A136-4E26-86EB-52CF89C33331":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"DD02F5DC-A486-439B-A0F1-2E61CFA2BE66","rev":0}}}},"DD02F5DC-A486-439B-A0F1-2E61CFA2BE66":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"83998814-2CE5-447A-A2AF-C482AF9B5234":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"tree"}}},"Label_9F556F0C_B073_4232_8880_219E64EDDF48":{"rev":377904,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(22,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"4187E6CC-FCE0-4AFB-B271-6920F067D26F","rev":0}},"textAndAttributes":{"value":["ast",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,22,20]},"4187E6CC-FCE0-4AFB-B271-6920F067D26F":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"FDFC230E-6267-4558-8843-5BD9329A5977","rev":0}}}},"FDFC230E-6267-4558-8843-5BD9329A5977":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_B4D09F2D_6796_44BA_BB27_45E0EE54716A":{"rev":377902,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(11,81)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_9D0FAF90_EEA1_4676_B4C6_2C8598839882","rev":606831},{"__ref__":true,"id":"Label_21B5A148_05CC_4262_ADE7_B4E690CA190B","rev":606832}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"C729AD77-BB5D-440D-8A17-F7B3867DB4B3","rev":0}},"metadata":{"value":{"__ref__":true,"id":"FCC091FC-02C7-447F-8B90-D531E7543AB3","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_9D0FAF90_EEA1_4676_B4C6_2C8598839882":{"rev":606831,"props":{"name":{"value":"checkmark"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500227,12.1396484375)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"2F35C632-AC06-489C-8DAF-BCACFEE0A858","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"349714B2-935A-4B72-B49D-DC135AFF2E89","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"2F35C632-AC06-489C-8DAF-BCACFEE0A858":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"16BDFAE5-C21E-4634-AD7D-97C3A14CC92C","rev":0}}}},"16BDFAE5-C21E-4634-AD7D-97C3A14CC92C":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"349714B2-935A-4B72-B49D-DC135AFF2E89":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_21B5A148_05CC_4262_ADE7_B4E690CA190B":{"rev":606832,"props":{"name":{"value":"frozen indicator"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(15,0)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"0078BFF0-4858-4E7D-B3B1-1F5D445F2412","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"D0B21575-8269-4986-9B19-89DBE8F38738","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"0078BFF0-4858-4E7D-B3B1-1F5D445F2412":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"ACF4B3F2-C0F8-407B-BB35-A5F3988226F3","rev":0}}}},"ACF4B3F2-C0F8-407B-BB35-A5F3988226F3":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"D0B21575-8269-4986-9B19-89DBE8F38738":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"C729AD77-BB5D-440D-8A17-F7B3867DB4B3":{"rev":0,"props":{"_rev":{"value":0}}},"FCC091FC-02C7-447F-8B90-D531E7543AB3":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"3A2F6BBA-9AA2-4A16-9328-BA89F86B4152":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_93840062_8EDB_4967_A1AD_59FD75B4E0DA":{"rev":372321,"props":{"name":{"value":"stage source-transform"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(174,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(143,118)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_447E5ED7_A9A1_47A7_9769_75B072738EEE","rev":372325},{"__ref__":true,"id":"Label_AAB99267_35F1_439E_B891_C396CD083DA4","rev":372323},{"__ref__":true,"id":"Ellipse_EAE922C6_A391_4BA7_9D59_0DFC00D54407","rev":372324}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"F1FE5EC0-F1E1-4304-A35E-9D6724AB63D7","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_447E5ED7_A9A1_47A7_9769_75B072738EEE":{"rev":372325,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(53,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"F6A6C048-6258-4E1B-9959-7FD3AA029DAE","rev":0}},"textAndAttributes":{"value":["\uf079",{"__ref__":true,"id":"A5C490A4-5176-4F25-9878-C21ADBB30BDA","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"F6A6C048-6258-4E1B-9959-7FD3AA029DAE":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"77F4F565-C388-414C-92DE-1E6EA8C28438","rev":0}}}},"77F4F565-C388-414C-92DE-1E6EA8C28438":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"A5C490A4-5176-4F25-9878-C21ADBB30BDA":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"retweet"}}},"Label_AAB99267_35F1_439E_B891_C396CD083DA4":{"rev":372323,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(123,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"BF3B6308-83E5-45C9-877C-8F7879515B0F","rev":0}},"textAndAttributes":{"value":["source transform",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,123,20]},"BF3B6308-83E5-45C9-877C-8F7879515B0F":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"9B03D9B5-AEDB-4016-BC75-B65F0EB14EEE","rev":0}}}},"9B03D9B5-AEDB-4016-BC75-B65F0EB14EEE":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_EAE922C6_A391_4BA7_9D59_0DFC00D54407":{"rev":372324,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(59,81)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_38138D39_DBD9_43DA_8EC3_EE0A0237C5BE","rev":606835},{"__ref__":true,"id":"Label_D0BEE4CD_7B7E_4734_A612_48648FD47542","rev":606836}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"0293F509-B5E1-44FF-B3AB-E55575AA6281","rev":0}},"metadata":{"value":{"__ref__":true,"id":"8F9186D2-9418-456D-A968-82B77AAE0328","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_38138D39_DBD9_43DA_8EC3_EE0A0237C5BE":{"rev":606835,"props":{"name":{"value":"checkmark"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500455,12.1396484375)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"C76F1A61-1EEA-4256-BE18-DB5E158C956C","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"6163B811-79B6-4B2B-BAD6-D63D05390E1E","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"C76F1A61-1EEA-4256-BE18-DB5E158C956C":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"FDCD96F2-1184-400F-8F1B-7D94993C7589","rev":0}}}},"FDCD96F2-1184-400F-8F1B-7D94993C7589":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"6163B811-79B6-4B2B-BAD6-D63D05390E1E":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_D0BEE4CD_7B7E_4734_A612_48648FD47542":{"rev":606836,"props":{"name":{"value":"frozen indicator"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(15,0)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"518F98F5-D93F-472F-B3C7-F53DE68CDCA0","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"FC8C38C7-6289-4EA1-BA86-40D2CC8232A1","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"518F98F5-D93F-472F-B3C7-F53DE68CDCA0":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"AB8C0836-200C-426B-8021-B5805704853D","rev":0}}}},"AB8C0836-200C-426B-8021-B5805704853D":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"FC8C38C7-6289-4EA1-BA86-40D2CC8232A1":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"0293F509-B5E1-44FF-B3AB-E55575AA6281":{"rev":0,"props":{"_rev":{"value":0}}},"8F9186D2-9418-456D-A968-82B77AAE0328":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"F1FE5EC0-F1E1-4304-A35E-9D6724AB63D7":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_B35A2D05_925F_407A_9EED_F78CC2FEAB02":{"rev":366607,"props":{"name":{"value":"stage classes"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(340,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(74,118)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_B58942D9_6700_4807_A2A2_D8AA201125EC","rev":366611},{"__ref__":true,"id":"Label_13A8650B_CC42_4B1F_9C41_057FFBCF9A0B","rev":366609},{"__ref__":true,"id":"Ellipse_5BF926D1_165E_4ACF_9971_93697D1A6BE7","rev":366610}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"96757651-AAFD-469B-9E50-38D72C7ADC7A","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_B58942D9_6700_4807_A2A2_D8AA201125EC":{"rev":366611,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(18,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"47CB4CAE-D104-4C34-9477-79B89FAD1420","rev":0}},"textAndAttributes":{"value":["\uf0e8",{"__ref__":true,"id":"CA515F35-9D51-4782-90CD-701EA59FD3B4","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"47CB4CAE-D104-4C34-9477-79B89FAD1420":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"7A72A5E8-75B7-4760-8978-B581F0D9EE4C","rev":0}}}},"7A72A5E8-75B7-4760-8978-B581F0D9EE4C":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"CA515F35-9D51-4782-90CD-701EA59FD3B4":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"sitemap"}}},"Label_13A8650B_CC42_4B1F_9C41_057FFBCF9A0B":{"rev":366609,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(54,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"3454C6DD-6DAC-4B04-944C-D26665ACA00F","rev":0}},"textAndAttributes":{"value":["classes",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,54,20]},"3454C6DD-6DAC-4B04-944C-D26665ACA00F":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"1277E7EE-2CDA-4CDB-A71C-EDB9108C17FB","rev":0}}}},"1277E7EE-2CDA-4CDB-A71C-EDB9108C17FB":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_5BF926D1_165E_4ACF_9971_93697D1A6BE7":{"rev":366610,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24,81)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_5DA17694_B45C_4C49_AB13_7BE7389BDCD0","rev":606839},{"__ref__":true,"id":"Label_E160EB1F_921C_4F02_B088_9A0AAC54536B","rev":606840}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"E4C065E8-AF28-478D-A9B7-D12FEFB2F9BC","rev":0}},"metadata":{"value":{"__ref__":true,"id":"8B51C700-8C92-4BA9-A89F-DFB52BFD84B1","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_5DA17694_B45C_4C49_AB13_7BE7389BDCD0":{"rev":606839,"props":{"name":{"value":"checkmark"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500455,12.1396484375)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"482E5B26-0857-49D1-9899-371430CEE2DC","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"A6C5EA41-F472-40F5-81CA-43D3D98384A7","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"482E5B26-0857-49D1-9899-371430CEE2DC":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"04E0FB37-3909-484F-9433-0E3A4D07B217","rev":0}}}},"04E0FB37-3909-484F-9433-0E3A4D07B217":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"A6C5EA41-F472-40F5-81CA-43D3D98384A7":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_E160EB1F_921C_4F02_B088_9A0AAC54536B":{"rev":606840,"props":{"name":{"value":"frozen indicator"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(15,0)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"2DFAE9E6-167B-429B-A85F-5E52CD72BEF6","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"3CD5A857-1F4D-489A-9575-D0E6695E7552","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"2DFAE9E6-167B-429B-A85F-5E52CD72BEF6":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"050EFD82-8C7E-4E45-82C8-2044F5B9FF2E","rev":0}}}},"050EFD82-8C7E-4E45-82C8-2044F5B9FF2E":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"3CD5A857-1F4D-489A-9575-D0E6695E7552":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"E4C065E8-AF28-478D-A9B7-D12FEFB2F9BC":{"rev":0,"props":{"_rev":{"value":0}}},"8B51C700-8C92-4BA9-A89F-DFB52BFD84B1":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"96757651-AAFD-469B-9E50-38D72C7ADC7A":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_1A49C667_B322_4F0F_A392_3222E768AB07":{"rev":381098,"props":{"name":{"value":"stage vm"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(437,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(58,118)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_ED307222_2FFC_43DC_A3C8_6C66CA34089A","rev":381102},{"__ref__":true,"id":"Label_BAB9358F_3A65_4202_82D6_FC9168239B5C","rev":381100},{"__ref__":true,"id":"Ellipse_D1BBA648_B7CF_495A_8AE1_44283D038A6E","rev":381101}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"292D8944-0DB3-42C1-8A32-B316CF28EAEC","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_ED307222_2FFC_43DC_A3C8_6C66CA34089A":{"rev":381102,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"82744111-8FB4-4C31-B142-49072BC6C3C8","rev":0}},"textAndAttributes":{"value":["\uf085",{"__ref__":true,"id":"1BFDDD9C-D475-4F0C-96BB-A6F187A23B02","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"82744111-8FB4-4C31-B142-49072BC6C3C8":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"06CC1176-12E9-49D7-AC12-58A8BEA623F9","rev":0}}}},"06CC1176-12E9-49D7-AC12-58A8BEA623F9":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"1BFDDD9C-D475-4F0C-96BB-A6F187A23B02":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cogs"}}},"Label_BAB9358F_3A65_4202_82D6_FC9168239B5C":{"rev":381100,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(18,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"C5065064-C67B-4771-A7CC-8446376E7F57","rev":0}},"textAndAttributes":{"value":["VM",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,23,20]},"C5065064-C67B-4771-A7CC-8446376E7F57":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"F2BDD11E-966F-4F37-BA7A-C04DCAB603C2","rev":0}}}},"F2BDD11E-966F-4F37-BA7A-C04DCAB603C2":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_D1BBA648_B7CF_495A_8AE1_44283D038A6E":{"rev":381101,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(16,81)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_475F2FF7_7EFE_4A50_8040_0842EE30F7E8","rev":606843},{"__ref__":true,"id":"Label_4110A2CD_723E_4FC7_B34B_1C7EFE330B71","rev":606844}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"20F7C3AF-5E15-46EF-8A56-EF546D837C39","rev":0}},"metadata":{"value":{"__ref__":true,"id":"19685D69-11FB-4AAC-A514-A91E1C7865F1","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_475F2FF7_7EFE_4A50_8040_0842EE30F7E8":{"rev":606843,"props":{"name":{"value":"checkmark"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500455,12.1396484375)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"BAB77087-4F2B-4565-8EE1-8F196908F77E","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"46F1272E-75A3-42B3-9045-8408E5D36A16","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"BAB77087-4F2B-4565-8EE1-8F196908F77E":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"8C5F1C45-0D91-4CC6-BAB4-6937F31EFE68","rev":0}}}},"8C5F1C45-0D91-4CC6-BAB4-6937F31EFE68":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"46F1272E-75A3-42B3-9045-8408E5D36A16":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_4110A2CD_723E_4FC7_B34B_1C7EFE330B71":{"rev":606844,"props":{"name":{"value":"frozen indicator"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(15,0)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"F71DCF86-2952-4430-99E6-B324978BFC68","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"0BB4B849-64F6-4E4A-9700-716ADDA022A4","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"F71DCF86-2952-4430-99E6-B324978BFC68":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"D65C4600-04A3-4594-AC4C-7474BEF9CA90","rev":0}}}},"D65C4600-04A3-4594-AC4C-7474BEF9CA90":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"0BB4B849-64F6-4E4A-9700-716ADDA022A4":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"20F7C3AF-5E15-46EF-8A56-EF546D837C39":{"rev":0,"props":{"_rev":{"value":0}}},"19685D69-11FB-4AAC-A514-A91E1C7865F1":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"292D8944-0DB3-42C1-8A32-B316CF28EAEC":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_C3C77ABC_1FDB_4F89_AE08_2E3DEB215EB9":{"rev":383437,"props":{"name":{"value":"stage modules"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(518,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(83,118)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_087BCF0A_658F_49FA_95E2_47FE7736DE53","rev":383441},{"__ref__":true,"id":"Label_00133C52_D67F_4DBE_9BF8_CD2F72922535","rev":383439},{"__ref__":true,"id":"Ellipse_488AB072_C3F1_40F0_96D4_F6C70F9975C6","rev":383440}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"9E143D1F-2299-4ABF-8D5C-5D62E703C7B7","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_087BCF0A_658F_49FA_95E2_47FE7736DE53":{"rev":383441,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"BA5C5392-9753-4ADE-9733-B2F93FC6C6FD","rev":0}},"textAndAttributes":{"value":["\uf49e",{"__ref__":true,"id":"5B743147-8E2F-4484-ADF0-49D6D98A1E8C","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"BA5C5392-9753-4ADE-9733-B2F93FC6C6FD":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"58BCDB00-754E-47CF-AE33-DC6D2F4E9463","rev":0}}}},"58BCDB00-754E-47CF-AE33-DC6D2F4E9463":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"5B743147-8E2F-4484-ADF0-49D6D98A1E8C":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cogs"}}},"Label_00133C52_D67F_4DBE_9BF8_CD2F72922535":{"rev":383439,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(63,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"072C593C-7BE4-4836-B689-F2D78A8EE0EC","rev":0}},"textAndAttributes":{"value":["modules",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,63,20]},"072C593C-7BE4-4836-B689-F2D78A8EE0EC":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"8FE4279E-0B8C-4E01-8916-85C8559B859C","rev":0}}}},"8FE4279E-0B8C-4E01-8916-85C8559B859C":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_488AB072_C3F1_40F0_96D4_F6C70F9975C6":{"rev":383440,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(29,81)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_6881CA5A_CAEE_49AC_88D6_BF616ABF5BCB","rev":606847},{"__ref__":true,"id":"Label_5CCEB95F_E440_4728_BEC2_23CC33681489","rev":606848}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"49768905-BFC1-42C5-888E-A2D1321A42D0","rev":0}},"metadata":{"value":{"__ref__":true,"id":"9F98E4FD-0A5D-44E5-9A45-D9FD5C8B9C81","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_6881CA5A_CAEE_49AC_88D6_BF616ABF5BCB":{"rev":606847,"props":{"name":{"value":"checkmark"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500455,12.1396484375)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"DA8A77AD-F3D8-482C-8D53-AFC8ED38F539","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"6257178F-DC26-41F6-BBD1-8F54397A740A","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"DA8A77AD-F3D8-482C-8D53-AFC8ED38F539":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"74303B44-2F39-41D9-8A15-1BB3157540B5","rev":0}}}},"74303B44-2F39-41D9-8A15-1BB3157540B5":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"6257178F-DC26-41F6-BBD1-8F54397A740A":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_5CCEB95F_E440_4728_BEC2_23CC33681489":{"rev":606848,"props":{"name":{"value":"frozen indicator"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(15,0)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"C7803B64-3EA2-4DA9-A8FC-25B91F7486DE","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"90AFF79C-2BE7-4273-8327-42EC5941C222","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"C7803B64-3EA2-4DA9-A8FC-25B91F7486DE":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"A5BC0C52-0363-40BB-B8EC-C519FE3FCA18","rev":0}}}},"A5BC0C52-0363-40BB-B8EC-C519FE3FCA18":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"90AFF79C-2BE7-4273-8327-42EC5941C222":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"49768905-BFC1-42C5-888E-A2D1321A42D0":{"rev":0,"props":{"_rev":{"value":0}}},"9F98E4FD-0A5D-44E5-9A45-D9FD5C8B9C81":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"9E143D1F-2299-4ABF-8D5C-5D62E703C7B7":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_B768BEA4_A2AF_4D95_B814_1920B431694D":{"rev":385889,"props":{"name":{"value":"stage user"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(624,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(52,118)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_1585D932_572C_4091_82F4_0AB00EF9C3AB","rev":385893},{"__ref__":true,"id":"Label_5D0A3113_149A_488F_B7AD_0E9623B49913","rev":385891},{"__ref__":true,"id":"Ellipse_CBA8A125_7E16_49CE_8A5C_34781AB43EEE","rev":385892}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"82023772-1032-46ED-82DD-0E01077E28EF","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_1585D932_572C_4091_82F4_0AB00EF9C3AB":{"rev":385893,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(11,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(30,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"B67D33CA-C19C-403B-AF09-E0ED66647848","rev":0}},"textAndAttributes":{"value":["\uf2bd",{"__ref__":true,"id":"0159D193-CA11-4C36-B580-9C716500F1D0","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"B67D33CA-C19C-403B-AF09-E0ED66647848":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"F000A449-4EBA-455A-9C7D-DBDA3DC6B3B2","rev":0}}}},"F000A449-4EBA-455A-9C7D-DBDA3DC6B3B2":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"0159D193-CA11-4C36-B580-9C716500F1D0":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"user-circle"}}},"Label_5D0A3113_149A_488F_B7AD_0E9623B49913":{"rev":385891,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(32,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"0684425F-A3C0-411B-B4D9-A6C377F33C2C","rev":0}},"textAndAttributes":{"value":["user",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,32,20]},"0684425F-A3C0-411B-B4D9-A6C377F33C2C":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"8AF78133-1C9A-4FA8-A171-05413FBC3F51","rev":0}}}},"8AF78133-1C9A-4FA8-A171-05413FBC3F51":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_CBA8A125_7E16_49CE_8A5C_34781AB43EEE":{"rev":385892,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,81)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_60B610DC_224E_4599_93F7_2FFDDFA28B12","rev":606851},{"__ref__":true,"id":"Label_14D37FCA_0F47_419D_AEA9_C3CB3AB5BA3C","rev":606852}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"03001939-5741-4562-8F7D-6A6AC633E935","rev":0}},"metadata":{"value":{"__ref__":true,"id":"555D585A-B58F-4839-B0FF-FB910978F4F3","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_60B610DC_224E_4599_93F7_2FFDDFA28B12":{"rev":606851,"props":{"name":{"value":"checkmark"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500455,12.1396484375)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"D0DC5CA7-A7EF-4D85-B0C2-C2EDF8F56C09","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"4BBD85DE-8F32-4BAD-A650-86A499CC3B67","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"D0DC5CA7-A7EF-4D85-B0C2-C2EDF8F56C09":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"D3DC120E-9437-493F-AC08-ED4B74188A4B","rev":0}}}},"D3DC120E-9437-493F-AC08-ED4B74188A4B":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"4BBD85DE-8F32-4BAD-A650-86A499CC3B67":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_14D37FCA_0F47_419D_AEA9_C3CB3AB5BA3C":{"rev":606852,"props":{"name":{"value":"frozen indicator"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(15,0)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"61EFFD20-1683-46F2-AE0C-CB39A8EBE6CE","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"7B649D36-316E-40AC-A170-0ABC5E77DFAB","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"61EFFD20-1683-46F2-AE0C-CB39A8EBE6CE":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"EE0D4562-B18B-4E6D-AD6A-ED312D830405","rev":0}}}},"EE0D4562-B18B-4E6D-AD6A-ED312D830405":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"7B649D36-316E-40AC-A170-0ABC5E77DFAB":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"03001939-5741-4562-8F7D-6A6AC633E935":{"rev":0,"props":{"_rev":{"value":0}}},"555D585A-B58F-4839-B0FF-FB910978F4F3":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"82023772-1032-46ED-82DD-0E01077E28EF":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_E9A6EC8D_B083_4862_B6B2_F2091B4C4A99":{"rev":388163,"props":{"name":{"value":"stage storage"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(699,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(74,118)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_9FBBA010_3CBA_4A7F_B13E_40CD5D23B43C","rev":388167},{"__ref__":true,"id":"Label_B973ACD2_F36E_4D2A_B03C_4517A1C4BAFD","rev":388165},{"__ref__":true,"id":"Ellipse_9B1EB7AF_3D04_44AE_A6B7_380FCDDEBE67","rev":388166}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"D1225952-CA51-4940-A951-3D28B2442D3F","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_9FBBA010_3CBA_4A7F_B13E_40CD5D23B43C":{"rev":388167,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(27,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"195181B4-9B8C-4433-807B-4FE75BA7E408","rev":0}},"textAndAttributes":{"value":["\uf1c0",{"__ref__":true,"id":"97286C06-81A3-4CAC-903C-D6FC37B81EC9","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"195181B4-9B8C-4433-807B-4FE75BA7E408":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"6350A1B3-AEBC-463A-93FE-B72EEF7B466E","rev":0}}}},"6350A1B3-AEBC-463A-93FE-B72EEF7B466E":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"97286C06-81A3-4CAC-903C-D6FC37B81EC9":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"database"}}},"Label_B973ACD2_F36E_4D2A_B03C_4517A1C4BAFD":{"rev":388165,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(54,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"39861827-9BA9-4530-A9CA-81249D197D48","rev":0}},"textAndAttributes":{"value":["storage",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,54,20]},"39861827-9BA9-4530-A9CA-81249D197D48":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"58CCE882-B18B-4A47-8E11-6DE9CB893E7D","rev":0}}}},"58CCE882-B18B-4A47-8E11-6DE9CB893E7D":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_9B1EB7AF_3D04_44AE_A6B7_380FCDDEBE67":{"rev":388166,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24,81)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_83878CF4_D761_4C91_A1F7_95D7D262F19C","rev":606855},{"__ref__":true,"id":"Label_C3CAC570_5A83_4FE3_A378_34C4D77B9FD8","rev":606856}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"C3433DA8-9750-4E71-939D-76327F4B7A3F","rev":0}},"metadata":{"value":{"__ref__":true,"id":"A3646507-41B1-4D6B-8823-79D3CAD82253","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_83878CF4_D761_4C91_A1F7_95D7D262F19C":{"rev":606855,"props":{"name":{"value":"checkmark"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500455,12.1396484375)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"39A8D612-7ADA-4AD2-8DE4-DC94429A5CFC","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"610835E1-E576-4744-9D03-05C6530F1C89","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"39A8D612-7ADA-4AD2-8DE4-DC94429A5CFC":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"24041C8D-89BD-4449-BCE9-19149A254635","rev":0}}}},"24041C8D-89BD-4449-BCE9-19149A254635":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"610835E1-E576-4744-9D03-05C6530F1C89":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_C3CAC570_5A83_4FE3_A378_34C4D77B9FD8":{"rev":606856,"props":{"name":{"value":"frozen indicator"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(15,0)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"920D8212-5055-4675-A659-50270376A7A2","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"2283CF89-8A77-42C0-83B3-6A482D6C7F18","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"920D8212-5055-4675-A659-50270376A7A2":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"C7B4B18C-6C46-47FF-990F-755AE0FD6027","rev":0}}}},"C7B4B18C-6C46-47FF-990F-755AE0FD6027":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"2283CF89-8A77-42C0-83B3-6A482D6C7F18":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"C3433DA8-9750-4E71-939D-76327F4B7A3F":{"rev":0,"props":{"_rev":{"value":0}}},"A3646507-41B1-4D6B-8823-79D3CAD82253":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"D1225952-CA51-4940-A951-3D28B2442D3F":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_A3B9EED8_7D5E_4513_997A_A92079A4CBF4":{"rev":390587,"props":{"name":{"value":"stage morphic"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(796,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(80,118)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_6C1F2BFB_1F95_43C1_926A_A0A176F118C1","rev":390591},{"__ref__":true,"id":"Label_AFC94DC1_8929_472D_BEA7_D917DB5FCC88","rev":390589},{"__ref__":true,"id":"Ellipse_298A4EFA_161A_4A01_B2B6_BC48D4D01656","rev":390590}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"E5BF336E-7735-45A2-BF4B-BFC02BE1BC55","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_6C1F2BFB_1F95_43C1_926A_A0A176F118C1":{"rev":390591,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(25,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(31,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"F49335B2-2D7A-4620-9E62-4E3C43D30E46","rev":0}},"textAndAttributes":{"value":["\uf1b2",{"__ref__":true,"id":"DD5DF55C-FA9A-4387-98EE-92A9EA47E76F","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"F49335B2-2D7A-4620-9E62-4E3C43D30E46":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"213245C3-EE7F-4367-8D09-FE459ADB430C","rev":0}}}},"213245C3-EE7F-4367-8D09-FE459ADB430C":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"DD5DF55C-FA9A-4387-98EE-92A9EA47E76F":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cube"}}},"Label_AFC94DC1_8929_472D_BEA7_D917DB5FCC88":{"rev":390589,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(60,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"03FE1EF6-F5D6-4658-B09B-9DF42D6A03B4","rev":0}},"textAndAttributes":{"value":["morphic",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,60,20]},"03FE1EF6-F5D6-4658-B09B-9DF42D6A03B4":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"94087515-DC51-4184-B256-2C1916ADA242","rev":0}}}},"94087515-DC51-4184-B256-2C1916ADA242":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_298A4EFA_161A_4A01_B2B6_BC48D4D01656":{"rev":390590,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(27,81)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_F3B21531_D533_4A00_8137_F7D9A6C01E8E","rev":606859},{"__ref__":true,"id":"Label_9ABA5CC1_96ED_4112_BD60_7B2BCBF40FA4","rev":606860}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"494DB53A-F25C-4A1E-AAA0-A6ACF4B3ABF1","rev":0}},"metadata":{"value":{"__ref__":true,"id":"D65F03CD-0592-4523-99AF-00D1257D1C34","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_F3B21531_D533_4A00_8137_F7D9A6C01E8E":{"rev":606859,"props":{"name":{"value":"checkmark"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500455,12.1396484375)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"D3AC0826-F637-442C-B916-551D10D1D68C","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"A9A8ACDF-25A0-4EA8-9F0E-BE9898BDA5A4","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"D3AC0826-F637-442C-B916-551D10D1D68C":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"9BFF9C0C-2FC7-446F-B5CC-FD28298A80ED","rev":0}}}},"9BFF9C0C-2FC7-446F-B5CC-FD28298A80ED":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"A9A8ACDF-25A0-4EA8-9F0E-BE9898BDA5A4":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_9ABA5CC1_96ED_4112_BD60_7B2BCBF40FA4":{"rev":606860,"props":{"name":{"value":"frozen indicator"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(15,0)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"FD300098-BDE3-4D77-928E-F0871AB902FF","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"BF6862E9-B417-4A40-B964-169B7219783C","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"FD300098-BDE3-4D77-928E-F0871AB902FF":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"FFBCEA82-CDBC-467C-8B42-6970439AD688","rev":0}}}},"FFBCEA82-CDBC-467C-8B42-6970439AD688":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"BF6862E9-B417-4A40-B964-169B7219783C":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"494DB53A-F25C-4A1E-AAA0-A6ACF4B3ABF1":{"rev":0,"props":{"_rev":{"value":0}}},"D65F03CD-0592-4523-99AF-00D1257D1C34":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"E5BF336E-7735-45A2-BF4B-BFC02BE1BC55":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_B25AD0E7_76E3_4456_9D37_8FAE723CAD27":{"rev":392945,"props":{"name":{"value":"stage world"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(899,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(61,118)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_666CA33D_E31C_4316_A027_5D437A61F74B","rev":392949},{"__ref__":true,"id":"Label_64E1D531_ADAA_4F9E_946A_E101808F4D45","rev":392947},{"__ref__":true,"id":"Ellipse_73D92D91_9250_400A_B766_FD95A56C344C","rev":392948}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"20BCBACD-530F-4BBE-9BDE-0D6FACD97B39","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_666CA33D_E31C_4316_A027_5D437A61F74B":{"rev":392949,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(16,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(30,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"74B8A24D-0C19-4EE9-ABC9-2F2159B43E94","rev":0}},"textAndAttributes":{"value":["\uf7a2",{"__ref__":true,"id":"F1D1BD04-F4ED-460B-9EBA-7B7ECB9C652A","rev":0}]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"74B8A24D-0C19-4EE9-ABC9-2F2159B43E94":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"87241F05-615E-47F3-9B12-3489FDB31DEF","rev":0}}}},"87241F05-615E-47F3-9B12-3489FDB31DEF":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"F1D1BD04-F4ED-460B-9EBA-7B7ECB9C652A":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cube"}}},"Label_64E1D531_ADAA_4F9E_946A_E101808F4D45":{"rev":392947,"props":{"name":{"value":"label"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(41,20)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"67042A53-3ADE-40C9-A211-963E308EECE4","rev":0}},"textAndAttributes":{"value":["world",null]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,41,20]},"67042A53-3ADE-40C9-A211-963E308EECE4":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"DDC5681A-6258-42E9-82E4-491322D116B4","rev":0}}}},"DDC5681A-6258-42E9-82E4-491322D116B4":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_73D92D91_9250_400A_B766_FD95A56C344C":{"rev":392948,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(18,81)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_95E1041D_706D_4BDC_8D88_6675611BA216","rev":606863},{"__ref__":true,"id":"Label_080E5EB5_C911_4210_9269_E079BCD0F6A8","rev":606864}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"installedFonts":{"value":{"__ref__":true,"id":"91135116-3909-4FA9-86C3-265E221DD601","rev":0}},"metadata":{"value":{"__ref__":true,"id":"3D9949F7-DA15-42DF-9BBF-435716FBA7D5","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_95E1041D_706D_4BDC_8D88_6675611BA216":{"rev":606863,"props":{"name":{"value":"checkmark"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.1396484375,12.1396484375)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"DF6A962F-FFA3-4055-800E-812D71811DAB","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"B833023C-F586-4726-A7F0-E1BF0140E61B","rev":0}]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"DF6A962F-FFA3-4055-800E-812D71811DAB":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"4ECC3238-6C60-4912-823B-B241845FCEDF","rev":0}}}},"4ECC3238-6C60-4912-823B-B241845FCEDF":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"B833023C-F586-4726-A7F0-E1BF0140E61B":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_080E5EB5_C911_4210_9269_E079BCD0F6A8":{"rev":606864,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"3B353F82-957C-4909-83C8-D7C645C54252","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"BCAC10AF-BD57-43AB-BF9C-88D60B3C8A39","rev":0}]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"3B353F82-957C-4909-83C8-D7C645C54252":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"A7716CFE-ECCA-423B-B254-6EF84182FB03","rev":0}}}},"A7716CFE-ECCA-423B-B254-6EF84182FB03":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"BCAC10AF-BD57-43AB-BF9C-88D60B3C8A39":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"91135116-3909-4FA9-86C3-265E221DD601":{"rev":0,"props":{"_rev":{"value":0}}},"3D9949F7-DA15-42DF-9BBF-435716FBA7D5":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"20BCBACD-530F-4BBE-9BDE-0D6FACD97B39":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"96BDD19A-D8BB-4E2B-B87A-B4D037C160AE":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"package loading progress indicator\\", _id: \\"f64ec4ab4ac2da6a67007e4f1ef82de8a479a583\\"})"}}},"HTMLMorph_1FA68A28_D1C2_41FD_8D96_6F21786A877D":{"rev":3697,"props":{"name":{"value":"css loading screen"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(36.38826522148531,50.78076171875)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(939.96484375,274.29296875)"},"visible":{"value":false},"styleClasses":{"value":["HTMLMorph","Morph","morph"]},"isLayoutable":{"value":false},"metadata":{"value":{"__ref__":true,"id":"6501215D-4996-4A4C-8632-FB4D89B69B25","rev":0}},"html":{"value":"<div style=\\"position: fixed; z-index: 1; height: 100%; width: 100%; background-color: transparent\\">\\n  <div id=\\"loading-bar\\">\\n     <div id=\\"progress\\" style=\\"width: 100%;\\">\\n  </div>\\n</div></div>"},"cssDeclaration":{"value":"#loading-bar {\\n  height: 20px;\\n  width: 400px;\\n  color: gray;\\n  border-style: solid;\\n  border-color: gray;\\n  border-width: 2px;\\n  border-radius: 10px;\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  overflow: hidden;\\n  margin: 0px 0 0 -202px;\\n}\\n\\n#progress {\\n  background-color: gray;\\n  height: 100%;\\n  animation: load 5s;\\n}\\n\\n@keyframes load {\\n  from { width: 0% }\\n  to { width: 100% }\\n}"}},"lively.serializer-class-info":{"className":"HTMLMorph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"html-morph.js"}}},"6501215D-4996-4A4C-8632-FB4D89B69B25":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"html-morph\\", _id: \\"3695da8ba64dd32d8645b4c1937b5d361e002bbc\\"})"}}},"8BA3D59D-46F5-47EE-9617-8143263FEFE1":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"},"publishedAlias":{"value":"world-loading-screen"},"excludedPackages":{"value":["kld-intersections","lively.collab"]},"publishedLocation":{"value":"/lively.freezer/loading-screen/"}}}},"requiredVersion":">=0.1","packagesToRegister":[],"packageDepMap":{"local://lively-object-modules/PartialFreezing":["local://lively-object-modules/WorldVersionViewer"],"local://lively-object-modules/WorldVersionViewer":[],"local://lively-object-modules/ModuleProgress":[]}}');
lively.resources={resource:Uc,loadViaScript:Nq};lively.morphic={loadMorphFromSnapshot:bq};Ka("bN",void 0)}}});System.register("2",["./__root_module__-7d3cbdeb.js","kld-intersections"],function(){return{setters:[function(){},function(){}],execute:function(){}}});System.register("3",["./__root_module__-7d3cbdeb.js","kld-intersections","./index-c8d23f92.js","./index-fa65a47c.js"],function(){return{setters:[function(){},function(){},function(){},function(){}],execute:function(){}}});