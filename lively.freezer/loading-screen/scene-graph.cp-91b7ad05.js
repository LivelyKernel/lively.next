System.register("./__rootModule___commonjs-entry-71573ff5.js ./popups.cp-68dc8a4a.js ./index-d18accbd.js @babel/plugin-syntax-import-meta ./list.cp-8569fe93.js ./loading-indicator.cp-b18e3b89.js ./value-widgets-6cb12552.js ./tooltips.cp-6a2406c0.js".split(" "),function(Lc){var pd,Nd,Tc,Jc,$d,Bb,rd,Id,Ac,Pc,gd,nd,Fd,ic,vd,sb,Xb,Nb,bc,hb,cb,Hb,ec,ub,yb,ba,wb,Xa,Za,Sb,Cb,Da;return{setters:[function(zb){pd=zb.q;Nd=zb.I;Tc=zb.H;Jc=zb.e;$d=zb.M;Bb=zb.C;rd=zb.R;Id=zb.r;Ac=zb.b;Pc=zb.u;gd=zb.h;nd=zb.j;Fd=
zb.B;ic=zb.f;vd=zb.F;sb=zb.b7;Xb=zb.bL;Nb=zb.i;bc=zb.G;hb=zb.y;cb=zb._;Hb=zb.c;ec=zb.V;ub=zb.p;yb=zb.t;ba=zb.T;wb=zb.L;Xa=zb.w},function(zb){Za=zb.l},function(zb){Sb=zb.b;Cb=zb.T;Da=zb.S},function(){},function(){},function(){},function(){},function(){}],execute:function(){var zb=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/interactive-tree.js");zb.Tree=Sb;zb.TreeData=Cb;zb.morph=pd;zb.Icon=Nd;zb.HorizontalLayout=Tc;zb.easings=Jc;zb.Morph=$d;zb.Color=Bb;zb.Rectangle=rd;zb.rect=Id;zb.pt=
Ac;zb.noUpdate=Pc;zb.signal=gd;zb.arr=nd;zb.obj=Fd;zb.fun=ic;zb.tree=vd;zb.getClassName=sb;zb.TextLayout=Xb;var db=function(T){var ia=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/interactive-tree.js"),ka=ia.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof ia.InteractiveTreeContainer?ia.InteractiveTreeContainer:ia.InteractiveTreeContainer=function(K){if(!K||!K[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Nb(ka,T,[{key:"onChildRemoved",value:function(K){}},{key:"onChildAdded",value:function(K){}},{key:"toggleSelected",value:function(K){if(this.tree){var ya=this.tree,pb=ya.selectionFontColor,La=ya.nonSelectionFontColor;this.submorphs.filter(function(eb){return!eb._isControlElement&&eb.styleClasses.includes("Label")}).forEach(function(eb){eb.fontColor=K?pb:La})}}},{key:"onGrab",value:function(K){var ya=this.tree,pb=this.node;this.fill=zb.Color.gray.withA(.5);this.fontColor=ya.selectionFontColor;
this.opacity=.8;Nb._get(Object.getPrototypeOf(ka.prototype),"onGrab",this).call(this,K);pb&&(this.toggleSelected(!1),ya.collapse(pb),ya.treeData.parentNode(pb).container.onChildRemoved(this),this._data=ya.treeData.remove(pb),pb.container.target.remove(),ya.update(!0))}},{key:"wantsToBeDroppedOn",value:function(K){this.showPreviewOn(K);return!0}},{key:"showPreviewOn",value:function(K){if(K.isContainer)var ya=K.tree;K.isTree&&(ya=K);ya&&ya.showDropPreviewFor&&ya.showDropPreviewFor(this)}},{key:"insertAsChild",
value:function(){var K=cb(regeneratorRuntime.mark(function La(pb){return regeneratorRuntime.wrap(function(eb){for(;;)switch(eb.prev=eb.next){case 0:return this.tree.treeData.add(pb._data,this.node,this.node.children[0]),this.tree.uncollapse(this.node),this.tree.treeData.remove(this.tree._previewNode),eb.next=5,this.tree.whenRendered();case 5:this.tree.update(!0),this.onChildAdded(pb);case 7:case "end":return eb.stop()}},La,this)}));return function(pb){return K.apply(this,arguments)}}()},{key:"onBeingDroppedOn",
value:function(K,ya){var pb=this;this.tree._dropInProgress=!0;Nb._get(Object.getPrototypeOf(ka.prototype),"onBeingDroppedOn",this).call(this,K,ya);K=function(){pb.fill=zb.Color.gray.withA(.5);pb.opacity=1;pb.tree._dropInProgress=!1;pb.tree.refresh()};ya.isTree?ya.insertAtPlaceholder(this).then(K):ya.isContainer?ya.insertAsChild(this).then(K):K()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:zb.Color.transparent},
isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var K=this,ya=this.tree.treeData;return ya&&ya.asList().find(function(pb){return pb.container===K})}}}}}],ia,{pathInPackage:function(){return"./studio/interactive-tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:455,end:2920})}(zb.Morph);zb.InteractiveTreeContainer=
db;zb.InteractiveTreeContainer=db;db=function(T){var ia=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/interactive-tree.js"),ka=ia.hasOwnProperty("InteractiveTreeData")&&"function"===typeof ia.InteractiveTreeData?ia.InteractiveTreeData:ia.InteractiveTreeData=function(K){if(!K||!K[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Nb(ka,T,[{key:"display",value:function(K){K.container||(K.container=K.getContainer());
return[K.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(K){return K.isCollapsed}},{key:"collapse",value:function(K,ya){K.isCollapsed=ya}},{key:"getChildren",value:function(K){return K.isLeaf?null:this.filterActive?K.children.filter(function(ya){return ya&&ya.visible}):K.children}},{key:"isLeaf",value:function(K){return 0==(this.getChildren(K)||[]).length}},{key:"add",value:function(K){var ya=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.root,pb=2<arguments.length?
arguments[2]:void 0;ya.children||(ya.children=[]);pb?zb.arr.pushAt(ya.children,K,ya.children.indexOf(pb)):ya.children.push(K);ya.isLeaf=!1}},{key:"replace",value:function(K,ya){var pb=this.parentNode(K);K=pb.children.indexOf(K);pb.children[K]=ya}},{key:"next",value:function(K){var ya=this.parentNode(K);return ya&&ya.children[ya.children.indexOf(K)+1]}},{key:"isBefore",value:function(K,ya){this.next(K)===ya}},{key:"isAfter",value:function(K,ya){this.next(ya)===K}},{key:"addBefore",value:function(K,
ya){this.add(K,this.parentNode(ya),ya)}},{key:"addAfter",value:function(K,ya){var pb=this.parentNode(ya);ya=pb.children.indexOf(ya)+1;this.add(K,pb,pb.children[ya])}},{key:"remove",value:function(K){var ya=this.parentNode(K);if(ya)return zb.arr.remove(ya.children,K),ya.children==[]&&(ya.children=null),K}},{key:"filter",value:function(){var K=cb(regeneratorRuntime.mark(function La(pb){var eb,jb,E=arguments;return regeneratorRuntime.wrap(function(Wb){for(;;)switch(Wb.prev=Wb.next){case 0:return eb=
1<E.length&&void 0!==E[1]?E[1]:1,Wb.next=3,this.uncollapseAll(function(R,xb){return xb<eb+1});case 3:jb=this.filterActive,this.filterActive=!1,this.asListWithIndexAndDepth(!1).reverse().forEach(function(R){var xb=R.node;if(0==R.depth)return xb.visible=!0;xb.visible=pb(xb);!xb.isCollapsed&&xb.children.find(function(Ja){return Ja.visible})?(xb.visible=!0,xb.container.opacity=.5):xb.container.opacity=1;return xb.visible}),this.filterActive=jb;case 7:case "end":return Wb.stop()}},La,this)}));return function(pb){return K.apply(this,
arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],ia,{pathInPackage:function(){return"./studio/interactive-tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2928,end:5432})}(zb.TreeData);zb.InteractiveTreeData=db;zb.InteractiveTreeData=db;var ib=function(T){var ia=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/interactive-tree.js"),
ka=ia.hasOwnProperty("InteractiveTree")&&"function"===typeof ia.InteractiveTree?ia.InteractiveTree:ia.InteractiveTree=function(K){if(!K||!K[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Nb(ka,T,[{key:"update",value:function(K){var ya=this;Nb._get(Object.getPrototypeOf(ka.prototype),"update",this).call(this,K);this.treeData&&this.relayoutContainers();K&&this.embeddedMorphs.forEach(function(pb){pb.isContainer&&(zb.obj.equals(pb.fill,
zb.Color.transparent)||(pb.fill=zb.Color.transparent),pb.fontFamily!=ya.fontFamily&&(pb.fontFamily=ya.fontFamily),pb.fontSize!=ya.fontSize&&(pb.fontSize=ya.fontSize))})}},{key:"onDrop",value:function(K){Nb._get(Object.getPrototypeOf(ka.prototype),"onDrop",this).call(this,K);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(K){}},{key:"onDropHoverUpdate",value:function(K){}},{key:"onDropHoverOut",value:function(K){}},{key:"onHoverOut",value:function(){var K=
cb(regeneratorRuntime.mark(function La(pb){return regeneratorRuntime.wrap(function(eb){for(;;)switch(eb.prev=eb.next){case 0:Nb._get(Object.getPrototypeOf(ka.prototype),"onHoverOut",this).call(this,pb),this._previewNode&&this._previewNode.container.world()&&this.treeData.remove(this._previewNode),this.resetContainerSelection(),this.update(!0);case 4:case "end":return eb.stop()}},La,this)}));return function(pb){return K.apply(this,arguments)}}()},{key:"insertAtPlaceholder",value:function(){var K=cb(regeneratorRuntime.mark(function La(pb){var eb;
return regeneratorRuntime.wrap(function(jb){for(;;)switch(jb.prev=jb.next){case 0:return eb=this.treeData.parentNode(this._previewNode),this.treeData.replace(this._previewNode,pb._data),this.treeData.remove(this._previewNode),jb.next=5,this.whenRendered();case 5:if(this.update(!0),eb.container)eb.container.onChildAdded(pb);case 7:case "end":return jb.stop()}},La,this)}));return function(pb){return K.apply(this,arguments)}}()},{key:"scrollUpSlowly",value:function(){var K=this;if(!this._scrollingUp){this._scrollingUp=
!0;var ya=function(){var pb=cb(regeneratorRuntime.mark(function eb(){return regeneratorRuntime.wrap(function(jb){for(;;)switch(jb.prev=jb.next){case 0:if(!(K._scrollingUp&&0<K.scroll.y)){jb.next=6;break}jb.next=3;return K.animate({scroll:K.scroll.subXY(0,30),duration:300,easing:zb.easings.linear});case 3:ya();jb.next=7;break;case 6:K._scrollingUp=!1;case 7:case "end":return jb.stop()}},eb)}));return function(){return pb.apply(this,arguments)}}();ya()}}},{key:"scrollDownSlowly",value:function(){var K=
this;if(!this._scrollingDown){this._scrollingDown=!0;var ya=function(){var pb=cb(regeneratorRuntime.mark(function eb(){return regeneratorRuntime.wrap(function(jb){for(;;)switch(jb.prev=jb.next){case 0:if(!(K._scrollingDown&&K.scroll.y<K.scrollExtent.y-K.height)){jb.next=6;break}jb.next=3;return K.animate({scroll:K.scroll.addXY(0,30),duration:300,easing:zb.easings.linear});case 3:ya();jb.next=7;break;case 6:K._scrollingDown=!1;case 7:case "end":return jb.stop()}},eb)}));return function(){return pb.apply(this,
arguments)}}();ya()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(K){K.isContainer&&(K.fill=zb.Color.transparent)})}},{key:"showDropPreviewFor",value:function(K){var ya=this;K=this.localize(K.globalBounds().center());var pb=this.textPositionFromPoint(K),La=this.treeData.asListWithIndexAndDepth(function(xb){xb=xb.node;return xb!=ya._previewNode&&xb.container&&xb.container.world()}),
eb=(La.find(function(xb){return xb.i-1===pb.row})||{}).node,jb=eb&&eb.container,E=this.ensurePlaceholder(),Wb=!!E.container.world(),R=K.subPt(this.scroll).subPt(this.scrollbarOffset);10>R.y?this.scrollUpSlowly():R.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!jb){if(La.length>pb.row||zb.arr.last(this.treeData.root.children)===E)return;this.treeData.remove(E);this.treeData.add(E);this.update(!0)}if(jb){La=this.textLayout.boundsFor(this,pb);if(4>
Math.abs(La.top()-K.y)){if(this.treeData.isBefore(E,eb))return;this.treeData.remove(E);this.treeData.addBefore(E,eb)}else if(4>Math.abs(La.bottom()-K.y)&&(eb.isCollapsed||this.treeData.isLeaf(eb))){if(this.treeData.isAfter(E,eb))return;this.treeData.remove(E);this.treeData.addAfter(E,eb)}else{jb.fill=zb.Color.gray.withA(.5);if(!Wb)return;this.treeData.remove(E)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var K=zb.pt(this.width-100,this.document.getLine(0).height);this._previewNode||
(this._previewNode={container:zb.morph({acceptsDrops:!1,reactsToPointer:!1,fill:zb.Color.gray.withA(.5),borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=K;return this._previewNode}},{key:"relayoutContainers",value:function(){this.selectedIndex;var K=bc(this.treeData.asListWithIndexAndDepth()),ya;try{for(K.s();!(ya=K.n()).done;){var pb=ya.value,La=pb.node;if(La.container&&this.isLineVisible(pb.i)){La.container.nativeCursor="grab";var eb=this.width-La.container.left-25;
La.container.width!=eb&&(La.container.width=eb)}}}catch(jb){K.e(jb)}finally{K.f()}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"InteractiveTree"}}],ia,{pathInPackage:function(){return"./studio/interactive-tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:5440,end:10967})}(zb.Tree);zb.InteractiveTree=ib;
zb.InteractiveTree=ib;(function(T){var ia=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/interactive-tree.js"),ka=ia.hasOwnProperty("SceneGraphTreeLayout")&&"function"===typeof ia.SceneGraphTreeLayout?ia.SceneGraphTreeLayout:ia.SceneGraphTreeLayout=function(K){if(!K||!K[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Nb(ka,T,[{key:"estimateExtentOfLine",value:function(K,ya){2<arguments.length&&void 0!==
arguments[2]?arguments[2]:K.getGlobalTransform();var pb=ya.textAndAttributes.find(function(La){return La.isMorph});pb&&ya.changeExtent(K.width,pb.height)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"SceneGraphTreeLayout"}}],ia,{pathInPackage:function(){return"./studio/interactive-tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:10969,end:11252})})(zb.TextLayout);ib=function(T){var ia=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/interactive-tree.js"),ka=ia.hasOwnProperty("SceneGraphTree")&&"function"===typeof ia.SceneGraphTree?ia.SceneGraphTree:ia.SceneGraphTree=function(K){if(!K||!K[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Nb(ka,T,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},
{key:"selectMorphInTarget",value:function(K){var ya=this,pb=this.treeData.asList().find(function(La){return La.container&&La.container.target===K});pb&&this.selectedNode!=pb&&this.selectPath(this.treeData.pathOf(pb));pb||(this.refresh(),this.treeData.followPath([K].concat(hb(K.ownerChain())).reverse(),function(La,eb){eb.container||(eb.container=eb.getContainer());if(eb.container)return eb.container.target==La}).then(function(La){La&&(ya.selectedNode=La)}))}},{key:"onLoad",value:function(){var K=cb(regeneratorRuntime.mark(function pb(){return regeneratorRuntime.wrap(function(La){for(;;)switch(La.prev=
La.next){case 0:return this.textLayout=new zb.SceneGraphTreeLayout(this),La.next=3,this.whenRendered();case 3:if(!this.ownerChain().find(function(eb){return eb.isComponent})){La.next=5;break}return La.abrupt("return");case 5:this.submorphs=[];case 6:case "end":return La.stop()}},pb,this)}));return function(){return K.apply(this,arguments)}}()},{key:"adjustProportions",value:function(K){K=(K?K.state.dragDelta:{y:0}).y;var ya=this.get("inspector"),pb=this.get("scene graph resizer"),La=this.get("mode selector"),
eb=this.get("connections tree");this.height+=K;ya.height-=K;eb.height-=K;pb.top=this.bottom;pb.left=0;La.top=pb.bottom;eb.top=ya.top=La.bottom+5}},{key:"reset",value:function(){var K=this;this.treeData=new zb.InteractiveTreeData({children:[],container:zb.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(ya){return null==ya.id}).forEach(function(ya){return K.removeAnchor(ya)})}},{key:"setTarget",value:function(){var K=cb(regeneratorRuntime.mark(function La(pb){return regeneratorRuntime.wrap(function(eb){for(;;)switch(eb.prev=
eb.next){case 0:return this.target=pb,this.treeData=this.getTreeFromSubmorphHierarchy(pb),eb.next=4,this.uncollapse(this.treeData.root);case 4:this.refresh();case 5:case "end":return eb.stop()}},La,this)}));return function(pb){return K.apply(this,arguments)}}()},{key:"isNodeOutOfSync",value:function(K){var ya=this;if(K===this._previewNode)return!1;if(this.treeData.root==K)return this.treeData.root.children.length!=this.target.submorphs.filter(function(La){return!ya.ignoreMorph(La)}).length;if(K.container.nameNeedsUpdate)return!0;
var pb=K.container.target.submorphs.filter(function(La){return!ya.ignoreMorph(La)});return pb.length!=K.children.length||pb.map(function(La){return La.name}).join("")!=K.children.map(function(La){return La.target?La.target.name:""}).join("")?!0:!1}},{key:"getTarget",value:function(K){return K==this.treeData.root?this.target:K.container.target}},{key:"getNewChildren",value:function(K){var ya=this,pb=this.getTarget(K).submorphs.map(function(E){return E.__scene_graph_target__?E.__scene_graph_target__():
E}).filter(function(E){return!ya.ignoreMorph(E)}),La=[],eb=function(E){var Wb=pb[E],R=zb.arr.without(K.children,ya._previewNode).find(function(xb){return xb.container&&xb.container.target.id==Wb.id});La[E]=R?R:ya.readMorphHierarchy(Wb)},jb;for(jb in pb)eb(jb);return La}},{key:"refresh",value:function(){var K=this;if(!this._updating&&!this._dropInProgress){var ya=!1,pb=this.treeData.root;zb.tree.prewalk(pb,function(La){La==pb&&K.isNodeOutOfSync(La)&&(La.children=K.getNewChildren(La));La.container&&
K.isNodeOutOfSync(La)&&(ya=!0,La.name=La.container.target.name,La.container.refresh(),La.children=K.getNewChildren(La))},function(La){return La.children});this.update(ya)}}},{key:"ignoreMorph",value:function(K){return K.isMorph?K.isContainer||K.isWindow||K.getWindow()||K.isEpiMorph||K.isHand||K.isHaloItem||K.isCommentIndicator||["lively.halos"].includes(K.constructor[Symbol["for"]("lively-module-meta")]["package"].name)||["Menu"].includes(K.constructor.name):!1}},{key:"onDropHoverOut",value:function(K){var ya=
K.hand.grabbedMorphs[0];K=K.hand.findDropTarget();if(!(K===this||K&&K.ownerChain().includes(this))&&ya&&ya.isContainer)ya.onDragOutside()}},{key:"onDropHoverIn",value:function(K){var ya=K.hand.grabbedMorphs[0];ya&&!ya.isContainer&&($world.halos().forEach(function(pb){return pb.remove()}),ya.remove(),Object.assign(ya,K.hand._grabbedMorphProperties.get(ya).pointerAndShadow),ya=this.renderContainerFor(ya,!1),K.hand.grab(ya),ya.leftCenter=zb.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(K){return new zb.InteractiveTreeData(this.readMorphHierarchy(K))}},
{key:"readMorphHierarchy",value:function(K){var ya=this;return zb.tree.mapTree(K,function(pb,La){La={name:pb.name,isCollapsed:!0,getContainer:function(){return ya.renderContainerFor(pb)},visible:!0,children:La};pb.isWorld&&(La.container=La.getContainer());return La},function(pb){return pb.submorphs.filter(function(La){return pb.isWorld?!ya.ignoreMorph(La):!0})})}},{key:"renderContainerFor",value:function(){var K=0<arguments.length&&void 0!==arguments[0]?arguments[0]:zb.morph({name:"root"}),ya=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:!0,pb=new zb.MorphContainer({tree:this,fill:ya?zb.Color.transparent:zb.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:K,opacity:K.visible?1:.5});ya||(pb.layout=new zb.HorizontalLayout({spacing:2,align:"center"}));K._data?(pb._data=K._data,K._data.container=pb):pb._data={name:K.name,isCollapsed:!0,container:pb,children:[]};pb.whenRendered().then(function(){return pb.refresh()});return pb}},{key:"collapseAll",value:function(){var K=
this;this.treeData.asList().forEach(function(ya){return ya!=K.treeData.root?ya.isCollapsed=!0:ya.isCollapsed=!1})}},{key:"filterMorphs",value:function(){var K=cb(regeneratorRuntime.mark(function La(pb){var eb=this,jb;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return jb=pb.tokens[0],this.treeData.filterActive||this._collapseState||(this._collapseState=new WeakMap(this.treeData.asList().map(function(Wb){return[Wb,Wb.isCollapsed]}))),this.treeData.filterActive=!!jb,
E.next=5,this.treeData.filter(function(Wb){var R=!!jb&&Wb.name.includes(jb);Wb.container||(Wb.container=Wb.getContainer());R?Wb.container.highlightTerm(jb):Wb.container.highlightTerm();return R},3);case 5:this.treeData.filterActive||(this.treeData.asList().forEach(function(Wb){Wb.container&&Wb.container.highlightTerm();Wb.visible=!0;Wb.isCollapsed=eb._collapseState.has(Wb)?eb._collapseState.get(Wb):!0}),this._collapseState=null),this.refresh();case 7:case "end":return E.stop()}},La,this)}));return function(pb){return K.apply(this,
arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1},textLayout:{initialize:function(){this.textLayout=new zb.SceneGraphTreeLayout(this)}}}}}],ia,{pathInPackage:function(){return"./studio/interactive-tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:11261,end:19283})}(zb.InteractiveTree);zb.SceneGraphTree=ib;zb.SceneGraphTree=ib;var Ea=function(T){var ia=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/interactive-tree.js"),ka=ia.hasOwnProperty("MorphContainer")&&"function"===typeof ia.MorphContainer?ia.MorphContainer:ia.MorphContainer=function(K){if(!K||!K[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Nb(ka,T,[{key:"refresh",
value:function(){var K=cb(regeneratorRuntime.mark(function pb(){var La,eb;return regeneratorRuntime.wrap(function(jb){for(;;)switch(jb.prev=jb.next){case 0:if(La=this.target){jb.next=3;break}return jb.abrupt("return");case 3:this.reactsToPointer=!0,this.dropShadow=!1,this.submorphs=[this.getLabel(),0<La.comments.length&&this.getCommentControls(),La.layout&&this.getLayoutControls(),this.getConnectionControls()].filter(Boolean).map(function(E,Wb){E.fitIfNeeded();E.left=eb?eb.right+5:0;E.top=2;return eb=
E}),this.height=20,this.opacity=La.visible?1:.5;case 8:case "end":return jb.stop()}},pb,this)}));return function(){return K.apply(this,arguments)}}()},{key:"applyLayoutIfNeeded",value:function(){}},{key:"getLabel",value:function(){var K=this.getSubmorphNamed("name label")||zb.morph({type:"label",name:"name label",reactsToPointer:!1,padding:zb.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),ya=K.textString.slice(2,-1);ya&&ya==this.target.name||(K.value=[].concat(hb(this.getIcon(this.target)),
[" "+this.target.name+" "]));return K}},{key:"getIcon",value:function(K){return zb.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[zb.getClassName(K)]||"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var K=this.getSubmorphNamed("layout label")||zb.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,
padding:zb.Rectangle.inset(4,2,4,2),fill:zb.Color.orange,fontColor:zb.Color.white});K._isControlElement=!0;K.textString!=this.target.layout.name()&&(K.value=this.target.layout.name());return K}},{key:"getCommentControls",value:function(){var K=this.getSubmorphNamed("comment label")||zb.morph({type:"label",name:"comment label",tooltip:"Open comment browser to browse all comments",borderRadius:3,acceptsDrops:!1,padding:zb.Rectangle.inset(4,2,4,2),fill:zb.Color.rgb(241,196,15),fontColor:zb.Color.black});
K._isControlElement=!0;var ya="".concat(this.target.comments.length," comment").concat(1==this.target.comments.length?"":"s");K.textString!=ya&&(K.value=ya);return K}},{key:"getConnectionControls",value:function(){this.connectionCount=this.target.attributeConnections?this.target.attributeConnections.filter(function(pb){return!pb.targetObj.isHalo}).length:0;var K=this.getSubmorphNamed("connections label")||zb.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:zb.Rectangle.inset(4,
2,4,2),nativeCursor:"pointer",fill:zb.Color.red,fontColor:zb.Color.white});K._isControlElement=!0;K.visible=!this.connectionHalo&&!!this.connectionCount;var ya=this.connectionCount?"".concat(this.connectionCount," connection").concat(1<this.connectionCount?"s":""):"Manage Connections";K.textString!=ya&&(K.value=ya);return K}},{key:"highlightTerm",value:function(K){var ya=this.submorphs[0],pb=ya.textAndAttributes.slice(0,2),La=ya.textString.slice(1).split(K);1===La.length?ya.textAndAttributes=[].concat(hb(pb),
[La[0]]):(ya.textAndAttributes=[].concat(hb(pb),hb(zb.arr.interpose(La.map(function(eb){return[eb,{}]}),[K,{fontWeight:"900"}]).flat())),ya.whenRendered().then(function(){ya.fitIfNeeded()}))}},{key:"getClassControls",value:function(){}},{key:"wantsToBeDroppedOn",value:function(K){var ya=Nb._get(Object.getPrototypeOf(ka.prototype),"wantsToBeDroppedOn",this).call(this,K);if(![K].concat(hb(K.ownerChain())).includes(this.tree))this.onDragOutside();return ya}},{key:"onGrab",value:function(){var K=cb(regeneratorRuntime.mark(function La(pb){var eb;
return regeneratorRuntime.wrap(function(jb){for(;;)switch(jb.prev=jb.next){case 0:return this.tree._dropInProgress=!0,eb=this.target.globalPosition,Nb._get(Object.getPrototypeOf(ka.prototype),"onGrab",this).call(this,pb),this._data.globalTargetPosition=eb,jb.next=6,this.whenRendered();case 6:if(this.tree.fullContainsWorldPoint(this.globalPosition))this.leftCenter=zb.pt(-20,0);else this.onDragOutside();this.tree._dropInProgress=!1;case 8:case "end":return jb.stop()}},La,this)}));return function(pb){return K.apply(this,
arguments)}}()},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=zb.fun.createQueue("container-hover-queue",function(){var K=cb(regeneratorRuntime.mark(function eb(pb,La){var jb,E,Wb;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return jb=pb.target,E=jb.opacity,Wb=jb.scale,pb.target.opacity=0,pb.target.scale=.5,$world.halos().forEach(function(xb){return xb.remove()}),$world.firstHand.grab(pb.target),pb.target._data=
pb._data,pb.remove(),pb.target.position=zb.pt(0,0),R.next=10,pb.target.animate({opacity:E,scale:Wb,duration:200});case 10:La();case 11:case "end":return R.stop()}},eb)}));return function(pb,La){return K.apply(this,arguments)}}())),this.queue.push(this))}},{key:"onChildAdded",value:function(K){var ya=this.node.children.indexOf(K.node||K._data)+1;ya=this.node.children[ya];K.target.remove();ya?(ya=this.target.submorphs.indexOf(ya.container.target),this.target.addMorphAt(K.target,ya)):this.target.addMorph(K.target);
K._data.globalTargetPosition&&(K.target.position=this.target.localize(K._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(K){}},{key:"toggleConnectionControl",value:function(K){this.getSubmorphNamed("connections label").visible=K}},{key:"toggleSelected",value:function(){var K=cb(regeneratorRuntime.mark(function La(pb){var eb=this,jb,E,Wb;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(this._active!==pb){R.next=2;break}return R.abrupt("return");case 2:this._active=
pb;Nb._get(Object.getPrototypeOf(ka.prototype),"toggleSelected",this).call(this,pb);if(!(pb&&this.target&&this.target.isMorph&&this.world())){R.next=30;break}R.next=7;return this.target.whenRendered();case 7:this.get("inspector").targetObject=this.target;this.get("connections tree").inspectConnectionsOf(this.target);if(!this.connectionHalo){R.next=11;break}return R.abrupt("return");case 11:jb=bc(this.world().halos()),R.prev=12,jb.s();case 14:if((E=jb.n()).done){R.next=21;break}Wb=E.value;if(Wb.target!==
this.target){R.next=18;break}return R.abrupt("return");case 18:Wb.remove();case 19:R.next=14;break;case 21:R.next=26;break;case 23:R.prev=23,R.t0=R["catch"](12),jb.e(R.t0);case 26:return R.prev=26,jb.f(),R.finish(26);case 29:zb.noUpdate({sourceObj:this.world(),targetObj:this.sideBar,sourceAttribute:"showHaloFor",targetAttribute:"selectNode"},function(){return eb.world().showHaloFor(eb.target)});case 30:case "end":return R.stop()}},La,this,[[12,23,26,29]])}));return function(pb){return K.apply(this,
arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(K){this.submorphs[0].fontFamily=K}},fontColor:{after:["submorphs"],derived:!0,set:function(K){this.submorphs[0].fontColor=K}},fontSize:{derived:!0,set:function(K){this.submorphs[0].fontSize=K}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,
get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],ia,{pathInPackage:function(){return"./studio/interactive-tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:19291,end:27859})}(zb.InteractiveTreeContainer);zb.MorphContainer=Ea;zb.MorphContainer=Ea;var W=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/scene-graph.cp.js");W.component=Hb;W.ViewModel=ec;W.part=ub;W.easings=Jc;W.touchInputDevice=yb;W.Icon=Nd;W.morph=pd;W.TilingLayout=ba;W.pt=Ac;W.Color=Bb;W.rect=Id;W.Label=wb;W.PropLabel=Za;W.SceneGraphTree=
ib;W.InteractiveTreeData=db;W.SearchField=Da;W.getClassName=sb;W.arr=nd;W.fun=ic;W.connect=Xa;db=Lc("MorphPanelModel",function(T){var ia=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/scene-graph.cp.js"),ka=ia.hasOwnProperty("MorphPanelModel")&&"function"===typeof ia.MorphPanelModel?ia.MorphPanelModel:ia.MorphPanelModel=function(K){if(!K||!K[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Nb(ka,T,[{key:"showHaloFor",
value:function(K){K&&(this.world().halos().forEach(function(ya){return ya.remove()}),this.world().showHaloFor(K.container.viewModel.target))}},{key:"relayout",value:function(){this.onWorldResize()}},{key:"attachToWorld",value:function(K){W.connect(K,"onChange",this,"onHierarchyChange",{garbageCollect:!0});W.connect(K,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});W.connect(K,"showHaloFor",this,"selectNode",{garbageCollect:!0});this.reset(K)}},{key:"reset",value:function(K){this.ui.sceneGraph.setTarget(K)}},
{key:"selectNode",value:function(K){Array.isArray(K)&&1===K.length&&(K=K[0]);K.isMorph&&this.ui.sceneGraph.selectMorphInTarget(K)}},{key:"clearFocus",value:function(){this.ui.sceneGraph.clearSelection()}},{key:"onHierarchyChange",value:function(K){if("addMorphAt"===K.selector||"removeMorph"===K.selector||"name"===K.prop){var ya=this.ui.sceneGraph;!ya||!ya.owner.visible||K.target&&K.target.isHand||K.target&&ya.ignoreMorph(K.target)||K.args&&!K.args[0].isHalo&&ya.ignoreMorph(K.args[0])||K.target.ownerChain().find(function(pb){return ya.ignoreMorph(pb)})||
W.fun.debounceNamed("scene-graph-update",50,function(){return ya.refresh()})()}}},{key:"detachFromWorld",value:function(K){var ya=this;K.attributeConnections.forEach(function(pb){pb.targetObj===ya&&pb.disconnect()})}},{key:"onWorldResize",value:function(){var K=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,ya=this.view,pb=$world.visibleBounds(),La=navigator.standalone&&W.touchInputDevice?25:0;ya.height=pb.height-La;ya.top=La+pb.top();K&&(ya.visible?ya.topLeft=pb.topLeft():ya.topRight=
pb.topLeft())}},{key:"toggle",value:function(){var K=cb(regeneratorRuntime.mark(function La(pb){var eb,jb,E;return regeneratorRuntime.wrap(function(Wb){for(;;)switch(Wb.prev=Wb.next){case 0:eb=this.view;jb=$world.visibleBounds();E=$world.get("lively version checker");this.onWorldResize(!1);if(!pb){Wb.next=12;break}$world.withTopBarDo(function(R){eb.opacity=0;$world.addMorph(eb,R.view)});eb.topRight=jb.topLeft();eb.withAnimationDo(function(){eb.opacity=1;eb.topLeft=jb.topLeft();E&&E.relayout()},{duration:300,
easing:W.easings.outCirc});this.attachToWorld($world);this.ui.sceneGraph.refresh();Wb.next=16;break;case 12:return this.detachFromWorld($world),Wb.next=15,eb.withAnimationDo(function(){eb.opacity=0;eb.topRight=jb.topLeft();E&&E.relayout()},{duration:300});case 15:eb.remove();case 16:case "end":return Wb.stop()}},La,this)}));return function(pb){return K.apply(this,arguments)}}()},{key:"resize",value:function(K,ya){this.view.width+=ya.state.dragDelta.x;this.ui.sceneGraph.refresh()}},{key:"filterMorphs",
value:function(K){this.ui.sceneGraph.filterMorphs(K)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MorphPanelModel"}},{key:"properties",get:function(){return{expose:{get:function(){return["toggle","onWorldResize","relayout","clearFocus","reset"]}},bindings:{get:function(){return[{target:"scene graph",signal:"selectedNode",handler:"showHaloFor"},{model:"search field",signal:"searchInput",handler:"filterMorphs"},{signal:"onDrag",handler:"resize",override:!0}]}}}}}],ia,{pathInPackage:function(){return"./studio/scene-graph.cp.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:645,end:4592})}(W.ViewModel));W.MorphPanelModel=db;W.MorphPanelModel=db;db=Lc("NewSceneGraphTree",function(T){var ia=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/scene-graph.cp.js"),ka=ia.hasOwnProperty("NewSceneGraphTree")&&"function"===typeof ia.NewSceneGraphTree?ia.NewSceneGraphTree:
ia.NewSceneGraphTree=function(K){if(!K||!K[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Nb(ka,T,[{key:"renderContainerFor",value:function(){var K=0<arguments.length&&void 0!==arguments[0]?arguments[0]:W.morph({name:"root"}),ya=W.part(W.MorphNode,{width:this.width,viewModel:{tree:this,target:K}});K._data?(ya._data=K._data,K._data.container=ya):ya._data={name:K.name,isCollapsed:!0,container:ya,children:[]};ya.refresh();
return ya}},{key:"clearSelection",value:function(){this.selectedNode=null}},{key:"onHoverOut",value:function(K){Nb._get(Object.getPrototypeOf(ka.prototype),"onHoverOut",this).call(this,K);this.highlightLineAtCursor(K,{background:W.Color.transparent,borderColor:"#B2EBF2",borderWidth:"0px",borderStyle:"solid"})}},{key:"highlightLineAtCursor",value:function(K,ya){K=this.textPositionFromPoint(K.positionIn(this));this.removeMarker("hovered node");K=this.lineRange(K.row,!0);K.start.column=0;this.textAndAttributesInRange(K).find(function(pb){return pb&&
pb.isMorph})&&this.addMarker({id:"hovered node",range:K,style:ya})}},{key:"onMouseMove",value:function(K){Nb._get(Object.getPrototypeOf(ka.prototype),"onMouseMove",this).call(this,K);this.highlightLineAtCursor(K,{background:W.Color.transparent,transform:"translateY(-6px)",borderColor:"#B2EBF2",borderWidth:"1px",borderStyle:"solid"})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"NewSceneGraphTree"}}],ia,{pathInPackage:function(){return"./studio/scene-graph.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4600,end:6321})}(W.SceneGraphTree));W.NewSceneGraphTree=db;W.NewSceneGraphTree=db;db=Lc("MorphNodeModel",function(T){var ia=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/scene-graph.cp.js"),ka=ia.hasOwnProperty("MorphNodeModel")&&"function"===typeof ia.MorphNodeModel?ia.MorphNodeModel:ia.MorphNodeModel=function(K){if(!K||!K[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Nb(ka,T,[{key:"onContextMenu",value:function(K){this.target.onContextMenu({targetMorph:this.target,stop:function(){}})}},{key:"toggleVisibility",value:function(){this.target.visible=!this.target.visible;this.refresh()}},{key:"showControls",value:function(){this.ui.visibilityIcon.visible=!0}},{key:"hideControls",value:function(){this.ui.visibilityIcon.visible=!this.target.visible}},{key:"startRenaming",value:function(){var K=this.ui,ya=K.nameInput;K.nameLabel.visible=!1;ya.visible=
!0;ya.focus()}},{key:"finishRenaming",value:function(){var K=this.ui,ya=K.nameInput;K.nameLabel.visible=!0;ya.visible=!1;this.target.name=ya.textString;this.refresh()}},{key:"refresh",value:function(){var K=cb(regeneratorRuntime.mark(function pb(){var La,eb,jb,E,Wb,R;return regeneratorRuntime.wrap(function(xb){for(;;)switch(xb.prev=xb.next){case 0:if(La=this.target){xb.next=3;break}return xb.abrupt("return");case 3:eb=this.ui,jb=eb.morphIcon,E=eb.layoutIndicator,Wb=eb.nameLabel,R=eb.visibilityIcon,
jb.value=this.getIcon(La),E.visible=!1,La.layout&&"TilingLayout"===La.layout.name()&&(E.visible=!0,E.rotation="column"===La.layout.axis?Math.PI/2:0),Wb.textString=La.name,R.value=[La.visible?"\ue8f4":"\ue8f5",{fontSize:16,textStyleClasses:["material-icons"]}];case 9:case "end":return xb.stop()}},pb,this)}));return function(){return K.apply(this,arguments)}}()},{key:"applyLayoutIfNeeded",value:function(){}},{key:"getIcon",value:function(K){return W.Icon.textAttribute({Morph:"square",Ellipse:"circle",
Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[W.getClassName(K)]||"codepen",{paddingTop:"0px",fontSize:this.tree.fontSize-2,opacity:1})}},{key:"highlightTerm",value:function(K){var ya=this.ui.nameLabel,pb=ya.textString.split(K);ya.textAndAttributes=1===pb.length?[pb[0]]:hb(W.arr.interpose(pb.map(function(La){return[La,{}]}),[K,{fontWeight:"900"}]).flat())}},{key:"showPreviewOn",value:function(K){if(K.isContainer)var ya=K.tree;
K.isTree&&(ya=K);ya&&ya.showDropPreviewFor&&ya.showDropPreviewFor(this.view)}},{key:"wantsToBeDroppedOn",value:function($super,ya){var pb=$super(ya);this.showPreviewOn(ya);if(![ya].concat(hb(ya.ownerChain())).includes(this.tree))this.onDragOutside();return pb}},{key:"onGrab",value:function(){var K=cb(regeneratorRuntime.mark(function eb(pb,La){var jb,E,Wb,R;return regeneratorRuntime.wrap(function(xb){for(;;)switch(xb.prev=xb.next){case 0:jb=this.view;E=this.tree;Wb=this.node;E._dropInProgress=!0;R=
this.target.globalPosition;pb(La);if(Wb){xb.next=6;break}return xb.abrupt("return");case 6:return E.collapse(Wb),E.treeData.parentNode(Wb).container.onChildRemoved(this),this._data=E.treeData.remove(Wb),Wb.container.target.remove(),E.update(!0),this._data.globalTargetPosition=R,xb.next=14,jb.whenRendered();case 14:if(E.fullContainsWorldPoint(jb.globalPosition))jb.leftCenter=W.pt(-20,0);else this.onDragOutside();this.tree._dropInProgress=!1;case 16:case "end":return xb.stop()}},eb,this)}));return function(pb,
La){return K.apply(this,arguments)}}()},{key:"onDragOutside",value:function(){this.queue||(this.queue=W.fun.createQueue("container-hover-queue",function(){var K=cb(regeneratorRuntime.mark(function eb(pb,La){var jb,E,Wb;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return jb=pb.target,E=jb.opacity,Wb=jb.scale,pb.target.opacity=0,pb.target.scale=.5,$world.halos().forEach(function(xb){return xb.remove()}),$world.firstHand.grab(pb.target),pb.target._data=pb._data,pb.remove(),
pb.target.position=W.pt(0,0),R.next=10,pb.target.animate({opacity:E,scale:Wb,duration:200});case 10:La();case 11:case "end":return R.stop()}},eb)}));return function(pb,La){return K.apply(this,arguments)}}()));this.queue.push(this.view)}},{key:"onChildAdded",value:function(K){var ya=this.node.children.indexOf(K.node||K._data)+1;ya=this.node.children[ya];K.target.remove();ya?(ya=this.target.submorphs.indexOf(ya.container.target),this.target.addMorphAt(K.target,ya)):this.target.addMorph(K.target);K._data.globalTargetPosition&&
(K.target.position=this.target.localize(K._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(K){}},{key:"insertAsChild",value:function(){var K=cb(regeneratorRuntime.mark(function La(pb){return regeneratorRuntime.wrap(function(eb){for(;;)switch(eb.prev=eb.next){case 0:return this.tree.treeData.add(pb._data,this.node,this.node.children[0]),this.tree.uncollapse(this.node),this.tree.treeData.remove(this.tree._previewNode),eb.next=5,this.tree.whenRendered();case 5:this.tree.update(!0),
this.onChildAdded(pb);case 7:case "end":return eb.stop()}},La,this)}));return function(pb){return K.apply(this,arguments)}}()},{key:"onBeingDroppedOn",value:function($super,ya,pb){var La=this,eb=this.view;this.tree._dropInProgress=!0;$super(ya,pb);ya=function(){eb.fill=W.Color.gray.withA(.5);eb.opacity=1;La.tree._dropInProgress=!1;La.tree.refresh()};pb.isTree?pb.insertAtPlaceholder(this.view).then(ya):pb.isContainer?pb.insertAsChild(this).then(ya):ya()}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"MorphNodeModel"}},{key:"properties",get:function(){return{target:{serialize:!1},isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var K=this,ya=this.tree.treeData;return ya&&ya.asList().find(function(pb){return pb.container===K.view})}},dragTriggerDistance:{defaultValue:15},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.ui.nameLabel.textString.slice(2,-1)===this.target.name&&this.connectionCount===(this.target.attributeConnections||
[]).length?!1:!0}},sideBar:{derived:!0,get:function(){return this.view.owner.owner}},expose:{get:function(){return"refresh highlightTerm target dragTriggerDistance isContainer onDragOutside tree insertAsChild onChildAdded onChildRemoved nameNeedsUpdate".split(" ")}},bindings:{get:function(){return[{signal:"onContextMenu",handler:"onContextMenu"},{signal:"onBeingDroppedOn",handler:"onBeingDroppedOn",override:!0},{signal:"wantsToBeDroppedOn",handler:"wantsToBeDroppedOn",override:!0},{signal:"onDoubleMouseDown",
handler:"startRenaming"},{signal:"onGrab",handler:"onGrab",override:!0},{signal:"onHoverIn",handler:"showControls"},{signal:"onHoverOut",handler:"hideControls"},{target:"name input",signal:"onBlur",handler:"finishRenaming"},{target:"visibility icon",signal:"onMouseDown",handler:"toggleVisibility"}]}}}}}],ia,{pathInPackage:function(){return"./studio/scene-graph.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:6329,end:14532})}(W.ViewModel));W.MorphNodeModel=db;W.MorphNodeModel=db;W.MorphNode=W.component["for"](function(){return W.component({name:"morph node",defaultViewModel:W.MorphNodeModel,fill:W.Color.rgba(255,255,255,0),borderRadius:5,layout:new W.TilingLayout({axisAlign:"center",orderByIndex:!0,padding:W.rect(10,0,0,0),resizePolicies:[["name label",{height:"fixed",width:"fill"}]],spacing:10,wrapSubmorphs:!1}),draggable:!0,grabbable:!0,
extent:W.pt(242.2,30.8),submorphs:[{type:W.Label,name:"morph icon",opacity:.4,fontSize:16,fill:W.Color.rgba(229,231,233,0),fontColor:W.Color.rgb(208,208,208),fontFamily:"Material Icons",reactsToPointer:!1,textAndAttributes:["\ue264",{fontSize:16,textStyleClasses:["material-icons"]}]},W.part(W.PropLabel,{name:"name label",reactsToPointer:!1,master:W.PropLabel,padding:W.rect(0),textAndAttributes:["some text morph",null]}),{type:W.Label,name:"layout indicator",rotation:1.5707963267948966,fill:W.Color.rgba(229,
231,233,0),fontColor:W.Color.rgb(208,208,208),fontFamily:"Material Icons",fontSize:16,nativeCursor:"pointer",textAndAttributes:["\ue8e9",{fontSize:16,textStyleClasses:["material-icons"]}]},{type:W.Label,name:"visibility icon",visible:!1,fill:W.Color.rgba(229,231,233,0),fontColor:W.Color.rgb(208,208,208),fontFamily:"Material Icons",fontSize:16,nativeCursor:"pointer",textAndAttributes:["\ue8f4",{fontSize:16,textStyleClasses:["material-icons"]}]}]})},{module:"lively.ide/studio/scene-graph.cp.js","export":"MorphNode",
range:{start:14567,end:16230}},W.MorphNode);W.MorphPanel=W.component["for"](function(){return W.component({defaultViewModel:W.MorphPanelModel,name:"morph panel",nativeCursor:"ew-resize",extent:W.pt(249.3,1E3),draggable:!0,layout:new W.TilingLayout({axis:"column",orderByIndex:!0,padding:W.rect(0,0,5,0),resizePolicies:[["panel bg",{height:"fill",width:"fill"}]],wrapSubmorphs:!1}),fill:W.Color.transparent,submorphs:[{name:"panel bg",clipMode:"hidden",layout:new W.TilingLayout({axis:"column",orderByIndex:!0,
padding:W.rect(0,60,0,-60),resizePolicies:[["search field",{height:"fixed",width:"fill"}],["scene graph",{height:"fill",width:"fill"}]],spacing:5,wrapSubmorphs:!1}),fill:W.Color.rgb(30,30,30).withA(.95),submorphs:[W.part(W.SearchField,{name:"search field",fontColor:W.Color.rgb(247,247,247),fontSize:13,extent:W.pt(238,24.9),borderWidth:0,fill:W.Color.rgb(152,152,152),borderRadius:0,submorphs:[{name:"placeholder",fontSize:14}]}),{type:W.NewSceneGraphTree,treeData:new W.InteractiveTreeData({}),name:"scene graph",
acceptsDrops:!0,selectionColor:W.Color.rgbHex("B2EBF2").withA(.25),fill:W.Color.rgba(255,255,255,0),clipMode:"hidden",lineHeight:2.5,fontColor:W.Color.white}]}]})},{module:"lively.ide/studio/scene-graph.cp.js","export":"MorphPanel",range:{start:16267,end:17774}},W.MorphPanel);db=Lc("MorphNode",W.MorphNode);ib=Lc("MorphPanel",W.MorphPanel);W.MorphNode=db;W.MorphPanel=ib}}});