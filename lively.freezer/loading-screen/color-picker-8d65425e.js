System.register(["./__root_module__-7d3cbdeb.js","./index-f2f18556.js"],function(Ka){var wb,Ab,gc,Kb,Zc,Kc,md,Fc,Bc,Nc,Uc,ce,Zd,pe,Mc,Kd,Jb,Dc,nd,Hc,wd,Qd,Eb,ic,jd,jc,kd,vb,db,ec,Mb,Hb,pc,Ma,Ib,pb,Ub,dc,vc,gd,Nb,Fb,sb,Ea,ua,V,ra,ja,Ca,va,cb,hc;return{setters:[function(gb){wb=gb.C;Ab=gb.bd;gc=gb.be;Kb=gb.bf;Zc=gb.bg;Kc=gb.bh;md=gb.bi;Fc=gb.b;Bc=gb.a8;Nc=gb.bj;Uc=gb.bk;ce=gb.bl;Zd=gb.M;pe=gb.K;Mc=gb.W;Kd=gb.S;Jb=gb.aC;Dc=gb.bm;nd=gb.bn;Hc=gb.c;wd=gb.d;Qd=gb.ac;Eb=gb.a;ic=gb.i;jd=gb.I;jc=gb.ag;
kd=gb.g;vb=gb.bo;db=gb.ab;ec=gb.ay;Mb=gb.bp;Hb=gb.m;pc=gb.af;Ma=gb.aa;Ib=gb.a3;pb=gb.p;Ub=gb.f;dc=gb.s;vc=gb.Y;gd=gb.$;Nb=gb.R;Fb=gb.bq;sb=gb.br;Ea=gb.bs;ua=gb.a9;V=gb.o;ra=gb.aq;ja=gb.r},function(gb){Ca=gb.p;va=gb.P;cb=gb.d;hc=gb.N}],execute:function(){var gb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js");gb.Color=wb;gb.Complementary=Ab;gb.Triadic=gc;gb.Tetradic=Kb;gb.Quadratic=Zc;gb.Analogous=Kc;gb.Neutral=md;gb.pt=Fc;gb.Point=Bc;gb.flatDesignColors=Nc;gb.materialDesignColors=
Uc;gb.webSafeColors=ce;gb.Morph=Zd;gb.Text=pe;gb.Ellipse=Mc;gb.Image=Kd;gb.DropDownSelector=Jb;gb.ModeSelector=Dc;gb.Slider=nd;gb.connect=Hc;gb.signal=wd;gb.num=Qd;gb.arr=Eb;gb.WHEEL_URL="/lively.ide/assets/color-wheel.png";gb.duration=200;(function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),qb=yb.hasOwnProperty("ColorPaletteField")&&"function"===typeof yb.ColorPaletteField?yb.ColorPaletteField:yb.ColorPaletteField=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"onHoverIn",value:function(){if(this.color){var Ia=$jscomp.makeIterator(this.color.isGradient?gb.Color.blue.toHSB():this.color.toHSB()),Q=Ia.next().value,za=Ia.next().value;Ia=Ia.next().value;this.borderColor=gb.Color.hsb(Q,1<za+.5?za-.5:za+.5,1<Ia+.5?Ia-.5:Ia+.5)}}},{key:"onHoverOut",value:function(){this.borderColor=gb.Color.transparent}},{key:"onMouseDown",value:function(){gb.signal(this,"updateColor",this.color)}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPaletteField"}},{key:"properties",get:function(){return{color:{defaultValue:gb.Color.blue},borderWidth:{defaultValue:2},borderColor:{after:["color"],initialize:function(){this.borderColor=this.color||gb.Color.transparent}},fill:{after:["color"],initialize:function(){this.fill=this.color||gb.Color.transparent}},styleClasses:{after:["color"],initialize:function(){this.styleClasses=this.color?["colorField"]:["vacantColorField"]}}}}}],
yb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:525,end:1539})})(gb.Morph);(function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),qb=yb.hasOwnProperty("ColorHarmonyField")&&"function"===typeof yb.ColorHarmonyField?yb.ColorHarmonyField:
yb.ColorHarmonyField=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"onMouseDown",value:function(){gb.signal(this,"updateColor",this.color)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorHarmonyField"}},{key:"properties",get:function(){return{extent:{defaultValue:gb.pt(80,60)},fill:{defaultValue:gb.Color.transparent},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/color harmony field"}}},
color:{set:function(Ia){var Q=$jscomp.makeIterator(this.submorphs),za=Q.next().value;Q=Q.next().value;var Ta=$jscomp.makeIterator(Ia?Ia.toHSB():[]),xb=Ta.next().value,Yb=Ta.next().value;Ta=Ta.next().value;this.setProperty("color",Ia);Ia&&za&&Q&&(za.fill=Ia,Q.textString=Ia.toHexString(),Q.fontColor=gb.Color.hsb(xb,1<Yb+.5?Yb-.5:Yb+.5,1<Ta+.5?Ta-.5:Ta+.5))}},submorphs:{after:["color"],initialize:function(){var Ia=$jscomp.makeIterator((this.color||gb.Color.transparent).toHSB()),Q=Ia.next().value,za=
Ia.next().value;Ia=Ia.next().value;this.submorphs=[new gb.Morph({fill:this.color,extent:gb.pt(80,50)}),new gb.Text({textString:Q.toFixed()+", "+za.toFixed(2)+", "+Ia.toFixed(2),fill:gb.Color.transparent,fontColor:gb.Color.gray.darker(),bottomLeft:gb.pt(0,50)})]}}}}}],yb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:1541,end:2933})})(gb.Morph);(function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),qb=yb.hasOwnProperty("HarmonyDisplay")&&"function"===typeof yb.HarmonyDisplay?yb.HarmonyDisplay:yb.HarmonyDisplay=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"update",value:function(Ia){var Q=$jscomp.makeIterator(Ia.pivotColor.toHSB()),za=Q.next().value,
Ta=Q.next().value;Q=Q.next().value;za=Ia.harmony.chord({hue:za,saturation:Ta,brightness:Q});za.length!=this.submorphs.length?this.submorphs=za.map(function(xb){xb=new gb.ColorHarmonyField({color:xb});gb.connect(xb,"updateColor",Ia,"color");return xb}):gb.arr.zip(this.submorphs,za).forEach(function(xb){var Yb=$jscomp.makeIterator(xb);xb=Yb.next().value;Yb=Yb.next().value;xb.color=Yb})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HarmonyDisplay"}}],yb,{pathInPackage:function(){return"styling/color-palette.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2935,end:3513})})(gb.Morph);(function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),qb=yb.hasOwnProperty("PivotColorControl")&&"function"===typeof yb.PivotColorControl?yb.PivotColorControl:yb.PivotColorControl=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"update",value:function(Ia){this.pivotColor=Ia.pivotColor}},{key:"onDrag",value:function(Ia){var Q=$jscomp.makeIterator(this.pivotColor.toHSB()),za=Q.next().value,Ta=Q.next().value;Q=Q.next().value;za=gb.num.toRadians(za);Ia=gb.Point.polar(50*Ta,za).addPt(Ia.state.dragDelta);za=gb.num.toDegrees(Ia.theta());za=0>za?za+360:za;Ta=Math.min(Ia.r()/50,1);this.pivotColor=gb.Color.hsb(za,Ta,Q)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"PivotColorControl"}},{key:"properties",get:function(){return{pivotColor:{defaultValue:gb.Color.blue},draggable:{defaultValue:!0}}}}],yb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3515,end:4149})})(gb.Ellipse);(function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),
qb=yb.hasOwnProperty("HarmonyVisualizer")&&"function"===typeof yb.HarmonyVisualizer?yb.HarmonyVisualizer:yb.HarmonyVisualizer=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"update",value:function(Ia){var Q=$jscomp.makeIterator(this.submorphs).next().value,za=this.get("pivot control"),Ta=$jscomp.makeIterator(Ia.pivotColor.toHSB()),xb=Ta.next().value,Yb=Ta.next().value;Ta=Ta.next().value;var Ac=
gb.num.toRadians(xb);xb=Ia.harmony.chord({hue:xb,saturation:Yb,brightness:Ta}).map(function(mc){var qd=$jscomp.makeIterator(mc.toHSB()),zd=qd.next().value;mc=qd.next().value;qd.next();qd=gb.num.toRadians(zd);return gb.Point.polar(50*mc,qd)});Q.fill=gb.Color.black.withA(1-Ta);za.update(Ia);Q.submorphs.length-1!=xb.length?Q.submorphs=[].concat($jscomp.arrayFromIterable(xb.map(function(mc){return new gb.Ellipse({center:mc,fill:gb.Color.transparent,draggable:!1,borderWidth:1,borderColor:gb.Color.black})})),
[za]):(gb.arr.zip(Q.submorphs,xb).forEach(function(mc){var qd=$jscomp.makeIterator(mc);mc=qd.next().value;if(qd=qd.next().value)mc.center=qd}),za.center=gb.Point.polar(50*Yb,Ac))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HarmonyVisualizer"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["harmonyVisualizer"]},submorphs:{initialize:function(){this.submorphs=[{type:"ellipse",name:"harmonyPoints",submorphs:[new gb.PivotColorControl({name:"pivot control"})]}]}}}}}],
yb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4151,end:5613})})(gb.Image);(function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),qb=yb.hasOwnProperty("HarmonyPalette")&&"function"===typeof yb.HarmonyPalette?yb.HarmonyPalette:yb.HarmonyPalette=
function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"update",value:function(Ia){this.updateInProgress||(this.updateInProgress=!0,this.pivotBrightness=Ia.pivotBrightness,this.harmony=Ia.harmony,this.get("harmonies").update(Ia),this.get("harmony visualizer").update(Ia),this.updateInProgress=!1)}},{key:"harmonyControl",value:function(){var Ia,Q,za=new gb.Morph({name:"harmonyControl",submorphs:[new gb.HarmonyVisualizer({name:"harmony visualizer"}),
Q=new gb.Slider({min:0,max:1,tooltip:"Adjust Brightness",width:100,value:this.pivotBrightness}),Ia=new gb.DropDownSelector({name:"harmonySelector",isHaloItem:!0,padding:4,selectedValue:this.harmony,getCurrentValue:function(){return this.selectedValue.name},values:{Complement:new gb.Complementary,Triadic:new gb.Triadic,Tetradic:new gb.Tetradic,Quadratic:new gb.Quadratic,Analogous:new gb.Analogous,Neutral:new gb.Neutral}})]});gb.connect(Q,"value",this,"pivotBrightness");gb.connect(Ia,"selectedValue",
this,"harmony");return za}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HarmonyPalette"}},{key:"properties",get:function(){return{harmony:{defaultValue:new gb.Complementary},pivotBrightness:{defaultValue:1},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/harmony palette"}}},submorphs:{after:["harmony"],initialize:function(){this.submorphs=[new gb.HarmonyDisplay({name:"harmonies"}),this.harmonyControl()]}}}}}],yb,{pathInPackage:function(){return"styling/color-palette.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:5615,end:7542})})(gb.Morph);var Oc=Ka("C",function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),qb=yb.hasOwnProperty("ColorPalette")&&"function"===typeof yb.ColorPalette?yb.ColorPalette:yb.ColorPalette=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"fadeIntoWorld",value:function(Ia){ic._get(Object.getPrototypeOf(qb.prototype),"fadeIntoWorld",this).call(this,Ia);this.initPosition=Ia;return this}},{key:"isHaloItem",value:function(){return!0}},{key:"onKeyDown",value:function(Ia){"Escape"==Ia.key&&this.close()}},{key:"close",value:function(Ia){Ia?this.fadeOut(Ia):this.remove();gb.signal(this,"close")}},{key:"paletteView",value:function(){return{name:"paletteView",
extent:gb.pt(400,253),submorphs:[this.solidColorPalette(),new gb.HarmonyPalette({name:"harmony palette",isLayoutable:!1,visible:!1,draggable:!1})]}}},{key:"selectSolidMode",value:function(){var Ia=this.get("solidColorPalette"),Q=this.get("paletteView");Ia.visible||(Q.submorphs.forEach(function(za){return za.animate({isLayoutable:!1,visible:!1,duration:200})}),Ia.animate({isLayoutable:!0,visible:!0,duration:200}))}},{key:"selectHarmonyMode",value:function(){var Ia=this.get("paletteView");this.get("harmony palette").visible||
(Ia.submorphs.forEach(function(Q){return Q.animate({isLayoutable:!1,visible:!1,duration:200})}),this.get("harmony palette").animate({isLayoutable:!0,visible:!0,duration:200}))}},{key:"fillTypeSelector",value:function(){var Ia=new gb.ModeSelector({reactsToPointer:!1,name:"fillTypeSelector",items:["Color Palette","Color Harmonies"],tooltips:{"Color Harmonies":this.getPaletteDescription("harmony")}});gb.connect(Ia,"Color Palette",this,"selectSolidMode");gb.connect(Ia,"Color Harmonies",this,"selectHarmonyMode");
return Ia}},{key:"solidColorPalette",value:function(){return{name:"solidColorPalette",master:{auto:"styleguide://SystemWidgets/solid color palette"},submorphs:[this.getCurrentPalette(),this.paletteConfig()]}}},{key:"getCurrentPalette",value:function(){var Ia=this.getColorsFor(this.colorPalette),Q=Ia.colors,za=Ia.mod;return this.cachedPalette[Ia.name]||this.getPalette(Q,za)}},{key:"getPalette",value:function(Ia,Q){var za=this,Ta=Math.max(Math.ceil(Ia.length/Q),15),xb=Ta*this.colorFieldWidth,Yb=Q*this.colorFieldWidth;
Ia=[].concat($jscomp.arrayFromIterable(Ia),$jscomp.arrayFromIterable(gb.arr.withN(Ta*Q-Ia.length,null)));return{extent:gb.pt(xb,Yb),name:"paletteContainer",submorphs:Ia.map(function(Ac){Ac=new gb.ColorPaletteField({color:Ac&&gb.Color.rgbHex(Ac),extent:gb.pt(za.colorFieldWidth,za.colorFieldWidth)});gb.connect(Ac,"updateColor",za,"color");return Ac})}}},{key:"switchPalette",value:function(Ia){var Q=Ia.name,za=Ia.colors;Ia=Ia.mod;var Ta=this.get("solidColorPalette"),xb=$jscomp.makeIterator(Ta.submorphs);
xb.next();xb=xb.next().value;this.cachedPalette[Q]=this.cachedPalette[Q]||this.getPalette(za,Ia,Q);Ta.submorphs=[this.cachedPalette[Q],xb]}},{key:"getPaletteDescription",value:function(Ia){return{harmony:"Color harmonies are particularly pleasing combinations\nof two or more colors derived from their relationship\non a color wheel. Also known as color chords, color\nharmonies are useful when exploring a possible color\npalette, or can be used as a standalone color scheme.\n",custom:"Your personal set of customly defined colors.",
materialDesign:"Material design is a visual language and design\nsystem developed by Google with an almost flat\nstyle and vibrant color schemes.",flatDesign:"Flat design or flat UI colors are quite popular\nin web design today where bold, bright colors\nare used to create clean, simple interfaces.",webSafe:"Web safe colors emerged during the early era of\nthe internet; a standardized palette of 216 colors\nthat displayed consistently across all major browsers."}[Ia]}},{key:"updatePaletteDescription",
value:function(){this.get("paletteSelector").tooltip=this.getPaletteDescription(this.colorPalette)}},{key:"getColorsFor",value:function(Ia){return Object.assign({name:Ia},{flatDesign:{colors:gb.flatDesignColors,mod:11},materialDesign:{colors:gb.materialDesignColors,mod:15},webSafe:{colors:gb.webSafeColors,mod:12}}[Ia])}},{key:"paletteConfig",value:function(){var Ia,Q={name:"paletteConfig",styleClasses:["paletteFormatter"],submorphs:[Ia=new gb.DropDownSelector({isHaloItem:!0,name:"paletteSelector",
selectedValue:"flatDesign",padding:4,tooltip:this.getPaletteDescription(this.colorPalette),values:{"Flat Design":"flatDesign","Material Design":"materialDesign","Web Safe":"webSafe"}})]};gb.connect(Ia,"selectedValue",this,"colorPalette");return Q}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPalette"}},{key:"properties",get:function(){return{extent:{defaultValue:gb.pt(200,300)},colorPalette:{after:["submorphs"],defaultValue:"flatDesign",set:function(Ia){this.setProperty("colorPalette",
Ia);this.switchPalette(this.getColorsFor(Ia));this.updatePaletteDescription()}},pivotColor:{after:["submorphs"],set:function(Ia){this.setProperty("pivotColor",Ia);this.get("harmony palette").update(this)}},color:{set:function(Ia){this.setProperty("color",Ia);this.get("harmony palette")&&this.get("harmony palette").update(this)}},pivotBrightness:{after:["submorphs","color"],get:function(){var Ia=$jscomp.makeIterator((this.pivotColor||this.color).toHSB());Ia.next();Ia.next();return Ia.next().value},
set:function(Ia){var Q=$jscomp.makeIterator((this.pivotColor||this.color).toHSB()),za=Q.next().value;Q=Q.next().value;this.pivotColor=gb.Color.hsb(za,Q,Ia)}},harmony:{after:["submorphs","pivotColor"],defaultValue:new gb.Complementary,set:function(Ia){this.setProperty("harmony",Ia);this.get("harmony palette").update(this)}},colorFieldWidth:{defaultValue:20},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/color palette"}}},submorphs:{after:["color"],initialize:function(){var Ia=
$jscomp.makeIterator((this.color.isGradient?gb.Color.blue:this.color).toHSB()),Q=Ia.next().value,za=Ia.next().value;Ia.next();this.cachedPalette={};this.submorphs=[this.fillTypeSelector(),this.paletteView()];this.pivotColor=gb.Color.hsb(Q,za,1);gb.connect(this.get("harmony palette"),"harmony",this,"harmony");gb.connect(this.get("pivot control"),"pivotColor",this,"pivotColor");gb.connect(this.get("harmony palette"),"pivotBrightness",this,"pivotBrightness");this.selectSolidMode();this.active=!0}}}}}],
yb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:7608,end:15438})}(gb.Morph));gb.ColorPalette=Oc;gb.ColorPalette=Oc;gb.ColorPalette=Oc;var Cb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js");Cb.Morph=Zd;Cb.Icon=jd;Cb.ProportionalLayout=jc;Cb.config=kd;
Cb.Text=pe;Cb.ShadowObject=vb;Cb.GridLayout=db;Cb.TilingLayout=ec;Cb.StyleSheet=Mb;Cb.morph=Hb;Cb.HorizontalLayout=pc;Cb.VerticalLayout=Ma;Cb.KeyHandler=Ib;Cb.connect=Hc;Cb.signal=wd;Cb.arr=Eb;Cb.promise=pb;Cb.fun=Ub;Cb.string=dc;Cb.obj=vc;Cb.Color=wb;Cb.rect=gd;Cb.Rectangle=Nb;Cb.pt=Fc;Cb.popovers=Ca;Cb.ModeSelector=Dc;Cb.DropDownSelector=Jb;Cb.SearchField=Fb;Cb.CheckBox=sb;Cb.Popover=va;Cb.SvgStyleHalo=cb;Cb.NumberWidget=hc;Cb.Icons=Ea;Cb.duration=200;var Gd=Ka("c",Cb.colorWidgets||{});Cb.colorWidgets=
Gd;Cb.colorWidgets=Gd;Cb.colorWidgets=Gd;(function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),qb=yb.hasOwnProperty("SelectableControl")&&"function"===typeof yb.SelectableControl?yb.SelectableControl:yb.SelectableControl=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"select",value:function(Ia){var Q=this,za,Ta,xb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Yb){if(1==
Yb.nextAddress)return Q.target?Yb.yield(Q.target.execCommand(Ia),2):Yb.return();za=Yb.yieldResult;Ta=Q.get("modeSelector");za.opacity=0;Q.lastLabel&&(xb=Ta.submorphs.indexOf(Q.lastLabel)<Ta.submorphs.indexOf(Ta.currentLabel),za.topLeft=Ta.bottomLeft.addXY(xb?20:-20,10));Q.lastLabel=Ta.currentLabel;Q.animate({submorphs:[Ta,za],duration:Cb.duration});za.animate({opacity:1,duration:Cb.duration});Yb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SelectableControl"}},{key:"properties",
get:function(){return{target:{type:"Morph"},selectableControls:{},selectedControl:{},fill:{defaultValue:Cb.Color.transparent},layout:{initialize:function(){this.layout=new Cb.VerticalLayout({spacing:10,autoResize:!0,layoutOrder:function(Ia){return this.container.submorphs.indexOf(Ia)}})}},submorphs:{after:["selectableControls","selectedControl","target"],initialize:function(){var Ia=new Cb.ModeSelector({name:"modeSelector",items:this.selectableControls,init:this.selectedControl});this.submorphs=[Ia];
Ia.width=100;Cb.connect(Ia,"switchLabel",this,"select");this.select(this.selectableControls[this.selectedControl])}}}}}],yb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:948,end:2579})})(Cb.Morph);(function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),
qb=yb.hasOwnProperty("ToggledControl")&&"function"===typeof yb.ToggledControl?yb.ToggledControl:yb.ToggledControl=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"toggle",value:function(Ia){var Q=$jscomp.makeIterator(this.submorphs).next().value,za=this.toggledControl(Ia);Q=[Q].concat($jscomp.arrayFromIterable(za?[za]:[]));Cb.signal(this,"update",Ia&&za.value);za&&(za.opacity=0);this.animate({submorphs:Q,
duration:Cb.duration});za&&za.animate({opacity:1,duration:Cb.duration})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ToggledControl"}},{key:"properties",get:function(){return{title:{defaultValue:"Toggled Property"},toggledControl:{},checked:{},clipMode:{defaultValue:"hidden"},fill:{defaultValue:Cb.Color.transparent},layout:{initialize:function(){this.layout=new Cb.VerticalLayout({spacing:5})}},submorphs:{initialize:function(){var Ia=new Cb.CheckBox({checked:this.checked});this.submorphs=
[{fill:Cb.Color.transparent,layout:new Cb.HorizontalLayout({autoResize:!1}),height:25,submorphs:[{type:"label",name:"property name",fontWeight:"bold",fontSize:14,autofit:!0,opacity:.8,padding:Cb.rect(0,2,3,0),textString:this.title,styleClasses:["controlLabel"]},Ia]}];this.toggle(this.checked);Cb.connect(Ia,"toggle",this,"toggle")}}}}}],yb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2581,end:4273})})(Cb.Morph);(function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),qb=yb.hasOwnProperty("StylePopover")&&"function"===typeof yb.StylePopover?yb.StylePopover:yb.StylePopover=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"setupConnections",value:function(){}},{key:"controls",
value:function(){return[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StylePopover"}},{key:"properties",get:function(){return{targetMorph:{initialize:function(){this.targetMorph=Cb.morph({layout:new Cb.HorizontalLayout({spacing:5,resizeContainer:!0}),fill:Cb.Color.transparent,submorphs:this.controls()});this.setupConnections()}}}}}],yb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4275,end:4825})})(Cb.Popover);var Ec=function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),qb=yb.hasOwnProperty("IconPopover")&&"function"===typeof yb.IconPopover?yb.IconPopover:yb.IconPopover=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"onDrop",value:function(Ia){var Q=this;Ia.hand.grabbedMorphs.find(function(za){return za===
Q.iconLabel})&&(Ia.hand.dropMorphsOn(this),this.iconLabel.remove())}},{key:"controls",value:function(){return[{draggable:!1,layout:new Cb.VerticalLayout({spacing:4}),fill:Cb.Color.transparent,submorphs:[new Cb.SearchField({name:"searchInput",width:200,placeHolder:"Search Icons"}),Cb.morph({textAndAttributes:this.iconAsTextAttributes(),name:"iconList",draggable:!0,type:"text",extent:Cb.pt(200,200),textStyleClasses:["fas","far"],clipMode:"auto",readOnly:!0})]}]}},{key:"setupConnections",value:function(){var Ia=
this.ui,Q=Ia.iconList;Cb.connect(Ia.searchInput,"searchInput",this,"filterIcons");Cb.connect(Q,"onMouseUp",this,"iconSelectClick");Cb.connect(Q,"onDragStart",this,"createIconLabel")}},{key:"relayout",value:function(){}},{key:"createIconLabel",value:function(Ia){Ia=this.ui.iconList.textPositionFromPoint(Ia.positionIn(this.ui.iconList));Ia=this.iconAtTextPos(Ia);this.iconLabel=Cb.Icon.makeLabel(Ia,{fontSize:this.ui.iconList.fontSize,name:Ia});this.iconLabel.openInHand()}},{key:"iconAsTextAttributes",
value:function(Ia){var Q=Object.keys(Cb.Icons);Ia&&(Q=Q.filter(Ia));return Cb.arr.flatmap(Q,function(za,Ta){return[Cb.Icons[za].code,{iconCode:Cb.Icons[za].code,iconName:za}," ",{fontFamily:"sans-serif",iconCode:!1,iconName:!1}]})}},{key:"filterIcons",value:function(){var Ia=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Q){if(1==Q.nextAddress)return Q.yield(Cb.promise.delay(250),2);Cb.fun.debounceNamed("filterIcons",200,function(){Ia.ui.iconList.textAndAttributes=Ia.iconAsTextAttributes(function(za){return Ia.ui.searchInput.matches(za.toLowerCase())})})();
Q.jumpToEnd()})}},{key:"iconSelectClick",value:function(Ia){Ia=this.ui.iconList.textPositionFromPoint(Ia.positionIn(this.ui.iconList));Ia=this.iconAtTextPos(Ia);this.setStatusMessage(Ia);Cb.signal(this,"select",Ia)}},{key:"iconAtTextPos",value:function(Ia){var Q=Ia.row;Ia=Ia.column;--Ia;for(var za=this.ui.iconList,Ta=za.textAndAttributesInRange({start:{row:Q,column:Math.max(0,Ia)},end:{row:Q,column:Ia+2}});Ta.length&&!Ta[1].iconName;)Ia++,Ta=Ta.slice(2);var xb={start:{row:Q,column:Ia},end:{row:Q,
column:Ia+1}};za.addTextAttribute({backgroundColor:za.selectionColor.darker().withA(.5)},xb);Cb.promise.delay(1E3).then(function(){return za.addTextAttribute({backgroundColor:Cb.Color.transparent},xb)});return Ta.length?Ta[1].iconName:null}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconPopover"}},{key:"properties",get:function(){return{isEpiMorph:{get:function(){return!1}},popoverColor:{defaultValue:Cb.Color.gray.lighter()},ui:{get:function(){return{searchInput:this.get("searchInput"),
iconList:this.get("iconList")}}}}}}],yb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4834,end:8444})}(Cb.StylePopover);Cb.IconPopover=Ec;Cb.IconPopover=Ec;Cb.IconPopover=Ec;Ec=function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),qb=yb.hasOwnProperty("LayoutPopover")&&
"function"===typeof yb.LayoutPopover?yb.LayoutPopover:yb.LayoutPopover=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"getLayoutObjects",value:function(){return[null,new Cb.HorizontalLayout({autoResize:!1}),new Cb.VerticalLayout({autoResize:!1}),new Cb.TilingLayout,new Cb.ProportionalLayout,new Cb.GridLayout({grid:[[null],[null],[null]]})]}},{key:"close",value:function(){ic._get(Object.getPrototypeOf(qb.prototype),
"close",this).call(this);this.clearLayoutHalo()}},{key:"controls",value:function(){this.showLayoutHaloFor(this.container);return[{fill:Cb.Color.transparent,layout:new Cb.VerticalLayout({spacing:5,layoutOrder:function(Ia){return this.container.submorphs.indexOf(Ia)}}),submorphs:[this.layoutPicker(),this.layoutControls()]}]}},{key:"updateControls",value:function(){this.get("Layout Type").relayout();this.getSubmorphNamed("controlContainer").animate(this.layoutHalo?{isLayoutable:!0,submorphs:this.layoutHalo.optionControls(this),
duration:300}:{isLayoutable:!1,extent:Cb.pt(0,0),submorphs:[],duration:300})}},{key:"showLayoutHaloFor",value:function(Ia){this.clearLayoutHalo();Ia&&Ia.layout&&(this.layoutHalo=(Ia.world()||Ia.env.world).showLayoutHaloFor(Ia))}},{key:"clearLayoutHalo",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null)}},{key:"getCurrentLayoutName",value:function(){return this.getLayoutName(this.container.layout)}},{key:"getLayoutName",value:function(Ia){return Ia?Ia.name()+" Layout":
"No Layout"}},{key:"update",value:function(){}},{key:"applyLayout",value:function(Ia){this.container.animate({layout:Ia});this.showLayoutHaloFor(this.container);this.updateControls(this.controls());Cb.signal(this,"layoutChanged",this.container.layout)}},{key:"layoutPicker",value:function(){var Ia=this,Q=this.getLayoutObjects().map(function(za){var Ta={};return Ta[Ia.getLayoutName(za)]=za,Ta});Q=this.get("Layout Type")||new Cb.DropDownSelector({name:"Layout Type",borderRadius:2,padding:3,getCurrentValue:function(){return Ia.getCurrentLayoutName()},
selectedValue:this.container.layout,values:Cb.obj.merge(Q)});Cb.connect(Q,"selectedValue",this,"applyLayout");return Q}},{key:"layoutControls",value:function(){return{name:"controlContainer",fill:Cb.Color.transparent,layout:new Cb.VerticalLayout,isLayoutable:!!this.layoutHalo,submorphs:this.layoutHalo?this.layoutHalo.optionControls(this):[]}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutPopover"}},{key:"properties",get:function(){return{container:{},popoverColor:{defaultValue:Cb.Color.gray.lighter()}}}}],
yb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:8453,end:11240})}(Cb.StylePopover);Cb.LayoutPopover=Ec;Cb.LayoutPopover=Ec;Cb.LayoutPopover=Ec;Ec=function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),qb=yb.hasOwnProperty("FillPopover")&&
"function"===typeof yb.FillPopover?yb.FillPopover:yb.FillPopover=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"openHandle",value:function(Ia){Ia.openInWorld();this.openHandles.push(Ia)}},{key:"close",value:function(){ic._get(Object.getPrototypeOf(qb.prototype),"close",this).call(this);this.openHandles.forEach(function(Ia){return Ia.remove()})}},{key:"setupConnections",value:function(){var Ia=
this.ui,Q=Ia.fillSelector,za=Ia.colorField;Ia=Ia.gradientEditor;Q&&Cb.connect(this,"fillValue",Q,"value");Ia&&(Cb.connect(Ia,"gradientValue",this,"fillValue"),Cb.connect(Ia,"openHandle",this,"openHandle"));za&&(Cb.connect(this,"close",za,"remove"),Cb.connect(za,"update",this,"fillValue"),Cb.connect(this,"onMouseDown",za,"removeWidgets"))}},{key:"commands",get:function(){var Ia=this;return ic._get(Object.getPrototypeOf(qb.prototype),"commands",this).concat([{name:"switch to fill",exec:function(){var Q=
new Cb.colorWidgets.ColorPickerField({name:"colorField",colorValue:Ia.fillValue.isGradient?Cb.Color.blue:Ia.fillValue});Q.whenRendered().then(function(){Ia.setupConnections()});return Q}},{name:"switch to gradient",exec:function(){var Q=new Cb.colorWidgets.GradientEditor({name:"gradient editor",gradientValue:Ia.fillValue});Q.whenRendered().then(function(){Ia.setupConnections();Ia.handleMorph&&Q.showGradientHandlesOn(Ia.handleMorph);Q.update()});return Q}}])}},{key:"controls",value:function(){var Ia=
this;if(!this.gradientEnabled){var Q=new Cb.colorWidgets.ColorPickerField({name:"colorField",colorValue:this.fillValue});Q.whenRendered().then(function(){Q.update(Ia.fillValue)});return[{fill:Cb.Color.transparent,layout:new Cb.VerticalLayout({spacing:0}),submorphs:[Q]}]}return[new Cb.SelectableControl({name:"fillSelector",target:this,selectedControl:this.fillValue&&this.fillValue.isGradient?"Gradient":"Fill",selectableControls:{Fill:"switch to fill",Gradient:"switch to gradient"}})]}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"FillPopover"}},{key:"properties",get:function(){return{gradientEnabled:{defaultValue:!0},fillValue:{defaultValue:Cb.Color.blue},popoverColor:{defaultValue:Cb.Color.gray.lighter()},handleMorph:{},openHandles:{defaultValue:[]},ui:{get:function(){return{colorField:this.get("colorField"),fillSelector:this.get("fillSelector"),gradientEditor:this.get("gradient editor")}}}}}}],yb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:11249,end:14234})}(Cb.StylePopover);Cb.FillPopover=Ec;Cb.FillPopover=Ec;Cb.FillPopover=Ec;var oc=Ka("S",function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),qb=yb.hasOwnProperty("ShadowPopover")&&"function"===typeof yb.ShadowPopover?yb.ShadowPopover:yb.ShadowPopover=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"controls",value:function(){var Ia=this.shadowValue?this.shadowValue.inset?"Inset Shadow":"Drop Shadow":"No Shadow",Q=[{layout:new Cb.VerticalLayout({resizeContainer:!0,spacing:5}),fill:Cb.Color.transparent,name:"control container",submorphs:[Ia=new Cb.DropDownSelector({name:"shadow type",borderRadius:2,padding:3,selectedValue:Ia,values:["No Shadow","Drop Shadow","Inset Shadow"]})].concat(this.shadowValue?
this.shadowControls():[])}];Cb.connect(Ia,"selectedValue",this,"changeShadowType");return Q}},{key:"shadowControls",value:function(){var Ia=this.shadowValue,Q=new Cb.NumberWidget({min:0,autofit:!1,name:"distanceSlider",number:Ia.distance,unit:"px"}),za=new Cb.NumberWidget({name:"angleSlider",min:0,max:360,number:Ia.rotation,autofit:!1}),Ta=new Cb.NumberWidget({name:"spreadSlider",min:0,number:Ia.spread,autofit:!1}),xb=new Cb.NumberWidget({name:"blurSlider",min:0,number:Ia.blur,autofit:!1});Ia=new Cb.colorWidgets.ColorPickerField({name:"colorPicker",
colorValue:Ia.color});Cb.connect(Ia,"colorValue",this,"updateShadow",{converter:function(Yb){return{color:Yb}}});Cb.connect(this,"onMouseDown",Ia,"removeWidgets");Cb.connect(this,"close",Ia,"remove");Cb.connect(Ta,"update",this,"updateShadow",{converter:function(Yb){return{spread:Yb}}});Cb.connect(Q,"update",this,"updateShadow",{converter:function(Yb){return{distance:Yb}}});Cb.connect(xb,"update",this,"updateShadow",{converter:function(Yb){return{blur:Yb}}});Cb.connect(za,"update",this,"updateShadow",
{converter:function(Yb){return{rotation:Yb}}});return new Cb.Morph({layout:new Cb.GridLayout({autoAssign:!1,fitToCell:!1,columns:[0,{paddingLeft:1}],rows:Cb.arr.flatten(Cb.arr.range(0,3).map(function(Yb){return[Yb,{paddingBottom:5}]}),1),grid:[["spreadLabel",null,"spreadSlider"],["distanceLabel",null,"distanceSlider"],["blurLabel",null,"blurSlider"],["angleLabel",null,"angleSlider"],["colorLabel",null,"colorPicker"]]}),width:120,height:145,fill:Cb.Color.transparent,submorphs:Cb.arr.flatten([["distance",
Q],["spread",Ta],["blur",xb],["angle",za],["color",Ia]].map(function(Yb){var Ac=$jscomp.makeIterator(Yb);Yb=Ac.next().value;Ac=Ac.next().value;return[{type:"label",styleClasses:["controlName"],value:Cb.string.capitalize(Yb)+":",name:Yb+"Label"},Ac]}))})}},{key:"changeShadowType",value:function(Ia){"No Shadow"==Ia?this.toggleShadow(!1):"Inset Shadow"==Ia?(this.toggleShadow(!0),this.shadowValue.inset=!0):(this.toggleShadow(!0),this.shadowValue.inset=!1);this.get("control container").animate({submorphs:[this.get("shadow type")].concat(this.shadowValue?
this.shadowControls():[]),duration:300})}},{key:"updateShadow",value:function(Ia){var Q=this.shadowValue;Ia=Object.assign({fast:Q.fast,color:Q.color,spread:Q.spread,blur:Q.blur,distance:Q.distance,rotation:Q.rotation,inset:Q.inset},Ia);this.shadowValue=new Cb.ShadowObject(Ia)}},{key:"toggleShadow",value:function(Ia){this.shadowValue&&(this.cachedShadow=this.shadowValue);this.shadowValue=Ia&&this.cachedShadow}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowPopover"}},{key:"properties",
get:function(){return{shadowValue:{},cachedShadow:{defaultValue:new Cb.ShadowObject({fast:!0})},popoverColor:{defaultValue:Cb.Color.gray.lighter()}}}}],yb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:14243,end:18677})}(Cb.StylePopover));Cb.ShadowPopover=oc;Cb.ShadowPopover=
oc;Cb.ShadowPopover=oc;Cb.milimeter="https://upload.wikimedia.org/wikipedia/commons/c/c8/Millimeterpapier_10_x_10_cm.svg";oc=function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),qb=yb.hasOwnProperty("PointPopover")&&"function"===typeof yb.PointPopover?yb.PointPopover:yb.PointPopover=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"refineResolution",value:function(Ia){this.resolution=
.25+this.get("scroller").scroll.y/160;this.relayout()}},{key:"adjustPoint",value:function(Ia){this.pointValue=this.pointValue.addPt(Ia.state.dragDelta.scaleBy(1/this.resolution)).roundTo(1);this.relayout()}},{key:"relayout",value:function(){ic._get(Object.getPrototypeOf(qb.prototype),"relayout",this).call(this);var Ia=this.getSubmorphNamed("mesh"),Q=this.getSubmorphNamed("point value view");Ia.origin=Ia.innerBounds().center().addXY(4,1);Ia.position=this.get("body").innerBounds().center();Ia.scale=
this.resolution;this.getSubmorphNamed("resolution view").value="Resolution: "+this.resolution.toFixed(2)+"x";Q.value=Cb.obj.safeToString(this.pointValue);Q.position=this.getSubmorphNamed("knob").bottomRight}},{key:Symbol.for("lively-instance-initialize"),value:function(Ia){var Q=this;ic._get(Object.getPrototypeOf(qb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Ia);this.whenRendered().then(function(){return Q.relayout()})}},{key:"calibrate",value:function(){var Ia=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Q){if(1==
Q.nextAddress)return Ia.get("knob").animate({center:Ia.innerBounds().center(),duration:200}),Q.yield(Ia.getSubmorphNamed("point value view").animate({opacity:0,duration:200}),2);Ia.relayout();Q.jumpToEnd()})}},{key:"showPointValue",value:function(){this.getSubmorphNamed("point value view").animate({opacity:1,duration:200})}},{key:"controls",value:function(){this.extent=Cb.pt(200,200);var Ia,Q,za=[Cb.morph({extent:Cb.pt(200,200),clipMode:"hidden",fill:Cb.Color.transparent,submorphs:[{type:"image",
name:"mesh",fill:Cb.Color.transparent,opacity:.5,imageUrl:Cb.milimeter,autoResize:!0},{extent:Cb.pt(200,200),draggable:!1,dropShadow:{inset:!0,spread:5,color:Cb.Color.gray},fill:Cb.Color.transparent},Ia=Cb.morph({name:"scroller",extent:Cb.pt(200,200),clipMode:"scroll",draggable:!1,opacity:.01,submorphs:[{height:625.6,width:10}]}),Q=Cb.morph({name:"knob",type:"ellipse",nativeCursor:"-webkit-grab",fill:Cb.Color.red,borderColor:Cb.Color.black,borderWidth:1,center:Cb.pt(100,100),draggable:!0}),{type:"label",
name:"point value view",padding:4,opacity:0,styleClasses:["Tooltip"]},{position:Cb.pt(10,10),type:"label",name:"resolution view",padding:4,styleClasses:["Tooltip"]}]})];Ia.scroll=Cb.pt(0,120);Cb.connect(Q,"onDragStart",this,"showPointValue");Cb.connect(Q,"onDrag",this,"adjustPoint");Cb.connect(Q,"onDragEnd",this,"calibrate");Cb.connect(this,"extent",this,"relayout");Cb.connect(Ia,"onScroll",this,"refineResolution");return za}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointPopover"}},
{key:"properties",get:function(){return{pointValue:{defaultValue:Cb.pt(0,0)},resolution:{defaultValue:1}}}}],yb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:18792,end:21996})}(Cb.StylePopover);Cb.PointPopover=oc;Cb.PointPopover=oc;Cb.PointPopover=oc;oc=function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),
qb=yb.hasOwnProperty("RectanglePopover")&&"function"===typeof yb.RectanglePopover?yb.RectanglePopover:yb.RectanglePopover=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"controls",value:function(){var Ia=this;return[{fill:Cb.Color.transparent,extent:Cb.pt(120,120),layout:new Cb.GridLayout({grid:[["top","top scrubber"],["right","right scrubber"],["left","left scrubber"],["bottom","bottom scrubber"]],
columns:[0,{paddingLeft:4},1,{paddingRight:4,fixed:!0,width:60}],rows:Cb.arr.flatten(Cb.arr.range(0,3).map(function(Q){return[Q,{paddingTop:0==Q?4:2,paddingBottom:3==Q?4:2}]}))}),submorphs:Cb.arr.flatten(["top","right","bottom","left"].map(function(Q){var za=new Cb.NumberWidget({master:{auto:"styleguide://SystemWidgets/number field/light"},name:Q+" scrubber",autofit:!1,number:Ia.rectangle.partNamed(Q)});Cb.connect(za,"update",Ia,"rectangle",{updater:function(Ta,xb){var Yb=this.targetObj.rectangle,
Ac={};xb=(Ac.left=Yb.left(),Ac.top=Yb.top(),Ac.right=Yb.right(),Ac.bottom=Yb.bottom(),Ac[Q]=xb,Ac);Ta(Cb.Rectangle.inset(xb.left,xb.top,xb.right,xb.bottom))},varMapping:{side:Q,Rectangle:Cb.Rectangle}});return[{type:"label",styleClasses:["controlName"],name:Q,value:Q,padding:3},za]}))}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RectanglePopover"}},{key:"properties",get:function(){return{popoverColor:{defaultValue:Cb.Color.gray.lighter()},rectangle:{defaultValue:Cb.rect(0)}}}}],
yb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22005,end:23989})}(Cb.StylePopover);Cb.RectanglePopover=oc;Cb.RectanglePopover=oc;Cb.RectanglePopover=oc;oc=function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),qb=yb.hasOwnProperty("TextPopover")&&
"function"===typeof yb.TextPopover?yb.TextPopover:yb.TextPopover=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"controls",value:function(){var Ia=new Cb.Text(Object.assign({name:"editor",extent:Cb.pt(300,200),textString:this.text,lineWrapping:"by-chars"},Cb.config.codeEditor.defaultStyle));return[{layout:new Cb.HorizontalLayout,fill:Cb.Color.transparent,borderColor:Cb.Color.gray,borderWidth:1,
borderRadius:4,clipMode:"hidden",submorphs:[Ia]}]}},{key:"commands",get:function(){return ic._get(Object.getPrototypeOf(qb.prototype),"commands",this).concat([{name:"save string",exec:function(Ia){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Q){Ia.text=Ia.get("editor").textString;Cb.signal(Ia,"save",Ia.text);Ia.setStatusMessage("String saved!",Cb.Color.green);Q.jumpToEnd()})}}])}},{key:"keybindings",get:function(){return ic._get(Object.getPrototypeOf(qb.prototype),"keybindings",this).concat([{keys:{mac:"Command-S",
win:"Ctrl-S"},command:"save string"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextPopover"}},{key:"properties",get:function(){return{text:{defaultValue:"Enter some text!"}}}}],yb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23998,end:25073})}(Cb.StylePopover);
Cb.TextPopover=oc;Cb.TextPopover=oc;Cb.TextPopover=oc;Object.assign(Cb.popovers,{FillPopover:Cb.FillPopover,IconPopover:Cb.IconPopover,RectanglePopover:Cb.RectanglePopover,ShadowPopover:Cb.ShadowPopover,PointPopover:Cb.PointPopover,LayoutPopover:Cb.LayoutPopover});var rb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js");rb.Morph=Zd;rb.morph=Hb;rb.StyleSheet=Mb;rb.Text=pe;rb.Icon=jd;rb.VerticalLayout=Ma;rb.GridLayout=db;rb.HorizontalLayout=pc;rb.pt=Fc;rb.Rectangle=Nb;rb.Color=
wb;rb.LinearGradient=ua;rb.rect=gd;rb.signal=wd;rb.once=V;rb.connect=Hc;rb.obj=vc;rb.num=Qd;rb.Window=ra;rb.ColorPalette=Oc;rb.FillPopover=Ec;rb.colorWidgets=Gd;rb.Slider=nd;rb.Popover=va;rb.resource=ja;rb.WHEEL_URL="/lively.ide/assets/color-wheel.png";Oc=function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),qb=yb.hasOwnProperty("ColorPickerField")&&"function"===typeof yb.ColorPickerField?yb.ColorPickerField:yb.ColorPickerField=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"spec",value:function(){return rb.obj.dissoc(ic._get(Object.getPrototypeOf(qb.prototype),"spec",this).call(this),["submorphs"])}},{key:"onKeyDown",value:function(Ia){"Escape"==Ia.key&&(this.picker&&this.picker.remove(),this.colorValue.isGradient?this.fillWidget.remove():this.palette.remove())}},{key:"onHoverIn",value:function(){this.get("dropDownIndicator").animate({opacity:1,duration:300})}},{key:"onHoverOut",
value:function(){this.get("dropDownIndicator").animate({opacity:0,duration:300})}},{key:"update",value:function(Ia){this._updating=!0;var Q=this.submorphs[1];this.colorValue=Ia;this.get("topLeft").fill=Ia;this.get("bottomRight").fill=Ia.isGradient?rb.Color.transparent:Ia.withA(1);Q.visible=Q.isLayoutable=!this.gradientEnabled;this.gradientEnabled?this.get("bottomRight").width=this.get("topLeft").width=this.submorphs[0].width=this.width:this.get("bottomRight").width=this.get("topLeft").width=Math.max(1,
this.width-Q.width);this.get("bottomRight").left=0;this.get("dropDownIndicator").right=this.get("paletteButton").width-5;this._updating=!1}},{key:"openPicker",value:function(Ia){var Q=this,za,Ta;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xb){if(1==xb.nextAddress)return(za=Q.picker)?xb.jumpTo(2):xb.yield(rb.resource("part://SystemWidgets/new color picker").read(),3);2!=xb.nextAddress&&(za=xb.yieldResult);Ta=za;Ta.solidOnly=!Q.gradientEnabled;Ta.hasFixedPosition=!0;Ta.focusOnMorph(Q.context,
Q.colorValue);Ta.toggleHalos(!1);Ta.position=rb.pt(0,-Ta.height/2);rb.connect(Ta,"value",Q,"update");Q.picker=Ta.openInWorld();Q.picker.topLeft=Q.globalBounds().bottomCenter();Q.picker.topLeft=Q.world().visibleBounds().translateForInclusion(Q.picker.globalBounds()).topLeft();xb.jumpToEnd()})}},{key:"removePicker",value:function(){this.picker&&this.picker.remove()}},{key:"openPalette",value:function(Ia){var Q=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(za){Q.openPicker(Ia);za.jumpToEnd()})}},
{key:"removeWidgets",value:function(){this.removePicker()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPickerField"}},{key:"properties",get:function(){return{gradientEnabled:{defaultValue:!1,after:["colorValue"],set:function(Ia){this.setProperty("gradientEnabled",Ia);this.update(this.colorValue)}},fillWidget:{serialize:!1,get:function(){return this._fillWidget=new rb.FillPopover({fillValue:this.colorValue})}},testProp:{get:function(){return[42]}},palette:{serialize:!1,get:function(){return this._palette||
(this._palette=new rb.Popover({position:rb.pt(0,0),name:"Color Palette",targetMorph:new rb.ColorPalette({color:this.colorValue})}))}},colorValue:{after:["submorphs"],set:function(Ia){Ia&&(Ia.isColor||Ia.isGradient)||(Ia=rb.Color.blue);if(!this._updating)return this.update(Ia);this.setProperty("colorValue",Ia)},get:function(){return this.getProperty("colorValue")||rb.Color.white}},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/color field"}}},submorphs:{initialize:function(){this.innerBounds().topRight();
this.innerBounds().bottomLeft();var Ia=rb.pt(40,25);this.submorphs=[{extent:Ia,clipMode:"hidden",name:"paletteButton",submorphs:[{name:"topLeft",extent:Ia},{name:"bottomRight",type:"polygon",extent:Ia,origin:rb.pt(0,0),vertices:[rb.pt(0,0),Ia.withX(0),Ia]},rb.Icon.makeLabel("chevron-down",{opacity:0,name:"dropDownIndicator",center:rb.pt(30,12.5)})]},{fill:rb.Color.transparent,extent:rb.pt(25,25),onHoverIn:function(){this.fill=rb.Color.black.withA(.2)},onHoverOut:function(){this.fill=rb.Color.transparent},
submorphs:[{name:"pickerButton",type:"image",autoResize:!1,imageUrl:rb.WHEEL_URL}]}];rb.connect(this.getSubmorphNamed("pickerButton"),"onMouseDown",this,"openPicker");rb.connect(this.getSubmorphNamed("paletteButton"),"onMouseDown",this,"openPalette");rb.connect(this,"remove",this,"removeWidgets");this.colorValue&&this.update(this.colorValue)}}}}}],yb,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:689,end:5910})}(rb.Morph);rb.ColorPickerField=Oc;rb.ColorPickerField=Oc;rb.ColorPickerField=Oc;rb.colorWidgets.ColorPickerField=rb.ColorPickerField;(function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),qb=yb.hasOwnProperty("FieldPicker")&&"function"===typeof yb.FieldPicker?yb.FieldPicker:yb.FieldPicker=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ic(qb,Md,[{key:"confirm",value:function(){rb.signal(this,"shadeChanged",[this.brightness,this.saturation])}},{key:"update",value:function(Ia){var Q=$jscomp.makeIterator(Ia.color.toHSB());Ia=Q.next().value;var za=Q.next().value;Q=Q.next().value;this.getSubmorphNamed("hue").fill=rb.Color.hsb(Ia,1,1);this.brightness=Q;this.saturation=za;this.refresh()}},{key:"refresh",value:function(){this.get("picker").center=this.pickerPosition}},{key:"onMouseDown",value:function(Ia){this.pickerPosition=
Ia.positionIn(this);this.confirm()}},{key:"onDrag",value:function(Ia){this.pickerPosition=Ia.positionIn(this);this.confirm()}},{key:"relayout",value:function(){var Ia=this.innerBounds();this.getSubmorphNamed("hue").setBounds(Ia);this.getSubmorphNamed("shade").setBounds(Ia);this.getSubmorphNamed("light").setBounds(Ia)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FieldPicker"}},{key:"properties",get:function(){return{fill:{defaultValue:rb.Color.transparent},saturation:{defaultValue:0},
brightness:{defaultValue:0},draggable:{defaultValue:!0},pickerPosition:{derived:!0,after:["submorphs","brightness","saturation"],get:function(){var Ia=this.saturation,Q=this.brightness;return void 0===Ia||void 0===Q?rb.pt(0,0):rb.pt(this.getSubmorphNamed("hue").width*Ia,this.getSubmorphNamed("hue").height*(1-Q))},set:function(Ia){var Q=Ia.x;Ia=Ia.y;var za=this.getSubmorphNamed("hue"),Ta=za.height;this.saturation=rb.num.clamp(Q/za.width,0,1);this.brightness=rb.num.clamp(1-Ia/Ta,0,1);this.refresh()}},
submorphs:{initialize:function(){this.submorphs=[{borderRadius:3,name:"hue",reactsToPointer:!1},{borderRadius:3,name:"shade",reactsToPointer:!1,fill:new rb.LinearGradient({stops:[{color:rb.Color.white,offset:0},{color:rb.Color.transparent,offset:1}],vector:"eastwest"})},{borderRadius:3,name:"light",reactsToPointer:!1,fill:new rb.LinearGradient({stops:[{color:rb.Color.black,offset:0},{color:rb.Color.transparent,offset:1}],vector:"southnorth"})},{name:"picker",type:"ellipse",reactsToPointer:!1,fill:rb.Color.transparent,
borderColor:rb.Color.black,borderWidth:3,extent:rb.pt(16,16),submorphs:[{type:"ellipse",fill:rb.Color.transparent,borderColor:rb.Color.white,reactsToPointer:!1,borderWidth:3,center:rb.pt(8,8),extent:rb.pt(12,12)}]}];rb.connect(this,"extent",this,"relayout")}}}}}],yb,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:5964,end:9331})})(rb.Morph);(function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),qb=yb.hasOwnProperty("ColorPropertyView")&&"function"===typeof yb.ColorPropertyView?yb.ColorPropertyView:yb.ColorPropertyView=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"onFocus",value:function(){this.get("keyLabel").styleClasses=["key"].concat($jscomp.arrayFromIterable(this.readOnly?
[]:["large","active"]));this.styleClasses=[].concat($jscomp.arrayFromIterable(this.readOnly?[]:["editable","active"]),["value"]);this.selection.cursorBlinkStart()}},{key:"onBlur",value:function(){this.get("keyLabel").styleClasses=[!this.readOnly&&"large","key"];this.styleClasses=[!this.readOnly&&"editable","value"];this.selection.uninstall()}},{key:"onKeyDown",value:function(Ia){"Enter"!=Ia.keyCombo||this.readOnly?ic._get(Object.getPrototypeOf(qb.prototype),"onKeyDown",this).call(this,Ia):(this.owner.focus(),
Ia.stop(),rb.signal(this,"updateValue",this.value))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPropertyView"}},{key:"properties",get:function(){return{update:{},value:{derived:[!0],set:function(Ia){this.textString=rb.obj.safeToString(Ia)},get:function(){return this.textString}},styleClasses:{after:["readOnly"],initialize:function(){this.styleClasses=[!this.readOnly&&"editable","value"]}},selectionColor:{defaultValue:rb.Color.gray.darker()}}}}],yb,{pathInPackage:function(){return"styling/color-picker.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:9340,end:10510})})(rb.Text);(function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),qb=yb.hasOwnProperty("HuePicker")&&"function"===typeof yb.HuePicker?yb.HuePicker:yb.HuePicker=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ic(qb,Md,[{key:"confirm",value:function(){rb.signal(this,"hueChanged",this.hue)}},{key:"onMouseDown",value:function(Ia){var Q=this.get("slider").width;this.sliderPosition=rb.pt(0,Ia.positionIn(this).y-Q/2);this.confirm()}},{key:"onDrag",value:function(Ia){var Q=this.get("slider").width;this.sliderPosition=rb.pt(0,Ia.positionIn(this).y-Q/2);this.confirm()}},{key:"update",value:function(Ia){this.hue=Ia.hsb[0];this.refresh()}},{key:"refresh",value:function(){this.get("slider").center=
this.sliderPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HuePicker"}},{key:"properties",get:function(){return{fill:{defaultValue:new rb.LinearGradient({stops:[{color:rb.Color.rgb(255,0,0),offset:0},{color:rb.Color.rgb(255,255,0),offset:.17},{color:rb.Color.limeGreen,offset:.33},{color:rb.Color.cyan,offset:.5},{color:rb.Color.blue,offset:.66},{color:rb.Color.magenta,offset:.83},{color:rb.Color.rgb(255,0,0),offset:1}],vector:"northsouth"})},borderRadius:{defaultValue:3},
hue:{defaultValue:0},sliderPosition:{derived:!0,after:["submorphs"],get:function(){return rb.pt(this.width/2,5+this.hue/360*(this.height-10))},set:function(Ia){this.hue=Math.max(0,Math.min(Ia.y/(this.height-10)*360,359));this.refresh()}},submorphs:{initialize:function(){this.submorphs=[{name:"slider",height:10,width:50,borderRadius:3,reactsToPointer:!1,nativeCursor:"ns-resize",borderColor:rb.Color.black,fill:rb.Color.transparent,borderWidth:2}]}}}}}],yb,{pathInPackage:function(){return"styling/color-picker.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10512,end:12485})})(rb.Morph);(function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),qb=yb.hasOwnProperty("ColorDetails")&&"function"===typeof yb.ColorDetails?yb.ColorDetails:yb.ColorDetails=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"update",value:function(Ia){Ia=Ia.color;var Q=$jscomp.makeIterator(Ia.toTuple8Bit()),za=Q.next().value,Ta=Q.next().value;Q=Q.next().value;var xb=$jscomp.makeIterator(Ia.toHSB()),Yb=xb.next().value,Ac=xb.next().value;xb=xb.next().value;var mc=this.get("hashViewer");this.get("colorViewer").fill=Ia;mc.replace(mc.documentRange,Ia.toHexString(),!1,!1);this.get("R").value="R "+za.toFixed(0)+"\n\nG "+Ta.toFixed(0)+
"\n\nB "+Q.toFixed(0)+"\n\nH "+Yb.toFixed(0)+"\n\nS "+Ac.toFixed(2)+"\n\nV "+xb.toFixed(2)}},{key:"onHashViewerChanged",value:function(Ia){Ia=rb.Color.rgbHex(Ia);this.owner.owner.color=Ia}},{key:"keyValue",value:function(Ia){var Q=Ia.name,za=Ia.key,Ta=Ia.value,xb=Ia.update;Ia=Ia.editable;return new rb.Morph({fill:rb.Color.transparent,layout:new rb.HorizontalLayout({spacing:5}),submorphs:[{type:"label",name:"keyLabel",styleClasses:[Ia&&"large","key"],value:za},new rb.ColorPropertyView({name:Q||za,
readOnly:!Ia,value:Ta,update:xb})]})}},{key:"hashViewer",value:function(){var Ia=this.keyValue({name:"hashViewer",key:"#",editable:!0,value:this.color.toHexString()});rb.connect(Ia.get("hashViewer"),"updateValue",this,"onHashViewerChanged");return Ia}},{key:"rgbViewer",value:function(){var Ia=$jscomp.makeIterator(this.color.toTuple8Bit()),Q=Ia.next().value,za=Ia.next().value;Ia=Ia.next().value;return new rb.Morph({name:"rgbViewer",fill:rb.Color.transparent,submorphs:[this.keyValue({key:"R",value:Q.toFixed()}),
this.keyValue({key:"G",value:za.toFixed()}),this.keyValue({key:"B",value:Ia.toFixed()})]})}},{key:"hsbViewer",value:function(){var Ia=$jscomp.makeIterator(this.color.toHSB()),Q=Ia.next().value,za=Ia.next().value;Ia=Ia.next().value;return new rb.Morph({name:"hsbViewer",fill:rb.Color.transparent,submorphs:[this.keyValue({key:"H",value:Q.toFixed()}),this.keyValue({key:"S",value:za.toFixed(2)}),this.keyValue({key:"V",value:Ia.toFixed(2)})]})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorDetails"}},
{key:"properties",get:function(){return{color:{defaultValue:rb.Color.blue},width:{defaultValue:80},fill:{defaultValue:rb.Color.transparent},layout:{initialize:function(){this.layout=new rb.VerticalLayout({spacing:9,layoutOrder:function(Ia){return this.container.submorphs.indexOf(Ia)}})}},submorphs:{after:["color"],initialize:function(){this.submorphs=[{type:"ellipse",extent:rb.pt(50,50),name:"colorViewer",fill:this.color},this.hashViewer(),{type:"label",name:"R",autofit:!0,padding:rb.rect(10,0,0,
0),styleClasses:["ColorPropertyView"]}];this.update(this)}}}}}],yb,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:12494,end:15269})})(rb.Morph);Oc=Ka("a",function(Md){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),qb=yb.hasOwnProperty("ColorPicker")&&
"function"===typeof yb.ColorPicker?yb.ColorPicker:yb.ColorPicker=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ic(qb,Md,[{key:"onKeyDown",value:function(Ia){"Escape"==Ia.key&&this.close()}},{key:"close",value:function(){ic._get(Object.getPrototypeOf(qb.prototype),"close",this).call(this);rb.signal(this,"close")}},{key:"update",value:function(){0!=this.submorphs.length&&(this.get("header").fill=rb.Color.transparent,
this.get("field picker").update(this),this.get("hue picker").update(this),this.get("details").update(this),this.get("alpha slider").update(this.alpha),rb.signal(this,"color",this.color))}},{key:"colorPalette",value:function(){var Ia=this.colorDetails(),Q=this.fieldPicker(),za=this.huePicker(),Ta=this.alphaSlider();Ia=new rb.Morph({master:{auto:"styleguide://SystemWidgets/color picker"},name:"colorPalette",width:this.width,submorphs:[Q,za,Ia,Ta]});rb.connect(Q,"brightness",this,"brightness");rb.connect(Q,
"saturation",this,"saturation");rb.connect(za,"hue",this,"hue");return Ia}},{key:"alphaSlider",value:function(){var Ia,Q=rb.morph({name:"alphaSlider",fill:rb.Color.transparent,layout:new rb.HorizontalLayout({spacing:3}),submorphs:[{type:"label",padding:rb.Rectangle.inset(3),value:"Alpha",fontColor:rb.Color.gray,fontWeight:"bold"},Ia=new rb.Slider({name:"alpha slider",value:this.alpha,min:0,max:1,width:170})]});rb.connect(Ia,"value",this,"alpha");return Q}},{key:"fieldPicker",value:function(){return new rb.FieldPicker({name:"field picker",
saturation:this.saturation,brightness:this.brightness})}},{key:"huePicker",value:function(){return new rb.HuePicker({name:"hue picker",hue:this.hue})}},{key:"colorDetails",value:function(){return new rb.ColorDetails({name:"details",color:this.color})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPicker"}},{key:"properties",get:function(){return{extent:{defaultValue:rb.pt(400,320)},fill:{defaultValue:rb.Color.black.withA(.7)},isHaloItem:{defaultValue:!0},borderWidth:{defaultValue:0},
hasFixedPosition:{defaultValue:!0},color:{defaultValue:rb.Color.blue,derived:!0,before:["submorphs","targetMorph"],get:function(){return rb.Color.hsb(this.hue,this.saturation,this.brightness).withA(this.alpha)},set:function(Ia){var Q=$jscomp.makeIterator(Ia.toHSB()),za=Q.next().value,Ta=Q.next().value;Q=Q.next().value;this.hue=za;this.saturation=Ta;this.brightness=Q;this.alpha=Ia.a}},alpha:{set:function(Ia){this.setProperty("alpha",Ia);this.update()}},saturation:{},brightness:{set:function(Ia){this.setProperty("brightness",
Ia);this.update()}},hue:{set:function(Ia){this.setProperty("hue",Ia);this.update()}},targetMorph:{initialize:function(){var Ia=this;this.targetMorph=this.colorPalette();this.ui.windowTitle.fontColor=rb.Color.gray;this.ui.header.fill=rb.Color.transparent;this.whenRendered().then(function(){Ia.fill=rb.Color.black.withA(.7);Ia.update()})}}}}}],yb,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:15278,end:19116})}(rb.Window));rb.ColorPicker=Oc;rb.ColorPicker=Oc;rb.ColorPicker=Oc}}});