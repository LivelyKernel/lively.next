System.register("./__root_module__-3d4e820f.js kld-intersections ./index-da7fb446.js ./index-a37f4074.js ./index-cbb45750.js ./color-picker-f9cd23a8.js ./editor-plugin-a0c062dc.js ./index-7fab6f02.js ./editor-plugin-705cb8fd.js ./index-68e171ef.js".split(" "),function(){var ra,kb,zb,Sb,Mb,Fd,Jc,wd,Kc,Fc,Wc,hd,Id,nd,Xc,Na,nb,Pb,Wb,Pc,Bd,Hb,Ub,vb,kc,xc,Dc,Gb,$a,dc,oc,sa,Ca,bb,rb,qb,Sa,Ta,sb,Zb,rc;return{setters:[function(Xb){ra=Xb.as;kb=Xb.ai;zb=Xb.aA;Sb=Xb.av;Mb=Xb.a3;Fd=Xb.at;Jc=Xb.aq;wd=Xb.au;
Kc=Xb.C;Fc=Xb.a2;Wc=Xb.a6;hd=Xb.$;Id=Xb.aV;nd=Xb.P;Xc=Xb.a7;Na=Xb.aB;nb=Xb.ak;Pb=Xb.aU;Wb=Xb.ao;Pc=Xb.al;Bd=Xb.an;Hb=Xb.bp;Ub=Xb.br;vb=Xb.bP;kc=Xb.b1;xc=Xb.bh;Dc=Xb.aN;Gb=Xb.n;$a=Xb.a1;dc=Xb.bQ;oc=Xb.aW;sa=Xb.aX;Ca=Xb.ap;bb=Xb.a4;rb=Xb.ar;qb=Xb.bR},function(){},function(){},function(){},function(Xb){Sa=Xb.d;Ta=Xb.s;sb=Xb.I;Zb=Xb.M},function(){},function(Xb){rc=Xb.I},function(){},function(){},function(){}],execute:function(){function Xb(Oc){var Va=Oc.sourceObj,kd=Oc.targetObj;Va.isMorph&&kd.isMorph?
(Va.show(),kd.show(),fd.showConnector&&fd.showConnector(Va,kd)):fd.show(String(Oc))}function wc(Oc){var Va=Oc.sourceObj,kd=Oc.sourceAttrName,Ka=Oc.targetObj,Wa=Oc.targetMethodName,db=Oc.getConverter();Oc=Oc.getUpdater();return fd.printConnectionElements(Va,kd,Ka,Wa,db,Oc)}function I(Oc,Va,kd,Ka,Wa,db){Oc="/* global connect, source, target */\nconnect(source, '"+Va+"', target, '"+Ka+"'";if(Wa||db)Oc+=", {\n";Wa&&(Oc+="  converter: "+Wa);Wa&&db&&(Oc+=",");Wa&&(Oc+="\n");db&&(Oc+="  updater: "+db+"\n");
if(Wa||db)Oc+="}";return Oc+");"}function T(Oc,Va){var kd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ka){if(1==Ka.nextAddress)return Ka.yield(fd.InteractiveMorphSelector.selectMorph(),2);kd=Ka.yieldResult;return Ka.return(kd?fd.interactiveConnectGivenSourceAndTarget(Oc,Va,kd):null)})}function ua(Oc,Va,kd,Ka){var Wa,db,Zc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xd){Wa=kd&&kd.world().targetDataBindings(kd);db=Oc.world();if(!Wa||!Wa.length)return db.setStatusMessage("connect canceled"),
xd.return();Zc=Wa.map(function(Wd){return[Wd[0].group||"uncategorized",Wd.map(function(le){return[le.signature||le.name,function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(yc){return 1==yc.nextAddress?yc.yield(fd.interactivelyEvaluateConnection({sourceObj:Oc,sourceAttr:Va,targetObj:kd,targetAttr:le.name,onConnect:Ka}),2):yc.return(yc.yieldResult)})}]})]});Zc.push(["custom...",function(){var Wd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(le){return 1==le.nextAddress?
le.yield(db.prompt("Enter custom connection point",{requester:$world,historyId:"lively.morphic-custom-connection-points",useLastInput:!0}),2):(Wd=le.yieldResult)?le.yield(fd.interactivelyEvaluateConnection({sourceObj:Oc,sourceAttr:Va,targetObj:kd,targetAttr:Wd,onConnect:Ka}),0):le.jumpTo(0)})}]);return xd.yield(kd.openMenu(Zc).whenFinished(),0)})}function Da(Oc,Va,kd,Ka){Va=void 0===Va?"confirm connection":Va;var Wa,db,Zc,xd,Wd,le,yc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rd){Wa=
Oc;db=Wa.sourceObj;Zc=Wa.sourceAttrName;xd=Wa.targetObj;Wd=Wa.targetMethodName;le=Oc.getConverter();yc=Oc.getUpdater();return Rd.return(fd.interactivelyEvaluateConnection({sourceObj:db,sourceAttr:Zc,targetObj:xd,targetAttr:Wd,converter:le,updater:yc,prompt:Va,highlight:kd,onConnect:Ka}))})}function Kb(Oc,Va,kd,Ka,Wa){Ka=void 0===Ka?{}:Ka;Wa=fd.rect(0).sides.concat(fd.rect(0).corners);kd=kd||new fd.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:fd.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:fd.Color.transparent,
nativeCursor:"auto"},end:{fill:fd.Color.orange}}},Ka,{hasFixedPosition:!0}));kd.startPoint.attachTo(Oc,"rightCenter");Va.isMorph?(Ka=Va.globalBounds().partNameNearest(Wa,Oc.globalPosition),Oc.globalPosition.equals(Va.globalBounds().partNamed(Ka))&&Va.globalBounds().partNameNearest(fd.arr.without(Wa,Ka),Oc.globalPosition),kd.endPoint.attachTo(Va,"leftCenter")):(Wa=Oc.globalBounds().topRight().addPt(fd.pt(100,0)),Va=fd.morph({type:"label",value:Va.toString(),styleClasses:["Tooltip"],padding:fd.rect(8,
4)}).openInWorld(Wa),Va.position=Oc.world().bounds().translateForInclusion(Va.bounds()).topLeft(),fd.once(kd,"remove",Va,"remove"),kd.endPoint.attachTo(Va,"leftCenter"));return kd}function Db(Oc){var Va,kd,Ka,Wa,db,Zc,xd,Wd,le,yc,Rd,bd,Fb,ea,la,tb,H,ja,Ba,ub;return $jscomp.asyncExecutePromiseGeneratorProgram(function(jc){switch(jc.nextAddress){case 1:Va=Oc;kd=Va.sourceObj;Ka=Va.sourceAttr;Wa=Va.targetObj;db=Va.targetAttr;Zc=Va.converter;xd=Va.updater;Wd=Va.prompt;le=void 0===Va.highlight?!0:Va.highlight;
yc=Va.onConnect;Rd="lively://lively.bindings-interactive-connect/x"+kd.id;bd={context:window,format:"esm",targetModule:Rd,classTransform:fd.classToFunctionTransform};Fb=fd.printConnectionElements(kd,Ka,Wa,db,Zc,xd);Wa.isMorph&&kd.isMorph&&(ea=Wa.propertiesAndPropertySettings().properties[db]||{type:typeof Wa[db]},la=ea.type,tb=kd.propertiesAndPropertySettings().properties[Ka]||{type:typeof kd[Ka]},H=tb.type,H!==la&&(Wd=!0));ja={};Object.assign(lively.modules.module(Rd).recorder,(ja.source=kd,ja.target=
Wa,ja.connect=Jc,ja.once=wd,ja[Ka]=kd[Ka],ja));if(!Wd){Ba=Fb;jc.jumpTo(2);break}return jc.yield($world.editPrompt(Wd,{input:Fb,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:bd,animated:!1}),3);case 3:if(Ba=jc.yieldResult,!Ba)return $world.setStatusMessage("connect canceled"),jc.return();case 2:return jc.yield(lively.vm.runEval(Ba,bd),4);case 4:ub=jc.yieldResult;if(ub.isError)return $world.logError(ub.value),jc.return(Db({sourceObj:kd,sourceAttr:Ka,
targetObj:Wa,targetAttr:db,converter:Zc,updater:xd,prompt:"confirm connection",highlight:le,onConnect:yc}));le&&($world.setStatusMessage("connected!",fd.Color.green),fd.interactivelyShowConnection(ub.value));"function"===typeof yc&&yc(ub);jc.jumpToEnd()}})}var Fa=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");Fa.Inspector=rc;var ac=function(Oc){var Va=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),kd=Va.hasOwnProperty("ProtoInspector")&&"function"===typeof Va.ProtoInspector?
Va.ProtoInspector:Va.ProtoInspector=function(Ka){Ka&&Ka[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ra(kd,Oc,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Va,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(Fa.Inspector);ac=Fa.ProtoInspector;Fa.default=ac;var Gd=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");Gd.Morph=kb;Gd.touchInputDevice=zb;Gd.easings=Sb;Gd.pt=Mb;Gd.fun=Fd;Gd.connect=Jc;Fa=function(Oc){var Va=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),kd=Va.hasOwnProperty("MorphicSideBar")&&"function"===typeof Va.MorphicSideBar?Va.MorphicSideBar:Va.MorphicSideBar=function(Ka){Ka&&
Ka[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ra(kd,Oc,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",value:function(Ka){Ka=void 0===Ka?!0:Ka;if(this.respondsToVisibleWindow){var Wa=$world.visibleBounds(),db=navigator.standalone&&Gd.touchInputDevice?25:0;this.height=Wa.height-db;this.top=db+Wa.top();db=this.get("horizontal resizer");db.height=this.height;db.top=0;Ka&&(this.visible?this.topLeft=
Wa.topLeft():this.topRight=Wa.topLeft())}}},{key:"switchMode",value:function(Ka){"inspector"==Ka&&this.showInspector();"connections"==Ka&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(Ka){var Wa=this,db,Zc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xd){switch(xd.nextAddress){case 1:db=
$world.visibleBounds();Zc=navigator.standalone&&Gd.touchInputDevice?25:0;Wa.height=db.height-Zc;Wa.top=Zc+db.top();if(Ka)return $world.addMorph(Wa,$world.get("lively top bar")),Wa.right=0,Wa.attachToWorld($world),Wa.visible=!0,xd.yield(Wa.whenRendered(),5);Wa.detachFromWorld($world);return xd.yield(Wa.animate({opacity:0,right:0,duration:300}),4);case 4:Wa.visible=!1;Wa.remove();xd.jumpTo(0);break;case 5:return Wa.onWorldResize(!1),Wa.get("scene graph").adjustProportions(),xd.yield(Wa.animate({opacity:1,
easing:Gd.easings.outCirc,left:1,duration:300}),6);case 6:Wa.get("scene graph").refresh(),xd.jumpToEnd()}})}},{key:"attachToWorld",value:function(Ka){Gd.connect(Ka,"onChange",this,"onHierarchyChange",{garbageCollect:!0});Gd.connect(Ka,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});Gd.connect(Ka,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(Ka){var Wa=this;Ka.attributeConnections.forEach(function(db){db.targetObj===Wa&&db.disconnect()})}},
{key:"selectNode",value:function(Ka){this.getSubmorphNamed("scene graph").selectMorphInTarget(Ka);this.getSubmorphNamed("connections tree").inspectConnectionsOf(Ka)}},{key:"onHierarchyChange",value:function(Ka){var Wa=this,db;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zc){if("addMorphAt"===Ka.selector||"removeMorph"===Ka.selector||"name"===Ka.prop){db=Wa._sceneGraph||(Wa._sceneGraph=Wa.getSubmorphNamed("scene graph"));if(!db||!db.owner.visible||Ka.target&&Ka.target.isHand||Ka.target&&
db.ignoreMorph(Ka.target)||Ka.args&&!Ka.args[0].isHalo&&db.ignoreMorph(Ka.args[0])||Ka.target.ownerChain().find(function(xd){return db.ignoreMorph(xd)}))return Zc.return();Gd.fun.debounceNamed("scene-graph-update",50,function(){return db.refresh()})()}Zc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],Va,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-70"}}},{start:226,end:3612})}(Gd.Morph);Fa=Gd.MorphicSideBar;Gd.default=Fa;var fd=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");fd.interactivelyShowConnection=Xb;fd.printConnection=wc;fd.printConnectionElements=I;fd.interactiveConnectGivenSource=T;fd.interactiveConnectGivenSourceAndTarget=ua;fd.interactivelyReEvaluateConnection=Da;fd.visualizeConnection=Kb;
fd.interactivelyEvaluateConnection=Db;fd.connect=Jc;fd.once=wd;fd.Color=Kc;fd.rect=Fc;fd.pt=Mb;fd.arr=Wc;fd.promise=hd;fd.properties=Id;fd.Path=nd;fd.obj=Xc;fd.HorizontalLayout=Na;fd.Morph=kb;fd.VerticalLayout=nb;fd.StyleSheet=Pb;fd.Icon=Wb;fd.GridLayout=Pc;fd.morph=Bd;fd.TreeData=Hb;fd.Tree=Ub;fd.Leash=vb;fd.LabeledCheckBox=kc;fd.SearchField=xc;fd.showConnector=Sa;fd.show=Ta;fd.InteractiveMorphSelector=sb;fd.MorphHighlighter=Zb;fd.Window=Dc;fd.classToFunctionTransform=Gb;fd.interactivelyShowConnection=
Xb;fd.interactivelyShowConnection=Xb;fd.printConnection=wc;fd.printConnection=wc;fd.printConnectionElements=I;fd.printConnectionElements=I;fd.interactiveConnectGivenSource=T;fd.interactiveConnectGivenSource=T;fd.interactiveConnectGivenSourceAndTarget=ua;fd.interactiveConnectGivenSourceAndTarget=ua;fd.interactivelyReEvaluateConnection=Da;fd.interactivelyReEvaluateConnection=Da;fd.visualizeConnection=Kb;fd.visualizeConnection=Kb;fd.interactivelyEvaluateConnection=Db;fd.interactivelyEvaluateConnection=
Db;var Gc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");Gc.Tree=Ub;Gc.TreeData=Hb;Gc.morph=Bd;Gc.Icon=Wb;Gc.HorizontalLayout=Na;Gc.easings=Sb;Gc.Morph=kb;Gc.Color=Kc;Gc.Rectangle=$a;Gc.rect=Fc;Gc.pt=Mb;Gc.connect=Jc;Gc.noUpdate=dc;Gc.disconnect=oc;Gc.disconnectAll=sa;Gc.once=wd;Gc.arr=Wc;Gc.num=Ca;Gc.fun=Fd;Gc.tree=bb;Gc.promise=hd;Gc.ConnectionHalo=_missingExportShim;Fa=function(Oc){var Va=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),kd=Va.hasOwnProperty("InteractiveTreeContainer")&&
"function"===typeof Va.InteractiveTreeContainer?Va.InteractiveTreeContainer:Va.InteractiveTreeContainer=function(Ka){Ka&&Ka[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ra(kd,Oc,[{key:"onChildRemoved",value:function(Ka){}},{key:"onChildAdded",value:function(Ka){}},{key:"toggleSelected",value:function(Ka){if(this.tree){var Wa=this.tree,db=Wa.selectionFontColor,Zc=Wa.nonSelectionFontColor;this.submorphs.filter(function(xd){return!xd._isControlElement&&
xd.styleClasses.includes("Label")}).forEach(function(xd){xd.fontColor=Ka?db:Zc})}}},{key:"onGrab",value:function(Ka){var Wa=this.tree,db=this.node;this.fill=Gc.Color.gray.withA(.5);this.fontColor=Wa.selectionFontColor;this.opacity=.8;ra._get(Object.getPrototypeOf(kd.prototype),"onGrab",this).call(this,Ka);db&&(this.toggleSelected(!1),Wa.collapse(db),Wa.treeData.parentNode(db).container.onChildRemoved(this),this._data=Wa.treeData.remove(db),db.container.target.remove(),Wa.update(!0))}},{key:"wantsToBeDroppedOn",
value:function(Ka){this.showPreviewOn(Ka);return!0}},{key:"showPreviewOn",value:function(Ka){if(Ka.isContainer)var Wa=Ka.tree;Ka.isTree&&(Wa=Ka);Wa&&Wa.showDropPreviewFor&&Wa.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(Ka){var Wa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(db){if(1==db.nextAddress)return Wa.tree.treeData.add(Ka._data,Wa.node,Wa.node.children[0]),Wa.tree.uncollapse(Wa.node),Wa.tree.treeData.remove(Wa.tree._previewNode),db.yield(Wa.tree.whenRendered(),
2);Wa.tree.update(!0);Wa.onChildAdded(Ka);db.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(Ka,Wa){var db=this;debugger;this.tree._dropInProgress=!0;ra._get(Object.getPrototypeOf(kd.prototype),"onBeingDroppedOn",this).call(this,Ka,Wa);Ka=function(){db.fill=Gc.Color.gray.withA(.5);db.opacity=1;db.tree._dropInProgress=!1;db.tree.refresh()};Wa.isTree?Wa.insertAtPlaceholder(this).then(Ka):Wa.isContainer?Wa.insertAsChild(this).then(Ka):Ka()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},
{key:"properties",get:function(){return{fill:{defaultValue:Gc.Color.transparent},isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var Ka=this,Wa=this.tree.treeData;return Wa&&Wa.asList().find(function(db){return db.container===Ka})}}}}}],Va,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1102"}}},{start:447,end:2927})}(Gc.Morph);Gc.InteractiveTreeContainer=Fa;Gc.InteractiveTreeContainer=Fa;Gc.InteractiveTreeContainer=Fa;Fa=function(Oc){var Va=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),kd=Va.hasOwnProperty("InteractiveTreeData")&&"function"===typeof Va.InteractiveTreeData?Va.InteractiveTreeData:Va.InteractiveTreeData=function(Ka){Ka&&Ka[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ra(kd,
Oc,[{key:"display",value:function(Ka){return[Ka.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(Ka){return Ka.isCollapsed}},{key:"collapse",value:function(Ka,Wa){Ka.isCollapsed=Wa}},{key:"getChildren",value:function(Ka){var Wa=this;return Ka.isLeaf?null:Ka.children.filter(function(db){return db&&(Wa.filterActive?db.visible:!0)})}},{key:"isLeaf",value:function(Ka){var Wa=this;return!Ka.children||0==Ka.children.filter(function(db){return db&&(Wa.filterActive?db.visible:!0)}).length}},
{key:"add",value:function(Ka,Wa,db){Wa=void 0===Wa?this.root:Wa;Wa.children||(Wa.children=[]);db?Gc.arr.pushAt(Wa.children,Ka,Wa.children.indexOf(db)):Wa.children.push(Ka);Wa.isLeaf=!1}},{key:"replace",value:function(Ka,Wa){var db=this.parentNode(Ka);Ka=db.children.indexOf(Ka);db.children[Ka]=Wa}},{key:"next",value:function(Ka){var Wa=this.parentNode(Ka);return Wa&&Wa.children[Wa.children.indexOf(Ka)+1]}},{key:"isBefore",value:function(Ka,Wa){this.next(Ka)===Wa}},{key:"isAfter",value:function(Ka,
Wa){this.next(Wa)===Ka}},{key:"addBefore",value:function(Ka,Wa){this.add(Ka,this.parentNode(Wa),Wa)}},{key:"addAfter",value:function(Ka,Wa){var db=this.parentNode(Wa);Wa=db.children.indexOf(Wa)+1;this.add(Ka,db,db.children[Wa])}},{key:"remove",value:function(Ka){var Wa=this.parentNode(Ka);if(Wa)return Gc.arr.remove(Wa.children,Ka),Wa.children==[]&&(Wa.children=null),Ka}},{key:"filter",value:function(Ka,Wa){Wa=void 0===Wa?1:Wa;var db=this,Zc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xd){if(1==
xd.nextAddress)return xd.yield(db.uncollapseAll(function(Wd,le){return le<Wa+1}),2);Zc=db.filterActive;db.filterActive=!1;db.asListWithIndexAndDepth(!1).reverse().forEach(function(Wd){var le=Wd.node;if(0==Wd.depth)return le.visible=!0;le.visible=Ka(le);le.visible||le.isCollapsed||!le.children.find(function(yc){return yc.visible})?le.container.opacity=1:(le.visible=!0,le.container.opacity=.5);return le.visible});db.filterActive=Zc;xd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],
Va,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:2936,end:5375})}(Gc.TreeData);Gc.InteractiveTreeData=Fa;Gc.InteractiveTreeData=Fa;Gc.InteractiveTreeData=Fa;Fa=function(Oc){var Va=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),kd=Va.hasOwnProperty("InteractiveTree")&&
"function"===typeof Va.InteractiveTree?Va.InteractiveTree:Va.InteractiveTree=function(Ka){Ka&&Ka[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ra(kd,Oc,[{key:"update",value:function(Ka){var Wa=this;ra._get(Object.getPrototypeOf(kd.prototype),"update",this).call(this,Ka);this.treeData&&this.relayoutContainers();Ka&&this.embeddedMorphs.forEach(function(db){db.isContainer&&(db.fill=Gc.Color.transparent,db.fontFamily=Wa.fontFamily,
db.fontSize=Wa.fontSize)})}},{key:"onDrop",value:function(Ka){ra._get(Object.getPrototypeOf(kd.prototype),"onDrop",this).call(this,Ka);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(Ka){}},{key:"onDropHoverUpdate",value:function(Ka){}},{key:"onDropHoverOut",value:function(Ka){}},{key:"onHoverOut",value:function(Ka){var Wa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(db){ra._get(Object.getPrototypeOf(kd.prototype),"onHoverOut",Wa).call(Wa,
Ka);Wa._previewNode&&Wa._previewNode.container.world()&&Wa.treeData.remove(Wa._previewNode);Wa.resetContainerSelection();Wa.update(!0);db.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(Ka){var Wa=this,db;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zc){if(1==Zc.nextAddress)return db=Wa.treeData.parentNode(Wa._previewNode),Wa.treeData.replace(Wa._previewNode,Ka._data),Wa.treeData.remove(Wa._previewNode),Zc.yield(Wa.whenRendered(),2);Wa.update(!0);db.container.onChildAdded(Ka);
Zc.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var Ka=this;if(!this._scrollingUp){this._scrollingUp=!0;var Wa=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(db){if(1==db.nextAddress)return Ka._scrollingUp&&0<Ka.scroll.y?db.yield(Ka.animate({scroll:Ka.scroll.subXY(0,30),duration:300,easing:Gc.easings.linear}),3):(Ka._scrollingUp=!1,db.jumpTo(0));Wa();db.jumpToEnd()})};Wa()}}},{key:"scrollDownSlowly",value:function(){var Ka=this;if(!this._scrollingDown){this._scrollingDown=
!0;var Wa=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(db){if(1==db.nextAddress)return Ka._scrollingDown&&Ka.scroll.y<Ka.scrollExtent.y-Ka.height?db.yield(Ka.animate({scroll:Ka.scroll.addXY(0,30),duration:300,easing:Gc.easings.linear}),3):(Ka._scrollingDown=!1,db.jumpTo(0));Wa();db.jumpToEnd()})};Wa()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(Ka){Ka.isContainer&&
(Ka.fill=Gc.Color.transparent)})}},{key:"showDropPreviewFor",value:function(Ka){var Wa=this;Ka=this.localize(Ka.globalBounds().center());var db=this.textPositionFromPoint(Ka),Zc=this.treeData.asListWithIndexAndDepth(function(bd){bd=bd.node;return bd!=Wa._previewNode&&bd.container.world()}),xd=(Zc.find(function(bd){return bd.i-1===db.row})||{}).node,Wd=xd&&xd.container,le=this.ensurePlaceholder(),yc=!!le.container.world(),Rd=Ka.subPt(this.scroll).subPt(this.scrollbarOffset);10>Rd.y?this.scrollUpSlowly():
Rd.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!Wd){if(Zc.length>db.row||Gc.arr.last(this.treeData.root.children)===le)return;this.treeData.remove(le);this.treeData.add(le);this.update(!0)}if(Wd){Zc=this.textLayout.boundsFor(this,db);if(4>Math.abs(Zc.top()-Ka.y)){if(this.treeData.isBefore(le,xd))return;this.treeData.remove(le);this.treeData.addBefore(le,xd)}else if(4>Math.abs(Zc.bottom()-Ka.y)&&(xd.isCollapsed||this.treeData.isLeaf(xd))){if(this.treeData.isAfter(le,
xd))return;this.treeData.remove(le);this.treeData.addAfter(le,xd)}else{Wd.fill=Gc.Color.gray;if(!yc)return;this.treeData.remove(le)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var Ka=Gc.pt(this.width-100,this.document.getLine(0).height);this._previewNode||(this._previewNode={container:Gc.morph({acceptsDrops:!1,reactsToPointer:!1,fill:Gc.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=Ka;return this._previewNode}},{key:"relayoutContainers",
value:function(){var Ka=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(Wa){return Wa.height});this.treeData.asListWithIndexAndDepth().forEach(function(Wa){var db=Wa.node;Wa=Wa.i;db.container.nativeCursor="grab";db.container.width=Ka.width-25-db.container.left;db.container.toggleSelected&&db.container.toggleSelected(Wa==Ka.selectedIndex)});this.anchors.forEach(function(Wa){return Wa.position=Wa.position})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"InteractiveTree"}}],Va,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:5384,end:10721})}(Gc.Tree);Gc.InteractiveTree=Fa;Gc.InteractiveTree=Fa;Gc.InteractiveTree=Fa;Fa=function(Oc){var Va=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),kd=Va.hasOwnProperty("SceneGraphTree")&&
"function"===typeof Va.SceneGraphTree?Va.SceneGraphTree:Va.SceneGraphTree=function(Ka){Ka&&Ka[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ra(kd,Oc,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(Ka){var Wa=this.treeData.asList().find(function(db){return db.container.target===Ka});Wa&&this.selectedNode!=Wa&&this.selectPath(this.treeData.pathOf(Wa))}},{key:"onLoad",
value:function(){var Ka=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wa){if(1==Wa.nextAddress)return Ka.submorphs=[],Wa.yield(Ka.whenRendered(),2);Ka.get("inspector").makeEditorVisible(!0);Ka.get("inspector").makeEditorVisible(!1);Ka.setTarget($world);Wa.jumpToEnd()})}},{key:"adjustProportions",value:function(Ka){Ka=(Ka?Ka.state.dragDelta:{y:0}).y;var Wa=this.get("inspector"),db=this.get("scene graph resizer"),Zc=this.get("mode selector"),xd=this.get("connections tree");this.height+=
Ka;Wa.height-=Ka;xd.height-=Ka;db.top=this.bottom;db.left=0;Zc.top=db.bottom;xd.top=Wa.top=Zc.bottom+5}},{key:"reset",value:function(){var Ka=this;this.treeData=new Gc.InteractiveTreeData({children:[],container:Gc.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(Wa){return null==Wa.id}).forEach(function(Wa){return Ka.removeAnchor(Wa)})}},{key:"setTarget",value:function(Ka){this.target=Ka;this.treeData=this.getTreeFromSubmorphHierarchy(Ka);this.uncollapse(this.treeData.root)}},
{key:"isNodeOutOfSync",value:function(Ka){var Wa=this;if(Ka===this._previewNode)return!1;if(Ka.container.nameNeedsUpdate)return!0;var db=Ka.container.target.submorphs.filter(function(Zc){return!Wa.ignoreMorph(Zc)});return db.length!=Ka.children.length||db.map(function(Zc){return Zc.name}).join("")!=Ka.children.map(function(Zc){return Zc.target?Zc.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(Ka){var Wa=this,db=Ka.container.target.submorphs.map(function(yc){return yc.__scene_graph_target__?
yc.__scene_graph_target__():yc}).filter(function(yc){return!Wa.ignoreMorph(yc)}),Zc=[],xd={},Wd;for(Wd in db){xd.$jscomp$loop$prop$m$2280=db[Wd];var le=Gc.arr.without(Ka.children,this._previewNode).find(function(yc){return function(Rd){return Rd.container.target.id==yc.$jscomp$loop$prop$m$2280.id}}(xd));Zc[Wd]=le?le:this.readMorphHierarchy(xd.$jscomp$loop$prop$m$2280);xd={$jscomp$loop$prop$m$2280:xd.$jscomp$loop$prop$m$2280}}return Zc}},{key:"refresh",value:function(){var Ka=this;if(!this._updating&&
!this._dropInProgress){var Wa=!1;Gc.tree.prewalk(this.treeData.root,function(db){Ka.isNodeOutOfSync(db)&&(Wa=!0,db.name=db.container.target.name,db.container.refresh(),db.children=Ka.getNewChildren(db))},function(db){return db.children});this.update(Wa)}}},{key:"ignoreMorph",value:function(Ka){return Ka.isMorph?Ka.isContainer||Ka.isWindow||Ka.getWindow()||Ka.isEpiMorph||Ka.isHand||["lively.halos"].includes(Ka.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler",
"UserFlap","Menu"].includes(Ka.constructor.name):!1}},{key:"onDropHoverOut",value:function(Ka){var Wa=Ka.hand.grabbedMorphs[0];Ka=Ka.hand.findDropTarget();if(!(Ka===this||Ka&&Ka.ownerChain().includes(this))&&Wa&&Wa.isContainer)Wa.onDragOutside()}},{key:"onDropHoverIn",value:function(Ka){var Wa=Ka.hand.grabbedMorphs[0];Wa&&!Wa.isContainer&&($world.halos().forEach(function(db){return db.remove()}),Wa.remove(),Object.assign(Wa,Ka.hand._grabbedMorphProperties.get(Wa).pointerAndShadow),Wa=this.renderContainerFor(Wa,
!1),Ka.hand.grab(Wa),Wa.leftCenter=Gc.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(Ka){return new Gc.InteractiveTreeData(this.readMorphHierarchy(Ka))}},{key:"readMorphHierarchy",value:function(Ka){var Wa=this;return Gc.tree.mapTree(Ka,function(db,Zc){return{name:db.name,isCollapsed:!0,container:Wa.renderContainerFor(db),visible:!0,children:Zc}},function(db){return db.submorphs.filter(function(Zc){return db.isWorld?!Wa.ignoreMorph(Zc):!0})})}},{key:"renderContainerFor",value:function(Ka,
Wa){Ka=void 0===Ka?Gc.morph({name:"root"}):Ka;Wa=new Gc.MorphContainer({tree:this,fill:void 0===Wa||Wa?Gc.Color.transparent:Gc.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:Ka,opacity:Ka.visible?1:.5});Ka._data?(Wa._data=Ka._data,Ka._data.container=Wa):Wa._data={name:Ka.name,isCollapsed:!0,container:Wa,children:[]};return Wa}},{key:"collapseAll",value:function(){var Ka=this;this.treeData.asList().forEach(function(Wa){return Wa!=Ka.treeData.root?Wa.isCollapsed=
!0:Wa.isCollapsed=!1})}},{key:"filterMorphs",value:function(Ka){var Wa=this,db;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zc){if(1==Zc.nextAddress)return db=Ka.tokens[0],Wa.treeData.filterActive||(Wa._collapseState=new WeakMap(Wa.treeData.asList().map(function(xd){return[xd,xd.isCollapsed]}))),Wa.treeData.filterActive=!!db,Zc.yield(Wa.treeData.filter(function(xd){var Wd=!db||xd.container.target.name.includes(db);xd.container.highlightTerm(db);return Wd},3),2);Wa.treeData.filterActive||
Wa.treeData.asList().forEach(function(xd){return xd.isCollapsed=Wa._collapseState.has(xd)?Wa._collapseState.get(xd):!0});Wa.refresh();Zc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],Va,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1102"}}},{start:10730,end:17203})}(Gc.InteractiveTree);Gc.SceneGraphTree=Fa;Gc.SceneGraphTree=Fa;Gc.SceneGraphTree=Fa;Fa=function(Oc){var Va=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),kd=Va.hasOwnProperty("MorphContainer")&&"function"===typeof Va.MorphContainer?Va.MorphContainer:Va.MorphContainer=function(Ka){Ka&&Ka[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ra(kd,Oc,[{key:"refresh",value:function(){var Ka=
this,Wa,db;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zc){Wa=Ka.target;if(!Wa)return Zc.return();Ka.reactsToPointer=!0;Ka.dropShadow=!1;Ka.submorphs=[Ka.getLabel(),Wa.layout&&Ka.getLayoutControls(),Ka.getConnectionControls()].filter(Boolean).map(function(xd,Wd){xd.fitIfNeeded();xd.left=db?db.right+5:0;xd.top=2;return db=xd});Ka.height=20;Ka.opacity=Wa.visible?1:.5;Zc.jumpToEnd()})}},{key:"getLabel",value:function(){var Ka=this.getSubmorphNamed("name label")||Gc.morph({type:"label",
name:"name label",reactsToPointer:!1,padding:Gc.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),Wa=Ka.textString.slice(2,-1);Wa&&Wa==this.target.name||(Ka.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return Ka}},{key:"getIcon",value:function(Ka){return Gc.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[Ka.constructor.className]||
"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var Ka=this.getSubmorphNamed("layout label")||Gc.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:Gc.Rectangle.inset(4,2,4,2),fill:Gc.Color.orange,fontColor:Gc.Color.white});Ka._isControlElement=!0;Ka.textString!=this.target.layout.name()&&(Ka.value=this.target.layout.name());return Ka}},{key:"getConnectionControls",value:function(){this.connectionCount=
this.target.attributeConnections?this.target.attributeConnections.filter(function(db){return!db.targetObj.isHalo}).length:0;var Ka=this.getSubmorphNamed("connections label")||Gc.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:Gc.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:Gc.Color.red,fontColor:Gc.Color.white});Ka._isControlElement=!0;Ka.visible=!this.connectionHalo&&!!this.connectionCount;var Wa=this.connectionCount?this.connectionCount+" connection"+
(1<this.connectionCount?"s":""):"Manage Connections";Ka.textString!=Wa&&(Ka.value=Wa);return Ka}},{key:"highlightTerm",value:function(Ka){var Wa=this.submorphs[0],db=Wa.textAndAttributes.slice(0,2),Zc=Wa.textString.slice(1).split(Ka);Wa.textAndAttributes=1===Zc.length?[].concat($jscomp.arrayFromIterable(db),[Zc[0]]):[].concat($jscomp.arrayFromIterable(db),$jscomp.arrayFromIterable(Gc.arr.flatten(Gc.arr.interpose(Zc.map(function(xd){return[xd,{}]}),[Ka,{fontWeight:"900"}]))))}},{key:"getClassControls",
value:function(){}},{key:"wantsToBeDroppedOn",value:function(Ka){var Wa=ra._get(Object.getPrototypeOf(kd.prototype),"wantsToBeDroppedOn",this).call(this,Ka);if(![Ka].concat($jscomp.arrayFromIterable(Ka.ownerChain())).includes(this.tree))this.onDragOutside();return Wa}},{key:"onGrab",value:function(Ka){var Wa=this,db;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zc){if(1==Zc.nextAddress)return Wa.tree._dropInProgress=!0,db=Wa.target.globalPosition,ra._get(Object.getPrototypeOf(kd.prototype),
"onGrab",Wa).call(Wa,Ka),Wa._data.globalTargetPosition=db,Zc.yield(Wa.whenRendered(),2);if(Wa.tree.fullContainsWorldPoint(Wa.globalPosition))Wa.leftCenter=Gc.pt(-20,0);else Wa.onDragOutside();Wa.tree._dropInProgress=!1;Zc.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=Gc.fun.createQueue("container-hover-queue",function(Ka,Wa){var db,Zc,xd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wd){if(1==Wd.nextAddress)return db=
Ka.target,Zc=db.opacity,xd=db.scale,Ka.target.opacity=0,Ka.target.scale=.5,$world.halos().forEach(function(le){return le.remove()}),$world.firstHand.grab(Ka.target),Ka.target._data=Ka._data,Ka.remove(),Ka.target.position=Gc.pt(0,0),Wd.yield(Ka.target.animate({opacity:Zc,scale:xd,duration:200}),2);Wa();Wd.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(Ka){var Wa=this.node.children.indexOf(Ka.node||Ka._data)+1;Wa=this.node.children[Wa];Ka.target.remove();Wa?(Wa=this.target.submorphs.indexOf(Wa.container.target),
this.target.addMorphAt(Ka.target,Wa)):this.target.addMorph(Ka.target);Ka._data.globalTargetPosition&&(Ka.target.position=this.target.localize(Ka._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(Ka){}},{key:"toggleConnectionControl",value:function(Ka){this.getSubmorphNamed("connections label").visible=Ka}},{key:"toggleSelected",value:function(Ka){var Wa=this,db,Zc,xd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wd){if(1==Wd.nextAddress)return ra._get(Object.getPrototypeOf(kd.prototype),
"toggleSelected",Wa).call(Wa,Ka),Wa._active===Ka?Wd.return():(Wa._active=Ka)&&Wa.target&&Wa.target.isMorph&&Wa.world()?Wd.yield(Wa.target.whenRendered(),3):Wd.jumpTo(0);Wa.get("inspector").targetObject=Wa.target;Wa.get("connections tree").inspectConnectionsOf(Wa.target);if(Wa.connectionHalo)return Wd.return();db=$jscomp.makeIterator(Wa.world().halos());for(Zc=db.next();!Zc.done;Zc=db.next()){xd=Zc.value;if(xd.target===Wa.target)return Wd.return();xd.remove()}Gc.noUpdate({sourceObj:Wa.world(),targetObj:Wa.sideBar,
sourceAttribute:"showHaloFor",targetAttribute:"selectNode"},function(){return Wa.world().showHaloFor(Wa.target)});Wd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(Ka){this.submorphs[0].fontFamily=Ka}},fontColor:{after:["submorphs"],derived:!0,set:function(Ka){this.submorphs[0].fontColor=Ka}},fontSize:{derived:!0,set:function(Ka){this.submorphs[0].fontSize=
Ka}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],Va,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:17212,end:24827})}(Gc.InteractiveTreeContainer);Gc.MorphContainer=Fa;Gc.MorphContainer=Fa;Gc.MorphContainer=Fa;var Ea=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");Ea.visualizeConnection=function(Oc,Va,kd,Ka,Wa){Ka=void 0===Ka?{}:Ka;Wa=Ea.rect(0).sides.concat(Ea.rect(0).corners);
kd=kd||new Ea.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Ea.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Ea.Color.transparent,nativeCursor:"auto"},end:{fill:Ea.Color.orange}}},Ka,{hasFixedPosition:!0}));kd.startPoint.attachTo(Oc,"rightCenter");Va.isMorph?(Ka=Va.globalBounds().partNameNearest(Wa,Oc.globalPosition),Oc.globalPosition.equals(Va.globalBounds().partNamed(Ka))&&Va.globalBounds().partNameNearest(Ea.arr.without(Wa,Ka),Oc.globalPosition),kd.endPoint.attachTo(Va,
"leftCenter")):(Wa=Oc.globalBounds().topRight().addPt(Ea.pt(100,0)),Va=Ea.morph({type:"label",value:Va.toString(),styleClasses:["Tooltip"],padding:Ea.rect(8,4)}).openInWorld(Wa),Va.position=Oc.world().bounds().translateForInclusion(Va.bounds()).topLeft(),Ea.once(kd,"remove",Va,"remove"),kd.endPoint.attachTo(Va,"leftCenter"));return kd};Ea.startConnecting=function(Oc,Va){Oc.animate({opacity:.8,duration:300});Oc.startPoint.attachTo(Va,"center");Oc.vertices[0].position=Ea.pt(2,2)};Ea.stopConnecting=
function(Oc,Va,kd,Ka){function Wa(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wd){if(1==Wd.nextAddress)return Wd.yield(Oc.animate({opacity:0,duration:300}),2);Oc.startPoint.clearConnection();Oc.endPoint.clearConnection();Oc.remove();Wd.jumpToEnd()})}Ka=void 0===Ka?"sourceAttrName":Ka;var db,Zc,xd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wd){return 1==Wd.nextAddress?(db=Oc,Zc=db.endPoint,(xd=Zc.connectedMorph)&&"MorphContainer"==xd.constructor.className&&(xd=xd.target),
xd?Wd.yield(Ea.interactiveConnectGivenSourceAndTarget(kd,Ka,xd),2):Wd.jumpTo(2)):Wd.yield(Wa(),0)})};Ea.editConnection=function(Oc){var Va=Oc.connection,kd=Oc.connectionPoint,Ka;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wa){if(1==Wa.nextAddress)return Ka=Ea.visualizeConnection(kd,Va.targetObj,!1,{borderColor:Ea.Color.gray.darker(),endpointStyle:{start:{fill:Ea.Color.transparent,nativeCursor:"auto"},end:{fill:Ea.Color.gray.darker()}}}),Wa.yield(Ea.interactivelyReEvaluateConnection(Va,
"Edit Connection",!1),2);Ka.remove();Wa.jumpToEnd()})};Ea.Tree=Ub;Ea.TreeData=Hb;Ea.Icon=Wb;Ea.morph=Bd;Ea.pt=Mb;Ea.Rectangle=$a;Ea.rect=Fc;Ea.Color=Kc;Ea.arr=Wc;Ea.connect=Jc;Ea.signal=rb;Ea.Leash=vb;Ea.once=qb;Ea.interactivelyReEvaluateConnection=Da;Ea.interactiveConnectGivenSource=T;Ea.interactiveConnectGivenSourceAndTarget=ua;(function(Oc){var Va=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),kd=Va.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof Va.ConnectionsTreeData?
Va.ConnectionsTreeData:Va.ConnectionsTreeData=function(Ka){Ka&&Ka[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ra(kd,Oc,[{key:"parseMorphConnections",value:function(Ka){for(var Wa={},db=$jscomp.makeIterator(void 0===Ka.attributeConnections?[]:Ka.attributeConnections),Zc=db.next();!Zc.done;Zc=db.next())Zc=Zc.value,Zc.targetObj.isHalo||(Wa[Zc.sourceAttrName]=Wa[Zc.sourceAttrName]||[{name:["      New Connection  ",{fontColor:Ea.Color.white.withA(.5),
fontStyle:"italic"},this.renderPin(Ka,Zc.sourceAttrName),{}]}],Ea.arr.pushAt(Wa[Zc.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(Zc)))},0));return{children:Object.entries(Wa).map(function(xd){var Wd=$jscomp.makeIterator(xd);xd=Wd.next().value;Wd=Wd.next().value;return{name:[xd,{fontWeight:"bold"}," ",{},Ea.morph({fill:Ea.Color.white,opacity:.7,value:""+(Wd.length-1),borderRadius:15,fontWeight:"bold",padding:Ea.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],
children:Wd}}).concat([{name:["New Connection  ",{fontColor:Ea.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(Ka),{}]}])}}},{key:"renderExistingConnection",value:function(Ka){var Wa=this,db=Ea.morph({type:"label",fontColor:Ea.Color.gray,fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(Ea.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},Ka.targetMethodName,{}])}),Zc=this.renderDeadPin(),xd=Zc.submorphs[0];Ea.connect(db,"onHoverIn",function(){db.fontColor=
Ea.Color.orange;db._leash=Ea.visualizeConnection(xd,Ka.targetObj,db._leash);xd.fill=Ea.Color.orange;xd.border={color:Ea.Color.orange,width:3}});Ea.connect(db,"onMouseDown",function(Wd){return $jscomp.asyncExecutePromiseGeneratorProgram(function(le){if(1==le.nextAddress)return Wd.stop(),le.yield(Ea.interactivelyReEvaluateConnection(Ka),2);Ea.signal(Wa,"refresh");le.jumpToEnd()})});Ea.connect(db,"onHoverOut",function(){db.fontColor=Ea.Color.gray;xd.fill=Ea.Color.gray;xd.border={color:Ea.Color.white,
width:1};db._leash.remove();db._leash=void 0});return[db,{},"  ",{}].concat($jscomp.arrayFromIterable(Ea.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){Ka.disconnect();Ea.signal(Wa,"refresh")}})),["  ",{},Zc,{}])}},{key:"renderDeadPin",value:function(){var Ka=Ea.morph({type:"ellipse",fill:Ea.Color.gray,extent:Ea.pt(10,10),center:Ea.pt(8,12),borderWidth:1});return Ea.morph({extent:Ea.pt(20,20),fill:Ea.Color.transparent,reactsToPointer:!1,submorphs:[Ka]})}},{key:"renderPin",
value:function(Ka,Wa){var db=this,Zc=Ea.morph({type:"ellipse",fill:Ea.Color.gray.withA(.5),extent:Ea.pt(10,10),center:Ea.pt(8,12),draggable:!1,borderWidth:1}),xd=new Ea.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:Ea.Color.gray.darker(),endpointStyle:{fill:Ea.Color.gray.darker()},position:Ea.pt(1,1),vertices:[Ea.pt(0,0),Ea.pt(0,0)],canConnectTo:function(Wd){return"MorphContainer"==Wd.constructor.className||2>Ea.arr.intersect([Wd].concat($jscomp.arrayFromIterable(Wd.ownerChain())),
[Zc].concat($jscomp.arrayFromIterable(Zc.ownerChain()))).length}});Zc.addMorph(xd);Ea.connect(xd.endPoint,"onDragStart",function(){Ea.startConnecting(xd,Zc)});Ea.connect(xd.endPoint,"onDragEnd",function(Wd){return $jscomp.asyncExecutePromiseGeneratorProgram(function(le){if(1==le.nextAddress)return Zc.center=Ea.pt(8,12),le.yield(Ea.stopConnecting(xd,Zc,Ka,Wa),2);Ea.signal(db,"refresh");le.jumpToEnd()})});return Ea.morph({extent:Ea.pt(20,20),fill:Ea.Color.transparent,reactsToPointer:!1,submorphs:[Zc]})}},
{key:"display",value:function(Ka){return Ka.name}},{key:"collapse",value:function(Ka,Wa){Ka.isCollapsed=Wa}},{key:"isCollapsed",value:function(Ka){return Ka.isCollapsed}},{key:"isLeaf",value:function(Ka){return!Ka.children}},{key:"getChildren",value:function(Ka){return Ka.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(Ka){var Wa=new this;Wa.root=Wa.parseMorphConnections(Ka);return Wa}}],Va,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3535,end:8087})})(Ea.TreeData);Fa=function(Oc){var Va=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),kd=Va.hasOwnProperty("ConnectionsTree")&&"function"===typeof Va.ConnectionsTree?Va.ConnectionsTree:Va.ConnectionsTree=function(Ka){Ka&&Ka[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ra(kd,Oc,[{key:"inspectConnectionsOf",value:function(Ka){if(this.targetMorph=Ka)this.treeData=Ea.ConnectionsTreeData.for(Ka),Ea.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=Ea.ConnectionsTreeData.for(this.targetMorph),Ea.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},
{key:"properties",get:function(){return{}}}],Va,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8104,end:8657})}(Ea.Tree);Fa=Ea.ConnectionsTree;Ea.default=Fa}}});