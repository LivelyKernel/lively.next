System.register(["./__root_module__-be0d56fe.js"],function(Pa){var Lb,Vb,Dc,jc,qd,id,Cd,bd,Wc,Zc,zd,me,te,Je,jd,Zd;return{setters:[function(gc){Lb=gc.s;Vb=gc.P;Dc=gc.a;jc=gc.v;qd=gc.w;id=gc.x;Cd=gc.y;bd=gc.r;Wc=gc.z;Zc=gc.A;zd=gc.E;me=gc.D;te=gc.F;Je=gc.G;jd=gc.H;Zd=gc.J}],execute:function(){function gc(Zb,Gc,xd,Ic){Ic=void 0===Ic?{}:Ic;Ic=Ic.package||fd.ObjectPackage.lookupModuleForClass(Zb.constructor,Ic);if(!Ic)throw Error("Object is not part of an object package: "+Zb);return Ic.addScript(Zb,
Gc,xd)}function $c(Zb,Gc){Gc=fd.normalizeOptions(Gc).System;Zb=(Zb=Zb[Symbol.for("lively-module-meta")])?Zb.package.name:null;return(Gc=(Zb?fd.lookupPackage(Gc,Zb):{}).pkg)?!!fd.ObjectPackage.forSystemPackage(Gc):!1}function Bd(Zb,Gc){var xd,Ic,Ad,Mb,mb,Ac;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vc){return 1==vc.nextAddress?(xd=Zb.constructor,fd.withSuperclasses(xd),Symbol.for("lively-module-meta"),Ad=Ic=fd.ObjectPackage.lookupPackageForObject(Zb),Mb=Ad.baseURL,mb=Ad.System,vc.yield(Ic.fork(Gc,
{baseURL:Mb,System:mb}),2)):3!=vc.nextAddress?(Ac=vc.yieldResult,vc.yield(fd.adoptObject(Zb,Ac.objectClass),3)):vc.return(Ac.objectClass[Symbol.for("__LivelyClassName__")])})}Pa({addScript:gc,interactivelyForkPackage:Bd,isObjectClass:$c});var fd=lively.FreezerRuntime.recorderFor("lively.classes/object-classes.js");fd.normalizeOptions=function(Zb){Zb=Object.assign({baseURL:fd.defaultBaseURL,System:System},Zb);Zb.baseURL=Zb.baseURL.replace(/\/$/,"");return Zb};fd.addScript=gc;fd.isObjectClass=$c;fd.interactivelyForkPackage=
Bd;fd.string=Lb;fd.Path=Vb;fd.arr=Dc;fd.parse=jc;fd.isValidIdentifier=qd;fd.stringify=id;fd.parseFunction=Cd;fd.resource=bd;fd.runEval=Wc;fd.scripting=Zc;fd.ExportLookup=zd;var Jd=fd.scripting;fd.ensurePackage=Jd.ensurePackage;fd.registerPackage=Jd.registerPackage;fd.importPackage=Jd.importPackage;fd.lookupPackage=Jd.lookupPackage;fd.module=Jd.module;fd.ImportInjector=Jd.ImportInjector;fd.RuntimeSourceDescriptor=me;fd.toJsIdentifier=te;fd.withSuperclasses=Je;fd.adoptObject=jd;fd.classToFunctionTransform=
Zd;fd.objectPackageSym=Symbol.for("lively-object-package-data");fd.defaultBaseURL="local://lively-object-modules";fd.globalClasses=Object.keys(System.global).map(function(Zb){Zb=System.global[Zb];return"function"===typeof Zb&&Zb.name&&Zb}).filter(Boolean);fd.addScript=gc;fd.addScript=gc;fd.isObjectClass=$c;fd.isObjectClass=$c;fd._packageStore=fd._packageStore||{};fd.interactivelyForkPackage=Bd;fd.interactivelyForkPackage=Bd;Jd=function(Zb,Gc){this._id=Zb;this.options=fd.normalizeOptions(Gc)};Jd.lookupPackageForObject=
function(Zb,Gc){return this.lookupPackageForClass(Zb.constructor,Gc)};Jd.lookupPackageForClass=function(Zb,Gc){Gc=fd.normalizeOptions(Gc).System;Zb=(Zb=Zb[Symbol.for("lively-module-meta")])?Zb.package.name:null;return(Gc=(Zb?fd.lookupPackage(Gc,Zb):{}).pkg)?fd.ObjectPackage.forSystemPackage(Gc):null};Jd.lookupModuleForClass=function(Zb,Gc){fd.normalizeOptions(Gc);Gc=this.lookupPackageForClass(Zb,Gc);Zb=Zb[Symbol.for("lively-module-meta")];return new fd.ObjectModule(Zb.pathInPackage,Gc)};Jd.forSystemPackage=
function(Zb){return this.packageStore[Zb.name]};Jd.withId=function(Zb,Gc){return this.packageStore[Zb]||(this.packageStore[Zb]=new this(Zb,Gc))};Jd.prototype.ensureSubModule=function(Zb){Zb=void 0===Zb?"index":Zb;var Gc=this,xd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ic){return 1==Ic.nextAddress?(xd=new fd.ObjectModule(Zb,Gc),Ic.yield(xd.ensureExistance(),2)):Ic.return(xd)})};Jd.prototype.resource=function(Zb){Zb=void 0===Zb?"":Zb;return fd.resource(this.packageURL).join(Zb)};
Jd.prototype.load=function(){return fd.importPackage(this.System,this.packageURL)};Jd.prototype.ensureExistance=function(){var Zb=this,Gc,xd,Ic,Ad,Mb,mb,Ac,vc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ec){switch(ec.nextAddress){case 1:return Gc=Zb.resource("/"),ec.yield(Gc.exists(),2);case 2:if(ec.yieldResult)return ec.return();xd=[{resource:Gc}];Ic=[{resource:Zb.resource("package.json"),content:JSON.stringify(Zb.config,null,2)}];return ec.yield(Promise.all(xd.map(function(Bc){return Bc.resource.mkdir()})),
3);case 3:return ec.yield(Promise.all(Ic.map(function(Bc){var Ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hc){switch(hc.nextAddress){case 1:return hc.yield(Bc.resource.exists(),2);case 2:if(!(Ua=!hc.yieldResult)){hc.jumpTo(3);break}return hc.yield(Bc.resource.write(Bc.content),4);case 4:Ua=hc.yieldResult;case 3:return hc.return(Ua)}})})),4);case 4:return ec.yield(Zb.objectModule.ensureExistance(),5);case 5:return Ad=Zb,Mb=Ad.System,mb=Ad.packageURL,Ac=Ad.config,ec.yield(fd.ensurePackage(Mb,
mb),6);case 6:return vc=ec.yieldResult,vc.registerWithConfig(Ac),console.log(Zb.packageURL+" REGISTERED"),ec.return(Zb)}})};Jd.prototype.ensureObjectClass=function(Zb){var Gc=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xd){return 1==xd.nextAddress?xd.yield(Gc.ensureExistance(),2):xd.return(Gc.objectModule.ensureObjectClass(Zb))})};Jd.prototype.adoptObject=function(Zb){var Gc=this,xd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ic){if(1==Ic.nextAddress)return Gc.objectClass===
Zb.constructor?Ic.return():Ic.yield(Gc.ensureObjectClass(Zb.constructor),2);xd=Ic.yieldResult;fd.adoptObject(Zb,xd);Ic.jumpToEnd()})};Jd.prototype.addScript=function(Zb,Gc,xd){return this.objectModule.addScript(Zb,Gc,xd)};Jd.prototype.remove=function(){this.systemPackage.remove();delete fd.ObjectPackage.packageStore[this.id];return this.resource().remove()};Jd.prototype.renameObjectClass=function(Zb,Gc){Gc=void 0===Gc?[]:Gc;var xd=this,Ic,Ad,Mb,mb,Ac,vc,ec,Bc,Ua,hc,Eb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qc){if(1==
qc.nextAddress){Ic=xd;Ad=Ic.objectClass;Mb=Ic.System;if(!Ad||Ad[Symbol.for("__LivelyClassName__")]===Zb)return qc.return(Ad);if(!fd.isValidIdentifier(Zb))throw Error(Zb+" is not a valid name for a class");Ac=mb=fd.RuntimeSourceDescriptor.for(Ad,Mb);vc=Ac.source;ec=Ac.ast;Bc=ec.id;Ua=Bc.start;hc=Bc.end;return qc.yield(mb.changeSource(vc.slice(0,Ua)+Zb+vc.slice(hc)),2)}Eb=xd.objectClass;Gc.forEach(function(Cc){Cc.constructor=Eb;Cc.__proto__=Eb.prototype});return qc.return(Eb)})};Jd.prototype.fork=function(Zb,
Gc){var xd=this,Ic,Ad,Mb,mb,Ac,vc,ec,Bc,Ua,hc,Eb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qc){switch(qc.nextAddress){case 1:return Ic=xd,Ad=Ic.System,Mb=Ic.baseURL,mb=Ic.objectClass,Gc=Object.assign({System:Ad,baseURL:Mb},Gc),Ac=fd.RuntimeSourceDescriptor.for(mb),vc=Ac._renamedSource(Zb),ec=vc.moduleSource,Bc=fd.ObjectPackage.withId(Zb,Gc),qc.yield(Bc.ensureExistance(),2);case 2:return Ua=Bc,hc=Ua.objectModule,Eb=hc.systemModule,qc.yield(Eb.load({format:"esm"}),3);case 3:return qc.yield(Eb.changeSource(ec),
4);case 4:return qc.return(Bc)}})};$jscomp.global.Object.defineProperties(Jd.prototype,{id:{configurable:!0,enumerable:!0,get:function(){return this._id}},name:{configurable:!0,enumerable:!0,get:function(){return this.id}},System:{configurable:!0,enumerable:!0,get:function(){return this.options.System}},baseURL:{configurable:!0,enumerable:!0,get:function(){return this.options.baseURL}},packageURL:{configurable:!0,enumerable:!0,get:function(){return this.baseURL+("/"+this.id)}},config:{configurable:!0,
enumerable:!0,get:function(){return{name:this.name,version:"0.1.0",lively:{isObjectPackage:!0}}}},systemPackage:{configurable:!0,enumerable:!0,get:function(){return fd.lookupPackage(this.System,this.packageURL,!0).pkg}},objectModule:{configurable:!0,enumerable:!0,get:function(){return this._objectModule||(this._objectModule=new fd.ObjectModule("index.js",this))}},objectClass:{configurable:!0,enumerable:!0,get:function(){return this.objectModule.objectClass}}});$jscomp.global.Object.defineProperties(Jd,
{packageStore:{configurable:!0,enumerable:!0,get:function(){return this._packageStore||(this._packageStore=fd._packageStore)}}});Pa("default",Jd);fd.ObjectPackage=Jd;var fe=function(Zb,Gc){if(!Zb)throw Error("ObjectModule needs package!");if(!Gc)throw Error("ObjectModule needs package!");this._moduleName=Zb;this._objectPackage=Gc};fe.prototype.read=function(){return this.resource.read()};fe.prototype.write=function(Zb){return this.resource.write(Zb)};fe.prototype.ensureExistance=function(){var Zb=
this,Gc,xd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ic){switch(Ic.nextAddress){case 1:return Gc=Zb.resource,Ic.yield(Gc.exists(),2);case 2:if(Ic.yieldResult){Ic.jumpTo(3);break}return Ic.yield(Gc.write("'format esm';\n"),4);case 4:xd={},Zb.System.config({meta:(xd[Zb.url]={format:"esm"},xd)});case 3:return Ic.return(Zb)}})};fe.prototype.adoptObject=function(Zb,Gc){var xd=this,Ic;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ad){if(1==Ad.nextAddress)return xd.objectClass===
Zb.constructor?Ad.return():Ad.yield(xd.ensureObjectClass(Zb.constructor,Gc),2);Ic=Ad.yieldResult;fd.adoptObject(Zb,Ic);Ad.jumpToEnd()})};fe.prototype.ensureObjectClass=function(Zb,Gc){var xd=this,Ic=this.objectClass;return Ic&&Ic.prototype.__proto__===Zb.prototype?Ic:Promise.resolve(this.ensureObjectClassSource(Zb,Gc)).then(function(Ad){var Mb=Ad.source,mb=Ad.moduleId,Ac=Ad.className,vc=Ad.bindings,ec=xd.System;Ad=fd.module(ec,mb);if(vc)for(var Bc in vc)Ad.define(Bc,vc[Bc]);Mb=fd.runEval(Mb,{classTransform:fd.classToFunctionTransform,
sync:!0,targetModule:mb,System:ec});if(Mb.isError)throw Mb.value;Mb=Ad.recorder[Ac];if(!Mb)throw Error("Failed to define class "+Ac+" in "+mb);return Mb})};fe.prototype.ensureObjectClassSource=function(Zb,Gc){return this.createDefaultClassDeclaration(Zb,Gc)};fe.prototype.createDefaultClassDeclaration=function(Zb,Gc){Zb=void 0===Zb?Object:Zb;Gc=void 0===Gc?!1:Gc;var xd=this,Ic,Ad,Mb,mb,Ac,vc,ec,Bc,Ua,hc,Eb,qc,Cc,Yc,rd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fc){switch(fc.nextAddress){case 1:Ic=
xd;Ad=Ic.System;Mb=Ic.systemModule;mb=Ic.objectPackage;Gc=Gc||fd.string.capitalize(fd.toJsIdentifier(mb.id));Ac=Zb[Symbol.for("__LivelyClassName__")];vc=!Ac;ec=fd.globalClasses.includes(Zb);Bc="";Ua=null;if(vc){Ac="__anonymous_superclass__";hc={};Ua=(hc[Ac]=Zb,hc);fc.jumpTo(2);break}if(ec){fc.jumpTo(2);break}return fc.yield(fd.ExportLookup.findExportOfValue(Zb,Ad),4);case 4:(Eb=fc.yieldResult)?(qc=fd.ImportInjector.run(Ad,Mb.id,Mb.package(),"",Eb),Cc=qc.standaloneImport,Bc+=Cc+"\n\n"):(Yc={},Ua=(Yc[Ac]=
Zb,Yc));case 2:return Gc===Ac&&(Gc="Object"+Gc),rd="Object"===Ac?"class "+Gc+" {}\n":"class "+Gc+" extends "+Ac+" {}\n",Bc+="export default "+rd+"\n",fc.yield(Mb.changeSource(Bc),5);case 5:return fc.yield(Mb.load(),6);case 6:return fc.return({source:Bc,className:Gc,moduleId:xd.url,bindings:Ua})}})};fe.prototype.addScript=function(Zb,Gc,xd){var Ic=this,Ad,Mb,mb,Ac,vc,ec,Bc,Ua,hc,Eb,qc,Cc,Yc,rd,fc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xc){switch(xc.nextAddress){case 1:if(Zb.constructor===
Ic.objectClass){Ad=Zb.constructor;xc.jumpTo(2);break}return xc.yield(Ic.ensureObjectClass(Zb.constructor),3);case 3:Ad=xc.yieldResult;case 2:Mb=Ad;mb="function"===typeof Gc?String(Gc):Gc;Ac=fd.parseFunction(mb);vc=fd.RuntimeSourceDescriptor.for(Mb,Ic.System);xd||(xd=fd.Path("id.name").get(Ac));if(!xd)throw Error("No name, cannot add "+fd.string.truncate(mb,30).replace(/\n/g,"")+"!");ec=fd.toJsIdentifier(xd);console.assert("FunctionExpression"===Ac.type||"ArrowFunctionExpression"===Ac.type,"not a function expression but: "+
Ac.type);Bc=Ac.params.map(function(bc){return mb.slice(bc.start,bc.end)});Ua="BlockStatement"===Ac.body.type?mb.slice(Ac.body.start,Ac.body.end):"{ return "+mb.slice(Ac.body.start,Ac.body.end)+" }";hc=ec+"("+Bc.join(",")+") "+Ua;"ArrowFunctionExpression"===Ac.type&&(Ac.type="FunctionExpression");Eb=vc.source;qc=vc.ast;if(!qc)throw Error("cannot find class decl of "+vc.module.id);(Cc=qc.body.body.find(function(bc){return bc.key.name===ec&&!bc.static}))?Eb=Eb.slice(0,Cc.start)+hc+Eb.slice(Cc.end):(Yc=
Eb.lastIndexOf("}"),rd=Eb.slice(0,Yc),fc=Eb.slice(Yc),/\n\s*$/m.test(rd)||(rd+="\n"),hc=fd.string.changeIndent(hc,"  ",1),/^[ ]*\n/m.test(fc)||(fc="\n"+fc),Eb=rd+hc+fc);return xc.yield(vc.changeSource(Eb),4);case 4:return xc.return({script:Mb.prototype[ec],klass:Mb,module:vc.module.id,methodName:ec})}})};$jscomp.global.Object.defineProperties(fe.prototype,{objectPackage:{configurable:!0,enumerable:!0,get:function(){return this._objectPackage}},objectClass:{configurable:!0,enumerable:!0,get:function(){var Zb=
this.systemModule;return Zb.isLoaded()?Zb.System.get(Zb.id).default:null}},moduleName:{configurable:!0,enumerable:!0,get:function(){return this._moduleName}},systemModule:{configurable:!0,enumerable:!0,get:function(){return fd.module(this.System,this.url)}},System:{configurable:!0,enumerable:!0,get:function(){return this.objectPackage.System}},resource:{configurable:!0,enumerable:!0,get:function(){return this.objectPackage.resource(this.moduleName)}},url:{configurable:!0,enumerable:!0,get:function(){return this.resource.url}}});
fd.ObjectModule=fe;fd.default=Jd}}});